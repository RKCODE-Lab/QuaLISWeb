{"ast":null,"code":"var _jsxFileName = \"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\branches\\\\SOURCE-513-PROD\\\\SOURCE-513-ALPD-5304\\\\QuaLISWeb\\\\src\\\\pages\\\\subcontractsamples\\\\SubContractTestDetail.jsx\";\nimport React, { Component } from 'react';\nimport { Col, Row } from 'react-bootstrap';\nimport { injectIntl } from 'react-intl';\nimport 'react-perfect-scrollbar/dist/css/styles.css';\nimport { connect } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { addFile, callService, crudMaster, getSubContractorComboService, saveSubcontractorTestFile, updateReceiveResultSubContractTest, updateReceiveSTTSubContractTest, updateStore, updateSubContractSamplesdetails, viewDetail, viewAttachment } from '../../actions';\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\nimport { create_UUID, deleteAttachmentDropZone, getControlMap, Lims_JSON_stringify, onDropAttachFileList, showEsign } from '../../components/CommonScript';\nimport { attachmentType, transactionStatus } from '../../components/Enumeration';\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\nimport Esign from '../audittrail/Esign'; // import './product.css';\n\nimport { process } from '@progress/kendo-data-query';\nimport DataGrid from '../../components/data-grid/data-grid.component';\nimport { ListWrapper } from '../userroletemplate/userroletemplate.styles';\nimport AddSubContractorTestAttchment from './AddSubContractorTestAttchment';\nimport SendSubContractor from './SendSubContractor';\nimport ViewRecord from './viewRecord';\n\nclass SubContractTestDetail extends Component {\n  constructor(props) {\n    super(props);\n\n    this.closeModal = () => {\n      let loadEsign = this.props.Login.loadEsign;\n      let openModal = this.props.Login.openModal;\n      let openChildModal = this.props.Login.openChildModal;\n      let selectedRecord = this.props.Login.selectedRecord;\n      let selectedId = this.props.Login.selectedId;\n\n      if (this.props.Login.loadEsign) {\n        if (this.props.Login.operation === \"sendsubcontractor\") {\n          loadEsign = false;\n          openModal = false;\n          openChildModal = false;\n          selectedRecord = {};\n        } else {\n          loadEsign = false;\n          selectedRecord['esignpassword'] = \"\";\n          selectedRecord['esigncomments'] = \"\";\n          selectedRecord['esignreason'] = \"\";\n          selectedRecord = {};\n        }\n      } else {\n        openModal = false;\n        openChildModal = false;\n        selectedRecord = {};\n        selectedId = null;\n      }\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openModal,\n          openChildModal,\n          loadEsign,\n          selectedRecord,\n          selectedId\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.dataStateChange = event => {\n      this.setState({\n        dataResult: process(this.state.data, event.dataState),\n        dataState: event.dataState\n      });\n    };\n\n    this.viewFile = inputParam => {\n      //let inputData = {}\n      let inputParamData = { ...inputParam,\n        inputData: { ...inputParam.inputData,\n          subcontractortestdetail: inputParam.inputData.selectedRecord\n        }\n      };\n      this.props.viewAttachment(inputParamData);\n    };\n\n    this.onSaveSubContractorTestFile = (saveType, formRef) => {\n      const selectedRecord = this.state.selectedRecord;\n      const acceptedFiles = selectedRecord.sfilename;\n      const nattachmenttypecode = selectedRecord.nattachmenttypecode;\n      let isFileEdited = selectedRecord.editable ? selectedRecord.editable : transactionStatus.ALL;\n      let FileArray = [];\n\n      if (isFileEdited == 1) {\n        let subcontractorTestFile = {\n          nsubcontractortestdetailcode: selectedRecord.subcontractortestdetail.nsubcontractortestdetailcode,\n          nattachmenttypecode\n        };\n        const formData = new FormData();\n\n        if (nattachmenttypecode === attachmentType.FTP) {\n          if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\n            acceptedFiles.forEach((file, index) => {\n              const tempData = Object.assign({}, subcontractorTestFile);\n              const splittedFileName = file.name.split('.');\n              const fileExtension = file.name.split('.')[splittedFileName.length - 1];\n              const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\n              const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\n              const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.nsupplierfilecode && selectedRecord.nsupplierfilecode > 0 && selectedRecord.ssystemfilename !== \"\" && selectedRecord.ssystemfilename !== undefined ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\n              tempData[\"sfilename\"] = Lims_JSON_stringify(file.name, false); //tempData[\"sdescription\"] = Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\", false);\n\n              tempData[\"nlinkcode\"] = transactionStatus.NA;\n              tempData[\"ssystemfilename\"] = uniquefilename;\n              tempData[\"nfilesize\"] = file.size;\n              formData.append(\"uploadedFile\" + index, file);\n              formData.append(\"uniquefilename\" + index, uniquefilename);\n              FileArray.push(tempData);\n            });\n            formData.append(\"filecount\", acceptedFiles.length);\n            isFileEdited = transactionStatus.YES;\n          } else {\n            subcontractorTestFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename, false); // subcontractorTestFile[\"sdescription\"] = Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\", false);\n\n            subcontractorTestFile[\"nlinkcode\"] = transactionStatus.NA;\n            subcontractorTestFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\n            subcontractorTestFile[\"nfilesize\"] = selectedRecord.nfilesize;\n            FileArray.push(subcontractorTestFile);\n          }\n        } else {\n          subcontractorTestFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.slinkfilename.trim(), false); //subcontractorTestFile[\"sdescription\"] = Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\", false);\n\n          subcontractorTestFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\n          subcontractorTestFile[\"ssystemfilename\"] = \"\";\n          subcontractorTestFile[\"nfilesize\"] = 0;\n          FileArray.push(subcontractorTestFile);\n        }\n\n        formData.append(\"isFileEdited\", isFileEdited);\n        formData.append(\"subcontractorFile\", JSON.stringify(FileArray));\n        formData.append(\"userinfo\", JSON.stringify(this.props.Login.userInfo));\n        const inputParam = {\n          inputData: {\n            \"userinfo\": { ...this.props.Login.userInfo,\n              sformname: Lims_JSON_stringify(this.props.Login.userInfo.sformname),\n              smodulename: Lims_JSON_stringify(this.props.Login.userInfo.smodulename),\n              slanguagename: Lims_JSON_stringify(this.props.Login.userInfo.slanguagename)\n            }\n          },\n          formData: formData,\n          isFileupload: true,\n          operation: \"fileattachment\",\n          classUrl: \"subcontracttestdetail\",\n          saveType,\n          formRef,\n          methodUrl: \"updateSubcontractorTestFile\",\n          selectedRecord: { ...this.state.selectedRecord\n          }\n        };\n        this.props.saveSubcontractorTestFile(inputParam, this.props.Login.masterData);\n      } else {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loading: false,\n            openModal: false,\n            selectedRecord: {}\n          }\n        };\n        return this.props.updateStore(updateInfo);\n      }\n    };\n\n    this.deleteAttachment = (event, file, fieldName) => {\n      let selectedFile = this.state.selectedRecord || {};\n      selectedFile[fieldName] = deleteAttachmentDropZone(selectedFile[fieldName], file);\n      this.setState({\n        selectedFile,\n        actionType: \"delete\"\n      });\n    };\n\n    this.onDropFile = (attachedFiles, fieldName, maxSize, editable) => {\n      let selectedRecord = this.state.selectedRecord || {};\n      let neditable = 0;\n\n      if (neditable != undefined) {\n        selectedRecord[editable] = 1;\n      }\n\n      selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize);\n      this.setState({\n        selectedRecord,\n        actionType: \"new\"\n      });\n    };\n\n    this.onInputOnChange = (event, optional, editfield) => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (editfield != undefined) {\n        selectedRecord[editfield] = 1;\n      }\n\n      if (event.target.type === 'checkbox') {\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\n      } else if (event.target.type === \"radio\") {\n        selectedRecord[event.target.name] = optional;\n      } else {\n        selectedRecord[event.target.name] = event.target.value;\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onComboChange = (comboData, fieldName, editfield) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[fieldName] = comboData;\n\n      if (editfield != undefined) {\n        selectedRecord[editfield] = 1;\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.reloadData = () => {\n      const inputParam = {\n        inputData: {\n          \"userinfo\": this.props.Login.userInfo\n        },\n        classUrl: this.props.Login.inputParam.classUrl,\n        methodUrl: this.props.Login.inputParam.methodUrl,\n        displayName: this.props.Login.displayName,\n        userInfo: this.props.Login.userInfo\n      };\n      this.props.callService(inputParam);\n    };\n\n    this.onSaveClick = (saveType, formRef) => {\n      if (this.props.Login.operation == \"fileattachment\") {\n        return this.onSaveSubContractorTestFile(saveType, formRef);\n      }\n\n      let inputData = [];\n      let dataState = undefined;\n      let selectedId = null;\n      dataState = this.state.dataState;\n      selectedId = this.props.Login.selectedRecord['subcontractortestdetail'].nsubcontractortestdetailcode;\n      inputData[\"userinfo\"] = this.props.Login.userInfo;\n      inputData[\"subcontractortestdetail\"] = this.state.selectedRecord['subcontractortestdetail'];\n      inputData[\"subcontractortestdetail\"]['nsuppliercode'] = this.state.selectedRecord['nsuppliercode'].value;\n      inputData[\"subcontractortestdetail\"]['ncontrolleadtime'] = this.state.selectedRecord['nsuppliercode'].item.ncontrolleadtime;\n      inputData[\"subcontractortestdetail\"]['nperiodcode'] = this.state.selectedRecord['nsuppliercode'].item.nperiodcode;\n      inputData[\"subcontractortestdetail\"]['sremarks'] = this.state.selectedRecord['sremarks']; // if (inputData[\"subcontractordetails\"].hasOwnProperty('esignpassword')) {\n      //     if (inputData[\"subcontractordetails\"]['esignpassword'] === '') {\n      //         delete inputData[\"subcontractordetails\"]['esigncomments']\n      //         delete inputData[\"subcontractordetails\"]['esignpassword']\n      //     }\n      // }\n\n      const inputParam = {\n        classUrl: this.props.Login.inputParam.classUrl,\n        methodUrl: \"updateSubContractSamplesdetails\",\n        displayName: this.props.Login.inputParam.displayName,\n        inputData: inputData,\n        selectedId,\n        dataState,\n        operation: this.props.Login.operation,\n        saveType,\n        formRef,\n        searchRef: this.searchRef,\n        selectedRecord: { ...this.state.selectedRecord\n        }\n      };\n      const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode);\n\n      if (esignNeeded) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData: this.props.Login.masterData\n            },\n            openModal: true,\n            screenName: \"IDS_SENDSUBCONTRACTOR\",\n            operation: this.props.Login.operation\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.updateSubContractSamplesdetails(inputParam, this.props.Login.masterData, \"openModal\", \"\", \"\");\n      }\n    };\n\n    this.validateEsign = () => {\n      let modalName = this.props.Login.screenName === this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \" + this.props.intl.formatMessage({\n        id: \"IDS_FILE\"\n      })) ? \"openChildModal\" : \"openModal\";\n      const inputParam = {\n        inputData: {\n          \"userinfo\": { ...this.props.Login.userInfo,\n            sreason: this.state.selectedRecord[\"esigncomments\"],\n            nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\n            spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label\n          },\n          password: this.state.selectedRecord[\"esignpassword\"]\n        },\n        screenData: this.props.Login.screenData\n      };\n      this.props.validateEsignCredential(inputParam, modalName);\n    };\n\n    this.formRef = React.createRef();\n    const _dataState = {\n      skip: 0,\n      take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\n    };\n    this.state = {\n      data: [],\n      masterStatus: \"\",\n      error: \"\",\n      selectedRecord: {},\n      dataResult: [],\n      dataState: _dataState,\n      userRoleControlRights: [],\n      controlMap: new Map()\n    };\n    this.searchRef = React.createRef();\n    this.confirmMessage = new ConfirmMessage();\n    this.extractedColumnList = [{\n      \"idsName\": \"IDS_TEST\",\n      \"dataField\": \"stestname\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_SUBCONTRACTOR\",\n      \"dataField\": \"ssuppliername\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_EXPECTEDDATE\",\n      \"dataField\": \"sexpecteddate\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_CONTROLLEADTIME\",\n      \"dataField\": \"scontrolleaddate\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_FILENAME\",\n      \"dataField\": \"sfilename\",\n      \"width\": \"200px\",\n      \"fieldType\": \"attachment\"\n    }, {\n      \"idsName\": \"IDS_ARNO\",\n      \"dataField\": \"sarno\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_SAMPLEARNO\",\n      \"dataField\": \"ssamplearno\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_DISPLAYSTATUS\",\n      \"dataField\": \"stransdisplaystatus\",\n      \"width\": \"200px\"\n    }];\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\n      toast.warn(props.Login.masterStatus);\n      props.Login.masterStatus = \"\";\n    }\n\n    if (props.Login.error !== state.error) {\n      toast.error(props.Login.error);\n      props.Login.error = \"\";\n    }\n\n    return null;\n  }\n\n  /*actionMethod = (value) => {\r\n      if (value.method === templateMappingAction.CONFIGSAMPLEDISPLAY) {\r\n          this.openFieldConfiguration(value.controlId, \"configure\");\r\n      }\r\n      else if (value.method === templateMappingAction.CONFIGSAMPLEEDIT) {\r\n          this.editFieldConfiguration(value.controlId, 'configureedit')\r\n      }\r\n      else if (value.method === templateMappingAction.CONFIGSUBSAMPLEDISPLAY) {\r\n          this.openFieldConfiguration(value.controlId, 'configuresubsample')\r\n      }\r\n      else if (value.method === templateMappingAction.CONFIGSUBSAMPLEEDIT) {\r\n          this.editFieldConfiguration(value.controlId, 'configuresubsampleedit')\r\n      }\r\n      else if (value.method === templateMappingAction.CONFIGUNIQUE) {\r\n          this.openCombinationUniqueFieldConfiguration(value.controlId)\r\n      }\r\n      else if (value.method === templateMappingAction.CONFIGSAMPLEAUDIT) {\r\n          this.auditFieldConfiguration(value.controlId, 'configureaudit')\r\n      }\r\n      // else if (value.method === templateMappingAction.CONFIGSENDTOSTORE) {\r\n      //     this.mappingFieldConfiguration(value.controlId, 'configuresendtostore')\r\n      // }\r\n      else if (value.method === templateMappingAction.CONFIGEXPORTFIELDS) {\r\n          this.exportFieldConfiguration(value.controlId, 'configureexportfields')\r\n      }\r\n      else if (value.method === templateMappingAction.CONFIGURECHECKLIST) {\r\n          this.configureCheckList(value.controlId, 'configurechecklist')\r\n      }\r\n      else if (value.method === templateMappingAction.CONFIGURERELEASESAMPLEFILTER) {\r\n          this.configureReportFilterType(value.controlId, 'configurereleasesamplefilter')\r\n      }\r\n  } */\n  render() {\n    const SendToSubContractorId = this.props.controlMap && this.props.controlMap.has(\"SendToSubContractor\") && this.props.controlMap.get(\"SendToSubContractor\").ncontrolcode;\n    const ReceivedBySTTId = this.props.controlMap && this.props.controlMap.has(\"ReceivedBySTT\") && this.props.controlMap.get(\"ReceivedBySTT\").ncontrolcode;\n    const ResultReceivedId = this.props.controlMap && this.props.controlMap.has(\"ResultReceived\") && this.props.controlMap.get(\"ResultReceived\").ncontrolcode;\n    const SubContTestAttachmentId = this.props.Login.inputParam && this.state.controlMap.has(\"SubContTestAttachment\") && this.state.controlMap.get(\"SubContTestAttachment\").ncontrolcode;\n    const viewDetailId = this.props.Login.inputParam && this.state.controlMap.has(\"ViewSubContractorTestDetail\") && this.state.controlMap.get(\"ViewSubContractorTestDetail\").ncontrolcode;\n    const attachmentParam = {\n      operation: \"view\",\n      classUrl: \"subcontracttestdetail\",\n      methodUrl: \"SubcontractorTestFile\"\n    };\n    /* let actionList = []\r\n       if (SendToSubContractorId) {\r\n         actionList.push({ \"method\": 1, \"value\": this.props.intl.formatMessage({ id: \"IDS_SEND\" }), \"controlId\": SendToSubContractorId })\r\n       }\r\n     if (ReceivedBySTTId) {\r\n         actionList.push({ \"method\": 1, \"value\": this.props.intl.formatMessage({ id: \"IDS_RECEIVEDBYSTT\" }), \"controlId\": ReceivedBySTTId })\r\n       }\r\n     if (ResultReceivedId) {\r\n         actionList.push({ \"method\": 1, \"value\": this.props.intl.formatMessage({ id: \"IDS_RESULTRECEIVEDBY\" }), \"controlId\": ResultReceivedId })\r\n       }\r\n     if (SubContTestAttachmentId) {\r\n         actionList.push({ \"method\": 1, \"value\": this.props.intl.formatMessage({ id: \"IDS_ATTCHMENT\" }), \"controlId\": SubContTestAttachmentId })\r\n       }\r\n     if (viewDetailId) {\r\n         actionList.push({ \"method\": 1, \"value\": this.props.intl.formatMessage({ id: \"IDS_VIEWDETAIL\" }), \"controlId\": viewDetailId })\r\n       }*/\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(ListWrapper, {\n      className: \"client-list-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }\n    }, this.state.data ? /*#__PURE__*/React.createElement(DataGrid, {\n      primaryKeyField: \"nsubcontractortestdetailcode\",\n      data: this.state.data,\n      dataResult: this.state.dataResult,\n      dataState: this.state.dataState,\n      dataStateChange: this.dataStateChange,\n      extractedColumnList: this.extractedColumnList,\n      fetchRecord: this.props.getProductComboService,\n      editParam: [],\n      deleteRecord: this.deleteRecord,\n      deleteParam: [],\n      reloadData: this.reloadData,\n      controlMap: this.state.controlMap,\n      userRoleControlRights: this.state.userRoleControlRights,\n      inputParam: this.props.Login.inputParam,\n      userInfo: this.props.Login.userInfo,\n      pageable: true,\n      scrollable: 'scrollable',\n      gridHeight: '600px',\n      isActionRequired: true,\n      isToolBarRequired: true,\n      selectedId: this.props.Login.selectedId,\n      masterdata: this.props.Login.masterData || [],\n      sendRecord: this.props.getSubContractorComboService,\n      updateReceiveSTTSubContractTest: this.props.updateReceiveSTTSubContractTest,\n      updateReceiveResultSubContractTest: this.props.updateReceiveResultSubContractTest,\n      addFile: this.props.addFile,\n      attahmentID: SubContTestAttachmentId,\n      viewDetailID: viewDetailId,\n      viewDetail: this.props.viewDetail,\n      viewFile: this.viewFile,\n      attachmentParam: attachmentParam,\n      groupIconAction: true,\n      listMasterShowIcon: 3,\n      clickIconGroup: true //actionList = {actionList}\n      ,\n      moreActionIcons: [{\n        title: this.props.intl.formatMessage({\n          id: \"IDS_SEND\"\n        }),\n        controlname: \"faPaperPlane\",\n        objectName: \"mastersendtostore\",\n        hidden: !this.state.userRoleControlRights.indexOf(SendToSubContractorId) === -1,\n        onClick: this.props.getSubContractorComboService,\n        inputData: {\n          masterData: this.props.Login.masterData,\n          userInfo: this.props.Login.userInfo,\n          ncontrolCode: SendToSubContractorId\n        }\n      }, {\n        title: this.props.intl.formatMessage({\n          id: \"IDS_RECEIVEBYSTT\"\n        }),\n        controlname: \"faHandHoldingWater\",\n        objectName: \"mastersendtostore\",\n        hidden: !this.state.userRoleControlRights.indexOf(ReceivedBySTTId) === -1,\n        onClick: this.props.updateReceiveSTTSubContractTest,\n        inputData: {\n          masterData: this.props.Login.masterData,\n          userInfo: this.props.Login.userInfo,\n          ncontrolCode: ReceivedBySTTId\n        }\n      }, {\n        title: this.props.intl.formatMessage({\n          id: \"IDS_RESULTRECEIVED\"\n        }),\n        controlname: \"faInbox\",\n        objectName: \"mastersendtostore\",\n        hidden: !this.state.userRoleControlRights.indexOf(ResultReceivedId) === -1,\n        onClick: this.props.updateReceiveResultSubContractTest,\n        inputData: {\n          masterData: this.props.Login.masterData,\n          userInfo: this.props.Login.userInfo,\n          ncontrolCode: ResultReceivedId\n        }\n      }, {\n        title: this.props.intl.formatMessage({\n          id: \"IDS_ATTACHMENT\"\n        }),\n        controlname: \"faPaperclip\",\n        objectName: \"mastersendtostore\",\n        hidden: !this.state.userRoleControlRights.indexOf(SubContTestAttachmentId) === -1,\n        onClick: this.props.addFile,\n        inputData: {\n          masterData: this.props.Login.masterData,\n          userInfo: this.props.Login.userInfo,\n          ncontrolCode: SubContTestAttachmentId\n        }\n      }, {\n        title: this.props.intl.formatMessage({\n          id: \"IDS_VIEWDETAILS\"\n        }),\n        controlname: \"faEye\",\n        objectName: \"mastersendtostore\",\n        hidden: !this.state.userRoleControlRights.indexOf(viewDetailId) === -1,\n        onClick: this.props.viewDetail,\n        inputData: {\n          masterData: this.props.Login.masterData,\n          userInfo: this.props.Login.userInfo,\n          ncontrolCode: viewDetailId\n        }\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 33\n      }\n    }) : \"\"))), this.props.Login.openModal || this.props.Login.openChildModal ? /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.Login.screenName === this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \" + this.props.intl.formatMessage({\n        id: \"IDS_FILE\"\n      })) ? this.props.Login.openChildModal : this.props.Login.openModal,\n      closeModal: this.closeModal,\n      operation: this.props.Login.operation,\n      inputParam: this.props.Login.inputParam,\n      showSaveContinue: true,\n      screenName: this.props.Login.screenName,\n      onSaveClick: this.onSaveClick,\n      esign: this.props.Login.loadEsign,\n      validateEsign: this.validateEsign,\n      masterStatus: this.props.Login.masterStatus,\n      updateStore: this.props.updateStore,\n      selectedRecord: this.state.selectedRecord || {},\n      addComponent: this.props.Login.loadEsign ? /*#__PURE__*/React.createElement(Esign, {\n        operation: this.props.Login.operation,\n        onInputOnChange: this.onInputOnChange,\n        inputParam: this.props.Login.inputParam,\n        selectedRecord: this.state.selectedRecord || {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 29\n        }\n      }) : this.props.Login.operation === \"sendsubcontractor\" ? /*#__PURE__*/React.createElement(SendSubContractor, {\n        selectedRecord: this.state.selectedRecord || {},\n        onInputOnChange: this.onInputOnChange,\n        onComboChange: this.onComboChange,\n        subContracorMapList: this.props.Login.subContracorMapList || [],\n        operation: this.props.Login.operation,\n        userInfo: this.props.Login.userInfo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 33\n        }\n      }) : this.props.Login.operation === \"fileattachment\" ? /*#__PURE__*/React.createElement(AddSubContractorTestAttchment, {\n        selectedRecord: this.state.selectedRecord || {},\n        onInputOnChange: this.onInputOnChange,\n        onComboChange: this.onComboChange,\n        subContracorMapList: this.props.Login.subContracorMapList || [],\n        operation: this.props.Login.operation,\n        userInfo: this.props.Login.userInfo,\n        linkMaster: this.props.Login.linkMaster,\n        onDrop: this.onDropFile,\n        deleteAttachment: this.deleteAttachment,\n        label: this.props.intl.formatMessage({\n          id: \"IDS_FILE\"\n        }) // ALPD-5410 - Gowtham 13/02/2025 - SubContractor - no label for file upload in attachment\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 37\n        }\n      }) : this.props.Login.operation === \"viewRecord\" && Object.keys(this.state.selectedRecord).length > 0 ?\n      /*#__PURE__*/\n      // <ViewRecord\n      //     selectedRecord={this.props.Login.selectedRecord || {}}\n      //     operation={this.props.Login.operation}\n      //     userInfo={this.props.Login.userInfo}\n      // />\n      React.createElement(ViewRecord, {\n        data: this.state.selectedRecord && this.state.selectedRecord['subcontractortestdetail'] ? JSON.parse(this.state.selectedRecord['subcontractortestdetail'].jsonsample.value) : {},\n        values: this.state.selectedRecord && this.state.selectedRecord['subcontractortestdetail'] ? [JSON.parse(this.state.selectedRecord['subcontractortestdetail'].jsonsample.value), JSON.parse(this.state.selectedRecord['subcontractortestdetail'].jsonsubsample.value)] : {},\n        SingleItem: this.state.DynamicSampleColumns,\n        displayFields: [this.state.DynamicSampleColumns, this.state.DynamicSubSampleColumns],\n        screenName: \"IDS_SAMPLEINFO\",\n        userInfo: this.props.Login.userInfo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 41\n        }\n      }) : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 21\n      }\n    }) : \"\");\n  }\n\n  sendRecord(master, userInfo) {}\n\n  componentDidUpdate(previousProps) {\n    let {\n      DynamicSampleColumns,\n      DynamicSubSampleColumns\n    } = this.state;\n\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\n      if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n        const userRoleControlRights = [];\n\n        if (this.props.Login.userRoleControlRights) {\n          this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item => userRoleControlRights.push(item.ncontrolcode));\n        }\n\n        const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode);\n        let dataState = {\n          skip: 0,\n          take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\n          group: [{\n            field: 'stestname'\n          }]\n        };\n        this.setState({\n          userRoleControlRights,\n          controlMap,\n          data: this.props.Login.masterData[\"SubContractSamples\"],\n          dataResult: process(this.props.Login.masterData[\"SubContractSamples\"] || [], dataState),\n          dataState\n        });\n      } else {\n        if (this.props.Login.masterData.DynamicDesign && this.props.Login.masterData.DynamicDesign !== previousProps.Login.masterData.DynamicDesign) {\n          const dynamicColumn = JSON.parse(this.props.Login.masterData.DynamicDesign.jsondata.value);\n          DynamicSampleColumns = dynamicColumn.sampledisplayfields ? dynamicColumn.sampledisplayfields : [];\n          DynamicSubSampleColumns = dynamicColumn.subsamplelistitem ? dynamicColumn.subsamplelistitem : [];\n        }\n\n        let {\n          dataState\n        } = this.state;\n\n        if (this.props.Login.dataState === undefined && dataState === undefined) {\n          dataState = {\n            skip: 0,\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\n            group: [{\n              field: 'stestname'\n            }]\n          };\n        }\n\n        this.setState({\n          DynamicSampleColumns,\n          DynamicSubSampleColumns,\n          data: this.props.Login.masterData[\"SubContractSamples\"],\n          selectedRecord: this.props.Login.selectedRecord,\n          dataResult: this.props.Login.masterData[\"SubContractSamples\"] && process(this.props.Login.masterData[\"SubContractSamples\"], dataState || []),\n          dataState\n        });\n      }\n    } else if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n      this.setState({\n        DynamicSampleColumns,\n        DynamicSubSampleColumns,\n        selectedRecord: this.props.Login.selectedRecord\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    const updateInfo = {\n      typeName: DEFAULT_RETURN,\n      data: {\n        masterData: [],\n        inputParam: undefined,\n        operation: null,\n        modalName: undefined\n      }\n    };\n    this.props.updateStore(updateInfo);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nexport default connect(mapStateToProps, {\n  callService,\n  crudMaster,\n  updateStore,\n  getSubContractorComboService,\n  updateSubContractSamplesdetails,\n  updateReceiveSTTSubContractTest,\n  updateReceiveResultSubContractTest,\n  addFile,\n  saveSubcontractorTestFile,\n  viewDetail,\n  viewAttachment\n})(injectIntl(SubContractTestDetail));","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5304/QuaLISWeb/src/pages/subcontractsamples/SubContractTestDetail.jsx"],"names":["React","Component","Col","Row","injectIntl","connect","toast","addFile","callService","crudMaster","getSubContractorComboService","saveSubcontractorTestFile","updateReceiveResultSubContractTest","updateReceiveSTTSubContractTest","updateStore","updateSubContractSamplesdetails","viewDetail","viewAttachment","DEFAULT_RETURN","create_UUID","deleteAttachmentDropZone","getControlMap","Lims_JSON_stringify","onDropAttachFileList","showEsign","attachmentType","transactionStatus","ConfirmMessage","SlideOutModal","Esign","process","DataGrid","ListWrapper","AddSubContractorTestAttchment","SendSubContractor","ViewRecord","SubContractTestDetail","constructor","props","closeModal","loadEsign","Login","openModal","openChildModal","selectedRecord","selectedId","operation","updateInfo","typeName","data","dataStateChange","event","setState","dataResult","state","dataState","viewFile","inputParam","inputParamData","inputData","subcontractortestdetail","onSaveSubContractorTestFile","saveType","formRef","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","editable","ALL","FileArray","subcontractorTestFile","nsubcontractortestdetailcode","formData","FormData","FTP","Array","isArray","length","forEach","file","index","tempData","Object","assign","splittedFileName","name","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","nsupplierfilecode","undefined","NA","size","append","push","YES","nfilesize","slinkfilename","trim","nlinkcode","value","JSON","stringify","userInfo","sformname","smodulename","slanguagename","isFileupload","classUrl","methodUrl","masterData","loading","deleteAttachment","fieldName","selectedFile","actionType","onDropFile","attachedFiles","maxSize","neditable","onInputOnChange","optional","editfield","target","type","checked","NO","onComboChange","comboData","reloadData","displayName","onSaveClick","item","ncontrolleadtime","nperiodcode","searchRef","esignNeeded","userRoleControlRights","nformcode","ncontrolCode","screenData","screenName","validateEsign","modalName","genericLabel","slanguagetypecode","concat","intl","formatMessage","id","sreason","nreasoncode","spredefinedreason","label","password","validateEsignCredential","createRef","skip","take","settings","parseInt","masterStatus","error","controlMap","Map","confirmMessage","extractedColumnList","getDerivedStateFromProps","warn","render","SendToSubContractorId","has","get","ncontrolcode","ReceivedBySTTId","ResultReceivedId","SubContTestAttachmentId","viewDetailId","attachmentParam","getProductComboService","deleteRecord","title","controlname","objectName","hidden","indexOf","onClick","subContracorMapList","linkMaster","keys","parse","jsonsample","jsonsubsample","DynamicSampleColumns","DynamicSubSampleColumns","sendRecord","master","componentDidUpdate","previousProps","values","map","group","field","DynamicDesign","dynamicColumn","jsondata","sampledisplayfields","subsamplelistitem","componentWillUnmount","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\nimport { connect } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport {\r\n    addFile,\r\n    callService, crudMaster, getSubContractorComboService,\r\n    saveSubcontractorTestFile,\r\n    updateReceiveResultSubContractTest,\r\n    updateReceiveSTTSubContractTest,\r\n    updateStore, updateSubContractSamplesdetails,\r\n    viewDetail, viewAttachment\r\n} from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { create_UUID, deleteAttachmentDropZone, getControlMap, Lims_JSON_stringify, onDropAttachFileList, showEsign } from '../../components/CommonScript';\r\nimport { attachmentType, transactionStatus } from '../../components/Enumeration';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport Esign from '../audittrail/Esign';\r\n// import './product.css';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport { ListWrapper } from '../userroletemplate/userroletemplate.styles';\r\nimport AddSubContractorTestAttchment from './AddSubContractorTestAttchment';\r\nimport SendSubContractor from './SendSubContractor';\r\nimport ViewRecord from './viewRecord';\r\n\r\nclass SubContractTestDetail extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.formRef = React.createRef();\r\n\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            data: [], masterStatus: \"\", error: \"\", selectedRecord: {},\r\n            dataResult: [],\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map()\r\n        };\r\n        this.searchRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n        this.extractedColumnList = [\r\n            { \"idsName\": \"IDS_TEST\", \"dataField\": \"stestname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_SUBCONTRACTOR\", \"dataField\": \"ssuppliername\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_EXPECTEDDATE\", \"dataField\": \"sexpecteddate\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_CONTROLLEADTIME\", \"dataField\": \"scontrolleaddate\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"sfilename\", \"width\": \"200px\", \"fieldType\": \"attachment\" },\r\n            { \"idsName\": \"IDS_ARNO\", \"dataField\": \"sarno\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_DISPLAYSTATUS\", \"dataField\": \"stransdisplaystatus\", \"width\": \"200px\" }\r\n        ];\r\n    }\r\n\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let openChildModal = this.props.Login.openChildModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let selectedId = this.props.Login.selectedId;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"sendsubcontractor\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason'] = \"\"\r\n                selectedRecord = {};\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n            selectedId = null;\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, openChildModal, loadEsign, selectedRecord, selectedId }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        return null;\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.data, event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n    /*actionMethod = (value) => {\r\n        if (value.method === templateMappingAction.CONFIGSAMPLEDISPLAY) {\r\n            this.openFieldConfiguration(value.controlId, \"configure\");\r\n        }\r\n        else if (value.method === templateMappingAction.CONFIGSAMPLEEDIT) {\r\n            this.editFieldConfiguration(value.controlId, 'configureedit')\r\n        }\r\n        else if (value.method === templateMappingAction.CONFIGSUBSAMPLEDISPLAY) {\r\n            this.openFieldConfiguration(value.controlId, 'configuresubsample')\r\n        }\r\n        else if (value.method === templateMappingAction.CONFIGSUBSAMPLEEDIT) {\r\n            this.editFieldConfiguration(value.controlId, 'configuresubsampleedit')\r\n        }\r\n        else if (value.method === templateMappingAction.CONFIGUNIQUE) {\r\n            this.openCombinationUniqueFieldConfiguration(value.controlId)\r\n        }\r\n        else if (value.method === templateMappingAction.CONFIGSAMPLEAUDIT) {\r\n            this.auditFieldConfiguration(value.controlId, 'configureaudit')\r\n        }\r\n        // else if (value.method === templateMappingAction.CONFIGSENDTOSTORE) {\r\n        //     this.mappingFieldConfiguration(value.controlId, 'configuresendtostore')\r\n        // }\r\n        else if (value.method === templateMappingAction.CONFIGEXPORTFIELDS) {\r\n            this.exportFieldConfiguration(value.controlId, 'configureexportfields')\r\n        }\r\n        else if (value.method === templateMappingAction.CONFIGURECHECKLIST) {\r\n            this.configureCheckList(value.controlId, 'configurechecklist')\r\n        }\r\n        else if (value.method === templateMappingAction.CONFIGURERELEASESAMPLEFILTER) {\r\n            this.configureReportFilterType(value.controlId, 'configurereleasesamplefilter')\r\n        }\r\n    } */\r\n\r\n    render() {\r\n\r\n        const SendToSubContractorId = this.props.controlMap && this.props.controlMap.has(\"SendToSubContractor\")\r\n            && this.props.controlMap.get(\"SendToSubContractor\").ncontrolcode;\r\n\r\n        const ReceivedBySTTId = this.props.controlMap && this.props.controlMap.has(\"ReceivedBySTT\")\r\n            && this.props.controlMap.get(\"ReceivedBySTT\").ncontrolcode;\r\n\r\n        const ResultReceivedId = this.props.controlMap && this.props.controlMap.has(\"ResultReceived\")\r\n            && this.props.controlMap.get(\"ResultReceived\").ncontrolcode;\r\n\r\n        const SubContTestAttachmentId = this.props.Login.inputParam && this.state.controlMap.has(\"SubContTestAttachment\")\r\n            && this.state.controlMap.get(\"SubContTestAttachment\").ncontrolcode;\r\n\r\n        const viewDetailId = this.props.Login.inputParam && this.state.controlMap.has(\"ViewSubContractorTestDetail\")\r\n            && this.state.controlMap.get(\"ViewSubContractorTestDetail\").ncontrolcode;\r\n\r\n        const attachmentParam = {\r\n            operation: \"view\",\r\n            classUrl: \"subcontracttestdetail\",\r\n            methodUrl: \"SubcontractorTestFile\",\r\n        }\r\n\r\n       /* let actionList = []\r\n\r\n        if (SendToSubContractorId) {\r\n            actionList.push({ \"method\": 1, \"value\": this.props.intl.formatMessage({ id: \"IDS_SEND\" }), \"controlId\": SendToSubContractorId })\r\n\r\n        }\r\n        if (ReceivedBySTTId) {\r\n            actionList.push({ \"method\": 1, \"value\": this.props.intl.formatMessage({ id: \"IDS_RECEIVEDBYSTT\" }), \"controlId\": ReceivedBySTTId })\r\n\r\n        }\r\n        if (ResultReceivedId) {\r\n            actionList.push({ \"method\": 1, \"value\": this.props.intl.formatMessage({ id: \"IDS_RESULTRECEIVEDBY\" }), \"controlId\": ResultReceivedId })\r\n\r\n        }\r\n        if (SubContTestAttachmentId) {\r\n            actionList.push({ \"method\": 1, \"value\": this.props.intl.formatMessage({ id: \"IDS_ATTCHMENT\" }), \"controlId\": SubContTestAttachmentId })\r\n\r\n        }\r\n        if (viewDetailId) {\r\n            actionList.push({ \"method\": 1, \"value\": this.props.intl.formatMessage({ id: \"IDS_VIEWDETAIL\" }), \"controlId\": viewDetailId })\r\n\r\n        }*/\r\n\r\n\r\n\r\n        return (\r\n            <>\r\n                <Row>\r\n                    <Col>\r\n                        <ListWrapper className=\"client-list-content\">\r\n\r\n                            {this.state.data ?\r\n                                <DataGrid\r\n                                    primaryKeyField={\"nsubcontractortestdetailcode\"}\r\n                                    data={this.state.data}\r\n                                    dataResult={this.state.dataResult}\r\n                                    dataState={this.state.dataState}\r\n                                    dataStateChange={this.dataStateChange}\r\n                                    extractedColumnList={this.extractedColumnList}\r\n                                    fetchRecord={this.props.getProductComboService}\r\n                                    editParam={[]}\r\n                                    deleteRecord={this.deleteRecord}\r\n                                    deleteParam={[]}\r\n                                    reloadData={this.reloadData}\r\n                                    controlMap={this.state.controlMap}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    pageable={true}\r\n                                    scrollable={'scrollable'}\r\n                                    gridHeight={'600px'}\r\n                                    isActionRequired={true}\r\n                                    isToolBarRequired={true}\r\n                                    selectedId={this.props.Login.selectedId}\r\n                                    masterdata={this.props.Login.masterData || []}\r\n                                    sendRecord={this.props.getSubContractorComboService}\r\n                                    updateReceiveSTTSubContractTest={this.props.updateReceiveSTTSubContractTest}\r\n                                    updateReceiveResultSubContractTest={this.props.updateReceiveResultSubContractTest}\r\n                                    addFile={this.props.addFile}\r\n                                    attahmentID={SubContTestAttachmentId}\r\n                                    viewDetailID={viewDetailId}\r\n                                    viewDetail={this.props.viewDetail}\r\n                                    viewFile={this.viewFile}\r\n                                    attachmentParam={attachmentParam}\r\n                                    groupIconAction={true}\r\n                                    listMasterShowIcon={3}\r\n                                    clickIconGroup={true}\r\n                                    //actionList = {actionList}\r\n                                    moreActionIcons={\r\n                                        [\r\n                                            {\r\n                                                title: this.props.intl.formatMessage({ id: \"IDS_SEND\" }),\r\n                                                controlname: \"faPaperPlane\",\r\n                                                objectName: \"mastersendtostore\",\r\n                                                hidden: !this.state.userRoleControlRights.indexOf(SendToSubContractorId) === -1,\r\n                                                onClick: this.props.getSubContractorComboService,\r\n                                                inputData: {\r\n                                                    masterData: this.props.Login.masterData,\r\n                                                    userInfo: this.props.Login.userInfo,\r\n                                                    ncontrolCode: SendToSubContractorId\r\n                                                },\r\n                                            },\r\n                                            {\r\n                                                title: this.props.intl.formatMessage({ id: \"IDS_RECEIVEBYSTT\" }),\r\n                                                controlname: \"faHandHoldingWater\",\r\n                                                objectName: \"mastersendtostore\",\r\n                                                hidden: !this.state.userRoleControlRights.indexOf(ReceivedBySTTId) === -1,\r\n                                                onClick: this.props.updateReceiveSTTSubContractTest,\r\n                                                inputData: {\r\n                                                    masterData: this.props.Login.masterData,\r\n                                                    userInfo: this.props.Login.userInfo,\r\n                                                    ncontrolCode: ReceivedBySTTId\r\n                                                },\r\n                                            },\r\n                                            {\r\n                                                title: this.props.intl.formatMessage({ id: \"IDS_RESULTRECEIVED\" }),\r\n                                                controlname: \"faInbox\",\r\n                                                objectName: \"mastersendtostore\",\r\n                                                hidden: !this.state.userRoleControlRights.indexOf(ResultReceivedId) === -1,\r\n                                                onClick: this.props.updateReceiveResultSubContractTest,\r\n                                                inputData: {\r\n                                                    masterData: this.props.Login.masterData,\r\n                                                    userInfo: this.props.Login.userInfo,\r\n                                                    ncontrolCode: ResultReceivedId\r\n                                                },\r\n                                            },\r\n                                            {\r\n                                                title: this.props.intl.formatMessage({ id: \"IDS_ATTACHMENT\" }),\r\n                                                controlname: \"faPaperclip\",\r\n                                                objectName: \"mastersendtostore\",\r\n                                                hidden: !this.state.userRoleControlRights.indexOf(SubContTestAttachmentId) === -1,\r\n                                                onClick: this.props.addFile,\r\n                                                inputData: {\r\n                                                    masterData: this.props.Login.masterData,\r\n                                                    userInfo: this.props.Login.userInfo,\r\n                                                    ncontrolCode: SubContTestAttachmentId\r\n                                                },\r\n                                            },\r\n                                            {\r\n                                                title: this.props.intl.formatMessage({ id: \"IDS_VIEWDETAILS\" }),\r\n                                                controlname: \"faEye\",\r\n                                                objectName: \"mastersendtostore\",\r\n                                                hidden: !this.state.userRoleControlRights.indexOf(viewDetailId) === -1,\r\n                                                onClick: this.props.viewDetail,\r\n                                                inputData: {\r\n                                                    masterData: this.props.Login.masterData,\r\n                                                    userInfo: this.props.Login.userInfo,\r\n                                                    ncontrolCode: viewDetailId\r\n                                                },\r\n                                            }\r\n\r\n                                        ]\r\n\r\n                                    }\r\n                                />\r\n                                : \"\"}\r\n                        </ListWrapper>\r\n                    </Col>\r\n                </Row>\r\n                \r\n                {/* Below Condition Added to avoid unwanted rendering of SlideOut */}\r\n                {this.props.Login.openModal || this.props.Login.openChildModal ?\r\n                    <SlideOutModal\r\n                        show={this.props.Login.screenName === this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \" + this.props.intl.formatMessage({ id: \"IDS_FILE\" })) ?\r\n                            this.props.Login.openChildModal :\r\n                            this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        showSaveContinue={true}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        addComponent={this.props.Login.loadEsign ?\r\n                            <Esign operation={this.props.Login.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            :\r\n                            this.props.Login.operation === \"sendsubcontractor\" ?\r\n                                <SendSubContractor\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onComboChange={this.onComboChange}\r\n                                    subContracorMapList={this.props.Login.subContracorMapList || []}\r\n                                    operation={this.props.Login.operation}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                />\r\n                                : this.props.Login.operation === \"fileattachment\" ?\r\n                                    <AddSubContractorTestAttchment\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        onComboChange={this.onComboChange}\r\n                                        subContracorMapList={this.props.Login.subContracorMapList || []}\r\n                                        operation={this.props.Login.operation}\r\n                                        userInfo={this.props.Login.userInfo}\r\n                                        linkMaster={this.props.Login.linkMaster}\r\n                                        onDrop={this.onDropFile}\r\n                                        deleteAttachment={this.deleteAttachment}\r\n                                        label={this.props.intl.formatMessage({ id: \"IDS_FILE\" })} // ALPD-5410 - Gowtham 13/02/2025 - SubContractor - no label for file upload in attachment\r\n                                    />\r\n                                    : this.props.Login.operation === \"viewRecord\" && Object.keys(this.state.selectedRecord).length > 0 ?\r\n                                        // <ViewRecord\r\n                                        //     selectedRecord={this.props.Login.selectedRecord || {}}\r\n                                        //     operation={this.props.Login.operation}\r\n                                        //     userInfo={this.props.Login.userInfo}\r\n\r\n                                        // />\r\n                                        <ViewRecord\r\n                                            data={this.state.selectedRecord && this.state.selectedRecord['subcontractortestdetail'] ?\r\n                                                JSON.parse(this.state.selectedRecord['subcontractortestdetail'].jsonsample.value) : {}}\r\n                                            values={this.state.selectedRecord && this.state.selectedRecord['subcontractortestdetail'] ?\r\n                                                [JSON.parse(this.state.selectedRecord['subcontractortestdetail'].jsonsample.value), JSON.parse(this.state.selectedRecord['subcontractortestdetail'].jsonsubsample.value)] : {}}\r\n                                            SingleItem={this.state.DynamicSampleColumns}\r\n                                            displayFields={[this.state.DynamicSampleColumns, this.state.DynamicSubSampleColumns]}\r\n                                            screenName=\"IDS_SAMPLEINFO\"\r\n                                            userInfo={this.props.Login.userInfo}\r\n                                        />\r\n                                        : \"\"\r\n                        }\r\n                    />\r\n                    : \"\"}\r\n            </>\r\n        );\r\n    }\r\n    sendRecord(master, userInfo) {\r\n\r\n    }\r\n\r\n    viewFile = (inputParam) => {\r\n        //let inputData = {}\r\n        let inputParamData = {\r\n\r\n            ...inputParam,\r\n            inputData: { ...inputParam.inputData, subcontractortestdetail: inputParam.inputData.selectedRecord }\r\n        }\r\n        this.props.viewAttachment(inputParamData)\r\n    }\r\n\r\n    onSaveSubContractorTestFile = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = selectedRecord.editable ? selectedRecord.editable : transactionStatus.ALL;\r\n        let FileArray = [];\r\n\r\n        if (isFileEdited == 1) {\r\n            let subcontractorTestFile = {\r\n                nsubcontractortestdetailcode: selectedRecord.subcontractortestdetail.nsubcontractortestdetailcode,\r\n                nattachmenttypecode\r\n            };\r\n            const formData = new FormData();\r\n            if (nattachmenttypecode === attachmentType.FTP) {\r\n                if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                    acceptedFiles.forEach((file, index) => {\r\n                        const tempData = Object.assign({}, subcontractorTestFile);\r\n                        const splittedFileName = file.name.split('.');\r\n                        const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                        const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                        const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                        const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.nsupplierfilecode && selectedRecord.nsupplierfilecode > 0\r\n                            && selectedRecord.ssystemfilename !== \"\" && selectedRecord.ssystemfilename !== undefined ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                        tempData[\"sfilename\"] = Lims_JSON_stringify(file.name, false);\r\n                        //tempData[\"sdescription\"] = Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\", false);\r\n                        tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                        tempData[\"ssystemfilename\"] = uniquefilename;\r\n                        tempData[\"nfilesize\"] = file.size;\r\n                        formData.append(\"uploadedFile\" + index, file);\r\n                        formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                        FileArray.push(tempData);\r\n                    });\r\n                    formData.append(\"filecount\", acceptedFiles.length);\r\n                    isFileEdited = transactionStatus.YES;\r\n                } else {\r\n                    subcontractorTestFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename, false);\r\n                    // subcontractorTestFile[\"sdescription\"] = Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\", false);\r\n                    subcontractorTestFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                    subcontractorTestFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                    subcontractorTestFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                    FileArray.push(subcontractorTestFile);\r\n                }\r\n            } else {\r\n                subcontractorTestFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.slinkfilename.trim(), false);\r\n                //subcontractorTestFile[\"sdescription\"] = Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\", false);\r\n                subcontractorTestFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n                subcontractorTestFile[\"ssystemfilename\"] = \"\";\r\n                subcontractorTestFile[\"nfilesize\"] = 0;\r\n                FileArray.push(subcontractorTestFile);\r\n            }\r\n            formData.append(\"isFileEdited\", isFileEdited);\r\n            formData.append(\"subcontractorFile\", JSON.stringify(FileArray));\r\n            formData.append(\"userinfo\", JSON.stringify(this.props.Login.userInfo));\r\n\r\n            const inputParam = {\r\n                inputData: {\r\n                    \"userinfo\": {\r\n                        ...this.props.Login.userInfo,\r\n                        sformname: Lims_JSON_stringify(this.props.Login.userInfo.sformname),\r\n                        smodulename: Lims_JSON_stringify(this.props.Login.userInfo.smodulename),\r\n                        slanguagename: Lims_JSON_stringify(this.props.Login.userInfo.slanguagename)\r\n                    }\r\n                },\r\n                formData: formData,\r\n                isFileupload: true,\r\n                operation: \"fileattachment\",\r\n                classUrl: \"subcontracttestdetail\",\r\n                saveType, formRef, methodUrl: \"updateSubcontractorTestFile\",\r\n                selectedRecord: { ...this.state.selectedRecord }\r\n            }\r\n            this.props.saveSubcontractorTestFile(inputParam, this.props.Login.masterData);\r\n        }\r\n        else {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { loading: false, openModal: false, selectedRecord: {} }\r\n            }\r\n            return this.props.updateStore(updateInfo);\r\n        }\r\n    }\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedFile = this.state.selectedRecord || {};\r\n        selectedFile[fieldName] = deleteAttachmentDropZone(selectedFile[fieldName], file)\r\n        this.setState({\r\n            selectedFile, actionType: \"delete\"\r\n        });\r\n    }\r\n\r\n    onDropFile = (attachedFiles, fieldName, maxSize, editable) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        let neditable = 0\r\n        if (neditable != undefined) {\r\n            selectedRecord[editable] = 1;\r\n        }\r\n\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n\r\n        let { DynamicSampleColumns, DynamicSubSampleColumns } = this.state;\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                let dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,group: [{ field: 'stestname'}] }\r\n\r\n                this.setState({\r\n                    userRoleControlRights, controlMap, data: this.props.Login.masterData[\"SubContractSamples\"],\r\n                    dataResult: process(this.props.Login.masterData[\"SubContractSamples\"] || [], dataState), dataState\r\n                });\r\n            }\r\n            else {\r\n\r\n                if (this.props.Login.masterData.DynamicDesign && this.props.Login.masterData.DynamicDesign !== previousProps.Login.masterData.DynamicDesign) {\r\n\r\n                    const dynamicColumn = JSON.parse(this.props.Login.masterData.DynamicDesign.jsondata.value)\r\n                    DynamicSampleColumns = dynamicColumn.sampledisplayfields ? dynamicColumn.sampledisplayfields : [];\r\n                    DynamicSubSampleColumns = dynamicColumn.subsamplelistitem ? dynamicColumn.subsamplelistitem : [];\r\n\r\n                }\r\n                let { dataState } = this.state;\r\n                if (this.props.Login.dataState === undefined && dataState === undefined) {\r\n                    dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,group: [{ field: 'stestname' }] }\r\n                }\r\n                this.setState({\r\n                    DynamicSampleColumns, DynamicSubSampleColumns,\r\n                    data: this.props.Login.masterData[\"SubContractSamples\"], selectedRecord: this.props.Login.selectedRecord,\r\n                    dataResult: this.props.Login.masterData[\"SubContractSamples\"] && process(this.props.Login.masterData[\"SubContractSamples\"], dataState || []), dataState\r\n                });\r\n            }\r\n        }\r\n        else if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ DynamicSampleColumns, DynamicSubSampleColumns, selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n    }\r\n\r\n    onInputOnChange = (event, optional, editfield) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (editfield != undefined) {\r\n            selectedRecord[editfield] = 1;\r\n        }\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else if (event.target.type === \"radio\") {\r\n            selectedRecord[event.target.name] = optional;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName, editfield) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        if (editfield != undefined) {\r\n            selectedRecord[editfield] = 1;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n\r\n\r\n    reloadData = () => {\r\n\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            displayName: this.props.Login.displayName,\r\n            userInfo: this.props.Login.userInfo\r\n        };\r\n        this.props.callService(inputParam);\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        if (this.props.Login.operation == \"fileattachment\") {\r\n            return this.onSaveSubContractorTestFile(saveType, formRef);\r\n        }\r\n        let inputData = [];\r\n        let dataState = undefined;\r\n        let selectedId = null;\r\n        dataState = this.state.dataState;\r\n        selectedId = this.props.Login.selectedRecord['subcontractortestdetail'].nsubcontractortestdetailcode;\r\n\r\n\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        inputData[\"subcontractortestdetail\"] = this.state.selectedRecord['subcontractortestdetail'];\r\n        inputData[\"subcontractortestdetail\"]['nsuppliercode'] = this.state.selectedRecord['nsuppliercode'].value;\r\n        inputData[\"subcontractortestdetail\"]['ncontrolleadtime'] = this.state.selectedRecord['nsuppliercode'].item.ncontrolleadtime;\r\n        inputData[\"subcontractortestdetail\"]['nperiodcode'] = this.state.selectedRecord['nsuppliercode'].item.nperiodcode;\r\n        inputData[\"subcontractortestdetail\"]['sremarks'] = this.state.selectedRecord['sremarks'];\r\n\r\n        // if (inputData[\"subcontractordetails\"].hasOwnProperty('esignpassword')) {\r\n        //     if (inputData[\"subcontractordetails\"]['esignpassword'] === '') {\r\n        //         delete inputData[\"subcontractordetails\"]['esigncomments']\r\n        //         delete inputData[\"subcontractordetails\"]['esignpassword']\r\n        //     }\r\n        // }\r\n\r\n\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"updateSubContractSamplesdetails\",\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: inputData, selectedId, dataState,\r\n            operation: this.props.Login.operation, saveType, formRef, searchRef: this.searchRef,\r\n            selectedRecord: { ...this.state.selectedRecord }\r\n        }\r\n\r\n        const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode);\r\n        if (esignNeeded) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: \"IDS_SENDSUBCONTRACTOR\",\r\n                    operation: this.props.Login.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.updateSubContractSamplesdetails(inputParam, this.props.Login.masterData, \"openModal\", \"\", \"\");\r\n        }\r\n\r\n    }\r\n    validateEsign = () => {\r\n        let modalName = this.props.Login.screenName === this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \" + this.props.intl.formatMessage({ id: \"IDS_FILE\" })) ? \"openChildModal\" : \"openModal\";\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, modalName);\r\n    }\r\n    componentWillUnmount() {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                masterData: [], inputParam: undefined, operation: null, modalName: undefined\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, updateStore, getSubContractorComboService, updateSubContractSamplesdetails,\r\n    updateReceiveSTTSubContractTest, updateReceiveResultSubContractTest, addFile, saveSubcontractorTestFile, viewDetail, viewAttachment\r\n})(injectIntl(SubContractTestDetail));"]},"metadata":{},"sourceType":"module"}