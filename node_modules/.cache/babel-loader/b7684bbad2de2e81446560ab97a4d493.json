{"ast":null,"code":"import _defineProperty from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Nav}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{FormattedMessage,injectIntl}from'react-intl';import{faPlus}from'@fortawesome/free-solid-svg-icons';import ListAttachment from'../../../components/ListAttachment';import SlideOutModal from'../../../components/slide-out-modal/SlideOutModal';import{DEFAULT_RETURN}from'../../../actions/LoginTypes';import AddAttachment from'./AddAttachment';import{updateStore,getAttachmentCombo,validateEsignCredential,crudMaster,viewAttachment,deleteAttachment}from'../../../actions';import{connect}from'react-redux';import{attachmentType,designProperties,transactionStatus}from'../../../components/Enumeration';import Esign from'../../audittrail/Esign';import{QUALISFORMS}from'../../../components/Enumeration';import{deleteAttachmentDropZone,onDropAttachFileList}from'../../../components/CommonScript';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Attachments=/*#__PURE__*/function(_Component){_inherits(Attachments,_Component);var _super=_createSuper(Attachments);function Attachments(props){var _this;_classCallCheck(this,Attachments);_this=_super.call(this,props);_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"//fileToDelete:file.name \n});};_this.onDropFiles=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.onAttachmentInputChange=function(event,caseNo,optional){var selectedRecord=_this.state.selectedRecord||{};switch(caseNo){case 1:if(event.target.type==='radio'){selectedRecord[event.target.name]=event.target.checked===true&&optional;// selectedRecord[\"sfilename\"] = \"\";\n}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});break;default:selectedRecord[event.target.name]=event.target.value;_this.setState({selectedRecord:selectedRecord});break;}};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onComboChange=function(comboData,comboName){var selectedRecord=_this.state.selectedRecord||{};if(comboData){selectedRecord[comboName]=comboData;_this.setState({selectedRecord:selectedRecord});}else{selectedRecord[comboName]=[];_this.setState({selectedRecord:selectedRecord});}};_this.onSaveClick=function(saveType,formRef){// const masterData = this.props.Login.masterData;\n// let inputData = {}\n// let inputParam = {}\n// inputData[\"userinfo\"] = this.props.Login.userInfo;\n// if(this.props.Login.screenName === \"IDS_SAMPLEATTACHMENTS\") {\n//     let saveParam={userInfo:this.props.Login.userInfo,\n//         selectedRecord:this.state.selectedRecord,\n//         masterData:this.props.Login.masterData,\n//         saveType, formRef,\n//         operation:this.props.Login.operation,\n//         selectedMaster:this.props.selectedMaster\n//     }\n//     inputParam = onSaveSampleAttachment(saveParam,this.props.selectedMaster);\n// }else if(this.props.Login.screenName === \"IDS_TESTATTACHMENTS\") {\n//     let saveParam={userInfo:this.props.Login.userInfo,\n//         selectedRecord:this.state.selectedRecord,\n//         masterData:this.props.Login.masterData,\n//         saveType, formRef,\n//         operation:this.props.Login.operation,\n//         selectedMaster:this.props.selectedMaster\n//     }\n//     inputParam = onSaveTestAttachment(saveParam,this.props.selectedMaster);\n_this.props.onSaveClick(saveType,formRef,_this.state.selectedRecord);// }\n// if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n//     const updateInfo = {\n//         typeName: DEFAULT_RETURN,\n//         data: {\n//             loadEsign: true,\n//             screenData: { inputParam, masterData },\n//             operation: this.props.Login.operation,\n//             screenName: this.props.Login.screenName,\n//         }\n//     }\n//     this.props.updateStore(updateInfo);\n// }\n// else {\n//     this.props.crudMaster(inputParam, masterData, \"openAttachmentModal\");\n// }\n};_this.handleClose=function(){var loadEsign=_this.props.Login.loadEsign;var openAttachmentModal=_this.props.Login.openAttachmentModal;var selectedRecord=_this.props.Login.selectedRecord;var operation=_this.props.Login.operation;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openAttachmentModal=false;selectedRecord={};operation=undefined;}else{loadEsign=false;}}else{openAttachmentModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openAttachmentModal:openAttachmentModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedParamId:null,operation:operation}};_this.props.updateStore(updateInfo);};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};if(_this.props.Login.operation==='dynamic'){_this.props.validateEsignforApproval(inputParam,\"openChildModal\");}else{_this.props.validateEsignCredential(inputParam,\"openAttachmentModal\");}};_this.viewFile=function(filedata){var inputParam={inputData:{file:filedata,userinfo:_this.props.Login.userInfo},classUrl:\"attachment\",operation:\"view\",methodUrl:_this.props.methodUrl,screenName:_this.props.Login.screenName};_this.props.viewAttachment(inputParam);};_this.state={showMore:{},selectedRecord:{}};return _this;}_createClass(Attachments,[{key:\"render\",value:function render(){var _ref3,_ref4,_ref5,_ref6,_this2=this;var subFields=this.props.subFields?this.props.subFields:[_defineProperty({},designProperties.VALUE,\"\".concat(this.props.screenName==='IDS_SAMPLEATTACHMENTS'?this.props.Login.userInfo&&this.props.Login.userInfo.nformcode===QUALISFORMS.SAMPLEREGISTRATION?\"groupingField\":\"sarno\":this.props.Login.screenName==='IDS_SUBSAMPLEATTACHMENTS'?this.props.Login.userInfo&&this.props.Login.userInfo.nformcode===QUALISFORMS.SAMPLEREGISTRATION?\"groupingField2\":\"samplearno\":\"stestsynonym\")),_defineProperty({},designProperties.VALUE,\"dcreateddate\")// { [designProperties.VALUE]: \"nfilesize\", \"fieldType\": \"size\" }\n];var moreField=this.props.moreField?this.props.moreField:[(_ref3={},_defineProperty(_ref3,designProperties.LABEL,\"IDS_SCREENNAME\"),_defineProperty(_ref3,designProperties.VALUE,\"sdisplayname\"),_ref3),(_ref4={},_defineProperty(_ref4,designProperties.LABEL,\"IDS_USERNAME\"),_defineProperty(_ref4,designProperties.VALUE,\"susername\"),_ref4),(_ref5={},_defineProperty(_ref5,designProperties.LABEL,\"IDS_USERROLE\"),_defineProperty(_ref5,designProperties.VALUE,\"suserrolename\"),_ref5),(_ref6={},_defineProperty(_ref6,designProperties.LABEL,\"IDS_DESCRIPTION\"),_defineProperty(_ref6,designProperties.VALUE,\"sdescription\"),_ref6)];if(this.props.moreField===undefined&&this.props.Login.screenName==='IDS_TESTATTACHMENTS'){var _moreField$unshift;moreField.unshift((_moreField$unshift={},_defineProperty(_moreField$unshift,designProperties.LABEL,\"\".concat(this.props.nsubsampleneed?\"IDS_SAMPLEARNO\":\"IDS_ARNO\")),_defineProperty(_moreField$unshift,designProperties.VALUE,\"\".concat(this.props.nsubsampleneed?\"ssamplearno\":\"sarno\")),_moreField$unshift));};var addFileId=this.props.controlMap.has(this.props.addName)&&this.props.controlMap.get(this.props.addName).ncontrolcode;var editFileId=this.props.controlMap.has(this.props.editName)&&this.props.controlMap.get(this.props.editName).ncontrolcode;var deleteFileId=this.props.controlMap.has(this.props.deleteName)&&this.props.controlMap.get(this.props.deleteName).ncontrolcode;var viewFileId=this.props.controlMap.has(this.props.viewName)&&this.props.controlMap.get(this.props.viewName).ncontrolcode;var mandatoryFields=[];if(this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK){mandatoryFields=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}else{// if (this.props.Login.operation !== 'update') {\nmandatoryFields=[{\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"}];// }\n}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"actions-stripe border-bottom\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"add_\".concat(this.props.Login.screenName,\"_file\"),className:\"add-txt-btn\",hidden:this.props.userRoleControlRights.indexOf(addFileId)===-1,onClick:function onClick(){return _this2.props.getAttachmentCombo({userInfo:_this2.props.Login.userInfo,operation:\"create\",ncontrolCode:addFileId,screenName:_this2.props.screenName,modalName:\"openAttachmentModal\",masterList:_this2.props.masterList,masterAlertStatus:_this2.props.masterAlertStatus});}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_ATTACHMENT\",defaultMessage:\"Attachment\"})))),/*#__PURE__*/React.createElement(ListAttachment,{attachmentList:this.props.attachments,fileName:\"sfilename\",filesize:\"nfilesize\",linkname:\"slinkname\",isjsonfield:true,jsonfield:\"jsondata\",deleteRecord:this.props.deleteAttachment,deleteParam:this.props.deleteParam,editParam:_objectSpread(_objectSpread({},this.props.editParam),{},{operation:\"update\",ncontrolCode:editFileId,screenName:this.props.screenName,modalName:\"openAttachmentModal\",masterList:this.props.masterList,masterAlertStatus:this.props.masterAlertStatus}),fetchRecord:this.props.fetchRecord,deleteId:deleteFileId,editId:editFileId,viewId:viewFileId,userRoleControlRights:this.props.userRoleControlRights,viewFile:this.viewFile,mainField:this.props.mainField,subFields:subFields,moreField:moreField,hidePaging:false// skip={this.props.skip}\n// take={this.props.take}\n,settings:this.props.Login.settings}),this.props.Login.openAttachmentModal?/*#__PURE__*/React.createElement(SlideOutModal,{onSaveClick:this.onSaveClick,operation:this.props.Login.operation,screenName:this.props.Login.screenName,closeModal:this.handleClose,show:this.props.Login.openAttachmentModal,inputParam:this.props.Login.inputParam,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(AddAttachment,{selectedRecord:this.state.selectedRecord||{},onDrop:this.onDropFiles,deleteAttachment:this.deleteAttachment,jsonField:'jsondata',actionType:this.state.actionType,linkMaster:this.props.Login.linkMaster,onInputOnChange:this.onAttachmentInputChange,editFiles:this.props.Login.editFiles,onComboChange:this.onComboChange,maxSize:20,fileNameLength:this.props.screenName==='IDS_TESTATTACHMENTS'?255:150,maxFiles:this.props.Login.operation===\"update\"?1:3,operation:this.props.Login.operation,selectedListName:this.props.selectedListName,displayName:this.props.displayName,masterList:this.props.masterList,multiple:this.props.Login.operation===\"update\"?false:true})}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}}}]);return Attachments;}(Component);export default connect(mapStateToProps,{updateStore:updateStore,viewAttachment:viewAttachment,validateEsignCredential:validateEsignCredential,crudMaster:crudMaster,getAttachmentCombo:getAttachmentCombo,deleteAttachment:deleteAttachment})(injectIntl(Attachments));","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/pages/attachmentscomments/attachments/Attachments.jsx"],"names":["React","Component","Nav","FontAwesomeIcon","FormattedMessage","injectIntl","faPlus","ListAttachment","SlideOutModal","DEFAULT_RETURN","AddAttachment","updateStore","getAttachmentCombo","validateEsignCredential","crudMaster","viewAttachment","deleteAttachment","connect","attachmentType","designProperties","transactionStatus","Esign","QUALISFORMS","deleteAttachmentDropZone","onDropAttachFileList","mapStateToProps","state","Login","Attachments","props","event","file","fieldName","selectedRecord","setState","actionType","onDropFiles","attachedFiles","maxSize","onAttachmentInputChange","caseNo","optional","target","type","name","checked","value","onInputOnChange","YES","NO","onComboChange","comboData","comboName","onSaveClick","saveType","formRef","handleClose","loadEsign","openAttachmentModal","operation","undefined","updateInfo","typeName","data","selectedParamId","validateEsign","inputParam","inputData","userInfo","sreason","password","screenData","validateEsignforApproval","viewFile","filedata","userinfo","classUrl","methodUrl","screenName","showMore","subFields","VALUE","nformcode","SAMPLEREGISTRATION","moreField","LABEL","unshift","nsubsampleneed","addFileId","controlMap","has","addName","get","ncontrolcode","editFileId","editName","deleteFileId","deleteName","viewFileId","viewName","mandatoryFields","nattachmenttypecode","LINK","userRoleControlRights","indexOf","ncontrolCode","modalName","masterList","masterAlertStatus","attachments","deleteParam","editParam","fetchRecord","mainField","settings","masterStatus","linkMaster","editFiles","selectedListName","displayName","previousProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Nav } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport ListAttachment from '../../../components/ListAttachment';\r\nimport SlideOutModal from '../../../components/slide-out-modal/SlideOutModal';\r\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes';\r\nimport AddAttachment from './AddAttachment';\r\nimport {\r\n    updateStore, getAttachmentCombo, validateEsignCredential, crudMaster, viewAttachment, deleteAttachment\r\n} from '../../../actions'\r\nimport { connect } from 'react-redux';\r\nimport { attachmentType, designProperties, transactionStatus } from '../../../components/Enumeration';\r\nimport Esign from '../../audittrail/Esign';\r\nimport { QUALISFORMS } from '../../../components/Enumeration';\r\nimport { deleteAttachmentDropZone, onDropAttachFileList } from '../../../components/CommonScript';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\nclass Attachments extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            showMore: {},\r\n            selectedRecord: {}\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let subFields = this.props.subFields ? this.props.subFields : [\r\n            { [designProperties.VALUE]: `${this.props.screenName === 'IDS_SAMPLEATTACHMENTS' \r\n                    ? this.props.Login.userInfo && this.props.Login.userInfo.nformcode === QUALISFORMS.SAMPLEREGISTRATION \r\n                            ? \"groupingField\" : \"sarno\" \r\n                    : this.props.Login.screenName === 'IDS_SUBSAMPLEATTACHMENTS' \r\n                    ? this.props.Login.userInfo && this.props.Login.userInfo.nformcode === QUALISFORMS.SAMPLEREGISTRATION ?\r\n                    \"groupingField2\":\"samplearno\" : \r\n                               \"stestsynonym\"}` },\r\n            { [designProperties.VALUE]: \"dcreateddate\" },\r\n           // { [designProperties.VALUE]: \"nfilesize\", \"fieldType\": \"size\" }\r\n        ];\r\n        let moreField = this.props.moreField ? this.props.moreField : [\r\n            { [designProperties.LABEL]: \"IDS_SCREENNAME\", [designProperties.VALUE]: \"sdisplayname\" },\r\n            { [designProperties.LABEL]: \"IDS_USERNAME\", [designProperties.VALUE]: \"susername\" },\r\n            { [designProperties.LABEL]: \"IDS_USERROLE\", [designProperties.VALUE]: \"suserrolename\" },\r\n            { [designProperties.LABEL]: \"IDS_DESCRIPTION\", [designProperties.VALUE]: \"sdescription\" }\r\n        ];\r\n        if (this.props.moreField===undefined && this.props.Login.screenName === 'IDS_TESTATTACHMENTS') {\r\n            moreField.unshift({ [designProperties.LABEL]:  `${this.props.nsubsampleneed ? \"IDS_SAMPLEARNO\" : \"IDS_ARNO\"}`, [designProperties.VALUE]: `${this.props.nsubsampleneed ? \"ssamplearno\" : \"sarno\"}` })\r\n        };\r\n        let addFileId = this.props.controlMap.has(this.props.addName) && this.props.controlMap.get(this.props.addName).ncontrolcode;\r\n        let editFileId = this.props.controlMap.has(this.props.editName) && this.props.controlMap.get(this.props.editName).ncontrolcode;\r\n        let deleteFileId = this.props.controlMap.has(this.props.deleteName) && this.props.controlMap.get(this.props.deleteName).ncontrolcode;\r\n        let viewFileId = this.props.controlMap.has(this.props.viewName) && this.props.controlMap.get(this.props.viewName).ncontrolcode;\r\n        let mandatoryFields = [];\r\n        if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatoryLabel\":\"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" }\r\n            ];\r\n        } else {\r\n           // if (this.props.Login.operation !== 'update') {\r\n                mandatoryFields = [\r\n                    { \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\" , \"mandatoryLabel\":\"IDS_CHOOSE\", \"controlType\": \"file\"},\r\n                ];\r\n           // }\r\n        }\r\n        return (\r\n            <>\r\n                <div className=\"actions-stripe border-bottom\">\r\n                    <div className=\"d-flex justify-content-end\">\r\n                        <Nav.Link name={`add_${this.props.Login.screenName}_file`} className=\"add-txt-btn\" hidden={this.props.userRoleControlRights.indexOf(addFileId) === -1}\r\n                            onClick={() => this.props.getAttachmentCombo({ userInfo: this.props.Login.userInfo, operation: \"create\", ncontrolCode: addFileId, screenName: this.props.screenName, modalName: \"openAttachmentModal\", masterList: this.props.masterList, masterAlertStatus: this.props.masterAlertStatus })}>\r\n                            <FontAwesomeIcon icon={faPlus} /> { }\r\n                            <FormattedMessage id=\"IDS_ATTACHMENT\" defaultMessage=\"Attachment\" />\r\n                        </Nav.Link>\r\n                    </div>\r\n                </div>\r\n                <ListAttachment\r\n                    attachmentList={this.props.attachments}\r\n                    fileName=\"sfilename\"\r\n                    filesize=\"nfilesize\"\r\n                    linkname=\"slinkname\"\r\n                    isjsonfield={true}\r\n                    jsonfield =\"jsondata\"\r\n                    deleteRecord={this.props.deleteAttachment}\r\n                    deleteParam={this.props.deleteParam}\r\n                    editParam={{ ...this.props.editParam, operation: \"update\", ncontrolCode: editFileId, screenName: this.props.screenName, modalName: \"openAttachmentModal\",masterList: this.props.masterList, masterAlertStatus: this.props.masterAlertStatus }}\r\n                    fetchRecord={this.props.fetchRecord}\r\n                    deleteId={deleteFileId}\r\n                    editId={editFileId}\r\n                    viewId={viewFileId}\r\n                    userRoleControlRights={this.props.userRoleControlRights}\r\n                    viewFile={this.viewFile}\r\n                    mainField={this.props.mainField}\r\n                    subFields={subFields}\r\n                    moreField={moreField}\r\n                    hidePaging={false}\r\n                    // skip={this.props.skip}\r\n                    // take={this.props.take}\r\n                    settings = {this.props.Login.settings}\r\n                />\r\n                {\r\n                    this.props.Login.openAttachmentModal ?\r\n                        <SlideOutModal\r\n                            onSaveClick={this.onSaveClick}\r\n                            operation={this.props.Login.operation}\r\n                            screenName={this.props.Login.screenName}\r\n                            closeModal={this.handleClose}\r\n                            show={this.props.Login.openAttachmentModal}\r\n                            inputParam={this.props.Login.inputParam}\r\n                            esign={this.props.Login.loadEsign}\r\n                            validateEsign={this.validateEsign}\r\n                            masterStatus={this.props.Login.masterStatus}\r\n                            updateStore={this.props.updateStore}\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                            mandatoryFields={mandatoryFields}\r\n                            addComponent={this.props.Login.loadEsign ?\r\n                                <Esign\r\n                                    operation={this.props.Login.operation}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                />\r\n                                :\r\n                                <AddAttachment\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onDrop={this.onDropFiles}\r\n                                    deleteAttachment={this.deleteAttachment}\r\n                                    jsonField = {'jsondata'}\r\n                                    actionType={this.state.actionType}\r\n                                    linkMaster={this.props.Login.linkMaster}\r\n                                    onInputOnChange={this.onAttachmentInputChange}\r\n                                    editFiles={this.props.Login.editFiles}\r\n                                    onComboChange={this.onComboChange}\r\n                                    maxSize={20}\r\n                                    fileNameLength={this.props.screenName==='IDS_TESTATTACHMENTS'?255:150}\r\n                                    maxFiles={this.props.Login.operation===\"update\"?1:3}\r\n                                    operation={this.props.Login.operation}\r\n                                    selectedListName={this.props.selectedListName}\r\n                                    displayName={this.props.displayName}\r\n                                    masterList={this.props.masterList}\r\n                                    multiple={this.props.Login.operation===\"update\"?false:true}\r\n                                />\r\n                            }\r\n                        />\r\n                        : \"\"}\r\n            </>\r\n        );\r\n    }\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName]= deleteAttachmentDropZone(selectedRecord[fieldName],file)\r\n      \r\n        this.setState({\r\n            selectedRecord,  actionType:\"delete\" //fileToDelete:file.name \r\n        });\r\n    }\r\n\r\n\r\n    onDropFiles = (attachedFiles, fieldName,maxSize) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n\r\n\r\n    onAttachmentInputChange = (event, caseNo, optional) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        switch (caseNo) {\r\n            case 1:\r\n                if (event.target.type === 'radio') {\r\n                    selectedRecord[event.target.name] = event.target.checked === true && optional;\r\n                   // selectedRecord[\"sfilename\"] = \"\";\r\n                } else {\r\n                    selectedRecord[event.target.name] = event.target.value;\r\n                }\r\n                this.setState({ selectedRecord });\r\n                break;\r\n\r\n            default:\r\n                selectedRecord[event.target.name] = event.target.value;\r\n                this.setState({ selectedRecord });\r\n                break;\r\n        }\r\n    }\r\n    onInputOnChange = (event) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onComboChange = (comboData, comboName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n        if (comboData) {\r\n            selectedRecord[comboName] = comboData;\r\n            this.setState({ selectedRecord });\r\n        } else {\r\n            selectedRecord[comboName] = []\r\n            this.setState({ selectedRecord });\r\n        }\r\n    }\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n    }\r\n    onSaveClick = (saveType, formRef) => {\r\n        // const masterData = this.props.Login.masterData;\r\n        // let inputData = {}\r\n        // let inputParam = {}\r\n        // inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        // if(this.props.Login.screenName === \"IDS_SAMPLEATTACHMENTS\") {\r\n        //     let saveParam={userInfo:this.props.Login.userInfo,\r\n        //         selectedRecord:this.state.selectedRecord,\r\n        //         masterData:this.props.Login.masterData,\r\n        //         saveType, formRef,\r\n        //         operation:this.props.Login.operation,\r\n        //         selectedMaster:this.props.selectedMaster\r\n        //     }\r\n        //     inputParam = onSaveSampleAttachment(saveParam,this.props.selectedMaster);\r\n        // }else if(this.props.Login.screenName === \"IDS_TESTATTACHMENTS\") {\r\n        //     let saveParam={userInfo:this.props.Login.userInfo,\r\n        //         selectedRecord:this.state.selectedRecord,\r\n        //         masterData:this.props.Login.masterData,\r\n        //         saveType, formRef,\r\n        //         operation:this.props.Login.operation,\r\n        //         selectedMaster:this.props.selectedMaster\r\n        //     }\r\n        //     inputParam = onSaveTestAttachment(saveParam,this.props.selectedMaster);\r\n        this.props.onSaveClick(saveType, formRef, this.state.selectedRecord)\r\n        // }\r\n        // if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n        //     const updateInfo = {\r\n        //         typeName: DEFAULT_RETURN,\r\n        //         data: {\r\n        //             loadEsign: true,\r\n        //             screenData: { inputParam, masterData },\r\n        //             operation: this.props.Login.operation,\r\n        //             screenName: this.props.Login.screenName,\r\n        //         }\r\n        //     }\r\n        //     this.props.updateStore(updateInfo);\r\n        // }\r\n        // else {\r\n        //     this.props.crudMaster(inputParam, masterData, \"openAttachmentModal\");\r\n        // }\r\n    }\r\n    handleClose = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openAttachmentModal = this.props.Login.openAttachmentModal\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let operation = this.props.Login.operation;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openAttachmentModal = false;\r\n                selectedRecord = {};\r\n                operation = undefined;\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n            }\r\n        }\r\n        else {\r\n            openAttachmentModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openAttachmentModal, loadEsign, selectedRecord, selectedParamId: null, operation }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        if (this.props.Login.operation === 'dynamic') {\r\n            this.props.validateEsignforApproval(inputParam, \"openChildModal\");\r\n        } else {\r\n            this.props.validateEsignCredential(inputParam, \"openAttachmentModal\");\r\n        }\r\n    }\r\n    viewFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                file: filedata,\r\n                userinfo: this.props.Login.userInfo\r\n            },\r\n            classUrl: \"attachment\",\r\n            operation: \"view\",\r\n            methodUrl: this.props.methodUrl,\r\n            screenName: this.props.Login.screenName\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    updateStore, viewAttachment, validateEsignCredential, crudMaster, getAttachmentCombo, deleteAttachment\r\n})(injectIntl(Attachments));"]},"metadata":{},"sourceType":"module"}