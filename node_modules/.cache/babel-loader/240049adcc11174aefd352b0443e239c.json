{"ast":null,"code":"import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";var _this=this;import React from'react';import rsapi from'../rsapi';import Axios from'axios';import{toast}from'react-toastify';import{filterRecordBasedOnTwoArrays,sortData,rearrangeDateFormat,convertDateTimetoString,fillRecordBasedOnCheckBoxSelection,getRecordBasedOnPrimaryKeyName,updatedObjectWithNewElement,replaceUpdatedObject,parentChildComboLoad,getSameRecordFromTwoArrays,constructjsonOptionList,constructjsonOptionDefault,childComboLoad,filterRecordBasedOnPrimaryKeyName,reArrangeArrays,childComboLoadForEdit,sortDataByParent,sortDataForDate}from'../components/CommonScript';import{DEFAULT_RETURN}from'./LoginTypes';import{intl}from'../components/App';import{initRequest}from'./LoginAction';import{//RegistrationSubType, RegistrationType, \nSampleType,checkBoxOperation,orderType,transactionStatus}from'../components/Enumeration';import{crudMaster,postCRUDOrganiseTransSearch}from'./ServiceAction';//import { getTestChildTabDetail } from './index.js'\nimport{constructOptionList}from'../components/CommonScript';import{Operators,TextFilter,NumericFilter,// BooleanFilter,\nDateFilter// EnumFilter,\n//  EnumFilterProps,\n}from\"@progress/kendo-react-data-tools\";import{ComboBox}from\"@progress/kendo-react-dropdowns\";import{Utils as QbUtils}from\"@react-awesome-query-builder/ui\";import{leftArrowClass}from'@progress/kendo-react-layout';import{openModal}from'./ApprovalConfigAction';var checkTree=QbUtils.checkTree,loadTree=QbUtils.loadTree;export function getSampleTypeChange(Map,masterData,event,labelname){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getRegTypeBySampleType\",Map).then(function(response){masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},_defineProperty({},labelname,_objectSpread({},event.item)));dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getSubSampleChildTabDetail(inputData){return function(dispatch){if(inputData.ntransactionsamplecode.length>0){var inputParamData={ntransactionsamplecode:inputData.ntransactionsamplecode,userinfo:inputData.userinfo,npreregno:inputData.npreregno?inputData.npreregno:-1};var url=null;switch(inputData.activeSubSampleTab){case\"IDS_SUBSAMPLEATTACHMENTS\":url=\"attachment/getSubSampleAttachment\";break;case\"IDS_SUBSAMPLECOMMENTS\":url=\"comments/getSubSampleComment\";break;case\"IDS_OUTSOURCEDETAILS\":url=\"registration/getOutsourceDetails\";break;default:url=null;break;}if(url!==null){dispatch(initRequest(true));rsapi.post(url,inputParamData).then(function(response){var _payload;var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:(_payload={masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{selectedSubSample:inputData.selectedSubSample// selectedTestCode: inputData.ntransactiontestcode,\n}),loading:false,showFilter:false,activeSubSampleTab:inputData.activeSubSampleTab,screenName:inputData.screenName,activeTestTab:inputData.activeSubSampleTab},_defineProperty(_payload,\"screenName\",inputData.screenName),_defineProperty(_payload,\"selectedId\",null),_defineProperty(_payload,\"activeTabIndex\",inputData.activeTabIndex),_payload)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});}else{dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:inputData.selectedSample}),loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab}});}}else{toast.warn(intl.formatMessage({id:\"IDS_PLSSELECTASAMPLE\"}));}};}export function getRegTypeChange(Map,masterData,event,labelname){return function(dispatch){rsapi.post(\"/registration/getRegSubTypeByRegType\",Map).then(function(response){masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},_defineProperty({},labelname,_objectSpread({},event.item)));dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getRegSubTypeChange(Map,masterData,event,labelname){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getRegTemplateTypeByRegSubType\",Map).then(function(response){masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},_defineProperty({},labelname,_objectSpread({},event.item)));dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function onApprovalConfigVersionChange(Map,masterData,event,labelname){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getApprovalConfigBasedTemplateDesign\",Map).then(function(response){masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},_defineProperty({},labelname,_objectSpread({},event.item)));dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getComponentTestBySpec(Map,selectedRecord,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getComponentTestBySpec\",Map).then(function(response){var _response$data=response.data,Component=_response$data.Component,Test=_response$data.Test;var slno=Component.length>0?Component[0].slno:-1;var selectedComponent=Component.length>0?Component[0]:undefined;var SelectedTest=[];if(Object.keys(Test).length>0){SelectedTest=Test[slno];}dispatch({type:DEFAULT_RETURN,payload:{Component:Component,Test:Test,SelectedTest:SelectedTest,selectedComponent:selectedComponent,loading:false,selectedRecord:selectedRecord,popUptestDataState:{skip:0,take:10}}});}).catch(function(error){// console.log(error);\ntoast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getTestfromDB(objComponent,LoginProps,nflag){return function(dispatch){dispatch(initRequest(true));var component=_objectSpread({},objComponent);component[\"ncomponentcode\"]=objComponent[\"ncomponentcode\"]?objComponent[\"ncomponentcode\"].value:-1;component[\"nstoragelocationcode\"]=objComponent[\"nstoragelocationcode\"]?objComponent[\"nstoragelocationcode\"].value:-1;component[\"nstorageconditioncode\"]=objComponent[\"nstorageconditioncode\"]?objComponent[\"nstorageconditioncode\"].value:-1;component[\"slno\"]=LoginProps.Component?Object.keys(LoginProps.Component).length+1:0;component[\"scomponentname\"]=objComponent[\"ncomponentcode\"].label;component[\"sstoragelocationname\"]=objComponent[\"nstoragelocationcode\"]&&objComponent[\"nstoragelocationcode\"].label?objComponent[\"nstoragelocationcode\"].label:\"\";component[\"sstorageconditionname\"]=objComponent[\"nstorageconditioncode\"]&&objComponent[\"nstorageconditioncode\"].label?objComponent[\"nstorageconditioncode\"].label:\"\";component[\"ntzdmanufdate\"]=objComponent[\"ntzdmanufdate\"]?objComponent[\"ntzdmanufdate\"].value:-1;component[\"ntzdreceivedate\"]=objComponent[\"ntzdreceivedate\"]?objComponent[\"ntzdreceivedate\"].value:-1;component[\"stzdreceivedate\"]=objComponent[\"ntzdreceivedate\"]?objComponent[\"ntzdreceivedate\"].label:\"\";component[\"nplasmafilecode\"]=objComponent[\"nplasmafilecode\"]?objComponent[\"nplasmafilecode\"].value:-1;component[\"splasmafilenumber\"]=objComponent[\"nplasmafilecode\"]?objComponent[\"nplasmafilecode\"].label:\"\";var dreceiveddate=objComponent[\"dreceiveddate\"];component[\"dreceiveddate\"]=dreceiveddate;//formatInputDate(objComponent[\"dreceiveddate\"], false);\ncomponent[\"sreceiveddate\"]=convertDateTimetoString(dreceiveddate,LoginProps.userInfo);//formatInputDateWithoutT(objComponent[\"dreceiveddate\"], false);//formatDate(objComponent[\"sreceiveddate\"]);\n// rsapi.post(\"/registration/getTestfromDB\", { \"Component\": component })\nrsapi.post(\"/registration/getTestfromDB\",{nspecsampletypecode:component.nspecsampletypecode,slno:component.slno,nneedsubsample:LoginProps.masterData.RealRegSubTypeValue.nneedsubsample}).then(function(response){var TestData=response.data;var slno=component.slno;var SelectedTest=[];var loadComponent=true;var selectComponent={};var showSaveContinue=true;var SelectedSource=[];// let openChildModal = true;\nvar selectedComponent=undefined;var parentPopUpSize=\"lg\";// selectComponent = objComponent\nif(nflag===1){loadComponent=true;objComponent[\"smanuflotno\"]=\"\";objComponent[\"dreceiveddate\"]=rearrangeDateFormat(LoginProps.userInfo,LoginProps.CurrentTime);//new Date(LoginProps.CurrentTime);\nobjComponent[\"sreceiveddate\"]=rearrangeDateFormat(LoginProps.userInfo,LoginProps.CurrentTime);//new Date(LoginProps.CurrentTime);\nselectComponent=objComponent;}else{loadComponent=false;parentPopUpSize=\"xl\";// openChildModal = false;\nshowSaveContinue=false;selectComponent=undefined;}var Test=LoginProps.Test||[];var Component=LoginProps.Component||[];Component.unshift(component);selectedComponent=component;Test[slno]=response.data;SelectedTest=TestData;dispatch({type:DEFAULT_RETURN,payload:{Component:Component,Test:Test,SelectedTest:SelectedTest,selectComponent:selectComponent,selectedComponent:selectedComponent,loadComponent:loadComponent,showSaveContinue:showSaveContinue,parentPopUpSize:parentPopUpSize,loading:false,SelectedSource:SelectedSource}});// console.log(response.data);\n}).catch(function(error){//   console.log(error);\ntoast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function EditComponent(Map,component,userInfo){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var ComponentTestBySpec=rsapi.post(\"/registration/getComponentBySpec\",Map);var timezone=rsapi.post(\"timezone/getTimeZone\");urlArray=[ComponentTestBySpec,timezone];Axios.all(urlArray).then(function(response){var lstComponentMap=constructOptionList(response[0].data.lstComponent||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);var timeZoneListMap=constructOptionList(response[1].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var TimeZoneField=response[1].data;var lstComponent=lstComponentMap.get(\"OptionList\");var timeZoneList=timeZoneListMap.get(\"OptionList\");component[\"ncomponentcode\"]={label:component.scomponentname,value:component.ncomponentcode};component[\"dreceiveddate\"]=rearrangeDateFormat(userInfo,component[\"sreceiveddate\"]);component[\"scomments\"]=component[\"scomments\"];var ntzdreceivedate=component.ntzdreceivedate;if(component.ntzdreceivedate!==null&&typeof component.ntzdreceivedate===\"object\"){ntzdreceivedate=component.ntzdreceivedate.value;}component[\"ntzdreceivedate\"]=component.ntzdreceivedate?{\"label\":TimeZoneField[TimeZoneField.findIndex(function(x){return x.ntimezonecode===ntzdreceivedate;})].stimezoneid,\"value\":TimeZoneField[TimeZoneField.findIndex(function(x){return x.ntimezonecode===ntzdreceivedate;})].ntimezonecode}:\"\";dispatch({type:DEFAULT_RETURN,payload:{loadComponent:true,childoperation:\"update\",lstComponent:lstComponent,ChildscreenName:\"Component\",openChildModal:false,selectComponent:component,parentPopUpSize:\"lg\",timeZoneList:timeZoneList,loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function ReloadData(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"registration/getRegistrationByFilterSubmit\",_objectSpread({},inputData.inputData)).then(function(response){var masterData=_objectSpread(_objectSpread({},inputData.masterData),response.data);if(inputData.searchSampleRef!==undefined&&inputData.searchSampleRef.current!==null){inputData.searchSampleRef.current.value=\"\";masterData['searchedSample']=undefined;}if(inputData.searchSubSampleRef!==undefined&&inputData.searchSubSampleRef.current!==null){inputData.searchSubSampleRef.current.value=\"\";masterData['searchedSubSample']=undefined;}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";//masterData['searchedTests'] = undefined\nmasterData['searchedTest']=undefined;}// let selectedFilter = inputData.selectedFilter;\n// selectedFilter[\"fromdate\"] = \"\";\n// selectedFilter[\"todate\"] = \"\";\nsortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,showFilter:false,skip:0,testskip:0,take:undefined,testtake:undefined,subsampletake:undefined,subsampleskip:0,showSample:undefined,regSampleExisted:false// filterColumnActive:false,\n//selectedFilter\n}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});};}export function getTreeByProduct(Map,selectedRecord,comboData,inputParam){return function(dispatch){dispatch(initRequest(true));if(Map.nsampletypecode===SampleType.CLINICALTYPE&&Map.nportalrequired===transactionStatus.YES&&selectedRecord[\"Order Type\"]&&selectedRecord[\"Order Type\"].value==2){Map=_objectSpread(_objectSpread({},Map),{},{nordertypecode:selectedRecord[\"Order Type\"].value,nallottedspeccode:selectedRecord[\"Order\"]&&selectedRecord[\"Order\"].item.jsondata.nallottedspeccode});}else if(Map.nsampletypecode===SampleType.PRODUCT&&selectedRecord[\"Plant Order\"]&&selectedRecord[\"Plant Order\"].item&&selectedRecord[\"Plant Order\"].item.jsondata){Map=_objectSpread(_objectSpread({},Map),{},{nallottedspeccode:selectedRecord[\"Plant Order\"]&&selectedRecord[\"Plant Order\"].item.jsondata.nallottedspeccode});}rsapi.post(\"/registration/getTreeByProduct\",Map).then(function(response){var _ref=[],Specification=_ref.Specification,AgaramTree=_ref.AgaramTree,ActiveKey=_ref.ActiveKey,FocusKey=_ref.FocusKey,OpenNodes=_ref.OpenNodes;var selectedSpec={};if(response.data[\"rtn\"]===true){Specification=constructOptionList(response.data[\"Specification\"]||[],\"nallottedspeccode\",\"sspecname\",undefined,undefined,true).get(\"OptionList\");AgaramTree=response.data[\"AgaramTree\"];ActiveKey=response.data[\"ActiveKey\"];FocusKey=response.data[\"FocusKey\"];OpenNodes=response.data[\"OpenNodes\"];//Manufacturer = response.data[\"Manufacturer\"];\nselectedSpec[\"nallottedspeccode\"]=Specification.length>0?{\"value\":Specification[0].value,\"label\":Specification[0].label,\"item\":Specification[0].item}:\"\";selectedSpec[\"sversion\"]=Specification.length>0?Specification[0].item.sversion:\"\";selectedSpec[\"ntemplatemanipulationcode\"]=Specification.length>0?Specification[0].item.ntemplatemanipulationcode:-1;}selectedRecord=_objectSpread(_objectSpread({},selectedRecord),selectedSpec);if(Map.nsampletypecode===SampleType.CLINICALTYPE&&Map.nportalrequired&&Map.nportalrequired===3&&selectedRecord[\"Order Type\"]&&selectedRecord[\"Order Type\"].value===2||Map.nsampletypecode===SampleType.PRODUCT&&selectedRecord[\"Plant Order\"]&&selectedRecord[\"Plant Order\"].item&&selectedRecord[\"Plant Order\"].item.jsondata.nallottedspeccode){var dispatchData=_objectSpread(_objectSpread({Specification:Specification,selectedRecord:selectedRecord,AgaramTree:AgaramTree,ActiveKey:ActiveKey,FocusKey:FocusKey,OpenNodes:OpenNodes,Test:[],SelectedTest:[],loading:false,comboData:comboData},inputParam),{},{selectedSpec:selectedSpec,Component:[],selectComponent:{},selectedComponent:{},subSampleDataGridList:[],\"userInfo\":Map.userInfo// ALPD-3673 VISHAKH\n});if(Specification.length>0){if(Map.nsampletypecode===SampleType.CLINICALTYPE){dispatch(autoExternalComponentLoadBasedOnSpec(dispatchData));}else if(Map.nsampletypecode===SampleType.PRODUCT){dispatch(autoPortalTestLoadBasedOnSpec(dispatchData));}}else{var masterStatus='';if(selectedRecord[\"Order\"]&&selectedRecord[\"Order\"].item.jsondata.nallottedspeccode){masterStatus=intl.formatMessage({id:\"IDS_SELECTEDEXTERNALORDERSPECISRETIRED\"});}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},dispatchData),{},{masterStatus:masterStatus})});}}else{dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({Specification:Specification,selectedRecord:selectedRecord,AgaramTree:AgaramTree,ActiveKey:ActiveKey,FocusKey:FocusKey,OpenNodes:OpenNodes,Test:[],SelectedTest:[],loading:false,comboData:comboData},inputParam),{},{selectedSpec:selectedSpec,Component:[],selectComponent:{},selectedComponent:{},subSampleDataGridList:[],addMaster:false,masterIndex:undefined})});}}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export var getNewRegSpecification=function getNewRegSpecification(inputParam,masterData){return function(dispatch){if(inputParam.selectedNode!==null){dispatch(initRequest(true));rsapi.post(\"/registration/\"+inputParam.operation+inputParam.methodUrl,_objectSpread(_objectSpread({},inputParam),{},{ntreetemplatemanipulationcode:inputParam.selectedNode.ntemplatemanipulationcode})).then(function(response){sortData(response.data);var Specification=constructOptionList(response.data||[],\"nallottedspeccode\",\"sspecname\",false,false,true).get(\"OptionList\");var selectedComponent=undefined;inputParam.selectedRecord[\"nallottedspeccode\"]=Specification.length>0?{value:Specification[0].value,label:Specification[0].label,item:Specification[0].item}:\"\";inputParam.selectedRecord[\"sversion\"]=Specification.length>0?Specification[0].item.sversion:\"\";inputParam.selectedRecord[\"ntemplatemanipulationcode\"]=Specification.length>0?Specification[0].item.ntemplatemanipulationcode:-1;dispatch({type:DEFAULT_RETURN,payload:{ActiveKey:inputParam.activeKey,FocusKey:inputParam.focusKey,primaryKey:inputParam.primaryKey,Specification:Specification,selectedNode:inputParam.selectedNode,selectedRecord:inputParam.selectedRecord,//  Test: [],\nselectedComponent:selectedComponent,//ALPD-1793_fix\n// SelectedTest: [],\nloading:false,showSample:undefined}});}).catch(function(error){if(error.response.status===409||error.response.status===417){toast.info(error.response.data);}else{toast.error(error.message);}});}};};export function AddComponents(Map){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var ComponentTestBySpec=rsapi.post(\"/registration/getComponentBySpec\",Map);var timezone=rsapi.post(\"timezone/getTimeZone\");urlArray=[ComponentTestBySpec,timezone];Axios.all(urlArray).then(function(response){var lstComponentMap=constructOptionList(response[0].data.lstComponent||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);var timeZoneListMap=constructOptionList(response[1].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var lstComponent=lstComponentMap.get(\"OptionList\");var timeZoneList=timeZoneListMap.get(\"OptionList\");var dreceiveddate=null;if(lstComponent[0].item.sreceiveddate)dreceiveddate=rearrangeDateFormat(Map[\"userinfo\"],lstComponent[0].item.sreceiveddate);//new Date(lstComponent[0].item.sreceiveddate);//|| [];\nvar selectComponent={sreceiveddate:dreceiveddate,dreceiveddate:dreceiveddate,ntzdreceivedate:{\"label\":Map[\"userinfo\"].stimezoneid,\"value\":Map[\"userinfo\"].ntimezonecode},stzdreceivedate:Map[\"userinfo\"].stimezoneid,scomments:\"\",nallottedspeccode:lstComponent[0].item.nallottedspeccode};var CurrentTime=dreceiveddate;dispatch({type:DEFAULT_RETURN,payload:{loadComponent:true,lstComponent:lstComponent,dreceiveddate:dreceiveddate,ChildscreenName:\"Component\",showSaveContinue:true,openChildModal:false,childoperation:\"create\",selectComponent:selectComponent,parentPopUpSize:\"lg\",CurrentTime:CurrentTime,timeZoneList:timeZoneList,loading:false,openPortal:true,openModal:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getAllTest(objComponent,LoginProps,nneedsubsample,specBasedComponent,selectPackage1,specBasedTestPackage,selectPackage){return function(dispatch){if(Object.keys(objComponent).length>0){dispatch(initRequest(true));rsapi.post(\"/registration/getTestfromDB\",{nspecsampletypecode:objComponent.nspecsampletypecode,slno:objComponent.slno,nneedsubsample:nneedsubsample,nallottedspeccode:objComponent.nallottedspeccode,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:true//    ntestpackagecode:selectPackage.ntestpackagecode.value\n}).then(function(response){var PackageData=[];var TestCombined=[];//   const TestCombined = response.data;\nvar TestData=response.data;var Test=LoginProps.Test||[];var componentTest=Test[objComponent.slno]?Test[objComponent.slno]:[];TestCombined=filterRecordBasedOnTwoArrays(TestData,componentTest,\"ntestgrouptestcode\");dispatch({type:DEFAULT_RETURN,payload:{TestCombined:TestCombined,TestPackage:PackageData,selectPackage:[],loadTest:true,openChildModal:false,ChildscreenName:intl.formatMessage({id:\"IDS_TEST\"}),screenName:intl.formatMessage({id:\"IDS_TEST\"}),operation:\"create\",childoperation:\"create\",parentPopUpSize:\"lg\",loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});}else{toast.info(intl.formatMessage({id:\"IDS_SELECTCOMPONENTTOADDTEST\"}));}};}export function getTest(objComponent,LoginProps,nneedsubsample,specBasedComponent,selectPackage1,specBasedTestPackage,selectPackage){return function(dispatch){// if (Object.keys(objComponent).length > 0) {\nvar urlArray=[];var TestGet=rsapi.post(\"/registration/getTestfromDB\",{nspecsampletypecode:objComponent.nspecsampletypecode,slno:objComponent.slno,nneedsubsample:nneedsubsample,nallottedspeccode:objComponent.nallottedspeccode,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:true//    ntestpackagecode:selectPackage.ntestpackagecode.value\n});urlArray[0]=TestGet;var TestPackageGet=rsapi.post(\"/registration/getTestfromTestPackage\",{nspecsampletypecode:objComponent.nspecsampletypecode,slno:objComponent.slno,nneedsubsample:nneedsubsample,nallottedspeccode:objComponent.nallottedspeccode,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:true});urlArray[1]=TestPackageGet;var TestSectionGet=rsapi.post(\"/registration/getTestfromSection\",{nspecsampletypecode:objComponent.nspecsampletypecode,slno:objComponent.slno,nneedsubsample:nneedsubsample,nallottedspeccode:objComponent.nallottedspeccode,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:true});urlArray[2]=TestSectionGet;dispatch(initRequest(true));Axios.all(urlArray).then(function(response){// const TestCombined = [];\nvar PackageData=[];var TestSectionData=[];//  if (specBasedTestPackage) {\nvar PackageDataMap=constructOptionList(response[1].data.TestPackage||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");var TestSectionDataMap=constructOptionList(response[2].data.TestSection||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,true);TestSectionData=TestSectionDataMap.get(\"OptionList\");//    }\n//    else {\nvar TestData=response[0].data;var Test=LoginProps.Test||[];var componentTest=Test[objComponent.slno]?Test[objComponent.slno]:[];var TestCombined=filterRecordBasedOnTwoArrays(TestData,componentTest,\"ntestcode\");//    }\n// const lstComponentMap = constructOptionList(TestCombined|| [], \"ntestgrouptestcode\",\n//\"stestsynonym\", undefined, undefined, true);\ndispatch({type:DEFAULT_RETURN,payload:{TestCombined:TestCombined,TestPackage:PackageData,selectPackage:[],AllTest:TestData,TestSection:TestSectionData,selectSection:[],loadTest:true,openChildModal:false,ChildscreenName:intl.formatMessage({id:\"IDS_TEST\"}),screenName:intl.formatMessage({id:\"IDS_TEST\"}),operation:\"create\",childoperation:\"create\",parentPopUpSize:\"lg\",loading:false,AllSection:TestSectionData,selectedTestData:[]}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});// } else {\n//     toast.info(intl.formatMessage({ id: \"IDS_SELECTCOMPONENTTOADDTEST\" }));\n// }\n};}export function addsubSample(masterData,userinfo,columnList,selectComponent,childColumnList,SubSamplecomboComponents,SubSamplewithoutCombocomponent,specBasedComponent,Map,Component,isServiceRequired,SubSamplecomboData,selectedRecord,conditionalTestPackage,specBasedTestPackage,LoginProps){if(isServiceRequired){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var timeZoneService=rsapi.post(\"timezone/getTimeZone\");urlArray[0]=timeZoneService;var actualService=rsapi.post(\"dynamicpreregdesign/getComboValues\",{parentcolumnlist:columnList?columnList.filter(function(x){return x.inputtype!=='backendsearchfilter'&&x.inputtype!=='frontendsearchfilter'&&x.readonly!==true;}):[],childcolumnlist:childColumnList?childColumnList:[],userinfo:userinfo});urlArray[1]=actualService;if(specBasedComponent){var ComponentTestBySpec=rsapi.post(\"/registration/getComponentBySpec\",_objectSpread(_objectSpread({},Map),{},{specBasedComponent:specBasedComponent//   conditionalTestPackage:true\n}));urlArray[2]=ComponentTestBySpec;}else{Component=Component?Component:[];var TestGet=rsapi.post(\"/registration/getTestfromDB\",{nallottedspeccode:Map[\"nallottedspeccode\"],slno:Component?Object.keys(Component).length+1:1,nneedsubsample:Map[\"nneedsubsample\"],// nallottedspeccode: objComponent.nallottedspeccode,\nspecBasedComponent:specBasedComponent,conditionalTestPackage:true,specBasedTestPackage:specBasedTestPackage});urlArray[2]=TestGet;var TestPackageGet=rsapi.post(\"/registration/getTestfromTestPackage\",{nallottedspeccode:Map[\"nallottedspeccode\"],// slno: Component ? Object.keys(Component).length + 1 : 1,\nspecBasedComponent:specBasedComponent//   specBasedTestPackage: specBasedTestPackage,\n//  conditionalTestPackage: conditionalTestPackage\n});urlArray[5]=TestPackageGet;var TestSectionGet=rsapi.post(\"/registration/getTestfromSection\",{nallottedspeccode:Map[\"nallottedspeccode\"],// slno: Component ? Object.keys(Component).length + 1 : 1,\nspecBasedComponent:specBasedComponent//   specBasedTestPackage: specBasedTestPackage,\n//  conditionalTestPackage: conditionalTestPackage\n});urlArray[6]=TestSectionGet;}var currentDate=rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:userinfo});urlArray[3]=currentDate;var dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:SubSamplewithoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userinfo});urlArray[4]=dateService;Axios.all(urlArray).then(function(response){var timeZoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var timeZoneList=timeZoneMap.get(\"OptionList\");var defaultTimeZone={label:userinfo.stimezoneid,value:userinfo.ntimezonecode};var newcomboData=parentChildComboLoad(columnList.filter(function(x){return x.inputtype!=='backendsearchfilter'&&x.inputtype!=='frontendsearchfilter'&&x.readonly!==true;}),response[1].data,selectComponent,childColumnList,SubSamplewithoutCombocomponent,undefined,userinfo.slanguagetypecode,userinfo);var TestCombined=[];var lstComponent=[];var PackageData=[];var TestSectionData=[];var selectedRecord1=newcomboData.selectedRecord;if(specBasedComponent){var lstComponentMap=constructOptionList(response[2].data.lstComponent||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);lstComponent=lstComponentMap.get(\"OptionList\");if(lstComponent.length>0){selectedRecord1['ncomponentcode']=_objectSpread({},lstComponent[0]);selectedRecord1[\"Sample Name\"]=selectedRecord1['ncomponentcode'].label;selectedRecord1[\"nspecsampletypecode\"]=selectedRecord1['ncomponentcode'].item.nspecsampletypecode;selectedRecord1[\"nneedsubsample\"]=Map.nneedsubsample;}}else{var PackageDataMap=constructOptionList(response[5].data.TestPackage||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");var testSectionDataMap=constructOptionList(response[6].data.TestSection||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,true);TestSectionData=testSectionDataMap.get(\"OptionList\");TestCombined=response[2].data;}var comboData1=newcomboData.comboData;SubSamplewithoutCombocomponent.map(function(componentrow){if(componentrow.inputtype===\"date\"){if(componentrow.loadcurrentdate){selectedRecord1[componentrow.label]=componentrow.loadcurrentdate?rearrangeDateFormat(userinfo,response[3].data):\"\";selectedRecord1[componentrow.label+\"value\"]=selectedRecord1[componentrow.label];}else if(componentrow.nperiodcode){selectedRecord1[componentrow.label+\"value\"]=response[4].data[componentrow.label]?new Date(response[4].data[componentrow.label][\"datevalue\"]):null;if(componentrow.loadselecteddate){selectedRecord1[componentrow.label]=response[4].data[componentrow.label]?new Date(response[4].data[componentrow.label][\"datevalue\"]):null;}//    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n//    new Date(response[2].data[componentrow.label]):null;\n}else{selectedRecord1[componentrow.label+\"value\"]=new Date();}if(componentrow.hidebeforedate){selectedRecord1[componentrow.label+\"min\"]=selectedRecord1[componentrow.label+\"value\"];}if(componentrow.hideafterdate){selectedRecord1[componentrow.label+\"max\"]=selectedRecord1[componentrow.label+\"value\"];}}else if(componentrow.inputtype===\"radio\"||componentrow.inputtype===\"checkbox\"||componentrow.inputtype===\"predefineddropdown\"){if(componentrow['radiodefaultvalue']){if(componentrow.inputtype===\"checkbox\"){var val='';componentrow.radiodefaultvalue&&componentrow.radiodefaultvalue.length>0&&componentrow.radiodefaultvalue.map(function(x,i){val=val+(i===componentrow.radiodefaultvalue.length-1?x.label:x.label+',');});selectedRecord1[componentrow.label]=val;}else if(componentrow.inputtype===\"predefineddropdown\"){selectedRecord1[componentrow.label]=componentrow.radiodefaultvalue?componentrow.radiodefaultvalue:\"\";}else{selectedRecord1[componentrow.label]=componentrow.radiodefaultvalue?componentrow.radiodefaultvalue.label:\"\";}}else{if(componentrow.inputtype===\"radio\"){selectedRecord1[componentrow.label]=componentrow.radioOptions?componentrow.radioOptions.tags[0].text:\"\";}}}});var inputParam={ChildscreenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),screenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),showSaveContinue:true,openChildModal:false,childoperation:\"create\",parentPopUpSize:\"lg\",loading:false,lstComponent:lstComponent,openPortal:true,openModal:false,operation:\"create\",loadSubSample:true,selectComponent:selectedRecord1,saveContinueData:_objectSpread({},selectedRecord1),SubSamplecomboData:comboData1,SubSamplecomboComponents:SubSamplecomboComponents,SubSamplewithoutCombocomponent:SubSamplewithoutCombocomponent,TestCombined:TestCombined,parentSubSampleColumnList:columnList,childSubSampleColumnList:childColumnList,timeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,masterData:masterData,selectPackage:[],TestPackage:PackageData,TestSection:TestSectionData,selectSection:[],AllTest:TestCombined,AllSection:TestSectionData};if(specBasedComponent){dispatch(componentTest(selectedRecord1,false,specBasedComponent,Component,specBasedTestPackage,conditionalTestPackage,inputParam));}else{dispatch({type:DEFAULT_RETURN,payload:_objectSpread({},inputParam)});}}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}else{var newcomboData=parentChildComboLoad(columnList,SubSamplecomboData,selectComponent,childColumnList,SubSamplewithoutCombocomponent,undefined,userinfo.slanguagetypecode,userinfo);return function(dispatch){if(!specBasedComponent){var urlArray=[];var ComponentTestBySpec=rsapi.post(\"/registration/getTestfromDB\",_objectSpread(_objectSpread({nallottedspeccode:Map[\"nallottedspeccode\"],slno:Component?Object.keys(Component).length+1:1},Map),{},{// nallottedspeccode: objComponent.nallottedspeccode,\nspecBasedComponent:specBasedComponent,conditionalTestPackage:true,specBasedTestPackage:specBasedTestPackage}));urlArray[0]=ComponentTestBySpec;var currentDate=rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:userinfo});urlArray[1]=currentDate;var dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:SubSamplewithoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userinfo});urlArray[2]=dateService;var TestPackageGet=rsapi.post(\"/registration/getTestfromTestPackage\",{//  nspecsampletypecode: selectedobject.nspecsampletypecode,\nnallottedspeccode:selectedRecord.nallottedspeccode.item.nallottedspeccode,slno:Component?Object.keys(Component).length+1:1,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:conditionalTestPackage});urlArray[3]=TestPackageGet;var TestSectionGet=rsapi.post(\"/registration/getTestfromSection\",{//  nspecsampletypecode: selectedobject.nspecsampletypecode,\nnallottedspeccode:selectedRecord.nallottedspeccode.item.nallottedspeccode,slno:Component?Object.keys(Component).length+1:1,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:conditionalTestPackage});urlArray[4]=TestSectionGet;Axios.all(urlArray).then(function(response){var TestCombined=[];var PackageData=[];var TestSectionData=[];//  if (!specBasedTestPackage) {\nTestCombined=response[0].data;// } \n// else {\nvar PackageDataMap=constructOptionList(response[3].data.TestPackage||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");var TestSectionDataMap=constructOptionList(response[4].data.TestSection||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,true);TestSectionData=TestSectionDataMap.get(\"OptionList\");// if (PackageData.length === 0) {\n//    dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \n//} \n// }\nvar selectedRecord1=newcomboData.selectedRecord;SubSamplewithoutCombocomponent.map(function(componentrow){if(componentrow.inputtype===\"date\"){if(componentrow.loadcurrentdate){selectedRecord1[componentrow.label]=componentrow.loadcurrentdate?rearrangeDateFormat(userinfo,response[1].data):\"\";selectedRecord1[componentrow.label+\"value\"]=selectedRecord1[componentrow.label];}else if(componentrow.nperiodcode){selectedRecord1[componentrow.label+\"value\"]=response[2].data[componentrow.label]?new Date(response[2].data[componentrow.label][\"datevalue\"]):null;if(componentrow.loadselecteddate){selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?new Date(response[2].data[componentrow.label][\"datevalue\"]):null;}//    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n//    new Date(response[2].data[componentrow.label]):null;\n}else{selectedRecord1[componentrow.label+\"value\"]=new Date();}if(componentrow.hidebeforedate){selectedRecord1[componentrow.label+\"min\"]=selectedRecord1[componentrow.label+\"value\"];}if(componentrow.hideafterdate){selectedRecord1[componentrow.label+\"max\"]=selectedRecord1[componentrow.label+\"value\"];}}else if(componentrow.inputtype===\"radio\"||componentrow.inputtype===\"checkbox\"||componentrow.inputtype===\"predefineddropdown\"){if(componentrow['radiodefaultvalue']){if(componentrow.inputtype===\"checkbox\"){var val='';componentrow.radiodefaultvalue&&componentrow.radiodefaultvalue.length>0&&componentrow.radiodefaultvalue.map(function(x,i){val=val+(i===componentrow.radiodefaultvalue.length-1?x.label:x.label+',');});selectedRecord1[componentrow.label]=val;}else if(componentrow.inputtype===\"predefineddropdown\"){selectedRecord1[componentrow.label]=componentrow.radiodefaultvalue?componentrow.radiodefaultvalue:\"\";}else{selectedRecord1[componentrow.label]=componentrow.radiodefaultvalue?componentrow.radiodefaultvalue.label:\"\";}}else{if(componentrow.inputtype===\"radio\"){selectedRecord1[componentrow.label]=componentrow.radioOptions?componentrow.radioOptions.tags[0].text:\"\";}}}});// if (masterData.RealRegSubTypeValue.nregsubtypecode === 6) {\n//     let portalOrder = selectedRecord && selectedRecord['Portal Order ID'] || {}\n//     let containerType = SubSamplecomboData['ContainerType'] || []\n//     let containerList = []\n//     const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\n//     containerType.map(x => {\n//         if (x.item.jsondata.nportalordercode === nportalordercode) {\n//             containerList.push(x)\n//         }\n//     })\n//     SubSamplecomboData['Container Type'] = containerList\n// }\ndispatch({type:DEFAULT_RETURN,payload:{ChildscreenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),screenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),showSaveContinue:true,openChildModal:false,childoperation:\"create\",parentPopUpSize:\"lg\",loading:false,lstComponent:[],openPortal:true,openModal:false,operation:\"create\",loadSubSample:true,selectComponent:selectedRecord1,saveContinueData:_objectSpread({},selectedRecord1),TestCombined:TestCombined,TestPackage:PackageData,TestSection:TestSectionData,selectSection:[]}});});}else{var _urlArray=[];var _ComponentTestBySpec=rsapi.post(\"/registration/getComponentBySpec\",_objectSpread(_objectSpread({},Map),{},{specBasedComponent:specBasedComponent}));_urlArray[0]=_ComponentTestBySpec;var _currentDate=rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:userinfo});_urlArray[1]=_currentDate;var _dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:SubSamplewithoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userinfo});_urlArray[2]=_dateService;Axios.all(_urlArray).then(function(response){var selectedRecord1=newcomboData.selectedRecord;// const lstComponent =  response.data.lstComponent\nvar lstComponent=response[0].data.lstComponent;//filterRecordBasedOnTwoArrays(response.data.lstComponent, Component, \"ncomponentcode\")\nvar lstComponentMap=constructOptionList(lstComponent||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);lstComponent=lstComponentMap.get(\"OptionList\");if(lstComponent.length>0){selectedRecord1['ncomponentcode']=_objectSpread({},lstComponent[0]);selectedRecord1[\"Sample Name\"]=selectedRecord1['ncomponentcode'].label;selectedRecord1[\"nspecsampletypecode\"]=selectedRecord1['ncomponentcode'].item.nspecsampletypecode;selectedRecord1[\"nneedsubsample\"]=Map.nneedsubsample;}SubSamplewithoutCombocomponent.map(function(componentrow){if(componentrow.inputtype===\"date\"){if(componentrow.loadcurrentdate){selectedRecord1[componentrow.label]=componentrow.loadcurrentdate?rearrangeDateFormat(userinfo,response[1].data):\"\";selectedRecord1[componentrow.label+\"value\"]=selectedRecord1[componentrow.label];}else if(componentrow.nperiodcode){selectedRecord1[componentrow.label+\"value\"]=response[2].data[componentrow.label]?new Date(response[2].data[componentrow.label][\"datevalue\"]):null;if(componentrow.loadselecteddate){selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?new Date(response[2].data[componentrow.label][\"datevalue\"]):null;}//    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n//    new Date(response[2].data[componentrow.label]):null;\n}else{selectedRecord1[componentrow.label+\"value\"]=new Date();}if(componentrow.hidebeforedate){selectedRecord1[componentrow.label+\"min\"]=selectedRecord1[componentrow.label+\"value\"];}if(componentrow.hideafterdate){selectedRecord1[componentrow.label+\"max\"]=selectedRecord1[componentrow.label+\"value\"];}}else if(componentrow.inputtype===\"radio\"||componentrow.inputtype===\"checkbox\"||componentrow.inputtype===\"predefineddropdown\"){if(componentrow['radiodefaultvalue']){if(componentrow.inputtype===\"checkbox\"){var val='';componentrow.radiodefaultvalue&&componentrow.radiodefaultvalue.length>0&&componentrow.radiodefaultvalue.map(function(x,i){val=val+(i===componentrow.radiodefaultvalue.length-1?x.label:x.label+',');});selectedRecord1[componentrow.label]=val;}else if(componentrow.inputtype===\"predefineddropdown\"){selectedRecord1[componentrow.label]=componentrow.radiodefaultvalue?componentrow.radiodefaultvalue:\"\";}else{selectedRecord1[componentrow.label]=componentrow.radiodefaultvalue?componentrow.radiodefaultvalue.label:\"\";}}else{if(componentrow.inputtype===\"radio\"){selectedRecord1[componentrow.label]=componentrow.radioOptions?componentrow.radioOptions.tags[0].text:\"\";}}}});var inputParam={ChildscreenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),screenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),showSaveContinue:true,openChildModal:false,childoperation:\"create\",parentPopUpSize:\"lg\",loading:false,lstComponent:lstComponent,openPortal:true,openModal:false,operation:\"create\",loadSubSample:true,selectComponent:selectedRecord1,saveContinueData:_objectSpread({},selectedRecord1),TestCombined:[],selectedTestData:[],selectPackage:[],selectSection:[]};if(specBasedComponent){dispatch(componentTest(selectedRecord1,false,specBasedComponent,Component,specBasedTestPackage,conditionalTestPackage,inputParam));}else{dispatch({type:DEFAULT_RETURN,payload:_objectSpread({},inputParam)});}});}};}}export function componentTest(selectedobject,Reg,specBasedComponent,Component,specBasedTestPackage,conditionalTestPackage,inputParam){return function(dispatch){dispatch(initRequest(true));var urlArray=[];Component=Component?Component:[];var TestGet=rsapi.post(\"/registration/getTestfromDB\",{nspecsampletypecode:selectedobject.nspecsampletypecode,slno:Component?Object.keys(Component).length+1:1,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:conditionalTestPackage,nneedsubsample:selectedobject.nneedsubsample});urlArray[0]=TestGet;var TestPackageGet=rsapi.post(\"/registration/getTestfromTestPackage\",{nspecsampletypecode:selectedobject.nspecsampletypecode,slno:Component?Object.keys(Component).length+1:1,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:conditionalTestPackage});urlArray[1]=TestPackageGet;var TestSectionGet=rsapi.post(\"/registration/getTestfromSection\",{nspecsampletypecode:selectedobject.nspecsampletypecode,slno:Component?Object.keys(Component).length+1:1,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:conditionalTestPackage});urlArray[2]=TestSectionGet;Axios.all(urlArray).then(function(response){var PackageData=[];var TestData=[];var TestSectionData=[];// if (specBasedTestPackage) {\nvar PackageDataMap=constructOptionList(response[1].data.TestPackage||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");var testSectionDataMap=constructOptionList(response[2].data.TestSection||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,true);TestSectionData=testSectionDataMap.get(\"OptionList\");// if (PackageData.length === 0) {\n//     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \n// } \n//   }\n//    else {\nTestData=response[0].data;//  }\n//let Test = [];\n// Test[selectedobject.slno] = TestData;\nvar Map={};if(Reg){Map[\"selectedRecord\"]=selectedobject;}else{Map[\"selectComponent\"]=selectedobject;}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread(_objectSpread({},inputParam),{},{TestCombined:TestData,AllTest:TestData,TestPackage:PackageData},Map),{},{loading:false,selectedTestData:[],selectPackage:[],TestSection:TestSectionData,selectSection:[],AllSection:TestSectionData})});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}// export function testPackageTest(selectedobject, Reg, specBasedComponent, Component,specBasedTestPackage,conditionalTestPackage,selectComponent,objComponent,LoginProps,selectPackage,subSampleBased,selectedSpec,nneedsubsample) {\n// export function testPackageTest(selectedobject, Reg, specBasedComponent, Component, selectComponent, objComponent, LoginProps, selectPackage, subSampleBased, selectedSpec, nneedsubsample, action) {\n//     return function (dispatch) {\n//         dispatch(initRequest(true));\n//         Component = Component ? Component : []\n//         // rsapi.post(\"/registration/getTestBasesdTestPackage\", {\n//         //     nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\n//         //     slno:subSampleBased?Component ? Object.keys(Component).length + 1 : 1:selectComponent.slno,\n//         //     specBasedComponent: specBasedComponent,\n//         //     ntestpackagecode: selectPackage.ntestpackagecode.value,\n//         //     nallottedspeccode:selectedSpec!==undefined?selectedSpec.value:selectedobject.nallottedspeccode\n//         // })\n//         rsapi.post(\"/registration/getTestBasesdTestPackage\", {\n//             // nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\n//             nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\n//             //     slno: subSampleBased ? Component ? Object.keys(Component).length + 1 : 1 : selectComponent.slno,\n//             specBasedComponent: specBasedComponent,\n//             ntestpackagecode: selectPackage.ntestpackagecode.value,\n//             nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\n//         })\n//             .then(response => {\n//                 const Map = {}\n//                 let TestData = response.data;\n//                 let Test = (action !== \"AddSubSample\") ? (LoginProps.Test || []) : [];\n//                 let componentTest = [];\n//                 if (subSampleBased) {\n//                     componentTest = Test[Component ? Object.keys(Component).length + 1 : 1] ? Test[Component ? Object.keys(Component).length + 1 : 1] : [];\n//                 } else {\n//                     componentTest = objComponent && Test[objComponent.slno] ? Test[objComponent.slno] : [];\n//                 }\n//                 const availableTest = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\n//                 const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\n//                 delete selectedobject.ntestgrouptestcode;\n//                 if (Reg) {\n//                     Map[\"selectedRecord\"] = selectedobject\n//                 } else {\n//                     Map[\"selectPackage\"] = selectPackage\n//                 }\n//                 dispatch({\n//                     type: DEFAULT_RETURN,\n//                     payload: {\n//                         availableTest, TestCombined, ...Map, loading: false, selectedTestData: [], AllTest: LoginProps.TestCombined\n//                         //, selectPackage: []\n//                         // TestCombined,loadTest: true, openChildModal: false,\n//                         // ChildscreenName: \"Test\",\n//                         //  screenName: \"Test\",\n//                         // operation: \"create\",\n//                         //  childoperation: \"create\",\n//                         //   parentPopUpSize: \"lg\", loading: false\n//                     }\n//                 });\n//             })\n//             .catch(error => {\n//                 toast.error(error.message);\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\n//             })\n//     }\n// }\nexport function testPackageTest(selectedobject,Reg,specBasedComponent,Component,selectComponent,objComponent,LoginProps,selectPackage,selectSection,subSampleBased,selectedSpec,nneedsubsample,action){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var testpackage;Component=Component?Component:[];var testsection=rsapi.post(\"/registration/getTestSectionBasesdTestPackage\",{nspecsampletypecode:selectComponent&&selectComponent.nspecsampletypecode?selectComponent.nspecsampletypecode:selectedobject.nspecsampletypecode,specBasedComponent:specBasedComponent,ntestpackagecode:selectPackage.ntestpackagecode.value,nallottedspeccode:selectedSpec&&selectedSpec.value!==undefined?selectedSpec.value:selectedobject.nallottedspeccode});//ALPD-3404\nurlArray[0]=testsection;testpackage=rsapi.post(\"/registration/getTestBasesdTestPackage\",{nspecsampletypecode:selectComponent&&selectComponent.nspecsampletypecode?selectComponent.nspecsampletypecode:selectedobject.nspecsampletypecode,specBasedComponent:specBasedComponent,ntestpackagecode:selectPackage.ntestpackagecode.value,nallottedspeccode:selectedSpec&&selectedSpec.value!==undefined?selectedSpec.value:selectedobject.nallottedspeccode});urlArray[1]=testpackage;Axios.all(urlArray).then(function(response){var Map={};var TestSectionData=[];var TestData=response[1].data;var Test=action!==\"AddSubSample\"?LoginProps.Test||[]:[];var componentTest=[];if(subSampleBased){componentTest=Test[Component?Object.keys(Component).length+1:1]?Test[Component?Object.keys(Component).length+1:1]:[];}else{componentTest=objComponent&&Test[objComponent.slno]?Test[objComponent.slno]:[];}var availableTest=filterRecordBasedOnTwoArrays(TestData,componentTest,\"ntestcode\");var TestCombined=filterRecordBasedOnTwoArrays(TestData,componentTest,\"ntestcode\");var testSectionDataMap=constructOptionList(response[0].data.TestSectionBasedonTestPackage||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,true);TestSectionData=testSectionDataMap.get(\"OptionList\");delete selectedobject.ntestgrouptestcode;delete selectedobject.nsectioncode;if(Reg){Map[\"selectedRecord\"]=selectedobject;}else{Map[\"selectPackage\"]=selectPackage;}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({availableTest:availableTest,TestCombined:TestCombined},Map),{},{loading:false,selectedTestData:[],AllTest:LoginProps.AllTest,AllSection:LoginProps.AllSection,TestSection:TestSectionData,selectSection:[],TestPakageTest:TestCombined//, selectPackage: []\n// TestCombined,loadTest: true, openChildModal: false,\n// ChildscreenName: \"Test\",\n//  screenName: \"Test\",\n// operation: \"create\",\n//  childoperation: \"create\",\n//   parentPopUpSize: \"lg\", loading: false\n})});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}//ALPD-3404\nexport function testSectionTest(selectedobject,Reg,specBasedComponent,Component,selectComponent,objComponent,LoginProps,selectPackage,selectSection,subSampleBased,selectedSpec,nneedsubsample,action){return function(dispatch){dispatch(initRequest(true));Component=Component?Component:[];rsapi.post(\"/registration/getTestBasedTestSection\",{nspecsampletypecode:selectComponent&&selectComponent.nspecsampletypecode?selectComponent.nspecsampletypecode:selectedobject.nspecsampletypecode,specBasedComponent:specBasedComponent,ntestpackagecode:selectPackage.ntestpackagecode&&selectPackage.ntestpackagecode.value||-1,nsectioncode:selectSection.nsectioncode.value,nallottedspeccode:selectedSpec&&selectedSpec.value!==undefined?selectedSpec.value:selectedobject.nallottedspeccode}).then(function(response){var Map={};var TestData=response.data;var Test=action!==\"AddSubSample\"?LoginProps.Test||[]:[];var componentTest=[];if(subSampleBased){componentTest=Test[Component?Object.keys(Component).length+1:1]?Test[Component?Object.keys(Component).length+1:1]:[];}else{componentTest=objComponent&&Test[objComponent.slno]?Test[objComponent.slno]:[];}var availableTest=filterRecordBasedOnTwoArrays(TestData,componentTest,\"ntestcode\");var TestCombined=filterRecordBasedOnTwoArrays(TestData,componentTest,\"ntestcode\");delete selectedobject.ntestgrouptestcode;if(Reg){Map[\"selectedRecord\"]=selectedobject;}else{Map[\"selectPackage\"]=selectPackage;}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({availableTest:availableTest,TestCombined:TestCombined},Map),{},{loading:false,selectedTestData:[],AllTest:LoginProps.AllTest})});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function addSubSampleSaveContinue(Map1,Map,specBasedComponent,Component,selectedTestData,lstComponent,LoginProps){//  const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\n//     selectComponent, childColumnList, SubSamplewithoutCombocomponent)\nreturn function(dispatch){if(!specBasedComponent){// rsapi.post(\"/registration/getTestfromDB\", {\n//     nallottedspeccode: Map[\"nallottedspeccode\"],\n//     nspecsampletypecode: Map[\"nspecsampletypecode\"],\n//     slno: Map1.Component ? Object.keys(Map1.Component).length + 1 : 1,\n//     specBasedComponent: specBasedComponent, nneedsubsample: Map[\"nneedsubsample\"]\n// }).then(response => {\n//     let TestCombined = Map1.TestCombined;//response.data\n//     // let selectedTestPackageData = selectedTestPackageData && selectedTestPackageData.length > 0 ? selectedTestData : []\n//     let selectedTestPackageData = selectedTestData && selectedTestData.length > 0 ? selectedTestData : []\n//     const selectedTestPackageData1 = TestCombined.filter(function (x) {\n//         return selectedTestPackageData.some(function (y) {\n//             return x[\"ntestpackagetestcode\"] === y.value\n//         })\n//     });\n//     selectedTestData = selectedTestData && selectedTestData.length > 0 ? selectedTestPackageData : []\n//     const selectedTestData1 = TestCombined.filter(function (x) {\n//         return selectedTestData.some(function (y) {\n//             return x[\"ntestgrouptestcode\"] === y.value\n//         })\n//     });\n//     selectedTestData = constructOptionList(selectedTestData1, \"ntestgrouptestcode\", \"stestsynonym\")\n//     selectedTestData[\"ntestgrouptestcode\"] = selectedTestData.get(\"OptionList\")\n//     selectedTestPackageData = constructOptionList(selectedTestPackageData1, \"ntestpackagetestcode\", \"stestpackagename\")\n//     selectedTestPackageData[\"ntestpackagetestcode\"] = selectedTestPackageData.get(\"OptionList\")\n//     // Map1.selectComponent = {};\n//     Map1.selectComponent = { ...Map1.saveContinueData };\n//     // Map1.selectComponent[\"ncomponentcode\"] = {};\n//     dispatch({\n//         type: DEFAULT_RETURN,\n//         payload: {\n//             ...Map1,\n//             loading: false,\n//             TestCombined,\n//             selectPackage: [],\n//             //TestPackage\n//             //selectedTestData,\n//             //selectedTestPackageData,\n//             selectedTestData: [],\n//             selectedTestPackageData: [],\n//             masterStatus: intl.formatMessage({ id: \"IDS_SAVESUCCESSFULLY\" })\n//         }\n//     });\n// })\nMap1.selectComponent=_objectSpread({},Map1.saveContinueData);//ALPD-3404\nvar TestCombined=LoginProps.AllTest||Map1.TestCombined;delete Map1.TestCombined;dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},Map1),{},{loading:false,TestCombined:TestCombined,selectPackage:[],selectSection:[],//TestPackage\n//selectedTestData,\n//selectedTestPackageData,\nselectedTestData:[],selectedTestPackageData:[],masterStatus:intl.formatMessage({id:\"IDS_SAVESUCCESSFULLY\"})})});}else{// lstComponent = lstComponent.filter(x => x.item.nspecsampletypecode !== Map1.selectComponent[\"nspecsampletypecode\"])\n// Map1.selectComponent = {};\n// Map1.selectComponent[\"ncomponentcode\"] = {};           \n// Map1.selectComponent[\"Sample Name\"] = \"\";\nMap1.selectComponent=_objectSpread({},Map1.saveContinueData);//, \"ncomponentcode\": {} };\nvar inputParam=_objectSpread(_objectSpread({},Map1),{},{loading:false,TestCombined:[],selectPackage:[],TestPackage:[],selectedTestData:[],selectedTestPackageData:[],lstComponent:lstComponent,masterStatus:intl.formatMessage({id:\"IDS_SAVESUCCESSFULLY\"})});dispatch(componentTest(Map1.selectComponent,false,specBasedComponent,Component,Map1.specBasedTestPackage,Map1.specBasedTestPackage?true:false,inputParam));}};}export function editSubSample(Map,component,userInfo,specBasedComponent,SubSamplecomboData,selectedRecord){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var Componnet={};if(specBasedComponent){Componnet=rsapi.post(\"/registration/getComponentBySpec\",_objectSpread({},Map));}urlArray=[Componnet];Axios.all(urlArray).then(function(response){var comp=[];if(specBasedComponent){comp=response[0].data.lstComponent;}var lstComponentMap=constructOptionList(comp||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);var lstComponent=lstComponentMap.get(\"OptionList\");if(Map.nregsubtypecode===6){var portalOrder=component['Container Type']||{};var containerType=SubSamplecomboData['ContainerType']||[];var containerList=[];var nportalordercode=portalOrder&&portalOrder.value?portalOrder.value:-1;containerType.map(function(x){if(x.item.jsondata.nportalordercode===nportalordercode){containerList.push(x);}});SubSamplecomboData['Container Type']=containerList;}dispatch({type:DEFAULT_RETURN,payload:{loadSubSample:true,childoperation:\"update\",ChildscreenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),openChildModal:false,selectComponent:component,parentPopUpSize:\"lg\",loading:false,lstComponent:lstComponent,SubSamplecomboData:SubSamplecomboData}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function insertRegistration(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));var requestUrl='';if(inputParam.isFileupload){requestUrl=rsapi.post(\"/registration/createRegistrationWithFile\",inputParam.formData);}else{requestUrl=rsapi.post(\"/registration/createRegistration\",inputParam.inputData);}return requestUrl//  rsapi.post(\"/registration/createRegistration\", inputParam.formData)\n.then(function(response){if(response.data.rtn===\"Success\"){var _objectSpread6;// if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n//     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n// }\nvar RegistrationGetSample=updatedObjectWithNewElement(response.data[\"selectedSample\"],masterData.RegistrationGetSample,'Sample');var selectedSample=response.data[\"selectedSample\"];var RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];var RegistrationGetTest=response.data[\"RegistrationGetTest\"];var selectedSubSample=RegistrationGetSubSample;RegistrationGetTest=sortData(RegistrationGetTest,\"npreregno\",\"desc\");var selectedTest=RegistrationGetTest.length>0?[RegistrationGetTest[0]]:[];var regSampleExisted=inputParam.inputData&&inputParam.inputData.orderTypeValue===2?true:false;if(inputParam.inputData.nneedsubsample){RegistrationGetSubSample=sortData(response.data[\"RegistrationGetSubSample\"],'npreregno','desc');selectedSubSample=RegistrationGetSubSample.length>0?[RegistrationGetSubSample[0]]:[];RegistrationGetTest=RegistrationGetTest.filter(function(x){return x.ntransactionsamplecode===selectedSubSample[0].ntransactionsamplecode;});selectedTest=RegistrationGetTest.length>0?response.data[\"selectedTest\"]:[];}// RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\nif(inputParam.multipleselectionFlag){selectedSample=updatedObjectWithNewElement(response.data[\"selectedSample\"],masterData.selectedSample);updatedObjectWithNewElement(response.data[\"selectedSubSample\"],masterData.RegistrationGetSubSample);updatedObjectWithNewElement(response.data[\"selectedTest\"],masterData.RegistrationGetTest);RegistrationGetSubSample=masterData.RegistrationGetSubSample;RegistrationGetTest=masterData.RegistrationGetTest;}masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{selectedSample:selectedSample,selectedSubSample:selectedSubSample,selectedTest:selectedTest,RegistrationGetSubSample:RegistrationGetSubSample,RegistrationGetTest:RegistrationGetTest,RegistrationGetSample:RegistrationGetSample});if(masterData[\"kendoFilterList\"]!==undefined){masterData[\"kendoFilterList\"]=undefined;}var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},(_objectSpread6={openModal:false,loadEsign:false,showConfirmAlert:false,selectedRecord:undefined,loading:false,loadPreregister:false,showSample:undefined,openPortal:false,selectedSpec:{},selectComponent:{},SelectedTest:{},selectedComponent:{},Component:[]},_defineProperty(_objectSpread6,\"selectedRecord\",{}),_defineProperty(_objectSpread6,\"SelectedTest\",[]),_defineProperty(_objectSpread6,\"Test\",[]),_defineProperty(_objectSpread6,\"selectedComponent\",{}),_defineProperty(_objectSpread6,\"subSampleDataGridList\",[]),_defineProperty(_objectSpread6,\"preregConfirmMessage\",undefined),_defineProperty(_objectSpread6,\"regSampleExisted\",regSampleExisted),_defineProperty(_objectSpread6,\"loadImportFileData\",false),_defineProperty(_objectSpread6,\"loadImportSampleCountData\",false),_defineProperty(_objectSpread6,\"skip\",0),_defineProperty(_objectSpread6,\"subsampleskip\",0),_defineProperty(_objectSpread6,\"testskip\",0),_defineProperty(_objectSpread6,\"isDynamicViewSlideOut\",false),_objectSpread6));inputParam.postParamList[0]['clearFilter']='yes';inputParam.postParamList[1]['clearFilter']='yes';inputParam.postParamList[2]['clearFilter']='yes';dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}else{toast.info(response.data.rtn);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false,preregConfirmMessage:undefined}});}}).catch(function(error){console.log(error);if(error.response.status===500){dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false,preregConfirmMessage:undefined}});toast.error(error.message);}else{if(error.response.data.NeedConfirmAlert){dispatch({type:DEFAULT_RETURN,payload:{showConfirmAlert:true,preregConfirmMessage:error.response.data.rtn,preregConfirmParam:{inputParam:inputParam,masterData:masterData},loading:false,showSample:undefined}});}else{toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false,preregConfirmMessage:undefined}});}}});};}export function insertRegistrationScheduler(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/schedulerinsertRegistration\",inputParam.inputData).then(function(response){var _objectSpread7;// if (response.data.rtn === \"Success\") {\n//     let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\n//     let selectedSample = response.data[\"selectedSample\"];\n//     let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n//     let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n//     let selectedSubSample = RegistrationGetSubSample;\n//     RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\n//     let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\n//     if (inputParam.inputData.nneedsubsample) {\n//         RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\n//         selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\n//         RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\n//         selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\n//     }\n//     // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\n//     if (inputParam.multipleselectionFlag) {\n//         selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\n//         updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\n//         updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\n//         RegistrationGetSubSample = masterData.RegistrationGetSubSample;\n//         RegistrationGetTest = masterDat..a.RegistrationGetTest;\n//     }\n//     masterData = {\n//         ...masterData, ...response.data,\n//         selectedSample, selectedSubSample, selectedTest,\n//         RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\n//     }\nvar respObject=_objectSpread(_objectSpread({masterData:_objectSpread(_objectSpread({},masterData),{},{SchedulerTransaction:response[\"data\"].SchedulerTransaction})},inputParam.inputData),{},(_objectSpread7={openModal:false,loadEsign:false,showConfirmAlert:false,selectedRecord:undefined,loading:false,loadPreregister:false,showSample:undefined,openPortal:false,selectedSpec:{},selectComponent:{},SelectedTest:{},selectedComponent:{},Component:[]},_defineProperty(_objectSpread7,\"selectedRecord\",{}),_defineProperty(_objectSpread7,\"SelectedTest\",[]),_defineProperty(_objectSpread7,\"Test\",[]),_defineProperty(_objectSpread7,\"selectedComponent\",{}),_defineProperty(_objectSpread7,\"subSampleDataGridList\",[]),_objectSpread7));// inputParam.postParamList[0]['clearFilter'] = 'yes'\n// dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\ndispatch({type:DEFAULT_RETURN,payload:_objectSpread({},respObject)});// } else {\n//     toast.info(response.data.rtn);\n//     dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\n// }\n}).catch(function(error){// console.log(error);\ntoast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false}});});};}export function getRegistrationSample(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"registration/getRegistrationByFilterSubmit\",_objectSpread({},inputData.inputData)).then(function(response){var masterData=_objectSpread(_objectSpread({},inputData.masterData),response.data);if(inputData.searchSampleRef!==undefined&&inputData.searchSampleRef.current!==null){inputData.searchSampleRef.current.value=\"\";masterData['searchedSample']=undefined;}if(inputData.searchSubSampleRef!==undefined&&inputData.searchSubSampleRef.current!==null){inputData.searchSubSampleRef.current.value=\"\";masterData['searchedSubSample']=undefined;}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";masterData['searchedTest']=undefined;}var respObject={};if(inputData.selectedFilter){respObject={selectedFilter:_objectSpread({},inputData.selectedFilter)};}sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({masterData:masterData,loading:false,showFilter:false,skip:0,testskip:0,take:undefined,testtake:undefined,subsampleskip:0,subsampletake:undefined,showSample:undefined},respObject),{},{activeSampleTab:inputData.inputData.activeSampleTab,regSampleExisted:false})});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});};}export function getRegistrationsubSampleDetail(inputData,isServiceRequired,isParentValue){return function(dispatch){var inputParamData={nsampletypecode:inputData.nsampletypecode,nregtypecode:inputData.nregtypecode,nregsubtypecode:inputData.nregsubtypecode,npreregno:inputData.npreregno,ntransactionstatus:inputData.ntransactionstatus,napprovalconfigcode:inputData.napprovalconfigcode,activeTestTab:inputData.activeTestTab,activeSampleTab:inputData.activeTestTab,activeSubSampleTab:inputData.activeTestTab,userinfo:inputData.userinfo,ndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,nneedsubsample:inputData.nneedsubsample,// ntype: inputData.nneedsubsample === true ? inputData.checkBoxOperation === 7 ? 4 : undefined:2, //ALPD-497\nntype:inputData.nneedsubsample===true?inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTALL?checkBoxOperation.SINGLEDESELECT:undefined:checkBoxOperation.DESELECT,//ALPD-497\ncheckBoxOperation:inputData.nneedsubsample===true?inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTSTATUS?checkBoxOperation.SINGLESELECT:inputData.checkBoxOperation:inputData.checkBoxOperation,OrderCodeData:inputData.selectedSample?inputData.selectedSample.length>0&&inputData.selectedSample.map(function(item){return item.hasOwnProperty(\"OrderCodeData\")?item.OrderCodeData:-1;}).join(\",\"):null,selectedPreregno:inputData.selectedSample&&inputData.selectedSample.length>0?inputData.selectedSample.map(function(item){return item.npreregno;}).join(\",\"):null,selectedTransactionsamplecode:inputData.selectedSample&&inputData.selectedSample.length>1&&inputData.masterData.selectedSubSample?inputData.masterData.selectedSubSample.map(function(item){return item.ntransactionsamplecode;}).join(\",\"):null,noutsourcerequired:inputData.masterData&&inputData.masterData.RealSampleTypeValue?inputData.masterData.RealSampleTypeValue.noutsourcerequired:transactionStatus.NA};var activeName=\"\";var dataStateName=\"\";var subSample=inputData.nneedsubsample;dispatch(initRequest(true));if(isServiceRequired){rsapi.post(\"registration/getRegistrationSubSample\",inputParamData).then(function(response){sortData(response.data,\"descending\",\"npreregno\");// if(isParentValue){\nresponse.data['RegistrationGetSubSample']=sortDataByParent(response.data['RegistrationGetSubSample'],inputData.sample,\"npreregno\");//response.data['RegistrationGetTest']= sortDataByParent(response.data['RegistrationGetTest'],response.data['RegistrationGetSubSample'], \"ntransactionsamplecode\");\n//  }\nsortData(response.data['RegistrationAttachment']);sortData(response.data['RegistrationComment']);var masterData={};var skipInfo={};var oldSelectedTest=inputData.masterData.selectedTest||[];var externalOrderAttachmentList=response.data&&response.data.ExternalOrderAttachmentList;var outsourceDetailsList=response.data&&response.data.OutsourceDetailsList;if(subSample){var oldSelectedSubSample=inputData.masterData.selectedSubSample;fillRecordBasedOnCheckBoxSelection(inputData.masterData,response.data,inputData.childTabsKey,inputData.checkBoxOperation,\"npreregno\",inputData.removeElementFromArray);masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:inputData.selectedSample,selectedPreregno:inputData.npreregno,selectedSubSample:inputData.masterData.RegistrationGetSubSample.length>0?[inputData.masterData.RegistrationGetSubSample[0]]:[],activeTabIndex:inputData.activeTabIndex});var RegistrationTestComment=[];var RegistrationTestAttachment=[];var RegistrationParameter=[];var RegistrationComment=[];//if (inputData.checkBoxOperation === 1 || inputData.checkBoxOperation === 7) {  \n//if (inputData.checkBoxOperation === 1) {\nif(inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){var wholeSubSampleList=masterData.RegistrationGetSubSample.map(function(b){return b.ntransactionsamplecode;});// START ALPD-3625 VISHAKH\n// oldSelectedSubSample.forEach((subsample, index) => {\n//     if (!wholeSubSampleList.includes(subsample.ntransactionsamplecode)) {\n//         oldSelectedSubSample.splice(index, 1)\n//     }\n// })\noldSelectedSubSample=oldSelectedSubSample.filter(function(item){return wholeSubSampleList.includes(item.ntransactionsamplecode);});// END ALPD-3625 VISHAKH\nif(oldSelectedSubSample.length>0){masterData=_objectSpread(_objectSpread({},masterData),{},{selectedSubSample:oldSelectedSubSample});}var selectedTest=getSameRecordFromTwoArrays(oldSelectedTest,masterData.selectedSubSample,'npreregno');masterData=_objectSpread(_objectSpread({},masterData),{},{selectedTest:selectedTest});}//  if (inputData.checkBoxOperation === 7) {\nif(inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTALL){// masterData = {\n//     ...masterData,\n//     APSelectedTest:responseData.APSelectedTest,\n//     AP_TEST:responseData.AP_TEST,\n//     ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\n// }\nswitch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":var ResponseData=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var RegistrationTestComment1=[];if(inputData.masterData.RegistrationTestComment!==undefined){RegistrationTestComment1=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(ResponseData));}var ntransactiontestcode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(RegistrationTestComment1,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":{var _ResponseData=response.data.RegistrationTestAttachment?response.data.RegistrationTestAttachment:[];var RegistrationTestAttachment1=[];if(inputData.masterData.RegistrationTestAttachment!==undefined){RegistrationTestAttachment1=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(_ResponseData));}var _ntransactiontestcode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1,_ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":var resultResponseData=response.data.RegistrationParameter?response.data.RegistrationParameter:[];var RegistrationParameter1=[].concat(_toConsumableArray(inputData.masterData.RegistrationParameter),_toConsumableArray(resultResponseData));var ntransactiontestcode1=masterData.selectedTest.length>0?masterData.selectedTest[0].ntransactiontestcode:-1;RegistrationParameter=getRecordBasedOnPrimaryKeyName(RegistrationParameter1,ntransactiontestcode1,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;default:var ResponseData1=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var RegistrationTestComment2=[];if(inputData.masterData.RegistrationTestComment!==undefined){RegistrationTestComment2=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(ResponseData1));}var ntransactionTestCode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(RegistrationTestComment2,ntransactionTestCode,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}masterData['RegistrationTestComment']=RegistrationTestComment;masterData['RegistrationTestAttachment']=RegistrationTestAttachment;masterData[\"RegistrationParameter\"]=RegistrationParameter;masterData[\"RegistrationComment\"]=RegistrationComment;}//if (inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 5) {\nif(inputData.checkBoxOperation===checkBoxOperation.SINGLESELECT||inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTSTATUS){masterData=_objectSpread(_objectSpread({},masterData),{},{selectedTest:masterData.RegistrationGetTest.length>0?[masterData.RegistrationGetTest[0]]:[]});switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":var _ResponseData2=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment=_toConsumableArray(_ResponseData2);}var _ntransactiontestcode2=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment,_ntransactiontestcode2,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":{var _ResponseData4=response.data.RegistrationTestAttachment?response.data.RegistrationTestAttachment:[];var _RegistrationTestAttachment=[];if(inputData.masterData.RegistrationTestAttachment!==undefined){_RegistrationTestAttachment=_toConsumableArray(_ResponseData4);}var _ntransactiontestcode4=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(_RegistrationTestAttachment,_ntransactiontestcode4,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":var _resultResponseData=response.data.RegistrationParameter?response.data.RegistrationParameter:[];var _RegistrationParameter=_toConsumableArray(_resultResponseData);var _ntransactiontestcode3=masterData.selectedTest.length>0?masterData.selectedTest[0].ntransactiontestcode:-1;RegistrationParameter=getRecordBasedOnPrimaryKeyName(_RegistrationParameter,_ntransactiontestcode3,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_SAMPLECOMMENTS\":RegistrationComment=response.data.RegistrationComment?_toConsumableArray(response.data.RegistrationComment):[];activeName=\"RegistrationComment\";dataStateName=\"sampleCommentsDataState\";break;default:var _ResponseData3=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment2=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment2=_toConsumableArray(_ResponseData3);}var _ntransactionTestCode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment2,_ntransactionTestCode,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}masterData['RegistrationTestComment']=RegistrationTestComment;masterData['RegistrationTestAttachment']=RegistrationTestAttachment;masterData[\"RegistrationParameter\"]=RegistrationParameter;masterData[\"RegistrationComment\"]=RegistrationComment;}masterData['ExternalOrderAttachmentList']=externalOrderAttachmentList;masterData['OutsourceDetailsList']=outsourceDetailsList;var _inputData=inputData,testskip=_inputData.testskip,testtake=_inputData.testtake,subsampleskip=_inputData.subsampleskip,subsampletake=_inputData.subsampletake;// let bool = false;\n// Commented bool value because no need to check bool condition to update skipInfo value.\n// if (inputData.masterData.RegistrationGetSubSample.length < inputData.subsampleskip) {\ntestskip=0;subsampleskip=0;// bool = true\n// }\n// if (bool) {\nskipInfo={testskip:testskip,testtake:testtake,subsampleskip:subsampleskip,subsampletake:subsampletake};// }\n}else{//let oldSelectedTest = inputData.masterData.selectedTest\n//  let oldSelectedSubSample = inputData.masterData.selectedSubSample\nfillRecordBasedOnCheckBoxSelection(inputData.masterData,response.data,inputData.childTabsKey,inputData.checkBoxOperation,\"npreregno\",inputData.removeElementFromArray);masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:inputData.selectedSample,selectedPreregno:inputData.npreregno,selectedTest:inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[],selectedSubSample:inputData.masterData.RegistrationGetSubSample});var _RegistrationTestComment3=[];var _RegistrationParameter2=[];var _RegistrationTestAttachment2=[];var _RegistrationComment=[];//if (inputData.checkBoxOperation === 7 || inputData.checkBoxOperation === 1) {\nif(inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTALL||inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){var wholeTestList=masterData.RegistrationGetTest.map(function(b){return b.ntransactiontestcode;});// START ALPD-3625 VISHAKH\n// oldSelectedTest.forEach((test, index) => {\n//     if (!wholeTestList.includes(test.ntransactiontestcode)) {\n//         oldSelectedTest.splice(index, 1)\n//     }\n// })\noldSelectedTest=oldSelectedTest.filter(function(item){return wholeTestList.includes(item.ntransactiontestcode);});// START ALPD-3625 VISHAKH\nvar keepOld=false;var _ntransactiontestcode5;var npreregno;if(oldSelectedTest.length>0){keepOld=true;masterData=_objectSpread(_objectSpread({},masterData),{},{selectedTest:oldSelectedTest});}else{_ntransactiontestcode5=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:\"\";npreregno=inputData.masterData.RegistrationGetSample.length>0?inputData.masterData.RegistrationGetSample[0].npreregno:\"\";}switch(inputData.activeTestTab){case\"IDS_PARAMETERRESULTS\":_RegistrationParameter2=keepOld?inputData.masterData.RegistrationParameter?inputData.masterData.RegistrationParameter:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,_ntransactiontestcode5,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_TESTATTACHMENTS\":{_RegistrationTestAttachment2=keepOld?inputData.masterData.RegistrationTestAttachment?inputData.masterData.RegistrationTestAttachment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment,_ntransactiontestcode5,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_TESTCOMMENTS\":_RegistrationTestComment3=keepOld?inputData.masterData.RegistrationTestComment?inputData.masterData.RegistrationTestComment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment,_ntransactiontestcode5,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_SAMPLECOMMENTS\":_RegistrationComment=keepOld?inputData.masterData.RegistrationComment?inputData.masterData.RegistrationComment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment,npreregno,\"npreregno\");activeName=\"RegistrationComment\";dataStateName=\"sampleCommentsDataState\";break;default:_RegistrationParameter2=keepOld?inputData.masterData.RegistrationParameter?inputData.masterData.RegistrationParameter:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,_ntransactiontestcode5,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}}//else if (inputData.checkBoxOperation === 5) {\nelse if(inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTSTATUS){switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":var _ResponseData5=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment4=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment4=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(_ResponseData5));}var _ntransactiontestcode6=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;_RegistrationTestComment3=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment4,_ntransactiontestcode6,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":{var _ResponseData7=response.data.RegistrationTestAttachment?response.data.RegistrationTestAttachment:[];var _RegistrationTestAttachment3=[];if(inputData.masterData.RegistrationTestAttachment!==undefined){_RegistrationTestAttachment3=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(_ResponseData7));}var _ntransactiontestcode8=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;_RegistrationTestAttachment2=getRecordBasedOnPrimaryKeyName(_RegistrationTestAttachment3,_ntransactiontestcode8,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":var _resultResponseData2=response.data.RegistrationParameter?response.data.RegistrationParameter:[];var _RegistrationParameter3=[].concat(_toConsumableArray(inputData.masterData.RegistrationParameter),_toConsumableArray(_resultResponseData2));var _ntransactiontestcode7=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;_RegistrationParameter2=getRecordBasedOnPrimaryKeyName(_RegistrationParameter3,_ntransactiontestcode7,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_SAMPLECOMMENTS\":_RegistrationComment=response.data.RegistrationComment?_toConsumableArray(response.data.RegistrationComment):[];activeName=\"RegistrationComment\";dataStateName=\"sampleCommentsDataState\";break;default:var _ResponseData6=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment5=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment5=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(_ResponseData6));}var _ntransactionTestCode2=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;_RegistrationTestComment3=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment5,_ntransactionTestCode2,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}// RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n}else{switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":_RegistrationTestComment3=response.data.RegistrationTestComment?_toConsumableArray(response.data.RegistrationTestComment):[];activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":{_RegistrationTestAttachment2=response.data.RegistrationTestAttachment?_toConsumableArray(response.data.RegistrationTestAttachment):[];activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":_RegistrationParameter2=response.data.RegistrationParameter?_toConsumableArray(response.data.RegistrationParameter):[];activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_SAMPLECOMMENTS\":_RegistrationComment=response.data.RegistrationComment?_toConsumableArray(response.data.RegistrationComment):[];activeName=\"RegistrationComment\";dataStateName=\"sampleCommentsDataState\";break;default:_RegistrationParameter2=response.data.RegistrationParameter?_toConsumableArray(response.data.RegistrationParameter):[];activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}}masterData['RegistrationTestComment']=_RegistrationTestComment3;masterData[\"RegistrationParameter\"]=_RegistrationParameter2;masterData['RegistrationTestAttachment']=_RegistrationTestAttachment2;masterData['RegistrationComment']=_RegistrationComment;var _inputData2=inputData,_testskip=_inputData2.testskip,_testtake=_inputData2.testtake;var bool=false;if(inputData.masterData.RegistrationGetTest.length<inputData.testskip){_testskip=0;bool=true;}if(bool){skipInfo={testskip:_testskip,testtake:_testtake};}}if(inputData.masterData.selectedSample&&inputData.sampleGridDataState&&inputData.masterData.selectedSample.length<=inputData.sampleGridDataState.skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{sampleGridDataState:_objectSpread(_objectSpread({},inputData.sampleGridDataState),{},{skip:0,sort:undefined,filter:undefined})});}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{sampleGridDataState:_objectSpread(_objectSpread({},inputData.sampleGridDataState),{},{sort:undefined,filter:undefined})});}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";masterData['searchedTest']=undefined;}if(inputData.searchSubSampleRef!==undefined&&inputData.searchSubSampleRef.current!==null){inputData.searchSubSampleRef.current.value=\"\";masterData['searchedSubSample']=undefined;}// let inputParam = { attachmentskip: undefined }\nif(inputData[dataStateName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}// Start of ALPD-4130 on Save Additional Filter - ATE-241\nvar multifilterInfo={};if(inputData.multiFilterLoad!==undefined){if(inputData.searchSampleRef!==undefined&&inputData.searchSampleRef.current!==null){inputData.searchSampleRef.current.value=\"\";}if(inputData.searchSubSampleRef!==undefined&&inputData.searchSubSampleRef.current!==null){inputData.searchSubSampleRef.current.value=\"\";}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";}multifilterInfo={multiFilterLoad:inputData.multiFilterLoad,openModal:inputData.openModal,searchSampleRef:inputData.searchSampleRef,searchSubSampleRef:inputData.searchSubSampleRef,searchTestRef:inputData.searchTestRef,testskip:inputData.testskip,subsampleskip:inputData.subsampleskip,skip:inputData.skip// filterColumnActive:true\n};}//  End of ALPD-4130 ATE-241\ndispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({masterData:masterData,loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab,activeTestTab:inputData.activeTestTab,skip:undefined,take:undefined},skipInfo),{},{activeTabIndex:inputData.activeTabIndex},multifilterInfo)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});}else{var bool=false;var skipInfo={};var _inputData3=inputData,testskip=_inputData3.testskip,testtake=_inputData3.testtake,subsampletake=_inputData3.subsampletake,subsampleskip=_inputData3.subsampleskip;var oldSelectedTest=inputData.masterData.selectedTest;var oldSelectedSubSample=inputData.masterData.selectedSubSample;// let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\nvar isGrandChildGetRequired=false;var TestSelected=[];var subSampleSelected=[];if(inputData[\"statusNone\"]){TestSelected=getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest,inputData.removeElementFromArray[0].npreregno,\"npreregno\");subSampleSelected=getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample,inputData.removeElementFromArray[0].npreregno,\"npreregno\");}else{TestSelected=filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest,inputData.removeElementFromArray[0].npreregno,\"npreregno\");subSampleSelected=filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample,inputData.removeElementFromArray[0].npreregno,\"npreregno\");}if(TestSelected.length>0){isGrandChildGetRequired=false;}else{isGrandChildGetRequired=true;}fillRecordBasedOnCheckBoxSelection(inputData.masterData,inputData.selectedSample,inputData.childTabsKey,inputData.checkBoxOperation,\"npreregno\",inputData.removeElementFromArray);if(isGrandChildGetRequired){var selectedSample=inputData.selectedSample;var filterTestSameOldSelectedTest=getSameRecordFromTwoArrays(oldSelectedTest,inputData.masterData.RegistrationGetTest,\"ntransactiontestcode\");var selectedTest=filterTestSameOldSelectedTest.length>0?filterTestSameOldSelectedTest:inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[];var ntransactiontestcode=selectedTest.length>0?selectedTest.map(function(x){return x.ntransactiontestcode;}).join(\",\"):\"-1\";var selectedSubSample=inputData.masterData.RegistrationGetSubSample;if(subSample){var filterSelectedSubSample=getSameRecordFromTwoArrays(oldSelectedSubSample,inputData.masterData.RegistrationGetSubSample,\"ntransactionsamplecode\");selectedSubSample=filterSelectedSubSample.length>0?filterSelectedSubSample:[inputData.masterData.RegistrationGetSubSample[0]];if(inputData.masterData.RegistrationGetSubSample.length<=inputData.subsampleskip){subsampleskip=0;skipInfo={subsampletake:subsampletake,subsampleskip:subsampleskip};}}// START ALPD-3671 VISHAKH\nvar masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:selectedSample,selectedSubSample:selectedSubSample,selectedTest:selectedTest});if(inputData.searchSubSampleRef!==undefined&&inputData.searchSubSampleRef.current!==null){inputData.searchSubSampleRef.current.value=\"\";masterData['searchedSubSample']=undefined;}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";masterData['searchedTest']=undefined;}// END ALPD-3671 VISHAKH\nif(inputData.masterData.RegistrationGetTest.length<=inputData.testskip){testskip=0;bool=true;}if(bool){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{testskip:testskip,testtake:testtake});}// inputData = {\n//     ...inputData, childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\n//     selectedSubSample, checkBoxOperation: 3, skipInfo, masterData\n// }\ninputData=_objectSpread(_objectSpread({},inputData),{},_defineProperty({childTabsKey:[\"RegistrationTestComment\",\"RegistrationParameter\",\"RegistrationTestAttachment\"],ntransactiontestcode:ntransactiontestcode,masterData:masterData,selectedTest:selectedTest,selectedSubSample:selectedSubSample,checkBoxOperation:checkBoxOperation.SINGLESELECT,skipInfo:skipInfo},\"masterData\",masterData));if(subSample){if(selectedTest.length===0){inputData[\"npreregno\"]=selectedSubSample.map(function(x){return x.npreregno;}).join(\",\");inputData[\"ntransactionsamplecode\"]=selectedSubSample.map(function(x){return x.ntransactionsamplecode;}).join(\",\");// inputData[\"checkBoxOperation\"] = 3\ninputData[\"checkBoxOperation\"]=checkBoxOperation.SINGLESELECT;inputData[\"childTabsKey\"]=[\"RegistrationGetTest\"];dispatch(getRegistrationTestDetail(inputData,true));}else{dispatch(getTestChildTabDetailRegistration(inputData,true));}}else{dispatch(getTestChildTabDetailRegistration(inputData,true));}}else{var _masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:inputData.selectedSample,selectedPreregno:inputData.npreregno,selectedTest:TestSelected?TestSelected:inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[],// RegistrationTestComment,\nselectedSubSample:subSampleSelected?subSampleSelected:inputData.masterData.RegistrationGetSubSample});// START ALPD-3671 VISHAKH\nif(inputData.searchSubSampleRef!==undefined&&inputData.searchSubSampleRef.current!==null){inputData.searchSubSampleRef.current.value=\"\";_masterData['searchedSubSample']=undefined;}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";_masterData['searchedTest']=undefined;}// END ALPD-3671 VISHAKH\nvar subsamplecheck=true;if(subSample){var SubSampleSelected=getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample,inputData.removeElementFromArray[0].npreregno,\"npreregno\");if(SubSampleSelected.length>0){var _filterSelectedSubSample=getSameRecordFromTwoArrays(oldSelectedSubSample,inputData.masterData.RegistrationGetSubSample,\"ntransactionsamplecode\");if(_filterSelectedSubSample.length===0){var wholeSubSample=_masterData.RegistrationGetSubSample.map(function(b){return b.ntransactionsamplecode;});// START ALPD-3625 VISHAKH\n// oldSelectedSubSample.forEach((test, index) => {\n//     if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\n//         oldSelectedSubSample.splice(index, 1)\n//     }\n//     return null;\n// })\noldSelectedSubSample=oldSelectedSubSample.filter(function(item){return wholeSubSample.includes(item.ntransactionsamplecode);});// END ALPD-3625 VISHAKH\nif(oldSelectedSubSample.length===0&&wholeSubSample.length>0&&_masterData.selectedTest.length===0){var selectedSubSample1=[inputData.masterData.RegistrationGetSubSample[0]];_masterData=_objectSpread(_objectSpread({},_masterData),{},{selectedSubSample:selectedSubSample1,selectedTest:[]});inputData=_objectSpread(_objectSpread({},inputData),_masterData);inputData[\"npreregno\"]=selectedSubSample1.map(function(x){return x.npreregno;}).join(\",\");inputData[\"ntransactionsamplecode\"]=selectedSubSample1.map(function(x){return x.ntransactionsamplecode;}).join(\",\");// inputData[\"checkBoxOperation\"] = 3\ninputData[\"checkBoxOperation\"]=checkBoxOperation.SINGLESELECT;inputData[\"childTabsKey\"]=[\"RegistrationGetTest\"];subsamplecheck=false;dispatch(getRegistrationTestDetail(inputData,true));}}else{oldSelectedSubSample=_filterSelectedSubSample;}}else{var _wholeSubSample=_masterData.RegistrationGetSubSample.map(function(b){return b.ntransactionsamplecode;});// START ALPD-3625 VISHAKH\n// oldSelectedSubSample.forEach((test, index) => {\n//     if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\n//         oldSelectedSubSample.splice(index, 1)\n//     }\n//     return null;\n// })\noldSelectedSubSample=oldSelectedSubSample.filter(function(item){return _wholeSubSample.includes(item.ntransactionsamplecode);});// END ALPD-3625 VISHAKH\n}if(subsamplecheck){_masterData=_objectSpread(_objectSpread({},_masterData),{},{selectedSubSample:oldSelectedSubSample});}if(inputData.masterData.RegistrationGetSubSample.length<=inputData.subsampleskip){subsampleskip=0;_skipInfo={subsampleskip:subsampleskip,subsampletake:subsampletake};}}var wholeTestList=_masterData.RegistrationGetTest.map(function(b){return b.ntransactiontestcode;});// START ALPD-3625 VISHAKH\n// oldSelectedTest.forEach((test, index) => {\n//     if (!wholeTestList.includes(test.ntransactiontestcode)) {\n//         oldSelectedTest.splice(index, 1)\n//     }\n//     return null;\n// })\noldSelectedTest=oldSelectedTest.filter(function(item){return wholeTestList.includes(item.ntransactiontestcode);});// END ALPD-3625 VISHAKH\nvar keepOld=false;var _ntransactiontestcode9;if(oldSelectedTest.length>0){keepOld=true;_masterData=_objectSpread(_objectSpread({},_masterData),{},{selectedTest:oldSelectedTest});}else{_ntransactiontestcode9=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:\"-1\";}_masterData[\"RegistrationTestComment\"]=keepOld?inputData.masterData.RegistrationTestComment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment,_ntransactiontestcode9,\"ntransactiontestcode\");_masterData[\"RegistrationParameter\"]=keepOld?inputData.masterData.RegistrationParameter:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,_ntransactiontestcode9,\"ntransactiontestcode\");var _skipInfo={};if(inputData.masterData.RegistrationGetTest.length<=inputData.testskip){testskip=0;bool=true;}if(bool){_skipInfo=_objectSpread(_objectSpread({},_skipInfo),{},{testskip:testskip,testtake:testtake});}var dataStateArray=[{activeName:'selectedSample',dataStateName:'sampleGridDataState'},{activeName:'RegistrationSourceCountry',dataStateName:'sourceDataState'},{activeName:'RegistrationTestComment',dataStateName:'testCommentDataState'},{activeName:'RegistrationParameter',dataStateName:'resultDataState'}];dataStateArray.map(function(arr){if(inputData[arr.dataStateName]&&_masterData[arr.activeName]&&_masterData[arr.activeName].length<=inputData[arr.dataStateName].skip){_skipInfo=_objectSpread(_objectSpread({},_skipInfo),{},_defineProperty({},arr.dataStateName,_objectSpread(_objectSpread({},inputData[arr.dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{_skipInfo=_objectSpread(_objectSpread({},_skipInfo),{},_defineProperty({},arr.dataStateName,_objectSpread(_objectSpread({},inputData[arr.dataStateName]),{},{sort:undefined,filter:undefined})));}return null;});dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:_masterData,loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab,activeTestTab:inputData.activeTestTab},_skipInfo)});}}};}export function getRegistrationTestDetail(inputData,isServiceRequired){return function(dispatch){var inputParamData={nsampletypecode:inputData.nsampletypecode,nregtypecode:inputData.nregtypecode,nregsubtypecode:inputData.nregsubtypecode,npreregno:inputData.npreregno,ntransactionsamplecode:inputData.ntransactionsamplecode,ntransactionstatus:inputData.ntransactionstatus,napprovalconfigcode:inputData.napprovalconfigcode,activeTestTab:inputData.activeTestTab,activeSampleTab:inputData.activeSampleTab,activeSubSampleTab:inputData.activeSubSampleTab,userinfo:inputData.userinfo,ndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,checkBoxOperation:inputData.checkBoxOperation,nneedsubsample:inputData.nneedsubsample,selectedTransactionsamplecode:inputData.selectedSubSample&&inputData.selectedSubSample.length>0&&inputData.selectedSubSample.map(function(item){return item.ntransactionsamplecode;}).join(\",\"),noutsourcerequired:inputData.masterData&&inputData.masterData.RealSampleTypeValue?inputData.masterData.RealSampleTypeValue.noutsourcerequired:transactionStatus.NA};var subSample=inputData.nneedsubsample;var activeName=\"\";var dataStateName=\"\";dispatch(initRequest(true));if(isServiceRequired){rsapi.post(\"registration/getRegistrationTest\",inputParamData).then(function(response){//sortData(response.data);\n//ALPD-1609\nsortData(response.data,'descending','npreregno');var oldSelectedTest=inputData.masterData.selectedTest||[];var oldSelectedSubSample=inputData.masterData.selectedSubSample||[];var outsourceDetailsList=response.data&&response.data.OutsourceDetailsList;fillRecordBasedOnCheckBoxSelection(inputData.masterData,response.data,inputData.childTabsKey,inputData.checkBoxOperation,\"ntransactionsamplecode\",inputData.removeElementFromArray);var masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSubSample:inputData.selectedSubSample,selectedTransactionsamplecode:inputData.ntransactionsamplecode,selectedTest:inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[]// RegistrationTestComment,\n});//let wholeRegistrationTestComments = [];\nvar RegistrationTestComment=[];var RegistrationTestAttachment=[];var RegistrationParameter=[];var RegistrationSampleComment=[];var RegistrationSampleAttachment=[];//if (inputData.checkBoxOperation === 1) {\nif(inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){var wholeTestList=masterData.RegistrationGetTest.map(function(b){return b.ntransactiontestcode;});// START ALPD-3625 VISHAKH\n// oldSelectedTest.forEach((test, index) => {\n//     if (!wholeTestList.includes(test.ntransactiontestcode)) {\n//         oldSelectedTest.splice(index, 1)\n//     }\n// })\noldSelectedTest=oldSelectedTest.filter(function(item){return wholeTestList.includes(item.ntransactiontestcode);});// END ALPD-3625 VISHAKH\nvar keepOld=false;var ntransactiontestcode;if(oldSelectedTest.length>0){keepOld=true;masterData=_objectSpread(_objectSpread({},masterData),{},{selectedTest:oldSelectedTest});}else{ntransactiontestcode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:\"\";}switch(inputData.activeTestTab){case\"IDS_PARAMETERRESULTS\":RegistrationParameter=keepOld?inputData.masterData.RegistrationParameter?inputData.masterData.RegistrationParameter:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_TESTCOMMENTS\":RegistrationTestComment=keepOld?inputData.masterData.RegistrationTestComment?inputData.masterData.RegistrationTestComment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":RegistrationTestAttachment=keepOld?inputData.masterData.RegistrationTestAttachment?inputData.masterData.RegistrationTestAttachment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";break;default:RegistrationParameter=keepOld?inputData.masterData.RegistrationParameter?inputData.masterData.RegistrationParameter:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}}// else if (inputData.checkBoxOperation === 5) {\nelse if(inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTSTATUS){switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":var ResponseData=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var RegistrationTestComment1=[];if(inputData.masterData.RegistrationTestComment!==undefined){RegistrationTestComment1=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(ResponseData));}var _ntransactiontestcode10=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(RegistrationTestComment1,_ntransactiontestcode10,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTCOMMENTS\":{var _ResponseData8=response.data.RegistrationTestAttachment?response.data.RegistrationTestAttachment:[];var RegistrationTestAttachment1=[];if(inputData.masterData.RegistrationTestAttachment!==undefined){RegistrationTestAttachment1=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(_ResponseData8));}var _ntransactiontestcode11=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1,_ntransactiontestcode11,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":var resultResponseData=response.data.RegistrationParameter?response.data.RegistrationParameter:[];var RegistrationParameter1=[].concat(_toConsumableArray(inputData.masterData.RegistrationParameter),_toConsumableArray(resultResponseData));var ntransactiontestcode1=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationParameter=getRecordBasedOnPrimaryKeyName(RegistrationParameter1,ntransactiontestcode1,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;default:var ResponseData1=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var RegistrationTestComment2=[];if(inputData.masterData.RegistrationTestComment!==undefined){RegistrationTestComment2=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(ResponseData1));}var ntransactionTestCode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(RegistrationTestComment2,ntransactionTestCode,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}// RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n}// else if (inputData.checkBoxOperation === 7) {\nelse if(inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTALL){var testList=reArrangeArrays(inputData.masterData.RegistrationGetSubSample,response.data.RegistrationGetTest,\"ntransactionsamplecode\");masterData=_objectSpread(_objectSpread({},masterData),{},{selectedTest:testList?testList.length>0?[testList[0]]:[]:[],RegistrationGetTest:testList?testList.length>0?testList:[]:[]//ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\n});switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":var _ResponseData9=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment6=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment6=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(_ResponseData9));}var _ntransactiontestcode12=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment6,_ntransactiontestcode12,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTCOMMENTS\":{var _ResponseData11=response.data.RegistrationTestAttachment?response.data.RegistrationTestAttachment:[];var _RegistrationTestAttachment4=[];if(inputData.masterData.RegistrationTestAttachment!==undefined){_RegistrationTestAttachment4=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(_ResponseData11));}var _ntransactiontestcode14=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(_RegistrationTestAttachment4,_ntransactiontestcode14,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":var _resultResponseData3=response.data.RegistrationParameter?response.data.RegistrationParameter:[];// let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\nvar _RegistrationParameter4=_toConsumableArray(_resultResponseData3);var _ntransactiontestcode13=testList?testList.length>0?testList[0].ntransactiontestcode:inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1:-1;RegistrationParameter=getRecordBasedOnPrimaryKeyName(_RegistrationParameter4,_ntransactiontestcode13,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;default:var _ResponseData10=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment7=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment7=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(_ResponseData10));}var _ntransactionTestCode3=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment7,_ntransactionTestCode3,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}// RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n}else{switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":RegistrationTestComment=response.data.RegistrationTestComment?_toConsumableArray(response.data.RegistrationTestComment):[];activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":RegistrationTestAttachment=response.data.RegistrationTestAttachment?_toConsumableArray(response.data.RegistrationTestAttachment):[];activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";break;case\"IDS_PARAMETERRESULTS\":RegistrationParameter=response.data.RegistrationParameter?_toConsumableArray(response.data.RegistrationParameter):[];activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;default:RegistrationParameter=response.data.RegistrationParameter?_toConsumableArray(response.data.RegistrationParameter):[];activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}}if(subSample){var wholeSubsampleList=masterData.RegistrationGetSubSample.map(function(b){return b.ntransactionsamplecode;});// START ALPD-3625 VISHAKH\n// oldSelectedSubSample.map((test, index) => {\n//     if (!wholeSubsampleList.includes(test.ntransactionsamplecode)) {\n//         oldSelectedSubSample.splice(index, 1)\n//     }\n//     return null;\n// })\noldSelectedSubSample=oldSelectedSubSample.filter(function(item){return wholeSubsampleList.includes(item.ntransactionsamplecode);});// END ALPD-3625 VISHAKH\nvar _keepOld=false;var ntransactionsamplecode;if(oldSelectedSubSample.length>0){_keepOld=true;}else{ntransactionsamplecode=masterData.selectedSubSample[0].ntransactionsamplecode;}switch(inputData.activeSubSampleTab){case\"IDS_SUBSAMPLECOMMENTS\":RegistrationSampleComment=_keepOld?inputData.masterData.RegistrationSampleComment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment,ntransactionsamplecode,\"ntransactionsamplecode\");activeName=\"RegistrationSampleComment\";dataStateName=\"subSampleCommentDataState\";break;default:RegistrationSampleAttachment=_keepOld?inputData.masterData.RegistrationSampleAttachment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment,ntransactionsamplecode,\"ntransactionsamplecode\");activeName=\"RegistrationSampleAttachment\";dataStateName=\"subSampleAttachmentDataState\";break;}}masterData['RegistrationTestComment']=RegistrationTestComment;masterData['RegistrationTestAttachment']=RegistrationTestAttachment;masterData[\"RegistrationParameter\"]=RegistrationParameter;masterData[\"RegistrationSampleComment\"]=RegistrationSampleComment;masterData[\"RegistrationSampleAttachment\"]=RegistrationSampleAttachment;masterData['OutsourceDetailsList']=outsourceDetailsList;var _inputData4=inputData,testskip=_inputData4.testskip,testtake=_inputData4.testtake,subsampleskip=_inputData4.subsampleskip,subsampletake=_inputData4.subsampletake;// let bool = false;\n// Commented bool value because no need to check bool condition to update skipInfo value.\nvar skipInfo={};// if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\ntestskip=0;// bool = true\n// }\nif(inputData.masterData.RegistrationGetSubSample.length<inputData.subsampleskip){subsampleskip=0;// bool = true\n}// if (bool) {\nskipInfo={testskip:testskip,testtake:testtake,subsampleskip:subsampleskip,subsampletake:subsampletake};// }\nif(inputData.masterData.selectedSample&&inputData.sampleGridDataState&&inputData.masterData.selectedSample.length<=inputData.sampleGridDataState.skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{sampleGridDataState:_objectSpread(_objectSpread({},inputData.sampleGridDataState),{},{skip:0,sort:undefined,filter:undefined})});}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{sampleGridDataState:_objectSpread(_objectSpread({},inputData.sampleGridDataState),{},{sort:undefined,filter:undefined})});}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";masterData['searchedTest']=undefined;}//  let inputParam = { attachmentskip: undefined }\nif(inputData[dataStateName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:masterData,loading:false,showFilter:false,// activeTabIndex: inputData.activeTabIndex,\nactiveSampleTab:inputData.activeSampleTab,activeTestTab:inputData.activeTestTab,skip:undefined,take:undefined},skipInfo)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});}else{var oldSelectedTest=inputData.masterData.selectedTest;// START ALPD-3625 VISHAKH\n// let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\nvar TestSelected=filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest,inputData.removeElementFromArray[0].ntransactionsamplecode,\"ntransactionsamplecode\");var isGrandChildGetRequired=false;if(TestSelected.length>0){isGrandChildGetRequired=false;}else{isGrandChildGetRequired=true;}// END ALPD-3625 VISHAKH\nfillRecordBasedOnCheckBoxSelection(inputData.masterData,inputData.selectedSubSample,inputData.childTabsKey,inputData.checkBoxOperation,\"ntransactionsamplecode\",inputData.removeElementFromArray);if(isGrandChildGetRequired){var ntransactiontestcode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode.toString():\"-1\";var selectedSubSample=inputData.selectedSubSample;// let selectedPreregno = inputData.npreregno;\nvar selectedTest=inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[];// let selectedSubSample = inputData.masterData.RegistrationGetSubSample\nvar masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSubSample:selectedSubSample,selectedTest:selectedTest});// inputData = {\n//     ...inputData, childTabsKey: [\"RegistrationTestAttachment\", \"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\n//     selectedSubSample, checkBoxOperation: 3, activeTabIndex: inputData.masterData.activeTabIndex\n// }\n// START ALPD-3671 VISHAKH\nif(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";masterData['searchedTest']=undefined;}// END ALPD-3671 VISHAKH\ninputData=_objectSpread(_objectSpread({},inputData),{},{childTabsKey:[\"RegistrationTestAttachment\",\"RegistrationTestComment\",\"RegistrationParameter\"],ntransactiontestcode:ntransactiontestcode,masterData:masterData,selectedTest:selectedTest,selectedSubSample:selectedSubSample,checkBoxOperation:checkBoxOperation.SINGLESELECT,activeTabIndex:inputData.masterData.activeTabIndex});dispatch(getTestChildTabDetailRegistration(inputData,true));}else{var _masterData2=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSubSample:inputData.selectedSubSample,selectedTransactioncode:inputData.ntransactionsamplecode,selectedTest:inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[]});// START ALPD-3671 VISHAKH\nif(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";_masterData2['searchedTest']=undefined;}// END ALPD-3671 VISHAKH\nvar wholeTestList=_masterData2.RegistrationGetTest.map(function(b){return b.ntransactiontestcode;});// START ALPD-3625 VISHAKH\n// oldSelectedTest.forEach((test, index) => {\n//     if (!wholeTestList.includes(test.ntransactiontestcode)) {\n//         oldSelectedTest.splice(index, 1)\n//     }\n//     return null;\n// })\noldSelectedTest=oldSelectedTest.filter(function(item){return wholeTestList.includes(item.ntransactiontestcode);});// END ALPD-3625 VISHAKH\nvar keepOld=false;var _ntransactiontestcode15;if(oldSelectedTest.length>0){keepOld=true;_masterData2=_objectSpread(_objectSpread({},_masterData2),{},{selectedTest:oldSelectedTest});}else{_ntransactiontestcode15=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:\"-1\";}_masterData2[\"RegistrationTestComment\"]=keepOld?inputData.masterData.RegistrationTestComment?inputData.masterData.RegistrationTestComment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment,_ntransactiontestcode15,\"ntransactiontestcode\");_masterData2[\"RegistrationParameter\"]=keepOld?inputData.masterData.RegistrationParameter?inputData.masterData.RegistrationParameter:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,_ntransactiontestcode15,\"ntransactiontestcode\");var skipInfo={};var dataStateArray=[{activeName:'selectedSample',dataStateName:'sampleGridDataState'},{activeName:'RegistrationSourceCountry',dataStateName:'sourceDataState'},{activeName:'RegistrationTestComment',dataStateName:'testCommentDataState'},{activeName:'RegistrationParameter',dataStateName:'resultDataState'}];dataStateArray.map(function(arr){if(inputData[arr.dataStateName]&&_masterData2[arr.activeName]&&_masterData2[arr.activeName].length<=inputData[arr.dataStateName].skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},arr.dataStateName,_objectSpread(_objectSpread({},inputData[arr.dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},arr.dataStateName,_objectSpread(_objectSpread({},inputData[arr.dataStateName]),{},{sort:undefined,filter:undefined})));}return null;});dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:_masterData2,loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab,activeTestTab:inputData.activeTestTab},skipInfo)});}}};}export function acceptRegistration(inputParam,LoginProps){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/acceptRegistration\",inputParam.inputData).then(function(response){if(response.data.rtn===undefined||response.data.rtn===\"Success\"||response.data.rtn===\"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"||response.data.rtn===\"IDS_ALLSAMPLESAREREGISTERED\"||response.data.rtn===\"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\"){// if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n//     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n// }\nreplaceUpdatedObject(response.data[\"RegistrationGetSample\"],LoginProps.RegistrationGetSample,\"npreregno\");replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],LoginProps.RegistrationGetSubSample,\"ntransactionsamplecode\");replaceUpdatedObject(response.data[\"RegistrationGetTest\"],LoginProps.RegistrationGetTest,\"ntransactiontestcode\");delete response.data[\"RegistrationGetSample\"];delete response.data[\"RegistrationGetSubSample\"];delete response.data[\"RegistrationGetTest\"];var masterData=_objectSpread(_objectSpread(_objectSpread({},LoginProps),response.data),{},{selectedSample:replaceUpdatedObject(response.data[\"selectedSample\"],LoginProps.selectedSample,\"npreregno\"),selectedSubSample:replaceUpdatedObject(response.data[\"selectedSubSample\"],LoginProps.selectedSubSample,\"ntransactionsamplecode\"),selectedTest:replaceUpdatedObject(response.data[\"selectedTest\"],LoginProps.selectedTest,\"ntransactiontestcode\")});var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},{loading:false,loadEsign:false,openModal:false,showSample:undefined,showConfirmAlert:false,acceptConfirmMessage:undefined,skip:0,testskip:0,take:undefined,testtake:undefined,subsampletake:undefined,subsampleskip:0});dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));if(response.data.rtn===\"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"||response.data.rtn===\"IDS_ALLSAMPLESAREREGISTERED\"||response.data.rtn===\"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\"){toast.info(intl.formatMessage({id:response.data.rtn}));}}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,openModal:false}});toast.info(intl.formatMessage({id:response.data.rtn}));}}).catch(function(error){// toast.error(error.message);           \nif(error.response.status===500){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}else{//toast.info(intl.formatMessage({ id: error.response.data[\"rtn\"] }));\nif(error.response.data.NeedConfirmAlert){dispatch({type:DEFAULT_RETURN,payload:{showConfirmAlert:true,acceptConfirmMessage:error.response.data.rtn,acceptConfirmParam:{inputParam:inputParam,masterData:LoginProps},loading:false}});}else{//toast.error(error.message);\ntoast.warn(intl.formatMessage({id:error.response.data[\"rtn\"]}));dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false,acceptConfirmMessage:undefined}});}}});};}export var addMoreTest=function addMoreTest(inputParam,ncontrolCode){return function(dispatch){var sampleList=inputParam.sampleList;var value=false;if(inputParam.selectedSample&&inputParam.selectedSample.length>0){if(inputParam.selectedSubSample&&inputParam.selectedSubSample.length>0){value=inputParam.selectedSubSample.some(function(obj){return obj.nspecsampletypecode!==inputParam.selectedSubSample[0].nspecsampletypecode;});if(value){return toast.info(intl.formatMessage({id:\"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\"}));}//sampleList = sampleList ? [...sampleList.slice(inputParam.skip, inputParam.take)] : [];\n//const selectedsample = getSameRecordFromTwoArrays(sampleList, inputParam.selectedSample, \"npreregno\");\n// const selectsubsample = getSameRecordFromTwoArrays(subsampleList, inputParam.selectedsubsample, \"ntransactionsamplecode\");\n//if (selectedsample && selectedsample.length > 0) {\nvar selectedsample=inputParam.selectedSample;var findTransactionStatus=_toConsumableArray(new Set(selectedsample.map(function(item){return item.ntransactionstatus;})));if(findTransactionStatus.length===1){if(findTransactionStatus[0]!==transactionStatus.REJECT&&findTransactionStatus[0]!==transactionStatus.CANCELLED){if(findTransactionStatus[0]!==transactionStatus.RELEASED){// if (selectsubsample && selectsubsample.length > 0) {\n//     const findSubSampleStatus = [...new Set(selectsubsample.map(item => item.ntransactionstatus))];\n//\n//     if (findSubSampleStatus[0] !== transactionStatus.REJECT && findSubSampleStatus[0] !== transactionStatus.CANCELLED) \n//     {                    \nvar findApprovalVersion=_toConsumableArray(new Set(selectedsample.map(function(item){return item.napprovalversioncode;})));if(findApprovalVersion.length===1){var findSampleSpec=_toConsumableArray(new Set(selectedsample.map(function(item){return item.nallottedspeccode;})));//const findComponent = [...new Set(selectsubsample.map(item => item.ncomponentcode))];\nif(findSampleSpec.length===1)//&& findComponent.length === 1 \n{inputParam[\"snspecsampletypecode\"]=inputParam.selectedSubSample&&_toConsumableArray(new Set(inputParam.selectedSubSample.map(function(x){return x.nspecsampletypecode;}))).join(\",\");dispatch(initRequest(true));var urlArray=[];var TestGet=rsapi.post(\"/registration/getMoreTest\",_objectSpread({},inputParam));urlArray[0]=TestGet;var TestPackageGet=rsapi.post(\"/registration/getMoreTestPackage\",_objectSpread({},inputParam));urlArray[1]=TestPackageGet;var TestSectionGet=rsapi.post(\"/registration/getMoreTestSection\",_objectSpread({},inputParam));urlArray[2]=TestSectionGet;Axios.all(urlArray).then(function(response){var PackageData=[];var TestSectionData=[];var PackageDataMap=constructOptionList(response[1].data||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");var TestSectionDataMap=constructOptionList(response[2].data||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,true);TestSectionData=TestSectionDataMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{availableTest:response[0].data,TestCombined:response[0].data,AllTest:response[0].data,TestPackage:PackageData,loadChildTest:true,loading:false,ncontrolCode:ncontrolCode,screenName:\"IDS_TEST\",operation:\"create\",openModal:true,parentPopUpSize:\"lg\",selectedRecord:{},showSample:undefined,loadPrinter:false,TestSection:TestSectionData,AllSection:TestSectionData}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(_this.props.formatMessage({id:error.response.data}));}});}else{toast.info(intl.formatMessage({id:\"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\"}));}}else{toast.info(intl.formatMessage({id:\"IDS_PLEASESELECTSAMPLEWITHSAMEAPPROVALCONFIG\"}));}//     }\n//     else {\n//         toast.info(intl.formatMessage({ id: \"IDS_SUBSAMPLEISREJECTEDORCANCELLED\" }));\n//     }\n// }                               \n}else{toast.info(intl.formatMessage({id:\"IDS_TESTCANNOTBEFORRELEASEDSAMPLES\"}));}}else{////     toast.info(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORCANCELLEDREJECTSAMPLES\" }));\ntoast.info(intl.formatMessage({id:\"IDS_SAMPLEISREJECTEDORCANCELLED\"}));}}else{toast.info(intl.formatMessage({id:\"IDS_PLEASESELECTSAMPLEWITHSAMESTATUS\"}));}// } else {\n//     toast.info(intl.formatMessage({ id: \"IDS_SELECTSAMPLE\" }));\n// }\n}else{toast.info(intl.formatMessage({id:\"IDS_SELECTSUBSAMPLE\"}));}}else{toast.info(intl.formatMessage({id:\"IDS_SELECTSAMPLE\"}));}};};export var createRegistrationTest=function createRegistrationTest(inputParam,masterData,modalName){return function(dispatch){dispatch(initRequest(true));rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,_objectSpread({},inputParam.inputData)).then(function(response){var _respObject;var RegistrationGetTest=updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"],response.data[\"RegistrationGetTest\"]);//let RegistrationGetSubSample = updatedObjectWithNewElement(masterData[\"RegistrationGetSubSample\"], response.data[\"RegistrationGetSubSample\"]);\nmasterData=_objectSpread(_objectSpread({},masterData),{},{RegistrationGetTest:sortData(RegistrationGetTest,\"descending\",\"ntransactiontestcode\"),RegistrationGetSubSample:sortData(response.data[\"RegistrationGetSubSample\"],\"descending\",\"ntransactionsamplecode\"),selectedTest:response.data[\"RegistrationGetTest\"],//  selectedSubSample: response.data[\"RegistrationGetSubSample\"],\nselectedSubSample:response.data[\"selectedSubSample\"],RegistrationParameter:response.data.RegistrationParameter,RegistrationGetSample:replaceUpdatedObject(response.data.selectedSample,masterData.RegistrationGetSample,'npreregno')});var respObject=(_respObject={masterData:masterData},_defineProperty(_respObject,modalName,false),_defineProperty(_respObject,\"loading\",false),_defineProperty(_respObject,\"loadChildTest\",false),_defineProperty(_respObject,\"showSample\",undefined),_defineProperty(_respObject,\"openModal\",false),_defineProperty(_respObject,\"selectedRecord\",{}),_defineProperty(_respObject,\"showConfirmAlert\",false),_defineProperty(_respObject,\"createTestConfirmMessage\",undefined),_respObject);inputParam.postParamList[0]['clearFilter']='no';inputParam.postParamList[1]['clearFilter']='no';inputParam.postParamList[2]['clearFilter']='yes';dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}).catch(function(error){if(error.response.status===500){dispatch({type:DEFAULT_RETURN,payload:{loading:false,createTestConfirmMessage:undefined}});toast.error(error.message);}else{if(error.response.data.NeedConfirmAlert){dispatch({type:DEFAULT_RETURN,payload:{showConfirmAlert:true,createTestConfirmMessage:error.response.data.rtn,createTestConfirmParam:{inputParam:inputParam,masterData:masterData,modalName:modalName},//[modalName]: false,\nloading:false,loadChildTest:true,showSample:undefined//openModal: false,\n//selectedRecord: {}\n}});}else{var _payload2;dispatch({type:DEFAULT_RETURN,payload:(_payload2={},_defineProperty(_payload2,modalName,false),_defineProperty(_payload2,\"loading\",false),_defineProperty(_payload2,\"loadChildTest\",false),_defineProperty(_payload2,\"showSample\",undefined),_defineProperty(_payload2,\"openModal\",false),_defineProperty(_payload2,\"selectedRecord\",{}),_defineProperty(_payload2,\"createTestConfirmMessage\",undefined),_payload2)});toast.info(error.response.data.rtn);}}});};};export function getEditRegistrationComboService(inputParam,columnList,selectedRecord1,childColumnList,comboComponents,withoutCombocomponent,editableComboList){return function(dispatch){dispatch(initRequest(true));var _inputParam=_objectSpread({},inputParam),userInfo=_inputParam.userInfo,operation=_inputParam.operation;var masterData=inputParam[\"masterData\"];var parentColumnList=[].concat(_toConsumableArray(columnList),_toConsumableArray(editableComboList));if(masterData[\"selectedSample\"].length>1||masterData[\"selectedSample\"].findIndex(function(x){return x[inputParam.primaryKeyName]===inputParam[\"mastertoedit\"][inputParam.primaryKeyName];})===-1){inputParam.editRegParam[\"getSampleChildDetail\"]=true;}masterData[\"selectedSample\"]=[];masterData[\"selectedSample\"].push(inputParam[\"mastertoedit\"]);var npreregno=inputParam.mastertoedit[inputParam.primaryKeyName];var urlArray=[];var timeZoneService=rsapi.post(\"timezone/getTimeZone\");// const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n//     parentcolumnlist: columnList,\n//     childcolumnlist: childColumnList,\n//     userinfo: userInfo\n// })\nvar selectedRegistration=rsapi.post(\"/registration/getEditRegistrationDetails\",_objectSpread(_objectSpread({},inputParam.editRegParam),{},{npreregno:npreregno,parentcolumnlist:parentColumnList,childcolumnlist:childColumnList,userinfo:userInfo,nallottedspeccode:inputParam.mastertoedit.nallottedspeccode||-1}));var dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:withoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userInfo});urlArray=[timeZoneService,selectedRegistration,dateService];Axios.all(urlArray).then(function(response){var selectedRecord=_objectSpread({},response[1].data[\"EditData\"]);selectedRecord=_objectSpread(_objectSpread({},selectedRecord),selectedRecord['jsondata']);// const recordToEdit = { ...response[2].data[\"SelectedRegistration\"][0] };\n//  const currentTime = rearrangeDateFormat(userInfo, response[6].data);\nvar timeZoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var timeZoneList=timeZoneMap.get(\"OptionList\");var defaultTimeZone={label:userInfo.stimezoneid,value:userInfo.ntimezonecode};//  const newcomboData = parentChildComboLoad(columnList, response[1].data,\n// selectedRecord, childColumnList, withoutCombocomponent)\nif(selectedRecord.ntransactionstatus===transactionStatus.CANCELLED||selectedRecord.ntransactionstatus===transactionStatus.REJECT){toast.info(intl.formatMessage({id:\"IDS_CANNOTEDITCANCELLEDSAMPLE\"}));// ALPD-3393\nif(inputParam.editRegParam[\"getSampleChildDetail\"]===true){masterData=sortData(_objectSpread(_objectSpread({},masterData),response[1].data[\"SampleChildDetail\"]));}dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterData:masterData}});}else{var languagetypeCode=undefined;var comboData=response[1].data;delete comboData['EditData'];var comboValues={};if(columnList.length>0){columnList.map(function(x){if(x.inputtype==='combo'){if(comboData[x.label]&&comboData[x.label].length>0)//&& comboData[x.label][0].hasOwnProperty(x.source) \n{if(comboData[x.label].length>0){if(comboData[x.label][0].label===undefined){var optionList=constructjsonOptionList(comboData[x.label]||[],x.valuemember,x.displaymember,false,false,true,undefined,x.source,x.isMultiLingual,languagetypeCode,x);comboData[x.label]=optionList.get(\"OptionList\");}else{comboData[x.label]=comboData[x.label];var _optionList=constructjsonOptionDefault(comboData[x.label]||[],x.valuemember,x.displaymember,false,false,true,undefined,x.source,x.isMultiLingual,languagetypeCode,x);}}else{comboData[x.label]=[];}//comboValues = childComboLoad(x, comboData, selectedRecord, \n//   childColumnList, withoutCombocomponent)\\\ncomboValues=childComboLoadForEdit(x,comboData,selectedRecord,childColumnList,withoutCombocomponent);}else{comboValues={\"comboData\":comboData};}}else{comboValues=_objectSpread({comboData:comboData},comboValues);}});}else{comboValues={\"comboData\":comboData};}if(editableComboList.length>0){editableComboList.map(function(x){if(x.inputtype==='combo'){if(comboData[x.label]&&comboData[x.label].length>0)//&& comboData[x.label][0].hasOwnProperty(x.source) \n{if(comboData[x.label].length>0){if(comboData[x.label][0].label===undefined){var optionList=constructjsonOptionList(comboData[x.label]||[],x.valuemember,x.displaymember,false,false,true,undefined,x.source,x.isMultiLingual,languagetypeCode,x);comboData[x.label]=optionList.get(\"OptionList\");}else{comboData[x.label]=comboData[x.label];var _optionList2=constructjsonOptionDefault(comboData[x.label]||[],x.valuemember,x.displaymember,false,false,true,undefined,x.source,x.isMultiLingual,languagetypeCode,x);}}else{comboData[x.label]=[];}comboValues={\"comboData\":comboData};}else{comboValues={\"comboData\":comboData};}}else{comboValues=_objectSpread({comboData:comboData},comboValues);}});}withoutCombocomponent.map(function(date){if(date.inputtype==='date'){selectedRecord[date.label]=selectedRecord[date.label]&&selectedRecord[date.label]!=='-'?rearrangeDateFormat(userInfo,selectedRecord[date.label]):\"\";if(date.nperiodcode){selectedRecord[date.label+\"value\"]=response[2].data[date.label]?new Date(response[2].data[date.label][\"datevalue\"]):null;}else{selectedRecord[date.label+\"value\"]=new Date();}if(date.hidebeforedate){selectedRecord[date.label+\"min\"]=selectedRecord[date.label+\"value\"];}if(date.hideafterdate){selectedRecord[date.label+\"max\"]=selectedRecord[date.label+\"value\"];}}});var _ref2=[],Specification=_ref2.Specification,AgaramTree=_ref2.AgaramTree,ActiveKey=_ref2.ActiveKey,FocusKey=_ref2.FocusKey,OpenNodes=_ref2.OpenNodes,specValue=_ref2.specValue;specValue=[{nallottedspeccode:selectedRecord.nallottedspeccode,sspecname:selectedRecord.sspecname,sversion:selectedRecord.sversion}];var selectedSpec={};Specification=constructOptionList(specValue||[],\"nallottedspeccode\",\"sspecname\",undefined,undefined,true).get(\"OptionList\");//AgaramTree = response[1].data[\"AgaramTree\"];\n// ActiveKey = response[1].data[\"FocusKey\"];\n//FocusKey = response[1].data[\"ActiveKey\"];\n//OpenNodes = response[1].data[\"OpenNodes\"];\n//Manufacturer = response.data[\"Manufacturer\"];\nselectedSpec[\"nallottedspeccode\"]=Specification.length>0?{\"value\":Specification[0].value,\"label\":Specification[0].label,\"item\":Specification[0].item}:\"\";selectedSpec[\"sversion\"]=Specification.length>0?Specification[0].item.sversion:\"\";selectedSpec[\"ntemplatemanipulationcode\"]=Specification.length>0?Specification[0].item.ntemplatemanipulationcode:-1;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),selectedSpec);if(inputParam.editRegParam[\"getSampleChildDetail\"]===true){masterData=sortData(_objectSpread(_objectSpread({},masterData),response[1].data[\"SampleChildDetail\"]));}dispatch({type:DEFAULT_RETURN,payload:{// AgaramTree,\n//FocusKey,\n// ActiveKey,\n//OpenNodes,\nselectedSpec:selectedSpec,Specification:Specification,// statustoEditDetail: response[2].data[\"ApprovalConfigRole\"] || {},\n// currentTime,\noperation:\"update\",screenName:inputParam.masterData.RealRegSubTypeValue.sregsubtypename,// PopUpLabel: popUpLabel,\ntimeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,selectedRecord:selectedRecord,openPortal:true,ncontrolCode:inputParam.editRegParam.ncontrolCode,loadPreregister:true,parentPopUpSize:\"xl\",loading:false,showSample:undefined,comboData:comboValues.comboData,childColumnList:childColumnList,comboComponents:comboComponents,withoutCombocomponent:withoutCombocomponent,columnList:columnList,masterData:masterData//  regRecordToEdit:recordToEdit\n}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(intl.formatMessage({id:error.response.data}));}});};}export function updateRegistration(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));var requestUrl='';if(inputParam.isFileupload){requestUrl=rsapi.post(\"/registration/updateRegistrationWithFile\",inputParam.formData);}else{requestUrl=rsapi.post(\"/registration/updateRegistration\",inputParam.inputData);}return requestUrl//   rsapi.post(\"/registration/updateRegistration\", inputParam.inputData)\n.then(function(response){if(response.data.rtn===\"Success\"){// sortData(response.data);\nreplaceUpdatedObject(response.data[\"RegistrationGetSample\"],masterData.RegistrationGetSample,\"npreregno\");replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],masterData.RegistrationGetSubSample,\"ntransactionsamplecode\");replaceUpdatedObject(response.data[\"RegistrationGetTest\"],masterData.RegistrationGetTest,\"ntransactiontestcode\");//  let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n//let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\nmasterData=_objectSpread(_objectSpread({},masterData),{},{selectedSample:response.data[\"selectedSample\"],// selectedSubSample: masterData[\"selectedSubSample\"],\n//selectedTest:masterData[\"selectedTest\"],\n// RegistrationGetTest,\n// RegistrationGetSubSample,\nRegistrationParameter:masterData[\"RegistrationParameter\"]});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,openPortal:false,loading:false,showConfirmAlert:false,regDateEditConfirmMessage:undefined,loadEsign:false,openModal:false,loadPreregister:false,selectedRecord:{},showSample:undefined}});// let inputData = {\n//     masterData,\n//     selectedTest: masterData.selectedTest,\n//     ntransactiontestcode: masterData.selectedTest ?\n//         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\n//     npreregno: masterData.selectedSample ?\n//         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\n//     userinfo: inputParam.inputData.userinfo,\n//     activeTestTab : masterData.activeTestTab,\n//     screenName: masterData.activeTestTab,\n//     resultDataState: inputParam.resultDataState,\n//     testCommentDataState: inputParam.testCommentDataState,\n// }\n// dispatch(getTestChildTabDetail(inputData, true))\n}else{toast.info(response.data.rtn);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}}).catch(function(error){if(error.response.status===500){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}else if(error.response.status===302){dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,regEditParam:inputParam,showConfirmAlert:true,parentPopUpSize:\"xl\",regDateEditConfirmMessage:error.response.data,showSample:undefined}});}else{toast.info(error.response.data);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showSample:undefined}});}});};}export function cancelTestAction(inputParam,LoginProps){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/cancelTest\",inputParam.inputData).then(function(response){// replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\nvar masterData=_objectSpread(_objectSpread({},LoginProps),{},{selectedTest:response.data[\"selectedTest\"],// RegistrationGetTest:response.data[\"RegistrationGetTest\"],\nRegistrationGetTest:replaceUpdatedObject(response.data[\"selectedTest\"],LoginProps.RegistrationGetTest,\"ntransactiontestcode\")//  RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, LoginProps.RegistrationGetSample, 'npreregno')\n});var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},{openModal:false,loadEsign:false,showConfirmAlert:false,selectedRecord:{},loading:false,loadPreregister:false,showSample:undefined});inputParam.postParamList[0]['clearFilter']='no';dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}export function cancelSampleAction(inputParam,LoginProps){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/cancelSample\",inputParam.inputData).then(function(response){// if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n//     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n// }\nreplaceUpdatedObject(response.data[\"RegistrationGetSample\"],LoginProps.RegistrationGetSample,\"npreregno\");replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],LoginProps.RegistrationGetSubSample,\"ntransactionsamplecode\");replaceUpdatedObject(response.data[\"RegistrationGetTest\"],LoginProps.RegistrationGetTest,\"ntransactiontestcode\");var masterData=_objectSpread(_objectSpread({},LoginProps),{},{selectedSample:replaceUpdatedObject(response.data[\"selectedSample\"],LoginProps.selectedSample,\"npreregno\"),selectedSubSample:replaceUpdatedObject(response.data[\"selectedSubSample\"],LoginProps.selectedSubSample,\"ntransactionsamplecode\"),selectedTest:replaceUpdatedObject(response.data[\"selectedTest\"],LoginProps.selectedTest,\"ntransactiontestcode\")});var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},{loading:false,loadEsign:false,openModal:false,showSample:undefined});dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}export function addsubSampleRegistration(masterData,userinfo,regcolumnList,selectRecord,regchildColumnList,regSubSamplecomboComponents,regSubSamplewithoutCombocomponent,Map,ncontrolcode,specBasedComponent,specBasedTestPackage){return function(dispatch){var urlArray=[];var timeZoneService=rsapi.post(\"timezone/getTimeZone\");urlArray[0]=timeZoneService;var actualService=rsapi.post(\"dynamicpreregdesign/getComboValues\",{parentcolumnlist:regcolumnList.filter(function(x){return x.inputtype!=='backendsearchfilter'&&x.inputtype!=='frontendsearchfilter'&&x.readonly!==true;}),childcolumnlist:regchildColumnList,userinfo:userinfo});urlArray[1]=actualService;if(specBasedComponent){var ComponentTestBySpec=rsapi.post(\"/registration/getComponentBySpec\",_objectSpread(_objectSpread({},Map),{},{specBasedComponent:specBasedComponent,userinfo:userinfo}));urlArray[2]=ComponentTestBySpec;}else{var TestGet=rsapi.post(\"/registration/getTestfromDB\",{nallottedspeccode:Map[\"nallottedspeccode\"],slno:1,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:true,nneedsubsample:Map[\"nneedsubsample\"]});urlArray[2]=TestGet;var TestPackageGet=rsapi.post(\"/registration/getTestfromTestPackage\",{nallottedspeccode:Map[\"nallottedspeccode\"],specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage});urlArray[5]=TestPackageGet;var TestSectionGet=rsapi.post(\"/registration/getTestfromSection\",{nallottedspeccode:Map[\"nallottedspeccode\"],specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage});urlArray[6]=TestSectionGet;}var currentDate=rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:userinfo});urlArray[3]=currentDate;var dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:regSubSamplewithoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userinfo});urlArray[4]=dateService;dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var timeZoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var timeZoneList=timeZoneMap.get(\"OptionList\");var defaultTimeZone={label:userinfo.stimezoneid,value:userinfo.ntimezonecode};var newcomboData=parentChildComboLoad(regcolumnList.filter(function(x){return x.inputtype!=='backendsearchfilter'&&x.inputtype!=='frontendsearchfilter'&&x.readonly!==true;}),response[1].data,selectRecord,regchildColumnList,regSubSamplewithoutCombocomponent,undefined,userinfo.slanguagetypecode,userinfo);var TestCombined=[];var lstComponent=[];var PackageData=[];var TestSectionData=[];var selectedRecord1=newcomboData.selectedRecord;if(specBasedComponent){var lstComponentMap=constructOptionList(response[2].data.lstComponent||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);lstComponent=lstComponentMap.get(\"OptionList\");if(lstComponent.length>0){selectedRecord1['ncomponentcode']=_objectSpread({},lstComponent[0]);selectedRecord1[\"Sample Name\"]=selectedRecord1['ncomponentcode'].label;selectedRecord1[\"nspecsampletypecode\"]=selectedRecord1['ncomponentcode'].item.nspecsampletypecode;selectedRecord1[\"nneedsubsample\"]=Map.nneedsubsample;}}else{//if (specBasedTestPackage) {\nvar PackageDataMap=constructOptionList(response[5].data.TestPackage||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");var TestSectionDataMap=constructOptionList(response[6].data.TestSection||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,true);TestSectionData=TestSectionDataMap.get(\"OptionList\");// if (PackageData.length === 0) {\n//     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \n// } \n// }\n// else {\nTestCombined=response[2].data;// }\n}var comboData1=newcomboData.comboData;regSubSamplewithoutCombocomponent.map(function(componentrow){if(componentrow.inputtype===\"date\"){if(componentrow.loadcurrentdate){selectedRecord1[componentrow.label]=componentrow.loadcurrentdate?rearrangeDateFormat(userinfo,response[3].data):\"\";selectedRecord1[componentrow.label+\"value\"]=selectedRecord1[componentrow.label];}else if(componentrow.nperiodcode){selectedRecord1[componentrow.label+\"value\"]=response[4].data[componentrow.label]?new Date(response[4].data[componentrow.label][\"datevalue\"]):null;if(componentrow.loadselecteddate){selectedRecord1[componentrow.label]=response[4].data[componentrow.label]?new Date(response[4].data[componentrow.label][\"datevalue\"]):null;}//    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n//    new Date(response[2].data[componentrow.label]):null;\n}else{selectedRecord1[componentrow.label+\"value\"]=new Date();}if(componentrow.hidebeforedate){selectedRecord1[componentrow.label+\"min\"]=selectedRecord1[componentrow.label+\"value\"];}if(componentrow.hideafterdate){selectedRecord1[componentrow.label+\"max\"]=selectedRecord1[componentrow.label+\"value\"];}}else if(componentrow.inputtype===\"radio\"||componentrow.inputtype===\"checkbox\"||componentrow.inputtype===\"predefineddropdown\"){if(componentrow['radiodefaultvalue']){if(componentrow.inputtype===\"checkbox\"){var val='';componentrow.radiodefaultvalue&&componentrow.radiodefaultvalue.length>0&&componentrow.radiodefaultvalue.map(function(x,i){val=val+(i===componentrow.radiodefaultvalue.length-1?x.label:x.label+',');});selectedRecord1[componentrow.label]=val;}else if(componentrow.inputtype===\"predefineddropdown\"){selectedRecord1[componentrow.label]=componentrow.radiodefaultvalue?componentrow.radiodefaultvalue:\"\";}else{selectedRecord1[componentrow.label]=componentrow.radiodefaultvalue?componentrow.radiodefaultvalue.label:\"\";}}else{if(componentrow.inputtype===\"radio\"){selectedRecord1[componentrow.label]=componentrow.radioOptions?componentrow.radioOptions.tags[0].text:\"\";}}}});var inputParam={screenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),showSaveContinue:false,parentPopUpSize:\"lg\",loading:false,lstComponent:lstComponent,openModal:true,loadPrinter:false,operation:\"create\",loadRegSubSample:true,selectedRecord:selectedRecord1,regSubSamplecomboData:comboData1,regSubSamplecomboComponents:regSubSamplecomboComponents,regSubSamplewithoutCombocomponent:regSubSamplewithoutCombocomponent,TestCombined:TestCombined,regparentSubSampleColumnList:regcolumnList,regchildSubSampleColumnList:regchildColumnList,ncontrolCode:ncontrolcode,timeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,masterData:masterData,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,TestPackage:PackageData,//ALPD-624\ntestskip:0,subsampleskip:0,TestSection:TestSectionData,AllTest:TestCombined,AllSection:TestSectionData};if(specBasedComponent){dispatch(componentTest(selectedRecord1,true,specBasedComponent,[],specBasedTestPackage,true,inputParam));}else{dispatch({type:DEFAULT_RETURN,payload:_objectSpread({},inputParam)});}}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function saveSubSample(inputParam){return function(dispatch){dispatch(initRequest(true));var requestUrl='';if(inputParam.isFileupload){requestUrl=rsapi.post(\"/registration/createSubSampleWithFile\",inputParam.formData);}else{requestUrl=rsapi.post(\"/registration/createSubSample\",inputParam.inputData);}return requestUrl//  rsapi.post(\"/registration/createSubSample\", inputParam.inputData)\n.then(function(response){// let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], inputParam.inputData.masterData.RegistrationGetSample);\n// let selectedSample = response.data[\"selectedSample\"];\nvar RegistrationGetSubSample=updatedObjectWithNewElement(inputParam.inputData.masterData.RegistrationGetSubSample,response.data[\"selectedSubSample\"]);var RegistrationGetTest=response.data[\"selectedTest\"];var selectedSubSample=response.data[\"selectedSubSample\"];// RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\nRegistrationGetTest=sortData(RegistrationGetTest,\"npreregno\",\"desc\");var selectedTest=RegistrationGetTest.length>0?[RegistrationGetTest[0]]:[];var RegistrationParameter=response.data[\"RegistrationParameter\"];RegistrationParameter=RegistrationParameter?getSameRecordFromTwoArrays(RegistrationParameter,selectedTest,'ntransactiontestcode'):RegistrationParameter;var RegistrationGetSample=replaceUpdatedObject(response.data[\"selectedSample\"],inputParam.inputData.masterData.RegistrationGetSample,'npreregno');var selectedSample=response.data[\"selectedSample\"];var masterData=_objectSpread({},inputParam.inputData.masterData);masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{selectedSubSample:selectedSubSample,selectedTest:selectedTest,RegistrationGetSubSample:RegistrationGetSubSample,RegistrationGetTest:RegistrationGetTest,RegistrationParameter:RegistrationParameter,selectedSample:selectedSample,RegistrationGetSample:RegistrationGetSample});var respObject={masterData:masterData,openModal:false,loadEsign:false,loading:false,showSample:undefined,selectedRecord:{},loadRegSubSample:false,showConfirmAlert:false,subSampleConfirmMessage:undefined};inputParam.postParamList[0]['clearFilter']='no';inputParam.postParamList[1]['clearFilter']='yes';inputParam.postParamList[2]['clearFilter']='yes';dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));//    dispatch({\n//     type: DEFAULT_RETURN,\n//     payload: {\n//         masterData,\n//         openModal: false,\n//         loadEsign: false,\n//         loading: false,\n//         showSample: undefined,\n//         selectedRecord: {},\n//         loadRegSubSample:false\n//     }\n// });\n}).catch(function(error){// console.log(error);\n// toast.error(error.message);\n// dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\nif(error.response.status===500){dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false,subSampleConfirmMessage:undefined}});toast.error(error.message);}else{if(error.response.data.NeedConfirmAlert){dispatch({type:DEFAULT_RETURN,payload:{showConfirmAlert:true,subSampleConfirmMessage:error.response.data.rtn,subSampleConfirmParam:{inputParam:inputParam},loading:false}});}else if(error.response.data.rtn){toast.warn(intl.formatMessage({id:error.response.data.rtn}));dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}else{toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false,subSampleConfirmMessage:undefined}});}}});};}export function getEditSubSampleComboService(inputParam,columnList,selectedRecord1,childColumnList,comboComponents,withoutCombocomponent,specBasedComponent){return function(dispatch){var _inputParam2=_objectSpread({},inputParam),userInfo=_inputParam2.userInfo,operation=_inputParam2.operation,masterData=_inputParam2.masterData;if(masterData[\"selectedSubSample\"].length>1||masterData[\"selectedSubSample\"].findIndex(function(x){return x[inputParam.primaryKeyName]===inputParam[\"mastertoedit\"][inputParam.primaryKeyName];})===-1){inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"]=true;}masterData[\"selectedSubSample\"]=[];masterData[\"selectedSubSample\"].push(inputParam[\"mastertoedit\"]);inputParam.editSubSampleRegParam[\"npreregno\"]=inputParam[\"mastertoedit\"][\"npreregno\"];//inputParam.editSubSampleRegParam[\"checkBoxOperation\"] = 3;\ninputParam.editSubSampleRegParam[\"checkBoxOperation\"]=checkBoxOperation.SINGLESELECT;inputParam.editSubSampleRegParam[\"nfilterstatus\"]=inputParam[\"mastertoedit\"][\"ntransactionstatus\"];inputParam.editSubSampleRegParam[\"napprovalconfigcode\"]=inputParam[\"mastertoedit\"][\"napprovalconfigcode\"];//inputParam.editSubSampleRegParam[\"withoutgetparameter\"] = 3;\nvar ntransactionsamplecode=inputParam.mastertoedit[inputParam.primaryKeyName];if(ntransactionsamplecode===undefined){toast.info(intl.formattedMessage({id:\"IDS_SELECTVALIDSUBSAMPLE\"}));}else{var urlArray=[];var timeZoneService=rsapi.post(\"timezone/getTimeZone\");// const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n//     parentcolumnlist: columnList,\n//     childcolumnlist: childColumnList,\n//     userinfo: userInfo\n// })\nvar selectedRegistration=rsapi.post(\"/registration/getEditRegistrationSubSampleDetails\",_objectSpread(_objectSpread({},inputParam.editSubSampleRegParam),{},{ntransactionsamplecode:ntransactionsamplecode,parentcolumnlist:columnList,childcolumnlist:childColumnList,userinfo:userInfo}));var dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:withoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userInfo});urlArray=[timeZoneService,selectedRegistration,dateService];// if(specBasedComponent){\n//     const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\n//         ...Map,\n//         specBasedComponent: specBasedComponent\n//     })\n//     urlArray.push(ComponentTestBySpec) \n// }\ndispatch(initRequest(true));Axios.all(urlArray).then(function(response){var _payload3;var selectedRecord=_objectSpread({},response[1].data[\"EditData\"]);selectedRecord=_objectSpread(_objectSpread({},selectedRecord),selectedRecord['jsondata']);var timeZoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var timeZoneList=timeZoneMap.get(\"OptionList\");var defaultTimeZone={label:userInfo.stimezoneid,value:userInfo.ntimezonecode};// if (selectedRecord.ntransactionstatus !== transactionStatus.PREREGISTER) {\n//     toast.info(intl.formatMessage({ id: \"IDS_SELECTPREREGISTERSUBSAMPLETOEDIT\" }));\n//     dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\n// }\n//else {\n//               let lstComponent=[]\nif(specBasedComponent){selectedRecord[\"ncomponentcode\"]={label:selectedRecord[\"scomponentname\"],value:selectedRecord[\"ncomponentcode\"]};}var languagetypeCode=undefined;var comboData=response[1].data;delete comboData['EditData'];var comboValues={};if(columnList.length>0){columnList.map(function(x){if(x.inputtype==='combo'){if(comboData[x.label]&&comboData[x.label].length>0)//&& comboData[x.label][0].hasOwnProperty(x.source) \n{if(comboData[x.label].length>0){if(comboData[x.label][0].label===undefined){var optionList=constructjsonOptionList(comboData[x.label]||[],x.valuemember,x.displaymember,false,false,true,undefined,x.source,x.isMultiLingual,languagetypeCode,x);comboData[x.label]=optionList.get(\"OptionList\");}else{comboData[x.label]=comboData[x.label];var _optionList3=constructjsonOptionDefault(comboData[x.label]||[],x.valuemember,x.displaymember,false,false,true,undefined,x.source,x.isMultiLingual,languagetypeCode,x);}}else{comboData[x.label]=[];}//comboValues = childComboLoad(x, comboData, selectedRecord, \n//   childColumnList, withoutCombocomponent)\\\ncomboValues=childComboLoadForEdit(x,comboData,selectedRecord,childColumnList,withoutCombocomponent);}else{comboValues={\"comboData\":comboData};}}else{comboValues=_objectSpread({comboData:comboData},comboValues);}});}else{comboValues={\"comboData\":comboData};}// withoutCombocomponent.map(date => {\n//     if (date.inputtype === 'date')\n//         selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\n//             rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\";\n// })\nwithoutCombocomponent.map(function(date){if(date.inputtype==='date'){selectedRecord[date.label]=selectedRecord[date.label]&&selectedRecord[date.label]!=='-'?rearrangeDateFormat(userInfo,selectedRecord[date.label]):\"\";if(date.nperiodcode){selectedRecord[date.label+\"value\"]=response[2].data[date.label]?new Date(response[2].data[date.label][\"datevalue\"]):null;}else{selectedRecord[date.label+\"value\"]=new Date();}if(date.hidebeforedate){selectedRecord[date.label+\"min\"]=selectedRecord[date.label+\"value\"];}if(date.hideafterdate){selectedRecord[date.label+\"max\"]=selectedRecord[date.label+\"value\"];}}});selectedRecord=_objectSpread({},selectedRecord);if(inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"]===true){masterData=_objectSpread(_objectSpread({},masterData),response[1].data[\"SubSampleChildDetail\"]);}dispatch({type:DEFAULT_RETURN,payload:(_payload3={operation:operation,timeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,selectedRecord:selectedRecord,openModal:true,ncontrolCode:inputParam.editSubSampleRegParam.ncontrolCode,parentPopUpSize:\"lg\",loading:false,showSample:undefined,regSubSamplecomboData:comboValues.comboData,loadRegSubSample:true,screenName:\"IDS_SUBSAMPLE\"},_defineProperty(_payload3,\"operation\",\"update\"),_defineProperty(_payload3,\"specBasedComponent\",specBasedComponent),_defineProperty(_payload3,\"masterData\",masterData),_defineProperty(_payload3,\"withoutCombocomponent\",withoutCombocomponent),_payload3)});// }\n}).catch(function(error){//console.log(\"error:\", error);\ndispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(intl.formatMessage({id:error.response.data}));}});}};}export function onUpdateSubSampleRegistration(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));var requestUrl='';if(inputParam.isFileupload){requestUrl=rsapi.post(\"/registration/updateRegistrationSubSampleWithFile\",inputParam.formData);}else{requestUrl=rsapi.post(\"/registration/updateRegistrationSubSample\",inputParam.inputData);}return requestUrl// rsapi.post(\"/registration/updateRegistrationSubSample\", inputParam.inputData)\n.then(function(response){sortData(response.data);replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],masterData.RegistrationGetSubSample,\"ntransactionsamplecode\");//replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\n// replaceUpdatedObject(response.data[\"selectedTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\n//  let RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];\nvar RegistrationGetTest=response.data[\"RegistrationGetTest\"];masterData=_objectSpread(_objectSpread({},masterData),{},{// selectedSample: response.data[\"selectedSample\"],\nselectedSubSample:response.data[\"selectedSubSample\"],selectedTest:response.data[\"selectedTest\"],RegistrationGetTest:RegistrationGetTest,// RegistrationGetSubSample,\nRegistrationParameter:response.data[\"RegistrationParameter\"]});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,openModal:false,loading:false,showConfirmAlert:false,regDateEditConfirmMessage:undefined,loadEsign:false,loadRegSubSample:false,selectedRecord:{},showSample:undefined,screenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"})}});// let inputData = {\n//     masterData,\n//     selectedTest: masterData.selectedTest,\n//     ntransactiontestcode: masterData.selectedTest ?\n//         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\n//     npreregno: masterData.selectedSample ?\n//         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\n//     userinfo: inputParam.inputData.userinfo,\n//     activeTestTab : masterData.activeTestTab,\n//     screenName: masterData.activeTestTab,\n//     resultDataState: inputParam.resultDataState,\n//     testCommentDataState: inputParam.testCommentDataState,\n// }\n// dispatch(getTestChildTabDetail(inputData, true))\n}).catch(function(error){if(error.response.status===500){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}else if(error.response.status===302){dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,regEditParam:inputParam,showConfirmAlert:true,parentPopUpSize:\"xl\",regDateEditConfirmMessage:error.response.data,showSample:undefined}});}else{toast.info(error.response.data);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showSample:undefined}});}});};}export function cancelSubSampleAction(inputParam,LoginProps){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/cancelSubSample\",inputParam.inputData).then(function(response){if(inputParam.inputData.nsampletypecode===SampleType.CLINICALTYPE&&response.data.isMapped){replaceUpdatedObject(response.data[\"RegistrationGetSample\"],LoginProps.RegistrationGetSample,\"npreregno\");}replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],LoginProps.RegistrationGetSubSample,\"ntransactionsamplecode\");replaceUpdatedObject(response.data[\"RegistrationGetTest\"],LoginProps.RegistrationGetTest,\"ntransactiontestcode\");var masterData=_objectSpread(_objectSpread({},LoginProps),{},{//selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\nselectedSubSample:replaceUpdatedObject(response.data[\"selectedSubSample\"],LoginProps.selectedSubSample,\"ntransactionsamplecode\"),selectedTest:replaceUpdatedObject(response.data[\"selectedTest\"],LoginProps.selectedTest,\"ntransactiontestcode\")});if(inputParam.inputData.nsampletypecode===SampleType.CLINICALTYPE&&response.data.isMapped){masterData=_objectSpread(_objectSpread({},masterData),{},{selectedSample:replaceUpdatedObject(response.data[\"selectedSample\"],LoginProps.selectedSample,\"npreregno\")});}var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},{loading:false,loadEsign:false,openModal:false,showSample:undefined});dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}export function preregRecordToQuarantine(inputParam,LoginProps){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/quarantineRegistration\",inputParam.inputData).then(function(response){// replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n// replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n// replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\nreplaceUpdatedObject(response.data[\"RegistrationGetSample\"],LoginProps.RegistrationGetSample,\"npreregno\");replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],LoginProps.RegistrationGetSubSample,\"ntransactionsamplecode\");replaceUpdatedObject(response.data[\"RegistrationGetTest\"],LoginProps.RegistrationGetTest,\"ntransactiontestcode\");delete response.data[\"RegistrationGetSample\"];delete response.data[\"RegistrationGetSubSample\"];delete response.data[\"RegistrationGetTest\"];var masterData=_objectSpread(_objectSpread({},LoginProps),{},{selectedSample:replaceUpdatedObject(response.data[\"selectedSample\"],LoginProps.selectedSample,\"npreregno\"),selectedSubSample:replaceUpdatedObject(response.data[\"selectedSubSample\"],LoginProps.selectedSubSample,\"ntransactionsamplecode\"),selectedTest:replaceUpdatedObject(response.data[\"selectedTest\"],LoginProps.selectedTest,\"ntransactiontestcode\")});var respObject={masterData:masterData,loading:false,loadEsign:false,openModal:false,showSample:undefined};dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}export function getTestChildTabDetailRegistration(inputData,isServiceRequired){return function(dispatch){if(inputData.ntransactiontestcode===\"\"){inputData.ntransactiontestcode=\"0\";}if(inputData.ntransactiontestcode&&inputData.ntransactiontestcode.length>0){var inputParamData={ntransactiontestcode:inputData.ntransactiontestcode,npreregno:inputData.npreregno,userinfo:inputData.userinfo,ntransactionsamplecode:inputData.ntransactionsamplecode?inputData.ntransactionsamplecode:inputData.selectedSubSample&&inputData.selectedSubSample.map(function(item){return item.ntransactionsamplecode;}).join(\",\"),OrderCodeData:inputData.masterData&&inputData.masterData.selectedSample&&inputData.masterData.selectedSample.length>0?inputData.masterData.selectedSample.map(function(item){return item.hasOwnProperty(\"OrderCodeData\")?item.OrderCodeData:-1;}).join(\",\"):null};var url=null;var testtake=inputData.testtake;var activeName=\"\";var dataStateName=\"\";switch(inputData.activeTestTab){case\"IDS_RESULTS\":url=\"approval/getapprovalparameter\";activeName=\"ApprovalParameter\";dataStateName=\"resultDataState\";break;case\"IDS_PARAMETERRESULTS\":url=\"registration/getregistrationparameter\";activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_INSTRUMENT\":url=\"resultentrybysample/getResultUsedInstrument\";activeName=\"ResultUsedInstrument\";dataStateName=\"instrumentDataState\";break;case\"IDS_MATERIAL\":url=\"resultentrybysample/getResultUsedMaterial\";break;case\"IDS_TASK\":url=\"resultentrybysample/getResultUsedTask\";activeName=\"ResultUsedTasks\";dataStateName=\"taskDataState\";break;case\"IDS_TESTATTACHMENTS\":url=\"attachment/getTestAttachment\";activeName=\"RegistrationTestAttachment\";break;case\"IDS_TESTCOMMENTS\":url=\"comments/getTestComment\";activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTHISTORY\":url=\"history/getTestHistory\";activeName=\"RegistrationTestHistory\";dataStateName=\"registrationTestHistoryDataState\";break;case\"IDS_DOCUMENTS\":url=\"approval/getapprovalparameter\";break;case\"IDS_RESULTCHANGEHISTORY\":url=\"approval/getApprovalResultChangeHistory\";activeName=\"ApprovalResultChangeHistory\";dataStateName=\"resultChangeDataState\";break;case\"IDS_TESTAPPROVALHISTORY\":url=\"approval/getApprovalHistory\";activeName=\"ApprovalHistory\";dataStateName=\"historyDataState\";break;case\"IDS_SAMPLEATTACHMENTS\":url=\"attachment/getSampleAttachment\";break;case\"IDS_OUTSOURCEDETAILS\":url=\"registration/getOutsourceDetails\";break;case\"IDS_EXTERNALORDERREPORTS\":url=\"registration/getExternalOrderAttachment\";break;case\"IDS_TESTHISTORY\":url=\"history/getTestHistory\";break;default:url=\"approval/getapprovalparameter\";activeName=\"ApprovalParameter\";dataStateName=\"resultDataState\";break;}if(url!==null){dispatch(initRequest(true));if(isServiceRequired){rsapi.post(url,inputParamData).then(function(response){var skipInfo={};var responseData=_objectSpread(_objectSpread({},response.data),{},{selectedSample:inputData.selectedSample||inputData.masterData.selectedSample,selectedTest:inputData.selectedTest});//responseData = sortData(responseData)\n// fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\",inputData.removeElementFromArray);\nfillRecordBasedOnCheckBoxSelection(inputData.masterData,responseData,inputData.childTabsKey,inputData.checkBoxOperation,\"ntransactionsamplecode\",inputData.removeElementFromArray);var masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:inputData.selectedSample||inputData.masterData.selectedSample,selectedTest:inputData.selectedTest,selectedPreregno:inputData.npreregno,selectedSampleCode:inputData.ntransactionsamplecode,selectedTestCode:inputData.ntransactiontestcode,activeTabIndex:inputData.activeTabIndex,activeTabId:inputData.activeTabId});if(inputData[dataStateName]&&masterData[activeName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined}));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:masterData,activeTabIndex:inputData.activeTabIndex,activeTabId:inputData.activeTabId,loading:false,showFilter:false,activeTestTab:inputData.activeTestTab,screenName:inputData.screenName,testtake:testtake,testskip:undefined},skipInfo)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});}else{fillRecordBasedOnCheckBoxSelection(inputData.masterData,inputData.selectedTest,inputData.childTabsKey,inputData.checkBoxOperation,\"ntransactiontestcode\",inputData.removeElementFromArray);var skipInfo={};var masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedTest:inputData.selectedTest,selectedPreregno:inputData.npreregno,selectedSampleCode:inputData.ntransactionsamplecode,selectedTestCode:inputData.ntransactiontestcode});if(inputData[dataStateName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined}));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:masterData,loading:false,showFilter:false,activeTestTab:inputData.activeTestTab,screenName:inputData.screenName,testtake:testtake,testskip:undefined},skipInfo)});}}else{dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread({},inputData.masterData),loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab}});}}else{var _inputData$masterData=inputData.masterData,ApprovalParameter=_inputData$masterData.ApprovalParameter,ResultUsedInstrument=_inputData$masterData.ResultUsedInstrument,ResultUsedTasks=_inputData$masterData.ResultUsedTasks,RegistrationTestAttachment=_inputData$masterData.RegistrationTestAttachment,ApprovalResultChangeHistory=_inputData$masterData.ApprovalResultChangeHistory,RegistrationTestComment=_inputData$masterData.RegistrationTestComment,ApprovalHistory=_inputData$masterData.ApprovalHistory,RegistrationTestHistory=_inputData$masterData.RegistrationTestHistory;switch(inputData.activeTestTab){case\"IDS_RESULTS\":ApprovalParameter=[];break;case\"IDS_INSTRUMENT\":ResultUsedInstrument=[];break;case\"IDS_TASK\":ResultUsedTasks=[];break;case\"IDS_TESTATTACHMENTS\":RegistrationTestAttachment=[];break;case\"IDS_RESULTCHANGEHISTORY\":ApprovalResultChangeHistory=[];break;case\"IDS_TESTCOMMENTS\":RegistrationTestComment=[];break;case\"IDS_APPROVALHISTORY\":ApprovalHistory=[];break;case\"IDS_TESTHISTORY\":RegistrationTestHistory=[];break;default:ApprovalParameter=[];break;}dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),{},{selectedTest:[],ApprovalParameter:ApprovalParameter,ResultUsedInstrument:ResultUsedInstrument,ResultUsedTasks:ResultUsedTasks,RegistrationTestAttachment:RegistrationTestAttachment,ApprovalResultChangeHistory:ApprovalResultChangeHistory,RegistrationTestComment:RegistrationTestComment,ApprovalHistory:ApprovalHistory,RegistrationTestHistory:RegistrationTestHistory}),loading:false,activeTabIndex:inputData.activeTabIndex,activeTabId:inputData.activeTabId}});}};}export var toTimestamp=function toTimestamp(strDate){// const dt = new Date(strDate).getTime();\n// return dt / 1000;\nvar dt=strDate.getTime();return dt;};export function getDynamicFilter(inputParam){if(inputParam.component.inputtype==='frontendsearchfilter'){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilter\",_objectSpread(_objectSpread({},inputParam.component),{},{userinfo:inputParam.userinfo})).then(function(response){var source=inputParam.component.source;var languageTypeCode=inputParam.userinfo.slanguagetypecode;var lstData=response.data[inputParam.component.label];// const responseparam={}\nvar gridColumns=[];var fields=[];var datefileds=[];var multilingual=[];inputParam.component.filterfields.map(function(item){fields.push(filterObject(item,languageTypeCode,response.data,inputParam.component));if(item.ismultilingual){multilingual.push(item.columnname);}if(item.filterinputtype===\"date\"){datefileds.push(item.columnname);}if(item.filterinputtype!=='predefinednumeric'){gridColumns.push(creategridColumns(item,languageTypeCode));}});var optionList=lstData.map(function(item){var jsondata=item[source]?item[source].value?JSON.parse(item[source].value):item.jsondata:item.jsondata;datefileds.map(function(x){jsondata[x+\"timestamp\"]=toTimestamp(rearrangeDateFormatforKendoDataTool(inputParam.userinfo,jsondata[x]));});multilingual.map(function(mul){jsondata[mul]=jsondata[mul][languageTypeCode]||jsondata[mul]['en-US'];});return jsondata;});var map={};if(inputParam.type==='design'){map=_objectSpread(_objectSpread({},map),{},{showFilter:true,selectedComponentpath:inputParam.selectedComponentpath});}else{map=_objectSpread(_objectSpread({},map),{},{loadCustomSearchFilter:true});}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({lstPatient:optionList,gridColumns:gridColumns,fields:fields,//  loadCustomSearchFilter: true\nloading:false,screenName:inputParam.component.displayname[languageTypeCode],seletedFilterComponent:inputParam.component,kendoSkip:0,kendoTake:5,kendoFilter:inputParam.component.kendoFilter||{logic:\"and\",filters:[]}},map)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}else if(inputParam.component.inputtype===\"backendsearchfilter\"){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilterpredefined\",_objectSpread(_objectSpread({},inputParam.component),{},{userinfo:inputParam.userinfo})).then(function(response){var languageTypeCode=inputParam.userinfo.slanguagetypecode;var _filterObjectForReact=filterObjectForReactAwesomeFilter(inputParam.component.filterfields,languageTypeCode,response.data,inputParam.component),fields=_filterObjectForReact.fields,gridColumns=_filterObjectForReact.gridColumns;var map={};var awesomeTree=inputParam.component.awesomeTree?checkTree(loadTree(inputParam.component.awesomeTree),inputParam.component.awesomeConfig):undefined;if(inputParam.component.awesomeTree&&inputParam.component.filterquery&&inputParam.component.filterquery!==''){map={filterquery:inputParam.component.filterquery};if(inputParam.type==='design'){map=_objectSpread(_objectSpread({},map),{},{filterquery:inputParam.component.filterquery,selectedFieldRecord:_objectSpread(_objectSpread({},inputParam.component),{},{awesomeTree:awesomeTree})});}}else{map={filterquery:''};if(inputParam.type==='design'){map=_objectSpread(_objectSpread({},map),{},{filterquery:inputParam.component.filterquery,selectedFieldRecord:_objectSpread(_objectSpread({},inputParam.component),{},{awesomeTree:awesomeTree})});}}if(inputParam.type==='design'){map=_objectSpread(_objectSpread({},map),{},{showFilter:true,selectedComponentpath:inputParam.selectedComponentpath});}else{map=_objectSpread(_objectSpread({},map),{},{loadCustomSearchFilter:true});}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({lstPatient:[],gridColumns:gridColumns,fields:fields,// loadCustomSearchFilter: true\nloading:false,screenName:inputParam.component.displayname[languageTypeCode],seletedFilterComponent:inputParam.component,kendoSkip:0,kendoTake:5,awesomeTree:awesomeTree,onExecute:true},map)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}}var datapredef={};var CustomFilter=function CustomFilter(props){var filter=props.filter,_props$data=props.data,data=_props$data===void 0?[]:_props$data,defaultItem=props.defaultItem;var onChange=function onChange(event){props.onFilterChange.call(undefined,{nextFilter:_objectSpread(_objectSpread({},props.filter),{},{value:event.target.value.value})});};return/*#__PURE__*/React.createElement(ComboBox,{onChange:onChange,data:filter.field?datapredef[filter.field]:[],textField:\"text\"});};export function creategridColumns(item,languageTypeCode){var obj={};if(item.filterinputtype!=='predefinednumeric'){return{field:item.columnname,title:item.displayname[languageTypeCode],width:\"250px\"};}}export function filterObjectForReactAwesomeFilter(filterFields,languageTypeCode,resposedata,component){var obj={};obj['fields']={};obj['gridColumns']=[];filterFields.map(function(item){if(item.filterinputtype==='predefinednumeric'||item.filterinputtype==='predefinedtext'){var optionList=resposedata[item.predefinedtablename].map(function(data){var jsondata=data[item.predefinedtablename]?data[item.predefinedtablename].value?JSON.parse(data[item.predefinedtablename].value):data.jsondata:data.jsondata;jsondata['title']=item.predefinedismultilingual?jsondata[item.predefineddisplaymember][languageTypeCode]||jsondata[item.predefineddisplaymember]['en-US']:jsondata[item.predefineddisplaymember];jsondata['value']=jsondata[component.valuemember==='ndynamicmastercode'?item.predefineddisplaymember:item.predefinedvaluemember==='ndynamicmastercode'?item.predefineddisplaymember:item.predefinedvaluemember];return jsondata;});datapredef[item.columnname]=optionList;}switch(item.filterinputtype){case\"text\":obj['fields'][item.type==='dynamic'?item.ismultilingual?\"jsondata->'\"+item.columnname+\"'->>'\"+languageTypeCode+\"'\":\"jsondata->>'\"+item.columnname+\"'\":\"\\\"\"+item.columnname+\"\\\"\"]={label:item.displayname[languageTypeCode],type:\"text\",valueSources:[\"value\",\"func\"],mainWidgetProps:{\"valueLabel\":\"Name\",\"valuePlaceholder\":intl.formatMessage({id:\"IDS_ENTER\"})+\" \"+item.displayname[languageTypeCode]}};break;case\"numeric\":obj['fields'][item.type==='dynamic'?\"(jsondata->>'\"+item.columnname+\"')::int\":\"\\\"\"+item.columnname+\"\\\"\"]={label:item.displayname[languageTypeCode],type:\"number\",valueSources:[\"value\"],fieldSettings:_objectSpread({},item.numericcondition)};break;case\"date\":obj['fields'][item.type==='dynamic'?\"jsondata->>'\"+item.columnname+\"'\":\"\\\"\"+item.columnname+\"\\\"\"]={label:item.displayname[languageTypeCode],type:\"date\",valueSources:[\"value\"]};break;case\"predefinednumeric\":obj['fields'][item.type==='dynamic'?\"(jsondata->>'\"+item.columnname+\"')::int\":\"\\\"\"+item.columnname+\"\\\"\"]={label:item.displayname[languageTypeCode],type:\"select\",valueSources:[\"value\"],fieldSettings:{listValues:datapredef[item.columnname]}};break;case\"predefinedtext\":obj['fields'][item.type==='dynamic'?item.ismultilingual?\"jsondata->'\"+item.columnname+\"'->>'\"+languageTypeCode+\"'\":\"jsondata->>'\"+item.columnname+\"'\":\"\\\"\"+item.columnname+\"\\\"\"]={label:item.displayname[languageTypeCode],type:\"select\",valueSources:[\"value\"],fieldSettings:{listValues:datapredef[item.columnname]}};break;}var gridColumns=creategridColumns(item,languageTypeCode);if(item.filterinputtype!=='predefinednumeric'){obj['gridColumns'].push(gridColumns);}});return obj;}export function filterObject(item,languageTypeCode,resposedata,component,isMultiFilter){var obj={};var preobj={};if(item.filterinputtype==='predefinednumeric'||item.filterinputtype==='predefinedtext'){var optionList=resposedata[item.predefinedtablename].map(function(data){var jsondata=data[item.predefinedtablename]?data[item.predefinedtablename].value?JSON.parse(data[item.predefinedtablename].value):data.jsondata:data.jsondata;jsondata['text']=item.predefinedismultilingual?jsondata[item.predefineddisplaymember][languageTypeCode]||jsondata[item.predefineddisplaymember]['en-US']:jsondata[item.predefineddisplaymember];jsondata['value']=jsondata[component.valuemember==='ndynamicmastercode'?item.predefineddisplaymember:item.predefinedvaluemember==='ndynamicmastercode'?item.predefineddisplaymember:item.predefinedvaluemember];//delete jsondata.jsondata\nreturn jsondata;});datapredef[item.columnname]=optionList;// preobj = {\n//     predefdata: optionList, predefineddisplaymember: item.predefineddisplaymember,\n//     predefinedvaluemember: item.columnname\n// }\n}switch(item.filterinputtype&&item.filterinputtype.toLowerCase()){case\"text\":return obj={name:item.columnname,label:item.displayname[languageTypeCode],filter:TextFilter,operators:Operators.text};case\"numeric\":return obj={name:item.columnname,label:item.displayname[languageTypeCode],filter:NumericFilter,operators:Operators.numeric};case\"date\":if(isMultiFilter){return obj={name:item.columnname,// + \"timestamp\",\nlabel:item.displayname[languageTypeCode],filter:DateFilter,operators:Operators.date};}else{return obj={name:item.columnname+\"timestamp\",label:item.displayname[languageTypeCode],filter:DateFilter,operators:Operators.date};}case\"predefinednumeric\":return obj={name:item.columnname,label:item.displayname[languageTypeCode],filter:CustomFilter,operators:Operators.text// operators: Operators.numeric,\n};case\"predefinedtext\":return obj={name:item.columnname,label:item.displayname[languageTypeCode],filter:CustomFilter,operators:Operators.text};default:return obj={name:item.columnname,label:item.displayname[languageTypeCode],filter:TextFilter,operators:Operators.text};}//return obj;\n}export function getDynamicFilterExecuteData(inputParam){return function(dispatch){var obj=_objectSpread(_objectSpread({},inputParam.component),{},{filterquery:inputParam.filterquery,userinfo:inputParam.userinfo});dispatch(initRequest(true));rsapi.post(\"/dynamicpreregdesign/getdynamicfilterexecutedata\",obj).then(function(response){var source=inputParam.component.source;var languageTypeCode=inputParam.userinfo.slanguagetypecode;var lstData=response.data[inputParam.component.label];var multilingual=[];inputParam.component.filterfields.map(function(item){if(item.ismultilingual){multilingual.push(item.columnname);}});var optionList=lstData.map(function(item){var jsondata=item[source]?item[source].value?JSON.parse(item[source].value):item.jsondata:item.jsondata;multilingual.map(function(mul){jsondata[mul]=jsondata[mul][languageTypeCode]||jsondata[mul]['en-US'];});// let label = isMultiLingual ?\n//   jsondata[optionValue]\n//   [languageTypeCode] || jsondata[optionValue]['en-US']\n//   : jsondata[optionValue];\nreturn jsondata;});if(inputParam.userinfo.nformcode===161){dispatch({type:DEFAULT_RETURN,payload:{lstPatient:optionList,onExecute:false,loading:false,screenName:inputParam.component.displayname[languageTypeCode]}});}else{dispatch({type:DEFAULT_RETURN,payload:{lstPatient:optionList,// onExecute: false,\nloading:false,screenName:inputParam.component.displayname[languageTypeCode]}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}export function rearrangeDateFormatforKendoDataTool(userInfo,dateValue){var splitChar=\"/\";if(dateValue!==undefined){var index=userInfo.ssitedatetime&&userInfo.ssitedatetime.indexOf(\"/\"||\"-\");if(index!==-1)splitChar=userInfo.ssitedatetime.substring(index,index+1);}//   console.log(\"splitChar:\", splitChar);\nif((splitChar===\"/\"||splitChar===\"-\")&&typeof dateValue===\"string\"){var firstField=userInfo.ssitedatetime&&userInfo.ssitedatetime.split(splitChar)[0];// console.log(\"firstField:\", firstField);\nvar timeSplitChar=dateValue.indexOf(\"T\")!==-1?\"T\":\" \";var datetime=dateValue.split(timeSplitChar);var dateArray=datetime[0].split(splitChar);if(firstField===\"dd\"){var day=dateArray[0];var month=dateArray[1];var year=dateArray[2];var time=datetime[1]||\"00:00:00\";var formatted=year+\"-\"+month+\"-\"+day+\"T\"+time;return new Date(formatted);}else if(firstField===\"yyyy\"){var _year=dateArray[0];var _month=dateArray[1];var _day=dateArray[2];var _time=datetime[1]||\"00:00:00\";var _formatted=_year+\"-\"+_month+\"-\"+_day+\"T\"+_time;return new Date(_formatted);}else{return new Date(dateValue);}}else{return dateValue;}}export function preRegDispatch(inputParam){return function(dispatch){dispatch(initRequest(true));dispatch({type:DEFAULT_RETURN,payload:_objectSpread({},inputParam)});};}export function validateEsignforRegistration(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"login/validateEsignCredential\",inputParam.inputData).then(function(response){if(response.data===\"Success\"){var methodUrl=\"registration\";inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"]=inputParam.inputData.userinfo;if(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]&&inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]){delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];}//dispatch(inputParam[\"screenData\"][\"inputParam\"].performAction(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"]))\ndispatch(dispatchMethods(inputParam[\"screenData\"]));}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});};}function dispatchMethods(screenData){return function(dispatch){var action=screenData.inputParam.action;switch(action){case\"preregister\":dispatch(insertRegistration(screenData.inputParam,screenData.masterData));break;case\"editSample\":dispatch(updateRegistration(screenData.inputParam,screenData.masterData,'openModal'));break;case\"accept\":dispatch(acceptRegistration(screenData.inputParam,screenData.masterData));break;case\"quarantine\":dispatch(preregRecordToQuarantine(screenData.inputParam,screenData.masterData));break;case\"cancelTest\":dispatch(cancelTestAction(screenData.inputParam,screenData.masterData));break;case\"cancelSample\":dispatch(cancelSampleAction(screenData.inputParam,screenData.masterData));break;case\"addregsourcecountry\":dispatch(crudMaster(screenData.inputParam,screenData.masterData,\"openModal\"));break;case\"deleteregsourcecountry\":dispatch(crudMaster(screenData.inputParam,screenData.masterData,\"openModal\"));break;case\"printer\":dispatch(crudMaster(screenData.inputParam,screenData.masterData,\"openModal\"));break;case\"editSubSample\":dispatch(onUpdateSubSampleRegistration(screenData.inputParam,screenData.masterData));//ALPD-1128\nbreak;case\"cancelSubSample\":dispatch(cancelSubSampleAction(screenData.inputParam,screenData.masterData));break;case\"adhocTest\":dispatch(createAdhocTest(screenData.inputParam,screenData.masterData));break;default:break;}};}export function getStorageCategoryForSendToStore(storeInputParam,selectedRecord,sampleDetails){return function(dispatch){dispatch(initRequest(true));var userInfo=storeInputParam.userInfo;var masterData=storeInputParam.masterData;var sendToStoreId=storeInputParam.controlcode;var geStorageCategory=rsapi.post(\"/storagecategory/getStorageCategory\",{'userinfo':userInfo});var getUnit=rsapi.post(\"/unit/getUnit\",{'userinfo':userInfo});var getApprovedLocation=rsapi.post(\"/samplestoragemaster/getSampleQty\",sampleDetails);var urlArray=[geStorageCategory,getUnit,getApprovedLocation];///////////////////////////////\nif(sampleDetails.needSubSample){if(masterData[\"selectedSubSample\"].length>1||masterData[\"selectedSubSample\"].findIndex(function(x){return x[storeInputParam.primaryKeyName]===storeInputParam[\"mastersendtostore\"][storeInputParam.primaryKeyName];})===-1){storeInputParam.subSampleRegParam[\"getSubSampleChildDetail\"]=true;}masterData[\"selectedSubSample\"]=[];masterData[\"selectedSubSample\"].push(storeInputParam[\"mastersendtostore\"]);// storeInputParam.subSampleRegParam[\"npreregno\"] = storeInputParam[\"mastersendtostore\"][\"npreregno\"];\n// storeInputParam.subSampleRegParam[\"checkBoxOperation\"] = 3;\n// storeInputParam.subSampleRegParam[\"nfilterstatus\"] = storeInputParam[\"mastersendtostore\"][\"ntransactionstatus\"];\n// storeInputParam.subSampleRegParam[\"napprovalconfigcode\"] = storeInputParam[\"mastersendtostore\"][\"napprovalconfigcode\"];\nvar inputParamData={nsampletypecode:storeInputParam[\"subSampleRegParam\"].nsampletypecode,nregtypecode:storeInputParam[\"subSampleRegParam\"].nregtypecode,nregsubtypecode:storeInputParam[\"subSampleRegParam\"].nregsubtypecode,npreregno:String(storeInputParam[\"mastersendtostore\"].npreregno),ntransactionsamplecode:String(storeInputParam[\"mastersendtostore\"].ntransactionsamplecode),ntransactionstatus:storeInputParam[\"mastersendtostore\"].ntransactionstatus,napprovalconfigcode:storeInputParam[\"mastersendtostore\"].napprovalconfigcode,activeTestTab:storeInputParam[\"subSampleRegParam\"].activeTestTab,activeSampleTab:storeInputParam[\"subSampleRegParam\"].activeSampleTab,activeSubSampleTab:storeInputParam[\"subSampleRegParam\"].activeSubSampleTab,userinfo:storeInputParam.userInfo,ndesigntemplatemappingcode:storeInputParam[\"subSampleRegParam\"].ndesigntemplatemappingcode,checkBoxOperation:storeInputParam[\"masterData\"].checkBoxOperation,nneedsubsample:storeInputParam[\"subSampleRegParam\"].nneedsubsample};urlArray.push(rsapi.post(\"registration/getRegistrationTest\",inputParamData));}else{if(masterData[\"selectedSample\"].length>1||masterData[\"selectedSample\"].findIndex(function(x){return x[storeInputParam.primaryKeyName]===storeInputParam[\"mastersendtostore\"][storeInputParam.primaryKeyName];})===-1){storeInputParam.mainSampleRegParam[\"getSampleChildDetail\"]=true;}masterData[\"selectedSample\"]=[];masterData[\"selectedSample\"].push(storeInputParam[\"mastersendtostore\"]);var _inputParamData={nsampletypecode:storeInputParam.mainSampleRegParam.nsampletypecode,nregtypecode:storeInputParam.mainSampleRegParam.nregtypecode,nregsubtypecode:storeInputParam.mainSampleRegParam.nregsubtypecode,npreregno:String(storeInputParam.mastersendtostore.npreregno),ntransactionstatus:storeInputParam.mastersendtostore.ntransactionstatus,napprovalconfigcode:storeInputParam.mastersendtostore.napprovalconfigcode,activeTestTab:storeInputParam.mainSampleRegParam.activeTestTab,activeSampleTab:storeInputParam.mainSampleRegParam.activeTestTab,activeSubSampleTab:storeInputParam.mainSampleRegParam.activeTestTab,userinfo:storeInputParam.userInfo,ndesigntemplatemappingcode:storeInputParam.mainSampleRegParam.ndesigntemplatemappingcode,nneedsubsample:storeInputParam.mainSampleRegParam.nneedsubsample,// ntype: storeInputParam.masterData.checkBoxOperation === 7 ? 4 : undefined,\nntype:storeInputParam.masterData.checkBoxOperation===checkBoxOperation.QUICKSELECTALL?4:undefined,// checkBoxOperation: storeInputParam.masterData.nneedsubsample === true ?\n//     storeInputParam.masterData.checkBoxOperation === 5 ? 3 : storeInputParam.masterData.checkBoxOperation : storeInputParam.mastersendtostore.checkBoxOperation\ncheckBoxOperation:storeInputParam.masterData.nneedsubsample===true?storeInputParam.masterData.checkBoxOperation===checkBoxOperation.QUICKSELECTSTATUS?checkBoxOperation.SINGLESELECT:storeInputParam.masterData.checkBoxOperation:storeInputParam.mastersendtostore.checkBoxOperation};urlArray.push(rsapi.post(\"registration/getRegistrationSubSample\",_inputParamData));}Axios.all(urlArray).then(function(response){//console.log(\"res:\", response);\nif(response[2].data[\"ReturnStatus\"]!==undefined){toast.info(response[2].data[\"ReturnStatus\"]);masterData=_objectSpread(_objectSpread({},masterData),response[3].data);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,// openChildModal: true,\n// operation: \"sendToStore\",\nncontrolcode:sendToStoreId,selectedRecord:selectedRecord,npreregno:sampleDetails.npreregno,ntransactionsamplecode:sampleDetails.ntransactionsamplecode}});}else{var conditionMap=constructOptionList(response[0].data,\"nstoragecategorycode\",\"sstoragecategoryname\",false,false,true);var conditionMaster=conditionMap.get(\"OptionList\");var conditionUnitMap=constructOptionList(response[1].data,\"nunitcode\",\"sunitname\",false,false,true);var conditionUnitMaster=conditionUnitMap.get(\"OptionList\");var isneedSubSampleQty=false;var approvedTreeData=[];selectedRecord[\"nsamplestoragelocationcode\"]=[];selectedRecord[\"nstoragecategorycode\"]=[];selectedRecord[\"nsampleqty\"]=undefined;selectedRecord[\"sampleToStore\"]=sampleDetails.sample===undefined?\"\":sampleDetails.sample;if(response[2].data!==null&&response[2].data[\"isNeedSubSampleQty\"]&&response[2].data[\"isNeedSubSampleQty\"]!==\"\"){isneedSubSampleQty=false;}else{isneedSubSampleQty=true;}if(response[2].data!==null&&response[2].data.unit&&response[2].data.unit.value!==undefined){conditionUnitMaster.map(function(item){return item.value===response[2].data.unit.value?selectedRecord[\"nunitcode\"]={\"label\":item.label,\"value\":item.value,\"item\":item.item}:\"\";});}masterData=_objectSpread(_objectSpread({},masterData),{},{storageCategory:conditionMaster,approvedTreeData:approvedTreeData,unitMaster:conditionUnitMaster},response[3].data);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,openChildModal:true,operation:\"sendToStore\",ncontrolcode:sendToStoreId,selectedRecord:selectedRecord,npreregno:sampleDetails.npreregno,ntransactionsamplecode:sampleDetails.ntransactionsamplecode,isneedSubSampleQty:isneedSubSampleQty}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===503){toast.error(error.message);}else{toast.info(error.response.data);}});};}export function UpdateExternalOrderStatus(portallist,inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(String(inputParam.inputData[\"url\"])+\"/portal/UpdateMultiSampleStatus\",JSON.stringify(portallist),{headers:{'Content-Type':'application/json'}}).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response!==undefined&&error.response.status===500){toast.error(error.message);}else if(error.response===undefined){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function autoExternalComponentLoadBasedOnSpec(dispatchData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getSampleBasedOnExternalOrder\",{'nexternalordercode':dispatchData.selectedRecord[\"Order\"]?dispatchData.selectedRecord[\"Order\"].value:-1,\"nexternalordersamplecode\":dispatchData.selectedRecord[\"External Sample Id\"]?dispatchData.selectedRecord[\"External Sample Id\"].value:-1}).then(function(response){var Sample=response.data.Sample;//console.log(\"sample:\", Sample);\nvar Test1=response.data.Test;var subSampleDataGridList=[];var Component=[];var Test={};Sample.map(function(sample,index){var saveComponent={};saveComponent[\"slno\"]=index;saveComponent['jsondata']={};saveComponent['jsonuidata']={};saveComponent['ncomponentcode']=sample['ncomponentcode'];saveComponent['nspecsampletypecode']=sample['nspecsampletypecode'];saveComponent['scomponentname']=sample['scomponentname'];//saveComponent['jsondata']['ncomponentcode'] = { label: sample['scomponentname'], value: sample['ncomponentcode'] }\n// saveComponent['jsonuidata']['ncomponentcode'] = sample['scomponentname']\n//  saveComponent['jsondata']['scomponentname'] =  sample['scomponentname']\nsaveComponent['jsonuidata']['scomponentname']=sample['scomponentname'];saveComponent['jsondata']['External Sample ID_child']=sample['sexternalsampleid'];saveComponent['jsonuidata']['External Sample ID_child']=sample['sexternalsampleid'];saveComponent['jsondata']['sampleorderid']=sample['sexternalsampleid'];saveComponent['jsonuidata']['sampleorderid']=sample['sexternalsampleid'];saveComponent['jsondata']['nsampleordercode']=dispatchData.selectedRecord[\"External Sample Id\"]?dispatchData.selectedRecord[\"External Sample Id\"].value:-1;saveComponent['jsonuidata']['nsampleordercode']=dispatchData.selectedRecord[\"External Sample Id\"]?dispatchData.selectedRecord[\"External Sample Id\"].value:-1;// ALPD-3575\nsaveComponent['jsondata']['subsamplecollectiondatetime']=sample['dsamplecollectiondatetime'];saveComponent['jsonuidata']['subsamplecollectiondatetime']=sample['dsamplecollectiondatetime'];saveComponent['jsondata']['nsampleappearancecode']=sample['nsampleappearancecode'];saveComponent['jsonuidata']['nsampleappearancecode']=sample['nsampleappearancecode'];saveComponent['jsondata']['ssampleappearance']=sample['ssampleappearance'];saveComponent['jsonuidata']['ssampleappearance']=sample['ssampleappearance'];saveComponent['jsondata']['Sample Collection Date Time_child']=sample['dsamplecollectiondatetime'];saveComponent['jsonuidata']['Sample Collection Date Time_child']=sample['dsamplecollectiondatetime'];saveComponent['jsondata']['Sample Appearance_child']={'label':sample['ssampleappearance'],'value':sample['nsampleappearancecode'],'source':'sampleappearance','pkey':'nsampleappearancecode','nquerybuildertablecode':sample['nquerybuildertablecode']};saveComponent['jsonuidata']['Sample Appearance_child']=sample['ssampleappearance'];// ALPD-3575\n// saveComponent['jsondata']['Quantity_child'] = sample['nsampleqty']\n// saveComponent['jsonuidata']['Quantity_child'] = sample['nsampleqty']\n// saveComponent['jsondata']['Unit Name_child'] = { label: sample['sunitname'], value: sample['nunitcode'] }\n// saveComponent['jsonuidata']['Unit Name_child'] = sample['sunitname']\nsubSampleDataGridList.push(_objectSpread(_objectSpread(_objectSpread({},saveComponent['jsonuidata']),saveComponent),{},{\"Sample Collection Date Time_child\":convertDateTimetoString(new Date(sample['dsamplecollectiondatetime']),dispatchData.userInfo)}));Component.unshift(saveComponent);delete dispatchData['userInfo'];var filterTest=Test1.filter(function(x){return x.nexternalordersamplecode===sample.nexternalordersamplecode;});filterTest.map(function(x){x['slno']=index;});//selectedTestData=[...selectedTestData,...filterTest]\nTest[index]=filterTest;});dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},dispatchData),{},{Component:Component,selectedComponent:Component.length>0?_objectSpread({},Component[0]):{},selectComponent:{},SelectedTest:Component.length>0?Test[Component[0].slno]:[],Test:Test,selectedTestData:{},subSampleDataGridList:subSampleDataGridList})});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function autoPortalTestLoadBasedOnSpec(dispatchData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getSampleBasedOnPortalOrder\",{'nexternalordercode':dispatchData.selectedRecord[\"Plant Order\"]?dispatchData.selectedRecord[\"Plant Order\"].value:-1,'userinfo':dispatchData.userInfo}).then(function(response){var Sample=response.data.Sample;var Test1=response.data.Test;var subSampleDataGridList=[];var Component=[];var Test={};Sample.map(function(sample,index){var saveComponent={};saveComponent[\"slno\"]=index;saveComponent['jsondata']={};saveComponent['jsonuidata']={};saveComponent['ncomponentcode']=sample['ncomponentcode'];saveComponent['nspecsampletypecode']=sample['nspecsampletypecode'];saveComponent['scomponentname']=sample['scomponentname'];saveComponent['jsonuidata']['scomponentname']=sample['scomponentname'];saveComponent['jsondata']['External Sample ID_child']=sample['sexternalsampleid'];saveComponent['jsonuidata']['External Sample ID_child']=sample['sexternalsampleid'];saveComponent['jsondata']['sampleorderid']=sample['sexternalsampleid'];saveComponent['jsonuidata']['sampleorderid']=sample['sexternalsampleid'];saveComponent['jsondata']['nsampleordercode']=dispatchData.selectedRecord[\"External Sample Id\"]?dispatchData.selectedRecord[\"External Sample Id\"].value:-1;saveComponent['jsonuidata']['nsampleordercode']=dispatchData.selectedRecord[\"External Sample Id\"]?dispatchData.selectedRecord[\"External Sample Id\"].value:-1;saveComponent['jsondata']['subsamplecollectiondatetime']=sample['dsamplecollectiondatetime'];saveComponent['jsonuidata']['subsamplecollectiondatetime']=sample['dsamplecollectiondatetime'];saveComponent['jsondata']['nsampleappearancecode']=sample['nsampleappearancecode'];saveComponent['jsonuidata']['nsampleappearancecode']=sample['nsampleappearancecode'];saveComponent['jsondata']['ssampleappearance']=sample['ssampleappearance'];saveComponent['jsonuidata']['ssampleappearance']=sample['ssampleappearance'];saveComponent['jsondata']['Sample Collection Date Time_child']=sample['dsamplecollectiondatetime'];saveComponent['jsonuidata']['Sample Collection Date Time_child']=sample['dsamplecollectiondatetime'];saveComponent['jsondata']['Sample Appearance_child']={'label':sample['ssampleappearance'],'value':sample['nsampleappearancecode'],'source':'sampleappearance','pkey':'nsampleappearancecode','nquerybuildertablecode':sample['nquerybuildertablecode']};saveComponent['jsonuidata']['Sample Appearance_child']=sample['ssampleappearance'];subSampleDataGridList.push(_objectSpread(_objectSpread(_objectSpread({},saveComponent['jsonuidata']),saveComponent),{},{\"Sample Collection Date Time_child\":convertDateTimetoString(new Date(sample['dsamplecollectiondatetime']),dispatchData.userInfo)}));Component.unshift(saveComponent);delete dispatchData['userInfo'];var filterTest=Test1.filter(function(x){return x.nexternalordersamplecode===sample.nexternalordersamplecode;});filterTest.map(function(x){x['slno']=index;});Test[index]=filterTest;});dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},dispatchData),{},{Component:Component,selectedComponent:Component.length>0?_objectSpread({},Component[0]):{},selectComponent:{},SelectedTest:Test[0],Test:Test,subSampleDataGridList:subSampleDataGridList})});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getBarcodeAndPrinterService(inputParam){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var getPrinter=rsapi.post(\"barcode/getPrinter\",inputParam.userInfo);var getControlBasedBarcode=rsapi.post(\"barcode/getControlBasedBarcode\",inputParam);urlArray=[getPrinter,getControlBasedBarcode];// rsapi.post(\"barcode/getPrinter\", inputParam.userInfo)\nAxios.all(urlArray).then(function(response){var selectedPrinterData={sprintername:{value:response[0].data[0].sprintername,label:response[0].data[0].sprintername,item:response[0].data[0]},sbarcodename:\"\"};var printer=constructOptionList(response[0].data||[],\"sprintername\",\"sprintername\",undefined,undefined,true).get(\"OptionList\");var barcode=constructOptionList(response[1].data||[],\"sbarcodename\",\"sbarcodename\",undefined,undefined,true).get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputParam.masterData),{},{control:inputParam.control}),printer:printer,barcode:barcode,selectedPrinterData:selectedPrinterData,operation:\"printer\",screenName:\"IDS_PRINTBARCODE\",//dataToPrint: inputParam.selectedGoodsIn.nrmsno,\nncontrolcode:inputParam.ncontrolcode,loading:false,openModal:true,loadPrinter:true}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getOrderDetails(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/externalorder/getDraftExternalOrderDetails\",{sexternalorderid:inputData.sexternalorderid,nexternalordertypecode:inputData.selectedRecord.nexternalordertypecode&&inputData.selectedRecord.nexternalordertypecode.value,userinfo:inputData.userinfo}).then(function(response){var masterData=_objectSpread({},inputData.masterData);//orders:response.data.ExternalOrder\nvar selectedRecord=_objectSpread({},inputData.selectedRecord);selectedRecord['orders']=response.data.ExternalOrder;response.data.isRecordNotAvailable&&response.data.isRecordNotAvailable!==\"\"&&toast.warn(response.data.isRecordNotAvailable);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,selectedRecord:selectedRecord,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{//toast.warn(error.response.data['rtn']);\ntoast.warn(error.response.data);}});};}export function onUpdateCancelExternalOrder(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/externalorder/onUpdateCancelExternalOrder\",_objectSpread({},inputParam.inputData)).then(function(response){// if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n//     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n// }\nvar masterData=_objectSpread(_objectSpread({},inputParam.inputData.masterData),{},{orders:[]});// if (response.data[\"rtn\"] === true) {\n//     toast.info(intl.formatMessage({ id: response.data[\"rtn\"] }));\n// }\ndispatch({type:DEFAULT_RETURN,payload:{selectedRecord:{},masterData:masterData,loading:false,openModal:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{//toast.warn(error.response.data['rtn']);\ntoast.warn(error.response.data);}});};}export function getOutSourceSite(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/externalorder/getOutSourceSite\",_objectSpread({},inputParam.inputData)).then(function(response){//console.log(\"response if loop\");\nvar siteListMap=constructOptionList(response.data||[],'nsitecode','ssitename',undefined,undefined,undefined,'ndefaultstatus')||[];var siteList=siteListMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{outSourceSiteList:siteList,loading:false,openModal:true,outsourcetest:true,outSourceSiteData:inputParam.inputData,screenName:inputParam.screenName,parentPopUpSize:\"lg\"}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(intl.formatMessage({id:error.response.data}));//toast.error(error.response.data);\n}});};}export function getOutSourceSiteAndTest(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/externalorder/getOutSourceSiteAndTest\",_objectSpread({},inputParam.inputData)).then(function(response){//console.log(\"response if loop\");\nvar siteListMap=constructOptionList(response.data.Site||[],'nsitecode','ssitename',undefined,undefined,undefined,'ndefaultstatus')||[];// const testListMap = constructOptionList(response.data.Test || [], 'ntransactiontestcode', 'stestsynonym', undefined, undefined, undefined,\n// 'ndefaultstatus') || [];\nvar selectedRecord=[];selectedRecord[\"ssampleid\"]=inputParam.inputData.registrationtest.ssamplearno;selectedRecord[\"doutsourcedate\"]=new Date();var siteList=siteListMap.get(\"OptionList\");var str=response.data.regDate;var date=new Date(str);// const testList = testListMap.get(\"OptionList\");\ndispatch({type:DEFAULT_RETURN,payload:{outSourceSiteList:siteList,outSourceTestList:response.data.Test,//testList,\nregDate:date.toDateString(),loading:false,openModal:true,outsourcetest:true,outSourceSiteData:inputParam.inputData,screenName:inputParam.screenName,parentPopUpSize:\"lg\",selectedRecord:selectedRecord}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(intl.formatMessage({id:error.response.data}));//toast.error(error.response.data);\n}});};}export function outsourceTest(inputData,masterData){return function(dispatch){dispatch(initRequest(true));//console.log(\"inputData:\", inputData);\nrsapi.post(\"/externalorder/outSourceTest\",_objectSpread({},inputData)).then(function(response){//console.log(\"Test OutSourced\");\nvar OutSourcedTestGet=response.data[\"OutSourcedTestGet\"];// console.log(\"OutSourcedTestGet:\", OutSourcedTestGet);\nmasterData=_objectSpread(_objectSpread(_objectSpread({},masterData),{},{selectedTest:OutSourcedTestGet},masterData.selectedSample.map(function(statusupdate){if(statusupdate.npreregno===OutSourcedTestGet[0].npreregno){// childref.ref.current.value = \"\";\nstatusupdate.ntransactionstatus=33;statusupdate.stransdisplaystatus=\"Released\";}})),{},{RegistrationGetTest:replaceUpdatedObject(OutSourcedTestGet,masterData.RegistrationGetTest,\"ntransactiontestcode\")});toast.info(response.data[\"Msg\"]);dispatch({type:DEFAULT_RETURN,payload:{loading:false,openModal:false,outsourcetest:false,masterData:masterData}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function outsourceSampleTest(inputData,masterData){return function(dispatch){dispatch(initRequest(true));//console.log(\"inputData:\", inputData);\nrsapi.post(\"/externalorder/outSourceSampleTest\",_objectSpread({},inputData)).then(function(response){//console.log(\"Test OutSourced\");\nvar OutSourcedTestGet=response.data[\"OutSourcedTestGet\"];// console.log(\"OutSourcedTestGet:\", OutSourcedTestGet);\nvar OutSourcedSubSampleGet=response.data[\"OutSourcedSubSampleGet\"];var OutsourceDetailsList=response.data[\"OutsourceDetailsList\"];masterData=_objectSpread(_objectSpread({},masterData),{},{selectedTest:OutSourcedTestGet,OutsourceDetailsList:OutsourceDetailsList,//selectedSubSample:OutSourcedSubSampleGet,\n// ...masterData.selectedSample.map(statusupdate => {\n//     if (statusupdate.npreregno === OutSourcedTestGet[0].npreregno) {\n//      // childref.ref.current.value = \"\";\n//      statusupdate.ntransactionstatus=33;\n//      statusupdate.stransdisplaystatus=\"Released\";\n//     }\n//   }),\nRegistrationGetTest:replaceUpdatedObject(OutSourcedTestGet,masterData.RegistrationGetTest,\"ntransactiontestcode\"),RegistrationGetSubSample:replaceUpdatedObject(OutSourcedSubSampleGet,masterData.RegistrationGetSubSample,\"ntransactionsamplecode\"),RegistrationGetSample:replaceUpdatedObject(response.data[\"OutSourcedSampleGet\"],masterData.RegistrationGetSample,\"npreregno\")});toast.info(response.data[\"Msg\"]);dispatch({type:DEFAULT_RETURN,payload:{loading:false,openModal:false,outsourcetest:false,masterData:masterData,selectedRecord:{}}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function insertMultipleRegistration(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));var requestUrl='';if(inputParam.isFileupload){requestUrl=rsapi.post(\"/registration/importRegistrationData\",inputParam.formData);}else{requestUrl=rsapi.post(\"/registration/createRegistration\",inputParam.inputData);}return requestUrl//  rsapi.post(\"/registration/createRegistration\", inputParam.formData)\n.then(function(response){if(response.data.rtn===\"Success\"){var _objectSpread19;// if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n//     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n// }\nvar registrationList=[].concat(_toConsumableArray(response.data[\"RegistrationGetSample\"]),_toConsumableArray(masterData.RegistrationGetSample));var RegistrationGetSample=registrationList;// updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"] , masterData.RegistrationGetSample, 'Sample');\nvar selectedSample=response.data[\"selectedSample\"];var RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];var RegistrationGetTest=response.data[\"RegistrationGetTest\"];var selectedSubSample=RegistrationGetSubSample;RegistrationGetTest=sortData(RegistrationGetTest,\"npreregno\",\"desc\");var selectedTest=RegistrationGetTest.length>0?[RegistrationGetTest[0]]:[];var regSampleExisted=inputParam.inputData&&inputParam.inputData.orderTypeValue===2?true:false;if(inputParam.inputData.nneedsubsample){RegistrationGetSubSample=sortData(response.data[\"RegistrationGetSubSample\"],'npreregno','desc');selectedSubSample=RegistrationGetSubSample.length>0?[RegistrationGetSubSample[0]]:[];RegistrationGetTest=RegistrationGetTest.filter(function(x){return x.ntransactionsamplecode===selectedSubSample[0].ntransactionsamplecode;});selectedTest=RegistrationGetTest.length>0?response.data[\"selectedTest\"]:[];}// RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\nif(inputParam.multipleselectionFlag){selectedSample=updatedObjectWithNewElement(response.data[\"selectedSample\"],masterData.selectedSample);updatedObjectWithNewElement(response.data[\"selectedSubSample\"],masterData.RegistrationGetSubSample);updatedObjectWithNewElement(response.data[\"selectedTest\"],masterData.RegistrationGetTest);RegistrationGetSubSample=masterData.RegistrationGetSubSample;RegistrationGetTest=masterData.RegistrationGetTest;}masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{selectedSample:selectedSample,selectedSubSample:selectedSubSample,selectedTest:selectedTest,RegistrationGetSubSample:RegistrationGetSubSample,RegistrationGetTest:RegistrationGetTest,RegistrationGetSample:RegistrationGetSample});var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},(_objectSpread19={openModal:false,loadEsign:false,showConfirmAlert:false,selectedRecord:undefined,loading:false,loadPreregister:false,showSample:undefined,openPortal:false,selectedSpec:{},selectComponent:{},SelectedTest:{},selectedComponent:{},Component:[]},_defineProperty(_objectSpread19,\"selectedRecord\",{}),_defineProperty(_objectSpread19,\"SelectedTest\",[]),_defineProperty(_objectSpread19,\"Test\",[]),_defineProperty(_objectSpread19,\"selectedComponent\",{}),_defineProperty(_objectSpread19,\"subSampleDataGridList\",[]),_defineProperty(_objectSpread19,\"preregConfirmMessage\",undefined),_defineProperty(_objectSpread19,\"regSampleExisted\",regSampleExisted),_defineProperty(_objectSpread19,\"loadImportFileData\",false),_defineProperty(_objectSpread19,\"loadImportSampleCountData\",false),_objectSpread19));inputParam.postParamList[0]['clearFilter']='yes';inputParam.postParamList[1]['clearFilter']='yes';inputParam.postParamList[2]['clearFilter']='yes';dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}else{toast.info(response.data.rtn);dispatch({type:DEFAULT_RETURN,payload:_defineProperty({loading:false,showConfirmAlert:false,preregConfirmMessage:undefined,loadImportFileData:false,loadImportSampleCountData:false,openModal:false,openPortal:false,loadEsign:false},\"showConfirmAlert\",false)});}}).catch(function(error){// console.log(error);             \nif(error.response.status===500){dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false,preregConfirmMessage:undefined}});toast.error(error.message);}else{if(error.response.data.NeedConfirmAlert){dispatch({type:DEFAULT_RETURN,payload:{showConfirmAlert:true,preregConfirmMessage:error.response.data.rtn,preregConfirmParam:{inputParam:inputParam,masterData:masterData},loading:false,showSample:undefined}});}else{toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false,preregConfirmMessage:undefined}});}}});};}export function insertRegSample(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));//console.log(\"inputData:\", inputData);\nrsapi.post(\"/registration/importRegistrationSample\",inputParam.formData).then(function(response){if(response.data.rtn===\"Success\"){var _objectSpread20;// if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n//     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n// }\n// Commented because insertRegSample is for smtl not for portal\nvar registrationList=[].concat(_toConsumableArray(response.data[\"RegistrationGetSample\"]),_toConsumableArray(masterData.RegistrationGetSample));var RegistrationGetSample=registrationList;// updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"] , masterData.RegistrationGetSample, 'Sample');\nvar selectedSample=response.data[\"selectedSample\"];var RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];var RegistrationGetTest=response.data[\"RegistrationGetTest\"];var selectedSubSample=RegistrationGetSubSample;RegistrationGetTest=sortData(RegistrationGetTest,\"npreregno\",\"desc\");var selectedTest=RegistrationGetTest.length>0?[RegistrationGetTest[0]]:[];var regSampleExisted=inputParam.inputData&&inputParam.inputData.orderTypeValue===2?true:false;if(inputParam.inputData.nneedsubsample){RegistrationGetSubSample=sortData(response.data[\"RegistrationGetSubSample\"],'npreregno','desc');selectedSubSample=RegistrationGetSubSample.length>0?[RegistrationGetSubSample[0]]:[];RegistrationGetTest=RegistrationGetTest.filter(function(x){return x.ntransactionsamplecode===selectedSubSample[0].ntransactionsamplecode;});selectedTest=RegistrationGetTest.length>0?response.data[\"selectedTest\"]:[];}// RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\nif(inputParam.multipleselectionFlag){selectedSample=updatedObjectWithNewElement(response.data[\"selectedSample\"],masterData.selectedSample);updatedObjectWithNewElement(response.data[\"selectedSubSample\"],masterData.RegistrationGetSubSample);updatedObjectWithNewElement(response.data[\"selectedTest\"],masterData.RegistrationGetTest);RegistrationGetSubSample=masterData.RegistrationGetSubSample;RegistrationGetTest=masterData.RegistrationGetTest;}masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{selectedSample:selectedSample,selectedSubSample:selectedSubSample,selectedTest:selectedTest,RegistrationGetSubSample:RegistrationGetSubSample,RegistrationGetTest:RegistrationGetTest,RegistrationGetSample:RegistrationGetSample});var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},(_objectSpread20={openModal:false,loadEsign:false,showConfirmAlert:false,selectedRecord:undefined,loading:false,loadPreregister:false,showSample:undefined,openPortal:false,selectedSpec:{},selectComponent:{},SelectedTest:{},selectedComponent:{},Component:[]},_defineProperty(_objectSpread20,\"selectedRecord\",{}),_defineProperty(_objectSpread20,\"SelectedTest\",[]),_defineProperty(_objectSpread20,\"Test\",[]),_defineProperty(_objectSpread20,\"selectedComponent\",{}),_defineProperty(_objectSpread20,\"subSampleDataGridList\",[]),_defineProperty(_objectSpread20,\"preregConfirmMessage\",undefined),_defineProperty(_objectSpread20,\"regSampleExisted\",regSampleExisted),_defineProperty(_objectSpread20,\"loadImportFileData\",false),_defineProperty(_objectSpread20,\"loadImportSampleCountData\",false),_objectSpread20));inputParam.postParamList[0]['clearFilter']='yes';inputParam.postParamList[1]['clearFilter']='yes';inputParam.postParamList[2]['clearFilter']='yes';dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}else{toast.info(response.data.rtn);dispatch({type:DEFAULT_RETURN,payload:{loading:false,//showConfirmAlert: false, \n// preregConfirmMessage: undefined,\n//loadImportFileData:false,\n//loadImportSampleCountData:false, \nopenModal:false,// openPortal:false,\nloadEsign:false//showConfirmAlert: false,\n}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getExternalOrderTypeForMapping(inputParem){return function(dispatch){var masterData=inputParem.inputParam.masterData;var selectedSample={};if(masterData[\"selectedSample\"].length>1){inputParem.masterData.selectedSample.map(function(x){if(x.npreregno===inputParem.inputParam[\"subSample\"].npreregno){selectedSample=x;}});}else{selectedSample=masterData.selectedSample[0];}if(selectedSample&&selectedSample.orderTypeValue===orderType.MANUAL){if(inputParem.inputParam.subSample.nordertypecode===orderType.MANUAL&&inputParem.inputParam.subSample.ntransactionstatus!==transactionStatus.RELEASED&&inputParem.inputParam.subSample.ntransactionstatus!==transactionStatus.REJECT&&inputParem.inputParam.subSample.ntransactionstatus!==transactionStatus.CANCELLED){dispatch(initRequest(true));rsapi.post(\"/registration/getExternalOrderForMapping\",inputParem).then(function(response){var orderListMap=constructOptionList(response.data.externalOrderList||[],\"nexternalordersamplecode\",\"sexternalsampleid\",\"nsorter\",\"ascending\",false);var orderList=orderListMap.get(\"OptionList\");if(masterData[\"selectedSubSample\"].length>1){masterData[\"selectedSubSample\"]=[];masterData[\"selectedSubSample\"].push(inputParem.inputParam[\"subSample\"]);}// if (masterData[\"selectedSample\"].length > 1) {\n//     inputParem.masterData.selectedSample.map(x => {\n//         if(x.npreregno === inputParem.inputParam[\"subSample\"].npreregno)\n//         {\n//             selectedSample = x;\n//         }\n//     });\n// } else {\n//     selectedSample = masterData.selectedSample[0];\n// }\ndispatch({type:DEFAULT_RETURN,payload:{orderList:orderList,orderDetails:_objectSpread(_objectSpread({},inputParem.inputParam),{},{selectedSample:selectedSample}),masterData:masterData,loading:false,showFilter:false,MappingFields:true,showQRCode:false,openChildModal:true,selectedDetailField:{},selectedRecord:{}}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});}else{if(inputParem.inputParam.subSample.ntransactionstatus===transactionStatus.RELEASED){toast.info(intl.formatMessage({id:\"IDS_RELEASEDSAMPLESCONNOTBEMAPPED\"}));}else if(inputParem.inputParam.subSample.ntransactionstatus===transactionStatus.REJECT){toast.info(intl.formatMessage({id:\"IDS_REJECTEDSAMPLESCONNOTBEMAPPED\"}));}else if(inputParem.inputParam.subSample.ntransactionstatus===transactionStatus.CANCELLED){toast.info(intl.formatMessage({id:\"IDS_CANCELLEDSAMPLESCONNOTBEMAPPED\"}));}else{toast.info(intl.formatMessage({id:\"IDS_ALREADYEXTERNALMAPPED\"}));}}}else{toast.info(intl.formatMessage({id:\"IDS_SELECTMANUALORDER\"}));}};}export function getExternalOrderForMapping(inputParem){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getExternalOrderForMapping\",inputParem).then(function(response){var orderListMap=constructOptionList(response.data.externalOrderList||[],\"nexternalordersamplecode\",\"sexternalsampleid\",\"nsorter\",\"ascending\",false);var orderList=orderListMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{orderList:orderList,selectedRecord:inputParem.selectedRecord,masterData:inputParem.masterData,loading:false,showFilter:false,MappingFields:true,showQRCode:false,openChildModal:true,selectedDetailField:{}}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function orderMapping(inputParem){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/orderMapping\",inputParem.inputData).then(function(response){// if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n//     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParem));\n// }\nreplaceUpdatedObject(response.data[\"RegistrationGetSample\"],inputParem.masterData.RegistrationGetSample,\"npreregno\");replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],inputParem.masterData.RegistrationGetSubSample,\"ntransactionsamplecode\");replaceUpdatedObject(response.data[\"RegistrationGetTest\"],inputParem.masterData.RegistrationGetTest,\"ntransactiontestcode\");var masterData=_objectSpread(_objectSpread({},inputParem.masterData),{},{selectedSample:replaceUpdatedObject(response.data[\"selectedSample\"],inputParem.masterData.selectedSample,\"npreregno\"),selectedSubSample:replaceUpdatedObject(response.data[\"selectedSubSample\"],inputParem.masterData.selectedSubSample,\"ntransactionsamplecode\"),selectedTest:replaceUpdatedObject(response.data[\"selectedTest\"],inputParem.masterData.selectedTest,\"ntransactiontestcode\")});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,showFilter:false,openChildModal:false,showQRCode:false,selectedDetailField:undefined,orderList:[]}});if(response.data.rtn===\"Success\"){toast.info(intl.formatMessage({id:\"IDS_EXTERNALSAMPLEMAPPEDSUCCESSFULLY\"}));}}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function orderRecords(inputData){return function(dispatch){rsapi.post(\"/externalorder/getExternalOrderType\",inputData).then(function(response){var selectedRecord=_objectSpread({},inputData.selectedRecord);var externalOrderType=[];response.data.ExternalOrderType.map(function(item){return item.nexternalordertypecode!==-1&&externalOrderType.push(item);});var externalOrderTypeMap=constructOptionList(externalOrderType||[],\"nexternalordertypecode\",\"sexternalordertypename\",\"nexternalordertypecode\",\"descending\",false);var externalOrderTypeList=externalOrderTypeMap.get(\"OptionList\");// let selectedExternalOrderType = externalOrderTypeList[0];\n// selectedRecord[\"selectedExternalOrderType\"] = selectedExternalOrderType;\ndispatch({type:DEFAULT_RETURN,payload:{ncontrolcode:inputData.CancelExternalOrderSampleId,operation:inputData.operation,loadPrinter:false,openModal:true,parentPopUpSize:'xl',screenName:inputData.screenName,loading:false,masterData:inputData.masterData,externalOrderTypeList:externalOrderTypeList// selectedRecord\n}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}//ALPD-3615--Start\nexport var getAdhocTest=function getAdhocTest(inputParam,masterData,ncontrolCode){return function(dispatch){var _inputParam3=_objectSpread({},inputParam),userInfo=_inputParam3.userInfo;var ntransactionsamplecode=-1;var requestUrl='';if(masterData&&masterData.RealRegSubTypeValue.nneedsubsample){if(masterData[\"selectedSubSample\"].length>1||masterData[\"selectedSubSample\"].findIndex(function(x){return x[inputParam.primaryKeyName]===inputParam[\"sampleadhoctest\"][inputParam.primaryKeyName];})===-1){inputParam.editRegParam[\"getSubSampleChildDetail\"]=true;}masterData[\"selectedSubSample\"]=[];masterData[\"selectedSubSample\"].push(inputParam[\"sampleadhoctest\"]);var selectedSpec=getSameRecordFromTwoArrays(masterData.selectedSample,masterData.selectedSubSample,\"npreregno\");inputParam.sampleadhoctest['nallottedspeccode']=selectedSpec[0].nallottedspeccode;inputParam.sampleadhoctest['sspecname']=selectedSpec[0].sspecname;inputParam.editRegParam[\"npreregno\"]=inputParam[\"sampleadhoctest\"][\"npreregno\"];inputParam.editRegParam[\"checkBoxOperation\"]=checkBoxOperation.SINGLESELECT;inputParam.editRegParam[\"nfilterstatus\"]=inputParam[\"sampleadhoctest\"][\"ntransactionstatus\"];inputParam.editRegParam[\"napprovalconfigcode\"]=inputParam[\"sampleadhoctest\"][\"napprovalconfigcode\"];ntransactionsamplecode=inputParam.sampleadhoctest[inputParam.primaryKeyName];inputParam.editRegParam['nallottedspeccode']=selectedSpec[0].nallottedspeccode;}else{if(masterData[\"selectedSample\"].length>1||masterData[\"selectedSample\"].findIndex(function(x){return x[inputParam.primaryKeyName]===inputParam[\"sampleadhoctest\"][inputParam.primaryKeyName];})===-1){inputParam.editRegParam[\"getSampleChildDetail\"]=true;}masterData[\"selectedSample\"]=[];masterData[\"selectedSample\"].push(inputParam[\"sampleadhoctest\"]);}var npreregno=inputParam[\"sampleadhoctest\"].npreregno;if(inputParam[\"sampleadhoctest\"]&&inputParam[\"sampleadhoctest\"].ntransactionstatus!==transactionStatus.REJECT&&inputParam[\"sampleadhoctest\"]&&inputParam[\"sampleadhoctest\"].ntransactionstatus!==transactionStatus.CANCELLED){if(inputParam[\"sampleadhoctest\"]&&inputParam[\"sampleadhoctest\"].ntransactionstatus!==transactionStatus.RELEASED){inputParam[\"nallottedspeccode\"]=inputParam[\"sampleadhoctest\"][\"nallottedspeccode\"];dispatch(initRequest(true));if(masterData&&masterData.RealRegSubTypeValue.nneedsubsample){requestUrl=rsapi.post(\"/registration/getAdhocTest\",_objectSpread(_objectSpread({},inputParam.editRegParam),{},{ntransactionsamplecode:ntransactionsamplecode,UserInfo:userInfo}));}else{requestUrl=rsapi.post(\"/registration/getAdhocTest\",_objectSpread(_objectSpread({},inputParam.editRegParam),{},{UserInfo:userInfo,npreregno:npreregno,nallottedspeccode:inputParam.sampleadhoctest.nallottedspeccode||-1}));}return requestUrl.then(function(response){var testData=[];var TestDataMap=constructOptionList(response.data['AdhocTest']||[],\"ntestcode\",\"stestsynonym\",undefined,undefined,true);testData=TestDataMap.get(\"OptionList\");var selectedRecord={};selectedRecord['visibleadhoctest']=transactionStatus.NO;selectedRecord['specName']=inputParam.sampleadhoctest['sspecname'];if(masterData&&masterData.RealRegSubTypeValue.nneedsubsample){if(inputParam.editRegParam[\"getSubSampleChildDetail\"]===true){masterData=_objectSpread(_objectSpread({},masterData),response.data[\"SubSampleChildDetail\"]);}}else{if(inputParam.editRegParam[\"getSampleChildDetail\"]===true){masterData=sortData(_objectSpread(_objectSpread({},masterData),response.data[\"SampleChildDetail\"]));}}dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,availableAdhocTest:testData,loadAdhocTest:true,loading:false,ncontrolCode:ncontrolCode,screenName:\"IDS_ADHOCTEST\",operation:\"create\",openModal:true,parentPopUpSize:\"lg\",selectedRecord:selectedRecord,showSample:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(_this.props.formatMessage({id:error.response.data}));}});}else{toast.info(intl.formatMessage({id:\"IDS_TESTCANNOTBEFORRELEASEDSAMPLES\"}));// if (inputParam.addTestParam[\"getSampleChildDetail\"] === true) {\n//     masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\n// }\n}}else{toast.info(intl.formatMessage({id:\"IDS_SAMPLEISREJECTEDORCANCELLED\"}));// if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\n//     masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\n// }\n}};};export var createAdhocTest=function createAdhocTest(inputParam,masterData,modalName){return function(dispatch){dispatch(initRequest(true));rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,_objectSpread({},inputParam.inputData)).then(function(response){var _respObject2;var RegistrationGetTest=updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"],response.data[\"RegistrationGetTest\"]);//let RegistrationGetSubSample = updatedObjectWithNewElement(masterData[\"RegistrationGetSubSample\"], response.data[\"RegistrationGetSubSample\"]);\nmasterData=_objectSpread(_objectSpread({},masterData),{},{RegistrationGetTest:sortData(RegistrationGetTest,\"descending\",\"ntransactiontestcode\"),RegistrationGetSubSample:sortData(response.data[\"RegistrationGetSubSample\"],\"descending\",\"ntransactionsamplecode\"),selectedTest:response.data[\"RegistrationGetTest\"],//  selectedSubSample: response.data[\"RegistrationGetSubSample\"],\nselectedSubSample:response.data[\"selectedSubSample\"],RegistrationParameter:response.data.RegistrationParameter,RegistrationGetSample:replaceUpdatedObject(response.data.selectedSample,masterData.RegistrationGetSample,'npreregno')});var respObject=(_respObject2={masterData:masterData},_defineProperty(_respObject2,modalName,false),_defineProperty(_respObject2,\"loading\",false),_defineProperty(_respObject2,\"loadChildTest\",false),_defineProperty(_respObject2,\"showSample\",undefined),_defineProperty(_respObject2,\"openModal\",false),_defineProperty(_respObject2,\"loadEsign\",false),_defineProperty(_respObject2,\"selectedRecord\",{}),_defineProperty(_respObject2,\"showConfirmAlert\",false),_defineProperty(_respObject2,\"createTestConfirmMessage\",undefined),_defineProperty(_respObject2,\"loadAdhocTest\",inputParam.inputData.loadAdhocTest),_respObject2);inputParam.postParamList[0]['clearFilter']='no';inputParam.postParamList[1]['clearFilter']='no';inputParam.postParamList[2]['clearFilter']='yes';dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}).catch(function(error){if(error.response.status===500){dispatch({type:DEFAULT_RETURN,payload:{loading:false,createTestConfirmMessage:undefined}});toast.error(error.message);}else{if(error.response.data.NeedConfirmAlert){dispatch({type:DEFAULT_RETURN,payload:{showConfirmAlert:true,createTestConfirmMessage:error.response.data.rtn,createTestConfirmParam:{inputParam:inputParam,masterData:masterData,modalName:modalName},loading:false,loadChildTest:false,showSample:undefined,loadAdhocTest:inputParam.inputData.loadAdhocTest//openModal: false,\n//selectedRecord: {}\n}});}else{var _payload5;dispatch({type:DEFAULT_RETURN,payload:(_payload5={},_defineProperty(_payload5,modalName,false),_defineProperty(_payload5,\"loading\",false),_defineProperty(_payload5,\"loadChildTest\",false),_defineProperty(_payload5,\"showSample\",undefined),_defineProperty(_payload5,\"openModal\",false),_defineProperty(_payload5,\"selectedRecord\",{}),_defineProperty(_payload5,\"createTestConfirmMessage\",undefined),_defineProperty(_payload5,\"loadAdhocTest\",false),_defineProperty(_payload5,\"loadEsign\",false),_payload5)});toast.info(error.response.data.rtn);}}});};};//ALPD-3615--End\nexport var copySampleService=function copySampleService(inputData,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/copySample\",inputData).then(function(response){// masterData = {\n//     ...masterData,\n//     ...response.data\n// };\nif(response.data.rtn===\"Success\"){var _respObject3;// if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n//     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n// }\nvar RegistrationGetSample=updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"],masterData.RegistrationGetSample);var selectedSample=response.data[\"selectedSample\"];var RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];var RegistrationGetTest=response.data[\"RegistrationGetTest\"];var selectedSubSample=RegistrationGetSubSample;RegistrationGetTest=sortData(RegistrationGetTest,\"npreregno\",\"desc\");var selectedTest=RegistrationGetTest.length>0?[RegistrationGetTest[0]]:[];var regSampleExisted=inputData&&inputData.orderTypeValue===2?true:false;if(inputData.nneedsubsample){RegistrationGetSubSample=sortData(response.data[\"RegistrationGetSubSample\"],'npreregno','desc');selectedSubSample=RegistrationGetSubSample.length>0?[RegistrationGetSubSample[0]]:[];RegistrationGetTest=RegistrationGetTest.filter(function(x){return x.ntransactionsamplecode===selectedSubSample[0].ntransactionsamplecode;});selectedTest=RegistrationGetTest.length>0?response.data[\"selectedTest\"]:[];}// RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\nif(inputData.multipleselectionFlag){selectedSample=updatedObjectWithNewElement(response.data[\"selectedSample\"],masterData.selectedSample);updatedObjectWithNewElement(response.data[\"selectedSubSample\"],masterData.RegistrationGetSubSample);updatedObjectWithNewElement(response.data[\"selectedTest\"],masterData.RegistrationGetTest);RegistrationGetSubSample=masterData.RegistrationGetSubSample;RegistrationGetTest=masterData.RegistrationGetTest;}masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{selectedSample:selectedSample,selectedSubSample:selectedSubSample,selectedTest:selectedTest,RegistrationGetSubSample:RegistrationGetSubSample,RegistrationGetTest:RegistrationGetTest,RegistrationGetSample:RegistrationGetSample});var respObject=(_respObject3={masterData:masterData,//...inputData,\nopenModal:false,loadEsign:false,showConfirmAlert:false,selectedRecord:undefined,loading:false,loadPreregister:false,showSample:undefined,openPortal:false,selectedSpec:{},selectComponent:{},SelectedTest:{},selectedComponent:{},Component:[]},_defineProperty(_respObject3,\"selectedRecord\",{}),_defineProperty(_respObject3,\"SelectedTest\",[]),_defineProperty(_respObject3,\"Test\",[]),_defineProperty(_respObject3,\"selectedComponent\",{}),_defineProperty(_respObject3,\"subSampleDataGridList\",[]),_defineProperty(_respObject3,\"preregConfirmMessage\",undefined),_defineProperty(_respObject3,\"regSampleExisted\",regSampleExisted),_defineProperty(_respObject3,\"loadImportFileData\",false),_defineProperty(_respObject3,\"loadImportSampleCountData\",false),_defineProperty(_respObject3,\"skip\",0),_defineProperty(_respObject3,\"subsampleskip\",0),_defineProperty(_respObject3,\"testskip\",0),_defineProperty(_respObject3,\"isDynamicViewSlideOut\",false),_respObject3);var postParamList=[];dispatch(postCRUDOrganiseTransSearch(postParamList,respObject));}else{toast.info(response.data.rtn);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false,preregConfirmMessage:undefined}});}}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};};","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/RegistrationAction.js"],"names":["React","rsapi","Axios","toast","filterRecordBasedOnTwoArrays","sortData","rearrangeDateFormat","convertDateTimetoString","fillRecordBasedOnCheckBoxSelection","getRecordBasedOnPrimaryKeyName","updatedObjectWithNewElement","replaceUpdatedObject","parentChildComboLoad","getSameRecordFromTwoArrays","constructjsonOptionList","constructjsonOptionDefault","childComboLoad","filterRecordBasedOnPrimaryKeyName","reArrangeArrays","childComboLoadForEdit","sortDataByParent","sortDataForDate","DEFAULT_RETURN","intl","initRequest","SampleType","checkBoxOperation","orderType","transactionStatus","crudMaster","postCRUDOrganiseTransSearch","constructOptionList","Operators","TextFilter","NumericFilter","DateFilter","ComboBox","Utils","QbUtils","leftArrowClass","openModal","checkTree","loadTree","getSampleTypeChange","Map","masterData","event","labelname","dispatch","post","then","response","data","item","type","payload","loading","catch","error","message","getSubSampleChildTabDetail","inputData","ntransactionsamplecode","length","inputParamData","userinfo","npreregno","url","activeSubSampleTab","responseData","selectedSubSample","showFilter","screenName","activeTestTab","activeTabIndex","status","info","selectedSample","activeSampleTab","warn","formatMessage","id","getRegTypeChange","getRegSubTypeChange","onApprovalConfigVersionChange","getComponentTestBySpec","selectedRecord","Component","Test","slno","selectedComponent","undefined","SelectedTest","Object","keys","popUptestDataState","skip","take","getTestfromDB","objComponent","LoginProps","nflag","component","value","label","dreceiveddate","userInfo","nspecsampletypecode","nneedsubsample","RealRegSubTypeValue","TestData","loadComponent","selectComponent","showSaveContinue","SelectedSource","parentPopUpSize","CurrentTime","unshift","EditComponent","urlArray","ComponentTestBySpec","timezone","all","lstComponentMap","lstComponent","timeZoneListMap","TimeZoneField","get","timeZoneList","scomponentname","ncomponentcode","ntzdreceivedate","findIndex","x","ntimezonecode","stimezoneid","childoperation","ChildscreenName","openChildModal","ReloadData","searchSampleRef","current","searchSubSampleRef","searchTestRef","testskip","testtake","subsampletake","subsampleskip","showSample","regSampleExisted","getTreeByProduct","comboData","inputParam","nsampletypecode","CLINICALTYPE","nportalrequired","YES","nordertypecode","nallottedspeccode","jsondata","PRODUCT","Specification","AgaramTree","ActiveKey","FocusKey","OpenNodes","selectedSpec","sversion","ntemplatemanipulationcode","dispatchData","subSampleDataGridList","autoExternalComponentLoadBasedOnSpec","autoPortalTestLoadBasedOnSpec","masterStatus","addMaster","masterIndex","getNewRegSpecification","selectedNode","operation","methodUrl","ntreetemplatemanipulationcode","activeKey","focusKey","primaryKey","AddComponents","sreceiveddate","stzdreceivedate","scomments","openPortal","getAllTest","specBasedComponent","selectPackage1","specBasedTestPackage","selectPackage","conditionalTestPackage","PackageData","TestCombined","componentTest","TestPackage","loadTest","getTest","TestGet","TestPackageGet","TestSectionGet","TestSectionData","PackageDataMap","TestSectionDataMap","TestSection","AllTest","selectSection","AllSection","selectedTestData","addsubSample","columnList","childColumnList","SubSamplecomboComponents","SubSamplewithoutCombocomponent","isServiceRequired","SubSamplecomboData","timeZoneService","actualService","parentcolumnlist","filter","inputtype","readonly","childcolumnlist","currentDate","dateService","datecolumnlist","timeZoneMap","defaultTimeZone","newcomboData","slanguagetypecode","selectedRecord1","testSectionDataMap","comboData1","map","componentrow","loadcurrentdate","nperiodcode","Date","loadselecteddate","hidebeforedate","hideafterdate","val","radiodefaultvalue","i","radioOptions","tags","text","loadSubSample","saveContinueData","parentSubSampleColumnList","childSubSampleColumnList","selectedobject","Reg","testPackageTest","subSampleBased","action","testpackage","testsection","ntestpackagecode","availableTest","TestSectionBasedonTestPackage","ntestgrouptestcode","nsectioncode","TestPakageTest","testSectionTest","addSubSampleSaveContinue","Map1","selectedTestPackageData","editSubSample","Componnet","comp","nregsubtypecode","portalOrder","containerType","containerList","nportalordercode","push","insertRegistration","requestUrl","isFileupload","formData","rtn","RegistrationGetSample","RegistrationGetSubSample","RegistrationGetTest","selectedTest","orderTypeValue","multipleselectionFlag","respObject","loadEsign","showConfirmAlert","loadPreregister","postParamList","preregConfirmMessage","console","log","NeedConfirmAlert","preregConfirmParam","insertRegistrationScheduler","SchedulerTransaction","getRegistrationSample","selectedFilter","getRegistrationsubSampleDetail","isParentValue","nregtypecode","ntransactionstatus","napprovalconfigcode","ndesigntemplatemappingcode","ntype","QUICKSELECTALL","SINGLEDESELECT","DESELECT","QUICKSELECTSTATUS","SINGLESELECT","OrderCodeData","hasOwnProperty","join","selectedPreregno","selectedTransactionsamplecode","noutsourcerequired","RealSampleTypeValue","NA","activeName","dataStateName","subSample","sample","skipInfo","oldSelectedTest","externalOrderAttachmentList","ExternalOrderAttachmentList","outsourceDetailsList","OutsourceDetailsList","oldSelectedSubSample","childTabsKey","removeElementFromArray","RegistrationTestComment","RegistrationTestAttachment","RegistrationParameter","RegistrationComment","MULTISELECT","wholeSubSampleList","b","includes","ResponseData","RegistrationTestComment1","ntransactiontestcode","RegistrationTestAttachment1","resultResponseData","RegistrationParameter1","ntransactiontestcode1","ResponseData1","RegistrationTestComment2","ntransactionTestCode","wholeTestList","keepOld","bool","sampleGridDataState","sort","multifilterInfo","multiFilterLoad","isGrandChildGetRequired","TestSelected","subSampleSelected","filterTestSameOldSelectedTest","filterSelectedSubSample","getRegistrationTestDetail","getTestChildTabDetailRegistration","subsamplecheck","SubSampleSelected","wholeSubSample","selectedSubSample1","dataStateArray","arr","RegistrationSampleComment","RegistrationSampleAttachment","testList","wholeSubsampleList","toString","selectedTransactioncode","acceptRegistration","acceptConfirmMessage","acceptConfirmParam","addMoreTest","ncontrolCode","sampleList","some","obj","selectedsample","findTransactionStatus","Set","REJECT","CANCELLED","RELEASED","findApprovalVersion","napprovalversioncode","findSampleSpec","loadChildTest","loadPrinter","props","createRegistrationTest","modalName","classUrl","createTestConfirmMessage","createTestConfirmParam","getEditRegistrationComboService","comboComponents","withoutCombocomponent","editableComboList","parentColumnList","primaryKeyName","editRegParam","mastertoedit","selectedRegistration","languagetypeCode","comboValues","optionList","valuemember","displaymember","source","isMultiLingual","date","specValue","sspecname","sregsubtypename","updateRegistration","regDateEditConfirmMessage","regEditParam","cancelTestAction","cancelSampleAction","addsubSampleRegistration","regcolumnList","selectRecord","regchildColumnList","regSubSamplecomboComponents","regSubSamplewithoutCombocomponent","ncontrolcode","loadRegSubSample","regSubSamplecomboData","regparentSubSampleColumnList","regchildSubSampleColumnList","saveSubSample","subSampleConfirmMessage","subSampleConfirmParam","getEditSubSampleComboService","editSubSampleRegParam","formattedMessage","onUpdateSubSampleRegistration","cancelSubSampleAction","isMapped","preregRecordToQuarantine","selectedSampleCode","selectedTestCode","activeTabId","ApprovalParameter","ResultUsedInstrument","ResultUsedTasks","ApprovalResultChangeHistory","ApprovalHistory","RegistrationTestHistory","toTimestamp","strDate","dt","getTime","getDynamicFilter","languageTypeCode","lstData","gridColumns","fields","datefileds","multilingual","filterfields","filterObject","ismultilingual","columnname","filterinputtype","creategridColumns","JSON","parse","rearrangeDateFormatforKendoDataTool","mul","selectedComponentpath","loadCustomSearchFilter","lstPatient","displayname","seletedFilterComponent","kendoSkip","kendoTake","kendoFilter","logic","filters","filterObjectForReactAwesomeFilter","awesomeTree","awesomeConfig","filterquery","selectedFieldRecord","onExecute","datapredef","CustomFilter","defaultItem","onChange","onFilterChange","call","nextFilter","target","field","title","width","filterFields","resposedata","predefinedtablename","predefinedismultilingual","predefineddisplaymember","predefinedvaluemember","valueSources","mainWidgetProps","fieldSettings","numericcondition","listValues","isMultiFilter","preobj","toLowerCase","name","operators","numeric","getDynamicFilterExecuteData","nformcode","dateValue","splitChar","index","ssitedatetime","indexOf","substring","firstField","split","timeSplitChar","datetime","dateArray","day","month","year","time","formatted","preRegDispatch","validateEsignforRegistration","dispatchMethods","screenData","createAdhocTest","getStorageCategoryForSendToStore","storeInputParam","sampleDetails","sendToStoreId","controlcode","geStorageCategory","getUnit","getApprovedLocation","needSubSample","subSampleRegParam","String","mainSampleRegParam","mastersendtostore","conditionMap","conditionMaster","conditionUnitMap","conditionUnitMaster","isneedSubSampleQty","approvedTreeData","unit","storageCategory","unitMaster","UpdateExternalOrderStatus","portallist","stringify","headers","Sample","Test1","saveComponent","filterTest","nexternalordersamplecode","getBarcodeAndPrinterService","getPrinter","getControlBasedBarcode","selectedPrinterData","sprintername","sbarcodename","printer","barcode","control","getOrderDetails","sexternalorderid","nexternalordertypecode","ExternalOrder","isRecordNotAvailable","onUpdateCancelExternalOrder","orders","getOutSourceSite","siteListMap","siteList","outSourceSiteList","outsourcetest","outSourceSiteData","getOutSourceSiteAndTest","Site","registrationtest","ssamplearno","str","regDate","outSourceTestList","toDateString","outsourceTest","OutSourcedTestGet","statusupdate","stransdisplaystatus","outsourceSampleTest","OutSourcedSubSampleGet","insertMultipleRegistration","registrationList","loadImportFileData","loadImportSampleCountData","insertRegSample","getExternalOrderTypeForMapping","inputParem","MANUAL","orderListMap","externalOrderList","orderList","orderDetails","MappingFields","showQRCode","selectedDetailField","getExternalOrderForMapping","orderMapping","orderRecords","externalOrderType","ExternalOrderType","externalOrderTypeMap","externalOrderTypeList","CancelExternalOrderSampleId","getAdhocTest","sampleadhoctest","UserInfo","testData","TestDataMap","NO","availableAdhocTest","loadAdhocTest","copySampleService"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport rsapi from '../rsapi';\r\nimport Axios from 'axios';\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport {\r\n    filterRecordBasedOnTwoArrays, sortData,\r\n    rearrangeDateFormat, convertDateTimetoString,\r\n    fillRecordBasedOnCheckBoxSelection, getRecordBasedOnPrimaryKeyName, updatedObjectWithNewElement,\r\n    replaceUpdatedObject, parentChildComboLoad, getSameRecordFromTwoArrays, constructjsonOptionList,\r\n    constructjsonOptionDefault, childComboLoad, filterRecordBasedOnPrimaryKeyName, reArrangeArrays, childComboLoadForEdit, sortDataByParent, sortDataForDate\r\n} from '../components/CommonScript'\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport { intl } from '../components/App';\r\nimport { initRequest } from './LoginAction';\r\nimport { //RegistrationSubType, RegistrationType, \r\n    SampleType,\r\n    checkBoxOperation,\r\n    orderType,\r\n    transactionStatus\r\n} from '../components/Enumeration';\r\nimport { crudMaster, postCRUDOrganiseTransSearch } from './ServiceAction'\r\n//import { getTestChildTabDetail } from './index.js'\r\nimport { constructOptionList } from '../components/CommonScript';\r\nimport {\r\n    Operators,\r\n    TextFilter,\r\n    NumericFilter,\r\n    // BooleanFilter,\r\n    DateFilter,\r\n    // EnumFilter,\r\n    //  EnumFilterProps,\r\n} from \"@progress/kendo-react-data-tools\";\r\nimport { ComboBox } from \"@progress/kendo-react-dropdowns\";\r\nimport { Utils as QbUtils } from \"@react-awesome-query-builder/ui\";\r\nimport { leftArrowClass } from '@progress/kendo-react-layout';\r\nimport { openModal } from './ApprovalConfigAction';\r\nconst { checkTree, loadTree } = QbUtils;\r\n\r\nexport function getSampleTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getRegTypeBySampleType\", Map)\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getSubSampleChildTabDetail(inputData) {\r\n    return function (dispatch) {\r\n        if (inputData.ntransactionsamplecode.length > 0) {\r\n            let inputParamData = {\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n                userinfo: inputData.userinfo,\r\n                npreregno: inputData.npreregno ? inputData.npreregno : -1\r\n            }\r\n            let url = null\r\n            switch (inputData.activeSubSampleTab) {\r\n                case \"IDS_SUBSAMPLEATTACHMENTS\":\r\n                    url = \"attachment/getSubSampleAttachment\"\r\n                    break;\r\n                case \"IDS_SUBSAMPLECOMMENTS\":\r\n                    url = \"comments/getSubSampleComment\"\r\n                    break;\r\n                case \"IDS_OUTSOURCEDETAILS\":\r\n                    url = \"registration/getOutsourceDetails\"\r\n                    break;\r\n                default:\r\n                    url = null\r\n                    break;\r\n            }\r\n            if (url !== null) {\r\n                dispatch(initRequest(true));\r\n                rsapi.post(url, inputParamData)\r\n                    .then(response => {\r\n                        let responseData = { ...response.data }\r\n                        responseData = sortData(responseData)\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                masterData: {\r\n                                    ...inputData.masterData,\r\n                                    ...responseData,\r\n                                    selectedSubSample: inputData.selectedSubSample,\r\n                                    // selectedTestCode: inputData.ntransactiontestcode,\r\n                                },\r\n                                loading: false,\r\n                                showFilter: false,\r\n                                activeSubSampleTab: inputData.activeSubSampleTab,\r\n                                screenName: inputData.screenName,\r\n                                activeTestTab: inputData.activeSubSampleTab,\r\n                                screenName: inputData.screenName,\r\n                                selectedId: null,\r\n                                activeTabIndex: inputData.activeTabIndex\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        }\r\n                        else {\r\n                            toast.info(error.response.data);\r\n                        }\r\n                    })\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab\r\n                    }\r\n                })\r\n            }\r\n        } else {\r\n\r\n            toast.warn(intl.formatMessage({ id: \"IDS_PLSSELECTASAMPLE\" }));\r\n        }\r\n    }\r\n}\r\n\r\nexport function getRegTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        rsapi.post(\"/registration/getRegSubTypeByRegType\", Map)\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegSubTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getRegTemplateTypeByRegSubType\", Map)\r\n\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function onApprovalConfigVersionChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getApprovalConfigBasedTemplateDesign\", Map)\r\n\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getComponentTestBySpec(Map, selectedRecord, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getComponentTestBySpec\", Map)\r\n            .then(response => {\r\n                const { Component, Test } = response.data;\r\n                let slno = Component.length > 0 ? Component[0].slno : -1;\r\n                let selectedComponent = Component.length > 0 ? Component[0] : undefined\r\n                let SelectedTest = [];\r\n                if (Object.keys(Test).length > 0) {\r\n                    SelectedTest = Test[slno];\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Component, Test, SelectedTest, selectedComponent, loading: false,\r\n                        selectedRecord, popUptestDataState: { skip: 0, take: 10 }\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTestfromDB(objComponent, LoginProps, nflag) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let component = { ...objComponent };\r\n        component[\"ncomponentcode\"] = objComponent[\"ncomponentcode\"] ? objComponent[\"ncomponentcode\"].value : -1;\r\n        component[\"nstoragelocationcode\"] = objComponent[\"nstoragelocationcode\"] ? objComponent[\"nstoragelocationcode\"].value : -1;\r\n        component[\"nstorageconditioncode\"] = objComponent[\"nstorageconditioncode\"] ? objComponent[\"nstorageconditioncode\"].value : -1;\r\n        component[\"slno\"] = LoginProps.Component ? Object.keys(LoginProps.Component).length + 1 : 0;\r\n        component[\"scomponentname\"] = objComponent[\"ncomponentcode\"].label;\r\n        component[\"sstoragelocationname\"] = objComponent[\"nstoragelocationcode\"] && objComponent[\"nstoragelocationcode\"].label ? objComponent[\"nstoragelocationcode\"].label : \"\";\r\n        component[\"sstorageconditionname\"] = objComponent[\"nstorageconditioncode\"] && objComponent[\"nstorageconditioncode\"].label ? objComponent[\"nstorageconditioncode\"].label : \"\";\r\n        component[\"ntzdmanufdate\"] = objComponent[\"ntzdmanufdate\"] ? objComponent[\"ntzdmanufdate\"].value : -1;\r\n        component[\"ntzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].value : -1;\r\n        component[\"stzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].label : \"\";\r\n        component[\"nplasmafilecode\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].value : -1;\r\n        component[\"splasmafilenumber\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].label : \"\";\r\n        const dreceiveddate = objComponent[\"dreceiveddate\"];\r\n        component[\"dreceiveddate\"] = dreceiveddate;//formatInputDate(objComponent[\"dreceiveddate\"], false);\r\n        component[\"sreceiveddate\"] = convertDateTimetoString(dreceiveddate, LoginProps.userInfo);//formatInputDateWithoutT(objComponent[\"dreceiveddate\"], false);//formatDate(objComponent[\"sreceiveddate\"]);\r\n        // rsapi.post(\"/registration/getTestfromDB\", { \"Component\": component })\r\n        rsapi.post(\"/registration/getTestfromDB\", {\r\n            nspecsampletypecode: component.nspecsampletypecode,\r\n            slno: component.slno,\r\n            nneedsubsample: LoginProps.masterData.RealRegSubTypeValue.nneedsubsample\r\n        })\r\n            .then(response => {\r\n                let TestData = response.data;\r\n                let slno = component.slno;\r\n                let SelectedTest = [];\r\n                let loadComponent = true;\r\n                let selectComponent = {};\r\n                let showSaveContinue = true;\r\n                let SelectedSource = [];\r\n                // let openChildModal = true;\r\n                let selectedComponent = undefined;\r\n                let parentPopUpSize = \"lg\"\r\n                // selectComponent = objComponent\r\n                if (nflag === 1) {\r\n                    loadComponent = true;\r\n                    objComponent[\"smanuflotno\"] = \"\";\r\n                    objComponent[\"dreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime)//new Date(LoginProps.CurrentTime);\r\n                    objComponent[\"sreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime)//new Date(LoginProps.CurrentTime);\r\n                    selectComponent = objComponent;\r\n                } else {\r\n                    loadComponent = false;\r\n                    parentPopUpSize = \"xl\"\r\n                    // openChildModal = false;\r\n                    showSaveContinue = false;\r\n                    selectComponent = undefined\r\n                }\r\n                let Test = LoginProps.Test || [];\r\n                let Component = LoginProps.Component || [];\r\n                Component.unshift(component);\r\n                selectedComponent = component;\r\n                Test[slno] = response.data;\r\n                SelectedTest = TestData;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Component, Test, SelectedTest, selectComponent, selectedComponent,\r\n                        loadComponent, showSaveContinue, parentPopUpSize, loading: false, SelectedSource\r\n                    }\r\n                });\r\n                // console.log(response.data);\r\n            })\r\n            .catch(error => {\r\n                //   console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function EditComponent(Map, component, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [];\r\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\",\r\n            Map);\r\n\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n\r\n        urlArray = [ComponentTestBySpec, timezone]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, true);\r\n                const TimeZoneField = response[1].data;\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n\r\n                component[\"ncomponentcode\"] = { label: component.scomponentname, value: component.ncomponentcode }\r\n                component[\"dreceiveddate\"] = rearrangeDateFormat(userInfo, component[\"sreceiveddate\"]);\r\n                component[\"scomments\"] = component[\"scomments\"]\r\n\r\n                let ntzdreceivedate = component.ntzdreceivedate;\r\n                if (component.ntzdreceivedate !== null && typeof component.ntzdreceivedate === \"object\") {\r\n                    ntzdreceivedate = component.ntzdreceivedate.value;\r\n                }\r\n                component[\"ntzdreceivedate\"] = component.ntzdreceivedate ?\r\n                    {\r\n                        \"label\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].stimezoneid, \"value\":\r\n                            TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].ntimezonecode\r\n                    } : \"\"\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadComponent: true, childoperation: \"update\",\r\n                        lstComponent, ChildscreenName: \"Component\",\r\n                        openChildModal: false, selectComponent: component, parentPopUpSize: \"lg\",\r\n                        timeZoneList, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function ReloadData(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData })\r\n            .then(response => {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    ...response.data\r\n                }\r\n                if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                    inputData.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    //masterData['searchedTests'] = undefined\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // let selectedFilter = inputData.selectedFilter;\r\n                // selectedFilter[\"fromdate\"] = \"\";\r\n                // selectedFilter[\"todate\"] = \"\";\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        testskip: 0,\r\n                        take: undefined,\r\n                        testtake: undefined,\r\n                        subsampletake: undefined,\r\n                        subsampleskip: 0,\r\n                        showSample: undefined, regSampleExisted: false,\r\n                        // filterColumnActive:false,\r\n                        //selectedFilter\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTreeByProduct(Map, selectedRecord, comboData, inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        if (Map.nsampletypecode === SampleType.CLINICALTYPE &&\r\n            Map.nportalrequired === transactionStatus.YES && selectedRecord[\"Order Type\"] && selectedRecord[\"Order Type\"].value == 2) {\r\n            Map = { ...Map, nordertypecode: selectedRecord[\"Order Type\"].value, nallottedspeccode: selectedRecord[\"Order\"] && selectedRecord[\"Order\"].item.jsondata.nallottedspeccode }\r\n        }\r\n        else if (Map.nsampletypecode === SampleType.PRODUCT && selectedRecord[\"Plant Order\"] && selectedRecord[\"Plant Order\"].item && selectedRecord[\"Plant Order\"].item.jsondata) {\r\n            Map = { ...Map, nallottedspeccode: selectedRecord[\"Plant Order\"] && selectedRecord[\"Plant Order\"].item.jsondata.nallottedspeccode }\r\n        }\r\n\r\n        rsapi.post(\"/registration/getTreeByProduct\", Map)\r\n            .then(response => {\r\n                let { Specification, AgaramTree, ActiveKey, FocusKey, OpenNodes } = [];\r\n                const selectedSpec = {}\r\n                if (response.data[\"rtn\"] === true) {\r\n                    Specification = constructOptionList(response.data[\"Specification\"] || [], \"nallottedspeccode\",\r\n                        \"sspecname\", undefined, undefined, true).get(\"OptionList\");\r\n                    AgaramTree = response.data[\"AgaramTree\"];\r\n                    ActiveKey = response.data[\"ActiveKey\"];\r\n                    FocusKey = response.data[\"FocusKey\"];\r\n                    OpenNodes = response.data[\"OpenNodes\"];\r\n                    //Manufacturer = response.data[\"Manufacturer\"];\r\n                    selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\r\n                        \"value\": Specification[0].value,\r\n                        \"label\": Specification[0].label,\r\n                        \"item\": Specification[0].item\r\n                    } : \"\";\r\n\r\n                    selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\"\r\n                    selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1\r\n                }\r\n                selectedRecord = { ...selectedRecord, ...selectedSpec }\r\n\r\n                if ((Map.nsampletypecode === SampleType.CLINICALTYPE &&\r\n                    Map.nportalrequired && Map.nportalrequired === 3\r\n                    && selectedRecord[\"Order Type\"] && selectedRecord[\"Order Type\"].value === 2)\r\n                    || (Map.nsampletypecode === SampleType.PRODUCT\r\n                        && selectedRecord[\"Plant Order\"] && selectedRecord[\"Plant Order\"].item && selectedRecord[\"Plant Order\"].item.jsondata.nallottedspeccode)) {\r\n\r\n                    let dispatchData = {\r\n                        Specification,\r\n                        selectedRecord,\r\n                        AgaramTree, ActiveKey, FocusKey, OpenNodes,\r\n                        Test: [],\r\n                        SelectedTest: [],\r\n                        loading: false,\r\n                        comboData,\r\n                        ...inputParam,\r\n                        selectedSpec,\r\n                        Component: [],\r\n                        selectComponent: {},\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList: [],\r\n                        \"userInfo\": Map.userInfo  // ALPD-3673 VISHAKH\r\n                    }\r\n\r\n\r\n                    if (Specification.length > 0) {\r\n                        if (Map.nsampletypecode === SampleType.CLINICALTYPE) {\r\n                            dispatch(autoExternalComponentLoadBasedOnSpec(dispatchData))\r\n                        }\r\n                        else if (Map.nsampletypecode === SampleType.PRODUCT) {\r\n                            dispatch(autoPortalTestLoadBasedOnSpec(dispatchData))\r\n                        }\r\n\r\n                    } else {\r\n                        let masterStatus = ''\r\n                        if (selectedRecord[\"Order\"] && selectedRecord[\"Order\"].item.jsondata.nallottedspeccode) {\r\n                            masterStatus = intl.formatMessage({ id: \"IDS_SELECTEDEXTERNALORDERSPECISRETIRED\" })\r\n                        }\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: { ...dispatchData, masterStatus }\r\n                        })\r\n                    }\r\n\r\n                }\r\n                else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            Specification,\r\n                            selectedRecord,\r\n                            AgaramTree, ActiveKey, FocusKey, OpenNodes,\r\n                            Test: [],\r\n                            SelectedTest: [],\r\n                            loading: false,\r\n                            comboData,\r\n                            ...inputParam,\r\n                            selectedSpec,\r\n                            Component: [],\r\n                            selectComponent: {},\r\n                            selectedComponent: {},\r\n                            subSampleDataGridList: [],\r\n                            addMaster: false,\r\n                            masterIndex: undefined,\r\n\r\n                        }\r\n                    });\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport const getNewRegSpecification = (inputParam, masterData) => {\r\n    return (dispatch) => {\r\n        if (inputParam.selectedNode !== null) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/registration/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam, ntreetemplatemanipulationcode: inputParam.selectedNode.ntemplatemanipulationcode })\r\n                .then(response => {\r\n                    sortData(response.data);\r\n                    let Specification = constructOptionList(response.data || [], \"nallottedspeccode\", \"sspecname\", false, false, true).get(\"OptionList\");\r\n                    let selectedComponent = undefined;\r\n                    inputParam.selectedRecord[\"nallottedspeccode\"] = Specification.length > 0 ? { value: Specification[0].value, label: Specification[0].label, item: Specification[0].item } : \"\";\r\n                    inputParam.selectedRecord[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\r\n                    inputParam.selectedRecord[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ActiveKey: inputParam.activeKey,\r\n                            FocusKey: inputParam.focusKey,\r\n                            primaryKey: inputParam.primaryKey,\r\n                            Specification: Specification,\r\n                            selectedNode: inputParam.selectedNode,\r\n                            selectedRecord: inputParam.selectedRecord,\r\n                            //  Test: [],\r\n                            selectedComponent,\r\n                            //ALPD-1793_fix\r\n                            // SelectedTest: [],\r\n                            loading: false,\r\n                            showSample: undefined\r\n                        }\r\n                    }\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.info(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\nexport function AddComponents(Map) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = []\r\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\",\r\n            Map);\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n\r\n        urlArray = [ComponentTestBySpec, timezone\r\n        ]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, true);\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n                let dreceiveddate = null;\r\n                if (lstComponent[0].item.sreceiveddate)\r\n                    dreceiveddate = rearrangeDateFormat(Map[\"userinfo\"], lstComponent[0].item.sreceiveddate);//new Date(lstComponent[0].item.sreceiveddate);//|| [];\r\n\r\n                let selectComponent = {\r\n                    sreceiveddate: dreceiveddate,\r\n                    dreceiveddate,\r\n                    ntzdreceivedate: { \"label\": Map[\"userinfo\"].stimezoneid, \"value\": Map[\"userinfo\"].ntimezonecode },\r\n                    stzdreceivedate: Map[\"userinfo\"].stimezoneid,\r\n                    scomments: \"\",\r\n                    nallottedspeccode: lstComponent[0].item.nallottedspeccode\r\n                };\r\n                let CurrentTime = dreceiveddate;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadComponent: true,\r\n                        lstComponent, dreceiveddate, ChildscreenName: \"Component\",\r\n                        showSaveContinue: true, openChildModal: false, childoperation: \"create\", selectComponent\r\n                        , parentPopUpSize: \"lg\", CurrentTime, timeZoneList, loading: false,\r\n                        openPortal: true, openModal: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getAllTest(objComponent, LoginProps, nneedsubsample, specBasedComponent, selectPackage1, specBasedTestPackage, selectPackage) {\r\n    return function (dispatch) {\r\n        if (Object.keys(objComponent).length > 0) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/registration/getTestfromDB\", {\r\n                nspecsampletypecode: objComponent.nspecsampletypecode,\r\n                slno: objComponent.slno,\r\n                nneedsubsample: nneedsubsample,\r\n                nallottedspeccode: objComponent.nallottedspeccode,\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage: specBasedTestPackage,\r\n                conditionalTestPackage: true,\r\n                //    ntestpackagecode:selectPackage.ntestpackagecode.value\r\n\r\n            })\r\n                .then(response => {\r\n                    let PackageData = [];\r\n                    let TestCombined = [];\r\n                    //   const TestCombined = response.data;\r\n                    let TestData = response.data;\r\n                    let Test = LoginProps.Test || [];\r\n                    let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n                    TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestgrouptestcode\");\r\n\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            TestCombined, TestPackage: PackageData, selectPackage: [],\r\n                            loadTest: true, openChildModal: false,\r\n                            ChildscreenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                            screenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                            operation: \"create\",\r\n                            childoperation: \"create\",\r\n                            parentPopUpSize: \"lg\", loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                })\r\n        } else {\r\n            toast.info(intl.formatMessage({ id: \"IDS_SELECTCOMPONENTTOADDTEST\" }));\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function getTest(objComponent, LoginProps, nneedsubsample, specBasedComponent, selectPackage1, specBasedTestPackage, selectPackage) {\r\n    return function (dispatch) {\r\n\r\n\r\n        // if (Object.keys(objComponent).length > 0) {\r\n        const urlArray = []\r\n\r\n        const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n            nspecsampletypecode: objComponent.nspecsampletypecode,\r\n            slno: objComponent.slno,\r\n            nneedsubsample: nneedsubsample,\r\n            nallottedspeccode: objComponent.nallottedspeccode,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: true,\r\n            //    ntestpackagecode:selectPackage.ntestpackagecode.value\r\n\r\n        });\r\n        urlArray[0] = TestGet;\r\n        const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n            nspecsampletypecode: objComponent.nspecsampletypecode,\r\n            slno: objComponent.slno,\r\n            nneedsubsample: nneedsubsample,\r\n            nallottedspeccode: objComponent.nallottedspeccode,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: true,\r\n        });\r\n        urlArray[1] = TestPackageGet;\r\n        const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\r\n            nspecsampletypecode: objComponent.nspecsampletypecode,\r\n            slno: objComponent.slno,\r\n            nneedsubsample: nneedsubsample,\r\n            nallottedspeccode: objComponent.nallottedspeccode,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: true,\r\n        });\r\n        urlArray[2] = TestSectionGet;\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray).then(response => {\r\n\r\n            // const TestCombined = [];\r\n            let PackageData = [];\r\n            let TestSectionData = [];\r\n            //  if (specBasedTestPackage) {\r\n            const PackageDataMap = constructOptionList(response[1].data.TestPackage || [], \"ntestpackagecode\",\r\n                \"stestpackagename\", undefined, undefined, true);\r\n            PackageData = PackageDataMap.get(\"OptionList\");\r\n\r\n            const TestSectionDataMap = constructOptionList(response[2].data.TestSection || [], \"nsectioncode\",\r\n                \"ssectionname\", undefined, undefined, true);\r\n            TestSectionData = TestSectionDataMap.get(\"OptionList\");\r\n            //    }\r\n            //    else {\r\n            let TestData = response[0].data;\r\n            let Test = LoginProps.Test || [];\r\n            let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n            let TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n            //    }\r\n            // const lstComponentMap = constructOptionList(TestCombined|| [], \"ntestgrouptestcode\",\r\n            //\"stestsynonym\", undefined, undefined, true);\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    TestCombined, TestPackage: PackageData, selectPackage: [], AllTest: TestData,\r\n                    TestSection: TestSectionData, selectSection: [],\r\n                    loadTest: true, openChildModal: false,\r\n                    ChildscreenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                    screenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                    operation: \"create\",\r\n                    childoperation: \"create\",\r\n                    parentPopUpSize: \"lg\", loading: false, AllSection: TestSectionData, selectedTestData: []\r\n                }\r\n            });\r\n        })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n        // } else {\r\n        //     toast.info(intl.formatMessage({ id: \"IDS_SELECTCOMPONENTTOADDTEST\" }));\r\n        // }\r\n\r\n    }\r\n}\r\n\r\nexport function addsubSample(masterData, userinfo, columnList,\r\n    selectComponent, childColumnList,\r\n    SubSamplecomboComponents, SubSamplewithoutCombocomponent,\r\n    specBasedComponent, Map, Component, isServiceRequired,\r\n    SubSamplecomboData, selectedRecord, conditionalTestPackage, specBasedTestPackage, LoginProps) {\r\n    if (isServiceRequired) {\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            const urlArray = []\r\n            const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n            urlArray[0] = timeZoneService;\r\n            const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n                parentcolumnlist: columnList ? columnList.filter(x => (x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter') && (x.readonly !== true)) : [],\r\n                childcolumnlist: childColumnList ? childColumnList : [],\r\n                userinfo\r\n            })\r\n            urlArray[1] = actualService;\r\n            if (specBasedComponent) {\r\n                const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                    ...Map,\r\n                    specBasedComponent: specBasedComponent,\r\n                    //   conditionalTestPackage:true\r\n                })\r\n                urlArray[2] = ComponentTestBySpec;\r\n            } else {\r\n                Component = Component ? Component : []\r\n                const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    nneedsubsample: Map[\"nneedsubsample\"],\r\n                    // nallottedspeccode: objComponent.nallottedspeccode,\r\n                    specBasedComponent: specBasedComponent,\r\n                    conditionalTestPackage: true,\r\n                    specBasedTestPackage: specBasedTestPackage\r\n                })\r\n                urlArray[2] = TestGet;\r\n                const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    // slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    specBasedComponent: specBasedComponent,\r\n                    //   specBasedTestPackage: specBasedTestPackage,\r\n                    //  conditionalTestPackage: conditionalTestPackage\r\n                });\r\n                urlArray[5] = TestPackageGet;\r\n\r\n                const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    // slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    specBasedComponent: specBasedComponent,\r\n                    //   specBasedTestPackage: specBasedTestPackage,\r\n                    //  conditionalTestPackage: conditionalTestPackage\r\n                });\r\n                urlArray[6] = TestSectionGet;\r\n            }\r\n            const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n                userinfo\r\n            })\r\n            urlArray[3] = currentDate\r\n            const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                userinfo\r\n            })\r\n            urlArray[4] = dateService\r\n            Axios.all(urlArray).then(response => {\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userinfo.stimezoneid, value: userinfo.ntimezonecode }\r\n                const newcomboData = parentChildComboLoad(columnList.filter(x => (x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter') && (x.readonly !== true)), response[1].data,\r\n                    selectComponent, childColumnList, SubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo)\r\n                let TestCombined = [];\r\n                let lstComponent = [];\r\n                let PackageData = [];\r\n                let TestSectionData = [];\r\n\r\n                const selectedRecord1 = newcomboData.selectedRecord\r\n                if (specBasedComponent) {\r\n                    const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, true);\r\n                    lstComponent = lstComponentMap.get(\"OptionList\");\r\n                    if (lstComponent.length > 0) {\r\n                        selectedRecord1['ncomponentcode'] = { ...lstComponent[0] }\r\n                        selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\r\n                        selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\r\n                        selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample\r\n\r\n                    }\r\n\r\n                } else {\r\n                    const PackageDataMap = constructOptionList(response[5].data.TestPackage || [], \"ntestpackagecode\",\r\n                        \"stestpackagename\", undefined, undefined, true);\r\n                    PackageData = PackageDataMap.get(\"OptionList\");\r\n                    const testSectionDataMap = constructOptionList(response[6].data.TestSection || [], \"nsectioncode\",\r\n                        \"ssectionname\", undefined, undefined, true);\r\n                    TestSectionData = testSectionDataMap.get(\"OptionList\");\r\n                    TestCombined = response[2].data\r\n                }\r\n                const comboData1 = newcomboData.comboData\r\n                SubSamplewithoutCombocomponent.map(componentrow => {\r\n                    if (componentrow.inputtype === \"date\") {\r\n                        if (componentrow.loadcurrentdate) {\r\n                            selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[3].data) : \"\";\r\n                            selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                        } else if (componentrow.nperiodcode) {\r\n                            selectedRecord1[componentrow.label + \"value\"] = response[4].data[componentrow.label] ?\r\n                                new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                            if (componentrow.loadselecteddate) {\r\n                                selectedRecord1[componentrow.label] = response[4].data[componentrow.label] ?\r\n                                    new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                            }\r\n                            //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                            //    new Date(response[2].data[componentrow.label]):null;\r\n                        } else {\r\n                            selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                        }\r\n\r\n                        if (componentrow.hidebeforedate) {\r\n                            selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                        }\r\n                        if (componentrow.hideafterdate) {\r\n                            selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                        }\r\n\r\n                    }\r\n                    else if (componentrow.inputtype === \"radio\"\r\n                        || componentrow.inputtype === \"checkbox\"\r\n                        || componentrow.inputtype === \"predefineddropdown\") {\r\n\r\n                        if (componentrow['radiodefaultvalue']) {\r\n                            if (componentrow.inputtype === \"checkbox\") {\r\n\r\n                                let val = ''\r\n                                componentrow.radiodefaultvalue &&\r\n                                    componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\r\n                                        val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',')\r\n                                    })\r\n\r\n                                selectedRecord1[componentrow.label] = val\r\n\r\n                            } else if (componentrow.inputtype === \"predefineddropdown\") {\r\n                                selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                    componentrow.radiodefaultvalue : \"\";\r\n                            } else {\r\n                                selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                    componentrow.radiodefaultvalue.label : \"\";\r\n                            }\r\n\r\n                        } else {\r\n                            if (componentrow.inputtype === \"radio\") {\r\n                                selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                                    componentrow.radioOptions.tags[0].text : \"\";\r\n                            }\r\n                        }\r\n\r\n                    }\r\n\r\n                })\r\n\r\n\r\n\r\n                const inputParam = {\r\n                    ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                    screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                    showSaveContinue: true,\r\n                    openChildModal: false,\r\n                    childoperation: \"create\",\r\n                    parentPopUpSize: \"lg\",\r\n                    loading: false,\r\n                    lstComponent,\r\n                    openPortal: true,\r\n                    openModal: false,\r\n                    operation: \"create\",\r\n                    loadSubSample: true,\r\n                    selectComponent: selectedRecord1,\r\n                    saveContinueData: { ...selectedRecord1 },\r\n                    SubSamplecomboData: comboData1,\r\n                    SubSamplecomboComponents,\r\n                    SubSamplewithoutCombocomponent,\r\n                    TestCombined,\r\n                    parentSubSampleColumnList: columnList,\r\n                    childSubSampleColumnList: childColumnList,\r\n                    timeZoneList,\r\n                    defaultTimeZone,\r\n                    masterData,\r\n                    selectPackage: [],\r\n                    TestPackage: PackageData,\r\n                    TestSection: TestSectionData, selectSection: [], AllTest: TestCombined, AllSection: TestSectionData\r\n                }\r\n\r\n                if (specBasedComponent) {\r\n\r\n\r\n                    dispatch(componentTest(selectedRecord1, false, specBasedComponent, Component, specBasedTestPackage, conditionalTestPackage, inputParam));\r\n\r\n                } else {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { ...inputParam } })\r\n                }\r\n            })\r\n                .catch(error => {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                })\r\n        }\r\n    } else {\r\n        const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\r\n            selectComponent, childColumnList,\r\n            SubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo)\r\n        return (dispatch) => {\r\n            if (!specBasedComponent) {\r\n                const urlArray = []\r\n                const ComponentTestBySpec = rsapi.post(\"/registration/getTestfromDB\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    // nneedsubsample: Map[\"nneedsubsample\"],\r\n                    ...Map,\r\n                    // nallottedspeccode: objComponent.nallottedspeccode,\r\n                    specBasedComponent: specBasedComponent,\r\n                    conditionalTestPackage: true,\r\n                    specBasedTestPackage: specBasedTestPackage\r\n                })\r\n                urlArray[0] = ComponentTestBySpec;\r\n                const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n                    userinfo\r\n                })\r\n                urlArray[1] = currentDate;\r\n                const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                    datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                    userinfo\r\n                })\r\n                urlArray[2] = dateService\r\n                const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n                    //  nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n                    nallottedspeccode: selectedRecord.nallottedspeccode.item.nallottedspeccode,\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    specBasedComponent: specBasedComponent,\r\n                    specBasedTestPackage: specBasedTestPackage,\r\n                    conditionalTestPackage: conditionalTestPackage\r\n                });\r\n                urlArray[3] = TestPackageGet;\r\n\r\n                const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\r\n                    //  nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n                    nallottedspeccode: selectedRecord.nallottedspeccode.item.nallottedspeccode,\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    specBasedComponent: specBasedComponent,\r\n                    specBasedTestPackage: specBasedTestPackage,\r\n                    conditionalTestPackage: conditionalTestPackage\r\n                });\r\n                urlArray[4] = TestSectionGet;\r\n                Axios.all(urlArray).then(response => {\r\n                    let TestCombined = []\r\n                    let PackageData = []\r\n                    let TestSectionData = []\r\n\r\n                    //  if (!specBasedTestPackage) {\r\n                    TestCombined = response[0].data\r\n                    // } \r\n                    // else {\r\n                    const PackageDataMap = constructOptionList(response[3].data.TestPackage || [], \"ntestpackagecode\",\r\n                        \"stestpackagename\", undefined, undefined, true);\r\n                    PackageData = PackageDataMap.get(\"OptionList\");\r\n\r\n                    const TestSectionDataMap = constructOptionList(response[4].data.TestSection || [], \"nsectioncode\",\r\n                        \"ssectionname\", undefined, undefined, true);\r\n                    TestSectionData = TestSectionDataMap.get(\"OptionList\");\r\n                    // if (PackageData.length === 0) {\r\n                    //    dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \r\n                    //} \r\n\r\n                    // }\r\n                    const selectedRecord1 = newcomboData.selectedRecord\r\n                    SubSamplewithoutCombocomponent.map(componentrow => {\r\n                        if (componentrow.inputtype === \"date\") {\r\n                            if (componentrow.loadcurrentdate) {\r\n                                selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[1].data) : \"\";\r\n                                selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                            } else if (componentrow.nperiodcode) {\r\n                                selectedRecord1[componentrow.label + \"value\"] = response[2].data[componentrow.label] ?\r\n                                    new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                if (componentrow.loadselecteddate) {\r\n                                    selectedRecord1[componentrow.label] = response[2].data[componentrow.label] ?\r\n                                        new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                }\r\n                                //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                                //    new Date(response[2].data[componentrow.label]):null;\r\n                            } else {\r\n                                selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                            }\r\n\r\n                            if (componentrow.hidebeforedate) {\r\n                                selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n                            if (componentrow.hideafterdate) {\r\n                                selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n\r\n                        }\r\n                        else if (componentrow.inputtype === \"radio\"\r\n                            || componentrow.inputtype === \"checkbox\"\r\n                            || componentrow.inputtype === \"predefineddropdown\") {\r\n\r\n                            if (componentrow['radiodefaultvalue']) {\r\n                                if (componentrow.inputtype === \"checkbox\") {\r\n\r\n                                    let val = ''\r\n                                    componentrow.radiodefaultvalue &&\r\n                                        componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\r\n                                            val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',')\r\n                                        })\r\n\r\n                                    selectedRecord1[componentrow.label] = val\r\n\r\n                                } else if (componentrow.inputtype === \"predefineddropdown\") {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                        componentrow.radiodefaultvalue : \"\";\r\n                                } else {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                        componentrow.radiodefaultvalue.label : \"\";\r\n                                }\r\n\r\n                            } else {\r\n                                if (componentrow.inputtype === \"radio\") {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                                        componentrow.radioOptions.tags[0].text : \"\";\r\n                                }\r\n                            }\r\n\r\n                        }\r\n\r\n                    })\r\n                    // if (masterData.RealRegSubTypeValue.nregsubtypecode === 6) {\r\n\r\n                    //     let portalOrder = selectedRecord && selectedRecord['Portal Order ID'] || {}\r\n                    //     let containerType = SubSamplecomboData['ContainerType'] || []\r\n                    //     let containerList = []\r\n                    //     const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\r\n                    //     containerType.map(x => {\r\n                    //         if (x.item.jsondata.nportalordercode === nportalordercode) {\r\n                    //             containerList.push(x)\r\n                    //         }\r\n                    //     })\r\n\r\n                    //     SubSamplecomboData['Container Type'] = containerList\r\n                    // }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                            screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                            showSaveContinue: true,\r\n                            openChildModal: false,\r\n                            childoperation: \"create\",\r\n                            parentPopUpSize: \"lg\",\r\n                            loading: false,\r\n                            lstComponent: [],\r\n                            openPortal: true,\r\n                            openModal: false,\r\n                            operation: \"create\",\r\n                            loadSubSample: true,\r\n                            selectComponent: selectedRecord1,\r\n                            saveContinueData: { ...selectedRecord1 },\r\n                            TestCombined: TestCombined,\r\n                            TestPackage: PackageData, TestSection: TestSectionData, selectSection: []\r\n                        }\r\n                    });\r\n                })\r\n            } else {\r\n\r\n                const urlArray = []\r\n                const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                    ...Map,\r\n                    specBasedComponent: specBasedComponent\r\n                })\r\n                urlArray[0] = ComponentTestBySpec;\r\n                const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n                    userinfo\r\n                })\r\n                urlArray[1] = currentDate;\r\n                const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                    datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                    userinfo\r\n                })\r\n                urlArray[2] = dateService\r\n                Axios.all(urlArray).then(response => {\r\n\r\n                    const selectedRecord1 = newcomboData.selectedRecord\r\n                    // const lstComponent =  response.data.lstComponent\r\n                    let lstComponent = response[0].data.lstComponent //filterRecordBasedOnTwoArrays(response.data.lstComponent, Component, \"ncomponentcode\")\r\n                    const lstComponentMap = constructOptionList(lstComponent || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, true);\r\n\r\n                    lstComponent = lstComponentMap.get(\"OptionList\");\r\n\r\n                    if (lstComponent.length > 0) {\r\n                        selectedRecord1['ncomponentcode'] = { ...lstComponent[0] }\r\n                        selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\r\n                        selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\r\n                        selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample\r\n\r\n                    }\r\n\r\n                    SubSamplewithoutCombocomponent.map(componentrow => {\r\n                        if (componentrow.inputtype === \"date\") {\r\n                            if (componentrow.loadcurrentdate) {\r\n                                selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[1].data) : \"\";\r\n                                selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                            } else if (componentrow.nperiodcode) {\r\n                                selectedRecord1[componentrow.label + \"value\"] = response[2].data[componentrow.label] ?\r\n                                    new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                if (componentrow.loadselecteddate) {\r\n                                    selectedRecord1[componentrow.label] = response[2].data[componentrow.label] ?\r\n                                        new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                }\r\n                                //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                                //    new Date(response[2].data[componentrow.label]):null;\r\n                            } else {\r\n                                selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                            }\r\n\r\n                            if (componentrow.hidebeforedate) {\r\n                                selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n                            if (componentrow.hideafterdate) {\r\n                                selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n\r\n                        }\r\n                        else if (componentrow.inputtype === \"radio\"\r\n                            || componentrow.inputtype === \"checkbox\"\r\n                            || componentrow.inputtype === \"predefineddropdown\") {\r\n\r\n                            if (componentrow['radiodefaultvalue']) {\r\n                                if (componentrow.inputtype === \"checkbox\") {\r\n\r\n                                    let val = ''\r\n                                    componentrow.radiodefaultvalue &&\r\n                                        componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\r\n                                            val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',')\r\n                                        })\r\n\r\n                                    selectedRecord1[componentrow.label] = val\r\n\r\n                                } else if (componentrow.inputtype === \"predefineddropdown\") {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                        componentrow.radiodefaultvalue : \"\";\r\n                                } else {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                        componentrow.radiodefaultvalue.label : \"\";\r\n                                }\r\n\r\n                            } else {\r\n                                if (componentrow.inputtype === \"radio\") {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                                        componentrow.radioOptions.tags[0].text : \"\";\r\n                                }\r\n                            }\r\n\r\n                        }\r\n\r\n                    })\r\n\r\n\r\n\r\n                    const inputParam = {\r\n                        ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                        screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                        showSaveContinue: true,\r\n                        openChildModal: false,\r\n                        childoperation: \"create\",\r\n                        parentPopUpSize: \"lg\",\r\n                        loading: false,\r\n                        lstComponent,\r\n                        openPortal: true,\r\n                        openModal: false,\r\n                        operation: \"create\",\r\n                        loadSubSample: true,\r\n                        selectComponent: selectedRecord1,\r\n                        saveContinueData: { ...selectedRecord1 },\r\n                        TestCombined: [],\r\n                        selectedTestData: [],\r\n                        selectPackage: [], selectSection: []\r\n                    }\r\n                    if (specBasedComponent) {\r\n                        dispatch(componentTest(selectedRecord1, false, specBasedComponent, Component, specBasedTestPackage, conditionalTestPackage, inputParam));\r\n\r\n                    } else {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { ...inputParam } })\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function componentTest(selectedobject, Reg, specBasedComponent, Component, specBasedTestPackage, conditionalTestPackage, inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const urlArray = []\r\n        Component = Component ? Component : []\r\n        const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n            nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n            slno: Component ? Object.keys(Component).length + 1 : 1,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: conditionalTestPackage,\r\n            nneedsubsample: selectedobject.nneedsubsample\r\n        });\r\n        urlArray[0] = TestGet;\r\n        const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n            nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n            slno: Component ? Object.keys(Component).length + 1 : 1,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: conditionalTestPackage\r\n        });\r\n        urlArray[1] = TestPackageGet;\r\n\r\n        const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\r\n            nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n            slno: Component ? Object.keys(Component).length + 1 : 1,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: conditionalTestPackage\r\n        });\r\n        urlArray[2] = TestSectionGet;\r\n        Axios.all(urlArray).then(response => {\r\n            let PackageData = []\r\n            let TestData = []\r\n            let TestSectionData = []\r\n            // if (specBasedTestPackage) {\r\n            const PackageDataMap = constructOptionList(response[1].data.TestPackage || [], \"ntestpackagecode\",\r\n                \"stestpackagename\", undefined, undefined, true);\r\n            PackageData = PackageDataMap.get(\"OptionList\");\r\n\r\n            const testSectionDataMap = constructOptionList(response[2].data.TestSection || [], \"nsectioncode\",\r\n                \"ssectionname\", undefined, undefined, true);\r\n            TestSectionData = testSectionDataMap.get(\"OptionList\");\r\n\r\n            // if (PackageData.length === 0) {\r\n            //     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \r\n            // } \r\n            //   }\r\n            //    else {\r\n            TestData = response[0].data;\r\n            //  }\r\n            //let Test = [];\r\n            // Test[selectedobject.slno] = TestData;\r\n            const Map = {}\r\n            if (Reg) {\r\n                Map[\"selectedRecord\"] = selectedobject\r\n            } else {\r\n                Map[\"selectComponent\"] = selectedobject\r\n            }\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    ...inputParam, TestCombined: TestData, AllTest: TestData, TestPackage: PackageData, ...Map, loading: false, selectedTestData: [],\r\n                    selectPackage: [], TestSection: TestSectionData, selectSection: [], AllSection: TestSectionData\r\n\r\n                }\r\n            });\r\n        })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\n// export function testPackageTest(selectedobject, Reg, specBasedComponent, Component,specBasedTestPackage,conditionalTestPackage,selectComponent,objComponent,LoginProps,selectPackage,subSampleBased,selectedSpec,nneedsubsample) {\r\n// export function testPackageTest(selectedobject, Reg, specBasedComponent, Component, selectComponent, objComponent, LoginProps, selectPackage, subSampleBased, selectedSpec, nneedsubsample, action) {\r\n\r\n//     return function (dispatch) {\r\n//         dispatch(initRequest(true));\r\n//         Component = Component ? Component : []\r\n//         // rsapi.post(\"/registration/getTestBasesdTestPackage\", {\r\n//         //     nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\r\n//         //     slno:subSampleBased?Component ? Object.keys(Component).length + 1 : 1:selectComponent.slno,\r\n//         //     specBasedComponent: specBasedComponent,\r\n//         //     ntestpackagecode: selectPackage.ntestpackagecode.value,\r\n//         //     nallottedspeccode:selectedSpec!==undefined?selectedSpec.value:selectedobject.nallottedspeccode\r\n\r\n//         // })\r\n//         rsapi.post(\"/registration/getTestBasesdTestPackage\", {\r\n//             // nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\r\n//             nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\r\n//             //     slno: subSampleBased ? Component ? Object.keys(Component).length + 1 : 1 : selectComponent.slno,\r\n//             specBasedComponent: specBasedComponent,\r\n//             ntestpackagecode: selectPackage.ntestpackagecode.value,\r\n//             nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\r\n\r\n//         })\r\n//             .then(response => {\r\n//                 const Map = {}\r\n//                 let TestData = response.data;\r\n//                 let Test = (action !== \"AddSubSample\") ? (LoginProps.Test || []) : [];\r\n\r\n//                 let componentTest = [];\r\n//                 if (subSampleBased) {\r\n//                     componentTest = Test[Component ? Object.keys(Component).length + 1 : 1] ? Test[Component ? Object.keys(Component).length + 1 : 1] : [];\r\n\r\n//                 } else {\r\n//                     componentTest = objComponent && Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n\r\n//                 }\r\n//                 const availableTest = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n//                 const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n\r\n//                 delete selectedobject.ntestgrouptestcode;\r\n//                 if (Reg) {\r\n//                     Map[\"selectedRecord\"] = selectedobject\r\n//                 } else {\r\n//                     Map[\"selectPackage\"] = selectPackage\r\n//                 }\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN,\r\n//                     payload: {\r\n//                         availableTest, TestCombined, ...Map, loading: false, selectedTestData: [], AllTest: LoginProps.TestCombined\r\n//                         //, selectPackage: []\r\n//                         // TestCombined,loadTest: true, openChildModal: false,\r\n//                         // ChildscreenName: \"Test\",\r\n//                         //  screenName: \"Test\",\r\n//                         // operation: \"create\",\r\n//                         //  childoperation: \"create\",\r\n//                         //   parentPopUpSize: \"lg\", loading: false\r\n//                     }\r\n//                 });\r\n//             })\r\n//             .catch(error => {\r\n//                 toast.error(error.message);\r\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n//             })\r\n//     }\r\n// }\r\n\r\nexport function testPackageTest(selectedobject, Reg, specBasedComponent, Component, selectComponent, objComponent, LoginProps, selectPackage, selectSection, subSampleBased, selectedSpec, nneedsubsample, action) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = []\r\n        let testpackage;\r\n        Component = Component ? Component : []\r\n        const testsection = rsapi.post(\"/registration/getTestSectionBasesdTestPackage\", {\r\n            nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\r\n            specBasedComponent: specBasedComponent,\r\n            ntestpackagecode: selectPackage.ntestpackagecode.value,\r\n            nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\r\n\r\n        })\r\n        //ALPD-3404\r\n        urlArray[0] = testsection;\r\n        testpackage = rsapi.post(\"/registration/getTestBasesdTestPackage\", {\r\n            nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\r\n            specBasedComponent: specBasedComponent,\r\n            ntestpackagecode: selectPackage.ntestpackagecode.value,\r\n            nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\r\n\r\n        })\r\n        urlArray[1] = testpackage;\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const Map = {}\r\n                let TestSectionData = [];\r\n                let TestData = response[1].data;\r\n                let Test = (action !== \"AddSubSample\") ? (LoginProps.Test || []) : [];\r\n\r\n                let componentTest = [];\r\n                if (subSampleBased) {\r\n                    componentTest = Test[Component ? Object.keys(Component).length + 1 : 1] ? Test[Component ? Object.keys(Component).length + 1 : 1] : [];\r\n\r\n                } else {\r\n                    componentTest = objComponent && Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n\r\n                }\r\n                const availableTest = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n                const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n\r\n\r\n                const testSectionDataMap = constructOptionList(response[0].data.TestSectionBasedonTestPackage || [], \"nsectioncode\",\r\n                    \"ssectionname\", undefined, undefined, true);\r\n                TestSectionData = testSectionDataMap.get(\"OptionList\");\r\n\r\n                delete selectedobject.ntestgrouptestcode;\r\n                delete selectedobject.nsectioncode;\r\n                if (Reg) {\r\n                    Map[\"selectedRecord\"] = selectedobject\r\n                } else {\r\n                    Map[\"selectPackage\"] = selectPackage\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        availableTest, TestCombined, ...Map, loading: false, selectedTestData: [],\r\n                        AllTest: LoginProps.AllTest,\r\n                        AllSection: LoginProps.AllSection, TestSection: TestSectionData, selectSection: [],\r\n                        TestPakageTest: TestCombined\r\n                        //, selectPackage: []\r\n                        // TestCombined,loadTest: true, openChildModal: false,\r\n                        // ChildscreenName: \"Test\",\r\n                        //  screenName: \"Test\",\r\n                        // operation: \"create\",\r\n                        //  childoperation: \"create\",\r\n                        //   parentPopUpSize: \"lg\", loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n//ALPD-3404\r\nexport function testSectionTest(selectedobject, Reg, specBasedComponent, Component, selectComponent, objComponent, LoginProps, selectPackage, selectSection, subSampleBased, selectedSpec, nneedsubsample, action) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        Component = Component ? Component : []\r\n        rsapi.post(\"/registration/getTestBasedTestSection\", {\r\n            nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\r\n            specBasedComponent: specBasedComponent,\r\n            ntestpackagecode: selectPackage.ntestpackagecode && selectPackage.ntestpackagecode.value || -1,\r\n            nsectioncode: selectSection.nsectioncode.value,\r\n            nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\r\n        })\r\n            .then(response => {\r\n                const Map = {}\r\n                let TestData = response.data;\r\n                let Test = (action !== \"AddSubSample\") ? (LoginProps.Test || []) : [];\r\n\r\n                let componentTest = [];\r\n                if (subSampleBased) {\r\n                    componentTest = Test[Component ? Object.keys(Component).length + 1 : 1] ? Test[Component ? Object.keys(Component).length + 1 : 1] : [];\r\n\r\n                } else {\r\n                    componentTest = objComponent && Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n\r\n                }\r\n                const availableTest = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n                const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n\r\n                delete selectedobject.ntestgrouptestcode;\r\n                if (Reg) {\r\n                    Map[\"selectedRecord\"] = selectedobject\r\n                } else {\r\n                    Map[\"selectPackage\"] = selectPackage\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        availableTest, TestCombined, ...Map, loading: false, selectedTestData: [],\r\n                        AllTest: LoginProps.AllTest\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function addSubSampleSaveContinue(Map1, Map,\r\n    specBasedComponent, Component, selectedTestData, lstComponent, LoginProps) {\r\n\r\n    //  const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\r\n    //     selectComponent, childColumnList, SubSamplewithoutCombocomponent)\r\n    return (dispatch) => {\r\n        if (!specBasedComponent) {\r\n            // rsapi.post(\"/registration/getTestfromDB\", {\r\n            //     nallottedspeccode: Map[\"nallottedspeccode\"],\r\n            //     nspecsampletypecode: Map[\"nspecsampletypecode\"],\r\n            //     slno: Map1.Component ? Object.keys(Map1.Component).length + 1 : 1,\r\n            //     specBasedComponent: specBasedComponent, nneedsubsample: Map[\"nneedsubsample\"]\r\n            // }).then(response => {\r\n            //     let TestCombined = Map1.TestCombined;//response.data\r\n            //     // let selectedTestPackageData = selectedTestPackageData && selectedTestPackageData.length > 0 ? selectedTestData : []\r\n\r\n            //     let selectedTestPackageData = selectedTestData && selectedTestData.length > 0 ? selectedTestData : []\r\n\r\n            //     const selectedTestPackageData1 = TestCombined.filter(function (x) {\r\n            //         return selectedTestPackageData.some(function (y) {\r\n            //             return x[\"ntestpackagetestcode\"] === y.value\r\n            //         })\r\n            //     });\r\n            //     selectedTestData = selectedTestData && selectedTestData.length > 0 ? selectedTestPackageData : []\r\n\r\n            //     const selectedTestData1 = TestCombined.filter(function (x) {\r\n            //         return selectedTestData.some(function (y) {\r\n            //             return x[\"ntestgrouptestcode\"] === y.value\r\n            //         })\r\n            //     });\r\n\r\n\r\n            //     selectedTestData = constructOptionList(selectedTestData1, \"ntestgrouptestcode\", \"stestsynonym\")\r\n            //     selectedTestData[\"ntestgrouptestcode\"] = selectedTestData.get(\"OptionList\")\r\n            //     selectedTestPackageData = constructOptionList(selectedTestPackageData1, \"ntestpackagetestcode\", \"stestpackagename\")\r\n            //     selectedTestPackageData[\"ntestpackagetestcode\"] = selectedTestPackageData.get(\"OptionList\")\r\n\r\n            //     // Map1.selectComponent = {};\r\n            //     Map1.selectComponent = { ...Map1.saveContinueData };\r\n            //     // Map1.selectComponent[\"ncomponentcode\"] = {};\r\n            //     dispatch({\r\n            //         type: DEFAULT_RETURN,\r\n            //         payload: {\r\n            //             ...Map1,\r\n            //             loading: false,\r\n            //             TestCombined,\r\n            //             selectPackage: [],\r\n            //             //TestPackage\r\n            //             //selectedTestData,\r\n            //             //selectedTestPackageData,\r\n            //             selectedTestData: [],\r\n            //             selectedTestPackageData: [],\r\n            //             masterStatus: intl.formatMessage({ id: \"IDS_SAVESUCCESSFULLY\" })\r\n            //         }\r\n            //     });\r\n            // })\r\n            Map1.selectComponent = { ...Map1.saveContinueData };\r\n            //ALPD-3404\r\n            const TestCombined = LoginProps.AllTest || Map1.TestCombined;\r\n            delete (Map1.TestCombined)\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    ...Map1,\r\n                    loading: false,\r\n                    TestCombined,\r\n                    selectPackage: [],\r\n                    selectSection: [],\r\n                    //TestPackage\r\n                    //selectedTestData,\r\n                    //selectedTestPackageData,\r\n                    selectedTestData: [],\r\n                    selectedTestPackageData: [],\r\n                    masterStatus: intl.formatMessage({ id: \"IDS_SAVESUCCESSFULLY\" }),\r\n                }\r\n            });\r\n\r\n        }\r\n        else {\r\n            // lstComponent = lstComponent.filter(x => x.item.nspecsampletypecode !== Map1.selectComponent[\"nspecsampletypecode\"])\r\n            // Map1.selectComponent = {};\r\n            // Map1.selectComponent[\"ncomponentcode\"] = {};           \r\n            // Map1.selectComponent[\"Sample Name\"] = \"\";\r\n            Map1.selectComponent = { ...Map1.saveContinueData }//, \"ncomponentcode\": {} };\r\n            const inputParam = {\r\n                ...Map1,\r\n                loading: false,\r\n                TestCombined: [],\r\n                selectPackage: [],\r\n                TestPackage: [],\r\n                selectedTestData: [],\r\n                selectedTestPackageData: [],\r\n                lstComponent,\r\n                masterStatus: intl.formatMessage({ id: \"IDS_SAVESUCCESSFULLY\" }),\r\n            }\r\n            dispatch(componentTest(Map1.selectComponent, false, specBasedComponent, Component, Map1.specBasedTestPackage, Map1.specBasedTestPackage ? true : false, inputParam));\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport function editSubSample(Map,\r\n    component, userInfo, specBasedComponent,\r\n    SubSamplecomboData, selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = []\r\n        let Componnet = {}\r\n        if (specBasedComponent) {\r\n            Componnet = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                ...Map\r\n            });\r\n        }\r\n        urlArray = [Componnet]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let comp = []\r\n                if (specBasedComponent) {\r\n                    comp = response[0].data.lstComponent\r\n                }\r\n                const lstComponentMap = constructOptionList(comp || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                if (Map.nregsubtypecode === 6) {\r\n                    let portalOrder = component['Container Type'] || {}\r\n                    let containerType = SubSamplecomboData['ContainerType'] || []\r\n                    let containerList = []\r\n                    const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\r\n                    containerType.map(x => {\r\n                        if (x.item.jsondata.nportalordercode === nportalordercode) {\r\n                            containerList.push(x)\r\n                        }\r\n                    })\r\n\r\n                    SubSamplecomboData['Container Type'] = containerList\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadSubSample: true, childoperation: \"update\",\r\n                        ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                        openChildModal: false, selectComponent: component,\r\n                        parentPopUpSize: \"lg\", loading: false, lstComponent, SubSamplecomboData\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function insertRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload) {\r\n            requestUrl = rsapi.post(\"/registration/createRegistrationWithFile\", inputParam.formData)\r\n        } else {\r\n            requestUrl = rsapi.post(\"/registration/createRegistration\", inputParam.inputData)\r\n        }\r\n        return requestUrl\r\n            //  rsapi.post(\"/registration/createRegistration\", inputParam.formData)\r\n            .then(response => {\r\n                if (response.data.rtn === \"Success\") {\r\n                    // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                    //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                    // }\r\n\r\n                    let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample, 'Sample');\r\n                    let selectedSample = response.data[\"selectedSample\"];\r\n                    let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    let selectedSubSample = RegistrationGetSubSample;\r\n                    RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                    let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                    let regSampleExisted = inputParam.inputData && inputParam.inputData.orderTypeValue === 2 ? true : false;\r\n                    if (inputParam.inputData.nneedsubsample) {\r\n                        RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                        selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                        RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                        selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                    }\r\n                    // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                    if (inputParam.multipleselectionFlag) {\r\n                        selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                        RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                        RegistrationGetTest = masterData.RegistrationGetTest;\r\n                    }\r\n\r\n                    masterData = {\r\n                        ...masterData, ...response.data,\r\n                        selectedSample, selectedSubSample, selectedTest,\r\n                        RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample,\r\n                    }\r\n                    if (masterData[\"kendoFilterList\"] !== undefined) {\r\n                        masterData[\"kendoFilterList\"] = undefined;\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        ...inputParam.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        selectedRecord: undefined,\r\n                        loading: false,\r\n                        loadPreregister: false,\r\n                        showSample: undefined,\r\n                        openPortal: false,\r\n                        selectedSpec: {},\r\n                        selectComponent: {},\r\n                        SelectedTest: {},\r\n                        selectedComponent: {},\r\n                        Component: [],\r\n                        selectedRecord: {},\r\n                        SelectedTest: [],\r\n                        Test: [],\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList: [],\r\n                        preregConfirmMessage: undefined,\r\n                        regSampleExisted, loadImportFileData: false, loadImportSampleCountData: false,\r\n                        skip: 0,\r\n                        subsampleskip: 0,\r\n                        testskip: 0,\r\n                        isDynamicViewSlideOut: false,\r\n                        // filterColumnActive:false,\r\n                    }\r\n                    inputParam.postParamList[0]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[1]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                } else {\r\n                    toast.info(response.data.rtn);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false, preregConfirmMessage: undefined } })\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                if (error.response.status === 500) {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false, preregConfirmMessage: undefined } })\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                preregConfirmMessage: error.response.data.rtn,\r\n                                preregConfirmParam: { inputParam, masterData },\r\n                                loading: false,\r\n                                showSample: undefined,\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        toast.error(error.message);\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                loading: false,\r\n                                showConfirmAlert: false, preregConfirmMessage: undefined\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function insertRegistrationScheduler(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/schedulerinsertRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                // if (response.data.rtn === \"Success\") {\r\n                //     let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\r\n                //     let selectedSample = response.data[\"selectedSample\"];\r\n                //     let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                //     let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                //     let selectedSubSample = RegistrationGetSubSample;\r\n                //     RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                //     let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                //     if (inputParam.inputData.nneedsubsample) {\r\n                //         RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                //         selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                //         RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                //         selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                //     }\r\n                //     // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                //     if (inputParam.multipleselectionFlag) {\r\n                //         selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                //         updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                //         updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                //         RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                //         RegistrationGetTest = masterDat..a.RegistrationGetTest;\r\n                //     }\r\n\r\n\r\n                //     masterData = {\r\n                //         ...masterData, ...response.data,\r\n                //         selectedSample, selectedSubSample, selectedTest,\r\n                //         RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\r\n                //     }\r\n                let respObject = {\r\n                    masterData: { ...masterData, SchedulerTransaction: response[\"data\"].SchedulerTransaction },\r\n                    ...inputParam.inputData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    showConfirmAlert: false,\r\n                    selectedRecord: undefined,\r\n                    loading: false,\r\n                    loadPreregister: false,\r\n                    showSample: undefined,\r\n                    openPortal: false,\r\n                    selectedSpec: {},\r\n                    selectComponent: {},\r\n                    SelectedTest: {},\r\n                    selectedComponent: {},\r\n                    Component: [],\r\n                    selectedRecord: {},\r\n                    SelectedTest: [],\r\n                    Test: [],\r\n                    selectedComponent: {},\r\n                    subSampleDataGridList: []\r\n                }\r\n                // inputParam.postParamList[0]['clearFilter'] = 'yes'\r\n                // dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                dispatch({ type: DEFAULT_RETURN, payload: { ...respObject } })\r\n                // } else {\r\n                //     toast.info(response.data.rtn);\r\n                //     dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n                // }\r\n\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegistrationSample(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData })\r\n            .then(response => {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    ...response.data\r\n                }\r\n                if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                    inputData.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                let respObject = {};\r\n                if (inputData.selectedFilter) {\r\n                    respObject = { selectedFilter: { ...inputData.selectedFilter } };\r\n                }\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        testskip: 0,\r\n                        take: undefined,\r\n                        testtake: undefined,\r\n                        subsampleskip: 0,\r\n                        subsampletake: undefined,\r\n                        showSample: undefined,\r\n                        ...respObject,\r\n                        activeSampleTab: inputData.inputData.activeSampleTab, regSampleExisted: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegistrationsubSampleDetail(inputData, isServiceRequired, isParentValue) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntransactionstatus: inputData.ntransactionstatus,\r\n            napprovalconfigcode: inputData.napprovalconfigcode,\r\n            activeTestTab: inputData.activeTestTab,\r\n            activeSampleTab: inputData.activeTestTab,\r\n            activeSubSampleTab: inputData.activeTestTab,\r\n            userinfo: inputData.userinfo,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            nneedsubsample: inputData.nneedsubsample,\r\n            // ntype: inputData.nneedsubsample === true ? inputData.checkBoxOperation === 7 ? 4 : undefined:2, //ALPD-497\r\n            ntype: inputData.nneedsubsample === true ? inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL ? checkBoxOperation.SINGLEDESELECT : undefined : checkBoxOperation.DESELECT, //ALPD-497\r\n            checkBoxOperation: inputData.nneedsubsample === true ?\r\n                inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS ? checkBoxOperation.SINGLESELECT : inputData.checkBoxOperation : inputData.checkBoxOperation,\r\n            OrderCodeData: inputData.selectedSample ? inputData.selectedSample.length > 0 && inputData.selectedSample.map(item => item.hasOwnProperty(\"OrderCodeData\") ? item.OrderCodeData : -1).join(\",\") : null,\r\n            selectedPreregno: inputData.selectedSample && inputData.selectedSample.length > 0 ? inputData.selectedSample.map(item => item.npreregno).join(\",\") : null,\r\n            selectedTransactionsamplecode: inputData.selectedSample && inputData.selectedSample.length > 1\r\n                && inputData.masterData.selectedSubSample ? inputData.masterData.selectedSubSample.map(item => item.ntransactionsamplecode).join(\",\") : null,\r\n            noutsourcerequired: inputData.masterData && inputData.masterData.RealSampleTypeValue ? inputData.masterData.RealSampleTypeValue.noutsourcerequired : transactionStatus.NA\r\n        }\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        const subSample = inputData.nneedsubsample\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(\"registration/getRegistrationSubSample\", inputParamData)\r\n                .then(response => {\r\n                    sortData(response.data, \"descending\", \"npreregno\");\r\n                    // if(isParentValue){\r\n                    response.data['RegistrationGetSubSample'] = sortDataByParent(response.data['RegistrationGetSubSample'], inputData.sample, \"npreregno\");\r\n                    //response.data['RegistrationGetTest']= sortDataByParent(response.data['RegistrationGetTest'],response.data['RegistrationGetSubSample'], \"ntransactionsamplecode\");\r\n                    //  }\r\n                    sortData(response.data['RegistrationAttachment']);\r\n                    sortData(response.data['RegistrationComment']);\r\n                    let masterData = {}\r\n                    let skipInfo = {}\r\n                    let oldSelectedTest = inputData.masterData.selectedTest || []\r\n                    let externalOrderAttachmentList = response.data && response.data.ExternalOrderAttachmentList;\r\n                    let outsourceDetailsList = response.data && response.data.OutsourceDetailsList;\r\n                    if (subSample) {\r\n                        let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n                        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                            inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\",\r\n                            inputData.removeElementFromArray);\r\n                        masterData = {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample,\r\n                            selectedPreregno: inputData.npreregno,\r\n                            selectedSubSample: inputData.masterData.RegistrationGetSubSample.length > 0 ?\r\n                                [inputData.masterData.RegistrationGetSubSample[0]] : [],\r\n                            activeTabIndex: inputData.activeTabIndex,\r\n                        }\r\n                        let RegistrationTestComment = [];\r\n                        let RegistrationTestAttachment = [];\r\n                        let RegistrationParameter = [];\r\n                        let RegistrationComment = [];\r\n                        //if (inputData.checkBoxOperation === 1 || inputData.checkBoxOperation === 7) {  \r\n                        //if (inputData.checkBoxOperation === 1) {\r\n                        if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\r\n\r\n                            const wholeSubSampleList = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                            // START ALPD-3625 VISHAKH\r\n                            // oldSelectedSubSample.forEach((subsample, index) => {\r\n                            //     if (!wholeSubSampleList.includes(subsample.ntransactionsamplecode)) {\r\n                            //         oldSelectedSubSample.splice(index, 1)\r\n                            //     }\r\n\r\n                            // })\r\n                            oldSelectedSubSample = oldSelectedSubSample.filter(item =>\r\n                                wholeSubSampleList.includes(item.ntransactionsamplecode)\r\n                            );\r\n                            // END ALPD-3625 VISHAKH\r\n                            if (oldSelectedSubSample.length > 0) {\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedSubSample: oldSelectedSubSample\r\n                                }\r\n                            }\r\n                            const selectedTest = getSameRecordFromTwoArrays(oldSelectedTest,\r\n                                masterData.selectedSubSample, 'npreregno')\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest\r\n                            }\r\n                        }\r\n                        //  if (inputData.checkBoxOperation === 7) {\r\n                        if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {\r\n                            // masterData = {\r\n                            //     ...masterData,\r\n                            //     APSelectedTest:responseData.APSelectedTest,\r\n                            //     AP_TEST:responseData.AP_TEST,\r\n                            //     ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\r\n                            // }\r\n\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                    let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                            masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                            masterData[\"RegistrationComment\"] = RegistrationComment;\r\n                        }\r\n                        //if (inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 5) {\r\n                        if (inputData.checkBoxOperation === checkBoxOperation.SINGLESELECT || inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest: masterData.RegistrationGetTest.length > 0 ? [masterData.RegistrationGetTest[0]] : []\r\n                            }\r\n\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [\r\n                                            // ...inputData.masterData.RegistrationTestComment, \r\n                                            ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [\r\n                                                // ...inputData.masterData.RegistrationTestAttachment, \r\n                                                ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [\r\n                                        // ...inputData.masterData.RegistrationParameter, \r\n                                        ...resultResponseData];\r\n                                    let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = response.data.RegistrationComment ?\r\n                                        [...response.data.RegistrationComment] : [];\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [\r\n                                            // ...inputData.masterData.RegistrationTestComment, \r\n                                            ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                            masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                            masterData[\"RegistrationComment\"] = RegistrationComment;\r\n\r\n                        }\r\n                        masterData['ExternalOrderAttachmentList'] = externalOrderAttachmentList;\r\n                        masterData['OutsourceDetailsList'] = outsourceDetailsList;\r\n                        let { testskip, testtake, subsampleskip, subsampletake } = inputData\r\n                        // let bool = false;\r\n                        // Commented bool value because no need to check bool condition to update skipInfo value.\r\n                        // if (inputData.masterData.RegistrationGetSubSample.length < inputData.subsampleskip) {\r\n                        testskip = 0;\r\n                        subsampleskip = 0;\r\n                        // bool = true\r\n                        // }\r\n                        // if (bool) {\r\n                        skipInfo = { testskip, testtake, subsampleskip, subsampletake }\r\n                        // }\r\n                    } else {\r\n\r\n                        //let oldSelectedTest = inputData.masterData.selectedTest\r\n                        //  let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n                        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                            inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\",\r\n                            inputData.removeElementFromArray);\r\n                        masterData = {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample,\r\n                            selectedPreregno: inputData.npreregno,\r\n                            selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                            selectedSubSample: inputData.masterData.RegistrationGetSubSample,\r\n                        }\r\n                        let RegistrationTestComment = [];\r\n                        let RegistrationParameter = [];\r\n                        let RegistrationTestAttachment = [];\r\n                        let RegistrationComment = [];\r\n\r\n                        //if (inputData.checkBoxOperation === 7 || inputData.checkBoxOperation === 1) {\r\n                        if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL || inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\r\n                            const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                            // START ALPD-3625 VISHAKH\r\n                            // oldSelectedTest.forEach((test, index) => {\r\n                            //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                            //         oldSelectedTest.splice(index, 1)\r\n                            //     }\r\n\r\n                            // })\r\n                            oldSelectedTest = oldSelectedTest.filter(item =>\r\n                                wholeTestList.includes(item.ntransactiontestcode)\r\n                            );\r\n                            // START ALPD-3625 VISHAKH\r\n                            let keepOld = false;\r\n                            let ntransactiontestcode;\r\n                            let npreregno;\r\n                            if (oldSelectedTest.length > 0) {\r\n                                keepOld = true\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedTest: oldSelectedTest,\r\n                                }\r\n                            } else {\r\n                                ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                    inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\"\r\n                                npreregno = inputData.masterData.RegistrationGetSample.length > 0 ?\r\n                                    inputData.masterData.RegistrationGetSample[0].npreregno : \"\"\r\n                            }\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                        inputData.masterData.RegistrationParameter : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ?\r\n                                            inputData.masterData.RegistrationTestAttachment : [] :\r\n                                            getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                                        inputData.masterData.RegistrationTestComment : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = keepOld ? inputData.masterData.RegistrationComment ?\r\n                                        inputData.masterData.RegistrationComment : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment, npreregno, \"npreregno\")\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                        inputData.masterData.RegistrationParameter : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                        }\r\n                        //else if (inputData.checkBoxOperation === 5) {\r\n                        else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                    let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = response.data.RegistrationComment ?\r\n                                        [...response.data.RegistrationComment] : [];\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                        }\r\n                        else {\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    RegistrationTestComment = response.data.RegistrationTestComment ?\r\n                                        [...response.data.RegistrationTestComment] : [];\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        RegistrationTestAttachment = response.data.RegistrationTestAttachment ?\r\n                                            [...response.data.RegistrationTestAttachment] : [];\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    RegistrationParameter = response.data.RegistrationParameter ?\r\n                                        [...response.data.RegistrationParameter] : [];\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = response.data.RegistrationComment ?\r\n                                        [...response.data.RegistrationComment] : [];\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    RegistrationParameter = response.data.RegistrationParameter ?\r\n                                        [...response.data.RegistrationParameter] : [];\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                        }\r\n                        masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                        masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                        masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                        masterData['RegistrationComment'] = RegistrationComment;\r\n                        let { testskip, testtake } = inputData\r\n                        let bool = false;\r\n\r\n                        if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\r\n                            testskip = 0;\r\n                            bool = true\r\n                        }\r\n                        if (bool) {\r\n                            skipInfo = { testskip, testtake }\r\n                        }\r\n\r\n                    }\r\n                    if (inputData.masterData.selectedSample && inputData.sampleGridDataState\r\n                        && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                    if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                        inputData.searchSubSampleRef.current.value = \"\"\r\n                        masterData['searchedSubSample'] = undefined\r\n                    }\r\n                    // let inputParam = { attachmentskip: undefined }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                   // Start of ALPD-4130 on Save Additional Filter - ATE-241\r\n                    let multifilterInfo = {}\r\n                    if (inputData.multiFilterLoad !== undefined) {\r\n                        if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                            inputData.searchSampleRef.current.value = \"\";\r\n                        }\r\n                        if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                            inputData.searchSubSampleRef.current.value = \"\";\r\n                        }\r\n                        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                            inputData.searchTestRef.current.value = \"\";\r\n                        }\r\n                        multifilterInfo = {\r\n                            multiFilterLoad: inputData.multiFilterLoad,\r\n                            openModal: inputData.openModal,\r\n                            searchSampleRef: inputData.searchSampleRef,\r\n                            searchSubSampleRef: inputData.searchSubSampleRef,\r\n                            searchTestRef: inputData.searchTestRef,\r\n                            testskip: inputData.testskip,\r\n                            subsampleskip: inputData.subsampleskip,\r\n                            skip: inputData.skip,\r\n                            // filterColumnActive:true\r\n                        }\r\n                    }\r\n                    //  End of ALPD-4130 ATE-241\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeSampleTab: inputData.activeSampleTab,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            skip: undefined,\r\n                            take: undefined,\r\n                            ...skipInfo,\r\n                            activeTabIndex: inputData.activeTabIndex,\r\n                            // ALPD-4130 Additional Filter Info ATE-241\r\n                            ...multifilterInfo,\r\n                            // inputParam:inputData\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n\r\n            let bool = false;\r\n            let skipInfo = {};\r\n            let { testskip, testtake, subsampletake, subsampleskip } = inputData;\r\n            let oldSelectedTest = inputData.masterData.selectedTest\r\n            let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n            // let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            let isGrandChildGetRequired = false;\r\n            let TestSelected = [];\r\n            let subSampleSelected = [];\r\n\r\n\r\n            if (inputData[\"statusNone\"]) {\r\n                TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n            else {\r\n                TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let selectedSample = inputData.selectedSample;\r\n                let filterTestSameOldSelectedTest = getSameRecordFromTwoArrays(oldSelectedTest, inputData.masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                let selectedTest = filterTestSameOldSelectedTest.length > 0 ? filterTestSameOldSelectedTest :\r\n                    inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [];\r\n                let ntransactiontestcode = selectedTest.length > 0 ? selectedTest.map(x => x.ntransactiontestcode).join(\",\") : \"-1\";\r\n                let selectedSubSample = inputData.masterData.RegistrationGetSubSample\r\n\r\n                if (subSample) {\r\n                    let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                    selectedSubSample = filterSelectedSubSample.length > 0 ? filterSelectedSubSample : [inputData.masterData.RegistrationGetSubSample[0]];\r\n                    if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampletake, subsampleskip }\r\n                    }\r\n\r\n                }\r\n                // START ALPD-3671 VISHAKH\r\n                let masterData = { ...inputData.masterData, selectedSample, selectedSubSample, selectedTest }\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // END ALPD-3671 VISHAKH\r\n                if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = { ...skipInfo, testskip, testtake }\r\n                }\r\n                // inputData = {\r\n                //     ...inputData, childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\r\n                //     selectedSubSample, checkBoxOperation: 3, skipInfo, masterData\r\n                // }\r\n                inputData = {\r\n                    ...inputData, childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\", \"RegistrationTestAttachment\"], ntransactiontestcode, masterData, selectedTest,\r\n                    selectedSubSample, checkBoxOperation: checkBoxOperation.SINGLESELECT, skipInfo, masterData\r\n                }\r\n                if (subSample) {\r\n                    if (selectedTest.length === 0) {\r\n                        inputData[\"npreregno\"] = selectedSubSample.map(x => x.npreregno).join(\",\")\r\n                        inputData[\"ntransactionsamplecode\"] = selectedSubSample.map(x => x.ntransactionsamplecode).join(\",\")\r\n                        // inputData[\"checkBoxOperation\"] = 3\r\n                        inputData[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT\r\n                        inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"]\r\n                        dispatch(getRegistrationTestDetail(inputData, true));\r\n                    } else {\r\n                        dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n                    }\r\n                } else {\r\n                    dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n                }\r\n            }\r\n            else {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    selectedSample: inputData.selectedSample,\r\n                    selectedPreregno: inputData.npreregno,\r\n                    selectedTest: TestSelected ? TestSelected : inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                    // RegistrationTestComment,\r\n                    selectedSubSample: subSampleSelected ? subSampleSelected : inputData.masterData.RegistrationGetSubSample\r\n                }\r\n                // START ALPD-3671 VISHAKH\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // END ALPD-3671 VISHAKH\r\n                let subsamplecheck = true;\r\n                if (subSample) {\r\n                    let SubSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                    if (SubSampleSelected.length > 0) {\r\n                        let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                        if (filterSelectedSubSample.length === 0) {\r\n                            let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                            // START ALPD-3625 VISHAKH\r\n                            // oldSelectedSubSample.forEach((test, index) => {\r\n                            //     if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                            //         oldSelectedSubSample.splice(index, 1)\r\n                            //     }\r\n                            //     return null;\r\n                            // })\r\n                            oldSelectedSubSample = oldSelectedSubSample.filter(item =>\r\n                                wholeSubSample.includes(item.ntransactionsamplecode)\r\n                            );\r\n                            // END ALPD-3625 VISHAKH\r\n                            if (oldSelectedSubSample.length === 0 && wholeSubSample.length > 0\r\n                                && masterData.selectedTest.length === 0) {\r\n                                const selectedSubSample1 = [inputData.masterData.RegistrationGetSubSample[0]];\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedSubSample: selectedSubSample1,\r\n                                    selectedTest: []\r\n                                }\r\n                                inputData = { ...inputData, ...masterData }\r\n                                inputData[\"npreregno\"] = selectedSubSample1.map(x => x.npreregno).join(\",\")\r\n                                inputData[\"ntransactionsamplecode\"] = selectedSubSample1.map(x => x.ntransactionsamplecode).join(\",\")\r\n                                // inputData[\"checkBoxOperation\"] = 3\r\n                                inputData[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT\r\n                                inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"]\r\n                                subsamplecheck = false;\r\n                                dispatch(getRegistrationTestDetail(inputData, true));\r\n\r\n                            }\r\n                        } else {\r\n                            oldSelectedSubSample = filterSelectedSubSample\r\n                        }\r\n\r\n                    } else {\r\n                        let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                        // START ALPD-3625 VISHAKH\r\n                        // oldSelectedSubSample.forEach((test, index) => {\r\n                        //     if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                        //         oldSelectedSubSample.splice(index, 1)\r\n                        //     }\r\n                        //     return null;\r\n                        // })\r\n                        oldSelectedSubSample = oldSelectedSubSample.filter(item =>\r\n                            wholeSubSample.includes(item.ntransactionsamplecode)\r\n                        );\r\n                        // END ALPD-3625 VISHAKH\r\n                    }\r\n\r\n                    if (subsamplecheck) {\r\n                        masterData = {\r\n                            ...masterData,\r\n                            selectedSubSample: oldSelectedSubSample\r\n                        }\r\n                    }\r\n                    if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampleskip, subsampletake }\r\n                    }\r\n                }\r\n                let wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                // START ALPD-3625 VISHAKH\r\n                // oldSelectedTest.forEach((test, index) => {\r\n                //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                //         oldSelectedTest.splice(index, 1)\r\n                //     }\r\n                //     return null;\r\n                // })\r\n                oldSelectedTest = oldSelectedTest.filter(item =>\r\n                    wholeTestList.includes(item.ntransactiontestcode)\r\n                );\r\n                // END ALPD-3625 VISHAKH\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedTest: oldSelectedTest\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\"\r\n                }\r\n                masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                let skipInfo = {};\r\n                if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = { ...skipInfo, testskip, testtake }\r\n                }\r\n\r\n                let dataStateArray = [\r\n                    { activeName: 'selectedSample', dataStateName: 'sampleGridDataState' },\r\n                    { activeName: 'RegistrationSourceCountry', dataStateName: 'sourceDataState' },\r\n                    { activeName: 'RegistrationTestComment', dataStateName: 'testCommentDataState' },\r\n                    { activeName: 'RegistrationParameter', dataStateName: 'resultDataState' },\r\n                ]\r\n                dataStateArray.map(arr => {\r\n                    if (inputData[arr.dataStateName] && masterData[arr.activeName] &&\r\n                        masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    return null;\r\n                });\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestTab: inputData.activeTestTab,\r\n                        ...skipInfo,\r\n                        // activeTabIndex: inputData.activeTabIndex\r\n                    }\r\n                })\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function getRegistrationTestDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n            ntransactionstatus: inputData.ntransactionstatus,\r\n            napprovalconfigcode: inputData.napprovalconfigcode,\r\n            activeTestTab: inputData.activeTestTab,\r\n            activeSampleTab: inputData.activeSampleTab,\r\n            activeSubSampleTab: inputData.activeSubSampleTab,\r\n            userinfo: inputData.userinfo,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            checkBoxOperation: inputData.checkBoxOperation,\r\n            nneedsubsample: inputData.nneedsubsample,\r\n            selectedTransactionsamplecode: inputData.selectedSubSample && inputData.selectedSubSample.length > 0 && inputData.selectedSubSample.map(item => item.ntransactionsamplecode).join(\",\"),\r\n            noutsourcerequired: inputData.masterData && inputData.masterData.RealSampleTypeValue ? inputData.masterData.RealSampleTypeValue.noutsourcerequired : transactionStatus.NA\r\n\r\n        }\r\n        const subSample = inputData.nneedsubsample;\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(\"registration/getRegistrationTest\", inputParamData)\r\n                .then(response => {\r\n                    //sortData(response.data);\r\n                    //ALPD-1609\r\n                    sortData(response.data, 'descending', 'npreregno')\r\n                    let oldSelectedTest = inputData.masterData.selectedTest || []\r\n                    let oldSelectedSubSample = inputData.masterData.selectedSubSample || []\r\n                    let outsourceDetailsList = response.data && response.data.OutsourceDetailsList;\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                        inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\",\r\n                        inputData.removeElementFromArray);\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        selectedSubSample: inputData.selectedSubSample,\r\n                        selectedTransactionsamplecode: inputData.ntransactionsamplecode,\r\n                        selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                            [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                        // RegistrationTestComment,\r\n                    }\r\n\r\n                    //let wholeRegistrationTestComments = [];\r\n                    let RegistrationTestComment = [];\r\n                    let RegistrationTestAttachment = [];\r\n                    let RegistrationParameter = [];\r\n                    let RegistrationSampleComment = [];\r\n                    let RegistrationSampleAttachment = [];\r\n                    //if (inputData.checkBoxOperation === 1) {\r\n                    if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\r\n                        const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                        // START ALPD-3625 VISHAKH\r\n                        // oldSelectedTest.forEach((test, index) => {\r\n                        //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        //         oldSelectedTest.splice(index, 1)\r\n                        //     }\r\n\r\n                        // })\r\n                        oldSelectedTest = oldSelectedTest.filter(item =>\r\n                            wholeTestList.includes(item.ntransactiontestcode)\r\n                        );\r\n                        // END ALPD-3625 VISHAKH\r\n                        let keepOld = false;\r\n                        let ntransactiontestcode;\r\n                        if (oldSelectedTest.length > 0) {\r\n                            keepOld = true\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest: oldSelectedTest,\r\n                            }\r\n                        } else {\r\n                            ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\"\r\n                        }\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                    inputData.masterData.RegistrationParameter : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                                    inputData.masterData.RegistrationTestComment : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ?\r\n                                    inputData.masterData.RegistrationTestAttachment : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                    inputData.masterData.RegistrationParameter : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n\r\n\r\n\r\n                    }\r\n                    // else if (inputData.checkBoxOperation === 5) {\r\n                    else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment1 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                }\r\n                                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                {\r\n                                    let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                    let RegistrationTestAttachment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                        RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestAttachment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                }\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment2 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                }\r\n                                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                        // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                    }\r\n                    // else if (inputData.checkBoxOperation === 7) {\r\n                    else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {\r\n                        let testList = reArrangeArrays(inputData.masterData.RegistrationGetSubSample, response.data.RegistrationGetTest, \"ntransactionsamplecode\");\r\n                        masterData = {\r\n                            ...masterData,\r\n                            selectedTest: testList ? testList.length > 0 ? [testList[0]] : [] : [],\r\n                            RegistrationGetTest: testList ? testList.length > 0 ? testList : [] : [],\r\n                            //ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\r\n                        }\r\n\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment1 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                }\r\n                                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                {\r\n                                    let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                    let RegistrationTestAttachment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                        RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestAttachment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                }\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                // let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                let RegistrationParameter1 = [...resultResponseData];\r\n                                let ntransactiontestcode1 = testList ? testList.length > 0 ? testList[0].ntransactiontestcode : inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1 : -1\r\n\r\n                                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment2 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                }\r\n                                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                        // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                    }\r\n                    else {\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = response.data.RegistrationTestComment ?\r\n                                    [...response.data.RegistrationTestComment] : [];\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = response.data.RegistrationTestAttachment ?\r\n                                    [...response.data.RegistrationTestAttachment] : [];\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                RegistrationParameter = response.data.RegistrationParameter ?\r\n                                    [...response.data.RegistrationParameter] : [];\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationParameter = response.data.RegistrationParameter ?\r\n                                    [...response.data.RegistrationParameter] : [];\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    if (subSample) {\r\n                        let wholeSubsampleList = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                        // START ALPD-3625 VISHAKH\r\n                        // oldSelectedSubSample.map((test, index) => {\r\n                        //     if (!wholeSubsampleList.includes(test.ntransactionsamplecode)) {\r\n                        //         oldSelectedSubSample.splice(index, 1)\r\n                        //     }\r\n                        //     return null;\r\n                        // })\r\n                        oldSelectedSubSample = oldSelectedSubSample.filter(item =>\r\n                            wholeSubsampleList.includes(item.ntransactionsamplecode)\r\n                        );\r\n                        // END ALPD-3625 VISHAKH\r\n                        let keepOld = false;\r\n                        let ntransactionsamplecode;\r\n                        if (oldSelectedSubSample.length > 0) {\r\n                            keepOld = true\r\n                        } else {\r\n                            ntransactionsamplecode = masterData.selectedSubSample[0].ntransactionsamplecode\r\n                        }\r\n\r\n                        switch (inputData.activeSubSampleTab) {\r\n                            case \"IDS_SUBSAMPLECOMMENTS\":\r\n                                RegistrationSampleComment = keepOld ? inputData.masterData.RegistrationSampleComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleComment\"\r\n                                dataStateName = \"subSampleCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationSampleAttachment = keepOld ? inputData.masterData.RegistrationSampleAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleAttachment\"\r\n                                dataStateName = \"subSampleAttachmentDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                    masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                    masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                    masterData[\"RegistrationSampleComment\"] = RegistrationSampleComment;\r\n                    masterData[\"RegistrationSampleAttachment\"] = RegistrationSampleAttachment;\r\n                    masterData['OutsourceDetailsList'] = outsourceDetailsList;\r\n                    let { testskip, testtake, subsampleskip, subsampletake } = inputData\r\n                    // let bool = false;\r\n                    // Commented bool value because no need to check bool condition to update skipInfo value.\r\n                    let skipInfo = {}\r\n                    // if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\r\n                    testskip = 0;\r\n                    // bool = true\r\n                    // }\r\n                    if (inputData.masterData.RegistrationGetSubSample.length < inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        // bool = true\r\n                    }\r\n                    // if (bool) {\r\n                    skipInfo = { testskip, testtake, subsampleskip, subsampletake }\r\n                    // }\r\n                    if (inputData.masterData.selectedSample && inputData.sampleGridDataState\r\n                        && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                    //  let inputParam = { attachmentskip: undefined }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            // activeTabIndex: inputData.activeTabIndex,\r\n                            activeSampleTab: inputData.activeSampleTab,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            skip: undefined,\r\n                            take: undefined,\r\n                            ...skipInfo,\r\n                            //  inputParam\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            let oldSelectedTest = inputData.masterData.selectedTest\r\n            // START ALPD-3625 VISHAKH\r\n            // let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            let TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\r\n            let isGrandChildGetRequired = false;\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            // END ALPD-3625 VISHAKH\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSubSample, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode.toString() : \"-1\";\r\n                let selectedSubSample = inputData.selectedSubSample;\r\n                // let selectedPreregno = inputData.npreregno;\r\n                let selectedTest = inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [];\r\n                // let selectedSubSample = inputData.masterData.RegistrationGetSubSample\r\n                let masterData = { ...inputData.masterData, selectedSubSample, selectedTest }\r\n                // inputData = {\r\n                //     ...inputData, childTabsKey: [\"RegistrationTestAttachment\", \"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\r\n                //     selectedSubSample, checkBoxOperation: 3, activeTabIndex: inputData.masterData.activeTabIndex\r\n                // }\r\n                // START ALPD-3671 VISHAKH\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // END ALPD-3671 VISHAKH\r\n                inputData = {\r\n                    ...inputData, childTabsKey: [\"RegistrationTestAttachment\", \"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\r\n                    selectedSubSample, checkBoxOperation: checkBoxOperation.SINGLESELECT, activeTabIndex: inputData.masterData.activeTabIndex\r\n                }\r\n                dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n            } else {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    selectedSubSample: inputData.selectedSubSample,\r\n                    selectedTransactioncode: inputData.ntransactionsamplecode,\r\n                    selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                        [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                }\r\n                // START ALPD-3671 VISHAKH\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // END ALPD-3671 VISHAKH\r\n                const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                // START ALPD-3625 VISHAKH\r\n                // oldSelectedTest.forEach((test, index) => {\r\n                //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                //         oldSelectedTest.splice(index, 1)\r\n                //     }\r\n                //     return null;\r\n                // })\r\n                oldSelectedTest = oldSelectedTest.filter(item =>\r\n                    wholeTestList.includes(item.ntransactiontestcode)\r\n                );\r\n                // END ALPD-3625 VISHAKH\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedTest: oldSelectedTest,\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                        inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\"\r\n                }\r\n                masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                    inputData.masterData.RegistrationTestComment : [] :\r\n                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                    inputData.masterData.RegistrationParameter : [] :\r\n                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                let skipInfo = {};\r\n                let dataStateArray = [\r\n                    { activeName: 'selectedSample', dataStateName: 'sampleGridDataState' },\r\n                    { activeName: 'RegistrationSourceCountry', dataStateName: 'sourceDataState' },\r\n                    { activeName: 'RegistrationTestComment', dataStateName: 'testCommentDataState' },\r\n                    { activeName: 'RegistrationParameter', dataStateName: 'resultDataState' },\r\n                ]\r\n                dataStateArray.map(arr => {\r\n                    if (inputData[arr.dataStateName] && masterData[arr.activeName] &&\r\n                        masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    return null;\r\n                });\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestTab: inputData.activeTestTab,\r\n                        // activeTabIndex: inputData.activeTabIndex,\r\n                        ...skipInfo\r\n                    }\r\n                })\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function acceptRegistration(inputParam, LoginProps) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/acceptRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data.rtn === undefined || response.data.rtn === \"Success\"\r\n                    || response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"\r\n                    || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\" || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\r\n                    // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                    //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                    // }\r\n\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                    delete response.data[\"RegistrationGetSample\"];\r\n                    delete response.data[\"RegistrationGetSubSample\"];\r\n                    delete response.data[\"RegistrationGetTest\"];\r\n                    let masterData = {\r\n                        ...LoginProps, ...response.data,\r\n                        selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                        selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                        selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        ...inputParam.inputData,\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        openModal: false,\r\n                        showSample: undefined,\r\n                        showConfirmAlert: false,\r\n                        acceptConfirmMessage: undefined,\r\n                        skip: 0,\r\n                        testskip: 0,\r\n                        take: undefined,\r\n                        testtake: undefined,\r\n                        subsampletake: undefined,\r\n                        subsampleskip: 0,\r\n                    }\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                    if (response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"\r\n                        || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\"\r\n                        || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\r\n                        toast.info(intl.formatMessage({ id: response.data.rtn }));\r\n                    }\r\n                } else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            loadEsign: false,\r\n                            openModal: false,\r\n                        }\r\n                    });\r\n                    toast.info(intl.formatMessage({ id: response.data.rtn }));\r\n                }\r\n            })\r\n            .catch(error => {\r\n                // toast.error(error.message);           \r\n\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                } else {\r\n                    //toast.info(intl.formatMessage({ id: error.response.data[\"rtn\"] }));\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                acceptConfirmMessage: error.response.data.rtn,\r\n                                acceptConfirmParam: { inputParam, masterData: LoginProps },\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        //toast.error(error.message);\r\n                        toast.warn(intl.formatMessage({ id: error.response.data[\"rtn\"] }));\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                loading: false,\r\n                                showConfirmAlert: false, acceptConfirmMessage: undefined\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport const addMoreTest = (inputParam, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        let { sampleList } = inputParam;\r\n        let value = false;\r\n        if (inputParam.selectedSample && inputParam.selectedSample.length > 0) {\r\n            if (inputParam.selectedSubSample && inputParam.selectedSubSample.length > 0) {\r\n                value = inputParam.selectedSubSample.some(obj => obj.nspecsampletypecode !== inputParam.selectedSubSample[0].nspecsampletypecode)\r\n                if (value) {\r\n                    return toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\" }));\r\n                }\r\n                //sampleList = sampleList ? [...sampleList.slice(inputParam.skip, inputParam.take)] : [];\r\n                //const selectedsample = getSameRecordFromTwoArrays(sampleList, inputParam.selectedSample, \"npreregno\");\r\n                // const selectsubsample = getSameRecordFromTwoArrays(subsampleList, inputParam.selectedsubsample, \"ntransactionsamplecode\");\r\n                //if (selectedsample && selectedsample.length > 0) {\r\n\r\n                const selectedsample = inputParam.selectedSample;\r\n                const findTransactionStatus = [...new Set(selectedsample.map(item => item.ntransactionstatus))];\r\n\r\n                if (findTransactionStatus.length === 1) {\r\n                    if (findTransactionStatus[0] !== transactionStatus.REJECT && findTransactionStatus[0] !== transactionStatus.CANCELLED) {\r\n                        if (findTransactionStatus[0] !== transactionStatus.RELEASED) {\r\n\r\n                            // if (selectsubsample && selectsubsample.length > 0) {\r\n                            //     const findSubSampleStatus = [...new Set(selectsubsample.map(item => item.ntransactionstatus))];\r\n                            //\r\n                            //     if (findSubSampleStatus[0] !== transactionStatus.REJECT && findSubSampleStatus[0] !== transactionStatus.CANCELLED) \r\n                            //     {                    \r\n\r\n                            const findApprovalVersion = [...new Set(selectedsample.map(item => item.napprovalversioncode))];\r\n                            if (findApprovalVersion.length === 1) {\r\n                                const findSampleSpec = [...new Set(selectedsample.map(item => item.nallottedspeccode))];\r\n                                //const findComponent = [...new Set(selectsubsample.map(item => item.ncomponentcode))];\r\n                                if (findSampleSpec.length === 1)//&& findComponent.length === 1 \r\n                                {\r\n                                    inputParam[\"snspecsampletypecode\"] = inputParam.selectedSubSample &&\r\n                                        [...new Set(inputParam.selectedSubSample.map(x => x.nspecsampletypecode))].join(\",\")\r\n                                    dispatch(initRequest(true));\r\n                                    const urlArray = []\r\n                                    const TestGet = rsapi.post(\"/registration/getMoreTest\", {\r\n                                        ...inputParam\r\n                                    });\r\n                                    urlArray[0] = TestGet;\r\n                                    const TestPackageGet = rsapi.post(\"/registration/getMoreTestPackage\", {\r\n                                        ...inputParam\r\n                                    });\r\n                                    urlArray[1] = TestPackageGet;\r\n\r\n                                    const TestSectionGet = rsapi.post(\"/registration/getMoreTestSection\", {\r\n                                        ...inputParam\r\n                                    });\r\n                                    urlArray[2] = TestSectionGet;\r\n\r\n                                    Axios.all(urlArray)\r\n                                        .then(response => {\r\n                                            let PackageData = []\r\n                                            let TestSectionData = []\r\n                                            const PackageDataMap = constructOptionList(response[1].data || [], \"ntestpackagecode\",\r\n                                                \"stestpackagename\", undefined, undefined, true);\r\n                                            PackageData = PackageDataMap.get(\"OptionList\");\r\n                                            const TestSectionDataMap = constructOptionList(response[2].data || [], \"nsectioncode\",\r\n                                                \"ssectionname\", undefined, undefined, true);\r\n                                            TestSectionData = TestSectionDataMap.get(\"OptionList\");\r\n                                            dispatch({\r\n                                                type: DEFAULT_RETURN,\r\n                                                payload: {\r\n                                                    availableTest: response[0].data,\r\n                                                    TestCombined: response[0].data,\r\n                                                    AllTest: response[0].data,\r\n                                                    TestPackage: PackageData,\r\n                                                    loadChildTest: true,\r\n                                                    loading: false, ncontrolCode,\r\n                                                    screenName: \"IDS_TEST\",\r\n                                                    operation: \"create\",\r\n                                                    openModal: true,\r\n                                                    parentPopUpSize: \"lg\",\r\n                                                    selectedRecord: {},\r\n                                                    showSample: undefined,\r\n                                                    loadPrinter: false, TestSection: TestSectionData, AllSection: TestSectionData\r\n                                                }\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                                            if (error.response.status === 500) {\r\n                                                toast.error(error.message);\r\n                                            } else {\r\n                                                toast.info(this.props.formatMessage({ id: error.response.data }));\r\n                                            }\r\n                                        });\r\n                                } else {\r\n                                    toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\" }));\r\n                                }\r\n                            } else {\r\n                                toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMEAPPROVALCONFIG\" }));\r\n                            }\r\n                            //     }\r\n                            //     else {\r\n                            //         toast.info(intl.formatMessage({ id: \"IDS_SUBSAMPLEISREJECTEDORCANCELLED\" }));\r\n                            //     }\r\n                            // }                               \r\n                        }\r\n                        else {\r\n                            toast.info(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORRELEASEDSAMPLES\" }));\r\n                        }\r\n                    }\r\n                    else {\r\n                        ////     toast.info(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORCANCELLEDREJECTSAMPLES\" }));\r\n                        toast.info(intl.formatMessage({ id: \"IDS_SAMPLEISREJECTEDORCANCELLED\" }));\r\n                    }\r\n                } else {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESTATUS\" }));\r\n                }\r\n                // } else {\r\n                //     toast.info(intl.formatMessage({ id: \"IDS_SELECTSAMPLE\" }));\r\n                // }\r\n            } else {\r\n                toast.info(intl.formatMessage({ id: \"IDS_SELECTSUBSAMPLE\" }));\r\n            }\r\n        } else {\r\n            toast.info(intl.formatMessage({ id: \"IDS_SELECTSAMPLE\" }));\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport const createRegistrationTest = (inputParam, masterData, modalName) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData })\r\n            .then(response => {\r\n                let RegistrationGetTest = updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"], response.data[\"RegistrationGetTest\"]);\r\n\r\n                //let RegistrationGetSubSample = updatedObjectWithNewElement(masterData[\"RegistrationGetSubSample\"], response.data[\"RegistrationGetSubSample\"]);\r\n                masterData = {\r\n                    ...masterData,\r\n                    RegistrationGetTest: sortData(RegistrationGetTest, \"descending\", \"ntransactiontestcode\"),\r\n                    RegistrationGetSubSample: sortData(response.data[\"RegistrationGetSubSample\"], \"descending\", \"ntransactionsamplecode\"),\r\n                    selectedTest: response.data[\"RegistrationGetTest\"],\r\n                    //  selectedSubSample: response.data[\"RegistrationGetSubSample\"],\r\n                    selectedSubSample: response.data[\"selectedSubSample\"],\r\n                    RegistrationParameter: response.data.RegistrationParameter,\r\n                    RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, masterData.RegistrationGetSample, 'npreregno')\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    [modalName]: false,\r\n                    loading: false,\r\n                    loadChildTest: false,\r\n                    showSample: undefined,\r\n                    openModal: false,\r\n                    selectedRecord: {},\r\n                    showConfirmAlert: false,\r\n                    createTestConfirmMessage: undefined\r\n\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no';\r\n                inputParam.postParamList[1]['clearFilter'] = 'no';\r\n                inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n\r\n            })\r\n            .catch(error => {\r\n\r\n                if (error.response.status === 500) {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, createTestConfirmMessage: undefined } })\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                createTestConfirmMessage: error.response.data.rtn,\r\n                                createTestConfirmParam: { inputParam, masterData, modalName },\r\n\r\n                                //[modalName]: false,\r\n                                loading: false,\r\n                                loadChildTest: true,\r\n                                showSample: undefined\r\n\r\n\r\n                                //openModal: false,\r\n                                //selectedRecord: {}\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                [modalName]: false,\r\n                                loading: false,\r\n                                loadChildTest: false,\r\n                                showSample: undefined,\r\n                                openModal: false,\r\n                                selectedRecord: {},\r\n                                createTestConfirmMessage: undefined\r\n\r\n\r\n                            }\r\n                        });\r\n                        toast.info(error.response.data.rtn);\r\n                    }\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getEditRegistrationComboService(inputParam, columnList,\r\n    selectedRecord1, childColumnList, comboComponents,\r\n    withoutCombocomponent, editableComboList) {\r\n    return function (dispatch) {\r\n\r\n        dispatch(initRequest(true));\r\n        const { userInfo, operation } = { ...inputParam };\r\n        let masterData = inputParam[\"masterData\"];\r\n        let parentColumnList = [...columnList, ...editableComboList];\r\n        if (masterData[\"selectedSample\"].length > 1 ||\r\n            masterData[\"selectedSample\"]\r\n                .findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"mastertoedit\"][inputParam.primaryKeyName])\r\n            === -1) {\r\n            inputParam.editRegParam[\"getSampleChildDetail\"] = true;\r\n        }\r\n        masterData[\"selectedSample\"] = [];\r\n        masterData[\"selectedSample\"].push(inputParam[\"mastertoedit\"]);\r\n\r\n        const npreregno = inputParam.mastertoedit[inputParam.primaryKeyName];\r\n        let urlArray = [];\r\n\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        // const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n        //     parentcolumnlist: columnList,\r\n        //     childcolumnlist: childColumnList,\r\n        //     userinfo: userInfo\r\n        // })\r\n        const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationDetails\", {\r\n            ...inputParam.editRegParam, npreregno, parentcolumnlist: parentColumnList,\r\n            childcolumnlist: childColumnList,\r\n            userinfo: userInfo, nallottedspeccode: inputParam.mastertoedit.nallottedspeccode || -1\r\n        })\r\n\r\n        const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n            datecolumnlist: withoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n            userinfo: userInfo\r\n        })\r\n\r\n        urlArray = [timeZoneService, selectedRegistration, dateService]\r\n\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = { ...response[1].data[\"EditData\"] };\r\n                selectedRecord = { ...selectedRecord, ...selectedRecord['jsondata'] }\r\n                // const recordToEdit = { ...response[2].data[\"SelectedRegistration\"][0] };\r\n                //  const currentTime = rearrangeDateFormat(userInfo, response[6].data);\r\n\r\n\r\n\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userInfo.stimezoneid, value: userInfo.ntimezonecode }\r\n\r\n\r\n                //  const newcomboData = parentChildComboLoad(columnList, response[1].data,\r\n                // selectedRecord, childColumnList, withoutCombocomponent)\r\n\r\n                if (selectedRecord.ntransactionstatus === transactionStatus.CANCELLED\r\n                    || selectedRecord.ntransactionstatus === transactionStatus.REJECT) {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_CANNOTEDITCANCELLEDSAMPLE\" }));\r\n                    // ALPD-3393\r\n                    if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\r\n                        masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\r\n                    }\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, masterData } });\r\n                }\r\n                else {\r\n                    const languagetypeCode = undefined\r\n                    const comboData = response[1].data;\r\n                    delete comboData['EditData']\r\n                    let comboValues = {}\r\n                    if (columnList.length > 0) {\r\n                        columnList.map(x => {\r\n                            if (x.inputtype === 'combo') {\r\n                                if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \r\n                                {\r\n                                    if (comboData[x.label].length > 0) {\r\n                                        if (comboData[x.label][0].label === undefined) {\r\n                                            const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                            comboData[x.label] = optionList.get(\"OptionList\");\r\n                                        } else {\r\n                                            comboData[x.label] = comboData[x.label]\r\n                                            const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                        }\r\n                                    } else {\r\n                                        comboData[x.label] = []\r\n                                    }\r\n                                    //comboValues = childComboLoad(x, comboData, selectedRecord, \r\n                                    //   childColumnList, withoutCombocomponent)\\\r\n                                    comboValues = childComboLoadForEdit(x, comboData, selectedRecord,\r\n                                        childColumnList, withoutCombocomponent)\r\n                                } else {\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                comboValues = {\r\n                                    comboData: comboData,\r\n                                    ...comboValues\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        comboValues = {\r\n                            \"comboData\": comboData,\r\n                        }\r\n                    }\r\n                    if (editableComboList.length > 0) {\r\n                        editableComboList.map(x => {\r\n                            if (x.inputtype === 'combo') {\r\n                                if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \r\n                                {\r\n                                    if (comboData[x.label].length > 0) {\r\n                                        if (comboData[x.label][0].label === undefined) {\r\n                                            const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                            comboData[x.label] = optionList.get(\"OptionList\");\r\n                                        } else {\r\n                                            comboData[x.label] = comboData[x.label]\r\n                                            const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                        }\r\n                                    } else {\r\n                                        comboData[x.label] = []\r\n                                    }\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n\r\n                                } else {\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                comboValues = {\r\n                                    comboData: comboData,\r\n                                    ...comboValues\r\n                                }\r\n                            }\r\n                        })\r\n\r\n                    }\r\n\r\n                    withoutCombocomponent.map(date => {\r\n                        if (date.inputtype === 'date') {\r\n                            selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\r\n                                rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\"\r\n\r\n                            if (date.nperiodcode) {\r\n                                selectedRecord[date.label + \"value\"] = response[2].data[date.label] ?\r\n                                    new Date(response[2].data[date.label][\"datevalue\"]) : null;\r\n                            } else {\r\n                                selectedRecord[date.label + \"value\"] = new Date();\r\n                            }\r\n\r\n                            if (date.hidebeforedate) {\r\n                                selectedRecord[date.label + \"min\"] = selectedRecord[date.label + \"value\"]\r\n                            }\r\n                            if (date.hideafterdate) {\r\n                                selectedRecord[date.label + \"max\"] = selectedRecord[date.label + \"value\"]\r\n                            }\r\n                        }\r\n                    })\r\n\r\n                    let { Specification, AgaramTree, ActiveKey, FocusKey, OpenNodes, specValue } = [];\r\n                    specValue = [{ nallottedspeccode: selectedRecord.nallottedspeccode, sspecname: selectedRecord.sspecname, sversion: selectedRecord.sversion }];\r\n                    const selectedSpec = {}\r\n                    Specification = constructOptionList(specValue || [], \"nallottedspeccode\",\r\n                        \"sspecname\", undefined, undefined, true).get(\"OptionList\");\r\n                    //AgaramTree = response[1].data[\"AgaramTree\"];\r\n                    // ActiveKey = response[1].data[\"FocusKey\"];\r\n                    //FocusKey = response[1].data[\"ActiveKey\"];\r\n                    //OpenNodes = response[1].data[\"OpenNodes\"];\r\n                    //Manufacturer = response.data[\"Manufacturer\"];\r\n                    selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\r\n                        \"value\": Specification[0].value,\r\n                        \"label\": Specification[0].label,\r\n                        \"item\": Specification[0].item\r\n                    } : \"\";\r\n\r\n                    selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\"\r\n                    selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ?\r\n                        Specification[0].item.ntemplatemanipulationcode : -1\r\n                    selectedRecord = { ...selectedRecord, ...selectedSpec }\r\n\r\n                    if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\r\n                        masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            // AgaramTree,\r\n                            //FocusKey,\r\n                            // ActiveKey,\r\n                            //OpenNodes,\r\n                            selectedSpec,\r\n                            Specification,\r\n                            // statustoEditDetail: response[2].data[\"ApprovalConfigRole\"] || {},\r\n                            // currentTime,\r\n                            operation: \"update\",\r\n                            screenName: inputParam.masterData.RealRegSubTypeValue.sregsubtypename,\r\n                            // PopUpLabel: popUpLabel,\r\n                            timeZoneList,\r\n                            defaultTimeZone,\r\n                            selectedRecord,\r\n                            openPortal: true,\r\n                            ncontrolCode: inputParam.editRegParam.ncontrolCode,\r\n                            loadPreregister: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            loading: false,\r\n                            showSample: undefined,\r\n                            comboData: comboValues.comboData,\r\n                            childColumnList, comboComponents,\r\n                            withoutCombocomponent,\r\n                            columnList,\r\n                            masterData\r\n                            //  regRecordToEdit:recordToEdit\r\n\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.info(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n\r\n    }\r\n}\r\n\r\nexport function updateRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload) {\r\n            requestUrl = rsapi.post(\"/registration/updateRegistrationWithFile\", inputParam.formData)\r\n        } else {\r\n            requestUrl = rsapi.post(\"/registration/updateRegistration\", inputParam.inputData)\r\n        }\r\n        return requestUrl\r\n            //   rsapi.post(\"/registration/updateRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data.rtn === \"Success\") {\r\n                    // sortData(response.data);\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSample\"], masterData.RegistrationGetSample, \"npreregno\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                    //  let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    //let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedSample: response.data[\"selectedSample\"],\r\n                        // selectedSubSample: masterData[\"selectedSubSample\"],\r\n                        //selectedTest:masterData[\"selectedTest\"],\r\n                        // RegistrationGetTest,\r\n                        // RegistrationGetSubSample,\r\n                        RegistrationParameter: masterData[\"RegistrationParameter\"]\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData, openPortal: false, loading: false, showConfirmAlert: false,\r\n                            regDateEditConfirmMessage: undefined, loadEsign: false, openModal: false,\r\n                            loadPreregister: false, selectedRecord: {}, showSample: undefined\r\n                        }\r\n                    });\r\n                    // let inputData = {\r\n                    //     masterData,\r\n                    //     selectedTest: masterData.selectedTest,\r\n                    //     ntransactiontestcode: masterData.selectedTest ?\r\n                    //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\r\n                    //     npreregno: masterData.selectedSample ?\r\n                    //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\r\n                    //     userinfo: inputParam.inputData.userinfo,\r\n                    //     activeTestTab : masterData.activeTestTab,\r\n                    //     screenName: masterData.activeTestTab,\r\n                    //     resultDataState: inputParam.resultDataState,\r\n                    //     testCommentDataState: inputParam.testCommentDataState,\r\n                    // }\r\n                    // dispatch(getTestChildTabDetail(inputData, true))\r\n                } else {\r\n                    toast.info(response.data.rtn);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                }\r\n                else if (error.response.status === 302) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false, loadEsign: false,\r\n                            regEditParam: inputParam,\r\n                            showConfirmAlert: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            regDateEditConfirmMessage: error.response.data, showSample: undefined\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showSample: undefined } })\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function cancelTestAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelTest\", inputParam.inputData)\r\n            .then(response => {\r\n\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedTest: response.data[\"selectedTest\"],\r\n                    // RegistrationGetTest:response.data[\"RegistrationGetTest\"],\r\n                    RegistrationGetTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\"),\r\n                    //  RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, LoginProps.RegistrationGetSample, 'npreregno')\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    showConfirmAlert: false,\r\n                    selectedRecord: {},\r\n                    loading: false,\r\n                    loadPreregister: false,\r\n                    showSample: undefined\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no'\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function cancelSampleAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelSample\", inputParam.inputData)\r\n            .then(response => {\r\n                // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                // }\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function addsubSampleRegistration(masterData, userinfo, regcolumnList,\r\n    selectRecord, regchildColumnList,\r\n    regSubSamplecomboComponents,\r\n    regSubSamplewithoutCombocomponent, Map, ncontrolcode, specBasedComponent, specBasedTestPackage) {\r\n    return function (dispatch) {\r\n        const urlArray = []\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        urlArray[0] = timeZoneService;\r\n        const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n            parentcolumnlist: regcolumnList.filter(x => (x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter') && (x.readonly !== true)),\r\n            childcolumnlist: regchildColumnList,\r\n            userinfo\r\n        })\r\n        urlArray[1] = actualService;\r\n\r\n        if (specBasedComponent) {\r\n            const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                ...Map,\r\n                specBasedComponent: specBasedComponent,\r\n                userinfo\r\n            })\r\n            urlArray[2] = ComponentTestBySpec;\r\n        } else {\r\n\r\n            const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n                nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                slno: 1,\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage: specBasedTestPackage,\r\n                conditionalTestPackage: true,\r\n                nneedsubsample: Map[\"nneedsubsample\"]\r\n\r\n            })\r\n            urlArray[2] = TestGet;\r\n            const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n                nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage: specBasedTestPackage,\r\n            });\r\n            urlArray[5] = TestPackageGet;\r\n            const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\r\n                nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage: specBasedTestPackage,\r\n            });\r\n            urlArray[6] = TestSectionGet;\r\n\r\n        }\r\n        const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n            userinfo\r\n        })\r\n\r\n        urlArray[3] = currentDate\r\n\r\n        const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n            datecolumnlist: regSubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n            userinfo\r\n        })\r\n        urlArray[4] = dateService\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userinfo.stimezoneid, value: userinfo.ntimezonecode }\r\n                const newcomboData = parentChildComboLoad(regcolumnList.filter(x => (x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter') && (x.readonly !== true)), response[1].data,\r\n                    selectRecord, regchildColumnList, regSubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo)\r\n                let TestCombined = [];\r\n                let lstComponent = [];\r\n                let PackageData = [];\r\n                let TestSectionData = [];\r\n                const selectedRecord1 = newcomboData.selectedRecord\r\n                if (specBasedComponent) {\r\n\r\n                    const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, true);\r\n\r\n                    lstComponent = lstComponentMap.get(\"OptionList\");\r\n\r\n                    if (lstComponent.length > 0) {\r\n                        selectedRecord1['ncomponentcode'] = { ...lstComponent[0] }\r\n                        selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\r\n                        selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\r\n                        selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample\r\n\r\n                    }\r\n\r\n                } else {\r\n                    //if (specBasedTestPackage) {\r\n                    const PackageDataMap = constructOptionList(response[5].data.TestPackage || [], \"ntestpackagecode\",\r\n                        \"stestpackagename\", undefined, undefined, true);\r\n                    PackageData = PackageDataMap.get(\"OptionList\");\r\n\r\n                    const TestSectionDataMap = constructOptionList(response[6].data.TestSection || [], \"nsectioncode\",\r\n                        \"ssectionname\", undefined, undefined, true);\r\n                    TestSectionData = TestSectionDataMap.get(\"OptionList\");\r\n\r\n                    // if (PackageData.length === 0) {\r\n                    //     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \r\n                    // } \r\n                    // }\r\n                    // else {\r\n                    TestCombined = response[2].data;\r\n                    // }\r\n                }\r\n                const comboData1 = newcomboData.comboData\r\n\r\n                regSubSamplewithoutCombocomponent.map(componentrow => {\r\n                    if (componentrow.inputtype === \"date\") {\r\n                        if (componentrow.loadcurrentdate) {\r\n                            selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[3].data) : \"\";\r\n                            selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                        } else if (componentrow.nperiodcode) {\r\n                            selectedRecord1[componentrow.label + \"value\"] = response[4].data[componentrow.label] ?\r\n                                new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                            if (componentrow.loadselecteddate) {\r\n                                selectedRecord1[componentrow.label] = response[4].data[componentrow.label] ?\r\n                                    new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                            }\r\n                            //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                            //    new Date(response[2].data[componentrow.label]):null;\r\n                        } else {\r\n                            selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                        }\r\n\r\n                        if (componentrow.hidebeforedate) {\r\n                            selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                        }\r\n                        if (componentrow.hideafterdate) {\r\n                            selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                        }\r\n\r\n                    }\r\n                    else if (componentrow.inputtype === \"radio\"\r\n                        || componentrow.inputtype === \"checkbox\"\r\n                        || componentrow.inputtype === \"predefineddropdown\") {\r\n\r\n                        if (componentrow['radiodefaultvalue']) {\r\n                            if (componentrow.inputtype === \"checkbox\") {\r\n\r\n                                let val = ''\r\n                                componentrow.radiodefaultvalue &&\r\n                                    componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\r\n                                        val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',')\r\n                                    })\r\n\r\n                                selectedRecord1[componentrow.label] = val\r\n\r\n                            } else if (componentrow.inputtype === \"predefineddropdown\") {\r\n                                selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                    componentrow.radiodefaultvalue : \"\";\r\n                            } else {\r\n                                selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                    componentrow.radiodefaultvalue.label : \"\";\r\n                            }\r\n\r\n                        } else {\r\n                            if (componentrow.inputtype === \"radio\") {\r\n                                selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                                    componentrow.radioOptions.tags[0].text : \"\";\r\n                            }\r\n                        }\r\n\r\n                    }\r\n\r\n                })\r\n\r\n                const inputParam = {\r\n                    screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                    showSaveContinue: false,\r\n                    parentPopUpSize: \"lg\",\r\n                    loading: false,\r\n                    lstComponent,\r\n                    openModal: true,\r\n                    loadPrinter: false,\r\n                    operation: \"create\",\r\n                    loadRegSubSample: true,\r\n                    selectedRecord: selectedRecord1,\r\n                    regSubSamplecomboData: comboData1,\r\n                    regSubSamplecomboComponents,\r\n                    regSubSamplewithoutCombocomponent,\r\n                    TestCombined,\r\n                    regparentSubSampleColumnList: regcolumnList,\r\n                    regchildSubSampleColumnList: regchildColumnList,\r\n                    ncontrolCode: ncontrolcode,\r\n                    timeZoneList,\r\n                    defaultTimeZone,\r\n                    masterData,\r\n                    specBasedComponent,\r\n                    specBasedTestPackage,\r\n                    TestPackage: PackageData,\r\n                    //ALPD-624\r\n                    testskip: 0,\r\n                    subsampleskip: 0,\r\n                    TestSection: TestSectionData, AllTest: TestCombined, AllSection: TestSectionData\r\n                }\r\n                if (specBasedComponent) {\r\n                    dispatch(componentTest(selectedRecord1, true, specBasedComponent, [], specBasedTestPackage, true, inputParam))\r\n                } else {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { ...inputParam } })\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function saveSubSample(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload) {\r\n            requestUrl = rsapi.post(\"/registration/createSubSampleWithFile\", inputParam.formData)\r\n        } else {\r\n            requestUrl = rsapi.post(\"/registration/createSubSample\", inputParam.inputData);\r\n        }\r\n        return requestUrl\r\n            //  rsapi.post(\"/registration/createSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                // let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], inputParam.inputData.masterData.RegistrationGetSample);\r\n                // let selectedSample = response.data[\"selectedSample\"];\r\n                let RegistrationGetSubSample = updatedObjectWithNewElement(inputParam.inputData.masterData.RegistrationGetSubSample, response.data[\"selectedSubSample\"]);\r\n                let RegistrationGetTest = response.data[\"selectedTest\"];\r\n                let selectedSubSample = response.data[\"selectedSubSample\"];// RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                let RegistrationParameter = response.data[\"RegistrationParameter\"];\r\n                RegistrationParameter = RegistrationParameter ? getSameRecordFromTwoArrays(RegistrationParameter, selectedTest, 'ntransactiontestcode') : RegistrationParameter;\r\n                let RegistrationGetSample = replaceUpdatedObject(response.data[\"selectedSample\"], inputParam.inputData.masterData.RegistrationGetSample, 'npreregno');\r\n                let selectedSample = response.data[\"selectedSample\"];\r\n\r\n\r\n\r\n                let masterData = { ...inputParam.inputData.masterData }\r\n                masterData = {\r\n                    ...masterData, ...response.data,\r\n                    selectedSubSample, selectedTest,\r\n                    RegistrationGetSubSample, RegistrationGetTest, RegistrationParameter, selectedSample, RegistrationGetSample\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    loading: false,\r\n                    showSample: undefined,\r\n                    selectedRecord: {},\r\n                    loadRegSubSample: false,\r\n                    showConfirmAlert: false,\r\n                    subSampleConfirmMessage: undefined\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no';\r\n                inputParam.postParamList[1]['clearFilter'] = 'yes';\r\n                inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                //    dispatch({\r\n                //     type: DEFAULT_RETURN,\r\n                //     payload: {\r\n                //         masterData,\r\n                //         openModal: false,\r\n                //         loadEsign: false,\r\n                //         loading: false,\r\n                //         showSample: undefined,\r\n                //         selectedRecord: {},\r\n                //         loadRegSubSample:false\r\n                //     }\r\n                // });\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                // toast.error(error.message);\r\n                // dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n                if (error.response.status === 500) {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false, subSampleConfirmMessage: undefined } })\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                subSampleConfirmMessage: error.response.data.rtn,\r\n                                subSampleConfirmParam: { inputParam },\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    } else if (error.response.data.rtn) {\r\n                        toast.warn(intl.formatMessage({\r\n                            id: error.response.data.rtn\r\n                        }));\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                loading: false,\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        toast.error(error.message);\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                loading: false,\r\n                                showConfirmAlert: false, subSampleConfirmMessage: undefined\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                }\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function getEditSubSampleComboService(inputParam, columnList, selectedRecord1,\r\n    childColumnList, comboComponents,\r\n    withoutCombocomponent, specBasedComponent) {\r\n    return function (dispatch) {\r\n\r\n        let { userInfo, operation, masterData } = { ...inputParam };\r\n\r\n        if (masterData[\"selectedSubSample\"].length > 1 ||\r\n            masterData[\"selectedSubSample\"]\r\n                .findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"mastertoedit\"][inputParam.primaryKeyName])\r\n            === -1) {\r\n            inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"] = true;\r\n        }\r\n\r\n        masterData[\"selectedSubSample\"] = [];\r\n        masterData[\"selectedSubSample\"].push(inputParam[\"mastertoedit\"]);\r\n\r\n        inputParam.editSubSampleRegParam[\"npreregno\"] = inputParam[\"mastertoedit\"][\"npreregno\"];\r\n        //inputParam.editSubSampleRegParam[\"checkBoxOperation\"] = 3;\r\n        inputParam.editSubSampleRegParam[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT;\r\n        inputParam.editSubSampleRegParam[\"nfilterstatus\"] = inputParam[\"mastertoedit\"][\"ntransactionstatus\"];\r\n        inputParam.editSubSampleRegParam[\"napprovalconfigcode\"] = inputParam[\"mastertoedit\"][\"napprovalconfigcode\"];\r\n        //inputParam.editSubSampleRegParam[\"withoutgetparameter\"] = 3;\r\n\r\n        const ntransactionsamplecode = inputParam.mastertoedit[inputParam.primaryKeyName];\r\n        if (ntransactionsamplecode === undefined) {\r\n            toast.info(intl.formattedMessage({ id: \"IDS_SELECTVALIDSUBSAMPLE\" }));\r\n        }\r\n        else {\r\n            let urlArray = [];\r\n\r\n            const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n            // const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n            //     parentcolumnlist: columnList,\r\n            //     childcolumnlist: childColumnList,\r\n            //     userinfo: userInfo\r\n            // })\r\n            const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationSubSampleDetails\", {\r\n                ...inputParam.editSubSampleRegParam, ntransactionsamplecode, parentcolumnlist: columnList,\r\n                childcolumnlist: childColumnList,\r\n                userinfo: userInfo\r\n            })\r\n\r\n            const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                datecolumnlist: withoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                userinfo: userInfo\r\n            })\r\n\r\n\r\n            urlArray = [timeZoneService, selectedRegistration, dateService]\r\n            // if(specBasedComponent){\r\n            //     const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n            //         ...Map,\r\n            //         specBasedComponent: specBasedComponent\r\n            //     })\r\n            //     urlArray.push(ComponentTestBySpec) \r\n            // }\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    let selectedRecord = { ...response[1].data[\"EditData\"] };\r\n\r\n                    selectedRecord = { ...selectedRecord, ...selectedRecord['jsondata'] }\r\n\r\n                    const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                    const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                    const defaultTimeZone = { label: userInfo.stimezoneid, value: userInfo.ntimezonecode }\r\n\r\n                    // if (selectedRecord.ntransactionstatus !== transactionStatus.PREREGISTER) {\r\n                    //     toast.info(intl.formatMessage({ id: \"IDS_SELECTPREREGISTERSUBSAMPLETOEDIT\" }));\r\n                    //     dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                    // }\r\n\r\n                    //else {\r\n                    //               let lstComponent=[]\r\n                    if (specBasedComponent) {\r\n                        selectedRecord[\"ncomponentcode\"] = { label: selectedRecord[\"scomponentname\"], value: selectedRecord[\"ncomponentcode\"] }\r\n                    }\r\n                    const languagetypeCode = undefined\r\n                    const comboData = response[1].data;\r\n                    delete comboData['EditData']\r\n                    let comboValues = {}\r\n                    if (columnList.length > 0) {\r\n                        columnList.map(x => {\r\n                            if (x.inputtype === 'combo') {\r\n                                if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \r\n                                {\r\n                                    if (comboData[x.label].length > 0) {\r\n                                        if (comboData[x.label][0].label === undefined) {\r\n                                            const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                            comboData[x.label] = optionList.get(\"OptionList\");\r\n                                        } else {\r\n                                            comboData[x.label] = comboData[x.label]\r\n                                            const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                        }\r\n                                    } else {\r\n                                        comboData[x.label] = []\r\n                                    }\r\n                                    //comboValues = childComboLoad(x, comboData, selectedRecord, \r\n                                    //   childColumnList, withoutCombocomponent)\\\r\n                                    comboValues = childComboLoadForEdit(x, comboData, selectedRecord,\r\n                                        childColumnList, withoutCombocomponent)\r\n                                } else {\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                comboValues = {\r\n                                    comboData: comboData,\r\n                                    ...comboValues\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        comboValues = {\r\n                            \"comboData\": comboData,\r\n                        }\r\n                    }\r\n                    // withoutCombocomponent.map(date => {\r\n                    //     if (date.inputtype === 'date')\r\n                    //         selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\r\n                    //             rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\";\r\n                    // })\r\n\r\n                    withoutCombocomponent.map(date => {\r\n                        if (date.inputtype === 'date') {\r\n                            selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\r\n                                rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\"\r\n\r\n                            if (date.nperiodcode) {\r\n                                selectedRecord[date.label + \"value\"] = response[2].data[date.label] ?\r\n                                    new Date(response[2].data[date.label][\"datevalue\"]) : null;\r\n                            } else {\r\n                                selectedRecord[date.label + \"value\"] = new Date();\r\n                            }\r\n\r\n                            if (date.hidebeforedate) {\r\n                                selectedRecord[date.label + \"min\"] = selectedRecord[date.label + \"value\"]\r\n                            }\r\n                            if (date.hideafterdate) {\r\n                                selectedRecord[date.label + \"max\"] = selectedRecord[date.label + \"value\"]\r\n                            }\r\n                        }\r\n                    })\r\n\r\n                    selectedRecord = { ...selectedRecord }\r\n\r\n                    if (inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"] === true) {\r\n                        masterData = { ...masterData, ...response[1].data[\"SubSampleChildDetail\"] };\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            operation,\r\n                            timeZoneList,\r\n                            defaultTimeZone,\r\n                            selectedRecord,\r\n                            openModal: true,\r\n                            ncontrolCode: inputParam.editSubSampleRegParam.ncontrolCode,\r\n                            parentPopUpSize: \"lg\",\r\n                            loading: false,\r\n                            showSample: undefined,\r\n                            regSubSamplecomboData: comboValues.comboData,\r\n                            loadRegSubSample: true,\r\n                            screenName: \"IDS_SUBSAMPLE\",\r\n                            operation: \"update\",\r\n                            specBasedComponent,\r\n                            //  regRecordToEdit:recordToEdit\r\n                            masterData,\r\n                            withoutCombocomponent\r\n                        }\r\n                    })\r\n                    // }\r\n                })\r\n                .catch(error => {\r\n                    //console.log(\"error:\", error);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.info(intl.formatMessage({\r\n                            id: error.response.data\r\n                        }));\r\n                    }\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\nexport function onUpdateSubSampleRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload) {\r\n            requestUrl = rsapi.post(\"/registration/updateRegistrationSubSampleWithFile\", inputParam.formData)\r\n        } else {\r\n            requestUrl = rsapi.post(\"/registration/updateRegistrationSubSample\", inputParam.inputData)\r\n        }\r\n        return requestUrl\r\n            // rsapi.post(\"/registration/updateRegistrationSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                sortData(response.data);\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                //replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                //  let RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];\r\n                let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                masterData = {\r\n                    ...masterData,\r\n                    // selectedSample: response.data[\"selectedSample\"],\r\n                    selectedSubSample: response.data[\"selectedSubSample\"],\r\n                    selectedTest: response.data[\"selectedTest\"],\r\n                    RegistrationGetTest,\r\n                    // RegistrationGetSubSample,\r\n                    RegistrationParameter: response.data[\"RegistrationParameter\"]\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, openModal: false, loading: false, showConfirmAlert: false,\r\n                        regDateEditConfirmMessage: undefined, loadEsign: false,\r\n                        loadRegSubSample: false, selectedRecord: {}, showSample: undefined, screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                    }\r\n                });\r\n                // let inputData = {\r\n                //     masterData,\r\n                //     selectedTest: masterData.selectedTest,\r\n                //     ntransactiontestcode: masterData.selectedTest ?\r\n                //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\r\n                //     npreregno: masterData.selectedSample ?\r\n                //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\r\n                //     userinfo: inputParam.inputData.userinfo,\r\n                //     activeTestTab : masterData.activeTestTab,\r\n                //     screenName: masterData.activeTestTab,\r\n                //     resultDataState: inputParam.resultDataState,\r\n                //     testCommentDataState: inputParam.testCommentDataState,\r\n                // }\r\n                // dispatch(getTestChildTabDetail(inputData, true))\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                }\r\n                else if (error.response.status === 302) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false, loadEsign: false,\r\n                            regEditParam: inputParam,\r\n                            showConfirmAlert: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            regDateEditConfirmMessage: error.response.data, showSample: undefined\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showSample: undefined } })\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function cancelSubSampleAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                if (inputParam.inputData.nsampletypecode === SampleType.CLINICALTYPE && response.data.isMapped) {\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                }\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    //selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n                if (inputParam.inputData.nsampletypecode === SampleType.CLINICALTYPE && response.data.isMapped) {\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\")\r\n                    }\r\n                }\r\n\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function preregRecordToQuarantine(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/quarantineRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                // replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                // replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                delete response.data[\"RegistrationGetSample\"];\r\n                delete response.data[\"RegistrationGetSubSample\"];\r\n                delete response.data[\"RegistrationGetTest\"];\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTestChildTabDetailRegistration(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        if (inputData.ntransactiontestcode === \"\") {\r\n            inputData.ntransactiontestcode = \"0\";\r\n        }\r\n        if (inputData.ntransactiontestcode && inputData.ntransactiontestcode.length > 0) {\r\n            let inputParamData = {\r\n                ntransactiontestcode: inputData.ntransactiontestcode,\r\n                npreregno: inputData.npreregno,\r\n                userinfo: inputData.userinfo,\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode ? inputData.ntransactionsamplecode :\r\n                    inputData.selectedSubSample && inputData.selectedSubSample.map(item => item.ntransactionsamplecode).join(\",\"),\r\n                OrderCodeData: inputData.masterData && inputData.masterData.selectedSample && inputData.masterData.selectedSample.length > 0 ?\r\n                    inputData.masterData.selectedSample.map(item => item.hasOwnProperty(\"OrderCodeData\") ? item.OrderCodeData : -1).join(\",\") : null,\r\n            }\r\n            let url = null\r\n            let { testtake } = inputData;\r\n            let activeName = \"\";\r\n            let dataStateName = \"\";\r\n            switch (inputData.activeTestTab) {\r\n                case \"IDS_RESULTS\":\r\n                    url = \"approval/getapprovalparameter\"\r\n                    activeName = \"ApprovalParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_PARAMETERRESULTS\":\r\n                    url = \"registration/getregistrationparameter\"\r\n                    activeName = \"RegistrationParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    url = \"resultentrybysample/getResultUsedInstrument\"\r\n                    activeName = \"ResultUsedInstrument\"\r\n                    dataStateName = \"instrumentDataState\"\r\n                    break;\r\n                case \"IDS_MATERIAL\":\r\n                    url = \"resultentrybysample/getResultUsedMaterial\"\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    url = \"resultentrybysample/getResultUsedTask\"\r\n                    activeName = \"ResultUsedTasks\"\r\n                    dataStateName = \"taskDataState\"\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    url = \"attachment/getTestAttachment\"\r\n                    activeName = \"RegistrationTestAttachment\"\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    url = \"comments/getTestComment\"\r\n                    activeName = \"RegistrationTestComment\"\r\n                    dataStateName = \"testCommentDataState\"\r\n                    break;\r\n                case \"IDS_TESTHISTORY\":\r\n                    url = \"history/getTestHistory\"\r\n                    activeName = \"RegistrationTestHistory\"\r\n                    dataStateName = \"registrationTestHistoryDataState\"\r\n                    break;\r\n                case \"IDS_DOCUMENTS\":\r\n                    url = \"approval/getapprovalparameter\"\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    url = \"approval/getApprovalResultChangeHistory\"\r\n                    activeName = \"ApprovalResultChangeHistory\"\r\n                    dataStateName = \"resultChangeDataState\"\r\n                    break;\r\n                case \"IDS_TESTAPPROVALHISTORY\":\r\n                    url = \"approval/getApprovalHistory\"\r\n                    activeName = \"ApprovalHistory\"\r\n                    dataStateName = \"historyDataState\"\r\n                    break;\r\n                case \"IDS_SAMPLEATTACHMENTS\":\r\n                    url = \"attachment/getSampleAttachment\"\r\n                    break;\r\n                case \"IDS_OUTSOURCEDETAILS\":\r\n                    url = \"registration/getOutsourceDetails\"\r\n                    break;\r\n                case \"IDS_EXTERNALORDERREPORTS\":\r\n                    url = \"registration/getExternalOrderAttachment\"\r\n                    break;\r\n                case \"IDS_TESTHISTORY\":\r\n                    url = \"history/getTestHistory\"\r\n                    break;\r\n                default:\r\n                    url = \"approval/getapprovalparameter\"\r\n                    activeName = \"ApprovalParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n            }\r\n            if (url !== null) {\r\n                dispatch(initRequest(true));\r\n                if (isServiceRequired) {\r\n                    rsapi.post(url, inputParamData)\r\n                        .then(response => {\r\n                            let skipInfo = {};\r\n                            let responseData = { ...response.data, selectedSample: inputData.selectedSample || inputData.masterData.selectedSample, selectedTest: inputData.selectedTest }\r\n                            //responseData = sortData(responseData)\r\n                            // fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\",inputData.removeElementFromArray);\r\n                            fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\r\n                            let masterData = {\r\n                                ...inputData.masterData,\r\n                                selectedSample: inputData.selectedSample || inputData.masterData.selectedSample,\r\n                                selectedTest: inputData.selectedTest,\r\n                                selectedPreregno: inputData.npreregno,\r\n                                selectedSampleCode: inputData.ntransactionsamplecode,\r\n                                selectedTestCode: inputData.ntransactiontestcode,\r\n                                activeTabIndex: inputData.activeTabIndex,\r\n                                activeTabId: inputData.activeTabId\r\n                            }\r\n                            if (inputData[dataStateName] && masterData[activeName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                                skipInfo = {\r\n\r\n                                    [dataStateName]: {\r\n                                        ...inputData[dataStateName],\r\n                                        skip: 0,\r\n                                        sort: undefined,\r\n                                        filter: undefined\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                skipInfo = {\r\n                                    ...skipInfo,\r\n                                    [dataStateName]: {\r\n                                        ...inputData[dataStateName],\r\n                                        sort: undefined,\r\n                                        filter: undefined\r\n                                    }\r\n                                }\r\n                            }\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN, payload: {\r\n                                    masterData,\r\n                                    activeTabIndex: inputData.activeTabIndex,\r\n                                    activeTabId: inputData.activeTabId,\r\n                                    loading: false,\r\n                                    showFilter: false,\r\n                                    activeTestTab: inputData.activeTestTab,\r\n                                    screenName: inputData.screenName,\r\n                                    testtake, testskip: undefined,\r\n                                    ...skipInfo\r\n                                }\r\n                            })\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                            if (error.response.status === 500) {\r\n                                toast.error(error.message);\r\n                            }\r\n                            else {\r\n                                toast.info(error.response.data);\r\n                            }\r\n                        })\r\n                } else {\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\", inputData.removeElementFromArray);\r\n                    let skipInfo = {};\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        selectedTest: inputData.selectedTest,\r\n                        selectedPreregno: inputData.npreregno,\r\n                        selectedSampleCode: inputData.ntransactionsamplecode,\r\n                        selectedTestCode: inputData.ntransactiontestcode,\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            screenName: inputData.screenName,\r\n                            testtake, testskip: undefined,\r\n                            ...skipInfo\r\n                        }\r\n                    })\r\n                }\r\n\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab\r\n                    }\r\n                })\r\n            }\r\n        } else {\r\n            let { ApprovalParameter, ResultUsedInstrument, ResultUsedTasks, RegistrationTestAttachment, ApprovalResultChangeHistory,\r\n                RegistrationTestComment, ApprovalHistory, RegistrationTestHistory } = inputData.masterData\r\n            switch (inputData.activeTestTab) {\r\n                case \"IDS_RESULTS\":\r\n                    ApprovalParameter = [];\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    ResultUsedInstrument = []\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    ResultUsedTasks = []\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    RegistrationTestAttachment = []\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    ApprovalResultChangeHistory = []\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    RegistrationTestComment = []\r\n                    break;\r\n                case \"IDS_APPROVALHISTORY\":\r\n                    ApprovalHistory = []\r\n                    break;\r\n                case \"IDS_TESTHISTORY\":\r\n                    RegistrationTestHistory = []\r\n                    break;\r\n                default:\r\n                    ApprovalParameter = []\r\n                    break;\r\n            }\r\n\r\n            dispatch({\r\n                type: DEFAULT_RETURN, payload: {\r\n                    masterData: {\r\n                        ...inputData.masterData,\r\n                        selectedTest: [],\r\n                        ApprovalParameter, ResultUsedInstrument, ResultUsedTasks, RegistrationTestAttachment,\r\n                        ApprovalResultChangeHistory, RegistrationTestComment, ApprovalHistory, RegistrationTestHistory\r\n                    }, loading: false,\r\n                    activeTabIndex: inputData.activeTabIndex,\r\n                    activeTabId: inputData.activeTabId,\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport const toTimestamp = (strDate) => {\r\n    // const dt = new Date(strDate).getTime();\r\n    // return dt / 1000;\r\n    const dt = strDate.getTime();\r\n    return dt;\r\n}\r\n\r\nexport function getDynamicFilter(inputParam) {\r\n    if (inputParam.component.inputtype === 'frontendsearchfilter') {\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilter\", { ...inputParam.component, userinfo: inputParam.userinfo })\r\n                .then(response => {\r\n                    const source = inputParam.component.source\r\n                    const languageTypeCode = inputParam.userinfo.slanguagetypecode\r\n                    const lstData = response.data[inputParam.component.label]\r\n\r\n\r\n                    // const responseparam={}\r\n                    const gridColumns = []\r\n                    const fields = []\r\n                    const datefileds = []\r\n                    const multilingual = []\r\n                    inputParam.component.filterfields.map(item => {\r\n                        fields.push(filterObject(item, languageTypeCode, response.data, inputParam.component));\r\n                        if (item.ismultilingual) {\r\n                            multilingual.push(item.columnname)\r\n                        }\r\n                        if (item.filterinputtype === \"date\") {\r\n                            datefileds.push(item.columnname)\r\n                        }\r\n                        if (item.filterinputtype !== 'predefinednumeric') {\r\n                            gridColumns.push(creategridColumns(item, languageTypeCode,));\r\n                        }\r\n                    })\r\n\r\n                    const optionList = lstData.map(item => {\r\n                        const jsondata = item[source] ? item[source].value ?\r\n                            JSON.parse(item[source].value) : item.jsondata : item.jsondata\r\n\r\n                        datefileds.map(x => {\r\n                            jsondata[x + \"timestamp\"] = toTimestamp(rearrangeDateFormatforKendoDataTool(inputParam.userinfo, jsondata[x]))\r\n                        })\r\n                        multilingual.map(mul => {\r\n                            jsondata[mul] =\r\n                                jsondata[mul][languageTypeCode] || jsondata[mul]['en-US']\r\n                                ;\r\n                        })\r\n\r\n\r\n                        return jsondata\r\n                    });\r\n                    let map = {\r\n                    }\r\n                    if (inputParam.type === 'design') {\r\n                        map = { ...map, showFilter: true, selectedComponentpath: inputParam.selectedComponentpath }\r\n                    } else {\r\n                        map = { ...map, loadCustomSearchFilter: true }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            lstPatient: optionList, gridColumns, fields,\r\n                            //  loadCustomSearchFilter: true\r\n                            loading: false,\r\n                            screenName: inputParam.component.displayname[languageTypeCode],\r\n                            seletedFilterComponent: inputParam.component,\r\n                            kendoSkip: 0,\r\n                            kendoTake: 5,\r\n                            kendoFilter: inputParam.component.kendoFilter || {\r\n                                logic: \"and\",\r\n                                filters: []\r\n                            },\r\n                            //awesomeTree: undefined,\r\n                            //awesomeConfig: undefined,\r\n                            // showFilter: true,\r\n                            ...map\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data.rtn);\r\n                    }\r\n\r\n                })\r\n        }\r\n    } else if (inputParam.component.inputtype === \"backendsearchfilter\") {\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilterpredefined\", { ...inputParam.component, userinfo: inputParam.userinfo })\r\n                .then(response => {\r\n                    const languageTypeCode = inputParam.userinfo.slanguagetypecode\r\n                    const { fields, gridColumns } = filterObjectForReactAwesomeFilter(inputParam.component.filterfields, languageTypeCode, response.data, inputParam.component)\r\n\r\n                    let map = {\r\n                    }\r\n                    let awesomeTree = inputParam.component.awesomeTree ? checkTree(loadTree(inputParam.component.awesomeTree), inputParam.component.awesomeConfig) : undefined\r\n                    if (inputParam.component.awesomeTree\r\n                        && inputParam.component.filterquery && inputParam.component.filterquery !== ''\r\n                    ) {\r\n                        map = {\r\n                            filterquery: inputParam.component.filterquery\r\n                        }\r\n\r\n                        if (inputParam.type === 'design') {\r\n                            map = {\r\n                                ...map, filterquery: inputParam.component.filterquery,\r\n                                selectedFieldRecord: { ...inputParam.component, awesomeTree: awesomeTree }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        map = {\r\n                            filterquery: ''\r\n                        }\r\n                        if (inputParam.type === 'design') {\r\n                            map = {\r\n                                ...map, filterquery: inputParam.component.filterquery,\r\n                                selectedFieldRecord: { ...inputParam.component, awesomeTree: awesomeTree }\r\n                            }\r\n                        }\r\n                    }\r\n                    if (inputParam.type === 'design') {\r\n                        map = {\r\n                            ...map,\r\n                            showFilter: true, selectedComponentpath: inputParam.selectedComponentpath\r\n                        }\r\n                    } else {\r\n                        map = { ...map, loadCustomSearchFilter: true }\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            lstPatient: [], gridColumns, fields,\r\n                            // loadCustomSearchFilter: true\r\n                            loading: false,\r\n                            screenName: inputParam.component.displayname[languageTypeCode],\r\n                            seletedFilterComponent: inputParam.component,\r\n                            kendoSkip: 0,\r\n                            kendoTake: 5,\r\n                            awesomeTree,\r\n                            onExecute: true,\r\n                            // awesomeConfig: inputParam.component.awesomeConfig || undefined,\r\n                            // showFilter: true,\r\n                            ...map\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data.rtn);\r\n                    }\r\n\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\nlet datapredef = {}\r\nconst CustomFilter = props => {\r\n    const { filter, data = [], defaultItem } = props;\r\n    const onChange = event => {\r\n        props.onFilterChange.call(undefined, {\r\n            nextFilter: { ...props.filter, value: event.target.value.value }\r\n        });\r\n    };\r\n\r\n    return <ComboBox onChange={onChange} data={filter.field ? datapredef[filter.field] : []} textField=\"text\" />;\r\n};\r\n\r\nexport function creategridColumns(item, languageTypeCode) {\r\n    let obj = {}\r\n    if (item.filterinputtype !== 'predefinednumeric') {\r\n        return {\r\n            field: item.columnname,\r\n            title: item.displayname[languageTypeCode], width: \"250px\"\r\n        }\r\n    }\r\n}\r\n\r\nexport function filterObjectForReactAwesomeFilter(filterFields, languageTypeCode, resposedata, component) {\r\n    let obj = {}\r\n    obj['fields'] = {}\r\n    obj['gridColumns'] = []\r\n    filterFields.map(item => {\r\n        if (item.filterinputtype === 'predefinednumeric' || item.filterinputtype === 'predefinedtext') {\r\n            const optionList = resposedata[item.predefinedtablename].map(data => {\r\n                const jsondata = data[item.predefinedtablename] ? data[item.predefinedtablename].value ?\r\n                    JSON.parse(data[item.predefinedtablename].value) : data.jsondata : data.jsondata\r\n\r\n                jsondata['title'] = item.predefinedismultilingual ?\r\n                    jsondata[item.predefineddisplaymember]\r\n                    [languageTypeCode] || jsondata[item.predefineddisplaymember]['en-US']\r\n                    : jsondata[item.predefineddisplaymember];\r\n                jsondata['value'] = jsondata[component.valuemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember]\r\n                return jsondata\r\n            });\r\n            datapredef[item.columnname] = optionList\r\n        }\r\n        switch (item.filterinputtype) {\r\n            case \"text\":\r\n                obj['fields'][item.type === 'dynamic' ? item.ismultilingual ?\r\n                    \"jsondata->'\" + item.columnname + \"'->>'\" + languageTypeCode + \"'\" :\r\n                    \"jsondata->>'\" + item.columnname + \"'\" :\r\n                    \"\\\"\" + item.columnname + \"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"text\",\r\n                    valueSources: [\"value\", \"func\"],\r\n                    mainWidgetProps: {\r\n                        \"valueLabel\": \"Name\",\r\n                        \"valuePlaceholder\": intl.formatMessage({ id: \"IDS_ENTER\" }) + \" \" + item.displayname[languageTypeCode]\r\n                    }\r\n                }\r\n                break;\r\n            case \"numeric\":\r\n                obj['fields'][item.type === 'dynamic' ?\r\n                    \"(jsondata->>'\" + item.columnname + \"')::int\" :\r\n                    \"\\\"\" + item.columnname + \"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"number\",\r\n                    valueSources: [\"value\"],\r\n                    fieldSettings: {\r\n                        ...item.numericcondition\r\n                    }\r\n                }\r\n                break;\r\n            case \"date\":\r\n                obj['fields'][item.type === 'dynamic' ?\r\n                    \"jsondata->>'\" + item.columnname + \"'\" :\r\n                    \"\\\"\" + item.columnname + \"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"date\",\r\n                    valueSources: [\"value\"],\r\n                }\r\n                break;\r\n            case \"predefinednumeric\":\r\n                obj['fields'][item.type === 'dynamic' ?\r\n                    \"(jsondata->>'\" + item.columnname + \"')::int\" :\r\n                    \"\\\"\" + item.columnname + \"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"select\",\r\n                    valueSources: [\"value\"],\r\n                    fieldSettings: {\r\n                        listValues: datapredef[item.columnname]\r\n                    }\r\n\r\n                }\r\n                break;\r\n            case \"predefinedtext\":\r\n                obj['fields'][item.type === 'dynamic' ? item.ismultilingual ?\r\n                    \"jsondata->'\" + item.columnname + \"'->>'\" + languageTypeCode + \"'\" :\r\n                    \"jsondata->>'\" + item.columnname + \"'\" :\r\n                    \"\\\"\" + item.columnname + \"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"select\",\r\n                    valueSources: [\"value\"],\r\n                    fieldSettings: {\r\n                        listValues: datapredef[item.columnname]\r\n                    }\r\n\r\n                }\r\n                break;\r\n        }\r\n        const gridColumns = creategridColumns(item, languageTypeCode)\r\n        if (item.filterinputtype !== 'predefinednumeric') {\r\n            obj['gridColumns'].push(gridColumns)\r\n        }\r\n\r\n\r\n    })\r\n    return obj;\r\n}\r\n\r\nexport function filterObject(item, languageTypeCode, resposedata, component, isMultiFilter) {\r\n    let obj = {}\r\n    let preobj = {}\r\n    if (item.filterinputtype === 'predefinednumeric' || item.filterinputtype === 'predefinedtext') {\r\n        const optionList = resposedata[item.predefinedtablename].map(data => {\r\n            const jsondata = data[item.predefinedtablename] ? data[item.predefinedtablename].value ?\r\n                JSON.parse(data[item.predefinedtablename].value) : data.jsondata : data.jsondata\r\n\r\n            jsondata['text'] = item.predefinedismultilingual ?\r\n                jsondata[item.predefineddisplaymember]\r\n                [languageTypeCode] || jsondata[item.predefineddisplaymember]['en-US']\r\n                : jsondata[item.predefineddisplaymember];\r\n            jsondata['value'] = jsondata[component.valuemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember]\r\n            //delete jsondata.jsondata\r\n            return jsondata\r\n        });\r\n        datapredef[item.columnname] = optionList\r\n        // preobj = {\r\n        //     predefdata: optionList, predefineddisplaymember: item.predefineddisplaymember,\r\n        //     predefinedvaluemember: item.columnname\r\n        // }\r\n    }\r\n    switch (item.filterinputtype && item.filterinputtype.toLowerCase()) {\r\n        case \"text\":\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: TextFilter,\r\n                operators: Operators.text,\r\n            }\r\n        case \"numeric\":\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: NumericFilter,\r\n                operators: Operators.numeric,\r\n            }\r\n        case \"date\":\r\n            if (isMultiFilter) {\r\n                return obj = {\r\n                    name: item.columnname,\r\n                    // + \"timestamp\",\r\n                    label: item.displayname[languageTypeCode],\r\n                    filter: DateFilter,\r\n                    operators: Operators.date,\r\n                }\r\n            } else {\r\n                return obj = {\r\n                    name: item.columnname + \"timestamp\",\r\n                    label: item.displayname[languageTypeCode],\r\n                    filter: DateFilter,\r\n                    operators: Operators.date,\r\n                }\r\n            }\r\n\r\n        case \"predefinednumeric\":\r\n\r\n\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: CustomFilter,\r\n                operators: Operators.text,\r\n                // operators: Operators.numeric,\r\n            }\r\n        case \"predefinedtext\":\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: CustomFilter,\r\n                operators: Operators.text,\r\n            }\r\n        default:\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: TextFilter,\r\n                operators: Operators.text,\r\n            }\r\n\r\n    }\r\n\r\n    //return obj;\r\n}\r\n\r\nexport function getDynamicFilterExecuteData(inputParam) {\r\n    return function (dispatch) {\r\n\r\n        let obj = { ...inputParam.component, filterquery: inputParam.filterquery, userinfo: inputParam.userinfo }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/dynamicpreregdesign/getdynamicfilterexecutedata\", obj)\r\n            .then(response => {\r\n                const source = inputParam.component.source\r\n                const languageTypeCode = inputParam.userinfo.slanguagetypecode\r\n                const lstData = response.data[inputParam.component.label]\r\n                const multilingual = []\r\n                inputParam.component.filterfields.map(item => {\r\n                    if (item.ismultilingual) {\r\n                        multilingual.push(item.columnname)\r\n                    }\r\n                })\r\n                const optionList = lstData.map(item => {\r\n                    const jsondata = item[source] ? item[source].value ?\r\n                        JSON.parse(item[source].value) : item.jsondata : item.jsondata\r\n\r\n                    multilingual.map(mul => {\r\n                        jsondata[mul] =\r\n                            jsondata[mul][languageTypeCode] || jsondata[mul]['en-US'];\r\n                    })\r\n                    // let label = isMultiLingual ?\r\n                    //   jsondata[optionValue]\r\n                    //   [languageTypeCode] || jsondata[optionValue]['en-US']\r\n                    //   : jsondata[optionValue];\r\n\r\n                    return jsondata\r\n                });\r\n                if (inputParam.userinfo.nformcode === 161) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            lstPatient: optionList,\r\n                            onExecute: false,\r\n                            loading: false,\r\n                            screenName: inputParam.component.displayname[languageTypeCode]\r\n                        }\r\n                    })\r\n                }\r\n                else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            lstPatient: optionList,\r\n                            // onExecute: false,\r\n                            loading: false,\r\n                            screenName: inputParam.component.displayname[languageTypeCode]\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function rearrangeDateFormatforKendoDataTool(userInfo, dateValue) {\r\n    let splitChar = \"/\";\r\n\r\n    if (dateValue !== undefined) {\r\n        const index = userInfo.ssitedatetime && userInfo.ssitedatetime.indexOf(\"/\" || \"-\")\r\n        if (index !== -1)\r\n            splitChar = userInfo.ssitedatetime.substring(index, index + 1)\r\n\r\n    }\r\n    //   console.log(\"splitChar:\", splitChar);\r\n    if ((splitChar === \"/\" || splitChar === \"-\") && typeof dateValue === \"string\") {\r\n        const firstField = userInfo.ssitedatetime && userInfo.ssitedatetime.split(splitChar)[0];\r\n        // console.log(\"firstField:\", firstField);\r\n        const timeSplitChar = dateValue.indexOf(\"T\") !== -1 ? \"T\" : \" \"\r\n        const datetime = dateValue.split(timeSplitChar);\r\n        const dateArray = datetime[0].split(splitChar);\r\n        if (firstField === \"dd\") {\r\n            const day = dateArray[0];\r\n            const month = dateArray[1];\r\n            const year = dateArray[2];\r\n            const time = datetime[1] || \"00:00:00\";\r\n\r\n            const formatted = year + \"-\" + month + \"-\" + day + \"T\" + time;\r\n            return new Date(formatted);\r\n        }\r\n        else if (firstField === \"yyyy\") {\r\n            const year = dateArray[0];\r\n            const month = dateArray[1];\r\n            const day = dateArray[2];\r\n            const time = datetime[1] || \"00:00:00\";\r\n            const formatted = year + \"-\" + month + \"-\" + day + \"T\" + time;\r\n            return new Date(formatted);\r\n        }\r\n        else {\r\n            return new Date(dateValue);\r\n        }\r\n    }\r\n    else {\r\n        return dateValue;\r\n    }\r\n}\r\n\r\nexport function preRegDispatch(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        dispatch({\r\n            type: DEFAULT_RETURN,\r\n            payload: {\r\n                ...inputParam\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function validateEsignforRegistration(inputParam) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data === \"Success\") {\r\n\r\n                    const methodUrl = \"registration\";\r\n                    inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\r\n\r\n                    if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()] &&\r\n                        inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]) {\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"]\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"]\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"]\r\n                    }\r\n                    //dispatch(inputParam[\"screenData\"][\"inputParam\"].performAction(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"]))\r\n                    dispatch(dispatchMethods(inputParam[\"screenData\"]))\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            })\r\n    };\r\n}\r\n\r\nfunction dispatchMethods(screenData) {\r\n    return (dispatch) => {\r\n        let action = screenData.inputParam.action\r\n        switch (action) {\r\n            case \"preregister\":\r\n                dispatch(insertRegistration(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"editSample\":\r\n                dispatch(updateRegistration(screenData.inputParam, screenData.masterData, 'openModal'));\r\n                break;\r\n            case \"accept\":\r\n                dispatch(acceptRegistration(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"quarantine\":\r\n                dispatch(preregRecordToQuarantine(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"cancelTest\":\r\n                dispatch(cancelTestAction(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"cancelSample\":\r\n                dispatch(cancelSampleAction(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"addregsourcecountry\":\r\n                dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n                break;\r\n            case \"deleteregsourcecountry\":\r\n                dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n                break;\r\n            case \"printer\":\r\n                dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n                break;\r\n            case \"editSubSample\":\r\n                dispatch(onUpdateSubSampleRegistration(screenData.inputParam, screenData.masterData));\r\n                //ALPD-1128\r\n                break;\r\n            case \"cancelSubSample\":\r\n                dispatch(cancelSubSampleAction(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"adhocTest\":\r\n                dispatch(createAdhocTest(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\nexport function getStorageCategoryForSendToStore(storeInputParam, selectedRecord, sampleDetails) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n\r\n        const userInfo = storeInputParam.userInfo;\r\n        let masterData = storeInputParam.masterData;\r\n        const sendToStoreId = storeInputParam.controlcode;\r\n\r\n\r\n        const geStorageCategory = rsapi.post(\"/storagecategory/getStorageCategory\", { 'userinfo': userInfo });\r\n        const getUnit = rsapi.post(\"/unit/getUnit\", { 'userinfo': userInfo });\r\n        const getApprovedLocation = rsapi.post(\"/samplestoragemaster/getSampleQty\", sampleDetails);\r\n\r\n        let urlArray = [geStorageCategory, getUnit, getApprovedLocation];\r\n\r\n        ///////////////////////////////\r\n        if (sampleDetails.needSubSample) {\r\n            if (masterData[\"selectedSubSample\"].length > 1 ||\r\n                masterData[\"selectedSubSample\"]\r\n                    .findIndex(x => x[storeInputParam.primaryKeyName] === storeInputParam[\"mastersendtostore\"][storeInputParam.primaryKeyName])\r\n                === -1) {\r\n                storeInputParam.subSampleRegParam[\"getSubSampleChildDetail\"] = true;\r\n            }\r\n\r\n            masterData[\"selectedSubSample\"] = [];\r\n            masterData[\"selectedSubSample\"].push(storeInputParam[\"mastersendtostore\"]);\r\n\r\n            // storeInputParam.subSampleRegParam[\"npreregno\"] = storeInputParam[\"mastersendtostore\"][\"npreregno\"];\r\n            // storeInputParam.subSampleRegParam[\"checkBoxOperation\"] = 3;\r\n            // storeInputParam.subSampleRegParam[\"nfilterstatus\"] = storeInputParam[\"mastersendtostore\"][\"ntransactionstatus\"];\r\n            // storeInputParam.subSampleRegParam[\"napprovalconfigcode\"] = storeInputParam[\"mastersendtostore\"][\"napprovalconfigcode\"];\r\n\r\n            let inputParamData = {\r\n                nsampletypecode: storeInputParam[\"subSampleRegParam\"].nsampletypecode,\r\n                nregtypecode: storeInputParam[\"subSampleRegParam\"].nregtypecode,\r\n                nregsubtypecode: storeInputParam[\"subSampleRegParam\"].nregsubtypecode,\r\n                npreregno: String(storeInputParam[\"mastersendtostore\"].npreregno),\r\n                ntransactionsamplecode: String(storeInputParam[\"mastersendtostore\"].ntransactionsamplecode),\r\n                ntransactionstatus: storeInputParam[\"mastersendtostore\"].ntransactionstatus,\r\n                napprovalconfigcode: storeInputParam[\"mastersendtostore\"].napprovalconfigcode,\r\n                activeTestTab: storeInputParam[\"subSampleRegParam\"].activeTestTab,\r\n                activeSampleTab: storeInputParam[\"subSampleRegParam\"].activeSampleTab,\r\n                activeSubSampleTab: storeInputParam[\"subSampleRegParam\"].activeSubSampleTab,\r\n                userinfo: storeInputParam.userInfo,\r\n                ndesigntemplatemappingcode: storeInputParam[\"subSampleRegParam\"].ndesigntemplatemappingcode,\r\n                checkBoxOperation: storeInputParam[\"masterData\"].checkBoxOperation,\r\n                nneedsubsample: storeInputParam[\"subSampleRegParam\"].nneedsubsample\r\n            }\r\n\r\n            urlArray.push(rsapi.post(\"registration/getRegistrationTest\", inputParamData));\r\n        }\r\n        else {\r\n            if (masterData[\"selectedSample\"].length > 1 ||\r\n                masterData[\"selectedSample\"]\r\n                    .findIndex(x => x[storeInputParam.primaryKeyName] === storeInputParam[\"mastersendtostore\"][storeInputParam.primaryKeyName])\r\n                === -1) {\r\n                storeInputParam.mainSampleRegParam[\"getSampleChildDetail\"] = true;\r\n            }\r\n            masterData[\"selectedSample\"] = [];\r\n            masterData[\"selectedSample\"].push(storeInputParam[\"mastersendtostore\"]);\r\n\r\n            const inputParamData = {\r\n                nsampletypecode: storeInputParam.mainSampleRegParam.nsampletypecode,\r\n                nregtypecode: storeInputParam.mainSampleRegParam.nregtypecode,\r\n                nregsubtypecode: storeInputParam.mainSampleRegParam.nregsubtypecode,\r\n                npreregno: String(storeInputParam.mastersendtostore.npreregno),\r\n                ntransactionstatus: storeInputParam.mastersendtostore.ntransactionstatus,\r\n                napprovalconfigcode: storeInputParam.mastersendtostore.napprovalconfigcode,\r\n                activeTestTab: storeInputParam.mainSampleRegParam.activeTestTab,\r\n                activeSampleTab: storeInputParam.mainSampleRegParam.activeTestTab,\r\n                activeSubSampleTab: storeInputParam.mainSampleRegParam.activeTestTab,\r\n                userinfo: storeInputParam.userInfo,\r\n                ndesigntemplatemappingcode: storeInputParam.mainSampleRegParam.ndesigntemplatemappingcode,\r\n                nneedsubsample: storeInputParam.mainSampleRegParam.nneedsubsample,\r\n                // ntype: storeInputParam.masterData.checkBoxOperation === 7 ? 4 : undefined,\r\n                ntype: storeInputParam.masterData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL ? 4 : undefined,\r\n                // checkBoxOperation: storeInputParam.masterData.nneedsubsample === true ?\r\n                //     storeInputParam.masterData.checkBoxOperation === 5 ? 3 : storeInputParam.masterData.checkBoxOperation : storeInputParam.mastersendtostore.checkBoxOperation\r\n                checkBoxOperation: storeInputParam.masterData.nneedsubsample === true ?\r\n                    storeInputParam.masterData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS ? checkBoxOperation.SINGLESELECT : storeInputParam.masterData.checkBoxOperation : storeInputParam.mastersendtostore.checkBoxOperation\r\n\r\n            }\r\n            urlArray.push(rsapi.post(\"registration/getRegistrationSubSample\", inputParamData));\r\n\r\n        }\r\n\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                //console.log(\"res:\", response);\r\n                if (response[2].data[\"ReturnStatus\"] !== undefined) {\r\n                    toast.info(response[2].data[\"ReturnStatus\"]);\r\n                    masterData = {\r\n                        ...masterData, ...response[3].data\r\n                    };\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            // openChildModal: true,\r\n                            // operation: \"sendToStore\",\r\n                            ncontrolcode: sendToStoreId,\r\n                            selectedRecord,\r\n                            npreregno: sampleDetails.npreregno,\r\n                            ntransactionsamplecode: sampleDetails.ntransactionsamplecode\r\n\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    const conditionMap = constructOptionList(response[0].data, \"nstoragecategorycode\", \"sstoragecategoryname\", false, false, true);\r\n                    const conditionMaster = conditionMap.get(\"OptionList\");\r\n\r\n                    const conditionUnitMap = constructOptionList(response[1].data, \"nunitcode\", \"sunitname\", false, false, true);\r\n                    const conditionUnitMaster = conditionUnitMap.get(\"OptionList\");\r\n\r\n                    let isneedSubSampleQty = false;\r\n                    let approvedTreeData = [];\r\n                    selectedRecord[\"nsamplestoragelocationcode\"] = [];\r\n                    selectedRecord[\"nstoragecategorycode\"] = [];\r\n                    selectedRecord[\"nsampleqty\"] = undefined;\r\n                    selectedRecord[\"sampleToStore\"] = sampleDetails.sample === undefined ? \"\" : sampleDetails.sample;\r\n\r\n                    if (response[2].data !== null && response[2].data[\"isNeedSubSampleQty\"] && response[2].data[\"isNeedSubSampleQty\"] !== \"\") {\r\n                        isneedSubSampleQty = false;\r\n                    } else {\r\n                        isneedSubSampleQty = true;\r\n                    }\r\n\r\n                    if (response[2].data !== null && response[2].data.unit && response[2].data.unit.value !== undefined) {\r\n                        conditionUnitMaster.map(item => item.value === response[2].data.unit.value ?\r\n                            selectedRecord[\"nunitcode\"] = {\r\n                                \"label\": item.label,\r\n                                \"value\": item.value,\r\n                                \"item\": item.item\r\n                            }\r\n                            : \"\");\r\n\r\n                    }\r\n                    masterData = {\r\n                        ...masterData, storageCategory: conditionMaster, approvedTreeData,\r\n                        unitMaster: conditionUnitMaster, ...response[3].data\r\n                    };\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            openChildModal: true,\r\n                            operation: \"sendToStore\",\r\n                            ncontrolcode: sendToStoreId,\r\n                            selectedRecord,\r\n                            npreregno: sampleDetails.npreregno,\r\n                            ntransactionsamplecode: sampleDetails.ntransactionsamplecode, isneedSubSampleQty\r\n\r\n                        }\r\n                    });\r\n                }\r\n\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 503) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport function UpdateExternalOrderStatus(portallist, inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post((String)(inputParam.inputData[\"url\"]) + \"/portal/UpdateMultiSampleStatus\", JSON.stringify(portallist), {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            }\r\n        })\r\n            .then(response => {\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response !== undefined && error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else if (error.response === undefined) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function autoExternalComponentLoadBasedOnSpec(dispatchData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getSampleBasedOnExternalOrder\",\r\n            {\r\n                'nexternalordercode': dispatchData.selectedRecord[\"Order\"] ? dispatchData.selectedRecord[\"Order\"].value : -1,\r\n                \"nexternalordersamplecode\": dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1\r\n            })\r\n            .then(response => {\r\n                let Sample = response.data.Sample;\r\n                //console.log(\"sample:\", Sample);\r\n                let Test1 = response.data.Test\r\n                let subSampleDataGridList = []\r\n                let Component = []\r\n                const Test = {};\r\n                Sample.map((sample, index) => {\r\n                    let saveComponent = {};\r\n                    saveComponent[\"slno\"] = index;\r\n                    saveComponent['jsondata'] = {}\r\n                    saveComponent['jsonuidata'] = {}\r\n                    saveComponent['ncomponentcode'] = sample['ncomponentcode']\r\n                    saveComponent['nspecsampletypecode'] = sample['nspecsampletypecode']\r\n                    saveComponent['scomponentname'] = sample['scomponentname']\r\n                    //saveComponent['jsondata']['ncomponentcode'] = { label: sample['scomponentname'], value: sample['ncomponentcode'] }\r\n                    // saveComponent['jsonuidata']['ncomponentcode'] = sample['scomponentname']\r\n\r\n                    //  saveComponent['jsondata']['scomponentname'] =  sample['scomponentname']\r\n                    saveComponent['jsonuidata']['scomponentname'] = sample['scomponentname']\r\n\r\n                    saveComponent['jsondata']['External Sample ID_child'] = sample['sexternalsampleid']\r\n                    saveComponent['jsonuidata']['External Sample ID_child'] = sample['sexternalsampleid']\r\n\r\n                    saveComponent['jsondata']['sampleorderid'] = sample['sexternalsampleid']\r\n                    saveComponent['jsonuidata']['sampleorderid'] = sample['sexternalsampleid']\r\n\r\n                    saveComponent['jsondata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1;\r\n                    saveComponent['jsonuidata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1;\r\n                    // ALPD-3575\r\n                    saveComponent['jsondata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime']\r\n                    saveComponent['jsonuidata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime']\r\n\r\n                    saveComponent['jsondata']['nsampleappearancecode'] = sample['nsampleappearancecode']\r\n                    saveComponent['jsonuidata']['nsampleappearancecode'] = sample['nsampleappearancecode']\r\n\r\n                    saveComponent['jsondata']['ssampleappearance'] = sample['ssampleappearance']\r\n                    saveComponent['jsonuidata']['ssampleappearance'] = sample['ssampleappearance']\r\n\r\n                    saveComponent['jsondata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime']\r\n                    saveComponent['jsonuidata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime']\r\n\r\n                    saveComponent['jsondata']['Sample Appearance_child'] = {\r\n                        'label': sample['ssampleappearance'], 'value': sample['nsampleappearancecode'],\r\n                        'source': 'sampleappearance', 'pkey': 'nsampleappearancecode', 'nquerybuildertablecode': sample['nquerybuildertablecode']\r\n                    }\r\n                    saveComponent['jsonuidata']['Sample Appearance_child'] = sample['ssampleappearance']\r\n                    // ALPD-3575\r\n                    // saveComponent['jsondata']['Quantity_child'] = sample['nsampleqty']\r\n                    // saveComponent['jsonuidata']['Quantity_child'] = sample['nsampleqty']\r\n\r\n                    // saveComponent['jsondata']['Unit Name_child'] = { label: sample['sunitname'], value: sample['nunitcode'] }\r\n                    // saveComponent['jsonuidata']['Unit Name_child'] = sample['sunitname']\r\n\r\n                    subSampleDataGridList.push({ ...saveComponent['jsonuidata'], ...saveComponent, \"Sample Collection Date Time_child\": convertDateTimetoString(new Date(sample['dsamplecollectiondatetime']), dispatchData.userInfo) });\r\n                    Component.unshift(saveComponent);\r\n                    delete dispatchData['userInfo'];\r\n                    const filterTest = Test1.filter(x => x.nexternalordersamplecode === sample.nexternalordersamplecode)\r\n                    filterTest.map(x => {\r\n                        x['slno'] = index\r\n                    })\r\n                    //selectedTestData=[...selectedTestData,...filterTest]\r\n                    Test[index] = filterTest\r\n\r\n                })\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ...dispatchData,\r\n                        Component,\r\n                        selectedComponent: Component.length > 0 ? { ...Component[0] } : {},\r\n                        selectComponent: {},\r\n                        SelectedTest: Component.length > 0 ? Test[Component[0].slno] : [],\r\n                        Test: Test,\r\n                        selectedTestData: {},\r\n                        subSampleDataGridList,\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function autoPortalTestLoadBasedOnSpec(dispatchData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getSampleBasedOnPortalOrder\",\r\n            {\r\n                'nexternalordercode': dispatchData.selectedRecord[\"Plant Order\"] ? dispatchData.selectedRecord[\"Plant Order\"].value : -1,\r\n                'userinfo': dispatchData.userInfo\r\n            })\r\n            .then(response => {\r\n                let Sample = response.data.Sample;\r\n                let Test1 = response.data.Test\r\n                let subSampleDataGridList = []\r\n                let Component = []\r\n                const Test = {};\r\n\r\n                Sample.map((sample, index) => {\r\n                    let saveComponent = {};\r\n                    saveComponent[\"slno\"] = index;\r\n                    saveComponent['jsondata'] = {}\r\n                    saveComponent['jsonuidata'] = {}\r\n                    saveComponent['ncomponentcode'] = sample['ncomponentcode']\r\n                    saveComponent['nspecsampletypecode'] = sample['nspecsampletypecode']\r\n                    saveComponent['scomponentname'] = sample['scomponentname']\r\n                    saveComponent['jsonuidata']['scomponentname'] = sample['scomponentname']\r\n                    saveComponent['jsondata']['External Sample ID_child'] = sample['sexternalsampleid']\r\n                    saveComponent['jsonuidata']['External Sample ID_child'] = sample['sexternalsampleid']\r\n                    saveComponent['jsondata']['sampleorderid'] = sample['sexternalsampleid']\r\n                    saveComponent['jsonuidata']['sampleorderid'] = sample['sexternalsampleid']\r\n                    saveComponent['jsondata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1;\r\n                    saveComponent['jsonuidata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1;\r\n                    saveComponent['jsondata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime']\r\n                    saveComponent['jsonuidata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime']\r\n\r\n                    saveComponent['jsondata']['nsampleappearancecode'] = sample['nsampleappearancecode']\r\n                    saveComponent['jsonuidata']['nsampleappearancecode'] = sample['nsampleappearancecode']\r\n\r\n                    saveComponent['jsondata']['ssampleappearance'] = sample['ssampleappearance']\r\n                    saveComponent['jsonuidata']['ssampleappearance'] = sample['ssampleappearance']\r\n\r\n                    saveComponent['jsondata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime']\r\n                    saveComponent['jsonuidata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime']\r\n\r\n                    saveComponent['jsondata']['Sample Appearance_child'] = {\r\n                        'label': sample['ssampleappearance'], 'value': sample['nsampleappearancecode'],\r\n                        'source': 'sampleappearance', 'pkey': 'nsampleappearancecode', 'nquerybuildertablecode': sample['nquerybuildertablecode']\r\n                    }\r\n                    saveComponent['jsonuidata']['Sample Appearance_child'] = sample['ssampleappearance']\r\n\r\n                    subSampleDataGridList.push({ ...saveComponent['jsonuidata'], ...saveComponent, \"Sample Collection Date Time_child\": convertDateTimetoString(new Date(sample['dsamplecollectiondatetime']), dispatchData.userInfo) });\r\n                    Component.unshift(saveComponent);\r\n                    delete dispatchData['userInfo'];\r\n                    const filterTest = Test1.filter(x => x.nexternalordersamplecode === sample.nexternalordersamplecode)\r\n                    filterTest.map(x => {\r\n                        x['slno'] = index\r\n                    })\r\n                    Test[index] = filterTest\r\n\r\n                })\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ...dispatchData,\r\n                        Component,\r\n                        selectedComponent: Component.length > 0 ? { ...Component[0] } : {},\r\n                        selectComponent: {},\r\n                        SelectedTest: Test[0],\r\n                        Test: Test,\r\n                        subSampleDataGridList,\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function getBarcodeAndPrinterService(inputParam) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true))\r\n        let urlArray = [];\r\n        const getPrinter = rsapi.post(\"barcode/getPrinter\", inputParam.userInfo);\r\n\r\n        const getControlBasedBarcode = rsapi.post(\"barcode/getControlBasedBarcode\", inputParam);\r\n\r\n        urlArray = [getPrinter, getControlBasedBarcode]\r\n        // rsapi.post(\"barcode/getPrinter\", inputParam.userInfo)\r\n        Axios.all(urlArray).then(response => {\r\n            let selectedPrinterData = {\r\n                sprintername: {\r\n                    value: response[0].data[0].sprintername,\r\n                    label: response[0].data[0].sprintername,\r\n                    item: response[0].data[0]\r\n                },\r\n                sbarcodename: \"\"\r\n            };\r\n            const printer = constructOptionList(response[0].data || [], \"sprintername\",\r\n                \"sprintername\", undefined, undefined, true).get(\"OptionList\");\r\n            const barcode = constructOptionList(response[1].data || [], \"sbarcodename\",\r\n                \"sbarcodename\", undefined, undefined, true).get(\"OptionList\");\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    masterData: {\r\n                        ...inputParam.masterData, control: inputParam.control,\r\n                    },\r\n                    printer,\r\n                    barcode,\r\n                    selectedPrinterData,\r\n                    operation: \"printer\",\r\n                    screenName: \"IDS_PRINTBARCODE\",\r\n                    //dataToPrint: inputParam.selectedGoodsIn.nrmsno,\r\n                    ncontrolcode: inputParam.ncontrolcode,\r\n                    loading: false,\r\n                    openModal: true,\r\n                    loadPrinter: true\r\n                }\r\n            });\r\n        })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            });\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function getOrderDetails(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/externalorder/getDraftExternalOrderDetails\", { sexternalorderid: inputData.sexternalorderid, nexternalordertypecode: inputData.selectedRecord.nexternalordertypecode && inputData.selectedRecord.nexternalordertypecode.value, userinfo: inputData.userinfo }).then(response => {\r\n\r\n            let masterData = { ...inputData.masterData }  //orders:response.data.ExternalOrder\r\n            let selectedRecord = { ...inputData.selectedRecord }\r\n\r\n            selectedRecord['orders'] = response.data.ExternalOrder\r\n            response.data.isRecordNotAvailable && response.data.isRecordNotAvailable !== \"\" && toast.warn(response.data.isRecordNotAvailable);\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    masterData,\r\n                    selectedRecord,\r\n                    loading: false\r\n                }\r\n            });\r\n        })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    //toast.warn(error.response.data['rtn']);\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function onUpdateCancelExternalOrder(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/externalorder/onUpdateCancelExternalOrder\", { ...inputParam.inputData }).then(response => {\r\n\r\n\r\n            // if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n            //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n            // }\r\n            let masterData = { ...inputParam.inputData.masterData, orders: [] }\r\n\r\n            // if (response.data[\"rtn\"] === true) {\r\n            //     toast.info(intl.formatMessage({ id: response.data[\"rtn\"] }));\r\n            // }\r\n\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    selectedRecord: {},\r\n                    masterData,\r\n                    loading: false,\r\n                    openModal: false\r\n                }\r\n            });\r\n        })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    //toast.warn(error.response.data['rtn']);\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getOutSourceSite(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/externalorder/getOutSourceSite\", { ...inputParam.inputData })\r\n            .then(response => {\r\n                //console.log(\"response if loop\");\r\n                const siteListMap = constructOptionList(response.data || [], 'nsitecode', 'ssitename', undefined, undefined, undefined,\r\n                    'ndefaultstatus') || [];\r\n\r\n                const siteList = siteListMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        outSourceSiteList: siteList,\r\n                        loading: false,\r\n                        openModal: true,\r\n                        outsourcetest: true,\r\n                        outSourceSiteData: inputParam.inputData,\r\n                        screenName: inputParam.screenName,\r\n                        parentPopUpSize: \"lg\"\r\n\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                    //toast.error(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function getOutSourceSiteAndTest(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/externalorder/getOutSourceSiteAndTest\", { ...inputParam.inputData })\r\n            .then(response => {\r\n                //console.log(\"response if loop\");\r\n                const siteListMap = constructOptionList(response.data.Site || [], 'nsitecode', 'ssitename', undefined, undefined, undefined,\r\n                    'ndefaultstatus') || [];\r\n                // const testListMap = constructOptionList(response.data.Test || [], 'ntransactiontestcode', 'stestsynonym', undefined, undefined, undefined,\r\n                // 'ndefaultstatus') || [];\r\n\r\n                const selectedRecord = [];\r\n                selectedRecord[\"ssampleid\"] = inputParam.inputData.registrationtest.ssamplearno;\r\n                selectedRecord[\"doutsourcedate\"] = new Date();\r\n                const siteList = siteListMap.get(\"OptionList\");\r\n                const str = response.data.regDate;\r\n\r\n                const date = new Date(str);\r\n                // const testList = testListMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        outSourceSiteList: siteList,\r\n                        outSourceTestList: response.data.Test,//testList,\r\n                        regDate: date.toDateString(),\r\n                        loading: false,\r\n                        openModal: true,\r\n                        outsourcetest: true,\r\n                        outSourceSiteData: inputParam.inputData,\r\n                        screenName: inputParam.screenName,\r\n                        parentPopUpSize: \"lg\",\r\n                        selectedRecord\r\n\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                    //toast.error(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function outsourceTest(inputData, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        //console.log(\"inputData:\", inputData);\r\n        rsapi.post(\"/externalorder/outSourceTest\", { ...inputData })\r\n            .then(response => {\r\n                //console.log(\"Test OutSourced\");\r\n                const OutSourcedTestGet = response.data[\"OutSourcedTestGet\"];\r\n                // console.log(\"OutSourcedTestGet:\", OutSourcedTestGet);\r\n\r\n                masterData = {\r\n                    ...masterData,\r\n                    selectedTest: OutSourcedTestGet,\r\n\r\n                    ...masterData.selectedSample.map(statusupdate => {\r\n                        if (statusupdate.npreregno === OutSourcedTestGet[0].npreregno) {\r\n                            // childref.ref.current.value = \"\";\r\n                            statusupdate.ntransactionstatus = 33;\r\n                            statusupdate.stransdisplaystatus = \"Released\";\r\n                        }\r\n                    }),\r\n\r\n                    RegistrationGetTest: replaceUpdatedObject(OutSourcedTestGet, masterData.RegistrationGetTest, \"ntransactiontestcode\"),\r\n                }\r\n\r\n                toast.info(response.data[\"Msg\"]);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        loading: false,\r\n                        openModal: false,\r\n                        outsourcetest: false,\r\n                        masterData\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function outsourceSampleTest(inputData, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        //console.log(\"inputData:\", inputData);\r\n        rsapi.post(\"/externalorder/outSourceSampleTest\", { ...inputData })\r\n            .then(response => {\r\n                //console.log(\"Test OutSourced\");\r\n                const OutSourcedTestGet = response.data[\"OutSourcedTestGet\"];\r\n                // console.log(\"OutSourcedTestGet:\", OutSourcedTestGet);\r\n                const OutSourcedSubSampleGet = response.data[\"OutSourcedSubSampleGet\"];\r\n                const OutsourceDetailsList = response.data[\"OutsourceDetailsList\"];\r\n                masterData = {\r\n                    ...masterData,\r\n                    selectedTest: OutSourcedTestGet, OutsourceDetailsList,\r\n                    //selectedSubSample:OutSourcedSubSampleGet,\r\n                    // ...masterData.selectedSample.map(statusupdate => {\r\n                    //     if (statusupdate.npreregno === OutSourcedTestGet[0].npreregno) {\r\n                    //      // childref.ref.current.value = \"\";\r\n                    //      statusupdate.ntransactionstatus=33;\r\n                    //      statusupdate.stransdisplaystatus=\"Released\";\r\n                    //     }\r\n                    //   }),\r\n\r\n                    RegistrationGetTest: replaceUpdatedObject(OutSourcedTestGet, masterData.RegistrationGetTest, \"ntransactiontestcode\"),\r\n                    RegistrationGetSubSample: replaceUpdatedObject(OutSourcedSubSampleGet, masterData.RegistrationGetSubSample, \"ntransactionsamplecode\"),\r\n                    RegistrationGetSample: replaceUpdatedObject(response.data[\"OutSourcedSampleGet\"], masterData.RegistrationGetSample, \"npreregno\"),\r\n                }\r\n\r\n                toast.info(response.data[\"Msg\"]);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        loading: false,\r\n                        openModal: false,\r\n                        outsourcetest: false,\r\n                        masterData,\r\n                        selectedRecord: {},\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function insertMultipleRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload) {\r\n            requestUrl = rsapi.post(\"/registration/importRegistrationData\", inputParam.formData)\r\n        } else {\r\n            requestUrl = rsapi.post(\"/registration/createRegistration\", inputParam.inputData)\r\n        }\r\n        return requestUrl\r\n            //  rsapi.post(\"/registration/createRegistration\", inputParam.formData)\r\n            .then(response => {\r\n                if (response.data.rtn === \"Success\") {\r\n                    // if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                    //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                    // }\r\n                    let registrationList = [...response.data[\"RegistrationGetSample\"], ...masterData.RegistrationGetSample]\r\n                    let RegistrationGetSample = registrationList;\r\n                    // updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"] , masterData.RegistrationGetSample, 'Sample');\r\n                    let selectedSample = response.data[\"selectedSample\"];\r\n                    let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    let selectedSubSample = RegistrationGetSubSample;\r\n                    RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                    let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                    let regSampleExisted = inputParam.inputData && inputParam.inputData.orderTypeValue === 2 ? true : false;\r\n                    if (inputParam.inputData.nneedsubsample) {\r\n                        RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                        selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                        RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                        selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                    }\r\n                    // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                    if (inputParam.multipleselectionFlag) {\r\n                        selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                        RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                        RegistrationGetTest = masterData.RegistrationGetTest;\r\n                    }\r\n\r\n\r\n                    masterData = {\r\n                        ...masterData, ...response.data,\r\n                        selectedSample, selectedSubSample, selectedTest,\r\n                        RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        ...inputParam.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        selectedRecord: undefined,\r\n                        loading: false,\r\n                        loadPreregister: false,\r\n                        showSample: undefined,\r\n                        openPortal: false,\r\n                        selectedSpec: {},\r\n                        selectComponent: {},\r\n                        SelectedTest: {},\r\n                        selectedComponent: {},\r\n                        Component: [],\r\n                        selectedRecord: {},\r\n                        SelectedTest: [],\r\n                        Test: [],\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList: [],\r\n                        preregConfirmMessage: undefined,\r\n                        regSampleExisted, loadImportFileData: false, loadImportSampleCountData: false\r\n                    }\r\n                    inputParam.postParamList[0]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[1]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                } else {\r\n                    toast.info(response.data.rtn);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false, showConfirmAlert: false, preregConfirmMessage: undefined, loadImportFileData: false, loadImportSampleCountData: false, openModal: false,\r\n                            openPortal: false,\r\n                            loadEsign: false,\r\n                            showConfirmAlert: false,\r\n                        }\r\n                    })\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);             \r\n                if (error.response.status === 500) {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false, preregConfirmMessage: undefined } })\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                preregConfirmMessage: error.response.data.rtn,\r\n                                preregConfirmParam: { inputParam, masterData },\r\n                                loading: false,\r\n                                showSample: undefined,\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        toast.error(error.message);\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                loading: false,\r\n                                showConfirmAlert: false, preregConfirmMessage: undefined\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function insertRegSample(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        //console.log(\"inputData:\", inputData);\r\n        rsapi.post(\"/registration/importRegistrationSample\", inputParam.formData)\r\n            .then(response => {\r\n                if (response.data.rtn === \"Success\") {\r\n                    // if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                    //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                    // }\r\n                    // Commented because insertRegSample is for smtl not for portal\r\n                    let registrationList = [...response.data[\"RegistrationGetSample\"], ...masterData.RegistrationGetSample]\r\n                    let RegistrationGetSample = registrationList;\r\n                    // updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"] , masterData.RegistrationGetSample, 'Sample');\r\n                    let selectedSample = response.data[\"selectedSample\"];\r\n                    let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    let selectedSubSample = RegistrationGetSubSample;\r\n                    RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                    let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                    let regSampleExisted = inputParam.inputData && inputParam.inputData.orderTypeValue === 2 ? true : false;\r\n                    if (inputParam.inputData.nneedsubsample) {\r\n                        RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                        selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                        RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                        selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                    }\r\n                    // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                    if (inputParam.multipleselectionFlag) {\r\n                        selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                        RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                        RegistrationGetTest = masterData.RegistrationGetTest;\r\n                    }\r\n\r\n\r\n                    masterData = {\r\n                        ...masterData, ...response.data,\r\n                        selectedSample, selectedSubSample, selectedTest,\r\n                        RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        ...inputParam.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        selectedRecord: undefined,\r\n                        loading: false,\r\n                        loadPreregister: false,\r\n                        showSample: undefined,\r\n                        openPortal: false,\r\n                        selectedSpec: {},\r\n                        selectComponent: {},\r\n                        SelectedTest: {},\r\n                        selectedComponent: {},\r\n                        Component: [],\r\n                        selectedRecord: {},\r\n                        SelectedTest: [],\r\n                        Test: [],\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList: [],\r\n                        preregConfirmMessage: undefined,\r\n                        regSampleExisted, loadImportFileData: false, loadImportSampleCountData: false\r\n                    }\r\n                    inputParam.postParamList[0]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[1]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                } else {\r\n                    toast.info(response.data.rtn);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false,\r\n                            //showConfirmAlert: false, \r\n                            // preregConfirmMessage: undefined,\r\n                            //loadImportFileData:false,\r\n                            //loadImportSampleCountData:false, \r\n                            openModal: false,\r\n                            // openPortal:false,\r\n                            loadEsign: false,\r\n                            //showConfirmAlert: false,\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getExternalOrderTypeForMapping(inputParem) {\r\n    return function (dispatch) {\r\n        let masterData = inputParem.inputParam.masterData;\r\n        let selectedSample = {};\r\n        if (masterData[\"selectedSample\"].length > 1) {\r\n            inputParem.masterData.selectedSample.map(x => {\r\n                if (x.npreregno === inputParem.inputParam[\"subSample\"].npreregno) {\r\n                    selectedSample = x;\r\n                }\r\n            });\r\n\r\n        } else {\r\n            selectedSample = masterData.selectedSample[0];\r\n        }\r\n        if (selectedSample && selectedSample.orderTypeValue === orderType.MANUAL) {\r\n\r\n            if (inputParem.inputParam.subSample.nordertypecode === orderType.MANUAL && inputParem.inputParam.subSample.ntransactionstatus !== transactionStatus.RELEASED\r\n                && inputParem.inputParam.subSample.ntransactionstatus !== transactionStatus.REJECT\r\n                && inputParem.inputParam.subSample.ntransactionstatus !== transactionStatus.CANCELLED) {\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"/registration/getExternalOrderForMapping\", inputParem)\r\n                    .then(response => {\r\n                        const orderListMap = constructOptionList(response.data.externalOrderList || [], \"nexternalordersamplecode\",\r\n                            \"sexternalsampleid\", \"nsorter\", \"ascending\", false);\r\n                        const orderList = orderListMap.get(\"OptionList\")\r\n                        if (masterData[\"selectedSubSample\"].length > 1) {\r\n                            masterData[\"selectedSubSample\"] = [];\r\n                            masterData[\"selectedSubSample\"].push(inputParem.inputParam[\"subSample\"]);\r\n                        }\r\n                        // if (masterData[\"selectedSample\"].length > 1) {\r\n                        //     inputParem.masterData.selectedSample.map(x => {\r\n                        //         if(x.npreregno === inputParem.inputParam[\"subSample\"].npreregno)\r\n                        //         {\r\n                        //             selectedSample = x;\r\n                        //         }\r\n                        //     });\r\n\r\n                        // } else {\r\n                        //     selectedSample = masterData.selectedSample[0];\r\n                        // }\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                orderList, orderDetails: { ...inputParem.inputParam, selectedSample: selectedSample },\r\n                                masterData: masterData, loading: false, showFilter: false, MappingFields: true, showQRCode: false,\r\n                                openChildModal: true, selectedDetailField: {}, selectedRecord: {}\r\n                            }\r\n                        });\r\n\r\n                    })\r\n                    .catch(error => {\r\n                        toast.error(error.message);\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    })\r\n            } else {\r\n                if (inputParem.inputParam.subSample.ntransactionstatus === transactionStatus.RELEASED) {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_RELEASEDSAMPLESCONNOTBEMAPPED\" }));\r\n                } else if (inputParem.inputParam.subSample.ntransactionstatus === transactionStatus.REJECT) {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_REJECTEDSAMPLESCONNOTBEMAPPED\" }));\r\n                } else if (inputParem.inputParam.subSample.ntransactionstatus === transactionStatus.CANCELLED) {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_CANCELLEDSAMPLESCONNOTBEMAPPED\" }));\r\n                } else {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_ALREADYEXTERNALMAPPED\" }));\r\n                }\r\n            }\r\n        } else {\r\n            toast.info(intl.formatMessage({ id: \"IDS_SELECTMANUALORDER\" }));\r\n        }\r\n    }\r\n}\r\nexport function getExternalOrderForMapping(inputParem) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getExternalOrderForMapping\", inputParem)\r\n            .then(response => {\r\n                const orderListMap = constructOptionList(response.data.externalOrderList || [], \"nexternalordersamplecode\",\r\n                    \"sexternalsampleid\", \"nsorter\", \"ascending\", false);\r\n                const orderList = orderListMap.get(\"OptionList\")\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        orderList, selectedRecord: inputParem.selectedRecord,\r\n                        masterData: inputParem.masterData, loading: false, showFilter: false, MappingFields: true, showQRCode: false,\r\n                        openChildModal: true, selectedDetailField: {}\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n\r\n    }\r\n}\r\nexport function orderMapping(inputParem) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/orderMapping\", inputParem.inputData)\r\n            .then(response => {\r\n                // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParem));\r\n                // }\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSample\"], inputParem.masterData.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], inputParem.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], inputParem.masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                let masterData = {\r\n                    ...inputParem.masterData,\r\n                    selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], inputParem.masterData.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], inputParem.masterData.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], inputParem.masterData.selectedTest, \"ntransactiontestcode\"),\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: masterData,\r\n                        loading: false, showFilter: false, openChildModal: false, showQRCode: false, selectedDetailField: undefined,\r\n                        orderList: []\r\n                    }\r\n                });\r\n                if (response.data.rtn === \"Success\") {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_EXTERNALSAMPLEMAPPEDSUCCESSFULLY\" }));\r\n                }\r\n\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function orderRecords(inputData) {\r\n    return function (dispatch) {\r\n        rsapi.post(\"/externalorder/getExternalOrderType\", inputData)\r\n            .then(response => {\r\n                let selectedRecord = { ...inputData.selectedRecord }\r\n                let externalOrderType = [];\r\n                response.data.ExternalOrderType.map(item => item.nexternalordertypecode !== -1 && externalOrderType.push(item));\r\n                let externalOrderTypeMap = constructOptionList(externalOrderType || [], \"nexternalordertypecode\",\r\n                    \"sexternalordertypename\", \"nexternalordertypecode\", \"descending\", false);\r\n                const externalOrderTypeList = externalOrderTypeMap.get(\"OptionList\")\r\n                // let selectedExternalOrderType = externalOrderTypeList[0];\r\n                // selectedRecord[\"selectedExternalOrderType\"] = selectedExternalOrderType;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ncontrolcode: inputData.CancelExternalOrderSampleId,\r\n                        operation: inputData.operation,\r\n                        loadPrinter: false,\r\n                        openModal: true,\r\n                        parentPopUpSize: 'xl',\r\n                        screenName: inputData.screenName,\r\n                        loading: false,\r\n                        masterData: inputData.masterData,\r\n                        externalOrderTypeList,\r\n                        // selectedRecord\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n//ALPD-3615--Start\r\nexport const getAdhocTest = (inputParam, masterData, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        const { userInfo } = { ...inputParam };\r\n        let ntransactionsamplecode = -1;\r\n        let requestUrl = '';\r\n\r\n        if (masterData && masterData.RealRegSubTypeValue.nneedsubsample) {\r\n            if (masterData[\"selectedSubSample\"].length > 1 ||\r\n                masterData[\"selectedSubSample\"]\r\n                    .findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"sampleadhoctest\"][inputParam.primaryKeyName])\r\n                === -1) {\r\n                inputParam.editRegParam[\"getSubSampleChildDetail\"] = true;\r\n            }\r\n            masterData[\"selectedSubSample\"] = [];\r\n            masterData[\"selectedSubSample\"].push(inputParam[\"sampleadhoctest\"]);\r\n            const selectedSpec = getSameRecordFromTwoArrays(masterData.selectedSample, masterData.selectedSubSample, \"npreregno\");\r\n            inputParam.sampleadhoctest['nallottedspeccode'] = selectedSpec[0].nallottedspeccode;\r\n            inputParam.sampleadhoctest['sspecname'] = selectedSpec[0].sspecname;\r\n            inputParam.editRegParam[\"npreregno\"] = inputParam[\"sampleadhoctest\"][\"npreregno\"];\r\n            inputParam.editRegParam[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT;\r\n            inputParam.editRegParam[\"nfilterstatus\"] = inputParam[\"sampleadhoctest\"][\"ntransactionstatus\"];\r\n            inputParam.editRegParam[\"napprovalconfigcode\"] = inputParam[\"sampleadhoctest\"][\"napprovalconfigcode\"];\r\n            ntransactionsamplecode = inputParam.sampleadhoctest[inputParam.primaryKeyName];\r\n            inputParam.editRegParam['nallottedspeccode'] = selectedSpec[0].nallottedspeccode;\r\n        }\r\n        else {\r\n            if (masterData[\"selectedSample\"].length > 1 ||\r\n                masterData[\"selectedSample\"]\r\n                    .findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"sampleadhoctest\"][inputParam.primaryKeyName])\r\n                === -1) {\r\n                inputParam.editRegParam[\"getSampleChildDetail\"] = true;\r\n            }\r\n            masterData[\"selectedSample\"] = [];\r\n            masterData[\"selectedSample\"].push(inputParam[\"sampleadhoctest\"]);\r\n        }\r\n        const npreregno = inputParam[\"sampleadhoctest\"].npreregno;\r\n        if (inputParam[\"sampleadhoctest\"] && inputParam[\"sampleadhoctest\"].ntransactionstatus !== transactionStatus.REJECT && inputParam[\"sampleadhoctest\"] && inputParam[\"sampleadhoctest\"].ntransactionstatus !== transactionStatus.CANCELLED) {\r\n            if (inputParam[\"sampleadhoctest\"] && inputParam[\"sampleadhoctest\"].ntransactionstatus !== transactionStatus.RELEASED) {\r\n\r\n\r\n                inputParam[\"nallottedspeccode\"] = inputParam[\"sampleadhoctest\"][\"nallottedspeccode\"]\r\n                dispatch(initRequest(true));\r\n                if (masterData && masterData.RealRegSubTypeValue.nneedsubsample) {\r\n                    requestUrl = rsapi.post(\"/registration/getAdhocTest\", {\r\n                        ...inputParam.editRegParam, ntransactionsamplecode,\r\n                        UserInfo: userInfo\r\n                    })\r\n                } else {\r\n                    requestUrl = rsapi.post(\"/registration/getAdhocTest\", {\r\n                        ...inputParam.editRegParam, UserInfo: userInfo, npreregno, nallottedspeccode: inputParam.sampleadhoctest.nallottedspeccode || -1\r\n                    })\r\n                }\r\n                return requestUrl\r\n\r\n                    .then(response => {\r\n                        let testData = [];\r\n                        const TestDataMap = constructOptionList(response.data['AdhocTest'] || [], \"ntestcode\",\r\n                            \"stestsynonym\", undefined, undefined, true);\r\n                        testData = TestDataMap.get(\"OptionList\");\r\n                        let selectedRecord = {};\r\n                        selectedRecord['visibleadhoctest'] = transactionStatus.NO;\r\n                        selectedRecord['specName'] = inputParam.sampleadhoctest['sspecname'];\r\n                        if (masterData && masterData.RealRegSubTypeValue.nneedsubsample) {\r\n                            if (inputParam.editRegParam[\"getSubSampleChildDetail\"] === true) {\r\n                                masterData = { ...masterData, ...response.data[\"SubSampleChildDetail\"] };\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\r\n                                masterData = sortData({ ...masterData, ...response.data[\"SampleChildDetail\"] })\r\n                            }\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: masterData,\r\n                                availableAdhocTest: testData,\r\n                                loadAdhocTest: true,\r\n                                loading: false, ncontrolCode,\r\n                                screenName: \"IDS_ADHOCTEST\",\r\n                                operation: \"create\",\r\n                                openModal: true,\r\n                                parentPopUpSize: \"lg\",\r\n                                selectedRecord: selectedRecord,\r\n                                showSample: undefined,\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.info(this.props.formatMessage({ id: error.response.data }));\r\n                        }\r\n                    });\r\n            }\r\n            else {\r\n                toast.info(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORRELEASEDSAMPLES\" }));\r\n                // if (inputParam.addTestParam[\"getSampleChildDetail\"] === true) {\r\n                //     masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\r\n                // }\r\n            }\r\n        }\r\n        else {\r\n            toast.info(intl.formatMessage({ id: \"IDS_SAMPLEISREJECTEDORCANCELLED\" }));\r\n            // if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\r\n            //     masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\r\n            // }\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\nexport const createAdhocTest = (inputParam, masterData, modalName) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData })\r\n            .then(response => {\r\n                let RegistrationGetTest = updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"], response.data[\"RegistrationGetTest\"]);\r\n                //let RegistrationGetSubSample = updatedObjectWithNewElement(masterData[\"RegistrationGetSubSample\"], response.data[\"RegistrationGetSubSample\"]);\r\n\r\n                masterData = {\r\n                    ...masterData,\r\n                    RegistrationGetTest: sortData(RegistrationGetTest, \"descending\", \"ntransactiontestcode\"),\r\n                    RegistrationGetSubSample: sortData(response.data[\"RegistrationGetSubSample\"], \"descending\", \"ntransactionsamplecode\"),\r\n                    selectedTest: response.data[\"RegistrationGetTest\"],\r\n                    //  selectedSubSample: response.data[\"RegistrationGetSubSample\"],\r\n                    selectedSubSample: response.data[\"selectedSubSample\"],\r\n                    RegistrationParameter: response.data.RegistrationParameter,\r\n                    RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, masterData.RegistrationGetSample, 'npreregno')\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    [modalName]: false,\r\n                    loading: false,\r\n                    loadChildTest: false,\r\n                    showSample: undefined,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    selectedRecord: {},\r\n                    showConfirmAlert: false,\r\n                    createTestConfirmMessage: undefined,\r\n                    loadAdhocTest: inputParam.inputData.loadAdhocTest\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no';\r\n                inputParam.postParamList[1]['clearFilter'] = 'no';\r\n                inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n\r\n            })\r\n            .catch(error => {\r\n\r\n                if (error.response.status === 500) {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, createTestConfirmMessage: undefined } })\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                createTestConfirmMessage: error.response.data.rtn,\r\n                                createTestConfirmParam: { inputParam, masterData, modalName },\r\n                                loading: false,\r\n                                loadChildTest: false,\r\n                                showSample: undefined,\r\n                                loadAdhocTest: inputParam.inputData.loadAdhocTest,\r\n                                //openModal: false,\r\n                                //selectedRecord: {}\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                [modalName]: false,\r\n                                loading: false,\r\n                                loadChildTest: false,\r\n                                showSample: undefined,\r\n                                openModal: false,\r\n                                selectedRecord: {},\r\n                                createTestConfirmMessage: undefined,\r\n                                loadAdhocTest: false,\r\n                                loadEsign: false,\r\n\r\n\r\n                            }\r\n                        });\r\n                        toast.info(error.response.data.rtn);\r\n                    }\r\n                }\r\n            });\r\n    }\r\n}\r\n//ALPD-3615--End\r\n\r\nexport const copySampleService = (inputData, masterData) => {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/copySample\", inputData)\r\n            .then(response => {\r\n                // masterData = {\r\n                //     ...masterData,\r\n                //     ...response.data\r\n                // };\r\n                if (response.data.rtn === \"Success\") {\r\n                    // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                    //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                    // }\r\n\r\n                    let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"], masterData.RegistrationGetSample);\r\n                    let selectedSample = response.data[\"selectedSample\"];\r\n                    let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    let selectedSubSample = RegistrationGetSubSample;\r\n                    RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                    let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                    let regSampleExisted = inputData && inputData.orderTypeValue === 2 ? true : false;\r\n                    if (inputData.nneedsubsample) {\r\n                        RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                        selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                        RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                        selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                    }\r\n                    // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                    if (inputData.multipleselectionFlag) {\r\n                        selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                        RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                        RegistrationGetTest = masterData.RegistrationGetTest;\r\n                    }\r\n\r\n                    masterData = {\r\n                        ...masterData, ...response.data,\r\n                        selectedSample, selectedSubSample, selectedTest,\r\n                        RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        //...inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        selectedRecord: undefined,\r\n                        loading: false,\r\n                        loadPreregister: false,\r\n                        showSample: undefined,\r\n                        openPortal: false,\r\n                        selectedSpec: {},\r\n                        selectComponent: {},\r\n                        SelectedTest: {},\r\n                        selectedComponent: {},\r\n                        Component: [],\r\n                        selectedRecord: {},\r\n                        SelectedTest: [],\r\n                        Test: [],\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList: [],\r\n                        preregConfirmMessage: undefined,\r\n                        regSampleExisted, loadImportFileData: false, loadImportSampleCountData: false,\r\n                        skip: 0,\r\n                        subsampleskip: 0,\r\n                        testskip: 0,\r\n                        isDynamicViewSlideOut: false\r\n                    }\r\n                    let postParamList = [];\r\n                    dispatch(postCRUDOrganiseTransSearch(postParamList, respObject))\r\n                } else {\r\n                    toast.info(response.data.rtn);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false, preregConfirmMessage: undefined } })\r\n                }\r\n\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}