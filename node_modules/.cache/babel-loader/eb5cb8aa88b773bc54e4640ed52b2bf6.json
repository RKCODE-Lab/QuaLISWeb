{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Card}from'react-bootstrap';import{injectIntl}from'react-intl';//FormattedMessage,\nimport SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import{toast}from'react-toastify';import Esign from'../audittrail/Esign';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{constructOptionList,showEsign,create_UUID,deleteAttachmentDropZone,onDropAttachFileList}from'../../components/CommonScript';import ProjectMasterMemberTabs from'./ProjectMasterMemberTabs';import ProjectMasterFileTab from'./ProjectMasterFileTab';import{transactionStatus,attachmentType}from'../../components/Enumeration';import CustomTabs from'../../components/custom-tabs/custom-tabs.component';import AddProjectMember from\"../../pages/project/AddProjectMember\";import AddProjectMasterFile from'./AddProjectMasterFile';import{formatInputDate}from\"../../components/CommonScript\";var ProjectMasterTab=/*#__PURE__*/function(_React$Component){_inherits(ProjectMasterTab,_React$Component);var _super=_createSuper(ProjectMasterTab);function ProjectMasterTab(props){var _this;_classCallCheck(this,ProjectMasterTab);_this=_super.call(this,props);_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});};_this.tabDetail=function(){var addteammembersId=_this.props.controlMap.has(\"AddTeammembers\")&&_this.props.controlMap.get(\"AddTeammembers\").ncontrolcode;var deleteteammembersId=_this.props.controlMap.has(\"DeleteTeammembers\")&&_this.props.controlMap.get(\"DeleteTeammembers\").ncontrolcode;var projectmasterAddParam={screenName:\"IDS_MEMBERS\",operation:\"create\",primaryKeyField:\"nprojectmembercode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:addteammembersId};var projectmasterDeleteParam={//    screenName: \"IDS_MEMBERS\", methodUrl: \"ProjectMember\", operation: \"delete\", ncontrolCode: deleteteammembersId \nscreenName:\"IDS_MEMBERS\",operation:\"delete\",primaryKeyField:\"nprojectmembercode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:deleteteammembersId};var tabMap=new Map();tabMap.set(\"IDS_MEMBERS\",/*#__PURE__*/React.createElement(ProjectMasterMemberTabs,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,addId:addteammembersId,addParam:projectmasterAddParam,comboDataService:_this.props.getProjectmasterAddMemberService,addTitleIDS:\"IDS_PROJECTMEMBER\",addTitleDefaultMsg:'ProjectMember',primaryKeyField:\"nprojectmembercode\",masterData:_this.props.masterData,primaryList:\"ProjectMember\",dataResult:_this.props.dataResult,dataState:_this.props.dataState,dataStateChange:_this.props.dataStateChange,columnList:_this.projectmemberColumnList,methodUrl:_this.props.methodUrl,deleteRecord:_this.props.deleteRecord,deleteParam:projectmasterDeleteParam// deleteParam={deleteteammembersId}\n}));tabMap.set(\"IDS_FILE\",/*#__PURE__*/React.createElement(ProjectMasterFileTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,projectmasterfile:_this.props.masterData.projectmasterFile||[],getAvailableData:_this.props.getAvailableData,addProjectMasterFile:_this.props.addProjectMasterFile,viewProjectMasterFile:_this.viewProjectMasterFile,defaultRecord:_this.defaultRecord// screenName=\"ProjectMaster File\"\n,screenName:\"IDS_FILE\",settings:_this.props.settings,ntransactionstatus:_this.props.ntransactionstatus}));return tabMap;};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;// let selectedRecord = this.props.selectedRecord;\nvar selectedRecord=_this.state.selectedRecord;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']='';selectedRecord['esigncomments']='';}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);};_this.viewProjectMasterFile=function(filedata){var inputParam={inputData:{projectmasterfile:filedata,userinfo:_this.props.userInfo},classUrl:\"projectmaster\",operation:\"view\",methodUrl:\"AttachedProjectMasterFile\",screenName:\"ProjectMaster File\"};_this.props.viewAttachment(inputParam);};_this.onSaveClick=function(saveType,formRef){var projectMasterData=[];var inputParam={};projectMasterData[\"userinfo\"]=_this.props.userInfo;var postParam={inputListName:\"ProjectMasterList\",selectedObject:\"SelectedProjectMaster\",primaryKeyField:\"nprojectmastercode\"};if(_this.props.operation===\"update\"&&_this.props.screenName===\"IDS_ADDPROJECTMASTER\"){postParam[\"primaryKeyValue\"]=_this.props.masterData.SelectedProjectMaster.nprojectmastercode;projectMasterData[\"projectMaster\"]={nprojectmastercode:_this.props.masterData.SelectedProjectMaster.nprojectmastercode,//     nprojecttypecode:this.state.selectedRecord.nprojecttypecode.value,\nsprojecttitle:_this.state.selectedRecord.sprojecttitle,sprojectcode:_this.state.selectedRecord.sprojectcode,sprojectdescription:_this.state.selectedRecord.sprojectdescription,// drfwdate: formatInputDate(this.state.selectedRecord[\"drfwdate\"],false),\n// dprojectstartdate: formatInputDate(this.state.selectedRecord[\"dprojectstartdate\"],false),\n//     nstudydirectorcode:this.state.selectedRecord.nstudydirectorcode.value,\n//     nteammembercode: this.state.selectedRecord.nteammembercode.value,\n//     nperiodcode: this.state.selectedRecord.nperiodcode.value,\nnprojectduration:_this.state.selectedRecord.nprojectduration};}else if(_this.props.operation===\"create\"&&_this.props.screenName===\"IDS_ADDPROJECTMASTER\"){projectMasterData[\"projectMaster\"]={nsitecode:_this.props.userInfo.nmastersitecode,sprojecttitle:_this.state.selectedRecord.sprojecttitle,sprojectcode:_this.state.selectedRecord.sprojectcode,sprojectdescription:_this.state.selectedRecord.sprojectdescription,nprojectduration:parseInt(_this.state.selectedRecord.nprojectduration)};/*     this.projectMasterFieldList.map((item) => {\r\n                   return (projectMasterData[\"projectMaster\"][item] = this.state.selectedRecord[item] == \"\" || this.state.selectedRecord[item] == undefined ?\r\n                   undefined :this.state.selectedRecord[item]);\r\n                 }); */}else if((_this.props.operation===\"create\"||_this.props.operation===\"update\")&&_this.props.screenName===\"IDS_FILE\"){inputParam=_this.onSaveProjectMasterFile(saveType,formRef);}if((_this.props.operation===\"create\"||_this.props.operation===\"update\")&&_this.props.screenName===\"IDS_ADDPROJECTMASTER\"){projectMasterData[\"projectMaster\"][\"nprojecttypecode\"]=_this.state.selectedRecord[\"nprojecttypecode\"]?_this.state.selectedRecord[\"nprojecttypecode\"].value:transactionStatus.NA;projectMasterData[\"projectMaster\"][\"nstudydirectorcode\"]=_this.state.selectedRecord[\"nstudydirectorcode\"]?_this.state.selectedRecord[\"nstudydirectorcode\"].value:transactionStatus.NA;projectMasterData[\"projectMaster\"][\"nteammembercode\"]=_this.state.selectedRecord[\"nteammembercode\"]?_this.state.selectedRecord[\"nteammembercode\"].value:transactionStatus.NA;projectMasterData[\"projectMaster\"][\"nperiodcode\"]=_this.state.selectedRecord[\"nperiodcode\"]?_this.state.selectedRecord[\"nperiodcode\"].value:transactionStatus.NA;// if (this.state.selectedRecord[\"drfwdate\"] || this.state.selectedRecord[\"dprojectstartdate\"]) {\n//   if (this.props.Login.operation === \"create\") {\nprojectMasterData[\"projectMaster\"][\"drfwdate\"]=formatInputDate(_this.state.selectedRecord[\"drfwdate\"],false);projectMasterData[\"projectMaster\"][\"dprojectstartdate\"]=formatInputDate(_this.state.selectedRecord[\"dprojectstartdate\"],false);//   }\n//   else {\n//     projectMasterData[\"projectMaster\"][\"drfwdate\"] = formatInputDate(this.state.selectedRecord[\"drfwdate\"],false);\n//     projectMasterData[\"projectMaster\"][\"dprojectstartdate\"] = formatInputDate(this.state.selectedRecord[\"dprojectstartdate\"],false);\n//   }\n// }\n}if(_this.props.operation===\"create\"&&_this.props.screenName===\"IDS_MEMBERS\"){/*        projectMasterData[\"ProjectMember\"] = {};\r\n                      projectMasterData[\"ProjectMember\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"][0] ? this.state.selectedRecord[\"nusercode\"][0].value\r\n                      : transactionStatus.NA;\r\n                      projectMasterData[\"ProjectMember\"][\"nprojectmastercode\"] =this.props.masterData.SelectedProjectMaster.nprojectmastercode; */inputParam=_this.onSaveProjectMasterMember(saveType,formRef);}if((_this.props.operation===\"create\"||_this.props.operation===\"update\")&&_this.props.screenName===\"IDS_ADDPROJECTMASTER\"){inputParam={classUrl:\"projectmaster\",methodUrl:\"ProjectMaster\",inputData:projectMasterData,operation:_this.props.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.isClearSearch};}/*else if ((this.props.operation === \"create\")  &&  (this.props.screenName === \"IDS_MEMBERS\")) {\r\n    \r\n          inputParam = {\r\n            classUrl: \"projectmaster\",\r\n            methodUrl: \"ProjectMember\",\r\n            inputData: projectMasterData,\r\n            operation: this.props.operation,\r\n            saveType,\r\n            formRef,\r\n            postParam,\r\n            searchRef: this.searchRef,\r\n            isClearSearch: this.props.isClearSearch,\r\n          }\r\n        } */var masterData=_this.props.masterData;if(showEsign(_this.props.userRoleControlRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}};_this.onSaveProjectMasterFile=function(saveType,formRef){var selectedRecord=_this.props.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var projectmasterFileArray=[];var projectmasterFile={nprojectmastercode:_this.props.masterData.SelectedProjectMaster.nprojectmastercode,nprojecttypecode:_this.props.masterData.SelectedProjectMaster.nprojecttypecode,nprojectmasterfilecode:selectedRecord.nprojectmasterfilecode?selectedRecord.nprojectmasterfilecode:0,nstatus:transactionStatus.ACTIVE,nattachmenttypecode:nattachmenttypecode// ndefaultstatus: selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] ? selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] : 4\n};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},projectmasterFile);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=selectedRecord.ssystemfilename?selectedRecord.ssystemfilename.split('.'):\"\";var filesystemfileext=selectedRecord.ssystemfilename?file.name.split('.')[ssystemfilename.length-1]:\"\";var uniquefilename=nattachmenttypecode===attachmentType.FTP?selectedRecord.nsupplierfilecode&&selectedRecord.nsupplierfilecode>0&&selectedRecord.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=file.name;tempData[\"sdescription\"]=selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\";tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);projectmasterFileArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{projectmasterFile[\"sfilename\"]=selectedRecord.sfilename;projectmasterFile[\"sdescription\"]=selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\";projectmasterFile[\"nlinkcode\"]=transactionStatus.NA;projectmasterFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;projectmasterFile[\"nfilesize\"]=selectedRecord.nfilesize;projectmasterFileArray.push(projectmasterFile);}}else{projectmasterFile[\"sfilename\"]=selectedRecord.slinkfilename.trim();projectmasterFile[\"sdescription\"]=selectedRecord.slinkdescription?selectedRecord.slinkdescription.trim():\"\";projectmasterFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;projectmasterFile[\"ssystemfilename\"]=\"\";projectmasterFile[\"nfilesize\"]=0;projectmasterFileArray.push(projectmasterFile);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"projectmasterfile\",JSON.stringify(projectmasterFileArray));// formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\nvar selectedId=null;var postParam=undefined;if(_this.props.operation===\"update\"){// edit\npostParam={inputListName:\"ProjectMaster\",selectedObject:\"SelectedProjectMaster\",primaryKeyField:\"nprojectmastercode\"};selectedId=selectedRecord[\"nprojectmasterfilecode\"];}var inputParam={inputData:{userinfo:_this.props.userInfo},formData:formData,isFileupload:true,operation:_this.props.operation,classUrl:\"projectmaster\",saveType:saveType,formRef:formRef,methodUrl:\"ProjectMasterFile\",postParam:postParam};return inputParam;};_this.deleteRecord=function(projectmasterfileparam){if(_this.props.masterData.SelectedProjectMaster.ntransactionstatus===transactionStatus.DRAFT){var inputParam={};var inputData={};// if (this.props.screenName === 'ProjectMaster File') { \nvar selectedRecord=projectmasterfileparam.selectedRecord;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{ntransactionstatus:_this.props.masterData.SelectedProjectMaster.ntransactionstatus});// inputData[\"projectmasterfile\"]={\n//     selectedRecord                    \n//     };\nif(_this.props.screenName==='IDS_FILE'){inputParam={classUrl:\"projectmaster\",methodUrl:projectmasterfileparam.methodUrl,inputData:{\"projectmasterfile\":selectedRecord,\"userinfo\":_this.props.userInfo},operation:projectmasterfileparam.operation,//dataState: this.state.dataState,\n//dataStateMaterial: this.state.dataStateMaterial\ndataState:_this.state.dataState};}if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,projectmasterfileparam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:projectmasterfileparam.screenName,operation:projectmasterfileparam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDRAFTRECORD\"}));}};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"//fileToDelete:file.name \n});};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={isOpen:false,selectedRecord:{},dataResult:[],activeTab:'ProjectMembers-tab',dataState:dataState};_this.projectmemberColumnList=[{\"idsName\":\"IDS_LOGINID\",\"dataField\":\"sloginid\",\"width\":\"200px\"},{\"idsName\":\"IDS_USER\",\"dataField\":\"steammembername\",\"width\":\"200px\"}];return _this;}_createClass(ProjectMasterTab,[{key:\"render\",value:function render(){// const mandatoryFields = [];\nvar mandatoryFields=[];if(this.props.screenName==='IDS_FILE'){if(this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK){mandatoryFields=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else{mandatoryFields=[{\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"}];}}else if(this.props.screenName==='IDS_MEMBERS'){mandatoryFields=[{\"idsName\":\"IDS_USER\",\"dataField\":\"nusercode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs\"},/*#__PURE__*/React.createElement(CustomTabs,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange})))),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.props.screenName,onSaveClick:this.onSaveClick,updateStore:this.props.updateStore,esign:this.props.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{}//   mandatoryFields={this.props.screenName === \"IDS_MEMBERS\" ? mandatoryFields : mandatoryFields || []}\n,mandatoryFields:this.mandatoryFields||[],addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,onInputOnChange:this.props.onInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.screenName===\"IDS_MEMBERS\"?/*#__PURE__*/React.createElement(AddProjectMember,{MembersList:this.props.MembersList// selectedRecord={this.state.selectedRecord || {}}\n,selectedRecord:this.props.selectedRecord||{}//  onComboChange={this.onComboChange}\n,onComboChange:this.props.onComboChange}):this.props.screenName===\"IDS_FILE\"?/*#__PURE__*/React.createElement(AddProjectMasterFile,{selectedRecord:this.props.selectedRecord||{},onInputOnChange:this.props.onInputOnChange,onDrop:this.props.onDropProjectMasterFile,onDropAccepted:this.onDropAccepted,deleteAttachment:this.deleteAttachment,actionType:this.state.actionType// onComboChange={this.onComboChange}\n,onComboChange:this.props.onComboChange,linkMaster:this.props.linkMaster,editFiles:this.props.editFiles,maxSize:20,maxFiles:1,multiple:false,label:this.props.intl.formatMessage({id:\"IDS_FILENAME\"}),name:\"projectmasterfilename\"}):\"\"}));}},{key:\"onSaveProjectMasterMember\",value:function onSaveProjectMasterMember(saveType,formRef){var _this2=this;var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;// inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\ninputData[\"ProjectMember\"]={};var projectmemberArray=[];projectmemberArray=this.props.selectedRecord.nusercode.map(function(item){var projectMasterData={};projectMasterData[\"nusercode\"]=item.value;projectMasterData[\"nprojectmastercode\"]=_this2.props.masterData.SelectedProjectMaster.nprojectmastercode;return projectMasterData;});inputData['ProjectMember']=projectmemberArray;var inputParam={classUrl:\"projectmaster\",methodUrl:\"ProjectMember\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef};return inputParam;}}]);return ProjectMasterTab;}(React.Component);export default injectIntl(ProjectMasterTab);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/project/ProjectMasterTab.jsx"],"names":["React","Row","Col","Card","injectIntl","SlideOutModal","toast","Esign","DEFAULT_RETURN","constructOptionList","showEsign","create_UUID","deleteAttachmentDropZone","onDropAttachFileList","ProjectMasterMemberTabs","ProjectMasterFileTab","transactionStatus","attachmentType","CustomTabs","AddProjectMember","AddProjectMasterFile","formatInputDate","ProjectMasterTab","props","onTabChange","tabProps","screenName","updateInfo","typeName","data","updateStore","onComboChange","comboData","fieldName","selectedRecord","state","setState","tabDetail","addteammembersId","controlMap","has","get","ncontrolcode","deleteteammembersId","projectmasterAddParam","operation","primaryKeyField","masterData","userInfo","ncontrolCode","projectmasterDeleteParam","tabMap","Map","set","userRoleControlRights","inputParam","getProjectmasterAddMemberService","dataResult","dataState","dataStateChange","projectmemberColumnList","methodUrl","deleteRecord","projectmasterFile","getAvailableData","addProjectMasterFile","viewProjectMasterFile","defaultRecord","settings","ntransactionstatus","closeModal","loadEsign","openChildModal","filedata","inputData","projectmasterfile","userinfo","classUrl","viewAttachment","onSaveClick","saveType","formRef","projectMasterData","postParam","inputListName","selectedObject","SelectedProjectMaster","nprojectmastercode","sprojecttitle","sprojectcode","sprojectdescription","nprojectduration","nsitecode","nmastersitecode","parseInt","onSaveProjectMasterFile","value","NA","onSaveProjectMasterMember","searchRef","isClearSearch","nformcode","screenData","crudMaster","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","NO","projectmasterFileArray","nprojecttypecode","nprojectmasterfilecode","nstatus","ACTIVE","formData","FormData","FTP","Array","isArray","length","forEach","file","index","tempData","Object","assign","splittedFileName","name","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","nsupplierfilecode","sdescription","trim","size","append","push","YES","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","selectedId","undefined","isFileupload","projectmasterfileparam","DRAFT","esignRights","warn","intl","formatMessage","id","deleteAttachment","event","actionType","validateEsign","sreason","password","validateEsignCredential","skip","take","isOpen","activeTab","mandatoryFields","LINK","onInputOnChange","MembersList","onDropProjectMasterFile","onDropAccepted","linkMaster","editFiles","projectmemberArray","nusercode","map","item","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Card } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';  //FormattedMessage,\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport { toast } from 'react-toastify';\r\nimport Esign from '../audittrail/Esign';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { constructOptionList, showEsign, create_UUID, deleteAttachmentDropZone, onDropAttachFileList } from '../../components/CommonScript';\r\nimport ProjectMasterMemberTabs from './ProjectMasterMemberTabs';\r\nimport ProjectMasterFileTab from './ProjectMasterFileTab';\r\nimport { transactionStatus, attachmentType } from '../../components/Enumeration';\r\nimport CustomTabs from '../../components/custom-tabs/custom-tabs.component';\r\nimport AddProjectMember from \"../../pages/project/AddProjectMember\";\r\nimport AddProjectMasterFile from './AddProjectMasterFile';\r\nimport { formatInputDate } from \"../../components/CommonScript\";\r\n\r\nclass ProjectMasterTab extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n\r\n        this.state = {\r\n            isOpen: false, selectedRecord: {}, dataResult: [],\r\n            activeTab: 'ProjectMembers-tab',\r\n            dataState: dataState\r\n\r\n        };\r\n\r\n        this.projectmemberColumnList = [\r\n\r\n            { \"idsName\": \"IDS_LOGINID\", \"dataField\": \"sloginid\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_USER\", \"dataField\": \"steammembername\", \"width\": \"200px\" }\r\n\r\n        ]\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        // const mandatoryFields = [];\r\n        let mandatoryFields = [];\r\n\r\n        if (this.props.screenName === 'IDS_FILE') {\r\n\r\n            if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n                mandatoryFields = [\r\n                    { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                    { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n                ];\r\n            } else {\r\n\r\n                mandatoryFields = [{ \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" }];\r\n\r\n            }\r\n        } else if (this.props.screenName === 'IDS_MEMBERS') {\r\n\r\n            mandatoryFields = [{ \"idsName\": \"IDS_USER\", \"dataField\": \"nusercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <Row className=\"no-gutters\">\r\n                    <Col md={12}>\r\n                        <Card className=\"at-tabs\">\r\n                            <CustomTabs tabDetail={this.tabDetail()} onTabChange={this.onTabChange} />\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal show={this.props.openChildModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.props.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        updateStore={this.props.updateStore}\r\n                        esign={this.props.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        //   mandatoryFields={this.props.screenName === \"IDS_MEMBERS\" ? mandatoryFields : mandatoryFields || []}\r\n                        mandatoryFields={this.mandatoryFields || []}\r\n                        addComponent={this.props.loadEsign ?\r\n                            <Esign operation={this.props.operation}\r\n                                onInputOnChange={this.props.onInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> :\r\n                            this.props.screenName === \"IDS_MEMBERS\" ?\r\n                                <AddProjectMember\r\n                                    MembersList={this.props.MembersList}\r\n                                    // selectedRecord={this.state.selectedRecord || {}}\r\n                                    selectedRecord={this.props.selectedRecord || {}}\r\n                                    //  onComboChange={this.onComboChange}\r\n                                    onComboChange={this.props.onComboChange}\r\n\r\n                                /> :\r\n                                this.props.screenName === \"IDS_FILE\" ?\r\n                                    <AddProjectMasterFile\r\n                                        selectedRecord={this.props.selectedRecord || {}}\r\n                                        onInputOnChange={this.props.onInputOnChange}\r\n                                        onDrop={this.props.onDropProjectMasterFile}\r\n                                        onDropAccepted={this.onDropAccepted}\r\n                                        deleteAttachment={this.deleteAttachment}\r\n                                        actionType={this.state.actionType}\r\n                                        // onComboChange={this.onComboChange}\r\n                                        onComboChange={this.props.onComboChange}\r\n                                        linkMaster={this.props.linkMaster}\r\n                                        editFiles={this.props.editFiles}\r\n                                        maxSize={20}\r\n                                        maxFiles={1}\r\n                                        multiple={false}\r\n                                        label={this.props.intl.formatMessage({ id: \"IDS_FILENAME\" })}\r\n                                        name=\"projectmasterfilename\"\r\n                                    /> : \"\"\r\n                        }\r\n\r\n                    />\r\n                }\r\n            </>\r\n\r\n        )\r\n\r\n    }\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    tabDetail = () => {\r\n\r\n        const addteammembersId = this.props.controlMap.has(\"AddTeammembers\") && this.props.controlMap.get(\"AddTeammembers\").ncontrolcode;\r\n        const deleteteammembersId = this.props.controlMap.has(\"DeleteTeammembers\") && this.props.controlMap.get(\"DeleteTeammembers\").ncontrolcode;\r\n\r\n        const projectmasterAddParam = {\r\n            screenName: \"IDS_MEMBERS\", operation: \"create\", primaryKeyField: \"nprojectmembercode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addteammembersId\r\n        };\r\n\r\n        const projectmasterDeleteParam = {\r\n\r\n            //    screenName: \"IDS_MEMBERS\", methodUrl: \"ProjectMember\", operation: \"delete\", ncontrolCode: deleteteammembersId \r\n\r\n            screenName: \"IDS_MEMBERS\", operation: \"delete\", primaryKeyField: \"nprojectmembercode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: deleteteammembersId\r\n        };\r\n\r\n\r\n\r\n        const tabMap = new Map();\r\n\r\n        tabMap.set(\"IDS_MEMBERS\", <ProjectMasterMemberTabs\r\n            userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            addId={addteammembersId}\r\n            addParam={projectmasterAddParam}\r\n            comboDataService={this.props.getProjectmasterAddMemberService}\r\n            addTitleIDS={\"IDS_PROJECTMEMBER\"}\r\n            addTitleDefaultMsg={'ProjectMember'}\r\n            primaryKeyField={\"nprojectmembercode\"}\r\n            masterData={this.props.masterData}\r\n            primaryList={\"ProjectMember\"}\r\n            dataResult={this.props.dataResult}\r\n            dataState={this.props.dataState}\r\n            dataStateChange={this.props.dataStateChange}\r\n            columnList={this.projectmemberColumnList}\r\n            methodUrl={this.props.methodUrl}\r\n            deleteRecord={this.props.deleteRecord}\r\n            deleteParam={projectmasterDeleteParam}\r\n        // deleteParam={deleteteammembersId}\r\n        />)\r\n\r\n\r\n        tabMap.set(\"IDS_FILE\", <ProjectMasterFileTab\r\n            controlMap={this.props.controlMap}\r\n            userRoleControlRights={this.props.userRoleControlRights}\r\n            userInfo={this.props.userInfo}\r\n            inputParam={this.props.inputParam}\r\n            deleteRecord={this.deleteRecord}\r\n            projectmasterfile={this.props.masterData.projectmasterFile || []}\r\n            getAvailableData={this.props.getAvailableData}\r\n            addProjectMasterFile={this.props.addProjectMasterFile}\r\n            viewProjectMasterFile={this.viewProjectMasterFile}\r\n            defaultRecord={this.defaultRecord}\r\n            // screenName=\"ProjectMaster File\"\r\n            screenName=\"IDS_FILE\"\r\n            settings={this.props.settings}\r\n            ntransactionstatus={this.props.ntransactionstatus}\r\n        />);\r\n        return tabMap;\r\n    }\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        // let selectedRecord = this.props.selectedRecord;\r\n        let selectedRecord = this.state.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = '';\r\n                selectedRecord['esigncomments'] = '';\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n\r\n    viewProjectMasterFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                projectmasterfile: filedata,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"projectmaster\",\r\n            operation: \"view\",\r\n            methodUrl: \"AttachedProjectMasterFile\",\r\n            screenName: \"ProjectMaster File\"\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        let projectMasterData = [];\r\n        let inputParam = {};\r\n        projectMasterData[\"userinfo\"] = this.props.userInfo;\r\n\r\n        let postParam = {\r\n            inputListName: \"ProjectMasterList\",\r\n            selectedObject: \"SelectedProjectMaster\",\r\n            primaryKeyField: \"nprojectmastercode\",\r\n        };\r\n\r\n        if ((this.props.operation === \"update\") && (this.props.screenName === \"IDS_ADDPROJECTMASTER\")) {\r\n\r\n            postParam[\"primaryKeyValue\"] =\r\n                this.props.masterData.SelectedProjectMaster.nprojectmastercode;\r\n\r\n            projectMasterData[\"projectMaster\"] = {\r\n                nprojectmastercode: this.props.masterData.SelectedProjectMaster.nprojectmastercode,\r\n                //     nprojecttypecode:this.state.selectedRecord.nprojecttypecode.value,\r\n                sprojecttitle: this.state.selectedRecord.sprojecttitle,\r\n                sprojectcode: this.state.selectedRecord.sprojectcode,\r\n                sprojectdescription: this.state.selectedRecord.sprojectdescription,\r\n                // drfwdate: formatInputDate(this.state.selectedRecord[\"drfwdate\"],false),\r\n                // dprojectstartdate: formatInputDate(this.state.selectedRecord[\"dprojectstartdate\"],false),\r\n                //     nstudydirectorcode:this.state.selectedRecord.nstudydirectorcode.value,\r\n                //     nteammembercode: this.state.selectedRecord.nteammembercode.value,\r\n                //     nperiodcode: this.state.selectedRecord.nperiodcode.value,\r\n                nprojectduration: this.state.selectedRecord.nprojectduration,\r\n\r\n            };\r\n\r\n        } else if ((this.props.operation === \"create\") && (this.props.screenName === \"IDS_ADDPROJECTMASTER\")) {\r\n\r\n            projectMasterData[\"projectMaster\"] = {\r\n\r\n                nsitecode: this.props.userInfo.nmastersitecode,\r\n                sprojecttitle: this.state.selectedRecord.sprojecttitle,\r\n                sprojectcode: this.state.selectedRecord.sprojectcode,\r\n                sprojectdescription: this.state.selectedRecord.sprojectdescription,\r\n                nprojectduration: parseInt(this.state.selectedRecord.nprojectduration)\r\n            };\r\n\r\n            /*     this.projectMasterFieldList.map((item) => {\r\n                   return (projectMasterData[\"projectMaster\"][item] = this.state.selectedRecord[item] == \"\" || this.state.selectedRecord[item] == undefined ?\r\n                   undefined :this.state.selectedRecord[item]);\r\n                 }); */\r\n\r\n        } else if (((this.props.operation === \"create\") || (this.props.operation === \"update\")) && (this.props.screenName === \"IDS_FILE\")) {\r\n\r\n            inputParam = this.onSaveProjectMasterFile(saveType, formRef);\r\n        }\r\n\r\n        if (((this.props.operation === \"create\") || (this.props.operation === \"update\")) && (this.props.screenName === \"IDS_ADDPROJECTMASTER\")) {\r\n\r\n            projectMasterData[\"projectMaster\"][\"nprojecttypecode\"] = this.state.selectedRecord[\"nprojecttypecode\"] ? this.state.selectedRecord[\"nprojecttypecode\"].value\r\n                : transactionStatus.NA;\r\n\r\n            projectMasterData[\"projectMaster\"][\"nstudydirectorcode\"] = this.state.selectedRecord[\"nstudydirectorcode\"] ? this.state.selectedRecord[\"nstudydirectorcode\"].value\r\n                : transactionStatus.NA;\r\n\r\n            projectMasterData[\"projectMaster\"][\"nteammembercode\"] = this.state.selectedRecord[\"nteammembercode\"] ? this.state.selectedRecord[\"nteammembercode\"].value\r\n                : transactionStatus.NA;\r\n\r\n            projectMasterData[\"projectMaster\"][\"nperiodcode\"] = this.state.selectedRecord[\"nperiodcode\"] ? this.state.selectedRecord[\"nperiodcode\"].value\r\n                : transactionStatus.NA;\r\n\r\n\r\n            // if (this.state.selectedRecord[\"drfwdate\"] || this.state.selectedRecord[\"dprojectstartdate\"]) {\r\n            //   if (this.props.Login.operation === \"create\") {\r\n\r\n            projectMasterData[\"projectMaster\"][\"drfwdate\"] = formatInputDate(this.state.selectedRecord[\"drfwdate\"], false);\r\n            projectMasterData[\"projectMaster\"][\"dprojectstartdate\"] = formatInputDate(this.state.selectedRecord[\"dprojectstartdate\"], false);\r\n\r\n            //   }\r\n            //   else {\r\n\r\n            //     projectMasterData[\"projectMaster\"][\"drfwdate\"] = formatInputDate(this.state.selectedRecord[\"drfwdate\"],false);\r\n            //     projectMasterData[\"projectMaster\"][\"dprojectstartdate\"] = formatInputDate(this.state.selectedRecord[\"dprojectstartdate\"],false);\r\n\r\n            //   }\r\n            // }\r\n        }\r\n\r\n        if ((this.props.operation === \"create\") && (this.props.screenName === \"IDS_MEMBERS\")) {\r\n\r\n            /*        projectMasterData[\"ProjectMember\"] = {};\r\n                      projectMasterData[\"ProjectMember\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"][0] ? this.state.selectedRecord[\"nusercode\"][0].value\r\n                      : transactionStatus.NA;\r\n                      projectMasterData[\"ProjectMember\"][\"nprojectmastercode\"] =this.props.masterData.SelectedProjectMaster.nprojectmastercode; */\r\n\r\n            inputParam = this.onSaveProjectMasterMember(saveType, formRef);\r\n        }\r\n\r\n        if (((this.props.operation === \"create\") || (this.props.operation === \"update\")) && (this.props.screenName === \"IDS_ADDPROJECTMASTER\")) {\r\n\r\n            inputParam = {\r\n                classUrl: \"projectmaster\",\r\n                methodUrl: \"ProjectMaster\",\r\n                inputData: projectMasterData,\r\n                operation: this.props.operation,\r\n                saveType,\r\n                formRef,\r\n                postParam,\r\n                searchRef: this.searchRef,\r\n                isClearSearch: this.props.isClearSearch,\r\n            };\r\n        }/*else if ((this.props.operation === \"create\")  &&  (this.props.screenName === \"IDS_MEMBERS\")) {\r\n    \r\n          inputParam = {\r\n            classUrl: \"projectmaster\",\r\n            methodUrl: \"ProjectMember\",\r\n            inputData: projectMasterData,\r\n            operation: this.props.operation,\r\n            saveType,\r\n            formRef,\r\n            postParam,\r\n            searchRef: this.searchRef,\r\n            isClearSearch: this.props.isClearSearch,\r\n          }\r\n        } */\r\n\r\n\r\n        const masterData = this.props.masterData;\r\n\r\n        if (showEsign(this.props.userRoleControlRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true,\r\n                    screenData: { inputParam, masterData },\r\n                    saveType,\r\n                },\r\n            };\r\n            this.props.updateStore(updateInfo);\r\n        } else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n        }\r\n\r\n    };\r\n\r\n    onSaveProjectMasterFile = (saveType, formRef) => {\r\n        const selectedRecord = this.props.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = transactionStatus.NO;\r\n        let projectmasterFileArray = [];\r\n        let projectmasterFile = {\r\n            nprojectmastercode: this.props.masterData.SelectedProjectMaster.nprojectmastercode,\r\n            nprojecttypecode: this.props.masterData.SelectedProjectMaster.nprojecttypecode,\r\n            nprojectmasterfilecode: selectedRecord.nprojectmasterfilecode ? selectedRecord.nprojectmasterfilecode : 0,\r\n            nstatus: transactionStatus.ACTIVE,\r\n            nattachmenttypecode,\r\n            // ndefaultstatus: selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] ? selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] : 4\r\n        };\r\n        const formData = new FormData();\r\n        if (nattachmenttypecode === attachmentType.FTP) {\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                acceptedFiles.forEach((file, index) => {\r\n                    const tempData = Object.assign({}, projectmasterFile);\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                    const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                    const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                    const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.nsupplierfilecode && selectedRecord.nsupplierfilecode > 0\r\n                        && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                    tempData[\"sfilename\"] = file.name;\r\n                    tempData[\"sdescription\"] = selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\";\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    tempData[\"nfilesize\"] = file.size;\r\n                    formData.append(\"uploadedFile\" + index, file);\r\n                    formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                    projectmasterFileArray.push(tempData);\r\n                });\r\n                formData.append(\"filecount\", acceptedFiles.length);\r\n                isFileEdited = transactionStatus.YES;\r\n            } else {\r\n                projectmasterFile[\"sfilename\"] = selectedRecord.sfilename;\r\n                projectmasterFile[\"sdescription\"] = selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\";\r\n                projectmasterFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                projectmasterFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                projectmasterFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                projectmasterFileArray.push(projectmasterFile);\r\n            }\r\n        } else {\r\n            projectmasterFile[\"sfilename\"] = selectedRecord.slinkfilename.trim();\r\n            projectmasterFile[\"sdescription\"] = selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\";\r\n            projectmasterFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            projectmasterFile[\"ssystemfilename\"] = \"\";\r\n            projectmasterFile[\"nfilesize\"] = 0;\r\n            projectmasterFileArray.push(projectmasterFile);\r\n        }\r\n        formData.append(\"isFileEdited\", isFileEdited);\r\n        formData.append(\"projectmasterfile\", JSON.stringify(projectmasterFileArray));\r\n        // formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\r\n\r\n        let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"ProjectMaster\", selectedObject: \"SelectedProjectMaster\", primaryKeyField: \"nprojectmastercode\" };\r\n            selectedId = selectedRecord[\"nprojectmasterfilecode\"];\r\n        }\r\n        const inputParam = {\r\n            inputData: { userinfo: this.props.userInfo },\r\n            formData: formData,\r\n            isFileupload: true,\r\n            operation: this.props.operation,\r\n            classUrl: \"projectmaster\",\r\n            saveType, formRef, methodUrl: \"ProjectMasterFile\", postParam\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n\r\n    onSaveProjectMasterMember(saveType, formRef) {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        // inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\r\n        inputData[\"ProjectMember\"] = {};\r\n\r\n\r\n        let projectmemberArray = []\r\n        projectmemberArray = this.props.selectedRecord.nusercode.map(item => {\r\n            let projectMasterData = {}\r\n\r\n            projectMasterData[\"nusercode\"] = item.value\r\n            projectMasterData[\"nprojectmastercode\"] = this.props.masterData.SelectedProjectMaster.nprojectmastercode;\r\n\r\n\r\n            return projectMasterData;\r\n        });\r\n        inputData['ProjectMember'] = projectmemberArray;\r\n\r\n        const inputParam = {\r\n            classUrl: \"projectmaster\",\r\n            methodUrl: \"ProjectMember\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    deleteRecord = (projectmasterfileparam) => {\r\n\r\n        if (this.props.masterData.SelectedProjectMaster.ntransactionstatus === transactionStatus.DRAFT) {\r\n\r\n            let inputParam = {};\r\n            let inputData = {};\r\n            // if (this.props.screenName === 'ProjectMaster File') { \r\n            let selectedRecord = projectmasterfileparam.selectedRecord\r\n\r\n            selectedRecord = { ...selectedRecord, ntransactionstatus: this.props.masterData.SelectedProjectMaster.ntransactionstatus }\r\n\r\n            // inputData[\"projectmasterfile\"]={\r\n            //     selectedRecord                    \r\n            //     };\r\n\r\n            if (this.props.screenName === 'IDS_FILE') {\r\n                inputParam = {\r\n                    classUrl: \"projectmaster\",\r\n                    methodUrl: projectmasterfileparam.methodUrl,\r\n                    inputData: {\r\n\r\n                        \"projectmasterfile\": selectedRecord,\r\n                        \"userinfo\": this.props.userInfo\r\n                    },\r\n\r\n                    operation: projectmasterfileparam.operation,\r\n                    //dataState: this.state.dataState,\r\n                    //dataStateMaterial: this.state.dataStateMaterial\r\n                    dataState: this.state.dataState\r\n                }\r\n            }\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, projectmasterfileparam.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                        openChildModal: true, screenName: projectmasterfileparam.screenName, operation: projectmasterfileparam.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n\r\n        }\r\n        else {\r\n\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTRECORD\" }));\r\n        }\r\n    }\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n        });\r\n    }\r\n\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n}\r\n\r\nexport default injectIntl(ProjectMasterTab);\r\n\r\n"]},"metadata":{},"sourceType":"module"}