{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport Immutable, { Map } from \"immutable\"; // RegExp.quote = function (str) {\n//     return str.replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\");\n// };\n\nexport var defaultValue = function defaultValue(value, _default) {\n  return typeof value === \"undefined\" ? _default : value;\n}; // const immutableEqual = function(v1, v2) {\n//   if (v1 === v2) {\n//     return true;\n//   } else {\n//     return v1.equals(v2);\n//   }\n// };\n\nexport var deepEqual = function deepEqual(v1, v2) {\n  if (v1 === v2) {\n    return true;\n  } else if (Map.isMap(v1)) {\n    return v1.equals(v2);\n  } else {\n    return JSON.stringify(v1) == JSON.stringify(v2);\n  }\n}; // //Do sets have same values?\n// const eqSet = function (as, bs) {\n//   if (as.size !== bs.size) return false;\n//   for (var a of as) if (!bs.has(a)) return false;\n//   return true;\n// };\n// //Do arrays have same values?\n// const eqArrSet = function (arr1, arr2) {\n//   return eqSet(new Set(arr1), new Set(arr2));\n// };\n\nexport var shallowEqual = function shallowEqual(a, b) {\n  var deep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (a === b) {\n    return true;\n  } else if (Array.isArray(a)) return shallowEqualArrays(a, b, deep);else if (Map.isMap(a)) return a.equals(b);else if (_typeof(a) == \"object\") return shallowEqualObjects(a, b, deep);else return a === b;\n};\n\nfunction shallowEqualArrays(arrA, arrB) {\n  var deep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (arrA === arrB) {\n    return true;\n  }\n\n  if (!arrA || !arrB) {\n    return false;\n  }\n\n  var len = arrA.length;\n\n  if (arrB.length !== len) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    var isEqual = deep ? shallowEqual(arrA[i], arrB[i], deep) : arrA[i] === arrB[i];\n\n    if (!isEqual) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction shallowEqualObjects(objA, objB) {\n  var deep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (!objA || !objB) {\n    return false;\n  }\n\n  var aKeys = Object.keys(objA);\n  var bKeys = Object.keys(objB);\n  var len = aKeys.length;\n\n  if (bKeys.length !== len) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    var key = aKeys[i];\n    var isEqual = deep ? shallowEqual(objA[key], objB[key], deep) : objA[key] === objB[key];\n\n    if (!isEqual) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nvar isImmutable = function isImmutable(v) {\n  return _typeof(v) === \"object\" && v !== null && typeof v.toJS === \"function\";\n};\n\nexport function toImmutableList(v) {\n  return isImmutable(v) ? v : new Immutable.List(v);\n}\nexport function applyToJS(v) {\n  return isImmutable(v) ? v.toJS() : v;\n}\nexport var escapeRegExp = function escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\/]/g, \"\\\\$&\"); // $& means the whole matched string\n};\nexport var isJsonLogic = function isJsonLogic(logic) {\n  return _typeof(logic) === \"object\" // An object\n  && logic !== null // but not null\n  && !Array.isArray(logic) // and not an array\n  && Object.keys(logic).length === 1 // with exactly one key\n  ;\n};\nexport function sleep(delay) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, delay);\n  });\n} // [1, 4, 9] + [1, 5, 9] => [1, 4, 5, 9]\n// Used for merging arrays of operators for different widgets of 1 type\n\nexport function mergeArraysSmart(arr1, arr2) {\n  if (!arr1) arr1 = [];\n  if (!arr2) arr2 = [];\n  return arr2.map(function (op) {\n    return [op, arr1.indexOf(op)];\n  }).map(function (_ref, i, orig) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        op = _ref2[0],\n        ind = _ref2[1];\n\n    if (ind == -1) {\n      var next = orig.slice(i + 1);\n      var prev = orig.slice(0, i);\n      var after = prev.reverse().find(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            _cop = _ref4[0],\n            ci = _ref4[1];\n\n        return ci != -1;\n      });\n      var before = next.find(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n            _cop = _ref6[0],\n            ci = _ref6[1];\n\n        return ci != -1;\n      });\n      if (before) return [op, \"before\", before[0]];else if (after) return [op, \"after\", after[0]];else return [op, \"append\", null];\n    } else {\n      // already exists\n      return null;\n    }\n  }).filter(function (x) {\n    return x !== null;\n  }).reduce(function (acc, _ref7) {\n    var _ref8 = _slicedToArray(_ref7, 3),\n        newOp = _ref8[0],\n        rel = _ref8[1],\n        relOp = _ref8[2];\n\n    var ind = acc.indexOf(relOp);\n\n    if (acc.indexOf(newOp) == -1) {\n      if (ind > -1) {\n        // insert after or before\n        acc.splice(ind + (rel == \"after\" ? 1 : 0), 0, newOp);\n      } else {\n        // insert to end or start\n        acc.splice(rel == \"append\" ? Infinity : 0, 0, newOp);\n      }\n    }\n\n    return acc;\n  }, arr1.slice());\n}\n\nvar isDev = function isDev() {\n  return typeof process !== \"undefined\" && process.env && process.env.NODE_ENV == \"development\";\n};\n\nexport var getLogger = function getLogger() {\n  var devMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  var verbose = devMode != undefined ? devMode : isDev();\n  return verbose ? console : {\n    error: function error() {},\n    log: function log() {},\n    warn: function warn() {},\n    debug: function debug() {},\n    info: function info() {}\n  };\n};\nexport var getFirstDefined = function getFirstDefined() {\n  var arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var ret;\n\n  for (var i = 0; i < arr.length; i++) {\n    var v = arr[i];\n\n    if (v !== undefined) {\n      ret = v;\n      break;\n    }\n  }\n\n  return ret;\n};\nexport var logger = getLogger();","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/node_modules/@react-awesome-query-builder/core/esm/utils/stuff.js"],"names":["_slicedToArray","_typeof","Immutable","Map","defaultValue","value","_default","deepEqual","v1","v2","isMap","equals","JSON","stringify","shallowEqual","a","b","deep","arguments","length","undefined","Array","isArray","shallowEqualArrays","shallowEqualObjects","arrA","arrB","len","i","isEqual","objA","objB","aKeys","Object","keys","bKeys","key","isImmutable","v","toJS","toImmutableList","List","applyToJS","escapeRegExp","string","replace","isJsonLogic","logic","sleep","delay","Promise","resolve","setTimeout","mergeArraysSmart","arr1","arr2","map","op","indexOf","_ref","orig","_ref2","ind","next","slice","prev","after","reverse","find","_ref3","_ref4","_cop","ci","before","_ref5","_ref6","filter","x","reduce","acc","_ref7","_ref8","newOp","rel","relOp","splice","Infinity","isDev","process","env","NODE_ENV","getLogger","devMode","verbose","console","error","log","warn","debug","info","getFirstDefined","arr","ret","logger"],"mappings":"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","sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport Immutable, { Map } from \"immutable\";\n\n// RegExp.quote = function (str) {\n//     return str.replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\");\n// };\n\nexport var defaultValue = function defaultValue(value, _default) {\n  return typeof value === \"undefined\" ? _default : value;\n};\n\n// const immutableEqual = function(v1, v2) {\n//   if (v1 === v2) {\n//     return true;\n//   } else {\n//     return v1.equals(v2);\n//   }\n// };\n\nexport var deepEqual = function deepEqual(v1, v2) {\n  if (v1 === v2) {\n    return true;\n  } else if (Map.isMap(v1)) {\n    return v1.equals(v2);\n  } else {\n    return JSON.stringify(v1) == JSON.stringify(v2);\n  }\n};\n\n// //Do sets have same values?\n// const eqSet = function (as, bs) {\n//   if (as.size !== bs.size) return false;\n//   for (var a of as) if (!bs.has(a)) return false;\n//   return true;\n// };\n\n// //Do arrays have same values?\n// const eqArrSet = function (arr1, arr2) {\n//   return eqSet(new Set(arr1), new Set(arr2));\n// };\n\nexport var shallowEqual = function shallowEqual(a, b) {\n  var deep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  if (a === b) {\n    return true;\n  } else if (Array.isArray(a)) return shallowEqualArrays(a, b, deep);else if (Map.isMap(a)) return a.equals(b);else if (_typeof(a) == \"object\") return shallowEqualObjects(a, b, deep);else return a === b;\n};\nfunction shallowEqualArrays(arrA, arrB) {\n  var deep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  if (arrA === arrB) {\n    return true;\n  }\n  if (!arrA || !arrB) {\n    return false;\n  }\n  var len = arrA.length;\n  if (arrB.length !== len) {\n    return false;\n  }\n  for (var i = 0; i < len; i++) {\n    var isEqual = deep ? shallowEqual(arrA[i], arrB[i], deep) : arrA[i] === arrB[i];\n    if (!isEqual) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction shallowEqualObjects(objA, objB) {\n  var deep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  if (objA === objB) {\n    return true;\n  }\n  if (!objA || !objB) {\n    return false;\n  }\n  var aKeys = Object.keys(objA);\n  var bKeys = Object.keys(objB);\n  var len = aKeys.length;\n  if (bKeys.length !== len) {\n    return false;\n  }\n  for (var i = 0; i < len; i++) {\n    var key = aKeys[i];\n    var isEqual = deep ? shallowEqual(objA[key], objB[key], deep) : objA[key] === objB[key];\n    if (!isEqual) {\n      return false;\n    }\n  }\n  return true;\n}\nvar isImmutable = function isImmutable(v) {\n  return _typeof(v) === \"object\" && v !== null && typeof v.toJS === \"function\";\n};\nexport function toImmutableList(v) {\n  return isImmutable(v) ? v : new Immutable.List(v);\n}\nexport function applyToJS(v) {\n  return isImmutable(v) ? v.toJS() : v;\n}\nexport var escapeRegExp = function escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\/]/g, \"\\\\$&\"); // $& means the whole matched string\n};\n\nexport var isJsonLogic = function isJsonLogic(logic) {\n  return _typeof(logic) === \"object\" // An object\n  && logic !== null // but not null\n  && !Array.isArray(logic) // and not an array\n  && Object.keys(logic).length === 1 // with exactly one key\n  ;\n};\n\nexport function sleep(delay) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, delay);\n  });\n}\n\n// [1, 4, 9] + [1, 5, 9] => [1, 4, 5, 9]\n// Used for merging arrays of operators for different widgets of 1 type\nexport function mergeArraysSmart(arr1, arr2) {\n  if (!arr1) arr1 = [];\n  if (!arr2) arr2 = [];\n  return arr2.map(function (op) {\n    return [op, arr1.indexOf(op)];\n  }).map(function (_ref, i, orig) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      op = _ref2[0],\n      ind = _ref2[1];\n    if (ind == -1) {\n      var next = orig.slice(i + 1);\n      var prev = orig.slice(0, i);\n      var after = prev.reverse().find(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n          _cop = _ref4[0],\n          ci = _ref4[1];\n        return ci != -1;\n      });\n      var before = next.find(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n          _cop = _ref6[0],\n          ci = _ref6[1];\n        return ci != -1;\n      });\n      if (before) return [op, \"before\", before[0]];else if (after) return [op, \"after\", after[0]];else return [op, \"append\", null];\n    } else {\n      // already exists\n      return null;\n    }\n  }).filter(function (x) {\n    return x !== null;\n  }).reduce(function (acc, _ref7) {\n    var _ref8 = _slicedToArray(_ref7, 3),\n      newOp = _ref8[0],\n      rel = _ref8[1],\n      relOp = _ref8[2];\n    var ind = acc.indexOf(relOp);\n    if (acc.indexOf(newOp) == -1) {\n      if (ind > -1) {\n        // insert after or before\n        acc.splice(ind + (rel == \"after\" ? 1 : 0), 0, newOp);\n      } else {\n        // insert to end or start\n        acc.splice(rel == \"append\" ? Infinity : 0, 0, newOp);\n      }\n    }\n    return acc;\n  }, arr1.slice());\n}\nvar isDev = function isDev() {\n  return typeof process !== \"undefined\" && process.env && process.env.NODE_ENV == \"development\";\n};\nexport var getLogger = function getLogger() {\n  var devMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  var verbose = devMode != undefined ? devMode : isDev();\n  return verbose ? console : {\n    error: function error() {},\n    log: function log() {},\n    warn: function warn() {},\n    debug: function debug() {},\n    info: function info() {}\n  };\n};\nexport var getFirstDefined = function getFirstDefined() {\n  var arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var ret;\n  for (var i = 0; i < arr.length; i++) {\n    var v = arr[i];\n    if (v !== undefined) {\n      ret = v;\n      break;\n    }\n  }\n  return ret;\n};\nexport var logger = getLogger();"]},"metadata":{},"sourceType":"module"}