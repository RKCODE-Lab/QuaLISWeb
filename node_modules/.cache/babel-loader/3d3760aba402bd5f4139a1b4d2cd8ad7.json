{"ast":null,"code":"import _objectSpread from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import'./multi-column-combo-search.css';import{FormattedMessage,injectIntl}from\"react-intl\";// import { sortByField } from \"../CommonScript\";\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import { faAngleDown, faAngleUp } from \"@fortawesome/free-solid-svg-icons\";\nimport{Col,Row,Table}from\"react-bootstrap\";import{DivWrap,InlineEl,LabelNormal,TableData,TableHead,TableRow}from\"./multi-table-compo-list.styles\";import{WithContext as ReactTags}from'react-tag-input';import'react-perfect-scrollbar/dist/css/styles.css';import{sortByField}from\"../CommonScript\";var MultiColumnComboSearch=/*#__PURE__*/function(_React$Component){_inherits(MultiColumnComboSearch,_React$Component);var _super=_createSuper(MultiColumnComboSearch);function MultiColumnComboSearch(Props){var _this;_classCallCheck(this,MultiColumnComboSearch);_this=_super.call(this,Props);_this.closeList=function(e){_this.setState(function(state){return{showList:false};});};_this.openList=function(e){//  let val = '' + this.state.inputVal;\n//  let arrayList = this.state.data.filter(o =>\n//    Object.keys(o).some(k =>\n//     o[k] !== null && \n//     o[k].toString().toLowerCase().includes(val.toLowerCase())));\n//     console.log(\"arrayList:\", arrayList);\n// \nif(_this.state.data&&_this.state.data.length>0&&_this.state.value.length>0&&_this.state.showInputkey){_this.state.data.map(function(obj){if(_this.state.value[0][_this.state.showInputkey]&&obj[_this.state.showInputkey]&&obj[_this.state.showInputkey].toLowerCase()===_this.state.value[0][_this.state.showInputkey].toLowerCase())return obj.checked=true;else return obj.checked=false;});}// this.state.data[valIndex][\"checked\"] = false;\nif(!_this.state.showList){_this.setState(function(state){return{showList:true,listValue:_this.state.data//arrayList\n};});}};_this.handleChangeInput=function(e){var val=''+e;var arrayList=_this.state.data.filter(function(o){return Object.keys(o).some(function(k){return o[k]!==null&&o[k].toString().toLowerCase().includes(val.toLowerCase());});});_this.setState({listValue:arrayList&&arrayList.length>0?arrayList:[],inputVal:val});//this.props.getValue(this.state.value);\n};_this.handleTagClick=function(e){_this.setState(function(state){return{inputVal:\"\",listValue:_this.state.data};});};_this.handleDelete=function(e){if(!_this.state.isMandatory){var eve=_this.state.value;eve.splice(e,1);_this.state.data.map(function(obj){var i=eve.findIndex(function(evObj){return evObj[_this.state.showInputkey]===obj[_this.state.showInputkey];});if(i===-1){return obj.checked=false;}else{return obj.checked=true;}});_this.setState(function(state){return{value:eve,listValue:_this.state.data// showList:false\n};});_this.props.getValue(_this.state.value);}};_this.getUpdateSelected=function(e,eve){e['text']=e[_this.state.showInputkey];var val=_this.state.value;if(_this.state.singleSelection){val=[];}if(e==='all'&&eve){val=[];val=_this.state.listValue.map(function(obj){obj.checked=true;return e;});}else if(e==='all'&&!eve){val=_this.state.listValue.map(function(obj){obj.checked=true;return val=[];});}else if(e!=='all'){var valIndex=_this.state.listValue.findIndex(function(obj){return obj[_this.state.showInputkey]===e[_this.state.showInputkey];});_this.state.listValue.map(function(obj,index){if(index===valIndex){var i=_this.state.value.findIndex(function(obj){return obj[_this.state.showInputkey]===e[_this.state.showInputkey];});if(i===-1){val.push(e);obj.checked=true;}else{obj.checked=false;val.splice(i,1);}}else if(_this.state.singleSelection){obj.checked=false;}return null;});}_this.setState(function(state){return{value:val,listValue:_this.state.listValue// showList:false\n};});_this.props.getValue(val);};_this.getUpdateVal=function(selected){var val=selected[_this.state.showInputkey];_this.setState(function(state){return{//value: val,\nvalue:[selected],inputVal:val,listValue:_this.state.data// showList:false\n};});_this.props.getValue([selected]);_this.closeList();// this.props.getValue([val]);\n};_this.wrapperRef=React.createRef();// this.setWrapperRef = this.setWrapperRef.bind(this);\n_this.handleClickOutside=_this.handleClickOutside.bind(_assertThisInitialized(_this));_this.state=_objectSpread(_objectSpread({},Props),{},{listValue:[],inputVal:\"\",showList:false,notToShow:[],idslabelfield:[],singleSelection:true});_this.handleDelete=_this.handleDelete.bind(_assertThisInitialized(_this));_this.handleChangeInput=_this.handleChangeInput.bind(_assertThisInitialized(_this));_this.closeList=_this.closeList.bind(_assertThisInitialized(_this));_this.openList=_this.openList.bind(_assertThisInitialized(_this));return _this;}_createClass(MultiColumnComboSearch,[{key:\"componentDidMount\",value:function componentDidMount(){document.addEventListener('mousedown',this.handleClickOutside);// this.setState((state) => ({\n//    value: this.state.value.map((str, index) => ({ text: str }))\n// }))\nvar fieldToShow=this.props.fieldToShow;var showInputkey=this.props.showInputkey;var idslabelfield=this.props.idslabelfield;//let inputVal = this.props.value\nvar listValue=this.props.alphabeticalSort?sortByField(this.state.listValue,\"ascending\",this.state.showInputkey):this.state.listValue;this.setState({fieldToShow:fieldToShow,showInputkey:showInputkey,idslabelfield:idslabelfield,listValue:listValue//inputVal,\n// value :inputVal\n});}},{key:\"handleClickOutside\",value:function handleClickOutside(event){if(this.wrapperRef&&!this.wrapperRef.current.contains(event.target)&&this.state.showList){this.closeList(event);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('mousedown',this.handleClickOutside);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){// if (this.props.value !== previousProps.value) {\n//   let value = this.props.value\n//   this.setState({ value })\n// }\n//commented By sudharshanan for Search on 27/07/2021\n// if ((this.state.listValue !== previousProps.data) ||  (this.props.value !== previousProps.value)) {\n//   let listValue = this.props.data;\n//   let value = this.props.value\n//   this.setState({ listValue, value, flterInput: this.state.inputVal })\n// }\n//added By sudharshanan for Search on 27/07/2021\nif(this.props.data!==previousProps.data||this.props.value!==previousProps.value){var listValue=this.props.data;var value=this.props.value;this.setState({listValue:listValue,value:value,flterInput:this.state.inputVal});}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){// You don't have to do this check first, but it can help prevent an unneeded render\n// let listValue = nextProps.data;\n// let value = nextProps.value\nif(!this.state.inputVal){this.setState({listValue:nextProps.data,data:nextProps.data});}}},{key:\"render\",value:function render(){var _this2=this;var ListHeadItems=function ListHeadItems(e){return e.heads.map(function(item,index){return/*#__PURE__*/React.createElement(TableHead,{key:item},\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:item,defaultMessage:item}),\" \");});};var ListBodyByKey=function ListBodyByKey(e){return e.keyFlag.map(function(item,index){return/*#__PURE__*/React.createElement(TableData,{key:index},e.value[item]);});};var ListBodyItems=function ListBodyItems(e){return e.data.map(function(item,index){return/*#__PURE__*/React.createElement(TableRow,{key:index,onClick:function onClick(){_this2.getUpdateVal(item);}},/*#__PURE__*/React.createElement(ListBodyByKey,{value:item,keyFlag:e.keys}));});};var TableMain=function TableMain(e){//  let thVal = e.visibility === 'show-all' && this.state.listValue && this.state.listValue.length > 0 ? Object.keys(this.state.data[0]).filter(obj => this.state.notToShow.indexOf(obj) === -1) : e.keyList;\nvar tableVal=_this2.state.listValue&&_this2.state.listValue.length>0?/*#__PURE__*/React.createElement(Table,{className:\"compo-table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(ListHeadItems,{heads:_this2.state.idslabelfield}))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(ListBodyItems,{keys:_this2.state.fieldToShow,data:_this2.state.listValue}))):/*#__PURE__*/React.createElement(InlineEl,{className:\"no-data\"},\"No data Found\");return _this2.state.showList?tableVal:'';};var ToggleList=function ToggleList(e){return/*#__PURE__*/React.createElement(InlineEl,null,_this2.state.showList?/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-down\",onClick:_this2.closeList}):/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-angle-up\",onClick:_this2.openList}));};// const ToggleList = e => {\n//   return <span>\n//     {this.state.showList ? <FontAwesomeIcon icon={faAngleUp} onClick={this.closeList} /> :\n//       <FontAwesomeIcon icon={faAngleDown} onClick={this.openList} />\n//     }\n//   </span>\n// }\nvar tagValue=this.state.value.length>0&&this.state.value[0][this.state.showInputkey]&&[{text:this.state.value[0][this.state.showInputkey]}]||[];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(DivWrap,{className:\"custom-column-wrap \".concat(this.props.isDisabled?'disabled':'',\" \").concat(this.state.value&&this.state.value.length>0?'selected':'',\" \").concat(this.state.isMandatory?'mandatory':''),ref:this.wrapperRef},/*#__PURE__*/React.createElement(DivWrap,{className:\"form-group-icon \".concat(this.state.showList?'list-view':'')},/*#__PURE__*/React.createElement(LabelNormal,{className:\"form-label\"},this.state.labelledBy?/*#__PURE__*/React.createElement(FormattedMessage,{id:this.state.labelledBy}):''),/*#__PURE__*/React.createElement(DivWrap,{className:\"dropdown-wrap \".concat(this.state.showList?'listed':'')},/*#__PURE__*/React.createElement(DivWrap,{className:\"icon-input custom-fa-angle-down\",onClick:this.openList},/*#__PURE__*/React.createElement(ReactTags,{readOnly:this.props.isDisabled,tags:tagValue,handleDelete:this.handleDelete,allowDragDrop:false,delimiters:[],handleInputChange:this.handleChangeInput,placeholder:\"Search...\",handleTagClick:this.handleTagClick,inline:true}),/*#__PURE__*/React.createElement(ToggleList,null)),/*#__PURE__*/React.createElement(DivWrap,{className:\"limit-width\"},/*#__PURE__*/React.createElement(TableMain,{visibility:this.state.visibility,keyList:this.state.fieldToShow,data:this.state.listValue}))))))));}}]);return MultiColumnComboSearch;}(React.Component);export default injectIntl(MultiColumnComboSearch);","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/components/multi-column-combo-search/multi-column-combo-search.js"],"names":["React","FormattedMessage","injectIntl","Col","Row","Table","DivWrap","InlineEl","LabelNormal","TableData","TableHead","TableRow","WithContext","ReactTags","sortByField","MultiColumnComboSearch","Props","closeList","e","setState","state","showList","openList","data","length","value","showInputkey","map","obj","toLowerCase","checked","listValue","handleChangeInput","val","arrayList","filter","o","Object","keys","some","k","toString","includes","inputVal","handleTagClick","handleDelete","isMandatory","eve","splice","i","findIndex","evObj","props","getValue","getUpdateSelected","singleSelection","valIndex","index","push","getUpdateVal","selected","wrapperRef","createRef","handleClickOutside","bind","notToShow","idslabelfield","document","addEventListener","fieldToShow","alphabeticalSort","event","current","contains","target","removeEventListener","previousProps","flterInput","nextProps","ListHeadItems","heads","item","ListBodyByKey","keyFlag","ListBodyItems","TableMain","tableVal","ToggleList","tagValue","text","isDisabled","labelledBy","visibility","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport './multi-column-combo-search.css';\nimport { FormattedMessage, injectIntl } from \"react-intl\";\n// import { sortByField } from \"../CommonScript\";\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import { faAngleDown, faAngleUp } from \"@fortawesome/free-solid-svg-icons\";\nimport { Col, Row, Table } from \"react-bootstrap\";\nimport { DivWrap, InlineEl, LabelNormal, TableData, TableHead, TableRow } from \"./multi-table-compo-list.styles\";\nimport { WithContext as ReactTags } from 'react-tag-input';\nimport 'react-perfect-scrollbar/dist/css/styles.css';\n\nimport { sortByField } from \"../CommonScript\";\n\nclass MultiColumnComboSearch extends React.Component {\n  constructor(Props) {\n    super(Props);\n    this.wrapperRef = React.createRef();\n    // this.setWrapperRef = this.setWrapperRef.bind(this);\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n    this.state = { ...Props, listValue: [], inputVal: \"\", showList: false, notToShow: [], idslabelfield: [], singleSelection: true, }\n\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleChangeInput = this.handleChangeInput.bind(this);\n    this.closeList = this.closeList.bind(this);\n    this.openList = this.openList.bind(this);\n  }\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handleClickOutside);\n    // this.setState((state) => ({\n    //    value: this.state.value.map((str, index) => ({ text: str }))\n    // }))\n    let fieldToShow = this.props.fieldToShow;\n    let showInputkey = this.props.showInputkey;\n    let idslabelfield = this.props.idslabelfield;\n    //let inputVal = this.props.value\n    const listValue = this.props.alphabeticalSort ? sortByField(this.state.listValue, \"ascending\", this.state.showInputkey) : this.state.listValue;\n    this.setState({\n      fieldToShow, showInputkey, idslabelfield, listValue, //inputVal,\n      // value :inputVal\n    })\n  }\n\n  handleClickOutside(event) {\n    if (this.wrapperRef && !this.wrapperRef.current.contains(event.target) && this.state.showList) {\n      this.closeList(event)\n    }\n  }\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleClickOutside);\n  }\n  componentDidUpdate(previousProps) {\n    // if (this.props.value !== previousProps.value) {\n    //   let value = this.props.value\n    //   this.setState({ value })\n    // }\n    //commented By sudharshanan for Search on 27/07/2021\n    // if ((this.state.listValue !== previousProps.data) ||  (this.props.value !== previousProps.value)) {\n    //   let listValue = this.props.data;\n    //   let value = this.props.value\n    //   this.setState({ listValue, value, flterInput: this.state.inputVal })\n    // }\n    //added By sudharshanan for Search on 27/07/2021\n    if ((this.props.data !== previousProps.data) ||  (this.props.value !== previousProps.value)) {\n      let listValue = this.props.data;\n      let value = this.props.value\n      this.setState({ listValue, value, flterInput: this.state.inputVal })\n    }\n    \n  }\n  componentWillReceiveProps(nextProps) {\n    // You don't have to do this check first, but it can help prevent an unneeded render\n    // let listValue = nextProps.data;\n    // let value = nextProps.value\n    if (!this.state.inputVal) {\n      this.setState({\n        listValue: nextProps.data,\n        data: nextProps.data\n      })\n    }\n\n  }\n  closeList = (e) => {\n    this.setState(state => ({\n      showList: false,\n    }))\n  }\n  openList = (e) => {\n    //  let val = '' + this.state.inputVal;\n    //  let arrayList = this.state.data.filter(o =>\n    //    Object.keys(o).some(k =>\n    //     o[k] !== null && \n    //     o[k].toString().toLowerCase().includes(val.toLowerCase())));\n    //     console.log(\"arrayList:\", arrayList);\n    // \n    if (this.state.data && this.state.data.length > 0 && this.state.value.length > 0 && this.state.showInputkey) {\n      this.state.data.map(obj => {\n        if (this.state.value[0][this.state.showInputkey] && obj[this.state.showInputkey] && obj[this.state.showInputkey].toLowerCase() === this.state.value[0][this.state.showInputkey].toLowerCase())\n          return obj.checked = true;\n        else\n          return obj.checked = false;\n      })\n    }\n    // this.state.data[valIndex][\"checked\"] = false;\n\n    if (!this.state.showList) {\n      this.setState(state => ({\n        showList: true,\n        listValue: this.state.data//arrayList\n      }))\n    }\n  }\n  // handleInputFocus =(e) =>{\n  //   this.setState(state=>({\n  //     listValue : this.state.data,\n  //     showList:true\n  //   }))\n  // }\n  handleChangeInput = (e) => {\n    let val = '' + e;\n    let arrayList = this.state.data.filter(o =>\n      Object.keys(o).some(k =>\n        o[k] !== null &&\n        o[k].toString().toLowerCase().includes(val.toLowerCase())));\n    this.setState(\n      {\n      listValue: arrayList && arrayList.length > 0 ? arrayList : [],\n      inputVal: val\n      }\n    )\n    //this.props.getValue(this.state.value);\n  }\n  handleTagClick = (e) => {\n    this.setState(state => ({\n      inputVal: \"\",\n      listValue: this.state.data\n    }))\n  }\n  handleDelete = (e) => {\n    if (!this.state.isMandatory) {\n      let eve = this.state.value;\n      eve.splice(e, 1)\n      this.state.data.map((obj) => {\n        let i = eve.findIndex(evObj => evObj[this.state.showInputkey] === obj[this.state.showInputkey]);\n        if (i === -1) {\n          return obj.checked = false\n        } else {\n          return obj.checked = true\n        }\n      })\n      this.setState(state => ({\n        value: eve,\n        listValue: this.state.data\n        // showList:false\n      }))\n      this.props.getValue(this.state.value)\n    }\n\n  }\n  getUpdateSelected = (e, eve) => {\n    e['text'] = e[this.state.showInputkey];\n    let val = this.state.value;\n\n    if (this.state.singleSelection) {\n      val = []\n    }\n    if (e === 'all' && eve) {\n      val = []\n      val = this.state.listValue.map((obj) => {\n        obj.checked = true;\n        return e;\n      })\n    } else if (e === 'all' && !eve) {\n      val = this.state.listValue.map((obj) => {\n        obj.checked = true;\n        return val = [];\n      })\n    }\n    else if (e !== 'all') {\n      let valIndex = this.state.listValue.findIndex((obj) => obj[this.state.showInputkey] === e[this.state.showInputkey])\n\n      this.state.listValue.map((obj, index) => {\n        if (index === valIndex) {\n          let i = this.state.value.findIndex(obj => obj[this.state.showInputkey] === e[this.state.showInputkey]);\n          if (i === -1) {\n            val.push(e);\n            obj.checked = true;\n          } else {\n            obj.checked = false;\n            val.splice(i, 1)\n          }\n        } else if (this.state.singleSelection) {\n          obj.checked = false;\n        }\n        return null;\n      })\n    }\n    this.setState(state => ({\n      value: val,\n      listValue: this.state.listValue\n      // showList:false\n    }))\n    this.props.getValue(val)\n  }\n  getUpdateVal = (selected) => {\n    let val = selected[this.state.showInputkey];\n    this.setState(state => ({\n      //value: val,\n      value: [selected],\n      inputVal: val,\n      listValue: this.state.data\n      // showList:false\n    }))\n    this.props.getValue([selected]);\n    this.closeList()\n    // this.props.getValue([val]);\n  }\n  render() {\n    const ListHeadItems = (e) => {\n      return e.heads.map((item, index) =>\n        <TableHead key={item} > <FormattedMessage id={item} defaultMessage={item}></FormattedMessage> </TableHead>\n\n      )\n    }\n    const ListBodyByKey = (e) => {\n      return e.keyFlag.map((item, index) =>\n        <TableData key={index}>{e.value[item]}</TableData>\n      )\n    }\n    const ListBodyItems = e => {\n      return e.data.map((item, index) => (\n        <TableRow key={index} onClick={() => { this.getUpdateVal(item) }}>\n          <ListBodyByKey value={item} keyFlag={e.keys} />\n        </TableRow>)\n      )\n    }\n    const TableMain = e => {\n      //  let thVal = e.visibility === 'show-all' && this.state.listValue && this.state.listValue.length > 0 ? Object.keys(this.state.data[0]).filter(obj => this.state.notToShow.indexOf(obj) === -1) : e.keyList;\n      const tableVal = this.state.listValue && this.state.listValue.length > 0 ?\n        <Table className=\"compo-table\">\n          <thead>\n            <TableRow>\n              <ListHeadItems heads={this.state.idslabelfield} />\n            </TableRow>\n          </thead>\n          <tbody>\n            <ListBodyItems keys={this.state.fieldToShow} data={this.state.listValue} />\n          </tbody>\n        </Table>\n        : <InlineEl className=\"no-data\">No data Found</InlineEl>\n      return this.state.showList ? tableVal : ''\n    }\n    const ToggleList = e => {\n      return <InlineEl>\n        {this.state.showList ? <i className=\"fas fa-angle-down\" onClick={this.closeList} /> :\n          <i className=\"fas fa-angle-up\" onClick={this.openList} />}\n      </InlineEl>\n\n    }\n\n    // const ToggleList = e => {\n    //   return <span>\n    //     {this.state.showList ? <FontAwesomeIcon icon={faAngleUp} onClick={this.closeList} /> :\n    //       <FontAwesomeIcon icon={faAngleDown} onClick={this.openList} />\n    //     }\n    //   </span>\n    // }\n    const tagValue = (this.state.value.length > 0 && this.state.value[0][this.state.showInputkey] && [{ text: this.state.value[0][this.state.showInputkey] }]) || [];\n    return (\n      <>\n        <Row>\n          <Col>\n            <DivWrap className={`custom-column-wrap ${this.props.isDisabled ? 'disabled' : ''} ${this.state.value && this.state.value.length > 0 ? 'selected' : ''} ${this.state.isMandatory ? 'mandatory' : ''}`} ref={this.wrapperRef}>\n              <DivWrap className={`form-group-icon ${this.state.showList ? 'list-view' : ''}`} >\n                <LabelNormal className=\"form-label\">{this.state.labelledBy ? <FormattedMessage id={this.state.labelledBy} /> : ''}</LabelNormal>\n                <DivWrap className={`dropdown-wrap ${this.state.showList ? 'listed' : ''}`}>\n                  <DivWrap className=\"icon-input custom-fa-angle-down\" onClick={this.openList}>\n                    <ReactTags\n                      readOnly={this.props.isDisabled}\n                      tags={tagValue}\n                      handleDelete={this.handleDelete}\n                      allowDragDrop={false}\n                      delimiters={[]}\n                      handleInputChange={this.handleChangeInput}\n                      placeholder=\"Search...\"\n                      handleTagClick={this.handleTagClick}\n                      inline\n                    />\n                    <ToggleList />\n                  </DivWrap>\n                  <DivWrap className=\"limit-width\">\n                    <TableMain visibility={this.state.visibility} keyList={this.state.fieldToShow} data={this.state.listValue} />\n                  </DivWrap>\n                </DivWrap>\n              </DivWrap>\n            </DivWrap>\n          </Col>\n        </Row>\n      </>\n    )\n  }\n}\nexport default injectIntl(MultiColumnComboSearch);\n"]},"metadata":{},"sourceType":"module"}