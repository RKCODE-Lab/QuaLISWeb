{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Row,Col,Card,Nav,FormGroup,FormLabel}from\"react-bootstrap\";import{connect}from\"react-redux\";import{toast}from\"react-toastify\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faTrashAlt,faPencilAlt,faThumbsUp,faPlus,faUserTimes}from'@fortawesome/free-solid-svg-icons';import{injectIntl,FormattedMessage}from\"react-intl\";import{callService,crudMaster,validateEsignCredential,updateStore,getQuotation,filterColumnData,getProjectTypeComboService,viewAttachment,addQuotation,getreloadQuotation,getQuotationAddTestService,getQuotationPricingEditService,GrossQuotation,getClientCategoryComboService,getQuotaionClientComboService,getProjectCodeComboService}from\"../../actions\";import ListMaster from\"../../components/list-master/list-master.component\";import{transactionStatus}from\"../../components/Enumeration\";import AddQuotation from\"../../pages/quotation/AddQuotation\";import AddGrossQuotation from\"../../pages/quotation/AddGrossQuotation\";import{DEFAULT_RETURN}from\"../../actions/LoginTypes\";import SlideOutModal from\"../../components/slide-out-modal/SlideOutModal\";import Esign from\"../audittrail/Esign\";import{showEsign,getControlMap,constructOptionList,formatInputDate,onDropAttachFileList,deleteAttachmentDropZone}from\"../../components/CommonScript\";import{ReadOnlyText,ContentPanel}from\"../../components/App.styles\";import{process}from\"@progress/kendo-data-query\";import ConfirmMessage from\"../../components/confirm-alert/confirm-message.component\";// import ProjectMasterFilter from './ProjectMasterFilter';\nimport{intl}from\"../../components/App\";import DataGrid from'../../components/data-grid/data-grid.component';import AddQuotationTest from\"../../pages/quotation/AddQuotationTest\";import EditQuotationTestPricing from\"./EditQuotationTestPricing\";var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Quotation=/*#__PURE__*/function(_Component){_inherits(Quotation,_Component);var _super=_createSuper(Quotation);function Quotation(props){var _this;_classCallCheck(this,Quotation);_this=_super.call(this,props);_this.handleDateChange=function(dateName,dateValue){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type===\"checkbox\"){selectedRecord[event.target.name]=event.target.checked===true?3:4;}else if(event.target.type==='radio'){selectedRecord[event.target.name]=optional;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){var quotationData=[];var inputParam={};quotationData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"Quotation\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\"};if(_this.props.Login.operation===\"update\"&&_this.props.Login.screenName===\"IDS_QUOTATION\"){postParam[\"primaryKeyValue\"]=_this.props.Login.masterData.SelectedQuotation.nquotationcode;quotationData[\"quotation\"]={nquotationcode:_this.props.Login.masterData.SelectedQuotation.nquotationcode,nsitecode:_this.props.Login.userInfo.nmastersitecode,sprojecttitle:_this.props.Login.ProjectMaster.sprojecttitle===undefined?\"\":_this.props.Login.ProjectMaster.sprojecttitle,sclientsiteaddress:_this.state.selectedRecord.sclientsiteaddress===undefined?\"\":_this.state.selectedRecord.sclientsiteaddress,sinvoiceaddress:_this.state.selectedRecord.sinvoiceaddress===undefined?\"\":_this.state.selectedRecord.sinvoiceaddress,sdescription:_this.state.selectedRecord.sdescription===undefined?\"\":_this.state.selectedRecord.sdescription,ntransactionstatus:transactionStatus.DRAFT,sdeviationremarks:_this.state.selectedRecord.sdeviationremarks===undefined?\"\":_this.state.selectedRecord.sdeviationremarks};}else if(_this.props.Login.operation===\"create\"&&_this.props.Login.screenName===\"IDS_QUOTATION\"){quotationData[\"quotation\"]={nsitecode:_this.props.Login.userInfo.nmastersitecode,sprojecttitle:_this.props.Login.ProjectMaster.sprojecttitle===undefined?\"\":_this.props.Login.ProjectMaster.sprojecttitle,sclientsiteaddress:_this.state.selectedRecord.sclientsiteaddress===undefined?\"\":_this.state.selectedRecord.sclientsiteaddress,sinvoiceaddress:_this.state.selectedRecord.sinvoiceaddress===undefined?\"\":_this.state.selectedRecord.sinvoiceaddress,sdescription:_this.state.selectedRecord.sdescription===undefined?\"\":_this.state.selectedRecord.sdescription,ntransactionstatus:transactionStatus.DRAFT,sdeviationremarks:_this.state.selectedRecord.sdeviationremarks===undefined?\"\":_this.state.selectedRecord.sdeviationremarks};}if((_this.props.Login.operation===\"create\"||_this.props.Login.operation===\"update\")&&_this.props.Login.screenName===\"IDS_QUOTATION\"){quotationData[\"quotation\"][\"nclientcatcode\"]=_this.state.selectedRecord[\"nclientcatcode\"]?_this.state.selectedRecord[\"nclientcatcode\"].value:transactionStatus.NA;quotationData[\"quotation\"][\"nclientcode\"]=_this.state.selectedRecord[\"nclientcode\"]!==\"\"?_this.state.selectedRecord[\"nclientcode\"].value:transactionStatus.NA;quotationData[\"quotation\"][\"nquotationtypecode\"]=_this.state.selectedRecord[\"nquotationtypecode\"]!==\"\"?_this.state.selectedRecord[\"nquotationtypecode\"].value:transactionStatus.NA;quotationData[\"quotation\"][\"nprojecttypecode\"]=_this.state.selectedRecord[\"nprojecttypecode\"]?_this.state.selectedRecord[\"nprojecttypecode\"].value:transactionStatus.NA;quotationData[\"quotation\"][\"nprojectmastercode\"]=_this.state.selectedRecord[\"nprojectmastercode\"]!==\"\"?_this.state.selectedRecord[\"nprojectmastercode\"].value:transactionStatus.NA;/*  quotationData[\"quotation\"][\"nuserrolecode\"] = this.state.selectedRecord[\"nuserrolecode\"]!==\"\"  ? this.state.selectedRecord[\"nuserrolecode\"].value\r\n        : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"]!==\"\"  ? this.state.selectedRecord[\"nusercode\"].value\r\n        : transactionStatus.NA;  */quotationData[\"quotation\"][\"nuserrolecode\"]=_this.props.Login.ProjectMaster[\"nuserrolecode\"]!==\"\"?_this.props.Login.ProjectMaster[\"nuserrolecode\"]:transactionStatus.NA;quotationData[\"quotation\"][\"nusercode\"]=_this.props.Login.ProjectMaster[\"nusercode\"]!==\"\"?_this.props.Login.ProjectMaster[\"nusercode\"]:transactionStatus.NA;quotationData[\"quotation\"][\"drfwdate\"]=formatInputDate(_this.state.selectedRecord[\"srfwdate\"],false);quotationData[\"quotation\"][\"dquotationdate\"]=formatInputDate(_this.state.selectedRecord[\"dquotationdate\"],false);}if(_this.props.Login.operation===\"create\"&&_this.props.Login.screenName===\"IDS_TEST\"){inputParam=_this.onSaveQuotationTest(saveType,formRef);}if(_this.props.Login.operation===\"update\"&&(_this.props.Login.screenName===\"IDS_PRICE\"||_this.props.Login.screenName===\"IDS_GROSSQUOTATION\")){inputParam=_this.onSaveQuotationTestPrice(saveType,formRef);}if(_this.props.Login.operation===\"create\"&&_this.props.Login.screenName===\"IDS_GROSSQUOTATION\"){inputParam=_this.onSaveGrossQuotation(saveType,formRef);}if((_this.props.Login.operation===\"create\"||_this.props.Login.operation===\"update\")&&_this.props.Login.screenName===\"IDS_QUOTATION\"){inputParam={classUrl:\"quotation\",methodUrl:\"Quotation\",inputData:quotationData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch};}var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.onSaveQuotationTestPrice=function(saveType,formRef){var quotationtestPriceData={\"userinfo\":_this.props.Login.userInfo,\"QuotationTest\":_this.props.Login.masterData.SelectedQuotation,\"nquotationcode\":_this.props.Login.masterData.SelectedQuotation.nquotationcode};var postParam=undefined;var quotationDataState=undefined;var selectedId=null;if(_this.props.Login.operation===\"update\"){// edit\nquotationDataState=_this.state.quotationDataState;selectedId=_this.props.Login.selectedId;postParam={inputListName:\"Quotation\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\"};quotationtestPriceData[\"QuotationTest\"]=JSON.parse(JSON.stringify(_this.props.Login.selectedRecord));}else{//add               \nvar priceList=[];_this.state.selectedRecord[\"ntestcode\"]&&_this.state.selectedRecord[\"ntestcode\"].map(function(item){return priceList.push({ntestcode:item.value});});quotationtestPriceData[\"QuotationTest\"]=priceList;}if(quotationtestPriceData[\"QuotationTest\"].hasOwnProperty('esignpassword')){if(quotationtestPriceData[\"QuotationTest\"]['esignpassword']===''){delete quotationtestPriceData[\"QuotationTest\"]['esigncomments'];delete quotationtestPriceData[\"QuotationTest\"]['esignpassword'];delete quotationtestPriceData[\"QuotationTest\"][\"agree\"];}}//console.log(\"update data:\", quotationtestPriceData);\nvar inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"QuotationTest\",inputData:quotationtestPriceData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch,selectedId:selectedId,quotationDataState:quotationDataState};return inputParam;};_this.onNumericInputOnChange=function(value,name){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});};_this.validateEsign=function(){var inputParam={inputData:{userinfo:_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.DeleteQuotation=function(methodUrl,selectedQuotation,operation,ncontrolCode){var postParam={inputListName:\"QuotationList\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\",primaryKeyValue:selectedQuotation.nquotationcode,fetchUrl:\"quotation/getQuotation\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:methodUrl,postParam:postParam,inputData:{userinfo:_this.props.Login.userInfo,quotation:selectedQuotation},operation:operation,isClearSearch:_this.props.Login.isClearSearch};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"IDS_QUOTATION\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.onComboChange=function(comboData,fieldName,caseNo){var selectedRecord=_this.state.selectedRecord||{};switch(caseNo){case 1:if(fieldName===\"nclientcatcode\"){// const selectedRecord = this.state.selectedRecord || {};\nif(selectedRecord.nclientcatcode){if(parseInt(comboData.value)!==parseInt(selectedRecord.nclientcatcode.value)){// selectedRecord.nusercode={};\ndelete selectedRecord.nclientcode;delete selectedRecord.sclientsiteaddress;}}selectedRecord[fieldName]=comboData;selectedRecord[\"sclientcatname\"]=comboData.item[\"sclientcatname\"];_this.props.getClientCategoryComboService({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nclientcatcode.label,primarykey:selectedRecord.nclientcatcode.value}},selectedRecord);}if(fieldName===\"nclientcode\"){// const selectedRecord = this.state.selectedRecord || {};\nif(selectedRecord.nclientcode){if(parseInt(comboData.value)!==parseInt(selectedRecord.nclientcode.value)){// selectedRecord.nusercode={};\ndelete selectedRecord.sclientsiteaddress;}}selectedRecord[fieldName]=comboData;selectedRecord[\"sclientname\"]=comboData.item[\"sclientname\"];_this.props.getQuotaionClientComboService({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nclientcode.label,primarykey:selectedRecord.nclientcode.value}},selectedRecord);}break;case 2:// let nfilterProjectType = this.state.nfilterProjectType || {}\n// nfilterProjectType = comboData;\nvar selectedRecordfilter=_this.state.selectedRecordfilter||{};selectedRecordfilter[fieldName]=comboData;_this.setState({selectedRecordfilter:selectedRecordfilter});break;case 3:selectedRecord[fieldName]=comboData;if(fieldName===\"ndiscountbandcode\"){var VatAmount=_this.state.selectedRecord.VatAmount===undefined?0.00:_this.state.selectedRecord.VatAmount;selectedRecord[\"DiscountAmount\"]=_this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount*(selectedRecord.ndiscountbandcode.item.namount/100);selectedRecord[\"TotalNetAmount\"]=_this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount+(_this.state.selectedRecord.DiscountAmount-VatAmount);}else if(fieldName===\"nvatbandcode\"){selectedRecord[\"VatAmount\"]=_this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount*(selectedRecord.nvatbandcode.item.namount/100);selectedRecord[\"TotalNetAmount\"]=_this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount+(_this.state.selectedRecord.DiscountAmount-_this.state.selectedRecord.VatAmount);}_this.setState({selectedRecord:selectedRecord});break;case 4:if(fieldName===\"nprojecttypecode\"){if(selectedRecord.nprojecttypecode){if(parseInt(comboData.value)!==parseInt(selectedRecord.nprojecttypecode.value)){delete selectedRecord.nprojectmastercode;delete selectedRecord.sprojecttitle;delete selectedRecord.srfwdate;delete selectedRecord.suserrolename;delete selectedRecord.susername;}}selectedRecord[fieldName]=comboData;selectedRecord[\"sprojecttypename\"]=comboData.item[\"sprojecttypename\"];_this.props.getProjectTypeComboService({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nprojecttypecode.label,primarykey:selectedRecord.nprojecttypecode.value}},selectedRecord);}if(fieldName===\"nprojectmastercode\"){if(selectedRecord.nprojectmastercode){if(parseInt(comboData.value)!==parseInt(selectedRecord.nprojectmastercode.value)){delete selectedRecord.sprojecttitle;delete selectedRecord.srfwdate;delete selectedRecord.suserrolename;delete selectedRecord.susername;}}selectedRecord[fieldName]=comboData;selectedRecord[\"sprojectcode\"]=comboData.item[\"sprojectcode\"];_this.props.getProjectCodeComboService({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nprojectmastercode.label,primarykey:selectedRecord.nprojectmastercode.value}},selectedRecord);}break;default:break;}};_this.onInputOnChange=function(event,primaryFieldKey){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;else selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{if(primaryFieldKey&&(event.target.name===\"ncost\"||event.target.name===\"nnoofsamples\"||event.target.name===\"ntotalamount\")){var index=selectedRecord.findIndex(function(item){return item.nquotationtestcode===primaryFieldKey;});if(/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){selectedRecord[index][event.target.name]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}}_this.setState({selectedRecord:selectedRecord});};_this.onnetAmountEvent=function(selectedRecord23,ccc){var selectedRecord=_this.state.selectedRecord;var selectedRecord1=selectedRecord.findIndex(function(item){return item.nquotationtestcode===ccc?item:\"\";});var str=selectedRecord[selectedRecord1];var count=str.ncost*str.nnoofsamples;selectedRecord[selectedRecord1]=_objectSpread(_objectSpread({},str),{},{ntotalamount:count});_this.setState(selectedRecord);console.log(count);};_this.onDropProjectMasterclosureFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.onNumericInputChange=function(value,name){console.log(\"value:\",value,name);var selectedRecord=_this.state.selectedRecord||{};if(name===\"nprojectduration\"){if(/^[0-9]+$/.test(value.target.value)||value.target.value===\"\"){selectedRecord[name]=value.target.value;}else{selectedRecord[name]=\"\";}}else{selectedRecord[name]=value;}_this.setState({selectedRecord:selectedRecord});};_this.deleteProjectMasterclosureAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"//fileToDelete:file.name \n});};_this.approveQuotation=function(methodUrl,selectedQuotation,operation,ncontrolCode){if(selectedQuotation.ntransactionstatus===transactionStatus.DRAFT){var postParam={inputListName:\"Quotation\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\",primaryKeyValue:selectedQuotation.nquotationcode,fetchUrl:\"quotation/getQuotation\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:methodUrl,postParam:postParam,inputData:{\"userinfo\":_this.props.Login.userInfo,\"quotation\":selectedQuotation},operation:operation,isClearSearch:_this.props.Login.isClearSearch};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"IDS_QUOTATION\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.onDropTestFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.data,event.dataState),quotationDataState:event.dataState});};_this.ConfirmDelete=function(selectedQuotation,operation,deleteId,screenName){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.DeleteQuotation(screenName,selectedQuotation,operation,deleteId);});};_this.reloadData=function(){_this.searchRef.current.value=\"\";// if (Object.values(this.state.selectedRecordfilter.nprojecttypecodevalue).length && this.state.selectedRecordfilter.nprojecttypecodevalue !== undefined) {\nif(Object.values(_this.props.Login.masterData.SelectedQuotation).length&&_this.props.Login.masterData.SelectedQuotation!==undefined){var inputParam={inputData:{userinfo:_this.props.Login.userInfo},classUrl:\"quotation\",methodUrl:\"Quotation\"};_this.props.getreloadQuotation(inputParam);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_PROJECTTYPENOTAVAILABLE\"}));}};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;//  let selectedRecord = this.props.Login.selectedRecord;\nvar selectedRecord=_this.state.selectedRecord;if(_this.props.Login.loadEsign){loadEsign=false;}else{openModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,selectedRecord:selectedRecord,selectedId:null,loadEsign:loadEsign}};_this.props.updateStore(updateInfo);};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};var _quotationDataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={selectedRecord:{},error:\"\",userRoleControlRights:[],selectedQuotation:undefined,controlMap:new Map(),Instrument:[],quotationDataState:_quotationDataState};_this.searchRef=React.createRef();_this.searchFieldList=[\"sclientcatname\",\"sclientname\",\"sclientsiteaddress\",\"sinvoiceaddress\",\"sprojectcode\",\"sprojecttitle\",\"suserrolename\",\"susername\",\"squotationdate\",\"sdescription\",\"sdeviationremarks\"];_this.confirmMessage=new ConfirmMessage();_this.extractedColumnList=[{\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestname\",\"width\":\"200px\"},{\"idsName\":\"IDS_TESTDESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"200px\"},{\"idsName\":\"IDS_TESTCOST\",\"dataField\":\"ncost\",\"width\":\"200px\"},{\"idsName\":\"IDS_NUMBEROFSAMPLES\",\"dataField\":\"nnoofsamples\",\"width\":\"100px\"},{\"idsName\":\"IDS_TOTALNETAMOUNT\",\"dataField\":\"ntotalamount\",\"width\":\"200px\"}];return _this;}_createClass(Quotation,[{key:\"onSaveQuotationTest\",value:function onSaveQuotationTest(saveType,formRef){var _this2=this;var inputData=[];inputData[\"userinfo\"]=this.props.Login.userInfo;// inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\n//  inputData[\"Quotation\"] = {};\nvar testArray=[];testArray=this.state.selectedRecord.ntestcode.map(function(item){var QuotationData={};QuotationData[\"ntestcode\"]=item.value;QuotationData[\"nquotationcode\"]=_this2.props.Login.masterData.SelectedQuotation.nquotationcode;return QuotationData;});inputData['QuotationTest']=testArray;var inputParam={classUrl:\"quotation\",methodUrl:\"QuotationTest\",inputData:inputData,operation:this.props.Login.operation,saveType:saveType,formRef:formRef};return inputParam;}},{key:\"onSaveGrossQuotation\",value:function onSaveGrossQuotation(saveType,formRef){var quotationData={};quotationData[\"userinfo\"]=this.props.Login.userInfo;quotationData[\"GrossQuotation\"]={nquotationcode:this.props.Login.masterData.SelectedQuotation.nquotationcode,nsitecode:this.props.Login.userInfo.nmastersitecode,ndiscountamount:this.state.selectedRecord.DiscountAmount,nvatamount:this.state.selectedRecord.VatAmount,ntotalnetamount:this.state.selectedRecord.TotalNetAmount,ntotalgrosstamount:this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount};quotationData[\"GrossQuotation\"][\"ndiscountbandcode\"]=this.state.selectedRecord[\"ndiscountbandcode\"]?this.state.selectedRecord[\"ndiscountbandcode\"].value:transactionStatus.NA;quotationData[\"GrossQuotation\"][\"nvatbandcode\"]=this.state.selectedRecord[\"nvatbandcode\"]?this.state.selectedRecord[\"nvatbandcode\"].value:transactionStatus.NA;var inputParam={classUrl:\"quotation\",methodUrl:\"GrossQuotation\",inputData:quotationData,operation:this.props.Login.operation,saveType:saveType,formRef:formRef};return inputParam;}},{key:\"render\",value:function render(){var _this3=this;var versionStatusCSS=\"outline-secondary\";var activeIconCSS=\"fa fa-check\";if(this.props.Login.masterData.SelectedQuotation&&this.props.Login.masterData.SelectedQuotation.ntransactionstatus===transactionStatus.APPROVED){versionStatusCSS=\"outline-success\";}else if(this.props.Login.masterData.SelectedQuotation&&this.props.Login.masterData.SelectedQuotation.ntransactionstatus===transactionStatus.DRAFT){activeIconCSS=\"\";}if(this.props.Login.openModal){this.mandatoryFields=this.findMandatoryFields(this.props.Login.screenName,this.state.selectedRecord,this.props.Login.operation);}var userInfo=this.props.Login.userInfo;var addId=this.state.controlMap.has(\"AddQuotation\")&&this.state.controlMap.get(\"AddQuotation\").ncontrolcode;var editId=this.state.controlMap.has(\"EditQuotation\")&&this.state.controlMap.get(\"EditQuotation\").ncontrolcode;var deleteId=this.state.controlMap.has(\"DeleteQuotation\")&&this.state.controlMap.get(\"DeleteQuotation\").ncontrolcode;var approveId=this.state.controlMap.has(\"ApproveQuotation\")&&this.state.controlMap.get(\"ApproveQuotation\").ncontrolcode;var addQuotationTestId=this.state.controlMap.has(\"AddQuotationTest\")&&this.state.controlMap.get(\"AddQuotationTest\").ncontrolcode;var updateQuotationTestId=this.state.controlMap.has(\"EditQuotationTest\")&&this.state.controlMap.get(\"EditQuotationTest\").ncontrolcode;var grossQuotationeId=this.state.controlMap.has(\"GrossQuotation\")&&this.state.controlMap.get(\"GrossQuotation\").ncontrolcode;var fieldsForGrid=[{\"idsName\":\"IDS_LOGINID\",\"dataField\":\"sloginid\",\"width\":\"200px\"},{\"idsName\":\"IDS_USER\",\"dataField\":\"steammembername\",\"width\":\"200px\"}];var editTestPriceParam={screenName:\"IDS_PRICE\",\"operation\":\"update\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolCode:updateQuotationTestId};var SelectedQuotation=this.props.Login.masterData.SelectedQuotation;var selectedMaster=this.props.Login.masterData.SelectedQuotation;var selectedQuotation=this.props.Login.masterData.SelectedQuotation;var GrossQuotation=this.props.Login.masterData.GrossQuotation;var filterParam={inputListName:\"Quotation\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\",fetchUrl:\"quotation/getQuotation\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,searchFieldList:this.searchFieldList};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster,{screenName:this.props.intl.formatMessage({id:\"IDS_QUOTATION\"}),masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.Quotation,getMasterDetail:function getMasterDetail(quotationData){return _this3.props.getQuotation(quotationData,_this3.props.Login.userInfo,_this3.props.Login.masterData);},selectedMaster:selectedQuotation,primaryKeyField:\"nquotationcode\",mainField:\"squotationno\",firstField:\"sclientname\",secondField:\"sversionstatus\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData//     openModal={() => this.props.addQuotation(\"create\", selectedQuotation, userInfo, addId, this.state.ProjectMasterList)}\n,openModal:function openModal(){return _this3.props.addQuotation(\"create\",userInfo,addId,selectedQuotation);},isMultiSelecct:false,hidePaging:false,isClearSearch:this.props.Login.isClearSearch,openFilter:this.openFilter,closeFilter:this.closeFilter,onFilterSubmit:this.onFilterSubmit,showFilterIcon:false,showFilter:this.props.Login.showFilter/*         filterComponent={[\r\n                  {\r\n                    \"IDS_PROJECTMASTERFILTER\":\r\n                      <ProjectMasterFilter\r\n                        filterProjectType={this.state.ProjectMasterList || []}\r\n                        nfilterProjectType={this.props.Login.masterData.SelectedProjectType || {}}\r\n                        onComboChange={this.onComboChange}\r\n                        selectedRecord={this.state.selectedRecordfilter || {}}\r\n                      />\r\n                  }\r\n                ]} */})),/*#__PURE__*/React.createElement(Col,{md:8},selectedQuotation?/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},selectedQuotation.sclientcatname),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-outlined \".concat(versionStatusCSS,\" btn-sm ml-3\")},/*#__PURE__*/React.createElement(\"i\",{class:activeIconCSS}),selectedQuotation.sversionstatus)),/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline\"},/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2\",name:\"edittestname\",hidden:this.state.userRoleControlRights.indexOf(editId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_EDIT\"})//data-for=\"tooltip_list_wrap\"\n,onClick:function onClick(){return _this3.props.addQuotation(\"update\",userInfo,editId,selectedQuotation);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt})),/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",name:\"deletetestname\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"})//   data-for=\"tooltip_list_wrap\"\n,hidden:this.state.userRoleControlRights.indexOf(deleteId)===-1,onClick:function onClick(){return _this3.ConfirmDelete(selectedQuotation,\"delete\",deleteId,\"Quotation\");}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"approveQuotation\",className:\"btn btn-circle outline-grey mr-2\",hidden:this.state.userRoleControlRights.indexOf(approveId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_APPROVE\"})//data-for=\"tooltip_list_wrap\"\n,onClick:function onClick(){return _this3.approveQuotation(\"Quotation\",selectedQuotation,\"approve\",approveId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faThumbsUp})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"GrossQuotation\",className:\"btn btn-circle outline-grey mr-2\",hidden:this.state.userRoleControlRights.indexOf(grossQuotationeId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_GROSSQUOTATION\"}),onClick:function onClick(){return _this3.props.GrossQuotation(\"create\",userInfo,grossQuotationeId,selectedQuotation);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faUserTimes})))))),/*#__PURE__*/React.createElement(Card.Body,{className:\"form-static-wrap\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_CLIENTCATEGORY\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.sclientcatname))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_CLIENT\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.sclientname))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_CLIENTADDRESS\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.sclientsiteaddress))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_INVOICEADDRESS\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.sinvoiceaddress))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_PROJECTTYPE\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.sprojecttypename))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_PROJECTCODE\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.sprojectcode,\" \"))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_PROJECTTITLE\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.sprojecttitle,\" \"))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_RFWDATE\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.srfwdate))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_ROLE\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.suserrolename))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_USER\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.susername))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_QUOTATIONDATE\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.squotationdate))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_DESCRIPTION\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.sdescription))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_DEVIATIONREMARKS\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.sdeviationremarks)))),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"horizontal-line\"})),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_DISCOUNTNAME\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.sdiscountbandname))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_DISCOUNTPERCENTAGE\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.ndiscountpercentage))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_VATNAME\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.svatbandname))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_VATPERCENTAGE\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.nvatpercentage))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_TOTALGROSSAMOUNT\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.ntotalgrosstamount))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_DISCOUNTAMOUNT\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.ndiscountamount,\" \"))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_VATAMOUNT\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.nvatamount,\" \"))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,this.props.intl.formatMessage({id:\"IDS_TOTALNETAMOUNT\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,selectedQuotation.ntotalnetamount)))),/*#__PURE__*/React.createElement(Card,{className:\"at-tabs border-0\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"addPrice\",className:\"add-txt-btn\",hidden:this.state.userRoleControlRights.indexOf(addQuotationTestId)===-1,onClick:function onClick(){return _this3.props.getQuotationAddTestService(\"IDS_TEST\",\"create\",_this3.props.Login.masterData,_this3.props.Login.userInfo,addQuotationTestId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_TEST\",defaultMessage:\"Test\"})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"updatePrice\",className:\"add-txt-btn\",hidden:this.state.userRoleControlRights.indexOf(updateQuotationTestId)===-1,onClick:function onClick(){return _this3.props.getQuotationPricingEditService(_objectSpread(_objectSpread({},editTestPriceParam),{},{\"updateType\":\"All\",quotationDataState:undefined}));}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_PRICE\",defaultMessage:\"Price\"}))))),/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:\"nquotationtestcode\",data:this.props.Login.masterData.QuotationTest,dataResult:this.props.Login.masterData.QuotationTest,dataState:this.state.quotationDataState,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList,controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,fetchRecord:this.props.getQuotationPricingEditService,editParam:_objectSpread(_objectSpread({},editTestPriceParam),{},{\"updateType\":\"Single\",quotationDataState:this.state.quotationDataState}),deleteRecord:this.deleteQuotation,deleteParam:{operation:\"delete\"},methodUrl:\"QuotationTest\",addRecord:function addRecord(){return _this3.openModal(addId);},pageable:true,scrollable:'scrollable',isActionRequired:true,isToolBarRequired:false,selectedId:this.props.Login.selectedId}))))))):\"\"))),this.props.Login.openModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,size:this.props.Login.edit===true?\"xl\":\"lg\",closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{},mandatoryFields:this.mandatoryFields||[],addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onEsignInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.screenName===\"IDS_QUOTATION\"?/*#__PURE__*/React.createElement(AddQuotation,{userInfo:this.props.Login.userInfo,selectedRecord:this.state.selectedRecord||{}// selectedclientcode={this.state.selectedRecord.nclientcode || {}}\n,sclientsiteaddress:this.props.Login.sclientsiteaddress,SelectedClient:this.props.Login.SelectedClient,ClientCategory:this.props.Login.ClientCategory,Client:this.props.Login.Client,ProjectCode:this.props.Login.ProjectCode,ProjectType:this.props.Login.ProjectType,ProjectMaster:this.props.Login.ProjectMaster,QuotationType:this.props.Login.QuotationType,onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,onNumericInputChange:this.onNumericInputChange,handleDateChange:this.handleDateChange}):this.props.Login.screenName===\"IDS_TEST\"?/*#__PURE__*/React.createElement(AddQuotationTest,{QuotationTestList:this.props.Login.QuotationTestList,selectedRecord:this.state.selectedRecord||{},onComboChange:this.onComboChange}):this.props.Login.screenName===\"IDS_PRICE\"?/*#__PURE__*/React.createElement(EditQuotationTestPricing,{onnetAmountEvent:this.onnetAmountEvent,selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange}):/*#__PURE__*/React.createElement(AddGrossQuotation,{DiscountBand:this.props.Login.DiscountBand,VATBand:this.props.Login.VATBand,selectedRecord:this.state.selectedRecord||{}// QuotationTest={this.props.Login.QuotationTest}\n,onComboChange:this.onComboChange,onInputOnChange:this.onInputOnChange,DiscountAmount:this.state.selectedRecord.DiscountAmount===undefined?0.00:this.state.selectedRecord.DiscountAmount,VatAmount:this.state.selectedRecord.VatAmount===undefined?0.00:this.state.selectedRecord.VatAmount,QuotationGrossAmount:this.props.Login.QuotationGrossAmount===undefined?0.00:this.props.Login.QuotationGrossAmount,TotalNetAmount:this.state.selectedRecord.TotalNetAmount!==undefined?this.state.selectedRecord.TotalNetAmount:this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount})}));}},{key:\"findMandatoryFields\",value:function findMandatoryFields(screenName,selectedRecord,operation){var mandatoryFields=[];if(screenName===\"IDS_QUOTATION\"){mandatoryFields=[{\"idsName\":\"IDS_CLIENTCATEGORY\",\"dataField\":\"nclientcatcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_CLIENT\",\"dataField\":\"nclientcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_CLIENTADDRESS\",\"dataField\":\"sclientsiteaddress\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_INVOICEADDRESS\",\"dataField\":\"sinvoiceaddress\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_QUOTATIONTYPE\",\"dataField\":\"nquotationtypecode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_PROJECTTYPE\",\"dataField\":\"nprojecttypecode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},// { \"idsName\": \"IDS_PROJECTCODE\", \"dataField\": \"nprojectmastercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\n{\"idsName\":\"IDS_PROJECTTITLE\",\"dataField\":\"sprojecttitle\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_RFWDATE\",\"dataField\":\"srfwdate\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_ROLE\",\"dataField\":\"suserrolename\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_USER\",\"dataField\":\"susername\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_QUOTATIONDATE\",\"dataField\":\"dquotationdate\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"selectbox\"}];// mandatoryFields.forEach(item => item.mandatory === true && mandatoryFields.push(item));\nreturn mandatoryFields;}else{return[];}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var updateState=false;var _this$state=this.state,selectedRecord=_this$state.selectedRecord,selectedRecordfilter=_this$state.selectedRecordfilter,userRoleControlRights=_this$state.userRoleControlRights,controlMap=_this$state.controlMap,filterData=_this$state.filterData,nfilterProjectType=_this$state.nfilterProjectType,filterProjectType=_this$state.filterProjectType;if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){selectedRecord=this.props.Login.selectedRecord;updateState=true;this.setState({selectedRecord:selectedRecord});}if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({controlMap:controlMap,userRoleControlRights:userRoleControlRights});//   updateState = true;\n}var nprojecttypecode=this.state.nfilterProjectType||{};if(this.props.Login.masterData!==previousProps.Login.masterData){// nfilterProjectType = this.state.nfilterProjectType || {};\n// const filterProjectType = constructOptionList(this.props.Login.masterData.filterProjectType || [], \"nprojecttypecode\",\n//   \"sprojecttypename\", undefined, undefined, undefined);\n// let ProjectMasterList = filterProjectType.get(\"OptionList\");\n// nprojecttypecode = ProjectMasterList[0];\n// selectedRecordfilter = { nprojecttypecodevalue: nprojecttypecode }\n//   selectedRecord = { nprojecttypecodevalue: nprojecttypecode }\n// nfilterProjectType = this.props.Login.masterData.nfilterProjectType;\nthis.setState({selectedRecord:selectedRecord});updateState=true;this.setState({filterData:filterData});}// if (this.props.Login.masterData.SelectedProjectType !== previousProps.Login.masterData.SelectedProjectType) {\n//   let nprojecttypecodevalue = this.props.Login.masterData.SelectedProjectType ?\n//     {\n//       label: this.props.Login.masterData.SelectedProjectType.sprojecttypename,\n//       value: this.props.Login.masterData.SelectedProjectType.nprojecttypecode,\n//       item: this.props.Login.masterData.SelectedProjectType\n//     } : \"\"\n//   //  nprojecttypecode=ProjectMasterList[ProjectMasterList.length-1];\n//   selectedRecordfilter = { nprojecttypecodevalue }\n//   selectedRecord = { nprojecttypecodevalue: nprojecttypecode }\n//   // nfilterProjectType = this.props.Login.masterData.nfilterProjectType;\n//   this.setState({\n//     selectedRecordfilter, selectedRecord\n//   });\n// }\n// if (this.props.Login.masterData.nfilterProjectType !== previousProps.Login.masterData.nfilterProjectType) {\n// }\n}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"){if(props.Login.errorCode===417||props.Login.errorCode===409){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return Quotation;}(Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,filterColumnData:filterColumnData,updateStore:updateStore,validateEsignCredential:validateEsignCredential,getQuotation:getQuotation,getProjectTypeComboService:getProjectTypeComboService,viewAttachment:viewAttachment,addQuotation:addQuotation,getreloadQuotation:getreloadQuotation,getQuotationAddTestService:getQuotationAddTestService,getQuotationPricingEditService:getQuotationPricingEditService,GrossQuotation:GrossQuotation,getClientCategoryComboService:getClientCategoryComboService,getQuotaionClientComboService:getQuotaionClientComboService,getProjectCodeComboService:getProjectCodeComboService})(injectIntl(Quotation));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/quotation/Quotation.jsx"],"names":["React","Component","Row","Col","Card","Nav","FormGroup","FormLabel","connect","toast","FontAwesomeIcon","faTrashAlt","faPencilAlt","faThumbsUp","faPlus","faUserTimes","injectIntl","FormattedMessage","callService","crudMaster","validateEsignCredential","updateStore","getQuotation","filterColumnData","getProjectTypeComboService","viewAttachment","addQuotation","getreloadQuotation","getQuotationAddTestService","getQuotationPricingEditService","GrossQuotation","getClientCategoryComboService","getQuotaionClientComboService","getProjectCodeComboService","ListMaster","transactionStatus","AddQuotation","AddGrossQuotation","DEFAULT_RETURN","SlideOutModal","Esign","showEsign","getControlMap","constructOptionList","formatInputDate","onDropAttachFileList","deleteAttachmentDropZone","ReadOnlyText","ContentPanel","process","ConfirmMessage","intl","DataGrid","AddQuotationTest","EditQuotationTestPricing","mapStateToProps","state","Login","Quotation","props","handleDateChange","dateName","dateValue","selectedRecord","setState","onInputOnChange","event","optional","target","type","name","checked","value","onSaveClick","saveType","formRef","quotationData","inputParam","userInfo","postParam","inputListName","selectedObject","primaryKeyField","operation","screenName","masterData","SelectedQuotation","nquotationcode","nsitecode","nmastersitecode","sprojecttitle","ProjectMaster","undefined","sclientsiteaddress","sinvoiceaddress","sdescription","ntransactionstatus","DRAFT","sdeviationremarks","NA","onSaveQuotationTest","onSaveQuotationTestPrice","onSaveGrossQuotation","classUrl","methodUrl","inputData","searchRef","isClearSearch","userRoleControlRights","nformcode","ncontrolCode","updateInfo","typeName","data","loadEsign","screenData","quotationtestPriceData","quotationDataState","selectedId","JSON","parse","stringify","priceList","map","item","push","ntestcode","hasOwnProperty","onNumericInputOnChange","validateEsign","userinfo","sreason","password","DeleteQuotation","selectedQuotation","primaryKeyValue","fetchUrl","fecthInputObject","quotation","openModal","onComboChange","comboData","fieldName","caseNo","nclientcatcode","parseInt","nclientcode","sdisplayname","label","primarykey","selectedRecordfilter","VatAmount","QuotationGrossAmount","ntotalgrosstamount","ndiscountbandcode","namount","DiscountAmount","nvatbandcode","nprojecttypecode","nprojectmastercode","srfwdate","suserrolename","susername","primaryFieldKey","ACTIVE","DEACTIVE","YES","NO","index","findIndex","nquotationtestcode","test","onnetAmountEvent","selectedRecord23","ccc","selectedRecord1","str","count","ncost","nnoofsamples","ntotalamount","console","log","onDropProjectMasterclosureFile","attachedFiles","maxSize","actionType","onNumericInputChange","deleteProjectMasterclosureAttachment","file","approveQuotation","warn","formatMessage","id","onTabChange","tabProps","onDropTestFile","dataStateChange","dataResult","dataState","ConfirmDelete","deleteId","confirmMessage","confirm","reloadData","current","Object","values","length","closeModal","openFilter","showFilter","closeFilter","skip","take","settings","error","controlMap","Map","Instrument","createRef","searchFieldList","extractedColumnList","testArray","QuotationData","ndiscountamount","nvatamount","ntotalnetamount","TotalNetAmount","versionStatusCSS","activeIconCSS","APPROVED","mandatoryFields","findMandatoryFields","addId","has","get","ncontrolcode","editId","approveId","addQuotationTestId","updateQuotationTestId","grossQuotationeId","fieldsForGrid","editTestPriceParam","selectedMaster","filterParam","searchedData","onFilterSubmit","sclientcatname","sversionstatus","indexOf","sclientname","sprojecttypename","sprojectcode","squotationdate","sdiscountbandname","ndiscountpercentage","svatbandname","nvatpercentage","QuotationTest","deleteQuotation","edit","onEsignInputOnChange","SelectedClient","ClientCategory","Client","ProjectCode","ProjectType","QuotationType","QuotationTestList","DiscountBand","VATBand","previousProps","updateState","filterData","nfilterProjectType","filterProjectType","masterStatus","errorCode"],"mappings":"yxBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,GAAT,CAAcC,GAAd,CAAmBC,IAAnB,CAAyBC,GAAzB,CAA8BC,SAA9B,CAAyCC,SAAzC,KAA0D,iBAA1D,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,OAASC,UAAT,CAAqBC,WAArB,CAAkCC,UAAlC,CAA6CC,MAA7C,CAAoDC,WAApD,KAAuE,mCAAvE,CACA,OAASC,UAAT,CAAoBC,gBAApB,KAA4C,YAA5C,CACA,OACEC,WADF,CACeC,UADf,CAC2BC,uBAD3B,CACoDC,WADpD,CACiEC,YADjE,CAC+EC,gBAD/E,CACgGC,0BADhG,CAEEC,cAFF,CAEkBC,YAFlB,CAEgCC,kBAFhC,CAEoDC,0BAFpD,CAEgFC,8BAFhF,CAEgHC,cAFhH,CAGEC,6BAHF,CAGgCC,6BAHhC,CAG8DC,0BAH9D,KAIO,eAJP,CAMA,MAAOC,CAAAA,UAAP,KAAuB,oDAAvB,CACA,OAASC,iBAAT,KAAkC,8BAAlC,CACA,MAAOC,CAAAA,YAAP,KAAyB,oCAAzB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,yCAA9B,CACA,OAASC,cAAT,KAA+B,0BAA/B,CACA,MAAOC,CAAAA,aAAP,KAA0B,gDAA1B,CAEA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,OAASC,SAAT,CAAoBC,aAApB,CAAmCC,mBAAnC,CAAwDC,eAAxD,CAAyEC,oBAAzE,CAA+FC,wBAA/F,KACO,+BADP,CAEA,OAASC,YAAT,CAAuBC,YAAvB,KAA2C,6BAA3C,CACA,OAASC,OAAT,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,cAAP,KAA2B,0DAA3B,CACA;AACA,OAASC,IAAT,KAAqB,sBAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,gDAArB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,wCAA7B,CACA,MAAOC,CAAAA,wBAAP,KAAqC,4BAArC,CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAW,CACjC,MAAO,CAAEC,KAAK,CAAED,KAAK,CAACC,KAAf,CAAP,CACD,CAFD,C,GAIMC,CAAAA,S,sGACJ,mBAAYC,KAAZ,CAAmB,2CACjB,uBAAMA,KAAN,EADiB,MA+BnBC,gBA/BmB,CA+BA,SAACC,QAAD,CAAWC,SAAX,CAAyB,CAC1C,GAAQC,CAAAA,cAAR,CAA2B,MAAKP,KAAhC,CAAQO,cAAR,CACAA,cAAc,CAACF,QAAD,CAAd,CAA2BC,SAA3B,CACA,MAAKE,QAAL,CAAc,CAAED,cAAc,CAAdA,cAAF,CAAd,EACD,CAnCkB,OAwCnBE,eAxCmB,CAwCD,SAACC,KAAD,CAAQC,QAAR,CAAqB,CACrC,GAAMJ,CAAAA,cAAc,CAAG,MAAKP,KAAL,CAAWO,cAAX,EAA6B,EAApD,CACA,GAAIG,KAAK,CAACE,MAAN,CAAaC,IAAb,GAAsB,UAA1B,CAAsC,CACpCN,cAAc,CAACG,KAAK,CAACE,MAAN,CAAaE,IAAd,CAAd,CAAoCJ,KAAK,CAACE,MAAN,CAAaG,OAAb,GAAyB,IAAzB,CAAgC,CAAhC,CAAoC,CAAxE,CACD,CAFD,IAEO,IAAIL,KAAK,CAACE,MAAN,CAAaC,IAAb,GAAsB,OAA1B,CAAmC,CACxCN,cAAc,CAACG,KAAK,CAACE,MAAN,CAAaE,IAAd,CAAd,CAAoCH,QAApC,CACD,CAFM,IAEA,CACLJ,cAAc,CAACG,KAAK,CAACE,MAAN,CAAaE,IAAd,CAAd,CAAoCJ,KAAK,CAACE,MAAN,CAAaI,KAAjD,CACD,CACD,MAAKR,QAAL,CAAc,CAAED,cAAc,CAAdA,cAAF,CAAd,EACD,CAlDkB,OAqDnBU,WArDmB,CAqDL,SAACC,QAAD,CAAWC,OAAX,CAAuB,CAEnC,GAAIC,CAAAA,aAAa,CAAG,EAApB,CACA,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CACAD,aAAa,CAAC,UAAD,CAAb,CAA4B,MAAKjB,KAAL,CAAWF,KAAX,CAAiBqB,QAA7C,CAEA,GAAIC,CAAAA,SAAS,CAAG,CACdC,aAAa,CAAE,WADD,CAEdC,cAAc,CAAE,mBAFF,CAGdC,eAAe,CAAE,gBAHH,CAAhB,CAMA,GAAK,MAAKvB,KAAL,CAAWF,KAAX,CAAiB0B,SAAjB,GAA+B,QAAhC,EAA8C,MAAKxB,KAAL,CAAWF,KAAX,CAAiB2B,UAAjB,GAAgC,eAAlF,CAAoG,CAElGL,SAAS,CAAC,iBAAD,CAAT,CACE,MAAKpB,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAA5B,CAA8CC,cADhD,CAGAX,aAAa,CAAC,WAAD,CAAb,CAA6B,CAC3BW,cAAc,CAAE,MAAK5B,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAA5B,CAA8CC,cADnC,CAE3BC,SAAS,CAAE,MAAK7B,KAAL,CAAWF,KAAX,CAAiBqB,QAAjB,CAA0BW,eAFV,CAG3BC,aAAa,CAAE,MAAK/B,KAAL,CAAWF,KAAX,CAAiBkC,aAAjB,CAA+BD,aAA/B,GAAiDE,SAAjD,CAA6D,EAA7D,CAAkE,MAAKjC,KAAL,CAAWF,KAAX,CAAiBkC,aAAjB,CAA+BD,aAHrF,CAI3BG,kBAAkB,CAAE,MAAKrC,KAAL,CAAWO,cAAX,CAA0B8B,kBAA1B,GAAiDD,SAAjD,CAA6D,EAA7D,CAAkE,MAAKpC,KAAL,CAAWO,cAAX,CAA0B8B,kBAJrF,CAK3BC,eAAe,CAAE,MAAKtC,KAAL,CAAWO,cAAX,CAA0B+B,eAA1B,GAA8CF,SAA9C,CAA0D,EAA1D,CAA+D,MAAKpC,KAAL,CAAWO,cAAX,CAA0B+B,eAL/E,CAM3BC,YAAY,CAAE,MAAKvC,KAAL,CAAWO,cAAX,CAA0BgC,YAA1B,GAA2CH,SAA3C,CAAuD,EAAvD,CAA4D,MAAKpC,KAAL,CAAWO,cAAX,CAA0BgC,YANzE,CAO3BC,kBAAkB,CAAE7D,iBAAiB,CAAC8D,KAPX,CAQ3BC,iBAAiB,CAAE,MAAK1C,KAAL,CAAWO,cAAX,CAA0BmC,iBAA1B,GAAgDN,SAAhD,CAA4D,EAA5D,CAAiE,MAAKpC,KAAL,CAAWO,cAAX,CAA0BmC,iBARnF,CAA7B,CAYD,CAjBD,IAiBO,IAAK,MAAKvC,KAAL,CAAWF,KAAX,CAAiB0B,SAAjB,GAA+B,QAAhC,EAA8C,MAAKxB,KAAL,CAAWF,KAAX,CAAiB2B,UAAjB,GAAgC,eAAlF,CAAoG,CAEzGR,aAAa,CAAC,WAAD,CAAb,CAA6B,CAE3BY,SAAS,CAAE,MAAK7B,KAAL,CAAWF,KAAX,CAAiBqB,QAAjB,CAA0BW,eAFV,CAG3BC,aAAa,CAAE,MAAK/B,KAAL,CAAWF,KAAX,CAAiBkC,aAAjB,CAA+BD,aAA/B,GAAiDE,SAAjD,CAA6D,EAA7D,CAAkE,MAAKjC,KAAL,CAAWF,KAAX,CAAiBkC,aAAjB,CAA+BD,aAHrF,CAI3BG,kBAAkB,CAAE,MAAKrC,KAAL,CAAWO,cAAX,CAA0B8B,kBAA1B,GAAiDD,SAAjD,CAA6D,EAA7D,CAAkE,MAAKpC,KAAL,CAAWO,cAAX,CAA0B8B,kBAJrF,CAK3BC,eAAe,CAAE,MAAKtC,KAAL,CAAWO,cAAX,CAA0B+B,eAA1B,GAA8CF,SAA9C,CAA0D,EAA1D,CAA+D,MAAKpC,KAAL,CAAWO,cAAX,CAA0B+B,eAL/E,CAM3BC,YAAY,CAAE,MAAKvC,KAAL,CAAWO,cAAX,CAA0BgC,YAA1B,GAA2CH,SAA3C,CAAuD,EAAvD,CAA4D,MAAKpC,KAAL,CAAWO,cAAX,CAA0BgC,YANzE,CAO3BC,kBAAkB,CAAE7D,iBAAiB,CAAC8D,KAPX,CAQ3BC,iBAAiB,CAAE,MAAK1C,KAAL,CAAWO,cAAX,CAA0BmC,iBAA1B,GAAgDN,SAAhD,CAA4D,EAA5D,CAAiE,MAAKpC,KAAL,CAAWO,cAAX,CAA0BmC,iBARnF,CAA7B,CAYD,CAED,GAAI,CAAE,MAAKvC,KAAL,CAAWF,KAAX,CAAiB0B,SAAjB,GAA+B,QAAhC,EAA8C,MAAKxB,KAAL,CAAWF,KAAX,CAAiB0B,SAAjB,GAA+B,QAA9E,GAA6F,MAAKxB,KAAL,CAAWF,KAAX,CAAiB2B,UAAjB,GAAgC,eAAjI,CAAmJ,CAEjJR,aAAa,CAAC,WAAD,CAAb,CAA2B,gBAA3B,EAA+C,MAAKpB,KAAL,CAAWO,cAAX,CAA0B,gBAA1B,EAA8C,MAAKP,KAAL,CAAWO,cAAX,CAA0B,gBAA1B,EAA4CS,KAA1F,CAC3CrC,iBAAiB,CAACgE,EADtB,CAGAvB,aAAa,CAAC,WAAD,CAAb,CAA2B,aAA3B,EAA4C,MAAKpB,KAAL,CAAWO,cAAX,CAA0B,aAA1B,IAA2C,EAA3C,CAAgD,MAAKP,KAAL,CAAWO,cAAX,CAA0B,aAA1B,EAAyCS,KAAzF,CACxCrC,iBAAiB,CAACgE,EADtB,CAGAvB,aAAa,CAAC,WAAD,CAAb,CAA2B,oBAA3B,EAAmD,MAAKpB,KAAL,CAAWO,cAAX,CAA0B,oBAA1B,IAAkD,EAAlD,CAAuD,MAAKP,KAAL,CAAWO,cAAX,CAA0B,oBAA1B,EAAgDS,KAAvG,CAC/CrC,iBAAiB,CAACgE,EADtB,CAGAvB,aAAa,CAAC,WAAD,CAAb,CAA2B,kBAA3B,EAAiD,MAAKpB,KAAL,CAAWO,cAAX,CAA0B,kBAA1B,EAAgD,MAAKP,KAAL,CAAWO,cAAX,CAA0B,kBAA1B,EAA8CS,KAA9F,CAC7CrC,iBAAiB,CAACgE,EADtB,CAGAvB,aAAa,CAAC,WAAD,CAAb,CAA2B,oBAA3B,EAAmD,MAAKpB,KAAL,CAAWO,cAAX,CAA0B,oBAA1B,IAAkD,EAAlD,CAAwD,MAAKP,KAAL,CAAWO,cAAX,CAA0B,oBAA1B,EAAgDS,KAAxG,CAC/CrC,iBAAiB,CAACgE,EADtB,CAGF;AACJ;AACA;AACA;AACA,mCAEMvB,aAAa,CAAC,WAAD,CAAb,CAA2B,eAA3B,EAA8C,MAAKjB,KAAL,CAAWF,KAAX,CAAiBkC,aAAjB,CAA+B,eAA/B,IAAkD,EAAlD,CAAuD,MAAKhC,KAAL,CAAWF,KAAX,CAAiBkC,aAAjB,CAA+B,eAA/B,CAAvD,CACzCxD,iBAAiB,CAACgE,EADvB,CAGAvB,aAAa,CAAC,WAAD,CAAb,CAA2B,WAA3B,EAA0C,MAAKjB,KAAL,CAAWF,KAAX,CAAiBkC,aAAjB,CAA+B,WAA/B,IAA8C,EAA9C,CAAmD,MAAKhC,KAAL,CAAWF,KAAX,CAAiBkC,aAAjB,CAA+B,WAA/B,CAAnD,CACtCxD,iBAAiB,CAACgE,EADtB,CAIAvB,aAAa,CAAC,WAAD,CAAb,CAA2B,UAA3B,EAAyChC,eAAe,CAAC,MAAKY,KAAL,CAAWO,cAAX,CAA0B,UAA1B,CAAD,CAAwC,KAAxC,CAAxD,CACAa,aAAa,CAAC,WAAD,CAAb,CAA2B,gBAA3B,EAA+ChC,eAAe,CAAC,MAAKY,KAAL,CAAWO,cAAX,CAA0B,gBAA1B,CAAD,CAA8C,KAA9C,CAA9D,CAGD,CAEL,GAAK,MAAKJ,KAAL,CAAWF,KAAX,CAAiB0B,SAAjB,GAAgC,QAAjC,EAA+C,MAAKxB,KAAL,CAAWF,KAAX,CAAiB2B,UAAjB,GAAgC,UAAnF,CAAgG,CAE1FP,UAAU,CAAG,MAAKuB,mBAAL,CAAyB1B,QAAzB,CAAmCC,OAAnC,CAAb,CACH,CAEH,GAAK,MAAKhB,KAAL,CAAWF,KAAX,CAAiB0B,SAAjB,GAAgC,QAAjC,GAAgD,MAAKxB,KAAL,CAAWF,KAAX,CAAiB2B,UAAjB,GAAgC,WAAjC,EAAkD,MAAKzB,KAAL,CAAWF,KAAX,CAAiB2B,UAAjB,GAAgC,oBAAjI,CAAJ,CAA8J,CAE1JP,UAAU,CAAG,MAAKwB,wBAAL,CAA8B3B,QAA9B,CAAwCC,OAAxC,CAAb,CACH,CAED,GAAK,MAAKhB,KAAL,CAAWF,KAAX,CAAiB0B,SAAjB,GAAgC,QAAjC,EAA+C,MAAKxB,KAAL,CAAWF,KAAX,CAAiB2B,UAAjB,GAAgC,oBAAnF,CAA0G,CAExGP,UAAU,CAAG,MAAKyB,oBAAL,CAA0B5B,QAA1B,CAAoCC,OAApC,CAAb,CACD,CAEG,GAAI,CAAE,MAAKhB,KAAL,CAAWF,KAAX,CAAiB0B,SAAjB,GAA+B,QAAhC,EAA8C,MAAKxB,KAAL,CAAWF,KAAX,CAAiB0B,SAAjB,GAA+B,QAA9E,GAA6F,MAAKxB,KAAL,CAAWF,KAAX,CAAiB2B,UAAjB,GAAgC,eAAjI,CAAmJ,CAEjJP,UAAU,CAAG,CACX0B,QAAQ,CAAE,WADC,CAEXC,SAAS,CAAE,WAFA,CAGXC,SAAS,CAAE7B,aAHA,CAIXO,SAAS,CAAE,MAAKxB,KAAL,CAAWF,KAAX,CAAiB0B,SAJjB,CAKXT,QAAQ,CAARA,QALW,CAMXC,OAAO,CAAPA,OANW,CAOXI,SAAS,CAATA,SAPW,CAQX2B,SAAS,CAAE,MAAKA,SARL,CASXC,aAAa,CAAE,MAAKhD,KAAL,CAAWF,KAAX,CAAiBkD,aATrB,CAAb,CAWD,CAED,GAAMtB,CAAAA,UAAU,CAAG,MAAK1B,KAAL,CAAWF,KAAX,CAAiB4B,UAApC,CAEA,GAAI5C,SAAS,CAAC,MAAKkB,KAAL,CAAWF,KAAX,CAAiBmD,qBAAlB,CAAyC,MAAKjD,KAAL,CAAWF,KAAX,CAAiBqB,QAAjB,CAA0B+B,SAAnE,CAA8E,MAAKlD,KAAL,CAAWF,KAAX,CAAiBqD,YAA/F,CAAb,CAA2H,CACzH,GAAMC,CAAAA,UAAU,CAAG,CACjBC,QAAQ,CAAE1E,cADO,CAEjB2E,IAAI,CAAE,CACJC,SAAS,CAAE,IADP,CAEJC,UAAU,CAAE,CAAEtC,UAAU,CAAVA,UAAF,CAAcQ,UAAU,CAAVA,UAAd,CAFR,CAGJX,QAAQ,CAARA,QAHI,CAFW,CAAnB,CAQA,MAAKf,KAAL,CAAWtC,WAAX,CAAuB0F,UAAvB,EACD,CAVD,IAUO,CACL,MAAKpD,KAAL,CAAWxC,UAAX,CAAsB0D,UAAtB,CAAkCQ,UAAlC,CAA8C,WAA9C,EACD,CAEF,CApLkB,OAkNrBgB,wBAlNqB,CAkNM,SAAC3B,QAAD,CAAWC,OAAX,CAAuB,CAEhD,GAAMyC,CAAAA,sBAAsB,CAAG,CAAC,WAAY,MAAKzD,KAAL,CAAWF,KAAX,CAAiBqB,QAA9B,CACN,gBAAgB,MAAKnB,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBADtC,CAEN,iBAAiB,MAAK3B,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAA5B,CAA8CC,cAFzD,CAA/B,CAIC,GAAIR,CAAAA,SAAS,CAAGa,SAAhB,CACA,GAAIyB,CAAAA,kBAAkB,CAAGzB,SAAzB,CACA,GAAI0B,CAAAA,UAAU,CAAG,IAAjB,CAEA,GAAI,MAAK3D,KAAL,CAAWF,KAAX,CAAiB0B,SAAjB,GAA+B,QAAnC,CAA6C,CACzC;AACAkC,kBAAkB,CAAG,MAAK7D,KAAL,CAAW6D,kBAAhC,CACAC,UAAU,CAAG,MAAK3D,KAAL,CAAWF,KAAX,CAAiB6D,UAA9B,CACAvC,SAAS,CAAG,CAAEC,aAAa,CAAE,WAAjB,CAA8BC,cAAc,CAAE,mBAA9C,CAAmEC,eAAe,CAAE,gBAApF,CAAZ,CACAkC,sBAAsB,CAAC,eAAD,CAAtB,CAA0CG,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,MAAK9D,KAAL,CAAWF,KAAX,CAAiBM,cAAhC,CAAX,CAA1C,CACH,CAND,IAOK,CACD;AAEA,GAAI2D,CAAAA,SAAS,CAAG,EAAhB,CACA,MAAKlE,KAAL,CAAWO,cAAX,CAA0B,WAA1B,GACI,MAAKP,KAAL,CAAWO,cAAX,CAA0B,WAA1B,EAAuC4D,GAAvC,CAA2C,SAAAC,IAAI,CAAI,CAC/C,MAAOF,CAAAA,SAAS,CAACG,IAAV,CAAe,CACnBC,SAAS,CAAEF,IAAI,CAACpD,KADG,CAAf,CAAP,CAGH,CAJD,CADJ,CAOA4C,sBAAsB,CAAC,eAAD,CAAtB,CAA0CM,SAA1C,CAEH,CACD,GAAIN,sBAAsB,CAAC,eAAD,CAAtB,CAAwCW,cAAxC,CAAuD,eAAvD,CAAJ,CAA6E,CACzE,GAAIX,sBAAsB,CAAC,eAAD,CAAtB,CAAwC,eAAxC,IAA6D,EAAjE,CAAqE,CACjE,MAAOA,CAAAA,sBAAsB,CAAC,eAAD,CAAtB,CAAwC,eAAxC,CAAP,CACA,MAAOA,CAAAA,sBAAsB,CAAC,eAAD,CAAtB,CAAwC,eAAxC,CAAP,CACA,MAAOA,CAAAA,sBAAsB,CAAC,eAAD,CAAtB,CAAwC,OAAxC,CAAP,CACH,CACJ,CACF;AACC,GAAMvC,CAAAA,UAAU,CAAG,CACf0B,QAAQ,CAAE,MAAK5C,KAAL,CAAWF,KAAX,CAAiBoB,UAAjB,CAA4B0B,QADvB,CAEfC,SAAS,CAAE,eAFI,CAGfC,SAAS,CAAEW,sBAHI,CAIfjC,SAAS,CAAE,MAAKxB,KAAL,CAAWF,KAAX,CAAiB0B,SAJb,CAKfT,QAAQ,CAARA,QALe,CAKLC,OAAO,CAAPA,OALK,CAKII,SAAS,CAATA,SALJ,CAKe2B,SAAS,CAAE,MAAKA,SAL/B,CAMfC,aAAa,CAAE,MAAKhD,KAAL,CAAWF,KAAX,CAAiBkD,aANjB,CAOfW,UAAU,CAAVA,UAPe,CAOHD,kBAAkB,CAAlBA,kBAPG,CAAnB,CAUA,MAAOxC,CAAAA,UAAP,CACF,CApQoB,OAySnBmD,sBAzSmB,CAySM,SAACxD,KAAD,CAAQF,IAAR,CAAiB,CACxC,GAAMP,CAAAA,cAAc,CAAG,MAAKP,KAAL,CAAWO,cAAX,EAA6B,EAApD,CACAA,cAAc,CAACO,IAAD,CAAd,CAAuBE,KAAvB,CACA,MAAKR,QAAL,CAAc,CAAED,cAAc,CAAdA,cAAF,CAAd,EACD,CA7SkB,OAgUnBkE,aAhUmB,CAgUH,UAAM,CACpB,GAAMpD,CAAAA,UAAU,CAAG,CACjB4B,SAAS,CAAE,CACTyB,QAAQ,gCACH,MAAKvE,KAAL,CAAWF,KAAX,CAAiBqB,QADd,MAENqD,OAAO,CAAE,MAAK3E,KAAL,CAAWO,cAAX,CAA0B,eAA1B,CAFH,EADC,CAKTqE,QAAQ,CAAE,MAAK5E,KAAL,CAAWO,cAAX,CAA0B,eAA1B,CALD,CADM,CAQjBoD,UAAU,CAAE,MAAKxD,KAAL,CAAWF,KAAX,CAAiB0D,UARZ,CAAnB,CAUA,MAAKxD,KAAL,CAAWvC,uBAAX,CAAmCyD,UAAnC,CAA+C,WAA/C,EAED,CA7UkB,OAiVnBwD,eAjVmB,CAiVD,SAAC7B,SAAD,CAAY8B,iBAAZ,CAA+BnD,SAA/B,CAA0C2B,YAA1C,CAA2D,CAC3E,GAAM/B,CAAAA,SAAS,CAAG,CAChBC,aAAa,CAAE,eADC,CAEhBC,cAAc,CAAE,mBAFA,CAGhBC,eAAe,CAAE,gBAHD,CAIhBqD,eAAe,CAAED,iBAAiB,CAAC/C,cAJnB,CAKhBiD,QAAQ,CAAE,wBALM,CAMhBC,gBAAgB,CAAE,CAAEP,QAAQ,CAAE,MAAKvE,KAAL,CAAWF,KAAX,CAAiBqB,QAA7B,CANF,CAAlB,CASA,GAAMD,CAAAA,UAAU,CAAG,CACjB0B,QAAQ,CAAE,MAAK5C,KAAL,CAAWF,KAAX,CAAiBoB,UAAjB,CAA4B0B,QADrB,CAEjBC,SAAS,CAATA,SAFiB,CAGjBzB,SAAS,CAATA,SAHiB,CAIjB0B,SAAS,CAAE,CACTyB,QAAQ,CAAE,MAAKvE,KAAL,CAAWF,KAAX,CAAiBqB,QADlB,CAET4D,SAAS,CAAEJ,iBAFF,CAJM,CAQjBnD,SAAS,CAATA,SARiB,CASjBwB,aAAa,CAAE,MAAKhD,KAAL,CAAWF,KAAX,CAAiBkD,aATf,CAAnB,CAYA,GAAMtB,CAAAA,UAAU,CAAG,MAAK1B,KAAL,CAAWF,KAAX,CAAiB4B,UAApC,CAEA,GACE5C,SAAS,CACP,MAAKkB,KAAL,CAAWF,KAAX,CAAiBmD,qBADV,CAEP,MAAKjD,KAAL,CAAWF,KAAX,CAAiBqB,QAAjB,CAA0B+B,SAFnB,CAGPC,YAHO,CADX,CAME,CACA,GAAMC,CAAAA,UAAU,CAAG,CACjBC,QAAQ,CAAE1E,cADO,CAEjB2E,IAAI,CAAE,CACJC,SAAS,CAAE,IADP,CAEJC,UAAU,CAAE,CAAEtC,UAAU,CAAVA,UAAF,CAAcQ,UAAU,CAAVA,UAAd,CAFR,CAGJsD,SAAS,CAAE,IAHP,CAIJvD,UAAU,CAAE,eAJR,CAKJD,SAAS,CAATA,SALI,CAFW,CAAnB,CAUA,MAAKxB,KAAL,CAAWtC,WAAX,CAAuB0F,UAAvB,EACD,CAlBD,IAkBO,CACL,MAAKpD,KAAL,CAAWxC,UAAX,CAAsB0D,UAAtB,CAAkCQ,UAAlC,CAA8C,WAA9C,EACD,CACF,CA9XkB,OA43BnBuD,aA53BmB,CA43BH,SAACC,SAAD,CAAYC,SAAZ,CAAuBC,MAAvB,CAAkC,CAEhD,GAAMhF,CAAAA,cAAc,CAAG,MAAKP,KAAL,CAAWO,cAAX,EAA6B,EAApD,CACA,OAAQgF,MAAR,EACE,IAAK,EAAL,CAEA,GAAGD,SAAS,GAAG,gBAAf,CAAgC,CAC9B;AACA,GAAI/E,cAAc,CAACiF,cAAnB,CAAmC,CACjC,GAAIC,QAAQ,CAACJ,SAAS,CAACrE,KAAX,CAAR,GAA8ByE,QAAQ,CAAClF,cAAc,CAACiF,cAAf,CAA8BxE,KAA/B,CAA1C,CAAiF,CAC/E;AACA,MAAQT,CAAAA,cAAc,CAACmF,WAAvB,CACA,MAAQnF,CAAAA,cAAc,CAAC8B,kBAAvB,CACD,CACF,CAED9B,cAAc,CAAC+E,SAAD,CAAd,CAA4BD,SAA5B,CACA9E,cAAc,CAAC,gBAAD,CAAd,CAAmC8E,SAAS,CAACjB,IAAV,CAAe,gBAAf,CAAnC,CACA,MAAKjE,KAAL,CAAW5B,6BAAX,CAAyC,CAEvC0E,SAAS,CAAE,CACTyB,QAAQ,CAAE,MAAKvE,KAAL,CAAWF,KAAX,CAAiBqB,QADlB,CAETqE,YAAY,CAAEpF,cAAc,CAACiF,cAAf,CAA8BI,KAFnC,CAGTC,UAAU,CAAEtF,cAAc,CAACiF,cAAf,CAA8BxE,KAHjC,CAF4B,CAAzC,CAQGT,cARH,EASD,CAED,GAAG+E,SAAS,GAAG,aAAf,CAA6B,CAC3B;AACA,GAAI/E,cAAc,CAACmF,WAAnB,CAAgC,CAC9B,GAAID,QAAQ,CAACJ,SAAS,CAACrE,KAAX,CAAR,GAA8ByE,QAAQ,CAAClF,cAAc,CAACmF,WAAf,CAA2B1E,KAA5B,CAA1C,CAA8E,CAC5E;AACA,MAAQT,CAAAA,cAAc,CAAC8B,kBAAvB,CAED,CACF,CAED9B,cAAc,CAAC+E,SAAD,CAAd,CAA4BD,SAA5B,CACA9E,cAAc,CAAC,aAAD,CAAd,CAAgC8E,SAAS,CAACjB,IAAV,CAAe,aAAf,CAAhC,CACA,MAAKjE,KAAL,CAAW3B,6BAAX,CAAyC,CAEvCyE,SAAS,CAAE,CACTyB,QAAQ,CAAE,MAAKvE,KAAL,CAAWF,KAAX,CAAiBqB,QADlB,CAETqE,YAAY,CAAEpF,cAAc,CAACmF,WAAf,CAA2BE,KAFhC,CAGTC,UAAU,CAAEtF,cAAc,CAACmF,WAAf,CAA2B1E,KAH9B,CAF4B,CAAzC,CAQGT,cARH,EASD,CAEC,MAEF,IAAK,EAAL,CACE;AACA;AACA,GAAMuF,CAAAA,oBAAoB,CAAG,MAAK9F,KAAL,CAAW8F,oBAAX,EAAmC,EAAhE,CACAA,oBAAoB,CAACR,SAAD,CAApB,CAAkCD,SAAlC,CACA,MAAK7E,QAAL,CAAc,CAAEsF,oBAAoB,CAApBA,oBAAF,CAAd,EACA,MAEF,IAAK,EAAL,CAEEvF,cAAc,CAAC+E,SAAD,CAAd,CAA4BD,SAA5B,CACA,GAAGC,SAAS,GAAG,mBAAf,CAAmC,CAEjC,GAAMS,CAAAA,SAAS,CAAE,MAAK/F,KAAL,CAAWO,cAAX,CAA0BwF,SAA1B,GAAwC3D,SAAxC,CAAoD,IAApD,CAA2D,MAAKpC,KAAL,CAAWO,cAAX,CAA0BwF,SAAtG,CACAxF,cAAc,CAAC,gBAAD,CAAd,CAAiC,MAAKJ,KAAL,CAAWF,KAAX,CAAiB+F,oBAAjB,CAAsC,CAAtC,EAAyCC,kBAAzC,EAA+D1F,cAAc,CAAC2F,iBAAf,CAAiC9B,IAAjC,CAAsC+B,OAAtC,CAA8C,GAA7G,CAAjC,CACA5F,cAAc,CAAC,gBAAD,CAAd,CAAiC,MAAKJ,KAAL,CAAWF,KAAX,CAAiB+F,oBAAjB,CAAsC,CAAtC,EAAyCC,kBAAzC,EAA6D,MAAKjG,KAAL,CAAWO,cAAX,CAA0B6F,cAA1B,CAAyCL,SAAtG,CAAjC,CAGC,CAPH,IAOQ,IAAGT,SAAS,GAAG,cAAf,CAA8B,CAElC/E,cAAc,CAAC,WAAD,CAAd,CAA4B,MAAKJ,KAAL,CAAWF,KAAX,CAAiB+F,oBAAjB,CAAsC,CAAtC,EAAyCC,kBAAzC,EAA+D1F,cAAc,CAAC8F,YAAf,CAA4BjC,IAA5B,CAAiC+B,OAAjC,CAAyC,GAAxG,CAA5B,CACA5F,cAAc,CAAC,gBAAD,CAAd,CAAiC,MAAKJ,KAAL,CAAWF,KAAX,CAAiB+F,oBAAjB,CAAsC,CAAtC,EAAyCC,kBAAzC,EAA6D,MAAKjG,KAAL,CAAWO,cAAX,CAA0B6F,cAA1B,CAAyC,MAAKpG,KAAL,CAAWO,cAAX,CAA0BwF,SAAhI,CAAjC,CAGD,CAGH,MAAKvF,QAAL,CAAc,CAAED,cAAc,CAAdA,cAAF,CAAd,EACA,MAEA,IAAK,EAAL,CAEE,GAAG+E,SAAS,GAAG,kBAAf,CAAkC,CAChC,GAAI/E,cAAc,CAAC+F,gBAAnB,CAAqC,CACnC,GAAIb,QAAQ,CAACJ,SAAS,CAACrE,KAAX,CAAR,GAA8ByE,QAAQ,CAAClF,cAAc,CAAC+F,gBAAf,CAAgCtF,KAAjC,CAA1C,CAAmF,CACjF,MAAQT,CAAAA,cAAc,CAACgG,kBAAvB,CACA,MAAQhG,CAAAA,cAAc,CAAC2B,aAAvB,CACA,MAAQ3B,CAAAA,cAAc,CAACiG,QAAvB,CACA,MAAQjG,CAAAA,cAAc,CAACkG,aAAvB,CACA,MAAQlG,CAAAA,cAAc,CAACmG,SAAvB,CACD,CACF,CAEDnG,cAAc,CAAC+E,SAAD,CAAd,CAA4BD,SAA5B,CACA9E,cAAc,CAAC,kBAAD,CAAd,CAAqC8E,SAAS,CAACjB,IAAV,CAAe,kBAAf,CAArC,CACA,MAAKjE,KAAL,CAAWnC,0BAAX,CAAsC,CAEpCiF,SAAS,CAAE,CACTyB,QAAQ,CAAE,MAAKvE,KAAL,CAAWF,KAAX,CAAiBqB,QADlB,CAETqE,YAAY,CAAEpF,cAAc,CAAC+F,gBAAf,CAAgCV,KAFrC,CAGTC,UAAU,CAAEtF,cAAc,CAAC+F,gBAAf,CAAgCtF,KAHnC,CAFyB,CAAtC,CAQGT,cARH,EASD,CAED,GAAG+E,SAAS,GAAG,oBAAf,CAAoC,CAClC,GAAI/E,cAAc,CAACgG,kBAAnB,CAAuC,CACrC,GAAId,QAAQ,CAACJ,SAAS,CAACrE,KAAX,CAAR,GAA8ByE,QAAQ,CAAClF,cAAc,CAACgG,kBAAf,CAAkCvF,KAAnC,CAA1C,CAAqF,CACnF,MAAQT,CAAAA,cAAc,CAAC2B,aAAvB,CACA,MAAQ3B,CAAAA,cAAc,CAACiG,QAAvB,CACA,MAAQjG,CAAAA,cAAc,CAACkG,aAAvB,CACA,MAAQlG,CAAAA,cAAc,CAACmG,SAAvB,CACD,CACF,CAEDnG,cAAc,CAAC+E,SAAD,CAAd,CAA4BD,SAA5B,CACA9E,cAAc,CAAC,cAAD,CAAd,CAAiC8E,SAAS,CAACjB,IAAV,CAAe,cAAf,CAAjC,CACA,MAAKjE,KAAL,CAAW1B,0BAAX,CAAsC,CAEpCwE,SAAS,CAAE,CACTyB,QAAQ,CAAE,MAAKvE,KAAL,CAAWF,KAAX,CAAiBqB,QADlB,CAETqE,YAAY,CAAEpF,cAAc,CAACgG,kBAAf,CAAkCX,KAFvC,CAGTC,UAAU,CAAEtF,cAAc,CAACgG,kBAAf,CAAkCvF,KAHrC,CAFyB,CAAtC,CAQGT,cARH,EASD,CAED,MAEJ,QACE,MArIJ,CAuID,CAtgCkB,OA6hCnBE,eA7hCmB,CA6hCD,SAACC,KAAD,CAAQiG,eAAR,CAA4B,CAC5C,GAAMpG,CAAAA,cAAc,CAAG,MAAKP,KAAL,CAAWO,cAAX,EAA6B,EAApD,CAEA,GAAIG,KAAK,CAACE,MAAN,CAAaC,IAAb,GAAsB,UAA1B,CAAsC,CAClC,GAAIH,KAAK,CAACE,MAAN,CAAaE,IAAb,GAAsB,oBAA1B,CACIP,cAAc,CAACG,KAAK,CAACE,MAAN,CAAaE,IAAd,CAAd,CAAoCJ,KAAK,CAACE,MAAN,CAAaG,OAAb,GAAyB,IAAzB,CAAgCpC,iBAAiB,CAACiI,MAAlD,CAA2DjI,iBAAiB,CAACkI,QAAjH,CADJ,IAGItG,CAAAA,cAAc,CAACG,KAAK,CAACE,MAAN,CAAaE,IAAd,CAAd,CAAoCJ,KAAK,CAACE,MAAN,CAAaG,OAAb,GAAyB,IAAzB,CAAgCpC,iBAAiB,CAACmI,GAAlD,CAAwDnI,iBAAiB,CAACoI,EAA9G,CAEP,CAND,IAOK,CACD,GAAGJ,eAAe,GAAKjG,KAAK,CAACE,MAAN,CAAaE,IAAb,GAAsB,OAAtB,EAAiCJ,KAAK,CAACE,MAAN,CAAaE,IAAb,GAAsB,cAAvD,EAAyEJ,KAAK,CAACE,MAAN,CAAaE,IAAb,GAAsB,cAApG,CAAlB,CAAsI,CAClI,GAAMkG,CAAAA,KAAK,CAAGzG,cAAc,CAAC0G,SAAf,CAAyB,SAAA7C,IAAI,QAAEA,CAAAA,IAAI,CAAC8C,kBAAL,GAA4BP,eAA9B,EAA7B,CAAd,CACA,GAAI,kBAAkBQ,IAAlB,CAAuBzG,KAAK,CAACE,MAAN,CAAaI,KAApC,CAAJ,CAA+C,CAC3CT,cAAc,CAACyG,KAAD,CAAd,CAAsBtG,KAAK,CAACE,MAAN,CAAaE,IAAnC,EAA2CJ,KAAK,CAACE,MAAN,CAAaI,KAAxD,CACH,CACJ,CALD,IAMI,CACAT,cAAc,CAACG,KAAK,CAACE,MAAN,CAAaE,IAAd,CAAd,CAAoCJ,KAAK,CAACE,MAAN,CAAaI,KAAjD,CACH,CACJ,CACD,MAAKR,QAAL,CAAc,CAAED,cAAc,CAAdA,cAAF,CAAd,EACH,CAnjCoB,OAqjCrB6G,gBArjCqB,CAqjCF,SAACC,gBAAD,CAAkBC,GAAlB,CAA0B,CAC3C,GAAI/G,CAAAA,cAAc,CAAC,MAAKP,KAAL,CAAWO,cAA9B,CACA,GAAIgH,CAAAA,eAAe,CAAChH,cAAc,CAAC0G,SAAf,CAAyB,SAAC7C,IAAD,QAAWA,CAAAA,IAAI,CAAC8C,kBAAL,GAA4BI,GAA5B,CAAkClD,IAAlC,CAAyC,EAApD,EAAzB,CAApB,CACA,GAAIoD,CAAAA,GAAG,CAACjH,cAAc,CAACgH,eAAD,CAAtB,CACA,GAAIE,CAAAA,KAAK,CAAED,GAAG,CAACE,KAAJ,CAAYF,GAAG,CAACG,YAA3B,CACCpH,cAAc,CAACgH,eAAD,CAAd,gCAAoCC,GAApC,MAAwCI,YAAY,CAACH,KAArD,GACD,MAAKjH,QAAL,CAAcD,cAAd,EACFsH,OAAO,CAACC,GAAR,CAAYL,KAAZ,EAEC,CA9jCoB,OAkkCnBM,8BAlkCmB,CAkkCc,SAACC,aAAD,CAAgB1C,SAAhB,CAA2B2C,OAA3B,CAAuC,CAEtE,GAAI1H,CAAAA,cAAc,CAAG,MAAKP,KAAL,CAAWO,cAAX,EAA6B,EAAlD,CACAA,cAAc,CAAC+E,SAAD,CAAd,CAA4BjG,oBAAoB,CAACkB,cAAc,CAAC+E,SAAD,CAAf,CAA4B0C,aAA5B,CAA2CC,OAA3C,CAAhD,CACA,MAAKzH,QAAL,CAAc,CAAED,cAAc,CAAdA,cAAF,CAAkB2H,UAAU,CAAE,KAA9B,CAAd,EACD,CAvkCkB,OA0kCnBC,oBA1kCmB,CA0kCI,SAACnH,KAAD,CAAQF,IAAR,CAAiB,CAEtC+G,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsB9G,KAAtB,CAA6BF,IAA7B,EAEA,GAAMP,CAAAA,cAAc,CAAG,MAAKP,KAAL,CAAWO,cAAX,EAA6B,EAApD,CAEA,GAAIO,IAAI,GAAK,kBAAb,CAAiC,CAE/B,GAAI,WAAWqG,IAAX,CAAgBnG,KAAK,CAACJ,MAAN,CAAaI,KAA7B,GAAuCA,KAAK,CAACJ,MAAN,CAAaI,KAAb,GAAuB,EAAlE,CAAsE,CAEpET,cAAc,CAACO,IAAD,CAAd,CAAuBE,KAAK,CAACJ,MAAN,CAAaI,KAApC,CACD,CAHD,IAGO,CAELT,cAAc,CAACO,IAAD,CAAd,CAAuB,EAAvB,CACD,CAEF,CAVD,IAYK,CAEHP,cAAc,CAACO,IAAD,CAAd,CAAuBE,KAAvB,CACD,CACD,MAAKR,QAAL,CAAc,CAAED,cAAc,CAAdA,cAAF,CAAd,EAED,CAlmCkB,OAomCnB6H,oCApmCmB,CAomCoB,SAAC1H,KAAD,CAAQ2H,IAAR,CAAc/C,SAAd,CAA4B,CACjE,GAAI/E,CAAAA,cAAc,CAAG,MAAKP,KAAL,CAAWO,cAAX,EAA6B,EAAlD,CACAA,cAAc,CAAC+E,SAAD,CAAd,CAA4BhG,wBAAwB,CAACiB,cAAc,CAAC+E,SAAD,CAAf,CAA4B+C,IAA5B,CAApD,CAEA,MAAK7H,QAAL,CAAc,CACZD,cAAc,CAAdA,cADY,CACI2H,UAAU,CAAE,QAAS;AADzB,CAAd,EAGD,CA3mCkB,OA6mCnBI,gBA7mCmB,CA6mCA,SAACtF,SAAD,CAAY8B,iBAAZ,CAA+BnD,SAA/B,CAA0C2B,YAA1C,CAA2D,CAC5E,GAAIwB,iBAAiB,CAACtC,kBAAlB,GAAyC7D,iBAAiB,CAAC8D,KAA/D,CAAsE,CAEpE,GAAMlB,CAAAA,SAAS,CAAG,CAChBC,aAAa,CAAE,WADC,CAEhBC,cAAc,CAAE,mBAFA,CAGhBC,eAAe,CAAE,gBAHD,CAIhBqD,eAAe,CAAED,iBAAiB,CAAC/C,cAJnB,CAKhBiD,QAAQ,CAAE,wBALM,CAMhBC,gBAAgB,CAAE,CAAEP,QAAQ,CAAE,MAAKvE,KAAL,CAAWF,KAAX,CAAiBqB,QAA7B,CANF,CAAlB,CASA,GAAMD,CAAAA,UAAU,CAAG,CACjB0B,QAAQ,CAAE,MAAK5C,KAAL,CAAWF,KAAX,CAAiBoB,UAAjB,CAA4B0B,QADrB,CAEjBC,SAAS,CAATA,SAFiB,CAENzB,SAAS,CAATA,SAFM,CAGjB0B,SAAS,CAAE,CACT,WAAY,MAAK9C,KAAL,CAAWF,KAAX,CAAiBqB,QADpB,CAET,YAAawD,iBAFJ,CAHM,CAOjBnD,SAAS,CAATA,SAPiB,CAQjBwB,aAAa,CAAE,MAAKhD,KAAL,CAAWF,KAAX,CAAiBkD,aARf,CAAnB,CAWA,GAAMtB,CAAAA,UAAU,CAAG,MAAK1B,KAAL,CAAWF,KAAX,CAAiB4B,UAApC,CAEA,GAAI5C,SAAS,CAAC,MAAKkB,KAAL,CAAWF,KAAX,CAAiBmD,qBAAlB,CAAyC,MAAKjD,KAAL,CAAWF,KAAX,CAAiBqB,QAAjB,CAA0B+B,SAAnE,CAA8EC,YAA9E,CAAb,CAA0G,CACxG,GAAMC,CAAAA,UAAU,CAAG,CACjBC,QAAQ,CAAE1E,cADO,CAEjB2E,IAAI,CAAE,CACJC,SAAS,CAAE,IADP,CACaC,UAAU,CAAE,CAAEtC,UAAU,CAAVA,UAAF,CAAcQ,UAAU,CAAVA,UAAd,CADzB,CAEJsD,SAAS,CAAE,IAFP,CAEavD,UAAU,CAAE,eAFzB,CAE0CD,SAAS,CAATA,SAF1C,CAFW,CAAnB,CAOA,MAAKxB,KAAL,CAAWtC,WAAX,CAAuB0F,UAAvB,EACD,CATD,IAUK,CACH,MAAKpD,KAAL,CAAWxC,UAAX,CAAsB0D,UAAtB,CAAkCQ,UAAlC,CAA8C,WAA9C,EACD,CACF,CArCD,IAsCK,CACH5E,KAAK,CAACsL,IAAN,CAAW,MAAKpI,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,wBAAN,CAA9B,CAAX,EACD,CAEF,CAxpCkB,OA2pCnBC,WA3pCmB,CA2pCL,SAACC,QAAD,CAAc,CAC1B,GAAM/G,CAAAA,UAAU,CAAG+G,QAAQ,CAAC/G,UAA5B,CACA,GAAM2B,CAAAA,UAAU,CAAG,CACjBC,QAAQ,CAAE1E,cADO,CAEjB2E,IAAI,CAAE,CAAE7B,UAAU,CAAVA,UAAF,CAFW,CAAnB,CAIA,MAAKzB,KAAL,CAAWtC,WAAX,CAAuB0F,UAAvB,EACD,CAlqCkB,OAoqCnBqF,cApqCmB,CAoqCF,SAACZ,aAAD,CAAgB1C,SAAhB,CAA2B2C,OAA3B,CAAuC,CACtD,GAAI1H,CAAAA,cAAc,CAAG,MAAKP,KAAL,CAAWO,cAAX,EAA6B,EAAlD,CACAA,cAAc,CAAC+E,SAAD,CAAd,CAA4BjG,oBAAoB,CAC9CkB,cAAc,CAAC+E,SAAD,CADgC,CAE9C0C,aAF8C,CAG9CC,OAH8C,CAAhD,CAKA,MAAKzH,QAAL,CAAc,CAAED,cAAc,CAAdA,cAAF,CAAkB2H,UAAU,CAAE,KAA9B,CAAd,EACD,CA5qCkB,OAwrCnBW,eAxrCmB,CAwrCD,SAACnI,KAAD,CAAW,CAC3B,MAAKF,QAAL,CAAc,CACZsI,UAAU,CAAErJ,OAAO,CAAC,MAAKO,KAAL,CAAWyD,IAAZ,CAAkB/C,KAAK,CAACqI,SAAxB,CADP,CAEZlF,kBAAkB,CAAEnD,KAAK,CAACqI,SAFd,CAAd,EAID,CA7rCkB,OAgsCnBC,aAhsCmB,CAgsCH,SAAClE,iBAAD,CAAoBnD,SAApB,CAA+BsH,QAA/B,CAAyCrH,UAAzC,CAAwD,CACtE,MAAKsH,cAAL,CAAoBC,OAApB,CACE,eADF,CAEE,MAAKhJ,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,YAAN,CAA9B,CAFF,CAGE,MAAKtI,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,uBAAN,CAA9B,CAHF,CAIE,MAAKtI,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,QAAN,CAA9B,CAJF,CAKE,MAAKtI,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,YAAN,CAA9B,CALF,CAME,iBACE,OAAK5D,eAAL,CACEjD,UADF,CAEEkD,iBAFF,CAGEnD,SAHF,CAIEsH,QAJF,CADF,EANF,EAeD,CAhtCkB,OAitCnBG,UAjtCmB,CAitCN,UAAM,CACjB,MAAKlG,SAAL,CAAemG,OAAf,CAAuBrI,KAAvB,CAA+B,EAA/B,CAEA;AACA,GAAIsI,MAAM,CAACC,MAAP,CAAc,MAAKpJ,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAA1C,EAA6D0H,MAA7D,EAAuE,MAAKrJ,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAA5B,GAAkDM,SAA7H,CAAwI,CACtI,GAAIf,CAAAA,UAAU,CAAG,CACf4B,SAAS,CAAE,CAETyB,QAAQ,CAAE,MAAKvE,KAAL,CAAWF,KAAX,CAAiBqB,QAFlB,CADI,CAMfyB,QAAQ,CAAE,WANK,CAOfC,SAAS,CAAE,WAPI,CAAjB,CAUA,MAAK7C,KAAL,CAAWhC,kBAAX,CAA8BkD,UAA9B,EAED,CAbD,IAaO,CACLpE,KAAK,CAACsL,IAAN,CACE,MAAKpI,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAC5BC,EAAE,CAAE,6BADwB,CAA9B,CADF,EAKD,CACF,CAzuCkB,OA+uCnBgB,UA/uCmB,CA+uCN,UAAM,CACjB,GAAI/F,CAAAA,SAAS,CAAG,MAAKvD,KAAL,CAAWF,KAAX,CAAiByD,SAAjC,CAEA,GAAIyB,CAAAA,SAAS,CAAG,MAAKhF,KAAL,CAAWF,KAAX,CAAiBkF,SAAjC,CACA;AACA,GAAI5E,CAAAA,cAAc,CAAG,MAAKP,KAAL,CAAWO,cAAhC,CACA,GAAI,MAAKJ,KAAL,CAAWF,KAAX,CAAiByD,SAArB,CAAgC,CAC9BA,SAAS,CAAG,KAAZ,CACD,CAFD,IAEO,CACLyB,SAAS,CAAG,KAAZ,CACA5E,cAAc,CAAG,EAAjB,CACD,CAED,GAAMgD,CAAAA,UAAU,CAAG,CACjBC,QAAQ,CAAE1E,cADO,CAEjB2E,IAAI,CAAE,CACJ0B,SAAS,CAATA,SADI,CACO5E,cAAc,CAAdA,cADP,CAEJuD,UAAU,CAAE,IAFR,CAEcJ,SAAS,CAATA,SAFd,CAFW,CAAnB,CAOA,MAAKvD,KAAL,CAAWtC,WAAX,CAAuB0F,UAAvB,EACD,CApwCkB,OA21CnBmG,UA31CmB,CA21CN,UAAM,CACjB,GAAIC,CAAAA,UAAU,CAAG,CAAC,MAAKxJ,KAAL,CAAWF,KAAX,CAAiB0J,UAAnC,CACA,GAAMpG,CAAAA,UAAU,CAAG,CACjBC,QAAQ,CAAE1E,cADO,CAEjB2E,IAAI,CAAE,CAAEkG,UAAU,CAAVA,UAAF,CAFW,CAAnB,CAIA,MAAKxJ,KAAL,CAAWtC,WAAX,CAAuB0F,UAAvB,EACD,CAl2CkB,OAo2CnBqG,WAp2CmB,CAo2CL,UAAM,CAClB,GAAMrG,CAAAA,UAAU,CAAG,CACjBC,QAAQ,CAAE1E,cADO,CAEjB2E,IAAI,CAAE,CAAEkG,UAAU,CAAE,KAAd,CAFW,CAAnB,CAIA,MAAKxJ,KAAL,CAAWtC,WAAX,CAAuB0F,UAAvB,EACD,CA12CkB,CAEjB,GAAMM,CAAAA,mBAAkB,CAAG,CACzBgG,IAAI,CAAE,CADmB,CAEzBC,IAAI,CAAE,MAAK3J,KAAL,CAAWF,KAAX,CAAiB8J,QAAjB,CAA4BtE,QAAQ,CAAC,MAAKtF,KAAL,CAAWF,KAAX,CAAiB8J,QAAjB,CAA0B,EAA1B,CAAD,CAApC,CAAsE,CAFnD,CAA3B,CAGI,MAAK/J,KAAL,CAAa,CACfO,cAAc,CAAE,EADD,CAEfyJ,KAAK,CAAE,EAFQ,CAGf5G,qBAAqB,CAAE,EAHR,CAIf0B,iBAAiB,CAAE1C,SAJJ,CAKf6H,UAAU,CAAE,GAAIC,CAAAA,GAAJ,EALG,CAMfC,UAAU,CAAE,EANG,CAOftG,kBAAkB,CAAEA,mBAPL,CAAb,CAUJ,MAAKX,SAAL,CAAiB1G,KAAK,CAAC4N,SAAN,EAAjB,CACA,MAAKC,eAAL,CAAuB,CAAC,gBAAD,CAAmB,aAAnB,CAAkC,oBAAlC,CAAwD,iBAAxD,CAA2E,cAA3E,CAA2F,eAA3F,CAA4G,eAA5G,CAA6H,WAA7H,CAA0I,gBAA1I,CAA4J,cAA5J,CAA2K,mBAA3K,CAAvB,CACA,MAAKnB,cAAL,CAAsB,GAAIxJ,CAAAA,cAAJ,EAAtB,CAEA,MAAK4K,mBAAL,CAA2B,CAEzB,CAAE,UAAW,cAAb,CAA6B,YAAa,WAA1C,CAAuD,QAAS,OAAhE,CAFyB,CAGzB,CAAE,UAAW,qBAAb,CAAoC,YAAa,cAAjD,CAAiE,QAAS,OAA1E,CAHyB,CAIzB,CAAE,UAAW,cAAb,CAA6B,YAAa,OAA1C,CAAmD,QAAS,OAA5D,CAJyB,CAKzB,CAAE,UAAW,qBAAb,CAAoC,YAAa,cAAjD,CAAiE,QAAS,OAA1E,CALyB,CAMzB,CAAE,UAAW,oBAAb,CAAmC,YAAa,cAAhD,CAAgE,QAAS,OAAzE,CANyB,CAA3B,CAnBiB,aA6BlB,C,yDAyJD,6BAAoBpJ,QAApB,CAA8BC,OAA9B,CAAuC,iBACrC,GAAI8B,CAAAA,SAAS,CAAG,EAAhB,CACAA,SAAS,CAAC,UAAD,CAAT,CAAwB,KAAK9C,KAAL,CAAWF,KAAX,CAAiBqB,QAAzC,CACA;AACF;AAGE,GAAIiJ,CAAAA,SAAS,CAAG,EAAhB,CACAA,SAAS,CAAG,KAAKvK,KAAL,CAAWO,cAAX,CAA0B+D,SAA1B,CAAoCH,GAApC,CAAwC,SAAAC,IAAI,CAAI,CACxD,GAAIoG,CAAAA,aAAa,CAAG,EAApB,CAEAA,aAAa,CAAC,WAAD,CAAb,CAA6BpG,IAAI,CAACpD,KAAlC,CACAwJ,aAAa,CAAC,gBAAD,CAAb,CAAkC,MAAI,CAACrK,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAA5B,CAA8CC,cAAhF,CAGA,MAAOyI,CAAAA,aAAP,CACH,CARW,CAAZ,CASAvH,SAAS,CAAC,eAAD,CAAT,CAA6BsH,SAA7B,CAEA,GAAMlJ,CAAAA,UAAU,CAAG,CACf0B,QAAQ,CAAE,WADK,CAEfC,SAAS,CAAE,eAFI,CAGfC,SAAS,CAAEA,SAHI,CAIftB,SAAS,CAAE,KAAKxB,KAAL,CAAWF,KAAX,CAAiB0B,SAJb,CAIwBT,QAAQ,CAARA,QAJxB,CAIkCC,OAAO,CAAPA,OAJlC,CAAnB,CAMA,MAAOE,CAAAA,UAAP,CACH,C,oCAuDD,8BAAqBH,QAArB,CAA+BC,OAA/B,CAAwC,CAEtC,GAAIC,CAAAA,aAAa,CAAG,EAApB,CACAA,aAAa,CAAC,UAAD,CAAb,CAA4B,KAAKjB,KAAL,CAAWF,KAAX,CAAiBqB,QAA7C,CAIAF,aAAa,CAAC,gBAAD,CAAb,CAAkC,CAEhCW,cAAc,CAAE,KAAK5B,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAA5B,CAA8CC,cAF9B,CAGhCC,SAAS,CAAE,KAAK7B,KAAL,CAAWF,KAAX,CAAiBqB,QAAjB,CAA0BW,eAHL,CAIhCwI,eAAe,CAAC,KAAKzK,KAAL,CAAWO,cAAX,CAA0B6F,cAJV,CAKhCsE,UAAU,CAAC,KAAK1K,KAAL,CAAWO,cAAX,CAA0BwF,SALL,CAMhC4E,eAAe,CAAC,KAAK3K,KAAL,CAAWO,cAAX,CAA0BqK,cANV,CAOhC3E,kBAAkB,CAAG,KAAK9F,KAAL,CAAWF,KAAX,CAAiB+F,oBAAjB,CAAsC,CAAtC,EAAyCC,kBAP9B,CAAlC,CAYA7E,aAAa,CAAC,gBAAD,CAAb,CAAgC,mBAAhC,EAAuD,KAAKpB,KAAL,CAAWO,cAAX,CAA0B,mBAA1B,EAAiD,KAAKP,KAAL,CAAWO,cAAX,CAA0B,mBAA1B,EAA+CS,KAAhG,CACrDrC,iBAAiB,CAACgE,EADpB,CAGAvB,aAAa,CAAC,gBAAD,CAAb,CAAgC,cAAhC,EAAkD,KAAKpB,KAAL,CAAWO,cAAX,CAA0B,cAA1B,EAA4C,KAAKP,KAAL,CAAWO,cAAX,CAA0B,cAA1B,EAA0CS,KAAtF,CAChDrC,iBAAiB,CAACgE,EADpB,CAGA,GAAMtB,CAAAA,UAAU,CAAG,CACf0B,QAAQ,CAAE,WADK,CAEfC,SAAS,CAAE,gBAFI,CAGfC,SAAS,CAAE7B,aAHI,CAIfO,SAAS,CAAE,KAAKxB,KAAL,CAAWF,KAAX,CAAiB0B,SAJb,CAIwBT,QAAQ,CAARA,QAJxB,CAIkCC,OAAO,CAAPA,OAJlC,CAAnB,CAMA,MAAOE,CAAAA,UAAP,CACD,C,sBA2FC,iBAAS,iBAGP,GAAIwJ,CAAAA,gBAAgB,CAAG,mBAAvB,CACA,GAAIC,CAAAA,aAAa,CAAG,aAApB,CAGA,GAAI,KAAK3K,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAA5B,EAAiD,KAAK3B,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAA5B,CAA8CU,kBAA9C,GAAqE7D,iBAAiB,CAACoM,QAA5I,CAAsJ,CACpJF,gBAAgB,CAAG,iBAAnB,CACD,CAFD,IAGK,IAAI,KAAK1K,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAA5B,EAAiD,KAAK3B,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAA5B,CAA8CU,kBAA9C,GAAqE7D,iBAAiB,CAAC8D,KAA5I,CAAmJ,CACtJqI,aAAa,CAAG,EAAhB,CAED,CAED,GAAI,KAAK3K,KAAL,CAAWF,KAAX,CAAiBkF,SAArB,CAAgC,CAC9B,KAAK6F,eAAL,CAAuB,KAAKC,mBAAL,CAAyB,KAAK9K,KAAL,CAAWF,KAAX,CAAiB2B,UAA1C,CAAsD,KAAK5B,KAAL,CAAWO,cAAjE,CAAiF,KAAKJ,KAAL,CAAWF,KAAX,CAAiB0B,SAAlG,CAAvB,CACD,CAGD,GAAQL,CAAAA,QAAR,CAAqB,KAAKnB,KAAL,CAAWF,KAAhC,CAAQqB,QAAR,CACA,GAAM4J,CAAAA,KAAK,CAAG,KAAKlL,KAAL,CAAWiK,UAAX,CAAsBkB,GAAtB,CAA0B,cAA1B,GAA6C,KAAKnL,KAAL,CAAWiK,UAAX,CAAsBmB,GAAtB,CAA0B,cAA1B,EAA0CC,YAArG,CACA,GAAMC,CAAAA,MAAM,CAAG,KAAKtL,KAAL,CAAWiK,UAAX,CAAsBkB,GAAtB,CAA0B,eAA1B,GAA8C,KAAKnL,KAAL,CAAWiK,UAAX,CAAsBmB,GAAtB,CAA0B,eAA1B,EAA2CC,YAAxG,CACA,GAAMpC,CAAAA,QAAQ,CAAG,KAAKjJ,KAAL,CAAWiK,UAAX,CAAsBkB,GAAtB,CAA0B,iBAA1B,GAAgD,KAAKnL,KAAL,CAAWiK,UAAX,CAAsBmB,GAAtB,CAA0B,iBAA1B,EAA6CC,YAA9G,CACA,GAAME,CAAAA,SAAS,CAAG,KAAKvL,KAAL,CAAWiK,UAAX,CAAsBkB,GAAtB,CAA0B,kBAA1B,GAAiD,KAAKnL,KAAL,CAAWiK,UAAX,CAAsBmB,GAAtB,CAA0B,kBAA1B,EAA8CC,YAAjH,CAEA,GAAMG,CAAAA,kBAAkB,CAAG,KAAKxL,KAAL,CAAWiK,UAAX,CAAsBkB,GAAtB,CAA0B,kBAA1B,GAAiD,KAAKnL,KAAL,CAAWiK,UAAX,CAAsBmB,GAAtB,CAA0B,kBAA1B,EAA8CC,YAA1H,CACA,GAAMI,CAAAA,qBAAqB,CAAG,KAAKzL,KAAL,CAAWiK,UAAX,CAAsBkB,GAAtB,CAA0B,mBAA1B,GAAkD,KAAKnL,KAAL,CAAWiK,UAAX,CAAsBmB,GAAtB,CAA0B,mBAA1B,EAA+CC,YAA/H,CACA,GAAMK,CAAAA,iBAAiB,CAAG,KAAK1L,KAAL,CAAWiK,UAAX,CAAsBkB,GAAtB,CAA0B,gBAA1B,GAA+C,KAAKnL,KAAL,CAAWiK,UAAX,CAAsBmB,GAAtB,CAA0B,gBAA1B,EAA4CC,YAArH,CAGA,GAAMM,CAAAA,aAAa,CAAG,CAEpB,CAAE,UAAW,aAAb,CAA4B,YAAa,UAAzC,CAAqD,QAAS,OAA9D,CAFoB,CAGpB,CAAE,UAAW,UAAb,CAAyB,YAAa,iBAAtC,CAAyD,QAAS,OAAlE,CAHoB,CAAtB,CAOA,GAAMC,CAAAA,kBAAkB,CAAG,CAAChK,UAAU,CAAC,WAAZ,CAAyB,YAAY,QAArC,CAC3BC,UAAU,CAAC,KAAK1B,KAAL,CAAWF,KAAX,CAAiB4B,UADD,CACaP,QAAQ,CAAE,KAAKnB,KAAL,CAAWF,KAAX,CAAiBqB,QADxC,CAE3BgC,YAAY,CAACmI,qBAFc,CAA3B,CAIA,GAAQ3J,CAAAA,iBAAR,CAA8B,KAAK3B,KAAL,CAAWF,KAAX,CAAiB4B,UAA/C,CAAQC,iBAAR,CACA,GAAM+J,CAAAA,cAAc,CAAG,KAAK1L,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAAnD,CACA,GAAMgD,CAAAA,iBAAiB,CAAG,KAAK3E,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BC,iBAAtD,CACA,GAAMxD,CAAAA,cAAc,CAAG,KAAK6B,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BvD,cAAnD,CAEA,GAAMwN,CAAAA,WAAW,CAAG,CAClBtK,aAAa,CAAE,WADG,CAElBC,cAAc,CAAE,mBAFE,CAGlBC,eAAe,CAAE,gBAHC,CAIlBsD,QAAQ,CAAE,wBAJQ,CAKlBC,gBAAgB,CAAE,CAAEP,QAAQ,CAAE,KAAKvE,KAAL,CAAWF,KAAX,CAAiBqB,QAA7B,CALA,CAMlBO,UAAU,CAAE,KAAK1B,KAAL,CAAWF,KAAX,CAAiB4B,UANX,CAOlBwI,eAAe,CAAE,KAAKA,eAPJ,CAApB,CAUA,mBACE,qDACE,2BAAK,SAAS,CAAC,4DAAf,eAEE,oBAAC,GAAD,EAAK,SAAS,CAAE,IAAhB,eACE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eACE,oBAAC,UAAD,EACE,UAAU,CAAE,KAAKlK,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,eAAN,CAA9B,CADd,CAEE,UAAU,CAAE,KAAKtI,KAAL,CAAWF,KAAX,CAAiB4B,UAF/B,CAGE,QAAQ,CAAE,KAAK1B,KAAL,CAAWF,KAAX,CAAiBqB,QAH7B,CAIE,UAAU,CAAE,KAAKnB,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4BkK,YAA5B,EAA4C,KAAK5L,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4B3B,SAJtF,CAKE,eAAe,CAAE,yBAACkB,aAAD,QAAmB,CAAA,MAAI,CAACjB,KAAL,CAAWrC,YAAX,CAAwBsD,aAAxB,CAAuC,MAAI,CAACjB,KAAL,CAAWF,KAAX,CAAiBqB,QAAxD,CAAkE,MAAI,CAACnB,KAAL,CAAWF,KAAX,CAAiB4B,UAAnF,CAAnB,EALnB,CAME,cAAc,CAAEiD,iBANlB,CAOE,eAAe,CAAC,gBAPlB,CAQE,SAAS,CAAC,cARZ,CASE,UAAU,CAAC,aATb,CAUE,WAAW,CAAC,gBAVd,CAWE,gBAAgB,CAAE,KAAK3E,KAAL,CAAWpC,gBAX/B,CAYE,WAAW,CAAE+N,WAZf,CAaE,qBAAqB,CAAE,KAAK9L,KAAL,CAAWoD,qBAbpC,CAcE,KAAK,CAAE8H,KAdT,CAeE,SAAS,CAAE,KAAKhI,SAflB,CAgBE,UAAU,CAAE,KAAKkG,UACjB;AAjBF,CAkBE,SAAS,CAAE,2BAAM,CAAA,MAAI,CAACjJ,KAAL,CAAWjC,YAAX,CAAwB,QAAxB,CAAkCoD,QAAlC,CAA4C4J,KAA5C,CAAmDpG,iBAAnD,CAAN,EAlBb,CAmBE,cAAc,CAAE,KAnBlB,CAoBE,UAAU,CAAE,KApBd,CAqBE,aAAa,CAAE,KAAK3E,KAAL,CAAWF,KAAX,CAAiBkD,aArBlC,CAuBE,UAAU,CAAE,KAAKuG,UAvBnB,CAwBE,WAAW,CAAE,KAAKE,WAxBpB,CAyBE,cAAc,CAAE,KAAKoC,cAzBvB,CA0BE,cAAc,CAAE,KA1BlB,CA2BE,UAAU,CAAE,KAAK7L,KAAL,CAAWF,KAAX,CAAiB0J,UACtC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAtCc,EADF,CADF,cA4CE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,EACG7E,iBAAiB,cAChB,oBAAC,YAAD,EAAc,SAAS,CAAC,oBAAxB,eACE,oBAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,eACE,oBAAC,IAAD,CAAM,MAAN,mBAEE,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,oBAAtB,EACGA,iBAAiB,CAACmH,cADrB,CAFF,cAKE,oBAAC,IAAD,CAAM,QAAN,mBACE,2BAAK,SAAS,CAAC,yBAAf,eACE,0BAAI,SAAS,CAAC,+BAAd,eAEE,4BAAM,SAAS,4BAAsBpB,gBAAtB,gBAAf,eACE,yBAAG,KAAK,CAAEC,aAAV,EADF,CAEGhG,iBAAiB,CAACoH,cAFrB,CAFF,CADF,cAYE,2BAAK,SAAS,CAAC,UAAf,eAOE,oBAAC,GAAD,CAAK,IAAL,EAAU,SAAS,CAAC,kCAApB,CAAuD,IAAI,CAAC,cAA5D,CACE,MAAM,CAAE,KAAKlM,KAAL,CAAWoD,qBAAX,CAAiC+I,OAAjC,CAAyCb,MAAzC,IAAqD,CAAC,CADhE,CAEE,WAAU,KAAKnL,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,UAAN,CAA9B,CACV;AAHF,CAIE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACtI,KAAL,CAAWjC,YAAX,CAAwB,QAAxB,CAAiCoD,QAAjC,CAA2CgK,MAA3C,CAAmDxG,iBAAnD,CAAN,EAJX,eAKE,oBAAC,eAAD,EAAiB,IAAI,CAAE1H,WAAvB,EALF,CAPF,cAcE,oBAAC,GAAD,CAAK,IAAL,EAAU,SAAS,CAAC,oDAApB,CAAyE,IAAI,CAAC,gBAA9E,CACE,WAAU,KAAK+C,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,YAAN,CAA9B,CACV;AAFF,CAGE,MAAM,CAAE,KAAKzI,KAAL,CAAWoD,qBAAX,CAAiC+I,OAAjC,CAAyClD,QAAzC,IAAuD,CAAC,CAHlE,CAIE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACD,aAAL,CAAmBlE,iBAAnB,CAAsC,QAAtC,CAAgDmE,QAAhD,CAA0D,WAA1D,CAAN,EAJX,eAME,oBAAC,eAAD,EAAiB,IAAI,CAAE9L,UAAvB,EANF,CAdF,cAuBE,oBAAC,GAAD,CAAK,IAAL,EAAU,IAAI,CAAC,kBAAf,CAAkC,SAAS,CAAC,kCAA5C,CACE,MAAM,CAAE,KAAK6C,KAAL,CAAWoD,qBAAX,CAAiC+I,OAAjC,CAAyCZ,SAAzC,IAAwD,CAAC,CADnE,CAEE,WAAU,KAAKpL,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,aAAN,CAA9B,CACV;AAHF,CAIE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACH,gBAAL,CAAsB,WAAtB,CAAmCxD,iBAAnC,CAAsD,SAAtD,CAAiEyG,SAAjE,CAAN,EAJX,eAKE,oBAAC,eAAD,EAAiB,IAAI,CAAElO,UAAvB,EALF,CAvBF,cA8BE,oBAAC,GAAD,CAAK,IAAL,EAAU,IAAI,CAAC,gBAAf,CAAgC,SAAS,CAAC,kCAA1C,CACE,MAAM,CAAE,KAAK2C,KAAL,CAAWoD,qBAAX,CAAiC+I,OAAjC,CAAyCT,iBAAzC,IAAgE,CAAC,CAD3E,CAEE,WAAU,KAAKvL,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,oBAAN,CAA9B,CAFZ,CAGE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACtI,KAAL,CAAW7B,cAAX,CAA0B,QAA1B,CAAoCgD,QAApC,CAA8CoK,iBAA9C,CAAiE5G,iBAAjE,CAAN,EAHX,eAIE,oBAAC,eAAD,EAAiB,IAAI,CAAEvH,WAAvB,EAJF,CA9BF,CAZF,CADF,CALF,CADF,cA+DE,oBAAC,IAAD,CAAM,IAAN,EAAW,SAAS,CAAC,kBAArB,eACE,oBAAC,GAAD,mBAEE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAK4C,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,oBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAACmH,cAAjC,CAFF,CADF,CAFF,cASE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAK9L,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,YAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAACsH,WAAjC,CAFF,CADF,CATF,cAgBE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKjM,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,mBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAACzC,kBAAjC,CAFF,CADF,CAhBF,cAuBE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKlC,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,oBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAACxC,eAAjC,CAFF,CADF,CAvBF,cA8BE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKnC,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,iBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAACuH,gBAAjC,CAFF,CADF,CA9BF,cAqCE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKlM,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,iBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAACwH,YAAjC,KAFF,CADF,CArCF,cA4CE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKnM,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,kBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAAC5C,aAAjC,KAFF,CADF,CA5CF,cAmDE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAK/B,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,aAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAAC0B,QAAjC,CAFF,CADF,CAnDF,cA0DE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKrG,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,UAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAAC2B,aAAjC,CAFF,CADF,CA1DF,cAiEE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKtG,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,UAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAAC4B,SAAjC,CAFF,CADF,CAjEF,cAwEE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKvG,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,mBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAACyH,cAAjC,CAFF,CADF,CAxEF,cA+EE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKpM,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,iBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAACvC,YAAjC,CAFF,CADF,CA/EF,cAsFE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKpC,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,sBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAACpC,iBAAjC,CAFF,CADF,CAtFF,CADF,cAgGE,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACE,2BAAK,SAAS,CAAC,iBAAf,EADF,CAhGF,cAoGE,oBAAC,GAAD,mBAEE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACI,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKvC,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,kBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAAC0H,iBAAjC,CAFF,CADJ,CAFF,cASI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKrM,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,wBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAAC2H,mBAAjC,CAFF,CADF,CATJ,cAgBI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKtM,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,aAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAAC4H,YAAjC,CAFF,CADF,CAhBJ,cAuBI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKvM,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,mBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAAC6H,cAAjC,CAFF,CADF,CAvBJ,cA8BI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKxM,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,sBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAACmB,kBAAjC,CAFF,CADF,CA9BJ,cAqCI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAK9F,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,oBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAAC2F,eAAjC,KAFF,CADF,CArCJ,cA4CI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKtK,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,eAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAAC4F,UAAjC,KAFF,CADF,CA5CJ,cAmDI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,SAAD,mBACE,oBAAC,SAAD,MAAY,KAAKvK,KAAL,CAAWR,IAAX,CAAgB6I,aAAhB,CAA8B,CAAEC,EAAE,CAAE,oBAAN,CAA9B,CAAZ,CADF,cAEE,oBAAC,YAAD,MAAe3D,iBAAiB,CAAC6F,eAAjC,CAFF,CADF,CAnDJ,CApGF,cA+JE,oBAAC,IAAD,EAAM,SAAS,CAAC,kBAAhB,eACQ,oBAAC,GAAD,EAAK,SAAS,KAAd,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACI,2BAAK,SAAS,CAAC,4BAAf,eACA,oBAAC,GAAD,CAAK,IAAL,EAAU,IAAI,CAAC,UAAf,CAA0B,SAAS,CAAC,aAApC,CACQ,MAAM,CAAE,KAAK3K,KAAL,CAAWoD,qBAAX,CAAiC+I,OAAjC,CAAyCX,kBAAzC,IAAiE,CAAC,CADlF,CAEQ,OAAO,CAAE,yBAAI,CAAA,MAAI,CAACrL,KAAL,CAAW/B,0BAAX,CAAsC,UAAtC,CAAkD,QAAlD,CAA4D,MAAI,CAAC+B,KAAL,CAAWF,KAAX,CAAiB4B,UAA7E,CAAyF,MAAI,CAAC1B,KAAL,CAAWF,KAAX,CAAiBqB,QAA1G,CAAoHkK,kBAApH,CAAJ,EAFjB,eAIM,oBAAC,eAAD,EAAiB,IAAI,CAAElO,MAAvB,EAJN,kBAKI,oBAAC,gBAAD,EAAkB,EAAE,CAAC,UAArB,CAAgC,cAAc,CAAC,MAA/C,EALJ,CADA,cAQA,oBAAC,GAAD,CAAK,IAAL,EAAU,IAAI,CAAC,aAAf,CAA6B,SAAS,CAAC,aAAvC,CACQ,MAAM,CAAE,KAAK0C,KAAL,CAAWoD,qBAAX,CAAiC+I,OAAjC,CAAyCV,qBAAzC,IAAoE,CAAC,CADrF,CAEQ,OAAO,CAAE,yBAAI,CAAA,MAAI,CAACtL,KAAL,CAAW9B,8BAAX,gCAA8CuN,kBAA9C,MAAkE,aAAa,KAA/E,CAAsF/H,kBAAkB,CAACzB,SAAzG,GAAJ,EAFjB,eAII,oBAAC,eAAD,EAAiB,IAAI,CAAEhF,WAAvB,EAJJ,kBAKI,oBAAC,gBAAD,EAAkB,EAAE,CAAC,WAArB,CAAiC,cAAc,CAAC,OAAhD,EALJ,CARA,CADJ,CADJ,CADR,cAqBQ,oBAAC,GAAD,EAAK,SAAS,KAAd,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACI,oBAAC,QAAD,EACI,eAAe,CAAE,oBADrB,CAEI,IAAI,CAAE,KAAK+C,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4B+K,aAFtC,CAGI,UAAU,CAAE,KAAKzM,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,CAA4B+K,aAH5C,CAKI,SAAS,CAAE,KAAK5M,KAAL,CAAW6D,kBAL1B,CAMI,eAAe,CAAE,KAAKgF,eAN1B,CAOI,mBAAmB,CAAE,KAAKyB,mBAP9B,CAQI,UAAU,CAAE,KAAKtK,KAAL,CAAWiK,UAR3B,CASI,qBAAqB,CAAE,KAAKjK,KAAL,CAAWoD,qBATtC,CAUI,UAAU,CAAE,KAAKjD,KAAL,CAAWF,KAAX,CAAiBoB,UAVjC,CAWI,QAAQ,CAAE,KAAKlB,KAAL,CAAWF,KAAX,CAAiBqB,QAX/B,CAYI,WAAW,CAAE,KAAKnB,KAAL,CAAW9B,8BAZ5B,CAaI,SAAS,gCAAMuN,kBAAN,MAA0B,aAAa,QAAvC,CAAiD/H,kBAAkB,CAAC,KAAK7D,KAAL,CAAW6D,kBAA/E,EAbb,CAeI,YAAY,CAAE,KAAKgJ,eAfvB,CAgBI,WAAW,CAAE,CAAClL,SAAS,CAAC,QAAX,CAhBjB,CAiBI,SAAS,CAAE,eAjBf,CAkBI,SAAS,CAAI,2BAAM,CAAA,MAAI,CAACwD,SAAL,CAAe+F,KAAf,CAAN,EAlBjB,CAmBI,QAAQ,CAAE,IAnBd,CAoBI,UAAU,CAAE,YApBhB,CAqBI,gBAAgB,CAAE,IArBtB,CAsBI,iBAAiB,CAAE,KAtBvB,CAuBI,UAAU,CAAE,KAAK/K,KAAL,CAAWF,KAAX,CAAiB6D,UAvBjC,EADJ,CADJ,CArBR,CA/JF,CA/DF,CADF,CADgB,CAsRd,EAvRN,CA5CF,CAFF,CADF,CAgVG,KAAK3D,KAAL,CAAWF,KAAX,CAAiBkF,SAAjB,eACE,oBAAC,aAAD,EACA,IAAI,CAAE,KAAKhF,KAAL,CAAWF,KAAX,CAAiBkF,SADvB,CAEA,IAAI,CAAE,KAAKhF,KAAL,CAAWF,KAAX,CAAiB6M,IAAjB,GAAwB,IAAxB,CAA+B,IAA/B,CAAsC,IAF5C,CAGA,UAAU,CAAE,KAAKrD,UAHjB,CAIA,SAAS,CAAE,KAAKtJ,KAAL,CAAWF,KAAX,CAAiB0B,SAJ5B,CAKA,UAAU,CAAE,KAAKxB,KAAL,CAAWF,KAAX,CAAiBoB,UAL7B,CAMA,UAAU,CAAE,KAAKlB,KAAL,CAAWF,KAAX,CAAiB2B,UAN7B,CAOA,WAAW,CAAE,KAAKX,WAPlB,CAQA,KAAK,CAAE,KAAKd,KAAL,CAAWF,KAAX,CAAiByD,SARxB,CASA,aAAa,CAAE,KAAKe,aATpB,CAUA,cAAc,CAAE,KAAKzE,KAAL,CAAWO,cAAX,EAA6B,EAV7C,CAWA,eAAe,CAAE,KAAKyK,eAAL,EAAwB,EAXzC,CAYA,YAAY,CAAE,KAAK7K,KAAL,CAAWF,KAAX,CAAiByD,SAAjB,cACZ,oBAAC,KAAD,EACE,SAAS,CAAE,KAAKvD,KAAL,CAAWF,KAAX,CAAiB0B,SAD9B,CAEE,eAAe,CAAE,KAAKoL,oBAFxB,CAGE,UAAU,CAAE,KAAK5M,KAAL,CAAWF,KAAX,CAAiBoB,UAH/B,CAIE,cAAc,CAAE,KAAKrB,KAAL,CAAWO,cAAX,EAA6B,EAJ/C,EADY,CAOT,KAAKJ,KAAL,CAAWF,KAAX,CAAiB2B,UAAjB,GAAgC,eAAjC,cAEA,oBAAC,YAAD,EAEC,QAAQ,CAAE,KAAKzB,KAAL,CAAWF,KAAX,CAAiBqB,QAF5B,CAGC,cAAc,CAAE,KAAKtB,KAAL,CAAWO,cAAX,EAA6B,EAC7C;AAJD,CAKC,kBAAkB,CAAE,KAAKJ,KAAL,CAAWF,KAAX,CAAiBoC,kBALtC,CAMC,cAAc,CAAE,KAAKlC,KAAL,CAAWF,KAAX,CAAiB+M,cANlC,CAOC,cAAc,CAAE,KAAK7M,KAAL,CAAWF,KAAX,CAAiBgN,cAPlC,CAQC,MAAM,CAAE,KAAK9M,KAAL,CAAWF,KAAX,CAAiBiN,MAR1B,CASC,WAAW,CAAE,KAAK/M,KAAL,CAAWF,KAAX,CAAiBkN,WAT/B,CAUC,WAAW,CAAE,KAAKhN,KAAL,CAAWF,KAAX,CAAiBmN,WAV/B,CAWC,aAAa,CAAE,KAAKjN,KAAL,CAAWF,KAAX,CAAiBkC,aAXjC,CAYC,aAAa,CAAE,KAAKhC,KAAL,CAAWF,KAAX,CAAiBoN,aAZjC,CAaC,eAAe,CAAE,KAAK5M,eAbvB,CAcC,aAAa,CAAE,KAAK2E,aAdrB,CAeC,oBAAoB,CAAE,KAAK+C,oBAf5B,CAiBC,gBAAgB,CAAE,KAAK/H,gBAjBxB,EAFA,CAsBA,KAAKD,KAAL,CAAWF,KAAX,CAAiB2B,UAAjB,GAAgC,UAAhC,cAEE,oBAAC,gBAAD,EAEA,iBAAiB,CAAE,KAAKzB,KAAL,CAAWF,KAAX,CAAiBqN,iBAFpC,CAGA,cAAc,CAAE,KAAKtN,KAAL,CAAWO,cAAX,EAA6B,EAH7C,CAIA,aAAa,CAAE,KAAK6E,aAJpB,EAFF,CAUE,KAAKjF,KAAL,CAAWF,KAAX,CAAiB2B,UAAjB,GAAgC,WAAhC,cAEA,oBAAC,wBAAD,EACA,gBAAgB,CAAE,KAAKwF,gBADvB,CAEA,cAAc,CAAE,KAAKpH,KAAL,CAAWO,cAAX,EAA6B,EAF7C,CAGA,eAAe,CAAE,KAAKE,eAHtB,EAFA,cASD,oBAAC,iBAAD,EAEE,YAAY,CAAE,KAAKN,KAAL,CAAWF,KAAX,CAAiBsN,YAFjC,CAGE,OAAO,CAAE,KAAKpN,KAAL,CAAWF,KAAX,CAAiBuN,OAH5B,CAIE,cAAc,CAAE,KAAKxN,KAAL,CAAWO,cAAX,EAA6B,EAC7C;AALF,CAME,aAAa,CAAE,KAAK6E,aANtB,CAOE,eAAe,CAAE,KAAK3E,eAPxB,CAQE,cAAc,CAAE,KAAKT,KAAL,CAAWO,cAAX,CAA0B6F,cAA1B,GAA6ChE,SAA7C,CAAyD,IAAzD,CAA+D,KAAKpC,KAAL,CAAWO,cAAX,CAA0B6F,cAR3G,CASE,SAAS,CAAE,KAAKpG,KAAL,CAAWO,cAAX,CAA0BwF,SAA1B,GAAwC3D,SAAxC,CAAoD,IAApD,CAA2D,KAAKpC,KAAL,CAAWO,cAAX,CAA0BwF,SATlG,CAUE,oBAAoB,CAAE,KAAK5F,KAAL,CAAWF,KAAX,CAAiB+F,oBAAjB,GAA0C5D,SAA1C,CAAsD,IAAtD,CAA6D,KAAKjC,KAAL,CAAWF,KAAX,CAAiB+F,oBAVtG,CAWE,cAAc,CAAE,KAAKhG,KAAL,CAAWO,cAAX,CAA0BqK,cAA1B,GAA6CxI,SAA7C,CAAyD,KAAKpC,KAAL,CAAWO,cAAX,CAA0BqK,cAAnF,CAAkG,KAAKzK,KAAL,CAAWF,KAAX,CAAiB+F,oBAAjB,CAAsC,CAAtC,EAAyCC,kBAX7J,EA5DL,EAjVL,CADF,CAkaD,C,mCAED,6BAAoBrE,UAApB,CAAgCrB,cAAhC,CAAgDoB,SAAhD,CAA2D,CACzD,GAAIqJ,CAAAA,eAAe,CAAG,EAAtB,CACA,GAAIpJ,UAAU,GAAK,eAAnB,CAAoC,CAElCoJ,eAAe,CAAG,CAChB,CAAE,UAAW,oBAAb,CAAmC,YAAa,gBAAhD,CAAkE,QAAS,OAA3E,CAAoF,YAAa,IAAjG,CAAuG,iBAAkB,YAAzH,CAAuI,cAAe,WAAtJ,CADgB,CAEhB,CAAE,UAAW,YAAb,CAA2B,YAAa,aAAxC,CAAuD,QAAS,OAAhE,CAAyE,YAAa,IAAtF,CAA4F,iBAAkB,YAA9G,CAA4H,cAAe,SAA3I,CAFgB,CAGhB,CAAE,UAAW,mBAAb,CAAkC,YAAa,oBAA/C,CAAqE,QAAS,OAA9E,CAAuF,YAAa,IAApG,CAA0G,iBAAkB,WAA5H,CAAyI,cAAe,SAAxJ,CAHgB,CAIhB,CAAE,UAAW,oBAAb,CAAmC,YAAa,iBAAhD,CAAmE,QAAS,OAA5E,CAAqF,YAAa,IAAlG,CAAwG,iBAAkB,WAA1H,CAAuI,cAAe,WAAtJ,CAJgB,CAKhB,CAAE,UAAW,mBAAb,CAAkC,YAAa,oBAA/C,CAAqE,QAAS,OAA9E,CAAuF,YAAa,IAApG,CAA0G,iBAAkB,YAA5H,CAA0I,cAAe,WAAzJ,CALgB,CAMhB,CAAE,UAAW,iBAAb,CAAgC,YAAa,kBAA7C,CAAiE,QAAS,OAA1E,CAAmF,YAAa,IAAhG,CAAsG,iBAAkB,YAAxH,CAAsI,cAAe,WAArJ,CANgB,CAOjB;AACC,CAAE,UAAW,kBAAb,CAAiC,YAAa,eAA9C,CAA+D,QAAS,OAAxE,CAAiF,YAAa,IAA9F,CAAoG,iBAAkB,WAAtH,CAAmI,cAAe,WAAlJ,CARgB,CAShB,CAAE,UAAW,aAAb,CAA4B,YAAa,UAAzC,CAAqD,QAAS,OAA9D,CAAuE,YAAa,IAApF,CAA0F,iBAAkB,YAA5G,CAA0H,cAAe,SAAzI,CATgB,CAUhB,CAAE,UAAW,UAAb,CAAyB,YAAa,eAAtC,CAAuD,QAAS,OAAhE,CAAyE,YAAa,IAAtF,CAA4F,iBAAkB,WAA9G,CAA2H,cAAe,WAA1I,CAVgB,CAWhB,CAAE,UAAW,UAAb,CAAyB,YAAa,WAAtC,CAAmD,QAAS,OAA5D,CAAqE,YAAa,IAAlF,CAAwF,iBAAkB,WAA1G,CAAuH,cAAe,SAAtI,CAXgB,CAYhB,CAAE,UAAW,mBAAb,CAAkC,YAAa,gBAA/C,CAAiE,QAAS,OAA1E,CAAmF,YAAa,IAAhG,CAAsG,iBAAkB,YAAxH,CAAsI,cAAe,WAArJ,CAZgB,CAAlB,CAgBA;AACA,MAAOA,CAAAA,eAAP,CAED,CArBD,IAsBK,CACH,MAAO,EAAP,CACD,CACF,C,kCA4YD,4BAAmByC,aAAnB,CAAkC,CAChC,GAAIC,CAAAA,WAAW,CAAG,KAAlB,CACA,gBASI,KAAK1N,KATT,CACEO,cADF,aACEA,cADF,CAEEuF,oBAFF,aAEEA,oBAFF,CAGE1C,qBAHF,aAGEA,qBAHF,CAIE6G,UAJF,aAIEA,UAJF,CAKE0D,UALF,aAKEA,UALF,CAMEC,kBANF,aAMEA,kBANF,CAOEC,iBAPF,aAOEA,iBAPF,CAWA,GAAI,KAAK1N,KAAL,CAAWF,KAAX,CAAiBM,cAAjB,GAAoCkN,aAAa,CAACxN,KAAd,CAAoBM,cAA5D,CAA4E,CAC1EA,cAAc,CAAG,KAAKJ,KAAL,CAAWF,KAAX,CAAiBM,cAAlC,CACAmN,WAAW,CAAG,IAAd,CACA,KAAKlN,QAAL,CAAc,CAAED,cAAc,CAAdA,cAAF,CAAd,EACD,CACD,GAAI,KAAKJ,KAAL,CAAWF,KAAX,CAAiBqB,QAAjB,CAA0B+B,SAA1B,GAAwCoK,aAAa,CAACxN,KAAd,CAAoBqB,QAApB,CAA6B+B,SAAzE,CAAoF,CAClFD,qBAAqB,CAAG,EAAxB,CACA,GAAI,KAAKjD,KAAL,CAAWF,KAAX,CAAiBmD,qBAArB,CAA4C,CAC1C,KAAKjD,KAAL,CAAWF,KAAX,CAAiBmD,qBAAjB,CAAuC,KAAKjD,KAAL,CAAWF,KAAX,CAAiBqB,QAAjB,CAA0B+B,SAAjE,GAEEiG,MAAM,CAACC,MAAP,CACE,KAAKpJ,KAAL,CAAWF,KAAX,CAAiBmD,qBAAjB,CACA,KAAKjD,KAAL,CAAWF,KAAX,CAAiBqB,QAAjB,CAA0B+B,SAD1B,CADF,EAIEc,GAJF,CAIM,SAACC,IAAD,QAAUhB,CAAAA,qBAAqB,CAACiB,IAAtB,CAA2BD,IAAI,CAACiH,YAAhC,CAAV,EAJN,CAFF,CAOD,CACDpB,UAAU,CAAG/K,aAAa,CACxB,KAAKiB,KAAL,CAAWF,KAAX,CAAiBmD,qBADO,CAExB,KAAKjD,KAAL,CAAWF,KAAX,CAAiBqB,QAAjB,CAA0B+B,SAFF,CAA1B,CAIA,KAAK7C,QAAL,CAAc,CAAEyJ,UAAU,CAAVA,UAAF,CAAc7G,qBAAqB,CAArBA,qBAAd,CAAd,EACA;AACD,CAED,GAAIkD,CAAAA,gBAAgB,CAAG,KAAKtG,KAAL,CAAW4N,kBAAX,EAAiC,EAAxD,CAEA,GAAI,KAAKzN,KAAL,CAAWF,KAAX,CAAiB4B,UAAjB,GAAgC4L,aAAa,CAACxN,KAAd,CAAoB4B,UAAxD,CAAoE,CAClE;AAEA;AACA;AAEA;AACA;AACA;AACH;AACG;AACA,KAAKrB,QAAL,CAAc,CAEXD,cAAc,CAAdA,cAFW,CAAd,EAMAmN,WAAW,CAAG,IAAd,CACA,KAAKlN,QAAL,CAAc,CAAEmN,UAAU,CAAVA,UAAF,CAAd,EACD,CAED;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AAED,C,0CA1iCD,kCAAgCxN,KAAhC,CAAuCH,KAAvC,CAA8C,CAC5C,GAAIG,KAAK,CAACF,KAAN,CAAY6N,YAAZ,GAA6B,EAAjC,CAAqC,CACnC,GAAI3N,KAAK,CAACF,KAAN,CAAY8N,SAAZ,GAA0B,GAA1B,EAAiC5N,KAAK,CAACF,KAAN,CAAY8N,SAAZ,GAA0B,GAA/D,CAAoE,CAClE9Q,KAAK,CAACsL,IAAN,CAAWpI,KAAK,CAACF,KAAN,CAAY6N,YAAvB,EACA3N,KAAK,CAACF,KAAN,CAAY6N,YAAZ,CAA2B,EAA3B,CACD,CACF,CACD,GAAI3N,KAAK,CAACF,KAAN,CAAY+J,KAAZ,GAAsBhK,KAAK,CAACgK,KAAhC,CAAuC,CACrC/M,KAAK,CAAC+M,KAAN,CAAY7J,KAAK,CAACF,KAAN,CAAY+J,KAAxB,EACA7J,KAAK,CAACF,KAAN,CAAY+J,KAAZ,CAAoB,EAApB,CACD,CACD,GAAI7J,KAAK,CAACF,KAAN,CAAYM,cAAZ,GAA+B6B,SAAnC,CAA8C,CAC5C,MAAO,CAAE7B,cAAc,CAAE,EAAlB,CAAP,CACD,CACD,MAAO,KAAP,CACD,C,uBA/TqB9D,S,EAg3CxB,cAAeO,CAAAA,OAAO,CAAC+C,eAAD,CAAkB,CACtCrC,WAAW,CAAXA,WADsC,CAEtCC,UAAU,CAAVA,UAFsC,CAGtCI,gBAAgB,CAAhBA,gBAHsC,CAItCF,WAAW,CAAXA,WAJsC,CAKtCD,uBAAuB,CAAvBA,uBALsC,CAMtCE,YAAY,CAAZA,YANsC,CAMzBE,0BAA0B,CAA1BA,0BANyB,CAOtCC,cAAc,CAAdA,cAPsC,CAOtBC,YAAY,CAAZA,YAPsB,CAORC,kBAAkB,CAAlBA,kBAPQ,CAOYC,0BAA0B,CAA1BA,0BAPZ,CAOwCC,8BAA8B,CAA9BA,8BAPxC,CAQrCC,cAAc,CAAdA,cARqC,CAQtBC,6BAA6B,CAA7BA,6BARsB,CAQQC,6BAA6B,CAA7BA,6BARR,CAQsCC,0BAA0B,CAA1BA,0BARtC,CAAlB,CAAP,CASZjB,UAAU,CAAC0C,SAAD,CATE,CAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from \"react-bootstrap\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTrashAlt, faPencilAlt, faThumbsUp,faPlus,faUserTimes } from '@fortawesome/free-solid-svg-icons';\r\nimport { injectIntl,FormattedMessage } from \"react-intl\";\r\nimport {\r\n  callService, crudMaster, validateEsignCredential, updateStore, getQuotation, filterColumnData,getProjectTypeComboService,\r\n  viewAttachment, addQuotation, getreloadQuotation, getQuotationAddTestService, getQuotationPricingEditService, GrossQuotation,\r\n  getClientCategoryComboService,getQuotaionClientComboService,getProjectCodeComboService \r\n} from \"../../actions\";\r\n\r\nimport ListMaster from \"../../components/list-master/list-master.component\";\r\nimport { transactionStatus } from \"../../components/Enumeration\";\r\nimport AddQuotation from \"../../pages/quotation/AddQuotation\";\r\nimport AddGrossQuotation from \"../../pages/quotation/AddGrossQuotation\";\r\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\r\nimport SlideOutModal from \"../../components/slide-out-modal/SlideOutModal\";\r\n\r\nimport Esign from \"../audittrail/Esign\";\r\nimport { showEsign, getControlMap, constructOptionList, formatInputDate, onDropAttachFileList, deleteAttachmentDropZone }\r\n  from \"../../components/CommonScript\";\r\nimport { ReadOnlyText, ContentPanel } from \"../../components/App.styles\";\r\nimport { process } from \"@progress/kendo-data-query\";\r\nimport ConfirmMessage from \"../../components/confirm-alert/confirm-message.component\";\r\n// import ProjectMasterFilter from './ProjectMasterFilter';\r\nimport { intl } from \"../../components/App\";\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport AddQuotationTest from \"../../pages/quotation/AddQuotationTest\";\r\nimport EditQuotationTestPricing from \"./EditQuotationTestPricing\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { Login: state.Login };\r\n};\r\n\r\nclass Quotation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const quotationDataState = {\r\n      skip: 0,\r\n      take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n  };    this.state = {\r\n      selectedRecord: {},\r\n      error: \"\",\r\n      userRoleControlRights: [],\r\n      selectedQuotation: undefined,\r\n      controlMap: new Map(),\r\n      Instrument: [],\r\n      quotationDataState: quotationDataState,\r\n\r\n    };\r\n    this.searchRef = React.createRef();\r\n    this.searchFieldList = [\"sclientcatname\", \"sclientname\", \"sclientsiteaddress\", \"sinvoiceaddress\", \"sprojectcode\", \"sprojecttitle\", \"suserrolename\", \"susername\", \"squotationdate\", \"sdescription\",\"sdeviationremarks\"]\r\n    this.confirmMessage = new ConfirmMessage();\r\n\r\n    this.extractedColumnList = [\r\n\r\n      { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestname\", \"width\": \"200px\" },\r\n      { \"idsName\": \"IDS_TESTDESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\" },\r\n      { \"idsName\": \"IDS_TESTCOST\", \"dataField\": \"ncost\", \"width\": \"200px\" },\r\n      { \"idsName\": \"IDS_NUMBEROFSAMPLES\", \"dataField\": \"nnoofsamples\", \"width\": \"100px\" },\r\n      { \"idsName\": \"IDS_TOTALNETAMOUNT\", \"dataField\": \"ntotalamount\", \"width\": \"200px\" }\r\n\r\n\r\n  ]\r\n  }\r\n\r\n  handleDateChange = (dateName, dateValue) => {\r\n    const { selectedRecord } = this.state;\r\n    selectedRecord[dateName] = dateValue;\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n\r\n\r\n  onInputOnChange = (event, optional) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    if (event.target.type === \"checkbox\") {\r\n      selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n    } else if (event.target.type === 'radio') {\r\n      selectedRecord[event.target.name] = optional;\r\n    } else {\r\n      selectedRecord[event.target.name] = event.target.value;\r\n    }\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n  onSaveClick = (saveType, formRef) => {\r\n\r\n    let quotationData = [];\r\n    let inputParam = {};\r\n    quotationData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n    let postParam = {\r\n      inputListName: \"Quotation\",\r\n      selectedObject: \"SelectedQuotation\",\r\n      primaryKeyField: \"nquotationcode\",\r\n    };\r\n\r\n    if ((this.props.Login.operation === \"update\") && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      postParam[\"primaryKeyValue\"] =\r\n        this.props.Login.masterData.SelectedQuotation.nquotationcode;\r\n\r\n      quotationData[\"quotation\"] = {\r\n        nquotationcode: this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n        nsitecode: this.props.Login.userInfo.nmastersitecode,\r\n        sprojecttitle: this.props.Login.ProjectMaster.sprojecttitle === undefined ? \"\" : this.props.Login.ProjectMaster.sprojecttitle, \r\n        sclientsiteaddress: this.state.selectedRecord.sclientsiteaddress === undefined ? \"\" : this.state.selectedRecord.sclientsiteaddress, \r\n        sinvoiceaddress: this.state.selectedRecord.sinvoiceaddress === undefined ? \"\" : this.state.selectedRecord.sinvoiceaddress, \r\n        sdescription: this.state.selectedRecord.sdescription === undefined ? \"\" : this.state.selectedRecord.sdescription, \r\n        ntransactionstatus: transactionStatus.DRAFT,\r\n        sdeviationremarks: this.state.selectedRecord.sdeviationremarks === undefined ? \"\" : this.state.selectedRecord.sdeviationremarks,\r\n\r\n      };\r\n\r\n    } else if ((this.props.Login.operation === \"create\") && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      quotationData[\"quotation\"] = {  \r\n\r\n        nsitecode: this.props.Login.userInfo.nmastersitecode,\r\n        sprojecttitle: this.props.Login.ProjectMaster.sprojecttitle === undefined ? \"\" : this.props.Login.ProjectMaster.sprojecttitle, \r\n        sclientsiteaddress: this.state.selectedRecord.sclientsiteaddress === undefined ? \"\" : this.state.selectedRecord.sclientsiteaddress, \r\n        sinvoiceaddress: this.state.selectedRecord.sinvoiceaddress === undefined ? \"\" : this.state.selectedRecord.sinvoiceaddress, \r\n        sdescription: this.state.selectedRecord.sdescription === undefined ? \"\" : this.state.selectedRecord.sdescription, \r\n        ntransactionstatus: transactionStatus.DRAFT,\r\n        sdeviationremarks: this.state.selectedRecord.sdeviationremarks === undefined ? \"\" : this.state.selectedRecord.sdeviationremarks,\r\n      };\r\n\r\n     \r\n    }\r\n\r\n    if (((this.props.Login.operation === \"create\") || (this.props.Login.operation === \"update\")) && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      quotationData[\"quotation\"][\"nclientcatcode\"] = this.state.selectedRecord[\"nclientcatcode\"] ? this.state.selectedRecord[\"nclientcatcode\"].value\r\n        : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nclientcode\"] = this.state.selectedRecord[\"nclientcode\"]!==\"\" ? this.state.selectedRecord[\"nclientcode\"].value\r\n        : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nquotationtypecode\"] = this.state.selectedRecord[\"nquotationtypecode\"]!==\"\" ? this.state.selectedRecord[\"nquotationtypecode\"].value\r\n        : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nprojecttypecode\"] = this.state.selectedRecord[\"nprojecttypecode\"] ? this.state.selectedRecord[\"nprojecttypecode\"].value\r\n        : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nprojectmastercode\"] = this.state.selectedRecord[\"nprojectmastercode\"]!==\"\"  ? this.state.selectedRecord[\"nprojectmastercode\"].value\r\n        : transactionStatus.NA;\r\n\r\n    /*  quotationData[\"quotation\"][\"nuserrolecode\"] = this.state.selectedRecord[\"nuserrolecode\"]!==\"\"  ? this.state.selectedRecord[\"nuserrolecode\"].value\r\n        : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"]!==\"\"  ? this.state.selectedRecord[\"nusercode\"].value\r\n        : transactionStatus.NA;  */\r\n\r\n      quotationData[\"quotation\"][\"nuserrolecode\"] = this.props.Login.ProjectMaster[\"nuserrolecode\"]!==\"\" ? this.props.Login.ProjectMaster[\"nuserrolecode\"]\r\n         : transactionStatus.NA;\r\n        \r\n      quotationData[\"quotation\"][\"nusercode\"] = this.props.Login.ProjectMaster[\"nusercode\"]!==\"\" ? this.props.Login.ProjectMaster[\"nusercode\"]\r\n        : transactionStatus.NA;\r\n\r\n\r\n      quotationData[\"quotation\"][\"drfwdate\"] = formatInputDate(this.state.selectedRecord[\"srfwdate\"], false);\r\n      quotationData[\"quotation\"][\"dquotationdate\"] = formatInputDate(this.state.selectedRecord[\"dquotationdate\"], false);\r\n\r\n      \r\n    }\r\n\r\nif ((this.props.Login.operation  === \"create\") && (this.props.Login.screenName === \"IDS_TEST\")) {\r\n          \r\n      inputParam = this.onSaveQuotationTest(saveType, formRef);\r\n  }\r\n\r\nif ((this.props.Login.operation  === \"update\") && ((this.props.Login.screenName === \"IDS_PRICE\") || (this.props.Login.screenName === \"IDS_GROSSQUOTATION\")) ) {\r\n          \r\n    inputParam = this.onSaveQuotationTestPrice(saveType, formRef);\r\n}\r\n\r\nif ((this.props.Login.operation  === \"create\") && (this.props.Login.screenName === \"IDS_GROSSQUOTATION\")) {\r\n          \r\n  inputParam = this.onSaveGrossQuotation(saveType, formRef);\r\n}\r\n    \r\n    if (((this.props.Login.operation === \"create\") || (this.props.Login.operation === \"update\")) && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      inputParam = {\r\n        classUrl: \"quotation\",\r\n        methodUrl: \"Quotation\",\r\n        inputData: quotationData,\r\n        operation: this.props.Login.operation,\r\n        saveType,\r\n        formRef,\r\n        postParam,\r\n        searchRef: this.searchRef,\r\n        isClearSearch: this.props.Login.isClearSearch,\r\n      };\r\n    } \r\n    \r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          saveType,\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n    }\r\n\r\n  };\r\n\r\n  onSaveQuotationTest(saveType, formRef) {\r\n    let inputData = [];\r\n    inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n    // inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\r\n  //  inputData[\"Quotation\"] = {};\r\n\r\n\r\n    let testArray = []\r\n    testArray = this.state.selectedRecord.ntestcode.map(item => {\r\n        let QuotationData = {}\r\n\r\n        QuotationData[\"ntestcode\"] = item.value\r\n        QuotationData[\"nquotationcode\"] = this.props.Login.masterData.SelectedQuotation.nquotationcode;\r\n\r\n\r\n        return QuotationData;\r\n    });\r\n    inputData['QuotationTest'] = testArray;\r\n\r\n    const inputParam = {\r\n        classUrl: \"quotation\",\r\n        methodUrl: \"QuotationTest\",\r\n        inputData: inputData,\r\n        operation: this.props.Login.operation, saveType, formRef\r\n    }\r\n    return inputParam;\r\n}\r\n\r\nonSaveQuotationTestPrice = (saveType, formRef) => {\r\n\r\n  const quotationtestPriceData = {\"userinfo\": this.props.Login.userInfo,\r\n                           \"QuotationTest\":this.props.Login.masterData.SelectedQuotation,\r\n                           \"nquotationcode\":this.props.Login.masterData.SelectedQuotation.nquotationcode};\r\n\r\n   let postParam = undefined;\r\n   let quotationDataState = undefined;\r\n   let selectedId = null;\r\n   \r\n   if (this.props.Login.operation === \"update\") {\r\n       // edit\r\n       quotationDataState = this.state.quotationDataState;\r\n       selectedId = this.props.Login.selectedId; \r\n       postParam = { inputListName: \"Quotation\", selectedObject: \"SelectedQuotation\", primaryKeyField: \"nquotationcode\" };\r\n       quotationtestPriceData[\"QuotationTest\"] = JSON.parse(JSON.stringify(this.props.Login.selectedRecord));           \r\n   }\r\n   else {\r\n       //add               \r\n                                          \r\n       let priceList = [];\r\n       this.state.selectedRecord[\"ntestcode\"] &&\r\n           this.state.selectedRecord[\"ntestcode\"].map(item => {\r\n               return priceList.push({\r\n                  ntestcode: item.value                      \r\n               })\r\n           })\r\n      \r\n       quotationtestPriceData[\"QuotationTest\"] = priceList;                             \r\n\r\n   }\r\n   if (quotationtestPriceData[\"QuotationTest\"].hasOwnProperty('esignpassword')) {\r\n       if (quotationtestPriceData[\"QuotationTest\"]['esignpassword'] === '') {\r\n           delete quotationtestPriceData[\"QuotationTest\"]['esigncomments']\r\n           delete quotationtestPriceData[\"QuotationTest\"]['esignpassword']\r\n           delete quotationtestPriceData[\"QuotationTest\"][\"agree\"]\r\n       }\r\n   }\r\n  //console.log(\"update data:\", quotationtestPriceData);\r\n   const inputParam = {\r\n       classUrl: this.props.Login.inputParam.classUrl,\r\n       methodUrl: \"QuotationTest\",\r\n       inputData: quotationtestPriceData,\r\n       operation: this.props.Login.operation,\r\n       saveType, formRef, postParam, searchRef: this.searchRef,\r\n       isClearSearch: this.props.Login.isClearSearch,\r\n       selectedId, quotationDataState\r\n   }\r\n   \r\n   return inputParam;\r\n}\r\n\r\n\r\nonSaveGrossQuotation(saveType, formRef) {\r\n\r\n  let quotationData = {};\r\n  quotationData[\"userinfo\"] = this.props.Login.userInfo;\r\n \r\n\r\n\r\n  quotationData[\"GrossQuotation\"] = {  \r\n\r\n    nquotationcode: this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n    nsitecode: this.props.Login.userInfo.nmastersitecode,\r\n    ndiscountamount:this.state.selectedRecord.DiscountAmount,\r\n    nvatamount:this.state.selectedRecord.VatAmount,\r\n    ntotalnetamount:this.state.selectedRecord.TotalNetAmount,\r\n    ntotalgrosstamount : this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount\r\n   \r\n    \r\n  };\r\n\r\n  quotationData[\"GrossQuotation\"][\"ndiscountbandcode\"] = this.state.selectedRecord[\"ndiscountbandcode\"] ? this.state.selectedRecord[\"ndiscountbandcode\"].value\r\n  : transactionStatus.NA;\r\n\r\n  quotationData[\"GrossQuotation\"][\"nvatbandcode\"] = this.state.selectedRecord[\"nvatbandcode\"] ? this.state.selectedRecord[\"nvatbandcode\"].value\r\n  : transactionStatus.NA;\r\n\r\n  const inputParam = {\r\n      classUrl: \"quotation\",\r\n      methodUrl: \"GrossQuotation\",\r\n      inputData: quotationData,\r\n      operation: this.props.Login.operation, saveType, formRef\r\n  }\r\n  return inputParam;\r\n}\r\n\r\n  onNumericInputOnChange = (value, name) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    selectedRecord[name] = value;\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.Login.masterStatus !== \"\") {\r\n      if (props.Login.errorCode === 417 || props.Login.errorCode === 409) {\r\n        toast.warn(props.Login.masterStatus);\r\n        props.Login.masterStatus = \"\";\r\n      }\r\n    }\r\n    if (props.Login.error !== state.error) {\r\n      toast.error(props.Login.error);\r\n      props.Login.error = \"\";\r\n    }\r\n    if (props.Login.selectedRecord === undefined) {\r\n      return { selectedRecord: {} };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  validateEsign = () => {\r\n    const inputParam = {\r\n      inputData: {\r\n        userinfo: {\r\n          ...this.props.Login.userInfo,\r\n          sreason: this.state.selectedRecord[\"esigncomments\"],\r\n        },\r\n        password: this.state.selectedRecord[\"esignpassword\"],\r\n      },\r\n      screenData: this.props.Login.screenData,\r\n    };\r\n    this.props.validateEsignCredential(inputParam, \"openModal\");\r\n\r\n  };\r\n\r\n\r\n\r\n  DeleteQuotation = (methodUrl, selectedQuotation, operation, ncontrolCode) => {\r\n    const postParam = {\r\n      inputListName: \"QuotationList\",\r\n      selectedObject: \"SelectedQuotation\",\r\n      primaryKeyField: \"nquotationcode\",\r\n      primaryKeyValue: selectedQuotation.nquotationcode,\r\n      fetchUrl: \"quotation/getQuotation\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n    };\r\n\r\n    const inputParam = {\r\n      classUrl: this.props.Login.inputParam.classUrl,\r\n      methodUrl,\r\n      postParam,\r\n      inputData: {\r\n        userinfo: this.props.Login.userInfo,\r\n        quotation: selectedQuotation,\r\n      },\r\n      operation,\r\n      isClearSearch: this.props.Login.isClearSearch,\r\n    };\r\n\r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (\r\n      showEsign(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode,\r\n        ncontrolCode\r\n      )\r\n    ) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          openModal: true,\r\n          screenName: \"IDS_QUOTATION\",\r\n          operation,\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  render() {\r\n\r\n\r\n    let versionStatusCSS = \"outline-secondary\";\r\n    let activeIconCSS = \"fa fa-check\"\r\n\r\n\r\n    if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.APPROVED) {\r\n      versionStatusCSS = \"outline-success\";\r\n    }\r\n    else if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\r\n      activeIconCSS = \"\";\r\n\r\n    }\r\n\r\n    if (this.props.Login.openModal) {\r\n      this.mandatoryFields = this.findMandatoryFields(this.props.Login.screenName, this.state.selectedRecord, this.props.Login.operation)\r\n    }\r\n\r\n\r\n    const { userInfo } = this.props.Login;\r\n    const addId = this.state.controlMap.has(\"AddQuotation\") && this.state.controlMap.get(\"AddQuotation\").ncontrolcode;\r\n    const editId = this.state.controlMap.has(\"EditQuotation\") && this.state.controlMap.get(\"EditQuotation\").ncontrolcode;\r\n    const deleteId = this.state.controlMap.has(\"DeleteQuotation\") && this.state.controlMap.get(\"DeleteQuotation\").ncontrolcode;\r\n    const approveId = this.state.controlMap.has(\"ApproveQuotation\") && this.state.controlMap.get(\"ApproveQuotation\").ncontrolcode;\r\n    \r\n    const addQuotationTestId = this.state.controlMap.has(\"AddQuotationTest\") && this.state.controlMap.get(\"AddQuotationTest\").ncontrolcode;\r\n    const updateQuotationTestId = this.state.controlMap.has(\"EditQuotationTest\") && this.state.controlMap.get(\"EditQuotationTest\").ncontrolcode;\r\n    const grossQuotationeId = this.state.controlMap.has(\"GrossQuotation\") && this.state.controlMap.get(\"GrossQuotation\").ncontrolcode;\r\n\r\n\r\n    const fieldsForGrid = [\r\n\r\n      { \"idsName\": \"IDS_LOGINID\", \"dataField\": \"sloginid\", \"width\": \"200px\" },\r\n      { \"idsName\": \"IDS_USER\", \"dataField\": \"steammembername\", \"width\": \"200px\" }\r\n\r\n    ]\r\n\r\n    const editTestPriceParam = {screenName:\"IDS_PRICE\", \"operation\":\"update\", \r\n    masterData:this.props.Login.masterData, userInfo: this.props.Login.userInfo, \r\n    ncontrolCode:updateQuotationTestId};\r\n\r\n    const { SelectedQuotation } = this.props.Login.masterData;\r\n    const selectedMaster = this.props.Login.masterData.SelectedQuotation;\r\n    const selectedQuotation = this.props.Login.masterData.SelectedQuotation;\r\n    const GrossQuotation = this.props.Login.masterData.GrossQuotation;\r\n\r\n    const filterParam = {\r\n      inputListName: \"Quotation\",\r\n      selectedObject: \"SelectedQuotation\",\r\n      primaryKeyField: \"nquotationcode\",\r\n      fetchUrl: \"quotation/getQuotation\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n      masterData: this.props.Login.masterData,\r\n      searchFieldList: this.searchFieldList,\r\n    };\r\n    \r\n    return (\r\n      <>\r\n        <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n          \r\n          <Row noGutters={true}>\r\n            <Col md={4}>\r\n              <ListMaster\r\n                screenName={this.props.intl.formatMessage({ id: \"IDS_QUOTATION\" })}\r\n                masterData={this.props.Login.masterData}\r\n                userInfo={this.props.Login.userInfo}\r\n                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.Quotation}\r\n                getMasterDetail={(quotationData) => this.props.getQuotation(quotationData, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                selectedMaster={selectedQuotation}\r\n                primaryKeyField=\"nquotationcode\"\r\n                mainField=\"squotationno\"\r\n                firstField=\"sclientname\"\r\n                secondField=\"sversionstatus\"\r\n                filterColumnData={this.props.filterColumnData}\r\n                filterParam={filterParam}\r\n                userRoleControlRights={this.state.userRoleControlRights}\r\n                addId={addId}\r\n                searchRef={this.searchRef}\r\n                reloadData={this.reloadData}\r\n                //     openModal={() => this.props.addQuotation(\"create\", selectedQuotation, userInfo, addId, this.state.ProjectMasterList)}\r\n                openModal={() => this.props.addQuotation(\"create\", userInfo, addId, selectedQuotation)}\r\n                isMultiSelecct={false}\r\n                hidePaging={false}\r\n                isClearSearch={this.props.Login.isClearSearch}\r\n\r\n                openFilter={this.openFilter}\r\n                closeFilter={this.closeFilter}\r\n                onFilterSubmit={this.onFilterSubmit}    \r\n                showFilterIcon={false}\r\n                showFilter={this.props.Login.showFilter}\r\n       /*         filterComponent={[\r\n                  {\r\n                    \"IDS_PROJECTMASTERFILTER\":\r\n                      <ProjectMasterFilter\r\n                        filterProjectType={this.state.ProjectMasterList || []}\r\n                        nfilterProjectType={this.props.Login.masterData.SelectedProjectType || {}}\r\n                        onComboChange={this.onComboChange}\r\n                        selectedRecord={this.state.selectedRecordfilter || {}}\r\n                      />\r\n                  }\r\n                ]} */\r\n\r\n              />\r\n            </Col>\r\n            <Col md={8}>\r\n              {selectedQuotation ?\r\n                <ContentPanel className=\"panel-main-content\">\r\n                  <Card className=\"border-0\">\r\n                    <Card.Header>\r\n                      {/* <ReactTooltip place=\"bottom\" globalEventOff='click' /> */}\r\n                      <Card.Title className=\"product-title-main\">\r\n                        {selectedQuotation.sclientcatname}\r\n                      </Card.Title>\r\n                      <Card.Subtitle>\r\n                        <div className=\"d-flex product-category\">\r\n                          <h2 className=\"product-title-sub flex-grow-1\">\r\n\r\n                            <span className={`btn btn-outlined ${versionStatusCSS} btn-sm ml-3`}>\r\n                              <i class={activeIconCSS}></i>\r\n                              {selectedQuotation.sversionstatus}\r\n\r\n                            </span>\r\n                          </h2>\r\n                          {/* </Col>\r\n                                                <Col md=\"4\"> */}\r\n                          {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n                          <div className=\"d-inline\">\r\n                            {/* Don't delete these commented lines because additional info feature is needed for Agaram LIMS */}\r\n                            {/* Start Here */}\r\n                            {/* <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" href=\"\" >  \r\n                                                            <FontAwesomeIcon icon={faEye} className=\"ActionIconColor\" onClick={(e)=>this.viewAdditionalInfo(e)} />\r\n                                                        </Nav.Link> */}\r\n                            {/* End Here */}\r\n                            <Nav.Link className=\"btn btn-circle outline-grey mr-2\" name=\"edittestname\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_EDIT\" })}\r\n                              //data-for=\"tooltip_list_wrap\"\r\n                              onClick={() => this.props.addQuotation(\"update\",userInfo, editId, selectedQuotation )}>\r\n                              <FontAwesomeIcon icon={faPencilAlt} />\r\n                            </Nav.Link>\r\n                            <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" name=\"deletetestname\"\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                              //   data-for=\"tooltip_list_wrap\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                              onClick={() => this.ConfirmDelete(selectedQuotation, \"delete\", deleteId, \"Quotation\")}\r\n                            >\r\n                              <FontAwesomeIcon icon={faTrashAlt} />\r\n\r\n                            </Nav.Link>\r\n                            <Nav.Link name=\"approveQuotation\" className=\"btn btn-circle outline-grey mr-2\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_APPROVE\" })}\r\n                              //data-for=\"tooltip_list_wrap\"\r\n                              onClick={() => this.approveQuotation(\"Quotation\", selectedQuotation, \"approve\", approveId)}>\r\n                              <FontAwesomeIcon icon={faThumbsUp} />\r\n                            </Nav.Link>\r\n                            <Nav.Link name=\"GrossQuotation\" className=\"btn btn-circle outline-grey mr-2\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(grossQuotationeId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_GROSSQUOTATION\" })}\r\n                              onClick={() => this.props.GrossQuotation(\"create\", userInfo, grossQuotationeId, selectedQuotation)}>\r\n                              <FontAwesomeIcon icon={faUserTimes} />\r\n                            </Nav.Link>\r\n\r\n                          </div>\r\n                          {/* </Tooltip> */}\r\n                        </div>\r\n                        {/* </Col>\r\n                                            </Row> */}\r\n                      </Card.Subtitle>\r\n                    </Card.Header>\r\n                    <Card.Body className=\"form-static-wrap\">\r\n                      <Row>\r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_CLIENTCATEGORY\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.sclientcatname}</ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col>\r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_CLIENT\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.sclientname}</ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col>\r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_CLIENTADDRESS\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.sclientsiteaddress}</ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col>\r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_INVOICEADDRESS\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.sinvoiceaddress}</ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col>\r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_PROJECTTYPE\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.sprojecttypename}</ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col>\r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_PROJECTCODE\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.sprojectcode} </ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col>\r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_PROJECTTITLE\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.sprojecttitle} </ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col>\r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_RFWDATE\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.srfwdate}</ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col>\r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_ROLE\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.suserrolename}</ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col> \r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_USER\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.susername}</ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col> \r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_QUOTATIONDATE\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.squotationdate}</ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col>\r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_DESCRIPTION\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.sdescription}</ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col>\r\n\r\n                        <Col md=\"4\">\r\n                          <FormGroup>\r\n                            <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_DEVIATIONREMARKS\" })}</FormLabel>\r\n                            <ReadOnlyText>{selectedQuotation.sdeviationremarks}</ReadOnlyText>\r\n                          </FormGroup>\r\n                        </Col>\r\n\r\n                      </Row>\r\n                      \r\n                      <Col md={12}>\r\n                        <div className=\"horizontal-line\"></div>\r\n                      </Col>\r\n\r\n                      <Row>\r\n\r\n                        <Col md=\"4\">\r\n                            <FormGroup>\r\n                              <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_DISCOUNTNAME\" })}</FormLabel>\r\n                              <ReadOnlyText>{selectedQuotation.sdiscountbandname}</ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md=\"4\">\r\n                            <FormGroup>\r\n                              <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_DISCOUNTPERCENTAGE\" })}</FormLabel>\r\n                              <ReadOnlyText>{selectedQuotation.ndiscountpercentage}</ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md=\"4\">\r\n                            <FormGroup>\r\n                              <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_VATNAME\" })}</FormLabel>\r\n                              <ReadOnlyText>{selectedQuotation.svatbandname}</ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md=\"4\">\r\n                            <FormGroup>\r\n                              <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_VATPERCENTAGE\" })}</FormLabel>\r\n                              <ReadOnlyText>{selectedQuotation.nvatpercentage}</ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md=\"4\">\r\n                            <FormGroup>\r\n                              <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_TOTALGROSSAMOUNT\" })}</FormLabel>\r\n                              <ReadOnlyText>{selectedQuotation.ntotalgrosstamount}</ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md=\"4\">\r\n                            <FormGroup>\r\n                              <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_DISCOUNTAMOUNT\" })}</FormLabel>\r\n                              <ReadOnlyText>{selectedQuotation.ndiscountamount} </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md=\"4\">\r\n                            <FormGroup>\r\n                              <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_VATAMOUNT\" })}</FormLabel>\r\n                              <ReadOnlyText>{selectedQuotation.nvatamount} </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md=\"4\">\r\n                            <FormGroup>\r\n                              <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_TOTALNETAMOUNT\" })}</FormLabel>\r\n                              <ReadOnlyText>{selectedQuotation.ntotalnetamount}</ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                      </Row>\r\n                      <Card className=\"at-tabs border-0\">\r\n                              <Row noGutters>\r\n                                  <Col md={12}>\r\n                                      <div className=\"d-flex justify-content-end\">\r\n                                      <Nav.Link name=\"addPrice\" className=\"add-txt-btn\" \r\n                                              hidden={this.state.userRoleControlRights.indexOf(addQuotationTestId) === -1}\r\n                                              onClick={()=>this.props.getQuotationAddTestService(\"IDS_TEST\", \"create\", this.props.Login.masterData, this.props.Login.userInfo, addQuotationTestId)}\r\n                                              >\r\n                                            <FontAwesomeIcon icon={faPlus} /> { } \r\n                                          <FormattedMessage id='IDS_TEST' defaultMessage='Test' />\r\n                                      </Nav.Link>\r\n                                      <Nav.Link name=\"updatePrice\" className=\"add-txt-btn\" \r\n                                              hidden={this.state.userRoleControlRights.indexOf(updateQuotationTestId) === -1}\r\n                                              onClick={()=>this.props.getQuotationPricingEditService({...editTestPriceParam, \"updateType\":\"All\", quotationDataState:undefined})}\r\n                                              >\r\n                                          <FontAwesomeIcon icon={faPencilAlt} /> { }\r\n                                          <FormattedMessage id='IDS_PRICE' defaultMessage='Price' />\r\n                                      </Nav.Link>\r\n                                      </div>\r\n                                  </Col>\r\n                              </Row>\r\n                              <Row noGutters>\r\n                                  <Col md={12}>\r\n                                      <DataGrid\r\n                                          primaryKeyField={\"nquotationtestcode\"}\r\n                                          data={this.props.Login.masterData.QuotationTest}\r\n                                          dataResult={this.props.Login.masterData.QuotationTest}\r\n                                         \r\n                                          dataState={this.state.quotationDataState}\r\n                                          dataStateChange={this.dataStateChange}\r\n                                          extractedColumnList={this.extractedColumnList}\r\n                                          controlMap={this.state.controlMap}\r\n                                          userRoleControlRights={this.state.userRoleControlRights}\r\n                                          inputParam={this.props.Login.inputParam}\r\n                                          userInfo={this.props.Login.userInfo}\r\n                                          fetchRecord={this.props.getQuotationPricingEditService}\r\n                                          editParam={{...editTestPriceParam, \"updateType\":\"Single\", quotationDataState:this.state.quotationDataState}}\r\n                                          \r\n                                          deleteRecord={this.deleteQuotation}\r\n                                          deleteParam={{operation:\"delete\"}}\r\n                                          methodUrl={\"QuotationTest\"}\r\n                                          addRecord = {() => this.openModal(addId)}\r\n                                          pageable={true}\r\n                                          scrollable={'scrollable'}\r\n                                          isActionRequired={true}\r\n                                          isToolBarRequired={false}\r\n                                          selectedId={this.props.Login.selectedId}\r\n                                      />\r\n                                  </Col>\r\n                              </Row>\r\n                      </Card>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </ContentPanel>\r\n                : \"\"\r\n              }\r\n            </Col>\r\n          </Row>\r\n\r\n\r\n        </div>\r\n        {/* End of get display */}\r\n\r\n        {/* Start of Modal Sideout for Test Creation */}\r\n        {this.props.Login.openModal &&\r\n           <SlideOutModal\r\n           show={this.props.Login.openModal}\r\n           size={this.props.Login.edit===true ? \"xl\" : \"lg\" }\r\n           closeModal={this.closeModal}\r\n           operation={this.props.Login.operation}\r\n           inputParam={this.props.Login.inputParam}\r\n           screenName={this.props.Login.screenName}\r\n           onSaveClick={this.onSaveClick}\r\n           esign={this.props.Login.loadEsign}\r\n           validateEsign={this.validateEsign}\r\n           selectedRecord={this.state.selectedRecord || {}}\r\n           mandatoryFields={this.mandatoryFields || []}\r\n           addComponent={this.props.Login.loadEsign ?\r\n             <Esign\r\n               operation={this.props.Login.operation}\r\n               onInputOnChange={this.onEsignInputOnChange}\r\n               inputParam={this.props.Login.inputParam}\r\n               selectedRecord={this.state.selectedRecord || {}}\r\n             />\r\n             : (this.props.Login.screenName === \"IDS_QUOTATION\") ?\r\n\r\n               <AddQuotation\r\n\r\n                userInfo={this.props.Login.userInfo}\r\n                selectedRecord={this.state.selectedRecord || {}}\r\n                // selectedclientcode={this.state.selectedRecord.nclientcode || {}}\r\n                sclientsiteaddress={this.props.Login.sclientsiteaddress}\r\n                SelectedClient={this.props.Login.SelectedClient}\r\n                ClientCategory={this.props.Login.ClientCategory}\r\n                Client={this.props.Login.Client}\r\n                ProjectCode={this.props.Login.ProjectCode}\r\n                ProjectType={this.props.Login.ProjectType}\r\n                ProjectMaster={this.props.Login.ProjectMaster}\r\n                QuotationType={this.props.Login.QuotationType}\r\n                onInputOnChange={this.onInputOnChange}\r\n                onComboChange={this.onComboChange}\r\n                onNumericInputChange={this.onNumericInputChange}\r\n\r\n                handleDateChange={this.handleDateChange}\r\n               /> :\r\n\r\n               this.props.Login.screenName === \"IDS_TEST\" ?\r\n\r\n                 <AddQuotationTest\r\n\r\n                 QuotationTestList={this.props.Login.QuotationTestList}\r\n                 selectedRecord={this.state.selectedRecord || {}}\r\n                 onComboChange={this.onComboChange}\r\n\r\n                 /> : \r\n                 \r\n                 this.props.Login.screenName === \"IDS_PRICE\" ?\r\n\r\n                 <EditQuotationTestPricing\r\n                 onnetAmountEvent={this.onnetAmountEvent}\r\n                 selectedRecord={this.state.selectedRecord || {}}\r\n                 onInputOnChange={this.onInputOnChange}\r\n                 />\r\n                :  \r\n\r\n                <AddGrossQuotation\r\n\r\n                  DiscountBand={this.props.Login.DiscountBand}\r\n                  VATBand={this.props.Login.VATBand} \r\n                  selectedRecord={this.state.selectedRecord || {}}\r\n                  // QuotationTest={this.props.Login.QuotationTest}\r\n                  onComboChange={this.onComboChange}\r\n                  onInputOnChange={this.onInputOnChange}\r\n                  DiscountAmount={this.state.selectedRecord.DiscountAmount === undefined ? 0.00 :this.state.selectedRecord.DiscountAmount }\r\n                  VatAmount={this.state.selectedRecord.VatAmount === undefined ? 0.00 : this.state.selectedRecord.VatAmount}\r\n                  QuotationGrossAmount={this.props.Login.QuotationGrossAmount === undefined ? 0.00 : this.props.Login.QuotationGrossAmount} \r\n                  TotalNetAmount={this.state.selectedRecord.TotalNetAmount !== undefined ? this.state.selectedRecord.TotalNetAmount:this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount}\r\n                /> \r\n\r\n           }\r\n         />\r\n        }\r\n        {/* End of Modal Sideout for Test Creation */}\r\n      </>\r\n    );\r\n  }\r\n\r\n  findMandatoryFields(screenName, selectedRecord, operation) {\r\n    let mandatoryFields = [];\r\n    if (screenName === \"IDS_QUOTATION\") {\r\n\r\n      mandatoryFields = [\r\n        { \"idsName\": \"IDS_CLIENTCATEGORY\", \"dataField\": \"nclientcatcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_CLIENT\", \"dataField\": \"nclientcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"textbox\" },\r\n        { \"idsName\": \"IDS_CLIENTADDRESS\", \"dataField\": \"sclientsiteaddress\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n        { \"idsName\": \"IDS_INVOICEADDRESS\", \"dataField\": \"sinvoiceaddress\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_QUOTATIONTYPE\", \"dataField\": \"nquotationtypecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_PROJECTTYPE\", \"dataField\": \"nprojecttypecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n       // { \"idsName\": \"IDS_PROJECTCODE\", \"dataField\": \"nprojectmastercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_PROJECTTITLE\", \"dataField\": \"sprojecttitle\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_RFWDATE\", \"dataField\": \"srfwdate\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"textbox\" },\r\n        { \"idsName\": \"IDS_ROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_USER\", \"dataField\": \"susername\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n        { \"idsName\": \"IDS_QUOTATIONDATE\", \"dataField\": \"dquotationdate\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"selectbox\" },\r\n        \r\n      ]\r\n\r\n      // mandatoryFields.forEach(item => item.mandatory === true && mandatoryFields.push(item));\r\n      return mandatoryFields;\r\n\r\n    } \r\n    else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  onComboChange = (comboData, fieldName, caseNo) => {\r\n\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    switch (caseNo) {\r\n      case 1:\r\n\r\n      if(fieldName===\"nclientcatcode\"){\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n        if (selectedRecord.nclientcatcode) {\r\n          if (parseInt(comboData.value) !== parseInt(selectedRecord.nclientcatcode.value)) {\r\n            // selectedRecord.nusercode={};\r\n            delete (selectedRecord.nclientcode);\r\n            delete (selectedRecord.sclientsiteaddress);\r\n          }\r\n        }\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n        selectedRecord[\"sclientcatname\"] = comboData.item[\"sclientcatname\"];\r\n        this.props.getClientCategoryComboService({\r\n\r\n          inputData: {\r\n            userinfo: this.props.Login.userInfo,\r\n            sdisplayname: selectedRecord.nclientcatcode.label,\r\n            primarykey: selectedRecord.nclientcatcode.value,\r\n          }\r\n\r\n        }, selectedRecord);\r\n      }\r\n\r\n      if(fieldName===\"nclientcode\"){\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n        if (selectedRecord.nclientcode) {\r\n          if (parseInt(comboData.value) !== parseInt(selectedRecord.nclientcode.value)) {\r\n            // selectedRecord.nusercode={};\r\n            delete (selectedRecord.sclientsiteaddress);\r\n            \r\n          }\r\n        }\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n        selectedRecord[\"sclientname\"] = comboData.item[\"sclientname\"];\r\n        this.props.getQuotaionClientComboService({\r\n\r\n          inputData: {\r\n            userinfo: this.props.Login.userInfo,\r\n            sdisplayname: selectedRecord.nclientcode.label,\r\n            primarykey: selectedRecord.nclientcode.value,\r\n          }\r\n\r\n        }, selectedRecord);\r\n      }\r\n\r\n        break;\r\n\r\n      case 2:\r\n        // let nfilterProjectType = this.state.nfilterProjectType || {}\r\n        // nfilterProjectType = comboData;\r\n        const selectedRecordfilter = this.state.selectedRecordfilter || {};\r\n        selectedRecordfilter[fieldName] = comboData;\r\n        this.setState({ selectedRecordfilter });\r\n        break;\r\n\r\n      case 3:\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n        if(fieldName===\"ndiscountbandcode\"){\r\n\r\n          const VatAmount=(this.state.selectedRecord.VatAmount === undefined ? 0.00 : this.state.selectedRecord.VatAmount)\r\n          selectedRecord[\"DiscountAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount * (selectedRecord.ndiscountbandcode.item.namount/100);\r\n          selectedRecord[\"TotalNetAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount+(this.state.selectedRecord.DiscountAmount-VatAmount);\r\n\r\n\r\n          }else if(fieldName===\"nvatbandcode\"){\r\n\r\n            selectedRecord[\"VatAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount * (selectedRecord.nvatbandcode.item.namount/100);\r\n            selectedRecord[\"TotalNetAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrosstamount+(this.state.selectedRecord.DiscountAmount-this.state.selectedRecord.VatAmount);\r\n\r\n\r\n          }\r\n\r\n        \r\n        this.setState({ selectedRecord });\r\n        break;\r\n\r\n        case 4:\r\n         \r\n          if(fieldName===\"nprojecttypecode\"){\r\n            if (selectedRecord.nprojecttypecode) {\r\n              if (parseInt(comboData.value) !== parseInt(selectedRecord.nprojecttypecode.value)) {\r\n                delete (selectedRecord.nprojectmastercode);\r\n                delete (selectedRecord.sprojecttitle);\r\n                delete (selectedRecord.srfwdate);\r\n                delete (selectedRecord.suserrolename);\r\n                delete (selectedRecord.susername);\r\n              }\r\n            }\r\n    \r\n            selectedRecord[fieldName] = comboData;\r\n            selectedRecord[\"sprojecttypename\"] = comboData.item[\"sprojecttypename\"];\r\n            this.props.getProjectTypeComboService({\r\n    \r\n              inputData: {\r\n                userinfo: this.props.Login.userInfo,\r\n                sdisplayname: selectedRecord.nprojecttypecode.label,\r\n                primarykey: selectedRecord.nprojecttypecode.value,\r\n              }\r\n    \r\n            }, selectedRecord);\r\n          }\r\n\r\n          if(fieldName===\"nprojectmastercode\"){\r\n            if (selectedRecord.nprojectmastercode) {\r\n              if (parseInt(comboData.value) !== parseInt(selectedRecord.nprojectmastercode.value)) {\r\n                delete (selectedRecord.sprojecttitle);\r\n                delete (selectedRecord.srfwdate);\r\n                delete (selectedRecord.suserrolename);\r\n                delete (selectedRecord.susername);\r\n              }\r\n            }\r\n    \r\n            selectedRecord[fieldName] = comboData;\r\n            selectedRecord[\"sprojectcode\"] = comboData.item[\"sprojectcode\"];\r\n            this.props.getProjectCodeComboService({\r\n    \r\n              inputData: {\r\n                userinfo: this.props.Login.userInfo,\r\n                sdisplayname: selectedRecord.nprojectmastercode.label,\r\n                primarykey: selectedRecord.nprojectmastercode.value,\r\n              }\r\n    \r\n            }, selectedRecord);\r\n          }\r\n\r\n          break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  /*\r\n  onInputOnChange = (event, optional) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    if (event.target.type === 'checkbox') {\r\n      if (event.target.name === \"ntransactionstatus\")\r\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n      // else if (event.target.name === \"nlockmode\")\r\n      //     selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\r\n      else\r\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n    }\r\n    else if (event.target.type === 'radio') {\r\n      selectedRecord[event.target.name] = optional;\r\n    }\r\n    else {\r\n      selectedRecord[event.target.name] = event.target.value;\r\n    }\r\n    this.setState({ selectedRecord });\r\n  } */\r\n\r\n\r\n  onInputOnChange = (event, primaryFieldKey) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n\r\n    if (event.target.type === 'checkbox') {\r\n        if (event.target.name === \"ntransactionstatus\")\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n        else\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n\r\n    }\r\n    else {   \r\n        if(primaryFieldKey && (event.target.name === \"ncost\" || event.target.name === \"nnoofsamples\" || event.target.name === \"ntotalamount\")){\r\n            const index = selectedRecord.findIndex(item=>item.nquotationtestcode === primaryFieldKey);\r\n            if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){\r\n                selectedRecord[index][event.target.name] = event.target.value;\r\n            }\r\n        }\r\n        else{      \r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }           \r\n    }\r\n    this.setState({ selectedRecord });\r\n}\r\n\r\nonnetAmountEvent = (selectedRecord23,ccc) => {\r\n  let selectedRecord=this.state.selectedRecord;\r\n  let selectedRecord1=selectedRecord.findIndex((item) => (item.nquotationtestcode === ccc ? item : \"\"));\r\n  let str=selectedRecord[selectedRecord1];\r\n  let count= str.ncost * str.nnoofsamples;\r\n   selectedRecord[selectedRecord1]={...str,ntotalamount:count}\r\n  this.setState(selectedRecord);\r\nconsole.log(count);\r\n  \r\n}\r\n\r\n\r\n\r\n  onDropProjectMasterclosureFile = (attachedFiles, fieldName, maxSize) => {\r\n\r\n    let selectedRecord = this.state.selectedRecord || {};\r\n    selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize)\r\n    this.setState({ selectedRecord, actionType: \"new\" });\r\n  }\r\n\r\n  \r\n  onNumericInputChange = (value, name) => {\r\n\r\n    console.log(\"value:\", value, name);\r\n\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n\r\n    if (name === \"nprojectduration\") {\r\n\r\n      if (/^[0-9]+$/.test(value.target.value) || value.target.value === \"\") {\r\n\r\n        selectedRecord[name] = value.target.value;\r\n      } else {\r\n\r\n        selectedRecord[name] = \"\";\r\n      }\r\n\r\n    }\r\n\r\n    else {\r\n\r\n      selectedRecord[name] = value;\r\n    }\r\n    this.setState({ selectedRecord });\r\n\r\n  }\r\n\r\n  deleteProjectMasterclosureAttachment = (event, file, fieldName) => {\r\n    let selectedRecord = this.state.selectedRecord || {};\r\n    selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n    this.setState({\r\n      selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n    });\r\n  }\r\n\r\n  approveQuotation = (methodUrl, selectedQuotation, operation, ncontrolCode) => {\r\n    if (selectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\r\n\r\n      const postParam = {\r\n        inputListName: \"Quotation\",\r\n        selectedObject: \"SelectedQuotation\",\r\n        primaryKeyField: \"nquotationcode\",\r\n        primaryKeyValue: selectedQuotation.nquotationcode,\r\n        fetchUrl: \"quotation/getQuotation\",\r\n        fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n      };\r\n\r\n      const inputParam = {\r\n        classUrl: this.props.Login.inputParam.classUrl,\r\n        methodUrl, postParam,\r\n        inputData: {\r\n          \"userinfo\": this.props.Login.userInfo, \r\n          \"quotation\": selectedQuotation\r\n        },\r\n        operation,\r\n        isClearSearch: this.props.Login.isClearSearch\r\n      }\r\n\r\n      const masterData = this.props.Login.masterData;\r\n\r\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n        const updateInfo = {\r\n          typeName: DEFAULT_RETURN,\r\n          data: {\r\n            loadEsign: true, screenData: { inputParam, masterData },\r\n            openModal: true, screenName: \"IDS_QUOTATION\", operation\r\n          }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n      }\r\n      else {\r\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n      }\r\n    }\r\n    else {\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTVERSION\" }));\r\n    }\r\n\r\n  }\r\n\r\n  \r\n  onTabChange = (tabProps) => {\r\n    const screenName = tabProps.screenName;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { screenName },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  onDropTestFile = (attachedFiles, fieldName, maxSize) => {\r\n    let selectedRecord = this.state.selectedRecord || {};\r\n    selectedRecord[fieldName] = onDropAttachFileList(\r\n      selectedRecord[fieldName],\r\n      attachedFiles,\r\n      maxSize\r\n    );\r\n    this.setState({ selectedRecord, actionType: \"new\" });\r\n  };\r\n  /*\r\n  dataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(\r\n        this.props.Login.masterData[\"selectedSection\"],\r\n        event.dataState\r\n      ),\r\n      sectionDataState: event.dataState,\r\n    });\r\n  };\r\n*/\r\n  dataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(this.state.data, event.dataState),\r\n      quotationDataState: event.dataState\r\n    });\r\n  }\r\n\r\n\r\n  ConfirmDelete = (selectedQuotation, operation, deleteId, screenName) => {\r\n    this.confirmMessage.confirm(\r\n      \"deleteMessage\",\r\n      this.props.intl.formatMessage({ id: \"IDS_DELETE\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_OK\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n      () =>\r\n        this.DeleteQuotation(\r\n          screenName,\r\n          selectedQuotation,\r\n          operation,\r\n          deleteId\r\n\r\n        )\r\n    );\r\n  };\r\n  reloadData = () => {\r\n    this.searchRef.current.value = \"\";\r\n\r\n    // if (Object.values(this.state.selectedRecordfilter.nprojecttypecodevalue).length && this.state.selectedRecordfilter.nprojecttypecodevalue !== undefined) {\r\n    if (Object.values(this.props.Login.masterData.SelectedQuotation).length && this.props.Login.masterData.SelectedQuotation !== undefined) {\r\n      let inputParam = {\r\n        inputData: {\r\n     \r\n          userinfo: this.props.Login.userInfo,\r\n          \r\n        },\r\n        classUrl: \"quotation\",\r\n        methodUrl: \"Quotation\",\r\n      };\r\n\r\n      this.props.getreloadQuotation(inputParam);\r\n\r\n    } else {\r\n      toast.warn(\r\n        this.props.intl.formatMessage({\r\n          id: \"IDS_PROJECTTYPENOTAVAILABLE\",\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n  closeModal = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n\r\n    let openModal = this.props.Login.openModal;\r\n    //  let selectedRecord = this.props.Login.selectedRecord;\r\n    let selectedRecord = this.state.selectedRecord;\r\n    if (this.props.Login.loadEsign) {\r\n      loadEsign = false;\r\n    } else {\r\n      openModal = false;\r\n      selectedRecord = {};\r\n    }\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: {\r\n        openModal, selectedRecord,\r\n        selectedId: null, loadEsign\r\n      },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  componentDidUpdate(previousProps) {\r\n    let updateState = false;\r\n    let {\r\n      selectedRecord,\r\n      selectedRecordfilter,\r\n      userRoleControlRights,\r\n      controlMap,\r\n      filterData,\r\n      nfilterProjectType,\r\n      filterProjectType,\r\n\r\n    } = this.state;\r\n\r\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n      selectedRecord = this.props.Login.selectedRecord;\r\n      updateState = true;\r\n      this.setState({ selectedRecord });\r\n    }\r\n    if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n      userRoleControlRights = [];\r\n      if (this.props.Login.userRoleControlRights) {\r\n        this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode\r\n        ] &&\r\n          Object.values(\r\n            this.props.Login.userRoleControlRights[\r\n            this.props.Login.userInfo.nformcode\r\n            ]\r\n          ).map((item) => userRoleControlRights.push(item.ncontrolcode));\r\n      }\r\n      controlMap = getControlMap(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode\r\n      );\r\n      this.setState({ controlMap, userRoleControlRights });\r\n      //   updateState = true;\r\n    }\r\n\r\n    let nprojecttypecode = this.state.nfilterProjectType || {};\r\n\r\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n      // nfilterProjectType = this.state.nfilterProjectType || {};\r\n\r\n      // const filterProjectType = constructOptionList(this.props.Login.masterData.filterProjectType || [], \"nprojecttypecode\",\r\n      //   \"sprojecttypename\", undefined, undefined, undefined);\r\n\r\n      // let ProjectMasterList = filterProjectType.get(\"OptionList\");\r\n      // nprojecttypecode = ProjectMasterList[0];\r\n      // selectedRecordfilter = { nprojecttypecodevalue: nprojecttypecode }\r\n   //   selectedRecord = { nprojecttypecodevalue: nprojecttypecode }\r\n      // nfilterProjectType = this.props.Login.masterData.nfilterProjectType;\r\n      this.setState({\r\n        \r\n         selectedRecord\r\n      });\r\n\r\n      \r\n      updateState = true;\r\n      this.setState({ filterData });\r\n    }\r\n\r\n    // if (this.props.Login.masterData.SelectedProjectType !== previousProps.Login.masterData.SelectedProjectType) {\r\n\r\n    //   let nprojecttypecodevalue = this.props.Login.masterData.SelectedProjectType ?\r\n    //     {\r\n    //       label: this.props.Login.masterData.SelectedProjectType.sprojecttypename,\r\n    //       value: this.props.Login.masterData.SelectedProjectType.nprojecttypecode,\r\n    //       item: this.props.Login.masterData.SelectedProjectType\r\n    //     } : \"\"\r\n    //   //  nprojecttypecode=ProjectMasterList[ProjectMasterList.length-1];\r\n    //   selectedRecordfilter = { nprojecttypecodevalue }\r\n    //   selectedRecord = { nprojecttypecodevalue: nprojecttypecode }\r\n    //   // nfilterProjectType = this.props.Login.masterData.nfilterProjectType;\r\n    //   this.setState({\r\n    //     selectedRecordfilter, selectedRecord\r\n\r\n    //   });\r\n\r\n    // }\r\n\r\n    // if (this.props.Login.masterData.nfilterProjectType !== previousProps.Login.masterData.nfilterProjectType) {\r\n\r\n    // }\r\n\r\n  }\r\n  \r\n  openFilter = () => {\r\n    let showFilter = !this.props.Login.showFilter;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { showFilter },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  closeFilter = () => {\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { showFilter: false },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  \r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n  callService,\r\n  crudMaster,\r\n  filterColumnData,\r\n  updateStore,\r\n  validateEsignCredential,\r\n  getQuotation,getProjectTypeComboService,\r\n  viewAttachment, addQuotation, getreloadQuotation, getQuotationAddTestService, getQuotationPricingEditService,\r\n   GrossQuotation,getClientCategoryComboService,getQuotaionClientComboService,getProjectCodeComboService \r\n})(injectIntl(Quotation));\r\n"]},"metadata":{},"sourceType":"module"}