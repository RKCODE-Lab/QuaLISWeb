{"ast":null,"code":"import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{create_UUID,Lims_JSON_stringify}from\"../../../components/CommonScript\";import{attachmentType,transactionStatus}from\"../../../components/Enumeration\";export function onSaveSampleAttachment(saveParam,selectedMaster){var formData=new FormData();var selectedRecord=saveParam.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var fileArray=[];var samindex={index:0};if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];// const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \n//         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\nselectedMaster.forEach(function(sample,sampleindex){var fileName=selectedRecord.nregattachmentcode&&selectedRecord.nregattachmentcode>0&&selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;var tempData={};tempData['nregattachmentcode']=selectedRecord.nregattachmentcode?selectedRecord.nregattachmentcode:0;tempData[\"npreregno\"]=sample.npreregno;tempData['nformcode']=saveParam.userInfo.nformcode;tempData['nusercode']=saveParam.userInfo.nusercode;tempData['nuserrolecode']=saveParam.userInfo.nuserrole;tempData[\"nlinkcode\"]=transactionStatus.NA;// tempData[\"nfilesize\"] = file.size;\ntempData['jsondata']={// susername:saveParam.userInfo.susername,\nsusername:Lims_JSON_stringify(saveParam.userInfo.susername?saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),// suserrolename: saveParam.userInfo.suserrolename,\nsuserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename?saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),ssystemfilename:uniquefilename,sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:file.size,sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),slinkname:\"\",sheader:Lims_JSON_stringify(selectedRecord.sheader?selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};tempData['nattachmenttypecode']=nattachmenttypecode;// tempData[\"ssystemfilename\"] = uniquefilename;\n// tempData[\"sfilename\"] = file.name.trim();\n// tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\ntempData['nstatus']=transactionStatus.ACTIVE;formData.append(\"uploadedFile\"+samindex[\"index\"],file);formData.append(\"uniquefilename\"+samindex[\"index\"],uniquefilename);fileArray.push(tempData);samindex[\"index\"]=samindex[\"index\"]+1;});});formData.append(\"filecount\",acceptedFiles.length*selectedMaster.length);isFileEdited=transactionStatus.YES;}else{selectedMaster.forEach(function(sample){var sampleFile={};sampleFile['nregattachmentcode']=selectedRecord.nregattachmentcode?selectedRecord.nregattachmentcode:0;sampleFile[\"npreregno\"]=sample.npreregno;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=transactionStatus.NA;// sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\nsampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile['jsondata']={// susername: saveParam.userInfo.susername,\nsusername:Lims_JSON_stringify(saveParam.userInfo.susername?saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),// suserrolename: saveParam.userInfo.suserrolename,\nsuserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename?saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),ssystemfilename:selectedRecord.ssystemfilename,sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:selectedRecord.nfilesize,sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),slinkname:\"\",sheader:Lims_JSON_stringify(selectedRecord.sheader?selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};sampleFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;sampleFile[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false);// sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\nsampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}}else{selectedMaster.forEach(function(sample){var sampleFile={};sampleFile['nregattachmentcode']=selectedRecord.nregattachmentcode?selectedRecord.nregattachmentcode:0;sampleFile[\"npreregno\"]=sample.npreregno;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;sampleFile['jsondata']={// susername: saveParam.userInfo.susername,\nsusername:Lims_JSON_stringify(saveParam.userInfo.susername?saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),// suserrolename: saveParam.userInfo.suserrolename,\nsuserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename?saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),ssystemfilename:\"\",sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:0,slinkname:selectedRecord.nlinkcode.label,sdescription:Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),sheader:Lims_JSON_stringify(selectedRecord.sheader?selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};sampleFile['nattachmenttypecode']=nattachmenttypecode;// sampleFile[\"ssystemfilename\"] = \"\";\nsampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}formData.append(\"ncontrolCode\",saveParam.ncontrolCode);formData.append(\"isFileEdited\",isFileEdited);formData.append(\"sampleattachment\",JSON.stringify(fileArray));//ALPD-1728\n//formData.append(\"sampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\nformData.append(\"nattachmenttypecode\",nattachmenttypecode);formData.append(\"npreregno\",saveParam.npreregno);//formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\nformData.append(\"userinfo\",JSON.stringify(_objectSpread(_objectSpread({},saveParam.userInfo),{},{sformname:Lims_JSON_stringify(saveParam.userInfo.sformname),smodulename:Lims_JSON_stringify(saveParam.userInfo.smodulename),slanguagename:Lims_JSON_stringify(saveParam.userInfo.slanguagename)})));var inputParam={// inputData: { userinfo: saveParam.userInfo },\ninputData:{// userinfo: saveParam.userInfo },\n\"userinfo\":_objectSpread(_objectSpread({},saveParam.userInfo),{},{sformname:Lims_JSON_stringify(saveParam.userInfo.sformname),smodulename:Lims_JSON_stringify(saveParam.userInfo.smodulename),slanguagename:Lims_JSON_stringify(saveParam.userInfo.slanguagename)})},formData:formData,isFileupload:true,operation:saveParam.operation,classUrl:\"attachment\",saveType:saveParam.saveType,formRef:saveParam.formRef,methodUrl:\"SampleAttachment\"};return inputParam;}export function onSaveTestAttachment(saveParam,selectedMaster){var formData=new FormData();var selectedRecord=saveParam.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var fileArray=[];var testindex1={index:0};if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){if(saveParam.operation==='create'){acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];selectedMaster.forEach(function(test,testindex){var fileName=selectedRecord.nregattachmentcode&&selectedRecord.nregattachmentcode>0&&selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;var tempData={};tempData['ntestattachmentcode']=selectedRecord.ntestattachmentcode?selectedRecord.ntestattachmentcode:0;tempData[\"ntransactiontestcode\"]=test.ntransactiontestcode;tempData[\"ntransactionsamplecode\"]=test.ntransactionsamplecode;tempData[\"npreregno\"]=test.npreregno;tempData['nformcode']=saveParam.userInfo.nformcode;tempData['nusercode']=saveParam.userInfo.nusercode;tempData['nuserrolecode']=saveParam.userInfo.nuserrole;tempData[\"nlinkcode\"]=transactionStatus.NA;tempData['nattachmenttypecode']=nattachmenttypecode;tempData['jsondata']={stestsynonym:Lims_JSON_stringify(test.stestsynonym.trim(),false),// susername: saveParam.userInfo.susername,\nsusername:Lims_JSON_stringify(saveParam.userInfo.susername?saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),// suserrolename: saveParam.userInfo.suserrolename,\nsuserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename?saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nfilesize:file.size,ssystemfilename:uniquefilename,sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),slinkname:\"\",sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:selectedRecord.nneedreport?selectedRecord.nneedreport:transactionStatus.NO,sheader:Lims_JSON_stringify(selectedRecord.sheader?selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};// tempData[\"nfilesize\"] = file.size; :\n// tempData[\"ssystemfilename\"] = uniquefilename;\n// tempData[\"sfilename\"] = file.name.trim();\n// tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\ntempData['nstatus']=transactionStatus.ACTIVE;formData.append(\"uploadedFile\"+testindex1[\"index\"],file);formData.append(\"uniquefilename\"+testindex1[\"index\"],uniquefilename);fileArray.push(tempData);testindex1[\"index\"]=testindex1[\"index\"]+1;});});formData.append(\"filecount\",acceptedFiles.length*selectedMaster.length);isFileEdited=transactionStatus.YES;}else{acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];selectedMaster.forEach(function(test,testindex){var fileName=selectedRecord.nregattachmentcode&&selectedRecord.nregattachmentcode>0&&selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;var tempData={};tempData['ntestattachmentcode']=selectedRecord.ntestattachmentcode?selectedRecord.ntestattachmentcode:0;tempData[\"ntransactiontestcode\"]=selectedRecord.ntransactiontestcode;tempData[\"ntransactionsamplecode\"]=selectedRecord.ntransactionsamplecode;tempData[\"npreregno\"]=selectedRecord.npreregno;tempData['nformcode']=saveParam.userInfo.nformcode;tempData['nusercode']=saveParam.userInfo.nusercode;tempData['nuserrolecode']=saveParam.userInfo.nuserrole;tempData[\"nlinkcode\"]=transactionStatus.NA;tempData['nattachmenttypecode']=nattachmenttypecode;tempData['jsondata']={stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),// susername: saveParam.userInfo.susername,\nsusername:Lims_JSON_stringify(saveParam.userInfo.susername?saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),// suserrolename: saveParam.userInfo.suserrolename,\nsuserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename?saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nfilesize:file.size,ssystemfilename:uniquefilename,sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),slinkname:\"\",sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:selectedRecord.nneedreport?selectedRecord.nneedreport:transactionStatus.NO,sheader:Lims_JSON_stringify(selectedRecord.sheader?selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};// tempData[\"nfilesize\"] = file.size;\n// tempData[\"ssystemfilename\"] = uniquefilename;\n// tempData[\"sfilename\"] = file.name.trim();\n// tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\ntempData['nstatus']=transactionStatus.ACTIVE;formData.append(\"uploadedFile\"+testindex1[\"index\"],file);formData.append(\"uniquefilename\"+testindex1[\"index\"],uniquefilename);fileArray.push(tempData);testindex1[\"index\"]=testindex1[\"index\"]+1;});});formData.append(\"filecount\",acceptedFiles.length*selectedMaster.length);isFileEdited=transactionStatus.YES;}}else{selectedMaster.forEach(function(test){var sampleFile={};sampleFile['ntestattachmentcode']=selectedRecord.ntestattachmentcode?selectedRecord.ntestattachmentcode:0;sampleFile[\"ntransactiontestcode\"]=selectedRecord.ntransactiontestcode;sampleFile[\"ntransactionsamplecode\"]=selectedRecord.ntransactionsamplecode;sampleFile[\"npreregno\"]=selectedRecord.npreregno;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=transactionStatus.NA;// sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\nsampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile['jsondata']={stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),// susername: saveParam.userInfo.susername,\nsusername:Lims_JSON_stringify(saveParam.userInfo.susername?saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),// suserrolename: saveParam.userInfo.suserrolename,\nsuserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename?saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nfilesize:selectedRecord.size,ssystemfilename:selectedRecord.ssystemfilename,sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),slinkname:\"\",sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:selectedRecord.nneedreport?selectedRecord.nneedreport:transactionStatus.NO,sheader:Lims_JSON_stringify(selectedRecord.sheader?selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};// sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\n// sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\n// sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\nsampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}}else{if(saveParam.operation==='create'){selectedMaster.forEach(function(test){var sampleFile={};sampleFile['ntestattachmentcode']=selectedRecord.ntestattachmentcode?selectedRecord.ntestattachmentcode:0;sampleFile[\"ntransactiontestcode\"]=test.ntransactiontestcode;sampleFile[\"ntransactionsamplecode\"]=test.ntransactionsamplecode;sampleFile[\"npreregno\"]=test.npreregno;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;sampleFile[\"jsondata\"]={stestsynonym:Lims_JSON_stringify(test.stestsynonym.trim(),false),// susername: saveParam.userInfo.susername,\nsusername:Lims_JSON_stringify(saveParam.userInfo.susername?saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),// suserrolename: saveParam.userInfo.suserrolename,\nsuserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename?saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),ssystemfilename:\"\",sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:0,slinkname:selectedRecord.nlinkcode.label,sdescription:Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:transactionStatus.NO,sheader:Lims_JSON_stringify(selectedRecord.sheader?selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};sampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}else{selectedMaster.forEach(function(test){var sampleFile={};sampleFile['ntestattachmentcode']=selectedRecord.ntestattachmentcode?selectedRecord.ntestattachmentcode:0;sampleFile[\"ntransactiontestcode\"]=selectedRecord.ntransactiontestcode;sampleFile[\"ntransactionsamplecode\"]=selectedRecord.ntransactionsamplecode;sampleFile[\"npreregno\"]=selectedRecord.npreregno;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;sampleFile[\"jsondata\"]={stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),// susername: saveParam.userInfo.susername,\nsusername:Lims_JSON_stringify(saveParam.userInfo.susername?saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),// suserrolename: saveParam.userInfo.suserrolename,\nsuserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename?saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),ssystemfilename:\"\",sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:0,slinkname:selectedRecord.nlinkcode.label,sdescription:Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:transactionStatus.NO,sheader:Lims_JSON_stringify(selectedRecord.sheader?selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};sampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"testattachment\",JSON.stringify(fileArray));//ALPD-1728\n// formData.append(\"testattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\nformData.append(\"nattachmenttypecode\",nattachmenttypecode);formData.append(\"ntransactiontestcode\",saveParam.ntransactiontestcode);// formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\nvar inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},saveParam.userInfo),{},{sformname:Lims_JSON_stringify(saveParam.userInfo.sformname),smodulename:Lims_JSON_stringify(saveParam.userInfo.smodulename),slanguagename:Lims_JSON_stringify(saveParam.userInfo.slanguagename)})},formData:formData,isFileupload:true,operation:saveParam.operation,classUrl:\"attachment\",saveType:saveParam.saveType,formRef:saveParam.formRef,methodUrl:\"TestAttachment\"};return inputParam;}export function onSaveBatchAttachment(saveParam,selectedMaster){var formData=new FormData();var selectedRecord=saveParam.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var fileArray=[];var nreleasebatchcode=selectedMaster.nreleasebatchcode;if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var fileName=selectedRecord.nbatchfilecode&&selectedRecord.nbatchfilecode>0&&selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;//selectedMaster.forEach(sample=>{\nvar tempData={};tempData['nbatchfilecode']=selectedRecord.nbatchfilecode?selectedRecord.nbatchfilecode:0;tempData[\"nreleasebatchcode\"]=selectedMaster.nreleasebatchcode;tempData[\"nlinkcode\"]=transactionStatus.NA;tempData['nattachmenttypecode']=nattachmenttypecode;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"sfilename\"]=Lims_JSON_stringify(file.name.trim(),false);tempData[\"sdescription\"]=Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.trim().replaceAll('\\\\n','#r#'):\"\",false);tempData['nstatus']=transactionStatus.ACTIVE;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);fileArray.push(tempData);//nreleasebatchcode.push(selectedMaster.releasebatchcode)\n//})\n});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{// selectedMaster.forEach(sample=>{\nvar sampleFile={};sampleFile['nbatchfilecode']=selectedRecord.nbatchfilecode?selectedRecord.nbatchfilecode:0;sampleFile[\"nreleasebatchcode\"]=selectedMaster.nreleasebatchcode;sampleFile[\"nlinkcode\"]=transactionStatus.NA;sampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;sampleFile[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.sfilename.trim(),false);sampleFile[\"sdescription\"]=Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.trim().replaceAll('\\\\n','#r#'):\"\",false);sampleFile['nstatus']=transactionStatus.ACTIVE;//npreregno.push(sample.npreregno)\nfileArray.push(sampleFile);// })\n}}else{//selectedMaster.forEach(sample=>{\nvar _sampleFile={};_sampleFile['nbatchfilecode']=selectedRecord.nbatchfilecode?selectedRecord.nbatchfilecode:0;_sampleFile[\"nreleasebatchcode\"]=selectedMaster.nreleasebatchcode;_sampleFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;_sampleFile['nattachmenttypecode']=nattachmenttypecode;_sampleFile[\"ssystemfilename\"]=\"\";_sampleFile[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.slinkfilename.trim(),false);_sampleFile[\"sdescription\"]=Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.trim():\"\",false);_sampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(_sampleFile);//npreregno.push(sample.npreregno)\n//})  \n}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"batchcreationfile\",JSON.stringify(fileArray));//ALPD-1728\n//formData.append(\"batchcreationfile\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\nformData.append(\"nattachmenttypecode\",nattachmenttypecode);formData.append(\"nreleasebatchcode\",nreleasebatchcode);formData.append(\"userinfo\",JSON.stringify(saveParam.userInfo));var inputParam={inputData:{userinfo:saveParam.userInfo},formData:formData,isFileupload:true,operation:saveParam.operation,classUrl:\"attachment\",saveType:saveParam.saveType,formRef:saveParam.formRef,methodUrl:\"BatchCreationFile\"};return inputParam;}export function onSaveSubSampleAttachment(saveParam,selectedMaster){var formData=new FormData();var selectedRecord=saveParam.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var fileArray=[];var samindex={index:0};if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];// const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \n//         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\nselectedMaster.forEach(function(sample,sampleindex){var fileName=selectedRecord.nsampleattachmentcode&&selectedRecord.nsampleattachmentcode>0&&selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;var tempData={};tempData['nsampleattachmentcode']=selectedRecord.nsampleattachmentcode?selectedRecord.nsampleattachmentcode:0;tempData[\"npreregno\"]=sample.npreregno;tempData[\"ntransactionsamplecode\"]=sample.ntransactionsamplecode;tempData['nformcode']=saveParam.userInfo.nformcode;tempData['nusercode']=saveParam.userInfo.nusercode;tempData['nuserrolecode']=saveParam.userInfo.nuserrole;tempData[\"nlinkcode\"]=transactionStatus.NA;// tempData[\"nfilesize\"] = file.size;\ntempData['jsondata']={// susername: saveParam.userInfo.susername,\nsusername:Lims_JSON_stringify(saveParam.userInfo.susername?saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),// suserrolename: saveParam.userInfo.suserrolename,\nsuserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename?saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),ssystemfilename:uniquefilename,sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:file.size,sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),slinkname:\"\",sheader:Lims_JSON_stringify(selectedRecord.sheader?selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};tempData['nattachmenttypecode']=nattachmenttypecode;// tempData[\"ssystemfilename\"] = uniquefilename;\n// tempData[\"sfilename\"] = file.name.trim();\n// tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\ntempData['nstatus']=transactionStatus.ACTIVE;formData.append(\"uploadedFile\"+samindex[\"index\"],file);formData.append(\"uniquefilename\"+samindex[\"index\"],uniquefilename);fileArray.push(tempData);samindex[\"index\"]=samindex[\"index\"]+1;});});formData.append(\"filecount\",acceptedFiles.length*selectedMaster.length);isFileEdited=transactionStatus.YES;}else{selectedMaster.forEach(function(sample){var sampleFile={};sampleFile['nsampleattachmentcode']=selectedRecord.nsampleattachmentcode?selectedRecord.nsampleattachmentcode:0;sampleFile[\"npreregno\"]=sample.npreregno;sampleFile[\"ntransactionsamplecode\"]=sample.ntransactionsamplecode;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=transactionStatus.NA;// sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\nsampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile['jsondata']={// susername: saveParam.userInfo.susername,\nsusername:Lims_JSON_stringify(saveParam.userInfo.susername?saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),// suserrolename: saveParam.userInfo.suserrolename,\nsuserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename?saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),ssystemfilename:selectedRecord.ssystemfilename,sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:selectedRecord.nfilesize,sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),slinkname:\"\",sheader:Lims_JSON_stringify(selectedRecord.sheader?selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};sampleFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;//sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\n// sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\nsampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}}else{selectedMaster.forEach(function(sample){var sampleFile={};sampleFile['nsampleattachmentcode']=selectedRecord.nsampleattachmentcode?selectedRecord.nsampleattachmentcode:0;sampleFile[\"npreregno\"]=sample.npreregno;sampleFile[\"ntransactionsamplecode\"]=sample.ntransactionsamplecode;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;sampleFile['jsondata']={// susername: saveParam.userInfo.susername,\nsusername:Lims_JSON_stringify(saveParam.userInfo.susername?saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),// suserrolename: saveParam.userInfo.suserrolename,\nsuserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename?saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),ssystemfilename:\"\",sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:0,slinkname:selectedRecord.nlinkcode.label,sdescription:Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),sheader:Lims_JSON_stringify(selectedRecord.sheader?selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};sampleFile['nattachmenttypecode']=nattachmenttypecode;// sampleFile[\"ssystemfilename\"] = \"\";\nsampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}formData.append(\"ncontrolCode\",saveParam.ncontrolCode);formData.append(\"isFileEdited\",isFileEdited);formData.append(\"subsampleattachment\",JSON.stringify(fileArray));//ALPD-1728\n//formData.append(\"subsampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\nformData.append(\"nattachmenttypecode\",nattachmenttypecode);formData.append(\"npreregno\",saveParam.npreregno);formData.append(\"ntransactionsamplecode\",saveParam.ntransactionsamplecode);//formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\nformData.append(\"userinfo\",JSON.stringify(_objectSpread(_objectSpread({},saveParam.userInfo),{},{sformname:Lims_JSON_stringify(saveParam.userInfo.sformname),smodulename:Lims_JSON_stringify(saveParam.userInfo.smodulename),slanguagename:Lims_JSON_stringify(saveParam.userInfo.slanguagename)})));var inputParam={inputData:{// userinfo: saveParam.userInfo },\n\"userinfo\":_objectSpread(_objectSpread({},saveParam.userInfo),{},{sformname:Lims_JSON_stringify(saveParam.userInfo.sformname),smodulename:Lims_JSON_stringify(saveParam.userInfo.smodulename),slanguagename:Lims_JSON_stringify(saveParam.userInfo.slanguagename)})},formData:formData,isFileupload:true,operation:saveParam.operation,classUrl:\"attachment\",saveType:saveParam.saveType,formRef:saveParam.formRef,methodUrl:\"SubSampleAttachment\"};return inputParam;}","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/attachmentscomments/attachments/AttachmentFunctions.js"],"names":["create_UUID","Lims_JSON_stringify","attachmentType","transactionStatus","onSaveSampleAttachment","saveParam","selectedMaster","formData","FormData","selectedRecord","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","NO","fileArray","samindex","index","FTP","Array","isArray","length","forEach","file","splittedFileName","name","split","fileExtension","sample","sampleindex","fileName","nregattachmentcode","ssystemfilename","uniquefilename","tempData","npreregno","userInfo","nformcode","nusercode","nuserrole","NA","susername","replaceAll","trim","suserrolename","nfilesize","size","sdescription","slinkname","sheader","ACTIVE","append","push","YES","sampleFile","nlinkcode","value","slinkfilename","label","slinkdescription","ncontrolCode","JSON","stringify","sformname","smodulename","slanguagename","inputParam","inputData","isFileupload","operation","classUrl","saveType","formRef","methodUrl","onSaveTestAttachment","testindex1","test","testindex","ntestattachmentcode","ntransactiontestcode","ntransactionsamplecode","stestsynonym","nneedreport","onSaveBatchAttachment","nreleasebatchcode","nbatchfilecode","userinfo","onSaveSubSampleAttachment","nsampleattachmentcode"],"mappings":"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","sourcesContent":["import { create_UUID, Lims_JSON_stringify } from \"../../../components/CommonScript\";\r\nimport { attachmentType, transactionStatus } from \"../../../components/Enumeration\";\r\n\r\nexport function onSaveSampleAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let samindex = {\r\n        index: 0\r\n    };\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            acceptedFiles.forEach((file, index) => {\r\n\r\n                const splittedFileName = file.name.split('.');\r\n                const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                // const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \r\n                //         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\r\n\r\n\r\n                selectedMaster.forEach((sample, sampleindex) => {\r\n                    const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                    const uniquefilename = fileName + '.' + fileExtension;\r\n                    const tempData = {};\r\n                    tempData['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\r\n                    tempData[\"npreregno\"] = sample.npreregno;\r\n                    tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                    tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                    tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    // tempData[\"nfilesize\"] = file.size;\r\n                    tempData['jsondata'] = {\r\n                       // susername:saveParam.userInfo.susername,\r\n                        susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                       // suserrolename: saveParam.userInfo.suserrolename,\r\n                        suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                        ssystemfilename: uniquefilename,\r\n                        sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                        nfilesize: file.size,\r\n                        sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                        slinkname: \"\",\r\n                        sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                    }\r\n                    tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                    // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    // tempData[\"sfilename\"] = file.name.trim();\r\n                    // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                    tempData['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n\r\n\r\n                    formData.append(\"uploadedFile\" + samindex[\"index\"], file);\r\n                    formData.append(\"uniquefilename\" + samindex[\"index\"], uniquefilename);\r\n                    fileArray.push(tempData);\r\n                    samindex[\"index\"] = samindex[\"index\"] + 1;\r\n                })\r\n            });\r\n            formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n\r\n            isFileEdited = transactionStatus.YES;\r\n        } else {\r\n            selectedMaster.forEach(sample => {\r\n                let sampleFile = {};\r\n                sampleFile['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\r\n                sampleFile[\"npreregno\"] = sample.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['jsondata'] = {\r\n                   // susername: saveParam.userInfo.susername,\r\n                    susername : Lims_JSON_stringify( saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                   // suserrolename: saveParam.userInfo.suserrolename,\r\n                    suserrolename : Lims_JSON_stringify( saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    ssystemfilename: selectedRecord.ssystemfilename,\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: selectedRecord.nfilesize,\r\n                    sdescription:Lims_JSON_stringify( selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    slinkname: \"\",\r\n                    sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n\r\n                }\r\n                sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                sampleFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ;\r\n                // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n    } else {\r\n        selectedMaster.forEach(sample => {\r\n            let sampleFile = {};\r\n            sampleFile['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\r\n            sampleFile[\"npreregno\"] = sample.npreregno;\r\n            sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n            sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n            sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n            sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            sampleFile['jsondata'] = {\r\n               // susername: saveParam.userInfo.susername,\r\n                susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(): \"\",false),\r\n               // suserrolename: saveParam.userInfo.suserrolename,\r\n               suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(): \"\",false),\r\n                ssystemfilename: \"\",\r\n                sfilename:Lims_JSON_stringify( selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),\r\n                nfilesize: 0,\r\n                slinkname: selectedRecord.nlinkcode.label,\r\n                sdescription:Lims_JSON_stringify(  selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(): \"\",false),\r\n                sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n\r\n            }\r\n            sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n            // sampleFile[\"ssystemfilename\"] = \"\";\r\n            sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n            fileArray.push(sampleFile);\r\n        })\r\n    }\r\n    formData.append(\"ncontrolCode\", saveParam.ncontrolCode);\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"sampleattachment\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n    //formData.append(\"sampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"npreregno\", saveParam.npreregno);\r\n    //formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n    formData.append(\"userinfo\", JSON.stringify({...saveParam.userInfo,\r\n                                                sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n                                                smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n                                                slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}));\r\n    const inputParam = {\r\n       // inputData: { userinfo: saveParam.userInfo },\r\n       inputData: {// userinfo: saveParam.userInfo },\r\n                    \"userinfo\": {...saveParam.userInfo,\r\n                    sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n                    smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n                    slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}},\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"SampleAttachment\"\r\n    }\r\n    return inputParam;\r\n}\r\n\r\nexport function onSaveTestAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let testindex1 = {\r\n        index: 0\r\n    };\r\n\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            if(saveParam.operation==='create'){\r\n                acceptedFiles.forEach((file, index) => {\r\n\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n    \r\n    \r\n                    selectedMaster.forEach((test, testindex) => {\r\n                        const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                        const uniquefilename = fileName + '.' + fileExtension;\r\n                        const tempData = {};\r\n                        tempData['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                        tempData[\"ntransactiontestcode\"] = test.ntransactiontestcode;\r\n                        tempData[\"ntransactionsamplecode\"] = test.ntransactionsamplecode;\r\n                        tempData[\"npreregno\"] = test.npreregno;\r\n                        tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                        tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                        tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                        tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                        tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                        tempData['jsondata'] = {\r\n                            stestsynonym:Lims_JSON_stringify(test.stestsynonym.trim(),false),\r\n                           // susername: saveParam.userInfo.susername,\r\n                            susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),            \r\n                           // suserrolename: saveParam.userInfo.suserrolename,\r\n                            suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                            nfilesize: file.size,\r\n                            ssystemfilename: uniquefilename,\r\n                            sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                            slinkname: \"\",                         \r\n                            sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                            nneedreport:selectedRecord.nneedreport ?  selectedRecord.nneedreport  : transactionStatus.NO,\r\n                            sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                        }\r\n                        // tempData[\"nfilesize\"] = file.size; :\r\n                        // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                        // tempData[\"sfilename\"] = file.name.trim();\r\n                        // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                        tempData['nstatus'] = transactionStatus.ACTIVE;\r\n    \r\n    \r\n                        formData.append(\"uploadedFile\" + testindex1[\"index\"], file);\r\n                        formData.append(\"uniquefilename\" + testindex1[\"index\"], uniquefilename);\r\n                        fileArray.push(tempData);\r\n                        testindex1[\"index\"] = testindex1[\"index\"] + 1;\r\n                    })\r\n                });\r\n                formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n                isFileEdited = transactionStatus.YES;\r\n            }else {\r\n                acceptedFiles.forEach((file, index) => {\r\n\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n    \r\n    \r\n                    selectedMaster.forEach((test, testindex) => {\r\n                        const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                        const uniquefilename = fileName + '.' + fileExtension;\r\n                        const tempData = {};\r\n                        tempData['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                        tempData[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\r\n                        tempData[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\r\n                        tempData[\"npreregno\"] = selectedRecord.npreregno;\r\n                        tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                        tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                        tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                        tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                        tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                        tempData['jsondata'] = {\r\n                            stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),\r\n                            // susername: saveParam.userInfo.susername,\r\n                            susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                             // suserrolename: saveParam.userInfo.suserrolename,\r\n                            suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                            nfilesize: file.size,\r\n                            ssystemfilename: uniquefilename,\r\n                            sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                            slinkname: \"\",\r\n                            sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),\r\n                            nneedreport:selectedRecord.nneedreport ?  selectedRecord.nneedreport  : transactionStatus.NO   ,\r\n                            sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                        }\r\n                        // tempData[\"nfilesize\"] = file.size;\r\n                        // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                        // tempData[\"sfilename\"] = file.name.trim();\r\n                        // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                        tempData['nstatus'] = transactionStatus.ACTIVE;\r\n    \r\n    \r\n                        formData.append(\"uploadedFile\" + testindex1[\"index\"], file);\r\n                        formData.append(\"uniquefilename\" + testindex1[\"index\"], uniquefilename);\r\n                        fileArray.push(tempData);\r\n                        testindex1[\"index\"] = testindex1[\"index\"] + 1;\r\n                    })\r\n                });\r\n                formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n                isFileEdited = transactionStatus.YES;\r\n            }\r\n\r\n            \r\n        } else {\r\n            selectedMaster.forEach(test => {\r\n                let sampleFile = {};\r\n                sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                sampleFile[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\r\n                sampleFile[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\r\n                sampleFile[\"npreregno\"] = selectedRecord.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['jsondata'] = {\r\n                    stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),\r\n                    // susername: saveParam.userInfo.susername,\r\n                    susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                            \r\n                    // suserrolename: saveParam.userInfo.suserrolename,\r\n                    suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    nfilesize: selectedRecord.size,\r\n                    ssystemfilename: selectedRecord.ssystemfilename,\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                    slinkname: \"\",\r\n                    sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(): \"\",false),\r\n                    nneedreport:selectedRecord.nneedreport ? selectedRecord.nneedreport : transactionStatus.NO,\r\n                    sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                }\r\n                // sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                // sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\r\n                // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n    } else {\r\n        if(saveParam.operation==='create'){\r\n            selectedMaster.forEach(test => {\r\n                let sampleFile = {};\r\n                sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                sampleFile[\"ntransactiontestcode\"] = test.ntransactiontestcode;\r\n                sampleFile[\"ntransactionsamplecode\"] = test.ntransactionsamplecode;\r\n                sampleFile[\"npreregno\"] = test.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n                sampleFile[\"jsondata\"] = {\r\n                    stestsynonym:Lims_JSON_stringify(test.stestsynonym.trim(),false),\r\n                    // susername: saveParam.userInfo.susername,\r\n                    susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                        \r\n                    // suserrolename: saveParam.userInfo.suserrolename,\r\n                    suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    ssystemfilename: \"\",\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: 0,\r\n                    slinkname: selectedRecord.nlinkcode.label,\r\n                    sdescription:Lims_JSON_stringify( selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    nneedreport : transactionStatus.NO,\r\n                    sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                };\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }else {\r\n            selectedMaster.forEach(test => {\r\n                let sampleFile = {};\r\n                sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                sampleFile[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\r\n                sampleFile[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\r\n                sampleFile[\"npreregno\"] = selectedRecord.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n                sampleFile[\"jsondata\"] = {\r\n                    stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),\r\n                     // susername: saveParam.userInfo.susername,\r\n                     susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                            \r\n                     // suserrolename: saveParam.userInfo.suserrolename,\r\n                     suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    ssystemfilename: \"\",\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: 0,\r\n                    slinkname: selectedRecord.nlinkcode.label,\r\n                    sdescription:Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),\r\n                    nneedreport : transactionStatus.NO,\r\n                    sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                };\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n\r\n    }\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"testattachment\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n   // formData.append(\"testattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"ntransactiontestcode\", saveParam.ntransactiontestcode);\r\n   // formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n\r\n\r\n    const inputParam = {\r\n        inputData: { \"userinfo\": {...saveParam.userInfo,\r\n            sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n            smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n            slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)} },\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"TestAttachment\"\r\n    }\r\n    return inputParam;\r\n}\r\n\r\nexport function onSaveBatchAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let nreleasebatchcode = selectedMaster.nreleasebatchcode;\r\n\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            acceptedFiles.forEach((file, index) => {\r\n\r\n                const splittedFileName = file.name.split('.');\r\n                const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                const fileName = selectedRecord.nbatchfilecode && selectedRecord.nbatchfilecode > 0 &&\r\n                    selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ?\r\n                    selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                const uniquefilename = fileName + '.' + fileExtension;\r\n\r\n                //selectedMaster.forEach(sample=>{\r\n\r\n                const tempData = {};\r\n                tempData['nbatchfilecode'] = selectedRecord.nbatchfilecode ?\r\n                    selectedRecord.nbatchfilecode : 0;\r\n                tempData[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\r\n                tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                tempData['nattachmenttypecode'] = nattachmenttypecode;\r\n                tempData[\"ssystemfilename\"] = uniquefilename;\r\n                tempData[\"sfilename\"] =Lims_JSON_stringify(file.name.trim(),false)  ;\r\n                tempData[\"sdescription\"] =Lims_JSON_stringify( selectedRecord.sdescription ? selectedRecord.sdescription.trim().replaceAll('\\\\n','#r#'):\"\",false)  ;\r\n                tempData['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n\r\n                formData.append(\"uploadedFile\" + index, file);\r\n                formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                fileArray.push(tempData);\r\n                //nreleasebatchcode.push(selectedMaster.releasebatchcode)\r\n                //})\r\n            });\r\n            formData.append(\"filecount\", acceptedFiles.length);\r\n            isFileEdited = transactionStatus.YES;\r\n        }\r\n        else {\r\n            // selectedMaster.forEach(sample=>{\r\n            let sampleFile = {};\r\n            sampleFile['nbatchfilecode'] = selectedRecord.nbatchfilecode ? selectedRecord.nbatchfilecode : 0;\r\n            sampleFile[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\r\n            sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n            sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n            sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n            sampleFile[\"sfilename\"] =Lims_JSON_stringify(selectedRecord.sfilename.trim(),false)  ;\r\n            sampleFile[\"sdescription\"] =Lims_JSON_stringify(  selectedRecord.sdescription ? selectedRecord.sdescription.trim().replaceAll('\\\\n','#r#') : \"\",false);\r\n            sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n            //npreregno.push(sample.npreregno)\r\n            fileArray.push(sampleFile);\r\n            // })\r\n        }\r\n    } else {\r\n        //selectedMaster.forEach(sample=>{\r\n        let sampleFile = {};\r\n        sampleFile['nbatchfilecode'] = selectedRecord.nbatchfilecode ? selectedRecord.nbatchfilecode : 0;\r\n        sampleFile[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\r\n        sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n        sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n        sampleFile[\"ssystemfilename\"] = \"\";\r\n        sampleFile[\"sfilename\"] =Lims_JSON_stringify(selectedRecord.slinkfilename.trim(),false)  ;\r\n        sampleFile[\"sdescription\"] =Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\",false)  ;\r\n        sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n        fileArray.push(sampleFile);\r\n        //npreregno.push(sample.npreregno)\r\n        //})  \r\n    }\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"batchcreationfile\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n    //formData.append(\"batchcreationfile\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"nreleasebatchcode\", nreleasebatchcode);\r\n    formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n\r\n    const inputParam = {\r\n        inputData: { userinfo: saveParam.userInfo },\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"BatchCreationFile\"\r\n    }\r\n    return inputParam;\r\n}\r\n\r\nexport function onSaveSubSampleAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let samindex = {\r\n        index: 0\r\n    };\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            acceptedFiles.forEach((file, index) => {\r\n\r\n                const splittedFileName = file.name.split('.');\r\n                const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                // const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \r\n                //         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\r\n\r\n\r\n                selectedMaster.forEach((sample, sampleindex) => {\r\n                    const fileName = selectedRecord.nsampleattachmentcode && selectedRecord.nsampleattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                    const uniquefilename = fileName + '.' + fileExtension;\r\n                    const tempData = {};\r\n                    tempData['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\r\n                    tempData[\"npreregno\"] = sample.npreregno;\r\n                    tempData[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\r\n                    tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                    tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                    tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    // tempData[\"nfilesize\"] = file.size;\r\n                    tempData['jsondata'] = {\r\n                        // susername: saveParam.userInfo.susername,\r\n                        susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                            \r\n                        // suserrolename: saveParam.userInfo.suserrolename,\r\n                        suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                        ssystemfilename: uniquefilename,\r\n                        sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                        nfilesize: file.size,\r\n                        sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false)  ,\r\n                        slinkname: \"\",\r\n                        sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                    }\r\n                    tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                    // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    // tempData[\"sfilename\"] = file.name.trim();\r\n                    // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                    tempData['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n\r\n\r\n                    formData.append(\"uploadedFile\" + samindex[\"index\"], file);\r\n                    formData.append(\"uniquefilename\" + samindex[\"index\"], uniquefilename);\r\n                    fileArray.push(tempData);\r\n                    samindex[\"index\"] = samindex[\"index\"] + 1;\r\n                })\r\n            });\r\n            formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n\r\n            isFileEdited = transactionStatus.YES;\r\n        } else {\r\n            selectedMaster.forEach(sample => {\r\n                let sampleFile = {};\r\n                sampleFile['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\r\n                sampleFile[\"npreregno\"] = sample.npreregno;\r\n                sampleFile[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['jsondata'] = {\r\n                    // susername: saveParam.userInfo.susername,\r\n                    susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                            \r\n                    // suserrolename: saveParam.userInfo.suserrolename,\r\n                    suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    ssystemfilename: selectedRecord.ssystemfilename,\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: selectedRecord.nfilesize,\r\n                    sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                    slinkname: \"\",\r\n                    sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                }\r\n                sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                //sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\r\n                // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n    } else {\r\n        selectedMaster.forEach(sample => {\r\n            let sampleFile = {};\r\n            sampleFile['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\r\n            sampleFile[\"npreregno\"] = sample.npreregno;\r\n            sampleFile[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\r\n            sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n            sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n            sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n            sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            sampleFile['jsondata'] = {\r\n                // susername: saveParam.userInfo.susername,\r\n                susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                            \r\n                // suserrolename: saveParam.userInfo.suserrolename,\r\n                suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                ssystemfilename: \"\",\r\n                sfilename:Lims_JSON_stringify( selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                nfilesize: 0,\r\n                slinkname: selectedRecord.nlinkcode.label,\r\n                sdescription:Lims_JSON_stringify( selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n            }\r\n            sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n            // sampleFile[\"ssystemfilename\"] = \"\";\r\n            sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n            fileArray.push(sampleFile);\r\n        })\r\n    }\r\n    formData.append(\"ncontrolCode\", saveParam.ncontrolCode);\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"subsampleattachment\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n    //formData.append(\"subsampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"npreregno\", saveParam.npreregno);\r\n    formData.append(\"ntransactionsamplecode\", saveParam.ntransactionsamplecode);\r\n    //formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n\r\n    formData.append(\"userinfo\", JSON.stringify({...saveParam.userInfo,\r\n        sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n        smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n        slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}));\r\n\r\n    const inputParam = {\r\n        inputData: {// userinfo: saveParam.userInfo },\r\n                    \"userinfo\": {...saveParam.userInfo,\r\n                    sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n                    smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n                    slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}},\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"SubSampleAttachment\"\r\n    }\r\n    return inputParam;\r\n}"]},"metadata":{},"sourceType":"module"}