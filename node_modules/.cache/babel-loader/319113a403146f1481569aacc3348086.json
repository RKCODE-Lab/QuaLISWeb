{"ast":null,"code":"var _jsxFileName = \"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\src\\\\pages\\\\competencemanagement\\\\traininguserview\\\\UserView.jsx\";\nimport React, { Component } from 'react';\nimport { Row, Col, Card, FormGroup, FormLabel } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { callService, filterColumnData, changeTrainingUserViewDateFilter, getTrainingUserViewDetails } from '../../../actions';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { toast } from 'react-toastify';\nimport { getControlMap, convertDateValuetoString } from '../../../components/CommonScript';\nimport ListMaster from '../../../components/list-master/list-master.component';\nimport { ReadOnlyText, ContentPanel } from '../../../components/App.styles';\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes';\nimport 'react-perfect-scrollbar/dist/css/styles.css';\nimport ReactTooltip from 'react-tooltip';\nimport BreadcrumbComponent from '../../../components/Breadcrumb.Component';\nimport { Affix } from 'rsuite';\nimport TrainingUserViewDateFilter from '../../../pages/competencemanagement/traininguserview/TrainingUserViewDateFilter';\nimport UserViewTrainingDocumentTab from './UserViewTrainingDocumentTab';\nimport CustomTab from \"../../../components/custom-tabs/custom-tabs.component\";\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass UserView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.openFilter = () => {\n      let showFilter = !this.props.Login.showFilter;\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          showFilter\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.closeFilter = () => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          showFilter: false\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.onFilterSubmit = () => {\n      this.searchRef.current.value = \"\";\n      let fromDate = this.state.selectedRecord[\"fromdate\"] ? this.state.selectedRecord[\"fromdate\"] : this.props.Login.masterData.FromDate;\n      let toDate = this.state.selectedRecord[\"todate\"] ? this.state.selectedRecord[\"todate\"] : this.props.Login.masterData.ToDate;\n      let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);\n      let inputParam = {\n        inputData: {\n          fromDate: obj.fromDate,\n          toDate: obj.toDate,\n          usercode: this.props.Login.userInfo.nusercode,\n          userinfo: this.props.Login.userInfo\n        },\n        classUrl: \"userview\",\n        methodUrl: \"UserView\",\n        displayName: \"IDS_TRAININGUSERVIEW\",\n        userInfo: this.props.Login.userInfo\n      };\n      this.props.changeTrainingUserViewDateFilter(inputParam);\n    };\n\n    this.tabDetail = () => {\n      const tabMap = new Map();\n      tabMap.set(\"IDS_USERVIEWTRAININGDOCUMENT\", /*#__PURE__*/React.createElement(UserViewTrainingDocumentTab, {\n        controlMap: this.state.controlMap,\n        userRoleControlRights: this.state.userRoleControlRights,\n        masterData: this.props.Login.masterData,\n        userInfo: this.props.Login.userInfo,\n        TrainingDocuments: this.props.Login.masterData.TrainingDocuments,\n        screenName: \"IDS_USERVIEWTRAININGDOCUMENT\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }\n      }));\n      return tabMap;\n    };\n\n    this.handleDateChange = (dateName, dateValue) => {\n      const {\n        selectedRecord\n      } = this.state;\n      selectedRecord[dateName] = dateValue;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.reloadData = (selectedRecord, isDateChange) => {\n      let fromDate = this.props.Login.masterData.FromDate;\n      let toDate = this.props.Login.masterData.ToDate;\n      let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo, true);\n      const inputParam = {\n        inputData: {\n          \"userinfo\": this.props.Login.userInfo,\n          fromDate: obj.fromDate,\n          toDate: obj.toDate\n        },\n        classUrl: 'userview',\n        methodUrl: \"UserView\",\n        displayName: \"IDS_TRAININGUSERVIEW\",\n        userInfo: this.props.Login.userInfo\n      };\n      this.props.callService(inputParam);\n    };\n\n    this.state = {\n      selectedRecord: {},\n      error: \"\",\n      userRoleControlRights: [],\n      controlMap: new Map(),\n      skip: 0,\n      take: this.props.Login.settings ? this.props.Login.settings[3] : 25\n    };\n    this.searchRef = React.createRef();\n    this.searchFieldList = [\"strainingvenue\", \"strainingtopic\", \"strainername\"];\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.Login.masterStatus !== \"\") {\n      if (props.Login.errorCode === 417 || props.Login.errorCode === 409) {\n        toast.warn(props.Login.masterStatus);\n        props.Login.masterStatus = \"\";\n      }\n    }\n\n    if (props.Login.error !== state.error) {\n      toast.error(props.Login.error);\n      props.Login.error = \"\";\n    }\n\n    return null;\n  }\n\n  render() {\n    let obj = convertDateValuetoString(this.state.selectedRecord[\"fromdate\"] || this.props.Login.masterData && this.props.Login.masterData.FromDate, this.state.selectedRecord[\"todate\"] || this.props.Login.masterData && this.props.Login.masterData.ToDate, this.props.Login.userInfo);\n    let fromDate = obj.fromDate;\n    let toDate = obj.toDate;\n    const {\n      SelectedTrainingUserView\n    } = this.props.Login.masterData;\n    const filterParam = {\n      inputListName: \"TrainingUserView\",\n      selectedObject: \"SelectedTrainingUserView\",\n      primaryKeyField: \"nparticipantcode\",\n      fetchUrl: \"userview/getTrainingUserViewDetails\",\n      fecthInputObject: {\n        userinfo: this.props.Login.userInfo\n      },\n      masterData: this.props.Login.masterData,\n      searchFieldList: this.searchFieldList\n    };\n    let breadCrumbData = this.state.filterData || [];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, breadCrumbData.length > 0 ? /*#__PURE__*/React.createElement(Affix, {\n      top: 53,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(BreadcrumbComponent, {\n      breadCrumbItem: breadCrumbData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 29\n      }\n    })) : \"\", /*#__PURE__*/React.createElement(ReactTooltip, {\n      place: \"bottom\",\n      globalEventOff: \"click\",\n      id: \"tooltip_list_wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Row, {\n      noGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(ListMaster, {\n      searchRef: this.searchRef,\n      screenName: \"UserView\",\n      userRoleControlRights: this.state.userRoleControlRights,\n      masterList: this.props.Login.masterData.searchedData || this.props.Login.masterData.TrainingUserView,\n      showFilterIcon: true,\n      openFilter: this.openFilter,\n      closeFilter: this.closeFilter,\n      onFilterSubmit: this.onFilterSubmit,\n      reloadData: this.reloadData,\n      getMasterDetail: master => this.props.getTrainingUserViewDetails(master, this.props.Login.userInfo, this.props.Login.masterData),\n      selectedMaster: this.props.Login.masterData.SelectedTrainingUserView,\n      showFilter: this.props.Login.showFilter,\n      filterColumnData: this.props.filterColumnData,\n      filterParam: filterParam,\n      primaryKeyField: \"nparticipantcode\",\n      mainField: \"strainingtopic\",\n      firstField: \"strainername\",\n      secondField: \"strainingvenue\",\n      filterComponent: [{\n        \"IDS_TRAININGUSERVIEWDATEFILTER\": /*#__PURE__*/React.createElement(TrainingUserViewDateFilter, {\n          selectedRecord: this.state.selectedRecord || {},\n          value: this.state.value || {},\n          handleDateChange: this.handleDateChange,\n          fromDate: fromDate,\n          toDate: toDate,\n          userInfo: this.props.Login.userInfo,\n          onFilterChange: this.onFilterChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 37\n          }\n        })\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(ContentPanel, {\n      className: \"panel-main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"border-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 41\n      }\n    }, this.props.Login.masterData.SelectedTrainingUserView ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(Card.Title, {\n      className: \"product-title-main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 57\n      }\n    }, this.props.Login.masterData.SelectedTrainingUserView.strainingtopic), /*#__PURE__*/React.createElement(Card.Subtitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex product-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"product-title-sub flex-grow-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 65\n      }\n    })))), /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_TRAININGTOPIC\",\n      message: \"Training Topic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 80\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 69\n      }\n    }, this.props.Login.masterData.SelectedTrainingUserView.strainingtopic))), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_TRAINERNAME\",\n      message: \"Trainer Name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 80\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 69\n      }\n    }, this.props.Login.masterData.SelectedTrainingUserView.strainername))), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_TRAININGVENUE\",\n      message: \"Training Venue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 80\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 69\n      }\n    }, this.props.Login.masterData.SelectedTrainingUserView.strainingvenue))), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_TRAININGDATE\",\n      message: \"Training Date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 80\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 69\n      }\n    }, this.props.Login.masterData.SelectedTrainingUserView.strainingdatetime))), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_TRAININGTIME\",\n      message: \"Training Time\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 80\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 69\n      }\n    }, this.props.Login.masterData.SelectedTrainingUserView.strainingtime))), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_TRAININGSTATUS\",\n      message: \"Training Status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 80\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 69\n      }\n    }, this.props.Login.masterData.SelectedTrainingUserView.strainingstatus)))), SelectedTrainingUserView && /*#__PURE__*/React.createElement(CustomTab, {\n      tabDetail: this.tabDetail(),\n      onTabChange: this.onTabChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 86\n      }\n    }))) : \"\"))))))));\n  }\n\n  generateBreadCrumData() {\n    const breadCrumbData = [];\n    let obj = convertDateValuetoString(this.props.Login.masterData.FromDate, this.props.Login.masterData.ToDate, this.props.Login.userInfo);\n    breadCrumbData.push({\n      \"label\": \"IDS_FROM\",\n      \"value\": obj.breadCrumbFrom\n    }, {\n      \"label\": \"IDS_TO\",\n      \"value\": obj.breadCrumbto\n    });\n    return breadCrumbData;\n  }\n\n  componentDidUpdate(previousProps) {\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n      this.setState({\n        selectedRecord: this.props.Login.selectedRecord\n      });\n    }\n\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\n      if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n        const userRoleControlRights = [];\n\n        if (this.props.Login.userRoleControlRights) {\n          this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item => userRoleControlRights.push(item.ncontrolcode));\n        }\n\n        const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode);\n        this.setState({\n          userRoleControlRights,\n          controlMap,\n          data: this.props.Login.masterData.TrainingUserView\n        });\n      } else {\n        if (this.props.Login.masterData.TrainingUserView) {\n          this.setState({\n            data: this.props.Login.masterData.TrainingUserView,\n            dataState: {\n              skip: 0,\n              take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\n            }\n          });\n        }\n      }\n    }\n\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\n      const filterData = this.generateBreadCrumData();\n      this.setState({\n        filterData\n      });\n    }\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  callService,\n  filterColumnData,\n  changeTrainingUserViewDateFilter,\n  getTrainingUserViewDetails\n})(injectIntl(UserView));","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/pages/competencemanagement/traininguserview/UserView.jsx"],"names":["React","Component","Row","Col","Card","FormGroup","FormLabel","connect","callService","filterColumnData","changeTrainingUserViewDateFilter","getTrainingUserViewDetails","FormattedMessage","injectIntl","toast","getControlMap","convertDateValuetoString","ListMaster","ReadOnlyText","ContentPanel","DEFAULT_RETURN","ReactTooltip","BreadcrumbComponent","Affix","TrainingUserViewDateFilter","UserViewTrainingDocumentTab","CustomTab","mapStateToProps","state","Login","UserView","constructor","props","openFilter","showFilter","updateInfo","typeName","data","updateStore","closeFilter","onFilterSubmit","searchRef","current","value","fromDate","selectedRecord","masterData","FromDate","toDate","ToDate","obj","userInfo","inputParam","inputData","usercode","nusercode","userinfo","classUrl","methodUrl","displayName","tabDetail","tabMap","Map","set","controlMap","userRoleControlRights","TrainingDocuments","handleDateChange","dateName","dateValue","setState","reloadData","isDateChange","error","skip","take","settings","createRef","searchFieldList","getDerivedStateFromProps","masterStatus","errorCode","warn","render","SelectedTrainingUserView","filterParam","inputListName","selectedObject","primaryKeyField","fetchUrl","fecthInputObject","breadCrumbData","filterData","length","searchedData","TrainingUserView","master","onFilterChange","strainingtopic","strainername","strainingvenue","strainingdatetime","strainingtime","strainingstatus","onTabChange","generateBreadCrumData","push","breadCrumbFrom","breadCrumbto","componentDidUpdate","previousProps","nformcode","Object","values","map","item","ncontrolcode","dataState","parseInt"],"mappings":"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","sourcesContent":["\r\nimport React, { Component } from 'react';\r\nimport { Row, Col, Card, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { connect } from 'react-redux';\r\n\r\nimport {\r\n    callService,filterColumnData,changeTrainingUserViewDateFilter,getTrainingUserViewDetails\r\n} from '../../../actions'\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { toast } from 'react-toastify';\r\nimport { getControlMap ,convertDateValuetoString } from '../../../components/CommonScript';\r\nimport ListMaster from '../../../components/list-master/list-master.component';\r\nimport { ReadOnlyText, ContentPanel} from '../../../components/App.styles';\r\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes';\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport BreadcrumbComponent from '../../../components/Breadcrumb.Component';\r\nimport { Affix } from 'rsuite';\r\nimport TrainingUserViewDateFilter from '../../../pages/competencemanagement/traininguserview/TrainingUserViewDateFilter';\r\nimport UserViewTrainingDocumentTab from './UserViewTrainingDocumentTab';\r\nimport CustomTab from \"../../../components/custom-tabs/custom-tabs.component\";\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass UserView extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = ({\r\n            selectedRecord: {},\r\n            error: \"\",\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            skip: 0,\r\n            take: this.props.Login.settings ? this.props.Login.settings[3] : 25\r\n        });\r\n        this.searchRef = React.createRef();\r\n        this.searchFieldList = [\"strainingvenue\", \"strainingtopic\", \"strainername\"]\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.Login.masterStatus !== \"\") {\r\n            if (props.Login.errorCode === 417 || props.Login.errorCode === 409) {\r\n                toast.warn(props.Login.masterStatus);\r\n                props.Login.masterStatus = \"\";\r\n            }\r\n        }\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n\r\n        let obj = convertDateValuetoString(this.state.selectedRecord[\"fromdate\"] || (this.props.Login.masterData && this.props.Login.masterData.FromDate),\r\n            this.state.selectedRecord[\"todate\"] || (this.props.Login.masterData && this.props.Login.masterData.ToDate),\r\n            this.props.Login.userInfo)\r\n\r\n        let fromDate = obj.fromDate;\r\n        let toDate = obj.toDate;\r\n        const { SelectedTrainingUserView } = this.props.Login.masterData;\r\n        const filterParam = {\r\n            inputListName: \"TrainingUserView\", selectedObject: \"SelectedTrainingUserView\", primaryKeyField: \"nparticipantcode\",\r\n            fetchUrl: \"userview/getTrainingUserViewDetails\", fecthInputObject: { userinfo: this.props.Login.userInfo }, masterData: this.props.Login.masterData,\r\n            searchFieldList: this.searchFieldList\r\n        };\r\n              \r\n        let breadCrumbData = this.state.filterData || [];\r\n        return (\r\n            <>\r\n                <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n                    {breadCrumbData.length > 0 ?\r\n                        <Affix top={53}>\r\n                            <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n                        </Affix> : \"\"\r\n                    }\r\n                    <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" />\r\n                    <Row noGutters={true}>\r\n                    <Col md={4}>\r\n              <ListMaster\r\n                         searchRef={this.searchRef}\r\n                         screenName={\"UserView\"}\r\n                         userRoleControlRights={this.state.userRoleControlRights}\r\n                         masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.TrainingUserView}\r\n                         showFilterIcon={true}\r\n                         openFilter={this.openFilter}\r\n                         closeFilter={this.closeFilter}\r\n                         onFilterSubmit={this.onFilterSubmit}\r\n                         reloadData={this.reloadData}\r\n                         getMasterDetail={(master) => this.props.getTrainingUserViewDetails(master, this.props.Login.userInfo, this.props.Login.masterData)}       \r\n                         selectedMaster={this.props.Login.masterData.SelectedTrainingUserView}\r\n                         showFilter={this.props.Login.showFilter}\r\n                         filterColumnData={this.props.filterColumnData}\r\n                         filterParam={filterParam}\r\n                         primaryKeyField=\"nparticipantcode\"\r\n                                mainField=\"strainingtopic\"\r\n                                firstField=\"strainername\"\r\n                                secondField=\"strainingvenue\"\r\n                                filterComponent={[\r\n                                {\r\n                                  \"IDS_TRAININGUSERVIEWDATEFILTER\": (\r\n                                    <TrainingUserViewDateFilter\r\n                                                selectedRecord={this.state.selectedRecord || {}}\r\n                                                value={this.state.value || {}}\r\n                                                handleDateChange={this.handleDateChange}\r\n                                                fromDate={fromDate}\r\n                                                toDate={toDate}\r\n                                                userInfo={this.props.Login.userInfo}\r\n                                                onFilterChange={this.onFilterChange}\r\n                                               \r\n                                            />\r\n                                  ),\r\n                                },\r\n                              ]}\r\n\r\n              />\r\n              </Col>\r\n               <Col md={8}>\r\n                            <Row>\r\n                                <Col md={12}>\r\n                                    <ContentPanel className=\"panel-main-content\">\r\n                                        <Card className=\"border-0\">\r\n                                            {this.props.Login.masterData.SelectedTrainingUserView ?\r\n                                                <>\r\n                                                    <Card.Header>\r\n                                                       \r\n                                                        <Card.Title className=\"product-title-main\">\r\n                                                            {this.props.Login.masterData.SelectedTrainingUserView.strainingtopic}\r\n                                                        </Card.Title>\r\n                                                        <Card.Subtitle>\r\n                                                            <div className=\"d-flex product-category\">\r\n                                                                <h2 className=\"product-title-sub flex-grow-1\">\r\n\r\n                                                                    \r\n                                                                </h2>\r\n                                                                \r\n                                                            </div>\r\n\r\n                                                        </Card.Subtitle>\r\n                                                    </Card.Header>\r\n                                                    <Card.Body>\r\n                                                        <Row>\r\n                                                            <Col md={4}>\r\n                                                                <FormGroup>\r\n                                                                    <FormLabel><FormattedMessage id=\"IDS_TRAININGTOPIC\" message=\"Training Topic\" /></FormLabel>\r\n                                                                    <ReadOnlyText>{this.props.Login.masterData.SelectedTrainingUserView.strainingtopic}</ReadOnlyText>\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n                                                            <Col md={4}>\r\n                                                                <FormGroup>\r\n                                                                    <FormLabel><FormattedMessage id=\"IDS_TRAINERNAME\" message=\"Trainer Name\" /></FormLabel>\r\n                                                                    <ReadOnlyText>{this.props.Login.masterData.SelectedTrainingUserView.strainername}</ReadOnlyText>\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n\r\n                                                            <Col md={4}>\r\n                                                                <FormGroup>\r\n                                                                    <FormLabel><FormattedMessage id=\"IDS_TRAININGVENUE\" message=\"Training Venue\" /></FormLabel>\r\n                                                                    <ReadOnlyText>{this.props.Login.masterData.SelectedTrainingUserView.strainingvenue }\r\n                                                                    </ReadOnlyText>\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n\r\n                                                            <Col md={4}>\r\n                                                                <FormGroup>\r\n                                                                    <FormLabel><FormattedMessage id=\"IDS_TRAININGDATE\" message=\"Training Date\" /></FormLabel>\r\n                                                                    <ReadOnlyText>{this.props.Login.masterData.SelectedTrainingUserView.strainingdatetime}</ReadOnlyText>\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n\r\n                                                            <Col md={4}>\r\n                                                                <FormGroup>\r\n                                                                    <FormLabel><FormattedMessage id=\"IDS_TRAININGTIME\" message=\"Training Time\" /></FormLabel>\r\n                                                                    <ReadOnlyText>{this.props.Login.masterData.SelectedTrainingUserView.strainingtime}</ReadOnlyText>\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n\r\n                                                            <Col md={4}>\r\n                                                                <FormGroup>\r\n                                                                    <FormLabel><FormattedMessage id=\"IDS_TRAININGSTATUS\" message=\"Training Status\" /></FormLabel>\r\n                                                                    <ReadOnlyText>\r\n                                                                        {this.props.Login.masterData.SelectedTrainingUserView.strainingstatus}\r\n                                                                    </ReadOnlyText>\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n\r\n                                                            {/* <Col md={4}>\r\n                                                                <FormGroup>\r\n                                                                    <FormLabel><FormattedMessage id=\"IDS_ATTENDANCESTATUS\" message=\"Attendance Status\" /></FormLabel>\r\n                                                                    <ReadOnlyText>\r\n                                                                        {this.props.Login.masterData.SelectedTrainingUserView.sattendancestatus}\r\n                                                                    </ReadOnlyText>\r\n                                                                </FormGroup>\r\n                                                            </Col>  */}\r\n                                                                                    \r\n                                                                                                                      \r\n                                                        </Row>\r\n                                                        {SelectedTrainingUserView && <CustomTab tabDetail={this.tabDetail()} onTabChange={this.onTabChange} />}\r\n\r\n                                                    </Card.Body>\r\n\r\n                                                </>\r\n                                                : \"\"\r\n                                            }\r\n                                        </Card>\r\n                                    </ContentPanel>\r\n                                </Col></Row>\r\n                        </Col>\r\n                    </Row>\r\n            </div>\r\n\r\n            </>\r\n        );\r\n    }\r\n    openFilter = () => {\r\n        let showFilter = !this.props.Login.showFilter;\r\n        const updateInfo = {\r\n          typeName: DEFAULT_RETURN,\r\n          data: { showFilter },\r\n        };\r\n        this.props.updateStore(updateInfo);\r\n      };\r\n    \r\n      closeFilter = () => {\r\n        const updateInfo = {\r\n          typeName: DEFAULT_RETURN,\r\n          data: { showFilter: false },\r\n        };\r\n        this.props.updateStore(updateInfo);\r\n      };\r\n    \r\n      onFilterSubmit = () => {\r\n        this.searchRef.current.value = \"\";\r\n       let fromDate= this.state.selectedRecord[\"fromdate\"] ?this.state.selectedRecord[\"fromdate\"]: this.props.Login.masterData.FromDate;\r\n       let toDate= this.state.selectedRecord[\"todate\"] ? this.state.selectedRecord[\"todate\"]: this.props.Login.masterData.ToDate;\r\n\r\n        let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);  \r\n        let inputParam ={\r\n             inputData : {\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            \r\n            usercode: this.props.Login.userInfo.nusercode,\r\n            userinfo: this.props.Login.userInfo,\r\n        },\r\n        \r\n        classUrl: \"userview\",\r\n        methodUrl: \"UserView\",\r\n        displayName: \"IDS_TRAININGUSERVIEW\",\r\n        userInfo: this.props.Login.userInfo\r\n    };\r\n    this.props.changeTrainingUserViewDateFilter(inputParam);\r\n\r\n    }\r\n    tabDetail = () => {\r\n        const tabMap = new Map();\r\n        tabMap.set(\"IDS_USERVIEWTRAININGDOCUMENT\",\r\n            <UserViewTrainingDocumentTab\r\n            controlMap={this.state.controlMap}\r\n            userRoleControlRights={this.state.userRoleControlRights}\r\n                masterData={this.props.Login.masterData}\r\n                userInfo={this.props.Login.userInfo}\r\n                TrainingDocuments={this.props.Login.masterData.TrainingDocuments}\r\n                screenName=\"IDS_USERVIEWTRAININGDOCUMENT\"\r\n            />\r\n    \r\n            );\r\n            return tabMap;\r\n\r\n    }\r\n\r\n    handleDateChange = (dateName, dateValue) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[dateName] = dateValue;\r\n        this.setState({ selectedRecord });\r\n    }\r\n    \r\n    generateBreadCrumData() {\r\n        const breadCrumbData = [];\r\n            let obj = convertDateValuetoString(this.props.Login.masterData.FromDate,\r\n                this.props.Login.masterData.ToDate,\r\n                this.props.Login.userInfo);\r\n            breadCrumbData.push(\r\n\r\n                {\r\n                    \"label\": \"IDS_FROM\",\r\n                    \"value\": obj.breadCrumbFrom\r\n                },\r\n                {\r\n                    \"label\": \"IDS_TO\",\r\n                    \"value\": obj.breadCrumbto\r\n                }\r\n            );\r\n        \r\n        return breadCrumbData;\r\n    }\r\n\r\n   \r\n    reloadData = (selectedRecord, isDateChange) => {\r\n        let fromDate = this.props.Login.masterData.FromDate;\r\n        let toDate = this.props.Login.masterData.ToDate;       \r\n        let obj = convertDateValuetoString(fromDate,toDate, this.props.Login.userInfo, true);\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": this.props.Login.userInfo,\r\n                fromDate:obj.fromDate, \r\n                toDate:obj.toDate,\r\n            },\r\n            classUrl: 'userview',\r\n            methodUrl: \"UserView\",\r\n            displayName: \"IDS_TRAININGUSERVIEW\",\r\n            userInfo: this.props.Login.userInfo\r\n        };\r\n        this.props.callService(inputParam);\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({\r\n                    userRoleControlRights, controlMap, data: this.props.Login.masterData.TrainingUserView,\r\n                });\r\n            }\r\n            else {\r\n                if (this.props.Login.masterData.TrainingUserView) {\r\n                    this.setState({\r\n                        data: this.props.Login.masterData.TrainingUserView,\r\n                        dataState : {skip:0,take:this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5},\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            const filterData = this.generateBreadCrumData();\r\n            this.setState({ filterData });\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, {\r\n    callService,filterColumnData,changeTrainingUserViewDateFilter,getTrainingUserViewDetails\r\n})(injectIntl(UserView));\r\n\r\n"]},"metadata":{},"sourceType":"module"}