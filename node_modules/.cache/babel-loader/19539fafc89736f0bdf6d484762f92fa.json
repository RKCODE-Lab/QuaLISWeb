{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Row,Col,Card,Nav}from'react-bootstrap';import{FormattedMessage,injectIntl}from'react-intl';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus}from'@fortawesome/free-solid-svg-icons';import{process}from'@progress/kendo-data-query';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import AddCommonHolidays from'../configurationmaster/AddCommonHolidays';import AddPublicHolidays from'../configurationmaster/AddPublicHolidays';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,formatInputDate}from'../../components/CommonScript';import Esign from'../audittrail/Esign';import CustomAccordion from'../../components/custom-accordion/custom-accordion.component';import HolidayPlannerTabsAccordion from'../configurationmaster/HolidayPlannerTabsAccordion';import CommonHolidaysTab from'../configurationmaster/CommonHolidaysTab';import PublicHolidaysTab from'../configurationmaster/PublicHolidaysTab';import{transactionStatus}from'../../components/Enumeration';import{toast}from'react-toastify';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import ReactTooltip from'react-tooltip';var HolidayPlannerTab=/*#__PURE__*/function(_Component){_inherits(HolidayPlannerTab,_Component);var _super=_createSuper(HolidayPlannerTab);function HolidayPlannerTab(props){var _this;_classCallCheck(this,HolidayPlannerTab);_this=_super.call(this,props);_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.PublicHolidays,event.dataState),dataState:event.dataState});};_this.ConfirmDelete=function(obj){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.Delete(obj);});};_this.holidayYearVersionAccordion=function(yearVersion){var accordionMap=new Map();yearVersion.map(function(version){return accordionMap.set(version.nholidayyearversion,/*#__PURE__*/React.createElement(HolidayPlannerTabsAccordion,{version:version,userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,userInfo:_this.props.userInfo,sendApproveYearVersion:_this.approveVersion,ConfirmDelete:_this.ConfirmDelete,masterData:_this.props.masterData// deleteRecord={this.Delete}\n,tabDetail:_this.tabDetail(version),onTabChange:_this.onTabChange}));});return accordionMap;};_this.tabDetail=function(version){var tabMap=new Map();tabMap.set(\"IDS_COMMONHOLIDAYS\",/*#__PURE__*/React.createElement(CommonHolidaysTab,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,screenName:\"IDS_COMMONHOLIDAYS\",getCommonHolidays:_this.sendCommonHolidays,masterData:_this.props.masterData,version:version}));tabMap.set(\"IDS_PUBLICHOLIDAYS\",/*#__PURE__*/React.createElement(PublicHolidaysTab,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,screenName:\"IDS_PUBLICHOLIDAYS\",getPublicHolidays:_this.getPublicHolidays,masterData:_this.props.masterData,version:version,dataResult:process(_this.state.PublicHolidays||[],_this.state.dataState),dataState:_this.state.dataState,dataStateChange:_this.dataStateChange,publicHolidaysColumns:_this.publicHolidaysColumns,deleteRecord:_this.Delete,selectedId:_this.props.selectedId}));return tabMap;};_this.getPublicHolidays=function(inputParam){if(_this.props.masterData.selectedYearVersion.ntransactionstatus===transactionStatus.DRAFT){_this.props.getPublicHolidays(inputParam);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};_this.sendCommonHolidays=function(screenName,operation,masterData,userInfo,editID){// if (masterData.selectedYearVersion && masterData.selectedYearVersion.ntransactionstatus === transactionStatus.APPROVED) {\n//     toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\" }));\n// }\n// else {\n_this.props.getCommonHolidays(screenName,operation,masterData,userInfo,editID);// }\n};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;if(fieldName===\"ntzddate\"){if(comboData===null){selectedRecord[\"ntzddate\"]=0;selectedRecord[\"stzddate\"]=\"\";}else{selectedRecord[\"stzddate\"]=comboData.label;}}_this.setState({selectedRecord:selectedRecord});};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"){loadEsign=false;openChildModal=false;}else{if(_this.props.screenName===\"HolidayYearVersion\"){openChildModal=false;}loadEsign=false;}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.handleDateChange=function(dateName,dateValue){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name==='ntransactionstatus'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;}else if(event.target.name===\"agree\"){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.approveVersion=function(yearVersion,approveYearVersion){var inputData=[];inputData[\"userinfo\"]=_this.props.userInfo;inputData[\"holidayyearversion\"]={\"nyearcode\":yearVersion.nyearcode,\"nholidayyearversion\":yearVersion.nholidayyearversion,\"ntransactionstatus\":yearVersion.ntransactionstatus};var inputParam={classUrl:_this.props.inputParam.classUrl,methodUrl:\"HolidayYearVersion\",inputData:inputData,operation:approveYearVersion.operation};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,approveYearVersion.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:approveYearVersion.screenName,operation:approveYearVersion.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}};_this.onSaveClick=function(saveType,formRef){var inputParam={};var validDate=false;// if (this.props.masterData.selectedYearVersion && this.props.masterData.selectedYearVersion.stransdisplaystatus === intl.formatMessage({ id: \"IDS_APPROVED\" })) {\n//     toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\" }));\n// }\n// else {\nif(_this.props.screenName===\"IDS_COMMONHOLIDAYS\"){validDate=true;inputParam=_this.UpdateCommonHolidays(saveType,formRef);}else if(_this.props.screenName===\"IDS_PUBLICHOLIDAYS\"){var year=new Date(_this.state.selectedRecord[\"ddate\"]).getFullYear();validDate=String(year).length===4&&String(year)===_this.props.masterData.selectedYear.syear?true:false;inputParam=_this.SavePublicHolidays(saveType,formRef);}if(validDate){if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_INVALIDDATE\"}));}// }\n};_this.addVersion=function(addParam){var inputData=[];inputData[\"userinfo\"]=_this.props.userInfo;var fieldList=[\"nholidayyearversion\",\"nversioncode\"];if(_this.props.operation===\"update\"){inputData[\"holidayyearversion\"]={\"nyearcode\":_this.props.masterData.selectedYear.nyearcode};fieldList.map(function(item){return inputData[\"holidayyearversion\"][item]=_this.state.selectedRecord[item]?_this.state.selectedRecord[item]:\"\";});}else{inputData[\"holidayyearversion\"]={\"nyearcode\":_this.props.masterData.selectedYear.nyearcode,\"nversioncode\":0};}var inputParam={classUrl:_this.props.inputParam.classUrl,methodUrl:\"HolidayYearVersion\",inputData:inputData,operation:\"create\",saveType:addParam.saveType};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,addParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:addParam.screenName,operation:addParam.operation,saveType:addParam.saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}// this.props.crudMaster(inputParam, this.props.masterData);\n};_this.Delete=function(deleteParam){var inputData=[];if(_this.props.masterData.selectedYearVersion&&_this.props.masterData.selectedYearVersion.ntransactionstatus!==transactionStatus.DRAFT){toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\"}));}else{inputData[deleteParam.methodUrl.toLowerCase()]=deleteParam.selectedRecord;inputData[\"userinfo\"]=_this.props.userInfo;var inputParam={methodUrl:deleteParam.methodUrl,classUrl:_this.props.inputParam.classUrl,inputData:inputData,operation:\"delete\",dataState:_this.state.dataState};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:deleteParam.screenName,operation:deleteParam.operation}};_this.props.updateStore(updateInfo);}else{if(showEsign(_this.props.userRoleControlRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var _updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:deleteParam.screenName,operation:deleteParam.operation}};_this.props.updateStore(_updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}}//this.props.crudMaster(inputParam, this.props.masterData);\n};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={versionSelectedRecord:{},dataResult:[],dataState:dataState,CommonHolidays:_this.props.masterData.CommonHolidays,PublicHolidays:_this.props.masterData.PublicHolidays,Country:[],CurrentYearVersion:_this.props.masterData.CurrentYearVersion,activeTab:'common-tab',selectedRecord:{}};_this.publicHolidaysColumns=[{\"idsName\":\"IDS_DATE\",\"dataField\":\"sdate\",\"width\":\"150px\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"400px\"}];_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(HolidayPlannerTab,[{key:\"render\",value:function render(){var _this2=this;this.mandatoryPublicHolidaysColumns=[{\"idsName\":\"IDS_DATE\",\"dataField\":\"ddate\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_TIMEZONE\",\"dataField\":\"ntzddate\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];var addYearVersionId=this.props.controlMap.has(\"AddHolidayYearVersion\")&&this.props.controlMap.get(\"AddHolidayYearVersion\").ncontrolcode;// const deleteYearVersionId = this.props.controlMap.has(\"DeleteHolidayYearVersion\") && this.props.controlMap.get(\"DeleteHolidayYearVersion\").ncontrolcode\n// const addCommonHolidaysId = this.props.controlMap.has(\"AddCommonHolidays\") && this.props.controlMap.get(\"AddCommonHolidays\").ncontrolcode\n// const editCommonHolidaysId = this.props.controlMap.has(\"EditCommonHolidays\") && this.props.controlMap.get(\"EditCommonHolidays\").ncontrolcode;\n// const deleteCommonHolidaysId = this.props.controlMap.has(\"DeleteCommonHolidays\") && this.props.controlMap.get(\"DeleteCommonHolidays\").ncontrolcode\n// const addPublicHolidaysId = this.props.controlMap.has(\"AddPublicHolidays\") && this.props.controlMap.get(\"AddPublicHolidays\").ncontrolcode\n// const editPublicHolidaysId = this.props.controlMap.has(\"EditPublicHolidays\") && this.props.controlMap.get(\"EditPublicHolidays\").ncontrolcode;\n// const deletePublicHolidaysId = this.props.controlMap.has(\"DeletePublicHolidays\") && this.props.controlMap.get(\"DeletePublicHolidays\").ncontrolcode\nvar AddYearVersionParam={screenName:\"HolidayYearVersion\",operation:\"create\",inputParam:this.props.inputParam,userInfo:this.props.userInfo,ncontrolCode:addYearVersionId,saveType:1};var mandatoryFields=[];if(this.props.screenName===\"IDS_PUBLICHOLIDAYS\"){this.mandatoryPublicHolidaysColumns.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,{className:\"at-tabs border-0\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(ReactTooltip,{place:\"bottom\",globalEventOff:\"click\"}),/*#__PURE__*/React.createElement(Nav.Link,{className:\"add-txt-btn\"// data-tip={this.props.intl.formatMessage({ id: \"IDS_ADDVERSION\" })}\n,hidden:this.props.userRoleControlRights.indexOf(addYearVersionId)===-1,onClick:function onClick(e){return _this2.addVersion(AddYearVersionParam);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_VERSION\",defaultMessage:\"Version\"}))))),/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},this.props.masterData.YearVersion&&this.props.masterData.YearVersion.length>0?/*#__PURE__*/React.createElement(CustomAccordion,{key:\"filter\",accordionTitle:\"sversionno\",accordionComponent:this.holidayYearVersionAccordion(this.props.masterData.YearVersion),inputParam:{masterData:this.props.masterData,userInfo:this.props.userInfo},accordionClick:this.props.getCommonAndPublicHolidays,accordionPrimaryKey:\"nholidayyearversion\",accordionObjectName:\"version\",selectedKey:this.props.masterData.selectedYearVersion.nholidayyearversion}):\"\"))),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.props.screenName,onSaveClick:this.onSaveClick,updateStore:this.props.updateStore,esign:this.props.loadEsign,showSaveContinue:this.props.screenName===\"IDS_PUBLICHOLIDAYS\"?true:false,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.screenName===\"IDS_COMMONHOLIDAYS\"?/*#__PURE__*/React.createElement(AddCommonHolidays,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,inputParam:this.props.inputParam}):this.props.screenName===\"IDS_PUBLICHOLIDAYS\"?/*#__PURE__*/React.createElement(AddPublicHolidays,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,handleDateChange:this.handleDateChange,onComboChange:this.onComboChange,timeZoneList:this.props.timeZoneList||[],userInfo:this.props.userInfo,minDate:new Date(\"01-01-\"+this.props.masterData.selectedYear.syear),maxDate:new Date(\"12-31-\"+this.props.masterData.selectedYear.syear)}):/*#__PURE__*/React.createElement(React.Fragment,null)}));}},{key:\"UpdateCommonHolidays\",value:function UpdateCommonHolidays(saveType,formRef){var _this3=this;var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;var fieldList=[\"nmonday\",\"ntuesday\",\"nwednesday\",\"nthursday\",\"nfriday\",\"nsaturday\",\"nsunday\"];if(this.props.operation===\"update\"){inputData[\"commonholidays\"]={\"nyearcode\":this.props.masterData.selectedYear.nyearcode,\"nholidayyearversion\":this.props.masterData.CommonHolidays[0].nholidayyearversion,\"ncommonholidaycode\":this.props.masterData.CommonHolidays[0].ncommonholidaycode};fieldList.map(function(item){return inputData[\"commonholidays\"][item]=_this3.state.selectedRecord[item]?_this3.state.selectedRecord[item]:\"\";});}var inputParam={classUrl:this.props.inputParam.classUrl,methodUrl:\"CommonHolidays\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef};return inputParam;}},{key:\"SavePublicHolidays\",value:function SavePublicHolidays(saveType,formRef){var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;// let fieldList = [\"npublicholidaycode\", \"ddate\", \"sdescription\"];\nif(this.props.operation===\"update\"){inputData[\"publicholidays\"]={\"nyearcode\":this.props.masterData.selectedYear.nyearcode,\"nholidayyearversion\":this.props.masterData.CommonHolidays[0].nholidayyearversion};// fieldList.map(item => {\n//     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\n// })\ninputData[\"publicholidays\"][\"npublicholidaycode\"]=this.state.selectedRecord[\"npublicholidaycode\"]?this.state.selectedRecord[\"npublicholidaycode\"]:0;inputData[\"publicholidays\"][\"ddate\"]=this.state.selectedRecord[\"ddate\"]?this.state.selectedRecord[\"ddate\"]:0;inputData[\"publicholidays\"][\"sdescription\"]=this.state.selectedRecord[\"sdescription\"]?this.state.selectedRecord[\"sdescription\"]:0;inputData[\"publicholidays\"][\"ntzddate\"]=this.state.selectedRecord[\"ntzddate\"]?this.state.selectedRecord[\"ntzddate\"].value:-1;inputData[\"publicholidays\"][\"stzddate\"]=this.state.selectedRecord[\"stzddate\"]||\"\";}else{inputData[\"publicholidays\"]={\"nyearcode\":this.props.masterData.selectedYear.nyearcode,\"nholidayyearversion\":this.props.masterData.CommonHolidays[0].nholidayyearversion};// fieldList.map(item => {\n//     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item]\n// })\ninputData[\"publicholidays\"][\"npublicholidaycode\"]=this.state.selectedRecord[\"npublicholidaycode\"]?this.state.selectedRecord[\"npublicholidaycode\"]:0;inputData[\"publicholidays\"][\"ddate\"]=this.state.selectedRecord[\"ddate\"]?this.state.selectedRecord[\"ddate\"]:0;inputData[\"publicholidays\"][\"sdescription\"]=this.state.selectedRecord[\"sdescription\"]?this.state.selectedRecord[\"sdescription\"]:0;inputData[\"publicholidays\"][\"ntzddate\"]=this.state.selectedRecord[\"ntzddate\"]?this.state.selectedRecord[\"ntzddate\"].value:-1;inputData[\"publicholidays\"][\"stzddate\"]=this.state.selectedRecord[\"stzddate\"]||\"\";}var publicHolidayDate=inputData[\"publicholidays\"][\"ddate\"];//need this conversion when the datatype of the field is 'Instant'\ninputData[\"publicholidays\"][\"ddate\"]=formatInputDate(publicHolidayDate,false);var inputParam={classUrl:this.props.inputParam.classUrl,methodUrl:\"PublicHolidays\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef};return inputParam;//this.props.crudMaster(inputParam, this.props.masterData);\n}// Delete = (e, selectedRecord, Type, methodURL,operation,screenName, ncontrolCode) => {\n},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.masterData!==previousProps.masterData){var selectedRecord=this.props.selectedRecord||this.state.selectedRecord;var dataState=this.state.dataState;if(this.props.dataState===undefined){dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};}if(this.props.operation===\"create\"&&this.props.inputParam.saveType===2){this.props.inputParam.formRef&&this.props.inputParam.formRef.current.reset();selectedRecord={ddate:new Date(),sdescription:'',ntzddate:{\"value\":this.props.userInfo.ntimezonecode,\"label\":this.props.userInfo.stimezoneid},stzddate:this.props.userInfo.stimezoneid};}this.setState({YearVersion:this.props.masterData.YearVersion,CommonHolidays:this.props.masterData.CommonHolidays,CurrentYearVersion:this.props.masterData.CurrentYearVersion,PublicHolidays:this.props.masterData.PublicHolidays,dataState:dataState,selectedRecord:selectedRecord});}else if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}}}]);return HolidayPlannerTab;}(Component);export default injectIntl(HolidayPlannerTab);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/configurationmaster/HolidayPlannerTab.jsx"],"names":["React","Component","Row","Col","Card","Nav","FormattedMessage","injectIntl","FontAwesomeIcon","faPlus","process","SlideOutModal","AddCommonHolidays","AddPublicHolidays","DEFAULT_RETURN","showEsign","formatInputDate","Esign","CustomAccordion","HolidayPlannerTabsAccordion","CommonHolidaysTab","PublicHolidaysTab","transactionStatus","toast","ConfirmMessage","ReactTooltip","HolidayPlannerTab","props","dataStateChange","event","setState","dataResult","state","PublicHolidays","dataState","ConfirmDelete","obj","confirmMessage","confirm","intl","formatMessage","id","Delete","holidayYearVersionAccordion","yearVersion","accordionMap","Map","map","version","set","nholidayyearversion","userRoleControlRights","controlMap","userInfo","approveVersion","masterData","tabDetail","onTabChange","tabMap","inputParam","sendCommonHolidays","getPublicHolidays","publicHolidaysColumns","selectedId","selectedYearVersion","ntransactionstatus","DRAFT","warn","screenName","operation","editID","getCommonHolidays","onComboChange","comboData","fieldName","selectedRecord","label","tabProps","updateInfo","typeName","data","updateStore","closeModal","loadEsign","openChildModal","handleDateChange","dateName","dateValue","onInputOnChange","target","type","name","checked","ACTIVE","DEACTIVE","YES","NO","value","approveYearVersion","inputData","nyearcode","classUrl","methodUrl","esignRights","nformcode","ncontrolCode","screenData","crudMaster","onSaveClick","saveType","formRef","validDate","UpdateCommonHolidays","year","Date","getFullYear","String","length","selectedYear","syear","SavePublicHolidays","addVersion","addParam","fieldList","item","deleteParam","toLowerCase","validateEsign","sreason","password","validateEsignCredential","skip","take","settings","parseInt","versionSelectedRecord","CommonHolidays","Country","CurrentYearVersion","activeTab","mandatoryPublicHolidaysColumns","addYearVersionId","has","get","ncontrolcode","AddYearVersionParam","mandatoryFields","forEach","mandatory","push","indexOf","e","YearVersion","getCommonAndPublicHolidays","timeZoneList","ncommonholidaycode","publicHolidayDate","previousProps","undefined","current","reset","ddate","sdescription","ntzddate","ntimezonecode","stimezoneid","stzddate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Row, Col, Card, Nav } from 'react-bootstrap';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport AddCommonHolidays from '../configurationmaster/AddCommonHolidays';\r\nimport AddPublicHolidays from '../configurationmaster/AddPublicHolidays';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, formatInputDate } from '../../components/CommonScript';\r\nimport Esign from '../audittrail/Esign';\r\nimport CustomAccordion from '../../components/custom-accordion/custom-accordion.component';\r\nimport HolidayPlannerTabsAccordion from '../configurationmaster/HolidayPlannerTabsAccordion';\r\nimport CommonHolidaysTab from '../configurationmaster/CommonHolidaysTab';\r\nimport PublicHolidaysTab from '../configurationmaster/PublicHolidaysTab';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\nimport { toast } from 'react-toastify';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nclass HolidayPlannerTab extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            versionSelectedRecord: {}, dataResult: [],\r\n            dataState: dataState, CommonHolidays: this.props.masterData.CommonHolidays,\r\n            PublicHolidays: this.props.masterData.PublicHolidays, Country: [],\r\n            CurrentYearVersion: this.props.masterData.CurrentYearVersion,\r\n            activeTab: 'common-tab', selectedRecord: {}\r\n        };\r\n        this.publicHolidaysColumns = [\r\n            { \"idsName\": \"IDS_DATE\", \"dataField\": \"sdate\", \"width\": \"150px\" },\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"400px\" }\r\n        ];\r\n        this.confirmMessage = new ConfirmMessage();\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.PublicHolidays, event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        this.mandatoryPublicHolidaysColumns = [\r\n            { \"idsName\": \"IDS_DATE\", \"dataField\": \"ddate\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"},\r\n            { \"idsName\": \"IDS_TIMEZONE\", \"dataField\": \"ntzddate\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"},\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"}\r\n        ];\r\n\r\n        const addYearVersionId = this.props.controlMap.has(\"AddHolidayYearVersion\") && this.props.controlMap.get(\"AddHolidayYearVersion\").ncontrolcode\r\n\r\n        // const deleteYearVersionId = this.props.controlMap.has(\"DeleteHolidayYearVersion\") && this.props.controlMap.get(\"DeleteHolidayYearVersion\").ncontrolcode\r\n\r\n\r\n        // const addCommonHolidaysId = this.props.controlMap.has(\"AddCommonHolidays\") && this.props.controlMap.get(\"AddCommonHolidays\").ncontrolcode\r\n        // const editCommonHolidaysId = this.props.controlMap.has(\"EditCommonHolidays\") && this.props.controlMap.get(\"EditCommonHolidays\").ncontrolcode;\r\n        // const deleteCommonHolidaysId = this.props.controlMap.has(\"DeleteCommonHolidays\") && this.props.controlMap.get(\"DeleteCommonHolidays\").ncontrolcode\r\n\r\n        // const addPublicHolidaysId = this.props.controlMap.has(\"AddPublicHolidays\") && this.props.controlMap.get(\"AddPublicHolidays\").ncontrolcode\r\n        // const editPublicHolidaysId = this.props.controlMap.has(\"EditPublicHolidays\") && this.props.controlMap.get(\"EditPublicHolidays\").ncontrolcode;\r\n        // const deletePublicHolidaysId = this.props.controlMap.has(\"DeletePublicHolidays\") && this.props.controlMap.get(\"DeletePublicHolidays\").ncontrolcode\r\n\r\n        const AddYearVersionParam = {\r\n            screenName: \"HolidayYearVersion\", operation: \"create\",\r\n            inputParam: this.props.inputParam, userInfo: this.props.userInfo, ncontrolCode: addYearVersionId,\r\n            saveType: 1\r\n        };\r\n\r\n        const mandatoryFields = [];\r\n        if (this.props.screenName === \"IDS_PUBLICHOLIDAYS\") {\r\n            this.mandatoryPublicHolidaysColumns.forEach(item => item.mandatory === true ?\r\n                mandatoryFields.push(item) : \"\"\r\n            );\r\n        }\r\n        return (\r\n            <>\r\n                {/* <Row className=\"no-gutters\">\r\n                    <Col md={12}> */}\r\n                <Card className=\"at-tabs border-0\">\r\n                    <Row noGutters={true} >\r\n                        <Col md={12}>\r\n                            <div className=\"d-flex justify-content-end\">\r\n                                <ReactTooltip place=\"bottom\" globalEventOff='click' />\r\n                                <Nav.Link className=\"add-txt-btn\"\r\n                                    // data-tip={this.props.intl.formatMessage({ id: \"IDS_ADDVERSION\" })}\r\n                                    hidden={this.props.userRoleControlRights.indexOf(addYearVersionId) === -1}\r\n                                    onClick={(e) => this.addVersion(AddYearVersionParam)}\r\n                                >\r\n                                    <FontAwesomeIcon icon={faPlus} /> { }\r\n                                    <FormattedMessage id='IDS_VERSION' defaultMessage='Version' />\r\n                                </Nav.Link>\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    {/* <Row className=\"no-gutters text-right border-bottom pt-2 pb-2\" > */}\r\n                    {/* <Col md={4}> */}\r\n                    {/* <Nav.Link className=\"add-txt-btn\"\r\n                                        onClick={(e) => this.addVersion(AddYearVersionParam)}\r\n                                    >\r\n                                        <FontAwesomeIcon icon={faPlus} /> { }\r\n                                        <FormattedMessage id='IDS_ADDVERSION' defaultMessage='Add Version' />\r\n                                    </Nav.Link> */}\r\n                    {/* </Col> */}\r\n                    {/* </Row> */}\r\n                    <Row className=\"no-gutters\">\r\n                        <Col md={12}>\r\n                            {this.props.masterData.YearVersion && this.props.masterData.YearVersion.length > 0 ?\r\n                                <CustomAccordion key=\"filter\"\r\n                                    accordionTitle={\"sversionno\"}\r\n                                    accordionComponent={this.holidayYearVersionAccordion(this.props.masterData.YearVersion)}\r\n                                    inputParam={{ masterData: this.props.masterData, userInfo: this.props.userInfo }}\r\n                                    accordionClick={this.props.getCommonAndPublicHolidays}\r\n                                    accordionPrimaryKey={\"nholidayyearversion\"}\r\n                                    accordionObjectName={\"version\"}\r\n                                    selectedKey={this.props.masterData.selectedYearVersion.nholidayyearversion}\r\n                                />\r\n                                : \"\"}\r\n                        </Col>\r\n                    </Row>\r\n                </Card>\r\n                {/* </Col>\r\n                </Row> */}\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal show={this.props.openChildModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.props.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        updateStore={this.props.updateStore}\r\n                        esign={this.props.loadEsign}\r\n                        showSaveContinue={this.props.screenName === \"IDS_PUBLICHOLIDAYS\" ? true : false}\r\n                        validateEsign={this.validateEsign}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={mandatoryFields}\r\n                        addComponent={this.props.loadEsign ?\r\n                            <Esign operation={this.props.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> :\r\n                            this.props.screenName === \"IDS_COMMONHOLIDAYS\" ?\r\n                                <AddCommonHolidays selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    inputParam={this.props.inputParam}\r\n                                />\r\n                                : this.props.screenName === \"IDS_PUBLICHOLIDAYS\" ?\r\n                                    <AddPublicHolidays\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        handleDateChange={this.handleDateChange}\r\n                                        onComboChange={this.onComboChange}\r\n                                        timeZoneList={this.props.timeZoneList || []}\r\n                                        userInfo={this.props.userInfo}\r\n                                        minDate= {new Date(\"01-01-\"+this.props.masterData.selectedYear.syear)}\r\n                                        maxDate={new Date(\"12-31-\"+this.props.masterData.selectedYear.syear)}\r\n                                    />\r\n                                    : <></>\r\n                        }\r\n                    />}\r\n            </>\r\n        );\r\n    }\r\n    ConfirmDelete = (obj) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.Delete(obj));\r\n    }\r\n\r\n    holidayYearVersionAccordion = (yearVersion) => {\r\n        const accordionMap = new Map();\r\n        yearVersion.map((version) =>\r\n            accordionMap.set(version.nholidayyearversion,\r\n                <HolidayPlannerTabsAccordion version={version}\r\n                    userRoleControlRights={this.props.userRoleControlRights}\r\n                    controlMap={this.props.controlMap}\r\n                    userInfo={this.props.userInfo}\r\n                    sendApproveYearVersion={this.approveVersion}\r\n                    ConfirmDelete={this.ConfirmDelete}\r\n                    masterData={this.props.masterData}\r\n                    // deleteRecord={this.Delete}\r\n                    tabDetail={this.tabDetail(version)}\r\n                    onTabChange={this.onTabChange}\r\n                />)\r\n        )\r\n        return accordionMap;\r\n    }\r\n    tabDetail = (version) => {\r\n        const tabMap = new Map();\r\n        tabMap.set(\"IDS_COMMONHOLIDAYS\", <CommonHolidaysTab userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            screenName={\"IDS_COMMONHOLIDAYS\"}\r\n            getCommonHolidays={this.sendCommonHolidays}\r\n            masterData={this.props.masterData}\r\n            version={version}\r\n        />)\r\n        tabMap.set(\"IDS_PUBLICHOLIDAYS\", <PublicHolidaysTab userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            screenName={\"IDS_PUBLICHOLIDAYS\"}\r\n            getPublicHolidays={this.getPublicHolidays}\r\n            masterData={this.props.masterData}\r\n            version={version}\r\n            dataResult={process(this.state.PublicHolidays || [], this.state.dataState)}\r\n            dataState={this.state.dataState}\r\n            dataStateChange={this.dataStateChange}\r\n            publicHolidaysColumns={this.publicHolidaysColumns}\r\n            deleteRecord={this.Delete}\r\n            selectedId={this.props.selectedId}\r\n        />)\r\n        return tabMap;\r\n    }\r\n    getPublicHolidays = (inputParam) => {\r\n\r\n        if (this.props.masterData.selectedYearVersion.ntransactionstatus === transactionStatus.DRAFT) {\r\n            this.props.getPublicHolidays(inputParam)\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTVERSION\" }))\r\n        }\r\n    }\r\n    sendCommonHolidays = (screenName, operation, masterData, userInfo, editID) => {\r\n        // if (masterData.selectedYearVersion && masterData.selectedYearVersion.ntransactionstatus === transactionStatus.APPROVED) {\r\n        //     toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\" }));\r\n        // }\r\n        // else {\r\n        this.props.getCommonHolidays(screenName, operation, masterData, userInfo, editID);\r\n        // }\r\n\r\n    }\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        if (fieldName === \"ntzddate\") {\r\n            if (comboData === null) {\r\n                selectedRecord[\"ntzddate\"] = 0;\r\n                selectedRecord[\"stzddate\"] = \"\";\r\n            }\r\n            else {\r\n                selectedRecord[\"stzddate\"] = comboData.label;\r\n            }\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n            }\r\n            else {\r\n                if (this.props.screenName === \"HolidayYearVersion\") {\r\n                    openChildModal = false;\r\n                }\r\n                loadEsign = false;\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord, selectedId: null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    handleDateChange = (dateName, dateValue) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[dateName] = dateValue;\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onInputOnChange = (event) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === 'ntransactionstatus') {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            }\r\n            else if (event.target.name === \"agree\") {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n            }\r\n            else {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n            }\r\n\r\n        }\r\n\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    approveVersion = (yearVersion, approveYearVersion) => {\r\n\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"holidayyearversion\"] = { \"nyearcode\": yearVersion.nyearcode, \"nholidayyearversion\": yearVersion.nholidayyearversion, \"ntransactionstatus\": yearVersion.ntransactionstatus };\r\n\r\n        const inputParam = {\r\n            classUrl: this.props.inputParam.classUrl,\r\n            methodUrl: \"HolidayYearVersion\",\r\n            inputData: inputData,\r\n            operation: approveYearVersion.operation\r\n        }\r\n\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, approveYearVersion.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                    openChildModal: true, screenName: approveYearVersion.screenName, operation: approveYearVersion.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n        }\r\n    }\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        let inputParam = {};\r\n        let validDate = false;\r\n        // if (this.props.masterData.selectedYearVersion && this.props.masterData.selectedYearVersion.stransdisplaystatus === intl.formatMessage({ id: \"IDS_APPROVED\" })) {\r\n        //     toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\" }));\r\n        // }\r\n        // else {\r\n        if (this.props.screenName === \"IDS_COMMONHOLIDAYS\") {\r\n            validDate = true;\r\n            inputParam = this.UpdateCommonHolidays(saveType, formRef);\r\n        }\r\n        else if (this.props.screenName === \"IDS_PUBLICHOLIDAYS\") {\r\n            \r\n            let year= new Date(this.state.selectedRecord[\"ddate\"]).getFullYear()\r\n            validDate =  String(year).length===4 && String(year) === this.props.masterData.selectedYear.syear ? true : false;\r\n            inputParam = this.SavePublicHolidays(saveType, formRef);\r\n        }\r\n        if(validDate){\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n        }else{\r\n            toast.warn(this.props.intl.formatMessage({id:\"IDS_INVALIDDATE\"}))\r\n        }\r\n        // }\r\n    }\r\n    addVersion = (addParam) => {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        let fieldList = [\"nholidayyearversion\", \"nversioncode\"];\r\n        if (this.props.operation === \"update\") {\r\n\r\n            inputData[\"holidayyearversion\"] = { \"nyearcode\": this.props.masterData.selectedYear.nyearcode };\r\n            fieldList.map(item => {\r\n                return inputData[\"holidayyearversion\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\r\n            })\r\n        }\r\n        else {\r\n\r\n            inputData[\"holidayyearversion\"] = { \"nyearcode\": this.props.masterData.selectedYear.nyearcode, \"nversioncode\": 0 };\r\n\r\n        }\r\n        const inputParam = {\r\n            classUrl: this.props.inputParam.classUrl,\r\n            methodUrl: \"HolidayYearVersion\",\r\n            inputData: inputData,\r\n            operation: \"create\", saveType: addParam.saveType\r\n        }\r\n\r\n\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, addParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                    openChildModal: true, screenName: addParam.screenName, operation: addParam.operation, saveType: addParam.saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n        }\r\n        // this.props.crudMaster(inputParam, this.props.masterData);\r\n    }\r\n    UpdateCommonHolidays(saveType, formRef) {\r\n\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        let fieldList = [\"nmonday\", \"ntuesday\", \"nwednesday\",\r\n            \"nthursday\", \"nfriday\", \"nsaturday\", \"nsunday\"];\r\n\r\n        if (this.props.operation === \"update\") {\r\n\r\n            inputData[\"commonholidays\"] = {\r\n                \"nyearcode\": this.props.masterData.selectedYear.nyearcode,\r\n                \"nholidayyearversion\": this.props.masterData.CommonHolidays[0].nholidayyearversion, \"ncommonholidaycode\": this.props.masterData.CommonHolidays[0].ncommonholidaycode\r\n            };\r\n\r\n            fieldList.map(item => {\r\n                return inputData[\"commonholidays\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\r\n            })\r\n        }\r\n\r\n        const inputParam = {\r\n            classUrl: this.props.inputParam.classUrl,\r\n            methodUrl: \"CommonHolidays\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef\r\n        }\r\n        return inputParam;\r\n\r\n    }\r\n    SavePublicHolidays(saveType, formRef) {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        // let fieldList = [\"npublicholidaycode\", \"ddate\", \"sdescription\"];\r\n\r\n        if (this.props.operation === \"update\") {\r\n\r\n            inputData[\"publicholidays\"] = {\r\n                \"nyearcode\": this.props.masterData.selectedYear.nyearcode,\r\n                \"nholidayyearversion\": this.props.masterData.CommonHolidays[0].nholidayyearversion\r\n            };\r\n            // fieldList.map(item => {\r\n            //     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\r\n            // })\r\n            inputData[\"publicholidays\"][\"npublicholidaycode\"] = this.state.selectedRecord[\"npublicholidaycode\"] ? this.state.selectedRecord[\"npublicholidaycode\"] : 0;\r\n            inputData[\"publicholidays\"][\"ddate\"] = this.state.selectedRecord[\"ddate\"] ? this.state.selectedRecord[\"ddate\"] : 0;\r\n            inputData[\"publicholidays\"][\"sdescription\"] = this.state.selectedRecord[\"sdescription\"] ? this.state.selectedRecord[\"sdescription\"] : 0;\r\n\r\n            inputData[\"publicholidays\"][\"ntzddate\"] = this.state.selectedRecord[\"ntzddate\"] ? this.state.selectedRecord[\"ntzddate\"].value : -1;\r\n            inputData[\"publicholidays\"][\"stzddate\"] = this.state.selectedRecord[\"stzddate\"] || \"\";\r\n        }\r\n        else {\r\n\r\n            inputData[\"publicholidays\"] = {\r\n                \"nyearcode\": this.props.masterData.selectedYear.nyearcode,\r\n                \"nholidayyearversion\": this.props.masterData.CommonHolidays[0].nholidayyearversion\r\n            };\r\n\r\n            // fieldList.map(item => {\r\n            //     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item]\r\n            // })\r\n\r\n            inputData[\"publicholidays\"][\"npublicholidaycode\"] = this.state.selectedRecord[\"npublicholidaycode\"] ? this.state.selectedRecord[\"npublicholidaycode\"] : 0;\r\n            inputData[\"publicholidays\"][\"ddate\"] = this.state.selectedRecord[\"ddate\"] ? this.state.selectedRecord[\"ddate\"] : 0;\r\n            inputData[\"publicholidays\"][\"sdescription\"] = this.state.selectedRecord[\"sdescription\"] ? this.state.selectedRecord[\"sdescription\"] : 0;\r\n\r\n            inputData[\"publicholidays\"][\"ntzddate\"] = this.state.selectedRecord[\"ntzddate\"] ? this.state.selectedRecord[\"ntzddate\"].value : -1;\r\n            inputData[\"publicholidays\"][\"stzddate\"] = this.state.selectedRecord[\"stzddate\"] || \"\";\r\n        }\r\n\r\n        const publicHolidayDate = inputData[\"publicholidays\"][\"ddate\"];\r\n        //need this conversion when the datatype of the field is 'Instant'\r\n        inputData[\"publicholidays\"][\"ddate\"] = formatInputDate(publicHolidayDate, false);\r\n\r\n        const inputParam = {\r\n            classUrl: this.props.inputParam.classUrl,\r\n            methodUrl: \"PublicHolidays\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef\r\n        }\r\n        return inputParam;\r\n        //this.props.crudMaster(inputParam, this.props.masterData);\r\n    }\r\n    // Delete = (e, selectedRecord, Type, methodURL,operation,screenName, ncontrolCode) => {\r\n    Delete = (deleteParam) => {\r\n        let inputData = [];\r\n\r\n        if (this.props.masterData.selectedYearVersion && this.props.masterData.selectedYearVersion.ntransactionstatus !== transactionStatus.DRAFT) {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\" }));\r\n        }\r\n        else {\r\n            inputData[deleteParam.methodUrl.toLowerCase()] = deleteParam.selectedRecord;\r\n            inputData[\"userinfo\"] = this.props.userInfo;\r\n            const inputParam = {\r\n                methodUrl: deleteParam.methodUrl,\r\n                classUrl: this.props.inputParam.classUrl,\r\n                inputData: inputData,\r\n                operation: \"delete\",\r\n                dataState: this.state.dataState\r\n            }\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                        openChildModal: true, screenName: deleteParam.screenName, operation: deleteParam.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                if (showEsign(this.props.userRoleControlRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n                    const updateInfo = {\r\n                        typeName: DEFAULT_RETURN,\r\n                        data: {\r\n                            loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                            openChildModal: true, screenName: deleteParam.screenName, operation: deleteParam.operation\r\n                        }\r\n                    }\r\n                    this.props.updateStore(updateInfo);\r\n                }\r\n                else {\r\n                    this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n                }\r\n            }\r\n        }\r\n        //this.props.crudMaster(inputParam, this.props.masterData);\r\n    }\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n\r\n            let selectedRecord = this.props.selectedRecord || this.state.selectedRecord;\r\n            let { dataState } = this.state;\r\n            if (this.props.dataState === undefined) {\r\n                dataState = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5 }\r\n            }\r\n            if (this.props.operation === \"create\" && this.props.inputParam.saveType === 2) {\r\n\r\n                this.props.inputParam.formRef && this.props.inputParam.formRef.current.reset();\r\n                selectedRecord = {\r\n                    ddate: new Date(), sdescription: '',\r\n                    ntzddate: {\r\n                        \"value\": this.props.userInfo.ntimezonecode,\r\n                        \"label\": this.props.userInfo.stimezoneid\r\n                    },\r\n                    stzddate: this.props.userInfo.stimezoneid\r\n                };\r\n            }\r\n            this.setState({\r\n                YearVersion: this.props.masterData.YearVersion,\r\n                CommonHolidays: this.props.masterData.CommonHolidays,\r\n                CurrentYearVersion: this.props.masterData.CurrentYearVersion, PublicHolidays: this.props.masterData.PublicHolidays,\r\n                dataState, selectedRecord\r\n\r\n\r\n\r\n\r\n            });\r\n        }\r\n        else if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n    }\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n}\r\nexport default injectIntl(HolidayPlannerTab);"]},"metadata":{},"sourceType":"module"}