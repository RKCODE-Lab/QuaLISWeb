{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{initRequest}from'./LoginAction';import{sortData,constructOptionList}from'../components/CommonScript';import{toast}from'react-toastify';import{transactionStatus}from'../components/Enumeration';import Axios from'axios';export function getSampleMaster(selectedItem,userInfo,masterData,sampleLocation,sampleHierarchyIndex){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/samplestoragemaster/getSampleMaster\",{'userinfo':userInfo,\"sampleTrayCode\":selectedItem.id}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),{},{sampleStorageMaster:response.data[\"sampleStorageMaster\"],selectedSampleStorageMaster:response.data[\"selectedSampleStorageMaster\"]});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,sampleTrayCode:selectedItem.id,selectedItem:selectedItem,sampleLocation:sampleLocation,sampleHierarchyIndex:sampleHierarchyIndex}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getSelectedApprovedStorageVersion(inputParam,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/samplestoragelocation/getActiveSampleStorageVersion\",{'userinfo':userInfo,\"nsamplestorageversioncode\":parseInt(inputParam.nsamplestorageversioncode)}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),{},{selectedSampleStorageVersion:response.data[\"selectedSampleStorageVersion\"],storageContainer:undefined,containers:undefined,sampleStorageMaster:undefined});// sortData(masterData);\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,containerLocation:undefined,activeTabIndex:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getSampleMasterDetails(masterData){return function(dispatch){dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData}});};}export function getselectedContainer(masterData){return function(dispatch){dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData}});};}export function getContainers(selectedItem,masterData,containers,locationText){return function(dispatch){masterData=_objectSpread(_objectSpread({},masterData),{},{containers:containers,selectedContainer:containers.length>0?[containers[0]]:[]});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,locationCode:selectedItem.id,selectedItem:selectedItem,locationText:locationText}});};}export function getContainerStorageCondition(selectedItem,userInfo,masterData,containerLocation){return function(dispatch){dispatch(initRequest(true));var operation=\"\";rsapi.post(\"/samplestoragemaster/getContainerStorageCondition\",{'userinfo':userInfo,\"containerCode\":selectedItem.id}).then(function(response){if(response.data[\"storageContainer\"]!==null){operation=\"update\";}else{operation=\"create\";}masterData=_objectSpread(_objectSpread({},masterData),{},{storageContainer:response.data[\"storageContainer\"]});// sortData(masterData);\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,containerCode:selectedItem.id,containerLocation:containerLocation,operation:operation,selectedItem:selectedItem}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getStorageConditionFromMaster(userInfo,masterData,editContainerID){return function(dispatch){dispatch(initRequest(true));var selectedRecord={};var urlArray=[];var operation=\"\";if(masterData[\"storageContainer\"]&&masterData[\"storageContainer\"]!==null){var geStorageCondition=rsapi.post(\"/storagecondition/getStorageCondition\",{'userinfo':userInfo});var getSampleStorageCondition=rsapi.post(\"/samplestoragemaster/getContainerStorageConditionByID\",{'userinfo':userInfo,\"containerStorageCode\":masterData[\"storageContainer\"].ncontainerstoragecode});urlArray=[geStorageCondition,getSampleStorageCondition];operation=\"update\";}else{var _geStorageCondition=rsapi.post(\"/storagecondition/getStorageCondition\",{'userinfo':userInfo});urlArray=[_geStorageCondition];operation=\"create\";}Axios.all(urlArray).then(function(response){var conditionMap=constructOptionList(response[0].data,\"nstorageconditioncode\",\"sstorageconditionname\",false,false,true);var conditionMaster=conditionMap.get(\"OptionList\");if(masterData[\"storageContainer\"]&&masterData[\"storageContainer\"]!==null){conditionMaster.map(function(item){return item.value===response[1].data[\"nstorageconditioncode\"]?selectedRecord[\"nstorageconditioncode\"]={\"label\":item.label,\"value\":item.value,\"item\":item}:\"\";});masterData=_objectSpread(_objectSpread({},masterData),{},{storageCondition:conditionMaster,storageContainer:response[1].data});}else{var defaultCondition=conditionMaster.filter(function(items){return items.item.ndefaultstatus===transactionStatus.YES;});if(defaultCondition.length>0){selectedRecord[\"nstorageconditioncode\"]={\"label\":defaultCondition[0].label,\"value\":defaultCondition[0].value,\"item\":defaultCondition};}masterData=_objectSpread(_objectSpread({},masterData),{},{storageCondition:conditionMaster});}dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,selectedRecord:selectedRecord,openModal:true,operation:operation,ncontrolcode:editContainerID}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export var changeStorageCategoryFilterOnSampleMaster=function changeStorageCategoryFilterOnSampleMaster(inputParam,filterStorageCategory){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/samplestoragemaster/getSampleStorageMasterByCategory\",inputParam.inputData).then(function(response){var masterData=response.data;dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterData:_objectSpread(_objectSpread({},masterData),{},{filterStorageCategory:filterStorageCategory,nfilterStorageCategory:inputParam.inputData.nfilterStorageCategory.value,storageContainer:undefined,containers:undefined,sampleStorageMaster:undefined}),containerLocation:undefined,activeTabIndex:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error.message);});};};export function openSampleStorageApprovedLocation(userInfo,masterData,moveId){return function(dispatch){dispatch(initRequest(true));var selectedRecord={};var urlArray=[];var geStorageCategory=rsapi.post(\"/storagecategory/getStorageCategory\",{'userinfo':userInfo});var getApprovedLocation=rsapi.post(\"/samplestoragemaster/getSampleStorageMasterByCategory\",{'userinfo':userInfo,\"nstoragecategorycode\":masterData[\"selectedSampleStorageVersion\"].nstoragecategorycode});urlArray=[geStorageCategory,getApprovedLocation];Axios.all(urlArray).then(function(response){var conditionMap=constructOptionList(response[0].data,\"nstoragecategorycode\",\"sstoragecategoryname\",false,false,true);var conditionMaster=conditionMap.get(\"OptionList\");var locationMap=constructOptionList(response[1].data[\"approvedSampleStorageLocation\"],\"nsamplestoragelocationcode\",\"ssamplestoragelocationname\",false,false,true);var locationMaster=locationMap.get(\"OptionList\");conditionMaster.map(function(item){return item.value===masterData[\"selectedSampleStorageVersion\"].nstoragecategorycode?selectedRecord[\"nstoragecategorycode\"]={\"label\":item.label,\"value\":item.value,\"item\":item.item}:\"\";});var approvedTreeData=[];locationMaster.map(function(item){return item.value===masterData[\"selectedSampleStorageVersion\"].nsamplestoragelocationcode?selectedRecord[\"nsamplestoragelocationcode\"]={\"label\":item.label,\"value\":item.value,\"item\":item.item}:\"\";});locationMaster.map(function(item){return item.value===masterData[\"selectedSampleStorageVersion\"].nsamplestoragelocationcode?approvedTreeData=item.item:\"\";});masterData=_objectSpread(_objectSpread({},masterData),{},{storageCategory:conditionMaster,approvedLocation:locationMaster,approvedTreeData:JSON.parse(approvedTreeData[\"jsondata\"].value).data});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,selectedRecord:selectedRecord,openChildModal:true,operation:\"move\",ncontrolcode:moveId}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function loadApprovedLocationOnCombo(userInfo,masterData,selectedRecord){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/samplestoragemaster/getSampleStorageMasterByCategory\",{'userinfo':userInfo,\"nstoragecategorycode\":selectedRecord.nstoragecategorycode.value}).then(function(response){var locationMap=constructOptionList(response.data[\"approvedSampleStorageLocation\"],\"nsamplestoragelocationcode\",\"ssamplestoragelocationname\",false,false,true);var locationMaster=locationMap.get(\"OptionList\");selectedRecord[\"nsamplestoragelocationcode\"]=[];var approvedTreeData=[];masterData=_objectSpread(_objectSpread({},masterData),{},{approvedLocation:locationMaster,approvedTreeData:approvedTreeData});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,selectedRecord:selectedRecord}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function loadApprovedLocationOnTreeData(userInfo,masterData,selectedRecord){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/samplestoragemaster/getApprovedSampleStorageLocationByID\",{'userinfo':userInfo,\"nstoragecategorycode\":selectedRecord.nstoragecategorycode.value,\"nsamplestoragelocationcode\":selectedRecord.nsamplestoragelocationcode.value}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),{},{approvedTreeData:JSON.parse(response.data[0][\"jsondata\"].value).data});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,selectedRecord:selectedRecord}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function moveItems(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/samplestoragemaster/moveItems\",inputParam).then(function(response){// if (inputParam.moveContainers === true) {\nmasterData=_objectSpread(_objectSpread({},masterData),{},{selectedSampleStorageVersion:response.data[0]});// } else {\n//     masterData = {\n//         ...masterData, selectedSampleStorageVersion: response.data[0]\n//     };\n// }\ndispatch({type:DEFAULT_RETURN,payload:{loading:false,openChildModal:false,masterData:masterData,activeTabIndex:undefined,loadEsign:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function saveSampleStorageMaster(userInfo,masterData,selectedRecord,inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/samplestoragemaster/createSampleStorageMaster\",{'userinfo':userInfo,\"sampleStorageMaster\":inputParam.inputData[\"sampleStorageMaster\"]}).then(function(response){selectedRecord[\"ssamplearno\"]=\"\";selectedRecord[\"nsampleqty\"]=\"\";masterData=_objectSpread(_objectSpread({},masterData),{},{sampleStorageMaster:response.data[\"sampleStorageMaster\"],selectedSampleStorageMaster:response.data[\"selectedSampleStorageMaster\"]});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,selectedRecord:selectedRecord,openModal:inputParam.saveType===2?true:false,loadEsign:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function validateEsignCredentialSampleStorageMaster(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"login/validateEsignCredential\",inputParam.inputData).then(function(response){if(response.data===\"Success\"){var methodUrl=inputParam[\"screenData\"][\"inputParam\"][\"methodUrl\"];inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"]=inputParam.inputData.userinfo;if(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]&&inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]){delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];}var _inputParam$screenDat=inputParam[\"screenData\"],selectedRecord=_inputParam$screenDat.selectedRecord,userInfo=_inputParam$screenDat.userInfo,masterData=_inputParam$screenDat.masterData;delete selectedRecord.esignpassword;delete selectedRecord.esigncomments;delete selectedRecord.esignreason;delete selectedRecord.agree;delete inputParam.inputData.password;userInfo=inputParam.inputData.userinfo;if(inputParam[\"screenData\"].inputParam.operation===\"move\"){dispatch(moveItems(inputParam[\"screenData\"].inputParam,masterData));}else{dispatch(saveSampleStorageMaster(inputParam.inputData.userinfo,masterData,selectedRecord,inputParam[\"screenData\"].inputParam));}}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function sendToStoreSampleStorageMaster(userInfo,inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/samplestoragemaster/createSampleStorageMaster\",inputParam.inputData// {\n//     'userinfo': userInfo, \"sampleStorageMaster\": inputParam.inputData[\"sampleStorageMaster\"]\n// }\n).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{loading:false,openChildModal:false,loadEsign:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function addSample(addID,masterData,userInfo){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var getUnit=rsapi.post(\"/unit/getUnit\",{'userinfo':userInfo});var getSettings=rsapi.post(\"/samplestoragemaster/getSettingsForSubSampleQty\",{'userinfo':userInfo});urlArray=[getUnit,getSettings];Axios.all(urlArray).then(function(response){var isneedSubSampleQty=false;if(response[1].data!==null){if(response[1].data&&response[1].data[\"ssettingvalue\"]==='3'){isneedSubSampleQty=true;}}var conditionUnitMap=constructOptionList(response[0].data,\"nunitcode\",\"sunitname\",false,false,true);var conditionUnitMaster=conditionUnitMap.get(\"OptionList\");var selectedRecord={};var defaultUnit=conditionUnitMaster.filter(function(item){return item.item.ndefaultstatus===transactionStatus.YES;});if(defaultUnit.length>0){selectedRecord[\"nunitcode\"]={value:defaultUnit[0].value,label:defaultUnit[0].label,item:defaultUnit[0].item};}masterData=_objectSpread(_objectSpread({},masterData),{},{unitMaster:conditionUnitMaster});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,openModal:true,selectedRecord:selectedRecord,operation:\"create\",ncontrolcode:addID,loading:false,isneedSubSampleQty:isneedSubSampleQty}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/SampleStorageMasterAction.js"],"names":["rsapi","DEFAULT_RETURN","initRequest","sortData","constructOptionList","toast","transactionStatus","Axios","getSampleMaster","selectedItem","userInfo","masterData","sampleLocation","sampleHierarchyIndex","dispatch","post","id","then","response","sampleStorageMaster","data","selectedSampleStorageMaster","type","payload","loading","sampleTrayCode","catch","error","status","message","warn","getSelectedApprovedStorageVersion","inputParam","parseInt","nsamplestorageversioncode","selectedSampleStorageVersion","storageContainer","undefined","containers","containerLocation","activeTabIndex","getSampleMasterDetails","getselectedContainer","getContainers","locationText","selectedContainer","length","locationCode","getContainerStorageCondition","operation","containerCode","getStorageConditionFromMaster","editContainerID","selectedRecord","urlArray","geStorageCondition","getSampleStorageCondition","ncontainerstoragecode","all","conditionMap","conditionMaster","get","map","item","value","label","storageCondition","defaultCondition","filter","items","ndefaultstatus","YES","openModal","ncontrolcode","changeStorageCategoryFilterOnSampleMaster","filterStorageCategory","inputData","nfilterStorageCategory","openSampleStorageApprovedLocation","moveId","geStorageCategory","getApprovedLocation","nstoragecategorycode","locationMap","locationMaster","approvedTreeData","nsamplestoragelocationcode","storageCategory","approvedLocation","JSON","parse","openChildModal","loadApprovedLocationOnCombo","loadApprovedLocationOnTreeData","moveItems","loadEsign","saveSampleStorageMaster","saveType","validateEsignCredentialSampleStorageMaster","methodUrl","userinfo","toLowerCase","esignpassword","esigncomments","esignreason","agree","password","sendToStoreSampleStorageMaster","addSample","addID","getUnit","getSettings","isneedSubSampleQty","conditionUnitMap","conditionUnitMaster","defaultUnit","unitMaster"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { initRequest } from './LoginAction';\r\nimport { sortData, constructOptionList } from '../components/CommonScript';\r\nimport { toast } from 'react-toastify';\r\nimport { transactionStatus } from '../components/Enumeration';\r\nimport Axios from 'axios';\r\n\r\nexport function getSampleMaster(selectedItem, userInfo, masterData, sampleLocation, sampleHierarchyIndex) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/samplestoragemaster/getSampleMaster\",\r\n            { 'userinfo': userInfo, \"sampleTrayCode\": selectedItem.id })\r\n            .then(response => {\r\n\r\n                masterData = {\r\n                    ...masterData, sampleStorageMaster: response.data[\"sampleStorageMaster\"],\r\n                    selectedSampleStorageMaster: response.data[\"selectedSampleStorageMaster\"]\r\n                };\r\n                sortData(masterData);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        sampleTrayCode: selectedItem.id,\r\n                        selectedItem,\r\n                        sampleLocation,\r\n                        sampleHierarchyIndex\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport function getSelectedApprovedStorageVersion(inputParam, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/samplestoragelocation/getActiveSampleStorageVersion\",\r\n            { 'userinfo': userInfo, \"nsamplestorageversioncode\": parseInt(inputParam.nsamplestorageversioncode) })\r\n            .then(response => {\r\n\r\n                masterData = {\r\n                    ...masterData, selectedSampleStorageVersion: response.data[\"selectedSampleStorageVersion\"], storageContainer: undefined,\r\n                    containers: undefined, sampleStorageMaster: undefined\r\n                };\r\n                // sortData(masterData);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        containerLocation: undefined,\r\n                        activeTabIndex: undefined\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getSampleMasterDetails(masterData) {\r\n    return function (dispatch) {\r\n        dispatch({\r\n            type: DEFAULT_RETURN,\r\n            payload: {\r\n                masterData,\r\n            }\r\n        });\r\n    }\r\n}\r\nexport function getselectedContainer(masterData) {\r\n    return function (dispatch) {\r\n\r\n        dispatch({\r\n            type: DEFAULT_RETURN,\r\n            payload: {\r\n                masterData,\r\n            }\r\n        });\r\n    }\r\n}\r\nexport function getContainers(selectedItem, masterData, containers, locationText) {\r\n    return function (dispatch) {\r\n\r\n        masterData = {\r\n            ...masterData, containers: containers, selectedContainer: containers.length > 0 ? [containers[0]] : []\r\n        };\r\n\r\n        dispatch({\r\n            type: DEFAULT_RETURN,\r\n            payload: {\r\n                masterData,\r\n                locationCode: selectedItem.id,\r\n                selectedItem,\r\n                locationText\r\n            }\r\n        });\r\n    }\r\n}\r\nexport function getContainerStorageCondition(selectedItem, userInfo, masterData, containerLocation) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let operation = \"\";\r\n        rsapi.post(\"/samplestoragemaster/getContainerStorageCondition\",\r\n            { 'userinfo': userInfo, \"containerCode\": selectedItem.id })\r\n            .then(response => {\r\n\r\n                if (response.data[\"storageContainer\"] !== null) {\r\n                    operation = \"update\";\r\n                } else {\r\n                    operation = \"create\";\r\n                }\r\n                masterData = {\r\n                    ...masterData, storageContainer: response.data[\"storageContainer\"]\r\n                };\r\n                // sortData(masterData);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        containerCode: selectedItem.id,\r\n                        containerLocation,\r\n                        operation,\r\n                        selectedItem\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getStorageConditionFromMaster(userInfo, masterData, editContainerID) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let selectedRecord = {};\r\n        let urlArray = [];\r\n        let operation = \"\";\r\n        if (masterData[\"storageContainer\"] && masterData[\"storageContainer\"] !== null) {\r\n\r\n            const geStorageCondition = rsapi.post(\"/storagecondition/getStorageCondition\",\r\n                { 'userinfo': userInfo })\r\n\r\n            const getSampleStorageCondition = rsapi.post(\"/samplestoragemaster/getContainerStorageConditionByID\",\r\n                { 'userinfo': userInfo, \"containerStorageCode\": masterData[\"storageContainer\"].ncontainerstoragecode });\r\n\r\n            urlArray = [geStorageCondition, getSampleStorageCondition];\r\n            operation = \"update\"\r\n        } else {\r\n\r\n\r\n            const geStorageCondition = rsapi.post(\"/storagecondition/getStorageCondition\",\r\n                { 'userinfo': userInfo })\r\n\r\n            urlArray = [geStorageCondition];\r\n            operation = \"create\"\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n\r\n                const conditionMap = constructOptionList(response[0].data, \"nstorageconditioncode\", \"sstorageconditionname\", false, false, true);\r\n                const conditionMaster = conditionMap.get(\"OptionList\");\r\n\r\n                if (masterData[\"storageContainer\"] && masterData[\"storageContainer\"] !== null) {\r\n                    conditionMaster.map(item => item.value === response[1].data[\"nstorageconditioncode\"] ?\r\n                        selectedRecord[\"nstorageconditioncode\"] = {\r\n                            \"label\": item.label,\r\n                            \"value\": item.value,\r\n                            \"item\": item\r\n                        }\r\n                        : \"\");\r\n\r\n                    masterData = {\r\n                        ...masterData, storageCondition: conditionMaster, storageContainer: response[1].data\r\n                    };\r\n                } else {\r\n\r\n                    const defaultCondition = conditionMaster.filter(items => items.item.ndefaultstatus === transactionStatus.YES);\r\n                    if (defaultCondition.length > 0) {\r\n                        selectedRecord[\"nstorageconditioncode\"] = {\r\n                            \"label\": defaultCondition[0].label,\r\n                            \"value\": defaultCondition[0].value,\r\n                            \"item\": defaultCondition\r\n                        }\r\n                    }\r\n                    masterData = {\r\n                        ...masterData, storageCondition: conditionMaster\r\n                    };\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        selectedRecord,\r\n                        openModal: true,\r\n                        operation,\r\n                        ncontrolcode: editContainerID\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport const changeStorageCategoryFilterOnSampleMaster = (inputParam, filterStorageCategory) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/samplestoragemaster/getSampleStorageMasterByCategory\", inputParam.inputData)\r\n            .then(response => {\r\n                const masterData = response.data\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            filterStorageCategory,\r\n                            nfilterStorageCategory: inputParam.inputData.nfilterStorageCategory.value,\r\n                            storageContainer: undefined,\r\n                            containers: undefined, sampleStorageMaster: undefined\r\n                        },\r\n                        containerLocation: undefined,\r\n                        activeTabIndex: undefined\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}\r\n\r\nexport function openSampleStorageApprovedLocation(userInfo, masterData, moveId) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let selectedRecord = {};\r\n        let urlArray = [];\r\n\r\n\r\n        const geStorageCategory = rsapi.post(\"/storagecategory/getStorageCategory\",\r\n            { 'userinfo': userInfo })\r\n\r\n        const getApprovedLocation = rsapi.post(\"/samplestoragemaster/getSampleStorageMasterByCategory\",\r\n            {\r\n                'userinfo': userInfo, \"nstoragecategorycode\": masterData[\"selectedSampleStorageVersion\"].nstoragecategorycode\r\n            });\r\n\r\n        urlArray = [geStorageCategory, getApprovedLocation];\r\n\r\n\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n\r\n                const conditionMap = constructOptionList(response[0].data, \"nstoragecategorycode\", \"sstoragecategoryname\", false, false, true);\r\n                const conditionMaster = conditionMap.get(\"OptionList\");\r\n\r\n                const locationMap = constructOptionList(response[1].data[\"approvedSampleStorageLocation\"], \"nsamplestoragelocationcode\", \"ssamplestoragelocationname\", false, false, true);\r\n                const locationMaster = locationMap.get(\"OptionList\");\r\n\r\n\r\n                conditionMaster.map(item => item.value === masterData[\"selectedSampleStorageVersion\"].nstoragecategorycode ?\r\n                    selectedRecord[\"nstoragecategorycode\"] = {\r\n                        \"label\": item.label,\r\n                        \"value\": item.value,\r\n                        \"item\": item.item\r\n                    }\r\n                    : \"\");\r\n\r\n                let approvedTreeData = [];\r\n                locationMaster.map(item => item.value === masterData[\"selectedSampleStorageVersion\"].nsamplestoragelocationcode ?\r\n                    selectedRecord[\"nsamplestoragelocationcode\"] = {\r\n                        \"label\": item.label,\r\n                        \"value\": item.value,\r\n                        \"item\": item.item\r\n                    }\r\n                    : \"\");\r\n\r\n                locationMaster.map(item => item.value === masterData[\"selectedSampleStorageVersion\"].nsamplestoragelocationcode ?\r\n                    approvedTreeData = item.item\r\n                    : \"\");\r\n\r\n                masterData = {\r\n                    ...masterData, storageCategory: conditionMaster, approvedLocation: locationMaster, approvedTreeData: JSON.parse(approvedTreeData[\"jsondata\"].value).data\r\n                };\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        selectedRecord,\r\n                        openChildModal: true,\r\n                        operation: \"move\",\r\n                        ncontrolcode: moveId\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function loadApprovedLocationOnCombo(userInfo, masterData, selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/samplestoragemaster/getSampleStorageMasterByCategory\",\r\n            {\r\n                'userinfo': userInfo, \"nstoragecategorycode\": selectedRecord.nstoragecategorycode.value\r\n            })\r\n            .then(response => {\r\n\r\n                const locationMap = constructOptionList(response.data[\"approvedSampleStorageLocation\"], \"nsamplestoragelocationcode\", \"ssamplestoragelocationname\", false, false, true);\r\n                const locationMaster = locationMap.get(\"OptionList\");\r\n\r\n                selectedRecord[\"nsamplestoragelocationcode\"] = [];\r\n                let approvedTreeData = [];\r\n\r\n                masterData = {\r\n                    ...masterData, approvedLocation: locationMaster, approvedTreeData\r\n                };\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        selectedRecord\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function loadApprovedLocationOnTreeData(userInfo, masterData, selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/samplestoragemaster/getApprovedSampleStorageLocationByID\",\r\n            {\r\n                'userinfo': userInfo, \"nstoragecategorycode\": selectedRecord.nstoragecategorycode.value, \"nsamplestoragelocationcode\": selectedRecord.nsamplestoragelocationcode.value\r\n            })\r\n            .then(response => {\r\n\r\n                masterData = {\r\n                    ...masterData, approvedTreeData: JSON.parse(response.data[0][\"jsondata\"].value).data\r\n                };\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        selectedRecord\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport function moveItems(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/samplestoragemaster/moveItems\", inputParam)\r\n            .then(response => {\r\n\r\n                // if (inputParam.moveContainers === true) {\r\n                masterData = {\r\n                    ...masterData, selectedSampleStorageVersion: response.data[0]\r\n                };\r\n                // } else {\r\n                //     masterData = {\r\n                //         ...masterData, selectedSampleStorageVersion: response.data[0]\r\n                //     };\r\n                // }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        openChildModal: false,\r\n                        masterData,\r\n                        activeTabIndex: undefined,\r\n                        loadEsign: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function saveSampleStorageMaster(userInfo, masterData, selectedRecord, inputParam) {\r\n    return function (dispatch) {\r\n\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/samplestoragemaster/createSampleStorageMaster\",\r\n            {\r\n                'userinfo': userInfo, \"sampleStorageMaster\": inputParam.inputData[\"sampleStorageMaster\"]\r\n            })\r\n            .then(response => {\r\n\r\n                selectedRecord[\"ssamplearno\"] = \"\";\r\n                selectedRecord[\"nsampleqty\"] = \"\";\r\n                masterData = {\r\n                    ...masterData, sampleStorageMaster: response.data[\"sampleStorageMaster\"],\r\n                    selectedSampleStorageMaster: response.data[\"selectedSampleStorageMaster\"]\r\n                };\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        selectedRecord,\r\n                        openModal: inputParam.saveType === 2 ? true : false,\r\n                        loadEsign: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function validateEsignCredentialSampleStorageMaster(inputParam) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data === \"Success\") {\r\n\r\n\r\n\r\n                    const methodUrl = inputParam[\"screenData\"][\"inputParam\"][\"methodUrl\"];\r\n                    inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\r\n\r\n                    if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()] &&\r\n                        inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]) {\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];\r\n                    }\r\n                    let { selectedRecord, userInfo, masterData } = inputParam[\"screenData\"];\r\n                    delete selectedRecord.esignpassword;\r\n                    delete selectedRecord.esigncomments;\r\n                    delete selectedRecord.esignreason;\r\n                    delete selectedRecord.agree;\r\n                    delete inputParam.inputData.password;\r\n                    userInfo = inputParam.inputData.userinfo;\r\n                    if (inputParam[\"screenData\"].inputParam.operation === \"move\") {\r\n                        dispatch(moveItems(inputParam[\"screenData\"].inputParam, masterData));\r\n                    } else {\r\n                        dispatch(saveSampleStorageMaster(inputParam.inputData.userinfo, masterData, selectedRecord, inputParam[\"screenData\"].inputParam))\r\n                    }\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    };\r\n}\r\n\r\nexport function sendToStoreSampleStorageMaster(userInfo, inputParam) {\r\n    return function (dispatch) {\r\n\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/samplestoragemaster/createSampleStorageMaster\", inputParam.inputData\r\n            // {\r\n            //     'userinfo': userInfo, \"sampleStorageMaster\": inputParam.inputData[\"sampleStorageMaster\"]\r\n            // }\r\n        )\r\n            .then(response => {\r\n\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n\r\n                        loading: false,\r\n                        openChildModal: false,\r\n                        loadEsign: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport function addSample(addID, masterData, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n\r\n        let urlArray = [];\r\n\r\n\r\n        const getUnit = rsapi.post(\"/unit/getUnit\",\r\n            { 'userinfo': userInfo })\r\n\r\n        const getSettings = rsapi.post(\"/samplestoragemaster/getSettingsForSubSampleQty\",\r\n            {\r\n                'userinfo': userInfo });\r\n\r\n        urlArray = [getUnit, getSettings];\r\n\r\n\r\n        Axios.all(urlArray)      \r\n            .then(response => {\r\n                let isneedSubSampleQty = false;\r\n                if(response[1].data !== null){\r\n                    if(response[1].data && response[1].data[\"ssettingvalue\"] === '3'){\r\n                        isneedSubSampleQty = true;\r\n                    }\r\n                }\r\n                const conditionUnitMap = constructOptionList(response[0].data, \"nunitcode\", \"sunitname\", false, false, true);\r\n                const conditionUnitMaster = conditionUnitMap.get(\"OptionList\");\r\n                let selectedRecord = {};\r\n                const defaultUnit = conditionUnitMaster.filter(function (item) {\r\n                    return item.item.ndefaultstatus === transactionStatus.YES;\r\n                });\r\n                if (defaultUnit.length > 0) {\r\n                    selectedRecord[\"nunitcode\"] = {\r\n                        value: defaultUnit[0].value,\r\n                        label: defaultUnit[0].label,\r\n                        item: defaultUnit[0].item\r\n                    };\r\n                }\r\n                masterData = {\r\n                    ...masterData, unitMaster: conditionUnitMaster\r\n                };\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        openModal: true, selectedRecord,\r\n                        operation: \"create\", ncontrolcode: addID,\r\n                        loading: false, isneedSubSampleQty\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}