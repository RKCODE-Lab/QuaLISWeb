{"ast":null,"code":"import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectWithoutProperties from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"name\",\"label\",\"isMandatory\",\"errors\",\"deleteAttachment\",\"onDrop\",\"accept\",\"minSize\",\"maxSize\",\"editFiles\",\"attachmentTypeCode\",\"fileSizeName\",\"fileName\",\"disabled\",\"onDropAccepted\"];import React from'react';import{Form}from'react-bootstrap';import{useDropzone}from'react-dropzone';import{ListGroup,Media,Image}from'react-bootstrap';import'./dropzone.styles.jsx';import{Dzwrap,DzMessage,Attachments}from'./dropzone.styles';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faFileUpload,faTrashAlt}from'@fortawesome/free-solid-svg-icons';import{getAttachedFileIcon}from'../FileIcon';import{injectIntl}from'react-intl';import{bytesToSize}from'../CommonScript.js';import{Nav}from'react-bootstrap';function DropZone(_ref){var name=_ref.name,label=_ref.label,isMandatory=_ref.isMandatory,errors=_ref.errors,deleteAttachment=_ref.deleteAttachment,onDrop=_ref.onDrop,accept=_ref.accept,minSize=_ref.minSize,maxSize=_ref.maxSize,editFiles=_ref.editFiles,attachmentTypeCode=_ref.attachmentTypeCode,fileSizeName=_ref.fileSizeName,fileName=_ref.fileName,disabled=_ref.disabled,onDropAccepted=_ref.onDropAccepted,props=_objectWithoutProperties(_ref,_excluded);// const { onDrop, accept, minSize, maxSize, maxFiles, multiple, editFiles, attachmentTypeCode, fileSizeName, fileName, disabled, label } = props;\nvar maxFiles=props.maxFiles,multiple=props.multiple;var maxfileSize=maxSize*1000000;var _useDropzone=useDropzone({onDrop:onDrop,accept:accept,minSize:minSize,maxSize:maxfileSize,maxFiles:maxFiles,multiple:multiple,disabled:disabled,onDropAccepted:onDropAccepted,validator:nameLengthValidator}),fileRejections=_useDropzone.fileRejections,getRootProps=_useDropzone.getRootProps,getInputProps=_useDropzone.getInputProps;var fileRejectionItems=_toConsumableArray(new Set(fileRejections.map(function(_ref2){var file=_ref2.file,errors=_ref2.errors;switch(errors[0].code){case\"file-invalid-type\":return\"\".concat(file.path,\": \").concat(props.intl.formatMessage({id:\"IDS_FILETYPENOTPERMITTED\"}));case\"too-many-files\":return\"\".concat(props.intl.formatMessage({id:\"IDS_MAXIMUMALLOWSONLY\"}),\" \").concat(maxFiles,\" \").concat(props.intl.formatMessage({id:\"IDS_FILES\"}));case\"file-too-large\":return\"\".concat(file.path,\" \").concat(props.intl.formatMessage({id:\"IDS_IS\"}),\" \").concat(bytesToSize(file.size));case\"name-too-large\":return errors[0].message;default:return\"\";}})));var files=[];if(props.actionType===\"delete\"){if(typeof editFiles[fileName]!==\"string\"){var list=editFiles[fileName];files=list&&list.length>0?list.map(function(file){return attachmentData(file,file.path,\"name\",\"size\");}):editFiles&&Object.values(editFiles).length>0?attachmentData(editFiles,\"filekeyname\",fileName,fileSizeName):\"\";}else{files=editFiles&&Object.values(editFiles).length>0?attachmentData(editFiles,\"filekeyname\",fileName,fileSizeName):\"\";}}else{if(typeof editFiles[fileName]!==\"string\"){var _list=editFiles[fileName];files=_list&&_list.length>0?_list.map(function(file){return attachmentData(file,file.path,\"name\",\"size\");}):editFiles&&Object.values(editFiles).length>0?attachmentData(editFiles,\"filekeyname\",fileName,fileSizeName):\"\";}else{files=editFiles&&Object.values(editFiles).length>0?attachmentData(editFiles,\"filekeyname\",fileName,fileSizeName):\"\";}}function nameLengthValidator(file){var fileNameLength=100;if(file.name.length>=fileNameLength){return{code:\"name-too-large\",message:\"\".concat(file.name,\" \").concat(props.intl.formatMessage({id:\"IDS_NAMEGREATERTHAN\"}),\" \").concat(fileNameLength,\" \").concat(props.intl.formatMessage({id:\"IDS_CHARACTERS\"}))};}return null;}function attachmentData(file,keyname,filename,size){var fileExtension=\"\";if(filename!==\"\"&&file[filename]!==undefined&&file[filename]!==\"\"){if(typeof file[filename]===\"object\"){if(file[filename].length>0){var splittedFileName=file[filename][0][\"name\"].split('.');fileExtension=file[filename][0][\"name\"].split('.')[splittedFileName.length-1];}}else{var _splittedFileName=file[filename].split('.');fileExtension=file[filename].split('.')[_splittedFileName.length-1];}}if(fileExtension!==\"\"){return/*#__PURE__*/React.createElement(ListGroup.Item,{key:keyname},/*#__PURE__*/React.createElement(Attachments,null,/*#__PURE__*/React.createElement(Media,{className:\"align-items-center\"},/*#__PURE__*/React.createElement(Image,{width:40,height:40,className:\"mr-2\",src:getAttachedFileIcon(fileExtension)}),/*#__PURE__*/React.createElement(Media.Body,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"mt-0 attachment-title\"},typeof file[filename]===\"object\"?file[filename][0][\"name\"]:file[filename]),size!==\"\"?/*#__PURE__*/React.createElement(\"div\",{className:\"attachment-details\"},typeof file[filename]===\"object\"?bytesToSize(file[filename][0][\"size\"]):bytesToSize(file[size])):\"\"),/*#__PURE__*/ //multiple ?\nReact.createElement(Nav.Link,{name:\"deleteAttachment\",className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\"//onClick = {deleteAttachment}\n,onClick:function onClick(event){return deleteAttachment(event,file,fileName);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt}))// :\"\"\n)));}}return/*#__PURE__*/React.createElement(Dzwrap,null,/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Label,{htmlFor:name},label,isMandatory&&/*#__PURE__*/React.createElement(\"sup\",null,\"*\")),/*#__PURE__*/React.createElement(\"div\",getRootProps({className:'dropzone'}),/*#__PURE__*/React.createElement(\"input\",getInputProps()),/*#__PURE__*/React.createElement(DzMessage,{className:\"text-center\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faFileUpload,size:\"2x\"}),\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"text-uppercase font-weight-bold\"},\"\".concat(props.intl.formatMessage({id:\"IDS_DRAGANDDROP\"}))),/*#__PURE__*/React.createElement(\"br\",null),\" \",\"\".concat(props.intl.formatMessage({id:\"IDS_OR\"})),\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"drop-link\"},\"\".concat(props.intl.formatMessage({id:\"IDS_CLICKHERE\"}))),\" \",\"\".concat(props.intl.formatMessage({id:\"IDS_TOUPLOAD\"})),/*#__PURE__*/React.createElement(\"br\",null),\"(\".concat(props.intl.formatMessage({id:\"IDS_MAXALLOWS\"}),\" \\n                  \").concat(maxFiles,\" \").concat(props.intl.formatMessage({id:\"IDS_FILESIZEOF\"}),\" \\n                  \").concat(maxSize,\" \").concat(props.intl.formatMessage({id:\"IDS_MB\"}),\")\"),/*#__PURE__*/React.createElement(\"br\",null),\"(\".concat(props.intl.formatMessage({id:\"IDS_MAXALLOWSFILENAMEOF\"}),\" \\n                  \",100,\" \").concat(props.intl.formatMessage({id:\"IDS_CHARACTERS\"}),\")\")))),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\",className:\"d-block\"},fileRejectionItems.join(\",\")),/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},files)));}export default injectIntl(DropZone);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/components/dropzone/dropzone.component.jsx"],"names":["React","Form","useDropzone","ListGroup","Media","Image","Dzwrap","DzMessage","Attachments","FontAwesomeIcon","faFileUpload","faTrashAlt","getAttachedFileIcon","injectIntl","bytesToSize","Nav","DropZone","name","label","isMandatory","errors","deleteAttachment","onDrop","accept","minSize","maxSize","editFiles","attachmentTypeCode","fileSizeName","fileName","disabled","onDropAccepted","props","maxFiles","multiple","maxfileSize","validator","nameLengthValidator","fileRejections","getRootProps","getInputProps","fileRejectionItems","Set","map","file","code","path","intl","formatMessage","id","size","message","files","actionType","list","length","attachmentData","Object","values","fileNameLength","keyname","filename","fileExtension","undefined","splittedFileName","split","event","className","join"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Form } from 'react-bootstrap';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { ListGroup, Media, Image } from 'react-bootstrap';\r\nimport './dropzone.styles.jsx';\r\nimport { Dzwrap, DzMessage, Attachments } from './dropzone.styles';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileUpload, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { getAttachedFileIcon } from '../FileIcon';\r\nimport { injectIntl } from 'react-intl';\r\nimport { bytesToSize } from '../CommonScript.js';\r\nimport { Nav } from 'react-bootstrap';\r\n\r\nfunction DropZone({\r\n   name,\r\n   label,\r\n   isMandatory,\r\n   errors,\r\n   deleteAttachment,\r\n   onDrop,\r\n   accept,\r\n   minSize,\r\n   maxSize,\r\n   // maxFiles,\r\n   // multiple,\r\n   editFiles,\r\n   attachmentTypeCode,\r\n   fileSizeName,\r\n   fileName,\r\n   disabled,\r\n   onDropAccepted,\r\n   ...props\r\n}) {\r\n   // const { onDrop, accept, minSize, maxSize, maxFiles, multiple, editFiles, attachmentTypeCode, fileSizeName, fileName, disabled, label } = props;\r\n   const { maxFiles, multiple } = props;\r\n   let maxfileSize = maxSize * 1000000;\r\n   const { fileRejections, getRootProps, getInputProps } = useDropzone({\r\n      onDrop, accept, minSize, maxSize: maxfileSize,\r\n      maxFiles: maxFiles, multiple: multiple, disabled, onDropAccepted,validator:nameLengthValidator\r\n   });\r\n   const fileRejectionItems = [...new Set(fileRejections.map(({ file, errors }) => {\r\n      switch (errors[0].code) {\r\n         case \"file-invalid-type\":\r\n            return `${file.path}: ${props.intl.formatMessage({ id: \"IDS_FILETYPENOTPERMITTED\" })}`;\r\n\r\n         case \"too-many-files\":\r\n            return `${props.intl.formatMessage({ id: \"IDS_MAXIMUMALLOWSONLY\" })} ${maxFiles} ${props.intl.formatMessage({ id: \"IDS_FILES\" })}`;\r\n\r\n         case \"file-too-large\":\r\n            return `${file.path} ${props.intl.formatMessage({ id: \"IDS_IS\" })} ${bytesToSize(file.size)}`;\r\n           \r\n            case \"name-too-large\":\r\n               return errors[0].message;\r\n   \r\n         default:\r\n            return \"\";\r\n      }\r\n   })\r\n   )]\r\n\r\n   let files = [];\r\n   if (props.actionType === \"delete\") {\r\n      if (typeof editFiles[fileName] !== \"string\") {\r\n         let list = editFiles[fileName]\r\n         files = list && list.length > 0 ?\r\n            list.map(file => (\r\n               attachmentData(file, file.path, \"name\", \"size\"))) :\r\n            editFiles && Object.values(editFiles).length > 0 ?\r\n               attachmentData(editFiles, \"filekeyname\", fileName, fileSizeName) : \"\"\r\n      } else {\r\n         files = editFiles && Object.values(editFiles).length > 0 ?\r\n            attachmentData(editFiles, \"filekeyname\", fileName, fileSizeName) : \"\"\r\n      }\r\n\r\n   }\r\n   else {\r\n      if (typeof editFiles[fileName] !== \"string\") {\r\n         let list = editFiles[fileName]\r\n         files = list && list.length > 0 ? list.map(file => (\r\n            attachmentData(file, file.path, \"name\", \"size\")\r\n         )) : editFiles && Object.values(editFiles).length > 0 ?\r\n            attachmentData(editFiles, \"filekeyname\", fileName, fileSizeName) : \"\"\r\n      } else {\r\n         files = editFiles && Object.values(editFiles).length > 0 ?\r\n            attachmentData(editFiles, \"filekeyname\", fileName, fileSizeName) : \"\"\r\n      }\r\n   }\r\n\r\n   function nameLengthValidator(file) {\r\n      const fileNameLength = 100;\r\n      if (file.name.length >= fileNameLength) {\r\n        return {\r\n          code: \"name-too-large\",\r\n          message: `${file.name} ${props.intl.formatMessage({ id: \"IDS_NAMEGREATERTHAN\" })} ${fileNameLength} ${props.intl.formatMessage({ id: \"IDS_CHARACTERS\" })}`\r\n        };\r\n      }\r\n    \r\n      return null\r\n    }\r\n\r\n   function attachmentData(file, keyname, filename, size) {\r\n      let fileExtension = \"\";\r\n      if (filename !== \"\" && file[filename] !== undefined && file[filename] !== \"\") {\r\n         if (typeof file[filename] === \"object\") {\r\n            if (file[filename].length > 0) {\r\n               const splittedFileName = file[filename][0][\"name\"].split('.');\r\n               fileExtension = file[filename][0][\"name\"].split('.')[splittedFileName.length - 1];\r\n            }\r\n         } else {\r\n            const splittedFileName = file[filename].split('.');\r\n            fileExtension = file[filename].split('.')[splittedFileName.length - 1];\r\n         }\r\n      }\r\n      if (fileExtension !== \"\") {\r\n         return (\r\n            <ListGroup.Item key={keyname}>\r\n               <Attachments>\r\n                  <Media className=\"align-items-center\">\r\n                     <Image\r\n                        width={40}\r\n                        height={40}\r\n                        className=\"mr-2\"\r\n                        src={getAttachedFileIcon(fileExtension)}\r\n                     />\r\n                     <Media.Body>\r\n                        <h5 className=\"mt-0 attachment-title\">{typeof file[filename] === \"object\" ? file[filename][0][\"name\"] : file[filename]}</h5>\r\n                        {size !== \"\" ? <div className=\"attachment-details\">{typeof file[filename] === \"object\" ? bytesToSize(file[filename][0][\"size\"]) : bytesToSize(file[size])}</div> : \"\"}\r\n                     </Media.Body>\r\n                     { \r\n                     //multiple ?\r\n                        <Nav.Link name=\"deleteAttachment\"\r\n                           className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                           //onClick = {deleteAttachment}\r\n                           onClick={(event) => deleteAttachment(event, file, fileName)}\r\n                        >\r\n                           <FontAwesomeIcon icon={faTrashAlt} />\r\n                        </Nav.Link>\r\n\r\n                    // :\"\"\r\n                     }\r\n                  </Media>\r\n               </Attachments>\r\n            </ListGroup.Item>\r\n         );\r\n      }\r\n   }\r\n\r\n   return (\r\n      <Dzwrap>\r\n         <Form.Group>\r\n            <Form.Label htmlFor={name}>{label}{isMandatory && <sup>*</sup>}</Form.Label>\r\n            <div {...getRootProps({ className: 'dropzone' })}>\r\n               <input {...getInputProps()} />\r\n               <DzMessage className=\"text-center\">\r\n                  <FontAwesomeIcon icon={faFileUpload} size=\"2x\" /> <br />\r\n                  <div><span className=\"text-uppercase font-weight-bold\">{`${props.intl.formatMessage({ id: \"IDS_DRAGANDDROP\" })}`}</span>\r\n                   <br /> {`${props.intl.formatMessage({ id: \"IDS_OR\" })}`} <span className=\"drop-link\">\r\n                      {`${props.intl.formatMessage({ id: \"IDS_CLICKHERE\" })}`}</span> {`${props.intl.formatMessage({ id: \"IDS_TOUPLOAD\" })}`}\r\n                  <br />{`(${props.intl.formatMessage({ id: \"IDS_MAXALLOWS\" })} \r\n                  ${maxFiles} ${props.intl.formatMessage({ id: \"IDS_FILESIZEOF\" })} \r\n                  ${maxSize} ${props.intl.formatMessage({ id: \"IDS_MB\" })})`}\r\n                  <br />{`(${props.intl.formatMessage({ id: \"IDS_MAXALLOWSFILENAMEOF\" })} \r\n                  ${100} ${props.intl.formatMessage({ id: \"IDS_CHARACTERS\" })})`}\r\n                   \r\n                  </div>\r\n\r\n               </DzMessage>\r\n            </div>\r\n            <Form.Control.Feedback type=\"invalid\" className=\"d-block\">\r\n               {fileRejectionItems.join(\",\")}\r\n            </Form.Control.Feedback>\r\n            <ListGroup variant=\"flush\">\r\n               {files}\r\n            </ListGroup>\r\n         </Form.Group>\r\n      </Dzwrap>\r\n   );\r\n}\r\n\r\nexport default injectIntl(DropZone);"]},"metadata":{},"sourceType":"module"}