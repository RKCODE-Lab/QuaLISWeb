{"ast":null,"code":"var _jsxFileName = \"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\src\\\\components\\\\sign-in\\\\sign-in.component.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { injectIntl } from 'react-intl';\nimport FormInput from '../form-input/form-input.component';\nimport CustomButtom from '../custom-button/custom-button.component';\nimport { changeLanguage, getLoginDetails, getUserSiteAndRole, updateStore, createPassword, changepassword, getUsersiteRole, checkPassword } from '../../actions';\nimport CreatePassword from '../../pages/Login/CreatePassWord';\nimport { clickOnLoginButton } from '../../actions';\nimport { toast } from 'react-toastify';\nimport FormSelectSearch from '../form-select-search/form-select-search.component';\nimport { validateLoginId } from '../CommonScript';\nimport SlideOutModal from '../slide-out-modal/SlideOutModal';\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\nimport ChangePassword from '../../pages/Login/ChangePassWord';\nimport { changePasswordValidation, fnPassMessage, fnValidatePassword } from '../../pages/Login/LoginCommonFunction';\nimport { LOGINTYPE } from '../Enumeration';\nimport { Form } from 'react-bootstrap';\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass SignIn extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.closeModal = () => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openCPModal: false\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.onCreatePassWord = () => {\n      const selectedRecord = this.state.selectedRecord;\n      const createPwdRecord = this.state.createPwdRecord;\n      const snewpassword = createPwdRecord.snewpassword.trim();\n      const sconfirmpassword = createPwdRecord.sconfirmpassword.trim();\n\n      if (selectedRecord.sloginid === snewpassword) {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_PASSWORDSHOULDNOTSAMEASLOGINID\"\n        }));\n      } else if (sconfirmpassword !== snewpassword) {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_PASSWORDNOTMATCHED\"\n        }));\n      } else {\n        const returnString = fnValidatePassword(this.props.Login.passwordPolicy, snewpassword);\n\n        if (returnString === 0) {\n          const inputParam = {\n            spassword: snewpassword,\n            nusersitecode: selectedRecord.nusersitecode.value,\n            nusermultirolecode: selectedRecord.nusermultirolecode.value\n          };\n          this.props.createPassword(inputParam);\n        } else {\n          toast.info(returnString);\n        }\n      }\n    };\n\n    this.onChangePassword = () => {\n      const selectedRecord = this.state.selectedRecord;\n      const createPwdRecord = this.state.createPwdRecord;\n      const returnMsg = changePasswordValidation(createPwdRecord, this.props.Login.passwordPolicy, this.state.selectedRecord.sloginid);\n\n      if (returnMsg === 0) {\n        const inputParam = {\n          spassword: createPwdRecord.snewpassword.trim(),\n          sOldPassword: createPwdRecord.soldpassword.trim(),\n          nusersitecode: selectedRecord.nusersitecode.value,\n          isPasswordExpiry: true,\n          userInfo: { ...this.props.Login.userInfo,\n            slanguagefilename: selectedRecord.nlanguagecode.item.sfilename\n          },\n          slanguagetypecode: selectedRecord.nlanguagecode.item.slanguagetypecode\n        };\n        this.props.changepassword(inputParam);\n      } else {\n        toast.info(returnMsg);\n      }\n    };\n\n    this.onSelectChange = (ComboVal, fieldName) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[fieldName] = ComboVal;\n\n      if (fieldName === \"nlogintypecode\" && ComboVal.value === LOGINTYPE.INTERNAL && selectedRecord.sloginid && selectedRecord.sloginid !== \"\" && selectedRecord.nusermultirolecode && selectedRecord.nusermultirolecode !== \"\" && selectedRecord.nusersitecode && selectedRecord.nusersitecode !== \"\") {\n        const inputParam = {\n          sloginid: this.state.selectedRecord.sloginid,\n          Language: selectedRecord.nlanguagecode.item,\n          nusermultisitecode: selectedRecord.nusersitecode.value,\n          nusermultirolecode: selectedRecord.nusermultirolecode.value,\n          nuserrolecode: selectedRecord.nusermultirolecode.item.nuserrolecode,\n          nlogintypecode: ComboVal.value\n        };\n        this.props.checkPassword(inputParam, selectedRecord);\n      } else {\n        this.setState({\n          selectedRecord\n        });\n      }\n    };\n\n    this.onChangeLanguage = (ComboVal, fieldName) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[fieldName] = ComboVal;\n      this.props.changeLanguage(ComboVal.item.slanguagetypecode, selectedRecord, this.props.Login.loginTypes);\n    };\n\n    this.onLoginEvent = event => {\n      if (event.keyCode === 13) {\n        const inputValue = event.target.value;\n        this.setState({\n          show: this.props.Login.open\n        });\n\n        if (inputValue !== \"\") {\n          this.onLoginSubmit(inputValue);\n        }\n      }\n    };\n\n    this.AutoLogin = event => {\n      if (event.keyCode === 118) {\n        let nlogintypecode = 1;\n        const inputParam = {\n          nusermultisitecode: parseInt(-1),\n          nusermultirolecode: parseInt(-1),\n          slanguagetypecode: \"en-US\",\n          spassword: \"123\",\n          nusercode: -1,\n          nlogintypecode: 1,\n          nuserrolecode: -1,\n          url: nlogintypecode === 1 ? \"/login/internallogin\" : \"/login/adslogin\",\n          navigation: \"home\"\n        };\n        this.setState({\n          nusermultisitecode: parseInt(-1),\n          nusermultirolecode: parseInt(-1),\n          slanguagetypecode: 1,\n          spassword: \"123\",\n          nusercode: -1,\n          nlogintypecode: 1,\n          nuserrolecode: -1\n        });\n        this.props.clickOnLoginButton(inputParam);\n      }\n    };\n\n    this.state = {\n      PasswordPolicy: {},\n      selectedRecord: {}\n    };\n    this.loginRef = React.createRef();\n  }\n\n  render() {\n    const {\n      loginTypeList,\n      languageList,\n      loginUserSite,\n      loginUserRole\n    } = this.props.Login;\n    return /*#__PURE__*/React.createElement(Form, {\n      ref: this.loginRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormInput, {\n      name: \"sloginid\",\n      label: this.props.intl.formatMessage({\n        id: \"IDS_LOGINID\"\n      }),\n      type: \"text\" // placeholder={this.props.intl.formatMessage({ id: \"IDS_LOGINID\" })}\n      ,\n      required: true,\n      isMandatory: \"*\",\n      onChange: event => this.onLoginInputChange(event),\n      onBlur: event => this.onFocusOutEvent(event),\n      onKeyUp: this.AutoLogin,\n      value: this.state.selectedRecord.sloginid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(FormInput, {\n      name: \"spassword\",\n      label: this.props.intl.formatMessage({\n        id: \"IDS_PASSWORD\"\n      }),\n      type: \"password\",\n      required: true,\n      isMandatory: \"*\" // placeholder={this.props.intl.formatMessage({ id: \"IDS_PASSWORD\" })}\n      ,\n      onChange: event => this.selectInputOnChange(event),\n      onKeyUp: this.onLoginEvent,\n      value: this.state.selectedRecord.spassword,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(FormSelectSearch, {\n      name: \"nusermultirolecode\",\n      formLabel: this.props.intl.formatMessage({\n        id: \"IDS_USERROLE\"\n      }),\n      isSearchable: false,\n      isDisabled: false,\n      placeholder: this.props.intl.formatMessage({\n        id: \"IDS_SELECTRECORD\"\n      }),\n      isMandatory: true,\n      options: loginUserRole || [],\n      optionId: \"nusermultirolecode\",\n      optionValue: \"suserrolename\",\n      value: this.state.selectedRecord.nusermultirolecode ? this.state.selectedRecord.nusermultirolecode : \"\",\n      onChange: value => this.onSelectChange(value, \"nusermultirolecode\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(FormSelectSearch, {\n      name: \"nlogintypecode\",\n      formLabel: this.props.intl.formatMessage({\n        id: \"IDS_LOGINTYPE\"\n      }),\n      isSearchable: false,\n      isDisabled: false,\n      placeholder: this.props.intl.formatMessage({\n        id: \"IDS_SELECTRECORD\"\n      }),\n      isMandatory: true,\n      options: loginTypeList || [],\n      optionId: \"nlogintypecode\",\n      optionValue: \"sdisplayname\",\n      value: this.state.selectedRecord.nlogintypecode ? this.state.selectedRecord.nlogintypecode : \"\",\n      onChange: value => this.onSelectChange(value, \"nlogintypecode\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(FormSelectSearch, {\n      name: \"nlanguagecode\",\n      formLabel: this.props.intl.formatMessage({\n        id: \"IDS_LANGUAGE\"\n      }),\n      isSearchable: false,\n      isDisabled: false,\n      placeholder: this.props.intl.formatMessage({\n        id: \"IDS_SELECTRECORD\"\n      }),\n      isMandatory: true,\n      options: languageList || [],\n      optionId: \"nlanguagecode\",\n      optionValue: \"slanguagename\",\n      value: this.state.selectedRecord.nlanguagecode ? this.state.selectedRecord.nlanguagecode : \"\",\n      onChange: value => this.onChangeLanguage(value, \"nlanguagecode\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(CustomButtom, {\n      name: \"loginbutton\",\n      label: \"Login\",\n      color: \"primary\",\n      className: \"btn-user btn-primary-blue\",\n      handleClick: () => this.onLoginSubmit(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }), this.props.Login.openCPModal && this.props.Login.userInfo.nlogintypecode === LOGINTYPE.INTERNAL && /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.Login.openCPModal,\n      closeModal: this.closeModal,\n      loginoperation: true,\n      inputParam: {},\n      screenName: this.props.Login.screenName,\n      onSaveClick: this.props.Login.PassFlag === 6 ? this.onCreatePassWord : this.onChangePassword,\n      selectedRecord: this.state.createPwdRecord || {},\n      mandatoryFields: this.mandatoryFieldFunction(this.props.Login.PassFlag),\n      addComponent: this.props.Login.PassFlag === 6 ? /*#__PURE__*/React.createElement(CreatePassword, {\n        sloginid: this.state.selectedRecord.sloginid,\n        createPwdRecord: this.state.createPwdRecord,\n        msg: fnPassMessage(this.props.Login.passwordPolicy),\n        onInputChange: event => this.onInputChange(event),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 29\n        }\n      }) : this.props.Login.PassFlag === 55 ? /*#__PURE__*/React.createElement(ChangePassword, {\n        sloginid: this.state.selectedRecord.sloginid,\n        createPwdRecord: this.state.createPwdRecord,\n        msg: fnPassMessage(this.props.Login.passwordPolicy),\n        onInputChange: event => this.onInputChange(event),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 33\n        }\n      }) : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }));\n  }\n\n  onUsersiteChange(ComboVal, fieldName) {\n    const selectedRecord = this.state.selectedRecord || {};\n    selectedRecord[fieldName] = ComboVal;\n    const inputParam = {\n      selectedRecord\n    };\n    this.props.getUsersiteRole(inputParam);\n  }\n\n  componentDidMount() {\n    this.loginRef.current[0].focus();\n    this.props.getLoginDetails();\n  }\n\n  mandatoryFieldFunction(passFlag) {\n    let mandatoryField = [];\n\n    if (passFlag === 6) {\n      mandatoryField = [{\n        \"idsName\": \"IDS_NEWPASSWORD\",\n        \"dataField\": \"snewpassword\",\n        \"mandatory\": false\n      }, {\n        \"idsName\": \"IDS_CONFIRMPASSWORD\",\n        \"dataField\": \"sconfirmpassword\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_ENTER\",\n        \"controlType\": \"textbox\"\n      }];\n    } else {\n      mandatoryField = [{\n        \"idsName\": \"IDS_OLDPASSWORD\",\n        \"dataField\": \"soldpassword\",\n        \"mandatory\": false\n      }, {\n        \"idsName\": \"IDS_NEWPASSWORD\",\n        \"dataField\": \"snewpassword\",\n        \"mandatory\": false\n      }, {\n        \"idsName\": \"IDS_CONFIRMPASSWORD\",\n        \"dataField\": \"sconfirmpassword\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_ENTER\",\n        \"controlType\": \"textbox\"\n      }];\n    }\n\n    return mandatoryField;\n  }\n\n  onLoginInputChange(event) {\n    const selectedRecord = this.state.selectedRecord || {};\n    const loginid = validateLoginId(event.target.value);\n\n    if (loginid) {\n      selectedRecord[event.target.name] = event.target.value;\n    } else {\n      selectedRecord[event.target.name] = this.state.selectedRecord[event.target.name];\n    }\n\n    this.setState({\n      selectedRecord\n    });\n  }\n\n  selectInputOnChange(event) {\n    const selectedRecord = this.state.selectedRecord || {};\n    selectedRecord[event.target.name] = event.target.value;\n    this.setState({\n      selectedRecord\n    });\n  }\n\n  onInputChange(event) {\n    const createPwdRecord = this.state.createPwdRecord || {};\n    createPwdRecord[event.target.name] = event.target.value;\n    this.setState({\n      createPwdRecord\n    });\n  }\n\n  onFocusOutEvent(event) {\n    const sloginid = event.target.value;\n\n    if (sloginid !== \"\") {\n      const selectedRecord = this.state.selectedRecord || {};\n      const inputParam = {\n        sloginid,\n        Language: selectedRecord.nlanguagecode.item,\n        logintype: this.props.Login.loginTypeList\n      };\n      this.props.getUserSiteAndRole(inputParam, selectedRecord);\n    }\n  }\n\n  onLoginSubmit() {\n    const selectedRecord = this.state.selectedRecord;\n    const mandatoryField = [{\n      \"idsName\": \"IDS_LOGINID\",\n      \"dataField\": \"sloginid\",\n      \"mandatory\": false\n    }, //Don't Remove the Commented line commented for NIBSC\n    // { \"idsName\": \"IDS_SITE\", \"dataField\": \"nusersitecode\", \"mandatory\": true },\n    {\n      \"idsName\": \"IDS_ROLE\",\n      \"dataField\": \"nusermultirolecode\",\n      \"mandatory\": true\n    }, {\n      \"idsName\": \"IDS_LOGINTYPE\",\n      \"dataField\": \"nlogintypecode\",\n      \"mandatory\": true\n    }, //Don't Remove the Commented line commented for NIBSC\n    //{ \"idsName\": \"IDS_LANGUAGE\", \"dataField\": \"nlanguagecode\", \"mandatory\": true },\n    {\n      \"idsName\": \"IDS_PASSWORD\",\n      \"dataField\": \"spassword\",\n      \"mandatory\": true\n    }];\n    const failedControls = [];\n    mandatoryField.map(item => {\n      if (selectedRecord[item.dataField] === undefined) {\n        failedControls.push(this.props.intl.formatMessage({\n          id: item.idsName\n        }));\n      } else if (typeof selectedRecord[item.dataField] === \"object\") {\n        //to validate FormSelectSearch component\n        if (selectedRecord[item.dataField].length === 0) {\n          failedControls.push(this.props.intl.formatMessage({\n            id: item.idsName\n          }));\n        }\n      } else if (typeof selectedRecord[item.dataField] === \"string\") {\n        //to handle string field -- added trim function\n        if (selectedRecord[item.dataField].trim().length === 0) {\n          failedControls.push(this.props.intl.formatMessage({\n            id: item.idsName\n          }));\n        }\n      }\n\n      return null;\n    });\n\n    if (failedControls.length === 0) {\n      let nlogintypecode = selectedRecord.nlogintypecode.value;\n\n      if (selectedRecord.nusercode === -1) {\n        nlogintypecode = LOGINTYPE.INTERNAL;\n      }\n\n      const inputParam = {\n        nusermultisitecode: selectedRecord.nusersitecode.value,\n        nusermultirolecode: selectedRecord.nusermultirolecode.value,\n        slanguagetypecode: selectedRecord.nlanguagecode.item.slanguagetypecode,\n        slanguagefilename: selectedRecord.nlanguagecode.item.sfilename,\n        spassword: selectedRecord.spassword,\n        nusercode: selectedRecord.nusercode,\n        nuserrolecode: selectedRecord.nusermultirolecode.item.nuserrolecode,\n        sloginid: selectedRecord.sloginid,\n        //nlogintypecode: nlogintypecode,\n        nlogintypecode: 1,\n        //url: nlogintypecode === 1 ? \"/login/internallogin\" : \"/login/adsLogin\",\n        url: \"/login/internallogin\",\n        navigation: \"home\"\n      };\n      this.props.clickOnLoginButton(inputParam);\n    } else {\n      toast.info(`${this.props.intl.formatMessage({\n        id: \"IDS_ENTER\"\n      })} ${failedControls[0]}`);\n    }\n  }\n\n  componentDidUpdate(previousProps) {\n    if (this.props.Login.navigation === \"home\") {\n      this.props.history.push('/');\n    }\n\n    let selectedRecord = this.state.selectedRecord || {};\n    let createPwdRecord = this.state.createPwdRecord || {};\n    let isStateChanged = false;\n\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n      selectedRecord = this.props.Login.selectedRecord;\n      isStateChanged = true;\n    }\n\n    if (this.props.Login.createPwdRecord !== previousProps.Login.createPwdRecord) {\n      createPwdRecord = this.props.Login.createPwdRecord;\n      isStateChanged = true;\n    }\n\n    if (isStateChanged) {\n      this.setState({\n        selectedRecord,\n        createPwdRecord\n      });\n    }\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  clickOnLoginButton,\n  changeLanguage,\n  getLoginDetails,\n  getUserSiteAndRole,\n  updateStore,\n  createPassword,\n  changepassword,\n  getUsersiteRole,\n  checkPassword\n})(injectIntl(SignIn));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/components/sign-in/sign-in.component.jsx"],"names":["React","connect","injectIntl","FormInput","CustomButtom","changeLanguage","getLoginDetails","getUserSiteAndRole","updateStore","createPassword","changepassword","getUsersiteRole","checkPassword","CreatePassword","clickOnLoginButton","toast","FormSelectSearch","validateLoginId","SlideOutModal","DEFAULT_RETURN","ChangePassword","changePasswordValidation","fnPassMessage","fnValidatePassword","LOGINTYPE","Form","mapStateToProps","state","Login","SignIn","Component","constructor","props","closeModal","updateInfo","typeName","data","openCPModal","onCreatePassWord","selectedRecord","createPwdRecord","snewpassword","trim","sconfirmpassword","sloginid","warn","intl","formatMessage","id","returnString","passwordPolicy","inputParam","spassword","nusersitecode","value","nusermultirolecode","info","onChangePassword","returnMsg","sOldPassword","soldpassword","isPasswordExpiry","userInfo","slanguagefilename","nlanguagecode","item","sfilename","slanguagetypecode","onSelectChange","ComboVal","fieldName","INTERNAL","Language","nusermultisitecode","nuserrolecode","nlogintypecode","setState","onChangeLanguage","loginTypes","onLoginEvent","event","keyCode","inputValue","target","show","open","onLoginSubmit","AutoLogin","parseInt","nusercode","url","navigation","PasswordPolicy","loginRef","createRef","render","loginTypeList","languageList","loginUserSite","loginUserRole","onLoginInputChange","onFocusOutEvent","selectInputOnChange","screenName","PassFlag","mandatoryFieldFunction","onInputChange","onUsersiteChange","componentDidMount","current","focus","passFlag","mandatoryField","loginid","name","logintype","failedControls","map","dataField","undefined","push","idsName","length","componentDidUpdate","previousProps","history","isStateChanged"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport FormInput from '../form-input/form-input.component';\r\nimport CustomButtom from '../custom-button/custom-button.component';\r\nimport { changeLanguage, getLoginDetails, getUserSiteAndRole, updateStore, createPassword, changepassword, getUsersiteRole, checkPassword } from '../../actions';\r\nimport CreatePassword from '../../pages/Login/CreatePassWord';\r\nimport { clickOnLoginButton } from '../../actions'\r\nimport { toast } from 'react-toastify';\r\nimport FormSelectSearch from '../form-select-search/form-select-search.component';\r\nimport { validateLoginId } from '../CommonScript';\r\nimport SlideOutModal from '../slide-out-modal/SlideOutModal';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport ChangePassword from '../../pages/Login/ChangePassWord';\r\nimport { changePasswordValidation, fnPassMessage, fnValidatePassword } from '../../pages/Login/LoginCommonFunction';\r\nimport { LOGINTYPE } from '../Enumeration'\r\nimport { Form } from 'react-bootstrap';\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\n\r\nclass SignIn extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            PasswordPolicy: {},\r\n            selectedRecord: {}\r\n        }\r\n        this.loginRef = React.createRef();\r\n    }\r\n\r\n    render() {\r\n        const { loginTypeList, languageList, loginUserSite, \r\n             loginUserRole } = this.props.Login;\r\n        return (\r\n            <Form ref={this.loginRef}>\r\n                <FormInput\r\n                    name=\"sloginid\"\r\n                    label={this.props.intl.formatMessage({ id: \"IDS_LOGINID\" })}\r\n                    type=\"text\"\r\n                    // placeholder={this.props.intl.formatMessage({ id: \"IDS_LOGINID\" })}\r\n                    required={true}\r\n                    isMandatory={\"*\"}\r\n                    onChange={(event) => this.onLoginInputChange(event)}\r\n                    onBlur={(event) => this.onFocusOutEvent(event)}\r\n                     onKeyUp={this.AutoLogin} \r\n                    value={this.state.selectedRecord.sloginid}\r\n                />\r\n                <FormInput\r\n                    name=\"spassword\"\r\n                    label={this.props.intl.formatMessage({ id: \"IDS_PASSWORD\" })}\r\n                    type=\"password\"\r\n                    required={true}\r\n                    isMandatory={\"*\"}\r\n                    // placeholder={this.props.intl.formatMessage({ id: \"IDS_PASSWORD\" })}\r\n                    onChange={(event) => this.selectInputOnChange(event)}\r\n                    onKeyUp={this.onLoginEvent}\r\n                    value={this.state.selectedRecord.spassword}\r\n                />\r\n                {/* Don't Remove the Commented line commented for NIBSC */}\r\n                {/* <FormSelectSearch\r\n                    name={\"nusersitecode\"}\r\n                    formLabel={this.props.intl.formatMessage({ id: \"IDS_SITE\" })}\r\n                    isSearchable={false}\r\n                    isDisabled={false}\r\n                    placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                    isMandatory={true}\r\n                    options={loginUserSite || []}\r\n                    optionId='nusersitecode'\r\n                    optionValue='ssitename'\r\n                    value={this.state.selectedRecord.nusersitecode ? this.state.selectedRecord.nusersitecode : \"\"}\r\n                    onChange={value => this.onUsersiteChange(value, \"nusersitecode\")}\r\n                >\r\n                </FormSelectSearch> */}\r\n                <FormSelectSearch\r\n                    name={\"nusermultirolecode\"}\r\n                    formLabel={this.props.intl.formatMessage({ id: \"IDS_USERROLE\" })}\r\n                    isSearchable={false}\r\n                    isDisabled={false}\r\n                    placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                    isMandatory={true}\r\n                    options={loginUserRole || []}\r\n                    optionId='nusermultirolecode'\r\n                    optionValue='suserrolename'\r\n                    value={this.state.selectedRecord.nusermultirolecode ? this.state.selectedRecord.nusermultirolecode : \"\"}\r\n                    onChange={value => this.onSelectChange(value, \"nusermultirolecode\")}\r\n                >\r\n                </FormSelectSearch>\r\n                <FormSelectSearch\r\n                    name={\"nlogintypecode\"}\r\n                    formLabel={this.props.intl.formatMessage({ id: \"IDS_LOGINTYPE\" })}\r\n                    isSearchable={false}\r\n                    isDisabled={false}\r\n                    placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                    isMandatory={true}\r\n                    options={loginTypeList || []}\r\n                    optionId='nlogintypecode'\r\n                    optionValue='sdisplayname'\r\n                    value={this.state.selectedRecord.nlogintypecode ? this.state.selectedRecord.nlogintypecode : \"\"}\r\n                    onChange={value => this.onSelectChange(value, \"nlogintypecode\")}\r\n                >\r\n                </FormSelectSearch>\r\n                {/* Don't Remove the Commented line commented for NIBSC */}\r\n                <FormSelectSearch\r\n                    name={\"nlanguagecode\"}\r\n                    formLabel={this.props.intl.formatMessage({ id: \"IDS_LANGUAGE\" })}\r\n                    isSearchable={false}\r\n                    isDisabled={false}\r\n                    placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                    isMandatory={true}\r\n                    options={languageList || []}\r\n                    optionId='nlanguagecode'\r\n                    optionValue='slanguagename'\r\n                    value={this.state.selectedRecord.nlanguagecode ? this.state.selectedRecord.nlanguagecode : \"\"}\r\n                    onChange={value => this.onChangeLanguage(value, \"nlanguagecode\")}\r\n                >\r\n                </FormSelectSearch>\r\n                <CustomButtom name=\"loginbutton\" label=\"Login\" color=\"primary\" className=\"btn-user btn-primary-blue\"\r\n                    handleClick={() => this.onLoginSubmit()}></CustomButtom>\r\n                { this.props.Login.openCPModal &&\r\n                    this.props.Login.userInfo.nlogintypecode === LOGINTYPE.INTERNAL &&\r\n                    <SlideOutModal\r\n                        show={this.props.Login.openCPModal}\r\n                        closeModal={this.closeModal}\r\n                        loginoperation={true}\r\n                        inputParam={{}}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.props.Login.PassFlag === 6 ? this.onCreatePassWord : this.onChangePassword}\r\n                        selectedRecord={this.state.createPwdRecord || {}}\r\n                        mandatoryFields={this.mandatoryFieldFunction(this.props.Login.PassFlag)}\r\n                        addComponent={this.props.Login.PassFlag === 6 ?\r\n                            <CreatePassword\r\n                                sloginid={this.state.selectedRecord.sloginid}\r\n                                createPwdRecord={this.state.createPwdRecord}\r\n                                msg={fnPassMessage(this.props.Login.passwordPolicy)}\r\n                                onInputChange={(event) => this.onInputChange(event)}\r\n                            /> : this.props.Login.PassFlag === 55 ?\r\n                                <ChangePassword\r\n                                    sloginid={this.state.selectedRecord.sloginid}\r\n                                    createPwdRecord={this.state.createPwdRecord}\r\n                                    msg={fnPassMessage(this.props.Login.passwordPolicy)}\r\n                                    onInputChange={(event) => this.onInputChange(event)}\r\n                                /> : \"\"\r\n                        }\r\n                    />}\r\n            </Form>\r\n        );\r\n    }\r\n\r\n\r\n    onUsersiteChange(ComboVal, fieldName) {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = ComboVal;\r\n        const inputParam = {\r\n            selectedRecord\r\n        };\r\n        this.props.getUsersiteRole(inputParam);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loginRef.current[0].focus();\r\n        this.props.getLoginDetails();\r\n    }\r\n\r\n    mandatoryFieldFunction(passFlag) {\r\n        let mandatoryField = [];\r\n        if (passFlag === 6) {\r\n            mandatoryField = [\r\n                { \"idsName\": \"IDS_NEWPASSWORD\", \"dataField\": \"snewpassword\", \"mandatory\": false },\r\n                { \"idsName\": \"IDS_CONFIRMPASSWORD\", \"dataField\": \"sconfirmpassword\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"}\r\n            ]\r\n        } else {\r\n            mandatoryField = [\r\n                { \"idsName\": \"IDS_OLDPASSWORD\", \"dataField\": \"soldpassword\", \"mandatory\": false},\r\n                { \"idsName\": \"IDS_NEWPASSWORD\", \"dataField\": \"snewpassword\", \"mandatory\": false },\r\n                { \"idsName\": \"IDS_CONFIRMPASSWORD\", \"dataField\": \"sconfirmpassword\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"}\r\n            ]\r\n        }\r\n        return mandatoryField;\r\n    }\r\n\r\n    closeModal = () => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openCPModal: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onCreatePassWord = () => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const createPwdRecord = this.state.createPwdRecord;\r\n        const snewpassword = createPwdRecord.snewpassword.trim();\r\n        const sconfirmpassword = createPwdRecord.sconfirmpassword.trim();\r\n        if (selectedRecord.sloginid === snewpassword) {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_PASSWORDSHOULDNOTSAMEASLOGINID\" }));\r\n        } else if (sconfirmpassword !== snewpassword) {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_PASSWORDNOTMATCHED\" }));\r\n        } else {\r\n            const returnString = fnValidatePassword(this.props.Login.passwordPolicy, snewpassword)\r\n            if (returnString === 0) {\r\n                const inputParam = {\r\n                    spassword: snewpassword,\r\n                    nusersitecode: selectedRecord.nusersitecode.value,\r\n                    nusermultirolecode: selectedRecord.nusermultirolecode.value\r\n                };\r\n                this.props.createPassword(inputParam);\r\n            } else {\r\n                toast.info(returnString);\r\n            }\r\n        }\r\n    }\r\n\r\n    onChangePassword = () => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const createPwdRecord = this.state.createPwdRecord;\r\n        const returnMsg = changePasswordValidation(createPwdRecord, this.props.Login.passwordPolicy, this.state.selectedRecord.sloginid);\r\n        if (returnMsg === 0) {\r\n            const inputParam = {\r\n                spassword: createPwdRecord.snewpassword.trim(),\r\n                sOldPassword: createPwdRecord.soldpassword.trim(),\r\n                nusersitecode: selectedRecord.nusersitecode.value,\r\n                isPasswordExpiry: true,\r\n                userInfo: { ...this.props.Login.userInfo, slanguagefilename: selectedRecord.nlanguagecode.item.sfilename },\r\n                slanguagetypecode: selectedRecord.nlanguagecode.item.slanguagetypecode\r\n            };\r\n\r\n            this.props.changepassword(inputParam);\r\n        } else {\r\n            toast.info(returnMsg);\r\n        }\r\n    }\r\n\r\n    onLoginInputChange(event) {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        const loginid = validateLoginId(event.target.value);\r\n        if (loginid) {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        } else {\r\n            selectedRecord[event.target.name] = this.state.selectedRecord[event.target.name];\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    selectInputOnChange(event) {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[event.target.name] = event.target.value;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onInputChange(event) {\r\n        const createPwdRecord = this.state.createPwdRecord || {};\r\n        createPwdRecord[event.target.name] = event.target.value;\r\n        this.setState({ createPwdRecord });\r\n    }\r\n\r\n    onSelectChange = (ComboVal, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = ComboVal;\r\n        if (fieldName === \"nlogintypecode\" && ComboVal.value === LOGINTYPE.INTERNAL\r\n            && selectedRecord.sloginid && selectedRecord.sloginid !== \"\" \r\n            && selectedRecord.nusermultirolecode && selectedRecord.nusermultirolecode !== \"\"\r\n            && selectedRecord.nusersitecode && selectedRecord.nusersitecode !== \"\") {\r\n            const inputParam = {\r\n                sloginid: this.state.selectedRecord.sloginid,\r\n                Language: selectedRecord.nlanguagecode.item,\r\n                nusermultisitecode: selectedRecord.nusersitecode.value,\r\n                nusermultirolecode: selectedRecord.nusermultirolecode.value,\r\n                nuserrolecode: selectedRecord.nusermultirolecode.item.nuserrolecode,\r\n                nlogintypecode: ComboVal.value\r\n            };\r\n            this.props.checkPassword(inputParam, selectedRecord);\r\n        } else {\r\n            this.setState({ selectedRecord });\r\n        }\r\n    }\r\n\r\n    onChangeLanguage = (ComboVal, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = ComboVal;\r\n        this.props.changeLanguage(ComboVal.item.slanguagetypecode, selectedRecord,this.props.Login.loginTypes);\r\n    }\r\n\r\n    onFocusOutEvent(event) {\r\n        const sloginid = event.target.value;\r\n        if (sloginid !== \"\") {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n            const inputParam = {\r\n                sloginid, Language: selectedRecord.nlanguagecode.item,\r\n                logintype: this.props.Login.loginTypeList\r\n            };\r\n            this.props.getUserSiteAndRole(inputParam, selectedRecord);\r\n        }\r\n    }\r\n\r\n    onLoginEvent = (event) => {\r\n        if (event.keyCode === 13) {\r\n            const inputValue = event.target.value;\r\n            this.setState({\r\n                show: this.props.Login.open\r\n            })\r\n            if (inputValue !== \"\") {\r\n                this.onLoginSubmit(inputValue);\r\n            }\r\n        }\r\n    }\r\n    AutoLogin = (event) => {\r\n        if (event.keyCode === 118) {\r\n            let nlogintypecode = 1;\r\n            const inputParam = {\r\n                nusermultisitecode: parseInt(-1),\r\n                nusermultirolecode: parseInt(-1),\r\n                slanguagetypecode: \"en-US\",\r\n                spassword: \"123\",\r\n                nusercode: -1,\r\n                nlogintypecode: 1,\r\n                nuserrolecode: -1,\r\n                url: nlogintypecode === 1 ? \"/login/internallogin\" : \"/login/adslogin\",\r\n                navigation: \"home\"\r\n            }\r\n            this.setState({\r\n                nusermultisitecode: parseInt(-1),\r\n                nusermultirolecode: parseInt(-1),\r\n                slanguagetypecode: 1,\r\n                spassword: \"123\",\r\n                nusercode: -1,\r\n                nlogintypecode: 1,\r\n                nuserrolecode: -1\r\n            })\r\n            this.props.clickOnLoginButton(inputParam);\r\n        }\r\n    }\r\n    onLoginSubmit() {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const mandatoryField = [\r\n            { \"idsName\": \"IDS_LOGINID\", \"dataField\": \"sloginid\", \"mandatory\": false },\r\n            //Don't Remove the Commented line commented for NIBSC\r\n            // { \"idsName\": \"IDS_SITE\", \"dataField\": \"nusersitecode\", \"mandatory\": true },\r\n            { \"idsName\": \"IDS_ROLE\", \"dataField\": \"nusermultirolecode\", \"mandatory\": true },\r\n            { \"idsName\": \"IDS_LOGINTYPE\", \"dataField\": \"nlogintypecode\", \"mandatory\": true },\r\n            //Don't Remove the Commented line commented for NIBSC\r\n            //{ \"idsName\": \"IDS_LANGUAGE\", \"dataField\": \"nlanguagecode\", \"mandatory\": true },\r\n            { \"idsName\": \"IDS_PASSWORD\", \"dataField\": \"spassword\", \"mandatory\": true }\r\n        ];\r\n        const failedControls = [];\r\n        mandatoryField.map(item => {\r\n            if (selectedRecord[item.dataField] === undefined) {\r\n                failedControls.push(this.props.intl.formatMessage({ id: item.idsName }));\r\n            } else if (typeof selectedRecord[item.dataField] === \"object\") {\r\n                //to validate FormSelectSearch component\r\n                if (selectedRecord[item.dataField].length === 0) {\r\n                    failedControls.push(this.props.intl.formatMessage({ id: item.idsName }));\r\n                }\r\n            } else if (typeof selectedRecord[item.dataField] === \"string\") {\r\n                //to handle string field -- added trim function\r\n                if (selectedRecord[item.dataField].trim().length === 0) {\r\n                    failedControls.push(this.props.intl.formatMessage({ id: item.idsName }));\r\n                }\r\n            }\r\n            return null;\r\n        });\r\n        if (failedControls.length === 0) {\r\n            let nlogintypecode = selectedRecord.nlogintypecode.value;\r\n            if (selectedRecord.nusercode === -1) {\r\n                nlogintypecode = LOGINTYPE.INTERNAL;\r\n            }\r\n            const inputParam = {\r\n                nusermultisitecode: selectedRecord.nusersitecode.value,\r\n                nusermultirolecode: selectedRecord.nusermultirolecode.value,\r\n                slanguagetypecode: selectedRecord.nlanguagecode.item.slanguagetypecode,\r\n                slanguagefilename: selectedRecord.nlanguagecode.item.sfilename,\r\n                spassword: selectedRecord.spassword,\r\n                nusercode: selectedRecord.nusercode,\r\n                nuserrolecode: selectedRecord.nusermultirolecode.item.nuserrolecode,\r\n                sloginid: selectedRecord.sloginid,\r\n                //nlogintypecode: nlogintypecode,\r\n                nlogintypecode: 1,\r\n                //url: nlogintypecode === 1 ? \"/login/internallogin\" : \"/login/adsLogin\",\r\n                url: \"/login/internallogin\" ,\r\n                navigation: \"home\",\r\n            }\r\n            this.props.clickOnLoginButton(inputParam);\r\n        } else {\r\n            toast.info(`${this.props.intl.formatMessage({ id: \"IDS_ENTER\" })} ${failedControls[0]}`);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.navigation === \"home\") {\r\n            this.props.history.push('/');\r\n        }\r\n\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        let createPwdRecord = this.state.createPwdRecord || {};\r\n        let isStateChanged = false;\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            selectedRecord = this.props.Login.selectedRecord;\r\n            isStateChanged = true;\r\n        }\r\n\r\n        if (this.props.Login.createPwdRecord !== previousProps.Login.createPwdRecord) {\r\n            createPwdRecord = this.props.Login.createPwdRecord;\r\n            isStateChanged = true;\r\n        }\r\n\r\n        if (isStateChanged) {\r\n            this.setState({ selectedRecord, createPwdRecord });\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    clickOnLoginButton, changeLanguage,\r\n    getLoginDetails, getUserSiteAndRole, updateStore, createPassword, changepassword, getUsersiteRole, checkPassword\r\n})(injectIntl(SignIn));\r\n"]},"metadata":{},"sourceType":"module"}