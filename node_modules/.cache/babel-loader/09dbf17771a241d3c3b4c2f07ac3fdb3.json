{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import{process}from'@progress/kendo-data-query';import React from'react';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import{connect}from'react-redux';import{injectIntl}from'react-intl';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,getControlMap,Lims_JSON_stringify}from'../../components/CommonScript';import{Col,Row}from'react-bootstrap';import{ListWrapper}from'../../components/client-group.styles';import DataGrid from'../../components/data-grid/data-grid.component';import Esign from'../audittrail/Esign';import AddAliquotPlan from'./AddAliquotPlan';import{callService,updateStore,crudMaster,validateEsignCredential}from'../../actions';import{toast}from'react-toastify';import{getprojectytpe,getSampleTypeandPatientCatgeroy,getUnit,getActiveAliquotPlanById}from'../../actions';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var AliquotPlan=/*#__PURE__*/function(_React$Component){_inherits(AliquotPlan,_React$Component);var _super=_createSuper(AliquotPlan);function AliquotPlan(props){var _this;_classCallCheck(this,AliquotPlan);_this=_super.call(this,props);_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.data,event.dataState),dataState:event.dataState});};_this.reloadData=function(){var inputParam={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:_this.props.Login.inputParam.classUrl,methodUrl:_this.props.Login.inputParam.methodUrl,userInfo:_this.props.Login.userInfo,displayName:_this.props.Login.displayName};_this.props.callService(inputParam);};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};if(fieldName===\"sprojecttypename\"){selectedRecord[fieldName]=comboData;delete selectedRecord[\"sproductname\"];delete selectedRecord[\"stubename\"];delete selectedRecord[\"svisitnumber\"];delete selectedRecord[\"spatientcatname\"];delete selectedRecord[\"ssampledonor\"];// ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n_this.props.getSampleTypeandPatientCatgeroy(_this.state.selectedRecord.sprojecttypename.value,_this.state.selectedRecord.sprojecttypename.label,_this.props.Login.userInfo);}else{selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});}};_this.onInputOnChange=function(event,fieldName){var selectedRecord=_this.state.selectedRecord||{};var values=event.target.value;//.replace(/[^-^0-9]/g, '');\n//let parsedvalues;\nif(fieldName===\"saliquotno\"){if(/^\\d+$/.test(values)&&values!==\"\"){//values = parseInt(values, 10);\nselectedRecord[fieldName]=values;}else{selectedRecord[fieldName]=\"\";}}else if(fieldName===\"squantity\"){if(/^\\d{0,3}(\\.\\d{0,2})?$/.test(values)&&values!==\"\"){selectedRecord[fieldName]=values;}else{selectedRecord[fieldName]=[];}}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;var controlButton=_this.props.Login.controlButton;var selectedId=_this.props.Login.selectedId;// let processtypeList;\n// let projecttypeList;\n// let sampletypeList;\n// let collectiontubeList;\n// let patientcatgoryList;\n// let visitnameList;\nif(_this.props.Login.loadEsign){//true\n//ALPD-4713--Vignesh R(21-08-2024)\nif(_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esignreason']=\"\";selectedRecord['esigncomments']=\"\";}}else{openModal=false;selectedRecord={};controlButton=[];// processtypeList = [];\n// projecttypeList = [];\n// sampletypeList = [];\n// collectiontubeList = [];\n// patientcatgoryList = [];\n// visitnameList = [];\n}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:selectedId,controlButton:controlButton}};_this.props.updateStore(updateInfo);//ate234 janakumar ALPD-5065 Aliquot Plan-->While doing Edit ,the dropdown records are not Showing.\n// this.setState({\n//     selectedRecord: selectedRecord, processtypeList: processtypeList, projecttypeList: projecttypeList,\n//     sampletypeList: sampletypeList, collectiontubeList: collectiontubeList, patientcatgoryList: patientcatgoryList, visitnameList: visitnameList\n// });\n};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.onSaveClick=function(saveType,formRef){if(_this.props.Login.operation===\"create\"){_this.onSaveAliquotPlan(saveType,formRef);}else if(_this.props.Login.operation===\"update\"){_this.updateAliquotPlan(saveType,formRef);}};_this.onSaveAliquotPlan=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;if(selectedRecord!==undefined){var inputParam={nformcode:_this.props.Login.userInfo.nformcode,classUrl:\"aliquotplan\",methodUrl:\"AliquotPlan\",selectedRecord:_objectSpread({},_this.state.selectedRecord),inputData:{userinfo:_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sformname:Lims_JSON_stringify(_this.props.Login.userInfo.sformname),smodulename:Lims_JSON_stringify(_this.props.Login.userInfo.smodulename)}),ncontrolCode:_this.props.Login.userInfo.nformcode,tubename:_this.state.selectedRecord.stubename.label,tubevalue:_this.state.selectedRecord.stubename.value,projecttypename:_this.state.selectedRecord.sprojecttypename.label,projecttypevalue:_this.state.selectedRecord.sprojecttypename.value,productname:_this.state.selectedRecord.sproductname.label,productvalue:_this.state.selectedRecord.sproductname.value,patientcatvalue:_this.state.selectedRecord.spatientcatname===undefined?'-1':_this.state.selectedRecord.spatientcatname.value,patientcatname:_this.state.selectedRecord.spatientcatname===undefined?'NA':_this.state.selectedRecord.spatientcatname.label,visitname:_this.state.selectedRecord.svisitnumber.label,visitnumber:_this.state.selectedRecord.svisitnumber.value,unitvalue:_this.state.selectedRecord.sunitname.value,unitname:_this.state.selectedRecord.sunitname.label,squantity:_this.state.selectedRecord.squantity,saliquotno:_this.state.selectedRecord.saliquotno,sdescription:_this.state.selectedRecord.sdescription===undefined?\"\":_this.state.selectedRecord.sdescription,// ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\nnsampledonorcode:_this.state.selectedRecord.ssampledonor.value,ssampledonor:_this.state.selectedRecord.ssampledonor.label,operation:\"create\"},operation:\"create\",saveType:saveType,formRef:formRef};var masterData=_this.props.Login.masterData;_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.updateAliquotPlan=function(saveType,formRef){var inputParam={nformcode:_this.props.Login.userInfo.nformcode,classUrl:\"aliquotplan\",methodUrl:\"AliquotPlan\",selectedRecord:_objectSpread({},_this.state.selectedRecord),selectedId:_this.state.selectedRecord.naliquotplancode,inputData:{userinfo:_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sformname:Lims_JSON_stringify(_this.props.Login.userInfo.sformname),smodulename:Lims_JSON_stringify(_this.props.Login.userInfo.smodulename)}),//indexof:\nncontrolCode:_this.props.Login.userInfo.nformcode,naliquotplancode:_this.state.selectedRecord.naliquotplancode,tubename:_this.state.selectedRecord.stubename.label,tubevalue:_this.state.selectedRecord.stubename.value,projecttypename:_this.state.selectedRecord.sprojecttypename.label,projecttypevalue:_this.state.selectedRecord.sprojecttypename.value,productname:_this.state.selectedRecord.sproductname.label,productvalue:_this.state.selectedRecord.sproductname.value,patientcatvalue:_this.state.selectedRecord.spatientcatname.value===undefined?'-1':_this.state.selectedRecord.spatientcatname.value,patientcatname:_this.state.selectedRecord.spatientcatname.label,visitname:_this.state.selectedRecord.svisitnumber.label,visitnumber:_this.state.selectedRecord.svisitnumber.value,unitvalue:_this.state.selectedRecord.sunitname.value,unitname:_this.state.selectedRecord.sunitname.label,squantity:_this.state.selectedRecord.squantity,saliquotno:_this.state.selectedRecord.saliquotno,sdescription:_this.state.selectedRecord.sdescription===undefined?\"\":_this.state.selectedRecord.sdescription,// ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\nnsampledonorcode:_this.state.selectedRecord.ssampledonor.value,ssampledonor:_this.state.selectedRecord.ssampledonor.label,operation:\"update\"},operation:\"update\",saveType:saveType,formRef:formRef};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.deleteRecord=function(deleteParam){var _inputData;var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:_this.props.Login.inputParam.methodUrl,displayName:_this.props.Login.inputParam.displayName,inputData:(_inputData={},_defineProperty(_inputData,_this.props.Login.inputParam.methodUrl.toLowerCase(),deleteParam.selectedRecord),_defineProperty(_inputData,\"userinfo\",_this.props.Login.userInfo),_inputData),operation:deleteParam.operation,dataState:_this.state.dataState,selectedRecord:deleteParam.selectedRecord};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.displayName}),operation:deleteParam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.formRef=React.createRef();_this.extractedColumnList=[];var dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={data:[],masterStatus:\"\",error:\"\",selectedRecord:{},dataResult:[],dataState:dataState,userRoleControlRights:[],controlMap:new Map()};return _this;}_createClass(AliquotPlan,[{key:\"render\",value:function render(){var _this2=this;var primaryKeyField=\"\";if(this.props.Login.inputParam!==undefined){this.extractedColumnList=[{\"mandatory\":true,\"idsName\":\"IDS_PROJECTTYPE\",\"dataField\":\"sprojecttypename\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_SAMPLETYPE\",\"dataField\":\"sproductname\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_COLLECTIONTUBETYPEPROCESSTYPE\",\"dataField\":\"stubename\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\",\"width\":180},{\"mandatory\":true,\"idsName\":\"IDS_VISITNUMBER\",\"dataField\":\"svisitnumber\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_PATIENTCATEGORY\",\"dataField\":\"spatientcatname\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\",\"width\":180},// ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n{\"mandatory\":true,\"idsName\":\"IDS_SAMPLEDONOR\",\"dataField\":\"ssampledonor\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_ALIQUOTNO\",\"dataField\":\"saliquotno\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_QUANTITY\",\"dataField\":\"squantity\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_UNIT\",\"dataField\":\"sunitname\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"selectbox\"}];primaryKeyField=\"naliquotplancode\";}var mandatoryFields=[];mandatoryFields.push({\"mandatory\":true,\"idsName\":\"IDS_PROJECTTYPE\",\"dataField\":\"sprojecttypename\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_SAMPLETYPE\",\"dataField\":\"sproductname\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_COLLECTIONTUBETYPEPROCESSTYPE\",\"dataField\":\"stubename\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_VISITNUMBER\",\"dataField\":\"svisitnumber\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_PATIENTCATEGORY\",\"dataField\":\"spatientcatname\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_ALIQUOTNO\",\"dataField\":\"saliquotno\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"selectbox\"},//ALPD-4712--Vignesh R(21-08-2024)\n{\"mandatory\":true,\"idsName\":\"IDS_QUANTITY\",\"dataField\":\"squantity\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_UNIT\",\"dataField\":\"sunitname\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},// ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n{\"mandatory\":true,\"idsName\":\"IDS_SAMPLEDONOR\",\"dataField\":\"ssampledonor\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});var AddAliquotPlanId=this.state.controlMap.has(\"AddAliquotPlan\")&&this.state.controlMap.get(\"AddAliquotPlan\").ncontrolcode;var EditAliquotPlanId=this.state.controlMap.has(\"EditAliquotPlan\")&&this.state.controlMap.get(\"EditAliquotPlan\").ncontrolcode;var DeleteAliquotPlanId=this.state.controlMap.has(\"DeleteAliquotPlan\")&&this.state.controlMap.get(\"DeleteAliquotPlan\").ncontrolcode;var editParam={screenName:this.props.Login.inputParam&&this.props.Login.inputParam.displayName&&this.props.intl.formatMessage({id:this.props.Login.inputParam.displayName}),primaryKeyField:\"naliquotplancode\",operation:\"update\",inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,ncontrolCode:EditAliquotPlanId};var deleteParam={operation:\"delete\",DeleteAliquotPlanId:DeleteAliquotPlanId};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(ListWrapper,{className:\"client-list-content\"},/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:primaryKeyField,selectedId:this.props.Login.selectedId,data:this.state.data,dataResult:this.state.dataResult,dataState:this.state.dataState,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList,controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,fetchRecord:this.props.getActiveAliquotPlanById,addRecord:function addRecord(){return _this2.props.getprojectytpe(AddAliquotPlanId,_this2.props.Login.userInfo)||[];},deleteRecord:this.deleteRecord,reloadData:this.reloadData,editParam:editParam,deleteParam:deleteParam,scrollable:\"scrollable\",gridHeight:\"600px\",isActionRequired:true,isToolBarRequired:true,pageable:true,groupable:false//ATE234 Janakumar ALPD-5577 Sample Storage-->while download the pdf, screen getting freezed\n,isDownloadPDFRequired:false,isDownloadExcelRequired:true})))),this.props.Login.openModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,selectedRecord:this.state.selectedRecord||{},updateStore:this.props.updateStore,mandatoryFields:mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(AddAliquotPlan,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,renalCheck:this.state.renalCheck,donarCheck:this.state.donarCheck// ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n,projecttypeList:this.state.projecttypeList||[],sampletypeList:this.state.sampletypeList||[],collectiontubeList:this.state.collectiontubeList||[],patientcatgoryList:this.state.patientcatgoryList||[],visitnameList:this.state.visitnameList||[],unitList:this.state.unitList||[],sampledonarList:this.state.sampledonarList||[]// ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n,inputParam:this.props.Login.inputParam,actionType:this.state.actionType,operation:this.props.Login.operation})}));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData,dataResult:process(this.props.Login.masterData,this.state.dataState)});}else{var dataState=this.state.dataState;if(dataState===undefined){dataState={skip:0,take:this.state.dataState.take};}if(this.state.dataResult.data){if(this.state.dataResult.data.length>0&&this.props.Login.operation!=='update'&&this.props.Login.operation==='create'){var skipcount=this.state.dataState.skip>0?this.props.Login.masterData.length-this.state.dataState.take:this.state.dataState.skip;dataState={skip:skipcount,take:this.state.dataState.take};}}this.setState({data:this.props.Login.masterData,isOpen:false,selectedRecord:this.props.Login.selectedRecord,dataResult:process(this.props.Login.masterData,dataState),dataState:dataState});}// let { dataState } = this.state;\n// if (this.props.Login.dataState === undefined) {\n//     dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 }\n// }\n// this.setState({\n//     data: this.props.Login.masterData,\n//     isOpen: false,\n//     selectedRecord: this.props.Login.selectedRecord,\n//     dataResult: process(this.props.Login.masterData, dataState),\n//     dataState\n// });\n}else if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}if(this.props.Login.projecttypeList!==previousProps.Login.projecttypeList){this.setState({projecttypeList:this.props.Login.projecttypeList});}if(this.props.Login.sampletypeList!==previousProps.Login.sampletypeList){this.setState({sampletypeList:this.props.Login.sampletypeList});}if(this.props.Login.patientcatgoryList!==previousProps.Login.patientcatgoryList){var selectedRecord=this.props.Login.selectedRecord;var renalCheck=false;if(this.props.Login.patientcatgoryList.length>0){renalCheck=true;if(this.props.Login.operation!=='update'){selectedRecord[\"spatientcatname\"]=[];}}else{selectedRecord[\"spatientcatname\"]={value:-1};renalCheck=false;//, selectedRecord: selectedRecord\n}this.setState({patientcatgoryList:this.props.Login.patientcatgoryList,renalCheck:renalCheck,selectedRecord:selectedRecord});}// ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\nif(this.props.Login.sampledonarList!==previousProps.Login.sampledonarList){var _selectedRecord=this.props.Login.selectedRecord;var donarCheck=false;if(this.props.Login.sampledonarList.length>0){donarCheck=true;if(this.props.Login.operation!=='update'){_selectedRecord[\"ssampledonor\"]=[];}}else{_selectedRecord[\"ssampledonor\"]={value:-1};donarCheck=false;}this.setState({sampledonarList:this.props.Login.sampledonarList,donarCheck:donarCheck,selectedRecord:_selectedRecord});}if(this.props.Login.collectiontubeList!==previousProps.Login.collectiontubeList){this.setState({collectiontubeList:this.props.Login.collectiontubeList});}if(this.props.Login.visitnameList!==previousProps.Login.visitnameList){this.setState({visitnameList:this.props.Login.visitnameList});}if(this.props.Login.unitList!==previousProps.Login.unitList){this.setState({unitList:this.props.Login.unitList});}// ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\nif(this.props.Login.sampledonarList!==previousProps.Login.sampledonarList){this.setState({sampledonarList:this.props.Login.sampledonarList});}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}return null;}}]);return AliquotPlan;}(React.Component);export default connect(mapStateToProps,{updateStore:updateStore,callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,getprojectytpe:getprojectytpe,getSampleTypeandPatientCatgeroy:getSampleTypeandPatientCatgeroy,getUnit:getUnit,getActiveAliquotPlanById:getActiveAliquotPlanById})(injectIntl(AliquotPlan));","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/storagemanagement/AliquotPlan.jsx"],"names":["process","React","SlideOutModal","connect","injectIntl","DEFAULT_RETURN","showEsign","getControlMap","Lims_JSON_stringify","Col","Row","ListWrapper","DataGrid","Esign","AddAliquotPlan","callService","updateStore","crudMaster","validateEsignCredential","toast","getprojectytpe","getSampleTypeandPatientCatgeroy","getUnit","getActiveAliquotPlanById","mapStateToProps","state","Login","AliquotPlan","props","dataStateChange","event","setState","dataResult","data","dataState","reloadData","inputParam","inputData","userInfo","classUrl","methodUrl","displayName","onComboChange","comboData","fieldName","selectedRecord","sprojecttypename","value","label","onInputOnChange","values","target","test","name","closeModal","loadEsign","openModal","controlButton","selectedId","operation","updateInfo","typeName","validateEsign","sreason","nreasoncode","spredefinedreason","password","screenData","onSaveClick","saveType","formRef","onSaveAliquotPlan","updateAliquotPlan","undefined","nformcode","userinfo","sformname","smodulename","ncontrolCode","tubename","stubename","tubevalue","projecttypename","projecttypevalue","productname","sproductname","productvalue","patientcatvalue","spatientcatname","patientcatname","visitname","svisitnumber","visitnumber","unitvalue","sunitname","unitname","squantity","saliquotno","sdescription","nsampledonorcode","ssampledonor","masterData","naliquotplancode","userRoleControlRights","deleteRecord","deleteParam","toLowerCase","screenName","intl","formatMessage","id","createRef","extractedColumnList","skip","take","settings","parseInt","masterStatus","error","controlMap","Map","primaryKeyField","mandatoryFields","push","AddAliquotPlanId","has","get","ncontrolcode","EditAliquotPlanId","DeleteAliquotPlanId","editParam","renalCheck","donarCheck","projecttypeList","sampletypeList","collectiontubeList","patientcatgoryList","visitnameList","unitList","sampledonarList","actionType","previousProps","Object","map","item","length","skipcount","isOpen","warn","Component"],"mappings":"6kCAAA,OAASA,OAAT,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,aAAP,KAA0B,gDAA1B,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,UAAT,KAA2B,YAA3B,CACA,OAASC,cAAT,KAA+B,0BAA/B,CACA,OAASC,SAAT,CAAoBC,aAApB,CAAmCC,mBAAnC,KACI,+BADJ,CAEA,OAASC,GAAT,CAAcC,GAAd,KAAyB,iBAAzB,CACA,OAASC,WAAT,KAA4B,sCAA5B,CACA,MAAOC,CAAAA,QAAP,KAAqB,gDAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,WAAT,CAAsBC,WAAtB,CAAmCC,UAAnC,CAA+CC,uBAA/C,KAA8E,eAA9E,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,cAAT,CAAyBC,+BAAzB,CAA0DC,OAA1D,CAAmEC,wBAAnE,KAAmG,eAAnG,CAKA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,KAAK,CAAI,CAC7B,MAAQ,CAAEC,KAAK,CAAED,KAAK,CAACC,KAAf,CAAR,CACH,CAFD,C,GAIMC,CAAAA,W,sHAEF,qBAAYC,KAAZ,CAAmB,6CACf,uBAAMA,KAAN,EADe,MAmCnBC,eAnCmB,CAmCD,SAACC,KAAD,CAAW,CACzB,MAAKC,QAAL,CAAc,CACVC,UAAU,CAAEhC,OAAO,CAAC,MAAKyB,KAAL,CAAWQ,IAAZ,CAAkBH,KAAK,CAACI,SAAxB,CADT,CAEVA,SAAS,CAAEJ,KAAK,CAACI,SAFP,CAAd,EAIH,CAxCkB,OA4CnBC,UA5CmB,CA4CN,UAAM,CACf,GAAMC,CAAAA,UAAU,CAAG,CACfC,SAAS,CAAE,CAAE,WAAY,MAAKT,KAAL,CAAWF,KAAX,CAAiBY,QAA/B,CADI,CAEfC,QAAQ,CAAE,MAAKX,KAAL,CAAWF,KAAX,CAAiBU,UAAjB,CAA4BG,QAFvB,CAGfC,SAAS,CAAE,MAAKZ,KAAL,CAAWF,KAAX,CAAiBU,UAAjB,CAA4BI,SAHxB,CAIfF,QAAQ,CAAE,MAAKV,KAAL,CAAWF,KAAX,CAAiBY,QAJZ,CAKfG,WAAW,CAAE,MAAKb,KAAL,CAAWF,KAAX,CAAiBe,WALf,CAAnB,CAQA,MAAKb,KAAL,CAAWb,WAAX,CAAuBqB,UAAvB,EACH,CAtDkB,OAqTnBM,aArTmB,CAqTH,SAACC,SAAD,CAAYC,SAAZ,CAA0B,CAEtC,GAAMC,CAAAA,cAAc,CAAG,MAAKpB,KAAL,CAAWoB,cAAX,EAA6B,EAApD,CAIA,GAAID,SAAS,GAAK,kBAAlB,CAAsC,CAClCC,cAAc,CAACD,SAAD,CAAd,CAA4BD,SAA5B,CAEA,MAAOE,CAAAA,cAAc,CAAC,cAAD,CAArB,CACA,MAAOA,CAAAA,cAAc,CAAC,WAAD,CAArB,CACA,MAAOA,CAAAA,cAAc,CAAC,cAAD,CAArB,CACA,MAAOA,CAAAA,cAAc,CAAC,iBAAD,CAArB,CACA,MAAOA,CAAAA,cAAc,CAAC,cAAD,CAArB,CAAuC;AACvC,MAAKjB,KAAL,CAAWP,+BAAX,CACI,MAAKI,KAAL,CAAWoB,cAAX,CAA0BC,gBAA1B,CAA2CC,KAD/C,CAEI,MAAKtB,KAAL,CAAWoB,cAAX,CAA0BC,gBAA1B,CAA2CE,KAF/C,CAGI,MAAKpB,KAAL,CAAWF,KAAX,CAAiBY,QAHrB,EAKH,CAbD,IAaO,CACHO,cAAc,CAACD,SAAD,CAAd,CAA4BD,SAA5B,CACA,MAAKZ,QAAL,CAAc,CAAEc,cAAc,CAAdA,cAAF,CAAd,EACH,CAEJ,CA7UkB,OAgVnBI,eAhVmB,CAgVD,SAACnB,KAAD,CAAQc,SAAR,CAAsB,CAEpC,GAAMC,CAAAA,cAAc,CAAG,MAAKpB,KAAL,CAAWoB,cAAX,EAA6B,EAApD,CAEA,GAAMK,CAAAA,MAAM,CAAGpB,KAAK,CAACqB,MAAN,CAAaJ,KAA5B,CAAoC;AAEpC;AAEA,GAAIH,SAAS,GAAK,YAAlB,CAAgC,CAE5B,GAAI,QAAQQ,IAAR,CAAaF,MAAb,GAAwBA,MAAM,GAAK,EAAvC,CAA2C,CAEvC;AACAL,cAAc,CAACD,SAAD,CAAd,CAA4BM,MAA5B,CACH,CAJD,IAIO,CACHL,cAAc,CAACD,SAAD,CAAd,CAA4B,EAA5B,CACH,CAEJ,CAVD,IAUO,IAAIA,SAAS,GAAK,WAAlB,CAA+B,CAElC,GAAI,wBAAwBQ,IAAxB,CAA6BF,MAA7B,GAAwCA,MAAM,GAAK,EAAvD,CAA2D,CAEvDL,cAAc,CAACD,SAAD,CAAd,CAA4BM,MAA5B,CACH,CAHD,IAGO,CACHL,cAAc,CAACD,SAAD,CAAd,CAA4B,EAA5B,CACH,CAEJ,CATM,IASA,CACHC,cAAc,CAACf,KAAK,CAACqB,MAAN,CAAaE,IAAd,CAAd,CAAoCvB,KAAK,CAACqB,MAAN,CAAaJ,KAAjD,CACH,CAED,MAAKhB,QAAL,CAAc,CAAEc,cAAc,CAAdA,cAAF,CAAd,EACH,CAhXkB,OAmXnBS,UAnXmB,CAmXN,UAAM,CACf,GAAIC,CAAAA,SAAS,CAAG,MAAK3B,KAAL,CAAWF,KAAX,CAAiB6B,SAAjC,CACA,GAAIC,CAAAA,SAAS,CAAG,MAAK5B,KAAL,CAAWF,KAAX,CAAiB8B,SAAjC,CACA,GAAIX,CAAAA,cAAc,CAAG,MAAKjB,KAAL,CAAWF,KAAX,CAAiBmB,cAAtC,CACA,GAAIY,CAAAA,aAAa,CAAG,MAAK7B,KAAL,CAAWF,KAAX,CAAiB+B,aAArC,CACA,GAAIC,CAAAA,UAAU,CAAG,MAAK9B,KAAL,CAAWF,KAAX,CAAiBgC,UAAlC,CACA;AACA;AACA;AACA;AACA;AACA;AAEA,GAAI,MAAK9B,KAAL,CAAWF,KAAX,CAAiB6B,SAArB,CAAgC,CAAE;AAC9B;AACA,GAAI,MAAK3B,KAAL,CAAWF,KAAX,CAAiBiC,SAAjB,GAA+B,QAAnC,CAA6C,CACzCJ,SAAS,CAAG,KAAZ,CACAC,SAAS,CAAG,KAAZ,CACAX,cAAc,CAAG,EAAjB,CAEH,CALD,IAMK,CACDU,SAAS,CAAG,KAAZ,CACEV,cAAc,CAAC,eAAD,CAAd,CAAkC,EAAlC,CACAA,cAAc,CAAC,aAAD,CAAd,CAAgC,EAAhC,CACFA,cAAc,CAAC,eAAD,CAAd,CAAkC,EAAlC,CACH,CACJ,CAdD,IAeK,CACDW,SAAS,CAAG,KAAZ,CACAX,cAAc,CAAG,EAAjB,CACAY,aAAa,CAAG,EAAhB,CACA;AACA;AACA;AACA;AACA;AACA;AAEH,CACD,GAAMG,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAExD,cADK,CAEf4B,IAAI,CAAE,CACFuB,SAAS,CAATA,SADE,CACSD,SAAS,CAATA,SADT,CACoBV,cAAc,CAAdA,cADpB,CACoCa,UAAU,CAAVA,UADpC,CACgDD,aAAa,CAAbA,aADhD,CAFS,CAAnB,CAMA,MAAK7B,KAAL,CAAWZ,WAAX,CAAuB4C,UAAvB,EAEA;AACA;AACA;AACA;AACA;AAEH,CAzakB,OA2anBE,aA3amB,CA2aH,UAAM,CAClB,GAAM1B,CAAAA,UAAU,CAAG,CACfC,SAAS,CAAE,CACP,0CACO,MAAKT,KAAL,CAAWF,KAAX,CAAiBY,QADxB,MAEIyB,OAAO,CAAE,MAAKtC,KAAL,CAAWoB,cAAX,CAA0B,eAA1B,CAFb,CAGImB,WAAW,CAAE,MAAKvC,KAAL,CAAWoB,cAAX,CAA0B,aAA1B,GAA4C,MAAKpB,KAAL,CAAWoB,cAAX,CAA0B,aAA1B,EAAyCE,KAHtG,CAIIkB,iBAAiB,CAAE,MAAKxC,KAAL,CAAWoB,cAAX,CAA0B,aAA1B,GAA4C,MAAKpB,KAAL,CAAWoB,cAAX,CAA0B,aAA1B,EAAyCG,KAJ5G,EADO,CAQPkB,QAAQ,CAAE,MAAKzC,KAAL,CAAWoB,cAAX,CAA0B,eAA1B,CARH,CADI,CAWfsB,UAAU,CAAE,MAAKvC,KAAL,CAAWF,KAAX,CAAiByC,UAXd,CAAnB,CAaA,MAAKvC,KAAL,CAAWV,uBAAX,CAAmCkB,UAAnC,CAA+C,WAA/C,EACH,CA1bkB,OA6bnBgC,WA7bmB,CA6bL,SAACC,QAAD,CAAWC,OAAX,CAAuB,CACjC,GAAI,MAAK1C,KAAL,CAAWF,KAAX,CAAiBiC,SAAjB,GAA+B,QAAnC,CAA6C,CACzC,MAAKY,iBAAL,CAAuBF,QAAvB,CAAiCC,OAAjC,EACH,CAFD,IAEO,IAAI,MAAK1C,KAAL,CAAWF,KAAX,CAAiBiC,SAAjB,GAA+B,QAAnC,CAA6C,CAChD,MAAKa,iBAAL,CAAuBH,QAAvB,CAAiCC,OAAjC,EACH,CAEJ,CApckB,OAucnBC,iBAvcmB,CAucC,SAACF,QAAD,CAAWC,OAAX,CAAuB,CAEvC,GAAIzB,CAAAA,cAAc,CAAG,MAAKpB,KAAL,CAAWoB,cAAhC,CACA,GAAIA,cAAc,GAAK4B,SAAvB,CAAkC,CAE9B,GAAMrC,CAAAA,UAAU,CAAG,CACfsC,SAAS,CAAE,MAAK9C,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BoC,SADtB,CAEfnC,QAAQ,CAAE,aAFK,CAGfC,SAAS,CAAE,aAHI,CAIfK,cAAc,kBAAM,MAAKpB,KAAL,CAAWoB,cAAjB,CAJC,CAKfR,SAAS,CAAE,CACPsC,QAAQ,gCACD,MAAK/C,KAAL,CAAWF,KAAX,CAAiBY,QADhB,MAEJsC,SAAS,CAAEpE,mBAAmB,CAAC,MAAKoB,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BsC,SAA3B,CAF1B,CAGJC,WAAW,CAAErE,mBAAmB,CAAC,MAAKoB,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BuC,WAA3B,CAH5B,EADD,CAQPC,YAAY,CAAE,MAAKlD,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BoC,SARjC,CASPK,QAAQ,CAAE,MAAKtD,KAAL,CAAWoB,cAAX,CAA0BmC,SAA1B,CAAoChC,KATvC,CAUPiC,SAAS,CAAE,MAAKxD,KAAL,CAAWoB,cAAX,CAA0BmC,SAA1B,CAAoCjC,KAVxC,CAWPmC,eAAe,CAAE,MAAKzD,KAAL,CAAWoB,cAAX,CAA0BC,gBAA1B,CAA2CE,KAXrD,CAYPmC,gBAAgB,CAAE,MAAK1D,KAAL,CAAWoB,cAAX,CAA0BC,gBAA1B,CAA2CC,KAZtD,CAaPqC,WAAW,CAAE,MAAK3D,KAAL,CAAWoB,cAAX,CAA0BwC,YAA1B,CAAuCrC,KAb7C,CAcPsC,YAAY,CAAE,MAAK7D,KAAL,CAAWoB,cAAX,CAA0BwC,YAA1B,CAAuCtC,KAd9C,CAePwC,eAAe,CAAE,MAAK9D,KAAL,CAAWoB,cAAX,CAA0B2C,eAA1B,GAA8Cf,SAA9C,CAA0D,IAA1D,CAAiE,MAAKhD,KAAL,CAAWoB,cAAX,CAA0B2C,eAA1B,CAA0CzC,KAfrH,CAgBP0C,cAAc,CAAE,MAAKhE,KAAL,CAAWoB,cAAX,CAA0B2C,eAA1B,GAA8Cf,SAA9C,CAA0D,IAA1D,CAAiE,MAAKhD,KAAL,CAAWoB,cAAX,CAA0B2C,eAA1B,CAA0CxC,KAhBpH,CAiBP0C,SAAS,CAAE,MAAKjE,KAAL,CAAWoB,cAAX,CAA0B8C,YAA1B,CAAuC3C,KAjB3C,CAkBP4C,WAAW,CAAE,MAAKnE,KAAL,CAAWoB,cAAX,CAA0B8C,YAA1B,CAAuC5C,KAlB7C,CAmBP8C,SAAS,CAAE,MAAKpE,KAAL,CAAWoB,cAAX,CAA0BiD,SAA1B,CAAoC/C,KAnBxC,CAoBPgD,QAAQ,CAAE,MAAKtE,KAAL,CAAWoB,cAAX,CAA0BiD,SAA1B,CAAoC9C,KApBvC,CAqBPgD,SAAS,CAAE,MAAKvE,KAAL,CAAWoB,cAAX,CAA0BmD,SArB9B,CAsBPC,UAAU,CAAE,MAAKxE,KAAL,CAAWoB,cAAX,CAA0BoD,UAtB/B,CAuBPC,YAAY,CAAE,MAAKzE,KAAL,CAAWoB,cAAX,CAA0BqD,YAA1B,GAAyCzB,SAAzC,CAAmD,EAAnD,CAAsD,MAAKhD,KAAL,CAAWoB,cAAX,CAA0BqD,YAvBvF,CAwBP;AACAC,gBAAgB,CAAE,MAAK1E,KAAL,CAAWoB,cAAX,CAA0BuD,YAA1B,CAAuCrD,KAzBlD,CA0BPqD,YAAY,CAAE,MAAK3E,KAAL,CAAWoB,cAAX,CAA0BuD,YAA1B,CAAuCpD,KA1B9C,CA2BPW,SAAS,CAAE,QA3BJ,CALI,CAoCfA,SAAS,CAAE,QApCI,CAqCfU,QAAQ,CAARA,QArCe,CAqCLC,OAAO,CAAPA,OArCK,CAAnB,CAwCA,GAAM+B,CAAAA,UAAU,CAAG,MAAKzE,KAAL,CAAWF,KAAX,CAAiB2E,UAApC,CAGA,MAAKzE,KAAL,CAAWX,UAAX,CAAsBmB,UAAtB,CAAkCiE,UAAlC,CAA8C,WAA9C,EACH,CAEJ,CA1fkB,OA4fnB7B,iBA5fmB,CA4fC,SAACH,QAAD,CAAWC,OAAX,CAAuB,CAGvC,GAAMlC,CAAAA,UAAU,CAAG,CACfsC,SAAS,CAAE,MAAK9C,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BoC,SADtB,CAEfnC,QAAQ,CAAE,aAFK,CAGfC,SAAS,CAAE,aAHI,CAIfK,cAAc,kBAAM,MAAKpB,KAAL,CAAWoB,cAAjB,CAJC,CAKfa,UAAU,CAAC,MAAKjC,KAAL,CAAWoB,cAAX,CAA0ByD,gBALtB,CAMfjE,SAAS,CAAE,CACPsC,QAAQ,gCACD,MAAK/C,KAAL,CAAWF,KAAX,CAAiBY,QADhB,MAEJsC,SAAS,CAAEpE,mBAAmB,CAAC,MAAKoB,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BsC,SAA3B,CAF1B,CAGJC,WAAW,CAAErE,mBAAmB,CAAC,MAAKoB,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BuC,WAA3B,CAH5B,EADD,CAMP;AACAC,YAAY,CAAE,MAAKlD,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BoC,SAPjC,CAQP4B,gBAAgB,CAAE,MAAK7E,KAAL,CAAWoB,cAAX,CAA0ByD,gBARrC,CASPvB,QAAQ,CAAE,MAAKtD,KAAL,CAAWoB,cAAX,CAA0BmC,SAA1B,CAAoChC,KATvC,CAUPiC,SAAS,CAAE,MAAKxD,KAAL,CAAWoB,cAAX,CAA0BmC,SAA1B,CAAoCjC,KAVxC,CAWPmC,eAAe,CAAE,MAAKzD,KAAL,CAAWoB,cAAX,CAA0BC,gBAA1B,CAA2CE,KAXrD,CAYPmC,gBAAgB,CAAE,MAAK1D,KAAL,CAAWoB,cAAX,CAA0BC,gBAA1B,CAA2CC,KAZtD,CAaPqC,WAAW,CAAE,MAAK3D,KAAL,CAAWoB,cAAX,CAA0BwC,YAA1B,CAAuCrC,KAb7C,CAcPsC,YAAY,CAAE,MAAK7D,KAAL,CAAWoB,cAAX,CAA0BwC,YAA1B,CAAuCtC,KAd9C,CAePwC,eAAe,CAAE,MAAK9D,KAAL,CAAWoB,cAAX,CAA0B2C,eAA1B,CAA0CzC,KAA1C,GAAoD0B,SAApD,CAAgE,IAAhE,CAAuE,MAAKhD,KAAL,CAAWoB,cAAX,CAA0B2C,eAA1B,CAA0CzC,KAf3H,CAgBP0C,cAAc,CAAE,MAAKhE,KAAL,CAAWoB,cAAX,CAA0B2C,eAA1B,CAA0CxC,KAhBnD,CAiBP0C,SAAS,CAAE,MAAKjE,KAAL,CAAWoB,cAAX,CAA0B8C,YAA1B,CAAuC3C,KAjB3C,CAkBP4C,WAAW,CAAE,MAAKnE,KAAL,CAAWoB,cAAX,CAA0B8C,YAA1B,CAAuC5C,KAlB7C,CAmBP8C,SAAS,CAAE,MAAKpE,KAAL,CAAWoB,cAAX,CAA0BiD,SAA1B,CAAoC/C,KAnBxC,CAoBPgD,QAAQ,CAAE,MAAKtE,KAAL,CAAWoB,cAAX,CAA0BiD,SAA1B,CAAoC9C,KApBvC,CAqBPgD,SAAS,CAAE,MAAKvE,KAAL,CAAWoB,cAAX,CAA0BmD,SArB9B,CAsBPC,UAAU,CAAE,MAAKxE,KAAL,CAAWoB,cAAX,CAA0BoD,UAtB/B,CAuBPC,YAAY,CAAE,MAAKzE,KAAL,CAAWoB,cAAX,CAA0BqD,YAA1B,GAAyCzB,SAAzC,CAAmD,EAAnD,CAAsD,MAAKhD,KAAL,CAAWoB,cAAX,CAA0BqD,YAvBvF,CAwBP;AACAC,gBAAgB,CAAE,MAAK1E,KAAL,CAAWoB,cAAX,CAA0BuD,YAA1B,CAAuCrD,KAzBlD,CA0BPqD,YAAY,CAAE,MAAK3E,KAAL,CAAWoB,cAAX,CAA0BuD,YAA1B,CAAuCpD,KA1B9C,CA2BPW,SAAS,CAAE,QA3BJ,CANI,CAqCfA,SAAS,CAAE,QArCI,CAsCfU,QAAQ,CAARA,QAtCe,CAsCLC,OAAO,CAAPA,OAtCK,CAAnB,CAyCA,GAAM+B,CAAAA,UAAU,CAAG,MAAKzE,KAAL,CAAWF,KAAX,CAAiB2E,UAApC,CAEA,GAAI/F,SAAS,CAAC,MAAKsB,KAAL,CAAWF,KAAX,CAAiB6E,qBAAlB,CAAyC,MAAK3E,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BoC,SAAnE,CAA8E,MAAK9C,KAAL,CAAWF,KAAX,CAAiBoD,YAA/F,CAAb,CAA2H,CACvH,GAAMlB,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAExD,cADK,CAEf4B,IAAI,CAAE,CACFsB,SAAS,CAAE,IADT,CACeY,UAAU,CAAE,CAAE/B,UAAU,CAAVA,UAAF,CAAciE,UAAU,CAAVA,UAAd,CAD3B,CACuDhC,QAAQ,CAARA,QADvD,CAFS,CAAnB,CAMA,MAAKzC,KAAL,CAAWZ,WAAX,CAAuB4C,UAAvB,EACH,CARD,IASK,CACD,MAAKhC,KAAL,CAAWX,UAAX,CAAsBmB,UAAtB,CAAkCiE,UAAlC,CAA8C,WAA9C,EACH,CACJ,CAtjBkB,OA0jBnBG,YA1jBmB,CA0jBJ,SAACC,WAAD,CAAiB,gBAC5B,GAAMrE,CAAAA,UAAU,CAAG,CACfG,QAAQ,CAAE,MAAKX,KAAL,CAAWF,KAAX,CAAiBU,UAAjB,CAA4BG,QADvB,CAEfC,SAAS,CAAE,MAAKZ,KAAL,CAAWF,KAAX,CAAiBU,UAAjB,CAA4BI,SAFxB,CAGfC,WAAW,CAAE,MAAKb,KAAL,CAAWF,KAAX,CAAiBU,UAAjB,CAA4BK,WAH1B,CAIfJ,SAAS,2CACJ,MAAKT,KAAL,CAAWF,KAAX,CAAiBU,UAAjB,CAA4BI,SAA5B,CAAsCkE,WAAtC,EADI,CACkDD,WAAW,CAAC5D,cAD9D,6BAEL,UAFK,CAEO,MAAKjB,KAAL,CAAWF,KAAX,CAAiBY,QAFxB,aAJM,CAQfqB,SAAS,CAAE8C,WAAW,CAAC9C,SARR,CASfzB,SAAS,CAAE,MAAKT,KAAL,CAAWS,SATP,CAUfW,cAAc,CAAE4D,WAAW,CAAC5D,cAVb,CAAnB,CAaA,GAAIvC,SAAS,CAAC,MAAKsB,KAAL,CAAWF,KAAX,CAAiB6E,qBAAlB,CAAyC,MAAK3E,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BoC,SAAnE,CAA8E+B,WAAW,CAAC3B,YAA1F,CAAb,CAAsH,CAClH,GAAMlB,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAExD,cADK,CAEf4B,IAAI,CAAE,CACFsB,SAAS,CAAE,IADT,CACeY,UAAU,CAAE,CAAE/B,UAAU,CAAVA,UAAF,CAAciE,UAAU,CAAE,MAAKzE,KAAL,CAAWF,KAAX,CAAiB2E,UAA3C,CAD3B,CAEF7C,SAAS,CAAE,IAFT,CAEemD,UAAU,CAAE,MAAK/E,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,MAAKlF,KAAL,CAAWF,KAAX,CAAiBe,WAAvB,CAA9B,CAF3B,CAGFkB,SAAS,CAAE8C,WAAW,CAAC9C,SAHrB,CAFS,CAAnB,CAQA,MAAK/B,KAAL,CAAWZ,WAAX,CAAuB4C,UAAvB,EACH,CAVD,IAWK,CACD,MAAKhC,KAAL,CAAWX,UAAX,CAAsBmB,UAAtB,CAAkC,MAAKR,KAAL,CAAWF,KAAX,CAAiB2E,UAAnD,CAA+D,WAA/D,EACH,CACJ,CAtlBkB,CAEf,MAAK/B,OAAL,CAAerE,KAAK,CAAC8G,SAAN,EAAf,CACA,MAAKC,mBAAL,CAA2B,EAA3B,CAEA,GAAM9E,CAAAA,SAAS,CAAG,CACd+E,IAAI,CAAE,CADQ,CAEdC,IAAI,CAAE,MAAKtF,KAAL,CAAWF,KAAX,CAAiByF,QAAjB,CAA4BC,QAAQ,CAAC,MAAKxF,KAAL,CAAWF,KAAX,CAAiByF,QAAjB,CAA0B,EAA1B,CAAD,CAApC,CAAsE,CAF9D,CAAlB,CAKA,MAAK1F,KAAL,CAAa,CACTQ,IAAI,CAAE,EADG,CACCoF,YAAY,CAAE,EADf,CACmBC,KAAK,CAAE,EAD1B,CAC8BzE,cAAc,CAAE,EAD9C,CAETb,UAAU,CAAE,EAFH,CAGTE,SAAS,CAAEA,SAHF,CAITqE,qBAAqB,CAAE,EAJd,CAKTgB,UAAU,CAAE,GAAIC,CAAAA,GAAJ,EALH,CAAb,CAVe,aAkBlB,C,8CAwCD,iBAAS,iBACL,GAAIC,CAAAA,eAAe,CAAG,EAAtB,CAEA,GAAI,KAAK7F,KAAL,CAAWF,KAAX,CAAiBU,UAAjB,GAAgCqC,SAApC,CAA+C,CAE3C,KAAKuC,mBAAL,CAA2B,CACvB,CAAE,YAAa,IAAf,CAAqB,UAAW,iBAAhC,CAAmD,YAAa,kBAAhE,CAAoF,iBAAkB,YAAtG,CAAoH,cAAe,WAAnI,CADuB,CAEvB,CAAE,YAAa,IAAf,CAAqB,UAAW,gBAAhC,CAAkD,YAAa,cAA/D,CAA+E,iBAAkB,YAAjG,CAA+G,cAAe,WAA9H,CAFuB,CAGvB,CAAE,YAAa,IAAf,CAAqB,UAAW,mCAAhC,CAAqE,YAAa,WAAlF,CAA+F,iBAAkB,YAAjH,CAA+H,cAAe,WAA9I,CAA2J,QAAS,GAApK,CAHuB,CAIvB,CAAE,YAAa,IAAf,CAAqB,UAAW,iBAAhC,CAAmD,YAAa,cAAhE,CAAgF,iBAAkB,YAAlG,CAAgH,cAAe,WAA/H,CAJuB,CAKvB,CAAE,YAAa,IAAf,CAAqB,UAAW,qBAAhC,CAAuD,YAAa,iBAApE,CAAuF,iBAAkB,YAAzG,CAAuH,cAAe,WAAtI,CAAmJ,QAAS,GAA5J,CALuB,CAMvB;AACA,CAAE,YAAa,IAAf,CAAqB,UAAW,iBAAhC,CAAmD,YAAa,cAAhE,CAAgF,iBAAkB,YAAlG,CAAgH,cAAe,WAA/H,CAPuB,CAQvB,CAAE,YAAa,IAAf,CAAqB,UAAW,eAAhC,CAAiD,YAAa,YAA9D,CAA4E,iBAAkB,WAA9F,CAA2G,cAAe,WAA1H,CARuB,CASvB,CAAE,YAAa,IAAf,CAAqB,UAAW,cAAhC,CAAgD,YAAa,WAA7D,CAA0E,iBAAkB,WAA5F,CAAyG,cAAe,WAAxH,CATuB,CAUvB,CAAE,YAAa,IAAf,CAAqB,UAAW,UAAhC,CAA4C,YAAa,WAAzD,CAAsE,iBAAkB,YAAxF,CAAsG,cAAe,WAArH,CAVuB,CAWvB,CAAE,YAAa,IAAf,CAAqB,UAAW,iBAAhC,CAAmD,YAAa,cAAhE,CAAgF,iBAAkB,WAAlG,CAA+G,cAAe,WAA9H,CAXuB,CAA3B,CAeAS,eAAe,CAAG,kBAAlB,CACH,CACD,GAAIC,CAAAA,eAAe,CAAG,EAAtB,CACAA,eAAe,CAACC,IAAhB,CACI,CAAE,YAAa,IAAf,CAAqB,UAAW,iBAAhC,CAAmD,YAAa,kBAAhE,CAAoF,iBAAkB,YAAtG,CAAoH,cAAe,WAAnI,CADJ,CAEI,CAAE,YAAa,IAAf,CAAqB,UAAW,gBAAhC,CAAkD,YAAa,cAA/D,CAA+E,iBAAkB,YAAjG,CAA+G,cAAe,WAA9H,CAFJ,CAGI,CAAE,YAAa,IAAf,CAAqB,UAAW,mCAAhC,CAAqE,YAAa,WAAlF,CAA+F,iBAAkB,YAAjH,CAA+H,cAAe,WAA9I,CAHJ,CAII,CAAE,YAAa,IAAf,CAAqB,UAAW,iBAAhC,CAAmD,YAAa,cAAhE,CAAgF,iBAAkB,YAAlG,CAAgH,cAAe,WAA/H,CAJJ,CAKI,CAAE,YAAa,IAAf,CAAqB,UAAW,qBAAhC,CAAuD,YAAa,iBAApE,CAAuF,iBAAkB,YAAzG,CAAuH,cAAe,WAAtI,CALJ,CAMI,CAAE,YAAa,IAAf,CAAqB,UAAW,eAAhC,CAAiD,YAAa,YAA9D,CAA4E,iBAAkB,WAA9F,CAA2G,cAAe,WAA1H,CANJ,CAOI;AACA,CAAE,YAAa,IAAf,CAAqB,UAAW,cAAhC,CAAgD,YAAa,WAA7D,CAA0E,iBAAkB,WAA5F,CAAyG,cAAe,WAAxH,CARJ,CASI,CAAE,YAAa,IAAf,CAAqB,UAAW,UAAhC,CAA4C,YAAa,WAAzD,CAAsE,iBAAkB,YAAxF,CAAsG,cAAe,WAArH,CATJ,CAUI;AACA,CAAE,YAAa,IAAf,CAAqB,UAAW,iBAAhC,CAAmD,YAAa,cAAhE,CAAgF,iBAAkB,YAAlG,CAAgH,cAAe,WAA/H,CAXJ,EAgBA,GAAMC,CAAAA,gBAAgB,CAAG,KAAKnG,KAAL,CAAW8F,UAAX,CAAsBM,GAAtB,CAA0B,gBAA1B,GAA+C,KAAKpG,KAAL,CAAW8F,UAAX,CAAsBO,GAAtB,CAA0B,gBAA1B,EAA4CC,YAApH,CACA,GAAMC,CAAAA,iBAAiB,CAAG,KAAKvG,KAAL,CAAW8F,UAAX,CAAsBM,GAAtB,CAA0B,iBAA1B,GAAgD,KAAKpG,KAAL,CAAW8F,UAAX,CAAsBO,GAAtB,CAA0B,iBAA1B,EAA6CC,YAAvH,CACA,GAAME,CAAAA,mBAAmB,CAAG,KAAKxG,KAAL,CAAW8F,UAAX,CAAsBM,GAAtB,CAA0B,mBAA1B,GAAkD,KAAKpG,KAAL,CAAW8F,UAAX,CAAsBO,GAAtB,CAA0B,mBAA1B,EAA+CC,YAA7H,CAGA,GAAMG,CAAAA,SAAS,CAAG,CACdvB,UAAU,CAAE,KAAK/E,KAAL,CAAWF,KAAX,CAAiBU,UAAjB,EAA+B,KAAKR,KAAL,CAAWF,KAAX,CAAiBU,UAAjB,CAA4BK,WAA3D,EAA0E,KAAKb,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,KAAKlF,KAAL,CAAWF,KAAX,CAAiBU,UAAjB,CAA4BK,WAAlC,CAA9B,CADxE,CACwJgF,eAAe,CAAE,kBADzK,CAC6L9D,SAAS,CAAE,QADxM,CAEdvB,UAAU,CAAE,KAAKR,KAAL,CAAWF,KAAX,CAAiBU,UAFf,CAE2BE,QAAQ,CAAE,KAAKV,KAAL,CAAWF,KAAX,CAAiBY,QAFtD,CAGdwC,YAAY,CAAEkD,iBAHA,CAAlB,CAMA,GAAMvB,CAAAA,WAAW,CAAG,CAAE9C,SAAS,CAAE,QAAb,CAAuBsE,mBAAmB,CAAEA,mBAA5C,CAApB,CAEA,mBAAQ,qDACJ,oBAAC,GAAD,mBACI,oBAAC,GAAD,mBACI,oBAAC,WAAD,EAAa,SAAS,CAAC,qBAAvB,eAEI,oBAAC,QAAD,EACI,eAAe,CAAER,eADrB,CAEI,UAAU,CAAE,KAAK7F,KAAL,CAAWF,KAAX,CAAiBgC,UAFjC,CAGI,IAAI,CAAE,KAAKjC,KAAL,CAAWQ,IAHrB,CAII,UAAU,CAAE,KAAKR,KAAL,CAAWO,UAJ3B,CAKI,SAAS,CAAE,KAAKP,KAAL,CAAWS,SAL1B,CAMI,eAAe,CAAE,KAAKL,eAN1B,CAOI,mBAAmB,CAAE,KAAKmF,mBAP9B,CAQI,UAAU,CAAE,KAAKvF,KAAL,CAAW8F,UAR3B,CASI,qBAAqB,CAAE,KAAK9F,KAAL,CAAW8E,qBATtC,CAUI,UAAU,CAAE,KAAK3E,KAAL,CAAWF,KAAX,CAAiBU,UAVjC,CAWI,QAAQ,CAAE,KAAKR,KAAL,CAAWF,KAAX,CAAiBY,QAX/B,CAYI,WAAW,CAAE,KAAKV,KAAL,CAAWL,wBAZ5B,CAaI,SAAS,CAAE,2BAAM,CAAA,MAAI,CAACK,KAAL,CAAWR,cAAX,CAA0BwG,gBAA1B,CAA4C,MAAI,CAAChG,KAAL,CAAWF,KAAX,CAAiBY,QAA7D,GAA0E,EAAhF,EAbf,CAcI,YAAY,CAAE,KAAKkE,YAdvB,CAeI,UAAU,CAAE,KAAKrE,UAfrB,CAgBI,SAAS,CAAE+F,SAhBf,CAiBI,WAAW,CAAEzB,WAjBjB,CAkBI,UAAU,CAAE,YAlBhB,CAmBI,UAAU,CAAE,OAnBhB,CAoBI,gBAAgB,CAAE,IApBtB,CAqBI,iBAAiB,CAAE,IArBvB,CAsBI,QAAQ,CAAE,IAtBd,CAuBI,SAAS,CAAE,KACX;AAxBJ,CAyBI,qBAAqB,CAAE,KAzB3B,CA0BI,uBAAuB,CAAE,IA1B7B,EAFJ,CADJ,CADJ,CADI,CAuCH,KAAK7E,KAAL,CAAWF,KAAX,CAAiB8B,SAAjB,eACG,oBAAC,aAAD,EACI,IAAI,CAAE,KAAK5B,KAAL,CAAWF,KAAX,CAAiB8B,SAD3B,CAEI,UAAU,CAAE,KAAKF,UAFrB,CAGI,SAAS,CAAE,KAAK1B,KAAL,CAAWF,KAAX,CAAiBiC,SAHhC,CAII,UAAU,CAAE,KAAK/B,KAAL,CAAWF,KAAX,CAAiBU,UAJjC,CAKI,UAAU,CAAE,KAAKR,KAAL,CAAWF,KAAX,CAAiBiF,UALjC,CAMI,WAAW,CAAE,KAAKvC,WANtB,CAOI,KAAK,CAAE,KAAKxC,KAAL,CAAWF,KAAX,CAAiB6B,SAP5B,CAQI,aAAa,CAAE,KAAKO,aARxB,CASI,YAAY,CAAE,KAAKlC,KAAL,CAAWF,KAAX,CAAiB2F,YATnC,CAUI,cAAc,CAAE,KAAK5F,KAAL,CAAWoB,cAAX,EAA6B,EAVjD,CAWI,WAAW,CAAE,KAAKjB,KAAL,CAAWZ,WAX5B,CAYI,eAAe,CAAE0G,eAZrB,CAaI,YAAY,CAAE,KAAK9F,KAAL,CAAWF,KAAX,CAAiB6B,SAAjB,cACV,oBAAC,KAAD,EACI,SAAS,CAAE,KAAK3B,KAAL,CAAWF,KAAX,CAAiBiC,SADhC,CAEI,eAAe,CAAE,KAAKV,eAF1B,CAGI,UAAU,CAAE,KAAKrB,KAAL,CAAWF,KAAX,CAAiBU,UAHjC,CAII,cAAc,CAAE,KAAKX,KAAL,CAAWoB,cAAX,EAA6B,EAJjD,EADU,cAOR,oBAAC,cAAD,EACE,cAAc,CAAE,KAAKpB,KAAL,CAAWoB,cAAX,EAA6B,EAD/C,CAEE,eAAe,CAAE,KAAKI,eAFxB,CAGE,aAAa,CAAE,KAAKP,aAHtB,CAIE,UAAU,CAAE,KAAKjB,KAAL,CAAW0G,UAJzB,CAKE,UAAU,CAAE,KAAK1G,KAAL,CAAW2G,UAAY;AALrC,CAME,eAAe,CAAE,KAAK3G,KAAL,CAAW4G,eAAX,EAA8B,EANjD,CAOE,cAAc,CAAE,KAAK5G,KAAL,CAAW6G,cAAX,EAA6B,EAP/C,CAQE,kBAAkB,CAAE,KAAK7G,KAAL,CAAW8G,kBAAX,EAAiC,EARvD,CASE,kBAAkB,CAAE,KAAK9G,KAAL,CAAW+G,kBAAX,EAAiC,EATvD,CAUE,aAAa,CAAE,KAAK/G,KAAL,CAAWgH,aAAX,EAA4B,EAV7C,CAWE,QAAQ,CAAE,KAAKhH,KAAL,CAAWiH,QAAX,EAAuB,EAXnC,CAYE,eAAe,CAAE,KAAKjH,KAAL,CAAWkH,eAAX,EAA8B,EAAI;AAZrD,CAaE,UAAU,CAAE,KAAK/G,KAAL,CAAWF,KAAX,CAAiBU,UAb/B,CAcE,UAAU,CAAE,KAAKX,KAAL,CAAWmH,UAdzB,CAeE,SAAS,CAAE,KAAKhH,KAAL,CAAWF,KAAX,CAAiBiC,SAf9B,EApBV,EAxCA,CAAR,CAgFH,C,kCAGD,4BAAmBkF,aAAnB,CAAkC,CAE9B,GAAI,KAAKjH,KAAL,CAAWF,KAAX,CAAiB2E,UAAjB,GAAgCwC,aAAa,CAACnH,KAAd,CAAoB2E,UAAxD,CAAoE,CAChE,GAAI,KAAKzE,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BoC,SAA1B,GAAwCmE,aAAa,CAACnH,KAAd,CAAoBY,QAApB,CAA6BoC,SAAzE,CAAoF,CAChF,GAAM6B,CAAAA,qBAAqB,CAAG,EAA9B,CACA,GAAI,KAAK3E,KAAL,CAAWF,KAAX,CAAiB6E,qBAArB,CAA4C,CACxC,KAAK3E,KAAL,CAAWF,KAAX,CAAiB6E,qBAAjB,CAAuC,KAAK3E,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BoC,SAAjE,GAA+EoE,MAAM,CAAC5F,MAAP,CAAc,KAAKtB,KAAL,CAAWF,KAAX,CAAiB6E,qBAAjB,CAAuC,KAAK3E,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BoC,SAAjE,CAAd,EAA2FqE,GAA3F,CAA+F,SAAAC,IAAI,QAC9KzC,CAAAA,qBAAqB,CAACoB,IAAtB,CAA2BqB,IAAI,CAACjB,YAAhC,CAD8K,EAAnG,CAA/E,CAEH,CACD,GAAMR,CAAAA,UAAU,CAAGhH,aAAa,CAAC,KAAKqB,KAAL,CAAWF,KAAX,CAAiB6E,qBAAlB,CAAyC,KAAK3E,KAAL,CAAWF,KAAX,CAAiBY,QAAjB,CAA0BoC,SAAnE,CAAhC,CACA,KAAK3C,QAAL,CAAc,CACVwE,qBAAqB,CAArBA,qBADU,CACagB,UAAU,CAAVA,UADb,CACyBtF,IAAI,CAAE,KAAKL,KAAL,CAAWF,KAAX,CAAiB2E,UADhD,CAEVrE,UAAU,CAAEhC,OAAO,CAAC,KAAK4B,KAAL,CAAWF,KAAX,CAAiB2E,UAAlB,CAA8B,KAAK5E,KAAL,CAAWS,SAAzC,CAFT,CAAd,EAIH,CAXD,IAYK,CACD,GAAKA,CAAAA,SAAL,CAAgB,KAAKT,KAArB,CAAKS,SAAL,CACA,GAAGA,SAAS,GAAGuC,SAAf,CAAyB,CACrBvC,SAAS,CAAC,CAAC+E,IAAI,CAAC,CAAN,CAAQC,IAAI,CAAC,KAAKzF,KAAL,CAAWS,SAAX,CAAqBgF,IAAlC,CAAV,CACH,CACD,GAAG,KAAKzF,KAAL,CAAWO,UAAX,CAAsBC,IAAzB,CAA8B,CAC1B,GAAG,KAAKR,KAAL,CAAWO,UAAX,CAAsBC,IAAtB,CAA2BgH,MAA3B,CAAmC,CAAnC,EAAwC,KAAKrH,KAAL,CAAWF,KAAX,CAAiBiC,SAAjB,GAA8B,QAAtE,EAAkF,KAAK/B,KAAL,CAAWF,KAAX,CAAiBiC,SAAjB,GAA8B,QAAnH,CAA4H,CACzH,GAAIuF,CAAAA,SAAS,CAAC,KAAKzH,KAAL,CAAWS,SAAX,CAAqB+E,IAArB,CAA0B,CAA1B,CAA6B,KAAKrF,KAAL,CAAWF,KAAX,CAAiB2E,UAAjB,CAA4B4C,MAA5B,CAAmC,KAAKxH,KAAL,CAAWS,SAAX,CAAqBgF,IAArF,CACd,KAAKzF,KAAL,CAAWS,SAAX,CAAqB+E,IADrB,CAEC/E,SAAS,CAAC,CAAC+E,IAAI,CAACiC,SAAN,CAAgBhC,IAAI,CAAC,KAAKzF,KAAL,CAAWS,SAAX,CAAqBgF,IAA1C,CAAV,CACH,CACJ,CAED,KAAKnF,QAAL,CAAc,CACVE,IAAI,CAAE,KAAKL,KAAL,CAAWF,KAAX,CAAiB2E,UADb,CAEV8C,MAAM,CAAE,KAFE,CAGVtG,cAAc,CAAE,KAAKjB,KAAL,CAAWF,KAAX,CAAiBmB,cAHvB,CAIVb,UAAU,CAAEhC,OAAO,CAAC,KAAK4B,KAAL,CAAWF,KAAX,CAAiB2E,UAAlB,CAA8BnE,SAA9B,CAJT,CAKVA,SAAS,CAATA,SALU,CAAd,EAOH,CACD;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEH,CA/CD,IA+CO,IAAI,KAAKN,KAAL,CAAWF,KAAX,CAAiBmB,cAAjB,GAAoCgG,aAAa,CAACnH,KAAd,CAAoBmB,cAA5D,CAA4E,CAC/E,KAAKd,QAAL,CAAc,CAAEc,cAAc,CAAE,KAAKjB,KAAL,CAAWF,KAAX,CAAiBmB,cAAnC,CAAd,EACH,CAED,GAAI,KAAKjB,KAAL,CAAWF,KAAX,CAAiB2G,eAAjB,GAAqCQ,aAAa,CAACnH,KAAd,CAAoB2G,eAA7D,CAA8E,CAC1E,KAAKtG,QAAL,CAAc,CAAEsG,eAAe,CAAE,KAAKzG,KAAL,CAAWF,KAAX,CAAiB2G,eAApC,CAAd,EACH,CAED,GAAI,KAAKzG,KAAL,CAAWF,KAAX,CAAiB4G,cAAjB,GAAoCO,aAAa,CAACnH,KAAd,CAAoB4G,cAA5D,CAA4E,CACxE,KAAKvG,QAAL,CAAc,CAAEuG,cAAc,CAAE,KAAK1G,KAAL,CAAWF,KAAX,CAAiB4G,cAAnC,CAAd,EACH,CAED,GAAI,KAAK1G,KAAL,CAAWF,KAAX,CAAiB8G,kBAAjB,GAAwCK,aAAa,CAACnH,KAAd,CAAoB8G,kBAAhE,CAAoF,CAEhF,GAAI3F,CAAAA,cAAc,CAAG,KAAKjB,KAAL,CAAWF,KAAX,CAAiBmB,cAAtC,CACA,GAAIsF,CAAAA,UAAU,CAAG,KAAjB,CACA,GAAI,KAAKvG,KAAL,CAAWF,KAAX,CAAiB8G,kBAAjB,CAAoCS,MAApC,CAA6C,CAAjD,CAAoD,CAChDd,UAAU,CAAG,IAAb,CACA,GAAI,KAAKvG,KAAL,CAAWF,KAAX,CAAiBiC,SAAjB,GAA+B,QAAnC,CAA6C,CACzCd,cAAc,CAAC,iBAAD,CAAd,CAAoC,EAApC,CACH,CAEJ,CAND,IAMO,CACHA,cAAc,CAAC,iBAAD,CAAd,CAAoC,CAAEE,KAAK,CAAE,CAAC,CAAV,CAApC,CACAoF,UAAU,CAAG,KAAb,CAAsB;AACzB,CACD,KAAKpG,QAAL,CAAc,CAAEyG,kBAAkB,CAAE,KAAK5G,KAAL,CAAWF,KAAX,CAAiB8G,kBAAvC,CAA2DL,UAAU,CAAEA,UAAvE,CAAmFtF,cAAc,CAAEA,cAAnG,CAAd,EACH,CAED;AACA,GAAI,KAAKjB,KAAL,CAAWF,KAAX,CAAiBiH,eAAjB,GAAqCE,aAAa,CAACnH,KAAd,CAAoBiH,eAA7D,CAA8E,CAE1E,GAAI9F,CAAAA,eAAc,CAAG,KAAKjB,KAAL,CAAWF,KAAX,CAAiBmB,cAAtC,CACA,GAAIuF,CAAAA,UAAU,CAAG,KAAjB,CACA,GAAI,KAAKxG,KAAL,CAAWF,KAAX,CAAiBiH,eAAjB,CAAiCM,MAAjC,CAA0C,CAA9C,CAAiD,CAC7Cb,UAAU,CAAG,IAAb,CACA,GAAI,KAAKxG,KAAL,CAAWF,KAAX,CAAiBiC,SAAjB,GAA+B,QAAnC,CAA6C,CACzCd,eAAc,CAAC,cAAD,CAAd,CAAiC,EAAjC,CACH,CAEJ,CAND,IAMO,CACHA,eAAc,CAAC,cAAD,CAAd,CAAiC,CAAEE,KAAK,CAAE,CAAC,CAAV,CAAjC,CACAqF,UAAU,CAAG,KAAb,CACH,CACD,KAAKrG,QAAL,CAAc,CAAE4G,eAAe,CAAE,KAAK/G,KAAL,CAAWF,KAAX,CAAiBiH,eAApC,CAAqDP,UAAU,CAAEA,UAAjE,CAA6EvF,cAAc,CAAEA,eAA7F,CAAd,EACH,CAED,GAAI,KAAKjB,KAAL,CAAWF,KAAX,CAAiB6G,kBAAjB,GAAwCM,aAAa,CAACnH,KAAd,CAAoB6G,kBAAhE,CAAoF,CAChF,KAAKxG,QAAL,CAAc,CAAEwG,kBAAkB,CAAE,KAAK3G,KAAL,CAAWF,KAAX,CAAiB6G,kBAAvC,CAAd,EACH,CAED,GAAI,KAAK3G,KAAL,CAAWF,KAAX,CAAiB+G,aAAjB,GAAmCI,aAAa,CAACnH,KAAd,CAAoB+G,aAA3D,CAA0E,CACtE,KAAK1G,QAAL,CAAc,CAAE0G,aAAa,CAAE,KAAK7G,KAAL,CAAWF,KAAX,CAAiB+G,aAAlC,CAAd,EACH,CAED,GAAI,KAAK7G,KAAL,CAAWF,KAAX,CAAiBgH,QAAjB,GAA8BG,aAAa,CAACnH,KAAd,CAAoBgH,QAAtD,CAAgE,CAC5D,KAAK3G,QAAL,CAAc,CAAE2G,QAAQ,CAAE,KAAK9G,KAAL,CAAWF,KAAX,CAAiBgH,QAA7B,CAAd,EACH,CAED;AACA,GAAI,KAAK9G,KAAL,CAAWF,KAAX,CAAiBiH,eAAjB,GAAqCE,aAAa,CAACnH,KAAd,CAAoBiH,eAA7D,CAA8E,CAC1E,KAAK5G,QAAL,CAAc,CAAE4G,eAAe,CAAE,KAAK/G,KAAL,CAAWF,KAAX,CAAiBiH,eAApC,CAAd,EACH,CAEJ,C,0CA9RD,kCAAgC/G,KAAhC,CAAuCH,KAAvC,CAA8C,CAE1C,GAAIG,KAAK,CAACF,KAAN,CAAY2F,YAAZ,GAA6B,EAA7B,EAAmCzF,KAAK,CAACF,KAAN,CAAY2F,YAAZ,GAA6B5F,KAAK,CAAC4F,YAA1E,CAAwF,CACpFlG,KAAK,CAACiI,IAAN,CAAWxH,KAAK,CAACF,KAAN,CAAY2F,YAAvB,EACAzF,KAAK,CAACF,KAAN,CAAY2F,YAAZ,CAA2B,EAA3B,CACH,CAED,GAAIzF,KAAK,CAACF,KAAN,CAAY4F,KAAZ,GAAsB7F,KAAK,CAAC6F,KAAhC,CAAuC,CACnCnG,KAAK,CAACmG,KAAN,CAAY1F,KAAK,CAACF,KAAN,CAAY4F,KAAxB,EACA1F,KAAK,CAACF,KAAN,CAAY4F,KAAZ,CAAoB,EAApB,CACH,CACD,MAAO,KAAP,CACH,C,yBAlCqBrH,KAAK,CAACoJ,S,EA8lBhC,cAAelJ,CAAAA,OAAO,CAACqB,eAAD,CAAkB,CACpCR,WAAW,CAAXA,WADoC,CACvBD,WAAW,CAAXA,WADuB,CACVE,UAAU,CAAVA,UADU,CACEC,uBAAuB,CAAvBA,uBADF,CAEpCE,cAAc,CAAdA,cAFoC,CAEpBC,+BAA+B,CAA/BA,+BAFoB,CAEaC,OAAO,CAAPA,OAFb,CAEsBC,wBAAwB,CAAxBA,wBAFtB,CAAlB,CAAP,CAGZnB,UAAU,CAACuB,WAAD,CAHE,CAAf","sourcesContent":["import { process } from '@progress/kendo-data-query';\r\nimport React from 'react'\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, getControlMap, Lims_JSON_stringify} from\r\n    '../../components/CommonScript';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport Esign from '../audittrail/Esign';\r\nimport AddAliquotPlan from './AddAliquotPlan';\r\nimport { callService, updateStore, crudMaster, validateEsignCredential } from '../../actions';\r\nimport { toast } from 'react-toastify';\r\nimport { getprojectytpe, getSampleTypeandPatientCatgeroy, getUnit, getActiveAliquotPlanById } from '../../actions';\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass AliquotPlan extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.formRef = React.createRef();\r\n        this.extractedColumnList = [];\r\n\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n\r\n        this.state = {\r\n            data: [], masterStatus: \"\", error: \"\", selectedRecord: {},\r\n            dataResult: [],\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map()\r\n        };\r\n\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.data, event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n\r\n\r\n    reloadData = () => {\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            userInfo: this.props.Login.userInfo,\r\n            displayName: this.props.Login.displayName\r\n        };\r\n\r\n        this.props.callService(inputParam);\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        let primaryKeyField = \"\";\r\n\r\n        if (this.props.Login.inputParam !== undefined) {\r\n\r\n            this.extractedColumnList = [\r\n                { \"mandatory\": true, \"idsName\": \"IDS_PROJECTTYPE\", \"dataField\": \"sprojecttypename\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_SAMPLETYPE\", \"dataField\": \"sproductname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_COLLECTIONTUBETYPEPROCESSTYPE\", \"dataField\": \"stubename\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\", \"width\": 180 },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_VISITNUMBER\", \"dataField\": \"svisitnumber\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_PATIENTCATEGORY\", \"dataField\": \"spatientcatname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\", \"width\": 180 },\r\n                // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n                { \"mandatory\": true, \"idsName\": \"IDS_SAMPLEDONOR\", \"dataField\": \"ssampledonor\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_ALIQUOTNO\", \"dataField\": \"saliquotno\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_QUANTITY\", \"dataField\": \"squantity\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_UNIT\", \"dataField\": \"sunitname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n\r\n            ]\r\n\r\n            primaryKeyField = \"naliquotplancode\";\r\n        }\r\n        let mandatoryFields = [];\r\n        mandatoryFields.push(\r\n            { \"mandatory\": true, \"idsName\": \"IDS_PROJECTTYPE\", \"dataField\": \"sprojecttypename\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_SAMPLETYPE\", \"dataField\": \"sproductname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_COLLECTIONTUBETYPEPROCESSTYPE\", \"dataField\": \"stubename\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_VISITNUMBER\", \"dataField\": \"svisitnumber\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_PATIENTCATEGORY\", \"dataField\": \"spatientcatname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_ALIQUOTNO\", \"dataField\": \"saliquotno\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n            //ALPD-4712--Vignesh R(21-08-2024)\r\n            { \"mandatory\": true, \"idsName\": \"IDS_QUANTITY\", \"dataField\": \"squantity\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_UNIT\", \"dataField\": \"sunitname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n            { \"mandatory\": true, \"idsName\": \"IDS_SAMPLEDONOR\", \"dataField\": \"ssampledonor\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n\r\n        )\r\n\r\n\r\n        const AddAliquotPlanId = this.state.controlMap.has(\"AddAliquotPlan\") && this.state.controlMap.get(\"AddAliquotPlan\").ncontrolcode;\r\n        const EditAliquotPlanId = this.state.controlMap.has(\"EditAliquotPlan\") && this.state.controlMap.get(\"EditAliquotPlan\").ncontrolcode;\r\n        const DeleteAliquotPlanId = this.state.controlMap.has(\"DeleteAliquotPlan\") && this.state.controlMap.get(\"DeleteAliquotPlan\").ncontrolcode;\r\n\r\n\r\n        const editParam = {\r\n            screenName: this.props.Login.inputParam && this.props.Login.inputParam.displayName && this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }), primaryKeyField: \"naliquotplancode\", operation: \"update\",\r\n            inputParam: this.props.Login.inputParam, userInfo: this.props.Login.userInfo,\r\n            ncontrolCode: EditAliquotPlanId\r\n        };\r\n\r\n        const deleteParam = { operation: \"delete\", DeleteAliquotPlanId: DeleteAliquotPlanId };\r\n\r\n        return (<>\r\n            <Row>\r\n                <Col>\r\n                    <ListWrapper className=\"client-list-content\">\r\n\r\n                        <DataGrid\r\n                            primaryKeyField={primaryKeyField}\r\n                            selectedId={this.props.Login.selectedId}\r\n                            data={this.state.data}\r\n                            dataResult={this.state.dataResult}\r\n                            dataState={this.state.dataState}\r\n                            dataStateChange={this.dataStateChange}\r\n                            extractedColumnList={this.extractedColumnList}\r\n                            controlMap={this.state.controlMap}\r\n                            userRoleControlRights={this.state.userRoleControlRights}\r\n                            inputParam={this.props.Login.inputParam}\r\n                            userInfo={this.props.Login.userInfo}\r\n                            fetchRecord={this.props.getActiveAliquotPlanById}\r\n                            addRecord={() => this.props.getprojectytpe(AddAliquotPlanId, this.props.Login.userInfo) || []}\r\n                            deleteRecord={this.deleteRecord}\r\n                            reloadData={this.reloadData}\r\n                            editParam={editParam}\r\n                            deleteParam={deleteParam}\r\n                            scrollable={\"scrollable\"}\r\n                            gridHeight={\"600px\"}\r\n                            isActionRequired={true}\r\n                            isToolBarRequired={true}\r\n                            pageable={true}\r\n                            groupable={false}\r\n                            //ATE234 Janakumar ALPD-5577 Sample Storage-->while download the pdf, screen getting freezed\r\n                            isDownloadPDFRequired={false}\r\n                            isDownloadExcelRequired={true}\r\n\r\n                        />\r\n\r\n                    </ListWrapper>\r\n                </Col>\r\n            </Row>\r\n\r\n            {this.props.Login.openModal &&\r\n                <SlideOutModal\r\n                    show={this.props.Login.openModal}\r\n                    closeModal={this.closeModal}\r\n                    operation={this.props.Login.operation}\r\n                    inputParam={this.props.Login.inputParam}\r\n                    screenName={this.props.Login.screenName}\r\n                    onSaveClick={this.onSaveClick}\r\n                    esign={this.props.Login.loadEsign}\r\n                    validateEsign={this.validateEsign}\r\n                    masterStatus={this.props.Login.masterStatus}\r\n                    selectedRecord={this.state.selectedRecord || {}}\r\n                    updateStore={this.props.updateStore}\r\n                    mandatoryFields={mandatoryFields}\r\n                    addComponent={this.props.Login.loadEsign ?\r\n                        <Esign\r\n                            operation={this.props.Login.operation}\r\n                            onInputOnChange={this.onInputOnChange}\r\n                            inputParam={this.props.Login.inputParam}\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                        />\r\n                        : <AddAliquotPlan\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                            onInputOnChange={this.onInputOnChange}\r\n                            onComboChange={this.onComboChange}\r\n                            renalCheck={this.state.renalCheck}\r\n                            donarCheck={this.state.donarCheck} // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n                            projecttypeList={this.state.projecttypeList || []}\r\n                            sampletypeList={this.state.sampletypeList || []}\r\n                            collectiontubeList={this.state.collectiontubeList || []}\r\n                            patientcatgoryList={this.state.patientcatgoryList || []}\r\n                            visitnameList={this.state.visitnameList || []}\r\n                            unitList={this.state.unitList || []}\r\n                            sampledonarList={this.state.sampledonarList || []} // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n                            inputParam={this.props.Login.inputParam}\r\n                            actionType={this.state.actionType}\r\n                            operation={this.props.Login.operation}\r\n                        />}\r\n                />\r\n            }\r\n        </>);\r\n    }\r\n\r\n\r\n    componentDidUpdate(previousProps) {\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({\r\n                    userRoleControlRights, controlMap, data: this.props.Login.masterData,\r\n                    dataResult: process(this.props.Login.masterData, this.state.dataState),\r\n                });\r\n            }\r\n            else {\r\n                let {dataState}=this.state;\r\n                if(dataState===undefined){\r\n                    dataState={skip:0,take:this.state.dataState.take}\r\n                }\r\n                if(this.state.dataResult.data){\r\n                    if(this.state.dataResult.data.length >0 && this.props.Login.operation !=='update' && this.props.Login.operation ==='create'){\r\n                       let skipcount=this.state.dataState.skip>0?(this.props.Login.masterData.length-this.state.dataState.take):\r\n                       this.state.dataState.skip\r\n                        dataState={skip:skipcount,take:this.state.dataState.take}\r\n                    }\r\n                } \r\n\r\n                this.setState({\r\n                    data: this.props.Login.masterData,\r\n                    isOpen: false,\r\n                    selectedRecord: this.props.Login.selectedRecord,\r\n                    dataResult: process(this.props.Login.masterData, dataState),\r\n                    dataState\r\n                });\r\n            }\r\n            // let { dataState } = this.state;\r\n            // if (this.props.Login.dataState === undefined) {\r\n            //     dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 }\r\n            // }\r\n\r\n            // this.setState({\r\n            //     data: this.props.Login.masterData,\r\n            //     isOpen: false,\r\n            //     selectedRecord: this.props.Login.selectedRecord,\r\n            //     dataResult: process(this.props.Login.masterData, dataState),\r\n            //     dataState\r\n            // });\r\n\r\n        } else if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n\r\n        if (this.props.Login.projecttypeList !== previousProps.Login.projecttypeList) {\r\n            this.setState({ projecttypeList: this.props.Login.projecttypeList });\r\n        }\r\n\r\n        if (this.props.Login.sampletypeList !== previousProps.Login.sampletypeList) {\r\n            this.setState({ sampletypeList: this.props.Login.sampletypeList });\r\n        }\r\n\r\n        if (this.props.Login.patientcatgoryList !== previousProps.Login.patientcatgoryList) {\r\n\r\n            let selectedRecord = this.props.Login.selectedRecord;\r\n            let renalCheck = false;\r\n            if (this.props.Login.patientcatgoryList.length > 0) {\r\n                renalCheck = true;\r\n                if (this.props.Login.operation !== 'update') {\r\n                    selectedRecord[\"spatientcatname\"] = [];\r\n                }\r\n\r\n            } else {\r\n                selectedRecord[\"spatientcatname\"] = { value: -1 };\r\n                renalCheck = false;   //, selectedRecord: selectedRecord\r\n            }\r\n            this.setState({ patientcatgoryList: this.props.Login.patientcatgoryList, renalCheck: renalCheck, selectedRecord: selectedRecord });\r\n        }\r\n\r\n        // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n        if (this.props.Login.sampledonarList !== previousProps.Login.sampledonarList) {\r\n\r\n            let selectedRecord = this.props.Login.selectedRecord;\r\n            let donarCheck = false;\r\n            if (this.props.Login.sampledonarList.length > 0) {\r\n                donarCheck = true;\r\n                if (this.props.Login.operation !== 'update') {\r\n                    selectedRecord[\"ssampledonor\"] = [];\r\n                }\r\n\r\n            } else {\r\n                selectedRecord[\"ssampledonor\"] = { value: -1 };\r\n                donarCheck = false; \r\n            }\r\n            this.setState({ sampledonarList: this.props.Login.sampledonarList, donarCheck: donarCheck, selectedRecord: selectedRecord });\r\n        }\r\n\r\n        if (this.props.Login.collectiontubeList !== previousProps.Login.collectiontubeList) {\r\n            this.setState({ collectiontubeList: this.props.Login.collectiontubeList });\r\n        }\r\n\r\n        if (this.props.Login.visitnameList !== previousProps.Login.visitnameList) {\r\n            this.setState({ visitnameList: this.props.Login.visitnameList });\r\n        }\r\n\r\n        if (this.props.Login.unitList !== previousProps.Login.unitList) {\r\n            this.setState({ unitList: this.props.Login.unitList });\r\n        }\r\n\r\n        // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n        if (this.props.Login.sampledonarList !== previousProps.Login.sampledonarList) {\r\n            this.setState({ sampledonarList: this.props.Login.sampledonarList });\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n\r\n\r\n        if (fieldName === \"sprojecttypename\") {\r\n            selectedRecord[fieldName] = comboData;\r\n\r\n            delete selectedRecord[\"sproductname\"];\r\n            delete selectedRecord[\"stubename\"];\r\n            delete selectedRecord[\"svisitnumber\"];\r\n            delete selectedRecord[\"spatientcatname\"];\r\n            delete selectedRecord[\"ssampledonor\"]; // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n            this.props.getSampleTypeandPatientCatgeroy(\r\n                this.state.selectedRecord.sprojecttypename.value,\r\n                this.state.selectedRecord.sprojecttypename.label,\r\n                this.props.Login.userInfo,\r\n            )\r\n        } else {\r\n            selectedRecord[fieldName] = comboData;\r\n            this.setState({ selectedRecord });\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onInputOnChange = (event, fieldName) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n        const values = event.target.value;  //.replace(/[^-^0-9]/g, '');\r\n\r\n        //let parsedvalues;\r\n\r\n        if (fieldName === \"saliquotno\") {\r\n\r\n            if (/^\\d+$/.test(values) && values !== \"\") {\r\n\r\n                //values = parseInt(values, 10);\r\n                selectedRecord[fieldName] = values;\r\n            } else {\r\n                selectedRecord[fieldName] = \"\";\r\n            }\r\n\r\n        } else if (fieldName === \"squantity\") {\r\n\r\n            if (/^\\d{0,3}(\\.\\d{0,2})?$/.test(values) && values !== \"\") {\r\n\r\n                selectedRecord[fieldName] = values;\r\n            } else {\r\n                selectedRecord[fieldName] = [];\r\n            }\r\n\r\n        } else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let controlButton = this.props.Login.controlButton;\r\n        let selectedId = this.props.Login.selectedId;\r\n        // let processtypeList;\r\n        // let projecttypeList;\r\n        // let sampletypeList;\r\n        // let collectiontubeList;\r\n        // let patientcatgoryList;\r\n        // let visitnameList;\r\n\r\n        if (this.props.Login.loadEsign) { //true\r\n            //ALPD-4713--Vignesh R(21-08-2024)\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                  selectedRecord['esignpassword'] = \"\"\r\n                  selectedRecord['esignreason'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n            controlButton = [];\r\n            // processtypeList = [];\r\n            // projecttypeList = [];\r\n            // sampletypeList = [];\r\n            // collectiontubeList = [];\r\n            // patientcatgoryList = [];\r\n            // visitnameList = [];\r\n\r\n        }\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                openModal, loadEsign, selectedRecord, selectedId, controlButton\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n        //ate234 janakumar ALPD-5065 Aliquot Plan-->While doing Edit ,the dropdown records are not Showing.\r\n        // this.setState({\r\n        //     selectedRecord: selectedRecord, processtypeList: processtypeList, projecttypeList: projecttypeList,\r\n        //     sampletypeList: sampletypeList, collectiontubeList: collectiontubeList, patientcatgoryList: patientcatgoryList, visitnameList: visitnameList\r\n        // });\r\n\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        if (this.props.Login.operation === \"create\") {\r\n            this.onSaveAliquotPlan(saveType, formRef);\r\n        } else if (this.props.Login.operation === \"update\") {\r\n            this.updateAliquotPlan(saveType, formRef);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onSaveAliquotPlan = (saveType, formRef) => {\r\n\r\n        let selectedRecord = this.state.selectedRecord;\r\n        if (selectedRecord !== undefined) {\r\n\r\n            const inputParam = {\r\n                nformcode: this.props.Login.userInfo.nformcode,\r\n                classUrl: \"aliquotplan\",\r\n                methodUrl: \"AliquotPlan\",\r\n                selectedRecord: {...this.state.selectedRecord},\r\n                inputData: {\r\n                    userinfo: {\r\n                        ...this.props.Login.userInfo,\r\n                        sformname: Lims_JSON_stringify(this.props.Login.userInfo.sformname),\r\n                        smodulename: Lims_JSON_stringify(this.props.Login.userInfo.smodulename),\r\n                    },\r\n\r\n\r\n                    ncontrolCode: this.props.Login.userInfo.nformcode,\r\n                    tubename: this.state.selectedRecord.stubename.label,\r\n                    tubevalue: this.state.selectedRecord.stubename.value,\r\n                    projecttypename: this.state.selectedRecord.sprojecttypename.label,\r\n                    projecttypevalue: this.state.selectedRecord.sprojecttypename.value,\r\n                    productname: this.state.selectedRecord.sproductname.label,\r\n                    productvalue: this.state.selectedRecord.sproductname.value,\r\n                    patientcatvalue: this.state.selectedRecord.spatientcatname === undefined ? '-1' : this.state.selectedRecord.spatientcatname.value,\r\n                    patientcatname: this.state.selectedRecord.spatientcatname === undefined ? 'NA' : this.state.selectedRecord.spatientcatname.label,\r\n                    visitname: this.state.selectedRecord.svisitnumber.label,\r\n                    visitnumber: this.state.selectedRecord.svisitnumber.value,\r\n                    unitvalue: this.state.selectedRecord.sunitname.value,\r\n                    unitname: this.state.selectedRecord.sunitname.label,\r\n                    squantity: this.state.selectedRecord.squantity,\r\n                    saliquotno: this.state.selectedRecord.saliquotno,\r\n                    sdescription: this.state.selectedRecord.sdescription===undefined?\"\":this.state.selectedRecord.sdescription,\r\n                    // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n                    nsampledonorcode: this.state.selectedRecord.ssampledonor.value,\r\n                    ssampledonor: this.state.selectedRecord.ssampledonor.label,\r\n                    operation: \"create\",\r\n\r\n\r\n                },\r\n                operation: \"create\",\r\n                saveType, formRef,\r\n            }\r\n\r\n            const masterData = this.props.Login.masterData;\r\n\r\n\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n\r\n    }\r\n\r\n    updateAliquotPlan = (saveType, formRef) => {\r\n\r\n\r\n        const inputParam = {\r\n            nformcode: this.props.Login.userInfo.nformcode,\r\n            classUrl: \"aliquotplan\",\r\n            methodUrl: \"AliquotPlan\",\r\n            selectedRecord: {...this.state.selectedRecord},\r\n            selectedId:this.state.selectedRecord.naliquotplancode,\r\n            inputData: {\r\n                userinfo: {\r\n                    ...this.props.Login.userInfo,\r\n                    sformname: Lims_JSON_stringify(this.props.Login.userInfo.sformname),\r\n                    smodulename: Lims_JSON_stringify(this.props.Login.userInfo.smodulename),\r\n                },\r\n                //indexof:\r\n                ncontrolCode: this.props.Login.userInfo.nformcode,\r\n                naliquotplancode: this.state.selectedRecord.naliquotplancode,\r\n                tubename: this.state.selectedRecord.stubename.label,\r\n                tubevalue: this.state.selectedRecord.stubename.value,\r\n                projecttypename: this.state.selectedRecord.sprojecttypename.label,\r\n                projecttypevalue: this.state.selectedRecord.sprojecttypename.value,\r\n                productname: this.state.selectedRecord.sproductname.label,\r\n                productvalue: this.state.selectedRecord.sproductname.value,\r\n                patientcatvalue: this.state.selectedRecord.spatientcatname.value === undefined ? '-1' : this.state.selectedRecord.spatientcatname.value,\r\n                patientcatname: this.state.selectedRecord.spatientcatname.label,\r\n                visitname: this.state.selectedRecord.svisitnumber.label,\r\n                visitnumber: this.state.selectedRecord.svisitnumber.value,\r\n                unitvalue: this.state.selectedRecord.sunitname.value,\r\n                unitname: this.state.selectedRecord.sunitname.label,\r\n                squantity: this.state.selectedRecord.squantity,\r\n                saliquotno: this.state.selectedRecord.saliquotno,\r\n                sdescription: this.state.selectedRecord.sdescription===undefined?\"\":this.state.selectedRecord.sdescription,\r\n                // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n                nsampledonorcode: this.state.selectedRecord.ssampledonor.value,\r\n                ssampledonor: this.state.selectedRecord.ssampledonor.label,\r\n                operation: \"update\",\r\n\r\n\r\n            },\r\n            operation: \"update\",\r\n            saveType, formRef,\r\n        }\r\n\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n    deleteRecord = (deleteParam) => {\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: {\r\n                [this.props.Login.inputParam.methodUrl.toLowerCase()]: deleteParam.selectedRecord,//.dataItem,\r\n                \"userinfo\": this.props.Login.userInfo\r\n            },\r\n            operation: deleteParam.operation,\r\n            dataState: this.state.dataState,\r\n            selectedRecord: deleteParam.selectedRecord\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.displayName }),\r\n                    operation: deleteParam.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\nexport default connect(mapStateToProps, {\r\n    updateStore, callService, crudMaster, validateEsignCredential,\r\n    getprojectytpe, getSampleTypeandPatientCatgeroy, getUnit, getActiveAliquotPlanById\r\n})(injectIntl(AliquotPlan));\r\n"]},"metadata":{},"sourceType":"module"}