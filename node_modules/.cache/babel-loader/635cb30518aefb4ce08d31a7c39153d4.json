{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport context from \"../stores/context\";\nimport PropTypes from \"prop-types\";\nimport * as actions from \"../actions\";\nimport { immutableEqual } from \"../utils/stuff\";\nimport { useOnPropsChanged, liteShouldComponentUpdate, bindActionCreators } from \"../utils/reactUtils\";\n\nvar Query = /*#__PURE__*/function (_Component) {\n  _inherits(Query, _Component);\n\n  var _super = _createSuper(Query);\n\n  function Query(props) {\n    var _this;\n\n    _classCallCheck(this, Query);\n\n    _this = _super.call(this, props);\n    _this.shouldComponentUpdate = liteShouldComponentUpdate(_assertThisInitialized(_this), {\n      tree: function tree(nextValue) {\n        if (nextValue === _this.oldValidatedTree && _this.oldValidatedTree === _this.validatedTree) {\n          // Got value dispatched from QueryContainer\n          // Ignore, because we've just rendered it\n          return false;\n        }\n\n        return true;\n      }\n    });\n    useOnPropsChanged(_assertThisInitialized(_this));\n\n    _this._updateActions(props); // For preventive validation (tree and config consistency)\n    // When config has changed from QueryContainer, \n    //  but new dispatched validated tree value is not in redux store yet (tree prop is old)\n\n\n    _this.validatedTree = props.getMemoizedTree(props.config, props.tree);\n    _this.oldValidatedTree = _this.validatedTree; //props.onChange && props.onChange(this.validatedTree, props.config);\n\n    return _this;\n  }\n\n  _createClass(Query, [{\n    key: \"_updateActions\",\n    value: function _updateActions(props) {\n      var config = props.config,\n          dispatch = props.dispatch;\n      this.actions = bindActionCreators(_objectSpread(_objectSpread(_objectSpread({}, actions.tree), actions.group), actions.rule), config, dispatch);\n    }\n  }, {\n    key: \"onPropsChanged\",\n    value: function onPropsChanged(nextProps) {\n      var onChange = nextProps.onChange;\n      var oldConfig = this.props.config;\n      var newTree = nextProps.tree;\n      var oldTree = this.props.tree;\n      var newConfig = nextProps.config;\n      this.oldValidatedTree = this.validatedTree;\n      this.validatedTree = newTree;\n\n      if (oldConfig !== newConfig) {\n        this._updateActions(nextProps);\n\n        this.validatedTree = nextProps.getMemoizedTree(newConfig, newTree, oldConfig);\n      }\n\n      var validatedTreeChanged = !immutableEqual(this.validatedTree, this.oldValidatedTree);\n\n      if (validatedTreeChanged) {\n        onChange && onChange(this.validatedTree, newConfig, nextProps.__lastAction);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          config = _this$props.config,\n          renderBuilder = _this$props.renderBuilder,\n          dispatch = _this$props.dispatch,\n          __isInternalValueChange = _this$props.__isInternalValueChange;\n      var builderProps = {\n        tree: this.validatedTree,\n        actions: this.actions,\n        config: config,\n        dispatch: dispatch,\n        __isInternalValueChange: __isInternalValueChange\n      };\n      return renderBuilder(builderProps);\n    }\n  }]);\n\n  return Query;\n}(Component);\n\nQuery.propTypes = {\n  config: PropTypes.object.isRequired,\n  onChange: PropTypes.func,\n  renderBuilder: PropTypes.func,\n  tree: PropTypes.any //instanceOf(Immutable.Map)\n  //dispatch: PropTypes.func.isRequired,\n  //__isInternalValueChange\n  //__lastAction\n  //getMemoizedTree: PropTypes.func.isRequired,\n\n};\nvar ConnectedQuery = connect(function (state) {\n  return {\n    tree: state.tree,\n    __isInternalValueChange: state.__isInternalValueChange,\n    __lastAction: state.__lastAction\n  };\n}, null, null, {\n  context: context\n})(Query);\nConnectedQuery.displayName = \"ConnectedQuery\";\nexport default ConnectedQuery;","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/node_modules/@react-awesome-query-builder/ui/esm/components/Query.js"],"names":["_defineProperty","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","React","Component","connect","context","PropTypes","actions","immutableEqual","useOnPropsChanged","liteShouldComponentUpdate","bindActionCreators","Query","_Component","_super","props","_this","shouldComponentUpdate","tree","nextValue","oldValidatedTree","validatedTree","_updateActions","getMemoizedTree","config","value","dispatch","group","rule","onPropsChanged","nextProps","onChange","oldConfig","newTree","oldTree","newConfig","validatedTreeChanged","__lastAction","render","_this$props","renderBuilder","__isInternalValueChange","builderProps","propTypes","isRequired","func","any","ConnectedQuery","state","displayName"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport context from \"../stores/context\";\nimport PropTypes from \"prop-types\";\nimport * as actions from \"../actions\";\nimport { immutableEqual } from \"../utils/stuff\";\nimport { useOnPropsChanged, liteShouldComponentUpdate, bindActionCreators } from \"../utils/reactUtils\";\nvar Query = /*#__PURE__*/function (_Component) {\n  _inherits(Query, _Component);\n  var _super = _createSuper(Query);\n  function Query(props) {\n    var _this;\n    _classCallCheck(this, Query);\n    _this = _super.call(this, props);\n    _this.shouldComponentUpdate = liteShouldComponentUpdate(_assertThisInitialized(_this), {\n      tree: function tree(nextValue) {\n        if (nextValue === _this.oldValidatedTree && _this.oldValidatedTree === _this.validatedTree) {\n          // Got value dispatched from QueryContainer\n          // Ignore, because we've just rendered it\n          return false;\n        }\n        return true;\n      }\n    });\n    useOnPropsChanged(_assertThisInitialized(_this));\n    _this._updateActions(props);\n\n    // For preventive validation (tree and config consistency)\n    // When config has changed from QueryContainer, \n    //  but new dispatched validated tree value is not in redux store yet (tree prop is old)\n    _this.validatedTree = props.getMemoizedTree(props.config, props.tree);\n    _this.oldValidatedTree = _this.validatedTree;\n\n    //props.onChange && props.onChange(this.validatedTree, props.config);\n    return _this;\n  }\n  _createClass(Query, [{\n    key: \"_updateActions\",\n    value: function _updateActions(props) {\n      var config = props.config,\n        dispatch = props.dispatch;\n      this.actions = bindActionCreators(_objectSpread(_objectSpread(_objectSpread({}, actions.tree), actions.group), actions.rule), config, dispatch);\n    }\n  }, {\n    key: \"onPropsChanged\",\n    value: function onPropsChanged(nextProps) {\n      var onChange = nextProps.onChange;\n      var oldConfig = this.props.config;\n      var newTree = nextProps.tree;\n      var oldTree = this.props.tree;\n      var newConfig = nextProps.config;\n      this.oldValidatedTree = this.validatedTree;\n      this.validatedTree = newTree;\n      if (oldConfig !== newConfig) {\n        this._updateActions(nextProps);\n        this.validatedTree = nextProps.getMemoizedTree(newConfig, newTree, oldConfig);\n      }\n      var validatedTreeChanged = !immutableEqual(this.validatedTree, this.oldValidatedTree);\n      if (validatedTreeChanged) {\n        onChange && onChange(this.validatedTree, newConfig, nextProps.__lastAction);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        config = _this$props.config,\n        renderBuilder = _this$props.renderBuilder,\n        dispatch = _this$props.dispatch,\n        __isInternalValueChange = _this$props.__isInternalValueChange;\n      var builderProps = {\n        tree: this.validatedTree,\n        actions: this.actions,\n        config: config,\n        dispatch: dispatch,\n        __isInternalValueChange: __isInternalValueChange\n      };\n      return renderBuilder(builderProps);\n    }\n  }]);\n  return Query;\n}(Component);\nQuery.propTypes = {\n  config: PropTypes.object.isRequired,\n  onChange: PropTypes.func,\n  renderBuilder: PropTypes.func,\n  tree: PropTypes.any //instanceOf(Immutable.Map)\n  //dispatch: PropTypes.func.isRequired,\n  //__isInternalValueChange\n  //__lastAction\n  //getMemoizedTree: PropTypes.func.isRequired,\n};\n\nvar ConnectedQuery = connect(function (state) {\n  return {\n    tree: state.tree,\n    __isInternalValueChange: state.__isInternalValueChange,\n    __lastAction: state.__lastAction\n  };\n}, null, null, {\n  context: context\n})(Query);\nConnectedQuery.displayName = \"ConnectedQuery\";\nexport default ConnectedQuery;"]},"metadata":{},"sourceType":"module"}