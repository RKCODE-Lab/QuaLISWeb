{"ast":null,"code":"import _defineProperty from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{FormattedMessage,injectIntl}from'react-intl';import{Button,Card,Form,Modal}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faSave}from'@fortawesome/free-regular-svg-icons';import{toast}from'react-toastify';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{ModalInner}from'../../components/App.styles';import{transactionStatus}from'../../components/Enumeration';import{faCalculator}from'@fortawesome/free-solid-svg-icons';import{comboChild,convertDateTimetoString,getSameRecordFromTwoArrays,rearrangeDateFormat}from'../../components/CommonScript';import RegisterSlideOut from'./RegisterSlideOut';import AddSpecification from'./AddSpecification';import AddTest from'./AddTest';import{connect}from'react-redux';import{getPreviewTemplate,getChildValues,getNewRegSpecification,AddComponents,updateStore,EditComponent,getTest,addsubSample,editSubSample,insertRegistration}from'../../actions';import AddComponentPopUp from'./AddComponentPopUp';import AddSubSample from'./AddSubSample';import{getComponentListfromUnwantedAttr,getRegistration,TestListManipulation}from'./RegistrationValidation';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var PreRegisterSlideOutModal=/*#__PURE__*/function(_React$Component){_inherits(PreRegisterSlideOutModal,_React$Component);var _super=_createSuper(PreRegisterSlideOutModal);function PreRegisterSlideOutModal(props){var _this;_classCallCheck(this,PreRegisterSlideOutModal);_this=_super.call(this,props);_this.formRef=React.createRef();_this.state={failedControls:[],//selectedRecord: this.props.Login.selectedRecord,\n//selectedSpec: this.props.Login.selectedSpec,\n// componentDataState: { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 },\ntestDataState:{skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5},subSampleDataState:{skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5},selectedRecord:{},selectedSpec:{},selectComponent:{},selectedTest:{},selectedTestData:{}};_this.handleSaveClick=function(saveType){var failedControls=[];var startLabel=[];var label=\"IDS_ENTER\";var mandatoryFields=[];var selectedRecord=_this.state.selectedRecord;if(_this.props.Login.loadComponent){mandatoryFields=[{\"idsName\":\"IDS_COMPONENT\",\"dataField\":\"ncomponentcode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"combo\"},{\"idsName\":\"IDS_RECEIVEDDATE\",\"dataField\":\"dreceiveddate\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"combo\"},{\"idsName\":\"IDS_TIMEZONE\",\"dataField\":\"ntzdreceivedate\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"combo\"}];selectedRecord=_this.state.selectComponent;}else if(_this.props.Login.loadSubSample){mandatoryFields=[{\"idsName\":\"IDS_SUBSAMPLENAME\",\"dataField\":\"ssubsamplename\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"combo\"},{\"idsName\":\"IDS_TOTALQUANTITY\",\"dataField\":\"ssampleqty\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"combo\"},{\"idsName\":\"UNIT\",\"dataField\":\"nunitcode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"combo\"}];selectedRecord=_this.state.selectComponent;}else if(_this.props.Login.loadTest){mandatoryFields=[{\"idsName\":\"IDS_TEST\",\"dataField\":\"ntestgrouptestcode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"combo\"}];selectedRecord=_this.props.Login.selectedTestData;}else if(_this.state.loadSpec){mandatoryFields=[{\"idsName\":\"IDS_SPECIFICATION\",\"dataField\":\"nallottedspeccode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"combo\"}];}else{_this.props.Login.masterData.registrationTemplate&&_this.props.Login.masterData.registrationTemplate.jsondata.map(function(row){row.children.map(function(column){column.children.map(function(component){return component.hasOwnProperty(\"children\")?component.children.map(function(componentrow){if(componentrow.mandatory===true){mandatoryFields.push({\"mandatory\":true,\"idsName\":componentrow.label,\"dataField\":componentrow.label,\"mandatoryLabel\":componentrow.inputtype===\"combo\"?\"IDS_SELECT\":\"IDS_ENTER\",\"controlType\":componentrow.inputtype===\"combo\"?\"selectbox\":\"textbox\"});}}):component.mandatory===true?mandatoryFields.push({\"mandatory\":true,\"idsName\":component.label,\"dataField\":component.label,\"mandatoryLabel\":component.inputtype===\"combo\"?\"IDS_SELECT\":\"IDS_ENTER\",\"controlType\":component.inputtype===\"combo\"?\"selectbox\":\"textbox\"}):\"\";});});});}if(_this.props.esign){mandatoryFields=[{\"idsName\":\"IDS_PASSWORD\",\"dataField\":\"esignpassword\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_COMMENTS\",\"dataField\":\"esigncomments\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}mandatoryFields.forEach(function(item){if(selectedRecord[item.dataField]===undefined||selectedRecord[item.dataField]===null){var alertMessage=(item.alertPreFix?item.alertPreFix+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+item.alertSuffix:'');failedControls.push(alertMessage);startLabel.push(item.mandatoryLabel);//\"IDS_PROVIDE\";\n}else{if(item.validateFunction){var validateData=item.validateFunction;if(validateData(selectedRecord[item.dataField])===false){var _alertMessage=(item.alertPreFix?item.alertPreFix+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+item.alertSuffix:'');failedControls.push(_alertMessage);startLabel.push(item.mandatoryLabel);}}else{if(typeof selectedRecord[item.dataField]===\"object\"){//to validate FormSelectSearch component\nif(selectedRecord[item.dataField].length===0){var _alertMessage2=(item.alertPreFix?item.alertPreFix+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+item.alertSuffix:'');failedControls.push(_alertMessage2);startLabel.push(item.mandatoryLabel);//\"IDS_SELECT\";\n}}else if(typeof selectedRecord[item.dataField]===\"string\"){//to handle string field -- added trim function\nif(selectedRecord[item.dataField].trim().length===0){var _alertMessage3=(item.alertPreFix?item.alertPreFix+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+item.alertSuffix:'');failedControls.push(_alertMessage3);startLabel.push(item.mandatoryLabel);}}else{//number field\nif(selectedRecord[item.dataField].length===0){var _alertMessage4=(item.alertPreFix?item.alertPreFix+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+item.alertSuffix:'');failedControls.push(_alertMessage4);startLabel.push(item.mandatoryLabel);}}}}// else{\n//     const alertMessage=(item.alertPreFix?item.alertPreFix:'')+this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?item.alertSuffix:'')\n//     failedControls.push(alertMessage);\n// }\n});// console.log(\"validationPassed:\", failedControls);\nif(failedControls.length===0){if(saveType===4){_this.props.onExecuteClick(_this.formRef);}else if(saveType===3){if(selectedRecord.agree&&selectedRecord.agree===transactionStatus.NO){toast.info(_this.props.intl.formatMessage({id:\"IDS_CHECKAGREE\"}));}else{_this.props.validateEsign();}}else{if(_this.state.loadSpec){var selectedSpec=_this.state.selectedSpec;selectedSpec[\"nallottedspeccode\"]=_this.state.selectedRecord[\"nallottedspeccode\"];selectedSpec[\"sversion\"]=_this.state.selectedRecord[\"sversion\"];selectedSpec[\"ntemplatemanipulationcode\"]=_this.state.selectedRecord[\"ntemplatemanipulationcode\"];_this.setState({selectedTestData:[],loadSpec:false,SelectedTest:[],Test:[],Component:[],selectedSpec:selectedSpec});// const updateInfo = {\n//     typeName: DEFAULT_RETURN,\n//     data: { selectedTestData: [], loadSpec: false, SelectedTest: [], Test: [], Component: [] }\n// }\n// this.props.updateStore(updateInfo);\n}else if(_this.props.Login.loadComponent){_this.onSaveComponentClick(saveType,_this.formRef);}else if(_this.props.Login.loadTest){_this.onSaveTestClick(saveType,_this.formRef);}else if(_this.props.Login.loadSubSample){_this.onSaveSubSampleClick(saveType,_this.formRef);}else{_this.onSaveClick(saveType,_this.formRef);}}}else{label=startLabel[0]===undefined?label:startLabel[0];toast.info(\"\".concat(_this.props.intl.formatMessage({id:label}),\" \").concat(failedControls[0]));}};_this.TestChange=function(comboData,fieldName){var selectedTestData=_this.props.Login.selectedTestData||{};selectedTestData[fieldName]=comboData;//this.setState({ selectedTestData });\nvar updateInfo={typeName:DEFAULT_RETURN,data:{selectedTestData:selectedTestData}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,control,customName){var parentList=[];var childComboList=[];var childColumnList={};var comboName=customName||control.label;var selectedRecord=_this.state.selectedRecord||{};var product=false;var productCategory=false;var nproductcatcode=-1;var nproductcode=-1;var inputParem={child:control.child,source:control.source,primarykeyField:control.valuemember,value:comboData.value,item:comboData.item,label:comboName,nameofdefaultcomp:control.name};if(comboData){selectedRecord[comboName]=comboData;}else{selectedRecord[comboName]=[];}if(control.name==='Product'){var ProductCategory=_this.props.comboComponents.filter(function(x){return x.name===\"Product Category\";});var ncategorybasedflow=selectedRecord[ProductCategory[0].label]&&selectedRecord[ProductCategory[0].label]['item']['ncategorybasedflow'];nproductcatcode=selectedRecord[ProductCategory[0].label]&&selectedRecord[ProductCategory[0].label].value;if(ncategorybasedflow!==3){product=true;nproductcode=selectedRecord[comboName]&&selectedRecord[comboName].value;}}else if(control.name==='Product Category'){// const ProductCategory=comboComponents.filetr(x=>x.name===\"Product Category\");\nvar _ncategorybasedflow=comboData&&comboData['item']['ncategorybasedflow'];if(_ncategorybasedflow===3){productCategory=true;}else{// nproductcode = selectedRecord[comboName] &&\n// selectedRecord[comboName].value;\nproduct=true;}}if(control.child&&control.child.length>0){childComboList=getSameRecordFromTwoArrays(_this.props.comboComponents,control.child,\"label\");childColumnList={};childComboList.map(function(columnList){var val=comboChild(_this.props.comboComponents,columnList,childColumnList,false);childColumnList=val.childColumnList;});parentList=getSameRecordFromTwoArrays(_this.props.withoutCombocomponent,control.child,\"label\");// if (product) {\n// }\nvar mapOfFilter={nproductcode:nproductcode,nproductcatcode:nproductcatcode,nsampletypecode:parseInt(_this.props.Login.masterData.RealSampleTypeValue.nsampletypecode)};_this.props.getChildValues(inputParem,_this.props.userInfo,selectedRecord,_this.props.Login.comboData,childComboList,childColumnList,_this.props.withoutCombocomponent,[].concat(_toConsumableArray(childComboList),_toConsumableArray(parentList)),productCategory,product,mapOfFilter);}else{// if (productCategory) {\n//     const ncategorybasedflow = selectedRecord[comboName] &&\n//         selectedRecord[comboName].value;\n// } else \nif(product||productCategory){// const nproductcode = selectedRecord[comboName] &&\n//     selectedRecord[comboName].value;\nvar _mapOfFilter={nproductcode:nproductcode,nproductcatcode:nproductcatcode,nsampletypecode:parseInt(_this.props.Login.masterData.RealSampleTypeValue.nsampletypecode)};_this.props.getChildValues(inputParem,_this.props.userInfo,selectedRecord,_this.props.Login.comboData,childComboList,childColumnList,_this.props.withoutCombocomponent,[].concat(_toConsumableArray(childComboList),_toConsumableArray(parentList)),productCategory,product,_mapOfFilter);}else{var updateInfo={typeName:DEFAULT_RETURN,data:{selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);}}};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name==='timeonly'){selectedRecord['dateonly']=false;}if(event.target.name==='dateonly'){selectedRecord['timeonly']=false;}selectedRecord[event.target.name]=event.target.checked;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onNumericInputChange=function(value,name){var selectedRecord=_this.state.selectedRecord;selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});};_this.handleDateChange=function(dateValue,dateName,screenName){var selectedRecord=_this.state.selectedRecord;if(screenName==='component'){var selectComponent=_this.state.selectComponent;selectComponent[dateName]=dateValue;var updateInfo={typeName:DEFAULT_RETURN,data:{selectComponent:selectComponent}};_this.props.updateStore(updateInfo);}else{selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});}};_this.openFilter=function(){var showFilter=!_this.state.showFilter;_this.setState({showFilter:showFilter});};_this.closeFilter=function(){_this.setState({showFilter:false});};_this.AddSpec=function(e){_this.setState({loadSpec:true});// const updateInfo = {\n//     typeName: DEFAULT_RETURN,\n//     data: {\n//         loadSpec: true\n//     }\n// }\n// this.props.updateStore(updateInfo);\n};_this.addTestslide=function(selectedComponent,subSample,specBasedComponent){if(selectedComponent&&Object.keys(selectedComponent).length>0){delete selectedComponent[\"selected\"];_this.props.getTest(selectedComponent,_this.props.Login,subSample,specBasedComponent);}else{toast.warn(_this.props.intl.formatMessage({id:subSample===3?\"IDS_SELECTSUBSAMPLETOADDTEST\":\"IDS_SELECTCOMPONENTTOADDTEST\"}));}};_this.closeSpec=function(e){_this.setState({loadSpec:false,selectedRecord:_objectSpread(_objectSpread({},_this.state.selectedRecord),_this.state.selectedSpec)});// const updateInfo = {\n//     typeName: DEFAULT_RETURN,\n//     data: {\n//         loadSpec: false,\n//         selectedRecord: { ...this.state.selectedRecord, ...this.state.selectedSpec }\n//     }\n// }\n// this.props.updateStore(updateInfo);\n};_this.closeComponent=function(e){var updateInfo={typeName:DEFAULT_RETURN,data:{loadComponent:false,selectComponent:{}}};_this.props.updateStore(updateInfo);};_this.closeTest=function(e){var updateInfo={typeName:DEFAULT_RETURN,data:{loadTest:false,selectedTestData:{}}};_this.props.updateStore(updateInfo);};_this.closeSubSample=function(e){var updateInfo={typeName:DEFAULT_RETURN,data:{loadSubSample:false,selectedSubSample:{}}};_this.props.updateStore(updateInfo);};_this.onspecChange=function(event,fieldName){if(event!==null){var selectedRecord=_this.state.selectedRecord;var oldpromarycode=_this.state.selectedRecord[\"nallottedspeccode\"]!==undefined?_this.state.selectedRecord[\"nallottedspeccode\"].value:undefined;selectedRecord[\"sversion\"]=parseInt(event.item.sversion);selectedRecord[\"nallottedspeccode\"]=event;//  if(this.props.Login.Component.length=== 0 ){\n_this.setState({selectedRecord:selectedRecord});// }else{\n//     if(event.value!== oldpromarycode ){\n//     this.confirmMessage.confirm(\"confirmation\", \"Confirmation!\", \"Do You Want to clear the Existing Components ?\",\n//     \"ok\", \"cancel\", () => this.setState({ selectedRecord }));\n//     }\n// }\n}};_this.onTreeClick=function(event){var inputParam={methodUrl:\"TestGroupSpecification\",screenName:\"IDS_REGISTRATION\",operation:\"get\",activeKey:event.key,focusKey:event.key,keyName:\"treetemplatemanipulation\",userinfo:_this.props.Login.userInfo,selectedNode:event.item,selectedRecord:_this.state.selectedRecord,primaryKey:event.primaryKey};if(event.primaryKey!==_this.state.selectedRecord[\"ntemplatemanipulationcode\"]){_this.props.getNewRegSpecification(inputParam,_this.props.Login.masterData);}// if (this.props.Login.Component === undefined || this.props.Login.Component.length === 0) {\n//     //   this.props.getRegSpecification(inputParam, this.props.Login.masterData, getComponents);\n// } else {\n//     // if(event.key!== this.props.Login.ActiveKey ){\n//     // this.confirmMessage.confirm(\"confirmation\", \"Confirmation!\", \"Do You Want to clear the Existing Components ?\",\n//     // \"ok\", \"cancel\", () =>  this.props.getRegSpecification(inputParam, this.props.Login.masterData, getComponents));\n//     // }\n// }\n};_this.handleComponentRowClick=function(event){var selectedComponent=event.dataItem;var SelectedTest=_this.props.Login.Test&&_this.props.Login.Test[selectedComponent.slno]?_this.props.Login.Test[selectedComponent.slno]:[];var updateInfo={typeName:DEFAULT_RETURN,data:{SelectedTest:SelectedTest,selectedComponent:selectedComponent,testDataState:{skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5}}};_this.props.updateStore(updateInfo);};_this.AddComponent=function(){var Map={};if(_this.state.selectedSpec.nallottedspeccode!==undefined&&_this.state.selectedSpec.nallottedspeccode!==\"\"){Map[\"ntemplatemanipulationcode\"]=_this.state.selectedSpec.ntemplatemanipulationcode;Map[\"nallottedspeccode\"]=_this.state.selectedSpec.nallottedspeccode.value;Map[\"nregtypecode\"]=_this.props.Login.masterData.RealRegTypeValue.nregtypecode;Map[\"testrequired\"]=false;Map[\"userinfo\"]=_this.props.Login.userInfo;_this.props.AddComponents(Map);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTSPECIFICATION\"}));}};_this.onComponentChange=function(comboData,fieldName,subSample){if(comboData!==null){if(!subSample){var selectComponent=_this.state.selectComponent||{};if(fieldName==='ntzdreceivedate'){selectComponent[\"ntzdreceivedate\"]=comboData;}else{// const oldspecsampletypecode = selectComponent.nspecsampletypecode\n// if (oldspecsampletypecode !== comboData.item.nspecsampletypecode) {\n//     //selectComponent[\"nneedservice\"] = true;\n// }\nselectComponent[fieldName]=comboData;selectComponent[\"nspecsampletypecode\"]=comboData.item.nspecsampletypecode;}_this.setState({selectComponent:selectComponent});// const updateInfo = {\n//     typeName: DEFAULT_RETURN,\n//     data: {\n//         selectComponent\n//     }\n// }\n// this.props.updateStore(updateInfo);\n}else{var _selectComponent=_this.state.selectComponent||{};_selectComponent[fieldName]=comboData;// selectComponent[\"nspecsampletypecode\"] = comboData.item.nspecsampletypecode ?  comboData.item.nspecsampletypecode : -1;\n_this.setState({selectComponent:_selectComponent});}}};_this.onInputComponentOnChange=function(event){var selectComponent=_this.state.selectComponent||{};if(event.target.type==='checkbox'){selectComponent[event.target.name]=event.target.checked===true?3:4;}else{selectComponent[event.target.name]=event.target.value;}_this.setState({selectComponent:selectComponent});// const updateInfo = {\n//     typeName: DEFAULT_RETURN,\n//     data: {\n//         selectComponent\n//     }\n// }\n// this.props.updateStore(updateInfo);\n};_this.onSaveComponentClick=function(saveType,formRef){var childoperation=_this.props.Login.childoperation;if(childoperation===\"create\"){if(saveType===1){_this.ComponentObjectAfterSave();}else if(saveType===2){_this.ComponentObject();}}else{var Component=_this.props.Login.Component;var Test=_this.props.Login.Test;var testrequired=_this.state.selectedRecord.ntransactionstatus;var selectedComponent=_objectSpread({},_this.state.selectComponent);var objcomponent={};objcomponent[\"scomponentname\"]=selectedComponent[\"ncomponentcode\"].label;objcomponent[\"ncomponentcode\"]=selectedComponent[\"ncomponentcode\"]?selectedComponent[\"ncomponentcode\"].value:-1;var dreceiveddate=selectedComponent[\"dreceiveddate\"];objcomponent[\"dreceiveddate\"]=dreceiveddate;objcomponent[\"sreceiveddate\"]=convertDateTimetoString(dreceiveddate,_this.props.Login.userInfo);objcomponent[\"ntzdreceivedate\"]=selectedComponent[\"ntzdreceivedate\"]?selectedComponent[\"ntzdreceivedate\"].value:-1;objcomponent[\"stzdreceivedate\"]=selectedComponent[\"ntzdreceivedate\"]?selectedComponent[\"ntzdreceivedate\"].label:\"\";objcomponent[\"jsondata\"]=\"\";selectedComponent=_objectSpread(_objectSpread({},selectedComponent),objcomponent);var index=Component.findIndex(function(x){return x.slno===selectedComponent.slno;});if(index>-1){Component.splice(index,1,selectedComponent);}if(testrequired===3){_this.props.getTestByComponentChange(Component,selectedComponent,_this.props.Login);}else if(selectedComponent[\"nneedservice\"]===true){_this.props.getTestByComponentChange(Component,selectedComponent,_this.props.Login,true);}else{delete selectedComponent.nneedservice;var updateInfo={typeName:DEFAULT_RETURN,data:{Component:Component,selectedComponent:selectedComponent,loadComponent:false,openChildModal:false,selectComponent:undefined,parentPopUpSize:\"xl\",Test:Test,SelectedTest:Test[selectedComponent.slno]}};_this.props.updateStore(updateInfo);}}};_this.onSaveSubSampleClick=function(saveType,formRef){var childoperation=_this.props.Login.childoperation;if(childoperation===\"create\"){if(saveType===1){_this.SubSampleObjectAfterSave();}else if(saveType===2){_this.SubSampleObject();}}else{var Component=_this.props.Login.Component;var Test=_this.props.Login.Test;var testrequired=_this.state.selectedRecord.ntransactionstatus;var selectedComponent=_objectSpread({},_this.state.selectComponent);var objcomponent={};objcomponent[\"scomponentname\"]=selectedComponent[\"ncomponentcode\"].label;objcomponent[\"ncomponentcode\"]=selectedComponent[\"ncomponentcode\"]?selectedComponent[\"ncomponentcode\"].value:-1;objcomponent[\"ssubsamplename\"]=selectedComponent[\"ssubsamplename\"];objcomponent[\"nunitcode\"]=selectedComponent[\"nunitcode\"]?selectedComponent[\"nunitcode\"].value:-1;objcomponent[\"sunitname\"]=selectedComponent[\"nunitcode\"]?selectedComponent[\"nunitcode\"].label:\"\";objcomponent[\"scomments\"]=selectedComponent[\"scomments\"]?selectedComponent[\"scomments\"]:\"\";objcomponent[\"ssampleqty\"]=selectedComponent[\"ssampleqty\"]?selectedComponent[\"ssampleqty\"]:0;objcomponent[\"nallottedspeccode\"]=_this.state.selectedSpec[\"nallottedspeccode\"]?_this.state.selectedSpec[\"nallottedspeccode\"].value:-1;objcomponent[\"jsondata\"]={};selectedComponent=_objectSpread(_objectSpread({},selectedComponent),objcomponent);var index=Component.findIndex(function(x){return x.slno===selectedComponent.slno;});if(index>-1){Component.splice(index,1,selectedComponent);}if(testrequired===3){_this.props.getTestByComponentChange(Component,selectedComponent,_this.props.Login);}else if(selectedComponent[\"nneedservice\"]===true){_this.props.getTestByComponentChange(Component,selectedComponent,_this.props.Login,true);}else{delete selectedComponent.nneedservice;var updateInfo={typeName:DEFAULT_RETURN,data:{Component:Component,selectedComponent:selectedComponent,loadSubSample:false,openChildModal:false,selectComponent:undefined,parentPopUpSize:\"xl\",Test:Test,SelectedTest:Test[selectedComponent.slno]}};_this.props.updateStore(updateInfo);}}};_this.editComponent=function(editselectedcomponent){var inputData={};var objComponent=_objectSpread({},editselectedcomponent);inputData[\"ntemplatemanipulationcode\"]=_this.state.selectedSpec.ntemplatemanipulationcode;inputData[\"nallottedspeccode\"]=_this.state.selectedSpec.nallottedspeccode.value;inputData[\"userinfo\"]=_this.props.Login.userInfo;inputData[\"nregtypecode\"]=_this.props.Login.masterData.RealRegTypeValue.nregtypecode;_this.props.EditComponent(inputData,objComponent,_this.props.Login.userInfo,_this.props.Login);};_this.editSubSample=function(editselectedcomponent,specBasedComponent){var inputData={};var objComponent=_objectSpread({},editselectedcomponent);inputData[\"ntemplatemanipulationcode\"]=_this.state.selectedSpec.ntemplatemanipulationcode;inputData[\"nallottedspeccode\"]=_this.state.selectedSpec.nallottedspeccode.value;inputData[\"userinfo\"]=_this.props.Login.userInfo;inputData[\"nregtypecode\"]=_this.props.Login.masterData.RealRegTypeValue.nregtypecode;_this.props.editSubSample(inputData,objComponent,_this.props.Login.userInfo,specBasedComponent);};_this.deleteComponent=function(event){var dataItem=event;var Component=_this.props.Login.Component;var Test=_this.props.Login.Test;var SelectedTest=_this.props.Login.SelectedTest;var index=Component.findIndex(function(x){return x.slno===dataItem.slno;});if(index>-1){Component.splice(index,1);}Test&&Test[dataItem.slno]&&delete Test[dataItem.slno];SelectedTest=Test&&Object.keys(Test).length>0&&Test[Component[0].slno];var updateInfo={typeName:DEFAULT_RETURN,data:{Component:Component,selectedComponent:Component[0],Test:Test,SelectedTest:SelectedTest}};_this.props.updateStore(updateInfo);};_this.deleteTest=function(event){var dataItem=event;var SelectedTest=_this.props.Login.SelectedTest;var selectedComponent=_this.props.Login.selectedComponent;var Test=_this.props.Login.Test;var index=SelectedTest.findIndex(function(x){return x.ntestgrouptestcode===dataItem.ntestgrouptestcode;});if(index>-1){SelectedTest.splice(index,1);}Test[selectedComponent.slno]=SelectedTest;var updateInfo={typeName:DEFAULT_RETURN,data:{Test:Test,SelectedTest:SelectedTest}};_this.props.updateStore(updateInfo);};_this.onSaveTestClick=function(saveType,formRef){var selectedTestData=_this.props.Login.selectedTestData[\"ntestgrouptestcode\"];var selectedTestArray=[];selectedTestData.map(function(item){return selectedTestArray.push(item.item);});var selectedComponent=_this.props.Login.selectedComponent;var Test=_this.props.Login.Test||[];var ArrayTest=Test[selectedComponent.slno]?Test[selectedComponent.slno]:[];//  ArrayTest.push(selectedTestArray);\nTest[selectedComponent.slno]=[].concat(_toConsumableArray(ArrayTest),selectedTestArray);var updateInfo={typeName:DEFAULT_RETURN,data:{SelectedTest:Test[selectedComponent.slno],Test:Test,selectedTestData:{},loadTest:false,parentPopUpSize:\"xl\"}};_this.props.updateStore(updateInfo);};_this.componentDataStateChange=function(event){_this.setState({componentDataState:event.dataState});};_this.testDataStateChange=function(event){_this.setState({testDataState:event.dataState});};_this.subSampleDataStateChange=function(event){_this.setState({subSampleDataState:event.dataState});};_this.addsubSample=function(specBasedComponent){var Map={};if(_this.state.selectedSpec.nallottedspeccode!==undefined&&_this.state.selectedSpec.nallottedspeccode!==\"\"){Map[\"ntemplatemanipulationcode\"]=_this.state.selectedSpec.ntemplatemanipulationcode;Map[\"nallottedspeccode\"]=_this.state.selectedSpec.nallottedspeccode.value;Map[\"nregtypecode\"]=_this.props.Login.masterData.RealRegTypeValue.nregtypecode;Map[\"testrequired\"]=false;Map[\"userinfo\"]=_this.props.Login.userInfo;_this.props.addsubSample(_this.props.Login.userInfo,specBasedComponent,Map);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTSPECIFICATION\"}));}};_this.onSaveClick=function(saveType,formRef){var operation=_this.props.Login.operation;if(operation===\"update\"){_this.onUpdateRegistration(saveType,formRef,operation);}else{if(operation===\"create\"){_this.insertRegistration(true);}}};_this.onNumericInputChange=function(value,name){var selectedRecord=_this.state.selectedRecord;selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});};_this.myRef=React.createRef();_this.PrevoiusLoginData=_this.props.PrevoiusLoginData;_this.componentColumnList=[{\"idsName\":\"IDS_COMPONENTNAME\",\"dataField\":\"scomponentname\",width:\"200px\"},{\"idsName\":\"IDS_DATERECEIVED\",\"dataField\":\"sreceiveddate\",width:\"250px\"},{\"idsName\":\"IDS_COMMENTS\",\"dataField\":\"scomments\",width:\"200px\"}];return _this;}_createClass(PreRegisterSlideOutModal,[{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var _this2=this;var masterStatus=this.props.masterStatus;// const {selectedRecord,selectedSpec,selectedTestData,selectComponent} =this.state\nvar check=false;if(this.props.Login.selectedRecord!==this.PrevoiusLoginData.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});check=true;}if(this.props.Login.selectedSpec!==this.PrevoiusLoginData.Login.selectedSpec){this.setState({selectedSpec:this.props.Login.selectedSpec});check=true;}if(this.props.Login.selectedTestData!==this.PrevoiusLoginData.Login.selectedTestData){this.setState({selectedTestData:this.props.Login.selectedTestData});check=true;}if(this.props.Login.selectComponent!==this.PrevoiusLoginData.Login.selectComponent){this.setState({selectComponent:this.props.Login.selectComponent});check=true;}if(check){this.PrevoiusLoginData=previousProps;}if(masterStatus!==\"\"&&masterStatus!==undefined){toast.warn(masterStatus);var updateInfo={typeName:DEFAULT_RETURN,data:{masterStatus:\"\"}};this.props.updateStore(updateInfo);masterStatus=\"\";}if(this.props.innerPopup!==this.state.innerTop){setTimeout(function(){var scrollDoc=_this2.props.modalEvent&&_this2.props.modalEvent.id?document.getElementById(_this2.props.modalEvent.id):null;if(_this2.myRef&&_this2.myRef.current){_this2.myRef.current.scrollIntoView({behavior:'smooth'});}if(scrollDoc){scrollDoc.scrollIntoView({behavior:'smooth'});}},100);this.setState({innerTop:this.props.innerPopup});}}},{key:\"ComponentObjectAfterSave\",value:function ComponentObjectAfterSave(){var testrequired=this.state.selectedRecord.ntransactionstatus;var objcomponent=this.state.selectComponent;delete objcomponent.nneedservice;if(testrequired===3){this.props.getTestfromDB(objcomponent,this.props.Login,2);}else{var Component=this.props.Login.Component||[];var saveComponent=_objectSpread({},objcomponent);saveComponent[\"slno\"]=this.props.Login.Component?Object.keys(this.props.Login.Component).length+1:1;saveComponent[\"scomponentname\"]=objcomponent[\"ncomponentcode\"].label;saveComponent[\"ncomponentcode\"]=objcomponent[\"ncomponentcode\"]?objcomponent[\"ncomponentcode\"].value:-1;var dreceiveddate=objcomponent[\"dreceiveddate\"];saveComponent[\"dreceiveddate\"]=dreceiveddate;saveComponent[\"sreceiveddate\"]=convertDateTimetoString(dreceiveddate,this.props.Login.userInfo);saveComponent[\"nallottedspeccode\"]=objcomponent[\"nallottedspeccode\"]?objcomponent[\"nallottedspeccode\"]:-1;saveComponent[\"ntzdreceivedate\"]=objcomponent[\"ntzdreceivedate\"]?objcomponent[\"ntzdreceivedate\"].value:-1;saveComponent[\"stzdreceivedate\"]=objcomponent[\"ntzdreceivedate\"]?objcomponent[\"ntzdreceivedate\"].label:\"\";saveComponent[\"jsondata\"]=\"\";Component.unshift(saveComponent);var updateInfo={typeName:DEFAULT_RETURN,data:{Component:Component,openChildModal:false,selectedComponent:saveComponent,SelectedTest:[],selectComponent:{},showSaveContinue:false,loadComponent:false,parentPopUpSize:\"xl\"}};this.props.updateStore(updateInfo);}}},{key:\"ComponentObject\",value:function ComponentObject(){var testrequired=this.state.selectedRecord.ntransactionstatus;var objcomponent=this.state.selectComponent;delete objcomponent.nneedservice;var objcomponent1=_objectSpread({},this.state.selectComponent);if(testrequired===3){this.props.getTestfromDB(objcomponent,this.props.Login,1);}else{var Component=this.props.Login.Component||[];var saveComponent=_objectSpread({},objcomponent);saveComponent[\"scomponentname\"]=objcomponent[\"ncomponentcode\"].label;saveComponent[\"slno\"]=this.props.Login.Component?Object.keys(this.props.Login.Component).length+1:1;saveComponent[\"ncomponentcode\"]=objcomponent[\"ncomponentcode\"]?objcomponent[\"ncomponentcode\"].value:-1;var dreceiveddate=objcomponent[\"dreceiveddate\"];saveComponent[\"dreceiveddate\"]=dreceiveddate;saveComponent[\"sreceiveddate\"]=convertDateTimetoString(dreceiveddate,this.props.Login.userInfo);saveComponent[\"ntzdreceivedate\"]=objcomponent[\"ntzdreceivedate\"]?objcomponent[\"ntzdreceivedate\"].value:-1;saveComponent[\"stzdreceivedate\"]=objcomponent[\"ntzdreceivedate\"]?objcomponent[\"ntzdreceivedate\"].label:\"\";saveComponent[\"nallottedspeccode\"]=objcomponent[\"nallottedspeccode\"]?objcomponent[\"nallottedspeccode\"]:-1;saveComponent[\"jsondata\"]=\"\";Component.unshift(saveComponent);objcomponent1[\"scomments\"]=\"\";var updateInfo={typeName:DEFAULT_RETURN,data:{Component:Component,selectedComponent:saveComponent,SelectedTest:[],selectComponent:objcomponent1}};this.props.updateStore(updateInfo);}}},{key:\"SubSampleObjectAfterSave\",value:function SubSampleObjectAfterSave(){var testrequired=this.state.selectedRecord.ntransactionstatus;var objcomponent=this.state.selectComponent;delete objcomponent.nneedservice;if(testrequired===3){this.props.getTestfromDB(objcomponent,this.props.Login,2);}else{var Component=this.props.Login.Component||[];var saveComponent=_objectSpread({},objcomponent);saveComponent[\"scomponentname\"]=objcomponent[\"ncomponentcode\"].label;saveComponent[\"ncomponentcode\"]=objcomponent[\"ncomponentcode\"]?objcomponent[\"ncomponentcode\"].value:-1;saveComponent[\"slno\"]=this.props.Login.Component?Object.keys(this.props.Login.Component).length+1:1;saveComponent[\"ssubsamplename\"]=objcomponent[\"ssubsamplename\"]?objcomponent[\"ssubsamplename\"]:\"\";saveComponent[\"nunitcode\"]=objcomponent[\"nunitcode\"]?objcomponent[\"nunitcode\"].value:-1;saveComponent[\"sunitname\"]=objcomponent[\"nunitcode\"]?objcomponent[\"nunitcode\"].label:\"\";saveComponent[\"nallottedspeccode\"]=this.state.selectedSpec[\"nallottedspeccode\"]?this.state.selectedSpec[\"nallottedspeccode\"].value:-1;saveComponent[\"ssampleqty\"]=objcomponent[\"ssampleqty\"]?objcomponent[\"ssampleqty\"]:-1;saveComponent[\"scomments\"]=objcomponent[\"scomments\"]?objcomponent[\"scomments\"]:\"\";saveComponent[\"jsondata\"]={};Component.unshift(saveComponent);var updateInfo={typeName:DEFAULT_RETURN,data:{Component:Component,openChildModal:false,selectedComponent:saveComponent,loadSubSample:false,SelectedTest:[],selectComponent:{},showSaveContinue:false,parentPopUpSize:\"xl\"}};this.props.updateStore(updateInfo);}}},{key:\"SubSampleObject\",value:function SubSampleObject(){var testrequired=this.state.selectedRecord.ntransactionstatus;var objcomponent=this.state.selectComponent;delete objcomponent.nneedservice;var objcomponent1=_objectSpread({},this.state.selectComponent);if(testrequired===3){this.props.getTestfromDB(objcomponent,this.props.Login,1);}else{var Component=this.props.Login.Component||[];var saveComponent=_objectSpread({},objcomponent);saveComponent[\"slno\"]=this.props.Login.Component?Object.keys(this.props.Login.Component).length+1:1;saveComponent[\"scomponentname\"]=objcomponent[\"ncomponentcode\"].label;saveComponent[\"ncomponentcode\"]=objcomponent[\"ncomponentcode\"]?objcomponent[\"ncomponentcode\"].value:-1;saveComponent[\"ssubsamplename\"]=objcomponent[\"ssubsamplename\"]?objcomponent[\"ssubsamplename\"]:\"\";saveComponent[\"nunitcode\"]=objcomponent[\"nunitcode\"]?objcomponent[\"nunitcode\"].value:-1;saveComponent[\"sunitname\"]=objcomponent[\"nunitcode\"]?objcomponent[\"nunitcode\"].label:\"\";saveComponent[\"nallottedspeccode\"]=this.state.selectedSpec[\"nallottedspeccode\"]?this.state.selectedSpec[\"nallottedspeccode\"].value:-1;saveComponent[\"ssampleqty\"]=objcomponent[\"ssampleqty\"]?objcomponent[\"ssampleqty\"]:-1;saveComponent[\"scomments\"]=objcomponent[\"scomments\"]?objcomponent[\"scomments\"]:\"\";saveComponent[\"jsondata\"]={};Component.unshift(saveComponent);objcomponent1[\"scomments\"]=\"\";objcomponent1[\"ssubsamplename\"]=\"\";var updateInfo={typeName:DEFAULT_RETURN,data:{Component:Component,selectedComponent:saveComponent,SelectedTest:[],selectComponent:objcomponent1}};this.props.updateStore(updateInfo);}}},{key:\"insertRegistration\",value:function insertRegistration(){var Components=this.props.Login.Component;var Test=this.props.Login.Test;var Map={};Map[\"testgrouptest\"]=TestListManipulation(Components,Test);Map[\"RegistrationSample\"]=getComponentListfromUnwantedAttr(this.props.Login.Component);Map[\"FromDate\"]=rearrangeDateFormat(this.props.Login.userInfo,this.props.fromDate);//formatDate(this.fromDate);\nMap[\"ToDate\"]=rearrangeDateFormat(this.props.Login.userInfo,this.props.toDate);//formatDate(this.toDate);\nMap[\"nregtypecode\"]=this.props.Login.masterData.RealRegTypeValue.nregtypecode;Map[\"nregsubtypecode\"]=this.props.Login.masterData.RealRegSubTypeValue.nregsubtypecode;Map[\"nsampletypecode\"]=this.props.Login.masterData.RealSampleTypeValue.nsampletypecode;Map[\"nfilterstatus\"]=transactionStatus.PREREGISTER;Map[\"Registration\"]=getRegistration(this.props.Login.masterData,this.state.selectedRecord,this.state.selectedSpec,this.props.Login.masterData.registrationTemplate.jsondata);Map[\"userinfo\"]=this.props.Login.userInfo;Map[\"nflag\"]=2;Map[\"ntype\"]=1;Map[\"activeSampleTab\"]=this.props.Login.activeSampleTab;Map[\"activeTestTab\"]=this.props.Login.activeTestTab;Map[\"multipleselectionFlag\"]=this.props.Login.settings&&parseInt(this.props.Login.settings[7])===3?true:false;var inputParam={inputData:Map,postParamList:this.props.postParamList,action:\"preregister\"};this.props.insertRegistration(inputParam,this.props.Login.masterData);}},{key:\"render\",value:function render(){var _this3=this,_React$createElement;var saveType=1;if(this.props.ignoreFormValidation){saveType=5;}var buttonLabel=\"Save\";var idsLabel=\"IDS_SAVE\";if(this.props.buttonLabel){buttonLabel=this.props.buttonLabel;idsLabel='IDS_'.concat(buttonLabel.toUpperCase());}var testColumnList=[{\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestsynonym\",width:\"200px\"},{\"idsName\":\"IDS_SECTION\",\"dataField\":\"ssectionname\",width:\"150px\"},{\"idsName\":\"IDS_SOURCE\",\"dataField\":\"ssourcename\",width:\"150px\"},{\"idsName\":\"IDS_METHOD\",\"dataField\":\"smethodname\",width:\"150px\"},{\"idsName\":\"IDS_INSTRUMENTCATEGORY\",\"dataField\":\"sinstrumentcatname\",width:\"200px\"}];return/*#__PURE__*/React.createElement(Modal,{size:this.props.Login.loadComponent?'lg':this.state.loadSpec?'lg':this.props.Login.loadTest?'lg':this.props.Login.loadSubSample?'lg':'xl'// size={this.props.templateData[0] ?\n//     this.props.templateData[0].children ?\n//         this.props.templateData[0].children.length >= 2 ? 'xl' : 'lg' : 'lg' : 'lg'}\n,backdrop:\"static\",className:this.props.className||\"\",show:this.props.show,onHide:this.props.closeModal,enforceFocus:false,dialogClassName:\"modal-dialog-slideout freakerstop\",\"aria-labelledby\":\"add-user\"},/*#__PURE__*/React.createElement(Modal.Header,{className:\"d-flex align-items-center\"},/*#__PURE__*/React.createElement(Modal.Title,{id:\"add-user\",className:\"header-primary flex-grow-1\"},this.props.graphView===true?\"\":this.props.inputParam?this.props.esign===true?/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_ESIGN\",defaultMessage:\"Esign\"}):this.props.loginoperation?/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.screenName}):/*#__PURE__*/React.createElement(React.Fragment,null,this.props.operation?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.operation&&\"IDS_\".concat(this.props.operation.toUpperCase()),defaultMessage:\"Add\"}),\" \",this.props.screenName?/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.screenName}):\"\"):this.props.screenName?/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.screenName}):\"\"):\"\"),/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-cancel\",variant:\"\",onClick:this.state.loadSpec?this.closeSpec:this.props.Login.loadTest?this.closeTest:this.props.Login.loadComponent?this.closeComponent:this.props.Login.loadSubSample?this.closeSubSample:this.props.closeModal},/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_CANCEL\",defaultMessage:\"Cancel\"})),this.props.esign===true?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(3);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SUBMIT\",defaultMessage:\"Submit\"})):(this.props.operation===\"create\"||this.props.operation===\"update\")&&this.props.showValidate?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(4);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_VALIDATE\",defaultMessage:\"Validate\"})):this.props.showCalculate?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(saveType);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_CALCULATE\",defaultMessage:\"Calculate\"})):this.props.showParam===true&&this.props.showExecute?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(4);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faCalculator}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_EXECUTE\",defaultMessage:\"Execute\"})):this.props.noSave||this.props.graphView?this.props.operation===\"view\"?\"\":/*#__PURE__*/React.createElement(Button,{className:\"btn btn-user btn-primary-blue\",role:\"button\",onClick:this.props.resetView},/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_RESET\",defaultMessage:\"Reset\"})):this.props.hideSave?\"\":/*#__PURE__*/React.createElement(Button,{className:\" btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(saveType);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:idsLabel,defaultMessage:buttonLabel})),this.props.Login.operation===\"create\"&&this.props.Login.showSaveContinue?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(2);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SAVECONTINUE\",defaultMessage:\"Save & Continue\"})):\"\",(this.props.operation===\"create\"||this.props.operation===\"update\")&&this.props.esign!==true&&this.props.showExecute===true&&this.props.showSave?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(1);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SAVE\",defaultMessage:\"Save\"})):\"\"),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(ModalInner,{ref:this.myRef},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Form,{ref:this.formRef},this.state.loadSpec?/*#__PURE__*/React.createElement(AddSpecification,(_React$createElement={AgaramTree:this.props.Login.AgaramTree,openNodes:this.props.Login.OpenNodes,handleTreeClick:this.onTreeClick,focusKey:this.props.Login.FocusKey,activeKey:this.props.Login.ActiveKey,Specification:this.props.Login.Specification,selectedRecord:this.state.selectedRecord,selectedSpec:this.state.selectedSpec},_defineProperty(_React$createElement,\"selectedRecord\",this.state.selectedRecord),_defineProperty(_React$createElement,\"onSpecChange\",this.onspecChange),_React$createElement)):this.props.Login.loadTest?/*#__PURE__*/React.createElement(AddTest,{TestCombined:this.props.Login.TestCombined||[],TestChange:this.TestChange,selectedTestData:this.props.Login.selectedTestData}):this.props.Login.loadComponent?/*#__PURE__*/React.createElement(AddComponentPopUp,{ref:this.myScrollRef,selectComponent:this.state.selectComponent||{},RealSampleTypeValue:this.props.Login.masterData.RealSampleTypeValue||{},RealRegTypeValue:this.props.Login.masterData.RealRegTypeValue||{},RealRegSubTypeValue:this.props.Login.masterData.RealRegSubTypeValue||{},RealFilterStatusValue:this.props.Login.masterData.RealFilterStatusValue||{},formatMessage:this.props.intl.formatMessage,handleDateChange:this.handleDateChange,Component:this.props.Login.lstComponent||[],onInputComponentOnChange:this.onInputComponentOnChange// onComboChange={this.onComponentComboChange}\n,timeZoneList:this.props.Login.timeZoneList,onComponentChange:this.onComponentChange,userInfo:this.props.Login.userInfo,sreceiveddate:this.props.Login.sreceiveddate||[],CurrentTime:this.props.Login.CurrentTime}):this.props.Login.loadSubSample?/*#__PURE__*/React.createElement(AddSubSample,{Component:this.props.Login.lstComponent||[],selectComponent:this.state.selectComponent,Unit:this.props.Login.Unit||[],onComponentChange:this.onComponentChange,onInputComponentOnChange:this.onInputComponentOnChange}):/*#__PURE__*/React.createElement(RegisterSlideOut,_defineProperty({selectedSpec:this.state.selectedSpec,selectedRecord:this.state.selectedRecord,selectedComponent:this.props.Login.selectedComponent,SelectedTest:this.props.Login.SelectedTest// selectedTestData={this.props.Login.selectedTestData}\n,userRoleControlRights:this.props.userRoleControlRights,templateData:this.props.Login.masterData.registrationTemplate&&this.props.Login.masterData.registrationTemplate.jsondata,handleChange:this.props.handleChange,handleDateChange:this.props.handleDateChange,onInputOnChange:this.onInputOnChange,onNumericInputChange:this.onNumericInputChange,comboData:this.props.Login.comboData,onComboChange:this.onComboChange,userInfo:this.props.userInfo,timeZoneList:this.props.timeZoneList,defaultTimeZone:this.props.defaultTimeZone,AddSpec:this.AddSpec,addTest:this.addTestslide//={this.selectSubSample}\n,handleComponentRowClick:this.handleComponentRowClick,subSample:3,specBasedComponent:4,AddComponent:this.AddComponent,deleteComponent:this.deleteComponent,deleteTest:this.deleteTest,editComponent:this.editComponent,componentColumnList:this.componentColumnList,Component:this.props.Login.Component,TestChange:this.TestChange,testDataState:this.state.testDataState,subSampleDataState:this.state.subSampleDataState//componentDataState={this.state.componentDataState}\n,testDataStateChange:this.testDataStateChange//componentDataStateChange={this.componentDataStateChange}\n,subSampleDataStateChange:this.subSampleDataStateChange,addsubSample:this.addsubSample,editSubSample:this.editSubSample},\"onNumericInputChange\",this.onNumericInputChange))))))));}}]);return PreRegisterSlideOutModal;}(React.Component);export default connect(mapStateToProps,{getChildValues:getChildValues,getPreviewTemplate:getPreviewTemplate,getNewRegSpecification:getNewRegSpecification,AddComponents:AddComponents,updateStore:updateStore,EditComponent:EditComponent,getTest:getTest,addsubSample:addsubSample,editSubSample:editSubSample,insertRegistration:insertRegistration})(injectIntl(PreRegisterSlideOutModal));","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/pages/registration/PreRegisterSlideOutModal.jsx"],"names":["React","FormattedMessage","injectIntl","Button","Card","Form","Modal","FontAwesomeIcon","faSave","toast","DEFAULT_RETURN","ModalInner","transactionStatus","faCalculator","comboChild","convertDateTimetoString","getSameRecordFromTwoArrays","rearrangeDateFormat","RegisterSlideOut","AddSpecification","AddTest","connect","getPreviewTemplate","getChildValues","getNewRegSpecification","AddComponents","updateStore","EditComponent","getTest","addsubSample","editSubSample","insertRegistration","AddComponentPopUp","AddSubSample","getComponentListfromUnwantedAttr","getRegistration","TestListManipulation","mapStateToProps","state","Login","PreRegisterSlideOutModal","props","formRef","createRef","failedControls","testDataState","skip","take","settings","parseInt","subSampleDataState","selectedRecord","selectedSpec","selectComponent","selectedTest","selectedTestData","handleSaveClick","saveType","startLabel","label","mandatoryFields","loadComponent","loadSubSample","loadTest","loadSpec","masterData","registrationTemplate","jsondata","map","row","children","column","component","hasOwnProperty","componentrow","mandatory","push","inputtype","esign","forEach","item","dataField","undefined","alertMessage","alertPreFix","intl","formatMessage","id","idsName","alertSuffix","mandatoryLabel","validateFunction","validateData","length","trim","onExecuteClick","agree","NO","info","validateEsign","setState","SelectedTest","Test","Component","onSaveComponentClick","onSaveTestClick","onSaveSubSampleClick","onSaveClick","TestChange","comboData","fieldName","updateInfo","typeName","data","onComboChange","control","customName","parentList","childComboList","childColumnList","comboName","product","productCategory","nproductcatcode","nproductcode","inputParem","child","source","primarykeyField","valuemember","value","nameofdefaultcomp","name","ProductCategory","comboComponents","filter","x","ncategorybasedflow","columnList","val","withoutCombocomponent","mapOfFilter","nsampletypecode","RealSampleTypeValue","userInfo","onInputOnChange","event","target","type","checked","onNumericInputChange","handleDateChange","dateValue","dateName","screenName","openFilter","showFilter","closeFilter","AddSpec","e","addTestslide","selectedComponent","subSample","specBasedComponent","Object","keys","warn","closeSpec","closeComponent","closeTest","closeSubSample","selectedSubSample","onspecChange","oldpromarycode","sversion","onTreeClick","inputParam","methodUrl","operation","activeKey","key","focusKey","keyName","userinfo","selectedNode","primaryKey","handleComponentRowClick","dataItem","slno","AddComponent","Map","nallottedspeccode","ntemplatemanipulationcode","RealRegTypeValue","nregtypecode","onComponentChange","nspecsampletypecode","onInputComponentOnChange","childoperation","ComponentObjectAfterSave","ComponentObject","testrequired","ntransactionstatus","objcomponent","dreceiveddate","index","findIndex","splice","getTestByComponentChange","nneedservice","openChildModal","parentPopUpSize","SubSampleObjectAfterSave","SubSampleObject","editComponent","editselectedcomponent","inputData","objComponent","deleteComponent","deleteTest","ntestgrouptestcode","selectedTestArray","ArrayTest","componentDataStateChange","componentDataState","dataState","testDataStateChange","subSampleDataStateChange","onUpdateRegistration","myRef","PrevoiusLoginData","componentColumnList","width","previousProps","masterStatus","check","innerPopup","innerTop","setTimeout","scrollDoc","modalEvent","document","getElementById","current","scrollIntoView","behavior","getTestfromDB","saveComponent","unshift","showSaveContinue","objcomponent1","Components","fromDate","toDate","RealRegSubTypeValue","nregsubtypecode","PREREGISTER","activeSampleTab","activeTestTab","postParamList","action","ignoreFormValidation","buttonLabel","idsLabel","concat","toUpperCase","testColumnList","className","show","closeModal","graphView","loginoperation","showValidate","showCalculate","showParam","showExecute","noSave","resetView","hideSave","showSave","AgaramTree","OpenNodes","FocusKey","ActiveKey","Specification","TestCombined","myScrollRef","RealFilterStatusValue","lstComponent","timeZoneList","sreceiveddate","CurrentTime","Unit","userRoleControlRights","handleChange","defaultTimeZone"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Button, Card, Form, Modal } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faSave } from '@fortawesome/free-regular-svg-icons';\r\nimport { toast } from 'react-toastify';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { ModalInner } from '../../components/App.styles';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\nimport { faCalculator } from '@fortawesome/free-solid-svg-icons';\r\nimport {\r\n    comboChild, convertDateTimetoString,\r\n    getSameRecordFromTwoArrays, rearrangeDateFormat\r\n} from '../../components/CommonScript';\r\nimport RegisterSlideOut from './RegisterSlideOut';\r\nimport AddSpecification from './AddSpecification';\r\nimport AddTest from './AddTest';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n    getPreviewTemplate, getChildValues,\r\n    getNewRegSpecification, AddComponents, updateStore,\r\n    EditComponent, getTest, addsubSample, editSubSample, insertRegistration\r\n} from '../../actions'\r\nimport AddComponentPopUp from './AddComponentPopUp';\r\nimport AddSubSample from './AddSubSample';\r\nimport {\r\n    getComponentListfromUnwantedAttr,\r\n    getRegistration, TestListManipulation\r\n} from './RegistrationValidation';\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\nclass PreRegisterSlideOutModal extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.myRef = React.createRef()\r\n        this.PrevoiusLoginData = this.props.PrevoiusLoginData;\r\n        this.componentColumnList = [\r\n            { \"idsName\": \"IDS_COMPONENTNAME\", \"dataField\": \"scomponentname\", width: \"200px\" },\r\n            { \"idsName\": \"IDS_DATERECEIVED\", \"dataField\": \"sreceiveddate\", width: \"250px\" },\r\n            { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"scomments\", width: \"200px\" },\r\n        ];\r\n    }\r\n    formRef = React.createRef();\r\n    state = {\r\n        failedControls: [],\r\n        //selectedRecord: this.props.Login.selectedRecord,\r\n        //selectedSpec: this.props.Login.selectedSpec,\r\n       // componentDataState: { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 },\r\n        testDataState: { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 },\r\n        subSampleDataState: { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 },\r\n        selectedRecord: {},\r\n        selectedSpec: {},\r\n        selectComponent: {},\r\n        selectedTest: {},\r\n        selectedTestData: {},\r\n    }\r\n\r\n\r\n\r\n    handleSaveClick = (saveType) => {\r\n        const failedControls = [];\r\n        const startLabel = [];\r\n        let label = \"IDS_ENTER\";\r\n        let mandatoryFields = [];\r\n        let selectedRecord = this.state.selectedRecord\r\n\r\n        if (this.props.Login.loadComponent) {\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_COMPONENT\", \"dataField\": \"ncomponentcode\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"combo\" },\r\n                { \"idsName\": \"IDS_RECEIVEDDATE\", \"dataField\": \"dreceiveddate\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"combo\" },\r\n                { \"idsName\": \"IDS_TIMEZONE\", \"dataField\": \"ntzdreceivedate\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"combo\" },\r\n            ]\r\n            selectedRecord = this.state.selectComponent\r\n        }\r\n        else if (this.props.Login.loadSubSample) {\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_SUBSAMPLENAME\", \"dataField\": \"ssubsamplename\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"combo\" },\r\n                { \"idsName\": \"IDS_TOTALQUANTITY\", \"dataField\": \"ssampleqty\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"combo\" },\r\n                { \"idsName\": \"UNIT\", \"dataField\": \"nunitcode\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"combo\" },\r\n            ]\r\n            selectedRecord = this.state.selectComponent\r\n        }\r\n        else if (this.props.Login.loadTest) {\r\n            mandatoryFields = [{ \"idsName\": \"IDS_TEST\", \"dataField\": \"ntestgrouptestcode\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"combo\" },]\r\n            selectedRecord = this.props.Login.selectedTestData\r\n        }\r\n        else if (this.state.loadSpec) {\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_SPECIFICATION\", \"dataField\": \"nallottedspeccode\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"combo\" },\r\n            ]\r\n        } else {\r\n            this.props.Login.masterData.registrationTemplate &&\r\n                this.props.Login.masterData.registrationTemplate.jsondata.map(row => {\r\n                    row.children.map(column => {\r\n                        column.children.map(component => {\r\n                            return component.hasOwnProperty(\"children\") ? component.children.map(componentrow => {\r\n                                if (componentrow.mandatory === true) {\r\n                                    mandatoryFields.push({ \"mandatory\": true, \"idsName\": componentrow.label, \"dataField\": componentrow.label, \"mandatoryLabel\": componentrow.inputtype === \"combo\" ? \"IDS_SELECT\" : \"IDS_ENTER\", \"controlType\": componentrow.inputtype === \"combo\" ? \"selectbox\" : \"textbox\" })\r\n\r\n                                }\r\n                            })\r\n                                : component.mandatory === true ? mandatoryFields.push({ \"mandatory\": true, \"idsName\": component.label, \"dataField\": component.label, \"mandatoryLabel\": component.inputtype === \"combo\" ? \"IDS_SELECT\" : \"IDS_ENTER\", \"controlType\": component.inputtype === \"combo\" ? \"selectbox\" : \"textbox\" }) : \"\"\r\n                        })\r\n                    })\r\n                })\r\n        }\r\n        if (this.props.esign) {\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_PASSWORD\", \"dataField\": \"esignpassword\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"esigncomments\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" }\r\n            ]\r\n        }\r\n        mandatoryFields.forEach(item => {\r\n            if (selectedRecord[item.dataField] === undefined || selectedRecord[item.dataField] === null) {\r\n                const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\r\n                failedControls.push(alertMessage);\r\n                startLabel.push(item.mandatoryLabel)//\"IDS_PROVIDE\";\r\n            }\r\n            else {\r\n                if (item.validateFunction) {\r\n                    const validateData = item.validateFunction;\r\n                    if (validateData(selectedRecord[item.dataField]) === false) {\r\n                        const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\r\n                        failedControls.push(alertMessage);\r\n                        startLabel.push(item.mandatoryLabel)\r\n                    }\r\n                }\r\n                else {\r\n                    if (typeof selectedRecord[item.dataField] === \"object\") {\r\n                        //to validate FormSelectSearch component\r\n                        if (selectedRecord[item.dataField].length === 0) {\r\n                            const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\r\n                            failedControls.push(alertMessage);\r\n                            startLabel.push(item.mandatoryLabel)//\"IDS_SELECT\";\r\n                        }\r\n                    }\r\n                    else if (typeof selectedRecord[item.dataField] === \"string\") {\r\n                        //to handle string field -- added trim function\r\n                        if (selectedRecord[item.dataField].trim().length === 0) {\r\n                            const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\r\n                            failedControls.push(alertMessage);\r\n                            startLabel.push(item.mandatoryLabel)\r\n                        }\r\n                    }\r\n                    else {\r\n                        //number field\r\n                        if (selectedRecord[item.dataField].length === 0) {\r\n                            const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\r\n                            failedControls.push(alertMessage);\r\n                            startLabel.push(item.mandatoryLabel)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // else{\r\n            //     const alertMessage=(item.alertPreFix?item.alertPreFix:'')+this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?item.alertSuffix:'')\r\n            //     failedControls.push(alertMessage);\r\n            // }\r\n        });\r\n        // console.log(\"validationPassed:\", failedControls);\r\n\r\n        if (failedControls.length === 0) {\r\n            if (saveType === 4) {\r\n                this.props.onExecuteClick(this.formRef);\r\n            }\r\n            else if (saveType === 3) {\r\n                if (selectedRecord.agree && selectedRecord.agree === transactionStatus.NO) {\r\n\r\n                    toast.info(this.props.intl.formatMessage({ id: \"IDS_CHECKAGREE\" }));\r\n\r\n                } else {\r\n\r\n                    this.props.validateEsign();\r\n                }\r\n            }\r\n            else {\r\n                if (this.state.loadSpec) {\r\n                    let selectedSpec = this.state.selectedSpec\r\n                    selectedSpec[\"nallottedspeccode\"] = this.state.selectedRecord[\"nallottedspeccode\"]\r\n                    selectedSpec[\"sversion\"] = this.state.selectedRecord[\"sversion\"]\r\n                    selectedSpec[\"ntemplatemanipulationcode\"] = this.state.selectedRecord[\"ntemplatemanipulationcode\"]\r\n                    this.setState({\r\n                        selectedTestData: [], loadSpec: false, SelectedTest: [], Test: [], Component: [], selectedSpec\r\n                    })\r\n                    // const updateInfo = {\r\n                    //     typeName: DEFAULT_RETURN,\r\n                    //     data: { selectedTestData: [], loadSpec: false, SelectedTest: [], Test: [], Component: [] }\r\n                    // }\r\n                    // this.props.updateStore(updateInfo);\r\n\r\n\r\n                }\r\n                else if (this.props.Login.loadComponent) {\r\n                    this.onSaveComponentClick(saveType, this.formRef)\r\n                }\r\n                else if (this.props.Login.loadTest) {\r\n                    this.onSaveTestClick(saveType, this.formRef)\r\n                }\r\n                else if (this.props.Login.loadSubSample) {\r\n                    this.onSaveSubSampleClick(saveType, this.formRef)\r\n                }\r\n                else {\r\n                    this.onSaveClick(saveType, this.formRef);\r\n                }\r\n\r\n            }\r\n        }\r\n        else {\r\n            label = startLabel[0] === undefined ? label : startLabel[0];\r\n            toast.info(`${this.props.intl.formatMessage({ id: label })} ${failedControls[0]}`);\r\n        }\r\n\r\n    }\r\n\r\n    TestChange = (comboData, fieldName) => {\r\n        const selectedTestData = this.props.Login.selectedTestData || {};\r\n        selectedTestData[fieldName] = comboData;\r\n        //this.setState({ selectedTestData });\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { selectedTestData }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onComboChange = (comboData, control, customName) => {\r\n        let parentList = []\r\n        let childComboList = []\r\n        let childColumnList = {}\r\n     \r\n        let comboName = customName || control.label;\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        let product = false;\r\n        let productCategory = false;\r\n        let nproductcatcode = -1\r\n        let nproductcode = -1\r\n        const inputParem = {\r\n            child: control.child,\r\n            source: control.source,\r\n            primarykeyField: control.valuemember,\r\n            value: comboData.value,\r\n            item: comboData.item,\r\n            label: comboName,\r\n            nameofdefaultcomp:control.name\r\n        }\r\n        if (comboData) {\r\n            selectedRecord[comboName] = comboData;\r\n        } else {\r\n            selectedRecord[comboName] = []\r\n        }\r\n        if (control.name === 'Product') {\r\n            const ProductCategory = this.props.comboComponents.filter(x => x.name === \"Product Category\");\r\n            const ncategorybasedflow = selectedRecord[ProductCategory[0].label] &&\r\n                selectedRecord[ProductCategory[0].label]['item']['ncategorybasedflow'];\r\n            nproductcatcode = selectedRecord[ProductCategory[0].label] &&\r\n                selectedRecord[ProductCategory[0].label].value\r\n            if (ncategorybasedflow !== 3) {\r\n                product = true\r\n                nproductcode = selectedRecord[comboName] &&\r\n                selectedRecord[comboName].value;\r\n            }\r\n\r\n        }\r\n        else if (control.name === 'Product Category') {\r\n            // const ProductCategory=comboComponents.filetr(x=>x.name===\"Product Category\");\r\n            const ncategorybasedflow = comboData &&\r\n                comboData['item']['ncategorybasedflow'];\r\n            if (ncategorybasedflow === 3) {\r\n                productCategory = true\r\n            }else{\r\n                // nproductcode = selectedRecord[comboName] &&\r\n                // selectedRecord[comboName].value;\r\n                product=true\r\n            }\r\n        }\r\n\r\n        if (control.child && control.child.length > 0) {\r\n            childComboList = getSameRecordFromTwoArrays(this.props.comboComponents, control.child, \"label\")\r\n            childColumnList = {};\r\n            childComboList.map(columnList => {\r\n                const val = comboChild(this.props.comboComponents, columnList, childColumnList, false);\r\n                childColumnList = val.childColumnList\r\n            })\r\n\r\n            parentList = getSameRecordFromTwoArrays(this.props.withoutCombocomponent, control.child, \"label\")\r\n\r\n          \r\n            \r\n            // if (product) {\r\n               \r\n            // }\r\n\r\n            const mapOfFilter = {\r\n                nproductcode, nproductcatcode,\r\n                nsampletypecode: parseInt(this.props.Login.masterData.RealSampleTypeValue.nsampletypecode),\r\n            }\r\n            this.props.getChildValues(inputParem,\r\n                this.props.userInfo, selectedRecord, this.props.Login.comboData,\r\n                childComboList, childColumnList, this.props.withoutCombocomponent,\r\n                [...childComboList, ...parentList], productCategory, product, mapOfFilter)\r\n        } else {\r\n\r\n            // if (productCategory) {\r\n            //     const ncategorybasedflow = selectedRecord[comboName] &&\r\n            //         selectedRecord[comboName].value;\r\n\r\n            // } else \r\n            if (product||productCategory) {\r\n                // const nproductcode = selectedRecord[comboName] &&\r\n                //     selectedRecord[comboName].value;\r\n                const mapOfFilter = {\r\n                    nproductcode, nproductcatcode,\r\n                    nsampletypecode: parseInt(this.props.Login.masterData.RealSampleTypeValue.nsampletypecode),\r\n                }\r\n\r\n                this.props.getChildValues(inputParem,\r\n                    this.props.userInfo, selectedRecord, this.props.Login.comboData,\r\n                    childComboList, childColumnList, this.props.withoutCombocomponent,\r\n                    [...childComboList, ...parentList], productCategory, product, mapOfFilter)\r\n            } else {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: { selectedRecord }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === 'timeonly') {\r\n                selectedRecord['dateonly'] = false;\r\n            }\r\n            if (event.target.name === 'dateonly') {\r\n                selectedRecord['timeonly'] = false;\r\n            }\r\n            selectedRecord[event.target.name] = event.target.checked;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n    // onInputOnChange = (event, value) => {\r\n    //     const selectedRecord = this.state.selectedRecord || {};\r\n    //     if (event.target.type === 'toggle') {\r\n    //         selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n    //     } else if (event.target.type === 'numeric') {\r\n    //         if (/\\D/.test(event.target.value))\r\n    //             selectedRecord[event.target.name] = event.target.value;\r\n    //     } else if (event.target.type === 'checkbox') {\r\n    //         selectedRecord[event.target.name] = value;\r\n    //     } else if (event.target.type === 'radio') {\r\n    //         selectedRecord[event.target.name] = value\r\n    //     } else {\r\n    //         selectedRecord[event.target.name] = event.target.value;\r\n    //     }\r\n    //     this.setState({ selectedRecord });\r\n    //     // this.saveComponentProperties()\r\n    // }\r\n    onNumericInputChange = (value, name) => {\r\n        let selectedRecord = this.state.selectedRecord\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    }\r\n    handleDateChange = (dateValue, dateName, screenName) => {\r\n        const { selectedRecord } = this.state;\r\n        if (screenName === 'component') {\r\n            const selectComponent = this.state.selectComponent;\r\n            selectComponent[dateName] = dateValue;\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    selectComponent\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        } else {\r\n            selectedRecord[dateName] = dateValue;\r\n            this.setState({ selectedRecord });\r\n        }\r\n\r\n    }\r\n\r\n\r\n    componentDidUpdate(previousProps) {\r\n        let masterStatus = this.props.masterStatus;\r\n        // const {selectedRecord,selectedSpec,selectedTestData,selectComponent} =this.state\r\n        let check = false;\r\n        if (this.props.Login.selectedRecord !== this.PrevoiusLoginData.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n            check = true\r\n        }\r\n        if (this.props.Login.selectedSpec !== this.PrevoiusLoginData.Login.selectedSpec) {\r\n            this.setState({ selectedSpec: this.props.Login.selectedSpec });\r\n            check = true\r\n        }\r\n        if (this.props.Login.selectedTestData !== this.PrevoiusLoginData.Login.selectedTestData) {\r\n            this.setState({ selectedTestData: this.props.Login.selectedTestData });\r\n            check = true\r\n        }\r\n        if (this.props.Login.selectComponent !== this.PrevoiusLoginData.Login.selectComponent) {\r\n            this.setState({ selectComponent: this.props.Login.selectComponent });\r\n            check = true\r\n        }\r\n        if (check) {\r\n            this.PrevoiusLoginData = previousProps\r\n        }\r\n        if (masterStatus !== \"\" && masterStatus !== undefined) {\r\n            toast.warn(masterStatus);\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { masterStatus: \"\" }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n            masterStatus = \"\";\r\n        }\r\n        if (this.props.innerPopup !== this.state.innerTop) {\r\n            setTimeout(() => {\r\n                let scrollDoc = this.props.modalEvent && this.props.modalEvent.id ? document.getElementById(this.props.modalEvent.id) : null;\r\n                if (this.myRef && this.myRef.current) {\r\n                    this.myRef.current.scrollIntoView({ behavior: 'smooth' })\r\n                }\r\n                if (scrollDoc) {\r\n                    scrollDoc.scrollIntoView({ behavior: 'smooth' })\r\n                }\r\n            }, 100)\r\n            this.setState({\r\n                innerTop: this.props.innerPopup\r\n            })\r\n        }\r\n    }\r\n\r\n    openFilter = () => {\r\n        let showFilter = !this.state.showFilter\r\n        this.setState({\r\n            showFilter\r\n        })\r\n    }\r\n\r\n    closeFilter = () => {\r\n\r\n        this.setState({\r\n            showFilter: false\r\n        })\r\n    }\r\n    AddSpec = (e) => {\r\n        this.setState({\r\n            loadSpec: true\r\n        })\r\n        // const updateInfo = {\r\n        //     typeName: DEFAULT_RETURN,\r\n        //     data: {\r\n        //         loadSpec: true\r\n        //     }\r\n        // }\r\n        // this.props.updateStore(updateInfo);\r\n    }\r\n    // addTestslide = (e) => {\r\n    //     this.setState({\r\n    //         loadTest: true\r\n    //     })\r\n    // }\r\n\r\n    addTestslide = (selectedComponent, subSample, specBasedComponent) => {\r\n        if (selectedComponent && Object.keys(selectedComponent).length > 0) {\r\n            delete selectedComponent[\"selected\"];\r\n            this.props.getTest(selectedComponent, this.props.Login, subSample, specBasedComponent);\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: subSample===3?\"IDS_SELECTSUBSAMPLETOADDTEST\":\"IDS_SELECTCOMPONENTTOADDTEST\" }));\r\n        }\r\n    }\r\n\r\n    closeSpec = (e) => {\r\n        this.setState({\r\n            loadSpec: false, selectedRecord: { ...this.state.selectedRecord, ...this.state.selectedSpec }\r\n        })\r\n        // const updateInfo = {\r\n        //     typeName: DEFAULT_RETURN,\r\n        //     data: {\r\n        //         loadSpec: false,\r\n        //         selectedRecord: { ...this.state.selectedRecord, ...this.state.selectedSpec }\r\n        //     }\r\n        // }\r\n        // this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeComponent = (e) => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                loadComponent: false,\r\n                selectComponent: {}\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeTest = (e) => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                loadTest: false,\r\n                selectedTestData: {}\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeSubSample = (e) => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                loadSubSample: false,\r\n                selectedSubSample: {}\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    onspecChange = (event, fieldName) => {\r\n        if (event !== null) {\r\n            const selectedRecord = this.state.selectedRecord;\r\n            const oldpromarycode = this.state.selectedRecord[\"nallottedspeccode\"] !== undefined ?\r\n                this.state.selectedRecord[\"nallottedspeccode\"].value : undefined;\r\n            selectedRecord[\"sversion\"] = parseInt(event.item.sversion);\r\n            selectedRecord[\"nallottedspeccode\"] = event;\r\n            //  if(this.props.Login.Component.length=== 0 ){\r\n            this.setState({ selectedRecord });\r\n            // }else{\r\n            //     if(event.value!== oldpromarycode ){\r\n            //     this.confirmMessage.confirm(\"confirmation\", \"Confirmation!\", \"Do You Want to clear the Existing Components ?\",\r\n            //     \"ok\", \"cancel\", () => this.setState({ selectedRecord }));\r\n            //     }\r\n            // }\r\n\r\n        }\r\n    }\r\n\r\n    onTreeClick = (event) => {\r\n        const inputParam = {\r\n            methodUrl: \"TestGroupSpecification\",\r\n            screenName: \"IDS_REGISTRATION\",\r\n            operation: \"get\",\r\n            activeKey: event.key,\r\n            focusKey: event.key,\r\n            keyName: \"treetemplatemanipulation\",\r\n            userinfo: this.props.Login.userInfo,\r\n            selectedNode: event.item,\r\n            selectedRecord: this.state.selectedRecord,\r\n\r\n            primaryKey: event.primaryKey\r\n        };\r\n        if(event.primaryKey!==this.state.selectedRecord[\"ntemplatemanipulationcode\"]){\r\n            this.props.getNewRegSpecification(inputParam, this.props.Login.masterData);\r\n        }\r\n       \r\n\r\n        // if (this.props.Login.Component === undefined || this.props.Login.Component.length === 0) {\r\n        //     //   this.props.getRegSpecification(inputParam, this.props.Login.masterData, getComponents);\r\n        // } else {\r\n        //     // if(event.key!== this.props.Login.ActiveKey ){\r\n        //     // this.confirmMessage.confirm(\"confirmation\", \"Confirmation!\", \"Do You Want to clear the Existing Components ?\",\r\n        //     // \"ok\", \"cancel\", () =>  this.props.getRegSpecification(inputParam, this.props.Login.masterData, getComponents));\r\n        //     // }\r\n        // }\r\n    }\r\n\r\n\r\n    handleComponentRowClick = (event) => {\r\n        let selectedComponent = event.dataItem;\r\n        let SelectedTest = this.props.Login.Test && this.props.Login.Test[selectedComponent.slno] ? this.props.Login.Test[selectedComponent.slno] : [];\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                SelectedTest, selectedComponent,\r\n                testDataState: {\r\n                    skip: 0, take: this.props.Login.settings ?\r\n                        parseInt(this.props.Login.settings[14]) : 5\r\n                }\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    };\r\n\r\n\r\n    AddComponent = () => {\r\n        let Map = {};\r\n        if (this.state.selectedSpec.nallottedspeccode !== undefined\r\n            && this.state.selectedSpec.nallottedspeccode !== \"\") {\r\n            Map[\"ntemplatemanipulationcode\"] = this.state.selectedSpec.ntemplatemanipulationcode;\r\n            Map[\"nallottedspeccode\"] = this.state.selectedSpec.nallottedspeccode.value;\r\n            Map[\"nregtypecode\"] = this.props.Login.masterData.RealRegTypeValue.nregtypecode;\r\n            Map[\"testrequired\"] = false;\r\n            Map[\"userinfo\"] = this.props.Login.userInfo;\r\n            this.props.AddComponents(Map);\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTSPECIFICATION\" }));\r\n        }\r\n\r\n    }\r\n\r\n    onComponentChange = (comboData, fieldName, subSample) => {\r\n        if (comboData !== null) {\r\n            if (!subSample) {\r\n                const selectComponent = this.state.selectComponent || {};\r\n                if (fieldName === 'ntzdreceivedate') {\r\n                    selectComponent[\"ntzdreceivedate\"] = comboData;\r\n                } else {\r\n                    // const oldspecsampletypecode = selectComponent.nspecsampletypecode\r\n                    // if (oldspecsampletypecode !== comboData.item.nspecsampletypecode) {\r\n                    //     //selectComponent[\"nneedservice\"] = true;\r\n                    // }\r\n                    selectComponent[fieldName] = comboData;\r\n                    selectComponent[\"nspecsampletypecode\"] = comboData.item.nspecsampletypecode;\r\n\r\n                }\r\n                this.setState({ selectComponent })\r\n                // const updateInfo = {\r\n                //     typeName: DEFAULT_RETURN,\r\n                //     data: {\r\n                //         selectComponent\r\n                //     }\r\n                // }\r\n                // this.props.updateStore(updateInfo);\r\n            } else {\r\n                const selectComponent = this.state.selectComponent || {};\r\n                selectComponent[fieldName] = comboData;\r\n               // selectComponent[\"nspecsampletypecode\"] = comboData.item.nspecsampletypecode ?  comboData.item.nspecsampletypecode : -1;\r\n                this.setState({ selectComponent })\r\n            }\r\n        }\r\n\r\n    }\r\n    onInputComponentOnChange = (event) => {\r\n        const selectComponent = this.state.selectComponent || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectComponent[event.target.name] = event.target.checked === true ? 3 : 4;\r\n        }\r\n        else {\r\n            selectComponent[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectComponent })\r\n        // const updateInfo = {\r\n        //     typeName: DEFAULT_RETURN,\r\n        //     data: {\r\n        //         selectComponent\r\n        //     }\r\n        // }\r\n        // this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onSaveComponentClick = (saveType, formRef) => {\r\n        const childoperation = this.props.Login.childoperation;\r\n        if (childoperation === \"create\") {\r\n            if (saveType === 1) {\r\n                this.ComponentObjectAfterSave();\r\n            } else if (saveType === 2) {\r\n                this.ComponentObject();\r\n            }\r\n        } else {\r\n            const Component = this.props.Login.Component;\r\n            const Test = this.props.Login.Test;\r\n            const testrequired = this.state.selectedRecord.ntransactionstatus;\r\n\r\n            let selectedComponent = { ...this.state.selectComponent };\r\n            let objcomponent = {};\r\n            objcomponent[\"scomponentname\"] = selectedComponent[\"ncomponentcode\"].label;\r\n            objcomponent[\"ncomponentcode\"] = selectedComponent[\"ncomponentcode\"] ? selectedComponent[\"ncomponentcode\"].value : -1;\r\n            const dreceiveddate = selectedComponent[\"dreceiveddate\"];\r\n            objcomponent[\"dreceiveddate\"] = dreceiveddate;\r\n            objcomponent[\"sreceiveddate\"] = convertDateTimetoString(dreceiveddate, this.props.Login.userInfo);\r\n            objcomponent[\"ntzdreceivedate\"] = selectedComponent[\"ntzdreceivedate\"] ? selectedComponent[\"ntzdreceivedate\"].value : -1;\r\n            objcomponent[\"stzdreceivedate\"] = selectedComponent[\"ntzdreceivedate\"] ? selectedComponent[\"ntzdreceivedate\"].label : \"\";\r\n            objcomponent[\"jsondata\"] = \"\"\r\n            selectedComponent = { ...selectedComponent, ...objcomponent }\r\n\r\n            const index = Component.findIndex(x => x.slno === selectedComponent.slno);\r\n            if (index > -1) {\r\n                Component.splice(index, 1, selectedComponent);\r\n            }\r\n            if (testrequired === 3) {\r\n                this.props.getTestByComponentChange(Component, selectedComponent, this.props.Login);\r\n            }\r\n            else if (selectedComponent[\"nneedservice\"] === true) {\r\n                this.props.getTestByComponentChange(Component, selectedComponent, this.props.Login, true);\r\n            } else {\r\n                delete selectedComponent.nneedservice;\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        Component, selectedComponent: selectedComponent, loadComponent: false, openChildModal: false,\r\n                        selectComponent: undefined, parentPopUpSize: \"xl\", Test, SelectedTest: Test[selectedComponent.slno]\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    ComponentObjectAfterSave() {\r\n        const testrequired = this.state.selectedRecord.ntransactionstatus;\r\n        let objcomponent = this.state.selectComponent;\r\n        delete objcomponent.nneedservice;\r\n        if (testrequired === 3) {\r\n            this.props.getTestfromDB(objcomponent, this.props.Login, 2);\r\n        } else {\r\n            const Component = this.props.Login.Component || [];\r\n            let saveComponent = { ...objcomponent };\r\n            saveComponent[\"slno\"] = this.props.Login.Component ? Object.keys(this.props.Login.Component).length + 1 : 1;\r\n            saveComponent[\"scomponentname\"] = objcomponent[\"ncomponentcode\"].label;\r\n            saveComponent[\"ncomponentcode\"] = objcomponent[\"ncomponentcode\"] ? objcomponent[\"ncomponentcode\"].value : -1;\r\n            const dreceiveddate = objcomponent[\"dreceiveddate\"];\r\n            saveComponent[\"dreceiveddate\"] = dreceiveddate;\r\n            saveComponent[\"sreceiveddate\"] = convertDateTimetoString(dreceiveddate, this.props.Login.userInfo);\r\n            saveComponent[\"nallottedspeccode\"] = objcomponent[\"nallottedspeccode\"] ? objcomponent[\"nallottedspeccode\"] : -1;\r\n            saveComponent[\"ntzdreceivedate\"] = objcomponent[\"ntzdreceivedate\"] ? objcomponent[\"ntzdreceivedate\"].value : -1;\r\n            saveComponent[\"stzdreceivedate\"] = objcomponent[\"ntzdreceivedate\"] ? objcomponent[\"ntzdreceivedate\"].label : \"\";\r\n            saveComponent[\"jsondata\"] = \"\"\r\n            Component.unshift(saveComponent);\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    Component, openChildModal: false, selectedComponent: saveComponent,\r\n                    SelectedTest: [], selectComponent: {}, showSaveContinue: false, loadComponent: false, parentPopUpSize: \"xl\"\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n    }\r\n    ComponentObject() {\r\n        const testrequired = this.state.selectedRecord.ntransactionstatus;\r\n        let objcomponent = this.state.selectComponent;\r\n        delete objcomponent.nneedservice;\r\n        let objcomponent1 = { ...this.state.selectComponent };\r\n        if (testrequired === 3) {\r\n            this.props.getTestfromDB(objcomponent, this.props.Login, 1);\r\n        } else {\r\n            const Component = this.props.Login.Component || [];\r\n            let saveComponent = { ...objcomponent };\r\n            saveComponent[\"scomponentname\"] = objcomponent[\"ncomponentcode\"].label;\r\n            saveComponent[\"slno\"] = this.props.Login.Component ? Object.keys(this.props.Login.Component).length + 1 : 1;\r\n            saveComponent[\"ncomponentcode\"] = objcomponent[\"ncomponentcode\"] ? objcomponent[\"ncomponentcode\"].value : -1;\r\n            const dreceiveddate = objcomponent[\"dreceiveddate\"];\r\n            saveComponent[\"dreceiveddate\"] = dreceiveddate;\r\n            saveComponent[\"sreceiveddate\"] = convertDateTimetoString(dreceiveddate, this.props.Login.userInfo);\r\n            saveComponent[\"ntzdreceivedate\"] = objcomponent[\"ntzdreceivedate\"] ? objcomponent[\"ntzdreceivedate\"].value : -1;\r\n            saveComponent[\"stzdreceivedate\"] = objcomponent[\"ntzdreceivedate\"] ? objcomponent[\"ntzdreceivedate\"].label : \"\";\r\n            saveComponent[\"nallottedspeccode\"] = objcomponent[\"nallottedspeccode\"] ? objcomponent[\"nallottedspeccode\"] : -1;\r\n            saveComponent[\"jsondata\"] = \"\"\r\n            Component.unshift(saveComponent);\r\n            objcomponent1[\"scomments\"] = \"\";\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { Component, selectedComponent: saveComponent, SelectedTest: [], selectComponent: objcomponent1 }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n    }\r\n\r\n    onSaveSubSampleClick = (saveType, formRef) => {\r\n        const childoperation = this.props.Login.childoperation;\r\n        if (childoperation === \"create\") {\r\n            if (saveType === 1) {\r\n                this.SubSampleObjectAfterSave();\r\n            } else if (saveType === 2) {\r\n                this.SubSampleObject();\r\n            }\r\n        } else {\r\n            const Component = this.props.Login.Component;\r\n            const Test = this.props.Login.Test;\r\n            const testrequired = this.state.selectedRecord.ntransactionstatus;\r\n\r\n            let selectedComponent = { ...this.state.selectComponent };\r\n            let objcomponent = {};\r\n            objcomponent[\"scomponentname\"] = selectedComponent[\"ncomponentcode\"].label;\r\n            objcomponent[\"ncomponentcode\"] = selectedComponent[\"ncomponentcode\"] ? selectedComponent[\"ncomponentcode\"].value : -1;\r\n            objcomponent[\"ssubsamplename\"] = selectedComponent[\"ssubsamplename\"];\r\n            objcomponent[\"nunitcode\"] = selectedComponent[\"nunitcode\"] ? selectedComponent[\"nunitcode\"].value : -1;\r\n            objcomponent[\"sunitname\"] = selectedComponent[\"nunitcode\"] ? selectedComponent[\"nunitcode\"].label : \"\";\r\n            objcomponent[\"scomments\"] = selectedComponent[\"scomments\"] ? selectedComponent[\"scomments\"] : \"\";\r\n            objcomponent[\"ssampleqty\"] = selectedComponent[\"ssampleqty\"] ? selectedComponent[\"ssampleqty\"] : 0;\r\n            objcomponent[\"nallottedspeccode\"] = this.state.selectedSpec[\"nallottedspeccode\"] ? this.state.selectedSpec[\"nallottedspeccode\"].value : -1;\r\n            objcomponent[\"jsondata\"] = {}\r\n            selectedComponent = { ...selectedComponent, ...objcomponent }\r\n\r\n            const index = Component.findIndex(x => x.slno === selectedComponent.slno);\r\n            if (index > -1) {\r\n                Component.splice(index, 1, selectedComponent);\r\n            }\r\n            if (testrequired === 3) {\r\n                this.props.getTestByComponentChange(Component, selectedComponent, this.props.Login);\r\n            }\r\n            else if (selectedComponent[\"nneedservice\"] === true) {\r\n                this.props.getTestByComponentChange(Component, selectedComponent, this.props.Login, true);\r\n            } else {\r\n                delete selectedComponent.nneedservice;\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        Component, selectedComponent: selectedComponent, loadSubSample: false, openChildModal: false,\r\n                        selectComponent: undefined, parentPopUpSize: \"xl\", Test, SelectedTest: Test[selectedComponent.slno]\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    SubSampleObjectAfterSave() {\r\n        const testrequired = this.state.selectedRecord.ntransactionstatus;\r\n        let objcomponent = this.state.selectComponent;\r\n        delete objcomponent.nneedservice;\r\n        if (testrequired === 3) {\r\n            this.props.getTestfromDB(objcomponent, this.props.Login, 2);\r\n        } else {\r\n            const Component = this.props.Login.Component || [];\r\n            let saveComponent = { ...objcomponent };\r\n            saveComponent[\"scomponentname\"] = objcomponent[\"ncomponentcode\"].label;\r\n            saveComponent[\"ncomponentcode\"] = objcomponent[\"ncomponentcode\"] ? objcomponent[\"ncomponentcode\"].value : -1;\r\n            saveComponent[\"slno\"] = this.props.Login.Component ? Object.keys(this.props.Login.Component).length + 1 : 1;\r\n            saveComponent[\"ssubsamplename\"] = objcomponent[\"ssubsamplename\"] ? objcomponent[\"ssubsamplename\"] : \"\";\r\n            saveComponent[\"nunitcode\"] = objcomponent[\"nunitcode\"] ? objcomponent[\"nunitcode\"].value : -1;\r\n            saveComponent[\"sunitname\"] = objcomponent[\"nunitcode\"] ? objcomponent[\"nunitcode\"].label : \"\";\r\n            saveComponent[\"nallottedspeccode\"] = this.state.selectedSpec[\"nallottedspeccode\"] ? this.state.selectedSpec[\"nallottedspeccode\"].value : -1;\r\n            saveComponent[\"ssampleqty\"] = objcomponent[\"ssampleqty\"] ? objcomponent[\"ssampleqty\"] : -1;\r\n            saveComponent[\"scomments\"] = objcomponent[\"scomments\"] ? objcomponent[\"scomments\"] : \"\";\r\n            saveComponent[\"jsondata\"] = {}\r\n            Component.unshift(saveComponent);\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    Component, openChildModal: false, selectedComponent: saveComponent, loadSubSample: false,\r\n                    SelectedTest: [], selectComponent: {}, showSaveContinue: false, parentPopUpSize: \"xl\"\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n    }\r\n\r\n    SubSampleObject() {\r\n        const testrequired = this.state.selectedRecord.ntransactionstatus;\r\n        let objcomponent = this.state.selectComponent;\r\n        delete objcomponent.nneedservice;\r\n        let objcomponent1 = { ...this.state.selectComponent };\r\n        if (testrequired === 3) {\r\n            this.props.getTestfromDB(objcomponent, this.props.Login, 1);\r\n        } else {\r\n            const Component = this.props.Login.Component || [];\r\n            let saveComponent = { ...objcomponent };\r\n            saveComponent[\"slno\"] = this.props.Login.Component ? Object.keys(this.props.Login.Component).length + 1 : 1;\r\n            saveComponent[\"scomponentname\"] = objcomponent[\"ncomponentcode\"].label;\r\n            saveComponent[\"ncomponentcode\"] = objcomponent[\"ncomponentcode\"] ? objcomponent[\"ncomponentcode\"].value : -1;\r\n            saveComponent[\"ssubsamplename\"] = objcomponent[\"ssubsamplename\"] ? objcomponent[\"ssubsamplename\"] : \"\";\r\n            saveComponent[\"nunitcode\"] = objcomponent[\"nunitcode\"] ? objcomponent[\"nunitcode\"].value : -1;\r\n            saveComponent[\"sunitname\"] = objcomponent[\"nunitcode\"] ? objcomponent[\"nunitcode\"].label : \"\";\r\n            saveComponent[\"nallottedspeccode\"] = this.state.selectedSpec[\"nallottedspeccode\"] ?\r\n                this.state.selectedSpec[\"nallottedspeccode\"].value : -1;\r\n            saveComponent[\"ssampleqty\"] = objcomponent[\"ssampleqty\"] ? objcomponent[\"ssampleqty\"] : -1;\r\n            saveComponent[\"scomments\"] = objcomponent[\"scomments\"] ? objcomponent[\"scomments\"] : \"\";\r\n            saveComponent[\"jsondata\"] = {}\r\n            Component.unshift(saveComponent);\r\n            objcomponent1[\"scomments\"] = \"\";\r\n            objcomponent1[\"ssubsamplename\"] = \"\";\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { Component, selectedComponent: saveComponent, SelectedTest: [], selectComponent: objcomponent1 }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n    }\r\n\r\n    editComponent = (editselectedcomponent) => {\r\n        let inputData = {};\r\n        let objComponent = { ...editselectedcomponent };\r\n        inputData[\"ntemplatemanipulationcode\"] = this.state.selectedSpec.ntemplatemanipulationcode;\r\n        inputData[\"nallottedspeccode\"] = this.state.selectedSpec.nallottedspeccode.value;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        inputData[\"nregtypecode\"] = this.props.Login.masterData.RealRegTypeValue.nregtypecode;\r\n        this.props.EditComponent(inputData, objComponent, this.props.Login.userInfo, this.props.Login);\r\n    }\r\n\r\n\r\n    editSubSample = (editselectedcomponent, specBasedComponent) => {\r\n        let inputData = {};\r\n        let objComponent = { ...editselectedcomponent };\r\n        inputData[\"ntemplatemanipulationcode\"] = this.state.selectedSpec.ntemplatemanipulationcode;\r\n        inputData[\"nallottedspeccode\"] = this.state.selectedSpec.nallottedspeccode.value;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        inputData[\"nregtypecode\"] = this.props.Login.masterData.RealRegTypeValue.nregtypecode;\r\n        this.props.editSubSample(inputData, objComponent, this.props.Login.userInfo, specBasedComponent);\r\n    }\r\n\r\n    deleteComponent = (event) => {\r\n        const dataItem = event;\r\n        const Component = this.props.Login.Component;\r\n        const Test = this.props.Login.Test;\r\n        let SelectedTest = this.props.Login.SelectedTest;\r\n        const index = Component.findIndex(x => x.slno === dataItem.slno);\r\n        if (index > -1) {\r\n            Component.splice(index, 1);\r\n        }\r\n        Test && Test[dataItem.slno] && delete Test[dataItem.slno]\r\n        SelectedTest = Test && Object.keys(Test).length > 0 && Test[Component[0].slno];\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { Component, selectedComponent: Component[0], Test, SelectedTest }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    deleteTest = (event) => {\r\n        const dataItem = event;\r\n        let SelectedTest = this.props.Login.SelectedTest;\r\n        let selectedComponent = this.props.Login.selectedComponent;\r\n        const Test = this.props.Login.Test;\r\n        const index = SelectedTest.findIndex(x => x.ntestgrouptestcode === dataItem.ntestgrouptestcode);\r\n        if (index > -1) {\r\n            SelectedTest.splice(index, 1);\r\n        }\r\n        Test[selectedComponent.slno] = SelectedTest;\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { Test, SelectedTest }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onSaveTestClick = (saveType, formRef) => {\r\n        let selectedTestData = this.props.Login.selectedTestData[\"ntestgrouptestcode\"];\r\n        let selectedTestArray = [];\r\n        selectedTestData.map((item) => {\r\n            return selectedTestArray.push(item.item);\r\n        });\r\n        let selectedComponent = this.props.Login.selectedComponent;\r\n        let Test = this.props.Login.Test || [];\r\n\r\n        const ArrayTest = Test[selectedComponent.slno] ? Test[selectedComponent.slno] : [];\r\n        //  ArrayTest.push(selectedTestArray);\r\n        Test[selectedComponent.slno] = [...ArrayTest, ...selectedTestArray]\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { SelectedTest: Test[selectedComponent.slno], Test: Test, selectedTestData: {}, loadTest: false, parentPopUpSize: \"xl\" }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    componentDataStateChange = (event) => {\r\n        this.setState({\r\n            componentDataState: event.dataState\r\n        });\r\n    }\r\n\r\n    testDataStateChange = (event) => {\r\n        this.setState({\r\n            testDataState: event.dataState\r\n        });\r\n    }\r\n\r\n    subSampleDataStateChange = (event) => {\r\n        this.setState({\r\n            subSampleDataState: event.dataState\r\n        });\r\n    }\r\n\r\n    addsubSample = (specBasedComponent) => {\r\n        let Map = {};\r\n        if (this.state.selectedSpec.nallottedspeccode !== undefined\r\n            && this.state.selectedSpec.nallottedspeccode !== \"\") {\r\n            Map[\"ntemplatemanipulationcode\"] = this.state.selectedSpec.ntemplatemanipulationcode;\r\n            Map[\"nallottedspeccode\"] = this.state.selectedSpec.nallottedspeccode.value;\r\n            Map[\"nregtypecode\"] = this.props.Login.masterData.RealRegTypeValue.nregtypecode;\r\n            Map[\"testrequired\"] = false;\r\n            Map[\"userinfo\"] = this.props.Login.userInfo;\r\n            this.props.addsubSample(this.props.Login.userInfo, specBasedComponent, Map)\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTSPECIFICATION\" }));\r\n        }\r\n\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        let operation = this.props.Login.operation;\r\n        if (operation === \"update\") {\r\n            this.onUpdateRegistration(saveType, formRef, operation);\r\n        }\r\n        else {\r\n            if (operation === \"create\") {\r\n                this.insertRegistration(true);\r\n            }\r\n        }\r\n    }\r\n\r\n    insertRegistration() {\r\n        let Components = this.props.Login.Component;\r\n        let Test = this.props.Login.Test;\r\n        let Map = {};\r\n        Map[\"testgrouptest\"] = TestListManipulation(Components, Test);\r\n        Map[\"RegistrationSample\"] = getComponentListfromUnwantedAttr(this.props.Login.Component);\r\n        Map[\"FromDate\"] = rearrangeDateFormat(this.props.Login.userInfo, this.props.fromDate);//formatDate(this.fromDate);\r\n        Map[\"ToDate\"] = rearrangeDateFormat(this.props.Login.userInfo, this.props.toDate);//formatDate(this.toDate);\r\n        Map[\"nregtypecode\"] = this.props.Login.masterData.RealRegTypeValue.nregtypecode;\r\n        Map[\"nregsubtypecode\"] = this.props.Login.masterData.RealRegSubTypeValue.nregsubtypecode;\r\n        Map[\"nsampletypecode\"] = this.props.Login.masterData.RealSampleTypeValue.nsampletypecode;\r\n        Map[\"nfilterstatus\"] = transactionStatus.PREREGISTER;\r\n        Map[\"Registration\"] = getRegistration(this.props.Login.masterData,\r\n            this.state.selectedRecord, this.state.selectedSpec, this.props.Login.masterData.registrationTemplate.jsondata);\r\n        Map[\"userinfo\"] = this.props.Login.userInfo;\r\n        Map[\"nflag\"] = 2;\r\n        Map[\"ntype\"] = 1;\r\n        Map[\"activeSampleTab\"] = this.props.Login.activeSampleTab;\r\n        Map[\"activeTestTab\"] = this.props.Login.activeTestTab;\r\n        Map[\"multipleselectionFlag\"] = this.props.Login.settings && parseInt(this.props.Login.settings[7]) === 3 ? true : false;\r\n\r\n        const inputParam = {\r\n            inputData: Map,\r\n            postParamList: this.props.postParamList,\r\n            action: \"preregister\"\r\n        }\r\n        this.props.insertRegistration(inputParam, this.props.Login.masterData)\r\n\r\n    }\r\n    onNumericInputChange = (value, name) => {\r\n        let selectedRecord = this.state.selectedRecord\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    render() {\r\n\r\n        let saveType = 1;\r\n        if (this.props.ignoreFormValidation) {\r\n            saveType = 5;\r\n        }\r\n        let buttonLabel = \"Save\";\r\n        let idsLabel = \"IDS_SAVE\";\r\n        if (this.props.buttonLabel) {\r\n            buttonLabel = this.props.buttonLabel;\r\n            idsLabel = 'IDS_'.concat(buttonLabel.toUpperCase());\r\n        }\r\n        const testColumnList = [\r\n            { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestsynonym\", width: \"200px\" },\r\n            { \"idsName\": \"IDS_SECTION\", \"dataField\": \"ssectionname\", width: \"150px\" },\r\n            { \"idsName\": \"IDS_SOURCE\", \"dataField\": \"ssourcename\", width: \"150px\" },\r\n            { \"idsName\": \"IDS_METHOD\", \"dataField\": \"smethodname\", width: \"150px\" },\r\n            { \"idsName\": \"IDS_INSTRUMENTCATEGORY\", \"dataField\": \"sinstrumentcatname\", width: \"200px\" }]\r\n        return (\r\n            <Modal\r\n                size={this.props.Login.loadComponent ?\r\n                    'lg' : this.state.loadSpec ? 'lg' :\r\n                        this.props.Login.loadTest ? 'lg' : this.props.Login.loadSubSample ? 'lg' : 'xl'}\r\n                // size={this.props.templateData[0] ?\r\n                //     this.props.templateData[0].children ?\r\n                //         this.props.templateData[0].children.length >= 2 ? 'xl' : 'lg' : 'lg' : 'lg'}\r\n                backdrop=\"static\"\r\n                className={this.props.className || \"\"}\r\n                show={this.props.show}\r\n                onHide={this.props.closeModal}\r\n                enforceFocus={false}\r\n                dialogClassName=\"modal-dialog-slideout freakerstop\"\r\n                aria-labelledby=\"add-user\">\r\n                <Modal.Header className=\"d-flex align-items-center\">\r\n                    <Modal.Title id=\"add-user\" className=\"header-primary flex-grow-1\">\r\n                        {this.props.graphView === true ? \"\" : this.props.inputParam ?\r\n                            this.props.esign === true ?\r\n                                <FormattedMessage id={\"IDS_ESIGN\"} defaultMessage=\"Esign\" />\r\n                                : this.props.loginoperation ?\r\n                                    <FormattedMessage id={this.props.screenName} />\r\n                                    : <>\r\n                                        {this.props.operation ?\r\n                                            <>\r\n                                                <FormattedMessage id={this.props.operation && \"IDS_\".concat(this.props.operation.toUpperCase())}\r\n                                                    defaultMessage='Add' />\r\n                                                {\" \"}\r\n                                                {\r\n                                                    this.props.screenName ?\r\n                                                        <FormattedMessage id={this.props.screenName} />\r\n                                                        : \"\"\r\n                                                }\r\n                                            </>\r\n                                            :\r\n                                            this.props.screenName ?\r\n                                                <FormattedMessage id={this.props.screenName} />\r\n                                                : \"\"}\r\n                                    </>\r\n                            : \"\"}\r\n                    </Modal.Title>\r\n                    <Button className=\"btn-user btn-cancel\" variant=\"\" onClick={this.state.loadSpec ?\r\n                        this.closeSpec : this.props.Login.loadTest ? this.closeTest : this.props.Login.loadComponent ?\r\n                            this.closeComponent : this.props.Login.loadSubSample ? this.closeSubSample :\r\n                                this.props.closeModal}>\r\n                        <FormattedMessage id='IDS_CANCEL' defaultMessage='Cancel' />\r\n                    </Button>\r\n                    {this.props.esign === true ?\r\n                        <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(3)}>\r\n                            <FontAwesomeIcon icon={faSave} /> { }\r\n                            <FormattedMessage id='IDS_SUBMIT' defaultMessage='Submit' />\r\n                        </Button>\r\n                        :\r\n                        (this.props.operation === \"create\" || this.props.operation === \"update\") && this.props.showValidate ?\r\n                            <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(4)}>\r\n                                <FontAwesomeIcon icon={faSave} /> { }\r\n                                <FormattedMessage id='IDS_VALIDATE' defaultMessage='Validate' />\r\n                            </Button> :\r\n                            this.props.showCalculate ?\r\n                                <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(saveType)}>\r\n                                    <FontAwesomeIcon icon={faSave} /> { }\r\n                                    <FormattedMessage id='IDS_CALCULATE' defaultMessage='Calculate' />\r\n                                </Button> :\r\n                                this.props.showParam === true && this.props.showExecute ?\r\n                                    <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(4)}>\r\n                                        <FontAwesomeIcon icon={faCalculator} /> { }\r\n                                        <FormattedMessage id='IDS_EXECUTE' defaultMessage='Execute' />\r\n                                    </Button> :\r\n                                    this.props.noSave || this.props.graphView ?\r\n                                        this.props.operation === \"view\" ? \"\"\r\n                                            : <Button className=\"btn btn-user btn-primary-blue\" role=\"button\"\r\n                                                onClick={this.props.resetView}\r\n                                            >\r\n                                                <FormattedMessage id={\"IDS_RESET\"} defaultMessage='Reset' />\r\n                                            </Button>\r\n                                        : this.props.hideSave ? \"\" :\r\n                                            <Button className=\" btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(saveType)}>\r\n                                                <FontAwesomeIcon icon={faSave} /> { }\r\n                                                <FormattedMessage id={idsLabel} defaultMessage={buttonLabel} />\r\n                                            </Button>\r\n                    }\r\n                    {this.props.Login.operation === \"create\" && this.props.Login.showSaveContinue ?\r\n                        <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(2)}>\r\n                            <FontAwesomeIcon icon={faSave} /> { }\r\n                            <FormattedMessage id='IDS_SAVECONTINUE' defaultMessage='Save & Continue' />\r\n                        </Button>\r\n                        : \"\"\r\n                    }\r\n                    {(this.props.operation === \"create\" || this.props.operation === \"update\")\r\n                        && this.props.esign !== true && this.props.showExecute === true && this.props.showSave ?\r\n                        <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(1)}>\r\n                            <FontAwesomeIcon icon={faSave} /> { }\r\n                            <FormattedMessage id='IDS_SAVE' defaultMessage='Save' />\r\n                        </Button>\r\n                        : \"\"}\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <ModalInner ref={this.myRef}>\r\n                        <Card.Body>\r\n                            <React.Fragment>\r\n                                <Form ref={this.formRef}>\r\n                                    {\r\n                                        this.state.loadSpec ?\r\n                                            <AddSpecification\r\n                                                AgaramTree={this.props.Login.AgaramTree}\r\n                                                openNodes={this.props.Login.OpenNodes}\r\n                                                handleTreeClick={this.onTreeClick}\r\n                                                focusKey={this.props.Login.FocusKey}\r\n                                                activeKey={this.props.Login.ActiveKey}\r\n                                                Specification={this.props.Login.Specification}\r\n                                                selectedRecord={this.state.selectedRecord}\r\n                                                selectedSpec={this.state.selectedSpec}\r\n                                                selectedRecord={this.state.selectedRecord}\r\n                                                onSpecChange={this.onspecChange}\r\n                                            />\r\n                                            : this.props.Login.loadTest ?\r\n                                                <AddTest\r\n                                                    TestCombined={this.props.Login.TestCombined || []}\r\n                                                    TestChange={this.TestChange}\r\n                                                    selectedTestData={this.props.Login.selectedTestData}\r\n                                                /> : this.props.Login.loadComponent ?\r\n                                                    <AddComponentPopUp\r\n                                                        ref={this.myScrollRef}\r\n                                                        selectComponent={this.state.selectComponent || {}}\r\n                                                        RealSampleTypeValue={this.props.Login.masterData.RealSampleTypeValue || {}}\r\n                                                        RealRegTypeValue={this.props.Login.masterData.RealRegTypeValue || {}}\r\n                                                        RealRegSubTypeValue={this.props.Login.masterData.RealRegSubTypeValue || {}}\r\n                                                        RealFilterStatusValue={this.props.Login.masterData.RealFilterStatusValue || {}}\r\n                                                        formatMessage={this.props.intl.formatMessage}\r\n                                                        handleDateChange={this.handleDateChange}\r\n                                                        Component={this.props.Login.lstComponent || []}\r\n                                                        onInputComponentOnChange={this.onInputComponentOnChange}\r\n                                                        // onComboChange={this.onComponentComboChange}\r\n                                                        timeZoneList={this.props.Login.timeZoneList}\r\n                                                        onComponentChange={this.onComponentChange}\r\n                                                        userInfo={this.props.Login.userInfo}\r\n                                                        sreceiveddate={this.props.Login.sreceiveddate || []}\r\n                                                        CurrentTime={this.props.Login.CurrentTime}\r\n                                                    />\r\n                                                    : this.props.Login.loadSubSample ?\r\n                                                        <AddSubSample\r\n                                                            Component={this.props.Login.lstComponent || []}\r\n                                                            selectComponent={this.state.selectComponent}\r\n                                                            Unit={this.props.Login.Unit || []}\r\n                                                            onComponentChange={this.onComponentChange}\r\n                                                            onInputComponentOnChange={this.onInputComponentOnChange}\r\n                                                        />\r\n                                                        : <RegisterSlideOut\r\n                                                            selectedSpec={this.state.selectedSpec}\r\n                                                            selectedRecord={this.state.selectedRecord}\r\n                                                            selectedComponent={this.props.Login.selectedComponent}\r\n                                                            SelectedTest={this.props.Login.SelectedTest}\r\n                                                            // selectedTestData={this.props.Login.selectedTestData}\r\n                                                            userRoleControlRights={this.props.userRoleControlRights}\r\n                                                            templateData={this.props.Login.masterData.registrationTemplate &&\r\n                                                                this.props.Login.masterData.registrationTemplate.jsondata}\r\n                                                            handleChange={this.props.handleChange}\r\n                                                            handleDateChange={this.props.handleDateChange}\r\n                                                            onInputOnChange={this.onInputOnChange}\r\n                                                            onNumericInputChange={this.onNumericInputChange}\r\n                                                            comboData={this.props.Login.comboData}\r\n                                                            onComboChange={this.onComboChange}\r\n                                                            userInfo={this.props.userInfo}\r\n                                                            timeZoneList={this.props.timeZoneList}\r\n                                                            defaultTimeZone={this.props.defaultTimeZone}\r\n                                                            AddSpec={this.AddSpec}\r\n                                                            addTest={this.addTestslide}\r\n                                                            //={this.selectSubSample}\r\n                                                            handleComponentRowClick={this.handleComponentRowClick}\r\n                                                            subSample={3}\r\n                                                            specBasedComponent={4}\r\n                                                            AddComponent={this.AddComponent}\r\n                                                            deleteComponent={this.deleteComponent}\r\n                                                            deleteTest={this.deleteTest}\r\n                                                            editComponent={this.editComponent}\r\n                                                            componentColumnList={this.componentColumnList}\r\n                                                            Component={this.props.Login.Component}\r\n                                                            TestChange={this.TestChange}\r\n                                                            testDataState={this.state.testDataState}\r\n                                                            subSampleDataState={this.state.subSampleDataState}\r\n                                                            //componentDataState={this.state.componentDataState}\r\n                                                            testDataStateChange={this.testDataStateChange}\r\n                                                            //componentDataStateChange={this.componentDataStateChange}\r\n                                                            subSampleDataStateChange={this.subSampleDataStateChange}\r\n                                                            addsubSample={this.addsubSample}\r\n                                                            editSubSample={this.editSubSample}\r\n                                                            onNumericInputChange={this.onNumericInputChange}\r\n\r\n                                                        />\r\n                                    }\r\n                                </Form>\r\n                            </React.Fragment>\r\n                        </Card.Body>\r\n                    </ModalInner>\r\n                </Modal.Body>\r\n            </Modal>\r\n        );\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    getChildValues,\r\n    getPreviewTemplate, getNewRegSpecification,\r\n    AddComponents, updateStore, EditComponent, getTest,\r\n    addsubSample, editSubSample, insertRegistration\r\n}\r\n)(injectIntl(PreRegisterSlideOutModal));"]},"metadata":{},"sourceType":"module"}