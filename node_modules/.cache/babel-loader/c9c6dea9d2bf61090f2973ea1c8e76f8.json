{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{sortData,constructOptionList,convertDateValuetoString,rearrangeDateFormat}from'../components/CommonScript';//, getComboLabelValue, searchData\nimport{toast}from'react-toastify';import Axios from'axios';import{initRequest}from'./LoginAction';import{intl}from'../components/App';import{transactionStatus}from'../components/Enumeration';export function getTrainingCertificateDetail(trainingcertificate,fromDate,toDate,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"trainingcertificate/getTrainingCertificate\",{ntrainingcode:trainingcertificate.ntrainingcode,fromDate:fromDate,toDate:toDate,\"userinfo\":userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response}));}});};}export function getTrainingCertificateComboService(screenName,operation,primaryKeyName,primaryKeyValue,masterData,userInfo,ncontrolCode){return function(dispatch){if(operation===\"create\"||operation===\"update\"||operation===\"reschedule\"){var trainingcategoryService=rsapi.post(\"traningcategory/getTrainingCategory\",{userinfo:userInfo});var techniqueService=rsapi.post(\"trainingcertificate/getTechnique\",{userinfo:userInfo});var timeZoneService=rsapi.post(\"timezone/getTimeZone\");var UTCtimeZoneService=rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:userInfo});var urlArray=[techniqueService,trainingcategoryService,timeZoneService,UTCtimeZoneService];if(operation===\"update\"||operation===\"reschedule\"){var _rsapi$post,_rsapi$post2;var trainingcertificateServiceById=rsapi.post(\"trainingcertificate/getActiveTrainingCertificateById\",(_rsapi$post={},_defineProperty(_rsapi$post,primaryKeyName,primaryKeyValue),_defineProperty(_rsapi$post,\"userinfo\",userInfo),_rsapi$post));//this.props.Login.userInfo\nurlArray.push(trainingcertificateServiceById);var trainingparticipantsById=rsapi.post(\"trainingcertificate/getTrainingParticipants\",(_rsapi$post2={},_defineProperty(_rsapi$post2,primaryKeyName,primaryKeyValue),_defineProperty(_rsapi$post2,\"userinfo\",userInfo),_rsapi$post2));//this.props.Login.userInfo\nurlArray.push(trainingparticipantsById);}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var status=true;var index;if(operation===\"update\"||operation===\"reschedule\"){index=response[5].data.TrainingParticipants.findIndex(function(item){return item.ntransactionstatus===transactionStatus.INVITED;});if(index!==-1){status=operation===\"update\"?false:true;}else{status=operation===\"reschedule\"?false:true;}}if(status===true){var selectedRecord={\"ntztrainingdate\":{\"value\":userInfo.ntimezonecode,\"label\":userInfo.stimezoneid},\"stztrainingdate\":userInfo.stimezoneid};var techniqueMap=constructOptionList(response[0].data||[],\"ntechniquecode\",\"stechniquename\",undefined,undefined,true);var trainingcategoryMap=constructOptionList(response[1].data||[],\"ntrainingcategorycode\",\"strainingcategoryname\",undefined,undefined,true);var timeZoneMap=constructOptionList(response[2].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var trainingcategoryList=trainingcategoryMap.get(\"OptionList\");var techniqueList=techniqueMap.get(\"OptionList\");var timeZoneList=timeZoneMap.get(\"OptionList\");var currentTime=rearrangeDateFormat(userInfo,response[3].data);if(operation===\"update\"||operation===\"reschedule\"){selectedRecord=response[4].data;selectedRecord[\"dtrainingdatetime\"]=rearrangeDateFormat(userInfo,response[4].data.strainingdatetime);selectedRecord[\"ntrainingcategorycode\"]={\"value\":response[4].data.ntrainingcategorycode,\"label\":response[4].data.strainingcategoryname};selectedRecord[\"ntechniquecode\"]={\"value\":response[4].data.ntechniquecode,\"label\":response[4].data.stechniquename};selectedRecord[\"ntztrainingdate\"]={\"value\":response[4].data.ntztrainingdate,\"label\":response[4].data.stimezoneid};}else{selectedRecord[\"ntransactionstatus\"]=transactionStatus.ACTIVE;selectedRecord[\"ntrainingcategorycode\"]=trainingcategoryMap.get(\"DefaultValue\");}dispatch({type:DEFAULT_RETURN,payload:{currentTime:currentTime,trainingcategoryList:trainingcategoryList,techniqueList:techniqueList,timeZoneList:timeZoneList,operation:operation,screenName:screenName,selectedRecord:selectedRecord,openModal:true,ncontrolCode:ncontrolCode,loading:false}});}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.warn(intl.formatMessage({id:operation===\"update\"?\"IDS_INVITEDPARTICIPANTSCANNOTBEEDITED\":\"IDS_INVITEPARTICIPANTS\"}));}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}};}export function getTrainingParticipantsComboDataService(trainingparam,masterData){return function(dispatch){if(masterData.SelectedTrainingCertificate.ntransactionstatus!==transactionStatus.CANCELLED){var section=rsapi.post(\"section/getSection\",{\"userinfo\":trainingparam.userInfo});var urlArray=[];var selectedId=null;urlArray=[section];dispatch(initRequest(true));Axios.all(urlArray).then(Axios.spread(function(){var selectedRecord={};var nsectioncode=[];var nsitecode=[];var sectionusersList=[];for(var _len=arguments.length,response=new Array(_len),_key=0;_key<_len;_key++){response[_key]=arguments[_key];}var SectionMap=constructOptionList(response[0].data||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,true);var sectionList=SectionMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{section:sectionList,sectionUsers:trainingparam.operation===\"update\"?sectionusersList:[],nsectioncode:nsectioncode,nsitecode:nsitecode,selectedRecord:trainingparam.operation===\"update\"?selectedRecord:undefined,operation:trainingparam.operation,screenName:\"IDS_PARTICIPANTSDETAILS\",openChildModal:true,ncontrolCode:trainingparam.ncontrolCode,loading:false,selectedId:selectedId}});})).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{toast.warn(intl.formatMessage({id:\"IDS_TRAININGCANCELED\"}));}};}export function reloadTrainingCertificate(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"trainingcertificate/getTrainingCertificate\",_objectSpread({},inputParam.inputData)).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);var masterData=_objectSpread(_objectSpread({},inputParam.masterData),responseData);if(inputParam.searchRef!==undefined&&inputParam.searchRef.current!==null){inputParam.searchRef.current.value=\"\";masterData['searchedData']=undefined;}dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,showFilter:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getSectionUsersDataService(nSectionCode,selectedRecord,userInfo,SelectedTrainingCertificate){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"trainingcertificate/getSectionUsers\",{\"userinfo\":userInfo,\"nsectioncode\":parseInt(nSectionCode),\"ntrainingcode\":parseInt(SelectedTrainingCertificate)}).then(function(response){var nusercode=[];// const sectionusersMap = constructOptionList(response.data.SectionUsers || [], \"nusercode\",\n//     \"sfullname\", undefined, undefined, true);\nvar sectionusersList=response.data.SectionUsers;dispatch({type:DEFAULT_RETURN,payload:{sectionUsers:sectionusersList,nusercode:nusercode,selectedRecord:selectedRecord,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getTrainingParticipantsInvite(trainingparam,selectedRecord,masterData,operation){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"trainingcertificate/getInviteParticipants\",{\"userinfo\":trainingparam.userInfo,\"ntrainingcode\":parseInt(masterData.SelectedTrainingCertificate.ntrainingcode)}).then(function(response){var nusercode=[];// const inviteUsersMap = constructOptionList(response.data.InvitedParticipants || [], \"nusercode\",\n//     \"sfullname\", undefined, undefined, true);\n// const inviteUsersList = inviteUsersMap.get(\"OptionList\");\nvar inviteUsersList=response.data.InvitedParticipants;dispatch({type:DEFAULT_RETURN,payload:{usersStatus:inviteUsersList,nusercode:nusercode,loading:false,openChildModal:true,screenName:\"IDS_INVITEDPARTICIPANTSDETAILS\",nFlag:2,selectedRecord:selectedRecord,operation:operation}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getTrainingParticipantsCancel(trainingparam,selectedRecord,masterData,operation){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"trainingcertificate/getCancelParticipants\",{\"userinfo\":trainingparam.userInfo,\"ntrainingcode\":parseInt(masterData.SelectedTrainingCertificate.ntrainingcode)}).then(function(response){var nusercode=[];// const cancelUsersMap = constructOptionList(response.data.CancelParticipants || [], \"nusercode\",\n//     \"sfullname\", undefined, undefined, true);\nvar cancelUsersList=response.data.CancelParticipants;dispatch({type:DEFAULT_RETURN,payload:{usersStatus:cancelUsersList,nusercode:nusercode,loading:false,openChildModal:true,screenName:\"IDS_CANCELPARTICIPANTSDETAILS\",nFlag:3,selectedRecord:selectedRecord,operation:operation}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function rescheduleTrainingCertificate(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"trainingcertificate/rescheduleTrainingCertificate\",_objectSpread({},inputParam.inputData)).then(function(response){var masterData=_objectSpread({},response.data);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,showFilter:false,openModal:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getAddValidityExpiry(screenName,operation,masterData,userInfo,ncontrolCode){return function(dispatch){//if (masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.DRAFT){     \nif(masterData.SelectedTrainingCertificate.ntransactionstatus!==transactionStatus.CONDUCTED&&masterData.SelectedTrainingCertificate.ntransactionstatus!==transactionStatus.COMPLETED&&masterData.SelectedTrainingCertificate.ntransactionstatus!==transactionStatus.CANCELLED){dispatch(initRequest(true));var obj=convertDateValuetoString(masterData.SelectedTrainingCertificate.strainingdatetime?masterData.SelectedTrainingCertificate.strainingdatetime:new Date(),masterData.SelectedTrainingCertificate.strainingdatetime?masterData.SelectedTrainingCertificate.strainingdatetime:new Date(),userInfo);masterData.SelectedTrainingCertificate.stemptrainingdatetime=obj.toDate+\"Z\";var objdate=convertDateValuetoString(masterData.FromDate,masterData.ToDate,userInfo);var fromDate=objdate.fromDate;var toDate=objdate.toDate;rsapi.post(\"trainingcertificate/validateConductAndTrainingDate\",{\"trainingcertificate\":masterData.SelectedTrainingCertificate,\"fromDate\":fromDate,\"toDate\":toDate,userinfo:userInfo}).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{operation:operation,screenName:screenName,ncontrolCode:ncontrolCode,loading:false}});//rsapi.post(\"trainingcertificate/getPeriod\",{userinfo:userInfo})\nrsapi.post(\"/period/getPeriodByControl\",{\"ncontrolcode\":ncontrolCode,\"userinfo\":userInfo}).then(function(response){var PeriodMap=constructOptionList(response.data||[],\"nperiodcode\",\"speriodname\",undefined,undefined,true);var periodList=PeriodMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{period:periodList,openModal:true,operation:operation,screenName:screenName,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{if(masterData.SelectedTrainingCertificate.ntransactionstatus===transactionStatus.CONDUCTED){toast.warn(intl.formatMessage({id:\"IDS_TESTTRAININGALREADYCONDUCTED\"}));}if(masterData.SelectedTrainingCertificate.ntransactionstatus===transactionStatus.COMPLETED){toast.warn(intl.formatMessage({id:\"IDS_TESTTRAININGALREADYCOMPLETED\"}));}if(masterData.SelectedTrainingCertificate.ntransactionstatus===transactionStatus.CANCELLED){toast.warn(intl.formatMessage({id:\"IDS_TESTTRAININGALREADYCANCELLED\"}));}}};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/TrainingCertificateAction.js"],"names":["rsapi","DEFAULT_RETURN","sortData","constructOptionList","convertDateValuetoString","rearrangeDateFormat","toast","Axios","initRequest","intl","transactionStatus","getTrainingCertificateDetail","trainingcertificate","fromDate","toDate","userInfo","masterData","dispatch","post","ntrainingcode","then","response","data","type","payload","loading","catch","error","status","formatMessage","id","message","warn","getTrainingCertificateComboService","screenName","operation","primaryKeyName","primaryKeyValue","ncontrolCode","trainingcategoryService","userinfo","techniqueService","timeZoneService","UTCtimeZoneService","urlArray","trainingcertificateServiceById","push","trainingparticipantsById","all","index","TrainingParticipants","findIndex","item","ntransactionstatus","INVITED","selectedRecord","ntimezonecode","stimezoneid","techniqueMap","undefined","trainingcategoryMap","timeZoneMap","trainingcategoryList","get","techniqueList","timeZoneList","currentTime","strainingdatetime","ntrainingcategorycode","strainingcategoryname","ntechniquecode","stechniquename","ntztrainingdate","ACTIVE","openModal","getTrainingParticipantsComboDataService","trainingparam","SelectedTrainingCertificate","CANCELLED","section","selectedId","spread","nsectioncode","nsitecode","sectionusersList","SectionMap","sectionList","sectionUsers","openChildModal","reloadTrainingCertificate","inputParam","inputData","responseData","searchRef","current","value","showFilter","getSectionUsersDataService","nSectionCode","parseInt","nusercode","SectionUsers","getTrainingParticipantsInvite","inviteUsersList","InvitedParticipants","usersStatus","nFlag","getTrainingParticipantsCancel","cancelUsersList","CancelParticipants","rescheduleTrainingCertificate","getAddValidityExpiry","CONDUCTED","COMPLETED","obj","Date","stemptrainingdatetime","objdate","FromDate","ToDate","PeriodMap","periodList","period"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { sortData, constructOptionList,convertDateValuetoString, rearrangeDateFormat } from '../components/CommonScript'//, getComboLabelValue, searchData\r\nimport { toast } from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\nimport { transactionStatus } from '../components/Enumeration';\r\n\r\nexport function getTrainingCertificateDetail(trainingcertificate, fromDate, toDate, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n\r\n        return rsapi.post(\"trainingcertificate/getTrainingCertificate\", {\r\n            ntrainingcode: trainingcertificate.ntrainingcode, fromDate, toDate,\r\n            \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { masterData, loading: false } });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n\r\n                    toast.warn(intl.formatMessage({ id: error.response }));\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTrainingCertificateComboService(screenName, operation, primaryKeyName, primaryKeyValue, masterData, userInfo, ncontrolCode) {\r\n    return function (dispatch) {\r\n        if (operation === \"create\" || (operation === \"update\" || operation === \"reschedule\")) {\r\n\r\n            const trainingcategoryService = rsapi.post(\"traningcategory/getTrainingCategory\", { userinfo: userInfo });\r\n            const techniqueService = rsapi.post(\"trainingcertificate/getTechnique\", { userinfo: userInfo });\r\n            const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n            const UTCtimeZoneService = rsapi.post(\"timezone/getLocalTimeByZone\", { userinfo: userInfo });\r\n            let urlArray = [techniqueService, trainingcategoryService, timeZoneService, UTCtimeZoneService];\r\n            if (operation === \"update\" || operation === \"reschedule\") {\r\n\r\n                const trainingcertificateServiceById = rsapi.post(\"trainingcertificate/getActiveTrainingCertificateById\", { [primaryKeyName]: primaryKeyValue, \"userinfo\": userInfo });//this.props.Login.userInfo\r\n                urlArray.push(trainingcertificateServiceById)\r\n                const trainingparticipantsById = rsapi.post(\"trainingcertificate/getTrainingParticipants\", { [primaryKeyName]: primaryKeyValue, \"userinfo\": userInfo });//this.props.Login.userInfo\r\n                urlArray.push(trainingparticipantsById)\r\n            }\r\n\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                let status = true;\r\n                let index ;\r\n                if(operation === \"update\" || operation === \"reschedule\"){\r\n                     index = response[5].data.TrainingParticipants.findIndex( item => \r\n                       (item.ntransactionstatus === transactionStatus.INVITED) \r\n                      );\r\n                    if(index !== -1){\r\n                      status = operation === \"update\" ? false :  true;\r\n                    } else{\r\n                        status = operation === \"reschedule\" ? false : true;\r\n                    }\r\n                }\r\n              \r\n                    if(status === true){\r\n\r\n                    let selectedRecord = {\r\n                        \"ntztrainingdate\": {\r\n                            \"value\": userInfo.ntimezonecode,\r\n                            \"label\": userInfo.stimezoneid\r\n                        },\r\n                        \"stztrainingdate\": userInfo.stimezoneid\r\n                    };\r\n\r\n                    const techniqueMap = constructOptionList(response[0].data || [], \"ntechniquecode\",\r\n                        \"stechniquename\", undefined, undefined, true);\r\n                    const trainingcategoryMap = constructOptionList(response[1].data || [], \"ntrainingcategorycode\",\r\n                        \"strainingcategoryname\", undefined, undefined, true);\r\n                    const timeZoneMap = constructOptionList(response[2].data || [], \"ntimezonecode\",\r\n                        \"stimezoneid\", undefined, undefined, true);\r\n                    const trainingcategoryList = trainingcategoryMap.get(\"OptionList\");\r\n                    const techniqueList = techniqueMap.get(\"OptionList\");\r\n                    const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                    const currentTime = rearrangeDateFormat(userInfo, response[3].data);\r\n                    if (operation === \"update\" || operation === \"reschedule\") {\r\n                        selectedRecord = response[4].data;\r\n\r\n                        selectedRecord[\"dtrainingdatetime\"] = rearrangeDateFormat(userInfo, response[4].data.strainingdatetime)\r\n                        selectedRecord[\"ntrainingcategorycode\"] = { \"value\": response[4].data.ntrainingcategorycode, \"label\": response[4].data.strainingcategoryname };\r\n                        selectedRecord[\"ntechniquecode\"] = { \"value\": response[4].data.ntechniquecode, \"label\": response[4].data.stechniquename };\r\n                        selectedRecord[\"ntztrainingdate\"] = { \"value\": response[4].data.ntztrainingdate, \"label\": response[4].data.stimezoneid };\r\n                    }\r\n                    else {\r\n                        selectedRecord[\"ntransactionstatus\"] = transactionStatus.ACTIVE;\r\n                        selectedRecord[\"ntrainingcategorycode\"] = trainingcategoryMap.get(\"DefaultValue\");\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            currentTime,\r\n                            trainingcategoryList, techniqueList, timeZoneList,\r\n                            operation, screenName, selectedRecord, openModal: true,\r\n                            ncontrolCode, loading: false\r\n                        }\r\n                    });\r\n                }\r\n                else{\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    toast.warn(intl.formatMessage({ id: (operation === \"update\" ? \"IDS_INVITEDPARTICIPANTSCANNOTBEEDITED\" : \"IDS_INVITEPARTICIPANTS\")}));\r\n                }\r\n            }\r\n            )\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({ id: error.message }));\r\n                    }\r\n                    else {\r\n\r\n                        toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                    }\r\n                })\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nexport function getTrainingParticipantsComboDataService(trainingparam, masterData) {\r\n    return function (dispatch) {\r\n\r\n        if (masterData.SelectedTrainingCertificate.ntransactionstatus !== transactionStatus.CANCELLED) {\r\n\r\n            const section = rsapi.post(\"section/getSection\", { \"userinfo\": trainingparam.userInfo });\r\n\r\n            let urlArray = [];\r\n\r\n            let selectedId = null;\r\n\r\n            urlArray = [section];\r\n\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(Axios.spread((...response) => {\r\n\r\n                    let selectedRecord = {};\r\n                    let nsectioncode = [];\r\n                    let nsitecode = [];\r\n\r\n                    let sectionusersList = [];\r\n\r\n                    const SectionMap = constructOptionList(response[0].data || [], \"nsectioncode\",\r\n                        \"ssectionname\", undefined, undefined, true);\r\n\r\n                    const sectionList = SectionMap.get(\"OptionList\");\r\n\r\n\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            section: sectionList, sectionUsers: trainingparam.operation === \"update\" ? sectionusersList : [],\r\n                            nsectioncode: nsectioncode, nsitecode: nsitecode,\r\n                            selectedRecord: trainingparam.operation === \"update\" ? selectedRecord : undefined, operation: trainingparam.operation,\r\n                            screenName: \"IDS_PARTICIPANTSDETAILS\",\r\n                            openChildModal: true, ncontrolCode: trainingparam.ncontrolCode,\r\n                            loading: false, selectedId\r\n                        }\r\n                    });\r\n                }))\r\n\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({ id: error.message }));\r\n                    }\r\n                    else {\r\n                        toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n\r\n            toast.warn(intl.formatMessage({ id: \"IDS_TRAININGCANCELED\" }));\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport function reloadTrainingCertificate(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"trainingcertificate/getTrainingCertificate\", { ...inputParam.inputData })\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                let masterData = {\r\n                    ...inputParam.masterData,\r\n                    ...responseData,\r\n                }\r\n                if (inputParam.searchRef !== undefined && inputParam.searchRef.current !== null) {\r\n                    inputParam.searchRef.current.value = \"\";\r\n                    masterData['searchedData'] = undefined\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getSectionUsersDataService(nSectionCode, selectedRecord, userInfo, SelectedTrainingCertificate) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"trainingcertificate/getSectionUsers\", { \"userinfo\": userInfo, \"nsectioncode\": parseInt(nSectionCode), \"ntrainingcode\": parseInt(SelectedTrainingCertificate) })\r\n            .then(response => {\r\n\r\n                let nusercode = [];\r\n\r\n                // const sectionusersMap = constructOptionList(response.data.SectionUsers || [], \"nusercode\",\r\n                //     \"sfullname\", undefined, undefined, true);\r\n\r\n                const sectionusersList = response.data.SectionUsers;\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        sectionUsers: sectionusersList, nusercode: nusercode, selectedRecord, loading: false\r\n                    }\r\n                });\r\n\r\n            }).catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n\r\n            })\r\n    }\r\n}\r\nexport function getTrainingParticipantsInvite(trainingparam, selectedRecord, masterData, operation) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"trainingcertificate/getInviteParticipants\", { \"userinfo\": trainingparam.userInfo, \"ntrainingcode\": parseInt(masterData.SelectedTrainingCertificate.ntrainingcode) })\r\n            .then(response => {\r\n\r\n                let nusercode = [];\r\n\r\n                // const inviteUsersMap = constructOptionList(response.data.InvitedParticipants || [], \"nusercode\",\r\n                //     \"sfullname\", undefined, undefined, true);\r\n\r\n                // const inviteUsersList = inviteUsersMap.get(\"OptionList\");\r\n                const inviteUsersList = response.data.InvitedParticipants;\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        usersStatus: inviteUsersList, nusercode: nusercode, loading: false, openChildModal: true,\r\n                        screenName: \"IDS_INVITEDPARTICIPANTSDETAILS\", nFlag: 2, selectedRecord: selectedRecord, operation: operation\r\n                    }\r\n                });\r\n\r\n\r\n\r\n            }).catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getTrainingParticipantsCancel(trainingparam, selectedRecord, masterData, operation) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"trainingcertificate/getCancelParticipants\", { \"userinfo\": trainingparam.userInfo, \"ntrainingcode\": parseInt(masterData.SelectedTrainingCertificate.ntrainingcode) })\r\n            .then(response => {\r\n\r\n                let nusercode = [];\r\n\r\n                // const cancelUsersMap = constructOptionList(response.data.CancelParticipants || [], \"nusercode\",\r\n                //     \"sfullname\", undefined, undefined, true);\r\n\r\n                const cancelUsersList = response.data.CancelParticipants;\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        usersStatus: cancelUsersList, nusercode: nusercode, loading: false, openChildModal: true,\r\n                        screenName: \"IDS_CANCELPARTICIPANTSDETAILS\", nFlag: 3, selectedRecord: selectedRecord, operation: operation\r\n                    }\r\n                });\r\n\r\n            }).catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function rescheduleTrainingCertificate(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"trainingcertificate/rescheduleTrainingCertificate\", { ...inputParam.inputData })\r\n            .then(response => {\r\n                let masterData = { ...response.data }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        openModal: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getAddValidityExpiry(screenName, operation, masterData, userInfo, ncontrolCode){\r\n    return function (dispatch) {    \r\n        //if (masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.DRAFT){     \r\n            if (masterData.SelectedTrainingCertificate.ntransactionstatus !== transactionStatus.CONDUCTED &&\r\n                masterData.SelectedTrainingCertificate.ntransactionstatus !== transactionStatus.COMPLETED &&\r\n                masterData.SelectedTrainingCertificate.ntransactionstatus !== transactionStatus.CANCELLED) {\r\n        dispatch(initRequest(true));\r\n        \r\n\r\n        let obj= convertDateValuetoString(masterData.SelectedTrainingCertificate.strainingdatetime ? masterData.SelectedTrainingCertificate.strainingdatetime: new Date(),masterData.SelectedTrainingCertificate.strainingdatetime ? masterData.SelectedTrainingCertificate.strainingdatetime : new Date(),userInfo);\r\n        masterData.SelectedTrainingCertificate.stemptrainingdatetime=obj.toDate+\"Z\";\r\n        \r\n        let objdate = convertDateValuetoString(masterData.FromDate, masterData.ToDate, userInfo);\r\n\r\n        let fromDate = objdate.fromDate;\r\n        let toDate = objdate.toDate;\r\n       \r\n\r\n        rsapi.post(\"trainingcertificate/validateConductAndTrainingDate\",{\"trainingcertificate\":masterData.SelectedTrainingCertificate, \r\n        \"fromDate\":fromDate,\"toDate\":toDate,userinfo:userInfo})\r\n        \r\n        .then(response=>{\r\n        \r\n        \r\n            dispatch({type: DEFAULT_RETURN, payload:{\r\n                operation, screenName, ncontrolCode,\r\n                \r\n                loading:false}});\r\n\r\n                //rsapi.post(\"trainingcertificate/getPeriod\",{userinfo:userInfo})\r\n                rsapi.post(\"/period/getPeriodByControl\", {\r\n                    \"ncontrolcode\": ncontrolCode,\r\n                    \"userinfo\": userInfo\r\n                })\r\n    \r\n            .then(response=>{\r\n                                      \r\n                \r\n                const PeriodMap = constructOptionList(response.data || [], \"nperiodcode\",\r\n                        \"speriodname\", undefined, undefined, true);\r\n\r\n                    const periodList = PeriodMap.get(\"OptionList\");\r\n\r\n                    dispatch({type: DEFAULT_RETURN, payload:{\r\n                                                            period:periodList,\r\n                                                           \r\n                                                            openModal:true,\r\n                                                            operation, screenName, ncontrolCode,\r\n                                                            \r\n                                                            loading:false}});\r\n                })\r\n                .catch(error=>{\r\n                    dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n                    if (error.response.status === 500){\r\n                        toast.error(error.message);\r\n                    } \r\n                    else{               \r\n                        toast.warn(error.response.data);\r\n                    }      \r\n                })\r\n            })\r\n            .catch(error=>{\r\n                dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n                if (error.response.status === 500){\r\n                    toast.error(error.message);\r\n                } \r\n                else{               \r\n                    toast.warn(error.response.data);\r\n                }      \r\n            })\r\n            }\r\n            else\r\n            {\r\n                if(masterData.SelectedTrainingCertificate.ntransactionstatus === transactionStatus.CONDUCTED)\r\n                {\r\n                   toast.warn(intl.formatMessage({id: \"IDS_TESTTRAININGALREADYCONDUCTED\"}));\r\n                }\r\n                if(masterData.SelectedTrainingCertificate.ntransactionstatus === transactionStatus.COMPLETED)\r\n                {\r\n                   toast.warn(intl.formatMessage({id: \"IDS_TESTTRAININGALREADYCOMPLETED\"}));\r\n                }\r\n                if(masterData.SelectedTrainingCertificate.ntransactionstatus === transactionStatus.CANCELLED)\r\n                {\r\n                   toast.warn(intl.formatMessage({id: \"IDS_TESTTRAININGALREADYCANCELLED\"}));\r\n                }\r\n            }\r\n              }}\r\n    \r\n               \r\n          \r\n\r\n    \r\n         \r\n    \r\n\r\n"]},"metadata":{},"sourceType":"module"}