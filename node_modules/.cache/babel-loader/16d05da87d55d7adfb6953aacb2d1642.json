{"ast":null,"code":"import rsapi from '../rsapi';\nimport { DEFAULT_RETURN } from './LoginTypes';\nimport { toast } from 'react-toastify';\nimport { initRequest } from './LoginAction';\nimport { constructOptionList, replaceUpdatedObject, sortData, fillRecordBasedOnCheckBoxSelection, getSameRecordFromTwoArrays, getRecordBasedOnPrimaryKeyName, filterRecordBasedOnPrimaryKeyName, reArrangeArrays, rearrangeDateFormat } from '../components/CommonScript';\nimport { postCRUDOrganiseTransSearch } from './ServiceAction';\nexport function getRegTypeJobAllocation(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/getRegistrationTypeBySampleType\", inputData).then(response => {\n      let responseData = { ...response.data\n      };\n      responseData = sortData(responseData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...responseData,\n            defaultSampleTypeValue: inputData.defaultSampleTypeValue\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getRegSubTypeJobAllocation(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/getRegistrationsubTypeByRegType\", inputData).then(response => {\n      let responseData = { ...response.data\n      };\n      responseData = sortData(responseData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...responseData,\n            defaultRegTypeValue: inputData.defaultRegTypeValue\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getAppConfigVersionJobAllocation(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/getApprovalConfigVersionByRegSubType\", inputParam.inputData).then(response => {\n      let responseData = { ...response.data\n      };\n      responseData = sortData(responseData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputParam.masterData,\n            ...responseData,\n            defaultRegSubTypeValue: inputParam.masterData.defaultRegSubTypeValue,\n            RegSubTypeValue: inputParam.masterData.realRegSubTypeValue\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getSectionJobAllocation(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/getTestComboBySection\", inputData).then(response => {\n      let responseData = { ...response.data\n      };\n      responseData = sortData(responseData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...responseData,\n            defaultUserSectionValue: inputData.masterData.defaultUserSectionValue\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getFilterStatusJobAllocation(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/getTestComboBySection\", inputData).then(response => {\n      let responseData = { ...response.data\n      };\n      responseData = sortData(responseData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...responseData,\n            defaultFilterStatusValue: inputData.masterData.defaultFilterStatusValue\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getTestStatusJobAllocation(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/getFilterStatusByApproveVersion\", inputData).then(response => {\n      let responseData = { ...response.data\n      };\n      responseData = sortData(responseData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...responseData,\n            RegSubTypeValue: inputData.RegSubTypeValue\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getJobAllcationFilterSubmit(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/getJobAllocationDetails\", inputParam.inputData).then(response => {\n      let responseData = { ...response.data\n      }; // responseData = sortData(responseData)\n\n      let masterData = { ...inputParam.masterData,\n        ...responseData\n      };\n\n      if (inputParam.searchSampleRef !== undefined && inputParam.searchSampleRef.current !== null) {\n        inputParam.searchSampleRef.current.value = \"\";\n        masterData['searchedSample'] = undefined;\n      }\n\n      if (inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null) {\n        inputParam.searchSubSampleRef.current.value = \"\";\n        masterData['searchedSubSample'] = undefined;\n      }\n\n      if (inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null) {\n        inputParam.searchTestRef.current.value = \"\";\n        masterData['searchedTest'] = undefined; // masterData['searchedTests'] = undefined\n      }\n\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          showTest: inputParam.inputData.showTest,\n          activeTestTab: inputParam.inputData.activeTestTab,\n          showFilter: false,\n          skip: 0,\n          take: inputParam.take,\n          testskip: 0,\n          testtake: inputParam.testtake,\n          documentDataState: { ...inputParam.documentDataState,\n            sort: undefined,\n            filter: undefined\n          },\n          testCommentDataState: { ...inputParam.testCommentDataState,\n            sort: undefined,\n            filter: undefined\n          }\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function ReceiveinLabStatusWise(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/CreateReceiveinLab\", inputParam.inputData).then(response => {\n      if (response.data.rtn === undefined || response.data.rtn === \"Success\") {\n        replaceUpdatedObject(response.data[\"JA_SAMPLE\"], inputParam.inputData.masterData.JA_SAMPLE, \"npreregno\");\n        replaceUpdatedObject(response.data[\"JA_SUBSAMPLE\"], inputParam.inputData.masterData.JA_SUBSAMPLE, \"ntransactionsamplecode\");\n        replaceUpdatedObject(response.data[\"JA_TEST\"], inputParam.inputData.masterData.JA_TEST, \"ntransactiontestcode\");\n        delete response.data[\"JA_SAMPLE\"];\n        delete response.data[\"JA_SUBSAMPLE\"];\n        delete response.data[\"JA_TEST\"];\n        let masterData = { ...inputParam.inputData.masterData,\n          ...response.data,\n          JASelectedSample: replaceUpdatedObject(response.data[\"JASelectedSample\"], inputParam.inputData.masterData.JASelectedSample, \"npreregno\"),\n          JASelectedSubSample: replaceUpdatedObject(response.data[\"JASelectedSubSample\"], inputParam.inputData.masterData.JASelectedSubSample, \"ntransactionsamplecode\"),\n          JASelectedTest: replaceUpdatedObject(response.data[\"JASelectedTest\"], inputParam.inputData.masterData.JASelectedTest, \"ntransactiontestcode\")\n        };\n        let respObject = {\n          masterData,\n          ...inputParam.inputData,\n          loading: false,\n          loadEsign: false,\n          openModal: false,\n          showSample: undefined\n        };\n        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false,\n            openModal: false\n          }\n        });\n        toast.warn(response.data.rtn);\n      }\n    }).catch(error => {\n      toast.error(error.message);\n    });\n  };\n}\nexport function getAllottedTestWise(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/getAllotDetails\", inputParam.inputData).then(response => {\n      const TechniqueMap = constructOptionList(response.data.Technique || [], \"ntechniquecode\", \"stechniquename\", undefined, undefined, false);\n      const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\", \"susername\", undefined, undefined, false);\n      const UsersPeriodMap = constructOptionList(response.data.Period || [], \"nuserperiodcode\", \"speriodname\", undefined, undefined, false);\n      const InstrumentCategoryMap = constructOptionList(response.data.InstrumentCategory || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", undefined, undefined, false);\n      const InstrumentMap = constructOptionList(response.data.Instrument || [], \"ninstrumentcode\", \"sinstrumentid\", undefined, undefined, false);\n      const InstrumentPeriodMap = constructOptionList(response.data.Period || [], \"ninstrumentperiodcode\", \"speriodname\", undefined, undefined, false);\n      const currentTime = rearrangeDateFormat(inputParam.inputData.userinfo, response.data.CurrentTime.body);\n      const Technique = TechniqueMap.get(\"OptionList\");\n      const Users = UsersMap.get(\"OptionList\");\n      const UsersPeriod = UsersPeriodMap.get(\"OptionList\");\n      const InstrumentCategory = InstrumentCategoryMap.get(\"OptionList\");\n      const Instrument = InstrumentMap.get(\"OptionList\");\n      const InstrumentPeriod = InstrumentPeriodMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Technique,\n          Users,\n          UsersPeriod,\n          InstrumentCategory,\n          Instrument,\n          InstrumentPeriod,\n          currentTime,\n          isOpen: true,\n          operation: inputParam.inputData.operation,\n          screenName: inputParam.inputData.screenName,\n          openModal: true,\n          ncontrolCode: inputParam.inputData.ncontrolcode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getAllotAnotherUserTestWise(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/getAllotAnotherUserDetails\", inputParam.inputData).then(response => {\n      const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\", \"susername\", undefined, undefined, false);\n      const UsersPeriodMap = constructOptionList(response.data.Period || [], \"nuserperiodcode\", \"speriodname\", undefined, undefined, false);\n      const Users = UsersMap.get(\"OptionList\");\n      const UsersPeriod = UsersPeriodMap.get(\"OptionList\");\n      const currentTime = rearrangeDateFormat(inputParam.inputData.userinfo, response.data.CurrentTime.body);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Users,\n          UsersPeriod,\n          currentTime,\n          isOpen: true,\n          operation: inputParam.inputData.operation,\n          screenName: inputParam.inputData.screenName,\n          openModal: true,\n          ncontrolCode: inputParam.inputData.ncontrolcode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getRescheduleTestWise(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/getRescheduledDetails\", inputParam.inputData).then(response => {\n      // const TechniqueMap = constructOptionList(response.data.Technique || [], \"ntechniquecode\",\n      //  \"stechniquename\", 'ntechniquecode', 'ascending', false);    \n      const TechniqueMap = constructOptionList(response.data.Technique || [], \"ntechniquecode\", \"stechniquename\", undefined, undefined, false);\n      const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\", \"susername\", undefined, undefined, false);\n      const UsersPeriodMap = constructOptionList(response.data.Period || [], \"nuserperiodcode\", \"speriodname\", undefined, undefined, false);\n      const InstrumentCategoryMap = constructOptionList(response.data.InstrumentCategory || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", undefined, undefined, false);\n      const InstrumentMap = constructOptionList(response.data.Instrument || [], \"ninstrumentcode\", \"sinstrumentid\", undefined, undefined, false);\n      const InstrumentPeriodMap = constructOptionList(response.data.Period || [], \"ninstrumentperiodcode\", \"speriodname\", undefined, undefined, false);\n      const currentTime = rearrangeDateFormat(inputParam.inputData.userinfo, response.data.CurrentTime.body);\n      const Technique = TechniqueMap.get(\"OptionList\");\n      const Users = UsersMap.get(\"OptionList\");\n      const UsersPeriod = UsersPeriodMap.get(\"OptionList\");\n      const InstrumentCategory = InstrumentCategoryMap.get(\"OptionList\");\n      const Instrument = InstrumentMap.get(\"OptionList\");\n      const InstrumentPeriod = InstrumentPeriodMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Technique,\n          Users,\n          UsersPeriod,\n          InstrumentCategory,\n          Instrument,\n          InstrumentPeriod,\n          currentTime,\n          isOpen: true,\n          operation: inputParam.inputData.operation,\n          screenName: inputParam.inputData.screenName,\n          openModal: true,\n          ncontrolCode: inputParam.inputData.ncontrolcode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getInstrument(ninstrumentcatcode, ncalibrationreq, userInfo, selectedRecord) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"joballocation/getInstrumentBasedCategory\", {\n      \"ninstrumentcatcode\": ninstrumentcatcode,\n      \"ncalibrationreq\": ncalibrationreq,\n      \"userinfo\": userInfo\n    }).then(response => {\n      let Instrument = [];\n      const InstrumentMap = constructOptionList(response.data.Instrument || [], \"ninstrumentcode\", \"sinstrumentid\", undefined, undefined, false);\n      Instrument = InstrumentMap.get(\"OptionList\"); //selectedRecord[\"ninstrumentcode\"] = undefined;\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Instrument,\n          selectedRecord,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getUsers(ntechniquecode, JASelectedTest, userInfo, selectedRecord) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"joballocation/getUsersBasedTechnique\", {\n      \"ntechniquecode\": ntechniquecode,\n      \"ssectioncode\": JASelectedTest.JASelectedSample ? JASelectedTest.JASelectedSample.map(sample => sample.nsectioncode).join(\",\") : \"\",\n      \"nregtypecode\": JASelectedTest.realRegTypeValue.nregtypecode,\n      \"nregsubtypecode\": JASelectedTest.realRegSubTypeValue.nregsubtypecode,\n      \"userinfo\": userInfo\n    }).then(response => {\n      let Users = [];\n      const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\", \"susername\", undefined, undefined, false);\n      Users = UsersMap.get(\"OptionList\"); //selectedRecord[\"ninstrumentcode\"] = undefined;\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Users,\n          selectedRecord,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function ViewAnalystCalendar(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/viewAnalystCalendar\", inputParam.inputData).then(response => {\n      let masterData = { ...inputParam.inputData.masterData,\n        ...response.data\n      };\n      let Users = [];\n      const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\", \"susername\", undefined, undefined, false);\n      Users = UsersMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Users,\n          screenName: inputParam.inputData.screenName,\n          loading: false,\n          openModal: true,\n          masterData\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function CancelTestWise(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"joballocation/CancelTest\", inputParam.inputData).then(response => {\n      if (response.data.rtn === undefined || response.data.rtn === \"Success\") {\n        replaceUpdatedObject(response.data[\"JA_TEST\"], inputParam.inputData.masterData.JA_TEST, \"ntransactiontestcode\");\n        delete response.data[\"JA_TEST\"];\n        let masterData = { ...inputParam.inputData.masterData,\n          ...response.data,\n          JASelectedTest: replaceUpdatedObject(response.data[\"JASelectedTest\"], inputParam.inputData.masterData.JASelectedTest, \"ntransactiontestcode\")\n        };\n        let respObject = {\n          masterData,\n          ...inputParam.inputData,\n          loading: false,\n          loadEsign: false,\n          openModal: false,\n          showSample: undefined\n        };\n        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false,\n            openModal: false\n          }\n        });\n        toast.warn(response.data.rtn);\n      }\n    }).catch(error => {\n      toast.error(error.message);\n    });\n  };\n}\nexport function getJobAllocationSubSampleDetail(inputData, isServiceRequired) {\n  return function (dispatch) {\n    let inputParamData = {\n      nsampletypecode: inputData.nsampletypecode,\n      nregtypecode: inputData.nregtypecode,\n      nregsubtypecode: inputData.nregsubtypecode,\n      npreregno: inputData.JASelectedSample && inputData.JASelectedSample.map(sample => sample.npreregno).join(\",\"),\n      ssectioncode: inputData.JASelectedSample && inputData.JASelectedSample.map(sample => sample.nsectioncode).join(\",\"),\n      ntranscode: String(inputData.ntransactionstatus),\n      ntransactiontestcode: 0,\n      userinfo: inputData.userinfo,\n      ntestcode: inputData.ntestcode,\n      napprovalversioncode: inputData.napprovalversioncode,\n      fromdate: inputData.fromdate,\n      todate: inputData.todate,\n      activeTestKey: inputData.activeTestKey,\n      activeSampleKey: inputData.activeSampleKey,\n      activeSubSampleKey: inputData.activeSubSampleKey,\n      nneedsubsample: inputData.masterData.realRegSubTypeValue.nneedsubsample,\n      ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n      nneedtemplatebasedflow: inputData.masterData.realRegSubTypeValue.nneedtemplatebasedflow,\n      checkBoxOperation: inputData.checkBoxOperation\n    };\n    let activeName = \"\";\n    let dataStateName = \"\";\n    dispatch(initRequest(true));\n\n    if (isServiceRequired) {\n      rsapi.post(\"joballocation/getJobAllocationSubSampleDetails\", { ...inputParamData,\n        checkBoxOperation: inputData.checkBoxOperation\n      }).then(response => {\n        sortData(response.data);\n        let oldSelectedTest = inputData.masterData.JASelectedTest;\n        inputData.masterData.JA_SUBSAMPLE = response.data.JA_SUBSAMPLE;\n        inputData.masterData.JASelectedSubSample = response.data.JASelectedSubSample;\n        inputData.masterData.JA_TEST = response.data.JA_TEST;\n        inputData.masterData.JASelectedTest = response.data.JASelectedTest;\n        inputData.masterData.RegistrationAttachment = response.data.RegistrationAttachment;\n        inputData.masterData.RegistrationSampleAttachment = response.data.RegistrationSampleAttachment;\n        inputData.masterData.RegistrationComment = response.data.RegistrationComment;\n        inputData.masterData.RegistrationSampleComment = response.data.RegistrationSampleComment; //  fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"nregistrationsectioncode\", inputData.removeElementFromArray);\n        //  let JASelectedSubSample = inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 7 ? response.data.JASelectedSubSample : inputData.masterData.JASelectedSubSample\n        //  JASelectedSubSample = inputData.masterData.realRegSubTypeValue.nneedsubsample ? JASelectedSubSample : inputData.masterData.JA_SUBSAMPLE;\n\n        let masterData = { ...inputData.masterData,\n          JASelectedTest: inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [],\n          JASelectedSample: inputData.JASelectedSample //JASelectedSubSample\n\n        };\n\n        if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n          inputData.searchSubSampleRef.current.value = \"\";\n          masterData['searchedSubSample'] = undefined;\n        }\n\n        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n          inputData.searchTestRef.current.value = \"\";\n          masterData['searchedTest'] = undefined;\n        }\n\n        let {\n          testskip,\n          testtake\n        } = inputData;\n        let bool = false;\n        let skipInfo = {};\n\n        if (inputData.masterData.JA_TEST.length <= inputData.testskip) {\n          testskip = 0;\n          bool = true;\n        }\n\n        if (bool) {\n          skipInfo = {\n            testskip,\n            testtake\n          };\n        }\n\n        let RegistrationTestAttachment = [];\n        let RegistrationTestComment = [];\n        let RegistrationComment = [];\n        let RegistrationSampleAttachment = [];\n\n        if (inputData.checkBoxOperation === 1) {\n          //added by sudharshanan for test select issue while sample click\n          let wholeTestList = masterData.JA_TEST.map(b => b.ntransactiontestcode);\n          oldSelectedTest.map((test, index) => {\n            if (!wholeTestList.includes(test.ntransactiontestcode)) {\n              oldSelectedTest.splice(index, 1);\n            }\n\n            return null;\n          });\n          let keepOld = false;\n          let ntransactiontestcode;\n          let npreregno;\n\n          if (oldSelectedTest.length > 0) {\n            keepOld = true;\n            masterData = { ...masterData,\n              JASelectedTest: oldSelectedTest\n            };\n          } else {\n            ntransactiontestcode = masterData.JASelectedTest[0].ntransactiontestcode;\n            npreregno = masterData.JASelectedSample[0].npreregno;\n          }\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_TESTATTACHMENTS\":\n              RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testAttachmentDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            default:\n              RegistrationComment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"npreregno\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \" testAttachmentDataState\";\n              break;\n          }\n        } else if (inputData.checkBoxOperation === 5) {\n          let list = [];\n          let dbData = [];\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_TESTATTACHMENTS\":\n              dbData = response.data.RegistrationTestAttachment || [];\n              list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              dbData = response.data.RegistrationTestComment || [];\n              list = [...inputData.masterData.RegistrationTestComment, ...dbData];\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_SAMPLECOMMENTS\":\n              dbData = response.data.RegistrationComment || [];\n              list = [...inputData.masterData.RegistrationComment, ...dbData];\n              RegistrationComment = getRecordBasedOnPrimaryKeyName(list, inputData.JASelectedSample.length > 0 ? inputData.JASelectedSample[0].npreregno : \"\", \"npreregno\");\n              break;\n\n            default:\n              dbData = response.data.RegistrationTestAttachment || [];\n              list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n          }\n        } else if (inputData.checkBoxOperation === 7) {\n          let list = [];\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_TESTATTACHMENTS\":\n              list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testAttachmentDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n              break;\n\n            case \"IDS_SAMPLECOMMENTS\":\n              RegistrationComment = response.data.RegistrationComment ? [...response.data.RegistrationComment] : [];\n              activeName = \"RegistrationComment\";\n              dataStateName = \"sampleCommentsDataState\";\n              break;\n\n            default:\n              list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testAttachmentDataState\";\n              break;\n          }\n        } else {\n          let list = [];\n\n          if (!inputData.masterData.realRegSubTypeValue.nneedsubsample) {\n            let wholeTestList = masterData.JA_TEST.map(b => b.ntransactiontestcode);\n            oldSelectedTest.map((test, index) => {\n              if (!wholeTestList.includes(test.ntransactiontestcode)) {\n                oldSelectedTest.splice(index, 1);\n              }\n\n              return null;\n            });\n            let keepOld = false;\n            let ntransactiontestcode;\n\n            if (oldSelectedTest.length > 0) {\n              keepOld = true;\n              masterData = { ...masterData,\n                JASelectedTest: oldSelectedTest\n              };\n            } else {\n              ntransactiontestcode = masterData.JASelectedTest[0].ntransactiontestcode;\n            }\n          }\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_TESTATTACHMENTS\":\n              list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testAttachmentDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_SAMPLECOMMENTS\":\n              list = response.data.RegistrationComment ? sortData(response.data.RegistrationComment, 'descending', 'nregcommentcode') : [];\n              RegistrationComment = getRecordBasedOnPrimaryKeyName(list, inputData.JASelectedSample.length > 0 ? inputData.JASelectedSample[0].npreregno : \"\", \"npreregno\");\n              activeName = \"RegistrationComment\";\n              dataStateName = \"sampleChangeDataState\";\n              break;\n\n            default:\n              list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testAttachmentDataState\";\n              break;\n          }\n        }\n\n        masterData = { ...masterData,\n          RegistrationTestAttachment,\n          RegistrationTestComment,\n          RegistrationComment,\n          RegistrationSampleAttachment\n        };\n\n        if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            skip: undefined,\n            take: undefined,\n            ...skipInfo\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      let oldSelectedTest = inputData.masterData.JASelectedTest;\n      let oldSelectedSubSample = inputData.masterData.JASelectedSubSample;\n      let {\n        subsampletake,\n        subsampleskip\n      } = inputData;\n      let skipInfo = {};\n      let TestSelected = [];\n      let subSampleSelected = [];\n\n      if (inputData[\"statusNone\"]) {\n        TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n        subSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n      } else {\n        TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n        subSampleSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n      }\n\n      let isGrandChildGetRequired = false;\n\n      if (TestSelected.length > 0) {\n        isGrandChildGetRequired = false;\n      } else {\n        isGrandChildGetRequired = true;\n      }\n\n      fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.JASelectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n\n      if (isGrandChildGetRequired) {\n        let ntransactiontestcode = inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode.toString() : \"\";\n        let JASelectedSample = inputData.JASelectedSample;\n        let JASelectedTest = inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [];\n        let JASelectedSubSample = inputData.masterData.JA_SUBSAMPLE;\n\n        if (inputData.masterData.realRegSubTypeValue.nneedsubsample) {\n          let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.JA_SUBSAMPLE, \"ntransactionsamplecode\");\n          JASelectedSubSample = filterSelectedSubSample.length > 0 ? filterSelectedSubSample : [inputData.masterData.JA_SUBSAMPLE[0]];\n\n          if (inputData.masterData.JA_SUBSAMPLE.length <= inputData.subsampleskip) {\n            subsampleskip = 0;\n            skipInfo = {\n              subsampletake,\n              subsampleskip\n            };\n          }\n        }\n\n        let ntransactionsamplecode = JASelectedSubSample.map(subsample => subsample.ntransactionsamplecode).join(',');\n        let masterData = { ...inputData.masterData,\n          JASelectedSample,\n          JASelectedSubSample,\n          JASelectedTest\n        };\n        inputData = { ...inputData,\n          ntransactiontestcode,\n          ntransactionsamplecode,\n          JASelectedSample,\n          JASelectedTest,\n          JASelectedSubSample,\n          checkBoxOperation: 3,\n          activeTestKey: inputData.activeTestKey,\n          masterData\n        };\n\n        if (JASelectedTest.length > 0) {\n          inputData = { ...inputData,\n            childTabsKey: [\"RegistrationTestAttachment\", \"RegistrationTestComment\"]\n          };\n          dispatch(getTestChildTabDetailJobAllocation(inputData, true));\n        } else {\n          inputData = { ...inputData,\n            masterData,\n            childTabsKey: [\"JA_TEST\"]\n          };\n          dispatch(getJobAllocationTestDetail(inputData, true));\n        }\n      } else {\n        let masterData = { ...inputData.masterData,\n          JASelectedTest: TestSelected ? TestSelected : inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [],\n          JASelectedSample: inputData.JASelectedSample,\n          JASelectedSubSample: subSampleSelected ? subSampleSelected : inputData.masterData.JA_SUBSAMPLE.length > 0 ? [inputData.masterData.JA_SUBSAMPLE[0]] : []\n        };\n        let subsamplecheck = true;\n\n        if (inputData.masterData.realRegSubTypeValue.nneedsubsample) {\n          let SubSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n\n          if (SubSampleSelected.length > 0) {\n            let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.JA_SUBSAMPLE, \"ntransactionsamplecode\");\n\n            if (filterSelectedSubSample.length === 0) {\n              let wholeSubSample = masterData.JA_SUBSAMPLE.map(b => b.ntransactionsamplecode);\n              oldSelectedSubSample.forEach((test, index) => {\n                if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\n                  oldSelectedSubSample.splice(index, 1);\n                }\n\n                return null;\n              });\n\n              if (oldSelectedSubSample.length === 0 && wholeSubSample.length > 0 && masterData.selectedTest.length === 0) {\n                const selectedSubSample1 = [inputData.masterData.JA_SUBSAMPLE[0]];\n                masterData = { ...masterData,\n                  JASelectedSubSample: selectedSubSample1,\n                  selectedTest: []\n                };\n                inputData = { ...inputData,\n                  ...masterData\n                };\n                inputData[\"npreregno\"] = selectedSubSample1.map(x => x.npreregno).join(\",\");\n                inputData[\"ntransactionsamplecode\"] = selectedSubSample1.map(x => x.ntransactionsamplecode).join(\",\");\n                inputData[\"checkBoxOperation\"] = 3;\n                inputData[\"childTabsKey\"] = [\"JA_TEST\"];\n                subsamplecheck = false;\n                dispatch(getJobAllocationTestDetail(inputData, true));\n              }\n            } else {\n              oldSelectedSubSample = filterSelectedSubSample;\n            }\n          } else {\n            let wholeSubSample = masterData.JA_SUBSAMPLE.map(b => b.ntransactionsamplecode);\n            oldSelectedSubSample.forEach((test, index) => {\n              if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\n                oldSelectedSubSample.splice(index, 1);\n              }\n\n              return null;\n            });\n          }\n\n          if (subsamplecheck) {\n            masterData = { ...masterData,\n              JASelectedSubSample: oldSelectedSubSample\n            };\n          }\n\n          if (inputData.masterData.JA_SUBSAMPLE.length <= inputData.subsampleskip) {\n            subsampleskip = 0;\n            skipInfo = {\n              subsampleskip,\n              subsampletake\n            };\n          }\n        }\n\n        let wholeTestList = masterData.JA_TEST.map(b => b.ntransactiontestcode);\n        oldSelectedTest.map((test, index) => {\n          if (!wholeTestList.includes(test.ntransactiontestcode)) {\n            oldSelectedTest.splice(index, 1);\n          }\n\n          return null;\n        });\n        let keepOld = false;\n        let ntransactiontestcode;\n\n        if (oldSelectedTest.length > 0) {\n          keepOld = true;\n          masterData = { ...masterData,\n            JASelectedTest: oldSelectedTest\n          };\n        } else {\n          ntransactiontestcode = inputData.masterData.JA_TEST[0].ntransactiontestcode;\n        }\n\n        const RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment || [], ntransactiontestcode, \"ntransactiontestcode\");\n        let {\n          testskip,\n          testtake\n        } = inputData;\n        let bool = false;\n        let skipInfo = {};\n\n        if (inputData.masterData.JA_TEST.length <= inputData.testskip) {\n          testskip = 0;\n          bool = true;\n        }\n\n        if (bool) {\n          skipInfo = {\n            testskip,\n            testtake\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...masterData,\n              JASelectedSample: inputData.JASelectedSample,\n              RegistrationTestAttachment,\n              RegistrationTestComment\n            },\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestKey: inputData.activeTestKey,\n            ...skipInfo\n          }\n        });\n      }\n    }\n  };\n}\nexport function getJobAllocationTestDetail(inputData, isServiceRequired) {\n  return function (dispatch) {\n    let activeName = \"\";\n    let dataStateName = \"\";\n    let inputParamData = {\n      nflag: 3,\n      ntype: 3,\n      nsampletypecode: inputData.nsampletypecode,\n      nregtypecode: inputData.nregtypecode,\n      nregsubtypecode: inputData.nregsubtypecode,\n      npreregno: inputData.npreregno,\n      ssectioncode: inputData.nsectioncode,\n      ntransactiontestcode: 0,\n      ntranscode: inputData.ntransactionstatus.toString(),\n      ntransactionsamplecode: inputData.ntransactionsamplecode,\n      userinfo: inputData.userinfo,\n      ntestcode: inputData.ntestcode,\n      activeTestKey: inputData.activeTestKey,\n      ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n      checkBoxOperation: inputData.checkBoxOperation,\n      nneedsubsample: inputData.nneedsubsample\n    };\n    const subSample = inputData.nneedsubsample;\n\n    if (isServiceRequired) {\n      dispatch(initRequest(true));\n      rsapi.post(\"joballocation/getJobAllocationTestDetails\", inputParamData).then(response => {\n        let responseData = { ...response.data\n        };\n        responseData = sortData(responseData, 'descending', 'npreregno');\n        let oldSelectedTest = inputData.masterData.JASelectedTest;\n        let oldSelectedSubSample = inputData.masterData.JASelectedSubSample || [];\n        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n        let masterData = { ...inputData.masterData,\n          JASelectedTest: inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [],\n          JASelectedSample: inputData.masterData.JASelectedSample,\n          JASelectedSubSample: inputData.JASelectedSubSample || inputData.masterData.JASelectedSubSample\n        };\n\n        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n          inputData.searchTestRef.current.value = \"\";\n          masterData['searchedTests'] = undefined;\n        }\n\n        let {\n          testskip,\n          testtake\n        } = inputData;\n        let bool = false;\n        let skipInfo = {};\n\n        if (inputData.masterData.JA_TEST.length <= inputData.testskip) {\n          testskip = 0;\n          bool = true;\n        }\n\n        if (bool) {\n          skipInfo = {\n            testskip,\n            testtake\n          };\n        }\n\n        let RegistrationTestAttachment = [];\n        let RegistrationTestComment = [];\n        let RegistrationSampleComment = [];\n        let RegistrationSampleAttachment = [];\n\n        if (inputData.checkBoxOperation === 1) {\n          let wholeTestList = masterData.JA_TEST.map(b => b.ntransactiontestcode);\n          oldSelectedTest.map((test, index) => {\n            if (!wholeTestList.includes(test.ntransactiontestcode)) {\n              oldSelectedTest.splice(index, 1);\n            }\n\n            return null;\n          });\n          let keepOld = false;\n          let ntransactiontestcode;\n\n          if (oldSelectedTest.length > 0) {\n            keepOld = true;\n            masterData = { ...masterData,\n              JASelectedTest: oldSelectedTest\n            };\n          } else {\n            ntransactiontestcode = masterData.JASelectedTest[0].ntransactiontestcode;\n          }\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_TESTATTACHMENTS\":\n              RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testAttachmentDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            default:\n              RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testAttachmentDataState\";\n              break;\n          }\n        } else if (inputData.checkBoxOperation === 5) {\n          let list = [];\n          let dbData = [];\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_TESTATTACHMENTS\":\n              dbData = response.data.RegistrationTestAttachment || [];\n              list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              dbData = response.data.RegistrationTestComment || [];\n              list = [...inputData.masterData.RegistrationTestComment, ...dbData];\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            default:\n              dbData = response.data.RegistrationTestAttachment || [];\n              list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n          }\n        } else if (inputData.checkBoxOperation === 7) {\n          let list = [];\n          let dbData = [];\n          let testList = reArrangeArrays(inputData.masterData.JA_SUBSAMPLE, responseData.JA_TEST, \"ntransactionsamplecode\");\n          masterData = { ...masterData,\n            JASelectedTest: [testList[0]],\n            JA_TEST: testList\n          };\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_TESTATTACHMENTS\":\n              dbData = response.data.RegistrationTestAttachment || [];\n              list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_TESTATTACHMENTS\":\n              dbData = response.data.RegistrationTestComment || [];\n              list = [...inputData.masterData.RegistrationTestComment, ...dbData];\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            default:\n              dbData = response.data.RegistrationTestAttachment || [];\n              list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n          }\n        } else {\n          let list = [];\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_TESTATTACHMENTS\":\n              list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testAttachmentState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_SUBSAMPLEATTACHMENTS\":\n              list = response.data.RegistrationSampleComment ? sortData(response.data.RegistrationSampleComment, 'descending', 'ntestcommentcode') : [];\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_SUBSAMPLE.length > 0 ? inputData.masterData.JA_SUBSAMPLE[0].ntransactionsamplecode : \"\", \"ntransactionsamplecode\");\n              activeName = \"RegistrationSampleComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            default:\n              list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testAttachmentState\";\n              break;\n          }\n        }\n\n        if (subSample) {\n          let wholeSubsampleList = masterData.JA_SUBSAMPLE.map(b => b.ntransactionsamplecode);\n          oldSelectedSubSample.map((test, index) => {\n            if (!wholeSubsampleList.includes(test.ntransactionsamplecode)) {\n              oldSelectedSubSample.splice(index, 1);\n            }\n\n            return null;\n          });\n          let keepOld = false;\n          let ntransactionsamplecode;\n\n          if (oldSelectedSubSample.length > 0) {\n            keepOld = true;\n          } else {\n            ntransactionsamplecode = masterData.selectedSubSample[0].ntransactionsamplecode;\n          }\n\n          switch (inputData.activeSubSampleTab) {\n            case \"IDS_SUBSAMPLECOMMENTS\":\n              RegistrationSampleComment = keepOld ? inputData.masterData.RegistrationSampleComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment, ntransactionsamplecode, \"ntransactionsamplecode\");\n              activeName = \"RegistrationSampleComment\";\n              dataStateName = \"subSampleCommentDataState\";\n              break;\n\n            default:\n              RegistrationSampleAttachment = keepOld ? inputData.masterData.RegistrationSampleAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment, ntransactionsamplecode, \"ntransactionsamplecode\");\n              activeName = \"RegistrationSampleAttachment\";\n              dataStateName = \"subSampleAttachmentDataState\";\n              break;\n          }\n        }\n\n        masterData = { ...masterData,\n          RegistrationTestAttachment,\n          RegistrationTestComment,\n          RegistrationSampleComment,\n          RegistrationSampleAttachment\n        };\n\n        if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            showFilter: false,\n            activeTestKey: inputData.activeTestKey,\n            activeTestTab: inputData.activeTestKey,\n            screenName: inputData.activeTestKey,\n            ...skipInfo\n          }\n        });\n      }).catch(error => {\n        console.log(\"error:\", error);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      let oldSelectedTest = inputData.masterData.JASelectedTest;\n      let TestSelected = inputData[\"statusNone\"] ? getRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\") : filterRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\n      let isGrandChildGetRequired = false;\n\n      if (TestSelected.length > 0) {\n        isGrandChildGetRequired = false;\n      } else {\n        isGrandChildGetRequired = true;\n      }\n\n      fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.JASelectedSubSample, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\n\n      if (isGrandChildGetRequired) {\n        let ntransactiontestcode = inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode.toString() : \"\";\n        let JASelectedSubSample = inputData.RESelectedSubSample;\n        let JASelectedTest = inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [];\n        inputData = { ...inputData,\n          childTabsKey: [\"RegistrationTestAttachment\", \"RegistrationTestComment\"],\n          ntransactiontestcode,\n          JASelectedSample: inputData.masterData.JASelectedSample,\n          JASelectedTest,\n          JASelectedSubSample,\n          checkBoxOperation: 3,\n          activeTestKey: inputData.activeTestKey\n        };\n        dispatch(getTestChildTabDetailJobAllocation(inputData, true));\n      } else {\n        let masterData = { ...inputData.masterData,\n          JASelectedTest: inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [],\n          JASelectedSubSample: inputData.JASelectedSubSample\n        };\n        let wholeTestList = masterData.JA_TEST.map(b => b.ntransactiontestcode);\n        oldSelectedTest.map((test, index) => {\n          if (!wholeTestList.includes(test.ntransactiontestcode)) {\n            oldSelectedTest.splice(index, 1);\n          }\n\n          return null;\n        });\n        let keepOld = false;\n        let ntransactiontestcode;\n\n        if (oldSelectedTest.length > 0) {\n          keepOld = true;\n          masterData = { ...masterData,\n            JASelectedTest: oldSelectedTest\n          };\n        } else {\n          ntransactiontestcode = masterData.JA_TEST[0].ntransactiontestcode;\n        }\n\n        const RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment || [], ntransactiontestcode, \"ntransactiontestcode\");\n        let {\n          testskip,\n          testtake\n        } = inputData;\n        let bool = false;\n        let skipInfo = {};\n\n        if (inputData.masterData.JA_TEST.length <= inputData.testskip) {\n          testskip = 0;\n          bool = true;\n        }\n\n        if (bool) {\n          skipInfo = {\n            testskip,\n            testtake\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...masterData,\n              JASelectedSubSample: inputData.JASelectedSubSample,\n              RegistrationTestAttachment,\n              RegistrationTestComment\n            },\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestKey: inputData.activeTestKey,\n            activeTestTab: inputData.activeTestKey,\n            ...skipInfo\n          }\n        });\n      }\n    }\n  };\n}\nexport function getTestChildTabDetailJobAllocation(inputData, isServiceRequired) {\n  return function (dispatch) {\n    let inputParamData = {\n      ntransactiontestcode: inputData.JASelectedTest.map(test => test.ntransactiontestcode).join(\",\"),\n      npreregno: inputData.npreregno,\n      userinfo: inputData.userinfo\n    };\n    let activeName = \"\";\n    let dataStateName = \"\";\n    let url = \"\";\n\n    switch (inputData.activeTestKey) {\n      case \"IDS_TESTATTACHMENTS\":\n        url = \"attachment/getTestAttachment\";\n        activeName = \"RegistrationTestAttachment\";\n        dataStateName = \"testAttachmentDataState\";\n        break;\n\n      case \"IDS_TESTCOMMENTS\":\n        url = \"comments/getTestComment\";\n        activeName = \"RegistrationTestComment\";\n        dataStateName = \"testCommentDataState\";\n        break;\n\n      case \"IDS_SAMPLEATTACHMENTS\":\n        url = \"attachment/getSampleAttachment\";\n        activeName = \"RegistrationSampleAttachment\";\n        dataStateName = \"sampleAttachmentDataState\";\n        break;\n\n      default:\n        url = \"attachment/getTestAttachment\";\n        activeName = \"RegistrationTestAttachment\";\n        dataStateName = \"testAttachmentDataState\";\n        break;\n    }\n\n    dispatch(initRequest(true));\n\n    if (isServiceRequired) {\n      rsapi.post(url, inputParamData).then(response => {\n        let responseData = { ...response.data,\n          JASelectedSample: inputData.JASelectedSample || inputData.masterData.JASelectedSample,\n          JASelectedTest: inputData.JASelectedTest,\n          activeTabIndex: inputData.activeTabIndex,\n          activeTabId: inputData.activeTabId\n        };\n        let skipInfo = {};\n        fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n        let masterData = { ...inputData.masterData,\n          ...responseData,\n          JASelectedTest: inputData.JASelectedTest\n        };\n\n        if (inputData[dataStateName] && masterData[activeName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n          skipInfo = {\n            [dataStateName]: { ...inputData[dataStateName],\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            activeTabIndex: inputData.activeTabIndex,\n            activeTabId: inputData.activeTabId,\n            activeTestTab: inputData.activeTestKey,\n            loading: false,\n            activeTestKey: inputData.activeTestKey,\n            screenName: inputData.activeTestKey,\n            testskip: undefined,\n            testtake: undefined,\n            ...skipInfo\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.JASelectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\", inputData.removeElementFromArray);\n      let skipInfo = {};\n      let masterData = { ...inputData.masterData,\n        JASelectedTest: inputData.JASelectedTest\n      };\n\n      if (masterData[activeName].length <= inputData[dataStateName].skip) {\n        skipInfo = {\n          [dataStateName]: { ...inputData[dataStateName],\n            skip: 0,\n            sort: undefined,\n            filter: undefined\n          }\n        };\n      } else {\n        skipInfo = { ...skipInfo,\n          [dataStateName]: { ...inputData[dataStateName],\n            sort: undefined,\n            filter: undefined\n          }\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          showFilter: false,\n          activeTestKey: inputData.activeTestKey,\n          screenName: inputData.screenName,\n          ...skipInfo\n        }\n      });\n    }\n  };\n}\nexport function updatedObjectWithNewElement1(oldList, newList) {\n  oldList = [...newList, ...oldList];\n  return oldList;\n}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/JobAllocationAction.js"],"names":["rsapi","DEFAULT_RETURN","toast","initRequest","constructOptionList","replaceUpdatedObject","sortData","fillRecordBasedOnCheckBoxSelection","getSameRecordFromTwoArrays","getRecordBasedOnPrimaryKeyName","filterRecordBasedOnPrimaryKeyName","reArrangeArrays","rearrangeDateFormat","postCRUDOrganiseTransSearch","getRegTypeJobAllocation","inputData","dispatch","post","then","response","responseData","data","type","payload","masterData","defaultSampleTypeValue","loading","catch","error","status","message","warn","getRegSubTypeJobAllocation","defaultRegTypeValue","getAppConfigVersionJobAllocation","inputParam","defaultRegSubTypeValue","RegSubTypeValue","realRegSubTypeValue","getSectionJobAllocation","defaultUserSectionValue","getFilterStatusJobAllocation","defaultFilterStatusValue","getTestStatusJobAllocation","getJobAllcationFilterSubmit","searchSampleRef","undefined","current","value","searchSubSampleRef","searchTestRef","showTest","activeTestTab","showFilter","skip","take","testskip","testtake","documentDataState","sort","filter","testCommentDataState","ReceiveinLabStatusWise","rtn","JA_SAMPLE","JA_SUBSAMPLE","JA_TEST","JASelectedSample","JASelectedSubSample","JASelectedTest","respObject","loadEsign","openModal","showSample","postParamList","getAllottedTestWise","TechniqueMap","Technique","UsersMap","Users","UsersPeriodMap","Period","InstrumentCategoryMap","InstrumentCategory","InstrumentMap","Instrument","InstrumentPeriodMap","currentTime","userinfo","CurrentTime","body","get","UsersPeriod","InstrumentPeriod","isOpen","operation","screenName","ncontrolCode","ncontrolcode","getAllotAnotherUserTestWise","getRescheduleTestWise","getInstrument","ninstrumentcatcode","ncalibrationreq","userInfo","selectedRecord","getUsers","ntechniquecode","map","sample","nsectioncode","join","realRegTypeValue","nregtypecode","nregsubtypecode","ViewAnalystCalendar","CancelTestWise","getJobAllocationSubSampleDetail","isServiceRequired","inputParamData","nsampletypecode","npreregno","ssectioncode","ntranscode","String","ntransactionstatus","ntransactiontestcode","ntestcode","napprovalversioncode","fromdate","todate","activeTestKey","activeSampleKey","activeSubSampleKey","nneedsubsample","ndesigntemplatemappingcode","nneedtemplatebasedflow","checkBoxOperation","activeName","dataStateName","oldSelectedTest","RegistrationAttachment","RegistrationSampleAttachment","RegistrationComment","RegistrationSampleComment","length","bool","skipInfo","RegistrationTestAttachment","RegistrationTestComment","wholeTestList","b","test","index","includes","splice","keepOld","list","dbData","oldSelectedSubSample","subsampletake","subsampleskip","TestSelected","subSampleSelected","removeElementFromArray","isGrandChildGetRequired","childTabsKey","toString","filterSelectedSubSample","ntransactionsamplecode","subsample","getTestChildTabDetailJobAllocation","getJobAllocationTestDetail","subsamplecheck","SubSampleSelected","wholeSubSample","forEach","selectedTest","selectedSubSample1","x","activeSampleTab","nflag","ntype","subSample","testList","wholeSubsampleList","selectedSubSample","activeSubSampleTab","console","log","RESelectedSubSample","url","activeTabIndex","activeTabId","updatedObjectWithNewElement1","oldList","newList"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { toast } from 'react-toastify';\r\nimport { initRequest } from './LoginAction';\r\nimport { constructOptionList, replaceUpdatedObject, sortData,fillRecordBasedOnCheckBoxSelection,getSameRecordFromTwoArrays,\r\n    getRecordBasedOnPrimaryKeyName,filterRecordBasedOnPrimaryKeyName,reArrangeArrays,rearrangeDateFormat } from '../components/CommonScript';\r\nimport { postCRUDOrganiseTransSearch } from './ServiceAction';\r\n\r\n\r\nexport function getRegTypeJobAllocation(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"joballocation/getRegistrationTypeBySampleType\", inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...responseData,\r\n                            defaultSampleTypeValue: inputData.defaultSampleTypeValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegSubTypeJobAllocation(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"joballocation/getRegistrationsubTypeByRegType\", inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...responseData,\r\n                            defaultRegTypeValue: inputData.defaultRegTypeValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getAppConfigVersionJobAllocation(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"joballocation/getApprovalConfigVersionByRegSubType\", inputParam.inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputParam.masterData,\r\n                            ...responseData,\r\n                            defaultRegSubTypeValue: inputParam.masterData.defaultRegSubTypeValue,\r\n                            RegSubTypeValue: inputParam.masterData.realRegSubTypeValue\r\n                        },\r\n                        loading: false,\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getSectionJobAllocation(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"joballocation/getTestComboBySection\", inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...responseData,\r\n                            defaultUserSectionValue: inputData.masterData.defaultUserSectionValue,\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getFilterStatusJobAllocation(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"joballocation/getTestComboBySection\", inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...responseData,\r\n                            defaultFilterStatusValue: inputData.masterData.defaultFilterStatusValue,\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTestStatusJobAllocation(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"joballocation/getFilterStatusByApproveVersion\", inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...responseData,\r\n                            RegSubTypeValue: inputData.RegSubTypeValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getJobAllcationFilterSubmit(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"joballocation/getJobAllocationDetails\", inputParam.inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                // responseData = sortData(responseData)\r\n                let masterData = {\r\n                    ...inputParam.masterData,\r\n                    ...responseData,\r\n                }\r\n                if (inputParam.searchSampleRef !== undefined && inputParam.searchSampleRef.current !== null) {\r\n                    inputParam.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null) {\r\n                    inputParam.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null) {\r\n                    inputParam.searchTestRef.current.value = \"\"\r\n                     masterData['searchedTest'] = undefined\r\n                   // masterData['searchedTests'] = undefined\r\n\r\n                }\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showTest: inputParam.inputData.showTest,\r\n                        activeTestTab: inputParam.inputData.activeTestTab,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        take: inputParam.take,\r\n                        testskip: 0,\r\n                        testtake: inputParam.testtake,\r\n                        documentDataState: { ...inputParam.documentDataState, sort: undefined, filter: undefined },\r\n                        testCommentDataState: { ...inputParam.testCommentDataState, sort: undefined, filter: undefined },\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function ReceiveinLabStatusWise(inputParam) {\r\n    return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n            rsapi.post(\"joballocation/CreateReceiveinLab\",inputParam.inputData)\r\n                .then(response => {\r\n                    if(response.data.rtn === undefined || response.data.rtn===\"Success\"){\r\n                        replaceUpdatedObject(response.data[\"JA_SAMPLE\"], inputParam.inputData.masterData.JA_SAMPLE, \"npreregno\");\r\n                        replaceUpdatedObject(response.data[\"JA_SUBSAMPLE\"], inputParam.inputData.masterData.JA_SUBSAMPLE, \"ntransactionsamplecode\");\r\n                        replaceUpdatedObject(response.data[\"JA_TEST\"], inputParam.inputData.masterData.JA_TEST, \"ntransactiontestcode\");\r\n\r\n                        delete response.data[\"JA_SAMPLE\"];\r\n                        delete response.data[\"JA_SUBSAMPLE\"];\r\n                        delete response.data[\"JA_TEST\"];\r\n                        let masterData = {\r\n                            ...inputParam.inputData.masterData,\r\n                             ...response.data,\r\n                            JASelectedSample: replaceUpdatedObject(response.data[\"JASelectedSample\"], inputParam.inputData.masterData.JASelectedSample, \"npreregno\"),\r\n                            JASelectedSubSample: replaceUpdatedObject(response.data[\"JASelectedSubSample\"], inputParam.inputData.masterData.JASelectedSubSample, \"ntransactionsamplecode\"),\r\n                            JASelectedTest: replaceUpdatedObject(response.data[\"JASelectedTest\"], inputParam.inputData.masterData.JASelectedTest, \"ntransactiontestcode\"),\r\n                        }\r\n                        let respObject = {\r\n                            masterData,\r\n                            ...inputParam.inputData,\r\n                            loading: false,\r\n                            loadEsign: false,\r\n                            openModal: false,\r\n                            showSample: undefined\r\n                        }\r\n                        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                    }else{\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false,\r\n                                loadEsign: false,\r\n                                openModal: false\r\n                            }\r\n                        });\r\n                        toast.warn(response.data.rtn);\r\n                    }\r\n\r\n\r\n                })\r\n                .catch(error => {                   \r\n                        toast.error(error.message);                   \r\n                })\r\n    }\r\n} \r\n\r\nexport function getAllottedTestWise(inputParam) {\r\n    return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n            rsapi.post(\"joballocation/getAllotDetails\",inputParam.inputData)\r\n                .then(response => {\r\n\r\n                const TechniqueMap = constructOptionList(response.data.Technique || [], \"ntechniquecode\",\r\n                \"stechniquename\", undefined, undefined, false);    \r\n\r\n                const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\",\r\n                \"susername\", undefined, undefined, false);\r\n\r\n                const UsersPeriodMap = constructOptionList(response.data.Period || [], \"nuserperiodcode\",\r\n                \"speriodname\", undefined, undefined, false);    \r\n\r\n\r\n                const InstrumentCategoryMap = constructOptionList(response.data.InstrumentCategory || [], \"ninstrumentcatcode\",\r\n                \"sinstrumentcatname\", undefined, undefined, false);                \r\n\r\n                const InstrumentMap =    constructOptionList(response.data.Instrument || [], \"ninstrumentcode\",\r\n                \"sinstrumentid\", undefined, undefined, false);           \r\n\r\n                const InstrumentPeriodMap = constructOptionList(response.data.Period || [], \"ninstrumentperiodcode\",\r\n                \"speriodname\", undefined, undefined, false);    \r\n\r\n                const currentTime = rearrangeDateFormat(inputParam.inputData.userinfo, response.data.CurrentTime.body);\r\n\r\n                const Technique = TechniqueMap.get(\"OptionList\");\r\n                const Users = UsersMap.get(\"OptionList\");\r\n                const UsersPeriod = UsersPeriodMap.get(\"OptionList\");\r\n                const InstrumentCategory = InstrumentCategoryMap.get(\"OptionList\");\r\n                const Instrument = InstrumentMap.get(\"OptionList\");                \r\n                const InstrumentPeriod = InstrumentPeriodMap.get(\"OptionList\");\r\n               \r\n                dispatch({\r\n                    type: DEFAULT_RETURN, \r\n                        payload: {\r\n                            Technique,\r\n                            Users,\r\n                            UsersPeriod,\r\n                            InstrumentCategory,\r\n                            Instrument,                            \r\n                            InstrumentPeriod,\r\n                            currentTime,\r\n                            isOpen: true,\r\n                            operation:inputParam.inputData.operation,\r\n                            screenName: inputParam.inputData.screenName,\r\n                            openModal: true,\r\n                            ncontrolCode: inputParam.inputData.ncontrolcode,\r\n                            loading: false             \r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n    }\r\n}\r\n\r\nexport function getAllotAnotherUserTestWise(inputParam) {\r\n    return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n            rsapi.post(\"joballocation/getAllotAnotherUserDetails\",inputParam.inputData)\r\n                .then(response => {\r\n                    \r\n                const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\",\r\n                \"susername\", undefined, undefined, false);\r\n\r\n                const UsersPeriodMap = constructOptionList(response.data.Period || [], \"nuserperiodcode\",\r\n                \"speriodname\", undefined, undefined, false);  \r\n\r\n                const Users = UsersMap.get(\"OptionList\");\r\n                const UsersPeriod = UsersPeriodMap.get(\"OptionList\");\r\n                \r\n                const currentTime = rearrangeDateFormat(inputParam.inputData.userinfo, response.data.CurrentTime.body);\r\n               \r\n                dispatch({\r\n                    type: DEFAULT_RETURN, \r\n                        payload: {                           \r\n                            Users,\r\n                            UsersPeriod, \r\n                            currentTime,                           \r\n                            isOpen: true,\r\n                            operation: inputParam.inputData.operation,\r\n                            screenName: inputParam.inputData.screenName,\r\n                            openModal: true,\r\n                            ncontrolCode: inputParam.inputData.ncontrolcode,\r\n                            loading: false             \r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n    }\r\n}\r\n\r\nexport function getRescheduleTestWise(inputParam) {\r\n    return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n            rsapi.post(\"joballocation/getRescheduledDetails\",inputParam.inputData)\r\n                .then(response => {\r\n\r\n                // const TechniqueMap = constructOptionList(response.data.Technique || [], \"ntechniquecode\",\r\n                //  \"stechniquename\", 'ntechniquecode', 'ascending', false);    \r\n\r\n                const TechniqueMap = constructOptionList(response.data.Technique || [], \"ntechniquecode\",\r\n                \"stechniquename\", undefined, undefined, false);    \r\n\r\n                const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\",\r\n                \"susername\", undefined, undefined, false);\r\n\r\n                const UsersPeriodMap = constructOptionList(response.data.Period || [], \"nuserperiodcode\",\r\n                \"speriodname\", undefined, undefined, false);    \r\n\r\n\r\n                const InstrumentCategoryMap = constructOptionList(response.data.InstrumentCategory || [], \"ninstrumentcatcode\",\r\n                \"sinstrumentcatname\", undefined, undefined, false);                \r\n\r\n                const InstrumentMap =    constructOptionList(response.data.Instrument || [], \"ninstrumentcode\",\r\n                \"sinstrumentid\", undefined, undefined, false);           \r\n\r\n                const InstrumentPeriodMap = constructOptionList(response.data.Period || [], \"ninstrumentperiodcode\",\r\n                \"speriodname\", undefined, undefined, false);   \r\n                \r\n                const currentTime = rearrangeDateFormat(inputParam.inputData.userinfo, response.data.CurrentTime.body);\r\n\r\n                const Technique = TechniqueMap.get(\"OptionList\");\r\n                const Users = UsersMap.get(\"OptionList\");\r\n                const UsersPeriod = UsersPeriodMap.get(\"OptionList\");\r\n                const InstrumentCategory = InstrumentCategoryMap.get(\"OptionList\");\r\n                const Instrument = InstrumentMap.get(\"OptionList\");                \r\n                const InstrumentPeriod = InstrumentPeriodMap.get(\"OptionList\");\r\n               \r\n                dispatch({\r\n                    type: DEFAULT_RETURN, \r\n                        payload: {\r\n                            Technique,\r\n                            Users,\r\n                            UsersPeriod,\r\n                            InstrumentCategory,\r\n                            Instrument,                            \r\n                            InstrumentPeriod,\r\n                            currentTime,\r\n                            isOpen: true,\r\n                            operation: inputParam.inputData.operation,\r\n                            screenName: inputParam.inputData.screenName,\r\n                            openModal: true,\r\n                            ncontrolCode: inputParam.inputData.ncontrolcode,\r\n                            loading: false             \r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n    }\r\n}\r\n\r\n\r\nexport function getInstrument(ninstrumentcatcode,ncalibrationreq,userInfo, selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"joballocation/getInstrumentBasedCategory\", {\r\n                \"ninstrumentcatcode\": ninstrumentcatcode,\"ncalibrationreq\":ncalibrationreq,\"userinfo\":userInfo\r\n            })\r\n            .then(response => {\r\n                let Instrument = [];               \r\n                const InstrumentMap = constructOptionList(response.data.Instrument || [], \"ninstrumentcode\",\"sinstrumentid\", undefined, undefined, false);\r\n                Instrument = InstrumentMap.get(\"OptionList\");\r\n                //selectedRecord[\"ninstrumentcode\"] = undefined;\r\n               \r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Instrument,\r\n                        selectedRecord,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getUsers(ntechniquecode,JASelectedTest, userInfo, selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"joballocation/getUsersBasedTechnique\", {\"ntechniquecode\": ntechniquecode,\r\n                          \"ssectioncode\":JASelectedTest.JASelectedSample ? JASelectedTest.JASelectedSample.map(sample=>sample.nsectioncode).join(\",\"):\"\", \r\n                          \"nregtypecode\":JASelectedTest.realRegTypeValue.nregtypecode,\r\n                          \"nregsubtypecode\":JASelectedTest.realRegSubTypeValue.nregsubtypecode,\r\n                          \"userinfo\": userInfo})\r\n            .then(response => {\r\n                let Users = [];               \r\n                const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\",\"susername\", undefined, undefined, false);\r\n                Users = UsersMap.get(\"OptionList\");\r\n                //selectedRecord[\"ninstrumentcode\"] = undefined;\r\n               \r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Users,\r\n                        selectedRecord,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function ViewAnalystCalendar(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"joballocation/viewAnalystCalendar\", (inputParam.inputData))\r\n            .then(response => {\r\n                let masterData = {\r\n                    ...inputParam.inputData.masterData,\r\n                    ...response.data,\r\n                }  \r\n                let Users = [];               \r\n                const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\",\"susername\", undefined, undefined, false);\r\n                Users = UsersMap.get(\"OptionList\");\r\n                \r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {                       \r\n                        Users,                        \r\n                        screenName: inputParam.inputData.screenName,\r\n                        loading: false,\r\n                        openModal:true,\r\n                        masterData,\r\n                        \r\n                        \r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function CancelTestWise(inputParam) {\r\n    return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n            rsapi.post(\"joballocation/CancelTest\",inputParam.inputData)\r\n                .then(response => {\r\n                    if(response.data.rtn === undefined || response.data.rtn===\"Success\"){\r\n                        replaceUpdatedObject(response.data[\"JA_TEST\"], inputParam.inputData.masterData.JA_TEST, \"ntransactiontestcode\");\r\n                        delete response.data[\"JA_TEST\"];\r\n                        let masterData = {\r\n                            ...inputParam.inputData.masterData,\r\n                             ...response.data,\r\n                            JASelectedTest: replaceUpdatedObject(response.data[\"JASelectedTest\"], inputParam.inputData.masterData.JASelectedTest, \"ntransactiontestcode\"),\r\n                        }\r\n                        let respObject = {\r\n                            masterData,\r\n                            ...inputParam.inputData,\r\n                            loading: false,\r\n                            loadEsign: false,\r\n                            openModal: false,\r\n                            showSample: undefined\r\n                        }\r\n                        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                    }else{\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false,\r\n                                loadEsign: false,\r\n                                openModal: false\r\n                            }\r\n                        });\r\n                        toast.warn(response.data.rtn);\r\n                    }\r\n\r\n\r\n                })\r\n                .catch(error => {                   \r\n                        toast.error(error.message);                   \r\n                })\r\n    }\r\n}\r\n\r\nexport function getJobAllocationSubSampleDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.JASelectedSample && inputData.JASelectedSample.map(sample => sample.npreregno).join(\",\"),\r\n            ssectioncode : inputData.JASelectedSample && inputData.JASelectedSample.map(sample => sample.nsectioncode).join(\",\"),\r\n            ntranscode: String(inputData.ntransactionstatus),\r\n            ntransactiontestcode: 0,\r\n            userinfo: inputData.userinfo,\r\n            ntestcode: inputData.ntestcode,\r\n            napprovalversioncode: inputData.napprovalversioncode,\r\n            fromdate: inputData.fromdate,\r\n            todate: inputData.todate,\r\n            activeTestKey: inputData.activeTestKey,\r\n            activeSampleKey: inputData.activeSampleKey,\r\n            activeSubSampleKey: inputData.activeSubSampleKey,\r\n            nneedsubsample: inputData.masterData.realRegSubTypeValue.nneedsubsample,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            nneedtemplatebasedflow: inputData.masterData.realRegSubTypeValue.nneedtemplatebasedflow,\r\n            checkBoxOperation: inputData.checkBoxOperation\r\n        }\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(\"joballocation/getJobAllocationSubSampleDetails\", { ...inputParamData, checkBoxOperation: inputData.checkBoxOperation })\r\n                .then(response => {\r\n                    sortData(response.data);\r\n                    let oldSelectedTest = inputData.masterData.JASelectedTest;           \r\n\r\n                    inputData.masterData.JA_SUBSAMPLE = response.data.JA_SUBSAMPLE;  \r\n                    inputData.masterData.JASelectedSubSample=response.data.JASelectedSubSample;\r\n                    inputData.masterData.JA_TEST = response.data.JA_TEST;  \r\n                    inputData.masterData.JASelectedTest=response.data.JASelectedTest;\r\n                    inputData.masterData.RegistrationAttachment =response.data.RegistrationAttachment;\r\n                    inputData.masterData.RegistrationSampleAttachment =response.data.RegistrationSampleAttachment;\r\n                    inputData.masterData.RegistrationComment =response.data.RegistrationComment;\r\n                    inputData.masterData.RegistrationSampleComment =response.data.RegistrationSampleComment;\r\n\r\n\r\n\r\n\r\n\r\n                    //  fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"nregistrationsectioncode\", inputData.removeElementFromArray);\r\n                    //  let JASelectedSubSample = inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 7 ? response.data.JASelectedSubSample : inputData.masterData.JASelectedSubSample\r\n                    //  JASelectedSubSample = inputData.masterData.realRegSubTypeValue.nneedsubsample ? JASelectedSubSample : inputData.masterData.JA_SUBSAMPLE;\r\n\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        JASelectedTest: inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [],\r\n                        JASelectedSample: inputData.JASelectedSample\r\n                        //JASelectedSubSample\r\n                    }\r\n                    \r\n                    if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                        inputData.searchSubSampleRef.current.value = \"\";\r\n                        masterData['searchedSubSample'] = undefined\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                    let {\r\n                        testskip,\r\n                        testtake\r\n                    } = inputData\r\n                    let bool = false;\r\n                    let skipInfo = {}\r\n                    if (inputData.masterData.JA_TEST.length <= inputData.testskip) {\r\n                        testskip = 0;\r\n                        bool = true\r\n                    }\r\n                    if (bool) {\r\n                        skipInfo = {\r\n                            testskip,\r\n                            testtake\r\n                        }\r\n                    }\r\n                    let RegistrationTestAttachment = [];\r\n                    let RegistrationTestComment = [];\r\n                    let RegistrationComment = [];\r\n                    let RegistrationSampleAttachment = [];\r\n\r\n                    if (inputData.checkBoxOperation === 1) {\r\n                        //added by sudharshanan for test select issue while sample click\r\n                        let wholeTestList = masterData.JA_TEST.map(b => b.ntransactiontestcode)\r\n                        oldSelectedTest.map((test, index) => {\r\n                            if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                oldSelectedTest.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                        let keepOld = false;\r\n                        let ntransactiontestcode;\r\n                        let npreregno;\r\n                        if (oldSelectedTest.length > 0) {\r\n                            keepOld = true\r\n                            masterData = {\r\n                                ...masterData,\r\n                                JASelectedTest: oldSelectedTest\r\n                            }\r\n                        } else {\r\n                            ntransactiontestcode = masterData.JASelectedTest[0].ntransactiontestcode;\r\n                            npreregno = masterData.JASelectedSample[0].npreregno;\r\n                        }\r\n                        switch (inputData.activeTestKey) {                           \r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName =\"testAttachmentDataState\"\r\n                                break;\r\n                            \r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationComment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"npreregno\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName = \" testAttachmentDataState\"\r\n                                break;\r\n                        }\r\n\r\n\r\n                    } else if (inputData.checkBoxOperation === 5) {\r\n                        let list = []\r\n                        let dbData = [];\r\n                        switch (inputData.activeTestKey) {                  \r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                           \r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                dbData = response.data.RegistrationTestComment || []\r\n                                list = [...inputData.masterData.RegistrationTestComment, ...dbData];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_SAMPLECOMMENTS\":\r\n                                dbData = response.data.RegistrationComment || []\r\n                                list = [...inputData.masterData.RegistrationComment, ...dbData];\r\n                                RegistrationComment = getRecordBasedOnPrimaryKeyName(list, inputData.JASelectedSample.length > 0 ? inputData.JASelectedSample[0].npreregno : \"\", \"npreregno\")\r\n                                break;\r\n                            default:\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                        }\r\n                    }\r\n                    else if (inputData.checkBoxOperation === 7) {\r\n                        let list = []\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName =\"testAttachmentDataState\"\r\n                                break;\r\n                           \r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                                break;\r\n                            case \"IDS_SAMPLECOMMENTS\":\r\n\r\n                                RegistrationComment = response.data.RegistrationComment ? [...response.data.RegistrationComment] : [];\r\n                                activeName = \"RegistrationComment\"\r\n                                dataStateName = \"sampleCommentsDataState\"\r\n                                break;\r\n                            default:\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName =\"testAttachmentDataState\"\r\n                                break;\r\n\r\n                        }\r\n\r\n                    }\r\n                    else {\r\n                        let list = []\r\n                        if (!inputData.masterData.realRegSubTypeValue.nneedsubsample) {\r\n                            let wholeTestList = masterData.JA_TEST.map(b => b.ntransactiontestcode)\r\n                            oldSelectedTest.map((test, index) => {\r\n                                if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                    oldSelectedTest.splice(index, 1)\r\n                                }\r\n                                return null;\r\n                            })\r\n                            let keepOld = false;\r\n                            let ntransactiontestcode;\r\n                            if (oldSelectedTest.length > 0) {\r\n                                keepOld = true\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    JASelectedTest: oldSelectedTest\r\n                                }\r\n                            } else {\r\n                                ntransactiontestcode = masterData.JASelectedTest[0].ntransactiontestcode\r\n                            }\r\n                        }\r\n                        switch (inputData.activeTestKey) {                            \r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName =\"testAttachmentDataState\"\r\n                                break;\r\n                            \r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_SAMPLECOMMENTS\":\r\n                                list = response.data.RegistrationComment ? sortData(response.data.RegistrationComment, 'descending', 'nregcommentcode') : [];\r\n                                RegistrationComment = getRecordBasedOnPrimaryKeyName(list, inputData.JASelectedSample.length > 0 ? inputData.JASelectedSample[0].npreregno : \"\", \"npreregno\")\r\n                                activeName = \"RegistrationComment\"\r\n                                dataStateName = \"sampleChangeDataState\"\r\n                                break;\r\n                            default:\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName =\"testAttachmentDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n\r\n                    masterData = {\r\n                        ...masterData,\r\n                        RegistrationTestAttachment,\r\n                        RegistrationTestComment,\r\n                        RegistrationComment,\r\n                        RegistrationSampleAttachment\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            skip: undefined,\r\n                            take: undefined,\r\n                            ...skipInfo\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n        } else {\r\n            let oldSelectedTest = inputData.masterData.JASelectedTest\r\n            let oldSelectedSubSample = inputData.masterData.JASelectedSubSample\r\n            let { subsampletake, subsampleskip } = inputData;\r\n            let skipInfo = {};\r\n            let TestSelected = [];\r\n            let subSampleSelected = [];\r\n            if (inputData[\"statusNone\"]) {\r\n                TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n            else {\r\n                TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n\r\n            let isGrandChildGetRequired = false;\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.JASelectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let ntransactiontestcode = inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode.toString() : \"\";\r\n                let JASelectedSample = inputData.JASelectedSample;\r\n                let JASelectedTest = inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [];\r\n                let JASelectedSubSample = inputData.masterData.JA_SUBSAMPLE\r\n\r\n\r\n                if (inputData.masterData.realRegSubTypeValue.nneedsubsample) {\r\n                    let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.JA_SUBSAMPLE, \"ntransactionsamplecode\");\r\n                    JASelectedSubSample = filterSelectedSubSample.length > 0 ? filterSelectedSubSample : [inputData.masterData.JA_SUBSAMPLE[0]];\r\n                    if (inputData.masterData.JA_SUBSAMPLE.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampletake, subsampleskip }\r\n                    }\r\n                }\r\n                let ntransactionsamplecode = JASelectedSubSample.map(subsample => subsample.ntransactionsamplecode).join(',');\r\n                let masterData = { ...inputData.masterData, JASelectedSample, JASelectedSubSample, JASelectedTest }\r\n                inputData = {\r\n                    ...inputData,\r\n                    ntransactiontestcode,\r\n                    ntransactionsamplecode,\r\n                    JASelectedSample,\r\n                    JASelectedTest,\r\n                    JASelectedSubSample,\r\n                    checkBoxOperation: 3,\r\n                    activeTestKey: inputData.activeTestKey, masterData\r\n                }\r\n\r\n                if (JASelectedTest.length > 0) {\r\n                    inputData = {\r\n                        ...inputData,\r\n                        childTabsKey: [\"RegistrationTestAttachment\",\"RegistrationTestComment\"]\r\n                    }\r\n                    dispatch(getTestChildTabDetailJobAllocation(inputData, true));\r\n                } else {\r\n                    inputData = {\r\n                        ...inputData, masterData,\r\n                        childTabsKey: [\"JA_TEST\"]\r\n                    }\r\n                    dispatch(getJobAllocationTestDetail(inputData, true));\r\n                }\r\n            } else {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    JASelectedTest: TestSelected ? TestSelected : inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [],\r\n                    JASelectedSample: inputData.JASelectedSample,\r\n                    JASelectedSubSample: subSampleSelected ? subSampleSelected : inputData.masterData.JA_SUBSAMPLE.length > 0 ? [inputData.masterData.JA_SUBSAMPLE[0]] : []\r\n\r\n                }\r\n                let subsamplecheck = true;\r\n                if (inputData.masterData.realRegSubTypeValue.nneedsubsample) {\r\n                    let SubSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                    if (SubSampleSelected.length > 0) {\r\n                        let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.JA_SUBSAMPLE, \"ntransactionsamplecode\");\r\n                        if (filterSelectedSubSample.length === 0) {\r\n                            let wholeSubSample = masterData.JA_SUBSAMPLE.map(b => b.ntransactionsamplecode)\r\n                            oldSelectedSubSample.forEach((test, index) => {\r\n                                if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                                    oldSelectedSubSample.splice(index, 1)\r\n                                }\r\n                                return null;\r\n                            })\r\n                            if (oldSelectedSubSample.length === 0 && wholeSubSample.length > 0\r\n                                && masterData.selectedTest.length === 0) {\r\n                                const selectedSubSample1 = [inputData.masterData.JA_SUBSAMPLE[0]];\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    JASelectedSubSample: selectedSubSample1,\r\n                                    selectedTest: []\r\n                                }\r\n                                inputData = { ...inputData, ...masterData }\r\n                                inputData[\"npreregno\"] = selectedSubSample1.map(x => x.npreregno).join(\",\")\r\n                                inputData[\"ntransactionsamplecode\"] = selectedSubSample1.map(x => x.ntransactionsamplecode).join(\",\")\r\n                                inputData[\"checkBoxOperation\"] = 3\r\n                                inputData[\"childTabsKey\"] = [\"JA_TEST\"]\r\n                                subsamplecheck = false;\r\n                                dispatch(getJobAllocationTestDetail(inputData, true));\r\n\r\n                            }\r\n                        } else {\r\n                            oldSelectedSubSample = filterSelectedSubSample\r\n                        }\r\n\r\n                    } else {\r\n                        let wholeSubSample = masterData.JA_SUBSAMPLE.map(b => b.ntransactionsamplecode)\r\n                        oldSelectedSubSample.forEach((test, index) => {\r\n                            if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                                oldSelectedSubSample.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                    }\r\n\r\n                    if (subsamplecheck) {\r\n                        masterData = {\r\n                            ...masterData,\r\n                            JASelectedSubSample: oldSelectedSubSample\r\n                        }\r\n                    }\r\n                    if (inputData.masterData.JA_SUBSAMPLE.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampleskip, subsampletake }\r\n                    }\r\n                }\r\n                let wholeTestList = masterData.JA_TEST.map(b => b.ntransactiontestcode)\r\n                oldSelectedTest.map((test, index) => {\r\n                    if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        oldSelectedTest.splice(index, 1)\r\n                    }\r\n                    return null;\r\n                })\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        JASelectedTest: oldSelectedTest\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = inputData.masterData.JA_TEST[0].ntransactiontestcode\r\n                }                \r\n                const RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n              \r\n                let { testskip, testtake } = inputData\r\n                let bool = false;\r\n                let skipInfo = {}\r\n                if (inputData.masterData.JA_TEST.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = {\r\n                        testskip,\r\n                        testtake\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            JASelectedSample: inputData.JASelectedSample,\r\n                            RegistrationTestAttachment,\r\n                            RegistrationTestComment,\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestKey: inputData.activeTestKey,\r\n                        ...skipInfo,\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function getJobAllocationTestDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        let inputParamData = {\r\n            nflag: 3,\r\n            ntype: 3,\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ssectioncode :inputData.nsectioncode,\r\n            ntransactiontestcode: 0,\r\n            ntranscode: inputData.ntransactionstatus.toString(),\r\n            ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n            userinfo: inputData.userinfo,\r\n            ntestcode: inputData.ntestcode,\r\n            activeTestKey: inputData.activeTestKey,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            checkBoxOperation: inputData.checkBoxOperation,\r\n            nneedsubsample: inputData.nneedsubsample\r\n        }\r\n        const subSample = inputData.nneedsubsample;\r\n        if (isServiceRequired) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"joballocation/getJobAllocationTestDetails\", inputParamData)\r\n                .then(response => {\r\n                    let responseData = { ...response.data }\r\n                    responseData = sortData(responseData, 'descending', 'npreregno')\r\n                    let oldSelectedTest = inputData.masterData.JASelectedTest\r\n                    let oldSelectedSubSample = inputData.masterData.JASelectedSubSample || []\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        JASelectedTest: inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [],\r\n                        JASelectedSample: inputData.masterData.JASelectedSample,\r\n                        JASelectedSubSample: inputData.JASelectedSubSample || inputData.masterData.JASelectedSubSample,\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTests'] = undefined\r\n                    }\r\n                    let {\r\n                        testskip,\r\n                        testtake\r\n                    } = inputData\r\n                    let bool = false;\r\n                    let skipInfo = {}\r\n                    if (inputData.masterData.JA_TEST.length <= inputData.testskip) {\r\n                        testskip = 0;\r\n                        bool = true\r\n                    }\r\n                    if (bool) {\r\n                        skipInfo = {\r\n                            testskip,\r\n                            testtake\r\n                        }\r\n                    }\r\n                    let RegistrationTestAttachment = [];\r\n                    let RegistrationTestComment = [];\r\n                    let RegistrationSampleComment = [];\r\n                    let RegistrationSampleAttachment = [];\r\n\r\n                    if (inputData.checkBoxOperation === 1) {\r\n                        let wholeTestList = masterData.JA_TEST.map(b => b.ntransactiontestcode)\r\n                        oldSelectedTest.map((test, index) => {\r\n                            if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                oldSelectedTest.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                        let keepOld = false;\r\n                        let ntransactiontestcode;\r\n                        if (oldSelectedTest.length > 0) {\r\n                            keepOld = true\r\n                            masterData = {\r\n                                ...masterData,\r\n                                JASelectedTest: oldSelectedTest\r\n                            }\r\n                        } else {\r\n                            ntransactiontestcode = masterData.JASelectedTest[0].ntransactiontestcode\r\n                        }\r\n                        switch (inputData.activeTestKey) {                           \r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName =\"testAttachmentDataState\"\r\n                                break;\r\n                            \r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                           \r\n                            default:\r\n                                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName =\"testAttachmentDataState\"\r\n                                break;\r\n                        }\r\n\r\n                    } else if (inputData.checkBoxOperation === 5) {\r\n                        let list = []\r\n                        let dbData = [];\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                          \r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                dbData = response.data.RegistrationTestComment || []\r\n                                list = [...inputData.masterData.RegistrationTestComment, ...dbData];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            default:\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                        }\r\n                    } else if (inputData.checkBoxOperation === 7) {\r\n                        let list = []\r\n                        let dbData = [];\r\n                        let testList = reArrangeArrays(inputData.masterData.JA_SUBSAMPLE, responseData.JA_TEST, \"ntransactionsamplecode\");\r\n                        masterData = {\r\n                            ...masterData,\r\n                            JASelectedTest: [testList[0]],\r\n                            JA_TEST: testList,\r\n                        }\r\n\r\n                        switch (inputData.activeTestKey) {\r\n                            \r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                           \r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    dbData = response.data.RegistrationTestComment || []\r\n                                    list = [...inputData.masterData.RegistrationTestComment, ...dbData];\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                    break;\r\n                            default:\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                        }\r\n\r\n                    } else {\r\n                        let list = []\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName =\"testAttachmentState\"\r\n                                break;\r\n                            \r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_SUBSAMPLEATTACHMENTS\":\r\n                                list = response.data.RegistrationSampleComment ? sortData(response.data.RegistrationSampleComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_SUBSAMPLE.length > 0 ? inputData.masterData.JA_SUBSAMPLE[0].ntransactionsamplecode : \"\", \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName =\"testAttachmentState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    if (subSample) {\r\n                        let wholeSubsampleList = masterData.JA_SUBSAMPLE.map(b => b.ntransactionsamplecode)\r\n                        oldSelectedSubSample.map((test, index) => {\r\n                            if (!wholeSubsampleList.includes(test.ntransactionsamplecode)) {\r\n                                oldSelectedSubSample.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                        let keepOld = false;\r\n                        let ntransactionsamplecode;\r\n                        if (oldSelectedSubSample.length > 0) {\r\n                            keepOld = true\r\n                        } else {\r\n                            ntransactionsamplecode = masterData.selectedSubSample[0].ntransactionsamplecode\r\n                        }\r\n\r\n                        switch (inputData.activeSubSampleTab) {\r\n                            case \"IDS_SUBSAMPLECOMMENTS\":\r\n                                RegistrationSampleComment = keepOld ? inputData.masterData.RegistrationSampleComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleComment\"\r\n                                dataStateName = \"subSampleCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationSampleAttachment = keepOld ? inputData.masterData.RegistrationSampleAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleAttachment\"\r\n                                dataStateName = \"subSampleAttachmentDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    masterData = {\r\n                        ...masterData,                      \r\n                        RegistrationTestAttachment,\r\n                        RegistrationTestComment,\r\n                        RegistrationSampleComment,\r\n                        RegistrationSampleAttachment\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeTestKey: inputData.activeTestKey,\r\n                            activeTestTab: inputData.activeTestKey,\r\n                            screenName: inputData.activeTestKey,\r\n                            ...skipInfo\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    console.log(\"error:\", error);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            let oldSelectedTest = inputData.masterData.JASelectedTest\r\n            let TestSelected =\r\n                inputData[\"statusNone\"] ?\r\n                    getRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\") :\r\n                    filterRecordBasedOnPrimaryKeyName(inputData.masterData.JASelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\r\n            let isGrandChildGetRequired = false;\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.JASelectedSubSample, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let ntransactiontestcode = inputData.masterData.JA_TEST.length > 0 ? inputData.masterData.JA_TEST[0].ntransactiontestcode.toString() : \"\";\r\n                let JASelectedSubSample = inputData.RESelectedSubSample;\r\n                let JASelectedTest = inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [];\r\n                inputData = {\r\n                    ...inputData,\r\n                    childTabsKey: [\"RegistrationTestAttachment\", \"RegistrationTestComment\"],\r\n                    ntransactiontestcode,\r\n                    JASelectedSample: inputData.masterData.JASelectedSample,\r\n                    JASelectedTest,\r\n                    JASelectedSubSample,\r\n                    checkBoxOperation: 3,\r\n                    activeTestKey: inputData.activeTestKey\r\n                }\r\n                dispatch(getTestChildTabDetailJobAllocation(inputData, true));\r\n            } else {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    JASelectedTest: inputData.masterData.JA_TEST.length > 0 ? [inputData.masterData.JA_TEST[0]] : [],\r\n                    JASelectedSubSample: inputData.JASelectedSubSample\r\n                }\r\n                let wholeTestList = masterData.JA_TEST.map(b => b.ntransactiontestcode)\r\n                oldSelectedTest.map((test, index) => {\r\n                    if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        oldSelectedTest.splice(index, 1)\r\n                    }\r\n                    return null;\r\n                })\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        JASelectedTest: oldSelectedTest\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = masterData.JA_TEST[0].ntransactiontestcode\r\n                }\r\n                const RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                \r\n                let { testskip, testtake } = inputData\r\n                let bool = false;\r\n                let skipInfo = {}\r\n                if (inputData.masterData.JA_TEST.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = {\r\n                        testskip,\r\n                        testtake\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            JASelectedSubSample: inputData.JASelectedSubSample,\r\n                            RegistrationTestAttachment,\r\n                            RegistrationTestComment,\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestKey: inputData.activeTestKey,\r\n                        activeTestTab: inputData.activeTestKey,\r\n                        ...skipInfo,\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function getTestChildTabDetailJobAllocation(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactiontestcode: inputData.JASelectedTest.map(test => test.ntransactiontestcode).join(\",\"),\r\n            npreregno: inputData.npreregno,\r\n            userinfo: inputData.userinfo\r\n        }\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        let url=\"\";\r\n       \r\n        switch (inputData.activeTestKey) {\r\n            case \"IDS_TESTATTACHMENTS\":\r\n                url = \"attachment/getTestAttachment\"\r\n                activeName = \"RegistrationTestAttachment\"\r\n                dataStateName =\"testAttachmentDataState\"\r\n                break;\r\n            case \"IDS_TESTCOMMENTS\":\r\n                url = \"comments/getTestComment\"\r\n                activeName = \"RegistrationTestComment\"\r\n                dataStateName = \"testCommentDataState\"\r\n                break;           \r\n            case \"IDS_SAMPLEATTACHMENTS\":\r\n                url = \"attachment/getSampleAttachment\"\r\n                activeName = \"RegistrationSampleAttachment\"\r\n                dataStateName = \"sampleAttachmentDataState\"\r\n                break;\r\n            default:\r\n                url = \"attachment/getTestAttachment\"\r\n                activeName = \"RegistrationTestAttachment\"\r\n                dataStateName =\"testAttachmentDataState\"\r\n                break;\r\n        }\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(url, inputParamData)\r\n                .then(response => {\r\n                    let responseData = {\r\n                        ...response.data,\r\n                        JASelectedSample: inputData.JASelectedSample || inputData.masterData.JASelectedSample,\r\n                        JASelectedTest: inputData.JASelectedTest,\r\n                        activeTabIndex: inputData.activeTabIndex,\r\n                        activeTabId: inputData.activeTabId\r\n                    }\r\n                    let skipInfo = {};\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        ...responseData,\r\n                        JASelectedTest: inputData.JASelectedTest\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            activeTabIndex: inputData.activeTabIndex,\r\n                            activeTabId: inputData.activeTabId,\r\n                            activeTestTab: inputData.activeTestKey,\r\n                            loading: false,\r\n                            activeTestKey: inputData.activeTestKey,\r\n                            screenName: inputData.activeTestKey,\r\n                            testskip: undefined,\r\n                            testtake: undefined,\r\n                            ...skipInfo\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.JASelectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\", inputData.removeElementFromArray);\r\n            let skipInfo = {};\r\n            let masterData = {\r\n                ...inputData.masterData,\r\n                JASelectedTest: inputData.JASelectedTest\r\n            }\r\n            if (masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                skipInfo = {\r\n\r\n                    [dataStateName]: {\r\n                        ...inputData[dataStateName],\r\n                        skip: 0,\r\n                        sort: undefined,\r\n                        filter: undefined\r\n                    }\r\n                }\r\n            } else {\r\n                skipInfo = {\r\n                    ...skipInfo,\r\n                    [dataStateName]: {\r\n                        ...inputData[dataStateName],\r\n                        sort: undefined,\r\n                        filter: undefined\r\n                    }\r\n                }\r\n            }\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    masterData,\r\n                    loading: false,\r\n                    showFilter: false,\r\n                    activeTestKey: inputData.activeTestKey,\r\n                    screenName: inputData.screenName,\r\n                    ...skipInfo\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\nexport function updatedObjectWithNewElement1(oldList, newList) {\r\n    oldList = [...newList, ...oldList];\r\n    return oldList;\r\n  }\r\n\r\n"]},"metadata":{},"sourceType":"module"}