{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{sortData,constructOptionList}from'../components/CommonScript';import{initRequest}from'./LoginAction';import{toast}from'react-toastify';export var SampleTypeFilterchange=function SampleTypeFilterchange(inputParam,filterSampleType){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registrationsubtypeconfigration/get\"+inputParam.methodUrl,inputParam.inputData).then(function(response){//const masterData = response.data\nvar masterData=_objectSpread(_objectSpread({},inputParam.masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{loading:false,dataState:undefined,masterData:_objectSpread(_objectSpread({},masterData),{},{filterSampleType:filterSampleType,nfilterSampleType:inputParam.inputData.nfilterSampleType})}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error.message);});};};export var getDepartmentData=function getDepartmentData(instItem,url,key,screenName,userInfo,ncontrolCode,selectedRecord){return function(dispatch){// if(instItem.ninstrumentstatus!==transactionStatus.Disposed){\ndispatch(initRequest(true));var url='';url=\"/registrationsubtypeconfigration/getDepartment\";return rsapi.post(url,{\"userinfo\":userInfo,\"nregsubtypecode\":instItem.nregsubtypecode}).then(function(response){var secMap=constructOptionList(response.data.Section||[],\"ndeptcode\",\"sdeptname\",undefined,undefined,false);var Lab=secMap.get(\"OptionList\");selectedRecord[\"ndeltacheck\"]=3;dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,Lab:Lab,isOpen:true,operation:\"create\",screenName:screenName,// openModal: true,\nopenChildModal:true,ncontrolCode:ncontrolCode,instItem:instItem,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===417){toast.info(error.response.data);}else{toast.error(error.message);}});//     }\n// else{\n//     toast.warn(intl.formatMessage({ id: \"IDS_DISPOSEDINSTRUMENT\"}));\n// }\n};};export function getDepartmentBasedUser(ndeptcode,userInfo,selectedRecord,masterData,screenName){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"registrationsubtypeconfigration/getDepartmentBasedUser\",{\"ndeptcode\":ndeptcode,\"userinfo\":userInfo,\"nregsubtypecode\":masterData.selectedRegSubType.nregsubtypecode}).then(function(response){//console.log(\" response:\", response); \nvar Users=[];if(screenName===\"IDS_DEPARTMENT\"){//let sectionusers=[];\nvar userName=constructOptionList(response.data.Users||[],\"nusercode\",\"susername\",undefined,undefined,false);Users=userName.get(\"OptionList\");//selectedRecord[\"nusercode\"]=\"\";\nselectedRecord[\"nusercode\"]=undefined;//{label:SectionUsers[0].label,value:SectionUsers[0].value,item:SectionUsers[0]};\n}else{Users=response.data;selectedRecord[\"nusercode\"]=undefined;}var isdisable=response.data.isdisable;if(isdisable){selectedRecord[\"ndeltacheck\"]=4;}else{selectedRecord[\"ndeltacheck\"]=3;}dispatch({type:DEFAULT_RETURN,payload:{// masterData,\nmasterData:_objectSpread(_objectSpread({},masterData),{},{isdisable:isdisable}),Users:Users,selectedRecord:selectedRecord,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export var getUserroleData=function getUserroleData(instItem,url,key,screenName,userInfo,ncontrolCode,selectedRecord){return function(dispatch){// if(instItem.ninstrumentstatus!==transactionStatus.Disposed){\ndispatch(initRequest(true));var url='';url=\"/registrationsubtypeconfigration/getUserRole\";return rsapi.post(url,{\"userinfo\":userInfo,\"nregsubtypecode\":instItem.nregsubtypecode}).then(function(response){var userroleMap=constructOptionList(response.data.UserRole||[],\"nuserrolecode\",\"suserrolename\",undefined,undefined,false);var Lab=userroleMap.get(\"OptionList\");selectedRecord[\"ndeltacheck\"]=3;dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,Lab:Lab,isOpen:true,operation:\"create\",screenName:screenName,// openModal: true,\nopenChildModal:true,ncontrolCode:ncontrolCode,instItem:instItem,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===417){toast.info(error.response.data);}else{toast.error(error.message);}});//     }\n// else{\n//     toast.warn(intl.formatMessage({ id: \"IDS_DISPOSEDINSTRUMENT\"}));\n// }\n};};export function getUserRoleBasedUser(nuserrolecode,userInfo,selectedRecord,masterData,screenName){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"registrationsubtypeconfigration/getUserRoleBasedUser\",{\"nuserrolecode\":nuserrolecode,\"userinfo\":userInfo,\"nregsubtypecode\":masterData.selectedRegSubType.nregsubtypecode}).then(function(response){var Users=[];var userName=constructOptionList(response.data.Users||[],\"nusercode\",\"susername\",undefined,undefined,false);Users=userName.get(\"OptionList\");selectedRecord[\"nusercode\"]=undefined;var isdisable=response.data.isdisable;if(isdisable){selectedRecord[\"ndeltacheck\"]=4;}else{selectedRecord[\"ndeltacheck\"]=3;}dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},masterData),{},{isdisable:isdisable}),Users:Users,selectedRecord:selectedRecord,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getRegtypeBasedSampleType(ndeptcode,userInfo,selectedRecord,masterData,screenName){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"registrationsubtypeconfigration/getRegtypeBasedSampleType\",{\"nsampletype\":ndeptcode,\"userinfo\":userInfo}).then(function(response){//console.log(\" response:\", response); \n// let masterData = {...masterData}\nvar responseData=_objectSpread({},response.data);dispatch({type:DEFAULT_RETURN,payload:{//masterData,   \nmasterData:_objectSpread(_objectSpread({},masterData),responseData),selectedRecord:selectedRecord,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getTabdetails(regsubtype,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));var tabdetails={nregtypecode:regsubtype.nregtypecode,nregsubtypecode:regsubtype.nregsubtypecode,nsampletypecode:regsubtype.nsampletypecode,ntransfiltertypecode:regsubtype.ntransfiltertypecode};return rsapi.post(\"registrationsubtypeconfigration/getTabdetails\",{tabdetails:tabdetails,userinfo:userInfo,nregsubtypecode:regsubtype.nregsubtypecode}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,operation:null,modalName:undefined,loading:false,dataState:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export var getListofUsers=function getListofUsers(instItem,url,key,screenName,userInfo,ncontrolCode,selectedRecord){return function(dispatch){dispatch(initRequest(true));var url='';url=\"/registrationsubtypeconfigration/getListofUsers\";return rsapi.post(url,{\"userinfo\":userInfo,\"nregsubtypecode\":instItem.nregsubtypecode}).then(function(response){var Users=[];var userName=constructOptionList(response.data.Users||[],\"nusercode\",\"susername\",undefined,undefined,false);Users=userName.get(\"OptionList\");//selectedRecord[\"nusercode\"]=\"\";\nselectedRecord[\"nusercode\"]=undefined;dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,Users:Users,isOpen:true,operation:\"create\",screenName:screenName,openChildModal:true,ncontrolCode:ncontrolCode,instItem:instItem,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===417){toast.info(error.response.data);}else{toast.error(error.message);}});};};","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/RegistrationSubtypeConfigrationAction.js"],"names":["rsapi","DEFAULT_RETURN","sortData","constructOptionList","initRequest","toast","SampleTypeFilterchange","inputParam","filterSampleType","dispatch","post","methodUrl","inputData","then","response","masterData","data","type","payload","loading","dataState","undefined","nfilterSampleType","catch","error","message","getDepartmentData","instItem","url","key","screenName","userInfo","ncontrolCode","selectedRecord","nregsubtypecode","secMap","Section","Lab","get","isOpen","operation","openChildModal","status","info","getDepartmentBasedUser","ndeptcode","selectedRegSubType","Users","userName","isdisable","warn","getUserroleData","userroleMap","UserRole","getUserRoleBasedUser","nuserrolecode","getRegtypeBasedSampleType","responseData","getTabdetails","regsubtype","tabdetails","nregtypecode","nsampletypecode","ntransfiltertypecode","userinfo","modalName","getListofUsers"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { sortData,constructOptionList } from '../components/CommonScript';\r\nimport { initRequest } from './LoginAction';\r\nimport { toast } from 'react-toastify';\r\nexport const SampleTypeFilterchange = (inputParam, filterSampleType) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registrationsubtypeconfigration/get\" + inputParam.methodUrl, inputParam.inputData)\r\n            .then(response => {\r\n                //const masterData = response.data\r\n                const masterData = {...inputParam.masterData,...response.data}\r\n                sortData(masterData);\r\n                    \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        dataState: undefined,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            filterSampleType,\r\n                            nfilterSampleType: inputParam.inputData.nfilterSampleType\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport const getDepartmentData = (instItem, url, key, screenName, userInfo, ncontrolCode, selectedRecord) => {\r\n    return function (dispatch) {\r\n       // if(instItem.ninstrumentstatus!==transactionStatus.Disposed){\r\n        dispatch(initRequest(true));\r\n        let url = ''\r\n\r\n        url = \"/registrationsubtypeconfigration/getDepartment\";\r\n\r\n        return rsapi.post(url, {\r\n                \"userinfo\": userInfo,\"nregsubtypecode\":instItem.nregsubtypecode\r\n            })\r\n            .then(response => {\r\n\r\n                const secMap = constructOptionList(response.data.Section || [], \"ndeptcode\",\r\n                    \"sdeptname\", undefined, undefined, false);\r\n                \r\n                const Lab = secMap.get(\"OptionList\");\r\n                selectedRecord[\"ndeltacheck\"] = 3;\r\n               \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedRecord,\r\n                        Lab,                       \r\n                        isOpen: true,                        \r\n                        operation: \"create\",\r\n                        screenName: screenName,\r\n                        // openModal: true,\r\n                        openChildModal:true,\r\n                        ncontrolCode: ncontrolCode,\r\n                        instItem: instItem,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 417) {\r\n                    toast.info(error.response.data)\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n//     }\r\n\r\n// else{\r\n//     toast.warn(intl.formatMessage({ id: \"IDS_DISPOSEDINSTRUMENT\"}));\r\n// }\r\n}\r\n}\r\n\r\n\r\n\r\nexport function getDepartmentBasedUser(ndeptcode, userInfo, selectedRecord, masterData, screenName) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"registrationsubtypeconfigration/getDepartmentBasedUser\", {\r\n                \"ndeptcode\": ndeptcode, \r\n                \"userinfo\": userInfo,\r\n                \"nregsubtypecode\":masterData.selectedRegSubType.nregsubtypecode\r\n            }\r\n            )\r\n            .then(response => {\r\n                //console.log(\" response:\", response); \r\n                let Users = [];\r\n                if (screenName === \"IDS_DEPARTMENT\") {\r\n                    //let sectionusers=[];\r\n                    const userName = constructOptionList(response.data.Users || [], \"nusercode\",\r\n                        \"susername\", undefined, undefined, false);\r\n                    Users = userName.get(\"OptionList\");\r\n                    //selectedRecord[\"nusercode\"]=\"\";\r\n                    selectedRecord[\"nusercode\"] = undefined; //{label:SectionUsers[0].label,value:SectionUsers[0].value,item:SectionUsers[0]};\r\n                } else {\r\n                    Users = response.data;\r\n                    selectedRecord[\"nusercode\"] = undefined;\r\n                }\r\n                let isdisable= response.data.isdisable;\r\n                if(isdisable)\r\n                {\r\n                    selectedRecord[\"ndeltacheck\"]=4\r\n                }\r\n                else{\r\n                    selectedRecord[\"ndeltacheck\"]=3\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                       // masterData,\r\n                       masterData:{...masterData,isdisable},\r\n                        Users,\r\n                        selectedRecord,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const getUserroleData = (instItem, url, key, screenName, userInfo, ncontrolCode, selectedRecord) => {\r\n    return function (dispatch) {\r\n       // if(instItem.ninstrumentstatus!==transactionStatus.Disposed){\r\n        dispatch(initRequest(true));\r\n        let url = ''\r\n\r\n        url = \"/registrationsubtypeconfigration/getUserRole\";\r\n\r\n        return rsapi.post(url, {\r\n                \"userinfo\": userInfo,\"nregsubtypecode\":instItem.nregsubtypecode\r\n            })\r\n            .then(response => {\r\n\r\n                const userroleMap = constructOptionList(response.data.UserRole || [], \"nuserrolecode\",\r\n                    \"suserrolename\", undefined, undefined, false);\r\n                \r\n                const Lab = userroleMap.get(\"OptionList\");\r\n                selectedRecord[\"ndeltacheck\"] = 3;\r\n               \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedRecord,\r\n                        Lab,                       \r\n                        isOpen: true,                        \r\n                        operation: \"create\",\r\n                        screenName: screenName,\r\n                        // openModal: true,\r\n                        openChildModal:true,\r\n                        ncontrolCode: ncontrolCode,\r\n                        instItem: instItem,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 417) {\r\n                    toast.info(error.response.data)\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n//     }\r\n\r\n// else{\r\n//     toast.warn(intl.formatMessage({ id: \"IDS_DISPOSEDINSTRUMENT\"}));\r\n// }\r\n}\r\n}\r\n\r\n\r\nexport function getUserRoleBasedUser(nuserrolecode, userInfo, selectedRecord, masterData, screenName) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"registrationsubtypeconfigration/getUserRoleBasedUser\", {\r\n                \"nuserrolecode\": nuserrolecode, \r\n                \"userinfo\": userInfo,\r\n                \"nregsubtypecode\":masterData.selectedRegSubType.nregsubtypecode\r\n            }\r\n            )\r\n            .then(response => {\r\n                \r\n                let Users = [];\r\n                const userName = constructOptionList(response.data.Users || [], \"nusercode\",\r\n                \"susername\", undefined, undefined, false);\r\n            Users = userName.get(\"OptionList\");\r\n            selectedRecord[\"nusercode\"] = undefined;\r\n            let isdisable= response.data.isdisable;\r\n            if(isdisable)\r\n            {\r\n                selectedRecord[\"ndeltacheck\"]=4\r\n            }\r\n            else{\r\n                selectedRecord[\"ndeltacheck\"]=3\r\n            }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData:{...masterData,isdisable},\r\n                        Users,\r\n                        selectedRecord,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function getRegtypeBasedSampleType(ndeptcode, userInfo, selectedRecord, masterData, screenName) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"registrationsubtypeconfigration/getRegtypeBasedSampleType\", {\r\n                \"nsampletype\": ndeptcode, \r\n                \"userinfo\": userInfo,\r\n            }\r\n            )\r\n            .then(response => {\r\n                //console.log(\" response:\", response); \r\n               // let masterData = {...masterData}\r\n                let responseData = { ...response.data }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        //masterData,   \r\n                        masterData: {...masterData,...responseData\r\n                        },                 \r\n                        selectedRecord,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function getTabdetails(regsubtype, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let tabdetails={ nregtypecode: regsubtype.nregtypecode,nregsubtypecode: regsubtype.nregsubtypecode,nsampletypecode: regsubtype.nsampletypecode,ntransfiltertypecode:regsubtype.ntransfiltertypecode}\r\n        return rsapi.post(\"registrationsubtypeconfigration/getTabdetails\", {\r\n                tabdetails: tabdetails,\r\n                userinfo: userInfo,\r\n                nregsubtypecode: regsubtype.nregsubtypecode\r\n            })\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data\r\n                };\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        operation: null,\r\n                        modalName: undefined,\r\n                        loading: false,\r\n                        dataState: undefined\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const getListofUsers = (instItem, url, key, screenName, userInfo, ncontrolCode, selectedRecord) => {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let url = ''\r\n\r\n        url = \"/registrationsubtypeconfigration/getListofUsers\";\r\n\r\n        return rsapi.post(url, {\r\n                \"userinfo\": userInfo,\"nregsubtypecode\":instItem.nregsubtypecode\r\n            })\r\n            .then(response => {\r\n\r\n                let Users = [];\r\n                const userName = constructOptionList(response.data.Users || [], \"nusercode\",\r\n                    \"susername\", undefined, undefined, false);\r\n                Users = userName.get(\"OptionList\");\r\n                //selectedRecord[\"nusercode\"]=\"\";\r\n                selectedRecord[\"nusercode\"] = undefined; \r\n               \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedRecord,\r\n                        Users,                       \r\n                        isOpen: true,                        \r\n                        operation: \"create\",\r\n                        screenName: screenName,\r\n                        openChildModal:true,\r\n                        ncontrolCode: ncontrolCode,\r\n                        instItem: instItem,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 417) {\r\n                    toast.info(error.response.data)\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}