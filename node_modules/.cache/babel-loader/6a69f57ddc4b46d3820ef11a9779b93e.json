{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{toast}from'react-toastify';import{injectIntl}from'react-intl';import rsapi from'../../rsapi';import{process}from'@progress/kendo-data-query';import{Col,Row}from'react-bootstrap';import'../../assets/styles/lims-global-theme.css';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import AddSpecification from'./AddSpecification';import AddCodedResult from'./AddCodedResult';import AddParameter from'./AddParameter';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,create_UUID,onDropAttachFileList,deleteAttachmentDropZone,Lims_JSON_stringify,replaceBackSlash}from'../../components/CommonScript';import Esign from'../audittrail/Esign';import AddTestSection from'./AddTestSection';import AddTestMethod from'./AddTestMethod';import AddTestInstrumentCategory from'./AddTestInstrumentCategory';import AddFormula from'./AddFormula';import ValidateFormula from'./ValidateFormula';import AddFile from'./AddFile';import{parameterType,transactionStatus,operators,attachmentType,FORMULAFIELDTYPE,formCode}from'../../components/Enumeration';import CustomTab from'../../components/custom-tabs/custom-tabs.component';import TestSectionTab from'./TestSectionTab';import TestMethodTab from'./TestMethodTab';import TestInstrumentCategoryTab from'./TestInstrumentCategoryTab';import TestFileTab from'./TestFileTab';import AddTestContainerType from'./AddTestContainerType';import TestContainerTypeTab from'./TestContainerTypeTab';import ParameterTab from'./ParameterTab';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import TestPackageTab from'./TestPackageTab';import AddTestPackageTest from'./AddTestPackageTest';import AddSubCodedResult from'./AddSubCodedResult';import AddTestGroupNumericSpecification from'../../pages/testgroup/AddTestGroupNumericSpecification';import AddPredefinedUserFormula from'./AddPredefinedUserFormula';var TestView=/*#__PURE__*/function(_Component){_inherits(TestView,_Component);var _super=_createSuper(TestView);function TestView(props){var _this;_classCallCheck(this,TestView);_this=_super.call(this,props);_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"//fileToDelete:file.name \n});};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.tabDetail=function(){var tabMap=new Map();tabMap.set(\"IDS_PARAMETER\",/*#__PURE__*/React.createElement(ParameterTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,TestParameter:_this.props.masterData.TestParameter,masterData:_this.props.masterData,userInfo:_this.props.userInfo,getTestDetails:_this.props.getTestDetails,inputParam:_this.props.inputParam,addParameter:_this.props.addParameter,deleteAction:_this.props.deleteAction,ConfirmDelete:_this.ConfirmDelete,addCodedResult:_this.props.addCodedResult,addSubCodedResult:_this.props.addSubCodedResult,addFormula:_this.props.addFormula,openPredefinedModal:_this.props.openPredefinedModal,onSwitchChange:_this.onSwitchChange,addParameterSpecification:_this.props.addParameterSpecification,addClinicalSpecification:_this.props.addClinicalSpecification,screenName:\"IDS_PARAMETER\",grade:_this.props.grade,dataStateChange:_this.props.dataStateChange,dataState:_this.props.clinicalspecDataState,EditSpecDetails:_this.EditSpecDetails,deleteRecord:_this.DeleteSpecDetails}));tabMap.set(\"IDS_SECTION\",/*#__PURE__*/React.createElement(TestSectionTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,dataResult:process(_this.props.masterData[\"TestSection\"],_this.props.screenName===undefined||_this.props.screenName===\"IDS_SECTION\"?_this.state.sectionDataState:{skip:0,take:10}),dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_SECTION\"?_this.state.sectionDataState:{skip:0,take:5},dataStateChange:function dataStateChange(event){return _this.setState({sectionDataState:event.dataState});},selectedTest:_this.props.masterData.SelectedTest,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,defaultRecord:_this.defaultRecord,getAvailableData:_this.props.getAvailableData,TestSection:_this.props.masterData.TestSection||[],screenName:\"IDS_SECTION\"}));tabMap.set(\"IDS_METHOD\",/*#__PURE__*/React.createElement(TestMethodTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,dataResult:process(_this.props.masterData[\"TestMethod\"],_this.props.screenName===undefined||_this.props.screenName===\"IDS_METHOD\"?_this.state.methodDataState:{skip:0,take:5})// dataResult={this.state.testmethodata && this.state.testmethodata===undefined?this.props.masterData[\"TestMethod\"]:this.state.testmethodata }\n,dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_METHOD\"?_this.state.methodDataState:{skip:0,take:5},dataStateChange:function dataStateChange(event){return _this.setState({methodDataState:event.dataState});},selectedTest:_this.props.masterData.SelectedTest,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,defaultRecord:_this.defaultRecord,getAvailableData:_this.props.getAvailableData,TestMethod:_this.props.masterData.TestMethod||[],screenName:\"IDS_METHOD\"}));tabMap.set(\"IDS_INSTRUMENTCATEGORY\",/*#__PURE__*/React.createElement(TestInstrumentCategoryTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,dataResult:process(_this.props.masterData[\"TestInstrumentCategory\"],_this.props.screenName===undefined||_this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"?_this.state.instrumentCatDataState:{skip:0,take:5}),dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"?_this.state.instrumentCatDataState:{skip:0,take:5},dataStateChange:function dataStateChange(event){return _this.setState({instrumentCatDataState:event.dataState});},selectedTest:_this.props.masterData.SelectedTest,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,defaultRecord:_this.defaultRecord,getAvailableData:_this.props.getAvailableData,TestInstrumentCategory:_this.props.masterData.TestInstrumentCategory,screenName:\"IDS_INSTRUMENTCATEGORY\"}));tabMap.set(\"IDS_FILE\",/*#__PURE__*/React.createElement(TestFileTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,dataStateChange:function dataStateChange(event){return _this.setState({testFileDataState:event.dataState});},testFileDataState:_this.state.testFileDataState,TestFile:_this.props.masterData.TestFile||[],getAvailableData:_this.props.getAvailableData,addTestFile:_this.props.addTestFile,viewTestFile:_this.viewTestFile,defaultRecord:_this.defaultRecord,screenName:\"IDS_FILE\",settings:_this.props.settings}));// if (this.props.esignRights && Object.keys(this.props.esignRights).indexOf(formCode.TESTPACKAGE.toString())!==-1){\nif(_this.props.hideQualisForms&&_this.props.hideQualisForms.findIndex(function(item){return item.nformcode===formCode.TESTPACKAGE;})===-1){tabMap.set(\"IDS_TESTPACKAGE\",/*#__PURE__*/React.createElement(TestPackageTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,dataResult:process(_this.props.masterData[\"TestPackage\"]||[],_this.props.screenName===undefined||_this.props.screenName===\"IDS_PACKAGE\"?_this.state.testPackageDataState:{skip:0,take:5}),dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_PACKAGE\"?_this.state.testPackageDataState:{skip:0,take:5},dataStateChange:function dataStateChange(event){return _this.setState({testPackageDataState:event.dataState});},selectedTest:_this.props.masterData.SelectedTest,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,defaultRecord:_this.defaultRecord,getAvailableData:_this.props.getAvailableData,TestPackage:_this.props.masterData.TestPackage,screenName:\"IDS_PACKAGE\"}));}// tabMap.set(\"IDS_TECHNIQUE\",\n//     <TestTechniqueTab\n//         controlMap={this.props.controlMap}\n//         userRoleControlRights={this.props.userRoleControlRights}\n//         dataResult={process(this.props.masterData[\"TestTechnique\"] ||[], (this.props.screenName === undefined || this.props.screenName === \"IDS_TECHNIQUE\") ? this.state.sectionDataState : { skip: 0, take: 10 })}\n//         dataState={(this.props.screenName === undefined \n//             || this.props.screenName === \"IDS_TECHNIQUE\") ? this.state.techniqueDataState : { skip: 0, take: 10 }}\n//         dataStateChange={(event) => this.setState({ techniqueDataState: event.dataState })}\n//         selectedTest={this.props.masterData.SelectedTest}\n//         userInfo={this.props.userInfo}\n//         inputParam={this.props.inputParam}\n//         deleteRecord={this.deleteRecord}\n//         defaultRecord={this.defaultRecord}\n//         getAvailableData={this.props.getAvailableData}\n//         TestTechnique={this.props.masterData.TestTechnique || []}\n//         screenName=\"IDS_TECHNIQUE\"\n//     />);\ntabMap.set(\"IDS_CONTAINERTYPE\",/*#__PURE__*/React.createElement(TestContainerTypeTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,dataResult:process(_this.props.masterData[\"Containertype\"],_this.props.screenName===undefined||_this.props.screenName===\"IDS_CONTAINERTYPE\"?_this.state.containerTypeDataState:{skip:0,take:5}),dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_CONTAINERTYPE\"?_this.state.containerTypeDataState:{skip:0,take:5},dataStateChange:function dataStateChange(event){return _this.setState({containerTypeDataState:event.dataState});},selectedTest:_this.props.masterData.SelectedTest,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,defaultRecord:_this.defaultRecord,getAvailableData:_this.props.getAvailableData,TestContainerType:_this.props.masterData.Containertype,getActiveTestContainerTypeById:_this.props.getActiveTestContainerTypeById,addContainerType:_this.props.addContainerType,intl:_this.props.intl,screenName:\"IDS_CONTAINERTYPE\"}));return tabMap;};_this.viewTestFile=function(filedata){var inputParam={inputData:{testfile:filedata,userinfo:_this.props.userInfo},classUrl:\"testmaster\",operation:\"view\",methodUrl:\"AttachedTestFile\",screenName:\"IDS_TEST\"};_this.props.viewAttachment(inputParam);};_this.DeleteSpecDetails=function(viewdetails,ncontrolCode){_this.ConfirmDelete(viewdetails,\"delete\",ncontrolCode,'TestParameterClinicalSpec','openChildModal');};_this.EditSpecDetails=function(viewdetails,ncontrolCode){_this.props.addClinicalSpecification(\"update\",viewdetails,_this.props.userInfo,ncontrolCode);};_this.deleteRecord=function(deleteParam){var _inputData;var dataResultRecord;var skipDataRecords;var methodUrl=deleteParam.methodUrl;var selected=deleteParam.selectedRecord;var dataState=undefined;if(_this.props.screenName===\"IDS_SECTION\"){dataResultRecord=process(_this.props.masterData[\"TestSection\"],_this.state.sectionDataState);dataState=_this.state.sectionDataState;}else if(_this.props.screenName===\"IDS_METHOD\"){dataResultRecord=process(_this.props.masterData[\"TestMethod\"],_this.state.methodDataState);dataState=_this.state.methodDataState;}else if(_this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"){dataResultRecord=process(_this.props.masterData[\"TestInstrumentCategory\"],_this.state.instrumentCatDataState);dataState=_this.state.instrumentCatDataState;}else if(_this.props.screenName===\"IDS_CONTAINERTYPE\"){dataResultRecord=process(_this.props.masterData[\"TestMethod\"],_this.state.containerTypeDataState);dataState=_this.state.containerTypeDataState;}else if(_this.props.screenName===\"IDS_TESTPACKAGE\"){dataResultRecord=process(_this.props.masterData[\"TestPackage\"],_this.state.testPackageDataState);dataState=_this.state.testPackageDataState;}else if(_this.props.screenName===\"IDS_TESTFILE\"||_this.props.screenName===\"IDS_FILE\"){dataResultRecord=process(_this.props.masterData[\"TestFile\"],_this.state.testPackageDataState);dataState=_this.state.testFileDataState;}//ALPD-554 Test Master: Section, Method, Instrument, and Container Type cannot be deleted.\nif(dataResultRecord&&dataResultRecord.data){if(dataResultRecord.data.length===1){var skipcount=dataState.skip>0?dataState.skip-dataState.take:dataState.skip;skipDataRecords={skip:skipcount,take:dataState.take};}else{skipDataRecords=dataState;}}var inputParam={inputData:(_inputData={},_defineProperty(_inputData,methodUrl.toLowerCase(),selected),_defineProperty(_inputData,\"userinfo\",_objectSpread(_objectSpread({},_this.props.userInfo),{},{//ALPD-1628(while file saving,audit trail is not captured respective language)\nslanguagename:Lims_JSON_stringify(_this.props.userInfo.slanguagename)})),_defineProperty(_inputData,\"isQualisLite\",parseInt(_this.props.settings[71])),_inputData),classUrl:\"testmaster\",operation:deleteParam.operation,methodUrl:methodUrl,screenName:_this.props.screenName,//Added by sonia on 19th Feb 2025 for jira id:ALPD-5455\ndataState:skipDataRecords};var masterData=_this.props.masterData;if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,screenName:_this.props.screenName,operation:deleteParam.operation,selectedRecord:{}}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\",{});}};_this.defaultRecord=function(defaultParam,event){var _inputData2;var methodUrl=defaultParam.methodUrl;var dataItem=defaultParam.selectedRecord;// dataItem[\"ndefaultstatus\"] = transactionStatus.YES;\nvar dataState=undefined;if(_this.props.screenName===\"IDS_SECTION\"){dataState=_this.state.sectionDataState;}else if(_this.props.screenName===\"IDS_METHOD\"){dataState=_this.state.methodDataState;}else if(_this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"){dataState=_this.state.instrumentCatDataState;}else if(_this.props.screenName===\"IDS_CONTAINERTYPE\"){dataState=_this.state.containerTypeDataState;}else if(_this.props.screenName===\"IDS_TESTPACKAGE\"){dataState=_this.state.testPackageDataState;}var postParam={inputListName:\"TestMaster\",selectedObject:\"SelectedTest\",primaryKeyField:\"ntestcode\"};var inputParam={inputData:(_inputData2={},_defineProperty(_inputData2,methodUrl.toLowerCase(),dataItem),_defineProperty(_inputData2,\"userinfo\",_this.props.userInfo),_defineProperty(_inputData2,\"isQualisLite\",parseInt(_this.props.settings[71])),_inputData2),classUrl:\"testmaster\",operation:\"setDefault\",methodUrl:methodUrl,dataState:dataState,postParam:postParam};var masterData=_this.props.masterData;if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,defaultParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,screenName:\"Test\",operation:defaultParam.operation,selectedRecord:{}}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\",{});}};_this.onSwitchChange=function(item,key,methodUrl,event,defaultTestFormulaId){var _inputData3;var masterData=_this.props.masterData;var dataItem=item;// dataItem[\"ndefaultstatus\"] = 3;\n//dataItem['ndefaultstatus'] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\nvar inputParam={inputData:(_inputData3={},_defineProperty(_inputData3,key,dataItem),_defineProperty(_inputData3,\"userinfo\",_this.props.userInfo),_defineProperty(_inputData3,\"isQualisLite\",parseInt(_this.props.settings[71])),_inputData3),classUrl:\"testmaster\",operation:\"setDefault\",methodUrl:methodUrl};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,defaultTestFormulaId)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,screenName:\"Test\",operation:\"setDefault\",selectedRecord:{}}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\",{});}};_this.hideValidateFormula=function(){_this.setState({openValidate:false,showCalculate:false,formulaScreenName:\"\",validateFormulaMandyFields:[]});};_this.validateFormula=function(testData){var sformulacalculationcode=_this.state.selectedRecord.sformulacalculationcode;if(sformulacalculationcode){if(sformulacalculationcode.includes(\"$D\")||sformulacalculationcode.includes(\"$P\")){rsapi.post(\"/testmaster/validateTestFormula\",{ntestcode:testData.ntestcode,\"sformula\":sformulacalculationcode,userinfo:_this.props.userInfo}).then(function(response){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[\"formulainput\"]={};var validateFormulaMandyFields=response.data.map(function(item,index){return{\"idsName\":\"IDS_FILLALLFIELDS\",\"dataField\":\"dynamicformulafield_\"+index,\"mandatory\":true};});_this.setState({openValidate:true,DynamicFields:response.data,dynamicField:[],selectedRecord:selectedRecord,formulaScreenName:\"IDS_VALIDATEFORMULA\",showCalculate:true,validateFormulaMandyFields:validateFormulaMandyFields});}).catch(function(error){toast.error(error.message);});}else{var inputParam={dynamicformulafields:[],sformulacalculationcode:_this.state.selectedRecord.sformulacalculationcode,userinfo:_this.props.userInfo};_this.calculateFormulaFunction(inputParam);}}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_ENTERFORMULA\"}));}};_this.calculateFormula=function(){var dynamicField=_this.state.dynamicField;var dynamicformulafields=Object.keys(dynamicField).map(function(keyname){return dynamicField[keyname];});var inputParam={dynamicformulafields:dynamicformulafields,sformulacalculationcode:_this.state.selectedRecord.sformulacalculationcode,userinfo:_this.props.userInfo};_this.calculateFormulaFunction(inputParam);};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;if(_this.props.loadEsign){//ALPD-707 fix\nif(_this.props.operation===\"delete\"||_this.props.operation===\"Default\"||_this.props.operation===\"setDefault\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;// ALPD-5604 - commented by Gowtham R on 01/04/25 - testmaster paratemeter edit e-sign agree gets disable.\n// selectedRecord[\"agree\"] = 4;\nselectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName,caseNo){var selectedRecord=_this.state.selectedRecord||{};switch(caseNo){case 1:if(fieldName===\"sparametername\"){selectedRecord[fieldName]=comboData;selectedRecord[\"sparametersynonym\"]=comboData.value;}else if(fieldName===\"nunitcode\"){//ALPD-3637-Vignesh R(02-08-2024)-- Test master--> parameter records are disappeared when clicking the refresh button.\nselectedRecord[\"noperatorcode\"]=-1;selectedRecord[\"nconversionfactor\"]=\"\";selectedRecord[\"ndestinationunitcode\"]=\"\";selectedRecord[\"sunitname\"]=\"\";selectedRecord[\"sunitname1\"]=\"\";selectedRecord[\"nunitcode\"]=comboData;_this.props.getUnitConversion(_this.state.selectedRecord.nunitcode.value,_this.props.masterData,_this.props.userInfo,selectedRecord);}else if(fieldName===\"ndestinationunitcode\"){if(comboData!==null){selectedRecord[\"ndestinationunitcode\"]=comboData;_this.props.getConversionOperator(_this.state.selectedRecord.nunitcode.value,_this.state.selectedRecord.ndestinationunitcode.value,_this.props.masterData,_this.props.userInfo,selectedRecord);}else{delete selectedRecord[\"ndestinationunitcode\"];//ALPD-3521\ndelete selectedRecord[\"soperator\"];delete selectedRecord[\"nconversionfactor\"];selectedRecord[\"noperatorcode\"]=-1;}}else{selectedRecord[fieldName]=comboData;}_this.setState({selectedRecord:selectedRecord});break;case 2:var parameterData=_this.props.parameterData;var item=comboData['item'];var needUnit=true;var needRoundingDigit=true;var needCodedResult=true;var needActualResult=true;var npredefinedcode=4;if(item[\"nunitrequired\"]===3){needUnit=false;selectedRecord[\"nunitcode\"]=_this.props.parameterData.defaultUnit;}else{selectedRecord[\"nunitcode\"]=\"\";//ALPD-3521\nselectedRecord[\"ndestinationunitcode\"]=\"\";selectedRecord[\"noperatorcode\"]=-1;selectedRecord[\"sunitname\"]=\"\";selectedRecord[\"sunitname1\"]=\"\";selectedRecord[\"nconversionfactor\"]=\"\";// selectedRecord[\"nunitcode\"] = \"\";\n}if(item[\"nroundingrequired\"]===3){needRoundingDigit=false;}else{selectedRecord[\"nroundingdigits\"]=\"0\";}if(item[\"npredefinedrequired\"]===3){needCodedResult=false;npredefinedcode=item[\"npredefinedrequired\"];}else{selectedRecord[\"spredefinedname\"]=\"\";}if(item[\"ngraderequired\"]===3){needActualResult=false;selectedRecord[\"ngradecode\"]=_this.props.parameterData.defaultGrade;}else{selectedRecord[\"ngradecode\"]=\"\";}selectedRecord[fieldName]=comboData;var parameterInfo={typeName:DEFAULT_RETURN,data:{selectedRecord:selectedRecord,parameterData:_objectSpread(_objectSpread({},parameterData),{},{needUnit:needUnit,needRoundingDigit:needRoundingDigit,needCodedResult:needCodedResult,needActualResult:needActualResult,npredefinedcode:npredefinedcode})}};_this.props.updateStore(parameterInfo);break;case 3:selectedRecord[fieldName]=comboData;_this.props.formulaChangeFunction({ntestcategorycode:comboData.value,nFlag:2,userinfo:_this.props.userInfo},_this.props.formulaData,1,selectedRecord,'/changeTestCatgoryInFormula');break;case 4:selectedRecord[fieldName]=comboData;_this.props.formulaChangeFunction({ntestcode:comboData.value,nFlag:3,userinfo:_this.props.userInfo},_this.props.formulaData,2,selectedRecord,'/changeTestInFormula');break;default:break;}};_this.onEsignInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?3:4;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,caseNo,optional){var selectedRecord=_this.state.selectedRecord||{};switch(caseNo){case 1:if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else if(event.target.type==='radio'){selectedRecord[event.target.name]=optional;//  selectedRecord[\"sfilename\"]=\"\";\n}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});break;case 4:var inputValue=event.target.value;if(/^-?\\d*?\\.?\\d*?$/.test(inputValue)||inputValue===\"\"){selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});break;case 5:if(optional.ndynamicformulafieldcode===FORMULAFIELDTYPE.INTEGER&&optional.sdescription.indexOf('P$')===-1){var value=event.target.value.replace(/[^-^0-9]/g,'');var dynamicField=_this.state.dynamicField||[];if(/^-?\\d*?$/.test(value)){if(!selectedRecord['formulainput']){selectedRecord['formulainput']={};}selectedRecord['formulainput'][event.target.name]=value;dynamicField[event.target.name]={sparameter:optional.sdescription,svalues:value};}else if(value===\"\"){if(!selectedRecord['formulainput']){selectedRecord['formulainput']={};}selectedRecord['formulainput'][event.target.name]=value;dynamicField[event.target.name]={sparameter:optional.sdescription,svalues:value};}_this.setState({dynamicField:dynamicField,selectedRecord:selectedRecord});break;}else{var _value=event.target.value.replace(/[^-^0-9.]/g,'');var _dynamicField=_this.state.dynamicField||[];if(/^-?\\d*?\\.?\\d*?$/.test(_value)||_value!==\"\"){if(!selectedRecord['formulainput']){selectedRecord['formulainput']={};}selectedRecord['formulainput'][event.target.name]=_value;_dynamicField[event.target.name]={sparameter:optional.sdescription,svalues:_value};}_this.setState({dynamicField:_dynamicField,selectedRecord:selectedRecord});break;}case 6:// selectedRecord[event.target.name] = selectedRecord[\"sresultparacomment\"] = { label: event.target.value, value: event.target.value };\n// this.setState({ selectedRecord });\n// break;\nselectedRecord[event.target.name]=selectedRecord[\"spredefinedsynonym\"]=event.target.value;//selectedRecord[event.target.name] = selectedRecord[\"sresultparacomment\"] = event.target.value;\n//selectedRecord[\"sparametername\"] = { label: event.target.value, value: event.target.value };\n_this.setState({selectedRecord:selectedRecord});break;case 7:var inputValues=event.target.value;if(/^-?\\d*?\\.?\\d*?$/.test(inputValues)||inputValues===\"\"){selectedRecord[event.target.name]=event.target.value;}if(selectedRecord[\"sresultvalue\"]!==\"\"&&selectedRecord[\"sresultvalue\"]!==undefined&&selectedRecord[\"sresultvalue\"].value!==-1){selectedRecord[\"ngradecode\"]=_this.props.parameterData.grade[3];}else if(selectedRecord[\"sresultvalue\"]===\"\"){delete selectedRecord[\"ngradecode\"];}_this.setState({selectedRecord:selectedRecord});break;case 8:var inputvalues=event.target.value;if(/^-?\\d*?\\.?\\d*?$/.test(inputvalues)||inputvalues===\"\"){selectedRecord[event.target.name]=event.target.value;}if(selectedRecord[\"sresultvalue\"]!==\"\"&&(selectedRecord[\"ngradecode\"]===undefined||selectedRecord[\"ngradecode\"].value===-1)){selectedRecord[\"ngradecode\"]=_this.props.parameterData.gradenew[3];}else if(selectedRecord[\"sresultvalue\"]===\"\"){delete selectedRecord[\"ngradecode\"];}_this.setState({selectedRecord:selectedRecord});break;default:break;}};_this.onNumericInputChange=function(value,name,secondaryFieldName){console.log(\"value:\",value,name);var selectedRecord=_this.state.selectedRecord||{};if(name===\"nroundingdigits\"){var values=value.target.value;//.replace(/[^-^0-9]/g, '');\nif(/^\\d*?$/.test(values)||values===\"\"){console.log(\"val:\",values);selectedRecord[name]=values;}}else{selectedRecord[name]=value;if(secondaryFieldName!==undefined){if(selectedRecord[name]===0||selectedRecord[name]===undefined){selectedRecord[\"unitMandatory\"]=false;selectedRecord[\"nunitcode\"]=undefined;}else{selectedRecord[\"unitMandatory\"]=true;}}}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){var inputParam={};var defaultInput={};var isValidRequest=true;var clearSelectedRecordField=[];if(_this.props.screenName===\"IDS_PARAMETER\"){inputParam=_this.onSaveParameter(saveType,formRef);defaultInput={nparametertypecode:_this.state.selectedRecord.nparametertypecode,//   ngradecode: this.state.selectedRecord.ngradecode,\nnunitcode:\"\"};clearSelectedRecordField=[//{ \"controlType\": \"textbox\", \"idsName\":\"IDS_TESTNAME\", \"dataField\": \"stestname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\n//{ \"controlType\": \"textarea\", \"idsName\": \"IDS_TESTSYNONYM\", \"dataField\": \"stestsynonym\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\n//{ \"controlType\": \"textarea\", \"idsName\": \"IDS_SHORTNAME\", \"dataField\": \"sshortname\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\n//{ \"controlType\": \"textarea\", \"idsName\": \"IDS_PRICE\", \"dataField\": \"ncost\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\n//{ \"controlType\": \"textarea\", \"idsName\": \"IDS_TESTPROCEDURE\", \"dataField\": \"sdescription\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\n//{ \"controlType\": \"textarea\", \"idsName\": \"IDS_TAT\", \"dataField\": \"ntat\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\n//{ \"controlType\": \"textarea\", \"idsName\": \"IDS_TESTPLATFORM\", \"dataField\": \"stestplatform\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\n{\"controlType\":\"textarea\",\"idsName\":\"IDS_PARAMETERSYNONYM\",\"dataField\":\"sparametersynonym\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_ROUNDINGDIGITS\",\"dataField\":\"nroundingdigits\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_CONVERSIONOPERATOR\",\"dataField\":\"soperator\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_CONVERSIONFACTOR\",\"dataField\":\"nconversionfactor\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_DELTACHECKTIMEFRAME\",\"dataField\":\"ndeltacheckframe\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_DELTACHECKLIMIT\",\"dataField\":\"ndeltachecklimitcode\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_CODEDRESULT\",\"dataField\":\"spredefinedname\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_CODEDRESULTSYNONYM\",\"dataField\":\"spredefinedsynonym\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_RESULTPARAMETERCOMMENTS\",\"dataField\":\"spredefinedcomments\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},//{ \"controlType\": \"textarea\", \"idsName\": \"IDS_ALERTMESSAGE\", \"dataField\": \"salertmessage\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\n//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_ACCREDITED\", \"dataField\": \"naccredited\", \"width\": \"200px\", \"controlName\": \"ncategorybasedflow\",\"isClearField\":true,\"preSetValue\":63 },\n//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_ACTIVE\", \"dataField\": \"ntransactionstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":1 },\n//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_TRAININGNEEDED\", \"dataField\": \"ntrainingneed\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\n{\"controlType\":\"checkbox\",\"idsName\":\"IDS_DELTACHECK\",\"dataField\":\"ndeltacheck\",\"width\":\"150px\",\"controlName\":\"ndefaultstatus\",\"mandatoryLabel\":\"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4}//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_AlERTFORRESULTENTRY\", \"dataField\": \"nneedresultentryalert\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\n//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_SUBCODERESULTNEED\", \"dataField\": \"nneedsubcodedresult\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 }\n];}else if(_this.props.screenName===\"IDS_CODEDRESULT\"){inputParam=_this.onSaveCodedResult(saveType,formRef);clearSelectedRecordField=[{\"controlType\":\"textarea\",\"idsName\":\"IDS_CODEDRESULT\",\"dataField\":\"spredefinedname\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_CODEDRESULTSYNONYM\",\"dataField\":\"spredefinedsynonym\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_RESULTPARAMETERCOMMENTS\",\"dataField\":\"spredefinedcomments\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"checkbox\",\"idsName\":\"IDS_AlERTFORRESULTENTRY\",\"dataField\":\"nneedresultentryalert\",\"width\":\"150px\",\"controlName\":\"ndefaultstatus\",\"mandatoryLabel\":\"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4},{\"controlType\":\"checkbox\",\"idsName\":\"IDS_SUBCODERESULTNEED\",\"dataField\":\"nneedsubcodedresult\",\"width\":\"150px\",\"controlName\":\"ndefaultstatus\",\"mandatoryLabel\":\"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4},{\"controlType\":\"textarea\",\"idsName\":\"IDS_ALERTMESSAGE\",\"dataField\":\"salertmessage\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true}];}else if(_this.props.screenName===\"IDS_SPECIFICATION\"){var selectedRecord=_this.props.selectedRecord;if(selectedRecord[\"sminb\"]||selectedRecord[\"smina\"]||selectedRecord[\"smaxa\"]||selectedRecord[\"smaxb\"]||selectedRecord[\"sminlod\"]||selectedRecord[\"smaxlod\"]||selectedRecord[\"sminloq\"]||selectedRecord[\"smaxloq\"]||selectedRecord[\"sdisregard\"]||selectedRecord[\"sresultvalue\"]){inputParam=_this.onSaveSpecification(saveType,formRef);clearSelectedRecordField=[{\"controlType\":\"textarea\",\"idsName\":\"IDS_MINA\",\"dataField\":\"smina\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MAXA\",\"dataField\":\"smaxa\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MINLOQ\",\"dataField\":\"sminloq\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MAXLOQ\",\"dataField\":\"smaxloq\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_DISREGARDED\",\"dataField\":\"sdisregard\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MINB\",\"dataField\":\"sminb\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MAXB\",\"dataField\":\"smaxb\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MINLOD\",\"dataField\":\"sminlod\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MAXLOD\",\"dataField\":\"smaxlod\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_DEFAULTRESULT\",\"dataField\":\"sresultvalue\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MAXVALUES\",\"dataField\":\"smaxlod\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_DEFAULTRESULT\",\"dataField\":\"sresultvalue\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true}//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"ndefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\n//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"nlinkdefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\n];}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_ENTERSPECLIMIT\"}));isValidRequest=false;}}else if(_this.props.screenName===\"IDS_CLINICALSPEC\"){inputParam=_this.onSaveClinicalSpec(saveType,formRef);clearSelectedRecordField=[{\"controlType\":\"textarea\",\"idsName\":\"IDS_FROMAGE\",\"dataField\":\"nfromage\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_TOAGE\",\"dataField\":\"ntoage\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_LOWA\",\"dataField\":\"nlowa\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_HIGHA\",\"dataField\":\"nhigha\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MINVALUES\",\"dataField\":\"sminloq\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MAXVALUES\",\"dataField\":\"smaxloq\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_DISREGARDED\",\"dataField\":\"sdisregard\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_LOWB\",\"dataField\":\"nlowb\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_HIGHB\",\"dataField\":\"nhighb\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MINVALUES\",\"dataField\":\"sminlod\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_MAXVALUES\",\"dataField\":\"smaxlod\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_DEFAULTRESULT\",\"dataField\":\"sresultvalue\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true}//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"ndefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\n//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"nlinkdefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\n];}else if(_this.props.screenName===\"IDS_FORMULA\"){inputParam=_this.onSaveFormula(saveType,formRef);clearSelectedRecordField=[{\"controlType\":\"textarea\",\"idsName\":\"IDS_FORMULANAME\",\"dataField\":\"sformulaname\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_INPUT\",\"dataField\":\"userinput\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_SYNTAX\",\"dataField\":\"syntax\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_FORMULA\",\"dataField\":\"sformulacalculationdetail\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_VALIDATEFORMULA\",\"dataField\":\"query\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_VALIDATEDRESULT\",\"dataField\":\"result\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_SYNTAX\",\"dataField\":\"sfunctionsyntax\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true}//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"ndefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\n//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"nlinkdefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\n];}else if(_this.props.screenName===\"IDS_PREDEFINEDFORMULA\"){inputParam=_this.onSavePreDefinedFormula(saveType,formRef);clearSelectedRecordField=[{\"controlType\":\"textarea\",\"idsName\":\"IDS_FORMULANAME\",\"dataField\":\"sformulaname\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true}];}else if(_this.props.screenName===\"IDS_TESTFILE\"){inputParam=_this.onSaveTestFile(saveType,formRef);// clearSelectedRecordField = [\n//     { \"controlType\": \"textarea\", \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\n//     { \"controlType\": \"textarea\", \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\n//     { \"controlType\": \"textarea\", \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"slinkdescription\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\n//     { \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"ndefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\n//     { \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"nlinkdefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\n// ]\nclearSelectedRecordField=[];}else if(_this.props.screenName===\"IDS_CONTAINERTYPE\"){inputParam=_this.saveContainerType(saveType,formRef);clearSelectedRecordField=[{\"controlType\":\"textarea\",\"idsName\":\"IDS_QUANTITY\",\"dataField\":\"nquantity\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true}];}else{inputParam=_this.saveTestData(saveType,formRef);}if(isValidRequest){if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{if(_this.props.screenName===\"IDS_PARAMETER\"||_this.props.screenName===\"IDS_TESTFILE\"||_this.props.screenName===\"IDS_CONTAINERTYPE\"||_this.props.screenName===\"IDS_CODEDRESULT\"||_this.props.screenName===\"IDS_PREDEFINEDFORMULA\"||_this.props.screenName===\"IDS_FORMULA\"||_this.props.screenName===\"IDS_CLINICALSPEC\"||_this.props.screenName===\"IDS_SPECIFICATION\"){_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\",defaultInput,\"\",clearSelectedRecordField);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\",defaultInput);}}}};_this.onSavePreDefinedFormula=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var selectedParameter=_this.props.masterData.selectedParameter;var testformula={ntestcode:selectedParameter[\"ntestcode\"],ntestparametercode:selectedParameter[\"ntestparametercode\"],ndefaultstatus:transactionStatus.NO,nispredefinedformula:transactionStatus.YES,nstatus:transactionStatus.ACTIVE,sformulaname:_this.state.selectedRecord.sformulaname,sformulacalculationcode:\"\",sformulacalculationdetail:_this.state.selectedRecord.sformulaname,npredefinedformulacode:_this.state.selectedRecord.npredefinedformulacode&&_this.state.selectedRecord.npredefinedformulacode.value};var selectedId=null;var postParam=undefined;if(_this.props.operation===\"update\"){// edit\npostParam={inputListName:\"TestMaster\",selectedObject:\"SelectedTest\",primaryKeyField:\"ntestcode\"};selectedId=selectedRecord[\"ntestparametercode\"];}var inputParam={inputData:{testformula:testformula,userinfo:_this.props.userInfo,//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\n\"isQualisLite\":parseInt(_this.props.settings[71])},classUrl:\"testmaster\",operation:\"create\",methodUrl:\"TestFormula\",saveType:saveType,formRef:formRef,postParam:postParam,selectedRecord:_objectSpread({},_this.state.selectedRecord)};return inputParam;};_this.onSaveParameter=function(saveType,formRef){var storeData=_this.props;var inputData={};var customobject=null;var userInfo=storeData.userInfo;var postParam=undefined;var selectedRecord=_this.state.selectedRecord;var testColumns=[{\"ntestparametercode\":\"int\"},{\"nparametertypecode\":\"input\"},{\"nunitcode\":\"input\"},{\"ndestinationunitcode\":\"input\"},{\"noperatorcode\":\"int\"},{\"nconversionfactor\":\"float\"},{\"sparametername\":\"input\"},{\"sparametersynonym\":\"string\"},{\"nroundingdigits\":\"int\"},{\"objPredefinedParameter\":\"customobject\"},{\"ndeltachecklimitcode\":\"float\"},{\"ndeltacheck\":\"int\"},{\"ndeltaunitcode\":\"input\"},{\"ndeltacheckframe\":\"int\"},{\"nresultaccuracycode\":\"input\"}];if(storeData.operation===\"create\"){inputData={\"testparameter\":{nisadhocparameter:transactionStatus.NO,nisvisible:transactionStatus.YES,nstatus:transactionStatus.ACTIVE}};}else{inputData={\"testparameter\":{}};var selectedId=null;if(storeData.operation===\"update\"){// edit\npostParam={inputListName:\"TestMaster\",selectedObject:\"SelectedTest\",primaryKeyField:\"ntestcode\"};selectedId=selectedRecord[\"ntestparametercode\"];}}if(selectedRecord[\"nparametertypecode\"]){if(_this.props.parameterData.npredefinedcode===transactionStatus.YES){customobject={};customobject[\"ntestparametercode\"]=selectedRecord[\"ntestparametercode\"];customobject[\"ntestpredefinedcode\"]=selectedRecord[\"ntestpredefinedcode\"];customobject[\"spredefinedname\"]=selectedRecord[\"spredefinedname\"].trim();customobject[\"nstatus\"]=1;customobject[\"ndefaultstatus\"]=transactionStatus.YES;customobject[\"ngradecode\"]=selectedRecord[\"ngradecode\"]?selectedRecord[\"ngradecode\"].value?selectedRecord[\"ngradecode\"].value:-1:-1;// if (selectedRecord[\"sresultparacomment\"]) {\ncustomobject[\"spredefinedsynonym\"]=selectedRecord[\"spredefinedsynonym\"]?selectedRecord[\"spredefinedsynonym\"].trim():\"\";//customobject[\"sresultparacomment\"] = selectedRecord[\"sresultparacomment\"] ? selectedRecord[\"sresultparacomment\"].trim() : \"\";\n// }\n}inputData[\"userinfo\"]=userInfo;//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\ninputData[\"isQualisLite\"]=parseInt(_this.props.settings[71]);testColumns.map(function(item){var key=Object.keys(item)[0];var value=Object.values(item)[0];if(value===\"input\"){return inputData[\"testparameter\"][key]=selectedRecord[key]?selectedRecord[key].value?selectedRecord[key].value:-1:-1;}else if(value===\"int\"){return inputData[\"testparameter\"][key]=selectedRecord[key]?selectedRecord[key]:0;}else if(value===\"string\"){return inputData[\"testparameter\"][key]=selectedRecord[key]?selectedRecord[key].trim():\"\";}else if(value===\"customobject\"){return inputData[\"testparameter\"][key]=customobject;}else if(value===\"float\"){return inputData[\"testparameter\"][key]=selectedRecord[key]?selectedRecord[key]:0.0;}else{return null;}});inputData[\"testparameter\"][\"ntestcode\"]=storeData.masterData[\"SelectedTest\"][\"ntestcode\"];inputData[\"testparameter\"][\"sdisplaystatus\"]=selectedRecord[\"nparametertypecode\"].label;}var inputParam={inputData:inputData,classUrl:\"testmaster\",operation:storeData.operation,methodUrl:\"TestParameter\",saveType:saveType,formRef:formRef,postParam:postParam,selectedRecord:_objectSpread({},_this.state.selectedRecord)};return inputParam;};_this.onSaveSpecification=function(saveType,formRef){var selectedRecord=_this.props.selectedRecord;var columns=[{\"ntestparametercode\":\"int\"},{\"ntestparamnumericcode\":\"int\"},{\"sminb\":\"string\"},{\"smina\":\"string\"},{\"smaxa\":\"string\"},{\"smaxb\":\"string\"},{\"sminlod\":\"string\"},{\"smaxlod\":\"string\"},{\"sminloq\":\"string\"},{\"smaxloq\":\"string\"},{\"sdisregard\":\"string\"},{\"sresultvalue\":\"string\"}];var inputData={\"testparameternumeric\":{nstatus:1},userinfo:_this.props.userInfo,//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\n\"isQualisLite\":parseInt(_this.props.settings[71])};inputData[\"testparameternumeric\"][\"ngradecode\"]=selectedRecord.ngradecode?selectedRecord.ngradecode.value:-1;columns.map(function(item){var key=Object.keys(item)[0];var value=Object.values(item)[0];if(value===\"int\"){return inputData[\"testparameternumeric\"][key]=selectedRecord[key]?selectedRecord[key]:0;}else if(value===\"string\"){return inputData[\"testparameternumeric\"][key]=selectedRecord[key]?selectedRecord[key]===\"0\"?selectedRecord[key]:selectedRecord[key].replace(/^0+/,''):null;}else{return null;}});var selectedId=null;var postParam=undefined;if(_this.props.operation===\"update\"){// edit\npostParam={inputListName:\"TestMaster\",selectedObject:\"SelectedTest\",primaryKeyField:\"ntestcode\"};selectedId=selectedRecord[\"ntestparametercode\"];}var inputParam={inputData:inputData,classUrl:\"testmaster\",operation:_this.props.operation,methodUrl:\"TestParameterNumeric\",saveType:saveType,formRef:formRef,postParam:postParam,selectedRecord:_objectSpread({},_this.state.selectedRecord)};return inputParam;};_this.onSaveClinicalSpec=function(saveType,formRef){var selectedRecord=_this.props.selectedRecord;var TestGroupAddSpecification={nstatus:transactionStatus.ACTIVE,ntestparametercode:_this.props.masterData.selectedParameter[\"ntestparametercode\"],ngendercode:selectedRecord[\"ngendercode\"]?selectedRecord[\"ngendercode\"]&&selectedRecord[\"ngendercode\"].value:-1,nfromage:selectedRecord[\"nfromage\"],ntoage:selectedRecord[\"ntoage\"],shigha:selectedRecord[\"nhigha\"]||'',shighb:selectedRecord[\"nhighb\"]||'',slowa:selectedRecord[\"nlowa\"]||'',slowb:selectedRecord[\"nlowb\"]||'',sminlod:selectedRecord[\"sminlod\"]||'',smaxlod:selectedRecord[\"smaxlod\"]||'',sminloq:selectedRecord[\"sminloq\"]||'',smaxloq:selectedRecord[\"smaxloq\"]||'',sdisregard:selectedRecord[\"sdisregard\"]||'',sresultvalue:selectedRecord[\"sresultvalue\"]||'',ngradecode:selectedRecord[\"ngradecode\"]&&selectedRecord[\"ngradecode\"].value||-1,ntestmasterclinicspeccode:selectedRecord[\"ntestmasterclinicspeccode\"],nfromageperiod:selectedRecord[\"nfromageperiod\"]&&selectedRecord[\"nfromageperiod\"].value||-1,ntoageperiod:selectedRecord[\"ntoageperiod\"]&&selectedRecord[\"ntoageperiod\"].value||-1};var inputData={\"TestGroupAddSpecification\":_objectSpread(_objectSpread({},TestGroupAddSpecification),{},{nstatus:1}),userinfo:_this.props.userInfo,//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\n\"isQualisLite\":parseInt(_this.props.settings[71])};var selectedId=null;var postParam=undefined;if(_this.props.operation===\"update\"){// edit\npostParam={inputListName:\"TestMaster\",selectedObject:\"SelectedTest\",primaryKeyField:\"ntestcode\"};selectedId=selectedRecord[\"ntestparametercode\"];}var inputParam={inputData:inputData,classUrl:\"testmaster\",operation:_this.props.operation,methodUrl:\"TestParameterClinicalSpec\",saveType:saveType,formRef:formRef,postParam:postParam,selectedRecord:_objectSpread({},_this.state.selectedRecord)};return inputParam;};_this.onSaveCodedResult=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var testPredefinedParameter={spredefinedname:selectedRecord[\"spredefinedname\"].trim(),ngradecode:selectedRecord[\"ngradecode\"]?selectedRecord[\"ngradecode\"].value?selectedRecord[\"ngradecode\"].value:-1:-1,ntestparametercode:selectedRecord[\"ntestparametercode\"],ntestpredefinedcode:selectedRecord[\"ntestpredefinedcode\"],//sresultparacomment:selectedRecord[\"sresultparacomment\"],\nspredefinedsynonym:selectedRecord[\"spredefinedsynonym\"],spredefinedcomments:selectedRecord[\"spredefinedcomments\"],nstatus:transactionStatus.ACTIVE,ndefaultstatus:selectedRecord[\"ndefaultstatus\"]//transactionStatus.NO\n};//let selectedId = null;\nvar postParam=undefined;if(_this.props.operation===\"update\"){// edit\npostParam={inputListName:\"TestMaster\",selectedObject:\"SelectedTest\",primaryKeyField:\"ntestcode\"};//selectedId = selectedRecord[\"ntestparametercode\"];               \n}var inputParam={inputData:{testpredefinedparameter:testPredefinedParameter,userinfo:_this.props.userInfo,//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\n\"isQualisLite\":parseInt(_this.props.settings[71])},classUrl:\"testmaster\",operation:_this.props.operation,methodUrl:\"TestPredefinedParameter\",saveType:saveType,formRef:formRef,postParam:postParam,selectedRecord:_objectSpread({},_this.state.selectedRecord)};return inputParam;};_this.onSaveFormula=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var formulafield=[\"sformulaname\",\"sformulacalculationcode\",\"sformulacalculationdetail\"];var selectedParameter=_this.props.masterData.selectedParameter;var testformula={ntestcode:selectedParameter[\"ntestcode\"],ntestparametercode:selectedParameter[\"ntestparametercode\"],ndefaultstatus:transactionStatus.NO,nstatus:transactionStatus.ACTIVE,nispredefinedformula:transactionStatus.NO,npredefinedformulacode:transactionStatus.NA};formulafield.map(function(field){return testformula[field]=selectedRecord[field].trim();});var selectedId=null;var postParam=undefined;if(_this.props.operation===\"update\"){// edit\npostParam={inputListName:\"TestMaster\",selectedObject:\"SelectedTest\",primaryKeyField:\"ntestcode\"};selectedId=selectedRecord[\"ntestparametercode\"];}var inputParam={inputData:{testformula:testformula,userinfo:_this.props.userInfo,//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\n\"isQualisLite\":parseInt(_this.props.settings[71])},classUrl:\"testmaster\",operation:\"create\",methodUrl:\"TestFormula\",saveType:saveType,formRef:formRef,postParam:postParam,selectedRecord:_objectSpread({},_this.state.selectedRecord)};return inputParam;};_this.clearFormula=function(){var selectedRecord=_this.state.selectedRecord;selectedRecord[\"sformulacalculationcode\"]=\"\";selectedRecord[\"sformulacalculationdetail\"]=\"\";selectedRecord[\"userinput\"]=\"\";//ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)\nselectedRecord[\"sfunctionsyntax\"]=\"\";selectedRecord[\"result\"]=\"\";selectedRecord[\"query\"]=\"\";_this.setState({fieldFlag:true,operatorFlag:false,functionFlag:true,selectedRecord:selectedRecord,//ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)           \nopenValidate:false});};_this.onUserInputs=function(event){var value=event.target.value.replace(/^0+/,'');var selectedRecord=_this.state.selectedRecord||{};if(event.keyCode===13){if(_this.state.fieldFlag){var sformulacalculationdetail=selectedRecord.sformulacalculationdetail?selectedRecord.sformulacalculationdetail:\"\";var sformulacalculationcode=selectedRecord.sformulacalculationcode?selectedRecord.sformulacalculationcode:\"\";selectedRecord[\"sformulacalculationcode\"]=\"\".concat(sformulacalculationcode,\"$V\").concat(value,\"V$\");selectedRecord[\"sformulacalculationdetail\"]=\"\".concat(sformulacalculationdetail,\" \").concat(value);selectedRecord[event.target.name]=\"\";_this.setState({fieldFlag:false,functionFlag:false,operatorFlag:true,selectedRecord:selectedRecord});}}};_this.getSyntax=function(event){//ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)\nvar selectedRecord=_this.state.selectedRecord;selectedRecord[\"sfunctionsyntax\"]=event.dataItem.sfunctionsyntax;_this.setState({selectedRecord:selectedRecord});};_this.onSaveTestFile=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var testFileArray=[];var testFile={ntestcode:_this.props.masterData.SelectedTest.ntestcode,ntestfilecode:selectedRecord.ntestfilecode?selectedRecord.ntestfilecode:0,nstatus:transactionStatus.ACTIVE,nattachmenttypecode:nattachmenttypecode,//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\nnqualislite:parseInt(_this.props.settings[71]),ndefaultstatus:selectedRecord[nattachmenttypecode===attachmentType.LINK?\"nlinkdefaultstatus\":\"ndefaultstatus\"]?selectedRecord[nattachmenttypecode===attachmentType.LINK?\"nlinkdefaultstatus\":\"ndefaultstatus\"]:4};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},testFile);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==undefined?selectedRecord.ssystemfilename.split('.'):create_UUID();var filesystemfileext=selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==undefined?file.name.split('.')[ssystemfilename.length-1]:fileExtension;var uniquefilename=nattachmenttypecode===attachmentType.FTP?selectedRecord.ntestfilecode&&selectedRecord.ntestfilecode>0&&selectedRecord.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=Lims_JSON_stringify(file.name,false);tempData[\"sdescription\"]=Lims_JSON_stringify(replaceBackSlash(selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\"),false);tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);testFileArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{testFile[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.sfilename.trim(),false);testFile[\"sdescription\"]=Lims_JSON_stringify(replaceBackSlash(selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\"),false);testFile[\"nlinkcode\"]=transactionStatus.NA;testFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;testFile[\"nfilesize\"]=selectedRecord.nfilesize;//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\ntestFile[\"nqualislite\"]=parseInt(_this.props.settings[71]);testFileArray.push(testFile);}}else{testFile[\"sfilename\"]=Lims_JSON_stringify(replaceBackSlash(selectedRecord.slinkfilename?selectedRecord.slinkfilename.trim():\"\"),false);testFile[\"sdescription\"]=Lims_JSON_stringify(replaceBackSlash(selectedRecord.slinkdescription?selectedRecord.slinkdescription.trim():\"\"),false);testFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;testFile[\"ssystemfilename\"]=\"\";testFile[\"nfilesize\"]=0;//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\ntestFile[\"nqualislite\"]=parseInt(_this.props.settings[71]);testFileArray.push(testFile);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"testfile\",JSON.stringify(testFileArray));//  formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\nvar selectedId=null;var postParam=undefined;if(_this.props.operation===\"update\"){// edit\npostParam={inputListName:\"TestMaster\",selectedObject:\"SelectedTest\",primaryKeyField:\"ntestcode\"};selectedId=selectedRecord[\"ntestfilecode\"];}var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sformname:Lims_JSON_stringify(_this.props.userInfo.sformname),smodulename:Lims_JSON_stringify(_this.props.userInfo.smodulename),//ALPD-1628(while file saving,audit trail is not captured respective language)\nslanguagename:Lims_JSON_stringify(_this.props.userInfo.slanguagename)})},formData:formData,isFileupload:true,operation:_this.props.operation,classUrl:\"testmaster\",saveType:saveType,formRef:formRef,methodUrl:\"TestFile\",postParam:postParam,selectedRecord:_objectSpread({},_this.state.selectedRecord)};return inputParam;};_this.onDropTestFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};_this.ConfirmDelete=function(item,operation,ncontrolCode,methodUrl,modalName){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.props.deleteAction(item,operation,ncontrolCode,methodUrl,modalName);});};var _dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={selectedRecord:{},fieldFlag:true,operatorFlag:false,functionFlag:true,sectionDataState:_dataState,methodDataState:_dataState,instrumentCatDataState:_dataState,containerTypeDataState:_dataState,testPackageDataState:_dataState,//  techniqueDataState: dataState,\nformulaScreenName:\"\"};_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(TestView,[{key:\"render\",value:function render(){var _this2=this;//console.log(\"render in test view:\", this.props.Login);\nvar SelectedTest=this.props.masterData.SelectedTest;if(this.props.openChildModal||this.state.openValidate){this.mandatoryFields=this.findMandatoryFields(this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.state.formulaScreenName:this.props.screenName,this.state.selectedRecord,this.state.formulaScreenName);}return/*#__PURE__*/React.createElement(React.Fragment,null,SelectedTest&&/*#__PURE__*/React.createElement(CustomTab,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange}),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.state.openValidate:this.props.openChildModal,size:this.props.screenName===\"IDS_FORMULA\"?'xl':'lg',closeModal:this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.hideValidateFormula:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.state.formulaScreenName:this.props.screenName//showSaveContinue={true}\n,esign:this.props.loadEsign,validateEsign:this.validateEsign,onSaveClick:this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.calculateFormula:this.onSaveClick,showCalculate:this.state.showCalculate//ATE234 janakumar ALPD-5546All Master screen -> Copy & File remove the save&continue\n,showSaveContinue:(this.props.screenName===\"IDS_CONTAINERTYPE\"||this.props.screenName===\"IDS_CODEDRESULT\"||this.props.screenName===\"IDS_PREDEFINEDFORMULA\"||this.props.screenName===\"IDS_FORMULA\"||this.props.screenName===\"IDS_CLINICALSPEC\"// ||  this.props.screenName === \"IDS_SPECIFICATION\" - ALPD-5398 - commented by gowtham - Test Master Numeric Parameter - Add Specification, shows save & continue\n)&&this.state.formulaScreenName!==\"IDS_VALIDATEFORMULA\"?true:this.props.showSaveContinue,selectedRecord:this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.state.selectedRecord['formulainput']:this.state.selectedRecord||{},mandatoryFields:this.mandatoryFields,addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,onInputOnChange:this.onEsignInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.screenName===\"IDS_PARAMETER\"?/*#__PURE__*/React.createElement(AddParameter,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onNumericInputChange:this.onNumericInputChange,onComboChange:this.onComboChange,parameterData:this.props.parameterData,userInfo:this.props.userInfo,onFocus:this.props.onFocus,DestinationUnit:this.props.DestinationUnit}):this.props.screenName===\"IDS_CODEDRESULT\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(AddCodedResult,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,parameterData:this.props.parameterData,addSubCodedResult:this.props.addSubCodedResult,controlMap:this.props.controlMap,userRoleControlRights:this.props.userRoleControlRights,userInfo:this.props.userInfo//selectedsubcodedresult={this.props.selectedsubcodedresult||[]}\n})):this.props.screenName===\"IDS_SUBCODEDRESULT\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(AddSubCodedResult,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,parameterData:this.props.parameterData,addSubCodedResult:this.props.addSubCodedResult})):this.props.screenName===\"IDS_SPECIFICATION\"?/*#__PURE__*/React.createElement(AddSpecification,{selectedRecord:this.props.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,grade:this.props.grade}):this.props.screenName===\"IDS_SECTION\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(AddTestSection,{selectedRecord:this.state.selectedRecord||{},section:this.props.otherTestData.section,onComboChange:this.onComboChange,onInputOnChange:this.onInputOnChange,isMulti:true}))):this.props.screenName===\"IDS_METHOD\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(AddTestMethod,{selectedRecord:this.state.selectedRecord||{},method:this.props.otherTestData.method,onComboChange:this.onComboChange,isMulti:true}))):this.state.formulaScreenName===\"\"&&this.props.screenName===\"IDS_FORMULA\"?/*#__PURE__*/React.createElement(AddFormula,{selectedRecord:this.state.selectedRecord||{},onComboChange:this.onComboChange,onInputOnChange:this.onInputOnChange,onNumericInputChange:this.onNumericInputChange,onFormulaDrop:this.onFormulaDrop.bind(this),validateFormula:function validateFormula(){return _this2.validateFormula(_this2.props.masterData.selectedParameter,_this2.state.selectedRecord,_this2.props.formulaData);},clearFormula:this.clearFormula,onUserInputs:this.onUserInputs,operators:this.props.formulaData.operators,functions:this.props.formulaData.functions,testCategory:this.props.formulaData.testCategory,testMaster:this.props.formulaData.testMaster,dynamicFormulaFields:this.props.formulaData.dynamicFormulaFields//result={this.state.result ? this.state.result : \"\"}\n//query={this.state.query ? this.state.query : \"\"}\n,getSyntax:this.getSyntax//sfunctionsyntax={this.state.sfunctionsyntax}\n,onFocus:this.props.onFocus}):this.props.screenName===\"IDS_PREDEFINEDFORMULA\"?/*#__PURE__*/React.createElement(AddPredefinedUserFormula,{selectedRecord:this.state.selectedRecord||{},onComboChange:this.onComboChange,onInputOnChange:this.onInputOnChange,preDefinedFormula:this.props.preDefinedFormula}):this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(AddTestInstrumentCategory,{selectedRecord:this.state.selectedRecord||{},instrumentcategory:this.props.otherTestData.instrumentcategory,onComboChange:this.onComboChange,isMulti:true}))):this.props.screenName===\"IDS_PACKAGE\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(AddTestPackageTest,{selectedRecord:this.state.selectedRecord||{},package:this.props.otherTestData.package,onComboChange:this.onComboChange,isMulti:true})))// : this.props.screenName === \"IDS_TECHNIQUE\" ?\n//     <Row>\n//         <Col md=\"12\">\n//             <AddTestTechnique\n//                 selectedRecord={this.state.selectedRecord || {}}\n//                 technique={this.props.otherTestData.technique}\n//                 onComboChange={this.onComboChange}\n//                 onInputOnChange={this.onInputOnChange}\n//                 isMulti={true}\n//             />\n//         </Col>\n//     </Row>\n:this.props.screenName===\"IDS_CONTAINERTYPE\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(AddTestContainerType,{selectedRecord:this.state.selectedRecord||{},containertype:this.props.otherTestData.containertype,unit:this.props.otherTestData.unit,onComboChange:this.onComboChange,onInputOnChange:this.onInputOnChange,onNumericInputChange:this.onNumericInputChange,isMulti:false})):this.props.screenName===\"IDS_TESTFILE\"?/*#__PURE__*/React.createElement(AddFile,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onDrop:this.onDropTestFile,onDropAccepted:this.onDropAccepted,deleteAttachment:this.deleteAttachment,actionType:this.state.actionType,onComboChange:this.onComboChange,linkMaster:this.props.linkMaster,editFiles:this.props.editFiles,maxSize:20// maxFiles={this.props.operation === \"update\" ? 1 : 3}\n// multiple={this.props.operation === \"update\" ? false : true}\n,maxFiles:1,multiple:false,label:this.props.intl.formatMessage({id:\"IDS_TESTFILE\"}),name:\"testfilename\"}):this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?/*#__PURE__*/React.createElement(ValidateFormula,{DynamicFormulaFields:this.state.DynamicFields,selectedRecord:this.state.selectedRecord,onInputOnChange:this.onInputOnChange}):this.props.screenName===\"IDS_CLINICALSPEC\"?/*#__PURE__*/React.createElement(AddTestGroupNumericSpecification//gradenew={this.props.testGroupInputData.grade||[]}\n,{onInputOnChange:this.onInputOnChange,parameterData:this.props.parameterData,selectedRecord:this.state.selectedRecord,onComboChange:this.onComboChange,onNumericInputChange:this.onNumericInputChange})// : this.props.screenName ===\"IDS_REPORTINFOTEST\" ?\n//     <TestReportInfo\n//         selectedRecord={this.state.selectedRecord || {}}\n//     />\n:\"\"}));}},{key:\"findMandatoryFields\",value:function findMandatoryFields(screenName,selectedRecord,optional){var mandyFields=[];if(screenName===\"IDS_SECTION\"){mandyFields=[{\"idsName\":\"IDS_SECTION\",\"dataField\":\"availableData\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else if(screenName===\"IDS_TECHNIQUE\"){mandyFields=[{\"idsName\":\"IDS_TECHNIQUE\",\"dataField\":\"availableData\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else if(screenName===\"IDS_METHOD\"){mandyFields=[{\"idsName\":\"IDS_METHOD\",\"dataField\":\"availableData\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else if(screenName===\"IDS_INSTRUMENTCATEGORY\"){mandyFields=[{\"idsName\":\"IDS_INSTRUMENTCATEGORY\",\"dataField\":\"availableData\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else if(screenName===\"IDS_PACKAGE\"){mandyFields=[{\"idsName\":\"IDS_TESTPACKAGE\",\"dataField\":\"availableData\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else if(screenName===\"IDS_FORMULA\"&&optional===\"\"){mandyFields=[{\"idsName\":\"IDS_FORMULANAME\",\"dataField\":\"sformulaname\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_FORMULA\",\"dataField\":\"sformulacalculationdetail\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}else if(screenName===\"IDS_PREDEFINEDFORMULA\"){mandyFields=[{\"idsName\":\"IDS_FORMULANAME\",\"dataField\":\"sformulaname\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_PREDEFINEDFORMULA\",\"dataField\":\"npredefinedformulacode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}else if(screenName===\"IDS_PARAMETER\"){mandyFields=[{\"idsName\":\"IDS_PARAMETERNAME\",\"dataField\":\"sparametername\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_PARAMETERSYNONYM\",\"dataField\":\"sparametersynonym\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_PARAMETERTYPE\",\"dataField\":\"nparametertypecode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];if(selectedRecord&&Object.values(selectedRecord).length>0&&selectedRecord[\"nparametertypecode\"]){if(selectedRecord[\"nparametertypecode\"].value===parameterType.NUMERIC){mandyFields.push({\"idsName\":\"IDS_ROUNDINGDIGITS\",\"dataField\":\"nroundingdigits\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_UNIT\",\"dataField\":\"nunitcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});}else if(selectedRecord[\"nparametertypecode\"].value===parameterType.PREDEFINED){mandyFields.push({\"idsName\":\"IDS_CODEDRESULT\",\"dataField\":\"spredefinedname\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_ACTUALRESULT\",\"dataField\":\"ngradecode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_CODEDRESULTSYNONYM\",\"dataField\":\"spredefinedsynonym\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"});}}}else if(screenName===\"IDS_CODEDRESULT\"){mandyFields.push({\"idsName\":\"IDS_CODEDRESULT\",\"dataField\":\"spredefinedname\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_ACTUALRESULT\",\"dataField\":\"ngradecode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_CODEDRESULTSYNONYM\",\"dataField\":\"spredefinedsynonym\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"});}else if(screenName===\"IDS_VALIDATEFORMULA\"){mandyFields=this.state.validateFormulaMandyFields;}else if(screenName===\"IDS_TESTFILE\"){if(this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK){mandyFields=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else{// if (this.props.operation !== 'update') {\nmandyFields=[{\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"}];// }\n}}else if(screenName===\"IDS_CONTAINERTYPE\"){mandyFields=[{\"idsName\":\"IDS_CONTAINERTYPE\",\"dataField\":\"ncontainertypecode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},// { \"idsName\": \"IDS_QUANTITY\", \"dataField\": \"nquantity\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" },\nthis.state.selectedRecord.unitMandatory===true?{\"idsName\":\"IDS_UNIT\",\"dataField\":\"nunitcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}:{}];}else if(screenName===\"IDS_CLINICALSPEC\"){mandyFields=[{\"idsName\":\"IDS_GENDER\",\"dataField\":\"ngendercode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_FROMAGE\",\"dataField\":\"nfromage\",\"width\":\"200px\",\"mandatory\":true},{\"idsName\":\"IDS_TOAGE\",\"dataField\":\"ntoage\",\"width\":\"200px\",\"mandatory\":true},// ALPD-5364 - added by Gowtham R on 24/03/2025 - for mandatory check for period combo in FromDate and ToDate.\n{\"idsName\":\"IDS_PERIOD\",\"dataField\":\"nfromageperiod\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_PERIOD\",\"dataField\":\"ntoageperiod\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else{return[];}var finalMandyFields=[];mandyFields.forEach(function(item){return item.mandatory===true&&finalMandyFields.push(item);});return finalMandyFields;}},{key:\"calculateFormulaFunction\",value:function calculateFormulaFunction(inputParam){var _this3=this;rsapi.post(\"/testmaster/calculateFormula\",_objectSpread({},inputParam)).then(function(response){//ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)\nvar selectedRecord=_this3.state.selectedRecord||{};selectedRecord[\"query\"]=response.data[\"Query\"];selectedRecord[\"result\"]=response.data[\"Result\"];_this3.setState({openValidate:false,selectedRecord:selectedRecord,//query: response.data[\"Query\"],\n//result: response.data[\"Result\"],\nshowCalculate:false,formulaScreenName:\"\"});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{//toast.warn(error.response.data);\ntoast.warn(error.response.data[\"Result\"]);}});}},{key:\"saveContainerType\",value:function saveContainerType(saveType,formRef){var inputData={};var postParam=undefined;var methodUrl=\"TestContainerType\";if(this.props.operation==\"create\"){var _inputData4;if(this.state.selectedRecord.nquantity){this.state.selectedRecord['ncontainertypecode']['item']['nquantity']=Number.parseFloat(this.state.selectedRecord.nquantity).toFixed(3);}//this.state.selectedRecord['ncontainertypecode']['item']['noutsourcecode'] = parseInt(this.state.selectedRecord.noutsourcecode);\nif(this.state.selectedRecord.nunitcode){this.state.selectedRecord['ncontainertypecode']['item']['nunitcode']=parseInt(this.state.selectedRecord.nunitcode.value);}else{this.state.selectedRecord['ncontainertypecode']['item']['nunitcode']=-1;}inputData=(_inputData4={},_defineProperty(_inputData4,methodUrl.toLocaleLowerCase(),this.state.selectedRecord.ncontainertypecode.item),_defineProperty(_inputData4,\"ntestcontainertypecode\",this.state.selectedRecord.ntestcontainertypecode),_defineProperty(_inputData4,\"ntestcode\",this.state.selectedRecord.ntestcode),_defineProperty(_inputData4,\"userinfo\",this.props.userInfo),_defineProperty(_inputData4,\"testcode\",this.props.masterData.SelectedTest.ntestcode),_defineProperty(_inputData4,\"isQualisLite\",parseInt(this.props.settings[71])),_inputData4);}else{// edit\npostParam={inputListName:\"TestMaster\",selectedObject:\"SelectedTest\",primaryKeyField:\"ntestcode\"};var unitCode=this.state.selectedRecord.nquantity===0||this.state.selectedRecord.nquantity===undefined?-1:this.state.selectedRecord.nunitcode.value;inputData={ntestcontainertypecode:this.state.selectedRecord.ntestcontainertypecode,ntestcode:this.state.selectedRecord.ntestcode,ncontainertypecode:this.state.selectedRecord.ncontainertypecode.value,// nunitcode: this.state.selectedRecord.nunitcode.value,\nnunitcode:unitCode,nquantity:parseInt(Number.parseFloat(this.state.selectedRecord.nquantity).toFixed(3)),//noutsourcecode:this.state.selectedRecord.noutsourcecode,\nuserinfo:this.props.userInfo,testcode:this.props.masterData.SelectedTest.ntestcode,//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\n\"isQualisLite\":parseInt(this.props.settings[71])};}var inputParam={inputData:inputData,classUrl:\"testmaster\",operation:this.props.operation,methodUrl:methodUrl,saveType:saveType,formRef:formRef,postParam:postParam,selectedRecord:_objectSpread({},this.state.selectedRecord)};return inputParam;}},{key:\"saveTestData\",value:function saveTestData(saveType,formRef){var _inputData5;var availableData=[];this.state.selectedRecord.availableData.map(function(data){return availableData.push(data.item);});var methodUrl=\"\";if(this.props.screenName===\"IDS_SECTION\"){//Test Section\nmethodUrl=\"TestSection\";}else if(this.props.screenName===\"IDS_METHOD\"){//Test Method\nmethodUrl=\"TestMethod\";}else if(this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"){//Test Instrument Category\nmethodUrl=\"TestInstrumentCategory\";}else if(this.props.screenName===\"IDS_CONTAINERTYPE\"){//Test Instrument Category\nmethodUrl=\"TestContainerType\";}else if(this.props.screenName===\"IDS_PACKAGE\"){//Test Package\nmethodUrl=\"Testpackage\";}else if(this.props.screenName===\"IDS_TECHNIQUE\"){//Test Technique\nmethodUrl=\"TestTechnique\";}// let selectedId = null;\nvar postParam=undefined;if(this.props.operation===\"update\"){// edit\npostParam={inputListName:\"TestMaster\",selectedObject:\"SelectedTest\",primaryKeyField:\"ntestcode\"};//  selectedId = selectedRecord[\"ntestparametercode\"];               \n}var inputParam={inputData:(_inputData5={},_defineProperty(_inputData5,methodUrl.toLocaleLowerCase(),availableData),_defineProperty(_inputData5,\"userinfo\",this.props.userInfo),_defineProperty(_inputData5,\"isQualisLite\",parseInt(this.props.settings[71])),_inputData5),classUrl:\"testmaster\",operation:\"create\",methodUrl:methodUrl,saveType:saveType,formRef:formRef,postParam:postParam};return inputParam;}},{key:\"onFormulaDrop\",value:function onFormulaDrop(data){var selectedRecord=this.state.selectedRecord;var formulaName=\"\";var formulaCalculationCode=\"\";var fieldFlag=this.state.fieldFlag;var functionFlag=this.state.functionFlag;var operatorFlag=this.state.operatorFlag;//ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)\nvar sfunctionsyntax=selectedRecord.sfunctionsyntax?selectedRecord.sfunctionsyntax:\"\";//let sfunctionsyntax = this.state.sfunctionsyntax;\nif(sfunctionsyntax===\"\"){functionFlag=true;}var isDropped=false;if(data['testfields']!==\"\"){var testfields=JSON.parse(data['testfields']);if(this.state.fieldFlag){var sformulacalculationdetail=selectedRecord.sformulacalculationdetail?selectedRecord.sformulacalculationdetail:\"\";var sformulacalculationcode=selectedRecord.sformulacalculationcode?selectedRecord.sformulacalculationcode:\"\";var sparametername=testfields.sparametername;var ntestparametercode=testfields.ntestparametercode;if(sparametername!==\"Parameter-Field\"&&sparametername!==\"Formula-Field\"&&sparametername!==\"Dynamic-Field\"){if(testfields.isformula===1){formulaName=\"\".concat(sformulacalculationdetail,\" (\").concat(sparametername,\") \");formulaCalculationCode=\"\".concat(sformulacalculationcode,\"$O20O$\").concat(ntestparametercode,\"$O18O$\");}else{formulaName=\"\".concat(sformulacalculationdetail,\" \").concat(sparametername);formulaCalculationCode=\"\".concat(sformulacalculationcode,\"$P\").concat(ntestparametercode,\"P$\");}}else if(sparametername!==\"Formula-Field\"){formulaName=\"\".concat(sformulacalculationdetail,\" \").concat(testfields.stestname);formulaCalculationCode=\"\".concat(sformulacalculationcode,\"$D\").concat(ntestparametercode,\"D$\");}else{formulaName=\"\".concat(sformulacalculationdetail,\" \").concat(testfields.stestname);formulaCalculationCode=\"\".concat(sformulacalculationcode).concat(testfields.sformulacalculationcode);}fieldFlag=false;functionFlag=false;operatorFlag=true;isDropped=true;}}else if(data['operatorfields']!==\"\"){var operatorfields=JSON.parse(data['operatorfields']);var noperatorcode=operatorfields.noperatorcode;var _sformulacalculationdetail=selectedRecord.sformulacalculationdetail?selectedRecord.sformulacalculationdetail:\"\";var _sformulacalculationcode=selectedRecord.sformulacalculationcode?selectedRecord.sformulacalculationcode:\"\";if(this.state.operatorFlag){formulaName=\"\".concat(_sformulacalculationdetail,\" \").concat(operatorfields.soperator);formulaCalculationCode=\"\".concat(_sformulacalculationcode,\"$O\").concat(noperatorcode,\"O$\");if(noperatorcode===operators.OPENPARENTHESIS){fieldFlag=true;functionFlag=true;operatorFlag=false;}else if(noperatorcode===operators.CLOSEPARENTHESIS){fieldFlag=false;functionFlag=false;operatorFlag=true;}else{fieldFlag=true;functionFlag=true;operatorFlag=false;}isDropped=true;}else if(noperatorcode===operators.OPENPARENTHESIS){formulaName=\"\".concat(_sformulacalculationdetail,\" \").concat(operatorfields.soperator);formulaCalculationCode=\"\".concat(_sformulacalculationcode,\"$O\").concat(noperatorcode,\"O$\");fieldFlag=true;functionFlag=true;operatorFlag=false;isDropped=true;}else if(noperatorcode===operators.CLOSEPARENTHESIS){formulaName=\"\".concat(_sformulacalculationdetail,\" \").concat(operatorfields.soperator);formulaCalculationCode=\"\".concat(_sformulacalculationcode,\"$O\").concat(noperatorcode,\"O$\");fieldFlag=false;functionFlag=false;operatorFlag=true;isDropped=true;}}else if(data['functionfields']!==\"\"){if(functionFlag){var functionfields=JSON.parse(data['functionfields']);var _sformulacalculationdetail2=selectedRecord.sformulacalculationdetail?selectedRecord.sformulacalculationdetail:\"\";var _sformulacalculationcode2=selectedRecord.sformulacalculationcode?selectedRecord.sformulacalculationcode:\"\";formulaName=\"\".concat(_sformulacalculationdetail2).concat(functionfields.sfunctionname,\"(\");formulaCalculationCode=\"\".concat(_sformulacalculationcode2,\"$F\").concat(functionfields.nfunctioncode,\"F$$O20O$\");fieldFlag=true;functionFlag=false;operatorFlag=false;sfunctionsyntax=functionfields.sfunctionsyntax;isDropped=true;}}if(isDropped){var sliceFormulaName=formulaName.slice(0,512);if(sliceFormulaName.length<=512){selectedRecord[\"sformulacalculationcode\"]=formulaCalculationCode;selectedRecord[\"sformulacalculationdetail\"]=sliceFormulaName;//ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)\nselectedRecord[\"sfunctionsyntax\"]=sfunctionsyntax;this.setState({fieldFlag:fieldFlag,functionFlag:functionFlag,operatorFlag:operatorFlag,selectedRecord:selectedRecord});}else{selectedRecord[\"sfunctionsyntax\"]=sfunctionsyntax;selectedRecord[\"sformulacalculationdetail\"]=sliceFormulaName;this.setState({fieldFlag:fieldFlag,functionFlag:functionFlag,operatorFlag:operatorFlag,selectedRecord:selectedRecord});}}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.isFormulaOpen){this.setState({fieldFlag:true,operatorFlag:false,functionFlag:true});var updateInfo={typeName:DEFAULT_RETURN,data:{isFormulaOpen:false}};this.props.updateStore(updateInfo);}if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}if(this.props.masterData!==previousProps.masterData){var _this$state=this.state,testFileDataState=_this$state.testFileDataState,sectionDataState=_this$state.sectionDataState,methodDataState=_this$state.methodDataState,instrumentCatDataState=_this$state.instrumentCatDataState,containerTypeDataState=_this$state.containerTypeDataState,testPackageDataState=_this$state.testPackageDataState,testClinicalSpecDataState=_this$state.testClinicalSpecDataState;if(this.props.dataState===undefined){if(this.props.screenName===\"IDS_SECTION\"){sectionDataState={skip:0,take:5};}else if(this.props.screenName===\"IDS_METHOD\"){methodDataState={skip:0,take:5};}else if(this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"){instrumentCatDataState={skip:0,take:5};}else if(this.props.screenName===\"IDS_CONTAINERTYPE\"){containerTypeDataState={skip:0,take:5};}else if(this.props.screenName===\"IDS_TESTPACKAGE\"){testPackageDataState={skip:0,take:5};}else if(this.props.screenName===\"IDS_TESTFILE\"||this.props.screenName===\"IDS_FILE\"){testFileDataState={skip:0,take:5};}else{sectionDataState={skip:0,take:5};methodDataState={skip:0,take:5};instrumentCatDataState={skip:0,take:5};containerTypeDataState={skip:0,take:5};testPackageDataState={skip:0,take:5};testFileDataState={skip:0,take:5};// testClinicalSpecDataState = { skip: 0, take: 5 ,group: [{ field: 'sgendername' }]};\n}}else{if(this.props.screenName===\"IDS_SECTION\"){sectionDataState=this.props.dataState;}else if(this.props.screenName===\"IDS_METHOD\"){methodDataState=this.props.dataState;}else if(this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"){instrumentCatDataState=this.props.dataState;}else if(this.props.screenName===\"IDS_CONTAINERTYPE\"){containerTypeDataState=this.props.dataState;}else if(this.props.screenName===\"IDS_TESTPACKAGE\"){testPackageDataState=this.props.dataState;}else if(this.props.screenName===\"IDS_TESTFILE\"||this.props.screenName===\"IDS_FILE\"){testFileDataState={skip:0,take:5};}else{sectionDataState={skip:0,take:5};methodDataState={skip:0,take:5};instrumentCatDataState={skip:0,take:5};containerTypeDataState={skip:0,take:5};testPackageDataState={skip:0,take:5};testFileDataState={skip:0,take:5};}}// let skipcount=this.props.masterData[\"TestMethod\"].length>0?(this.props.masterData[\"TestMethod\"].length-this.props.dataState.take):\n// this.props.dataState.skip;\n// if (this.props.screenName === \"IDS_METHOD\") {\n//     methodDataState = { skip: skipcount, take: 5 };\n// } \n// let dataResultMethod=process(this.props.masterData[\"TestMethod\"], this.props.dataState );\n// let { dataState } = this.state;\n// if (this.props.dataState === undefined) {\n//     dataState = { skip:0,take:this.state.dataState.take }\n// }\n// if(dataResultMethod){\n//     if(dataResultMethod >=5){\n//        let skipcount=this.state.dataState.skip>0?(this.state.dataState.skip-this.state.dataState.take):\n//        this.state.dataState.skip\n//         methodDataState={skip:skipcount,take:this.state.dataState.take}\n//     }\n// }\n// dataResult={process(this.props.masterData[\"TestSection\"], \n//     (this.props.screenName === undefined || this.props.screenName === \"IDS_SECTION\") ? \n//     this.state.sectionDataState : { skip: 0, take: 10 })}\n//     dataResult: process(this.props.Login.masterData, this.state.dataState),\n// this.setState({\n//     data: this.props.Login.masterData, \n//     dataResult: process(this.props.Login.masterData, dataState),\n//     dataState\n// });\n//     // Maintain pagination after delete\n// const totalRecords = this.props.masterData[\"TestMethod\"].length;\n// const currentPageRecords = this.props.dataState.take;\n// const currentSkip = this.props.dataState.skip;\n// // If there are fewer records in the current page (because of a deletion), adjust skip\n// if (totalRecords % currentPageRecords === 0 && currentSkip > 0) {\n//     this.setState({\n//         methodDataState: { ...methodDataState, skip: currentSkip - currentPageRecords }\n//     });\n// }\nthis.setState({testFileDataState:testFileDataState,sectionDataState:sectionDataState,methodDataState:methodDataState,instrumentCatDataState:instrumentCatDataState,containerTypeDataState:containerTypeDataState,testPackageDataState:testPackageDataState,testClinicalSpecDataState:testClinicalSpecDataState});}}}]);return TestView;}(Component);export default injectIntl(TestView);","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/testmanagement/TestView.jsx"],"names":["React","Component","toast","injectIntl","rsapi","process","Col","Row","SlideOutModal","AddSpecification","AddCodedResult","AddParameter","DEFAULT_RETURN","showEsign","create_UUID","onDropAttachFileList","deleteAttachmentDropZone","Lims_JSON_stringify","replaceBackSlash","Esign","AddTestSection","AddTestMethod","AddTestInstrumentCategory","AddFormula","ValidateFormula","AddFile","parameterType","transactionStatus","operators","attachmentType","FORMULAFIELDTYPE","formCode","CustomTab","TestSectionTab","TestMethodTab","TestInstrumentCategoryTab","TestFileTab","AddTestContainerType","TestContainerTypeTab","ParameterTab","ConfirmMessage","TestPackageTab","AddTestPackageTest","AddSubCodedResult","AddTestGroupNumericSpecification","AddPredefinedUserFormula","TestView","props","deleteAttachment","event","file","fieldName","selectedRecord","state","setState","actionType","onTabChange","tabProps","screenName","updateInfo","typeName","data","updateStore","tabDetail","tabMap","Map","set","controlMap","userRoleControlRights","masterData","TestParameter","userInfo","getTestDetails","inputParam","addParameter","deleteAction","ConfirmDelete","addCodedResult","addSubCodedResult","addFormula","openPredefinedModal","onSwitchChange","addParameterSpecification","addClinicalSpecification","grade","dataStateChange","clinicalspecDataState","EditSpecDetails","DeleteSpecDetails","undefined","sectionDataState","skip","take","dataState","SelectedTest","deleteRecord","defaultRecord","getAvailableData","TestSection","methodDataState","TestMethod","instrumentCatDataState","TestInstrumentCategory","testFileDataState","TestFile","addTestFile","viewTestFile","settings","hideQualisForms","findIndex","item","nformcode","TESTPACKAGE","testPackageDataState","TestPackage","containerTypeDataState","Containertype","getActiveTestContainerTypeById","addContainerType","intl","filedata","inputData","testfile","userinfo","classUrl","operation","methodUrl","viewAttachment","viewdetails","ncontrolCode","deleteParam","dataResultRecord","skipDataRecords","selected","length","skipcount","toLowerCase","slanguagename","parseInt","esignRights","loadEsign","screenData","openChildModal","crudMaster","defaultParam","dataItem","postParam","inputListName","selectedObject","primaryKeyField","key","defaultTestFormulaId","hideValidateFormula","openValidate","showCalculate","formulaScreenName","validateFormulaMandyFields","validateFormula","testData","sformulacalculationcode","includes","post","ntestcode","then","response","map","index","DynamicFields","dynamicField","catch","error","message","dynamicformulafields","calculateFormulaFunction","info","formatMessage","id","calculateFormula","Object","keys","keyname","closeModal","onComboChange","comboData","caseNo","value","getUnitConversion","nunitcode","getConversionOperator","ndestinationunitcode","parameterData","needUnit","needRoundingDigit","needCodedResult","needActualResult","npredefinedcode","defaultUnit","defaultGrade","parameterInfo","formulaChangeFunction","ntestcategorycode","nFlag","formulaData","onEsignInputOnChange","target","type","name","checked","onInputOnChange","optional","YES","NO","inputValue","test","ndynamicformulafieldcode","INTEGER","sdescription","indexOf","replace","sparameter","svalues","inputValues","inputvalues","gradenew","onNumericInputChange","secondaryFieldName","console","log","values","onSaveClick","saveType","formRef","defaultInput","isValidRequest","clearSelectedRecordField","onSaveParameter","nparametertypecode","onSaveCodedResult","onSaveSpecification","warn","onSaveClinicalSpec","onSaveFormula","onSavePreDefinedFormula","onSaveTestFile","saveContainerType","saveTestData","selectedParameter","testformula","ntestparametercode","ndefaultstatus","nispredefinedformula","nstatus","ACTIVE","sformulaname","sformulacalculationdetail","npredefinedformulacode","selectedId","storeData","customobject","testColumns","nisadhocparameter","nisvisible","trim","label","columns","ngradecode","TestGroupAddSpecification","ngendercode","nfromage","ntoage","shigha","shighb","slowa","slowb","sminlod","smaxlod","sminloq","smaxloq","sdisregard","sresultvalue","ntestmasterclinicspeccode","nfromageperiod","ntoageperiod","testPredefinedParameter","spredefinedname","ntestpredefinedcode","spredefinedsynonym","spredefinedcomments","testpredefinedparameter","formulafield","NA","field","clearFormula","fieldFlag","operatorFlag","functionFlag","onUserInputs","keyCode","getSyntax","sfunctionsyntax","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","testFileArray","testFile","ntestfilecode","nqualislite","LINK","formData","FormData","FTP","Array","isArray","forEach","tempData","assign","splittedFileName","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","size","append","push","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","sformname","smodulename","isFileupload","onDropTestFile","attachedFiles","maxSize","validateEsign","sreason","nreasoncode","spredefinedreason","password","validateEsignCredential","modalName","confirmMessage","confirm","mandatoryFields","findMandatoryFields","showSaveContinue","onFocus","DestinationUnit","otherTestData","section","method","onFormulaDrop","bind","functions","testCategory","testMaster","dynamicFormulaFields","preDefinedFormula","instrumentcategory","package","containertype","unit","onDropAccepted","linkMaster","editFiles","mandyFields","NUMERIC","PREDEFINED","unitMandatory","finalMandyFields","mandatory","status","nquantity","Number","parseFloat","toFixed","toLocaleLowerCase","ncontainertypecode","ntestcontainertypecode","unitCode","testcode","availableData","formulaName","formulaCalculationCode","isDropped","testfields","parse","sparametername","isformula","stestname","operatorfields","noperatorcode","soperator","OPENPARENTHESIS","CLOSEPARENTHESIS","functionfields","sfunctionname","nfunctioncode","sliceFormulaName","slice","previousProps","isFormulaOpen","testClinicalSpecDataState"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { injectIntl } from 'react-intl';\r\nimport rsapi from '../../rsapi';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport '../../assets/styles/lims-global-theme.css';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport AddSpecification from './AddSpecification';\r\nimport AddCodedResult from './AddCodedResult';\r\nimport AddParameter from './AddParameter';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, create_UUID, onDropAttachFileList, deleteAttachmentDropZone, Lims_JSON_stringify,replaceBackSlash } from '../../components/CommonScript';\r\nimport Esign from '../audittrail/Esign';\r\nimport AddTestSection from './AddTestSection';\r\nimport AddTestMethod from './AddTestMethod';\r\nimport AddTestInstrumentCategory from './AddTestInstrumentCategory';\r\nimport AddFormula from './AddFormula';\r\nimport ValidateFormula from './ValidateFormula';\r\nimport AddFile from './AddFile';\r\nimport { parameterType, transactionStatus, operators, attachmentType, FORMULAFIELDTYPE, formCode } from '../../components/Enumeration';\r\nimport CustomTab from '../../components/custom-tabs/custom-tabs.component'\r\nimport TestSectionTab from './TestSectionTab';\r\nimport TestMethodTab from './TestMethodTab';\r\nimport TestInstrumentCategoryTab from './TestInstrumentCategoryTab';\r\nimport TestFileTab from './TestFileTab';\r\nimport AddTestContainerType from './AddTestContainerType';\r\nimport TestContainerTypeTab from './TestContainerTypeTab';\r\nimport ParameterTab from './ParameterTab';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport TestPackageTab from './TestPackageTab';\r\nimport AddTestPackageTest from './AddTestPackageTest';\r\nimport AddSubCodedResult from './AddSubCodedResult';\r\nimport AddTestGroupNumericSpecification from '../../pages/testgroup/AddTestGroupNumericSpecification';\r\nimport AddPredefinedUserFormula from './AddPredefinedUserFormula';\r\n\r\nclass TestView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5,\r\n        };\r\n        this.state = ({\r\n            selectedRecord: {},\r\n            fieldFlag: true,\r\n            operatorFlag: false,\r\n            functionFlag: true,\r\n            sectionDataState: dataState,\r\n            methodDataState: dataState,\r\n            instrumentCatDataState: dataState,\r\n            containerTypeDataState: dataState,\r\n            testPackageDataState: dataState,\r\n          //  techniqueDataState: dataState,\r\n            formulaScreenName: \"\",\r\n            \r\n        });\r\n        this.confirmMessage = new ConfirmMessage();\r\n    }\r\n\r\n    render() {\r\n        //console.log(\"render in test view:\", this.props.Login);\r\n        const { SelectedTest } = this.props.masterData;\r\n        if (this.props.openChildModal || this.state.openValidate) {\r\n            this.mandatoryFields = this.findMandatoryFields(this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.state.formulaScreenName :\r\n                this.props.screenName, this.state.selectedRecord, this.state.formulaScreenName)\r\n        }\r\n\r\n        return (\r\n            <>\r\n                {SelectedTest && <CustomTab tabDetail={this.tabDetail()} onTabChange={this.onTabChange} />}\r\n\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal\r\n                        show={this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.state.openValidate : this.props.openChildModal}\r\n                        size={this.props.screenName === \"IDS_FORMULA\" ? 'xl' : 'lg'}\r\n                        closeModal={this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.hideValidateFormula : this.closeModal}\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.state.formulaScreenName : this.props.screenName}\r\n                        //showSaveContinue={true}\r\n                        esign={this.props.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        onSaveClick={this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.calculateFormula : this.onSaveClick}\r\n                        showCalculate={this.state.showCalculate}\r\n                        //ATE234 janakumar ALPD-5546All Master screen -> Copy & File remove the save&continue\r\n                        showSaveContinue={(this.props.screenName === \"IDS_CONTAINERTYPE\" || \r\n                            this.props.screenName === \"IDS_CODEDRESULT\" || this.props.screenName === \"IDS_PREDEFINEDFORMULA\" || \r\n                            this.props.screenName === \"IDS_FORMULA\" || this.props.screenName === \"IDS_CLINICALSPEC\"\r\n                            // ||  this.props.screenName === \"IDS_SPECIFICATION\" - ALPD-5398 - commented by gowtham - Test Master Numeric Parameter - Add Specification, shows save & continue\r\n                            ) && this.state.formulaScreenName !== \"IDS_VALIDATEFORMULA\" ? true : this.props.showSaveContinue}\r\n                        selectedRecord={this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.state.selectedRecord['formulainput'] : this.state.selectedRecord || {}}\r\n                        mandatoryFields={this.mandatoryFields}\r\n                        addComponent={this.props.loadEsign ?\r\n                            <Esign\r\n                                operation={this.props.operation}\r\n                                onInputOnChange={this.onEsignInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> : this.props.screenName === \"IDS_PARAMETER\" ?\r\n                                <AddParameter\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onNumericInputChange={this.onNumericInputChange}\r\n                                    onComboChange={this.onComboChange}\r\n                                    parameterData={this.props.parameterData}\r\n                                    userInfo={this.props.userInfo}\r\n                                    onFocus={this.props.onFocus}\r\n                                    DestinationUnit={this.props.DestinationUnit}    \r\n                                />\r\n                                : this.props.screenName === \"IDS_CODEDRESULT\" ?\r\n                                    <Row>\r\n                                        <AddCodedResult\r\n                                            selectedRecord={this.state.selectedRecord || {}}\r\n                                            onInputOnChange={this.onInputOnChange}\r\n                                            onComboChange={this.onComboChange}\r\n                                            parameterData={this.props.parameterData}\r\n                                            addSubCodedResult={this.props.addSubCodedResult}\r\n                                            controlMap={this.props.controlMap}\r\n                                        userRoleControlRights={this.props.userRoleControlRights}\r\n                                        userInfo={this.props.userInfo}\r\n                                            //selectedsubcodedresult={this.props.selectedsubcodedresult||[]}\r\n                                        />\r\n                                    </Row>\r\n                                    : this.props.screenName === \"IDS_SUBCODEDRESULT\" ?\r\n                                    <Row>\r\n                                        <AddSubCodedResult\r\n                                            selectedRecord={this.state.selectedRecord || {}}\r\n                                            onInputOnChange={this.onInputOnChange}\r\n                                            onComboChange={this.onComboChange}\r\n                                            parameterData={this.props.parameterData}\r\n                                            addSubCodedResult={this.props.addSubCodedResult}\r\n                                        />\r\n                                    </Row>\r\n                                    : this.props.screenName === \"IDS_SPECIFICATION\" ?\r\n                                        <AddSpecification\r\n                                            selectedRecord={this.props.selectedRecord || {}}\r\n                                            onInputOnChange={this.onInputOnChange}\r\n                                            onComboChange={this.onComboChange}\r\n                                            grade={this.props.grade}\r\n                                            \r\n                                        />\r\n                                        : this.props.screenName === \"IDS_SECTION\" ?\r\n                                            <Row>\r\n                                                <Col md=\"12\">\r\n                                                    <AddTestSection\r\n                                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                                        section={this.props.otherTestData.section}\r\n                                                        onComboChange={this.onComboChange}\r\n                                                        onInputOnChange={this.onInputOnChange}\r\n                                                        isMulti={true}\r\n                                                    />\r\n                                                </Col>\r\n                                            </Row>\r\n                                            : this.props.screenName === \"IDS_METHOD\" ?\r\n                                                <Row>\r\n                                                    <Col md=\"12\">\r\n                                                        <AddTestMethod\r\n                                                            selectedRecord={this.state.selectedRecord || {}}\r\n                                                            method={this.props.otherTestData.method}\r\n                                                            onComboChange={this.onComboChange}\r\n                                                            isMulti={true}\r\n                                                        />\r\n                                                    </Col>\r\n                                                </Row>\r\n                                                : this.state.formulaScreenName === \"\" && this.props.screenName === \"IDS_FORMULA\" ?\r\n                                                    <AddFormula\r\n                                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                                        onComboChange={this.onComboChange}\r\n                                                        onInputOnChange={this.onInputOnChange}\r\n                                                        onNumericInputChange={this.onNumericInputChange}\r\n                                                        onFormulaDrop={this.onFormulaDrop.bind(this)}\r\n                                                        validateFormula={() => this.validateFormula(this.props.masterData.selectedParameter, this.state.selectedRecord, this.props.formulaData)}\r\n                                                        clearFormula={this.clearFormula}\r\n                                                        onUserInputs={this.onUserInputs}\r\n                                                        operators={this.props.formulaData.operators}\r\n                                                        functions={this.props.formulaData.functions}\r\n                                                        testCategory={this.props.formulaData.testCategory}\r\n                                                        testMaster={this.props.formulaData.testMaster}\r\n                                                        dynamicFormulaFields={this.props.formulaData.dynamicFormulaFields}\r\n                                                        //result={this.state.result ? this.state.result : \"\"}\r\n                                                        //query={this.state.query ? this.state.query : \"\"}\r\n                                                        getSyntax={this.getSyntax}\r\n                                                        //sfunctionsyntax={this.state.sfunctionsyntax}\r\n                                                        onFocus={this.props.onFocus}\r\n                                                    />\r\n                                                    : this.props.screenName === \"IDS_PREDEFINEDFORMULA\" ?\r\n                                                    <AddPredefinedUserFormula\r\n                                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                                        onComboChange={this.onComboChange}\r\n                                                        onInputOnChange={this.onInputOnChange}\r\n                                                        preDefinedFormula={this.props.preDefinedFormula}\r\n                                                    />\r\n                                                    : this.props.screenName === \"IDS_INSTRUMENTCATEGORY\" ?\r\n                                                        <Row>\r\n                                                            <Col md=\"12\">\r\n                                                                <AddTestInstrumentCategory\r\n                                                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                                                    instrumentcategory={this.props.otherTestData.instrumentcategory}\r\n                                                                    onComboChange={this.onComboChange}\r\n                                                                    isMulti={true}\r\n                                                                />\r\n                                                            </Col>\r\n                                                        </Row>\r\n\r\n                                                        : this.props.screenName === \"IDS_PACKAGE\" ?\r\n                                                            <Row>\r\n                                                                <Col md=\"12\">\r\n                                                                    <AddTestPackageTest\r\n                                                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                                                        package={this.props.otherTestData.package}\r\n                                                                        onComboChange={this.onComboChange}\r\n                                                                        isMulti={true}\r\n                                                                    />\r\n                                                                </Col>\r\n                                                            </Row>\r\n\r\n                                                            // : this.props.screenName === \"IDS_TECHNIQUE\" ?\r\n                                                            //     <Row>\r\n                                                            //         <Col md=\"12\">\r\n                                                            //             <AddTestTechnique\r\n                                                            //                 selectedRecord={this.state.selectedRecord || {}}\r\n                                                            //                 technique={this.props.otherTestData.technique}\r\n                                                            //                 onComboChange={this.onComboChange}\r\n                                                            //                 onInputOnChange={this.onInputOnChange}\r\n                                                            //                 isMulti={true}\r\n                                                            //             />\r\n                                                            //         </Col>\r\n                                                            //     </Row>\r\n\r\n                                                                : this.props.screenName === \"IDS_CONTAINERTYPE\" ?\r\n                                                                    <Row>\r\n                                                                        <AddTestContainerType\r\n                                                                            selectedRecord={this.state.selectedRecord || {}}\r\n                                                                            containertype={this.props.otherTestData.containertype}\r\n                                                                            unit={this.props.otherTestData.unit}\r\n                                                                            onComboChange={this.onComboChange}\r\n                                                                            onInputOnChange={this.onInputOnChange}\r\n                                                                            onNumericInputChange={this.onNumericInputChange}\r\n                                                                            isMulti={false}\r\n                                                                        />\r\n                                                                    </Row>                          \r\n                                                                    \r\n                                                                    : this.props.screenName === \"IDS_TESTFILE\" ?\r\n                                                                        <AddFile\r\n                                                                            selectedRecord={this.state.selectedRecord || {}}\r\n                                                                            onInputOnChange={this.onInputOnChange}\r\n                                                                            onDrop={this.onDropTestFile}\r\n                                                                            onDropAccepted={this.onDropAccepted}\r\n                                                                            deleteAttachment={this.deleteAttachment}\r\n                                                                            actionType={this.state.actionType}\r\n                                                                            onComboChange={this.onComboChange}\r\n                                                                            linkMaster={this.props.linkMaster}\r\n                                                                            editFiles={this.props.editFiles}\r\n                                                                            maxSize={20}\r\n                                                                            // maxFiles={this.props.operation === \"update\" ? 1 : 3}\r\n                                                                            // multiple={this.props.operation === \"update\" ? false : true}\r\n                                                                            maxFiles={1}\r\n                                                                            multiple={false}\r\n                                                                            label={this.props.intl.formatMessage({ id: \"IDS_TESTFILE\" })}\r\n                                                                            name=\"testfilename\"\r\n                                                                        />\r\n                                                                        : this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ?\r\n                                                                            <ValidateFormula\r\n                                                                                DynamicFormulaFields={this.state.DynamicFields}\r\n                                                                                selectedRecord={this.state.selectedRecord}\r\n                                                                                onInputOnChange={this.onInputOnChange}\r\n                                                                            />:\r\n                                                                            this.props.screenName === \"IDS_CLINICALSPEC\" ?\r\n                                                                            <AddTestGroupNumericSpecification\r\n                                                                                //gradenew={this.props.testGroupInputData.grade||[]}\r\n                                                                                onInputOnChange={this.onInputOnChange}\r\n                                                                                parameterData={this.props.parameterData}\r\n                                                                                selectedRecord={this.state.selectedRecord}\r\n                                                                                onComboChange={this.onComboChange}\r\n                                                                                onNumericInputChange={this.onNumericInputChange}\r\n                                                                            />\r\n                                                                        // : this.props.screenName ===\"IDS_REPORTINFOTEST\" ?\r\n                                                                        //     <TestReportInfo\r\n                                                                        //         selectedRecord={this.state.selectedRecord || {}}\r\n                                                                        //     />\r\n                                                                        :\"\"\r\n                        }\r\n                    />\r\n                }\r\n            </>\r\n        );\r\n    }\r\n\r\n\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n        });\r\n    }\r\n\r\n\r\n\r\n    findMandatoryFields(screenName, selectedRecord, optional) {\r\n        let mandyFields = [];\r\n        if (screenName === \"IDS_SECTION\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_SECTION\", \"dataField\": \"availableData\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n            ]\r\n        }\r\n        else if (screenName === \"IDS_TECHNIQUE\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_TECHNIQUE\", \"dataField\": \"availableData\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n            ]\r\n        }\r\n        else if (screenName === \"IDS_METHOD\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_METHOD\", \"dataField\": \"availableData\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n            ]\r\n        } else if (screenName === \"IDS_INSTRUMENTCATEGORY\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_INSTRUMENTCATEGORY\", \"dataField\": \"availableData\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n            ]\r\n        } else if (screenName === \"IDS_PACKAGE\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_TESTPACKAGE\", \"dataField\": \"availableData\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n            ]\r\n        } else if (screenName === \"IDS_FORMULA\" && optional === \"\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_FORMULANAME\", \"dataField\": \"sformulaname\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_FORMULA\", \"dataField\": \"sformulacalculationdetail\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" }\r\n            ]\r\n        }else if (screenName === \"IDS_PREDEFINEDFORMULA\" ) {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_FORMULANAME\", \"dataField\": \"sformulaname\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_PREDEFINEDFORMULA\", \"dataField\": \"npredefinedformulacode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" }\r\n            ]\r\n        }\r\n        else if (screenName === \"IDS_PARAMETER\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_PARAMETERNAME\", \"dataField\": \"sparametername\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_PARAMETERSYNONYM\", \"dataField\": \"sparametersynonym\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_PARAMETERTYPE\", \"dataField\": \"nparametertypecode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n            ]\r\n            if (selectedRecord && Object.values(selectedRecord).length > 0 && selectedRecord[\"nparametertypecode\"]) {\r\n                if (selectedRecord[\"nparametertypecode\"].value === parameterType.NUMERIC) {\r\n                    mandyFields.push(\r\n                        { \"idsName\": \"IDS_ROUNDINGDIGITS\", \"dataField\": \"nroundingdigits\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                        { \"idsName\": \"IDS_UNIT\", \"dataField\": \"nunitcode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                    );\r\n                } else if (selectedRecord[\"nparametertypecode\"].value === parameterType.PREDEFINED) {\r\n                    mandyFields.push(\r\n                        { \"idsName\": \"IDS_CODEDRESULT\", \"dataField\": \"spredefinedname\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                        { \"idsName\": \"IDS_ACTUALRESULT\", \"dataField\": \"ngradecode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                        { \"idsName\": \"IDS_CODEDRESULTSYNONYM\", \"dataField\": \"spredefinedsynonym\", \"width\": \"200px\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n                    );\r\n                }\r\n            }\r\n        } \r\n        else if(screenName === \"IDS_CODEDRESULT\")\r\n            {\r\n                mandyFields.push(\r\n                    { \"idsName\": \"IDS_CODEDRESULT\", \"dataField\": \"spredefinedname\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                    { \"idsName\": \"IDS_ACTUALRESULT\", \"dataField\": \"ngradecode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                    { \"idsName\": \"IDS_CODEDRESULTSYNONYM\", \"dataField\": \"spredefinedsynonym\", \"width\": \"200px\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n                );\r\n            }else if (screenName === \"IDS_VALIDATEFORMULA\") {\r\n            mandyFields = this.state.validateFormulaMandyFields;\r\n        } else if (screenName === \"IDS_TESTFILE\") {\r\n            if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n                mandyFields = [\r\n                    { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                    { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n                ];\r\n            } else {\r\n                // if (this.props.operation !== 'update') {\r\n                mandyFields = [\r\n                    { \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                ];\r\n                // }\r\n            }\r\n        }\r\n        else if (screenName === \"IDS_CONTAINERTYPE\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_CONTAINERTYPE\", \"dataField\": \"ncontainertypecode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                // { \"idsName\": \"IDS_QUANTITY\", \"dataField\": \"nquantity\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                this.state.selectedRecord.unitMandatory === true ?  { \"idsName\": \"IDS_UNIT\", \"dataField\": \"nunitcode\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" } : {},\r\n\r\n            ] \r\n        }else if (screenName === \"IDS_CLINICALSPEC\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_GENDER\", \"dataField\": \"ngendercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\"},\r\n                { \"idsName\": \"IDS_FROMAGE\", \"dataField\": \"nfromage\", \"width\": \"200px\", \"mandatory\": true },\r\n                { \"idsName\": \"IDS_TOAGE\", \"dataField\": \"ntoage\", \"width\": \"200px\", \"mandatory\": true },\r\n                // ALPD-5364 - added by Gowtham R on 24/03/2025 - for mandatory check for period combo in FromDate and ToDate.\r\n                { \"idsName\": \"IDS_PERIOD\", \"dataField\": \"nfromageperiod\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\"},\r\n                { \"idsName\": \"IDS_PERIOD\", \"dataField\": \"ntoageperiod\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\"}\r\n            ] \r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n        let finalMandyFields = [];\r\n        mandyFields.forEach(item => item.mandatory === true && finalMandyFields.push(item));\r\n        return finalMandyFields;\r\n    }\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    tabDetail = () => {\r\n        const tabMap = new Map();\r\n\r\n        tabMap.set(\"IDS_PARAMETER\",\r\n            <ParameterTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                TestParameter={this.props.masterData.TestParameter}\r\n                masterData={this.props.masterData}\r\n                userInfo={this.props.userInfo}\r\n                getTestDetails={this.props.getTestDetails}\r\n                inputParam={this.props.inputParam}\r\n                addParameter={this.props.addParameter}\r\n                deleteAction={this.props.deleteAction}\r\n                ConfirmDelete={this.ConfirmDelete}\r\n                addCodedResult={this.props.addCodedResult}\r\n                addSubCodedResult={this.props.addSubCodedResult}\r\n                addFormula={this.props.addFormula}\r\n                openPredefinedModal={this.props.openPredefinedModal}\r\n                onSwitchChange={this.onSwitchChange}\r\n                addParameterSpecification={this.props.addParameterSpecification}\r\n                addClinicalSpecification={this.props.addClinicalSpecification}\r\n                screenName=\"IDS_PARAMETER\"\r\n                grade={this.props.grade}\r\n                dataStateChange={this.props.dataStateChange}\r\n                dataState={this.props.clinicalspecDataState}\r\n                EditSpecDetails={this.EditSpecDetails}\r\n                deleteRecord={this.DeleteSpecDetails}\r\n            />\r\n        );\r\n        tabMap.set(\"IDS_SECTION\",\r\n            <TestSectionTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                dataResult={process(this.props.masterData[\"TestSection\"], (this.props.screenName === undefined || this.props.screenName === \"IDS_SECTION\") ? this.state.sectionDataState : { skip: 0, take: 10 })}\r\n                dataState={(this.props.screenName === undefined || this.props.screenName === \"IDS_SECTION\") ? this.state.sectionDataState : { skip: 0, take: 5 }}\r\n                dataStateChange={(event) => this.setState({ sectionDataState: event.dataState })}\r\n                selectedTest={this.props.masterData.SelectedTest}\r\n                userInfo={this.props.userInfo}\r\n                inputParam={this.props.inputParam}\r\n                deleteRecord={this.deleteRecord}\r\n                defaultRecord={this.defaultRecord}\r\n                getAvailableData={this.props.getAvailableData}\r\n                TestSection={this.props.masterData.TestSection || []}\r\n                screenName=\"IDS_SECTION\"\r\n            />);\r\n        tabMap.set(\"IDS_METHOD\",\r\n            <TestMethodTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                dataResult={process(this.props.masterData[\"TestMethod\"], (this.props.screenName === undefined || this.props.screenName === \"IDS_METHOD\") ? this.state.methodDataState : { skip: 0, take: 5 })}\r\n               // dataResult={this.state.testmethodata && this.state.testmethodata===undefined?this.props.masterData[\"TestMethod\"]:this.state.testmethodata }\r\n                dataState={(this.props.screenName === undefined || this.props.screenName === \"IDS_METHOD\") ? this.state.methodDataState : { skip: 0, take: 5 }}\r\n                dataStateChange={(event) => this.setState({ methodDataState: event.dataState })}\r\n                selectedTest={this.props.masterData.SelectedTest}\r\n                userInfo={this.props.userInfo}\r\n                inputParam={this.props.inputParam}\r\n                deleteRecord={this.deleteRecord}\r\n                defaultRecord={this.defaultRecord}\r\n                getAvailableData={this.props.getAvailableData}\r\n                TestMethod={this.props.masterData.TestMethod || []}\r\n                screenName=\"IDS_METHOD\"\r\n            />\r\n        );\r\n        tabMap.set(\"IDS_INSTRUMENTCATEGORY\",\r\n            <TestInstrumentCategoryTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                dataResult={process(this.props.masterData[\"TestInstrumentCategory\"], (this.props.screenName === undefined || this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") ? this.state.instrumentCatDataState : { skip: 0, take: 5 })}\r\n                dataState={(this.props.screenName === undefined || this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") ? this.state.instrumentCatDataState : { skip: 0, take: 5 }}\r\n                dataStateChange={(event) => this.setState({ instrumentCatDataState: event.dataState })}\r\n                selectedTest={this.props.masterData.SelectedTest}\r\n                userInfo={this.props.userInfo}\r\n                inputParam={this.props.inputParam}\r\n                deleteRecord={this.deleteRecord}\r\n                defaultRecord={this.defaultRecord}\r\n                getAvailableData={this.props.getAvailableData}\r\n                TestInstrumentCategory={this.props.masterData.TestInstrumentCategory}\r\n                screenName=\"IDS_INSTRUMENTCATEGORY\"\r\n            />\r\n        );\r\n        tabMap.set(\"IDS_FILE\",\r\n            <TestFileTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                userInfo={this.props.userInfo}\r\n                inputParam={this.props.inputParam}\r\n                deleteRecord={this.deleteRecord}\r\n                dataStateChange={(event) => this.setState({ testFileDataState: event.dataState })}\r\n                testFileDataState={this.state.testFileDataState}\r\n                TestFile={this.props.masterData.TestFile || []}\r\n                getAvailableData={this.props.getAvailableData}\r\n                addTestFile={this.props.addTestFile}\r\n                viewTestFile={this.viewTestFile}\r\n                defaultRecord={this.defaultRecord}\r\n                screenName=\"IDS_FILE\"\r\n                settings={this.props.settings}\r\n            />);\r\n\r\n       // if (this.props.esignRights && Object.keys(this.props.esignRights).indexOf(formCode.TESTPACKAGE.toString())!==-1){\r\n       if (this.props.hideQualisForms && this.props.hideQualisForms.findIndex(item=>item.nformcode === formCode.TESTPACKAGE) === -1)\r\n       {                   \r\n            tabMap.set(\"IDS_TESTPACKAGE\",\r\n                <TestPackageTab\r\n                    controlMap={this.props.controlMap}\r\n                    userRoleControlRights={this.props.userRoleControlRights}\r\n                    dataResult={process(this.props.masterData[\"TestPackage\"] || [], (this.props.screenName === undefined || this.props.screenName === \"IDS_PACKAGE\") ? this.state.testPackageDataState : { skip: 0, take: 5 })}\r\n                    dataState={(this.props.screenName === undefined || this.props.screenName === \"IDS_PACKAGE\") ? this.state.testPackageDataState : { skip: 0, take: 5 }}\r\n                    dataStateChange={(event) => this.setState({ testPackageDataState: event.dataState })}\r\n                    selectedTest={this.props.masterData.SelectedTest}\r\n                    userInfo={this.props.userInfo}\r\n                    inputParam={this.props.inputParam} \r\n                    deleteRecord={this.deleteRecord}\r\n                    defaultRecord={this.defaultRecord}\r\n                    getAvailableData={this.props.getAvailableData}\r\n                    TestPackage={this.props.masterData.TestPackage}\r\n                    screenName=\"IDS_PACKAGE\"\r\n                />\r\n            );\r\n        }\r\n\r\n        // tabMap.set(\"IDS_TECHNIQUE\",\r\n        //     <TestTechniqueTab\r\n        //         controlMap={this.props.controlMap}\r\n        //         userRoleControlRights={this.props.userRoleControlRights}\r\n        //         dataResult={process(this.props.masterData[\"TestTechnique\"] ||[], (this.props.screenName === undefined || this.props.screenName === \"IDS_TECHNIQUE\") ? this.state.sectionDataState : { skip: 0, take: 10 })}\r\n        //         dataState={(this.props.screenName === undefined \r\n        //             || this.props.screenName === \"IDS_TECHNIQUE\") ? this.state.techniqueDataState : { skip: 0, take: 10 }}\r\n        //         dataStateChange={(event) => this.setState({ techniqueDataState: event.dataState })}\r\n        //         selectedTest={this.props.masterData.SelectedTest}\r\n        //         userInfo={this.props.userInfo}\r\n        //         inputParam={this.props.inputParam}\r\n        //         deleteRecord={this.deleteRecord}\r\n        //         defaultRecord={this.defaultRecord}\r\n        //         getAvailableData={this.props.getAvailableData}\r\n        //         TestTechnique={this.props.masterData.TestTechnique || []}\r\n        //         screenName=\"IDS_TECHNIQUE\"\r\n        //     />);\r\n\r\n        tabMap.set(\"IDS_CONTAINERTYPE\",\r\n            <TestContainerTypeTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                dataResult={process(this.props.masterData[\"Containertype\"], (this.props.screenName === undefined || this.props.screenName === \"IDS_CONTAINERTYPE\") ? this.state.containerTypeDataState : { skip: 0, take: 5 })}\r\n                dataState={(this.props.screenName === undefined || this.props.screenName === \"IDS_CONTAINERTYPE\") ? this.state.containerTypeDataState : { skip: 0, take: 5 }}\r\n                dataStateChange={(event) => this.setState({ containerTypeDataState: event.dataState })}\r\n                selectedTest={this.props.masterData.SelectedTest}\r\n                userInfo={this.props.userInfo}\r\n                inputParam={this.props.inputParam}\r\n                deleteRecord={this.deleteRecord}\r\n                defaultRecord={this.defaultRecord}\r\n                getAvailableData={this.props.getAvailableData}\r\n                TestContainerType={this.props.masterData.Containertype}\r\n                getActiveTestContainerTypeById={this.props.getActiveTestContainerTypeById}\r\n                addContainerType={this.props.addContainerType}\r\n                intl={this.props.intl}\r\n                screenName=\"IDS_CONTAINERTYPE\"\r\n            />\r\n        );\r\n\r\n        return tabMap;\r\n    }\r\n\r\n    viewTestFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                testfile: filedata,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: \"view\",\r\n            methodUrl: \"AttachedTestFile\",\r\n            screenName: \"IDS_TEST\"\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n    DeleteSpecDetails = (viewdetails, ncontrolCode) => {\r\n        this.ConfirmDelete(viewdetails,\"delete\", ncontrolCode,'TestParameterClinicalSpec','openChildModal')\r\n    };\r\n    EditSpecDetails = (viewdetails, ncontrolCode) => {\r\n\r\n        this.props.addClinicalSpecification(\"update\", viewdetails, this.props.userInfo, ncontrolCode)\r\n    };\r\n\r\n    deleteRecord = (deleteParam) => {\r\n\r\n        let dataResultRecord;\r\n        let skipDataRecords;\r\n\r\n        const methodUrl = deleteParam.methodUrl;\r\n        const selected = deleteParam.selectedRecord;\r\n        let dataState = undefined;\r\n        if (this.props.screenName === \"IDS_SECTION\") {     \r\n            dataResultRecord=process(this.props.masterData[\"TestSection\"], this.state.sectionDataState );\r\n            dataState = this.state.sectionDataState;\r\n        } else if (this.props.screenName === \"IDS_METHOD\") {\r\n            dataResultRecord=process(this.props.masterData[\"TestMethod\"], this.state.methodDataState );\r\n            dataState = this.state.methodDataState;\r\n        } else if (this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") {\r\n            dataResultRecord=process(this.props.masterData[\"TestInstrumentCategory\"], this.state.instrumentCatDataState );\r\n            dataState = this.state.instrumentCatDataState;\r\n        }\r\n        else if (this.props.screenName === \"IDS_CONTAINERTYPE\") {\r\n            dataResultRecord=process(this.props.masterData[\"TestMethod\"], this.state.containerTypeDataState );\r\n            dataState = this.state.containerTypeDataState;\r\n        }\r\n        else if (this.props.screenName === \"IDS_TESTPACKAGE\") {\r\n            dataResultRecord=process(this.props.masterData[\"TestPackage\"], this.state.testPackageDataState );\r\n            dataState = this.state.testPackageDataState;\r\n        } else if (this.props.screenName === \"IDS_TESTFILE\" || this.props.screenName === \"IDS_FILE\" ) {  \r\n            dataResultRecord=process(this.props.masterData[\"TestFile\"], this.state.testPackageDataState );\r\n            dataState = this.state.testFileDataState; \r\n        }\r\n//ALPD-554 Test Master: Section, Method, Instrument, and Container Type cannot be deleted.\r\n        if(dataResultRecord && dataResultRecord.data){\r\n            if(dataResultRecord.data.length ===1){\r\n               let skipcount=dataState.skip>0?(dataState.skip-dataState.take):\r\n               dataState.skip\r\n               skipDataRecords={skip:skipcount,take:dataState.take}\r\n            }else{\r\n                skipDataRecords=dataState;\r\n            }\r\n        }\r\n\r\n\r\n        const inputParam = {      \r\n            inputData: {\r\n                [methodUrl.toLowerCase()]: selected,\r\n                \"userinfo\": {...this.props.userInfo,\r\n               \r\n\t\t\t\t//ALPD-1628(while file saving,audit trail is not captured respective language)\r\n                    slanguagename: Lims_JSON_stringify(this.props.userInfo.slanguagename)},\r\n                   \t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n\t\t\t\t\t \"isQualisLite\":parseInt(this.props.settings[71])\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: deleteParam.operation,\r\n            methodUrl: methodUrl,\r\n            screenName: this.props.screenName, //Added by sonia on 19th Feb 2025 for jira id:ALPD-5455\r\n            dataState:skipDataRecords\r\n        }\r\n        const masterData = this.props.masterData;\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openChildModal: true, screenName: this.props.screenName, operation: deleteParam.operation, selectedRecord: {}\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        } else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\", {});\r\n        }\r\n    }\r\n\r\n    defaultRecord = (defaultParam, event) => {\r\n        const methodUrl = defaultParam.methodUrl;\r\n        let dataItem = defaultParam.selectedRecord;\r\n        // dataItem[\"ndefaultstatus\"] = transactionStatus.YES;\r\n        let dataState = undefined;\r\n        if (this.props.screenName === \"IDS_SECTION\") {\r\n            dataState = this.state.sectionDataState;\r\n        } else if (this.props.screenName === \"IDS_METHOD\") {\r\n            dataState = this.state.methodDataState;\r\n        } else if (this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") {\r\n            dataState = this.state.instrumentCatDataState;\r\n        }\r\n        else if (this.props.screenName === \"IDS_CONTAINERTYPE\") {\r\n            dataState = this.state.containerTypeDataState;\r\n        }\r\n        else if (this.props.screenName === \"IDS_TESTPACKAGE\") {\r\n            dataState = this.state.testPackageDataState;\r\n        }\r\n\r\n        let postParam = { inputListName: \"TestMaster\", selectedObject: \"SelectedTest\", primaryKeyField: \"ntestcode\" };\r\n\r\n        const inputParam = {\r\n            inputData: {\r\n                [methodUrl.toLowerCase()]: dataItem,\r\n                userinfo: this.props.userInfo,\r\n\t\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n                \"isQualisLite\":parseInt(this.props.settings[71])\r\n\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: \"setDefault\",\r\n            methodUrl: methodUrl, dataState, postParam\r\n        }\r\n        const masterData = this.props.masterData;\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, defaultParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openChildModal: true, screenName: \"Test\", operation: defaultParam.operation, selectedRecord: {}\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        } else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\", {});\r\n        }\r\n    }\r\n\r\n    onSwitchChange = (item, key, methodUrl, event,defaultTestFormulaId) => {\r\n        const masterData =this.props.masterData;\r\n        let dataItem = item;\r\n        // dataItem[\"ndefaultstatus\"] = 3;\r\n        //dataItem['ndefaultstatus'] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        const inputParam = {\r\n            inputData: {\r\n                [key]: dataItem,\r\n                userinfo: this.props.userInfo,\r\n\t\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n                \"isQualisLite\":parseInt(this.props.settings[71])\r\n\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: \"setDefault\",\r\n            methodUrl: methodUrl\r\n        }\r\n        if(showEsign(this.props.esignRights, this.props.userInfo.nformcode, defaultTestFormulaId)){\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openChildModal: true, screenName: \"Test\", operation: \"setDefault\", selectedRecord: {}\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }else{\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\", {});\r\n        }\r\n        \r\n    }\r\n\r\n    hideValidateFormula = () => {\r\n        this.setState({ openValidate: false, showCalculate: false, formulaScreenName: \"\", validateFormulaMandyFields: [] });\r\n    }\r\n\r\n    validateFormula = (testData) => {\r\n        const sformulacalculationcode = this.state.selectedRecord.sformulacalculationcode;\r\n        if (sformulacalculationcode) {\r\n            if (sformulacalculationcode.includes(\"$D\") || sformulacalculationcode.includes(\"$P\")) {\r\n                rsapi.post(\"/testmaster/validateTestFormula\", { ntestcode: testData.ntestcode, \"sformula\": sformulacalculationcode, userinfo: this.props.userInfo })\r\n                    .then(response => {\r\n                        let selectedRecord = this.state.selectedRecord || {};\r\n                        selectedRecord[\"formulainput\"] = {};\r\n                        const validateFormulaMandyFields = response.data.map((item, index) => {\r\n                            return { \"idsName\": \"IDS_FILLALLFIELDS\", \"dataField\": \"dynamicformulafield_\" + index, \"mandatory\": true }\r\n                        });\r\n                        this.setState({\r\n                            openValidate: true,\r\n                            DynamicFields: response.data,\r\n                            dynamicField: [],\r\n                            selectedRecord,\r\n                            formulaScreenName: \"IDS_VALIDATEFORMULA\",\r\n                            showCalculate: true, validateFormulaMandyFields\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        toast.error(error.message)\r\n                    });\r\n            } else {\r\n                const inputParam = {\r\n                    dynamicformulafields: [],\r\n                    sformulacalculationcode: this.state.selectedRecord.sformulacalculationcode,\r\n                    userinfo: this.props.userInfo\r\n                }\r\n                this.calculateFormulaFunction(inputParam);\r\n            }\r\n        } else {\r\n            toast.info(this.props.intl.formatMessage({ id: \"IDS_ENTERFORMULA\" }))\r\n        }\r\n    }\r\n\r\n    calculateFormulaFunction(inputParam) {\r\n        rsapi.post(\"/testmaster/calculateFormula\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                 //ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)\r\n                const selectedRecord=this.state.selectedRecord ||{};\r\n                selectedRecord[\"query\"]=response.data[\"Query\"];\r\n                selectedRecord[\"result\"]=response.data[\"Result\"];\r\n\r\n                this.setState({\r\n                    openValidate: false,\r\n\t\t\t\t\tselectedRecord,\r\n                    //query: response.data[\"Query\"],\r\n                    //result: response.data[\"Result\"],\r\n                    showCalculate: false, formulaScreenName: \"\"\r\n                })\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    //toast.warn(error.response.data);\r\n                    toast.warn(error.response.data[\"Result\"]);\r\n                }\r\n            });\r\n    }\r\n\r\n    calculateFormula = () => {\r\n        const dynamicField = this.state.dynamicField;\r\n        const dynamicformulafields = Object.keys(dynamicField).map((keyname) => {\r\n            return dynamicField[keyname];\r\n        });\r\n        const inputParam = {\r\n            dynamicformulafields: dynamicformulafields,\r\n            sformulacalculationcode: this.state.selectedRecord.sformulacalculationcode,\r\n            userinfo: this.props.userInfo\r\n        }\r\n        this.calculateFormulaFunction(inputParam);\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            //ALPD-707 fix\r\n            if (this.props.operation === \"delete\" || this.props.operation === \"Default\"\r\n                ||   this.props.operation === \"setDefault\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n            } else {\r\n                loadEsign = false;\r\n                // ALPD-5604 - commented by Gowtham R on 01/04/25 - testmaster paratemeter edit e-sign agree gets disable.\r\n                // selectedRecord[\"agree\"] = 4;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n        } else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName, caseNo) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        switch (caseNo) {\r\n            case 1:\r\n                if (fieldName === \"sparametername\") {\r\n                    selectedRecord[fieldName] = comboData;\r\n                    selectedRecord[\"sparametersynonym\"] = comboData.value;\r\n                }  else if(fieldName  === \"nunitcode\") {\r\n                    //ALPD-3637-Vignesh R(02-08-2024)-- Test master--> parameter records are disappeared when clicking the refresh button.\r\n                    selectedRecord[\"noperatorcode\"]=-1;\r\n                    selectedRecord[\"nconversionfactor\"]=\"\";\r\n                    selectedRecord[\"ndestinationunitcode\"]=\"\";  \r\n                    selectedRecord[\"sunitname\"]=\"\";\r\n                    selectedRecord[\"sunitname1\"]=\"\";\r\n                    selectedRecord[\"nunitcode\"] = comboData;\r\n                    this.props.getUnitConversion(this.state.selectedRecord.nunitcode.value,this.props.masterData,this.props.userInfo, selectedRecord);\r\n                } else  if(fieldName === \"ndestinationunitcode\") {\r\n                    if(comboData !==null){\r\n                         selectedRecord[\"ndestinationunitcode\"]= comboData;\r\n                        this.props.getConversionOperator(this.state.selectedRecord.nunitcode.value,this.state.selectedRecord.ndestinationunitcode.value,this.props.masterData,this.props.userInfo, selectedRecord);\r\n                    }else{\r\n                        delete selectedRecord[\"ndestinationunitcode\"];\r\n\t\t\t\t\t\t//ALPD-3521\r\n                        delete selectedRecord[\"soperator\"];\r\n                        delete selectedRecord[\"nconversionfactor\"];\r\n                         selectedRecord[\"noperatorcode\"]=-1;\r\n                    }\r\n                   \r\n                }\r\n\r\n                 else {\r\n                    selectedRecord[fieldName] = comboData;\r\n                }\r\n                this.setState({ selectedRecord });\r\n                break;\r\n\r\n            case 2:\r\n                const parameterData = this.props.parameterData;\r\n                let item = comboData['item'];\r\n                let needUnit = true;\r\n                let needRoundingDigit = true;\r\n                let needCodedResult = true;\r\n                let needActualResult = true;\r\n                let npredefinedcode = 4;\r\n                if (item[\"nunitrequired\"] === 3) {\r\n                    needUnit = false;\r\n                    selectedRecord[\"nunitcode\"] = this.props.parameterData.defaultUnit;\r\n                } else {\r\n                    selectedRecord[\"nunitcode\"] = \"\";\r\n\t\t\t\t\t//ALPD-3521\r\n                    selectedRecord[\"ndestinationunitcode\"]=\"\";\r\n                    selectedRecord[\"noperatorcode\"]=-1;\r\n                    selectedRecord[\"sunitname\"]=\"\";\r\n                    selectedRecord[\"sunitname1\"]=\"\";\r\n                    selectedRecord[\"nconversionfactor\"]=\"\";\r\n\r\n\r\n                    // selectedRecord[\"nunitcode\"] = \"\";\r\n\r\n                }\r\n                if (item[\"nroundingrequired\"] === 3) {\r\n                    needRoundingDigit = false;\r\n                } else {\r\n                    selectedRecord[\"nroundingdigits\"] = \"0\";\r\n                }\r\n                if (item[\"npredefinedrequired\"] === 3) {\r\n                    needCodedResult = false;\r\n                    npredefinedcode = item[\"npredefinedrequired\"];\r\n                } else {\r\n                    selectedRecord[\"spredefinedname\"] = \"\";\r\n                }\r\n                if (item[\"ngraderequired\"] === 3) {\r\n                    needActualResult = false;\r\n                    selectedRecord[\"ngradecode\"] = this.props.parameterData.defaultGrade;\r\n                } else {\r\n                    selectedRecord[\"ngradecode\"] = \"\";\r\n                }\r\n                selectedRecord[fieldName] = comboData;\r\n                const parameterInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: { selectedRecord, parameterData: { ...parameterData, needUnit, needRoundingDigit, needCodedResult, needActualResult, npredefinedcode } }\r\n                }\r\n                this.props.updateStore(parameterInfo);\r\n                break;\r\n\r\n            case 3:\r\n                selectedRecord[fieldName] = comboData;\r\n                this.props.formulaChangeFunction({ ntestcategorycode: comboData.value, nFlag: 2, userinfo: this.props.userInfo }, this.props.formulaData, 1, selectedRecord, '/changeTestCatgoryInFormula');\r\n                break;\r\n\r\n            case 4:\r\n                selectedRecord[fieldName] = comboData;\r\n                this.props.formulaChangeFunction({ ntestcode: comboData.value, nFlag: 3, userinfo: this.props.userInfo }, this.props.formulaData, 2, selectedRecord, '/changeTestInFormula');\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onEsignInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n        } else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onInputOnChange = (event, caseNo, optional) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        switch (caseNo) {\r\n            case 1:\r\n                if (event.target.type === 'checkbox') {\r\n                    selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n                } else if (event.target.type === 'radio') {\r\n                    selectedRecord[event.target.name] = optional;\r\n                    //  selectedRecord[\"sfilename\"]=\"\";\r\n                } else {\r\n                    selectedRecord[event.target.name] = event.target.value;\r\n                }\r\n                this.setState({ selectedRecord });\r\n                break;\r\n\r\n            case 4:\r\n                const inputValue = event.target.value;\r\n                if (/^-?\\d*?\\.?\\d*?$/.test(inputValue) || inputValue === \"\") {\r\n                    selectedRecord[event.target.name] = event.target.value;\r\n                }\r\n                this.setState({ selectedRecord });\r\n                break;\r\n\r\n            case 5:\r\n                if (optional.ndynamicformulafieldcode === FORMULAFIELDTYPE.INTEGER && optional.sdescription.indexOf('P$') === -1) {\r\n                    const value = event.target.value.replace(/[^-^0-9]/g, '');\r\n                    const dynamicField = this.state.dynamicField || [];\r\n                    if ((/^-?\\d*?$/.test(value))) {\r\n                        if (!selectedRecord['formulainput']) {\r\n                            selectedRecord['formulainput'] = {};\r\n                        }\r\n                        selectedRecord['formulainput'][event.target.name] = value;\r\n                        dynamicField[event.target.name] = {\r\n                            sparameter: optional.sdescription,\r\n                            svalues: value\r\n                        };\r\n                    } \r\n                    else if (value === \"\") {\r\n                        if (!selectedRecord['formulainput']) {\r\n                            selectedRecord['formulainput'] = {};\r\n                        }\r\n                        selectedRecord['formulainput'][event.target.name] = value;\r\n                        dynamicField[event.target.name] = {\r\n                            sparameter: optional.sdescription,\r\n                            svalues: value\r\n                        };\r\n                    }\r\n                    this.setState({ dynamicField, selectedRecord });\r\n                    break;\r\n                } else {\r\n                    const value = event.target.value.replace(/[^-^0-9.]/g, '');\r\n                    const dynamicField = this.state.dynamicField || [];\r\n                    if ((/^-?\\d*?\\.?\\d*?$/.test(value)) || value !== \"\") {\r\n                        if (!selectedRecord['formulainput']) {\r\n                            selectedRecord['formulainput'] = {};\r\n                        }\r\n                        selectedRecord['formulainput'][event.target.name] = value;\r\n                        dynamicField[event.target.name] = {\r\n                            sparameter: optional.sdescription,\r\n                            svalues: value\r\n                        };\r\n                    }\r\n                    this.setState({ dynamicField, selectedRecord });\r\n                    break;\r\n                }\r\n\r\n                case 6:\r\n                    // selectedRecord[event.target.name] = selectedRecord[\"sresultparacomment\"] = { label: event.target.value, value: event.target.value };\r\n                    // this.setState({ selectedRecord });\r\n                    // break;\r\n                    selectedRecord[event.target.name] = selectedRecord[\"spredefinedsynonym\"] = event.target.value;\r\n                    //selectedRecord[event.target.name] = selectedRecord[\"sresultparacomment\"] = event.target.value;\r\n                    //selectedRecord[\"sparametername\"] = { label: event.target.value, value: event.target.value };\r\n                    this.setState({ selectedRecord });\r\n                    break;\r\n                    case 7:\r\n                        const inputValues = event.target.value;\r\n                       if (/^-?\\d*?\\.?\\d*?$/.test(inputValues) || inputValues === \"\") {\r\n                           selectedRecord[event.target.name] = event.target.value;\r\n                       }\r\n                       \r\n                       if(selectedRecord[\"sresultvalue\"]!==\"\"  && selectedRecord[\"sresultvalue\"]!==undefined  && selectedRecord[\"sresultvalue\"].value !== -1)\r\n                        {\r\n                            selectedRecord[\"ngradecode\"]=this.props.parameterData.grade[3];\r\n                            \r\n                        }\r\n                       else if(selectedRecord[\"sresultvalue\"]===\"\")\r\n                        {\r\n                            delete selectedRecord[\"ngradecode\"];\r\n                        }\r\n                       this.setState({ selectedRecord });\r\n                       break;\r\n    \r\n    \r\n                       case 8:\r\n                        const inputvalues = event.target.value;\r\n                       if (/^-?\\d*?\\.?\\d*?$/.test(inputvalues) || inputvalues === \"\") {\r\n                           selectedRecord[event.target.name] = event.target.value;\r\n                       }\r\n                       \r\n                       if(selectedRecord[\"sresultvalue\"]!==\"\" && (selectedRecord[\"ngradecode\"]===undefined|| selectedRecord[\"ngradecode\"].value===-1))\r\n                        {\r\n                            selectedRecord[\"ngradecode\"]=this.props.parameterData.gradenew[3];\r\n                            \r\n                        }\r\n                       else if(selectedRecord[\"sresultvalue\"]===\"\")\r\n                        {\r\n                            delete selectedRecord[\"ngradecode\"];\r\n                        }\r\n                       this.setState({ selectedRecord });\r\n                       break;\r\n\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // onNumericInputChange = (value, name) => {\r\n    //     const selectedRecord = this.state.selectedRecord || {};\r\n    //     selectedRecord[name] = value;\r\n    //     this.setState({ selectedRecord });\r\n    // }\r\n\r\n    onNumericInputChange = (value, name, secondaryFieldName) => {\r\n        console.log(\"value:\", value, name);\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (name === \"nroundingdigits\") {\r\n            const values = value.target.value;  //.replace(/[^-^0-9]/g, '');\r\n            if (/^\\d*?$/.test(values) || values === \"\") {\r\n                console.log(\"val:\", values);\r\n                selectedRecord[name] = values;\r\n            }\r\n        }\r\n        else {\r\n            selectedRecord[name] = value;\r\n\r\n            if(secondaryFieldName !== undefined){\r\n                if(selectedRecord[name] === 0 || selectedRecord[name] === undefined){\r\n                    selectedRecord[\"unitMandatory\"] = false;\r\n                    selectedRecord[\"nunitcode\"] = undefined;\r\n                }\r\n                else{\r\n                    selectedRecord[\"unitMandatory\"] = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        let inputParam = {};\r\n        let defaultInput = {};\r\n        let isValidRequest = true;\r\n        let clearSelectedRecordField=[];\r\n        if (this.props.screenName === \"IDS_PARAMETER\") {\r\n            inputParam = this.onSaveParameter(saveType, formRef);\r\n            defaultInput = {\r\n                nparametertypecode: this.state.selectedRecord.nparametertypecode,\r\n             //   ngradecode: this.state.selectedRecord.ngradecode,\r\n                nunitcode: \"\"\r\n            };\r\n            clearSelectedRecordField = [\r\n                //{ \"controlType\": \"textbox\", \"idsName\":\"IDS_TESTNAME\", \"dataField\": \"stestname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                //{ \"controlType\": \"textarea\", \"idsName\": \"IDS_TESTSYNONYM\", \"dataField\": \"stestsynonym\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                //{ \"controlType\": \"textarea\", \"idsName\": \"IDS_SHORTNAME\", \"dataField\": \"sshortname\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                //{ \"controlType\": \"textarea\", \"idsName\": \"IDS_PRICE\", \"dataField\": \"ncost\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                //{ \"controlType\": \"textarea\", \"idsName\": \"IDS_TESTPROCEDURE\", \"dataField\": \"sdescription\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                //{ \"controlType\": \"textarea\", \"idsName\": \"IDS_TAT\", \"dataField\": \"ntat\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                //{ \"controlType\": \"textarea\", \"idsName\": \"IDS_TESTPLATFORM\", \"dataField\": \"stestplatform\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_PARAMETERSYNONYM\", \"dataField\": \"sparametersynonym\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_ROUNDINGDIGITS\", \"dataField\": \"nroundingdigits\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_CONVERSIONOPERATOR\", \"dataField\": \"soperator\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_CONVERSIONFACTOR\", \"dataField\": \"nconversionfactor\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_DELTACHECKTIMEFRAME\", \"dataField\": \"ndeltacheckframe\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_DELTACHECKLIMIT\", \"dataField\": \"ndeltachecklimitcode\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_CODEDRESULT\", \"dataField\": \"spredefinedname\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_CODEDRESULTSYNONYM\", \"dataField\": \"spredefinedsynonym\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_RESULTPARAMETERCOMMENTS\", \"dataField\": \"spredefinedcomments\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                //{ \"controlType\": \"textarea\", \"idsName\": \"IDS_ALERTMESSAGE\", \"dataField\": \"salertmessage\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_ACCREDITED\", \"dataField\": \"naccredited\", \"width\": \"200px\", \"controlName\": \"ncategorybasedflow\",\"isClearField\":true,\"preSetValue\":63 },\r\n                //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_ACTIVE\", \"dataField\": \"ntransactionstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":1 },\r\n                //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_TRAININGNEEDED\", \"dataField\": \"ntrainingneed\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n                { \"controlType\": \"checkbox\", \"idsName\": \"IDS_DELTACHECK\", \"dataField\": \"ndeltacheck\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n                //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_AlERTFORRESULTENTRY\", \"dataField\": \"nneedresultentryalert\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n                //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_SUBCODERESULTNEED\", \"dataField\": \"nneedsubcodedresult\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 }\r\n            ]\r\n        } else if (this.props.screenName === \"IDS_CODEDRESULT\") {\r\n            inputParam = this.onSaveCodedResult(saveType, formRef);\r\n            clearSelectedRecordField = [\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_CODEDRESULT\", \"dataField\": \"spredefinedname\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_CODEDRESULTSYNONYM\", \"dataField\": \"spredefinedsynonym\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_RESULTPARAMETERCOMMENTS\", \"dataField\": \"spredefinedcomments\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"checkbox\", \"idsName\": \"IDS_AlERTFORRESULTENTRY\", \"dataField\": \"nneedresultentryalert\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n                { \"controlType\": \"checkbox\", \"idsName\": \"IDS_SUBCODERESULTNEED\", \"dataField\": \"nneedsubcodedresult\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_ALERTMESSAGE\", \"dataField\": \"salertmessage\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n            ]\r\n        } else if (this.props.screenName === \"IDS_SPECIFICATION\") {\r\n            const selectedRecord = this.props.selectedRecord;\r\n            if (selectedRecord[\"sminb\"] || selectedRecord[\"smina\"] || selectedRecord[\"smaxa\"] || selectedRecord[\"smaxb\"]\r\n                || selectedRecord[\"sminlod\"] || selectedRecord[\"smaxlod\"] || selectedRecord[\"sminloq\"] || selectedRecord[\"smaxloq\"]\r\n                || selectedRecord[\"sdisregard\"] || selectedRecord[\"sresultvalue\"]) {\r\n                inputParam = this.onSaveSpecification(saveType, formRef);\r\n\r\n                clearSelectedRecordField = [\r\n                \r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_MINA\", \"dataField\": \"smina\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_MAXA\", \"dataField\": \"smaxa\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_MINLOQ\", \"dataField\": \"sminloq\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_MAXLOQ\", \"dataField\": \"smaxloq\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_DISREGARDED\", \"dataField\": \"sdisregard\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_MINB\", \"dataField\": \"sminb\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_MAXB\", \"dataField\": \"smaxb\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_MINLOD\", \"dataField\": \"sminlod\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_MAXLOD\", \"dataField\": \"smaxlod\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_DEFAULTRESULT\", \"dataField\": \"sresultvalue\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_MAXVALUES\", \"dataField\": \"smaxlod\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    { \"controlType\": \"textarea\", \"idsName\": \"IDS_DEFAULTRESULT\", \"dataField\": \"sresultvalue\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                    \r\n                    //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"ndefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n                    //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"nlinkdefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n                ]\r\n\r\n            } else {\r\n                toast.warn(this.props.intl.formatMessage({ id: \"IDS_ENTERSPECLIMIT\" }));\r\n                isValidRequest = false;\r\n            }\r\n        } else if(this.props.screenName === \"IDS_CLINICALSPEC\"){\r\n            inputParam = this.onSaveClinicalSpec(saveType, formRef);\r\n            clearSelectedRecordField = [\r\n                \r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_FROMAGE\", \"dataField\": \"nfromage\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_TOAGE\", \"dataField\": \"ntoage\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_LOWA\", \"dataField\": \"nlowa\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_HIGHA\", \"dataField\": \"nhigha\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_MINVALUES\", \"dataField\": \"sminloq\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_MAXVALUES\", \"dataField\": \"smaxloq\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_DISREGARDED\", \"dataField\": \"sdisregard\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_LOWB\", \"dataField\": \"nlowb\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_HIGHB\", \"dataField\": \"nhighb\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_MINVALUES\", \"dataField\": \"sminlod\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_MAXVALUES\", \"dataField\": \"smaxlod\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_DEFAULTRESULT\", \"dataField\": \"sresultvalue\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                \r\n                //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"ndefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n                //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"nlinkdefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n            ]\r\n        }\r\n        else if (this.props.screenName === \"IDS_FORMULA\"){\r\n            inputParam = this.onSaveFormula(saveType, formRef);\r\n            clearSelectedRecordField = [\r\n\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_FORMULANAME\", \"dataField\": \"sformulaname\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_INPUT\", \"dataField\": \"userinput\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_SYNTAX\", \"dataField\": \"syntax\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_FORMULA\", \"dataField\": \"sformulacalculationdetail\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_VALIDATEFORMULA\", \"dataField\": \"query\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_VALIDATEDRESULT\", \"dataField\": \"result\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_SYNTAX\", \"dataField\": \"sfunctionsyntax\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n\r\n                //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"ndefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n                //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"nlinkdefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n            ]\r\n        } else if (this.props.screenName === \"IDS_PREDEFINEDFORMULA\") {\r\n            inputParam = this.onSavePreDefinedFormula(saveType, formRef);\r\n            clearSelectedRecordField = [\r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_FORMULANAME\", \"dataField\": \"sformulaname\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                \r\n            ]\r\n        }\r\n        else if (this.props.screenName === \"IDS_TESTFILE\") {\r\n            inputParam = this.onSaveTestFile(saveType, formRef);\r\n            // clearSelectedRecordField = [\r\n                \r\n            //     { \"controlType\": \"textarea\", \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n            //     { \"controlType\": \"textarea\", \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n            //     { \"controlType\": \"textarea\", \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"slinkdescription\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n            //     { \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"ndefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n            //     { \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"nlinkdefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 },\r\n            // ]\r\n            clearSelectedRecordField = [];\r\n        } else if (this.props.screenName === \"IDS_CONTAINERTYPE\") {\r\n            inputParam = this.saveContainerType(saveType, formRef);\r\n            clearSelectedRecordField = [\r\n                \r\n                { \"controlType\": \"textarea\", \"idsName\": \"IDS_QUANTITY\", \"dataField\": \"nquantity\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n                \r\n            ]\r\n        }\r\n        else {\r\n            inputParam = this.saveTestData(saveType, formRef);\r\n        }\r\n        if (isValidRequest) {\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                if(this.props.screenName === \"IDS_PARAMETER\" || this.props.screenName === \"IDS_TESTFILE\" ||\r\n                   this.props.screenName === \"IDS_CONTAINERTYPE\" || this.props.screenName === \"IDS_CODEDRESULT\" || \r\n                   this.props.screenName === \"IDS_PREDEFINEDFORMULA\" || this.props.screenName === \"IDS_FORMULA\" || \r\n                   this.props.screenName === \"IDS_CLINICALSPEC\" || this.props.screenName === \"IDS_SPECIFICATION\"\r\n                )\r\n                {\r\n                    this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\", defaultInput,\"\",clearSelectedRecordField);\r\n                }\r\n                else\r\n                {\r\n                 this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\", defaultInput);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onSavePreDefinedFormula = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const selectedParameter = this.props.masterData.selectedParameter;\r\n        let testformula = {\r\n            ntestcode: selectedParameter[\"ntestcode\"],\r\n            ntestparametercode: selectedParameter[\"ntestparametercode\"],\r\n            ndefaultstatus: transactionStatus.NO,\r\n            nispredefinedformula: transactionStatus.YES,\r\n            nstatus: transactionStatus.ACTIVE,\r\n            sformulaname: this.state.selectedRecord.sformulaname,\r\n            sformulacalculationcode: \"\",\r\n            sformulacalculationdetail: this.state.selectedRecord.sformulaname,\r\n            npredefinedformulacode:this.state.selectedRecord.npredefinedformulacode&&this.state.selectedRecord.npredefinedformulacode.value\r\n        }\r\n      \r\n\r\n        let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"TestMaster\", selectedObject: \"SelectedTest\", primaryKeyField: \"ntestcode\" };\r\n            selectedId = selectedRecord[\"ntestparametercode\"];\r\n        }\r\n        const inputParam = {\r\n            inputData: {\r\n                testformula: testformula,\r\n                userinfo: this.props.userInfo,\r\n\t\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n                \"isQualisLite\":parseInt(this.props.settings[71])\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: \"create\",\r\n            methodUrl: \"TestFormula\", saveType, formRef, postParam,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    saveContainerType(saveType, formRef) {\r\n        let inputData = {};\r\n        let postParam = undefined;\r\n        let methodUrl = \"TestContainerType\";\r\n        if (this.props.operation == \"create\") {\r\n            if (this.state.selectedRecord.nquantity) {\r\n                this.state.selectedRecord['ncontainertypecode']['item']['nquantity'] = Number.parseFloat(this.state.selectedRecord.nquantity).toFixed(3);\r\n            }\r\n            //this.state.selectedRecord['ncontainertypecode']['item']['noutsourcecode'] = parseInt(this.state.selectedRecord.noutsourcecode);\r\n            if (this.state.selectedRecord.nunitcode) {\r\n                this.state.selectedRecord['ncontainertypecode']['item']['nunitcode'] = parseInt(this.state.selectedRecord.nunitcode.value);\r\n            }\r\n            else {\r\n                this.state.selectedRecord['ncontainertypecode']['item']['nunitcode'] = -1\r\n            }\r\n            inputData = {\r\n                [methodUrl.toLocaleLowerCase()]: this.state.selectedRecord.ncontainertypecode.item,\r\n                ntestcontainertypecode: this.state.selectedRecord.ntestcontainertypecode,\r\n                ntestcode: this.state.selectedRecord.ntestcode,\r\n\r\n\r\n                userinfo: this.props.userInfo,\r\n                testcode: this.props.masterData.SelectedTest.ntestcode,\r\n\t\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n                \"isQualisLite\":parseInt(this.props.settings[71])\r\n            }\r\n        }\r\n        else {\r\n            // edit\r\n            postParam = { inputListName: \"TestMaster\", selectedObject: \"SelectedTest\", primaryKeyField: \"ntestcode\" };\r\n\r\n            let unitCode = (this.state.selectedRecord.nquantity === 0 || this.state.selectedRecord.nquantity === undefined) ? -1 : \r\n                            this.state.selectedRecord.nunitcode.value;\r\n\r\n            inputData = {\r\n                ntestcontainertypecode: this.state.selectedRecord.ntestcontainertypecode,\r\n                ntestcode: this.state.selectedRecord.ntestcode,\r\n                ncontainertypecode: this.state.selectedRecord.ncontainertypecode.value,\r\n                // nunitcode: this.state.selectedRecord.nunitcode.value,\r\n                nunitcode : unitCode,\r\n                nquantity: parseInt(Number.parseFloat(this.state.selectedRecord.nquantity).toFixed(3)),\r\n                //noutsourcecode:this.state.selectedRecord.noutsourcecode,\r\n                userinfo: this.props.userInfo,\r\n                testcode: this.props.masterData.SelectedTest.ntestcode,\r\n\t\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n                \"isQualisLite\":parseInt(this.props.settings[71])\r\n\r\n            }\r\n        }\r\n        const inputParam = {\r\n            inputData: inputData,\r\n            classUrl: \"testmaster\",\r\n            operation: this.props.operation,\r\n            methodUrl: methodUrl, saveType, formRef, postParam,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        return inputParam;\r\n    }\r\n    saveTestData(saveType, formRef) {\r\n        let availableData = [];\r\n        this.state.selectedRecord.availableData.map(data => {\r\n            return availableData.push(data.item);\r\n        });\r\n        let methodUrl = \"\";\r\n        if (this.props.screenName === \"IDS_SECTION\") { //Test Section\r\n            methodUrl = \"TestSection\";\r\n        } else if (this.props.screenName === \"IDS_METHOD\") { //Test Method\r\n            methodUrl = \"TestMethod\";\r\n        } else if (this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") { //Test Instrument Category\r\n            methodUrl = \"TestInstrumentCategory\";\r\n        } else if (this.props.screenName === \"IDS_CONTAINERTYPE\") { //Test Instrument Category\r\n            methodUrl = \"TestContainerType\";\r\n        }\r\n        else if (this.props.screenName === \"IDS_PACKAGE\") { //Test Package\r\n            methodUrl = \"Testpackage\";\r\n        }\r\n        else if (this.props.screenName === \"IDS_TECHNIQUE\") { //Test Technique\r\n            methodUrl = \"TestTechnique\";\r\n        }\r\n\r\n        // let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"TestMaster\", selectedObject: \"SelectedTest\", primaryKeyField: \"ntestcode\" };\r\n            //  selectedId = selectedRecord[\"ntestparametercode\"];               \r\n        }\r\n        const inputParam = {\r\n            inputData: {\r\n                [methodUrl.toLocaleLowerCase()]: availableData,\r\n                userinfo: this.props.userInfo,\r\n\t\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n                \"isQualisLite\":parseInt(this.props.settings[71])\r\n\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: \"create\",\r\n            methodUrl: methodUrl, saveType, formRef, postParam\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onSaveParameter = (saveType, formRef) => {\r\n        const storeData = this.props;\r\n        let inputData = {};\r\n        let customobject = null;\r\n        const userInfo = storeData.userInfo;\r\n        let postParam = undefined;\r\n        const selectedRecord = this.state.selectedRecord;\r\n        let testColumns = [{ \"ntestparametercode\": \"int\" }, { \"nparametertypecode\": \"input\" }, { \"nunitcode\": \"input\" }, { \"ndestinationunitcode\":\"input\" }, \r\n        { \"noperatorcode\":\"int\" }, { \"nconversionfactor\":\"float\" }, { \"sparametername\": \"input\" },\r\n            { \"sparametersynonym\": \"string\" }, { \"nroundingdigits\": \"int\" }, { \"objPredefinedParameter\": \"customobject\" },\r\n            { \"ndeltachecklimitcode\": \"float\" }, { \"ndeltacheck\": \"int\" }, { \"ndeltaunitcode\": \"input\" },\r\n            { \"ndeltacheckframe\": \"int\" },{\"nresultaccuracycode\":\"input\"}]\r\n        if (storeData.operation === \"create\") {\r\n            inputData = {\r\n                \"testparameter\": {\r\n                    nisadhocparameter: transactionStatus.NO,\r\n                    nisvisible: transactionStatus.YES,\r\n                    nstatus: transactionStatus.ACTIVE,\r\n                    \r\n                }\r\n            };\r\n        } else {\r\n            inputData = { \"testparameter\": {} }\r\n            let selectedId = null;\r\n\r\n            if (storeData.operation === \"update\") {\r\n                // edit\r\n                postParam = { inputListName: \"TestMaster\", selectedObject: \"SelectedTest\", primaryKeyField: \"ntestcode\" };\r\n                selectedId = selectedRecord[\"ntestparametercode\"];\r\n            }\r\n        }\r\n        if (selectedRecord[\"nparametertypecode\"]) {\r\n            if (this.props.parameterData.npredefinedcode === transactionStatus.YES) {\r\n                customobject = {};\r\n                customobject[\"ntestparametercode\"] = selectedRecord[\"ntestparametercode\"];\r\n                customobject[\"ntestpredefinedcode\"] = selectedRecord[\"ntestpredefinedcode\"];\r\n                customobject[\"spredefinedname\"] = selectedRecord[\"spredefinedname\"].trim();\r\n                customobject[\"nstatus\"] = 1;\r\n                customobject[\"ndefaultstatus\"] = transactionStatus.YES;\r\n                customobject[\"ngradecode\"] = selectedRecord[\"ngradecode\"] ? selectedRecord[\"ngradecode\"].value ? selectedRecord[\"ngradecode\"].value : -1 : -1;\r\n                // if (selectedRecord[\"sresultparacomment\"]) {\r\n                    customobject[\"spredefinedsynonym\"] = selectedRecord[\"spredefinedsynonym\"] ? selectedRecord[\"spredefinedsynonym\"].trim() : \"\";\r\n\r\n                    //customobject[\"sresultparacomment\"] = selectedRecord[\"sresultparacomment\"] ? selectedRecord[\"sresultparacomment\"].trim() : \"\";\r\n                // }\r\n            }\r\n            inputData[\"userinfo\"] = userInfo;\r\n\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n            inputData[\"isQualisLite\"]=parseInt(this.props.settings[71]);\r\n            testColumns.map(item => {\r\n                const key = Object.keys(item)[0];\r\n                const value = Object.values(item)[0];\r\n                if (value === \"input\") {\r\n                    return inputData[\"testparameter\"][key] = selectedRecord[key] ? selectedRecord[key].value ? selectedRecord[key].value : -1 : -1;\r\n                } else if (value === \"int\") {\r\n                    return inputData[\"testparameter\"][key] = selectedRecord[key] ? selectedRecord[key] : 0;\r\n                } else if (value === \"string\") {\r\n                    return inputData[\"testparameter\"][key] = selectedRecord[key] ? selectedRecord[key].trim() : \"\";\r\n                } else if (value === \"customobject\") {\r\n                    return inputData[\"testparameter\"][key] = customobject;\r\n\r\n                } else if (value === \"float\") {\r\n                    return inputData[\"testparameter\"][key] = selectedRecord[key] ? selectedRecord[key] : 0.0;\r\n                } else {\r\n                    return null;\r\n                }\r\n            });\r\n            inputData[\"testparameter\"][\"ntestcode\"] = storeData.masterData[\"SelectedTest\"][\"ntestcode\"];\r\n            inputData[\"testparameter\"][\"sdisplaystatus\"] = selectedRecord[\"nparametertypecode\"].label;\r\n        }\r\n        const inputParam = {\r\n            inputData,\r\n            classUrl: \"testmaster\",\r\n            operation: storeData.operation,\r\n            methodUrl: \"TestParameter\",\r\n            saveType, formRef, postParam,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onSaveSpecification = (saveType, formRef) => {\r\n        const selectedRecord = this.props.selectedRecord;\r\n        const columns = [{ \"ntestparametercode\": \"int\" }, { \"ntestparamnumericcode\": \"int\" }, { \"sminb\": \"string\" },\r\n        { \"smina\": \"string\" }, { \"smaxa\": \"string\" }, { \"smaxb\": \"string\" }, { \"sminlod\": \"string\" }, { \"smaxlod\": \"string\" },\r\n        { \"sminloq\": \"string\" }, { \"smaxloq\": \"string\" }, { \"sdisregard\": \"string\" }, { \"sresultvalue\": \"string\" }];\r\n        let inputData = {\r\n            \"testparameternumeric\": {\r\n                nstatus: 1\r\n            },\r\n            userinfo: this.props.userInfo,\r\n\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n            \"isQualisLite\":parseInt(this.props.settings[71])\r\n        };\r\n        inputData[\"testparameternumeric\"][\"ngradecode\"] =selectedRecord.ngradecode? selectedRecord.ngradecode.value:-1;\r\n        columns.map(item => {\r\n            const key = Object.keys(item)[0];\r\n            const value = Object.values(item)[0];\r\n            if (value === \"int\") {\r\n                return inputData[\"testparameternumeric\"][key] = selectedRecord[key] ? selectedRecord[key] : 0;\r\n            } else if (value === \"string\") {\r\n                return inputData[\"testparameternumeric\"][key] = selectedRecord[key] ?\r\n                    selectedRecord[key] === \"0\" ? selectedRecord[key] : selectedRecord[key].replace(/^0+/, '') : null;\r\n            } else {\r\n                return null;\r\n            }\r\n        });\r\n        let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"TestMaster\", selectedObject: \"SelectedTest\", primaryKeyField: \"ntestcode\" };\r\n            selectedId = selectedRecord[\"ntestparametercode\"];\r\n        }\r\n        const inputParam = {\r\n            inputData,\r\n            classUrl: \"testmaster\",\r\n            operation: this.props.operation,\r\n            methodUrl: \"TestParameterNumeric\",\r\n            saveType, formRef, postParam,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        return inputParam;\r\n    }\r\n    onSaveClinicalSpec = (saveType, formRef) => {\r\n        const selectedRecord = this.props.selectedRecord;\r\n      \r\n        const TestGroupAddSpecification = {\r\n            nstatus: transactionStatus.ACTIVE,\r\n            ntestparametercode: this.props.masterData.selectedParameter[\"ntestparametercode\"],\r\n            ngendercode: selectedRecord[\"ngendercode\"] ?selectedRecord[\"ngendercode\"]&&  selectedRecord[\"ngendercode\"].value:-1,\r\n            nfromage: selectedRecord[\"nfromage\"],\r\n            ntoage: selectedRecord[\"ntoage\"],\r\n            shigha: selectedRecord[\"nhigha\"]||'',\r\n            shighb: selectedRecord[\"nhighb\"]||'',\r\n            slowa: selectedRecord[\"nlowa\"]||'',\r\n            slowb: selectedRecord[\"nlowb\"]||'',\r\n            sminlod: selectedRecord[\"sminlod\"]||'',\r\n            smaxlod: selectedRecord[\"smaxlod\"]||'',\r\n            sminloq: selectedRecord[\"sminloq\"]||'',\r\n            smaxloq: selectedRecord[\"smaxloq\"]||'',\r\n            sdisregard: selectedRecord[\"sdisregard\"]||'',\r\n            sresultvalue: selectedRecord[\"sresultvalue\"]||'',\r\n            ngradecode: selectedRecord[\"ngradecode\"] && selectedRecord[\"ngradecode\"].value || -1,\r\n\r\n            ntestmasterclinicspeccode: selectedRecord[\"ntestmasterclinicspeccode\"],\r\n            nfromageperiod: selectedRecord[\"nfromageperiod\"] && selectedRecord[\"nfromageperiod\"].value || -1,\r\n            ntoageperiod: selectedRecord[\"ntoageperiod\"] && selectedRecord[\"ntoageperiod\"].value || -1,\r\n\r\n        };\r\n        let inputData = {\r\n            \"TestGroupAddSpecification\": {...TestGroupAddSpecification,\r\n                nstatus: 1\r\n            },\r\n            userinfo: this.props.userInfo,\r\n\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n            \"isQualisLite\":parseInt(this.props.settings[71])\r\n\r\n        };\r\n        let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"TestMaster\", selectedObject: \"SelectedTest\", primaryKeyField: \"ntestcode\" };\r\n            selectedId = selectedRecord[\"ntestparametercode\"];\r\n        }\r\n        const inputParam = {\r\n            inputData,\r\n            classUrl: \"testmaster\",\r\n            operation: this.props.operation,\r\n            methodUrl: \"TestParameterClinicalSpec\",\r\n            saveType, formRef, postParam,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onSaveCodedResult = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const testPredefinedParameter = {\r\n            spredefinedname: selectedRecord[\"spredefinedname\"].trim(),\r\n            ngradecode: selectedRecord[\"ngradecode\"] ? selectedRecord[\"ngradecode\"].value ? selectedRecord[\"ngradecode\"].value : -1 : -1,\r\n            ntestparametercode: selectedRecord[\"ntestparametercode\"],\r\n            ntestpredefinedcode: selectedRecord[\"ntestpredefinedcode\"],\r\n            //sresultparacomment:selectedRecord[\"sresultparacomment\"],\r\n            spredefinedsynonym:selectedRecord[\"spredefinedsynonym\"],\r\n            spredefinedcomments:selectedRecord[\"spredefinedcomments\"],\r\n            nstatus: transactionStatus.ACTIVE,\r\n            ndefaultstatus: selectedRecord[\"ndefaultstatus\"],//transactionStatus.NO\r\n\r\n        }\r\n\r\n        //let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"TestMaster\", selectedObject: \"SelectedTest\", primaryKeyField: \"ntestcode\" };\r\n            //selectedId = selectedRecord[\"ntestparametercode\"];               \r\n        }\r\n        const inputParam = {\r\n            inputData: {\r\n                testpredefinedparameter: testPredefinedParameter,\r\n                userinfo: this.props.userInfo,\r\n\t\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n                \"isQualisLite\":parseInt(this.props.settings[71])\r\n\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: this.props.operation,\r\n            methodUrl: \"TestPredefinedParameter\",\r\n            saveType, formRef, postParam,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onSaveFormula = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const formulafield = [\"sformulaname\", \"sformulacalculationcode\", \"sformulacalculationdetail\"];\r\n        const selectedParameter = this.props.masterData.selectedParameter;\r\n        let testformula = {\r\n            ntestcode: selectedParameter[\"ntestcode\"],\r\n            ntestparametercode: selectedParameter[\"ntestparametercode\"],\r\n            ndefaultstatus: transactionStatus.NO,\r\n            nstatus: transactionStatus.ACTIVE,\r\n            nispredefinedformula: transactionStatus.NO,\r\n            npredefinedformulacode:transactionStatus.NA\r\n        }\r\n        formulafield.map(field => {\r\n            return testformula[field] = selectedRecord[field].trim()\r\n        })\r\n\r\n        let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"TestMaster\", selectedObject: \"SelectedTest\", primaryKeyField: \"ntestcode\" };\r\n            selectedId = selectedRecord[\"ntestparametercode\"];\r\n        }\r\n        const inputParam = {\r\n            inputData: {\r\n                testformula: testformula,\r\n                userinfo: this.props.userInfo,\r\n\t\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n                \"isQualisLite\":parseInt(this.props.settings[71])\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: \"create\",\r\n            methodUrl: \"TestFormula\", saveType, formRef, postParam,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    clearFormula = () => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        selectedRecord[\"sformulacalculationcode\"] = \"\";\r\n        selectedRecord[\"sformulacalculationdetail\"] = \"\";\r\n        selectedRecord[\"userinput\"] = \"\";\r\n\t\t//ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)\r\n        selectedRecord[\"sfunctionsyntax\"] = \"\";\r\n        selectedRecord[\"result\"] = \"\";\r\n        selectedRecord[\"query\"] = \"\";\r\n\r\n        this.setState({\r\n            fieldFlag: true,\r\n            operatorFlag: false,\r\n            functionFlag: true,\r\n            selectedRecord, \r\n\t\t\t//ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)           \r\n\t\t\topenValidate: false\r\n        })\r\n    }\r\n\r\n    onFormulaDrop(data) {\r\n        let selectedRecord = this.state.selectedRecord;\r\n        let formulaName = \"\";\r\n        let formulaCalculationCode = \"\";\r\n        let fieldFlag = this.state.fieldFlag;\r\n        let functionFlag = this.state.functionFlag;\r\n        let operatorFlag = this.state.operatorFlag;\r\n\t\t//ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)\r\n        let sfunctionsyntax=selectedRecord.sfunctionsyntax ? selectedRecord.sfunctionsyntax : \"\";\r\n        //let sfunctionsyntax = this.state.sfunctionsyntax;\r\n        if(sfunctionsyntax===\"\"){\r\n            functionFlag=true;\r\n        }\r\n        let isDropped = false;\r\n        if (data['testfields'] !== \"\") {\r\n            const testfields = JSON.parse(data['testfields']);\r\n            if (this.state.fieldFlag) {\r\n                let sformulacalculationdetail = selectedRecord.sformulacalculationdetail ? selectedRecord.sformulacalculationdetail : \"\";\r\n                let sformulacalculationcode = selectedRecord.sformulacalculationcode ? selectedRecord.sformulacalculationcode : \"\";\r\n                const sparametername = testfields.sparametername;\r\n                const ntestparametercode = testfields.ntestparametercode;\r\n                if (sparametername !== \"Parameter-Field\" && sparametername !== \"Formula-Field\" && sparametername !== \"Dynamic-Field\") {\r\n                    if (testfields.isformula === 1) {\r\n                        formulaName = `${sformulacalculationdetail} (${sparametername}) `;\r\n                        formulaCalculationCode = `${sformulacalculationcode}$O20O$${ntestparametercode}$O18O$`;\r\n                    } else {\r\n                        formulaName = `${sformulacalculationdetail} ${sparametername}`;\r\n                        formulaCalculationCode = `${sformulacalculationcode}$P${ntestparametercode}P$`;\r\n                    }\r\n                } else if (sparametername !== \"Formula-Field\") {\r\n                    formulaName = `${sformulacalculationdetail} ${testfields.stestname}`;\r\n                    formulaCalculationCode = `${sformulacalculationcode}$D${ntestparametercode}D$`;\r\n                } else {\r\n                    formulaName = `${sformulacalculationdetail} ${testfields.stestname}`;\r\n                    formulaCalculationCode = `${sformulacalculationcode}${testfields.sformulacalculationcode}`;\r\n                }\r\n                fieldFlag = false;\r\n                functionFlag = false;\r\n                operatorFlag = true;\r\n                isDropped = true;\r\n            }\r\n        } else if (data['operatorfields'] !== \"\") {\r\n            const operatorfields = JSON.parse(data['operatorfields']);\r\n            const noperatorcode = operatorfields.noperatorcode;\r\n            const sformulacalculationdetail = selectedRecord.sformulacalculationdetail ? selectedRecord.sformulacalculationdetail : \"\";\r\n            const sformulacalculationcode = selectedRecord.sformulacalculationcode ? selectedRecord.sformulacalculationcode : \"\";\r\n            if (this.state.operatorFlag) {\r\n                formulaName = `${sformulacalculationdetail} ${operatorfields.soperator}`;\r\n                formulaCalculationCode = `${sformulacalculationcode}$O${noperatorcode}O$`;\r\n                if (noperatorcode === operators.OPENPARENTHESIS) {\r\n                    fieldFlag = true;\r\n                    functionFlag = true;\r\n                    operatorFlag = false;\r\n                } else if (noperatorcode === operators.CLOSEPARENTHESIS) {\r\n                    fieldFlag = false\r\n                    functionFlag = false;\r\n                    operatorFlag = true;\r\n                } else {\r\n                    fieldFlag = true;\r\n                    functionFlag = true;\r\n                    operatorFlag = false;\r\n                }\r\n                isDropped = true;\r\n            } else if (noperatorcode === operators.OPENPARENTHESIS) {\r\n                formulaName = `${sformulacalculationdetail} ${operatorfields.soperator}`;\r\n                formulaCalculationCode = `${sformulacalculationcode}$O${noperatorcode}O$`;\r\n                fieldFlag = true;\r\n                functionFlag = true;\r\n                operatorFlag = false;\r\n                isDropped = true;\r\n            } else if (noperatorcode === operators.CLOSEPARENTHESIS) {\r\n                formulaName = `${sformulacalculationdetail} ${operatorfields.soperator}`;\r\n                formulaCalculationCode = `${sformulacalculationcode}$O${noperatorcode}O$`;\r\n                fieldFlag = false;\r\n                functionFlag = false;\r\n                operatorFlag = true;\r\n                isDropped = true;\r\n            }\r\n        } else if (data['functionfields'] !== \"\") {\r\n            if (functionFlag) {\r\n                const functionfields = JSON.parse(data['functionfields']);\r\n                const sformulacalculationdetail = selectedRecord.sformulacalculationdetail ? selectedRecord.sformulacalculationdetail : \"\";\r\n                const sformulacalculationcode = selectedRecord.sformulacalculationcode ? selectedRecord.sformulacalculationcode : \"\";\r\n                formulaName = `${sformulacalculationdetail}${functionfields.sfunctionname}(`;\r\n                formulaCalculationCode = `${sformulacalculationcode}$F${functionfields.nfunctioncode}F$$O20O$`;\r\n                fieldFlag = true;\r\n                functionFlag = false;\r\n                operatorFlag = false;\r\n                sfunctionsyntax = functionfields.sfunctionsyntax;\r\n                isDropped = true;\r\n            }\r\n        }\r\n        if (isDropped) {\r\n            const sliceFormulaName = formulaName.slice(0, 512);\r\n            if (sliceFormulaName.length <= 512) {\r\n                selectedRecord[\"sformulacalculationcode\"] = formulaCalculationCode;\r\n                selectedRecord[\"sformulacalculationdetail\"] = sliceFormulaName;\r\n                //ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)\r\n\t\t\t\tselectedRecord[\"sfunctionsyntax\"] = sfunctionsyntax;\r\n                this.setState({ fieldFlag, functionFlag, operatorFlag,  selectedRecord });\r\n            } else {\r\n                selectedRecord[\"sfunctionsyntax\"] = sfunctionsyntax;\r\n                selectedRecord[\"sformulacalculationdetail\"] = sliceFormulaName;\r\n                this.setState({ fieldFlag, functionFlag, operatorFlag, selectedRecord });\r\n            }\r\n        }\r\n    }\r\n\r\n    onUserInputs = (event) => {\r\n        const value = event.target.value.replace(/^0+/, '');\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        if (event.keyCode === 13) {\r\n            if (this.state.fieldFlag) {\r\n                const sformulacalculationdetail = selectedRecord.sformulacalculationdetail ? selectedRecord.sformulacalculationdetail : \"\";\r\n                const sformulacalculationcode = selectedRecord.sformulacalculationcode ? selectedRecord.sformulacalculationcode : \"\";\r\n                selectedRecord[\"sformulacalculationcode\"] = `${sformulacalculationcode}$V${value}V$`;\r\n                selectedRecord[\"sformulacalculationdetail\"] = `${sformulacalculationdetail} ${value}`;\r\n                selectedRecord[event.target.name] = \"\";\r\n                this.setState({\r\n                    fieldFlag: false,\r\n                    functionFlag: false,\r\n                    operatorFlag: true,\r\n                    selectedRecord\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    getSyntax = (event) => {\r\n\t\t//ALPD-5543--Added by Vignesh R(07-04-2025)--Test Master-->cannot drag and drop the formula while saving and continuing in certain situations.(Check description)\r\n        const selectedRecord = this.state.selectedRecord;\r\n        selectedRecord[\"sfunctionsyntax\"]=event.dataItem.sfunctionsyntax;\r\n\r\n        this.setState({ selectedRecord })\r\n    }\r\n\r\n    onSaveTestFile = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = transactionStatus.NO;\r\n        let testFileArray = [];\r\n        let testFile = {\r\n            ntestcode: this.props.masterData.SelectedTest.ntestcode,\r\n            ntestfilecode: selectedRecord.ntestfilecode ? selectedRecord.ntestfilecode : 0,\r\n            nstatus: transactionStatus.ACTIVE,\r\n            nattachmenttypecode,\r\n\t\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n            nqualislite:parseInt(this.props.settings[71]),\r\n            ndefaultstatus: selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] ? selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] : 4\r\n        };\r\n        const formData = new FormData();\r\n        if (nattachmenttypecode === attachmentType.FTP) {\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                acceptedFiles.forEach((file, index) => {\r\n                    const tempData = Object.assign({}, testFile);\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                    const ssystemfilename = selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== undefined ? selectedRecord.ssystemfilename.split('.') : create_UUID();\r\n                    const filesystemfileext = selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== undefined ? file.name.split('.')[ssystemfilename.length - 1] : fileExtension;\r\n                    const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.ntestfilecode && selectedRecord.ntestfilecode > 0\r\n                        && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                    tempData[\"sfilename\"] =Lims_JSON_stringify(file.name,false) ;\r\n                    tempData[\"sdescription\"] =Lims_JSON_stringify(replaceBackSlash(selectedRecord.sdescription ? selectedRecord.sdescription.trim(): \"\") ,false) ;\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    tempData[\"nfilesize\"] = file.size;\r\n\r\n                    formData.append(\"uploadedFile\" + index, file);\r\n                    formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                    testFileArray.push(tempData);\r\n                });\r\n                formData.append(\"filecount\", acceptedFiles.length);\r\n                isFileEdited = transactionStatus.YES;\r\n            } else {\r\n                testFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename.trim(),false);\r\n                testFile[\"sdescription\"] = Lims_JSON_stringify(replaceBackSlash(selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\"),false);\r\n                testFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                testFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                testFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n\t\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n                testFile[\"nqualislite\"]=parseInt(this.props.settings[71]);\r\n\r\n                testFileArray.push(testFile);\r\n            }\r\n        } else {\r\n            testFile[\"sfilename\"] = Lims_JSON_stringify(replaceBackSlash(selectedRecord.slinkfilename?selectedRecord.slinkfilename.trim():\"\"),false);\r\n            testFile[\"sdescription\"] = Lims_JSON_stringify(replaceBackSlash(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\"),false);\r\n            testFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            testFile[\"ssystemfilename\"] = \"\";\r\n            testFile[\"nfilesize\"] = 0;\r\n\t\t\t//ALPD-4831--Vignesh R(08-10-2024)--When nsettingcode 71 is set to 3, the Test Group is not required and is automatically updated by default in the relevant test group-related tables.\r\n            testFile[\"nqualislite\"]=parseInt(this.props.settings[71]);\r\n\r\n            testFileArray.push(testFile);\r\n        }\r\n        formData.append(\"isFileEdited\", isFileEdited);\r\n        formData.append(\"testfile\",JSON.stringify(testFileArray));\r\n\r\n      //  formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\r\n\r\n\r\n\r\n        let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"TestMaster\", selectedObject: \"SelectedTest\", primaryKeyField: \"ntestcode\" };\r\n            selectedId = selectedRecord[\"ntestfilecode\"];\r\n        }\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": {...this.props.userInfo,\r\n                sformname: Lims_JSON_stringify(this.props.userInfo.sformname),\r\n                smodulename: Lims_JSON_stringify(this.props.userInfo.smodulename),\r\n\t\t\t\t//ALPD-1628(while file saving,audit trail is not captured respective language)\r\n                slanguagename: Lims_JSON_stringify(this.props.userInfo.slanguagename)\r\n            },\r\n },\r\n            formData: formData,\r\n            isFileupload: true,\r\n            operation: this.props.operation,\r\n            classUrl: \"testmaster\",\r\n            saveType, formRef, methodUrl: \"TestFile\", postParam,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onDropTestFile = (attachedFiles, fieldName, maxSize) => {\r\n\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n    ConfirmDelete = (item, operation, ncontrolCode, methodUrl, modalName) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.props.deleteAction(item, operation, ncontrolCode, methodUrl, modalName));\r\n    }\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.isFormulaOpen) {\r\n            this.setState({\r\n                fieldFlag: true,\r\n                operatorFlag: false,\r\n                functionFlag: true,\r\n                          });\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { isFormulaOpen: false }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n            let { testFileDataState,sectionDataState, methodDataState, instrumentCatDataState, containerTypeDataState,testPackageDataState,testClinicalSpecDataState } = this.state;\r\n            if (this.props.dataState === undefined) {\r\n                if (this.props.screenName === \"IDS_SECTION\") {\r\n                    sectionDataState = { skip: 0, take: 5 };\r\n                } else if (this.props.screenName === \"IDS_METHOD\") {\r\n                    methodDataState = { skip: 0, take: 5 };\r\n                } else if (this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") {\r\n                    instrumentCatDataState = { skip: 0, take: 5 };\r\n                }\r\n                else if (this.props.screenName === \"IDS_CONTAINERTYPE\") {\r\n                    containerTypeDataState = { skip: 0, take: 5 };\r\n                }\r\n                else if (this.props.screenName === \"IDS_TESTPACKAGE\") {  \r\n                    testPackageDataState = { skip: 0, take: 5 };\r\n                } else if (this.props.screenName === \"IDS_TESTFILE\" || this.props.screenName === \"IDS_FILE\") {  \r\n                    testFileDataState = { skip: 0, take: 5 };\r\n                }else {\r\n                    sectionDataState = { skip: 0, take: 5 };\r\n                    methodDataState = { skip: 0, take: 5 };\r\n                    instrumentCatDataState = { skip: 0, take: 5 };\r\n                    containerTypeDataState = { skip: 0, take: 5 };\r\n                    testPackageDataState = { skip: 0, take: 5 };\r\n                    testFileDataState={ skip: 0, take: 5 };\r\n                   // testClinicalSpecDataState = { skip: 0, take: 5 ,group: [{ field: 'sgendername' }]};\r\n                }\r\n            }\r\n            else{\r\n\r\n                if (this.props.screenName === \"IDS_SECTION\") {\r\n                    sectionDataState = this.props.dataState;\r\n                } else if (this.props.screenName === \"IDS_METHOD\") {\r\n                    methodDataState =this.props.dataState;\r\n                } else if (this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") {\r\n                    instrumentCatDataState = this.props.dataState;\r\n                }\r\n                else if (this.props.screenName === \"IDS_CONTAINERTYPE\") {\r\n                    containerTypeDataState = this.props.dataState;\r\n                }\r\n                else if (this.props.screenName === \"IDS_TESTPACKAGE\") {\r\n                    testPackageDataState = this.props.dataState;\r\n                }else if (this.props.screenName === \"IDS_TESTFILE\" || this.props.screenName === \"IDS_FILE\") {  \r\n                    testFileDataState = { skip: 0, take: 5 };\r\n                }else{\r\n                    sectionDataState = { skip: 0, take: 5 };\r\n                    methodDataState = { skip: 0, take: 5 };\r\n                    instrumentCatDataState = { skip: 0, take: 5 };\r\n                    containerTypeDataState = { skip: 0, take: 5 };\r\n                    testPackageDataState = { skip: 0, take: 5 };\r\n                    testFileDataState={ skip: 0, take: 5 };\r\n                }\r\n            }\r\n                // let skipcount=this.props.masterData[\"TestMethod\"].length>0?(this.props.masterData[\"TestMethod\"].length-this.props.dataState.take):\r\n                // this.props.dataState.skip;\r\n                // if (this.props.screenName === \"IDS_METHOD\") {\r\n                //     methodDataState = { skip: skipcount, take: 5 };\r\n                // } \r\n                // let dataResultMethod=process(this.props.masterData[\"TestMethod\"], this.props.dataState );\r\n            \r\n                // let { dataState } = this.state;\r\n                // if (this.props.dataState === undefined) {\r\n                //     dataState = { skip:0,take:this.state.dataState.take }\r\n                // }\r\n                // if(dataResultMethod){\r\n                //     if(dataResultMethod >=5){\r\n                //        let skipcount=this.state.dataState.skip>0?(this.state.dataState.skip-this.state.dataState.take):\r\n                //        this.state.dataState.skip\r\n                //         methodDataState={skip:skipcount,take:this.state.dataState.take}\r\n                //     }\r\n                // }\r\n\r\n                \r\n                // dataResult={process(this.props.masterData[\"TestSection\"], \r\n                //     (this.props.screenName === undefined || this.props.screenName === \"IDS_SECTION\") ? \r\n                //     this.state.sectionDataState : { skip: 0, take: 10 })}\r\n\r\n                //     dataResult: process(this.props.Login.masterData, this.state.dataState),\r\n\r\n                // this.setState({\r\n                //     data: this.props.Login.masterData, \r\n                //     dataResult: process(this.props.Login.masterData, dataState),\r\n                //     dataState\r\n                // });\r\n\r\n        //     // Maintain pagination after delete\r\n        // const totalRecords = this.props.masterData[\"TestMethod\"].length;\r\n        // const currentPageRecords = this.props.dataState.take;\r\n        // const currentSkip = this.props.dataState.skip;\r\n\r\n        // // If there are fewer records in the current page (because of a deletion), adjust skip\r\n        // if (totalRecords % currentPageRecords === 0 && currentSkip > 0) {\r\n        //     this.setState({\r\n        //         methodDataState: { ...methodDataState, skip: currentSkip - currentPageRecords }\r\n        //     });\r\n        // }\r\n\r\n\r\n\r\n            this.setState({ testFileDataState,sectionDataState, methodDataState, instrumentCatDataState, containerTypeDataState, testPackageDataState,testClinicalSpecDataState });\r\n        }\r\n    }\r\n}\r\n\r\nexport default injectIntl(TestView);"]},"metadata":{},"sourceType":"module"}