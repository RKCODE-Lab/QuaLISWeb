{"ast":null,"code":"var _jsxFileName = \"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\src\\\\components\\\\header\\\\header.component.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { Navbar, Nav, Dropdown, Image, Media, NavLink, NavDropdown, NavItem, Badge } from 'react-bootstrap';\nimport { toast } from 'react-toastify';\nimport { getChangeUserRole, submitChangeRole, getPassWordPolicy, updateStore, changepassword, changeOwner, logOutAuditAction, getListAlert, getDigitalSign, saveDigitalSign, crudMaster, validateEsignforDigitalSignature } from '../../actions';\nimport rsapi from '../../rsapi';\nimport { AtHeader, NavPrimaryHeader, ProfileImage, DashboardIcon } from '../header/header.styles';\nimport { faSearch, faSignature } from '@fortawesome/free-solid-svg-icons';\nimport '../../assets/styles/login.css';\nimport { ReactComponent as SearchIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/image/icon-search.svg\"; // import { ReactComponent as DashboardHeader } from '../../assets/image/dashboard-header.svg';\n\nimport SlideOutModal from '../slide-out-modal/SlideOutModal';\nimport ChangePassWord from '../../pages/Login/ChangePassWord';\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\nimport { changePasswordValidation, fnPassMessage } from '../../pages/Login/LoginCommonFunction';\nimport { LOGINTYPE, transactionStatus } from '../Enumeration';\nimport PortalModal from '../../PortalModal';\nimport SliderPage from '../slider-page/slider-page-component';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faKey, faPowerOff, faUserCog, faUsersCog } from '@fortawesome/free-solid-svg-icons';\nimport { createImageFromInitials } from './headerutils'; // import { Tooltip } from '@progress/kendo-react-tooltip';\n\nimport { getSelectedAlert } from '../../actions/AlertViewAction';\nimport '../../pages/dashboardtypes/Alert.css';\nimport AddDigitalSignature from '../../pages/Login/AddDigitalSignature';\nimport { Lims_JSON_stringify, create_UUID, onSaveMandatoryValidation } from '../../components/CommonScript';\nimport Esign from '../../pages/audittrail/Esign';\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.openAlert = () => {\n      this.setState({\n        showDashboard: !this.state.showDashboard,\n        nflag: 2\n      });\n    };\n\n    this.openQuickSetting = () => {\n      this.setState({\n        quickSettingOpen: !this.state.quickSettingOpen\n      });\n    };\n\n    this.openDashBoard = () => {\n      this.setState({\n        showDashboard: !this.state.showDashboard,\n        nflag: 1\n      });\n    };\n\n    this.submitChangeOwner = (item, role) => {\n      const parameterInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          menuDesign: [],\n          navigation: \"\"\n        }\n      };\n      this.props.updateStore(parameterInfo);\n      const inputData = {\n        nuserrolecode: item.nuserrolecode,\n        suserrolename: item.suserrolename,\n        nusercode: item.nusercode,\n        sdeputyid: item.sdeputyid,\n        userinfo: this.props.Login.userInfo\n      };\n      this.props.changeOwner(inputData);\n    };\n\n    this.onChangePassword = () => {\n      const createPwdRecord = this.state.createPwdRecord;\n      const returnMsg = changePasswordValidation(createPwdRecord, this.props.Login.passwordPolicy, this.props.Login.userInfo.sloginid);\n\n      if (returnMsg === 0) {\n        const inputParam = {\n          spassword: createPwdRecord.snewpassword.trim(),\n          sOldPassword: createPwdRecord.soldpassword.trim(),\n          nusersitecode: this.props.Login.userInfo.nusersitecode,\n          isPasswordExpiry: false,\n          userInfo: this.props.Login.userInfo\n        };\n        this.props.changepassword(inputParam);\n      } else {\n        toast.info(returnMsg);\n      }\n    };\n\n    this.onSaveDigitalSign = (saveType, formRef) => {\n      let digiSignData = [];\n      digiSignData[\"userinfo\"] = this.props.Login.userInfo;\n      const digiSignImageFile = this.state.selectedDigiSign.sdigisignname;\n      let isDigiSignFileEdited = transactionStatus.NO;\n      const formData = new FormData();\n      let digiSignImageCount = 0;\n      let digisignfile = {};\n      digiSignData[\"digiSign\"] = {\n        \"nsitecode\": this.props.Login.userInfo.nmastersitecode\n      };\n      digiSignData[\"digiSign\"][\"sdigisignname\"] = this.state.selectedDigiSign[\"sdigisignname\"];\n\n      if (digiSignImageFile && Array.isArray(digiSignImageFile) && digiSignImageFile.length > 0) {\n        const splittedFileName = digiSignImageFile[0].name.split('.');\n        const fileExtension = digiSignImageFile[0].name.split('.')[splittedFileName.length - 1];\n        const uniquefilename = this.state.selectedDigiSign.sdigisignname === \"\" ? this.state.selectedDigiSign.sdigisignname : create_UUID() + '.' + fileExtension;\n        digisignfile[\"sdigisignname\"] = Lims_JSON_stringify(digiSignImageFile[0].name, false);\n        digisignfile[\"sdigisignftp\"] = uniquefilename;\n        digisignfile[\"ssecuritykey\"] = this.state.selectedDigiSign[\"ssecuritykey\"];\n        formData.append(\"uploadedFile\" + digiSignImageCount, digiSignImageFile[0]);\n        formData.append(\"uniquefilename\" + digiSignImageCount, uniquefilename);\n        digiSignImageCount++;\n        isDigiSignFileEdited = transactionStatus.YES;\n        digiSignData[\"digiSign\"][\"sdigisignname\"] = \"\";\n      } else {\n        if (digiSignImageFile === \"\" || digiSignImageFile.length === 0) {\n          if (digiSignData[\"digiSign\"][\"sdigisignftp\"] !== null && digiSignData[\"digiSign\"][\"sdigisignftp\"] !== \"\") {\n            isDigiSignFileEdited = transactionStatus.YES;\n          }\n\n          digisignfile[\"sdigisignname\"] = null;\n          digisignfile[\"sdigisignftp\"] = null;\n          digiSignData[\"digiSign\"][\"sdigisignname\"] = \"\";\n        } else {\n          digisignfile[\"sdigisignname\"] = Lims_JSON_stringify(this.state.selectedDigiSign.sdigisignname, false);\n          digisignfile[\"sdigisignftp\"] = this.state.selectedDigiSign.sdigisignftp;\n          digisignfile[\"ssecuritykey\"] = this.state.selectedDigiSign.ssecuritykey;\n        }\n      }\n\n      formData.append(\"isDigiSignFileEdited\", isDigiSignFileEdited);\n      formData.append(\"DigiSignImage_filecount\", digiSignImageCount);\n      formData.append(\"filecount\", digiSignImageCount);\n      formData.append(\"controlcodelist\", JSON.stringify(this.props.Login.uploadControlList));\n      formData.append(\"digisignfile\", JSON.stringify(digisignfile));\n      formData.append(\"digiSign\", JSON.stringify(digiSignData[\"digiSign\"])); // }\n\n      const inputParam = {\n        operation: this.props.Login.operation,\n        formData: formData,\n        classUrl: \"digitalsignature\",\n        methodUrl: \"DigitalSignature\",\n        inputData: {\n          \"userinfo\": { ...this.props.Login.userInfo,\n            slanguagename: Lims_JSON_stringify(this.props.Login.userInfo.slanguagename)\n          }\n        },\n        isFileupload: true,\n        saveType,\n        formRef\n      };\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          loadEsign: true,\n          screenData: {\n            inputParam\n          },\n          saveType\n        }\n      };\n      this.props.updateStore(updateInfo); // this.props.saveDigitalSign(inputParam);\n    };\n\n    this.validateEsign = () => {\n      const inputParam = {\n        inputData: {\n          \"userinfo\": { ...this.props.Login.userInfo,\n            sreason: this.state.selectedDigiSign[\"esigncomments\"],\n            nreasoncode: this.state.selectedDigiSign[\"esignreason\"] && this.state.selectedDigiSign[\"esignreason\"].value,\n            spredefinedreason: this.state.selectedDigiSign[\"esignreason\"] && this.state.selectedDigiSign[\"esignreason\"].label\n          },\n          password: this.state.selectedDigiSign[\"esignpassword\"]\n        },\n        screenData: this.props.Login.screenData\n      };\n      this.props.validateEsignforDigitalSignature(inputParam);\n    };\n\n    this.closeModal = () => {\n      let selectedDigiSign = this.props.Login.selectedDigiSign;\n      let loadEsign = this.props.Login.loadEsign;\n      let openCPModal = this.props.Login.openCPModal;\n\n      if (this.props.Login.loadEsign) {\n        loadEsign = false;\n        selectedDigiSign['esignpassword'] = \"\";\n        selectedDigiSign['esigncomments'] = \"\";\n        selectedDigiSign['esignreason'] = \"\";\n      } else {\n        openCPModal = false;\n      }\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openCPModal,\n          loadEsign,\n          selectedDigiSign\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.submitChangeRole = roleItem => {\n      const parameterInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          menuDesign: [],\n          navigation: \"\"\n        }\n      };\n      this.props.updateStore(parameterInfo);\n      const userInfo = this.props.Login.userInfo;\n      const inputParam = {\n        nusermultisitecode: userInfo.nusersitecode,\n        slanguagetypecode: userInfo.slanguagetypecode,\n        nusermultirolecode: roleItem.nusermultirolecode,\n        nuserrolecode: roleItem.nuserrolecode,\n        nmastersitecode: userInfo.nmastersitecode,\n        nlogintypecode: userInfo.nlogintypecode,\n        userinfo: userInfo\n      };\n      this.props.submitChangeRole(inputParam);\n    };\n\n    this.childDataChange = (selectedRecord, mandatoryFieldCheck) => {\n      let isInitialRender = false;\n      this.setState({\n        selectedDigiSign: { ...selectedRecord\n        },\n        isInitialRender\n      });\n    };\n\n    this.onDigitalSignatureSaveClick = () => {\n      let mandatoryField = [];\n      this.state.selectedDigiSign && this.state.selectedDigiSign[\"sdigisignname\"] && (this.state.selectedDigiSign[\"sdigisignname\"].hasOwnProperty(\"length\") ? this.state.selectedDigiSign[\"sdigisignname\"].length > 0 : this.state.selectedDigiSign[\"sdigisignname\"] !== \"\") ? mandatoryField = [{\n        \"idsName\": \"IDS_SECURITYKEY\",\n        \"dataField\": \"ssecuritykey\",\n        \"mandatory\": false\n      }] : mandatoryField = [];\n      onSaveMandatoryValidation(this.state.selectedDigiSign, mandatoryField, this.onSaveDigitalSign);\n    };\n\n    this.state = {\n      show: false,\n      createPwdRecord: {},\n      createSecurityKey: {},\n      alert: [],\n      sliderOpen: false,\n      nflag: 2,\n      quickSettingOpen: false.valueOf,\n      showDashboard: false\n    };\n  }\n\n  onChangeRole() {\n    rsapi.post(\"/login/getchangerole\", {\n      \"userInfo\": this.props.Login.userInfo\n    }).then(response => {\n      const responseData = response.data;\n      this.setState({\n        show: true,\n        UserMultiRole: responseData.UserMultiRole,\n        nusermultirolecode: {\n          label: responseData.UserMultiRole[0].suserrolename,\n          value: responseData.UserMultiRole[0].nusermultirolecode,\n          item: responseData.UserMultiRole[0]\n        }\n      });\n    }).catch(error => {\n      if (error.status === 205) {\n        toast.warn(error.message);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  }\n\n  onLogout() {\n    const inputData = {\n      userinfo: this.props.Login.userInfo,\n      scomments: this.props.intl.formatMessage({\n        id: \"IDS_LOGOUT\"\n      }),\n      sauditaction: \"IDS_LOGOUT\"\n    };\n    this.props.logOutAuditAction(inputData, this.props.Login.languageList);\n  }\n\n  render() {\n    const {\n      susername,\n      suserrolename,\n      nuserrole,\n      nlogintypecode,\n      ssitename,\n      nusercode\n    } = this.props.Login.userInfo;\n    const {\n      deputyUser,\n      userMultiRole,\n      isDeputyLogin,\n      userImagePath,\n      settings,\n      profileColor\n    } = this.props.Login;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(AtHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      className: \"p-0\",\n      bg: \"light\",\n      fixed: \"top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Navbar.Brand, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavPrimaryHeader, {\n      className: \"at-nav-brand\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, this.props.Login && this.props.Login.displayName ? /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: this.props.Login.displayName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 19\n      }\n    }) : \"\")), /*#__PURE__*/React.createElement(Navbar.Toggle, {\n      \"aria-controls\": \"basic-navbar-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Navbar.Collapse, {\n      id: \"basic-navbar-nav\",\n      className: \"d-flex align-items-center justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }, this.props.showSearch ? /*#__PURE__*/React.createElement(DashboardIcon, {\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 21\n      }\n    }, this.props.searchBar)) : \"\", /*#__PURE__*/React.createElement(Nav.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(DashboardIcon, {\n      className: \"position-relative topbar-search  mr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    }, this.props.showSearch ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"search-icon search-icon-header position-absolute search-close-icon\",\n      onClick: this.props.layOutGetHomeCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fa fa-times\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 148\n      }\n    })) : /*#__PURE__*/React.createElement(SearchIcon, {\n      className: \"search-icon search-icon-header position-absolute zoom\",\n      onClick: this.props.toggleSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 25\n      }\n    })))), /*#__PURE__*/React.createElement(NavDropdown, {\n      className: \"no-arrow\",\n      alignRight: true,\n      title: /*#__PURE__*/React.createElement(Media, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 69\n        }\n      }, /*#__PURE__*/React.createElement(ProfileImage, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 19\n        }\n      }, settings && settings[5] && userImagePath && userImagePath !== \"\" ? /*#__PURE__*/React.createElement(Image, {\n        src: settings[5] + userImagePath,\n        alt: \"avatar\",\n        className: \"rounded-circle mr-2\",\n        width: \"36\",\n        height: \"36\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 23\n        }\n      }) : /*#__PURE__*/React.createElement(Image, {\n        className: \"rounded-circle mr-2\",\n        src: createImageFromInitials(32, susername ? susername.charAt(0).toUpperCase() : \"\", profileColor),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 98\n        }\n      }))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"profile-img-block pt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(ProfileImage, {\n      className: \"mx-3 mb-3 pt-2 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 21\n      }\n    }, settings && settings[5] && userImagePath && userImagePath !== \"\" ? /*#__PURE__*/React.createElement(Image, {\n      src: settings[5] + userImagePath,\n      alt: \"avatar\",\n      className: \"profile-img rounded-circle mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 25\n      }\n    }) : /*#__PURE__*/React.createElement(Image, {\n      className: \"profile-img rounded-circle mr-2\",\n      src: createImageFromInitials(32, susername ? susername.charAt(0).toUpperCase() : \"\", profileColor),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 89\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"d-block text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"user-name d-block mb-1\",\n      \"data-tip\": susername,\n      \"data-place\": \"bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 23\n      }\n    }, susername), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"role d-block mb-1\",\n      \"data-tip\": suserrolename,\n      \"data-place\": \"bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 23\n      }\n    }, suserrolename), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"role d-block mb-3\",\n      \"data-tip\": ssitename,\n      \"data-place\": \"bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 23\n      }\n    }, ssitename)), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"dropdown-divider\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 21\n      }\n    })), userMultiRole && userMultiRole.length > 0 && /*#__PURE__*/React.createElement(Dropdown, {\n      as: NavItem,\n      drop: \"left\",\n      className: \"ml-2 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n      as: NavLink,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faUserCog,\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_CHANGEROLE\",\n      defaultMessage: \"Change Role\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 23\n      }\n    }, userMultiRole.map((item, index) => {\n      return /*#__PURE__*/React.createElement(Dropdown.Item, {\n        key: `roleindex_${index}`,\n        onClick: () => this.submitChangeRole(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"role-change d-block\",\n        \"data-tip\": item.suserrolename,\n        \"data-place\": \"bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 115\n        }\n      }, item.suserrolename));\n    }))), !isDeputyLogin && deputyUser && deputyUser.length > 0 && /*#__PURE__*/React.createElement(Dropdown, {\n      as: NavItem,\n      drop: \"left\",\n      className: \"ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n      as: NavLink,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faUsersCog,\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_CHANGEOWNER\",\n      defaultMessage: \"Change Owner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 23\n      }\n    }, this.props.Login.deputyUser.map((item, index) => {\n      return item.lstUserMultiDeputy && item.lstUserMultiDeputy.length > 1 ? /*#__PURE__*/React.createElement(Dropdown, {\n        as: NavItem,\n        drop: \"left\",\n        className: \"ml-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n        as: NavLink,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 33\n        }\n      }, `${item.sdeputyname}[${item.sdeputyid}]-${item.suserrolename}`), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 33\n        }\n      }, item.lstUserMultiDeputy.map((role, index) => {\n        return /*#__PURE__*/React.createElement(Dropdown.Item, {\n          key: `roleIndex_${index}`,\n          onClick: () => this.submitChangeOwner(item, role),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 44\n          }\n        }, role.suserrolename);\n      }))) : /*#__PURE__*/React.createElement(Dropdown.Item, {\n        key: `deptuserindex_${index}`,\n        onClick: () => this.submitChangeOwner(item, item.lstUserMultiDeputy[0]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 33\n        }\n      }, item.sdeputyname + \"[\" + item.sdeputyid + \"]\" + \"-\" + item.suserrolename);\n    }))),\n    /*#__PURE__*/\n    // nusercode && nusercode > 0 &&\n    React.createElement(NavDropdown.Item, {\n      onClick: () => this.props.getDigitalSign(nusercode, this.props.Login.userInfo),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faSignature,\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_DIGITALSIGNATURE\",\n      defaultMessage: \"Digital Signature\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 23\n      }\n    })), nlogintypecode && nlogintypecode === LOGINTYPE.INTERNAL && !isDeputyLogin && /*#__PURE__*/React.createElement(NavDropdown.Item, {\n      onClick: () => this.props.getPassWordPolicy(nuserrole),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faKey,\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_CHANGEPASSWORD\",\n      defaultMessage: \"Change Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(NavDropdown.Item, {\n      onClick: () => this.onLogout(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPowerOff,\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_LOGOUT\",\n      defaultMessage: \"Logout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 21\n      }\n    }))))))), /*#__PURE__*/React.createElement(PortalModal, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(SliderPage, {\n      show: this.state.showDashboard,\n      nflag: this.state.nflag,\n      closeModal: this.openDashBoard,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 11\n      }\n    })), this.props.Login.openCPModal && (this.props.Login.screenName === \"IDS_CHANGEPASSWORD\" || this.props.Login.screenName === \"IDS_DIGITALSIGNATURE\") && /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.Login.openCPModal,\n      closeModal: this.closeModal,\n      loginoperation: true,\n      inputParam: {},\n      screenName: this.props.Login.screenName,\n      onSaveClick: this.props.Login.screenName === \"IDS_CHANGEPASSWORD\" ? this.onChangePassword : this.onDigitalSignatureSaveClick,\n      selectedRecord: this.props.Login.screenName === \"IDS_CHANGEPASSWORD\" ? this.state.createPwdRecord || {} : this.state.selectedDigiSign || {},\n      mandatoryFields: this.mandatoryFieldFunction(),\n      validateEsign: this.validateEsign,\n      esign: this.props.Login.loadEsign,\n      addComponent: this.props.Login.loadEsign === true ? /*#__PURE__*/React.createElement(Esign, {\n        operation: \"update\" // onInputOnChange={this.onInputChange.bind(this)}\n        ,\n        onInputOnChange: event => {\n          this.onInputChange(event);\n        },\n        inputParam: this.props.Login.screenData.inputParam,\n        selectedRecord: this.state.selectedDigiSign || {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 15\n        }\n      }) : this.props.Login.screenName === \"IDS_CHANGEPASSWORD\" ? /*#__PURE__*/React.createElement(ChangePassWord, {\n        sloginid: this.props.Login.userInfo.sloginid,\n        createPwdRecord: this.state.createPwdRecord,\n        msg: fnPassMessage(this.props.Login.passwordPolicy),\n        onInputChange: event => this.onInputChange(event),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 17\n        }\n      }) : /*#__PURE__*/React.createElement(AddDigitalSignature, {\n        maxSize: 20,\n        maxFiles: 1,\n        multiple: false,\n        onDropAccepted: this.onDropAccepted,\n        selectedDigiSign: this.state.selectedDigiSign || {},\n        deleteAttachment: this.deleteAttachment,\n        onDrop: this.onDropFile,\n        actionType: this.state.actionType,\n        userInfo: this.props.Login.userInfo,\n        createSecurityKey: this.state.createSecurityKey,\n        onInputChange: event => this.onInputChange(event),\n        label: this.props.intl.formatMessage({\n          id: \"IDS_DIGITALSIGNATURE\"\n        }),\n        name: \"digitalsignature\",\n        onDropImage: this.onDropImage,\n        operation: this.props.Login.operation,\n        childDataChange: this.childDataChange,\n        login: this.props.Login,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 17\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 11\n      }\n    }));\n  }\n\n  onInputChange(event) {\n    if (this.props.Login.screenName === \"IDS_CHANGEPASSWORD\") {\n      const createPwdRecord = this.state.createPwdRecord || {};\n      createPwdRecord[event.target.name] = event.target.value;\n      this.setState({\n        createPwdRecord\n      });\n    } else {\n      const selectedDigiSign = this.state.selectedDigiSign || {};\n\n      if (event.target.type === 'checkbox') {\n        selectedDigiSign[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\n      } else {\n        selectedDigiSign[event.target.name] = event.target.value;\n      }\n\n      this.setState({\n        selectedDigiSign\n      });\n    }\n  }\n\n  mandatoryFieldFunction() {\n    let mandatoryField = [];\n    this.props.Login.screenName === \"IDS_CHANGEPASSWORD\" ? mandatoryField = [{\n      \"idsName\": \"IDS_OLDPASSWORD\",\n      \"dataField\": \"soldpassword\",\n      \"mandatory\": false\n    }, {\n      \"idsName\": \"IDS_NEWPASSWORD\",\n      \"dataField\": \"snewpassword\",\n      \"mandatory\": false\n    }, {\n      \"idsName\": \"IDS_CONFIRMPASSWORD\",\n      \"dataField\": \"sconfirmpassword\",\n      \"mandatory\": true\n    }] : mandatoryField = [];\n    ;\n    return mandatoryField;\n  }\n\n  componentDidUpdate(prevProps) {\n    //   if (this.props.Login.isDeputyLogin === true) {\n    //   if (this.props.Login.navigation === \"home\") {\n    //      this.props.history.push('/');\n    //  }\n    // }\n    if (this.props.Login.createPwdRecord !== prevProps.Login.createPwdRecord) {\n      this.setState({\n        createPwdRecord: this.props.Login.createPwdRecord\n      });\n    }\n\n    if (this.props.Login.alert !== prevProps.Login.alert) {\n      this.setState({\n        alert: this.props.Login.alert\n      });\n    }\n\n    if (this.props.Login.selectedDigiSign !== prevProps.Login.selectedDigiSign) {\n      this.setState({\n        selectedDigiSign: this.props.Login.selectedDigiSign\n      });\n    }\n\n    if (this.props.Login.isInitialRender !== prevProps.Login.isInitialRender) {\n      this.setState({\n        isInitialRender: this.props.Login.isInitialRender\n      });\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.Login.openCPModal && nextState.isInitialRender === false && nextState.selectedDigiSign !== this.state.selectedDigiSign) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  getChangeUserRole,\n  submitChangeRole,\n  getPassWordPolicy,\n  updateStore,\n  changepassword,\n  changeOwner,\n  logOutAuditAction,\n  getSelectedAlert,\n  getListAlert,\n  getDigitalSign,\n  saveDigitalSign,\n  crudMaster,\n  validateEsignforDigitalSignature\n})(injectIntl(Header));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/components/header/header.component.jsx"],"names":["React","connect","FormattedMessage","injectIntl","Navbar","Nav","Dropdown","Image","Media","NavLink","NavDropdown","NavItem","Badge","toast","getChangeUserRole","submitChangeRole","getPassWordPolicy","updateStore","changepassword","changeOwner","logOutAuditAction","getListAlert","getDigitalSign","saveDigitalSign","crudMaster","validateEsignforDigitalSignature","rsapi","AtHeader","NavPrimaryHeader","ProfileImage","DashboardIcon","faSearch","faSignature","SlideOutModal","ChangePassWord","DEFAULT_RETURN","changePasswordValidation","fnPassMessage","LOGINTYPE","transactionStatus","PortalModal","SliderPage","FontAwesomeIcon","faKey","faPowerOff","faUserCog","faUsersCog","createImageFromInitials","getSelectedAlert","AddDigitalSignature","Lims_JSON_stringify","create_UUID","onSaveMandatoryValidation","Esign","mapStateToProps","state","Login","Header","Component","constructor","props","openAlert","setState","showDashboard","nflag","openQuickSetting","quickSettingOpen","openDashBoard","submitChangeOwner","item","role","parameterInfo","typeName","data","menuDesign","navigation","inputData","nuserrolecode","suserrolename","nusercode","sdeputyid","userinfo","userInfo","onChangePassword","createPwdRecord","returnMsg","passwordPolicy","sloginid","inputParam","spassword","snewpassword","trim","sOldPassword","soldpassword","nusersitecode","isPasswordExpiry","info","onSaveDigitalSign","saveType","formRef","digiSignData","digiSignImageFile","selectedDigiSign","sdigisignname","isDigiSignFileEdited","NO","formData","FormData","digiSignImageCount","digisignfile","nmastersitecode","Array","isArray","length","splittedFileName","name","split","fileExtension","uniquefilename","append","YES","sdigisignftp","ssecuritykey","JSON","stringify","uploadControlList","operation","classUrl","methodUrl","slanguagename","isFileupload","updateInfo","loadEsign","screenData","validateEsign","sreason","nreasoncode","value","spredefinedreason","label","password","closeModal","openCPModal","roleItem","nusermultisitecode","slanguagetypecode","nusermultirolecode","nlogintypecode","childDataChange","selectedRecord","mandatoryFieldCheck","isInitialRender","onDigitalSignatureSaveClick","mandatoryField","hasOwnProperty","show","createSecurityKey","alert","sliderOpen","valueOf","onChangeRole","post","then","response","responseData","UserMultiRole","catch","error","status","warn","message","onLogout","scomments","intl","formatMessage","id","sauditaction","languageList","render","susername","nuserrole","ssitename","deputyUser","userMultiRole","isDeputyLogin","userImagePath","settings","profileColor","displayName","showSearch","searchBar","layOutGetHomeCancel","toggleSearch","charAt","toUpperCase","map","index","lstUserMultiDeputy","sdeputyname","INTERNAL","screenName","mandatoryFieldFunction","event","onInputChange","onDropAccepted","deleteAttachment","onDropFile","actionType","onDropImage","target","type","checked","componentDidUpdate","prevProps","shouldComponentUpdate","nextProps","nextState"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Navbar, Nav, Dropdown, Image, Media, NavLink, NavDropdown, NavItem, Badge } from 'react-bootstrap';\r\nimport { toast } from 'react-toastify';\r\nimport { getChangeUserRole, submitChangeRole, getPassWordPolicy, updateStore, changepassword, changeOwner, logOutAuditAction, getListAlert, getDigitalSign, saveDigitalSign, crudMaster, validateEsignforDigitalSignature } from '../../actions'\r\nimport rsapi from '../../rsapi';\r\nimport { AtHeader, NavPrimaryHeader, ProfileImage, DashboardIcon } from '../header/header.styles';\r\nimport { faSearch, faSignature } from '@fortawesome/free-solid-svg-icons';\r\nimport '../../assets/styles/login.css';\r\nimport { ReactComponent as SearchIcon } from '../../assets/image/icon-search.svg';\r\n// import { ReactComponent as DashboardHeader } from '../../assets/image/dashboard-header.svg';\r\nimport SlideOutModal from '../slide-out-modal/SlideOutModal';\r\nimport ChangePassWord from '../../pages/Login/ChangePassWord';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { changePasswordValidation, fnPassMessage } from '../../pages/Login/LoginCommonFunction';\r\nimport { LOGINTYPE, transactionStatus } from '../Enumeration';\r\nimport PortalModal from '../../PortalModal';\r\nimport SliderPage from '../slider-page/slider-page-component';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faKey, faPowerOff, faUserCog, faUsersCog } from '@fortawesome/free-solid-svg-icons';\r\nimport { createImageFromInitials } from './headerutils';\r\n// import { Tooltip } from '@progress/kendo-react-tooltip';\r\nimport { getSelectedAlert } from '../../actions/AlertViewAction';\r\nimport '../../pages/dashboardtypes/Alert.css';\r\nimport AddDigitalSignature from '../../pages/Login/AddDigitalSignature';\r\nimport { Lims_JSON_stringify, create_UUID, onSaveMandatoryValidation } from '../../components/CommonScript';\r\nimport Esign from '../../pages/audittrail/Esign';\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    Login: state.Login\r\n  }\r\n}\r\n\r\nclass Header extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      show: false,\r\n      createPwdRecord: {},\r\n      createSecurityKey: {},\r\n      alert: [],\r\n      sliderOpen: false,\r\n      nflag: 2,\r\n      quickSettingOpen: false.valueOf,\r\n      showDashboard: false\r\n    }\r\n  }\r\n\r\n\r\n  onChangeRole() {\r\n    rsapi.post(\"/login/getchangerole\", { \"userInfo\": this.props.Login.userInfo })\r\n      .then(response => {\r\n        const responseData = response.data;\r\n        this.setState({\r\n          show: true,\r\n          UserMultiRole: responseData.UserMultiRole,\r\n          nusermultirolecode: {\r\n            label: responseData.UserMultiRole[0].suserrolename, value: responseData.UserMultiRole[0].nusermultirolecode,\r\n            item: responseData.UserMultiRole[0]\r\n          }\r\n        });\r\n      })\r\n      .catch(error => {\r\n        if (error.status === 205) {\r\n          toast.warn(error.message)\r\n        } else {\r\n          toast.error(error.message)\r\n        }\r\n      });\r\n  }\r\n\r\n  onLogout() {\r\n    const inputData = {\r\n      userinfo: this.props.Login.userInfo,\r\n      scomments: this.props.intl.formatMessage({ id: \"IDS_LOGOUT\" }),\r\n      sauditaction: \"IDS_LOGOUT\"\r\n    };\r\n    this.props.logOutAuditAction(inputData, this.props.Login.languageList);\r\n  }\r\n\r\n  openAlert = () => {\r\n    this.setState({ showDashboard: !this.state.showDashboard, nflag: 2 });\r\n  }\r\n\r\n  openQuickSetting = () => {\r\n    this.setState({ quickSettingOpen: !this.state.quickSettingOpen })\r\n  }\r\n\r\n  openDashBoard = () => {\r\n    this.setState({ showDashboard: !this.state.showDashboard, nflag: 1 })\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    const { susername, suserrolename, nuserrole, nlogintypecode, ssitename, nusercode } = this.props.Login.userInfo;\r\n    const { deputyUser, userMultiRole, isDeputyLogin, userImagePath, settings, profileColor } = this.props.Login;\r\n\r\n    return (\r\n      <>\r\n        {/* <ReactTooltip place=\"bottom\" id=\"tooltip-grid-wrap\" globalEventOff='click' /> */}\r\n        <AtHeader>\r\n          <Navbar className=\"p-0\" bg=\"light\" fixed=\"top\">\r\n            <Navbar.Brand>\r\n              <NavPrimaryHeader className=\"at-nav-brand\">\r\n                {this.props.Login && this.props.Login.displayName ?\r\n                  <FormattedMessage id={this.props.Login.displayName} /> : \"\"}\r\n              </NavPrimaryHeader>\r\n            </Navbar.Brand>\r\n            {/* <div style={{ \"margin-left\": this.props.Login.displayName!==\"\"?\"-20%\":\"-40px\"}}>\r\n            {this.props.searchBar}\r\n          </div> */}\r\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n            <Navbar.Collapse id=\"basic-navbar-nav\" className=\"d-flex align-items-center justify-content-end\">\r\n              {/* <ReactTooltip/> onClick={this.setFullview} */}\r\n\r\n              <Nav>\r\n\r\n\r\n                {this.props.showSearch ?\r\n                  <DashboardIcon className='mr-2'>\r\n                    <span>\r\n                      {this.props.searchBar}\r\n                    </span>\r\n                  </DashboardIcon> : \"\"\r\n\r\n\r\n                }\r\n\r\n                <Nav.Item>\r\n                  <DashboardIcon className='position-relative topbar-search  mr-1'>\r\n                    {this.props.showSearch ?\r\n                      <div className=\"search-icon search-icon-header position-absolute search-close-icon\" onClick={this.props.layOutGetHomeCancel}><i class=\"fa fa-times\" aria-hidden=\"true\"></i></div> :\r\n                      <SearchIcon className=\"search-icon search-icon-header position-absolute zoom\" onClick={this.props.toggleSearch}\r\n                      >\r\n                        <FontAwesomeIcon icon={faSearch} />\r\n                      </SearchIcon>\r\n                    }\r\n\r\n\r\n                  </DashboardIcon>\r\n\r\n                </Nav.Item>\r\n\r\n                {/* <ListView\r\n              data={alert}\r\n              openslide={this.openDashBoard}\r\n              getSelectedAlert={getSelectedAlert}\r\n              userInfo={this.props.Login.userInfo}\r\n              > */}\r\n                {/* </ListView> */}\r\n                {/* <Button className=\"btn btn-circle outline-grey ml-2\" style={{ \"border-color\": \" rgba(187, 194, 203, 0.41)!important\" }} variant=\"link\" role=\"button\"\r\n                                        title={this.props.intl.formatMessage({ id: \"IDS_ALERT\" })}\r\n                                        onClick={this.openAlert}>\r\n                                        <FontAwesomeIcon icon={faBell}  style={{ \"width\": \"0.6!important\" }}/>\r\n                                        <div style={{\"margin-bottom\":\"11px\"}}>\r\n                  <Badge pill variant=\"secondary\">{alert&&alert.length}</Badge>\r\n                  </div>\r\n                   </Button> */}\r\n                {/* <DashboardIcon className='position-relative'>\r\n                  <div className=\"fa_stack fa-2x the-wrapper\" data-tip={this.props.intl.formatMessage({ id: \"IDS_ALERTS\" })}\r\n                    onClick={this.openAlert} class=\"zoom\">\r\n                    <FontAwesomeIcon icon={faBell} style={{ 'font-size': '26px' }} />\r\n                  </div>\r\n                  <div className=\"icon icon_Badge position-absolute\" style={{ \"width\": this.state.alert && this.state.alert.length > 9 ? \"52%\" : \"46%\" }}>\r\n                    {this.state.alert && this.state.alert.length > 0 ?\r\n                      <Badge pill variant=\"danger\">{this.state.alert && this.state.alert.length}</Badge>\r\n                      : \"\"}\r\n\r\n                  </div>\r\n                </DashboardIcon> */}\r\n                {/* <DashboardIcon className='mr-0'>\r\n                  <Nav.Link data-tip={this.props.intl.formatMessage({ id: \"IDS_DASHBOARD\" })}\r\n                    onClick={this.openDashBoard} className=\"zoom dashboard-icon\">                \r\n                    <DashboardHeader width='26px' height='26px' />\r\n                  </Nav.Link>\r\n                </DashboardIcon> */}\r\n\r\n\r\n                {/* {this.props.history.location.pathname !='/home' &&                                                             \r\n                      <DashboardIcon className='mr-0'>   \r\n                          <Nav.Link className='zoom'>       \r\n                          {this.props.fullView &&      \r\n                                <FullviewExpand width='26px' height='26px' onClick={this.props.menuFullview} /> \r\n                            }\r\n                          {!this.props.fullView &&     \r\n                                <FullviewCollapse width='26px' height='26px' onClick={this.props.menuFullview} />\r\n                          }\r\n                          </Nav.Link>  \r\n                        </DashboardIcon> \r\n                    } */}\r\n                {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n\r\n                <NavDropdown className=\"no-arrow\" alignRight title={<Media >\r\n                  {/* {userImagePath === \"\" ? */}\r\n                  <ProfileImage>\r\n                    {settings && settings[5] && userImagePath && userImagePath !== \"\" ?\r\n                      <Image src={settings[5] + userImagePath}\r\n                        alt=\"avatar\" className=\"rounded-circle mr-2\" width=\"36\" height=\"36\" /> : <Image className=\"rounded-circle mr-2\"\r\n                          src={createImageFromInitials(32, susername ? susername.charAt(0).toUpperCase() : \"\", profileColor)}\r\n                      />}\r\n                  </ProfileImage>\r\n                  {/* {<Media.Body bsPrefix=\"media-profileinfo\">\r\n                      <span className=\"user-name user-role\" data-tip={susername} data-place=\"bottom\">{susername}</span>\r\n                      <span className=\"role user-role\" data-tip={suserrolename} data-place=\"bottom\">{suserrolename}</span>\r\n                    </Media.Body> } */}\r\n                  {/* :\r\n                    <Image src={userImagePath === \"\" ? userImg : fileViewURL + \"/SharedFolder/UserProfile/\" + userImagePath}\r\n                      alt=\"avatar\" className=\"img-profile rounded-circle mr-2\" />\r\n                  } */}\r\n\r\n                  {/* <FontAwesomeIcon className=\"align-self-center down-icon ml-2\" icon={faChevronDown} /> */}\r\n                </Media>}>\r\n                  {/* <ProfileLayer>\r\n                    <ProfileImageLayer>\r\n                      {userImagePath === \"\" ?\r\n                        <Image className=\"rounded-circle mr-2\"\r\n                          src={createImageFromInitials(80, susername ? susername.charAt(0).toUpperCase() : \"\", profileColor)}\r\n                        /> : <Image src={fileViewURL + \"/SharedFolder/UserProfile/\" + userImagePath}\r\n                          alt=\"avatar\" className=\"rounded-circle mr-2\" width=\"80\" height=\"80\" />}\r\n                    </ProfileImageLayer>\r\n                    <Profile>\r\n                      <ProfileName>{susername}</ProfileName>\r\n                      <ProfileRole>{suserrolename}</ProfileRole>\r\n                    </Profile>\r\n                  </ProfileLayer> */}\r\n                  {/* <Media className=\"dropdown-menu-animated\">\r\n                  <ProfileImage>\r\n                            {settings && settings[5] && userImagePath && userImagePath !== \"\" ?\r\n                              <Image src={settings[5] + userImagePath}\r\n                                alt=\"avatar\" className=\"ml-2\" width=\"36\" height=\"36\" /> : <Image className=\"rounded-circle ml-2 mr-3\"\r\n                                  style = {{width:\"3rem\",height:\"3rem\"}} src={createImageFromInitials(32, susername ? susername.charAt(0).toUpperCase() : \"\", profileColor)}\r\n                              />}\r\n                        </ProfileImage>\r\n                    <Media.Body bsPrefix=\"media-profileinfo\">\r\n                      <span className=\"user-name user-role\" data-tip={susername} data-place=\"bottom\">{susername}</span>\r\n                      <span className=\"role user-role\" data-tip={suserrolename} data-place=\"bottom\">{suserrolename}</span>\r\n                    </Media.Body>\r\n                    </Media> */}\r\n                  <div class=\"profile-img-block pt-2\">\r\n                    <ProfileImage className=\"mx-3 mb-3 pt-2 text-center\">\r\n                      {settings && settings[5] && userImagePath && userImagePath !== \"\" ?\r\n                        <Image src={settings[5] + userImagePath}\r\n                          alt=\"avatar\" className=\"profile-img rounded-circle mr-2\" /> : <Image className=\"profile-img rounded-circle mr-2\"\r\n                            src={createImageFromInitials(32, susername ? susername.charAt(0).toUpperCase() : \"\", profileColor)}\r\n                        />}\r\n                    </ProfileImage>\r\n\r\n                    <div class=\"d-block text-center\">\r\n                      <span className=\"user-name d-block mb-1\" data-tip={susername} data-place=\"bottom\">{susername}</span>\r\n                      <span className=\"role d-block mb-1\" data-tip={suserrolename} data-place=\"bottom\">{suserrolename}</span>\r\n                      <span className=\"role d-block mb-3\" data-tip={ssitename} data-place=\"bottom\">{ssitename}</span>\r\n                    </div>\r\n                    <div class=\"dropdown-divider\"></div>\r\n                  </div>\r\n                  {userMultiRole && userMultiRole.length > 0 &&\r\n                    <Dropdown as={NavItem} drop={\"left\"} className=\"ml-2 \">\r\n                      <Dropdown.Toggle as={NavLink}>\r\n                        <FontAwesomeIcon icon={faUserCog} className=\"mr-2\" />\r\n                        <FormattedMessage id=\"IDS_CHANGEROLE\" defaultMessage=\"Change Role\" />\r\n                      </Dropdown.Toggle>\r\n                      <Dropdown.Menu>\r\n                        {userMultiRole.map((item, index) => {\r\n                          return (\r\n                            <Dropdown.Item key={`roleindex_${index}`} onClick={() => this.submitChangeRole(item)}><span className=\"role-change d-block\" data-tip={item.suserrolename} data-place=\"bottom\">{item.suserrolename}</span></Dropdown.Item>\r\n                          )\r\n                        })}\r\n                      </Dropdown.Menu>\r\n                    </Dropdown>}\r\n                  {!isDeputyLogin && deputyUser && deputyUser.length > 0 &&\r\n                    <Dropdown as={NavItem} drop={\"left\"} className=\"ml-2\">\r\n                      <Dropdown.Toggle as={NavLink}>\r\n                        <FontAwesomeIcon icon={faUsersCog} className=\"mr-2\" />\r\n                        <FormattedMessage id=\"IDS_CHANGEOWNER\" defaultMessage=\"Change Owner\" />\r\n                      </Dropdown.Toggle>\r\n                      <Dropdown.Menu>\r\n                        {this.props.Login.deputyUser.map((item, index) => {\r\n                          return (\r\n                            item.lstUserMultiDeputy && item.lstUserMultiDeputy.length > 1 ?\r\n                              <Dropdown as={NavItem} drop={\"left\"} className=\"ml-2\">\r\n                                <Dropdown.Toggle as={NavLink}>{`${item.sdeputyname}[${item.sdeputyid}]-${item.suserrolename}`}</Dropdown.Toggle>\r\n                                <Dropdown.Menu>\r\n                                  {item.lstUserMultiDeputy.map((role, index) => {\r\n                                    return <Dropdown.Item key={`roleIndex_${index}`} onClick={() => this.submitChangeOwner(item, role)}>{role.suserrolename}</Dropdown.Item>\r\n                                  })}\r\n                                </Dropdown.Menu>\r\n                              </Dropdown>\r\n                              : <Dropdown.Item key={`deptuserindex_${index}`} onClick={() => this.submitChangeOwner(item, item.lstUserMultiDeputy[0])}>{item.sdeputyname + \"[\" + item.sdeputyid + \"]\" + \"-\" + item.suserrolename}</Dropdown.Item>\r\n                          )\r\n                        })}\r\n                      </Dropdown.Menu>\r\n                    </Dropdown>\r\n                  }\r\n                  {\r\n                  // nusercode && nusercode > 0 &&\r\n                    <NavDropdown.Item onClick={() => this.props.getDigitalSign(nusercode, this.props.Login.userInfo)}>\r\n                      <FontAwesomeIcon icon={faSignature} className=\"mr-2\" />\r\n                      <FormattedMessage id=\"IDS_DIGITALSIGNATURE\" defaultMessage=\"Digital Signature\" />\r\n                    </NavDropdown.Item>\r\n                  }\r\n                  {nlogintypecode && nlogintypecode === LOGINTYPE.INTERNAL && !isDeputyLogin &&\r\n                    <NavDropdown.Item onClick={() => this.props.getPassWordPolicy(nuserrole)}>\r\n                      <FontAwesomeIcon icon={faKey} className=\"mr-2\" />\r\n                      <FormattedMessage id=\"IDS_CHANGEPASSWORD\" defaultMessage=\"Change Password\" />\r\n                    </NavDropdown.Item>}\r\n\r\n                  <NavDropdown.Item onClick={() => this.onLogout()}>\r\n                    <FontAwesomeIcon icon={faPowerOff} className=\"mr-2\" />\r\n                    <FormattedMessage id=\"IDS_LOGOUT\" defaultMessage=\"Logout\" />\r\n                  </NavDropdown.Item>\r\n\r\n                </NavDropdown>\r\n                {/* </Tooltip> */}\r\n                {/* <PortalModal>\r\n                  <SliderPage sliderOpen={this.state.sliderOpen} openDashBoard={this.openDashBoard}\r\n                    component={<h1>Dash Board</h1>}>\r\n                  </SliderPage>\r\n                </PortalModal>\r\n\r\n                <PortalModal>\r\n                  <SliderPage sliderOpen={this.state.quickSettingOpen} openQuickSetting={this.openQuickSetting}\r\n                    component={<h1>Alert</h1>}>\r\n                  </SliderPage>\r\n                </PortalModal> */}\r\n\r\n                {/* <Dropdown alignRight className=\"no-arrow\">\r\n\r\n                  <Dropdown.Toggle id=\"dropdown-basic\" as={NavLink}>\r\n                    <Media>\r\n                      <Image  src={userImg} alt=\"avatar\" className=\"img-profile rounded-circle mr-2\" />\r\n                        <Media.Body>\r\n                          <span className=\"user-name\">{susername}</span>\r\n                          <span className=\"role\">{suserrolename}</span>\r\n                        </Media.Body>\r\n                        <FontAwesomeIcon className=\"align-self-center down-icon ml-2\" icon={faChevronDown} />\r\n                    </Media>\r\n                  </Dropdown.Toggle>\r\n\r\n                  <Dropdown.Menu>\r\n                    {this.props.Login.nchangerolecount > 0 && \r\n                    <>\r\n                      <Dropdown.Item onClick={()=>this.props.getChangeUserRole(this.props.Login.userInfo)}>\r\n                          <FormattedMessage id=\"IDS_CHANGEROLE\" defaultMessage=\"Change Role\" />\r\n                      </Dropdown.Item>\r\n                      <Dropdown as={NavItem} drop={\"left\"}>\r\n                        <Dropdown.Toggle as={NavLink}>\r\n                          <FormattedMessage id=\"IDS_CHANGEROLE\" defaultMessage=\"Change Role\" />\r\n                        </Dropdown.Toggle>\r\n                        <Dropdown.Menu>\r\n                          <Dropdown.Item>Hello there!</Dropdown.Item>\r\n                        </Dropdown.Menu>\r\n                      </Dropdown>\r\n                      </>}\r\n                    {this.props.Login.ndeputyCount > 0 && \r\n                      <Dropdown.Item onClick={ () => this.onChangeOwner() }>\r\n                          <FormattedMessage id=\"IDS_CHANGEOWNER\" defaultMessage=\"Change Owner\" />\r\n                      </Dropdown.Item>}\r\n                      <Dropdown.Item>\r\n                          <FormattedMessage id=\"IDS_CHANGEPASSWORD\" defaultMessage=\"Change Password\" />\r\n                      </Dropdown.Item>\r\n                      <Dropdown.Item>\r\n                          <FormattedMessage id=\"IDS_LOCK\" defaultMessage=\"Lock\" />\r\n                      </Dropdown.Item>\r\n                      <Dropdown.Item onClick={ () => this.onLogout()}>\r\n                          <FormattedMessage id=\"IDS_LOGOUT\" defaultMessage=\"Log Out\" />\r\n                      </Dropdown.Item>\r\n                  </Dropdown.Menu>\r\n                </Dropdown> */}\r\n              </Nav>\r\n            </Navbar.Collapse>\r\n\r\n          </Navbar>\r\n\r\n        </AtHeader>\r\n\r\n        <PortalModal>\r\n          <SliderPage show={this.state.showDashboard} nflag={this.state.nflag} closeModal={this.openDashBoard} />\r\n        </PortalModal>\r\n        {this.props.Login.openCPModal && (this.props.Login.screenName === \"IDS_CHANGEPASSWORD\" || this.props.Login.screenName === \"IDS_DIGITALSIGNATURE\") &&\r\n          <SlideOutModal\r\n            show={this.props.Login.openCPModal}\r\n            closeModal={this.closeModal}\r\n            loginoperation={true}\r\n            inputParam={{}}\r\n            screenName={this.props.Login.screenName}\r\n            onSaveClick={this.props.Login.screenName === \"IDS_CHANGEPASSWORD\" ? this.onChangePassword : this.onDigitalSignatureSaveClick}\r\n            selectedRecord={this.props.Login.screenName === \"IDS_CHANGEPASSWORD\" ? this.state.createPwdRecord || {} : this.state.selectedDigiSign || {}}\r\n            mandatoryFields={this.mandatoryFieldFunction()}\r\n            validateEsign={this.validateEsign}\r\n            esign={this.props.Login.loadEsign}\r\n            addComponent={this.props.Login.loadEsign === true ?\r\n              <Esign operation={\"update\"}\r\n                // onInputOnChange={this.onInputChange.bind(this)}\r\n                onInputOnChange={(event) => {this.onInputChange(event)}}\r\n                inputParam={this.props.Login.screenData.inputParam}\r\n                selectedRecord={this.state.selectedDigiSign || {}}\r\n              />\r\n              :\r\n              this.props.Login.screenName === \"IDS_CHANGEPASSWORD\" ?\r\n                <ChangePassWord\r\n                  sloginid={this.props.Login.userInfo.sloginid}\r\n                  createPwdRecord={this.state.createPwdRecord}\r\n                  msg={fnPassMessage(this.props.Login.passwordPolicy)}\r\n                  onInputChange={(event) => this.onInputChange(event)}\r\n                />\r\n                :\r\n                <AddDigitalSignature\r\n                  maxSize={20}\r\n                  maxFiles={1}\r\n                  multiple={false}\r\n                  onDropAccepted={this.onDropAccepted}\r\n                  selectedDigiSign={this.state.selectedDigiSign || {}}\r\n                  deleteAttachment={this.deleteAttachment}\r\n                  onDrop={this.onDropFile}\r\n                  actionType={this.state.actionType}\r\n                  userInfo={this.props.Login.userInfo}\r\n                  createSecurityKey={this.state.createSecurityKey}\r\n                  onInputChange={(event) => this.onInputChange(event)}\r\n                  label={this.props.intl.formatMessage({ id: \"IDS_DIGITALSIGNATURE\" })}\r\n                  name=\"digitalsignature\"\r\n                  onDropImage={this.onDropImage}\r\n                  operation={this.props.Login.operation}\r\n                  childDataChange={this.childDataChange}\r\n                  login={this.props.Login}\r\n                />\r\n            }\r\n          />}\r\n      </>\r\n    );\r\n  }\r\n\r\n  submitChangeOwner = (item, role) => {\r\n    const parameterInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { menuDesign: [], navigation: \"\" }\r\n    }\r\n    this.props.updateStore(parameterInfo);\r\n    const inputData = {\r\n      nuserrolecode: item.nuserrolecode,\r\n      suserrolename: item.suserrolename,\r\n      nusercode: item.nusercode,\r\n      sdeputyid: item.sdeputyid,\r\n      userinfo: this.props.Login.userInfo\r\n    }\r\n    this.props.changeOwner(inputData);\r\n  }\r\n\r\n  onChangePassword = () => {\r\n    const createPwdRecord = this.state.createPwdRecord;\r\n    const returnMsg = changePasswordValidation(createPwdRecord, this.props.Login.passwordPolicy, this.props.Login.userInfo.sloginid);\r\n    if (returnMsg === 0) {\r\n      const inputParam = {\r\n        spassword: createPwdRecord.snewpassword.trim(),\r\n        sOldPassword: createPwdRecord.soldpassword.trim(),\r\n        nusersitecode: this.props.Login.userInfo.nusersitecode,\r\n        isPasswordExpiry: false,\r\n        userInfo: this.props.Login.userInfo\r\n      };\r\n      this.props.changepassword(inputParam);\r\n    } else {\r\n      toast.info(returnMsg);\r\n    }\r\n  }\r\n\r\n  onSaveDigitalSign = (saveType, formRef) => {\r\n    let digiSignData = [];\r\n    digiSignData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n    const digiSignImageFile = this.state.selectedDigiSign.sdigisignname;\r\n\r\n    let isDigiSignFileEdited = transactionStatus.NO;\r\n    const formData = new FormData();\r\n    let digiSignImageCount = 0;\r\n    let digisignfile = {};\r\n    digiSignData[\"digiSign\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n    digiSignData[\"digiSign\"][\"sdigisignname\"] = this.state.selectedDigiSign[\"sdigisignname\"];\r\n\r\n    if (digiSignImageFile && Array.isArray(digiSignImageFile) && digiSignImageFile.length > 0) {\r\n      const splittedFileName = digiSignImageFile[0].name.split('.');\r\n      const fileExtension = digiSignImageFile[0].name.split('.')[splittedFileName.length - 1];\r\n      const uniquefilename = this.state.selectedDigiSign.sdigisignname === \"\" ?\r\n        this.state.selectedDigiSign.sdigisignname : create_UUID() + '.' + fileExtension;\r\n\r\n      digisignfile[\"sdigisignname\"] = Lims_JSON_stringify(digiSignImageFile[0].name, false);\r\n      digisignfile[\"sdigisignftp\"] = uniquefilename;\r\n      digisignfile[\"ssecuritykey\"] = this.state.selectedDigiSign[\"ssecuritykey\"];\r\n      formData.append(\"uploadedFile\" + digiSignImageCount, digiSignImageFile[0]);\r\n      formData.append(\"uniquefilename\" + digiSignImageCount, uniquefilename);\r\n      digiSignImageCount++;\r\n      isDigiSignFileEdited = transactionStatus.YES;\r\n      digiSignData[\"digiSign\"][\"sdigisignname\"] = \"\";\r\n    } else {\r\n      if (digiSignImageFile === \"\" || digiSignImageFile.length === 0) {\r\n        if (digiSignData[\"digiSign\"][\"sdigisignftp\"] !== null && digiSignData[\"digiSign\"][\"sdigisignftp\"] !== \"\") {\r\n          isDigiSignFileEdited = transactionStatus.YES;\r\n        }\r\n        digisignfile[\"sdigisignname\"] = null;\r\n        digisignfile[\"sdigisignftp\"] = null;\r\n        digiSignData[\"digiSign\"][\"sdigisignname\"] = \"\";\r\n      }\r\n      else {\r\n        digisignfile[\"sdigisignname\"] = Lims_JSON_stringify(this.state.selectedDigiSign.sdigisignname, false);\r\n        digisignfile[\"sdigisignftp\"] = this.state.selectedDigiSign.sdigisignftp;\r\n        digisignfile[\"ssecuritykey\"] = this.state.selectedDigiSign.ssecuritykey\r\n      }\r\n    }\r\n\r\n    formData.append(\"isDigiSignFileEdited\", isDigiSignFileEdited);\r\n    formData.append(\"DigiSignImage_filecount\", digiSignImageCount);\r\n    formData.append(\"filecount\", digiSignImageCount);\r\n    formData.append(\"controlcodelist\", JSON.stringify(this.props.Login.uploadControlList));\r\n    formData.append(\"digisignfile\", JSON.stringify(digisignfile));\r\n    formData.append(\"digiSign\", JSON.stringify(digiSignData[\"digiSign\"]));\r\n    // }\r\n    const inputParam = {\r\n      operation: this.props.Login.operation,\r\n      formData: formData,\r\n      classUrl: \"digitalsignature\",\r\n      methodUrl: \"DigitalSignature\",\r\n      inputData: {\r\n        \"userinfo\": {\r\n          ...this.props.Login.userInfo,\r\n          slanguagename: Lims_JSON_stringify(this.props.Login.userInfo.slanguagename)\r\n        }\r\n      },\r\n      isFileupload: true,\r\n      saveType, formRef\r\n    }\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: {\r\n        loadEsign: true, screenData: { inputParam }, saveType\r\n      }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n    // this.props.saveDigitalSign(inputParam);\r\n  }\r\n\r\n  validateEsign = () => {\r\n    const inputParam = {\r\n      inputData: {\r\n        \"userinfo\": {\r\n          ...this.props.Login.userInfo,\r\n          sreason: this.state.selectedDigiSign[\"esigncomments\"],\r\n          nreasoncode: this.state.selectedDigiSign[\"esignreason\"] && this.state.selectedDigiSign[\"esignreason\"].value,\r\n          spredefinedreason: this.state.selectedDigiSign[\"esignreason\"] && this.state.selectedDigiSign[\"esignreason\"].label,\r\n\r\n        },\r\n        password: this.state.selectedDigiSign[\"esignpassword\"]\r\n      },\r\n      screenData: this.props.Login.screenData\r\n    }\r\n    this.props.validateEsignforDigitalSignature(inputParam);\r\n  }\r\n\r\n  onInputChange(event) {\r\n    if (this.props.Login.screenName === \"IDS_CHANGEPASSWORD\") {\r\n      const createPwdRecord = this.state.createPwdRecord || {};\r\n      createPwdRecord[event.target.name] = event.target.value;\r\n      this.setState({ createPwdRecord });\r\n    } else {\r\n      const selectedDigiSign = this.state.selectedDigiSign || {};\r\n      if (event.target.type === 'checkbox') {\r\n        selectedDigiSign[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n      } else {\r\n        selectedDigiSign[event.target.name] = event.target.value;\r\n      }\r\n      this.setState({ selectedDigiSign });\r\n    }\r\n  }\r\n\r\n  closeModal = () => {\r\n    let selectedDigiSign = this.props.Login.selectedDigiSign;\r\n    let loadEsign = this.props.Login.loadEsign;\r\n    let openCPModal = this.props.Login.openCPModal;\r\n    if (this.props.Login.loadEsign) {\r\n      loadEsign = false;\r\n      selectedDigiSign['esignpassword'] = \"\"\r\n      selectedDigiSign['esigncomments'] = \"\"\r\n      selectedDigiSign['esignreason'] = \"\"\r\n    } else {\r\n      openCPModal = false;\r\n    }\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { openCPModal, loadEsign, selectedDigiSign }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n  }\r\n\r\n  mandatoryFieldFunction() {\r\n    let mandatoryField = [];\r\n    this.props.Login.screenName === \"IDS_CHANGEPASSWORD\" ?\r\n      mandatoryField = [\r\n        { \"idsName\": \"IDS_OLDPASSWORD\", \"dataField\": \"soldpassword\", \"mandatory\": false },\r\n        { \"idsName\": \"IDS_NEWPASSWORD\", \"dataField\": \"snewpassword\", \"mandatory\": false },\r\n        { \"idsName\": \"IDS_CONFIRMPASSWORD\", \"dataField\": \"sconfirmpassword\", \"mandatory\": true }\r\n      ]\r\n      :\r\n      mandatoryField = [];\r\n    ;\r\n    return mandatoryField;\r\n  }\r\n\r\n  submitChangeRole = (roleItem) => {\r\n    const parameterInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { menuDesign: [], navigation: \"\" }\r\n    }\r\n    this.props.updateStore(parameterInfo);\r\n    const userInfo = this.props.Login.userInfo;\r\n    const inputParam = {\r\n      nusermultisitecode: userInfo.nusersitecode,\r\n      slanguagetypecode: userInfo.slanguagetypecode,\r\n      nusermultirolecode: roleItem.nusermultirolecode,\r\n      nuserrolecode: roleItem.nuserrolecode,\r\n      nmastersitecode: userInfo.nmastersitecode,\r\n      nlogintypecode: userInfo.nlogintypecode,\r\n      userinfo: userInfo\r\n    }\r\n    this.props.submitChangeRole(inputParam);\r\n  }\r\n\r\n  childDataChange = (selectedRecord, mandatoryFieldCheck) => {\r\n    let isInitialRender = false;\r\n    this.setState({\r\n      selectedDigiSign: {\r\n        ...selectedRecord\r\n      },\r\n      isInitialRender\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    //   if (this.props.Login.isDeputyLogin === true) {\r\n\r\n    //   if (this.props.Login.navigation === \"home\") {\r\n    //      this.props.history.push('/');\r\n    //  }\r\n    // }\r\n    if (this.props.Login.createPwdRecord !== prevProps.Login.createPwdRecord) {\r\n      this.setState({ createPwdRecord: this.props.Login.createPwdRecord })\r\n    }\r\n    if (this.props.Login.alert !== prevProps.Login.alert) {\r\n      this.setState({ alert: this.props.Login.alert })\r\n    }\r\n    if (this.props.Login.selectedDigiSign !== prevProps.Login.selectedDigiSign) {\r\n      this.setState({ selectedDigiSign: this.props.Login.selectedDigiSign })\r\n    }\r\n    if (this.props.Login.isInitialRender !== prevProps.Login.isInitialRender) {\r\n      this.setState({ isInitialRender: this.props.Login.isInitialRender })\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (this.props.Login.openCPModal && nextState.isInitialRender === false &&\r\n      (nextState.selectedDigiSign !== this.state.selectedDigiSign)) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  onDigitalSignatureSaveClick = () => {\r\n    let mandatoryField = [];\r\n    (this.state.selectedDigiSign && this.state.selectedDigiSign[\"sdigisignname\"] && (this.state.selectedDigiSign[\"sdigisignname\"].hasOwnProperty(\"length\") ?\r\n      this.state.selectedDigiSign[\"sdigisignname\"].length > 0 : this.state.selectedDigiSign[\"sdigisignname\"] !== \"\") ?\r\n      mandatoryField = [\r\n        { \"idsName\": \"IDS_SECURITYKEY\", \"dataField\": \"ssecuritykey\", \"mandatory\": false },\r\n      ]\r\n      :\r\n      mandatoryField = []\r\n    );\r\n    onSaveMandatoryValidation(this.state.selectedDigiSign, mandatoryField, this.onSaveDigitalSign)\r\n  }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n  getChangeUserRole, submitChangeRole, getPassWordPolicy,\r\n  updateStore, changepassword, changeOwner, logOutAuditAction, getSelectedAlert, getListAlert, getDigitalSign, saveDigitalSign, crudMaster, validateEsignforDigitalSignature\r\n})(injectIntl(Header));"]},"metadata":{},"sourceType":"module"}