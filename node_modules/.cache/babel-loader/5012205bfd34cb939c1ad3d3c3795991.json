{"ast":null,"code":"import rsapi from '../rsapi';\nimport { DEFAULT_RETURN } from './LoginTypes';\nimport { toast } from 'react-toastify';\nimport { initRequest } from './LoginAction';\nimport { intl } from '../components/App';\nimport Axios from 'axios';\nimport { numericGrade } from '../pages/ResultEntryBySample/ResultEntryValidation';\nimport { constructOptionList, fillRecordBasedOnCheckBoxSelection, filterRecordBasedOnTwoArrays, getRecordBasedOnPrimaryKeyName, getSameRecordFromTwoArrays, replaceUpdatedObject, sortData, updatedObjectWithNewElement, rearrangeDateFormat, filterRecordBasedOnPrimaryKeyName, reArrangeArrays, compareArrays, CF_encryptionData, sortDataByParent } from '../components/CommonScript';\nimport { checkBoxOperation, transactionStatus } from '../components/Enumeration';\nimport { crudMaster, postCRUDOrganiseTransSearch } from './ServiceAction';\nexport function getsubSampleREDetail(inputData, isServiceRequired) {\n  return function (dispatch) {\n    let inputParamData = {\n      ntype: 2,\n      nflag: inputData.nflag || 2,\n      nsampletypecode: inputData.nsampletypecode,\n      nregtypecode: inputData.nregtypecode,\n      nregsubtypecode: inputData.nregsubtypecode,\n      npreregno: inputData.npreregno,\n      ntranscode: String(inputData.ntransactionstatus),\n      ntransactiontestcode: 0,\n      userinfo: inputData.userinfo,\n      ntestcode: inputData.ntestcode,\n      napprovalversioncode: inputData.napprovalversioncode,\n      fromdate: inputData.fromdate,\n      todate: inputData.todate,\n      activeTestKey: inputData.activeTestKey,\n      activeSampleKey: inputData.activeSampleKey,\n      //nneedsubsample: inputData.masterData.nneedsubsample,\n      nneedsubsample: inputData.masterData.realRegSubTypeValue.nneedsubsample,\n      ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n      nneedtemplatebasedflow: inputData.nneedtemplatebasedflow,\n      nworlistcode: inputData.nworlistcode,\n      nbatchmastercode: inputData.nbatchmastercode,\n      nneedReceivedInLab: inputData.nneedReceivedInLab\n    };\n    let activeName = \"\";\n    let dataStateName = \"\"; // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\n    //     documentDataState, testCommentDataState } = inputData\n\n    dispatch(initRequest(true));\n\n    if (isServiceRequired) {\n      rsapi.post(\"resultentrybysample/getResultEntryDetails\", { ...inputParamData,\n        checkBoxOperation: inputData.checkBoxOperation\n      }).then(response => {\n        // if (response.data.DynamicGetSamples) {\n        //     sortData(response.data.DynamicGetSamples, \"\", \"\");\n        // }\n        // if (response.data.DynamicGetTests) {\n        //     sortData(response.data.DynamicGetTests, \"descending\", \"npreregno\");\n        // }\n        sortData(response.data); //ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\n\n        let check = false;\n\n        if (inputData.checkBoxOperation === checkBoxOperation.SINGLESELECT) {\n          if (response.data['RE_TEST'] === undefined) check = true;\n        }\n\n        if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\n          if (response.data['RE_TEST'] === undefined && inputData.masterData.RESelectedTest.length === 0) check = true;\n        }\n\n        if (check) {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n          toast.warn(intl.formatMessage({\n            id: \"IDS_TESTISNOTAVAILABLE\"\n          }));\n        } else {\n          response.data['RE_SUBSAMPLE'] = sortDataByParent(response.data['RE_SUBSAMPLE'], inputData.sample, \"npreregno\"); // let responseData = { ...response.data, RESelectedSubSample: inputData.RESelectedSubSample }\n          // responseData = sortData(responseData)\n\n          let oldSelectedTest = inputData.masterData.RESelectedTest;\n          fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray); //let RESelectedSubSample = inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 5 || inputData.checkBoxOperation === 7 ? response.data.RESelectedSubSample : inputData.masterData.RESelectedSubSample\n\n          let RESelectedSubSample = inputData.checkBoxOperation === checkBoxOperation.SINGLESELECT || inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS || inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL ? response.data.RESelectedSubSample : inputData.masterData.RESelectedSubSample;\n          RESelectedSubSample = inputData.masterData.realRegSubTypeValue.nneedsubsample ? RESelectedSubSample : inputData.masterData.RE_SUBSAMPLE; //for with sub sample\n\n          /*   let check =true;\r\n             if(inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){\r\n                 if(inputData.masterData.realRegSubTypeValue.nneedsubsample){\r\n                 if(!(RESelectedSubSample[0].ntransactionsamplecode===(inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactionsamplecode : -1)))\r\n                     check =false;\r\n                 }\r\n                     else{\r\n                           check=response.data['RE_TEST']!==undefined;\r\n                     }\r\n                 }\r\n                                 else if(inputData.checkBoxOperation===checkBoxOperation.SINGLESELECT){\r\n                                   check=response.data['RE_TEST']!==undefined;\r\n                                 }\r\n          if( !check){\r\n                 dispatch({\r\n                     type: DEFAULT_RETURN,\r\n                     payload: {\r\n                         loading: false\r\n                     }\r\n                 })\r\n                 toast.warn(intl.formatMessage({\r\n                     id: \"IDS_TESTISNOTAVAILABLE\"\r\n                 }));\r\n            }\r\n            */\n\n          let masterData = { ...inputData.masterData,\n            // ...response.data,\n            // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\n            RE_TEST: response.data.RE_TEST || inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST : [],\n            RESelectedTest: response.data.RESelectedTest || inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\n            RESelectedSample: inputData.RESelectedSample,\n            RESelectedSubSample\n          }; // if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\n          //     inputData.searchSampleRef.current.value = \"\";\n          //     masterData['searchedSample'] = undefined\n          // }\n\n          if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n            inputData.searchSubSampleRef.current.value = \"\";\n            masterData['searchedSubSample'] = undefined;\n          }\n\n          if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n            inputData.searchTestRef.current.value = \"\";\n            masterData['searchedTest'] = undefined;\n          }\n\n          let {\n            testskip,\n            testtake,\n            subSampleSkip,\n            subSampleTake\n          } = inputData; // let bool = false;\n          // Commented bool value because no need to check bool condition to update skipInfo value.\n\n          let skipInfo = {}; // if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\n\n          testskip = 0; // bool = true\n          // }\n\n          subSampleSkip = 0; // bool = true\n          // if (bool) {\n\n          skipInfo = {\n            testskip,\n            testtake,\n            subSampleSkip,\n            subSampleTake\n          }; // }\n\n          let TestParameters = [];\n          let ResultUsedInstrument = [];\n          let ResultUsedMaterial = [];\n          let ResultUsedTasks = [];\n          let RegistrationTestAttachment = [];\n          let ResultChangeHistory = [];\n          let RegistrationTestComment = [];\n          let RegistrationComment = []; // let RegistrationSampleAttachment = [];\n          //if (inputData.checkBoxOperation === 1) {\n\n          if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\n            //added by sudharshanan for test select issue while sample click\n            let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode);\n            oldSelectedTest.map((test, index) => {\n              if (!wholeTestList.includes(test.ntransactiontestcode)) {\n                oldSelectedTest.splice(index, 1);\n              }\n\n              return null;\n            });\n            let keepOld = false;\n            let ntransactiontestcode;\n            let npreregno;\n\n            if (oldSelectedTest.length > 0) {\n              keepOld = true; // masterData = {\n              //     ...masterData,\n              //     RESelectedTest: oldSelectedTest\n              // }\n            } else {\n              ntransactiontestcode = masterData.RESelectedTest[0].ntransactiontestcode;\n              npreregno = masterData.RESelectedSample[0].npreregno;\n            }\n\n            switch (inputData.activeTestKey) {\n              case \"IDS_RESULTS\":\n                TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"TestParameters\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              case \"IDS_INSTRUMENT\":\n                ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"ResultUsedInstrument\";\n                dataStateName = \"instrumentDataState\";\n                break;\n\n              case \"IDS_MATERIAL\":\n                ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"ResultUsedMaterial\";\n                dataStateName = \"materialDataState\";\n                break;\n\n              case \"IDS_TASK\":\n                ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"ResultUsedTasks\";\n                dataStateName = \"taskDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestAttachment\";\n                break;\n\n              case \"IDS_RESULTCHANGEHISTORY\":\n                ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"ResultChangeHistory\";\n                dataStateName = \"resultChangeDataState\";\n                break;\n\n              case \"IDS_TESTCOMMENTS\":\n                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              case \"IDS_SAMPLECOMMENTS\":\n                RegistrationComment = keepOld ? inputData.masterData.RegistrationComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment, npreregno, \"npreregno\");\n                activeName = \"RegistrationComment\";\n                dataStateName = \" sampleChangeDataState\";\n                break;\n\n              default:\n                TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"TestParameters\";\n                dataStateName = \"resultDataState\";\n                break;\n            } // } else if (inputData.checkBoxOperation === 5) {\n\n          } else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {\n            let list = [];\n            let dbData = [];\n\n            switch (inputData.activeTestKey) {\n              case \"IDS_RESULTS\":\n                dbData = response.data.TestParameters || [];\n                list = [...inputData.masterData.TestParameters, ...response.data.TestParameters];\n                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                break;\n\n              case \"IDS_INSTRUMENT\":\n                dbData = response.data.TestParameters || [];\n                list = [...inputData.masterData.ResultUsedInstrument, ...response.data.ResultUsedInstrument];\n                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                break;\n\n              case \"IDS_MATERIAL\":\n                list = [...inputData.masterData.ResultUsedMaterial, ...response.data.ResultUsedMaterial];\n                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                break;\n\n              case \"IDS_TASK\":\n                dbData = response.data.ResultUsedTasks || [];\n                list = [...inputData.masterData.ResultUsedTasks, ...dbData];\n                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\n                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                dbData = response.data.RegistrationTestAttachment || [];\n                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\n                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                break;\n\n              case \"IDS_RESULTCHANGEHISTORY\":\n                dbData = response.data.ResultChangeHistory || [];\n                list = [...inputData.masterData.ResultChangeHistory, ...dbData];\n                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                break;\n\n              case \"IDS_TESTCOMMENTS\":\n                dbData = response.data.RegistrationTestComment || [];\n                list = [...inputData.masterData.RegistrationTestComment, ...dbData];\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                break;\n\n              case \"IDS_SAMPLECOMMENTS\":\n                dbData = response.data.RegistrationComment || [];\n                list = [...inputData.masterData.RegistrationComment, ...dbData];\n                RegistrationComment = getRecordBasedOnPrimaryKeyName(list, inputData.RESelectedSample.length > 0 ? inputData.RESelectedSample[0].npreregno : \"\", \"npreregno\");\n                break;\n\n              default:\n                dbData = response.data.TestParameters || [];\n                list = [...inputData.masterData.TestParameters, ...dbData];\n                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                break;\n            }\n          } //else if (inputData.checkBoxOperation === 7) {\n          else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {\n            //getSameRecordFromTwoArrays( inputData.masterData.RE_SAMPLE, responseData.RE_SUBSAMPLE, \"ntransactionsamplecode\");\n            let list = [];\n\n            switch (inputData.activeTestKey) {\n              case \"IDS_RESULTS\":\n                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\n                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"TestParameters\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              case \"IDS_INSTRUMENT\":\n                list = response.data.ResultUsedInstrument ? sortData(response.data.ResultUsedInstrument, 'descending', 'nresultusedinstrumentcode') : [];\n                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"ResultUsedInstrument\";\n                dataStateName = \"instrumentDataState\";\n                break;\n\n              case \"IDS_MATERIAL\":\n                list = response.data.ResultUsedMaterial ? sortData(response.data.ResultUsedMaterial, 'descending', 'nresultusedmaterialcode') : [];\n                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"ResultUsedMaterial\";\n                dataStateName = \"materialDataState\";\n                break;\n\n              case \"IDS_TASK\":\n                list = response.data.ResultUsedTasks ? sortData(response.data.ResultUsedTasks, 'descending', 'nresultusedtaskcode') : [];\n                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\n                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"ResultUsedTasks\";\n                dataStateName = \"taskDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\n                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"RegistrationTestAttachment\";\n                break;\n\n              case \"IDS_RESULTCHANGEHISTORY\":\n                list = response.data.ResultChangeHistory ? sortData(response.data.ResultChangeHistory, 'descending', 'nresultchangehistorycode') : [];\n                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"ResultChangeHistory\";\n                dataStateName = \"resultChangeDataState\";\n                break;\n\n              case \"IDS_TESTCOMMENTS\":\n                list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n                break;\n\n              case \"IDS_SAMPLECOMMENTS\":\n                RegistrationComment = response.data.RegistrationComment ? [...response.data.RegistrationComment] : [];\n                activeName = \"RegistrationComment\";\n                dataStateName = \"sampleCommentsDataState\";\n                break;\n\n              default:\n                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\n                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"TestParameters\";\n                dataStateName = \"resultDataState\";\n                break;\n            }\n          } else {\n            let list = [];\n\n            if (!inputData.masterData.realRegSubTypeValue.nneedsubsample) {\n              let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode);\n              oldSelectedTest.map((test, index) => {\n                if (!wholeTestList.includes(test.ntransactiontestcode)) {\n                  oldSelectedTest.splice(index, 1);\n                }\n\n                return null;\n              });\n              let keepOld = false;\n              let ntransactiontestcode;\n\n              if (oldSelectedTest.length > 0) {\n                keepOld = true; // masterData = {\n                //     ...masterData,\n                //     RESelectedTest: oldSelectedTest\n                // }\n              } else {\n                ntransactiontestcode = masterData.RESelectedTest[0].ntransactiontestcode;\n              }\n            }\n\n            switch (inputData.activeTestKey) {\n              case \"IDS_RESULTS\":\n                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\n                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"TestParameters\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              case \"IDS_INSTRUMENT\":\n                list = response.data.ResultUsedInstrument ? sortData(response.data.ResultUsedInstrument, 'descending', 'nresultusedinstrumentcode') : [];\n                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"ResultUsedInstrument\";\n                dataStateName = \"instrumentDataState\";\n                break;\n\n              case \"IDS_MATERIAL\":\n                list = response.data.ResultUsedMaterial ? sortData(response.data.ResultUsedMaterial, 'descending', 'nresultusedmaterialcode') : [];\n                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"ResultUsedMaterial\";\n                dataStateName = \"materialDataState\";\n                break;\n\n              case \"IDS_TASK\":\n                list = response.data.ResultUsedTasks ? sortData(response.data.ResultUsedTasks, 'descending', 'nresultusedtaskcode') : [];\n                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\n                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"ResultUsedTasks\";\n                dataStateName = \"taskDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\n                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"RegistrationTestAttachment\";\n                break;\n\n              case \"IDS_RESULTCHANGEHISTORY\":\n                list = response.data.ResultChangeHistory ? sortData(response.data.ResultChangeHistory, 'descending', 'nresultchangehistorycode') : [];\n                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"ResultChangeHistory\";\n                dataStateName = \"resultChangeDataState\";\n                break;\n\n              case \"IDS_TESTCOMMENTS\":\n                list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              case \"IDS_SAMPLECOMMENTS\":\n                list = response.data.RegistrationComment ? sortData(response.data.RegistrationComment, 'descending', 'nregcommentcode') : [];\n                RegistrationComment = getRecordBasedOnPrimaryKeyName(list, inputData.RESelectedSample.length > 0 ? inputData.RESelectedSample[0].npreregno : \"\", \"npreregno\");\n                activeName = \"RegistrationComment\";\n                dataStateName = \"sampleChangeDataState\";\n                break;\n\n              default:\n                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\n                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n                activeName = \"TestParameters\";\n                dataStateName = \"resultDataState\";\n                break;\n            }\n          }\n\n          masterData = { ...masterData,\n            // wholeApprovalParameter,\n            TestParameters,\n            // wholeResultUsedInstrument,\n            ResultUsedInstrument,\n            ResultUsedMaterial,\n            // wholeResultUsedTasks,\n            ResultUsedTasks,\n            // wholeRegistrationTestAttachment,\n            RegistrationTestAttachment,\n            // wholeResultChangeHistory,\n            ResultChangeHistory,\n            // wholeRegistrationTestComments,\n            RegistrationTestComment,\n            RegistrationComment // RegistrationSampleAttachment\n\n          };\n\n          if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n            skipInfo = { ...skipInfo,\n              [dataStateName]: { ...inputData[dataStateName],\n                skip: 0,\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          } else {\n            skipInfo = { ...skipInfo,\n              [dataStateName]: { ...inputData[dataStateName],\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          } // Start of ALPD-4132 Additional Filter info to be Dispatched on Save - ATE-241\n\n\n          let multifilterInfo = {};\n\n          if (inputData.multiFilterLoad !== undefined) {\n            if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\n              inputData.searchSampleRef.current.value = \"\";\n            }\n\n            if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n              inputData.searchSubSampleRef.current.value = \"\";\n            }\n\n            if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n              inputData.searchTestRef.current.value = \"\";\n            }\n\n            multifilterInfo = {\n              multiFilterLoad: inputData.multiFilterLoad,\n              openModal: inputData.openModal,\n              searchSampleRef: inputData.searchSampleRef,\n              searchSubSampleRef: inputData.searchSubSampleRef,\n              searchTestRef: inputData.searchTestRef,\n              testskip: inputData.testskip,\n              subsampleskip: inputData.subsampleskip,\n              skip: inputData.skip\n            };\n          } //  End of ALPD-4132 - ATE-241\n\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              masterData,\n              loading: false,\n              skip: undefined,\n              take: undefined,\n              subSampleSkip: undefined,\n              subSampleTake: undefined,\n              ...skipInfo,\n              activeTabIndex: inputData.activeTabIndex,\n              //  ALPD-4132 Addition Filter Info to be dispatched on save - ATE-241\n              ...multifilterInfo\n            }\n          });\n        }\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      let oldSelectedTest = inputData.masterData.RESelectedTest; //let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n      //let isGrandChildGetRequired = false;\n\n      let oldSelectedSubSample = inputData.masterData.RESelectedSubSample;\n      let {\n        subsampletake,\n        subsampleskip\n      } = inputData;\n      let skipInfo = {};\n      let TestSelected = [];\n      let subSampleSelected = [];\n\n      if (inputData[\"statusNone\"]) {\n        TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n        subSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n      } else {\n        TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n        subSampleSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n      }\n\n      let isGrandChildGetRequired = false;\n\n      if (TestSelected.length > 0) {\n        isGrandChildGetRequired = false;\n      } else {\n        isGrandChildGetRequired = true;\n      }\n\n      fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.RESelectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n\n      if (isGrandChildGetRequired) {\n        let ntransactiontestcode = inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode.toString() : \"\";\n        let RESelectedSample = inputData.RESelectedSample;\n        let RESelectedTest = inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [];\n        let RESelectedSubSample = inputData.masterData.RE_SUBSAMPLE;\n\n        if (inputData.masterData.nneedsubsample) {\n          let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RE_SUBSAMPLE, \"ntransactionsamplecode\");\n          RESelectedSubSample = filterSelectedSubSample.length > 0 ? filterSelectedSubSample : [inputData.masterData.RE_SUBSAMPLE[0]];\n\n          if (inputData.masterData.RE_SUBSAMPLE.length <= inputData.subsampleskip) {\n            subsampleskip = 0;\n            skipInfo = {\n              subsampletake,\n              subsampleskip\n            };\n          }\n        }\n\n        let ntransactionsamplecode = RESelectedSubSample.map(subsample => subsample.ntransactionsamplecode).join(',');\n        let masterData = { ...inputData.masterData,\n          RESelectedSample,\n          RESelectedSubSample,\n          RESelectedTest\n        };\n        inputData = { ...inputData,\n          ntransactiontestcode,\n          ntransactionsamplecode,\n          RESelectedSample,\n          RESelectedTest,\n          RESelectedSubSample,\n          //checkBoxOperation: 3,\n          checkBoxOperation: checkBoxOperation.SINGLESELECT,\n          activeTestKey: inputData.activeTestKey,\n          masterData\n        };\n\n        if (RESelectedTest.length > 0) {\n          inputData = { ...inputData,\n            childTabsKey: [\"TestParameters\", \"ResultUsedInstrument\", \"ResultUsedMaterial\", \"ResultUsedTasks\", \"RegistrationTestAttachment\", \"ResultChangeHistory\", \"RegistrationTestComment\", \"ResultChangeHistory\"]\n          };\n          dispatch(getTestChildTabREDetail(inputData, true));\n        } else {\n          inputData = { ...inputData,\n            masterData,\n            childTabsKey: [\"RE_TEST\"]\n          };\n          dispatch(getTestREDetail(inputData, true));\n        }\n      } else {\n        //added by sudharshanan for test select issue while sample click\n        let masterData = { ...inputData.masterData,\n          // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\n          // RESelectedSample: inputData.RESelectedSample,\n          // RESelectedSubSample: inputData.masterData.nneedsubsample && inputData.masterData.RE_SUBSAMPLE.length > 0 ? inputData.masterData.RESelectedSubSample : inputData.masterData.RE_SUBSAMPLE\n          RESelectedTest: TestSelected ? TestSelected : inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\n          RESelectedSample: inputData.RESelectedSample,\n          RESelectedSubSample: subSampleSelected ? subSampleSelected : inputData.masterData.RE_SUBSAMPLE.length > 0 ? [inputData.masterData.RE_SUBSAMPLE[0]] : []\n        };\n        let subsamplecheck = true;\n\n        if (inputData.masterData.nneedsubsample) {\n          let SubSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n\n          if (SubSampleSelected.length > 0) {\n            let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RE_SUBSAMPLE, \"ntransactionsamplecode\");\n\n            if (filterSelectedSubSample.length === 0) {\n              let wholeSubSample = masterData.RE_SUBSAMPLE.map(b => b.ntransactionsamplecode);\n              oldSelectedSubSample.forEach((test, index) => {\n                if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\n                  oldSelectedSubSample.splice(index, 1);\n                }\n\n                return null;\n              });\n\n              if (oldSelectedSubSample.length === 0 && wholeSubSample.length > 0 && masterData.selectedTest.length === 0) {\n                const selectedSubSample1 = [inputData.masterData.RE_SUBSAMPLE[0]];\n                masterData = { ...masterData,\n                  RESelectedSubSample: selectedSubSample1,\n                  selectedTest: []\n                };\n                inputData = { ...inputData,\n                  ...masterData\n                };\n                inputData[\"npreregno\"] = selectedSubSample1.map(x => x.npreregno).join(\",\");\n                inputData[\"ntransactionsamplecode\"] = selectedSubSample1.map(x => x.ntransactionsamplecode).join(\",\"); // inputData[\"checkBoxOperation\"] = 3\n\n                inputData[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT;\n                inputData[\"childTabsKey\"] = [\"RE_TEST\"];\n                subsamplecheck = false;\n                dispatch(getTestREDetail(inputData, true));\n              }\n            } else {\n              oldSelectedSubSample = filterSelectedSubSample;\n            }\n          } else {\n            let wholeSubSample = masterData.RE_SUBSAMPLE.map(b => b.ntransactionsamplecode);\n            oldSelectedSubSample.forEach((test, index) => {\n              if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\n                oldSelectedSubSample.splice(index, 1);\n              }\n\n              return null;\n            });\n          }\n\n          if (subsamplecheck) {\n            masterData = { ...masterData,\n              RESelectedSubSample: oldSelectedSubSample\n            };\n          }\n\n          if (inputData.masterData.RE_SUBSAMPLE.length <= inputData.subsampleskip) {\n            subsampleskip = 0;\n            skipInfo = {\n              subsampleskip,\n              subsampletake\n            };\n          }\n        }\n\n        let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode);\n        oldSelectedTest.map((test, index) => {\n          if (!wholeTestList.includes(test.ntransactiontestcode)) {\n            oldSelectedTest.splice(index, 1);\n          }\n\n          return null;\n        });\n        let keepOld = false;\n        let ntransactiontestcode;\n\n        if (oldSelectedTest.length > 0) {\n          keepOld = true;\n          masterData = { ...masterData,\n            RESelectedTest: oldSelectedTest\n          };\n        } else {\n          ntransactiontestcode = inputData.masterData.RE_TEST[0].ntransactiontestcode; // ntransactiontestcode = masterData.RE_TEST[0].ntransactiontestcode\n        } //const TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,\n        //ntransactiontestcode, \"ntransactiontestcode\");\n\n\n        const TestParameters = keepOld ? inputData[\"statusNone\"] ? getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].npreregno, \"npreregno\") : filterRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].npreregno, \"npreregno\") : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\");\n        const ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory || [], ntransactiontestcode, \"ntransactiontestcode\");\n        let {\n          testskip,\n          testtake\n        } = inputData;\n        let bool = false;\n        let skipInfo = {};\n\n        if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\n          testskip = 0;\n          bool = true;\n        }\n\n        if (bool) {\n          skipInfo = {\n            testskip,\n            testtake\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...masterData,\n              RESelectedSample: inputData.RESelectedSample,\n              // selectedPreregno: inputData.npreregno,\n              // RESelectedTest: inputData.masterData.searchedTest && inputData.masterData.searchedTest.length > 0 ? [inputData.masterData.\n              //     searchedTest[0]\n              // ] : inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.\n              //     RE_TEST[0]\n              // ] : [],\n              // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\n              TestParameters,\n              ResultUsedInstrument,\n              ResultUsedMaterial,\n              ResultUsedTasks,\n              RegistrationTestAttachment,\n              RegistrationTestComment,\n              ResultChangeHistory // RESelectedSubSample: inputData.masterData.RE_SUBSAMPLE\n\n            },\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestKey: inputData.activeTestKey,\n            ...skipInfo\n          }\n        });\n      }\n    }\n  };\n}\nexport function getTestREDetail(inputData, isServiceRequired) {\n  return function (dispatch) {\n    let activeName = \"\";\n    let dataStateName = \"\";\n    let inputParamData = {\n      nflag: 3,\n      ntype: 3,\n      nsampletypecode: inputData.nsampletypecode,\n      nregtypecode: inputData.nregtypecode,\n      nregsubtypecode: inputData.nregsubtypecode,\n      npreregno: inputData.npreregno,\n      ntransactiontestcode: 0,\n      ntranscode: inputData.ntransactionstatus.toString(),\n      ntransactionsamplecode: inputData.ntransactionsamplecode,\n      userinfo: inputData.userinfo,\n      ntestcode: inputData.ntestcode,\n      activeTestKey: inputData.activeTestKey,\n      ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n      checkBoxOperation: inputData.checkBoxOperation,\n      nneedsubsample: inputData.nneedsubsample,\n      nworlistcode: inputData.nworlistcode,\n      nbatchmastercode: inputData.nbatchmastercode,\n      nneedReceivedInLab: inputData.nneedReceivedInLab,\n      napprovalversioncode: inputData.napprovalversioncode\n    };\n    const subSample = inputData.nneedsubsample; // dispatch(initRequest(true));\n    // rsapi.post(\"resultentrybysample/getResultEntrySubSampleDetails\", inputParamData)\n\n    if (isServiceRequired) {\n      dispatch(initRequest(true));\n      rsapi.post(\"resultentrybysample/getResultEntrySubSampleDetails\", inputParamData).then(response => {\n        // let responseData = {\n        //     ...response.data,\n        //     RESelectedSample: inputData.RESelectedSample || inputData.masterData.RESelectedSample,\n        //     RESelectedSubSample: inputData.RESelectedSubSample || inputData.masterData.RESelectedSubSample,\n        //     // RESelectedTest: inputData.masterData.RESelectedTest\n        // }\n        let responseData = { ...response.data\n        };\n        responseData = sortData(responseData, 'descending', 'npreregno');\n        let oldSelectedTest = inputData.masterData.RESelectedTest;\n        let oldSelectedSubSample = inputData.masterData.RESelectedSubSample || [];\n        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n        let masterData = { ...inputData.masterData,\n          // ...response.data,\n          // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\n          RE_TEST: inputData.masterData && inputData.masterData.RE_TEST || response.data && response.data.RE_TEST,\n          RESelectedTest: response.data.RESelectedTest || inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\n          RESelectedSample: inputData.masterData.RESelectedSample,\n          RESelectedSubSample: inputData.RESelectedSubSample || inputData.masterData.RESelectedSubSample\n        };\n\n        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n          inputData.searchTestRef.current.value = \"\";\n          masterData['searchedTest'] = undefined;\n        }\n\n        let {\n          testskip,\n          testtake,\n          subSampleSkip,\n          subSampleTake\n        } = inputData; // let bool = false;\n        // Commented bool value because no need to check bool condition to update skipInfo value.\n\n        let skipInfo = {}; // if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\n\n        testskip = 0; // bool = true\n        // }\n        // if (inputData.masterData.RE_SUBSAMPLE.length <= inputData.subSampleSkip) {\n\n        subSampleSkip = 0; // bool = true\n        // }\n        // if (bool) {\n\n        skipInfo = {\n          testskip,\n          testtake,\n          subSampleSkip,\n          subSampleTake\n        }; // }\n\n        let TestParameters = [];\n        let ResultUsedInstrument = [];\n        let ResultUsedMaterial = [];\n        let ResultUsedTasks = [];\n        let RegistrationTestAttachment = [];\n        let ResultChangeHistory = [];\n        let RegistrationTestComment = [];\n        let RegistrationSampleComment = [];\n        let RegistrationSampleAttachment = []; //if (inputData.checkBoxOperation === 1) {\n\n        if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\n          //added by sudharshanan for test select issue while sample click\n          let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode);\n          oldSelectedTest.map((test, index) => {\n            if (!wholeTestList.includes(test.ntransactiontestcode)) {\n              oldSelectedTest.splice(index, 1);\n            }\n\n            return null;\n          });\n          let keepOld = false;\n          let ntransactiontestcode;\n\n          if (oldSelectedTest.length > 0) {\n            keepOld = true;\n            masterData = { ...masterData,\n              RESelectedTest: oldSelectedTest\n            };\n          } else {\n            ntransactiontestcode = masterData.RESelectedTest[0].ntransactiontestcode;\n          }\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_RESULTS\":\n              TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"TestParameters\";\n              dataStateName = \"resultDataState\";\n              break;\n\n            case \"IDS_INSTRUMENT\":\n              ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"ResultUsedInstrument\";\n              dataStateName = \"instrumentDataState\";\n              break;\n\n            case \"IDS_MATERIAL\":\n              ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"ResultUsedMaterial\";\n              dataStateName = \"materialDataState\";\n              break;\n\n            case \"IDS_TASK\":\n              ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"ResultUsedTasks\";\n              dataStateName = \"taskDataState\";\n              break;\n\n            case \"IDS_TESTATTACHMENTS\":\n              RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              break;\n\n            case \"IDS_RESULTCHANGEHISTORY\":\n              ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"ResultChangeHistory\";\n              dataStateName = \"resultChangeDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n            // case \"IDS_SAMPLECOMMENTS\":\n            //         RegistrationTestComment = keepOld ? inputData.masterData.RegistrationComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment, npreregno, \"npreregno\")\n            //         activeName = \"RegistrationComment\"\n            //         dataStateName = \"sampleChangeDataState\"\n            //         break;\n\n            default:\n              TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"TestParameters\";\n              dataStateName = \"resultDataState\";\n              break;\n          } //} else if (inputData.checkBoxOperation === 5) {\n\n        } else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {\n          let list = [];\n          let dbData = [];\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_RESULTS\":\n              dbData = response.data.TestParameters || [];\n              list = [...inputData.masterData.TestParameters, ...response.data.TestParameters];\n              TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_INSTRUMENT\":\n              dbData = response.data.TestParameters || [];\n              list = [...inputData.masterData.ResultUsedInstrument, ...response.data.ResultUsedInstrument];\n              ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_MATERIAL\":\n              list = [...inputData.masterData.ResultUsedMaterial, ...response.data.ResultUsedMaterial];\n              ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_TASK\":\n              dbData = response.data.ResultUsedTasks || [];\n              list = [...inputData.masterData.ResultUsedTasks, ...dbData];\n              list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\n              ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_TESTATTACHMENTS\":\n              dbData = response.data.RegistrationTestAttachment || [];\n              list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_RESULTCHANGEHISTORY\":\n              dbData = response.data.ResultChangeHistory || [];\n              list = [...inputData.masterData.ResultChangeHistory, ...dbData];\n              ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              dbData = response.data.RegistrationTestComment || [];\n              list = [...inputData.masterData.RegistrationTestComment, ...dbData];\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            default:\n              dbData = response.data.TestParameters || [];\n              list = [...inputData.masterData.TestParameters, ...dbData];\n              TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n          } // } else if (inputData.checkBoxOperation === 7) {\n\n        } else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {\n          let list = [];\n          let dbData = [];\n          let testList = reArrangeArrays(inputData.masterData.RE_SUBSAMPLE, responseData.RE_TEST, \"ntransactionsamplecode\");\n          masterData = { ...masterData,\n            RESelectedTest: [testList[0]],\n            RE_TEST: testList // ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\n\n          };\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_RESULTS\":\n              dbData = response.data.TestParameters || [];\n              list = [...response.data.TestParameters];\n              TestParameters = getRecordBasedOnPrimaryKeyName(list, testList.length > 0 ? testList[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_INSTRUMENT\":\n              dbData = response.data.TestParameters || [];\n              list = [...inputData.masterData.ResultUsedInstrument, ...response.data.ResultUsedInstrument];\n              ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_MATERIAL\":\n              list = [...inputData.masterData.ResultUsedMaterial, ...response.data.ResultUsedMaterial];\n              ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_TASK\":\n              dbData = response.data.ResultUsedTasks || [];\n              list = [...inputData.masterData.ResultUsedTasks, ...dbData];\n              list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\n              ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_TESTATTACHMENTS\":\n              dbData = response.data.RegistrationTestAttachment || [];\n              list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n\n            case \"IDS_RESULTCHANGEHISTORY\":\n              dbData = response.data.ResultChangeHistory || [];\n              list = [...inputData.masterData.ResultChangeHistory, ...dbData];\n              ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n            // case \"IDS_TESTCOMMENTS\":\n            //     dbData = response.data.RegistrationTestComment || []\n            //     list = [...inputData.masterData.RegistrationTestComment, ...dbData];\n            //     RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\n            //     break;\n\n            default:\n              dbData = response.data.TestParameters || [];\n              list = [...inputData.masterData.TestParameters, ...dbData];\n              TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              break;\n          }\n        } else {\n          let list = [];\n\n          switch (inputData.activeTestKey) {\n            case \"IDS_RESULTS\":\n              list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\n              TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"TestParameters\";\n              dataStateName = \"resultDataState\";\n              break;\n\n            case \"IDS_INSTRUMENT\":\n              list = response.data.ResultUsedInstrument ? sortData(response.data.ResultUsedInstrument, 'descending', 'nresultusedinstrumentcode') : [];\n              ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"ResultUsedInstrument\";\n              dataStateName = \"instrumentDataState\";\n              break;\n\n            case \"IDS_MATERIAL\":\n              list = response.data.ResultUsedMaterial ? sortData(response.data.ResultUsedMaterial, 'descending', 'nresultusedmaterialcode') : [];\n              ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"ResultUsedMaterial\";\n              dataStateName = \"materialDataState\";\n              break;\n\n            case \"IDS_TASK\":\n              list = response.data.ResultUsedTasks ? sortData(response.data.ResultUsedTasks, 'descending', 'nresultusedtaskcode') : [];\n              list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\n              ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"ResultUsedTasks\";\n              dataStateName = \"taskDataState\";\n              break;\n\n            case \"IDS_TESTATTACHMENTS\":\n              list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\n              RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              break;\n\n            case \"IDS_RESULTCHANGEHISTORY\":\n              list = response.data.ResultChangeHistory ? sortData(response.data.ResultChangeHistory, 'descending', 'nresultchangehistorycode') : [];\n              ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"ResultChangeHistory\";\n              dataStateName = \"resultChangeDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_SUBSAMPLEATTACHMENTS\":\n              list = response.data.RegistrationSampleComment ? sortData(response.data.RegistrationSampleComment, 'descending', 'ntestcommentcode') : [];\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_SUBSAMPLE.length > 0 ? inputData.masterData.RE_SUBSAMPLE[0].ntransactionsamplecode : \"\", \"ntransactionsamplecode\");\n              activeName = \"RegistrationSampleComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            default:\n              list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\n              TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\");\n              activeName = \"TestParameters\";\n              dataStateName = \"resultDataState\";\n              break;\n          }\n        }\n\n        if (subSample) {\n          let wholeSubsampleList = masterData.RE_SUBSAMPLE.map(b => b.ntransactionsamplecode);\n          oldSelectedSubSample.map((test, index) => {\n            if (!wholeSubsampleList.includes(test.ntransactionsamplecode)) {\n              oldSelectedSubSample.splice(index, 1);\n            }\n\n            return null;\n          });\n          let keepOld = false;\n          let ntransactionsamplecode;\n\n          if (oldSelectedSubSample.length > 0) {\n            keepOld = true;\n          } else {\n            ntransactionsamplecode = masterData.selectedSubSample[0].ntransactionsamplecode;\n          }\n\n          switch (inputData.activeSubSampleTab) {\n            case \"IDS_SUBSAMPLECOMMENTS\":\n              RegistrationSampleComment = keepOld ? inputData.masterData.RegistrationSampleComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment, ntransactionsamplecode, \"ntransactionsamplecode\");\n              activeName = \"RegistrationSampleComment\";\n              dataStateName = \"subSampleCommentDataState\";\n              break;\n\n            default:\n              RegistrationSampleAttachment = keepOld ? inputData.masterData.RegistrationSampleAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment, ntransactionsamplecode, \"ntransactionsamplecode\");\n              activeName = \"RegistrationSampleAttachment\";\n              dataStateName = \"subSampleAttachmentDataState\";\n              break;\n          }\n        }\n\n        masterData = { ...masterData,\n          // wholeApprovalParameter,\n          TestParameters,\n          // wholeResultUsedInstrument,\n          ResultUsedInstrument,\n          ResultUsedMaterial,\n          // wholeResultUsedTasks,\n          ResultUsedTasks,\n          // wholeRegistrationTestAttachment,\n          RegistrationTestAttachment,\n          // wholeResultChangeHistory,\n          ResultChangeHistory,\n          // wholeRegistrationTestComments,\n          RegistrationTestComment,\n          RegistrationSampleComment,\n          RegistrationSampleAttachment\n        };\n\n        if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            showFilter: false,\n            activeTestKey: inputData.activeTestKey,\n            activeTestTab: inputData.activeTestKey,\n            screenName: inputData.activeTestKey,\n            ...skipInfo,\n            subSampleSkip: undefined,\n            subSampleTake: undefined\n          }\n        });\n      }).catch(error => {\n        console.log(\"error:\", error);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      //fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n      let oldSelectedTest = inputData.masterData.RESelectedTest; //let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\n      // let isGrandChildGetRequired = false;\n      // if (TestSelected.length > 0) {\n      //     isGrandChildGetRequired = true;\n      // } else {\n      //     isGrandChildGetRequired = false;\n      // }\n\n      let TestSelected = inputData[\"statusNone\"] ? getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\") : filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\n      let isGrandChildGetRequired = false;\n\n      if (TestSelected.length > 0) {\n        isGrandChildGetRequired = false;\n      } else {\n        isGrandChildGetRequired = true;\n      }\n\n      fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.RESelectedSubSample, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\n\n      if (isGrandChildGetRequired) {\n        let ntransactiontestcode = inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode.toString() : \"\";\n        let RESelectedSubSample = inputData.RESelectedSubSample;\n        let RESelectedTest = inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : []; // let RESelectedSubSample = inputData.masterData.RE_SUBSAMPLE\n\n        inputData = { ...inputData,\n          childTabsKey: [\"TestParameters\", \"ResultUsedInstrument\", \"ResultUsedMaterial\", \"ResultUsedTasks\", \"RegistrationTestAttachment\", \"ResultChangeHistory\", \"RegistrationTestComment\", \"ResultChangeHistory\"],\n          ntransactiontestcode,\n          RESelectedSample: inputData.masterData.RESelectedSample,\n          RESelectedTest,\n          RESelectedSubSample,\n          //checkBoxOperation: 3,\n          checkBoxOperation: checkBoxOperation.SINGLESELECT,\n          activeTestKey: inputData.activeTestKey\n        };\n        dispatch(getTestChildTabREDetail(inputData, true));\n      } else {\n        //added by sudharshanan for test select issue while sample click\n        let masterData = { ...inputData.masterData,\n          RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\n          RESelectedSubSample: inputData.RESelectedSubSample\n        };\n        let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode);\n        oldSelectedTest.map((test, index) => {\n          if (!wholeTestList.includes(test.ntransactiontestcode)) {\n            oldSelectedTest.splice(index, 1);\n          }\n\n          return null;\n        });\n        let keepOld = false;\n        let ntransactiontestcode;\n\n        if (oldSelectedTest.length > 0) {\n          keepOld = true;\n          masterData = { ...masterData,\n            RESelectedTest: oldSelectedTest\n          };\n        } else {\n          ntransactiontestcode = masterData.RE_TEST && masterData.RE_TEST[0].ntransactiontestcode;\n        } // const TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,\n        //     ntransactiontestcode, \"ntransactiontestcode\");\n\n\n        const TestParameters = keepOld ? inputData[\"statusNone\"] ? getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].ntransactionsamplecode, 'ntransactionsamplecode') : filterRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].ntransactionsamplecode, 'ntransactionsamplecode') : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\");\n        const ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment || [], ntransactiontestcode, \"ntransactiontestcode\");\n        const ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory || [], ntransactiontestcode, \"ntransactiontestcode\");\n        let {\n          testskip,\n          testtake\n        } = inputData;\n        let bool = false;\n        let skipInfo = {};\n\n        if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\n          testskip = 0;\n          bool = true;\n        }\n\n        if (bool) {\n          skipInfo = {\n            testskip,\n            testtake\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...masterData,\n              RESelectedSubSample: inputData.RESelectedSubSample,\n              // selectedPreregno: inputData.npreregno,\n              // RESelectedTest: inputData.masterData.searchedTest && inputData.masterData.searchedTest.length > 0 ? [inputData.masterData.\n              //     searchedTest[0]\n              // ] : inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.\n              //     RE_TEST[0]\n              // ] : [],\n              // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\n              TestParameters,\n              ResultUsedInstrument,\n              ResultUsedMaterial,\n              ResultUsedTasks,\n              RegistrationTestAttachment,\n              RegistrationTestComment,\n              ResultChangeHistory\n            },\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestKey: inputData.activeTestKey,\n            activeTestTab: inputData.activeTestKey,\n            ...skipInfo\n          }\n        });\n      }\n    }\n  };\n}\nexport function getSampleChildTabREDetail(inputData) {\n  return function (dispatch) {\n    let inputParamData = {\n      ntransactiontestcode: inputData.ntransactiontestcode,\n      npreregno: inputData.npreregno,\n      userinfo: inputData.userinfo\n    };\n    let url = \"\";\n\n    switch (inputData.activeSampleKey) {\n      case \"IDS_DOCUMENTS\":\n        url = \"attachment/getSampleAttachment\";\n        break;\n\n      case \"IDS_SAMPLEATTACHMENTS\":\n        url = \"attachment/getSampleAttachment\";\n        break;\n\n      case \"IDS_APPROVALHISTORY\":\n        url = \"resultentrybysample/getSampleApprovalHistory\";\n        break;\n\n      case \"IDS_SAMPLECOMMENTS\":\n        url = \"comments/getSampleComment\";\n        break;\n\n      default:\n        url = \"attachment/getSampleAttachment\";\n        break;\n    }\n\n    dispatch(initRequest(true));\n    rsapi.post(url, inputParamData).then(response => {\n      let responseData = { ...response.data\n      }; //responseData = sortData(responseData)\n\n      fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data,\n            RESelectedSample: inputData.RESelectedSample\n          },\n          loading: false,\n          showFilter: false,\n          activeSampleKey: inputData.activeSampleKey,\n          screenName: inputData.screenName\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getTestChildTabREDetail(inputData, isServiceRequired) {\n  return function (dispatch) {\n    let inputParamData = {\n      ntransactiontestcode: inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\"),\n      npreregno: inputData.npreregno,\n      userinfo: inputData.userinfo\n    };\n    let activeName = \"\";\n    let dataStateName = \"\"; // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\n    //     documentDataState, testCommentDataState } = inputData\n\n    let url = \"resultentrybysample/getTestbasedParameter\";\n\n    switch (inputData.activeTestKey) {\n      case \"IDS_RESULTS\":\n        url = \"resultentrybysample/getTestbasedParameter\";\n        activeName = \"TestParameters\";\n        dataStateName = \"resultDataState\";\n        break;\n\n      case \"IDS_INSTRUMENT\":\n        url = \"resultentrybysample/getResultUsedInstrument\";\n        activeName = \"ResultUsedInstrument\";\n        dataStateName = \"instrumentDataState\";\n        break;\n\n      case \"IDS_MATERIAL\":\n        url = \"resultentrybysample/getResultUsedMaterial\";\n        activeName = \"ResultUsedMaterial\";\n        dataStateName = \"materialDataState\";\n        break;\n\n      case \"IDS_TASK\":\n        url = \"resultentrybysample/getResultUsedTask\";\n        activeName = \"ResultUsedTasks\";\n        dataStateName = \"taskDataState\";\n        break;\n\n      case \"IDS_TESTATTACHMENTS\":\n        url = \"attachment/getTestAttachment\";\n        activeName = \"RegistrationTestAttachment\";\n        break;\n\n      case \"IDS_TESTCOMMENTS\":\n        url = \"comments/getTestComment\";\n        activeName = \"RegistrationTestComment\";\n        dataStateName = \"testCommentDataState\";\n        break;\n\n      case \"IDS_DOCUMENTS\":\n        url = \"attachment/getSampleAttachment\";\n        activeName = \"\";\n        dataStateName = \"documentDataState\";\n        break;\n\n      case \"IDS_RESULTCHANGEHISTORY\":\n        url = \"resultentrybysample/getResultChangeHistory\";\n        activeName = \"ResultChangeHistory\";\n        dataStateName = \"resultChangeDataState\";\n        break;\n\n      case \"IDS_SAMPLEATTACHMENTS\":\n        url = \"attachment/getSampleAttachment\";\n        activeName = \"\";\n        dataStateName = \"resultDataState\";\n        break;\n\n      default:\n        url = \"resultentrybysample/getTestbasedParameter\";\n        activeName = \"TestParameters\";\n        dataStateName = \"resultDataState\";\n        break;\n    }\n\n    dispatch(initRequest(true));\n\n    if (isServiceRequired) {\n      rsapi.post(url, inputParamData).then(response => {\n        let responseData = { ...response.data,\n          RESelectedSample: inputData.RESelectedSample || inputData.masterData.RESelectedSample,\n          RESelectedTest: inputData.RESelectedTest,\n          activeTabIndex: inputData.activeTabIndex,\n          activeTabId: inputData.activeTabId\n        };\n        let skipInfo = {};\n        fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n        let masterData = { ...inputData.masterData,\n          ...responseData,\n          RESelectedTest: inputData.RESelectedTest\n        };\n\n        if (inputData[dataStateName] && masterData[activeName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n          skipInfo = {\n            [dataStateName]: { ...inputData[dataStateName],\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            activeTabIndex: inputData.activeTabIndex,\n            activeTabId: inputData.activeTabId,\n            activeTestTab: inputData.activeTestKey,\n            loading: false,\n            activeTestKey: inputData.activeTestKey,\n            screenName: inputData.activeTestKey,\n            testskip: undefined,\n            testtake: undefined,\n            ...skipInfo\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      //fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n      fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.RESelectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\", inputData.removeElementFromArray);\n      let skipInfo = {};\n      let masterData = { ...inputData.masterData,\n        RESelectedTest: inputData.RESelectedTest\n      };\n\n      if (masterData[activeName].length <= inputData[dataStateName] && inputData[dataStateName].skip) {\n        skipInfo = {\n          [dataStateName]: { ...inputData[dataStateName],\n            skip: 0,\n            sort: undefined,\n            filter: undefined\n          }\n        };\n      } else {\n        skipInfo = { ...skipInfo,\n          [dataStateName]: { ...inputData[dataStateName],\n            sort: undefined,\n            filter: undefined\n          }\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          showFilter: false,\n          activeTestKey: inputData.activeTestKey,\n          screenName: inputData.screenName,\n          ...skipInfo\n        }\n      });\n    }\n  };\n}\nexport function getRERegistrationType(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getRegistrationType\", inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            defaultSampleType: inputData.defaultSampleType,\n            ...response.data,\n            realDesignTemplateMapping: inputData.realDesignTemplateMapping,\n            realApproveConfigVersion: inputData.realApproveConfigVersion,\n            realApprovalConfigVersionList: inputData.realApprovalConfigVersionList,\n            realDesignTemplateMappingList: inputData.realDesignTemplateMappingList,\n            realFilterStatusList: inputData.realFilterStatusList,\n            realRegistrationSubTypeList: inputData.realRegistrationSubTypeList,\n            realRegistrationTypeList: inputData.realRegistrationTypeList,\n            realTestvaluesList: inputData.realTestvaluesList\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getRERegistrationSubType(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getRegistrationsubType\", inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data,\n            //defaultFilterStatus:inputData.masterData.defaultFilterStatus,\n            defaultRegistrationType: inputData.defaultRegistrationType,\n            realDesignTemplateMapping: inputData.realDesignTemplateMapping,\n            realApproveConfigVersion: inputData.realApproveConfigVersion,\n            realApprovalConfigVersionList: inputData.realApprovalConfigVersionList,\n            realDesignTemplateMappingList: inputData.realDesignTemplateMappingList,\n            realFilterStatusList: inputData.realFilterStatusList,\n            realRegistrationSubTypeList: inputData.realRegistrationSubTypeList,\n            realRegistrationTypeList: inputData.realRegistrationTypeList,\n            realTestvaluesList: inputData.realTestvaluesList\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getREApprovalConfigVersion(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getApprovalConfigVersion\", inputData).then(response => {\n      let nneedsubsample = inputData.defaultRegistrationSubType && inputData.defaultRegistrationSubType.nneedsubsample;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            nneedsubsample,\n            ...response.data,\n            defaultRegistrationSubType: inputData.defaultRegistrationSubType,\n            // fromDate: inputData.fromdate,\n            //  toDate: inputData.todate\n            realDesignTemplateMapping: inputData.realDesignTemplateMapping,\n            realApproveConfigVersion: inputData.realApproveConfigVersion,\n            realApprovalConfigVersionList: inputData.realApprovalConfigVersionList,\n            realDesignTemplateMappingList: inputData.realDesignTemplateMappingList,\n            realFilterStatusList: inputData.realFilterStatusList,\n            realRegistrationTypeList: inputData.realRegistrationTypeList,\n            realTestvaluesList: inputData.realTestvaluesList\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getREFilterStatus(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getFilterStatus\", inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data,\n            defaultjobstatus: inputData.defaultjobstatus // fromDate: inputData.fromdate,\n            // toDate: inputData.todate\n\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getREJobStatus(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getApproveConfigVersionRegTemplateDesign\", inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data,\n            defaultApprovalConfigVersion: inputData.defaultApprovalConfigVersion // fromDate: inputData.fromdate,\n            // toDate: inputData.todate\n\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getResultEntryDetails(inputParamData) {\n  let masterData = { ...inputParamData.masterData\n  };\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getResultEntryDetails\", { ...inputParamData.inputData,\n      nneedsubsample: //inputParamData.masterData.nneedsubsample\n      inputParamData.masterData.realRegSubTypeValue.nneedsubsample\n    }).then(response => {\n      //let masterData = { ...inputParamData.masterData }\n      if (inputParamData.refs.searchSampleRef !== undefined && inputParamData.refs.searchSampleRef.current !== null) {\n        inputParamData.refs.searchSampleRef.current.value = \"\";\n        masterData['searchedSample'] = undefined;\n      }\n\n      if (inputParamData.refs.searchSubSampleRef !== undefined && inputParamData.refs.searchSubSampleRef.current !== null) {\n        inputParamData.refs.searchSubSampleRef.current.value = \"\";\n        masterData['searchedSubSample'] = undefined;\n      }\n\n      if (inputParamData.refs.searchTestRef !== undefined && inputParamData.refs.searchTestRef.current !== null) {\n        inputParamData.refs.searchTestRef.current.value = \"\"; // masterData['searchedTests'] = undefined\n\n        masterData['searchedTest'] = undefined;\n      } //sortData(response.data)\n\n\n      sortData(response.data, 'ascending', 'ntransactionresultcode');\n\n      if (response.data.rtn == \"IDS_USERNOTINRESULTENTRYFLOW\") {\n        toast.warning(intl.formatMessage({\n          id: \"IDS_USERNOTINRESULTENTRYFLOW\"\n        }));\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            ...response.data,\n            realFromDate: response.data[\"fromDate\"],\n            realToDate: response.data[\"toDate\"]\n          },\n          loading: false,\n          showTest: inputParamData.inputData.showTest,\n          showSample: inputParamData.inputData.showSample,\n          activeTestKey: inputParamData.inputData.activeTestKey,\n          skip: 0,\n          take: inputParamData.inputData.take,\n          testskip: 0,\n          testtake: inputParamData.inputData.testtake,\n          resultDataState: { ...inputParamData.resultDataState,\n            sort: undefined,\n            filter: undefined\n          },\n          instrumentDataState: { ...inputParamData.instrumentDataState,\n            sort: undefined,\n            filter: undefined\n          },\n          materialDataState: { ...inputParamData.materialDataState,\n            sort: undefined,\n            filter: undefined\n          },\n          taskDataState: { ...inputParamData.taskDataState,\n            sort: undefined,\n            filter: undefined\n          },\n          documentDataState: { ...inputParamData.documentDataState,\n            sort: undefined,\n            filter: undefined\n          },\n          resultChangeDataState: { ...inputParamData.resultChangeDataState,\n            sort: undefined,\n            filter: undefined\n          },\n          testCommentDataState: { ...inputParamData.testCommentDataState,\n            sort: undefined,\n            filter: undefined\n          },\n          historyDataState: { ...inputParamData.historyDataState,\n            sort: undefined,\n            filter: undefined\n          },\n          samplePrintHistoryDataState: { ...inputParamData.samplePrintHistoryDataState,\n            sort: undefined,\n            filter: undefined\n          },\n          sampleHistoryDataState: { ...inputParamData.sampleHistoryDataState,\n            sort: undefined,\n            filter: undefined\n          }\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else if (error.response.status === 401) {\n        toast.warn(intl.formatMessage({\n          id: error.response.data.rtn\n        }));\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            masterData: { ...masterData,\n              ...error.response.data,\n              realFromDate: error.response.data[\"fromDate\"],\n              realToDate: error.response.data[\"toDate\"]\n            }\n          }\n        });\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function resultGetModule(inputData, userInfo, ncontrolcode, testskip, testtake) {\n  return function (dispatch) {\n    let additionalInfo = [];\n    let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\n    TestList = TestList.splice(testskip, testskip + testtake);\n    let acceptTestList = getSameRecordFromTwoArrays(TestList, inputData.RESelectedTest, \"ntransactiontestcode\");\n\n    if (acceptTestList && acceptTestList.length > 0) {\n      if (Object.values(inputData).length > 0 && inputData.RESelectedTest.length > 0) {\n        let inputParamData = {\n          ntransactiontestcode: acceptTestList ? acceptTestList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\n          userinfo: userInfo\n        };\n        inputParamData['nregtypecode'] = inputData.realRegTypeValue.nregtypecode;\n        inputParamData['nregsubtypecode'] = inputData.realRegSubTypeValue.nregsubtypecode;\n        dispatch(initRequest(true));\n        rsapi.post(\"resultentrybysample/getResultEntryResults\", inputParamData).then(response => {\n          let selectedRecord = {};\n          let selectedResultGrade = [];\n          let paremterResultcode = [];\n          const parameterResults = sortDataByParent(response.data.ResultParameter, TestList, \"ntransactiontestcode\");\n          let predefDefaultFlag = false;\n          let formFields = [];\n\n          if (response.data.FormFields && response.data.FormFields.length > 0) {\n            let formFieldJSON = JSON.parse(response.data.FormFields[0].jsondata['value']);\n            Object.entries(formFieldJSON).map(([key, value]) => formFields.push(value));\n          }\n\n          parameterResults.map((param, index) => {\n            selectedResultGrade[index] = {\n              ngradecode: param.ngradecode\n            };\n            paremterResultcode[index] = param.ntransactionresultcode;\n            let jsondata = JSON.parse(param.jsondata['value']);\n\n            if (jsondata.hasOwnProperty('additionalInfo')) {\n              additionalInfo[param.ntransactionresultcode] = jsondata['additionalInfo'];\n            }\n\n            predefDefaultFlag = false;\n            response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\n              // if (predefinedvalue.ndefaultstatus === transactionStatus.YES) {\n              //     if (!predefDefaultFlag) {\n              //         predefDefaultFlag = true;\n              //         response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\n              //             undefined, undefined).get(\"OptionList\");\n              //     }\n              // response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] =\n              //     constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'spredefinedname', 'spredefinedname', undefined,\n              //         undefined, undefined).get(\"OptionList\");\n              //     if (response.data.ResultParameter[index].sresult === null) {\n              //         response.data.ResultParameter[index].sresult = predefinedvalue.spredefinedname;\n              //         response.data.ResultParameter[index].sresultpredefinedname = predefinedvalue.sresultpredefinedname;\n              //         response.data.ResultParameter[index].sfinal = predefinedvalue.spredefinedsynonym;\n              //         response.data.ResultParameter[index].editable = true;\n              //         response.data.ResultParameter[index].ngradecode = predefinedvalue.ngradecode;\n              //         if(predefinedvalue.spredefinedcomments&&predefinedvalue.spredefinedcomments!==null){\n              //             response.data.ResultParameter[index].sresultcomment = predefinedvalue.spredefinedcomments\n              //             &&predefinedvalue.spredefinedcomments;\n              //         }\n              //     }\n              // }\n              //  else {\n              if (!predefDefaultFlag) {\n                predefDefaultFlag = true;\n                response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined, undefined, undefined).get(\"OptionList\");\n              } //   }\n              //return null;\n\n            });\n\n            if (parameterResults[index][\"nparametertypecode\"] == 1) {\n              parameterResults[index][\"resultaccuracycode\"] = {\n                \"value\": parameterResults[index][\"nresultaccuracycode\"],\n                \"label\": parameterResults[index][\"sresultaccuracyname\"]\n              };\n              parameterResults[index][\"unitcode\"] = {\n                \"value\": parameterResults[index][\"nunitcode\"],\n                \"label\": parameterResults[index][\"sunitname\"]\n              };\n            }\n\n            param['editable'] = false; //return null;\n            // response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] =  constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'spredefinedname', 'spredefinedname', undefined,\n            // undefined, undefined).get(\"OptionList\");\n            // ALPD-4302--start\n            // Added the Require Header fields in result Entire Slide out in result entry screen.\n            // added for jsondata --end\n\n            parameterResults[index] = { ...parameterResults[index],\n              ...jsondata\n            };\n          });\n          const ResultAccuracyList = constructOptionList(response.data[\"ResultAccuracy\"] || [], \"nresultaccuracycode\", \"sresultaccuracyname\", undefined, undefined, false);\n          const ResultAccuracy = ResultAccuracyList.get(\"OptionList\");\n          const UnitList = constructOptionList(response.data[\"Unit\"] || [], \"nunitcode\", \"sunitname\", undefined, undefined, false);\n          const Unit = UnitList.get(\"OptionList\");\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              masterData: { ...inputData,\n                //...sortData(response.data,\"desc\",\"ntransactiontestcode\"),\n                ...response.data,\n                paremterResultcode //,\n                //selectedResultGrade ,\n\n              },\n              selectedRecord: {\n                additionalInfo: additionalInfo.length > 0 ? additionalInfo : [],\n                selectedResultGrade: selectedResultGrade,\n                // ALPD-4302\n                // Added the Require Header fields in result Entire Slide out in result entry screen.\n                ResultParameter: sortDataByParent(parameterResults //response.data.ResultParameter\n                , TestList, \"ntransactiontestcode\") //response.data.ResultParameter \n\n              },\n              // parameterResults:response.data.ResultParameter,\n              // ALPD-4302\n              // Added the Require Header fields in result Entire Slide out in result entry screen.\n              parameterResults: sortDataByParent(parameterResults //response.data.ResultParameter\n              , TestList, \"ntransactiontestcode\"),\n              isParameterInitialRender: true,\n              loading: false,\n              screenName: \"IDS_RESULTENTRY\",\n              openModal: true,\n              operation: \"update\",\n              activeTestKey: \"IDS_RESULTS\",\n              ncontrolcode: ncontrolcode,\n              ResultAccuracy,\n              Unit,\n              formFields\n            }\n          });\n        }).catch(error => {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n\n          if (error.response.status === 500) {\n            toast.error(error.message);\n          } else {\n            toast.warn(error.response.data);\n          }\n        }); //}\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SELECTTESTTOENTERRESULT\"\n        }));\n      }\n    } else {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTTESTTOENTERRESULT\"\n      }));\n    }\n  };\n} //Commented by sonia on  24-07-2024 for Jira ID:ALPD-4649\n\n/*export function completeTest(inputParam, acceptList, userInfo, completeResultId,booleanFlag,param) {\r\n    if (acceptList !== undefined && acceptList.length > 0) {\r\n        return function (dispatch) {\r\n            let isSearched=false;\r\n            let inputData = inputParam.testChildGetREParam\r\n            let inputParamData = {\r\n                ntype: 3,\r\n               // nflag: 2,\r\n               ninsertMaterialInventoryTrans:inputParam.inputData.ninsertMaterialInventoryTrans,\r\n               nportalrequired:inputParam.inputData.nportalrequired,\r\n                basedrulesengine:param.basedrulesengine,\r\n                nsampletypecode: inputData.nsampletypecode,\r\n                nregtypecode: inputData.nregtypecode,\r\n                nregsubtypecode: inputData.nregsubtypecode,\r\n                npreregno: inputData.npreregno,\r\n                ntranscode: String(inputData.ntransactionstatus),\r\n                napprovalversioncode: inputData.napprovalversioncode,\r\n                napprovalconfigcode: inputData.napprovalconfigcode,\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n                userinfo: userInfo,\r\n                fromdate: inputData.fromdate,\r\n                todate: inputData.todate,\r\n                ntestcode: inputData.ntestcode,\r\n                transactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                ntransactiontestcode: 0,\r\n                activeTestKey: inputData.activeTestKey,\r\n                ncontrolcode: inputParam.inputData.ncontrolcode,\r\n                nneedsubsample: inputData.masterData.nneedsubsample,\r\n                ndesigntemplatemappingcode: inputData.masterData.ndesigntemplatemappingcode,\r\n                checkBoxOperation:checkBoxOperation.SINGLESELECT,\r\n                nsettingcode:  inputParam.nsettingcode,\r\n                nusercode: inputParam.nusercode,\r\n                susername:  inputParam.susername,\r\n                nneedReceivedInLab:inputParam.inputData.nneedReceivedInLab\r\n            }\r\n            let activeName = \"\";\r\n            let dataStateName = \"\";\r\n            // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\r\n            //     documentDataState, testCommentDataState } = inputData\r\n            // let url = \"resultentrybysample/getTestbasedParameter\"\r\n            switch (inputData.activeTestKey) {\r\n                case \"IDS_RESULTS\":\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    activeName = \"ResultUsedInstrument\"\r\n                    dataStateName = \"instrumentDataState\"\r\n                    break;\r\n                case \"IDS_MATERIAL\":\r\n                    activeName = \"ResultUsedMaterial\"\r\n                    dataStateName = \"materialDataState\"\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    activeName = \"ResultUsedTasks\"\r\n                    dataStateName = \"taskDataState\"\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    activeName = \"RegistrationTestAttachment\"\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    activeName = \"RegistrationTestComment\"\r\n                    dataStateName = \"testCommentDataState\"\r\n                    break;\r\n                case \"IDS_DOCUMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"documentDataState\"\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    activeName = \"ResultChangeHistory\"\r\n                    dataStateName = \"resultChangeDataState\"\r\n                    break;\r\n                case \"IDS_SAMPLEATTACHMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                default:\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n            }\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/completeTest\", inputParamData)\r\n                .then(response => {\r\n                    let RE_SAMPLE = [];\r\n                    let RE_SUBSAMPLE = [];\r\n                    let RE_TEST = [];\r\n                    let onlySampleService=false;\r\n                    let responseData =  sortData(response.data, 'ascending', 'ntransactionresultcode')//response.data\r\n                    //rules engine new subsample outcome --start ---\r\n                    let testcode= responseData[\"RE_TEST\"].map(test => test.npreregno).join(\",\");\r\n                    let sampleCode= responseData[\"RE_SUBSAMPLE\"].map(test => test.npreregno).join(\",\");\r\n                    inputData.masterData[\"searchedSample\"] && inputData.masterData[\"searchedSample\"].map(item=>{  \r\n                        if(!testcode.includes(String(item.npreregno)) && !sampleCode.includes(String(item.npreregno)) ){\r\n                            responseData[\"RE_TEST\"]=[];\r\n                            responseData[\"RE_SUBSAMPLE\"]=[];\r\n                            responseData[\"RESelectedSubSample\"]=[];\r\n                            responseData[\"RESelectedTest\"]=[];\r\n                            isSearched=true;\r\n                        }\r\n                    });\r\n                    let transactiontestcode=inputData.masterData[\"RE_TEST\"].map(test => test.ntransactiontestcode).join(\",\")\r\n                    responseData[\"RE_TEST\"]&& responseData[\"RE_TEST\"].forEach(element => {\r\n                            if(!transactiontestcode.includes(String(element.ntransactiontestcode))){\r\n                                inputData.masterData[\"RE_TEST\"].push(element);\r\n                            }\r\n                    });\r\n                    let transactionsamplecode=inputData.masterData[\"RE_SUBSAMPLE\"].map(item=>item.ntransactionsamplecode).join(\",\")\r\n                    responseData[\"RE_SUBSAMPLE\"] && responseData[\"RE_SUBSAMPLE\"].forEach(element => {\r\n                            if(!transactionsamplecode.includes(String(element.ntransactionsamplecode))){\r\n                                inputData.masterData[\"RE_SUBSAMPLE\"].push(element);\r\n                            }\r\n                    });\r\n                    //end--\r\n                    //Added\r\n                    if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\r\n                        inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\r\n                       }\r\n\r\n\r\n                    if (responseData[\"RE_TEST\"] && responseData[\"RE_TEST\"].length > 0) {\r\n                         //Added\r\n                        if (inputData.masterData.realRegSubTypeValue.nneedsubsample//.nneedsubsample\r\n                            )\r\n                            RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\");\r\n                        else\r\n                            RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"npreregno\");\r\n                    } else {\r\n                        RE_TEST = inputData.masterData[\"RE_TEST\"];\r\n                    }\r\n\r\n                    RE_SUBSAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"], RE_TEST, \"ntransactionsamplecode\");\r\n                    if (RE_SUBSAMPLE.length > 0) {\r\n                        // RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n                        RE_SAMPLE = replaceUpdatedObject( responseData[\"RE_SAMPLE\"],inputData.masterData[\"RE_SAMPLE\"] , \"npreregno\");\r\n                        //inputData.masterData[\"RE_SAMPLE\"];\r\n                         //Added\r\n                        let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \r\n                        let subSampleArray=RE_SUBSAMPLE.map(x=>x.npreregno);\r\n                        let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\r\n                        selectedSampleArray=selectedSampleArray.filter(item => subSampleArray.includes(item.npreregno)).map(x=>x.npreregno) \r\n                        let unwantedPreregno=  selectPreregNOBefore.filter(function (x) {\r\n                            return !selectedSampleArray.some(function (y) { \r\n                              return x  === y \r\n                            })\r\n                          }); \r\n                        RE_SAMPLE= RE_SAMPLE.filter(item => !unwantedPreregno.includes(item.npreregno))\r\n                        //RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\r\n                    } else {\r\n                        RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n\r\n                        RE_SAMPLE = filterRecordBasedOnTwoArrays(RE_SAMPLE, RE_TEST, \"npreregno\");\r\n                    }\r\n                  //  const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\r\n                  //Added\r\n                  const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] :  RE_SAMPLE\r\n\r\n                 \r\n\r\n                  let boolSelectedSubSample; \r\n                  let searchedSubSample = undefined; \r\n                  let RESelectedSubSample=[];\r\n                  let backfrontTest= getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\")\r\n                   if(inputData.masterData[\"searchedSubSample\"]){\r\n                       searchedSubSample =inputData.masterData[\"searchedSubSample\"]\r\n                       boolSelectedSubSample=searchedSubSample.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n\r\n                       let searchedSubSamplebefore=inputData.masterData[\"RESelectedSubSample\"].map(x=>x.ntransactionsamplecode);\r\n                       searchedSubSample= inputData.masterData[\"RESelectedSubSample\"].filter(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                       let searchedSubSampleaftere=searchedSubSample.map(x=>x.ntransactionsamplecode);\r\n                       let unwantedSamplecode=  searchedSubSamplebefore.filter(function (x) {\r\n                          return !searchedSubSampleaftere.some(function (y) { \r\n                            return x  === y \r\n                          })\r\n                        });  \r\n                        inputData.masterData[\"searchedSubSample\"]=inputData.masterData[\"searchedSubSample\"].filter(item => !unwantedSamplecode.includes(item.ntransactionsamplecode)) \r\n                    }else{\r\n                      boolSelectedSubSample=RE_SUBSAMPLE.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                    }\r\n                 \r\n                  if(inputData.masterData[\"searchedSubSample\"]//&&inputData.masterData[\"searchedSubSample\"].length>0\r\n                  ){\r\n                      RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :\r\n                      inputData.masterData[\"searchedSubSample\"][0]? [inputData.masterData[\"searchedSubSample\"][0]]:[]\r\n                  }else{\r\n                      RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :  RE_SUBSAMPLE\r\n                  }  \r\n                  //  const RESelectedSubSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\r\n                    let RESelectedTest1 = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"], acceptList, \"ntransactiontestcode\");\r\n                    let RESelectedTest2 = updatedObjectWithNewElement(RESelectedTest1, responseData.RESelectedTest)\r\n\r\n                    let searchedSample = undefined;\r\n                    if (inputData.masterData[\"searchedSample\"]) {\r\n                        RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"searchedSample\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n\r\n                        searchedSample = filterRecordBasedOnTwoArrays(RE_SAMPLE//inputData.masterData[\"searchedSample\"]\r\n                        ,\r\n                         RE_TEST, \"npreregno\");\r\n                         searchedSample=searchedSample.length>0?searchedSample:isSearched?[]:inputData.masterData[\"searchedSample\"];\r\n                    }\r\n\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        ...responseData,\r\n                        RE_SAMPLE,\r\n                        RE_SUBSAMPLE,\r\n                        RESelectedSubSample,\r\n                        searchedSample,\r\n                        RESelectedSample,\r\n \t\t\t\t\t\tRESelectedTest: RESelectedTest2,\r\n                         RESelectedTest: response.data.hasOwnProperty('RegistrationTestAlert')\r\n                         &&Object.keys(response.data['RegistrationTestAlert']).length !== 0\r\n                         ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&\r\n                         Object.keys(response.data['NewTestGroupTestAlert']).length !== 0?\r\n                         inputData.masterData[\"RESelectedTest\"]://RESelectedTest2\r\n                         inputData.masterData[\"searchedTest\"]&&\r\n                         inputData.masterData[\"searchedTest\"].length>0?[inputData.masterData[\"searchedTest\"][0]]: \r\n                         responseData.RESelectedTest\r\n                         ,\r\n                         \r\n                        //  RE_TEST:compareArrays(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"])?\r\n                        //  inputData.masterData[\"RE_TEST\"]: responseData[\"RE_TEST\"]\r\n                        RE_TEST: responseData[\"RE_TEST\"]\r\n                        \r\n                    }\r\n                    let skipInfo = {};\r\n                    // if (masterData.RE_SAMPLE && masterData.RE_SAMPLE.length <= inputParam.skip) { //ALPD-2230\r\n                    if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length == 0 && masterData.RE_TEST && masterData.RE_TEST.length == 0){\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            skip: 0,\r\n                            take: inputParam.take\r\n                        }\r\n                    }\r\n                    // }\r\n                    if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length <= inputParam.subSampleTake){\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            subSampleSkip: 0,\r\n                            subSampleTake: inputParam.subSampleTake\r\n                        }\r\n                    }\r\n                    if (masterData.RE_TEST && masterData.RE_TEST.length <= inputParam.testskip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            testskip: 0,\r\n                            testtake: inputParam.testtake\r\n                        }\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    let respObject = {\r\n                        RegistrationTestAlert: response.data.hasOwnProperty('RegistrationTestAlert')//&&response.data.RegistrationTestAlert.length>0\r\n                        ?response.data.RegistrationTestAlert:{},\r\n                        NewTestGroupTestAlert:response.data.hasOwnProperty('NewTestGroupTestAlert')//&&response.data.NewTestGroupTestAlert.length>0\r\n                        ?response.data.NewTestGroupTestAlert:{},\r\n                        showAlertGrid:response.data.hasOwnProperty('RegistrationTestAlert')&&Object.keys(response.data['RegistrationTestAlert']).length !== 0\r\n                        ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&Object.keys(response.data['NewTestGroupTestAlert']).length !== 0//&&response.data.RegistrationTestAlert.length>0||\r\n                       // response.data.hasOwnProperty('NewTestGroupTestAlert')&&response.data.NewTestGroupTestAlert.length>0\r\n                        ?true:false,\r\n                        showAlertForPredefined:false,\r\n                        additionalInfoView:false,\r\n                        ...inputParamData.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        //selectedRecord: undefined,\r\n                        loading: false,\r\n                        screenName: inputData.activeTestKey,\r\n                        ...skipInfo\r\n                    }\r\n                    if (searchedSample //&& RESelectedSample.length === 0 \r\n                        && searchedSample.length > 0) {\r\n                        const paramList = inputParam.postParamList[0];\r\n                        const inputParameter = {\r\n                            ...paramList.fecthInputObject.fecthInputObject,\r\n                            fetchUrl: paramList.fetchUrl,\r\n                            [paramList.primaryKeyField]: String(searchedSample[0][paramList.primaryKeyField]),\r\n                            ntype: 2,\r\n                            nflag: 2\r\n                        };\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData: {\r\n                                ...masterData,\r\n                                RESelectedSample: [searchedSample[0]]\r\n                            }\r\n                        }\r\n                       // dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                        dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                    } else if (!searchedSample && RESelectedSample.length === 0 && RE_SAMPLE.length > 0) {\r\n                        const paramList = inputParam.postParamList[0];\r\n                        const inputParameter = {\r\n                            ...paramList.fecthInputObject.fecthInputObject,\r\n                            fetchUrl: paramList.fetchUrl,\r\n                            [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                            ntype: 2,\r\n                            nflag: 2\r\n                        };\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData: {\r\n                                ...masterData,\r\n                                RESelectedSample: [RE_SAMPLE[0]]\r\n                            }\r\n                        }\r\n                        //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                        dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                    }else if (!searchedSample && RE_SAMPLE.length > 0) {\r\n                        let inputParameter \r\n                        if(RESelectedSample.length > 0 || RE_SUBSAMPLE.length > 0)\r\n                        {\r\n                            onlySampleService=true;\r\n                            let paramList = inputParam.postParamList[0];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 2,\r\n                                nflag: 2\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSample: [RE_SAMPLE[0]]\r\n                                }\r\n                            }\r\n                            //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        }\r\n\r\n                        if(boolSelectedSubSample===false?(boolSelectedSubSample===false&&onlySampleService===false&&RESelectedSubSample.length !== 0\r\n                            //&&!searchedSubSample\r\n                            )\r\n                        :(RESelectedSubSample.length === 0 && RE_SUBSAMPLE.length > 0))\r\n                        {\r\n                            let paramList = inputParam.postParamList[1];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 3,\r\n                                nflag: 3\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSubSample: [RE_SUBSAMPLE[0]]\r\n                                }\r\n                            }\r\n                            //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        } \r\n                        else {\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData\r\n                            };\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    ...respObject,\r\n                                    loading: false\r\n                                }\r\n                            });\r\n                        }\r\n\r\n\r\n                    }   \r\n                    else {\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData\r\n                        };\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                ...respObject,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                            toast.warn(error.response.data); \r\n                    }\r\n                })\r\n        }\r\n    } else {\r\n        toast.warn(intl.formatMessage({\r\n            id: \"IDS_SELECTTESTTOCOMPLETE\"\r\n        }));\r\n    }\r\n\r\n}*/\n// //Added by sonia on  24-07-2024 for Jira ID:ALPD-4649\n// export function completeTest(inputParam, acceptList, userInfo, completeResultId,booleanFlag,param) {\n//     if (acceptList !== undefined && acceptList.length > 0) {\n//         return function (dispatch) {\n//             let isSearched=false;\n//             let inputData = inputParam.testChildGetREParam\n//             let inputParamData = {\n//                 ntype: 3,\n//                // nflag: 2,\n//                ninsertMaterialInventoryTrans:inputParam.inputData.ninsertMaterialInventoryTrans,\n//                nportalrequired:inputParam.inputData.nportalrequired,\n//                 basedrulesengine:param.basedrulesengine,\n//                 nsampletypecode: inputData.nsampletypecode,\n//                 nregtypecode: inputData.nregtypecode,\n//                 nregsubtypecode: inputData.nregsubtypecode,\n//                 npreregno: inputData.npreregno,\n//                 ntranscode: String(inputData.ntransactionstatus),\n//                 napprovalversioncode: inputData.napprovalversioncode,\n//                 napprovalconfigcode: inputData.napprovalconfigcode,\n//                 ntransactionsamplecode: inputData.ntransactionsamplecode,\n//                 userinfo: userInfo,\n//                 fromdate: inputData.fromdate,\n//                 todate: inputData.todate,\n//                 ntestcode: inputData.ntestcode,\n//                 transactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\n//                 ntransactiontestcode: 0,\n//                 activeTestKey: inputData.activeTestKey,\n//                 ncontrolcode: inputParam.inputData.ncontrolcode,\n//                 nneedsubsample: inputData.masterData.nneedsubsample,\n//                 ndesigntemplatemappingcode: inputData.masterData.ndesigntemplatemappingcode,\n//                 checkBoxOperation:checkBoxOperation.SINGLESELECT,\n//                 nsettingcode:  inputParam.nsettingcode,\n//                 nusercode: inputParam.nusercode,\n//                 susername:  inputParam.susername,\n//                 nneedReceivedInLab:inputParam.inputData.nneedReceivedInLab\n//             }\n//             let activeName = \"\";\n//             let dataStateName = \"\";\n//             // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\n//             //     documentDataState, testCommentDataState } = inputData\n//             // let url = \"resultentrybysample/getTestbasedParameter\"\n//             switch (inputData.activeTestKey) {\n//                 case \"IDS_RESULTS\":\n//                     activeName = \"TestParameters\"\n//                     dataStateName = \"resultDataState\"\n//                     break;\n//                 case \"IDS_INSTRUMENT\":\n//                     activeName = \"ResultUsedInstrument\"\n//                     dataStateName = \"instrumentDataState\"\n//                     break;\n//                 case \"IDS_MATERIAL\":\n//                     activeName = \"ResultUsedMaterial\"\n//                     dataStateName = \"materialDataState\"\n//                     break;\n//                 case \"IDS_TASK\":\n//                     activeName = \"ResultUsedTasks\"\n//                     dataStateName = \"taskDataState\"\n//                     break;\n//                 case \"IDS_TESTATTACHMENTS\":\n//                     activeName = \"RegistrationTestAttachment\"\n//                     break;\n//                 case \"IDS_TESTCOMMENTS\":\n//                     activeName = \"RegistrationTestComment\"\n//                     dataStateName = \"testCommentDataState\"\n//                     break;\n//                 case \"IDS_DOCUMENTS\":\n//                     activeName = \"\"\n//                     dataStateName = \"documentDataState\"\n//                     break;\n//                 case \"IDS_RESULTCHANGEHISTORY\":\n//                     activeName = \"ResultChangeHistory\"\n//                     dataStateName = \"resultChangeDataState\"\n//                     break;\n//                 case \"IDS_SAMPLEATTACHMENTS\":\n//                     activeName = \"\"\n//                     dataStateName = \"resultDataState\"\n//                     break;\n//                 default:\n//                     activeName = \"TestParameters\"\n//                     dataStateName = \"resultDataState\"\n//                     break;\n//             }\n//             dispatch(initRequest(true));\n//             rsapi.post(\"resultentrybysample/completeTest\", inputParamData)\n//                 .then(response => {\n//                     if(!response.data.hasOwnProperty(\"ruleFlag\")){\n//                         let RE_SAMPLE = [];\n//                         let RE_SUBSAMPLE = [];\n//                         let RE_TEST = [];\n//                         let onlySampleService=false;\n//                         let responseData =  sortData(response.data, 'ascending', 'ntransactionresultcode')//response.data\n//                         //rules engine new subsample outcome --start ---\n//                         let testcode= responseData[\"RE_TEST\"].map(test => test.npreregno).join(\",\");\n//                         let sampleCode= responseData[\"RE_SUBSAMPLE\"].map(test => test.npreregno).join(\",\");\n//                         inputData.masterData[\"searchedSample\"] && inputData.masterData[\"searchedSample\"].map(item=>{  \n//                             if(!testcode.includes(String(item.npreregno)) && !sampleCode.includes(String(item.npreregno)) ){\n//                                 responseData[\"RE_TEST\"]=[];\n//                                 responseData[\"RE_SUBSAMPLE\"]=[];\n//                                 responseData[\"RESelectedSubSample\"]=[];\n//                                 responseData[\"RESelectedTest\"]=[];\n//                                 isSearched=true;\n//                             }\n//                         });\n//                         let transactiontestcode=inputData.masterData[\"RE_TEST\"].map(test => test.ntransactiontestcode).join(\",\")\n//                         responseData[\"RE_TEST\"]&& responseData[\"RE_TEST\"].forEach(element => {\n//                             if(!transactiontestcode.includes(String(element.ntransactiontestcode))){\n//                                 inputData.masterData[\"RE_TEST\"].push(element);\n//                             }\n//                         });\n//                         let transactionsamplecode=inputData.masterData[\"RE_SUBSAMPLE\"].map(item=>item.ntransactionsamplecode).join(\",\")\n//                         responseData[\"RE_SUBSAMPLE\"] && responseData[\"RE_SUBSAMPLE\"].forEach(element => {\n//                             if(!transactionsamplecode.includes(String(element.ntransactionsamplecode))){\n//                                 inputData.masterData[\"RE_SUBSAMPLE\"].push(element);\n//                             }\n//                         });\n//                         //end--\n//                         //Added\n//                         if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\n//                             inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\n//                         }\n//                         if (responseData[\"RE_TEST\"] && responseData[\"RE_TEST\"].length > 0) {\n//                             //Added\n//                             if (inputData.masterData.realRegSubTypeValue.nneedsubsample//.nneedsubsample\n//                             )\n//                                 RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\");\n//                             else\n//                                 RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"npreregno\");\n//                         } else {\n//                             RE_TEST = inputData.masterData[\"RE_TEST\"];\n//                         }\n//                         RE_SUBSAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"], RE_TEST, \"ntransactionsamplecode\");\n//                         if (RE_SUBSAMPLE.length > 0) {\n//                             // RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\n//                             RE_SAMPLE = replaceUpdatedObject( responseData[\"RE_SAMPLE\"],inputData.masterData[\"RE_SAMPLE\"] , \"npreregno\");\n//                             //inputData.masterData[\"RE_SAMPLE\"];\n//                             //Added\n//                             let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \n//                             let subSampleArray=RE_SUBSAMPLE.map(x=>x.npreregno);\n//                             let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\n//                             selectedSampleArray=selectedSampleArray.filter(item => subSampleArray.includes(item.npreregno)).map(x=>x.npreregno) \n//                             let unwantedPreregno=  selectPreregNOBefore.filter(function (x) {\n//                                 return !selectedSampleArray.some(function (y) { \n//                                 return x  === y \n//                                 })\n//                             }); \n//                             RE_SAMPLE= RE_SAMPLE.filter(item => !unwantedPreregno.includes(item.npreregno))\n//                             //RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\n//                         } else {\n//                             RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\n//                             RE_SAMPLE = filterRecordBasedOnTwoArrays(RE_SAMPLE, RE_TEST, \"npreregno\");\n//                         }\n//                         //  const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\n//                         //Added\n//                         const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] :  RE_SAMPLE\n//                         let boolSelectedSubSample; \n//                         let searchedSubSample = undefined; \n//                         let RESelectedSubSample=[];\n//                         let backfrontTest= getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\")\n//                         if(inputData.masterData[\"searchedSubSample\"]){\n//                             searchedSubSample =inputData.masterData[\"searchedSubSample\"]\n//                             boolSelectedSubSample=searchedSubSample.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \n//                             let searchedSubSamplebefore=inputData.masterData[\"RESelectedSubSample\"].map(x=>x.ntransactionsamplecode);\n//                             searchedSubSample= inputData.masterData[\"RESelectedSubSample\"].filter(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \n//                             let searchedSubSampleaftere=searchedSubSample.map(x=>x.ntransactionsamplecode);\n//                             let unwantedSamplecode=  searchedSubSamplebefore.filter(function (x) {\n//                                 return !searchedSubSampleaftere.some(function (y) { \n//                                 return x  === y \n//                                 })\n//                             });  \n//                             inputData.masterData[\"searchedSubSample\"]=inputData.masterData[\"searchedSubSample\"].filter(item => !unwantedSamplecode.includes(item.ntransactionsamplecode)) \n//                         }else{\n//                             boolSelectedSubSample=RE_SUBSAMPLE.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \n//                         }\n//                         if(inputData.masterData[\"searchedSubSample\"]//&&inputData.masterData[\"searchedSubSample\"].length>0\n//                         ){\n//                             RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :\n//                             inputData.masterData[\"searchedSubSample\"][0]? [inputData.masterData[\"searchedSubSample\"][0]]:[]\n//                         }else{\n//                             RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :  RE_SUBSAMPLE\n//                         }  \n//                         //  const RESelectedSubSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\n//                         let RESelectedTest1 = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"], acceptList, \"ntransactiontestcode\");\n//                         let RESelectedTest2 = updatedObjectWithNewElement(RESelectedTest1, responseData.RESelectedTest)\n//                         let searchedSample = undefined;\n//                         if (inputData.masterData[\"searchedSample\"]) {\n//                             RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"searchedSample\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\n//                             searchedSample = filterRecordBasedOnTwoArrays(RE_SAMPLE//inputData.masterData[\"searchedSample\"]\n//                             ,\n//                             RE_TEST, \"npreregno\");\n//                             searchedSample=searchedSample.length>0?searchedSample:isSearched?[]:inputData.masterData[\"searchedSample\"];\n//                         }\n//                         let masterData = {\n//                             ...inputData.masterData,\n//                             ...responseData,\n//                             RE_SAMPLE,\n//                             RE_SUBSAMPLE,\n//                             RESelectedSubSample,\n//                             searchedSample,\n//                             RESelectedSample,\n//                             RESelectedTest: RESelectedTest2,\n//                             RESelectedTest: response.data.hasOwnProperty('RegistrationTestAlert')\n//                             &&Object.keys(response.data['RegistrationTestAlert']).length !== 0\n//                             ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&\n//                             Object.keys(response.data['NewTestGroupTestAlert']).length !== 0?\n//                             inputData.masterData[\"RESelectedTest\"]://RESelectedTest2\n//                             inputData.masterData[\"searchedTest\"]&&\n//                             inputData.masterData[\"searchedTest\"].length>0?[inputData.masterData[\"searchedTest\"][0]]: \n//                             responseData.RESelectedTest\n//                             ,\n//                             //  RE_TEST:compareArrays(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"])?\n//                             //  inputData.masterData[\"RE_TEST\"]: responseData[\"RE_TEST\"]\n//                             RE_TEST: responseData[\"RE_TEST\"]\n//                         }\n//                         let skipInfo = {};\n//                         // if (masterData.RE_SAMPLE && masterData.RE_SAMPLE.length <= inputParam.skip) { //ALPD-2230\n//                         if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length == 0 && masterData.RE_TEST && masterData.RE_TEST.length == 0){\n//                             skipInfo = {\n//                                 ...skipInfo,\n//                                 skip: 0,\n//                                 take: inputParam.take\n//                             }\n//                         }\n//                         // }\n//                         if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length <= inputParam.subSampleTake){\n//                             skipInfo = {\n//                                 ...skipInfo,\n//                                 subSampleSkip: 0,\n//                                 subSampleTake: inputParam.subSampleTake\n//                             }\n//                         }\n//                         if (masterData.RE_TEST && masterData.RE_TEST.length <= inputParam.testskip) {\n//                             skipInfo = {\n//                                 ...skipInfo,\n//                                 testskip: 0,\n//                                 testtake: inputParam.testtake\n//                             }\n//                         }\n//                         if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n//                             skipInfo = {\n//                                 ...skipInfo,\n//                                 [dataStateName]: {\n//                                     ...inputData[dataStateName],\n//                                     skip: 0,\n//                                     sort: undefined,\n//                                     filter: undefined\n//                                 }\n//                             }\n//                         } else {\n//                             skipInfo = {\n//                                 ...skipInfo,\n//                                 [dataStateName]: {\n//                                     ...inputData[dataStateName],\n//                                     sort: undefined,\n//                                     filter: undefined\n//                                 }\n//                             }\n//                         }\n//                         let respObject = {\n//                             RegistrationTestAlert: response.data.hasOwnProperty('RegistrationTestAlert')//&&response.data.RegistrationTestAlert.length>0\n//                             ?response.data.RegistrationTestAlert:{},\n//                             NewTestGroupTestAlert:response.data.hasOwnProperty('NewTestGroupTestAlert')//&&response.data.NewTestGroupTestAlert.length>0\n//                             ?response.data.NewTestGroupTestAlert:{},\n//                             showAlertGrid:response.data.hasOwnProperty('RegistrationTestAlert')&&Object.keys(response.data['RegistrationTestAlert']).length !== 0\n//                             ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&Object.keys(response.data['NewTestGroupTestAlert']).length !== 0//&&response.data.RegistrationTestAlert.length>0||\n//                         // response.data.hasOwnProperty('NewTestGroupTestAlert')&&response.data.NewTestGroupTestAlert.length>0\n//                             ?true:false,\n//                             showAlertForPredefined:false,\n//                             additionalInfoView:false,\n//                             ...inputParamData.inputData,\n//                             openModal: false,\n//                             loadEsign: false,\n//                             showConfirmAlert: false,\n//                             //selectedRecord: undefined,\n//                             loading: false,\n//                             screenName: inputData.activeTestKey,\n//                             ...skipInfo\n//                         }\n//                         if (searchedSample //&& RESelectedSample.length === 0 \n//                         && searchedSample.length > 0) {\n//                             const paramList = inputParam.postParamList[0];\n//                             const inputParameter = {\n//                                 ...paramList.fecthInputObject.fecthInputObject,\n//                                 fetchUrl: paramList.fetchUrl,\n//                                 [paramList.primaryKeyField]: String(searchedSample[0][paramList.primaryKeyField]),\n//                                 ntype: 2,\n//                                 nflag: 2\n//                             };\n//                             respObject = {\n//                                 ...respObject,\n//                                 masterData: {\n//                                     ...masterData,\n//                                     RESelectedSample: [searchedSample[0]]\n//                                 }\n//                             }\n//                         // dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n//                             dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\n//                         } else if (!searchedSample && RESelectedSample.length === 0 && RE_SAMPLE.length > 0) {\n//                             const paramList = inputParam.postParamList[0];\n//                             const inputParameter = {\n//                                 ...paramList.fecthInputObject.fecthInputObject,\n//                                 fetchUrl: paramList.fetchUrl,\n//                                 [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\n//                                 ntype: 2,\n//                                 nflag: 2\n//                             };\n//                             respObject = {\n//                                 ...respObject,\n//                                 masterData: {\n//                                     ...masterData,\n//                                     RESelectedSample: [RE_SAMPLE[0]]\n//                                 }\n//                             }\n//                             //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n//                             dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\n//                         }else if (!searchedSample && RE_SAMPLE.length > 0) {\n//                             let inputParameter \n//                             if(RESelectedSample.length > 0 || RE_SUBSAMPLE.length > 0)\n//                             {\n//                                 onlySampleService=true;\n//                                 let paramList = inputParam.postParamList[0];\n//                                 inputParameter = {\n//                                     ...paramList.fecthInputObject.fecthInputObject,\n//                                     fetchUrl: paramList.fetchUrl,\n//                                     [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\n//                                     ntype: 2,\n//                                     nflag: 2\n//                                 };\n//                                 respObject = {\n//                                     ...respObject,\n//                                     masterData: {\n//                                         ...masterData,\n//                                         RESelectedSample: [RE_SAMPLE[0]]\n//                                     }\n//                                 }\n//                                 //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n//                                 dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\n//                             }\n//                             if(boolSelectedSubSample===false?(boolSelectedSubSample===false&&onlySampleService===false&&RESelectedSubSample.length !== 0\n//                             //&&!searchedSubSample\n//                             )\n//                             :(RESelectedSubSample.length === 0 && RE_SUBSAMPLE.length > 0))\n//                             {   \n//                                 let paramList = inputParam.postParamList[1];\n//                                 inputParameter = {\n//                                     ...paramList.fecthInputObject,\n//                                     fetchUrl: paramList.fetchUrl,\n//                                     [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\n//                                     ntype: 3,\n//                                     nflag: 3\n//                                 };\n//                                 respObject = {\n//                                     ...respObject,\n//                                     masterData: {\n//                                         ...masterData,\n//                                         RESelectedSubSample: [RE_SUBSAMPLE[0]]\n//                                     }\n//                                 }\n//                                 //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n//                                 dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\n//                             } \n//                             else {\n//                                 respObject = {\n//                                     ...respObject,\n//                                     masterData\n//                                 };\n//                                 dispatch({\n//                                     type: DEFAULT_RETURN,\n//                                     payload: {\n//                                         ...respObject,\n//                                         loading: false\n//                                     }\n//                                 });\n//                             }\n//                         }   \n//                         else {\n//                             respObject = {\n//                                 ...respObject,\n//                                 masterData\n//                             };\n//                             dispatch({\n//                                 type: DEFAULT_RETURN,\n//                                 payload: {\n//                                     ...respObject,\n//                                     loading: false\n//                                 }\n//                             });\n//                         }\n//                     }else {\n//                         let respObject = {\n//                             RegistrationTestAlert: response.data.hasOwnProperty('RegistrationTestAlert')\n//                             ?response.data.RegistrationTestAlert:{},\n//                             NewTestGroupTestAlert:response.data.hasOwnProperty('NewTestGroupTestAlert')\n//                             ?response.data.NewTestGroupTestAlert:{},\n//                             showAlertGrid:response.data.hasOwnProperty('RegistrationTestAlert')&&Object.keys(response.data['RegistrationTestAlert']).length !== 0\n//                             ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&Object.keys(response.data['NewTestGroupTestAlert']).length !== 0\n//                             ?true:false,\n//                             showAlertForPredefined:false,\n//                             additionalInfoView:false,\n//                             ...inputParamData.inputData,\n//                             openModal: false,\n//                             loadEsign: false,\n//                             showConfirmAlert: false,\n//                             loading: false,\n//                             screenName: inputData.activeTestKey,\n//                         }\n//                         const  masterData= {                        \n//                             ...inputData.masterData                                     \n//                         }                       \n//                         dispatch({\n//                             type: DEFAULT_RETURN,\n//                                 payload: {\n//                                     masterData,\n//                                     ...respObject, \n//                                     loading: false\n//                                 }\n//                         });\n//                     }\n//                 })\n//                 .catch(error => {\n//                     dispatch({\n//                         type: DEFAULT_RETURN,\n//                         payload: {\n//                             loading: false\n//                         }\n//                     })\n//                     if (error.response.status === 500) {\n//                         toast.error(error.message);\n//                     } else {\n//                             toast.warn(error.response.data); \n//                     }\n//                 })\n//         }\n//     } else {\n//         toast.warn(intl.formatMessage({\n//             id: \"IDS_SELECTTESTTOCOMPLETE\"\n//         }));\n//     }\n// }\n\nexport function completeTest(inputParam, acceptList, userInfo, completeResultId, booleanFlag, param) {\n  if (acceptList !== undefined && acceptList.length > 0) {\n    return function (dispatch) {\n      let isSearched = false;\n      let inputData = inputParam.testChildGetREParam;\n      let inputParamData = {\n        ntype: 3,\n        nflag: 3,\n        ninsertMaterialInventoryTrans: inputParam.inputData.ninsertMaterialInventoryTrans,\n        nportalrequired: inputParam.inputData.nportalrequired,\n        basedrulesengine: param.basedrulesengine,\n        nsampletypecode: inputData.nsampletypecode,\n        nregtypecode: inputData.nregtypecode,\n        nregsubtypecode: inputData.nregsubtypecode,\n        npreregno: inputData.npreregno,\n        ntranscode: String(inputData.ntransactionstatus),\n        napprovalversioncode: inputData.napprovalversioncode,\n        napprovalconfigcode: inputData.napprovalconfigcode,\n        ntransactionsamplecode: inputData.ntransactionsamplecode,\n        userinfo: userInfo,\n        fromdate: inputData.fromdate,\n        todate: inputData.todate,\n        ntestcode: inputData.ntestcode,\n        transactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\n        ntransactiontestcode: 0,\n        activeTestKey: inputData.activeTestKey,\n        ncontrolcode: inputParam.inputData.ncontrolcode,\n        nneedsubsample: inputData.masterData.nneedsubsample,\n        ndesigntemplatemappingcode: inputData.masterData.ndesigntemplatemappingcode,\n        checkBoxOperation: checkBoxOperation.SINGLESELECT,\n        nsettingcode: inputParam.nsettingcode,\n        nusercode: inputParam.nusercode,\n        susername: inputParam.susername,\n        nneedReceivedInLab: inputParam.inputData.nneedReceivedInLab\n      };\n      let activeName = \"\";\n      let dataStateName = \"\"; // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\n      //     documentDataState, testCommentDataState } = inputData\n      // let url = \"resultentrybysample/getTestbasedParameter\"\n\n      switch (inputData.activeTestKey) {\n        case \"IDS_RESULTS\":\n          activeName = \"TestParameters\";\n          dataStateName = \"resultDataState\";\n          break;\n\n        case \"IDS_INSTRUMENT\":\n          activeName = \"ResultUsedInstrument\";\n          dataStateName = \"instrumentDataState\";\n          break;\n\n        case \"IDS_MATERIAL\":\n          activeName = \"ResultUsedMaterial\";\n          dataStateName = \"materialDataState\";\n          break;\n\n        case \"IDS_TASK\":\n          activeName = \"ResultUsedTasks\";\n          dataStateName = \"taskDataState\";\n          break;\n\n        case \"IDS_TESTATTACHMENTS\":\n          activeName = \"RegistrationTestAttachment\";\n          break;\n\n        case \"IDS_TESTCOMMENTS\":\n          activeName = \"RegistrationTestComment\";\n          dataStateName = \"testCommentDataState\";\n          break;\n\n        case \"IDS_DOCUMENTS\":\n          activeName = \"\";\n          dataStateName = \"documentDataState\";\n          break;\n\n        case \"IDS_RESULTCHANGEHISTORY\":\n          activeName = \"ResultChangeHistory\";\n          dataStateName = \"resultChangeDataState\";\n          break;\n\n        case \"IDS_SAMPLEATTACHMENTS\":\n          activeName = \"\";\n          dataStateName = \"resultDataState\";\n          break;\n\n        default:\n          activeName = \"TestParameters\";\n          dataStateName = \"resultDataState\";\n          break;\n      }\n\n      dispatch(initRequest(true));\n      rsapi.post(\"resultentrybysample/completeTest\", inputParamData).then(response => {\n        let RE_SAMPLE = [];\n        let RE_SUBSAMPLE = [];\n        let RE_TEST = [];\n        let onlySampleService = false;\n        let responseData = sortData(response.data, 'ascending', 'ntransactionresultcode'); //response.data\n        //rules engine new subsample outcome --start ---\n        // let testcode= responseData[\"RE_TEST\"].map(test => test.npreregno).join(\",\");\n        // let sampleCode= responseData[\"RE_SUBSAMPLE\"].map(test => test.npreregno).join(\",\");\n        // inputData.masterData[\"searchedSample\"] && inputData.masterData[\"searchedSample\"].map(item=>{  \n        //     if(!testcode.includes(String(item.npreregno)) && !sampleCode.includes(String(item.npreregno)) ){\n        //         responseData[\"RE_TEST\"]=[];\n        //         responseData[\"RE_SUBSAMPLE\"]=[];\n        //         responseData[\"RESelectedSubSample\"]=[];\n        //         responseData[\"RESelectedTest\"]=[];\n        //         isSearched=true;\n        //     }\n        // });\n        // let transactiontestcode=inputData.masterData[\"RE_TEST\"].map(test => test.ntransactiontestcode).join(\",\")\n        // responseData[\"RE_TEST\"]&& responseData[\"RE_TEST\"].forEach(element => {\n        //         if(!transactiontestcode.includes(String(element.ntransactiontestcode))){\n        //             inputData.masterData[\"RE_TEST\"].push(element);\n        //         }\n        // });\n        // let transactionsamplecode=inputData.masterData[\"RE_SUBSAMPLE\"].map(item=>item.ntransactionsamplecode).join(\",\")\n        // responseData[\"RE_SUBSAMPLE\"] && responseData[\"RE_SUBSAMPLE\"].forEach(element => {\n        //         if(!transactionsamplecode.includes(String(element.ntransactionsamplecode))){\n        //             inputData.masterData[\"RE_SUBSAMPLE\"].push(element);\n        //         }\n        // });\n        //end--\n        //Added\n\n        if (inputData.masterData[\"searchedTest\"] && responseData[\"RE_TEST\"]) {\n          inputData.masterData[\"searchedTest\"] = getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"], responseData[\"RE_TEST\"], \"ntransactiontestcode\");\n        }\n\n        if (responseData[\"RE_TEST\"] && responseData[\"RE_TEST\"].length > 0) {\n          //Added\n          if (inputData.masterData.realRegSubTypeValue.nneedsubsample //.nneedsubsample\n          ) {\n            //ALPD-4828\n            //Result entry-->sample disappeared when complete the single test\n            if (responseData.getNewSample) {\n              RE_TEST = responseData[\"RE_TEST\"];\n            } else {\n              RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\");\n            }\n          } else RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"npreregno\");\n        } else {\n          RE_TEST = inputData.masterData[\"RE_TEST\"];\n        } //ALPD-4828 neeraj\n        //Result entry-->sample disappeared when complete the single test\n\n\n        if (responseData.getNewSample) {\n          RE_SUBSAMPLE = responseData[\"RE_SUBSAMPLE\"];\n        } else {\n          RE_SUBSAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"], RE_TEST, \"ntransactionsamplecode\");\n        }\n\n        if (RE_SUBSAMPLE.length > 0) {\n          // RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\n          RE_SAMPLE = replaceUpdatedObject(responseData[\"RE_SAMPLE\"], inputData.masterData[\"RE_SAMPLE\"], \"npreregno\"); //inputData.masterData[\"RE_SAMPLE\"];\n          //Added\n\n          let selectedSampleArray = inputData.masterData[\"RESelectedSample\"];\n          let subSampleArray = RE_SUBSAMPLE.map(x => x.npreregno);\n          let selectPreregNOBefore = selectedSampleArray.map(x => x.npreregno);\n          selectedSampleArray = selectedSampleArray.filter(item => subSampleArray.includes(item.npreregno)).map(x => x.npreregno);\n          let unwantedPreregno = selectPreregNOBefore.filter(function (x) {\n            return !selectedSampleArray.some(function (y) {\n              return x === y;\n            });\n          });\n          RE_SAMPLE = RE_SAMPLE.filter(item => !unwantedPreregno.includes(item.npreregno)); //RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\n        } else {\n          RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"], responseData[\"RE_SAMPLE\"], \"npreregno\");\n\n          if (RE_SAMPLE && RE_SAMPLE.length > 0) {\n            RE_SAMPLE = filterRecordBasedOnTwoArrays(RE_SAMPLE, RE_TEST, \"npreregno\");\n          } else {\n            RE_SAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"], inputData.masterData[\"RESelectedTest\"], \"npreregno\");\n          }\n        } //  const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\n        //Added\n        //   const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] :  RE_SAMPLE\n\n\n        const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] : filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\n        let boolSelectedSubSample;\n        let searchedSubSample = undefined;\n        let RESelectedSubSample = [];\n        let backfrontTest = getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactiontestcode\");\n\n        if (inputData.masterData[\"searchedSubSample\"]) {\n          searchedSubSample = inputData.masterData[\"searchedSubSample\"];\n          boolSelectedSubSample = searchedSubSample.some(objx => backfrontTest.some(objy => objx['ntransactionsamplecode'] === objy['ntransactionsamplecode']));\n          let searchedSubSamplebefore = inputData.masterData[\"RESelectedSubSample\"].map(x => x.ntransactionsamplecode);\n          searchedSubSample = inputData.masterData[\"RESelectedSubSample\"].filter(objx => backfrontTest.some(objy => objx['ntransactionsamplecode'] === objy['ntransactionsamplecode']));\n          let searchedSubSampleaftere = searchedSubSample.map(x => x.ntransactionsamplecode);\n          let unwantedSamplecode = searchedSubSamplebefore.filter(function (x) {\n            return !searchedSubSampleaftere.some(function (y) {\n              return x === y;\n            });\n          });\n          inputData.masterData[\"searchedSubSample\"] = inputData.masterData[\"searchedSubSample\"].filter(item => !unwantedSamplecode.includes(item.ntransactionsamplecode));\n        } else {\n          boolSelectedSubSample = RE_SUBSAMPLE.some(objx => backfrontTest.some(objy => objx['ntransactionsamplecode'] === objy['ntransactionsamplecode']));\n        }\n\n        if (inputData.masterData[\"searchedSubSample\"] //&&inputData.masterData[\"searchedSubSample\"].length>0\n        ) {\n          RESelectedSubSample = boolSelectedSubSample ? inputData.masterData[\"RESelectedSubSample\"] : inputData.masterData[\"searchedSubSample\"][0] ? [inputData.masterData[\"searchedSubSample\"][0]] : [];\n        } else {\n          //ALPD-4828 neeraj\n          //Result entry-->sample disappeared when complete the single test\n          RESelectedSubSample = boolSelectedSubSample ? inputData.masterData[\"RESelectedSubSample\"] : responseData.getNewSample ? responseData[\"RESelectedSubSample\"] : RE_SUBSAMPLE;\n        } //  const RESelectedSubSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\n\n\n        let RESelectedTest1 = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"], acceptList, \"ntransactiontestcode\");\n        let RESelectedTest2 = updatedObjectWithNewElement(RESelectedTest1, responseData.RESelectedTest);\n        let searchedSample = undefined; // if (inputData.masterData[\"searchedSample\"]) {\n        //     RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"searchedSample\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\n        //     searchedSample = filterRecordBasedOnTwoArrays(RE_SAMPLE//inputData.masterData[\"searchedSample\"]\n        //     ,\n        //      RE_TEST, \"npreregno\");\n        //     //  searchedSample=searchedSample.length>0?searchedSample:isSearched?[]:inputData.masterData[\"searchedSample\"];\n        // }\n\n        if (inputData.masterData[\"searchedSample\"]) {\n          if (RESelectedSample && RESelectedSample.length > 0) {\n            searchedSample = inputData.masterData[\"searchedSample\"];\n          } else {\n            searchedSample = undefined;\n          } // searchedSample = filterRecordBasedOnTwoArrays(RE_SAMPLE, RE_TEST, \"npreregno\");\n          //  searchedSample=searchedSample.length>0?searchedSample:isSearched?[]:inputData.masterData[\"searchedSample\"];\n\n        }\n\n        if (searchedSample && searchedSample.length > 0 && RE_SAMPLE && RE_SAMPLE.length > 0) {\n          searchedSample = getSameRecordFromTwoArrays(searchedSample, RE_SAMPLE, \"npreregno\");\n        }\n\n        let masterData = { ...inputData.masterData,\n          ...responseData,\n          RE_SAMPLE,\n          RE_SUBSAMPLE,\n          RESelectedSubSample,\n          searchedSample,\n          RESelectedSample,\n          RESelectedTest: RESelectedTest2,\n          RESelectedTest: response.data.hasOwnProperty('RegistrationTestAlert') && Object.keys(response.data['RegistrationTestAlert']).length !== 0 || response.data.hasOwnProperty('NewTestGroupTestAlert') && Object.keys(response.data['NewTestGroupTestAlert']).length !== 0 ? inputData.masterData[\"RESelectedTest\"] : //RESelectedTest2\n          inputData.masterData[\"searchedTest\"] && inputData.masterData[\"searchedTest\"].length > 0 ? [inputData.masterData[\"searchedTest\"][0]] : responseData.RESelectedTest,\n          //  RE_TEST:compareArrays(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"])?\n          //  inputData.masterData[\"RE_TEST\"]: responseData[\"RE_TEST\"]\n          RE_TEST: responseData[\"RE_TEST\"]\n        };\n        let skipInfo = {}; // if (masterData.RE_SAMPLE && masterData.RE_SAMPLE.length <= inputParam.skip) { //ALPD-2230\n\n        if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length == 0 && masterData.RE_TEST && masterData.RE_TEST.length == 0) {\n          skipInfo = { ...skipInfo,\n            skip: 0,\n            take: inputParam.take\n          };\n        } // }\n\n\n        if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length <= inputParam.subSampleTake) {\n          skipInfo = { ...skipInfo,\n            subSampleSkip: 0,\n            subSampleTake: inputParam.subSampleTake\n          };\n        }\n\n        if (masterData.RE_TEST && masterData.RE_TEST.length <= inputParam.testskip) {\n          skipInfo = { ...skipInfo,\n            testskip: 0,\n            testtake: inputParam.testtake\n          };\n        }\n\n        if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        let respObject = {\n          RegistrationTestAlert: response.data.hasOwnProperty('RegistrationTestAlert') //&&response.data.RegistrationTestAlert.length>0\n          ? response.data.RegistrationTestAlert : {},\n          NewTestGroupTestAlert: response.data.hasOwnProperty('NewTestGroupTestAlert') //&&response.data.NewTestGroupTestAlert.length>0\n          ? response.data.NewTestGroupTestAlert : {},\n          showAlertGrid: response.data.hasOwnProperty('RegistrationTestAlert') && Object.keys(response.data['RegistrationTestAlert']).length !== 0 || response.data.hasOwnProperty('NewTestGroupTestAlert') && Object.keys(response.data['NewTestGroupTestAlert']).length !== 0 //&&response.data.RegistrationTestAlert.length>0||\n          // response.data.hasOwnProperty('NewTestGroupTestAlert')&&response.data.NewTestGroupTestAlert.length>0\n          ? true : false,\n          showAlertForPredefined: false,\n          additionalInfoView: false,\n          ...inputParamData.inputData,\n          openModal: false,\n          loadEsign: false,\n          showConfirmAlert: false,\n          //selectedRecord: undefined,\n          loading: false,\n          screenName: inputData.activeTestKey,\n          ...skipInfo\n        };\n\n        if (searchedSample //&& RESelectedSample.length === 0 \n        && searchedSample.length > 0) {\n          if (RE_SUBSAMPLE && RE_SUBSAMPLE.length > 0) {\n            if (masterData.RE_TEST && masterData.RE_TEST.length === 0) {\n              let paramList = inputParam.postParamList[1];\n              let inputParameter = { ...paramList.fecthInputObject,\n                fetchUrl: paramList.fetchUrl,\n                [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\n                ntype: 3,\n                nflag: 3\n              };\n              respObject = { ...respObject,\n                masterData: { ...masterData,\n                  RESelectedSubSample: [RE_SUBSAMPLE[0]]\n                }\n              }; //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n\n              if (inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null) {\n                inputParam.searchSubSampleRef.current.value = \"\";\n              }\n\n              if (inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null) {\n                inputParam.searchTestRef.current.value = \"\";\n              }\n\n              dispatch(fetchSelectedData({ ...inputParameter,\n                checkBoxOperation: checkBoxOperation.SINGLESELECT\n              }, respObject));\n            } else {\n              respObject = { ...respObject,\n                masterData\n              };\n              dispatch({\n                type: DEFAULT_RETURN,\n                payload: { ...respObject,\n                  loading: false\n                }\n              });\n            }\n          } else if (masterData.RE_TEST && masterData.RE_TEST.length === 0) {\n            const paramList = inputParam.postParamList[0];\n            const inputParameter = { ...paramList.fecthInputObject.fecthInputObject,\n              fetchUrl: paramList.fetchUrl,\n              [paramList.primaryKeyField]: String(searchedSample[0][paramList.primaryKeyField]),\n              ntype: 2,\n              nflag: 2\n            };\n            respObject = { ...respObject,\n              masterData: { ...masterData,\n                RESelectedSample: [searchedSample[0]]\n              }\n            }; // dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n\n            if (inputParam.searchSampleRef !== undefined && inputParam.searchSampleRef.current !== null) {\n              inputParam.searchSampleRef.current.value = \"\";\n            }\n\n            if (inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null) {\n              inputParam.searchSubSampleRef.current.value = \"\";\n            }\n\n            if (inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null) {\n              inputParam.searchTestRef.current.value = \"\";\n            }\n\n            dispatch(fetchSelectedData({ ...inputParameter,\n              checkBoxOperation: checkBoxOperation.SINGLESELECT\n            }, respObject));\n          } else {\n            respObject = { ...respObject,\n              masterData\n            };\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: { ...respObject,\n                loading: false\n              }\n            });\n          }\n        } else if (!searchedSample && RESelectedSample.length === 0 && RE_SAMPLE.length > 0) {\n          const paramList = inputParam.postParamList[0];\n          const inputParameter = { ...paramList.fecthInputObject.fecthInputObject,\n            fetchUrl: paramList.fetchUrl,\n            [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\n            ntype: 2,\n            nflag: 2\n          };\n          respObject = { ...respObject,\n            masterData: { ...masterData,\n              RESelectedSample: [RE_SAMPLE[0]]\n            }\n          }; //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n\n          if (inputParam.searchSampleRef !== undefined && inputParam.searchSampleRef.current !== null) {\n            inputParam.searchSampleRef.current.value = \"\";\n          }\n\n          if (inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null) {\n            inputParam.searchSubSampleRef.current.value = \"\";\n          }\n\n          if (inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null) {\n            inputParam.searchTestRef.current.value = \"\";\n          }\n\n          dispatch(fetchSelectedData({ ...inputParameter,\n            checkBoxOperation: checkBoxOperation.SINGLESELECT\n          }, respObject));\n        } else if (!searchedSample && RE_SAMPLE.length > 0) {\n          let inputParameter;\n\n          if (RESelectedSample.length === 0 || RE_SUBSAMPLE.length === 0) {\n            onlySampleService = true;\n            let paramList = inputParam.postParamList[0];\n            inputParameter = { ...paramList.fecthInputObject.fecthInputObject,\n              fetchUrl: paramList.fetchUrl,\n              [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\n              ntype: 2,\n              nflag: 2\n            };\n            respObject = { ...respObject,\n              masterData: { ...masterData,\n                RESelectedSample: [RE_SAMPLE[0]]\n              }\n            }; //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n\n            if (inputParam.searchSampleRef !== undefined && inputParam.searchSampleRef.current !== null) {\n              inputParam.searchSampleRef.current.value = \"\";\n            }\n\n            if (inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null) {\n              inputParam.searchSubSampleRef.current.value = \"\";\n            }\n\n            if (inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null) {\n              inputParam.searchTestRef.current.value = \"\";\n            }\n\n            dispatch(fetchSelectedData({ ...inputParameter,\n              checkBoxOperation: checkBoxOperation.SINGLESELECT\n            }, respObject));\n          }\n\n          if (boolSelectedSubSample === false ? boolSelectedSubSample === false && onlySampleService === false && RESelectedSubSample.length !== 0 //&&!searchedSubSample\n          : RESelectedSubSample.length === 0 && RE_SUBSAMPLE.length > 0) {\n            let paramList = inputParam.postParamList[1];\n            inputParameter = { ...paramList.fecthInputObject,\n              fetchUrl: paramList.fetchUrl,\n              [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\n              ntype: 3,\n              nflag: 3\n            };\n            respObject = { ...respObject,\n              masterData: { ...masterData,\n                RESelectedSubSample: [RE_SUBSAMPLE[0]]\n              }\n            }; //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n\n            if (inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null) {\n              inputParam.searchSubSampleRef.current.value = \"\";\n            }\n\n            if (inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null) {\n              inputParam.searchTestRef.current.value = \"\";\n            }\n\n            dispatch(fetchSelectedData({ ...inputParameter,\n              checkBoxOperation: checkBoxOperation.SINGLESELECT\n            }, respObject));\n          } else {\n            respObject = { ...respObject,\n              masterData\n            };\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: { ...respObject,\n                loading: false\n              }\n            });\n          }\n        } else {\n          respObject = { ...respObject,\n            masterData\n          };\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: { ...respObject,\n              loading: false\n            }\n          });\n        }\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    };\n  } else {\n    toast.warn(intl.formatMessage({\n      id: \"IDS_SELECTTESTTOCOMPLETE\"\n    }));\n  }\n}\nexport function testStart(inputParam, acceptList, userInfo, completeResultId) {\n  if (acceptList !== undefined && acceptList.length > 0) {\n    return function (dispatch) {\n      let inputData = inputParam.testChildGetREParam;\n      let inputParamData = {\n        ntype: 3,\n        nflag: 3,\n        nsampletypecode: inputData.nsampletypecode,\n        nregtypecode: inputData.nregtypecode,\n        nregsubtypecode: inputData.nregsubtypecode,\n        npreregno: inputData.npreregno,\n        // ALPD-3513\n        //  Result entry: When initiate the test, list allignment issue occurs\n        ntranscode: String(0),\n        //ntranscode:String(inputData.ntransactionstatus),\n        napprovalversioncode: inputData.napprovalversioncode,\n        napprovalconfigcode: inputData.napprovalconfigcode,\n        ntransactionsamplecode: inputData.ntransactionsamplecode,\n        userinfo: userInfo,\n        fromdate: inputData.fromdate,\n        todate: inputData.todate,\n        ntestcode: inputData.ntestcode,\n        transactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\n        //ntransactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\n        ntransactiontestcode: 0,\n        activeTestKey: inputData.activeTestKey,\n        ncontrolcode: inputParam.inputData.ncontrolcode,\n        ndesigntemplatemappingcode: inputData.masterData.ndesigntemplatemappingcode,\n        nneedsubsample: inputParam.inputData.subSampleNeeded,\n        needjoballocationandmyjob: inputParam.inputData.NeedJobAllocationAndMyjob,\n        nneedjoballocation: inputParam.inputData.nneedjoballocation,\n        nneedmyjob: inputParam.inputData.nneedmyjob,\n        nneedReceivedInLab: inputParam.inputData.nneedReceivedInLab\n      };\n      let activeName = \"\";\n      let dataStateName = \"\"; // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\n      //     documentDataState, testCommentDataState } = inputData\n      // let url = \"resultentrybysample/getTestbasedParameter\"\n\n      switch (inputData.activeTestKey) {\n        case \"IDS_RESULTS\":\n          activeName = \"TestParameters\";\n          dataStateName = \"resultDataState\";\n          break;\n\n        case \"IDS_INSTRUMENT\":\n          activeName = \"ResultUsedInstrument\";\n          dataStateName = \"instrumentDataState\";\n          break;\n\n        case \"IDS_MATERIAL\":\n          activeName = \"ResultUsedMaterial\";\n          dataStateName = \"materialDataState\";\n          break;\n\n        case \"IDS_TASK\":\n          activeName = \"ResultUsedTasks\";\n          dataStateName = \"taskDataState\";\n          break;\n\n        case \"IDS_TESTATTACHMENTS\":\n          activeName = \"RegistrationTestAttachment\";\n          break;\n\n        case \"IDS_TESTCOMMENTS\":\n          activeName = \"RegistrationTestComment\";\n          dataStateName = \"testCommentDataState\";\n          break;\n\n        case \"IDS_DOCUMENTS\":\n          activeName = \"\";\n          dataStateName = \"documentDataState\";\n          break;\n\n        case \"IDS_RESULTCHANGEHISTORY\":\n          activeName = \"ResultChangeHistory\";\n          dataStateName = \"resultChangeDataState\";\n          break;\n\n        case \"IDS_SAMPLEATTACHMENTS\":\n          activeName = \"\";\n          dataStateName = \"resultDataState\";\n          break;\n\n        default:\n          activeName = \"TestParameters\";\n          dataStateName = \"resultDataState\";\n          break;\n      }\n\n      dispatch(initRequest(true));\n      rsapi.post(\"resultentrybysample/testInitiated\", inputParamData).then(response => {\n        let RE_SAMPLE = [];\n        let RE_SUBSAMPLE = [];\n        let RE_TEST = [];\n        let onlySampleService = false;\n        let childTabsKey = [\"TestParameters\", \"ResultUsedInstrument\", \"ResultUsedTasks\", \"RegistrationTestAttachment\", \"ResultChangeHistory\", \"RegistrationTestComment\", \"ResultChangeHistory\"]; //let responseData = response.data \n\n        let responseData = sortData(response.data, 'ascending', 'ntransactionresultcode');\n        fillRecordBasedOnCheckBoxSelection(responseData, inputData.masterData, childTabsKey, 3, \"ntransactionsamplecode\", []);\n        let responseRESelectedTest = responseData.RESelectedTest;\n        responseData[\"RESelectedTest\"] = getSameRecordFromTwoArrays(responseData.RE_TEST, inputParam.RESelectedTest, \"ntransactiontestcode\"); // ALPD-3513\n        // commed for Result entry: When initiate the test, list allignment issue occurs\n        //ALPD-3425\n        // if(responseData[\"RESelectedTest\"].length === 0){\n        //     responseData[\"RESelectedTest\"] = responseRESelectedTest;\n        // }\n\n        let responseRE_TEST; // if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\n        //        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\n        //     inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\n        //    }\n\n        if (responseData[\"RE_TEST\"].length > 0) {\n          if (inputData.masterData.realRegSubTypeValue.nneedsubsample) //.nneedsubsample)\n            {\n              //RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\");\n              // RE_TEST = getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RESelectedTest\"],\"ntransactiontestcode\");\n              RE_TEST = replaceUpdatedObject(responseData[\"RE_TEST\"], inputData.masterData[\"RE_TEST\"], \"ntransactiontestcode\");\n              responseRE_TEST = replaceUpdatedObject(responseData[\"RE_TEST\"], inputData.masterData[\"RE_TEST\"], \"ntransactiontestcode\");\n              ;\n            } else RE_TEST = responseData[\"RE_TEST\"];\n\n          responseRE_TEST = responseData[\"RE_TEST\"]; // RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"npreregno\");\n        } else {\n          RE_TEST = inputData.masterData[\"RE_TEST\"];\n          responseRE_TEST = responseData[\"RE_TEST\"];\n        }\n\n        RE_SUBSAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"], filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\"), \"ntransactionsamplecode\");\n\n        if (RE_SUBSAMPLE.length > 0) {\n          //    let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \n          //    let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\n          //    selectedSampleArray=selectedSampleArray.filter(objx=>RE_TEST.some(objy=>objx['npreregno']===objy['npreregno']))\n          //    let selectedTestPreregno=inputData.masterData[\"RESelectedTest\"].map(x=>x.npreregno);\n          //    let selectPreregNOafter=selectedSampleArray.map(x=>x.npreregno)\n          //    let unwantedPreregno= selectPreregNOBefore.filter(item => !selectPreregNOafter.includes(item))\n          //                         .filter(item => !selectPreregNOafter.includes(item)&& !selectedTestPreregno.includes(item));\n          //    RE_SAMPLE=inputData.masterData[\"RE_SAMPLE\"].filter(objx=>unwantedPreregno.every(npreregno=>npreregno!==objx['npreregno'])) \n          RE_SAMPLE = inputData.masterData[\"RE_SAMPLE\"];\n          let selectedSampleArray = inputData.masterData[\"RESelectedSample\"];\n          let subSampleArray = RE_SUBSAMPLE.map(x => x.npreregno);\n          let selectPreregNOBefore = selectedSampleArray.map(x => x.npreregno);\n          selectedSampleArray = selectedSampleArray.filter(item => subSampleArray.includes(item.npreregno)).map(x => x.npreregno);\n          let unwantedPreregno = selectPreregNOBefore.filter(function (x) {\n            return !selectedSampleArray.some(function (y) {\n              return x === y;\n            });\n          });\n          RE_SAMPLE = RE_SAMPLE.filter(item => !unwantedPreregno.includes(item.npreregno)); //RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\n        } else {\n          RE_SAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"], RE_TEST, \"npreregno\");\n        }\n\n        const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] : [RE_SAMPLE[0]]; //const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\n        // let x=filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\") \n        // let boolSelectedSubSample=x.some(objx=>RE_TEST.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode']))\n        // const RESelectedSubSample =boolSelectedSubSample? filterRecordBasedOnTwoArrays (inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\"):\n        // getSameRecordFromTwoArrays (inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\n\n        let boolSelectedSubSample;\n        let searchedSubSample = undefined;\n        let RESelectedSubSample = [];\n        let backfrontTest = getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactiontestcode\");\n\n        if (inputData.masterData[\"searchedSubSample\"]) {\n          searchedSubSample = inputData.masterData[\"searchedSubSample\"];\n          boolSelectedSubSample = searchedSubSample.some(objx => backfrontTest.some(objy => objx['ntransactionsamplecode'] === objy['ntransactionsamplecode']));\n          let searchedSubSamplebefore = inputData.masterData[\"RESelectedSubSample\"].map(x => x.ntransactionsamplecode);\n          searchedSubSample = inputData.masterData[\"RESelectedSubSample\"].filter(objx => backfrontTest.some(objy => objx['ntransactionsamplecode'] === objy['ntransactionsamplecode']));\n          let searchedSubSampleaftere = searchedSubSample.map(x => x.ntransactionsamplecode);\n          let unwantedSamplecode = searchedSubSamplebefore.filter(function (x) {\n            return !searchedSubSampleaftere.some(function (y) {\n              return x === y;\n            });\n          });\n          inputData.masterData[\"searchedSubSample\"] = inputData.masterData[\"searchedSubSample\"].filter(item => !unwantedSamplecode.includes(item.ntransactionsamplecode));\n        } else {\n          boolSelectedSubSample = RE_SUBSAMPLE.some(objx => backfrontTest.some(objy => objx['ntransactionsamplecode'] === objy['ntransactionsamplecode']));\n        }\n\n        if (inputData.masterData[\"searchedSubSample\"] //&&inputData.masterData[\"searchedSubSample\"].length>0\n        ) {\n          RESelectedSubSample = boolSelectedSubSample ? inputData.masterData[\"RESelectedSubSample\"] : inputData.masterData[\"searchedSubSample\"][0] ? [inputData.masterData[\"searchedSubSample\"][0]] : [];\n        } else {\n          RESelectedSubSample = boolSelectedSubSample ? inputData.masterData[\"RESelectedSubSample\"] : [RE_SUBSAMPLE[0]];\n        } // let RESelectedTest1 = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"], acceptList, \"ntransactiontestcode\");\n        // let RESelectedTest2 = updatedObjectWithNewElement(RESelectedTest1, responseData.RESelectedTest)\n        // RESelectedTest2 = replaceUpdatedObject(responseData[\"RE_TEST\"], inputData.masterData.RE_TEST, 'ntransactiontestcode')\n\n\n        let searchedSample = undefined;\n\n        if (inputData.masterData[\"searchedSample\"]) {\n          searchedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"searchedSample\"], RE_SAMPLE, \"npreregno\");\n          searchedSample = searchedSample.length > 0 ? searchedSample : inputData.masterData[\"searchedSample\"];\n        }\n\n        let masterData = { // ...inputData.masterData,\n          // //...responseData,\n          // //RE_SAMPLE,\n          // //RE_SUBSAMPLE,\n          // //RESelectedSubSample,\n          // searchedSample,\n          // RE_TEST:replaceUpdatedObject(responseData[\"RE_TEST\"], inputData.masterData.RE_TEST, 'ntransactiontestcode')\n          // //RESelectedSample,\n          // //RESelectedTest: RESelectedTest2,\n          // //RE_TEST: responseData[\"RE_TEST\"]\n          ...inputData.masterData,\n          ...responseData,\n          RE_SAMPLE,\n          RE_SUBSAMPLE,\n          RESelectedSubSample,\n          searchedSample,\n          RESelectedSample,\n          RESelectedTest: inputData.masterData[\"searchedTest\"] && inputData.masterData[\"searchedTest\"].length > 0 ? [inputData.masterData[\"searchedTest\"][0]] : responseData.RESelectedTest,\n          // ALPD-3513\n          // commed for Result entry: When initiate the test, list allignment issue occurs\n          // RE_TEST: responseData[\"RE_TEST\"]\n          // RE_TEST: responseRE_TEST\n          //ALPD-3425\n          RE_TEST\n        };\n\n        if (inputData.masterData[\"searchedTest\"] && responseData[\"RE_TEST\"]) {\n          let respObject1 = {\n            masterData: masterData\n          };\n          dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject1)); // inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\n        }\n\n        let skipInfo = {};\n\n        if (masterData.RE_SAMPLE && masterData.RE_SAMPLE.length <= inputParam.skip) {\n          skipInfo = { ...skipInfo,\n            skip: 0,\n            take: inputParam.take\n          };\n        }\n\n        if (masterData.RE_TEST && masterData.RE_TEST.length <= inputParam.testskip) {\n          skipInfo = { ...skipInfo,\n            testskip: 0,\n            testtake: inputParam.testtake\n          };\n        }\n\n        if (inputData[dataStateName] && masterData[activeName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        let respObject = { ...inputParamData.inputData,\n          openModal: false,\n          loadEsign: false,\n          showConfirmAlert: false,\n          //selectedRecord: undefined,\n          loading: false,\n          screenName: inputData.activeTestKey,\n          ...skipInfo\n        };\n\n        if (searchedSample // && RESelectedSample.length === 0 \n        && searchedSample.length > 0) {\n          if (RESelectedSample.length === 0 || RE_SUBSAMPLE.length == 0) {\n            const paramList = inputParam.postParamList[0];\n            const inputParameter = { ...paramList.fecthInputObject.fecthInputObject,\n              fetchUrl: paramList.fetchUrl,\n              [paramList.primaryKeyField]: String(searchedSample[0][paramList.primaryKeyField]),\n              ntype: 2,\n              nflag: 2\n            };\n            respObject = { ...respObject,\n              masterData: { ...masterData,\n                RESelectedSample: [searchedSample[0]]\n              }\n            }; //  dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n\n            dispatch(fetchSelectedData({ ...inputParameter,\n              checkBoxOperation: checkBoxOperation.SINGLESELECT\n            }, respObject));\n          } else {\n            respObject = { ...respObject,\n              masterData\n            };\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: { ...respObject,\n                loading: false\n              }\n            });\n          }\n        } else if (!searchedSample && RE_SAMPLE.length > 0) {\n          let inputParameter; // let paramList = inputParam.postParamList[0];\n          // let inputParameter = {\n          //     ...paramList.fecthInputObject.fecthInputObject,\n          //     fetchUrl: paramList.fetchUrl,\n          //     [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\n          //     ntype: 2,\n          //     nflag: 2\n          // };\n          // respObject = {\n          //     ...respObject,\n          //     masterData: {\n          //         ...masterData,\n          //         RESelectedSample: [RE_SAMPLE[0]]\n          //     }\n          // }\n\n          if (RESelectedSample.length === 0 || RE_SUBSAMPLE.length == 0) {\n            onlySampleService = true;\n            let paramList = inputParam.postParamList[0];\n            inputParameter = { ...paramList.fecthInputObject.fecthInputObject,\n              fetchUrl: paramList.fetchUrl,\n              [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\n              ntype: 2,\n              nflag: 2\n            };\n            respObject = { ...respObject,\n              masterData: { ...masterData,\n                RESelectedSample: [RE_SAMPLE[0]]\n              }\n            }; // dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n\n            dispatch(fetchSelectedData({ ...inputParameter,\n              checkBoxOperation: checkBoxOperation.SINGLESELECT\n            }, respObject));\n          }\n\n          if (boolSelectedSubSample === false ? boolSelectedSubSample === false && onlySampleService === false && RESelectedSubSample.length !== 0 //&&!searchedSubSample\n          : RESelectedSubSample.length === 0 && RE_SUBSAMPLE.length > 0) {\n            let paramList = inputParam.postParamList[1];\n            inputParameter = { ...paramList.fecthInputObject,\n              fetchUrl: paramList.fetchUrl,\n              [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\n              ntype: 3,\n              nflag: 3\n            };\n            respObject = { ...respObject,\n              masterData: { ...masterData,\n                RESelectedSubSample: [RE_SUBSAMPLE[0]]\n              }\n            }; //  dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n\n            dispatch(fetchSelectedData({ ...inputParameter,\n              checkBoxOperation: checkBoxOperation.SINGLESELECT\n            }, respObject));\n          } // if(RESelectedTest.length === 0)\n          // {\n          //     let paramList = inputParam.postParamList[2];\n          //     inputParameter = {\n          //         ...paramList.fecthInputObject,\n          //         fetchUrl: paramList.fetchUrl,\n          //         [paramList.primaryKeyField]: String(RE_TEST[0][paramList.primaryKeyField]),\n          //         ntype: 3,\n          //         nflag: 3\n          //     };\n          //     respObject = {\n          //         ...respObject,\n          //         masterData: {\n          //             ...masterData,\n          //             RESelectedTest: [RE_TEST[0]]\n          //         }\n          //     }\n          //     dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n          // }\n          else {\n            respObject = { ...respObject,\n              masterData\n            };\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: { ...respObject,\n                loading: false\n              }\n            });\n          }\n        } else {\n          respObject = { ...respObject,\n            masterData\n          };\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: { ...respObject,\n              loading: false\n            }\n          });\n        }\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    };\n  } else {\n    toast.warn(intl.formatMessage({\n      id: \"IDS_SELECTTESTTOINITIATE\"\n    }));\n  }\n} //Compare two array and return the first array which is available in second array\n\nexport function compareTwoArray(firstArray, secondArray, PrimaryKey) {\n  const filterArray = firstArray.filter(function (x) {\n    return secondArray.some(function (y) {\n      return x[PrimaryKey] === y[PrimaryKey];\n    });\n  });\n  return filterArray;\n}\n\nfunction fetchSelectedData(inputParam, respObject) {\n  return dispatch => {\n    delete inputParam.searchTestRef;\n    rsapi.post(inputParam.fetchUrl, { ...inputParam\n    }).then(response => {\n      if (response.data.RE_SUBSAMPLE && response.data.RE_SUBSAMPLE.length > 0) {\n        sortData(response.data.RE_SUBSAMPLE, 'descending', 'ntransactionsamplecode');\n      }\n\n      sortData(response.data.RE_TEST, 'ascending', 'ntransactionresultcode');\n      const masterData = { ...respObject.masterData,\n        ...response.data,\n        RESelectedSample: response.data.RESelectedSample || respObject.masterData.RESelectedSample || []\n      }; //sortData(masterData);\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: { ...respObject,\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\n\nexport function testMethodSourceEdit(inputData) {\n  return function (dispatch) {\n    let inputParamData = {\n      ntransactiontestcode: inputData.test.ntransactiontestcode,\n      ntestgrouptestcode: inputData.test.ntestgrouptestcode,\n      ntestcode: inputData.test.ntestcode,\n      ncontrolcode: inputData.editSourceMethodId,\n      userinfo: inputData.userInfo\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getTestMethodSource\", inputParamData).then(response => {\n      const TagSource = constructOptionList(response.data.SourceData || [], \"nsourcecode\", \"ssourcename\", undefined, undefined, undefined);\n      const TagListSource = TagSource.get(\"OptionList\");\n      const TagMethod = constructOptionList(response.data.MethodData || [], \"nmethodcode\", \"smethodname\", undefined, undefined, undefined);\n      const TagListMethod = TagMethod.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            SourceData: TagListSource,\n            MethodData: TagListMethod,\n            RESelectedSubSample: inputData.masterData.RESelectedSubSample\n          },\n          selectedRecord: {\n            ntransactiontestcode: inputData.test.ntransactiontestcode,\n            stestsynonym: inputData.test.jsondata.stestsynonym,\n            nsourcecode: response.data.SourceDataValue,\n            nmethodcode: response.data.MethodDataValue\n          },\n          loading: false,\n          screenName: \"IDS_TESTMETHODSOURCE\",\n          openModal: true,\n          operation: \"update\",\n          ncontrolcode: inputData.editSourceMethodId\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function updateParameterComments(inputData, masterData) {\n  return function (dispatch) {\n    let inputParamData = {\n      ntransactiontestcode: inputData.ntransactiontestcode,\n      ntransactionresultcode: inputData.ntransactionresultcode,\n      sresultcomment: inputData.sresultcomment,\n      transactiontestcode: inputData.transactiontestcode,\n      userinfo: inputData.userinfo,\n      nregtypecode: inputData.nregtypecode,\n      nregsubtypecode: inputData.nregsubtypecode,\n      ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n      ncontrolcode: inputData.ncontrolcode\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/updateParameterComments\", inputParamData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            ...response.data\n          },\n          loading: false,\n          loadEsign: false,\n          screenName: \"IDS_RESULT\",\n          openModal: false,\n          operation: \"update\",\n          ncontrolcode: inputData.ncontrolcode //ncontrolcode:inputData.editSourceMethodId\n\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function addREInstrument(inputData) {\n  return function (dispatch) {\n    let urlArray = [];\n    const resultusedinstrument = rsapi.post(\"resultentrybysample/getResultUsedInstrumentNameCombo\", {\n      userinfo: inputData.userInfo,\n      ntestgrouptestcode: inputData.masterData.RESelectedTest.ntestgrouptestcode\n    });\n    const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\n    const UTCtimeZoneService = rsapi.post(\"timezone/getLocalTimeByZone\", {\n      userinfo: inputData.userInfo\n    });\n    urlArray = [resultusedinstrument, timeZoneService, UTCtimeZoneService];\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      const TagInstrumentName = constructOptionList(response[0].data.InstrumentName || [], \"ninstrumentnamecode\", \"sinstrumentname\", undefined, undefined, undefined);\n      const TagListInstrumentName = TagInstrumentName.get(\"OptionList\");\n      const TagInsturmentcategory = constructOptionList(response[0].data.InstrumentCategory || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", undefined, undefined, undefined);\n      const TagListInstrumentCategory = TagInsturmentcategory.get(\"OptionList\");\n      const TagTimeZone = constructOptionList(response[1].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, undefined);\n      const TagListTimeZone = TagTimeZone.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            InstrumentName: TagListInstrumentName,\n            InstrumentCategory: TagListInstrumentCategory\n          },\n          selectedId: null,\n          // selectedRecord\n          selectedRecordInstrumentForm: {\n            sarno: inputData.test.sarno,\n            ssamplearno: inputData.test.ssamplearno,\n            stestsynonym: inputData.test.stestsynonym,\n            transactiontestcode: inputData.RESelectedTest ? inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\n            ntransactiontestcode: inputData.test.ntransactiontestcode,\n            ninstrumentcatcode: TagInsturmentcategory.get(\"DefaultValue\") ? TagInsturmentcategory.get(\"DefaultValue\") : [],\n            ninstrumentnamecode: TagInstrumentName.get(\"DefaultValue\") ? TagInstrumentName.get(\"DefaultValue\") : [],\n            npreregno: inputData.test.npreregno,\n            //dtodate: new Date(response[2].data),//new Date(),\n            dtodate: rearrangeDateFormat(inputData.userInfo, response[2].data),\n            //new Date(),\n            //dfromdate: new Date(response[2].data),//new Date(),\n            dfromdate: rearrangeDateFormat(inputData.userInfo, response[2].data),\n            //new Date(),\n            ntzfromdate: {\n              \"value\": inputData.userInfo.ntimezonecode,\n              \"label\": inputData.userInfo.stimezoneid\n            },\n            ntztodate: {\n              \"value\": inputData.userInfo.ntimezonecode,\n              \"label\": inputData.userInfo.stimezoneid\n            }\n          },\n          timeZoneList: TagListTimeZone || [],\n          loading: false,\n          screenName: \"IDS_INSTRUMENT\",\n          openModal: true,\n          operation: \"create\",\n          isInstrumentInitialRender: true,\n          //activeTestKey: \"IDS_INSTRUMENT\",\n          ncontrolcode: inputData.addResultUsedInstrumentId\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function addREMaterial(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getResultUsedMaterialCombo\", {\n      userinfo: inputData.userInfo,\n      nsectioncode: inputData.test.nsectioncode,\n      ntestgrouptestcode: inputData.test.ntestgrouptestcode\n    }).then(response => {\n      const materialTypeMap = constructOptionList(response.data.MaterialType || [], \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, undefined);\n      const materialType = materialTypeMap.get(\"OptionList\");\n      const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\n      const materialCat = materialCatMap.get(\"OptionList\");\n      const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\n      const material = materialMap.get(\"OptionList\");\n      const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\n      const materialInventory = materialInventoryMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedId: null,\n          //selectedRecord\n          selectedRecordMaterialForm: {\n            ntestgroupmaterial: transactionStatus.YES,\n            sarno: inputData.test.sarno,\n            ssamplearno: inputData.test.ssamplearno,\n            stestsynonym: inputData.test.stestsynonym,\n            nsectioncode: inputData.test.nsectioncode,\n            ssectionname: inputData.test.ssectionname,\n            transactiontestcode: inputData.RESelectedTest ? inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\n            ntransactiontestcode: inputData.test.ntransactiontestcode,\n            npreregno: inputData.test.npreregno,\n            nmaterialtypecode: materialTypeMap.get(\"DefaultValue\"),\n            nmaterialcatcode: materialCatMap.get(\"DefaultValue\"),\n            nmaterialcode: materialMap.get(\"OptionList\").length > 0 ? materialMap.get(\"OptionList\")[0] : \"\",\n            nmaterialinventorycode: materialInventoryMap.get(\"OptionList\").length > 0 ? materialInventoryMap.get(\"OptionList\")[0] : \"\",\n            sunitname: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].sunitname : \"\",\n            savailablequantity: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].savailablequatity : \"\"\n          },\n          isMaterialInitialRender: true,\n          materialType,\n          materialCat,\n          material,\n          materialInventory,\n          loading: false,\n          screenName: \"IDS_MATERIAL\",\n          openModal: true,\n          operation: \"create\",\n          //activeTestKey: \"IDS_INSTRUMENT\",\n          ncontrolcode: inputData.addResultUsedMaterailId\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getREMaterialComboGet(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getResultUsedMaterialCombo\", {\n      userinfo: inputData.userInfo,\n      nsectioncode: inputData.test.nsectioncode,\n      ntestgrouptestcode: inputData.ntestgrouptestcode\n    }).then(response => {\n      const materialTypeMap = constructOptionList(response.data.MaterialType || [], \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, undefined);\n      const materialType = materialTypeMap.get(\"OptionList\");\n      const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\n      const materialCat = materialCatMap.get(\"OptionList\");\n      const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\n      const material = materialMap.get(\"OptionList\");\n      const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\n      const materialInventory = materialInventoryMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedId: null,\n          selectedRecord: {\n            ntestgroupmaterial: inputData.ntestgroupmaterial,\n            sarno: inputData.test.sarno,\n            ssamplearno: inputData.test.ssamplearno,\n            stestsynonym: inputData.test.stestsynonym,\n            nsectioncode: inputData.test.nsectioncode,\n            ssectionname: inputData.test.ssectionname,\n            transactiontestcode: inputData.RESelectedTest ? inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\n            ntransactiontestcode: inputData.test.ntransactiontestcode,\n            npreregno: inputData.test.npreregno,\n            nmaterialtypecode: materialTypeMap.get(\"DefaultValue\") ? materialTypeMap.get(\"DefaultValue\") : \"\",\n            nmaterialcatcode: materialCatMap.get(\"DefaultValue\") ? materialCatMap.get(\"DefaultValue\") : \"\",\n            nmaterialcode: materialMap.get(\"OptionList\").length > 0 ? materialMap.get(\"OptionList\")[0] : \"\",\n            nmaterialinventorycode: materialInventoryMap.get(\"OptionList\").length > 0 ? materialInventoryMap.get(\"OptionList\")[0] : \"\",\n            sunitname: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].sunitname : \"\",\n            savailablequantity: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].savailablequatity : \"\"\n          },\n          materialType,\n          materialCat,\n          material,\n          materialInventory,\n          loading: false,\n          screenName: \"IDS_MATERIAL\",\n          openModal: true,\n          operation: \"create\" //activeTestKey: \"IDS_INSTRUMENT\",\n          //ncontrolcode: inputData.addResultUsedMaterailId\n\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getREMaterialCategoryByType(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getREMaterialCategoryByType\", {\n      ntestgrouptestcode: inputData.ntestgrouptestcode,\n      nmaterialtypecode: inputData.selectedRecord.nmaterialtypecode.value,\n      userinfo: inputData.userInfo\n    }).then(response => {\n      const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\n      const materialCat = materialCatMap.get(\"OptionList\");\n      const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\n      const material = materialMap.get(\"OptionList\");\n      const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\n      const materialInventory = materialInventoryMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedId: null,\n          selectedRecord: { ...inputData.selectedRecord,\n            nmaterialcode: materialMap.get(\"DefaultValue\") || {},\n            nmaterialinventorycode: materialInventoryMap.get(\"DefaultValue\") || {},\n            nmaterialcatcode: materialCatMap.get(\"DefaultValue\") || {}\n          },\n          materialCat,\n          material,\n          materialInventory,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getREMaterialByCategory(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getREMaterialByCategory\", {\n      ntestgrouptestcode: inputData.ntestgrouptestcode,\n      nmaterialtypecode: inputData.selectedRecord.nmaterialtypecode.value,\n      nmaterialcatcode: inputData.selectedRecord.nmaterialcatcode.value,\n      nsectioncode: inputData.selectedRecord.nsectioncode,\n      userinfo: inputData.userInfo\n    }).then(response => {\n      const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\n      const material = materialMap.get(\"OptionList\");\n      const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\n      const materialInventory = materialInventoryMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedId: null,\n          selectedRecord: { ...inputData.selectedRecord,\n            nmaterialcode: materialMap.get(\"OptionList\")[0],\n            nmaterialinventorycode: materialInventoryMap.get(\"OptionList\")[0],\n            savailablequantity: response.data.MaterialInventory ? response.data.MaterialInventory[0].savailablequatity : \"\",\n            sunitname: response.data.MaterialInventory ? response.data.MaterialInventory[0].sunitname : \"\"\n          },\n          material,\n          materialInventory,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getREMaterialInvertoryByMaterial(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getREMaterialInvertoryByMaterial\", {\n      ntestgrouptestcode: inputData.ntestgrouptestcode,\n      nmaterialcode: inputData.selectedRecord.nmaterialcode.value,\n      nsectioncode: inputData.selectedRecord.nsectioncode,\n      userinfo: inputData.userInfo\n    }).then(response => {\n      const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\n      const materialInventory = materialInventoryMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedId: null,\n          selectedRecord: { ...inputData.selectedRecord,\n            sunitname: response.data.MaterialInventory ? response.data.MaterialInventory[0].sunitname : \"\",\n            savailablequantity: response.data.MaterialInventory ? response.data.MaterialInventory[0].savailablequatity : \"\"\n          },\n          materialInventory,\n          loading: false,\n          screenName: \"IDS_MATERIAL\",\n          openModal: true,\n          //operation: \"create\",\n          //activeTestKey: \"IDS_INSTRUMENT\",\n          ncontrolcode: inputData.addResultUsedInstrumentId\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getAvailableMaterialQuantity(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getAvailableMaterialQuantity\", {\n      ntestgrouptestcode: inputData.ntestgrouptestcode,\n      nmaterialinventorycode: inputData.selectedRecord.nmaterialinventorycode.value,\n      nsectioncode: inputData.selectedRecord.nsectioncode,\n      userinfo: inputData.userInfo\n    }).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedId: null,\n          selectedRecord: { ...inputData.selectedRecord,\n            savailablequantity: response.data.inventory ? response.data.inventory.savailablequatity : \"\",\n            sunitname: response.data.inventory ? response.data.inventory.sunitname : \"\"\n          },\n          loading: false,\n          screenName: \"IDS_MATERIAL\",\n          openModal: true,\n          //operation: \"create\",\n          //activeTestKey: \"IDS_INSTRUMENT\",\n          ncontrolcode: inputData.addResultUsedInstrumentId\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function deleteInstrumentRecord(inputData) {\n  return function (dispatch) {\n    let inputParamData = {\n      nresultusedinstrumentcode: inputData.selectedRecord.nresultusedinstrumentcode,\n      userinfo: inputData.userInfo,\n      ntransactiontestcode: inputData.masterData.RESelectedTest ? inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\n      nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\n      nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode,\n      ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/deleteResultUsedInstrument\", inputParamData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data\n          },\n          loading: false,\n          operation: \"delete\",\n          openModal: false,\n          loadEsign: false,\n          selectedId: null\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n} // export function deleteInstrumentRecord(inputData) {\n//     return function (dispatch) {\n//         let inputParamData = {\n//             nresultusedinstrumentcode: inputData.selectedRecord.nresultusedinstrumentcode,\n//             userinfo: inputData.userInfo,\n//             ntransactiontestcode: inputData.masterData.RESelectedTest ?\n//                 inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\n//             nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\n//             nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode\n//         }\n//         dispatch(initRequest(true));\n//         rsapi.post(\"resultentrybysample/deleteResultUsedInstrument\", inputParamData)\n//             .then(response => {\n//                 dispatch({\n//                     type: DEFAULT_RETURN,\n//                     payload: {\n//                         masterData: {\n//                             ...inputData.masterData,\n//                             ...response.data\n//                         },\n//                         loading: false,\n//                         operation: \"delete\",\n//                         openModal: false,\n//                         loadEsign: false\n//                     }\n//                 })\n//             })\n//             .catch(error => {\n//                 dispatch({\n//                     type: DEFAULT_RETURN,\n//                     payload: {\n//                         loading: false\n//                     }\n//                 })\n//                 if (error.response.status === 500) {\n//                     toast.error(error.message);\n//                 } else {\n//                     toast.warn(error.response.data);\n//                 }\n//             })\n//     }\n// }\n\nexport function fetchInstrumentRecord(inputData) {\n  return function (dispatch) {\n    let urlArray = []; //const resultUsedInstrumentCombo = rsapi.post(\"resultentrybysample/getResultUsedInstrumentCombo\", { userinfo: inputData.userInfo });\n\n    const timeZoneService = rsapi.post(\"resultentrybysample/getResultUsedInstrument\", {\n      nresultusedinstrumentcode: inputData.editRow.nresultusedinstrumentcode,\n      userinfo: inputData.userInfo\n    });\n    const getResultUsedInstrument = rsapi.post(\"timezone/getTimeZone\");\n    urlArray = [timeZoneService, getResultUsedInstrument];\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      const TagInstrumentName = constructOptionList(response[0].data.InstrumentName || [], \"ninstrumentnamecode\", \"sinstrumentname\", undefined, undefined, undefined);\n      const TagListInstrumentName = TagInstrumentName.get(\"OptionList\");\n      const TagInstrumentId = constructOptionList(response[0].data.InstrumentId || [], \"ninstrumentcode\", \"sinstrumentid\", undefined, undefined, undefined);\n      const TagListInstrumentId = TagInstrumentId.get(\"OptionList\");\n      const TagInsturmentcategory = constructOptionList(response[0].data.InstrumentCategory || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", undefined, undefined, undefined);\n      const TagListInstrumentCategory = TagInsturmentcategory.get(\"OptionList\");\n      const TagTimeZone = constructOptionList(response[1].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, undefined);\n      const TagListTimeZone = TagTimeZone.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            InstrumentName: TagListInstrumentName,\n            InstrumentId: TagListInstrumentId,\n            InstrumentCategory: TagListInstrumentCategory,\n            // ...response[0].data,\n            ...response[1].data //...response[2].data\n\n          },\n          selectedId: inputData.editRow.nresultusedinstrumentcode,\n          //  selectedRecord\n          selectedRecordInstrumentForm: {\n            ssamplearno: response[0].data.EditResultUsedInstrument[0].ssamplearno,\n            stestsynonym: inputData.editRow.stestsynonym,\n            npreregno: response[0].data.EditResultUsedInstrument[0].npreregno,\n            ntransactiontestcode: inputData.editRow.ntransactiontestcode,\n            nresultusedinstrumentcode: inputData.editRow.nresultusedinstrumentcode,\n            ninstrumentcatcode: {\n              \"value\": response[0].data.EditResultUsedInstrument[0].ninstrumentcatcode,\n              \"label\": response[0].data.EditResultUsedInstrument[0].sinstrumentcatname\n            },\n            ninstrumentnamecode: {\n              \"value\": response[0].data.EditResultUsedInstrument[0].ninstrumentnamecode,\n              \"label\": response[0].data.EditResultUsedInstrument[0].sinstrumentname\n            },\n            ninstrumentcode: {\n              \"value\": response[0].data.EditResultUsedInstrument[0].ninstrumentcode,\n              \"label\": response[0].data.EditResultUsedInstrument[0].sinstrumentid\n            },\n            ntzfromdate: {\n              \"value\": response[0].data.EditResultUsedInstrument[0].ntzfromdate,\n              \"label\": response[0].data.EditResultUsedInstrument[0].stzfromdate\n            },\n            ntztodate: {\n              \"value\": response[0].data.EditResultUsedInstrument[0].ntztodate,\n              \"label\": response[0].data.EditResultUsedInstrument[0].stztodate\n            },\n            //dfromdate: new Date(response[0].data.EditResultUsedInstrument[0].sfromdate),\n            //dtodate: new Date(response[0].data.EditResultUsedInstrument[0].stodate)\n            dfromdate: rearrangeDateFormat(inputData.userInfo, response[0].data.EditResultUsedInstrument[0].sfromdate),\n            dtodate: rearrangeDateFormat(inputData.userInfo, response[0].data.EditResultUsedInstrument[0].stodate)\n          },\n          isInstrumentInitialRender: true,\n          timeZoneList: TagListTimeZone || [],\n          ncontrolcode: inputData.ncontrolCode,\n          loading: false,\n          screenName: \"IDS_INSTRUMENT\",\n          openModal: true,\n          operation: \"update\"\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function fetchMaterialRecord(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getResultUsedMaterial\", {\n      nresultusedmaterialcode: inputData.editRow.nresultusedmaterialcode,\n      userinfo: inputData.userInfo\n    }).then(response => {\n      const materialTypeMap = constructOptionList(response.data.MaterialType || [], \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, undefined);\n      const materialType = materialTypeMap.get(\"OptionList\");\n      const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\n      const materialCat = materialCatMap.get(\"OptionList\");\n      const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\n      const material = materialMap.get(\"OptionList\");\n      const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\n      const materialInventory = materialInventoryMap.get(\"OptionList\");\n      const EditResultUsedMaterial = response.data.EditResultUsedMaterial[0];\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedId: inputData.editRow.nresultusedinstrumentcode,\n          materialType,\n          materialCat,\n          material,\n          materialInventory,\n          selectedRecord: { ...EditResultUsedMaterial,\n            stestsynonym: inputData.editRow.jsondata.stestsynonym,\n            npreregno: EditResultUsedMaterial.npreregno,\n            ntransactiontestcode: inputData.editRow.ntransactiontestcode,\n            nresultusedinstrumentcode: inputData.editRow.nresultusedinstrumentcode,\n            nmaterialtypecode: {\n              label: EditResultUsedMaterial.jsondata.smaterialtypename,\n              value: EditResultUsedMaterial.nmaterialtypecode\n            },\n            nmaterialcatcode: {\n              \"value\": EditResultUsedMaterial.nmaterialcategorycode,\n              \"label\": EditResultUsedMaterial.jsondata.smaterialcatname\n            },\n            nmaterialcode: {\n              \"value\": EditResultUsedMaterial.nmaterialcode,\n              \"label\": EditResultUsedMaterial.jsondata.smaterialname\n            },\n            nmaterialinventorycode: {\n              \"value\": EditResultUsedMaterial.ninventorycode,\n              \"label\": EditResultUsedMaterial.jsondata.sinventoryid\n            },\n            ntztodate: {\n              \"value\": EditResultUsedMaterial.ntztodate,\n              \"label\": EditResultUsedMaterial.stztodate\n            },\n            susedquantity: EditResultUsedMaterial.jsondata.nqtyused,\n            scarriergas: EditResultUsedMaterial.jsondata.scarriergas,\n            smobilephase: EditResultUsedMaterial.jsondata.smobilephase,\n            sremarks: EditResultUsedMaterial.jsondata.sremarks,\n            savailablequantity: response.data.inventory ? response.data.inventory.savailablequatity : \"\",\n            sunitname: response.data.inventory ? response.data.inventory.sunitname : \"\"\n          },\n          ncontrolcode: inputData.ncontrolCode,\n          loading: false,\n          screenName: \"IDS_MATERIAL\",\n          openModal: true,\n          operation: \"update\"\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function deleteTaskRecord(inputData, userInfo) {\n  return function (dispatch) {\n    let inputParamData = {\n      nresultusedtaskcode: inputData.selectedRecord.nresultusedtaskcode,\n      userinfo: inputData.userInfo,\n      ntransactiontestcode: inputData.masterData.RESelectedTest ? inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\n      nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\n      nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode,\n      ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/deleteResultUsedTasks\", inputParamData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data\n          },\n          loading: false,\n          operation: \"delete\",\n          openModal: false,\n          loadEsign: false,\n          selectedId: null\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function fetchTaskRecord(inputData) {\n  return function (dispatch) {\n    let inputParamData = {\n      nresultusedtaskcode: inputData.editRow.nresultusedtaskcode,\n      userinfo: inputData.userInfo\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getResultUsedTask\", inputParamData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data\n          },\n          selectedId: response.data.EditResultUsedTasks[0].nresultusedtaskcode,\n          //      selectedRecord: {\n          selectedRecordTaskForm: {\n            npreregno: response.data.EditResultUsedTasks[0].npreregno,\n            stestsynonym: inputData.editRow.stestsynonym,\n            sanalysistime: response.data.EditResultUsedTasks[0].jsondata.sanalysistime,\n            smisctime: response.data.EditResultUsedTasks[0].jsondata.smisctime,\n            spreanalysistime: response.data.EditResultUsedTasks[0].jsondata.spreanalysistime,\n            spreparationtime: response.data.EditResultUsedTasks[0].jsondata.spreparationtime,\n            scomments: response.data.EditResultUsedTasks[0].jsondata.scomments,\n            staskprocedure: response.data.EditResultUsedTasks[0].jsondata.staskprocedure,\n            nresultusedtaskcode: response.data.EditResultUsedTasks[0].nresultusedtaskcode\n          },\n          isTaskInitialRender: true,\n          loading: false,\n          screenName: \"IDS_TASK\",\n          openModal: true,\n          operation: \"update\",\n          ncontrolcode: inputData.ncontrolcode\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function parameterRecord(inputData) {\n  return function (dispatch) {\n    let inputParamData = {\n      ntransactionresultcode: inputData.selectedRecord.ntransactionresultcode,\n      ntransactiontestcode: inputData.masterData.RESelectedTest ? inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\",\n      ncontrolcode: inputData.controlcode,\n      userinfo: inputData.userInfo\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getParameterComments\", inputParamData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData\n          },\n          selectedId: response.data.ParameterComments.ntransactionresultcode,\n          selectedRecord: {\n            sresultcomment: response.data.ParameterComments.sresultcomment,\n            stestsynonym: inputData.selectedRecord.stestsynonym,\n            sparametersynonym: inputData.selectedRecord.sparametersynonym,\n            transactiontestcode: response.data.ParameterComments.ntransactiontestcode,\n            ntransactionresultcode: response.data.ParameterComments.ntransactionresultcode,\n            ntransactiontestcode: inputData.masterData.RESelectedTest ? inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\",\n            ncontrolcode: inputData.controlcode\n          },\n          loading: false,\n          screenName: \"IDS_PARAMETERCOMMENTS\",\n          openModal: true,\n          operation: \"updateParameterComments\",\n          ncontrolcode: inputData.controlcode\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function checkListRecord(inputData) {\n  return function (dispatch) {\n    let inputParamData = {\n      ntransactionresultcode: inputData.selectedRecord.ntransactionresultcode,\n      napprovalparametercode: inputData.selectedRecord.napprovalparametercode,\n      nchecklistversioncode: inputData.selectedRecord.nchecklistversioncode,\n      ntransactiontestcode: inputData.selectedRecord.ntransactiontestcode.toString(),\n      ncontrolcode: inputData.ncontrolcode,\n      userinfo: inputData.userInfo\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getChecklistdesign\", inputParamData).then(response => {\n      let selectedRecord = {};\n      let lsteditedQB = [];\n      selectedRecord = {\n        sarno: inputData.selectedRecord.sarno,\n        ssamplearno: inputData.selectedRecord.ssamplearno,\n        npreregno: inputData.selectedRecord.npreregno,\n        stestsynonym: inputData.selectedRecord.stestsynonym,\n        sparametersynonym: inputData.selectedRecord.sparametersynonym,\n        ntransactiontestcode: inputData.selectedRecord.ntransactiontestcode,\n        ntransactionresultcode: inputData.selectedRecord.ntransactionresultcode,\n        transactiontestcode: inputData.masterData.RESelectedTest ? inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\"\n      };\n      response.data.ChecklistData.map(checklist => {\n        selectedRecord[checklist.nchecklistversionqbcode] = {\n          nchecklistqbcode: checklist.nchecklistqbcode,\n          nchecklistversioncode: checklist.nchecklistversioncode,\n          nchecklistversionqbcode: checklist.nchecklistversionqbcode,\n          sdefaultvalue: checklist.nchecklistcomponentcode === 7 ? rearrangeDateFormat(inputData.userInfo, checklist.sdefaultvalue) : checklist.sdefaultvalue,\n          //  sdefaultvalue: checklist.sdefaultvalue,\n          sarno: inputData.selectedRecord.sarno,\n          ssamplearno: inputData.selectedRecord.ssamplearno,\n          stestsynonym: inputData.selectedRecord.stestsynonym,\n          sparametersynonym: inputData.selectedRecord.sparametersynonym\n        };\n        lsteditedQB.push(checklist.nchecklistversionqbcode);\n        return null;\n      });\n      response.data.ChecklistData.map(checklist => {\n        selectedRecord['jsondata'] = { ...selectedRecord['jsondata'],\n          //  [checklist.nchecklistversionqbcode]: checklist.sdefaultvalue\n          [checklist.nchecklistversionqbcode]: checklist.nchecklistcomponentcode === 7 ? rearrangeDateFormat(inputData.userInfo, checklist.sdefaultvalue) : checklist.sdefaultvalue\n        };\n        return null;\n      });\n      selectedRecord[\"editedQB\"] = lsteditedQB;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data\n          },\n          selectedId: response.data.selectedId,\n          selectedRecord: selectedRecord,\n          loading: false,\n          screenName: \"IDS_CHECKLISTRESULT\",\n          openTemplateModal: true,\n          needSaveButton: inputData.needSaveButton,\n          operation: \"create\",\n          ncontrolCode: inputData.ncontrolcode\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function onSaveCheckList(selectedRecord, userInfo, nregtypecode, nregsubtypecode, ndesigntemplatemappingcode) {\n  return function (dispatch) {\n    let listResultCheckList = [];\n\n    if (selectedRecord && selectedRecord.jsondata) {\n      selectedRecord.editedQB.map(qbcode => listResultCheckList.push(selectedRecord[qbcode]));\n      let inputParamData = {\n        ntransactionresultcode: selectedRecord.ntransactionresultcode,\n        ntransactiontestcode: selectedRecord.ntransactiontestcode.toString(),\n        transactiontestcode: selectedRecord.transactiontestcode,\n        npreregno: selectedRecord.npreregno,\n        ResultCheckList: {\n          nchecklistversioncode: listResultCheckList[0].nchecklistversioncode,\n          nchecklistqbcode: listResultCheckList[0].nchecklistqbcode,\n          jsondata: selectedRecord.jsondata,\n          npreregno: selectedRecord.npreregno,\n          ntransactionresultcode: selectedRecord.ntransactionresultcode\n        },\n        //jsondata: selectedRecord.jsondata,\n        userinfo: userInfo,\n        nregtypecode: nregtypecode,\n        nregsubtypecode: nregsubtypecode,\n        ndesigntemplatemappingcode: ndesigntemplatemappingcode,\n        ncontrolcode: -1\n      };\n      dispatch(initRequest(true));\n      rsapi.post(\"resultentrybysample/createResultEntryChecklist\", inputParamData).then(response => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            selectedRecord: {},\n            templateData: undefined,\n            openTemplateModal: false,\n            openModal: false,\n            loading: false,\n            loadEsign: false\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openTemplateModal: false,\n          selectedRecord: {},\n          loading: false,\n          loadEsign: false\n        }\n      });\n    }\n  };\n}\nexport function defaultTest(inputData, RESelectedTest, RESelectedSample, nregtypecode, nregsubtypecode, ndesigntemplatemappingcode) {\n  if (RESelectedTest !== undefined && RESelectedTest.length > 0) {\n    return function (dispatch) {\n      let inputParamData = {\n        userinfo: inputData.userinfo,\n        ntransactiontestcode: RESelectedTest ? RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\",\n        ntestgrouptestcode: RESelectedTest ? RESelectedTest.map(test => test.ntestgrouptestcode).join(\",\") : \"\",\n        npreregno: RESelectedTest ? RESelectedTest.map(preregno => preregno.npreregno).join(\",\") : \"\",\n        //RESelectedSample ? RESelectedSample.map(preregno => preregno.npreregno).join(\",\") : \"\",\n        nregtypecode: nregtypecode,\n        nregsubtypecode: nregsubtypecode,\n        //ndesigntemplatemappingcode:ndesigntemplatemappingcode,\n        ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n        ncontrolcode: inputData.ncontrolcode,\n        nneedReceivedInLab: inputData.nneedReceivedInLab\n      };\n      dispatch(initRequest(true));\n      rsapi.post(\"resultentrybysample/updateDefaultValue\", inputParamData).then(response => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...inputData.masterData,\n              ...response.data,\n              TestParameters: replaceUpdatedObject(response.data.TestParameters, inputData.masterData.TestParameters, 'ntransactionresultcode'),\n              RESelectedSubSample: inputData.masterData.RESelectedSubSample\n            },\n            loading: false,\n            activeTestKey: \"IDS_RESULTS\",\n            openModal: false,\n            loadEsign: false\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            openModal: false,\n            loadEsign: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    };\n  } else {\n    toast.warn(intl.formatMessage({\n      id: \"IDS_SELECTTESTTOCOMPLETE\"\n    }));\n  }\n}\nexport function getFormula(parameterData, userInfo, masterData, index, selectedRecord) {\n  return function (dispatch) {\n    let inputParamData = {\n      ntransactiontestcode: parameterData.ntransactiontestcode,\n      nformulacode: parameterData.ntestgrouptestformulacode,\n      userinfo: userInfo,\n      npreregno: parameterData.npreregno,\n      ntransactionsamplecode: parameterData.ntransactionsamplecode\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getFormulaInputs\", inputParamData).then(response => {\n      const validateFormulaMandyFields = response.data.DynamicFormulaFields.map((item, index) => {\n        return {\n          \"idsName\": \"IDS_FILLALLFIELDS\",\n          \"dataField\": index,\n          \"mandatory\": true\n        };\n      });\n      let selectedForumulaInput = [];\n      let selectedForumulaInput1 = [];\n      let selectedMandatory = []; //           selectedRecord.ResultParameter = getRecordBasedOnPrimaryKeyName(selectedRecord.ResultParameter, parameterData.ntransactionsamplecode, \"ntransactionsamplecode\");\n\n      response.data.DynamicFormulaFields.map((fields, index) => {\n        let dynamicformulafields = {};\n        let selectedTestParameters = getRecordBasedOnPrimaryKeyName(selectedRecord.ResultParameter, fields.ndynamicformulafieldcode, \"ntestparametercode\");\n\n        if (selectedTestParameters.length > 0) {\n          selectedTestParameters = selectedTestParameters.filter(element => {\n            return element.sresult !== null && element.sresult != '';\n          });\n          const nisaverageneed = selectedTestParameters.length;\n          const maxResultCode = selectedTestParameters.length > 0 ? Math.max(...selectedTestParameters.map(o => o.ntransactionresultcode)) : -1; // const maxResultCode= Math.max(...(selectedTestParameters.filter(element => {\n          //                 return element.sresult !== null && element.sresult !='';\n          //               }).map(o => o.ntransactionresultcode)));\n\n          const paramValue = getRecordBasedOnPrimaryKeyName(selectedTestParameters, maxResultCode, \"ntransactionresultcode\");\n\n          if (paramValue.length == 0) {\n            dynamicformulafields.svalues = \"\";\n            dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription; //dynamicformulafields.nisaverageneed = 0;\n\n            dynamicformulafields.senableAverage = false;\n            response.data.DynamicFormulaFields[index].nisaverageneed = 0;\n            selectedForumulaInput.push(dynamicformulafields);\n            selectedMandatory.push(\"\");\n          } else {\n            if ((maxResultCode >= response.data.DynamicFormulaFields[index].ntransactionresultcode && paramValue.length > 0 ? paramValue[0].sresult != \"\" : false) || (response.data.DynamicFormulaFields[index].svalue != \"\" && response.data.DynamicFormulaFields[index].svalue != null ? maxResultCode <= response.data.DynamicFormulaFields[index].ntransactionresultcode && paramValue.length > 0 ? paramValue[0].sresult != \"\" : false : \"\")) {\n              dynamicformulafields.svalues = paramValue[0].sresult;\n              dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription;\n              dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription; //dynamicformulafields.nisaverageneed = nisaverageneed;\n\n              dynamicformulafields.senableAverage = false;\n              response.data.DynamicFormulaFields[index].nisaverageneed = nisaverageneed;\n              selectedForumulaInput.push(dynamicformulafields);\n              selectedMandatory.push(paramValue[0].sresult);\n            } else {\n              dynamicformulafields.svalues = response.data.DynamicFormulaFields[index].svalue;\n              dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription; // dynamicformulafields.nisaverageneed = response.data.DynamicFormulaFields[index].nisaverageneed;\n\n              dynamicformulafields.senableAverage = false;\n              selectedForumulaInput.push(dynamicformulafields);\n              selectedMandatory.push(response.data.DynamicFormulaFields[index].svalue);\n            }\n          }\n        } else {\n          dynamicformulafields.svalues = response.data.DynamicFormulaFields[index].svalue;\n          dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription; // dynamicformulafields.nisaverageneed = response.data.DynamicFormulaFields[index].nisaverageneed;\n\n          selectedForumulaInput.push(dynamicformulafields);\n          selectedMandatory.push(response.data.DynamicFormulaFields[index].svalue);\n        }\n\n        return selectedForumulaInput1.push(selectedRecord.ResultParameter.filter(x => x.ntestparametercode === fields.ndynamicformulafieldcode)[0]);\n      });\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            ...response.data\n          },\n          selectedRecord: { ...selectedRecord,\n            parameterData: parameterData,\n            naverageroundingdigits: parameterData.nroundingdigits,\n            sformulacalculationdetail: response.data.query,\n            formulainput: response.data.Formula,\n            resultindex: index,\n            DynamicFormulaFields: response.data.DynamicFormulaFields,\n            //selectedForumulaInput: []\n            //  DynamicFormulaFields.map((fields, index) => {\n            //     return {\n            //         selectedForumulaInput:  selectedRecord.ResultParameter.filter(x=>x.ntestparametercode===response.data.DynamicFormulaFields)\n            //     }\n            //  });\n            // response.data.DynamicFields.map((fields, index) =>\n            selectedForumulaInput,\n            selectedMandatory // selectedForumulaInput:  selectedRecord.ResultParameter.filter(x=>x.ntestparametercode===response.data.DynamicFormulaFields)\n            // )\n\n          },\n          validateFormulaMandyFields,\n          loading: false,\n          screenName: \"IDS_RESULTFORMULA\",\n          showFormula: true,\n          operation: \"validate\",\n          showValidate: true\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function calculateFormula(inputDataValue) {\n  return function (dispatch) {\n    const inputData = {\n      ntransactiontestcode: inputDataValue.selectedRecord.parameterData.ntransactiontestcode,\n      ntransactionresultcode: inputDataValue.selectedRecord.parameterData.ntransactionresultcode,\n      npreregno: inputDataValue.selectedRecord.parameterData.npreregno,\n      sformulacalculationcode: inputDataValue.selectedRecord.sformulacalculationdetail,\n      nformulacode: inputDataValue.selectedRecord.parameterData.ntestgrouptestformulacode,\n      userinfo: inputDataValue.userInfo,\n      dynamicformulafields: inputDataValue.lstDynamicFields\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"testmaster/calculateFormula\", inputData).then(response => {\n      // inputDataValue.selectedResultData[inputDataValue.selectedRecord.resultindex] =\n      // {\n      //     ntransactionresultcode: inputDataValue.selectedRecord.parameterData.ntransactionresultcode,\n      //     ntransactiontestcode: inputDataValue.selectedRecord.parameterData.ntransactiontestcode,\n      //     nparametertypecode: inputDataValue.selectedRecord.parameterData.nparametertypecode,\n      //     sresult: response.data.Result,\n      //     nroundingdigit: inputDataValue.selectedRecord.parameterData.nroundingdigits,\n      //     value: inputDataValue.selectedRecord.parameterData.ngradecode,\n      //     parameter: inputDataValue.selectedRecord.parameterData\n      // }\n      inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"sfinal\"] = response.data.Result;\n      inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"sresult\"] = response.data.Result;\n      inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex]['editable'] = true;\n      inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"ncalculatedresult\"] = 3;\n      inputDataValue.selectedResultGrade[inputDataValue.selectedRecord.resultindex] = {\n        ngradecode: numericGrade(inputDataValue.selectedRecord.parameterData, parseInt(response.data.Result))\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputDataValue.masterData //selectedResultData: inputDataValue.selectedResultData,\n            //selectedResultGrade: inputDataValue.selectedResultGrade,\n            //ResultParameter: inputDataValue.ResultParameter\n\n          },\n          selectedRecord: {\n            selectedResultGrade: inputDataValue.selectedResultGrade,\n            ResultParameter: inputDataValue.ResultParameter\n          },\n          parameterResults: inputDataValue.ResultParameter,\n          isParameterInitialRender: true,\n          loading: false,\n          screenName: \"IDS_RESULTENTRY\",\n          showFormula: false,\n          operation: \"update\",\n          showValidate: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        //toast.warn(error.response.data);\n        toast.warn(error.response.data[\"Result\"]);\n      }\n    });\n  };\n}\nexport function getREFilterTestData(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getTestBasedOnCombo\", inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data,\n            defaultFilterStatus: inputData.defaultFilterStatus,\n            defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,\n            //inputData.defaultRegistrationSubType,\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n            DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getREFilterTemplate(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getTestBasedOnCombo\", inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data,\n            defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,\n            //inputData.defaultRegistrationSubType,\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n            DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function updateTestMethodSource(inputData, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/updateTestMethodSource\", inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            RE_TEST: replaceUpdatedObject(response.data.RE_TEST, masterData.RE_TEST, 'ntransactiontestcode')\n          },\n          loading: false,\n          openModal: false,\n          loadEsign: false // activeTestKey: \"IDS_RESULTS\"\n\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function resultImportFile(inputParam, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getImportResultEntry\", inputParam.formData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData\n          },\n          loading: false,\n          openModal: false // activeTestKey: \"IDS_RESULTS\"\n\n        }\n      });\n\n      if (response.data.returnStatus && response.data.returnStatus !== \"\") {\n        toast.info(intl.formatMessage({\n          id: response.data.returnStatus\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: response.data.returnStatus\n        }));\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function validateEsignCredentialComplete(inputParam) {\n  return dispatch => {\n    dispatch(initRequest(true));\n    return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData).then(response => {\n      if (response.data === \"Success\") {\n        const methodUrl = \"performaction\";\n        inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\n\n        if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()] && inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]) {\n          delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];\n          delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];\n          delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];\n          delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];\n        }\n\n        if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"testinitiate\") {\n          dispatch(testStart(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"], inputParam.inputData.userinfo));\n        } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"complete\") {\n          dispatch(completeTest(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"], inputParam.inputData.userinfo, '', '', {\n            basedrulesengine: inputParam[\"screenData\"][\"inputParam\"][\"basedrulesengine\"]\n          }));\n        } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"default\") {\n          dispatch(defaultTest(inputParam[\"screenData\"][\"inputParam\"][\"testChildGetREParam\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedSample\"], inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"nregtypecode\"], inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"nregsubtypecode\"]));\n        } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"deleteInstrument\") {\n          dispatch(deleteInstrumentRecord(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"]));\n        } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"createMethod\") {\n          dispatch(updateTestMethodSource(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"], inputParam[\"screenData\"][\"inputParam\"][\"masterData\"]));\n        } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"deleteTask\") {\n          dispatch(deleteTaskRecord(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"]));\n        } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"updateParameterComments\") {\n          dispatch(updateParameterComments(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"], inputParam[\"screenData\"][\"inputParam\"][\"masterData\"]));\n        } else if (inputParam[\"screenData\"][\"operation\"] === \"updatechecklist\") {\n          let {\n            selectedRecord,\n            userInfo,\n            nregtypecode,\n            nregsubtypecode,\n            ndesigntemplatemappingcode\n          } = inputParam[\"screenData\"];\n          delete selectedRecord.esignpassword;\n          delete selectedRecord.esigncomments;\n          delete selectedRecord.esignreason;\n          delete selectedRecord.agree;\n          delete inputParam.inputData.password;\n          userInfo = inputParam.inputData.userinfo;\n          dispatch(onSaveCheckList(selectedRecord, userInfo, nregtypecode, nregsubtypecode, ndesigntemplatemappingcode));\n        } //ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\n        else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"updateSection\") {\n          dispatch(updateSectionTest(inputParam[\"screenData\"][\"inputParam\"]));\n        }\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getMeanCalculationTestParameter(meanParam) {\n  return dispatch => {\n    dispatch(initRequest(true));\n    const inputData = {\n      npreregno: meanParam.selectedRecord.npreregno,\n      ntransactionresultcode: meanParam.selectedRecord.ntransactionresultcode,\n      userinfo: meanParam.userInfo\n    };\n    return rsapi.post(\"resultentrybysample/getMeanCalculationTestParameter\", inputData).then(response => {\n      const list = response.data || []; // const optionList = [];\n      // list.map(item=>{\n      //     console.log(\"item:\", item);\n      //         optionList.push({item:item, \n      //                         label:\"[\"+item.stestsynonym+\"]-[\"+item.sparametersynonym+\"]-[\"+item.sresult+\"]\", \n      //                         value:item.ntransactionresultcode})\n      //     })\n      // const masterData = {...masterData, ResultParameter:meanParam.selectedRecord}\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          openModal: true,\n          meanTestParameterList: list,\n          screenName: \"IDS_MEANPARAMETER\",\n          ncontrolcode: meanParam.ncontrolCode,\n          selectedTestParameterMean: meanParam.selectedRecord\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\n/*export function deleteResultUsedMaterial(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nresultusedinstrumentcode: inputData.selectedRecord.nresultusedinstrumentcode,\r\n            userinfo: inputData.userInfo,\r\n            ntransactiontestcode: inputData.masterData.RESelectedTest ?\r\n                inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n            nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\r\n            nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/deleteResultUsedMaterial\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false,\r\n                        operation: \"delete\",\r\n                        openModal: false,\r\n                        loadEsign: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}*/\n\nexport function getAverageResult(parameterData, index, selectedForumulaInput, userInfo, masterData, selectedRecord) {\n  return function (dispatch) {\n    let selectedTestParameters = selectedRecord.ResultParameter.filter(element => {\n      return element.editable == true;\n    });\n    selectedTestParameters = getRecordBasedOnPrimaryKeyName(selectedTestParameters, selectedRecord.parameterData.ntransactionsamplecode, \"ntransactionsamplecode\");\n    selectedTestParameters = getRecordBasedOnPrimaryKeyName(selectedTestParameters, parameterData.ndynamicformulafieldcode, \"ntestparametercode\");\n    let ResultParameterNew = [];\n\n    if (selectedTestParameters.length > 0) {\n      selectedTestParameters.map(Parameter => {\n        let resultParameterValues = {};\n        resultParameterValues.ntransactionresultcode = Parameter.ntransactionresultcode;\n        resultParameterValues.sresult = Parameter.sresult;\n        resultParameterValues.ntestparametercode = Parameter.ntestparametercode;\n        ResultParameterNew.push(resultParameterValues);\n      });\n    }\n\n    let inputParamData = {\n      naverageroundingdigits: selectedRecord.naverageroundingdigits,\n      ntransactiontestcode: parameterData.ntransactiontestcode,\n      ntestparametercode: parameterData.ndynamicformulafieldcode,\n      userinfo: userInfo,\n      ntransactionsamplecode: parameterData.ntransactionsamplecode,\n      ResultParameter: ResultParameterNew\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getAverageResult\", inputParamData).then(response => {\n      selectedForumulaInput[index].soldvalue = selectedForumulaInput[index].svalues;\n      selectedForumulaInput[index].svalues = response.data.AverageResult.sresult;\n      selectedForumulaInput[index].senableAverage = true; //selectedForumulaInput[index].svaluesold = \n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            ...response.data\n          },\n          selectedRecord: { ...selectedRecord,\n            selectedForumulaInput\n          },\n          // selectedRecord: {\n          //     ...selectedRecord,\n          //     parameterData: parameterData,\n          //     sformulacalculationdetail: response.data.query,\n          //     formulainput: response.data.Formula,\n          //     resultindex: index,\n          //     selectedForumulaInput,\n          //     selectedMandatory\n          // },\n          // validateFormulaMandyFields,\n          loading: false,\n          screenName: \"IDS_RESULTFORMULA\",\n          showFormula: true,\n          operation: \"validate\",\n          showValidate: true\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n} // export function getPredefinedData(inputData,selectedRecord,currentAlertResultCode,masterData,currentntestgrouptestpredefcode) {\n//     return function (dispatch) {\n//         let inputParamData = {\n//             ntestgrouptestpredefcode: inputData.ntestgrouptestpredefcode,\n//         }\n//         dispatch(initRequest(true));\n//         rsapi.post(\"resultentrybysample/getPredefinedData\", inputParamData)\n//             .then(response => {\n//                 let showMultiSelectCombo=false;  \n//                 let ResultParameter=selectedRecord['ResultParameter']\n//                 let onlyAlertMsgAvailable=false; \n//                 let testgrouptestpredefsubresult=response.data['testgrouptestpredefsubresult']\n//                 if(inputData['nneedsubcodedresult']===transactionStatus.YES){\n//                     showMultiSelectCombo=true\n//                     masterData['testgrouptestpredefsubresultOptions']=testgrouptestpredefsubresult  \n//                 }\n//                 else\n//                 {\n//                     onlyAlertMsgAvailable=true; \n//                 }\n//                // ResultParameter.map(Parameter=>\n//                     for(const Parameter of ResultParameter) \n//                     {\n//                         if(Parameter.additionalInfoUidata||Parameter.additionalInfoUidata===\"\"){\n//                             let additionalInfoUidata=typeof Parameter.additionalInfoUidata==='string'?Parameter.additionalInfoUidata===\"\"?\"\":JSON.parse(Parameter.additionalInfoUidata) :\n//                             Parameter.additionalInfoUidata\n//                             if(Parameter['ntransactionresultcode']===currentAlertResultCode&&\n//                             Parameter['ntestgrouptestpredefcode']===inputData['ntestgrouptestpredefcode']){\n//                             if(Parameter.additionalInfoUidata){\n//                                 selectedRecord[\"ntestgrouptestpredefsubcode\"]=additionalInfoUidata['ntestgrouptestpredefsubcode'] \n//                                 break;\n//                             }\n//                             }else{\n//                             if(selectedRecord[\"ntestgrouptestpredefsubcode\"]){\n//                                 delete selectedRecord[\"ntestgrouptestpredefsubcode\"] \n//                             }\n//                             }\n//                         }\n//                     };  \n//                 masterData['salertmessage']=inputData.salertmessage \n//                 dispatch({\n//                     type: DEFAULT_RETURN,\n//                     payload: { \n//                         loading: false,\n//                         masterData, \n//                         showAlertGrid: inputData.nneedresultentryalert===transactionStatus.NO?false:true,\n//                          showAlertForPredefined: true,\n//                          showMultiSelectCombo,\n//                          onlyAlertMsgAvailable,\n//                          additionalInfoView:false,\n//                          selectedRecord,\n//                          currentAlertResultCode,\n//                          currentntestgrouptestpredefcode\n//                     }\n//                 })\n//             })\n//             .catch(error => {\n//                 dispatch({\n//                     type: DEFAULT_RETURN,\n//                     payload: {\n//                         loading: false\n//                     }\n//                 })\n//                 if (error.response.status === 500) {\n//                     toast.error(error.message);\n//                 } else {\n//                     toast.warn(error.response.data);\n//                 }\n//             })\n//     }\n// }\n\nexport function getPredefinedData(inputData, selectedRecord, currentAlertResultCode, masterData, currentntestgrouptestpredefcode) {\n  return function (dispatch) {\n    let inputParamData = {\n      ntestgrouptestpredefcode: inputData.ntestgrouptestpredefcode\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getPredefinedData\", inputParamData).then(response => {\n      let showMultiSelectCombo = false;\n      let ResultParameter = selectedRecord['ResultParameter'];\n      let onlyAlertMsgAvailable = false;\n      let testgrouptestpredefsubresult = response.data['testgrouptestpredefsubresult'];\n\n      if (inputData['nneedsubcodedresult'] === transactionStatus.YES) {\n        showMultiSelectCombo = true;\n        masterData['testgrouptestpredefsubresultOptions'] = testgrouptestpredefsubresult;\n      } else {\n        onlyAlertMsgAvailable = true;\n      } // ResultParameter.map(Parameter=>\n\n\n      for (const Parameter of ResultParameter) {\n        if (Parameter.additionalInfoUidata || Parameter.additionalInfoUidata === \"\") {\n          let additionalInfoUidata = typeof Parameter.additionalInfoUidata === 'string' ? Parameter.additionalInfoUidata === \"\" ? \"\" : JSON.parse(Parameter.additionalInfoUidata) : Parameter.additionalInfoUidata;\n\n          if (Parameter['ntransactionresultcode'] === currentAlertResultCode && Parameter['ntestgrouptestpredefcode'] === inputData['ntestgrouptestpredefcode']) {\n            if (Parameter.additionalInfoUidata) {\n              selectedRecord[\"ntestgrouptestpredefsubcode\"] = additionalInfoUidata['ntestgrouptestpredefsubcode'];\n              break;\n            }\n          } else {\n            if (selectedRecord[\"ntestgrouptestpredefsubcode\"]) {\n              delete selectedRecord[\"ntestgrouptestpredefsubcode\"];\n            }\n          }\n        }\n      }\n\n      ;\n      masterData['salertmessage'] = inputData.salertmessage;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          masterData,\n          showAlert: inputData.nneedresultentryalert === transactionStatus.NO ? false : true,\n          showAlertForPredefined: true,\n          showMultiSelectCombo,\n          onlyAlertMsgAvailable,\n          additionalInfoView: false,\n          selectedRecord,\n          currentAlertResultCode,\n          currentntestgrouptestpredefcode\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getELNTestValidation(inputData, integrationSettings) {\n  return function (dispatch) {\n    //console.log(localStorage);\n    //localStorage.removeItem(\"linkedorder\");\n    const inputs = {\n      npreregno: inputData.test.npreregno,\n      ntransactiontestcode: inputData.test.ntransactiontestcode,\n      userInfo: inputData.userInfo\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getELNTestValidation\", inputs).then(response => {\n      let enlLink = \"\";\n\n      if (response.data) {\n        let link = \"\";\n        let detail = CF_encryptionData(\"-1//Sheet\").EncryptData; // let encryptedbatchid = CF_encryptionData(inputData.test.npreregno +'-' +inputData.test.ntransactionsamplecode +'-' + inputData.test.ntestcode +'-' + inputData.userInfo.nsitecode).EncryptData;\n        //let encryptedbatchid = CF_encryptionData(\"TR-23-0014-TR-23-0014-01-TestNew\").EncryptData;\n        // let encryptedbatchid = CF_encryptionData(inputData.test.sarno +'-' +inputData.test.ssamplearno +'-'+ inputData.test.stestsynonym+'-'+inputData.userInfo.ssitename).EncryptData;\n\n        const settedId = inputData.test.npreregno + '-' + inputData.test.ntransactionsamplecode + '-' + inputData.test.ntestcode + '-' + inputData.test.ntestrepeatno + '-' + inputData.test.ntestretestno + '-' + inputData.userInfo.nsitecode; //console.log(settedId);\n\n        let encryptedbatchid = CF_encryptionData(settedId).EncryptData;\n        const userObject = {\n          usercode: inputData.elnUserInfo.nelncode,\n          username: inputData.elnUserInfo.selnuserid,\n          userfullname: inputData.elnUserInfo.selnusername,\n          lsusergroup: {\n            usergroupcode: inputData.elnUserInfo.nelnusergroupcode,\n            usergroupname: inputData.elnUserInfo.nelnusergroupcode\n          },\n          lssitemaster: {\n            sitecode: inputData.elnSite.nelnsitecode\n          }\n        };\n        let encrypteduser = CF_encryptionData(userObject).EncryptData; //const baseURL = \"http://localhost:9090/ELN\";\n\n        const baseURL = integrationSettings[1].slinkname;\n        link = baseURL + \"/vieworder\" + '#{\"d\":\"' + settedId + '\",\"user\":\"' + encrypteduser + '\",\"batchid\":\"' + encryptedbatchid + '\"}'; // let a=\"/vieworder\" + '#{\"d\":\"' + inputData.test.npreregno +'-' +inputData.test.ntransactionsamplecode +'-'+ inputData.test.ntestcode+'-'+ inputData.test.ntestrepeatno+'-'+ inputData.test.ntestretestno+'-'+inputData.userInfo.nsitecode + '\",\"user\":\"' + encrypteduser + '\",\"batchid\":\"' + encryptedbatchid + '\"}';\n        // // return link;\n        // //   }\n        // let hashobject = JSON.parse(a);\n        //                     let batchid = \"\";\n        //  if (link.batchid !== undefined) {\n        // // eslint-disable-next-line no-useless-escape\n        // batchid = CF_decrypt(link.batchid ).replaceAll('\\\"', '');\n        //  }\n        // const encrypteduser1 = CF_decrypt(link);\n        //enlLink = link;\n        // console.log(\"--->\"+link);\n        //console.log(\"--->\"+batchid);\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...inputData.masterData,\n              //defaultSampleType: inputData.defaultSampleType,\n              ...response.data,\n              enlLink: link\n            },\n            openELNSheet: true,\n            loading: false,\n            enlLink: link // enlLink:enlLink\n\n          }\n        }); //enlLink = \"https://logilabelntest.azurewebsites.net/vieworder\".concat(link);    \n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_NOSHEETFORTHISTEST\"\n        }));\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...inputData.masterData,\n              //defaultSampleType: inputData.defaultSampleType,\n              ...response.data,\n              enlLink: \"\"\n            },\n            enlLink: \"\",\n            loading: false\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getConfigurationFilter(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getConfigurationFilter\", inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data // defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\n            // ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n            // DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\n\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getTestBasedBatchWorklist(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getTestBasedBatchWorklist\", inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            ...response.data // defaultTestvalues: inputData.defaultTestvalues //,\n            // defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\n            // ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n            // DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\n\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function addREAdhocParamter(inputDataObj) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"resultentrybysample/getAdhocParamter\", inputDataObj).then(response => {\n      let AdhocParamter = constructOptionList(response.data['AdhocParamter'] || [], 'ntestparametercode', 'sparametersynonym', undefined, undefined, undefined);\n      AdhocParamter = AdhocParamter.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          masterData: { ...inputDataObj.masterData,\n            AdhocParamter: AdhocParamter\n          },\n          screenName: 'IDS_ADHOCPARAMETER',\n          adhoctransactiontestcode: inputDataObj.ntransactiontestcode,\n          adhocpreregno: inputDataObj.npreregno,\n          openModal: true,\n          operation: \"IDS_ADD\",\n          selectedRecord: {},\n          adhocId: inputDataObj.adhocId\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function createAdhocParamter(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"resultentrybysample/createAdhocParamter\", inputParam.inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          masterData: { ...inputParam.inputData.masterData,\n            ...response.data\n          },\n          screenName: 'IDS_ADHOCPARAMETER',\n          openModal: false,\n          activeTestTab: \"IDS_RESULTS\",\n          activeTabIndex: 1\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function enforceResult(inputParam, userInfo) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let url = [];\n    url.push(rsapi.post(\"/grade/getGrade\", {\n      userinfo: userInfo\n    }));\n    url.push(rsapi.post(\"resultentrybysample/getenforceResult\", {\n      ncontrolcode: inputParam['ncontrolcode'],\n      ntransactiontestcode: inputParam['dataItem']['ntransactiontestcode'],\n      ntransactionresultcode: inputParam['dataItem']['ntransactionresultcode'],\n      userinfo: userInfo\n    }));\n    Axios.all(url).then(response => {\n      const Grade = constructOptionList(response[0].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, false);\n      let selectedRecord = {};\n      let savedResultparameter = response[1].data['savedResultparameter'];\n      selectedRecord = //savedResultparameter['sgradename']&&savedResultparameter['sgradename']!=='NA'?\n      {\n        'senforceresult': savedResultparameter['sfinal'] && savedResultparameter['sfinal'],\n        // 'ngradecode':{\n        //     'label':savedResultparameter['sgradename']&&savedResultparameter['sgradename'],\n        //     'value': savedResultparameter['ngradecode']&&savedResultparameter['ngradecode']\n        // } ,\n        'senforceresultcomment': savedResultparameter['senforceresultcomment'] && savedResultparameter['senforceresultcomment'],\n        ntransactionresultcode: savedResultparameter['ntransactionresultcode'],\n        ntransactiontestcode: savedResultparameter['ntransactiontestcode']\n      }; //        : {\n      //         'senforceresult':savedResultparameter['sfinal']&&savedResultparameter['sfinal'],\n      //         'senforceresultcomment':savedResultparameter['senforceresultcomment']&&savedResultparameter['senforceresultcomment'],\n      //         // 'ngradecode':{\n      //         //     'label':savedResultparameter['sgradename']&&savedResultparameter['sgradename'],\n      //         //     'value': savedResultparameter['ngradecode']&&savedResultparameter['ngradecode']\n      //         // } ,\n      //         ntransactionresultcode:savedResultparameter['ntransactionresultcode'],\n      //         ntransactiontestcode:savedResultparameter['ntransactiontestcode']\n      //    };\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: {\n            'GradeList': Grade.get(\"OptionList\"),\n            ...inputParam.masterData,\n            ...response.data\n          },\n          ncontrolcode: inputParam['ncontrolcode'],\n          selectedRecord,\n          screenName: \"IDS_ENFORCERESULT\",\n          openModal: true,\n          operation: \"update\",\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function ResultEntryViewPatientDetails(masterData, screenName, userInfo, viewdetails) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    const selectedRecord = {\n      ntestcode: viewdetails.test.ntestcode\n    };\n    rsapi.post(\"worklist/getSampleViewDetails\", {\n      selectedRecord,\n      PatientId: viewdetails.test.PatientId,\n      npreregno: viewdetails.test.npreregno,\n      userinfo: userInfo\n    }).then(response => {\n      masterData['AuditModifiedComments'] = [];\n      masterData['AuditModifiedComments'] = response.data['AuditModifiedComments'];\n      masterData['viewdetails'] = [];\n      masterData['viewdetails'] = response.data['viewdetails'][0]; //sortData(masterData);\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          screenName: \"IDS_PREVIOUSRESULTVIEW\",\n          operation: \"\",\n          loading: false,\n          openModal: true\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function resultEntryGetParameter(selectedRecord, inputData, userInfo, ncontrolcode, testskip, testtake) {\n  if (inputData.realTestcodeValue.ntestcode !== 0) {\n    return function (dispatch) {\n      let additionalInfo = [];\n      let selectedSpecification = selectedRecord.selectedSpecification;\n      let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\n      TestList = TestList.splice(testskip, testskip + testtake);\n      let acceptTestList = getSameRecordFromTwoArrays(TestList, inputData.RESelectedTest, \"ntransactiontestcode\");\n\n      if (acceptTestList && acceptTestList.length > 0) {\n        if (Object.values(inputData).length > 0 && inputData.RESelectedTest.length > 0) {\n          let inputParamData = {\n            ntransactiontestcode: acceptTestList[0].ntransactiontestcode.toString(),\n            ntestcode: inputData.realTestcodeValue.ntestcode,\n            nallottedspeccode: selectedRecord.nallottedspeccode.value,\n            nspecsampletypecode: selectedRecord.ncomponentcode.value,\n            userinfo: userInfo\n          };\n          dispatch(initRequest(true));\n          rsapi.post(\"resultentrybysample/getResultEntryParameter\", inputParamData).then(response => {\n            //     const ComponentMap = constructOptionList(response.data[\"Component\"] || [], \"ncomponentcode\",\n            //     \"scomponentname\", undefined, undefined, false);\n            // const Component = ComponentMap.get(\"OptionList\");\n            let selectedResultGrade = [];\n            let paremterResultcode = [];\n            const parameterResults = response.data.ResultParameter;\n            let predefDefaultFlag = false;\n            parameterResults.map((param, index) => {\n              selectedResultGrade[index] = {\n                ngradecode: param.ngradecode\n              };\n              paremterResultcode[index] = param.ntransactionresultcode;\n              let jsondata = JSON.parse(param.jsondata['value']);\n\n              if (jsondata.hasOwnProperty('additionalInfo')) {\n                additionalInfo[param.ntransactionresultcode] = jsondata['additionalInfo'];\n              }\n\n              predefDefaultFlag = false;\n              response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\n                if (!predefDefaultFlag) {\n                  predefDefaultFlag = true;\n                  response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined, undefined, undefined).get(\"OptionList\");\n                }\n              });\n              param['editable'] = false;\n            });\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                masterData: { ...inputData,\n                  ...response.data,\n                  paremterResultcode\n                },\n                selectedRecord: {\n                  additionalInfo: additionalInfo.length > 0 ? additionalInfo : [],\n                  selectedResultGrade: selectedResultGrade,\n                  ResultParameter: response.data.ResultParameter,\n                  selectedSpecification: selectedSpecification,\n                  nallottedspeccode: selectedRecord.nallottedspeccode,\n                  ncomponentcode: selectedRecord.ncomponentcode,\n                  selectedComponent: selectedRecord.selectedComponent\n                },\n                selectedsubcode: undefined,\n                parameterResults: response.data.ResultParameter,\n                isParameterInitialRender: true,\n                loading: false,\n                screenName: \"IDS_RESULTENTRYPARAMETER\",\n                openModal: true,\n                operation: \"update\",\n                activeTestKey: \"IDS_RESULTS\",\n                ncontrolcode: ncontrolcode\n              }\n            });\n          }).catch(error => {\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                loading: false\n              }\n            });\n\n            if (error.response.status === 500) {\n              toast.error(error.message);\n            } else {\n              toast.warn(error.response.data);\n            }\n          }); //}\n        } else {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n          toast.warn(intl.formatMessage({\n            id: \"IDS_SELECTTESTTOENTERRESULT\"\n          }));\n        }\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SELECTTESTTOENTERRESULT\"\n        }));\n      }\n    };\n  } else {\n    toast.warn(intl.formatMessage({\n      id: \"IDS_SELECTVALIDTEST\"\n    }));\n  }\n}\nexport function resultEntryGetSpec(inputData, userInfo, ncontrolcode, testskip, testtake) {\n  return function (dispatch) {\n    if (inputData.realTestcodeValue.length !== 0 && inputData.realTestcodeValue.ntestcode !== 0) {\n      let additionalInfo = [];\n      let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\n      TestList = TestList.splice(testskip, testskip + testtake);\n      let inputParamData = {\n        nregsubtypecode: inputData.realRegSubTypeValue.nregsubtypecode,\n        nregtypecode: inputData.realRegSubTypeValue.nregtypecode,\n        ntestcode: inputData.realTestcodeValue.ntestcode,\n        userinfo: userInfo\n      };\n      dispatch(initRequest(true));\n      rsapi.post(\"resultentrybysample/getResultEntrySpec\", inputParamData).then(response => {\n        const allottedspeccode = {\n          value: response.data.nallottedspeccode[\"nallottedspeccode\"],\n          label: response.data.nallottedspeccode[\"sspecname\"]\n        };\n        const componentcode = {\n          value: response.data.ncomponentcode[\"ncomponentcode\"],\n          label: response.data.ncomponentcode[\"scomponentname\"]\n        }; // componentcode.push({\n        //     \"value\":response.data.ncomponentcode[\"ncomponentcode\"],\n        //     \"label\": response.data.ncomponentcode[\"scomponentname\"]\n        // });\n\n        let selectedResultGrade = [];\n        let paremterResultcode = [];\n        const parameterResults = response.data.ResultParameter;\n        let predefDefaultFlag = false;\n        parameterResults.map((param, index) => {\n          selectedResultGrade[index] = {\n            ngradecode: param.ngradecode\n          };\n          paremterResultcode[index] = param.ntransactionresultcode;\n          let jsondata = JSON.parse(param.jsondata['value']);\n\n          if (jsondata.hasOwnProperty('additionalInfo')) {\n            additionalInfo[param.ntransactionresultcode] = jsondata['additionalInfo'];\n          }\n\n          predefDefaultFlag = false;\n          response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\n            if (!predefDefaultFlag) {\n              predefDefaultFlag = true;\n              response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined, undefined, undefined).get(\"OptionList\");\n            }\n          });\n          param['editable'] = false;\n        });\n        const SpecificationMap = constructOptionList(response.data[\"Specification\"] || [], \"nallottedspeccode\", \"sspecname\", undefined, undefined, false);\n        const Specification = SpecificationMap.get(\"OptionList\");\n        const ComponentMap = constructOptionList(response.data[\"Component\"] || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, false);\n        const Component = ComponentMap.get(\"OptionList\");\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...inputData,\n              //...sortData(response.data,\"desc\",\"ntransactiontestcode\"),\n              ...response.data,\n              paremterResultcode,\n              selectedSpecification: Specification,\n              selectedComponent: Component //selectedResultGrade ,\n\n            },\n            selectedRecord: {\n              additionalInfo: additionalInfo.length > 0 ? additionalInfo : [],\n              selectedResultGrade: selectedResultGrade,\n              selectedSpecification: Specification,\n              selectedComponent: Component,\n              ResultParameter: response.data.ResultParameter,\n              nallottedspeccode: allottedspeccode,\n              ncomponentcode: componentcode //nallottedspeccode:selectedRecord.nallottedspeccode\n\n            },\n            parameterResults: response.data.ResultParameter,\n            isParameterInitialRender: true,\n            loading: false,\n            screenName: \"IDS_RESULTENTRYPARAMETER\",\n            openModal: true,\n            operation: \"update\",\n            activeTestKey: \"IDS_RESULTS\",\n            ncontrolcode: ncontrolcode\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      }); //}\n    } else {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTVALIDTEST\"\n      }));\n    }\n  };\n}\nexport function resultEntryGetComponent(selectedRecord, inputData, userInfo, ncontrolcode, testskip, testtake) {\n  if (inputData.realTestcodeValue.ntestcode !== 0) {\n    return function (dispatch) {\n      let additionalInfo = [];\n      let selectedSpecification = selectedRecord.selectedSpecification;\n      let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\n      TestList = TestList.splice(testskip, testskip + testtake);\n      let acceptTestList = getSameRecordFromTwoArrays(TestList, inputData.RESelectedTest, \"ntransactiontestcode\");\n\n      if (acceptTestList && acceptTestList.length > 0) {\n        if (Object.values(inputData).length > 0 && inputData.RESelectedTest.length > 0) {\n          let inputParamData = {\n            ntransactiontestcode: acceptTestList[0].ntransactiontestcode.toString(),\n            ntestcode: inputData.realTestcodeValue.ntestcode,\n            nallottedspeccode: selectedRecord.nallottedspeccode.value,\n            userinfo: userInfo\n          };\n          dispatch(initRequest(true));\n          rsapi.post(\"resultentrybysample/getResultEntryComponent\", inputParamData).then(response => {\n            const ComponentMap = constructOptionList(response.data[\"Component\"] || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, false);\n            const Component = ComponentMap.get(\"OptionList\");\n            const componentcode = {\n              value: response.data.ncomponentcode[\"ncomponentcode\"],\n              label: response.data.ncomponentcode[\"scomponentname\"]\n            };\n            let selectedResultGrade = [];\n            let paremterResultcode = [];\n            const parameterResults = response.data.ResultParameter;\n            let predefDefaultFlag = false;\n            parameterResults.map((param, index) => {\n              selectedResultGrade[index] = {\n                ngradecode: param.ngradecode\n              };\n              paremterResultcode[index] = param.ntransactionresultcode;\n              let jsondata = JSON.parse(param.jsondata['value']);\n\n              if (jsondata.hasOwnProperty('additionalInfo')) {\n                additionalInfo[param.ntransactionresultcode] = jsondata['additionalInfo'];\n              }\n\n              predefDefaultFlag = false;\n              response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\n                if (!predefDefaultFlag) {\n                  predefDefaultFlag = true;\n                  response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined, undefined, undefined).get(\"OptionList\");\n                }\n              });\n              param['editable'] = false;\n            });\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                masterData: { ...inputData,\n                  ...response.data,\n                  paremterResultcode\n                },\n                selectedRecord: {\n                  additionalInfo: additionalInfo.length > 0 ? additionalInfo : [],\n                  selectedResultGrade: selectedResultGrade,\n                  ResultParameter: response.data.ResultParameter,\n                  selectedSpecification: selectedSpecification,\n                  nallottedspeccode: selectedRecord.nallottedspeccode,\n                  selectedComponent: Component,\n                  ncomponentcode: componentcode\n                },\n                selectedsubcode: undefined,\n                parameterResults: response.data.ResultParameter,\n                isParameterInitialRender: true,\n                loading: false,\n                screenName: \"IDS_RESULTENTRYPARAMETER\",\n                openModal: true,\n                operation: \"update\",\n                activeTestKey: \"IDS_RESULTS\",\n                ncontrolcode: ncontrolcode\n              }\n            });\n          }).catch(error => {\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                loading: false\n              }\n            });\n\n            if (error.response.status === 500) {\n              toast.error(error.message);\n            } else {\n              toast.warn(error.response.data);\n            }\n          }); //}\n        } else {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n          toast.warn(intl.formatMessage({\n            id: \"IDS_SELECTTESTTOENTERRESULT\"\n          }));\n        }\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SELECTTESTTOENTERRESULT\"\n        }));\n      }\n    };\n  } else {\n    toast.warn(intl.formatMessage({\n      id: \"IDS_SELECTVALIDTEST\"\n    }));\n  }\n}\nexport function addREAdhocTestParamter(inputDataObj) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"resultentrybysample/getAdhocTestParamter\", inputDataObj).then(response => {\n      let AdhocTestParamter = constructOptionList(response.data['TestParameter'] || [], 'ntestparametercode', 'sparametersynonym', undefined, undefined, undefined);\n      AdhocTestParamter = AdhocTestParamter.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          masterData: { ...inputDataObj.masterData,\n            AdhocParamter: AdhocTestParamter\n          },\n          screenName: 'IDS_ADHOCPARAMETER',\n          adhoctransactiontestcode: inputDataObj.ntransactiontestcode,\n          adhocpreregno: inputDataObj.npreregno,\n          openModal: true,\n          operation: \"IDS_ADD\",\n          selectedRecordAdhocParameter: {},\n          adhocId: inputDataObj.adhocId\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function createAdhocTestParamter(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"resultentrybysample/createAdhocTestParamter\", inputParam.inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          masterData: { ...inputParam.inputData.masterData,\n            ...response.data\n          },\n          screenName: 'IDS_ADHOCPARAMETER',\n          openModal: false,\n          activeTestTab: \"IDS_RESULTS\",\n          activeTabIndex: 1,\n          selectedRecordAdhocParameter: {}\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function CompletePopupAction(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getAnalysedUser\", inputParam.inputData).then(response => {\n      let selectedRecordCompleteForm = {};\n      const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\", \"susername\", undefined, undefined, false);\n      const Users = UsersMap.get(\"OptionList\"); //Added by sonia on 19-06-2024 for JIRA ID:ALPD-4422\n\n      if (response.data.userCode !== undefined && response.data.userName !== undefined) {\n        selectedRecordCompleteForm[\"nusercode\"] = {\n          \"value\": response.data.userCode,\n          \"label\": response.data.userName\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Users,\n          isOpen: true,\n          operation: inputParam.inputData.operation,\n          screenName: \"IDS_RESULTENTRYCOMPLETE\",\n          openModal: true,\n          ncontrolCode: inputParam.inputData.ncontrolcode,\n          loading: false,\n          isCompleteInitialRender: true,\n          selectedRecordCompleteForm\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n} //Added by sonia for ALPD-4084 on May 2 2024 Export action\n\nexport function exportAction(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getExportData\", inputParam.inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      let value = \"\";\n\n      if (response.data.rtn === \"Success\") {\n        //Modified by sonia on 11-06-2024 using camelcase format in the key value\n        value = response.data[\"exportFileViewUrl\"];\n        var win = window.open(value);\n\n        if (win) {\n          win.focus();\n        } else {\n          intl.warn('IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE');\n        }\n      } else {\n        if (response.data[\"rtn\"]) {\n          toast.warn(intl.formatMessage({\n            id: response.data.rtn\n          }));\n        }\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n} //ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\n\nexport function getSectionChange(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"resultentrybysample/getSectionChange\", inputParam.inputData).then(response => {\n      let section = []; //ALPD-4050\n\n      let selectedRecord = { ...inputParam.selectedRecord,\n        nsectioncode: \"\"\n      };\n      const sectionMap = constructOptionList(response.data.Section || [], \"nsectioncode\", \"ssectionname\", undefined, undefined, false);\n      section = sectionMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          section,\n          loading: false,\n          loadEsign: false,\n          openModal: true,\n          operation: inputParam.inputData.operation,\n          screenName: inputParam.inputData.screenName,\n          ncontrolcode: inputParam.inputData.ncontrolcode,\n          selectedRecord\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n} //ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\n\nexport function updateSectionTest(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"resultentrybysample/updateSectionTest\", inputParam.inputData).then(response => {\n      if (response.data.rtn === undefined || response.data.rtn === \"Success\") {\n        let responseData = sortData(response.data, 'ascending', 'ntransactionresultcode');\n        let selectedRecord = { ...inputParam.selectedRecord,\n          \"nsectioncode\": \"\"\n        };\n        responseData[\"RESelectedTest\"] = getSameRecordFromTwoArrays(responseData.RE_TEST, inputParam.RESelectedTest, \"ntransactiontestcode\"); //ALPD-4226--Vignesh R(24-05-2024)--Test is de-selected when changing the section\n\n        let selectedTestList = [];\n\n        if (responseData[\"RESelectedTest\"].length === 0 && responseData.RE_TEST.length > 0) {\n          selectedTestList.push(responseData.RE_TEST[0]);\n          responseData[\"RESelectedTest\"] = selectedTestList;\n        }\n\n        let masterData = { ...inputParam.inputData.masterData,\n          ...responseData\n        };\n        let respObject = { ...inputParam.inputData,\n          ...inputParam.inputData.masterData,\n          masterData,\n          loading: false,\n          loadEsign: false,\n          openModal: false,\n          showSample: undefined,\n          selectedRecord\n        };\n        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false,\n            openModal: false\n          }\n        });\n        toast.warn(response.data.rtn);\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n} //ALPD-4870-To get previously save filter details when click the filter name,done by Dhanushya RI\n\nexport function getResultEntryFilter(inputParam) {\n  let masterData = { ...inputParam.masterData\n  };\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"resultentrybysample/getResultEntryFilter\", { ...inputParam.inputData,\n      nneedsubsample: //inputParamData.masterData.nneedsubsample\n      inputParam.masterData.realRegSubTypeValue.nneedsubsample\n    }).then(response => {\n      //let masterData = { ...inputParamData.masterData }\n      if (inputParam.refs.searchSampleRef !== undefined && inputParam.refs.searchSampleRef.current !== null) {\n        inputParam.refs.searchSampleRef.current.value = \"\";\n        masterData['searchedSample'] = undefined;\n      }\n\n      if (inputParam.refs.searchSubSampleRef !== undefined && inputParam.refs.searchSubSampleRef.current !== null) {\n        inputParam.refs.searchSubSampleRef.current.value = \"\";\n        masterData['searchedSubSample'] = undefined;\n      }\n\n      if (inputParam.refs.searchTestRef !== undefined && inputParam.refs.searchTestRef.current !== null) {\n        inputParam.refs.searchTestRef.current.value = \"\"; // masterData['searchedTests'] = undefined\n\n        masterData['searchedTest'] = undefined;\n      } //sortData(response.data)\n\n\n      sortData(response.data, 'ascending', 'ntransactionresultcode');\n\n      if (response.data.rtn == \"IDS_USERNOTINRESULTENTRYFLOW\") {\n        toast.warning(intl.formatMessage({\n          id: \"IDS_USERNOTINRESULTENTRYFLOW\"\n        }));\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            ...response.data,\n            realFromDate: response.data[\"fromDate\"],\n            realToDate: response.data[\"toDate\"]\n          },\n          nfilternamecode: inputParam.inputData.nfilternamecode,\n          loading: false,\n          modalShow: false,\n          showTest: inputParam.inputData.showTest,\n          showSample: inputParam.inputData.showSample,\n          activeTestKey: inputParam.inputData.activeTestKey\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else if (error.response.status === 401) {\n        toast.warn(intl.formatMessage({\n          id: error.response.data.rtn\n        }));\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            masterData: { ...masterData,\n              ...error.response.data,\n              realFromDate: error.response.data[\"fromDate\"],\n              realToDate: error.response.data[\"toDate\"]\n            }\n          }\n        });\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5304/QuaLISWeb/src/actions/ResultEntryAction.js"],"names":["rsapi","DEFAULT_RETURN","toast","initRequest","intl","Axios","numericGrade","constructOptionList","fillRecordBasedOnCheckBoxSelection","filterRecordBasedOnTwoArrays","getRecordBasedOnPrimaryKeyName","getSameRecordFromTwoArrays","replaceUpdatedObject","sortData","updatedObjectWithNewElement","rearrangeDateFormat","filterRecordBasedOnPrimaryKeyName","reArrangeArrays","compareArrays","CF_encryptionData","sortDataByParent","checkBoxOperation","transactionStatus","crudMaster","postCRUDOrganiseTransSearch","getsubSampleREDetail","inputData","isServiceRequired","dispatch","inputParamData","ntype","nflag","nsampletypecode","nregtypecode","nregsubtypecode","npreregno","ntranscode","String","ntransactionstatus","ntransactiontestcode","userinfo","ntestcode","napprovalversioncode","fromdate","todate","activeTestKey","activeSampleKey","nneedsubsample","masterData","realRegSubTypeValue","ndesigntemplatemappingcode","nneedtemplatebasedflow","nworlistcode","nbatchmastercode","nneedReceivedInLab","activeName","dataStateName","post","then","response","data","check","SINGLESELECT","undefined","MULTISELECT","RESelectedTest","length","type","payload","loading","warn","formatMessage","id","sample","oldSelectedTest","childTabsKey","removeElementFromArray","RESelectedSubSample","QUICKSELECTSTATUS","QUICKSELECTALL","RE_SUBSAMPLE","RE_TEST","RESelectedSample","searchSubSampleRef","current","value","searchTestRef","testskip","testtake","subSampleSkip","subSampleTake","skipInfo","TestParameters","ResultUsedInstrument","ResultUsedMaterial","ResultUsedTasks","RegistrationTestAttachment","ResultChangeHistory","RegistrationTestComment","RegistrationComment","wholeTestList","map","b","test","index","includes","splice","keepOld","list","dbData","reduce","unique","item","skip","sort","filter","multifilterInfo","multiFilterLoad","searchSampleRef","openModal","subsampleskip","take","activeTabIndex","catch","error","status","message","oldSelectedSubSample","subsampletake","TestSelected","subSampleSelected","isGrandChildGetRequired","toString","filterSelectedSubSample","ntransactionsamplecode","subsample","join","getTestChildTabREDetail","getTestREDetail","subsamplecheck","SubSampleSelected","wholeSubSample","forEach","selectedTest","selectedSubSample1","x","bool","showFilter","activeSampleTab","subSample","responseData","RegistrationSampleComment","RegistrationSampleAttachment","testList","wholeSubsampleList","selectedSubSample","activeSubSampleTab","activeTestTab","screenName","console","log","getSampleChildTabREDetail","url","activeTabId","getRERegistrationType","defaultSampleType","realDesignTemplateMapping","realApproveConfigVersion","realApprovalConfigVersionList","realDesignTemplateMappingList","realFilterStatusList","realRegistrationSubTypeList","realRegistrationTypeList","realTestvaluesList","getRERegistrationSubType","defaultRegistrationType","getREApprovalConfigVersion","defaultRegistrationSubType","getREFilterStatus","defaultjobstatus","getREJobStatus","defaultApprovalConfigVersion","getResultEntryDetails","refs","rtn","warning","realFromDate","realToDate","showTest","showSample","resultDataState","instrumentDataState","materialDataState","taskDataState","documentDataState","resultChangeDataState","testCommentDataState","historyDataState","samplePrintHistoryDataState","sampleHistoryDataState","resultGetModule","userInfo","ncontrolcode","additionalInfo","TestList","searchedTest","acceptTestList","Object","values","realRegTypeValue","selectedRecord","selectedResultGrade","paremterResultcode","parameterResults","ResultParameter","predefDefaultFlag","formFields","FormFields","formFieldJSON","JSON","parse","jsondata","entries","key","push","param","ngradecode","ntransactionresultcode","hasOwnProperty","PredefinedValues","predefinedvalue","get","ResultAccuracyList","ResultAccuracy","UnitList","Unit","isParameterInitialRender","operation","completeTest","inputParam","acceptList","completeResultId","booleanFlag","isSearched","testChildGetREParam","ninsertMaterialInventoryTrans","nportalrequired","basedrulesengine","napprovalconfigcode","transactiontestcode","nsettingcode","nusercode","susername","RE_SAMPLE","onlySampleService","getNewSample","selectedSampleArray","subSampleArray","selectPreregNOBefore","unwantedPreregno","some","y","boolSelectedSubSample","searchedSubSample","backfrontTest","objx","objy","searchedSubSamplebefore","searchedSubSampleaftere","unwantedSamplecode","RESelectedTest1","RESelectedTest2","searchedSample","keys","respObject","RegistrationTestAlert","NewTestGroupTestAlert","showAlertGrid","showAlertForPredefined","additionalInfoView","loadEsign","showConfirmAlert","paramList","postParamList","inputParameter","fecthInputObject","fetchUrl","primaryKeyField","fetchSelectedData","testStart","subSampleNeeded","needjoballocationandmyjob","NeedJobAllocationAndMyjob","nneedjoballocation","nneedmyjob","responseRESelectedTest","responseRE_TEST","respObject1","compareTwoArray","firstArray","secondArray","PrimaryKey","filterArray","testMethodSourceEdit","ntestgrouptestcode","editSourceMethodId","TagSource","SourceData","TagListSource","TagMethod","MethodData","TagListMethod","stestsynonym","nsourcecode","SourceDataValue","nmethodcode","MethodDataValue","updateParameterComments","sresultcomment","addREInstrument","urlArray","resultusedinstrument","timeZoneService","UTCtimeZoneService","all","TagInstrumentName","InstrumentName","TagListInstrumentName","TagInsturmentcategory","InstrumentCategory","TagListInstrumentCategory","TagTimeZone","TagListTimeZone","selectedId","selectedRecordInstrumentForm","sarno","ssamplearno","ninstrumentcatcode","ninstrumentnamecode","dtodate","dfromdate","ntzfromdate","ntimezonecode","stimezoneid","ntztodate","timeZoneList","isInstrumentInitialRender","addResultUsedInstrumentId","addREMaterial","nsectioncode","materialTypeMap","MaterialType","materialType","materialCatMap","MaterialCategory","materialCat","materialMap","Material","material","materialInventoryMap","MaterialInventory","materialInventory","selectedRecordMaterialForm","ntestgroupmaterial","YES","ssectionname","nmaterialtypecode","nmaterialcatcode","nmaterialcode","nmaterialinventorycode","sunitname","savailablequantity","savailablequatity","isMaterialInitialRender","addResultUsedMaterailId","getREMaterialComboGet","getREMaterialCategoryByType","getREMaterialByCategory","getREMaterialInvertoryByMaterial","getAvailableMaterialQuantity","inventory","deleteInstrumentRecord","nresultusedinstrumentcode","fetchInstrumentRecord","editRow","getResultUsedInstrument","TagInstrumentId","InstrumentId","TagListInstrumentId","EditResultUsedInstrument","sinstrumentcatname","sinstrumentname","ninstrumentcode","sinstrumentid","stzfromdate","stztodate","sfromdate","stodate","ncontrolCode","fetchMaterialRecord","nresultusedmaterialcode","EditResultUsedMaterial","label","smaterialtypename","nmaterialcategorycode","smaterialcatname","smaterialname","ninventorycode","sinventoryid","susedquantity","nqtyused","scarriergas","smobilephase","sremarks","deleteTaskRecord","nresultusedtaskcode","fetchTaskRecord","EditResultUsedTasks","selectedRecordTaskForm","sanalysistime","smisctime","spreanalysistime","spreparationtime","scomments","staskprocedure","isTaskInitialRender","parameterRecord","controlcode","ParameterComments","sparametersynonym","checkListRecord","napprovalparametercode","nchecklistversioncode","lsteditedQB","ChecklistData","checklist","nchecklistversionqbcode","nchecklistqbcode","sdefaultvalue","nchecklistcomponentcode","openTemplateModal","needSaveButton","onSaveCheckList","listResultCheckList","editedQB","qbcode","ResultCheckList","templateData","defaultTest","preregno","getFormula","parameterData","nformulacode","ntestgrouptestformulacode","validateFormulaMandyFields","DynamicFormulaFields","selectedForumulaInput","selectedForumulaInput1","selectedMandatory","fields","dynamicformulafields","selectedTestParameters","ndynamicformulafieldcode","element","sresult","nisaverageneed","maxResultCode","Math","max","o","paramValue","svalues","sparameter","sdescription","senableAverage","svalue","ntestparametercode","naverageroundingdigits","nroundingdigits","sformulacalculationdetail","query","formulainput","Formula","resultindex","showFormula","showValidate","calculateFormula","inputDataValue","sformulacalculationcode","lstDynamicFields","Result","parseInt","getREFilterTestData","defaultFilterStatus","DesignTemplateMappingValue","getREFilterTemplate","updateTestMethodSource","resultImportFile","formData","returnStatus","info","validateEsignCredentialComplete","methodUrl","toLowerCase","esignpassword","esigncomments","esignreason","agree","password","updateSectionTest","getMeanCalculationTestParameter","meanParam","meanTestParameterList","selectedTestParameterMean","getAverageResult","editable","ResultParameterNew","Parameter","resultParameterValues","soldvalue","AverageResult","getPredefinedData","currentAlertResultCode","currentntestgrouptestpredefcode","ntestgrouptestpredefcode","showMultiSelectCombo","onlyAlertMsgAvailable","testgrouptestpredefsubresult","additionalInfoUidata","salertmessage","showAlert","nneedresultentryalert","NO","getELNTestValidation","integrationSettings","inputs","enlLink","link","detail","EncryptData","settedId","ntestrepeatno","ntestretestno","nsitecode","encryptedbatchid","userObject","usercode","elnUserInfo","nelncode","username","selnuserid","userfullname","selnusername","lsusergroup","usergroupcode","nelnusergroupcode","usergroupname","lssitemaster","sitecode","elnSite","nelnsitecode","encrypteduser","baseURL","slinkname","openELNSheet","getConfigurationFilter","getTestBasedBatchWorklist","addREAdhocParamter","inputDataObj","AdhocParamter","adhoctransactiontestcode","adhocpreregno","adhocId","createAdhocParamter","enforceResult","Grade","savedResultparameter","ResultEntryViewPatientDetails","viewdetails","PatientId","resultEntryGetParameter","realTestcodeValue","selectedSpecification","nallottedspeccode","nspecsampletypecode","ncomponentcode","selectedComponent","selectedsubcode","resultEntryGetSpec","allottedspeccode","componentcode","SpecificationMap","Specification","ComponentMap","Component","resultEntryGetComponent","addREAdhocTestParamter","AdhocTestParamter","selectedRecordAdhocParameter","createAdhocTestParamter","CompletePopupAction","selectedRecordCompleteForm","UsersMap","Users","userCode","userName","isOpen","isCompleteInitialRender","exportAction","win","window","open","focus","getSectionChange","section","sectionMap","Section","selectedTestList","getResultEntryFilter","nfilternamecode","modalShow"],"mappings":"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EAAE;AADsB,SAAnB,CAAX;AAGH;AACJ,KAlKD,MAkKO;AACH5C,MAAAA,QAAQ,CAAC;AACLuC,QAAAA,IAAI,EAAElE,cADD;AAELmE,QAAAA,OAAO,EAAE;AACLC,UAAAA,OAAO,EAAE;AADJ;AAFJ,OAAD,CAAR;AAMAnE,MAAAA,KAAK,CAACoE,IAAN,CAAWlE,IAAI,CAACmE,aAAL,CAAmB;AAC1BC,QAAAA,EAAE,EAAE;AADsB,OAAnB,CAAX;AAGH;AACJ,GAlLD;AAoLH,C,CACD;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,OAAO,SAASsK,YAAT,CAAsBC,UAAtB,EAAkCC,UAAlC,EAA8CvC,QAA9C,EAAwDwC,gBAAxD,EAAyEC,WAAzE,EAAqFjB,KAArF,EAA4F;AAC/F,MAAIe,UAAU,KAAKjL,SAAf,IAA4BiL,UAAU,CAAC9K,MAAX,GAAoB,CAApD,EAAuD;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","sourcesContent":["import rsapi from '../rsapi';\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport {\r\n    initRequest\r\n} from './LoginAction';\r\nimport {\r\n    intl\r\n} from '../components/App';\r\nimport Axios from 'axios';\r\nimport {\r\n    numericGrade\r\n} from '../pages/ResultEntryBySample/ResultEntryValidation';\r\nimport {\r\n    constructOptionList,\r\n    fillRecordBasedOnCheckBoxSelection,\r\n    filterRecordBasedOnTwoArrays,\r\n    getRecordBasedOnPrimaryKeyName,\r\n    getSameRecordFromTwoArrays,\r\n    replaceUpdatedObject,\r\n    sortData,\r\n    updatedObjectWithNewElement, rearrangeDateFormat, filterRecordBasedOnPrimaryKeyName, reArrangeArrays, compareArrays,CF_encryptionData,sortDataByParent\r\n} from '../components/CommonScript';\r\nimport {\r\n    checkBoxOperation,\r\n    transactionStatus\r\n} from '../components/Enumeration';\r\nimport { crudMaster, postCRUDOrganiseTransSearch } from './ServiceAction'\r\n\r\nexport function getsubSampleREDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntype: 2,\r\n            nflag: inputData.nflag || 2,\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntranscode: String(inputData.ntransactionstatus),\r\n            ntransactiontestcode: 0,\r\n            userinfo: inputData.userinfo,\r\n            ntestcode: inputData.ntestcode,\r\n            napprovalversioncode: inputData.napprovalversioncode,\r\n            fromdate: inputData.fromdate,\r\n            todate: inputData.todate,\r\n            activeTestKey: inputData.activeTestKey,\r\n            activeSampleKey: inputData.activeSampleKey,\r\n            //nneedsubsample: inputData.masterData.nneedsubsample,\r\n            nneedsubsample: inputData.masterData.realRegSubTypeValue.nneedsubsample,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            nneedtemplatebasedflow: inputData.nneedtemplatebasedflow,\r\n            nworlistcode: inputData.nworlistcode,\r\n            nbatchmastercode:inputData.nbatchmastercode,\r\n            nneedReceivedInLab:inputData.nneedReceivedInLab\r\n         }\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\r\n        //     documentDataState, testCommentDataState } = inputData\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(\"resultentrybysample/getResultEntryDetails\", { ...inputParamData, checkBoxOperation: inputData.checkBoxOperation })\r\n                .then(response => {\r\n                    // if (response.data.DynamicGetSamples) {\r\n                    //     sortData(response.data.DynamicGetSamples, \"\", \"\");\r\n                    // }\r\n                    // if (response.data.DynamicGetTests) {\r\n                    //     sortData(response.data.DynamicGetTests, \"descending\", \"npreregno\");\r\n                    // }\r\n                    sortData(response.data);\r\n                //ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\r\n                let check=false;\r\n                        if(inputData.checkBoxOperation===checkBoxOperation.SINGLESELECT){\r\n                            if(response.data['RE_TEST']===undefined)\r\n                            check=true;\r\n                        }\r\n                        if(inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){\r\n                                if(response.data['RE_TEST']===undefined&&inputData.masterData.RESelectedTest.length===0)\r\n                                    check=true;\r\n                        }\r\n                   if( check){\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        toast.warn(intl.formatMessage({\r\n                            id: \"IDS_TESTISNOTAVAILABLE\"\r\n                        }));\r\n                   }\r\n                   else{\r\n                    response.data['RE_SUBSAMPLE']= sortDataByParent(response.data['RE_SUBSAMPLE'],inputData.sample, \"npreregno\");\r\n                    // let responseData = { ...response.data, RESelectedSubSample: inputData.RESelectedSubSample }\r\n                    // responseData = sortData(responseData)\r\n                    let oldSelectedTest = inputData.masterData.RESelectedTest\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n\r\n                    //let RESelectedSubSample = inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 5 || inputData.checkBoxOperation === 7 ? response.data.RESelectedSubSample : inputData.masterData.RESelectedSubSample\r\n                    let RESelectedSubSample = inputData.checkBoxOperation === checkBoxOperation.SINGLESELECT || inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS || inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL ? response.data.RESelectedSubSample : inputData.masterData.RESelectedSubSample\r\n                    RESelectedSubSample = inputData.masterData.realRegSubTypeValue.nneedsubsample ? RESelectedSubSample : inputData.masterData.RE_SUBSAMPLE;\r\n                    //for with sub sample\r\n                 /*   let check =true;\r\n                    if(inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){\r\n                        if(inputData.masterData.realRegSubTypeValue.nneedsubsample){\r\n                        if(!(RESelectedSubSample[0].ntransactionsamplecode===(inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactionsamplecode : -1)))\r\n                            check =false;\r\n                        }\r\n                            else{\r\n                                  check=response.data['RE_TEST']!==undefined;\r\n                            }\r\n                        }\r\n                                        else if(inputData.checkBoxOperation===checkBoxOperation.SINGLESELECT){\r\n                                          check=response.data['RE_TEST']!==undefined;\r\n                                        }\r\n\r\n            if( !check){\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        toast.warn(intl.formatMessage({\r\n                            id: \"IDS_TESTISNOTAVAILABLE\"\r\n                        }));\r\n                   }\r\n                   */\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        // ...response.data,\r\n                        // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                        RE_TEST:response.data.RE_TEST || inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST : [],\r\n                        RESelectedTest: response.data.RESelectedTest || inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                        RESelectedSample: inputData.RESelectedSample,\r\n                        RESelectedSubSample\r\n                    }\r\n                    // if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                    //     inputData.searchSampleRef.current.value = \"\";\r\n                    //     masterData['searchedSample'] = undefined\r\n                    // }\r\n                    if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                        inputData.searchSubSampleRef.current.value = \"\";\r\n                        masterData['searchedSubSample'] = undefined\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                    let {\r\n                        testskip,\r\n                        testtake\r\n                        , subSampleSkip, subSampleTake\r\n                    } = inputData\r\n                    // let bool = false;\r\n                    // Commented bool value because no need to check bool condition to update skipInfo value.\r\n                    let skipInfo = {}\r\n                    // if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\r\n                        testskip = 0;\r\n                        // bool = true\r\n                    // }\r\n                    subSampleSkip = 0;\r\n                    // bool = true\r\n                    // if (bool) {\r\n                        skipInfo = {\r\n                            testskip,\r\n                            testtake\r\n                            , subSampleSkip, subSampleTake\r\n                        }\r\n                    // }\r\n                    let TestParameters = [];\r\n                    let ResultUsedInstrument = [];\r\n                    let ResultUsedMaterial = [];\r\n                    let ResultUsedTasks = [];\r\n                    let RegistrationTestAttachment = [];\r\n                    let ResultChangeHistory = [];\r\n                    let RegistrationTestComment = [];\r\n                    let RegistrationComment = [];\r\n                    // let RegistrationSampleAttachment = [];\r\n\r\n                    //if (inputData.checkBoxOperation === 1) {\r\n                    if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {    \r\n                        //added by sudharshanan for test select issue while sample click\r\n                        let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode)\r\n                        oldSelectedTest.map((test, index) => {\r\n                            if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                oldSelectedTest.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                        let keepOld = false;\r\n                        let ntransactiontestcode;\r\n                        let npreregno;\r\n                        if (oldSelectedTest.length > 0) {\r\n                            keepOld = true\r\n                            // masterData = {\r\n                            //     ...masterData,\r\n                            //     RESelectedTest: oldSelectedTest\r\n                            // }\r\n                        } else {\r\n                            ntransactiontestcode = masterData.RESelectedTest[0].ntransactiontestcode;\r\n                            npreregno = masterData.RESelectedSample[0].npreregno;\r\n                        }\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedInstrument\"\r\n                                dataStateName = \"instrumentDataState\"\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedMaterial\"\r\n                                dataStateName = \"materialDataState\"\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedTasks\"\r\n                                dataStateName = \"taskDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultChangeHistory\"\r\n                                dataStateName = \"resultChangeDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_SAMPLECOMMENTS\":\r\n                                RegistrationComment = keepOld ? inputData.masterData.RegistrationComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment, npreregno, \"npreregno\")\r\n                                activeName = \"RegistrationComment\"\r\n                                dataStateName = \" sampleChangeDataState\"\r\n                                break;\r\n\r\n\r\n                            default:\r\n                                TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n\r\n\r\n                   // } else if (inputData.checkBoxOperation === 5) {\r\n                    } else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {    \r\n                        let list = []\r\n                        let dbData = [];\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.TestParameters, ...response.data.TestParameters];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.ResultUsedInstrument, ...response.data.ResultUsedInstrument];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = [...inputData.masterData.ResultUsedMaterial, ...response.data.ResultUsedMaterial];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                dbData = response.data.ResultUsedTasks || []\r\n                                list = [...inputData.masterData.ResultUsedTasks, ...dbData];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                dbData = response.data.ResultChangeHistory || []\r\n                                list = [...inputData.masterData.ResultChangeHistory, ...dbData];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                dbData = response.data.RegistrationTestComment || []\r\n                                list = [...inputData.masterData.RegistrationTestComment, ...dbData];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_SAMPLECOMMENTS\":\r\n                                dbData = response.data.RegistrationComment || []\r\n                                list = [...inputData.masterData.RegistrationComment, ...dbData];\r\n                                RegistrationComment = getRecordBasedOnPrimaryKeyName(list, inputData.RESelectedSample.length > 0 ? inputData.RESelectedSample[0].npreregno : \"\", \"npreregno\")\r\n                                break;\r\n                            default:\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.TestParameters, ...dbData];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                        }\r\n                    }\r\n                    //else if (inputData.checkBoxOperation === 7) {\r\n                    else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {    \r\n\r\n                        //getSameRecordFromTwoArrays( inputData.masterData.RE_SAMPLE, responseData.RE_SUBSAMPLE, \"ntransactionsamplecode\");\r\n\r\n                        let list = []\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                list = response.data.ResultUsedInstrument ? sortData(response.data.ResultUsedInstrument, 'descending', 'nresultusedinstrumentcode') : [];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedInstrument\"\r\n                                dataStateName = \"instrumentDataState\"\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = response.data.ResultUsedMaterial ? sortData(response.data.ResultUsedMaterial, 'descending', 'nresultusedmaterialcode') : [];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedMaterial\"\r\n                                dataStateName = \"materialDataState\"\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                list = response.data.ResultUsedTasks ? sortData(response.data.ResultUsedTasks, 'descending', 'nresultusedtaskcode') : [];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedTasks\"\r\n                                dataStateName = \"taskDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                list = response.data.ResultChangeHistory ? sortData(response.data.ResultChangeHistory, 'descending', 'nresultchangehistorycode') : [];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultChangeHistory\"\r\n                                dataStateName = \"resultChangeDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                                break;\r\n                            case \"IDS_SAMPLECOMMENTS\":\r\n\r\n                                RegistrationComment = response.data.RegistrationComment ? [...response.data.RegistrationComment] : [];\r\n                                activeName = \"RegistrationComment\"\r\n                                dataStateName = \"sampleCommentsDataState\"\r\n                                break;\r\n                            default:\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n\r\n                        }\r\n\r\n                    }\r\n                    else {\r\n                        let list = []\r\n                        if (!inputData.masterData.realRegSubTypeValue.nneedsubsample) {\r\n                            let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode)\r\n                            oldSelectedTest.map((test, index) => {\r\n                                if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                    oldSelectedTest.splice(index, 1)\r\n                                }\r\n                                return null;\r\n                            })\r\n                            let keepOld = false;\r\n                            let ntransactiontestcode;\r\n                            if (oldSelectedTest.length > 0) {\r\n                                keepOld = true\r\n                                // masterData = {\r\n                                //     ...masterData,\r\n                                //     RESelectedTest: oldSelectedTest\r\n                                // }\r\n                            } else {\r\n                                ntransactiontestcode = masterData.RESelectedTest[0].ntransactiontestcode\r\n                            }\r\n                        }\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                list = response.data.ResultUsedInstrument ? sortData(response.data.ResultUsedInstrument, 'descending', 'nresultusedinstrumentcode') : [];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedInstrument\"\r\n                                dataStateName = \"instrumentDataState\"\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = response.data.ResultUsedMaterial ? sortData(response.data.ResultUsedMaterial, 'descending', 'nresultusedmaterialcode') : [];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedMaterial\"\r\n                                dataStateName = \"materialDataState\"\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                list = response.data.ResultUsedTasks ? sortData(response.data.ResultUsedTasks, 'descending', 'nresultusedtaskcode') : [];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedTasks\"\r\n                                dataStateName = \"taskDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                list = response.data.ResultChangeHistory ? sortData(response.data.ResultChangeHistory, 'descending', 'nresultchangehistorycode') : [];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultChangeHistory\"\r\n                                dataStateName = \"resultChangeDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_SAMPLECOMMENTS\":\r\n                                list = response.data.RegistrationComment ? sortData(response.data.RegistrationComment, 'descending', 'nregcommentcode') : [];\r\n                                RegistrationComment = getRecordBasedOnPrimaryKeyName(list, inputData.RESelectedSample.length > 0 ? inputData.RESelectedSample[0].npreregno : \"\", \"npreregno\")\r\n                                activeName = \"RegistrationComment\"\r\n                                dataStateName = \"sampleChangeDataState\"\r\n                                break;\r\n                            \r\n                            default:\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n\r\n                    masterData = {\r\n                        ...masterData,\r\n                        // wholeApprovalParameter,\r\n                        TestParameters,\r\n                        // wholeResultUsedInstrument,\r\n                        ResultUsedInstrument,\r\n                        ResultUsedMaterial,\r\n                        // wholeResultUsedTasks,\r\n                        ResultUsedTasks,\r\n                        // wholeRegistrationTestAttachment,\r\n                        RegistrationTestAttachment,\r\n                        // wholeResultChangeHistory,\r\n                        ResultChangeHistory,\r\n                        // wholeRegistrationTestComments,\r\n                        RegistrationTestComment,\r\n\r\n                        RegistrationComment,\r\n                        // RegistrationSampleAttachment\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    // Start of ALPD-4132 Additional Filter info to be Dispatched on Save - ATE-241\r\n                    let multifilterInfo = {};\r\n                    if (inputData.multiFilterLoad !== undefined) {\r\n                        if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                            inputData.searchSampleRef.current.value = \"\";\r\n                        }\r\n                        if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                            inputData.searchSubSampleRef.current.value = \"\";\r\n                        }\r\n                        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                            inputData.searchTestRef.current.value = \"\";\r\n                        }\r\n                        multifilterInfo = {\r\n                            multiFilterLoad: inputData.multiFilterLoad,\r\n                            openModal: inputData.openModal,\r\n                            searchSampleRef: inputData.searchSampleRef,\r\n                            searchSubSampleRef: inputData.searchSubSampleRef,\r\n                            searchTestRef: inputData.searchTestRef,\r\n                            testskip: inputData.testskip,\r\n                            subsampleskip: inputData.subsampleskip,\r\n                            skip: inputData.skip,\r\n                        };\r\n                    }\r\n                    //  End of ALPD-4132 - ATE-241\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            skip: undefined,\r\n                            take: undefined,\r\n                            subSampleSkip: undefined,\r\n                            subSampleTake: undefined,\r\n                            ...skipInfo,\r\n                            activeTabIndex: inputData.activeTabIndex,\r\n                            //  ALPD-4132 Addition Filter Info to be dispatched on save - ATE-241\r\n                            ...multifilterInfo,\r\n                        }\r\n                    })\r\n        }\r\n    })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n        } else {\r\n            let oldSelectedTest = inputData.masterData.RESelectedTest\r\n            //let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            //let isGrandChildGetRequired = false;\r\n            let oldSelectedSubSample = inputData.masterData.RESelectedSubSample\r\n            let { subsampletake, subsampleskip } = inputData;\r\n            let skipInfo = {};\r\n            let TestSelected = [];\r\n            let subSampleSelected = [];\r\n            if (inputData[\"statusNone\"]) {\r\n                TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n            else {\r\n                TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n\r\n            let isGrandChildGetRequired = false;\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.RESelectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let ntransactiontestcode = inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode.toString() : \"\";\r\n                let RESelectedSample = inputData.RESelectedSample;\r\n                let RESelectedTest = inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [];\r\n                let RESelectedSubSample = inputData.masterData.RE_SUBSAMPLE\r\n\r\n\r\n                if (inputData.masterData.nneedsubsample) {\r\n                    let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RE_SUBSAMPLE, \"ntransactionsamplecode\");\r\n                    RESelectedSubSample = filterSelectedSubSample.length > 0 ? filterSelectedSubSample : [inputData.masterData.RE_SUBSAMPLE[0]];\r\n                    if (inputData.masterData.RE_SUBSAMPLE.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampletake, subsampleskip }\r\n                    }\r\n                }\r\n                let ntransactionsamplecode = RESelectedSubSample.map(subsample => subsample.ntransactionsamplecode).join(',');\r\n                let masterData = { ...inputData.masterData, RESelectedSample, RESelectedSubSample, RESelectedTest }\r\n                inputData = {\r\n                    ...inputData,\r\n                    ntransactiontestcode,\r\n                    ntransactionsamplecode,\r\n                    RESelectedSample,\r\n                    RESelectedTest,\r\n                    RESelectedSubSample,\r\n                    //checkBoxOperation: 3,\r\n                    checkBoxOperation: checkBoxOperation.SINGLESELECT,\r\n                    activeTestKey: inputData.activeTestKey, masterData\r\n                }\r\n\r\n                if (RESelectedTest.length > 0) {\r\n                    inputData = {\r\n                        ...inputData,\r\n                        childTabsKey: [\"TestParameters\", \"ResultUsedInstrument\", \"ResultUsedMaterial\", \"ResultUsedTasks\", \"RegistrationTestAttachment\",\r\n                            \"ResultChangeHistory\", \"RegistrationTestComment\", \"ResultChangeHistory\"\r\n                        ]\r\n                    }\r\n                    dispatch(getTestChildTabREDetail(inputData, true));\r\n                } else {\r\n                    inputData = {\r\n                        ...inputData, masterData,\r\n                        childTabsKey: [\"RE_TEST\"]\r\n                    }\r\n                    dispatch(getTestREDetail(inputData, true));\r\n                }\r\n            } else {\r\n                //added by sudharshanan for test select issue while sample click\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                    // RESelectedSample: inputData.RESelectedSample,\r\n                    // RESelectedSubSample: inputData.masterData.nneedsubsample && inputData.masterData.RE_SUBSAMPLE.length > 0 ? inputData.masterData.RESelectedSubSample : inputData.masterData.RE_SUBSAMPLE\r\n                    RESelectedTest: TestSelected ? TestSelected : inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                    RESelectedSample: inputData.RESelectedSample,\r\n                    RESelectedSubSample: subSampleSelected ? subSampleSelected : inputData.masterData.RE_SUBSAMPLE.length > 0 ? [inputData.masterData.RE_SUBSAMPLE[0]] : []\r\n\r\n                }\r\n                let subsamplecheck = true;\r\n                if (inputData.masterData.nneedsubsample) {\r\n                    let SubSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                    if (SubSampleSelected.length > 0) {\r\n                        let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RE_SUBSAMPLE, \"ntransactionsamplecode\");\r\n                        if (filterSelectedSubSample.length === 0) {\r\n                            let wholeSubSample = masterData.RE_SUBSAMPLE.map(b => b.ntransactionsamplecode)\r\n                            oldSelectedSubSample.forEach((test, index) => {\r\n                                if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                                    oldSelectedSubSample.splice(index, 1)\r\n                                }\r\n                                return null;\r\n                            })\r\n                            if (oldSelectedSubSample.length === 0 && wholeSubSample.length > 0\r\n                                && masterData.selectedTest.length === 0) {\r\n                                const selectedSubSample1 = [inputData.masterData.RE_SUBSAMPLE[0]];\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    RESelectedSubSample: selectedSubSample1,\r\n                                    selectedTest: []\r\n                                }\r\n                                inputData = { ...inputData, ...masterData }\r\n                                inputData[\"npreregno\"] = selectedSubSample1.map(x => x.npreregno).join(\",\")\r\n                                inputData[\"ntransactionsamplecode\"] = selectedSubSample1.map(x => x.ntransactionsamplecode).join(\",\")\r\n                               // inputData[\"checkBoxOperation\"] = 3\r\n                                inputData[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT\r\n                                inputData[\"childTabsKey\"] = [\"RE_TEST\"]\r\n                                subsamplecheck = false;\r\n                                dispatch(getTestREDetail(inputData, true));\r\n\r\n                            }\r\n                        } else {\r\n                            oldSelectedSubSample = filterSelectedSubSample\r\n                        }\r\n\r\n                    } else {\r\n                        let wholeSubSample = masterData.RE_SUBSAMPLE.map(b => b.ntransactionsamplecode)\r\n                        oldSelectedSubSample.forEach((test, index) => {\r\n                            if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                                oldSelectedSubSample.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                    }\r\n\r\n                    if (subsamplecheck) {\r\n                        masterData = {\r\n                            ...masterData,\r\n                            RESelectedSubSample: oldSelectedSubSample\r\n                        }\r\n                    }\r\n                    if (inputData.masterData.RE_SUBSAMPLE.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampleskip, subsampletake }\r\n                    }\r\n                }\r\n                let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode)\r\n                oldSelectedTest.map((test, index) => {\r\n                    if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        oldSelectedTest.splice(index, 1)\r\n                    }\r\n                    return null;\r\n                })\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        RESelectedTest: oldSelectedTest\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = inputData.masterData.RE_TEST[0].ntransactiontestcode\r\n                    // ntransactiontestcode = masterData.RE_TEST[0].ntransactiontestcode\r\n                }\r\n                //const TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,\r\n                //ntransactiontestcode, \"ntransactiontestcode\");\r\n                const TestParameters = keepOld ? inputData[\"statusNone\"] ? getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].npreregno, \"npreregno\") : filterRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].npreregno, \"npreregno\") : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n\r\n                const ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                let { testskip, testtake } = inputData\r\n                let bool = false;\r\n                let skipInfo = {}\r\n                if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = {\r\n                        testskip,\r\n                        testtake\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            RESelectedSample: inputData.RESelectedSample,\r\n                            // selectedPreregno: inputData.npreregno,\r\n                            // RESelectedTest: inputData.masterData.searchedTest && inputData.masterData.searchedTest.length > 0 ? [inputData.masterData.\r\n                            //     searchedTest[0]\r\n                            // ] : inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.\r\n                            //     RE_TEST[0]\r\n                            // ] : [],\r\n                            // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                            TestParameters,\r\n                            ResultUsedInstrument,\r\n                            ResultUsedMaterial,\r\n                            ResultUsedTasks,\r\n                            RegistrationTestAttachment,\r\n                            RegistrationTestComment,\r\n                            ResultChangeHistory,\r\n                            // RESelectedSubSample: inputData.masterData.RE_SUBSAMPLE\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestKey: inputData.activeTestKey,\r\n                        ...skipInfo,\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function getTestREDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        let inputParamData = {\r\n            nflag: 3,\r\n            ntype: 3,\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntransactiontestcode: 0,\r\n            ntranscode: inputData.ntransactionstatus.toString(),\r\n            ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n            userinfo: inputData.userinfo,\r\n            ntestcode: inputData.ntestcode,\r\n            activeTestKey: inputData.activeTestKey,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            checkBoxOperation: inputData.checkBoxOperation,\r\n            nneedsubsample: inputData.nneedsubsample,\r\n            nworlistcode: inputData.nworlistcode,\r\n            nbatchmastercode:inputData.nbatchmastercode,\r\n            nneedReceivedInLab:inputData.nneedReceivedInLab,\r\n            napprovalversioncode: inputData.napprovalversioncode,\r\n        }\r\n        const subSample = inputData.nneedsubsample;\r\n        // dispatch(initRequest(true));\r\n        // rsapi.post(\"resultentrybysample/getResultEntrySubSampleDetails\", inputParamData)\r\n        if (isServiceRequired) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/getResultEntrySubSampleDetails\", inputParamData)\r\n                .then(response => {\r\n                    // let responseData = {\r\n                    //     ...response.data,\r\n                    //     RESelectedSample: inputData.RESelectedSample || inputData.masterData.RESelectedSample,\r\n                    //     RESelectedSubSample: inputData.RESelectedSubSample || inputData.masterData.RESelectedSubSample,\r\n                    //     // RESelectedTest: inputData.masterData.RESelectedTest\r\n                    // }\r\n                    let responseData = { ...response.data }\r\n                    responseData = sortData(responseData, 'descending', 'npreregno')\r\n                    let oldSelectedTest = inputData.masterData.RESelectedTest\r\n                    let oldSelectedSubSample = inputData.masterData.RESelectedSubSample || []\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        // ...response.data,\r\n                       // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                       RE_TEST:inputData.masterData && inputData.masterData.RE_TEST || response.data && response.data.RE_TEST,\r\n                       RESelectedTest: response.data.RESelectedTest || inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                        RESelectedSample: inputData.masterData.RESelectedSample,\r\n                        RESelectedSubSample: inputData.RESelectedSubSample || inputData.masterData.RESelectedSubSample,\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                    let {\r\n                        testskip,\r\n                        testtake\r\n                        , subSampleSkip, subSampleTake\r\n                    } = inputData\r\n                    // let bool = false;\r\n                    // Commented bool value because no need to check bool condition to update skipInfo value.\r\n                    let skipInfo = {}\r\n                    // if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\r\n                        testskip = 0;\r\n                        // bool = true\r\n                    // }\r\n                    // if (inputData.masterData.RE_SUBSAMPLE.length <= inputData.subSampleSkip) {\r\n                        subSampleSkip = 0;\r\n                        // bool = true\r\n                    // }\r\n                    // if (bool) {\r\n                        skipInfo = {\r\n                            testskip,\r\n                            testtake\r\n                            , subSampleSkip, subSampleTake\r\n                        }\r\n                    // }\r\n                    let TestParameters = [];\r\n                    let ResultUsedInstrument = [];\r\n                    let ResultUsedMaterial = [];\r\n                    let ResultUsedTasks = [];\r\n                    let RegistrationTestAttachment = [];\r\n                    let ResultChangeHistory = [];\r\n                    let RegistrationTestComment = [];\r\n                    let RegistrationSampleComment = [];\r\n                    let RegistrationSampleAttachment = [];\r\n\r\n                    //if (inputData.checkBoxOperation === 1) {\r\n                    if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {    \r\n                        //added by sudharshanan for test select issue while sample click\r\n                        let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode)\r\n                        oldSelectedTest.map((test, index) => {\r\n                            if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                oldSelectedTest.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                        let keepOld = false;\r\n                        let ntransactiontestcode;\r\n                        if (oldSelectedTest.length > 0) {\r\n                            keepOld = true\r\n                            masterData = {\r\n                                ...masterData,\r\n                                RESelectedTest: oldSelectedTest\r\n                            }\r\n                        } else {\r\n                            ntransactiontestcode = masterData.RESelectedTest[0].ntransactiontestcode\r\n                        }\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedInstrument\"\r\n                                dataStateName = \"instrumentDataState\"\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedMaterial\"\r\n                                dataStateName = \"materialDataState\"\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedTasks\"\r\n                                dataStateName = \"taskDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultChangeHistory\"\r\n                                dataStateName = \"resultChangeDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            // case \"IDS_SAMPLECOMMENTS\":\r\n                            //         RegistrationTestComment = keepOld ? inputData.masterData.RegistrationComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment, npreregno, \"npreregno\")\r\n                            //         activeName = \"RegistrationComment\"\r\n                            //         dataStateName = \"sampleChangeDataState\"\r\n                            //         break;\r\n                            default:\r\n                                TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n\r\n                    //} else if (inputData.checkBoxOperation === 5) {\r\n                    } else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {    \r\n                        let list = []\r\n                        let dbData = [];\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.TestParameters, ...response.data.TestParameters];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.ResultUsedInstrument, ...response.data.ResultUsedInstrument];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = [...inputData.masterData.ResultUsedMaterial, ...response.data.ResultUsedMaterial];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                dbData = response.data.ResultUsedTasks || []\r\n                                list = [...inputData.masterData.ResultUsedTasks, ...dbData];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                dbData = response.data.ResultChangeHistory || []\r\n                                list = [...inputData.masterData.ResultChangeHistory, ...dbData];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                dbData = response.data.RegistrationTestComment || []\r\n                                list = [...inputData.masterData.RegistrationTestComment, ...dbData];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            default:\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.TestParameters, ...dbData];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                        }\r\n                   // } else if (inputData.checkBoxOperation === 7) {\r\n                    } else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {    \r\n                        let list = []\r\n                        let dbData = [];\r\n                        let testList = reArrangeArrays(inputData.masterData.RE_SUBSAMPLE, responseData.RE_TEST, \"ntransactionsamplecode\");\r\n                        masterData = {\r\n                            ...masterData,\r\n                            RESelectedTest: [testList[0]],\r\n                            RE_TEST: testList,\r\n                            // ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\r\n                        }\r\n\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...response.data.TestParameters];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, testList.length > 0 ? testList[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.ResultUsedInstrument, ...response.data.ResultUsedInstrument];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = [...inputData.masterData.ResultUsedMaterial, ...response.data.ResultUsedMaterial];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                dbData = response.data.ResultUsedTasks || []\r\n                                list = [...inputData.masterData.ResultUsedTasks, ...dbData];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                dbData = response.data.ResultChangeHistory || []\r\n                                list = [...inputData.masterData.ResultChangeHistory, ...dbData];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            // case \"IDS_TESTCOMMENTS\":\r\n                            //     dbData = response.data.RegistrationTestComment || []\r\n                            //     list = [...inputData.masterData.RegistrationTestComment, ...dbData];\r\n                            //     RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                            //     break;\r\n                            default:\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.TestParameters, ...dbData];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                        }\r\n\r\n                    } else {\r\n                        let list = []\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                list = response.data.ResultUsedInstrument ? sortData(response.data.ResultUsedInstrument, 'descending', 'nresultusedinstrumentcode') : [];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedInstrument\"\r\n                                dataStateName = \"instrumentDataState\"\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = response.data.ResultUsedMaterial ? sortData(response.data.ResultUsedMaterial, 'descending', 'nresultusedmaterialcode') : [];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedMaterial\"\r\n                                dataStateName = \"materialDataState\"\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                list = response.data.ResultUsedTasks ? sortData(response.data.ResultUsedTasks, 'descending', 'nresultusedtaskcode') : [];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedTasks\"\r\n                                dataStateName = \"taskDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                list = response.data.ResultChangeHistory ? sortData(response.data.ResultChangeHistory, 'descending', 'nresultchangehistorycode') : [];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultChangeHistory\"\r\n                                dataStateName = \"resultChangeDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_SUBSAMPLEATTACHMENTS\":\r\n                                list = response.data.RegistrationSampleComment ? sortData(response.data.RegistrationSampleComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_SUBSAMPLE.length > 0 ? inputData.masterData.RE_SUBSAMPLE[0].ntransactionsamplecode : \"\", \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    if (subSample) {\r\n                        let wholeSubsampleList = masterData.RE_SUBSAMPLE.map(b => b.ntransactionsamplecode)\r\n                        oldSelectedSubSample.map((test, index) => {\r\n                            if (!wholeSubsampleList.includes(test.ntransactionsamplecode)) {\r\n                                oldSelectedSubSample.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                        let keepOld = false;\r\n                        let ntransactionsamplecode;\r\n                        if (oldSelectedSubSample.length > 0) {\r\n                            keepOld = true\r\n                        } else {\r\n                            ntransactionsamplecode = masterData.selectedSubSample[0].ntransactionsamplecode\r\n                        }\r\n\r\n                        switch (inputData.activeSubSampleTab) {\r\n                            case \"IDS_SUBSAMPLECOMMENTS\":\r\n                                RegistrationSampleComment = keepOld ? inputData.masterData.RegistrationSampleComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleComment\"\r\n                                dataStateName = \"subSampleCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationSampleAttachment = keepOld ? inputData.masterData.RegistrationSampleAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleAttachment\"\r\n                                dataStateName = \"subSampleAttachmentDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    masterData = {\r\n                        ...masterData,\r\n                        // wholeApprovalParameter,\r\n                        TestParameters,\r\n                        // wholeResultUsedInstrument,\r\n                        ResultUsedInstrument,\r\n                        ResultUsedMaterial,\r\n                        // wholeResultUsedTasks,\r\n                        ResultUsedTasks,\r\n                        // wholeRegistrationTestAttachment,\r\n                        RegistrationTestAttachment,\r\n                        // wholeResultChangeHistory,\r\n                        ResultChangeHistory,\r\n                        // wholeRegistrationTestComments,\r\n                        RegistrationTestComment,\r\n                        RegistrationSampleComment,\r\n                        RegistrationSampleAttachment\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeTestKey: inputData.activeTestKey,\r\n                            activeTestTab: inputData.activeTestKey,\r\n                            screenName: inputData.activeTestKey,\r\n                            ...skipInfo,\r\n                            subSampleSkip: undefined,\r\n                            subSampleTake: undefined\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    console.log(\"error:\", error);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            //fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n\r\n            let oldSelectedTest = inputData.masterData.RESelectedTest\r\n            //let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\r\n            // let isGrandChildGetRequired = false;\r\n            // if (TestSelected.length > 0) {\r\n            //     isGrandChildGetRequired = true;\r\n            // } else {\r\n            //     isGrandChildGetRequired = false;\r\n            // }\r\n\r\n            let TestSelected =\r\n                inputData[\"statusNone\"] ?\r\n                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\") :\r\n                    filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\r\n            let isGrandChildGetRequired = false;\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.RESelectedSubSample, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let ntransactiontestcode = inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode.toString() : \"\";\r\n                let RESelectedSubSample = inputData.RESelectedSubSample;\r\n                let RESelectedTest = inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [];\r\n                // let RESelectedSubSample = inputData.masterData.RE_SUBSAMPLE\r\n\r\n                inputData = {\r\n                    ...inputData,\r\n                    childTabsKey: [\"TestParameters\", \"ResultUsedInstrument\", \"ResultUsedMaterial\", \"ResultUsedTasks\", \"RegistrationTestAttachment\",\r\n                        \"ResultChangeHistory\", \"RegistrationTestComment\", \"ResultChangeHistory\"\r\n                    ],\r\n                    ntransactiontestcode,\r\n                    RESelectedSample: inputData.masterData.RESelectedSample,\r\n                    RESelectedTest,\r\n                    RESelectedSubSample,\r\n                    //checkBoxOperation: 3,\r\n                    checkBoxOperation: checkBoxOperation.SINGLESELECT,\r\n                    activeTestKey: inputData.activeTestKey\r\n                }\r\n                dispatch(getTestChildTabREDetail(inputData, true));\r\n            } else {\r\n                //added by sudharshanan for test select issue while sample click\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                    RESelectedSubSample: inputData.RESelectedSubSample\r\n                }\r\n                let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode)\r\n                oldSelectedTest.map((test, index) => {\r\n                    if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        oldSelectedTest.splice(index, 1)\r\n                    }\r\n                    return null;\r\n                })\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        RESelectedTest: oldSelectedTest\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = masterData.RE_TEST&& masterData.RE_TEST[0].ntransactiontestcode\r\n                }\r\n                // const TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,\r\n                //     ntransactiontestcode, \"ntransactiontestcode\");\r\n                const TestParameters = keepOld ?\r\n                    inputData[\"statusNone\"] ?\r\n                        getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].ntransactionsamplecode, 'ntransactionsamplecode') :\r\n                        filterRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].ntransactionsamplecode, 'ntransactionsamplecode') : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n\r\n                const ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                let { testskip, testtake } = inputData\r\n                let bool = false;\r\n                let skipInfo = {}\r\n                if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = {\r\n                        testskip,\r\n                        testtake\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            RESelectedSubSample: inputData.RESelectedSubSample,\r\n                            // selectedPreregno: inputData.npreregno,\r\n                            // RESelectedTest: inputData.masterData.searchedTest && inputData.masterData.searchedTest.length > 0 ? [inputData.masterData.\r\n                            //     searchedTest[0]\r\n                            // ] : inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.\r\n                            //     RE_TEST[0]\r\n                            // ] : [],\r\n                            // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                            TestParameters,\r\n                            ResultUsedInstrument,\r\n                            ResultUsedMaterial,\r\n                            ResultUsedTasks,\r\n                            RegistrationTestAttachment,\r\n                            RegistrationTestComment,\r\n                            ResultChangeHistory,\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestKey: inputData.activeTestKey,\r\n                        activeTestTab: inputData.activeTestKey,\r\n                        ...skipInfo,\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport function getSampleChildTabREDetail(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactiontestcode: inputData.ntransactiontestcode,\r\n            npreregno: inputData.npreregno,\r\n            userinfo: inputData.userinfo\r\n        }\r\n        let url = \"\"\r\n        switch (inputData.activeSampleKey) {\r\n            case \"IDS_DOCUMENTS\":\r\n                url = \"attachment/getSampleAttachment\"\r\n                break;\r\n            case \"IDS_SAMPLEATTACHMENTS\":\r\n                url = \"attachment/getSampleAttachment\"\r\n                break;\r\n            case \"IDS_APPROVALHISTORY\":\r\n                url = \"resultentrybysample/getSampleApprovalHistory\"\r\n                break;\r\n            case \"IDS_SAMPLECOMMENTS\":\r\n                url = \"comments/getSampleComment\"\r\n                break;\r\n            default:\r\n                url = \"attachment/getSampleAttachment\"\r\n                break;\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(url, inputParamData)\r\n            .then(response => {\r\n                let responseData = {\r\n                    ...response.data\r\n                }\r\n                //responseData = sortData(responseData)\r\n                fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            RESelectedSample: inputData.RESelectedSample\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleKey: inputData.activeSampleKey,\r\n                        screenName: inputData.screenName\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getTestChildTabREDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactiontestcode: inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\"),\r\n            npreregno: inputData.npreregno,\r\n            userinfo: inputData.userinfo\r\n        }\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\r\n        //     documentDataState, testCommentDataState } = inputData\r\n        let url = \"resultentrybysample/getTestbasedParameter\"\r\n        switch (inputData.activeTestKey) {\r\n            case \"IDS_RESULTS\":\r\n                url = \"resultentrybysample/getTestbasedParameter\"\r\n                activeName = \"TestParameters\"\r\n                dataStateName = \"resultDataState\"\r\n                break;\r\n            case \"IDS_INSTRUMENT\":\r\n                url = \"resultentrybysample/getResultUsedInstrument\"\r\n                activeName = \"ResultUsedInstrument\"\r\n                dataStateName = \"instrumentDataState\"\r\n                break;\r\n            case \"IDS_MATERIAL\":\r\n                url = \"resultentrybysample/getResultUsedMaterial\";\r\n                activeName = \"ResultUsedMaterial\"\r\n                dataStateName = \"materialDataState\"\r\n                break;\r\n            case \"IDS_TASK\":\r\n                url = \"resultentrybysample/getResultUsedTask\"\r\n                activeName = \"ResultUsedTasks\"\r\n                dataStateName = \"taskDataState\"\r\n                break;\r\n            case \"IDS_TESTATTACHMENTS\":\r\n                url = \"attachment/getTestAttachment\"\r\n                activeName = \"RegistrationTestAttachment\"\r\n                break;\r\n            case \"IDS_TESTCOMMENTS\":\r\n                url = \"comments/getTestComment\"\r\n                activeName = \"RegistrationTestComment\"\r\n                dataStateName = \"testCommentDataState\"\r\n                break;\r\n            case \"IDS_DOCUMENTS\":\r\n                url = \"attachment/getSampleAttachment\"\r\n                activeName = \"\"\r\n                dataStateName = \"documentDataState\"\r\n                break;\r\n            case \"IDS_RESULTCHANGEHISTORY\":\r\n                url = \"resultentrybysample/getResultChangeHistory\"\r\n                activeName = \"ResultChangeHistory\"\r\n                dataStateName = \"resultChangeDataState\"\r\n                break;\r\n            case \"IDS_SAMPLEATTACHMENTS\":\r\n                url = \"attachment/getSampleAttachment\"\r\n                activeName = \"\"\r\n                dataStateName = \"resultDataState\"\r\n                break;\r\n            default:\r\n                url = \"resultentrybysample/getTestbasedParameter\"\r\n                activeName = \"TestParameters\"\r\n                dataStateName = \"resultDataState\"\r\n                break;\r\n        }\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(url, inputParamData)\r\n                .then(response => {\r\n                    let responseData = {\r\n                        ...response.data,\r\n                        RESelectedSample: inputData.RESelectedSample || inputData.masterData.RESelectedSample,\r\n                        RESelectedTest: inputData.RESelectedTest,\r\n                        activeTabIndex: inputData.activeTabIndex,\r\n                        activeTabId: inputData.activeTabId\r\n                    }\r\n                    let skipInfo = {};\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        ...responseData,\r\n                        RESelectedTest: inputData.RESelectedTest\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            activeTabIndex: inputData.activeTabIndex,\r\n                            activeTabId: inputData.activeTabId,\r\n                            activeTestTab: inputData.activeTestKey,\r\n                            loading: false,\r\n                            activeTestKey: inputData.activeTestKey,\r\n                            screenName: inputData.activeTestKey,\r\n                            testskip: undefined,\r\n                            testtake: undefined,\r\n                            ...skipInfo\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            //fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.RESelectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\", inputData.removeElementFromArray);\r\n            let skipInfo = {};\r\n            let masterData = {\r\n                ...inputData.masterData,\r\n                RESelectedTest: inputData.RESelectedTest\r\n            }\r\n            if (masterData[activeName].length <= inputData[dataStateName] && inputData[dataStateName].skip) {\r\n\r\n                skipInfo = {\r\n\r\n                    [dataStateName]: {\r\n                        ...inputData[dataStateName],\r\n                        skip: 0,\r\n                        sort: undefined,\r\n                        filter: undefined\r\n                    }\r\n                }\r\n            } else {\r\n                skipInfo = {\r\n                    ...skipInfo,\r\n                    [dataStateName]: {\r\n                        ...inputData[dataStateName],\r\n                        sort: undefined,\r\n                        filter: undefined\r\n                    }\r\n                }\r\n            }\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    masterData,\r\n                    loading: false,\r\n                    showFilter: false,\r\n                    activeTestKey: inputData.activeTestKey,\r\n                    screenName: inputData.screenName,\r\n                    ...skipInfo\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport function getRERegistrationType(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getRegistrationType\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            defaultSampleType: inputData.defaultSampleType,\r\n                            ...response.data,\r\n                            realDesignTemplateMapping:inputData.realDesignTemplateMapping,\r\n                            realApproveConfigVersion:inputData.realApproveConfigVersion,\r\n                            realApprovalConfigVersionList:inputData.realApprovalConfigVersionList,\r\n                            realDesignTemplateMappingList:inputData.realDesignTemplateMappingList,\r\n                            realFilterStatusList:inputData.realFilterStatusList,\r\n                            realRegistrationSubTypeList:inputData.realRegistrationSubTypeList,\r\n                            realRegistrationTypeList:inputData.realRegistrationTypeList,\r\n                            realTestvaluesList:inputData.realTestvaluesList,\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRERegistrationSubType(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getRegistrationsubType\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            //defaultFilterStatus:inputData.masterData.defaultFilterStatus,\r\n                            defaultRegistrationType: inputData.defaultRegistrationType,\r\n                            realDesignTemplateMapping:inputData.realDesignTemplateMapping,\r\n                            realApproveConfigVersion:inputData.realApproveConfigVersion,\r\n                            realApprovalConfigVersionList:inputData.realApprovalConfigVersionList,\r\n                            realDesignTemplateMappingList:inputData.realDesignTemplateMappingList,\r\n                            realFilterStatusList:inputData.realFilterStatusList,\r\n                            realRegistrationSubTypeList:inputData.realRegistrationSubTypeList,\r\n                            realRegistrationTypeList:inputData.realRegistrationTypeList,\r\n                            realTestvaluesList:inputData.realTestvaluesList,\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREApprovalConfigVersion(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getApprovalConfigVersion\", inputData)\r\n            .then(response => {\r\n                let nneedsubsample = inputData.defaultRegistrationSubType && inputData.defaultRegistrationSubType.nneedsubsample;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            nneedsubsample,\r\n                            ...response.data,\r\n                            defaultRegistrationSubType: inputData.defaultRegistrationSubType,\r\n                            // fromDate: inputData.fromdate,\r\n                            //  toDate: inputData.todate\r\n                            realDesignTemplateMapping:inputData.realDesignTemplateMapping,\r\n                            realApproveConfigVersion:inputData.realApproveConfigVersion,\r\n                            realApprovalConfigVersionList:inputData.realApprovalConfigVersionList,\r\n                            realDesignTemplateMappingList:inputData.realDesignTemplateMappingList,\r\n                            realFilterStatusList:inputData.realFilterStatusList,\r\n                            realRegistrationTypeList:inputData.realRegistrationTypeList,\r\n                            realTestvaluesList:inputData.realTestvaluesList,\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREFilterStatus(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getFilterStatus\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            defaultjobstatus: inputData.defaultjobstatus,\r\n                            // fromDate: inputData.fromdate,\r\n                            // toDate: inputData.todate\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function getREJobStatus(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getApproveConfigVersionRegTemplateDesign\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            defaultApprovalConfigVersion: inputData.defaultApprovalConfigVersion,\r\n                            // fromDate: inputData.fromdate,\r\n                            // toDate: inputData.todate\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getResultEntryDetails(inputParamData) {\r\n    let masterData = { ...inputParamData.masterData }\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getResultEntryDetails\", { ...inputParamData.inputData, nneedsubsample: //inputParamData.masterData.nneedsubsample\r\n        inputParamData.masterData.realRegSubTypeValue.nneedsubsample\r\n         })\r\n            .then(response => {\r\n                //let masterData = { ...inputParamData.masterData }\r\n                if (inputParamData.refs.searchSampleRef !== undefined && inputParamData.refs.searchSampleRef.current !== null) {\r\n                    inputParamData.refs.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputParamData.refs.searchSubSampleRef !== undefined && inputParamData.refs.searchSubSampleRef.current !== null) {\r\n                    inputParamData.refs.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputParamData.refs.searchTestRef !== undefined && inputParamData.refs.searchTestRef.current !== null) {\r\n                    inputParamData.refs.searchTestRef.current.value = \"\"\r\n                    // masterData['searchedTests'] = undefined\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                //sortData(response.data)\r\n                sortData(response.data, 'ascending', 'ntransactionresultcode')\r\n                if(response.data.rtn == \"IDS_USERNOTINRESULTENTRYFLOW\")\r\n                {\r\n                toast.warning(intl.formatMessage({ id: \"IDS_USERNOTINRESULTENTRYFLOW\" }));\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            realFromDate: response.data[\"fromDate\"],\r\n                            realToDate: response.data[\"toDate\"]\r\n                        },\r\n                        loading: false,\r\n                        showTest: inputParamData.inputData.showTest,\r\n                        showSample: inputParamData.inputData.showSample,\r\n                        activeTestKey: inputParamData.inputData.activeTestKey,\r\n                        skip: 0,\r\n                        take: inputParamData.inputData.take,\r\n                        testskip: 0,\r\n                        testtake: inputParamData.inputData.testtake,\r\n                        resultDataState: { ...inputParamData.resultDataState, sort: undefined, filter: undefined },\r\n                        instrumentDataState: { ...inputParamData.instrumentDataState, sort: undefined, filter: undefined },\r\n                        materialDataState: { ...inputParamData.materialDataState, sort: undefined, filter: undefined },\r\n                        taskDataState: { ...inputParamData.taskDataState, sort: undefined, filter: undefined },\r\n                        documentDataState: { ...inputParamData.documentDataState, sort: undefined, filter: undefined },\r\n                        resultChangeDataState: { ...inputParamData.resultChangeDataState, sort: undefined, filter: undefined },\r\n                        testCommentDataState: { ...inputParamData.testCommentDataState, sort: undefined, filter: undefined },\r\n                        historyDataState: { ...inputParamData.historyDataState, sort: undefined, filter: undefined },\r\n                        samplePrintHistoryDataState: { ...inputParamData.samplePrintHistoryDataState, sort: undefined, filter: undefined },\r\n                        sampleHistoryDataState: { ...inputParamData.sampleHistoryDataState, sort: undefined, filter: undefined }\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else if(error.response.status === 401) {\r\n                    toast.warn(intl.formatMessage({id:error.response.data.rtn}));\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            masterData: {\r\n                                ...masterData,\r\n                                ...error.response.data,\r\n                                realFromDate: error.response.data[\"fromDate\"],\r\n                                realToDate: error.response.data[\"toDate\"]\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n                else{\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function resultGetModule(inputData, userInfo, ncontrolcode, testskip, testtake) {\r\n    return function (dispatch) {\r\n        let additionalInfo=[]\r\n        let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\r\n        TestList = TestList.splice(testskip, testskip + testtake);\r\n        let acceptTestList = getSameRecordFromTwoArrays(TestList, inputData.RESelectedTest, \"ntransactiontestcode\");\r\n        if (acceptTestList && acceptTestList.length > 0) {\r\n            if (Object.values(inputData).length > 0 && inputData.RESelectedTest.length > 0) {\r\n                let inputParamData = {\r\n                    ntransactiontestcode: acceptTestList ? acceptTestList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                    userinfo: userInfo\r\n                }\r\n                inputParamData['nregtypecode']= inputData.realRegTypeValue.nregtypecode;\r\n                inputParamData['nregsubtypecode']= inputData.realRegSubTypeValue.nregsubtypecode;\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"resultentrybysample/getResultEntryResults\", inputParamData)\r\n                    .then(response => {\r\n                        let selectedRecord = {};\r\n                        let selectedResultGrade = [];\r\n                        let paremterResultcode = [];\r\n                        const parameterResults = sortDataByParent(response.data.ResultParameter,TestList,\"ntransactiontestcode\");\r\n                        let predefDefaultFlag = false;\r\n                        let formFields=[];\r\n                        if(response.data.FormFields && response.data.FormFields.length>0){\r\n                        let formFieldJSON=JSON.parse(response.data.FormFields[0].jsondata['value'])\r\n                        Object.entries(formFieldJSON).map(([key, value])=>(\r\n                            formFields.push(value)\r\n                        ))\r\n                    }\r\n                        parameterResults.map((param, index) => {\r\n                            selectedResultGrade[index] = { ngradecode: param.ngradecode };\r\n                            paremterResultcode[index] = param.ntransactionresultcode;\r\n                            let jsondata=JSON.parse(param.jsondata['value'])\r\n                            if(jsondata.hasOwnProperty('additionalInfo')){\r\n                                additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'] \r\n                            }  \r\n                            predefDefaultFlag = false;\r\n                            (response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]) &&\r\n                                response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\r\n                                    // if (predefinedvalue.ndefaultstatus === transactionStatus.YES) {\r\n                                    //     if (!predefDefaultFlag) {\r\n                                    //         predefDefaultFlag = true;\r\n                                    //         response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\r\n                                    //             undefined, undefined).get(\"OptionList\");\r\n                                    //     }\r\n                                        // response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] =\r\n                                        //     constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'spredefinedname', 'spredefinedname', undefined,\r\n                                        //         undefined, undefined).get(\"OptionList\");\r\n                                    //     if (response.data.ResultParameter[index].sresult === null) {\r\n                                    //         response.data.ResultParameter[index].sresult = predefinedvalue.spredefinedname;\r\n                                    //         response.data.ResultParameter[index].sresultpredefinedname = predefinedvalue.sresultpredefinedname;\r\n                                    //         response.data.ResultParameter[index].sfinal = predefinedvalue.spredefinedsynonym;\r\n                                    //         response.data.ResultParameter[index].editable = true;\r\n                                    //         response.data.ResultParameter[index].ngradecode = predefinedvalue.ngradecode;\r\n                                    //         if(predefinedvalue.spredefinedcomments&&predefinedvalue.spredefinedcomments!==null){\r\n                                    //             response.data.ResultParameter[index].sresultcomment = predefinedvalue.spredefinedcomments\r\n                                    //             &&predefinedvalue.spredefinedcomments;\r\n                                    //         }\r\n                                    //     }\r\n                                    // }\r\n                                  //  else {\r\n                                        if (!predefDefaultFlag) {\r\n                                            predefDefaultFlag = true;\r\n                                            response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\r\n                                                undefined, undefined).get(\"OptionList\");\r\n                                        }\r\n\r\n                                       \r\n                                        \r\n\r\n                                 //   }\r\n                                    //return null;\r\n\r\n                                });\r\n                                if( parameterResults[index][\"nparametertypecode\"] ==1) {\r\n                                    parameterResults[index][\"resultaccuracycode\"] ={\r\n                                        \"value\": parameterResults[index][\"nresultaccuracycode\"],\r\n                                        \"label\": parameterResults[index][\"sresultaccuracyname\"],\r\n                                    };\r\n\r\n                                    parameterResults[index][\"unitcode\"] ={\r\n                                        \"value\": parameterResults[index][\"nunitcode\"],\r\n                                        \"label\": parameterResults[index][\"sunitname\"],\r\n                                    };\r\n                                }\r\n                                param['editable'] = false;\r\n                            //return null;\r\n                            // response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] =  constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'spredefinedname', 'spredefinedname', undefined,\r\n                            // undefined, undefined).get(\"OptionList\");\r\n                            // ALPD-4302--start\r\n                            // Added the Require Header fields in result Entire Slide out in result entry screen.\r\n                            // added for jsondata --end\r\n                            parameterResults[index]={...parameterResults[index],...jsondata}\r\n                        });\r\n\r\n                        const ResultAccuracyList = constructOptionList(response.data[\"ResultAccuracy\"] || [], \"nresultaccuracycode\",\"sresultaccuracyname\", undefined, undefined, false);   \r\n                        const ResultAccuracy = ResultAccuracyList.get(\"OptionList\");\r\n\r\n                        const UnitList = constructOptionList(response.data[\"Unit\"] || [], \"nunitcode\",\"sunitname\", undefined, undefined, false);   \r\n                        const Unit = UnitList.get(\"OptionList\");\r\n\r\n                       \r\n                                  \r\n\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...inputData,\r\n                                    //...sortData(response.data,\"desc\",\"ntransactiontestcode\"),\r\n                                    ...response.data,\r\n                                    paremterResultcode//,\r\n                                    //selectedResultGrade ,\r\n\r\n                                },\r\n                                selectedRecord: {\r\n                                    additionalInfo:additionalInfo.length>0?additionalInfo:[],\r\n                                    selectedResultGrade: selectedResultGrade,\r\n                                    // ALPD-4302\r\n                                    // Added the Require Header fields in result Entire Slide out in result entry screen.\r\n                                    ResultParameter: sortDataByParent(parameterResults//response.data.ResultParameter\r\n                                        ,TestList,\"ntransactiontestcode\")\r\n                                    //response.data.ResultParameter \r\n                                   \r\n                                },\r\n                                 // parameterResults:response.data.ResultParameter,\r\n                                 // ALPD-4302\r\n                                 // Added the Require Header fields in result Entire Slide out in result entry screen.\r\n                                  parameterResults:sortDataByParent(parameterResults//response.data.ResultParameter\r\n                                    ,TestList,\"ntransactiontestcode\"),\r\n                                  isParameterInitialRender:true,\r\n                                loading: false,\r\n                                screenName: \"IDS_RESULTENTRY\",\r\n                                openModal: true,\r\n                                operation: \"update\",\r\n                                activeTestKey: \"IDS_RESULTS\",\r\n                                ncontrolcode: ncontrolcode,\r\n                                ResultAccuracy,\r\n                                Unit,formFields\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    })\r\n                //}\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n                }));\r\n            }\r\n        } else {\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    loading: false\r\n                }\r\n            })\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n            }));\r\n        }\r\n    }\r\n\r\n}\r\n//Commented by sonia on  24-07-2024 for Jira ID:ALPD-4649\r\n/*export function completeTest(inputParam, acceptList, userInfo, completeResultId,booleanFlag,param) {\r\n    if (acceptList !== undefined && acceptList.length > 0) {\r\n        return function (dispatch) {\r\n            let isSearched=false;\r\n            let inputData = inputParam.testChildGetREParam\r\n            let inputParamData = {\r\n                ntype: 3,\r\n               // nflag: 2,\r\n               ninsertMaterialInventoryTrans:inputParam.inputData.ninsertMaterialInventoryTrans,\r\n               nportalrequired:inputParam.inputData.nportalrequired,\r\n                basedrulesengine:param.basedrulesengine,\r\n                nsampletypecode: inputData.nsampletypecode,\r\n                nregtypecode: inputData.nregtypecode,\r\n                nregsubtypecode: inputData.nregsubtypecode,\r\n                npreregno: inputData.npreregno,\r\n                ntranscode: String(inputData.ntransactionstatus),\r\n                napprovalversioncode: inputData.napprovalversioncode,\r\n                napprovalconfigcode: inputData.napprovalconfigcode,\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n                userinfo: userInfo,\r\n                fromdate: inputData.fromdate,\r\n                todate: inputData.todate,\r\n                ntestcode: inputData.ntestcode,\r\n                transactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                ntransactiontestcode: 0,\r\n                activeTestKey: inputData.activeTestKey,\r\n                ncontrolcode: inputParam.inputData.ncontrolcode,\r\n                nneedsubsample: inputData.masterData.nneedsubsample,\r\n                ndesigntemplatemappingcode: inputData.masterData.ndesigntemplatemappingcode,\r\n                checkBoxOperation:checkBoxOperation.SINGLESELECT,\r\n                nsettingcode:  inputParam.nsettingcode,\r\n                nusercode: inputParam.nusercode,\r\n                susername:  inputParam.susername,\r\n                nneedReceivedInLab:inputParam.inputData.nneedReceivedInLab\r\n            }\r\n            let activeName = \"\";\r\n            let dataStateName = \"\";\r\n            // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\r\n            //     documentDataState, testCommentDataState } = inputData\r\n            // let url = \"resultentrybysample/getTestbasedParameter\"\r\n            switch (inputData.activeTestKey) {\r\n                case \"IDS_RESULTS\":\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    activeName = \"ResultUsedInstrument\"\r\n                    dataStateName = \"instrumentDataState\"\r\n                    break;\r\n                case \"IDS_MATERIAL\":\r\n                    activeName = \"ResultUsedMaterial\"\r\n                    dataStateName = \"materialDataState\"\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    activeName = \"ResultUsedTasks\"\r\n                    dataStateName = \"taskDataState\"\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    activeName = \"RegistrationTestAttachment\"\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    activeName = \"RegistrationTestComment\"\r\n                    dataStateName = \"testCommentDataState\"\r\n                    break;\r\n                case \"IDS_DOCUMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"documentDataState\"\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    activeName = \"ResultChangeHistory\"\r\n                    dataStateName = \"resultChangeDataState\"\r\n                    break;\r\n                case \"IDS_SAMPLEATTACHMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                default:\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n            }\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/completeTest\", inputParamData)\r\n                .then(response => {\r\n                    let RE_SAMPLE = [];\r\n                    let RE_SUBSAMPLE = [];\r\n                    let RE_TEST = [];\r\n                    let onlySampleService=false;\r\n                    let responseData =  sortData(response.data, 'ascending', 'ntransactionresultcode')//response.data\r\n                    //rules engine new subsample outcome --start ---\r\n                    let testcode= responseData[\"RE_TEST\"].map(test => test.npreregno).join(\",\");\r\n                    let sampleCode= responseData[\"RE_SUBSAMPLE\"].map(test => test.npreregno).join(\",\");\r\n                    inputData.masterData[\"searchedSample\"] && inputData.masterData[\"searchedSample\"].map(item=>{  \r\n                        if(!testcode.includes(String(item.npreregno)) && !sampleCode.includes(String(item.npreregno)) ){\r\n                            responseData[\"RE_TEST\"]=[];\r\n                            responseData[\"RE_SUBSAMPLE\"]=[];\r\n                            responseData[\"RESelectedSubSample\"]=[];\r\n                            responseData[\"RESelectedTest\"]=[];\r\n                            isSearched=true;\r\n                        }\r\n                    });\r\n                    let transactiontestcode=inputData.masterData[\"RE_TEST\"].map(test => test.ntransactiontestcode).join(\",\")\r\n                    responseData[\"RE_TEST\"]&& responseData[\"RE_TEST\"].forEach(element => {\r\n                            if(!transactiontestcode.includes(String(element.ntransactiontestcode))){\r\n                                inputData.masterData[\"RE_TEST\"].push(element);\r\n                            }\r\n                    });\r\n                    let transactionsamplecode=inputData.masterData[\"RE_SUBSAMPLE\"].map(item=>item.ntransactionsamplecode).join(\",\")\r\n                    responseData[\"RE_SUBSAMPLE\"] && responseData[\"RE_SUBSAMPLE\"].forEach(element => {\r\n                            if(!transactionsamplecode.includes(String(element.ntransactionsamplecode))){\r\n                                inputData.masterData[\"RE_SUBSAMPLE\"].push(element);\r\n                            }\r\n                    });\r\n                    //end--\r\n                    //Added\r\n                    if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\r\n                        inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\r\n                       }\r\n\r\n\r\n                    if (responseData[\"RE_TEST\"] && responseData[\"RE_TEST\"].length > 0) {\r\n                         //Added\r\n                        if (inputData.masterData.realRegSubTypeValue.nneedsubsample//.nneedsubsample\r\n                            )\r\n                            RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\");\r\n                        else\r\n                            RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"npreregno\");\r\n                    } else {\r\n                        RE_TEST = inputData.masterData[\"RE_TEST\"];\r\n                    }\r\n\r\n                    RE_SUBSAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"], RE_TEST, \"ntransactionsamplecode\");\r\n                    if (RE_SUBSAMPLE.length > 0) {\r\n                        // RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n                        RE_SAMPLE = replaceUpdatedObject( responseData[\"RE_SAMPLE\"],inputData.masterData[\"RE_SAMPLE\"] , \"npreregno\");\r\n                        //inputData.masterData[\"RE_SAMPLE\"];\r\n                         //Added\r\n                        let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \r\n                        let subSampleArray=RE_SUBSAMPLE.map(x=>x.npreregno);\r\n                        let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\r\n                        selectedSampleArray=selectedSampleArray.filter(item => subSampleArray.includes(item.npreregno)).map(x=>x.npreregno) \r\n                        let unwantedPreregno=  selectPreregNOBefore.filter(function (x) {\r\n                            return !selectedSampleArray.some(function (y) { \r\n                              return x  === y \r\n                            })\r\n                          }); \r\n                        RE_SAMPLE= RE_SAMPLE.filter(item => !unwantedPreregno.includes(item.npreregno))\r\n                        //RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\r\n                    } else {\r\n                        RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n\r\n                        RE_SAMPLE = filterRecordBasedOnTwoArrays(RE_SAMPLE, RE_TEST, \"npreregno\");\r\n                    }\r\n                  //  const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\r\n                  //Added\r\n                  const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] :  RE_SAMPLE\r\n\r\n                 \r\n\r\n                  let boolSelectedSubSample; \r\n                  let searchedSubSample = undefined; \r\n                  let RESelectedSubSample=[];\r\n                  let backfrontTest= getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\")\r\n                   if(inputData.masterData[\"searchedSubSample\"]){\r\n                       searchedSubSample =inputData.masterData[\"searchedSubSample\"]\r\n                       boolSelectedSubSample=searchedSubSample.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n\r\n                       let searchedSubSamplebefore=inputData.masterData[\"RESelectedSubSample\"].map(x=>x.ntransactionsamplecode);\r\n                       searchedSubSample= inputData.masterData[\"RESelectedSubSample\"].filter(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                       let searchedSubSampleaftere=searchedSubSample.map(x=>x.ntransactionsamplecode);\r\n                       let unwantedSamplecode=  searchedSubSamplebefore.filter(function (x) {\r\n                          return !searchedSubSampleaftere.some(function (y) { \r\n                            return x  === y \r\n                          })\r\n                        });  \r\n                        inputData.masterData[\"searchedSubSample\"]=inputData.masterData[\"searchedSubSample\"].filter(item => !unwantedSamplecode.includes(item.ntransactionsamplecode)) \r\n                    }else{\r\n                      boolSelectedSubSample=RE_SUBSAMPLE.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                    }\r\n                 \r\n                  if(inputData.masterData[\"searchedSubSample\"]//&&inputData.masterData[\"searchedSubSample\"].length>0\r\n                  ){\r\n                      RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :\r\n                      inputData.masterData[\"searchedSubSample\"][0]? [inputData.masterData[\"searchedSubSample\"][0]]:[]\r\n                  }else{\r\n                      RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :  RE_SUBSAMPLE\r\n                  }  \r\n                  //  const RESelectedSubSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\r\n                    let RESelectedTest1 = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"], acceptList, \"ntransactiontestcode\");\r\n                    let RESelectedTest2 = updatedObjectWithNewElement(RESelectedTest1, responseData.RESelectedTest)\r\n\r\n                    let searchedSample = undefined;\r\n                    if (inputData.masterData[\"searchedSample\"]) {\r\n                        RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"searchedSample\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n\r\n                        searchedSample = filterRecordBasedOnTwoArrays(RE_SAMPLE//inputData.masterData[\"searchedSample\"]\r\n                        ,\r\n                         RE_TEST, \"npreregno\");\r\n                         searchedSample=searchedSample.length>0?searchedSample:isSearched?[]:inputData.masterData[\"searchedSample\"];\r\n                    }\r\n\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        ...responseData,\r\n                        RE_SAMPLE,\r\n                        RE_SUBSAMPLE,\r\n                        RESelectedSubSample,\r\n                        searchedSample,\r\n                        RESelectedSample,\r\n \t\t\t\t\t\tRESelectedTest: RESelectedTest2,\r\n                         RESelectedTest: response.data.hasOwnProperty('RegistrationTestAlert')\r\n                         &&Object.keys(response.data['RegistrationTestAlert']).length !== 0\r\n                         ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&\r\n                         Object.keys(response.data['NewTestGroupTestAlert']).length !== 0?\r\n                         inputData.masterData[\"RESelectedTest\"]://RESelectedTest2\r\n                         inputData.masterData[\"searchedTest\"]&&\r\n                         inputData.masterData[\"searchedTest\"].length>0?[inputData.masterData[\"searchedTest\"][0]]: \r\n                         responseData.RESelectedTest\r\n                         ,\r\n                         \r\n                        //  RE_TEST:compareArrays(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"])?\r\n                        //  inputData.masterData[\"RE_TEST\"]: responseData[\"RE_TEST\"]\r\n                        RE_TEST: responseData[\"RE_TEST\"]\r\n                        \r\n                    }\r\n                    let skipInfo = {};\r\n                    // if (masterData.RE_SAMPLE && masterData.RE_SAMPLE.length <= inputParam.skip) { //ALPD-2230\r\n                    if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length == 0 && masterData.RE_TEST && masterData.RE_TEST.length == 0){\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            skip: 0,\r\n                            take: inputParam.take\r\n                        }\r\n                    }\r\n                    // }\r\n                    if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length <= inputParam.subSampleTake){\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            subSampleSkip: 0,\r\n                            subSampleTake: inputParam.subSampleTake\r\n                        }\r\n                    }\r\n                    if (masterData.RE_TEST && masterData.RE_TEST.length <= inputParam.testskip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            testskip: 0,\r\n                            testtake: inputParam.testtake\r\n                        }\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    let respObject = {\r\n                        RegistrationTestAlert: response.data.hasOwnProperty('RegistrationTestAlert')//&&response.data.RegistrationTestAlert.length>0\r\n                        ?response.data.RegistrationTestAlert:{},\r\n                        NewTestGroupTestAlert:response.data.hasOwnProperty('NewTestGroupTestAlert')//&&response.data.NewTestGroupTestAlert.length>0\r\n                        ?response.data.NewTestGroupTestAlert:{},\r\n                        showAlertGrid:response.data.hasOwnProperty('RegistrationTestAlert')&&Object.keys(response.data['RegistrationTestAlert']).length !== 0\r\n                        ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&Object.keys(response.data['NewTestGroupTestAlert']).length !== 0//&&response.data.RegistrationTestAlert.length>0||\r\n                       // response.data.hasOwnProperty('NewTestGroupTestAlert')&&response.data.NewTestGroupTestAlert.length>0\r\n                        ?true:false,\r\n                        showAlertForPredefined:false,\r\n                        additionalInfoView:false,\r\n                        ...inputParamData.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        //selectedRecord: undefined,\r\n                        loading: false,\r\n                        screenName: inputData.activeTestKey,\r\n                        ...skipInfo\r\n                    }\r\n                    if (searchedSample //&& RESelectedSample.length === 0 \r\n                        && searchedSample.length > 0) {\r\n                        const paramList = inputParam.postParamList[0];\r\n                        const inputParameter = {\r\n                            ...paramList.fecthInputObject.fecthInputObject,\r\n                            fetchUrl: paramList.fetchUrl,\r\n                            [paramList.primaryKeyField]: String(searchedSample[0][paramList.primaryKeyField]),\r\n                            ntype: 2,\r\n                            nflag: 2\r\n                        };\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData: {\r\n                                ...masterData,\r\n                                RESelectedSample: [searchedSample[0]]\r\n                            }\r\n                        }\r\n                       // dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                        dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                    } else if (!searchedSample && RESelectedSample.length === 0 && RE_SAMPLE.length > 0) {\r\n                        const paramList = inputParam.postParamList[0];\r\n                        const inputParameter = {\r\n                            ...paramList.fecthInputObject.fecthInputObject,\r\n                            fetchUrl: paramList.fetchUrl,\r\n                            [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                            ntype: 2,\r\n                            nflag: 2\r\n                        };\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData: {\r\n                                ...masterData,\r\n                                RESelectedSample: [RE_SAMPLE[0]]\r\n                            }\r\n                        }\r\n                        //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                        dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                    }else if (!searchedSample && RE_SAMPLE.length > 0) {\r\n                        let inputParameter \r\n                        if(RESelectedSample.length > 0 || RE_SUBSAMPLE.length > 0)\r\n                        {\r\n                            onlySampleService=true;\r\n                            let paramList = inputParam.postParamList[0];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 2,\r\n                                nflag: 2\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSample: [RE_SAMPLE[0]]\r\n                                }\r\n                            }\r\n                            //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        }\r\n\r\n                        if(boolSelectedSubSample===false?(boolSelectedSubSample===false&&onlySampleService===false&&RESelectedSubSample.length !== 0\r\n                            //&&!searchedSubSample\r\n                            )\r\n                        :(RESelectedSubSample.length === 0 && RE_SUBSAMPLE.length > 0))\r\n                        {\r\n                            let paramList = inputParam.postParamList[1];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 3,\r\n                                nflag: 3\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSubSample: [RE_SUBSAMPLE[0]]\r\n                                }\r\n                            }\r\n                            //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        } \r\n                        else {\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData\r\n                            };\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    ...respObject,\r\n                                    loading: false\r\n                                }\r\n                            });\r\n                        }\r\n\r\n\r\n                    }   \r\n                    else {\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData\r\n                        };\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                ...respObject,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                            toast.warn(error.response.data); \r\n                    }\r\n                })\r\n        }\r\n    } else {\r\n        toast.warn(intl.formatMessage({\r\n            id: \"IDS_SELECTTESTTOCOMPLETE\"\r\n        }));\r\n    }\r\n\r\n}*/\r\n\r\n// //Added by sonia on  24-07-2024 for Jira ID:ALPD-4649\r\n// export function completeTest(inputParam, acceptList, userInfo, completeResultId,booleanFlag,param) {\r\n//     if (acceptList !== undefined && acceptList.length > 0) {\r\n//         return function (dispatch) {\r\n//             let isSearched=false;\r\n//             let inputData = inputParam.testChildGetREParam\r\n//             let inputParamData = {\r\n//                 ntype: 3,\r\n//                // nflag: 2,\r\n//                ninsertMaterialInventoryTrans:inputParam.inputData.ninsertMaterialInventoryTrans,\r\n//                nportalrequired:inputParam.inputData.nportalrequired,\r\n//                 basedrulesengine:param.basedrulesengine,\r\n//                 nsampletypecode: inputData.nsampletypecode,\r\n//                 nregtypecode: inputData.nregtypecode,\r\n//                 nregsubtypecode: inputData.nregsubtypecode,\r\n//                 npreregno: inputData.npreregno,\r\n//                 ntranscode: String(inputData.ntransactionstatus),\r\n//                 napprovalversioncode: inputData.napprovalversioncode,\r\n//                 napprovalconfigcode: inputData.napprovalconfigcode,\r\n//                 ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n//                 userinfo: userInfo,\r\n//                 fromdate: inputData.fromdate,\r\n//                 todate: inputData.todate,\r\n//                 ntestcode: inputData.ntestcode,\r\n//                 transactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n//                 ntransactiontestcode: 0,\r\n//                 activeTestKey: inputData.activeTestKey,\r\n//                 ncontrolcode: inputParam.inputData.ncontrolcode,\r\n//                 nneedsubsample: inputData.masterData.nneedsubsample,\r\n//                 ndesigntemplatemappingcode: inputData.masterData.ndesigntemplatemappingcode,\r\n//                 checkBoxOperation:checkBoxOperation.SINGLESELECT,\r\n//                 nsettingcode:  inputParam.nsettingcode,\r\n//                 nusercode: inputParam.nusercode,\r\n//                 susername:  inputParam.susername,\r\n//                 nneedReceivedInLab:inputParam.inputData.nneedReceivedInLab\r\n//             }\r\n//             let activeName = \"\";\r\n//             let dataStateName = \"\";\r\n//             // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\r\n//             //     documentDataState, testCommentDataState } = inputData\r\n//             // let url = \"resultentrybysample/getTestbasedParameter\"\r\n//             switch (inputData.activeTestKey) {\r\n//                 case \"IDS_RESULTS\":\r\n//                     activeName = \"TestParameters\"\r\n//                     dataStateName = \"resultDataState\"\r\n//                     break;\r\n//                 case \"IDS_INSTRUMENT\":\r\n//                     activeName = \"ResultUsedInstrument\"\r\n//                     dataStateName = \"instrumentDataState\"\r\n//                     break;\r\n//                 case \"IDS_MATERIAL\":\r\n//                     activeName = \"ResultUsedMaterial\"\r\n//                     dataStateName = \"materialDataState\"\r\n//                     break;\r\n//                 case \"IDS_TASK\":\r\n//                     activeName = \"ResultUsedTasks\"\r\n//                     dataStateName = \"taskDataState\"\r\n//                     break;\r\n//                 case \"IDS_TESTATTACHMENTS\":\r\n//                     activeName = \"RegistrationTestAttachment\"\r\n//                     break;\r\n//                 case \"IDS_TESTCOMMENTS\":\r\n//                     activeName = \"RegistrationTestComment\"\r\n//                     dataStateName = \"testCommentDataState\"\r\n//                     break;\r\n//                 case \"IDS_DOCUMENTS\":\r\n//                     activeName = \"\"\r\n//                     dataStateName = \"documentDataState\"\r\n//                     break;\r\n//                 case \"IDS_RESULTCHANGEHISTORY\":\r\n//                     activeName = \"ResultChangeHistory\"\r\n//                     dataStateName = \"resultChangeDataState\"\r\n//                     break;\r\n//                 case \"IDS_SAMPLEATTACHMENTS\":\r\n//                     activeName = \"\"\r\n//                     dataStateName = \"resultDataState\"\r\n//                     break;\r\n//                 default:\r\n//                     activeName = \"TestParameters\"\r\n//                     dataStateName = \"resultDataState\"\r\n//                     break;\r\n//             }\r\n//             dispatch(initRequest(true));\r\n//             rsapi.post(\"resultentrybysample/completeTest\", inputParamData)\r\n//                 .then(response => {\r\n//                     if(!response.data.hasOwnProperty(\"ruleFlag\")){\r\n//                         let RE_SAMPLE = [];\r\n//                         let RE_SUBSAMPLE = [];\r\n//                         let RE_TEST = [];\r\n//                         let onlySampleService=false;\r\n//                         let responseData =  sortData(response.data, 'ascending', 'ntransactionresultcode')//response.data\r\n//                         //rules engine new subsample outcome --start ---\r\n//                         let testcode= responseData[\"RE_TEST\"].map(test => test.npreregno).join(\",\");\r\n//                         let sampleCode= responseData[\"RE_SUBSAMPLE\"].map(test => test.npreregno).join(\",\");\r\n//                         inputData.masterData[\"searchedSample\"] && inputData.masterData[\"searchedSample\"].map(item=>{  \r\n//                             if(!testcode.includes(String(item.npreregno)) && !sampleCode.includes(String(item.npreregno)) ){\r\n//                                 responseData[\"RE_TEST\"]=[];\r\n//                                 responseData[\"RE_SUBSAMPLE\"]=[];\r\n//                                 responseData[\"RESelectedSubSample\"]=[];\r\n//                                 responseData[\"RESelectedTest\"]=[];\r\n//                                 isSearched=true;\r\n//                             }\r\n//                         });\r\n//                         let transactiontestcode=inputData.masterData[\"RE_TEST\"].map(test => test.ntransactiontestcode).join(\",\")\r\n//                         responseData[\"RE_TEST\"]&& responseData[\"RE_TEST\"].forEach(element => {\r\n//                             if(!transactiontestcode.includes(String(element.ntransactiontestcode))){\r\n//                                 inputData.masterData[\"RE_TEST\"].push(element);\r\n//                             }\r\n//                         });\r\n//                         let transactionsamplecode=inputData.masterData[\"RE_SUBSAMPLE\"].map(item=>item.ntransactionsamplecode).join(\",\")\r\n//                         responseData[\"RE_SUBSAMPLE\"] && responseData[\"RE_SUBSAMPLE\"].forEach(element => {\r\n//                             if(!transactionsamplecode.includes(String(element.ntransactionsamplecode))){\r\n//                                 inputData.masterData[\"RE_SUBSAMPLE\"].push(element);\r\n//                             }\r\n//                         });\r\n//                         //end--\r\n//                         //Added\r\n//                         if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\r\n//                             inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\r\n//                         }\r\n\r\n\r\n//                         if (responseData[\"RE_TEST\"] && responseData[\"RE_TEST\"].length > 0) {\r\n//                             //Added\r\n//                             if (inputData.masterData.realRegSubTypeValue.nneedsubsample//.nneedsubsample\r\n//                             )\r\n//                                 RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\");\r\n//                             else\r\n//                                 RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"npreregno\");\r\n//                         } else {\r\n//                             RE_TEST = inputData.masterData[\"RE_TEST\"];\r\n//                         }\r\n\r\n//                         RE_SUBSAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"], RE_TEST, \"ntransactionsamplecode\");\r\n//                         if (RE_SUBSAMPLE.length > 0) {\r\n//                             // RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n//                             RE_SAMPLE = replaceUpdatedObject( responseData[\"RE_SAMPLE\"],inputData.masterData[\"RE_SAMPLE\"] , \"npreregno\");\r\n//                             //inputData.masterData[\"RE_SAMPLE\"];\r\n//                             //Added\r\n//                             let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \r\n//                             let subSampleArray=RE_SUBSAMPLE.map(x=>x.npreregno);\r\n//                             let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\r\n//                             selectedSampleArray=selectedSampleArray.filter(item => subSampleArray.includes(item.npreregno)).map(x=>x.npreregno) \r\n//                             let unwantedPreregno=  selectPreregNOBefore.filter(function (x) {\r\n//                                 return !selectedSampleArray.some(function (y) { \r\n//                                 return x  === y \r\n//                                 })\r\n//                             }); \r\n//                             RE_SAMPLE= RE_SAMPLE.filter(item => !unwantedPreregno.includes(item.npreregno))\r\n//                             //RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\r\n//                         } else {\r\n//                             RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n\r\n//                             RE_SAMPLE = filterRecordBasedOnTwoArrays(RE_SAMPLE, RE_TEST, \"npreregno\");\r\n//                         }\r\n//                         //  const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\r\n//                         //Added\r\n//                         const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] :  RE_SAMPLE\r\n\r\n                 \r\n\r\n//                         let boolSelectedSubSample; \r\n//                         let searchedSubSample = undefined; \r\n//                         let RESelectedSubSample=[];\r\n//                         let backfrontTest= getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\")\r\n//                         if(inputData.masterData[\"searchedSubSample\"]){\r\n//                             searchedSubSample =inputData.masterData[\"searchedSubSample\"]\r\n//                             boolSelectedSubSample=searchedSubSample.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n\r\n//                             let searchedSubSamplebefore=inputData.masterData[\"RESelectedSubSample\"].map(x=>x.ntransactionsamplecode);\r\n//                             searchedSubSample= inputData.masterData[\"RESelectedSubSample\"].filter(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n//                             let searchedSubSampleaftere=searchedSubSample.map(x=>x.ntransactionsamplecode);\r\n//                             let unwantedSamplecode=  searchedSubSamplebefore.filter(function (x) {\r\n//                                 return !searchedSubSampleaftere.some(function (y) { \r\n//                                 return x  === y \r\n//                                 })\r\n//                             });  \r\n//                             inputData.masterData[\"searchedSubSample\"]=inputData.masterData[\"searchedSubSample\"].filter(item => !unwantedSamplecode.includes(item.ntransactionsamplecode)) \r\n//                         }else{\r\n//                             boolSelectedSubSample=RE_SUBSAMPLE.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n//                         }\r\n                 \r\n//                         if(inputData.masterData[\"searchedSubSample\"]//&&inputData.masterData[\"searchedSubSample\"].length>0\r\n//                         ){\r\n//                             RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :\r\n//                             inputData.masterData[\"searchedSubSample\"][0]? [inputData.masterData[\"searchedSubSample\"][0]]:[]\r\n//                         }else{\r\n//                             RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :  RE_SUBSAMPLE\r\n//                         }  \r\n//                         //  const RESelectedSubSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\r\n//                         let RESelectedTest1 = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"], acceptList, \"ntransactiontestcode\");\r\n//                         let RESelectedTest2 = updatedObjectWithNewElement(RESelectedTest1, responseData.RESelectedTest)\r\n\r\n//                         let searchedSample = undefined;\r\n//                         if (inputData.masterData[\"searchedSample\"]) {\r\n//                             RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"searchedSample\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n\r\n//                             searchedSample = filterRecordBasedOnTwoArrays(RE_SAMPLE//inputData.masterData[\"searchedSample\"]\r\n//                             ,\r\n//                             RE_TEST, \"npreregno\");\r\n//                             searchedSample=searchedSample.length>0?searchedSample:isSearched?[]:inputData.masterData[\"searchedSample\"];\r\n//                         }\r\n\r\n//                         let masterData = {\r\n//                             ...inputData.masterData,\r\n//                             ...responseData,\r\n//                             RE_SAMPLE,\r\n//                             RE_SUBSAMPLE,\r\n//                             RESelectedSubSample,\r\n//                             searchedSample,\r\n//                             RESelectedSample,\r\n//                             RESelectedTest: RESelectedTest2,\r\n//                             RESelectedTest: response.data.hasOwnProperty('RegistrationTestAlert')\r\n//                             &&Object.keys(response.data['RegistrationTestAlert']).length !== 0\r\n//                             ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&\r\n//                             Object.keys(response.data['NewTestGroupTestAlert']).length !== 0?\r\n//                             inputData.masterData[\"RESelectedTest\"]://RESelectedTest2\r\n//                             inputData.masterData[\"searchedTest\"]&&\r\n//                             inputData.masterData[\"searchedTest\"].length>0?[inputData.masterData[\"searchedTest\"][0]]: \r\n//                             responseData.RESelectedTest\r\n//                             ,\r\n                         \r\n//                             //  RE_TEST:compareArrays(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"])?\r\n//                             //  inputData.masterData[\"RE_TEST\"]: responseData[\"RE_TEST\"]\r\n//                             RE_TEST: responseData[\"RE_TEST\"]\r\n                        \r\n//                         }\r\n//                         let skipInfo = {};\r\n//                         // if (masterData.RE_SAMPLE && masterData.RE_SAMPLE.length <= inputParam.skip) { //ALPD-2230\r\n//                         if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length == 0 && masterData.RE_TEST && masterData.RE_TEST.length == 0){\r\n//                             skipInfo = {\r\n//                                 ...skipInfo,\r\n//                                 skip: 0,\r\n//                                 take: inputParam.take\r\n//                             }\r\n//                         }\r\n//                         // }\r\n//                         if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length <= inputParam.subSampleTake){\r\n//                             skipInfo = {\r\n//                                 ...skipInfo,\r\n//                                 subSampleSkip: 0,\r\n//                                 subSampleTake: inputParam.subSampleTake\r\n//                             }\r\n//                         }\r\n//                         if (masterData.RE_TEST && masterData.RE_TEST.length <= inputParam.testskip) {\r\n//                             skipInfo = {\r\n//                                 ...skipInfo,\r\n//                                 testskip: 0,\r\n//                                 testtake: inputParam.testtake\r\n//                             }\r\n//                         }\r\n//                         if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n//                             skipInfo = {\r\n//                                 ...skipInfo,\r\n//                                 [dataStateName]: {\r\n//                                     ...inputData[dataStateName],\r\n//                                     skip: 0,\r\n//                                     sort: undefined,\r\n//                                     filter: undefined\r\n//                                 }\r\n//                             }\r\n//                         } else {\r\n//                             skipInfo = {\r\n//                                 ...skipInfo,\r\n//                                 [dataStateName]: {\r\n//                                     ...inputData[dataStateName],\r\n//                                     sort: undefined,\r\n//                                     filter: undefined\r\n//                                 }\r\n//                             }\r\n//                         }\r\n//                         let respObject = {\r\n//                             RegistrationTestAlert: response.data.hasOwnProperty('RegistrationTestAlert')//&&response.data.RegistrationTestAlert.length>0\r\n//                             ?response.data.RegistrationTestAlert:{},\r\n//                             NewTestGroupTestAlert:response.data.hasOwnProperty('NewTestGroupTestAlert')//&&response.data.NewTestGroupTestAlert.length>0\r\n//                             ?response.data.NewTestGroupTestAlert:{},\r\n//                             showAlertGrid:response.data.hasOwnProperty('RegistrationTestAlert')&&Object.keys(response.data['RegistrationTestAlert']).length !== 0\r\n//                             ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&Object.keys(response.data['NewTestGroupTestAlert']).length !== 0//&&response.data.RegistrationTestAlert.length>0||\r\n//                         // response.data.hasOwnProperty('NewTestGroupTestAlert')&&response.data.NewTestGroupTestAlert.length>0\r\n//                             ?true:false,\r\n//                             showAlertForPredefined:false,\r\n//                             additionalInfoView:false,\r\n//                             ...inputParamData.inputData,\r\n//                             openModal: false,\r\n//                             loadEsign: false,\r\n//                             showConfirmAlert: false,\r\n//                             //selectedRecord: undefined,\r\n//                             loading: false,\r\n//                             screenName: inputData.activeTestKey,\r\n//                             ...skipInfo\r\n//                         }\r\n//                         if (searchedSample //&& RESelectedSample.length === 0 \r\n//                         && searchedSample.length > 0) {\r\n//                             const paramList = inputParam.postParamList[0];\r\n//                             const inputParameter = {\r\n//                                 ...paramList.fecthInputObject.fecthInputObject,\r\n//                                 fetchUrl: paramList.fetchUrl,\r\n//                                 [paramList.primaryKeyField]: String(searchedSample[0][paramList.primaryKeyField]),\r\n//                                 ntype: 2,\r\n//                                 nflag: 2\r\n//                             };\r\n//                             respObject = {\r\n//                                 ...respObject,\r\n//                                 masterData: {\r\n//                                     ...masterData,\r\n//                                     RESelectedSample: [searchedSample[0]]\r\n//                                 }\r\n//                             }\r\n//                         // dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n//                             dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n//                         } else if (!searchedSample && RESelectedSample.length === 0 && RE_SAMPLE.length > 0) {\r\n//                             const paramList = inputParam.postParamList[0];\r\n//                             const inputParameter = {\r\n//                                 ...paramList.fecthInputObject.fecthInputObject,\r\n//                                 fetchUrl: paramList.fetchUrl,\r\n//                                 [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n//                                 ntype: 2,\r\n//                                 nflag: 2\r\n//                             };\r\n//                             respObject = {\r\n//                                 ...respObject,\r\n//                                 masterData: {\r\n//                                     ...masterData,\r\n//                                     RESelectedSample: [RE_SAMPLE[0]]\r\n//                                 }\r\n//                             }\r\n//                             //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n//                             dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n//                         }else if (!searchedSample && RE_SAMPLE.length > 0) {\r\n//                             let inputParameter \r\n//                             if(RESelectedSample.length > 0 || RE_SUBSAMPLE.length > 0)\r\n//                             {\r\n//                                 onlySampleService=true;\r\n//                                 let paramList = inputParam.postParamList[0];\r\n//                                 inputParameter = {\r\n//                                     ...paramList.fecthInputObject.fecthInputObject,\r\n//                                     fetchUrl: paramList.fetchUrl,\r\n//                                     [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n//                                     ntype: 2,\r\n//                                     nflag: 2\r\n//                                 };\r\n\r\n//                                 respObject = {\r\n//                                     ...respObject,\r\n//                                     masterData: {\r\n//                                         ...masterData,\r\n//                                         RESelectedSample: [RE_SAMPLE[0]]\r\n//                                     }\r\n//                                 }\r\n//                                 //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n//                                 dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n//                             }\r\n\r\n//                             if(boolSelectedSubSample===false?(boolSelectedSubSample===false&&onlySampleService===false&&RESelectedSubSample.length !== 0\r\n//                             //&&!searchedSubSample\r\n//                             )\r\n//                             :(RESelectedSubSample.length === 0 && RE_SUBSAMPLE.length > 0))\r\n//                             {   \r\n//                                 let paramList = inputParam.postParamList[1];\r\n//                                 inputParameter = {\r\n//                                     ...paramList.fecthInputObject,\r\n//                                     fetchUrl: paramList.fetchUrl,\r\n//                                     [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\r\n//                                     ntype: 3,\r\n//                                     nflag: 3\r\n//                                 };\r\n\r\n//                                 respObject = {\r\n//                                     ...respObject,\r\n//                                     masterData: {\r\n//                                         ...masterData,\r\n//                                         RESelectedSubSample: [RE_SUBSAMPLE[0]]\r\n//                                     }\r\n//                                 }\r\n//                                 //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n//                                 dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n//                             } \r\n//                             else {\r\n//                                 respObject = {\r\n//                                     ...respObject,\r\n//                                     masterData\r\n//                                 };\r\n//                                 dispatch({\r\n//                                     type: DEFAULT_RETURN,\r\n//                                     payload: {\r\n//                                         ...respObject,\r\n//                                         loading: false\r\n//                                     }\r\n//                                 });\r\n//                             }\r\n\r\n\r\n//                         }   \r\n//                         else {\r\n//                             respObject = {\r\n//                                 ...respObject,\r\n//                                 masterData\r\n//                             };\r\n//                             dispatch({\r\n//                                 type: DEFAULT_RETURN,\r\n//                                 payload: {\r\n//                                     ...respObject,\r\n//                                     loading: false\r\n//                                 }\r\n//                             });\r\n//                         }\r\n//                     }else {\r\n//                         let respObject = {\r\n//                             RegistrationTestAlert: response.data.hasOwnProperty('RegistrationTestAlert')\r\n//                             ?response.data.RegistrationTestAlert:{},\r\n//                             NewTestGroupTestAlert:response.data.hasOwnProperty('NewTestGroupTestAlert')\r\n//                             ?response.data.NewTestGroupTestAlert:{},\r\n//                             showAlertGrid:response.data.hasOwnProperty('RegistrationTestAlert')&&Object.keys(response.data['RegistrationTestAlert']).length !== 0\r\n//                             ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&Object.keys(response.data['NewTestGroupTestAlert']).length !== 0\r\n//                             ?true:false,\r\n//                             showAlertForPredefined:false,\r\n//                             additionalInfoView:false,\r\n//                             ...inputParamData.inputData,\r\n//                             openModal: false,\r\n//                             loadEsign: false,\r\n//                             showConfirmAlert: false,\r\n//                             loading: false,\r\n//                             screenName: inputData.activeTestKey,\r\n                            \r\n//                         }\r\n//                         const  masterData= {                        \r\n//                             ...inputData.masterData                                     \r\n                               \r\n//                         }                       \r\n    \r\n//                         dispatch({\r\n//                             type: DEFAULT_RETURN,\r\n//                                 payload: {\r\n//                                     masterData,\r\n//                                     ...respObject, \r\n//                                     loading: false\r\n//                                 }\r\n//                         });\r\n//                     }\r\n\r\n                    \r\n//                 })\r\n//                 .catch(error => {\r\n//                     dispatch({\r\n//                         type: DEFAULT_RETURN,\r\n//                         payload: {\r\n//                             loading: false\r\n//                         }\r\n//                     })\r\n//                     if (error.response.status === 500) {\r\n//                         toast.error(error.message);\r\n//                     } else {\r\n//                             toast.warn(error.response.data); \r\n//                     }\r\n//                 })\r\n//         }\r\n//     } else {\r\n//         toast.warn(intl.formatMessage({\r\n//             id: \"IDS_SELECTTESTTOCOMPLETE\"\r\n//         }));\r\n//     }\r\n\r\n// }\r\n\r\nexport function completeTest(inputParam, acceptList, userInfo, completeResultId,booleanFlag,param) {\r\n    if (acceptList !== undefined && acceptList.length > 0) {\r\n        return function (dispatch) {\r\n            let isSearched=false;\r\n            let inputData = inputParam.testChildGetREParam\r\n            let inputParamData = {\r\n                ntype: 3,\r\n               nflag: 3,\r\n               ninsertMaterialInventoryTrans:inputParam.inputData.ninsertMaterialInventoryTrans,\r\n               nportalrequired:inputParam.inputData.nportalrequired,\r\n                basedrulesengine:param.basedrulesengine,\r\n                nsampletypecode: inputData.nsampletypecode,\r\n                nregtypecode: inputData.nregtypecode,\r\n                nregsubtypecode: inputData.nregsubtypecode,\r\n                npreregno: inputData.npreregno,\r\n                ntranscode: String(inputData.ntransactionstatus),\r\n                napprovalversioncode: inputData.napprovalversioncode,\r\n                napprovalconfigcode: inputData.napprovalconfigcode,\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n                userinfo: userInfo,\r\n                fromdate: inputData.fromdate,\r\n                todate: inputData.todate,\r\n                ntestcode: inputData.ntestcode,\r\n                transactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                ntransactiontestcode: 0,\r\n                activeTestKey: inputData.activeTestKey,\r\n                ncontrolcode: inputParam.inputData.ncontrolcode,\r\n                nneedsubsample: inputData.masterData.nneedsubsample,\r\n                ndesigntemplatemappingcode: inputData.masterData.ndesigntemplatemappingcode,\r\n                 checkBoxOperation:checkBoxOperation.SINGLESELECT,\r\n                nsettingcode:  inputParam.nsettingcode,\r\n                nusercode: inputParam.nusercode,\r\n                susername:  inputParam.susername,\r\n                nneedReceivedInLab:inputParam.inputData.nneedReceivedInLab\r\n            }\r\n            let activeName = \"\";\r\n            let dataStateName = \"\";\r\n            // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\r\n            //     documentDataState, testCommentDataState } = inputData\r\n            // let url = \"resultentrybysample/getTestbasedParameter\"\r\n            switch (inputData.activeTestKey) {\r\n                case \"IDS_RESULTS\":\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    activeName = \"ResultUsedInstrument\"\r\n                    dataStateName = \"instrumentDataState\"\r\n                    break;\r\n                case \"IDS_MATERIAL\":\r\n                    activeName = \"ResultUsedMaterial\"\r\n                    dataStateName = \"materialDataState\"\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    activeName = \"ResultUsedTasks\"\r\n                    dataStateName = \"taskDataState\"\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    activeName = \"RegistrationTestAttachment\"\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    activeName = \"RegistrationTestComment\"\r\n                    dataStateName = \"testCommentDataState\"\r\n                    break;\r\n                case \"IDS_DOCUMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"documentDataState\"\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    activeName = \"ResultChangeHistory\"\r\n                    dataStateName = \"resultChangeDataState\"\r\n                    break;\r\n                case \"IDS_SAMPLEATTACHMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                default:\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n            }\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/completeTest\", inputParamData)\r\n                .then(response => {\r\n                    let RE_SAMPLE = [];\r\n                    let RE_SUBSAMPLE = [];\r\n                    let RE_TEST = [];\r\n                    let onlySampleService=false;\r\n                    let responseData =  sortData(response.data, 'ascending', 'ntransactionresultcode')//response.data\r\n                    //rules engine new subsample outcome --start ---\r\n                    // let testcode= responseData[\"RE_TEST\"].map(test => test.npreregno).join(\",\");\r\n                    // let sampleCode= responseData[\"RE_SUBSAMPLE\"].map(test => test.npreregno).join(\",\");\r\n                    // inputData.masterData[\"searchedSample\"] && inputData.masterData[\"searchedSample\"].map(item=>{  \r\n                    //     if(!testcode.includes(String(item.npreregno)) && !sampleCode.includes(String(item.npreregno)) ){\r\n                    //         responseData[\"RE_TEST\"]=[];\r\n                    //         responseData[\"RE_SUBSAMPLE\"]=[];\r\n                    //         responseData[\"RESelectedSubSample\"]=[];\r\n                    //         responseData[\"RESelectedTest\"]=[];\r\n                    //         isSearched=true;\r\n                    //     }\r\n                    // });\r\n                    // let transactiontestcode=inputData.masterData[\"RE_TEST\"].map(test => test.ntransactiontestcode).join(\",\")\r\n                    // responseData[\"RE_TEST\"]&& responseData[\"RE_TEST\"].forEach(element => {\r\n                    //         if(!transactiontestcode.includes(String(element.ntransactiontestcode))){\r\n                    //             inputData.masterData[\"RE_TEST\"].push(element);\r\n                    //         }\r\n                    // });\r\n                    // let transactionsamplecode=inputData.masterData[\"RE_SUBSAMPLE\"].map(item=>item.ntransactionsamplecode).join(\",\")\r\n                    // responseData[\"RE_SUBSAMPLE\"] && responseData[\"RE_SUBSAMPLE\"].forEach(element => {\r\n                    //         if(!transactionsamplecode.includes(String(element.ntransactionsamplecode))){\r\n                    //             inputData.masterData[\"RE_SUBSAMPLE\"].push(element);\r\n                    //         }\r\n                    // });\r\n                    //end--\r\n                    //Added\r\n                    if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\r\n                        inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\r\n                       }\r\n\r\n\r\n                    if (responseData[\"RE_TEST\"] && responseData[\"RE_TEST\"].length > 0) {\r\n                         //Added\r\n                        if (inputData.masterData.realRegSubTypeValue.nneedsubsample//.nneedsubsample\r\n                            ){\r\n                          //ALPD-4828\r\n                          //Result entry-->sample disappeared when complete the single test\r\n                            if(responseData.getNewSample){\r\n                             RE_TEST=responseData[\"RE_TEST\"]\r\n                            }else{\r\n                            RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\");\r\n                            }\r\n                        }else\r\n                            RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"npreregno\");\r\n                    } else {\r\n                        RE_TEST = inputData.masterData[\"RE_TEST\"];\r\n                    }\r\n\t\t\t\t\t\t\t//ALPD-4828 neeraj\r\n                          //Result entry-->sample disappeared when complete the single test\r\n                    if(responseData.getNewSample){\r\n                        RE_SUBSAMPLE=responseData[\"RE_SUBSAMPLE\"];\r\n                    }else{\r\n                    RE_SUBSAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"], RE_TEST, \"ntransactionsamplecode\");\r\n                    }\r\n                    if (RE_SUBSAMPLE.length > 0) {\r\n                        // RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n                        RE_SAMPLE = replaceUpdatedObject( responseData[\"RE_SAMPLE\"],inputData.masterData[\"RE_SAMPLE\"] , \"npreregno\");\r\n                        //inputData.masterData[\"RE_SAMPLE\"];\r\n                         //Added\r\n                        let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \r\n                        let subSampleArray=RE_SUBSAMPLE.map(x=>x.npreregno);\r\n                        let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\r\n                        selectedSampleArray=selectedSampleArray.filter(item => subSampleArray.includes(item.npreregno)).map(x=>x.npreregno) \r\n                        let unwantedPreregno=  selectPreregNOBefore.filter(function (x) {\r\n                            return !selectedSampleArray.some(function (y) { \r\n                              return x  === y \r\n                            })\r\n                          }); \r\n                        RE_SAMPLE= RE_SAMPLE.filter(item => !unwantedPreregno.includes(item.npreregno))\r\n                        //RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\r\n                    } else {\r\n                        RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n                        if(RE_SAMPLE && RE_SAMPLE.length > 0){\r\n                            RE_SAMPLE = filterRecordBasedOnTwoArrays(RE_SAMPLE, RE_TEST, \"npreregno\");\r\n                        } else {\r\n                            RE_SAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"], inputData.masterData[\"RESelectedTest\"], \"npreregno\");\r\n                        }\r\n                    }\r\n                  //  const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\r\n                  //Added\r\n                //   const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] :  RE_SAMPLE\r\n                  const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] :  \r\n                        filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");               \r\n\r\n                  let boolSelectedSubSample; \r\n                  let searchedSubSample = undefined; \r\n                  let RESelectedSubSample=[];\r\n                  let backfrontTest= getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\")\r\n                   if(inputData.masterData[\"searchedSubSample\"]){\r\n                       searchedSubSample =inputData.masterData[\"searchedSubSample\"]\r\n                       boolSelectedSubSample=searchedSubSample.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n\r\n                       let searchedSubSamplebefore=inputData.masterData[\"RESelectedSubSample\"].map(x=>x.ntransactionsamplecode);\r\n                       searchedSubSample= inputData.masterData[\"RESelectedSubSample\"].filter(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                       let searchedSubSampleaftere=searchedSubSample.map(x=>x.ntransactionsamplecode);\r\n                       let unwantedSamplecode=  searchedSubSamplebefore.filter(function (x) {\r\n                          return !searchedSubSampleaftere.some(function (y) { \r\n                            return x  === y \r\n                          })\r\n                        });  \r\n                        inputData.masterData[\"searchedSubSample\"]=inputData.masterData[\"searchedSubSample\"].filter(item => !unwantedSamplecode.includes(item.ntransactionsamplecode)) \r\n                    }else{\r\n                      boolSelectedSubSample=RE_SUBSAMPLE.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                    }\r\n                 \r\n                  if(inputData.masterData[\"searchedSubSample\"]//&&inputData.masterData[\"searchedSubSample\"].length>0\r\n                  ){\r\n                      RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :\r\n                      inputData.masterData[\"searchedSubSample\"][0]? [inputData.masterData[\"searchedSubSample\"][0]]:[]\r\n                  }else{\r\n\t\t\t\t\t\t\t//ALPD-4828 neeraj\r\n                          //Result entry-->sample disappeared when complete the single test\r\n                      RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :responseData.getNewSample? responseData[\"RESelectedSubSample\"] :  RE_SUBSAMPLE\r\n                  }  \r\n                  //  const RESelectedSubSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\r\n                    let RESelectedTest1 = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"], acceptList, \"ntransactiontestcode\");\r\n                    let RESelectedTest2 = updatedObjectWithNewElement(RESelectedTest1, responseData.RESelectedTest)\r\n\r\n                    let searchedSample = undefined;\r\n                    // if (inputData.masterData[\"searchedSample\"]) {\r\n                    //     RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"searchedSample\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n\r\n                    //     searchedSample = filterRecordBasedOnTwoArrays(RE_SAMPLE//inputData.masterData[\"searchedSample\"]\r\n                    //     ,\r\n                    //      RE_TEST, \"npreregno\");\r\n                    //     //  searchedSample=searchedSample.length>0?searchedSample:isSearched?[]:inputData.masterData[\"searchedSample\"];\r\n                    // }\r\n                    if (inputData.masterData[\"searchedSample\"]) {\r\n                        if(RESelectedSample && RESelectedSample.length > 0){\r\n                            searchedSample = inputData.masterData[\"searchedSample\"];\r\n                        } else {\r\n                            searchedSample = undefined;\r\n                        }\r\n                        // searchedSample = filterRecordBasedOnTwoArrays(RE_SAMPLE, RE_TEST, \"npreregno\");\r\n                        //  searchedSample=searchedSample.length>0?searchedSample:isSearched?[]:inputData.masterData[\"searchedSample\"];\r\n                    }\r\n                    if(searchedSample && searchedSample.length > 0 && RE_SAMPLE && RE_SAMPLE.length > 0){\r\n                        searchedSample = getSameRecordFromTwoArrays(searchedSample, RE_SAMPLE, \"npreregno\")\r\n                    }\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        ...responseData,\r\n                        RE_SAMPLE,\r\n                        RE_SUBSAMPLE,\r\n                        RESelectedSubSample,\r\n                        searchedSample,\r\n                        RESelectedSample,\r\n \t\t\t\t\t\tRESelectedTest: RESelectedTest2,\r\n                         RESelectedTest: response.data.hasOwnProperty('RegistrationTestAlert')\r\n                         &&Object.keys(response.data['RegistrationTestAlert']).length !== 0\r\n                         ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&\r\n                         Object.keys(response.data['NewTestGroupTestAlert']).length !== 0?\r\n                         inputData.masterData[\"RESelectedTest\"]://RESelectedTest2\r\n                         inputData.masterData[\"searchedTest\"]&&\r\n                         inputData.masterData[\"searchedTest\"].length>0?[inputData.masterData[\"searchedTest\"][0]]: \r\n                         responseData.RESelectedTest\r\n                         ,\r\n                         \r\n                        //  RE_TEST:compareArrays(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"])?\r\n                        //  inputData.masterData[\"RE_TEST\"]: responseData[\"RE_TEST\"]\r\n                        RE_TEST: responseData[\"RE_TEST\"]\r\n                        \r\n                    }\r\n                    let skipInfo = {};\r\n                    // if (masterData.RE_SAMPLE && masterData.RE_SAMPLE.length <= inputParam.skip) { //ALPD-2230\r\n                    if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length == 0 && masterData.RE_TEST && masterData.RE_TEST.length == 0){\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            skip: 0,\r\n                            take: inputParam.take\r\n                        }\r\n                    }\r\n                    // }\r\n                    if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length <= inputParam.subSampleTake){\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            subSampleSkip: 0,\r\n                            subSampleTake: inputParam.subSampleTake\r\n                        }\r\n                    }\r\n                    if (masterData.RE_TEST && masterData.RE_TEST.length <= inputParam.testskip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            testskip: 0,\r\n                            testtake: inputParam.testtake\r\n                        }\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    let respObject = {\r\n                        RegistrationTestAlert: response.data.hasOwnProperty('RegistrationTestAlert')//&&response.data.RegistrationTestAlert.length>0\r\n                        ?response.data.RegistrationTestAlert:{},\r\n                        NewTestGroupTestAlert:response.data.hasOwnProperty('NewTestGroupTestAlert')//&&response.data.NewTestGroupTestAlert.length>0\r\n                        ?response.data.NewTestGroupTestAlert:{},\r\n                        showAlertGrid:response.data.hasOwnProperty('RegistrationTestAlert')&&Object.keys(response.data['RegistrationTestAlert']).length !== 0\r\n                        ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&Object.keys(response.data['NewTestGroupTestAlert']).length !== 0//&&response.data.RegistrationTestAlert.length>0||\r\n                       // response.data.hasOwnProperty('NewTestGroupTestAlert')&&response.data.NewTestGroupTestAlert.length>0\r\n                        ?true:false,\r\n                        showAlertForPredefined:false,\r\n                        additionalInfoView:false,\r\n                        ...inputParamData.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        //selectedRecord: undefined,\r\n                        loading: false,\r\n                        screenName: inputData.activeTestKey,\r\n                        ...skipInfo\r\n                    }\r\n                    if (searchedSample //&& RESelectedSample.length === 0 \r\n                        && searchedSample.length > 0) {\r\n                            if(RE_SUBSAMPLE && RE_SUBSAMPLE.length > 0){\r\n                                if(masterData.RE_TEST && masterData.RE_TEST.length === 0){\r\n                                    let paramList = inputParam.postParamList[1];\r\n                                    let inputParameter = {\r\n                                        ...paramList.fecthInputObject,\r\n                                        fetchUrl: paramList.fetchUrl,\r\n                                        [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\r\n                                        ntype: 3,\r\n                                        nflag: 3\r\n                                    };\r\n        \r\n                                    respObject = {\r\n                                        ...respObject,\r\n                                        masterData: {\r\n                                            ...masterData,\r\n                                            RESelectedSubSample: [RE_SUBSAMPLE[0]]\r\n                                        }\r\n                                    }\r\n                                    //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                                    if(inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null){\r\n                                        inputParam.searchSubSampleRef.current.value = \"\";\r\n                                    }\r\n                                    if(inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null){\r\n                                        inputParam.searchTestRef.current.value = \"\";\r\n                                    }\r\n                                    dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                                } else {\r\n                                    respObject = {\r\n                                        ...respObject,\r\n                                        masterData\r\n                                    };\r\n                                    dispatch({\r\n                                        type: DEFAULT_RETURN,\r\n                                        payload: {\r\n                                            ...respObject,\r\n                                            loading: false\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                            else if(masterData.RE_TEST && masterData.RE_TEST.length === 0){\r\n                                const paramList = inputParam.postParamList[0];\r\n                                const inputParameter = {\r\n                                    ...paramList.fecthInputObject.fecthInputObject,\r\n                                    fetchUrl: paramList.fetchUrl,\r\n                                    [paramList.primaryKeyField]: String(searchedSample[0][paramList.primaryKeyField]),\r\n                                    ntype: 2,\r\n                                    nflag: 2\r\n                                };\r\n                                respObject = {\r\n                                    ...respObject,\r\n                                    masterData: {\r\n                                        ...masterData,\r\n                                        RESelectedSample: [searchedSample[0]]\r\n                                    }\r\n                                }\r\n                               // dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                               if(inputParam.searchSampleRef !== undefined && inputParam.searchSampleRef.current !== null){\r\n                                    inputParam.searchSampleRef.current.value = \"\";\r\n                                }\r\n                                if(inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null){\r\n                                    inputParam.searchSubSampleRef.current.value = \"\";\r\n                                }\r\n                               if(inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null){\r\n                                    inputParam.searchTestRef.current.value = \"\";\r\n                                }\r\n                                dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                            } else {\r\n                                respObject = {\r\n                                    ...respObject,\r\n                                    masterData\r\n                                };\r\n                                dispatch({\r\n                                    type: DEFAULT_RETURN,\r\n                                    payload: {\r\n                                        ...respObject,\r\n                                        loading: false\r\n                                    }\r\n                                });\r\n                            }\r\n                        \r\n                    } else if (!searchedSample && RESelectedSample.length === 0 && RE_SAMPLE.length > 0) {\r\n                        const paramList = inputParam.postParamList[0];\r\n                        const inputParameter = {\r\n                            ...paramList.fecthInputObject.fecthInputObject,\r\n                            fetchUrl: paramList.fetchUrl,\r\n                            [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                            ntype: 2,\r\n                            nflag: 2\r\n                        };\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData: {\r\n                                ...masterData,\r\n                                RESelectedSample: [RE_SAMPLE[0]]\r\n                            }\r\n                        }\r\n                        //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                        if(inputParam.searchSampleRef !== undefined && inputParam.searchSampleRef.current !== null){\r\n                            inputParam.searchSampleRef.current.value = \"\";\r\n                        }\r\n                        if(inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null){\r\n                            inputParam.searchSubSampleRef.current.value = \"\";\r\n                        }\r\n                        if(inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null){\r\n                            inputParam.searchTestRef.current.value = \"\";\r\n                        }\r\n                        dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                    }else if (!searchedSample && RE_SAMPLE.length > 0) {\r\n                        let inputParameter \r\n                        if(RESelectedSample.length === 0 || RE_SUBSAMPLE.length === 0)\r\n                        {\r\n                            onlySampleService=true;\r\n                            let paramList = inputParam.postParamList[0];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 2,\r\n                                nflag: 2\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSample: [RE_SAMPLE[0]]\r\n                                }\r\n                            }\r\n                            //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            if(inputParam.searchSampleRef !== undefined && inputParam.searchSampleRef.current !== null){\r\n                                inputParam.searchSampleRef.current.value = \"\";\r\n                            }\r\n                            if(inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null){\r\n                                inputParam.searchSubSampleRef.current.value = \"\";\r\n                            }\r\n                            if(inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null){\r\n                                inputParam.searchTestRef.current.value = \"\";\r\n                            }\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        }\r\n\r\n                        if(boolSelectedSubSample===false?(boolSelectedSubSample===false&&onlySampleService===false&&RESelectedSubSample.length !== 0\r\n                            //&&!searchedSubSample\r\n                            )\r\n                        :(RESelectedSubSample.length === 0 && RE_SUBSAMPLE.length > 0))\r\n                        {\r\n                            let paramList = inputParam.postParamList[1];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 3,\r\n                                nflag: 3\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSubSample: [RE_SUBSAMPLE[0]]\r\n                                }\r\n                            }\r\n                            //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            if(inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null){\r\n                                inputParam.searchSubSampleRef.current.value = \"\";\r\n                            }\r\n                            if(inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null){\r\n                                inputParam.searchTestRef.current.value = \"\";\r\n                            }\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        } \r\n                        else {\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData\r\n                            };\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    ...respObject,\r\n                                    loading: false\r\n                                }\r\n                            });\r\n                        }\r\n\r\n\r\n                    }   \r\n                    else {\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData\r\n                        };\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                ...respObject,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                            toast.warn(error.response.data); \r\n                    }\r\n                })\r\n        }\r\n    } else {\r\n        toast.warn(intl.formatMessage({\r\n            id: \"IDS_SELECTTESTTOCOMPLETE\"\r\n        }));\r\n    }\r\n\r\n}\r\n\r\nexport function testStart(inputParam, acceptList, userInfo, completeResultId) {\r\n    if (acceptList !== undefined && acceptList.length > 0) {\r\n        return function (dispatch) {\r\n            let inputData = inputParam.testChildGetREParam\r\n            let inputParamData = {\r\n                ntype: 3,\r\n                nflag: 3,\r\n                nsampletypecode: inputData.nsampletypecode,\r\n                nregtypecode: inputData.nregtypecode,\r\n                nregsubtypecode: inputData.nregsubtypecode,\r\n                npreregno: inputData.npreregno,\r\n                 // ALPD-3513\r\n                //  Result entry: When initiate the test, list allignment issue occurs\r\n                ntranscode: String(0),\r\n                //ntranscode:String(inputData.ntransactionstatus),\r\n                napprovalversioncode: inputData.napprovalversioncode,\r\n                napprovalconfigcode: inputData.napprovalconfigcode,\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n                userinfo: userInfo,\r\n                fromdate: inputData.fromdate,\r\n                todate: inputData.todate,\r\n                ntestcode: inputData.ntestcode,\r\n                transactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                //ntransactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                ntransactiontestcode: 0,\r\n                activeTestKey: inputData.activeTestKey,\r\n                ncontrolcode: inputParam.inputData.ncontrolcode,\r\n                ndesigntemplatemappingcode: inputData.masterData.ndesigntemplatemappingcode,\r\n                nneedsubsample : inputParam.inputData.subSampleNeeded,\r\n                needjoballocationandmyjob:inputParam.inputData.NeedJobAllocationAndMyjob,\r\n                nneedjoballocation:inputParam.inputData.nneedjoballocation,\r\n                nneedmyjob:inputParam.inputData.nneedmyjob,\r\n                nneedReceivedInLab:inputParam.inputData.nneedReceivedInLab\r\n            }\r\n            let activeName = \"\";\r\n            let dataStateName = \"\";\r\n            // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\r\n            //     documentDataState, testCommentDataState } = inputData\r\n            // let url = \"resultentrybysample/getTestbasedParameter\"\r\n            switch (inputData.activeTestKey) {\r\n                case \"IDS_RESULTS\":\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    activeName = \"ResultUsedInstrument\"\r\n                    dataStateName = \"instrumentDataState\"\r\n                    break;\r\n                case \"IDS_MATERIAL\":\r\n                    activeName = \"ResultUsedMaterial\"\r\n                    dataStateName = \"materialDataState\"\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    activeName = \"ResultUsedTasks\"\r\n                    dataStateName = \"taskDataState\"\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    activeName = \"RegistrationTestAttachment\"\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    activeName = \"RegistrationTestComment\"\r\n                    dataStateName = \"testCommentDataState\"\r\n                    break;\r\n                case \"IDS_DOCUMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"documentDataState\"\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    activeName = \"ResultChangeHistory\"\r\n                    dataStateName = \"resultChangeDataState\"\r\n                    break;\r\n                case \"IDS_SAMPLEATTACHMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                default:\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n            }\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/testInitiated\", inputParamData)\r\n                .then(response => {\r\n                    let RE_SAMPLE = [];\r\n                    let RE_SUBSAMPLE = [];\r\n                    let RE_TEST = [];\r\n                    let onlySampleService=false;\r\n                    let childTabsKey = [\"TestParameters\", \"ResultUsedInstrument\", \"ResultUsedTasks\", \"RegistrationTestAttachment\",\r\n                            \"ResultChangeHistory\", \"RegistrationTestComment\", \"ResultChangeHistory\" ];\r\n                    //let responseData = response.data \r\n                    let responseData =   sortData(response.data, 'ascending', 'ntransactionresultcode')\r\n                    fillRecordBasedOnCheckBoxSelection(responseData, inputData.masterData, childTabsKey, 3, \"ntransactionsamplecode\", []);\r\n                    let responseRESelectedTest= responseData.RESelectedTest;\r\n                    responseData[\"RESelectedTest\"] = getSameRecordFromTwoArrays(responseData.RE_TEST,inputParam.RESelectedTest,\"ntransactiontestcode\");\r\n                     // ALPD-3513\r\n                        // commed for Result entry: When initiate the test, list allignment issue occurs\r\n                    //ALPD-3425\r\n                    // if(responseData[\"RESelectedTest\"].length === 0){\r\n                    //     responseData[\"RESelectedTest\"] = responseRESelectedTest;\r\n                    // }\r\n                    let responseRE_TEST;\r\n                    // if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\r\n                    //        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                    //     inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\r\n                    //    }\r\n                    if (responseData[\"RE_TEST\"].length > 0) {\r\n                        if (inputData.masterData.realRegSubTypeValue.nneedsubsample)//.nneedsubsample)\r\n                        {\r\n                           //RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\");\r\n                         \r\n                           // RE_TEST = getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RESelectedTest\"],\"ntransactiontestcode\");\r\n                            RE_TEST = replaceUpdatedObject(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"],\"ntransactiontestcode\");\r\n                            responseRE_TEST = replaceUpdatedObject(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"],\"ntransactiontestcode\");;\r\n                        \r\n                        }\r\n                        else\r\n                             RE_TEST= responseData[\"RE_TEST\"]\r\n                             responseRE_TEST = responseData[\"RE_TEST\"]\r\n                           // RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"npreregno\");\r\n                    } else {\r\n                        RE_TEST = inputData.masterData[\"RE_TEST\"];\r\n                        responseRE_TEST = responseData[\"RE_TEST\"]\r\n                    } \r\n                    RE_SUBSAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"], filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\"), \"ntransactionsamplecode\");\r\n                    if (RE_SUBSAMPLE.length > 0) {  \r\n                    //    let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \r\n\r\n                    //    let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\r\n                    //    selectedSampleArray=selectedSampleArray.filter(objx=>RE_TEST.some(objy=>objx['npreregno']===objy['npreregno']))\r\n                    //    let selectedTestPreregno=inputData.masterData[\"RESelectedTest\"].map(x=>x.npreregno);\r\n                    //    let selectPreregNOafter=selectedSampleArray.map(x=>x.npreregno)\r\n                    //    let unwantedPreregno= selectPreregNOBefore.filter(item => !selectPreregNOafter.includes(item))\r\n                    //                         .filter(item => !selectPreregNOafter.includes(item)&& !selectedTestPreregno.includes(item));\r\n\r\n                    //    RE_SAMPLE=inputData.masterData[\"RE_SAMPLE\"].filter(objx=>unwantedPreregno.every(npreregno=>npreregno!==objx['npreregno'])) \r\n                    RE_SAMPLE=inputData.masterData[\"RE_SAMPLE\"];\r\n                    let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \r\n                    let subSampleArray=RE_SUBSAMPLE.map(x=>x.npreregno);\r\n                    let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\r\n                    selectedSampleArray=selectedSampleArray.filter(item => subSampleArray.includes(item.npreregno)).map(x=>x.npreregno) \r\n                    let unwantedPreregno=  selectPreregNOBefore.filter(function (x) {\r\n                        return !selectedSampleArray.some(function (y) { \r\n                          return x  === y \r\n                        })\r\n                      }); \r\n                    RE_SAMPLE= RE_SAMPLE.filter(item => !unwantedPreregno.includes(item.npreregno))\r\n                    //RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\r\n                    } else {\r\n                        RE_SAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"], RE_TEST, \"npreregno\");\r\n                    }\r\n\r\n\r\n                    const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] : [RE_SAMPLE[0]]\r\n                    \r\n                    //const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\r\n\r\n                    // let x=filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\") \r\n                    // let boolSelectedSubSample=x.some(objx=>RE_TEST.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode']))\r\n                    // const RESelectedSubSample =boolSelectedSubSample? filterRecordBasedOnTwoArrays (inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\"):\r\n                    // getSameRecordFromTwoArrays (inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\r\n                    let boolSelectedSubSample; \r\n                    let searchedSubSample = undefined; \r\n                    let RESelectedSubSample=[];\r\n                    let backfrontTest= getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\")\r\n                     if(inputData.masterData[\"searchedSubSample\"]){\r\n                         searchedSubSample =inputData.masterData[\"searchedSubSample\"]\r\n                         boolSelectedSubSample=searchedSubSample.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n\r\n                         let searchedSubSamplebefore=inputData.masterData[\"RESelectedSubSample\"].map(x=>x.ntransactionsamplecode);\r\n                         searchedSubSample= inputData.masterData[\"RESelectedSubSample\"].filter(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                         let searchedSubSampleaftere=searchedSubSample.map(x=>x.ntransactionsamplecode);\r\n                         let unwantedSamplecode=  searchedSubSamplebefore.filter(function (x) {\r\n                            return !searchedSubSampleaftere.some(function (y) { \r\n                              return x  === y \r\n                            })\r\n                          });  \r\n                          inputData.masterData[\"searchedSubSample\"]=inputData.masterData[\"searchedSubSample\"].filter(item => !unwantedSamplecode.includes(item.ntransactionsamplecode)) \r\n                      }else{\r\n                        boolSelectedSubSample=RE_SUBSAMPLE.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                      }\r\n                   \r\n                    if(inputData.masterData[\"searchedSubSample\"]//&&inputData.masterData[\"searchedSubSample\"].length>0\r\n                    ){\r\n                        RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :\r\n                        inputData.masterData[\"searchedSubSample\"][0]? [inputData.masterData[\"searchedSubSample\"][0]]:[]\r\n                    }else{\r\n                        RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :  [RE_SUBSAMPLE[0]]\r\n                    } \r\n                    // let RESelectedTest1 = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"], acceptList, \"ntransactiontestcode\");\r\n                    // let RESelectedTest2 = updatedObjectWithNewElement(RESelectedTest1, responseData.RESelectedTest)\r\n                    // RESelectedTest2 = replaceUpdatedObject(responseData[\"RE_TEST\"], inputData.masterData.RE_TEST, 'ntransactiontestcode')\r\n\r\n                    let searchedSample = undefined;\r\n                    if (inputData.masterData[\"searchedSample\"]) {\r\n                        searchedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"searchedSample\"], RE_SAMPLE, \"npreregno\");\r\n                     searchedSample=searchedSample.length>0?searchedSample:inputData.masterData[\"searchedSample\"];\r\n                    }\r\n\r\n                    let masterData = {\r\n                        // ...inputData.masterData,\r\n                        // //...responseData,\r\n                        // //RE_SAMPLE,\r\n                        // //RE_SUBSAMPLE,\r\n                        // //RESelectedSubSample,\r\n                        // searchedSample,\r\n                        // RE_TEST:replaceUpdatedObject(responseData[\"RE_TEST\"], inputData.masterData.RE_TEST, 'ntransactiontestcode')\r\n                        // //RESelectedSample,\r\n                        // //RESelectedTest: RESelectedTest2,\r\n                        // //RE_TEST: responseData[\"RE_TEST\"]\r\n                        ...inputData.masterData,\r\n                        ...responseData,\r\n                        RE_SAMPLE,\r\n                        RE_SUBSAMPLE,\r\n                        RESelectedSubSample,\r\n                        searchedSample,\r\n                        RESelectedSample,\r\n                        RESelectedTest:inputData.masterData[\"searchedTest\"]&&\r\n                        inputData.masterData[\"searchedTest\"].length>0?[inputData.masterData[\"searchedTest\"][0]]: responseData.RESelectedTest,\r\n                        // ALPD-3513\r\n                        // commed for Result entry: When initiate the test, list allignment issue occurs\r\n                        // RE_TEST: responseData[\"RE_TEST\"]\r\n                        // RE_TEST: responseRE_TEST\r\n                        //ALPD-3425\r\n                        RE_TEST\r\n                    }\r\n                    if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\r\n                        let respObject1={masterData:masterData};\r\n                        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject1))\r\n                    // inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\r\n                    }\r\n                    let skipInfo = {};\r\n                    if (masterData.RE_SAMPLE && masterData.RE_SAMPLE.length <= inputParam.skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            skip: 0,\r\n                            take: inputParam.take\r\n                        }\r\n                    }\r\n                    if (masterData.RE_TEST && masterData.RE_TEST.length <= inputParam.testskip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            testskip: 0,\r\n                            testtake: inputParam.testtake\r\n                        }\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    let respObject = {\r\n                        ...inputParamData.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        //selectedRecord: undefined,\r\n                        loading: false,\r\n                        screenName: inputData.activeTestKey,\r\n                        ...skipInfo\r\n                    }\r\n                    if (searchedSample// && RESelectedSample.length === 0 \r\n                        && searchedSample.length > 0) {\r\n                        if(RESelectedSample.length === 0 || RE_SUBSAMPLE.length == 0){\r\n                            const paramList = inputParam.postParamList[0];\r\n                            const inputParameter = {\r\n                                ...paramList.fecthInputObject.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(searchedSample[0][paramList.primaryKeyField]),\r\n                                ntype: 2,\r\n                                nflag: 2\r\n                            };\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSample: [searchedSample[0]]\r\n                                }\r\n                            }\r\n                          //  dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        } else {\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData\r\n                            };\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    ...respObject,\r\n                                    loading: false\r\n                                }\r\n                            });\r\n                        }\r\n                    } else if (!searchedSample && RE_SAMPLE.length > 0) {\r\n                        let inputParameter\r\n                        // let paramList = inputParam.postParamList[0];\r\n                        // let inputParameter = {\r\n                        //     ...paramList.fecthInputObject.fecthInputObject,\r\n                        //     fetchUrl: paramList.fetchUrl,\r\n                        //     [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                        //     ntype: 2,\r\n                        //     nflag: 2\r\n                        // };\r\n                        // respObject = {\r\n                        //     ...respObject,\r\n                        //     masterData: {\r\n                        //         ...masterData,\r\n                        //         RESelectedSample: [RE_SAMPLE[0]]\r\n                        //     }\r\n                        // }\r\n\r\n                        if(RESelectedSample.length === 0 || RE_SUBSAMPLE.length == 0)\r\n                        {\r\n                            onlySampleService=true;\r\n                            let paramList = inputParam.postParamList[0];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 2,\r\n                                nflag: 2\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSample: [RE_SAMPLE[0]]\r\n                                }\r\n                            }\r\n                           // dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        }\r\n\r\n                        if(boolSelectedSubSample===false?(boolSelectedSubSample===false&&onlySampleService===false&&RESelectedSubSample.length !== 0\r\n                            //&&!searchedSubSample\r\n                            )\r\n                        :(RESelectedSubSample.length === 0 && RE_SUBSAMPLE.length > 0))\r\n                        {\r\n                            let paramList = inputParam.postParamList[1];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 3,\r\n                                nflag: 3\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSubSample: [RE_SUBSAMPLE[0]]\r\n                                }\r\n                            }\r\n                          //  dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        }\r\n                        // if(RESelectedTest.length === 0)\r\n                        // {\r\n                        //     let paramList = inputParam.postParamList[2];\r\n                        //     inputParameter = {\r\n                        //         ...paramList.fecthInputObject,\r\n                        //         fetchUrl: paramList.fetchUrl,\r\n                        //         [paramList.primaryKeyField]: String(RE_TEST[0][paramList.primaryKeyField]),\r\n                        //         ntype: 3,\r\n                        //         nflag: 3\r\n                        //     };\r\n\r\n                        //     respObject = {\r\n                        //         ...respObject,\r\n                        //         masterData: {\r\n                        //             ...masterData,\r\n                        //             RESelectedTest: [RE_TEST[0]]\r\n                        //         }\r\n                        //     }\r\n                        //     dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                        // }\r\n                        else {\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData\r\n                            };\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    ...respObject,\r\n                                    loading: false\r\n                                }\r\n                            });\r\n                        }\r\n\r\n\r\n                    } else {\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData\r\n                        };\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                ...respObject,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n    } else {\r\n        toast.warn(intl.formatMessage({\r\n            id: \"IDS_SELECTTESTTOINITIATE\"\r\n        }));\r\n    }\r\n\r\n}\r\n//Compare two array and return the first array which is available in second array\r\nexport function compareTwoArray(firstArray, secondArray, PrimaryKey) {\r\n    const filterArray = firstArray.filter(function (x) {\r\n        return secondArray.some(function (y) {\r\n            return x[PrimaryKey] === y[PrimaryKey]\r\n        })\r\n    });\r\n    return filterArray;\r\n}\r\n\r\nfunction fetchSelectedData(inputParam, respObject) {\r\n    return (dispatch) => {\r\n        delete(inputParam.searchTestRef);\r\n        rsapi.post(inputParam.fetchUrl, {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n\r\n                if (response.data.RE_SUBSAMPLE && response.data.RE_SUBSAMPLE.length > 0)\r\n                {\r\n                    sortData(response.data.RE_SUBSAMPLE,'descending', 'ntransactionsamplecode');\r\n                }\r\n                sortData(response.data.RE_TEST,'ascending', 'ntransactionresultcode');\r\n                const masterData = {\r\n                    ...respObject.masterData,\r\n                    ...response.data,\r\n                    RESelectedSample: response.data.RESelectedSample || respObject.masterData.RESelectedSample || []\r\n                };\r\n                //sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ...respObject,\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport function testMethodSourceEdit(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactiontestcode: inputData.test.ntransactiontestcode,\r\n            ntestgrouptestcode: inputData.test.ntestgrouptestcode,\r\n            ntestcode: inputData.test.ntestcode,\r\n            ncontrolcode: inputData.editSourceMethodId,\r\n            userinfo: inputData.userInfo\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getTestMethodSource\", inputParamData)\r\n            .then(response => {\r\n\r\n                const TagSource = constructOptionList(response.data.SourceData || [], \"nsourcecode\",\r\n                    \"ssourcename\", undefined, undefined, undefined);\r\n                const TagListSource = TagSource.get(\"OptionList\");\r\n\r\n                const TagMethod = constructOptionList(response.data.MethodData || [], \"nmethodcode\",\r\n                    \"smethodname\", undefined, undefined, undefined);\r\n                const TagListMethod = TagMethod.get(\"OptionList\");\r\n\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            SourceData: TagListSource,\r\n                            MethodData: TagListMethod,\r\n                            RESelectedSubSample: inputData.masterData.RESelectedSubSample\r\n                        },\r\n                        selectedRecord: {\r\n                            ntransactiontestcode: inputData.test.ntransactiontestcode,\r\n                            stestsynonym: inputData.test.jsondata.stestsynonym,\r\n                            nsourcecode: response.data.SourceDataValue,\r\n                            nmethodcode: response.data.MethodDataValue\r\n                        },\r\n                        loading: false,\r\n                        screenName: \"IDS_TESTMETHODSOURCE\",\r\n                        openModal: true,\r\n                        operation: \"update\",\r\n                        ncontrolcode: inputData.editSourceMethodId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function updateParameterComments(inputData, masterData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactiontestcode: inputData.ntransactiontestcode,\r\n            ntransactionresultcode: inputData.ntransactionresultcode,\r\n            sresultcomment: inputData.sresultcomment,\r\n            transactiontestcode: inputData.transactiontestcode,\r\n            userinfo: inputData.userinfo,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            ncontrolcode: inputData.ncontrolcode\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/updateParameterComments\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        screenName: \"IDS_RESULT\",\r\n                        openModal: false,\r\n                        operation: \"update\",\r\n                        ncontrolcode: inputData.ncontrolcode\r\n                        //ncontrolcode:inputData.editSourceMethodId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function addREInstrument(inputData) {\r\n    return function (dispatch) {\r\n\r\n        let urlArray = [];\r\n        const resultusedinstrument = rsapi.post(\"resultentrybysample/getResultUsedInstrumentNameCombo\", {\r\n            userinfo: inputData.userInfo,ntestgrouptestcode:inputData.masterData.RESelectedTest.ntestgrouptestcode\r\n        });\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        const UTCtimeZoneService = rsapi.post(\"timezone/getLocalTimeByZone\", { userinfo: inputData.userInfo });\r\n        urlArray = [resultusedinstrument, timeZoneService, UTCtimeZoneService];\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const TagInstrumentName = constructOptionList(response[0].data.InstrumentName || [], \"ninstrumentnamecode\",\r\n                    \"sinstrumentname\", undefined, undefined, undefined);\r\n                const TagListInstrumentName = TagInstrumentName.get(\"OptionList\");\r\n\r\n\r\n                const TagInsturmentcategory = constructOptionList(response[0].data.InstrumentCategory || [], \"ninstrumentcatcode\",\r\n                    \"sinstrumentcatname\", undefined, undefined, undefined);\r\n                const TagListInstrumentCategory = TagInsturmentcategory.get(\"OptionList\");\r\n\r\n                const TagTimeZone = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, undefined);\r\n                const TagListTimeZone = TagTimeZone.get(\"OptionList\")\r\n\r\n                dispatch({\r\n\r\n\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            InstrumentName: TagListInstrumentName,\r\n                            InstrumentCategory: TagListInstrumentCategory\r\n\r\n                        },\r\n                        selectedId: null,\r\n                       // selectedRecord\r\n                       selectedRecordInstrumentForm : {\r\n                            sarno: inputData.test.sarno,\r\n                            ssamplearno: inputData.test.ssamplearno,\r\n                            stestsynonym: inputData.test.stestsynonym,\r\n                            transactiontestcode: inputData.RESelectedTest ? inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n                            ntransactiontestcode: inputData.test.ntransactiontestcode,\r\n                            ninstrumentcatcode: TagInsturmentcategory.get(\"DefaultValue\") ? TagInsturmentcategory.get(\"DefaultValue\") : [],\r\n                            ninstrumentnamecode: TagInstrumentName.get(\"DefaultValue\") ? TagInstrumentName.get(\"DefaultValue\") : [],\r\n                            npreregno: inputData.test.npreregno,\r\n                            //dtodate: new Date(response[2].data),//new Date(),\r\n                            dtodate: rearrangeDateFormat(inputData.userInfo, response[2].data),//new Date(),\r\n                            //dfromdate: new Date(response[2].data),//new Date(),\r\n                            dfromdate: rearrangeDateFormat(inputData.userInfo, response[2].data),//new Date(),\r\n                            ntzfromdate: {\r\n                                \"value\": inputData.userInfo.ntimezonecode,\r\n                                \"label\": inputData.userInfo.stimezoneid\r\n                            },\r\n                            ntztodate: {\r\n                                \"value\": inputData.userInfo.ntimezonecode,\r\n                                \"label\": inputData.userInfo.stimezoneid\r\n                            }\r\n                        },\r\n                        timeZoneList: TagListTimeZone || [],\r\n                        loading: false,\r\n                        screenName: \"IDS_INSTRUMENT\",\r\n                        openModal: true,\r\n                        operation: \"create\",\r\n                        isInstrumentInitialRender:true,\r\n                        //activeTestKey: \"IDS_INSTRUMENT\",\r\n                        ncontrolcode: inputData.addResultUsedInstrumentId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function addREMaterial(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getResultUsedMaterialCombo\", { userinfo: inputData.userInfo, nsectioncode: inputData.test.nsectioncode, ntestgrouptestcode: inputData.test.ntestgrouptestcode })\r\n            .then(response => {\r\n                const materialTypeMap = constructOptionList(response.data.MaterialType || [], \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, undefined);\r\n                const materialType = materialTypeMap.get(\"OptionList\");\r\n                const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\r\n                const materialCat = materialCatMap.get(\"OptionList\");\r\n                const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\r\n                const material = materialMap.get(\"OptionList\");\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        //selectedRecord\r\n                        selectedRecordMaterialForm : {\r\n                            ntestgroupmaterial : transactionStatus.YES,\r\n                            sarno: inputData.test.sarno,\r\n                            ssamplearno: inputData.test.ssamplearno,\r\n                            stestsynonym: inputData.test.stestsynonym,\r\n                            nsectioncode: inputData.test.nsectioncode,\r\n                            ssectionname: inputData.test.ssectionname,\r\n                            transactiontestcode: inputData.RESelectedTest ? inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n                            ntransactiontestcode: inputData.test.ntransactiontestcode,\r\n                            npreregno: inputData.test.npreregno,\r\n                            nmaterialtypecode: materialTypeMap.get(\"DefaultValue\"),\r\n                            nmaterialcatcode: materialCatMap.get(\"DefaultValue\"),\r\n                            nmaterialcode: materialMap.get(\"OptionList\").length > 0 ? materialMap.get(\"OptionList\")[0] : \"\",\r\n                            nmaterialinventorycode: materialInventoryMap.get(\"OptionList\").length > 0 ? materialInventoryMap.get(\"OptionList\")[0] : \"\",\r\n                            sunitname: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].sunitname : \"\",\r\n                            savailablequantity: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].savailablequatity : \"\"\r\n                        },\r\n                        isMaterialInitialRender:true,\r\n                        materialType,\r\n                        materialCat,\r\n                        material,\r\n                        materialInventory,\r\n                        loading: false,\r\n                        screenName: \"IDS_MATERIAL\",\r\n                        openModal: true,\r\n                        operation: \"create\",\r\n                        //activeTestKey: \"IDS_INSTRUMENT\",\r\n                        ncontrolcode: inputData.addResultUsedMaterailId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREMaterialComboGet(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getResultUsedMaterialCombo\", { userinfo: inputData.userInfo, nsectioncode: inputData.test.nsectioncode, ntestgrouptestcode: inputData.ntestgrouptestcode })\r\n            .then(response => {\r\n                const materialTypeMap = constructOptionList(response.data.MaterialType || [], \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, undefined);\r\n                const materialType = materialTypeMap.get(\"OptionList\");\r\n                const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\r\n                const materialCat = materialCatMap.get(\"OptionList\");\r\n                const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\r\n                const material = materialMap.get(\"OptionList\");\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        selectedRecord: {\r\n                            ntestgroupmaterial : inputData.ntestgroupmaterial,\r\n                            sarno: inputData.test.sarno,\r\n                            ssamplearno: inputData.test.ssamplearno,\r\n                            stestsynonym: inputData.test.stestsynonym,\r\n                            nsectioncode: inputData.test.nsectioncode,\r\n                            ssectionname: inputData.test.ssectionname,\r\n                            transactiontestcode: inputData.RESelectedTest ? inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n                            ntransactiontestcode: inputData.test.ntransactiontestcode,\r\n                            npreregno: inputData.test.npreregno,\r\n                            nmaterialtypecode: materialTypeMap.get(\"DefaultValue\") ? materialTypeMap.get(\"DefaultValue\") : \"\",\r\n                            nmaterialcatcode: materialCatMap.get(\"DefaultValue\") ? materialCatMap.get(\"DefaultValue\") : \"\",\r\n                            nmaterialcode: materialMap.get(\"OptionList\").length > 0 ? materialMap.get(\"OptionList\")[0] : \"\",\r\n                            nmaterialinventorycode: materialInventoryMap.get(\"OptionList\").length > 0 ? materialInventoryMap.get(\"OptionList\")[0] : \"\",\r\n                            sunitname: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].sunitname : \"\",\r\n                            savailablequantity: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].savailablequatity : \"\"\r\n                        },\r\n                        materialType,\r\n                        materialCat,\r\n                        material,\r\n                        materialInventory,\r\n                        loading: false,\r\n                        screenName: \"IDS_MATERIAL\",\r\n                        openModal: true,\r\n                        operation: \"create\",\r\n                        //activeTestKey: \"IDS_INSTRUMENT\",\r\n                        //ncontrolcode: inputData.addResultUsedMaterailId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREMaterialCategoryByType(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getREMaterialCategoryByType\", {\r\n            ntestgrouptestcode : inputData.ntestgrouptestcode,\r\n            nmaterialtypecode: inputData.selectedRecord.nmaterialtypecode.value,\r\n            userinfo: inputData.userInfo\r\n        })\r\n            .then(response => {\r\n                const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\r\n                const materialCat = materialCatMap.get(\"OptionList\");\r\n                const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\r\n                const material = materialMap.get(\"OptionList\");\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        selectedRecord: {\r\n                            ...inputData.selectedRecord,\r\n                            nmaterialcode:materialMap.get(\"DefaultValue\")|| {},\r\n                            nmaterialinventorycode:materialInventoryMap.get(\"DefaultValue\")|| {},\r\n                            nmaterialcatcode: materialCatMap.get(\"DefaultValue\") || {},\r\n                        },\r\n                        materialCat,\r\n                        material,\r\n                        materialInventory,\r\n                        loading: false,\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getREMaterialByCategory(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getREMaterialByCategory\", {\r\n            ntestgrouptestcode : inputData.ntestgrouptestcode,\r\n            nmaterialtypecode: inputData.selectedRecord.nmaterialtypecode.value,\r\n            nmaterialcatcode: inputData.selectedRecord.nmaterialcatcode.value,\r\n            nsectioncode: inputData.selectedRecord.nsectioncode,\r\n            userinfo: inputData.userInfo\r\n        })\r\n            .then(response => {\r\n                const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\r\n                const material = materialMap.get(\"OptionList\");\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        selectedRecord: {\r\n                            ...inputData.selectedRecord,\r\n                            nmaterialcode: materialMap.get(\"OptionList\")[0],\r\n                            nmaterialinventorycode: materialInventoryMap.get(\"OptionList\")[0],\r\n                            savailablequantity: response.data.MaterialInventory ? response.data.MaterialInventory[0].savailablequatity:\"\",\r\n                            sunitname:response.data.MaterialInventory? response.data.MaterialInventory[0].sunitname :\"\"\r\n                        },\r\n                        material,\r\n                        materialInventory,\r\n                        loading: false,\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getREMaterialInvertoryByMaterial(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getREMaterialInvertoryByMaterial\", {\r\n            ntestgrouptestcode : inputData.ntestgrouptestcode,\r\n            nmaterialcode: inputData.selectedRecord.nmaterialcode.value,\r\n            nsectioncode: inputData.selectedRecord.nsectioncode,\r\n            userinfo: inputData.userInfo\r\n        })\r\n            .then(response => {\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        selectedRecord: {\r\n                            ...inputData.selectedRecord,\r\n                            sunitname: response.data.MaterialInventory ? response.data.MaterialInventory[0].sunitname :\"\",\r\n                            savailablequantity: response.data.MaterialInventory? response.data.MaterialInventory[0].savailablequatity : \"\"\r\n                        },\r\n                        materialInventory,\r\n                        loading: false,\r\n                        screenName: \"IDS_MATERIAL\",\r\n                        openModal: true,\r\n                        //operation: \"create\",\r\n                        //activeTestKey: \"IDS_INSTRUMENT\",\r\n                        ncontrolcode: inputData.addResultUsedInstrumentId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getAvailableMaterialQuantity(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getAvailableMaterialQuantity\", {\r\n            ntestgrouptestcode : inputData.ntestgrouptestcode,\r\n            nmaterialinventorycode: inputData.selectedRecord.nmaterialinventorycode.value,\r\n            nsectioncode: inputData.selectedRecord.nsectioncode,\r\n            userinfo: inputData.userInfo\r\n        })\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        selectedRecord: {\r\n                            ...inputData.selectedRecord,\r\n                            savailablequantity: response.data.inventory ? response.data.inventory.savailablequatity :\"\",\r\n                            sunitname: response.data.inventory ? response.data.inventory.sunitname :\"\"\r\n                        },\r\n                        loading: false,\r\n                        screenName: \"IDS_MATERIAL\",\r\n                        openModal: true,\r\n                        //operation: \"create\",\r\n                        //activeTestKey: \"IDS_INSTRUMENT\",\r\n                        ncontrolcode: inputData.addResultUsedInstrumentId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function deleteInstrumentRecord(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nresultusedinstrumentcode: inputData.selectedRecord.nresultusedinstrumentcode,\r\n            userinfo: inputData.userInfo,\r\n            ntransactiontestcode: inputData.masterData.RESelectedTest ?\r\n                inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n            nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\r\n            nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/deleteResultUsedInstrument\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false,\r\n                        operation: \"delete\",\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        selectedId : null\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n// export function deleteInstrumentRecord(inputData) {\r\n//     return function (dispatch) {\r\n//         let inputParamData = {\r\n//             nresultusedinstrumentcode: inputData.selectedRecord.nresultusedinstrumentcode,\r\n//             userinfo: inputData.userInfo,\r\n//             ntransactiontestcode: inputData.masterData.RESelectedTest ?\r\n//                 inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n//             nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\r\n//             nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode\r\n//         }\r\n//         dispatch(initRequest(true));\r\n//         rsapi.post(\"resultentrybysample/deleteResultUsedInstrument\", inputParamData)\r\n//             .then(response => {\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN,\r\n//                     payload: {\r\n//                         masterData: {\r\n//                             ...inputData.masterData,\r\n//                             ...response.data\r\n//                         },\r\n//                         loading: false,\r\n//                         operation: \"delete\",\r\n//                         openModal: false,\r\n//                         loadEsign: false\r\n//                     }\r\n//                 })\r\n//             })\r\n//             .catch(error => {\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN,\r\n//                     payload: {\r\n//                         loading: false\r\n//                     }\r\n//                 })\r\n//                 if (error.response.status === 500) {\r\n//                     toast.error(error.message);\r\n//                 } else {\r\n//                     toast.warn(error.response.data);\r\n//                 }\r\n//             })\r\n//     }\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport function fetchInstrumentRecord(inputData) {\r\n    return function (dispatch) {\r\n\r\n        let urlArray = [];\r\n        //const resultUsedInstrumentCombo = rsapi.post(\"resultentrybysample/getResultUsedInstrumentCombo\", { userinfo: inputData.userInfo });\r\n        const timeZoneService = rsapi.post(\"resultentrybysample/getResultUsedInstrument\", {\r\n            nresultusedinstrumentcode: inputData.editRow.nresultusedinstrumentcode,\r\n            userinfo: inputData.userInfo\r\n        });\r\n        const getResultUsedInstrument = rsapi.post(\"timezone/getTimeZone\");\r\n        urlArray = [timeZoneService, getResultUsedInstrument];\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n\r\n                const TagInstrumentName = constructOptionList(response[0].data.InstrumentName || [], \"ninstrumentnamecode\",\r\n                    \"sinstrumentname\", undefined, undefined, undefined);\r\n                const TagListInstrumentName = TagInstrumentName.get(\"OptionList\");\r\n\r\n                const TagInstrumentId = constructOptionList(response[0].data.InstrumentId || [], \"ninstrumentcode\",\r\n                    \"sinstrumentid\", undefined, undefined, undefined);\r\n                const TagListInstrumentId = TagInstrumentId.get(\"OptionList\");\r\n\r\n                const TagInsturmentcategory = constructOptionList(response[0].data.InstrumentCategory || [], \"ninstrumentcatcode\",\r\n                    \"sinstrumentcatname\", undefined, undefined, undefined);\r\n                const TagListInstrumentCategory = TagInsturmentcategory.get(\"OptionList\");\r\n\r\n                const TagTimeZone = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, undefined);\r\n                const TagListTimeZone = TagTimeZone.get(\"OptionList\")\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            InstrumentName: TagListInstrumentName,\r\n                            InstrumentId:TagListInstrumentId,\r\n                            InstrumentCategory: TagListInstrumentCategory,\r\n                            // ...response[0].data,\r\n                            ...response[1].data,\r\n                            //...response[2].data\r\n                        },\r\n                        selectedId: inputData.editRow.nresultusedinstrumentcode,\r\n                      //  selectedRecord\r\n                        selectedRecordInstrumentForm\r\n                        : {\r\n                            ssamplearno:response[0].data.EditResultUsedInstrument[0].ssamplearno,\r\n                            stestsynonym: inputData.editRow.stestsynonym,\r\n                            npreregno: response[0].data.EditResultUsedInstrument[0].npreregno,\r\n                            ntransactiontestcode: inputData.editRow.ntransactiontestcode,\r\n                            nresultusedinstrumentcode: inputData.editRow.nresultusedinstrumentcode,\r\n                            ninstrumentcatcode: {\r\n                                \"value\": response[0].data.EditResultUsedInstrument[0].ninstrumentcatcode,\r\n                                \"label\": response[0].data.EditResultUsedInstrument[0].sinstrumentcatname\r\n                            },\r\n                            ninstrumentnamecode: {\r\n                                \"value\": response[0].data.EditResultUsedInstrument[0].ninstrumentnamecode,\r\n                                \"label\": response[0].data.EditResultUsedInstrument[0].sinstrumentname\r\n                            },\r\n                            ninstrumentcode: {\r\n                                \"value\": response[0].data.EditResultUsedInstrument[0].ninstrumentcode,\r\n                                \"label\": response[0].data.EditResultUsedInstrument[0].sinstrumentid\r\n                            },\r\n                            ntzfromdate: {\r\n                                \"value\": response[0].data.EditResultUsedInstrument[0].ntzfromdate,\r\n                                \"label\": response[0].data.EditResultUsedInstrument[0].stzfromdate\r\n                            },\r\n                            ntztodate: {\r\n                                \"value\": response[0].data.EditResultUsedInstrument[0].ntztodate,\r\n                                \"label\": response[0].data.EditResultUsedInstrument[0].stztodate\r\n                            },\r\n                            //dfromdate: new Date(response[0].data.EditResultUsedInstrument[0].sfromdate),\r\n                            //dtodate: new Date(response[0].data.EditResultUsedInstrument[0].stodate)\r\n                            dfromdate: rearrangeDateFormat(inputData.userInfo, response[0].data.EditResultUsedInstrument[0].sfromdate),\r\n                            dtodate: rearrangeDateFormat(inputData.userInfo, response[0].data.EditResultUsedInstrument[0].stodate)\r\n                        },\r\n                        isInstrumentInitialRender:true,\r\n                        timeZoneList: TagListTimeZone || [],\r\n                        ncontrolcode: inputData.ncontrolCode,\r\n                        loading: false,\r\n                        screenName: \"IDS_INSTRUMENT\",\r\n                        openModal: true,\r\n                        operation: \"update\"\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function fetchMaterialRecord(inputData) {\r\n    return function (dispatch) {\r\n\r\n\r\n\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getResultUsedMaterial\", {\r\n            nresultusedmaterialcode: inputData.editRow.nresultusedmaterialcode,\r\n            userinfo: inputData.userInfo\r\n        })\r\n            .then(response => {\r\n\r\n                const materialTypeMap = constructOptionList(response.data.MaterialType || [], \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, undefined);\r\n                const materialType = materialTypeMap.get(\"OptionList\");\r\n                const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\r\n                const materialCat = materialCatMap.get(\"OptionList\");\r\n                const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\r\n                const material = materialMap.get(\"OptionList\");\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                const EditResultUsedMaterial = response.data.EditResultUsedMaterial[0]\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: inputData.editRow.nresultusedinstrumentcode,\r\n                        materialType,\r\n                        materialCat,\r\n                        material,\r\n                        materialInventory,\r\n                        selectedRecord: {\r\n                            ...EditResultUsedMaterial,\r\n                            stestsynonym: inputData.editRow.jsondata.stestsynonym,\r\n                            npreregno: EditResultUsedMaterial.npreregno,\r\n                            ntransactiontestcode: inputData.editRow.ntransactiontestcode,\r\n                            nresultusedinstrumentcode: inputData.editRow.nresultusedinstrumentcode,\r\n                            nmaterialtypecode: {\r\n                                label: EditResultUsedMaterial.jsondata.smaterialtypename,\r\n                                value: EditResultUsedMaterial.nmaterialtypecode\r\n                            },\r\n                            nmaterialcatcode: {\r\n                                \"value\": EditResultUsedMaterial.nmaterialcategorycode,\r\n                                \"label\": EditResultUsedMaterial.jsondata.smaterialcatname\r\n                            },\r\n                            nmaterialcode: {\r\n                                \"value\": EditResultUsedMaterial.nmaterialcode,\r\n                                \"label\": EditResultUsedMaterial.jsondata.smaterialname,\r\n                            },\r\n                            nmaterialinventorycode: {\r\n                                \"value\": EditResultUsedMaterial.ninventorycode,\r\n                                \"label\": EditResultUsedMaterial.jsondata.sinventoryid\r\n                            },\r\n                            ntztodate: {\r\n                                \"value\": EditResultUsedMaterial.ntztodate,\r\n                                \"label\": EditResultUsedMaterial.stztodate\r\n                            },\r\n                            susedquantity: EditResultUsedMaterial.jsondata.nqtyused,\r\n                            scarriergas: EditResultUsedMaterial.jsondata.scarriergas,\r\n                            smobilephase: EditResultUsedMaterial.jsondata.smobilephase,\r\n                            sremarks: EditResultUsedMaterial.jsondata.sremarks,\r\n                            savailablequantity: response.data.inventory ?  response.data.inventory.savailablequatity :\"\",\r\n                            sunitname: response.data.inventory ? response.data.inventory.sunitname :\"\"\r\n                        },\r\n                        ncontrolcode: inputData.ncontrolCode,\r\n                        loading: false,\r\n                        screenName: \"IDS_MATERIAL\",\r\n                        openModal: true,\r\n                        operation: \"update\"\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function deleteTaskRecord(inputData, userInfo) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nresultusedtaskcode: inputData.selectedRecord.nresultusedtaskcode,\r\n            userinfo: inputData.userInfo,\r\n            ntransactiontestcode: inputData.masterData.RESelectedTest ?\r\n                inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n            nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\r\n            nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/deleteResultUsedTasks\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false,\r\n                        operation: \"delete\",\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        selectedId: null\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function fetchTaskRecord(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nresultusedtaskcode: inputData.editRow.nresultusedtaskcode,\r\n            userinfo: inputData.userInfo,\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getResultUsedTask\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        selectedId: response.data.EditResultUsedTasks[0].nresultusedtaskcode,\r\n                  //      selectedRecord: {\r\n                    selectedRecordTaskForm:{\r\n                            npreregno: response.data.EditResultUsedTasks[0].npreregno,\r\n                            stestsynonym: inputData.editRow.stestsynonym,\r\n                            sanalysistime: response.data.EditResultUsedTasks[0].jsondata.sanalysistime,\r\n                            smisctime: response.data.EditResultUsedTasks[0].jsondata.smisctime,\r\n                            spreanalysistime: response.data.EditResultUsedTasks[0].jsondata.spreanalysistime,\r\n                            spreparationtime: response.data.EditResultUsedTasks[0].jsondata.spreparationtime,\r\n                            scomments: response.data.EditResultUsedTasks[0].jsondata.scomments,\r\n                            staskprocedure: response.data.EditResultUsedTasks[0].jsondata.staskprocedure,\r\n                            nresultusedtaskcode: response.data.EditResultUsedTasks[0].nresultusedtaskcode\r\n                        },\r\n                        isTaskInitialRender:true,\r\n                        loading: false,\r\n                        screenName: \"IDS_TASK\",\r\n                        openModal: true,\r\n                        operation: \"update\",\r\n                        ncontrolcode: inputData.ncontrolcode,\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function parameterRecord(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactionresultcode: inputData.selectedRecord.ntransactionresultcode,\r\n            ntransactiontestcode: inputData.masterData.RESelectedTest ? inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n            ncontrolcode: inputData.controlcode,\r\n            userinfo: inputData.userInfo\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getParameterComments\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                        },\r\n                        selectedId: response.data.ParameterComments.ntransactionresultcode,\r\n                        selectedRecord: {\r\n                            sresultcomment: response.data.ParameterComments.sresultcomment,\r\n                            stestsynonym: inputData.selectedRecord.stestsynonym,\r\n                            sparametersynonym: inputData.selectedRecord.sparametersynonym,\r\n                            transactiontestcode: response.data.ParameterComments.ntransactiontestcode,\r\n                            ntransactionresultcode: response.data.ParameterComments.ntransactionresultcode,\r\n                            ntransactiontestcode: inputData.masterData.RESelectedTest ? inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                            ncontrolcode: inputData.controlcode\r\n                        },\r\n                        loading: false,\r\n                        screenName: \"IDS_PARAMETERCOMMENTS\",\r\n                        openModal: true,\r\n                        operation: \"updateParameterComments\",\r\n                        ncontrolcode: inputData.controlcode\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function checkListRecord(inputData) {\r\n\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactionresultcode: inputData.selectedRecord.ntransactionresultcode,\r\n            napprovalparametercode: inputData.selectedRecord.napprovalparametercode,\r\n            nchecklistversioncode: inputData.selectedRecord.nchecklistversioncode,\r\n            ntransactiontestcode: inputData.selectedRecord.ntransactiontestcode.toString(),\r\n            ncontrolcode: inputData.ncontrolcode,\r\n            userinfo: inputData.userInfo,\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getChecklistdesign\", inputParamData)\r\n            .then(response => {\r\n                let selectedRecord = {};\r\n                let lsteditedQB = [];\r\n                selectedRecord = {\r\n                    sarno: inputData.selectedRecord.sarno,\r\n                    ssamplearno: inputData.selectedRecord.ssamplearno,\r\n                    npreregno: inputData.selectedRecord.npreregno,\r\n                    stestsynonym: inputData.selectedRecord.stestsynonym,\r\n                    sparametersynonym: inputData.selectedRecord.sparametersynonym,\r\n                    ntransactiontestcode: inputData.selectedRecord.ntransactiontestcode,\r\n                    ntransactionresultcode: inputData.selectedRecord.ntransactionresultcode,\r\n                    transactiontestcode: inputData.masterData.RESelectedTest ? inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\"\r\n                }\r\n\r\n                response.data.ChecklistData.map(checklist => {\r\n                    selectedRecord[checklist.nchecklistversionqbcode] = {\r\n                        nchecklistqbcode: checklist.nchecklistqbcode,\r\n                        nchecklistversioncode: checklist.nchecklistversioncode,\r\n                        nchecklistversionqbcode: checklist.nchecklistversionqbcode,\r\n                        sdefaultvalue: checklist.nchecklistcomponentcode ===7  ? rearrangeDateFormat(inputData.userInfo,checklist.sdefaultvalue) :checklist.sdefaultvalue,\r\n                      //  sdefaultvalue: checklist.sdefaultvalue,\r\n                        sarno: inputData.selectedRecord.sarno,\r\n                        ssamplearno: inputData.selectedRecord.ssamplearno,\r\n                        stestsynonym: inputData.selectedRecord.stestsynonym,\r\n                        sparametersynonym: inputData.selectedRecord.sparametersynonym,\r\n                    }\r\n                    lsteditedQB.push(checklist.nchecklistversionqbcode);\r\n                    return null;\r\n                });\r\n\r\n                response.data.ChecklistData.map(checklist => {\r\n                    selectedRecord['jsondata'] = {\r\n                        ...selectedRecord['jsondata'],\r\n                      //  [checklist.nchecklistversionqbcode]: checklist.sdefaultvalue\r\n                        [checklist.nchecklistversionqbcode]:checklist.nchecklistcomponentcode ===7 ? rearrangeDateFormat(inputData.userInfo,checklist.sdefaultvalue) :checklist.sdefaultvalue\r\n\r\n                    }\r\n                    return null;\r\n                });\r\n                selectedRecord[\"editedQB\"] = lsteditedQB;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        selectedId: response.data.selectedId,\r\n                        selectedRecord: selectedRecord,\r\n                        loading: false,\r\n                        screenName: \"IDS_CHECKLISTRESULT\",\r\n                        openTemplateModal: true,\r\n                        needSaveButton: inputData.needSaveButton,\r\n                        operation: \"create\",\r\n                        ncontrolCode: inputData.ncontrolcode\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function onSaveCheckList(selectedRecord, userInfo, nregtypecode, nregsubtypecode, ndesigntemplatemappingcode) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let listResultCheckList = [];\r\n        if (selectedRecord && selectedRecord.jsondata) {\r\n            selectedRecord.editedQB.map(qbcode =>\r\n                listResultCheckList.push(selectedRecord[qbcode]))\r\n\r\n            let inputParamData = {\r\n                ntransactionresultcode: selectedRecord.ntransactionresultcode,\r\n                ntransactiontestcode: selectedRecord.ntransactiontestcode.toString(),\r\n                transactiontestcode: selectedRecord.transactiontestcode,\r\n                npreregno: selectedRecord.npreregno,\r\n                ResultCheckList: {\r\n                    nchecklistversioncode: listResultCheckList[0].nchecklistversioncode,\r\n                    nchecklistqbcode: listResultCheckList[0].nchecklistqbcode,\r\n                    jsondata: selectedRecord.jsondata,\r\n                    npreregno: selectedRecord.npreregno,\r\n                    ntransactionresultcode: selectedRecord.ntransactionresultcode,\r\n                },\r\n                //jsondata: selectedRecord.jsondata,\r\n                userinfo: userInfo,\r\n                nregtypecode: nregtypecode,\r\n                nregsubtypecode: nregsubtypecode,\r\n                ndesigntemplatemappingcode: ndesigntemplatemappingcode,\r\n\r\n                ncontrolcode: -1\r\n            }\r\n\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/createResultEntryChecklist\", inputParamData)\r\n\r\n                .then(response => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            selectedRecord: {},\r\n                            templateData: undefined,\r\n                            openTemplateModal: false,\r\n                            openModal: false,\r\n                            loading: false,\r\n                            loadEsign: false\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            loadEsign: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    openTemplateModal: false,\r\n                    selectedRecord: {},\r\n                    loading: false,\r\n                    loadEsign: false\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport function defaultTest(inputData, RESelectedTest, RESelectedSample, nregtypecode, nregsubtypecode, ndesigntemplatemappingcode) {\r\n    if (RESelectedTest !== undefined && RESelectedTest.length > 0) {\r\n        return function (dispatch) {\r\n            let inputParamData = {\r\n                userinfo: inputData.userinfo,\r\n                ntransactiontestcode: RESelectedTest ? RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                ntestgrouptestcode: RESelectedTest ? RESelectedTest.map(test => test.ntestgrouptestcode).join(\",\") : \"\",\r\n                npreregno: RESelectedTest ? RESelectedTest.map(preregno => preregno.npreregno).join(\",\") : \"\",\r\n                //RESelectedSample ? RESelectedSample.map(preregno => preregno.npreregno).join(\",\") : \"\",\r\n                nregtypecode: nregtypecode,\r\n                nregsubtypecode: nregsubtypecode,\r\n                //ndesigntemplatemappingcode:ndesigntemplatemappingcode,\r\n                ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                ncontrolcode: inputData.ncontrolcode,\r\n                nneedReceivedInLab:inputData.nneedReceivedInLab\r\n            }\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/updateDefaultValue\", inputParamData)\r\n                .then(response => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData: {\r\n                                ...inputData.masterData,\r\n                                ...response.data,\r\n                                TestParameters: replaceUpdatedObject(response.data.TestParameters, inputData.masterData.TestParameters, 'ntransactionresultcode'),\r\n                                RESelectedSubSample: inputData.masterData.RESelectedSubSample\r\n                            },\r\n                            loading: false,\r\n                            activeTestKey: \"IDS_RESULTS\",\r\n                            openModal: false,\r\n                            loadEsign: false\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            openModal: false,\r\n                            loadEsign: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n    } else {\r\n        toast.warn(intl.formatMessage({\r\n            id: \"IDS_SELECTTESTTOCOMPLETE\"\r\n        }));\r\n    }\r\n\r\n}\r\n\r\nexport function getFormula(parameterData, userInfo, masterData, index, selectedRecord) {\r\n    return function (dispatch) {\r\n\r\n        let inputParamData = {\r\n            ntransactiontestcode: parameterData.ntransactiontestcode,\r\n            nformulacode: parameterData.ntestgrouptestformulacode,\r\n            userinfo: userInfo,\r\n            npreregno: parameterData.npreregno,\r\n            ntransactionsamplecode: parameterData.ntransactionsamplecode\r\n        }\r\n\r\n\r\n\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getFormulaInputs\", inputParamData)\r\n            .then(response => {\r\n\r\n                const validateFormulaMandyFields = response.data.DynamicFormulaFields.map((item, index) => {\r\n                    return {\r\n                        \"idsName\": \"IDS_FILLALLFIELDS\",\r\n                        \"dataField\": index,\r\n                        \"mandatory\": true\r\n                    }\r\n                });\r\n\r\n                let selectedForumulaInput = [];\r\n                let selectedForumulaInput1 = [];\r\n                let selectedMandatory = [];\r\n   //           selectedRecord.ResultParameter = getRecordBasedOnPrimaryKeyName(selectedRecord.ResultParameter, parameterData.ntransactionsamplecode, \"ntransactionsamplecode\");\r\n\r\n                response.data.DynamicFormulaFields.map((fields, index) => {\r\n                    let dynamicformulafields = {};\r\n                    let selectedTestParameters = getRecordBasedOnPrimaryKeyName(selectedRecord.ResultParameter, fields.ndynamicformulafieldcode, \"ntestparametercode\");\r\n\r\n                    if (selectedTestParameters.length > 0) {\r\n\r\n                        selectedTestParameters = selectedTestParameters.filter(element => {\r\n                            return element.sresult !== null && element.sresult != ''\r\n                        });\r\n\r\n                        const nisaverageneed = selectedTestParameters.length;\r\n\r\n                        const maxResultCode = selectedTestParameters.length > 0 ? Math.max(...selectedTestParameters.map(o => o.ntransactionresultcode)) : -1;\r\n\r\n\r\n                        // const maxResultCode= Math.max(...(selectedTestParameters.filter(element => {\r\n                        //                 return element.sresult !== null && element.sresult !='';\r\n                        //               }).map(o => o.ntransactionresultcode)));\r\n\r\n                        const paramValue = getRecordBasedOnPrimaryKeyName(selectedTestParameters, maxResultCode, \"ntransactionresultcode\");\r\n                        if (paramValue.length == 0) {\r\n                            dynamicformulafields.svalues = \"\";\r\n                            dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription;\r\n                            //dynamicformulafields.nisaverageneed = 0;\r\n                            dynamicformulafields.senableAverage = false;\r\n                            response.data.DynamicFormulaFields[index].nisaverageneed = 0; \r\n                            selectedForumulaInput.push(dynamicformulafields);\r\n                            selectedMandatory.push(\"\");\r\n\r\n                        }\r\n                        else {\r\n                            if ((maxResultCode >= response.data.DynamicFormulaFields[index].ntransactionresultcode && paramValue.length > 0 ? paramValue[0].sresult != \"\" : false)\r\n                                || (response.data.DynamicFormulaFields[index].svalue != \"\" && response.data.DynamicFormulaFields[index].svalue != null\r\n                                    ? maxResultCode <= response.data.DynamicFormulaFields[index].ntransactionresultcode && paramValue.length > 0 ? paramValue[0].sresult != \"\" : false : \"\")) {\r\n                                dynamicformulafields.svalues = paramValue[0].sresult;\r\n                                dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription;\r\n                                dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription;\r\n                                //dynamicformulafields.nisaverageneed = nisaverageneed;\r\n                                dynamicformulafields.senableAverage = false;\r\n                                response.data.DynamicFormulaFields[index].nisaverageneed = nisaverageneed; \r\n                                selectedForumulaInput.push(dynamicformulafields);\r\n                                selectedMandatory.push(paramValue[0].sresult);\r\n                            }\r\n                            else {\r\n                                dynamicformulafields.svalues = response.data.DynamicFormulaFields[index].svalue;\r\n                                dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription;\r\n                                // dynamicformulafields.nisaverageneed = response.data.DynamicFormulaFields[index].nisaverageneed;\r\n                                dynamicformulafields.senableAverage = false;\r\n                                selectedForumulaInput.push(dynamicformulafields);\r\n                                selectedMandatory.push(response.data.DynamicFormulaFields[index].svalue);\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    else {\r\n                        dynamicformulafields.svalues = response.data.DynamicFormulaFields[index].svalue;\r\n                        dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription;\r\n                        // dynamicformulafields.nisaverageneed = response.data.DynamicFormulaFields[index].nisaverageneed;\r\n                        selectedForumulaInput.push(dynamicformulafields);\r\n                        selectedMandatory.push(response.data.DynamicFormulaFields[index].svalue);\r\n                    }\r\n                    return selectedForumulaInput1.push(selectedRecord.ResultParameter.filter(x => x.ntestparametercode === fields.ndynamicformulafieldcode)[0])\r\n\r\n\r\n                });\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                        },\r\n                        selectedRecord: {\r\n                            ...selectedRecord,\r\n                            parameterData: parameterData,\r\n                            naverageroundingdigits: parameterData.nroundingdigits,\r\n                            sformulacalculationdetail: response.data.query,\r\n                            formulainput: response.data.Formula,\r\n                            resultindex: index,\r\n                            DynamicFormulaFields: response.data.DynamicFormulaFields,\r\n                            //selectedForumulaInput: []\r\n                            //  DynamicFormulaFields.map((fields, index) => {\r\n                            //     return {\r\n                            //         selectedForumulaInput:  selectedRecord.ResultParameter.filter(x=>x.ntestparametercode===response.data.DynamicFormulaFields)\r\n\r\n                            //     }\r\n\r\n                            //  });\r\n                            // response.data.DynamicFields.map((fields, index) =>\r\n                            selectedForumulaInput,\r\n                            selectedMandatory\r\n                            // selectedForumulaInput:  selectedRecord.ResultParameter.filter(x=>x.ntestparametercode===response.data.DynamicFormulaFields)\r\n                            // )\r\n                        },\r\n                        validateFormulaMandyFields,\r\n                        loading: false,\r\n                        screenName: \"IDS_RESULTFORMULA\",\r\n                        showFormula: true,\r\n                        operation: \"validate\",\r\n                        showValidate: true\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function calculateFormula(inputDataValue) {\r\n    return function (dispatch) {\r\n        const inputData = {\r\n            ntransactiontestcode: inputDataValue.selectedRecord.parameterData.ntransactiontestcode,\r\n            ntransactionresultcode: inputDataValue.selectedRecord.parameterData.ntransactionresultcode,\r\n            npreregno: inputDataValue.selectedRecord.parameterData.npreregno,\r\n            sformulacalculationcode: inputDataValue.selectedRecord.sformulacalculationdetail,\r\n            nformulacode: inputDataValue.selectedRecord.parameterData.ntestgrouptestformulacode,\r\n            userinfo: inputDataValue.userInfo,\r\n            dynamicformulafields: inputDataValue.lstDynamicFields,\r\n        }\r\n\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testmaster/calculateFormula\", inputData)\r\n            .then(response => {\r\n\r\n                // inputDataValue.selectedResultData[inputDataValue.selectedRecord.resultindex] =\r\n                // {\r\n                //     ntransactionresultcode: inputDataValue.selectedRecord.parameterData.ntransactionresultcode,\r\n                //     ntransactiontestcode: inputDataValue.selectedRecord.parameterData.ntransactiontestcode,\r\n                //     nparametertypecode: inputDataValue.selectedRecord.parameterData.nparametertypecode,\r\n                //     sresult: response.data.Result,\r\n                //     nroundingdigit: inputDataValue.selectedRecord.parameterData.nroundingdigits,\r\n                //     value: inputDataValue.selectedRecord.parameterData.ngradecode,\r\n                //     parameter: inputDataValue.selectedRecord.parameterData\r\n                // }\r\n                inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"sfinal\"] = response.data.Result;\r\n                inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"sresult\"] = response.data.Result;\r\n                inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex]['editable'] = true;\r\n                inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"ncalculatedresult\"] = 3;\r\n                inputDataValue.selectedResultGrade[inputDataValue.selectedRecord.resultindex] = {\r\n                    ngradecode: numericGrade(inputDataValue.selectedRecord.parameterData, parseInt(response.data.Result))\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputDataValue.masterData,\r\n                            //selectedResultData: inputDataValue.selectedResultData,\r\n                            //selectedResultGrade: inputDataValue.selectedResultGrade,\r\n                            //ResultParameter: inputDataValue.ResultParameter\r\n                        },\r\n                        selectedRecord: {\r\n                            selectedResultGrade: inputDataValue.selectedResultGrade,\r\n                            ResultParameter: inputDataValue.ResultParameter\r\n                        },\r\n                          parameterResults:inputDataValue.ResultParameter,\r\n                        isParameterInitialRender:true,\r\n                        loading: false,\r\n                        screenName: \"IDS_RESULTENTRY\",\r\n                        showFormula: false,\r\n                        operation: \"update\",\r\n                        showValidate: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    //toast.warn(error.response.data);\r\n                    toast.warn(error.response.data[\"Result\"]);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREFilterTestData(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getTestBasedOnCombo\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            defaultFilterStatus: inputData.defaultFilterStatus,\r\n                            defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\r\n                            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                            DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREFilterTemplate(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getTestBasedOnCombo\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\r\n                            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                            DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function updateTestMethodSource(inputData, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/updateTestMethodSource\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            RE_TEST: replaceUpdatedObject(response.data.RE_TEST, masterData.RE_TEST, 'ntransactiontestcode')\r\n                        },\r\n                        loading: false,\r\n                        openModal: false,\r\n                        loadEsign: false\r\n\r\n                        // activeTestKey: \"IDS_RESULTS\"\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function resultImportFile(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getImportResultEntry\",inputParam.formData)\r\n            .then(response => {\r\n\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData\r\n                        },\r\n                        loading: false,\r\n                        openModal: false,\r\n                        // activeTestKey: \"IDS_RESULTS\"\r\n                    }\r\n                })\r\n\r\n                if (response.data.returnStatus && response.data.returnStatus !== \"\") {\r\n                    toast.info(intl.formatMessage({ id: response.data.returnStatus }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: response.data.returnStatus}));\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function validateEsignCredentialComplete(inputParam) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data === \"Success\") {\r\n\r\n\r\n\r\n                    const methodUrl = \"performaction\"\r\n                    inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\r\n\r\n                    if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()] &&\r\n                        inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]) {\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];\r\n                    }\r\n                    if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"testinitiate\") {\r\n                        dispatch(testStart(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"], inputParam.inputData.userinfo))\r\n                    }\r\n                    else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"complete\") {\r\n                        dispatch(completeTest(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"], inputParam.inputData.userinfo,'','',{basedrulesengine:inputParam[\"screenData\"][\"inputParam\"][\"basedrulesengine\"]}))\r\n                    } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"default\") {\r\n                        dispatch(defaultTest(inputParam[\"screenData\"][\"inputParam\"][\"testChildGetREParam\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedSample\"], inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"nregtypecode\"], inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"nregsubtypecode\"]))\r\n                    } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"deleteInstrument\") {\r\n                        dispatch(deleteInstrumentRecord(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"]))\r\n                    } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"createMethod\") {\r\n                        dispatch(updateTestMethodSource(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"], inputParam[\"screenData\"][\"inputParam\"][\"masterData\"]))\r\n                    } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"deleteTask\") {\r\n                        dispatch(deleteTaskRecord(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"]))\r\n                    } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"updateParameterComments\") {\r\n                        dispatch(updateParameterComments(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"], inputParam[\"screenData\"][\"inputParam\"][\"masterData\"]))\r\n                    } else if (inputParam[\"screenData\"][\"operation\"] === \"updatechecklist\") {\r\n                        let { selectedRecord, userInfo, nregtypecode, nregsubtypecode, ndesigntemplatemappingcode } = inputParam[\"screenData\"];\r\n                        delete selectedRecord.esignpassword;\r\n                        delete selectedRecord.esigncomments;\r\n                        delete selectedRecord.esignreason;\r\n                        delete selectedRecord.agree;\r\n                        delete inputParam.inputData.password;\r\n                        userInfo = inputParam.inputData.userinfo;\r\n                        dispatch(onSaveCheckList(selectedRecord, userInfo, nregtypecode, nregsubtypecode, ndesigntemplatemappingcode))\r\n                    }\r\n\t\t//ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\r\n                    else if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"] ===\"updateSection\"){\r\n                        dispatch(updateSectionTest(inputParam[\"screenData\"][\"inputParam\"]))\r\n \r\n                    }\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    };\r\n}\r\n\r\nexport function getMeanCalculationTestParameter(meanParam) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        const inputData = {\r\n            npreregno: meanParam.selectedRecord.npreregno,\r\n            ntransactionresultcode: meanParam.selectedRecord.ntransactionresultcode,\r\n            userinfo: meanParam.userInfo\r\n        }\r\n        return rsapi.post(\"resultentrybysample/getMeanCalculationTestParameter\", inputData)\r\n            .then(response => {\r\n\r\n                const list = response.data || [];\r\n                // const optionList = [];\r\n                // list.map(item=>{\r\n                //     console.log(\"item:\", item);\r\n                //         optionList.push({item:item, \r\n                //                         label:\"[\"+item.stestsynonym+\"]-[\"+item.sparametersynonym+\"]-[\"+item.sresult+\"]\", \r\n                //                         value:item.ntransactionresultcode})\r\n                //     })\r\n                // const masterData = {...masterData, ResultParameter:meanParam.selectedRecord}\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        loading: false, openModal: true,\r\n                        meanTestParameterList: list,\r\n                        screenName: \"IDS_MEANPARAMETER\",\r\n                        ncontrolcode: meanParam.ncontrolCode,\r\n                        selectedTestParameterMean: meanParam.selectedRecord\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    };\r\n}\r\n\r\n/*export function deleteResultUsedMaterial(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nresultusedinstrumentcode: inputData.selectedRecord.nresultusedinstrumentcode,\r\n            userinfo: inputData.userInfo,\r\n            ntransactiontestcode: inputData.masterData.RESelectedTest ?\r\n                inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n            nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\r\n            nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/deleteResultUsedMaterial\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false,\r\n                        operation: \"delete\",\r\n                        openModal: false,\r\n                        loadEsign: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}*/\r\nexport function getAverageResult(parameterData, index, selectedForumulaInput, userInfo, masterData, selectedRecord) {\r\n    return function (dispatch) {\r\n    \r\n        let selectedTestParameters = selectedRecord.ResultParameter.filter(element => {\r\n            return element.editable == true;\r\n        });\r\n\r\n        selectedTestParameters = getRecordBasedOnPrimaryKeyName(selectedTestParameters, selectedRecord.parameterData.ntransactionsamplecode, \"ntransactionsamplecode\");\r\n        selectedTestParameters = getRecordBasedOnPrimaryKeyName(selectedTestParameters, parameterData.ndynamicformulafieldcode, \"ntestparametercode\");\r\n\r\n        let ResultParameterNew = [];\r\n        if (selectedTestParameters.length > 0) {\r\n            selectedTestParameters.map(Parameter => {\r\n                let resultParameterValues = {};\r\n                resultParameterValues.ntransactionresultcode = Parameter.ntransactionresultcode;\r\n                resultParameterValues.sresult = Parameter.sresult;\r\n                resultParameterValues.ntestparametercode = Parameter.ntestparametercode;\r\n                ResultParameterNew.push(resultParameterValues);\r\n            })\r\n\r\n        }\r\n\r\n        let inputParamData = {\r\n            naverageroundingdigits: selectedRecord.naverageroundingdigits,\r\n            ntransactiontestcode: parameterData.ntransactiontestcode,\r\n            ntestparametercode: parameterData.ndynamicformulafieldcode,\r\n            userinfo: userInfo,\r\n            ntransactionsamplecode: parameterData.ntransactionsamplecode,\r\n            ResultParameter: ResultParameterNew\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getAverageResult\", inputParamData)\r\n            .then(response => {\r\n                selectedForumulaInput[index].soldvalue =  selectedForumulaInput[index].svalues;\r\n                selectedForumulaInput[index].svalues = response.data.AverageResult.sresult;\r\n                selectedForumulaInput[index].senableAverage = true;\r\n                //selectedForumulaInput[index].svaluesold = \r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                        },\r\n                        selectedRecord: {\r\n                            ...selectedRecord,\r\n                            selectedForumulaInput\r\n                        },\r\n                        // selectedRecord: {\r\n                        //     ...selectedRecord,\r\n                        //     parameterData: parameterData,\r\n                        //     sformulacalculationdetail: response.data.query,\r\n                        //     formulainput: response.data.Formula,\r\n                        //     resultindex: index,\r\n                        //     selectedForumulaInput,\r\n                        //     selectedMandatory\r\n                        // },\r\n                        // validateFormulaMandyFields,\r\n                        loading: false,\r\n                        screenName: \"IDS_RESULTFORMULA\",\r\n                        showFormula: true,\r\n                        operation: \"validate\",\r\n                        showValidate: true\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n// export function getPredefinedData(inputData,selectedRecord,currentAlertResultCode,masterData,currentntestgrouptestpredefcode) {\r\n//     return function (dispatch) {\r\n//         let inputParamData = {\r\n//             ntestgrouptestpredefcode: inputData.ntestgrouptestpredefcode,\r\n//         }\r\n//         dispatch(initRequest(true));\r\n//         rsapi.post(\"resultentrybysample/getPredefinedData\", inputParamData)\r\n//             .then(response => {\r\n//                 let showMultiSelectCombo=false;  \r\n//                 let ResultParameter=selectedRecord['ResultParameter']\r\n//                 let onlyAlertMsgAvailable=false; \r\n//                 let testgrouptestpredefsubresult=response.data['testgrouptestpredefsubresult']\r\n//                 if(inputData['nneedsubcodedresult']===transactionStatus.YES){\r\n//                     showMultiSelectCombo=true\r\n//                     masterData['testgrouptestpredefsubresultOptions']=testgrouptestpredefsubresult  \r\n//                 }\r\n//                 else\r\n//                 {\r\n//                     onlyAlertMsgAvailable=true; \r\n//                 }\r\n//                // ResultParameter.map(Parameter=>\r\n//                     for(const Parameter of ResultParameter) \r\n//                     {\r\n//                         if(Parameter.additionalInfoUidata||Parameter.additionalInfoUidata===\"\"){\r\n//                             let additionalInfoUidata=typeof Parameter.additionalInfoUidata==='string'?Parameter.additionalInfoUidata===\"\"?\"\":JSON.parse(Parameter.additionalInfoUidata) :\r\n//                             Parameter.additionalInfoUidata\r\n//                             if(Parameter['ntransactionresultcode']===currentAlertResultCode&&\r\n//                             Parameter['ntestgrouptestpredefcode']===inputData['ntestgrouptestpredefcode']){\r\n//                             if(Parameter.additionalInfoUidata){\r\n//                                 selectedRecord[\"ntestgrouptestpredefsubcode\"]=additionalInfoUidata['ntestgrouptestpredefsubcode'] \r\n//                                 break;\r\n//                             }\r\n//                             }else{\r\n//                             if(selectedRecord[\"ntestgrouptestpredefsubcode\"]){\r\n//                                 delete selectedRecord[\"ntestgrouptestpredefsubcode\"] \r\n//                             }\r\n//                             }\r\n//                         }\r\n                       \r\n//                     };  \r\n//                 masterData['salertmessage']=inputData.salertmessage \r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN,\r\n//                     payload: { \r\n//                         loading: false,\r\n//                         masterData, \r\n//                         showAlertGrid: inputData.nneedresultentryalert===transactionStatus.NO?false:true,\r\n//                          showAlertForPredefined: true,\r\n//                          showMultiSelectCombo,\r\n//                          onlyAlertMsgAvailable,\r\n//                          additionalInfoView:false,\r\n//                          selectedRecord,\r\n//                          currentAlertResultCode,\r\n//                          currentntestgrouptestpredefcode\r\n//                     }\r\n//                 })\r\n//             })\r\n//             .catch(error => {\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN,\r\n//                     payload: {\r\n//                         loading: false\r\n//                     }\r\n//                 })\r\n//                 if (error.response.status === 500) {\r\n//                     toast.error(error.message);\r\n//                 } else {\r\n//                     toast.warn(error.response.data);\r\n//                 }\r\n//             })\r\n//     }\r\n\r\n// }\r\n\r\nexport function getPredefinedData(inputData,selectedRecord,currentAlertResultCode,masterData,currentntestgrouptestpredefcode) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntestgrouptestpredefcode: inputData.ntestgrouptestpredefcode,\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getPredefinedData\", inputParamData)\r\n            .then(response => {\r\n                let showMultiSelectCombo=false;  \r\n                let ResultParameter=selectedRecord['ResultParameter']\r\n                let onlyAlertMsgAvailable=false; \r\n                let testgrouptestpredefsubresult=response.data['testgrouptestpredefsubresult']\r\n                if(inputData['nneedsubcodedresult']===transactionStatus.YES){\r\n                    showMultiSelectCombo=true\r\n                    masterData['testgrouptestpredefsubresultOptions']=testgrouptestpredefsubresult  \r\n                }\r\n                else\r\n                {\r\n                    onlyAlertMsgAvailable=true; \r\n                }\r\n               // ResultParameter.map(Parameter=>\r\n                    for(const Parameter of ResultParameter) \r\n                    {\r\n                        if(Parameter.additionalInfoUidata||Parameter.additionalInfoUidata===\"\"){\r\n                            let additionalInfoUidata=typeof Parameter.additionalInfoUidata==='string'?Parameter.additionalInfoUidata===\"\"?\"\":JSON.parse(Parameter.additionalInfoUidata) :\r\n                            Parameter.additionalInfoUidata\r\n                            if(Parameter['ntransactionresultcode']===currentAlertResultCode&&\r\n                            Parameter['ntestgrouptestpredefcode']===inputData['ntestgrouptestpredefcode']){\r\n                            if(Parameter.additionalInfoUidata){\r\n                                selectedRecord[\"ntestgrouptestpredefsubcode\"]=additionalInfoUidata['ntestgrouptestpredefsubcode'] \r\n                                break;\r\n                            }\r\n                            }else{\r\n                            if(selectedRecord[\"ntestgrouptestpredefsubcode\"]){\r\n                                delete selectedRecord[\"ntestgrouptestpredefsubcode\"] \r\n                            }\r\n                            }\r\n                        }\r\n                       \r\n                    };  \r\n                masterData['salertmessage']=inputData.salertmessage \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: { \r\n                        loading: false,\r\n                       masterData, \r\n                        showAlert: inputData.nneedresultentryalert===transactionStatus.NO?false:true,\r\n                         showAlertForPredefined: true,\r\n                         showMultiSelectCombo,\r\n                         onlyAlertMsgAvailable,\r\n                         additionalInfoView:false,\r\n                         selectedRecord,\r\n                         currentAlertResultCode,\r\n                         currentntestgrouptestpredefcode\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function getELNTestValidation(inputData,integrationSettings) {\r\n    return function (dispatch) {\r\n        //console.log(localStorage);\r\n        //localStorage.removeItem(\"linkedorder\");\r\n        const inputs = {npreregno:inputData.test.npreregno, \r\n            ntransactiontestcode:inputData.test. ntransactiontestcode,\r\n            userInfo:inputData.userInfo\r\n\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getELNTestValidation\", inputs)\r\n            .then(response => {\r\n                let enlLink = \"\";\r\n                if(response.data)\r\n                {\r\n                    \r\n                        let link = \"\";\r\n                    \r\n                        let detail = CF_encryptionData(\"-1//Sheet\").EncryptData;\r\n                        // let encryptedbatchid = CF_encryptionData(inputData.test.npreregno +'-' +inputData.test.ntransactionsamplecode +'-' + inputData.test.ntestcode +'-' + inputData.userInfo.nsitecode).EncryptData;\r\n                        //let encryptedbatchid = CF_encryptionData(\"TR-23-0014-TR-23-0014-01-TestNew\").EncryptData;\r\n                       // let encryptedbatchid = CF_encryptionData(inputData.test.sarno +'-' +inputData.test.ssamplearno +'-'+ inputData.test.stestsynonym+'-'+inputData.userInfo.ssitename).EncryptData;\r\n                       \r\n                       const settedId = inputData.test.npreregno +'-' +inputData.test.ntransactionsamplecode +'-'+ inputData.test.ntestcode+'-'+ inputData.test.ntestrepeatno+'-'+ inputData.test.ntestretestno+'-'+inputData.userInfo.nsitecode;\r\n                       //console.log(settedId);\r\n                       let encryptedbatchid = CF_encryptionData(settedId).EncryptData;\r\n                        const userObject = {\r\n                            usercode: inputData.elnUserInfo.nelncode,\r\n                            username: inputData.elnUserInfo.selnuserid,\r\n                            userfullname: inputData.elnUserInfo.selnusername,\r\n                            lsusergroup: {\r\n                            usergroupcode: inputData.elnUserInfo.nelnusergroupcode,\r\n                            usergroupname: inputData.elnUserInfo.nelnusergroupcode,\r\n                            },\r\n                            lssitemaster:{\r\n                            sitecode: inputData.elnSite.nelnsitecode\r\n                            }\r\n                        }\r\n                        let encrypteduser = CF_encryptionData(userObject).EncryptData;\r\n                        \r\n                        //const baseURL = \"http://localhost:9090/ELN\";\r\n                        const baseURL = integrationSettings[1].slinkname\r\n                        \r\n                        link = baseURL + \"/vieworder\" + '#{\"d\":\"' + settedId + '\",\"user\":\"' + encrypteduser + '\",\"batchid\":\"' + encryptedbatchid + '\"}';\r\n                        // let a=\"/vieworder\" + '#{\"d\":\"' + inputData.test.npreregno +'-' +inputData.test.ntransactionsamplecode +'-'+ inputData.test.ntestcode+'-'+ inputData.test.ntestrepeatno+'-'+ inputData.test.ntestretestno+'-'+inputData.userInfo.nsitecode + '\",\"user\":\"' + encrypteduser + '\",\"batchid\":\"' + encryptedbatchid + '\"}';\r\n                        // // return link;\r\n                        // //   }\r\n                        // let hashobject = JSON.parse(a);\r\n   //                     let batchid = \"\";\r\n\r\n//  if (link.batchid !== undefined) {\r\n\r\n// // eslint-disable-next-line no-useless-escape\r\n\r\n// batchid = CF_decrypt(link.batchid ).replaceAll('\\\"', '');\r\n\r\n//  }\r\n                        \r\n                       // const encrypteduser1 = CF_decrypt(link);\r\n                        //enlLink = link;\r\n                       // console.log(\"--->\"+link);\r\n                        //console.log(\"--->\"+batchid);\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...inputData.masterData,\r\n                                    //defaultSampleType: inputData.defaultSampleType,\r\n                                    ...response.data,\r\n                                    enlLink:link\r\n                                },\r\n                                openELNSheet: true,\r\n                                loading: false,\r\n                                enlLink:link\r\n                               // enlLink:enlLink\r\n                            }\r\n                        })\r\n                         //enlLink = \"https://logilabelntest.azurewebsites.net/vieworder\".concat(link);    \r\n\r\n\r\n\r\n\r\n                }else{\r\n                    toast.warn(intl.formatMessage({\r\n                        id: \"IDS_NOSHEETFORTHISTEST\"\r\n                    }));\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData: {\r\n                                ...inputData.masterData,\r\n                                //defaultSampleType: inputData.defaultSampleType,\r\n                                ...response.data,\r\n                                enlLink:\"\"\r\n                            },\r\n                            enlLink:\"\",\r\n                            loading: false\r\n                            \r\n                        }\r\n                    })\r\n                }\r\n               \r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function getConfigurationFilter(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getConfigurationFilter\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            // defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\r\n                            // ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                            // DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function getTestBasedBatchWorklist(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getTestBasedBatchWorklist\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                           // defaultTestvalues: inputData.defaultTestvalues //,\r\n                            // defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\r\n                            // ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                            // DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport function addREAdhocParamter(inputDataObj) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/getAdhocParamter\", inputDataObj)\r\n            .then(response => {\r\n\r\n                let AdhocParamter = constructOptionList(response.data['AdhocParamter'] || [], 'ntestparametercode', 'sparametersynonym',\r\n                undefined, undefined, undefined);\r\n                AdhocParamter = AdhocParamter.get(\"OptionList\");\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...inputDataObj.masterData,\r\n                            AdhocParamter : AdhocParamter\r\n                        },\r\n                        screenName:'IDS_ADHOCPARAMETER',\r\n                        adhoctransactiontestcode: inputDataObj.ntransactiontestcode,\r\n                        adhocpreregno:inputDataObj.npreregno,\r\n                        openModal:true,\r\n                        operation:\"IDS_ADD\",\r\n                        selectedRecord:{},\r\n                        adhocId:inputDataObj.adhocId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function createAdhocParamter(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/createAdhocParamter\", inputParam.inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...inputParam.inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        screenName:'IDS_ADHOCPARAMETER',\r\n                        openModal:false,\r\n                        activeTestTab: \"IDS_RESULTS\",\r\n                        activeTabIndex:1\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function enforceResult(inputParam,userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let url = [];\r\n        url.push(rsapi.post(\"/grade/getGrade\", {\r\n            userinfo: userInfo\r\n        }));\r\n        url.push(rsapi.post(\"resultentrybysample/getenforceResult\", {\r\n            ncontrolcode:inputParam['ncontrolcode'],\r\n            ntransactiontestcode:inputParam['dataItem']['ntransactiontestcode'],\r\n            ntransactionresultcode:inputParam['dataItem']['ntransactionresultcode'],\r\n            userinfo: userInfo\r\n        })); \r\n       Axios.all(url)\r\n       .then(response => {\r\n        const Grade = constructOptionList(response[0].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, false); \r\n        let selectedRecord={}\r\n                let savedResultparameter=response[1].data['savedResultparameter']\r\n                   selectedRecord=//savedResultparameter['sgradename']&&savedResultparameter['sgradename']!=='NA'?\r\n                 {\r\n                        'senforceresult':savedResultparameter['sfinal']&&savedResultparameter['sfinal'],\r\n                        // 'ngradecode':{\r\n                        //     'label':savedResultparameter['sgradename']&&savedResultparameter['sgradename'],\r\n                        //     'value': savedResultparameter['ngradecode']&&savedResultparameter['ngradecode']\r\n                        // } ,\r\n                        'senforceresultcomment':savedResultparameter['senforceresultcomment']&&savedResultparameter['senforceresultcomment'],\r\n                        ntransactionresultcode:savedResultparameter['ntransactionresultcode'],\r\n                        ntransactiontestcode:savedResultparameter['ntransactiontestcode']\r\n                   }\r\n            //        : {\r\n            //         'senforceresult':savedResultparameter['sfinal']&&savedResultparameter['sfinal'],\r\n            //         'senforceresultcomment':savedResultparameter['senforceresultcomment']&&savedResultparameter['senforceresultcomment'],\r\n            //         // 'ngradecode':{\r\n            //         //     'label':savedResultparameter['sgradename']&&savedResultparameter['sgradename'],\r\n            //         //     'value': savedResultparameter['ngradecode']&&savedResultparameter['ngradecode']\r\n            //         // } ,\r\n            //         ntransactionresultcode:savedResultparameter['ntransactionresultcode'],\r\n            //         ntransactiontestcode:savedResultparameter['ntransactiontestcode']\r\n            //    };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            'GradeList':Grade.get(\"OptionList\") , \r\n                            ...inputParam.masterData,\r\n                            ...response.data\r\n                        },\r\n                        ncontrolcode:inputParam['ncontrolcode'],\r\n                        selectedRecord,\r\n                        screenName: \"IDS_ENFORCERESULT\",\r\n                        openModal: true, \r\n                        operation: \"update\",  \r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function ResultEntryViewPatientDetails(masterData, screenName, userInfo, viewdetails) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const selectedRecord={\r\n            ntestcode:viewdetails.test.ntestcode\r\n        }\r\n        rsapi.post(\"worklist/getSampleViewDetails\", { selectedRecord, PatientId:viewdetails.test.PatientId, npreregno: viewdetails.test.npreregno, userinfo: userInfo })\r\n            .then(response => {\r\n                masterData['AuditModifiedComments'] = [];\r\n                masterData['AuditModifiedComments'] = response.data['AuditModifiedComments']\r\n                masterData['viewdetails'] = [];\r\n                masterData['viewdetails'] = response.data['viewdetails'][0]\r\n                //sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        screenName: \"IDS_PREVIOUSRESULTVIEW\",\r\n                        operation: \"\",\r\n                        loading: false,\r\n                        openModal: true,\r\n\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function resultEntryGetParameter(selectedRecord,inputData, userInfo, ncontrolcode, testskip, testtake) {\r\n\r\n    if(inputData.realTestcodeValue.ntestcode!==0)\r\n    {\r\n    return function (dispatch) {\r\n        let additionalInfo=[]\r\n        let selectedSpecification=selectedRecord.selectedSpecification\r\n        let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\r\n        TestList = TestList.splice(testskip, testskip + testtake);\r\n        let acceptTestList = getSameRecordFromTwoArrays(TestList, inputData.RESelectedTest, \"ntransactiontestcode\");\r\n        if (acceptTestList && acceptTestList.length > 0) {\r\n            if (Object.values(inputData).length > 0 && inputData.RESelectedTest.length > 0) {\r\n                let inputParamData = {\r\n                    ntransactiontestcode:(acceptTestList[0].ntransactiontestcode).toString(),\r\n                    ntestcode:inputData.realTestcodeValue.ntestcode,\r\n                    nallottedspeccode:selectedRecord.nallottedspeccode.value,\r\n                    nspecsampletypecode:selectedRecord.ncomponentcode.value,\r\n                    userinfo: userInfo\r\n                }\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"resultentrybysample/getResultEntryParameter\", inputParamData)\r\n                    .then(response => {\r\n                    //     const ComponentMap = constructOptionList(response.data[\"Component\"] || [], \"ncomponentcode\",\r\n                    //     \"scomponentname\", undefined, undefined, false);\r\n                    // const Component = ComponentMap.get(\"OptionList\");\r\n                        let selectedResultGrade = [];\r\n                        let paremterResultcode = [];\r\n                        const parameterResults = response.data.ResultParameter\r\n                        let predefDefaultFlag = false;\r\n                        parameterResults.map((param, index) => {\r\n                            selectedResultGrade[index] = { ngradecode: param.ngradecode };\r\n                            paremterResultcode[index] = param.ntransactionresultcode;\r\n                            let jsondata=JSON.parse(param.jsondata['value'])\r\n                            if(jsondata.hasOwnProperty('additionalInfo')){\r\n                                additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'] \r\n                            }  \r\n                            predefDefaultFlag = false;\r\n                            (response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]) &&\r\n                                response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\r\n                                    \r\n                                        if (!predefDefaultFlag) {\r\n                                            predefDefaultFlag = true;\r\n                                            response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\r\n                                                undefined, undefined).get(\"OptionList\");\r\n                                        }\r\n\r\n                                });\r\n                                param['editable'] = false;\r\n\r\n                        });\r\n\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...inputData,\r\n                                    \r\n                                    ...response.data,\r\n                                    paremterResultcode\r\n                                    \r\n\r\n                                },\r\n                                selectedRecord: {\r\n                                    additionalInfo:additionalInfo.length>0?additionalInfo:[],\r\n                                    selectedResultGrade: selectedResultGrade,\r\n                                    ResultParameter: response.data.ResultParameter ,selectedSpecification:selectedSpecification,\r\n                                    nallottedspeccode:selectedRecord.nallottedspeccode,ncomponentcode:selectedRecord.ncomponentcode\r\n                                    ,selectedComponent:selectedRecord.selectedComponent\r\n                                },\r\n                                selectedsubcode:undefined ,\r\n                                  parameterResults:response.data.ResultParameter,\r\n                                  isParameterInitialRender:true,\r\n                                loading: false,\r\n                                screenName: \"IDS_RESULTENTRYPARAMETER\",\r\n                                openModal: true,\r\n                                operation: \"update\",\r\n                                activeTestKey: \"IDS_RESULTS\",\r\n                                ncontrolcode: ncontrolcode\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    })\r\n                //}\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n                }));\r\n            }\r\n        } else {\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    loading: false\r\n                }\r\n            })\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n            }));\r\n        }\r\n    }\r\n\r\n}else{\r\n    toast.warn(intl.formatMessage({\r\n        id: \"IDS_SELECTVALIDTEST\"\r\n    }));\r\n}\r\n\r\n}\r\n\r\n\r\nexport function resultEntryGetSpec(inputData, userInfo, ncontrolcode, testskip, testtake) {\r\n\r\n    \r\n    return function (dispatch) {\r\n        if(inputData.realTestcodeValue.length!==0 && inputData.realTestcodeValue.ntestcode!==0)\r\n    {\r\n        let additionalInfo=[]\r\n        let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\r\n        TestList = TestList.splice(testskip, testskip + testtake);\r\n        \r\n       \r\n           \r\n                let inputParamData = {\r\n                    nregsubtypecode:inputData.realRegSubTypeValue.nregsubtypecode,\r\n                    nregtypecode:inputData.realRegSubTypeValue.nregtypecode,\r\n                    ntestcode:inputData.realTestcodeValue.ntestcode,\r\n                    userinfo: userInfo\r\n                }\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"resultentrybysample/getResultEntrySpec\", inputParamData)\r\n                    .then(response => {\r\n\r\n                        const allottedspeccode={\r\n                            value:response.data.nallottedspeccode[\"nallottedspeccode\"],\r\n                        label: response.data.nallottedspeccode[\"sspecname\"]\r\n                        };\r\n                       \r\n                        \r\n                        const componentcode={\r\n                            value:response.data.ncomponentcode[\"ncomponentcode\"],\r\n                            label: response.data.ncomponentcode[\"scomponentname\"]\r\n                        };\r\n                        // componentcode.push({\r\n                        //     \"value\":response.data.ncomponentcode[\"ncomponentcode\"],\r\n                        //     \"label\": response.data.ncomponentcode[\"scomponentname\"]\r\n                        // });\r\n                        \r\n                        let selectedResultGrade = [];\r\n                        let paremterResultcode = [];\r\n                        const parameterResults = response.data.ResultParameter\r\n                        let predefDefaultFlag = false;\r\n                        parameterResults.map((param, index) => {\r\n                            selectedResultGrade[index] = { ngradecode: param.ngradecode };\r\n                            paremterResultcode[index] = param.ntransactionresultcode;\r\n                            let jsondata=JSON.parse(param.jsondata['value'])\r\n                            if(jsondata.hasOwnProperty('additionalInfo')){\r\n                                additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'] \r\n                            }  \r\n                            predefDefaultFlag = false;\r\n                            (response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]) &&\r\n                                response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\r\n                                    \r\n                                        if (!predefDefaultFlag) {\r\n                                            predefDefaultFlag = true;\r\n                                            response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\r\n                                                undefined, undefined).get(\"OptionList\");\r\n                                        }\r\n\r\n                                });\r\n                                param['editable'] = false;\r\n\r\n                        });\r\n                        const SpecificationMap = constructOptionList(response.data[\"Specification\"] || [], \"nallottedspeccode\",\r\n                        \"sspecname\", undefined, undefined, false);\r\n                    const Specification = SpecificationMap.get(\"OptionList\");\r\n\r\n                    const ComponentMap = constructOptionList(response.data[\"Component\"] || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, false);\r\n                const Component = ComponentMap.get(\"OptionList\");\r\n                        \r\n                       \r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...inputData,\r\n                                    //...sortData(response.data,\"desc\",\"ntransactiontestcode\"),\r\n                                    ...response.data,\r\n                                    paremterResultcode,\r\n                                    selectedSpecification:Specification,\r\n                                    selectedComponent:Component,\r\n                                    \r\n                                    \r\n                                    //selectedResultGrade ,\r\n\r\n                                },\r\n                                selectedRecord: {\r\n                                    additionalInfo:additionalInfo.length>0?additionalInfo:[],\r\n                                    selectedResultGrade: selectedResultGrade,selectedSpecification:Specification\r\n                                    ,selectedComponent:Component,                                   \r\n                                     ResultParameter: response.data.ResultParameter ,nallottedspeccode:allottedspeccode\r\n                                    ,ncomponentcode:componentcode\r\n                                     //nallottedspeccode:selectedRecord.nallottedspeccode\r\n\r\n                                   \r\n                                },\r\n                                 \r\n                                  parameterResults:response.data.ResultParameter,\r\n                                  isParameterInitialRender:true,\r\n                                loading: false,\r\n                                screenName: \"IDS_RESULTENTRYPARAMETER\",\r\n                                openModal: true,\r\n                                operation: \"update\",\r\n                                activeTestKey: \"IDS_RESULTS\",\r\n                                ncontrolcode: ncontrolcode\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    })\r\n                //}\r\n          \r\n      \r\n    }\r\n    else{\r\n\r\n\r\n        dispatch({\r\n            type: DEFAULT_RETURN,\r\n            payload: {\r\n                loading: false\r\n            }\r\n        })\r\n        toast.warn(intl.formatMessage({\r\n            id: \"IDS_SELECTVALIDTEST\"\r\n        }));\r\n    \r\n    }\r\n\r\n}\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport function resultEntryGetComponent(selectedRecord,inputData, userInfo, ncontrolcode, testskip, testtake) {\r\n\r\n    if(inputData.realTestcodeValue.ntestcode!==0)\r\n    {\r\n    return function (dispatch) {\r\n        let additionalInfo=[]\r\n        let selectedSpecification=selectedRecord.selectedSpecification\r\n        let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\r\n        TestList = TestList.splice(testskip, testskip + testtake);\r\n        let acceptTestList = getSameRecordFromTwoArrays(TestList, inputData.RESelectedTest, \"ntransactiontestcode\");\r\n        if (acceptTestList && acceptTestList.length > 0) {\r\n            if (Object.values(inputData).length > 0 && inputData.RESelectedTest.length > 0) {\r\n                let inputParamData = {\r\n                    ntransactiontestcode:(acceptTestList[0].ntransactiontestcode).toString(),\r\n                    ntestcode:inputData.realTestcodeValue.ntestcode,\r\n                    nallottedspeccode:selectedRecord.nallottedspeccode.value,\r\n                    userinfo: userInfo\r\n                }\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"resultentrybysample/getResultEntryComponent\", inputParamData)\r\n                    .then(response => {\r\n                        const ComponentMap = constructOptionList(response.data[\"Component\"] || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, false);\r\n                    const Component = ComponentMap.get(\"OptionList\");\r\n                    const componentcode={\r\n                        value:response.data.ncomponentcode[\"ncomponentcode\"],\r\n                        label: response.data.ncomponentcode[\"scomponentname\"]\r\n                    };\r\n                        let selectedResultGrade = [];\r\n                        let paremterResultcode = [];\r\n                        const parameterResults = response.data.ResultParameter\r\n                        let predefDefaultFlag = false;\r\n                        parameterResults.map((param, index) => {\r\n                            selectedResultGrade[index] = { ngradecode: param.ngradecode };\r\n                            paremterResultcode[index] = param.ntransactionresultcode;\r\n                            let jsondata=JSON.parse(param.jsondata['value'])\r\n                            if(jsondata.hasOwnProperty('additionalInfo')){\r\n                                additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'] \r\n                            }  \r\n                            predefDefaultFlag = false;\r\n                            (response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]) &&\r\n                                response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\r\n                                    \r\n                                        if (!predefDefaultFlag) {\r\n                                            predefDefaultFlag = true;\r\n                                            response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\r\n                                                undefined, undefined).get(\"OptionList\");\r\n                                        }\r\n\r\n                                });\r\n                                param['editable'] = false;\r\n\r\n                        });\r\n\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...inputData,\r\n                                    \r\n                                    ...response.data,\r\n                                    paremterResultcode\r\n                                    \r\n\r\n                                },\r\n                                selectedRecord: {\r\n                                    additionalInfo:additionalInfo.length>0?additionalInfo:[],\r\n                                    selectedResultGrade: selectedResultGrade,\r\n                                    ResultParameter: response.data.ResultParameter ,selectedSpecification:selectedSpecification,\r\n                                    nallottedspeccode:selectedRecord.nallottedspeccode,selectedComponent:Component\r\n                                    ,ncomponentcode:componentcode\r\n                                },\r\n                                selectedsubcode:undefined ,\r\n                                  parameterResults:response.data.ResultParameter,\r\n                                  isParameterInitialRender:true,\r\n                                loading: false,\r\n                                screenName: \"IDS_RESULTENTRYPARAMETER\",\r\n                                openModal: true,\r\n                                operation: \"update\",\r\n                                activeTestKey: \"IDS_RESULTS\",\r\n                                ncontrolcode: ncontrolcode\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    })\r\n                //}\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n                }));\r\n            }\r\n        } else {\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    loading: false\r\n                }\r\n            })\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n            }));\r\n        }\r\n    }\r\n\r\n}else{\r\n    toast.warn(intl.formatMessage({\r\n        id: \"IDS_SELECTVALIDTEST\"\r\n    }));\r\n}\r\n\r\n}\r\n\r\n\r\nexport function addREAdhocTestParamter(inputDataObj) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/getAdhocTestParamter\", inputDataObj)\r\n            .then(response => {\r\n\r\n                let AdhocTestParamter = constructOptionList(response.data['TestParameter'] || [], 'ntestparametercode', 'sparametersynonym',\r\n                undefined, undefined, undefined);\r\n                AdhocTestParamter = AdhocTestParamter.get(\"OptionList\");\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...inputDataObj.masterData,\r\n                            AdhocParamter : AdhocTestParamter\r\n                        },\r\n                        screenName:'IDS_ADHOCPARAMETER',\r\n                        adhoctransactiontestcode: inputDataObj.ntransactiontestcode,\r\n                        adhocpreregno:inputDataObj.npreregno,\r\n                        openModal:true,\r\n                        operation:\"IDS_ADD\",\r\n                        selectedRecordAdhocParameter:{},\r\n                        adhocId:inputDataObj.adhocId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function createAdhocTestParamter(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/createAdhocTestParamter\", inputParam.inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...inputParam.inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        screenName:'IDS_ADHOCPARAMETER',\r\n                        openModal:false,\r\n                        activeTestTab: \"IDS_RESULTS\",\r\n                        activeTabIndex:1,\r\n                        selectedRecordAdhocParameter:{}\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function CompletePopupAction(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getAnalysedUser\", inputParam.inputData)\r\n            .then(response => {\r\n                let selectedRecordCompleteForm ={};\r\n                const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\",\"susername\", undefined, undefined, false);                \r\n                const Users = UsersMap.get(\"OptionList\");\r\n\r\n                //Added by sonia on 19-06-2024 for JIRA ID:ALPD-4422\r\n                if(response.data.userCode !==undefined  && response.data.userName!==undefined) {\r\n                    selectedRecordCompleteForm[\"nusercode\"] = {\r\n                        \"value\": response.data.userCode,\r\n                        \"label\":  response.data.userName\r\n                    };\r\n                }\r\n\r\n              \r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {                      \r\n                        Users,                      \r\n                        isOpen: true,\r\n                        operation: inputParam.inputData.operation,\r\n                        screenName: \"IDS_RESULTENTRYCOMPLETE\",\r\n                        openModal: true,\r\n                        ncontrolCode: inputParam.inputData.ncontrolcode,\r\n                        loading: false,\r\n                        isCompleteInitialRender:true,\r\n                        selectedRecordCompleteForm\r\n\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n//Added by sonia for ALPD-4084 on May 2 2024 Export action\r\nexport function exportAction(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getExportData\", inputParam.inputData)\r\n            .then(response => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                let value = \"\";\r\n                if(response.data.rtn ===\"Success\"){\r\n                    //Modified by sonia on 11-06-2024 using camelcase format in the key value\r\n                    value = response.data[\"exportFileViewUrl\"];\r\n                    var win = window.open(value);\r\n                    if (win) {\r\n                        win.focus();\r\n                    } else {\r\n                        intl.warn('IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE');\r\n                    }\r\n                }else{\r\n                    if (response.data[\"rtn\"]) {\r\n                        toast.warn(intl.formatMessage({ id: response.data.rtn }));\r\n                      }\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n//ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\r\nexport function getSectionChange(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/getSectionChange\", inputParam.inputData\r\n        )\r\n            .then(response => {\r\n                let section = [];\r\n                //ALPD-4050\r\n                let selectedRecord={...inputParam.selectedRecord,nsectioncode:\"\"}\r\n                const sectionMap = constructOptionList(response.data.Section || [], \"nsectioncode\", \"ssectionname\", undefined, undefined, false);\r\n                section = sectionMap.get(\"OptionList\");\r\n           \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        section,\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        openModal: true,operation:inputParam.inputData.operation,\r\n                        screenName:inputParam.inputData.screenName,\r\n                        ncontrolcode:inputParam.inputData.ncontrolcode,\r\n                        selectedRecord\r\n\r\n                    }\r\n                });\r\n\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\n//ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\r\nexport function updateSectionTest(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/updateSectionTest\", inputParam.inputData\r\n        )\r\n            .then(response => {\r\n                if (response.data.rtn === undefined || response.data.rtn === \"Success\") {\r\n               \r\n            let responseData =   sortData(response.data, 'ascending', 'ntransactionresultcode')\r\n\r\n            let selectedRecord={...inputParam.selectedRecord,\"nsectioncode\":\"\"}\r\n            \r\n            responseData[\"RESelectedTest\"] = getSameRecordFromTwoArrays(responseData.RE_TEST,inputParam.RESelectedTest,\"ntransactiontestcode\");\r\n        //ALPD-4226--Vignesh R(24-05-2024)--Test is de-selected when changing the section\r\n            let selectedTestList=[];\r\n            if(responseData[\"RESelectedTest\"].length===0&&responseData.RE_TEST.length>0){\r\n                selectedTestList.push(responseData.RE_TEST[0]);\r\n                responseData[\"RESelectedTest\"]=selectedTestList;\r\n\r\n            }\r\n          \r\n            let masterData = {\r\n                        ...inputParam.inputData.masterData,\r\n                        ...responseData\r\n                        \r\n                    }\r\n                    let respObject = {\r\n                        ...inputParam.inputData,\r\n                        ...inputParam.inputData.masterData,\r\n                        masterData,\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        openModal: false,\r\n                        showSample: undefined,\r\n                        selectedRecord\r\n                    }\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                } else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            loadEsign: false,\r\n                            openModal: false\r\n                        }\r\n                    });\r\n                    toast.warn(response.data.rtn);\r\n                }\r\n\r\n\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n//ALPD-4870-To get previously save filter details when click the filter name,done by Dhanushya RI\r\n\r\nexport function getResultEntryFilter(inputParam) {\r\n    let masterData = { ...inputParam.masterData }\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getResultEntryFilter\", { ...inputParam.inputData, nneedsubsample: //inputParamData.masterData.nneedsubsample\r\n            inputParam.masterData.realRegSubTypeValue.nneedsubsample\r\n         })\r\n            .then(response => {\r\n                //let masterData = { ...inputParamData.masterData }\r\n                if (inputParam.refs.searchSampleRef !== undefined && inputParam.refs.searchSampleRef.current !== null) {\r\n                    inputParam.refs.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputParam.refs.searchSubSampleRef !== undefined && inputParam.refs.searchSubSampleRef.current !== null) {\r\n                    inputParam.refs.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputParam.refs.searchTestRef !== undefined && inputParam.refs.searchTestRef.current !== null) {\r\n                    inputParam.refs.searchTestRef.current.value = \"\"\r\n                    // masterData['searchedTests'] = undefined\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                //sortData(response.data)\r\n                sortData(response.data, 'ascending', 'ntransactionresultcode')\r\n                if(response.data.rtn == \"IDS_USERNOTINRESULTENTRYFLOW\")\r\n                {\r\n                toast.warning(intl.formatMessage({ id: \"IDS_USERNOTINRESULTENTRYFLOW\" }));\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            realFromDate: response.data[\"fromDate\"],\r\n                            realToDate: response.data[\"toDate\"]\r\n                        },\r\n                        nfilternamecode:inputParam.inputData.nfilternamecode,\r\n                        loading: false,\r\n                        modalShow:false,\r\n                        showTest: inputParam.inputData.showTest,\r\n                        showSample: inputParam.inputData.showSample,\r\n                        activeTestKey: inputParam.inputData.activeTestKey,\r\n                    \r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else if(error.response.status === 401) {\r\n                    toast.warn(intl.formatMessage({id:error.response.data.rtn}));\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            masterData: {\r\n                                ...masterData,\r\n                                ...error.response.data,\r\n                                realFromDate: error.response.data[\"fromDate\"],\r\n                                realToDate: error.response.data[\"toDate\"]\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n                else{\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}