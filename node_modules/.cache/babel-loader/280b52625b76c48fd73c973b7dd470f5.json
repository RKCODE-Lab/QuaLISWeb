{"ast":null,"code":"var _jsxFileName = \"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\src\\\\pages\\\\contactmaster\\\\PatientMaster.jsx\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPencilAlt, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport DataGrid from \"../../components/data-grid/data-grid.component\";\nimport Fields from \"../../components/PatientMasterFields.json\"; // import {\n//   Query,\n//   Builder,\n//   BasicConfig, BasicFuncs,\n//   Utils as QbUtils,\n// } from \"react-awesome-query-builder\";\n\nimport { callService, crudMaster, validateEsignCredential, updateStore, getPatientDetail, getPatientComboService, filterColumnData, getTestParameter, getPatientReport, getPatientDetailsByFilterQuery } from \"../../actions\";\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\nimport { showEsign, getControlMap, validatePhoneNumber, ageCalculate, formatInputDate } from \"../../components/CommonScript\";\nimport { transactionStatus } from \"../../components/Enumeration\";\nimport ListMaster from \"../../components/list-master/list-master.component\";\nimport SlideOutModal from \"../../components/slide-out-modal/SlideOutModal\";\nimport { ReactComponent as Reports } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/image/report-Icon.svg\";\nimport { ReadOnlyText, ContentPanel } from \"../../components/App.styles\";\nimport AddPatient from \"./AddPatient\";\nimport Esign from \"../audittrail/Esign\";\nimport ConfirmMessage from \"../../components/confirm-alert/confirm-message.component\";\nimport ReactTooltip from \"react-tooltip\";\nimport { process } from \"@progress/kendo-data-query\";\nimport FilterQueryBuilder from \"../../components/FilterQueryBuilder\";\nimport AddFilteredPatient from \"./AddFilteredPatient\"; //import Filtercomponent from '../../components/Filtercomponent';\n// import FilterDemo from \"./FilterDemo\";\n// import \"antd/dist/antd.css\";\n// import 'react-awesome-query-builder/css/styles.scss';\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass PatientMaster extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClick = () => {\n      let obj = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openAdvFilter: true,\n          openModal: true,\n          slideResult: undefined\n        }\n      };\n      this.setState({\n        config: undefined,\n        tree: undefined\n      });\n      this.props.updateStore(obj);\n    };\n\n    this.dataStateChange = event => {\n      this.setState({\n        dataState: event.dataState\n      });\n    };\n\n    this.ConfirmDelete = deleteId => {\n      this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({\n        id: \"IDS_DELETE\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_DEFAULTCONFIRMMSG\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_OK\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_CANCEL\"\n      }), () => this.deletePatient(\"Patient\", this.props.Login.masterData.SelectedPatient, \"delete\", deleteId));\n    };\n\n    this.closeModal = () => {\n      let loadEsign = this.props.Login.loadEsign;\n      let openModal = this.props.Login.openModal;\n      let selectedRecord = this.props.Login.selectedRecord;\n      let openAdvFilter = this.props.Login.openAdvFilter;\n      let slideResult = this.props.Login.slideResult;\n      let tree = this.state.tree;\n      let config = this.state.config;\n\n      if (this.props.Login.loadEsign) {\n        if (this.props.Login.operation === \"delete\") {\n          loadEsign = false;\n          openModal = false;\n          selectedRecord = {};\n        } else {\n          loadEsign = false;\n        }\n      } else {\n        openAdvFilter = false;\n        openModal = false;\n        selectedRecord = {};\n        slideResult = {};\n        config = undefined;\n        tree = undefined;\n        this.setState({\n          config: config,\n          tree: tree\n        });\n      }\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openModal,\n          loadEsign,\n          selectedRecord,\n          selectedId: null,\n          openAdvFilter,\n          slideResult,\n          config,\n          tree\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.onComboChange = (comboData, fieldName) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[fieldName] = comboData;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onNumericInputOnChange = (value, name) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[name] = value;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onChange = (immutableTree, config) => {\n      let selectedRecord = this.state.selectedRecord || {}; // this.setState({ tree: immutableTree, config: config });\n\n      selectedRecord['filterquery'] = QbUtils.sqlFormat(immutableTree, config); // const jsonTree = QbUtils.getTree(immutableTree);\n\n      this.setState({\n        tree: immutableTree,\n        config: config,\n        selectedRecord: selectedRecord\n      });\n    };\n\n    this.onInputOnChange = event => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (event.target.type === \"checkbox\") {\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\n      } else {\n        if (event.target.name === \"sphoneno\") {\n          if (event.target.value !== \"\") {\n            event.target.value = validatePhoneNumber(event.target.value);\n            selectedRecord[event.target.name] = event.target.value !== \"\" ? event.target.value : selectedRecord[event.target.name];\n          } else {\n            selectedRecord[event.target.name] = event.target.value;\n          }\n        } else {\n          selectedRecord[event.target.name] = event.target.value;\n        }\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.handleDateChange = (dateName, dateValue) => {\n      const {\n        selectedRecord\n      } = this.state;\n      selectedRecord[dateName] = dateValue;\n      const age = ageCalculate(dateValue);\n      selectedRecord[\"sage\"] = age;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onSaveGetClick = () => {\n      let inputData = [];\n      inputData[\"userinfo\"] = this.props.Login.userInfo;\n      inputData[\"filterquery\"] = this.state.selectedRecord['filterquery'];\n      this.searchRef.current.value = \"\";\n      let paramFlag = true;\n      const inputParam = {\n        classUrl: \"patient\",\n        methodUrl: \"ByPatient\",\n        inputData: inputData,\n        searchRef: this.searchRef,\n        isClearSearch: this.props.Login.isClearSearch\n      };\n      const masterData = this.props.Login.masterData;\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData\n            }\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.getPatientDetailsByFilterQuery(inputParam, masterData);\n      }\n    };\n\n    this.onSaveClick = (saveType, formRef) => {\n      let patientData = [];\n      patientData[\"userinfo\"] = this.props.Login.userInfo;\n      let postParam = {\n        inputListName: \"PatientList\",\n        selectedObject: \"SelectedPatient\",\n        primaryKeyField: \"npatientcode\"\n      };\n\n      if (this.props.Login.operation === \"update\") {\n        postParam[\"primaryKeyValue\"] = this.props.Login.masterData.SelectedPatient.npatientcode;\n        patientData[\"patient\"] = {\n          npatientcode: this.props.Login.masterData.SelectedPatient.npatientcode,\n          sfirstname: this.state.selectedRecord.sfirstname,\n          slastname: this.state.selectedRecord.slastname,\n          snationalid: this.state.selectedRecord.snationalid,\n          sage: this.state.selectedRecord.sage,\n          sphoneno: this.state.selectedRecord.sphoneno,\n          saddress: this.state.selectedRecord.saddress,\n          sfathername: this.state.selectedRecord.sfathername //    \"ddob\": formatInputDate(\n          //     this.state.selectedRecord[\"ddob\"],false)\n\n        };\n      } else {\n        patientData[\"patient\"] = {\n          nsitecode: this.props.Login.userInfo.nmastersitecode\n        };\n        this.patientFieldList.map(item => {\n          return patientData[\"patient\"][item] = this.state.selectedRecord[item];\n        });\n      }\n\n      patientData[\"patient\"][\"ngendercode\"] = this.state.selectedRecord[\"ngendercode\"] ? this.state.selectedRecord[\"ngendercode\"].value : transactionStatus.NA; // if (patientData[\"patient\"][\"ddob\"] !== undefined\n      //     && patientData[\"patient\"][\"ddob\"] !== null && patientData[\"patient\"][\"ddob\"] !== \"\") {\n      //     patientData[\"patient\"][\"ddob\"] = formatInputDate(patientData[\"patient\"][\"ddob\"],false);\n      // }\n\n      if (this.state.selectedRecord[\"ddob\"]) {\n        patientData[\"patient\"][\"ddob\"] = formatInputDate(this.state.selectedRecord[\"ddob\"], false);\n      }\n\n      const inputParam = {\n        classUrl: \"patient\",\n        methodUrl: \"Patient\",\n        inputData: patientData,\n        operation: this.props.Login.operation,\n        saveType,\n        formRef,\n        postParam,\n        searchRef: this.searchRef,\n        isClearSearch: this.props.Login.isClearSearch\n      };\n      const masterData = this.props.Login.masterData;\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData\n            },\n            saveType\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\n      }\n    };\n\n    this.deletePatient = (methodUrl, selectedPatient, operation, ncontrolCode) => {\n      const postParam = {\n        inputListName: \"PatientList\",\n        selectedObject: \"SelectedPatient\",\n        primaryKeyField: \"npatientcode\",\n        primaryKeyValue: selectedPatient.npatientcode,\n        fetchUrl: \"patient/getPatient\",\n        fecthInputObject: {\n          userinfo: this.props.Login.userInfo\n        }\n      };\n      const inputParam = {\n        classUrl: this.props.Login.inputParam.classUrl,\n        methodUrl,\n        postParam,\n        inputData: {\n          userinfo: this.props.Login.userInfo,\n          patient: selectedPatient\n        },\n        operation,\n        isClearSearch: this.props.Login.isClearSearch\n      };\n      const masterData = this.props.Login.masterData;\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData\n            },\n            openModal: true,\n            screenName: \"IDS_PATIENTMASTER\",\n            operation\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\n      }\n    };\n\n    this.validateEsign = () => {\n      const inputParam = {\n        inputData: {\n          userinfo: { ...this.props.Login.userInfo,\n            sreason: this.state.selectedRecord[\"esigncomments\"]\n          },\n          password: this.state.selectedRecord[\"esignpassword\"]\n        },\n        screenData: this.props.Login.screenData\n      };\n      this.props.validateEsignCredential(inputParam, \"openModal\");\n    };\n\n    this.handleExpandChange = (row, dataState) => {\n      const viewParam = {\n        userInfo: this.props.Login.userInfo,\n        primaryKeyField: \"npreregno\",\n        masterData: this.props.Login.masterData\n      };\n      this.props.getTestParameter({ ...viewParam,\n        dataState,\n        primaryKeyValue: row[\"dataItem\"][viewParam.primaryKeyField],\n        viewRow: row[\"dataItem\"]\n      });\n    };\n\n    this.reloadData = () => {\n      this.searchRef.current.value = \"\";\n      const inputParam = {\n        inputData: {\n          userinfo: this.props.Login.userInfo\n        },\n        classUrl: \"patient\",\n        methodUrl: \"Patient\",\n        displayName: \"IDS_PATIENTMASTER\",\n        userInfo: this.props.Login.userInfo,\n        isClearSearch: this.props.Login.isClearSearch\n      };\n      this.props.callService(inputParam);\n    };\n\n    this.state = {\n      masterStatus: \"\",\n      error: \"\",\n      selectedRecord: {},\n      operation: \"\",\n      selectedPatient: undefined,\n      screenName: undefined,\n      userRoleControlRights: [],\n      controlMap: new Map(),\n      isClearSearch: false,\n      dataState: {\n        skip: 0,\n        take: 5\n      },\n      tree: undefined,\n      config: undefined\n    };\n    this.searchRef = React.createRef();\n    this.emailRef = React.createRef();\n    this.confirmMessage = new ConfirmMessage();\n    this.patientFieldList = [\"sfirstname\", \"slastname\", \"sfathername\", \"sage\", \"ddob\", \"sphoneno\", \"saddress\", \"snationalid\"];\n    this.searchFieldList = [\"saddress\", \"sage\", \"sdob\", \"sgendername\", \"sfirstname\", \"sfathername\", \"slastname\", \"spatientid\", \"sphoneno\"];\n    this.columnList = [{\n      idsName: \"IDS_ARNO\",\n      dataField: \"sarno\",\n      width: \"150px\"\n    }, {\n      idsName: \"IDS_PRODUCT\",\n      dataField: \"sproductname\",\n      width: \"250px\"\n    }, {\n      idsName: \"IDS_SPECIFICATION\",\n      dataField: \"sspecname\",\n      width: \"150px\"\n    }, {\n      idsName: \"IDS_SPECIMENCOLLECTIONTIME\",\n      dataField: \"scolleciondate\",\n      width: \"100px\"\n    }, {\n      idsName: \"IDS_RECEIVEDDATE\",\n      dataField: \"sreceiveddate\",\n      width: \"100px\"\n    }, {\n      idsName: \"IDS_STATUS\",\n      dataField: \"stransdisplaystatus\",\n      width: \"100px\"\n    }];\n    this.childColumnList = [{\n      idsName: \"IDS_TESTNAME\",\n      dataField: \"stestsynonym\",\n      width: \"250px\"\n    }, {\n      idsName: \"IDS_PARAMETERNAME\",\n      dataField: \"sparametersynonym\",\n      width: \"250px\"\n    }, {\n      idsName: \"IDS_RESULT\",\n      dataField: \"sresult\",\n      width: \"150px\"\n    }, {\n      idsName: \"IDS_RESULTFLAG\",\n      dataField: \"sgradename\",\n      width: \"100px\"\n    }, {\n      idsName: \"IDS_RESULTDATE\",\n      dataField: \"sentereddate\",\n      width: \"100px\"\n    }, {\n      idsName: \"IDS_STATUS\",\n      dataField: \"stransdisplaystatus\",\n      width: \"100px\"\n    }];\n    this.slideList = [{\n      idsName: \"IDS_PATIENTID\",\n      dataField: \"spatientid\",\n      width: \"250px\"\n    }, {\n      idsName: \"IDS_FIRSTNAME\",\n      dataField: \"sfirstname\",\n      width: \"150px\"\n    }, {\n      idsName: \"IDS_LASTNAME\",\n      dataField: \"slastname\",\n      width: \"150px\"\n    }, {\n      idsName: \"IDS_NATIONALID\",\n      dataField: \"snationalid\",\n      width: \"150px\"\n    }, {\n      idsName: \"IDS_FATHERGUARDIANNAME\",\n      dataField: \"sfathername\",\n      width: \"150px\"\n    }, {\n      idsName: \"IDS_DATEOFBIRTH\",\n      dataField: \"sdob\",\n      width: \"150px\"\n    }, {\n      idsName: \"IDS_AGE\",\n      dataField: \"sage\",\n      width: \"100px\"\n    }, {\n      idsName: \"IDS_SEX\",\n      dataField: \"sgendername\",\n      width: \"100px\"\n    }, {\n      idsName: \"IDS_ADDRESS\",\n      dataField: \"saddress\",\n      width: \"150px\"\n    }, {\n      idsName: \"IDS_PHONENO\",\n      dataField: \"sphoneno\",\n      width: \"150px\"\n    }];\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\n      toast.warn(props.Login.masterStatus);\n      props.Login.masterStatus = \"\";\n    }\n\n    if (props.Login.error !== state.error) {\n      toast.error(props.Login.error);\n      props.Login.error = \"\";\n    }\n\n    if (props.Login.selectedRecord === undefined) {\n      return {\n        selectedRecord: {}\n      };\n    }\n\n    return null;\n  }\n\n  render() {\n    const addId = this.state.controlMap.has(\"AddPatient\") && this.state.controlMap.get(\"AddPatient\").ncontrolcode;\n    const editId = this.state.controlMap.has(\"EditPatient\") && this.state.controlMap.get(\"EditPatient\").ncontrolcode;\n    const deleteId = this.state.controlMap.has(\"DeletePatient\") && this.state.controlMap.get(\"DeletePatient\").ncontrolcode;\n    const patientReportId = this.state.controlMap.has(\"PatientReport\") && this.state.controlMap.get(\"PatientReport\").ncontrolcode;\n    const filterParam = {\n      inputListName: \"PatientList\",\n      selectedObject: \"SelectedPatient\",\n      primaryKeyField: \"npatientcode\",\n      fetchUrl: \"patient/getPatient\",\n      fecthInputObject: {\n        userinfo: this.props.Login.userInfo\n      },\n      masterData: this.props.Login.masterData,\n      searchFieldList: this.searchFieldList\n    };\n    const addParam = {\n      screenName: \"IDS_PATIENTMASTER\",\n      operation: \"create\",\n      primaryKeyName: \"npatientcode\",\n      masterData: this.props.Login.masterData,\n      userInfo: this.props.Login.userInfo,\n      ncontrolcode: addId\n    };\n    const editParam = {\n      screenName: \"IDS_PATIENTMASTER\",\n      operation: \"update\",\n      primaryKeyName: \"npatientcode\",\n      masterData: this.props.Login.masterData,\n      userInfo: this.props.Login.userInfo,\n      ncontrolcode: editId,\n      inputListName: \"PatientList\",\n      selectedObject: \"SelectedPatient\"\n    };\n    const mandatoryFields = [{\n      idsName: \"IDS_FIRSTNAME\",\n      dataField: \"sfirstname\",\n      mandatoryLabel: \"IDS_ENTER\",\n      controlType: \"textbox\"\n    }, {\n      idsName: \"IDS_LASTNAME\",\n      dataField: \"slastname\",\n      mandatoryLabel: \"IDS_ENTER\",\n      controlType: \"textbox\"\n    }, {\n      idsName: \"IDS_FATHERGUARDIANNAME\",\n      dataField: \"sfathername\",\n      mandatoryLabel: \"IDS_ENTER\",\n      controlType: \"textbox\"\n    }, {\n      idsName: \"IDS_DATEOFBIRTH\",\n      dataField: \"ddob\",\n      mandatoryLabel: \"IDS_SELECT\",\n      controlType: \"selectbox\"\n    }, {\n      idsName: \"IDS_AGE\",\n      dataField: \"sage\",\n      mandatoryLabel: \"IDS_ENTER\",\n      controlType: \"textbox\"\n    }, {\n      idsName: \"IDS_SEX\",\n      dataField: \"ngendercode\",\n      mandatoryLabel: \"IDS_SELECT\",\n      controlType: \"selectbox\"\n    }, {\n      idsName: \"IDS_ADDRESS\",\n      dataField: \"saddress\",\n      mandatoryLabel: \"IDS_ENTER\",\n      controlType: \"textbox\"\n    }, {\n      idsName: \"IDS_PHONENO\",\n      dataField: \"sphoneno\",\n      mandatoryLabel: \"IDS_ENTER\",\n      controlType: \"textbox\"\n    }];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"client-listing-wrap  mtop-4 mtop-fixed-breadcrumb\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      noGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ListMaster, {\n      screenName: this.props.intl.formatMessage({\n        id: \"IDS_PATIENTMASTER\"\n      }),\n      masterData: this.props.Login.masterData,\n      userInfo: this.props.Login.userInfo,\n      masterList: this.props.Login.masterData.searchedData || this.props.Login.masterData.PatientList,\n      getMasterDetail: user => this.props.getPatientDetail(user, this.props.Login.userInfo, this.props.Login.masterData),\n      selectedMaster: this.props.Login.masterData.SelectedPatient,\n      primaryKeyField: \"npatientcode\",\n      mainField: \"spatientname\",\n      firstField: \"sfathername\",\n      filterColumnData: this.props.filterColumnData,\n      filterParam: filterParam,\n      userRoleControlRights: this.state.userRoleControlRights,\n      addId: addId,\n      searchRef: this.searchRef,\n      reloadData: this.reloadData,\n      openModal: () => this.props.getPatientComboService(addParam),\n      isMultiSelecct: false,\n      hidePaging: false,\n      isClearSearch: this.props.Login.isClearSearch,\n      showMicIcon: true,\n      showAdvFilterIcon: true,\n      handleClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ContentPanel, {\n      className: \"panel-main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"border-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 17\n      }\n    }, this.props.Login.masterData.PatientList && this.props.Login.masterData.PatientList.length > 0 && this.props.Login.masterData.SelectedPatient ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(ReactTooltip, {\n      place: \"bottom\",\n      globalEventOff: \"click\",\n      id: \"tooltip_list_wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Card.Title, {\n      className: \"product-title-main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 25\n      }\n    }, this.props.Login.masterData.SelectedPatient.spatientname), /*#__PURE__*/React.createElement(Card.Subtitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex product-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"product-title-sub flex-grow-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"editPatient\",\n      hidden: this.state.userRoleControlRights.indexOf(editId) === -1,\n      className: \"btn btn-circle outline-grey mr-2\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_EDIT\"\n      }),\n      \"data-for\": \"tooltip_list_wrap\",\n      onClick: () => this.props.getPatientComboService(editParam),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPencilAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"deletePatient\",\n      className: \"btn btn-circle outline-grey mr-2 action-icons-wrap\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_DELETE\"\n      }),\n      \"data-for\": \"tooltip_list_wrap\",\n      hidden: this.state.userRoleControlRights.indexOf(deleteId) === -1,\n      onClick: () => this.ConfirmDelete(deleteId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTrashAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      className: \"btn btn-circle outline-grey mr-2\",\n      name: \"patientReport\",\n      hidden: this.state.userRoleControlRights.indexOf(patientReportId) === -1,\n      onClick: () => this.props.getPatientReport(this.props.Login.masterData.SelectedPatient, this.props.Login.userInfo, patientReportId),\n      \"data-for\": \"tooltip_list_wrap\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_PATIENTREPORT\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(Reports, {\n      className: \"custom_icons\",\n      width: \"20\",\n      height: \"20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 33\n      }\n    })))))), /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_PATIENTID\",\n      message: \"Patient ID\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 31\n      }\n    }, this.props.Login.masterData.SelectedPatient.spatientid))), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_NATIONALID\",\n      message: \"National ID\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 31\n      }\n    }, this.props.Login.masterData.SelectedPatient.snationalid))), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_DATEOFBIRTH\",\n      message: \"Date Of Birth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 31\n      }\n    }, this.props.Login.masterData.SelectedPatient.sdob === null || this.props.Login.masterData.SelectedPatient.sdob.length === 0 ? \"-\" : this.props.Login.masterData.SelectedPatient.sdob))), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_AGE\",\n      message: \"Age\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 31\n      }\n    }, this.props.Login.masterData.SelectedPatient.sage === null || this.props.Login.masterData.SelectedPatient.sage.length === 0 ? \"-\" : this.props.Login.masterData.SelectedPatient.sage))), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_SEX\",\n      message: \"Sex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 31\n      }\n    }, this.props.Login.masterData.SelectedPatient.sgendername === null || this.props.Login.masterData.SelectedPatient.sgendername.length === 0 ? \"-\" : this.props.Login.masterData.SelectedPatient.sgendername))), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_FATHERGUARDIANNAME\",\n      message: \"Father/Guardian Name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 31\n      }\n    }, this.props.Login.masterData.SelectedPatient.sfathername))), /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_PHONENO\",\n      message: \"Phone No\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 31\n      }\n    }, this.props.Login.masterData.SelectedPatient.sphoneno))), /*#__PURE__*/React.createElement(Col, {\n      md: 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_ADDRESS\",\n      message: \"Address\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 31\n      }\n    }, this.props.Login.masterData.SelectedPatient.saddress === null || this.props.Login.masterData.SelectedPatient.saddress.length === 0 ? \"-\" : this.props.Login.masterData.SelectedPatient.saddress)))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(DataGrid, {\n      userRoleControlRights: this.state.userRoleControlRights,\n      controlMap: this.state.controlMap,\n      primaryKeyField: \"npreregno\",\n      data: this.props.Login.masterData && this.props.Login.masterData[\"PatientHistory\"],\n      dataResult: process(this.props.Login.masterData && (this.props.Login.masterData[\"PatientHistory\"] || []), this.state.dataState),\n      dataState: this.state.dataState,\n      dataStateChange: this.dataStateChange,\n      extractedColumnList: this.columnList,\n      inputParam: this.props.Login.inputParam,\n      userInfo: this.props.Login.userInfo,\n      methodUrl: this.props.Login.inputParam.methodUrl,\n      pageable: true,\n      scrollable: \"scrollable\",\n      isActionRequired: false,\n      isToolBarRequired: false,\n      selectedId: null,\n      hideColumnFilter: false,\n      expandField: \"expanded\",\n      handleExpandChange: this.handleExpandChange,\n      hasChild: true,\n      childColumnList: this.childColumnList,\n      childMappingField: \"npreregno\",\n      childList: this.props.Login.testMap || new Map(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 29\n      }\n    }))))) : \"\"))))), this.props.Login.openModal ? /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.Login.openModal,\n      closeModal: this.closeModal,\n      size: this.props.Login.loadEsign ? \"lg\" : this.props.Login.openAdvFilter ? \"xl\" : \"lg\",\n      operation: this.props.Login.openAdvFilter ? \"\" : this.props.Login.operation,\n      inputParam: this.props.Login.inputParam,\n      screenName: this.props.Login.screenName,\n      onSaveClick: this.props.Login.openAdvFilter ? this.onSaveGetClick : this.onSaveClick,\n      esign: this.props.Login.loadEsign,\n      validateEsign: this.validateEsign,\n      showSubmit: this.props.Login.openAdvFilter ? true : false,\n      hideSave: this.props.Login.openAdvFilter ? true : false,\n      masterStatus: this.props.Login.masterStatus,\n      updateStore: this.props.updateStore,\n      selectedRecord: this.state.selectedRecord || {},\n      mandatoryFields: this.props.Login.openAdvFilter ? \"\" : this.props.Login.openModal ? \"\" : {\n        mandatoryFields\n      },\n      addComponent: this.props.Login.loadEsign ? /*#__PURE__*/React.createElement(Esign, {\n        operation: this.props.Login.operation,\n        onInputOnChange: this.onInputOnChange,\n        inputParam: this.props.Login.inputParam,\n        selectedRecord: this.state.selectedRecord || {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 17\n        }\n      }) : this.props.Login.openAdvFilter ? \"\" //(\n      // <FilterQueryBuilder\n      //   fields={Fields}\n      //   onChange={this.onChange}\n      //   tree={this.state.tree}\n      //   config={this.state.config}\n      //   slideList={this.slideList}\n      //   slideResult={this.props.Login.slideResult}\n      //   controlMap={this.state.controlMap}\n      //   dataState={this.state.dataState}\n      //   dataStateChange={this.dataStateChange}\n      // />)\n      : /*#__PURE__*/React.createElement(AddPatient, {\n        selectedRecord: this.state.selectedRecord || {},\n        onInputOnChange: this.onInputOnChange,\n        onComboChange: this.onComboChange,\n        onNumericInputOnChange: this.onNumericInputOnChange,\n        handleDateChange: this.handleDateChange,\n        genderList: this.props.Login.genderList || [],\n        selectedPatient: this.props.Login.masterData.SelectedPatient || {},\n        operation: this.props.Login.operation,\n        inputParam: this.props.Login.inputParam,\n        userInfo: this.props.Login.userInfo,\n        currentTime: this.props.Login.currentTime,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 17\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 11\n      }\n    }) : \"\");\n  }\n\n  componentDidUpdate(previousProps) {\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n      this.setState({\n        selectedRecord: this.props.Login.selectedRecord\n      });\n    }\n\n    if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n      const userRoleControlRights = [];\n\n      if (this.props.Login.userRoleControlRights) {\n        this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item => userRoleControlRights.push(item.ncontrolcode));\n      }\n\n      const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode);\n      this.setState({\n        userRoleControlRights,\n        controlMap\n      });\n    }\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  callService,\n  crudMaster,\n  validateEsignCredential,\n  updateStore,\n  getPatientDetail,\n  getPatientComboService,\n  filterColumnData,\n  getTestParameter,\n  getPatientReport,\n  getPatientDetailsByFilterQuery\n})(injectIntl(PatientMaster));","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/pages/contactmaster/PatientMaster.jsx"],"names":["React","connect","toast","injectIntl","FormattedMessage","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faPencilAlt","faTrashAlt","DataGrid","Fields","callService","crudMaster","validateEsignCredential","updateStore","getPatientDetail","getPatientComboService","filterColumnData","getTestParameter","getPatientReport","getPatientDetailsByFilterQuery","DEFAULT_RETURN","showEsign","getControlMap","validatePhoneNumber","ageCalculate","formatInputDate","transactionStatus","ListMaster","SlideOutModal","ReadOnlyText","ContentPanel","AddPatient","Esign","ConfirmMessage","ReactTooltip","process","FilterQueryBuilder","AddFilteredPatient","mapStateToProps","state","Login","PatientMaster","Component","constructor","props","handleClick","obj","typeName","data","openAdvFilter","openModal","slideResult","undefined","setState","config","tree","dataStateChange","event","dataState","ConfirmDelete","deleteId","confirmMessage","confirm","intl","formatMessage","id","deletePatient","masterData","SelectedPatient","closeModal","loadEsign","selectedRecord","operation","updateInfo","selectedId","onComboChange","comboData","fieldName","onNumericInputOnChange","value","name","onChange","immutableTree","QbUtils","sqlFormat","onInputOnChange","target","type","checked","YES","NO","handleDateChange","dateName","dateValue","age","onSaveGetClick","inputData","userInfo","searchRef","current","paramFlag","inputParam","classUrl","methodUrl","isClearSearch","userRoleControlRights","nformcode","ncontrolCode","screenData","onSaveClick","saveType","formRef","patientData","postParam","inputListName","selectedObject","primaryKeyField","npatientcode","sfirstname","slastname","snationalid","sage","sphoneno","saddress","sfathername","nsitecode","nmastersitecode","patientFieldList","map","item","NA","selectedPatient","primaryKeyValue","fetchUrl","fecthInputObject","userinfo","patient","screenName","validateEsign","sreason","password","handleExpandChange","row","viewParam","viewRow","reloadData","displayName","masterStatus","error","controlMap","Map","skip","take","createRef","emailRef","searchFieldList","columnList","idsName","dataField","width","childColumnList","slideList","getDerivedStateFromProps","warn","render","addId","has","get","ncontrolcode","editId","patientReportId","filterParam","addParam","primaryKeyName","editParam","mandatoryFields","mandatoryLabel","controlType","searchedData","PatientList","user","length","spatientname","indexOf","spatientid","sdob","sgendername","testMap","genderList","currentTime","componentDidUpdate","previousProps","Object","values","push"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { injectIntl, FormattedMessage } from \"react-intl\";\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from \"react-bootstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPencilAlt, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport DataGrid from \"../../components/data-grid/data-grid.component\";\r\nimport Fields from \"../../components/PatientMasterFields.json\";\r\n// import {\r\n//   Query,\r\n//   Builder,\r\n//   BasicConfig, BasicFuncs,\r\n//   Utils as QbUtils,\r\n// } from \"react-awesome-query-builder\";\r\nimport {\r\n  callService,\r\n  crudMaster,\r\n  validateEsignCredential,\r\n  updateStore,\r\n  getPatientDetail,\r\n  getPatientComboService,\r\n  filterColumnData,\r\n  getTestParameter,\r\n  getPatientReport, getPatientDetailsByFilterQuery\r\n} from \"../../actions\";\r\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\r\nimport {\r\n  showEsign,\r\n  getControlMap,\r\n  validatePhoneNumber,\r\n  ageCalculate,\r\n  formatInputDate,\r\n} from \"../../components/CommonScript\";\r\nimport { transactionStatus } from \"../../components/Enumeration\";\r\nimport ListMaster from \"../../components/list-master/list-master.component\";\r\nimport SlideOutModal from \"../../components/slide-out-modal/SlideOutModal\";\r\nimport { ReactComponent as Reports } from \"../../assets/image/report-Icon.svg\";\r\nimport { ReadOnlyText, ContentPanel } from \"../../components/App.styles\";\r\nimport AddPatient from \"./AddPatient\";\r\nimport Esign from \"../audittrail/Esign\";\r\nimport ConfirmMessage from \"../../components/confirm-alert/confirm-message.component\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport { process } from \"@progress/kendo-data-query\";\r\nimport FilterQueryBuilder from \"../../components/FilterQueryBuilder\";\r\nimport AddFilteredPatient from \"./AddFilteredPatient\";\r\n//import Filtercomponent from '../../components/Filtercomponent';\r\n// import FilterDemo from \"./FilterDemo\";\r\n// import \"antd/dist/antd.css\";\r\n// import 'react-awesome-query-builder/css/styles.scss';\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { Login: state.Login };\r\n};\r\n\r\nclass PatientMaster extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      masterStatus: \"\",\r\n      error: \"\",\r\n      selectedRecord: {},\r\n      operation: \"\",\r\n      selectedPatient: undefined,\r\n      screenName: undefined,\r\n      userRoleControlRights: [],\r\n      controlMap: new Map(),\r\n      isClearSearch: false,\r\n      dataState: { skip: 0, take: 5 },\r\n      tree: undefined,\r\n      config: undefined\r\n    };\r\n    this.searchRef = React.createRef();\r\n    this.emailRef = React.createRef();\r\n    this.confirmMessage = new ConfirmMessage();\r\n\r\n    this.patientFieldList = [\r\n      \"sfirstname\",\r\n      \"slastname\",\r\n      \"sfathername\",\r\n      \"sage\",\r\n      \"ddob\",\r\n      \"sphoneno\",\r\n      \"saddress\",\r\n      \"snationalid\",\r\n    ];\r\n\r\n    this.searchFieldList = [\r\n      \"saddress\",\r\n      \"sage\",\r\n      \"sdob\",\r\n      \"sgendername\",\r\n      \"sfirstname\",\r\n      \"sfathername\",\r\n      \"slastname\",\r\n      \"spatientid\",\r\n      \"sphoneno\",\r\n    ];\r\n\r\n    this.columnList = [\r\n      { idsName: \"IDS_ARNO\", dataField: \"sarno\", width: \"150px\" },\r\n      { idsName: \"IDS_PRODUCT\", dataField: \"sproductname\", width: \"250px\" },\r\n      { idsName: \"IDS_SPECIFICATION\", dataField: \"sspecname\", width: \"150px\" },\r\n      {\r\n        idsName: \"IDS_SPECIMENCOLLECTIONTIME\",\r\n        dataField: \"scolleciondate\",\r\n        width: \"100px\",\r\n      },\r\n      {\r\n        idsName: \"IDS_RECEIVEDDATE\",\r\n        dataField: \"sreceiveddate\",\r\n        width: \"100px\",\r\n      },\r\n      {\r\n        idsName: \"IDS_STATUS\",\r\n        dataField: \"stransdisplaystatus\",\r\n        width: \"100px\",\r\n      },\r\n    ];\r\n\r\n    this.childColumnList = [\r\n      { idsName: \"IDS_TESTNAME\", dataField: \"stestsynonym\", width: \"250px\" },\r\n      {\r\n        idsName: \"IDS_PARAMETERNAME\",\r\n        dataField: \"sparametersynonym\",\r\n        width: \"250px\",\r\n      },\r\n      { idsName: \"IDS_RESULT\", dataField: \"sresult\", width: \"150px\" },\r\n      { idsName: \"IDS_RESULTFLAG\", dataField: \"sgradename\", width: \"100px\" },\r\n      { idsName: \"IDS_RESULTDATE\", dataField: \"sentereddate\", width: \"100px\" },\r\n      {\r\n        idsName: \"IDS_STATUS\",\r\n        dataField: \"stransdisplaystatus\",\r\n        width: \"100px\",\r\n      },\r\n    ];\r\n    this.slideList = [\r\n      { idsName: \"IDS_PATIENTID\", dataField: \"spatientid\", width: \"250px\" },\r\n      { idsName: \"IDS_FIRSTNAME\", dataField: \"sfirstname\", width: \"150px\" },\r\n      { idsName: \"IDS_LASTNAME\", dataField: \"slastname\", width: \"150px\" },\r\n      { idsName: \"IDS_NATIONALID\", dataField: \"snationalid\", width: \"150px\" },\r\n      { idsName: \"IDS_FATHERGUARDIANNAME\", dataField: \"sfathername\", width: \"150px\" },\r\n      { idsName: \"IDS_DATEOFBIRTH\", dataField: \"sdob\", width: \"150px\" },\r\n      { idsName: \"IDS_AGE\", dataField: \"sage\", width: \"100px\" },\r\n      { idsName: \"IDS_SEX\", dataField: \"sgendername\", width: \"100px\" },\r\n      { idsName: \"IDS_ADDRESS\", dataField: \"saddress\", width: \"150px\" },\r\n      { idsName: \"IDS_PHONENO\", dataField: \"sphoneno\", width: \"150px\" },\r\n    ];\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (\r\n      props.Login.masterStatus !== \"\" &&\r\n      props.Login.masterStatus !== state.masterStatus\r\n    ) {\r\n      toast.warn(props.Login.masterStatus);\r\n      props.Login.masterStatus = \"\";\r\n    }\r\n    if (props.Login.error !== state.error) {\r\n      toast.error(props.Login.error);\r\n      props.Login.error = \"\";\r\n    }\r\n    if (props.Login.selectedRecord === undefined) {\r\n      return { selectedRecord: {} };\r\n    }\r\n    return null;\r\n  }\r\n  handleClick = () => {\r\n    let obj = { typeName: DEFAULT_RETURN, data: { openAdvFilter: true, openModal: true, slideResult:undefined } }\r\n    this.setState({config:undefined,tree:undefined})\r\n    this.props.updateStore(obj);\r\n  }\r\n  dataStateChange=(event) =>{\r\n    this.setState({ dataState: event.dataState })\r\n  }\r\n  render() {\r\n    const addId =\r\n      this.state.controlMap.has(\"AddPatient\") &&\r\n      this.state.controlMap.get(\"AddPatient\").ncontrolcode;\r\n    const editId =\r\n      this.state.controlMap.has(\"EditPatient\") &&\r\n      this.state.controlMap.get(\"EditPatient\").ncontrolcode;\r\n    const deleteId =\r\n      this.state.controlMap.has(\"DeletePatient\") &&\r\n      this.state.controlMap.get(\"DeletePatient\").ncontrolcode;\r\n    const patientReportId =\r\n      this.state.controlMap.has(\"PatientReport\") &&\r\n      this.state.controlMap.get(\"PatientReport\").ncontrolcode;\r\n\r\n    const filterParam = {\r\n      inputListName: \"PatientList\",\r\n      selectedObject: \"SelectedPatient\",\r\n      primaryKeyField: \"npatientcode\",\r\n      fetchUrl: \"patient/getPatient\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n      masterData: this.props.Login.masterData,\r\n      searchFieldList: this.searchFieldList,\r\n    };\r\n\r\n    const addParam = {\r\n      screenName: \"IDS_PATIENTMASTER\",\r\n      operation: \"create\",\r\n      primaryKeyName: \"npatientcode\",\r\n      masterData: this.props.Login.masterData,\r\n      userInfo: this.props.Login.userInfo,\r\n      ncontrolcode: addId,\r\n    };\r\n    const editParam = {\r\n      screenName: \"IDS_PATIENTMASTER\",\r\n      operation: \"update\",\r\n      primaryKeyName: \"npatientcode\",\r\n      masterData: this.props.Login.masterData,\r\n      userInfo: this.props.Login.userInfo,\r\n      ncontrolcode: editId,\r\n      inputListName: \"PatientList\",\r\n      selectedObject: \"SelectedPatient\",\r\n    };\r\n    const mandatoryFields = [\r\n      {\r\n        idsName: \"IDS_FIRSTNAME\",\r\n        dataField: \"sfirstname\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n      {\r\n        idsName: \"IDS_LASTNAME\",\r\n        dataField: \"slastname\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n      {\r\n        idsName: \"IDS_FATHERGUARDIANNAME\",\r\n        dataField: \"sfathername\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n      {\r\n        idsName: \"IDS_DATEOFBIRTH\",\r\n        dataField: \"ddob\",\r\n        mandatoryLabel: \"IDS_SELECT\",\r\n        controlType: \"selectbox\",\r\n      },\r\n      {\r\n        idsName: \"IDS_AGE\",\r\n        dataField: \"sage\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n      {\r\n        idsName: \"IDS_SEX\",\r\n        dataField: \"ngendercode\",\r\n        mandatoryLabel: \"IDS_SELECT\",\r\n        controlType: \"selectbox\",\r\n      },\r\n      {\r\n        idsName: \"IDS_ADDRESS\",\r\n        dataField: \"saddress\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n      {\r\n        idsName: \"IDS_PHONENO\",\r\n        dataField: \"sphoneno\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n    ];\r\n\r\n    return (\r\n      <>\r\n        <div className=\"client-listing-wrap  mtop-4 mtop-fixed-breadcrumb\">\r\n          <Row noGutters>\r\n            <Col md={4}>\r\n              <ListMaster\r\n                screenName={this.props.intl.formatMessage({\r\n                  id: \"IDS_PATIENTMASTER\",\r\n                })}\r\n                masterData={this.props.Login.masterData}\r\n                userInfo={this.props.Login.userInfo}\r\n                masterList={\r\n                  this.props.Login.masterData.searchedData ||\r\n                  this.props.Login.masterData.PatientList\r\n                }\r\n                getMasterDetail={(user) =>\r\n                  this.props.getPatientDetail(\r\n                    user,\r\n                    this.props.Login.userInfo,\r\n                    this.props.Login.masterData\r\n                  )\r\n                }\r\n                selectedMaster={this.props.Login.masterData.SelectedPatient}\r\n                primaryKeyField=\"npatientcode\"\r\n                mainField=\"spatientname\"\r\n                firstField=\"sfathername\"\r\n                filterColumnData={this.props.filterColumnData}\r\n                filterParam={filterParam}\r\n                userRoleControlRights={this.state.userRoleControlRights}\r\n                addId={addId}\r\n                searchRef={this.searchRef}\r\n                reloadData={this.reloadData}\r\n                openModal={() => this.props.getPatientComboService(addParam)}\r\n                isMultiSelecct={false}\r\n                hidePaging={false}\r\n                isClearSearch={this.props.Login.isClearSearch}\r\n                showMicIcon={true}\r\n                showAdvFilterIcon={true}\r\n                handleClick={this.handleClick}\r\n              />\r\n            </Col>\r\n            <Col md={8}>\r\n              <ContentPanel className=\"panel-main-content\">\r\n                <Card className=\"border-0\">\r\n                  {this.props.Login.masterData.PatientList &&\r\n                    this.props.Login.masterData.PatientList.length > 0 &&\r\n                    this.props.Login.masterData.SelectedPatient ? (\r\n                    <>\r\n                      <Card.Header>\r\n                        <ReactTooltip\r\n                          place=\"bottom\"\r\n                          globalEventOff=\"click\"\r\n                          id=\"tooltip_list_wrap\"\r\n                        />\r\n                        <Card.Title className=\"product-title-main\">\r\n                          {\r\n                            this.props.Login.masterData.SelectedPatient\r\n                              .spatientname\r\n                          }\r\n                        </Card.Title>\r\n                        <Card.Subtitle>\r\n                          <div className=\"d-flex product-category\">\r\n                            <h2 className=\"product-title-sub flex-grow-1\"></h2>\r\n                            <div className=\"d-inline\">\r\n                              <Nav.Link\r\n                                name=\"editPatient\"\r\n                                hidden={\r\n                                  this.state.userRoleControlRights.indexOf(\r\n                                    editId\r\n                                  ) === -1\r\n                                }\r\n                                className=\"btn btn-circle outline-grey mr-2\"\r\n                                data-tip={this.props.intl.formatMessage({\r\n                                  id: \"IDS_EDIT\",\r\n                                })}\r\n                                data-for=\"tooltip_list_wrap\"\r\n                                onClick={() =>\r\n                                  this.props.getPatientComboService(editParam)\r\n                                }\r\n                              >\r\n                                <FontAwesomeIcon icon={faPencilAlt} />\r\n                              </Nav.Link>\r\n\r\n                              <Nav.Link\r\n                                name=\"deletePatient\"\r\n                                className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                data-tip={this.props.intl.formatMessage({\r\n                                  id: \"IDS_DELETE\",\r\n                                })}\r\n                                data-for=\"tooltip_list_wrap\"\r\n                                hidden={\r\n                                  this.state.userRoleControlRights.indexOf(\r\n                                    deleteId\r\n                                  ) === -1\r\n                                }\r\n                                onClick={() => this.ConfirmDelete(deleteId)}\r\n                              >\r\n                                <FontAwesomeIcon icon={faTrashAlt} />\r\n                              </Nav.Link>\r\n\r\n                              <Nav.Link\r\n                                className=\"btn btn-circle outline-grey mr-2\"\r\n                                name=\"patientReport\"\r\n                                hidden={\r\n                                  this.state.userRoleControlRights.indexOf(\r\n                                    patientReportId\r\n                                  ) === -1\r\n                                }\r\n                                onClick={() =>\r\n                                  this.props.getPatientReport(\r\n                                    this.props.Login.masterData.SelectedPatient,\r\n                                    this.props.Login.userInfo,\r\n                                    patientReportId\r\n                                  )\r\n                                }\r\n                                data-for=\"tooltip_list_wrap\"\r\n                                data-tip={this.props.intl.formatMessage({\r\n                                  id: \"IDS_PATIENTREPORT\",\r\n                                })}\r\n                              >\r\n                                <Reports\r\n                                  className=\"custom_icons\"\r\n                                  width=\"20\"\r\n                                  height=\"20\"\r\n                                />\r\n                              </Nav.Link>\r\n                            </div>\r\n                          </div>\r\n                        </Card.Subtitle>\r\n                      </Card.Header>\r\n                      <Card.Body>\r\n                        <Row>\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_PATIENTID\"\r\n                                  message=\"Patient ID\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .spatientid\r\n                                }\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_NATIONALID\"\r\n                                  message=\"National ID\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .snationalid\r\n                                }\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_DATEOFBIRTH\"\r\n                                  message=\"Date Of Birth\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {this.props.Login.masterData.SelectedPatient\r\n                                  .sdob === null ||\r\n                                  this.props.Login.masterData.SelectedPatient.sdob\r\n                                    .length === 0\r\n                                  ? \"-\"\r\n                                  : this.props.Login.masterData.SelectedPatient\r\n                                    .sdob}\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage id=\"IDS_AGE\" message=\"Age\" />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {this.props.Login.masterData.SelectedPatient\r\n                                  .sage === null ||\r\n                                  this.props.Login.masterData.SelectedPatient.sage\r\n                                    .length === 0\r\n                                  ? \"-\"\r\n                                  : this.props.Login.masterData.SelectedPatient\r\n                                    .sage}\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage id=\"IDS_SEX\" message=\"Sex\" />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {this.props.Login.masterData.SelectedPatient\r\n                                  .sgendername === null ||\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .sgendername.length === 0\r\n                                  ? \"-\"\r\n                                  : this.props.Login.masterData.SelectedPatient\r\n                                    .sgendername}\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_FATHERGUARDIANNAME\"\r\n                                  message=\"Father/Guardian Name\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .sfathername\r\n                                }\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_PHONENO\"\r\n                                  message=\"Phone No\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .sphoneno\r\n                                }\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md={8}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_ADDRESS\"\r\n                                  message=\"Address\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {this.props.Login.masterData.SelectedPatient\r\n                                  .saddress === null ||\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .saddress.length === 0\r\n                                  ? \"-\"\r\n                                  : this.props.Login.masterData.SelectedPatient\r\n                                    .saddress}\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n                        </Row>\r\n                        <Row>\r\n                          <Col>\r\n                            <DataGrid\r\n                              userRoleControlRights={\r\n                                this.state.userRoleControlRights\r\n                              }\r\n                              controlMap={this.state.controlMap}\r\n                              primaryKeyField={\"npreregno\"}\r\n                              data={\r\n                                this.props.Login.masterData &&\r\n                                this.props.Login.masterData[\"PatientHistory\"]\r\n                              }\r\n                              dataResult={process(\r\n                                this.props.Login.masterData &&\r\n                                (this.props.Login.masterData[\r\n                                  \"PatientHistory\"\r\n                                ] ||\r\n                                  []),\r\n                                this.state.dataState\r\n                              )}\r\n                              dataState={this.state.dataState}\r\n                              dataStateChange={this.dataStateChange}\r\n                              extractedColumnList={this.columnList}\r\n                              inputParam={this.props.Login.inputParam}\r\n                              userInfo={this.props.Login.userInfo}\r\n                              methodUrl={this.props.Login.inputParam.methodUrl}\r\n                              pageable={true}\r\n                              scrollable={\"scrollable\"}\r\n                              isActionRequired={false}\r\n                              isToolBarRequired={false}\r\n                              selectedId={null}\r\n                              hideColumnFilter={false}\r\n                              expandField={\"expanded\"}\r\n                              handleExpandChange={this.handleExpandChange}\r\n                              hasChild={true}\r\n                              childColumnList={this.childColumnList}\r\n                              childMappingField={\"npreregno\"}\r\n                              childList={this.props.Login.testMap || new Map()}\r\n                            />\r\n                          </Col>\r\n                        </Row>\r\n                      </Card.Body>\r\n                    </>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                </Card>\r\n              </ContentPanel>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n\r\n        {this.props.Login.openModal ? (\r\n          <SlideOutModal\r\n            show={this.props.Login.openModal}\r\n            closeModal={this.closeModal}\r\n            size={this.props.Login.loadEsign? \"lg\" :this.props.Login.openAdvFilter?\"xl\":\"lg\"}\r\n            operation={this.props.Login.openAdvFilter ? \"\" : this.props.Login.operation}\r\n            inputParam={this.props.Login.inputParam}\r\n            screenName={this.props.Login.screenName}\r\n            onSaveClick={this.props.Login.openAdvFilter ? this.onSaveGetClick : this.onSaveClick}\r\n            esign={this.props.Login.loadEsign}\r\n            validateEsign={this.validateEsign}\r\n            showSubmit={this.props.Login.openAdvFilter ? true : false}\r\n            hideSave={this.props.Login.openAdvFilter?true:false}\r\n            masterStatus={this.props.Login.masterStatus}\r\n            updateStore={this.props.updateStore}\r\n            selectedRecord={this.state.selectedRecord || {}}\r\n            mandatoryFields={this.props.Login.openAdvFilter ? \"\" : this.props.Login.openModal ? \"\" : { mandatoryFields }}\r\n\r\n            addComponent={\r\n              this.props.Login.loadEsign ? (\r\n                <Esign\r\n                  operation={this.props.Login.operation}\r\n                  onInputOnChange={this.onInputOnChange}\r\n                  inputParam={this.props.Login.inputParam}\r\n                  selectedRecord={this.state.selectedRecord || {}}\r\n                />\r\n              ) : this.props.Login.openAdvFilter ? \"\"//(\r\n                // <FilterQueryBuilder\r\n                //   fields={Fields}\r\n                //   onChange={this.onChange}\r\n                //   tree={this.state.tree}\r\n                //   config={this.state.config}\r\n                //   slideList={this.slideList}\r\n                //   slideResult={this.props.Login.slideResult}\r\n                //   controlMap={this.state.controlMap}\r\n                //   dataState={this.state.dataState}\r\n                //   dataStateChange={this.dataStateChange}\r\n                // />)\r\n                 : (\r\n                <AddPatient\r\n                  selectedRecord={this.state.selectedRecord || {}}\r\n                  onInputOnChange={this.onInputOnChange}\r\n                  onComboChange={this.onComboChange}\r\n                  onNumericInputOnChange={this.onNumericInputOnChange}\r\n                  handleDateChange={this.handleDateChange}\r\n                  genderList={this.props.Login.genderList || []}\r\n                  selectedPatient={\r\n                    this.props.Login.masterData.SelectedPatient || {}\r\n                  }\r\n                  operation={this.props.Login.operation}\r\n                  inputParam={this.props.Login.inputParam}\r\n                  userInfo={this.props.Login.userInfo}\r\n                  currentTime={this.props.Login.currentTime}\r\n                />\r\n              )\r\n            }\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n\r\n  componentDidUpdate(previousProps) {\r\n    if (\r\n      this.props.Login.selectedRecord !== previousProps.Login.selectedRecord\r\n    ) {\r\n      this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n    }\r\n    if (\r\n      this.props.Login.userInfo.nformcode !==\r\n      previousProps.Login.userInfo.nformcode\r\n    ) {\r\n      const userRoleControlRights = [];\r\n      if (this.props.Login.userRoleControlRights) {\r\n        this.props.Login.userRoleControlRights[\r\n          this.props.Login.userInfo.nformcode\r\n        ] &&\r\n          Object.values(\r\n            this.props.Login.userRoleControlRights[\r\n            this.props.Login.userInfo.nformcode\r\n            ]\r\n          ).map((item) => userRoleControlRights.push(item.ncontrolcode));\r\n      }\r\n      const controlMap = getControlMap(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode\r\n      );\r\n      this.setState({ userRoleControlRights, controlMap });\r\n    }\r\n  }\r\n\r\n  ConfirmDelete = (deleteId) => {\r\n    this.confirmMessage.confirm(\r\n      \"deleteMessage\",\r\n      this.props.intl.formatMessage({ id: \"IDS_DELETE\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_OK\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n      () =>\r\n        this.deletePatient(\r\n          \"Patient\",\r\n          this.props.Login.masterData.SelectedPatient,\r\n          \"delete\",\r\n          deleteId\r\n        )\r\n    );\r\n  };\r\n\r\n  closeModal = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n    let openModal = this.props.Login.openModal;\r\n    let selectedRecord = this.props.Login.selectedRecord;\r\n    let openAdvFilter=this.props.Login.openAdvFilter;\r\n    let slideResult=this.props.Login.slideResult;\r\n    let tree=this.state.tree;\r\n\r\n\r\n    let config = this.state.config;\r\n\r\n    if (this.props.Login.loadEsign) {\r\n      if (this.props.Login.operation === \"delete\") {\r\n        loadEsign = false;\r\n        openModal = false;\r\n        selectedRecord = {};\r\n      } else {\r\n        loadEsign = false;\r\n      }\r\n    } else {\r\n      openAdvFilter=false;\r\n      openModal = false;\r\n      selectedRecord = {};\r\n      slideResult={};\r\n      config = undefined;\r\n      tree=undefined;\r\n      this.setState({config:config,tree:tree})\r\n    }\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { openModal, loadEsign, selectedRecord, selectedId: null, openAdvFilter, slideResult ,config,tree},\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  onComboChange = (comboData, fieldName) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    selectedRecord[fieldName] = comboData;\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n  onNumericInputOnChange = (value, name) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    selectedRecord[name] = value;\r\n    this.setState({ selectedRecord });\r\n  };\r\n  // onFilterInputChange(immutableTree,){\r\n\r\n  //  let QbUtilss=JSON.stringify(QbUtils.sqlFormat(immutableTree, config));\r\n  //   console.log('QbUtils',QbUtilss)\r\n  // return QbUtilss\r\n\r\n  // };\r\n  onChange = (immutableTree, config) => {\r\n    let selectedRecord = this.state.selectedRecord || {};\r\n\r\n    // this.setState({ tree: immutableTree, config: config });\r\n    selectedRecord['filterquery'] = QbUtils.sqlFormat(immutableTree, config)\r\n    // const jsonTree = QbUtils.getTree(immutableTree);\r\n    this.setState({ tree: immutableTree, config: config, selectedRecord: selectedRecord });\r\n\r\n  };\r\n  onInputOnChange = (event) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n\r\n    if (event.target.type === \"checkbox\") {\r\n      selectedRecord[event.target.name] =\r\n        event.target.checked === true\r\n          ? transactionStatus.YES\r\n          : transactionStatus.NO;\r\n    } else {\r\n      if (event.target.name === \"sphoneno\") {\r\n        if (event.target.value !== \"\") {\r\n          event.target.value = validatePhoneNumber(event.target.value);\r\n          selectedRecord[event.target.name] =\r\n            event.target.value !== \"\"\r\n              ? event.target.value\r\n              : selectedRecord[event.target.name];\r\n        } else {\r\n          selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n      } else {\r\n        selectedRecord[event.target.name] = event.target.value;\r\n      }\r\n    }\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n  handleDateChange = (dateName, dateValue) => {\r\n    const { selectedRecord } = this.state;\r\n    selectedRecord[dateName] = dateValue;\r\n    const age = ageCalculate(dateValue);\r\n    selectedRecord[\"sage\"] = age;\r\n\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n  onSaveGetClick = () => {\r\n    let inputData = [];\r\n    inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n    inputData[\"filterquery\"] = this.state.selectedRecord['filterquery'];\r\n    this.searchRef.current.value = \"\";\r\n    let paramFlag = true;\r\n\r\n    const inputParam = {\r\n      classUrl: \"patient\",\r\n      methodUrl: \"ByPatient\",\r\n      inputData: inputData,\r\n      searchRef: this.searchRef,\r\n      isClearSearch: this.props.Login.isClearSearch,\r\n    };\r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (\r\n      showEsign(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode,\r\n        this.props.Login.ncontrolCode\r\n      )\r\n    ) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData }\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.getPatientDetailsByFilterQuery(inputParam, masterData);\r\n    }\r\n  };\r\n  \r\n  onSaveClick = (saveType, formRef) => {\r\n    let patientData = [];\r\n    patientData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n    let postParam = {\r\n      inputListName: \"PatientList\",\r\n      selectedObject: \"SelectedPatient\",\r\n      primaryKeyField: \"npatientcode\",\r\n    };\r\n\r\n    if (this.props.Login.operation === \"update\") {\r\n      postParam[\"primaryKeyValue\"] =\r\n        this.props.Login.masterData.SelectedPatient.npatientcode;\r\n      patientData[\"patient\"] = {\r\n        npatientcode: this.props.Login.masterData.SelectedPatient.npatientcode,\r\n        sfirstname: this.state.selectedRecord.sfirstname,\r\n        slastname: this.state.selectedRecord.slastname,\r\n        snationalid: this.state.selectedRecord.snationalid,\r\n        sage: this.state.selectedRecord.sage,\r\n        sphoneno: this.state.selectedRecord.sphoneno,\r\n        saddress: this.state.selectedRecord.saddress,\r\n        sfathername: this.state.selectedRecord.sfathername,\r\n        //    \"ddob\": formatInputDate(\r\n        //     this.state.selectedRecord[\"ddob\"],false)\r\n      };\r\n      \r\n    } else {\r\n      patientData[\"patient\"] = {\r\n        nsitecode: this.props.Login.userInfo.nmastersitecode,\r\n      };\r\n\r\n      this.patientFieldList.map((item) => {\r\n        return (patientData[\"patient\"][item] = this.state.selectedRecord[item]);\r\n      });\r\n    }\r\n\r\n    patientData[\"patient\"][\"ngendercode\"] = this.state.selectedRecord[\r\n      \"ngendercode\"\r\n    ]\r\n      ? this.state.selectedRecord[\"ngendercode\"].value\r\n      : transactionStatus.NA;\r\n\r\n    // if (patientData[\"patient\"][\"ddob\"] !== undefined\r\n    //     && patientData[\"patient\"][\"ddob\"] !== null && patientData[\"patient\"][\"ddob\"] !== \"\") {\r\n    //     patientData[\"patient\"][\"ddob\"] = formatInputDate(patientData[\"patient\"][\"ddob\"],false);\r\n\r\n    // }\r\n    if (this.state.selectedRecord[\"ddob\"]) {\r\n      patientData[\"patient\"][\"ddob\"] = formatInputDate(\r\n        this.state.selectedRecord[\"ddob\"],\r\n        false\r\n      );\r\n    }\r\n    const inputParam = {\r\n      classUrl: \"patient\",\r\n      methodUrl: \"Patient\",\r\n      inputData: patientData,\r\n      operation: this.props.Login.operation,\r\n      saveType,\r\n      formRef,\r\n      postParam,\r\n      searchRef: this.searchRef,\r\n      isClearSearch: this.props.Login.isClearSearch,\r\n    };\r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (\r\n      showEsign(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode,\r\n        this.props.Login.ncontrolCode\r\n      )\r\n    ) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          saveType,\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n    }\r\n  };\r\n\r\n  deletePatient = (methodUrl, selectedPatient, operation, ncontrolCode) => {\r\n    const postParam = {\r\n      inputListName: \"PatientList\",\r\n      selectedObject: \"SelectedPatient\",\r\n      primaryKeyField: \"npatientcode\",\r\n      primaryKeyValue: selectedPatient.npatientcode,\r\n      fetchUrl: \"patient/getPatient\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n    };\r\n\r\n    const inputParam = {\r\n      classUrl: this.props.Login.inputParam.classUrl,\r\n      methodUrl,\r\n      postParam,\r\n      inputData: {\r\n        userinfo: this.props.Login.userInfo,\r\n        patient: selectedPatient,\r\n      },\r\n      operation,\r\n      isClearSearch: this.props.Login.isClearSearch,\r\n    };\r\n\r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (\r\n      showEsign(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode,\r\n        ncontrolCode\r\n      )\r\n    ) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          openModal: true,\r\n          screenName: \"IDS_PATIENTMASTER\",\r\n          operation,\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n    }\r\n  };\r\n\r\n  validateEsign = () => {\r\n    const inputParam = {\r\n      inputData: {\r\n        userinfo: {\r\n          ...this.props.Login.userInfo,\r\n          sreason: this.state.selectedRecord[\"esigncomments\"],\r\n        },\r\n        password: this.state.selectedRecord[\"esignpassword\"],\r\n      },\r\n      screenData: this.props.Login.screenData,\r\n    };\r\n    this.props.validateEsignCredential(inputParam, \"openModal\");\r\n  };\r\n\r\n  handleExpandChange = (row, dataState) => {\r\n    const viewParam = {\r\n      userInfo: this.props.Login.userInfo,\r\n      primaryKeyField: \"npreregno\",\r\n      masterData: this.props.Login.masterData,\r\n    };\r\n\r\n    this.props.getTestParameter({\r\n      ...viewParam,\r\n      dataState,\r\n      primaryKeyValue: row[\"dataItem\"][viewParam.primaryKeyField],\r\n      viewRow: row[\"dataItem\"],\r\n    });\r\n  };\r\n\r\n  reloadData = () => {\r\n    this.searchRef.current.value = \"\";\r\n\r\n    const inputParam = {\r\n      inputData: { userinfo: this.props.Login.userInfo },\r\n      classUrl: \"patient\",\r\n      methodUrl: \"Patient\",\r\n      displayName: \"IDS_PATIENTMASTER\",\r\n      userInfo: this.props.Login.userInfo,\r\n      isClearSearch: this.props.Login.isClearSearch,\r\n    };\r\n\r\n    this.props.callService(inputParam);\r\n  };\r\n}\r\nexport default connect(mapStateToProps, {\r\n  callService,\r\n  crudMaster,\r\n  validateEsignCredential,\r\n  updateStore,\r\n  getPatientDetail,\r\n  getPatientComboService,\r\n  filterColumnData,\r\n  getTestParameter,\r\n  getPatientReport, getPatientDetailsByFilterQuery\r\n})(injectIntl(PatientMaster));\r\n"]},"metadata":{},"sourceType":"module"}