{"ast":null,"code":"import _objectSpread from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{Row,Col,Card,Nav,FormGroup,FormLabel}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus,faUserPlus}from'@fortawesome/free-solid-svg-icons';import{MediaLabel}from'../../../components/add-client.styles';import{FormattedMessage,injectIntl}from'react-intl';import{process}from'@progress/kendo-data-query';import SlideOutModal from'../../../components/slide-out-modal/SlideOutModal';import{toast}from'react-toastify';import AddParticipants from'./AddParticipants';import Esign from'../../audittrail/Esign';import{callService,crudMaster,getTrainingParticipantsComboDataService,getSectionUsersDataService,updateStore,validateEsignCredential}from'../../../actions';import{ProductList}from'../../product/product.styled';import{DEFAULT_RETURN}from'../../../actions/LoginTypes';import{ReactComponent as Reject}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/image/reject.svg\";import{showEsign,validateEmail,validatePhoneNumber}from'../../../components/CommonScript';import DataGrid from'../../../components/data-grid/data-grid.component';import{transactionStatus}from'../../../components/Enumeration';//import ReactTooltip from 'react-tooltip';\nvar mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var TrainingCertificateParticipantsTab=/*#__PURE__*/function(_React$Component){_inherits(TrainingCertificateParticipantsTab,_React$Component);var _super=_createSuper(TrainingCertificateParticipantsTab);function TrainingCertificateParticipantsTab(_props){var _this;_classCallCheck(this,TrainingCertificateParticipantsTab);_this=_super.call(this,_props);_this.participantDataStateChange=function(event){_this.setState({dataResult:process(_this.props.masterData[\"TrainingParticipants\"],event.dataState),dataState:event.dataState});};_this.expandChange=function(event){var isExpanded=event.dataItem.expanded===undefined?event.dataItem.aggregates:event.dataItem.expanded;event.dataItem.expanded=!isExpanded;_this.setState(_objectSpread({},_this.props));};_this.detailBand=function(props){var Dataitem=props.dataItem;var OptionalFieldList=[{datafield:\"ssectionname\",Column:\"Section Name\"},{datafield:\"sfullname\",Column:\"Participants Details\"}];return/*#__PURE__*/React.createElement(Row,null,OptionalFieldList.map(function(fields){return/*#__PURE__*/React.createElement(Col,{md:\"6\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:fields.Column,message:fields.Column})),/*#__PURE__*/React.createElement(MediaLabel,{className:\"readonly-text font-weight-normal\"},Dataitem[fields.datafield])));}));};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"||_this.props.operation===\"cancel\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.getTabContent=function(event){_this.setState({activeTab:event.currentTarget.name});};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;;if(fieldName===\"ndeputyusersitecode\"){_this.state.deputyUserList.map(function(item){if(item.nusersitecode===comboData.value){selectedRecord[\"sdeputyname\"]=item.sfirstname+\" \"+item.slastname;}return null;});}_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;else selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.handleChange=function(value,valueParam,isSection){if(value!==null){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[valueParam]=value;var SelectedTrainingCertificate=_this.props.masterData.SelectedTrainingCertificate.ntrainingcode||{};if(isSection===\"Section\"){_this.props.getSectionUsersDataService(value.value,selectedRecord,_this.props.Login.userInfo,SelectedTrainingCertificate);selectedRecord[\"nusercode\"]=undefined;_this.setState({selectedRecord:selectedRecord});}else{_this.setState({selectedRecord:selectedRecord});}}};_this.onSaveClick=function(saveType,formRef){//add / edit  \nvar inputParam={};if(_this.props.screenName===\"IDS_PARTICIPANTSDETAILS\"){inputParam=_this.saveParticipantDetails(saveType,formRef);}if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}};_this.oninviteListClick=function(row){if(_this.props.masterData.TrainingParticipants.ntransactionstatus===transactionStatus.CANCELLED){toast.warn(_this.props.intl.formatMessage({id:_this.props.masterData.TrainingParticipants.stranstatus}));}else{var ncontrolCode=_this.props.controlMap.has(\"SendinvitationTrainingCertificate\")&&_this.props.controlMap.get(\"SendinvitationTrainingCertificate\").ncontrolcode;var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam=undefined;inputData[\"trainingparticipants\"]={\"nparticipantcode\":row.nparticipantcode};inputData[\"trainingparticipants\"][\"ntrainingcode\"]=_this.props.Login.masterData.TrainingParticipants[0].ntrainingcode;// inputData[\"trainingparticipants\"] = this.props.Login.masterData.TrainingParticipants;\npostParam={inputListName:\"TrainingParticipants\",selectedObject:\"TrainingParticipants\",primaryKeyField:\"nparticipantcode\"};var inputParam={classUrl:'trainingcertificate',methodUrl:\"TrainingParticipants\",inputData:inputData,operation:\"invite\",postParam:postParam,selectedId:row.nparticipantcode};var saveType;var masterData=_this.props.Login.masterData;var esignNeeded=showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType,openModal:true,operation:\"invite\"}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}};_this.onCancelListClick=function(row){//if (this.props.Login.masterData.SelectedTrainingCertificate.ntransactionstatus === transactionStatus.DRAFT) {\nvar ncontrolCode=_this.props.controlMap.has(\"CancelTrainingCertificate\")&&_this.props.controlMap.get(\"CancelTrainingCertificate\").ncontrolcode;var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;//add               \nvar postParam=undefined;inputData[\"trainingparticipants\"]={\"nparticipantcode\":row.nparticipantcode};inputData[\"trainingparticipants\"][\"ntrainingcode\"]=_this.props.Login.masterData.TrainingParticipants[0].ntrainingcode;postParam={inputListName:\"TrainingParticipants\",selectedObject:\"TrainingParticipants\",primaryKeyField:\"nparticipantcode\"};var inputParam={classUrl:'trainingcertificate',methodUrl:\"TrainingParticipants\",inputData:inputData,operation:\"cancel\",postParam:postParam,selectedId:row.nparticipantcode};var saveType;var masterData=_this.props.Login.masterData;var esignNeeded=showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType,openModal:true,operation:\"cancel\"}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};_this.detailedFieldList=[{dataField:\"ssectionname\",idsName:\"IDS_SECTIONNAME\",columnSize:\"4\"},{dataField:\"sfullname\",idsName:\"IDS_PARTICIPANTS\",columnSize:\"4\"}// { dataField: \"sfaxno\", idsName: \"IDS_FAXNO\", columnSize:\"4\" },\n// //{ dataField: \"sdisplaystatus\", idsName: \"IDS_DISPLAYSTATUS\" },\n//{ \"idsName\": \"IDS_DISPLAYSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"20%\", \"isIdsField\": true, \"controlName\": \"ndefaultstatus\" }\n];var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={isOpen:false,selectedRecord:{},dataResult:[],activeTab:'TrainingParticipants-tab',dataState:dataState};_this.mandatoryColumnList=[{\"idsName\":\"IDS_SECTION\",\"dataField\":\"nsectioncode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"select\"},{\"idsName\":\"IDS_PARTICIPANTNAME\",\"dataField\":\"nusercode\",\"width\":\"150px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];_this.participantsColumnList=[{\"idsName\":\"IDS_PARTICIPANTNAME\",\"dataField\":\"sfullname\",\"width\":\"150px\"},{\"idsName\":\"IDS_PARTICIPANTSTATUS\",\"dataField\":\"sdisplaystatus\",\"width\":\"150px\"}];return _this;}_createClass(TrainingCertificateParticipantsTab,[{key:\"render\",value:function render(){var _this2=this;var addParticipantsId=this.props.controlMap.has(\"AddparticipantsTrainingCertificate\")&&this.props.controlMap.get(\"AddparticipantsTrainingCertificate\").ncontrolcode;var iniviteParticipantsId=this.props.controlMap.has(\"SendinvitationTrainingCertificate\")&&this.props.controlMap.get(\"SendinvitationTrainingCertificate\").ncontrolcode;var cancelParticipantsId=this.props.controlMap.has(\"CancelTrainingCertificate\")&&this.props.controlMap.get(\"CancelTrainingCertificate\").ncontrolcode;var ParticipantsAddParam={screenName:\"ParticipantsDetails\",operation:\"create\",primaryKeyField:\"nparticipantcode\",masterData:this.props.masterData,userInfo:this.props.userInfo,ncontrolCode:addParticipantsId};var ParticipantsIniviteParam={screenName:\"ParticipantsDetails\",operation:\"invite\",primaryKeyField:\"nparticipantcode\",masterData:this.props.masterData,userInfo:this.props.userInfo,ncontrolCode:iniviteParticipantsId};var ParticipantsCancelParam={screenName:\"ParticipantsDetails\",methodUrl:\"trainingcertificate\",operation:\"cancel\",ncontrolCode:cancelParticipantsId};var mandatoryFields=[];this.mandatoryColumnList.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card//className=\"at-tabs border-0\"\n,null,/*#__PURE__*/React.createElement(Card.Header,{className:\"add-txt-btn\"},/*#__PURE__*/React.createElement(\"strong\",null,\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_PARTICIPANTSDETAILS\",defaultMessage:\"Participants Details\"}))),/*#__PURE__*/React.createElement(Card.Body,{style:{paddingTop:'unset'}},/*#__PURE__*/React.createElement(Row,{className:\"no-gutters text-right border-bottom pt-2 pb-2\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{className:\"add-txt-btn\",hidden:this.props.userRoleControlRights.indexOf(addParticipantsId)===-1,onClick:function onClick(){return _this2.props.getTrainingParticipantsComboDataService(ParticipantsAddParam,_this2.props.Login.masterData);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_PARTICIPANTSDETAILS\",defaultMessage:\"Participants Details\"}))))),/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:\"nparticipantcode\",expandField:\"expanded\",detailedFieldList:this.detailedFieldList,data:this.props.masterData[\"TrainingParticipants\"],dataResult:process(this.props.masterData[\"TrainingParticipants\"],this.state.dataState),dataState:this.state.dataState,dataStateChange:this.participantDataStateChange,extractedColumnList:this.participantsColumnList,controlMap:this.props.controlMap,userRoleControlRights:this.props.userRoleControlRights,inputParam:this.props.inputParam,userInfo:this.props.userInfo,methodUrl:\"TrainingParticipants\",addRecord:function addRecord(){return _this2.props.getTrainingParticipantsComboDataService(ParticipantsAddParam,_this2.props.Login.masterData);},fetchRecord:this.props.getTrainingParticipantsComboDataService,editParam:ParticipantsIniviteParam,deleteRecord:this.deleteRecord,deleteParam:ParticipantsCancelParam,pageable:true,scrollable:\"scrollable\",isActionRequired:true,isToolBarRequired:false,selectedId:this.props.selectedId,oldActionRequired:false,hasDynamicColSize:true,actionIcons:// <>\n//     <ProductList className=\"d-flex product-category float-right icon-group-wrap\">\n//         <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\n//             hidden={this.props.userRoleControlRights.indexOf(iniviteParticipantsId) === -1}\n//             data-tip={this.props.intl.formatMessage({ id: \"IDS_INVITE\" })}\n//             data-for=\"tooltip_list_wrap\"\n//             onClick={() => this.oninviteListClick()}\n//         >\n//             <FontAwesomeIcon icon={faUserPlus} /> { }\n//         </Nav.Link>\n//         {/* </div>\n//         </Col>\n//     </Row> */}\n//         <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\n//             hidden={this.props.userRoleControlRights.indexOf(cancelParticipantsId) === -1}\n//             data-tip={this.props.intl.formatMessage({ id: \"IDS_TRAININGSCHEDULECANCEL\" })}\n//             data-for=\"tooltip_list_wrap\"\n//             onClick={() => this.onCancelListClick()}\n//         >\n//             <Reject className=\"custom_icons\" width=\"20\" height=\"20\" />\n//         </Nav.Link>\n//     </ProductList>\n// </>\n[{title:this.props.intl.formatMessage({id:\"IDS_INVITE\"}),controlname:\"faUserPlus\",objectName:\"mastertoedit\",hidden:this.props.userRoleControlRights.indexOf(iniviteParticipantsId)===-1,onClick:this.oninviteListClick,inputData:{}},{title:this.props.intl.formatMessage({id:\"IDS_TRAININGSCHEDULECANCEL\"}),controlname:\"reject\",objectName:\"mastertoedit\",hidden:this.props.userRoleControlRights.indexOf(cancelParticipantsId)===-1,onClick:this.onCancelListClick,inputData:{}}]}))))))),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.props.screenName,onSaveClick:this.onSaveClick,updateStore:this.props.updateStore,esign:this.props.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,formatMessage:this.props.formatMessage,onInputOnChange:this.onInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(AddParticipants,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,handleChange:this.handleChange,formatMessage:this.props.formatMessage,section:this.props.Login.section||[],sectionUsers:this.props.Login.sectionUsers||[],nusercode:this.props.Login.nusercode||[],nsectioncode:this.props.Login.nsectioncode||[],selectedTrainingParticipants:this.props.masterData.SelectedTrainingParticipants||{},extractedColumnList:this.extractedColumnList})}));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.masterData!==previousProps.masterData){var dataState=this.state.dataState;if(this.props.dataState===undefined){dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};}var isOpen=false;if(this.props.errorCode!==undefined&&(this.state.operation===\"create\"||this.state.operation===\"update\")){isOpen=true;}this.setState({isOpen:isOpen,activeTab:'TrainingParticipants-tab',dataState:dataState});}if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}}},{key:\"saveParticipantDetails\",value:function saveParticipantDetails(saveType,formRef){var _this3=this;var inputData=[];var dataState=undefined;inputData[\"userinfo\"]=this.props.userInfo;var selectedId=null;var trainingparticipants=[];this.props.selectedRecord.nusercode&&this.props.selectedRecord.nusercode.map(function(participants){trainingparticipants.push({ntrainingcode:_this3.props.masterData.SelectedTrainingCertificate.ntrainingcode,nusercode:participants.item.nusercode});});inputData[\"trainingparticipants\"]=trainingparticipants;var inputParam={classUrl:\"trainingcertificate\",methodUrl:\"TrainingParticipants\",inputData:inputData,selectedId:selectedId,operation:this.props.operation,saveType:saveType,formRef:formRef,dataState:dataState};return inputParam;}}]);return TrainingCertificateParticipantsTab;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,getTrainingParticipantsComboDataService:getTrainingParticipantsComboDataService,getSectionUsersDataService:getSectionUsersDataService,updateStore:updateStore,validateEsignCredential:validateEsignCredential})(injectIntl(TrainingCertificateParticipantsTab));","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/pages/competencemanagement/trainingcertificate/TrainingCertificateParticipantsTab.jsx"],"names":["React","connect","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faPlus","faUserPlus","MediaLabel","FormattedMessage","injectIntl","process","SlideOutModal","toast","AddParticipants","Esign","callService","crudMaster","getTrainingParticipantsComboDataService","getSectionUsersDataService","updateStore","validateEsignCredential","ProductList","DEFAULT_RETURN","showEsign","validateEmail","validatePhoneNumber","DataGrid","transactionStatus","mapStateToProps","state","Login","TrainingCertificateParticipantsTab","props","participantDataStateChange","event","setState","dataResult","masterData","dataState","expandChange","isExpanded","dataItem","expanded","undefined","aggregates","detailBand","Dataitem","OptionalFieldList","datafield","Column","map","fields","closeModal","loadEsign","openChildModal","selectedRecord","operation","updateInfo","typeName","data","selectedId","getTabContent","activeTab","currentTarget","name","onComboChange","comboData","fieldName","deputyUserList","item","nusersitecode","value","sfirstname","slastname","onInputOnChange","target","type","checked","ACTIVE","DEACTIVE","YES","NO","handleChange","valueParam","isSection","SelectedTrainingCertificate","ntrainingcode","userInfo","onSaveClick","saveType","formRef","inputParam","screenName","saveParticipantDetails","esignRights","nformcode","ncontrolCode","screenData","oninviteListClick","row","TrainingParticipants","ntransactionstatus","CANCELLED","warn","intl","formatMessage","id","stranstatus","controlMap","has","get","ncontrolcode","inputData","postParam","nparticipantcode","inputListName","selectedObject","primaryKeyField","classUrl","methodUrl","esignNeeded","userRoleControlRights","openModal","onCancelListClick","validateEsign","sreason","password","detailedFieldList","dataField","idsName","columnSize","skip","take","settings","parseInt","isOpen","mandatoryColumnList","participantsColumnList","addParticipantsId","iniviteParticipantsId","cancelParticipantsId","ParticipantsAddParam","ParticipantsIniviteParam","ParticipantsCancelParam","mandatoryFields","forEach","mandatory","push","paddingTop","indexOf","deleteRecord","title","controlname","objectName","hidden","onClick","section","sectionUsers","nusercode","nsectioncode","SelectedTrainingParticipants","extractedColumnList","previousProps","errorCode","trainingparticipants","participants","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faUserPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { MediaLabel } from '../../../components/add-client.styles';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport SlideOutModal from '../../../components/slide-out-modal/SlideOutModal';\r\nimport { toast } from 'react-toastify';\r\nimport AddParticipants from './AddParticipants';\r\nimport Esign from '../../audittrail/Esign';\r\nimport { callService, crudMaster, getTrainingParticipantsComboDataService, getSectionUsersDataService, updateStore, validateEsignCredential } from '../../../actions';\r\nimport { ProductList } from '../../product/product.styled';\r\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes';\r\nimport { ReactComponent as Reject } from '../../../assets/image/reject.svg'\r\nimport { showEsign, validateEmail, validatePhoneNumber } from '../../../components/CommonScript';\r\nimport DataGrid from '../../../components/data-grid/data-grid.component';\r\nimport { transactionStatus } from '../../../components/Enumeration';\r\n//import ReactTooltip from 'react-tooltip';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass TrainingCertificateParticipantsTab extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        this.state = {\r\n            isOpen: false, selectedRecord: {}, dataResult: [],\r\n            activeTab: 'TrainingParticipants-tab',\r\n            dataState: dataState\r\n        };\r\n\r\n\r\n        this.mandatoryColumnList =\r\n            [{ \"idsName\": \"IDS_SECTION\", \"dataField\": \"nsectioncode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"select\" },\r\n            { \"idsName\": \"IDS_PARTICIPANTNAME\", \"dataField\": \"nusercode\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n            ];\r\n\r\n\r\n        this.participantsColumnList =\r\n            [{ \"idsName\": \"IDS_PARTICIPANTNAME\", \"dataField\": \"sfullname\", \"width\": \"150px\" },\r\n            { \"idsName\": \"IDS_PARTICIPANTSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"150px\" }\r\n            ];\r\n    }\r\n\r\n    participantDataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.props.masterData[\"TrainingParticipants\"], event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const addParticipantsId = this.props.controlMap.has(\"AddparticipantsTrainingCertificate\") && this.props.controlMap.get(\"AddparticipantsTrainingCertificate\").ncontrolcode\r\n        const iniviteParticipantsId = this.props.controlMap.has(\"SendinvitationTrainingCertificate\") && this.props.controlMap.get(\"SendinvitationTrainingCertificate\").ncontrolcode;\r\n        const cancelParticipantsId = this.props.controlMap.has(\"CancelTrainingCertificate\") && this.props.controlMap.get(\"CancelTrainingCertificate\").ncontrolcode\r\n\r\n\r\n        const ParticipantsAddParam = {\r\n            screenName: \"ParticipantsDetails\", operation: \"create\", primaryKeyField: \"nparticipantcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addParticipantsId\r\n        };\r\n\r\n        const ParticipantsIniviteParam = {\r\n            screenName: \"ParticipantsDetails\", operation: \"invite\", primaryKeyField: \"nparticipantcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: iniviteParticipantsId\r\n        };\r\n\r\n        const ParticipantsCancelParam = { screenName: \"ParticipantsDetails\", methodUrl: \"trainingcertificate\", operation: \"cancel\", ncontrolCode: cancelParticipantsId };\r\n        const mandatoryFields = [];\r\n        this.mandatoryColumnList.forEach(item => item.mandatory === true ?\r\n            mandatoryFields.push(item) : \"\"\r\n        );\r\n        return (\r\n            <>\r\n                <Row className=\"no-gutters\">\r\n                    <Col md={12}>\r\n                        <Card //className=\"at-tabs border-0\"\r\n                        >\r\n                            <Card.Header className=\"add-txt-btn\">\r\n                                <strong> <FormattedMessage id=\"IDS_PARTICIPANTSDETAILS\" defaultMessage=\"Participants Details\" /></strong>\r\n                            </Card.Header>\r\n                            <Card.Body style={{ paddingTop: 'unset' }}>\r\n                                <Row className=\"no-gutters text-right border-bottom pt-2 pb-2\" >\r\n                                    <Col md={12}>\r\n                                        <div className=\"d-flex justify-content-end\">\r\n\r\n                                            <Nav.Link className=\"add-txt-btn\" hidden={this.props.userRoleControlRights.indexOf(addParticipantsId) === -1}\r\n\r\n                                                onClick={() => this.props.getTrainingParticipantsComboDataService(ParticipantsAddParam, this.props.Login.masterData)}>\r\n                                                <FontAwesomeIcon icon={faPlus} /> { }\r\n                                                <FormattedMessage id='IDS_PARTICIPANTSDETAILS' defaultMessage='Participants Details' />\r\n                                            </Nav.Link>\r\n                                        </div>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row className=\"no-gutters\">\r\n                                    <Col md={12}>\r\n                                        <DataGrid\r\n                                            primaryKeyField={\"nparticipantcode\"}\r\n                                            expandField=\"expanded\"\r\n                                            detailedFieldList={this.detailedFieldList}\r\n                                            data={this.props.masterData[\"TrainingParticipants\"]}\r\n                                            dataResult={process(this.props.masterData[\"TrainingParticipants\"], this.state.dataState)}\r\n                                            dataState={this.state.dataState}\r\n                                            dataStateChange={this.participantDataStateChange}\r\n                                            extractedColumnList={this.participantsColumnList}\r\n                                            controlMap={this.props.controlMap}\r\n                                            userRoleControlRights={this.props.userRoleControlRights}\r\n                                            inputParam={this.props.inputParam}\r\n                                            userInfo={this.props.userInfo}\r\n                                            methodUrl=\"TrainingParticipants\"\r\n                                            addRecord={() => this.props.getTrainingParticipantsComboDataService(ParticipantsAddParam, this.props.Login.masterData)}\r\n                                            fetchRecord={this.props.getTrainingParticipantsComboDataService}\r\n                                            editParam={ParticipantsIniviteParam}\r\n                                            deleteRecord={this.deleteRecord}\r\n                                            deleteParam={ParticipantsCancelParam}\r\n                                            pageable={true}\r\n                                            scrollable={\"scrollable\"}\r\n                                            isActionRequired={true}\r\n                                            isToolBarRequired={false}\r\n                                            selectedId={this.props.selectedId}\r\n                                            oldActionRequired={false}\r\n                                            hasDynamicColSize={true}\r\n                                            actionIcons={\r\n                                                // <>\r\n                                                //     <ProductList className=\"d-flex product-category float-right icon-group-wrap\">\r\n                                                //         <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\r\n                                                //             hidden={this.props.userRoleControlRights.indexOf(iniviteParticipantsId) === -1}\r\n                                                //             data-tip={this.props.intl.formatMessage({ id: \"IDS_INVITE\" })}\r\n                                                //             data-for=\"tooltip_list_wrap\"\r\n                                                //             onClick={() => this.oninviteListClick()}\r\n\r\n                                                //         >\r\n                                                //             <FontAwesomeIcon icon={faUserPlus} /> { }\r\n\r\n                                                //         </Nav.Link>\r\n\r\n\r\n                                                //         {/* </div>\r\n                                                //         </Col>\r\n                                                //     </Row> */}\r\n\r\n                                                //         <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\r\n                                                //             hidden={this.props.userRoleControlRights.indexOf(cancelParticipantsId) === -1}\r\n                                                //             data-tip={this.props.intl.formatMessage({ id: \"IDS_TRAININGSCHEDULECANCEL\" })}\r\n                                                //             data-for=\"tooltip_list_wrap\"\r\n                                                //             onClick={() => this.onCancelListClick()}\r\n                                                //         >\r\n                                                //             <Reject className=\"custom_icons\" width=\"20\" height=\"20\" />\r\n\r\n                                                //         </Nav.Link>\r\n\r\n                                                //     </ProductList>\r\n\r\n                                                // </>\r\n                                                [\r\n                                                    {\r\n                                                        title: this.props.intl.formatMessage({ id: \"IDS_INVITE\" }),\r\n                                                        controlname: \"faUserPlus\",\r\n                                                        objectName: \"mastertoedit\",\r\n                                                        hidden: this.props.userRoleControlRights.indexOf(iniviteParticipantsId) === -1,\r\n                                                        onClick: this.oninviteListClick,\r\n                                                        inputData: {}\r\n                                                    },{\r\n                                                        title: this.props.intl.formatMessage({ id: \"IDS_TRAININGSCHEDULECANCEL\" }),\r\n                                                        controlname: \"reject\",\r\n                                                        objectName: \"mastertoedit\",\r\n                                                        hidden: this.props.userRoleControlRights.indexOf(cancelParticipantsId) === -1,\r\n                                                        onClick: this.onCancelListClick,\r\n                                                        inputData: {}\r\n                                                    }\r\n                                                ]\r\n                                            }\r\n                                        />\r\n\r\n                                    </Col>\r\n                                </Row>\r\n\r\n\r\n                            </Card.Body>\r\n\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal show={this.props.openChildModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.props.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        updateStore={this.props.updateStore}\r\n                        esign={this.props.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={mandatoryFields}\r\n                        addComponent={this.props.loadEsign ?\r\n\r\n\r\n                            <Esign operation={this.props.operation}\r\n                                formatMessage={this.props.formatMessage}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> :\r\n                            <AddParticipants\r\n\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                handleChange={this.handleChange}\r\n                                formatMessage={this.props.formatMessage}\r\n                                section={this.props.Login.section || []}\r\n                                sectionUsers={this.props.Login.sectionUsers || []}\r\n\r\n                                nusercode={this.props.Login.nusercode || []}\r\n                                nsectioncode={this.props.Login.nsectioncode || []}\r\n                                selectedTrainingParticipants={this.props.masterData.SelectedTrainingParticipants || {}}\r\n                                extractedColumnList={this.extractedColumnList}\r\n                            />\r\n\r\n                        }\r\n\r\n                    />\r\n                }\r\n            </>\r\n        )\r\n\r\n    }\r\n\r\n    expandChange = (event) => {\r\n        const isExpanded =\r\n            event.dataItem.expanded === undefined ?\r\n                event.dataItem.aggregates : event.dataItem.expanded;\r\n        event.dataItem.expanded = !isExpanded;\r\n        this.setState({ ...this.props });\r\n    }\r\n    detailBand = (props) => {\r\n\r\n        const Dataitem = props.dataItem\r\n        const OptionalFieldList = [\r\n            { datafield: \"ssectionname\", Column: \"Section Name\" },\r\n            { datafield: \"sfullname\", Column: \"Participants Details\" },\r\n\r\n        ];\r\n        return (<Row>\r\n            {OptionalFieldList.map((fields) => {\r\n                return (\r\n                    <Col md='6'>\r\n                        <FormGroup>\r\n                            <FormLabel><FormattedMessage id={fields.Column} message={fields.Column} /></FormLabel>\r\n                            <MediaLabel className=\"readonly-text font-weight-normal\">{Dataitem[fields.datafield]}</MediaLabel>\r\n                        </FormGroup>\r\n                    </Col>\r\n                )\r\n            })\r\n            }\r\n        </Row>)\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\" || this.props.operation === \"cancel\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord, selectedId: null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    getTabContent = (event) => {\r\n        this.setState({ activeTab: event.currentTarget.name });\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;;\r\n\r\n        if (fieldName === \"ndeputyusersitecode\") {\r\n            this.state.deputyUserList.map(item => {\r\n                if (item.nusersitecode === comboData.value) {\r\n                    selectedRecord[\"sdeputyname\"] = item.sfirstname + \" \" + item.slastname\r\n                }\r\n                return null;\r\n            })\r\n        }\r\n        this.setState({ selectedRecord });\r\n\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"ntransactionstatus\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            else\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n\r\n\r\n            selectedRecord[event.target.name] = event.target.value;\r\n\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    handleChange = (value, valueParam, isSection) => {\r\n\r\n        if (value !== null) {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n\r\n            selectedRecord[valueParam] = value;\r\n            const SelectedTrainingCertificate = this.props.masterData.SelectedTrainingCertificate.ntrainingcode || {};\r\n\r\n            if (isSection === \"Section\") {\r\n                this.props.getSectionUsersDataService(value.value, selectedRecord, this.props.Login.userInfo, SelectedTrainingCertificate);\r\n\r\n                selectedRecord[\"nusercode\"] = undefined;\r\n\r\n                this.setState({ selectedRecord });\r\n            }\r\n            else {\r\n                this.setState({ selectedRecord });\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n\r\n            let { dataState } = this.state;\r\n            if (this.props.dataState === undefined) {\r\n                dataState = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5 }\r\n            }\r\n\r\n            let isOpen = false;\r\n            if (this.props.errorCode !== undefined && (this.state.operation === \"create\" || this.state.operation === \"update\")) {\r\n                isOpen = true;\r\n            }\r\n            this.setState({ isOpen, activeTab: 'TrainingParticipants-tab', dataState });\r\n        }\r\n\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        //add / edit  \r\n        let inputParam = {};\r\n\r\n        if (this.props.screenName === \"IDS_PARTICIPANTSDETAILS\") {\r\n            inputParam = this.saveParticipantDetails(saveType, formRef);\r\n        }\r\n\r\n\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n        }\r\n    }\r\n\r\n\r\n    saveParticipantDetails(saveType, formRef) {\r\n        let inputData = [];\r\n        let dataState = undefined;\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n\r\n        let selectedId = null;\r\n\r\n        let trainingparticipants = [];\r\n\r\n\r\n        this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\r\n            trainingparticipants.push({\r\n                ntrainingcode: this.props.masterData.SelectedTrainingCertificate.ntrainingcode,\r\n                nusercode: participants.item.nusercode\r\n            })\r\n\r\n        })\r\n\r\n\r\n\r\n        inputData[\"trainingparticipants\"] = trainingparticipants\r\n\r\n\r\n\r\n\r\n        const inputParam = {\r\n            classUrl: \"trainingcertificate\",\r\n            methodUrl: \"TrainingParticipants\",\r\n            inputData: inputData, selectedId,\r\n            operation: this.props.operation, saveType, formRef, dataState\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n\r\n    oninviteListClick = (row) => {\r\n\r\n        if (this.props.masterData.TrainingParticipants.ntransactionstatus === transactionStatus.CANCELLED) {\r\n            toast.warn(this.props.intl.formatMessage({ id: this.props.masterData.TrainingParticipants.stranstatus }));\r\n        }\r\n        else {\r\n            const ncontrolCode = this.props.controlMap.has(\"SendinvitationTrainingCertificate\") && this.props.controlMap.get(\"SendinvitationTrainingCertificate\").ncontrolcode\r\n            let inputData = [];\r\n            inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n            let postParam = undefined;\r\n            inputData[\"trainingparticipants\"] = {\r\n                \"nparticipantcode\": row.nparticipantcode\r\n            };\r\n            inputData[\"trainingparticipants\"][\"ntrainingcode\"] = this.props.Login.masterData.TrainingParticipants[0].ntrainingcode;\r\n            // inputData[\"trainingparticipants\"] = this.props.Login.masterData.TrainingParticipants;\r\n            postParam = { inputListName: \"TrainingParticipants\", selectedObject: \"TrainingParticipants\", primaryKeyField: \"nparticipantcode\" };\r\n            const inputParam = {\r\n                classUrl: 'trainingcertificate',\r\n                methodUrl: \"TrainingParticipants\",\r\n                inputData: inputData,\r\n                operation: \"invite\", postParam,\r\n                selectedId: row.nparticipantcode\r\n            }\r\n            let saveType;\r\n\r\n            const masterData = this.props.Login.masterData;\r\n\r\n            const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode);\r\n\r\n\r\n\r\n            if (esignNeeded) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData }, saveType, openModal: true, operation: \"invite\"\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n\r\n\r\n    onCancelListClick = (row) => {\r\n        //if (this.props.Login.masterData.SelectedTrainingCertificate.ntransactionstatus === transactionStatus.DRAFT) {\r\n        const ncontrolCode = this.props.controlMap.has(\"CancelTrainingCertificate\") && this.props.controlMap.get(\"CancelTrainingCertificate\").ncontrolcode\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        //add               \r\n        let postParam = undefined;\r\n        inputData[\"trainingparticipants\"] = { \"nparticipantcode\": row.nparticipantcode };\r\n        inputData[\"trainingparticipants\"][\"ntrainingcode\"] = this.props.Login.masterData.TrainingParticipants[0].ntrainingcode;\r\n\r\n        postParam = { inputListName: \"TrainingParticipants\", selectedObject: \"TrainingParticipants\", primaryKeyField: \"nparticipantcode\" };\r\n\r\n\r\n        const inputParam = {\r\n            classUrl: 'trainingcertificate',\r\n            methodUrl: \"TrainingParticipants\",\r\n            inputData: inputData,\r\n            operation: \"cancel\", postParam,\r\n            selectedId: row.nparticipantcode\r\n        }\r\n        let saveType;\r\n\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode);\r\n        if (esignNeeded) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType, openModal: true, operation: \"cancel\"\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n\r\n\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n\r\n    detailedFieldList = [\r\n        { dataField: \"ssectionname\", idsName: \"IDS_SECTIONNAME\", columnSize: \"4\" },\r\n        { dataField: \"sfullname\", idsName: \"IDS_PARTICIPANTS\", columnSize: \"4\" },\r\n        // { dataField: \"sfaxno\", idsName: \"IDS_FAXNO\", columnSize:\"4\" },\r\n        // //{ dataField: \"sdisplaystatus\", idsName: \"IDS_DISPLAYSTATUS\" },\r\n        //{ \"idsName\": \"IDS_DISPLAYSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"20%\", \"isIdsField\": true, \"controlName\": \"ndefaultstatus\" }\r\n\r\n    ];\r\n}\r\n\r\nexport default connect(mapStateToProps, { callService, crudMaster, getTrainingParticipantsComboDataService, getSectionUsersDataService, updateStore, validateEsignCredential })(injectIntl(TrainingCertificateParticipantsTab));\r\n\r\n"]},"metadata":{},"sourceType":"module"}