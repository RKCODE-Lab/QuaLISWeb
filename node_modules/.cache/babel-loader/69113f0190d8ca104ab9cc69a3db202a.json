{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nvar _a;\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { Draggable, Keys, getTabIndex } from '@progress/kendo-react-common';\nimport { SortableOnDragStartEvent } from './events/SortableOnDragStartEvent';\nimport { SortableOnDragOverEvent } from './events/SortableOnDragOverEvent';\nimport { SortableOnDragEndEvent } from './events/SortableOnDragEndEvent';\nimport { SortableOnNavigateEvent } from './events/SortableOnNavigateEvent';\nimport { provideLocalizationService, registerForLocalization } from '@progress/kendo-react-intl';\nimport { messages, noData } from './messages';\nimport { find, findIndex, hasClasses, isFocusable, closest, relativeContextElement } from './utils/utils';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\nimport { getter } from '@progress/kendo-react-common';\n/**\n * @hidden\n */\n\nvar ANIMATION_DURATION = 200;\n/**\n * @hidden\n */\n\nvar SORTABLE_ITEM_ATTRIBUTE = 'data-sortable-id';\n/**\n * @hidden\n */\n\nvar SORTABLE_COMPONENT_ATTRIBUTE = 'data-sortable-component';\n/**\n * @hidden\n */\n\nvar SORTABLE_ATTRIBUTE_PROP = (_a = {}, _a[SORTABLE_COMPONENT_ATTRIBUTE] = true, _a);\n\nvar Sortable = function (_super) {\n  __extends(Sortable, _super);\n\n  function Sortable(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.state = {\n      clientX: 0,\n      clientY: 0,\n      isDragging: false,\n      activeId: '',\n      dragCueWidth: 0,\n      dragCueHeight: 0\n    };\n    _this.isRtl = false;\n    _this.itemRefsMap = {};\n    _this.oldSizesMap = {};\n    _this.animatingItemMap = {};\n    _this.draggableRef = null;\n    _this.isUnmounted = false;\n    _this.focusActiveId = false;\n    _this.isKeyboardNavigated = false;\n    _this.isDragPrevented = false;\n    /**\n     * @hidden\n     */\n\n    _this.swapItems = function (newState, source, destination) {\n      var b = newState[source];\n      newState[source] = newState[destination];\n      newState[destination] = b;\n      source = destination;\n      return source;\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.generateNewState = function (prevIndex, nextIndex) {\n      var data = _this.props.data;\n\n      var newState = __spreadArray([], data, true);\n\n      var isReversed = prevIndex > nextIndex;\n\n      if (isReversed) {\n        for (var i = prevIndex - 1; i >= nextIndex; i--) {\n          var nextItem = data[i];\n\n          if (!_this.isItemDisabled(nextItem)) {\n            prevIndex = _this.swapItems(newState, prevIndex, i);\n          }\n        }\n      } else {\n        for (var i = prevIndex + 1; i <= nextIndex; i++) {\n          var nextItem = data[i];\n\n          if (!_this.isItemDisabled(nextItem)) {\n            prevIndex = _this.swapItems(newState, prevIndex, i);\n          }\n        }\n      }\n\n      return newState;\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.closestSortableItem = function (target) {\n      var currentTarget = target;\n\n      while (currentTarget) {\n        var id = currentTarget.getAttribute(SORTABLE_ITEM_ATTRIBUTE);\n\n        if (id && _this.itemRefsMap[id] === currentTarget) {\n          return {\n            id: id,\n            element: currentTarget\n          };\n        }\n\n        currentTarget = currentTarget.parentElement;\n      }\n\n      return {\n        id: '',\n        element: null\n      };\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.isSortable = function (target) {\n      return Boolean(target.hasAttribute(SORTABLE_COMPONENT_ATTRIBUTE));\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.closestSortable = function (target) {\n      var currentTarget = target;\n\n      while (currentTarget) {\n        if (_this.isSortable(currentTarget)) {\n          return currentTarget;\n        }\n\n        currentTarget = currentTarget.parentElement;\n      }\n\n      return null;\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.isSameSortable = function (element) {\n      var closestSortable = _this.closestSortable(element);\n\n      return closestSortable === _this.container;\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.idComparer = function (id1, id2) {\n      return id1 + '' === id2 + '';\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.findItem = function (id) {\n      var _a = _this.props,\n          data = _a.data,\n          idField = _a.idField;\n\n      if (!(id + '')) {\n        return;\n      }\n\n      var idGetter = getter(idField);\n      return find(data, function (item) {\n        return _this.idComparer(idGetter(item), id);\n      });\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.findIndex = function (id) {\n      var _a = _this.props,\n          data = _a.data,\n          idField = _a.idField;\n\n      if (!(id + '')) {\n        return -1;\n      }\n\n      return findIndex(data, function (item) {\n        return _this.idComparer(item[idField], id);\n      });\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.isItemDisabled = function (item) {\n      return item && item[_this.props.disabledField || ''] === true;\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.shouldResetActive = function () {\n      if (document.activeElement instanceof HTMLElement) {\n        var closestItemElement = _this.closestSortableItem(document.activeElement).element;\n\n        return !Boolean(closestItemElement);\n      }\n\n      return false;\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.widgetTarget = function (target) {\n      var element = closest(target, function (node) {\n        return hasClasses(node, 'k-widget') || _this.isSortable(node);\n      });\n      return element && !_this.isSortable(element);\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.allowDrag = function (target) {\n      return target.hasAttribute(SORTABLE_ITEM_ATTRIBUTE) || !(isFocusable(target) || _this.widgetTarget(target));\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onDragStart = function (eventData) {\n      var event = eventData.event;\n      var onDragStart = _this.props.onDragStart;\n      var targetElement = document.elementFromPoint(event.clientX, event.clientY);\n\n      var _a = _this.closestSortableItem(targetElement),\n          activeId = _a.id,\n          activeElement = _a.element;\n\n      var activeItem = _this.findItem(activeId);\n\n      if (!activeId || activeItem && _this.isItemDisabled(activeItem) || !_this.allowDrag(targetElement) || !_this.isSameSortable(targetElement)) {\n        _this.isDragPrevented = true;\n        return;\n      }\n\n      if (event.isTouch) {\n        event.originalEvent.preventDefault();\n      }\n\n      var dragStartEvent = new SortableOnDragStartEvent(_this, _this.findIndex(activeId), targetElement);\n\n      if (onDragStart) {\n        onDragStart.call(undefined, dragStartEvent);\n      }\n\n      _this.isDragPrevented = dragStartEvent.isDefaultPrevented();\n\n      if (_this.isDragPrevented) {\n        event.originalEvent.preventDefault();\n      } else {\n        _this.offsetParent = relativeContextElement(_this.container);\n\n        _this.setState({\n          activeId: activeId,\n          dragCueWidth: activeElement && activeElement.clientWidth || 0,\n          dragCueHeight: activeElement && activeElement.clientHeight || 0\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onDragOver = function (eventData) {\n      var event = eventData.event;\n      var _a = _this.props,\n          onDragOver = _a.onDragOver,\n          data = _a.data;\n\n      if (_this.isDragPrevented) {\n        return;\n      }\n\n      event.originalEvent.preventDefault();\n\n      var prevIndex = _this.findIndex(_this.state.activeId);\n\n      if (prevIndex === -1) {\n        _this.resetState();\n\n        return;\n      }\n\n      var targetElement = document.elementFromPoint(event.clientX, event.clientY);\n\n      var closestSortable = _this.closestSortableItem(targetElement);\n\n      var nextIndex = _this.findIndex(closestSortable.id);\n\n      var nextItem = data[nextIndex];\n\n      if (onDragOver && nextIndex > -1 && prevIndex !== nextIndex && !_this.isItemDisabled(nextItem) && !_this.animatingItemMap[closestSortable.id]) {\n        var dragOverEvent = new SortableOnDragOverEvent(_this, prevIndex, nextIndex, _this.generateNewState(prevIndex, nextIndex));\n        onDragOver.call(undefined, dragOverEvent);\n      }\n\n      var offset = _this.parentOffset();\n\n      _this.setState({\n        clientX: event.clientX - offset.left,\n        clientY: event.clientY - offset.top,\n        isDragging: true\n      });\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onDragEnd = function (eventData) {\n      var event = eventData.event;\n\n      var resetActive = _this.shouldResetActive();\n\n      if (_this.isDragPrevented) {\n        return;\n      }\n\n      var _a = _this.props,\n          onDragEnd = _a.onDragEnd,\n          data = _a.data;\n      var targetElement = document.elementFromPoint(event.clientX, event.clientY);\n\n      var closestSortableItem = _this.closestSortableItem(targetElement);\n\n      var nextIndex = _this.findIndex(closestSortableItem.id);\n\n      var prevIndex = _this.findIndex(_this.state.activeId);\n\n      var isNextDisabled = _this.isItemDisabled(data[nextIndex]);\n\n      if (nextIndex === -1 || isNextDisabled) {\n        nextIndex = prevIndex;\n      }\n\n      if (onDragEnd) {\n        var dragEndEvent = new SortableOnDragEndEvent(_this, prevIndex, nextIndex, _this.generateNewState(prevIndex, nextIndex));\n        onDragEnd.call(undefined, dragEndEvent);\n      }\n\n      _this.resetState(resetActive);\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onItemBlur = function () {\n      // As IE have no support for relatedTarget\n      window.setTimeout(function () {\n        if (_this.isUnmounted) {\n          return;\n        }\n\n        if (_this.shouldResetActive() && !_this.state.isDragging) {\n          _this.setState({\n            activeId: '' // what happends on destroyed component\n\n          });\n        }\n      });\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onItemFocus = function (event) {\n      var _a = _this.closestSortableItem(event.currentTarget),\n          activeId = _a.id,\n          element = _a.element;\n\n      if (!_this.idComparer(activeId, _this.state.activeId) && _this.isSameSortable(event.target) && element === event.target) {\n        _this.setState({\n          activeId: activeId\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onKeyDown = function (event) {\n      var _a = _this.props,\n          data = _a.data,\n          idField = _a.idField,\n          onNavigate = _a.onNavigate,\n          navigation = _a.navigation;\n      var activeId = _this.state.activeId;\n\n      if (!navigation || !activeId || !_this.isSameSortable(event.target)) {\n        return;\n      }\n\n      var isRtl = _this.isRtl;\n      var enabledItems = data.filter(function (item) {\n        return !_this.isItemDisabled(item);\n      });\n      var prevIndex = findIndex(enabledItems, function (item) {\n        return _this.idComparer(item[idField], activeId);\n      });\n      var maxNavIndex = enabledItems.length - 1;\n      var nextIndex = prevIndex;\n\n      if (event.keyCode === Keys.left) {\n        if (isRtl) {\n          event.keyCode = Keys.down;\n        } else {\n          event.keyCode = Keys.up;\n        }\n      }\n\n      if (event.keyCode === Keys.right) {\n        if (isRtl) {\n          event.keyCode = Keys.up;\n        } else {\n          event.keyCode = Keys.down;\n        }\n      }\n\n      switch (event.keyCode) {\n        case Keys.up:\n          if (prevIndex > 0) {\n            nextIndex = prevIndex - 1;\n          }\n\n          break;\n\n        case Keys.down:\n          if (prevIndex < maxNavIndex) {\n            nextIndex = prevIndex + 1;\n          }\n\n          break;\n\n        default:\n      }\n\n      if (nextIndex === prevIndex) {\n        return;\n      }\n\n      event.stopPropagation();\n      event.preventDefault();\n      var nextItem = enabledItems[nextIndex];\n      var nextItemId = nextItem ? nextItem[idField] : '';\n      var prevItem = enabledItems[prevIndex];\n      var prevItemId = prevItem ? prevItem[idField] : '';\n\n      if (event.ctrlKey) {\n        if (onNavigate) {\n          var actualPrevIndex = _this.findIndex(prevItemId);\n\n          var actualNextIndex = _this.findIndex(nextItemId);\n\n          var navigateEvent = new SortableOnNavigateEvent(_this, actualPrevIndex, actualNextIndex, _this.generateNewState(actualPrevIndex, actualNextIndex));\n          _this.isKeyboardNavigated = true;\n          onNavigate.call(undefined, navigateEvent);\n        }\n      } else {\n        _this.focusActiveId = true;\n\n        _this.setState({\n          activeId: nextItemId + ''\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.resetState = function (resetActive) {\n      _this.isDragPrevented = false;\n\n      _this.setState({\n        clientX: 0,\n        clientY: 0,\n        isDragging: false,\n        dragCueWidth: 0,\n        dragCueHeight: 0,\n        activeId: resetActive ? '' : _this.state.activeId\n      });\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.renderData = function () {\n      var _a = _this.props,\n          data = _a.data,\n          UIComponent = _a.itemUI,\n          idField = _a.idField,\n          tabIndex = _a.tabIndex;\n      return data.map(function (item) {\n        var _a;\n\n        var idGetter = getter(idField);\n        var id = idGetter(item);\n\n        var isDisabled = _this.isItemDisabled(item);\n\n        var isActive = _this.idComparer(_this.state.activeId, id);\n\n        return React.createElement(UIComponent, {\n          key: id,\n          forwardRef: function forwardRef(ele) {\n            return _this.refAssign(ele, id);\n          },\n          dataItem: item,\n          isDisabled: isDisabled,\n          isActive: isActive,\n          isDragged: isActive && _this.state.isDragging,\n          isDragCue: false,\n          attributes: (_a = {}, _a[SORTABLE_ITEM_ATTRIBUTE] = id, _a['aria-disabled'] = isDisabled, _a['aria-grabbed'] = isActive && _this.state.isDragging && !_this.isDragPrevented, _a['aria-dropeffect'] = isDisabled ? 'none' : 'move', _a.tabIndex = getTabIndex(tabIndex, isDisabled), _a.onFocus = _this.onItemFocus, _a.onBlur = _this.onItemBlur, _a),\n          style: {\n            cursor: !isDisabled ? 'move' : 'auto',\n            MozUserSelect: 'none',\n            msUserSelect: 'none',\n            WebkitUserSelect: 'none',\n            userSelect: 'none'\n          }\n        });\n      });\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.renderNoData = function () {\n      var UIComponent = _this.props.emptyItemUI;\n      var localizationService = provideLocalizationService(_this);\n      var noDataMessage = localizationService.toLanguageString(noData, messages[noData]);\n\n      if (UIComponent) {\n        return React.createElement(UIComponent, {\n          message: noDataMessage\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.renderDragCue = function () {\n      var UIComponent = _this.props.itemUI;\n      var _a = _this.state,\n          isDragging = _a.isDragging,\n          activeId = _a.activeId,\n          clientX = _a.clientX,\n          clientY = _a.clientY;\n\n      var dataItem = _this.findItem(activeId);\n\n      if (!isDragging || !dataItem) {\n        return;\n      }\n\n      return React.createElement(UIComponent, {\n        dataItem: dataItem,\n        isDisabled: false,\n        isActive: true,\n        isDragged: true,\n        isDragCue: true,\n        style: {\n          position: 'fixed',\n          top: clientY + 10,\n          left: clientX + 10,\n          width: _this.state.dragCueWidth,\n          height: _this.state.dragCueHeight\n        },\n        attributes: {}\n      });\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.refAssign = function (element, id) {\n      if (!element) {\n        delete _this.itemRefsMap[id];\n      } else {\n        _this.itemRefsMap[id] = element;\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.draggableRefAssign = function (ref) {\n      _this.draggableRef = ref;\n    };\n\n    validatePackage(packageMetadata);\n    return _this;\n  }\n\n  Object.defineProperty(Sortable.prototype, \"container\", {\n    get: function get() {\n      return this.draggableRef && this.draggableRef.element;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  Sortable.prototype.getSnapshotBeforeUpdate = function () {\n    var _this = this;\n\n    var _a = this.props,\n        idField = _a.idField,\n        animation = _a.animation;\n    this.oldSizesMap = {};\n\n    if (!animation) {\n      return null;\n    }\n\n    this.props.data.forEach(function (item) {\n      var id = item[idField];\n      var ref = _this.itemRefsMap[id];\n      var domNode = ReactDOM.findDOMNode(ref);\n\n      if (domNode) {\n        _this.oldSizesMap[id] = domNode.getBoundingClientRect();\n      }\n    });\n    return null;\n  };\n  /**\n   * @hidden\n   */\n\n\n  Sortable.prototype.componentDidUpdate = function (previousProps) {\n    var _this = this;\n\n    var _a = this.props,\n        idField = _a.idField,\n        animation = _a.animation;\n\n    if (this.focusActiveId) {\n      this.focusActiveId = false;\n      this.itemRefsMap[this.state.activeId].focus();\n    }\n\n    if (!animation || !this.state.isDragging && !this.isKeyboardNavigated) {\n      return;\n    }\n\n    this.isKeyboardNavigated = false;\n    previousProps.data.forEach(function (item) {\n      var id = item[idField];\n      var domNode = _this.itemRefsMap[id];\n      var newBox = domNode.getBoundingClientRect();\n      var oldBox = _this.oldSizesMap[id];\n      var deltaX = oldBox.left - newBox.left;\n      var deltaY = oldBox.top - newBox.top;\n\n      if (deltaX === 0 && deltaY === 0) {\n        return;\n      }\n\n      requestAnimationFrame(function () {\n        _this.animatingItemMap[id] = true; // Before the DOM paints, Invert it to its old position\n        // TODO: optimize - animate all items in one animation frame, not each in different\n        // TODO: optimize - when already animated element is going to change calculate correct delta first.\n\n        domNode.style.transform = \"translate(\".concat(deltaX, \"px, \").concat(deltaY, \"px)\");\n        domNode.style.transition = 'transform 0s';\n        requestAnimationFrame(function () {\n          // Then, remove the transform reverting it to its natural\n          // state and apply a transition so the process goes smoothly.\n          domNode.style.transform = '';\n          domNode.style.transition = \"transform \".concat(ANIMATION_DURATION, \"ms cubic-bezier(0.2, 0, 0, 1) 0s\");\n          window.setTimeout(function () {\n            return _this.animatingItemMap[id] = false;\n          }, ANIMATION_DURATION);\n        });\n      });\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  Sortable.prototype.componentDidMount = function () {\n    this.isRtl = this.container && getComputedStyle(this.container).direction === 'rtl' || false;\n  };\n  /**\n   * @hidden\n   */\n\n\n  Sortable.prototype.componentWillUnmount = function () {\n    this.isUnmounted = true;\n  };\n  /**\n   * @hidden\n   */\n\n\n  Sortable.prototype.parentOffset = function () {\n    var offsetParent = this.offsetParent;\n\n    if (offsetParent && offsetParent.ownerDocument) {\n      if (offsetParent !== offsetParent.ownerDocument.body) {\n        var rect = offsetParent.getBoundingClientRect();\n        return {\n          left: rect.left - offsetParent.scrollLeft,\n          top: rect.top - offsetParent.scrollTop\n        };\n      }\n    }\n\n    return {\n      left: 0,\n      top: 0\n    };\n  };\n  /**\n   * @hidden\n   */\n\n\n  Sortable.prototype.render = function () {\n    var _a = this.props,\n        data = _a.data,\n        style = _a.style,\n        className = _a.className;\n    return React.createElement(Draggable, {\n      onPress: this.onDragStart,\n      onDrag: this.onDragOver,\n      onRelease: this.onDragEnd,\n      ref: this.draggableRefAssign\n    }, React.createElement(\"div\", __assign({}, SORTABLE_ATTRIBUTE_PROP, {\n      className: className,\n      style: __assign({\n        touchAction: 'none'\n      }, style),\n      onKeyDown: this.onKeyDown\n    }), data && data.length ? this.renderData() : this.renderNoData(), this.renderDragCue()));\n  };\n  /**\n   * @hidden\n   */\n\n\n  Sortable.defaultProps = {\n    navigation: true,\n    animation: true,\n    emptyItemUI: function emptyItemUI(props) {\n      return React.createElement(\"div\", null, props.message);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n  Sortable.propTypes = {\n    idField: PropTypes.string.isRequired,\n    disabledField: PropTypes.string,\n    data: PropTypes.array.isRequired,\n    tabIndex: PropTypes.number,\n    navigation: PropTypes.bool,\n    animation: PropTypes.bool,\n    itemUI: PropTypes.func.isRequired,\n    emptyItemUI: PropTypes.func,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    onDragStart: PropTypes.func,\n    onDragOver: PropTypes.func,\n    onDragEnd: PropTypes.func,\n    onNavigate: PropTypes.func\n  };\n  return Sortable;\n}(React.Component);\n\nexport { Sortable };\nregisterForLocalization(Sortable);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/node_modules/@progress/kendo-react-sortable/dist/es/Sortable.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__spreadArray","to","from","pack","l","ar","slice","concat","_a","React","ReactDOM","PropTypes","Draggable","Keys","getTabIndex","SortableOnDragStartEvent","SortableOnDragOverEvent","SortableOnDragEndEvent","SortableOnNavigateEvent","provideLocalizationService","registerForLocalization","messages","noData","find","findIndex","hasClasses","isFocusable","closest","relativeContextElement","validatePackage","packageMetadata","getter","ANIMATION_DURATION","SORTABLE_ITEM_ATTRIBUTE","SORTABLE_COMPONENT_ATTRIBUTE","SORTABLE_ATTRIBUTE_PROP","Sortable","_super","props","_this","state","clientX","clientY","isDragging","activeId","dragCueWidth","dragCueHeight","isRtl","itemRefsMap","oldSizesMap","animatingItemMap","draggableRef","isUnmounted","focusActiveId","isKeyboardNavigated","isDragPrevented","swapItems","newState","source","destination","generateNewState","prevIndex","nextIndex","data","isReversed","nextItem","isItemDisabled","closestSortableItem","target","currentTarget","id","getAttribute","element","parentElement","isSortable","Boolean","hasAttribute","closestSortable","isSameSortable","container","idComparer","id1","id2","findItem","idField","idGetter","item","disabledField","shouldResetActive","document","activeElement","HTMLElement","closestItemElement","widgetTarget","node","allowDrag","onDragStart","eventData","event","targetElement","elementFromPoint","activeItem","isTouch","originalEvent","preventDefault","dragStartEvent","undefined","isDefaultPrevented","offsetParent","setState","clientWidth","clientHeight","onDragOver","resetState","dragOverEvent","offset","parentOffset","left","top","onDragEnd","resetActive","isNextDisabled","dragEndEvent","onItemBlur","window","setTimeout","onItemFocus","onKeyDown","onNavigate","navigation","enabledItems","filter","maxNavIndex","keyCode","down","up","right","stopPropagation","nextItemId","prevItem","prevItemId","ctrlKey","actualPrevIndex","actualNextIndex","navigateEvent","renderData","UIComponent","itemUI","tabIndex","map","isDisabled","isActive","createElement","key","forwardRef","ele","refAssign","dataItem","isDragged","isDragCue","attributes","onFocus","onBlur","style","cursor","MozUserSelect","msUserSelect","WebkitUserSelect","userSelect","renderNoData","emptyItemUI","localizationService","noDataMessage","toLanguageString","message","renderDragCue","position","width","height","draggableRefAssign","ref","defineProperty","get","enumerable","configurable","getSnapshotBeforeUpdate","animation","forEach","domNode","findDOMNode","getBoundingClientRect","componentDidUpdate","previousProps","focus","newBox","oldBox","deltaX","deltaY","requestAnimationFrame","transform","transition","componentDidMount","getComputedStyle","direction","componentWillUnmount","ownerDocument","body","rect","scrollLeft","scrollTop","render","className","onPress","onDrag","onRelease","touchAction","defaultProps","propTypes","string","isRequired","array","number","bool","func","object","Component"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar _a;\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { Draggable, Keys, getTabIndex } from '@progress/kendo-react-common';\nimport { SortableOnDragStartEvent } from './events/SortableOnDragStartEvent';\nimport { SortableOnDragOverEvent } from './events/SortableOnDragOverEvent';\nimport { SortableOnDragEndEvent } from './events/SortableOnDragEndEvent';\nimport { SortableOnNavigateEvent } from './events/SortableOnNavigateEvent';\nimport { provideLocalizationService, registerForLocalization } from '@progress/kendo-react-intl';\nimport { messages, noData } from './messages';\nimport { find, findIndex, hasClasses, isFocusable, closest, relativeContextElement } from './utils/utils';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\nimport { getter } from '@progress/kendo-react-common';\n/**\n * @hidden\n */\nvar ANIMATION_DURATION = 200;\n/**\n * @hidden\n */\nvar SORTABLE_ITEM_ATTRIBUTE = 'data-sortable-id';\n/**\n * @hidden\n */\nvar SORTABLE_COMPONENT_ATTRIBUTE = 'data-sortable-component';\n/**\n * @hidden\n */\nvar SORTABLE_ATTRIBUTE_PROP = (_a = {}, _a[SORTABLE_COMPONENT_ATTRIBUTE] = true, _a);\nvar Sortable = /** @class */ (function (_super) {\n    __extends(Sortable, _super);\n    function Sortable(props) {\n        var _this = _super.call(this, props) || this;\n        /**\n         * @hidden\n         */\n        _this.state = {\n            clientX: 0,\n            clientY: 0,\n            isDragging: false,\n            activeId: '',\n            dragCueWidth: 0,\n            dragCueHeight: 0\n        };\n        _this.isRtl = false;\n        _this.itemRefsMap = {};\n        _this.oldSizesMap = {};\n        _this.animatingItemMap = {};\n        _this.draggableRef = null;\n        _this.isUnmounted = false;\n        _this.focusActiveId = false;\n        _this.isKeyboardNavigated = false;\n        _this.isDragPrevented = false;\n        /**\n         * @hidden\n         */\n        _this.swapItems = function (newState, source, destination) {\n            var b = newState[source];\n            newState[source] = newState[destination];\n            newState[destination] = b;\n            source = destination;\n            return source;\n        };\n        /**\n         * @hidden\n         */\n        _this.generateNewState = function (prevIndex, nextIndex) {\n            var data = _this.props.data;\n            var newState = __spreadArray([], data, true);\n            var isReversed = prevIndex > nextIndex;\n            if (isReversed) {\n                for (var i = prevIndex - 1; i >= nextIndex; i--) {\n                    var nextItem = data[i];\n                    if (!_this.isItemDisabled(nextItem)) {\n                        prevIndex = _this.swapItems(newState, prevIndex, i);\n                    }\n                }\n            }\n            else {\n                for (var i = prevIndex + 1; i <= nextIndex; i++) {\n                    var nextItem = data[i];\n                    if (!_this.isItemDisabled(nextItem)) {\n                        prevIndex = _this.swapItems(newState, prevIndex, i);\n                    }\n                }\n            }\n            return newState;\n        };\n        /**\n         * @hidden\n         */\n        _this.closestSortableItem = function (target) {\n            var currentTarget = target;\n            while (currentTarget) {\n                var id = currentTarget.getAttribute(SORTABLE_ITEM_ATTRIBUTE);\n                if (id && _this.itemRefsMap[id] === currentTarget) {\n                    return {\n                        id: id,\n                        element: currentTarget\n                    };\n                }\n                currentTarget = currentTarget.parentElement;\n            }\n            return {\n                id: '',\n                element: null\n            };\n        };\n        /**\n         * @hidden\n         */\n        _this.isSortable = function (target) {\n            return Boolean(target.hasAttribute(SORTABLE_COMPONENT_ATTRIBUTE));\n        };\n        /**\n         * @hidden\n         */\n        _this.closestSortable = function (target) {\n            var currentTarget = target;\n            while (currentTarget) {\n                if (_this.isSortable(currentTarget)) {\n                    return currentTarget;\n                }\n                currentTarget = currentTarget.parentElement;\n            }\n            return null;\n        };\n        /**\n         * @hidden\n         */\n        _this.isSameSortable = function (element) {\n            var closestSortable = _this.closestSortable(element);\n            return closestSortable === _this.container;\n        };\n        /**\n         * @hidden\n         */\n        _this.idComparer = function (id1, id2) {\n            return id1 + '' === id2 + '';\n        };\n        /**\n         * @hidden\n         */\n        _this.findItem = function (id) {\n            var _a = _this.props, data = _a.data, idField = _a.idField;\n            if (!(id + '')) {\n                return;\n            }\n            var idGetter = getter(idField);\n            return find(data, function (item) { return _this.idComparer(idGetter(item), id); });\n        };\n        /**\n         * @hidden\n         */\n        _this.findIndex = function (id) {\n            var _a = _this.props, data = _a.data, idField = _a.idField;\n            if (!(id + '')) {\n                return -1;\n            }\n            return findIndex(data, function (item) { return _this.idComparer(item[idField], id); });\n        };\n        /**\n         * @hidden\n         */\n        _this.isItemDisabled = function (item) {\n            return item && item[_this.props.disabledField || ''] === true;\n        };\n        /**\n         * @hidden\n         */\n        _this.shouldResetActive = function () {\n            if (document.activeElement instanceof HTMLElement) {\n                var closestItemElement = _this.closestSortableItem(document.activeElement).element;\n                return !Boolean(closestItemElement);\n            }\n            return false;\n        };\n        /**\n         * @hidden\n         */\n        _this.widgetTarget = function (target) {\n            var element = closest(target, function (node) { return hasClasses(node, 'k-widget') || _this.isSortable(node); });\n            return element && !_this.isSortable(element);\n        };\n        /**\n         * @hidden\n         */\n        _this.allowDrag = function (target) {\n            return target.hasAttribute(SORTABLE_ITEM_ATTRIBUTE) || !(isFocusable(target) || _this.widgetTarget(target));\n        };\n        /**\n         * @hidden\n         */\n        _this.onDragStart = function (eventData) {\n            var event = eventData.event;\n            var onDragStart = _this.props.onDragStart;\n            var targetElement = document.elementFromPoint(event.clientX, event.clientY);\n            var _a = _this.closestSortableItem(targetElement), activeId = _a.id, activeElement = _a.element;\n            var activeItem = _this.findItem(activeId);\n            if (!activeId ||\n                (activeItem && _this.isItemDisabled(activeItem)) ||\n                !_this.allowDrag(targetElement) ||\n                !_this.isSameSortable(targetElement)) {\n                _this.isDragPrevented = true;\n                return;\n            }\n            if (event.isTouch) {\n                event.originalEvent.preventDefault();\n            }\n            var dragStartEvent = new SortableOnDragStartEvent(_this, _this.findIndex(activeId), targetElement);\n            if (onDragStart) {\n                onDragStart.call(undefined, dragStartEvent);\n            }\n            _this.isDragPrevented = dragStartEvent.isDefaultPrevented();\n            if (_this.isDragPrevented) {\n                event.originalEvent.preventDefault();\n            }\n            else {\n                _this.offsetParent = relativeContextElement(_this.container);\n                _this.setState({\n                    activeId: activeId,\n                    dragCueWidth: (activeElement && activeElement.clientWidth) || 0,\n                    dragCueHeight: (activeElement && activeElement.clientHeight) || 0\n                });\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.onDragOver = function (eventData) {\n            var event = eventData.event;\n            var _a = _this.props, onDragOver = _a.onDragOver, data = _a.data;\n            if (_this.isDragPrevented) {\n                return;\n            }\n            event.originalEvent.preventDefault();\n            var prevIndex = _this.findIndex(_this.state.activeId);\n            if (prevIndex === -1) {\n                _this.resetState();\n                return;\n            }\n            var targetElement = document.elementFromPoint(event.clientX, event.clientY);\n            var closestSortable = _this.closestSortableItem(targetElement);\n            var nextIndex = _this.findIndex(closestSortable.id);\n            var nextItem = data[nextIndex];\n            if (onDragOver &&\n                nextIndex > -1 &&\n                prevIndex !== nextIndex &&\n                !_this.isItemDisabled(nextItem) &&\n                !_this.animatingItemMap[closestSortable.id]) {\n                var dragOverEvent = new SortableOnDragOverEvent(_this, prevIndex, nextIndex, _this.generateNewState(prevIndex, nextIndex));\n                onDragOver.call(undefined, dragOverEvent);\n            }\n            var offset = _this.parentOffset();\n            _this.setState({\n                clientX: event.clientX - offset.left,\n                clientY: event.clientY - offset.top,\n                isDragging: true\n            });\n        };\n        /**\n         * @hidden\n         */\n        _this.onDragEnd = function (eventData) {\n            var event = eventData.event;\n            var resetActive = _this.shouldResetActive();\n            if (_this.isDragPrevented) {\n                return;\n            }\n            var _a = _this.props, onDragEnd = _a.onDragEnd, data = _a.data;\n            var targetElement = document.elementFromPoint(event.clientX, event.clientY);\n            var closestSortableItem = _this.closestSortableItem(targetElement);\n            var nextIndex = _this.findIndex(closestSortableItem.id);\n            var prevIndex = _this.findIndex(_this.state.activeId);\n            var isNextDisabled = _this.isItemDisabled(data[nextIndex]);\n            if (nextIndex === -1 || isNextDisabled) {\n                nextIndex = prevIndex;\n            }\n            if (onDragEnd) {\n                var dragEndEvent = new SortableOnDragEndEvent(_this, prevIndex, nextIndex, _this.generateNewState(prevIndex, nextIndex));\n                onDragEnd.call(undefined, dragEndEvent);\n            }\n            _this.resetState(resetActive);\n        };\n        /**\n         * @hidden\n         */\n        _this.onItemBlur = function () {\n            // As IE have no support for relatedTarget\n            window.setTimeout(function () {\n                if (_this.isUnmounted) {\n                    return;\n                }\n                if (_this.shouldResetActive() && !_this.state.isDragging) {\n                    _this.setState({\n                        activeId: '' // what happends on destroyed component\n                    });\n                }\n            });\n        };\n        /**\n         * @hidden\n         */\n        _this.onItemFocus = function (event) {\n            var _a = _this.closestSortableItem(event.currentTarget), activeId = _a.id, element = _a.element;\n            if (!_this.idComparer(activeId, _this.state.activeId) &&\n                _this.isSameSortable(event.target) &&\n                element === event.target) {\n                _this.setState({\n                    activeId: activeId\n                });\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.onKeyDown = function (event) {\n            var _a = _this.props, data = _a.data, idField = _a.idField, onNavigate = _a.onNavigate, navigation = _a.navigation;\n            var activeId = _this.state.activeId;\n            if (!navigation || !activeId || !_this.isSameSortable(event.target)) {\n                return;\n            }\n            var isRtl = _this.isRtl;\n            var enabledItems = data.filter(function (item) { return !_this.isItemDisabled(item); });\n            var prevIndex = findIndex(enabledItems, function (item) { return _this.idComparer(item[idField], activeId); });\n            var maxNavIndex = enabledItems.length - 1;\n            var nextIndex = prevIndex;\n            if (event.keyCode === Keys.left) {\n                if (isRtl) {\n                    event.keyCode = Keys.down;\n                }\n                else {\n                    event.keyCode = Keys.up;\n                }\n            }\n            if (event.keyCode === Keys.right) {\n                if (isRtl) {\n                    event.keyCode = Keys.up;\n                }\n                else {\n                    event.keyCode = Keys.down;\n                }\n            }\n            switch (event.keyCode) {\n                case Keys.up:\n                    if (prevIndex > 0) {\n                        nextIndex = prevIndex - 1;\n                    }\n                    break;\n                case Keys.down:\n                    if (prevIndex < maxNavIndex) {\n                        nextIndex = prevIndex + 1;\n                    }\n                    break;\n                default:\n            }\n            if (nextIndex === prevIndex) {\n                return;\n            }\n            event.stopPropagation();\n            event.preventDefault();\n            var nextItem = enabledItems[nextIndex];\n            var nextItemId = nextItem ? nextItem[idField] : '';\n            var prevItem = enabledItems[prevIndex];\n            var prevItemId = prevItem ? prevItem[idField] : '';\n            if (event.ctrlKey) {\n                if (onNavigate) {\n                    var actualPrevIndex = _this.findIndex(prevItemId);\n                    var actualNextIndex = _this.findIndex(nextItemId);\n                    var navigateEvent = new SortableOnNavigateEvent(_this, actualPrevIndex, actualNextIndex, _this.generateNewState(actualPrevIndex, actualNextIndex));\n                    _this.isKeyboardNavigated = true;\n                    onNavigate.call(undefined, navigateEvent);\n                }\n            }\n            else {\n                _this.focusActiveId = true;\n                _this.setState({\n                    activeId: nextItemId + ''\n                });\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.resetState = function (resetActive) {\n            _this.isDragPrevented = false;\n            _this.setState({\n                clientX: 0,\n                clientY: 0,\n                isDragging: false,\n                dragCueWidth: 0,\n                dragCueHeight: 0,\n                activeId: resetActive ? '' : _this.state.activeId\n            });\n        };\n        /**\n         * @hidden\n         */\n        _this.renderData = function () {\n            var _a = _this.props, data = _a.data, UIComponent = _a.itemUI, idField = _a.idField, tabIndex = _a.tabIndex;\n            return data.map(function (item) {\n                var _a;\n                var idGetter = getter(idField);\n                var id = idGetter(item);\n                var isDisabled = _this.isItemDisabled(item);\n                var isActive = _this.idComparer(_this.state.activeId, id);\n                return (React.createElement(UIComponent, { key: id, forwardRef: function (ele) { return _this.refAssign(ele, id); }, dataItem: item, isDisabled: isDisabled, isActive: isActive, isDragged: isActive && _this.state.isDragging, isDragCue: false, attributes: (_a = {},\n                        _a[SORTABLE_ITEM_ATTRIBUTE] = id,\n                        _a['aria-disabled'] = isDisabled,\n                        _a['aria-grabbed'] = isActive && _this.state.isDragging && !_this.isDragPrevented,\n                        _a['aria-dropeffect'] = isDisabled ? 'none' : 'move',\n                        _a.tabIndex = getTabIndex(tabIndex, isDisabled),\n                        _a.onFocus = _this.onItemFocus,\n                        _a.onBlur = _this.onItemBlur,\n                        _a), style: {\n                        cursor: !isDisabled ? 'move' : 'auto',\n                        MozUserSelect: 'none',\n                        msUserSelect: 'none',\n                        WebkitUserSelect: 'none',\n                        userSelect: 'none'\n                    } }));\n            });\n        };\n        /**\n         * @hidden\n         */\n        _this.renderNoData = function () {\n            var UIComponent = _this.props.emptyItemUI;\n            var localizationService = provideLocalizationService(_this);\n            var noDataMessage = localizationService\n                .toLanguageString(noData, messages[noData]);\n            if (UIComponent) {\n                return React.createElement(UIComponent, { message: noDataMessage });\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.renderDragCue = function () {\n            var UIComponent = _this.props.itemUI;\n            var _a = _this.state, isDragging = _a.isDragging, activeId = _a.activeId, clientX = _a.clientX, clientY = _a.clientY;\n            var dataItem = _this.findItem(activeId);\n            if (!isDragging || !dataItem) {\n                return;\n            }\n            return (React.createElement(UIComponent, { dataItem: dataItem, isDisabled: false, isActive: true, isDragged: true, isDragCue: true, style: {\n                    position: 'fixed',\n                    top: clientY + 10,\n                    left: clientX + 10,\n                    width: _this.state.dragCueWidth,\n                    height: _this.state.dragCueHeight\n                }, attributes: {} }));\n        };\n        /**\n         * @hidden\n         */\n        _this.refAssign = function (element, id) {\n            if (!element) {\n                delete _this.itemRefsMap[id];\n            }\n            else {\n                _this.itemRefsMap[id] = element;\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.draggableRefAssign = function (ref) {\n            _this.draggableRef = ref;\n        };\n        validatePackage(packageMetadata);\n        return _this;\n    }\n    Object.defineProperty(Sortable.prototype, \"container\", {\n        get: function () {\n            return this.draggableRef && this.draggableRef.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    Sortable.prototype.getSnapshotBeforeUpdate = function () {\n        var _this = this;\n        var _a = this.props, idField = _a.idField, animation = _a.animation;\n        this.oldSizesMap = {};\n        if (!animation) {\n            return null;\n        }\n        this.props.data.forEach(function (item) {\n            var id = item[idField];\n            var ref = _this.itemRefsMap[id];\n            var domNode = ReactDOM.findDOMNode(ref);\n            if (domNode) {\n                _this.oldSizesMap[id] = domNode.getBoundingClientRect();\n            }\n        });\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    Sortable.prototype.componentDidUpdate = function (previousProps) {\n        var _this = this;\n        var _a = this.props, idField = _a.idField, animation = _a.animation;\n        if (this.focusActiveId) {\n            this.focusActiveId = false;\n            this.itemRefsMap[this.state.activeId].focus();\n        }\n        if (!animation || (!this.state.isDragging && !this.isKeyboardNavigated)) {\n            return;\n        }\n        this.isKeyboardNavigated = false;\n        previousProps.data.forEach(function (item) {\n            var id = item[idField];\n            var domNode = _this.itemRefsMap[id];\n            var newBox = domNode.getBoundingClientRect();\n            var oldBox = _this.oldSizesMap[id];\n            var deltaX = oldBox.left - newBox.left;\n            var deltaY = oldBox.top - newBox.top;\n            if (deltaX === 0 && deltaY === 0) {\n                return;\n            }\n            requestAnimationFrame(function () {\n                _this.animatingItemMap[id] = true;\n                // Before the DOM paints, Invert it to its old position\n                // TODO: optimize - animate all items in one animation frame, not each in different\n                // TODO: optimize - when already animated element is going to change calculate correct delta first.\n                domNode.style.transform = \"translate(\".concat(deltaX, \"px, \").concat(deltaY, \"px)\");\n                domNode.style.transition = 'transform 0s';\n                requestAnimationFrame(function () {\n                    // Then, remove the transform reverting it to its natural\n                    // state and apply a transition so the process goes smoothly.\n                    domNode.style.transform = '';\n                    domNode.style.transition = \"transform \".concat(ANIMATION_DURATION, \"ms cubic-bezier(0.2, 0, 0, 1) 0s\");\n                    window.setTimeout(function () { return _this.animatingItemMap[id] = false; }, ANIMATION_DURATION);\n                });\n            });\n        });\n    };\n    /**\n     * @hidden\n     */\n    Sortable.prototype.componentDidMount = function () {\n        this.isRtl = this.container && (getComputedStyle(this.container).direction === 'rtl') || false;\n    };\n    /**\n     * @hidden\n     */\n    Sortable.prototype.componentWillUnmount = function () {\n        this.isUnmounted = true;\n    };\n    /**\n     * @hidden\n     */\n    Sortable.prototype.parentOffset = function () {\n        var offsetParent = this.offsetParent;\n        if (offsetParent && offsetParent.ownerDocument) {\n            if (offsetParent !== offsetParent.ownerDocument.body) {\n                var rect = offsetParent.getBoundingClientRect();\n                return {\n                    left: rect.left - offsetParent.scrollLeft,\n                    top: rect.top - offsetParent.scrollTop\n                };\n            }\n        }\n        return { left: 0, top: 0 };\n    };\n    /**\n     * @hidden\n     */\n    Sortable.prototype.render = function () {\n        var _a = this.props, data = _a.data, style = _a.style, className = _a.className;\n        return (React.createElement(Draggable, { onPress: this.onDragStart, onDrag: this.onDragOver, onRelease: this.onDragEnd, ref: this.draggableRefAssign },\n            React.createElement(\"div\", __assign({}, SORTABLE_ATTRIBUTE_PROP, { className: className, style: __assign({ touchAction: 'none' }, style), onKeyDown: this.onKeyDown }),\n                data && data.length ?\n                    this.renderData() : this.renderNoData(),\n                this.renderDragCue())));\n    };\n    /**\n     * @hidden\n     */\n    Sortable.defaultProps = {\n        navigation: true,\n        animation: true,\n        emptyItemUI: function (props) { return React.createElement(\"div\", null, props.message); }\n    };\n    /**\n     * @hidden\n     */\n    Sortable.propTypes = {\n        idField: PropTypes.string.isRequired,\n        disabledField: PropTypes.string,\n        data: PropTypes.array.isRequired,\n        tabIndex: PropTypes.number,\n        navigation: PropTypes.bool,\n        animation: PropTypes.bool,\n        itemUI: PropTypes.func.isRequired,\n        emptyItemUI: PropTypes.func,\n        style: PropTypes.object,\n        className: PropTypes.string,\n        onDragStart: PropTypes.func,\n        onDragOver: PropTypes.func,\n        onDragEnd: PropTypes.func,\n        onNavigate: PropTypes.func\n    };\n    return Sortable;\n}(React.Component));\nexport { Sortable };\nregisterForLocalization(Sortable);\n"]},"metadata":{},"sourceType":"module"}