{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Row,Col,Card,Nav,FormGroup,FormLabel}from\"react-bootstrap\";import{connect}from\"react-redux\";import{toast}from\"react-toastify\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faTrashAlt,faPencilAlt,faThumbsUp,faPlus,faEye,faUserTimes}from'@fortawesome/free-solid-svg-icons';import{ReactComponent as Quotationdiscount}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/image/quotationdiscount.svg\";import{injectIntl,FormattedMessage}from\"react-intl\";import{callService,crudMaster,validateEsignCredential,updateStore,getQuotation,filterColumnData,getProjectTypeComboService,viewAttachment,addQuotation,getreloadQuotation,getQuotationAddTestService,getQuotationPricingEditService,GrossQuotation,modalSave,handleRetireQuotation,getQuotationClientCategoryComboService,getQuotaionClientComboService,getProjectCodeComboService,getQuotaionProductCategoryComboService,getQuotaionClientSiteComboService}from\"../../actions\";import ListMaster from\"../../components/list-master/list-master.component\";import{transactionStatus}from\"../../components/Enumeration\";import AddQuotation from\"../../pages/quotation/AddQuotation\";import{DEFAULT_RETURN}from\"../../actions/LoginTypes\";import SlideOutModal from\"../../components/slide-out-modal/SlideOutModal\";import Esign from\"../audittrail/Esign\";import{showEsign,getControlMap,formatInputDate}from\"../../components/CommonScript\";import{ReadOnlyText,ContentPanel}from\"../../components/App.styles\";import{process}from\"@progress/kendo-data-query\";import ConfirmMessage from\"../../components/confirm-alert/confirm-message.component\";// import ProjectMasterFilter from './ProjectMasterFilter';\nimport{intl}from\"../../components/App\";// import DataGrid from '../../components/data-grid/data-grid.component';\nimport QuotationTab from\"./QuotationTab\";import AddQuotationPreview from\"../../pages/quotation/AddQuotationPreview\";import RetireQuotation from\"../../pages/quotation/RetireQuotation\";import ModalShow from\"../../components/ModalShow\";import ViewInfoDetails from\"../../components/ViewInfoDetails\";import{ReactComponent as RetireaQuotation}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/image/RetireaQuotation.svg\";var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Quotation=/*#__PURE__*/function(_Component){_inherits(Quotation,_Component);var _super=_createSuper(Quotation);function Quotation(props){var _this;_classCallCheck(this,Quotation);_this=_super.call(this,props);_this.sidebarExpandCollapse=function(){_this.setState({sidebarview:true});};_this.handleDateChange=function(dateName,dateValue){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type===\"checkbox\"){selectedRecord[event.target.name]=event.target.checked===true?3:4;}else if(event.target.type==='radio'){selectedRecord[event.target.name]=optional;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){var quotationData=[];var inputParam={};var slideOutModal;quotationData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"Quotation\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\"};if(_this.props.Login.operation===\"update\"&&_this.props.Login.screenName===\"IDS_QUOTATION\"){postParam[\"primaryKeyValue\"]=_this.props.Login.masterData.SelectedQuotation.nquotationcode;quotationData[\"quotation\"]={nquotationcode:_this.props.Login.masterData.SelectedQuotation.nquotationcode,nsitecode:_this.props.Login.userInfo.nmastersitecode,sprojecttitle:_this.state.selectedRecord.sprojecttitle===undefined?\"\":_this.state.selectedRecord.sprojecttitle,sclientsiteaddress:_this.state.selectedRecord.sclientsiteaddress===undefined?\"\":_this.state.selectedRecord.sclientsiteaddress,sinvoiceaddress:_this.state.selectedRecord.sinvoiceaddress===undefined?\"\":_this.state.selectedRecord.sinvoiceaddress,sdescription:_this.state.selectedRecord.sdescription===undefined?\"\":_this.state.selectedRecord.sdescription,ntransactionstatus:transactionStatus.DRAFT,sdeviationremarks:_this.state.selectedRecord.sdeviationremarks===undefined?\"\":_this.state.selectedRecord.sdeviationremarks,soemname:_this.state.selectedRecord.soemname===undefined?\"\":_this.state.selectedRecord.soemname// squotationleadtime: this.state.selectedRecord.squotationleadtime === undefined ? \"\" : this.state.selectedRecord.squotationleadtime\n};}else if(_this.props.Login.operation===\"create\"&&_this.props.Login.screenName===\"IDS_QUOTATION\"){quotationData[\"quotation\"]={nsitecode:_this.props.Login.userInfo.nmastersitecode,sprojecttitle:_this.state.selectedRecord.sprojecttitle===undefined?\"\":_this.state.selectedRecord.sprojecttitle,sclientsiteaddress:_this.state.selectedRecord.sclientsiteaddress===undefined?\"\":_this.state.selectedRecord.sclientsiteaddress,sinvoiceaddress:_this.state.selectedRecord.sinvoiceaddress===undefined?\"\":_this.state.selectedRecord.sinvoiceaddress,sdescription:_this.state.selectedRecord.sdescription===undefined?\"\":_this.state.selectedRecord.sdescription,ntransactionstatus:transactionStatus.DRAFT,sdeviationremarks:_this.state.selectedRecord.sdeviationremarks===undefined?\"\":_this.state.selectedRecord.sdeviationremarks,soemname:_this.state.selectedRecord.soemname===undefined?\"\":_this.state.selectedRecord.soemname// squotationleadtime: this.state.selectedRecord.squotationleadtime === undefined ? \"\" : this.state.selectedRecord.squotationleadtime\n};}if((_this.props.Login.operation===\"create\"||_this.props.Login.operation===\"update\")&&_this.props.Login.screenName===\"IDS_QUOTATION\"){quotationData[\"quotation\"][\"nclientcatcode\"]=_this.state.selectedRecord[\"nclientcatcode\"]?_this.state.selectedRecord[\"nclientcatcode\"].value:transactionStatus.NA;quotationData[\"quotation\"][\"nclientcode\"]=_this.state.selectedRecord[\"nclientcode\"]!==\"\"?_this.state.selectedRecord[\"nclientcode\"].value:transactionStatus.NA;quotationData[\"quotation\"][\"nclientsitecode\"]=_this.state.selectedRecord[\"nclientsitecode\"]!==\"\"?_this.state.selectedRecord[\"nclientsitecode\"].value:transactionStatus.NA;quotationData[\"quotation\"][\"nclientcontactcode\"]=_this.state.selectedRecord[\"nclientcontactcode\"]!==\"\"?_this.state.selectedRecord[\"nclientcontactcode\"].value:transactionStatus.NA;quotationData[\"quotation\"][\"noemcode\"]=_this.state.selectedRecord[\"noemcode\"]!==undefined?_this.state.selectedRecord[\"noemcode\"].value:transactionStatus.NA;// quotationData[\"quotation\"][\"nquotationtypecode\"] = this.state.selectedRecord[\"nquotationtypecode\"]!==\"\" ? this.state.selectedRecord[\"nquotationtypecode\"].value\n//   : transactionStatus.NA;\nquotationData[\"quotation\"][\"nquotationtypecode\"]=transactionStatus.ACTIVE;quotationData[\"quotation\"][\"nprojecttypecode\"]=_this.state.selectedRecord[\"nprojecttypecode\"]?_this.state.selectedRecord[\"nprojecttypecode\"].value:transactionStatus.NA;quotationData[\"quotation\"][\"nprojectmastercode\"]=_this.state.selectedRecord[\"nprojectmastercode\"]?_this.state.selectedRecord[\"nprojectmastercode\"].value:transactionStatus.NA;/*     quotationData[\"quotation\"][\"nuserrolecode\"] = this.state.selectedRecord[\"nuserrolecode\"]!==\"\" ? this.state.selectedRecord[\"nuserrolecode\"]\r\n         : transactionStatus.NA; */ // quotationData[\"quotation\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"]\n//   : transactionStatus.NA;\n// quotationData[\"quotation\"][\"drfwdate\"] = formatInputDate(this.state.selectedRecord[\"srfwdate\"], false);\nquotationData[\"quotation\"][\"dquotationdate\"]=_this.QuotationformatInputDate(_this.state.selectedRecord[\"dquotationdate\"]);//     quotationData[\"quotation\"][\"dquotationdate\"] = rearrangeDateFormat(quotationData.userinfo,this.state.selectedRecord[\"dquotationdate\"]);\nquotationData[\"quotation\"][\"ntzrfwdate\"]=quotationData.userinfo.ntimezonecode?quotationData.userinfo.ntimezonecode:\"-1\";quotationData[\"quotation\"][\"ntzquotationdate\"]=quotationData.userinfo.ntimezonecode?quotationData.userinfo.ntimezonecode:\"-1\";quotationData[\"quotation\"][\"nproductcatcode\"]=_this.state.selectedRecord[\"nproductcatcode\"]!==\"\"?_this.state.selectedRecord[\"nproductcatcode\"].value:transactionStatus.NA;quotationData[\"quotation\"][\"nproductcode\"]=_this.state.selectedRecord[\"nproductcode\"]!==\"\"?_this.state.selectedRecord[\"nproductcode\"].value:transactionStatus.NA;}if(_this.props.Login.operation===\"create\"&&_this.props.Login.screenName===\"IDS_TEST\"){inputParam=_this.onSaveQuotationTest(saveType,formRef);}if(_this.props.Login.operation===\"update\"&&(_this.props.Login.screenName===\"IDS_PRICE\"||_this.props.Login.screenName===\"IDS_CALCULATEPRICING\")){inputParam=_this.onSaveQuotationTestPrice(saveType,formRef);}if(_this.props.Login.operation===\"create\"&&_this.props.Login.screenName===\"IDS_CALCULATEPRICING\"){inputParam=_this.onSaveGrossQuotation(saveType,formRef);}if((_this.props.Login.operation===\"create\"||_this.props.Login.operation===\"update\")&&_this.props.Login.screenName===\"IDS_QUOTATION\"){inputParam={classUrl:\"quotation\",methodUrl:\"Quotation\",inputData:quotationData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch,selectedRecord:_objectSpread({},_this.state.selectedRecord)};}slideOutModal=_this.props.Login.screenName===\"IDS_TEST\"||_this.props.Login.screenName===\"IDS_PRICE\"||_this.props.Login.screenName===\"IDS_CALCULATEPRICING\"?\"openChildModal\":\"openModal\";var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,slideOutModal);}};_this.onSaveQuotationTestPrice=function(saveType,formRef){var quotationtestPriceData={\"userinfo\":_this.props.Login.userInfo,\"QuotationTest\":_this.props.Login.masterData.SelectedQuotation,\"nquotationcode\":_this.props.Login.masterData.SelectedQuotation.nquotationcode,\"nprojectmastercode\":_this.props.Login.masterData.SelectedQuotation.nprojectmastercode,//  \"nclientcatcode\":this.props.Login.masterData.SelectedQuotation.nclientcatcode,\n\"nclientcode\":_this.props.Login.masterData.SelectedQuotation.nclientcode//  \"nclientsitecode\":this.props.Login.masterData.SelectedQuotation.nclientsitecode,\n//  \"nclientcontactcode\":this.props.Login.masterData.SelectedQuotation.nclientcontactcode\n//    \"ncost\":this.props.Login.selectedRecord[0].ncost\n};var postParam=undefined;var dataState=undefined;var selectedId=null;if(_this.props.Login.operation===\"update\"){// edit\ndataState=_this.state.dataState;selectedId=_this.props.Login.selectedId;postParam={inputListName:\"Quotation\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\"};//  let selectedRecord1=[this.props.Login.selectedRecord];\nvar QuotationTestPriceArray=[];_this.props.Login.selectedRecord.forEach(function(item,index){if(item.ntotalamount<0){QuotationTestPriceArray[index]=_objectSpread(_objectSpread({},_this.props.Login.selectedRecord[index]),{},{ntotalamount:0});}QuotationTestPriceArray[index]={namount:_this.props.Login.selectedRecord[index].namount,nclientcode:_this.props.Login.masterData.SelectedQuotation.nclientcode,ncost:_this.props.Login.selectedRecord[index].ncost,nnoofsamples:_this.props.Login.selectedRecord[index].nnoofsamples,nprojectmastercode:_this.props.Login.selectedRecord[index].nprojectmastercode,nquotationcode:_this.props.Login.selectedRecord[index].nquotationcode,nquotationtestcode:_this.props.Login.selectedRecord[index].nquotationtestcode,ntestcode:_this.props.Login.selectedRecord[index].ntestcode,ntotalamount:_this.props.Login.selectedRecord[index].ntotalamount,ntotalgrosstamount:_this.props.Login.selectedRecord[index].ntotalgrosstamount,//  stestdescription: this.props.Login.selectedRecord[index].stestdescription,\nstestsynonym:_this.props.Login.selectedRecord[index].stestsynonym,ndiscountbandcode:_this.props.Login.selectedRecord[index].ndiscountbandcode.value,stestplatform:_this.props.Login.selectedRecord[index].stestplatform,squotationleadtime:_this.props.Login.selectedRecord[index].squotationleadtime,snotes:_this.props.Login.selectedRecord[index].snotes,nmethodcode:_this.props.Login.selectedRecord[index].nmethodcode,nclientcatcode:_this.props.Login.masterData.SelectedQuotation.nclientcatcode,nclientsitecode:_this.props.Login.masterData.SelectedQuotation.nclientsitecode,nclientcontactcode:_this.props.Login.masterData.SelectedQuotation.nclientcontactcode};});quotationtestPriceData[\"QuotationTest\"]=JSON.parse(JSON.stringify(QuotationTestPriceArray));}else{//add               \nvar priceList=[];_this.state.selectedRecord[\"ntestcode\"]&&_this.state.selectedRecord[\"ntestcode\"].map(function(item){return priceList.push({ntestcode:item.value});});quotationtestPriceData[\"QuotationTest\"]=priceList;}if(quotationtestPriceData[\"QuotationTest\"].hasOwnProperty('esignpassword')){if(quotationtestPriceData[\"QuotationTest\"]['esignpassword']===''){delete quotationtestPriceData[\"QuotationTest\"]['esigncomments'];delete quotationtestPriceData[\"QuotationTest\"]['esignpassword'];delete quotationtestPriceData[\"QuotationTest\"][\"agree\"];}}//console.log(\"update data:\", quotationtestPriceData);\nvar inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"QuotationTest\",inputData:quotationtestPriceData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch,selectedId:selectedId,dataState:dataState};return inputParam;};_this.onNumericInputOnChange=function(event,primaryFieldKey){var selectedRecord=_this.state.selectedRecord||{};if(primaryFieldKey&&event.target.name===\"nnoofsamples\"){var index=selectedRecord.findIndex(function(item){return item.nquotationtestcode===primaryFieldKey;});if(/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){selectedRecord[index][\"nnoofsamples\"]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.validateEsign=function(){var inputParam={inputData:{userinfo:_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.DeleteQuotation=function(methodUrl,selectedQuotation,operation,ncontrolCode){if(selectedQuotation.ntransactionstatus===transactionStatus.DRAFT){var postParam={inputListName:\"QuotationList\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\",primaryKeyValue:selectedQuotation.nquotationcode,fetchUrl:\"quotation/getQuotation\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:methodUrl,postParam:postParam,inputData:{userinfo:_this.props.Login.userInfo,quotation:selectedQuotation},operation:operation,isClearSearch:_this.props.Login.isClearSearch,selectedRecord:_objectSpread({},_this.state.selectedRecord)};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"IDS_QUOTATION\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}else if(selectedQuotation.ntransactionstatus===transactionStatus.APPROVED){toast.warn(_this.props.intl.formatMessage({id:\"IDS_CANNOTDELETEAPPROVEDQUOTATION\"}));}else if(selectedQuotation.ntransactionstatus===transactionStatus.RETIRED){toast.warn(_this.props.intl.formatMessage({id:\"IDS_CANNOTDELETERETIREDQUOTATION\"}));}};_this.QuotationPreview=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:\"IDS_VIEW\",openModal:true,operation:\"create\",modalScreenSize:false}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName,caseNo,nquotationtestcode){var selectedRecord=_this.state.selectedRecord||{};if(comboData!==null){switch(caseNo){case 1:if(fieldName===\"nclientcatcode\"){// const selectedRecord = this.state.selectedRecord || {};\nif(selectedRecord.nclientcatcode){if(parseInt(comboData.value)!==parseInt(selectedRecord.nclientcatcode.value)){// selectedRecord.nusercode={};\ndelete selectedRecord.nclientcode;delete selectedRecord.nclientsitecode;delete selectedRecord.nclientcontactcode;}}selectedRecord[fieldName]=comboData;selectedRecord[\"sclientcatname\"]=comboData.item[\"sclientcatname\"];_this.props.getQuotationClientCategoryComboService({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nclientcatcode.label,primarykey:selectedRecord.nclientcatcode.value}},selectedRecord);}if(fieldName===\"nclientcode\"){// const selectedRecord = this.state.selectedRecord || {};\nif(selectedRecord.nclientcode){if(parseInt(comboData.value)!==parseInt(selectedRecord.nclientcode.value)){// selectedRecord.nusercode={};\ndelete selectedRecord.nclientsitecode;delete selectedRecord.nclientcontactcode;}}selectedRecord[fieldName]=comboData;selectedRecord[\"sclientname\"]=comboData.item[\"sclientname\"];_this.props.getQuotaionClientComboService({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nclientcode.label,primarykey:selectedRecord.nclientcode.value}},selectedRecord);}if(fieldName===\"nclientsitecode\"){// const selectedRecord = this.state.selectedRecord || {};\nif(selectedRecord.nclientsitecode){if(parseInt(comboData.value)!==parseInt(selectedRecord.nclientsitecode.value)){// selectedRecord.nusercode={};\ndelete selectedRecord.nclientcontactcode;}}selectedRecord[fieldName]=comboData;selectedRecord[\"sclientsitename\"]=comboData.item[\"sclientsitename\"];_this.props.getQuotaionClientSiteComboService({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nclientsitecode.label,primarykey:selectedRecord.nclientsitecode.value,nclientcode:selectedRecord.nclientcode.value}},selectedRecord);}if(fieldName===\"nproductcatcode\"){//\n// const selectedRecord = this.state.selectedRecord || {};\nif(selectedRecord.nproductcatcode){if(parseInt(comboData.value)!==parseInt(selectedRecord.nproductcatcode.value)){// selectedRecord.nusercode={};\ndelete selectedRecord.nproductcode;}}selectedRecord[fieldName]=comboData;selectedRecord[\"sproductcatname\"]=comboData.item[\"sproductcatname\"];_this.props.getQuotaionProductCategoryComboService({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nproductcatcode.label,primarykey:selectedRecord.nproductcatcode.value}},selectedRecord);}break;case 2:// const selectedRecordfilter = this.state.selectedRecordfilter || {};\n// selectedRecordfilter[fieldName] = comboData;\n// this.setState({ selectedRecordfilter });\n// break;\n// const selectedRecord = this.state.selectedRecord || {};\nselectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});break;case 3:selectedRecord[fieldName]=comboData;if(selectedRecord[fieldName]==null){selectedRecord[fieldName]=[];if(fieldName===\"ndiscountbandcode\"){selectedRecord[\"DiscountAmount\"]=0;selectedRecord[\"ndiscountpercentage\"]=0;}else if(fieldName===\"nvatbandcode\"){selectedRecord[\"VatAmount\"]=0;selectedRecord[\"nvatpercentage\"]=0;}selectedRecord[\"TotalNetAmount\"]=parseFloat((_this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+selectedRecord.VatAmount-_this.state.selectedRecord.DiscountAmount).toFixed(2));}else{if(fieldName===\"ndiscountbandcode\"){var VatAmount=_this.state.selectedRecord.VatAmount===undefined?0.00:_this.state.selectedRecord.VatAmount;selectedRecord[\"DiscountAmount\"]=parseFloat((_this.props.Login.QuotationGrossAmount[0].ntotalgrossamount*(selectedRecord.ndiscountbandcode.item.namount/100)).toFixed(2));//  selectedRecord[\"TotalNetAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+(this.state.selectedRecord.DiscountAmount-VatAmount);\nselectedRecord[\"TotalNetAmount\"]=parseFloat((_this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+VatAmount-_this.state.selectedRecord.DiscountAmount).toFixed(2));selectedRecord[\"ndiscountpercentage\"]=selectedRecord.ndiscountbandcode.item.namount;}else if(fieldName===\"nvatbandcode\"){selectedRecord[\"VatAmount\"]=parseFloat((_this.props.Login.QuotationGrossAmount[0].ntotalgrossamount*(selectedRecord.nvatbandcode.item.namount/100)).toFixed(2));//            selectedRecord[\"TotalNetAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+(selectedRecord.DiscountAmount-this.state.selectedRecord.VatAmount);\nselectedRecord[\"TotalNetAmount\"]=parseFloat((_this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+_this.state.selectedRecord.VatAmount-selectedRecord.DiscountAmount).toFixed(2));selectedRecord[\"nvatpercentage\"]=selectedRecord.nvatbandcode.item.namount;}}_this.setState({selectedRecord:selectedRecord});break;case 4:if(fieldName===\"nprojecttypecode\"){if(selectedRecord.nprojecttypecode){if(parseInt(comboData.value)!==parseInt(selectedRecord.nprojecttypecode.value)){delete selectedRecord.nprojectmastercode;delete selectedRecord.sprojecttitle;delete selectedRecord.srfwdate;delete selectedRecord.suserrolename;delete selectedRecord.susername;}}selectedRecord[fieldName]=comboData;selectedRecord[\"sprojecttypename\"]=comboData.item[\"sprojecttypename\"];_this.props.getProjectTypeComboService({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nprojecttypecode.label,primarykey:selectedRecord.nprojecttypecode.value}},selectedRecord);}if(fieldName===\"nprojectmastercode\"){if(selectedRecord.nprojectmastercode){if(parseInt(comboData.value)!==parseInt(selectedRecord.nprojectmastercode.value)){delete selectedRecord.sprojecttitle;delete selectedRecord.srfwdate;delete selectedRecord.suserrolename;delete selectedRecord.susername;}}selectedRecord[fieldName]=comboData;selectedRecord[\"sprojectcode\"]=comboData.item[\"sprojectcode\"];_this.props.getProjectCodeComboService({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nprojectmastercode.label,primarykey:selectedRecord.nprojectmastercode.value}},selectedRecord);}break;case 5:var selectedRecordindex=selectedRecord.findIndex(function(item){return item.nquotationtestcode===nquotationtestcode?item:\"\";});selectedRecord[fieldName]=comboData;if(selectedRecord[fieldName]==null){selectedRecord[selectedRecordindex][fieldName]=[];}else{//  selectedRecord[fieldName] = comboData;\n//  selectedRecord[\"namount\"]=comboData.item.namount;\nvar str=selectedRecord[selectedRecordindex];var discountamount=parseFloat((str.ncost*str.nnoofsamples*(comboData.item.namount/100)).toFixed(2));var count=str.ncost*str.nnoofsamples-discountamount;selectedRecord[selectedRecordindex]=_objectSpread(_objectSpread({},str),{},{ntotalamount:parseFloat(count.toFixed(2)),namount:comboData.item.namount,ndiscountbandcode:comboData.item.ndiscountbandcode});selectedRecord[selectedRecordindex][\"ndiscountbandcode\"]={label:comboData.item.sdiscountbandname,value:comboData.item.ndiscountbandcode};//    selectedRecord[selectedRecordindex][\"ndiscountbandcode\"]=  {...selectedRecord[selectedRecordindex],\n//     label :comboData.item.sdiscountbandname,\n//     value:comboData.item.ndiscountbandcode\n// }\n}_this.setState(selectedRecord);break;default:break;};}else{if(fieldName==='noemcode'){delete selectedRecord.noemcode;}_this.setState({selectedRecord:selectedRecord});}};_this.closeModalShow=function(){var loadEsign=_this.props.Login.loadEsign;var modalShow=_this.props.Login.modalShow;var popUp=_this.props.Login.popUp;var selectedRecord=_this.props.Login.selectedRecord;if(_this.props.Login.loadEsign){loadEsign=false;}else{modalShow=false;selectedRecord={};popUp=undefined;}var updateInfo={typeName:DEFAULT_RETURN,data:{modalShow:modalShow,selectedRecord:selectedRecord,selectedId:null,loadEsign:loadEsign,popUp:popUp}};_this.props.updateStore(updateInfo);};_this.onNumericInputChange=function(value,name,primaryFieldKey){var selectedRecord=_this.state.selectedRecord||{};var index=selectedRecord.findIndex(function(item){return item.nquotationtestcode===primaryFieldKey;});selectedRecord[index][name]=value;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,primaryFieldKey){var selectedRecord=_this.state.selectedRecord||{};if(event.target.name==='snotes'||event.target.name==='stestplatform'||event.target.name==='squotationleadtime'){var index=selectedRecord.findIndex(function(item){return item.nquotationtestcode===primaryFieldKey;});selectedRecord[index][event.target.name]=event.target.value;}else if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.RETIRED;else selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{if(primaryFieldKey&&(event.target.name===\"ncost\"||event.target.name===\"nnoofsamples\"||event.target.name===\"ntotalamount\")){var _index=selectedRecord.findIndex(function(item){return item.nquotationtestcode===primaryFieldKey;});// if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){\nif(/^-?\\d*?$/.test(event.target.value)){selectedRecord[_index][event.target.name]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}}_this.setState({selectedRecord:selectedRecord});};_this.onnetAmountEvent=function(nquotationtestcode){var selectedRecord=_this.state.selectedRecord;var selectedRecordindex=selectedRecord.findIndex(function(item){return item.nquotationtestcode===nquotationtestcode?item:\"\";});var str=selectedRecord[selectedRecordindex];//  let count= (str.ncost * str.nnoofsamples)-str.namount; \nvar discountamount=parseFloat((str.ncost*str.nnoofsamples*(str.namount/100)).toFixed(2));var count=str.ncost*str.nnoofsamples-discountamount;// selectedRecord[selectedRecordindex]={...str,ntotalamount:count}\nselectedRecord[selectedRecordindex]=_objectSpread(_objectSpread({},str),{},{ntotalamount:parseFloat(count.toFixed(2))});_this.setState(selectedRecord);};_this.approveQuotation=function(methodUrl,selectedQuotation,operation,ncontrolCode){if(selectedQuotation.ntransactionstatus===transactionStatus.DRAFT){var postParam={inputListName:\"Quotation\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\",primaryKeyValue:selectedQuotation.nquotationcode,fetchUrl:\"quotation/getQuotation\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:methodUrl,postParam:postParam,inputData:{\"userinfo\":_this.props.Login.userInfo,\"quotation\":selectedQuotation},operation:operation,isClearSearch:_this.props.Login.isClearSearch,selectedRecord:_objectSpread({},_this.state.selectedRecord)};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"IDS_QUOTATION\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}else if(selectedQuotation.ntransactionstatus===transactionStatus.APPROVED){toast.warn(_this.props.intl.formatMessage({id:\"IDS_ALREADYAPPROVED\"}));}else if(selectedQuotation.ntransactionstatus===transactionStatus.RETIRED){toast.warn(_this.props.intl.formatMessage({id:\"IDS_ALREADYRETIRED\"}));}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};_this.onSaveModalClick=function(){console.log(\"savemodal\");var inputData={};var quotationData=[];if(_this.props.Login.masterData.SelectedQuotation&&_this.props.Login.masterData.SelectedQuotation.ntransactionstatus===transactionStatus.APPROVED){var retireId=_this.state.controlMap.has(\"RetireQuotation\")&&_this.state.controlMap.get(\"RetireQuotation\").ncontrolcode;var inputParam={};var postParam={inputListName:\"Quotation\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\",primaryKeyValue:_this.props.Login.masterData.SelectedQuotation.nquotationcode,fetchUrl:\"quotation/getQuotation\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};if(_this.props.Login.modalTitle===\"IDS_RETIREQUOTATION\"){if(_this.state.selectedRecord[\"dretiredatetime\"]!==null){quotationData[\"dtransactiondate\"]=formatInputDate(_this.state.selectedRecord[\"dretiredatetime\"],false);quotationData[\"ntransdatetimezonecode\"]=_this.props.Login.userInfo.ntimezonecode?_this.props.Login.userInfo.ntimezonecode:\"-1\";quotationData[\"sretireremarks\"]=_this.state.selectedRecord[\"sretireremarks\"]?_this.state.selectedRecord[\"sretireremarks\"]:\"\";quotationData[\"nquotationcode\"]=_this.props.Login.masterData.SelectedQuotation.nquotationcode;quotationData[\"nquotationversioncode\"]=_this.props.Login.masterData.SelectedQuotation.nquotationversioncode;inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"Quotation\",postParam:postParam,inputData:{\"userinfo\":_this.props.Login.userInfo,\"quotation\":_objectSpread(_objectSpread({},_this.props.Login.masterData.SelectedQuotation),{},{\"dtransactiondate\":quotationData[\"dtransactiondate\"],\"sretireremarks\":quotationData[\"sretireremarks\"],\"nquotationcode\":quotationData[\"nquotationcode\"],\"nquotationversioncode\":quotationData[\"nquotationversioncode\"],\"ntransdatetimezonecode\":quotationData[\"ntransdatetimezonecode\"]})},operation:_this.props.Login.operation,isClearSearch:_this.props.Login.isClearSearch,selectedRecord:_objectSpread({},_this.state.selectedRecord)};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,retireId)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,modalShow:false,screenName:\"IDS_QUOTATION\",operation:_this.props.Login.operation}};_this.props.updateStore(updateInfo);}else{_this.props.modalSave(inputParam,masterData);}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDATE\"}));}}}else if(_this.props.Login.masterData.SelectedQuotation.ntransactionstatus===transactionStatus.RETIRED){toast.warn(_this.props.intl.formatMessage({id:\"IDS_ALREADYRETIRED\"}));}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTAPPROVEDQUOTATION\"}));}};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.data,event.dataState),dataState:event.dataState});};_this.historydataStateChange=function(event){_this.setState({dataResult:process(_this.state.data,event.historydataState),historydataState:event.historydataState});};_this.ConfirmDelete=function(selectedQuotation,operation,deleteId,screenName){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.DeleteQuotation(screenName,selectedQuotation,operation,deleteId);});};_this.reloadData=function(){_this.searchRef.current.value=\"\";//    if (Object.values(this.props.Login.masterData.SelectedQuotation).length && this.props.Login.masterData.SelectedQuotation !== undefined) {\n// if (this.props.Login.masterData.SelectedQuotation !== undefined) {\nvar inputParam={inputData:{userinfo:_this.props.Login.userInfo},classUrl:\"quotation\",methodUrl:\"Quotation\"};_this.props.getreloadQuotation(inputParam);// } \n// else {\n//   toast.warn(\n//     this.props.intl.formatMessage({\n//       id: \"IDS_PROJECTTYPENOTAVAILABLE\",\n//     })\n//   );\n// }\n};_this.DeleteQuotationTest=function(deleteParam){deleteParam.selectedRecord[\"nclientcode\"]=_this.props.Login.masterData.SelectedQuotation.nclientcode;deleteParam.selectedRecord[\"nprojectmastercode\"]=_this.props.Login.masterData.SelectedQuotation.nprojectmastercode;deleteParam.selectedRecord[\"nclientcatcode\"]=_this.props.Login.masterData.SelectedQuotation.nclientcatcode;deleteParam.selectedRecord[\"nclientsitecode\"]=_this.props.Login.masterData.SelectedQuotation.nclientsitecode;deleteParam.selectedRecord[\"nclientcontactcode\"]=_this.props.Login.masterData.SelectedQuotation.nclientcontactcode;var postParam={inputListName:\"QuotationList\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\",primaryKeyValue:deleteParam.selectedRecord.nquotationtestcode,fetchUrl:\"quotation/getQuotationTest\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={classUrl:\"quotation\",methodUrl:\"QuotationPrice\",postParam:postParam,inputData:{\"QuotationTestPrice\":deleteParam.selectedRecord,//.dataItem,\n//      \"npriceversioncode\":this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode,\n\"userinfo\":_this.props.Login.userInfo},operation:\"delete\"//  priceDataState:this.state.priceDataState\n};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:\"IDS_TESTPRICE\"}),operation:deleteParam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var modalShow=_this.props.Login.modalShow;var openModal=_this.props.Login.openModal;var selectedRecord=_this.state.selectedRecord;//    let selectedRecord = this.state.selectedRecord;\nif(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"||_this.props.Login.operation===\"approve\"){loadEsign=false;openModal=false;selectedRecord={};}else if(_this.props.Login.operation===\"retire\"){loadEsign=false;openModal=false;modalShow=true;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']='';selectedRecord['esigncomments']='';selectedRecord['esignreason']='';}}else{openModal=false;modalShow=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,modalShow:modalShow}};_this.props.updateStore(updateInfo);};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};var _dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={selectedRecord:{},error:\"\",userRoleControlRights:[],selectedQuotation:undefined,controlMap:new Map(),Instrument:[],dataState:_dataState,dataResult:[],data:[],sidebarview:false};_this.searchRef=React.createRef();_this.searchFieldList=[\"squotationno\",\"sclientcatname\",\"sclientname\",\"sclientsiteaddress\",\"soemname\",\"sproductcatname\",\"sproductname\",\"squotationdate\",\"sdescription\",\"sdeviationremarks\",\"sversionstatus\",\"sretireremarks\"];_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(Quotation,[{key:\"onSaveQuotationTest\",value:function onSaveQuotationTest(saveType,formRef){var _this2=this;var inputData=[];inputData[\"userinfo\"]=this.props.Login.userInfo;// inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\n//  inputData[\"Quotation\"] = {};\nvar testArray=[];testArray=this.state.selectedRecord.ntestcode.map(function(item){var QuotationData={};QuotationData[\"ntestcode\"]=item.value;QuotationData[\"nquotationcode\"]=_this2.props.Login.masterData.SelectedQuotation.nquotationcode;QuotationData[\"nclientcode\"]=_this2.props.Login.masterData.SelectedQuotation.nclientcode;QuotationData[\"nprojectmastercode\"]=_this2.props.Login.masterData.SelectedQuotation.nprojectmastercode;return QuotationData;});inputData['QuotationTest']=testArray;var inputParam={classUrl:\"quotation\",methodUrl:\"QuotationTest\",inputData:inputData,operation:this.props.Login.operation,saveType:saveType,formRef:formRef,searchRef:this.searchRef,isClearSearch:this.props.Login.isClearSearch,isChild:true};return inputParam;}},{key:\"QuotationformatInputDate\",value:function QuotationformatInputDate(date){var formattedDate=\"\";formattedDate=date.getFullYear()+\"-\"+(\"00\"+(date.getMonth()+1)).slice(-2)+\"-\"+(\"00\"+date.getDate()).slice(-2)+\"T00:00:00Z\";return formattedDate;}},{key:\"onSaveGrossQuotation\",value:function onSaveGrossQuotation(saveType,formRef){var quotationData={};quotationData[\"userinfo\"]=this.props.Login.userInfo;quotationData[\"GrossQuotation\"]={nquotationcode:this.props.Login.masterData.SelectedQuotation.nquotationcode,nsitecode:this.props.Login.userInfo.nmastersitecode,ndiscountamount:this.state.selectedRecord.DiscountAmount,nvatamount:this.state.selectedRecord.VatAmount,ntotalnetamount:this.state.selectedRecord.TotalNetAmount,ntotalgrossamount:this.props.Login.QuotationGrossAmount[0].ntotalgrossamount,nclientcatcode:this.props.Login.masterData.SelectedQuotation.nclientcatcode,nclientcode:this.props.Login.masterData.SelectedQuotation.nclientcode,nclientsitecode:this.props.Login.masterData.SelectedQuotation.nclientsitecode,nclientcontactcode:this.props.Login.masterData.SelectedQuotation.nclientcontactcode,nprojectmastercode:this.props.Login.masterData.SelectedQuotation.nprojectmastercode};quotationData[\"GrossQuotation\"][\"ndiscountbandcode\"]=this.state.selectedRecord[\"ndiscountbandcode\"]?this.state.selectedRecord[\"ndiscountbandcode\"].value:transactionStatus.NA;quotationData[\"GrossQuotation\"][\"nvatbandcode\"]=this.state.selectedRecord[\"nvatbandcode\"]?this.state.selectedRecord[\"nvatbandcode\"].value:transactionStatus.NA;// const postParam = {\n//   inputListName: \"Quotation\",\n//   selectedObject: \"SelectedQuotation\",\n//   primaryKeyField: \"nquotationcode\",\n//   primaryKeyValue: this.props.Login.masterData.SelectedQuotation.nquotationcode,\n//   fetchUrl: \"quotation/getQuotation\",\n//   fecthInputObject: { userinfo: this.props.Login.userInfo },\n// };\nvar inputParam={classUrl:\"quotation\",methodUrl:\"GrossQuotation\",// postParam,\ninputData:quotationData,searchRef:this.searchRef,operation:this.props.Login.operation,saveType:saveType,formRef:formRef,isClearSearch:this.props.Login.isClearSearch,isChild:true};return inputParam;}},{key:\"render\",value:function render(){var _this3=this;var versionStatusCSS=\"outline-secondary\";var activeIconCSS=\"fa fa-check\";if(this.props.Login.masterData.SelectedQuotation&&this.props.Login.masterData.SelectedQuotation.ntransactionstatus===transactionStatus.APPROVED){versionStatusCSS=\"outline-success\";}else if(this.props.Login.masterData.SelectedQuotation&&this.props.Login.masterData.SelectedQuotation.ntransactionstatus===transactionStatus.RETIRED){versionStatusCSS=\"outline-danger\";activeIconCSS=\"\";}else if(this.props.Login.masterData.SelectedQuotation&&this.props.Login.masterData.SelectedQuotation.ntransactionstatus===transactionStatus.DRAFT){activeIconCSS=\"\";}if(this.props.Login.openModal||this.props.Login.modalShow){this.mandatoryFields=this.findMandatoryFields(this.props.Login.screenName,this.state.selectedRecord,this.props.Login.operation);}var userInfo=this.props.Login.userInfo;var addId=this.state.controlMap.has(\"AddQuotation\")&&this.state.controlMap.get(\"AddQuotation\").ncontrolcode;var editId=this.state.controlMap.has(\"EditQuotation\")&&this.state.controlMap.get(\"EditQuotation\").ncontrolcode;var deleteId=this.state.controlMap.has(\"DeleteQuotation\")&&this.state.controlMap.get(\"DeleteQuotation\").ncontrolcode;var approveId=this.state.controlMap.has(\"ApproveQuotation\")&&this.state.controlMap.get(\"ApproveQuotation\").ncontrolcode;var retireId=this.state.controlMap.has(\"RetireQuotation\")&&this.state.controlMap.get(\"RetireQuotation\").ncontrolcode;var addQuotationTestId=this.state.controlMap.has(\"AddQuotationTest\")&&this.state.controlMap.get(\"AddQuotationTest\").ncontrolcode;var updateQuotationTestId=this.state.controlMap.has(\"EditQuotationTest\")&&this.state.controlMap.get(\"EditQuotationTest\").ncontrolcode;// const grossQuotationeId = this.state.controlMap.has(\"CalculatePricing\") && this.state.controlMap.get(\"CalculatePricing\").ncontrolcode;\nvar viewQuotationId=this.state.controlMap.has(\"ViewQuotation\")&&this.state.controlMap.get(\"ViewQuotation\").ncontrolcode;var editTestPriceParam={screenName:\"IDS_PRICE\",\"operation\":\"update\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolCode:updateQuotationTestId};var selectedQuotation=this.props.Login.masterData.SelectedQuotation;var filterParam={inputListName:\"Quotation\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationcode\",fetchUrl:\"quotation/getActiveQuotationById\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,searchFieldList:this.searchFieldList};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:\"\".concat(!this.state.sidebarview?'4':\"2\")},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this3.setState({sidebarview:!_this3.state.sidebarview});},className:\"sidebar-view-btn\"},!this.state.sidebarview?/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-less-than\"}):/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-greater-than\"})),/*#__PURE__*/React.createElement(ListMaster,{screenName:this.props.intl.formatMessage({id:\"IDS_QUOTATION\"}),masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.Quotation,getMasterDetail:function getMasterDetail(quotationData){return _this3.props.getQuotation(quotationData,_this3.props.Login.userInfo,_this3.props.Login.masterData);},selectedMaster:selectedQuotation,primaryKeyField:\"nquotationcode\",mainField:\"squotationno\",firstField:\"sclientname\",secondField:\"sversionstatus\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData//     openModal={() => this.props.addQuotation(\"create\", selectedQuotation, userInfo, addId, this.state.ProjectMasterList)}\n,openModal:function openModal(){return _this3.props.addQuotation(\"create\",userInfo,addId,selectedQuotation);},isMultiSelecct:false,hidePaging:false,isClearSearch:this.props.Login.isClearSearch,openFilter:this.openFilter,closeFilter:this.closeFilter// onFilterSubmit={this.onFilterSubmit}    \n,showFilterIcon:false,showFilter:this.props.Login.showFilter/*         filterComponent={[\r\n                  {\r\n                    \"IDS_PROJECTMASTERFILTER\":\r\n                      <ProjectMasterFilter\r\n                        filterProjectType={this.state.ProjectMasterList || []}\r\n                        nfilterProjectType={this.props.Login.masterData.SelectedProjectType || {}}\r\n                        onComboChange={this.onComboChange}\r\n                        selectedRecord={this.state.selectedRecordfilter || {}}\r\n                      />\r\n                  }\r\n                ]} */})),/*#__PURE__*/React.createElement(Col,{md:\"\".concat(!this.state.sidebarview?'8':\"10\")},selectedQuotation?/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},selectedQuotation.sclientname),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-outlined \".concat(versionStatusCSS,\" btn-sm mr-3\")},selectedQuotation.sversionstatus)),/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline\"},/*#__PURE__*/React.createElement(ViewInfoDetails,{selectedObject:this.props.Login.masterData.SelectedQuotation,screenHiddenDetails:this.state.userRoleControlRights.indexOf(editId)===-1,screenName:this.props.Login.screenName,dataTip:this.props.intl.formatMessage({id:\"IDS_VIEW\"}),rowList:[[{dataField:\"sclientcatname\",idsName:\"IDS_CLIENTCATEGORY\"},{dataField:\"soemnameview\",idsName:\"IDS_OEM\"}],[{dataField:\"sclientname\",idsName:\"IDS_CLIENT\"},{dataField:\"sproductcatname\",idsName:this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode]||\"\"}],[{dataField:\"scontactname\",idsName:\"IDS_CONTACTPERSON\"},{dataField:\"sproductname\",idsName:this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode]||\"\"}],[{dataField:\"sphoneno\",idsName:\"IDS_CONTACTNUMBER\"},{dataField:\"squotationdate\",idsName:\"IDS_QUOTATIONDATE\"}],[{dataField:\"semail\",idsName:\"IDS_EMAILID\"}],[{dataField:\"sdescription\",idsName:\"IDS_DESCRIPTION\"}],[{dataField:\"sdeviationremarks\",idsName:\"IDS_REMARKS\"}]]}),/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2\",name:\"edittestname\",hidden:this.state.userRoleControlRights.indexOf(editId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_EDIT\"})//data-for=\"tooltip_list_wrap\"\n,onClick:function onClick(){return _this3.props.addQuotation(\"update\",userInfo,editId,selectedQuotation);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt})),/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",name:\"deletetestname\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"})//   data-for=\"tooltip_list_wrap\"\n,hidden:this.state.userRoleControlRights.indexOf(deleteId)===-1,onClick:function onClick(){return _this3.ConfirmDelete(selectedQuotation,\"delete\",deleteId,\"Quotation\");}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"approveQuotation\",className:\"btn btn-circle outline-grey mr-2\",hidden:this.state.userRoleControlRights.indexOf(approveId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_APPROVE\"})//data-for=\"tooltip_list_wrap\"\n,onClick:function onClick(){return _this3.approveQuotation(\"Quotation\",selectedQuotation,\"approve\",approveId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faThumbsUp})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"retireQuotation\",className:\"btn btn-circle outline-grey mr-2\",hidden:this.state.userRoleControlRights.indexOf(retireId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_RETIRE\"})//data-for=\"tooltip_list_wrap\"\n,onClick:function onClick(){return _this3.props.handleRetireQuotation(\"retire\",userInfo,retireId,selectedQuotation);}// onClick={() => this.retireQuotation(selectedQuotation, retireId)}\n},/*#__PURE__*/React.createElement(RetireaQuotation,null)))))),/*#__PURE__*/React.createElement(Card.Body,{className:\"form-static-wrap\"},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs border-0\"},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs border-0\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(QuotationTab,{primaryKeyField:\"nquotationtestcode\"// data={this.props.Login.masterData.ProjectMember}\n,data:this.state.data// dataResult={this.props.Login.masterData.ProjectMember}\n,dataResult:this.state.dataResult,masterData:this.props.Login.masterData,screenName:this.props.Login.screenName,operation:this.props.Login.operation,openChildModal:this.props.Login.openChildModal,crudMaster:this.props.crudMaster,errorCode:this.props.Login.errorCode,validateEsignCredential:this.props.validateEsignCredential,loadEsign:this.props.Login.loadEsign,showAccordian:this.state.showAccordian,selectedRecord:this.state.selectedRecord||{}// dataState={{skip: 0, take: 10}}\n// dataState={this.props.Login.dataState}\n,dataState:this.state.dataState,dataStateChange:this.dataStateChange// extractedColumnList={fieldsForGrid} --\n,controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo//    getProjectmasterAddMemberService={(this.props.Login.screenName,this.props.Login.operation,this.props.getProjectmasterAddMemberService,this.props.Login.userInfo,this.props.Login.ncontrolCode)}\n,getProjectmasterAddMemberService:this.props.getProjectmasterAddMemberService// --   fetchRecord={this.props.getPricingEditService}\n//--       editParam={{...editTestPriceParam, \"updateType\":\"Single\", priceDataState:this.state.priceDataState}}\n//  deleteParam={{operation:\"delete\"}}\n// reloadData={this.reloadData}\n// --      addRecord = {() => this.openModal(addId)}\n,pageable:true,onTabChange:this.onTabChange,updateStore:this.props.updateStore,scrollable:'scrollable'// gridHeight = {'600px'}\n,isActionRequired:true,isToolBarRequired:false,selectedId:this.props.Login.selectedId,viewAttachment:this.props.viewAttachment,MembersList:this.props.Login.MembersList,onComboChange:this.onComboChange// File\n,addProjectMasterFile:this.props.addProjectMasterFile,esignRights:this.props.Login.userRoleControlRights// ntransactionstatus={selectedProjectMaster.ntransactionstatus}  ---\n//  selectedRecord={this.props.Login.selectedRecord}\n,onDropProjectMasterFile:this.onDropProjectMasterFile,onInputOnChange:this.onInputOnChange,screenData:this.props.Login.screenData,deleteAttachment:this.deleteAttachment,ncontrolCode:this.props.Login.ncontrolCode,linkMaster:this.props.Login.linkMaster,addQuotationTestId:this.props.Login.addQuotationTestId,updateQuotationTestId:this.props.Login.updateQuotationTestId,addId:this.props.Login.addId,editParam:_objectSpread({},editTestPriceParam)// fetchRecord={this.props.getQuotationPricingEditService}\n,deleteRecord:this.DeleteQuotationTest,getQuotationAddTestService:this.props.getQuotationAddTestService,getQuotationPricingEditService:this.props.getQuotationPricingEditService,QuotationTestList:this.props.Login.QuotationTestList,onSaveClick:this.onSaveClick,onnetAmountEvent:this.onnetAmountEvent,onNumericInputChange:this.onNumericInputChange,DiscountBand:this.props.Login.DiscountBand,VATBand:this.props.Login.VATBand,modalScreenSize:this.props.Login.modalScreenSize,QuotationGrossAmount:this.props.Login.QuotationGrossAmount,QuotationHistorydata:this.props.Login.masterData.QuotationHistory,QuotationHistorydataResult:this.props.Login.masterData.QuotationHistory,historydataState:this.state.historydataState,historydataStateChange:this.historydataStateChange,selectedQuotation:selectedQuotation,GrossQuotation:this.props.GrossQuotation,EstimateQuotation:this.props.Login.masterData.GrossQuotation[0],onFocus:this.handleFocus})))),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"horizontal-line\"})))))):\"\"))),this.props.Login.openModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,size:this.props.Login.modalScreenSize===true?\"xl\":\"lg\",closeModal:this.closeModal,hideSave:this.props.Login.screenName===\"IDS_VIEW\"?true:false,operation:this.props.Login.screenName===\"IDS_CALCULATEPRICING\"||this.props.Login.screenName===\"IDS_VIEW\"?\"\":this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{}//  mandatoryFields={this.props.Login.screenName !==\"IDS_PRICE\" ? this.mandatoryFields : []}\n,mandatoryFields:this.mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.screenName===\"IDS_QUOTATION\"?/*#__PURE__*/React.createElement(AddQuotation,{userInfo:this.props.Login.userInfo,genericlabel:this.props.Login.genericLabel,selectedRecord:this.state.selectedRecord||{}// selectedclientcode={this.state.selectedRecord.nclientcode || {}}\n,sclientsiteaddress:this.props.Login.sclientsiteaddress,SelectedClient:this.props.Login.SelectedClient,ClientCategory:this.props.Login.ClientCategory,Client:this.props.Login.Client,ClientSite:this.props.Login.ClientSite,ClientContact:this.props.Login.ClientContact,OEM:this.props.Login.OEM,ProjectCode:this.props.Login.ProjectCode,ProjectType:this.props.Login.ProjectType,ProjectMaster:this.props.Login.ProjectMaster,QuotationType:this.props.Login.QuotationType,Product:this.props.Login.Product,ProductCategory:this.props.Login.ProductCategory,onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange//     onNumericInputChange={this.onNumericInputChange}\n,handleDateChange:this.handleDateChange}):this.props.Login.screenName===\"IDS_VIEW\"?/*#__PURE__*/React.createElement(AddQuotationPreview,{selectedQuotation:this.props.Login.masterData.SelectedQuotation,userInfo:this.props.Login.userInfo,genericlabel:this.props.Login.genericLabel}):\"\"}),this.props.Login.modalShow?/*#__PURE__*/React.createElement(ModalShow,{modalShow:this.props.Login.modalShow,closeModal:this.closeModalShow,onSaveClick:this.onSaveModalClick,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,mandatoryFields:this.mandatoryFields,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},modalTitle:this.props.Login.modalTitle,modalBody:this.props.Login.modalTitle===\"IDS_RETIREQUOTATION\"?/*#__PURE__*/React.createElement(RetireQuotation,{selectedRecord:this.state.selectedRecord||{}// Status={this.props.Login.screenName === \"IDS_RETIRE\"}\n,TimeZoneList:this.props.Login.TimeZoneList,onInputOnChange:this.onInputOnChange,handleDateChange:this.handleDateChange,userInfo:this.props.Login.userInfo,esign:this.props.Login.loadEsign}):\"\"}):\"\");}},{key:\"findMandatoryFields\",value:function findMandatoryFields(screenName,selectedRecord,operation){var mandatoryFields=[];if(screenName===\"IDS_QUOTATION\"&&operation!==\"retire\"){mandatoryFields=[{\"idsName\":\"IDS_CLIENTCATEGORY\",\"dataField\":\"nclientcatcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_CLIENT\",\"dataField\":\"nclientcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_CLIENTSITE\",\"dataField\":\"nclientsitecode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_CONTACTNAME\",\"dataField\":\"nclientcontactcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},//      { \"idsName\": \"IDS_OEM\", \"dataField\": \"noemcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\n//      { \"idsName\": \"IDS_INVOICEADDRESS\", \"dataField\": \"sinvoiceaddress\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\n//      { \"idsName\": \"IDS_QUOTATIONTYPE\", \"dataField\": \"nquotationtypecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\n//      { \"idsName\": \"IDS_PROJECTTYPE\", \"dataField\": \"nprojecttypecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\n//      { \"idsName\": \"IDS_PROJECTCODE\", \"dataField\": \"nprojectmastercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\n//      { \"idsName\": \"IDS_PROJECTTITLE\", \"dataField\": \"sprojecttitle\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\n//      { \"idsName\": \"IDS_RFWDATE\", \"dataField\": \"srfwdate\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"textbox\" },\n//     { \"idsName\": \"IDS_ROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\n//     { \"idsName\": \"IDS_USER\", \"dataField\": \"susername\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\n{\"idsName\":this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode]||\"\",\"dataField\":\"nproductcatcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode]||\"\",\"dataField\":\"nproductcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_QUOTATIONDATE\",\"dataField\":\"dquotationdate\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"selectbox\"}];// mandatoryFields.forEach(item => item.mandatory === true && mandatoryFields.push(item));\nreturn mandatoryFields;}else if(screenName===\"IDS_QUOTATION\"&&operation===\"retire\"){mandatoryFields=[{\"idsName\":\"IDS_RETIREDATE\",\"dataField\":\"dretiredatetime\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"selectbox\"}];return mandatoryFields;}else{return[];}}},{key:\"handleFocus\",value:/*\r\n  dataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(\r\n        this.props.Login.masterData[\"selectedSection\"],\r\n        event.dataState\r\n      ),\r\n      sectionDataState: event.dataState,\r\n    });\r\n  };\r\n*/function handleFocus(e){e.target.select();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var _this$state=this.state,selectedRecord=_this$state.selectedRecord,userRoleControlRights=_this$state.userRoleControlRights,controlMap=_this$state.controlMap,filterData=_this$state.filterData,dataResult=_this$state.dataResult;if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){selectedRecord=this.props.Login.selectedRecord;this.setState({selectedRecord:selectedRecord});}//   if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n//     userRoleControlRights = [];\n//     if (this.props.Login.userRoleControlRights) {\n//       this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode\n//       ] &&\n//         Object.values(\n//           this.props.Login.userRoleControlRights[\n//           this.props.Login.userInfo.nformcode\n//           ]\n//         ).map((item) => userRoleControlRights.push(item.ncontrolcode));\n//     }\n//     controlMap = getControlMap(\n//       this.props.Login.userRoleControlRights,\n//       this.props.Login.userInfo.nformcode\n//     );\n//     // this.setState({ controlMap, userRoleControlRights });\n//     this.setState({\n//       userRoleControlRights, controlMap, data: this.props.Login.masterData.QuotationTest,\n//       dataResult: process(this.props.Login.masterData.QuotationTest, this.state.dataState)\n//   });\n//   }\n//   else {\n//     let {dataState}=this.state;\n//         if(this.state.dataResult !== undefined){ \n//             if(this.state.dataResult.data){\n//                 if(this.state.dataResult.data.length ===1){\n//                     let skipcount=this.state.dataState.skip>0?(this.state.dataState.skip-this.state.dataState.take):\n//                     this.state.dataState.skip\n//                     dataState={skip:skipcount,take:this.state.dataState.take}\n//                 }\n//               } \n//               this.setState({\n//                 dataResult: process( this.props.Login.masterData || [], dataState),\n//                 dataState\n//           });\n//     }\n// }\nif(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);// this.setState({ controlMap, userRoleControlRights });\nthis.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData.QuotationTest,dataResult:process(this.props.Login.masterData.QuotationTest||[],this.state.dataState)// QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.historydataState)\n// QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\n});}else{var dataState=this.state.dataState;// let {historydataState}=this.state;\nif(this.state.dataResult!==undefined){if(this.state.dataResult.data){if(this.state.dataResult.data.length===1){var skipcount=this.state.dataState.skip>0?this.state.dataState.skip-this.state.dataState.take:this.state.dataState.skip;dataState={skip:skipcount,take:this.state.dataState.take};}}this.setState({data:this.props.Login.masterData.QuotationTest,dataResult:process(this.props.Login.masterData.QuotationTest||[],dataState),dataState:dataState// QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\n});}//       if(this.state.QuotationHistorydataResult !== undefined){ \n//         if(this.state.QuotationHistorydataResult.data){\n//             if(this.state.QuotationHistorydataResult.data.length ===1){\n//                 let skipcount=this.state.historydataState.skip>0?(this.state.historydataState.skip-this.state.historydataState.take):\n//                 this.state.historydataState.skip\n//                 historydataState={skip:skipcount,take:this.state.historydataState.take}\n//             }\n//           } \n//           this.setState({\n//             QuotationHistorydata: this.props.Login.masterData.QuotationHistory,\n//             QuotationHistorydataResult: process( this.props.Login.masterData.QuotationHistory || [], historydataState),\n//             historydataState \n//             // QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\n//       });\n// }\n}// dataResult = this.props.Login.masterData.QuotationTest;\n// this.setState({\n//   selectedRecord,dataResult\n// });\n// this.setState({ filterData });\n}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"){if(props.Login.errorCode===417||props.Login.errorCode===409){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return Quotation;}(Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,filterColumnData:filterColumnData,updateStore:updateStore,validateEsignCredential:validateEsignCredential,getQuotation:getQuotation,getProjectTypeComboService:getProjectTypeComboService,viewAttachment:viewAttachment,addQuotation:addQuotation,getreloadQuotation:getreloadQuotation,getQuotationAddTestService:getQuotationAddTestService,getQuotationPricingEditService:getQuotationPricingEditService,modalSave:modalSave,handleRetireQuotation:handleRetireQuotation,GrossQuotation:GrossQuotation,getQuotationClientCategoryComboService:getQuotationClientCategoryComboService,getQuotaionClientComboService:getQuotaionClientComboService,getProjectCodeComboService:getProjectCodeComboService,getQuotaionProductCategoryComboService:getQuotaionProductCategoryComboService,getQuotaionClientSiteComboService:getQuotaionClientSiteComboService})(injectIntl(Quotation));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/quotation/Quotation.jsx"],"names":["React","Component","Row","Col","Card","Nav","FormGroup","FormLabel","connect","toast","FontAwesomeIcon","faTrashAlt","faPencilAlt","faThumbsUp","faPlus","faEye","faUserTimes","injectIntl","FormattedMessage","callService","crudMaster","validateEsignCredential","updateStore","getQuotation","filterColumnData","getProjectTypeComboService","viewAttachment","addQuotation","getreloadQuotation","getQuotationAddTestService","getQuotationPricingEditService","GrossQuotation","modalSave","handleRetireQuotation","getQuotationClientCategoryComboService","getQuotaionClientComboService","getProjectCodeComboService","getQuotaionProductCategoryComboService","getQuotaionClientSiteComboService","ListMaster","transactionStatus","AddQuotation","DEFAULT_RETURN","SlideOutModal","Esign","showEsign","getControlMap","formatInputDate","ReadOnlyText","ContentPanel","process","ConfirmMessage","intl","QuotationTab","AddQuotationPreview","RetireQuotation","ModalShow","ViewInfoDetails","mapStateToProps","state","Login","Quotation","props","sidebarExpandCollapse","setState","sidebarview","handleDateChange","dateName","dateValue","selectedRecord","onInputOnChange","event","optional","target","type","name","checked","value","onSaveClick","saveType","formRef","quotationData","inputParam","slideOutModal","userInfo","postParam","inputListName","selectedObject","primaryKeyField","operation","screenName","masterData","SelectedQuotation","nquotationcode","nsitecode","nmastersitecode","sprojecttitle","undefined","sclientsiteaddress","sinvoiceaddress","sdescription","ntransactionstatus","DRAFT","sdeviationremarks","soemname","NA","ACTIVE","QuotationformatInputDate","userinfo","ntimezonecode","onSaveQuotationTest","onSaveQuotationTestPrice","onSaveGrossQuotation","classUrl","methodUrl","inputData","searchRef","isClearSearch","userRoleControlRights","nformcode","ncontrolCode","updateInfo","typeName","data","loadEsign","screenData","quotationtestPriceData","nprojectmastercode","nclientcode","dataState","selectedId","QuotationTestPriceArray","forEach","item","index","ntotalamount","namount","ncost","nnoofsamples","nquotationtestcode","ntestcode","ntotalgrosstamount","stestsynonym","ndiscountbandcode","stestplatform","squotationleadtime","snotes","nmethodcode","nclientcatcode","nclientsitecode","nclientcontactcode","JSON","parse","stringify","priceList","map","push","hasOwnProperty","onNumericInputOnChange","primaryFieldKey","findIndex","test","validateEsign","sreason","password","DeleteQuotation","selectedQuotation","primaryKeyValue","fetchUrl","fecthInputObject","quotation","openModal","APPROVED","warn","formatMessage","id","RETIRED","QuotationPreview","modalScreenSize","onComboChange","comboData","fieldName","caseNo","parseInt","sdisplayname","label","primarykey","nproductcatcode","nproductcode","parseFloat","QuotationGrossAmount","ntotalgrossamount","VatAmount","DiscountAmount","toFixed","nvatbandcode","nprojecttypecode","srfwdate","suserrolename","susername","selectedRecordindex","str","discountamount","count","sdiscountbandname","noemcode","closeModalShow","modalShow","popUp","onNumericInputChange","YES","NO","onnetAmountEvent","approveQuotation","onSaveModalClick","console","log","retireId","controlMap","has","get","ncontrolcode","modalTitle","nquotationversioncode","onTabChange","tabProps","dataStateChange","dataResult","historydataStateChange","historydataState","ConfirmDelete","deleteId","confirmMessage","confirm","reloadData","current","DeleteQuotationTest","deleteParam","closeModal","openFilter","showFilter","closeFilter","skip","take","settings","error","Map","Instrument","createRef","searchFieldList","testArray","QuotationData","isChild","date","formattedDate","getFullYear","getMonth","slice","getDate","ndiscountamount","nvatamount","ntotalnetamount","TotalNetAmount","versionStatusCSS","activeIconCSS","mandatoryFields","findMandatoryFields","addId","editId","approveId","addQuotationTestId","updateQuotationTestId","viewQuotationId","editTestPriceParam","filterParam","searchedData","sclientname","sversionstatus","indexOf","dataField","idsName","genericLabel","slanguagetypecode","openChildModal","errorCode","showAccordian","getProjectmasterAddMemberService","MembersList","addProjectMasterFile","onDropProjectMasterFile","deleteAttachment","linkMaster","QuotationTestList","DiscountBand","VATBand","QuotationHistory","handleFocus","SelectedClient","ClientCategory","Client","ClientSite","ClientContact","OEM","ProjectCode","ProjectType","ProjectMaster","QuotationType","Product","ProductCategory","masterStatus","TimeZoneList","e","select","previousProps","filterData","Object","values","QuotationTest","length","skipcount"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from \"react-bootstrap\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTrashAlt, faPencilAlt, faThumbsUp,faPlus,faEye,faUserTimes } from '@fortawesome/free-solid-svg-icons';\r\nimport { ReactComponent as Quotationdiscount } from '../../assets/image/quotationdiscount.svg';\r\nimport { injectIntl,FormattedMessage } from \"react-intl\";\r\nimport {\r\n  callService, crudMaster, validateEsignCredential, updateStore, getQuotation, filterColumnData,getProjectTypeComboService,\r\n  viewAttachment, addQuotation, getreloadQuotation, getQuotationAddTestService, getQuotationPricingEditService, GrossQuotation,modalSave,handleRetireQuotation,\r\n  getQuotationClientCategoryComboService,getQuotaionClientComboService,getProjectCodeComboService ,getQuotaionProductCategoryComboService,getQuotaionClientSiteComboService \r\n} from \"../../actions\";\r\n\r\nimport ListMaster from \"../../components/list-master/list-master.component\";\r\nimport { transactionStatus } from \"../../components/Enumeration\";\r\nimport AddQuotation from \"../../pages/quotation/AddQuotation\";\r\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\r\nimport SlideOutModal from \"../../components/slide-out-modal/SlideOutModal\";\r\n\r\nimport Esign from \"../audittrail/Esign\";\r\nimport { showEsign, getControlMap, formatInputDate }\r\n  from \"../../components/CommonScript\";\r\nimport { ReadOnlyText, ContentPanel } from \"../../components/App.styles\";\r\nimport { process } from \"@progress/kendo-data-query\";\r\nimport ConfirmMessage from \"../../components/confirm-alert/confirm-message.component\";\r\n// import ProjectMasterFilter from './ProjectMasterFilter';\r\nimport { intl } from \"../../components/App\";\r\n// import DataGrid from '../../components/data-grid/data-grid.component';\r\nimport QuotationTab from \"./QuotationTab\";\r\nimport AddQuotationPreview from \"../../pages/quotation/AddQuotationPreview\";\r\nimport RetireQuotation from \"../../pages/quotation/RetireQuotation\";\r\nimport ModalShow from \"../../components/ModalShow\";\r\nimport ViewInfoDetails from \"../../components/ViewInfoDetails\";\r\nimport {ReactComponent as RetireaQuotation} from '../../assets/image/RetireaQuotation.svg';\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { Login: state.Login };\r\n};\r\n\r\nclass Quotation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const dataState = {\r\n      skip: 0,\r\n      take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n  };\r\n\r\n\r\n  \r\n  this.state = {\r\n      selectedRecord: {},\r\n      error: \"\",\r\n      userRoleControlRights: [],\r\n      selectedQuotation: undefined,\r\n      controlMap: new Map(),\r\n      Instrument: [],\r\n      dataState: dataState,\r\n      dataResult: [], data: [],\r\n      sidebarview: false\r\n\r\n    };\r\n    this.searchRef = React.createRef();\r\n    this.searchFieldList = [\"squotationno\",\"sclientcatname\", \"sclientname\", \"sclientsiteaddress\", \"soemname\",\"sproductcatname\",\"sproductname\",\"squotationdate\",\"sdescription\",\"sdeviationremarks\",\"sversionstatus\",\"sretireremarks\"]\r\n    this.confirmMessage = new ConfirmMessage();\r\n\r\n  }\r\n  sidebarExpandCollapse = () => {\r\n      this.setState({\r\n          sidebarview: true\r\n      })          \r\n  }\r\n\r\n  handleDateChange = (dateName, dateValue) => {\r\n    const { selectedRecord } = this.state;\r\n    selectedRecord[dateName] = dateValue;\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n  onInputOnChange = (event, optional) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    if (event.target.type === \"checkbox\") {\r\n      selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n    } else if (event.target.type === 'radio') {\r\n      selectedRecord[event.target.name] = optional;\r\n    } else {\r\n      selectedRecord[event.target.name] = event.target.value;\r\n    }\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n  onSaveClick = (saveType, formRef) => {\r\n\r\n    let quotationData = [];\r\n    let inputParam = {};\r\n    let slideOutModal;\r\n    quotationData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n    let postParam = {\r\n      inputListName: \"Quotation\",\r\n      selectedObject: \"SelectedQuotation\",\r\n      primaryKeyField: \"nquotationcode\",\r\n    };\r\n\r\n    if ((this.props.Login.operation === \"update\") && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      postParam[\"primaryKeyValue\"] =\r\n        this.props.Login.masterData.SelectedQuotation.nquotationcode;\r\n\r\n      quotationData[\"quotation\"] = {\r\n        nquotationcode: this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n        nsitecode: this.props.Login.userInfo.nmastersitecode,\r\n        sprojecttitle: this.state.selectedRecord.sprojecttitle === undefined ? \"\" : this.state.selectedRecord.sprojecttitle, \r\n        sclientsiteaddress: this.state.selectedRecord.sclientsiteaddress === undefined ? \"\" : this.state.selectedRecord.sclientsiteaddress, \r\n        sinvoiceaddress: this.state.selectedRecord.sinvoiceaddress === undefined ? \"\" : this.state.selectedRecord.sinvoiceaddress, \r\n        sdescription: this.state.selectedRecord.sdescription === undefined ? \"\" : this.state.selectedRecord.sdescription, \r\n        ntransactionstatus: transactionStatus.DRAFT,\r\n        sdeviationremarks: this.state.selectedRecord.sdeviationremarks === undefined ? \"\" : this.state.selectedRecord.sdeviationremarks,\r\n        soemname: this.state.selectedRecord.soemname === undefined ? \"\" : this.state.selectedRecord.soemname,\r\n        // squotationleadtime: this.state.selectedRecord.squotationleadtime === undefined ? \"\" : this.state.selectedRecord.squotationleadtime\r\n\r\n      };\r\n\r\n    } else if ((this.props.Login.operation === \"create\") && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      quotationData[\"quotation\"] = {  \r\n\r\n        nsitecode: this.props.Login.userInfo.nmastersitecode,\r\n        sprojecttitle: this.state.selectedRecord.sprojecttitle === undefined ? \"\" : this.state.selectedRecord.sprojecttitle, \r\n        sclientsiteaddress: this.state.selectedRecord.sclientsiteaddress === undefined ? \"\" : this.state.selectedRecord.sclientsiteaddress, \r\n        sinvoiceaddress: this.state.selectedRecord.sinvoiceaddress === undefined ? \"\" : this.state.selectedRecord.sinvoiceaddress, \r\n        sdescription: this.state.selectedRecord.sdescription === undefined ? \"\" : this.state.selectedRecord.sdescription, \r\n        ntransactionstatus: transactionStatus.DRAFT,\r\n        sdeviationremarks: this.state.selectedRecord.sdeviationremarks === undefined ? \"\" : this.state.selectedRecord.sdeviationremarks,\r\n        soemname: this.state.selectedRecord.soemname === undefined ? \"\" : this.state.selectedRecord.soemname,\r\n        // squotationleadtime: this.state.selectedRecord.squotationleadtime === undefined ? \"\" : this.state.selectedRecord.squotationleadtime\r\n\r\n      };\r\n\r\n     \r\n    }\r\n\r\n    if (((this.props.Login.operation === \"create\") || (this.props.Login.operation === \"update\")) && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      quotationData[\"quotation\"][\"nclientcatcode\"] = this.state.selectedRecord[\"nclientcatcode\"] ? this.state.selectedRecord[\"nclientcatcode\"].value\r\n        : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nclientcode\"] = this.state.selectedRecord[\"nclientcode\"]!==\"\" ? this.state.selectedRecord[\"nclientcode\"].value\r\n        : transactionStatus.NA;\r\n\r\n        quotationData[\"quotation\"][\"nclientsitecode\"] = this.state.selectedRecord[\"nclientsitecode\"]!==\"\" ? this.state.selectedRecord[\"nclientsitecode\"].value\r\n        : transactionStatus.NA;\r\n\r\n        quotationData[\"quotation\"][\"nclientcontactcode\"] = this.state.selectedRecord[\"nclientcontactcode\"]!==\"\" ? this.state.selectedRecord[\"nclientcontactcode\"].value\r\n        : transactionStatus.NA;\r\n\r\n        quotationData[\"quotation\"][\"noemcode\"] = this.state.selectedRecord[\"noemcode\"]!== undefined ? this.state.selectedRecord[\"noemcode\"].value\r\n        : transactionStatus.NA;\r\n\r\n    // quotationData[\"quotation\"][\"nquotationtypecode\"] = this.state.selectedRecord[\"nquotationtypecode\"]!==\"\" ? this.state.selectedRecord[\"nquotationtypecode\"].value\r\n    //   : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nquotationtypecode\"] = transactionStatus.ACTIVE;\r\n      quotationData[\"quotation\"][\"nprojecttypecode\"] = this.state.selectedRecord[\"nprojecttypecode\"] ? this.state.selectedRecord[\"nprojecttypecode\"].value\r\n        : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nprojectmastercode\"] = this.state.selectedRecord[\"nprojectmastercode\"]  ? this.state.selectedRecord[\"nprojectmastercode\"].value\r\n        : transactionStatus.NA;\r\n\r\n\r\n /*     quotationData[\"quotation\"][\"nuserrolecode\"] = this.state.selectedRecord[\"nuserrolecode\"]!==\"\" ? this.state.selectedRecord[\"nuserrolecode\"]\r\n         : transactionStatus.NA; */\r\n        \r\n      // quotationData[\"quotation\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"]\r\n      //   : transactionStatus.NA;\r\n\r\n\r\n // quotationData[\"quotation\"][\"drfwdate\"] = formatInputDate(this.state.selectedRecord[\"srfwdate\"], false);\r\n      quotationData[\"quotation\"][\"dquotationdate\"] = this.QuotationformatInputDate(this.state.selectedRecord[\"dquotationdate\"]);\r\n //     quotationData[\"quotation\"][\"dquotationdate\"] = rearrangeDateFormat(quotationData.userinfo,this.state.selectedRecord[\"dquotationdate\"]);\r\n      quotationData[\"quotation\"][\"ntzrfwdate\"] =  quotationData.userinfo.ntimezonecode ? quotationData.userinfo.ntimezonecode : \"-1\";\r\n      quotationData[\"quotation\"][\"ntzquotationdate\"] =  quotationData.userinfo.ntimezonecode ? quotationData.userinfo.ntimezonecode : \"-1\";\r\n\r\n      quotationData[\"quotation\"][\"nproductcatcode\"] = this.state.selectedRecord[\"nproductcatcode\"]!==\"\" ? this.state.selectedRecord[\"nproductcatcode\"].value\r\n      : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nproductcode\"] = this.state.selectedRecord[\"nproductcode\"]!==\"\" ? this.state.selectedRecord[\"nproductcode\"].value\r\n      : transactionStatus.NA;\r\n      \r\n    }\r\n\r\nif ((this.props.Login.operation  === \"create\") && (this.props.Login.screenName === \"IDS_TEST\")) {\r\n          \r\n      inputParam = this.onSaveQuotationTest(saveType, formRef);\r\n  }\r\n\r\nif ((this.props.Login.operation  === \"update\") && ((this.props.Login.screenName === \"IDS_PRICE\") || (this.props.Login.screenName === \"IDS_CALCULATEPRICING\")) ) {\r\n      \r\n    inputParam = this.onSaveQuotationTestPrice(saveType, formRef);\r\n}\r\n\r\nif ((this.props.Login.operation  === \"create\") && (this.props.Login.screenName === \"IDS_CALCULATEPRICING\")) {\r\n          \r\n  inputParam = this.onSaveGrossQuotation(saveType, formRef);\r\n}\r\n\r\n    \r\n    if (((this.props.Login.operation === \"create\") || (this.props.Login.operation === \"update\")) && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      inputParam = {\r\n        classUrl: \"quotation\",\r\n        methodUrl: \"Quotation\",\r\n        inputData: quotationData,\r\n        operation: this.props.Login.operation,\r\n        saveType,\r\n        formRef,\r\n        postParam,\r\n        searchRef: this.searchRef,\r\n        isClearSearch: this.props.Login.isClearSearch,\r\n        selectedRecord:{...this.state.selectedRecord}\r\n      };\r\n    } \r\n    \r\n   \r\n\r\n  slideOutModal= ((this.props.Login.screenName === \"IDS_TEST\") || (this.props.Login.screenName === \"IDS_PRICE\") \r\n  || (this.props.Login.screenName === \"IDS_CALCULATEPRICING\")) ? \"openChildModal\" : \"openModal\";\r\n\r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          saveType,\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, slideOutModal);\r\n    }\r\n\r\n  };\r\n\r\n  onSaveQuotationTest(saveType, formRef) {\r\n    let inputData = [];\r\n    inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n    // inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\r\n  //  inputData[\"Quotation\"] = {};\r\n\r\n\r\n    let testArray = []\r\n    testArray = this.state.selectedRecord.ntestcode.map(item => {\r\n        let QuotationData = {}\r\n\r\n        QuotationData[\"ntestcode\"] = item.value\r\n        QuotationData[\"nquotationcode\"] = this.props.Login.masterData.SelectedQuotation.nquotationcode;\r\n        QuotationData[\"nclientcode\"] = this.props.Login.masterData.SelectedQuotation.nclientcode;\r\n        QuotationData[\"nprojectmastercode\"] = this.props.Login.masterData.SelectedQuotation.nprojectmastercode;\r\n\r\n\r\n        return QuotationData;\r\n    });\r\n    inputData['QuotationTest'] = testArray;\r\n\r\n    const inputParam = {\r\n        classUrl: \"quotation\",\r\n        methodUrl: \"QuotationTest\",\r\n        inputData: inputData,\r\n        operation: this.props.Login.operation, saveType, formRef,\r\n        searchRef: this.searchRef,\r\n        isClearSearch: this.props.Login.isClearSearch,\r\n        isChild: true\r\n\r\n\r\n    }\r\n    return inputParam;\r\n}\r\n\r\n\r\nQuotationformatInputDate(date) {\r\n\r\n  let formattedDate = \"\";\r\n\r\n  formattedDate = date.getFullYear() + \"-\" +\r\n      (\"00\" + (date.getMonth() + 1)).slice(-2) + \"-\" +\r\n      (\"00\" + date.getDate()).slice(-2) +\r\n      (\"T00:00:00Z\");\r\n\r\n  return formattedDate;\r\n}\r\n\r\nonSaveQuotationTestPrice = (saveType, formRef) => {\r\n\r\n  const quotationtestPriceData = {\"userinfo\": this.props.Login.userInfo,\r\n                           \"QuotationTest\":this.props.Login.masterData.SelectedQuotation,\r\n                           \"nquotationcode\":this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n                           \"nprojectmastercode\":this.props.Login.masterData.SelectedQuotation.nprojectmastercode,\r\n                          //  \"nclientcatcode\":this.props.Login.masterData.SelectedQuotation.nclientcatcode,\r\n                           \"nclientcode\":this.props.Login.masterData.SelectedQuotation.nclientcode,\r\n                          //  \"nclientsitecode\":this.props.Login.masterData.SelectedQuotation.nclientsitecode,\r\n                          //  \"nclientcontactcode\":this.props.Login.masterData.SelectedQuotation.nclientcontactcode\r\n                       //    \"ncost\":this.props.Login.selectedRecord[0].ncost\r\n                          };\r\n\r\n   let postParam = undefined;\r\n   let dataState = undefined;\r\n   let selectedId = null;\r\n   \r\n   if (this.props.Login.operation === \"update\") {\r\n       // edit\r\n       dataState = this.state.dataState;\r\n       selectedId = this.props.Login.selectedId; \r\n       postParam = { inputListName: \"Quotation\", selectedObject: \"SelectedQuotation\", primaryKeyField: \"nquotationcode\" };\r\n\r\n      //  let selectedRecord1=[this.props.Login.selectedRecord];\r\n        let QuotationTestPriceArray=[];\r\n      \r\n       (this.props.Login.selectedRecord).forEach((item,index) => {\r\n               if(item.ntotalamount<0){\r\n                QuotationTestPriceArray[index]={...this.props.Login.selectedRecord[index],ntotalamount:0}\r\n               } \r\n\r\n               QuotationTestPriceArray[index] = {\r\n                 \r\n                 namount: this.props.Login.selectedRecord[index].namount,\r\n                 nclientcode: this.props.Login.masterData.SelectedQuotation.nclientcode,\r\n                 ncost: this.props.Login.selectedRecord[index].ncost,\r\n                 nnoofsamples: this.props.Login.selectedRecord[index].nnoofsamples,\r\n                 nprojectmastercode: this.props.Login.selectedRecord[index].nprojectmastercode,\r\n                 nquotationcode: this.props.Login.selectedRecord[index].nquotationcode,\r\n                 nquotationtestcode: this.props.Login.selectedRecord[index].nquotationtestcode,\r\n                 ntestcode: this.props.Login.selectedRecord[index].ntestcode, \r\n                 ntotalamount: this.props.Login.selectedRecord[index].ntotalamount,\r\n                 ntotalgrosstamount: this.props.Login.selectedRecord[index].ntotalgrosstamount,\r\n                //  stestdescription: this.props.Login.selectedRecord[index].stestdescription,\r\n                 stestsynonym: this.props.Login.selectedRecord[index].stestsynonym,\r\n                 ndiscountbandcode: this.props.Login.selectedRecord[index].ndiscountbandcode.value,\r\n                 stestplatform: this.props.Login.selectedRecord[index].stestplatform, \r\n                 squotationleadtime: this.props.Login.selectedRecord[index].squotationleadtime, \r\n                 snotes: this.props.Login.selectedRecord[index].snotes ,\r\n                 nmethodcode: this.props.Login.selectedRecord[index].nmethodcode,\r\n                 nclientcatcode: this.props.Login.masterData.SelectedQuotation.nclientcatcode,\r\n                 nclientsitecode: this.props.Login.masterData.SelectedQuotation.nclientsitecode,\r\n                 nclientcontactcode: this.props.Login.masterData.SelectedQuotation.nclientcontactcode\r\n\r\n                };\r\n         \r\n     });\r\n     \r\n       quotationtestPriceData[\"QuotationTest\"] = JSON.parse(JSON.stringify(QuotationTestPriceArray));           \r\n   }\r\n   else {\r\n       //add               \r\n                                          \r\n       let priceList = [];\r\n       this.state.selectedRecord[\"ntestcode\"] &&\r\n           this.state.selectedRecord[\"ntestcode\"].map(item => {\r\n               return priceList.push({\r\n                  ntestcode: item.value                      \r\n               })\r\n           })\r\n      \r\n       quotationtestPriceData[\"QuotationTest\"] = priceList;                             \r\n\r\n   }\r\n   if (quotationtestPriceData[\"QuotationTest\"].hasOwnProperty('esignpassword')) {\r\n       if (quotationtestPriceData[\"QuotationTest\"]['esignpassword'] === '') {\r\n           delete quotationtestPriceData[\"QuotationTest\"]['esigncomments']\r\n           delete quotationtestPriceData[\"QuotationTest\"]['esignpassword']\r\n           delete quotationtestPriceData[\"QuotationTest\"][\"agree\"]\r\n       }\r\n   }\r\n  //console.log(\"update data:\", quotationtestPriceData);\r\n   const inputParam = {\r\n       classUrl: this.props.Login.inputParam.classUrl,\r\n       methodUrl: \"QuotationTest\",\r\n       inputData: quotationtestPriceData,\r\n       operation: this.props.Login.operation,\r\n       saveType, formRef, postParam, searchRef: this.searchRef,\r\n       isClearSearch: this.props.Login.isClearSearch,\r\n       selectedId, dataState\r\n   }\r\n   \r\n   return inputParam;\r\n}\r\n\r\n\r\nonSaveGrossQuotation(saveType, formRef) {\r\n\r\n  let quotationData = {};\r\n  quotationData[\"userinfo\"] = this.props.Login.userInfo;\r\n \r\n\r\n\r\n  quotationData[\"GrossQuotation\"] = {  \r\n\r\n    nquotationcode: this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n    nsitecode: this.props.Login.userInfo.nmastersitecode,\r\n    ndiscountamount:this.state.selectedRecord.DiscountAmount,\r\n    nvatamount:this.state.selectedRecord.VatAmount,\r\n    ntotalnetamount:this.state.selectedRecord.TotalNetAmount,\r\n    ntotalgrossamount : this.props.Login.QuotationGrossAmount[0].ntotalgrossamount,\r\n    nclientcatcode:this.props.Login.masterData.SelectedQuotation.nclientcatcode,\r\n    nclientcode:this.props.Login.masterData.SelectedQuotation.nclientcode,\r\n    nclientsitecode:this.props.Login.masterData.SelectedQuotation.nclientsitecode,\r\n    nclientcontactcode:this.props.Login.masterData.SelectedQuotation.nclientcontactcode,\r\n    nprojectmastercode : this.props.Login.masterData.SelectedQuotation.nprojectmastercode\r\n    \r\n  };\r\n\r\n  quotationData[\"GrossQuotation\"][\"ndiscountbandcode\"] = this.state.selectedRecord[\"ndiscountbandcode\"] ? this.state.selectedRecord[\"ndiscountbandcode\"].value\r\n  : transactionStatus.NA;\r\n\r\n  quotationData[\"GrossQuotation\"][\"nvatbandcode\"] = this.state.selectedRecord[\"nvatbandcode\"] ? this.state.selectedRecord[\"nvatbandcode\"].value\r\n  : transactionStatus.NA;\r\n\r\n  // const postParam = {\r\n  //   inputListName: \"Quotation\",\r\n  //   selectedObject: \"SelectedQuotation\",\r\n  //   primaryKeyField: \"nquotationcode\",\r\n  //   primaryKeyValue: this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n  //   fetchUrl: \"quotation/getQuotation\",\r\n  //   fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n  // };\r\n\r\n  const inputParam = {\r\n    classUrl: \"quotation\",\r\n    methodUrl: \"GrossQuotation\",// postParam,\r\n    inputData: quotationData,\r\n    searchRef: this.searchRef,\r\n    operation: this.props.Login.operation, saveType, formRef,\r\n    isClearSearch: this.props.Login.isClearSearch,\r\n    isChild: true\r\n  }\r\n \r\n  return inputParam;\r\n}\r\n\r\n \r\n  onNumericInputOnChange = (event, primaryFieldKey) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n\r\n     \r\n        if(primaryFieldKey && ( event.target.name === \"nnoofsamples\" )){\r\n            const index = selectedRecord.findIndex(item=>item.nquotationtestcode === primaryFieldKey);\r\n            if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){\r\n                selectedRecord[index][\"nnoofsamples\"] = event.target.value;\r\n            }\r\n        }\r\n        else{      \r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }           \r\n    \r\n    this.setState({ selectedRecord });\r\n}\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.Login.masterStatus !== \"\") {\r\n      if (props.Login.errorCode === 417 || props.Login.errorCode === 409) {\r\n        toast.warn(props.Login.masterStatus);\r\n        props.Login.masterStatus = \"\";\r\n      }\r\n    }\r\n    if (props.Login.error !== state.error) {\r\n      toast.error(props.Login.error);\r\n      props.Login.error = \"\";\r\n    }\r\n    if (props.Login.selectedRecord === undefined) {\r\n      return { selectedRecord: {} };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  validateEsign = () => {\r\n    const inputParam = {\r\n      inputData: {\r\n        userinfo: {\r\n          ...this.props.Login.userInfo,\r\n          sreason: this.state.selectedRecord[\"esigncomments\"],\r\n        },\r\n        password: this.state.selectedRecord[\"esignpassword\"],\r\n      },\r\n      screenData: this.props.Login.screenData,\r\n    };\r\n    this.props.validateEsignCredential(inputParam, \"openModal\");\r\n\r\n  };\r\n\r\n\r\n\r\n  DeleteQuotation = (methodUrl, selectedQuotation, operation, ncontrolCode) => {\r\n    if (selectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\r\n    const postParam = {\r\n      inputListName: \"QuotationList\",\r\n      selectedObject: \"SelectedQuotation\",\r\n      primaryKeyField: \"nquotationcode\",\r\n      primaryKeyValue: selectedQuotation.nquotationcode,\r\n      fetchUrl: \"quotation/getQuotation\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n    };\r\n\r\n    const inputParam = {\r\n      classUrl: this.props.Login.inputParam.classUrl,\r\n      methodUrl,\r\n      postParam,\r\n      inputData: {\r\n        userinfo: this.props.Login.userInfo,\r\n        quotation: selectedQuotation,\r\n      },\r\n      operation,\r\n      isClearSearch: this.props.Login.isClearSearch,\r\n      selectedRecord:{...this.state.selectedRecord}\r\n    };\r\n\r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (\r\n      showEsign(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode,\r\n        ncontrolCode\r\n      )\r\n    ) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          openModal: true,\r\n          screenName: \"IDS_QUOTATION\",\r\n          operation,\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n    }\r\n  }\r\n  else if(selectedQuotation.ntransactionstatus === transactionStatus.APPROVED){\r\n\r\n    toast.warn(this.props.intl.formatMessage({ id: \"IDS_CANNOTDELETEAPPROVEDQUOTATION\" }));\r\n\r\n  }else if(selectedQuotation.ntransactionstatus === transactionStatus.RETIRED){\r\n\r\n    toast.warn(this.props.intl.formatMessage({ id: \"IDS_CANNOTDELETERETIREDQUOTATION\" }));\r\n\r\n  }\r\n  };\r\n\r\n  \r\n\r\n  render() {\r\n\r\n\r\n    let versionStatusCSS = \"outline-secondary\";\r\n    let activeIconCSS = \"fa fa-check\"\r\n\r\n\r\n    if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.APPROVED) {\r\n      versionStatusCSS = \"outline-success\";\r\n    }\r\n    else if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.RETIRED) {\r\n      versionStatusCSS = \"outline-danger\";\r\n      activeIconCSS = \"\";\r\n    }\r\n    else if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\r\n      activeIconCSS = \"\";\r\n\r\n    }\r\n    \r\n    \r\n\r\n    if (this.props.Login.openModal || this.props.Login.modalShow) {\r\n      this.mandatoryFields = this.findMandatoryFields(this.props.Login.screenName, this.state.selectedRecord, this.props.Login.operation)\r\n    }\r\n\r\n\r\n    const { userInfo } = this.props.Login;\r\n    const addId = this.state.controlMap.has(\"AddQuotation\") && this.state.controlMap.get(\"AddQuotation\").ncontrolcode;\r\n    const editId = this.state.controlMap.has(\"EditQuotation\") && this.state.controlMap.get(\"EditQuotation\").ncontrolcode;\r\n    const deleteId = this.state.controlMap.has(\"DeleteQuotation\") && this.state.controlMap.get(\"DeleteQuotation\").ncontrolcode;\r\n    const approveId = this.state.controlMap.has(\"ApproveQuotation\") && this.state.controlMap.get(\"ApproveQuotation\").ncontrolcode;\r\n    const retireId = this.state.controlMap.has(\"RetireQuotation\") && this.state.controlMap.get(\"RetireQuotation\").ncontrolcode;\r\n    const addQuotationTestId = this.state.controlMap.has(\"AddQuotationTest\") && this.state.controlMap.get(\"AddQuotationTest\").ncontrolcode;\r\n    const updateQuotationTestId = this.state.controlMap.has(\"EditQuotationTest\") && this.state.controlMap.get(\"EditQuotationTest\").ncontrolcode;\r\n    // const grossQuotationeId = this.state.controlMap.has(\"CalculatePricing\") && this.state.controlMap.get(\"CalculatePricing\").ncontrolcode;\r\n    const viewQuotationId = this.state.controlMap.has(\"ViewQuotation\") && this.state.controlMap.get(\"ViewQuotation\").ncontrolcode;\r\n\r\n    const editTestPriceParam = {screenName:\"IDS_PRICE\", \"operation\":\"update\", \r\n    masterData:this.props.Login.masterData, userInfo: this.props.Login.userInfo, \r\n    ncontrolCode:updateQuotationTestId};\r\n\r\n  const selectedQuotation = this.props.Login.masterData.SelectedQuotation;\r\n\r\n    const filterParam = {\r\n      inputListName: \"Quotation\",\r\n      selectedObject: \"SelectedQuotation\",\r\n      primaryKeyField: \"nquotationcode\",\r\n      fetchUrl: \"quotation/getActiveQuotationById\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n      masterData: this.props.Login.masterData,\r\n      searchFieldList: this.searchFieldList,\r\n    };\r\n    \r\n    return (\r\n      <>\r\n        <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n          \r\n          <Row noGutters={true}>\r\n            <Col md={`${!this.state.sidebarview ? '4' : \"2\"}`}>\r\n                <span onClick= {()=>this.setState({sidebarview:!this.state.sidebarview})} className='sidebar-view-btn'>\r\n                    {!this.state.sidebarview ?\r\n                        <i class=\"fa fa-less-than\"></i> :\r\n                        <i class=\"fa fa-greater-than\"></i> \r\n                    }\r\n                </span>\r\n              <ListMaster\r\n                screenName={this.props.intl.formatMessage({ id: \"IDS_QUOTATION\" })}\r\n                masterData={this.props.Login.masterData}\r\n                userInfo={this.props.Login.userInfo}\r\n                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.Quotation}\r\n                getMasterDetail={(quotationData) => this.props.getQuotation(quotationData, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                selectedMaster={selectedQuotation}\r\n                primaryKeyField=\"nquotationcode\"\r\n                mainField=\"squotationno\"\r\n                firstField=\"sclientname\"\r\n                secondField=\"sversionstatus\"\r\n                filterColumnData={this.props.filterColumnData}\r\n                filterParam={filterParam}\r\n                userRoleControlRights={this.state.userRoleControlRights}\r\n                addId={addId}\r\n                searchRef={this.searchRef}\r\n                reloadData={this.reloadData}\r\n                //     openModal={() => this.props.addQuotation(\"create\", selectedQuotation, userInfo, addId, this.state.ProjectMasterList)}\r\n                openModal={() => this.props.addQuotation(\"create\", userInfo, addId, selectedQuotation)}\r\n                isMultiSelecct={false}\r\n                hidePaging={false}\r\n                isClearSearch={this.props.Login.isClearSearch}\r\n                openFilter={this.openFilter}\r\n                closeFilter={this.closeFilter}\r\n                // onFilterSubmit={this.onFilterSubmit}    \r\n                showFilterIcon={false}\r\n                showFilter={this.props.Login.showFilter}\r\n       /*         filterComponent={[\r\n                  {\r\n                    \"IDS_PROJECTMASTERFILTER\":\r\n                      <ProjectMasterFilter\r\n                        filterProjectType={this.state.ProjectMasterList || []}\r\n                        nfilterProjectType={this.props.Login.masterData.SelectedProjectType || {}}\r\n                        onComboChange={this.onComboChange}\r\n                        selectedRecord={this.state.selectedRecordfilter || {}}\r\n                      />\r\n                  }\r\n                ]} */\r\n\r\n              />\r\n            </Col>\r\n            <Col md={`${!this.state.sidebarview ? '8' : \"10\"}`}>\r\n              {selectedQuotation ?\r\n                <ContentPanel className=\"panel-main-content\">\r\n                  <Card className=\"border-0\">\r\n                    <Card.Header>\r\n                      {/* <ReactTooltip place=\"bottom\" globalEventOff='click' /> */}\r\n                      <Card.Title className=\"product-title-main\">\r\n                        {selectedQuotation.sclientname}\r\n                      </Card.Title>\r\n                      <Card.Subtitle>\r\n                        <div className=\"d-flex product-category\">\r\n                          <h2 className=\"product-title-sub flex-grow-1\">\r\n\r\n                            <span className={`btn btn-outlined ${versionStatusCSS} btn-sm mr-3`}>\r\n                              {/* <i class={activeIconCSS}></i> */}\r\n                              {selectedQuotation.sversionstatus}\r\n\r\n                            </span>\r\n                          </h2>\r\n                          {/* </Col>\r\n                             <Col md=\"4\"> */}\r\n                          {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n                          <div className=\"d-inline\">\r\n                            {/* Don't delete these commented lines because additional info feature is needed for Agaram LIMS */}\r\n                            {/* Start Here */}\r\n                            {/* <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" href=\"\" >  \r\n                                                            <FontAwesomeIcon icon={faEye} className=\"ActionIconColor\" onClick={(e)=>this.viewAdditionalInfo(e)} />\r\n                                                        </Nav.Link> */}\r\n                            {/* End Here */}\r\n                           \r\n                          \r\n                            <ViewInfoDetails \r\n                                selectedObject ={this.props.Login.masterData.SelectedQuotation}\r\n                                screenHiddenDetails={this.state.userRoleControlRights.indexOf(editId) === -1}   \r\n                                screenName={this.props.Login.screenName}\r\n                                dataTip={this.props.intl.formatMessage({ id: \"IDS_VIEW\" })}\r\n                                rowList={[\r\n                                  [\r\n                                    {dataField:\"sclientcatname\", idsName:\"IDS_CLIENTCATEGORY\"},                                    \r\n                                    {dataField:\"soemnameview\", idsName:\"IDS_OEM\"}                      \r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"sclientname\", idsName:\"IDS_CLIENT\"},\r\n                                    {dataField: \"sproductcatname\", idsName: (this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\")},                  \r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"scontactname\", idsName:\"IDS_CONTACTPERSON\"},\r\n                                    {dataField: \"sproductname\", idsName: (this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\")},            \r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"sphoneno\", idsName:\"IDS_CONTACTNUMBER\"},\r\n                                    {dataField:\"squotationdate\", idsName:\"IDS_QUOTATIONDATE\"}                \r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"semail\", idsName:\"IDS_EMAILID\"}                        \r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"sdescription\", idsName:\"IDS_DESCRIPTION\"}\r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"sdeviationremarks\", idsName:\"IDS_REMARKS\"}\r\n                                  ]\r\n                                ]}\r\n                            />\r\n                        \r\n                            {/* <Nav.Link className=\"btn btn-circle outline-grey mr-2\" name=\"edittestname\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(viewQuotationId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_VIEW\" })}                              \r\n                              onClick={() => this.QuotationPreview()}>\r\n                              <FontAwesomeIcon icon={faEye} />\r\n                            </Nav.Link> */}\r\n\r\n                            <Nav.Link className=\"btn btn-circle outline-grey mr-2\" name=\"edittestname\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_EDIT\" })}\r\n                              //data-for=\"tooltip_list_wrap\"\r\n                              onClick={() => this.props.addQuotation(\"update\",userInfo, editId, selectedQuotation )}>\r\n                              <FontAwesomeIcon icon={faPencilAlt} />\r\n                            </Nav.Link>\r\n                            \r\n                            <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" name=\"deletetestname\"\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                              //   data-for=\"tooltip_list_wrap\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                              onClick={() => this.ConfirmDelete(selectedQuotation, \"delete\", deleteId, \"Quotation\")}>\r\n                              <FontAwesomeIcon icon={faTrashAlt} />\r\n                            </Nav.Link>\r\n                           \r\n\r\n                            <Nav.Link name=\"approveQuotation\" className=\"btn btn-circle outline-grey mr-2\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_APPROVE\" })}\r\n                              //data-for=\"tooltip_list_wrap\"\r\n                              onClick={() => this.approveQuotation(\"Quotation\", selectedQuotation, \"approve\", approveId)}>\r\n                              <FontAwesomeIcon icon={faThumbsUp} />\r\n                            </Nav.Link>\r\n\r\n                            <Nav.Link name=\"retireQuotation\" className=\"btn btn-circle outline-grey mr-2\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(retireId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_RETIRE\" })}\r\n                              //data-for=\"tooltip_list_wrap\"\r\n                              onClick={() => this.props.handleRetireQuotation(\"retire\", userInfo, retireId, selectedQuotation)}\r\n                              // onClick={() => this.retireQuotation(selectedQuotation, retireId)}\r\n                            >\r\n                              <RetireaQuotation/>\r\n                              {/* <FontAwesomeIcon icon={faUserTimes} /> */}\r\n                            </Nav.Link>\r\n\r\n                          </div>\r\n                          {/* </Tooltip> */}\r\n                        </div>\r\n                        {/* </Col>\r\n                                            </Row> */}\r\n                      </Card.Subtitle>\r\n                    </Card.Header>\r\n                    <Card.Body className=\"form-static-wrap\">\r\n                      \r\n                      {/* <Col md={12}>\r\n                        <div className=\"horizontal-line\"></div>\r\n                      </Col> */}\r\n                     \r\n                         \r\n                      <Card className=\"at-tabs border-0\">\r\n                              {/* <Row noGutters>  --\r\n                                  <Col md={12}>\r\n                                      <div className=\"d-flex justify-content-end\">\r\n                                      <Nav.Link name=\"addPrice\" className=\"add-txt-btn\" \r\n                                              hidden={this.state.userRoleControlRights.indexOf(addQuotationTestId) === -1}\r\n                                              onClick={()=>this.props.getQuotationAddTestService(\"IDS_TEST\", \"create\", this.props.Login.masterData, this.props.Login.userInfo, addQuotationTestId)}\r\n                                              >\r\n                                            <FontAwesomeIcon icon={faPlus} /> { } \r\n                                          <FormattedMessage id='IDS_TEST' defaultMessage='Test' />\r\n                                      </Nav.Link>\r\n                                      <Nav.Link name=\"updatePrice\" className=\"add-txt-btn\" \r\n                                              hidden={this.state.userRoleControlRights.indexOf(updateQuotationTestId) === -1}\r\n                                              onClick={()=>this.props.getQuotationPricingEditService({...editTestPriceParam, \"updateType\":\"All\", dataState:undefined})}\r\n                                              >\r\n                                          <FontAwesomeIcon icon={faPencilAlt} /> { }\r\n                                          <FormattedMessage id='IDS_PRICE' defaultMessage='Price' />\r\n                                      </Nav.Link>\r\n                                      </div>\r\n                                  </Col>\r\n                              </Row> */}\r\n                              {/* <Row noGutters>\r\n                                  <Col md={12}>\r\n                                      <DataGrid\r\n                                          primaryKeyField={\"nquotationtestcode\"}\r\n                                       // data={this.props.Login.masterData.QuotationTest}\r\n                                          data={this.state.data}\r\n                                       // dataResult={this.props.Login.masterData.QuotationTest}\r\n                                      //  dataResult={process(this.props.Login.masterData.QuotationTest || [], this.state.quotationDataState)}\r\n                                          dataResult={this.state.dataResult}\r\n                                     //   dataState={this.state.quotationDataState}\r\n                                          dataState={this.state.dataState}\r\n                                       // dataStateChange={this.dataStateChange}\r\n                                       //   dataStateChange={(event) => this.setState({ quotationDataState: event.dataState })}\r\n                                          dataStateChange={this.dataStateChange}\r\n                                          extractedColumnList={this.extractedColumnList}\r\n                                          expandField=\"expanded\"\r\n                                          controlMap={this.state.controlMap}\r\n                                          userRoleControlRights={this.state.userRoleControlRights}\r\n                                          inputParam={this.props.Login.inputParam}\r\n                                          userInfo={this.props.Login.userInfo}\r\n                                          fetchRecord={this.props.getQuotationPricingEditService}\r\n                                          editParam={{...editTestPriceParam, \"updateType\":\"Single\", dataState:this.state.dataState}}\r\n                                          gridHeight={'335px'}\r\n                                          deleteRecord={this.DeleteQuotationTest}\r\n                                          deleteParam={{operation:\"delete\"}}\r\n                                          methodUrl={\"QuotationTest\"}\r\n                                          addRecord = {() => this.openModal(addId)}\r\n                                          pageable={true}\r\n                                          scrollable={'scrollable'}\r\n                                          isActionRequired={true}\r\n                                          isToolBarRequired={false}\r\n                                          selectedId={this.props.Login.selectedId}\r\n                                      />\r\n                                  </Col>\r\n                              </Row> */}\r\n\r\n                                  <Card className=\"at-tabs border-0\">\r\n                                    <Row noGutters>\r\n                                      <Col md={12}>\r\n                                        <QuotationTab\r\n                                          primaryKeyField={\"nquotationtestcode\"}\r\n                                          // data={this.props.Login.masterData.ProjectMember}\r\n                                          data={this.state.data}\r\n                                          // dataResult={this.props.Login.masterData.ProjectMember}\r\n                                          dataResult={this.state.dataResult}\r\n                                          masterData={this.props.Login.masterData}\r\n                                          screenName={this.props.Login.screenName}\r\n                                          operation={this.props.Login.operation}\r\n                                          openChildModal={this.props.Login.openChildModal}\r\n                                          crudMaster={this.props.crudMaster}\r\n                                          errorCode={this.props.Login.errorCode}\r\n                                          validateEsignCredential={this.props.validateEsignCredential}\r\n                                          loadEsign={this.props.Login.loadEsign}\r\n                                          showAccordian={this.state.showAccordian}\r\n                                          selectedRecord={this.state.selectedRecord || {}}\r\n                                          // dataState={{skip: 0, take: 10}}\r\n                                          // dataState={this.props.Login.dataState}\r\n                                          dataState={this.state.dataState}\r\n                                          dataStateChange={this.dataStateChange}\r\n                                          // extractedColumnList={fieldsForGrid} --\r\n                                          controlMap={this.state.controlMap}\r\n                                          userRoleControlRights={this.state.userRoleControlRights}\r\n                                          inputParam={this.props.Login.inputParam}\r\n                                          userInfo={this.props.Login.userInfo}\r\n                                          //    getProjectmasterAddMemberService={(this.props.Login.screenName,this.props.Login.operation,this.props.getProjectmasterAddMemberService,this.props.Login.userInfo,this.props.Login.ncontrolCode)}\r\n                                          getProjectmasterAddMemberService={this.props.getProjectmasterAddMemberService}\r\n                                          // --   fetchRecord={this.props.getPricingEditService}\r\n                                          //--       editParam={{...editTestPriceParam, \"updateType\":\"Single\", priceDataState:this.state.priceDataState}}\r\n                                          //  deleteParam={{operation:\"delete\"}}\r\n                                       \r\n                                          // reloadData={this.reloadData}\r\n                                          // --      addRecord = {() => this.openModal(addId)}\r\n                                          pageable={true}\r\n                                          onTabChange={this.onTabChange}\r\n                                          updateStore={this.props.updateStore}\r\n                                          scrollable={'scrollable'}\r\n                                          // gridHeight = {'600px'}\r\n                                          isActionRequired={true}\r\n                                          isToolBarRequired={false}\r\n                                          selectedId={this.props.Login.selectedId}\r\n                                          viewAttachment={this.props.viewAttachment}\r\n                                          MembersList={this.props.Login.MembersList}\r\n                                          onComboChange={this.onComboChange}\r\n                                          // File\r\n                                          addProjectMasterFile={this.props.addProjectMasterFile}\r\n                                          esignRights={this.props.Login.userRoleControlRights}\r\n                                          // ntransactionstatus={selectedProjectMaster.ntransactionstatus}  ---\r\n                                          //  selectedRecord={this.props.Login.selectedRecord}\r\n                                          onDropProjectMasterFile={this.onDropProjectMasterFile}\r\n                                          onInputOnChange={this.onInputOnChange}\r\n                                          screenData={this.props.Login.screenData}\r\n                                          deleteAttachment={this.deleteAttachment}\r\n                                          ncontrolCode={this.props.Login.ncontrolCode}\r\n                                          linkMaster= {this.props.Login.linkMaster}\r\n\r\n\r\n                                          addQuotationTestId= {this.props.Login.addQuotationTestId}\r\n                                          updateQuotationTestId= {this.props.Login.updateQuotationTestId}\r\n                                          addId= {this.props.Login.addId}\r\n                                          editParam={{...editTestPriceParam}}\r\n                                          // fetchRecord={this.props.getQuotationPricingEditService}\r\n                                          deleteRecord={this.DeleteQuotationTest}\r\n                                          getQuotationAddTestService={this.props.getQuotationAddTestService}\r\n                                          getQuotationPricingEditService={this.props.getQuotationPricingEditService}\r\n                                          QuotationTestList={this.props.Login.QuotationTestList}\r\n                                          onSaveClick={this.onSaveClick}\r\n                                          onnetAmountEvent={this.onnetAmountEvent}\r\n                                          onNumericInputChange={this.onNumericInputChange}\r\n                                          DiscountBand={this.props.Login.DiscountBand}\r\n                                          VATBand={this.props.Login.VATBand}\r\n                                          modalScreenSize={this.props.Login.modalScreenSize}\r\n                                          QuotationGrossAmount={this.props.Login.QuotationGrossAmount}\r\n\r\n                                          QuotationHistorydata={this.props.Login.masterData.QuotationHistory}\r\n                                          QuotationHistorydataResult={this.props.Login.masterData.QuotationHistory}\r\n                                          historydataState={this.state.historydataState}\r\n                                          historydataStateChange={this.historydataStateChange}\r\n                                          selectedQuotation={selectedQuotation}\r\n                                          GrossQuotation={this.props.GrossQuotation}\r\n                                          EstimateQuotation={this.props.Login.masterData.GrossQuotation[0]}\r\n                                          onFocus={this.handleFocus}\r\n                                        />\r\n                                      </Col>\r\n                                    </Row>\r\n                                  </Card>\r\n\r\n                          <Col md={12}>\r\n                            <div className=\"horizontal-line\"></div>\r\n                          </Col>\r\n\r\n                         \r\n                      {/* <Card>\r\n                        <Card.Body>\r\n\r\n                          <Row className='justify-content-end pr-2 m-0'>\r\n\r\n                                <Nav.Link name=\"CalculatePricing\" className=\"btn btn-circle outline-grey mr-2\"\r\n                                    hidden={this.state.userRoleControlRights.indexOf(grossQuotationeId) === -1}\r\n                                    data-tip={this.props.intl.formatMessage({ id: \"IDS_VATCALCULATION\" })}\r\n                                    onClick={() => this.props.GrossQuotation(\"create\", userInfo, grossQuotationeId, selectedQuotation)}>\r\n                                    \r\n                                  <Quotationdiscount className=\"custom_icons\" width=\"20\" height=\"20\" />\r\n                                </Nav.Link>\r\n\r\n                          </Row>  \r\n\r\n                         <Row className='justify-content-end '>\r\n                            <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_TOTALGROSSAMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{parseFloat((selectedQuotation.ntotalgrossamount).toFixed(2))}</ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n                          </Row>\r\n\r\n                          <Row>\r\n                          <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_DISCOUNTBAND\" })}</FormLabel>\r\n                                <ReadOnlyText>{selectedQuotation.sdiscountbandname}</ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n\r\n                            <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_AMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{selectedQuotation.ndiscountpercentage}</ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n\r\n                            <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_DISCOUNTAMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{parseFloat((selectedQuotation.ndiscountamount).toFixed(2))} </ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n                          </Row>\r\n\r\n                          <Row>\r\n                          <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_VATBAND\" })}</FormLabel>\r\n                                <ReadOnlyText>{selectedQuotation.svatbandname}</ReadOnlyText>\r\n                              </FormGroup>\r\n                          </Col>\r\n\r\n                           \r\n                            <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_AMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{selectedQuotation.nvatpercentage}</ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n\r\n                            <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_VATAMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{parseFloat((selectedQuotation.nvatamount).toFixed(2))} </ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n\r\n                          </Row>\r\n\r\n                          <Row className='justify-content-end'>\r\n                          <Col md=\"4\">\r\n\r\n                            <FormGroup>\r\n                              <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_TOTALNETAMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{parseFloat((selectedQuotation.ntotalnetamount).toFixed(2))}</ReadOnlyText>\r\n                            </FormGroup>\r\n\r\n                           </Col>\r\n\r\n\r\n                          </Row>         \r\n                        </Card.Body>\r\n                      </Card> */}\r\n                      </Card>\r\n                      {/* <Card className=\"at-tabs border-0\">\r\n                        <Row noGutters>\r\n                          <Col md={12}>\r\n                            <QuotationTab\r\n                              primaryKeyField={\"nprojectmembercode\"}\r\n                              // data={this.props.Login.masterData.ProjectMember}\r\n                              data={this.state.data}\r\n                              // dataResult={this.props.Login.masterData.ProjectMember}\r\n                              dataResult={this.state.dataResult}\r\n                              masterData={this.props.Login.masterData}\r\n                              screenName={this.props.Login.screenName}\r\n                              operation={this.props.Login.operation}\r\n                              openChildModal={this.props.Login.openChildModal}\r\n                              crudMaster={this.props.crudMaster}\r\n                              errorCode={this.props.Login.errorCode}\r\n                              validateEsignCredential={this.props.validateEsignCredential}\r\n                              loadEsign={this.props.Login.loadEsign}\r\n                              showAccordian={this.state.showAccordian}\r\n                              selectedRecord={this.state.selectedRecord || {}}\r\n                              // dataState={{skip: 0, take: 10}}\r\n                              // dataState={this.props.Login.dataState}\r\n                              dataState={this.state.dataState}\r\n                              dataStateChange={this.dataStateChange}\r\n                              // extractedColumnList={fieldsForGrid} --\r\n                              controlMap={this.state.controlMap}\r\n                              userRoleControlRights={this.state.userRoleControlRights}\r\n                              inputParam={this.props.Login.inputParam}\r\n                              userInfo={this.props.Login.userInfo}\r\n                              //    getProjectmasterAddMemberService={(this.props.Login.screenName,this.props.Login.operation,this.props.getProjectmasterAddMemberService,this.props.Login.userInfo,this.props.Login.ncontrolCode)}\r\n                              getProjectmasterAddMemberService={this.props.getProjectmasterAddMemberService}\r\n                              // --   fetchRecord={this.props.getPricingEditService}\r\n                              //--       editParam={{...editTestPriceParam, \"updateType\":\"Single\", priceDataState:this.state.priceDataState}}\r\n                              //  deleteParam={{operation:\"delete\"}}\r\n                              methodUrl={\"Teammembers\"}\r\n                              // reloadData={this.reloadData}\r\n                              // --      addRecord = {() => this.openModal(addId)}\r\n                              pageable={true}\r\n                              onTabChange={this.onTabChange}\r\n                              updateStore={this.props.updateStore}\r\n                              scrollable={'scrollable'}\r\n                              // gridHeight = {'600px'}\r\n                              isActionRequired={true}\r\n                              isToolBarRequired={false}\r\n                              selectedId={this.props.Login.selectedId}\r\n                              viewAttachment={this.props.viewAttachment}\r\n                              MembersList={this.props.Login.MembersList}\r\n                              onComboChange={this.onComboChange}\r\n                              // File\r\n                              addProjectMasterFile={this.props.addProjectMasterFile}\r\n                              esignRights={this.props.Login.userRoleControlRights}\r\n                              // ntransactionstatus={selectedProjectMaster.ntransactionstatus}  ---\r\n                              //  selectedRecord={this.props.Login.selectedRecord}\r\n                              onDropProjectMasterFile={this.onDropProjectMasterFile}\r\n                              onInputOnChange={this.onInputOnChange}\r\n                              screenData={this.props.Login.screenData}\r\n                              deleteAttachment={this.deleteAttachment}\r\n                              ncontrolCode={this.props.Login.ncontrolCode}\r\n                              linkMaster= {this.props.Login.linkMaster}\r\n\r\n\r\n                              addQuotationTestId= {this.props.Login.addQuotationTestId}\r\n                              updateQuotationTestId= {this.props.Login.updateQuotationTestId}\r\n                              addId= {this.props.Login.addId}\r\n                              editParam={{...editTestPriceParam}}\r\n                              fetchRecord={this.props.getQuotationPricingEditService}\r\n                              deleteRecord={this.DeleteQuotationTest}\r\n                             \r\n                            />\r\n                          </Col>\r\n                        </Row>\r\n                      </Card> */}\r\n\r\n\r\n\r\n                    </Card.Body>\r\n                  </Card>\r\n                </ContentPanel>\r\n                : \"\"\r\n              }\r\n            </Col>\r\n          </Row>\r\n\r\n\r\n        </div>\r\n        {/* End of get display */}\r\n\r\n        {/* Start of Modal Sideout for Test Creation */}\r\n        {this.props.Login.openModal &&\r\n           <SlideOutModal\r\n           show={this.props.Login.openModal}\r\n           size={this.props.Login.modalScreenSize===true ? \"xl\" : \"lg\" }\r\n           closeModal={this.closeModal}\r\n           hideSave={this.props.Login.screenName ===  \"IDS_VIEW\" ? true :  false}\r\n           operation={(this.props.Login.screenName === \"IDS_CALCULATEPRICING\" || this.props.Login.screenName === \"IDS_VIEW\") ? \"\" :  this.props.Login.operation}\r\n           inputParam={this.props.Login.inputParam}\r\n           screenName={this.props.Login.screenName}\r\n           onSaveClick={this.onSaveClick}\r\n           esign={this.props.Login.loadEsign}\r\n           validateEsign={this.validateEsign}\r\n           selectedRecord={this.state.selectedRecord || {}} \r\n          //  mandatoryFields={this.props.Login.screenName !==\"IDS_PRICE\" ? this.mandatoryFields : []}\r\n           mandatoryFields={ this.mandatoryFields} \r\n           addComponent={this.props.Login.loadEsign ?\r\n            <Esign\r\n               operation={this.props.Login.operation}\r\n               onInputOnChange={this.onInputOnChange}\r\n               inputParam={this.props.Login.inputParam}\r\n               selectedRecord={this.state.selectedRecord || {}}\r\n             />\r\n             : (this.props.Login.screenName === \"IDS_QUOTATION\") ?\r\n\r\n               <AddQuotation\r\n\r\n                userInfo={this.props.Login.userInfo}\r\n                genericlabel={this.props.Login.genericLabel}\r\n                selectedRecord={this.state.selectedRecord || {}}\r\n                // selectedclientcode={this.state.selectedRecord.nclientcode || {}}\r\n                sclientsiteaddress={this.props.Login.sclientsiteaddress}\r\n                SelectedClient={this.props.Login.SelectedClient}\r\n                ClientCategory={this.props.Login.ClientCategory}\r\n                Client={this.props.Login.Client}\r\n                ClientSite={this.props.Login.ClientSite}\r\n                ClientContact={this.props.Login.ClientContact}\r\n                OEM={this.props.Login.OEM}\r\n                ProjectCode={this.props.Login.ProjectCode}\r\n                ProjectType={this.props.Login.ProjectType}\r\n                ProjectMaster={this.props.Login.ProjectMaster}\r\n                QuotationType={this.props.Login.QuotationType}\r\n                Product={this.props.Login.Product}\r\n                ProductCategory={this.props.Login.ProductCategory}\r\n                onInputOnChange={this.onInputOnChange}\r\n                onComboChange={this.onComboChange}\r\n         //     onNumericInputChange={this.onNumericInputChange}\r\n                 handleDateChange={this.handleDateChange}\r\n               /> \r\n              : (this.props.Login.screenName === \"IDS_VIEW\") ? \r\n\r\n               <AddQuotationPreview\r\n\r\n                selectedQuotation ={this.props.Login.masterData.SelectedQuotation}\r\n                userInfo={this.props.Login.userInfo}\r\n                genericlabel={this.props.Login.genericLabel}\r\n              ></AddQuotationPreview> : \"\"\r\n           }\r\n         />\r\n        }\r\n        {this.props.Login.modalShow ? (\r\n          <ModalShow\r\n          modalShow={this.props.Login.modalShow}\r\n          closeModal={this.closeModalShow}\r\n          onSaveClick={this.onSaveModalClick}\r\n          validateEsign={this.validateEsign}\r\n          masterStatus={this.props.Login.masterStatus}\r\n          mandatoryFields={this.mandatoryFields}\r\n          updateStore={this.props.updateStore}\r\n          selectedRecord={this.state.selectedRecord || {}}\r\n          modalTitle={this.props.Login.modalTitle}\r\n          modalBody={\r\n              this.props.Login.modalTitle === \"IDS_RETIREQUOTATION\" ? (\r\n              <RetireQuotation\r\n                selectedRecord={this.state.selectedRecord || {}}\r\n                // Status={this.props.Login.screenName === \"IDS_RETIRE\"}\r\n                TimeZoneList={this.props.Login.TimeZoneList}\r\n                onInputOnChange={this.onInputOnChange}\r\n                handleDateChange={this.handleDateChange}\r\n                userInfo={this.props.Login.userInfo}\r\n                esign={this.props.Login.loadEsign}\r\n              />\r\n            ) : \"\"\r\n          }\r\n        />\r\n          ) : (\r\n            \"\"\r\n        )\r\n      }\r\n        {/* End of Modal Sideout for Test Creation */}\r\n      </>\r\n    );\r\n  }\r\n\r\n  findMandatoryFields(screenName, selectedRecord, operation) {\r\n    let mandatoryFields = [];\r\n    if (screenName === \"IDS_QUOTATION\" && operation !== \"retire\") {\r\n\r\n      mandatoryFields = [\r\n        { \"idsName\": \"IDS_CLIENTCATEGORY\", \"dataField\": \"nclientcatcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_CLIENT\", \"dataField\": \"nclientcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_CLIENTSITE\", \"dataField\": \"nclientsitecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_CONTACTNAME\", \"dataField\": \"nclientcontactcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_OEM\", \"dataField\": \"noemcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_INVOICEADDRESS\", \"dataField\": \"sinvoiceaddress\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_QUOTATIONTYPE\", \"dataField\": \"nquotationtypecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_PROJECTTYPE\", \"dataField\": \"nprojecttypecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_PROJECTCODE\", \"dataField\": \"nprojectmastercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_PROJECTTITLE\", \"dataField\": \"sprojecttitle\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_RFWDATE\", \"dataField\": \"srfwdate\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"textbox\" },\r\n //     { \"idsName\": \"IDS_ROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n //     { \"idsName\": \"IDS_USER\", \"dataField\": \"susername\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n        { \"idsName\": (this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\"), \"dataField\": \"nproductcatcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": (this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\"), \"dataField\": \"nproductcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n\r\n        { \"idsName\": \"IDS_QUOTATIONDATE\", \"dataField\": \"dquotationdate\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"selectbox\" },\r\n        \r\n      ]\r\n\r\n      // mandatoryFields.forEach(item => item.mandatory === true && mandatoryFields.push(item));\r\n      return mandatoryFields;\r\n\r\n    } else if (screenName === \"IDS_QUOTATION\" && operation === \"retire\") {\r\n\r\n      mandatoryFields = [\r\n        { \"idsName\": \"IDS_RETIREDATE\", \"dataField\": \"dretiredatetime\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"selectbox\" },\r\n\r\n      ]\r\n      return mandatoryFields;\r\n    }\r\n    else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  QuotationPreview = () => {\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: {\r\n        screenName: \"IDS_VIEW\",\r\n        openModal: true,\r\n        operation: \"create\",\r\n        modalScreenSize : false\r\n        \r\n      },\r\n    };\r\n\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n\r\n\r\n  onComboChange = (comboData, fieldName, caseNo, nquotationtestcode) => {\r\n\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    if(comboData!==null){\r\n      switch (caseNo) {\r\n        case 1:\r\n\r\n        if(fieldName===\"nclientcatcode\"){\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n          if (selectedRecord.nclientcatcode) {\r\n            if (parseInt(comboData.value) !== parseInt(selectedRecord.nclientcatcode.value)) {\r\n            // selectedRecord.nusercode={};\r\n            delete (selectedRecord.nclientcode);\r\n            delete (selectedRecord.nclientsitecode);\r\n            delete (selectedRecord.nclientcontactcode);\r\n            }\r\n          }\r\n\r\n          selectedRecord[fieldName] = comboData;\r\n          selectedRecord[\"sclientcatname\"] = comboData.item[\"sclientcatname\"];\r\n          this.props.getQuotationClientCategoryComboService({\r\n\r\n          inputData: {\r\n            userinfo: this.props.Login.userInfo,\r\n            sdisplayname: selectedRecord.nclientcatcode.label,\r\n            primarykey: selectedRecord.nclientcatcode.value,\r\n          }\r\n\r\n        }, selectedRecord);\r\n      }\r\n\r\n      if(fieldName===\"nclientcode\"){\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n        if (selectedRecord.nclientcode) {\r\n          if (parseInt(comboData.value) !== parseInt(selectedRecord.nclientcode.value)) {\r\n            // selectedRecord.nusercode={};\r\n            delete (selectedRecord.nclientsitecode);\r\n            delete (selectedRecord.nclientcontactcode);\r\n            \r\n          }\r\n        }\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n        selectedRecord[\"sclientname\"] = comboData.item[\"sclientname\"];\r\n        this.props.getQuotaionClientComboService({\r\n\r\n          inputData: {\r\n            userinfo: this.props.Login.userInfo,\r\n            sdisplayname: selectedRecord.nclientcode.label,\r\n            primarykey: selectedRecord.nclientcode.value,\r\n          }\r\n\r\n        }, selectedRecord);\r\n      }\r\n\r\n      if(fieldName===\"nclientsitecode\"){\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n        if (selectedRecord.nclientsitecode) {\r\n          if (parseInt(comboData.value) !== parseInt(selectedRecord.nclientsitecode.value)) {\r\n            // selectedRecord.nusercode={};\r\n            delete (selectedRecord.nclientcontactcode);\r\n            \r\n          }\r\n        }\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n        selectedRecord[\"sclientsitename\"] = comboData.item[\"sclientsitename\"];\r\n        this.props.getQuotaionClientSiteComboService({\r\n\r\n          inputData: {\r\n            userinfo: this.props.Login.userInfo,\r\n            sdisplayname: selectedRecord.nclientsitecode.label,\r\n            primarykey: selectedRecord.nclientsitecode.value,\r\n            nclientcode: selectedRecord.nclientcode.value,\r\n          }\r\n\r\n        }, selectedRecord);\r\n      }\r\n\r\n      if(fieldName===\"nproductcatcode\"){ //\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n        if (selectedRecord.nproductcatcode) {\r\n          if (parseInt(comboData.value) !== parseInt(selectedRecord.nproductcatcode.value)) {\r\n            // selectedRecord.nusercode={};\r\n            delete (selectedRecord.nproductcode);\r\n            \r\n          }\r\n        }\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n        selectedRecord[\"sproductcatname\"] = comboData.item[\"sproductcatname\"];\r\n        this.props.getQuotaionProductCategoryComboService({\r\n\r\n          inputData: {\r\n            userinfo: this.props.Login.userInfo,\r\n            sdisplayname: selectedRecord.nproductcatcode.label,\r\n            primarykey: selectedRecord.nproductcatcode.value,\r\n          }\r\n\r\n        }, selectedRecord);\r\n      }\r\n\r\n        break;\r\n\r\n      case 2:\r\n\r\n        // const selectedRecordfilter = this.state.selectedRecordfilter || {};\r\n        // selectedRecordfilter[fieldName] = comboData;\r\n        // this.setState({ selectedRecordfilter });\r\n        // break;\r\n\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        this.setState({ selectedRecord });\r\n        break;\r\n        \r\n      case 3:\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n\r\n        if ( selectedRecord[fieldName]==null ){\r\n          \r\n          selectedRecord[fieldName]=[];\r\n\r\n          if(fieldName===\"ndiscountbandcode\"){\r\n\r\n            selectedRecord[\"DiscountAmount\"]=0;\r\n            selectedRecord[\"ndiscountpercentage\"]= 0;\r\n\r\n          }else if(fieldName===\"nvatbandcode\"){\r\n\r\n            selectedRecord[\"VatAmount\"]=0;\r\n            selectedRecord[\"nvatpercentage\"] =0;\r\n\r\n          }\r\n          selectedRecord[\"TotalNetAmount\"]=parseFloat(((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+selectedRecord.VatAmount)-this.state.selectedRecord.DiscountAmount).toFixed(2));\r\n\r\n        }else{\r\n\r\n          if(fieldName===\"ndiscountbandcode\"){\r\n\r\n            const VatAmount=(this.state.selectedRecord.VatAmount === undefined ? 0.00 : this.state.selectedRecord.VatAmount)\r\n            selectedRecord[\"DiscountAmount\"]=parseFloat((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount * (selectedRecord.ndiscountbandcode.item.namount/100)).toFixed(2));\r\n        //  selectedRecord[\"TotalNetAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+(this.state.selectedRecord.DiscountAmount-VatAmount);\r\n            selectedRecord[\"TotalNetAmount\"]=parseFloat(((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+VatAmount)-this.state.selectedRecord.DiscountAmount).toFixed(2));\r\n            selectedRecord[\"ndiscountpercentage\"]= selectedRecord.ndiscountbandcode.item.namount;\r\n  \r\n  \r\n            }else if(fieldName===\"nvatbandcode\"){\r\n  \r\n              selectedRecord[\"VatAmount\"]=parseFloat((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount * (selectedRecord.nvatbandcode.item.namount/100)).toFixed(2));\r\n              //            selectedRecord[\"TotalNetAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+(selectedRecord.DiscountAmount-this.state.selectedRecord.VatAmount);\r\n              selectedRecord[\"TotalNetAmount\"]=parseFloat(((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+this.state.selectedRecord.VatAmount)-selectedRecord.DiscountAmount).toFixed(2));\r\n              selectedRecord[\"nvatpercentage\"] = selectedRecord.nvatbandcode.item.namount; \r\n  \r\n            }\r\n\r\n        }\r\n       \r\n        this.setState({ selectedRecord });\r\n        break;\r\n\r\n        case 4:\r\n         \r\n          if(fieldName===\"nprojecttypecode\"){\r\n            if (selectedRecord.nprojecttypecode) {\r\n              if (parseInt(comboData.value) !== parseInt(selectedRecord.nprojecttypecode.value)) {\r\n                delete (selectedRecord.nprojectmastercode);\r\n                delete (selectedRecord.sprojecttitle);\r\n                delete (selectedRecord.srfwdate);\r\n                delete (selectedRecord.suserrolename);\r\n                delete (selectedRecord.susername);\r\n              }\r\n            }\r\n    \r\n            selectedRecord[fieldName] = comboData;\r\n            selectedRecord[\"sprojecttypename\"] = comboData.item[\"sprojecttypename\"];\r\n            this.props.getProjectTypeComboService({\r\n    \r\n              inputData: {\r\n                userinfo: this.props.Login.userInfo,\r\n                sdisplayname: selectedRecord.nprojecttypecode.label,\r\n                primarykey: selectedRecord.nprojecttypecode.value,\r\n              }\r\n    \r\n            }, selectedRecord);\r\n          }\r\n\r\n          if(fieldName===\"nprojectmastercode\"){\r\n            if (selectedRecord.nprojectmastercode) {\r\n              if (parseInt(comboData.value) !== parseInt(selectedRecord.nprojectmastercode.value)) {\r\n                delete (selectedRecord.sprojecttitle);\r\n                delete (selectedRecord.srfwdate);\r\n                delete (selectedRecord.suserrolename);\r\n                delete (selectedRecord.susername);\r\n              }\r\n            }\r\n    \r\n            selectedRecord[fieldName] = comboData;\r\n            selectedRecord[\"sprojectcode\"] = comboData.item[\"sprojectcode\"];\r\n            this.props.getProjectCodeComboService({\r\n    \r\n              inputData: {\r\n                userinfo: this.props.Login.userInfo,\r\n                sdisplayname: selectedRecord.nprojectmastercode.label,\r\n                primarykey: selectedRecord.nprojectmastercode.value,\r\n              }\r\n    \r\n            }, selectedRecord);\r\n          }\r\n\r\n          break;\r\n          case 5:\r\n\r\n            let selectedRecordindex=selectedRecord.findIndex((item) => (item.nquotationtestcode === nquotationtestcode ? item : \"\"));\r\n            selectedRecord[fieldName] = comboData;\r\n\r\n            if (selectedRecord[fieldName]==null){\r\n              \r\n              selectedRecord[selectedRecordindex][fieldName]=[];\r\n    \r\n            }else{\r\n\r\n            //  selectedRecord[fieldName] = comboData;\r\n            //  selectedRecord[\"namount\"]=comboData.item.namount;\r\n            let str=selectedRecord[selectedRecordindex];\r\n            let discountamount = parseFloat(( (str.ncost * str.nnoofsamples) * (comboData.item.namount/100)).toFixed(2));\r\n            let count= ( str.ncost * str.nnoofsamples ) - ( discountamount ); \r\n            selectedRecord[selectedRecordindex]={...str, ntotalamount:parseFloat((count).toFixed(2)), namount:comboData.item.namount , ndiscountbandcode:comboData.item.ndiscountbandcode}\r\n            selectedRecord[selectedRecordindex][\"ndiscountbandcode\"]={label :comboData.item.sdiscountbandname,value:comboData.item.ndiscountbandcode}\r\n\r\n          //    selectedRecord[selectedRecordindex][\"ndiscountbandcode\"]=  {...selectedRecord[selectedRecordindex],\r\n\r\n          //     label :comboData.item.sdiscountbandname,\r\n          //     value:comboData.item.ndiscountbandcode\r\n              \r\n          // }\r\n            }\r\n          \r\n\r\n           this.setState(selectedRecord);\r\n\r\n          break;\r\n      default:\r\n        break;\r\n    };\r\n  }\r\n  else{\r\n    if(fieldName === 'noemcode'){\r\n      delete (selectedRecord.noemcode);\r\n\r\n    }\r\n  this.setState({selectedRecord});\r\n  }\r\n}\r\n\r\n  // onNumericInputChange = (event, primaryFieldKey) => {\r\n  //   // console.log(\"value:\", value, name);\r\n  //    const selectedRecord = this.state.selectedRecord || {};\r\n  //    if (event.target.name === \"nnoofsamples\") {\r\n  //     const index = selectedRecord.findIndex(item=>item.nquotationtestcode === primaryFieldKey);\r\n  //        if (/^-?\\d*?$/.test(event.target.value) || event.target.value === \"\") {\r\n    \r\n  //         selectedRecord[index][event.target.name] = event.target.value;\r\n  //        }\r\n  //    }\r\n  //    else {\r\n  //     selectedRecord[event.target.name] = event.target.value;\r\n  //    }\r\n  \r\n  //    this.setState({ selectedRecord });\r\n  // }\r\n\r\n  closeModalShow = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n\r\n    let modalShow = this.props.Login.modalShow;\r\n    let popUp = this.props.Login.popUp;\r\n    let selectedRecord = this.props.Login.selectedRecord;\r\n    if (this.props.Login.loadEsign) {\r\n      loadEsign = false;\r\n    } else {\r\n      modalShow = false;\r\n      selectedRecord = {};\r\n      popUp = undefined;\r\n    }\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { modalShow, selectedRecord, selectedId: null, loadEsign, popUp },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  onNumericInputChange = (value, name,primaryFieldKey) => {\r\n\r\n     const selectedRecord = this.state.selectedRecord || {};\r\n     const index = selectedRecord.findIndex(item=>item.nquotationtestcode === primaryFieldKey);\r\n     selectedRecord[index][name] = value;\r\n   \r\n\r\n     this.setState({ selectedRecord });\r\n }\r\n\r\n  onInputOnChange = (event, primaryFieldKey) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n\r\n    if (event.target.name === 'snotes' || event.target.name === 'stestplatform' || event.target.name === 'squotationleadtime') {\r\n\r\n      const index = selectedRecord.findIndex(item=>item.nquotationtestcode === primaryFieldKey);\r\n      selectedRecord[index][event.target.name] = event.target.value;\r\n\r\n    }\r\n    else if (event.target.type === 'checkbox') {\r\n      if (event.target.name === \"ntransactionstatus\")\r\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.RETIRED;\r\n      else\r\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n    }\r\n    else {   \r\n        if(primaryFieldKey && (event.target.name === \"ncost\" || event.target.name === \"nnoofsamples\" || event.target.name === \"ntotalamount\")){\r\n            const index = selectedRecord.findIndex(item=>item.nquotationtestcode === primaryFieldKey);\r\n            // if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){\r\n              if (/^-?\\d*?$/.test(event.target.value)) {\r\n                selectedRecord[index][event.target.name] = event.target.value;\r\n            }\r\n        }\r\n        else{      \r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }           \r\n    }\r\n    this.setState({ selectedRecord });\r\n}\r\n\r\nonnetAmountEvent = (nquotationtestcode) => {\r\n\r\n  let selectedRecord=this.state.selectedRecord;\r\n  let selectedRecordindex=selectedRecord.findIndex((item) => (item.nquotationtestcode === nquotationtestcode ? item : \"\"));\r\n  let str=selectedRecord[selectedRecordindex];\r\n//  let count= (str.ncost * str.nnoofsamples)-str.namount; \r\n  let discountamount = parseFloat(( (str.ncost * str.nnoofsamples) * (str.namount/100)).toFixed(2));\r\n  let count= ( str.ncost * str.nnoofsamples ) - ( discountamount ); \r\n  // selectedRecord[selectedRecordindex]={...str,ntotalamount:count}\r\n  selectedRecord[selectedRecordindex]={...str,ntotalamount: parseFloat((count).toFixed(2))}\r\n\r\n  this.setState(selectedRecord);\r\n\r\n  \r\n} \r\n\r\n\r\n\r\n  approveQuotation = (methodUrl, selectedQuotation, operation, ncontrolCode) => {\r\n    if (selectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\r\n\r\n      const postParam = {\r\n        inputListName: \"Quotation\",\r\n        selectedObject: \"SelectedQuotation\",\r\n        primaryKeyField: \"nquotationcode\",\r\n        primaryKeyValue: selectedQuotation.nquotationcode,\r\n        fetchUrl: \"quotation/getQuotation\",\r\n        fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n      };\r\n\r\n      const inputParam = {\r\n        classUrl: this.props.Login.inputParam.classUrl,\r\n        methodUrl, postParam,\r\n        inputData: {\r\n          \"userinfo\": this.props.Login.userInfo, \r\n          \"quotation\": selectedQuotation\r\n        },\r\n        operation,\r\n        isClearSearch: this.props.Login.isClearSearch,\r\n        selectedRecord:{...this.state.selectedRecord}\r\n      }\r\n\r\n      const masterData = this.props.Login.masterData;\r\n\r\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n        const updateInfo = {\r\n          typeName: DEFAULT_RETURN,\r\n          data: {\r\n            loadEsign: true, screenData: { inputParam, masterData },\r\n            openModal: true, screenName: \"IDS_QUOTATION\", operation\r\n          }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n      }\r\n      else {\r\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n      }\r\n    }else if(selectedQuotation.ntransactionstatus === transactionStatus.APPROVED){\r\n\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_ALREADYAPPROVED\" }));\r\n\r\n    }else if(selectedQuotation.ntransactionstatus === transactionStatus.RETIRED){\r\n\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_ALREADYRETIRED\" }));\r\n\r\n    }\r\n    else {\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTVERSION\" }));\r\n    }\r\n\r\n  }\r\n\r\n  onSaveModalClick = () => {\r\n    console.log(\"savemodal\");\r\n    let inputData = {};\r\n    let quotationData = [];\r\n\r\n    if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.APPROVED) {\r\n      const retireId = this.state.controlMap.has(\"RetireQuotation\") && this.state.controlMap.get(\"RetireQuotation\").ncontrolcode;\r\n      let inputParam = {};\r\n      const postParam = {\r\n        inputListName: \"Quotation\",\r\n        selectedObject: \"SelectedQuotation\",\r\n        primaryKeyField: \"nquotationcode\",\r\n        primaryKeyValue: this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n        fetchUrl: \"quotation/getQuotation\",\r\n        fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n      };\r\n      if(this.props.Login.modalTitle===\"IDS_RETIREQUOTATION\"){\r\n        if (this.state.selectedRecord[\"dretiredatetime\"] !== null) {\r\n          quotationData[\"dtransactiondate\"] = formatInputDate(this.state.selectedRecord[\"dretiredatetime\"],false);\r\n          quotationData[\"ntransdatetimezonecode\"] =  this.props.Login.userInfo.ntimezonecode ? this.props.Login.userInfo.ntimezonecode : \"-1\";\r\n                quotationData[\"sretireremarks\"] = this.state.selectedRecord[\"sretireremarks\"] ? this.state.selectedRecord[\"sretireremarks\"]  : \"\";\r\n                quotationData[\"nquotationcode\"] = this.props.Login.masterData.SelectedQuotation.nquotationcode;\r\n                quotationData[\"nquotationversioncode\"] = this.props.Login.masterData.SelectedQuotation.nquotationversioncode;\r\n\r\n                inputParam = {\r\n                  classUrl: this.props.Login.inputParam.classUrl,\r\n                  methodUrl : \"Quotation\", postParam,\r\n                  inputData: {\r\n                    \"userinfo\": this.props.Login.userInfo,\r\n                    \"quotation\": {...this.props.Login.masterData.SelectedQuotation, \"dtransactiondate\":quotationData[\"dtransactiondate\"], \"sretireremarks\" : quotationData[\"sretireremarks\"] ,\"nquotationcode\": quotationData[\"nquotationcode\"], \"nquotationversioncode\": quotationData[\"nquotationversioncode\"], \"ntransdatetimezonecode\": quotationData[\"ntransdatetimezonecode\"]}\r\n                  },\r\n                  operation:this.props.Login.operation,\r\n                  isClearSearch: this.props.Login.isClearSearch,\r\n                  selectedRecord:{...this.state.selectedRecord}\r\n                }\r\n      \r\n            const masterData = this.props.Login.masterData;\r\n\r\n          if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, retireId)) {\r\n            const updateInfo = {\r\n              typeName: DEFAULT_RETURN,\r\n              data: {\r\n                loadEsign: true, screenData: { inputParam, masterData },openModal: true,\r\n                modalShow: false, screenName: \"IDS_QUOTATION\", operation:this.props.Login.operation\r\n              }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n          }else {\r\n            this.props.modalSave(inputParam, masterData);\r\n          }\r\n        }else{\r\n          toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDATE\" }));\r\n        }\r\n      }\r\n    \r\n    }else if(this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.RETIRED){\r\n\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_ALREADYRETIRED\" }));\r\n\r\n    }\r\n    else {\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTAPPROVEDQUOTATION\" }));\r\n    }\r\n\r\n  };\r\n\r\n\r\n  onTabChange = (tabProps) => {\r\n    const screenName = tabProps.screenName;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { screenName },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n\r\n  /*\r\n  dataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(\r\n        this.props.Login.masterData[\"selectedSection\"],\r\n        event.dataState\r\n      ),\r\n      sectionDataState: event.dataState,\r\n    });\r\n  };\r\n*/\r\nhandleFocus(e){\r\n  e.target.select();\r\n}\r\n  dataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(this.state.data, event.dataState),\r\n      dataState: event.dataState\r\n    });\r\n  }\r\n\r\n  historydataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(this.state.data, event.historydataState),\r\n      historydataState: event.historydataState\r\n    });\r\n  }\r\n\r\n  ConfirmDelete = (selectedQuotation, operation, deleteId, screenName) => {\r\n    this.confirmMessage.confirm(\r\n      \"deleteMessage\",\r\n      this.props.intl.formatMessage({ id: \"IDS_DELETE\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_OK\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n      () =>\r\n        this.DeleteQuotation(\r\n          screenName,\r\n          selectedQuotation,\r\n          operation,\r\n          deleteId\r\n\r\n        )\r\n    );\r\n  };\r\n  reloadData = () => {\r\n    this.searchRef.current.value = \"\";\r\n\r\n//    if (Object.values(this.props.Login.masterData.SelectedQuotation).length && this.props.Login.masterData.SelectedQuotation !== undefined) {\r\n      // if (this.props.Login.masterData.SelectedQuotation !== undefined) {\r\n      let inputParam = {\r\n        inputData: {\r\n     \r\n          userinfo: this.props.Login.userInfo,\r\n          \r\n        },\r\n        classUrl: \"quotation\",\r\n        methodUrl: \"Quotation\",\r\n      };\r\n\r\n      this.props.getreloadQuotation(inputParam);\r\n\r\n    // } \r\n    // else {\r\n    //   toast.warn(\r\n    //     this.props.intl.formatMessage({\r\n    //       id: \"IDS_PROJECTTYPENOTAVAILABLE\",\r\n    //     })\r\n    //   );\r\n    // }\r\n  };\r\n\r\n  DeleteQuotationTest = (deleteParam) =>{\r\n\r\n  \r\n    deleteParam.selectedRecord[\"nclientcode\"]=this.props.Login.masterData.SelectedQuotation.nclientcode;\r\n    deleteParam.selectedRecord[\"nprojectmastercode\"]=this.props.Login.masterData.SelectedQuotation.nprojectmastercode;\r\n    deleteParam.selectedRecord[\"nclientcatcode\"]=this.props.Login.masterData.SelectedQuotation.nclientcatcode;\r\n    deleteParam.selectedRecord[\"nclientsitecode\"]=this.props.Login.masterData.SelectedQuotation.nclientsitecode;\r\n    deleteParam.selectedRecord[\"nclientcontactcode\"]=this.props.Login.masterData.SelectedQuotation.nclientcontactcode;\r\n\r\n    const postParam = { \r\n      \r\n      inputListName: \"QuotationList\", selectedObject: \"SelectedQuotation\",\r\n      primaryKeyField: \"nquotationcode\", primaryKeyValue: deleteParam.selectedRecord.nquotationtestcode,\r\n      fetchUrl: \"quotation/getQuotationTest\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo }\r\n  };\r\n\r\n    const inputParam = {\r\n        classUrl: \"quotation\",\r\n        methodUrl: \"QuotationPrice\",\r\n        postParam,\r\n\r\n        inputData: {\r\n            \"QuotationTestPrice\": deleteParam.selectedRecord,//.dataItem,\r\n      //      \"npriceversioncode\":this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode,\r\n            \"userinfo\": this.props.Login.userInfo,\r\n\r\n        },\r\n        operation:\"delete\",\r\n     //  priceDataState:this.state.priceDataState\r\n    }\r\n\r\n    if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                openModal: true, screenName: this.props.intl.formatMessage({ id: \"IDS_TESTPRICE\" }),\r\n                operation:deleteParam.operation\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    else {\r\n        this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n    }\r\n}\r\n\r\n\r\n  closeModal = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n    let modalShow = this.props.Login.modalShow;\r\n    let openModal = this.props.Login.openModal;\r\n    let selectedRecord = this.state.selectedRecord;\r\n//    let selectedRecord = this.state.selectedRecord;\r\n    if (this.props.Login.loadEsign) {\r\n        if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"approve\" ) {\r\n            loadEsign = false;\r\n            openModal = false;\r\n            selectedRecord = {};\r\n        }\r\n        else if(this.props.Login.operation === \"retire\"){\r\n            loadEsign = false;\r\n            openModal = false;\r\n            modalShow = true;\r\n            selectedRecord = {};\r\n        }\r\n        else {\r\n            loadEsign = false;\r\n            selectedRecord['esignpassword'] = '';\r\n            selectedRecord['esigncomments'] = '';\r\n            selectedRecord['esignreason'] = '';\r\n        } \r\n    }\r\n    else {\r\n        openModal = false;\r\n        modalShow = false;\r\n        selectedRecord = {};\r\n    }\r\n\r\n    const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: { openModal, loadEsign, selectedRecord ,modalShow}\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n\r\n}\r\n\r\n  componentDidUpdate(previousProps) {\r\n    let {\r\n      selectedRecord,\r\n      userRoleControlRights,\r\n      controlMap,\r\n      filterData,dataResult\r\n      \r\n    } = this.state;\r\n\r\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n      selectedRecord = this.props.Login.selectedRecord;\r\n      this.setState({ selectedRecord });\r\n    }\r\n\r\n\r\n//   if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n//     userRoleControlRights = [];\r\n//     if (this.props.Login.userRoleControlRights) {\r\n//       this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode\r\n//       ] &&\r\n//         Object.values(\r\n//           this.props.Login.userRoleControlRights[\r\n//           this.props.Login.userInfo.nformcode\r\n//           ]\r\n//         ).map((item) => userRoleControlRights.push(item.ncontrolcode));\r\n//     }\r\n//     controlMap = getControlMap(\r\n//       this.props.Login.userRoleControlRights,\r\n//       this.props.Login.userInfo.nformcode\r\n//     );\r\n//     // this.setState({ controlMap, userRoleControlRights });\r\n\r\n\r\n//     this.setState({\r\n//       userRoleControlRights, controlMap, data: this.props.Login.masterData.QuotationTest,\r\n//       dataResult: process(this.props.Login.masterData.QuotationTest, this.state.dataState)\r\n//   });\r\n//   }\r\n//   else {\r\n\r\n//     let {dataState}=this.state;\r\n//         if(this.state.dataResult !== undefined){ \r\n//             if(this.state.dataResult.data){\r\n//                 if(this.state.dataResult.data.length ===1){\r\n//                     let skipcount=this.state.dataState.skip>0?(this.state.dataState.skip-this.state.dataState.take):\r\n//                     this.state.dataState.skip\r\n//                     dataState={skip:skipcount,take:this.state.dataState.take}\r\n//                 }\r\n//               } \r\n\r\n//               this.setState({\r\n//                 dataResult: process( this.props.Login.masterData || [], dataState),\r\n//                 dataState\r\n//           });\r\n//     }\r\n    \r\n// }\r\n\r\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n\r\n      if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n        userRoleControlRights = [];\r\n        if (this.props.Login.userRoleControlRights) {\r\n          this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode\r\n          ] &&\r\n            Object.values(\r\n              this.props.Login.userRoleControlRights[\r\n              this.props.Login.userInfo.nformcode\r\n              ]\r\n            ).map((item) => userRoleControlRights.push(item.ncontrolcode));\r\n        }\r\n        controlMap = getControlMap(\r\n          this.props.Login.userRoleControlRights,\r\n          this.props.Login.userInfo.nformcode\r\n        );\r\n        // this.setState({ controlMap, userRoleControlRights });\r\n  \r\n  \r\n        this.setState({\r\n          userRoleControlRights, controlMap, data: this.props.Login.masterData.QuotationTest,\r\n          dataResult: process(this.props.Login.masterData.QuotationTest || [], this.state.dataState),\r\n\r\n          // QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.historydataState)\r\n          // QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\r\n      });\r\n      \r\n   \r\n      \r\n      }\r\n      else {\r\n  \r\n        let {dataState}=this.state;\r\n        // let {historydataState}=this.state;\r\n            if(this.state.dataResult !== undefined){ \r\n                if(this.state.dataResult.data){\r\n                    if(this.state.dataResult.data.length ===1){\r\n                        let skipcount=this.state.dataState.skip>0?(this.state.dataState.skip-this.state.dataState.take):\r\n                        this.state.dataState.skip\r\n                        dataState={skip:skipcount,take:this.state.dataState.take}\r\n                    }\r\n                  } \r\n  \r\n                  this.setState({\r\n                    data: this.props.Login.masterData.QuotationTest,\r\n                    dataResult: process( this.props.Login.masterData.QuotationTest || [], dataState),\r\n                    dataState \r\n                    // QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\r\n\r\n              });\r\n        }\r\n\r\n  //       if(this.state.QuotationHistorydataResult !== undefined){ \r\n  //         if(this.state.QuotationHistorydataResult.data){\r\n  //             if(this.state.QuotationHistorydataResult.data.length ===1){\r\n  //                 let skipcount=this.state.historydataState.skip>0?(this.state.historydataState.skip-this.state.historydataState.take):\r\n  //                 this.state.historydataState.skip\r\n  //                 historydataState={skip:skipcount,take:this.state.historydataState.take}\r\n  //             }\r\n  //           } \r\n\r\n  //           this.setState({\r\n  //             QuotationHistorydata: this.props.Login.masterData.QuotationHistory,\r\n  //             QuotationHistorydataResult: process( this.props.Login.masterData.QuotationHistory || [], historydataState),\r\n  //             historydataState \r\n  //             // QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\r\n\r\n  //       });\r\n  // }\r\n        \r\n    }\r\n      // dataResult = this.props.Login.masterData.QuotationTest;\r\n      // this.setState({\r\n      //   selectedRecord,dataResult\r\n      // });\r\n\r\n      // this.setState({ filterData });\r\n    }\r\n\r\n\r\n  }\r\n  \r\n  openFilter = () => {\r\n    let showFilter = !this.props.Login.showFilter;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { showFilter },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  closeFilter = () => {\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { showFilter: false },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  \r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n  callService,\r\n  crudMaster,\r\n  filterColumnData,\r\n  updateStore,\r\n  validateEsignCredential,\r\n  getQuotation,getProjectTypeComboService,\r\n  viewAttachment, addQuotation, getreloadQuotation, getQuotationAddTestService, getQuotationPricingEditService,modalSave,handleRetireQuotation,\r\n   GrossQuotation,getQuotationClientCategoryComboService,getQuotaionClientComboService,getProjectCodeComboService ,getQuotaionProductCategoryComboService,getQuotaionClientSiteComboService \r\n})(injectIntl(Quotation));\r\n"]},"metadata":{},"sourceType":"module"}