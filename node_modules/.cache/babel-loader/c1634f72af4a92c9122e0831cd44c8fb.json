{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { dispatchEvent, classNames } from '@progress/kendo-react-common';\nimport { getLeftPosition, getTopPosition, getDomRect, isTooltipElement } from './utils';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\n\nvar Tooltip = function (_super) {\n  __extends(Tooltip, _super);\n\n  function Tooltip(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.state = {\n      targetElement: null,\n      open: false,\n      title: ''\n    };\n    _this.top = 0;\n    _this.left = 0;\n    _this.willOpen = false;\n    /**\n     * The method is used on the MouseOut event to hide the Tooltip.\n     */\n\n    _this.handleMouseOut = function (event) {\n      var targetElement = _this.state.targetElement;\n      var currentDocument = targetElement ? targetElement.ownerDocument : document;\n      var element = currentDocument && currentDocument.elementFromPoint(event.clientX, event.clientY);\n\n      if (isTooltipElement(element)) {\n        return;\n      }\n\n      if (_this.props.open) {\n        return;\n      }\n\n      clearInterval(_this.updateIntervalId);\n      _this.willOpen = false;\n\n      _this.onClose(event);\n    };\n    /**\n     * Used on the `MouseOver` event to show the Tooltip.\n     */\n\n\n    _this.handleMouseOver = function (event) {\n      var target = event.target;\n\n      if (!_this.isVisible(target) || isTooltipElement(target) || target === _this.state.targetElement) {\n        return;\n      }\n\n      _this.showToolTip(event);\n    };\n\n    _this.handleBodyMousemove = function (event) {\n      _this.top = event.clientY;\n      _this.left = event.clientX;\n    };\n\n    _this.onClose = function (event) {\n      dispatchEvent(_this.props.onClose, event, _this, undefined);\n\n      _this.setState({\n        targetElement: null,\n        open: false,\n        title: ''\n      });\n    };\n\n    _this.setUpdateInterval = function () {\n      if (_this.props.updateInterval) {\n        _this.updateIntervalId = setInterval(_this.onIntervalUpdate, _this.props.updateInterval);\n      }\n    };\n\n    _this.onIntervalUpdate = function () {\n      var target = _this.state.targetElement;\n\n      if (!target) {\n        return;\n      }\n\n      if (target.parentElement === null) {\n        // Getting element from previous target coordinates will cause reflow which is performance hit.\n        // Also remount case can be avoided easily\n        _this.onClose({\n          target: target\n        });\n      } else {\n        _this.showToolTip({\n          target: target\n        });\n      }\n    };\n\n    _this.position = function (element) {\n      var domRect = getDomRect(_this.state.targetElement);\n      var left = getLeftPosition(_this.left, element.offsetWidth, domRect, _this.props.anchorElement, _this.props.position);\n      var top = getTopPosition(_this.top, domRect, element.offsetHeight, _this.props.anchorElement, _this.props.position);\n      return {\n        left: left,\n        top: top\n      };\n    };\n\n    _this.getTitle = function (element) {\n      while (element) {\n        if (element.getAttribute('title') !== null || element.titleExpando) {\n          var title = element.getAttribute('title') || element.titleExpando;\n          return {\n            title: title,\n            element: element\n          };\n        }\n\n        element = _this.props.parentTitle && element.parentElement || null;\n      }\n\n      return {\n        title: '',\n        element: element\n      };\n    };\n\n    _this.calloutClassName = function () {\n      switch (_this.props.position) {\n        case 'bottom':\n          return 'k-callout k-callout-n';\n\n        case 'left':\n          return 'k-callout k-callout-e';\n\n        case 'right':\n          return 'k-callout k-callout-w';\n\n        case 'top':\n          return 'k-callout k-callout-s';\n\n        default:\n          return _this.top < window.innerHeight / 2 ? 'k-callout k-callout-n' : 'k-callout k-callout-s';\n      }\n    };\n\n    validatePackage(packageMetadata);\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n\n\n  Tooltip.prototype.componentDidMount = function () {\n    if (document) {\n      document.body.addEventListener('mousemove', this.handleBodyMousemove);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  Tooltip.prototype.componentWillUnmount = function () {\n    clearTimeout(this.openTimeoutId);\n    clearInterval(this.updateIntervalId);\n\n    if (document) {\n      document.body.removeEventListener('mousemove', this.handleBodyMousemove);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  Tooltip.prototype.componentDidUpdate = function () {\n    if (this.props.open && this.props.targetElement) {\n      this.showToolTip({\n        target: this.props.targetElement\n      });\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  Tooltip.prototype.render = function () {\n    var _this = this;\n\n    if (this.props.children) {\n      var _a = this.props,\n          children = _a.children,\n          options = __rest(_a, [\"children\"]);\n\n      var tooltip_1 = null;\n      return React.createElement(\"div\", {\n        onMouseOver: function (event) {\n          if (tooltip_1) {\n            tooltip_1.handleMouseOver(event);\n          }\n        },\n        onMouseOut: function (event) {\n          if (tooltip_1) {\n            tooltip_1.handleMouseOut(event);\n          }\n        }\n      }, React.createElement(Tooltip, __assign({\n        ref: function (el) {\n          return tooltip_1 = el;\n        }\n      }, options)), children);\n    }\n\n    if (this.props.open === false) {\n      return null;\n    }\n\n    var targetElement = this.state.targetElement;\n    return targetElement && this.state.title && targetElement.ownerDocument && ReactDOM.createPortal(React.createElement(\"div\", {\n      ref: function (el) {\n        if (!el) {\n          return;\n        }\n\n        var position;\n\n        if (_this.props.onPosition) {\n          position = _this.props.onPosition.call(undefined, {\n            element: el,\n            targetElement: _this.state.targetElement,\n            mouseTop: _this.top,\n            mouseLeft: _this.left,\n            anchorElement: _this.props.anchorElement,\n            position: _this.props.position,\n            target: _this\n          });\n        } else {\n          position = _this.position(el);\n        }\n\n        el.style.left = position.left + 'px';\n        el.style.top = position.top + 'px';\n      },\n      className: classNames('k-animation-container', 'k-animation-container-fixed', 'k-animation-container-shown', this.props.className),\n      style: this.props.style,\n      tabIndex: 0\n    }, React.createElement(\"div\", {\n      className: classNames('k-tooltip', this.props.tooltipClassName),\n      style: __assign({\n        position: 'relative'\n      }, this.props.tooltipStyle)\n    }, React.createElement(\"div\", {\n      className: \"k-tooltip-content\"\n    }, this.props.content && React.createElement(this.props.content, {\n      title: this.state.title,\n      target: this.state.targetElement\n    }) || this.state.title), this.props.showCallout && React.createElement(\"div\", {\n      ref: function (el) {\n        if (!el) {\n          return;\n        }\n\n        el.className = _this.calloutClassName();\n\n        if (_this.props.position === 'auto') {\n          _this.left < window.screen.availWidth / 2 ? el.style.left = _this.props.setCalloutOnPositionAuto || '25%' : el.style.left = _this.props.setCalloutOnPositionAuto || '75%';\n        }\n      }\n    }))), this.props.appendTo ? this.props.appendTo : targetElement.ownerDocument.body);\n  };\n\n  Tooltip.prototype.showToolTip = function (event) {\n    var _this = this;\n\n    clearTimeout(this.openTimeoutId);\n    clearInterval(this.updateIntervalId);\n\n    if (event.target.parentElement.hasChildNodes()) {\n      event.target.parentElement.childNodes.forEach(function (childElement) {\n        if (childElement.nodeName === 'title') {\n          event.target.titleExpando = childElement.innerHTML;\n          childElement.remove();\n        }\n      });\n    }\n\n    var target = this.props.targetElement || event.target;\n    var titleResult = this.getTitle(target);\n\n    if (!titleResult.title) {\n      if (this.state.open) {\n        this.onClose(event);\n      }\n\n      return;\n    }\n\n    if (titleResult.element) {\n      titleResult.element.titleExpando = titleResult.title;\n      titleResult.element.title = '';\n    }\n\n    this.willOpen = true;\n\n    if (!this.props.openDelay) {\n      this.setState({\n        targetElement: target,\n        open: true,\n        title: titleResult.title\n      }, this.setUpdateInterval);\n    } else {\n      this.openTimeoutId = window.setTimeout(function () {\n        if (_this.willOpen) {\n          _this.setState({\n            targetElement: target,\n            open: true,\n            title: titleResult.title\n          }, _this.setUpdateInterval);\n        }\n      }, this.props.openDelay);\n    }\n\n    if (this.state.title !== titleResult.title) {\n      dispatchEvent(this.props.onOpen, event, this, undefined);\n    }\n  };\n\n  Tooltip.prototype.isVisible = function (element) {\n    return !this.props.filter || this.props.filter(element);\n  };\n  /**\n   * @hidden\n   */\n\n\n  Tooltip.propTypes = {\n    anchorElement: PropTypes.oneOf(['pointer', 'target']),\n    content: PropTypes.func,\n    filter: PropTypes.func,\n    openDelay: PropTypes.number,\n    position: PropTypes.oneOf(['right', 'left', 'top', 'bottom', 'auto']),\n    updateInterval: PropTypes.number\n  };\n  Tooltip.defaultProps = {\n    anchorElement: 'pointer',\n    openDelay: 400,\n    position: 'auto',\n    showCallout: true,\n    parentTitle: false\n  };\n  return Tooltip;\n}(React.PureComponent);\n\nexport { Tooltip };","map":{"version":3,"sources":["../../src/Tooltip.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport { dispatchEvent, classNames } from '@progress/kendo-react-common';\nimport { getLeftPosition, getTopPosition, getDomRect, isTooltipElement } from './utils';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\nvar Tooltip = /** @class */ (function (_super) {\n    __extends(Tooltip, _super);\n    function Tooltip(props) {\n        var _this = _super.call(this, props) || this;\n        /**\n         * @hidden\n         */\n        _this.state = {\n            targetElement: null,\n            open: false,\n            title: ''\n        };\n        _this.top = 0;\n        _this.left = 0;\n        _this.willOpen = false;\n        /**\n         * The method is used on the MouseOut event to hide the Tooltip.\n         */\n        _this.handleMouseOut = function (event) {\n            var targetElement = _this.state.targetElement;\n            var currentDocument = targetElement ? targetElement.ownerDocument : document;\n            var element = currentDocument && currentDocument.elementFromPoint(event.clientX, event.clientY);\n            if (isTooltipElement(element)) {\n                return;\n            }\n            if (_this.props.open) {\n                return;\n            }\n            clearInterval(_this.updateIntervalId);\n            _this.willOpen = false;\n            _this.onClose(event);\n        };\n        /**\n         * Used on the `MouseOver` event to show the Tooltip.\n         */\n        _this.handleMouseOver = function (event) {\n            var target = event.target;\n            if (!_this.isVisible(target) || isTooltipElement(target) || target === _this.state.targetElement) {\n                return;\n            }\n            _this.showToolTip(event);\n        };\n        _this.handleBodyMousemove = function (event) {\n            _this.top = event.clientY;\n            _this.left = event.clientX;\n        };\n        _this.onClose = function (event) {\n            dispatchEvent(_this.props.onClose, event, _this, undefined);\n            _this.setState({ targetElement: null, open: false, title: '' });\n        };\n        _this.setUpdateInterval = function () {\n            if (_this.props.updateInterval) {\n                _this.updateIntervalId = setInterval(_this.onIntervalUpdate, _this.props.updateInterval);\n            }\n        };\n        _this.onIntervalUpdate = function () {\n            var target = _this.state.targetElement;\n            if (!target) {\n                return;\n            }\n            if (target.parentElement === null) {\n                // Getting element from previous target coordinates will cause reflow which is performance hit.\n                // Also remount case can be avoided easily\n                _this.onClose({ target: target });\n            }\n            else {\n                _this.showToolTip({ target: target });\n            }\n        };\n        _this.position = function (element) {\n            var domRect = getDomRect(_this.state.targetElement);\n            var left = getLeftPosition(_this.left, element.offsetWidth, domRect, _this.props.anchorElement, _this.props.position);\n            var top = getTopPosition(_this.top, domRect, element.offsetHeight, _this.props.anchorElement, _this.props.position);\n            return { left: left, top: top };\n        };\n        _this.getTitle = function (element) {\n            while (element) {\n                if (element.getAttribute('title') !== null || element.titleExpando) {\n                    var title = element.getAttribute('title') || element.titleExpando;\n                    return { title: title, element: element };\n                }\n                element = _this.props.parentTitle && element.parentElement || null;\n            }\n            return { title: '', element: element };\n        };\n        _this.calloutClassName = function () {\n            switch (_this.props.position) {\n                case 'bottom':\n                    return 'k-callout k-callout-n';\n                case 'left':\n                    return 'k-callout k-callout-e';\n                case 'right':\n                    return 'k-callout k-callout-w';\n                case 'top':\n                    return 'k-callout k-callout-s';\n                default:\n                    return _this.top < (window.innerHeight / 2) ? 'k-callout k-callout-n' : 'k-callout k-callout-s';\n            }\n        };\n        validatePackage(packageMetadata);\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    Tooltip.prototype.componentDidMount = function () {\n        if (document) {\n            document.body.addEventListener('mousemove', this.handleBodyMousemove);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Tooltip.prototype.componentWillUnmount = function () {\n        clearTimeout(this.openTimeoutId);\n        clearInterval(this.updateIntervalId);\n        if (document) {\n            document.body.removeEventListener('mousemove', this.handleBodyMousemove);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Tooltip.prototype.componentDidUpdate = function () {\n        if (this.props.open && this.props.targetElement) {\n            this.showToolTip({ target: this.props.targetElement });\n        }\n    };\n    /**\n     * @hidden\n     */\n    Tooltip.prototype.render = function () {\n        var _this = this;\n        if (this.props.children) {\n            var _a = this.props, children = _a.children, options = __rest(_a, [\"children\"]);\n            var tooltip_1 = null;\n            return (React.createElement(\"div\", { onMouseOver: function (event) { if (tooltip_1) {\n                    tooltip_1.handleMouseOver(event);\n                } }, onMouseOut: function (event) { if (tooltip_1) {\n                    tooltip_1.handleMouseOut(event);\n                } } },\n                React.createElement(Tooltip, __assign({ ref: function (el) { return tooltip_1 = el; } }, options)),\n                children));\n        }\n        if (this.props.open === false) {\n            return null;\n        }\n        var targetElement = this.state.targetElement;\n        return targetElement &&\n            this.state.title &&\n            targetElement.ownerDocument &&\n            ReactDOM.createPortal((React.createElement(\"div\", { ref: function (el) {\n                    if (!el) {\n                        return;\n                    }\n                    var position;\n                    if (_this.props.onPosition) {\n                        position = _this.props.onPosition.call(undefined, {\n                            element: el,\n                            targetElement: _this.state.targetElement,\n                            mouseTop: _this.top,\n                            mouseLeft: _this.left,\n                            anchorElement: _this.props.anchorElement,\n                            position: _this.props.position,\n                            target: _this\n                        });\n                    }\n                    else {\n                        position = _this.position(el);\n                    }\n                    el.style.left = position.left + 'px';\n                    el.style.top = position.top + 'px';\n                }, className: classNames('k-animation-container', 'k-animation-container-fixed', 'k-animation-container-shown', this.props.className), style: this.props.style, tabIndex: 0 },\n                React.createElement(\"div\", { className: classNames('k-tooltip', this.props.tooltipClassName), style: __assign({ position: 'relative' }, this.props.tooltipStyle) },\n                    React.createElement(\"div\", { className: \"k-tooltip-content\" }, this.props.content &&\n                        React.createElement(this.props.content, { title: this.state.title, target: this.state.targetElement })\n                        || this.state.title),\n                    this.props.showCallout && React.createElement(\"div\", { ref: function (el) {\n                            if (!el) {\n                                return;\n                            }\n                            el.className = _this.calloutClassName();\n                            if (_this.props.position === 'auto') {\n                                _this.left < (window.screen.availWidth / 2)\n                                    ? el.style.left = _this.props.setCalloutOnPositionAuto || '25%'\n                                    : el.style.left = _this.props.setCalloutOnPositionAuto || '75%';\n                            }\n                        } })))), this.props.appendTo ? this.props.appendTo : targetElement.ownerDocument.body);\n    };\n    Tooltip.prototype.showToolTip = function (event) {\n        var _this = this;\n        clearTimeout(this.openTimeoutId);\n        clearInterval(this.updateIntervalId);\n        if (event.target.parentElement.hasChildNodes()) {\n            event.target.parentElement.childNodes.forEach(function (childElement) {\n                if (childElement.nodeName === 'title') {\n                    event.target.titleExpando = childElement.innerHTML;\n                    childElement.remove();\n                }\n            });\n        }\n        var target = this.props.targetElement || event.target;\n        var titleResult = this.getTitle(target);\n        if (!titleResult.title) {\n            if (this.state.open) {\n                this.onClose(event);\n            }\n            return;\n        }\n        if (titleResult.element) {\n            titleResult.element.titleExpando = titleResult.title;\n            titleResult.element.title = '';\n        }\n        this.willOpen = true;\n        if (!this.props.openDelay) {\n            this.setState({ targetElement: target, open: true, title: titleResult.title }, this.setUpdateInterval);\n        }\n        else {\n            this.openTimeoutId = window.setTimeout(function () {\n                if (_this.willOpen) {\n                    _this.setState({ targetElement: target, open: true, title: titleResult.title }, _this.setUpdateInterval);\n                }\n            }, this.props.openDelay);\n        }\n        if (this.state.title !== titleResult.title) {\n            dispatchEvent(this.props.onOpen, event, this, undefined);\n        }\n    };\n    Tooltip.prototype.isVisible = function (element) {\n        return !this.props.filter || this.props.filter(element);\n    };\n    /**\n     * @hidden\n     */\n    Tooltip.propTypes = {\n        anchorElement: PropTypes.oneOf(['pointer', 'target']),\n        content: PropTypes.func,\n        filter: PropTypes.func,\n        openDelay: PropTypes.number,\n        position: PropTypes.oneOf(['right', 'left', 'top', 'bottom', 'auto']),\n        updateInterval: PropTypes.number\n    };\n    Tooltip.defaultProps = {\n        anchorElement: 'pointer',\n        openDelay: 400,\n        position: 'auto',\n        showCallout: true,\n        parentTitle: false\n    };\n    return Tooltip;\n}(React.PureComponent));\nexport { Tooltip };\n//# sourceMappingURL=Tooltip.js.map"]},"metadata":{},"sourceType":"module"}