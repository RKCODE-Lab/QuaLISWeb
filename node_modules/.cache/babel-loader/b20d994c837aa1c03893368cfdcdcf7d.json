{"ast":null,"code":"import _objectSpread from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import{process}from'@progress/kendo-data-query';import React from'react';import{FormattedMessage,injectIntl}from'react-intl';import{DEFAULT_RETURN}from'../../../actions/LoginTypes';import DataGrid from'../../../components/data-grid/data-grid.component';import{transactionStatus}from'../../../components/Enumeration';import SlideOutModal from'../../../components/slide-out-modal/SlideOutModal';import Esign from'../../audittrail/Esign';import AddComment from'./AddComment';import{updateStore,viewAttachment,validateEsignCredential,crudMaster,getCommentsCombo,deleteComment}from'../../../actions';import{connect}from'react-redux';import{faPlus}from'@fortawesome/free-solid-svg-icons';import{Nav}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Comments=/*#__PURE__*/function(_React$Component){_inherits(Comments,_React$Component);var _super=_createSuper(Comments);function Comments(props){var _this;_classCallCheck(this,Comments);_this=_super.call(this,props);_this.onComboChange=function(comboData,comboName){if(comboData){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[comboName]=comboData;_this.setState({selectedRecord:selectedRecord});}};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){// const masterData = this.props.Login.masterData;\n// let inputData = {}\n// let inputParam = {}\n// inputData[\"userinfo\"] = this.props.Login.userInfo;\n// if(this.props.Login.screenName === \"IDS_SAMPLECOMMENTS\") {\n//     // let saveParam={userInfo:this.props.Login.userInfo,\n//     //     selectedRecord:this.state.selectedRecord,\n//     //     masterData:this.props.Login.masterData,\n//     //     saveType, formRef,\n//     //     operation:this.props.Login.operation\n//     // }\n//     // inputParam = onSaveSampleAttachment(saveParam);\n// }else if(this.props.Login.screenName === \"IDS_TESTCOMMENTS\") {\n//     let saveParam={\n//         userInfo:this.props.Login.userInfo,\n//         isTestComment:this.props.isTestComment,\n//         selectedRecord:this.state.selectedRecord,\n//         masterData:this.props.Login.masterData,\n//         saveType, formRef,\n//         operation:this.props.Login.operation,\n//         selectedMaster:this.props.selectedMaster\n//     }\n//     inputParam = onSaveTestComments(saveParam);\n// }\n// if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n//     const updateInfo = {\n//         typeName: DEFAULT_RETURN,\n//         data: {\n//             loadEsign: true,\n//             screenData: { inputParam, masterData },\n//             operation: this.props.Login.operation,\n//             screenName: this.props.Login.screenName,\n//         }\n//     }\n//     this.props.updateStore(updateInfo);\n// }\n// else {\n//     this.props.crudMaster(inputParam, masterData, \"openCommentModal\");\n// }\n_this.props.onSaveClick(saveType,formRef,_this.state.selectedRecord);};_this.handleClose=function(){var loadEsign=_this.props.Login.loadEsign;var openCommentModal=_this.props.Login.openCommentModal;var selectedRecord=_this.props.Login.selectedRecord;var operation=_this.props.Login.operation;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openCommentModal=false;selectedRecord={};operation=undefined;}else{loadEsign=false;}}else{openCommentModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openCommentModal:openCommentModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedParamId:null,operation:operation}};_this.props.updateStore(updateInfo);};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};if(_this.props.Login.operation==='dynamic'){_this.props.validateEsignforApproval(inputParam,\"openChildModal\");}else{_this.props.validateEsignCredential(inputParam,\"openCommentModal\");}};_this.state={selectedRecord:{}};return _this;}_createClass(Comments,[{key:\"render\",value:function render(){var _this2=this;var extractedColumnList=[// {\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"100px\"},\n// {\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"100px\"},\n{\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestsynonym\",\"width\":\"200px\",jsonField:true},{\"idsName\":\"IDS_COMMENTS\",\"dataField\":\"scomments\",\"width\":\"200px\",jsonField:true},// { \"idsName\": \"IDS_SAMPLETESTCOMMENTS\", \"dataField\": \"ssampletestcommentname\", \"width\": \"400px\" },\n{\"idsName\":\"IDS_SCREENNAME\",\"dataField\":\"sdisplayname\",\"width\":\"150px\"},{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"susername\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERROLE\",\"dataField\":\"suserrolename\",\"width\":\"200px\"}];var addFileId=this.props.controlMap.has(this.props.addName)&&this.props.controlMap.get(this.props.addName).ncontrolcode;var mandatoryFields=[];if(this.props.isTestComment){mandatoryFields=[{\"idsName\":\"IDS_SAMPLETESTCOMMENTS\",\"dataField\":\"nsamplecommentscode\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_COMMENT\",\"dataField\":\"scomments\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}else{mandatoryFields=[{\"idsName\":\"IDS_COMMENT\",\"dataField\":\"scomments\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"actions-stripe border-bottom\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"add_\".concat(this.props.Login.screenName,\"_comment\"),className:\"add-txt-btn\",hidden:this.props.userRoleControlRights.indexOf(addFileId)===-1,onClick:function onClick(){return _this2.props.getCommentsCombo({userInfo:_this2.props.Login.userInfo,operation:\"create\",ncontrolCode:addFileId,screenName:_this2.props.screenName,modalName:\"openCommentModal\",masterList:_this2.props.masterList,masterAlertStatus:_this2.props.masterAlertStatus});}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_COMMENT\",defaultMessage:\" Comment\"})))),/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:this.props.primaryKeyField,data:this.props.Comments,dataResult:process(this.props.Comments||[],this.props.dataState),dataState:this.props.dataState,dataStateChange:this.props.dataStateChange,extractedColumnList:extractedColumnList,userInfo:this.props.userInfo,controlMap:this.props.controlMap,userRoleControlRights:this.props.userRoleControlRights,inputParam:this.props.inputParam,pageable:true,expandField:\"expanded\",hideDetailBand:true,isActionRequired:this.props.isActionRequired!==undefined?this.props.isActionRequired:true,deleteParam:this.props.deleteParam||\"\",fetchRecord:this.props.fetchRecord||\"\",editParam:_objectSpread(_objectSpread({},this.props.editParam),{},{modalName:\"openCommentModal\"})||\"\",deleteRecord:this.props.deleteComment||\"\",selectedId:this.props.selectedId,isToolBarRequired:false,scrollable:\"scrollable\",gridHeight:\"550px\",methodUrl:this.props.methodUrl,jsonField:\"jsondata\"}),this.props.Login.openCommentModal?/*#__PURE__*/React.createElement(SlideOutModal,{onSaveClick:this.onSaveClick,operation:this.props.Login.operation,screenName:this.props.Login.screenName,closeModal:this.handleClose,show:this.props.Login.openCommentModal,inputParam:this.props.Login.inputParam,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(AddComment,{selectedRecord:this.state.selectedRecord,jsonField:\"jsondata\",SampleTestComments:this.props.Login.sampleTestComments,onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,isTestComment:this.props.isTestComment,maxSize:20,maxFiles:3,operation:this.props.Login.operation,selectedListName:this.props.selectedListName,displayName:this.props.displayName,masterList:this.props.masterList})}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}}}]);return Comments;}(React.Component);export default connect(mapStateToProps,{updateStore:updateStore,viewAttachment:viewAttachment,validateEsignCredential:validateEsignCredential,crudMaster:crudMaster,getCommentsCombo:getCommentsCombo,deleteComment:deleteComment})(injectIntl(Comments));","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/pages/attachmentscomments/comments/Comments.jsx"],"names":["process","React","FormattedMessage","injectIntl","DEFAULT_RETURN","DataGrid","transactionStatus","SlideOutModal","Esign","AddComment","updateStore","viewAttachment","validateEsignCredential","crudMaster","getCommentsCombo","deleteComment","connect","faPlus","Nav","FontAwesomeIcon","mapStateToProps","state","Login","Comments","props","onComboChange","comboData","comboName","selectedRecord","setState","onInputOnChange","event","target","type","name","checked","YES","NO","value","onSaveClick","saveType","formRef","handleClose","loadEsign","openCommentModal","operation","undefined","updateInfo","typeName","data","selectedParamId","validateEsign","inputParam","inputData","userInfo","sreason","password","screenData","validateEsignforApproval","extractedColumnList","jsonField","addFileId","controlMap","has","addName","get","ncontrolcode","mandatoryFields","isTestComment","screenName","userRoleControlRights","indexOf","ncontrolCode","modalName","masterList","masterAlertStatus","primaryKeyField","dataState","dataStateChange","isActionRequired","deleteParam","fetchRecord","editParam","selectedId","methodUrl","masterStatus","sampleTestComments","selectedListName","displayName","previousProps","Component"],"mappings":"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","sourcesContent":["import { process } from '@progress/kendo-data-query';\r\nimport React from 'react';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes';\r\nimport DataGrid from '../../../components/data-grid/data-grid.component';\r\nimport { transactionStatus } from '../../../components/Enumeration';\r\nimport SlideOutModal from '../../../components/slide-out-modal/SlideOutModal';\r\nimport Esign from '../../audittrail/Esign';\r\nimport AddComment from './AddComment';\r\nimport { updateStore, viewAttachment, validateEsignCredential, crudMaster, getCommentsCombo, deleteComment } from '../../../actions'\r\nimport { connect } from 'react-redux';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { Nav } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\nclass Comments extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            selectedRecord: {}\r\n        }\r\n    }\r\n    render() {\r\n        const extractedColumnList = [\r\n            // {\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"100px\"},\r\n            // {\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"100px\"},\r\n            { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestsynonym\", \"width\": \"200px\",jsonField:true },\r\n            { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"scomments\", \"width\": \"200px\",jsonField:true },\r\n            // { \"idsName\": \"IDS_SAMPLETESTCOMMENTS\", \"dataField\": \"ssampletestcommentname\", \"width\": \"400px\" },\r\n            { \"idsName\": \"IDS_SCREENNAME\", \"dataField\": \"sdisplayname\", \"width\": \"150px\" },\r\n            { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_USERROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\" },\r\n        ];\r\n        let addFileId = this.props.controlMap.has(this.props.addName) && this.props.controlMap.get(this.props.addName).ncontrolcode;\r\n        let mandatoryFields = [];\r\n        if (this.props.isTestComment) {\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_SAMPLETESTCOMMENTS\", \"dataField\": \"nsamplecommentscode\", \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_COMMENT\", \"dataField\": \"scomments\", \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" }\r\n            ];\r\n        } else {\r\n\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_COMMENT\", \"dataField\": \"scomments\", \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n            ];\r\n\r\n        }\r\n        return (\r\n\r\n            <>\r\n                <div className=\"actions-stripe border-bottom\">\r\n                    <div className=\"d-flex justify-content-end\">\r\n                        <Nav.Link name={`add_${this.props.Login.screenName}_comment`} className=\"add-txt-btn\" hidden={this.props.userRoleControlRights.indexOf(addFileId) === -1}\r\n                            onClick={() => this.props.getCommentsCombo({ userInfo: this.props.Login.userInfo, operation: \"create\", ncontrolCode: addFileId, screenName: this.props.screenName, modalName: \"openCommentModal\", masterList: this.props.masterList, masterAlertStatus: this.props.masterAlertStatus })}>\r\n                            <FontAwesomeIcon icon={faPlus} /> { }\r\n                            <FormattedMessage id=\"IDS_COMMENT\" defaultMessage=\" Comment\" />\r\n                        </Nav.Link>\r\n                    </div>\r\n                </div>\r\n                <DataGrid\r\n                    primaryKeyField={this.props.primaryKeyField}\r\n                    data={this.props.Comments}\r\n                    dataResult={process(this.props.Comments || [], this.props.dataState)}\r\n                    dataState={this.props.dataState}\r\n                    dataStateChange={this.props.dataStateChange}\r\n                    extractedColumnList={extractedColumnList}\r\n                    userInfo={this.props.userInfo}\r\n                    controlMap={this.props.controlMap}\r\n                    userRoleControlRights={this.props.userRoleControlRights}\r\n                    inputParam={this.props.inputParam}\r\n                    pageable={true}\r\n                    expandField=\"expanded\"\r\n                    hideDetailBand={true}\r\n                    isActionRequired={this.props.isActionRequired !== undefined ? this.props.isActionRequired : true}\r\n                    deleteParam={this.props.deleteParam || \"\"}\r\n                    fetchRecord={this.props.fetchRecord || \"\"}\r\n                    editParam={{ ...this.props.editParam, modalName: \"openCommentModal\" } || \"\"}\r\n                    deleteRecord={this.props.deleteComment || \"\"}\r\n                    selectedId={this.props.selectedId}\r\n                    isToolBarRequired={false}\r\n                    scrollable={\"scrollable\"}\r\n                    gridHeight={\"550px\"}\r\n                    methodUrl={this.props.methodUrl}\r\n                    jsonField = {\"jsondata\"}\r\n                />\r\n                {\r\n                    this.props.Login.openCommentModal ?\r\n                        <SlideOutModal\r\n                            onSaveClick={this.onSaveClick}\r\n                            operation={this.props.Login.operation}\r\n                            screenName={this.props.Login.screenName}\r\n                            closeModal={this.handleClose}\r\n                            show={this.props.Login.openCommentModal}\r\n                            inputParam={this.props.Login.inputParam}\r\n                            esign={this.props.Login.loadEsign}\r\n                            validateEsign={this.validateEsign}\r\n                            masterStatus={this.props.Login.masterStatus}\r\n                            updateStore={this.props.updateStore}\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                            mandatoryFields={mandatoryFields}\r\n                            addComponent={this.props.Login.loadEsign ?\r\n                                <Esign\r\n                                    operation={this.props.Login.operation}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                />\r\n                                :\r\n                                <AddComment\r\n                                    selectedRecord={this.state.selectedRecord}\r\n                                    jsonField = {\"jsondata\"}\r\n                                    SampleTestComments={this.props.Login.sampleTestComments}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onComboChange={this.onComboChange}\r\n                                    isTestComment={this.props.isTestComment}\r\n                                    maxSize={20}\r\n                                    maxFiles={3}\r\n                                    operation={this.props.Login.operation}\r\n                                    selectedListName={this.props.selectedListName}\r\n                                    displayName={this.props.displayName}\r\n                                    masterList={this.props.masterList}\r\n                                />\r\n                            }\r\n                        />\r\n                        : \"\"\r\n                }\r\n            </>\r\n        )\r\n    }\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n    }\r\n    onComboChange = (comboData, comboName) => {\r\n        if (comboData) {\r\n            let selectedRecord = this.state.selectedRecord || {};\r\n            selectedRecord[comboName] = comboData\r\n            this.setState({ selectedRecord });\r\n        }\r\n    }\r\n    onInputOnChange = (event) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onSaveClick = (saveType, formRef) => {\r\n        // const masterData = this.props.Login.masterData;\r\n        // let inputData = {}\r\n        // let inputParam = {}\r\n        // inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        // if(this.props.Login.screenName === \"IDS_SAMPLECOMMENTS\") {\r\n        //     // let saveParam={userInfo:this.props.Login.userInfo,\r\n        //     //     selectedRecord:this.state.selectedRecord,\r\n        //     //     masterData:this.props.Login.masterData,\r\n        //     //     saveType, formRef,\r\n        //     //     operation:this.props.Login.operation\r\n        //     // }\r\n        //     // inputParam = onSaveSampleAttachment(saveParam);\r\n        // }else if(this.props.Login.screenName === \"IDS_TESTCOMMENTS\") {\r\n        //     let saveParam={\r\n        //         userInfo:this.props.Login.userInfo,\r\n        //         isTestComment:this.props.isTestComment,\r\n        //         selectedRecord:this.state.selectedRecord,\r\n        //         masterData:this.props.Login.masterData,\r\n        //         saveType, formRef,\r\n        //         operation:this.props.Login.operation,\r\n        //         selectedMaster:this.props.selectedMaster\r\n        //     }\r\n        //     inputParam = onSaveTestComments(saveParam);\r\n        // }\r\n        // if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n        //     const updateInfo = {\r\n        //         typeName: DEFAULT_RETURN,\r\n        //         data: {\r\n        //             loadEsign: true,\r\n        //             screenData: { inputParam, masterData },\r\n        //             operation: this.props.Login.operation,\r\n        //             screenName: this.props.Login.screenName,\r\n        //         }\r\n        //     }\r\n        //     this.props.updateStore(updateInfo);\r\n        // }\r\n        // else {\r\n        //     this.props.crudMaster(inputParam, masterData, \"openCommentModal\");\r\n        // }\r\n        this.props.onSaveClick(saveType, formRef, this.state.selectedRecord)\r\n    }\r\n    handleClose = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openCommentModal = this.props.Login.openCommentModal\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let operation = this.props.Login.operation;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openCommentModal = false;\r\n                selectedRecord = {};\r\n                operation = undefined;\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n            }\r\n        }\r\n        else {\r\n            openCommentModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openCommentModal, loadEsign, selectedRecord, selectedParamId: null, operation }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        if (this.props.Login.operation === 'dynamic') {\r\n            this.props.validateEsignforApproval(inputParam, \"openChildModal\");\r\n        } else {\r\n            this.props.validateEsignCredential(inputParam, \"openCommentModal\");\r\n        }\r\n    }\r\n}\r\nexport default connect(mapStateToProps, { updateStore, viewAttachment, validateEsignCredential, crudMaster, getCommentsCombo, deleteComment })(injectIntl(Comments));"]},"metadata":{},"sourceType":"module"}