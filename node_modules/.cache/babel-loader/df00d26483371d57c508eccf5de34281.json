{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from'react-redux';import{FormattedMessage,injectIntl}from\"react-intl\";import{callService,crudMaster,validateEsignCredential,updateStore,getInstitutionDetail,getInstitutionCombo,getInstitutionSiteData,addInstitutionFile,changeInstitutionCategoryFilter,viewAttachment,filterColumnData,getCitComboServices,getDistComboServices}from\"../../../actions\";import BreadcrumbComponent from\"../../../components/Breadcrumb.Component\";import{Affix}from'rsuite';import{constructOptionList,getControlMap,showEsign,onDropAttachFileList,deleteAttachmentDropZone,create_UUID,validatePhoneNumber,validateEmail}from'../../../components/CommonScript';import{Row,Col,Card,FormGroup,FormLabel,Nav}from\"react-bootstrap\";import{ContentPanel}from'../../product/product.styled';import ListMaster from\"../../../components/list-master/list-master.component\";import ReactTooltip from'react-tooltip';import InstitutionCategoryFilter from\"./InstitutionCategoryFilter\";import{ReadOnlyText}from'../../../components/App.styles';import CustomTab from\"../../../components/custom-tabs/custom-tabs.component\";import InstitutionSiteTab from\"./InstitutionSiteTab\";import InstitutionFileTab from\"./InstitutionFileTab\";import{DEFAULT_RETURN}from\"../../../actions/LoginTypes\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faPencilAlt,faTrashAlt}from\"@fortawesome/free-solid-svg-icons\";import SlideOutModal from\"../../../components/slide-out-modal/SlideOutModal\";import Esign from\"../../audittrail/Esign\";import AddInstitution from\"./AddInstitution\";import AddInstitutionSite from\"./AddInstitutionSite\";import AddInstitutionFile from\"./AddInstitutionFile\";import ConfirmMessage from'../../../components/confirm-alert/confirm-message.component';import{toast}from'react-toastify';import{attachmentType,transactionStatus}from\"../../../components/Enumeration\";var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Institution=/*#__PURE__*/function(_React$Component){_inherits(Institution,_React$Component);var _super=_createSuper(Institution);function Institution(props){var _this;_classCallCheck(this,Institution);_this=_super.call(this,props);_this.tabDetail=function(){var tabMap=new Map();var editSiteId=_this.state.controlMap.has(\"EditInstitutionSite\")&&_this.state.controlMap.get(\"EditInstitutionSite\").ncontrolcode;var deleteSiteId=_this.state.controlMap.has(\"DeleteInstitutionSite\")&&_this.state.controlMap.get(\"DeleteInstitutionSite\").ncontrolcode;var deleteFileId=_this.state.controlMap.has(\"DeleteInstitutionFile\")&&_this.state.controlMap.get(\"DeleteInstitutionFile\").ncontrolcode;var deleteParam={operation:\"delete\",deleteSiteId:deleteSiteId};var deleteTestParam={operation:\"delete\",deleteFileId:deleteFileId};var editParam={screenName:\"Institution Site\",operation:\"update\",primaryKeyField:\"ninstitutionsitecode\",userInfo:_this.props.Login.userInfo,inputParam:_this.props.Login.inputParam,ncontrolcode:editSiteId,instItem:_this.props.Login.masterData.selectedInstitution,instItemSite:_this.props.Login.masterData.selectedInstitutionSite};tabMap.set(\"IDS_INSTITUTIONSITE\",/*#__PURE__*/React.createElement(InstitutionSiteTab,{selectedId:_this.props.Login.selectedId,controlMap:_this.state.controlMap,userRoleControlRights:_this.state.userRoleControlRights,selectedInstitution:_this.props.Login.masterData.selectedInstitution,InstitutionSite:_this.props.Login.masterData.InstitutionSite,masterData:_this.props.Login.masterData,userInfo:_this.props.Login.userInfo,getInstitutionSiteData:_this.props.getInstitutionSiteData,inputParam:_this.props.Login.inputParam,selectedRecord:_this.state.selectedRecord,dataState:_this.props.Login.dataState,deleteRecord:_this.DeleteInstitutionSite,deleteParam:deleteParam,fetchRecord:_this.props.getInstitutionSiteData,editParam:editParam,InstitutionSiteData:_this.props.Login.masterData.InstitutionSite||[],screenName:\"Institution Site\",settings:_this.props.Login.settings,errorCode:_this.props.Login.errorCode}));tabMap.set(\"IDS_INSTITUTIONFILE\",/*#__PURE__*/React.createElement(InstitutionFileTab,{controlMap:_this.state.controlMap,userRoleControlRights:_this.state.userRoleControlRights,userInfo:_this.props.Login.userInfo,inputParam:_this.props.Login.inputParam,InstitutionFile:_this.props.Login.masterData.InstitutionFile||[],settings:_this.props.Login.settings,addInstitutionFile:_this.props.addInstitutionFile,deleteRecord:_this.DeleteInstitutionFile,deleteParam:deleteTestParam//editParam={editTestParam}\n,viewInstitutionFile:_this.viewInstitutionFile,screenName:\"InstitutionFile\"}));return tabMap;};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};_this.onFilterSubmit=function(){if(_this.props.Login.masterData.defaultInstitutionCategory){var inputParam={inputData:{ninstitutioncatcode:_this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode,userinfo:_this.props.Login.userInfo},classUrl:\"institution\",methodUrl:\"InstitutionByCategory\"};_this.props.changeInstitutionCategoryFilter(inputParam,_this.props.Login.masterData.FilterInstitutionCategory,_this.props.Login.masterData.defaultInstitutionCategory);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_INSTITUTIONCATEGORYNOTAVAILABLE\"}));}};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputParam={inputData:{\"ninstitutioncatcode\":_this.props.Login.masterData.SelectedInstitutionCategory.ninstitutioncatcode,\"userinfo\":_this.props.Login.userInfo},classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"InstitutionByCategory\",displayName:_this.props.intl.formatMessage({id:\"IDS_INSTITUTION\"})};_this.props.changeInstitutionCategoryFilter(inputParam,_this.props.Login.masterData.FilterInstitutionCategory,_this.props.Login.masterData.SelectedInstitutionCategory);};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var openChildModal=_this.props.Login.openChildModal;var selectedRecord=_this.props.Login.selectedRecord;var selectedId=_this.props.Login.selectedId;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;openChildModal=false;selectedRecord=[];}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";selectedRecord=selectedRecord;}}else{openModal=false;openChildModal=false;selectedRecord=[];_this.props.Login.cityList=[];_this.props.Login.districtList=[];selectedId=null;//this.setState({ selectedRecord });\n}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:selectedId,openChildModal:openChildModal}};_this.props.updateStore(updateInfo);};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.onNumericInputOnChange=function(value,name){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type===\"checkbox\"){selectedRecord[event.target.name]=event.target.checked===true?3:4;}else if(event.target.type===\"radio\"){selectedRecord[event.target.name]=optional;}else{if(event.target.name===\"sfaxno\"){if(event.target.value!==\"\"){event.target.value=validatePhoneNumber(event.target.value);selectedRecord[event.target.name]=event.target.value!==\"\"?event.target.value:selectedRecord[event.target.name];}else{selectedRecord[event.target.name]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}}_this.setState({selectedRecord:selectedRecord});};_this.onComboChangeFilter=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||[];if(comboData){if(fieldName===\"ninstitutioncatcode\"){if(comboData.value!==_this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode){var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultInstitutionCategory:comboData.item});var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:masterData}};_this.props.updateStore(updateInfo);}}}};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};if(comboData!=null){if(fieldName===\"ninstitutioncatcode\"){selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"nsitecode\"){selectedRecord[\"nsitecode\"]=comboData;selectedRecord[\"ssitecode\"]=comboData.item[\"ssitecode\"];_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"nregioncode\"){selectedRecord[\"nregioncode\"]=comboData;selectedRecord[\"sregioncode\"]=comboData.item[\"sregioncode\"];_this.props.getDistComboServices({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nregioncode.label,primarykey:selectedRecord.nregioncode.value}});selectedRecord[\"ndistrictcode\"]=\"\";selectedRecord[\"sdistrictcode\"]=\"\";selectedRecord[\"ncitycode\"]=\"\";selectedRecord[\"scitycode\"]=\"\";_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ncountrycode\"){selectedRecord[\"ncountrycode\"]=comboData;_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ndistrictcode\"){selectedRecord[\"ndistrictcode\"]=comboData;selectedRecord[\"sdistrictcode\"]=comboData.item[\"sdistrictcode\"];_this.props.getCitComboServices({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.ndistrictcode.label,primarykey:selectedRecord.ndistrictcode.value}});selectedRecord[\"ncitycode\"]=\"\";selectedRecord[\"scitycode\"]=\"\";_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ncitycode\"){selectedRecord[\"ncitycode\"]=comboData;selectedRecord[\"scitycode\"]=comboData.item[\"scitycode\"];_this.setState({selectedRecord:selectedRecord});}}};_this.onSaveClick=function(saveType,formRef){var postParam=undefined;var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;var dataState=undefined;if(_this.props.Login.screenName===\"Institution\"){if(_this.props.Login.operation===\"update\"){// edit\nvar selectedRecord=_this.state.selectedRecord;postParam={inputListName:\"Institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\"};inputData[\"institution\"]={};_this.fieldInstitutionList.map(function(item){return inputData[\"institution\"][item]=selectedRecord[item]!==null?selectedRecord[item]:\"\";});inputData[\"institution\"][\"ninstitutioncode\"]=selectedRecord[\"ninstitutioncode\"]?selectedRecord[\"ninstitutioncode\"]:-1;inputData[\"institution\"][\"ninstitutioncatcode\"]=_this.state.selectedRecord?_this.state.selectedRecord.ninstitutioncatcode.value:-1;dataState=_this.state.dataState;}else{//add               \ninputData[\"institution\"]={\"nsitecode\":_this.props.Login.userInfo.nmastersitecode};_this.fieldInstitutionList.map(function(item){return inputData[\"institution\"][item]=_this.state.selectedRecord[item]!==undefined?_this.state.selectedRecord[item]:\"\";});inputData[\"institution\"][\"ninstitutioncatcode\"]=_this.state.selectedRecord?_this.state.selectedRecord.ninstitutioncatcode.value:-1;}var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"Institution\",displayName:_this.props.Login.screenName,inputData:inputData,selectedId:_this.state.selectedRecord[\"ninstututioncode\"],operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,dataState:dataState,searchRef:_this.searchRef,postParam:postParam,filtercombochange:_this.props.Login.masterData.searchedData!==undefined?_this.state.selectedRecord.ninstitutioncatcode.value===_this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode?false:true:false};var masterData=_objectSpread({},_this.props.Login.masterData);if(_this.state.selectedRecord.ninstitutioncatcode.value!==_this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode){masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultInstitutionCategory:_this.state.selectedRecord.ninstitutioncatcode.item,SelectedInstitutionCategory:_this.state.selectedRecord.ninstitutioncatcode.item});}//  this.setState({ FilterInstitutionCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\nif(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.screenName}),operation:_this.props.Login.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}else if(_this.props.Login.screenName===\"Institution Site\"){var isValidateEmail=_this.state.selectedRecord[\"semail\"]?validateEmail(_this.state.selectedRecord[\"semail\"]):true;if(isValidateEmail){if(_this.props.Login.operation===\"update\"){// edit\nvar _selectedRecord=_this.state.selectedRecord;postParam={inputListName:\"InstitutionSite\",selectedObject:\"selectedInstitutionSite\",primaryKeyField:\"ninstitutionsitecode\"};inputData[\"institutionsite\"]={};inputData[\"institutionsite\"][\"ninstitutionsitecode\"]=_selectedRecord[\"ninstitutionsitecode\"]?_selectedRecord[\"ninstitutionsitecode\"]:-1;inputData[\"institutionsite\"][\"ninstitutioncode\"]=_this.props.Login.instItem[\"ninstitutioncode\"];;inputData[\"institutionsite\"][\"nregionalsitecode\"]=_this.state.selectedRecord[\"nsitecode\"]?_this.state.selectedRecord[\"nsitecode\"].value:-1;inputData[\"institutionsite\"][\"nregioncode\"]=_this.state.selectedRecord[\"nregioncode\"]?_this.state.selectedRecord[\"nregioncode\"].value:-1;inputData[\"institutionsite\"][\"ncountrycode\"]=_this.state.selectedRecord[\"ncountrycode\"]?_this.state.selectedRecord[\"ncountrycode\"].value:-1;inputData[\"institutionsite\"][\"ncitycode\"]=_this.state.selectedRecord[\"ncitycode\"]?_this.state.selectedRecord[\"ncitycode\"].value:-1;inputData[\"institutionsite\"][\"ndistrictcode\"]=_this.state.selectedRecord[\"ndistrictcode\"]?_this.state.selectedRecord[\"ndistrictcode\"].value:-1;_this.fieldInstitutionSiteList.map(function(item){return inputData[\"institutionsite\"][item]=_selectedRecord[item]!==null?_selectedRecord[item]:\"\";});dataState=_this.state.dataState;}else{postParam=undefined;//add               \n//inputData[\"institutionsite\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };  \ninputData[\"institutionsite\"]={};inputData[\"institutionsite\"][\"ninstitutioncode\"]=_this.props.Login.instItem[\"ninstitutioncode\"];;inputData[\"institutionsite\"][\"nregionalsitecode\"]=_this.state.selectedRecord[\"nsitecode\"]?_this.state.selectedRecord[\"nsitecode\"].value:-1;inputData[\"institutionsite\"][\"nregioncode\"]=_this.state.selectedRecord[\"nregioncode\"]?_this.state.selectedRecord[\"nregioncode\"].value:-1;inputData[\"institutionsite\"][\"ncountrycode\"]=_this.state.selectedRecord[\"ncountrycode\"]?_this.state.selectedRecord[\"ncountrycode\"].value:-1;inputData[\"institutionsite\"][\"ncitycode\"]=_this.state.selectedRecord[\"ncitycode\"]?_this.state.selectedRecord[\"ncitycode\"].value:-1;inputData[\"institutionsite\"][\"ndistrictcode\"]=_this.state.selectedRecord[\"ndistrictcode\"]?_this.state.selectedRecord[\"ndistrictcode\"].value:-1;_this.fieldInstitutionSiteList.map(function(item){return inputData[\"institutionsite\"][item]=_this.state.selectedRecord[item]!==undefined?_this.state.selectedRecord[item]:\"\";});}var _inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"InstitutionSite\",displayName:_this.props.Login.screenName,inputData:inputData,selectedId:_this.state.selectedRecord[\"ninstitutionsitecode\"],operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,dataState:dataState,searchRef:_this.searchRef,postParam:postParam};//this.setState({ FilterClientCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\nif(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var _updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:_inputParam,masterData:_this.props.Login.masterData},openChildModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.screenName}),operation:_this.props.Login.operation}};_this.props.updateStore(_updateInfo);}else{_this.props.crudMaster(_inputParam,_this.props.Login.masterData,\"openChildModal\");}}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_ENTERVALIDEMAIL\"}));}}else if(_this.props.Login.screenName===\"InstitutionFile\"){var _selectedRecord2=_this.state.selectedRecord;var acceptedFiles=_selectedRecord2.sfilename;var nattachmenttypecode=_selectedRecord2.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var institutionFileArray=[];var institutionFile={ninstitutioncode:_this.props.Login.masterData.selectedInstitution.ninstitutioncode,ninstitutionfilecode:_selectedRecord2.ninstitutionfilecode?_selectedRecord2.ninstitutionfilecode:0,nstatus:transactionStatus.ACTIVE,nattachmenttypecode:nattachmenttypecode};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},institutionFile);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=_selectedRecord2.ssystemfilename?_selectedRecord2.ssystemfilename.split('.'):\"\";var filesystemfileext=_selectedRecord2.ssystemfilename?file.name.split('.')[ssystemfilename.length-1]:\"\";var uniquefilename=nattachmenttypecode===attachmentType.FTP?_selectedRecord2.ntestfilecode&&_selectedRecord2.ntestfilecode>0&&_selectedRecord2.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=file.name;tempData[\"sfiledesc\"]=_selectedRecord2.sfiledesc?_selectedRecord2.sfiledesc.trim():\"\";tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);institutionFileArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{institutionFile[\"sfilename\"]=_selectedRecord2.sfilename;institutionFile[\"sfiledesc\"]=_selectedRecord2.sfiledesc?_selectedRecord2.sfiledesc.trim():\"\";institutionFile[\"nlinkcode\"]=transactionStatus.NA;institutionFile[\"ssystemfilename\"]=_selectedRecord2.ssystemfilename;institutionFile[\"nfilesize\"]=_selectedRecord2.nfilesize;institutionFileArray.push(institutionFile);}}else{institutionFile[\"sfilename\"]=_selectedRecord2.slinkfilename.trim();institutionFile[\"sfiledesc\"]=_selectedRecord2.slinkdescription?_selectedRecord2.slinkdescription.trim():\"\";institutionFile[\"nlinkcode\"]=_selectedRecord2.nlinkcode.value?_selectedRecord2.nlinkcode.value:-1;institutionFile[\"ssystemfilename\"]=\"\";institutionFile[\"nfilesize\"]=0;institutionFileArray.push(institutionFile);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"institutionfile\",JSON.stringify(institutionFileArray));var selectedId=null;var _postParam=undefined;if(_this.props.Login.operation===\"update\"){_postParam={inputListName:\"Institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\"};selectedId=_selectedRecord2[\"ninstitutionfilecode\"];}var _inputParam2={inputData:{userinfo:_this.props.Login.userInfo},formData:formData,isFileupload:true,operation:_this.props.Login.operation,classUrl:\"institution\",saveType:saveType,formRef:formRef,methodUrl:\"InstitutionFile\",postParam:_postParam};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var _updateInfo2={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:_inputParam2,masterData:_this.props.Login.masterData},openChildModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.screenName}),operation:_this.props.Login.operation}};_this.props.updateStore(_updateInfo2);}else{_this.props.crudMaster(_inputParam2,_this.props.Login.masterData,\"openChildModal\");}}};_this.ConfirmDelete=function(deleteId){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.DeleteInstitution(\"delete\",deleteId);});};_this.DeleteInstitutionFile=function(deleteTestParam){var inputData=[];var ncontrolcode=deleteTestParam.ncontrolCode;var operation=deleteTestParam.operation;inputData[\"institutionfile\"]=deleteTestParam.selectedRecord;inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"institutionfile\",selectedObject:\"selectedInstitutionFile\",primaryKeyField:\"ninstitutionfilecode\",primaryKeyValue:deleteTestParam.selectedRecord.ninstitutionfilecode,fetchUrl:\"institution/getInstitutionFile\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"InstitutionFile\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,operation:\"delete\",postParam:postParam};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolcode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,screenName:\"Institution File\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}};_this.DeleteInstitutionSite=function(deleteParam){var inputData=[];var ncontrolcode=deleteParam.ncontrolCode;var operation=deleteParam.operation;delete deleteParam.selectedRecord.expanded;inputData[\"institutionsite\"]=deleteParam.selectedRecord;inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"institutionsite\",selectedObject:\"selectedInstitutionSite\",primaryKeyField:\"ninstitutionsitecode\",primaryKeyValue:deleteParam.selectedRecord.ninstitutionsitecode,fetchUrl:\"institution/getInstitutionSite\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"InstitutionSite\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,operation:\"delete\",postParam:postParam};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolcode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,screenName:\"Institution Site\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}};_this.DeleteInstitution=function(operation,ncontrolCode){var inputData=[];inputData[\"institution\"]=_this.props.Login.masterData.selectedInstitution;inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\",primaryKeyValue:_this.props.Login.masterData.selectedInstitution.ninstitutioncode,fetchUrl:\"institution/getSelectedInstitutionDetail\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"Institution\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,operation:\"delete\",postParam:postParam};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"Institution\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.viewInstitutionFile=function(filedata){var inputParam={inputData:{institutionfile:filedata,userinfo:_this.props.Login.userInfo},classUrl:\"institution\",operation:\"view\",methodUrl:\"InstitutionFile\",screenName:\"IDS_INSTITUTION\"};_this.props.viewAttachment(inputParam);};_this.onDropInstitutionFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"});};_this.validateEsign=function(){var modalName;var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};if(_this.props.Login.screenName===\"Institution\"){modalName=\"openModal\";}else{modalName=\"openChildModal\";}_this.props.validateEsignCredential(inputParam,modalName);};_this.formRef=React.createRef();_this.confirmMessage=new ConfirmMessage();_this.searchRef=React.createRef();_this.fieldInstitutionList=[];_this.fieldInstitutionSiteList=[];var _dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={dataState:_dataState,userRoleControlRights:[],controlMap:new Map(),selectedRecord:{}};return _this;}_createClass(Institution,[{key:\"render\",value:function render(){var _this2=this;var mandatoryFields=[];if(this.props.Login.screenName===\"Institution\"){mandatoryFields.push({mandatory:true,idsName:\"IDS_INSTITUTIONCATEGORY\",dataField:\"ninstitutioncatcode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_INSTITUTION\",dataField:\"sinstitutionname\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"},{mandatory:true,idsName:\"IDS_INSTITUTIONCODE\",dataField:\"sinstitutioncode\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"});}else if(this.props.Login.screenName===\"Institution Site\"){mandatoryFields.push({mandatory:true,idsName:\"IDS_INSTITUTIONSITE\",dataField:\"sinstitutionsitename\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"},{mandatory:true,idsName:\"IDS_REGIONNAME\",dataField:\"nregioncode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_DISTRICT\",dataField:\"ndistrictcode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_CITY\",dataField:\"ncitycode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_COUNTRY\",dataField:\"ncountrycode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_LIMSSITE\",dataField:\"nsitecode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"});}else{if(this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK){mandatoryFields.push({\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});}else{// if (this.props.operation !== 'update') {\nmandatoryFields.push({\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"});}}this.fieldInstitutionList=[\"sinstitutionname\",\"sinstitutioncode\",\"sdescription\"];this.fieldInstitutionSiteList=[\"sinstitutionsitename\",\"sinstitutionsiteaddress\",\"szipcode\",\"sstate\",\"stelephone\",\"sfaxno\",\"semail\",\"swebsite\"];var addId=this.state.controlMap.has(\"AddInstitution\")&&this.state.controlMap.get(\"AddInstitution\").ncontrolcode;var editId=this.state.controlMap.has(\"EditInstitution\")&&this.state.controlMap.get(\"EditInstitution\").ncontrolcode;var deleteId=this.state.controlMap.has(\"DeleteInstitution\")&&this.state.controlMap.get(\"DeleteInstitution\").ncontrolcode;var filterParam={inputListName:\"Institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\",fetchUrl:\"institution/getSelectedInstitutionDetail\",fecthInputObject:{userinfo:this.props.Login.userInfo,Institution:this.props.Login.masterData.selectedInstitution},masterData:this.props.Login.masterData,searchFieldList:[\"sinstitutioncatname\",\"sinstitutionname\",\"sdescription\"]};var selectedInstitution=this.props.Login.masterData.selectedInstitution;var breadCrumbData=this.state.filterData||[];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},breadCrumbData.length>0?/*#__PURE__*/React.createElement(Affix,{top:53},/*#__PURE__*/React.createElement(BreadcrumbComponent,{breadCrumbItem:breadCrumbData})):\"\",/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster,{formatMessage:this.props.intl.formatMessage,screenName:this.props.intl.formatMessage({id:\"IDS_INSTITUTION\"}),masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.Institution,getMasterDetail:function getMasterDetail(_Institution){return _this2.props.getInstitutionDetail(_Institution,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:this.props.Login.masterData.selectedInstitution,primaryKeyField:\"ninstitutioncode\",mainField:\"sinstitutionname\",firstField:\"sinstitutioncatname\",isIDSField:\"Yes\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData,hidePaging:true,openModal:function openModal(){return _this2.props.getInstitutionCombo(\"Institution\",\"create\",\"ninstitutioncode\",_this2.props.Login.masterData,_this2.props.Login.userInfo,addId);},openFilter:this.openFilter,closeFilter:this.closeFilter,onFilterSubmit:this.onFilterSubmit,showFilterIcon:true,showFilter:this.props.Login.showFilter,filterComponent:[{\"IDS_INSTITUTIONCATEGORYFILTER\":/*#__PURE__*/React.createElement(InstitutionCategoryFilter,{FilterInstitutionCategory:this.state.FilterInstitutionCategory||[],nfilterInstitutionCategory:this.props.Login.masterData.defaultInstitutionCategory||{},selectedRecord:this.state.selectedRecord||{},onFilterComboChange:this.onComboChangeFilter})}]})),/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},this.props.Login.masterData.selectedInstitution?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(ReactTooltip,{place:\"bottom\",globalEventOff:\"click\",id:\"tooltip_list_wrap\"}),/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},this.props.Login.masterData.selectedInstitution.sinstitutionname),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"editInstitution\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_EDIT\"}),\"data-for\":\"tooltip_list_wrap\",hidden:this.state.userRoleControlRights.indexOf(editId)===-1,className:\"btn btn-circle outline-grey mr-2\",onClick:function onClick(e){return _this2.props.getInstitutionCombo(\"Institution\",\"update\",\"ninstitutioncode\",_this2.props.Login.masterData,_this2.props.Login.userInfo,editId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"deleteInstitution\",className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"}),\"data-for\":\"tooltip_list_wrap\",hidden:this.state.userRoleControlRights.indexOf(deleteId)===-1,onClick:function onClick(){return _this2.ConfirmDelete(deleteId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt})))))),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_INSTITUTIONCODE\",messasge:\"Institution\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.selectedInstitution.sinstitutioncode))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_DESCRIPTION\",messasge:\"Description\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.selectedInstitution.sdescription)))),selectedInstitution&&/*#__PURE__*/React.createElement(CustomTab,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange}))):\"\"))))))),(this.props.Login.openModal||this.props.Login.openChildModal)&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal||this.props.Login.openChildModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,mandatoryFields:mandatoryFields,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.screenName===\"Institution\"?/*#__PURE__*/React.createElement(AddInstitution,{onNumericInputOnChange:this.onNumericInputOnChange,selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,InstitutionCategory:this.props.Login.InstitutionCategory,operation:this.props.Login.operation,inputParam:this.props.inputParam,userInfo:this.props.Login.userInfo}):this.props.Login.screenName===\"Institution Site\"?/*#__PURE__*/React.createElement(AddInstitutionSite,{selectedRecord:this.state.selectedRecord||{},Site:this.props.Login.Site,Region:this.props.Login.Region,Country:this.props.Login.Country,onComboChange:this.onComboChange,onInputOnChange:this.onInputOnChange,operation:this.props.Login.operation,inputParam:this.props.inputParam,userInfo:this.props.Login.userInfo,districtList:this.props.Login.districtList,cityList:this.props.Login.cityList}):this.props.Login.screenName===\"InstitutionFile\"?/*#__PURE__*/React.createElement(AddInstitutionFile,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onDrop:this.onDropInstitutionFile,label:this.props.intl.formatMessage({id:\"IDS_FILENAME\"}),deleteAttachment:this.deleteAttachment,linkMaster:this.props.Login.linkMaster,maxSize:20,maxFiles:1}):\"\"}));}},{key:\"generateBreadCrumData\",value:function generateBreadCrumData(){var breadCrumbData=[];if(this.props.Login.masterData&&this.props.Login.masterData.FilterInstitutionCategory){breadCrumbData.push({\"label\":\"IDS_INSTITUTIONCATEGORY\",\"value\":this.props.Login.masterData.defaultInstitutionCategory?this.props.Login.masterData.defaultInstitutionCategory.sinstitutioncatname:\"-\"});}return breadCrumbData;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var selectedRecord=this.state.selectedRecord||{};if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){selectedRecord=this.props.Login.selectedRecord;this.setState({selectedRecord:selectedRecord});}if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData});}else{var dataState=this.state.dataState;if(this.props.Login.dataState===undefined){dataState={skip:0,take:this.props.Login.settings?parseInt(this.props.Login.settings[14]):5};}this.setState({data:this.props.Login.masterData,dataState:dataState,selectedRecord:this.props.Login.selectedRecord});}///     let FilterInstitutionCategory = this.state.FilterInstitutionCategory || {};\n//   if (this.props.Login.masterData.FilterInstitutionCategory !== previousProps.Login.masterData.FilterInstitutionCategory) {\nvar InstitutionCategoryMap=constructOptionList(this.props.Login.masterData.FilterInstitutionCategory||[],\"ninstitutioncatcode\",\"sinstitutioncatname\",'ninstitutioncatcode','descending',false);var FilterInstitutionCategory=InstitutionCategoryMap.get(\"OptionList\");//  } \nvar filterData=this.generateBreadCrumData();this.setState({FilterInstitutionCategory:FilterInstitutionCategory,filterData:filterData});//Vishakh: I commented updateStore. Because this updateStore won't get any change in the flow.\n//  Even the udpateStore is there or not, there is no change in the flow.\n// if(this.props.Login.comboSet){\n//     const updateInfo = {\n//         typeName: DEFAULT_RETURN,\n//         data: { comboSet: false }\n//     }\n//     this.props.updateStore(updateInfo);\n// }\n}// if (this.props.Login.masterData !== previousProps.Login.masterData) {\n//     this.setState({ filterData });\n// }\n}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==\"\"&&props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return Institution;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,updateStore:updateStore,getInstitutionDetail:getInstitutionDetail,getInstitutionCombo:getInstitutionCombo,getInstitutionSiteData:getInstitutionSiteData,addInstitutionFile:addInstitutionFile,changeInstitutionCategoryFilter:changeInstitutionCategoryFilter,viewAttachment:viewAttachment,filterColumnData:filterColumnData,getCitComboServices:getCitComboServices,getDistComboServices:getDistComboServices})(injectIntl(Institution));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/submitter/institution/Institution.jsx"],"names":["React","connect","FormattedMessage","injectIntl","callService","crudMaster","validateEsignCredential","updateStore","getInstitutionDetail","getInstitutionCombo","getInstitutionSiteData","addInstitutionFile","changeInstitutionCategoryFilter","viewAttachment","filterColumnData","getCitComboServices","getDistComboServices","BreadcrumbComponent","Affix","constructOptionList","getControlMap","showEsign","onDropAttachFileList","deleteAttachmentDropZone","create_UUID","validatePhoneNumber","validateEmail","Row","Col","Card","FormGroup","FormLabel","Nav","ContentPanel","ListMaster","ReactTooltip","InstitutionCategoryFilter","ReadOnlyText","CustomTab","InstitutionSiteTab","InstitutionFileTab","DEFAULT_RETURN","FontAwesomeIcon","faPencilAlt","faTrashAlt","SlideOutModal","Esign","AddInstitution","AddInstitutionSite","AddInstitutionFile","ConfirmMessage","toast","attachmentType","transactionStatus","mapStateToProps","state","Login","Institution","props","tabDetail","tabMap","Map","editSiteId","controlMap","has","get","ncontrolcode","deleteSiteId","deleteFileId","deleteParam","operation","deleteTestParam","editParam","screenName","primaryKeyField","userInfo","inputParam","instItem","masterData","selectedInstitution","instItemSite","selectedInstitutionSite","set","selectedId","userRoleControlRights","InstitutionSite","selectedRecord","dataState","DeleteInstitutionSite","settings","errorCode","InstitutionFile","DeleteInstitutionFile","viewInstitutionFile","openFilter","showFilter","updateInfo","typeName","data","closeFilter","onFilterSubmit","defaultInstitutionCategory","inputData","ninstitutioncatcode","userinfo","classUrl","methodUrl","FilterInstitutionCategory","warn","intl","formatMessage","id","reloadData","searchRef","current","value","SelectedInstitutionCategory","displayName","closeModal","loadEsign","openModal","openChildModal","cityList","districtList","onTabChange","tabProps","onNumericInputOnChange","name","setState","onInputOnChange","event","optional","target","type","checked","onComboChangeFilter","comboData","fieldName","item","onComboChange","sdisplayname","nregioncode","label","primarykey","ndistrictcode","onSaveClick","saveType","formRef","postParam","undefined","inputListName","selectedObject","fieldInstitutionList","map","nmastersitecode","filtercombochange","searchedData","nformcode","ncontrolCode","screenData","isValidateEmail","fieldInstitutionSiteList","info","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","NO","institutionFileArray","institutionFile","ninstitutioncode","ninstitutionfilecode","nstatus","ACTIVE","formData","FormData","FTP","Array","isArray","length","forEach","file","index","tempData","Object","assign","splittedFileName","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","ntestfilecode","sfiledesc","trim","NA","size","append","push","YES","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","isFileupload","ConfirmDelete","deleteId","confirmMessage","confirm","DeleteInstitution","primaryKeyValue","fetchUrl","fecthInputObject","expanded","ninstitutionsitecode","filedata","institutionfile","onDropInstitutionFile","attachedFiles","maxSize","actionType","deleteAttachment","validateEsign","modalName","sreason","nreasoncode","spredefinedreason","password","createRef","skip","take","parseInt","mandatoryFields","mandatory","idsName","dataField","mandatoryLabel","controlType","LINK","addId","editId","filterParam","searchFieldList","breadCrumbData","filterData","sinstitutionname","indexOf","e","sinstitutioncode","sdescription","masterStatus","InstitutionCategory","Site","Region","Country","linkMaster","sinstitutioncatname","previousProps","values","InstitutionCategoryMap","generateBreadCrumData","error","Component"],"mappings":"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","sourcesContent":[" import React from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport {FormattedMessage,injectIntl } from \"react-intl\";\r\nimport { callService,crudMaster,validateEsignCredential,updateStore,getInstitutionDetail,getInstitutionCombo,\r\n         getInstitutionSiteData,addInstitutionFile,changeInstitutionCategoryFilter,viewAttachment,filterColumnData ,getCitComboServices,getDistComboServices} from \"../../../actions\";\r\nimport BreadcrumbComponent from \"../../../components/Breadcrumb.Component\";\r\nimport { Affix } from 'rsuite';\r\nimport { constructOptionList, getControlMap, showEsign,onDropAttachFileList,deleteAttachmentDropZone,create_UUID,validatePhoneNumber,validateEmail } from '../../../components/CommonScript';\r\nimport { Row,Col,Card,FormGroup, FormLabel,Nav} from \"react-bootstrap\";\r\nimport { ContentPanel } from '../../product/product.styled';\r\nimport ListMaster from \"../../../components/list-master/list-master.component\";\r\nimport ReactTooltip from 'react-tooltip';\r\nimport InstitutionCategoryFilter  from  \"./InstitutionCategoryFilter\";\r\nimport { ReadOnlyText } from '../../../components/App.styles';\r\nimport CustomTab from \"../../../components/custom-tabs/custom-tabs.component\";\r\nimport InstitutionSiteTab from \"./InstitutionSiteTab\";\r\nimport InstitutionFileTab from \"./InstitutionFileTab\";\r\nimport { DEFAULT_RETURN } from \"../../../actions/LoginTypes\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPencilAlt, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport SlideOutModal from \"../../../components/slide-out-modal/SlideOutModal\";\r\nimport Esign from \"../../audittrail/Esign\"; \r\nimport AddInstitution from \"./AddInstitution\";\r\nimport AddInstitutionSite from \"./AddInstitutionSite\";\r\nimport AddInstitutionFile from \"./AddInstitutionFile\";\r\nimport ConfirmMessage from '../../../components/confirm-alert/confirm-message.component';\r\nimport { toast } from 'react-toastify';\r\nimport { attachmentType,transactionStatus } from \"../../../components/Enumeration\";\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\nclass Institution extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.formRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n        this.searchRef = React.createRef();\r\n        this.fieldInstitutionList = [];\r\n        this.fieldInstitutionSiteList =[];\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state ={\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            selectedRecord: {}, \r\n        }\r\n       \r\n    }\r\n    render(){\r\n        let mandatoryFields = [];\r\n        if (this.props.Login.screenName === \"Institution\") {\r\n          mandatoryFields.push(\r\n            {\r\n              mandatory: true,\r\n              idsName: \"IDS_INSTITUTIONCATEGORY\",\r\n              dataField: \"ninstitutioncatcode\",\r\n              mandatoryLabel: \"IDS_SELECT\",\r\n              controlType: \"selectbox\",\r\n            },\r\n            {\r\n              mandatory: true,\r\n              idsName: \"IDS_INSTITUTION\",\r\n              dataField: \"sinstitutionname\",\r\n              mandatoryLabel: \"IDS_ENTER\",\r\n              controlType: \"textbox\",\r\n            },\r\n            {\r\n                mandatory: true,\r\n                idsName: \"IDS_INSTITUTIONCODE\",\r\n                dataField: \"sinstitutioncode\",\r\n                mandatoryLabel: \"IDS_ENTER\",\r\n                controlType: \"textbox\",\r\n              },\r\n            \r\n          );\r\n         \r\n          \r\n          \r\n        }else if(this.props.Login.screenName === \"Institution Site\"){\r\n            mandatoryFields.push(\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_INSTITUTIONSITE\",\r\n                    dataField: \"sinstitutionsitename\",\r\n                    mandatoryLabel: \"IDS_ENTER\",\r\n                    controlType: \"textbox\",\r\n                  },\r\n                  {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_REGIONNAME\",\r\n                    dataField: \"nregioncode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                  },\r\n                  {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_DISTRICT\",\r\n                    dataField: \"ndistrictcode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                  },\r\n                  {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_CITY\",\r\n                    dataField: \"ncitycode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                  },\r\n                  {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_COUNTRY\",\r\n                    dataField: \"ncountrycode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                  },\r\n                  {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_LIMSSITE\",\r\n                    dataField: \"nsitecode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                  }  \r\n            );\r\n     }\r\n            else  {\r\n                if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n                    mandatoryFields.push(\r\n                        { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                        { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n                    );\r\n                } else {\r\n                    // if (this.props.operation !== 'update') {\r\n                        mandatoryFields.push(\r\n                            { \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" }\r\n                        )\r\n                }\r\n            }\r\n        \r\n\r\n        this.fieldInstitutionList = [\"sinstitutionname\", \"sinstitutioncode\",\"sdescription\"];\r\n        this.fieldInstitutionSiteList = [\"sinstitutionsitename\",\"sinstitutionsiteaddress\",\"szipcode\",\"sstate\",\"stelephone\",\"sfaxno\",\"semail\",\"swebsite\"];\r\n\r\n        \r\n                \r\n        const addId = this.state.controlMap.has(\"AddInstitution\") && this.state.controlMap.get(\"AddInstitution\").ncontrolcode;\r\n        const editId =  this.state.controlMap.has(\"EditInstitution\") && this.state.controlMap.get(\"EditInstitution\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"DeleteInstitution\") && this.state.controlMap.get(\"DeleteInstitution\").ncontrolcode;\r\n\r\n        const filterParam = {\r\n            inputListName: \"Institution\", selectedObject: \"selectedInstitution\", primaryKeyField: \"ninstitutioncode\",\r\n            fetchUrl: \"institution/getSelectedInstitutionDetail\", fecthInputObject: { userinfo: this.props.Login.userInfo,Institution:this.props.Login.masterData.selectedInstitution },\r\n            masterData: this.props.Login.masterData,\r\n            searchFieldList: [\"sinstitutioncatname\", \"sinstitutionname\",\"sdescription\"]\r\n        };\r\n\r\n        const { selectedInstitution } = this.props.Login.masterData;\r\n        const breadCrumbData =this.state.filterData || [];\r\n        return(\r\n            <>\r\n                <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n                    {breadCrumbData.length > 0 ?\r\n                        <Affix top={53}>\r\n                            <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n                        </Affix> : \"\"\r\n                    }\r\n                    <Row noGutters={true}>\r\n                        <Col md={4}>\r\n                        <ListMaster\r\n                            formatMessage={this.props.intl.formatMessage}\r\n                            screenName={this.props.intl.formatMessage({ id: \"IDS_INSTITUTION\" })}\r\n                            masterData={this.props.Login.masterData}\r\n                            userInfo={this.props.Login.userInfo}\r\n                            masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.Institution}\r\n                            getMasterDetail={(Institution) => this.props.getInstitutionDetail(Institution, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                            selectedMaster={this.props.Login.masterData.selectedInstitution}\r\n                            primaryKeyField=\"ninstitutioncode\"\r\n                            mainField=\"sinstitutionname\"\r\n                            firstField=\"sinstitutioncatname\"\r\n                            isIDSField=\"Yes\"\r\n                            filterColumnData={this.props.filterColumnData}\r\n                            filterParam={filterParam}\r\n                            userRoleControlRights={this.state.userRoleControlRights}\r\n                            addId={addId}\r\n                            searchRef={this.searchRef}\r\n                            reloadData={this.reloadData}\r\n                            hidePaging={true}\r\n                            openModal={() =>\r\n                                this.props.getInstitutionCombo(\r\n                                \"Institution\",\r\n                                \"create\",\r\n                                \"ninstitutioncode\",\r\n                                this.props.Login.masterData,\r\n                                this.props.Login.userInfo,\r\n                                addId\r\n                                )\r\n                              }\r\n                            openFilter={this.openFilter}\r\n                            closeFilter={this.closeFilter}\r\n                            onFilterSubmit={this.onFilterSubmit}\r\n                            showFilterIcon={true}\r\n                            showFilter={this.props.Login.showFilter}\r\n                            filterComponent={[\r\n                                {\r\n                                    \"IDS_INSTITUTIONCATEGORYFILTER\":\r\n                                        <InstitutionCategoryFilter\r\n                                        FilterInstitutionCategory={this.state.FilterInstitutionCategory || []}\r\n                                        nfilterInstitutionCategory ={this.props.Login.masterData.defaultInstitutionCategory ||{}}\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        onFilterComboChange={this.onComboChangeFilter}\r\n                                        />\r\n                                }\r\n                            ]}\r\n                        />\r\n                        </Col>\r\n                        <Col md={8}>\r\n                            <Row>\r\n                                <Col md={12}>\r\n                                    <ContentPanel className=\"panel-main-content\">\r\n                                        <Card className=\"border-0\">\r\n                                            {this.props.Login.masterData.selectedInstitution ?(\r\n                                               <>\r\n                                               <Card.Header>\r\n                                                <ReactTooltip\r\n                                                    place=\"bottom\"\r\n                                                    globalEventOff=\"click\"\r\n                                                    id=\"tooltip_list_wrap\"\r\n                                                />\r\n                                                <Card.Title className=\"product-title-main\">\r\n                                                    {this.props.Login.masterData.selectedInstitution.sinstitutionname}\r\n                                                </Card.Title>\r\n                                                <Card.Subtitle>\r\n                                                    <div className=\"d-flex product-category\">\r\n                                                        <h2 className=\"product-title-sub flex-grow-1\"></h2>\r\n                                                        <div className=\"d-inline\">\r\n                                                        <Nav.Link\r\n                                                            name=\"editInstitution\"\r\n                                                            data-tip={this.props.intl.formatMessage({id: \"IDS_EDIT\", })}\r\n                                                            data-for=\"tooltip_list_wrap\" hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                            className=\"btn btn-circle outline-grey mr-2\"\r\n                                                            onClick={(e) => this.props.getInstitutionCombo(\"Institution\",\"update\",\"ninstitutioncode\",this.props.Login.masterData,this.props.Login.userInfo,editId)}\r\n                                    \r\n                                                        >\r\n                                                        <FontAwesomeIcon icon={faPencilAlt} />\r\n                                                        </Nav.Link>\r\n                                                        <Nav.Link\r\n                                                            name=\"deleteInstitution\"\r\n                                                            className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                                            data-tip={this.props.intl.formatMessage({id: \"IDS_DELETE\",})}\r\n                                                            data-for=\"tooltip_list_wrap\"  hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                            onClick={() =>this.ConfirmDelete(deleteId)}\r\n                                                        >\r\n                                                        <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                        </Nav.Link>\r\n                                                        </div>    \r\n                                                    </div>\r\n                                                </Card.Subtitle>\r\n                                               </Card.Header>\r\n                                               <Card.Body>\r\n                                                    <Row>\r\n                                                        {/* <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_INSTITUTION\" messasge=\"Institution\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sinstitutionname}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col> */}\r\n                                                        {/* <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_INSTITUTIONCATEGORY\" messasge=\"Institution Category\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sinstitutioncatname}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col> */}\r\n                                                         <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_INSTITUTIONCODE\" messasge=\"Institution\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sinstitutioncode}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col>\r\n                                                        <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_DESCRIPTION\" messasge=\"Description\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sdescription}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                    {selectedInstitution && (\r\n                                                        <CustomTab\r\n                                                            tabDetail={this.tabDetail()}\r\n                                                                onTabChange={this.onTabChange}\r\n                                                        />\r\n                                                    )}\r\n                                               </Card.Body>\r\n                                               </>     \r\n                                            ):(\r\n                                             \"\"\r\n                                            )}\r\n                                        </Card>    \r\n                                     </ContentPanel>   \r\n                                </Col>   \r\n                            </Row>\r\n                        </Col>  \r\n                    </Row>\r\n                </div>\r\n                {(this.props.Login.openModal || this.props.Login.openChildModal) && (\r\n                    <SlideOutModal\r\n                        show={(this.props.Login.openModal||this.props.Login.openChildModal)}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        mandatoryFields={mandatoryFields}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        addComponent={\r\n                             this.props.Login.loadEsign ? (\r\n                            <Esign\r\n                                operation={this.props.Login.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            ) : this.props.Login.screenName === \"Institution\" ? (\r\n                            <AddInstitution\r\n                                onNumericInputOnChange={this.onNumericInputOnChange}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onComboChange={this.onComboChange}\r\n                                InstitutionCategory={this.props.Login.InstitutionCategory}   \r\n                                operation={this.props.Login.operation}\r\n                                inputParam={this.props.inputParam}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                \r\n                            />\r\n                            ) : this.props.Login.screenName === \"Institution Site\" ? (\r\n                            <AddInstitutionSite\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                Site={this.props.Login.Site}\r\n                                Region={this.props.Login.Region}\r\n                                Country={this.props.Login.Country}\r\n                                onComboChange={this.onComboChange}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                operation={this.props.Login.operation}\r\n                                inputParam={this.props.inputParam}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                districtList={this.props.Login.districtList}\r\n                                cityList={this.props.Login.cityList}\r\n\r\n                            />\r\n                            )  : this.props.Login.screenName ===\"InstitutionFile\" ? (\r\n                            <AddInstitutionFile\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onDrop={this.onDropInstitutionFile}\r\n                                label={this.props.intl.formatMessage({ id: \"IDS_FILENAME\" })}\r\n                                deleteAttachment={this.deleteAttachment}\r\n                                linkMaster ={this.props.Login.linkMaster}\r\n                                maxSize={20}\r\n                                maxFiles={1}\r\n                            />\r\n                            )  : (\r\n                            \"\"\r\n                            )\r\n                        }   \r\n                    />\r\n                )}\r\n            </>\r\n        )\r\n        \r\n    }\r\n\r\n  tabDetail = () => {\r\n    const tabMap = new Map();\r\n    \r\n    const editSiteId = this.state.controlMap.has(\"EditInstitutionSite\") &&  this.state.controlMap.get(\"EditInstitutionSite\").ncontrolcode;\r\n    const deleteSiteId = this.state.controlMap.has(\"DeleteInstitutionSite\") && this.state.controlMap.get(\"DeleteInstitutionSite\").ncontrolcode;    \r\n    const deleteFileId = this.state.controlMap.has(\"DeleteInstitutionFile\") && this.state.controlMap.get(\"DeleteInstitutionFile\").ncontrolcode;    \r\n    const deleteParam ={operation:\"delete\",deleteSiteId};\r\n    const deleteTestParam ={operation:\"delete\",deleteFileId};\r\n    const editParam = {screenName:\"Institution Site\",operation:\"update\",primaryKeyField:\"ninstitutionsitecode\",\r\n                        userInfo:this.props.Login.userInfo,inputParam: this.props.Login.inputParam,ncontrolcode :editSiteId,\r\n                        instItem :this.props.Login.masterData.selectedInstitution,instItemSite:this.props.Login.masterData.selectedInstitutionSite}\r\n    \r\n    tabMap.set(\"IDS_INSTITUTIONSITE\",\r\n    <InstitutionSiteTab\r\n      selectedId = {this.props.Login.selectedId}\r\n      controlMap={this.state.controlMap}\r\n      userRoleControlRights={this.state.userRoleControlRights}\r\n      selectedInstitution={this.props.Login.masterData.selectedInstitution}\r\n      InstitutionSite= {this.props.Login.masterData.InstitutionSite}\r\n      masterData={this.props.Login.masterData}\r\n      userInfo={this.props.Login.userInfo}\r\n      getInstitutionSiteData={this.props.getInstitutionSiteData}\r\n      inputParam={this.props.Login.inputParam}\r\n      selectedRecord={this.state.selectedRecord}\r\n      dataState={this.props.Login.dataState}\r\n      deleteRecord ={this.DeleteInstitutionSite}\r\n      deleteParam={deleteParam}\r\n      fetchRecord={this.props.getInstitutionSiteData}\r\n      editParam={editParam}\r\n      InstitutionSiteData={this.props.Login.masterData.InstitutionSite || []}\r\n      screenName=\"Institution Site\"\r\n      settings={this.props.Login.settings}\r\n      errorCode={this.props.Login.errorCode}\r\n    />);\r\n\r\n   \r\n    \r\n\r\n\r\n    tabMap.set(\"IDS_INSTITUTIONFILE\",\r\n    <InstitutionFileTab\r\n      controlMap={this.state.controlMap}\r\n      userRoleControlRights={this.state.userRoleControlRights}\r\n      userInfo={this.props.Login.userInfo}\r\n      inputParam={this.props.Login.inputParam}\r\n      InstitutionFile={this.props.Login.masterData.InstitutionFile || []}\r\n      settings = {this.props.Login.settings}\r\n      addInstitutionFile={this.props.addInstitutionFile}\r\n      deleteRecord={this.DeleteInstitutionFile}\r\n      deleteParam ={deleteTestParam}\r\n      //editParam={editTestParam}\r\n      viewInstitutionFile={this.viewInstitutionFile}\r\n      screenName=\"InstitutionFile\"\r\n\r\n\r\n    />);\r\n\r\n    return tabMap;\r\n  }\r\n\r\n  openFilter = () => {\r\n    let showFilter = !this.props.Login.showFilter\r\n    const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: { showFilter }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n}\r\n\r\ncloseFilter = () => {\r\n\r\n    const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: { showFilter: false }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n}\r\n\r\n  onFilterSubmit = () => {\r\n    if (this.props.Login.masterData.defaultInstitutionCategory) {\r\n        let inputParam = {\r\n            inputData: {\r\n                ninstitutioncatcode: this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode,\r\n                userinfo: this.props.Login.userInfo,\r\n               \r\n            },\r\n            classUrl: \"institution\",\r\n            methodUrl: \"InstitutionByCategory\"\r\n        }\r\n        this.props.changeInstitutionCategoryFilter(inputParam,this.props.Login.masterData.FilterInstitutionCategory,this.props.Login.masterData.defaultInstitutionCategory);\r\n    } else {\r\n        toast.warn(this.props.intl.formatMessage({ id: \"IDS_INSTITUTIONCATEGORYNOTAVAILABLE\" }));\r\n    }\r\n  }\r\n\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n\r\n        const inputParam = {\r\n            inputData: {\"ninstitutioncatcode\": this.props.Login.masterData.SelectedInstitutionCategory.ninstitutioncatcode,\r\n                    \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl:\"InstitutionByCategory\",\r\n            displayName:this.props.intl.formatMessage({ id: \"IDS_INSTITUTION\" }),\r\n        };\r\n        this.props.changeInstitutionCategoryFilter(inputParam,this.props.Login.masterData.FilterInstitutionCategory,this.props.Login.masterData.SelectedInstitutionCategory);\r\n\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error!==\"\"&& props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n    \r\n\r\n  closeModal = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n    let openModal = this.props.Login.openModal;\r\n    let openChildModal = this.props.Login.openChildModal;\r\n    let selectedRecord = this.props.Login.selectedRecord;\r\n    let selectedId = this.props.Login.selectedId;\r\n    if (this.props.Login.loadEsign) {\r\n      if (this.props.Login.operation === \"delete\") {\r\n        loadEsign = false;\r\n        openModal = false;\r\n        openChildModal=false;\r\n        selectedRecord = [];\r\n      } else {\r\n        loadEsign = false;\r\n        selectedRecord['esignpassword'] = \"\";\r\n        selectedRecord['esigncomments'] = \"\";\r\n        selectedRecord['esignreason']=\"\";\r\n        selectedRecord=selectedRecord;\r\n      }\r\n    } else {\r\n      openModal = false;\r\n      openChildModal=false;\r\n      selectedRecord = [];\r\n      this.props.Login.cityList=[];\r\n      this.props.Login.districtList=[];\r\n      selectedId = null;\r\n     //this.setState({ selectedRecord });\r\n    }\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { openModal, loadEsign, selectedRecord, selectedId,openChildModal},\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  onTabChange = (tabProps) => {\r\n    const screenName = tabProps.screenName;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { screenName },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n    onNumericInputOnChange = (value, name) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    };\r\n\r\n    onInputOnChange = (event,optional) => {\r\n      const selectedRecord = this.state.selectedRecord || {};\r\n      if (event.target.type === \"checkbox\") {\r\n          selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n      }else if(event.target.type === \"radio\"){\r\n        selectedRecord[event.target.name] = optional;\r\n      }else {\r\n            if( event.target.name === \"sfaxno\"){\r\n                if(event.target.value !== \"\"){\r\n                    event.target.value = validatePhoneNumber(event.target.value);\r\n                    selectedRecord[event.target.name] = event.target.value !== \"\" ? event.target.value : selectedRecord[event.target.name];\r\n                }else {\r\n                    selectedRecord[event.target.name] = event.target.value;\r\n                }\r\n            }else{\r\n                selectedRecord[event.target.name] = event.target.value;\r\n            }\r\n          \r\n      }\r\n      this.setState({ selectedRecord });\r\n    };\r\n\r\n    onComboChangeFilter = (comboData,fieldName) => {\r\n        const selectedRecord =this.state.selectedRecord || [];\r\n        if(comboData){\r\n            if(fieldName===\"ninstitutioncatcode\"){\r\n               if(comboData.value !== this.props.Login.masterData.defaultInstitutionCategory. ninstitutioncatcode) {\r\n                    let masterData = { ...this.props.Login.masterData, defaultInstitutionCategory: comboData.item}\r\n                    const updateInfo = { \r\n                        typeName: DEFAULT_RETURN,\r\n                        data: { masterData }\r\n                    }\r\n                    this.props.updateStore(updateInfo);\r\n                }  \r\n            }           \r\n        }     \r\n    }\r\n\r\n    onComboChange=(comboData,fieldName)=> {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (comboData != null) {\r\n            if(fieldName===\"ninstitutioncatcode\"){\r\n                selectedRecord[fieldName] = comboData;\r\n                this.setState({ selectedRecord });\r\n            }else if(fieldName=== \"nsitecode\"){\r\n                selectedRecord[\"nsitecode\"] = comboData;\r\n                selectedRecord[\"ssitecode\"]= comboData.item[\"ssitecode\"];\r\n                this.setState({ selectedRecord });  \r\n            }else if(fieldName=== \"nregioncode\"){\r\n                selectedRecord[\"nregioncode\"] = comboData;\r\n                selectedRecord[\"sregioncode\"]= comboData.item[\"sregioncode\"];\r\n                    this.props.getDistComboServices({\r\n                        inputData: {\r\n                            userinfo: this.props.Login.userInfo,\r\n                            sdisplayname: selectedRecord.nregioncode.label,\r\n                            primarykey: selectedRecord.nregioncode.value,\r\n                       }\r\n                    });   \r\n                selectedRecord[\"ndistrictcode\"]=\"\"; \r\n                selectedRecord[\"sdistrictcode\"]=\"\"; \r\n                selectedRecord[\"ncitycode\"]=\"\"; \r\n                selectedRecord[\"scitycode\"]=\"\"; \r\n                this.setState({ selectedRecord });  \r\n            }else if(fieldName=== \"ncountrycode\"){\r\n                selectedRecord[\"ncountrycode\"] = comboData;\r\n                this.setState({ selectedRecord });  \r\n            }else if(fieldName=== \"ndistrictcode\"){\r\n                selectedRecord[\"ndistrictcode\"] = comboData;\r\n                selectedRecord[\"sdistrictcode\"]= comboData.item[\"sdistrictcode\"];\r\n                    this.props.getCitComboServices({\r\n                        inputData: {\r\n                            userinfo: this.props.Login.userInfo,\r\n                            sdisplayname: selectedRecord.ndistrictcode.label,\r\n                            primarykey: selectedRecord.ndistrictcode.value,\r\n                       }\r\n                    });   \r\n                selectedRecord[\"ncitycode\"]=\"\"; \r\n                selectedRecord[\"scitycode\"]=\"\"; \r\n                this.setState({ selectedRecord });  \r\n            }else if(fieldName=== \"ncitycode\"){\r\n                selectedRecord[\"ncitycode\"] = comboData;\r\n                selectedRecord[\"scitycode\"]= comboData.item[\"scitycode\"];\r\n                this.setState({ selectedRecord });  \r\n            }      \r\n        }\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        let postParam = undefined;\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        let dataState = undefined;\r\n\r\n        if(this.props.Login.screenName === \"Institution\"){\r\n            if (this.props.Login.operation === \"update\") {  // edit\r\n                const selectedRecord=this.state.selectedRecord;\r\n                    postParam = {\r\n                      inputListName: \"Institution\",\r\n                      selectedObject: \"selectedInstitution\",\r\n                      primaryKeyField: \"ninstitutioncode\",\r\n                    };\r\n                  inputData[\"institution\"] = {};\r\n    \r\n                  this.fieldInstitutionList.map(item => {\r\n                      return inputData[\"institution\"][item] = selectedRecord[item] !== null ? selectedRecord[item] : \"\";\r\n                 })\r\n                 inputData[\"institution\"][\"ninstitutioncode\"] =selectedRecord[\"ninstitutioncode\"] ? selectedRecord[\"ninstitutioncode\"] : -1;\r\n                 inputData[\"institution\"][\"ninstitutioncatcode\"] = this.state.selectedRecord ? this.state.selectedRecord.ninstitutioncatcode.value : -1;\r\n                 dataState = this.state.dataState;\r\n            }else {\r\n                  //add               \r\n                  inputData[\"institution\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n    \r\n    \r\n                  this.fieldInstitutionList.map(item => {\r\n                      return inputData[\"institution\"][item] = this.state.selectedRecord[item]!==undefined ? this.state.selectedRecord[item]:\"\";\r\n                  })\r\n                  inputData[\"institution\"][\"ninstitutioncatcode\"] = this.state.selectedRecord ? this.state.selectedRecord.ninstitutioncatcode.value : -1;\r\n                }\r\n       \r\n            const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"Institution\",\r\n            displayName: this.props.Login.screenName,\r\n            inputData: inputData,\r\n            selectedId: this.state.selectedRecord[\"ninstututioncode\"],\r\n            operation: this.props.Login.operation, saveType, formRef, dataState,\r\n            searchRef: this.searchRef,\r\n            postParam:postParam,\r\n            filtercombochange:this.props.Login.masterData.searchedData!==undefined?\r\n            this.state.selectedRecord.ninstitutioncatcode.value===\r\n           this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode?false:true:false\r\n            }\r\n\r\n            let masterData={...this.props.Login.masterData\r\n               };\r\n\r\n                if(this.state.selectedRecord.ninstitutioncatcode.value!==\r\n                    this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode){\r\n                         masterData={...this.props.Login.masterData,\r\n                            defaultInstitutionCategory: this.state.selectedRecord.ninstitutioncatcode.item,\r\n                            SelectedInstitutionCategory:this.state.selectedRecord.ninstitutioncatcode.item };\r\n                }\r\n\r\n          //  this.setState({ FilterInstitutionCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                          loadEsign: true, screenData: { inputParam, masterData },\r\n                          openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.screenName }),\r\n                          operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }else {\r\n                    this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n            }\r\n        }else if(this.props.Login.screenName === \"Institution Site\"){\r\n\r\n            const isValidateEmail = this.state.selectedRecord[\"semail\"]? validateEmail(this.state.selectedRecord[\"semail\"]): true;\r\n            if(isValidateEmail){\r\n                \r\n            if (this.props.Login.operation === \"update\") {  // edit\r\n                const selectedRecord=this.state.selectedRecord;\r\n                    postParam = {\r\n                      inputListName: \"InstitutionSite\",\r\n                      selectedObject: \"selectedInstitutionSite\",\r\n                      primaryKeyField: \"ninstitutionsitecode\",\r\n                    };\r\n                  inputData[\"institutionsite\"] = {};\r\n\r\n                  inputData[\"institutionsite\"][\"ninstitutionsitecode\"] =selectedRecord[\"ninstitutionsitecode\"] ? selectedRecord[\"ninstitutionsitecode\"] : -1;\r\n                  inputData[\"institutionsite\"][\"ninstitutioncode\"] = this.props.Login.instItem[\"ninstitutioncode\"];;\r\n                  inputData[\"institutionsite\"][\"nregionalsitecode\"] = this.state.selectedRecord[\"nsitecode\"] ? this.state.selectedRecord[\"nsitecode\"].value : -1;\r\n                  inputData[\"institutionsite\"][\"nregioncode\"] = this.state.selectedRecord[\"nregioncode\"] ? this.state.selectedRecord[\"nregioncode\"].value : -1;\r\n                  inputData[\"institutionsite\"][\"ncountrycode\"] = this.state.selectedRecord[\"ncountrycode\"] ? this.state.selectedRecord[\"ncountrycode\"].value : -1;\r\n                  inputData[\"institutionsite\"][\"ncitycode\"] = this.state.selectedRecord[\"ncitycode\"] ? this.state.selectedRecord[\"ncitycode\"].value : -1;\r\n                  inputData[\"institutionsite\"][\"ndistrictcode\"] = this.state.selectedRecord[\"ndistrictcode\"] ? this.state.selectedRecord[\"ndistrictcode\"].value : -1;\r\n    \r\n                  this.fieldInstitutionSiteList.map(item => {\r\n                      return inputData[\"institutionsite\"][item] = selectedRecord[item] !== null ? selectedRecord[item] : \"\";\r\n                 })\r\n                \r\n\r\n                 dataState = this.state.dataState;\r\n            }else {\r\n                postParam=undefined;\r\n                //add               \r\n                //inputData[\"institutionsite\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };  \r\n                inputData[\"institutionsite\"] = {}; \r\n                inputData[\"institutionsite\"][\"ninstitutioncode\"] = this.props.Login.instItem[\"ninstitutioncode\"];;\r\n                inputData[\"institutionsite\"][\"nregionalsitecode\"] = this.state.selectedRecord[\"nsitecode\"] ? this.state.selectedRecord[\"nsitecode\"].value : -1;\r\n                inputData[\"institutionsite\"][\"nregioncode\"] = this.state.selectedRecord[\"nregioncode\"] ? this.state.selectedRecord[\"nregioncode\"].value : -1;\r\n                inputData[\"institutionsite\"][\"ncountrycode\"] = this.state.selectedRecord[\"ncountrycode\"] ? this.state.selectedRecord[\"ncountrycode\"].value : -1;\r\n                inputData[\"institutionsite\"][\"ncitycode\"] = this.state.selectedRecord[\"ncitycode\"] ? this.state.selectedRecord[\"ncitycode\"].value : -1;\r\n                inputData[\"institutionsite\"][\"ndistrictcode\"] = this.state.selectedRecord[\"ndistrictcode\"] ? this.state.selectedRecord[\"ndistrictcode\"].value : -1;\r\n  \r\n\r\n                this.fieldInstitutionSiteList.map(item => {\r\n                    return inputData[\"institutionsite\"][item] = this.state.selectedRecord[item]!==undefined ? this.state.selectedRecord[item]:\"\";\r\n                })\r\n            }\r\n            const inputParam = {\r\n                classUrl: this.props.Login.inputParam.classUrl,\r\n                methodUrl: \"InstitutionSite\",\r\n                displayName: this.props.Login.screenName,\r\n                inputData: inputData,\r\n                selectedId: this.state.selectedRecord[\"ninstitutionsitecode\"],\r\n                operation: this.props.Login.operation, saveType, formRef, dataState,\r\n                searchRef: this.searchRef,\r\n                postParam:postParam\r\n            }\r\n            //this.setState({ FilterClientCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                          loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                          openChildModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.screenName }),\r\n                          operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }else {\r\n                this.props.crudMaster(inputParam, this.props.Login.masterData, \"openChildModal\");\r\n            }\r\n            }else{\r\n                toast.info(this.props.intl.formatMessage({ id: \"IDS_ENTERVALIDEMAIL\" }))\r\n            }\r\n\r\n        }else if(this.props.Login.screenName === \"InstitutionFile\"){\r\n                const selectedRecord =this.state.selectedRecord;\r\n                const acceptedFiles = selectedRecord.sfilename;\r\n                const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n                let isFileEdited = transactionStatus.NO;\r\n                let institutionFileArray = [];\r\n                let institutionFile = {\r\n                    ninstitutioncode: this.props.Login.masterData.selectedInstitution.ninstitutioncode,\r\n                    ninstitutionfilecode: selectedRecord.ninstitutionfilecode ? selectedRecord.ninstitutionfilecode : 0,\r\n                    nstatus: transactionStatus.ACTIVE,\r\n                    nattachmenttypecode,\r\n                };\r\n                const formData = new FormData();\r\n                if (nattachmenttypecode === attachmentType.FTP) {\r\n                    if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                        acceptedFiles.forEach((file, index) => {\r\n                            const tempData = Object.assign({}, institutionFile);\r\n                            const splittedFileName = file.name.split('.');\r\n                            const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                            const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                            const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                            const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.ntestfilecode && selectedRecord.ntestfilecode > 0\r\n                                && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                            tempData[\"sfilename\"] = file.name;\r\n                            tempData[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n                            tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                            tempData[\"ssystemfilename\"] = uniquefilename;\r\n                            tempData[\"nfilesize\"] = file.size;\r\n                            formData.append(\"uploadedFile\" + index, file);\r\n                            formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                            institutionFileArray.push(tempData);\r\n                        });  \r\n                        \r\n                        formData.append(\"filecount\", acceptedFiles.length);\r\n                        isFileEdited = transactionStatus.YES;\r\n                    }else{\r\n                        institutionFile[\"sfilename\"] = selectedRecord.sfilename;\r\n                        institutionFile[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n                        institutionFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                        institutionFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                        institutionFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                        institutionFileArray.push(institutionFile);\r\n                    }   \r\n                }else{\r\n                    institutionFile[\"sfilename\"] = selectedRecord.slinkfilename.trim();\r\n                    institutionFile[\"sfiledesc\"] = selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\";\r\n                    institutionFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n                    institutionFile[\"ssystemfilename\"] = \"\";\r\n                    institutionFile[\"nfilesize\"] = 0;\r\n                    institutionFileArray.push(institutionFile);\r\n                }\r\n                formData.append(\"isFileEdited\", isFileEdited);\r\n                formData.append(\"institutionfile\", JSON.stringify(institutionFileArray));\r\n                let selectedId = null;\r\n                let postParam = undefined;\r\n                if ( this.props.Login.operation === \"update\"){\r\n                    postParam =  { inputListName : \"Institution\", selectedObject : \"selectedInstitution\", primaryKeyField : \"ninstitutioncode\" };\r\n                    selectedId = selectedRecord[\"ninstitutionfilecode\"];               \r\n                }\r\n                const inputParam = {\r\n                    inputData: { userinfo: this.props.Login.userInfo},\r\n                    formData: formData,\r\n                    isFileupload: true,\r\n                    operation: this.props.Login.operation,\r\n                    classUrl: \"institution\",\r\n                    saveType, formRef, methodUrl: \"InstitutionFile\",postParam\r\n                }\r\n                \r\n                if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                    const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                        openChildModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.screenName }),\r\n                        operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                    this.props.updateStore(updateInfo);\r\n                }else {\r\n                    this.props.crudMaster(inputParam, this.props.Login.masterData, \"openChildModal\");\r\n                }\r\n\r\n        }\r\n\r\n        \r\n        \r\n    }\r\n    \r\n    ConfirmDelete = (deleteId) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.DeleteInstitution(\"delete\",deleteId));\r\n    }\r\n\r\n    DeleteInstitutionFile = (deleteTestParam) => {\r\n        let inputData = [];\r\n        let ncontrolcode =deleteTestParam.ncontrolCode;\r\n        let operation =deleteTestParam.operation;\r\n        inputData[\"institutionfile\"] = deleteTestParam.selectedRecord;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institutionfile\", selectedObject: \"selectedInstitutionFile\",\r\n            primaryKeyField: \"ninstitutionfilecode\",\r\n            primaryKeyValue: deleteTestParam.selectedRecord.ninstitutionfilecode,\r\n            fetchUrl: \"institution/getInstitutionFile\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"InstitutionFile\", \r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolcode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openChildModal: true, screenName: \"Institution File\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n        }\r\n    }\r\n\r\n    \r\n    DeleteInstitutionSite = (deleteParam) => {\r\n        let inputData = [];\r\n        let ncontrolcode =deleteParam.ncontrolCode;\r\n        let operation =deleteParam.operation;\r\n        delete (deleteParam.selectedRecord.expanded);\r\n        inputData[\"institutionsite\"] = deleteParam.selectedRecord;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institutionsite\", selectedObject: \"selectedInstitutionSite\",\r\n            primaryKeyField: \"ninstitutionsitecode\",\r\n            primaryKeyValue: deleteParam.selectedRecord.ninstitutionsitecode,\r\n            fetchUrl: \"institution/getInstitutionSite\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"InstitutionSite\", \r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolcode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openChildModal: true, screenName: \"Institution Site\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n        }\r\n    }\r\n\r\n    DeleteInstitution= (operation, ncontrolCode) => {\r\n        let inputData = [];\r\n\r\n        inputData[\"institution\"] = this.props.Login.masterData.selectedInstitution;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institution\", selectedObject: \"selectedInstitution\",\r\n            primaryKeyField: \"ninstitutioncode\",\r\n            primaryKeyValue: this.props.Login.masterData.selectedInstitution.ninstitutioncode,\r\n            fetchUrl: \"institution/getSelectedInstitutionDetail\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"Institution\", \r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openModal: true, screenName: \"Institution\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    viewInstitutionFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                institutionfile: filedata,\r\n                userinfo: this.props.Login.userInfo\r\n            },\r\n            classUrl: \"institution\",\r\n            operation: \"view\",\r\n            methodUrl: \"InstitutionFile\",\r\n            screenName: \"IDS_INSTITUTION\"\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n    onDropInstitutionFile = (attachedFiles, fieldName, maxSize) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(\r\n          selectedRecord[fieldName],\r\n          attachedFiles,\r\n          maxSize\r\n        );\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    };\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(\r\n          selectedRecord[fieldName],\r\n          file\r\n        );\r\n    \r\n        this.setState({\r\n          selectedRecord,\r\n          actionType: \"delete\",\r\n        });\r\n    };\r\n\r\n    validateEsign = () => {\r\n        let modalName;\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        if(this.props.Login.screenName === \"Institution\"){\r\n            modalName=\"openModal\";\r\n          }\r\n          else{\r\n            modalName=\"openChildModal\";\r\n          }\r\n          this.props.validateEsignCredential(inputParam, modalName);\r\n    }\r\n\r\n    generateBreadCrumData() {\r\n        const breadCrumbData = [];\r\n        if (this.props.Login.masterData && this.props.Login.masterData.FilterInstitutionCategory) {\r\n\r\n            breadCrumbData.push(\r\n                {\r\n                    \"label\": \"IDS_INSTITUTIONCATEGORY\",\r\n                    \"value\": this.props.Login.masterData.defaultInstitutionCategory ? this.props.Login.masterData.defaultInstitutionCategory.sinstitutioncatname : \"-\"\r\n                }\r\n            );\r\n        }\r\n        return breadCrumbData;\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            selectedRecord =  this.props.Login.selectedRecord \r\n            this.setState({ selectedRecord});\r\n        }\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({  userRoleControlRights, controlMap, data: this.props.Login.masterData});\r\n            }\r\n            else {\r\n\r\n                let { dataState } = this.state;\r\n                if (this.props.Login.dataState === undefined) {\r\n                    dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 }\r\n                }\r\n\r\n                this.setState({ data: this.props.Login.masterData, dataState,selectedRecord :this.props.Login.selectedRecord  });\r\n            }\r\n\r\n            \r\n\r\n       ///     let FilterInstitutionCategory = this.state.FilterInstitutionCategory || {};\r\n\r\n         //   if (this.props.Login.masterData.FilterInstitutionCategory !== previousProps.Login.masterData.FilterInstitutionCategory) {\r\n                const InstitutionCategoryMap = constructOptionList(this.props.Login.masterData.FilterInstitutionCategory || [], \"ninstitutioncatcode\", \"sinstitutioncatname\", 'ninstitutioncatcode', 'descending', false);\r\n                const    FilterInstitutionCategory = InstitutionCategoryMap.get(\"OptionList\");               \r\n          //  } \r\n         \r\n            const filterData = this.generateBreadCrumData();\r\n         \r\n            this.setState({ FilterInstitutionCategory,filterData});\r\n\r\n            //Vishakh: I commented updateStore. Because this updateStore won't get any change in the flow.\r\n            //  Even the udpateStore is there or not, there is no change in the flow.\r\n            // if(this.props.Login.comboSet){\r\n            //     const updateInfo = {\r\n            //         typeName: DEFAULT_RETURN,\r\n            //         data: { comboSet: false }\r\n            //     }\r\n            //     this.props.updateStore(updateInfo);\r\n            // }\r\n        }\r\n       \r\n        \r\n        \r\n        // if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n          \r\n        //     this.setState({ filterData });\r\n        // }\r\n    }\r\n    \r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService,crudMaster,validateEsignCredential,updateStore,getInstitutionDetail,getInstitutionCombo,getInstitutionSiteData,addInstitutionFile,changeInstitutionCategoryFilter,viewAttachment,filterColumnData,getCitComboServices,getDistComboServices\r\n})(injectIntl(Institution));\r\n"]},"metadata":{},"sourceType":"module"}