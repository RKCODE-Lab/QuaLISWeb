{"ast":null,"code":"import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{FormattedMessage,injectIntl}from'react-intl';import{Button,Card,Modal}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faSave}from'@fortawesome/free-regular-svg-icons';import{toast}from'react-toastify';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{ModalInner}from'../../components/App.styles';import{transactionStatus}from'../Enumeration';import{faCalculator,faToolbox,faTools}from'@fortawesome/free-solid-svg-icons';var SlideOutModal=/*#__PURE__*/function(_React$Component){_inherits(SlideOutModal,_React$Component);var _super=_createSuper(SlideOutModal);function SlideOutModal(props){var _this;_classCallCheck(this,SlideOutModal);_this=_super.call(this,props);_this.state={masterStatus:\"\",failedControls:[],selectedRecord:{}};_this.handleSaveClick=function(saveType){var failedControls=[];var startLabel=[];var label=\"IDS_ENTER\";//  const selectedRecord=this.props.operation==='barcode'?this.state.selectedRecord:this.props.selectRecord\nvar selectedRecord=_this.props.selectedRecord;var mandatoryFields=_this.props.mandatoryFields||[];if(_this.props.esign){mandatoryFields=[{\"idsName\":\"IDS_PASSWORD\",\"dataField\":\"esignpassword\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_REASON\",\"dataField\":\"esignreason\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_COMMENTS\",\"dataField\":\"esigncomments\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}// { \"idsName\": \"IDS_CHECKAGREE\",\"dataField\": \"agree\",  \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"checkbox\" },\n];}else if(_this.props.operation==='barcode'){mandatoryFields=[{\"idsName\":\"IDS_BARCODE\",\"dataField\":\"nbarcode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_PRINTER\",\"dataField\":\"sprintername\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}mandatoryFields.forEach(function(item){if(selectedRecord[item.dataField]===undefined||selectedRecord[item.dataField]===null){var alertMessage=(item.alertPreFix?_this.props.intl.formatMessage({id:item.alertPreFix})+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+_this.props.intl.formatMessage({id:item.alertSuffix}):'');failedControls.push(alertMessage);startLabel.push(item.mandatoryLabel);//\"IDS_PROVIDE\";\n}else{if(item.validateFunction){var validateData=item.validateFunction;if(selectedRecord[item.dataField].trim().length===0){var _alertMessage=_this.props.intl.formatMessage({id:item.idsName});//const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\nfailedControls.push(_alertMessage);startLabel.push(item.mandatoryLabel);}else if(validateData(selectedRecord[item.dataField])===false){var _alertMessage2=(item.alertPreFix?_this.props.intl.formatMessage({id:item.alertPreFix})+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+_this.props.intl.formatMessage({id:item.alertSuffix}):'');failedControls.push(_alertMessage2);startLabel.push(item.mandatoryLabel);}}else{if(typeof selectedRecord[item.dataField]===\"object\"){//to validate object empty value \nif(item.ismultilingual==\"true\"){var dataArray=0;Object.values(selectedRecord[item.dataField]).map(function(lang){if(lang.length===0){dataArray++;}});if(dataArray>0){var _alertMessage3=(item.alertPreFix?_this.props.intl.formatMessage({id:item.alertPreFix})+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+_this.props.intl.formatMessage({id:item.alertSuffix}):'');failedControls.push(_alertMessage3);startLabel.push(item.mandatoryLabel);//\"I\n}}else{//to validate FormSelectSearch, date component\nif(selectedRecord[item.dataField]&&selectedRecord[item.dataField].length===0){var _alertMessage4=(item.alertPreFix?_this.props.intl.formatMessage({id:item.alertPreFix})+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+_this.props.intl.formatMessage({id:item.alertSuffix}):'');failedControls.push(_alertMessage4);startLabel.push(item.mandatoryLabel);//\"IDS_SELECT\";\n}}}else if(typeof selectedRecord[item.dataField]===\"string\"){//to handle string field -- added trim function\nif(selectedRecord[item.dataField].trim().length===0){var _alertMessage5=(item.alertPreFix?_this.props.intl.formatMessage({id:item.alertPreFix})+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+_this.props.intl.formatMessage({id:item.alertSuffix}):'');failedControls.push(_alertMessage5);startLabel.push(item.mandatoryLabel);}}else{//number field\nif(selectedRecord[item.dataField].length===0//|| selectedRecord[item.dataField] === 0\n){var _alertMessage6=(item.alertPreFix?_this.props.intl.formatMessage({id:item.alertPreFix})+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+_this.props.intl.formatMessage({id:item.alertSuffix}):'');failedControls.push(_alertMessage6);startLabel.push(item.mandatoryLabel);}}}}// else{\n//     const alertMessage=(item.alertPreFix?item.alertPreFix:'')+this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?item.alertSuffix:'')\n//     failedControls.push(alertMessage);\n// }\n});// console.log(\"validationPassed:\", failedControls);\nif(failedControls.length===0){if(saveType===4){_this.props.onExecuteClick();}else if(saveType===3){if(selectedRecord.agree&&selectedRecord.agree===transactionStatus.NO){toast.info(_this.props.intl.formatMessage({id:\"IDS_CHECKAGREE\"}));}else{_this.props.validateEsign();}}else{_this.props.onSaveClick(saveType);}}else{//toast.info(`${this.props.intl.formatMessage({id:\"IDS_ENTER\"})} ${failedControls.join(\",\")}`);\nlabel=startLabel[0]===undefined?label:startLabel[0];toast.info(\"\".concat(_this.props.intl.formatMessage({id:label}),\" \").concat(failedControls[0]));}};_this.myRef=React.createRef();return _this;}//  formRef = React.createRef();\n_createClass(SlideOutModal,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this2=this;var masterStatus=this.props.masterStatus;if(masterStatus!==\"\"&&masterStatus!==undefined){toast.warn(masterStatus);var updateInfo={typeName:DEFAULT_RETURN,data:{masterStatus:\"\"}};this.props.updateStore(updateInfo);masterStatus=\"\";}if(this.props.innerPopup!==this.state.innerTop){setTimeout(function(){var scrollDoc=_this2.props.modalEvent&&_this2.props.modalEvent.id?document.getElementById(_this2.props.modalEvent.id):null;if(_this2.myRef&&_this2.myRef.current){_this2.myRef.current.scrollIntoView({behavior:'smooth'});}if(scrollDoc){scrollDoc.scrollIntoView({behavior:'smooth'});}},100);this.setState({innerTop:this.props.innerPopup});}return null;}},{key:\"render\",value:function render(){var _this3=this;var saveType=1;if(this.props.ignoreFormValidation){saveType=5;}var buttonLabel=\"Save\";var idsLabel=\"IDS_SAVE\";if(this.props.buttonLabel){buttonLabel=this.props.buttonLabel;idsLabel='IDS_'.concat(buttonLabel.toUpperCase());}return/*#__PURE__*/React.createElement(Modal,{size:this.props.size||\"lg\",backdrop:\"static\",className:this.props.className||\"\",show:this.props.show,onHide:this.props.closeModal,enforceFocus:false,dialogClassName:\"modal-dialog-slideout freakerstop\",\"aria-labelledby\":\"add-user\"},/*#__PURE__*/React.createElement(Modal.Header,{className:\"d-flex align-items-center\"},/*#__PURE__*/React.createElement(Modal.Title,{id:\"add-user\",className:\"header-primary flex-grow-1\"},this.props.graphView===true?\"\":this.props.inputParam?this.props.esign===true?/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_ESIGN\",defaultMessage:this.props.intl.formatMessage({id:\"IDS_ESIGN\"})}):this.props.loginoperation?/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.screenName}):/*#__PURE__*/React.createElement(React.Fragment,null,this.props.operation?/*#__PURE__*/React.createElement(React.Fragment,null,this.props.inputParam.methodUrl==='LimsElnUsermapping'?\"\":/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.operation&&\"IDS_\".concat(this.props.operation.toUpperCase()),defaultMessage:this.props.intl.formatMessage({id:\"IDS_ADD\"})}),\" \",this.props.screenName?/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.screenName}):\"\"):this.props.screenName?/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.screenName}):\"\"):\"\"),this.props.needClose?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-cancel\",variant:\"\",onClick:this.props.closeModal},/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.closeLabel||\"IDS_CLOSE\",defaultMessage:this.props.closeLabel||'Close'})):/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-cancel\",variant:\"\",onClick:this.props.closeModal},/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.closeLabel||\"IDS_CANCEL\",defaultMessage:this.props.closeLabel||'Cancel'})),this.props.esign===true?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(3);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SUBMIT\",defaultMessage:\"Submit\"})):(this.props.operation===\"create\"||this.props.operation===\"update\"||this.props.operation===\"preview\")&&this.props.showValidate&&this.props.showQueryTool?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.props.queryGenrate();}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faToolbox}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_QUERYTOOL\",defaultMessage:\"Query Tool\"})),/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(4);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_VALIDATE\",defaultMessage:\"Validate\"}))):this.props.showValidate?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(4);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_VALIDATE\",defaultMessage:\"Validate\"})):this.props.showCalculate?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(saveType);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_CALCULATE\",defaultMessage:\"Calculate\"})):this.props.showParam===true&&this.props.showExecute?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(4);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faCalculator}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_EXECUTE\",defaultMessage:\"Execute\"})):this.props.noSave||this.props.graphView?this.props.operation===\"view\"?\"\":/*#__PURE__*/React.createElement(Button,{className:\"btn btn-user btn-primary-blue\",role:\"button\",onClick:this.props.resetView},/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_RESET\",defaultMessage:\"Reset\"})):this.props.hideSave?\"\":/*#__PURE__*/React.createElement(Button,{className:\" btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(saveType);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:idsLabel,defaultMessage:buttonLabel})),this.props.operation===\"create\"&&this.props.showSaveContinue?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(2);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SAVECONTINUE\",defaultMessage:\"Save & Continue\"})):\"\",(this.props.operation===\"create\"||this.props.operation===\"update\")&&this.props.esign!==true&&this.props.showExecute===true&&this.props.showSave?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(1);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SAVE\",defaultMessage:\"Save\"})):\"\",this.props.showSubmit===true?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(1);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SUBMIT\",defaultMessage:\"Submit\"})):\"\",this.props.showSaveAs===true?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(7);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SAVEFILTER\",defaultMessage:\"Save Filter\"})):\"\"),/*#__PURE__*/React.createElement(Modal.Body,{className:\"popup-fixed-center-headed-full-width\"},/*#__PURE__*/React.createElement(ModalInner,{ref:this.myRef},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(React.Fragment,null,this.props.addComponent)))));}// showComponent =()=>{\n//     {this.props.addComponent}\n// }\n}]);return SlideOutModal;}(React.Component);// const mapStateToProps = (state) => {\n//     return {\n//         Login: state.Login\n//     }\n// }\nexport default injectIntl(SlideOutModal);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/components/slide-out-modal/SlideOutModal.jsx"],"names":["React","FormattedMessage","injectIntl","Button","Card","Modal","FontAwesomeIcon","faSave","toast","DEFAULT_RETURN","ModalInner","transactionStatus","faCalculator","faToolbox","faTools","SlideOutModal","props","state","masterStatus","failedControls","selectedRecord","handleSaveClick","saveType","startLabel","label","mandatoryFields","esign","operation","forEach","item","dataField","undefined","alertMessage","alertPreFix","intl","formatMessage","id","idsName","alertSuffix","push","mandatoryLabel","validateFunction","validateData","trim","length","ismultilingual","dataArray","Object","values","map","lang","onExecuteClick","agree","NO","info","validateEsign","onSaveClick","myRef","createRef","warn","updateInfo","typeName","data","updateStore","innerPopup","innerTop","setTimeout","scrollDoc","modalEvent","document","getElementById","current","scrollIntoView","behavior","setState","ignoreFormValidation","buttonLabel","idsLabel","concat","toUpperCase","size","className","show","closeModal","graphView","inputParam","loginoperation","screenName","methodUrl","needClose","closeLabel","showValidate","showQueryTool","queryGenrate","showCalculate","showParam","showExecute","noSave","resetView","hideSave","showSaveContinue","showSave","showSubmit","showSaveAs","addComponent","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Button, Card, Modal } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faSave } from '@fortawesome/free-regular-svg-icons';\r\nimport { toast } from 'react-toastify';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { ModalInner } from '../../components/App.styles';\r\nimport { transactionStatus } from '../Enumeration';\r\nimport { faCalculator, faToolbox, faTools } from '@fortawesome/free-solid-svg-icons';\r\n\r\n\r\nclass SlideOutModal extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.myRef = React.createRef()\r\n    }\r\n    //  formRef = React.createRef();\r\n    state = { masterStatus: \"\", failedControls: [], selectedRecord: {} }\r\n\r\n\r\n    handleSaveClick = (saveType) => {\r\n        const failedControls = [];\r\n        const startLabel = [];\r\n        let label = \"IDS_ENTER\";\r\n      //  const selectedRecord=this.props.operation==='barcode'?this.state.selectedRecord:this.props.selectRecord\r\n        const selectedRecord=this.props.selectedRecord\r\n        let mandatoryFields = this.props.mandatoryFields || [];\r\n        if (this.props.esign) {\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_PASSWORD\", \"dataField\": \"esignpassword\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_REASON\", \"dataField\": \"esignreason\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"esigncomments\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                // { \"idsName\": \"IDS_CHECKAGREE\",\"dataField\": \"agree\",  \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"checkbox\" },\r\n\r\n            ]\r\n        }else if(this.props.operation==='barcode'){\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_BARCODE\", \"dataField\": \"nbarcode\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"idsName\": \"IDS_PRINTER\", \"dataField\": \"sprintername\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n\r\n            ]\r\n        }\r\n        mandatoryFields.forEach(item => {\r\n            if (selectedRecord[item.dataField] === undefined || selectedRecord[item.dataField] === null) {\r\n                const alertMessage = (item.alertPreFix ? this.props.intl.formatMessage({id:item.alertPreFix}) + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + this.props.intl.formatMessage({id:item.alertSuffix}) : '')\r\n                failedControls.push(alertMessage);\r\n                startLabel.push(item.mandatoryLabel)//\"IDS_PROVIDE\";\r\n            }\r\n            else {\r\n                if (item.validateFunction) {\r\n                    const validateData = item.validateFunction;\r\n                    if (selectedRecord[item.dataField].trim().length === 0) {\r\n                        const alertMessage = this.props.intl.formatMessage({ id: item.idsName });\r\n                        //const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\r\n                        failedControls.push(alertMessage);\r\n                        startLabel.push(item.mandatoryLabel)\r\n                    }\r\n                    else if (validateData(selectedRecord[item.dataField]) === false) {\r\n                        const alertMessage = (item.alertPreFix ? this.props.intl.formatMessage({id:item.alertPreFix}) + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + this.props.intl.formatMessage({id:item.alertSuffix}) : '')\r\n                        failedControls.push(alertMessage);\r\n                        startLabel.push(item.mandatoryLabel)\r\n                    }\r\n                }\r\n                else {\r\n                    if (typeof selectedRecord[item.dataField] === \"object\") {\r\n                        //to validate object empty value \r\n                        if (item.ismultilingual == \"true\") {\r\n                            let dataArray = 0;\r\n                            Object.values(selectedRecord[item.dataField])\r\n                                .map(lang => {\r\n                                    if (lang.length === 0) {\r\n                                        dataArray++\r\n                                    }\r\n                                }\r\n                                )\r\n                            if (dataArray > 0) {\r\n                                const alertMessage = (item.alertPreFix ? this.props.intl.formatMessage({id:item.alertPreFix}) + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + this.props.intl.formatMessage({id:item.alertSuffix}) : '')\r\n                                failedControls.push(alertMessage);\r\n                                startLabel.push(item.mandatoryLabel)//\"I\r\n                            }\r\n                        } else {\r\n                            //to validate FormSelectSearch, date component\r\n\r\n                            if (selectedRecord[item.dataField] && selectedRecord[item.dataField].length === 0) {\r\n                                const alertMessage = (item.alertPreFix ? this.props.intl.formatMessage({id:item.alertPreFix}) + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + this.props.intl.formatMessage({id:item.alertSuffix}) : '')\r\n                                failedControls.push(alertMessage);\r\n                                startLabel.push(item.mandatoryLabel)//\"IDS_SELECT\";\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (typeof selectedRecord[item.dataField] === \"string\") {\r\n                        //to handle string field -- added trim function\r\n                        if (selectedRecord[item.dataField].trim().length === 0) {\r\n                            const alertMessage = (item.alertPreFix ? this.props.intl.formatMessage({id:item.alertPreFix}) + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + this.props.intl.formatMessage({id:item.alertSuffix}) : '')\r\n                            failedControls.push(alertMessage);\r\n                            startLabel.push(item.mandatoryLabel)\r\n                        }\r\n                    }\r\n                    else {\r\n                        //number field\r\n                        if (selectedRecord[item.dataField].length === 0 //|| selectedRecord[item.dataField] === 0\r\n                        ) {\r\n                            const alertMessage = (item.alertPreFix ? this.props.intl.formatMessage({id:item.alertPreFix}) + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + this.props.intl.formatMessage({id:item.alertSuffix}) : '')\r\n                            failedControls.push(alertMessage);\r\n                            startLabel.push(item.mandatoryLabel)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // else{\r\n            //     const alertMessage=(item.alertPreFix?item.alertPreFix:'')+this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?item.alertSuffix:'')\r\n            //     failedControls.push(alertMessage);\r\n            // }\r\n        });\r\n        // console.log(\"validationPassed:\", failedControls);\r\n\r\n        if (failedControls.length === 0) {\r\n            if (saveType === 4) {\r\n                this.props.onExecuteClick();\r\n            }\r\n            else if (saveType === 3) {\r\n                if (selectedRecord.agree && selectedRecord.agree === transactionStatus.NO) {\r\n\r\n                    toast.info(this.props.intl.formatMessage({ id: \"IDS_CHECKAGREE\" }));\r\n\r\n                } else {\r\n\r\n                    this.props.validateEsign();\r\n                }\r\n            }\r\n            else {\r\n                this.props.onSaveClick(saveType);\r\n            }\r\n        }\r\n        else {\r\n            //toast.info(`${this.props.intl.formatMessage({id:\"IDS_ENTER\"})} ${failedControls.join(\",\")}`);\r\n            label = startLabel[0] === undefined ? label : startLabel[0];\r\n            toast.info(`${this.props.intl.formatMessage({ id: label })} ${failedControls[0]}`);\r\n        }\r\n\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        let masterStatus = this.props.masterStatus;\r\n        if (masterStatus !== \"\" && masterStatus !== undefined) {\r\n            toast.warn(masterStatus);\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { masterStatus: \"\" }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n            masterStatus = \"\";\r\n        }\r\n        if (this.props.innerPopup !== this.state.innerTop) {\r\n            setTimeout(() => {\r\n                let scrollDoc = this.props.modalEvent && this.props.modalEvent.id ? document.getElementById(this.props.modalEvent.id) : null;\r\n                if (this.myRef && this.myRef.current) {\r\n                    this.myRef.current.scrollIntoView({ behavior: 'smooth' })\r\n                }\r\n                if (scrollDoc) {\r\n                    scrollDoc.scrollIntoView({ behavior: 'smooth' })\r\n                }\r\n            }, 100)\r\n            this.setState({\r\n                innerTop: this.props.innerPopup\r\n            })\r\n        }\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n\r\n        let saveType = 1;\r\n        if (this.props.ignoreFormValidation) {\r\n            saveType = 5;\r\n        }\r\n        let buttonLabel = \"Save\";\r\n        let idsLabel = \"IDS_SAVE\";\r\n        if (this.props.buttonLabel) {\r\n            buttonLabel = this.props.buttonLabel;\r\n            idsLabel = 'IDS_'.concat(buttonLabel.toUpperCase());\r\n        }\r\n        return (\r\n            <Modal\r\n                size={this.props.size || \"lg\"}\r\n                backdrop=\"static\"\r\n                className={this.props.className || \"\"}\r\n                show={this.props.show}\r\n                onHide={this.props.closeModal}\r\n                enforceFocus={false}\r\n                dialogClassName=\"modal-dialog-slideout freakerstop\"\r\n                aria-labelledby=\"add-user\">\r\n                <Modal.Header className=\"d-flex align-items-center\">\r\n                    <Modal.Title id=\"add-user\" className=\"header-primary flex-grow-1\">\r\n                        {this.props.graphView === true ? \"\" : this.props.inputParam ?\r\n                            this.props.esign === true ?\r\n                                <FormattedMessage id={\"IDS_ESIGN\"}\r\n                                    defaultMessage={this.props.intl.formatMessage({ id: \"IDS_ESIGN\" })} />\r\n                                : this.props.loginoperation ?\r\n                                    <FormattedMessage id={this.props.screenName} />\r\n                                    : <>\r\n                                        {this.props.operation ?\r\n                                            <>\r\n                                                {this.props.inputParam.methodUrl === 'LimsElnUsermapping' ? \"\" :\r\n                                                    <FormattedMessage id={this.props.operation && \"IDS_\".concat(this.props.operation.toUpperCase())}\r\n                                                        defaultMessage={this.props.intl.formatMessage({ id: \"IDS_ADD\" })}\r\n                                                    />}\r\n\r\n                                                {\" \"}\r\n                                                {\r\n                                                    this.props.screenName ?\r\n                                                        <FormattedMessage id={this.props.screenName} />\r\n                                                        : \"\"\r\n                                                }\r\n                                            </>\r\n                                            :\r\n                                            this.props.screenName ?\r\n                                                <FormattedMessage id={this.props.screenName} />\r\n                                                : \"\"}\r\n                                    </>\r\n                            : \"\"}\r\n                    </Modal.Title>\r\n                    {this.props.needClose ?\r\n                        <Button className=\"btn-user btn-cancel\" variant=\"\" onClick={this.props.closeModal}>\r\n                            <FormattedMessage id={this.props.closeLabel || \"IDS_CLOSE\"} defaultMessage={this.props.closeLabel || 'Close'} />\r\n                        </Button> : <Button className=\"btn-user btn-cancel\" variant=\"\" onClick={this.props.closeModal}>\r\n                            <FormattedMessage id={this.props.closeLabel || \"IDS_CANCEL\"} defaultMessage={this.props.closeLabel || 'Cancel'} />\r\n                        </Button>}\r\n\r\n                    {this.props.esign === true ?\r\n                        <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(3)}>\r\n                            <FontAwesomeIcon icon={faSave} /> { }\r\n                            <FormattedMessage id='IDS_SUBMIT' defaultMessage='Submit' />\r\n                        </Button>\r\n                        :\r\n                        (this.props.operation === \"create\" || this.props.operation === \"update\"\r\n                            || this.props.operation === \"preview\") && (this.props.showValidate && this.props.showQueryTool) ?\r\n                            <>\r\n                                <Button className=\"btn-user btn-primary-blue\" onClick={() => this.props.queryGenrate()}>\r\n                                    <FontAwesomeIcon icon={faToolbox} /> { }\r\n                                    <FormattedMessage id='IDS_QUERYTOOL' defaultMessage='Query Tool' />\r\n                                </Button>\r\n                                <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(4)}>\r\n                                    <FontAwesomeIcon icon={faSave} /> { }\r\n                                    <FormattedMessage id='IDS_VALIDATE' defaultMessage='Validate' />\r\n                                </Button>\r\n                            </>\r\n                            : this.props.showValidate ? <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(4)}>\r\n                                <FontAwesomeIcon icon={faSave} /> { }\r\n                                <FormattedMessage id='IDS_VALIDATE' defaultMessage='Validate' />\r\n                            </Button> :\r\n                                this.props.showCalculate ?\r\n                                    <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(saveType)}>\r\n                                        <FontAwesomeIcon icon={faSave} /> { }\r\n                                        <FormattedMessage id='IDS_CALCULATE' defaultMessage='Calculate' />\r\n                                    </Button> :\r\n                                    this.props.showParam === true && this.props.showExecute ?\r\n                                        <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(4)}>\r\n                                            <FontAwesomeIcon icon={faCalculator} /> { }\r\n                                            <FormattedMessage id='IDS_EXECUTE' defaultMessage='Execute' />\r\n                                        </Button> :\r\n                                        this.props.noSave || this.props.graphView ?\r\n                                            this.props.operation === \"view\" ? \"\"\r\n                                                : <Button className=\"btn btn-user btn-primary-blue\" role=\"button\"\r\n                                                    onClick={this.props.resetView}\r\n                                                >\r\n                                                    <FormattedMessage id={\"IDS_RESET\"} defaultMessage='Reset' />\r\n                                                </Button>\r\n                                            : this.props.hideSave ? \"\" :\r\n                                                <Button className=\" btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(saveType)}>\r\n                                                    <FontAwesomeIcon icon={faSave} /> { }\r\n                                                    <FormattedMessage id={idsLabel} defaultMessage={buttonLabel} />\r\n                                                </Button>\r\n                    }\r\n                    {this.props.operation === \"create\" && this.props.showSaveContinue ?\r\n                        <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(2)}>\r\n                            <FontAwesomeIcon icon={faSave} /> { }\r\n                            <FormattedMessage id='IDS_SAVECONTINUE' defaultMessage='Save & Continue' />\r\n                        </Button>\r\n                        : \"\"\r\n                    }\r\n                    {(this.props.operation === \"create\" || this.props.operation === \"update\")\r\n                        && this.props.esign !== true && this.props.showExecute === true && this.props.showSave ?\r\n                        <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(1)}>\r\n                            <FontAwesomeIcon icon={faSave} /> { }\r\n                            <FormattedMessage id='IDS_SAVE' defaultMessage='Save' />\r\n                        </Button>\r\n                        : \"\"}\r\n                    {this.props.showSubmit === true ?\r\n\r\n                        <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(1)}>\r\n                            <FontAwesomeIcon icon={faSave} /> { }\r\n                            <FormattedMessage id='IDS_SUBMIT' defaultMessage='Submit' />\r\n                        </Button>\r\n                        : \"\"}\r\n                    {this.props.showSaveAs === true ?\r\n                        <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(7)}>\r\n\r\n                            <FontAwesomeIcon icon={faSave} /> { }\r\n                            <FormattedMessage id='IDS_SAVEFILTER' defaultMessage='Save Filter' />\r\n                        </Button>\r\n                        : \"\"}\r\n                </Modal.Header>\r\n                <Modal.Body className='popup-fixed-center-headed-full-width'>\r\n                    <ModalInner ref={this.myRef}>\r\n                        <Card.Body>\r\n                            <React.Fragment>\r\n                                {/* <Form ref={this.formRef}> */}\r\n                                {/* {this.props.operation === 'barcode' ?\r\n                                    <AddBarcode\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        onComboChange={this.onComboChange}\r\n                                        BarcodeList={this.props.Login.BarcodeList || []}\r\n                                        printer={this.props.Login.Printer || []}\r\n                                    // selectedPrinterData={this.state.selectedPrinterData}\r\n\r\n                                    >\r\n                                    </AddBarcode>\r\n                                    :  */}\r\n                                   { this.props.addComponent}\r\n                                {/* {this.props.addComponent({...this.props.addComponentParam, failedControls:this.state.failedControls})} */}\r\n                                {/* </Form> */}\r\n                            </React.Fragment>\r\n                        </Card.Body>\r\n                    </ModalInner>\r\n                </Modal.Body>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n    // showComponent =()=>{\r\n    //     {this.props.addComponent}\r\n    // }\r\n}\r\n// const mapStateToProps = (state) => {\r\n//     return {\r\n//         Login: state.Login\r\n//     }\r\n// }\r\nexport default injectIntl(SlideOutModal);"]},"metadata":{},"sourceType":"module"}