{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{constructOptionList,sortData}from'../components/CommonScript';//getComboLabelValue,, searchData\nimport{toast}from'react-toastify';import Axios from'axios';import{initRequest}from'./LoginAction';import{intl}from'../components/App';import{ColumnType,queryTypeFilter}from'../components/Enumeration';import{format}from'date-fns';export function getSQLQueryDetail(sqlQuery,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"sqlquery/getSQLQuery\",{nsqlquerycode:sqlQuery.nsqlquerycode,\"userinfo\":userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,queryResult:[],queryList:[],param:[],Dparam:[],TBLName:[]}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response}));}});};}export function getSQLQueryComboService(screenName,operation,primaryKeyName,primaryKeyValue,masterData,userInfo,queryTypeCode,ncontrolCode){return function(dispatch){if(operation===\"create\"||operation===\"update\"){var selectedRecord={};var chartService=rsapi.post(\"sqlquery/getChartType\",{userinfo:userInfo});var tableService=rsapi.post(\"sqlquery/getTablesFromSchema\",{\"tabletypecode\":-1,\"moduleformcode\":0,userinfo:userInfo});var tableType=rsapi.post(\"sqlquery/getQueryTableType\",{userinfo:userInfo});var urlArray=[];if(operation===\"create\"){urlArray=[chartService,tableService,tableType];}else{var _rsapi$post;var queryById=rsapi.post(\"sqlquery/getActiveSQLQueryById\",(_rsapi$post={},_defineProperty(_rsapi$post,primaryKeyName,primaryKeyValue),_defineProperty(_rsapi$post,\"userinfo\",userInfo),_rsapi$post));urlArray=[chartService,tableService,tableType,queryById];}if(queryTypeCode===queryTypeFilter.LIMSDASHBOARDQUERY){screenName=intl.formatMessage({id:\"IDS_LIMSDASHBOARDQUERY\"});}else if(queryTypeCode===queryTypeFilter.LIMSALERTQUERY){screenName=intl.formatMessage({id:\"IDS_LIMSALERTQUERY\"});}else if(queryTypeCode===queryTypeFilter.LIMSBARCODEQUERY){screenName=intl.formatMessage({id:\"IDS_LIMSBARCODEQUERY\"});}else if(queryTypeCode===queryTypeFilter.LIMSGENERALQUERY){screenName=intl.formatMessage({id:\"IDS_LIMSGENERALQUERY\"});}else{screenName=intl.formatMessage({id:\"IDS_LIMSFILTERQUERY\"});}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var chart=[];if(operation===\"update\"){selectedRecord=response[3].data;chart.push({\"value\":response[3].data[\"ncharttypecode\"],\"label\":response[3].data[\"schartname\"]});selectedRecord[\"ncharttypecode\"]=chart[0];}var tableName=undefined;var tableNameOnly=[];Object.values(response[1].data[0]).forEach(function(p){if(p.stable!==tableName){tableName=p.stable;tableNameOnly.push({tableName:tableName,stabledisplayname:p.stabledisplayname});}});dispatch({type:DEFAULT_RETURN,payload:{chartList:response[0].data||[],tableList:response[1].data[0]||[],tableType:response[2].data||[],tableName:tableNameOnly||[],operation:operation,screenName:screenName,selectedRecord:selectedRecord,openModal:true,openPortalModal:false,ncontrolCode:ncontrolCode,loading:false,showExecute:true,showParam:false,showValidate:true,showQueryTool:true,showSave:false,slideResult:[],slideList:[],resultStatus:'',param:[],Dparam:[],TBLName:[],parentPopUpSize:\"xl\"}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}// else {\n// }\n};}export function getTablesName(TableTypeCode,FormCode,userInfo){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"sqlquery/getTablesFromSchema\",{//\"tabletypecode\": parseInt(selectedRecord[\"ntabletypecode\"].value),\"moduleformcode\": parseInt(selectedRecord[\"nformcode\"] ? selectedRecord[\"nformcode\"].value: 0)\n\"tabletypecode\":parseInt(TableTypeCode),\"moduleformcode\":parseInt(FormCode),userinfo:userInfo}).then(function(response){var tableName=undefined;var tableNameOnly=[];Object.values(response.data[0]).forEach(function(p){if(p.stable!==tableName){tableName=p.stable;tableNameOnly.push({tableName:tableName,stabledisplayname:p.stabledisplayname});}});dispatch({type:DEFAULT_RETURN,payload:{tableList:response.data[0]||[],tableName:tableNameOnly||[],loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response}));}});};}export function getModuleFormName(TableTypeCode,userInfo){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"sqlquery/getModuleFormName\",{\"tabletypecode\":parseInt(TableTypeCode),\"userinfo\":userInfo}).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{moduleFormName:response.data[0]||[],loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response}));}});};}export function executeUserQuery(inputParam){return function(dispatch){var Query=inputParam.query;var screenFlag=inputParam.screenFlag;var slideOperation=inputParam.slideOperation;var userInfo=inputParam.userInfo;var screenName=inputParam.screenName;var data=inputParam.data;dispatch(initRequest(true));rsapi.post(\"/sqlquery/getSchemaQueryOutput\",{\"query\":Query,userinfo:userInfo,\"returnoption\":\"LIST\"}).then(function(response){var querycol=response.data[1];var keyarray=[];var temparray=[];var validColumns=true;if(querycol.length>0){keyarray=Object.keys(querycol[0]);var width=\"200px\";if(keyarray.length===2){width=\"300px\";}for(var i=0;i<keyarray.length;i++){if(keyarray[i]!==null&&keyarray[i]!==''){temparray.push({\"idsName\":keyarray[i],\"dataField\":keyarray[i],\"width\":width});}else{validColumns=false;}}}var respObject={loading:false,slideResult:response.data[1]||[],slideList:temparray||[],resultStatus:response.data[0]||'',openModal:true,showParam:true,screenFlag:screenFlag};if(screenFlag===\"showQuery\"){if(screenName===\"Results\"){respObject=_objectSpread(_objectSpread({},respObject),{},{showExecute:false,operation:\"view\",screenName:screenName},data);}else{respObject=_objectSpread(_objectSpread({},respObject),{},{showExecute:true,operation:slideOperation});}}else{if(screenFlag===\"NoParam\"){respObject=_objectSpread(_objectSpread({},respObject),{},{screenName:\"Results\",operation:\"view\",queryResult:response.data[1]||[],queryList:temparray||[],showExecute:inputParam.showExecute,showValidate:inputParam.showValidate,showQueryTool:inputParam.showValidate,showSave:inputParam.showSave,noSave:inputParam.noSave});}else{respObject=_objectSpread(_objectSpread({},respObject),{},{queryResult:response.data[1]||[],showExecute:true,showValidate:false,showQueryTool:false,operation:\"create\",screenName:\"Parameter for Results\",queryList:temparray||[]});}}if(validColumns){dispatch({type:DEFAULT_RETURN,payload:_objectSpread({},respObject)});}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.warn(intl.formatMessage({id:\"IDS_MAKESUREALLFIELDSHAVENAMEORALIASNAME\"}));}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});//toast.error(intl.formatMessage({ id: error.message }));\nif(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function executeAlertUserQuery(Query,userInfo){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/sqlquery/getSchemaQueryOutput\",{\"query\":Query,userinfo:userInfo}).then(function(response){var resultCount=response.data[1];dispatch({type:DEFAULT_RETURN,payload:{loading:false,resultCount:resultCount}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function comboChangeQueryType(querytypecode,data,userInfo){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/sqlquery/getSQLQueryByQueryTypeCode\",{nquerytypecode:querytypecode,\"userinfo\":userInfo}).then(function(response){var masterData=_objectSpread(_objectSpread(_objectSpread({},data),response.data),{},{searchedData:undefined});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,queryList:[]}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function getColumnNamesByTableName(tableName,columnList){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/sqlquery/getColumnsFromTable\",{\"tablename\":tableName}).then(function(response){columnList=columnList||new Map();columnList.set(Object.keys(response.data)[0],Object.values(response.data)[0]);dispatch({type:DEFAULT_RETURN,payload:{columnList:columnList,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function comboColumnValues(tableName,fieldName){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/sqlquery/getColumnValues\",{\"tablename\":tableName,\"fieldname\":fieldName}).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{fieldResult:response.data[1]||[],loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function getDatabaseTables(userInfo,sqlQuery,inputParam){return function(dispatch){dispatch(initRequest(true));var url=\"\";if(sqlQuery){url=\"/sqlquery/getdatabasetables\";}else{url=\"/sqlquery/getdatabaseviews\";}rsapi.post(url,{userinfo:userInfo}).then(function(response){if(sqlQuery){var tableListMap=constructOptionList(response.data[\"databaseTableList\"]||[],\"stablename\",\"sdisplayname\",false,false,false);dispatch({type:DEFAULT_RETURN,payload:_objectSpread({loading:false,databaseTableList:tableListMap.get(\"OptionList\"),openPortalModal:true,screenName:\"IDS_QUERYBUILDER\",sqlQuery:sqlQuery},inputParam)});}else{var viewListMap=constructOptionList(response.data[\"databaseviewList\"]||[],\"sviewname\",\"sdisplayname\",false,false,false);dispatch({type:DEFAULT_RETURN,payload:_objectSpread({loading:false,databaseviewList:viewListMap.get(\"OptionList\"),openPortalModal:true,screenName:\"IDS_QUERYBUILDER\",sqlQuery:sqlQuery,queryData:[],gridColumnList:[]},inputParam)});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function executeQuery(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/sqlquery/executequery\",_objectSpread({},inputParam)).then(function(response){var queryData=response.data;var gridColumnList=[];if(queryData.length>0){// inputParam.columnList.forEach(item => {\ninputParam.selectFields.forEach(function(item){gridColumnList.push({idsName:item.items.displayname[inputParam.userInfo.slanguagetypecode],dataField:item.items.columnname,width:'200px'});});}dispatch({type:DEFAULT_RETURN,payload:{queryData:queryData,gridColumnList:gridColumnList,loading:false,selectedRecord:_objectSpread(_objectSpread({},inputParam.selectedRecord),{},{sstatus:\"SUCCESS\"})// ,\n// resultStatus: \"Success\",\n// screenName: \"Results\",\n// openModal: true\n}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getForeignTable(inputParam,type){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/sqlquery/getforeigntable\",_objectSpread({},inputParam)).then(function(response){var userInfo=inputParam.userinfo;var foreignTableList=response.data[\"foreignTableList\"];var jstaticcolumns=foreignTableList[0]?foreignTableList[0].jstaticcolumns||[]:[];var jdynamiccolumns=foreignTableList[0]?foreignTableList[0].jdynamiccolumns||[]:[];var jmultilingualcolumn=foreignTableList[0]?foreignTableList[0].jmultilingualcolumn||[]:[];var jnumericcolumns=foreignTableList[0]?foreignTableList[0].jnumericcolumns||[]:[];var sprimarykeyname=foreignTableList[0]?foreignTableList[0].sprimarykeyname:\"\";var stablename=foreignTableList[0]?foreignTableList[0].stablename:\"\";var defaultColumn={};var comboData=[];jstaticcolumns.map(function(items){comboData.push({label:items.displayname[userInfo.slanguagetypecode],value:items.columnname,items:_objectSpread(_objectSpread({},items),{},{stablename:stablename,sprimarykeyname:sprimarykeyname,columntype:ColumnType.STATICCOLUMN})});if(items.default){defaultColumn={label:items.displayname[userInfo.slanguagetypecode],value:items.columnname,items:_objectSpread(_objectSpread({},items),{},{stablename:stablename,sprimarykeyname:sprimarykeyname,columntype:ColumnType.STATICCOLUMN})};}});jdynamiccolumns.map(function(items){comboData.push({label:items.displayname[userInfo.slanguagetypecode],value:items.columnname,items:_objectSpread(_objectSpread({},items),{},{stablename:stablename,sprimarykeyname:sprimarykeyname,columntype:ColumnType.DYNAMICCOLUMN})});if(items.default){defaultColumn={label:items.displayname[userInfo.slanguagetypecode],value:items.columnname,items:_objectSpread(_objectSpread({},items),{},{stablename:stablename,sprimarykeyname:sprimarykeyname,columntype:ColumnType.DYNAMICCOLUMN})};}});jmultilingualcolumn.map(function(items){comboData.push({label:items.displayname[userInfo.slanguagetypecode],value:items.columnname,items:_objectSpread(_objectSpread({},items),{},{stablename:stablename,sprimarykeyname:sprimarykeyname,columntype:ColumnType.MULTILINGUALCOLUMN})});if(items.default){defaultColumn={label:items.displayname[userInfo.slanguagetypecode],value:items.columnname,items:_objectSpread(_objectSpread({},items),{},{stablename:stablename,sprimarykeyname:sprimarykeyname,columntype:ColumnType.MULTILINGUALCOLUMN})};}});jnumericcolumns.map(function(items){comboData.push({label:items.displayname[userInfo.slanguagetypecode],value:items.foriegntablePK,items:_objectSpread(_objectSpread({},items),{},{stablename:stablename,sprimarykeyname:sprimarykeyname,columntype:ColumnType.NUMERICCOLUMN})});if(items.default){defaultColumn={label:items.displayname[userInfo.slanguagetypecode],value:items.foriegntablePK,items:_objectSpread(_objectSpread({},items),{},{stablename:stablename,sprimarykeyname:sprimarykeyname,columntype:ColumnType.NUMERICCOLUMN})};}});var tableColumnList=[];var tempdata={};if(type===\"column\"){tableColumnList=inputParam.foreignTableColumnList||[];tableColumnList[inputParam.index]=comboData;tempdata={foreignTableColumnList:tableColumnList};}else{tableColumnList=inputParam.tableColumnList||[];tableColumnList[inputParam.index]=comboData;tempdata={tableColumnList:tableColumnList};}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({loading:false},tempdata),{},{selectedRecord:inputParam.selectedRecord})});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getViewColumns(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/sqlquery/getdatabaseviewscolumns\",{sviewname:inputParam.sviewname,userinfo:inputParam.userinfo}).then(function(response){var userInfo=inputParam.userinfo;var languageCode=userInfo.slanguagetypecode?userInfo.slanguagetypecode:\"en-US\";var responseData=response.data[\"viewColumnList\"]||[];var jsonData=responseData[0]?responseData[0].jsondata:[];var defaultColumn={};var comboData=[];var selectFields=[];jsonData[\"conditionfields\"].map(function(items){comboData.push({label:items.displayname[languageCode],value:items.columnname,items:items});if(items.default){defaultColumn={label:items.displayname[languageCode],value:items.columnname,items:items};}});jsonData[\"selectfields\"].map(function(items){selectFields.push({label:items.displayname[languageCode],value:items.columnname,items:items});});dispatch({type:DEFAULT_RETURN,payload:{loading:false,viewColumnList:comboData,selectFields:selectFields,selectedRecord:inputParam.selectedRecord}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getMasterData(inputParam,viewMasterListByRule){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/sqlquery/getmasterdata\",_objectSpread({},inputParam)).then(function(response){// const optionId = inputParam.data.sforeigncolumnname;\nvar tableListMap=constructOptionList(response.data[\"masterdata\"]||[],inputParam.optionId,\"sdisplayname\",false,false,false);var tempData={};// if(inputParam.data.nflag === 1) {\n//     let masterdata = [];\n//     masterdata[inputParam.index] = tableListMap.get(\"OptionList\");\n//     tempData = { masterdata };\n// } else {\n// let viewMasterListByRule = [];\n// viewMasterListByRule[inputParam.index] = tableListMap.get(\"OptionList\");\nif(viewMasterListByRule===undefined){viewMasterListByRule=[];viewMasterListByRule[inputParam.groupIndex]=[];}else{viewMasterListByRule=_objectSpread({},viewMasterListByRule);}if(viewMasterListByRule[inputParam.groupIndex]){}else{viewMasterListByRule[inputParam.groupIndex]=[];}viewMasterListByRule[inputParam.groupIndex][inputParam.index]=[];viewMasterListByRule[inputParam.groupIndex][inputParam.index]=tableListMap.get(\"OptionList\");tempData={viewMasterListByRule:viewMasterListByRule};// }\ndispatch({type:DEFAULT_RETURN,payload:_objectSpread({loading:false,selectedRecord:inputParam.selectedRecord},tempData)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function createQueryBuilder(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/querybuilder/updateQueryBuilder\",_objectSpread({},inputParam)).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{loading:false,openModal:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getParameterFromQuery(inputParam){return function(dispatch){var urlArray=[];var dataIndex=[];var comboData=JSON.parse(inputParam.masterData.selectedQueryBuilder.sdefaultvalue.value);comboData.sdefaultvalue.forEach(function(dataItem,index){var tableData=dataItem.items;var mastertablename=tableData.mastertablename;if(dataItem.items.needmasterdata&&mastertablename){var inputParamService={userinfo:inputParam.userInfo,data:{nflag:2,mastertablename:mastertablename,valuemember:tableData.valuemember,displaymember:tableData.displaymember}};urlArray.push(rsapi.post(\"/sqlquery/getmasterdata\",_objectSpread({},inputParamService)));dataIndex.push(index);}else if(dataItem.items&&dataItem.items.sforeigncolumnname!==undefined&&dataItem.items.sforeigncolumnname!==\"\"){var _inputParamService={data:_objectSpread(_objectSpread({},dataItem.items),{},{nflag:1}),userinfo:inputParam.userInfo};urlArray.push(rsapi.post(\"/sqlquery/getmasterdata\",_objectSpread({},_inputParamService)));dataIndex.push(index);}if(dataItem.items.columntype===ColumnType.DATATIME||dataItem.items.columntype===ColumnType.DATE&&dataItem.symbolObject.items.isInputVisible===true&&(dataItem.symbolObject.items.symbolType===5||dataItem.symbolObject.items.symbolType===1)){dataItem.value=new Date(dataItem.value);}});dispatch(initRequest(true));Axios.all(urlArray).then(Axios.spread(function(){var viewMasterData=[];for(var _len=arguments.length,response=new Array(_len),_key=0;_key<_len;_key++){response[_key]=arguments[_key];}if(response!==null&&response.length>0){response.forEach(function(item,ind){var valueMember=\"\";if(comboData.sdefaultvalue[dataIndex[ind]].items&&comboData.sdefaultvalue[dataIndex[ind]].items.sforeigncolumnname!==undefined&&comboData.sdefaultvalue[dataIndex[ind]].items.sforeigncolumnname!==\"\"){valueMember=comboData.sdefaultvalue[dataIndex[ind]].items.sforeigncolumnname;}else{valueMember=comboData.sdefaultvalue[dataIndex[ind]].items.valuemember;}var tableListMap=constructOptionList(item.data[\"masterdata\"]||[],valueMember,\"sdisplayname\",false,false,false);viewMasterData[dataIndex[ind]]=tableListMap.get(\"OptionList\");});}dispatch({type:DEFAULT_RETURN,payload:{viewMasterData:viewMasterData,loading:false,openModal:true,comboData:comboData}});})).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getSelectedQueryBuilder(inputParam,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/querybuilder/getSelectedQueryBuilder\",{'userinfo':userInfo,\"nQueryBuilderCode\":inputParam.nquerybuildercode}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),{},{selectedQueryBuilder:response.data[\"selectedQueryBuilder\"],queryDataMain:response.data[\"queryDataMain\"],columnList:response.data[\"columnList\"],queryTypeCode:inputParam.nquerytype});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function updateQueryBuilder(inputParam,inputData,masterData){return function(dispatch){var urlArray=[];var dataIndex=[];dispatch(initRequest(true));// urlArray.push(rsapi.post(\"/querybuilder/updateQueryBuilder\", {\n//     ...inputData\n// }))\nurlArray.push(rsapi.post(\"/sqlquery/executequery\",_objectSpread({},inputParam)));Axios.all(urlArray).then(Axios.spread(function(){for(var _len2=arguments.length,response=new Array(_len2),_key2=0;_key2<_len2;_key2++){response[_key2]=arguments[_key2];}masterData=_objectSpread(_objectSpread({},masterData),{},{queryDataMain:response[0].data});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{loading:false,openModal:false,masterData:masterData}});})).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getQueryBuilder(nqueryTypeCode,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/querybuilder/getQueryBuilder\",{'userinfo':userInfo,\"nqueryTypeCode\":nqueryTypeCode}).then(function(response){masterData=_objectSpread({},response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/SQLBuilderAction.js"],"names":["rsapi","DEFAULT_RETURN","constructOptionList","sortData","toast","Axios","initRequest","intl","ColumnType","queryTypeFilter","format","getSQLQueryDetail","sqlQuery","userInfo","masterData","dispatch","post","nsqlquerycode","then","response","data","type","payload","loading","queryResult","queryList","param","Dparam","TBLName","catch","error","status","formatMessage","id","message","warn","getSQLQueryComboService","screenName","operation","primaryKeyName","primaryKeyValue","queryTypeCode","ncontrolCode","selectedRecord","chartService","userinfo","tableService","tableType","urlArray","queryById","LIMSDASHBOARDQUERY","LIMSALERTQUERY","LIMSBARCODEQUERY","LIMSGENERALQUERY","all","chart","push","tableName","undefined","tableNameOnly","Object","values","forEach","p","stable","stabledisplayname","chartList","tableList","openModal","openPortalModal","showExecute","showParam","showValidate","showQueryTool","showSave","slideResult","slideList","resultStatus","parentPopUpSize","getTablesName","TableTypeCode","FormCode","parseInt","getModuleFormName","moduleFormName","executeUserQuery","inputParam","Query","query","screenFlag","slideOperation","querycol","keyarray","temparray","validColumns","length","keys","width","i","respObject","noSave","executeAlertUserQuery","resultCount","comboChangeQueryType","querytypecode","nquerytypecode","searchedData","getColumnNamesByTableName","columnList","Map","set","comboColumnValues","fieldName","fieldResult","getDatabaseTables","url","tableListMap","databaseTableList","get","viewListMap","databaseviewList","queryData","gridColumnList","executeQuery","selectFields","item","idsName","items","displayname","slanguagetypecode","dataField","columnname","sstatus","getForeignTable","foreignTableList","jstaticcolumns","jdynamiccolumns","jmultilingualcolumn","jnumericcolumns","sprimarykeyname","stablename","defaultColumn","comboData","map","label","value","columntype","STATICCOLUMN","default","DYNAMICCOLUMN","MULTILINGUALCOLUMN","foriegntablePK","NUMERICCOLUMN","tableColumnList","tempdata","foreignTableColumnList","index","getViewColumns","sviewname","languageCode","responseData","jsonData","jsondata","viewColumnList","getMasterData","viewMasterListByRule","optionId","tempData","groupIndex","createQueryBuilder","getParameterFromQuery","dataIndex","JSON","parse","selectedQueryBuilder","sdefaultvalue","dataItem","tableData","mastertablename","needmasterdata","inputParamService","nflag","valuemember","displaymember","sforeigncolumnname","DATATIME","DATE","symbolObject","isInputVisible","symbolType","Date","spread","viewMasterData","ind","valueMember","getSelectedQueryBuilder","nquerybuildercode","queryDataMain","nquerytype","updateQueryBuilder","inputData","getQueryBuilder","nqueryTypeCode"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport {\r\n    constructOptionList,\r\n    sortData\r\n} from '../components/CommonScript' //getComboLabelValue,, searchData\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport {\r\n    initRequest\r\n} from './LoginAction';\r\nimport {\r\n    intl\r\n} from '../components/App';\r\nimport {\r\n    ColumnType,\r\n    queryTypeFilter\r\n} from '../components/Enumeration';\r\nimport { format } from 'date-fns';\r\n\r\n\r\n\r\nexport function getSQLQueryDetail(sqlQuery, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"sqlquery/getSQLQuery\", {\r\n            nsqlquerycode: sqlQuery.nsqlquerycode,\r\n            \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data\r\n                };\r\n                sortData(masterData);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        queryResult: [],\r\n                        queryList: [],\r\n                        param: [],\r\n                        Dparam: [],\r\n                        TBLName: []\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response\r\n                    }));\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getSQLQueryComboService(screenName, operation, primaryKeyName, primaryKeyValue, masterData, userInfo, queryTypeCode, ncontrolCode) {\r\n    return function (dispatch) {\r\n\r\n        if (operation === \"create\" || operation === \"update\") {\r\n\r\n            let selectedRecord = {};\r\n            const chartService = rsapi.post(\"sqlquery/getChartType\", {\r\n                userinfo: userInfo\r\n            });\r\n            const tableService = rsapi.post(\"sqlquery/getTablesFromSchema\", {\r\n                \"tabletypecode\": -1,\r\n                \"moduleformcode\": 0,\r\n                userinfo: userInfo\r\n            });\r\n            const tableType = rsapi.post(\"sqlquery/getQueryTableType\", {\r\n                userinfo: userInfo\r\n            });\r\n            let urlArray = [];\r\n            if (operation === \"create\") {\r\n\r\n                urlArray = [chartService, tableService, tableType];\r\n            } else {\r\n                const queryById = rsapi.post(\"sqlquery/getActiveSQLQueryById\", {\r\n                    [primaryKeyName]: primaryKeyValue,\r\n                    \"userinfo\": userInfo\r\n                });\r\n\r\n                urlArray = [chartService, tableService, tableType, queryById];\r\n            }\r\n\r\n            if (queryTypeCode === queryTypeFilter.LIMSDASHBOARDQUERY) {\r\n                screenName = intl.formatMessage({\r\n                    id: \"IDS_LIMSDASHBOARDQUERY\"\r\n                });\r\n            } else if (queryTypeCode === queryTypeFilter.LIMSALERTQUERY) {\r\n                screenName = intl.formatMessage({\r\n                    id: \"IDS_LIMSALERTQUERY\"\r\n                });\r\n            } else if (queryTypeCode === queryTypeFilter.LIMSBARCODEQUERY) {\r\n                screenName = intl.formatMessage({\r\n                    id: \"IDS_LIMSBARCODEQUERY\"\r\n                });\r\n            } else if (queryTypeCode === queryTypeFilter.LIMSGENERALQUERY) {\r\n                screenName = intl.formatMessage({\r\n                    id: \"IDS_LIMSGENERALQUERY\"\r\n                });\r\n            } else {\r\n                screenName = intl.formatMessage({\r\n                    id: \"IDS_LIMSFILTERQUERY\"\r\n                });\r\n            }\r\n\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n\r\n                    let chart = [];\r\n                    if (operation === \"update\") {\r\n                        selectedRecord = response[3].data;\r\n                        chart.push({\r\n                            \"value\": response[3].data[\"ncharttypecode\"],\r\n                            \"label\": response[3].data[\"schartname\"]\r\n                        });\r\n                        selectedRecord[\"ncharttypecode\"] = chart[0];\r\n                    }\r\n\r\n                    let tableName = undefined;\r\n                    let tableNameOnly = [];\r\n                    Object.values(response[1].data[0]).forEach(p => {\r\n                        if (p.stable !== tableName) {\r\n                            tableName = p.stable;\r\n                            tableNameOnly.push({\r\n                                tableName, stabledisplayname: p.stabledisplayname\r\n                            });\r\n                        }\r\n                    })\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            chartList: response[0].data || [],\r\n                            tableList: response[1].data[0] || [],\r\n                            tableType: response[2].data || [],\r\n                            tableName: tableNameOnly || [],\r\n                            operation,\r\n                            screenName,\r\n                            selectedRecord,\r\n                            openModal: true,\r\n                            openPortalModal: false,\r\n                            ncontrolCode,\r\n                            loading: false,\r\n                            showExecute: true,\r\n                            showParam: false,\r\n                            showValidate: true,\r\n                            showQueryTool: true,\r\n                            showSave: false,\r\n                            slideResult: [],\r\n                            slideList: [],\r\n                            resultStatus: '',\r\n                            param: [],\r\n                            Dparam: [],\r\n                            TBLName: [],\r\n                            parentPopUpSize: \"xl\"\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({\r\n                            id: error.message\r\n                        }));\r\n                    } else {\r\n\r\n                        toast.warn(intl.formatMessage({\r\n                            id: error.response.data\r\n                        }));\r\n                    }\r\n                })\r\n\r\n\r\n\r\n        }\r\n        // else {\r\n        // }\r\n    }\r\n}\r\n\r\nexport function getTablesName(TableTypeCode, FormCode, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"sqlquery/getTablesFromSchema\", {\r\n            //\"tabletypecode\": parseInt(selectedRecord[\"ntabletypecode\"].value),\"moduleformcode\": parseInt(selectedRecord[\"nformcode\"] ? selectedRecord[\"nformcode\"].value: 0)\r\n            \"tabletypecode\": parseInt(TableTypeCode),\r\n            \"moduleformcode\": parseInt(FormCode), userinfo: userInfo\r\n\r\n        })\r\n            .then(response => {\r\n\r\n                let tableName = undefined;\r\n                let tableNameOnly = [];\r\n                Object.values(response.data[0]).forEach(p => {\r\n                    if (p.stable !== tableName) {\r\n                        tableName = p.stable;\r\n                        tableNameOnly.push({\r\n                            tableName, stabledisplayname: p.stabledisplayname\r\n                        });\r\n                    }\r\n                })\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        tableList: response.data[0] || [],\r\n                        tableName: tableNameOnly || [],\r\n                        loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response\r\n                    }));\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getModuleFormName(TableTypeCode, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"sqlquery/getModuleFormName\", {\r\n            \"tabletypecode\": parseInt(TableTypeCode),\r\n            \"userinfo\": userInfo\r\n\r\n        })\r\n            .then(response => {\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        moduleFormName: response.data[0] || [],\r\n                        loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response\r\n                    }));\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function executeUserQuery(inputParam) {\r\n    return function (dispatch) {\r\n        const Query = inputParam.query;\r\n        const screenFlag = inputParam.screenFlag;\r\n        const slideOperation = inputParam.slideOperation;\r\n        const userInfo = inputParam.userInfo;\r\n        const screenName = inputParam.screenName\r\n        const data = inputParam.data;\r\n\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/sqlquery/getSchemaQueryOutput\", {\r\n            \"query\": Query,\r\n            userinfo: userInfo,\r\n            \"returnoption\": \"LIST\"\r\n        })\r\n            .then(response => {\r\n                const querycol = response.data[1];\r\n                let keyarray = [];\r\n                let temparray = [];\r\n                let validColumns = true;\r\n                if (querycol.length > 0) {\r\n                    keyarray = Object.keys(querycol[0]);\r\n                    let width = \"200px\"\r\n                    if (keyarray.length === 2) {\r\n                        width = \"300px\"\r\n                    }\r\n                    for (let i = 0; i < keyarray.length; i++) {\r\n                        if (keyarray[i] !== null && keyarray[i] !== '') {\r\n                            temparray.push({\r\n                                \"idsName\": keyarray[i],\r\n                                \"dataField\": keyarray[i],\r\n                                \"width\": width\r\n                            });\r\n                        } else {\r\n                            validColumns = false;\r\n                        }\r\n                    }\r\n                }\r\n                let respObject = {\r\n                    loading: false,\r\n                    slideResult: response.data[1] || [],\r\n                    slideList: temparray || [],\r\n                    resultStatus: response.data[0] || '',\r\n                    openModal: true,\r\n                    showParam: true,\r\n                    screenFlag\r\n                }\r\n\r\n                if (screenFlag === \"showQuery\") {\r\n                    if (screenName === \"Results\") {\r\n                        respObject = {\r\n                            ...respObject,\r\n                            showExecute: false,\r\n                            operation: \"view\",\r\n                            screenName: screenName,\r\n                            ...data\r\n                        }\r\n                    } else {\r\n                        respObject = {\r\n                            ...respObject,\r\n                            showExecute: true,\r\n                            operation: slideOperation,\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (screenFlag === \"NoParam\") {\r\n                        respObject = {\r\n                            ...respObject,\r\n                            screenName: \"Results\",\r\n                            operation: \"view\",\r\n                            queryResult: response.data[1] || [],\r\n                            queryList: temparray || [],\r\n                            showExecute: inputParam.showExecute,\r\n                            showValidate: inputParam.showValidate,\r\n                            showQueryTool: inputParam.showValidate,\r\n                            showSave: inputParam.showSave,\r\n                            noSave: inputParam.noSave,\r\n                        }\r\n                    } else {\r\n                        respObject = {\r\n                            ...respObject,\r\n                            queryResult: response.data[1] || [],\r\n                            showExecute: true,\r\n                            showValidate: false,\r\n                            showQueryTool: false,\r\n                            operation: \"create\",\r\n                            screenName: \"Parameter for Results\",\r\n                            queryList: temparray || [],\r\n                        }\r\n                    }\r\n                }\r\n                if (validColumns) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ...respObject\r\n                        }\r\n                    });\r\n                } else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    toast.warn(intl.formatMessage({\r\n                        id: \"IDS_MAKESUREALLFIELDSHAVENAMEORALIASNAME\"\r\n                    }))\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n\r\n                //toast.error(intl.formatMessage({ id: error.message }));\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function executeAlertUserQuery(Query, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/sqlquery/getSchemaQueryOutput\", {\r\n            \"query\": Query,\r\n            userinfo: userInfo\r\n        })\r\n            .then(response => {\r\n\r\n\r\n                const resultCount = response.data[1];\r\n\r\n\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        resultCount: resultCount\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                toast.error(intl.formatMessage({\r\n                    id: error.message\r\n                }));\r\n            });\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function comboChangeQueryType(querytypecode, data, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/sqlquery/getSQLQueryByQueryTypeCode\", {\r\n            nquerytypecode: querytypecode,\r\n            \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n\r\n                const masterData = {\r\n                    ...data,\r\n                    ...response.data,\r\n                    searchedData: undefined\r\n                }\r\n\r\n                sortData(masterData);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        queryList: []\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                toast.error(intl.formatMessage({\r\n                    id: error.message\r\n                }));\r\n            });\r\n    }\r\n}\r\n\r\nexport function getColumnNamesByTableName(tableName, columnList) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/sqlquery/getColumnsFromTable\", {\r\n            \"tablename\": tableName\r\n        })\r\n            .then(response => {\r\n\r\n                columnList = columnList || new Map();\r\n                columnList.set(Object.keys(response.data)[0], Object.values(response.data)[0]);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        columnList,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                toast.error(intl.formatMessage({\r\n                    id: error.message\r\n                }));\r\n            });\r\n    }\r\n}\r\n\r\nexport function comboColumnValues(tableName, fieldName) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/sqlquery/getColumnValues\", {\r\n            \"tablename\": tableName,\r\n            \"fieldname\": fieldName\r\n        })\r\n            .then(response => {\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        fieldResult: response.data[1] || [],\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                toast.error(intl.formatMessage({\r\n                    id: error.message\r\n                }));\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport function getDatabaseTables(userInfo, sqlQuery, inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let url = \"\";\r\n        if (sqlQuery) {\r\n            url = \"/sqlquery/getdatabasetables\";\r\n        } else {\r\n            url = \"/sqlquery/getdatabaseviews\";\r\n        }\r\n        rsapi.post(url, {\r\n            userinfo: userInfo\r\n        })\r\n            .then(response => {\r\n                if (sqlQuery) {\r\n                    const tableListMap = constructOptionList(response.data[\"databaseTableList\"] || [], \"stablename\", \"sdisplayname\", false, false, false);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            databaseTableList: tableListMap.get(\"OptionList\"),\r\n                            openPortalModal: true,\r\n                            screenName: \"IDS_QUERYBUILDER\",\r\n                            sqlQuery,                            \r\n                            ...inputParam\r\n                        }\r\n                    });\r\n                } else {\r\n                    const viewListMap = constructOptionList(response.data[\"databaseviewList\"] || [], \"sviewname\", \"sdisplayname\", false, false, false);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            databaseviewList: viewListMap.get(\"OptionList\"),\r\n                            openPortalModal: true,\r\n                            screenName: \"IDS_QUERYBUILDER\",\r\n                            sqlQuery,\r\n                            queryData: [],\r\n                            gridColumnList: [],\r\n                            ...inputParam\r\n                        }\r\n                    });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function executeQuery(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/sqlquery/executequery\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n\r\n                const queryData = response.data;\r\n                let gridColumnList = [];\r\n                if (queryData.length > 0) {\r\n                    // inputParam.columnList.forEach(item => {\r\n                    inputParam.selectFields.forEach(item => {\r\n                        gridColumnList.push({ idsName: item.items.displayname[inputParam.userInfo.slanguagetypecode], dataField: item.items.columnname, width: '200px' })\r\n                    })\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        queryData,\r\n                        gridColumnList,\r\n                        loading: false,\r\n                        selectedRecord: {\r\n                            ...inputParam.selectedRecord,\r\n                            sstatus: \"SUCCESS\"\r\n                        }\r\n                        // ,\r\n                        // resultStatus: \"Success\",\r\n                        // screenName: \"Results\",\r\n                        // openModal: true\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getForeignTable(inputParam, type) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/sqlquery/getforeigntable\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                const userInfo = inputParam.userinfo;\r\n                const foreignTableList = response.data[\"foreignTableList\"];\r\n\r\n                const jstaticcolumns = foreignTableList[0] ? (foreignTableList[0].jstaticcolumns || []) : [];\r\n                const jdynamiccolumns = foreignTableList[0] ? (foreignTableList[0].jdynamiccolumns || []) : [];\r\n                const jmultilingualcolumn = foreignTableList[0] ? (foreignTableList[0].jmultilingualcolumn || []) : [];\r\n                const jnumericcolumns = foreignTableList[0] ? (foreignTableList[0].jnumericcolumns || []) : [];\r\n                const sprimarykeyname = foreignTableList[0] ? foreignTableList[0].sprimarykeyname : \"\";\r\n                const stablename = foreignTableList[0] ? foreignTableList[0].stablename : \"\";\r\n\r\n                let defaultColumn = {};\r\n                let comboData = []\r\n                jstaticcolumns.map(items => {\r\n                    comboData.push({\r\n                        label: items.displayname[userInfo.slanguagetypecode],\r\n                        value: items.columnname,\r\n                        items: { ...items, stablename, sprimarykeyname, columntype: ColumnType.STATICCOLUMN }\r\n                    })\r\n                    if (items.default) {\r\n                        defaultColumn = {\r\n                            label: items.displayname[userInfo.slanguagetypecode],\r\n                            value: items.columnname,\r\n                            items: { ...items, stablename, sprimarykeyname, columntype: ColumnType.STATICCOLUMN }\r\n                        }\r\n                    }\r\n                });\r\n                jdynamiccolumns.map(items => {\r\n                    comboData.push({\r\n                        label: items.displayname[userInfo.slanguagetypecode],\r\n                        value: items.columnname,\r\n                        items: { ...items, stablename, sprimarykeyname, columntype: ColumnType.DYNAMICCOLUMN }\r\n                    })\r\n                    if (items.default) {\r\n                        defaultColumn = {\r\n                            label: items.displayname[userInfo.slanguagetypecode],\r\n                            value: items.columnname,\r\n                            items: { ...items, stablename, sprimarykeyname, columntype: ColumnType.DYNAMICCOLUMN }\r\n                        }\r\n                    }\r\n                });\r\n                jmultilingualcolumn.map(items => {\r\n                    comboData.push({\r\n                        label: items.displayname[userInfo.slanguagetypecode],\r\n                        value: items.columnname,\r\n                        items: { ...items, stablename, sprimarykeyname, columntype: ColumnType.MULTILINGUALCOLUMN }\r\n                    })\r\n                    if (items.default) {\r\n                        defaultColumn = {\r\n                            label: items.displayname[userInfo.slanguagetypecode],\r\n                            value: items.columnname,\r\n                            items: { ...items, stablename, sprimarykeyname, columntype: ColumnType.MULTILINGUALCOLUMN }\r\n                        }\r\n                    }\r\n                });\r\n                jnumericcolumns.map(items => {\r\n                    comboData.push({\r\n                        label: items.displayname[userInfo.slanguagetypecode],\r\n                        value: items.foriegntablePK,\r\n                        items: { ...items, stablename, sprimarykeyname, columntype: ColumnType.NUMERICCOLUMN }\r\n                    })\r\n                    if (items.default) {\r\n                        defaultColumn = {\r\n                            label: items.displayname[userInfo.slanguagetypecode],\r\n                            value: items.foriegntablePK,\r\n                            items: { ...items, stablename, sprimarykeyname, columntype: ColumnType.NUMERICCOLUMN }\r\n                        }\r\n                    }\r\n                });\r\n\r\n                let tableColumnList = [];\r\n                let tempdata = {};\r\n                if (type === \"column\") {\r\n                    tableColumnList = inputParam.foreignTableColumnList || [];\r\n                    tableColumnList[inputParam.index] = comboData\r\n                    tempdata = { foreignTableColumnList: tableColumnList };\r\n                } else {\r\n                    tableColumnList = inputParam.tableColumnList || [];\r\n                    tableColumnList[inputParam.index] = comboData;\r\n                    tempdata = { tableColumnList };\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        ...tempdata,\r\n                        selectedRecord: inputParam.selectedRecord\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getViewColumns(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/sqlquery/getdatabaseviewscolumns\", {\r\n            sviewname: inputParam.sviewname,\r\n            userinfo: inputParam.userinfo\r\n        })\r\n            .then(response => {\r\n\r\n                const userInfo = inputParam.userinfo;\r\n                let languageCode = userInfo.slanguagetypecode ? userInfo.slanguagetypecode : \"en-US\";\r\n                const responseData = response.data[\"viewColumnList\"] || [];\r\n                const jsonData = responseData[0] ? responseData[0].jsondata : [];\r\n                let defaultColumn = {};\r\n                let comboData = []\r\n                let selectFields = [];\r\n                jsonData[\"conditionfields\"].map(items => {\r\n                    comboData.push({\r\n                        label: items.displayname[languageCode],\r\n                        value: items.columnname,\r\n                        items\r\n                    })\r\n                    if (items.default) {\r\n                        defaultColumn = {\r\n                            label: items.displayname[languageCode],\r\n                            value: items.columnname,\r\n                            items\r\n                        }\r\n                    }\r\n                });\r\n                jsonData[\"selectfields\"].map(items => {\r\n                    selectFields.push({\r\n                        label: items.displayname[languageCode],\r\n                        value: items.columnname,\r\n                        items\r\n                    })\r\n                });\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        viewColumnList: comboData,\r\n                        selectFields,\r\n                        selectedRecord: inputParam.selectedRecord\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport function getMasterData(inputParam, viewMasterListByRule) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/sqlquery/getmasterdata\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n\r\n                // const optionId = inputParam.data.sforeigncolumnname;\r\n                const tableListMap = constructOptionList(response.data[\"masterdata\"] || [], inputParam.optionId, \"sdisplayname\", false, false, false);\r\n\r\n                let tempData = {};\r\n                // if(inputParam.data.nflag === 1) {\r\n                //     let masterdata = [];\r\n                //     masterdata[inputParam.index] = tableListMap.get(\"OptionList\");\r\n                //     tempData = { masterdata };\r\n                // } else {\r\n                // let viewMasterListByRule = [];\r\n                // viewMasterListByRule[inputParam.index] = tableListMap.get(\"OptionList\");\r\n                if (viewMasterListByRule === undefined) {\r\n                    viewMasterListByRule = [];\r\n                    viewMasterListByRule[inputParam.groupIndex] = [];\r\n                } else {\r\n                    viewMasterListByRule = { ...viewMasterListByRule };\r\n                }\r\n                if (viewMasterListByRule[inputParam.groupIndex]) {\r\n\r\n                } else {\r\n                    viewMasterListByRule[inputParam.groupIndex] = [];\r\n                }\r\n                viewMasterListByRule[inputParam.groupIndex][inputParam.index] = [];\r\n                viewMasterListByRule[inputParam.groupIndex][inputParam.index] = tableListMap.get(\"OptionList\");\r\n                tempData = { viewMasterListByRule };\r\n                // }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        selectedRecord: inputParam.selectedRecord,\r\n                        ...tempData\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport function createQueryBuilder(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/querybuilder/updateQueryBuilder\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n\r\n                        loading: false,\r\n                        openModal: false\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getParameterFromQuery(inputParam) {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n        let dataIndex = [];\r\n\r\n        const comboData = JSON.parse(inputParam.masterData.selectedQueryBuilder.sdefaultvalue.value);\r\n\r\n        comboData.sdefaultvalue.forEach((dataItem, index) => {\r\n            const tableData = dataItem.items;\r\n            const mastertablename = tableData.mastertablename;\r\n            if (dataItem.items.needmasterdata && mastertablename) {\r\n                const inputParamService = {\r\n                    userinfo: inputParam.userInfo,\r\n                    data: {\r\n                        nflag: 2,\r\n                        mastertablename,\r\n                        valuemember: tableData.valuemember,\r\n                        displaymember: tableData.displaymember,\r\n                    }\r\n                };\r\n                urlArray.push(rsapi.post(\"/sqlquery/getmasterdata\", {\r\n                    ...inputParamService\r\n                }))\r\n                dataIndex.push(index);\r\n\r\n            } else if (dataItem.items && dataItem.items.sforeigncolumnname !== undefined &&\r\n                dataItem.items.sforeigncolumnname !== \"\") {\r\n                const inputParamService = {\r\n                    data: { ...dataItem.items, nflag: 1 },\r\n                    userinfo: inputParam.userInfo\r\n                };\r\n                urlArray.push(rsapi.post(\"/sqlquery/getmasterdata\", {\r\n                    ...inputParamService\r\n                }))\r\n                dataIndex.push(index);\r\n\r\n            }\r\n\r\n            if (dataItem.items.columntype === ColumnType.DATATIME\r\n                || dataItem.items.columntype === ColumnType.DATE && dataItem.symbolObject.items.isInputVisible === true\r\n                && (dataItem.symbolObject.items.symbolType === 5 || dataItem.symbolObject.items.symbolType === 1)) {\r\n\r\n                dataItem.value = new Date(dataItem.value);\r\n            }\r\n\r\n        })\r\n\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(Axios.spread((...response) => {\r\n                let viewMasterData = [];\r\n                if (response !== null && response.length > 0) {\r\n                    response.forEach((item, ind) => {\r\n\r\n                        let valueMember = \"\";\r\n                        if (comboData.sdefaultvalue[dataIndex[ind]].items && comboData.sdefaultvalue[dataIndex[ind]].items.sforeigncolumnname !== undefined &&\r\n                            comboData.sdefaultvalue[dataIndex[ind]].items.sforeigncolumnname !== \"\") {\r\n\r\n                            valueMember = comboData.sdefaultvalue[dataIndex[ind]].items.sforeigncolumnname;\r\n                        } else {\r\n                            valueMember = comboData.sdefaultvalue[dataIndex[ind]].items.valuemember;\r\n                        }\r\n                        const tableListMap = constructOptionList(item.data[\"masterdata\"] || [], valueMember, \"sdisplayname\", false, false, false);\r\n                        viewMasterData[dataIndex[ind]] = tableListMap.get(\"OptionList\");\r\n                    })\r\n\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n\r\n                        viewMasterData,\r\n                        loading: false,\r\n                        openModal: true,\r\n                        comboData\r\n\r\n                    }\r\n                });\r\n            }))\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getSelectedQueryBuilder(inputParam, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/querybuilder/getSelectedQueryBuilder\",\r\n            { 'userinfo': userInfo, \"nQueryBuilderCode\": inputParam.nquerybuildercode })\r\n            .then(response => {\r\n\r\n                masterData = {\r\n                    ...masterData, selectedQueryBuilder: response.data[\"selectedQueryBuilder\"],\r\n                    queryDataMain: response.data[\"queryDataMain\"], columnList: response.data[\"columnList\"], queryTypeCode: inputParam.nquerytype\r\n                };\r\n                sortData(masterData);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function updateQueryBuilder(inputParam, inputData, masterData) {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n        let dataIndex = [];\r\n\r\n        dispatch(initRequest(true));\r\n\r\n        // urlArray.push(rsapi.post(\"/querybuilder/updateQueryBuilder\", {\r\n        //     ...inputData\r\n        // }))\r\n        urlArray.push(rsapi.post(\"/sqlquery/executequery\", {\r\n            ...inputParam\r\n        }))\r\n\r\n\r\n\r\n        Axios.all(urlArray)\r\n            .then(Axios.spread((...response) => {\r\n\r\n                masterData = { ...masterData, queryDataMain: response[0].data };\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        openModal: false,\r\n                        masterData\r\n                    }\r\n                });\r\n            }))\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getQueryBuilder(nqueryTypeCode, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/querybuilder/getQueryBuilder\",\r\n            { 'userinfo': userInfo, \"nqueryTypeCode\": nqueryTypeCode })\r\n            .then(response => {\r\n\r\n                masterData = {\r\n                    ...response.data\r\n                };\r\n                sortData(masterData);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}