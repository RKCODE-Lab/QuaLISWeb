{"ast":null,"code":"import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import*as React from'react';import*as ReactDOM from'react-dom';//import { displayDate, sampleData } from './events-utc';\nimport{Scheduler,TimelineView,DayView,WeekView,MonthView}from'@progress/kendo-react-scheduler';import{guid}from'@progress/kendo-react-common';import{connect}from'react-redux';import{toast}from'react-toastify';import{injectIntl,FormattedMessage}from'react-intl';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{callService,crudMaster,validateEsignCredential,updateStore,getGrapicalSchedulerDetail,filterColumnData}from'../../actions';import'./scheduler.css';import'@progress/kendo-date-math/tz/Asia/Kolkata';import'@progress/kendo-date-math/tz/Europe/Amsterdam';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var GraphicalScheduler=/*#__PURE__*/function(_React$Component){_inherits(GraphicalScheduler,_React$Component);var _super=_createSuper(GraphicalScheduler);function GraphicalScheduler(props){var _this;_classCallCheck(this,GraphicalScheduler);_this=_super.call(this,props);_this.handleDataChange=function(_ref){var created=_ref.created,updated=_ref.updated,deleted=_ref.deleted;var scheduleData={};var postParam=undefined;//this.state.data= this.props.Login.masterData.ScheduleData!==undefined?this.props.Login.masterData.ScheduleData:\"\";\n//   const aa= (old => (old) .concat(created.map(item => Object.assign({}, item, {\n//     id: guid()\n//   })))\n// )\nvar aa=created.concat(created.map(function(item){return Object.assign({},item,{id:guid()});}));var aa1=aa[0];//let data1=this.state.data;\n// if(updated.length>0)\n// {\n// const bb=updated.map(item => updated.find(current => current.id === item.id) || item);\n// let id=bb[0].TaskID;\n// }\nvar cc=deleted.filter(function(item){return deleted.find(function(current){return current.id===item.id;})||item.id;});if(aa.length>1){//scheduleData[\"grapicalschedulermaster\"][\"jsondata\"]=\"\";\n//scheduleData[\"grapicalschedulermaster\"][\"jsondata\"]=aa[1];\nscheduleData[\"graphicalschedulermaster\"]={\"jsondata\":aa[1]};var formRef={\"current\":\"form\"};var stitle=aa[1].title;var srule=aa[1].recurrenceRule;var stype=\"\";if(srule!==undefined&&srule!==null){stype=srule.substring(5,srule.indexOf(';'));}else{stype=\"NEVER\";}var saveType=1;var inputParam={classUrl:\"graphicalscheduler\",//this.props.Login.inputParam.classUrl,\nmethodUrl:\"GraphicalScheduler\",inputData:{scheduleData:scheduleData,stitle:stitle,sscheduletype:stype,userinfo:_this.props.Login.userInfo},//formData: formData,\n//isFileupload: true,\noperation:\"create\",saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch};var masterData=_this.props.Login.masterData;_this.props.crudMaster(inputParam,masterData,\"openModal\");//this.props.crudMaster(inputParam, masterData);\n}if(updated.length>0){var bb=updated.map(function(item){return updated.find(function(current){return current.id===item.id;})||item;});scheduleData[\"graphicalschedulermaster\"]={\"jsondata\":bb[0]};var _formRef={\"current\":\"form\"};var id=bb[0].taskID;var _stitle=bb[0].title;var _srule=bb[0].recurrenceRule;var _stype=\"\";if(_srule!==undefined&&_srule!==null){_stype=_srule.substring(5,_srule.indexOf(';'));}else{_stype=\"NEVER\";}var _saveType=2;var _inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"GraphicalScheduler\",inputData:{scheduleData:scheduleData,stitle:_stitle,sscheduletype:_stype,ntaskid:id,userinfo:_this.props.Login.userInfo},//formData: formData,\n//isFileupload: true,\noperation:\"update\",saveType:_saveType,formRef:_formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch};var _masterData=_this.props.Login.masterData;var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:_inputParam,masterData:_masterData},saveType:_saveType}};//this.props.updateStore(updateInfo);\n_this.props.crudMaster(_inputParam,_masterData,\"openModal\");}if(deleted.length>0){var _cc=deleted.filter(function(item){return deleted.find(function(current){return current.id===item.id;})||item.id;});//   scheduleData[\"grapicalschedulermaster\"] = {\n//     \"jsondata\": bb[0] \n// }\nvar _formRef2={\"current\":\"form\"};var _id=_cc[0].taskID;//let stitle=bb[0].title;\n//let srule=bb[0].recurrenceRule;\n//let stype=\"\";\n// if(srule!==undefined && srule!==null)\n// {\n// stype=srule.substring(5,srule.indexOf(';'));\n// }\n// else\n// {\n//   stype=\"NEVER\";\n// }\nvar _saveType2=2;var _inputParam2={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"GraphicalScheduler\",inputData:{userinfo:_this.props.Login.userInfo,ntaskid:_id},//formData: formData,\n//isFileupload: true,\noperation:\"delete\",saveType:_saveType2,formRef:_formRef2,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch};var _masterData2=_this.props.Login.masterData;var _updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:_inputParam2,masterData:_masterData2},saveType:_saveType2}};//this.props.updateStore(updateInfo);\n_this.props.crudMaster(_inputParam2,_masterData2,\"openModal\");}_this.setState(function(old){return{data:old.data// Filter the deleted items\n.filter(function(item){return deleted.find(function(current){return current.id===item.id;})===undefined;})// Find and replace the updated items\n.map(function(item){return updated.find(function(current){return current.id===item.id;})||item;})// Add the newly created items and assign an `id`.\n.concat(created.map(function(item){return Object.assign({},item,{id:guid()});}))};});//   this.props.Login.masterData.ScheduleData=this.state.data ;\n//   let datao=this.state.data;\n};_this.state={data:_this.props.Login.masterData.ScheduleData!==undefined?_this.props.Login.masterData.ScheduleData:\"\"};//     const currentYear = new Date().getFullYear();\n//   const parseAdjust = eventDate => {\n//     const date = new Date(eventDate);\n//     date.setFullYear(currentYear);\n//     return date;\n//   };\nvar displayDate=new Date(Date.UTC(currentYear,new Date().getMonth(),new Date().getDate()));return _this;}_createClass(GraphicalScheduler,[{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var data=[];if(this.props.Login.masterData.ScheduleData!==undefined){if(this.props.Login.masterData.ScheduleData!==previousProps.Login.masterData.ScheduleData){for(var i=0;i<this.props.Login.masterData.ScheduleData.length;i++){data.push(this.props.Login.masterData.ScheduleData[i].jsondata);}data=data.map(function(dataItem){return{id:dataItem.id,start:parseAdjust(dataItem.start),startTimezone:dataItem.startTimezone,end:parseAdjust(dataItem.end),endTimezone:dataItem.endTimezone,isAllDay:dataItem.isAllDay,title:dataItem.title,description:dataItem.description,recurrenceRule:dataItem.recurrenceRule,recurrenceId:dataItem.recurrenceID,recurrenceExceptions:dataItem.recurrenceException,roomId:dataItem.roomID,ownerID:dataItem.TaskId,personId:dataItem.TaskId,taskID:dataItem.TaskId};});this.setState({data:data});}}}},{key:\"render\",value:function render(){var displayDate=new Date(Date.UTC(currentYear,new Date().getMonth(),new Date().getDate()));//return <Scheduler data={this.state.data} onDataChange={this.handleDataChange} editable={{\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\"},/*#__PURE__*/React.createElement(Scheduler,{data:this.state.data,onDataChange:this.handleDataChange,editable:{add:true,remove:true,drag:true,resize:true,select:true,edit:true},defaultDate:displayDate},/*#__PURE__*/React.createElement(DayView,{numberOfDays:3,style:{zorder:25000}}),/*#__PURE__*/React.createElement(WeekView,null),/*#__PURE__*/React.createElement(MonthView,null)),\";\");}}]);return GraphicalScheduler;}(React.Component);//export default (GrapicalScheduler)\nexport default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,updateStore:updateStore,getGrapicalSchedulerDetail:getGrapicalSchedulerDetail,filterColumnData:filterColumnData})(injectIntl(GraphicalScheduler));export var currentYear=new Date().getFullYear();export var parseAdjust=function parseAdjust(eventDate){var date=new Date(eventDate);date.setFullYear(currentYear);return date;};","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-512/QuaLISWeb/src/pages/Scheduler/GraphicalScheduler.jsx"],"names":["React","ReactDOM","Scheduler","TimelineView","DayView","WeekView","MonthView","guid","connect","toast","injectIntl","FormattedMessage","DEFAULT_RETURN","callService","crudMaster","validateEsignCredential","updateStore","getGrapicalSchedulerDetail","filterColumnData","mapStateToProps","state","Login","GraphicalScheduler","props","handleDataChange","created","updated","deleted","scheduleData","postParam","undefined","aa","concat","map","item","Object","assign","id","aa1","cc","filter","find","current","length","formRef","stitle","title","srule","recurrenceRule","stype","substring","indexOf","saveType","inputParam","classUrl","methodUrl","inputData","sscheduletype","userinfo","userInfo","operation","searchRef","isClearSearch","masterData","bb","taskID","ntaskid","updateInfo","typeName","data","loadEsign","screenData","setState","old","ScheduleData","displayDate","Date","UTC","currentYear","getMonth","getDate","previousProps","i","push","jsondata","dataItem","start","parseAdjust","startTimezone","end","endTimezone","isAllDay","description","recurrenceId","recurrenceID","recurrenceExceptions","recurrenceException","roomId","roomID","ownerID","TaskId","personId","add","remove","drag","resize","select","edit","zorder","Component","getFullYear","eventDate","date","setFullYear"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\n//import { displayDate, sampleData } from './events-utc';\r\nimport { Scheduler, TimelineView, DayView,WeekView, MonthView } from '@progress/kendo-react-scheduler';\r\nimport { guid } from '@progress/kendo-react-common';\r\nimport { connect } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { injectIntl, FormattedMessage } from 'react-intl';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport {\r\n  callService, crudMaster, validateEsignCredential, updateStore, getGrapicalSchedulerDetail,filterColumnData\r\n} from '../../actions';\r\nimport './scheduler.css';\r\nimport '@progress/kendo-date-math/tz/Asia/Kolkata';\r\nimport '@progress/kendo-date-math/tz/Europe/Amsterdam';\r\nconst mapStateToProps = state => {\r\n  return ({ Login: state.Login })\r\n}\r\n\r\nclass GraphicalScheduler extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: this.props.Login.masterData.ScheduleData!==undefined?this.props.Login.masterData.ScheduleData:\"\"\r\n    };\r\n    \r\n//     const currentYear = new Date().getFullYear();\r\n  \r\n\r\n//   const parseAdjust = eventDate => {\r\n//     const date = new Date(eventDate);\r\n//     date.setFullYear(currentYear);\r\n//     return date;\r\n//   };\r\n    var displayDate = new Date(Date.UTC(currentYear, new Date().getMonth(), new Date().getDate()));\r\n\r\n  }\r\n\r\n  \r\n\r\n  componentDidUpdate(previousProps) {\r\n    let data=[];\r\n   \r\n    if(this.props.Login.masterData.ScheduleData!==undefined)\r\n    {\r\n      if (this.props.Login.masterData.ScheduleData !== previousProps.Login.masterData.ScheduleData) {\r\n    for(let i =0;i<this.props.Login.masterData.ScheduleData.length;i++)\r\n    {\r\n      data.push(this.props.Login.masterData.ScheduleData[i].jsondata);\r\n    }\r\n    \r\n  \r\n\r\n   data = data.map(dataItem => ({\r\n    id: dataItem.id,\r\n    start: parseAdjust(dataItem.start),\r\n    startTimezone: dataItem.startTimezone,\r\n    end: parseAdjust(dataItem.end),\r\n    endTimezone: dataItem.endTimezone,\r\n    isAllDay: dataItem.isAllDay,\r\n    title: dataItem.title,\r\n    description: dataItem.description,\r\n    recurrenceRule: dataItem.recurrenceRule,\r\n    recurrenceId: dataItem.recurrenceID,\r\n    recurrenceExceptions: dataItem.recurrenceException,\r\n    roomId: dataItem.roomID,\r\n    ownerID: dataItem.TaskId,\r\n    personId: dataItem.TaskId,\r\n    taskID:dataItem.TaskId\r\n  }))\r\n  this.setState({data});\r\n    }\r\n  }\r\n    \r\n  }\r\n  \r\n  handleDataChange = ({\r\n    created,\r\n    updated,\r\n    deleted\r\n  }) => {\r\n    let scheduleData = {};\r\n    let postParam = undefined;\r\n   //this.state.data= this.props.Login.masterData.ScheduleData!==undefined?this.props.Login.masterData.ScheduleData:\"\";\r\n  //   const aa= (old => (old) .concat(created.map(item => Object.assign({}, item, {\r\n  //     id: guid()\r\n  //   })))\r\n  // )\r\n   const aa= created.concat(created.map(item => Object.assign({}, item, {\r\n     id: guid()\r\n   })));\r\n   let aa1=aa[0];\r\n//let data1=this.state.data;\r\n// if(updated.length>0)\r\n// {\r\n// const bb=updated.map(item => updated.find(current => current.id === item.id) || item);\r\n// let id=bb[0].TaskID;\r\n// }\r\n  const cc=deleted.filter(item => deleted.find(current => current.id === item.id) ||item.id);\r\nif(aa.length>1)\r\n{\r\n  //scheduleData[\"grapicalschedulermaster\"][\"jsondata\"]=\"\";\r\n  //scheduleData[\"grapicalschedulermaster\"][\"jsondata\"]=aa[1];\r\n  scheduleData[\"graphicalschedulermaster\"] = {\r\n    \"jsondata\": aa[1] \r\n}\r\nlet formRef = {\r\n  \"current\": \"form\" \r\n}\r\nlet stitle=aa[1].title;\r\nlet srule=aa[1].recurrenceRule;\r\nlet stype=\"\";\r\nif(srule!==undefined && srule!==null)\r\n{\r\nstype=srule.substring(5,srule.indexOf(';'));\r\n}\r\nelse\r\n{\r\n  stype=\"NEVER\";\r\n}\r\nlet saveType=1;\r\n  const inputParam = {\r\n    classUrl: \"graphicalscheduler\",//this.props.Login.inputParam.classUrl,\r\n    methodUrl: \"GraphicalScheduler\",\r\n    inputData: {scheduleData,stitle:stitle,sscheduletype:stype, userinfo: this.props.Login.userInfo },\r\n    //formData: formData,\r\n    //isFileupload: true,\r\n    operation: \"create\",\r\n    saveType,formRef,postParam, searchRef: this.searchRef,\r\n    isClearSearch: this.props.Login.isClearSearch\r\n}\r\nconst masterData = this.props.Login.masterData;\r\nthis.props.crudMaster(inputParam, masterData, \"openModal\");\r\n//this.props.crudMaster(inputParam, masterData);\r\n\r\n}\r\nif(updated.length>0)\r\n{\r\n  const bb=updated.map(item => updated.find(current => current.id === item.id) || item);\r\n  scheduleData[\"graphicalschedulermaster\"] = {\r\n    \"jsondata\": bb[0] \r\n}\r\nlet formRef = {\r\n  \"current\": \"form\" \r\n}\r\nlet id=bb[0].taskID;\r\nlet stitle=bb[0].title;\r\nlet srule=bb[0].recurrenceRule;\r\nlet stype=\"\";\r\nif(srule!==undefined && srule!==null)\r\n{\r\nstype=srule.substring(5,srule.indexOf(';'));\r\n}\r\nelse\r\n{\r\n  stype=\"NEVER\";\r\n}\r\n  let saveType=2;\r\n  const inputParam = {\r\n    classUrl: this.props.Login.inputParam.classUrl,\r\n    methodUrl: \"GraphicalScheduler\",\r\n    inputData: {scheduleData,stitle:stitle,sscheduletype:stype,ntaskid:id, userinfo: this.props.Login.userInfo },\r\n    //formData: formData,\r\n    //isFileupload: true,\r\n    operation: \"update\",\r\n    saveType,formRef,postParam, searchRef: this.searchRef,\r\n    isClearSearch: this.props.Login.isClearSearch\r\n}\r\nconst masterData = this.props.Login.masterData;\r\n  const updateInfo = {\r\n    typeName: DEFAULT_RETURN,\r\n    data: {\r\n        loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n    }\r\n}\r\n//this.props.updateStore(updateInfo);\r\nthis.props.crudMaster(inputParam, masterData, \"openModal\");\r\n}\r\n\r\nif(deleted.length>0)\r\n{\r\n  const cc=deleted.filter(item => deleted.find(current => current.id === item.id) ||item.id);\r\n//   scheduleData[\"grapicalschedulermaster\"] = {\r\n//     \"jsondata\": bb[0] \r\n// }\r\nlet formRef = {\r\n  \"current\": \"form\" \r\n}\r\nlet id=cc[0].taskID;\r\n//let stitle=bb[0].title;\r\n//let srule=bb[0].recurrenceRule;\r\n//let stype=\"\";\r\n// if(srule!==undefined && srule!==null)\r\n// {\r\n// stype=srule.substring(5,srule.indexOf(';'));\r\n// }\r\n// else\r\n// {\r\n//   stype=\"NEVER\";\r\n// }\r\n  let saveType=2;\r\n  const inputParam = {\r\n    classUrl: this.props.Login.inputParam.classUrl,\r\n    methodUrl: \"GraphicalScheduler\",\r\n    inputData: {userinfo: this.props.Login.userInfo,ntaskid:id },\r\n    //formData: formData,\r\n    //isFileupload: true,\r\n    operation: \"delete\",\r\n    saveType,formRef,postParam, searchRef: this.searchRef,\r\n    isClearSearch: this.props.Login.isClearSearch\r\n}\r\nconst masterData = this.props.Login.masterData;\r\n  const updateInfo = {\r\n    typeName: DEFAULT_RETURN,\r\n    data: {\r\n        loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n    }\r\n}\r\n//this.props.updateStore(updateInfo);\r\nthis.props.crudMaster(inputParam, masterData, \"openModal\");\r\n}\r\n    this.setState(old => ({\r\n      data: old.data     // Filter the deleted items\r\n      .filter(item => deleted.find(current => current.id === item.id) === undefined) // Find and replace the updated items\r\n      .map(item => updated.find(current => current.id === item.id) || item) // Add the newly created items and assign an `id`.\r\n      .concat(created.map(item => Object.assign({}, item, {\r\n        id: guid()\r\n      })))\r\n    }));\r\n   \r\n      \r\n    //   this.props.Login.masterData.ScheduleData=this.state.data ;\r\n    //   let datao=this.state.data;\r\n  };\r\n\r\n  render() {\r\n    var displayDate = new Date(Date.UTC(currentYear, new Date().getMonth(), new Date().getDate()));\r\n    //return <Scheduler data={this.state.data} onDataChange={this.handleDataChange} editable={{\r\n      return (\r\n      \r\n      <div className=\"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\">\r\n      \r\n      <Scheduler  data={this.state.data} onDataChange={this.handleDataChange} editable={{\r\n      add: true,\r\n      remove: true,\r\n      drag: true,\r\n      resize: true,\r\n      select: true,\r\n      edit: true\r\n    }} defaultDate={displayDate}>\r\n          {/* <TimelineView /> */}\r\n          <DayView numberOfDays={3} style={{zorder:25000}}/>\r\n          <WeekView />\r\n          <MonthView />\r\n        </Scheduler>;\r\n        </div>\r\n        \r\n      )\r\n  }\r\n\r\n}\r\n//export default (GrapicalScheduler)\r\nexport default connect(mapStateToProps, {\r\n  callService, crudMaster, validateEsignCredential,\r\n  updateStore, getGrapicalSchedulerDetail, filterColumnData\r\n})(injectIntl(GraphicalScheduler));\r\nexport const currentYear = new Date().getFullYear();\r\nexport const parseAdjust = eventDate => {\r\n  const date = new Date(eventDate);\r\n  date.setFullYear(currentYear);\r\n  return date;\r\n};"]},"metadata":{},"sourceType":"module"}