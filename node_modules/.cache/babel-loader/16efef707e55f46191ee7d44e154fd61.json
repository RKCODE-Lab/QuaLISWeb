{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{constructjsonOptionList,constructOptionList,getComboLabelValue}from'../components/CommonScript';import{toast}from'react-toastify';import Axios from'axios';import{initRequest}from'./LoginAction';import{intl}from'../components/App';//export function getMethodComboService (screenName, primaryKeyName, primaryKeyValue, operation, inputParam , userInfo, ncontrolCode) {            \nexport function getMaterialTypeComboService(methodParam){return function(dispatch){var methodTypeService=rsapi.post(\"materialcategory/getMaterialType\",{userinfo:methodParam.userInfo});var barcodeService=rsapi.post(\"barcode/getBarcode\",{userinfo:methodParam.userInfo});var urlArray=[];var selectedId=null;if(methodParam.operation===\"create\"){urlArray=[methodTypeService,barcodeService];}else{var _rsapi$post;var url=methodParam.inputParam.classUrl+\"/getActive\"+methodParam.inputParam.methodUrl+\"ById\";//\"method/getActiveMethodById\"      \nvar methodById=rsapi.post(url,(_rsapi$post={},_defineProperty(_rsapi$post,methodParam.primaryKeyField,methodParam.primaryKeyValue),_defineProperty(_rsapi$post,\"userinfo\",methodParam.userInfo),_rsapi$post));urlArray=[methodTypeService,barcodeService,methodById];selectedId=methodParam.primaryKeyValue;}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var selectedRecord={};var materialCatgeoryList=constructjsonOptionList(response[0].data,\"nmaterialtypecode\",\"smaterialtypename\",undefined,undefined,undefined,undefined,undefined,true,methodParam.userInfo.slanguagetypecode);var barcodeList=constructOptionList(response[1].data,\"nbarcode\",\"sbarcodename\",undefined,undefined,undefined,undefined,undefined,true,methodParam.userInfo.slanguagetypecode);// const materialCatgeoryList = constructOptionList(response[0].data  ||[], \"nmaterialtypecode\",\n// \"smaterialtypename\" , undefined, undefined, undefined);\nvar materialCatgeoryList1=materialCatgeoryList.get(\"OptionList\");var barcodeList1=barcodeList.get(\"OptionList\");var materialCatgeorydefault=materialCatgeoryList.get(\"DefaultValue\");if(methodParam.operation===\"update\"){selectedRecord=response[2].data;selectedRecord[\"nmaterialtypecode\"]=getComboLabelValue(selectedRecord,response[0].data,\"nmaterialtypecode\",\"smaterialtypename\",'jsondata',methodParam.userInfo.slanguagetypecode);selectedRecord[\"nbarcode\"]=getComboLabelValue(selectedRecord,response[1].data,\"nbarcode\",\"sbarcodename\",'jsondata',methodParam.userInfo.slanguagetypecode);}else{selectedRecord[\"nmaterialtypecode\"]=materialCatgeorydefault;}dispatch({type:DEFAULT_RETURN,payload:{materialCatgeoryList:materialCatgeoryList1||[],barcodeList:barcodeList1||[],operation:methodParam.operation,screenName:methodParam.screenName,selectedRecord:selectedRecord,openModal:true,ncontrolCode:methodParam.ncontrolCode,loading:false,selectedId:selectedId,needSectionwisedisabled:selectedRecord.needSectionwisedisabled}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/MaterialCategoryAction.js"],"names":["rsapi","DEFAULT_RETURN","constructjsonOptionList","constructOptionList","getComboLabelValue","toast","Axios","initRequest","intl","getMaterialTypeComboService","methodParam","dispatch","methodTypeService","post","userinfo","userInfo","barcodeService","urlArray","selectedId","operation","url","inputParam","classUrl","methodUrl","methodById","primaryKeyField","primaryKeyValue","all","then","response","selectedRecord","materialCatgeoryList","data","undefined","slanguagetypecode","barcodeList","materialCatgeoryList1","get","barcodeList1","materialCatgeorydefault","type","payload","screenName","openModal","ncontrolCode","loading","needSectionwisedisabled","catch","error","status","formatMessage","id","message","warn"],"mappings":"oKAAA,MAAOA,CAAAA,KAAP,KAAkB,UAAlB,CACA,OAASC,cAAT,KAA+B,cAA/B,CACA,OAASC,uBAAT,CAAkCC,mBAAlC,CAAuDC,kBAAvD,KAAiF,4BAAjF,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,OAASC,IAAT,KAAqB,mBAArB,CAEA;AACA,MAAO,SAASC,CAAAA,2BAAT,CAAqCC,WAArC,CAAkD,CACrD,MAAO,UAAUC,QAAV,CAAoB,CACvB,GAAMC,CAAAA,iBAAiB,CAAGZ,KAAK,CAACa,IAAN,CAAW,kCAAX,CACtB,CAAEC,QAAQ,CAAEJ,WAAW,CAACK,QAAxB,CADsB,CAA1B,CAEA,GAAMC,CAAAA,cAAc,CAAGhB,KAAK,CAACa,IAAN,CAAW,oBAAX,CACnB,CAAEC,QAAQ,CAAEJ,WAAW,CAACK,QAAxB,CADmB,CAAvB,CAEA,GAAIE,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,UAAU,CAAG,IAAjB,CACA,GAAIR,WAAW,CAACS,SAAZ,GAA0B,QAA9B,CAAwC,CACpCF,QAAQ,CAAG,CAACL,iBAAD,CAAmBI,cAAnB,CAAX,CACH,CAFD,IAGK,iBACD,GAAMI,CAAAA,GAAG,CAAGV,WAAW,CAACW,UAAZ,CAAuBC,QAAvB,CAAkC,YAAlC,CAAiDZ,WAAW,CAACW,UAAZ,CAAuBE,SAAxE,CAAoF,MAAhG,CAA0G;AAC1G,GAAMC,CAAAA,UAAU,CAAGxB,KAAK,CAACa,IAAN,CAAWO,GAAX,6CAAmBV,WAAW,CAACe,eAA/B,CAAiDf,WAAW,CAACgB,eAA7D,8BAA8E,UAA9E,CAA0FhB,WAAW,CAACK,QAAtG,eAAnB,CACAE,QAAQ,CAAG,CAACL,iBAAD,CAAmBI,cAAnB,CAAmCQ,UAAnC,CAAX,CACAN,UAAU,CAAGR,WAAW,CAACgB,eAAzB,CACH,CACDf,QAAQ,CAACJ,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAD,KAAK,CAACqB,GAAN,CAAUV,QAAV,EACKW,IADL,CACU,SAAAC,QAAQ,CAAI,CAEd,GAAIC,CAAAA,cAAc,CAAG,EAArB,CAEA,GAAMC,CAAAA,oBAAoB,CAAG7B,uBAAuB,CAAC2B,QAAQ,CAAC,CAAD,CAAR,CAAYG,IAAb,CAChD,mBADgD,CAC3B,mBAD2B,CACNC,SADM,CACKA,SADL,CAEhDA,SAFgD,CAErCA,SAFqC,CAGhDA,SAHgD,CAGrC,IAHqC,CAG/BvB,WAAW,CAACK,QAAZ,CAAqBmB,iBAHU,CAApD,CAII,GAAMC,CAAAA,WAAW,CAAGhC,mBAAmB,CAAC0B,QAAQ,CAAC,CAAD,CAAR,CAAYG,IAAb,CACnC,UADmC,CACvB,cADuB,CACPC,SADO,CACIA,SADJ,CAEnCA,SAFmC,CAExBA,SAFwB,CAGnCA,SAHmC,CAGxB,IAHwB,CAGlBvB,WAAW,CAACK,QAAZ,CAAqBmB,iBAHH,CAAvC,CAKJ;AACA;AACA,GAAME,CAAAA,qBAAqB,CAAGL,oBAAoB,CAACM,GAArB,CAAyB,YAAzB,CAA9B,CACA,GAAMC,CAAAA,YAAY,CAAGH,WAAW,CAACE,GAAZ,CAAgB,YAAhB,CAArB,CACA,GAAME,CAAAA,uBAAuB,CAAGR,oBAAoB,CAACM,GAArB,CAAyB,cAAzB,CAAhC,CAGA,GAAI3B,WAAW,CAACS,SAAZ,GAA0B,QAA9B,CAAwC,CACrCW,cAAc,CAAGD,QAAQ,CAAC,CAAD,CAAR,CAAYG,IAA7B,CACCF,cAAc,CAAC,mBAAD,CAAd,CAAsC1B,kBAAkB,CAAC0B,cAAD,CAAiBD,QAAQ,CAAC,CAAD,CAAR,CAAYG,IAA7B,CACpD,mBADoD,CAC/B,mBAD+B,CACV,UADU,CACEtB,WAAW,CAACK,QAAZ,CAAqBmB,iBADvB,CAAxD,CAEIJ,cAAc,CAAC,UAAD,CAAd,CAA6B1B,kBAAkB,CAAC0B,cAAD,CAAiBD,QAAQ,CAAC,CAAD,CAAR,CAAYG,IAA7B,CAC3C,UAD2C,CAC/B,cAD+B,CACf,UADe,CACHtB,WAAW,CAACK,QAAZ,CAAqBmB,iBADlB,CAA/C,CAGP,CAPD,IAOO,CACHJ,cAAc,CAAC,mBAAD,CAAd,CAAsCS,uBAAtC,CACH,CAED5B,QAAQ,CAAC,CACL6B,IAAI,CAAEvC,cADD,CACiBwC,OAAO,CAAE,CAC3BV,oBAAoB,CAAEK,qBAAqB,EAAI,EADpB,CAE3BD,WAAW,CAACG,YAAY,EAAI,EAFD,CAG3BnB,SAAS,CAAET,WAAW,CAACS,SAHI,CAGOuB,UAAU,CAAEhC,WAAW,CAACgC,UAH/B,CAG2CZ,cAAc,CAAdA,cAH3C,CAI3Ba,SAAS,CAAE,IAJgB,CAK3BC,YAAY,CAAElC,WAAW,CAACkC,YALC,CAM3BC,OAAO,CAAE,KANkB,CAMX3B,UAAU,CAAVA,UANW,CAO3B4B,uBAAuB,CAAEhB,cAAc,CAACgB,uBAPb,CAD1B,CAAD,CAAR,CAWH,CA3CL,EA4CKC,KA5CL,CA4CW,SAAAC,KAAK,CAAI,CACZrC,QAAQ,CAAC,CAAE6B,IAAI,CAAEvC,cAAR,CAAwBwC,OAAO,CAAE,CAAEI,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIG,KAAK,CAACnB,QAAN,CAAeoB,MAAf,GAA0B,GAA9B,CAAmC,CAC/B5C,KAAK,CAAC2C,KAAN,CAAYxC,IAAI,CAAC0C,aAAL,CAAmB,CAAEC,EAAE,CAAEH,KAAK,CAACI,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CACD/C,KAAK,CAACgD,IAAN,CAAW7C,IAAI,CAAC0C,aAAL,CAAmB,CAAEC,EAAE,CAAEH,KAAK,CAACnB,QAAN,CAAeG,IAArB,CAAnB,CAAX,EACH,CACJ,CApDL,EAqDH,CAtED,CAuEH","sourcesContent":["import rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { constructjsonOptionList, constructOptionList, getComboLabelValue } from '../components/CommonScript'\r\nimport { toast } from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\n\r\n//export function getMethodComboService (screenName, primaryKeyName, primaryKeyValue, operation, inputParam , userInfo, ncontrolCode) {            \r\nexport function getMaterialTypeComboService(methodParam) {\r\n    return function (dispatch) {\r\n        const methodTypeService = rsapi.post(\"materialcategory/getMaterialType\",\r\n            { userinfo: methodParam.userInfo });\r\n        const barcodeService = rsapi.post(\"barcode/getBarcode\",\r\n            { userinfo: methodParam.userInfo });\r\n        let urlArray = [];\r\n        let selectedId = null;\r\n        if (methodParam.operation === \"create\") {\r\n            urlArray = [methodTypeService,barcodeService];\r\n        }\r\n        else {\r\n            const url = methodParam.inputParam.classUrl + \"/getActive\" + methodParam.inputParam.methodUrl + \"ById\";   //\"method/getActiveMethodById\"      \r\n            const methodById = rsapi.post(url, { [methodParam.primaryKeyField]: methodParam.primaryKeyValue, \"userinfo\": methodParam.userInfo });\r\n            urlArray = [methodTypeService,barcodeService, methodById];\r\n            selectedId = methodParam.primaryKeyValue;\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n\r\n                let selectedRecord = {};\r\n\r\n                const materialCatgeoryList = constructjsonOptionList(response[0].data,\r\n                    \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined,\r\n                    undefined, undefined,\r\n                    undefined, true, methodParam.userInfo.slanguagetypecode)\r\n                    const barcodeList = constructOptionList(response[1].data,\r\n                        \"nbarcode\", \"sbarcodename\", undefined, undefined,\r\n                        undefined, undefined,\r\n                        undefined, true, methodParam.userInfo.slanguagetypecode)\r\n\r\n                // const materialCatgeoryList = constructOptionList(response[0].data  ||[], \"nmaterialtypecode\",\r\n                // \"smaterialtypename\" , undefined, undefined, undefined);\r\n                const materialCatgeoryList1 = materialCatgeoryList.get(\"OptionList\");\r\n                const barcodeList1 = barcodeList.get(\"OptionList\");\r\n                const materialCatgeorydefault = materialCatgeoryList.get(\"DefaultValue\");\r\n\r\n\r\n                if (methodParam.operation === \"update\") {\r\n                   selectedRecord = response[2].data; \r\n                    selectedRecord[\"nmaterialtypecode\"] = getComboLabelValue(selectedRecord, response[0].data,\r\n                        \"nmaterialtypecode\", \"smaterialtypename\", 'jsondata', methodParam.userInfo.slanguagetypecode);\r\n                        selectedRecord[\"nbarcode\"] = getComboLabelValue(selectedRecord, response[1].data,\r\n                            \"nbarcode\", \"sbarcodename\", 'jsondata', methodParam.userInfo.slanguagetypecode);\r\n\r\n                } else {\r\n                    selectedRecord[\"nmaterialtypecode\"] = materialCatgeorydefault;\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        materialCatgeoryList: materialCatgeoryList1 || [],\r\n                        barcodeList:barcodeList1 || [],\r\n                        operation: methodParam.operation, screenName: methodParam.screenName, selectedRecord,\r\n                        openModal: true,\r\n                        ncontrolCode: methodParam.ncontrolCode,\r\n                        loading: false, selectedId,\r\n                        needSectionwisedisabled: selectedRecord.needSectionwisedisabled\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}