{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{toast}from'react-toastify';import{injectIntl,FormattedMessage}from'react-intl';import{Row,Col,Card,Nav,FormGroup,FormLabel}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faCopy,faPencilAlt,faThumbsUp,faTrashAlt,faPlus}from'@fortawesome/free-solid-svg-icons';import DataGrid from'../../components/data-grid/data-grid.component';import{callService,crudMaster,validateEsignCredential,updateStore,filterColumnData,getEditTestPriceVersionService,getTestPriceVersionDetail,getPricingAddTestService,getPricingEditService}from'../../actions';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,getControlMap}from'../../components/CommonScript';import{process}from'@progress/kendo-data-query';import{transactionStatus}from'../../components/Enumeration';import ListMaster from'../../components/list-master/list-master.component';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import{ReadOnlyText,ContentPanel}from'../../components/App.styles';import AddType1Component from'../../components/type1component/AddType1Component';//import AddUser from './AddUser';\n//import UserTabs from './UserTabs';\nimport Esign from'../audittrail/Esign';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import AddPricingTest from'./AddPricingTest';import EditTestPricing from'./EditTestPricing';import{isText}from'domhandler';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var TestMasterPricing=/*#__PURE__*/function(_React$Component){_inherits(TestMasterPricing,_React$Component);var _super=_createSuper(TestMasterPricing);function TestMasterPricing(props){var _this;_classCallCheck(this,TestMasterPricing);_this=_super.call(this,props);_this.sidebarExpandCollapse=function(){_this.setState({sidebarview:true});};_this.openModal=function(inputParam){var updateInfo={typeName:DEFAULT_RETURN,data:{selectedRecord:{},operation:inputParam.operation,ncontrolCode:inputParam.ncontrolcode,selectedId:null,openModal:true,screenName:_this.props.intl.formatMessage({id:'IDS_TESTPRICEVERSION'})}};_this.props.updateStore(updateInfo);};_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.data,event.dataState),priceDataState:event.dataState});};_this.confirmDelete=function(deleteId){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.deleteOrApproveTestPriceVersion(\"TestPriceVersion\",_this.props.Login.masterData.SelectedTestPriceVersion,\"delete\",deleteId);});};_this.deleteTestPrice=function(deleteParam){var postParam={inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\",primaryKeyField:\"npriceversioncode\"};var inputParam={classUrl:\"testpricing\",methodUrl:\"TestPrice\",postParam:postParam,//displayName: ,\ninputData:{\"testprice\":deleteParam.selectedRecord,//.dataItem,\n\"npriceversioncode\":_this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode,\"userinfo\":_this.props.Login.userInfo//postParam \n},operation:\"delete\",priceDataState:_this.state.priceDataState,selectedRecord:_objectSpread({},_this.state.selectedRecord)};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:\"IDS_TESTPRICE\"}),operation:deleteParam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;var selectedId=_this.props.Login.selectedId;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"||_this.props.Login.operation===\"approve\"){loadEsign=false;openModal=false;selectedRecord={};selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}}else{openModal=false;selectedRecord={};selectedId=null;}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:selectedId}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});};_this.onNumericInputOnChange=function(value,name){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,primaryFieldKey){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;else selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{if(primaryFieldKey&&event.target.name===\"ncost\"){var index=selectedRecord.findIndex(function(item){return item.ntestpricedetailcode===primaryFieldKey;});if(/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){selectedRecord[index][\"ncost\"]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){var versionData=[];versionData[\"userinfo\"]=_this.props.Login.userInfo;var postParam=undefined;if(_this.props.Login.operation===\"update\"){// edit\npostParam={inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\",primaryKeyField:\"npriceversioncode\"};versionData[\"testpriceversion\"]=JSON.parse(JSON.stringify(_this.props.Login.selectedRecord));versionData[\"sversionname\"]=_this.state.selectedRecord[\"sversionname\"]||\"\";versionData[\"sdescription\"]=_this.state.selectedRecord[\"sdescription\"]||\"\";}else{//add               \nversionData[\"testpriceversion\"]={\"nsitecode\":_this.props.Login.userInfo.nmastersitecode,\"ntransactionstatus\":transactionStatus.DRAFT,\"sversionname\":_this.state.selectedRecord[\"sversionname\"]||\"\",\"sdescription\":_this.state.selectedRecord[\"sdescription\"]||\"\"};if(_this.props.Login.operation===\"copy\"){versionData[\"testpriceversion\"][\"npriceversioncode\"]=_this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode;}}if(versionData[\"testpriceversion\"].hasOwnProperty('esignpassword')){if(versionData[\"testpriceversion\"]['esignpassword']===''){delete versionData[\"testpriceversion\"]['esigncomments'];delete versionData[\"testpriceversion\"]['esignpassword'];}}var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"TestPriceVersion\",inputData:versionData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch,selectedRecord:_objectSpread({},_this.state.selectedRecord)};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.onSaveTestPrice=function(saveType,formRef){// console.log(\"this.props.Login.selectedRecord:\", this.props.Login.selectedRecord);\nvar testPriceData={\"userinfo\":_this.props.Login.userInfo,\"testpriceversion\":_this.props.Login.masterData.SelectedTestPriceVersion,\"npriceversioncode\":_this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode};var postParam=undefined;var priceDataState=undefined;var selectedId=null;if(_this.props.Login.operation===\"update\"){// edit\npriceDataState=_this.state.priceDataState;selectedId=_this.props.Login.selectedId;postParam={inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\",primaryKeyField:\"npriceversioncode\"};testPriceData[\"testpricelist\"]=JSON.parse(JSON.stringify(_this.props.Login.selectedRecord));}else{//add               \nvar priceList=[];_this.state.selectedRecord[\"ntestcode\"]&&_this.state.selectedRecord[\"ntestcode\"].map(function(item){return priceList.push({ntestcode:item.value});});testPriceData[\"testpricelist\"]=priceList;}if(testPriceData[\"testpriceversion\"].hasOwnProperty('esignpassword')){if(testPriceData[\"testpriceversion\"]['esignpassword']===''){delete testPriceData[\"testpriceversion\"]['esigncomments'];delete testPriceData[\"testpriceversion\"]['esignpassword'];delete testPriceData[\"testpriceversion\"][\"agree\"];}}//console.log(\"update data:\", testPriceData);\nvar inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"TestPrice\",inputData:testPriceData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch,selectedId:selectedId,priceDataState:priceDataState,selectedRecord:_objectSpread({},_this.state.selectedRecord)};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.deleteOrApproveTestPriceVersion=function(methodUrl,SelectedTestPriceVersion,operation,ncontrolCode){if(SelectedTestPriceVersion.ntransactionstatus===transactionStatus.DRAFT){var postParam={inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\",primaryKeyField:\"npriceversioncode\",primaryKeyValue:SelectedTestPriceVersion.npriceversioncode,fetchUrl:\"testpricing/getTestPriceVersion\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:methodUrl,postParam:postParam,inputData:{\"userinfo\":_this.props.Login.userInfo,\"testpriceversion\":SelectedTestPriceVersion},operation:operation,isClearSearch:_this.props.Login.isClearSearch,selectedRecord:_objectSpread({},_this.state.selectedRecord)};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"IDS_TESTPRICEVERSION\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDRAFTTESTPRICEVERSION\"}));}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputParam={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:\"testpricing\",methodUrl:\"TestPriceVersion\",displayName:\"IDS_TESTPRICEVERSION\",userInfo:_this.props.Login.userInfo,isClearSearch:_this.props.Login.isClearSearch};_this.props.callService(inputParam);};var _priceDataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={masterStatus:\"\",error:\"\",selectedRecord:{},operation:\"\",SelectedTestPriceVersion:undefined,screenName:undefined,userRoleControlRights:[],controlMap:new Map(),isClearSearch:false,data:[],dataResult:[],priceDataState:_priceDataState,sidebarview:false};_this.searchRef=React.createRef();// this.emailRef = React.createRef();\n_this.confirmMessage=new ConfirmMessage();// this.versionFieldList = ['sversionname', 'sdescription'];\n_this.versionFieldList=[{\"idsName\":\"IDS_VERSIONNAME\",\"dataField\":\"sversionname\",\"width\":\"200px\",\"fieldLength\":\"100\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"200px\",\"fieldLength\":\"255\",\"mandatory\":false,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textarea\"}];_this.extractedColumnList=[{\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestname\",\"width\":\"200px\"},{\"idsName\":\"IDS_COST\",\"dataField\":\"ncost\",\"width\":\"200px\"}];_this.mandatoryFields=[{\"idsName\":\"IDS_VERSIONNAME\",\"dataField\":\"sversionname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];_this.mandatoryTestFields=[{\"idsName\":\"IDS_TEST\",\"dataField\":\"ntestcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];_this.searchFieldList=[\"sversionname\",\"sversionno\",\"sdescription\",\"sversionstatus\"];return _this;}_createClass(TestMasterPricing,[{key:\"render\",value:function render(){var _this2=this;var versionStatusCSS=\"outline-secondary\";var activeIconCSS=\"fa fa-check\";if(this.props.Login.masterData.SelectedTestPriceVersion&&this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus===transactionStatus.APPROVED){versionStatusCSS=\"outline-success\";}else if(this.props.Login.masterData.SelectedTestPriceVersion&&this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus===transactionStatus.RETIRED){versionStatusCSS=\"outline-danger\";activeIconCSS=\"\";}else if(this.props.Login.masterData.SelectedTestPriceVersion&&this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus===transactionStatus.DRAFT){activeIconCSS=\"\";}var addId=this.state.controlMap.has(\"AddTestPriceVersion\")&&this.state.controlMap.get(\"AddTestPriceVersion\").ncontrolcode;var editId=this.state.controlMap.has(\"EditTestPriceVersion\")&&this.state.controlMap.get(\"EditTestPriceVersion\").ncontrolcode;var deleteId=this.state.controlMap.has(\"DeleteTestPriceVersion\")&&this.state.controlMap.get(\"DeleteTestPriceVersion\").ncontrolcode;var approveId=this.state.controlMap.has(\"ApproveTestPriceVersion\")&&this.state.controlMap.get(\"ApproveTestPriceVersion\").ncontrolcode;var copyId=this.state.controlMap.has(\"CopyTestPriceVersion\")&&this.state.controlMap.get(\"CopyTestPriceVersion\").ncontrolcode;var addPriceId=this.state.controlMap.has(\"AddTestPrice\")&&this.state.controlMap.get(\"AddTestPrice\").ncontrolcode;var updatePriceId=this.state.controlMap.has(\"EditTestPrice\")&&this.state.controlMap.get(\"EditTestPrice\").ncontrolcode;// const deletePriceId = this.state.controlMap.has(\"DeleteTestPrice\") && this.state.controlMap.get(\"DeleteTestPrice\").ncontrolcode;\nvar filterParam={inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\",primaryKeyField:\"npriceversioncode\",fetchUrl:\"testpricing/getTestPriceVersion\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,searchFieldList:this.searchFieldList};var addParam={screenName:\"IDS_TESTMASTERPRICING\",operation:\"create\",primaryKeyName:\"npriceversioncode\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolcode:addId};var editParam={screenName:this.props.intl.formatMessage({id:'IDS_TESTPRICEVERSION'}),operation:\"update\",primaryKeyName:\"npriceversioncode\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolcode:editId,inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\"};var copyParam={screenName:\"IDS_TESTMASTERPRICING\",operation:\"copy\",primaryKeyName:\"npriceversioncode\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolcode:copyId};var editTestPriceParam={screenName:\"IDS_PRICE\",\"operation\":\"update\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolCode:updatePriceId};//console.log(\"props:\", this.props.Login.masterData.TestPriceVersion);\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:\"\".concat(!this.state.sidebarview?'4':\"2\")},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this2.setState({sidebarview:!_this2.state.sidebarview});},className:\"sidebar-view-btn\"},!this.state.sidebarview?/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-less-than\"}):/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-greater-than\"})),/*#__PURE__*/React.createElement(ListMaster,{screenName:this.props.intl.formatMessage({id:\"IDS_TESTMASTERPRICING\"}),masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.TestPriceVersion,getMasterDetail:function getMasterDetail(testPriceVersion){return _this2.props.getTestPriceVersionDetail(testPriceVersion,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:this.props.Login.masterData.SelectedTestPriceVersion,primaryKeyField:\"npriceversioncode\",mainField:\"sversionname\",firstField:\"sversionno\",secondField:\"sversionstatus\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData,openModal:function openModal(){return _this2.openModal(addParam);},isMultiSelecct:false,hidePaging:false,isClearSearch:this.props.Login.isClearSearch})),/*#__PURE__*/React.createElement(Col,{md:\"\".concat(!this.state.sidebarview?'8':\"10\")},/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},this.props.Login.masterData.TestPriceVersion&&this.props.Login.masterData.TestPriceVersion.length>0&&this.props.Login.masterData.SelectedTestPriceVersion?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},this.props.Login.masterData.SelectedTestPriceVersion.sversionname),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-outlined \".concat(versionStatusCSS,\" btn-sm ml-3\")},activeIconCSS!==\"\"?/*#__PURE__*/React.createElement(\"i\",{class:activeIconCSS}):\"\",this.props.Login.masterData.SelectedTestPriceVersion.sversionstatus)),/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"editTestPriceVersion\",hidden:this.state.userRoleControlRights.indexOf(editId)===-1,className:\"btn btn-circle outline-grey mr-2\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_EDIT\"})//data-for=\"tooltip_list_wrap\"\n,onClick:function onClick(){return _this2.props.getEditTestPriceVersionService(editParam);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"deleteTestPriceVersion\",className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"})// data-for=\"tooltip_list_wrap\"\n,hidden:this.state.userRoleControlRights.indexOf(deleteId)===-1,onClick:function onClick(){return _this2.confirmDelete(deleteId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"approveTestPriceVersion\",className:\"btn btn-circle outline-grey mr-2\",hidden:this.state.userRoleControlRights.indexOf(approveId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_APPROVE\"})//data-for=\"tooltip_list_wrap\"\n,onClick:function onClick(){return _this2.deleteOrApproveTestPriceVersion(\"TestPriceVersion\",_this2.props.Login.masterData.SelectedTestPriceVersion,\"approve\",approveId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faThumbsUp})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"copyTestPriceVersion\",className:\"btn btn-circle outline-grey mr-2\",hidden:this.state.userRoleControlRights.indexOf(approveId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_COPY\"}),onClick:function onClick(){return _this2.openModal(copyParam);}// onClick={() => this.copyTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion,\n//     \"copy\", approveId)}\n},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faCopy})))))),/*#__PURE__*/React.createElement(Card.Body,{className:\"form-static-wrap\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_DESCRIPTION\",message:\"Description\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.SelectedTestPriceVersion.sdescription)))),/*#__PURE__*/React.createElement(Card,{className:\"at-tabs border-0\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"addPrice\",className:\"add-txt-btn\",hidden:this.state.userRoleControlRights.indexOf(addPriceId)===-1,onClick:function onClick(){return _this2.props.getPricingAddTestService(\"IDS_TEST\",\"create\",_this2.props.Login.masterData,_this2.props.Login.userInfo,addPriceId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_TEST\",defaultMessage:\"Test\"})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"updatePrice\",className:\"add-txt-btn\",hidden:this.state.userRoleControlRights.indexOf(updatePriceId)===-1,onClick:function onClick(){return _this2.props.getPricingEditService(_objectSpread(_objectSpread({},editTestPriceParam),{},{\"updateType\":\"All\",priceDataState:undefined}));}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_PRICE\",defaultMessage:\"Price\"}))))),/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:\"ntestpricedetailcode\",data:this.state.data,dataResult:this.state.dataResult,dataState:this.state.priceDataState,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList,controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,fetchRecord:this.props.getPricingEditService,editParam:_objectSpread(_objectSpread({},editTestPriceParam),{},{\"updateType\":\"Single\",priceDataState:this.state.priceDataState}),deleteRecord:this.deleteTestPrice,deleteParam:{operation:\"delete\"},methodUrl:\"TestPrice\"// reloadData={this.reloadData}\n,addRecord:function addRecord(){return _this2.openModal(addId);},pageable:true,scrollable:'scrollable'// gridHeight = {'600px'}\n,isActionRequired:true,isToolBarRequired:false,selectedId:this.props.Login.selectedId})))))):\"\"))))),this.props.Login.openModal?/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.props.Login.screenName===\"IDS_TEST\"||this.props.Login.screenName===\"IDS_PRICE\"?this.onSaveTestPrice:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:this.props.Login.screenName===\"IDS_TEST\"||this.props.Login.screenName===\"IDS_PRICE\"?this.props.Login.operation===\"update\"?[]:this.mandatoryTestFields:this.mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.screenName===\"IDS_TEST\"||this.props.Login.screenName===\"IDS_PRICE\"?this.props.Login.operation===\"update\"?/*#__PURE__*/React.createElement(EditTestPricing,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onFocus:this.handleFocus//testPriceList={this.props.Login.testPriceList || []}\n}):/*#__PURE__*/React.createElement(AddPricingTest,{selectedRecord:this.state.selectedRecord||{},onComboChange:this.onComboChange,pricingTestList:this.props.Login.pricingTestList||[]}):/*#__PURE__*/React.createElement(AddType1Component,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,extractedColumnList:this.versionFieldList})}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData.TestPrice,dataResult:process(this.props.Login.masterData.TestPrice||[],this.state.priceDataState)});}else{var priceDataState=this.state.priceDataState;if(this.props.Login.priceDataState===undefined){priceDataState={skip:0,take:this.props.Login.settings?parseInt(this.props.Login.settings[14]):5};}this.setState({data:this.props.Login.masterData.TestPrice,selectedRecord:this.props.Login.selectedRecord,dataResult:process(this.props.Login.masterData.TestPrice||[],priceDataState),priceDataState:priceDataState});}}}},{key:\"handleFocus\",value:function handleFocus(e){e.target.select();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:[],inputParam:undefined,operation:null,modalName:undefined}};this.props.updateStore(updateInfo);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return TestMasterPricing;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,getEditTestPriceVersionService:getEditTestPriceVersionService,updateStore:updateStore,filterColumnData:filterColumnData,getTestPriceVersionDetail:getTestPriceVersionDetail,getPricingAddTestService:getPricingAddTestService,getPricingEditService:getPricingEditService})(injectIntl(TestMasterPricing));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/testmanagement/TestMasterPricing.jsx"],"names":["React","connect","toast","injectIntl","FormattedMessage","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faCopy","faPencilAlt","faThumbsUp","faTrashAlt","faPlus","DataGrid","callService","crudMaster","validateEsignCredential","updateStore","filterColumnData","getEditTestPriceVersionService","getTestPriceVersionDetail","getPricingAddTestService","getPricingEditService","DEFAULT_RETURN","showEsign","getControlMap","process","transactionStatus","ListMaster","SlideOutModal","ReadOnlyText","ContentPanel","AddType1Component","Esign","ConfirmMessage","AddPricingTest","EditTestPricing","isText","mapStateToProps","state","Login","TestMasterPricing","props","sidebarExpandCollapse","setState","sidebarview","openModal","inputParam","updateInfo","typeName","data","selectedRecord","operation","ncontrolCode","ncontrolcode","selectedId","screenName","intl","formatMessage","id","dataStateChange","event","dataResult","dataState","priceDataState","confirmDelete","deleteId","confirmMessage","confirm","deleteOrApproveTestPriceVersion","masterData","SelectedTestPriceVersion","deleteTestPrice","deleteParam","postParam","inputListName","selectedObject","primaryKeyField","classUrl","methodUrl","inputData","npriceversioncode","userInfo","userRoleControlRights","nformcode","loadEsign","screenData","closeModal","onComboChange","comboData","fieldName","onNumericInputOnChange","value","name","onInputOnChange","primaryFieldKey","target","type","checked","ACTIVE","DEACTIVE","YES","NO","index","findIndex","item","ntestpricedetailcode","test","onSaveClick","saveType","formRef","versionData","undefined","JSON","parse","stringify","nmastersitecode","DRAFT","hasOwnProperty","searchRef","isClearSearch","onSaveTestPrice","testPriceData","priceList","map","push","ntestcode","ntransactionstatus","primaryKeyValue","fetchUrl","fecthInputObject","userinfo","warn","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","reloadData","current","displayName","skip","take","settings","parseInt","masterStatus","error","controlMap","Map","createRef","versionFieldList","extractedColumnList","mandatoryFields","mandatoryTestFields","searchFieldList","versionStatusCSS","activeIconCSS","APPROVED","RETIRED","addId","has","get","editId","approveId","copyId","addPriceId","updatePriceId","filterParam","addParam","primaryKeyName","editParam","copyParam","editTestPriceParam","searchedData","TestPriceVersion","testPriceVersion","length","sversionname","sversionstatus","indexOf","sdescription","handleFocus","pricingTestList","previousProps","Object","values","TestPrice","e","select","modalName","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { injectIntl, FormattedMessage } from 'react-intl';\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCopy, faPencilAlt, faThumbsUp, faTrashAlt, faPlus} from '@fortawesome/free-solid-svg-icons';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, filterColumnData,\r\n   getEditTestPriceVersionService, getTestPriceVersionDetail, getPricingAddTestService,\r\n   getPricingEditService} from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, getControlMap } from '../../components/CommonScript';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\nimport ListMaster from '../../components/list-master/list-master.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\n\r\nimport { ReadOnlyText, ContentPanel } from '../../components/App.styles';\r\nimport AddType1Component from '../../components/type1component/AddType1Component';\r\n//import AddUser from './AddUser';\r\n//import UserTabs from './UserTabs';\r\nimport Esign from '../audittrail/Esign';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport AddPricingTest from './AddPricingTest';\r\nimport EditTestPricing from './EditTestPricing';\r\nimport { isText } from 'domhandler';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass TestMasterPricing extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const priceDataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n\r\n            masterStatus: \"\",\r\n            error: \"\",\r\n            selectedRecord: {},\r\n            operation: \"\",\r\n            SelectedTestPriceVersion: undefined,\r\n            screenName: undefined,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            isClearSearch: false,\r\n            data: [], \r\n            dataResult: [],\r\n            priceDataState: priceDataState,\r\n            sidebarview: false\r\n\r\n        };\r\n        this.searchRef = React.createRef();\r\n       // this.emailRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n\r\n       // this.versionFieldList = ['sversionname', 'sdescription'];\r\n\r\n        this.versionFieldList = [\r\n            { \"idsName\": \"IDS_VERSIONNAME\", \"dataField\": \"sversionname\", \"width\": \"200px\",\"fieldLength\":\"100\",\"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\" , \"fieldLength\":\"255\",\"mandatory\": false , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textarea\"},\r\n            ]\r\n        this.extractedColumnList = [\r\n                { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestname\", \"width\": \"200px\"},\r\n                { \"idsName\": \"IDS_COST\", \"dataField\": \"ncost\", \"width\": \"200px\" },\r\n               ]\r\n        this.mandatoryFields = [ { \"idsName\": \"IDS_VERSIONNAME\", \"dataField\": \"sversionname\", \"width\": \"200px\",\"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n                                    ];\r\n        this.mandatoryTestFields = [ { \"idsName\": \"IDS_TEST\", \"dataField\": \"ntestcode\", \"width\": \"200px\",\"mandatory\": true , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"},\r\n                                ];\r\n        this.searchFieldList = [\"sversionname\", \"sversionno\", \"sdescription\", \"sversionstatus\"];\r\n    }\r\n    sidebarExpandCollapse = () => {\r\n        this.setState({\r\n            sidebarview: true\r\n        })          \r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n\r\n        let versionStatusCSS = \"outline-secondary\";\r\n        let activeIconCSS = \"fa fa-check\"\r\n        if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.APPROVED) {\r\n            versionStatusCSS = \"outline-success\";\r\n        }\r\n        else if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.RETIRED) {\r\n            versionStatusCSS = \"outline-danger\";\r\n            activeIconCSS = \"\";\r\n        }\r\n        else if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.DRAFT) {\r\n            activeIconCSS = \"\";\r\n        }\r\n\r\n        const addId = this.state.controlMap.has(\"AddTestPriceVersion\") && this.state.controlMap.get(\"AddTestPriceVersion\").ncontrolcode;\r\n        const editId = this.state.controlMap.has(\"EditTestPriceVersion\") && this.state.controlMap.get(\"EditTestPriceVersion\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"DeleteTestPriceVersion\") && this.state.controlMap.get(\"DeleteTestPriceVersion\").ncontrolcode\r\n        const approveId = this.state.controlMap.has(\"ApproveTestPriceVersion\") && this.state.controlMap.get(\"ApproveTestPriceVersion\").ncontrolcode\r\n        const copyId = this.state.controlMap.has(\"CopyTestPriceVersion\") && this.state.controlMap.get(\"CopyTestPriceVersion\").ncontrolcode\r\n        const addPriceId = this.state.controlMap.has(\"AddTestPrice\") && this.state.controlMap.get(\"AddTestPrice\").ncontrolcode;\r\n        const updatePriceId = this.state.controlMap.has(\"EditTestPrice\") && this.state.controlMap.get(\"EditTestPrice\").ncontrolcode;\r\n       // const deletePriceId = this.state.controlMap.has(\"DeleteTestPrice\") && this.state.controlMap.get(\"DeleteTestPrice\").ncontrolcode;\r\n     \r\n     \r\n\r\n        const filterParam = {\r\n            inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\",\r\n            fetchUrl: \"testpricing/getTestPriceVersion\", fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData, searchFieldList: this.searchFieldList\r\n        };\r\n\r\n        const addParam = {\r\n            screenName: \"IDS_TESTMASTERPRICING\", operation: \"create\", primaryKeyName: \"npriceversioncode\",\r\n            masterData: this.props.Login.masterData, userInfo: this.props.Login.userInfo,\r\n            ncontrolcode: addId\r\n        }\r\n\r\n        const editParam = {\r\n            screenName:  this.props.intl.formatMessage({id:'IDS_TESTPRICEVERSION'}), operation: \"update\", primaryKeyName: \"npriceversioncode\",\r\n            masterData: this.props.Login.masterData, userInfo: this.props.Login.userInfo,\r\n            ncontrolcode: editId, inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\"\r\n        };\r\n\r\n        const copyParam = {\r\n            screenName: \"IDS_TESTMASTERPRICING\", operation: \"copy\", primaryKeyName: \"npriceversioncode\",\r\n            masterData: this.props.Login.masterData, userInfo: this.props.Login.userInfo,\r\n            ncontrolcode: copyId\r\n        }\r\n\r\n        const editTestPriceParam = {screenName:\"IDS_PRICE\", \"operation\":\"update\", \r\n                                    masterData:this.props.Login.masterData, userInfo: this.props.Login.userInfo, \r\n                                    ncontrolCode:updatePriceId};\r\n\r\n        //console.log(\"props:\", this.props.Login.masterData.TestPriceVersion);\r\n        return (<>\r\n            {/* Start of get display*/}\r\n            <div className=\"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\">\r\n                <Row noGutters>\r\n                    <Col md={`${!this.state.sidebarview ? '4' : \"2\"}`}>\r\n                        <span onClick= {()=>this.setState({sidebarview:!this.state.sidebarview})} className='sidebar-view-btn'>\r\n                            {!this.state.sidebarview ?\r\n                                <i class=\"fa fa-less-than\"></i> :\r\n                                <i class=\"fa fa-greater-than\"></i> \r\n                            }\r\n                        </span>\r\n                        {/* <Row noGutters>\r\n                            <Col md={12}> */}\r\n                            {/* <div className=\"list-fixed-wrap\"> */}\r\n                                <ListMaster\r\n                                    screenName={this.props.intl.formatMessage({ id: \"IDS_TESTMASTERPRICING\" })}\r\n                                    masterData={this.props.Login.masterData}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.TestPriceVersion}\r\n                                    getMasterDetail={(testPriceVersion) => this.props.getTestPriceVersionDetail(testPriceVersion, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                                    selectedMaster={this.props.Login.masterData.SelectedTestPriceVersion}\r\n                                    primaryKeyField=\"npriceversioncode\"\r\n                                    mainField=\"sversionname\"\r\n                                    firstField=\"sversionno\"\r\n                                    secondField=\"sversionstatus\"\r\n                                    filterColumnData={this.props.filterColumnData}\r\n                                    filterParam={filterParam}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    addId={addId}\r\n                                    searchRef={this.searchRef}\r\n                                    reloadData={this.reloadData}\r\n                                    openModal={() => this.openModal(addParam)}\r\n                                    isMultiSelecct={false}\r\n                                    hidePaging={false}\r\n                                    isClearSearch={this.props.Login.isClearSearch}\r\n                                />\r\n                            {/* </div>\r\n                        </Col></Row> */}\r\n                    </Col>\r\n                    <Col md={`${!this.state.sidebarview ? '8' : \"10\"}`}>\r\n                        {/* <Row>\r\n                            <Col md={12}> */}\r\n                            <ContentPanel className=\"panel-main-content\">\r\n                                <Card className=\"border-0\">\r\n                                    {this.props.Login.masterData.TestPriceVersion && this.props.Login.masterData.TestPriceVersion.length > 0 && this.props.Login.masterData.SelectedTestPriceVersion ?\r\n                                        <>\r\n                                            <Card.Header>\r\n                                                {/* <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" /> */}\r\n                                                <Card.Title className=\"product-title-main\">\r\n                                                    {this.props.Login.masterData.SelectedTestPriceVersion.sversionname}\r\n                                                </Card.Title>\r\n                                                <Card.Subtitle>\r\n                                                    <div className=\"d-flex product-category\">\r\n                                                        <h2 className=\"product-title-sub flex-grow-1\">\r\n\r\n                                                            <span className={`btn btn-outlined ${versionStatusCSS} btn-sm ml-3`}>\r\n                                                                {activeIconCSS !== \"\" ? <i class={activeIconCSS}></i> : \"\"}\r\n                                                                {this.props.Login.masterData.SelectedTestPriceVersion.sversionstatus}\r\n                                                            \r\n                                                            </span>\r\n                                                        </h2>\r\n                                                        {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n                                                        <div className=\"d-inline\">\r\n                                                            <Nav.Link name=\"editTestPriceVersion\" hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                                className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_EDIT\" })}\r\n                                                                //data-for=\"tooltip_list_wrap\"\r\n                                                                onClick={() => this.props.getEditTestPriceVersionService(editParam)}\r\n                                                            >\r\n                                                                <FontAwesomeIcon icon={faPencilAlt} />\r\n                                                            </Nav.Link>\r\n\r\n                                                            <Nav.Link name=\"deleteTestPriceVersion\" className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                                                               // data-for=\"tooltip_list_wrap\"\r\n                                                                hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                                onClick={() => this.confirmDelete(deleteId)}>\r\n                                                                <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                               \r\n                                                            </Nav.Link>\r\n                                                            <Nav.Link name=\"approveTestPriceVersion\" className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_APPROVE\" })}\r\n                                                                //data-for=\"tooltip_list_wrap\"\r\n                                                                onClick={() => this.deleteOrApproveTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion,\r\n                                                                    \"approve\", approveId)}>\r\n                                                                <FontAwesomeIcon icon={faThumbsUp} />\r\n                                                            </Nav.Link>\r\n                                                            <Nav.Link name=\"copyTestPriceVersion\" className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_COPY\" })}\r\n                                                                onClick={()=>this.openModal(copyParam)}\r\n                                                                // onClick={() => this.copyTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion,\r\n                                                                //     \"copy\", approveId)}\r\n                                                                >\r\n                                                                <FontAwesomeIcon icon={faCopy} />\r\n                                                            </Nav.Link>\r\n                                                        </div>\r\n                                                        {/* </Tooltip> */}\r\n                                                    </div>\r\n\r\n                                                </Card.Subtitle>\r\n                                            </Card.Header>\r\n                                            <Card.Body className=\"form-static-wrap\">\r\n                                                {/* <Card.Text> */}\r\n\r\n                                                <Row>\r\n                                                    <Col md={12}>\r\n                                                        <FormGroup>\r\n                                                            <FormLabel><FormattedMessage id=\"IDS_DESCRIPTION\" message=\"Description\" /></FormLabel>\r\n                                                            <ReadOnlyText>{this.props.Login.masterData.SelectedTestPriceVersion.sdescription}</ReadOnlyText>\r\n                                                        </FormGroup>\r\n                                                    </Col>\r\n                                                  \r\n                                                </Row>\r\n                                                {/* <Row>\r\n                                                    <Col>\r\n                                                        <div className=\"horizontal-line\"></div>\r\n                                                    </Col>\r\n                                                </Row> */}\r\n                                                  <Card className=\"at-tabs border-0\">\r\n                                                        <Row noGutters>\r\n                                                            <Col md={12}>\r\n                                                                <div className=\"d-flex justify-content-end\">\r\n                                                                <Nav.Link name=\"addPrice\" className=\"add-txt-btn\" \r\n                                                                        hidden={this.state.userRoleControlRights.indexOf(addPriceId) === -1}\r\n                                                                        onClick={()=>this.props.getPricingAddTestService(\"IDS_TEST\", \"create\", this.props.Login.masterData, this.props.Login.userInfo, addPriceId)}\r\n                                                                        >\r\n                                                                     <FontAwesomeIcon icon={faPlus} /> { } \r\n                                                                    <FormattedMessage id='IDS_TEST' defaultMessage='Test' />\r\n                                                                </Nav.Link>\r\n                                                                <Nav.Link name=\"updatePrice\" className=\"add-txt-btn\" \r\n                                                                        hidden={this.state.userRoleControlRights.indexOf(updatePriceId) === -1}\r\n                                                                        onClick={()=>this.props.getPricingEditService({...editTestPriceParam, \"updateType\":\"All\", priceDataState:undefined})}\r\n                                                                        >\r\n                                                                    <FontAwesomeIcon icon={faPencilAlt} /> { }\r\n                                                                    <FormattedMessage id='IDS_PRICE' defaultMessage='Price' />\r\n                                                                </Nav.Link>\r\n                                                                </div>\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                        <Row noGutters>\r\n                                                            <Col md={12}>\r\n                                                                <DataGrid\r\n                                                                    primaryKeyField={\"ntestpricedetailcode\"}\r\n                                                                    data={this.state.data}\r\n                                                                    dataResult={this.state.dataResult}\r\n                                                                    dataState={this.state.priceDataState}\r\n                                                                    dataStateChange={this.dataStateChange}\r\n                                                                    extractedColumnList={this.extractedColumnList}\r\n                                                                    controlMap={this.state.controlMap}\r\n                                                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                                                    inputParam={this.props.Login.inputParam}\r\n                                                                    userInfo={this.props.Login.userInfo}\r\n                                                                    fetchRecord={this.props.getPricingEditService}\r\n                                                                    editParam={{...editTestPriceParam, \"updateType\":\"Single\", priceDataState:this.state.priceDataState}}\r\n                                                                    deleteRecord={this.deleteTestPrice}\r\n                                                                    deleteParam={{operation:\"delete\"}}\r\n                                                                    methodUrl={\"TestPrice\"}\r\n                                                                // reloadData={this.reloadData}\r\n                                                                    addRecord = {() => this.openModal(addId)}\r\n                                                                    pageable={true}\r\n                                                                    scrollable={'scrollable'}\r\n                                                                // gridHeight = {'600px'}\r\n                                                                    isActionRequired={true}\r\n                                                                    isToolBarRequired={false}\r\n                                                                    selectedId={this.props.Login.selectedId}\r\n                                                                />\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                </Card>\r\n                                                {/* </Card.Text> */}\r\n                                            \r\n                                            </Card.Body>\r\n                                        </>\r\n                                        : \"\"\r\n                                    }\r\n                                </Card>\r\n                            </ContentPanel>\r\n                        </Col></Row>\r\n                    {/* </Col>\r\n                </Row> */}\r\n            </div>\r\n\r\n            {/* End of get display*/}\r\n\r\n            {/* Start of Modal Sideout for  Creation */}\r\n            {/* Below Condition Added to avoid unwanted rendering of SlideOut */}\r\n            {this.props.Login.openModal ?\r\n                <SlideOutModal show={this.props.Login.openModal}\r\n                    closeModal={this.closeModal}\r\n                    operation={this.props.Login.operation}\r\n                    inputParam={this.props.Login.inputParam}\r\n                    screenName={this.props.Login.screenName}\r\n                    onSaveClick={(this.props.Login.screenName === \"IDS_TEST\" || \r\n                                this.props.Login.screenName === \"IDS_PRICE\")  ? this.onSaveTestPrice: this.onSaveClick}\r\n                    esign={this.props.Login.loadEsign}\r\n                    validateEsign={this.validateEsign}\r\n                    masterStatus={this.props.Login.masterStatus}\r\n                    updateStore={this.props.updateStore}\r\n                    selectedRecord={this.state.selectedRecord || {}}\r\n                    mandatoryFields={(this.props.Login.screenName === \"IDS_TEST\" || \r\n                    this.props.Login.screenName === \"IDS_PRICE\")? \r\n                            this.props.Login.operation === \"update\" ? [] : this.mandatoryTestFields:\r\n                            this.mandatoryFields}\r\n                    addComponent={this.props.Login.loadEsign ?\r\n                        <Esign operation={this.props.Login.operation}\r\n                            onInputOnChange={this.onInputOnChange}\r\n                            inputParam={this.props.Login.inputParam}\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                        />\r\n                        : (this.props.Login.screenName === \"IDS_TEST\" || \r\n                        this.props.Login.screenName === \"IDS_PRICE\")  ? \r\n                            this.props.Login.operation === \"update\" ?\r\n                                <EditTestPricing\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onFocus={this.handleFocus}\r\n                                    //testPriceList={this.props.Login.testPriceList || []}\r\n                                    />\r\n                                :<AddPricingTest\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onComboChange={this.onComboChange}\r\n                                    pricingTestList={this.props.Login.pricingTestList || []}/>\r\n\r\n                            : <AddType1Component\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                extractedColumnList={this.versionFieldList}\r\n                            />\r\n                      \r\n                    }\r\n                /> : \"\"}\r\n            {/* End of Modal Sideout for User Creation */}\r\n        </>\r\n        );\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({ userRoleControlRights, controlMap,\r\n                    data: this.props.Login.masterData.TestPrice,\r\n                    dataResult: process(this.props.Login.masterData.TestPrice || [], this.state.priceDataState), });\r\n            }\r\n            else {        \r\n                let {priceDataState} = this.state;\r\n                if(this.props.Login.priceDataState === undefined){\r\n                    priceDataState={skip:0,take:this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5}\r\n                }         \r\n                this.setState({\r\n                    data: this.props.Login.masterData.TestPrice, selectedRecord: this.props.Login.selectedRecord,\r\n                    dataResult: process(this.props.Login.masterData.TestPrice ||[],priceDataState),\r\n                    priceDataState\r\n                });\r\n            }  \r\n        }\r\n    }\r\n\r\n    handleFocus(e){\r\n        e.target.select();\r\n    }\r\n\r\n    openModal = (inputParam) => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                selectedRecord: {}, operation: inputParam.operation, ncontrolCode:inputParam.ncontrolcode, selectedId:null,\r\n                openModal: true, screenName: this.props.intl.formatMessage({id:'IDS_TESTPRICEVERSION'})\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.data, event.dataState),\r\n            priceDataState: event.dataState\r\n        });\r\n    }\r\n\r\n\r\n    confirmDelete = (deleteId) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.deleteOrApproveTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion, \"delete\", deleteId));\r\n    }\r\n\r\n    deleteTestPrice = (deleteParam) =>{\r\n        const postParam = { inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\" };\r\n\r\n        const inputParam = {\r\n            classUrl: \"testpricing\",\r\n            methodUrl: \"TestPrice\",\r\n            postParam,\r\n            //displayName: ,\r\n            inputData: {\r\n                \"testprice\": deleteParam.selectedRecord,//.dataItem,\r\n                \"npriceversioncode\":this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode,\r\n                \"userinfo\": this.props.Login.userInfo,\r\n                //postParam \r\n\r\n            },\r\n            operation:\"delete\",\r\n            priceDataState:this.state.priceDataState,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.intl.formatMessage({ id: \"IDS_TESTPRICE\" }),\r\n                    operation:deleteParam.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let selectedId = this.props.Login.selectedId;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"approve\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n            selectedId = null;\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, loadEsign, selectedRecord, selectedId }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onNumericInputOnChange = (value, name) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onInputOnChange = (event, primaryFieldKey) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"ntransactionstatus\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            else\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n\r\n        }\r\n        else {   \r\n            if(primaryFieldKey && event.target.name === \"ncost\"){\r\n                const index = selectedRecord.findIndex(item=>item.ntestpricedetailcode === primaryFieldKey);\r\n                if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){\r\n                    selectedRecord[index][\"ncost\"] = event.target.value;\r\n                }\r\n            }\r\n            else{      \r\n                selectedRecord[event.target.name] = event.target.value;\r\n            }           \r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        let versionData = [];\r\n        versionData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n        let postParam = undefined;\r\n\r\n        if (this.props.Login.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\" };\r\n            versionData[\"testpriceversion\"] = JSON.parse(JSON.stringify(this.props.Login.selectedRecord));\r\n            versionData[\"sversionname\"]=this.state.selectedRecord[\"sversionname\"] || \"\";\r\n            versionData[\"sdescription\"]=this.state.selectedRecord[\"sdescription\"] || \"\";\r\n\r\n        }\r\n        else {\r\n            //add               \r\n            versionData[\"testpriceversion\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode,\r\n                                                 \"ntransactionstatus\": transactionStatus.DRAFT,\r\n                                                \"sversionname\":this.state.selectedRecord[\"sversionname\"] || \"\",\r\n                                                \"sdescription\":this.state.selectedRecord[\"sdescription\"] || \"\",\r\n                                            };\r\n\r\n            if(this.props.Login.operation === \"copy\"){\r\n                versionData[\"testpriceversion\"][\"npriceversioncode\"] = this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode;\r\n            }\r\n\r\n        }\r\n        if (versionData[\"testpriceversion\"].hasOwnProperty('esignpassword')) {\r\n            if (versionData[\"testpriceversion\"]['esignpassword'] === '') {\r\n                delete versionData[\"testpriceversion\"]['esigncomments']\r\n                delete versionData[\"testpriceversion\"]['esignpassword']\r\n            }\r\n        }\r\n      \r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"TestPriceVersion\",\r\n            inputData: versionData,\r\n            operation: this.props.Login.operation,\r\n            saveType, formRef, postParam, searchRef: this.searchRef,\r\n            isClearSearch: this.props.Login.isClearSearch,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n\r\n    }\r\n\r\n    onSaveTestPrice = (saveType, formRef) => {\r\n\r\n       // console.log(\"this.props.Login.selectedRecord:\", this.props.Login.selectedRecord);\r\n        const testPriceData = {\"userinfo\": this.props.Login.userInfo,\r\n                                \"testpriceversion\":this.props.Login.masterData.SelectedTestPriceVersion,\r\n                                \"npriceversioncode\":this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode};\r\n\r\n        let postParam = undefined;\r\n        let priceDataState = undefined;\r\n        let selectedId = null;\r\n        \r\n        if (this.props.Login.operation === \"update\") {\r\n            // edit\r\n            priceDataState = this.state.priceDataState;\r\n            selectedId = this.props.Login.selectedId; \r\n            postParam = { inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\" };\r\n            testPriceData[\"testpricelist\"] = JSON.parse(JSON.stringify(this.props.Login.selectedRecord));           \r\n        }\r\n        else {\r\n            //add               \r\n                                               \r\n            let priceList = [];\r\n            this.state.selectedRecord[\"ntestcode\"] &&\r\n                this.state.selectedRecord[\"ntestcode\"].map(item => {\r\n                    return priceList.push({\r\n                       ntestcode: item.value                      \r\n                    })\r\n                })\r\n           \r\n            testPriceData[\"testpricelist\"] = priceList;                             \r\n\r\n        }\r\n        if (testPriceData[\"testpriceversion\"].hasOwnProperty('esignpassword')) {\r\n            if (testPriceData[\"testpriceversion\"]['esignpassword'] === '') {\r\n                delete testPriceData[\"testpriceversion\"]['esigncomments']\r\n                delete testPriceData[\"testpriceversion\"]['esignpassword']\r\n                delete testPriceData[\"testpriceversion\"][\"agree\"]\r\n            }\r\n        }\r\n       //console.log(\"update data:\", testPriceData);\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"TestPrice\",\r\n            inputData: testPriceData,\r\n            operation: this.props.Login.operation,\r\n            saveType, formRef, postParam, searchRef: this.searchRef,\r\n            isClearSearch: this.props.Login.isClearSearch,\r\n            selectedId, priceDataState,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {            \r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n\r\n    }\r\n\r\n\r\n    deleteOrApproveTestPriceVersion = (methodUrl, SelectedTestPriceVersion, operation, ncontrolCode) => {\r\n        if (SelectedTestPriceVersion.ntransactionstatus === transactionStatus.DRAFT) {         \r\n\r\n            const postParam = {\r\n                inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\",\r\n                primaryKeyField: \"npriceversioncode\",\r\n                primaryKeyValue: SelectedTestPriceVersion.npriceversioncode,\r\n                fetchUrl: \"testpricing/getTestPriceVersion\",\r\n                fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            }\r\n\r\n            const inputParam = {\r\n                classUrl: this.props.Login.inputParam.classUrl,\r\n                methodUrl, postParam,\r\n                inputData: {\r\n                    \"userinfo\": this.props.Login.userInfo,\r\n                    \"testpriceversion\": SelectedTestPriceVersion\r\n                },\r\n                operation,\r\n                isClearSearch: this.props.Login.isClearSearch,\r\n                selectedRecord: {...this.state.selectedRecord}\r\n            }\r\n\r\n            const masterData = this.props.Login.masterData;\r\n\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData },\r\n                        openModal: true, screenName: \"IDS_TESTPRICEVERSION\", operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n            }\r\n        }    \r\n        else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTTESTPRICEVERSION\" }));\r\n        }\r\n    \r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                masterData: [], inputParam: undefined, operation: null, modalName: undefined\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: \"testpricing\",\r\n            methodUrl: \"TestPriceVersion\",\r\n            displayName: \"IDS_TESTPRICEVERSION\",\r\n            userInfo: this.props.Login.userInfo,\r\n            isClearSearch: this.props.Login.isClearSearch\r\n\r\n        };\r\n\r\n        this.props.callService(inputParam);\r\n    }\r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, validateEsignCredential,getEditTestPriceVersionService,\r\n    updateStore,filterColumnData, getTestPriceVersionDetail, getPricingAddTestService,\r\n    getPricingEditService\r\n})(injectIntl(TestMasterPricing));\r\n\r\n"]},"metadata":{},"sourceType":"module"}