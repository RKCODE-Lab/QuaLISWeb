{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{injectIntl}from'react-intl';import{Row,Col,Button,Card}from'react-bootstrap';import{callService,filterTransactionList,getTransactionDetail,getFilterTransactionDetailsRecords,updateStore,ViewTransactionDetails,getexportdata}from'../../actions';import{constructOptionList,convertDateValuetoString,getControlMap,rearrangeDateFormat,getStartOfDay,getEndOfDay}from'../../components/CommonScript';import FlexTransactionFilter from'./FlexTransactionFilter';import BreadcrumbComponent from'../../components/Breadcrumb.Component';import SplitterLayout from'react-splitter-layout';import DataGrid from'../../components/data-grid/data-grid.component';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import PerfectScrollbar from'react-perfect-scrollbar';import{ContentPanel}from'../../components/App.styles';import TransactionListMaster from'../../components/TransactionListMaster';import{ReactComponent as RefreshIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/image/refresh.svg\";import{ProductList}from'../product/product.styled';import{process}from'@progress/kendo-data-query';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{toast}from'react-toastify';var FlexTransaction=/*#__PURE__*/function(_React$Component){_inherits(FlexTransaction,_React$Component);var _super=_createSuper(FlexTransaction);function FlexTransaction(props){var _this;_classCallCheck(this,FlexTransaction);_this=_super.call(this,props);_this.dataStateChange=function(event){if(_this.state.selectedRecord[\"nauditactionfiltercode\"].value===1){_this.setState({dataResult:process(_this.props.Login.masterData.TransactionDetails||[],event.dataState),dataStateAll:event.dataState,kendoSkip:event.dataState.skip,kendoTake:event.dataState.skip});}else{var data=[];if(event.dataState.filter===null&&event.dataState.sort===null){var auditdata=_this.props.Login.masterData.TransactionDetails&&_this.props.Login.masterData.TransactionDetails.slice(0,event.dataState.take+event.dataState.skip)||[];data=process(auditdata||[],event.dataState);}else{data=process(_this.props.Login.masterData.TransactionDetails||[],event.dataState);}_this.setState({dataResult:data,dataState:event.dataState});}};_this.handlePageChange=function(e){_this.setState({skip:e.skip,take:e.take});};_this.dataStateAuditView=function(event){var updateInfo={typeName:DEFAULT_RETURN,data:{viewTransDetailsDataState:event.dataState}};_this.props.updateStore(updateInfo);};_this.closeModal=function(){var openModal=_this.props.Login.openModal;openModal=false;var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,viewTransDetailsDataState:{skip:0,take:50},selectedId:null}};_this.props.updateStore(updateInfo);};_this.ViewTransactionDetails=function(details){var screenName=_this.props.intl.formatMessage({id:'IDS_TRANSACTIONVIEWDETAILS'});_this.props.ViewTransactionDetails(_this.props.Login.masterData,_this.props.Login.userInfo,details,screenName);};_this.onComboChange=function(comboData,fieldName){if(comboData!=null){if(fieldName===\"ntransfiltercode\"||fieldName===\"nauditactionfiltercode\"){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});}}else{var _selectedRecord=_this.state.selectedRecord||{};_selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:_selectedRecord});}};_this.expandChange=function(event){event.dataItem[event.target.props.expandField]=event.value;_this.setState({dataResult:process(_this.props.Login.masterData.TransactionDetails||[],_this.state.selectedRecord[\"nauditactionfiltercode\"]&&_this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?_this.state.dataStateAll:_this.state.dataState),dataState:_this.state.selectedRecord[\"nauditactionfiltercode\"]&&_this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?_this.state.dataStateAll:_this.state.dataState});};_this.exportExcelNew=function(){var fromDate=_this.props.Login.masterData.FromDate;var toDate=_this.props.Login.masterData.ToDate;var dataField={};_toConsumableArray(_this.extractedColumnList).map(function(item){dataField[item.dataField]=_this.props.intl.formatMessage({id:item.idsName});});var obj=convertDateValuetoString(fromDate,toDate,_this.props.Login.userInfo);var inputData={fromDate:obj.fromDate,toDate:obj.toDate,viewtypecode:_this.state.selectedRecord[\"nauditactionfiltercode\"]?_this.state.selectedRecord[\"nauditactionfiltercode\"].value:0,userinfo:_this.props.Login.userInfo,sregistereddate:_this.props.Login.masterData.SelectedTransactionDate.sregistereddate,nformcode:_this.props.Login.userInfo.nformcode,dataField:dataField};var inputParam={inputData:inputData};_this.props.getexportdata(inputParam);};_this.onFilterSubmit=function(){var breadCrumbFrom=_this.state.selectedRecord[\"fromdate\"]?getStartOfDay(_this.state.selectedRecord[\"fromdate\"]):rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.FromDate);var breadCrumbTo=_this.state.selectedRecord[\"todate\"]?getEndOfDay(_this.state.selectedRecord[\"todate\"]):rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.ToDate);var validateFromDate=_this.state.selectedRecord[\"fromdate\"]?_this.state.selectedRecord[\"fromdate\"]:rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.FromDate);var validateToDate=_this.state.selectedRecord[\"todate\"]?_this.state.selectedRecord[\"todate\"]:rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.ToDate);var breadCrumbTransaDetails=_this.state.selectedRecord['ntransfiltercode'];var breadCrumbViewType=_this.state.selectedRecord['nauditactionfiltercode'];var diffInMilliseconds=Math.abs(validateToDate-validateFromDate);var days=Math.ceil(diffInMilliseconds/(1000*60*60*24));var diffYear=validateToDate.getFullYear()-validateFromDate.getFullYear();var diffMonth=validateToDate.getMonth()-validateFromDate.getMonth();var monthss=diffYear*12+diffMonth;if(_this.state.selectedRecord[\"nauditactionfiltercode\"].value!==1||_this.state.selectedRecord[\"nauditactionfiltercode\"].value===1&&monthss<=12&&(days<=365||days<=366)){var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{breadCrumbFrom:breadCrumbFrom,breadCrumbTo:breadCrumbTo,breadCrumbTransaDetails:breadCrumbTransaDetails,breadCrumbViewType:breadCrumbViewType});var fromDate=_this.state.selectedRecord[\"fromdate\"]?_this.state.selectedRecord[\"fromdate\"]:_this.props.Login.masterData.FromDate;var toDate=_this.state.selectedRecord[\"todate\"]?_this.state.selectedRecord[\"todate\"]:_this.props.Login.masterData.ToDate;var obj=convertDateValuetoString(fromDate,toDate,_this.props.Login.userInfo);var inputData={fromDate:obj.fromDate,toDate:obj.toDate,transFilterType:_this.state.selectedRecord[\"ntransfiltercode\"]?_this.state.selectedRecord[\"ntransfiltercode\"].value:0,viewtypecode:_this.state.selectedRecord[\"nauditactionfiltercode\"]?_this.state.selectedRecord[\"nauditactionfiltercode\"].value:-1,userinfo:_this.props.Login.userInfo,postParamList:_this.filterParam};var inputParam={masterData:masterData,inputData:inputData,searchRef:_this.searchRef,detailSkip:_this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?_this.state.dataStateAll.skip:_this.state.dataState.skip};_this.props.getFilterTransactionDetailsRecords(inputParam);}else{var selectedRecord=_this.state.selectedRecord;selectedRecord['fromdate']=rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.FromDate);selectedRecord['toDate']=rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.ToDate);selectedRecord['nauditactionfiltercode']=_this.props.Login.masterData.breadCrumbViewType?_this.props.Login.masterData.breadCrumbViewType:{item:_this.props.Login.masterData.viewFilterType,label:_this.props.Login.masterData.viewFilterType.sauditactionfiltername,value:_this.props.Login.masterData.viewFilterType.nauditactionfiltercode};selectedRecord['ntransfiltercode']=_this.props.Login.masterData.breadCrumbTransaDetails?_this.props.Login.masterData.breadCrumbTransaDetails:{item:_this.props.Login.masterData.transFilterType,label:_this.props.Login.masterData.transFilterType.sdisplayname,value:_this.props.Login.masterData.transFilterType.ntransfiltertypecode};_this.setState({selectedRecord:selectedRecord});toast.warn(_this.props.intl.formatMessage({id:\"IDS_DATERANGESHOULDEMAXONEYEAR\"}));}};_this.onReload=function(){var breadCrumbFrom=_this.state.selectedRecord[\"fromdate\"]?getStartOfDay(_this.state.selectedRecord[\"fromdate\"]):rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.FromDate);var breadCrumbTo=_this.state.selectedRecord[\"todate\"]?getEndOfDay(_this.state.selectedRecord[\"todate\"]):rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.ToDate);var breadCrumbTransaDetails=_this.state.selectedRecord['ntransfiltercode'];var breadCrumbViewType=_this.state.selectedRecord['nauditactionfiltercode'];var fromDate=_this.props.Login.masterData.FromDate;var toDate=_this.props.Login.masterData.ToDate;var obj=convertDateValuetoString(fromDate,toDate,_this.props.Login.userInfo);var inputData={fromDate:obj.fromDate,toDate:obj.toDate,transFilterType:_this.state.selectedRecord[\"ntransfiltercode\"]?_this.state.selectedRecord[\"ntransfiltercode\"].value:0,viewtypecode:_this.state.selectedRecord[\"nauditactionfiltercode\"]?_this.state.selectedRecord[\"nauditactionfiltercode\"].value:-1,userinfo:_this.props.Login.userInfo,postParamList:_this.filterParam};var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{breadCrumbFrom:breadCrumbFrom,breadCrumbTo:breadCrumbTo,breadCrumbTransaDetails:breadCrumbTransaDetails,breadCrumbViewType:breadCrumbViewType});var inputParam={masterData:masterData,inputData:inputData,searchRef:_this.searchRef,detailSkip:_this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?_this.state.dataStateAll.skip:_this.state.dataState.skip};_this.props.getFilterTransactionDetailsRecords(inputParam);};_this.handleDateChange=function(dateName,dateValue){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.paneSizeChange=function(eve){_this.setState({splitChangeWidthPercentage:eve});};_this.breadcrumbList=function(){var breadCrumbArray=[];var fromDate=_this.props.Login.masterData.FromDate?_this.props.Login.masterData.FromDate:_this.props.Login.masterData.breadCrumbFrom;var toDate=_this.props.Login.masterData.ToDate?_this.props.Login.masterData.ToDate:_this.props.Login.masterData.breadCrumbTo;var obj=convertDateValuetoString(fromDate,toDate,_this.props.Login.userInfo);breadCrumbArray.push({\"label\":\"IDS_FROM\",\"value\":obj.breadCrumbFrom},{\"label\":\"IDS_TO\",\"value\":obj.breadCrumbto});// breadCrumbArray.push(\n//     {\n//         \"label\": \"IDS_RECORDTODISPLAY\",\n//         \"value\": this.props.Login.masterData.breadCrumbTransaDetails ? this.props.Login.masterData.breadCrumbTransaDetails.label :\n//             this.props.Login.masterData.transFilterType ? this.props.Login.masterData.transFilterType.sdisplayname : \"\"\n//     });\nbreadCrumbArray.push({\"label\":\"IDS_VIEWPERIOD\",\"value\":_this.props.Login.masterData.breadCrumbViewType?_this.props.Login.masterData.breadCrumbViewType.label:_this.props.Login.masterData.viewFilterType?_this.props.Login.masterData.viewFilterType.sauditactionfiltername:\"\"});return breadCrumbArray;};_this.myRef=React.createRef();_this.searchFieldList=[\"sregisteredtransactiondate\"];_this.searchTransactionRef=React.createRef();var dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[16]):5};var dataStateAll={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[16]):5};_this.state={viewTransDetailsDataState:{skip:0,take:10},splitChangeWidthPercentage:30,dataState:dataState,dataStateAll:dataStateAll,skip:0,take:_this.props.Login.settings&&_this.props.Login.settings[3],kendoSkip:0,kendoTake:_this.props.Login.settings?parseInt(_this.props.Login.settings[16]):5,controlMap:new Map(),userRoleControlRights:[],gridHeight:'auto'};_this.searchRef=React.createRef();return _this;}_createClass(FlexTransaction,[{key:\"render\",value:function render(){var _this2=this;//const ViewTransactionDetails = this.state.controlMap.has(\"ViewTansactionDetails\") && this.state.controlMap.get(\"ViewTansactionDetails\").ncontrolcode;\nthis.breadCrumbData=this.breadcrumbList();var obj=convertDateValuetoString(this.props.Login.masterData.FromDate,this.props.Login.masterData.ToDate,this.props.Login.userInfo);var fromDate=\"\";var toDate=\"\";if(this.props.Login.masterData&&this.props.Login.masterData.FromDate){fromDate=this.state.selectedRecord&&this.state.selectedRecord[\"fromdate\"]&&getStartOfDay(this.state.selectedRecord[\"fromdate\"])||rearrangeDateFormat(this.props.Login.userInfo,this.props.Login.masterData.FromDate);toDate=this.state.selectedRecord&&this.state.selectedRecord[\"todate\"]&&getEndOfDay(this.state.selectedRecord[\"todate\"])||rearrangeDateFormat(this.props.Login.userInfo,this.props.Login.masterData.ToDate);}var inputParam={masterData:this.props.Login.masterData,userinfo:this.props.Login.userInfo,skip:this.state.skip,take:this.state.take,fromDate:obj.fromDate,toDate:obj.toDate,viewTypecode:this.props.Login.masterData.breadCrumbViewType?this.props.Login.masterData.breadCrumbViewType.value:this.props.Login.masterData.viewFilterType?this.props.Login.masterData.viewFilterType.nauditactionfiltercode:0,transFilterType:this.props.Login.masterData.breadCrumbTransaDetails?this.props.Login.masterData.breadCrumbTransaDetails.value:this.props.Login.masterData.transFilterType?this.props.Login.masterData.transFilterType.ntransdetailsfiltercode:0};this.extractedColumnList=[{\"idsName\":\"IDS_LABREGDATE\",\"dataField\":\"sregistereddate\",\"width\":\"200px\",\"componentName\":\"date\"},{\"idsName\":\"IDS_LAB\",\"dataField\":\"slabname\",\"width\":\"200px\"},{\"idsName\":\"IDS_PLANT\",\"dataField\":\"splantname\",\"width\":\"200px\"},{\"idsName\":\"IDS_LABREGNO\",\"dataField\":\"slabregno\",\"width\":\"200px\"},{\"idsName\":\"IDS_EXTERNALREFNO\",\"dataField\":\"sexternalrefcode\",\"width\":\"200px\"},{\"idsName\":\"IDS_SAMPLE\",\"dataField\":\"ssamplename\",\"width\":\"200px\"},{\"idsName\":\"IDS_BATCHNO\",\"dataField\":\"sbatchno\",\"width\":\"200px\"},{\"idsName\":\"IDS_LOTNO\",\"dataField\":\"slotno\",\"width\":\"200px\"},{\"idsName\":\"IDS_TEST\",\"dataField\":\"stestname\",\"width\":\"200px\"},{\"idsName\":\"IDS_PARAMETER\",\"dataField\":\"sparametername\",\"width\":\"200px\"},{\"idsName\":\"IDS_RESULTVALUE\",\"dataField\":\"sfinal\",\"width\":\"200px\"},{\"idsName\":\"IDS_RESULTSTATUS\",\"dataField\":\"resultstatus\",\"width\":\"200px\"}];this.feildsForGrid=[{\"idsName\":\"IDS_FIELDNAME\",\"dataField\":\"sfieldname\",\"width\":\"200px\"},{\"idsName\":\"IDS_VALUE\",\"dataField\":\"svalue\",\"width\":\"100px\"}];this.filterParam={inputListName:\"TransactionDate\",selectedObject:\"SelectedTransactionDate\",primaryKeyField:\"sregistereddate\",fetchUrl:\"flextransaction/getTrendChartDate\",masterData:this.props.Login.masterData,fecthInputObject:{userinfo:this.props.Login.userInfo,fromDate:obj.fromDate,toDate:obj.toDate,viewTypecode:this.props.Login.masterData.breadCrumbViewType?this.props.Login.masterData.breadCrumbViewType.value:this.props.Login.masterData.viewFilterType?this.props.Login.masterData.viewFilterType.nauditactionfiltercode:0,transFilterType:this.props.Login.masterData.breadCrumbTransaDetails?this.props.Login.masterData.breadCrumbTransaDetails.value:this.props.Login.masterData.transFilterType?this.props.Login.masterData.transFilterType.ntransdetailsfiltercode:0},filteredListName:\"searchedTransactionDate\",clearFilter:\"no\",updatedListname:\"SelectedTransactionDate\",searchRef:this.searchTransactionRef,searchFieldList:this.searchFieldList,unchangeList:[\"viewFilterTypeList\",\"transFilterTypeList\"],changeList:[\"TransactionDetails\"]};this.postParamList=[{filteredListName:\"searchedTransactionDate\",clearFilter:\"no\",searchRef:this.searchRef,primaryKeyField:\"sregistereddate\",fetchUrl:\"audittrail/getFilterTransactionDetailsRecords\",fecthInputObject:this.filterParam,selectedObject:\"SelectedTransactionDate\",inputListName:\"TransactionDate\",updatedListname:\"SelectedTransactionDate\",unchangeList:[\"viewFilterTypeList\",\"transFilterTypeList\"]}];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"mtop-fixed-breadcrumb client-listing-wrap\"},/*#__PURE__*/React.createElement(BreadcrumbComponent,{breadCrumbItem:this.breadCrumbData}),/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12,className:\"parent-port-height sticky_head_parent\"},/*#__PURE__*/React.createElement(SplitterLayout,{borderColor:\"#999\",primaryIndex:1,percentage:true,secondaryInitialSize:this.state.splitChangeWidthPercentage,onSecondaryPaneSizeChange:this.paneSizeChange,primaryMinSize:40,secondaryMinSize:20},/*#__PURE__*/React.createElement(TransactionListMaster,{splitChangeWidthPercentage:this.state.splitChangeWidthPercentage,masterList:this.props.Login.masterData.searchedTransactionDetails||this.props.Login.masterData.TransactionDate||[],selectedMaster:[this.props.Login.masterData.SelectedTransactionDate],primaryKeyField:\"sregistereddate\",inputParam:inputParam,mainField:\"sregisteredtransactiondate\",selectedListName:\"SelectedTransactionDate\",filterColumnData:this.props.filterTransactionList,getMasterDetail:this.props.getTransactionDetail,searchListName:\"searchedTransactionDetails\",searchRef:this.searchRef,filterParam:this.filterParam,objectName:\"transactionDetails\",listName:\"IDS_TRANSACTIONDETAILS\",showFilter:this.props.Login.showFilter,openFilter:this.openFilter,closeFilter:this.closeFilter,onFilterSubmit:this.onFilterSubmit,handlePageChange:this.handlePageChange,skip:this.state.skip,take:this.state.take,needFilter:true,needAccordianFilter:false,filterComponent:[{\"IDS_TRANSACTIONDETAILS\":/*#__PURE__*/React.createElement(FlexTransactionFilter,{selectedRecord:this.state.selectedRecord||{},filterViewType:this.state.viewFilterTypeList,transfilterViewType:this.state.transFilterTypeList,handleDateChange:this.handleDateChange,fromDate:fromDate,toDate:toDate,userInfo:this.props.Login.userInfo,onComboChange:this.onComboChange})}],commonActions:/*#__PURE__*/React.createElement(ProductList,{className:\"d-flex product-category float-right\"},/*#__PURE__*/React.createElement(Button,{className:\"btn btn-circle outline-grey ml-2 p-0\",variant:\"link\",onClick:function onClick(){return _this2.onReload();},\"data-tip\":this.props.intl.formatMessage({id:\"IDS_REFRESH\"})},/*#__PURE__*/React.createElement(RefreshIcon,{className:\"custom_icons\"})))}),/*#__PURE__*/React.createElement(PerfectScrollbar,null,/*#__PURE__*/React.createElement(\"div\",{ref:this.myRef},this.props.Login.masterData.SelectedTransactionDate&&this.props.Login.masterData.SelectedTransactionDate!==undefined?/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},/*#__PURE__*/React.createElement(Card.Body,{className:\"form-static-wrap padding-class\"},/*#__PURE__*/React.createElement(DataGrid,{selectedId:this.props.Login.selectedId,gridHeight:this.state.gridHeight+'px',expandField:\"expanded\",userRoleControlRights:this.state.userRoleControlRights&&this.state.userRoleControlRights,pageable:true,pageSizes:this.props.Login.settings&&this.props.Login.settings[17].split(\",\").map(function(setting){return parseInt(setting);}),scrollable:\"scrollable\",primaryKeyField:\"ntransactionsampleresultno\",data:this.props.Login.masterData.TransactionDetails||[],dataResult:this.state.dataResult,dataState:this.state.selectedRecord&&this.state.selectedRecord[\"nauditactionfiltercode\"]&&this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?this.state.dataStateAll:this.state.dataState,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList||[],controlMap:this.state.controlMap,methodUrl:\"AuditTrail\",groupable:this.state.selectedRecord&&this.state.selectedRecord[\"nauditactionfiltercode\"]?this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?true:false:false//isActionRequired={false}\n,isToolBarRequired:true,isAddRequired:false,isRefreshRequired:false,isDownloadPDFRequired:false,isDownloadExcelRequired:true,isExportExcelRequired:true,isIdsField:\"yes\",isActionRequired:false// actionIcons={[{\n//     title: this.props.intl.formatMessage({ id: \"IDS_VIEWCHANGES\" }),\n//     controlname: \"faEye\",\n//     objectName: \"TransactionDetails\",\n//     hidden: this.state.userRoleControlRights.indexOf(ViewTransactionDetails) === -1,\n//     onClick: (TransactionDetails) => this.ViewTransactionDetails(TransactionDetails)\n// }]}\n,exportExcelNew:this.exportExcelNew,onExpandChange:this.expandChange,hideDetailBand:true})))):\"\")))))),this.props.Login.openModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,hideSave:true,addComponent:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:\"ntransactionsampleresultno\",detailedFieldList:this.feildsForGrid,extractedColumnList:this.feildsForGrid,dataResult:this.props.Login.masterData[\"ViewTransactionDetails\"]&&this.props.Login.masterData[\"ViewTransactionDetails\"].length>0&&process(this.props.Login.masterData[\"ViewTransactionDetails\"],this.props.Login.viewTransDetailsDataState?this.props.Login.viewTransDetailsDataState:{skip:0,take:50}),dataState:this.props.Login.screenName===undefined||this.props.Login.screenName===this.props.intl.formatMessage({id:'IDS_TRANSACTIONVIEWDETAILS'})?this.props.Login.viewTransDetailsDataState?this.props.Login.viewTransDetailsDataState:{skip:0,take:50}:{skip:0,take:50},dataStateChange:function dataStateChange(event){return _this2.dataStateAuditView(event);},controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,pageable:true,pageSizes:this.props.Login.settings&&this.props.Login.settings[17].split(\",\").map(function(setting){return parseInt(setting);}),scrollable:'scrollable',gridHeight:'600px',hideColumnFilter:true,selectedId:0}))}));}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.myRef.current.offsetParent.clientHeight!==this.state.gridHeight){this.setState({gridHeight:this.myRef.current.offsetParent.clientHeight});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var updateState=false;var _this$state=this.state,selectedRecord=_this$state.selectedRecord,viewFilterTypeList=_this$state.viewFilterTypeList,dataStateAll=_this$state.dataStateAll,dataState=_this$state.dataState,dataResult=_this$state.dataResult,skip=_this$state.skip,take=_this$state.take,transFilterTypeList=_this$state.transFilterTypeList;if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){updateState=true;selectedRecord=this.props.Login.selectedRecord;}if(this.props.Login.masterData.viewFilterType!==previousProps.Login.masterData.viewFilterType){updateState=true;var viewTypeAMap=constructOptionList(this.props.Login.masterData.viewFilterTypeList||[],\"nauditactionfiltercode\",\"sauditactionfiltername\",\"nsorter\",\"ascending\",false);var viewFilterTypeLists=viewTypeAMap.get(\"OptionList\");viewFilterTypeList=viewFilterTypeLists;selectedRecord={nauditactionfiltercode:viewFilterTypeLists.length>0?{\"value\":viewFilterTypeLists[0].item.nauditactionfiltercode,\"label\":viewFilterTypeLists[0].item.sauditactionfiltername}:this.state.selectedRecord[\"nauditactionfiltercode\"]};}if(this.props.Login.masterData.transFilterTypeList!==previousProps.Login.masterData.transFilterTypeList){updateState=true;var transTypeAMap=constructOptionList(this.props.Login.masterData.transFilterTypeList||[],\"ntransdetailsfiltercode\",\"sdisplayname\",\"nsorter\",\"ascending\",false);var transFilterTypeLists=transTypeAMap.get(\"OptionList\");transFilterTypeList=transFilterTypeLists;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{ntransfiltercode:transFilterTypeLists.length>0?{\"value\":transFilterTypeLists[0].item.ntransdetailsfiltercode,\"label\":transFilterTypeLists[0].item.sdisplayname}:this.state.selectedRecord[\"ntransfiltercode\"]});}if(this.props.Login.resetDataGridPage&&this.props.Login.resetDataGridPage!==previousProps.Login.resetDataGridPage){if(this.state.selectedRecord[\"nauditactionfiltercode\"].value===1){dataStateAll.skip=0;updateState=true;}else{dataState.skip=0;updateState=true;}}if(this.props.Login.masterData!==previousProps.Login.masterData){updateState=true;if(this.state.selectedRecord&&this.state.selectedRecord[\"nauditactionfiltercode\"]&&this.state.selectedRecord[\"nauditactionfiltercode\"].value===1){dataStateAll={skip:0,take:dataStateAll.take};updateState=true;}else{dataState={skip:0,take:dataState.take};updateState=true;}var transactionDetailsDate=this.props.Login.masterData.TransactionDetails&&this.props.Login.masterData.TransactionDetails.slice(dataState.skip,this.props.Login.masterData.TransactionDetails.length)||[];dataResult=process(transactionDetailsDate||[],dataState);skip=this.props.Login.skip===undefined?skip:this.props.Login.skip;take=this.props.Login.take||take;}if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){updateState=true;var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData.ControlRights});}if(updateState){this.setState({selectedRecord:selectedRecord,viewFilterTypeList:viewFilterTypeList,dataStateAll:dataStateAll,dataState:dataState,dataResult:dataResult,skip:skip,take:take,transFilterTypeList:transFilterTypeList});}}}]);return FlexTransaction;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};export default connect(mapStateToProps,{callService:callService,filterTransactionList:filterTransactionList,getTransactionDetail:getTransactionDetail,getFilterTransactionDetailsRecords:getFilterTransactionDetailsRecords,updateStore:updateStore,ViewTransactionDetails:ViewTransactionDetails,getexportdata:getexportdata})(injectIntl(FlexTransaction));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/flextransaction/FlexTransaction.jsx"],"names":["React","connect","injectIntl","Row","Col","Button","Card","callService","filterTransactionList","getTransactionDetail","getFilterTransactionDetailsRecords","updateStore","ViewTransactionDetails","getexportdata","constructOptionList","convertDateValuetoString","getControlMap","rearrangeDateFormat","getStartOfDay","getEndOfDay","FlexTransactionFilter","BreadcrumbComponent","SplitterLayout","DataGrid","SlideOutModal","PerfectScrollbar","ContentPanel","TransactionListMaster","ProductList","process","DEFAULT_RETURN","toast","FlexTransaction","props","dataStateChange","event","state","selectedRecord","value","setState","dataResult","Login","masterData","TransactionDetails","dataState","dataStateAll","kendoSkip","skip","kendoTake","data","filter","sort","auditdata","slice","take","handlePageChange","e","dataStateAuditView","updateInfo","typeName","viewTransDetailsDataState","closeModal","openModal","selectedId","details","screenName","intl","formatMessage","id","userInfo","onComboChange","comboData","fieldName","expandChange","dataItem","target","expandField","exportExcelNew","fromDate","FromDate","toDate","ToDate","dataField","extractedColumnList","map","item","idsName","obj","inputData","viewtypecode","userinfo","sregistereddate","SelectedTransactionDate","nformcode","inputParam","onFilterSubmit","breadCrumbFrom","breadCrumbTo","validateFromDate","validateToDate","breadCrumbTransaDetails","breadCrumbViewType","diffInMilliseconds","Math","abs","days","ceil","diffYear","getFullYear","diffMonth","getMonth","monthss","transFilterType","postParamList","filterParam","searchRef","detailSkip","viewFilterType","label","sauditactionfiltername","nauditactionfiltercode","sdisplayname","ntransfiltertypecode","warn","onReload","handleDateChange","dateName","dateValue","paneSizeChange","eve","splitChangeWidthPercentage","breadcrumbList","breadCrumbArray","push","breadCrumbto","myRef","createRef","searchFieldList","searchTransactionRef","settings","parseInt","controlMap","Map","userRoleControlRights","gridHeight","breadCrumbData","viewTypecode","ntransdetailsfiltercode","feildsForGrid","inputListName","selectedObject","primaryKeyField","fetchUrl","fecthInputObject","filteredListName","clearFilter","updatedListname","unchangeList","changeList","searchedTransactionDetails","TransactionDate","showFilter","openFilter","closeFilter","viewFilterTypeList","transFilterTypeList","undefined","split","setting","length","current","offsetParent","clientHeight","previousProps","updateState","viewTypeAMap","viewFilterTypeLists","get","transTypeAMap","transFilterTypeLists","ntransfiltercode","resetDataGridPage","transactionDetailsDate","Object","values","ncontrolcode","ControlRights","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport { Row, Col, Button, Card } from 'react-bootstrap';\r\nimport { callService, filterTransactionList, getTransactionDetail, getFilterTransactionDetailsRecords, updateStore, ViewTransactionDetails, getexportdata } from '../../actions';\r\nimport { constructOptionList, convertDateValuetoString, getControlMap, rearrangeDateFormat, getStartOfDay, getEndOfDay } from '../../components/CommonScript';\r\nimport FlexTransactionFilter from './FlexTransactionFilter';\r\nimport BreadcrumbComponent from '../../components/Breadcrumb.Component';\r\nimport SplitterLayout from 'react-splitter-layout';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { ContentPanel } from '../../components/App.styles';\r\nimport TransactionListMaster from '../../components/TransactionListMaster';\r\nimport { ReactComponent as RefreshIcon } from '../../assets/image/refresh.svg';\r\nimport { ProductList } from '../product/product.styled';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { toast } from 'react-toastify';\r\n\r\nclass FlexTransaction extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.myRef = React.createRef();\r\n        this.searchFieldList = [\"sregisteredtransactiondate\"]\r\n        this.searchTransactionRef = React.createRef();\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5,\r\n        };\r\n        const dataStateAll = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5\r\n        };\r\n\r\n        this.state = {\r\n            viewTransDetailsDataState: { skip: 0, take: 10 },\r\n            splitChangeWidthPercentage: 30,\r\n            dataState: dataState,\r\n            dataStateAll: dataStateAll,\r\n            skip: 0,\r\n            take: this.props.Login.settings && this.props.Login.settings[3],\r\n            kendoSkip: 0,\r\n            kendoTake: this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5,\r\n            controlMap: new Map(),\r\n            userRoleControlRights: [],\r\n            gridHeight: 'auto',\r\n        }\r\n        this.searchRef = React.createRef();\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        if (this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\r\n            this.setState({\r\n                dataResult: process(this.props.Login.masterData.TransactionDetails || [], event.dataState),\r\n                dataStateAll: event.dataState, kendoSkip: event.dataState.skip, kendoTake: event.dataState.skip\r\n            });\r\n        }\r\n        else {\r\n            let data = [];\r\n            if (event.dataState.filter === null && event.dataState.sort === null) {\r\n                let auditdata = (this.props.Login.masterData.TransactionDetails &&\r\n                    this.props.Login.masterData.TransactionDetails.slice(0,\r\n                        event.dataState.take + event.dataState.skip)) || []\r\n                data = process(auditdata || [], event.dataState)\r\n            } else {\r\n\r\n                data = process(this.props.Login.masterData.TransactionDetails || [], event.dataState)\r\n\r\n            }\r\n            this.setState({\r\n                dataResult: data,\r\n                dataState: event.dataState,\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        //const ViewTransactionDetails = this.state.controlMap.has(\"ViewTansactionDetails\") && this.state.controlMap.get(\"ViewTansactionDetails\").ncontrolcode;\r\n        this.breadCrumbData = this.breadcrumbList();\r\n        let obj = convertDateValuetoString(this.props.Login.masterData.FromDate,\r\n            this.props.Login.masterData.ToDate,\r\n            this.props.Login.userInfo);\r\n        let fromDate = \"\";\r\n        let toDate = \"\";\r\n\r\n        if (this.props.Login.masterData && this.props.Login.masterData.FromDate) {\r\n            fromDate = (this.state.selectedRecord && this.state.selectedRecord[\"fromdate\"] && getStartOfDay(this.state.selectedRecord[\"fromdate\"])) || rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.FromDate);\r\n            toDate = (this.state.selectedRecord && this.state.selectedRecord[\"todate\"] && getEndOfDay(this.state.selectedRecord[\"todate\"])) || rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.ToDate);\r\n        }\r\n        let inputParam = {\r\n            masterData: this.props.Login.masterData,\r\n            userinfo: this.props.Login.userInfo,\r\n            skip: this.state.skip,\r\n            take: this.state.take,\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            viewTypecode: this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.value :\r\n                this.props.Login.masterData.viewFilterType ? this.props.Login.masterData.viewFilterType.nauditactionfiltercode : 0,\r\n            transFilterType: this.props.Login.masterData.breadCrumbTransaDetails ? this.props.Login.masterData.breadCrumbTransaDetails.value :\r\n                this.props.Login.masterData.transFilterType ? this.props.Login.masterData.transFilterType.ntransdetailsfiltercode : 0,\r\n        }\r\n        this.extractedColumnList = [\r\n            { \"idsName\": \"IDS_LABREGDATE\", \"dataField\": \"sregistereddate\", \"width\": \"200px\", \"componentName\": \"date\" },\r\n            { \"idsName\": \"IDS_LAB\", \"dataField\": \"slabname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_PLANT\", \"dataField\": \"splantname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_LABREGNO\", \"dataField\": \"slabregno\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_EXTERNALREFNO\", \"dataField\": \"sexternalrefcode\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_SAMPLE\", \"dataField\": \"ssamplename\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_BATCHNO\", \"dataField\": \"sbatchno\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_LOTNO\", \"dataField\": \"slotno\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_TEST\", \"dataField\": \"stestname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_PARAMETER\", \"dataField\": \"sparametername\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_RESULTVALUE\", \"dataField\": \"sfinal\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_RESULTSTATUS\", \"dataField\": \"resultstatus\", \"width\": \"200px\" },\r\n        ]\r\n\r\n        this.feildsForGrid =\r\n            [\r\n                { \"idsName\": \"IDS_FIELDNAME\", \"dataField\": \"sfieldname\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_VALUE\", \"dataField\": \"svalue\", \"width\": \"100px\" }\r\n            ];\r\n        this.filterParam = {\r\n            inputListName: \"TransactionDate\", selectedObject: \"SelectedTransactionDate\", primaryKeyField: \"sregistereddate\",\r\n            fetchUrl: \"flextransaction/getTrendChartDate\", masterData: this.props.Login.masterData,\r\n\r\n            fecthInputObject: {\r\n                userinfo: this.props.Login.userInfo,\r\n                fromDate: obj.fromDate,\r\n                toDate: obj.toDate,\r\n                viewTypecode: this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.value :\r\n                    this.props.Login.masterData.viewFilterType ? this.props.Login.masterData.viewFilterType.nauditactionfiltercode : 0,\r\n                transFilterType: this.props.Login.masterData.breadCrumbTransaDetails ? this.props.Login.masterData.breadCrumbTransaDetails.value :\r\n                    this.props.Login.masterData.transFilterType ? this.props.Login.masterData.transFilterType.ntransdetailsfiltercode : 0,\r\n\r\n\r\n            },\r\n            filteredListName: \"searchedTransactionDate\",\r\n            clearFilter: \"no\",\r\n            updatedListname: \"SelectedTransactionDate\",\r\n            searchRef: this.searchTransactionRef,\r\n            searchFieldList: this.searchFieldList,\r\n            unchangeList: [\"viewFilterTypeList\", \"transFilterTypeList\"],\r\n            changeList: [\"TransactionDetails\"]\r\n\r\n        };\r\n\r\n        this.postParamList = [\r\n            {\r\n                filteredListName: \"searchedTransactionDate\",\r\n                clearFilter: \"no\",\r\n                searchRef: this.searchRef,\r\n                primaryKeyField: \"sregistereddate\",\r\n                fetchUrl: \"audittrail/getFilterTransactionDetailsRecords\",\r\n                fecthInputObject: this.filterParam,\r\n                selectedObject: \"SelectedTransactionDate\",\r\n                inputListName: \"TransactionDate\",\r\n                updatedListname: \"SelectedTransactionDate\",\r\n                unchangeList: [\"viewFilterTypeList\", \"transFilterTypeList\"]\r\n            }];\r\n\r\n        return (\r\n            <>\r\n                <div className=\"mtop-fixed-breadcrumb client-listing-wrap\">\r\n                    <BreadcrumbComponent breadCrumbItem={this.breadCrumbData} />\r\n                    <Row noGutters>\r\n                        <Col md={12} className=\"parent-port-height sticky_head_parent\" >\r\n                            <SplitterLayout borderColor=\"#999\"\r\n                                primaryIndex={1}\r\n                                percentage={true}\r\n                                secondaryInitialSize={this.state.splitChangeWidthPercentage}\r\n                                onSecondaryPaneSizeChange={this.paneSizeChange}\r\n                                primaryMinSize={40}\r\n                                secondaryMinSize={20}\r\n                            >\r\n                                <TransactionListMaster\r\n                                    splitChangeWidthPercentage={this.state.splitChangeWidthPercentage}\r\n                                    masterList={this.props.Login.masterData.searchedTransactionDetails ||\r\n                                        (this.props.Login.masterData.TransactionDate || [])}\r\n                                    selectedMaster={[this.props.Login.masterData.SelectedTransactionDate]}\r\n                                    primaryKeyField=\"sregistereddate\"\r\n                                    inputParam={inputParam}\r\n                                    mainField=\"sregisteredtransactiondate\"\r\n                                    selectedListName=\"SelectedTransactionDate\"\r\n                                    filterColumnData={this.props.filterTransactionList}\r\n                                    getMasterDetail={this.props.getTransactionDetail}\r\n                                    searchListName=\"searchedTransactionDetails\"\r\n                                    searchRef={this.searchRef}\r\n                                    filterParam={this.filterParam}\r\n                                    objectName=\"transactionDetails\"\r\n                                    listName=\"IDS_TRANSACTIONDETAILS\"\r\n                                    showFilter={this.props.Login.showFilter}\r\n                                    openFilter={this.openFilter}\r\n                                    closeFilter={this.closeFilter}\r\n                                    onFilterSubmit={this.onFilterSubmit}\r\n                                    handlePageChange={this.handlePageChange}\r\n                                    skip={this.state.skip}\r\n                                    take={this.state.take}\r\n                                    needFilter={true}\r\n                                    needAccordianFilter={false}\r\n                                    filterComponent={[\r\n                                        {\r\n                                            \"IDS_TRANSACTIONDETAILS\":\r\n                                                <FlexTransactionFilter\r\n                                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                                    filterViewType={this.state.viewFilterTypeList}\r\n                                                    transfilterViewType={this.state.transFilterTypeList}\r\n                                                    handleDateChange={this.handleDateChange}\r\n                                                    fromDate={fromDate}\r\n                                                    toDate={toDate}\r\n                                                    userInfo={this.props.Login.userInfo}\r\n                                                    onComboChange={this.onComboChange}\r\n                                                />\r\n                                        }\r\n                                    ]}\r\n                                    commonActions={\r\n                                        <ProductList className=\"d-flex product-category float-right\">\r\n                                            <Button className=\"btn btn-circle outline-grey ml-2 p-0\" variant=\"link\"\r\n                                                onClick={() => this.onReload()}\r\n                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_REFRESH\" })}>\r\n                                                <RefreshIcon className='custom_icons' />\r\n                                            </Button>\r\n                                        </ProductList>\r\n                                    }\r\n                                />\r\n                                <PerfectScrollbar>\r\n                                    <div ref={this.myRef}>\r\n                                        {this.props.Login.masterData.SelectedTransactionDate && this.props.Login.masterData.SelectedTransactionDate !== undefined ?\r\n                                            <ContentPanel className=\"panel-main-content\">\r\n                                                <Card className=\"border-0\">\r\n                                                    <Card.Body className='form-static-wrap padding-class'>\r\n                                                        <DataGrid\r\n                                                            selectedId={this.props.Login.selectedId}\r\n                                                            gridHeight={this.state.gridHeight + 'px'}\r\n                                                            expandField=\"expanded\"\r\n                                                            userRoleControlRights={this.state.userRoleControlRights && this.state.userRoleControlRights}\r\n                                                            pageable={true}\r\n                                                            pageSizes={this.props.Login.settings && this.props.Login.settings[17].split(\",\").map(setting => parseInt(setting))}\r\n                                                            scrollable={\"scrollable\"}\r\n                                                            primaryKeyField=\"ntransactionsampleresultno\"\r\n                                                            data={this.props.Login.masterData.TransactionDetails || []}\r\n                                                            dataResult={this.state.dataResult}\r\n                                                            dataState={this.state.selectedRecord && this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll\r\n                                                                : this.state.dataState}\r\n                                                            dataStateChange={this.dataStateChange}\r\n                                                            extractedColumnList={this.extractedColumnList || []}\r\n                                                            controlMap={this.state.controlMap}\r\n                                                            methodUrl=\"AuditTrail\"\r\n                                                            groupable={this.state.selectedRecord && this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? true : false : false}\r\n                                                            //isActionRequired={false}\r\n                                                            isToolBarRequired={true}\r\n                                                            isAddRequired={false}\r\n                                                            isRefreshRequired={false}\r\n                                                            isDownloadPDFRequired={false}\r\n                                                            isDownloadExcelRequired={true}\r\n                                                            isExportExcelRequired={true}\r\n                                                            isIdsField=\"yes\"\r\n                                                            isActionRequired={false}\r\n                                                            // actionIcons={[{\r\n                                                            //     title: this.props.intl.formatMessage({ id: \"IDS_VIEWCHANGES\" }),\r\n                                                            //     controlname: \"faEye\",\r\n                                                            //     objectName: \"TransactionDetails\",\r\n                                                            //     hidden: this.state.userRoleControlRights.indexOf(ViewTransactionDetails) === -1,\r\n                                                            //     onClick: (TransactionDetails) => this.ViewTransactionDetails(TransactionDetails)\r\n                                                            // }]}\r\n                                                            exportExcelNew={this.exportExcelNew}\r\n                                                            onExpandChange={this.expandChange}\r\n                                                            hideDetailBand={true}\r\n                                                        />\r\n                                                    </Card.Body>\r\n                                                </Card>\r\n                                            </ContentPanel>\r\n\r\n                                            : \"\"\r\n                                        }\r\n                                    </div>\r\n                                </PerfectScrollbar>\r\n                            </SplitterLayout>\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n                {\r\n                    this.props.Login.openModal &&\r\n                    <SlideOutModal show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        hideSave={true}\r\n                        addComponent={\r\n                            <>\r\n                                <DataGrid\r\n                                    primaryKeyField=\"ntransactionsampleresultno\"\r\n                                    detailedFieldList={this.feildsForGrid}\r\n                                    extractedColumnList={this.feildsForGrid}\r\n                                    dataResult={this.props.Login.masterData[\"ViewTransactionDetails\"] && this.props.Login.masterData[\"ViewTransactionDetails\"].length > 0\r\n                                        && process(this.props.Login.masterData[\"ViewTransactionDetails\"],\r\n                                            this.props.Login.viewTransDetailsDataState ? this.props.Login.viewTransDetailsDataState : { skip: 0, take: 50 })}\r\n                                    dataState={(this.props.Login.screenName === undefined || this.props.Login.screenName === this.props.intl.formatMessage({ id: 'IDS_TRANSACTIONVIEWDETAILS' }))\r\n                                        ? this.props.Login.viewTransDetailsDataState ? this.props.Login.viewTransDetailsDataState : { skip: 0, take: 50 } : { skip: 0, take: 50 }}\r\n                                    dataStateChange={(event) => this.dataStateAuditView(event)}\r\n                                    controlMap={this.state.controlMap}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    pageable={true}\r\n                                    pageSizes={this.props.Login.settings && this.props.Login.settings[17].split(\",\").map(setting => parseInt(setting))} scrollable={'scrollable'}\r\n                                    gridHeight={'600px'}\r\n                                    hideColumnFilter={true}\r\n                                    selectedId={0}\r\n                                >\r\n                                </DataGrid>\r\n                            </>\r\n                        }\r\n                    />\r\n\r\n\r\n\r\n                }\r\n            </>\r\n\r\n        );\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.myRef.current.offsetParent.clientHeight !== this.state.gridHeight) {\r\n            this.setState({\r\n                gridHeight: this.myRef.current.offsetParent.clientHeight\r\n            })\r\n\r\n        }\r\n    }\r\n    handlePageChange = e => {\r\n        this.setState({\r\n            skip: e.skip,\r\n            take: e.take\r\n        });\r\n    };\r\n\r\n    dataStateAuditView = (event) => {\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { viewTransDetailsDataState: event.dataState }\r\n        }\r\n\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeModal = () => {\r\n        let openModal = this.props.Login.openModal;\r\n        openModal = false;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, viewTransDetailsDataState: { skip: 0, take: 50 }, selectedId: null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    ViewTransactionDetails = (details) => {\r\n        const screenName = this.props.intl.formatMessage({ id: 'IDS_TRANSACTIONVIEWDETAILS' });\r\n        this.props.ViewTransactionDetails(this.props.Login.masterData, this.props.Login.userInfo, details, screenName);\r\n    };\r\n    onComboChange = (comboData, fieldName) => {\r\n        if (comboData != null) {\r\n            if (fieldName === \"ntransfiltercode\" || fieldName === \"nauditactionfiltercode\") {\r\n                const selectedRecord = this.state.selectedRecord || {};\r\n                selectedRecord[fieldName] = comboData;\r\n                this.setState({ selectedRecord });\r\n            }\r\n        }\r\n        else {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n            selectedRecord[fieldName] = comboData;\r\n            this.setState({ selectedRecord });\r\n        }\r\n    }\r\n    expandChange = (event) => {\r\n        event.dataItem[event.target.props.expandField] = event.value;\r\n        this.setState({\r\n            dataResult: process(this.props.Login.masterData.TransactionDetails || [], this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll :\r\n                this.state.dataState),\r\n            dataState: this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll\r\n                : this.state.dataState,\r\n        });\r\n    };\r\n\r\n    // openFilter = () => {\r\n    //     let showFilter = !this.props.Login.showFilter\r\n    //     const updateInfo = {\r\n    //         typeName: DEFAULT_RETURN,\r\n    //         data: { showFilter }\r\n    //     }\r\n    //     this.props.updateStore(updateInfo);\r\n    // }\r\n\r\n    // closeFilter = () => {\r\n\r\n    //     const updateInfo = {\r\n    //         typeName: DEFAULT_RETURN,\r\n    //         data: { showFilter: false }\r\n    //     }\r\n    //     this.props.updateStore(updateInfo);\r\n    // }\r\n\r\n    exportExcelNew = () => {\r\n        let fromDate = this.props.Login.masterData.FromDate;\r\n        let toDate = this.props.Login.masterData.ToDate;\r\n        let dataField = {};\r\n        [...this.extractedColumnList].map((item) => {\r\n            dataField[item.dataField] = this.props.intl.formatMessage({ id: item.idsName })\r\n        })\r\n\r\n        let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);\r\n        let inputData = {\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\r\n            userinfo: this.props.Login.userInfo,\r\n            sregistereddate: this.props.Login.masterData.SelectedTransactionDate.sregistereddate,\r\n            nformcode: this.props.Login.userInfo.nformcode,\r\n            dataField\r\n\r\n        }\r\n\r\n        let inputParam = { inputData }\r\n        this.props.getexportdata(inputParam);\r\n    }\r\n    onFilterSubmit = () => {\r\n\r\n        let breadCrumbFrom = this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.FromDate);\r\n        let breadCrumbTo = this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.ToDate);\r\n        let validateFromDate = this.state.selectedRecord[\"fromdate\"] ? this.state.selectedRecord[\"fromdate\"] : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.FromDate);\r\n        let validateToDate = this.state.selectedRecord[\"todate\"] ? this.state.selectedRecord[\"todate\"] : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.ToDate);\r\n        let breadCrumbTransaDetails = this.state.selectedRecord['ntransfiltercode']\r\n        let breadCrumbViewType = this.state.selectedRecord['nauditactionfiltercode']\r\n\r\n        const diffInMilliseconds = Math.abs(validateToDate - validateFromDate);\r\n        const days = Math.ceil(diffInMilliseconds / (1000 * 60 * 60 * 24));\r\n\r\n        const diffYear = validateToDate.getFullYear() - validateFromDate.getFullYear();\r\n        const diffMonth = validateToDate.getMonth() - validateFromDate.getMonth();\r\n        const monthss = diffYear * 12 + diffMonth;\r\n\r\n        if (this.state.selectedRecord[\"nauditactionfiltercode\"].value !== 1 || (this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 && (monthss <= 12 && (days <= 365 || days <= 366)))) {\r\n            let masterData = {\r\n                ...this.props.Login.masterData, breadCrumbFrom, breadCrumbTo, breadCrumbTransaDetails, breadCrumbViewType\r\n            }\r\n            let fromDate = this.state.selectedRecord[\"fromdate\"] ? this.state.selectedRecord[\"fromdate\"] : this.props.Login.masterData.FromDate;\r\n            let toDate = this.state.selectedRecord[\"todate\"] ? this.state.selectedRecord[\"todate\"] : this.props.Login.masterData.ToDate;\r\n\r\n            let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);\r\n            let inputData = {\r\n                fromDate: obj.fromDate,\r\n                toDate: obj.toDate,\r\n                transFilterType: this.state.selectedRecord[\"ntransfiltercode\"] ? this.state.selectedRecord[\"ntransfiltercode\"].value : 0,\r\n                viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : -1,\r\n                userinfo: this.props.Login.userInfo,\r\n                postParamList: this.filterParam,\r\n            }\r\n\r\n            let inputParam = {\r\n                masterData, inputData, searchRef: this.searchRef,\r\n                detailSkip: this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll.skip : this.state.dataState.skip\r\n            }\r\n            this.props.getFilterTransactionDetailsRecords(inputParam)\r\n        } else {\r\n            let selectedRecord = this.state.selectedRecord;\r\n            selectedRecord['fromdate'] = rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.FromDate)\r\n            selectedRecord['toDate'] = rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.ToDate)\r\n            selectedRecord['nauditactionfiltercode'] = this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType :\r\n                {\r\n                    item: this.props.Login.masterData.viewFilterType,\r\n                    label: this.props.Login.masterData.viewFilterType.sauditactionfiltername, value: this.props.Login.masterData.viewFilterType.nauditactionfiltercode\r\n                }\r\n            selectedRecord['ntransfiltercode'] = this.props.Login.masterData.breadCrumbTransaDetails ? this.props.Login.masterData.breadCrumbTransaDetails :\r\n                {\r\n                    item: this.props.Login.masterData.transFilterType,\r\n                    label: this.props.Login.masterData.transFilterType.sdisplayname, value: this.props.Login.masterData.transFilterType.ntransfiltertypecode\r\n                }\r\n            this.setState({ selectedRecord });\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_DATERANGESHOULDEMAXONEYEAR\" }));\r\n        }\r\n    }\r\n\r\n    onReload = () => {\r\n        let breadCrumbFrom = this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.FromDate);\r\n        let breadCrumbTo = this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.ToDate);\r\n        let breadCrumbTransaDetails = this.state.selectedRecord['ntransfiltercode']\r\n        let breadCrumbViewType = this.state.selectedRecord['nauditactionfiltercode'];\r\n\r\n        let fromDate = this.props.Login.masterData.FromDate;\r\n        let toDate = this.props.Login.masterData.ToDate;\r\n\r\n        let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);\r\n        let inputData = {\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            transFilterType: this.state.selectedRecord[\"ntransfiltercode\"] ? this.state.selectedRecord[\"ntransfiltercode\"].value : 0,\r\n            viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : -1,\r\n            userinfo: this.props.Login.userInfo,\r\n            postParamList: this.filterParam,\r\n        }\r\n\r\n        let masterData = {\r\n            ...this.props.Login.masterData, breadCrumbFrom, breadCrumbTo, breadCrumbTransaDetails, breadCrumbViewType\r\n        }\r\n\r\n        let inputParam = { masterData, inputData, searchRef: this.searchRef, detailSkip: this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll.skip : this.state.dataState.skip }\r\n        this.props.getFilterTransactionDetailsRecords(inputParam)\r\n    }\r\n    handleDateChange = (dateName, dateValue) => {\r\n        let selectedRecord = this.state.selectedRecord;\r\n        selectedRecord[dateName] = dateValue;\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n    paneSizeChange = (eve) => {\r\n        this.setState({\r\n            splitChangeWidthPercentage: eve\r\n        })\r\n    }\r\n\r\n    breadcrumbList = () => {\r\n        let breadCrumbArray = [];\r\n        let fromDate = this.props.Login.masterData.FromDate ? this.props.Login.masterData.FromDate : this.props.Login.masterData.breadCrumbFrom;\r\n        let toDate = this.props.Login.masterData.ToDate ? this.props.Login.masterData.ToDate : this.props.Login.masterData.breadCrumbTo;\r\n\r\n        let obj = convertDateValuetoString(fromDate,\r\n            toDate,\r\n            this.props.Login.userInfo);\r\n        breadCrumbArray.push({\r\n            \"label\": \"IDS_FROM\",\r\n            \"value\": obj.breadCrumbFrom\r\n        }, {\r\n            \"label\": \"IDS_TO\",\r\n            \"value\": obj.breadCrumbto\r\n        });\r\n\r\n        // breadCrumbArray.push(\r\n        //     {\r\n        //         \"label\": \"IDS_RECORDTODISPLAY\",\r\n        //         \"value\": this.props.Login.masterData.breadCrumbTransaDetails ? this.props.Login.masterData.breadCrumbTransaDetails.label :\r\n        //             this.props.Login.masterData.transFilterType ? this.props.Login.masterData.transFilterType.sdisplayname : \"\"\r\n        //     });\r\n\r\n        breadCrumbArray.push(\r\n            {\r\n                \"label\": \"IDS_VIEWPERIOD\",\r\n                \"value\": this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.label :\r\n                    this.props.Login.masterData.viewFilterType ? this.props.Login.masterData.viewFilterType.sauditactionfiltername : \"\"\r\n            });\r\n\r\n\r\n        return breadCrumbArray;\r\n    };\r\n\r\n    componentDidUpdate(previousProps) {\r\n\r\n        let updateState = false;\r\n        let { selectedRecord, viewFilterTypeList, dataStateAll, dataState, dataResult, skip, take, transFilterTypeList } = this.state\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            updateState = true;\r\n            selectedRecord = this.props.Login.selectedRecord;\r\n        }\r\n        if (this.props.Login.masterData.viewFilterType !== previousProps.Login.masterData.viewFilterType) {\r\n            updateState = true;\r\n            const viewTypeAMap = constructOptionList(this.props.Login.masterData.viewFilterTypeList || [], \"nauditactionfiltercode\",\r\n                \"sauditactionfiltername\", \"nsorter\", \"ascending\", false);\r\n            const viewFilterTypeLists = viewTypeAMap.get(\"OptionList\");\r\n            viewFilterTypeList = viewFilterTypeLists\r\n            selectedRecord = {\r\n                nauditactionfiltercode: viewFilterTypeLists.length > 0 ? {\r\n                    \"value\": viewFilterTypeLists[0].item.nauditactionfiltercode,\r\n                    \"label\": viewFilterTypeLists[0].item.sauditactionfiltername\r\n                } : this.state.selectedRecord[\"nauditactionfiltercode\"]\r\n            }\r\n\r\n        }\r\n        if (this.props.Login.masterData.transFilterTypeList !== previousProps.Login.masterData.transFilterTypeList) {\r\n            updateState = true;\r\n            const transTypeAMap = constructOptionList(this.props.Login.masterData.transFilterTypeList || [], \"ntransdetailsfiltercode\",\r\n                \"sdisplayname\", \"nsorter\", \"ascending\", false);\r\n            const transFilterTypeLists = transTypeAMap.get(\"OptionList\");\r\n            transFilterTypeList = transFilterTypeLists\r\n            selectedRecord = {\r\n                ...selectedRecord,\r\n                ntransfiltercode: transFilterTypeLists.length > 0 ? {\r\n                    \"value\": transFilterTypeLists[0].item.ntransdetailsfiltercode,\r\n                    \"label\": transFilterTypeLists[0].item.sdisplayname\r\n                } : this.state.selectedRecord[\"ntransfiltercode\"],\r\n            }\r\n        }\r\n\r\n        if (this.props.Login.resetDataGridPage && this.props.Login.resetDataGridPage !== previousProps.Login.resetDataGridPage) {\r\n            if (this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\r\n\r\n                dataStateAll.skip = 0\r\n                updateState = true;\r\n            }\r\n            else {\r\n\r\n                dataState.skip = 0\r\n                updateState = true;\r\n            }\r\n        }\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            updateState = true;\r\n            if (this.state.selectedRecord && this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\r\n\r\n                dataStateAll = { skip: 0, take: dataStateAll.take }\r\n                updateState = true;\r\n            }\r\n            else {\r\n\r\n                dataState = { skip: 0, take: dataState.take }\r\n                updateState = true;\r\n            }\r\n            const transactionDetailsDate = (this.props.Login.masterData.TransactionDetails && this.props.Login.masterData.TransactionDetails.slice(dataState.skip, this.props.Login.masterData.TransactionDetails.length)) || []\r\n            dataResult = process(transactionDetailsDate || [], dataState)\r\n\r\n            skip = this.props.Login.skip === undefined ? skip : this.props.Login.skip\r\n            take = this.props.Login.take || take\r\n\r\n        }\r\n        if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n            updateState = true;\r\n            const userRoleControlRights = [];\r\n            if (this.props.Login.userRoleControlRights) {\r\n                this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                    userRoleControlRights.push(item.ncontrolcode))\r\n            }\r\n\r\n            const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n            this.setState({\r\n                userRoleControlRights, controlMap, data: this.props.Login.masterData.ControlRights\r\n            });\r\n        }\r\n        if (updateState) {\r\n            this.setState({\r\n                selectedRecord, viewFilterTypeList, dataStateAll, dataState, dataResult, skip, take, transFilterTypeList\r\n            })\r\n        }\r\n\r\n    }\r\n}\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService, filterTransactionList, getTransactionDetail, getFilterTransactionDetailsRecords, updateStore, ViewTransactionDetails, getexportdata\r\n})(injectIntl(FlexTransaction));"]},"metadata":{},"sourceType":"module"}