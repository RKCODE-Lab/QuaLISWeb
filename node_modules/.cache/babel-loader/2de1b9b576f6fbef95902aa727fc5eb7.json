{"ast":null,"code":"import _objectSpread from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{injectIntl}from'react-intl';import{Row,Col,Button,Card,Nav}from'react-bootstrap';//Nav, Card, Button\n//import { Grid, GridColumn } from '@progress/kendo-react-grid';\nimport{process}from'@progress/kendo-data-query';import{toast}from'react-toastify';import PerfectScrollbar from'react-perfect-scrollbar';import{ContentPanel}from'../../components/App.styles';import{constructOptionList,getStartOfDay,getEndOfDay,sortData,validateTwoDigitDate,convertDateValuetoString,rearrangeDateFormat}from'../../components/CommonScript';//showEsign, getControlMap,\nimport{callService,crudMaster,validateEsignCredential,updateStore,filterTransactionList,filterColumnData,getAuditTrailDetail,getFilterAuditTrailRecords,getFormNameByModule,getExportExcel}from'../../actions';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import AuditTrailFilter from'./AuditTrailFilter';import TransactionListMaster from'../../components/TransactionListMaster';import BreadcrumbComponent from'../../components/Breadcrumb.Component';import DataGrid from'../../components/data-grid/data-grid.component';import SplitterLayout from'react-splitter-layout';import{ProductList}from'../product/product.styled';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faFileExcel,faSync}from'@fortawesome/free-solid-svg-icons';var AuditTrail=/*#__PURE__*/function(_React$Component){_inherits(AuditTrail,_React$Component);var _super=_createSuper(AuditTrail);function AuditTrail(props){var _this;_classCallCheck(this,AuditTrail);_this=_super.call(this,props);_this.dataStateChange=function(event){if(_this.state.selectedRecord[\"nauditactionfiltercode\"].value===1){_this.setState({dataResult:process(_this.props.Login.masterData.AuditDetails||[],event.dataState),dataStateAll:event.dataState,kendoSkip:event.dataState.skip,kendoTake:event.dataState.skip});}else{var data=[];if(event.dataState.filter===null&&event.dataState.sort===null){var auditdata=_this.props.Login.masterData.AuditDetails&&_this.props.Login.masterData.AuditDetails.slice(0,event.dataState.take+event.dataState.skip)||[];data=process(auditdata||[],event.dataState);}else{data=process(_this.props.Login.masterData.AuditDetails||[],event.dataState);}_this.setState({dataResult:data,dataState:event.dataState});}};_this.paneSizeChange=function(d){_this.setState({splitChangeWidthPercentage:d});};_this.pageChange=function(event){_this.setState({kendoSkip:event.page.skip,kendoTake:event.page.take});};_this.exportExcelNew=function(){var fromDate=_this.props.Login.masterData.FromDate;var toDate=_this.props.Login.masterData.ToDate;var obj=convertDateValuetoString(fromDate,toDate,_this.props.Login.userInfo);var inputData={fromDate:obj.fromDate,toDate:obj.toDate,modulecode:_this.state.selectedRecord[\"nmodulecode\"]?_this.state.selectedRecord[\"nmodulecode\"].value:0,formcode:_this.state.selectedRecord[\"nformcode\"]?_this.state.selectedRecord[\"nformcode\"].value:0,usercode:_this.state.selectedRecord[\"nusercode\"]?_this.state.selectedRecord[\"nusercode\"].value:0,userrole:_this.state.selectedRecord[\"nuserrolecode\"]?_this.state.selectedRecord[\"nuserrolecode\"].value:0,viewtypecode:_this.state.selectedRecord[\"nauditactionfiltercode\"]?_this.state.selectedRecord[\"nauditactionfiltercode\"].value:0,userinfo:_this.props.Login.userInfo,sauditdate:_this.props.Login.masterData.SelectedAuditTrail.saudittraildate,nauditformcode:78,ncontrolcode:78};var inputParam={inputData:inputData};_this.props.getExportExcel(inputParam);// if(this.props.Login.resultStatus === \"Success\"){\n//     toast.info(\"Excel export successfully\");\n// }\n};_this.expandChange=function(event){event.dataItem[event.target.props.expandField]=event.value;_this.setState({dataResult:process(_this.props.Login.masterData.AuditDetails||[],_this.state.selectedRecord[\"nauditactionfiltercode\"]&&_this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?_this.state.dataStateAll:_this.state.dataState),dataState:_this.state.selectedRecord[\"nauditactionfiltercode\"]&&_this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?_this.state.dataStateAll:_this.state.dataState});};_this.handlePageChange=function(e){_this.setState({skip:e.skip,take:e.take});//setTimeout(() => { this._scrollBarRef.updateScroll() })\n};_this.onReload=function(){// let dFromDate = this.props.Login.masterData.breadCrumbFrom ? (this.props.Login.masterData.breadCrumbFrom) : this.props.Login.masterData.FromDate;\n// let dToDate = this.props.Login.masterData.breadCrumbTo ? (this.props.Login.masterData.breadCrumbTo) : this.props.Login.masterData.ToDate;\n//var dTempFromDate = this.state.selectedRecord[\"fromdate\"] ? this.state.selectedRecord[\"fromdate\"] : this.props.Login.masterData.FromDate;\n//let dTempToDate = this.state.selectedRecord[\"todate\"] ? this.state.selectedRecord[\"todate\"] : this.props.Login.masterData.ToDate;\n//let temp = dFromDate.indexOf('-');\n// let fromMonth = (dTempFromDate.getMonth()+1);\n// let toMonth = (dTempToDate.getMonth()+1);\n// let fromMonth = String(new Date(dFromDate).getMonth() + 1)\n// let toMonth = String(new Date(dToDate).getMonth() + 1)\n// let fromYear = dFromDate.substring(0, 4);\n// let toYear = dToDate.substring(0, 4);\n// let ntempviewtypecode = 0;\nvar breadCrumbFrom=_this.props.Login.masterData.FromDate?_this.props.Login.masterData.FromDate:_this.props.Login.masterData.breadCrumbFrom;var breadCrumbTo=_this.props.Login.masterData.ToDate?_this.props.Login.masterData.ToDate:_this.props.Login.masterData.breadCrumbTo;var breadCrumbModule=_this.props.Login.masterData.breadCrumbModule;var breadCrumbForm=_this.props.Login.masterData.breadCrumbForm;var breadCrumbUser=_this.props.Login.masterData.breadCrumbUser;var breadCrumbRole=_this.props.Login.masterData.breadCrumbRole;var breadCrumbViewType=_this.props.Login.masterData.breadCrumbViewType?_this.props.Login.masterData.breadCrumbViewType:_this.props.Login.ViewType;var fromDate=_this.props.Login.masterData.FromDate;var toDate=_this.props.Login.masterData.ToDate;var obj=convertDateValuetoString(fromDate,toDate,_this.props.Login.userInfo);var inputData={fromDate:obj.fromDate,toDate:obj.toDate,modulecode:breadCrumbModule?breadCrumbModule.value:0,formcode:breadCrumbForm?breadCrumbForm.value:0,usercode:breadCrumbUser?breadCrumbUser.value:0,userrole:breadCrumbRole?breadCrumbRole.value:0,viewtypecode:breadCrumbViewType?breadCrumbViewType.value:_this.props.Login.masterData.ViewType.nauditactionfiltercode,// viewtypecode : this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode :0,\n// viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\nuserinfo:_this.props.Login.userInfo,postParamList:_this.filterParam};var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{breadCrumbFrom:breadCrumbFrom,breadCrumbTo:breadCrumbTo,breadCrumbModule:breadCrumbModule,breadCrumbForm:breadCrumbForm,breadCrumbUser:breadCrumbUser,breadCrumbRole:breadCrumbRole,//breadCrumbViewType : breadCrumbViewType ? breadCrumbViewType :\n// this.props.Login.masterData.ViewType\nbreadCrumbViewType:breadCrumbViewType?breadCrumbViewType:{label:_this.props.Login.masterData.ViewType.sauditactionfiltername,value:_this.props.Login.masterData.ViewType.nauditactionfiltercode,item:_this.props.Login.masterData.ViewType}});var inputParam={masterData:masterData,inputData:inputData,searchRef:_this.searchRef,detailSkip:_this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?_this.state.dataStateAll.skip:_this.state.dataState.skip};_this.props.getFilterAuditTrailRecords(inputParam);};_this.onFilterSubmit=function(){var breadCrumbFrom=_this.state.selectedRecord[\"fromdate\"]?getStartOfDay(_this.state.selectedRecord[\"fromdate\"]):rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.FromDate);var breadCrumbTo=_this.state.selectedRecord[\"todate\"]?getEndOfDay(_this.state.selectedRecord[\"todate\"]):rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.ToDate);var breadCrumbModule=_this.state.selectedRecord['nmodulecode'];var breadCrumbForm=_this.state.selectedRecord['nformcode'];var breadCrumbUser=_this.state.selectedRecord['nusercode'];var breadCrumbRole=_this.state.selectedRecord['nuserrolecode'];var breadCrumbViewType=_this.state.selectedRecord['nauditactionfiltercode'];var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{breadCrumbFrom:breadCrumbFrom,breadCrumbTo:breadCrumbTo,breadCrumbModule:breadCrumbModule,breadCrumbForm:breadCrumbForm,breadCrumbUser:breadCrumbUser,breadCrumbRole:breadCrumbRole,breadCrumbViewType:breadCrumbViewType});var fromDate=_this.state.selectedRecord[\"fromdate\"]?_this.state.selectedRecord[\"fromdate\"]:_this.props.Login.masterData.FromDate;var toDate=_this.state.selectedRecord[\"todate\"]?_this.state.selectedRecord[\"todate\"]:_this.props.Login.masterData.ToDate;var obj=convertDateValuetoString(fromDate,toDate,_this.props.Login.userInfo);var inputData={fromDate:obj.fromDate,toDate:obj.toDate,modulecode:_this.state.selectedRecord[\"nmodulecode\"]?_this.state.selectedRecord[\"nmodulecode\"].value:0,formcode:_this.state.selectedRecord[\"nformcode\"]?_this.state.selectedRecord[\"nformcode\"].value:0,usercode:_this.state.selectedRecord[\"nusercode\"]?_this.state.selectedRecord[\"nusercode\"].value:0,userrole:_this.state.selectedRecord[\"nuserrolecode\"]?_this.state.selectedRecord[\"nuserrolecode\"].value:0,//viewtypecode: ntempviewtypecode,//this.state.selectedcombo[\"nviewtypecode\"] ? this.state.selectedcombo[\"nviewtypecode\"].value:0,\nviewtypecode:_this.state.selectedRecord[\"nauditactionfiltercode\"]?_this.state.selectedRecord[\"nauditactionfiltercode\"].value:-1,userinfo:_this.props.Login.userInfo,postParamList:_this.filterParam};var inputParam={masterData:masterData,inputData:inputData,searchRef:_this.searchRef,detailSkip:_this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?_this.state.dataStateAll.skip:_this.state.dataState.skip};_this.props.getFilterAuditTrailRecords(inputParam);};_this.onComboChange=function(comboData,fieldName,caseNo){if(comboData!=null){if(fieldName===\"nmodulecode\"||fieldName===\"nformcode\"||fieldName===\"nusercode\"||fieldName===\"nuserrolecode\"||fieldName===\"nauditactionfiltercode\"){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;// let qualisForms = this.state.qualisForms;\nvar qualisForms=_this.state.wholeQualisForms;if(fieldName===\"nmodulecode\"){selectedRecord[\"nformcode\"]=\"\";qualisForms=qualisForms.filter(function(form){return form.item.nmodulecode===comboData.value;});}else if(selectedRecord.nmodulecode&&selectedRecord.nmodulecode.value){qualisForms=qualisForms.filter(function(form){return form.item.nmodulecode===selectedRecord.nmodulecode.value;});}_this.setState({selectedRecord:selectedRecord,qualisForms:qualisForms});}/*if (fieldName === \"nauditactionfiltercode\") {\r\n \r\n                this.searchRef.current.value = \"\";\r\n \r\n                const selectedcombo = this.state.selectedcombo || {};\r\n                selectedcombo[fieldName] = comboData;\r\n                const dataStateAll = {\r\n                    skip: 0,\r\n                    take: 100\r\n                };\r\n \r\n                this.setState({ selectedcombo, dataStateAll });\r\n \r\n                let masterData = {\r\n                    ...this.props.Login.masterData, searchedAudit: undefined\r\n                }\r\n                let inputData = {\r\n                    fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\r\n                    toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\r\n                    modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n                    formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n                    usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n                    userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n                    viewtypecode: this.state.selectedcombo[\"nauditactionfiltercode\"] ? this.state.selectedcombo[\"nauditactionfiltercode\"].value : 0,\r\n                    userinfo: this.props.Login.userInfo,\r\n                    postParamList: this.filterParam,\r\n                }\r\n \r\n                let inputParam = { masterData, inputData }\r\n                this.props.getFilterAuditTrailRecords(inputParam)\r\n            }*/}else{var _selectedRecord=_this.state.selectedRecord||{};_selectedRecord[fieldName]=comboData;if(fieldName==='nmodulecode'){_selectedRecord[\"nformcode\"]=\"\";var _qualisForms=_this.state.wholeQualisForms;_this.setState({selectedRecord:_selectedRecord,qualisForms:_qualisForms});}else _this.setState({selectedRecord:_selectedRecord});}};_this.handleDateChange=function(dateName,dateValue){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;//this.setState({selectedRecord});\nvar viewTypeAuditList=_this.state.viewTypeAudit;var dFromDate=_this.state.selectedRecord[\"fromdate\"]?rearrangeDateFormat(_this.props.Login.userInfo,_this.state.selectedRecord[\"fromdate\"]):rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.FromDate);var dToDate=_this.state.selectedRecord[\"todate\"]?rearrangeDateFormat(_this.props.Login.userInfo,_this.state.selectedRecord[\"todate\"]):rearrangeDateFormat(_this.props.Login.userInfo,_this.props.Login.masterData.ToDate);// let ntempviewtypecode = 0;\nvar fromMonth=String(dFromDate.getMonth()+1);var toMonth=String(dToDate.getMonth()+1);var fromYear=String(dFromDate.getFullYear());var toYear=String(dToDate.getFullYear());if(fromYear!==toYear){selectedRecord[\"nauditactionfiltercode\"]=viewTypeAuditList.length>0?{\"value\":viewTypeAuditList[2].item.nauditactionfiltercode,\"label\":viewTypeAuditList[2].item.sauditactionfiltername}:_this.state.selectedRecord[\"nauditactionfiltercode\"];// ntempviewtypecode = viewTypeAuditList[2].item.nauditactionfiltercode;\n}else if(fromMonth!==toMonth){selectedRecord[\"nauditactionfiltercode\"]=viewTypeAuditList.length>0?{\"value\":viewTypeAuditList[1].item.nauditactionfiltercode,\"label\":viewTypeAuditList[1].item.sauditactionfiltername}:_this.state.selectedRecord[\"nauditactionfiltercode\"];// ntempviewtypecode = viewTypeAuditList[1].item.nauditactionfiltercode;\n}else{selectedRecord[\"nauditactionfiltercode\"]=viewTypeAuditList.length>0?{\"value\":viewTypeAuditList[0].item.nauditactionfiltercode,\"label\":viewTypeAuditList[0].item.sauditactionfiltername}:_this.state.selectedRecord[\"nauditactionfiltercode\"];// ntempviewtypecode = viewTypeAuditList[0].item.nauditactionfiltercode;\n}_this.setState({selectedRecord:selectedRecord});};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};_this.breadcrumbList=function(){var breadCrumbArray=[];// let fromDate = this.props.Login.masterData.breadCrumbFrom ? this.props.Login.masterData.breadCrumbFrom : this.props.Login.masterData.FromDate;\n//    let toDate = this.props.Login.masterData.breadCrumbTo ? this.props.Login.masterData.breadCrumbTo : this.props.Login.masterData.ToDate;\nvar fromDate=_this.props.Login.masterData.FromDate?_this.props.Login.masterData.FromDate:_this.props.Login.masterData.breadCrumbFrom;var toDate=_this.props.Login.masterData.ToDate?_this.props.Login.masterData.ToDate:_this.props.Login.masterData.breadCrumbTo;var obj=convertDateValuetoString(fromDate,toDate,_this.props.Login.userInfo);breadCrumbArray.push({\"label\":\"IDS_FROM\",\"value\":obj.breadCrumbFrom},{\"label\":\"IDS_TO\",\"value\":obj.breadCrumbto});_this.props.Login.masterData.breadCrumbModule&&breadCrumbArray.push({\"label\":\"IDS_MODULENAME\",\"value\":_this.props.Login.masterData.breadCrumbModule.label});_this.props.Login.masterData.breadCrumbForm&&breadCrumbArray.push({\"label\":\"IDS_FORMNAME\",\"value\":_this.props.Login.masterData.breadCrumbForm.label});_this.props.Login.masterData.breadCrumbUser&&breadCrumbArray.push({\"label\":\"IDS_USERNAME\",\"value\":_this.props.Login.masterData.breadCrumbUser.label});_this.props.Login.masterData.breadCrumbRole&&breadCrumbArray.push({\"label\":\"IDS_USERROLE\",\"value\":_this.props.Login.masterData.breadCrumbRole.label});breadCrumbArray.push({\"label\":\"IDS_VIEWPERIOD\",\"value\":_this.props.Login.masterData.breadCrumbViewType?_this.props.Login.masterData.breadCrumbViewType.label:_this.props.Login.masterData.ViewType?_this.props.Login.masterData.ViewType.sauditactionfiltername:\"\"});// this.state.selectedRecord[\"nformcode\"] &&\n//  {\n//     \"label\": \"IDS_FORMNAME\",\n//     \"value\": this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].label : \"\"\n// },\n// this.state.selectedRecord[\"nusercode\"] &&\n// {\n//     \"label\": \"IDS_USERNAME\",\n//     \"value\": this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].label : \"\"\n// },\n// this.state.selectedRecord[\"nuserrolecode\"] &&\n// {\n//     \"label\": \"IDS_USERROLE\",\n//     \"value\": this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].label : \"\"\n// }\nreturn breadCrumbArray;};_this.myRef=React.createRef();// this.searchAuditRef = React.createRef();\nvar dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[16]):5,group:[{field:\"viewPeriod\",dir:\"desc\"}]//field: \"groupDate\" , dir: \"desc\" \n};var dataStateAll={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[16]):5};_this.searchFieldList=[\"sauditdate\"];_this.state={masterStatus:\"\",error:\"\",isOpen:false,selectedRecord:{},//selectedcombo: {},\noperation:\"\",gridHeight:'auto',screenName:undefined,userRoleControlRights:[],ControlRights:undefined,ConfirmDialogScreen:false,controlMap:new Map(),dataResult:[],dataState:dataState,dataStateAll:dataStateAll,qualisModule:[],qualisForms:[],users:[],userRole:[],viewTypeAudit:[],wholeQualisForms:[],skip:0,take:_this.props.Login.settings&&_this.props.Login.settings[3],kendoSkip:0,kendoTake:_this.props.Login.settings?parseInt(_this.props.Login.settings[16]):5,splitChangeWidthPercentage:30};_this.searchRef=React.createRef();_this.searchAuditRef=React.createRef();return _this;}_createClass(AuditTrail,[{key:\"render\",value:function render(){var _this2=this;this.extractedColumnList=[{\"idsName\":\"IDS_AUDITDATE\",\"dataField\":\"sauditdate\",\"width\":\"200px\",\"componentName\":\"date\"},{\"idsName\":\"IDS_AUDITACTION\",\"dataField\":\"sauditaction\",\"width\":\"200px\"},{\"idsName\":\"IDS_COMMENTS\",\"dataField\":\"scomments\",\"width\":\"350px\"},{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"susername\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERROLE\",\"dataField\":\"suserrolename\",\"width\":\"200px\"},{\"idsName\":\"IDS_ACTIONTYPE\",\"dataField\":\"sactiontype\",\"width\":\"200px\"},{\"idsName\":\"IDS_MODULENAME\",\"dataField\":\"smodulename\",\"width\":\"200px\"},{\"idsName\":\"IDS_FORMNAME\",\"dataField\":\"sformname\",\"width\":\"200px\"},{\"idsName\":\"IDS_ESIGNCOMMENTS\",\"dataField\":\"sreason\",\"width\":\"200px\"}];var fromDate=\"\";var toDate=\"\";if(this.props.Login.masterData&&this.props.Login.masterData.FromDate){fromDate=this.state.selectedRecord[\"fromdate\"]&&getStartOfDay(this.state.selectedRecord[\"fromdate\"])||rearrangeDateFormat(this.props.Login.userInfo,this.props.Login.masterData.FromDate);toDate=this.state.selectedRecord[\"todate\"]&&getEndOfDay(this.state.selectedRecord[\"todate\"])||rearrangeDateFormat(this.props.Login.userInfo,this.props.Login.masterData.ToDate);}var obj=convertDateValuetoString(this.props.Login.masterData.FromDate,this.props.Login.masterData.ToDate,this.props.Login.userInfo);var auditParam={masterData:this.props.Login.masterData,userinfo:this.props.Login.userInfo,// fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\n// toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\n// moduleCode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\n// formCode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\n// userCode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\n// userRole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\n// viewTypeCode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0\nskip:this.state.skip,take:this.state.take,fromDate:obj.fromDate,toDate:obj.toDate,moduleCode:this.props.Login.masterData.breadCrumbModule?this.props.Login.masterData.breadCrumbModule.value:0,formCode:this.props.Login.masterData.breadCrumbForm?this.props.Login.masterData.breadCrumbForm.value:0,userCode:this.props.Login.masterData.breadCrumbUser?this.props.Login.masterData.breadCrumbUser.value:0,userRole:this.props.Login.masterData.breadCrumbRole?this.props.Login.masterData.breadCrumbRole.value:0,viewTypeCode:this.props.Login.masterData.breadCrumbViewType?this.props.Login.masterData.breadCrumbViewType.value:this.props.Login.masterData.ViewType?this.props.Login.masterData.ViewType.nauditactionfiltercode:0//viewTypeCode :this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode:0\n};this.filterParam={inputListName:\"AuditTrail\",selectedObject:\"SelectedAuditTrail\",primaryKeyField:\"saudittraildate\",fetchUrl:\"audittrail/getAuditTrailDetail\",masterData:this.props.Login.masterData,fecthInputObject:{// fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\n// toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\n// modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\n// formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\n// usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\n// userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\n// viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\nuserinfo:this.props.Login.userInfo,fromDate:obj.fromDate,toDate:obj.toDate,modulecode:this.props.Login.masterData.breadCrumbModule?this.props.Login.masterData.breadCrumbModule.value:0,formcode:this.props.Login.masterData.breadCrumbForm?this.props.Login.masterData.breadCrumbForm.value:0,usercode:this.props.Login.masterData.breadCrumbUser?this.props.Login.masterData.breadCrumbUser.value:0,userrole:this.props.Login.masterData.breadCrumbRole?this.props.Login.masterData.breadCrumbRole.value:0,viewtypecode:this.props.Login.masterData.breadCrumbViewType?this.props.Login.masterData.breadCrumbViewType.value:this.props.Login.masterData.ViewType?this.props.Login.masterData.ViewType.nauditactionfiltercode:0},filteredListName:\"searchedAudit\",clearFilter:\"no\",updatedListname:\"SelectedAuditTrail\",searchRef:this.searchAuditRef,searchFieldList:this.searchFieldList,unchangeList:[\"QualisModule\",\"QualisForms\",\"Users\",\"UserRole\",\"ViewTypeAudit\"],changeList:[\"AuditDetails\"]};this.breadCrumbData=this.breadcrumbList();// this.state.selectedRecord && this.state.selectedRecord[\"nmodulecode\"] &&\n// {\n//     \"label\": \"IDS_MODULENAME\",\n//     \"value\": this.state.selectedRecord[\"nmodulecode\"].label \n// }\n// this.state.selectedRecord[\"nformcode\"] &&\n//  {\n//     \"label\": \"IDS_FORMNAME\",\n//     \"value\": this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].label : \"\"\n// }, \n// this.state.selectedRecord[\"nusercode\"] &&\n// {\n//     \"label\": \"IDS_USERNAME\",\n//     \"value\": this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].label : \"\"\n// }, \n// this.state.selectedRecord[\"nuserrolecode\"] &&\n// {\n//     \"label\": \"IDS_USERROLE\",\n//     \"value\": this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].label : \"\"\n// }\n// ]\n// let auditInputData = {\n//     fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\n//     toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\n//     modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\n//     formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\n//     usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\n//     userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\n//     viewtypecode: this.state.selectedcombo[\"nauditactionfiltercode\"] ? this.state.selectedcombo[\"nauditactionfiltercode\"].value : 0,\n//     userinfo: this.props.Login.userInfo\n// }\nthis.postParamList=[{filteredListName:\"searchedAudit\",clearFilter:\"no\",searchRef:this.searchRef,primaryKeyField:\"saudittraildate\",fetchUrl:\"audittrail/getFilterAuditTrailRecords\",fecthInputObject:this.filterParam,//childRefs: [{ ref: this.searchSubSampleRef, childFilteredListName: \"searchedSubSample\" }],\nselectedObject:\"SelectedAuditTrail\",inputListName:\"AuditTrail\",updatedListname:\"SelectedAuditTrail\",unchangeList:[\"QualisModule\",\"QualisForms\",\"Users\",\"UserRole\",\"ViewTypeAudit\"]}];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"mtop-fixed-breadcrumb client-listing-wrap\"},/*#__PURE__*/React.createElement(BreadcrumbComponent,{breadCrumbItem:this.breadCrumbData}),/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12,className:\"parent-port-height sticky_head_parent\"},/*#__PURE__*/React.createElement(SplitterLayout,{borderColor:\"#999\",primaryIndex:1,percentage:true,secondaryInitialSize:this.state.splitChangeWidthPercentage,onSecondaryPaneSizeChange:this.paneSizeChange,primaryMinSize:40,secondaryMinSize:20},/*#__PURE__*/React.createElement(TransactionListMaster,{splitChangeWidthPercentage:this.state.splitChangeWidthPercentage//paneHeight={this.state.parentHeight}\n// masterList={this.props.Login.masterData.searchedAudit || \n//     this.props.Login.masterData.AuditTrail ? sortData(this.props.Login.masterData.AuditTrail,'descending','saudittraildate') : []}\n// masterList={this.props.Login.masterData.searchedAudit ? this.props.Login.masterData.searchedAudit :\n//   this.props.Login.masterData.AuditTrail ? sortData(this.props.Login.masterData.AuditTrail, 'descending', 'saudittraildate') : []}\n,masterList:this.props.Login.masterData.searchedAudit||this.props.Login.masterData.AuditTrail||[],selectedMaster:[this.props.Login.masterData.SelectedAuditTrail],primaryKeyField:\"saudittraildate\",getMasterDetail:this.props.getAuditTrailDetail,inputParam:auditParam//additionalParam={['napprovalversioncode']}\n,mainField:\"sauditdate\",selectedListName:\"SelectedAuditTrail\",filterColumnData:this.props.filterTransactionList,searchListName:\"searchedAudit\",searchRef:this.searchRef,filterParam:this.filterParam,objectName:\"auditrail\",listName:\"IDS_AUDITTRAIL\",showFilter:this.props.Login.showFilter,openFilter:this.openFilter,closeFilter:this.closeFilter,onFilterSubmit:this.onFilterSubmit// needAccordianFilter={true}\n,handlePageChange:this.handlePageChange,skip:this.state.skip,take:this.state.take,needFilter:true,needAccordianFilter:false,filterComponent:[{\"IDS_AUDITTRAIL\":/*#__PURE__*/React.createElement(AuditTrailFilter,{selectedRecord:this.state.selectedRecord||{},filterModuleName:this.state.qualisModule,filterFormName:this.state.qualisForms,filterViewType:this.state.viewTypeAudit,filterUsers:this.state.users,filterUserRole:this.state.userRole,handleDateChange:this.handleDateChange,fromDate:fromDate,toDate:toDate,userInfo:this.props.Login.userInfo,onComboChange:this.onComboChange})}]// accordianfilterComponent={[\n//     {\n//         \"IDS_AUDITTRAIL\":\n//             <ViewTypeFilter\n//                 selectedRecord={this.state.selectedcombo || {}}\n//                 filterViewType={this.state.viewTypeAudit}\n//                 userInfo={this.props.Login.userInfo}\n//                 onComboChange={this.onComboChange}\n//             />\n//     }\n// ]}\n,commonActions:/*#__PURE__*/React.createElement(ProductList,{className:\"d-flex product-category float-right\"},/*#__PURE__*/React.createElement(Button,{className:\"btn btn-circle outline-grey ml-2\",variant:\"link\",onClick:function onClick(){return _this2.onReload();},\"data-tip\":this.props.intl.formatMessage({id:\"IDS_REFRESH\"})},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSync,style:{\"width\":\"0.6!important\"}})))}),/*#__PURE__*/React.createElement(PerfectScrollbar,null,/*#__PURE__*/React.createElement(\"div\",{ref:this.myRef},this.props.Login.masterData.SelectedAuditTrail&&this.props.Login.masterData.SelectedAuditTrail!==undefined?/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},/*#__PURE__*/React.createElement(Card.Body,{className:\"form-static-wrap padding-class\"},/*#__PURE__*/React.createElement(DataGrid// gridWidth={\"57.5rem\"}\n,{gridHeight:this.state.gridHeight+'px',pageable:true,pageSizes:this.props.Login.settings&&this.props.Login.settings[17].split(\",\").map(function(setting){return parseInt(setting);}),scrollable:\"scrollable\",primaryKeyField:\"nauditcode\",data:this.props.Login.masterData.AuditDetails||[],dataResult:this.state.dataResult,total:this.props.Login.masterData.AuditDetails&&this.props.Login.masterData.AuditDetails.length||0//  dataResult={process(this.props.Login.masterData.AuditDetails || [],\n//  this.state.selectedRecord[\"nauditactionfiltercode\"]\n//     && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1\n//   ? this.state.dataStateAll : this.state.dataState)}\n,dataState:this.state.selectedRecord[\"nauditactionfiltercode\"]&&this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?this.state.dataStateAll:this.state.dataState,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList||[],controlMap:this.state.controlMap,methodUrl:\"AuditTrail\",groupable:this.state.selectedRecord[\"nauditactionfiltercode\"]?this.state.selectedRecord[\"nauditactionfiltercode\"].value===1?true:false:false,isActionRequired:false,isToolBarRequired:true,isAddRequired:false,isRefreshRequired:false,isDownloadPDFRequired:false,isDownloadExcelRequired:true,isExportExcelRequired:true// isIdsField=\"yes\"\n,exportExcelNew:this.exportExcelNew,onExpandChange:this.expandChange,expandField:\"expanded\",hideDetailBand:true})))):\"\")))))));}},{key:\"componentDidUpdate\",value:// covertDatetoString(startDateValue, endDateValue) {\n//     const startDate = new Date(startDateValue);\n//     const endDate = new Date(endDateValue);\n//     const prevMonth = validateTwoDigitDate(String(startDate.getMonth() + 1));\n//     const currentMonth = validateTwoDigitDate(String(endDate.getMonth() + 1));\n//     const prevDay = validateTwoDigitDate(String(startDate.getDate()));\n//     const currentDay = validateTwoDigitDate(String(endDate.getDate()));\n//     const fromDateOnly = startDate.getFullYear() + '-' + prevMonth + '-' + prevDay\n//     const toDateOnly = endDate.getFullYear() + '-' + currentMonth + '-' + currentDay\n//     const fromDate = fromDateOnly + \"T00:00:00\";\n//     const toDate = toDateOnly + \"T23:59:59\";\n//     return ({ fromDate, toDate, breadCrumbFrom: fromDateOnly, breadCrumbto: toDateOnly })\n// }\nfunction componentDidUpdate(previousProps){var updateState=false;var _this$state=this.state,selectedRecord=_this$state.selectedRecord,qualisModule=_this$state.qualisModule,qualisForms=_this$state.qualisForms,wholeQualisForms=_this$state.wholeQualisForms,users=_this$state.users,userRole=_this$state.userRole,viewTypeAudit=_this$state.viewTypeAudit,dataStateAll=_this$state.dataStateAll,dataState=_this$state.dataState,dataResult=_this$state.dataResult,skip=_this$state.skip,take=_this$state.take;if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){updateState=true;selectedRecord=this.props.Login.selectedRecord;}if(this.props.Login.masterData.QualisModule!==previousProps.Login.masterData.QualisModule||this.props.Login.masterData.QualisForms!==previousProps.Login.masterData.QualisForms||this.props.Login.masterData.Users!==previousProps.Login.masterData.Users||this.props.Login.masterData.UserRole!==previousProps.Login.masterData.UserRole){updateState=true;var qualisModuleMap=constructOptionList(this.props.Login.masterData.QualisModule||[],\"nmodulecode\",\"smodulename\",\"nsorter\",\"ascending\",false);//const allQualisModuleList = qualisModule.get(\"OptionList\");\nvar qualisModuleList=qualisModuleMap.get(\"OptionList\");var qualisFormsMap=constructOptionList(this.props.Login.masterData.QualisForms||[],\"nformcode\",\"sformname\",\"nsorter\",\"ascending\",false);// const allQualisFormsList = qualisForms.get(\"OptionList\");\nvar qualisFormsList=[];if(selectedRecord&&selectedRecord.nmodulecode&&selectedRecord.nmodulecode.value){qualisFormsList=qualisFormsMap.get(\"OptionList\").filter(function(form){return form.item.nmodulecode===selectedRecord.nmodulecode.value;});}else{qualisFormsList=qualisFormsMap.get(\"OptionList\");}var usersMap=constructOptionList(this.props.Login.masterData.Users||[],\"nusercode\",\"susername\",undefined,undefined,undefined);//const allUsersList = users.get(\"OptionList\");\nvar usersList=usersMap.get(\"OptionList\");var userRoleMap=constructOptionList(this.props.Login.masterData.UserRole||[],\"nuserrolecode\",\"suserrolename\",undefined,undefined,undefined);//const allUserRoleList = userRole.get(\"OptionList\");\nvar userRoleList=userRoleMap.get(\"OptionList\");var viewTypeAuditMap=constructOptionList(this.props.Login.masterData.ViewTypeAudit||[],\"nauditactionfiltercode\",\"sauditactionfiltername\",\"nsorter\",\"ascending\",false);var viewTypeAuditList=viewTypeAuditMap.get(\"OptionList\");qualisModule=qualisModuleList;qualisForms=qualisFormsList;wholeQualisForms=qualisFormsList;users=usersList;userRole=userRoleList;viewTypeAudit=viewTypeAuditList;selectedRecord={nauditactionfiltercode:viewTypeAuditList.length>0?{\"value\":viewTypeAuditList[0].item.nauditactionfiltercode,\"label\":viewTypeAuditList[0].item.sauditactionfiltername}:this.state.selectedRecord[\"nauditactionfiltercode\"]};}if(this.props.Login.resetDataGridPage&&this.props.Login.resetDataGridPage!==previousProps.Login.resetDataGridPage){if(this.state.selectedRecord[\"nauditactionfiltercode\"].value===1){dataStateAll.skip=0;updateState=true;}else{dataState.skip=0;updateState=true;}}if(this.props.Login.masterData!==previousProps.Login.masterData){updateState=true;if(selectedRecord&&selectedRecord.nmodulecode&&selectedRecord.nmodulecode.value){qualisForms=qualisForms.filter(function(form){return form.item.nmodulecode===selectedRecord.nmodulecode.value;});}else{qualisForms=wholeQualisForms;}if(this.state.selectedRecord[\"nauditactionfiltercode\"]&&this.state.selectedRecord[\"nauditactionfiltercode\"].value===1){dataStateAll={skip:0,take:dataStateAll.take,group:dataStateAll.group};updateState=true;}else{dataState={skip:0,take:dataState.take,group:dataState.group};updateState=true;}var auditdate=this.props.Login.masterData.AuditDetails&&this.props.Login.masterData.AuditDetails.slice(dataState.skip,dataState.take+dataState.skip)||[];dataResult=process(auditdate||[],dataState);skip=this.props.Login.skip===undefined?skip:this.props.Login.skip;take=this.props.Login.take||take;}if(updateState){this.setState({selectedRecord:selectedRecord,qualisModule:qualisModule,qualisForms:qualisForms,wholeQualisForms:wholeQualisForms,users:users,userRole:userRole,viewTypeAudit:viewTypeAudit,dataStateAll:dataStateAll,dataState:dataState,dataResult:dataResult,skip:skip,take:take});}}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.myRef.current.offsetParent.clientHeight!==this.state.gridHeight){this.setState({gridHeight:this.myRef.current.offsetParent.clientHeight});}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}return null;}}]);return AuditTrail;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,filterTransactionList:filterTransactionList,updateStore:updateStore,filterColumnData:filterColumnData,getAuditTrailDetail:getAuditTrailDetail,getFilterAuditTrailRecords:getFilterAuditTrailRecords,getFormNameByModule:getFormNameByModule,getExportExcel:getExportExcel})(injectIntl(AuditTrail));","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/pages/audittrail/AuditTrail.jsx"],"names":["React","connect","injectIntl","Row","Col","Button","Card","Nav","process","toast","PerfectScrollbar","ContentPanel","constructOptionList","getStartOfDay","getEndOfDay","sortData","validateTwoDigitDate","convertDateValuetoString","rearrangeDateFormat","callService","crudMaster","validateEsignCredential","updateStore","filterTransactionList","filterColumnData","getAuditTrailDetail","getFilterAuditTrailRecords","getFormNameByModule","getExportExcel","DEFAULT_RETURN","AuditTrailFilter","TransactionListMaster","BreadcrumbComponent","DataGrid","SplitterLayout","ProductList","FontAwesomeIcon","faFileExcel","faSync","AuditTrail","props","dataStateChange","event","state","selectedRecord","value","setState","dataResult","Login","masterData","AuditDetails","dataState","dataStateAll","kendoSkip","skip","kendoTake","data","filter","sort","auditdata","slice","take","paneSizeChange","d","splitChangeWidthPercentage","pageChange","page","exportExcelNew","fromDate","FromDate","toDate","ToDate","obj","userInfo","inputData","modulecode","formcode","usercode","userrole","viewtypecode","userinfo","sauditdate","SelectedAuditTrail","saudittraildate","nauditformcode","ncontrolcode","inputParam","expandChange","dataItem","target","expandField","handlePageChange","e","onReload","breadCrumbFrom","breadCrumbTo","breadCrumbModule","breadCrumbForm","breadCrumbUser","breadCrumbRole","breadCrumbViewType","ViewType","nauditactionfiltercode","postParamList","filterParam","label","sauditactionfiltername","item","searchRef","detailSkip","onFilterSubmit","onComboChange","comboData","fieldName","caseNo","qualisForms","wholeQualisForms","form","nmodulecode","handleDateChange","dateName","dateValue","viewTypeAuditList","viewTypeAudit","dFromDate","dToDate","fromMonth","String","getMonth","toMonth","fromYear","getFullYear","toYear","length","openFilter","showFilter","updateInfo","typeName","closeFilter","breadcrumbList","breadCrumbArray","push","breadCrumbto","myRef","createRef","settings","parseInt","group","field","dir","searchFieldList","masterStatus","error","isOpen","operation","gridHeight","screenName","undefined","userRoleControlRights","ControlRights","ConfirmDialogScreen","controlMap","Map","qualisModule","users","userRole","searchAuditRef","extractedColumnList","auditParam","moduleCode","formCode","userCode","viewTypeCode","inputListName","selectedObject","primaryKeyField","fetchUrl","fecthInputObject","filteredListName","clearFilter","updatedListname","unchangeList","changeList","breadCrumbData","searchedAudit","intl","formatMessage","id","split","map","setting","previousProps","updateState","QualisModule","QualisForms","Users","UserRole","qualisModuleMap","qualisModuleList","get","qualisFormsMap","qualisFormsList","usersMap","usersList","userRoleMap","userRoleList","viewTypeAuditMap","ViewTypeAudit","resetDataGridPage","auditdate","current","offsetParent","clientHeight","warn","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { connect } from 'react-redux';\r\nimport {  injectIntl } from 'react-intl';\r\nimport { Row, Col, Button, Card,Nav } from 'react-bootstrap';//Nav, Card, Button\r\n//import { Grid, GridColumn } from '@progress/kendo-react-grid';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { toast } from 'react-toastify';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { ContentPanel } from '../../components/App.styles';\r\nimport { constructOptionList, getStartOfDay, getEndOfDay, sortData, validateTwoDigitDate, convertDateValuetoString, rearrangeDateFormat } from '../../components/CommonScript';//showEsign, getControlMap,\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, filterTransactionList,\r\n     filterColumnData, \r\n    getAuditTrailDetail, getFilterAuditTrailRecords, getFormNameByModule, getExportExcel\r\n} from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport AuditTrailFilter from './AuditTrailFilter';\r\nimport TransactionListMaster from '../../components/TransactionListMaster';\r\nimport BreadcrumbComponent from '../../components/Breadcrumb.Component';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport SplitterLayout from 'react-splitter-layout';\r\nimport { ProductList } from '../product/product.styled';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileExcel, faSync } from '@fortawesome/free-solid-svg-icons';\r\n\r\n\r\nclass AuditTrail extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.myRef = React.createRef();\r\n        // this.searchAuditRef = React.createRef();\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5,\r\n            group: [{ field: \"viewPeriod\", dir: \"desc\"  }] //field: \"groupDate\" , dir: \"desc\" \r\n        };\r\n\r\n        const dataStateAll = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5\r\n        };\r\n\r\n        this.searchFieldList = [\"sauditdate\"]\r\n\r\n        this.state = {\r\n            masterStatus: \"\",\r\n            error: \"\",\r\n            isOpen: false,\r\n            selectedRecord: {},\r\n            //selectedcombo: {},\r\n            operation: \"\",\r\n            gridHeight: 'auto',\r\n            screenName: undefined,\r\n\r\n            userRoleControlRights: [],\r\n            ControlRights: undefined,\r\n            ConfirmDialogScreen: false,\r\n            controlMap: new Map(),\r\n\r\n            dataResult: [],\r\n            dataState: dataState,\r\n            dataStateAll: dataStateAll,\r\n            qualisModule: [], \r\n            qualisForms: [],\r\n            users: [],\r\n            userRole: [],\r\n            viewTypeAudit: [],\r\n            wholeQualisForms: [],\r\n            skip: 0,\r\n            take: this.props.Login.settings && this.props.Login.settings[3],\r\n            kendoSkip:0,\r\n            kendoTake:this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5,\r\n            splitChangeWidthPercentage: 30,\r\n        };\r\n        this.searchRef = React.createRef();\r\n        this.searchAuditRef = React.createRef();\r\n  \r\n    }\r\n    dataStateChange = (event) => {\r\n        if (this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\r\n            this.setState({\r\n                dataResult: process(this.props.Login.masterData.AuditDetails|| [], event.dataState),\r\n                dataStateAll: event.dataState,kendoSkip:event.dataState.skip,kendoTake:event.dataState.skip\r\n            });\r\n        }\r\n        else {\r\n            let data=[];\r\n            if( event.dataState.filter === null && event.dataState.sort === null){\r\n            let auditdata=(this.props.Login.masterData.AuditDetails &&\r\n            this.props.Login.masterData.AuditDetails.slice(0,\r\n                event.dataState.take+event.dataState.skip))||[]\r\n              data=process(auditdata || [], event.dataState)\r\n            }else{\r\n                \r\n                data=process(this.props.Login.masterData.AuditDetails || [], event.dataState)\r\n            \r\n            }\r\n            this.setState({\r\n                dataResult: data,\r\n                dataState: event.dataState,\r\n            });\r\n        }\r\n    }\r\n\r\n    paneSizeChange = (d) => {\r\n        this.setState({\r\n            splitChangeWidthPercentage: d\r\n        })\r\n    }\r\n\r\n    pageChange = (event) => {\r\n            this.setState({\r\n                kendoSkip:event.page.skip,\r\n                kendoTake:event.page.take\r\n        })\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    exportExcelNew = () => {\r\n        let fromDate=  this.props.Login.masterData.FromDate;\r\n        let toDate=  this.props.Login.masterData.ToDate;\r\n \r\n         let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);  \r\n        let inputData = {\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n            formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n            usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n            userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n            viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\r\n            userinfo: this.props.Login.userInfo,\r\n            sauditdate: this.props.Login.masterData.SelectedAuditTrail.saudittraildate,\r\n            nauditformcode: 78,\r\n            ncontrolcode: 78\r\n\r\n        }\r\n\r\n        let inputParam = { inputData }\r\n        this.props.getExportExcel(inputParam);\r\n        // if(this.props.Login.resultStatus === \"Success\"){\r\n        //     toast.info(\"Excel export successfully\");\r\n        // }\r\n    }\r\n\r\n    render() {\r\n\r\n        this.extractedColumnList = [\r\n            { \"idsName\": \"IDS_AUDITDATE\", \"dataField\": \"sauditdate\", \"width\": \"200px\", \"componentName\": \"date\" },\r\n            { \"idsName\": \"IDS_AUDITACTION\", \"dataField\": \"sauditaction\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"scomments\", \"width\": \"350px\" },\r\n            { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_USERROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_ACTIONTYPE\", \"dataField\": \"sactiontype\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_MODULENAME\", \"dataField\": \"smodulename\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_FORMNAME\", \"dataField\": \"sformname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_ESIGNCOMMENTS\", \"dataField\": \"sreason\", \"width\": \"200px\" },\r\n\r\n\r\n        ]\r\n\r\n        let fromDate = \"\";\r\n        let toDate = \"\";\r\n\r\n        if (this.props.Login.masterData && this.props.Login.masterData.FromDate) {\r\n            fromDate = (this.state.selectedRecord[\"fromdate\"] && getStartOfDay(this.state.selectedRecord[\"fromdate\"])) || rearrangeDateFormat(this.props.Login.userInfo,this.props.Login.masterData.FromDate);\r\n            toDate = (this.state.selectedRecord[\"todate\"] && getEndOfDay(this.state.selectedRecord[\"todate\"])) || rearrangeDateFormat(this.props.Login.userInfo,this.props.Login.masterData.ToDate);\r\n        }\r\n\r\n        let obj = convertDateValuetoString(this.props.Login.masterData.FromDate, \r\n            this.props.Login.masterData.ToDate,\r\n            this.props.Login.userInfo); \r\n\r\n        let auditParam = {\r\n            masterData: this.props.Login.masterData,\r\n            userinfo: this.props.Login.userInfo,\r\n            // fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\r\n            // toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\r\n            // moduleCode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n            // formCode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n            // userCode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n            // userRole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n            // viewTypeCode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0\r\n\r\n            skip:this.state.skip,\r\n            take:this.state.take,\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            moduleCode: this.props.Login.masterData.breadCrumbModule ? this.props.Login.masterData.breadCrumbModule.value : 0,\r\n            formCode: this.props.Login.masterData.breadCrumbForm ? this.props.Login.masterData.breadCrumbForm.value : 0,\r\n            userCode: this.props.Login.masterData.breadCrumbUser ? this.props.Login.masterData.breadCrumbUser.value : 0,\r\n            userRole: this.props.Login.masterData.breadCrumbRole ? this.props.Login.masterData.breadCrumbRole.value : 0,\r\n            viewTypeCode: this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.value :\r\n                this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode : 0\r\n            //viewTypeCode :this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode:0\r\n        }\r\n        \r\n        this.filterParam = {\r\n            inputListName: \"AuditTrail\", selectedObject: \"SelectedAuditTrail\", primaryKeyField: \"saudittraildate\",\r\n            fetchUrl: \"audittrail/getAuditTrailDetail\", masterData: this.props.Login.masterData,\r\n           \r\n            fecthInputObject: {\r\n                // fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\r\n                // toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\r\n                // modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n                // formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n                // usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n                // userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n                // viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\r\n\r\n                userinfo: this.props.Login.userInfo,\r\n                fromDate: obj.fromDate, \r\n                toDate: obj.toDate,\r\n                modulecode: this.props.Login.masterData.breadCrumbModule ? this.props.Login.masterData.breadCrumbModule.value : 0,\r\n                formcode: this.props.Login.masterData.breadCrumbForm ? this.props.Login.masterData.breadCrumbForm.value : 0,\r\n                usercode: this.props.Login.masterData.breadCrumbUser ? this.props.Login.masterData.breadCrumbUser.value : 0,\r\n                userrole: this.props.Login.masterData.breadCrumbRole ? this.props.Login.masterData.breadCrumbRole.value : 0,\r\n                viewtypecode: this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.value :\r\n                    this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode : 0\r\n\r\n            },\r\n            filteredListName: \"searchedAudit\",\r\n            clearFilter: \"no\",\r\n            updatedListname: \"SelectedAuditTrail\",\r\n            searchRef: this.searchAuditRef,\r\n            searchFieldList: this.searchFieldList,\r\n            unchangeList: [\"QualisModule\", \"QualisForms\", \"Users\", \"UserRole\", \"ViewTypeAudit\"],\r\n            changeList: [\"AuditDetails\"]\r\n\r\n        };\r\n\r\n        this.breadCrumbData = this.breadcrumbList();\r\n\r\n\r\n\r\n        // this.state.selectedRecord && this.state.selectedRecord[\"nmodulecode\"] &&\r\n        // {\r\n        //     \"label\": \"IDS_MODULENAME\",\r\n        //     \"value\": this.state.selectedRecord[\"nmodulecode\"].label \r\n        // }\r\n        // this.state.selectedRecord[\"nformcode\"] &&\r\n        //  {\r\n        //     \"label\": \"IDS_FORMNAME\",\r\n        //     \"value\": this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].label : \"\"\r\n        // }, \r\n        // this.state.selectedRecord[\"nusercode\"] &&\r\n        // {\r\n        //     \"label\": \"IDS_USERNAME\",\r\n        //     \"value\": this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].label : \"\"\r\n        // }, \r\n        // this.state.selectedRecord[\"nuserrolecode\"] &&\r\n        // {\r\n        //     \"label\": \"IDS_USERROLE\",\r\n        //     \"value\": this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].label : \"\"\r\n\r\n        // }\r\n        // ]\r\n\r\n        // let auditInputData = {\r\n        //     fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\r\n        //     toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\r\n        //     modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n        //     formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n        //     usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n        //     userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n        //     viewtypecode: this.state.selectedcombo[\"nauditactionfiltercode\"] ? this.state.selectedcombo[\"nauditactionfiltercode\"].value : 0,\r\n        //     userinfo: this.props.Login.userInfo\r\n        // }\r\n\r\n        this.postParamList = [\r\n            {\r\n                filteredListName: \"searchedAudit\",\r\n                clearFilter: \"no\",\r\n                searchRef: this.searchRef,\r\n                primaryKeyField: \"saudittraildate\",\r\n                fetchUrl: \"audittrail/getFilterAuditTrailRecords\",\r\n                fecthInputObject: this.filterParam,\r\n                //childRefs: [{ ref: this.searchSubSampleRef, childFilteredListName: \"searchedSubSample\" }],\r\n                selectedObject: \"SelectedAuditTrail\",\r\n                inputListName: \"AuditTrail\",\r\n                updatedListname: \"SelectedAuditTrail\",\r\n                unchangeList: [\"QualisModule\", \"QualisForms\", \"Users\", \"UserRole\", \"ViewTypeAudit\"]\r\n            }];\r\n            return (\r\n            <>\r\n                <div className=\"mtop-fixed-breadcrumb client-listing-wrap\">\r\n                    <BreadcrumbComponent breadCrumbItem={this.breadCrumbData} />\r\n                    <Row noGutters>\r\n                        {/* //ref={(parentHeight) => { this.parentHeight = parentHeight }} */}\r\n                        <Col md={12} className=\"parent-port-height sticky_head_parent\" >\r\n                            <SplitterLayout borderColor=\"#999\" \r\n                            primaryIndex={1}\r\n                            percentage={true}\r\n                             secondaryInitialSize={this.state.splitChangeWidthPercentage}\r\n                             onSecondaryPaneSizeChange={this.paneSizeChange}\r\n                             primaryMinSize={40}\r\n                             secondaryMinSize={20}\r\n                             >\r\n                                {/* <Col md={3}> */}\r\n                                <TransactionListMaster\r\n                                 splitChangeWidthPercentage={this.state.splitChangeWidthPercentage}\r\n                                    //paneHeight={this.state.parentHeight}\r\n                                    // masterList={this.props.Login.masterData.searchedAudit || \r\n                                    //     this.props.Login.masterData.AuditTrail ? sortData(this.props.Login.masterData.AuditTrail,'descending','saudittraildate') : []}\r\n                                   // masterList={this.props.Login.masterData.searchedAudit ? this.props.Login.masterData.searchedAudit :\r\n                                     //   this.props.Login.masterData.AuditTrail ? sortData(this.props.Login.masterData.AuditTrail, 'descending', 'saudittraildate') : []}\r\n                                    \r\n                                     masterList={this.props.Login.masterData.searchedAudit ||\r\n                                        (this.props.Login.masterData.AuditTrail||[])}\r\n                                    selectedMaster={[this.props.Login.masterData.SelectedAuditTrail]}\r\n                                    primaryKeyField=\"saudittraildate\"\r\n                                    getMasterDetail={this.props.getAuditTrailDetail}\r\n                                    inputParam={auditParam}\r\n                                    //additionalParam={['napprovalversioncode']}\r\n                                    mainField=\"sauditdate\"\r\n                                    selectedListName=\"SelectedAuditTrail\"\r\n                                    filterColumnData={this.props.filterTransactionList}\r\n                                    searchListName=\"searchedAudit\"\r\n                                    searchRef={this.searchRef}\r\n                                    filterParam={this.filterParam}\r\n                                    objectName=\"auditrail\"\r\n                                    listName=\"IDS_AUDITTRAIL\"\r\n                                    showFilter={this.props.Login.showFilter}\r\n                                    openFilter={this.openFilter}\r\n                                    closeFilter={this.closeFilter}\r\n                                    onFilterSubmit={this.onFilterSubmit}\r\n                                    // needAccordianFilter={true}\r\n                                    handlePageChange={this.handlePageChange}\r\n                                    skip={this.state.skip}\r\n                                    take={this.state.take}\r\n                                    needFilter={true}\r\n                                    needAccordianFilter={false}\r\n                                    filterComponent={[\r\n                                        {\r\n                                            \"IDS_AUDITTRAIL\":\r\n                                                <AuditTrailFilter\r\n                                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                                    filterModuleName={this.state.qualisModule}\r\n                                                    filterFormName={this.state.qualisForms}\r\n                                                    filterViewType={this.state.viewTypeAudit}\r\n                                                    filterUsers={this.state.users}\r\n                                                    filterUserRole={this.state.userRole}\r\n                                                    handleDateChange={this.handleDateChange}\r\n                                                    fromDate={fromDate}\r\n                                                    toDate={toDate}\r\n                                                    userInfo={this.props.Login.userInfo}\r\n                                                    onComboChange={this.onComboChange}\r\n                                                />\r\n                                        }\r\n                                    ]}\r\n                                    // accordianfilterComponent={[\r\n                                    //     {\r\n                                    //         \"IDS_AUDITTRAIL\":\r\n                                    //             <ViewTypeFilter\r\n                                    //                 selectedRecord={this.state.selectedcombo || {}}\r\n                                    //                 filterViewType={this.state.viewTypeAudit}\r\n                                    //                 userInfo={this.props.Login.userInfo}\r\n                                    //                 onComboChange={this.onComboChange}\r\n                                    //             />\r\n                                    //     }\r\n                                    // ]}\r\n                                    commonActions={\r\n                                        <ProductList className=\"d-flex product-category float-right\">\r\n                                            {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n                                            <Button className=\"btn btn-circle outline-grey ml-2\" variant=\"link\"\r\n                                                onClick={() => this.onReload()}\r\n                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_REFRESH\" })}>\r\n                                                <FontAwesomeIcon icon={faSync} style={{ \"width\": \"0.6!important\" }} />\r\n                                            </Button>\r\n                                            {/* </Tooltip> */}\r\n                                        </ProductList>\r\n                                    }\r\n                                />\r\n                                {/* <SplitterLayout vertical borderColor=\"#999\" percentage={true} primaryIndex={1} secondaryInitialSize={400} customClassName=\"fixed_list_height\"> */}\r\n                                {/* <Col md={9}> */}\r\n                                <PerfectScrollbar>\r\n                                <div ref={this.myRef}>\r\n                                    {this.props.Login.masterData.SelectedAuditTrail && this.props.Login.masterData.SelectedAuditTrail !== undefined ?\r\n                                        <ContentPanel className=\"panel-main-content\">\r\n                                        <Card className=\"border-0\">\r\n                                            {/* <Card.Header className=\"padding-class\">\r\n                                                    <Card.Title className=\"product-title-main\">{this.props.Login.masterData.SelectedAuditTrail.sauditdate}\r\n                                                            <div className=\"d-flex product-category\" style={{ float: \"right\",marginRight:\"1rem\" }}>\r\n                                                            <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                // hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_DOWNLOADEXCEL\" })}\r\n                                                                //data-for=\"tooltip_list_wrap\"\r\n                                                                onClick={this.exportExcelNew}>\r\n                                                                <FontAwesomeIcon icon={faFileExcel} />\r\n                                                            </Nav.Link>\r\n                                                            </div>\r\n                                                    </Card.Title>\r\n                                            </Card.Header> */}\r\n                                            \r\n                                            <Card.Body className='form-static-wrap padding-class'>\r\n                                                <DataGrid\r\n                                                    // gridWidth={\"57.5rem\"}\r\n                                                    gridHeight={this.state.gridHeight + 'px'}\r\n                                                    pageable={true}\r\n                                                    pageSizes={this.props.Login.settings && this.props.Login.settings[17].split(\",\").map(setting => parseInt(setting))}\r\n                                                    scrollable={\"scrollable\"}\r\n                                                    primaryKeyField=\"nauditcode\"\r\n                                                    data={this.props.Login.masterData.AuditDetails||[]}\r\n                                                    dataResult={this.state.dataResult}\r\n                                                    total={this.props.Login.masterData.AuditDetails&&this.props.Login.masterData.AuditDetails.length||0}\r\n                                                //  dataResult={process(this.props.Login.masterData.AuditDetails || [],\r\n                                                    //  this.state.selectedRecord[\"nauditactionfiltercode\"]\r\n                                                    //     && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1\r\n                                                        //   ? this.state.dataStateAll : this.state.dataState)}\r\n                                                    dataState={this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll\r\n                                                        : this.state.dataState}\r\n                                                    dataStateChange={this.dataStateChange}\r\n                                                    extractedColumnList={this.extractedColumnList || []}\r\n                                                    controlMap={this.state.controlMap}\r\n                                                    methodUrl=\"AuditTrail\"\r\n                                                    groupable={this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? true : false : false}\r\n                                                    isActionRequired={false}\r\n                                                    isToolBarRequired={true}\r\n                                                    isAddRequired={false}\r\n                                                    isRefreshRequired={false}\r\n                                                    isDownloadPDFRequired={false}\r\n                                                    isDownloadExcelRequired={true}\r\n                                                    isExportExcelRequired={true}\r\n                                                    // isIdsField=\"yes\"\r\n                                                    exportExcelNew={this.exportExcelNew}\r\n                                                    onExpandChange={this.expandChange}\r\n                                                    expandField=\"expanded\"\r\n                                                    hideDetailBand={true}\r\n                                                /> \r\n                                            </Card.Body>\r\n                                        </Card>\r\n                                    </ContentPanel>\r\n                                            \r\n                                   :\"\"\r\n                                    }\r\n                                     </div>\r\n                                </PerfectScrollbar>\r\n                            </SplitterLayout>\r\n                            {/* </SplitterLayout> */}\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n            </>\r\n        );\r\n\r\n    }\r\n    expandChange = (event) => {\r\n        event.dataItem[event.target.props.expandField] = event.value;\r\n        this.setState({\r\n            dataResult: process(this.props.Login.masterData.AuditDetails || [], this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll :\r\n                this.state.dataState),\r\n            dataState: this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll\r\n                : this.state.dataState,\r\n        });\r\n    };\r\n    handlePageChange = e => {\r\n        this.setState({\r\n            skip: e.skip,\r\n            take: e.take\r\n        });\r\n        //setTimeout(() => { this._scrollBarRef.updateScroll() })\r\n    };\r\n\r\n\r\n    onReload = () => {\r\n\r\n        // let dFromDate = this.props.Login.masterData.breadCrumbFrom ? (this.props.Login.masterData.breadCrumbFrom) : this.props.Login.masterData.FromDate;\r\n        // let dToDate = this.props.Login.masterData.breadCrumbTo ? (this.props.Login.masterData.breadCrumbTo) : this.props.Login.masterData.ToDate;\r\n        //var dTempFromDate = this.state.selectedRecord[\"fromdate\"] ? this.state.selectedRecord[\"fromdate\"] : this.props.Login.masterData.FromDate;\r\n        //let dTempToDate = this.state.selectedRecord[\"todate\"] ? this.state.selectedRecord[\"todate\"] : this.props.Login.masterData.ToDate;\r\n        //let temp = dFromDate.indexOf('-');\r\n        // let fromMonth = (dTempFromDate.getMonth()+1);\r\n        // let toMonth = (dTempToDate.getMonth()+1);\r\n        // let fromMonth = String(new Date(dFromDate).getMonth() + 1)\r\n        // let toMonth = String(new Date(dToDate).getMonth() + 1)\r\n        // let fromYear = dFromDate.substring(0, 4);\r\n        // let toYear = dToDate.substring(0, 4);\r\n        // let ntempviewtypecode = 0;\r\n        let breadCrumbFrom = this.props.Login.masterData.FromDate ? this.props.Login.masterData.FromDate : this.props.Login.masterData.breadCrumbFrom;\r\n        let breadCrumbTo = this.props.Login.masterData.ToDate ? this.props.Login.masterData.ToDate : this.props.Login.masterData.breadCrumbTo;\r\n        let breadCrumbModule = this.props.Login.masterData.breadCrumbModule\r\n        let breadCrumbForm = this.props.Login.masterData.breadCrumbForm\r\n        let breadCrumbUser = this.props.Login.masterData.breadCrumbUser\r\n        let breadCrumbRole = this.props.Login.masterData.breadCrumbRole\r\n        let breadCrumbViewType = this.props.Login.masterData.breadCrumbViewType\r\n            ? this.props.Login.masterData.breadCrumbViewType : this.props.Login.ViewType;\r\n\r\n            let fromDate=  this.props.Login.masterData.FromDate;\r\n            let toDate=  this.props.Login.masterData.ToDate;\r\n     \r\n             let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);  \r\n        let inputData = {\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            modulecode: breadCrumbModule ? breadCrumbModule.value : 0,\r\n            formcode: breadCrumbForm ? breadCrumbForm.value : 0,\r\n            usercode: breadCrumbUser ? breadCrumbUser.value : 0,\r\n            userrole: breadCrumbRole ? breadCrumbRole.value : 0,\r\n            viewtypecode: breadCrumbViewType ? breadCrumbViewType.value\r\n                : this.props.Login.masterData.ViewType.nauditactionfiltercode,\r\n\r\n            // viewtypecode : this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode :0,\r\n            // viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\r\n            userinfo: this.props.Login.userInfo,\r\n            postParamList: this.filterParam,\r\n        }\r\n\r\n        let masterData = {\r\n            ...this.props.Login.masterData, breadCrumbFrom, breadCrumbTo, breadCrumbModule,\r\n            breadCrumbForm, breadCrumbUser, breadCrumbRole,\r\n            //breadCrumbViewType : breadCrumbViewType ? breadCrumbViewType :\r\n            // this.props.Login.masterData.ViewType\r\n            breadCrumbViewType: breadCrumbViewType ? breadCrumbViewType\r\n                : {\r\n                    label: this.props.Login.masterData.ViewType.sauditactionfiltername,\r\n                    value: this.props.Login.masterData.ViewType.nauditactionfiltercode,\r\n                    item: this.props.Login.masterData.ViewType\r\n                }\r\n        }\r\n\r\n\r\n        let inputParam = { masterData, inputData, searchRef: this.searchRef, detailSkip: this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll.skip : this.state.dataState.skip }\r\n        this.props.getFilterAuditTrailRecords(inputParam)\r\n    }\r\n\r\n    onFilterSubmit = () => {\r\n\r\n        let breadCrumbFrom = this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : rearrangeDateFormat(this.props.Login.userInfo,this.props.Login.masterData.FromDate);\r\n        let breadCrumbTo = this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : rearrangeDateFormat(this.props.Login.userInfo,this.props.Login.masterData.ToDate);\r\n        let breadCrumbModule = this.state.selectedRecord['nmodulecode']\r\n        let breadCrumbForm = this.state.selectedRecord['nformcode']\r\n        let breadCrumbUser = this.state.selectedRecord['nusercode']\r\n        let breadCrumbRole = this.state.selectedRecord['nuserrolecode']\r\n        let breadCrumbViewType = this.state.selectedRecord['nauditactionfiltercode']\r\n\r\n        let masterData = {\r\n            ...this.props.Login.masterData, breadCrumbFrom, breadCrumbTo, breadCrumbModule, breadCrumbForm, breadCrumbUser, breadCrumbRole, breadCrumbViewType\r\n        }\r\n       let fromDate= this.state.selectedRecord[\"fromdate\"] ?this.state.selectedRecord[\"fromdate\"]: this.props.Login.masterData.FromDate;\r\n       let toDate= this.state.selectedRecord[\"todate\"] ? this.state.selectedRecord[\"todate\"]: this.props.Login.masterData.ToDate;\r\n\r\n        let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);  \r\n        let inputData = {\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n            formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n            usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n            userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n            //viewtypecode: ntempviewtypecode,//this.state.selectedcombo[\"nviewtypecode\"] ? this.state.selectedcombo[\"nviewtypecode\"].value:0,\r\n            viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : -1,\r\n            userinfo: this.props.Login.userInfo,\r\n            postParamList: this.filterParam,\r\n        }\r\n\r\n        let inputParam = {\r\n            masterData, inputData, searchRef: this.searchRef,\r\n            detailSkip: this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll.skip : this.state.dataState.skip\r\n        }\r\n        this.props.getFilterAuditTrailRecords(inputParam)\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName, caseNo) => {\r\n        if (comboData != null) {\r\n            if (fieldName === \"nmodulecode\" || fieldName === \"nformcode\"\r\n                || fieldName === \"nusercode\" || fieldName === \"nuserrolecode\" || fieldName === \"nauditactionfiltercode\") {\r\n                const selectedRecord = this.state.selectedRecord || {};\r\n                selectedRecord[fieldName] = comboData;\r\n                // let qualisForms = this.state.qualisForms;\r\n                let qualisForms = this.state.wholeQualisForms;\r\n                if (fieldName === \"nmodulecode\") {\r\n\r\n                    selectedRecord[\"nformcode\"] = \"\";\r\n                    qualisForms = qualisForms.filter(form => form.item.nmodulecode === comboData.value);\r\n\r\n                } else if (selectedRecord.nmodulecode && selectedRecord.nmodulecode.value) {\r\n\r\n                    qualisForms = qualisForms.filter(form => form.item.nmodulecode === selectedRecord.nmodulecode.value);\r\n\r\n                }\r\n                this.setState({ selectedRecord, qualisForms });\r\n            }\r\n\r\n\r\n\r\n            /*if (fieldName === \"nauditactionfiltercode\") {\r\n \r\n                this.searchRef.current.value = \"\";\r\n \r\n                const selectedcombo = this.state.selectedcombo || {};\r\n                selectedcombo[fieldName] = comboData;\r\n                const dataStateAll = {\r\n                    skip: 0,\r\n                    take: 100\r\n                };\r\n \r\n                this.setState({ selectedcombo, dataStateAll });\r\n \r\n                let masterData = {\r\n                    ...this.props.Login.masterData, searchedAudit: undefined\r\n                }\r\n                let inputData = {\r\n                    fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\r\n                    toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\r\n                    modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n                    formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n                    usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n                    userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n                    viewtypecode: this.state.selectedcombo[\"nauditactionfiltercode\"] ? this.state.selectedcombo[\"nauditactionfiltercode\"].value : 0,\r\n                    userinfo: this.props.Login.userInfo,\r\n                    postParamList: this.filterParam,\r\n                }\r\n \r\n                let inputParam = { masterData, inputData }\r\n                this.props.getFilterAuditTrailRecords(inputParam)\r\n            }*/\r\n\r\n        }\r\n        else {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n            selectedRecord[fieldName] = comboData;\r\n            if (fieldName === 'nmodulecode') {\r\n                selectedRecord[\"nformcode\"] = \"\";\r\n                const qualisForms = this.state.wholeQualisForms;\r\n                this.setState({ selectedRecord, qualisForms });\r\n            }\r\n            else\r\n                this.setState({ selectedRecord });\r\n        }\r\n\r\n    }\r\n\r\n    handleDateChange = (dateName, dateValue) => {\r\n        let selectedRecord = this.state.selectedRecord;\r\n        selectedRecord[dateName] = dateValue;\r\n\r\n\r\n        //this.setState({selectedRecord});\r\n\r\n        let viewTypeAuditList = this.state.viewTypeAudit;\r\n\r\n        let dFromDate = this.state.selectedRecord[\"fromdate\"] ? rearrangeDateFormat(this.props.Login.userInfo,this.state.selectedRecord[\"fromdate\"]) : rearrangeDateFormat(this.props.Login.userInfo,this.props.Login.masterData.FromDate);\r\n        let dToDate = this.state.selectedRecord[\"todate\"] ? rearrangeDateFormat(this.props.Login.userInfo,this.state.selectedRecord[\"todate\"]) : rearrangeDateFormat(this.props.Login.userInfo,this.props.Login.masterData.ToDate);\r\n        // let ntempviewtypecode = 0;\r\n        let fromMonth = String(dFromDate.getMonth() + 1)\r\n        let toMonth = String(dToDate.getMonth() + 1)\r\n        let fromYear = String(dFromDate.getFullYear()) ;\r\n        let toYear = String(dToDate.getFullYear()) ;\r\n\r\n        if (fromYear !== toYear) {\r\n\r\n            selectedRecord[\"nauditactionfiltercode\"] =\r\n                viewTypeAuditList.length > 0 ? {\r\n                    \"value\": viewTypeAuditList[2].item.nauditactionfiltercode,\r\n                    \"label\": viewTypeAuditList[2].item.sauditactionfiltername\r\n                } : this.state.selectedRecord[\"nauditactionfiltercode\"]\r\n\r\n            // ntempviewtypecode = viewTypeAuditList[2].item.nauditactionfiltercode;\r\n        }\r\n        else if (fromMonth !== toMonth) {\r\n            selectedRecord[\"nauditactionfiltercode\"] = viewTypeAuditList.length > 0 ? {\r\n                \"value\": viewTypeAuditList[1].item.nauditactionfiltercode,\r\n                \"label\": viewTypeAuditList[1].item.sauditactionfiltername\r\n            } : this.state.selectedRecord[\"nauditactionfiltercode\"]\r\n\r\n\r\n            // ntempviewtypecode = viewTypeAuditList[1].item.nauditactionfiltercode;\r\n        }\r\n        else {\r\n            selectedRecord[\"nauditactionfiltercode\"] = viewTypeAuditList.length > 0 ? {\r\n                \"value\": viewTypeAuditList[0].item.nauditactionfiltercode,\r\n                \"label\": viewTypeAuditList[0].item.sauditactionfiltername\r\n            } : this.state.selectedRecord[\"nauditactionfiltercode\"]\r\n\r\n            // ntempviewtypecode = viewTypeAuditList[0].item.nauditactionfiltercode;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n\r\n    openFilter = () => {\r\n        let showFilter = !this.props.Login.showFilter\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeFilter = () => {\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    breadcrumbList = () => {\r\n        let breadCrumbArray = [];\r\n // let fromDate = this.props.Login.masterData.breadCrumbFrom ? this.props.Login.masterData.breadCrumbFrom : this.props.Login.masterData.FromDate;\r\n    //    let toDate = this.props.Login.masterData.breadCrumbTo ? this.props.Login.masterData.breadCrumbTo : this.props.Login.masterData.ToDate;\r\n       \r\n     let fromDate = this.props.Login.masterData.FromDate ? this.props.Login.masterData.FromDate : this.props.Login.masterData.breadCrumbFrom;\r\n     let toDate = this.props.Login.masterData.ToDate ? this.props.Login.masterData.ToDate : this.props.Login.masterData.breadCrumbTo;\r\n      \r\n    let obj = convertDateValuetoString(fromDate, \r\n            toDate,\r\n            this.props.Login.userInfo);   \r\n        breadCrumbArray.push({\r\n            \"label\": \"IDS_FROM\",\r\n            \"value\": obj.breadCrumbFrom\r\n        }, {\r\n            \"label\": \"IDS_TO\",\r\n            \"value\": obj.breadCrumbto\r\n        });\r\n        this.props.Login.masterData.breadCrumbModule &&\r\n            breadCrumbArray.push(\r\n                {\r\n                    \"label\": \"IDS_MODULENAME\",\r\n                    \"value\": this.props.Login.masterData.breadCrumbModule.label\r\n                });\r\n        this.props.Login.masterData.breadCrumbForm &&\r\n            breadCrumbArray.push(\r\n                {\r\n                    \"label\": \"IDS_FORMNAME\",\r\n                    \"value\": this.props.Login.masterData.breadCrumbForm.label\r\n                });\r\n        this.props.Login.masterData.breadCrumbUser &&\r\n            breadCrumbArray.push(\r\n                {\r\n                    \"label\": \"IDS_USERNAME\",\r\n                    \"value\": this.props.Login.masterData.breadCrumbUser.label\r\n                });\r\n        this.props.Login.masterData.breadCrumbRole &&\r\n            breadCrumbArray.push(\r\n                {\r\n                    \"label\": \"IDS_USERROLE\",\r\n                    \"value\": this.props.Login.masterData.breadCrumbRole.label\r\n                });\r\n\r\n        breadCrumbArray.push(\r\n            {\r\n                \"label\": \"IDS_VIEWPERIOD\",\r\n                \"value\": this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.label :\r\n                    this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.sauditactionfiltername : \"\"\r\n            });\r\n\r\n\r\n        // this.state.selectedRecord[\"nformcode\"] &&\r\n        //  {\r\n        //     \"label\": \"IDS_FORMNAME\",\r\n        //     \"value\": this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].label : \"\"\r\n        // },\r\n        // this.state.selectedRecord[\"nusercode\"] &&\r\n        // {\r\n        //     \"label\": \"IDS_USERNAME\",\r\n        //     \"value\": this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].label : \"\"\r\n        // },\r\n        // this.state.selectedRecord[\"nuserrolecode\"] &&\r\n        // {\r\n        //     \"label\": \"IDS_USERROLE\",\r\n        //     \"value\": this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].label : \"\"\r\n\r\n        // }\r\n        return breadCrumbArray;\r\n    };\r\n\r\n    // covertDatetoString(startDateValue, endDateValue) {\r\n    //     const startDate = new Date(startDateValue);\r\n    //     const endDate = new Date(endDateValue);\r\n\r\n    //     const prevMonth = validateTwoDigitDate(String(startDate.getMonth() + 1));\r\n    //     const currentMonth = validateTwoDigitDate(String(endDate.getMonth() + 1));\r\n    //     const prevDay = validateTwoDigitDate(String(startDate.getDate()));\r\n    //     const currentDay = validateTwoDigitDate(String(endDate.getDate()));\r\n\r\n    //     const fromDateOnly = startDate.getFullYear() + '-' + prevMonth + '-' + prevDay\r\n    //     const toDateOnly = endDate.getFullYear() + '-' + currentMonth + '-' + currentDay\r\n    //     const fromDate = fromDateOnly + \"T00:00:00\";\r\n    //     const toDate = toDateOnly + \"T23:59:59\";\r\n\r\n\r\n    //     return ({ fromDate, toDate, breadCrumbFrom: fromDateOnly, breadCrumbto: toDateOnly })\r\n    // }\r\n\r\n   \r\n\r\n    componentDidUpdate(previousProps) {\r\n        \r\n        let updateState = false;\r\n        let { selectedRecord, qualisModule, qualisForms, wholeQualisForms, users, userRole,\r\n            viewTypeAudit, dataStateAll, dataState, dataResult,skip,take } = this.state\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            updateState = true;\r\n            selectedRecord = this.props.Login.selectedRecord;\r\n        }\r\n        if (this.props.Login.masterData.QualisModule !== previousProps.Login.masterData.QualisModule\r\n            || this.props.Login.masterData.QualisForms !== previousProps.Login.masterData.QualisForms\r\n            || this.props.Login.masterData.Users !== previousProps.Login.masterData.Users\r\n            || this.props.Login.masterData.UserRole !== previousProps.Login.masterData.UserRole\r\n        ) {\r\n            updateState = true;\r\n            const qualisModuleMap = constructOptionList(this.props.Login.masterData.QualisModule || [], \"nmodulecode\",\r\n                \"smodulename\", \"nsorter\", \"ascending\", false);\r\n            //const allQualisModuleList = qualisModule.get(\"OptionList\");\r\n            const qualisModuleList = qualisModuleMap.get(\"OptionList\");\r\n\r\n            const qualisFormsMap = constructOptionList(this.props.Login.masterData.QualisForms || [], \"nformcode\",\r\n                \"sformname\", \"nsorter\", \"ascending\", false);\r\n            // const allQualisFormsList = qualisForms.get(\"OptionList\");\r\n            let qualisFormsList = []\r\n            if (selectedRecord && selectedRecord.nmodulecode && selectedRecord.nmodulecode.value) {\r\n                qualisFormsList = qualisFormsMap.get(\"OptionList\").filter(form => form.item.nmodulecode === selectedRecord.nmodulecode.value);\r\n            } else {\r\n                qualisFormsList = qualisFormsMap.get(\"OptionList\");\r\n            }\r\n\r\n            const usersMap = constructOptionList(this.props.Login.masterData.Users || [], \"nusercode\",\r\n                \"susername\", undefined, undefined, undefined);\r\n            //const allUsersList = users.get(\"OptionList\");\r\n            const usersList = usersMap.get(\"OptionList\");\r\n\r\n            const userRoleMap = constructOptionList(this.props.Login.masterData.UserRole || [], \"nuserrolecode\",\r\n                \"suserrolename\", undefined, undefined, undefined);\r\n            //const allUserRoleList = userRole.get(\"OptionList\");\r\n            const userRoleList = userRoleMap.get(\"OptionList\");\r\n\r\n            const viewTypeAuditMap = constructOptionList(this.props.Login.masterData.ViewTypeAudit || [], \"nauditactionfiltercode\",\r\n                \"sauditactionfiltername\", \"nsorter\", \"ascending\", false);\r\n            const viewTypeAuditList = viewTypeAuditMap.get(\"OptionList\");\r\n\r\n\r\n            qualisModule = qualisModuleList\r\n            qualisForms = qualisFormsList\r\n            wholeQualisForms = qualisFormsList\r\n            users = usersList\r\n            userRole = userRoleList\r\n            viewTypeAudit = viewTypeAuditList\r\n            selectedRecord = {\r\n                nauditactionfiltercode: viewTypeAuditList.length > 0 ? {\r\n                    \"value\": viewTypeAuditList[0].item.nauditactionfiltercode,\r\n                    \"label\": viewTypeAuditList[0].item.sauditactionfiltername\r\n                } : this.state.selectedRecord[\"nauditactionfiltercode\"]\r\n            }\r\n\r\n        }\r\n\r\n        if (this.props.Login.resetDataGridPage && this.props.Login.resetDataGridPage !== previousProps.Login.resetDataGridPage) {\r\n            if (this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\r\n\r\n                dataStateAll.skip =  0\r\n                updateState = true;\r\n            }\r\n            else {\r\n\r\n                dataState.skip = 0\r\n                updateState = true;\r\n            }\r\n        }\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            updateState = true;\r\n            if (selectedRecord && selectedRecord.nmodulecode && selectedRecord.nmodulecode.value) {\r\n                qualisForms = qualisForms.filter(form => form.item.nmodulecode === selectedRecord.nmodulecode.value);\r\n            } else {\r\n                qualisForms = wholeQualisForms;\r\n            }\r\n            if (this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\r\n\r\n                dataStateAll = {skip:0, take:dataStateAll.take, group:dataStateAll.group}\r\n                updateState = true;\r\n            }\r\n            else {\r\n\r\n                dataState = {skip:0, take:dataState.take, group:dataState.group}\r\n                updateState = true;\r\n            }\r\n            const auditdate=(this.props.Login.masterData.AuditDetails&&this.props.Login.masterData.AuditDetails.slice(dataState.skip,dataState.take+dataState.skip))||[]\r\n            dataResult = process(auditdate|| [],  dataState)\r\n\r\n                skip = this.props.Login.skip === undefined ? skip : this.props.Login.skip\r\n                take = this.props.Login.take || take\r\n\r\n        }\r\n        if (updateState) {\r\n            this.setState({\r\n                selectedRecord, qualisModule, qualisForms, wholeQualisForms, users, userRole,\r\n                viewTypeAudit, dataStateAll, dataState, dataResult,skip,take\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.myRef.current.offsetParent.clientHeight !== this.state.gridHeight) {\r\n            this.setState({\r\n                gridHeight: this.myRef.current.offsetParent.clientHeight\r\n            })\r\n    \r\n        }\r\n    }\r\n    \r\n\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, validateEsignCredential, filterTransactionList,\r\n    updateStore, filterColumnData, getAuditTrailDetail, getFilterAuditTrailRecords, getFormNameByModule, getExportExcel\r\n})(injectIntl(AuditTrail));"]},"metadata":{},"sourceType":"module"}