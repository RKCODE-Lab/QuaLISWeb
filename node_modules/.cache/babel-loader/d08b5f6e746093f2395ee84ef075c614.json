{"ast":null,"code":"var _jsxFileName = \"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\branches\\\\SOURCE-513-PROD\\\\SOURCE-513-ALPD-5500\\\\QuaLISWeb\\\\src\\\\pages\\\\storagemanagement\\\\AliquotPlan.jsx\";\nimport { process } from '@progress/kendo-data-query';\nimport React from 'react';\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\nimport { connect } from 'react-redux';\nimport { injectIntl } from 'react-intl';\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\nimport { showEsign, getControlMap, Lims_JSON_stringify } from '../../components/CommonScript';\nimport { Col, Row } from 'react-bootstrap';\nimport { ListWrapper } from '../../components/client-group.styles';\nimport DataGrid from '../../components/data-grid/data-grid.component';\nimport Esign from '../audittrail/Esign';\nimport AddAliquotPlan from './AddAliquotPlan';\nimport { callService, updateStore, crudMaster, validateEsignCredential } from '../../actions';\nimport { toast } from 'react-toastify';\nimport { getprojectytpe, getSampleTypeandPatientCatgeroy, getUnit, getActiveAliquotPlanById } from '../../actions';\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass AliquotPlan extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.dataStateChange = event => {\n      this.setState({\n        dataResult: process(this.state.data, event.dataState),\n        dataState: event.dataState\n      });\n    };\n\n    this.reloadData = () => {\n      const inputParam = {\n        inputData: {\n          \"userinfo\": this.props.Login.userInfo\n        },\n        classUrl: this.props.Login.inputParam.classUrl,\n        methodUrl: this.props.Login.inputParam.methodUrl,\n        userInfo: this.props.Login.userInfo,\n        displayName: this.props.Login.displayName\n      };\n      this.props.callService(inputParam);\n    };\n\n    this.onComboChange = (comboData, fieldName) => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (fieldName === \"sprojecttypename\") {\n        selectedRecord[fieldName] = comboData;\n        delete selectedRecord[\"sproductname\"];\n        delete selectedRecord[\"stubename\"];\n        delete selectedRecord[\"svisitnumber\"];\n        delete selectedRecord[\"spatientcatname\"];\n        delete selectedRecord[\"ssampledonor\"]; // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n\n        this.props.getSampleTypeandPatientCatgeroy(this.state.selectedRecord.sprojecttypename.value, this.state.selectedRecord.sprojecttypename.label, this.props.Login.userInfo);\n      } else {\n        selectedRecord[fieldName] = comboData;\n        this.setState({\n          selectedRecord\n        });\n      }\n    };\n\n    this.onInputOnChange = (event, fieldName) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      const values = event.target.value; //.replace(/[^-^0-9]/g, '');\n      //let parsedvalues;\n\n      if (fieldName === \"saliquotno\") {\n        if (/^\\d+$/.test(values) && values !== \"\") {\n          //values = parseInt(values, 10);\n          selectedRecord[fieldName] = values;\n        } else {\n          selectedRecord[fieldName] = \"\";\n        }\n      } else if (fieldName === \"squantity\") {\n        if (/^\\d{0,3}(\\.\\d{0,2})?$/.test(values) && values !== \"\") {\n          selectedRecord[fieldName] = values;\n        } else {\n          selectedRecord[fieldName] = [];\n        }\n      } else {\n        selectedRecord[event.target.name] = event.target.value;\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.closeModal = () => {\n      let loadEsign = this.props.Login.loadEsign;\n      let openModal = this.props.Login.openModal;\n      let selectedRecord = this.props.Login.selectedRecord;\n      let controlButton = this.props.Login.controlButton;\n      let selectedId = this.props.Login.selectedId; // let processtypeList;\n      // let projecttypeList;\n      // let sampletypeList;\n      // let collectiontubeList;\n      // let patientcatgoryList;\n      // let visitnameList;\n\n      if (this.props.Login.loadEsign) {\n        //true\n        //ALPD-4713--Vignesh R(21-08-2024)\n        if (this.props.Login.operation === \"delete\") {\n          loadEsign = false;\n          openModal = false;\n          selectedRecord = {};\n        } else {\n          loadEsign = false;\n          selectedRecord['esignpassword'] = \"\";\n          selectedRecord['esignreason'] = \"\";\n          selectedRecord['esigncomments'] = \"\";\n        }\n      } else {\n        openModal = false;\n        selectedRecord = {};\n        controlButton = []; // processtypeList = [];\n        // projecttypeList = [];\n        // sampletypeList = [];\n        // collectiontubeList = [];\n        // patientcatgoryList = [];\n        // visitnameList = [];\n      }\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openModal,\n          loadEsign,\n          selectedRecord,\n          selectedId,\n          controlButton\n        }\n      };\n      this.props.updateStore(updateInfo); //ate234 janakumar ALPD-5065 Aliquot Plan-->While doing Edit ,the dropdown records are not Showing.\n      // this.setState({\n      //     selectedRecord: selectedRecord, processtypeList: processtypeList, projecttypeList: projecttypeList,\n      //     sampletypeList: sampletypeList, collectiontubeList: collectiontubeList, patientcatgoryList: patientcatgoryList, visitnameList: visitnameList\n      // });\n    };\n\n    this.validateEsign = () => {\n      const inputParam = {\n        inputData: {\n          \"userinfo\": { ...this.props.Login.userInfo,\n            sreason: this.state.selectedRecord[\"esigncomments\"],\n            nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\n            spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label\n          },\n          password: this.state.selectedRecord[\"esignpassword\"]\n        },\n        screenData: this.props.Login.screenData\n      };\n      this.props.validateEsignCredential(inputParam, \"openModal\");\n    };\n\n    this.onSaveClick = (saveType, formRef) => {\n      if (this.props.Login.operation === \"create\") {\n        this.onSaveAliquotPlan(saveType, formRef);\n      } else if (this.props.Login.operation === \"update\") {\n        this.updateAliquotPlan(saveType, formRef);\n      }\n    };\n\n    this.onSaveAliquotPlan = (saveType, formRef) => {\n      let selectedRecord = this.state.selectedRecord;\n\n      if (selectedRecord !== undefined) {\n        const inputParam = {\n          nformcode: this.props.Login.userInfo.nformcode,\n          classUrl: \"aliquotplan\",\n          methodUrl: \"AliquotPlan\",\n          selectedRecord: { ...this.state.selectedRecord\n          },\n          inputData: {\n            userinfo: { ...this.props.Login.userInfo,\n              sformname: Lims_JSON_stringify(this.props.Login.userInfo.sformname),\n              smodulename: Lims_JSON_stringify(this.props.Login.userInfo.smodulename)\n            },\n            ncontrolCode: this.props.Login.userInfo.nformcode,\n            tubename: this.state.selectedRecord.stubename.label,\n            tubevalue: this.state.selectedRecord.stubename.value,\n            projecttypename: this.state.selectedRecord.sprojecttypename.label,\n            projecttypevalue: this.state.selectedRecord.sprojecttypename.value,\n            productname: this.state.selectedRecord.sproductname.label,\n            productvalue: this.state.selectedRecord.sproductname.value,\n            patientcatvalue: this.state.selectedRecord.spatientcatname === undefined ? '-1' : this.state.selectedRecord.spatientcatname.value,\n            patientcatname: this.state.selectedRecord.spatientcatname === undefined ? 'NA' : this.state.selectedRecord.spatientcatname.label,\n            visitname: this.state.selectedRecord.svisitnumber.label,\n            visitnumber: this.state.selectedRecord.svisitnumber.value,\n            unitvalue: this.state.selectedRecord.sunitname.value,\n            unitname: this.state.selectedRecord.sunitname.label,\n            squantity: this.state.selectedRecord.squantity,\n            saliquotno: this.state.selectedRecord.saliquotno,\n            sdescription: this.state.selectedRecord.sdescription === undefined ? \"\" : this.state.selectedRecord.sdescription,\n            // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n            nsampledonorcode: this.state.selectedRecord.ssampledonor.value,\n            ssampledonor: this.state.selectedRecord.ssampledonor.label,\n            operation: \"create\"\n          },\n          operation: \"create\",\n          saveType,\n          formRef\n        };\n        const masterData = this.props.Login.masterData;\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\n      }\n    };\n\n    this.updateAliquotPlan = (saveType, formRef) => {\n      const inputParam = {\n        nformcode: this.props.Login.userInfo.nformcode,\n        classUrl: \"aliquotplan\",\n        methodUrl: \"AliquotPlan\",\n        selectedRecord: { ...this.state.selectedRecord\n        },\n        selectedId: this.state.selectedRecord.naliquotplancode,\n        inputData: {\n          userinfo: { ...this.props.Login.userInfo,\n            sformname: Lims_JSON_stringify(this.props.Login.userInfo.sformname),\n            smodulename: Lims_JSON_stringify(this.props.Login.userInfo.smodulename)\n          },\n          //indexof:\n          ncontrolCode: this.props.Login.userInfo.nformcode,\n          naliquotplancode: this.state.selectedRecord.naliquotplancode,\n          tubename: this.state.selectedRecord.stubename.label,\n          tubevalue: this.state.selectedRecord.stubename.value,\n          projecttypename: this.state.selectedRecord.sprojecttypename.label,\n          projecttypevalue: this.state.selectedRecord.sprojecttypename.value,\n          productname: this.state.selectedRecord.sproductname.label,\n          productvalue: this.state.selectedRecord.sproductname.value,\n          patientcatvalue: this.state.selectedRecord.spatientcatname.value === undefined ? '-1' : this.state.selectedRecord.spatientcatname.value,\n          patientcatname: this.state.selectedRecord.spatientcatname.label,\n          visitname: this.state.selectedRecord.svisitnumber.label,\n          visitnumber: this.state.selectedRecord.svisitnumber.value,\n          unitvalue: this.state.selectedRecord.sunitname.value,\n          unitname: this.state.selectedRecord.sunitname.label,\n          squantity: this.state.selectedRecord.squantity,\n          saliquotno: this.state.selectedRecord.saliquotno,\n          sdescription: this.state.selectedRecord.sdescription === undefined ? \"\" : this.state.selectedRecord.sdescription,\n          // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n          nsampledonorcode: this.state.selectedRecord.ssampledonor.value,\n          ssampledonor: this.state.selectedRecord.ssampledonor.label,\n          operation: \"update\"\n        },\n        operation: \"update\",\n        saveType,\n        formRef\n      };\n      const masterData = this.props.Login.masterData;\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData\n            },\n            saveType\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\n      }\n    };\n\n    this.deleteRecord = deleteParam => {\n      const inputParam = {\n        classUrl: this.props.Login.inputParam.classUrl,\n        methodUrl: this.props.Login.inputParam.methodUrl,\n        displayName: this.props.Login.inputParam.displayName,\n        inputData: {\n          [this.props.Login.inputParam.methodUrl.toLowerCase()]: deleteParam.selectedRecord,\n          //.dataItem,\n          \"userinfo\": this.props.Login.userInfo\n        },\n        operation: deleteParam.operation,\n        dataState: this.state.dataState,\n        selectedRecord: deleteParam.selectedRecord\n      };\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData: this.props.Login.masterData\n            },\n            openModal: true,\n            screenName: this.props.intl.formatMessage({\n              id: this.props.Login.displayName\n            }),\n            operation: deleteParam.operation\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\n      }\n    };\n\n    this.formRef = React.createRef();\n    this.extractedColumnList = [];\n    const dataState = {\n      skip: 0,\n      take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\n    };\n    this.state = {\n      data: [],\n      masterStatus: \"\",\n      error: \"\",\n      selectedRecord: {},\n      dataResult: [],\n      dataState: dataState,\n      userRoleControlRights: [],\n      controlMap: new Map()\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\n      toast.warn(props.Login.masterStatus);\n      props.Login.masterStatus = \"\";\n    }\n\n    if (props.Login.error !== state.error) {\n      toast.error(props.Login.error);\n      props.Login.error = \"\";\n    }\n\n    return null;\n  }\n\n  render() {\n    let primaryKeyField = \"\";\n\n    if (this.props.Login.inputParam !== undefined) {\n      this.extractedColumnList = [{\n        \"mandatory\": true,\n        \"idsName\": \"IDS_PROJECTTYPE\",\n        \"dataField\": \"sprojecttypename\",\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"mandatory\": true,\n        \"idsName\": \"IDS_SAMPLETYPE\",\n        \"dataField\": \"sproductname\",\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"mandatory\": true,\n        \"idsName\": \"IDS_COLLECTIONTUBETYPEPROCESSTYPE\",\n        \"dataField\": \"stubename\",\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\",\n        \"width\": 180\n      }, {\n        \"mandatory\": true,\n        \"idsName\": \"IDS_VISITNUMBER\",\n        \"dataField\": \"svisitnumber\",\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"mandatory\": true,\n        \"idsName\": \"IDS_PATIENTCATEGORY\",\n        \"dataField\": \"spatientcatname\",\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\",\n        \"width\": 180\n      }, // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n      {\n        \"mandatory\": true,\n        \"idsName\": \"IDS_SAMPLEDONOR\",\n        \"dataField\": \"ssampledonor\",\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"mandatory\": true,\n        \"idsName\": \"IDS_ALIQUOTNO\",\n        \"dataField\": \"saliquotno\",\n        \"mandatoryLabel\": \"IDS_ENTER\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"mandatory\": true,\n        \"idsName\": \"IDS_QUANTITY\",\n        \"dataField\": \"squantity\",\n        \"mandatoryLabel\": \"IDS_ENTER\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"mandatory\": true,\n        \"idsName\": \"IDS_UNIT\",\n        \"dataField\": \"sunitname\",\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"mandatory\": true,\n        \"idsName\": \"IDS_DESCRIPTION\",\n        \"dataField\": \"sdescription\",\n        \"mandatoryLabel\": \"IDS_ENTER\",\n        \"controlType\": \"selectbox\"\n      }];\n      primaryKeyField = \"naliquotplancode\";\n    }\n\n    let mandatoryFields = [];\n    mandatoryFields.push({\n      \"mandatory\": true,\n      \"idsName\": \"IDS_PROJECTTYPE\",\n      \"dataField\": \"sprojecttypename\",\n      \"mandatoryLabel\": \"IDS_SELECT\",\n      \"controlType\": \"selectbox\"\n    }, {\n      \"mandatory\": true,\n      \"idsName\": \"IDS_SAMPLETYPE\",\n      \"dataField\": \"sproductname\",\n      \"mandatoryLabel\": \"IDS_SELECT\",\n      \"controlType\": \"selectbox\"\n    }, {\n      \"mandatory\": true,\n      \"idsName\": \"IDS_COLLECTIONTUBETYPEPROCESSTYPE\",\n      \"dataField\": \"stubename\",\n      \"mandatoryLabel\": \"IDS_SELECT\",\n      \"controlType\": \"selectbox\"\n    }, {\n      \"mandatory\": true,\n      \"idsName\": \"IDS_VISITNUMBER\",\n      \"dataField\": \"svisitnumber\",\n      \"mandatoryLabel\": \"IDS_SELECT\",\n      \"controlType\": \"selectbox\"\n    }, {\n      \"mandatory\": true,\n      \"idsName\": \"IDS_PATIENTCATEGORY\",\n      \"dataField\": \"spatientcatname\",\n      \"mandatoryLabel\": \"IDS_SELECT\",\n      \"controlType\": \"selectbox\"\n    }, {\n      \"mandatory\": true,\n      \"idsName\": \"IDS_ALIQUOTNO\",\n      \"dataField\": \"saliquotno\",\n      \"mandatoryLabel\": \"IDS_ENTER\",\n      \"controlType\": \"selectbox\"\n    }, //ALPD-4712--Vignesh R(21-08-2024)\n    {\n      \"mandatory\": true,\n      \"idsName\": \"IDS_QUANTITY\",\n      \"dataField\": \"squantity\",\n      \"mandatoryLabel\": \"IDS_ENTER\",\n      \"controlType\": \"selectbox\"\n    }, {\n      \"mandatory\": true,\n      \"idsName\": \"IDS_UNIT\",\n      \"dataField\": \"sunitname\",\n      \"mandatoryLabel\": \"IDS_SELECT\",\n      \"controlType\": \"selectbox\"\n    }, // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n    {\n      \"mandatory\": true,\n      \"idsName\": \"IDS_SAMPLEDONOR\",\n      \"dataField\": \"ssampledonor\",\n      \"mandatoryLabel\": \"IDS_SELECT\",\n      \"controlType\": \"selectbox\"\n    });\n    const AddAliquotPlanId = this.state.controlMap.has(\"AddAliquotPlan\") && this.state.controlMap.get(\"AddAliquotPlan\").ncontrolcode;\n    const EditAliquotPlanId = this.state.controlMap.has(\"EditAliquotPlan\") && this.state.controlMap.get(\"EditAliquotPlan\").ncontrolcode;\n    const DeleteAliquotPlanId = this.state.controlMap.has(\"DeleteAliquotPlan\") && this.state.controlMap.get(\"DeleteAliquotPlan\").ncontrolcode;\n    const editParam = {\n      screenName: this.props.Login.inputParam && this.props.Login.inputParam.displayName && this.props.intl.formatMessage({\n        id: this.props.Login.inputParam.displayName\n      }),\n      primaryKeyField: \"naliquotplancode\",\n      operation: \"update\",\n      inputParam: this.props.Login.inputParam,\n      userInfo: this.props.Login.userInfo,\n      ncontrolCode: EditAliquotPlanId\n    };\n    const deleteParam = {\n      operation: \"delete\",\n      DeleteAliquotPlanId: DeleteAliquotPlanId\n    };\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ListWrapper, {\n      className: \"client-list-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(DataGrid, {\n      primaryKeyField: primaryKeyField,\n      selectedId: this.props.Login.selectedId,\n      data: this.state.data,\n      dataResult: this.state.dataResult,\n      dataState: this.state.dataState,\n      dataStateChange: this.dataStateChange,\n      extractedColumnList: this.extractedColumnList,\n      controlMap: this.state.controlMap,\n      userRoleControlRights: this.state.userRoleControlRights,\n      inputParam: this.props.Login.inputParam,\n      userInfo: this.props.Login.userInfo,\n      fetchRecord: this.props.getActiveAliquotPlanById,\n      addRecord: () => this.props.getprojectytpe(AddAliquotPlanId, this.props.Login.userInfo) || [],\n      deleteRecord: this.deleteRecord,\n      reloadData: this.reloadData,\n      editParam: editParam,\n      deleteParam: deleteParam,\n      scrollable: \"scrollable\",\n      gridHeight: \"600px\",\n      isActionRequired: true,\n      isToolBarRequired: true,\n      pageable: true,\n      groupable: false //ATE234 Janakumar ALPD-5577 Sample Storage-->while download the pdf, screen getting freezed\n      ,\n      isDownloadPDFRequired: false,\n      isDownloadExcelRequired: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    })))), this.props.Login.openModal && /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.Login.openModal,\n      closeModal: this.closeModal,\n      operation: this.props.Login.operation,\n      inputParam: this.props.Login.inputParam,\n      screenName: this.props.Login.screenName,\n      onSaveClick: this.onSaveClick,\n      esign: this.props.Login.loadEsign,\n      validateEsign: this.validateEsign,\n      masterStatus: this.props.Login.masterStatus,\n      selectedRecord: this.state.selectedRecord || {},\n      updateStore: this.props.updateStore,\n      mandatoryFields: mandatoryFields,\n      addComponent: this.props.Login.loadEsign ? /*#__PURE__*/React.createElement(Esign, {\n        operation: this.props.Login.operation,\n        onInputOnChange: this.onInputOnChange,\n        inputParam: this.props.Login.inputParam,\n        selectedRecord: this.state.selectedRecord || {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 25\n        }\n      }) : /*#__PURE__*/React.createElement(AddAliquotPlan, {\n        selectedRecord: this.state.selectedRecord || {},\n        onInputOnChange: this.onInputOnChange,\n        onComboChange: this.onComboChange,\n        renalCheck: this.state.renalCheck,\n        donarCheck: this.state.donarCheck // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n        ,\n        projecttypeList: this.state.projecttypeList || [],\n        sampletypeList: this.state.sampletypeList || [],\n        collectiontubeList: this.state.collectiontubeList || [],\n        patientcatgoryList: this.state.patientcatgoryList || [],\n        visitnameList: this.state.visitnameList || [],\n        unitList: this.state.unitList || [],\n        sampledonarList: this.state.sampledonarList || [] // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n        ,\n        inputParam: this.props.Login.inputParam,\n        actionType: this.state.actionType,\n        operation: this.props.Login.operation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 27\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  componentDidUpdate(previousProps) {\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\n      if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n        const userRoleControlRights = [];\n\n        if (this.props.Login.userRoleControlRights) {\n          this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item => userRoleControlRights.push(item.ncontrolcode));\n        }\n\n        const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode);\n        this.setState({\n          userRoleControlRights,\n          controlMap,\n          data: this.props.Login.masterData,\n          dataResult: process(this.props.Login.masterData, this.state.dataState)\n        });\n      } else {\n        let {\n          dataState\n        } = this.state;\n\n        if (dataState === undefined) {\n          dataState = {\n            skip: 0,\n            take: this.state.dataState.take\n          };\n        }\n\n        if (this.state.dataResult.data) {\n          if (this.state.dataResult.data.length > 0 && this.props.Login.operation !== 'update' && this.props.Login.operation === 'create') {\n            let skipcount = this.state.dataState.skip > 0 ? this.props.Login.masterData.length - this.state.dataState.take : this.state.dataState.skip;\n            dataState = {\n              skip: skipcount,\n              take: this.state.dataState.take\n            };\n          }\n        }\n\n        this.setState({\n          data: this.props.Login.masterData,\n          isOpen: false,\n          selectedRecord: this.props.Login.selectedRecord,\n          dataResult: process(this.props.Login.masterData, dataState),\n          dataState\n        });\n      } // let { dataState } = this.state;\n      // if (this.props.Login.dataState === undefined) {\n      //     dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 }\n      // }\n      // this.setState({\n      //     data: this.props.Login.masterData,\n      //     isOpen: false,\n      //     selectedRecord: this.props.Login.selectedRecord,\n      //     dataResult: process(this.props.Login.masterData, dataState),\n      //     dataState\n      // });\n\n    } else if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n      this.setState({\n        selectedRecord: this.props.Login.selectedRecord\n      });\n    }\n\n    if (this.props.Login.projecttypeList !== previousProps.Login.projecttypeList) {\n      this.setState({\n        projecttypeList: this.props.Login.projecttypeList\n      });\n    }\n\n    if (this.props.Login.sampletypeList !== previousProps.Login.sampletypeList) {\n      this.setState({\n        sampletypeList: this.props.Login.sampletypeList\n      });\n    }\n\n    if (this.props.Login.patientcatgoryList !== previousProps.Login.patientcatgoryList) {\n      let selectedRecord = this.props.Login.selectedRecord;\n      let renalCheck = false;\n\n      if (this.props.Login.patientcatgoryList.length > 0) {\n        renalCheck = true;\n\n        if (this.props.Login.operation !== 'update') {\n          selectedRecord[\"spatientcatname\"] = [];\n        }\n      } else {\n        selectedRecord[\"spatientcatname\"] = {\n          value: -1\n        };\n        renalCheck = false; //, selectedRecord: selectedRecord\n      }\n\n      this.setState({\n        patientcatgoryList: this.props.Login.patientcatgoryList,\n        renalCheck: renalCheck,\n        selectedRecord: selectedRecord\n      });\n    } // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n\n\n    if (this.props.Login.sampledonarList !== previousProps.Login.sampledonarList) {\n      let selectedRecord = this.props.Login.selectedRecord;\n      let donarCheck = false;\n\n      if (this.props.Login.sampledonarList.length > 0) {\n        donarCheck = true;\n\n        if (this.props.Login.operation !== 'update') {\n          selectedRecord[\"ssampledonor\"] = [];\n        }\n      } else {\n        selectedRecord[\"ssampledonor\"] = {\n          value: -1\n        };\n        donarCheck = false;\n      }\n\n      this.setState({\n        sampledonarList: this.props.Login.sampledonarList,\n        donarCheck: donarCheck,\n        selectedRecord: selectedRecord\n      });\n    }\n\n    if (this.props.Login.collectiontubeList !== previousProps.Login.collectiontubeList) {\n      this.setState({\n        collectiontubeList: this.props.Login.collectiontubeList\n      });\n    }\n\n    if (this.props.Login.visitnameList !== previousProps.Login.visitnameList) {\n      this.setState({\n        visitnameList: this.props.Login.visitnameList\n      });\n    }\n\n    if (this.props.Login.unitList !== previousProps.Login.unitList) {\n      this.setState({\n        unitList: this.props.Login.unitList\n      });\n    } // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\n\n\n    if (this.props.Login.sampledonarList !== previousProps.Login.sampledonarList) {\n      this.setState({\n        sampledonarList: this.props.Login.sampledonarList\n      });\n    }\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  updateStore,\n  callService,\n  crudMaster,\n  validateEsignCredential,\n  getprojectytpe,\n  getSampleTypeandPatientCatgeroy,\n  getUnit,\n  getActiveAliquotPlanById\n})(injectIntl(AliquotPlan));","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/storagemanagement/AliquotPlan.jsx"],"names":["process","React","SlideOutModal","connect","injectIntl","DEFAULT_RETURN","showEsign","getControlMap","Lims_JSON_stringify","Col","Row","ListWrapper","DataGrid","Esign","AddAliquotPlan","callService","updateStore","crudMaster","validateEsignCredential","toast","getprojectytpe","getSampleTypeandPatientCatgeroy","getUnit","getActiveAliquotPlanById","mapStateToProps","state","Login","AliquotPlan","Component","constructor","props","dataStateChange","event","setState","dataResult","data","dataState","reloadData","inputParam","inputData","userInfo","classUrl","methodUrl","displayName","onComboChange","comboData","fieldName","selectedRecord","sprojecttypename","value","label","onInputOnChange","values","target","test","name","closeModal","loadEsign","openModal","controlButton","selectedId","operation","updateInfo","typeName","validateEsign","sreason","nreasoncode","spredefinedreason","password","screenData","onSaveClick","saveType","formRef","onSaveAliquotPlan","updateAliquotPlan","undefined","nformcode","userinfo","sformname","smodulename","ncontrolCode","tubename","stubename","tubevalue","projecttypename","projecttypevalue","productname","sproductname","productvalue","patientcatvalue","spatientcatname","patientcatname","visitname","svisitnumber","visitnumber","unitvalue","sunitname","unitname","squantity","saliquotno","sdescription","nsampledonorcode","ssampledonor","masterData","naliquotplancode","userRoleControlRights","deleteRecord","deleteParam","toLowerCase","screenName","intl","formatMessage","id","createRef","extractedColumnList","skip","take","settings","parseInt","masterStatus","error","controlMap","Map","getDerivedStateFromProps","warn","render","primaryKeyField","mandatoryFields","push","AddAliquotPlanId","has","get","ncontrolcode","EditAliquotPlanId","DeleteAliquotPlanId","editParam","renalCheck","donarCheck","projecttypeList","sampletypeList","collectiontubeList","patientcatgoryList","visitnameList","unitList","sampledonarList","actionType","componentDidUpdate","previousProps","Object","map","item","length","skipcount","isOpen"],"mappings":";AAAA,SAASA,OAAT,QAAwB,4BAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,gDAA1B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,SAASC,cAAT,QAA+B,0BAA/B;AACA,SAASC,SAAT,EAAoBC,aAApB,EAAmCC,mBAAnC,QACI,+BADJ;AAEA,SAASC,GAAT,EAAcC,GAAd,QAAyB,iBAAzB;AACA,SAASC,WAAT,QAA4B,sCAA5B;AACA,OAAOC,QAAP,MAAqB,gDAArB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAASC,WAAT,EAAsBC,WAAtB,EAAmCC,UAAnC,EAA+CC,uBAA/C,QAA8E,eAA9E;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,cAAT,EAAyBC,+BAAzB,EAA0DC,OAA1D,EAAmEC,wBAAnE,QAAmG,eAAnG;;AAKA,MAAMC,eAAe,GAAGC,KAAK,IAAI;AAC7B,SAAQ;AAAEC,IAAAA,KAAK,EAAED,KAAK,CAACC;AAAf,GAAR;AACH,CAFD;;AAIA,MAAMC,WAAN,SAA0B1B,KAAK,CAAC2B,SAAhC,CAA0C;AAEtCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAmCnBC,eAnCmB,GAmCAC,KAAD,IAAW;AACzB,WAAKC,QAAL,CAAc;AACVC,QAAAA,UAAU,EAAElC,OAAO,CAAC,KAAKyB,KAAL,CAAWU,IAAZ,EAAkBH,KAAK,CAACI,SAAxB,CADT;AAEVA,QAAAA,SAAS,EAAEJ,KAAK,CAACI;AAFP,OAAd;AAIH,KAxCkB;;AAAA,SA4CnBC,UA5CmB,GA4CN,MAAM;AACf,YAAMC,UAAU,GAAG;AACfC,QAAAA,SAAS,EAAE;AAAE,sBAAY,KAAKT,KAAL,CAAWJ,KAAX,CAAiBc;AAA/B,SADI;AAEfC,QAAAA,QAAQ,EAAE,KAAKX,KAAL,CAAWJ,KAAX,CAAiBY,UAAjB,CAA4BG,QAFvB;AAGfC,QAAAA,SAAS,EAAE,KAAKZ,KAAL,CAAWJ,KAAX,CAAiBY,UAAjB,CAA4BI,SAHxB;AAIfF,QAAAA,QAAQ,EAAE,KAAKV,KAAL,CAAWJ,KAAX,CAAiBc,QAJZ;AAKfG,QAAAA,WAAW,EAAE,KAAKb,KAAL,CAAWJ,KAAX,CAAiBiB;AALf,OAAnB;AAQA,WAAKb,KAAL,CAAWf,WAAX,CAAuBuB,UAAvB;AACH,KAtDkB;;AAAA,SAqTnBM,aArTmB,GAqTH,CAACC,SAAD,EAAYC,SAAZ,KAA0B;AAEtC,YAAMC,cAAc,GAAG,KAAKtB,KAAL,CAAWsB,cAAX,IAA6B,EAApD;;AAIA,UAAID,SAAS,KAAK,kBAAlB,EAAsC;AAClCC,QAAAA,cAAc,CAACD,SAAD,CAAd,GAA4BD,SAA5B;AAEA,eAAOE,cAAc,CAAC,cAAD,CAArB;AACA,eAAOA,cAAc,CAAC,WAAD,CAArB;AACA,eAAOA,cAAc,CAAC,cAAD,CAArB;AACA,eAAOA,cAAc,CAAC,iBAAD,CAArB;AACA,eAAOA,cAAc,CAAC,cAAD,CAArB,CAPkC,CAOK;;AACvC,aAAKjB,KAAL,CAAWT,+BAAX,CACI,KAAKI,KAAL,CAAWsB,cAAX,CAA0BC,gBAA1B,CAA2CC,KAD/C,EAEI,KAAKxB,KAAL,CAAWsB,cAAX,CAA0BC,gBAA1B,CAA2CE,KAF/C,EAGI,KAAKpB,KAAL,CAAWJ,KAAX,CAAiBc,QAHrB;AAKH,OAbD,MAaO;AACHO,QAAAA,cAAc,CAACD,SAAD,CAAd,GAA4BD,SAA5B;AACA,aAAKZ,QAAL,CAAc;AAAEc,UAAAA;AAAF,SAAd;AACH;AAEJ,KA7UkB;;AAAA,SAgVnBI,eAhVmB,GAgVD,CAACnB,KAAD,EAAQc,SAAR,KAAsB;AAEpC,YAAMC,cAAc,GAAG,KAAKtB,KAAL,CAAWsB,cAAX,IAA6B,EAApD;AAEA,YAAMK,MAAM,GAAGpB,KAAK,CAACqB,MAAN,CAAaJ,KAA5B,CAJoC,CAIA;AAEpC;;AAEA,UAAIH,SAAS,KAAK,YAAlB,EAAgC;AAE5B,YAAI,QAAQQ,IAAR,CAAaF,MAAb,KAAwBA,MAAM,KAAK,EAAvC,EAA2C;AAEvC;AACAL,UAAAA,cAAc,CAACD,SAAD,CAAd,GAA4BM,MAA5B;AACH,SAJD,MAIO;AACHL,UAAAA,cAAc,CAACD,SAAD,CAAd,GAA4B,EAA5B;AACH;AAEJ,OAVD,MAUO,IAAIA,SAAS,KAAK,WAAlB,EAA+B;AAElC,YAAI,wBAAwBQ,IAAxB,CAA6BF,MAA7B,KAAwCA,MAAM,KAAK,EAAvD,EAA2D;AAEvDL,UAAAA,cAAc,CAACD,SAAD,CAAd,GAA4BM,MAA5B;AACH,SAHD,MAGO;AACHL,UAAAA,cAAc,CAACD,SAAD,CAAd,GAA4B,EAA5B;AACH;AAEJ,OATM,MASA;AACHC,QAAAA,cAAc,CAACf,KAAK,CAACqB,MAAN,CAAaE,IAAd,CAAd,GAAoCvB,KAAK,CAACqB,MAAN,CAAaJ,KAAjD;AACH;;AAED,WAAKhB,QAAL,CAAc;AAAEc,QAAAA;AAAF,OAAd;AACH,KAhXkB;;AAAA,SAmXnBS,UAnXmB,GAmXN,MAAM;AACf,UAAIC,SAAS,GAAG,KAAK3B,KAAL,CAAWJ,KAAX,CAAiB+B,SAAjC;AACA,UAAIC,SAAS,GAAG,KAAK5B,KAAL,CAAWJ,KAAX,CAAiBgC,SAAjC;AACA,UAAIX,cAAc,GAAG,KAAKjB,KAAL,CAAWJ,KAAX,CAAiBqB,cAAtC;AACA,UAAIY,aAAa,GAAG,KAAK7B,KAAL,CAAWJ,KAAX,CAAiBiC,aAArC;AACA,UAAIC,UAAU,GAAG,KAAK9B,KAAL,CAAWJ,KAAX,CAAiBkC,UAAlC,CALe,CAMf;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAI,KAAK9B,KAAL,CAAWJ,KAAX,CAAiB+B,SAArB,EAAgC;AAAE;AAC9B;AACA,YAAI,KAAK3B,KAAL,CAAWJ,KAAX,CAAiBmC,SAAjB,KAA+B,QAAnC,EAA6C;AACzCJ,UAAAA,SAAS,GAAG,KAAZ;AACAC,UAAAA,SAAS,GAAG,KAAZ;AACAX,UAAAA,cAAc,GAAG,EAAjB;AAEH,SALD,MAMK;AACDU,UAAAA,SAAS,GAAG,KAAZ;AACEV,UAAAA,cAAc,CAAC,eAAD,CAAd,GAAkC,EAAlC;AACAA,UAAAA,cAAc,CAAC,aAAD,CAAd,GAAgC,EAAhC;AACFA,UAAAA,cAAc,CAAC,eAAD,CAAd,GAAkC,EAAlC;AACH;AACJ,OAdD,MAeK;AACDW,QAAAA,SAAS,GAAG,KAAZ;AACAX,QAAAA,cAAc,GAAG,EAAjB;AACAY,QAAAA,aAAa,GAAG,EAAhB,CAHC,CAID;AACA;AACA;AACA;AACA;AACA;AAEH;;AACD,YAAMG,UAAU,GAAG;AACfC,QAAAA,QAAQ,EAAE1D,cADK;AAEf8B,QAAAA,IAAI,EAAE;AACFuB,UAAAA,SADE;AACSD,UAAAA,SADT;AACoBV,UAAAA,cADpB;AACoCa,UAAAA,UADpC;AACgDD,UAAAA;AADhD;AAFS,OAAnB;AAMA,WAAK7B,KAAL,CAAWd,WAAX,CAAuB8C,UAAvB,EA9Ce,CAgDf;AACA;AACA;AACA;AACA;AAEH,KAzakB;;AAAA,SA2anBE,aA3amB,GA2aH,MAAM;AAClB,YAAM1B,UAAU,GAAG;AACfC,QAAAA,SAAS,EAAE;AACP,sBAAY,EACR,GAAG,KAAKT,KAAL,CAAWJ,KAAX,CAAiBc,QADZ;AAERyB,YAAAA,OAAO,EAAE,KAAKxC,KAAL,CAAWsB,cAAX,CAA0B,eAA1B,CAFD;AAGRmB,YAAAA,WAAW,EAAE,KAAKzC,KAAL,CAAWsB,cAAX,CAA0B,aAA1B,KAA4C,KAAKtB,KAAL,CAAWsB,cAAX,CAA0B,aAA1B,EAAyCE,KAH1F;AAIRkB,YAAAA,iBAAiB,EAAE,KAAK1C,KAAL,CAAWsB,cAAX,CAA0B,aAA1B,KAA4C,KAAKtB,KAAL,CAAWsB,cAAX,CAA0B,aAA1B,EAAyCG;AAJhG,WADL;AAQPkB,UAAAA,QAAQ,EAAE,KAAK3C,KAAL,CAAWsB,cAAX,CAA0B,eAA1B;AARH,SADI;AAWfsB,QAAAA,UAAU,EAAE,KAAKvC,KAAL,CAAWJ,KAAX,CAAiB2C;AAXd,OAAnB;AAaA,WAAKvC,KAAL,CAAWZ,uBAAX,CAAmCoB,UAAnC,EAA+C,WAA/C;AACH,KA1bkB;;AAAA,SA6bnBgC,WA7bmB,GA6bL,CAACC,QAAD,EAAWC,OAAX,KAAuB;AACjC,UAAI,KAAK1C,KAAL,CAAWJ,KAAX,CAAiBmC,SAAjB,KAA+B,QAAnC,EAA6C;AACzC,aAAKY,iBAAL,CAAuBF,QAAvB,EAAiCC,OAAjC;AACH,OAFD,MAEO,IAAI,KAAK1C,KAAL,CAAWJ,KAAX,CAAiBmC,SAAjB,KAA+B,QAAnC,EAA6C;AAChD,aAAKa,iBAAL,CAAuBH,QAAvB,EAAiCC,OAAjC;AACH;AAEJ,KApckB;;AAAA,SAucnBC,iBAvcmB,GAucC,CAACF,QAAD,EAAWC,OAAX,KAAuB;AAEvC,UAAIzB,cAAc,GAAG,KAAKtB,KAAL,CAAWsB,cAAhC;;AACA,UAAIA,cAAc,KAAK4B,SAAvB,EAAkC;AAE9B,cAAMrC,UAAU,GAAG;AACfsC,UAAAA,SAAS,EAAE,KAAK9C,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BoC,SADtB;AAEfnC,UAAAA,QAAQ,EAAE,aAFK;AAGfC,UAAAA,SAAS,EAAE,aAHI;AAIfK,UAAAA,cAAc,EAAE,EAAC,GAAG,KAAKtB,KAAL,CAAWsB;AAAf,WAJD;AAKfR,UAAAA,SAAS,EAAE;AACPsC,YAAAA,QAAQ,EAAE,EACN,GAAG,KAAK/C,KAAL,CAAWJ,KAAX,CAAiBc,QADd;AAENsC,cAAAA,SAAS,EAAEtE,mBAAmB,CAAC,KAAKsB,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BsC,SAA3B,CAFxB;AAGNC,cAAAA,WAAW,EAAEvE,mBAAmB,CAAC,KAAKsB,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BuC,WAA3B;AAH1B,aADH;AAQPC,YAAAA,YAAY,EAAE,KAAKlD,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BoC,SARjC;AASPK,YAAAA,QAAQ,EAAE,KAAKxD,KAAL,CAAWsB,cAAX,CAA0BmC,SAA1B,CAAoChC,KATvC;AAUPiC,YAAAA,SAAS,EAAE,KAAK1D,KAAL,CAAWsB,cAAX,CAA0BmC,SAA1B,CAAoCjC,KAVxC;AAWPmC,YAAAA,eAAe,EAAE,KAAK3D,KAAL,CAAWsB,cAAX,CAA0BC,gBAA1B,CAA2CE,KAXrD;AAYPmC,YAAAA,gBAAgB,EAAE,KAAK5D,KAAL,CAAWsB,cAAX,CAA0BC,gBAA1B,CAA2CC,KAZtD;AAaPqC,YAAAA,WAAW,EAAE,KAAK7D,KAAL,CAAWsB,cAAX,CAA0BwC,YAA1B,CAAuCrC,KAb7C;AAcPsC,YAAAA,YAAY,EAAE,KAAK/D,KAAL,CAAWsB,cAAX,CAA0BwC,YAA1B,CAAuCtC,KAd9C;AAePwC,YAAAA,eAAe,EAAE,KAAKhE,KAAL,CAAWsB,cAAX,CAA0B2C,eAA1B,KAA8Cf,SAA9C,GAA0D,IAA1D,GAAiE,KAAKlD,KAAL,CAAWsB,cAAX,CAA0B2C,eAA1B,CAA0CzC,KAfrH;AAgBP0C,YAAAA,cAAc,EAAE,KAAKlE,KAAL,CAAWsB,cAAX,CAA0B2C,eAA1B,KAA8Cf,SAA9C,GAA0D,IAA1D,GAAiE,KAAKlD,KAAL,CAAWsB,cAAX,CAA0B2C,eAA1B,CAA0CxC,KAhBpH;AAiBP0C,YAAAA,SAAS,EAAE,KAAKnE,KAAL,CAAWsB,cAAX,CAA0B8C,YAA1B,CAAuC3C,KAjB3C;AAkBP4C,YAAAA,WAAW,EAAE,KAAKrE,KAAL,CAAWsB,cAAX,CAA0B8C,YAA1B,CAAuC5C,KAlB7C;AAmBP8C,YAAAA,SAAS,EAAE,KAAKtE,KAAL,CAAWsB,cAAX,CAA0BiD,SAA1B,CAAoC/C,KAnBxC;AAoBPgD,YAAAA,QAAQ,EAAE,KAAKxE,KAAL,CAAWsB,cAAX,CAA0BiD,SAA1B,CAAoC9C,KApBvC;AAqBPgD,YAAAA,SAAS,EAAE,KAAKzE,KAAL,CAAWsB,cAAX,CAA0BmD,SArB9B;AAsBPC,YAAAA,UAAU,EAAE,KAAK1E,KAAL,CAAWsB,cAAX,CAA0BoD,UAtB/B;AAuBPC,YAAAA,YAAY,EAAE,KAAK3E,KAAL,CAAWsB,cAAX,CAA0BqD,YAA1B,KAAyCzB,SAAzC,GAAmD,EAAnD,GAAsD,KAAKlD,KAAL,CAAWsB,cAAX,CAA0BqD,YAvBvF;AAwBP;AACAC,YAAAA,gBAAgB,EAAE,KAAK5E,KAAL,CAAWsB,cAAX,CAA0BuD,YAA1B,CAAuCrD,KAzBlD;AA0BPqD,YAAAA,YAAY,EAAE,KAAK7E,KAAL,CAAWsB,cAAX,CAA0BuD,YAA1B,CAAuCpD,KA1B9C;AA2BPW,YAAAA,SAAS,EAAE;AA3BJ,WALI;AAoCfA,UAAAA,SAAS,EAAE,QApCI;AAqCfU,UAAAA,QArCe;AAqCLC,UAAAA;AArCK,SAAnB;AAwCA,cAAM+B,UAAU,GAAG,KAAKzE,KAAL,CAAWJ,KAAX,CAAiB6E,UAApC;AAGA,aAAKzE,KAAL,CAAWb,UAAX,CAAsBqB,UAAtB,EAAkCiE,UAAlC,EAA8C,WAA9C;AACH;AAEJ,KA1fkB;;AAAA,SA4fnB7B,iBA5fmB,GA4fC,CAACH,QAAD,EAAWC,OAAX,KAAuB;AAGvC,YAAMlC,UAAU,GAAG;AACfsC,QAAAA,SAAS,EAAE,KAAK9C,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BoC,SADtB;AAEfnC,QAAAA,QAAQ,EAAE,aAFK;AAGfC,QAAAA,SAAS,EAAE,aAHI;AAIfK,QAAAA,cAAc,EAAE,EAAC,GAAG,KAAKtB,KAAL,CAAWsB;AAAf,SAJD;AAKfa,QAAAA,UAAU,EAAC,KAAKnC,KAAL,CAAWsB,cAAX,CAA0ByD,gBALtB;AAMfjE,QAAAA,SAAS,EAAE;AACPsC,UAAAA,QAAQ,EAAE,EACN,GAAG,KAAK/C,KAAL,CAAWJ,KAAX,CAAiBc,QADd;AAENsC,YAAAA,SAAS,EAAEtE,mBAAmB,CAAC,KAAKsB,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BsC,SAA3B,CAFxB;AAGNC,YAAAA,WAAW,EAAEvE,mBAAmB,CAAC,KAAKsB,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BuC,WAA3B;AAH1B,WADH;AAMP;AACAC,UAAAA,YAAY,EAAE,KAAKlD,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BoC,SAPjC;AAQP4B,UAAAA,gBAAgB,EAAE,KAAK/E,KAAL,CAAWsB,cAAX,CAA0ByD,gBARrC;AASPvB,UAAAA,QAAQ,EAAE,KAAKxD,KAAL,CAAWsB,cAAX,CAA0BmC,SAA1B,CAAoChC,KATvC;AAUPiC,UAAAA,SAAS,EAAE,KAAK1D,KAAL,CAAWsB,cAAX,CAA0BmC,SAA1B,CAAoCjC,KAVxC;AAWPmC,UAAAA,eAAe,EAAE,KAAK3D,KAAL,CAAWsB,cAAX,CAA0BC,gBAA1B,CAA2CE,KAXrD;AAYPmC,UAAAA,gBAAgB,EAAE,KAAK5D,KAAL,CAAWsB,cAAX,CAA0BC,gBAA1B,CAA2CC,KAZtD;AAaPqC,UAAAA,WAAW,EAAE,KAAK7D,KAAL,CAAWsB,cAAX,CAA0BwC,YAA1B,CAAuCrC,KAb7C;AAcPsC,UAAAA,YAAY,EAAE,KAAK/D,KAAL,CAAWsB,cAAX,CAA0BwC,YAA1B,CAAuCtC,KAd9C;AAePwC,UAAAA,eAAe,EAAE,KAAKhE,KAAL,CAAWsB,cAAX,CAA0B2C,eAA1B,CAA0CzC,KAA1C,KAAoD0B,SAApD,GAAgE,IAAhE,GAAuE,KAAKlD,KAAL,CAAWsB,cAAX,CAA0B2C,eAA1B,CAA0CzC,KAf3H;AAgBP0C,UAAAA,cAAc,EAAE,KAAKlE,KAAL,CAAWsB,cAAX,CAA0B2C,eAA1B,CAA0CxC,KAhBnD;AAiBP0C,UAAAA,SAAS,EAAE,KAAKnE,KAAL,CAAWsB,cAAX,CAA0B8C,YAA1B,CAAuC3C,KAjB3C;AAkBP4C,UAAAA,WAAW,EAAE,KAAKrE,KAAL,CAAWsB,cAAX,CAA0B8C,YAA1B,CAAuC5C,KAlB7C;AAmBP8C,UAAAA,SAAS,EAAE,KAAKtE,KAAL,CAAWsB,cAAX,CAA0BiD,SAA1B,CAAoC/C,KAnBxC;AAoBPgD,UAAAA,QAAQ,EAAE,KAAKxE,KAAL,CAAWsB,cAAX,CAA0BiD,SAA1B,CAAoC9C,KApBvC;AAqBPgD,UAAAA,SAAS,EAAE,KAAKzE,KAAL,CAAWsB,cAAX,CAA0BmD,SArB9B;AAsBPC,UAAAA,UAAU,EAAE,KAAK1E,KAAL,CAAWsB,cAAX,CAA0BoD,UAtB/B;AAuBPC,UAAAA,YAAY,EAAE,KAAK3E,KAAL,CAAWsB,cAAX,CAA0BqD,YAA1B,KAAyCzB,SAAzC,GAAmD,EAAnD,GAAsD,KAAKlD,KAAL,CAAWsB,cAAX,CAA0BqD,YAvBvF;AAwBP;AACAC,UAAAA,gBAAgB,EAAE,KAAK5E,KAAL,CAAWsB,cAAX,CAA0BuD,YAA1B,CAAuCrD,KAzBlD;AA0BPqD,UAAAA,YAAY,EAAE,KAAK7E,KAAL,CAAWsB,cAAX,CAA0BuD,YAA1B,CAAuCpD,KA1B9C;AA2BPW,UAAAA,SAAS,EAAE;AA3BJ,SANI;AAqCfA,QAAAA,SAAS,EAAE,QArCI;AAsCfU,QAAAA,QAtCe;AAsCLC,QAAAA;AAtCK,OAAnB;AAyCA,YAAM+B,UAAU,GAAG,KAAKzE,KAAL,CAAWJ,KAAX,CAAiB6E,UAApC;;AAEA,UAAIjG,SAAS,CAAC,KAAKwB,KAAL,CAAWJ,KAAX,CAAiB+E,qBAAlB,EAAyC,KAAK3E,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BoC,SAAnE,EAA8E,KAAK9C,KAAL,CAAWJ,KAAX,CAAiBsD,YAA/F,CAAb,EAA2H;AACvH,cAAMlB,UAAU,GAAG;AACfC,UAAAA,QAAQ,EAAE1D,cADK;AAEf8B,UAAAA,IAAI,EAAE;AACFsB,YAAAA,SAAS,EAAE,IADT;AACeY,YAAAA,UAAU,EAAE;AAAE/B,cAAAA,UAAF;AAAciE,cAAAA;AAAd,aAD3B;AACuDhC,YAAAA;AADvD;AAFS,SAAnB;AAMA,aAAKzC,KAAL,CAAWd,WAAX,CAAuB8C,UAAvB;AACH,OARD,MASK;AACD,aAAKhC,KAAL,CAAWb,UAAX,CAAsBqB,UAAtB,EAAkCiE,UAAlC,EAA8C,WAA9C;AACH;AACJ,KAtjBkB;;AAAA,SA0jBnBG,YA1jBmB,GA0jBHC,WAAD,IAAiB;AAC5B,YAAMrE,UAAU,GAAG;AACfG,QAAAA,QAAQ,EAAE,KAAKX,KAAL,CAAWJ,KAAX,CAAiBY,UAAjB,CAA4BG,QADvB;AAEfC,QAAAA,SAAS,EAAE,KAAKZ,KAAL,CAAWJ,KAAX,CAAiBY,UAAjB,CAA4BI,SAFxB;AAGfC,QAAAA,WAAW,EAAE,KAAKb,KAAL,CAAWJ,KAAX,CAAiBY,UAAjB,CAA4BK,WAH1B;AAIfJ,QAAAA,SAAS,EAAE;AACP,WAAC,KAAKT,KAAL,CAAWJ,KAAX,CAAiBY,UAAjB,CAA4BI,SAA5B,CAAsCkE,WAAtC,EAAD,GAAuDD,WAAW,CAAC5D,cAD5D;AAC2E;AAClF,sBAAY,KAAKjB,KAAL,CAAWJ,KAAX,CAAiBc;AAFtB,SAJI;AAQfqB,QAAAA,SAAS,EAAE8C,WAAW,CAAC9C,SARR;AASfzB,QAAAA,SAAS,EAAE,KAAKX,KAAL,CAAWW,SATP;AAUfW,QAAAA,cAAc,EAAE4D,WAAW,CAAC5D;AAVb,OAAnB;;AAaA,UAAIzC,SAAS,CAAC,KAAKwB,KAAL,CAAWJ,KAAX,CAAiB+E,qBAAlB,EAAyC,KAAK3E,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BoC,SAAnE,EAA8E+B,WAAW,CAAC3B,YAA1F,CAAb,EAAsH;AAClH,cAAMlB,UAAU,GAAG;AACfC,UAAAA,QAAQ,EAAE1D,cADK;AAEf8B,UAAAA,IAAI,EAAE;AACFsB,YAAAA,SAAS,EAAE,IADT;AACeY,YAAAA,UAAU,EAAE;AAAE/B,cAAAA,UAAF;AAAciE,cAAAA,UAAU,EAAE,KAAKzE,KAAL,CAAWJ,KAAX,CAAiB6E;AAA3C,aAD3B;AAEF7C,YAAAA,SAAS,EAAE,IAFT;AAEemD,YAAAA,UAAU,EAAE,KAAK/E,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B;AAAEC,cAAAA,EAAE,EAAE,KAAKlF,KAAL,CAAWJ,KAAX,CAAiBiB;AAAvB,aAA9B,CAF3B;AAGFkB,YAAAA,SAAS,EAAE8C,WAAW,CAAC9C;AAHrB;AAFS,SAAnB;AAQA,aAAK/B,KAAL,CAAWd,WAAX,CAAuB8C,UAAvB;AACH,OAVD,MAWK;AACD,aAAKhC,KAAL,CAAWb,UAAX,CAAsBqB,UAAtB,EAAkC,KAAKR,KAAL,CAAWJ,KAAX,CAAiB6E,UAAnD,EAA+D,WAA/D;AACH;AACJ,KAtlBkB;;AAEf,SAAK/B,OAAL,GAAevE,KAAK,CAACgH,SAAN,EAAf;AACA,SAAKC,mBAAL,GAA2B,EAA3B;AAEA,UAAM9E,SAAS,GAAG;AACd+E,MAAAA,IAAI,EAAE,CADQ;AAEdC,MAAAA,IAAI,EAAE,KAAKtF,KAAL,CAAWJ,KAAX,CAAiB2F,QAAjB,GAA4BC,QAAQ,CAAC,KAAKxF,KAAL,CAAWJ,KAAX,CAAiB2F,QAAjB,CAA0B,EAA1B,CAAD,CAApC,GAAsE;AAF9D,KAAlB;AAKA,SAAK5F,KAAL,GAAa;AACTU,MAAAA,IAAI,EAAE,EADG;AACCoF,MAAAA,YAAY,EAAE,EADf;AACmBC,MAAAA,KAAK,EAAE,EAD1B;AAC8BzE,MAAAA,cAAc,EAAE,EAD9C;AAETb,MAAAA,UAAU,EAAE,EAFH;AAGTE,MAAAA,SAAS,EAAEA,SAHF;AAITqE,MAAAA,qBAAqB,EAAE,EAJd;AAKTgB,MAAAA,UAAU,EAAE,IAAIC,GAAJ;AALH,KAAb;AAQH;;AAE8B,SAAxBC,wBAAwB,CAAC7F,KAAD,EAAQL,KAAR,EAAe;AAE1C,QAAIK,KAAK,CAACJ,KAAN,CAAY6F,YAAZ,KAA6B,EAA7B,IAAmCzF,KAAK,CAACJ,KAAN,CAAY6F,YAAZ,KAA6B9F,KAAK,CAAC8F,YAA1E,EAAwF;AACpFpG,MAAAA,KAAK,CAACyG,IAAN,CAAW9F,KAAK,CAACJ,KAAN,CAAY6F,YAAvB;AACAzF,MAAAA,KAAK,CAACJ,KAAN,CAAY6F,YAAZ,GAA2B,EAA3B;AACH;;AAED,QAAIzF,KAAK,CAACJ,KAAN,CAAY8F,KAAZ,KAAsB/F,KAAK,CAAC+F,KAAhC,EAAuC;AACnCrG,MAAAA,KAAK,CAACqG,KAAN,CAAY1F,KAAK,CAACJ,KAAN,CAAY8F,KAAxB;AACA1F,MAAAA,KAAK,CAACJ,KAAN,CAAY8F,KAAZ,GAAoB,EAApB;AACH;;AACD,WAAO,IAAP;AACH;;AA0BDK,EAAAA,MAAM,GAAG;AACL,QAAIC,eAAe,GAAG,EAAtB;;AAEA,QAAI,KAAKhG,KAAL,CAAWJ,KAAX,CAAiBY,UAAjB,KAAgCqC,SAApC,EAA+C;AAE3C,WAAKuC,mBAAL,GAA2B,CACvB;AAAE,qBAAa,IAAf;AAAqB,mBAAW,iBAAhC;AAAmD,qBAAa,kBAAhE;AAAoF,0BAAkB,YAAtG;AAAoH,uBAAe;AAAnI,OADuB,EAEvB;AAAE,qBAAa,IAAf;AAAqB,mBAAW,gBAAhC;AAAkD,qBAAa,cAA/D;AAA+E,0BAAkB,YAAjG;AAA+G,uBAAe;AAA9H,OAFuB,EAGvB;AAAE,qBAAa,IAAf;AAAqB,mBAAW,mCAAhC;AAAqE,qBAAa,WAAlF;AAA+F,0BAAkB,YAAjH;AAA+H,uBAAe,WAA9I;AAA2J,iBAAS;AAApK,OAHuB,EAIvB;AAAE,qBAAa,IAAf;AAAqB,mBAAW,iBAAhC;AAAmD,qBAAa,cAAhE;AAAgF,0BAAkB,YAAlG;AAAgH,uBAAe;AAA/H,OAJuB,EAKvB;AAAE,qBAAa,IAAf;AAAqB,mBAAW,qBAAhC;AAAuD,qBAAa,iBAApE;AAAuF,0BAAkB,YAAzG;AAAuH,uBAAe,WAAtI;AAAmJ,iBAAS;AAA5J,OALuB,EAMvB;AACA;AAAE,qBAAa,IAAf;AAAqB,mBAAW,iBAAhC;AAAmD,qBAAa,cAAhE;AAAgF,0BAAkB,YAAlG;AAAgH,uBAAe;AAA/H,OAPuB,EAQvB;AAAE,qBAAa,IAAf;AAAqB,mBAAW,eAAhC;AAAiD,qBAAa,YAA9D;AAA4E,0BAAkB,WAA9F;AAA2G,uBAAe;AAA1H,OARuB,EASvB;AAAE,qBAAa,IAAf;AAAqB,mBAAW,cAAhC;AAAgD,qBAAa,WAA7D;AAA0E,0BAAkB,WAA5F;AAAyG,uBAAe;AAAxH,OATuB,EAUvB;AAAE,qBAAa,IAAf;AAAqB,mBAAW,UAAhC;AAA4C,qBAAa,WAAzD;AAAsE,0BAAkB,YAAxF;AAAsG,uBAAe;AAArH,OAVuB,EAWvB;AAAE,qBAAa,IAAf;AAAqB,mBAAW,iBAAhC;AAAmD,qBAAa,cAAhE;AAAgF,0BAAkB,WAAlG;AAA+G,uBAAe;AAA9H,OAXuB,CAA3B;AAeAY,MAAAA,eAAe,GAAG,kBAAlB;AACH;;AACD,QAAIC,eAAe,GAAG,EAAtB;AACAA,IAAAA,eAAe,CAACC,IAAhB,CACI;AAAE,mBAAa,IAAf;AAAqB,iBAAW,iBAAhC;AAAmD,mBAAa,kBAAhE;AAAoF,wBAAkB,YAAtG;AAAoH,qBAAe;AAAnI,KADJ,EAEI;AAAE,mBAAa,IAAf;AAAqB,iBAAW,gBAAhC;AAAkD,mBAAa,cAA/D;AAA+E,wBAAkB,YAAjG;AAA+G,qBAAe;AAA9H,KAFJ,EAGI;AAAE,mBAAa,IAAf;AAAqB,iBAAW,mCAAhC;AAAqE,mBAAa,WAAlF;AAA+F,wBAAkB,YAAjH;AAA+H,qBAAe;AAA9I,KAHJ,EAII;AAAE,mBAAa,IAAf;AAAqB,iBAAW,iBAAhC;AAAmD,mBAAa,cAAhE;AAAgF,wBAAkB,YAAlG;AAAgH,qBAAe;AAA/H,KAJJ,EAKI;AAAE,mBAAa,IAAf;AAAqB,iBAAW,qBAAhC;AAAuD,mBAAa,iBAApE;AAAuF,wBAAkB,YAAzG;AAAuH,qBAAe;AAAtI,KALJ,EAMI;AAAE,mBAAa,IAAf;AAAqB,iBAAW,eAAhC;AAAiD,mBAAa,YAA9D;AAA4E,wBAAkB,WAA9F;AAA2G,qBAAe;AAA1H,KANJ,EAOI;AACA;AAAE,mBAAa,IAAf;AAAqB,iBAAW,cAAhC;AAAgD,mBAAa,WAA7D;AAA0E,wBAAkB,WAA5F;AAAyG,qBAAe;AAAxH,KARJ,EASI;AAAE,mBAAa,IAAf;AAAqB,iBAAW,UAAhC;AAA4C,mBAAa,WAAzD;AAAsE,wBAAkB,YAAxF;AAAsG,qBAAe;AAArH,KATJ,EAUI;AACA;AAAE,mBAAa,IAAf;AAAqB,iBAAW,iBAAhC;AAAmD,mBAAa,cAAhE;AAAgF,wBAAkB,YAAlG;AAAgH,qBAAe;AAA/H,KAXJ;AAgBA,UAAMC,gBAAgB,GAAG,KAAKxG,KAAL,CAAWgG,UAAX,CAAsBS,GAAtB,CAA0B,gBAA1B,KAA+C,KAAKzG,KAAL,CAAWgG,UAAX,CAAsBU,GAAtB,CAA0B,gBAA1B,EAA4CC,YAApH;AACA,UAAMC,iBAAiB,GAAG,KAAK5G,KAAL,CAAWgG,UAAX,CAAsBS,GAAtB,CAA0B,iBAA1B,KAAgD,KAAKzG,KAAL,CAAWgG,UAAX,CAAsBU,GAAtB,CAA0B,iBAA1B,EAA6CC,YAAvH;AACA,UAAME,mBAAmB,GAAG,KAAK7G,KAAL,CAAWgG,UAAX,CAAsBS,GAAtB,CAA0B,mBAA1B,KAAkD,KAAKzG,KAAL,CAAWgG,UAAX,CAAsBU,GAAtB,CAA0B,mBAA1B,EAA+CC,YAA7H;AAGA,UAAMG,SAAS,GAAG;AACd1B,MAAAA,UAAU,EAAE,KAAK/E,KAAL,CAAWJ,KAAX,CAAiBY,UAAjB,IAA+B,KAAKR,KAAL,CAAWJ,KAAX,CAAiBY,UAAjB,CAA4BK,WAA3D,IAA0E,KAAKb,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B;AAAEC,QAAAA,EAAE,EAAE,KAAKlF,KAAL,CAAWJ,KAAX,CAAiBY,UAAjB,CAA4BK;AAAlC,OAA9B,CADxE;AACwJmF,MAAAA,eAAe,EAAE,kBADzK;AAC6LjE,MAAAA,SAAS,EAAE,QADxM;AAEdvB,MAAAA,UAAU,EAAE,KAAKR,KAAL,CAAWJ,KAAX,CAAiBY,UAFf;AAE2BE,MAAAA,QAAQ,EAAE,KAAKV,KAAL,CAAWJ,KAAX,CAAiBc,QAFtD;AAGdwC,MAAAA,YAAY,EAAEqD;AAHA,KAAlB;AAMA,UAAM1B,WAAW,GAAG;AAAE9C,MAAAA,SAAS,EAAE,QAAb;AAAuByE,MAAAA,mBAAmB,EAAEA;AAA5C,KAApB;AAEA,wBAAQ,uDACJ,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,WAAD;AAAa,MAAA,SAAS,EAAC,qBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI,oBAAC,QAAD;AACI,MAAA,eAAe,EAAER,eADrB;AAEI,MAAA,UAAU,EAAE,KAAKhG,KAAL,CAAWJ,KAAX,CAAiBkC,UAFjC;AAGI,MAAA,IAAI,EAAE,KAAKnC,KAAL,CAAWU,IAHrB;AAII,MAAA,UAAU,EAAE,KAAKV,KAAL,CAAWS,UAJ3B;AAKI,MAAA,SAAS,EAAE,KAAKT,KAAL,CAAWW,SAL1B;AAMI,MAAA,eAAe,EAAE,KAAKL,eAN1B;AAOI,MAAA,mBAAmB,EAAE,KAAKmF,mBAP9B;AAQI,MAAA,UAAU,EAAE,KAAKzF,KAAL,CAAWgG,UAR3B;AASI,MAAA,qBAAqB,EAAE,KAAKhG,KAAL,CAAWgF,qBATtC;AAUI,MAAA,UAAU,EAAE,KAAK3E,KAAL,CAAWJ,KAAX,CAAiBY,UAVjC;AAWI,MAAA,QAAQ,EAAE,KAAKR,KAAL,CAAWJ,KAAX,CAAiBc,QAX/B;AAYI,MAAA,WAAW,EAAE,KAAKV,KAAL,CAAWP,wBAZ5B;AAaI,MAAA,SAAS,EAAE,MAAM,KAAKO,KAAL,CAAWV,cAAX,CAA0B6G,gBAA1B,EAA4C,KAAKnG,KAAL,CAAWJ,KAAX,CAAiBc,QAA7D,KAA0E,EAb/F;AAcI,MAAA,YAAY,EAAE,KAAKkE,YAdvB;AAeI,MAAA,UAAU,EAAE,KAAKrE,UAfrB;AAgBI,MAAA,SAAS,EAAEkG,SAhBf;AAiBI,MAAA,WAAW,EAAE5B,WAjBjB;AAkBI,MAAA,UAAU,EAAE,YAlBhB;AAmBI,MAAA,UAAU,EAAE,OAnBhB;AAoBI,MAAA,gBAAgB,EAAE,IApBtB;AAqBI,MAAA,iBAAiB,EAAE,IArBvB;AAsBI,MAAA,QAAQ,EAAE,IAtBd;AAuBI,MAAA,SAAS,EAAE,KAvBf,CAwBI;AAxBJ;AAyBI,MAAA,qBAAqB,EAAE,KAzB3B;AA0BI,MAAA,uBAAuB,EAAE,IA1B7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ,CADJ,CADI,EAuCH,KAAK7E,KAAL,CAAWJ,KAAX,CAAiBgC,SAAjB,iBACG,oBAAC,aAAD;AACI,MAAA,IAAI,EAAE,KAAK5B,KAAL,CAAWJ,KAAX,CAAiBgC,SAD3B;AAEI,MAAA,UAAU,EAAE,KAAKF,UAFrB;AAGI,MAAA,SAAS,EAAE,KAAK1B,KAAL,CAAWJ,KAAX,CAAiBmC,SAHhC;AAII,MAAA,UAAU,EAAE,KAAK/B,KAAL,CAAWJ,KAAX,CAAiBY,UAJjC;AAKI,MAAA,UAAU,EAAE,KAAKR,KAAL,CAAWJ,KAAX,CAAiBmF,UALjC;AAMI,MAAA,WAAW,EAAE,KAAKvC,WANtB;AAOI,MAAA,KAAK,EAAE,KAAKxC,KAAL,CAAWJ,KAAX,CAAiB+B,SAP5B;AAQI,MAAA,aAAa,EAAE,KAAKO,aARxB;AASI,MAAA,YAAY,EAAE,KAAKlC,KAAL,CAAWJ,KAAX,CAAiB6F,YATnC;AAUI,MAAA,cAAc,EAAE,KAAK9F,KAAL,CAAWsB,cAAX,IAA6B,EAVjD;AAWI,MAAA,WAAW,EAAE,KAAKjB,KAAL,CAAWd,WAX5B;AAYI,MAAA,eAAe,EAAE+G,eAZrB;AAaI,MAAA,YAAY,EAAE,KAAKjG,KAAL,CAAWJ,KAAX,CAAiB+B,SAAjB,gBACV,oBAAC,KAAD;AACI,QAAA,SAAS,EAAE,KAAK3B,KAAL,CAAWJ,KAAX,CAAiBmC,SADhC;AAEI,QAAA,eAAe,EAAE,KAAKV,eAF1B;AAGI,QAAA,UAAU,EAAE,KAAKrB,KAAL,CAAWJ,KAAX,CAAiBY,UAHjC;AAII,QAAA,cAAc,EAAE,KAAKb,KAAL,CAAWsB,cAAX,IAA6B,EAJjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADU,gBAOR,oBAAC,cAAD;AACE,QAAA,cAAc,EAAE,KAAKtB,KAAL,CAAWsB,cAAX,IAA6B,EAD/C;AAEE,QAAA,eAAe,EAAE,KAAKI,eAFxB;AAGE,QAAA,aAAa,EAAE,KAAKP,aAHtB;AAIE,QAAA,UAAU,EAAE,KAAKnB,KAAL,CAAW+G,UAJzB;AAKE,QAAA,UAAU,EAAE,KAAK/G,KAAL,CAAWgH,UALzB,CAKqC;AALrC;AAME,QAAA,eAAe,EAAE,KAAKhH,KAAL,CAAWiH,eAAX,IAA8B,EANjD;AAOE,QAAA,cAAc,EAAE,KAAKjH,KAAL,CAAWkH,cAAX,IAA6B,EAP/C;AAQE,QAAA,kBAAkB,EAAE,KAAKlH,KAAL,CAAWmH,kBAAX,IAAiC,EARvD;AASE,QAAA,kBAAkB,EAAE,KAAKnH,KAAL,CAAWoH,kBAAX,IAAiC,EATvD;AAUE,QAAA,aAAa,EAAE,KAAKpH,KAAL,CAAWqH,aAAX,IAA4B,EAV7C;AAWE,QAAA,QAAQ,EAAE,KAAKrH,KAAL,CAAWsH,QAAX,IAAuB,EAXnC;AAYE,QAAA,eAAe,EAAE,KAAKtH,KAAL,CAAWuH,eAAX,IAA8B,EAZjD,CAYqD;AAZrD;AAaE,QAAA,UAAU,EAAE,KAAKlH,KAAL,CAAWJ,KAAX,CAAiBY,UAb/B;AAcE,QAAA,UAAU,EAAE,KAAKb,KAAL,CAAWwH,UAdzB;AAeE,QAAA,SAAS,EAAE,KAAKnH,KAAL,CAAWJ,KAAX,CAAiBmC,SAf9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QApBV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxCA,CAAR;AAgFH;;AAGDqF,EAAAA,kBAAkB,CAACC,aAAD,EAAgB;AAE9B,QAAI,KAAKrH,KAAL,CAAWJ,KAAX,CAAiB6E,UAAjB,KAAgC4C,aAAa,CAACzH,KAAd,CAAoB6E,UAAxD,EAAoE;AAChE,UAAI,KAAKzE,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BoC,SAA1B,KAAwCuE,aAAa,CAACzH,KAAd,CAAoBc,QAApB,CAA6BoC,SAAzE,EAAoF;AAChF,cAAM6B,qBAAqB,GAAG,EAA9B;;AACA,YAAI,KAAK3E,KAAL,CAAWJ,KAAX,CAAiB+E,qBAArB,EAA4C;AACxC,eAAK3E,KAAL,CAAWJ,KAAX,CAAiB+E,qBAAjB,CAAuC,KAAK3E,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BoC,SAAjE,KAA+EwE,MAAM,CAAChG,MAAP,CAAc,KAAKtB,KAAL,CAAWJ,KAAX,CAAiB+E,qBAAjB,CAAuC,KAAK3E,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BoC,SAAjE,CAAd,EAA2FyE,GAA3F,CAA+FC,IAAI,IAC9K7C,qBAAqB,CAACuB,IAAtB,CAA2BsB,IAAI,CAAClB,YAAhC,CAD2E,CAA/E;AAEH;;AACD,cAAMX,UAAU,GAAGlH,aAAa,CAAC,KAAKuB,KAAL,CAAWJ,KAAX,CAAiB+E,qBAAlB,EAAyC,KAAK3E,KAAL,CAAWJ,KAAX,CAAiBc,QAAjB,CAA0BoC,SAAnE,CAAhC;AACA,aAAK3C,QAAL,CAAc;AACVwE,UAAAA,qBADU;AACagB,UAAAA,UADb;AACyBtF,UAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWJ,KAAX,CAAiB6E,UADhD;AAEVrE,UAAAA,UAAU,EAAElC,OAAO,CAAC,KAAK8B,KAAL,CAAWJ,KAAX,CAAiB6E,UAAlB,EAA8B,KAAK9E,KAAL,CAAWW,SAAzC;AAFT,SAAd;AAIH,OAXD,MAYK;AACD,YAAI;AAACA,UAAAA;AAAD,YAAY,KAAKX,KAArB;;AACA,YAAGW,SAAS,KAAGuC,SAAf,EAAyB;AACrBvC,UAAAA,SAAS,GAAC;AAAC+E,YAAAA,IAAI,EAAC,CAAN;AAAQC,YAAAA,IAAI,EAAC,KAAK3F,KAAL,CAAWW,SAAX,CAAqBgF;AAAlC,WAAV;AACH;;AACD,YAAG,KAAK3F,KAAL,CAAWS,UAAX,CAAsBC,IAAzB,EAA8B;AAC1B,cAAG,KAAKV,KAAL,CAAWS,UAAX,CAAsBC,IAAtB,CAA2BoH,MAA3B,GAAmC,CAAnC,IAAwC,KAAKzH,KAAL,CAAWJ,KAAX,CAAiBmC,SAAjB,KAA8B,QAAtE,IAAkF,KAAK/B,KAAL,CAAWJ,KAAX,CAAiBmC,SAAjB,KAA8B,QAAnH,EAA4H;AACzH,gBAAI2F,SAAS,GAAC,KAAK/H,KAAL,CAAWW,SAAX,CAAqB+E,IAArB,GAA0B,CAA1B,GAA6B,KAAKrF,KAAL,CAAWJ,KAAX,CAAiB6E,UAAjB,CAA4BgD,MAA5B,GAAmC,KAAK9H,KAAL,CAAWW,SAAX,CAAqBgF,IAArF,GACd,KAAK3F,KAAL,CAAWW,SAAX,CAAqB+E,IADrB;AAEC/E,YAAAA,SAAS,GAAC;AAAC+E,cAAAA,IAAI,EAACqC,SAAN;AAAgBpC,cAAAA,IAAI,EAAC,KAAK3F,KAAL,CAAWW,SAAX,CAAqBgF;AAA1C,aAAV;AACH;AACJ;;AAED,aAAKnF,QAAL,CAAc;AACVE,UAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWJ,KAAX,CAAiB6E,UADb;AAEVkD,UAAAA,MAAM,EAAE,KAFE;AAGV1G,UAAAA,cAAc,EAAE,KAAKjB,KAAL,CAAWJ,KAAX,CAAiBqB,cAHvB;AAIVb,UAAAA,UAAU,EAAElC,OAAO,CAAC,KAAK8B,KAAL,CAAWJ,KAAX,CAAiB6E,UAAlB,EAA8BnE,SAA9B,CAJT;AAKVA,UAAAA;AALU,SAAd;AAOH,OAjC+D,CAkChE;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEH,KA/CD,MA+CO,IAAI,KAAKN,KAAL,CAAWJ,KAAX,CAAiBqB,cAAjB,KAAoCoG,aAAa,CAACzH,KAAd,CAAoBqB,cAA5D,EAA4E;AAC/E,WAAKd,QAAL,CAAc;AAAEc,QAAAA,cAAc,EAAE,KAAKjB,KAAL,CAAWJ,KAAX,CAAiBqB;AAAnC,OAAd;AACH;;AAED,QAAI,KAAKjB,KAAL,CAAWJ,KAAX,CAAiBgH,eAAjB,KAAqCS,aAAa,CAACzH,KAAd,CAAoBgH,eAA7D,EAA8E;AAC1E,WAAKzG,QAAL,CAAc;AAAEyG,QAAAA,eAAe,EAAE,KAAK5G,KAAL,CAAWJ,KAAX,CAAiBgH;AAApC,OAAd;AACH;;AAED,QAAI,KAAK5G,KAAL,CAAWJ,KAAX,CAAiBiH,cAAjB,KAAoCQ,aAAa,CAACzH,KAAd,CAAoBiH,cAA5D,EAA4E;AACxE,WAAK1G,QAAL,CAAc;AAAE0G,QAAAA,cAAc,EAAE,KAAK7G,KAAL,CAAWJ,KAAX,CAAiBiH;AAAnC,OAAd;AACH;;AAED,QAAI,KAAK7G,KAAL,CAAWJ,KAAX,CAAiBmH,kBAAjB,KAAwCM,aAAa,CAACzH,KAAd,CAAoBmH,kBAAhE,EAAoF;AAEhF,UAAI9F,cAAc,GAAG,KAAKjB,KAAL,CAAWJ,KAAX,CAAiBqB,cAAtC;AACA,UAAIyF,UAAU,GAAG,KAAjB;;AACA,UAAI,KAAK1G,KAAL,CAAWJ,KAAX,CAAiBmH,kBAAjB,CAAoCU,MAApC,GAA6C,CAAjD,EAAoD;AAChDf,QAAAA,UAAU,GAAG,IAAb;;AACA,YAAI,KAAK1G,KAAL,CAAWJ,KAAX,CAAiBmC,SAAjB,KAA+B,QAAnC,EAA6C;AACzCd,UAAAA,cAAc,CAAC,iBAAD,CAAd,GAAoC,EAApC;AACH;AAEJ,OAND,MAMO;AACHA,QAAAA,cAAc,CAAC,iBAAD,CAAd,GAAoC;AAAEE,UAAAA,KAAK,EAAE,CAAC;AAAV,SAApC;AACAuF,QAAAA,UAAU,GAAG,KAAb,CAFG,CAEmB;AACzB;;AACD,WAAKvG,QAAL,CAAc;AAAE4G,QAAAA,kBAAkB,EAAE,KAAK/G,KAAL,CAAWJ,KAAX,CAAiBmH,kBAAvC;AAA2DL,QAAAA,UAAU,EAAEA,UAAvE;AAAmFzF,QAAAA,cAAc,EAAEA;AAAnG,OAAd;AACH,KA5E6B,CA8E9B;;;AACA,QAAI,KAAKjB,KAAL,CAAWJ,KAAX,CAAiBsH,eAAjB,KAAqCG,aAAa,CAACzH,KAAd,CAAoBsH,eAA7D,EAA8E;AAE1E,UAAIjG,cAAc,GAAG,KAAKjB,KAAL,CAAWJ,KAAX,CAAiBqB,cAAtC;AACA,UAAI0F,UAAU,GAAG,KAAjB;;AACA,UAAI,KAAK3G,KAAL,CAAWJ,KAAX,CAAiBsH,eAAjB,CAAiCO,MAAjC,GAA0C,CAA9C,EAAiD;AAC7Cd,QAAAA,UAAU,GAAG,IAAb;;AACA,YAAI,KAAK3G,KAAL,CAAWJ,KAAX,CAAiBmC,SAAjB,KAA+B,QAAnC,EAA6C;AACzCd,UAAAA,cAAc,CAAC,cAAD,CAAd,GAAiC,EAAjC;AACH;AAEJ,OAND,MAMO;AACHA,QAAAA,cAAc,CAAC,cAAD,CAAd,GAAiC;AAAEE,UAAAA,KAAK,EAAE,CAAC;AAAV,SAAjC;AACAwF,QAAAA,UAAU,GAAG,KAAb;AACH;;AACD,WAAKxG,QAAL,CAAc;AAAE+G,QAAAA,eAAe,EAAE,KAAKlH,KAAL,CAAWJ,KAAX,CAAiBsH,eAApC;AAAqDP,QAAAA,UAAU,EAAEA,UAAjE;AAA6E1F,QAAAA,cAAc,EAAEA;AAA7F,OAAd;AACH;;AAED,QAAI,KAAKjB,KAAL,CAAWJ,KAAX,CAAiBkH,kBAAjB,KAAwCO,aAAa,CAACzH,KAAd,CAAoBkH,kBAAhE,EAAoF;AAChF,WAAK3G,QAAL,CAAc;AAAE2G,QAAAA,kBAAkB,EAAE,KAAK9G,KAAL,CAAWJ,KAAX,CAAiBkH;AAAvC,OAAd;AACH;;AAED,QAAI,KAAK9G,KAAL,CAAWJ,KAAX,CAAiBoH,aAAjB,KAAmCK,aAAa,CAACzH,KAAd,CAAoBoH,aAA3D,EAA0E;AACtE,WAAK7G,QAAL,CAAc;AAAE6G,QAAAA,aAAa,EAAE,KAAKhH,KAAL,CAAWJ,KAAX,CAAiBoH;AAAlC,OAAd;AACH;;AAED,QAAI,KAAKhH,KAAL,CAAWJ,KAAX,CAAiBqH,QAAjB,KAA8BI,aAAa,CAACzH,KAAd,CAAoBqH,QAAtD,EAAgE;AAC5D,WAAK9G,QAAL,CAAc;AAAE8G,QAAAA,QAAQ,EAAE,KAAKjH,KAAL,CAAWJ,KAAX,CAAiBqH;AAA7B,OAAd;AACH,KA1G6B,CA4G9B;;;AACA,QAAI,KAAKjH,KAAL,CAAWJ,KAAX,CAAiBsH,eAAjB,KAAqCG,aAAa,CAACzH,KAAd,CAAoBsH,eAA7D,EAA8E;AAC1E,WAAK/G,QAAL,CAAc;AAAE+G,QAAAA,eAAe,EAAE,KAAKlH,KAAL,CAAWJ,KAAX,CAAiBsH;AAApC,OAAd;AACH;AAEJ;;AApTqC;;AA8lB1C,eAAe7I,OAAO,CAACqB,eAAD,EAAkB;AACpCR,EAAAA,WADoC;AACvBD,EAAAA,WADuB;AACVE,EAAAA,UADU;AACEC,EAAAA,uBADF;AAEpCE,EAAAA,cAFoC;AAEpBC,EAAAA,+BAFoB;AAEaC,EAAAA,OAFb;AAEsBC,EAAAA;AAFtB,CAAlB,CAAP,CAGZnB,UAAU,CAACuB,WAAD,CAHE,CAAf","sourcesContent":["import { process } from '@progress/kendo-data-query';\r\nimport React from 'react'\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, getControlMap, Lims_JSON_stringify} from\r\n    '../../components/CommonScript';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport Esign from '../audittrail/Esign';\r\nimport AddAliquotPlan from './AddAliquotPlan';\r\nimport { callService, updateStore, crudMaster, validateEsignCredential } from '../../actions';\r\nimport { toast } from 'react-toastify';\r\nimport { getprojectytpe, getSampleTypeandPatientCatgeroy, getUnit, getActiveAliquotPlanById } from '../../actions';\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass AliquotPlan extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.formRef = React.createRef();\r\n        this.extractedColumnList = [];\r\n\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n\r\n        this.state = {\r\n            data: [], masterStatus: \"\", error: \"\", selectedRecord: {},\r\n            dataResult: [],\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map()\r\n        };\r\n\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.data, event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n\r\n\r\n    reloadData = () => {\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            userInfo: this.props.Login.userInfo,\r\n            displayName: this.props.Login.displayName\r\n        };\r\n\r\n        this.props.callService(inputParam);\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        let primaryKeyField = \"\";\r\n\r\n        if (this.props.Login.inputParam !== undefined) {\r\n\r\n            this.extractedColumnList = [\r\n                { \"mandatory\": true, \"idsName\": \"IDS_PROJECTTYPE\", \"dataField\": \"sprojecttypename\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_SAMPLETYPE\", \"dataField\": \"sproductname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_COLLECTIONTUBETYPEPROCESSTYPE\", \"dataField\": \"stubename\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\", \"width\": 180 },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_VISITNUMBER\", \"dataField\": \"svisitnumber\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_PATIENTCATEGORY\", \"dataField\": \"spatientcatname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\", \"width\": 180 },\r\n                // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n                { \"mandatory\": true, \"idsName\": \"IDS_SAMPLEDONOR\", \"dataField\": \"ssampledonor\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_ALIQUOTNO\", \"dataField\": \"saliquotno\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_QUANTITY\", \"dataField\": \"squantity\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_UNIT\", \"dataField\": \"sunitname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"mandatory\": true, \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n\r\n            ]\r\n\r\n            primaryKeyField = \"naliquotplancode\";\r\n        }\r\n        let mandatoryFields = [];\r\n        mandatoryFields.push(\r\n            { \"mandatory\": true, \"idsName\": \"IDS_PROJECTTYPE\", \"dataField\": \"sprojecttypename\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_SAMPLETYPE\", \"dataField\": \"sproductname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_COLLECTIONTUBETYPEPROCESSTYPE\", \"dataField\": \"stubename\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_VISITNUMBER\", \"dataField\": \"svisitnumber\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_PATIENTCATEGORY\", \"dataField\": \"spatientcatname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_ALIQUOTNO\", \"dataField\": \"saliquotno\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n            //ALPD-4712--Vignesh R(21-08-2024)\r\n            { \"mandatory\": true, \"idsName\": \"IDS_QUANTITY\", \"dataField\": \"squantity\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n            { \"mandatory\": true, \"idsName\": \"IDS_UNIT\", \"dataField\": \"sunitname\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n            { \"mandatory\": true, \"idsName\": \"IDS_SAMPLEDONOR\", \"dataField\": \"ssampledonor\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n\r\n        )\r\n\r\n\r\n        const AddAliquotPlanId = this.state.controlMap.has(\"AddAliquotPlan\") && this.state.controlMap.get(\"AddAliquotPlan\").ncontrolcode;\r\n        const EditAliquotPlanId = this.state.controlMap.has(\"EditAliquotPlan\") && this.state.controlMap.get(\"EditAliquotPlan\").ncontrolcode;\r\n        const DeleteAliquotPlanId = this.state.controlMap.has(\"DeleteAliquotPlan\") && this.state.controlMap.get(\"DeleteAliquotPlan\").ncontrolcode;\r\n\r\n\r\n        const editParam = {\r\n            screenName: this.props.Login.inputParam && this.props.Login.inputParam.displayName && this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }), primaryKeyField: \"naliquotplancode\", operation: \"update\",\r\n            inputParam: this.props.Login.inputParam, userInfo: this.props.Login.userInfo,\r\n            ncontrolCode: EditAliquotPlanId\r\n        };\r\n\r\n        const deleteParam = { operation: \"delete\", DeleteAliquotPlanId: DeleteAliquotPlanId };\r\n\r\n        return (<>\r\n            <Row>\r\n                <Col>\r\n                    <ListWrapper className=\"client-list-content\">\r\n\r\n                        <DataGrid\r\n                            primaryKeyField={primaryKeyField}\r\n                            selectedId={this.props.Login.selectedId}\r\n                            data={this.state.data}\r\n                            dataResult={this.state.dataResult}\r\n                            dataState={this.state.dataState}\r\n                            dataStateChange={this.dataStateChange}\r\n                            extractedColumnList={this.extractedColumnList}\r\n                            controlMap={this.state.controlMap}\r\n                            userRoleControlRights={this.state.userRoleControlRights}\r\n                            inputParam={this.props.Login.inputParam}\r\n                            userInfo={this.props.Login.userInfo}\r\n                            fetchRecord={this.props.getActiveAliquotPlanById}\r\n                            addRecord={() => this.props.getprojectytpe(AddAliquotPlanId, this.props.Login.userInfo) || []}\r\n                            deleteRecord={this.deleteRecord}\r\n                            reloadData={this.reloadData}\r\n                            editParam={editParam}\r\n                            deleteParam={deleteParam}\r\n                            scrollable={\"scrollable\"}\r\n                            gridHeight={\"600px\"}\r\n                            isActionRequired={true}\r\n                            isToolBarRequired={true}\r\n                            pageable={true}\r\n                            groupable={false}\r\n                            //ATE234 Janakumar ALPD-5577 Sample Storage-->while download the pdf, screen getting freezed\r\n                            isDownloadPDFRequired={false}\r\n                            isDownloadExcelRequired={true}\r\n\r\n                        />\r\n\r\n                    </ListWrapper>\r\n                </Col>\r\n            </Row>\r\n\r\n            {this.props.Login.openModal &&\r\n                <SlideOutModal\r\n                    show={this.props.Login.openModal}\r\n                    closeModal={this.closeModal}\r\n                    operation={this.props.Login.operation}\r\n                    inputParam={this.props.Login.inputParam}\r\n                    screenName={this.props.Login.screenName}\r\n                    onSaveClick={this.onSaveClick}\r\n                    esign={this.props.Login.loadEsign}\r\n                    validateEsign={this.validateEsign}\r\n                    masterStatus={this.props.Login.masterStatus}\r\n                    selectedRecord={this.state.selectedRecord || {}}\r\n                    updateStore={this.props.updateStore}\r\n                    mandatoryFields={mandatoryFields}\r\n                    addComponent={this.props.Login.loadEsign ?\r\n                        <Esign\r\n                            operation={this.props.Login.operation}\r\n                            onInputOnChange={this.onInputOnChange}\r\n                            inputParam={this.props.Login.inputParam}\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                        />\r\n                        : <AddAliquotPlan\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                            onInputOnChange={this.onInputOnChange}\r\n                            onComboChange={this.onComboChange}\r\n                            renalCheck={this.state.renalCheck}\r\n                            donarCheck={this.state.donarCheck} // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n                            projecttypeList={this.state.projecttypeList || []}\r\n                            sampletypeList={this.state.sampletypeList || []}\r\n                            collectiontubeList={this.state.collectiontubeList || []}\r\n                            patientcatgoryList={this.state.patientcatgoryList || []}\r\n                            visitnameList={this.state.visitnameList || []}\r\n                            unitList={this.state.unitList || []}\r\n                            sampledonarList={this.state.sampledonarList || []} // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n                            inputParam={this.props.Login.inputParam}\r\n                            actionType={this.state.actionType}\r\n                            operation={this.props.Login.operation}\r\n                        />}\r\n                />\r\n            }\r\n        </>);\r\n    }\r\n\r\n\r\n    componentDidUpdate(previousProps) {\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({\r\n                    userRoleControlRights, controlMap, data: this.props.Login.masterData,\r\n                    dataResult: process(this.props.Login.masterData, this.state.dataState),\r\n                });\r\n            }\r\n            else {\r\n                let {dataState}=this.state;\r\n                if(dataState===undefined){\r\n                    dataState={skip:0,take:this.state.dataState.take}\r\n                }\r\n                if(this.state.dataResult.data){\r\n                    if(this.state.dataResult.data.length >0 && this.props.Login.operation !=='update' && this.props.Login.operation ==='create'){\r\n                       let skipcount=this.state.dataState.skip>0?(this.props.Login.masterData.length-this.state.dataState.take):\r\n                       this.state.dataState.skip\r\n                        dataState={skip:skipcount,take:this.state.dataState.take}\r\n                    }\r\n                } \r\n\r\n                this.setState({\r\n                    data: this.props.Login.masterData,\r\n                    isOpen: false,\r\n                    selectedRecord: this.props.Login.selectedRecord,\r\n                    dataResult: process(this.props.Login.masterData, dataState),\r\n                    dataState\r\n                });\r\n            }\r\n            // let { dataState } = this.state;\r\n            // if (this.props.Login.dataState === undefined) {\r\n            //     dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 }\r\n            // }\r\n\r\n            // this.setState({\r\n            //     data: this.props.Login.masterData,\r\n            //     isOpen: false,\r\n            //     selectedRecord: this.props.Login.selectedRecord,\r\n            //     dataResult: process(this.props.Login.masterData, dataState),\r\n            //     dataState\r\n            // });\r\n\r\n        } else if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n\r\n        if (this.props.Login.projecttypeList !== previousProps.Login.projecttypeList) {\r\n            this.setState({ projecttypeList: this.props.Login.projecttypeList });\r\n        }\r\n\r\n        if (this.props.Login.sampletypeList !== previousProps.Login.sampletypeList) {\r\n            this.setState({ sampletypeList: this.props.Login.sampletypeList });\r\n        }\r\n\r\n        if (this.props.Login.patientcatgoryList !== previousProps.Login.patientcatgoryList) {\r\n\r\n            let selectedRecord = this.props.Login.selectedRecord;\r\n            let renalCheck = false;\r\n            if (this.props.Login.patientcatgoryList.length > 0) {\r\n                renalCheck = true;\r\n                if (this.props.Login.operation !== 'update') {\r\n                    selectedRecord[\"spatientcatname\"] = [];\r\n                }\r\n\r\n            } else {\r\n                selectedRecord[\"spatientcatname\"] = { value: -1 };\r\n                renalCheck = false;   //, selectedRecord: selectedRecord\r\n            }\r\n            this.setState({ patientcatgoryList: this.props.Login.patientcatgoryList, renalCheck: renalCheck, selectedRecord: selectedRecord });\r\n        }\r\n\r\n        // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n        if (this.props.Login.sampledonarList !== previousProps.Login.sampledonarList) {\r\n\r\n            let selectedRecord = this.props.Login.selectedRecord;\r\n            let donarCheck = false;\r\n            if (this.props.Login.sampledonarList.length > 0) {\r\n                donarCheck = true;\r\n                if (this.props.Login.operation !== 'update') {\r\n                    selectedRecord[\"ssampledonor\"] = [];\r\n                }\r\n\r\n            } else {\r\n                selectedRecord[\"ssampledonor\"] = { value: -1 };\r\n                donarCheck = false; \r\n            }\r\n            this.setState({ sampledonarList: this.props.Login.sampledonarList, donarCheck: donarCheck, selectedRecord: selectedRecord });\r\n        }\r\n\r\n        if (this.props.Login.collectiontubeList !== previousProps.Login.collectiontubeList) {\r\n            this.setState({ collectiontubeList: this.props.Login.collectiontubeList });\r\n        }\r\n\r\n        if (this.props.Login.visitnameList !== previousProps.Login.visitnameList) {\r\n            this.setState({ visitnameList: this.props.Login.visitnameList });\r\n        }\r\n\r\n        if (this.props.Login.unitList !== previousProps.Login.unitList) {\r\n            this.setState({ unitList: this.props.Login.unitList });\r\n        }\r\n\r\n        // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n        if (this.props.Login.sampledonarList !== previousProps.Login.sampledonarList) {\r\n            this.setState({ sampledonarList: this.props.Login.sampledonarList });\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n\r\n\r\n        if (fieldName === \"sprojecttypename\") {\r\n            selectedRecord[fieldName] = comboData;\r\n\r\n            delete selectedRecord[\"sproductname\"];\r\n            delete selectedRecord[\"stubename\"];\r\n            delete selectedRecord[\"svisitnumber\"];\r\n            delete selectedRecord[\"spatientcatname\"];\r\n            delete selectedRecord[\"ssampledonor\"]; // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n            this.props.getSampleTypeandPatientCatgeroy(\r\n                this.state.selectedRecord.sprojecttypename.value,\r\n                this.state.selectedRecord.sprojecttypename.label,\r\n                this.props.Login.userInfo,\r\n            )\r\n        } else {\r\n            selectedRecord[fieldName] = comboData;\r\n            this.setState({ selectedRecord });\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onInputOnChange = (event, fieldName) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n        const values = event.target.value;  //.replace(/[^-^0-9]/g, '');\r\n\r\n        //let parsedvalues;\r\n\r\n        if (fieldName === \"saliquotno\") {\r\n\r\n            if (/^\\d+$/.test(values) && values !== \"\") {\r\n\r\n                //values = parseInt(values, 10);\r\n                selectedRecord[fieldName] = values;\r\n            } else {\r\n                selectedRecord[fieldName] = \"\";\r\n            }\r\n\r\n        } else if (fieldName === \"squantity\") {\r\n\r\n            if (/^\\d{0,3}(\\.\\d{0,2})?$/.test(values) && values !== \"\") {\r\n\r\n                selectedRecord[fieldName] = values;\r\n            } else {\r\n                selectedRecord[fieldName] = [];\r\n            }\r\n\r\n        } else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let controlButton = this.props.Login.controlButton;\r\n        let selectedId = this.props.Login.selectedId;\r\n        // let processtypeList;\r\n        // let projecttypeList;\r\n        // let sampletypeList;\r\n        // let collectiontubeList;\r\n        // let patientcatgoryList;\r\n        // let visitnameList;\r\n\r\n        if (this.props.Login.loadEsign) { //true\r\n            //ALPD-4713--Vignesh R(21-08-2024)\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                  selectedRecord['esignpassword'] = \"\"\r\n                  selectedRecord['esignreason'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n            controlButton = [];\r\n            // processtypeList = [];\r\n            // projecttypeList = [];\r\n            // sampletypeList = [];\r\n            // collectiontubeList = [];\r\n            // patientcatgoryList = [];\r\n            // visitnameList = [];\r\n\r\n        }\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                openModal, loadEsign, selectedRecord, selectedId, controlButton\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n        //ate234 janakumar ALPD-5065 Aliquot Plan-->While doing Edit ,the dropdown records are not Showing.\r\n        // this.setState({\r\n        //     selectedRecord: selectedRecord, processtypeList: processtypeList, projecttypeList: projecttypeList,\r\n        //     sampletypeList: sampletypeList, collectiontubeList: collectiontubeList, patientcatgoryList: patientcatgoryList, visitnameList: visitnameList\r\n        // });\r\n\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        if (this.props.Login.operation === \"create\") {\r\n            this.onSaveAliquotPlan(saveType, formRef);\r\n        } else if (this.props.Login.operation === \"update\") {\r\n            this.updateAliquotPlan(saveType, formRef);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onSaveAliquotPlan = (saveType, formRef) => {\r\n\r\n        let selectedRecord = this.state.selectedRecord;\r\n        if (selectedRecord !== undefined) {\r\n\r\n            const inputParam = {\r\n                nformcode: this.props.Login.userInfo.nformcode,\r\n                classUrl: \"aliquotplan\",\r\n                methodUrl: \"AliquotPlan\",\r\n                selectedRecord: {...this.state.selectedRecord},\r\n                inputData: {\r\n                    userinfo: {\r\n                        ...this.props.Login.userInfo,\r\n                        sformname: Lims_JSON_stringify(this.props.Login.userInfo.sformname),\r\n                        smodulename: Lims_JSON_stringify(this.props.Login.userInfo.smodulename),\r\n                    },\r\n\r\n\r\n                    ncontrolCode: this.props.Login.userInfo.nformcode,\r\n                    tubename: this.state.selectedRecord.stubename.label,\r\n                    tubevalue: this.state.selectedRecord.stubename.value,\r\n                    projecttypename: this.state.selectedRecord.sprojecttypename.label,\r\n                    projecttypevalue: this.state.selectedRecord.sprojecttypename.value,\r\n                    productname: this.state.selectedRecord.sproductname.label,\r\n                    productvalue: this.state.selectedRecord.sproductname.value,\r\n                    patientcatvalue: this.state.selectedRecord.spatientcatname === undefined ? '-1' : this.state.selectedRecord.spatientcatname.value,\r\n                    patientcatname: this.state.selectedRecord.spatientcatname === undefined ? 'NA' : this.state.selectedRecord.spatientcatname.label,\r\n                    visitname: this.state.selectedRecord.svisitnumber.label,\r\n                    visitnumber: this.state.selectedRecord.svisitnumber.value,\r\n                    unitvalue: this.state.selectedRecord.sunitname.value,\r\n                    unitname: this.state.selectedRecord.sunitname.label,\r\n                    squantity: this.state.selectedRecord.squantity,\r\n                    saliquotno: this.state.selectedRecord.saliquotno,\r\n                    sdescription: this.state.selectedRecord.sdescription===undefined?\"\":this.state.selectedRecord.sdescription,\r\n                    // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n                    nsampledonorcode: this.state.selectedRecord.ssampledonor.value,\r\n                    ssampledonor: this.state.selectedRecord.ssampledonor.label,\r\n                    operation: \"create\",\r\n\r\n\r\n                },\r\n                operation: \"create\",\r\n                saveType, formRef,\r\n            }\r\n\r\n            const masterData = this.props.Login.masterData;\r\n\r\n\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n\r\n    }\r\n\r\n    updateAliquotPlan = (saveType, formRef) => {\r\n\r\n\r\n        const inputParam = {\r\n            nformcode: this.props.Login.userInfo.nformcode,\r\n            classUrl: \"aliquotplan\",\r\n            methodUrl: \"AliquotPlan\",\r\n            selectedRecord: {...this.state.selectedRecord},\r\n            selectedId:this.state.selectedRecord.naliquotplancode,\r\n            inputData: {\r\n                userinfo: {\r\n                    ...this.props.Login.userInfo,\r\n                    sformname: Lims_JSON_stringify(this.props.Login.userInfo.sformname),\r\n                    smodulename: Lims_JSON_stringify(this.props.Login.userInfo.smodulename),\r\n                },\r\n                //indexof:\r\n                ncontrolCode: this.props.Login.userInfo.nformcode,\r\n                naliquotplancode: this.state.selectedRecord.naliquotplancode,\r\n                tubename: this.state.selectedRecord.stubename.label,\r\n                tubevalue: this.state.selectedRecord.stubename.value,\r\n                projecttypename: this.state.selectedRecord.sprojecttypename.label,\r\n                projecttypevalue: this.state.selectedRecord.sprojecttypename.value,\r\n                productname: this.state.selectedRecord.sproductname.label,\r\n                productvalue: this.state.selectedRecord.sproductname.value,\r\n                patientcatvalue: this.state.selectedRecord.spatientcatname.value === undefined ? '-1' : this.state.selectedRecord.spatientcatname.value,\r\n                patientcatname: this.state.selectedRecord.spatientcatname.label,\r\n                visitname: this.state.selectedRecord.svisitnumber.label,\r\n                visitnumber: this.state.selectedRecord.svisitnumber.value,\r\n                unitvalue: this.state.selectedRecord.sunitname.value,\r\n                unitname: this.state.selectedRecord.sunitname.label,\r\n                squantity: this.state.selectedRecord.squantity,\r\n                saliquotno: this.state.selectedRecord.saliquotno,\r\n                sdescription: this.state.selectedRecord.sdescription===undefined?\"\":this.state.selectedRecord.sdescription,\r\n                // ALPD-5513 - added by Gowtham R on 10/3/25 - added sample donor field from sampledonor table\r\n                nsampledonorcode: this.state.selectedRecord.ssampledonor.value,\r\n                ssampledonor: this.state.selectedRecord.ssampledonor.label,\r\n                operation: \"update\",\r\n\r\n\r\n            },\r\n            operation: \"update\",\r\n            saveType, formRef,\r\n        }\r\n\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n    deleteRecord = (deleteParam) => {\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: {\r\n                [this.props.Login.inputParam.methodUrl.toLowerCase()]: deleteParam.selectedRecord,//.dataItem,\r\n                \"userinfo\": this.props.Login.userInfo\r\n            },\r\n            operation: deleteParam.operation,\r\n            dataState: this.state.dataState,\r\n            selectedRecord: deleteParam.selectedRecord\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.displayName }),\r\n                    operation: deleteParam.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\nexport default connect(mapStateToProps, {\r\n    updateStore, callService, crudMaster, validateEsignCredential,\r\n    getprojectytpe, getSampleTypeandPatientCatgeroy, getUnit, getActiveAliquotPlanById\r\n})(injectIntl(AliquotPlan));\r\n"]},"metadata":{},"sourceType":"module"}