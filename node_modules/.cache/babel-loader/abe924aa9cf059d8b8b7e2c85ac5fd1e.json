{"ast":null,"code":"import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{FormattedMessage,injectIntl}from'react-intl';import{Navbar,Nav,Dropdown,Image,Media,NavLink,NavDropdown,NavItem,Badge}from'react-bootstrap';import{toast}from'react-toastify';import{getChangeUserRole,submitChangeRole,getPassWordPolicy,updateStore,changepassword,changeOwner,logOutAuditAction,getListAlert}from'../../actions';import rsapi from'../../rsapi';import{AtHeader,NavPrimaryHeader,ProfileImage,DashboardIcon}from'../header/header.styles';import'../../assets/styles/login.css';import SlideOutModal from'../slide-out-modal/SlideOutModal';import ChangePassWord from'../../pages/Login/ChangePassWord';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{changePasswordValidation,fnPassMessage}from'../../pages/Login/LoginCommonFunction';import{LOGINTYPE}from'../Enumeration';import PortalModal from'../../PortalModal';import SliderPage from'../slider-page/slider-page-component';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faChartPie,faKey,faPowerOff,faUserCog,faUsersCog}from'@fortawesome/free-solid-svg-icons';import{createImageFromInitials}from'./headerutils';// import { Tooltip } from '@progress/kendo-react-tooltip';\nimport{getSelectedAlert}from'../../actions/AlertViewAction';import{faBell}from'@fortawesome/free-regular-svg-icons';import'../../pages/dashboardtypes/Alert.css';// import ReactTooltip from 'react-tooltip';\nvar mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Header=/*#__PURE__*/function(_React$Component){_inherits(Header,_React$Component);var _super=_createSuper(Header);function Header(props){var _this;_classCallCheck(this,Header);_this=_super.call(this,props);_this.openAlert=function(){_this.setState({showDashboard:!_this.state.showDashboard,nflag:2});};_this.openQuickSetting=function(){_this.setState({quickSettingOpen:!_this.state.quickSettingOpen});};_this.openDashBoard=function(){_this.setState({showDashboard:!_this.state.showDashboard,nflag:1});};_this.submitChangeOwner=function(item,role){var parameterInfo={typeName:DEFAULT_RETURN,data:{menuDesign:[],navigation:\"\"}};_this.props.updateStore(parameterInfo);var inputData={nuserrolecode:item.nuserrolecode,suserrolename:item.suserrolename,nusercode:item.nusercode,sdeputyid:item.sdeputyid,userinfo:_this.props.Login.userInfo};_this.props.changeOwner(inputData);};_this.onChangePassword=function(){var createPwdRecord=_this.state.createPwdRecord;var returnMsg=changePasswordValidation(createPwdRecord,_this.props.Login.passwordPolicy,_this.props.Login.userInfo.sloginid);if(returnMsg===0){var inputParam={spassword:createPwdRecord.snewpassword.trim(),sOldPassword:createPwdRecord.soldpassword.trim(),nusersitecode:_this.props.Login.userInfo.nusersitecode,isPasswordExpiry:false,userInfo:_this.props.Login.userInfo};_this.props.changepassword(inputParam);}else{toast.info(returnMsg);}};_this.closeModal=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{openCPModal:false}};_this.props.updateStore(updateInfo);};_this.submitChangeRole=function(roleItem){var parameterInfo={typeName:DEFAULT_RETURN,data:{menuDesign:[],navigation:\"\"}};_this.props.updateStore(parameterInfo);var userInfo=_this.props.Login.userInfo;var inputParam={nusermultisitecode:userInfo.nusersitecode,slanguagetypecode:userInfo.slanguagetypecode,nusermultirolecode:roleItem.nusermultirolecode,nuserrolecode:roleItem.nuserrolecode,nmastersitecode:userInfo.nmastersitecode,nlogintypecode:userInfo.nlogintypecode,userinfo:userInfo};_this.props.submitChangeRole(inputParam);};_this.state={show:false,createPwdRecord:{},alert:[],sliderOpen:false,nflag:2,quickSettingOpen:false.valueOf,showDashboard:false};return _this;}_createClass(Header,[{key:\"onChangeRole\",value:function onChangeRole(){var _this2=this;rsapi.post(\"/login/getchangerole\",{\"userInfo\":this.props.Login.userInfo}).then(function(response){var responseData=response.data;_this2.setState({show:true,UserMultiRole:responseData.UserMultiRole,nusermultirolecode:{label:responseData.UserMultiRole[0].suserrolename,value:responseData.UserMultiRole[0].nusermultirolecode,item:responseData.UserMultiRole[0]}});}).catch(function(error){if(error.status===205){toast.warn(error.message);}else{toast.error(error.message);}});}},{key:\"onLogout\",value:function onLogout(){var inputData={userinfo:this.props.Login.userInfo,scomments:this.props.intl.formatMessage({id:\"IDS_LOGOUT\"}),sauditaction:\"IDS_LOGOUT\"};this.props.logOutAuditAction(inputData,this.props.Login.languageList);}},{key:\"render\",value:function render(){var _this3=this;var _this$props$Login$use=this.props.Login.userInfo,susername=_this$props$Login$use.susername,suserrolename=_this$props$Login$use.suserrolename,nuserrole=_this$props$Login$use.nuserrole,nlogintypecode=_this$props$Login$use.nlogintypecode;var _this$props$Login=this.props.Login,deputyUser=_this$props$Login.deputyUser,userMultiRole=_this$props$Login.userMultiRole,isDeputyLogin=_this$props$Login.isDeputyLogin,userImagePath=_this$props$Login.userImagePath,settings=_this$props$Login.settings,profileColor=_this$props$Login.profileColor;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(AtHeader,null,/*#__PURE__*/React.createElement(Navbar,{className:\"p-0\",bg:\"light\",fixed:\"top\"},/*#__PURE__*/React.createElement(Navbar.Brand,null,/*#__PURE__*/React.createElement(NavPrimaryHeader,{className:\"at-nav-brand\"},this.props.Login&&this.props.Login.displayName?/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.Login.displayName}):\"\")),/*#__PURE__*/React.createElement(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),/*#__PURE__*/React.createElement(Navbar.Collapse,{id:\"basic-navbar-nav\",className:\"d-flex align-items-center justify-content-end\"},/*#__PURE__*/React.createElement(Nav,null,/*#__PURE__*/React.createElement(DashboardIcon,null,/*#__PURE__*/React.createElement(\"div\",{className:\"fa_stack fa-2x the-wrapper\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_ALERTS\"})// data-for=\"tooltip-grid-wrap\"\n,onClick:this.openAlert},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faBell,style:{'font-size':'26px'}}),/*#__PURE__*/React.createElement(\"div\",{className:\"icon icon_Badge\",style:{\"width\":this.state.alert&&this.state.alert.length>9?\"52%\":\"46%\"}},this.state.alert&&this.state.alert.length>0?/*#__PURE__*/React.createElement(Badge,{pill:true,variant:\"danger\"},this.state.alert&&this.state.alert.length):\"\"))),/*#__PURE__*/React.createElement(DashboardIcon,null,/*#__PURE__*/React.createElement(Nav.Link,{\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DASHBOARD\"})// data-for=\"tooltip-grid-wrap\" \n,onClick:this.openDashBoard},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faChartPie,\"data-tip\":\"Dashboard\"}))),/*#__PURE__*/React.createElement(NavDropdown,{className:\"no-arrow\",alignRight:true,title:/*#__PURE__*/React.createElement(Media,null,/*#__PURE__*/React.createElement(ProfileImage,{className:\"zoom\"},settings&&settings[5]&&userImagePath&&userImagePath!==\"\"?/*#__PURE__*/React.createElement(Image,{src:settings[5]+userImagePath,alt:\"avatar\",className:\"rounded-circle mr-2\",width:\"36\",height:\"36\"}):/*#__PURE__*/React.createElement(Image,{className:\"rounded-circle mr-2\",src:createImageFromInitials(32,susername?susername.charAt(0).toUpperCase():\"\",profileColor)})),/*#__PURE__*/React.createElement(Media.Body,{bsPrefix:\"media-profileinfo\"},/*#__PURE__*/React.createElement(\"span\",{className:\"user-name user-role\",\"data-tip\":susername,\"data-place\":\"bottom\"},susername),/*#__PURE__*/React.createElement(\"span\",{className:\"role user-role\",\"data-tip\":suserrolename,\"data-place\":\"bottom\"},suserrolename)))},userMultiRole&&userMultiRole.length>0&&/*#__PURE__*/React.createElement(Dropdown,{as:NavItem,drop:\"left\",className:\"ml-2 \"},/*#__PURE__*/React.createElement(Dropdown.Toggle,{as:NavLink},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faUserCog,className:\"mr-2\"}),/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_CHANGEROLE\",defaultMessage:\"Change Role\"})),/*#__PURE__*/React.createElement(Dropdown.Menu,null,userMultiRole.map(function(item,index){return/*#__PURE__*/React.createElement(Dropdown.Item,{key:\"roleindex_\".concat(index),onClick:function onClick(){return _this3.submitChangeRole(item);}},item.suserrolename);}))),!isDeputyLogin&&deputyUser&&deputyUser.length>0&&/*#__PURE__*/React.createElement(Dropdown,{as:NavItem,drop:\"left\",className:\"ml-2\"},/*#__PURE__*/React.createElement(Dropdown.Toggle,{as:NavLink},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faUsersCog,className:\"mr-2\"}),/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_CHANGEOWNER\",defaultMessage:\"Change Owner\"})),/*#__PURE__*/React.createElement(Dropdown.Menu,null,this.props.Login.deputyUser.map(function(item,index){return item.lstUserMultiDeputy&&item.lstUserMultiDeputy.length>1?/*#__PURE__*/React.createElement(Dropdown,{as:NavItem,drop:\"left\",className:\"ml-2\"},/*#__PURE__*/React.createElement(Dropdown.Toggle,{as:NavLink},\"\".concat(item.sdeputyname,\"[\").concat(item.sdeputyid,\"]-\").concat(item.suserrolename)),/*#__PURE__*/React.createElement(Dropdown.Menu,null,item.lstUserMultiDeputy.map(function(role,index){return/*#__PURE__*/React.createElement(Dropdown.Item,{key:\"roleIndex_\".concat(index),onClick:function onClick(){return _this3.submitChangeOwner(item,role);}},role.suserrolename);}))):/*#__PURE__*/React.createElement(Dropdown.Item,{key:\"deptuserindex_\".concat(index),onClick:function onClick(){return _this3.submitChangeOwner(item,item.lstUserMultiDeputy[0]);}},item.sdeputyname+\"[\"+item.sdeputyid+\"]\"+\"-\"+item.suserrolename);}))),nlogintypecode&&nlogintypecode===LOGINTYPE.INTERNAL&&!isDeputyLogin&&/*#__PURE__*/React.createElement(NavDropdown.Item,{onClick:function onClick(){return _this3.props.getPassWordPolicy(nuserrole);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faKey,className:\"mr-2\"}),/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_CHANGEPASSWORD\",defaultMessage:\"Change Password\"})),/*#__PURE__*/React.createElement(NavDropdown.Item,{onClick:function onClick(){return _this3.onLogout();}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPowerOff,className:\"mr-2\"}),/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_LOGOUT\",defaultMessage:\"Log Out\"}))))))),/*#__PURE__*/React.createElement(PortalModal,null,/*#__PURE__*/React.createElement(SliderPage,{show:this.state.showDashboard,nflag:this.state.nflag,closeModal:this.openDashBoard})),this.props.Login.openCPModal&&this.props.Login.screenName===\"IDS_CHANGEPASSWORD\"&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openCPModal,closeModal:this.closeModal,loginoperation:true,inputParam:{},screenName:this.props.Login.screenName,onSaveClick:this.onChangePassword,selectedRecord:this.state.createPwdRecord||{},mandatoryFields:this.mandatoryFieldFunction(),addComponent:/*#__PURE__*/React.createElement(ChangePassWord,{sloginid:this.props.Login.userInfo.sloginid,createPwdRecord:this.state.createPwdRecord,msg:fnPassMessage(this.props.Login.passwordPolicy),onInputChange:function onInputChange(event){return _this3.onInputChange(event);}})}));}},{key:\"onInputChange\",value:function onInputChange(event){var createPwdRecord=this.state.createPwdRecord||{};createPwdRecord[event.target.name]=event.target.value;this.setState({createPwdRecord:createPwdRecord});}},{key:\"mandatoryFieldFunction\",value:function mandatoryFieldFunction(){var mandatoryField=[{\"idsName\":\"IDS_OLDPASSWORD\",\"dataField\":\"soldpassword\",\"mandatory\":false},{\"idsName\":\"IDS_NEWPASSWORD\",\"dataField\":\"snewpassword\",\"mandatory\":false},{\"idsName\":\"IDS_CONFIRMPASSWORD\",\"dataField\":\"sconfirmpassword\",\"mandatory\":true}];return mandatoryField;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){//   if (this.props.Login.isDeputyLogin === true) {\n//   if (this.props.Login.navigation === \"home\") {\n//      this.props.history.push('/');\n//  }\n// }\nif(this.props.Login.createPwdRecord!==prevProps.Login.createPwdRecord){this.setState({createPwdRecord:this.props.Login.createPwdRecord});}if(this.props.Login.alert!==prevProps.Login.alert){this.setState({alert:this.props.Login.alert});}}// componentWillUnmount() {\n//   clearInterval(this.interval);\n// }\n}]);return Header;}(React.Component);export default connect(mapStateToProps,{getChangeUserRole:getChangeUserRole,submitChangeRole:submitChangeRole,getPassWordPolicy:getPassWordPolicy,updateStore:updateStore,changepassword:changepassword,changeOwner:changeOwner,logOutAuditAction:logOutAuditAction,getSelectedAlert:getSelectedAlert,getListAlert:getListAlert})(injectIntl(Header));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/components/header/header.component.jsx"],"names":["React","connect","FormattedMessage","injectIntl","Navbar","Nav","Dropdown","Image","Media","NavLink","NavDropdown","NavItem","Badge","toast","getChangeUserRole","submitChangeRole","getPassWordPolicy","updateStore","changepassword","changeOwner","logOutAuditAction","getListAlert","rsapi","AtHeader","NavPrimaryHeader","ProfileImage","DashboardIcon","SlideOutModal","ChangePassWord","DEFAULT_RETURN","changePasswordValidation","fnPassMessage","LOGINTYPE","PortalModal","SliderPage","FontAwesomeIcon","faChartPie","faKey","faPowerOff","faUserCog","faUsersCog","createImageFromInitials","getSelectedAlert","faBell","mapStateToProps","state","Login","Header","props","openAlert","setState","showDashboard","nflag","openQuickSetting","quickSettingOpen","openDashBoard","submitChangeOwner","item","role","parameterInfo","typeName","data","menuDesign","navigation","inputData","nuserrolecode","suserrolename","nusercode","sdeputyid","userinfo","userInfo","onChangePassword","createPwdRecord","returnMsg","passwordPolicy","sloginid","inputParam","spassword","snewpassword","trim","sOldPassword","soldpassword","nusersitecode","isPasswordExpiry","info","closeModal","updateInfo","openCPModal","roleItem","nusermultisitecode","slanguagetypecode","nusermultirolecode","nmastersitecode","nlogintypecode","show","alert","sliderOpen","valueOf","post","then","response","responseData","UserMultiRole","label","value","catch","error","status","warn","message","scomments","intl","formatMessage","id","sauditaction","languageList","susername","nuserrole","deputyUser","userMultiRole","isDeputyLogin","userImagePath","settings","profileColor","displayName","length","charAt","toUpperCase","map","index","lstUserMultiDeputy","sdeputyname","INTERNAL","onLogout","screenName","mandatoryFieldFunction","event","onInputChange","target","name","mandatoryField","prevProps","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Navbar, Nav, Dropdown, Image, Media, NavLink, NavDropdown, NavItem, Badge } from 'react-bootstrap';\r\nimport { toast } from 'react-toastify';\r\nimport { getChangeUserRole, submitChangeRole, getPassWordPolicy, updateStore, changepassword, changeOwner, logOutAuditAction, getListAlert } from '../../actions'\r\nimport rsapi from '../../rsapi';\r\nimport { AtHeader, NavPrimaryHeader, ProfileImage, DashboardIcon } from '../header/header.styles';\r\nimport '../../assets/styles/login.css';\r\n\r\nimport SlideOutModal from '../slide-out-modal/SlideOutModal';\r\nimport ChangePassWord from '../../pages/Login/ChangePassWord';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { changePasswordValidation, fnPassMessage } from '../../pages/Login/LoginCommonFunction';\r\nimport { LOGINTYPE } from '../Enumeration';\r\nimport PortalModal from '../../PortalModal';\r\nimport SliderPage from '../slider-page/slider-page-component';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faChartPie,faKey,faPowerOff,faUserCog, faUsersCog } from '@fortawesome/free-solid-svg-icons';\r\nimport { createImageFromInitials } from './headerutils';\r\n// import { Tooltip } from '@progress/kendo-react-tooltip';\r\nimport { getSelectedAlert } from '../../actions/AlertViewAction';\r\nimport { faBell } from '@fortawesome/free-regular-svg-icons';\r\nimport '../../pages/dashboardtypes/Alert.css'\r\n// import ReactTooltip from 'react-tooltip';\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    Login: state.Login\r\n  }\r\n}\r\n\r\nclass Header extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      show: false,\r\n      createPwdRecord: {},\r\n      alert: [],\r\n      sliderOpen: false,\r\n      nflag: 2,\r\n      quickSettingOpen: false.valueOf,\r\n      showDashboard: false\r\n    }\r\n  }\r\n\r\n\r\n  onChangeRole() {\r\n    rsapi.post(\"/login/getchangerole\", { \"userInfo\": this.props.Login.userInfo })\r\n      .then(response => {\r\n        const responseData = response.data;\r\n        this.setState({\r\n          show: true,\r\n          UserMultiRole: responseData.UserMultiRole,\r\n          nusermultirolecode: {\r\n            label: responseData.UserMultiRole[0].suserrolename, value: responseData.UserMultiRole[0].nusermultirolecode,\r\n            item: responseData.UserMultiRole[0]\r\n          }\r\n        });\r\n      })\r\n      .catch(error => {\r\n        if (error.status === 205) {\r\n          toast.warn(error.message)\r\n        } else {\r\n          toast.error(error.message)\r\n        }\r\n      });\r\n  }\r\n\r\n  onLogout() {\r\n    const inputData = {\r\n      userinfo: this.props.Login.userInfo,\r\n      scomments: this.props.intl.formatMessage({ id: \"IDS_LOGOUT\" }),\r\n      sauditaction: \"IDS_LOGOUT\"\r\n    };\r\n    this.props.logOutAuditAction(inputData,this.props.Login.languageList);\r\n  }\r\n\r\n  openAlert = () => {\r\n    this.setState({ showDashboard: !this.state.showDashboard, nflag: 2 });\r\n  }\r\n\r\n  openQuickSetting = () => {\r\n    this.setState({ quickSettingOpen: !this.state.quickSettingOpen })\r\n  }\r\n\r\n  openDashBoard = () => {\r\n    this.setState({ showDashboard: !this.state.showDashboard, nflag: 1 })\r\n  }\r\n\r\n  render() {\r\n    const { susername, suserrolename, nuserrole, nlogintypecode } = this.props.Login.userInfo;\r\n    const { deputyUser, userMultiRole, isDeputyLogin, userImagePath, settings, profileColor } = this.props.Login;\r\n  \r\n    return (\r\n      <>\r\n        {/* <ReactTooltip place=\"bottom\" id=\"tooltip-grid-wrap\" globalEventOff='click' /> */}\r\n        <AtHeader>\r\n          <Navbar className=\"p-0\" bg=\"light\" fixed=\"top\">\r\n            <Navbar.Brand>\r\n              <NavPrimaryHeader className=\"at-nav-brand\">\r\n                {this.props.Login && this.props.Login.displayName ?\r\n                  <FormattedMessage id={this.props.Login.displayName} /> : \"\"}\r\n              </NavPrimaryHeader>\r\n            </Navbar.Brand>\r\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n            <Navbar.Collapse id=\"basic-navbar-nav\" className=\"d-flex align-items-center justify-content-end\">\r\n            {/* <ReactTooltip/> */}\r\n           \r\n              {/* <Nav>\r\n                <Nav.Item onClick={this.openDashBoard}>\r\n                  <Image src={DashBoard} alt=\"DashBoard\" width=\"34\" height=\"34\" />\r\n                </Nav.Item>\r\n              </Nav> */}\r\n              <Nav>\r\n                {/* <ListView\r\n              data={alert}\r\n              openslide={this.openDashBoard}\r\n              getSelectedAlert={getSelectedAlert}\r\n              userInfo={this.props.Login.userInfo}\r\n              > */}\r\n                {/* </ListView> */}\r\n                {/* <Button className=\"btn btn-circle outline-grey ml-2\" style={{ \"border-color\": \" rgba(187, 194, 203, 0.41)!important\" }} variant=\"link\" role=\"button\"\r\n                                        title={this.props.intl.formatMessage({ id: \"IDS_ALERT\" })}\r\n                                        onClick={this.openAlert}>\r\n                                        <FontAwesomeIcon icon={faBell}  style={{ \"width\": \"0.6!important\" }}/>\r\n                                        <div style={{\"margin-bottom\":\"11px\"}}>\r\n                  <Badge pill variant=\"secondary\">{alert&&alert.length}</Badge>\r\n                  </div>\r\n                   </Button> */}\r\n                <DashboardIcon>\r\n                  {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n                    {/* <div onClick={this.openAlert}> */}\r\n\r\n                    <div className=\"fa_stack fa-2x the-wrapper\" data-tip={this.props.intl.formatMessage({ id: \"IDS_ALERTS\" })}\r\n                                            // data-for=\"tooltip-grid-wrap\"\r\n                                             onClick={this.openAlert} >\r\n                      <FontAwesomeIcon icon={faBell} style={{ 'font-size': '26px' }}  />\r\n                      <div className=\"icon icon_Badge\" style={{ \"width\": this.state.alert && this.state.alert.length > 9 ? \"52%\" : \"46%\" }}>\r\n                        {/* <div style={{ \"margin-bottom\": \"137px\", \"font-size\": \"40%\" }}> */}\r\n                        {this.state.alert && this.state.alert.length > 0 ?\r\n                          <Badge pill variant=\"danger\">{this.state.alert && this.state.alert.length}</Badge>\r\n                          : \"\"}\r\n\r\n                        {/* </div> */}\r\n                        {/* </div> */} \r\n                      \r\n                      </div>\r\n                    </div>\r\n                  {/* </Tooltip> */}\r\n                </DashboardIcon>\r\n                <DashboardIcon>\r\n                  {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n                  <Nav.Link data-tip={this.props.intl.formatMessage({ id: \"IDS_DASHBOARD\" })}\r\n                                            // data-for=\"tooltip-grid-wrap\" \r\n                                             onClick={this.openDashBoard}>\r\n                    <FontAwesomeIcon icon={faChartPie} data-tip=\"Dashboard\" ></FontAwesomeIcon>\r\n                  </Nav.Link>\r\n                  {/* </Tooltip> */}\r\n                </DashboardIcon>\r\n                {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n               \r\n                  <NavDropdown className=\"no-arrow\" alignRight title={<Media >\r\n                    {/* {userImagePath === \"\" ? */}\r\n                    <ProfileImage className=\"zoom\">\r\n                      {settings && settings[5] && userImagePath && userImagePath !== \"\" ?\r\n                        <Image src={settings[5] + userImagePath}\r\n                          alt=\"avatar\" className=\"rounded-circle mr-2\" width=\"36\" height=\"36\" /> : <Image className=\"rounded-circle mr-2\"\r\n                            src={createImageFromInitials(32, susername ? susername.charAt(0).toUpperCase() : \"\", profileColor)}\r\n                        />}\r\n                    </ProfileImage>\r\n                    <Media.Body bsPrefix=\"media-profileinfo\">\r\n                      <span className=\"user-name user-role\" data-tip={susername} data-place=\"bottom\">{susername}</span>\r\n                      <span className=\"role user-role\" data-tip={suserrolename} data-place=\"bottom\">{suserrolename}</span>\r\n                    </Media.Body>\r\n                    {/* :\r\n                    <Image src={userImagePath === \"\" ? userImg : fileViewURL + \"/SharedFolder/UserProfile/\" + userImagePath}\r\n                      alt=\"avatar\" className=\"img-profile rounded-circle mr-2\" />\r\n                  } */}\r\n\r\n                    {/* <FontAwesomeIcon className=\"align-self-center down-icon ml-2\" icon={faChevronDown} /> */}\r\n                  </Media>}>\r\n                    {/* <ProfileLayer>\r\n                    <ProfileImageLayer>\r\n                      {userImagePath === \"\" ?\r\n                        <Image className=\"rounded-circle mr-2\"\r\n                          src={createImageFromInitials(80, susername ? susername.charAt(0).toUpperCase() : \"\", profileColor)}\r\n                        /> : <Image src={fileViewURL + \"/SharedFolder/UserProfile/\" + userImagePath}\r\n                          alt=\"avatar\" className=\"rounded-circle mr-2\" width=\"80\" height=\"80\" />}\r\n                    </ProfileImageLayer>\r\n                    <Profile>\r\n                      <ProfileName>{susername}</ProfileName>\r\n                      <ProfileRole>{suserrolename}</ProfileRole>\r\n                    </Profile>\r\n                  </ProfileLayer> */}\r\n                  {/* <Media className=\"dropdown-menu-animated\">\r\n                  <ProfileImage>\r\n                            {settings && settings[5] && userImagePath && userImagePath !== \"\" ?\r\n                              <Image src={settings[5] + userImagePath}\r\n                                alt=\"avatar\" className=\"ml-2\" width=\"36\" height=\"36\" /> : <Image className=\"rounded-circle ml-2 mr-3\"\r\n                                  style = {{width:\"3rem\",height:\"3rem\"}} src={createImageFromInitials(32, susername ? susername.charAt(0).toUpperCase() : \"\", profileColor)}\r\n                              />}\r\n                        </ProfileImage>\r\n                    <Media.Body bsPrefix=\"media-profileinfo\">\r\n                      <span className=\"user-name user-role\" data-tip={susername} data-place=\"bottom\">{susername}</span>\r\n                      <span className=\"role user-role\" data-tip={suserrolename} data-place=\"bottom\">{suserrolename}</span>\r\n                    </Media.Body>\r\n                    </Media> */}\r\n                    {userMultiRole && userMultiRole.length > 0 &&\r\n                      <Dropdown as={NavItem} drop={\"left\"} className=\"ml-2 \">\r\n                        <Dropdown.Toggle as={NavLink}>\r\n                        <FontAwesomeIcon icon={faUserCog} className=\"mr-2\"/>\r\n                          <FormattedMessage id=\"IDS_CHANGEROLE\" defaultMessage=\"Change Role\" />\r\n                        </Dropdown.Toggle>\r\n                        <Dropdown.Menu>\r\n                          {userMultiRole.map((item, index) => {\r\n                            return (\r\n                              <Dropdown.Item key={`roleindex_${index}`} onClick={() => this.submitChangeRole(item)}>{item.suserrolename}</Dropdown.Item>\r\n                            )\r\n                          })}\r\n                        </Dropdown.Menu>\r\n                      </Dropdown>}\r\n                    {!isDeputyLogin && deputyUser && deputyUser.length > 0 &&\r\n                      <Dropdown as={NavItem} drop={\"left\"} className=\"ml-2\">\r\n                        <Dropdown.Toggle as={NavLink}>\r\n                        <FontAwesomeIcon icon={faUsersCog} className=\"mr-2\"/>\r\n                          <FormattedMessage id=\"IDS_CHANGEOWNER\" defaultMessage=\"Change Owner\" />\r\n                        </Dropdown.Toggle>\r\n                        <Dropdown.Menu>\r\n                          {this.props.Login.deputyUser.map((item, index) => {\r\n                            return (\r\n                              item.lstUserMultiDeputy && item.lstUserMultiDeputy.length > 1 ?\r\n                                <Dropdown as={NavItem} drop={\"left\"} className=\"ml-2\">\r\n                                  <Dropdown.Toggle as={NavLink}>{`${item.sdeputyname}[${item.sdeputyid}]-${item.suserrolename}`}</Dropdown.Toggle>\r\n                                  <Dropdown.Menu>\r\n                                    {item.lstUserMultiDeputy.map((role, index) => {\r\n                                      return <Dropdown.Item key={`roleIndex_${index}`} onClick={() => this.submitChangeOwner(item, role)}>{role.suserrolename}</Dropdown.Item>\r\n                                    })}\r\n                                  </Dropdown.Menu>\r\n                                </Dropdown>\r\n                                : <Dropdown.Item key={`deptuserindex_${index}`} onClick={() => this.submitChangeOwner(item, item.lstUserMultiDeputy[0])}>{item.sdeputyname+ \"[\"+ item.sdeputyid + \"]\"+\"-\"+item.suserrolename}</Dropdown.Item>\r\n                            )\r\n                          })}\r\n                        </Dropdown.Menu>\r\n                      </Dropdown>\r\n                    }\r\n                    {nlogintypecode && nlogintypecode === LOGINTYPE.INTERNAL && !isDeputyLogin &&\r\n                      <NavDropdown.Item onClick={() => this.props.getPassWordPolicy(nuserrole)}>\r\n                         <FontAwesomeIcon icon={faKey} className=\"mr-2\"/>\r\n                        <FormattedMessage id=\"IDS_CHANGEPASSWORD\" defaultMessage=\"Change Password\" />\r\n                      </NavDropdown.Item>}\r\n                    {/* <NavDropdown.Item>\r\n                      <FormattedMessage id=\"IDS_LOCK\" defaultMessage=\"Lock\" />\r\n                    </NavDropdown.Item> */}\r\n                    <NavDropdown.Item onClick={() => this.onLogout()}>\r\n                    <FontAwesomeIcon icon={faPowerOff} className=\"mr-2\"/>\r\n                      <FormattedMessage id=\"IDS_LOGOUT\" defaultMessage=\"Log Out\" />\r\n                    </NavDropdown.Item>\r\n\r\n                  </NavDropdown>\r\n                {/* </Tooltip> */}\r\n                {/* <PortalModal>\r\n                  <SliderPage sliderOpen={this.state.sliderOpen} openDashBoard={this.openDashBoard}\r\n                    component={<h1>Dash Board</h1>}>\r\n                  </SliderPage>\r\n                </PortalModal>\r\n\r\n                <PortalModal>\r\n                  <SliderPage sliderOpen={this.state.quickSettingOpen} openQuickSetting={this.openQuickSetting}\r\n                    component={<h1>Alert</h1>}>\r\n                  </SliderPage>\r\n                </PortalModal> */}\r\n\r\n                {/* <Dropdown alignRight className=\"no-arrow\">\r\n\r\n                  <Dropdown.Toggle id=\"dropdown-basic\" as={NavLink}>\r\n                    <Media>\r\n                      <Image  src={userImg} alt=\"avatar\" className=\"img-profile rounded-circle mr-2\" />\r\n                        <Media.Body>\r\n                          <span className=\"user-name\">{susername}</span>\r\n                          <span className=\"role\">{suserrolename}</span>\r\n                        </Media.Body>\r\n                        <FontAwesomeIcon className=\"align-self-center down-icon ml-2\" icon={faChevronDown} />\r\n                    </Media>\r\n                  </Dropdown.Toggle>\r\n\r\n                  <Dropdown.Menu>\r\n                    {this.props.Login.nchangerolecount > 0 && \r\n                    <>\r\n                      <Dropdown.Item onClick={()=>this.props.getChangeUserRole(this.props.Login.userInfo)}>\r\n                          <FormattedMessage id=\"IDS_CHANGEROLE\" defaultMessage=\"Change Role\" />\r\n                      </Dropdown.Item>\r\n                      <Dropdown as={NavItem} drop={\"left\"}>\r\n                        <Dropdown.Toggle as={NavLink}>\r\n                          <FormattedMessage id=\"IDS_CHANGEROLE\" defaultMessage=\"Change Role\" />\r\n                        </Dropdown.Toggle>\r\n                        <Dropdown.Menu>\r\n                          <Dropdown.Item>Hello there!</Dropdown.Item>\r\n                        </Dropdown.Menu>\r\n                      </Dropdown>\r\n                      </>}\r\n                    {this.props.Login.ndeputyCount > 0 && \r\n                      <Dropdown.Item onClick={ () => this.onChangeOwner() }>\r\n                          <FormattedMessage id=\"IDS_CHANGEOWNER\" defaultMessage=\"Change Owner\" />\r\n                      </Dropdown.Item>}\r\n                      <Dropdown.Item>\r\n                          <FormattedMessage id=\"IDS_CHANGEPASSWORD\" defaultMessage=\"Change Password\" />\r\n                      </Dropdown.Item>\r\n                      <Dropdown.Item>\r\n                          <FormattedMessage id=\"IDS_LOCK\" defaultMessage=\"Lock\" />\r\n                      </Dropdown.Item>\r\n                      <Dropdown.Item onClick={ () => this.onLogout()}>\r\n                          <FormattedMessage id=\"IDS_LOGOUT\" defaultMessage=\"Log Out\" />\r\n                      </Dropdown.Item>\r\n                  </Dropdown.Menu>\r\n                </Dropdown> */}\r\n              </Nav>\r\n            </Navbar.Collapse>\r\n          </Navbar>\r\n        </AtHeader>\r\n     \r\n        <PortalModal>\r\n          <SliderPage show={this.state.showDashboard} nflag={this.state.nflag} closeModal={this.openDashBoard} />\r\n        </PortalModal>\r\n        { this.props.Login.openCPModal && this.props.Login.screenName === \"IDS_CHANGEPASSWORD\" &&\r\n          <SlideOutModal\r\n            show={this.props.Login.openCPModal}\r\n            closeModal={this.closeModal}\r\n            loginoperation={true}\r\n            inputParam={{}}\r\n            screenName={this.props.Login.screenName}\r\n            onSaveClick={this.onChangePassword}\r\n            selectedRecord={this.state.createPwdRecord || {}}\r\n            mandatoryFields={this.mandatoryFieldFunction()}\r\n            addComponent={\r\n              <ChangePassWord\r\n                sloginid={this.props.Login.userInfo.sloginid}\r\n                createPwdRecord={this.state.createPwdRecord}\r\n                msg={fnPassMessage(this.props.Login.passwordPolicy)}\r\n                onInputChange={(event) => this.onInputChange(event)}\r\n              />\r\n            }\r\n          />}\r\n      </>\r\n    );\r\n  }\r\n\r\n  submitChangeOwner = (item, role) => {\r\n    const parameterInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { menuDesign: [], navigation: \"\" }\r\n    }\r\n    this.props.updateStore(parameterInfo);\r\n    const inputData = {\r\n      nuserrolecode: item.nuserrolecode,\r\n      suserrolename: item.suserrolename,\r\n      nusercode: item.nusercode,\r\n      sdeputyid:item.sdeputyid,\r\n      userinfo: this.props.Login.userInfo\r\n    }\r\n    this.props.changeOwner(inputData);\r\n  }\r\n\r\n  onChangePassword = () => {\r\n    const createPwdRecord = this.state.createPwdRecord;\r\n    const returnMsg = changePasswordValidation(createPwdRecord, this.props.Login.passwordPolicy, this.props.Login.userInfo.sloginid);\r\n    if (returnMsg === 0) {\r\n      const inputParam = {\r\n        spassword: createPwdRecord.snewpassword.trim(),\r\n        sOldPassword: createPwdRecord.soldpassword.trim(),\r\n        nusersitecode: this.props.Login.userInfo.nusersitecode,\r\n        isPasswordExpiry: false,\r\n        userInfo: this.props.Login.userInfo\r\n      };\r\n      this.props.changepassword(inputParam);\r\n    } else {\r\n      toast.info(returnMsg);\r\n    }\r\n  }\r\n\r\n  onInputChange(event) {\r\n    const createPwdRecord = this.state.createPwdRecord || {};\r\n    createPwdRecord[event.target.name] = event.target.value;\r\n    this.setState({ createPwdRecord });\r\n  }\r\n\r\n  closeModal = () => {\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { openCPModal: false }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n  }\r\n\r\n  mandatoryFieldFunction() {\r\n    let mandatoryField = [\r\n      { \"idsName\": \"IDS_OLDPASSWORD\", \"dataField\": \"soldpassword\", \"mandatory\": false },\r\n      { \"idsName\": \"IDS_NEWPASSWORD\", \"dataField\": \"snewpassword\", \"mandatory\": false },\r\n      { \"idsName\": \"IDS_CONFIRMPASSWORD\", \"dataField\": \"sconfirmpassword\", \"mandatory\": true }\r\n    ]\r\n    return mandatoryField;\r\n  }\r\n\r\n  submitChangeRole = (roleItem) => {\r\n    const parameterInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { menuDesign: [], navigation: \"\" }\r\n    }\r\n    this.props.updateStore(parameterInfo);\r\n    const userInfo = this.props.Login.userInfo;\r\n    const inputParam = {\r\n      nusermultisitecode: userInfo.nusersitecode,\r\n      slanguagetypecode: userInfo.slanguagetypecode,\r\n      nusermultirolecode: roleItem.nusermultirolecode,\r\n      nuserrolecode: roleItem.nuserrolecode,\r\n      nmastersitecode: userInfo.nmastersitecode,\r\n      nlogintypecode: userInfo.nlogintypecode,\r\n      userinfo: userInfo\r\n    }\r\n    this.props.submitChangeRole(inputParam);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n  //   if (this.props.Login.isDeputyLogin === true) {\r\n    \r\n  //   if (this.props.Login.navigation === \"home\") {\r\n  //      this.props.history.push('/');\r\n  //  }\r\n  // }\r\n    if (this.props.Login.createPwdRecord !== prevProps.Login.createPwdRecord) {\r\n      this.setState({ createPwdRecord: this.props.Login.createPwdRecord })\r\n    }\r\n    if (this.props.Login.alert !== prevProps.Login.alert) {\r\n      this.setState({ alert: this.props.Login.alert })\r\n    }\r\n  }\r\n\r\n\r\n\r\n  // componentWillUnmount() {\r\n  //   clearInterval(this.interval);\r\n  // }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n  getChangeUserRole, submitChangeRole, getPassWordPolicy,\r\n  updateStore, changepassword, changeOwner, logOutAuditAction, getSelectedAlert, getListAlert\r\n})(injectIntl(Header));"]},"metadata":{},"sourceType":"module"}