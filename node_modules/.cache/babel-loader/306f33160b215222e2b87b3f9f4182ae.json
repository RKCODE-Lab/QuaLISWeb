{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Col,Row}from'react-bootstrap';import{injectIntl}from'react-intl';import DropZone from'../../components/dropzone/dropzone.component';import{attachmentType,transactionStatus}from'../../components/Enumeration';import{deleteAttachmentDropZone,onDropAttachFileList}from'../../components/CommonScript';import{viewAttachment}from'../../actions';import{connect}from'react-redux';import DataGrid from'../../components/data-grid/data-grid.component';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import{process}from'@progress/kendo-data-query';import CustomSwitch from'../../components/custom-switch/custom-switch.component';import FormTextarea from'../../components/form-textarea/form-textarea.component';import FormSelectSearch from'../../components/form-select-search/form-select-search.component';import Esign from'../audittrail/Esign';import rsapi from'../../rsapi';import{toast}from'react-toastify';import{create_UUID,Lims_JSON_stringify,showEsign}from\"../../components/CommonScript\";var ReleaseTestAttachment=/*#__PURE__*/function(_React$Component){_inherits(ReleaseTestAttachment,_React$Component);var _super=_createSuper(ReleaseTestAttachment);function ReleaseTestAttachment(props){var _this;_classCallCheck(this,ReleaseTestAttachment);_this=_super.call(this,props);_this.closeModal=function(){var loadEsign=_this.state.loadEsign;var openModal=_this.state.openModal;var selectedRecord=_this.state.selectedRecord;var operation=_this.state.operation;if(_this.state.loadEsign){if(_this.state.operation===\"delete\"){loadEsign=false;openModal=false;selectedRecord={};operation=undefined;}else{loadEsign=false;selectedRecord[\"esigncomments\"]=\"\";selectedRecord[\"esignpassword\"]=\"\";selectedRecord['esignreason']='';}}else{openModal=false;selectedRecord={};}_this.setState({loadEsign:loadEsign,openModal:openModal,selectedRecord:selectedRecord,operation:operation});};_this.getSampleDetails=function(event,ncontrolCode,operation){var url=\"release/getActiveReleaseTestAttachmentById\";var openModal=true;if(_this.props.masterData.selectedReleaseHistory.ntransactionstatus!==transactionStatus.RELEASED){if(operation===\"update\"){rsapi.post(url,{\"ncoaparentcode\":event.editRow.ncoaparentcode,\"npreregno\":event.editRow.npreregno,\"ntransactionsamplecode\":event.editRow.ntransactionsamplecode,\"ntransactiontestcode\":event.editRow.ntransactiontestcode,\"nreleasetestattachmentcode\":event.editRow.nreleasetestattachmentcode,\"userinfo\":_this.props.userInfo}).then(function(response){var responseData=response.data;if(responseData.ntransactionstatus!==transactionStatus.RELEASED){var selectedReleaseTestAttachment=event.editRow;var masterData=_this.props.masterData;var nneedreport=responseData&&responseData.nneedreport?responseData.nneedreport:transactionStatus.NO;var sdescription=responseData&&responseData.sdescription?responseData.sdescription:\"\";var sfilename=event.editRow&&event.editRow.sfilename;var npreregno;var ntransactionsamplecode;var ntransactiontestcode;var sarno;var ssamplearno;var stestsynonym;masterData.RegistrationArno.map(function(item){if(item.value===responseData.npreregno){npreregno=item;sarno=item.label;}});masterData.RegistrationSampleArno.map(function(item){if(item.value===responseData.ntransactionsamplecode){ntransactionsamplecode=item;ssamplearno=item.label;}});masterData.RegistrationTest.map(function(item){if(item.value===responseData.ntransactiontestcode){ntransactiontestcode=item;stestsynonym=item.label;}});var selectedRecord=_objectSpread(_objectSpread({},_this.state.selectedRecord),{},{npreregno:npreregno,ntransactionsamplecode:ntransactionsamplecode,ntransactiontestcode:ntransactiontestcode,sfilename:sfilename,sarno:sarno,ssamplearno:ssamplearno,stestsynonym:stestsynonym,nneedreport:nneedreport,sdescription:sdescription,selectedReleaseTestAttachment:selectedReleaseTestAttachment});_this.setState({selectedRecord:selectedRecord,openModal:openModal,operation:operation,ncontrolCode:ncontrolCode});}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_RECORDALREADYRELEASED\"}));}}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this.setState({loading:false});});}else{var RegistrationArno=_this.props.masterData.RegistrationArno;var selectedRecord={RegistrationArno:RegistrationArno,ReleaseTestAttachmentDetails:_this.props.masterData.ReleaseTestAttachmentDetails,nneedreport:transactionStatus.NO};_this.setState({selectedRecord:selectedRecord,openModal:openModal,operation:operation,ncontrolCode:ncontrolCode});}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_RECORDALREADYRELEASED\"}));}};_this.deleteRecord=function(deleteParam){var url=\"release/deleteReleaseTestAttachment\";if(_this.props.masterData.selectedReleaseHistory.ntransactionstatus!==transactionStatus.RELEASED){var releasetestattachment={\"ncoaparentcode\":deleteParam.selectedRecord.ncoaparentcode,\"npreregno\":deleteParam.selectedRecord.npreregno,\"ntransactionsamplecode\":deleteParam.selectedRecord.ntransactionsamplecode,\"ntransactiontestcode\":deleteParam.selectedRecord.ntransactiontestcode,\"nreleasetestattachmentcode\":deleteParam.selectedRecord.nreleasetestattachmentcode};rsapi.post(url,{releasetestattachment:releasetestattachment,\"userinfo\":_this.props.userInfo}).then(function(response){var ReleaseTestAttachmentDetails=response.data.ReleaseTestAttachmentDetails;var selectedRecord=_objectSpread(_objectSpread({},_this.state.selectedRecord),response.data);_this.setState({selectedRecord:selectedRecord,ReleaseTestAttachmentDetails:ReleaseTestAttachmentDetails});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this.setState({loading:false});});}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_RECORDALREADYRELEASED\"}));}};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};var lstRegistrationSampleArno=_this.props.masterData.RegistrationSampleArno;var lstRegistrationTest=_this.props.masterData.RegistrationTest;var RegistrationSampleArno=[];var RegistrationTest=[];var ntransactionsamplecode=\"\";var ntransactiontestcode=\"\";var ssamplearno=null;var stestsynonym=null;if(fieldName===\"npreregno\"){lstRegistrationSampleArno.map(function(item){if(item.item.npreregno===comboData.value){RegistrationSampleArno.push(item);}});var npreregno={item:comboData.item,label:comboData.label,value:comboData.value};var sarno=comboData.item.sarno;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{RegistrationSampleArno:RegistrationSampleArno,RegistrationTest:RegistrationTest,npreregno:npreregno,sarno:sarno,ntransactionsamplecode:ntransactionsamplecode,ntransactiontestcode:ntransactiontestcode,ssamplearno:ssamplearno,stestsynonym:stestsynonym});_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ntransactionsamplecode\"){lstRegistrationTest.map(function(item){if(item.item.ntransactionsamplecode===comboData.value){RegistrationTest.push(item);}});ntransactionsamplecode={item:comboData.item,label:comboData.label,value:comboData.value};ssamplearno=comboData.item.ssamplearno;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{RegistrationTest:RegistrationTest,ntransactionsamplecode:ntransactionsamplecode,ssamplearno:ssamplearno,ntransactiontestcode:ntransactiontestcode,stestsynonym:stestsynonym});_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ntransactiontestcode\"){ntransactiontestcode={item:comboData.item,label:comboData.label,value:comboData.value};stestsynonym=comboData.item.stestsynonym;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{ntransactiontestcode:ntransactiontestcode,stestsynonym:stestsynonym});_this.setState({selectedRecord:selectedRecord});}};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[event.target.name]=event.target.value;if(event.target.type==='checkbox'){if(event.target.name===\"nneedreport\"){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}}else{selectedRecord[event.target.name]=event.target.value;}if(selectedRecord[\"nneedreport\"]&&selectedRecord[\"nneedreport\"]===transactionStatus.YES&&selectedRecord[\"sfilename\"]!==undefined&&selectedRecord[\"sfilename\"].length>0){var fileFormat=false;var requiredFileFormat=_this.props.settings&&_this.props.settings[32]&&_this.props.settings[32].split(\",\");var fileNameSplit=selectedRecord[\"sfilename\"]&&Array.isArray(selectedRecord[\"sfilename\"])?selectedRecord[\"sfilename\"][0].name.split(\".\"):selectedRecord[\"sfilename\"].split(\".\");requiredFileFormat.map(function(item){if(item.slice(1)===fileNameSplit[fileNameSplit.length-1]){fileFormat=true;}});selectedRecord[\"nneedreport\"]=fileFormat?selectedRecord[\"nneedreport\"]:transactionStatus.NO;!fileFormat&&toast.warn(_this.props.intl.formatMessage({id:\"IDS_REPORTSUPPORTSONLYFILEFORMATS\"}));}_this.setState({selectedRecord:selectedRecord});};_this.onDrop=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord});};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord});};_this.dataStateChange=function(event){_this.setState({dataState:event.dataState,dataResult:process(_this.state.ReleaseTestAttachmentDetails,event.dataState)});};_this.viewReleaseTestAttachmentFile=function(filedata){delete filedata.inputData.userinfo;var inputParam={inputData:{releasetestattachment:filedata.inputData,userinfo:_this.props.userInfo,ncontrolcode:filedata.ncontrolCode},classUrl:\"release\",operation:\"view\",methodUrl:\"ReleaseTestAttachment\"};_this.props.viewAttachment(inputParam);};_this.onSaveClick=function(saveType,formRef){if(_this.state.loading===false){_this.setState({loading:true});var formData=new FormData();var selectedRecord=_this.state.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var userInfo=_this.props.userInfo;var isFileEdited=transactionStatus.NO;var fileArray=[];if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){if(_this.state.operation==='create'){acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var fileName=selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;var tempData={};tempData[\"nformcode\"]=userInfo.nformcode;tempData[\"npreregno\"]=selectedRecord.npreregno.value;tempData[\"ntransactionsamplecode\"]=selectedRecord.ntransactionsamplecode.value;tempData[\"ntransactiontestcode\"]=selectedRecord.ntransactiontestcode.value;tempData[\"ncoaparentcode\"]=_this.props.masterData.ncoaparentcode;tempData[\"nusercode\"]=userInfo.nusercode;tempData[\"nuserrolecode\"]=userInfo.nuserrole;tempData[\"jsondata\"]={stestsynonym:selectedRecord.ntransactiontestcode.label,susername:userInfo.susername,suserrolename:userInfo.suserrolename,nfilesize:file.size,ssystemfilename:uniquefilename,sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),slinkname:\"\",sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:selectedRecord.nneedreport?selectedRecord.nneedreport:transactionStatus.NO};formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);fileArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var fileName=selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;var tempData={};tempData[\"nreleasetestattachmentcode\"]=selectedRecord.selectedReleaseTestAttachment&&selectedRecord.selectedReleaseTestAttachment.nreleasetestattachmentcode;tempData[\"nformcode\"]=userInfo.nformcode;tempData[\"npreregno\"]=selectedRecord.npreregno.value;tempData[\"ntransactionsamplecode\"]=selectedRecord.ntransactionsamplecode.value;tempData[\"ntransactiontestcode\"]=selectedRecord.ntransactiontestcode.value;tempData[\"ncoaparentcode\"]=_this.props.masterData.ncoaparentcode;tempData[\"nusercode\"]=userInfo.nusercode;tempData[\"nuserrolecode\"]=userInfo.nuserrole;tempData[\"jsondata\"]={stestsynonym:selectedRecord.ntransactiontestcode.label,susername:userInfo.susername,suserrolename:userInfo.suserrolename,nfilesize:file.size,ssystemfilename:uniquefilename,sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),slinkname:\"\",sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:selectedRecord.nneedreport?selectedRecord.nneedreport:transactionStatus.NO};formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;fileArray.push(tempData);});}}else{var tempData={};tempData[\"nreleasetestattachmentcode\"]=selectedRecord.selectedReleaseTestAttachment&&selectedRecord.selectedReleaseTestAttachment.nreleasetestattachmentcode;tempData[\"nformcode\"]=userInfo.nformcode;tempData[\"npreregno\"]=selectedRecord.npreregno.value;tempData[\"ntransactionsamplecode\"]=selectedRecord.ntransactionsamplecode.value;tempData[\"ntransactiontestcode\"]=selectedRecord.ntransactiontestcode.value;tempData[\"ncoaparentcode\"]=_this.props.masterData.ncoaparentcode;tempData[\"nusercode\"]=userInfo.nusercode;tempData[\"nuserrolecode\"]=userInfo.nuserrole;tempData[\"jsondata\"]={stestsynonym:selectedRecord.ntransactiontestcode.label,susername:userInfo.susername,suserrolename:userInfo.suserrolename,nfilesize:selectedRecord.size,ssystemfilename:selectedRecord.ssystemfilename,sfilename:Lims_JSON_stringify(acceptedFiles.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),slinkname:\"\",sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:selectedRecord.nneedreport?selectedRecord.nneedreport:transactionStatus.NO};fileArray.push(tempData);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"releasetestattachment\",JSON.stringify(fileArray));formData.append(\"nattachmenttypecode\",attachmentType.FTP);formData.append(\"ncoaparentcode\",_this.props.masterData.ncoaparentcode);formData.append(\"ncontrolcode\",_this.state.ncontrolCode);formData.append(\"userinfo\",JSON.stringify(_objectSpread(_objectSpread({},userInfo),{},{sformname:Lims_JSON_stringify(userInfo.sformname),smodulename:Lims_JSON_stringify(userInfo.smodulename),slanguagename:Lims_JSON_stringify(userInfo.slanguagename)})));var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},userInfo),{},{sformname:Lims_JSON_stringify(userInfo.sformname),smodulename:Lims_JSON_stringify(userInfo.smodulename),slanguagename:Lims_JSON_stringify(userInfo.slanguagename)})},formData:formData,isFileupload:true,operation:_this.state.operation,classUrl:\"release\",saveType:saveType,formRef:formRef,methodUrl:\"ReleaseTestAttachment\"};formData.append(\"userinfo\",JSON.stringify(inputParam.inputData.userinfo));var requestUrl=rsapi.post(\"release/\"+_this.state.operation+\"ReleaseTestAttachment\",formData);return requestUrl.then(function(response){var ReleaseTestAttachmentDetails=response.data.ReleaseTestAttachmentDetails;var selectedRecord={};var openModal=false;_this.setState({selectedRecord:selectedRecord,openModal:openModal,ReleaseTestAttachmentDetails:ReleaseTestAttachmentDetails,loading:false});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this.setState({loading:false});});}};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={loading:false,ReleaseTestAttachmentDetails:_this.props.ReleaseTestAttachmentDetails,dataState:dataState,openModal:false,inputParam:_this.props.inputParam,loadEsign:false,operation:\"\",selectedRecord:{},isneedReport:_this.props.isneedReport};return _this;}_createClass(ReleaseTestAttachment,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.ReleaseTestAttachmentDetails!==prevProps.ReleaseTestAttachmentDetails){this.setState({ReleaseTestAttachmentDetails:this.props.ReleaseTestAttachmentDetails});}if(this.props.inputParam!==prevProps.inputParam){this.setState({inputParam:this.props.inputParam});}}},{key:\"render\",value:function render(){var _this2=this;var addReleaseTestAttachment=this.props.controlMap.has(\"AddReleaseTestAttachment\")&&this.props.controlMap.get(\"AddReleaseTestAttachment\").ncontrolcode;var editReleaseTestAttachment=this.props.controlMap.has(\"EditReleaseTestAttachment\")&&this.props.controlMap.get(\"EditReleaseTestAttachment\").ncontrolcode;var editReleaseTestAttachmentParam={screenName:this.props.intl.formatMessage({id:\"IDS_RELEASETESTATTACHMENT\"}),operation:\"update\",primaryKeyField:\"nreleasetestattachmentcode\",inputParam:this.state.inputParam,userInfo:this.props.userInfo,ncontrolCode:editReleaseTestAttachment};this.fieldsForReleasedTestAttachmentGrid=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"sfilename\",\"width\":\"200px\"},{\"idsName\":\"IDS_ARNO\",\"dataField\":\"sarno\",\"width\":\"200px\"},{\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"200px\"},{\"idsName\":\"IDS_TESTSYNONYM\",\"dataField\":\"stestsynonym\",\"width\":\"200px\"},{\"idsName\":\"IDS_SCREENNAME\",\"dataField\":\"sformname\",\"width\":\"200px\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"200px\"},{\"idsName\":\"IDS_INCULDEINREPORT\",\"dataField\":\"sneedreport\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"susername\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERROLENAME\",\"dataField\":\"suserrolename\",\"width\":\"200px\"},{\"idsName\":\"IDS_CREATEDDATE\",\"dataField\":\"screateddate\",\"width\":\"200px\"}];var mandatoryFields=[{\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_TESTSYNONYM\",\"dataField\":\"stestsynonym\",\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"}];var sdescrption=this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK?\"slinkdescription\":\"sdescription\";return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:\"nreleasetestattachmentcode\",data:this.state.ReleaseTestAttachmentDetails||[],dataResult:process(this.state.ReleaseTestAttachmentDetails&&this.state.ReleaseTestAttachmentDetails||[],this.state.dataState),dataState:this.state.dataState,isExportExcelRequired:false,controlMap:this.props.controlMap,userRoleControlRights:this.props.userRoleControlRights,userInfo:this.props.userInfo,editParam:editReleaseTestAttachmentParam,extractedColumnList:this.fieldsForReleasedTestAttachmentGrid,pageable:true,dataStateChange:this.dataStateChange,scrollable:'scrollable',gridHeight:'630px',isActionRequired:true,addRecord:function addRecord(event){return _this2.getSampleDetails(event,addReleaseTestAttachment,\"create\");},isToolBarRequired:true,methodUrl:'ReleaseTestAttachment',isAddRequired:this.props.isAddRequired,isRefreshRequired:this.props.isRefreshRequired,isImportRequired:this.props.isImportRequired,isDownloadPDFRequired:this.props.isDownloadPDFRequired,isDownloadExcelRequired:this.props.isDownloadExcelRequired,fetchRecord:function fetchRecord(event){_this2.getSampleDetails(event,editReleaseTestAttachment,\"update\");},deleteRecord:this.deleteRecord,viewDownloadFile:this.viewReleaseTestAttachmentFile}))),this.state.openModal?/*#__PURE__*/React.createElement(SlideOutModal,{show:this.state.openModal,size:\"xl\",closeModal:this.closeModal,operation:this.state.operation,inputParam:this.state.inputParam,screenName:this.props.intl.formatMessage({id:\"IDS_TESTATTACHMENTS\"}),onSaveClick:this.onSaveClick,esign:this.state.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.state.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.state.operation,onInputOnChange:this.onInputOnChange,inputParam:this.state.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(DropZone,{name:\"AttachmentFile\",label:this.props.intl.formatMessage({id:\"IDS_FILE\"}),isMandatory:true,accept:this.state.selectedRecord&&this.state.selectedRecord.nneedreport===transactionStatus.YES?this.props.settings&&this.props.settings[32]:\"\",maxFiles:1,minSize:0,maxSize:this.props.maxSize,onDrop:function onDrop(event){return _this2.onDrop(event,'sfilename',1);},deleteAttachment:this.deleteAttachment,actionType:this.actionType,fileNameLength:this.fileNameLength,editFiles:this.state.selectedRecord?this.state.selectedRecord:{},attachmentTypeCode:this.state.selectedRecord&&this.state.selectedRecord.selectedAttachmentFile&&this.state.selectedRecord.selectedAttachmentFile.nattachmenttypecode,fileSizeName:\"nfilesize\",fileName:\"sfilename\"})),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_ARNUMBER\"}),isSearchable:true,name:\"npreregno\",isDisabled:this.state.operation===\"create\"?false:true,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:true,options:this.state.selectedRecord?this.state.selectedRecord.RegistrationArno:[],optionId:\"npreregno\",optionValue:\"sarno\",value:this.state.selectedRecord?this.state.selectedRecord.npreregno:\"\",onChange:function onChange(event){return _this2.onComboChange(event,'npreregno');},closeMenuOnSelect:true,alphabeticalSort:true})),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_SAMPLEARNO\"}),isSearchable:true,name:\"ntransactionsamplecode\",isDisabled:this.state.operation===\"create\"?false:true,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:true,options:this.state.selectedRecord?this.state.selectedRecord.RegistrationSampleArno:[],optionId:\"ntransactionsamplecode\",optionValue:\"ssamplearno\",value:this.state.selectedRecord?this.state.selectedRecord.ntransactionsamplecode:\"\",onChange:function onChange(event){return _this2.onComboChange(event,'ntransactionsamplecode');},closeMenuOnSelect:true,alphabeticalSort:true})),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_TESTSYNONYM\"}),isSearchable:true,name:\"ntransactiontestcode\",isDisabled:this.state.operation===\"create\"?false:true,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:true,options:this.state.selectedRecord?this.state.selectedRecord.RegistrationTest:[],optionId:\"ntransactiontestcode\",optionValue:\"stestsynonym\",value:this.state.selectedRecord?this.state.selectedRecord.ntransactiontestcode:\"\",onChange:function onChange(event){return _this2.onComboChange(event,'ntransactiontestcode');},closeMenuOnSelect:true,alphabeticalSort:true})),/*#__PURE__*/React.createElement(Col,{md:\"12\",className:\"mt-4\"},/*#__PURE__*/React.createElement(FormTextarea,{name:sdescrption,label:this.props.intl.formatMessage({id:\"IDS_DESCRIPTION\"}),onChange:function onChange(event){return _this2.onInputOnChange(event,1);},placeholder:this.props.intl.formatMessage({id:\"IDS_DESCRIPTION\"}),value:this.state.selectedRecord&&this.state.selectedRecord[sdescrption]?this.state.selectedRecord[sdescrption]:\"\",rows:\"2\",required:false,maxLength:255})),/*#__PURE__*/React.createElement(Col,{md:\"12\",className:\"mt-4\"},/*#__PURE__*/React.createElement(CustomSwitch,{label:this.props.intl.formatMessage({id:\"IDS_INCULDEINREPORT\"}),type:\"switch\",name:\"nneedreport\",onChange:function onChange(event){return _this2.onInputOnChange(event,1);},defaultValue:false,isMandatory:false,required:true,checked:this.state.selectedRecord?this.state.selectedRecord.nneedreport===transactionStatus.YES?true:false:false})))}):\"\");}}]);return ReleaseTestAttachment;}(React.Component);export default connect(null,{viewAttachment:viewAttachment})(injectIntl(ReleaseTestAttachment));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/release/ReleaseTestAttachment.jsx"],"names":["React","Col","Row","injectIntl","DropZone","attachmentType","transactionStatus","deleteAttachmentDropZone","onDropAttachFileList","viewAttachment","connect","DataGrid","SlideOutModal","process","CustomSwitch","FormTextarea","FormSelectSearch","Esign","rsapi","toast","create_UUID","Lims_JSON_stringify","showEsign","ReleaseTestAttachment","props","closeModal","loadEsign","state","openModal","selectedRecord","operation","undefined","setState","getSampleDetails","event","ncontrolCode","url","masterData","selectedReleaseHistory","ntransactionstatus","RELEASED","post","editRow","ncoaparentcode","npreregno","ntransactionsamplecode","ntransactiontestcode","nreleasetestattachmentcode","userInfo","then","response","responseData","data","selectedReleaseTestAttachment","nneedreport","NO","sdescription","sfilename","sarno","ssamplearno","stestsynonym","RegistrationArno","map","item","value","label","RegistrationSampleArno","RegistrationTest","warn","intl","formatMessage","id","catch","error","status","message","loading","ReleaseTestAttachmentDetails","deleteRecord","deleteParam","releasetestattachment","onComboChange","comboData","fieldName","lstRegistrationSampleArno","lstRegistrationTest","push","onInputOnChange","target","name","type","checked","YES","length","fileFormat","requiredFileFormat","settings","split","fileNameSplit","Array","isArray","slice","onDrop","attachedFiles","maxSize","deleteAttachment","file","dataStateChange","dataState","dataResult","viewReleaseTestAttachmentFile","filedata","inputData","userinfo","inputParam","ncontrolcode","classUrl","methodUrl","onSaveClick","saveType","formRef","formData","FormData","acceptedFiles","isFileEdited","fileArray","forEach","index","splittedFileName","fileExtension","fileName","ssystemfilename","uniquefilename","tempData","nformcode","nusercode","nuserrole","susername","suserrolename","nfilesize","size","replaceAll","trim","slinkname","append","JSON","stringify","FTP","sformname","smodulename","slanguagename","isFileupload","requestUrl","skip","take","parseInt","isneedReport","prevProps","addReleaseTestAttachment","controlMap","has","get","editReleaseTestAttachment","editReleaseTestAttachmentParam","screenName","primaryKeyField","fieldsForReleasedTestAttachmentGrid","mandatoryFields","sdescrption","nattachmenttypecode","LINK","userRoleControlRights","isAddRequired","isRefreshRequired","isImportRequired","isDownloadPDFRequired","isDownloadExcelRequired","validateEsign","actionType","fileNameLength","selectedAttachmentFile","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';\r\nimport DropZone from '../../components/dropzone/dropzone.component';\r\nimport { attachmentType, transactionStatus } from '../../components/Enumeration';\r\nimport { deleteAttachmentDropZone, onDropAttachFileList } from '../../components/CommonScript';\r\nimport { viewAttachment } from '../../actions';\r\nimport { connect } from 'react-redux';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport CustomSwitch from '../../components/custom-switch/custom-switch.component';\r\nimport FormTextarea from '../../components/form-textarea/form-textarea.component';\r\nimport FormSelectSearch from '../../components/form-select-search/form-select-search.component';\r\nimport Esign from '../audittrail/Esign';\r\nimport rsapi from '../../rsapi';\r\nimport { toast } from 'react-toastify';\r\nimport { create_UUID, Lims_JSON_stringify, showEsign } from \"../../components/CommonScript\";\r\n\r\nclass ReleaseTestAttachment extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            loading: false,\r\n            ReleaseTestAttachmentDetails: this.props.ReleaseTestAttachmentDetails,\r\n            dataState: dataState,\r\n            openModal: false,\r\n            inputParam: this.props.inputParam,\r\n            loadEsign: false,\r\n            operation: \"\",\r\n            selectedRecord: {},\r\n            isneedReport: this.props.isneedReport\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.ReleaseTestAttachmentDetails !== prevProps.ReleaseTestAttachmentDetails) {\r\n            this.setState({ ReleaseTestAttachmentDetails: this.props.ReleaseTestAttachmentDetails })\r\n        }\r\n        if (this.props.inputParam !== prevProps.inputParam) {\r\n            this.setState({ inputParam: this.props.inputParam })\r\n        }\r\n\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.state.loadEsign;\r\n        let openModal = this.state.openModal\r\n        let selectedRecord = this.state.selectedRecord;\r\n        let operation = this.state.operation;\r\n        if (this.state.loadEsign) {\r\n            if (this.state.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n                operation = undefined;\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord[\"esigncomments\"] = \"\";\r\n                selectedRecord[\"esignpassword\"] = \"\";\r\n                selectedRecord['esignreason'] = '';\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n        }\r\n        this.setState({ loadEsign, openModal, selectedRecord, operation })\r\n    }\r\n\r\n    render() {\r\n        const addReleaseTestAttachment =\r\n            this.props.controlMap.has(\"AddReleaseTestAttachment\") &&\r\n            this.props.controlMap.get(\"AddReleaseTestAttachment\").ncontrolcode;\r\n\r\n        const editReleaseTestAttachment =\r\n            this.props.controlMap.has(\"EditReleaseTestAttachment\") &&\r\n            this.props.controlMap.get(\"EditReleaseTestAttachment\").ncontrolcode;\r\n\r\n        const editReleaseTestAttachmentParam = {\r\n            screenName: this.props.intl.formatMessage({ id: \"IDS_RELEASETESTATTACHMENT\" }),\r\n            operation: \"update\", primaryKeyField: \"nreleasetestattachmentcode\",\r\n            inputParam: this.state.inputParam,\r\n            userInfo: this.props.userInfo,\r\n            ncontrolCode: editReleaseTestAttachment\r\n        };\r\n\r\n        this.fieldsForReleasedTestAttachmentGrid =\r\n            [\r\n                { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"sfilename\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_ARNO\", \"dataField\": \"sarno\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_TESTSYNONYM\", \"dataField\": \"stestsynonym\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_SCREENNAME\", \"dataField\": \"sformname\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_INCULDEINREPORT\", \"dataField\": \"sneedreport\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_USERROLENAME\", \"dataField\": \"suserrolename\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_CREATEDDATE\", \"dataField\": \"screateddate\", \"width\": \"200px\" },\r\n\r\n            ]\r\n\r\n        let mandatoryFields = [\r\n            { \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n            { \"idsName\": \"IDS_ARNUMBER\", \"dataField\": \"sarno\", \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n            { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n            { \"idsName\": \"IDS_TESTSYNONYM\", \"dataField\": \"stestsynonym\", \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" }\r\n        ];\r\n\r\n        const sdescrption = this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK ? \"slinkdescription\" : \"sdescription\";\r\n        return (\r\n            <>\r\n                <Row>\r\n                    <Col>\r\n                        <DataGrid\r\n                            primaryKeyField=\"nreleasetestattachmentcode\"\r\n                            data={this.state.ReleaseTestAttachmentDetails || []}\r\n                            dataResult={process(this.state.ReleaseTestAttachmentDetails && this.state.ReleaseTestAttachmentDetails || [], this.state.dataState)}\r\n                            dataState={this.state.dataState}\r\n                            isExportExcelRequired={false}\r\n                            controlMap={this.props.controlMap}\r\n                            userRoleControlRights={this.props.userRoleControlRights}\r\n                            userInfo={this.props.userInfo}\r\n                            editParam={editReleaseTestAttachmentParam}\r\n                            extractedColumnList={this.fieldsForReleasedTestAttachmentGrid}\r\n                            pageable={true}\r\n                            dataStateChange={this.dataStateChange}\r\n                            scrollable={'scrollable'}\r\n                            gridHeight={'630px'}\r\n                            isActionRequired={true}\r\n                            addRecord={(event) => this.getSampleDetails(event, addReleaseTestAttachment, \"create\")}\r\n                            isToolBarRequired={true}\r\n                            methodUrl={'ReleaseTestAttachment'}\r\n                            isAddRequired={this.props.isAddRequired}\r\n                            isRefreshRequired={this.props.isRefreshRequired}\r\n                            isImportRequired={this.props.isImportRequired}\r\n                            isDownloadPDFRequired={this.props.isDownloadPDFRequired}\r\n                            isDownloadExcelRequired={this.props.isDownloadExcelRequired}\r\n                            fetchRecord={(event) => { this.getSampleDetails(event, editReleaseTestAttachment, \"update\") }}\r\n                            deleteRecord={this.deleteRecord}\r\n                            viewDownloadFile={this.viewReleaseTestAttachmentFile}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n\r\n                {this.state.openModal ?\r\n                    <SlideOutModal show={this.state.openModal}\r\n                        size={\"xl\"}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.state.operation}\r\n                        inputParam={this.state.inputParam}\r\n                        screenName={this.props.intl.formatMessage({ id: \"IDS_TESTATTACHMENTS\" })}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.state.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={mandatoryFields}\r\n                        addComponent={this.state.loadEsign ?\r\n                            <Esign operation={this.state.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.state.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            :\r\n                            <Row>\r\n                                {\r\n                                    <Col md={12}>\r\n                                        <DropZone\r\n                                            name='AttachmentFile'\r\n                                            label={this.props.intl.formatMessage({ id: \"IDS_FILE\" })}\r\n                                            isMandatory={true}\r\n                                            accept={this.state.selectedRecord && this.state.selectedRecord.nneedreport === transactionStatus.YES ? this.props.settings && this.props.settings[32] : \"\"}\r\n                                            maxFiles={1}\r\n                                            minSize={0}\r\n                                            maxSize={this.props.maxSize}\r\n                                            onDrop={(event) => this.onDrop(event, 'sfilename', 1)}\r\n                                            deleteAttachment={this.deleteAttachment}\r\n                                            actionType={this.actionType}\r\n                                            fileNameLength={this.fileNameLength}\r\n                                            editFiles={this.state.selectedRecord ? this.state.selectedRecord : {}}\r\n                                            attachmentTypeCode={this.state.selectedRecord && this.state.selectedRecord.selectedAttachmentFile && this.state.selectedRecord.selectedAttachmentFile.nattachmenttypecode}\r\n                                            fileSizeName=\"nfilesize\"\r\n                                            fileName=\"sfilename\"\r\n                                        />\r\n                                    </Col>\r\n                                }\r\n\r\n                                <Col md={12}>\r\n                                    <FormSelectSearch\r\n                                        formLabel={this.props.intl.formatMessage({ id: \"IDS_ARNUMBER\" })}\r\n                                        isSearchable={true}\r\n                                        name={\"npreregno\"}\r\n                                        isDisabled={this.state.operation === \"create\" ? false : true}\r\n                                        placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                        isMandatory={true}\r\n                                        options={this.state.selectedRecord ? this.state.selectedRecord.RegistrationArno : []}\r\n                                        optionId='npreregno'\r\n                                        optionValue='sarno'\r\n                                        value={this.state.selectedRecord ? this.state.selectedRecord.npreregno : \"\"}\r\n                                        onChange={(event) => this.onComboChange(event, 'npreregno')}\r\n                                        closeMenuOnSelect={true}\r\n                                        alphabeticalSort={true}\r\n                                    />\r\n                                </Col>\r\n\r\n                                <Col md={12}>\r\n                                    <FormSelectSearch\r\n                                        formLabel={this.props.intl.formatMessage({ id: \"IDS_SAMPLEARNO\" })}\r\n                                        isSearchable={true}\r\n                                        name={\"ntransactionsamplecode\"}\r\n                                        isDisabled={this.state.operation === \"create\" ? false : true}\r\n                                        placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                        isMandatory={true}\r\n                                        options={this.state.selectedRecord ? this.state.selectedRecord.RegistrationSampleArno : []}\r\n                                        optionId='ntransactionsamplecode'\r\n                                        optionValue='ssamplearno'\r\n                                        value={this.state.selectedRecord ? this.state.selectedRecord.ntransactionsamplecode : \"\"}\r\n                                        onChange={(event) => this.onComboChange(event, 'ntransactionsamplecode')}\r\n                                        closeMenuOnSelect={true}\r\n                                        alphabeticalSort={true}\r\n                                    />\r\n                                </Col>\r\n\r\n                                <Col md={12}>\r\n                                    <FormSelectSearch\r\n                                        formLabel={this.props.intl.formatMessage({ id: \"IDS_TESTSYNONYM\" })}\r\n                                        isSearchable={true}\r\n                                        name={\"ntransactiontestcode\"}\r\n                                        isDisabled={this.state.operation === \"create\" ? false : true}\r\n                                        placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                        isMandatory={true}\r\n                                        options={this.state.selectedRecord ? this.state.selectedRecord.RegistrationTest : []}\r\n                                        optionId='ntransactiontestcode'\r\n                                        optionValue='stestsynonym'\r\n                                        value={this.state.selectedRecord ? this.state.selectedRecord.ntransactiontestcode : \"\"}\r\n                                        onChange={(event) => this.onComboChange(event, 'ntransactiontestcode')}\r\n                                        closeMenuOnSelect={true}\r\n                                        alphabeticalSort={true}\r\n                                    />\r\n                                </Col>\r\n\r\n                                <Col md=\"12\" className=\"mt-4\">\r\n                                    <FormTextarea\r\n                                        name={sdescrption}\r\n                                        label={this.props.intl.formatMessage({ id: \"IDS_DESCRIPTION\" })}\r\n                                        onChange={(event) => this.onInputOnChange(event, 1)}\r\n                                        placeholder={this.props.intl.formatMessage({ id: \"IDS_DESCRIPTION\" })}\r\n                                        value={this.state.selectedRecord && this.state.selectedRecord[sdescrption] ? this.state.selectedRecord[sdescrption] : \"\"}\r\n                                        rows=\"2\"\r\n                                        required={false}\r\n                                        maxLength={255}\r\n                                    >\r\n                                    </FormTextarea>\r\n                                </Col>\r\n\r\n                                <Col md=\"12\" className=\"mt-4\">\r\n                                    <CustomSwitch\r\n                                        label={this.props.intl.formatMessage({ id: \"IDS_INCULDEINREPORT\" })}\r\n                                        type=\"switch\"\r\n                                        name={\"nneedreport\"}\r\n                                        onChange={(event) => this.onInputOnChange(event, 1)}\r\n                                        defaultValue={false}\r\n                                        isMandatory={false}\r\n                                        required={true}\r\n                                        checked={this.state.selectedRecord ? this.state.selectedRecord.nneedreport === transactionStatus.YES ? true : false : false}\r\n                                    />\r\n                                </Col>\r\n                                {/* : \"\"} */}\r\n\r\n                            </Row>\r\n                        }\r\n                    /> : \"\"}\r\n            </>\r\n        );\r\n    };\r\n\r\n    getSampleDetails = (event, ncontrolCode, operation) => {\r\n        const url = \"release/getActiveReleaseTestAttachmentById\";\r\n        let openModal = true;\r\n        if (this.props.masterData.selectedReleaseHistory.ntransactionstatus !== transactionStatus.RELEASED) {\r\n            if (operation === \"update\") {\r\n                rsapi.post(url, {\r\n                    \"ncoaparentcode\": event.editRow.ncoaparentcode,\r\n                    \"npreregno\": event.editRow.npreregno,\r\n                    \"ntransactionsamplecode\": event.editRow.ntransactionsamplecode,\r\n                    \"ntransactiontestcode\": event.editRow.ntransactiontestcode,\r\n                    \"nreleasetestattachmentcode\": event.editRow.nreleasetestattachmentcode,\r\n                    \"userinfo\": this.props.userInfo\r\n                })\r\n                    .then(response => {\r\n                        let responseData = response.data;\r\n                        if (responseData.ntransactionstatus !== transactionStatus.RELEASED) {\r\n                            let selectedReleaseTestAttachment = event.editRow;\r\n                            let masterData = this.props.masterData;\r\n                            let nneedreport = responseData && responseData.nneedreport ? responseData.nneedreport : transactionStatus.NO;\r\n                            let sdescription = responseData && responseData.sdescription ? responseData.sdescription : \"\";\r\n                            let sfilename = event.editRow && event.editRow.sfilename;\r\n                            let npreregno;\r\n                            let ntransactionsamplecode;\r\n                            let ntransactiontestcode;\r\n                            let sarno;\r\n                            let ssamplearno;\r\n                            let stestsynonym;\r\n                            masterData.RegistrationArno.map(item => {\r\n                                if (item.value === responseData.npreregno) {\r\n                                    npreregno = item;\r\n                                    sarno = item.label;\r\n                                }\r\n                            });\r\n                            masterData.RegistrationSampleArno.map(item => {\r\n                                if (item.value === responseData.ntransactionsamplecode) {\r\n                                    ntransactionsamplecode = item;\r\n                                    ssamplearno = item.label;\r\n                                }\r\n                            });\r\n                            masterData.RegistrationTest.map(item => {\r\n                                if (item.value === responseData.ntransactiontestcode) {\r\n                                    ntransactiontestcode = item;\r\n                                    stestsynonym = item.label;\r\n                                }\r\n                            });\r\n\r\n                            let selectedRecord = {\r\n                                ...this.state.selectedRecord, npreregno, ntransactionsamplecode, ntransactiontestcode, sfilename, sarno, ssamplearno, stestsynonym, nneedreport, sdescription, selectedReleaseTestAttachment\r\n                            };\r\n                            this.setState({\r\n                                selectedRecord, openModal, operation, ncontrolCode\r\n                            });\r\n                        } else {\r\n                            toast.warn(this.props.intl.formatMessage({ id: \"IDS_RECORDALREADYRELEASED\" }));\r\n                        }\r\n                    }).catch(error => {\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                        this.setState({\r\n                            loading: false\r\n                        });\r\n                    });\r\n            } else {\r\n                let RegistrationArno = this.props.masterData.RegistrationArno;\r\n                let selectedRecord = {\r\n                    RegistrationArno: RegistrationArno,\r\n                    ReleaseTestAttachmentDetails: this.props.masterData.ReleaseTestAttachmentDetails,\r\n                    nneedreport: transactionStatus.NO\r\n                };\r\n                this.setState({\r\n                    selectedRecord, openModal, operation, ncontrolCode\r\n                });\r\n            }\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_RECORDALREADYRELEASED\" }));\r\n        }\r\n    }\r\n\r\n    deleteRecord = (deleteParam) => {\r\n        const url = \"release/deleteReleaseTestAttachment\";\r\n        if (this.props.masterData.selectedReleaseHistory.ntransactionstatus !== transactionStatus.RELEASED) {\r\n            let releasetestattachment = {\r\n                \"ncoaparentcode\": deleteParam.selectedRecord.ncoaparentcode,\r\n                \"npreregno\": deleteParam.selectedRecord.npreregno,\r\n                \"ntransactionsamplecode\": deleteParam.selectedRecord.ntransactionsamplecode,\r\n                \"ntransactiontestcode\": deleteParam.selectedRecord.ntransactiontestcode,\r\n                \"nreleasetestattachmentcode\": deleteParam.selectedRecord.nreleasetestattachmentcode\r\n            }\r\n            rsapi.post(url, {\r\n                releasetestattachment, \"userinfo\": this.props.userInfo\r\n            })\r\n                .then(response => {\r\n                    let ReleaseTestAttachmentDetails = response.data.ReleaseTestAttachmentDetails;\r\n                    let selectedRecord = {\r\n                        ...this.state.selectedRecord, ...response.data\r\n                    };\r\n                    this.setState({\r\n                        selectedRecord, ReleaseTestAttachmentDetails\r\n                    });\r\n                }).catch(error => {\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                    this.setState({\r\n                        loading: false\r\n                    });\r\n                });\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_RECORDALREADYRELEASED\" }));\r\n        }\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        let lstRegistrationSampleArno = this.props.masterData.RegistrationSampleArno;\r\n        let lstRegistrationTest = this.props.masterData.RegistrationTest;\r\n        let RegistrationSampleArno = [];\r\n        let RegistrationTest = [];\r\n        let ntransactionsamplecode = \"\";\r\n        let ntransactiontestcode = \"\";\r\n        let ssamplearno = null;\r\n        let stestsynonym = null;\r\n        if (fieldName === \"npreregno\") {\r\n            lstRegistrationSampleArno.map(item => {\r\n                if (item.item.npreregno === comboData.value) {\r\n                    RegistrationSampleArno.push(item);\r\n                }\r\n            });\r\n            let npreregno = {\r\n                item: comboData.item,\r\n                label: comboData.label,\r\n                value: comboData.value\r\n            };\r\n            let sarno = comboData.item.sarno;\r\n            selectedRecord = {\r\n                ...selectedRecord, RegistrationSampleArno, RegistrationTest, npreregno\r\n                , sarno, ntransactionsamplecode, ntransactiontestcode, ssamplearno, stestsynonym\r\n            };\r\n            this.setState({ selectedRecord });\r\n        } else if (fieldName === \"ntransactionsamplecode\") {\r\n            lstRegistrationTest.map(item => {\r\n                if (item.item.ntransactionsamplecode === comboData.value) {\r\n                    RegistrationTest.push(item);\r\n                }\r\n            });\r\n            ntransactionsamplecode = {\r\n                item: comboData.item,\r\n                label: comboData.label,\r\n                value: comboData.value\r\n            }\r\n            ssamplearno = comboData.item.ssamplearno;\r\n            selectedRecord = {\r\n                ...selectedRecord, RegistrationTest, ntransactionsamplecode\r\n                , ssamplearno, ntransactiontestcode, stestsynonym\r\n            };\r\n            this.setState({ selectedRecord });\r\n        } else if (fieldName === \"ntransactiontestcode\") {\r\n            ntransactiontestcode = {\r\n                item: comboData.item,\r\n                label: comboData.label,\r\n                value: comboData.value\r\n            }\r\n            stestsynonym = comboData.item.stestsynonym;\r\n            selectedRecord = {\r\n                ...selectedRecord, ntransactiontestcode\r\n                , stestsynonym\r\n            }\r\n            this.setState({ selectedRecord });\r\n        }\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[event.target.name] = event.target.value;\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"nneedreport\") {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n            }\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        if (selectedRecord[\"nneedreport\"] && selectedRecord[\"nneedreport\"] === transactionStatus.YES && selectedRecord[\"sfilename\"] !== undefined && selectedRecord[\"sfilename\"].length > 0) {\r\n            let fileFormat = false;\r\n            let requiredFileFormat = this.props.settings && this.props.settings[32] && this.props.settings[32].split(\",\");\r\n            let fileNameSplit = selectedRecord[\"sfilename\"] && Array.isArray(selectedRecord[\"sfilename\"]) ? selectedRecord[\"sfilename\"][0].name.split(\".\") : selectedRecord[\"sfilename\"].split(\".\");\r\n            requiredFileFormat.map(item => {\r\n                if (item.slice(1) === fileNameSplit[fileNameSplit.length - 1]) {\r\n                    fileFormat = true;\r\n                }\r\n            });\r\n            selectedRecord[\"nneedreport\"] = fileFormat ? selectedRecord[\"nneedreport\"] : transactionStatus.NO;\r\n            !fileFormat && toast.warn(this.props.intl.formatMessage({ id: \"IDS_REPORTSUPPORTSONLYFILEFORMATS\" }));\r\n        }\r\n        this.setState({ selectedRecord })\r\n    }\r\n\r\n    onDrop = (attachedFiles, fieldName, maxSize) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize)\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n        this.setState({\r\n            selectedRecord\r\n        });\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({ dataState: event.dataState, dataResult: process(this.state.ReleaseTestAttachmentDetails, event.dataState) })\r\n    }\r\n\r\n    viewReleaseTestAttachmentFile = (filedata) => {\r\n        delete (filedata.inputData.userinfo);\r\n        const inputParam = {\r\n            inputData: {\r\n                releasetestattachment: filedata.inputData,\r\n                userinfo: this.props.userInfo,\r\n                ncontrolcode: filedata.ncontrolCode\r\n            },\r\n            classUrl: \"release\",\r\n            operation: \"view\",\r\n            methodUrl: \"ReleaseTestAttachment\",\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        if (this.state.loading === false) {\r\n            this.setState({ loading: true });\r\n            const formData = new FormData();\r\n            const selectedRecord = this.state.selectedRecord;\r\n            const acceptedFiles = selectedRecord.sfilename;\r\n            const userInfo = this.props.userInfo;\r\n            let isFileEdited = transactionStatus.NO;\r\n            let fileArray = [];\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                if (this.state.operation === 'create') {\r\n                    acceptedFiles.forEach((file, index) => {\r\n                        const splittedFileName = file.name.split('.');\r\n                        const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                        const fileName = selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ?\r\n                            selectedRecord.ssystemfilename.split('.')[0] : create_UUID();\r\n                        const uniquefilename = fileName + '.' + fileExtension;\r\n                        const tempData = {};\r\n                        tempData[\"nformcode\"] = userInfo.nformcode;\r\n                        tempData[\"npreregno\"] = selectedRecord.npreregno.value;\r\n                        tempData[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode.value;\r\n                        tempData[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode.value;\r\n                        tempData[\"ncoaparentcode\"] = this.props.masterData.ncoaparentcode;\r\n                        tempData[\"nusercode\"] = userInfo.nusercode;\r\n                        tempData[\"nuserrolecode\"] = userInfo.nuserrole;\r\n                        tempData[\"jsondata\"] = {\r\n                            stestsynonym: selectedRecord.ntransactiontestcode.label,\r\n                            susername: userInfo.susername,\r\n                            suserrolename: userInfo.suserrolename,\r\n                            nfilesize: file.size,\r\n                            ssystemfilename: uniquefilename,\r\n                            sfilename: Lims_JSON_stringify(file.name.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\r\n                            slinkname: \"\",\r\n                            sdescription: Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\r\n                            nneedreport: selectedRecord.nneedreport ? selectedRecord.nneedreport : transactionStatus.NO\r\n                        }\r\n                        formData.append(\"uploadedFile\" + index, file);\r\n                        formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                        fileArray.push(tempData);\r\n                    });\r\n                    formData.append(\"filecount\", acceptedFiles.length);\r\n                    isFileEdited = transactionStatus.YES;\r\n                } else {\r\n                    acceptedFiles.forEach((file, index) => {\r\n                        const splittedFileName = file.name.split('.');\r\n                        const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                        const fileName = selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ?\r\n                            selectedRecord.ssystemfilename.split('.')[0] : create_UUID();\r\n                        const uniquefilename = fileName + '.' + fileExtension;\r\n                        const tempData = {};\r\n                        tempData[\"nreleasetestattachmentcode\"] = selectedRecord.selectedReleaseTestAttachment && selectedRecord.selectedReleaseTestAttachment.nreleasetestattachmentcode;\r\n                        tempData[\"nformcode\"] = userInfo.nformcode;\r\n                        tempData[\"npreregno\"] = selectedRecord.npreregno.value;\r\n                        tempData[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode.value;\r\n                        tempData[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode.value;\r\n                        tempData[\"ncoaparentcode\"] = this.props.masterData.ncoaparentcode;\r\n                        tempData[\"nusercode\"] = userInfo.nusercode;\r\n                        tempData[\"nuserrolecode\"] = userInfo.nuserrole;\r\n                        tempData[\"jsondata\"] = {\r\n                            stestsynonym: selectedRecord.ntransactiontestcode.label,\r\n                            susername: userInfo.susername,\r\n                            suserrolename: userInfo.suserrolename,\r\n                            nfilesize: file.size,\r\n                            ssystemfilename: uniquefilename,\r\n                            sfilename: Lims_JSON_stringify(file.name.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\r\n                            slinkname: \"\",\r\n                            sdescription: Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\r\n                            nneedreport: selectedRecord.nneedreport ? selectedRecord.nneedreport : transactionStatus.NO\r\n                        }\r\n                        formData.append(\"uploadedFile\" + index, file);\r\n                        formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                        formData.append(\"filecount\", acceptedFiles.length);\r\n                        isFileEdited = transactionStatus.YES;\r\n\r\n                        fileArray.push(tempData);\r\n                    });\r\n                }\r\n            } else {\r\n                let tempData = {};\r\n                tempData[\"nreleasetestattachmentcode\"] = selectedRecord.selectedReleaseTestAttachment && selectedRecord.selectedReleaseTestAttachment.nreleasetestattachmentcode;\r\n                tempData[\"nformcode\"] = userInfo.nformcode;\r\n                tempData[\"npreregno\"] = selectedRecord.npreregno.value;\r\n                tempData[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode.value;\r\n                tempData[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode.value;\r\n                tempData[\"ncoaparentcode\"] = this.props.masterData.ncoaparentcode;\r\n                tempData[\"nusercode\"] = userInfo.nusercode;\r\n                tempData[\"nuserrolecode\"] = userInfo.nuserrole;\r\n                tempData[\"jsondata\"] = {\r\n                    stestsynonym: selectedRecord.ntransactiontestcode.label,\r\n                    susername: userInfo.susername,\r\n                    suserrolename: userInfo.suserrolename,\r\n                    nfilesize: selectedRecord.size,\r\n                    ssystemfilename: selectedRecord.ssystemfilename,\r\n                    sfilename: Lims_JSON_stringify(acceptedFiles.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\r\n                    slinkname: \"\",\r\n                    sdescription: Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\r\n                    nneedreport: selectedRecord.nneedreport ? selectedRecord.nneedreport : transactionStatus.NO\r\n                }\r\n                fileArray.push(tempData);\r\n            }\r\n            formData.append(\"isFileEdited\", isFileEdited);\r\n            formData.append(\"releasetestattachment\", JSON.stringify(fileArray));\r\n            formData.append(\"nattachmenttypecode\", attachmentType.FTP);\r\n            formData.append(\"ncoaparentcode\", this.props.masterData.ncoaparentcode);\r\n            formData.append(\"ncontrolcode\", this.state.ncontrolCode);\r\n            formData.append(\"userinfo\", JSON.stringify({\r\n                ...userInfo,\r\n                sformname: Lims_JSON_stringify(userInfo.sformname),\r\n                smodulename: Lims_JSON_stringify(userInfo.smodulename),\r\n                slanguagename: Lims_JSON_stringify(userInfo.slanguagename)\r\n            }));\r\n\r\n            const inputParam = {\r\n                inputData: {\r\n                    \"userinfo\": {\r\n                        ...userInfo,\r\n                        sformname: Lims_JSON_stringify(userInfo.sformname),\r\n                        smodulename: Lims_JSON_stringify(userInfo.smodulename),\r\n                        slanguagename: Lims_JSON_stringify(userInfo.slanguagename)\r\n                    }\r\n                },\r\n                formData: formData,\r\n                isFileupload: true,\r\n                operation: this.state.operation,\r\n                classUrl: \"release\",\r\n                saveType: saveType,\r\n                formRef: formRef,\r\n                methodUrl: \"ReleaseTestAttachment\"\r\n            };\r\n            formData.append(\"userinfo\", JSON.stringify(inputParam.inputData.userinfo));\r\n\r\n            const requestUrl = rsapi.post(\"release/\" + this.state.operation + \"ReleaseTestAttachment\", formData);\r\n            return requestUrl\r\n                .then(response => {\r\n                    let ReleaseTestAttachmentDetails = response.data.ReleaseTestAttachmentDetails;\r\n                    let selectedRecord = {};\r\n                    let openModal = false;\r\n                    this.setState({ selectedRecord, openModal, ReleaseTestAttachmentDetails, loading: false });\r\n\r\n                }).catch(error => {\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                    this.setState({\r\n                        loading: false\r\n                    });\r\n                });\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default connect(null, { viewAttachment })(injectIntl(ReleaseTestAttachment));"]},"metadata":{},"sourceType":"module"}