{"ast":null,"code":"import rsapi from '../rsapi';\nimport { DEFAULT_RETURN } from './LoginTypes';\nimport { toast } from 'react-toastify';\nimport { intl } from '../components/App';\nimport { initRequest } from './LoginAction';\nimport { constructOptionList, parentChildComboLoad, constructjsonOptionList, constructjsonOptionDefault, childComboLoad, rearrangeDateFormatforUI, childComboLoadForEdit } from '../components/CommonScript';\nimport Axios from 'axios';\nimport { getTreeByProduct } from './RegistrationAction';\nexport function getDynamicMasterCombo(masterData, userinfo, editId, columnList, selectedRecord, childColumnList, comboComponents, withoutCombocomponent, openPortal, openModal, mapOfFilterRegData, preview, operation, screenName) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\n    const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n      parentcolumnlist: columnList.filter(x => x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter' && x.readonly !== true),\n      childcolumnlist: childColumnList,\n      userinfo\n    });\n    let urlArray = [timeZoneService, actualService]; //const operation = fetchRecordParam.operation;\n    // if (operation === \"update\"){\n    //     const url = \"dynamicmaster/getActiveDynamicMasterById\";\n    //     urlArray.push(rsapi.post(url, {\n    //       [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue, \"userinfo\": fetchRecordParam.userInfo\n    //     }));\n    // }\n\n    Axios.all(urlArray).then(response => {\n      const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const timeZoneList = timeZoneMap.get(\"OptionList\");\n      const defaultTimeZone = {\n        label: userinfo.stimezoneid,\n        value: userinfo.ntimezonecode\n      }; // if (operation === \"update\"){\n      //     selectedRecord = response[2].data;\n      // }\n\n      const newcomboData = parentChildComboLoad(columnList.filter(x => x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter' && x.readonly !== true), response[1].data, selectedRecord, childColumnList, withoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo); // sortData(masterData)\n\n      const comboData1 = newcomboData.comboData;\n      const selectedRecord1 = newcomboData.selectedRecord;\n      withoutCombocomponent.map(componentrow => {\n        if (componentrow.inputtype === \"date\") {\n          if (componentrow.mandatory) {\n            selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? new Date() : \"\";\n          }\n        } else if (componentrow.inputtype === \"radio\") {\n          selectedRecord1[componentrow.label] = componentrow.radioOptions ? componentrow.radioOptions.tags[0].text : \"\";\n        }\n      });\n\n      if (preview) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            timeZoneList,\n            defaultTimeZone,\n            masterData,\n            ncontrolcode: editId,\n            openModal,\n            loading: false,\n            comboData: comboData1,\n            selectedRecord: selectedRecord1,\n            comboComponents,\n            withoutCombocomponent,\n            openPortal,\n            columnList,\n            childColumnList,\n            screenName,\n            operation\n          }\n        });\n      } else {\n        if (mapOfFilterRegData.nsampletypecode === 1) {\n          const ProductCategory = comboComponents.filter(x => x.name === 'Product Category');\n\n          if (ProductCategory.length > 0) {\n            const nproductcatcode = newcomboData.selectedRecord[ProductCategory[0].label] && newcomboData.selectedRecord[ProductCategory[0].label].value;\n            const ncategorybasedFlow = newcomboData.selectedRecord[ProductCategory[0].label] && newcomboData.selectedRecord[ProductCategory[0].label]['item']['jsondata']['ncategorybasedflow'];\n\n            if (ncategorybasedFlow !== undefined) {\n              if (ncategorybasedFlow === 3) {\n                mapOfFilterRegData['nproductcode'] = -1;\n                mapOfFilterRegData['nproductcatcode'] = nproductcatcode;\n                const inputParam = {\n                  timeZoneList,\n                  defaultTimeZone,\n                  masterData,\n                  ncontrolcode: editId,\n                  openModal,\n                  comboComponents,\n                  withoutCombocomponent,\n                  openPortal,\n                  columnList,\n                  childColumnList,\n                  operation,\n                  screenName\n                };\n                dispatch(getTreeByProduct(mapOfFilterRegData, newcomboData.selectedRecord, newcomboData.comboData, inputParam));\n              } else {\n                const Product = comboComponents.filter(x => x.name === 'Product');\n\n                if (Product.length > 0) {\n                  const nproductcode = newcomboData.selectedRecord[Product[0].label] && newcomboData.selectedRecord[Product[0].label].value;\n                  mapOfFilterRegData['nproductcode'] = nproductcode !== undefined ? nproductcode : -1;\n                  mapOfFilterRegData['nproductcatcode'] = nproductcatcode;\n                  const inputParam = {\n                    timeZoneList,\n                    defaultTimeZone,\n                    masterData,\n                    ncontrolcode: editId,\n                    openModal,\n                    comboComponents,\n                    withoutCombocomponent,\n                    openPortal,\n                    columnList,\n                    childColumnList,\n                    operation,\n                    screenName\n                  };\n                  dispatch(getTreeByProduct(mapOfFilterRegData, newcomboData.selectedRecord, newcomboData.comboData, inputParam));\n                } else {\n                  dispatch({\n                    type: DEFAULT_RETURN,\n                    payload: {\n                      timeZoneList,\n                      defaultTimeZone,\n                      masterData,\n                      ncontrolcode: editId,\n                      openModal,\n                      loading: false,\n                      comboData: newcomboData.comboData,\n                      selectedRecord: newcomboData.selectedRecord,\n                      comboComponents,\n                      withoutCombocomponent,\n                      openPortal,\n                      columnList,\n                      childColumnList,\n                      operation,\n                      screenName\n                    }\n                  });\n                }\n              }\n            } else {\n              dispatch({\n                type: DEFAULT_RETURN,\n                payload: {\n                  timeZoneList,\n                  defaultTimeZone,\n                  masterData,\n                  ncontrolcode: editId,\n                  openModal,\n                  loading: false,\n                  comboData: newcomboData.comboData,\n                  selectedRecord: newcomboData.selectedRecord,\n                  comboComponents,\n                  withoutCombocomponent,\n                  openPortal,\n                  columnList,\n                  childColumnList,\n                  operation,\n                  screenName\n                }\n              });\n            }\n          } else {\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                timeZoneList,\n                defaultTimeZone,\n                masterData,\n                ncontrolcode: editId,\n                openModal,\n                loading: false,\n                comboData: newcomboData.comboData,\n                selectedRecord: newcomboData.selectedRecord,\n                comboComponents,\n                withoutCombocomponent,\n                openPortal,\n                operation,\n                screenName\n              }\n            });\n          }\n        } else if (mapOfFilterRegData.nsampletypecode === 2) {\n          const InstrumentCategory = comboComponents.filter(x => x.name === 'Instrument Category');\n\n          if (InstrumentCategory.length > 0) {\n            const ninstrumentcatcode = newcomboData.selectedRecord[InstrumentCategory[0].label] && newcomboData.selectedRecord[InstrumentCategory[0].label].value;\n            const ncategorybasedFlow = newcomboData.selectedRecord[InstrumentCategory[0].label] && newcomboData.selectedRecord[InstrumentCategory[0].label]['item']['jsondata']['ncategorybasedflow'];\n\n            if (ncategorybasedFlow !== undefined) {\n              if (ncategorybasedFlow === 3) {\n                mapOfFilterRegData['nproductcode'] = -1;\n                mapOfFilterRegData['nproductcatcode'] = ninstrumentcatcode;\n                const inputParam = {\n                  timeZoneList,\n                  defaultTimeZone,\n                  masterData,\n                  ncontrolcode: editId,\n                  openModal,\n                  comboComponents,\n                  withoutCombocomponent,\n                  openPortal,\n                  columnList,\n                  childColumnList,\n                  operation,\n                  screenName\n                };\n                dispatch(getTreeByProduct(mapOfFilterRegData, newcomboData.selectedRecord, newcomboData.comboData, inputParam));\n              } else {\n                const Instrument = comboComponents.filter(x => x.name === 'Instrument');\n\n                if (Instrument.length > 0) {\n                  const ninstrumentcode = newcomboData.selectedRecord[Instrument[0].label] && newcomboData.selectedRecord[Instrument[0].label].value;\n                  mapOfFilterRegData['nproductcode'] = ninstrumentcode !== undefined ? ninstrumentcode : -1;\n                  mapOfFilterRegData['nproductcatcode'] = ninstrumentcatcode;\n                  const inputParam = {\n                    timeZoneList,\n                    defaultTimeZone,\n                    masterData,\n                    ncontrolcode: editId,\n                    openModal,\n                    comboComponents,\n                    withoutCombocomponent,\n                    openPortal,\n                    columnList,\n                    childColumnList,\n                    operation,\n                    screenName\n                  };\n                  dispatch(getTreeByProduct(mapOfFilterRegData, newcomboData.selectedRecord, newcomboData.comboData, inputParam));\n                } else {\n                  dispatch({\n                    type: DEFAULT_RETURN,\n                    payload: {\n                      timeZoneList,\n                      defaultTimeZone,\n                      masterData,\n                      ncontrolcode: editId,\n                      openModal,\n                      loading: false,\n                      comboData: newcomboData.comboData,\n                      selectedRecord: newcomboData.selectedRecord,\n                      comboComponents,\n                      withoutCombocomponent,\n                      openPortal,\n                      columnList,\n                      childColumnList,\n                      operation,\n                      screenName\n                    }\n                  });\n                }\n              }\n            } else {\n              dispatch({\n                type: DEFAULT_RETURN,\n                payload: {\n                  timeZoneList,\n                  defaultTimeZone,\n                  masterData,\n                  ncontrolcode: editId,\n                  openModal,\n                  loading: false,\n                  comboData: newcomboData.comboData,\n                  selectedRecord: newcomboData.selectedRecord,\n                  comboComponents,\n                  withoutCombocomponent,\n                  openPortal,\n                  columnList,\n                  childColumnList,\n                  operation,\n                  screenName\n                }\n              });\n            }\n          } else {\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                timeZoneList,\n                defaultTimeZone,\n                masterData,\n                ncontrolcode: editId,\n                openModal,\n                loading: false,\n                comboData: newcomboData.comboData,\n                selectedRecord: newcomboData.selectedRecord,\n                comboComponents,\n                withoutCombocomponent,\n                openPortal,\n                operation,\n                screenName\n              }\n            });\n          }\n        } else if (mapOfFilterRegData.nsampletypecode === 3) {\n          const MaterialType = comboComponents.filter(x => x.name === 'Material Type');\n\n          if (MaterialType.length > 0) {\n            const nmaterialtypecode = newcomboData.selectedRecord[MaterialType[0].label] && newcomboData.selectedRecord[MaterialType[0].label].value;\n\n            if (nmaterialtypecode !== undefined) {\n              const MaterialCategory = comboComponents.filter(x => x.name === 'Material Category');\n\n              if (MaterialCategory.length > 0) {\n                const nmaterialcatcode = newcomboData.selectedRecord[MaterialCategory[0].label] && newcomboData.selectedRecord[MaterialCategory[0].label].value;\n                const ncategorybasedFlow = newcomboData.selectedRecord[MaterialCategory[0].label] && newcomboData.selectedRecord[MaterialCategory[0].label]['item']['jsondata']['ncategorybasedflow'];\n\n                if (ncategorybasedFlow !== undefined) {\n                  if (ncategorybasedFlow === 3) {\n                    mapOfFilterRegData['nproductcode'] = -1;\n                    mapOfFilterRegData['nproductcatcode'] = nmaterialcatcode;\n                    const inputParam = {\n                      timeZoneList,\n                      defaultTimeZone,\n                      masterData,\n                      ncontrolcode: editId,\n                      openModal,\n                      comboComponents,\n                      withoutCombocomponent,\n                      openPortal,\n                      columnList,\n                      childColumnList,\n                      operation,\n                      screenName\n                    };\n                    dispatch(getTreeByProduct(mapOfFilterRegData, newcomboData.selectedRecord, newcomboData.comboData, inputParam));\n                  } else {\n                    const Material = comboComponents.filter(x => x.name === 'Material');\n\n                    if (Material.length > 0) {\n                      const nmaterialcode = newcomboData.selectedRecord[Material[0].label] && newcomboData.selectedRecord[Material[0].label].value;\n                      mapOfFilterRegData['nproductcode'] = nmaterialcode !== undefined ? nmaterialcode : -1;\n                      mapOfFilterRegData['nproductcatcode'] = nmaterialcatcode;\n                      const inputParam = {\n                        timeZoneList,\n                        defaultTimeZone,\n                        masterData,\n                        ncontrolcode: editId,\n                        openModal,\n                        comboComponents,\n                        withoutCombocomponent,\n                        openPortal,\n                        columnList,\n                        childColumnList,\n                        operation,\n                        screenName\n                      };\n                      dispatch(getTreeByProduct(mapOfFilterRegData, newcomboData.selectedRecord, newcomboData.comboData, inputParam));\n                    } else {\n                      dispatch({\n                        type: DEFAULT_RETURN,\n                        payload: {\n                          timeZoneList,\n                          defaultTimeZone,\n                          masterData,\n                          ncontrolcode: editId,\n                          openModal,\n                          loading: false,\n                          comboData: newcomboData.comboData,\n                          selectedRecord: newcomboData.selectedRecord,\n                          comboComponents,\n                          withoutCombocomponent,\n                          openPortal,\n                          columnList,\n                          childColumnList,\n                          operation,\n                          screenName\n                        }\n                      });\n                    }\n                  }\n                } else {\n                  dispatch({\n                    type: DEFAULT_RETURN,\n                    payload: {\n                      timeZoneList,\n                      defaultTimeZone,\n                      masterData,\n                      ncontrolcode: editId,\n                      openModal,\n                      loading: false,\n                      comboData: newcomboData.comboData,\n                      selectedRecord: newcomboData.selectedRecord,\n                      comboComponents,\n                      withoutCombocomponent,\n                      openPortal,\n                      columnList,\n                      childColumnList,\n                      operation,\n                      screenName\n                    }\n                  });\n                }\n              } else {\n                dispatch({\n                  type: DEFAULT_RETURN,\n                  payload: {\n                    timeZoneList,\n                    defaultTimeZone,\n                    masterData,\n                    ncontrolcode: editId,\n                    openModal,\n                    loading: false,\n                    comboData: newcomboData.comboData,\n                    selectedRecord: newcomboData.selectedRecord,\n                    comboComponents,\n                    withoutCombocomponent,\n                    openPortal,\n                    operation,\n                    screenName\n                  }\n                });\n              }\n            }\n          } else {\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                timeZoneList,\n                defaultTimeZone,\n                masterData,\n                ncontrolcode: editId,\n                openModal,\n                loading: false,\n                comboData: newcomboData.comboData,\n                selectedRecord: newcomboData.selectedRecord,\n                comboComponents,\n                withoutCombocomponent,\n                openPortal,\n                columnList,\n                childColumnList,\n                operation,\n                screenName\n              }\n            });\n          }\n        } else {}\n      }\n    }).catch(error => {\n      console.log(\"error:\", error);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getEditDynamicMasterCombo(inputParam, columnList, selectedRecord1, childColumnList, comboComponents, withoutCombocomponent) {\n  return function (dispatch) {\n    console.log(\"input:\", inputParam);\n    dispatch(initRequest(true));\n    const {\n      userInfo\n    } = { ...inputParam\n    };\n    let urlArray = [];\n    const timeZoneService = rsapi.post(\"timezone/getTimeZone\"); // const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n    //     parentcolumnlist: columnList,\n    //     childcolumnlist: childColumnList,\n    //     userinfo: inputParam.userInfo\n    // })\n\n    const selectedMaster = rsapi.post(\"/dynamicmaster/getActiveDynamicMasterById\", {\n      \"userinfo\": inputParam.userInfo,\n      [inputParam.primaryKeyField]: inputParam.primaryKeyValue,\n      parentcolumnlist: columnList,\n      childcolumnlist: childColumnList\n    });\n    urlArray = [timeZoneService, selectedMaster];\n    Axios.all(urlArray).then(response => {\n      // let selectedRecord = { ...response[1].data };\n      let selectedRecord = { ...response[1].data[\"EditData\"]\n      }; // selectedRecord = { ...selectedRecord, ...selectedRecord['jsondata'] }\n\n      console.log(\"selectedRecord:\", selectedRecord);\n      const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const timeZoneList = timeZoneMap.get(\"OptionList\");\n      const defaultTimeZone = {\n        label: userInfo.stimezoneid,\n        value: userInfo.ntimezonecode\n      };\n      const languagetypeCode = undefined;\n      const comboData = response[1].data;\n      delete comboData['EditData'];\n      let comboValues = {};\n\n      if (columnList.length > 0) {\n        columnList.map(x => {\n          if (x.inputtype === 'combo') {\n            if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \n              {\n                if (comboData[x.label].length > 0) {\n                  if (comboData[x.label][0].label === undefined) {\n                    const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x);\n                    comboData[x.label] = optionList.get(\"OptionList\");\n                  } else {\n                    comboData[x.label] = comboData[x.label];\n                    const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x);\n                  }\n                } else {\n                  comboData[x.label] = [];\n                }\n\n                comboValues = childComboLoadForEdit(x, comboData, selectedRecord, childColumnList, withoutCombocomponent);\n              } else {\n              comboValues = {\n                \"comboData\": comboData\n              };\n            }\n          } else {\n            comboValues = {\n              comboData: comboData,\n              ...comboValues\n            };\n          }\n        });\n      } else {\n        comboValues = {\n          \"comboData\": comboData\n        };\n      }\n\n      if (withoutCombocomponent.length > 0) {\n        withoutCombocomponent.map(item => {\n          if (item.inputtype === \"date\") {\n            if (selectedRecord[item.label]) {\n              selectedRecord = { ...selectedRecord,\n                [item.label]: rearrangeDateFormatforUI(userInfo, selectedRecord[item.label])\n              };\n            }\n          }\n        });\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          operation: \"update\",\n          screenName: inputParam.screenName,\n          timeZoneList,\n          defaultTimeZone,\n          selectedRecord,\n          openModal: true,\n          ncontrolCode: inputParam.ncontrolCode,\n          loading: false,\n          comboData: comboValues.comboData,\n          childColumnList,\n          comboComponents,\n          withoutCombocomponent,\n          columnList,\n          selectedId: inputParam.primaryKeyValue\n        }\n      });\n    }).catch(error => {\n      console.log(\"error:\", error);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/DynamicMasterAction.js"],"names":["rsapi","DEFAULT_RETURN","toast","intl","initRequest","constructOptionList","parentChildComboLoad","constructjsonOptionList","constructjsonOptionDefault","childComboLoad","rearrangeDateFormatforUI","childComboLoadForEdit","Axios","getTreeByProduct","getDynamicMasterCombo","masterData","userinfo","editId","columnList","selectedRecord","childColumnList","comboComponents","withoutCombocomponent","openPortal","openModal","mapOfFilterRegData","preview","operation","screenName","dispatch","timeZoneService","post","actualService","parentcolumnlist","filter","x","inputtype","readonly","childcolumnlist","urlArray","all","then","response","timeZoneMap","data","undefined","timeZoneList","get","defaultTimeZone","label","stimezoneid","value","ntimezonecode","newcomboData","slanguagetypecode","comboData1","comboData","selectedRecord1","map","componentrow","mandatory","loadcurrentdate","Date","radioOptions","tags","text","type","payload","ncontrolcode","loading","nsampletypecode","ProductCategory","name","length","nproductcatcode","ncategorybasedFlow","inputParam","Product","nproductcode","InstrumentCategory","ninstrumentcatcode","Instrument","ninstrumentcode","MaterialType","nmaterialtypecode","MaterialCategory","nmaterialcatcode","Material","nmaterialcode","catch","error","console","log","status","message","warn","getEditDynamicMasterCombo","userInfo","selectedMaster","primaryKeyField","primaryKeyValue","languagetypeCode","comboValues","optionList","valuemember","displaymember","source","isMultiLingual","item","ncontrolCode","selectedId","formatMessage","id"],"mappings":"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","sourcesContent":["\r\nimport rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { toast } from 'react-toastify';\r\nimport { intl } from '../components/App';\r\nimport { initRequest } from './LoginAction';\r\nimport {\r\n    constructOptionList, parentChildComboLoad, constructjsonOptionList,\r\n    constructjsonOptionDefault, childComboLoad, rearrangeDateFormatforUI, childComboLoadForEdit\r\n} from '../components/CommonScript';\r\nimport Axios from 'axios';\r\nimport { getTreeByProduct } from './RegistrationAction';\r\n\r\nexport function getDynamicMasterCombo(masterData, userinfo,\r\n    editId, columnList, selectedRecord, childColumnList, comboComponents,\r\n    withoutCombocomponent, openPortal, openModal, mapOfFilterRegData, preview, operation,\r\n    screenName) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n            parentcolumnlist: columnList.filter(x=>(x.inputtype!=='backendsearchfilter'&&x.inputtype!=='frontendsearchfilter')&&(x.readonly!==true)),\r\n            childcolumnlist: childColumnList,\r\n            userinfo\r\n        })\r\n        let urlArray = [timeZoneService, actualService];\r\n        //const operation = fetchRecordParam.operation;\r\n        // if (operation === \"update\"){\r\n        //     const url = \"dynamicmaster/getActiveDynamicMasterById\";\r\n        //     urlArray.push(rsapi.post(url, {\r\n        //       [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue, \"userinfo\": fetchRecordParam.userInfo\r\n        //     }));\r\n        // }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userinfo.stimezoneid, value: userinfo.ntimezonecode }\r\n                // if (operation === \"update\"){\r\n                //     selectedRecord = response[2].data;\r\n                // }\r\n                const newcomboData = parentChildComboLoad(columnList.filter(x=>(x.inputtype!=='backendsearchfilter'&&x.inputtype!=='frontendsearchfilter')&&(x.readonly!==true)), response[1].data, selectedRecord, childColumnList,\r\n                    withoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo)\r\n                // sortData(masterData)\r\n\r\n                const comboData1 = newcomboData.comboData\r\n                const selectedRecord1 = newcomboData.selectedRecord\r\n                withoutCombocomponent.map(componentrow => {\r\n                    if (componentrow.inputtype === \"date\") {\r\n                        if (componentrow.mandatory) {\r\n                            selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? new Date() : \"\";\r\n                        }\r\n                    }\r\n                    else if (componentrow.inputtype === \"radio\") {\r\n                        selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                            componentrow.radioOptions.tags[0].text : \"\";\r\n                    }\r\n\r\n                })\r\n\r\n                if (preview) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            timeZoneList,\r\n                            defaultTimeZone,\r\n                            masterData,\r\n                            ncontrolcode: editId,\r\n                            openModal,\r\n                            loading: false,\r\n                            comboData: comboData1,\r\n                            selectedRecord: selectedRecord1,\r\n                            comboComponents,\r\n                            withoutCombocomponent,\r\n                            openPortal,\r\n                            columnList,\r\n                            childColumnList,\r\n                            screenName,\r\n                            operation\r\n                        }\r\n                    })\r\n                }\r\n                else {\r\n                    if (mapOfFilterRegData.nsampletypecode === 1) {\r\n                        const ProductCategory = comboComponents.filter(x => x.name === 'Product Category');\r\n                        if (ProductCategory.length > 0) {\r\n                            const nproductcatcode = newcomboData.selectedRecord[ProductCategory[0].label] &&\r\n                                newcomboData.selectedRecord[ProductCategory[0].label].value\r\n                            const ncategorybasedFlow = newcomboData.selectedRecord[ProductCategory[0].label]\r\n                                && newcomboData.selectedRecord[ProductCategory[0].label]['item']['jsondata']['ncategorybasedflow'];\r\n                            if (ncategorybasedFlow !== undefined) {\r\n                                if (ncategorybasedFlow === 3) {\r\n                                    mapOfFilterRegData['nproductcode'] = -1;\r\n                                    mapOfFilterRegData['nproductcatcode'] = nproductcatcode\r\n                                    const inputParam = {\r\n                                        timeZoneList,\r\n                                        defaultTimeZone,\r\n                                        masterData,\r\n                                        ncontrolcode: editId,\r\n                                        openModal,\r\n                                        comboComponents,\r\n                                        withoutCombocomponent,\r\n                                        openPortal,\r\n                                        columnList,\r\n                                        childColumnList,\r\n                                        operation,\r\n                                        screenName\r\n                                    }\r\n                                    dispatch(getTreeByProduct(mapOfFilterRegData,\r\n                                        newcomboData.selectedRecord,\r\n                                        newcomboData.comboData, inputParam))\r\n                                }\r\n                                else {\r\n                                    const Product = comboComponents.filter(x => x.name === 'Product');\r\n                                    if (Product.length > 0) {\r\n                                        const nproductcode = newcomboData.selectedRecord[Product[0].label]\r\n                                            && newcomboData.selectedRecord[Product[0].label].value;\r\n\r\n                                        mapOfFilterRegData['nproductcode'] = nproductcode !== undefined ? nproductcode : -1;\r\n                                        mapOfFilterRegData['nproductcatcode'] = nproductcatcode\r\n\r\n                                        const inputParam = {\r\n                                            timeZoneList,\r\n                                            defaultTimeZone,\r\n                                            masterData,\r\n                                            ncontrolcode: editId,\r\n                                            openModal,\r\n                                            comboComponents,\r\n                                            withoutCombocomponent,\r\n                                            openPortal,\r\n                                            columnList,\r\n                                            childColumnList,\r\n                                            operation,\r\n                                            screenName\r\n                                        }\r\n                                        dispatch(getTreeByProduct(mapOfFilterRegData,\r\n                                            newcomboData.selectedRecord,\r\n                                            newcomboData.comboData, inputParam))\r\n                                    } else {\r\n                                        dispatch({\r\n                                            type: DEFAULT_RETURN,\r\n                                            payload: {\r\n                                                timeZoneList,\r\n                                                defaultTimeZone,\r\n                                                masterData,\r\n                                                ncontrolcode: editId,\r\n                                                openModal,\r\n                                                loading: false,\r\n                                                comboData: newcomboData.comboData,\r\n                                                selectedRecord: newcomboData.selectedRecord,\r\n                                                comboComponents,\r\n                                                withoutCombocomponent,\r\n                                                openPortal,\r\n                                                columnList,\r\n                                                childColumnList,\r\n                                                operation,\r\n                                                screenName\r\n                                            }\r\n                                        })\r\n                                    }\r\n                                }\r\n\r\n                            } else {\r\n                                dispatch({\r\n                                    type: DEFAULT_RETURN,\r\n                                    payload: {\r\n                                        timeZoneList,\r\n                                        defaultTimeZone,\r\n                                        masterData,\r\n                                        ncontrolcode: editId,\r\n                                        openModal,\r\n                                        loading: false,\r\n                                        comboData: newcomboData.comboData,\r\n                                        selectedRecord: newcomboData.selectedRecord,\r\n                                        comboComponents,\r\n                                        withoutCombocomponent,\r\n                                        openPortal,\r\n                                        columnList,\r\n                                        childColumnList,\r\n                                        operation,\r\n                                        screenName\r\n                                    }\r\n                                })\r\n                            }\r\n                        } else {\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    timeZoneList,\r\n                                    defaultTimeZone,\r\n                                    masterData,\r\n                                    ncontrolcode: editId,\r\n                                    openModal,\r\n                                    loading: false,\r\n                                    comboData: newcomboData.comboData,\r\n                                    selectedRecord: newcomboData.selectedRecord,\r\n                                    comboComponents,\r\n                                    withoutCombocomponent,\r\n                                    openPortal,\r\n                                    operation,\r\n                                    screenName\r\n                                }\r\n                            })\r\n                        }\r\n                    } else if (mapOfFilterRegData.nsampletypecode === 2) {\r\n                        const InstrumentCategory = comboComponents.filter(x => x.name === 'Instrument Category');\r\n                        if (InstrumentCategory.length > 0) {\r\n                            const ninstrumentcatcode = newcomboData.selectedRecord[InstrumentCategory[0].label] &&\r\n                                newcomboData.selectedRecord[InstrumentCategory[0].label].value\r\n                            const ncategorybasedFlow = newcomboData.selectedRecord[InstrumentCategory[0].label]\r\n                                && newcomboData.selectedRecord[InstrumentCategory[0].label]['item']['jsondata']['ncategorybasedflow'];\r\n                            if (ncategorybasedFlow !== undefined) {\r\n                                if (ncategorybasedFlow === 3) {\r\n                                    mapOfFilterRegData['nproductcode'] = -1;\r\n                                    mapOfFilterRegData['nproductcatcode'] = ninstrumentcatcode\r\n                                    const inputParam = {\r\n                                        timeZoneList,\r\n                                        defaultTimeZone,\r\n                                        masterData,\r\n                                        ncontrolcode: editId,\r\n                                        openModal,\r\n                                        comboComponents,\r\n                                        withoutCombocomponent,\r\n                                        openPortal,\r\n                                        columnList,\r\n                                        childColumnList,\r\n                                        operation,\r\n                                        screenName\r\n                                    }\r\n                                    dispatch(getTreeByProduct(mapOfFilterRegData,\r\n                                        newcomboData.selectedRecord,\r\n                                        newcomboData.comboData, inputParam))\r\n                                }\r\n                                else {\r\n                                    const Instrument = comboComponents.filter(x => x.name === 'Instrument');\r\n                                    if (Instrument.length > 0) {\r\n                                        const ninstrumentcode = newcomboData.selectedRecord[Instrument[0].label]\r\n                                            && newcomboData.selectedRecord[Instrument[0].label].value;\r\n\r\n                                        mapOfFilterRegData['nproductcode'] = ninstrumentcode !== undefined ? ninstrumentcode : -1;\r\n                                        mapOfFilterRegData['nproductcatcode'] = ninstrumentcatcode\r\n\r\n                                        const inputParam = {\r\n                                            timeZoneList,\r\n                                            defaultTimeZone,\r\n                                            masterData,\r\n                                            ncontrolcode: editId,\r\n                                            openModal,\r\n                                            comboComponents,\r\n                                            withoutCombocomponent,\r\n                                            openPortal,\r\n                                            columnList,\r\n                                            childColumnList,\r\n                                            operation,\r\n                                            screenName\r\n                                        }\r\n                                        dispatch(getTreeByProduct(mapOfFilterRegData,\r\n                                            newcomboData.selectedRecord,\r\n                                            newcomboData.comboData, inputParam))\r\n                                    } else {\r\n                                        dispatch({\r\n                                            type: DEFAULT_RETURN,\r\n                                            payload: {\r\n                                                timeZoneList,\r\n                                                defaultTimeZone,\r\n                                                masterData,\r\n                                                ncontrolcode: editId,\r\n                                                openModal,\r\n                                                loading: false,\r\n                                                comboData: newcomboData.comboData,\r\n                                                selectedRecord: newcomboData.selectedRecord,\r\n                                                comboComponents,\r\n                                                withoutCombocomponent,\r\n                                                openPortal,\r\n                                                columnList,\r\n                                                childColumnList,\r\n                                                operation,\r\n                                                screenName\r\n                                            }\r\n                                        })\r\n                                    }\r\n                                }\r\n\r\n                            } else {\r\n                                dispatch({\r\n                                    type: DEFAULT_RETURN,\r\n                                    payload: {\r\n                                        timeZoneList,\r\n                                        defaultTimeZone,\r\n                                        masterData,\r\n                                        ncontrolcode: editId,\r\n                                        openModal,\r\n                                        loading: false,\r\n                                        comboData: newcomboData.comboData,\r\n                                        selectedRecord: newcomboData.selectedRecord,\r\n                                        comboComponents,\r\n                                        withoutCombocomponent,\r\n                                        openPortal,\r\n                                        columnList,\r\n                                        childColumnList,\r\n                                        operation,\r\n                                        screenName\r\n                                    }\r\n                                })\r\n                            }\r\n                        } else {\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    timeZoneList,\r\n                                    defaultTimeZone,\r\n                                    masterData,\r\n                                    ncontrolcode: editId,\r\n                                    openModal,\r\n                                    loading: false,\r\n                                    comboData: newcomboData.comboData,\r\n                                    selectedRecord: newcomboData.selectedRecord,\r\n                                    comboComponents,\r\n                                    withoutCombocomponent,\r\n                                    openPortal,\r\n                                    operation,\r\n                                    screenName\r\n                                }\r\n                            })\r\n                        }\r\n                    } else if (mapOfFilterRegData.nsampletypecode === 3) {\r\n                        const MaterialType = comboComponents.filter(x => x.name === 'Material Type');\r\n                        if (MaterialType.length > 0) {\r\n                            const nmaterialtypecode = newcomboData.selectedRecord[MaterialType[0].label] &&\r\n                                newcomboData.selectedRecord[MaterialType[0].label].value\r\n                            if (nmaterialtypecode !== undefined) {\r\n                                const MaterialCategory = comboComponents.filter(x => x.name === 'Material Category');\r\n                                if (MaterialCategory.length > 0) {\r\n                                    const nmaterialcatcode = newcomboData.selectedRecord[MaterialCategory[0].label] &&\r\n                                        newcomboData.selectedRecord[MaterialCategory[0].label].value\r\n                                    const ncategorybasedFlow = newcomboData.selectedRecord[MaterialCategory[0].label]\r\n                                        && newcomboData.selectedRecord[MaterialCategory[0].label]['item']['jsondata']['ncategorybasedflow'];\r\n                                    if (ncategorybasedFlow !== undefined) {\r\n                                        if (ncategorybasedFlow === 3) {\r\n                                            mapOfFilterRegData['nproductcode'] = -1;\r\n                                            mapOfFilterRegData['nproductcatcode'] = nmaterialcatcode\r\n                                            const inputParam = {\r\n                                                timeZoneList,\r\n                                                defaultTimeZone,\r\n                                                masterData,\r\n                                                ncontrolcode: editId,\r\n                                                openModal,\r\n                                                comboComponents,\r\n                                                withoutCombocomponent,\r\n                                                openPortal,\r\n                                                columnList,\r\n                                                childColumnList,\r\n                                                operation,\r\n                                                screenName\r\n                                            }\r\n                                            dispatch(getTreeByProduct(mapOfFilterRegData,\r\n                                                newcomboData.selectedRecord,\r\n                                                newcomboData.comboData, inputParam))\r\n                                        }\r\n                                        else {\r\n                                            const Material = comboComponents.filter(x => x.name === 'Material');\r\n                                            if (Material.length > 0) {\r\n                                                const nmaterialcode = newcomboData.selectedRecord[Material[0].label]\r\n                                                    && newcomboData.selectedRecord[Material[0].label].value;\r\n\r\n                                                mapOfFilterRegData['nproductcode'] = nmaterialcode !== undefined ? nmaterialcode : -1;\r\n                                                mapOfFilterRegData['nproductcatcode'] = nmaterialcatcode\r\n\r\n                                                const inputParam = {\r\n                                                    timeZoneList,\r\n                                                    defaultTimeZone,\r\n                                                    masterData,\r\n                                                    ncontrolcode: editId,\r\n                                                    openModal,\r\n                                                    comboComponents,\r\n                                                    withoutCombocomponent,\r\n                                                    openPortal,\r\n                                                    columnList,\r\n                                                    childColumnList,\r\n                                                    operation,\r\n                                                    screenName\r\n                                                }\r\n                                                dispatch(getTreeByProduct(mapOfFilterRegData,\r\n                                                    newcomboData.selectedRecord,\r\n                                                    newcomboData.comboData, inputParam))\r\n                                            } else {\r\n                                                dispatch({\r\n                                                    type: DEFAULT_RETURN,\r\n                                                    payload: {\r\n                                                        timeZoneList,\r\n                                                        defaultTimeZone,\r\n                                                        masterData,\r\n                                                        ncontrolcode: editId,\r\n                                                        openModal,\r\n                                                        loading: false,\r\n                                                        comboData: newcomboData.comboData,\r\n                                                        selectedRecord: newcomboData.selectedRecord,\r\n                                                        comboComponents,\r\n                                                        withoutCombocomponent,\r\n                                                        openPortal,\r\n                                                        columnList,\r\n                                                        childColumnList,\r\n                                                        operation,\r\n                                                        screenName\r\n                                                    }\r\n                                                })\r\n                                            }\r\n                                        }\r\n\r\n                                    } else {\r\n                                        dispatch({\r\n                                            type: DEFAULT_RETURN,\r\n                                            payload: {\r\n                                                timeZoneList,\r\n                                                defaultTimeZone,\r\n                                                masterData,\r\n                                                ncontrolcode: editId,\r\n                                                openModal,\r\n                                                loading: false,\r\n                                                comboData: newcomboData.comboData,\r\n                                                selectedRecord: newcomboData.selectedRecord,\r\n                                                comboComponents,\r\n                                                withoutCombocomponent,\r\n                                                openPortal,\r\n                                                columnList,\r\n                                                childColumnList,\r\n                                                operation,\r\n                                                screenName\r\n                                            }\r\n                                        })\r\n                                    }\r\n                                } else {\r\n                                    dispatch({\r\n                                        type: DEFAULT_RETURN,\r\n                                        payload: {\r\n                                            timeZoneList,\r\n                                            defaultTimeZone,\r\n                                            masterData,\r\n                                            ncontrolcode: editId,\r\n                                            openModal,\r\n                                            loading: false,\r\n                                            comboData: newcomboData.comboData,\r\n                                            selectedRecord: newcomboData.selectedRecord,\r\n                                            comboComponents,\r\n                                            withoutCombocomponent,\r\n                                            openPortal,\r\n                                            operation,\r\n                                            screenName\r\n                                        }\r\n                                    })\r\n                                }\r\n\r\n                            }\r\n\r\n                        } else {\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    timeZoneList,\r\n                                    defaultTimeZone,\r\n                                    masterData,\r\n                                    ncontrolcode: editId,\r\n                                    openModal,\r\n                                    loading: false,\r\n                                    comboData: newcomboData.comboData,\r\n                                    selectedRecord: newcomboData.selectedRecord,\r\n                                    comboComponents,\r\n                                    withoutCombocomponent,\r\n                                    openPortal,\r\n                                    columnList,\r\n                                    childColumnList,\r\n                                    operation,\r\n                                    screenName\r\n                                }\r\n                            })\r\n                        }\r\n\r\n                    }\r\n                    else {\r\n                    }\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log(\"error:\", error);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getEditDynamicMasterCombo(inputParam, columnList,\r\n    selectedRecord1, childColumnList, comboComponents, withoutCombocomponent) {\r\n    return function (dispatch) {\r\n\r\n        console.log(\"input:\", inputParam);\r\n        dispatch(initRequest(true));\r\n        const { userInfo } = { ...inputParam };\r\n\r\n        let urlArray = [];\r\n\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        // const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n        //     parentcolumnlist: columnList,\r\n        //     childcolumnlist: childColumnList,\r\n        //     userinfo: inputParam.userInfo\r\n        // })\r\n        const selectedMaster = rsapi.post(\"/dynamicmaster/getActiveDynamicMasterById\", {\r\n            \"userinfo\": inputParam.userInfo,\r\n            [inputParam.primaryKeyField]: inputParam.primaryKeyValue,\r\n            parentcolumnlist: columnList,\r\n            childcolumnlist: childColumnList,\r\n        })\r\n\r\n        urlArray = [timeZoneService, selectedMaster]\r\n\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n               // let selectedRecord = { ...response[1].data };\r\n                let selectedRecord = { ...response[1].data[\"EditData\"] };\r\n                // selectedRecord = { ...selectedRecord, ...selectedRecord['jsondata'] }\r\n                console.log(\"selectedRecord:\", selectedRecord);\r\n\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userInfo.stimezoneid, value: userInfo.ntimezonecode };\r\n\r\n                const languagetypeCode = undefined;\r\n                const comboData = response[1].data;\r\n                delete comboData['EditData']\r\n                let comboValues = {}\r\n                if (columnList.length > 0) {\r\n                    columnList.map(x => {\r\n                        if (x.inputtype === 'combo') {\r\n                            if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \r\n                            {\r\n                                if (comboData[x.label].length > 0) {\r\n                                    if (comboData[x.label][0].label === undefined) {\r\n                                        const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember,\r\n                                            x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                        comboData[x.label] = optionList.get(\"OptionList\");\r\n                                    } else {\r\n                                        comboData[x.label] = comboData[x.label]\r\n                                        const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember,\r\n                                            x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                    }\r\n                                } else {\r\n                                    comboData[x.label] = []\r\n                                }\r\n\r\n                                comboValues = childComboLoadForEdit(x, comboData, selectedRecord,\r\n                                    childColumnList, withoutCombocomponent)\r\n                            } else {\r\n                                comboValues = {\r\n                                    \"comboData\": comboData,\r\n                                }\r\n                            }\r\n                        } else {\r\n                            comboValues = {\r\n                                comboData: comboData,\r\n                                ...comboValues\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n                else {\r\n                    comboValues = {\r\n                        \"comboData\": comboData,\r\n                    }\r\n                }\r\n\r\n                if (withoutCombocomponent.length > 0) {\r\n                    withoutCombocomponent.map(item => {\r\n                        if (item.inputtype === \"date\") {\r\n                            if (selectedRecord[item.label]) {\r\n                                selectedRecord = { ...selectedRecord, [item.label]: rearrangeDateFormatforUI(userInfo, selectedRecord[item.label]) }\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        operation: \"update\",\r\n                        screenName: inputParam.screenName,\r\n                        timeZoneList,\r\n                        defaultTimeZone,\r\n                        selectedRecord,\r\n                        openModal: true,\r\n                        ncontrolCode: inputParam.ncontrolCode,\r\n                        loading: false,\r\n                        comboData: comboValues.comboData,\r\n                        childColumnList, comboComponents,\r\n                        withoutCombocomponent,\r\n                        columnList,\r\n                        selectedId: inputParam.primaryKeyValue\r\n\r\n                    }\r\n                })\r\n\r\n            })\r\n            .catch(error => {\r\n                console.log(\"error:\", error);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}