{"ast":null,"code":"import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";var _this=this;import React from'react';import rsapi from'../rsapi';import Axios from'axios';import{toast}from'react-toastify';import{filterRecordBasedOnTwoArrays,sortData,rearrangeDateFormat,convertDateTimetoString,fillRecordBasedOnCheckBoxSelection,getRecordBasedOnPrimaryKeyName,updatedObjectWithNewElement,replaceUpdatedObject,parentChildComboLoad,getSameRecordFromTwoArrays,constructjsonOptionList,constructjsonOptionDefault,childComboLoad,filterRecordBasedOnPrimaryKeyName,reArrangeArrays,childComboLoadForEdit}from'../components/CommonScript';import{DEFAULT_RETURN}from'./LoginTypes';import{intl}from'../components/App';import{initRequest}from'./LoginAction';import{//RegistrationSubType, RegistrationType, \ntransactionStatus}from'../components/Enumeration';import{crudMaster,postCRUDOrganiseTransSearch}from'./ServiceAction';//import { getTestChildTabDetail } from './index.js'\nimport{constructOptionList}from'../components/CommonScript';import{Operators,TextFilter,NumericFilter,// BooleanFilter,\nDateFilter// EnumFilter,\n//  EnumFilterProps,\n}from\"@progress/kendo-react-data-tools\";import{ComboBox}from\"@progress/kendo-react-dropdowns\";import{Utils as QbUtils}from\"react-awesome-query-builder\";var checkTree=QbUtils.checkTree,loadTree=QbUtils.loadTree;export function getSampleTypeChange(Map,masterData,event,labelname){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getRegTypeBySampleType\",Map).then(function(response){masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},_defineProperty({},labelname,_objectSpread({},event.item)));dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getSubSampleChildTabDetail(inputData){return function(dispatch){if(inputData.ntransactionsamplecode.length>0){var inputParamData={ntransactionsamplecode:inputData.ntransactionsamplecode,userinfo:inputData.userinfo};var url=null;switch(inputData.activeSubSampleTab){case\"IDS_SUBSAMPLEATTACHMENTS\":url=\"attachment/getSubSampleAttachment\";break;case\"IDS_SUBSAMPLECOMMENTS\":url=\"comments/getSubSampleComment\";break;default:url=null;break;}if(url!==null){dispatch(initRequest(true));rsapi.post(url,inputParamData).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:_defineProperty({masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{selectedSubSample:inputData.selectedSubSample// selectedTestCode: inputData.ntransactiontestcode,\n}),loading:false,showFilter:false,activeSubSampleTab:inputData.activeSubSampleTab,screenName:inputData.screenName,activeTestTab:inputData.activeSubSampleTab},\"screenName\",inputData.screenName)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});}else{dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:inputData.selectedSample}),loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab}});}}else{//toast.info(\"Please Select a Sample\");\ntoast.info(intl.formatMessage({id:\"IDS_PLSSELECTASAMPLE\"}));}};}export function getRegTypeChange(Map,masterData,event,labelname){return function(dispatch){rsapi.post(\"/registration/getRegSubTypeByRegType\",Map).then(function(response){// const RegistrationSubType = response.data[\"RegistrationSubType\"];\n//  console.log(response.data);\n// RegistrationSubType.length > 0 ?\n//     selectedRecord[\"nregsubtypecode\"] = {\n//         \"value\": RegistrationSubType[0].nregsubtypecode,\n//         \"label\": RegistrationSubType[0].sregsubtypename\n//     } : selectedRecord[\"nregsubtypecode\"] = \"\";\n// const [labelname] = event.item;\nmasterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},_defineProperty({},labelname,_objectSpread({},event.item)));dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getRegSubTypeChange(Map,masterData,event,labelname){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getRegTemplateTypeByRegSubType\",Map).then(function(response){masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},_defineProperty({},labelname,_objectSpread({},event.item)));dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function onApprovalConfigVersionChange(Map,masterData,event,labelname){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getApprovalConfigBasedTemplateDesign\",Map).then(function(response){masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},_defineProperty({},labelname,_objectSpread({},event.item)));dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getComponentTestBySpec(Map,selectedRecord,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getComponentTestBySpec\",Map).then(function(response){var _response$data=response.data,Component=_response$data.Component,Test=_response$data.Test;var slno=Component.length>0?Component[0].slno:-1;var selectedComponent=Component.length>0?Component[0]:undefined;var SelectedTest=[];if(Object.keys(Test).length>0){SelectedTest=Test[slno];}dispatch({type:DEFAULT_RETURN,payload:{Component:Component,Test:Test,SelectedTest:SelectedTest,selectedComponent:selectedComponent,loading:false,selectedRecord:selectedRecord,popUptestDataState:{skip:0,take:10}}});}).catch(function(error){// console.log(error);\ntoast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getTestfromDB(objComponent,LoginProps,nflag){return function(dispatch){dispatch(initRequest(true));var component=_objectSpread({},objComponent);component[\"ncomponentcode\"]=objComponent[\"ncomponentcode\"]?objComponent[\"ncomponentcode\"].value:-1;component[\"nstoragelocationcode\"]=objComponent[\"nstoragelocationcode\"]?objComponent[\"nstoragelocationcode\"].value:-1;component[\"nstorageconditioncode\"]=objComponent[\"nstorageconditioncode\"]?objComponent[\"nstorageconditioncode\"].value:-1;component[\"slno\"]=LoginProps.Component?Object.keys(LoginProps.Component).length+1:0;component[\"scomponentname\"]=objComponent[\"ncomponentcode\"].label;component[\"sstoragelocationname\"]=objComponent[\"nstoragelocationcode\"]&&objComponent[\"nstoragelocationcode\"].label?objComponent[\"nstoragelocationcode\"].label:\"\";component[\"sstorageconditionname\"]=objComponent[\"nstorageconditioncode\"]&&objComponent[\"nstorageconditioncode\"].label?objComponent[\"nstorageconditioncode\"].label:\"\";component[\"ntzdmanufdate\"]=objComponent[\"ntzdmanufdate\"]?objComponent[\"ntzdmanufdate\"].value:-1;component[\"ntzdreceivedate\"]=objComponent[\"ntzdreceivedate\"]?objComponent[\"ntzdreceivedate\"].value:-1;component[\"stzdreceivedate\"]=objComponent[\"ntzdreceivedate\"]?objComponent[\"ntzdreceivedate\"].label:\"\";component[\"nplasmafilecode\"]=objComponent[\"nplasmafilecode\"]?objComponent[\"nplasmafilecode\"].value:-1;component[\"splasmafilenumber\"]=objComponent[\"nplasmafilecode\"]?objComponent[\"nplasmafilecode\"].label:\"\";var dreceiveddate=objComponent[\"dreceiveddate\"];component[\"dreceiveddate\"]=dreceiveddate;//formatInputDate(objComponent[\"dreceiveddate\"], false);\ncomponent[\"sreceiveddate\"]=convertDateTimetoString(dreceiveddate,LoginProps.userInfo);//formatInputDateWithoutT(objComponent[\"dreceiveddate\"], false);//formatDate(objComponent[\"sreceiveddate\"]);\n// rsapi.post(\"/registration/getTestfromDB\", { \"Component\": component })\nrsapi.post(\"/registration/getTestfromDB\",{nspecsampletypecode:component.nspecsampletypecode,slno:component.slno,nneedsubsample:LoginProps.masterData.RealRegSubTypeValue.nneedsubsample}).then(function(response){var TestData=response.data;var slno=component.slno;var SelectedTest=[];var loadComponent=true;var selectComponent={};var showSaveContinue=true;var SelectedSource=[];// let openChildModal = true;\nvar selectedComponent=undefined;var parentPopUpSize=\"lg\";// selectComponent = objComponent\nif(nflag===1){loadComponent=true;objComponent[\"smanuflotno\"]=\"\";objComponent[\"dreceiveddate\"]=rearrangeDateFormat(LoginProps.userInfo,LoginProps.CurrentTime);//new Date(LoginProps.CurrentTime);\nobjComponent[\"sreceiveddate\"]=rearrangeDateFormat(LoginProps.userInfo,LoginProps.CurrentTime);//new Date(LoginProps.CurrentTime);\nselectComponent=objComponent;}else{loadComponent=false;parentPopUpSize=\"xl\";// openChildModal = false;\nshowSaveContinue=false;selectComponent=undefined;}var Test=LoginProps.Test||[];var Component=LoginProps.Component||[];Component.unshift(component);selectedComponent=component;Test[slno]=response.data;SelectedTest=TestData;dispatch({type:DEFAULT_RETURN,payload:{Component:Component,Test:Test,SelectedTest:SelectedTest,selectComponent:selectComponent,selectedComponent:selectedComponent,loadComponent:loadComponent,showSaveContinue:showSaveContinue,parentPopUpSize:parentPopUpSize,loading:false,SelectedSource:SelectedSource}});// console.log(response.data);\n}).catch(function(error){//   console.log(error);\ntoast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function EditComponent(Map,component,userInfo){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var ComponentTestBySpec=rsapi.post(\"/registration/getComponentBySpec\",Map);var timezone=rsapi.post(\"timezone/getTimeZone\");urlArray=[ComponentTestBySpec,timezone];Axios.all(urlArray).then(function(response){var lstComponentMap=constructOptionList(response[0].data.lstComponent||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);var timeZoneListMap=constructOptionList(response[1].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var TimeZoneField=response[1].data;var lstComponent=lstComponentMap.get(\"OptionList\");var timeZoneList=timeZoneListMap.get(\"OptionList\");component[\"ncomponentcode\"]={label:component.scomponentname,value:component.ncomponentcode};component[\"dreceiveddate\"]=rearrangeDateFormat(userInfo,component[\"sreceiveddate\"]);component[\"scomments\"]=component[\"scomments\"];var ntzdreceivedate=component.ntzdreceivedate;if(component.ntzdreceivedate!==null&&typeof component.ntzdreceivedate===\"object\"){ntzdreceivedate=component.ntzdreceivedate.value;}component[\"ntzdreceivedate\"]=component.ntzdreceivedate?{\"label\":TimeZoneField[TimeZoneField.findIndex(function(x){return x.ntimezonecode===ntzdreceivedate;})].stimezoneid,\"value\":TimeZoneField[TimeZoneField.findIndex(function(x){return x.ntimezonecode===ntzdreceivedate;})].ntimezonecode}:\"\";dispatch({type:DEFAULT_RETURN,payload:{loadComponent:true,childoperation:\"update\",lstComponent:lstComponent,ChildscreenName:\"Component\",openChildModal:false,selectComponent:component,parentPopUpSize:\"lg\",timeZoneList:timeZoneList,loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function ReloadData(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"registration/getRegistrationByFilterSubmit\",_objectSpread({},inputData.inputData)).then(function(response){var masterData=_objectSpread(_objectSpread({},inputData.masterData),response.data);if(inputData.searchSampleRef!==undefined&&inputData.searchSampleRef.current!==null){inputData.searchSampleRef.current.value=\"\";masterData['searchedSample']=undefined;}if(inputData.searchSubSampleRef!==undefined&&inputData.searchSubSampleRef.current!==null){inputData.searchSubSampleRef.current.value=\"\";masterData['searchedSubSample']=undefined;}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";//masterData['searchedTests'] = undefined\nmasterData['searchedTest']=undefined;}// let selectedFilter = inputData.selectedFilter;\n// selectedFilter[\"fromdate\"] = \"\";\n// selectedFilter[\"todate\"] = \"\";\nsortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,showFilter:false,skip:0,testskip:0,take:undefined,testtake:undefined,subsampletake:undefined,subsampleskip:0,showSample:undefined//selectedFilter\n}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});};}export function getTreeByProduct(Map,selectedRecord,comboData,inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/getTreeByProduct\",Map).then(function(response){var _ref=[],Specification=_ref.Specification,AgaramTree=_ref.AgaramTree,ActiveKey=_ref.ActiveKey,FocusKey=_ref.FocusKey,OpenNodes=_ref.OpenNodes;var selectedSpec={};if(response.data[\"rtn\"]===true){Specification=constructOptionList(response.data[\"Specification\"]||[],\"nallottedspeccode\",\"sspecname\",undefined,undefined,true).get(\"OptionList\");AgaramTree=response.data[\"AgaramTree\"];ActiveKey=response.data[\"ActiveKey\"];FocusKey=response.data[\"FocusKey\"];OpenNodes=response.data[\"OpenNodes\"];//Manufacturer = response.data[\"Manufacturer\"];\nselectedSpec[\"nallottedspeccode\"]=Specification.length>0?{\"value\":Specification[0].value,\"label\":Specification[0].label,\"item\":Specification[0].item}:\"\";selectedSpec[\"sversion\"]=Specification.length>0?Specification[0].item.sversion:\"\";selectedSpec[\"ntemplatemanipulationcode\"]=Specification.length>0?Specification[0].item.ntemplatemanipulationcode:-1;}selectedRecord=_objectSpread(_objectSpread({},selectedRecord),selectedSpec);dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({Specification:Specification,selectedRecord:selectedRecord,AgaramTree:AgaramTree,ActiveKey:ActiveKey,FocusKey:FocusKey,OpenNodes:OpenNodes,Test:[],SelectedTest:[],loading:false,comboData:comboData},inputParam),{},{selectedSpec:selectedSpec,Component:[],selectComponent:{},selectedComponent:{},subSampleDataGridList:[]})});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export var getNewRegSpecification=function getNewRegSpecification(inputParam,masterData){return function(dispatch){if(inputParam.selectedNode!==null){dispatch(initRequest(true));rsapi.post(\"/registration/\"+inputParam.operation+inputParam.methodUrl,_objectSpread(_objectSpread({},inputParam),{},{ntreetemplatemanipulationcode:inputParam.selectedNode.ntemplatemanipulationcode})).then(function(response){sortData(response.data);var Specification=constructOptionList(response.data||[],\"nallottedspeccode\",\"sspecname\",false,false,true).get(\"OptionList\");var selectedComponent=undefined;inputParam.selectedRecord[\"nallottedspeccode\"]=Specification.length>0?{value:Specification[0].value,label:Specification[0].label,item:Specification[0].item}:\"\";inputParam.selectedRecord[\"sversion\"]=Specification.length>0?Specification[0].item.sversion:\"\";inputParam.selectedRecord[\"ntemplatemanipulationcode\"]=Specification.length>0?Specification[0].item.ntemplatemanipulationcode:-1;dispatch({type:DEFAULT_RETURN,payload:{ActiveKey:inputParam.activeKey,FocusKey:inputParam.focusKey,primaryKey:inputParam.primaryKey,Specification:Specification,selectedNode:inputParam.selectedNode,selectedRecord:inputParam.selectedRecord,Test:[],selectedComponent:selectedComponent,SelectedTest:[],loading:false,showSample:undefined}});}).catch(function(error){if(error.response.status===409||error.response.status===417){toast.info(error.response.data);}else{toast.error(error.message);}});}};};export function AddComponents(Map){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var ComponentTestBySpec=rsapi.post(\"/registration/getComponentBySpec\",Map);var timezone=rsapi.post(\"timezone/getTimeZone\");urlArray=[ComponentTestBySpec,timezone];Axios.all(urlArray).then(function(response){var lstComponentMap=constructOptionList(response[0].data.lstComponent||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);var timeZoneListMap=constructOptionList(response[1].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var lstComponent=lstComponentMap.get(\"OptionList\");var timeZoneList=timeZoneListMap.get(\"OptionList\");var dreceiveddate=null;if(lstComponent[0].item.sreceiveddate)dreceiveddate=rearrangeDateFormat(Map[\"userinfo\"],lstComponent[0].item.sreceiveddate);//new Date(lstComponent[0].item.sreceiveddate);//|| [];\nvar selectComponent={sreceiveddate:dreceiveddate,dreceiveddate:dreceiveddate,ntzdreceivedate:{\"label\":Map[\"userinfo\"].stimezoneid,\"value\":Map[\"userinfo\"].ntimezonecode},stzdreceivedate:Map[\"userinfo\"].stimezoneid,scomments:\"\",nallottedspeccode:lstComponent[0].item.nallottedspeccode};var CurrentTime=dreceiveddate;dispatch({type:DEFAULT_RETURN,payload:{loadComponent:true,lstComponent:lstComponent,dreceiveddate:dreceiveddate,ChildscreenName:\"Component\",showSaveContinue:true,openChildModal:false,childoperation:\"create\",selectComponent:selectComponent,parentPopUpSize:\"lg\",CurrentTime:CurrentTime,timeZoneList:timeZoneList,loading:false,openPortal:true,openModal:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getAllTest(objComponent,LoginProps,nneedsubsample,specBasedComponent,selectPackage1,specBasedTestPackage,selectPackage){return function(dispatch){if(Object.keys(objComponent).length>0){dispatch(initRequest(true));rsapi.post(\"/registration/getTestfromDB\",{nspecsampletypecode:objComponent.nspecsampletypecode,slno:objComponent.slno,nneedsubsample:nneedsubsample,nallottedspeccode:objComponent.nallottedspeccode,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:true//    ntestpackagecode:selectPackage.ntestpackagecode.value\n}).then(function(response){var PackageData=[];var TestCombined=[];//   const TestCombined = response.data;\nvar TestData=response.data;var Test=LoginProps.Test||[];var componentTest=Test[objComponent.slno]?Test[objComponent.slno]:[];TestCombined=filterRecordBasedOnTwoArrays(TestData,componentTest,\"ntestgrouptestcode\");dispatch({type:DEFAULT_RETURN,payload:{TestCombined:TestCombined,TestPackage:PackageData,selectPackage:[],loadTest:true,openChildModal:false,ChildscreenName:intl.formatMessage({id:\"IDS_TEST\"}),screenName:intl.formatMessage({id:\"IDS_TEST\"}),operation:\"create\",childoperation:\"create\",parentPopUpSize:\"lg\",loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});}else{toast.info(intl.formatMessage({id:\"IDS_SELECTCOMPONENTTOADDTEST\"}));}};}export function getTest(objComponent,LoginProps,nneedsubsample,specBasedComponent,selectPackage1,specBasedTestPackage,selectPackage){return function(dispatch){// if (Object.keys(objComponent).length > 0) {\nvar urlArray=[];var TestGet=rsapi.post(\"/registration/getTestfromDB\",{nspecsampletypecode:objComponent.nspecsampletypecode,slno:objComponent.slno,nneedsubsample:nneedsubsample,nallottedspeccode:objComponent.nallottedspeccode,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:true//    ntestpackagecode:selectPackage.ntestpackagecode.value\n});urlArray[0]=TestGet;var TestPackageGet=rsapi.post(\"/registration/getTestfromTestPackage\",{nspecsampletypecode:objComponent.nspecsampletypecode,slno:objComponent.slno,nneedsubsample:nneedsubsample,nallottedspeccode:objComponent.nallottedspeccode,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:true});urlArray[1]=TestPackageGet;dispatch(initRequest(true));Axios.all(urlArray).then(function(response){// const TestCombined = [];\nvar PackageData=[];//  if (specBasedTestPackage) {\nvar PackageDataMap=constructOptionList(response[1].data.TestPackage||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");//    }\n//    else {\nvar TestData=response[0].data;var Test=LoginProps.Test||[];var componentTest=Test[objComponent.slno]?Test[objComponent.slno]:[];var TestCombined=filterRecordBasedOnTwoArrays(TestData,componentTest,\"ntestcode\");//    }\n// const lstComponentMap = constructOptionList(TestCombined|| [], \"ntestgrouptestcode\",\n//\"stestsynonym\", undefined, undefined, true);\ndispatch({type:DEFAULT_RETURN,payload:{TestCombined:TestCombined,TestPackage:PackageData,selectPackage:[],AllTest:TestData,loadTest:true,openChildModal:false,ChildscreenName:intl.formatMessage({id:\"IDS_TEST\"}),screenName:intl.formatMessage({id:\"IDS_TEST\"}),operation:\"create\",childoperation:\"create\",parentPopUpSize:\"lg\",loading:false}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});// } else {\n//     toast.info(intl.formatMessage({ id: \"IDS_SELECTCOMPONENTTOADDTEST\" }));\n// }\n};}export function addsubSample(masterData,userinfo,columnList,selectComponent,childColumnList,SubSamplecomboComponents,SubSamplewithoutCombocomponent,specBasedComponent,Map,Component,isServiceRequired,SubSamplecomboData,selectedRecord,conditionalTestPackage,specBasedTestPackage,LoginProps){if(isServiceRequired){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var timeZoneService=rsapi.post(\"timezone/getTimeZone\");urlArray[0]=timeZoneService;var actualService=rsapi.post(\"dynamicpreregdesign/getComboValues\",{parentcolumnlist:columnList?columnList:[],childcolumnlist:childColumnList?childColumnList:[],userinfo:userinfo});urlArray[1]=actualService;if(specBasedComponent){var ComponentTestBySpec=rsapi.post(\"/registration/getComponentBySpec\",_objectSpread(_objectSpread({},Map),{},{specBasedComponent:specBasedComponent//   conditionalTestPackage:true\n}));urlArray[2]=ComponentTestBySpec;}else{Component=Component?Component:[];var TestGet=rsapi.post(\"/registration/getTestfromDB\",{nallottedspeccode:Map[\"nallottedspeccode\"],slno:Component?Object.keys(Component).length+1:1,nneedsubsample:Map[\"nneedsubsample\"],// nallottedspeccode: objComponent.nallottedspeccode,\nspecBasedComponent:specBasedComponent,conditionalTestPackage:true,specBasedTestPackage:specBasedTestPackage});urlArray[2]=TestGet;var TestPackageGet=rsapi.post(\"/registration/getTestfromTestPackage\",{nallottedspeccode:Map[\"nallottedspeccode\"],// slno: Component ? Object.keys(Component).length + 1 : 1,\nspecBasedComponent:specBasedComponent//   specBasedTestPackage: specBasedTestPackage,\n//  conditionalTestPackage: conditionalTestPackage\n});urlArray[5]=TestPackageGet;}var currentDate=rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:userinfo});urlArray[3]=currentDate;var dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:SubSamplewithoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userinfo});urlArray[4]=dateService;Axios.all(urlArray).then(function(response){var timeZoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var timeZoneList=timeZoneMap.get(\"OptionList\");var defaultTimeZone={label:userinfo.stimezoneid,value:userinfo.ntimezonecode};var newcomboData=parentChildComboLoad(columnList,response[1].data,selectComponent,childColumnList,SubSamplewithoutCombocomponent,undefined,userinfo.slanguagetypecode,userinfo);var TestCombined=[];var lstComponent=[];var PackageData=[];if(specBasedComponent){var lstComponentMap=constructOptionList(response[2].data.lstComponent||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);lstComponent=lstComponentMap.get(\"OptionList\");}else{/// if (specBasedTestPackage) {\nvar PackageDataMap=constructOptionList(response[5].data.TestPackage||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");// if (PackageData.length === 0) {\n//     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \n// }                      \n// }\n// else {\nTestCombined=response[2].data;//}\n}var comboData1=newcomboData.comboData;var selectedRecord1=newcomboData.selectedRecord;SubSamplewithoutCombocomponent.map(function(componentrow){if(componentrow.inputtype===\"date\"){if(componentrow.loadcurrentdate){selectedRecord1[componentrow.label]=componentrow.loadcurrentdate?rearrangeDateFormat(userinfo,response[3].data):\"\";selectedRecord1[componentrow.label+\"value\"]=selectedRecord1[componentrow.label];}else if(componentrow.nperiodcode){selectedRecord1[componentrow.label+\"value\"]=response[4].data[componentrow.label]?new Date(response[4].data[componentrow.label][\"datevalue\"]):null;if(componentrow.loadselecteddate){selectedRecord1[componentrow.label]=response[4].data[componentrow.label]?new Date(response[4].data[componentrow.label][\"datevalue\"]):null;}//    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n//    new Date(response[2].data[componentrow.label]):null;\n}else{selectedRecord1[componentrow.label+\"value\"]=new Date();}if(componentrow.hidebeforedate){selectedRecord1[componentrow.label+\"min\"]=selectedRecord1[componentrow.label+\"value\"];}if(componentrow.hideafterdate){selectedRecord1[componentrow.label+\"max\"]=selectedRecord1[componentrow.label+\"value\"];}}else if(componentrow.inputtype===\"radio\"){selectedRecord1[componentrow.label]=componentrow.radioOptions?componentrow.radioOptions.tags[0].text:\"\";}});//console.log(\"selectedRecord1 action1:\", selectedRecord1);\n// if (masterData.RealRegSubTypeValue.nregsubtypecode === 6) {\n//     let portalOrder = selectedRecord && selectedRecord['Portal Order ID'] || {}\n//     let containerType = comboData1['Container Type'] || []\n//     comboData1['ContainerType'] = comboData1['Container Type'] || []\n//     let containerList = []\n//     const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\n//     containerType.map(x => {\n//         if (x.item.jsondata.nportalordercode === nportalordercode) {\n//             containerList.push(x)\n//         }\n//     })\n//     comboData1['Container Type'] = containerList\n// }\ndispatch({type:DEFAULT_RETURN,payload:{ChildscreenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),screenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),showSaveContinue:true,openChildModal:false,childoperation:\"create\",parentPopUpSize:\"lg\",loading:false,lstComponent:lstComponent,openPortal:true,openModal:false,operation:\"create\",loadSubSample:true,selectComponent:selectedRecord1,SubSamplecomboData:comboData1,SubSamplecomboComponents:SubSamplecomboComponents,SubSamplewithoutCombocomponent:SubSamplewithoutCombocomponent,TestCombined:TestCombined,parentSubSampleColumnList:columnList,childSubSampleColumnList:childColumnList,timeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,masterData:masterData,selectPackage:[],TestPackage:PackageData}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}else{var newcomboData=parentChildComboLoad(columnList,SubSamplecomboData,selectComponent,childColumnList,SubSamplewithoutCombocomponent,undefined,userinfo.slanguagetypecode,userinfo);return function(dispatch){if(!specBasedComponent){var urlArray=[];var ComponentTestBySpec=rsapi.post(\"/registration/getTestfromDB\",_objectSpread(_objectSpread({nallottedspeccode:Map[\"nallottedspeccode\"],slno:Component?Object.keys(Component).length+1:1},Map),{},{// nallottedspeccode: objComponent.nallottedspeccode,\nspecBasedComponent:specBasedComponent,conditionalTestPackage:true,specBasedTestPackage:specBasedTestPackage}));urlArray[0]=ComponentTestBySpec;var currentDate=rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:userinfo});urlArray[1]=currentDate;var dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:SubSamplewithoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userinfo});urlArray[2]=dateService;var TestPackageGet=rsapi.post(\"/registration/getTestfromTestPackage\",{//  nspecsampletypecode: selectedobject.nspecsampletypecode,\nnallottedspeccode:selectedRecord.nallottedspeccode.item.nallottedspeccode,slno:Component?Object.keys(Component).length+1:1,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:conditionalTestPackage});urlArray[3]=TestPackageGet;Axios.all(urlArray).then(function(response){var TestCombined=[];var PackageData=[];//  if (!specBasedTestPackage) {\nTestCombined=response[0].data;// } \n// else {\nvar PackageDataMap=constructOptionList(response[3].data.TestPackage||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");// if (PackageData.length === 0) {\n//    dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \n//} \n// }\nvar selectedRecord1=newcomboData.selectedRecord;SubSamplewithoutCombocomponent.map(function(componentrow){if(componentrow.inputtype===\"date\"){if(componentrow.loadcurrentdate){selectedRecord1[componentrow.label]=componentrow.loadcurrentdate?rearrangeDateFormat(userinfo,response[1].data):\"\";selectedRecord1[componentrow.label+\"value\"]=selectedRecord1[componentrow.label];}else if(componentrow.nperiodcode){selectedRecord1[componentrow.label+\"value\"]=response[2].data[componentrow.label]?new Date(response[2].data[componentrow.label][\"datevalue\"]):null;if(componentrow.loadselecteddate){selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?new Date(response[2].data[componentrow.label][\"datevalue\"]):null;}//    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n//    new Date(response[2].data[componentrow.label]):null;\n}else{selectedRecord1[componentrow.label+\"value\"]=new Date();}if(componentrow.hidebeforedate){selectedRecord1[componentrow.label+\"min\"]=selectedRecord1[componentrow.label+\"value\"];}if(componentrow.hideafterdate){selectedRecord1[componentrow.label+\"max\"]=selectedRecord1[componentrow.label+\"value\"];}}else if(componentrow.inputtype===\"radio\"){selectedRecord1[componentrow.label]=componentrow.radioOptions?componentrow.radioOptions.tags[0].text:\"\";}});// if (masterData.RealRegSubTypeValue.nregsubtypecode === 6) {\n//     let portalOrder = selectedRecord && selectedRecord['Portal Order ID'] || {}\n//     let containerType = SubSamplecomboData['ContainerType'] || []\n//     let containerList = []\n//     const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\n//     containerType.map(x => {\n//         if (x.item.jsondata.nportalordercode === nportalordercode) {\n//             containerList.push(x)\n//         }\n//     })\n//     SubSamplecomboData['Container Type'] = containerList\n// }\ndispatch({type:DEFAULT_RETURN,payload:{ChildscreenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),screenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),showSaveContinue:true,openChildModal:false,childoperation:\"create\",parentPopUpSize:\"lg\",loading:false,lstComponent:[],openPortal:true,openModal:false,operation:\"create\",loadSubSample:true,selectComponent:selectedRecord1,TestCombined:TestCombined,TestPackage:PackageData}});});}else{// Component = Component ? Component : []\nvar _urlArray=[];var _ComponentTestBySpec=rsapi.post(\"/registration/getComponentBySpec\",_objectSpread(_objectSpread({},Map),{},{specBasedComponent:specBasedComponent}));_urlArray[0]=_ComponentTestBySpec;var _currentDate=rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:userinfo});_urlArray[1]=_currentDate;var _dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:SubSamplewithoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userinfo});_urlArray[2]=_dateService;Axios.all(_urlArray).then(function(response){// const lstComponent =  response.data.lstComponent\nvar lstComponent=response[0].data.lstComponent;//filterRecordBasedOnTwoArrays(response.data.lstComponent, Component, \"ncomponentcode\")\nvar lstComponentMap=constructOptionList(lstComponent||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);lstComponent=lstComponentMap.get(\"OptionList\");var selectedRecord1=newcomboData.selectedRecord;SubSamplewithoutCombocomponent.map(function(componentrow){if(componentrow.inputtype===\"date\"){if(componentrow.loadcurrentdate){selectedRecord1[componentrow.label]=componentrow.loadcurrentdate?rearrangeDateFormat(userinfo,response[1].data):\"\";selectedRecord1[componentrow.label+\"value\"]=selectedRecord1[componentrow.label];}else if(componentrow.nperiodcode){selectedRecord1[componentrow.label+\"value\"]=response[2].data[componentrow.label]?new Date(response[2].data[componentrow.label][\"datevalue\"]):null;if(componentrow.loadselecteddate){selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?new Date(response[2].data[componentrow.label][\"datevalue\"]):null;}//    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n//    new Date(response[2].data[componentrow.label]):null;\n}else{selectedRecord1[componentrow.label+\"value\"]=new Date();}if(componentrow.hidebeforedate){selectedRecord1[componentrow.label+\"min\"]=selectedRecord1[componentrow.label+\"value\"];}if(componentrow.hideafterdate){selectedRecord1[componentrow.label+\"max\"]=selectedRecord1[componentrow.label+\"value\"];}}else if(componentrow.inputtype===\"radio\"){selectedRecord1[componentrow.label]=componentrow.radioOptions?componentrow.radioOptions.tags[0].text:\"\";}});// if (masterData.RealRegSubTypeValue.nregsubtypecode === 6) {\n//     let portalOrder = selectedRecord && selectedRecord['Portal Order ID'] || {}\n//     let containerType = SubSamplecomboData['ContainerType'] || []\n//     let containerList = []\n//     const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\n//     containerType.map(x => {\n//         if (x.item.jsondata.nportalordercode === nportalordercode) {\n//             containerList.push(x)\n//         }\n//     })\n//     SubSamplecomboData['Container Type'] = containerList\n// }\ndispatch({type:DEFAULT_RETURN,payload:{ChildscreenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),screenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),showSaveContinue:true,openChildModal:false,childoperation:\"create\",parentPopUpSize:\"lg\",loading:false,lstComponent:lstComponent,openPortal:true,openModal:false,operation:\"create\",loadSubSample:true,selectComponent:selectedRecord1,TestCombined:[],selectedTestData:[],selectPackage:[]}});});}};}}// export function componentTestPackage(selectedobject, Reg, specBasedComponent, Component,specBasedTestPackage,conditionalTestPackage) {\n//     return function (dispatch) {\n//         dispatch(initRequest(true));\n//         Component = Component ? Component : []\n//         rsapi.post(\"/registration/getTestfromDB\", {\n//             nspecsampletypecode: selectedobject.selectedSubSample &&\n//             [...new Set(selectedobject.selectedSubSample.map(x => x.nspecsampletypecode))].join(\",\"),\n//             conditionalTestPackage: true,\n//             specBasedTestPackage: specBasedTestPackage,\n//             specBasedComponent: specBasedComponent,\n//             nallottedspeccode:selectedobject.selectedSample[0].nallottedspeccode\n//         })\n//             .then(response => {\n//                 let PackageData = []\n//                 let TestData=[]\n//                 if (specBasedTestPackage) {\n//                     const PackageDataMap = constructOptionList(response.data.TestPackage || [], \"ntestpackagecode\",\n//                         \"stestpackagename\", undefined, undefined, true);\n//                     PackageData = PackageDataMap.get(\"OptionList\");\n//                     // if (PackageData.length === 0) {\n//                     //     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \n//                     // } \n//                 }\n//                 else {\n//                      TestData = response.data;\n//                 }\n//                 //let Test = [];\n//                 // Test[selectedobject.slno] = TestData;\n//                 const Map = {}\n//                 if (Reg) {\n//                     delete selectedobject.ntestpackagecode\n//                     delete selectedobject.ntestgrouptestcode\n//                     Map[\"selectedRecord\"] = selectedobject\n//                 } else {\n//                     Map[\"selectComponent\"] = selectedobject\n//                 }\n//                 dispatch({\n//                     type: DEFAULT_RETURN,\n//                     payload: {\n//                         TestCombined: TestData, TestPackage: PackageData,\n//                         ...Map,\n//                         loading: false, selectedTestData: [],\n//                         availableTest:[],\n//                       //  selectPackage: {},\n//                         screenName: \"IDS_TEST\",\n//                         operation: \"create\",\n//                         openModal: true,\n//                         parentPopUpSize: \"lg\",\n//                         loadChildTest: true,\n//                        //selectedRecord:{},\n//                     }\n//                 });\n//             })\n//             .catch(error => {\n//                 toast.error(error.message);\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\n//             })\n//     }\n// }\nexport function componentTest(selectedobject,Reg,specBasedComponent,Component,specBasedTestPackage,conditionalTestPackage){return function(dispatch){dispatch(initRequest(true));var urlArray=[];Component=Component?Component:[];var TestGet=rsapi.post(\"/registration/getTestfromDB\",{nspecsampletypecode:selectedobject.nspecsampletypecode,slno:Component?Object.keys(Component).length+1:1,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:conditionalTestPackage,nneedsubsample:selectedobject.nneedsubsample});urlArray[0]=TestGet;var TestPackageGet=rsapi.post(\"/registration/getTestfromTestPackage\",{nspecsampletypecode:selectedobject.nspecsampletypecode,slno:Component?Object.keys(Component).length+1:1,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:conditionalTestPackage});urlArray[1]=TestPackageGet;Axios.all(urlArray).then(function(response){var PackageData=[];var TestData=[];// if (specBasedTestPackage) {\nvar PackageDataMap=constructOptionList(response[1].data.TestPackage||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");// if (PackageData.length === 0) {\n//     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \n// } \n//   }\n//    else {\nTestData=response[0].data;//  }\n//let Test = [];\n// Test[selectedobject.slno] = TestData;\nvar Map={};if(Reg){Map[\"selectedRecord\"]=selectedobject;}else{Map[\"selectComponent\"]=selectedobject;}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({TestCombined:TestData,AllTest:TestData,TestPackage:PackageData},Map),{},{loading:false,selectedTestData:[],selectPackage:[]})});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}// export function testPackageTest(selectedobject, Reg, specBasedComponent, Component,specBasedTestPackage,conditionalTestPackage,selectComponent,objComponent,LoginProps,selectPackage,subSampleBased,selectedSpec,nneedsubsample) {\nexport function testPackageTest(selectedobject,Reg,specBasedComponent,Component,selectComponent,objComponent,LoginProps,selectPackage,subSampleBased,selectedSpec,nneedsubsample){return function(dispatch){dispatch(initRequest(true));Component=Component?Component:[];// rsapi.post(\"/registration/getTestBasesdTestPackage\", {\n//     nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\n//     slno:subSampleBased?Component ? Object.keys(Component).length + 1 : 1:selectComponent.slno,\n//     specBasedComponent: specBasedComponent,\n//     ntestpackagecode: selectPackage.ntestpackagecode.value,\n//     nallottedspeccode:selectedSpec!==undefined?selectedSpec.value:selectedobject.nallottedspeccode\n// })\nrsapi.post(\"/registration/getTestBasesdTestPackage\",{// nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\nnspecsampletypecode:selectComponent&&selectComponent.nspecsampletypecode?selectComponent.nspecsampletypecode:selectedobject.nspecsampletypecode,//     slno: subSampleBased ? Component ? Object.keys(Component).length + 1 : 1 : selectComponent.slno,\nspecBasedComponent:specBasedComponent,ntestpackagecode:selectPackage.ntestpackagecode.value,nallottedspeccode:selectedSpec&&selectedSpec.value!==undefined?selectedSpec.value:selectedobject.nallottedspeccode}).then(function(response){var Map={};var TestData=response.data;var Test=LoginProps.Test||[];var componentTest=[];if(subSampleBased){componentTest=Test[Component?Object.keys(Component).length+1:1]?Test[Component?Object.keys(Component).length+1:1]:[];}else{componentTest=Test[objComponent.slno]?Test[objComponent.slno]:[];}var availableTest=filterRecordBasedOnTwoArrays(TestData,componentTest,\"ntestcode\");var TestCombined=filterRecordBasedOnTwoArrays(TestData,componentTest,\"ntestcode\");delete selectedobject.ntestgrouptestcode;if(Reg){Map[\"selectedRecord\"]=selectedobject;}else{Map[\"selectPackage\"]=selectPackage;}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({availableTest:availableTest,TestCombined:TestCombined},Map),{},{loading:false,selectedTestData:[]//, selectPackage: []\n// TestCombined,loadTest: true, openChildModal: false,\n// ChildscreenName: \"Test\",\n//  screenName: \"Test\",\n// operation: \"create\",\n//  childoperation: \"create\",\n//   parentPopUpSize: \"lg\", loading: false\n})});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function addSubSampleSaveContinue(Map1,Map,specBasedComponent,Component,selectedTestData,lstComponent){//  const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\n//     selectComponent, childColumnList, SubSamplewithoutCombocomponent)\nreturn function(dispatch){if(!specBasedComponent){rsapi.post(\"/registration/getTestfromDB\",{nallottedspeccode:Map[\"nallottedspeccode\"],nspecsampletypecode:Map[\"nspecsampletypecode\"],slno:Map1.Component?Object.keys(Map1.Component).length+1:1,specBasedComponent:specBasedComponent,nneedsubsample:Map[\"nneedsubsample\"]}).then(function(response){var TestCombined=response.data;// let selectedTestPackageData = selectedTestPackageData && selectedTestPackageData.length > 0 ? selectedTestData : []\nvar selectedTestPackageData=selectedTestData&&selectedTestData.length>0?selectedTestData:[];var selectedTestPackageData1=TestCombined.filter(function(x){return selectedTestPackageData.some(function(y){return x[\"ntestpackagetestcode\"]===y.value;});});selectedTestData=selectedTestData&&selectedTestData.length>0?selectedTestPackageData:[];var selectedTestData1=TestCombined.filter(function(x){return selectedTestData.some(function(y){return x[\"ntestgrouptestcode\"]===y.value;});});// const selectedTestData2 = []\n// TestCombined.map(x=>{\n//     selectedTestData1.map(y=>{\n//         if(x[\"ntestgrouptestcode\"] !== y[\"ntestgrouptestcode\"]){\n//             selectedTestData2.push(x)\n//         } \n//     })\n// });\n//  let filterArray = filterRecordBasedOnTwoArrays(selectedTestData1, TestCombined, \"ntestgrouptestcode\")\n// const filterArray = [...selectedTestData1, ...TestCombined]\nselectedTestData=constructOptionList(selectedTestData1,\"ntestgrouptestcode\",\"stestsynonym\");selectedTestData[\"ntestgrouptestcode\"]=selectedTestData.get(\"OptionList\");selectedTestPackageData=constructOptionList(selectedTestPackageData1,\"ntestpackagetestcode\",\"stestpackagename\");selectedTestPackageData[\"ntestpackagetestcode\"]=selectedTestPackageData.get(\"OptionList\");Map1.selectComponent={};// Map1.selectComponent[\"ncomponentcode\"] = {};\ndispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},Map1),{},{loading:false,TestCombined:TestCombined,//selectedTestData,\n//selectedTestPackageData,\nselectedTestData:[],selectedTestPackageData:[],masterStatus:intl.formatMessage({id:\"IDS_SAVESUCCESSFULLY\"})})});});}else{// lstComponent = lstComponent.filter(x => x.item.nspecsampletypecode !== Map1.selectComponent[\"nspecsampletypecode\"])\nMap1.selectComponent={};Map1.selectComponent[\"ncomponentcode\"]={};// Map1.selectComponent[\"ncomponentcode\"] = {};\n// Map1.selectComponent[\"Sample Name\"] = \"\";\ndispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},Map1),{},{loading:false,TestCombined:[],selectedTestData:[],selectedTestPackageData:[],lstComponent:lstComponent,masterStatus:intl.formatMessage({id:\"IDS_SAVESUCCESSFULLY\"})})});}};}export function editSubSample(Map,component,userInfo,specBasedComponent,SubSamplecomboData,selectedRecord){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var Componnet={};if(specBasedComponent){Componnet=rsapi.post(\"/registration/getComponentBySpec\",_objectSpread({},Map));}urlArray=[Componnet];Axios.all(urlArray).then(function(response){var comp=[];if(specBasedComponent){comp=response[0].data.lstComponent;}var lstComponentMap=constructOptionList(comp||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);var lstComponent=lstComponentMap.get(\"OptionList\");if(Map.nregsubtypecode===6){var portalOrder=component['Container Type']||{};var containerType=SubSamplecomboData['ContainerType']||[];var containerList=[];var nportalordercode=portalOrder&&portalOrder.value?portalOrder.value:-1;containerType.map(function(x){if(x.item.jsondata.nportalordercode===nportalordercode){containerList.push(x);}});SubSamplecomboData['Container Type']=containerList;}dispatch({type:DEFAULT_RETURN,payload:{loadSubSample:true,childoperation:\"update\",ChildscreenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),openChildModal:false,selectComponent:component,parentPopUpSize:\"lg\",loading:false,lstComponent:lstComponent,SubSamplecomboData:SubSamplecomboData}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function insertRegistration(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/createRegistration\",inputParam.inputData).then(function(response){if(response.data.rtn===\"Success\"){var _objectSpread6;var RegistrationGetSample=updatedObjectWithNewElement(response.data[\"selectedSample\"],masterData.RegistrationGetSample);var selectedSample=response.data[\"selectedSample\"];var RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];var RegistrationGetTest=response.data[\"RegistrationGetTest\"];var selectedSubSample=RegistrationGetSubSample;RegistrationGetTest=sortData(RegistrationGetTest,\"npreregno\",\"desc\");var selectedTest=RegistrationGetTest.length>0?[RegistrationGetTest[0]]:[];if(inputParam.inputData.nneedsubsample){RegistrationGetSubSample=sortData(response.data[\"RegistrationGetSubSample\"],'npreregno','desc');selectedSubSample=RegistrationGetSubSample.length>0?[RegistrationGetSubSample[0]]:[];RegistrationGetTest=RegistrationGetTest.filter(function(x){return x.ntransactionsamplecode===selectedSubSample[0].ntransactionsamplecode;});selectedTest=RegistrationGetTest.length>0?response.data[\"selectedTest\"]:[];}// RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\nif(inputParam.multipleselectionFlag){selectedSample=updatedObjectWithNewElement(response.data[\"selectedSample\"],masterData.selectedSample);updatedObjectWithNewElement(response.data[\"selectedSubSample\"],masterData.RegistrationGetSubSample);updatedObjectWithNewElement(response.data[\"selectedTest\"],masterData.RegistrationGetTest);RegistrationGetSubSample=masterData.RegistrationGetSubSample;RegistrationGetTest=masterData.RegistrationGetTest;}masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{selectedSample:selectedSample,selectedSubSample:selectedSubSample,selectedTest:selectedTest,RegistrationGetSubSample:RegistrationGetSubSample,RegistrationGetTest:RegistrationGetTest,RegistrationGetSample:RegistrationGetSample});var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},(_objectSpread6={openModal:false,loadEsign:false,showConfirmAlert:false,selectedRecord:undefined,loading:false,loadPreregister:false,showSample:undefined,openPortal:false,selectedSpec:{},selectComponent:{},SelectedTest:{},selectedComponent:{},Component:[]},_defineProperty(_objectSpread6,\"selectedRecord\",{}),_defineProperty(_objectSpread6,\"SelectedTest\",[]),_defineProperty(_objectSpread6,\"Test\",[]),_defineProperty(_objectSpread6,\"selectedComponent\",{}),_defineProperty(_objectSpread6,\"subSampleDataGridList\",[]),_objectSpread6));inputParam.postParamList[0]['clearFilter']='yes';inputParam.postParamList[1]['clearFilter']='yes';inputParam.postParamList[2]['clearFilter']='yes';dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}else{toast.info(response.data.rtn);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false}});}}).catch(function(error){// console.log(error);\ntoast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false}});});};}export function insertRegistrationScheduler(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/schedulerinsertRegistration\",inputParam.inputData).then(function(response){var _objectSpread7;// if (response.data.rtn === \"Success\") {\n//     let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\n//     let selectedSample = response.data[\"selectedSample\"];\n//     let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n//     let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n//     let selectedSubSample = RegistrationGetSubSample;\n//     RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\n//     let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\n//     if (inputParam.inputData.nneedsubsample) {\n//         RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\n//         selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\n//         RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\n//         selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\n//     }\n//     // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\n//     if (inputParam.multipleselectionFlag) {\n//         selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\n//         updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\n//         updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\n//         RegistrationGetSubSample = masterData.RegistrationGetSubSample;\n//         RegistrationGetTest = masterDat..a.RegistrationGetTest;\n//     }\n//     masterData = {\n//         ...masterData, ...response.data,\n//         selectedSample, selectedSubSample, selectedTest,\n//         RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\n//     }\nvar respObject=_objectSpread(_objectSpread({masterData:_objectSpread(_objectSpread({},masterData),{},{SchedulerTransaction:response[\"data\"].SchedulerTransaction})},inputParam.inputData),{},(_objectSpread7={openModal:false,loadEsign:false,showConfirmAlert:false,selectedRecord:undefined,loading:false,loadPreregister:false,showSample:undefined,openPortal:false,selectedSpec:{},selectComponent:{},SelectedTest:{},selectedComponent:{},Component:[]},_defineProperty(_objectSpread7,\"selectedRecord\",{}),_defineProperty(_objectSpread7,\"SelectedTest\",[]),_defineProperty(_objectSpread7,\"Test\",[]),_defineProperty(_objectSpread7,\"selectedComponent\",{}),_defineProperty(_objectSpread7,\"subSampleDataGridList\",[]),_objectSpread7));// inputParam.postParamList[0]['clearFilter'] = 'yes'\n// dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\ndispatch({type:DEFAULT_RETURN,payload:_objectSpread({},respObject)});// } else {\n//     toast.info(response.data.rtn);\n//     dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\n// }\n}).catch(function(error){// console.log(error);\ntoast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false}});});};}export function getRegistrationSample(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"registration/getRegistrationByFilterSubmit\",_objectSpread({},inputData.inputData)).then(function(response){var masterData=_objectSpread(_objectSpread({},inputData.masterData),response.data);if(inputData.searchSampleRef!==undefined&&inputData.searchSampleRef.current!==null){inputData.searchSampleRef.current.value=\"\";masterData['searchedSample']=undefined;}if(inputData.searchSubSampleRef!==undefined&&inputData.searchSubSampleRef.current!==null){inputData.searchSubSampleRef.current.value=\"\";masterData['searchedSubSample']=undefined;}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";masterData['searchedTest']=undefined;}var respObject={};if(inputData.selectedFilter){respObject={selectedFilter:_objectSpread({},inputData.selectedFilter)};}sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({masterData:masterData,loading:false,showFilter:false,skip:0,testskip:0,take:undefined,testtake:undefined,subsampleskip:0,subsampletake:undefined,showSample:undefined},respObject),{},{activeSampleTab:inputData.inputData.activeSampleTab})});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});};}export function getRegistrationsubSampleDetail(inputData,isServiceRequired){return function(dispatch){var inputParamData={nsampletypecode:inputData.nsampletypecode,nregtypecode:inputData.nregtypecode,nregsubtypecode:inputData.nregsubtypecode,npreregno:inputData.npreregno,ntransactionstatus:inputData.ntransactionstatus,napprovalconfigcode:inputData.napprovalconfigcode,activeTestTab:inputData.activeTestTab,activeSampleTab:inputData.activeTestTab,activeSubSampleTab:inputData.activeTestTab,userinfo:inputData.userinfo,ndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,nneedsubsample:inputData.nneedsubsample,//ntype: inputData.checkBoxOperation === 7 ? 2 : undefined,\nntype:inputData.checkBoxOperation===7?4:undefined,//ALPD-497\ncheckBoxOperation:inputData.nneedsubsample===true?inputData.checkBoxOperation===5?3:inputData.checkBoxOperation:inputData.checkBoxOperation};var activeName=\"\";var dataStateName=\"\";var subSample=inputData.nneedsubsample;dispatch(initRequest(true));if(isServiceRequired){rsapi.post(\"registration/getRegistrationSubSample\",inputParamData).then(function(response){sortData(response.data,\"descending\",\"npreregno\");sortData(response.data['RegistrationAttachment']);sortData(response.data['RegistrationComment']);var masterData={};var skipInfo={};var oldSelectedTest=inputData.masterData.selectedTest||[];if(subSample){var oldSelectedSubSample=inputData.masterData.selectedSubSample;fillRecordBasedOnCheckBoxSelection(inputData.masterData,response.data,inputData.childTabsKey,inputData.checkBoxOperation,\"npreregno\",inputData.removeElementFromArray);masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:inputData.selectedSample,selectedPreregno:inputData.npreregno,selectedSubSample:inputData.masterData.RegistrationGetSubSample.length>0?[inputData.masterData.RegistrationGetSubSample[0]]:[]});var RegistrationTestComment=[];var RegistrationTestAttachment=[];var RegistrationParameter=[];var RegistrationComment=[];//if (inputData.checkBoxOperation === 1 || inputData.checkBoxOperation === 7) {  \nif(inputData.checkBoxOperation===1){var wholeSubSampleList=masterData.RegistrationGetSubSample.map(function(b){return b.ntransactionsamplecode;});oldSelectedSubSample.forEach(function(subsample,index){if(!wholeSubSampleList.includes(subsample.ntransactionsamplecode)){oldSelectedSubSample.splice(index,1);}});if(oldSelectedSubSample.length>0){masterData=_objectSpread(_objectSpread({},masterData),{},{selectedSubSample:oldSelectedSubSample});}var selectedTest=getSameRecordFromTwoArrays(oldSelectedTest,masterData.selectedSubSample,'npreregno');masterData=_objectSpread(_objectSpread({},masterData),{},{selectedTest:selectedTest});}if(inputData.checkBoxOperation===7){// masterData = {\n//     ...masterData,\n//     APSelectedTest:responseData.APSelectedTest,\n//     AP_TEST:responseData.AP_TEST,\n//     ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\n// }\nswitch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":var ResponseData=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var RegistrationTestComment1=[];if(inputData.masterData.RegistrationTestComment!==undefined){RegistrationTestComment1=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(ResponseData));}var ntransactiontestcode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(RegistrationTestComment1,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":{var _ResponseData=response.data.RegistrationTestAttachment?response.data.RegistrationTestAttachment:[];var RegistrationTestAttachment1=[];if(inputData.masterData.RegistrationTestAttachment!==undefined){RegistrationTestAttachment1=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(_ResponseData));}var _ntransactiontestcode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1,_ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":var resultResponseData=response.data.RegistrationParameter?response.data.RegistrationParameter:[];var RegistrationParameter1=[].concat(_toConsumableArray(inputData.masterData.RegistrationParameter),_toConsumableArray(resultResponseData));var ntransactiontestcode1=masterData.selectedTest.length>0?masterData.selectedTest[0].ntransactiontestcode:-1;RegistrationParameter=getRecordBasedOnPrimaryKeyName(RegistrationParameter1,ntransactiontestcode1,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;default:var ResponseData1=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var RegistrationTestComment2=[];if(inputData.masterData.RegistrationTestComment!==undefined){RegistrationTestComment2=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(ResponseData1));}var ntransactionTestCode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(RegistrationTestComment2,ntransactionTestCode,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}masterData['RegistrationTestComment']=RegistrationTestComment;masterData['RegistrationTestAttachment']=RegistrationTestAttachment;masterData[\"RegistrationParameter\"]=RegistrationParameter;masterData[\"RegistrationComment\"]=RegistrationComment;}if(inputData.checkBoxOperation===3||inputData.checkBoxOperation===5){masterData=_objectSpread(_objectSpread({},masterData),{},{selectedTest:masterData.RegistrationGetTest.length>0?[masterData.RegistrationGetTest[0]]:[]});switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":var _ResponseData2=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(_ResponseData2));}var _ntransactiontestcode2=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment,_ntransactiontestcode2,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":{var _ResponseData4=response.data.RegistrationTestAttachment?response.data.RegistrationTestAttachment:[];var _RegistrationTestAttachment=[];if(inputData.masterData.RegistrationTestAttachment!==undefined){_RegistrationTestAttachment=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(_ResponseData4));}var _ntransactiontestcode4=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(_RegistrationTestAttachment,_ntransactiontestcode4,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":var _resultResponseData=response.data.RegistrationParameter?response.data.RegistrationParameter:[];var _RegistrationParameter=[].concat(_toConsumableArray(inputData.masterData.RegistrationParameter),_toConsumableArray(_resultResponseData));var _ntransactiontestcode3=masterData.selectedTest.length>0?masterData.selectedTest[0].ntransactiontestcode:-1;RegistrationParameter=getRecordBasedOnPrimaryKeyName(_RegistrationParameter,_ntransactiontestcode3,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_SAMPLECOMMENTS\":RegistrationComment=response.data.RegistrationComment?_toConsumableArray(response.data.RegistrationComment):[];activeName=\"RegistrationComment\";dataStateName=\"sampleCommentsDataState\";break;default:var _ResponseData3=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment2=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment2=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(_ResponseData3));}var _ntransactionTestCode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment2,_ntransactionTestCode,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}masterData['RegistrationTestComment']=RegistrationTestComment;masterData['RegistrationTestAttachment']=RegistrationTestAttachment;masterData[\"RegistrationParameter\"]=RegistrationParameter;masterData[\"RegistrationComment\"]=RegistrationComment;}var _inputData=inputData,testskip=_inputData.testskip,testtake=_inputData.testtake,subsampleskip=_inputData.subsampleskip,subsampletake=_inputData.subsampletake;var bool=false;if(inputData.masterData.RegistrationGetSubSample.length<inputData.subsampleskip){testskip=0;subsampleskip=0;bool=true;}if(bool){skipInfo={testskip:testskip,testtake:testtake,subsampleskip:subsampleskip,subsampletake:subsampletake};}}else{//let oldSelectedTest = inputData.masterData.selectedTest\n//  let oldSelectedSubSample = inputData.masterData.selectedSubSample\nfillRecordBasedOnCheckBoxSelection(inputData.masterData,response.data,inputData.childTabsKey,inputData.checkBoxOperation,\"npreregno\",inputData.removeElementFromArray);masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:inputData.selectedSample,selectedPreregno:inputData.npreregno,selectedTest:inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[],selectedSubSample:inputData.masterData.RegistrationGetSubSample});var _RegistrationTestComment3=[];var _RegistrationParameter2=[];var _RegistrationTestAttachment2=[];var _RegistrationComment=[];if(inputData.checkBoxOperation===7||inputData.checkBoxOperation===1){var wholeTestList=masterData.RegistrationGetTest.map(function(b){return b.ntransactiontestcode;});oldSelectedTest.forEach(function(test,index){if(!wholeTestList.includes(test.ntransactiontestcode)){oldSelectedTest.splice(index,1);}});var keepOld=false;var _ntransactiontestcode5;var npreregno;if(oldSelectedTest.length>0){keepOld=true;masterData=_objectSpread(_objectSpread({},masterData),{},{selectedTest:oldSelectedTest});}else{_ntransactiontestcode5=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:\"\";npreregno=inputData.masterData.RegistrationGetSample.length>0?inputData.masterData.RegistrationGetSample[0].npreregno:\"\";}switch(inputData.activeTestTab){case\"IDS_PARAMETERRESULTS\":_RegistrationParameter2=keepOld?inputData.masterData.RegistrationParameter?inputData.masterData.RegistrationParameter:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,_ntransactiontestcode5,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_TESTATTACHMENTS\":{_RegistrationTestAttachment2=keepOld?inputData.masterData.RegistrationTestAttachment?inputData.masterData.RegistrationTestAttachment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment,_ntransactiontestcode5,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_TESTCOMMENTS\":_RegistrationTestComment3=keepOld?inputData.masterData.RegistrationTestComment?inputData.masterData.RegistrationTestComment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment,_ntransactiontestcode5,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_SAMPLECOMMENTS\":_RegistrationComment=keepOld?inputData.masterData.RegistrationComment?inputData.masterData.RegistrationComment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment,npreregno,\"npreregno\");activeName=\"RegistrationComment\";dataStateName=\"sampleCommentsDataState\";break;default:_RegistrationParameter2=keepOld?inputData.masterData.RegistrationParameter?inputData.masterData.RegistrationParameter:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,_ntransactiontestcode5,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}}else if(inputData.checkBoxOperation===5){switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":var _ResponseData5=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment4=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment4=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(_ResponseData5));}var _ntransactiontestcode6=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;_RegistrationTestComment3=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment4,_ntransactiontestcode6,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":{var _ResponseData7=response.data.RegistrationTestAttachment?response.data.RegistrationTestAttachment:[];var _RegistrationTestAttachment3=[];if(inputData.masterData.RegistrationTestAttachment!==undefined){_RegistrationTestAttachment3=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(_ResponseData7));}var _ntransactiontestcode8=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;_RegistrationTestAttachment2=getRecordBasedOnPrimaryKeyName(_RegistrationTestAttachment3,_ntransactiontestcode8,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":var _resultResponseData2=response.data.RegistrationParameter?response.data.RegistrationParameter:[];var _RegistrationParameter3=[].concat(_toConsumableArray(inputData.masterData.RegistrationParameter),_toConsumableArray(_resultResponseData2));var _ntransactiontestcode7=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;_RegistrationParameter2=getRecordBasedOnPrimaryKeyName(_RegistrationParameter3,_ntransactiontestcode7,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_SAMPLECOMMENTS\":_RegistrationComment=response.data.RegistrationComment?_toConsumableArray(response.data.RegistrationComment):[];activeName=\"RegistrationComment\";dataStateName=\"sampleCommentsDataState\";break;default:var _ResponseData6=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment5=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment5=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(_ResponseData6));}var _ntransactionTestCode2=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;_RegistrationTestComment3=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment5,_ntransactionTestCode2,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}// RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n}else{switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":_RegistrationTestComment3=response.data.RegistrationTestComment?_toConsumableArray(response.data.RegistrationTestComment):[];activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":{_RegistrationTestAttachment2=response.data.RegistrationTestAttachment?_toConsumableArray(response.data.RegistrationTestAttachment):[];activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":_RegistrationParameter2=response.data.RegistrationParameter?_toConsumableArray(response.data.RegistrationParameter):[];activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_SAMPLECOMMENTS\":_RegistrationComment=response.data.RegistrationComment?_toConsumableArray(response.data.RegistrationComment):[];activeName=\"RegistrationComment\";dataStateName=\"sampleCommentsDataState\";break;default:_RegistrationParameter2=response.data.RegistrationParameter?_toConsumableArray(response.data.RegistrationParameter):[];activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}}masterData['RegistrationTestComment']=_RegistrationTestComment3;masterData[\"RegistrationParameter\"]=_RegistrationParameter2;masterData['RegistrationTestAttachment']=_RegistrationTestAttachment2;masterData['RegistrationComment']=_RegistrationComment;var _inputData2=inputData,_testskip=_inputData2.testskip,_testtake=_inputData2.testtake;var _bool=false;if(inputData.masterData.RegistrationGetTest.length<inputData.testskip){_testskip=0;_bool=true;}if(_bool){skipInfo={testskip:_testskip,testtake:_testtake};}}if(inputData.masterData.selectedSample&&inputData.sampleGridDataState&&inputData.masterData.selectedSample.length<=inputData.sampleGridDataState.skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{sampleGridDataState:_objectSpread(_objectSpread({},inputData.sampleGridDataState),{},{skip:0,sort:undefined,filter:undefined})});}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{sampleGridDataState:_objectSpread(_objectSpread({},inputData.sampleGridDataState),{},{sort:undefined,filter:undefined})});}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";masterData['searchedTest']=undefined;}if(inputData.searchSubSampleRef!==undefined&&inputData.searchSubSampleRef.current!==null){inputData.searchSubSampleRef.current.value=\"\";masterData['searchedSubSample']=undefined;}// let inputParam = { attachmentskip: undefined }\nif(inputData[dataStateName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:masterData,loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab,activeTestTab:inputData.activeTestTab,skip:undefined,take:undefined},skipInfo)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});}else{var bool=false;var skipInfo={};var _inputData3=inputData,testskip=_inputData3.testskip,testtake=_inputData3.testtake,subsampletake=_inputData3.subsampletake,subsampleskip=_inputData3.subsampleskip;var oldSelectedTest=inputData.masterData.selectedTest;var oldSelectedSubSample=inputData.masterData.selectedSubSample;// let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\nvar isGrandChildGetRequired=false;var TestSelected=[];var subSampleSelected=[];if(inputData[\"statusNone\"]){TestSelected=getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest,inputData.removeElementFromArray[0].npreregno,\"npreregno\");subSampleSelected=getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample,inputData.removeElementFromArray[0].npreregno,\"npreregno\");}else{TestSelected=filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest,inputData.removeElementFromArray[0].npreregno,\"npreregno\");subSampleSelected=filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample,inputData.removeElementFromArray[0].npreregno,\"npreregno\");}if(TestSelected.length>0){isGrandChildGetRequired=false;}else{isGrandChildGetRequired=true;}fillRecordBasedOnCheckBoxSelection(inputData.masterData,inputData.selectedSample,inputData.childTabsKey,inputData.checkBoxOperation,\"npreregno\",inputData.removeElementFromArray);if(isGrandChildGetRequired){var selectedSample=inputData.selectedSample;var filterTestSameOldSelectedTest=getSameRecordFromTwoArrays(oldSelectedTest,inputData.masterData.RegistrationGetTest,\"ntransactiontestcode\");var selectedTest=filterTestSameOldSelectedTest.length>0?filterTestSameOldSelectedTest:inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[];var ntransactiontestcode=selectedTest.length>0?selectedTest.map(function(x){return x.ntransactiontestcode;}).join(\",\"):\"-1\";var selectedSubSample=inputData.masterData.RegistrationGetSubSample;if(subSample){var filterSelectedSubSample=getSameRecordFromTwoArrays(oldSelectedSubSample,inputData.masterData.RegistrationGetSubSample,\"ntransactionsamplecode\");selectedSubSample=filterSelectedSubSample.length>0?filterSelectedSubSample:[inputData.masterData.RegistrationGetSubSample[0]];if(inputData.masterData.RegistrationGetSubSample.length<=inputData.subsampleskip){subsampleskip=0;skipInfo={subsampletake:subsampletake,subsampleskip:subsampleskip};}}var masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:selectedSample,selectedSubSample:selectedSubSample,selectedTest:selectedTest});if(inputData.masterData.RegistrationGetTest.length<=inputData.testskip){testskip=0;bool=true;}if(bool){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{testskip:testskip,testtake:testtake});}inputData=_objectSpread(_objectSpread({},inputData),{},_defineProperty({childTabsKey:[\"RegistrationTestComment\",\"RegistrationParameter\"],ntransactiontestcode:ntransactiontestcode,masterData:masterData,selectedTest:selectedTest,selectedSubSample:selectedSubSample,checkBoxOperation:3,skipInfo:skipInfo},\"masterData\",masterData));if(subSample){if(selectedTest.length===0){inputData[\"npreregno\"]=selectedSubSample.map(function(x){return x.npreregno;}).join(\",\");inputData[\"ntransactionsamplecode\"]=selectedSubSample.map(function(x){return x.ntransactionsamplecode;}).join(\",\");inputData[\"checkBoxOperation\"]=3;inputData[\"childTabsKey\"]=[\"RegistrationGetTest\"];dispatch(getRegistrationTestDetail(inputData,true));}else{dispatch(getTestChildTabDetailRegistration(inputData,true));}}else{dispatch(getTestChildTabDetailRegistration(inputData,true));}}else{var _masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:inputData.selectedSample,selectedPreregno:inputData.npreregno,selectedTest:TestSelected?TestSelected:inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[],// RegistrationTestComment,\nselectedSubSample:subSampleSelected?subSampleSelected:inputData.masterData.RegistrationGetSubSample});var subsamplecheck=true;if(subSample){var SubSampleSelected=getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample,inputData.removeElementFromArray[0].npreregno,\"npreregno\");if(SubSampleSelected.length>0){var _filterSelectedSubSample=getSameRecordFromTwoArrays(oldSelectedSubSample,inputData.masterData.RegistrationGetSubSample,\"ntransactionsamplecode\");if(_filterSelectedSubSample.length===0){var wholeSubSample=_masterData.RegistrationGetSubSample.map(function(b){return b.ntransactionsamplecode;});oldSelectedSubSample.forEach(function(test,index){if(!wholeSubSample.includes(test.ntransactionsamplecode)){oldSelectedSubSample.splice(index,1);}return null;});if(oldSelectedSubSample.length===0&&wholeSubSample.length>0&&_masterData.selectedTest.length===0){var selectedSubSample1=[inputData.masterData.RegistrationGetSubSample[0]];_masterData=_objectSpread(_objectSpread({},_masterData),{},{selectedSubSample:selectedSubSample1,selectedTest:[]});inputData=_objectSpread(_objectSpread({},inputData),_masterData);inputData[\"npreregno\"]=selectedSubSample1.map(function(x){return x.npreregno;}).join(\",\");inputData[\"ntransactionsamplecode\"]=selectedSubSample1.map(function(x){return x.ntransactionsamplecode;}).join(\",\");inputData[\"checkBoxOperation\"]=3;inputData[\"childTabsKey\"]=[\"RegistrationGetTest\"];subsamplecheck=false;dispatch(getRegistrationTestDetail(inputData,true));}}else{oldSelectedSubSample=_filterSelectedSubSample;}}else{var _wholeSubSample=_masterData.RegistrationGetSubSample.map(function(b){return b.ntransactionsamplecode;});oldSelectedSubSample.forEach(function(test,index){if(!_wholeSubSample.includes(test.ntransactionsamplecode)){oldSelectedSubSample.splice(index,1);}return null;});}if(subsamplecheck){_masterData=_objectSpread(_objectSpread({},_masterData),{},{selectedSubSample:oldSelectedSubSample});}if(inputData.masterData.RegistrationGetSubSample.length<=inputData.subsampleskip){subsampleskip=0;_skipInfo={subsampleskip:subsampleskip,subsampletake:subsampletake};}}var wholeTestList=_masterData.RegistrationGetTest.map(function(b){return b.ntransactiontestcode;});oldSelectedTest.forEach(function(test,index){if(!wholeTestList.includes(test.ntransactiontestcode)){oldSelectedTest.splice(index,1);}return null;});var keepOld=false;var _ntransactiontestcode9;if(oldSelectedTest.length>0){keepOld=true;_masterData=_objectSpread(_objectSpread({},_masterData),{},{selectedTest:oldSelectedTest});}else{_ntransactiontestcode9=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:\"-1\";}_masterData[\"RegistrationTestComment\"]=keepOld?inputData.masterData.RegistrationTestComment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment,_ntransactiontestcode9,\"ntransactiontestcode\");_masterData[\"RegistrationParameter\"]=keepOld?inputData.masterData.RegistrationParameter:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,_ntransactiontestcode9,\"ntransactiontestcode\");var _skipInfo={};if(inputData.masterData.RegistrationGetTest.length<=inputData.testskip){testskip=0;bool=true;}if(bool){_skipInfo=_objectSpread(_objectSpread({},_skipInfo),{},{testskip:testskip,testtake:testtake});}var dataStateArray=[{activeName:'selectedSample',dataStateName:'sampleGridDataState'},{activeName:'RegistrationSourceCountry',dataStateName:'sourceDataState'},{activeName:'RegistrationTestComment',dataStateName:'testCommentDataState'},{activeName:'RegistrationParameter',dataStateName:'resultDataState'}];dataStateArray.map(function(arr){if(inputData[arr.dataStateName]&&_masterData[arr.activeName]&&_masterData[arr.activeName].length<=inputData[arr.dataStateName].skip){_skipInfo=_objectSpread(_objectSpread({},_skipInfo),{},_defineProperty({},arr.dataStateName,_objectSpread(_objectSpread({},inputData[arr.dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{_skipInfo=_objectSpread(_objectSpread({},_skipInfo),{},_defineProperty({},arr.dataStateName,_objectSpread(_objectSpread({},inputData[arr.dataStateName]),{},{sort:undefined,filter:undefined})));}return null;});dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:_masterData,loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab,activeTestTab:inputData.activeTestTab},_skipInfo)});}}};}export function getRegistrationTestDetail(inputData,isServiceRequired){return function(dispatch){var inputParamData={nsampletypecode:inputData.nsampletypecode,nregtypecode:inputData.nregtypecode,nregsubtypecode:inputData.nregsubtypecode,npreregno:inputData.npreregno,ntransactionsamplecode:inputData.ntransactionsamplecode,ntransactionstatus:inputData.ntransactionstatus,napprovalconfigcode:inputData.napprovalconfigcode,activeTestTab:inputData.activeTestTab,activeSampleTab:inputData.activeSampleTab,activeSubSampleTab:inputData.activeSubSampleTab,userinfo:inputData.userinfo,ndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,checkBoxOperation:inputData.checkBoxOperation,nneedsubsample:inputData.nneedsubsample};var subSample=inputData.nneedsubsample;var activeName=\"\";var dataStateName=\"\";dispatch(initRequest(true));if(isServiceRequired){rsapi.post(\"registration/getRegistrationTest\",inputParamData).then(function(response){sortData(response.data);var oldSelectedTest=inputData.masterData.selectedTest||[];var oldSelectedSubSample=inputData.masterData.selectedSubSample||[];fillRecordBasedOnCheckBoxSelection(inputData.masterData,response.data,inputData.childTabsKey,inputData.checkBoxOperation,\"ntransactionsamplecode\",inputData.removeElementFromArray);var masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSubSample:inputData.selectedSubSample,selectedTransactionsamplecode:inputData.ntransactionsamplecode,selectedTest:inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[]// RegistrationTestComment,\n});//let wholeRegistrationTestComments = [];\nvar RegistrationTestComment=[];var RegistrationTestAttachment=[];var RegistrationParameter=[];var RegistrationSampleComment=[];var RegistrationSampleAttachment=[];if(inputData.checkBoxOperation===1){var wholeTestList=masterData.RegistrationGetTest.map(function(b){return b.ntransactiontestcode;});oldSelectedTest.forEach(function(test,index){if(!wholeTestList.includes(test.ntransactiontestcode)){oldSelectedTest.splice(index,1);}});var keepOld=false;var ntransactiontestcode;if(oldSelectedTest.length>0){keepOld=true;masterData=_objectSpread(_objectSpread({},masterData),{},{selectedTest:oldSelectedTest});}else{ntransactiontestcode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:\"\";}switch(inputData.activeTestTab){case\"IDS_PARAMETERRESULTS\":RegistrationParameter=keepOld?inputData.masterData.RegistrationParameter?inputData.masterData.RegistrationParameter:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_TESTCOMMENTS\":RegistrationTestComment=keepOld?inputData.masterData.RegistrationTestComment?inputData.masterData.RegistrationTestComment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":RegistrationTestAttachment=keepOld?inputData.masterData.RegistrationTestAttachment?inputData.masterData.RegistrationTestAttachment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";break;default:RegistrationParameter=keepOld?inputData.masterData.RegistrationParameter?inputData.masterData.RegistrationParameter:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}}else if(inputData.checkBoxOperation===5){switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":var ResponseData=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var RegistrationTestComment1=[];if(inputData.masterData.RegistrationTestComment!==undefined){RegistrationTestComment1=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(ResponseData));}var _ntransactiontestcode10=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(RegistrationTestComment1,_ntransactiontestcode10,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTCOMMENTS\":{var _ResponseData8=response.data.RegistrationTestAttachment?response.data.RegistrationTestAttachment:[];var RegistrationTestAttachment1=[];if(inputData.masterData.RegistrationTestAttachment!==undefined){RegistrationTestAttachment1=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(_ResponseData8));}var _ntransactiontestcode11=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1,_ntransactiontestcode11,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":var resultResponseData=response.data.RegistrationParameter?response.data.RegistrationParameter:[];var RegistrationParameter1=[].concat(_toConsumableArray(inputData.masterData.RegistrationParameter),_toConsumableArray(resultResponseData));var ntransactiontestcode1=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationParameter=getRecordBasedOnPrimaryKeyName(RegistrationParameter1,ntransactiontestcode1,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;default:var ResponseData1=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var RegistrationTestComment2=[];if(inputData.masterData.RegistrationTestComment!==undefined){RegistrationTestComment2=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(ResponseData1));}var ntransactionTestCode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(RegistrationTestComment2,ntransactionTestCode,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}// RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n}else if(inputData.checkBoxOperation===7){var testList=reArrangeArrays(inputData.masterData.RegistrationGetSubSample,response.data.RegistrationGetTest,\"ntransactionsamplecode\");masterData=_objectSpread(_objectSpread({},masterData),{},{selectedTest:testList?testList.length>0?[testList[0]]:[]:[],RegistrationGetTest:testList?testList.length>0?testList:[]:[]//ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\n});switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":var _ResponseData9=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment6=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment6=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(_ResponseData9));}var _ntransactiontestcode12=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment6,_ntransactiontestcode12,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTCOMMENTS\":{var _ResponseData11=response.data.RegistrationTestAttachment?response.data.RegistrationTestAttachment:[];var _RegistrationTestAttachment4=[];if(inputData.masterData.RegistrationTestAttachment!==undefined){_RegistrationTestAttachment4=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(_ResponseData11));}var _ntransactiontestcode14=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(_RegistrationTestAttachment4,_ntransactiontestcode14,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";}break;case\"IDS_PARAMETERRESULTS\":var _resultResponseData3=response.data.RegistrationParameter?response.data.RegistrationParameter:[];// let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\nvar _RegistrationParameter4=_toConsumableArray(_resultResponseData3);var _ntransactiontestcode13=testList?testList.length>0?testList[0].ntransactiontestcode:inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1:-1;RegistrationParameter=getRecordBasedOnPrimaryKeyName(_RegistrationParameter4,_ntransactiontestcode13,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;default:var _ResponseData10=response.data.RegistrationTestComment?response.data.RegistrationTestComment:[];var _RegistrationTestComment7=[];if(inputData.masterData.RegistrationTestComment!==undefined){_RegistrationTestComment7=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(_ResponseData10));}var _ntransactionTestCode3=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:-1;RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_RegistrationTestComment7,_ntransactionTestCode3,\"ntransactiontestcode\");activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}// RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n}else{switch(inputData.activeTestTab){case\"IDS_TESTCOMMENTS\":RegistrationTestComment=response.data.RegistrationTestComment?_toConsumableArray(response.data.RegistrationTestComment):[];activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_TESTATTACHMENTS\":RegistrationTestAttachment=response.data.RegistrationTestAttachment?_toConsumableArray(response.data.RegistrationTestAttachment):[];activeName=\"RegistrationTestAttachment\";dataStateName=\"testCommentDataState\";break;case\"IDS_PARAMETERRESULTS\":RegistrationParameter=response.data.RegistrationParameter?_toConsumableArray(response.data.RegistrationParameter):[];activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;default:RegistrationParameter=response.data.RegistrationParameter?_toConsumableArray(response.data.RegistrationParameter):[];activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;}}if(subSample){var wholeSubsampleList=masterData.RegistrationGetSubSample.map(function(b){return b.ntransactionsamplecode;});oldSelectedSubSample.map(function(test,index){if(!wholeSubsampleList.includes(test.ntransactionsamplecode)){oldSelectedSubSample.splice(index,1);}return null;});var _keepOld=false;var ntransactionsamplecode;if(oldSelectedSubSample.length>0){_keepOld=true;}else{ntransactionsamplecode=masterData.selectedSubSample[0].ntransactionsamplecode;}switch(inputData.activeSubSampleTab){case\"IDS_SUBSAMPLECOMMENTS\":RegistrationSampleComment=_keepOld?inputData.masterData.RegistrationSampleComment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment,ntransactionsamplecode,\"ntransactionsamplecode\");activeName=\"RegistrationSampleComment\";dataStateName=\"subSampleCommentDataState\";break;default:RegistrationSampleAttachment=_keepOld?inputData.masterData.RegistrationSampleAttachment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment,ntransactionsamplecode,\"ntransactionsamplecode\");activeName=\"RegistrationSampleAttachment\";dataStateName=\"subSampleAttachmentDataState\";break;}}masterData['RegistrationTestComment']=RegistrationTestComment;masterData['RegistrationTestAttachment']=RegistrationTestAttachment;masterData[\"RegistrationParameter\"]=RegistrationParameter;masterData[\"RegistrationSampleComment\"]=RegistrationSampleComment;masterData[\"RegistrationSampleAttachment\"]=RegistrationSampleAttachment;var _inputData4=inputData,testskip=_inputData4.testskip,testtake=_inputData4.testtake;var bool=false;var skipInfo={};if(inputData.masterData.RegistrationGetTest.length<inputData.testskip){testskip=0;bool=true;}if(bool){skipInfo={testskip:testskip,testtake:testtake};}if(inputData.masterData.selectedSample&&inputData.sampleGridDataState&&inputData.masterData.selectedSample.length<=inputData.sampleGridDataState.skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{sampleGridDataState:_objectSpread(_objectSpread({},inputData.sampleGridDataState),{},{skip:0,sort:undefined,filter:undefined})});}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{sampleGridDataState:_objectSpread(_objectSpread({},inputData.sampleGridDataState),{},{sort:undefined,filter:undefined})});}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";masterData['searchedTest']=undefined;}//  let inputParam = { attachmentskip: undefined }\nif(inputData[dataStateName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:masterData,loading:false,showFilter:false,activeTabIndex:inputData.activeTabIndex,activeSampleTab:inputData.activeSampleTab,activeTestTab:inputData.activeTestTab,skip:undefined,take:undefined},skipInfo)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});}else{var oldSelectedTest=inputData.masterData.selectedTest;var TestSelected=getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest,inputData.removeElementFromArray[0].npreregno,\"npreregno\");var isGrandChildGetRequired=false;if(TestSelected.length>0){isGrandChildGetRequired=true;}else{isGrandChildGetRequired=false;}fillRecordBasedOnCheckBoxSelection(inputData.masterData,inputData.selectedSubSample,inputData.childTabsKey,inputData.checkBoxOperation,\"ntransactionsamplecode\",inputData.removeElementFromArray);if(isGrandChildGetRequired){var ntransactiontestcode=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode.toString():\"-1\";var selectedSubSample=inputData.selectedSubSample;// let selectedPreregno = inputData.npreregno;\nvar selectedTest=inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[];// let selectedSubSample = inputData.masterData.RegistrationGetSubSample\nvar masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSubSample:selectedSubSample,selectedTest:selectedTest});inputData=_objectSpread(_objectSpread({},inputData),{},{childTabsKey:[\"RegistrationTestAttachment\",\"RegistrationTestComment\",\"RegistrationParameter\"],ntransactiontestcode:ntransactiontestcode,masterData:masterData,selectedTest:selectedTest,selectedSubSample:selectedSubSample,checkBoxOperation:3});dispatch(getTestChildTabDetailRegistration(inputData,true));}else{var _masterData2=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSubSample:inputData.selectedSubSample,selectedTransactioncode:inputData.ntransactionsamplecode,selectedTest:inputData.masterData.RegistrationGetTest.length>0?[inputData.masterData.RegistrationGetTest[0]]:[]});var wholeTestList=_masterData2.RegistrationGetTest.map(function(b){return b.ntransactiontestcode;});oldSelectedTest.forEach(function(test,index){if(!wholeTestList.includes(test.ntransactiontestcode)){oldSelectedTest.splice(index,1);}return null;});var keepOld=false;var _ntransactiontestcode15;if(oldSelectedTest.length>0){keepOld=true;_masterData2=_objectSpread(_objectSpread({},_masterData2),{},{selectedTest:oldSelectedTest});}else{_ntransactiontestcode15=inputData.masterData.RegistrationGetTest.length>0?inputData.masterData.RegistrationGetTest[0].ntransactiontestcode:\"-1\";}_masterData2[\"RegistrationTestComment\"]=keepOld?inputData.masterData.RegistrationTestComment?inputData.masterData.RegistrationTestComment:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment,_ntransactiontestcode15,\"ntransactiontestcode\");_masterData2[\"RegistrationParameter\"]=keepOld?inputData.masterData.RegistrationParameter?inputData.masterData.RegistrationParameter:[]:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter,_ntransactiontestcode15,\"ntransactiontestcode\");var skipInfo={};var dataStateArray=[{activeName:'selectedSample',dataStateName:'sampleGridDataState'},{activeName:'RegistrationSourceCountry',dataStateName:'sourceDataState'},{activeName:'RegistrationTestComment',dataStateName:'testCommentDataState'},{activeName:'RegistrationParameter',dataStateName:'resultDataState'}];dataStateArray.map(function(arr){if(inputData[arr.dataStateName]&&_masterData2[arr.activeName]&&_masterData2[arr.activeName].length<=inputData[arr.dataStateName].skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},arr.dataStateName,_objectSpread(_objectSpread({},inputData[arr.dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},arr.dataStateName,_objectSpread(_objectSpread({},inputData[arr.dataStateName]),{},{sort:undefined,filter:undefined})));}return null;});dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:_masterData2,loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab,activeTestTab:inputData.activeTestTab,activeTabIndex:inputData.activeTabIndex},skipInfo)});}}};}export function acceptRegistration(inputParam,LoginProps){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/acceptRegistration\",inputParam.inputData).then(function(response){if(response.data.rtn===undefined||response.data.rtn===\"Success\"||response.data.rtn===\"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"||response.data.rtn===\"IDS_ALLSAMPLESAREREGISTERED\"||response.data.rtn===\"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\"){replaceUpdatedObject(response.data[\"RegistrationGetSample\"],LoginProps.RegistrationGetSample,\"npreregno\");replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],LoginProps.RegistrationGetSubSample,\"ntransactionsamplecode\");replaceUpdatedObject(response.data[\"RegistrationGetTest\"],LoginProps.RegistrationGetTest,\"ntransactiontestcode\");delete response.data[\"RegistrationGetSample\"];delete response.data[\"RegistrationGetSubSample\"];delete response.data[\"RegistrationGetTest\"];var masterData=_objectSpread(_objectSpread(_objectSpread({},LoginProps),response.data),{},{selectedSample:replaceUpdatedObject(response.data[\"selectedSample\"],LoginProps.selectedSample,\"npreregno\"),selectedSubSample:replaceUpdatedObject(response.data[\"selectedSubSample\"],LoginProps.selectedSubSample,\"ntransactionsamplecode\"),selectedTest:replaceUpdatedObject(response.data[\"selectedTest\"],LoginProps.selectedTest,\"ntransactiontestcode\")});var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},{loading:false,loadEsign:false,openModal:false,showSample:undefined});dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));if(response.data.rtn===\"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"||response.data.rtn===\"IDS_ALLSAMPLESAREREGISTERED\"||response.data.rtn===\"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\"){toast.info(intl.formatMessage({id:response.data.rtn}));}}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,openModal:false}});toast.info(intl.formatMessage({id:response.data.rtn}));}}).catch(function(error){// toast.error(error.message);\ndispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{// toast.info(error.response.data[\"rtn\"] );\ntoast.info(intl.formatMessage({id:error.response.data[\"rtn\"]}));}});};}export var addMoreTest=function addMoreTest(inputParam,ncontrolCode){return function(dispatch){var sampleList=inputParam.sampleList;var value=false;if(inputParam.selectedSample&&inputParam.selectedSample.length>0){if(inputParam.selectedSubSample&&inputParam.selectedSubSample.length>0){value=inputParam.selectedSubSample.some(function(obj){return obj.nspecsampletypecode!==inputParam.selectedSubSample[0].nspecsampletypecode;});if(value){return toast.info(intl.formatMessage({id:\"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\"}));}sampleList=sampleList?_toConsumableArray(sampleList.slice(inputParam.skip,inputParam.take)):[];var selectedsample=getSameRecordFromTwoArrays(sampleList,inputParam.selectedSample,\"npreregno\");// const selectsubsample = getSameRecordFromTwoArrays(subsampleList, inputParam.selectedsubsample, \"ntransactionsamplecode\");\nif(selectedsample&&selectedsample.length>0){var findTransactionStatus=_toConsumableArray(new Set(selectedsample.map(function(item){return item.ntransactionstatus;})));if(findTransactionStatus.length===1){if(findTransactionStatus[0]!==transactionStatus.REJECT&&findTransactionStatus[0]!==transactionStatus.CANCELLED){if(findTransactionStatus[0]!==transactionStatus.RELEASED){// if (selectsubsample && selectsubsample.length > 0) {\n//     const findSubSampleStatus = [...new Set(selectsubsample.map(item => item.ntransactionstatus))];\n//\n//     if (findSubSampleStatus[0] !== transactionStatus.REJECT && findSubSampleStatus[0] !== transactionStatus.CANCELLED) \n//     {                    \nvar findApprovalVersion=_toConsumableArray(new Set(selectedsample.map(function(item){return item.napprovalversioncode;})));if(findApprovalVersion.length===1){var findSampleSpec=_toConsumableArray(new Set(selectedsample.map(function(item){return item.nallottedspeccode;})));//const findComponent = [...new Set(selectsubsample.map(item => item.ncomponentcode))];\nif(findSampleSpec.length===1)//&& findComponent.length === 1 \n{inputParam[\"snspecsampletypecode\"]=inputParam.selectedSubSample&&_toConsumableArray(new Set(inputParam.selectedSubSample.map(function(x){return x.nspecsampletypecode;}))).join(\",\");dispatch(initRequest(true));var urlArray=[];var TestGet=rsapi.post(\"/registration/getMoreTest\",_objectSpread({},inputParam));urlArray[0]=TestGet;var TestPackageGet=rsapi.post(\"/registration/getMoreTestPackage\",_objectSpread({},inputParam));urlArray[1]=TestPackageGet;Axios.all(urlArray).then(function(response){var PackageData=[];var PackageDataMap=constructOptionList(response[1].data||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{availableTest:response[0].data,AllTest:response[0].data,TestPackage:PackageData,loadChildTest:true,loading:false,ncontrolCode:ncontrolCode,screenName:\"IDS_TEST\",operation:\"create\",openModal:true,parentPopUpSize:\"lg\",selectedRecord:{},showSample:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(_this.props.formatMessage({id:error.response.data}));}});}else{toast.info(intl.formatMessage({id:\"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\"}));}}else{toast.info(intl.formatMessage({id:\"IDS_PLEASESELECTSAMPLEWITHSAMEAPPROVALCONFIG\"}));}//     }\n//     else {\n//         toast.info(intl.formatMessage({ id: \"IDS_SUBSAMPLEISREJECTEDORCANCELLED\" }));\n//     }\n// }                               \n}else{toast.info(intl.formatMessage({id:\"IDS_TESTCANNOTBEFORRELEASEDSAMPLES\"}));}}else{////     toast.info(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORCANCELLEDREJECTSAMPLES\" }));\ntoast.info(intl.formatMessage({id:\"IDS_SAMPLEISREJECTEDORCANCELLED\"}));}}else{toast.info(intl.formatMessage({id:\"IDS_PLEASESELECTSAMPLEWITHSAMESTATUS\"}));}}else{toast.info(intl.formatMessage({id:\"IDS_SELECTSAMPLE\"}));}}else{toast.info(intl.formatMessage({id:\"IDS_SELECTSUBSAMPLE\"}));}}else{toast.info(intl.formatMessage({id:\"IDS_SELECTSAMPLE\"}));}};};export var createRegistrationTest=function createRegistrationTest(inputParam,masterData,modalName){return function(dispatch){dispatch(initRequest(true));rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,_objectSpread({},inputParam.inputData)).then(function(response){var _respObject;var RegistrationGetTest=updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"],response.data[\"RegistrationGetTest\"]);masterData=_objectSpread(_objectSpread({},masterData),{},{RegistrationGetTest:sortData(RegistrationGetTest,\"descending\",\"ntransactiontestcode\"),selectedTest:response.data[\"RegistrationGetTest\"],RegistrationParameter:response.data.RegistrationParameter// RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, masterData.RegistrationGetSample, 'npreregno')\n});var respObject=(_respObject={masterData:masterData},_defineProperty(_respObject,modalName,false),_defineProperty(_respObject,\"loading\",false),_defineProperty(_respObject,\"loadChildTest\",false),_defineProperty(_respObject,\"showSample\",undefined),_defineProperty(_respObject,\"openModal\",false),_defineProperty(_respObject,\"selectedRecord\",{}),_respObject);inputParam.postParamList[0]['clearFilter']='no';inputParam.postParamList[1]['clearFilter']='no';inputParam.postParamList[2]['clearFilter']='yes';dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));// dispatch({\n//     type: DEFAULT_RETURN,\n//     payload: {\n//         masterData,\n//         [modalName]: false,\n//         loading: false,\n//         loadChildTest: false,\n//         showSample: undefined,\n//         openModal: false,\n//         selectedRecord: {}\n//     }\n// });\n}).catch(function(error){if(error.response.status===500){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error.message);}else{var _payload2;dispatch({type:DEFAULT_RETURN,payload:(_payload2={},_defineProperty(_payload2,modalName,false),_defineProperty(_payload2,\"loading\",false),_defineProperty(_payload2,\"loadChildTest\",false),_defineProperty(_payload2,\"showSample\",undefined),_defineProperty(_payload2,\"openModal\",false),_defineProperty(_payload2,\"selectedRecord\",{}),_payload2)});toast.info(error.response.data.rtn);}});};};export function getEditRegistrationComboService(inputParam,columnList,selectedRecord1,childColumnList,comboComponents,withoutCombocomponent){return function(dispatch){dispatch(initRequest(true));var _inputParam=_objectSpread({},inputParam),userInfo=_inputParam.userInfo,operation=_inputParam.operation;var masterData=inputParam[\"masterData\"];if(masterData[\"selectedSample\"].length>1||masterData[\"selectedSample\"].findIndex(function(x){return x[inputParam.primaryKeyName]===inputParam[\"mastertoedit\"][inputParam.primaryKeyName];})===-1){inputParam.editRegParam[\"getSampleChildDetail\"]=true;}masterData[\"selectedSample\"]=[];masterData[\"selectedSample\"].push(inputParam[\"mastertoedit\"]);var npreregno=inputParam.mastertoedit[inputParam.primaryKeyName];var urlArray=[];var timeZoneService=rsapi.post(\"timezone/getTimeZone\");// const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n//     parentcolumnlist: columnList,\n//     childcolumnlist: childColumnList,\n//     userinfo: userInfo\n// })\nvar selectedRegistration=rsapi.post(\"/registration/getEditRegistrationDetails\",_objectSpread(_objectSpread({},inputParam.editRegParam),{},{npreregno:npreregno,parentcolumnlist:columnList,childcolumnlist:childColumnList,userinfo:userInfo}));var dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:withoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userInfo});urlArray=[timeZoneService,selectedRegistration,dateService];Axios.all(urlArray).then(function(response){var selectedRecord=_objectSpread({},response[1].data[\"EditData\"]);selectedRecord=_objectSpread(_objectSpread({},selectedRecord),selectedRecord['jsondata']);// const recordToEdit = { ...response[2].data[\"SelectedRegistration\"][0] };\n//  const currentTime = rearrangeDateFormat(userInfo, response[6].data);\nvar timeZoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var timeZoneList=timeZoneMap.get(\"OptionList\");var defaultTimeZone={label:userInfo.stimezoneid,value:userInfo.ntimezonecode};//  const newcomboData = parentChildComboLoad(columnList, response[1].data,\n// selectedRecord, childColumnList, withoutCombocomponent)\nif(selectedRecord.ntransactionstatus===transactionStatus.CANCELLED||selectedRecord.ntransactionstatus===transactionStatus.REJECT){toast.info(intl.formatMessage({id:\"IDS_CANNOTEDITCANCELLEDSAMPLE\"}));dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}else{var languagetypeCode=undefined;var comboData=response[1].data;delete comboData['EditData'];var comboValues={};if(columnList.length>0){columnList.map(function(x){if(x.inputtype==='combo'){if(comboData[x.label]&&comboData[x.label].length>0)//&& comboData[x.label][0].hasOwnProperty(x.source) \n{if(comboData[x.label].length>0){if(comboData[x.label][0].label===undefined){var optionList=constructjsonOptionList(comboData[x.label]||[],x.valuemember,x.displaymember,false,false,true,undefined,x.source,x.isMultiLingual,languagetypeCode,x);comboData[x.label]=optionList.get(\"OptionList\");}else{comboData[x.label]=comboData[x.label];var _optionList=constructjsonOptionDefault(comboData[x.label]||[],x.valuemember,x.displaymember,false,false,true,undefined,x.source,x.isMultiLingual,languagetypeCode,x);}}else{comboData[x.label]=[];}//comboValues = childComboLoad(x, comboData, selectedRecord, \n//   childColumnList, withoutCombocomponent)\\\ncomboValues=childComboLoadForEdit(x,comboData,selectedRecord,childColumnList,withoutCombocomponent);}else{comboValues={\"comboData\":comboData};}}else{comboValues=_objectSpread({comboData:comboData},comboValues);}});}else{comboValues={\"comboData\":comboData};}withoutCombocomponent.map(function(date){if(date.inputtype==='date'){selectedRecord[date.label]=selectedRecord[date.label]&&selectedRecord[date.label]!=='-'?rearrangeDateFormat(userInfo,selectedRecord[date.label]):\"\";if(date.nperiodcode){selectedRecord[date.label+\"value\"]=response[2].data[date.label]?new Date(response[2].data[date.label][\"datevalue\"]):null;}else{selectedRecord[date.label+\"value\"]=new Date();}if(date.hidebeforedate){selectedRecord[date.label+\"min\"]=selectedRecord[date.label+\"value\"];}if(date.hideafterdate){selectedRecord[date.label+\"max\"]=selectedRecord[date.label+\"value\"];}}});var _ref2=[],Specification=_ref2.Specification,AgaramTree=_ref2.AgaramTree,ActiveKey=_ref2.ActiveKey,FocusKey=_ref2.FocusKey,OpenNodes=_ref2.OpenNodes;var selectedSpec={};Specification=constructOptionList(response[1].data[\"Specification\"]||[],\"nallottedspeccode\",\"sspecname\",undefined,undefined,true).get(\"OptionList\");AgaramTree=response[1].data[\"AgaramTree\"];ActiveKey=response[1].data[\"FocusKey\"];FocusKey=response[1].data[\"ActiveKey\"];OpenNodes=response[1].data[\"OpenNodes\"];//Manufacturer = response.data[\"Manufacturer\"];\nselectedSpec[\"nallottedspeccode\"]=Specification.length>0?{\"value\":Specification[0].value,\"label\":Specification[0].label,\"item\":Specification[0].item}:\"\";selectedSpec[\"sversion\"]=Specification.length>0?Specification[0].item.sversion:\"\";selectedSpec[\"ntemplatemanipulationcode\"]=Specification.length>0?Specification[0].item.ntemplatemanipulationcode:-1;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),selectedSpec);if(inputParam.editRegParam[\"getSampleChildDetail\"]===true){masterData=sortData(_objectSpread(_objectSpread({},masterData),response[1].data[\"SampleChildDetail\"]));}dispatch({type:DEFAULT_RETURN,payload:{AgaramTree:AgaramTree,FocusKey:FocusKey,ActiveKey:ActiveKey,OpenNodes:OpenNodes,selectedSpec:selectedSpec,Specification:Specification,// statustoEditDetail: response[2].data[\"ApprovalConfigRole\"] || {},\n// currentTime,\noperation:\"update\",screenName:inputParam.masterData.RealRegSubTypeValue.sregsubtypename,// PopUpLabel: popUpLabel,\ntimeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,selectedRecord:selectedRecord,openPortal:true,ncontrolCode:inputParam.editRegParam.ncontrolCode,loadPreregister:true,parentPopUpSize:\"xl\",loading:false,showSample:undefined,comboData:comboValues.comboData,childColumnList:childColumnList,comboComponents:comboComponents,withoutCombocomponent:withoutCombocomponent,columnList:columnList,masterData:masterData//  regRecordToEdit:recordToEdit\n}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(intl.formatMessage({id:error.response.data}));}});};}export function updateRegistration(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/updateRegistration\",inputParam.inputData).then(function(response){if(response.data.rtn===\"Success\"){// sortData(response.data);\nreplaceUpdatedObject(response.data[\"RegistrationGetSample\"],masterData.RegistrationGetSample,\"npreregno\");replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],masterData.RegistrationGetSubSample,\"ntransactionsamplecode\");replaceUpdatedObject(response.data[\"RegistrationGetTest\"],masterData.RegistrationGetTest,\"ntransactiontestcode\");//  let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n//let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\nmasterData=_objectSpread(_objectSpread({},masterData),{},{selectedSample:response.data[\"selectedSample\"],// selectedSubSample: masterData[\"selectedSubSample\"],\n//selectedTest:masterData[\"selectedTest\"],\n// RegistrationGetTest,\n// RegistrationGetSubSample,\nRegistrationParameter:masterData[\"RegistrationParameter\"]});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,openPortal:false,loading:false,showConfirmAlert:false,regDateEditConfirmMessage:undefined,loadEsign:false,openModal:false,loadPreregister:false,selectedRecord:{},showSample:undefined}});// let inputData = {\n//     masterData,\n//     selectedTest: masterData.selectedTest,\n//     ntransactiontestcode: masterData.selectedTest ?\n//         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\n//     npreregno: masterData.selectedSample ?\n//         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\n//     userinfo: inputParam.inputData.userinfo,\n//     activeTestTab : masterData.activeTestTab,\n//     screenName: masterData.activeTestTab,\n//     resultDataState: inputParam.resultDataState,\n//     testCommentDataState: inputParam.testCommentDataState,\n// }\n// dispatch(getTestChildTabDetail(inputData, true))\n}else{toast.info(response.data.rtn);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}}).catch(function(error){if(error.response.status===500){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}else if(error.response.status===302){dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,regEditParam:inputParam,showConfirmAlert:true,parentPopUpSize:\"xl\",regDateEditConfirmMessage:error.response.data,showSample:undefined}});}else{toast.info(error.response.data);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showSample:undefined}});}});};}export function cancelTestAction(inputParam,LoginProps){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/cancelTest\",inputParam.inputData).then(function(response){// replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\nvar masterData=_objectSpread(_objectSpread({},LoginProps),{},{selectedTest:response.data[\"selectedTest\"],// RegistrationGetTest:response.data[\"RegistrationGetTest\"],\nRegistrationGetTest:replaceUpdatedObject(response.data[\"selectedTest\"],LoginProps.RegistrationGetTest,\"ntransactiontestcode\")//  RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, LoginProps.RegistrationGetSample, 'npreregno')\n});var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},{openModal:false,loadEsign:false,showConfirmAlert:false,selectedRecord:{},loading:false,loadPreregister:false,showSample:undefined});inputParam.postParamList[0]['clearFilter']='no';dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}export function cancelSampleAction(inputParam,LoginProps){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/cancelSample\",inputParam.inputData).then(function(response){replaceUpdatedObject(response.data[\"RegistrationGetSample\"],LoginProps.RegistrationGetSample,\"npreregno\");replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],LoginProps.RegistrationGetSubSample,\"ntransactionsamplecode\");replaceUpdatedObject(response.data[\"RegistrationGetTest\"],LoginProps.RegistrationGetTest,\"ntransactiontestcode\");var masterData=_objectSpread(_objectSpread({},LoginProps),{},{selectedSample:replaceUpdatedObject(response.data[\"selectedSample\"],LoginProps.selectedSample,\"npreregno\"),selectedSubSample:replaceUpdatedObject(response.data[\"selectedSubSample\"],LoginProps.selectedSubSample,\"ntransactionsamplecode\"),selectedTest:replaceUpdatedObject(response.data[\"selectedTest\"],LoginProps.selectedTest,\"ntransactiontestcode\")});var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},{loading:false,loadEsign:false,openModal:false,showSample:undefined});dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}export function addsubSampleRegistration(masterData,userinfo,regcolumnList,selectRecord,regchildColumnList,regSubSamplecomboComponents,regSubSamplewithoutCombocomponent,Map,ncontrolcode,specBasedComponent,specBasedTestPackage){return function(dispatch){//console.log(\"spec:\", specBasedComponent);\nvar urlArray=[];var timeZoneService=rsapi.post(\"timezone/getTimeZone\");urlArray[0]=timeZoneService;var actualService=rsapi.post(\"dynamicpreregdesign/getComboValues\",{parentcolumnlist:regcolumnList,childcolumnlist:regchildColumnList,userinfo:userinfo});urlArray[1]=actualService;if(specBasedComponent){var ComponentTestBySpec=rsapi.post(\"/registration/getComponentBySpec\",_objectSpread(_objectSpread({},Map),{},{specBasedComponent:specBasedComponent,userinfo:userinfo}));urlArray[2]=ComponentTestBySpec;}else{var TestGet=rsapi.post(\"/registration/getTestfromDB\",{nallottedspeccode:Map[\"nallottedspeccode\"],slno:1,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,conditionalTestPackage:true,nneedsubsample:Map[\"nneedsubsample\"]});urlArray[2]=TestGet;var TestPackageGet=rsapi.post(\"/registration/getTestfromTestPackage\",{//  nspecsampletypecode: selectedobject.nspecsampletypecode,\nnallottedspeccode:Map[\"nallottedspeccode\"],//  slno: Component ? Object.keys(Component).length + 1 : 1,\nspecBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage//     conditionalTestPackage: conditionalTestPackage\n});urlArray[5]=TestPackageGet;}var currentDate=rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:userinfo});urlArray[3]=currentDate;var dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:regSubSamplewithoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userinfo});urlArray[4]=dateService;dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var timeZoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var timeZoneList=timeZoneMap.get(\"OptionList\");var defaultTimeZone={label:userinfo.stimezoneid,value:userinfo.ntimezonecode};var newcomboData=parentChildComboLoad(regcolumnList,response[1].data,selectRecord,regchildColumnList,regSubSamplewithoutCombocomponent,undefined,userinfo.slanguagetypecode,userinfo);var TestCombined=[];var lstComponent=[];var PackageData=[];if(specBasedComponent){var lstComponentMap=constructOptionList(response[2].data.lstComponent||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,true);lstComponent=lstComponentMap.get(\"OptionList\");}else{//if (specBasedTestPackage) {\nvar PackageDataMap=constructOptionList(response[5].data.TestPackage||[],\"ntestpackagecode\",\"stestpackagename\",undefined,undefined,true);PackageData=PackageDataMap.get(\"OptionList\");// if (PackageData.length === 0) {\n//     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \n// } \n// }\n// else {\nTestCombined=response[2].data;// }\n}var comboData1=newcomboData.comboData;var selectedRecord1=newcomboData.selectedRecord;regSubSamplewithoutCombocomponent.map(function(componentrow){if(componentrow.inputtype===\"date\"){if(componentrow.loadcurrentdate){selectedRecord1[componentrow.label]=componentrow.loadcurrentdate?rearrangeDateFormat(userinfo,response[3].data):\"\";selectedRecord1[componentrow.label+\"value\"]=selectedRecord1[componentrow.label];}else if(componentrow.nperiodcode){selectedRecord1[componentrow.label+\"value\"]=response[4].data[componentrow.label]?new Date(response[4].data[componentrow.label][\"datevalue\"]):null;if(componentrow.loadselecteddate){selectedRecord1[componentrow.label]=response[4].data[componentrow.label]?new Date(response[4].data[componentrow.label][\"datevalue\"]):null;}//    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n//    new Date(response[2].data[componentrow.label]):null;\n}else{selectedRecord1[componentrow.label+\"value\"]=new Date();}if(componentrow.hidebeforedate){selectedRecord1[componentrow.label+\"min\"]=selectedRecord1[componentrow.label+\"value\"];}if(componentrow.hideafterdate){selectedRecord1[componentrow.label+\"max\"]=selectedRecord1[componentrow.label+\"value\"];}}else if(componentrow.inputtype===\"radio\"){selectedRecord1[componentrow.label]=componentrow.radioOptions?componentrow.radioOptions.tags[0].text:\"\";}});dispatch({type:DEFAULT_RETURN,payload:{screenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"}),showSaveContinue:false,parentPopUpSize:\"lg\",loading:false,lstComponent:lstComponent,openModal:true,operation:\"create\",loadRegSubSample:true,selectedRecord:selectedRecord1,regSubSamplecomboData:comboData1,regSubSamplecomboComponents:regSubSamplecomboComponents,regSubSamplewithoutCombocomponent:regSubSamplewithoutCombocomponent,TestCombined:TestCombined,regparentSubSampleColumnList:regcolumnList,regchildSubSampleColumnList:regchildColumnList,ncontrolCode:ncontrolcode,timeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,masterData:masterData,specBasedComponent:specBasedComponent,specBasedTestPackage:specBasedTestPackage,TestPackage:PackageData}});}).catch(function(error){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function saveSubSample(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/createSubSample\",inputParam.inputData).then(function(response){// let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\n// let selectedSample = response.data[\"selectedSample\"];\nvar RegistrationGetSubSample=updatedObjectWithNewElement(inputParam.inputData.masterData.RegistrationGetSubSample,response.data[\"selectedSubSample\"]);var RegistrationGetTest=response.data[\"selectedTest\"];var selectedSubSample=response.data[\"selectedSubSample\"];// RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\nRegistrationGetTest=sortData(RegistrationGetTest,\"npreregno\",\"desc\");var selectedTest=RegistrationGetTest.length>0?[RegistrationGetTest[0]]:[];var RegistrationParameter=response.data[\"RegistrationParameter\"];RegistrationParameter=getSameRecordFromTwoArrays(RegistrationParameter,selectedTest,'ntransactiontestcode');var masterData=_objectSpread({},inputParam.inputData.masterData);masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{selectedSubSample:selectedSubSample,selectedTest:selectedTest,RegistrationGetSubSample:RegistrationGetSubSample,RegistrationGetTest:RegistrationGetTest,RegistrationParameter:RegistrationParameter});var respObject={masterData:masterData,openModal:false,loadEsign:false,loading:false,showSample:undefined,selectedRecord:{},loadRegSubSample:false};inputParam.postParamList[0]['clearFilter']='no';inputParam.postParamList[1]['clearFilter']='yes';inputParam.postParamList[2]['clearFilter']='yes';dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));//    dispatch({\n//     type: DEFAULT_RETURN,\n//     payload: {\n//         masterData,\n//         openModal: false,\n//         loadEsign: false,\n//         loading: false,\n//         showSample: undefined,\n//         selectedRecord: {},\n//         loadRegSubSample:false\n//     }\n// });\n}).catch(function(error){// console.log(error);\ntoast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showConfirmAlert:false}});});};}export function getEditSubSampleComboService(inputParam,columnList,selectedRecord1,childColumnList,comboComponents,withoutCombocomponent,specBasedComponent){return function(dispatch){var _inputParam2=_objectSpread({},inputParam),userInfo=_inputParam2.userInfo,operation=_inputParam2.operation,masterData=_inputParam2.masterData;if(masterData[\"selectedSubSample\"].length>1||masterData[\"selectedSubSample\"].findIndex(function(x){return x[inputParam.primaryKeyName]===inputParam[\"mastertoedit\"][inputParam.primaryKeyName];})===-1){inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"]=true;}masterData[\"selectedSubSample\"]=[];masterData[\"selectedSubSample\"].push(inputParam[\"mastertoedit\"]);inputParam.editSubSampleRegParam[\"npreregno\"]=inputParam[\"mastertoedit\"][\"npreregno\"];inputParam.editSubSampleRegParam[\"checkBoxOperation\"]=3;inputParam.editSubSampleRegParam[\"nfilterstatus\"]=inputParam[\"mastertoedit\"][\"ntransactionstatus\"];inputParam.editSubSampleRegParam[\"napprovalconfigcode\"]=inputParam[\"mastertoedit\"][\"napprovalconfigcode\"];//inputParam.editSubSampleRegParam[\"withoutgetparameter\"] = 3;\nvar ntransactionsamplecode=inputParam.mastertoedit[inputParam.primaryKeyName];if(ntransactionsamplecode===undefined){toast.info(intl.formattedMessage({id:\"IDS_SELECTVALIDSUBSAMPLE\"}));}else{var urlArray=[];var timeZoneService=rsapi.post(\"timezone/getTimeZone\");// const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n//     parentcolumnlist: columnList,\n//     childcolumnlist: childColumnList,\n//     userinfo: userInfo\n// })\nvar selectedRegistration=rsapi.post(\"/registration/getEditRegistrationSubSampleDetails\",_objectSpread(_objectSpread({},inputParam.editSubSampleRegParam),{},{ntransactionsamplecode:ntransactionsamplecode,parentcolumnlist:columnList,childcolumnlist:childColumnList,userinfo:userInfo}));var dateService=rsapi.post(\"dynamicpreregdesign/dateValidation\",{datecolumnlist:withoutCombocomponent.filter(function(x){return x.inputtype===\"date\";}),userinfo:userInfo});urlArray=[timeZoneService,selectedRegistration,dateService];// if(specBasedComponent){\n//     const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\n//         ...Map,\n//         specBasedComponent: specBasedComponent\n//     })\n//     urlArray.push(ComponentTestBySpec) \n// }\ndispatch(initRequest(true));Axios.all(urlArray).then(function(response){var _payload3;var selectedRecord=_objectSpread({},response[1].data[\"EditData\"]);selectedRecord=_objectSpread(_objectSpread({},selectedRecord),selectedRecord['jsondata']);var timeZoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var timeZoneList=timeZoneMap.get(\"OptionList\");var defaultTimeZone={label:userInfo.stimezoneid,value:userInfo.ntimezonecode};// if (selectedRecord.ntransactionstatus !== transactionStatus.PREREGISTER) {\n//     toast.info(intl.formatMessage({ id: \"IDS_SELECTPREREGISTERSUBSAMPLETOEDIT\" }));\n//     dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\n// }\n//else {\n//               let lstComponent=[]\nif(specBasedComponent){selectedRecord[\"ncomponentcode\"]={label:selectedRecord[\"scomponentname\"],value:selectedRecord[\"ncomponentcode\"]};}var languagetypeCode=undefined;var comboData=response[1].data;delete comboData['EditData'];var comboValues={};if(columnList.length>0){columnList.map(function(x){if(x.inputtype==='combo'){if(comboData[x.label]&&comboData[x.label].length>0)//&& comboData[x.label][0].hasOwnProperty(x.source) \n{if(comboData[x.label].length>0){if(comboData[x.label][0].label===undefined){var optionList=constructjsonOptionList(comboData[x.label]||[],x.valuemember,x.displaymember,false,false,true,undefined,x.source,x.isMultiLingual,languagetypeCode,x);comboData[x.label]=optionList.get(\"OptionList\");}else{comboData[x.label]=comboData[x.label];var _optionList2=constructjsonOptionDefault(comboData[x.label]||[],x.valuemember,x.displaymember,false,false,true,undefined,x.source,x.isMultiLingual,languagetypeCode,x);}}else{comboData[x.label]=[];}//comboValues = childComboLoad(x, comboData, selectedRecord, \n//   childColumnList, withoutCombocomponent)\\\ncomboValues=childComboLoadForEdit(x,comboData,selectedRecord,childColumnList,withoutCombocomponent);}else{comboValues={\"comboData\":comboData};}}else{comboValues=_objectSpread({comboData:comboData},comboValues);}});}else{comboValues={\"comboData\":comboData};}// withoutCombocomponent.map(date => {\n//     if (date.inputtype === 'date')\n//         selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\n//             rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\";\n// })\nwithoutCombocomponent.map(function(date){if(date.inputtype==='date'){selectedRecord[date.label]=selectedRecord[date.label]&&selectedRecord[date.label]!=='-'?rearrangeDateFormat(userInfo,selectedRecord[date.label]):\"\";if(date.nperiodcode){selectedRecord[date.label+\"value\"]=response[2].data[date.label]?new Date(response[2].data[date.label][\"datevalue\"]):null;}else{selectedRecord[date.label+\"value\"]=new Date();}if(date.hidebeforedate){selectedRecord[date.label+\"min\"]=selectedRecord[date.label+\"value\"];}if(date.hideafterdate){selectedRecord[date.label+\"max\"]=selectedRecord[date.label+\"value\"];}}});selectedRecord=_objectSpread({},selectedRecord);if(inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"]===true){masterData=_objectSpread(_objectSpread({},masterData),response[1].data[\"SubSampleChildDetail\"]);}dispatch({type:DEFAULT_RETURN,payload:(_payload3={operation:operation,timeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,selectedRecord:selectedRecord,openModal:true,ncontrolCode:inputParam.editSubSampleRegParam.ncontrolCode,parentPopUpSize:\"lg\",loading:false,showSample:undefined,regSubSamplecomboData:comboValues.comboData,loadRegSubSample:true,screenName:\"IDS_SUBSAMPLE\"},_defineProperty(_payload3,\"operation\",\"update\"),_defineProperty(_payload3,\"specBasedComponent\",specBasedComponent),_defineProperty(_payload3,\"masterData\",masterData),_payload3)});// }\n}).catch(function(error){//console.log(\"error:\", error);\ndispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(intl.formatMessage({id:error.response.data}));}});}};}export function onUpdateSubSampleRegistration(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/updateRegistrationSubSample\",inputParam.inputData).then(function(response){sortData(response.data);replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],masterData.RegistrationGetSubSample,\"ntransactionsamplecode\");//replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\n// replaceUpdatedObject(response.data[\"selectedTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\n//  let RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];\nvar RegistrationGetTest=response.data[\"RegistrationGetTest\"];masterData=_objectSpread(_objectSpread({},masterData),{},{// selectedSample: response.data[\"selectedSample\"],\nselectedSubSample:response.data[\"selectedSubSample\"],selectedTest:response.data[\"selectedTest\"],RegistrationGetTest:RegistrationGetTest,// RegistrationGetSubSample,\nRegistrationParameter:response.data[\"RegistrationParameter\"]});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,openModal:false,loading:false,showConfirmAlert:false,regDateEditConfirmMessage:undefined,loadEsign:false,loadRegSubSample:false,selectedRecord:{},showSample:undefined,screenName:intl.formatMessage({id:\"IDS_SUBSAMPLE\"})}});// let inputData = {\n//     masterData,\n//     selectedTest: masterData.selectedTest,\n//     ntransactiontestcode: masterData.selectedTest ?\n//         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\n//     npreregno: masterData.selectedSample ?\n//         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\n//     userinfo: inputParam.inputData.userinfo,\n//     activeTestTab : masterData.activeTestTab,\n//     screenName: masterData.activeTestTab,\n//     resultDataState: inputParam.resultDataState,\n//     testCommentDataState: inputParam.testCommentDataState,\n// }\n// dispatch(getTestChildTabDetail(inputData, true))\n}).catch(function(error){if(error.response.status===500){toast.error(error.message);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}else if(error.response.status===302){dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,regEditParam:inputParam,showConfirmAlert:true,parentPopUpSize:\"xl\",regDateEditConfirmMessage:error.response.data,showSample:undefined}});}else{toast.info(error.response.data);dispatch({type:DEFAULT_RETURN,payload:{loading:false,showSample:undefined}});}});};}export function cancelSubSampleAction(inputParam,LoginProps){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/cancelSubSample\",inputParam.inputData).then(function(response){// replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\nreplaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],LoginProps.RegistrationGetSubSample,\"ntransactionsamplecode\");replaceUpdatedObject(response.data[\"RegistrationGetTest\"],LoginProps.RegistrationGetTest,\"ntransactiontestcode\");var masterData=_objectSpread(_objectSpread({},LoginProps),{},{// selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\nselectedSubSample:replaceUpdatedObject(response.data[\"selectedSubSample\"],LoginProps.selectedSubSample,\"ntransactionsamplecode\"),selectedTest:replaceUpdatedObject(response.data[\"selectedTest\"],LoginProps.selectedTest,\"ntransactiontestcode\")});var respObject=_objectSpread(_objectSpread({masterData:masterData},inputParam.inputData),{},{loading:false,loadEsign:false,openModal:false,showSample:undefined});dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}export function preregRecordToQuarantine(inputParam,LoginProps){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/registration/quarantineRegistration\",inputParam.inputData).then(function(response){// replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n// replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n// replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\nreplaceUpdatedObject(response.data[\"RegistrationGetSample\"],LoginProps.RegistrationGetSample,\"npreregno\");replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"],LoginProps.RegistrationGetSubSample,\"ntransactionsamplecode\");replaceUpdatedObject(response.data[\"RegistrationGetTest\"],LoginProps.RegistrationGetTest,\"ntransactiontestcode\");delete response.data[\"RegistrationGetSample\"];delete response.data[\"RegistrationGetSubSample\"];delete response.data[\"RegistrationGetTest\"];var masterData=_objectSpread(_objectSpread({},LoginProps),{},{selectedSample:replaceUpdatedObject(response.data[\"selectedSample\"],LoginProps.selectedSample,\"npreregno\"),selectedSubSample:replaceUpdatedObject(response.data[\"selectedSubSample\"],LoginProps.selectedSubSample,\"ntransactionsamplecode\"),selectedTest:replaceUpdatedObject(response.data[\"selectedTest\"],LoginProps.selectedTest,\"ntransactiontestcode\")});var respObject={masterData:masterData,loading:false,loadEsign:false,openModal:false,showSample:undefined};dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}export function getTestChildTabDetailRegistration(inputData,isServiceRequired){return function(dispatch){if(inputData.ntransactiontestcode===\"\"){inputData.ntransactiontestcode=\"0\";}if(inputData.ntransactiontestcode&&inputData.ntransactiontestcode.length>0){var inputParamData={ntransactiontestcode:inputData.ntransactiontestcode,npreregno:inputData.npreregno,userinfo:inputData.userinfo};var url=null;var testtake=inputData.testtake;var activeName=\"\";var dataStateName=\"\";switch(inputData.activeTestTab){case\"IDS_RESULTS\":url=\"approval/getapprovalparameter\";activeName=\"ApprovalParameter\";dataStateName=\"resultDataState\";break;case\"IDS_PARAMETERRESULTS\":url=\"registration/getregistrationparameter\";activeName=\"RegistrationParameter\";dataStateName=\"resultDataState\";break;case\"IDS_INSTRUMENT\":url=\"resultentrybysample/getResultUsedInstrument\";activeName=\"ResultUsedInstrument\";dataStateName=\"instrumentDataState\";break;case\"IDS_MATERIAL\":url=\"resultentrybysample/getResultUsedMaterial\";break;case\"IDS_TASK\":url=\"resultentrybysample/getResultUsedTask\";activeName=\"ResultUsedTasks\";dataStateName=\"taskDataState\";break;case\"IDS_TESTATTACHMENTS\":url=\"attachment/getTestAttachment\";activeName=\"RegistrationTestAttachment\";break;case\"IDS_TESTCOMMENTS\":url=\"comments/getTestComment\";activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_DOCUMENTS\":url=\"approval/getapprovalparameter\";break;case\"IDS_RESULTCHANGEHISTORY\":url=\"approval/getApprovalResultChangeHistory\";activeName=\"ApprovalResultChangeHistory\";dataStateName=\"resultChangeDataState\";break;case\"IDS_TESTAPPROVALHISTORY\":url=\"approval/getApprovalHistory\";activeName=\"ApprovalHistory\";dataStateName=\"historyDataState\";break;case\"IDS_SAMPLEATTACHMENTS\":url=\"attachment/getSampleAttachment\";break;default:url=\"approval/getapprovalparameter\";activeName=\"ApprovalParameter\";dataStateName=\"resultDataState\";break;}if(url!==null){dispatch(initRequest(true));if(isServiceRequired){rsapi.post(url,inputParamData).then(function(response){var skipInfo={};var responseData=_objectSpread(_objectSpread({},response.data),{},{selectedSample:inputData.selectedSample||inputData.masterData.selectedSample,selectedTest:inputData.selectedTest});//responseData = sortData(responseData)\n// fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\",inputData.removeElementFromArray);\nfillRecordBasedOnCheckBoxSelection(inputData.masterData,responseData,inputData.childTabsKey,inputData.checkBoxOperation,\"ntransactionsamplecode\",inputData.removeElementFromArray);var masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedSample:inputData.selectedSample||inputData.masterData.selectedSample,selectedTest:inputData.selectedTest,selectedPreregno:inputData.npreregno,selectedSampleCode:inputData.ntransactionsamplecode,selectedTestCode:inputData.ntransactiontestcode,activeTabIndex:inputData.activeTabIndex,activeTabId:inputData.activeTabId});if(inputData[dataStateName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined}));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:masterData,activeTabIndex:inputData.activeTabIndex,activeTabId:inputData.activeTabId,loading:false,showFilter:false,activeTestTab:inputData.activeTestTab,screenName:inputData.screenName,testtake:testtake,testskip:undefined},skipInfo)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});}else{fillRecordBasedOnCheckBoxSelection(inputData.masterData,inputData.selectedTest,inputData.childTabsKey,inputData.checkBoxOperation,\"ntransactiontestcode\",inputData.removeElementFromArray);var skipInfo={};var masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{selectedTest:inputData.selectedTest,selectedPreregno:inputData.npreregno,selectedSampleCode:inputData.ntransactionsamplecode,selectedTestCode:inputData.ntransactiontestcode});if(inputData[dataStateName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined}));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:masterData,loading:false,showFilter:false,activeTestTab:inputData.activeTestTab,screenName:inputData.screenName,testtake:testtake,testskip:undefined},skipInfo)});}}else{dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread({},inputData.masterData),loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab}});}}else{var _inputData$masterData=inputData.masterData,ApprovalParameter=_inputData$masterData.ApprovalParameter,ResultUsedInstrument=_inputData$masterData.ResultUsedInstrument,ResultUsedTasks=_inputData$masterData.ResultUsedTasks,RegistrationTestAttachment=_inputData$masterData.RegistrationTestAttachment,ApprovalResultChangeHistory=_inputData$masterData.ApprovalResultChangeHistory,RegistrationTestComment=_inputData$masterData.RegistrationTestComment,ApprovalHistory=_inputData$masterData.ApprovalHistory;switch(inputData.activeTestTab){case\"IDS_RESULTS\":ApprovalParameter=[];break;case\"IDS_INSTRUMENT\":ResultUsedInstrument=[];break;case\"IDS_TASK\":ResultUsedTasks=[];break;case\"IDS_TESTATTACHMENTS\":RegistrationTestAttachment=[];break;case\"IDS_RESULTCHANGEHISTORY\":ApprovalResultChangeHistory=[];break;case\"IDS_TESTCOMMENTS\":RegistrationTestComment=[];break;case\"IDS_APPROVALHISTORY\":ApprovalHistory=[];break;default:ApprovalParameter=[];break;}dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),{},{selectedTest:[],ApprovalParameter:ApprovalParameter,ResultUsedInstrument:ResultUsedInstrument,ResultUsedTasks:ResultUsedTasks,RegistrationTestAttachment:RegistrationTestAttachment,ApprovalResultChangeHistory:ApprovalResultChangeHistory,RegistrationTestComment:RegistrationTestComment,ApprovalHistory:ApprovalHistory}),loading:false,activeTabIndex:inputData.activeTabIndex,activeTabId:inputData.activeTabId}});}};}var toTimestamp=function toTimestamp(strDate){// const dt = new Date(strDate).getTime();\n// return dt / 1000;\nvar dt=strDate.getTime();return dt;};export function getDynamicFilter(inputParam){if(inputParam.component.inputtype==='frontendsearchfilter'){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilter\",_objectSpread(_objectSpread({},inputParam.component),{},{userinfo:inputParam.userinfo})).then(function(response){var source=inputParam.component.source;var languageTypeCode=inputParam.userinfo.slanguagetypecode;var lstData=response.data[inputParam.component.label];// const responseparam={}\nvar gridColumns=[];var fields=[];var datefileds=[];var multilingual=[];inputParam.component.filterfields.map(function(item){fields.push(filterObject(item,languageTypeCode,response.data));if(item.ismultilingual){multilingual.push(item.columnname);}if(item.filterinputtype===\"date\"){datefileds.push(item.columnname);}if(item.filterinputtype!=='predefinednumeric'){gridColumns.push(creategridColumns(item,languageTypeCode));}});var optionList=lstData.map(function(item){var jsondata=item[source]?item[source].value?JSON.parse(item[source].value):item.jsondata:item.jsondata;datefileds.map(function(x){jsondata[x+\"timestamp\"]=toTimestamp(rearrangeDateFormatforKendoDataTool(inputParam.userinfo,jsondata[x]));});multilingual.map(function(mul){jsondata[mul]=jsondata[mul][languageTypeCode]||jsondata[mul]['en-US'];});return jsondata;});var map={};if(inputParam.type==='design'){map=_objectSpread(_objectSpread({},map),{},{showFilter:true,selectedComponentpath:inputParam.selectedComponentpath});}else{map=_objectSpread(_objectSpread({},map),{},{loadCustomSearchFilter:true});}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({lstPatient:optionList,gridColumns:gridColumns,fields:fields,//  loadCustomSearchFilter: true\nloading:false,screenName:inputParam.component.displayname[languageTypeCode],seletedFilterComponent:inputParam.component,kendoSkip:0,kendoTake:5,kendoFilter:inputParam.component.kendoFilter||{logic:\"and\",filters:[]}},map)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}else if(inputParam.component.inputtype===\"backendsearchfilter\"){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilterpredefined\",_objectSpread(_objectSpread({},inputParam.component),{},{userinfo:inputParam.userinfo})).then(function(response){var languageTypeCode=inputParam.userinfo.slanguagetypecode;var _filterObjectForReact=filterObjectForReactAwesomeFilter(inputParam.component.filterfields,languageTypeCode,response.data),fields=_filterObjectForReact.fields,gridColumns=_filterObjectForReact.gridColumns;var map={};if(inputParam.component.awesomeTree&&inputParam.component.filterquery&&inputParam.component.filterquery!==''){map={filterquery:inputParam.component.filterquery};if(inputParam.type==='design'){map=_objectSpread(_objectSpread({},map),{},{filterquery:inputParam.component.filterquery,selectedFieldRecord:_objectSpread(_objectSpread({},inputParam.component),{},{awesomeTree:checkTree(loadTree(inputParam.component.awesomeTree),inputParam.component.awesomeConfig)})});}}else{map={filterquery:''};}if(inputParam.type==='design'){map=_objectSpread(_objectSpread({},map),{},{showFilter:true,selectedComponentpath:inputParam.selectedComponentpath});}else{map=_objectSpread(_objectSpread({},map),{},{loadCustomSearchFilter:true});}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({lstPatient:[],gridColumns:gridColumns,fields:fields,// loadCustomSearchFilter: true\nloading:false,screenName:inputParam.component.displayname[languageTypeCode],seletedFilterComponent:inputParam.component,kendoSkip:0,kendoTake:5,awesomeTree:inputParam.component.awesomeTree?checkTree(loadTree(inputParam.component.awesomeTree),inputParam.component.awesomeConfig):undefined,onExecute:true},map)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}}var datapredef={};var CustomFilter=function CustomFilter(props){var filter=props.filter,_props$data=props.data,data=_props$data===void 0?[]:_props$data,defaultItem=props.defaultItem;var onChange=function onChange(event){props.onFilterChange.call(undefined,{nextFilter:_objectSpread(_objectSpread({},props.filter),{},{value:event.target.value.value})});};return/*#__PURE__*/React.createElement(ComboBox,{onChange:onChange,data:filter.field?datapredef[filter.field]:[],textField:\"text\"});};export function creategridColumns(item,languageTypeCode){var obj={};if(item.filterinputtype!=='predefinednumeric'){return{field:item.columnname,title:item.displayname[languageTypeCode],width:\"250px\"};}}export function filterObjectForReactAwesomeFilter(filterFields,languageTypeCode,resposedata){var obj={};obj['fields']={};obj['gridColumns']=[];filterFields.map(function(item){if(item.filterinputtype==='predefinednumeric'||item.filterinputtype==='predefinedtext'){var optionList=resposedata[item.predefinedtablename].map(function(data){var jsondata=data[item.predefinedtablename]?data[item.predefinedtablename].value?JSON.parse(data[item.predefinedtablename].value):data.jsondata:data.jsondata;jsondata['title']=item.predefinedismultilingual?jsondata[item.predefineddisplaymember][languageTypeCode]||jsondata[item.predefineddisplaymember]['en-US']:jsondata[item.predefineddisplaymember];jsondata['value']=jsondata[item.predefinedvaluemember];return jsondata;});datapredef[item.columnname]=optionList;}switch(item.filterinputtype){case\"text\":obj['fields'][item.type==='dynamic'?item.ismultilingual?\"jsondata->'\"+item.columnname+\"'->>'\"+languageTypeCode+\"'\":\"jsondata->>'\"+item.columnname+\"'\":\"\\\"\"+item.columnname+\"\\\"\"]={label:item.displayname[languageTypeCode],type:\"text\",valueSources:[\"value\",\"func\"],mainWidgetProps:{\"valueLabel\":\"Name\",\"valuePlaceholder\":\"Enter\"+item.displayname[languageTypeCode]}};break;case\"numeric\":obj['fields'][item.type==='dynamic'?\"(jsondata->>'\"+item.columnname+\"')::int\":\"\\\"\"+item.columnname+\"\\\"\"]={label:item.displayname[languageTypeCode],type:\"number\",valueSources:[\"value\"],fieldSettings:_objectSpread({},item.numericcondition)};break;case\"date\":obj['fields'][item.type==='dynamic'?\"jsondata->>'\"+item.columnname+\"'\":\"\\\"\"+item.columnname+\"\\\"\"]={label:item.displayname[languageTypeCode],type:\"date\",valueSources:[\"value\"]};break;case\"predefinednumeric\":obj['fields'][item.type==='dynamic'?\"(jsondata->>'\"+item.columnname+\"')::int\":\"\\\"\"+item.columnname+\"\\\"\"]={label:item.displayname[languageTypeCode],type:\"select\",valueSources:[\"value\"],fieldSettings:{listValues:datapredef[item.columnname]}};break;case\"predefinedtext\":obj['fields'][item.type==='dynamic'?item.ismultilingual?\"jsondata->'\"+item.columnname+\"'->>'\"+languageTypeCode+\"'\":\"jsondata->>'\"+item.columnname+\"'\":\"\\\"\"+item.columnname+\"\\\"\"]={label:item.displayname[languageTypeCode],type:\"select\",valueSources:[\"value\"],fieldSettings:{listValues:datapredef[item.columnname]}};break;}var gridColumns=creategridColumns(item,languageTypeCode);if(item.filterinputtype!=='predefinednumeric'){obj['gridColumns'].push(gridColumns);}});return obj;}export function filterObject(item,languageTypeCode,resposedata){var obj={};var preobj={};if(item.filterinputtype==='predefinednumeric'||item.filterinputtype==='predefinedtext'){var optionList=resposedata[item.predefinedtablename].map(function(data){var jsondata=data[item.predefinedtablename]?data[item.predefinedtablename].value?JSON.parse(data[item.predefinedtablename].value):data.jsondata:data.jsondata;jsondata['text']=item.predefinedismultilingual?jsondata[item.predefineddisplaymember][languageTypeCode]||jsondata[item.predefineddisplaymember]['en-US']:jsondata[item.predefineddisplaymember];jsondata['value']=jsondata[item.predefinedvaluemember];//delete jsondata.jsondata\nreturn jsondata;});datapredef[item.columnname]=optionList;// preobj = {\n//     predefdata: optionList, predefineddisplaymember: item.predefineddisplaymember,\n//     predefinedvaluemember: item.columnname\n// }\n}switch(item.filterinputtype){case\"text\":return obj={name:item.columnname,label:item.displayname[languageTypeCode],filter:TextFilter,operators:Operators.text};case\"numeric\":return obj={name:item.columnname,label:item.displayname[languageTypeCode],filter:NumericFilter,operators:Operators.numeric};case\"date\":return obj={name:item.columnname+\"timestamp\",label:item.displayname[languageTypeCode],filter:DateFilter,operators:Operators.date};case\"predefinednumeric\":return obj={name:item.columnname,label:item.displayname[languageTypeCode],filter:CustomFilter,operators:Operators.numeric};case\"predefinedtext\":return obj={name:item.columnname,label:item.displayname[languageTypeCode],filter:CustomFilter,operators:Operators.text};default:return obj={name:item.columnname,label:item.displayname[languageTypeCode],filter:TextFilter,operators:Operators.text};}//return obj;\n}export function getDynamicFilterExecuteData(inputParam){return function(dispatch){var obj=_objectSpread(_objectSpread({},inputParam.component),{},{filterquery:inputParam.filterquery,userinfo:inputParam.userinfo});dispatch(initRequest(true));rsapi.post(\"/dynamicpreregdesign/getdynamicfilterexecutedata\",obj).then(function(response){var source=inputParam.component.source;var languageTypeCode=inputParam.userinfo.slanguagetypecode;var lstData=response.data[inputParam.component.label];var multilingual=[];inputParam.component.filterfields.map(function(item){if(item.ismultilingual){multilingual.push(item.columnname);}});var optionList=lstData.map(function(item){var jsondata=item[source]?item[source].value?JSON.parse(item[source].value):item.jsondata:item.jsondata;multilingual.map(function(mul){jsondata[mul]=jsondata[mul][languageTypeCode]||jsondata[mul]['en-US'];});// let label = isMultiLingual ?\n//   jsondata[optionValue]\n//   [languageTypeCode] || jsondata[optionValue]['en-US']\n//   : jsondata[optionValue];\nreturn jsondata;});if(inputParam.userinfo.nformcode===161){dispatch({type:DEFAULT_RETURN,payload:{lstPatient:optionList,onExecute:false,loading:false,screenName:inputParam.component.displayname[languageTypeCode]}});}else{dispatch({type:DEFAULT_RETURN,payload:{lstPatient:optionList,// onExecute: false,\nloading:false,screenName:inputParam.component.displayname[languageTypeCode]}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});};}export function rearrangeDateFormatforKendoDataTool(userInfo,dateValue){var splitChar=\"/\";if(dateValue!==undefined){var index=userInfo.ssitedatetime&&userInfo.ssitedatetime.indexOf(\"/\"||\"-\");if(index!==-1)splitChar=userInfo.ssitedatetime.substring(index,index+1);}//   console.log(\"splitChar:\", splitChar);\nif((splitChar===\"/\"||splitChar===\"-\")&&typeof dateValue===\"string\"){var firstField=userInfo.ssitedatetime&&userInfo.ssitedatetime.split(splitChar)[0];// console.log(\"firstField:\", firstField);\nvar timeSplitChar=dateValue.indexOf(\"T\")!==-1?\"T\":\" \";var datetime=dateValue.split(timeSplitChar);var dateArray=datetime[0].split(splitChar);if(firstField===\"dd\"){var day=dateArray[0];var month=dateArray[1];var year=dateArray[2];var time=datetime[1]||\"00:00:00\";var formatted=year+\"-\"+month+\"-\"+day+\"T\"+time;return new Date(formatted);}else if(firstField===\"yyyy\"){var _year=dateArray[0];var _month=dateArray[1];var _day=dateArray[2];var _time=datetime[1]||\"00:00:00\";var _formatted=_year+\"-\"+_month+\"-\"+_day+\"T\"+_time;return new Date(_formatted);}else{return new Date(dateValue);}}else{return dateValue;}}export function preRegDispatch(inputParam){return function(dispatch){dispatch(initRequest(true));dispatch({type:DEFAULT_RETURN,payload:_objectSpread({},inputParam)});};}export function validateEsignforRegistration(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"login/validateEsignCredential\",inputParam.inputData).then(function(response){if(response.data===\"Success\"){var methodUrl=\"registration\";inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"]=inputParam.inputData.userinfo;if(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]&&inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]){delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];}//dispatch(inputParam[\"screenData\"][\"inputParam\"].performAction(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"]))\ndispatch(dispatchMethods(inputParam[\"screenData\"]));}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});};}function dispatchMethods(screenData){return function(dispatch){var action=screenData.inputParam.action;switch(action){case\"preregister\":dispatch(insertRegistration(screenData.inputParam,screenData.masterData));break;case\"editSample\":dispatch(updateRegistration(screenData.inputParam,screenData.masterData,'openModal'));break;case\"accept\":dispatch(acceptRegistration(screenData.inputParam,screenData.masterData));break;case\"quarantine\":dispatch(preregRecordToQuarantine(screenData.inputParam,screenData.masterData));break;case\"cancelTest\":dispatch(cancelTestAction(screenData.inputParam,screenData.masterData));break;case\"cancelSample\":dispatch(cancelSampleAction(screenData.inputParam,screenData.masterData));break;case\"addregsourcecountry\":dispatch(crudMaster(screenData.inputParam,screenData.masterData,\"openModal\"));break;case\"deleteregsourcecountry\":dispatch(crudMaster(screenData.inputParam,screenData.masterData,\"openModal\"));break;case\"printer\":dispatch(crudMaster(screenData.inputParam,screenData.masterData,\"openModal\"));break;case\"editSubSample\":dispatch(onUpdateSubSampleRegistration(screenData.inputParam,screenData.masterData));case\"cancelSubSample\":dispatch(cancelSubSampleAction(screenData.inputParam,screenData.masterData));default:break;}};}export function getStorageCategoryForSendToStore(userInfo,masterData,sendToStoreId,selectedRecord,sampleDetails){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var geStorageCategory=rsapi.post(\"/storagecategory/getStorageCategory\",{'userinfo':userInfo});var getUnit=rsapi.post(\"/unit/getUnit\",{'userinfo':userInfo});var getApprovedLocation=rsapi.post(\"/samplestoragemaster/getSampleQty\",sampleDetails);urlArray=[geStorageCategory,getUnit,getApprovedLocation];Axios.all(urlArray)//    rsapi.post(\"/storagecategory/getStorageCategory\",\n//     { 'userinfo': userInfo })\n.then(function(response){var conditionMap=constructOptionList(response[0].data,\"nstoragecategorycode\",\"sstoragecategoryname\",false,false,true);var conditionMaster=conditionMap.get(\"OptionList\");var conditionUnitMap=constructOptionList(response[1].data,\"nunitcode\",\"sunitname\",false,false,true);var conditionUnitMaster=conditionUnitMap.get(\"OptionList\");var approvedTreeData=[];selectedRecord[\"nsamplestoragelocationcode\"]=[];selectedRecord[\"nstoragecategorycode\"]=[];selectedRecord[\"nsampleqty\"]=undefined;selectedRecord[\"sampleToStore\"]=sampleDetails.sample===undefined?\"\":sampleDetails.sample;if(response[2].data!==null&&response[2].data.unit&&response[2].data.unit.value!==undefined){conditionUnitMaster.map(function(item){return item.value===response[2].data.unit.value?selectedRecord[\"nunitcode\"]={\"label\":item.label,\"value\":item.value,\"item\":item.item}:\"\";});}masterData=_objectSpread(_objectSpread({},masterData),{},{storageCategory:conditionMaster,approvedTreeData:approvedTreeData,unitMaster:conditionUnitMaster});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,openChildModal:true,operation:\"sendToStore\",ncontrolcode:sendToStoreId,selectedRecord:selectedRecord,npreregno:sampleDetails.npreregno,ntransactionsamplecode:sampleDetails.ntransactionsamplecode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data);}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/RegistrationAction.js"],"names":["React","rsapi","Axios","toast","filterRecordBasedOnTwoArrays","sortData","rearrangeDateFormat","convertDateTimetoString","fillRecordBasedOnCheckBoxSelection","getRecordBasedOnPrimaryKeyName","updatedObjectWithNewElement","replaceUpdatedObject","parentChildComboLoad","getSameRecordFromTwoArrays","constructjsonOptionList","constructjsonOptionDefault","childComboLoad","filterRecordBasedOnPrimaryKeyName","reArrangeArrays","childComboLoadForEdit","DEFAULT_RETURN","intl","initRequest","transactionStatus","crudMaster","postCRUDOrganiseTransSearch","constructOptionList","Operators","TextFilter","NumericFilter","DateFilter","ComboBox","Utils","QbUtils","checkTree","loadTree","getSampleTypeChange","Map","masterData","event","labelname","dispatch","post","then","response","data","item","type","payload","loading","catch","error","message","getSubSampleChildTabDetail","inputData","ntransactionsamplecode","length","inputParamData","userinfo","url","activeSubSampleTab","responseData","selectedSubSample","showFilter","screenName","activeTestTab","status","info","selectedSample","activeSampleTab","formatMessage","id","getRegTypeChange","getRegSubTypeChange","onApprovalConfigVersionChange","getComponentTestBySpec","selectedRecord","Component","Test","slno","selectedComponent","undefined","SelectedTest","Object","keys","popUptestDataState","skip","take","getTestfromDB","objComponent","LoginProps","nflag","component","value","label","dreceiveddate","userInfo","nspecsampletypecode","nneedsubsample","RealRegSubTypeValue","TestData","loadComponent","selectComponent","showSaveContinue","SelectedSource","parentPopUpSize","CurrentTime","unshift","EditComponent","urlArray","ComponentTestBySpec","timezone","all","lstComponentMap","lstComponent","timeZoneListMap","TimeZoneField","get","timeZoneList","scomponentname","ncomponentcode","ntzdreceivedate","findIndex","x","ntimezonecode","stimezoneid","childoperation","ChildscreenName","openChildModal","ReloadData","searchSampleRef","current","searchSubSampleRef","searchTestRef","testskip","testtake","subsampletake","subsampleskip","showSample","getTreeByProduct","comboData","inputParam","Specification","AgaramTree","ActiveKey","FocusKey","OpenNodes","selectedSpec","sversion","ntemplatemanipulationcode","subSampleDataGridList","getNewRegSpecification","selectedNode","operation","methodUrl","ntreetemplatemanipulationcode","activeKey","focusKey","primaryKey","AddComponents","sreceiveddate","stzdreceivedate","scomments","nallottedspeccode","openPortal","openModal","getAllTest","specBasedComponent","selectPackage1","specBasedTestPackage","selectPackage","conditionalTestPackage","PackageData","TestCombined","componentTest","TestPackage","loadTest","getTest","TestGet","TestPackageGet","PackageDataMap","AllTest","addsubSample","columnList","childColumnList","SubSamplecomboComponents","SubSamplewithoutCombocomponent","isServiceRequired","SubSamplecomboData","timeZoneService","actualService","parentcolumnlist","childcolumnlist","currentDate","dateService","datecolumnlist","filter","inputtype","timeZoneMap","defaultTimeZone","newcomboData","slanguagetypecode","comboData1","selectedRecord1","map","componentrow","loadcurrentdate","nperiodcode","Date","loadselecteddate","hidebeforedate","hideafterdate","radioOptions","tags","text","loadSubSample","parentSubSampleColumnList","childSubSampleColumnList","selectedTestData","selectedobject","Reg","testPackageTest","subSampleBased","ntestpackagecode","availableTest","ntestgrouptestcode","addSubSampleSaveContinue","Map1","selectedTestPackageData","selectedTestPackageData1","some","y","selectedTestData1","masterStatus","editSubSample","Componnet","comp","nregsubtypecode","portalOrder","containerType","containerList","nportalordercode","jsondata","push","insertRegistration","rtn","RegistrationGetSample","RegistrationGetSubSample","RegistrationGetTest","selectedTest","multipleselectionFlag","respObject","loadEsign","showConfirmAlert","loadPreregister","postParamList","insertRegistrationScheduler","SchedulerTransaction","getRegistrationSample","selectedFilter","getRegistrationsubSampleDetail","nsampletypecode","nregtypecode","npreregno","ntransactionstatus","napprovalconfigcode","ndesigntemplatemappingcode","ntype","checkBoxOperation","activeName","dataStateName","subSample","skipInfo","oldSelectedTest","oldSelectedSubSample","childTabsKey","removeElementFromArray","selectedPreregno","RegistrationTestComment","RegistrationTestAttachment","RegistrationParameter","RegistrationComment","wholeSubSampleList","b","forEach","subsample","index","includes","splice","ResponseData","RegistrationTestComment1","ntransactiontestcode","RegistrationTestAttachment1","resultResponseData","RegistrationParameter1","ntransactiontestcode1","ResponseData1","RegistrationTestComment2","ntransactionTestCode","bool","wholeTestList","test","keepOld","sampleGridDataState","sort","isGrandChildGetRequired","TestSelected","subSampleSelected","filterTestSameOldSelectedTest","join","filterSelectedSubSample","getRegistrationTestDetail","getTestChildTabDetailRegistration","subsamplecheck","SubSampleSelected","wholeSubSample","selectedSubSample1","dataStateArray","arr","selectedTransactionsamplecode","RegistrationSampleComment","RegistrationSampleAttachment","testList","wholeSubsampleList","activeTabIndex","toString","selectedTransactioncode","acceptRegistration","addMoreTest","ncontrolCode","sampleList","obj","slice","selectedsample","findTransactionStatus","Set","REJECT","CANCELLED","RELEASED","findApprovalVersion","napprovalversioncode","findSampleSpec","loadChildTest","props","createRegistrationTest","modalName","classUrl","getEditRegistrationComboService","comboComponents","withoutCombocomponent","primaryKeyName","editRegParam","mastertoedit","selectedRegistration","languagetypeCode","comboValues","optionList","valuemember","displaymember","source","isMultiLingual","date","sregsubtypename","updateRegistration","regDateEditConfirmMessage","regEditParam","cancelTestAction","cancelSampleAction","addsubSampleRegistration","regcolumnList","selectRecord","regchildColumnList","regSubSamplecomboComponents","regSubSamplewithoutCombocomponent","ncontrolcode","loadRegSubSample","regSubSamplecomboData","regparentSubSampleColumnList","regchildSubSampleColumnList","saveSubSample","getEditSubSampleComboService","editSubSampleRegParam","formattedMessage","onUpdateSubSampleRegistration","cancelSubSampleAction","preregRecordToQuarantine","selectedSampleCode","selectedTestCode","activeTabId","ApprovalParameter","ResultUsedInstrument","ResultUsedTasks","ApprovalResultChangeHistory","ApprovalHistory","toTimestamp","strDate","dt","getTime","getDynamicFilter","languageTypeCode","lstData","gridColumns","fields","datefileds","multilingual","filterfields","filterObject","ismultilingual","columnname","filterinputtype","creategridColumns","JSON","parse","rearrangeDateFormatforKendoDataTool","mul","selectedComponentpath","loadCustomSearchFilter","lstPatient","displayname","seletedFilterComponent","kendoSkip","kendoTake","kendoFilter","logic","filters","filterObjectForReactAwesomeFilter","awesomeTree","filterquery","selectedFieldRecord","awesomeConfig","onExecute","datapredef","CustomFilter","defaultItem","onChange","onFilterChange","call","nextFilter","target","field","title","width","filterFields","resposedata","predefinedtablename","predefinedismultilingual","predefineddisplaymember","predefinedvaluemember","valueSources","mainWidgetProps","fieldSettings","numericcondition","listValues","preobj","name","operators","numeric","getDynamicFilterExecuteData","nformcode","dateValue","splitChar","ssitedatetime","indexOf","substring","firstField","split","timeSplitChar","datetime","dateArray","day","month","year","time","formatted","preRegDispatch","validateEsignforRegistration","toLowerCase","dispatchMethods","screenData","action","getStorageCategoryForSendToStore","sendToStoreId","sampleDetails","geStorageCategory","getUnit","getApprovedLocation","conditionMap","conditionMaster","conditionUnitMap","conditionUnitMaster","approvedTreeData","sample","unit","storageCategory","unitMaster"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport rsapi from '../rsapi';\r\nimport Axios from 'axios';\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport {\r\n    filterRecordBasedOnTwoArrays, sortData,\r\n    rearrangeDateFormat, convertDateTimetoString, \r\n    fillRecordBasedOnCheckBoxSelection, getRecordBasedOnPrimaryKeyName, updatedObjectWithNewElement, \r\n    replaceUpdatedObject, parentChildComboLoad, getSameRecordFromTwoArrays, constructjsonOptionList,\r\n     constructjsonOptionDefault, childComboLoad, filterRecordBasedOnPrimaryKeyName, reArrangeArrays, childComboLoadForEdit\r\n} from '../components/CommonScript'\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport { intl } from '../components/App';\r\nimport { initRequest } from './LoginAction';\r\nimport { //RegistrationSubType, RegistrationType, \r\n    transactionStatus\r\n} from '../components/Enumeration';\r\nimport { crudMaster, postCRUDOrganiseTransSearch } from './ServiceAction'\r\n//import { getTestChildTabDetail } from './index.js'\r\nimport { constructOptionList } from '../components/CommonScript';\r\nimport {\r\n    Operators,\r\n    TextFilter,\r\n    NumericFilter,\r\n   // BooleanFilter,\r\n    DateFilter,\r\n   // EnumFilter,\r\n  //  EnumFilterProps,\r\n} from \"@progress/kendo-react-data-tools\";\r\nimport { ComboBox } from \"@progress/kendo-react-dropdowns\";\r\nimport { Utils as QbUtils } from \"react-awesome-query-builder\";\r\nconst { checkTree, loadTree } = QbUtils;\r\n\r\nexport function getSampleTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getRegTypeBySampleType\", Map)\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getSubSampleChildTabDetail(inputData) {\r\n    return function (dispatch) {\r\n        if (inputData.ntransactionsamplecode.length > 0) {\r\n            let inputParamData = {\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n                userinfo: inputData.userinfo\r\n            }\r\n            let url = null\r\n            switch (inputData.activeSubSampleTab) {\r\n                case \"IDS_SUBSAMPLEATTACHMENTS\":\r\n                    url = \"attachment/getSubSampleAttachment\"\r\n                    break;\r\n                case \"IDS_SUBSAMPLECOMMENTS\":\r\n                    url = \"comments/getSubSampleComment\"\r\n                    break;\r\n                default:\r\n                    url = null\r\n                    break;\r\n            }\r\n            if (url !== null) {\r\n                dispatch(initRequest(true));\r\n                rsapi.post(url, inputParamData)\r\n                    .then(response => {\r\n                        let responseData = { ...response.data }\r\n                        responseData = sortData(responseData)\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                masterData: {\r\n                                    ...inputData.masterData,\r\n                                    ...responseData,\r\n                                    selectedSubSample: inputData.selectedSubSample,\r\n                                    // selectedTestCode: inputData.ntransactiontestcode,\r\n                                },\r\n                                loading: false,\r\n                                showFilter: false,\r\n                                activeSubSampleTab: inputData.activeSubSampleTab,\r\n                                screenName: inputData.screenName,\r\n                                activeTestTab: inputData.activeSubSampleTab,\r\n                                screenName: inputData.screenName\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        }\r\n                        else {\r\n                            toast.info(error.response.data);\r\n                        }\r\n                    })\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab\r\n                    }\r\n                })\r\n            }\r\n        } else {\r\n            //toast.info(\"Please Select a Sample\");\r\n           \r\n            toast.info(intl.formatMessage({ id: \"IDS_PLSSELECTASAMPLE\" }));\r\n        }\r\n    }\r\n}\r\n\r\nexport function getRegTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        rsapi.post(\"/registration/getRegSubTypeByRegType\", Map)\r\n            .then(response => {\r\n                // const RegistrationSubType = response.data[\"RegistrationSubType\"];\r\n\r\n                //  console.log(response.data);\r\n                // RegistrationSubType.length > 0 ?\r\n                //     selectedRecord[\"nregsubtypecode\"] = {\r\n                //         \"value\": RegistrationSubType[0].nregsubtypecode,\r\n                //         \"label\": RegistrationSubType[0].sregsubtypename\r\n                //     } : selectedRecord[\"nregsubtypecode\"] = \"\";\r\n                // const [labelname] = event.item;\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegSubTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getRegTemplateTypeByRegSubType\", Map)\r\n\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function onApprovalConfigVersionChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getApprovalConfigBasedTemplateDesign\", Map)\r\n\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getComponentTestBySpec(Map, selectedRecord, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getComponentTestBySpec\", Map)\r\n            .then(response => {\r\n                const { Component, Test } = response.data;\r\n                let slno = Component.length > 0 ? Component[0].slno : -1;\r\n                let selectedComponent = Component.length > 0 ? Component[0] : undefined\r\n                let SelectedTest = [];\r\n                if (Object.keys(Test).length > 0) {\r\n                    SelectedTest = Test[slno];\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Component, Test, SelectedTest, selectedComponent, loading: false,\r\n                        selectedRecord, popUptestDataState: { skip: 0, take: 10 }\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTestfromDB(objComponent, LoginProps, nflag) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let component = { ...objComponent };\r\n        component[\"ncomponentcode\"] = objComponent[\"ncomponentcode\"] ? objComponent[\"ncomponentcode\"].value : -1;\r\n        component[\"nstoragelocationcode\"] = objComponent[\"nstoragelocationcode\"] ? objComponent[\"nstoragelocationcode\"].value : -1;\r\n        component[\"nstorageconditioncode\"] = objComponent[\"nstorageconditioncode\"] ? objComponent[\"nstorageconditioncode\"].value : -1;\r\n        component[\"slno\"] = LoginProps.Component ? Object.keys(LoginProps.Component).length + 1 : 0;\r\n        component[\"scomponentname\"] = objComponent[\"ncomponentcode\"].label;\r\n        component[\"sstoragelocationname\"] = objComponent[\"nstoragelocationcode\"] && objComponent[\"nstoragelocationcode\"].label ? objComponent[\"nstoragelocationcode\"].label : \"\";\r\n        component[\"sstorageconditionname\"] = objComponent[\"nstorageconditioncode\"] && objComponent[\"nstorageconditioncode\"].label ? objComponent[\"nstorageconditioncode\"].label : \"\";\r\n        component[\"ntzdmanufdate\"] = objComponent[\"ntzdmanufdate\"] ? objComponent[\"ntzdmanufdate\"].value : -1;\r\n        component[\"ntzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].value : -1;\r\n        component[\"stzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].label : \"\";\r\n        component[\"nplasmafilecode\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].value : -1;\r\n        component[\"splasmafilenumber\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].label : \"\";\r\n        const dreceiveddate = objComponent[\"dreceiveddate\"];\r\n        component[\"dreceiveddate\"] = dreceiveddate;//formatInputDate(objComponent[\"dreceiveddate\"], false);\r\n        component[\"sreceiveddate\"] = convertDateTimetoString(dreceiveddate, LoginProps.userInfo);//formatInputDateWithoutT(objComponent[\"dreceiveddate\"], false);//formatDate(objComponent[\"sreceiveddate\"]);\r\n        // rsapi.post(\"/registration/getTestfromDB\", { \"Component\": component })\r\n        rsapi.post(\"/registration/getTestfromDB\", {\r\n            nspecsampletypecode: component.nspecsampletypecode,\r\n            slno: component.slno,\r\n            nneedsubsample:LoginProps.masterData.RealRegSubTypeValue.nneedsubsample\r\n        })\r\n            .then(response => {\r\n                let TestData = response.data;\r\n                let slno = component.slno;\r\n                let SelectedTest = [];\r\n                let loadComponent = true;\r\n                let selectComponent = {};\r\n                let showSaveContinue = true;\r\n                let SelectedSource = [];\r\n                // let openChildModal = true;\r\n                let selectedComponent = undefined;\r\n                let parentPopUpSize = \"lg\"\r\n                // selectComponent = objComponent\r\n                if (nflag === 1) {\r\n                    loadComponent = true;\r\n                    objComponent[\"smanuflotno\"] = \"\";\r\n                    objComponent[\"dreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime)//new Date(LoginProps.CurrentTime);\r\n                    objComponent[\"sreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime)//new Date(LoginProps.CurrentTime);\r\n                    selectComponent = objComponent;\r\n                } else {\r\n                    loadComponent = false;\r\n                    parentPopUpSize = \"xl\"\r\n                    // openChildModal = false;\r\n                    showSaveContinue = false;\r\n                    selectComponent = undefined\r\n                }\r\n                let Test = LoginProps.Test || [];\r\n                let Component = LoginProps.Component || [];\r\n                Component.unshift(component);\r\n                selectedComponent = component;\r\n                Test[slno] = response.data;\r\n                SelectedTest = TestData;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Component, Test, SelectedTest, selectComponent, selectedComponent,\r\n                        loadComponent, showSaveContinue, parentPopUpSize, loading: false, SelectedSource\r\n                    }\r\n                });\r\n                // console.log(response.data);\r\n            })\r\n            .catch(error => {\r\n                //   console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function EditComponent(Map, component, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [];\r\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\",\r\n            Map);\r\n\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n\r\n        urlArray = [ComponentTestBySpec, timezone]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, true);\r\n                const TimeZoneField = response[1].data;\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n\r\n                component[\"ncomponentcode\"] = { label: component.scomponentname, value: component.ncomponentcode }\r\n                component[\"dreceiveddate\"] = rearrangeDateFormat(userInfo, component[\"sreceiveddate\"]);\r\n                component[\"scomments\"] = component[\"scomments\"]\r\n\r\n                let ntzdreceivedate = component.ntzdreceivedate;\r\n                if (component.ntzdreceivedate !== null && typeof component.ntzdreceivedate === \"object\") {\r\n                    ntzdreceivedate = component.ntzdreceivedate.value;\r\n                }\r\n                component[\"ntzdreceivedate\"] = component.ntzdreceivedate ?\r\n                    {\r\n                        \"label\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].stimezoneid, \"value\":\r\n                            TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].ntimezonecode\r\n                    } : \"\"\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadComponent: true, childoperation: \"update\",\r\n                        lstComponent, ChildscreenName: \"Component\",\r\n                        openChildModal: false, selectComponent: component, parentPopUpSize: \"lg\",\r\n                        timeZoneList, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function ReloadData(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData })\r\n            .then(response => {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    ...response.data\r\n                }\r\n                if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                    inputData.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    //masterData['searchedTests'] = undefined\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // let selectedFilter = inputData.selectedFilter;\r\n                // selectedFilter[\"fromdate\"] = \"\";\r\n                // selectedFilter[\"todate\"] = \"\";\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        testskip: 0,\r\n                        take: undefined,\r\n                        testtake: undefined,\r\n                        subsampletake: undefined,\r\n                        subsampleskip: 0,\r\n                        showSample: undefined,\r\n                        //selectedFilter\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTreeByProduct(Map, selectedRecord, comboData, inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getTreeByProduct\", Map)\r\n            .then(response => {\r\n                let { Specification, AgaramTree, ActiveKey, FocusKey, OpenNodes } = [];\r\n                const selectedSpec = {}\r\n                if (response.data[\"rtn\"] === true) {\r\n                    Specification = constructOptionList(response.data[\"Specification\"] || [], \"nallottedspeccode\",\r\n                        \"sspecname\", undefined, undefined, true).get(\"OptionList\");\r\n                    AgaramTree = response.data[\"AgaramTree\"];\r\n                    ActiveKey = response.data[\"ActiveKey\"];\r\n                    FocusKey = response.data[\"FocusKey\"];\r\n                    OpenNodes = response.data[\"OpenNodes\"];\r\n                    //Manufacturer = response.data[\"Manufacturer\"];\r\n                    selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\r\n                        \"value\": Specification[0].value,\r\n                        \"label\": Specification[0].label,\r\n                        \"item\": Specification[0].item\r\n                    } : \"\";\r\n\r\n                    selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\"\r\n                    selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1\r\n                }\r\n                selectedRecord = { ...selectedRecord, ...selectedSpec }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Specification,\r\n                        selectedRecord,\r\n                        AgaramTree, ActiveKey, FocusKey, OpenNodes,\r\n                        Test: [],\r\n                        SelectedTest: [],\r\n                        loading: false,\r\n                        comboData,\r\n                        ...inputParam,\r\n                        selectedSpec,\r\n                        Component: [],\r\n                        selectComponent: {},\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList:[]\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport const getNewRegSpecification = (inputParam, masterData) => {\r\n    return (dispatch) => {\r\n        if (inputParam.selectedNode !== null) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/registration/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam, ntreetemplatemanipulationcode: inputParam.selectedNode.ntemplatemanipulationcode })\r\n                .then(response => {\r\n                    sortData(response.data);\r\n                    let Specification = constructOptionList(response.data || [], \"nallottedspeccode\", \"sspecname\", false, false, true).get(\"OptionList\");\r\n                    let selectedComponent = undefined;\r\n                    inputParam.selectedRecord[\"nallottedspeccode\"] = Specification.length > 0 ? { value: Specification[0].value, label: Specification[0].label, item: Specification[0].item } : \"\";\r\n                    inputParam.selectedRecord[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\r\n                    inputParam.selectedRecord[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ActiveKey: inputParam.activeKey,\r\n                            FocusKey: inputParam.focusKey,\r\n                            primaryKey: inputParam.primaryKey,\r\n                            Specification: Specification,\r\n                            selectedNode: inputParam.selectedNode,\r\n                            selectedRecord: inputParam.selectedRecord,\r\n                            Test: [],\r\n                            selectedComponent,\r\n                            SelectedTest: [],\r\n                            loading: false,\r\n                            showSample: undefined\r\n                        }\r\n                    }\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.info(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\nexport function AddComponents(Map) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = []\r\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\",\r\n            Map);\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n\r\n        urlArray = [ComponentTestBySpec, timezone\r\n        ]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, true);\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n                let dreceiveddate = null;\r\n                if (lstComponent[0].item.sreceiveddate)\r\n                    dreceiveddate = rearrangeDateFormat(Map[\"userinfo\"], lstComponent[0].item.sreceiveddate);//new Date(lstComponent[0].item.sreceiveddate);//|| [];\r\n\r\n                let selectComponent = {\r\n                    sreceiveddate: dreceiveddate,\r\n                    dreceiveddate,\r\n                    ntzdreceivedate: { \"label\": Map[\"userinfo\"].stimezoneid, \"value\": Map[\"userinfo\"].ntimezonecode },\r\n                    stzdreceivedate: Map[\"userinfo\"].stimezoneid,\r\n                    scomments: \"\",\r\n                    nallottedspeccode: lstComponent[0].item.nallottedspeccode\r\n                };\r\n                let CurrentTime = dreceiveddate;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadComponent: true,\r\n                        lstComponent, dreceiveddate, ChildscreenName: \"Component\",\r\n                        showSaveContinue: true, openChildModal: false, childoperation: \"create\", selectComponent\r\n                        , parentPopUpSize: \"lg\", CurrentTime, timeZoneList, loading: false,\r\n                        openPortal: true, openModal: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getAllTest(objComponent, LoginProps, nneedsubsample, specBasedComponent,selectPackage1,specBasedTestPackage,selectPackage) {\r\n    return function (dispatch) {\r\n        if (Object.keys(objComponent).length > 0) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/registration/getTestfromDB\", {\r\n                nspecsampletypecode: objComponent.nspecsampletypecode,\r\n                slno: objComponent.slno,\r\n                nneedsubsample: nneedsubsample,\r\n                nallottedspeccode: objComponent.nallottedspeccode,\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage:specBasedTestPackage,\r\n                conditionalTestPackage: true,\r\n            //    ntestpackagecode:selectPackage.ntestpackagecode.value\r\n\r\n            })\r\n                .then(response => {\r\n                    let PackageData = [];\r\n                    let TestCombined = [];\r\n                 //   const TestCombined = response.data;\r\n                    let TestData = response.data;\r\n                    let Test = LoginProps.Test || [];\r\n                    let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n                     TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestgrouptestcode\");\r\n                \r\n                 \r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            TestCombined, TestPackage:PackageData,selectPackage:[],\r\n                            loadTest: true, openChildModal: false,\r\n                            ChildscreenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                            screenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                            operation: \"create\",\r\n                            childoperation: \"create\",\r\n                            parentPopUpSize: \"lg\", loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                })\r\n        } else {\r\n            toast.info(intl.formatMessage({ id: \"IDS_SELECTCOMPONENTTOADDTEST\" }));\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function getTest(objComponent, LoginProps, nneedsubsample, specBasedComponent,selectPackage1,specBasedTestPackage,selectPackage) {\r\n    return function (dispatch) {\r\n       \r\n\r\n       // if (Object.keys(objComponent).length > 0) {\r\n            const urlArray = []\r\n\r\n            const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n                nspecsampletypecode: objComponent.nspecsampletypecode,\r\n                slno: objComponent.slno,\r\n                nneedsubsample: nneedsubsample,\r\n                nallottedspeccode: objComponent.nallottedspeccode,\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage: specBasedTestPackage,\r\n                conditionalTestPackage: true,\r\n                //    ntestpackagecode:selectPackage.ntestpackagecode.value\r\n\r\n            });\r\n            urlArray[0] = TestGet;\r\n            const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n                nspecsampletypecode: objComponent.nspecsampletypecode,\r\n                slno: objComponent.slno,\r\n                nneedsubsample: nneedsubsample,\r\n                nallottedspeccode: objComponent.nallottedspeccode,\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage: specBasedTestPackage,\r\n                conditionalTestPackage: true,\r\n            });\r\n            urlArray[1] = TestPackageGet;\r\n            dispatch(initRequest(true));\r\n         Axios.all(urlArray).then(response => {\r\n                    \r\n                   // const TestCombined = [];\r\n                    let PackageData = [];\r\n                  //  if (specBasedTestPackage) {\r\n                        const PackageDataMap = constructOptionList(response[1].data.TestPackage || [], \"ntestpackagecode\",\r\n                            \"stestpackagename\", undefined, undefined, true);\r\n                        PackageData = PackageDataMap.get(\"OptionList\");\r\n                //    }\r\n                //    else {\r\n                        let TestData = response[0].data;\r\n                        let Test = LoginProps.Test || [];\r\n                        let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n                        let TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n                //    }\r\n                    // const lstComponentMap = constructOptionList(TestCombined|| [], \"ntestgrouptestcode\",\r\n                    //\"stestsynonym\", undefined, undefined, true);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            TestCombined, TestPackage:PackageData,selectPackage:[],AllTest:TestData,\r\n                            loadTest: true, openChildModal: false,\r\n                            ChildscreenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                            screenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                            operation: \"create\",\r\n                            childoperation: \"create\",\r\n                            parentPopUpSize: \"lg\", loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                })\r\n        // } else {\r\n        //     toast.info(intl.formatMessage({ id: \"IDS_SELECTCOMPONENTTOADDTEST\" }));\r\n        // }\r\n\r\n    }\r\n}\r\n\r\nexport function addsubSample(masterData, userinfo, columnList,\r\n    selectComponent, childColumnList,\r\n    SubSamplecomboComponents, SubSamplewithoutCombocomponent,\r\n    specBasedComponent, Map, Component, isServiceRequired,\r\n    SubSamplecomboData, selectedRecord,conditionalTestPackage,specBasedTestPackage,LoginProps) {\r\n    if (isServiceRequired) {\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            const urlArray = []\r\n            const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n            urlArray[0] = timeZoneService;\r\n            const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n                parentcolumnlist: columnList ? columnList : [],\r\n                childcolumnlist: childColumnList ? childColumnList : [],\r\n                userinfo\r\n            })\r\n            urlArray[1] = actualService;\r\n            if (specBasedComponent) {\r\n                const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                    ...Map,\r\n                    specBasedComponent: specBasedComponent,\r\n                 //   conditionalTestPackage:true\r\n                })\r\n                urlArray[2] = ComponentTestBySpec;\r\n            } else {\r\n                Component = Component ? Component : []\r\n                const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    nneedsubsample: Map[\"nneedsubsample\"],\r\n                    // nallottedspeccode: objComponent.nallottedspeccode,\r\n                    specBasedComponent: specBasedComponent,\r\n                    conditionalTestPackage:true,\r\n                    specBasedTestPackage:specBasedTestPackage\r\n                })\r\n                urlArray[2] = TestGet;\r\n                const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                   // slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    specBasedComponent: specBasedComponent,\r\n                 //   specBasedTestPackage: specBasedTestPackage,\r\n                  //  conditionalTestPackage: conditionalTestPackage\r\n                });\r\n                urlArray[5] = TestPackageGet;\r\n            }\r\n            const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n                userinfo\r\n            })\r\n\r\n            urlArray[3] = currentDate\r\n\r\n            const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                userinfo\r\n            })\r\n            urlArray[4] = dateService\r\n          \r\n            Axios.all(urlArray).then(response => {\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userinfo.stimezoneid, value: userinfo.ntimezonecode }\r\n                const newcomboData = parentChildComboLoad(columnList, response[1].data,\r\n                    selectComponent, childColumnList, SubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo)\r\n                let TestCombined = [];\r\n                let lstComponent = [];\r\n                let PackageData = []\r\n                if (specBasedComponent) {\r\n                    const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, true);\r\n\r\n                    lstComponent = lstComponentMap.get(\"OptionList\");\r\n\r\n                } else {\r\n                   /// if (specBasedTestPackage) {\r\n                        const PackageDataMap = constructOptionList(response[5].data.TestPackage || [], \"ntestpackagecode\",\r\n                        \"stestpackagename\", undefined, undefined, true);\r\n                        PackageData = PackageDataMap.get(\"OptionList\");\r\n\r\n                        // if (PackageData.length === 0) {\r\n                        //     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \r\n                        // }                      \r\n                    // }\r\n                    // else {\r\n                        TestCombined = response[2].data\r\n                    //}\r\n                }\r\n                const comboData1 = newcomboData.comboData\r\n                const selectedRecord1 = newcomboData.selectedRecord\r\n                SubSamplewithoutCombocomponent.map(componentrow => {\r\n                    if (componentrow.inputtype === \"date\") {\r\n                        if (componentrow.loadcurrentdate) {\r\n                            selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[3].data) : \"\";\r\n                            selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                        } else if (componentrow.nperiodcode) {\r\n                            selectedRecord1[componentrow.label + \"value\"] = response[4].data[componentrow.label] ?\r\n                                new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                            if (componentrow.loadselecteddate) {\r\n                                selectedRecord1[componentrow.label] = response[4].data[componentrow.label] ?\r\n                                    new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                            }\r\n                            //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                            //    new Date(response[2].data[componentrow.label]):null;\r\n                        } else {\r\n                            selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                        }\r\n\r\n                        if (componentrow.hidebeforedate) {\r\n                            selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                        }\r\n                        if (componentrow.hideafterdate) {\r\n                            selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                        }\r\n\r\n                    }\r\n                    else if (componentrow.inputtype === \"radio\") {\r\n                        selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                            componentrow.radioOptions.tags[0].text : \"\";\r\n                    }\r\n\r\n                })\r\n                //console.log(\"selectedRecord1 action1:\", selectedRecord1);\r\n                // if (masterData.RealRegSubTypeValue.nregsubtypecode === 6) {\r\n\r\n                //     let portalOrder = selectedRecord && selectedRecord['Portal Order ID'] || {}\r\n                //     let containerType = comboData1['Container Type'] || []\r\n                //     comboData1['ContainerType'] = comboData1['Container Type'] || []\r\n                //     let containerList = []\r\n                //     const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\r\n                //     containerType.map(x => {\r\n                //         if (x.item.jsondata.nportalordercode === nportalordercode) {\r\n                //             containerList.push(x)\r\n                //         }\r\n                //     })\r\n\r\n                //     comboData1['Container Type'] = containerList\r\n                // }\r\n\r\n\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                        screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                        showSaveContinue: true,\r\n                        openChildModal: false,\r\n                        childoperation: \"create\",\r\n                        parentPopUpSize: \"lg\",\r\n                        loading: false,\r\n                        lstComponent,\r\n                        openPortal: true,\r\n                        openModal: false,\r\n                        operation: \"create\",\r\n                        loadSubSample: true,\r\n                        selectComponent: selectedRecord1,\r\n                        SubSamplecomboData: comboData1,\r\n                        SubSamplecomboComponents,\r\n                        SubSamplewithoutCombocomponent,\r\n                        TestCombined,\r\n                        parentSubSampleColumnList: columnList,\r\n                        childSubSampleColumnList: childColumnList,\r\n                        timeZoneList,\r\n                        defaultTimeZone,\r\n                        masterData,\r\n                        selectPackage: [],\r\n                        TestPackage: PackageData\r\n                    }\r\n                });\r\n            })\r\n                .catch(error => {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                })\r\n        }\r\n    } else {\r\n        const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\r\n            selectComponent, childColumnList,\r\n            SubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo)\r\n        return (dispatch) => {\r\n            if (!specBasedComponent) {\r\n                const urlArray = []\r\n                const ComponentTestBySpec = rsapi.post(\"/registration/getTestfromDB\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                   // nneedsubsample: Map[\"nneedsubsample\"],\r\n                    ...Map,\r\n                    // nallottedspeccode: objComponent.nallottedspeccode,\r\n                    specBasedComponent: specBasedComponent,\r\n                    conditionalTestPackage:true,\r\n                    specBasedTestPackage: specBasedTestPackage\r\n                })\r\n                urlArray[0] = ComponentTestBySpec;\r\n                const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n                    userinfo\r\n                })\r\n                urlArray[1] = currentDate;\r\n                const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                    datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                    userinfo\r\n                })\r\n                urlArray[2] = dateService\r\n                const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n                  //  nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n                  nallottedspeccode:selectedRecord.nallottedspeccode.item.nallottedspeccode,\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    specBasedComponent: specBasedComponent,\r\n                    specBasedTestPackage: specBasedTestPackage,\r\n                    conditionalTestPackage: conditionalTestPackage\r\n                });\r\n                urlArray[3] = TestPackageGet;\r\n                Axios.all(urlArray).then(response => {\r\n                    let TestCombined = []\r\n                    let PackageData = []\r\n\r\n                  //  if (!specBasedTestPackage) {\r\n                         TestCombined = response[0].data\r\n                    // } \r\n                    // else {\r\n                        const PackageDataMap = constructOptionList(response[3].data.TestPackage || [], \"ntestpackagecode\",\r\n                        \"stestpackagename\", undefined, undefined, true);\r\n                        PackageData = PackageDataMap.get(\"OptionList\");\r\n                       // if (PackageData.length === 0) {\r\n                        //    dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \r\n                        //} \r\n\r\n                   // }\r\n                    const selectedRecord1 = newcomboData.selectedRecord\r\n                    SubSamplewithoutCombocomponent.map(componentrow => {\r\n                        if (componentrow.inputtype === \"date\") {\r\n                            if (componentrow.loadcurrentdate) {\r\n                                selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[1].data) : \"\";\r\n                                selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                            } else if (componentrow.nperiodcode) {\r\n                                selectedRecord1[componentrow.label + \"value\"] = response[2].data[componentrow.label] ?\r\n                                    new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                if (componentrow.loadselecteddate) {\r\n                                    selectedRecord1[componentrow.label] = response[2].data[componentrow.label] ?\r\n                                        new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                }\r\n                                //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                                //    new Date(response[2].data[componentrow.label]):null;\r\n                            } else {\r\n                                selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                            }\r\n\r\n                            if (componentrow.hidebeforedate) {\r\n                                selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n                            if (componentrow.hideafterdate) {\r\n                                selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n\r\n                        }\r\n                        else if (componentrow.inputtype === \"radio\") {\r\n                            selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                                componentrow.radioOptions.tags[0].text : \"\";\r\n                        }\r\n\r\n                    })\r\n                    // if (masterData.RealRegSubTypeValue.nregsubtypecode === 6) {\r\n\r\n                    //     let portalOrder = selectedRecord && selectedRecord['Portal Order ID'] || {}\r\n                    //     let containerType = SubSamplecomboData['ContainerType'] || []\r\n                    //     let containerList = []\r\n                    //     const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\r\n                    //     containerType.map(x => {\r\n                    //         if (x.item.jsondata.nportalordercode === nportalordercode) {\r\n                    //             containerList.push(x)\r\n                    //         }\r\n                    //     })\r\n\r\n                    //     SubSamplecomboData['Container Type'] = containerList\r\n                    // }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                            screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                            showSaveContinue: true,\r\n                            openChildModal: false,\r\n                            childoperation: \"create\",\r\n                            parentPopUpSize: \"lg\",\r\n                            loading: false,\r\n                            lstComponent: [],\r\n                            openPortal: true,\r\n                            openModal: false,\r\n                            operation: \"create\",\r\n                            loadSubSample: true,\r\n                            selectComponent: selectedRecord1,\r\n                            TestCombined: TestCombined,\r\n                            TestPackage:PackageData\r\n                        }\r\n                    });\r\n                })\r\n            } else {\r\n                // Component = Component ? Component : []\r\n\r\n                const urlArray = []\r\n                const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                    ...Map,\r\n                    specBasedComponent: specBasedComponent\r\n                })\r\n                urlArray[0] = ComponentTestBySpec;\r\n                const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n                    userinfo\r\n                })\r\n                urlArray[1] = currentDate;\r\n                const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                    datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                    userinfo\r\n                })\r\n                urlArray[2] = dateService\r\n                Axios.all(urlArray).then(response => {\r\n                    // const lstComponent =  response.data.lstComponent\r\n                    let lstComponent = response[0].data.lstComponent //filterRecordBasedOnTwoArrays(response.data.lstComponent, Component, \"ncomponentcode\")\r\n                    const lstComponentMap = constructOptionList(lstComponent || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, true);\r\n\r\n                    lstComponent = lstComponentMap.get(\"OptionList\");\r\n\r\n                    const selectedRecord1 = newcomboData.selectedRecord\r\n                    SubSamplewithoutCombocomponent.map(componentrow => {\r\n                        if (componentrow.inputtype === \"date\") {\r\n                            if (componentrow.loadcurrentdate) {\r\n                                selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[1].data) : \"\";\r\n                                selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                            } else if (componentrow.nperiodcode) {\r\n                                selectedRecord1[componentrow.label + \"value\"] = response[2].data[componentrow.label] ?\r\n                                    new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                if (componentrow.loadselecteddate) {\r\n                                    selectedRecord1[componentrow.label] = response[2].data[componentrow.label] ?\r\n                                        new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                }\r\n                                //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                                //    new Date(response[2].data[componentrow.label]):null;\r\n                            } else {\r\n                                selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                            }\r\n\r\n                            if (componentrow.hidebeforedate) {\r\n                                selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n                            if (componentrow.hideafterdate) {\r\n                                selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n\r\n                        }\r\n                        else if (componentrow.inputtype === \"radio\") {\r\n                            selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                                componentrow.radioOptions.tags[0].text : \"\";\r\n                        }\r\n\r\n                    })\r\n                    // if (masterData.RealRegSubTypeValue.nregsubtypecode === 6) {\r\n\r\n                    //     let portalOrder = selectedRecord && selectedRecord['Portal Order ID'] || {}\r\n                    //     let containerType = SubSamplecomboData['ContainerType'] || []\r\n                    //     let containerList = []\r\n                    //     const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\r\n                    //     containerType.map(x => {\r\n                    //         if (x.item.jsondata.nportalordercode === nportalordercode) {\r\n                    //             containerList.push(x)\r\n                    //         }\r\n                    //     })\r\n\r\n                    //     SubSamplecomboData['Container Type'] = containerList\r\n                    // }\r\n\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                            screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                            showSaveContinue: true,\r\n                            openChildModal: false,\r\n                            childoperation: \"create\",\r\n                            parentPopUpSize: \"lg\",\r\n                            loading: false,\r\n                            lstComponent,\r\n                            openPortal: true,\r\n                            openModal: false,\r\n                            operation: \"create\",\r\n                            loadSubSample: true,\r\n                            selectComponent: selectedRecord1,\r\n                            TestCombined: [],\r\n                            selectedTestData: [],\r\n                            selectPackage:[]\r\n                        }\r\n                    });\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n// export function componentTestPackage(selectedobject, Reg, specBasedComponent, Component,specBasedTestPackage,conditionalTestPackage) {\r\n//     return function (dispatch) {\r\n//         dispatch(initRequest(true));\r\n//         Component = Component ? Component : []\r\n//         rsapi.post(\"/registration/getTestfromDB\", {\r\n//             nspecsampletypecode: selectedobject.selectedSubSample &&\r\n//             [...new Set(selectedobject.selectedSubSample.map(x => x.nspecsampletypecode))].join(\",\"),\r\n//             conditionalTestPackage: true,\r\n//             specBasedTestPackage: specBasedTestPackage,\r\n//             specBasedComponent: specBasedComponent,\r\n//             nallottedspeccode:selectedobject.selectedSample[0].nallottedspeccode\r\n\r\n//         })\r\n//             .then(response => {\r\n//                 let PackageData = []\r\n//                 let TestData=[]\r\n//                 if (specBasedTestPackage) {\r\n//                     const PackageDataMap = constructOptionList(response.data.TestPackage || [], \"ntestpackagecode\",\r\n//                         \"stestpackagename\", undefined, undefined, true);\r\n//                     PackageData = PackageDataMap.get(\"OptionList\");\r\n                    \r\n//                     // if (PackageData.length === 0) {\r\n//                     //     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \r\n//                     // } \r\n//                 }\r\n//                 else {\r\n//                      TestData = response.data;\r\n//                 }\r\n//                 //let Test = [];\r\n//                 // Test[selectedobject.slno] = TestData;\r\n//                 const Map = {}\r\n//                 if (Reg) {\r\n//                     delete selectedobject.ntestpackagecode\r\n//                     delete selectedobject.ntestgrouptestcode\r\n\r\n//                     Map[\"selectedRecord\"] = selectedobject\r\n//                 } else {\r\n//                     Map[\"selectComponent\"] = selectedobject\r\n//                 }\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN,\r\n//                     payload: {\r\n//                         TestCombined: TestData, TestPackage: PackageData,\r\n//                         ...Map,\r\n//                         loading: false, selectedTestData: [],\r\n//                         availableTest:[],\r\n//                       //  selectPackage: {},\r\n//                         screenName: \"IDS_TEST\",\r\n//                         operation: \"create\",\r\n//                         openModal: true,\r\n//                         parentPopUpSize: \"lg\",\r\n//                         loadChildTest: true,\r\n//                        //selectedRecord:{},\r\n                        \r\n//                     }\r\n//                 });\r\n//             })\r\n//             .catch(error => {\r\n//                 toast.error(error.message);\r\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n//             })\r\n//     }\r\n// }\r\n\r\nexport function componentTest(selectedobject, Reg, specBasedComponent, Component,specBasedTestPackage,conditionalTestPackage) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const urlArray = []\r\n        Component = Component ? Component : []\r\n        const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n            nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n            slno: Component ? Object.keys(Component).length + 1 : 1,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: conditionalTestPackage,\r\n            nneedsubsample : selectedobject.nneedsubsample\r\n        });\r\n        urlArray[0] = TestGet;\r\n        const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n            nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n            slno: Component ? Object.keys(Component).length + 1 : 1,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: conditionalTestPackage\r\n        });\r\n        urlArray[1] = TestPackageGet;\r\n        Axios.all(urlArray).then(response => {\r\n                let PackageData = []\r\n                let TestData=[]\r\n               // if (specBasedTestPackage) {\r\n                    const PackageDataMap = constructOptionList(response[1].data.TestPackage || [], \"ntestpackagecode\",\r\n                        \"stestpackagename\", undefined, undefined, true);\r\n                    PackageData = PackageDataMap.get(\"OptionList\");\r\n                    \r\n                    // if (PackageData.length === 0) {\r\n                    //     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \r\n                    // } \r\n             //   }\r\n            //    else {\r\n                     TestData = response[0].data;\r\n              //  }\r\n                //let Test = [];\r\n                // Test[selectedobject.slno] = TestData;\r\n                const Map = {}\r\n                if (Reg) {\r\n                    Map[\"selectedRecord\"] = selectedobject\r\n                } else {\r\n                    Map[\"selectComponent\"] = selectedobject\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        TestCombined: TestData,AllTest:TestData, TestPackage: PackageData, ...Map, loading: false, selectedTestData: [],\r\n                        selectPackage:[]\r\n                        \r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\n// export function testPackageTest(selectedobject, Reg, specBasedComponent, Component,specBasedTestPackage,conditionalTestPackage,selectComponent,objComponent,LoginProps,selectPackage,subSampleBased,selectedSpec,nneedsubsample) {\r\nexport function testPackageTest(selectedobject, Reg, specBasedComponent, Component,selectComponent,objComponent,LoginProps,selectPackage,subSampleBased,selectedSpec,nneedsubsample) {\r\n\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            Component = Component ? Component : []\r\n            // rsapi.post(\"/registration/getTestBasesdTestPackage\", {\r\n            //     nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\r\n            //     slno:subSampleBased?Component ? Object.keys(Component).length + 1 : 1:selectComponent.slno,\r\n            //     specBasedComponent: specBasedComponent,\r\n            //     ntestpackagecode: selectPackage.ntestpackagecode.value,\r\n            //     nallottedspeccode:selectedSpec!==undefined?selectedSpec.value:selectedobject.nallottedspeccode\r\n    \r\n            // })\r\n            rsapi.post(\"/registration/getTestBasesdTestPackage\", {\r\n               // nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\r\n               nspecsampletypecode:selectComponent&&selectComponent.nspecsampletypecode?selectComponent.nspecsampletypecode:selectedobject.nspecsampletypecode,\r\n           //     slno: subSampleBased ? Component ? Object.keys(Component).length + 1 : 1 : selectComponent.slno,\r\n                specBasedComponent: specBasedComponent,\r\n                ntestpackagecode: selectPackage.ntestpackagecode.value,\r\n                nallottedspeccode:selectedSpec&&selectedSpec.value!==undefined?selectedSpec.value:selectedobject.nallottedspeccode\r\n    \r\n            })\r\n            .then(response => {\r\n                const Map = {}\r\n                let TestData = response.data;\r\n                let Test = LoginProps.Test || [];\r\n                let componentTest = [];\r\n                if (subSampleBased) {\r\n                    componentTest = Test[Component ? Object.keys(Component).length + 1 : 1] ? Test[Component ? Object.keys(Component).length + 1 : 1] : [];\r\n\r\n                } else {\r\n                     componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n\r\n                }\r\n                const availableTest = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n                const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n\r\n                delete selectedobject.ntestgrouptestcode;\r\n                if (Reg) {\r\n                    Map[\"selectedRecord\"] = selectedobject\r\n                } else {\r\n                    Map[\"selectPackage\"] = selectPackage\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        availableTest,TestCombined, ...Map, loading: false, selectedTestData: []\r\n                        //, selectPackage: []\r\n                     // TestCombined,loadTest: true, openChildModal: false,\r\n                     // ChildscreenName: \"Test\",\r\n                    //  screenName: \"Test\",\r\n                    // operation: \"create\",\r\n                    //  childoperation: \"create\",\r\n                   //   parentPopUpSize: \"lg\", loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function addSubSampleSaveContinue(Map1, Map,\r\n    specBasedComponent, Component, selectedTestData, lstComponent) {\r\n\r\n    //  const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\r\n    //     selectComponent, childColumnList, SubSamplewithoutCombocomponent)\r\n    return (dispatch) => {\r\n        if (!specBasedComponent) {\r\n            rsapi.post(\"/registration/getTestfromDB\", {\r\n                nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                nspecsampletypecode: Map[\"nspecsampletypecode\"],\r\n                slno: Map1.Component ? Object.keys(Map1.Component).length + 1 : 1,\r\n                specBasedComponent: specBasedComponent, nneedsubsample:Map[\"nneedsubsample\"]\r\n            }).then(response => {\r\n                let TestCombined = response.data\r\n               // let selectedTestPackageData = selectedTestPackageData && selectedTestPackageData.length > 0 ? selectedTestData : []\r\n\r\n                let selectedTestPackageData = selectedTestData && selectedTestData.length > 0 ? selectedTestData : []\r\n\r\n                const selectedTestPackageData1 = TestCombined.filter(function (x) {\r\n                    return selectedTestPackageData.some(function (y) {\r\n                        return x[\"ntestpackagetestcode\"] === y.value\r\n                    })\r\n                });\r\n                selectedTestData = selectedTestData && selectedTestData.length > 0 ? selectedTestPackageData : []\r\n\r\n                const selectedTestData1 = TestCombined.filter(function (x) {\r\n                    return selectedTestData.some(function (y) {\r\n                        return x[\"ntestgrouptestcode\"] === y.value\r\n                    })\r\n                });\r\n                // const selectedTestData2 = []\r\n                // TestCombined.map(x=>{\r\n                //     selectedTestData1.map(y=>{\r\n                //         if(x[\"ntestgrouptestcode\"] !== y[\"ntestgrouptestcode\"]){\r\n                //             selectedTestData2.push(x)\r\n                //         } \r\n                //     })\r\n                // });\r\n\r\n\r\n                //  let filterArray = filterRecordBasedOnTwoArrays(selectedTestData1, TestCombined, \"ntestgrouptestcode\")\r\n                // const filterArray = [...selectedTestData1, ...TestCombined]\r\n\r\n                selectedTestData = constructOptionList(selectedTestData1, \"ntestgrouptestcode\", \"stestsynonym\")\r\n                selectedTestData[\"ntestgrouptestcode\"] = selectedTestData.get(\"OptionList\")\r\n                selectedTestPackageData = constructOptionList(selectedTestPackageData1, \"ntestpackagetestcode\", \"stestpackagename\")\r\n                selectedTestPackageData[\"ntestpackagetestcode\"] = selectedTestPackageData.get(\"OptionList\")\r\n\r\n                Map1.selectComponent = {};\r\n               // Map1.selectComponent[\"ncomponentcode\"] = {};\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ...Map1,\r\n                        loading: false,\r\n                        TestCombined,\r\n                        //selectedTestData,\r\n                        //selectedTestPackageData,\r\n                        selectedTestData: [],\r\n                        selectedTestPackageData:[],\r\n                        masterStatus:intl.formatMessage({ id: \"IDS_SAVESUCCESSFULLY\" })\r\n                    }\r\n                });\r\n            })\r\n        }\r\n        else {\r\n            // lstComponent = lstComponent.filter(x => x.item.nspecsampletypecode !== Map1.selectComponent[\"nspecsampletypecode\"])\r\n            Map1.selectComponent = {};\r\n            Map1.selectComponent[\"ncomponentcode\"] = {};\r\n            // Map1.selectComponent[\"ncomponentcode\"] = {};\r\n            // Map1.selectComponent[\"Sample Name\"] = \"\";\r\n           \r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    ...Map1,\r\n                    loading: false,\r\n                    TestCombined: [],\r\n                    selectedTestData: [],\r\n                    selectedTestPackageData:[],\r\n                    lstComponent,\r\n                    masterStatus:intl.formatMessage({ id: \"IDS_SAVESUCCESSFULLY\" })\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport function editSubSample(Map,\r\n    component, userInfo, specBasedComponent,\r\n    SubSamplecomboData, selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = []\r\n        let Componnet = {}\r\n        if (specBasedComponent) {\r\n            Componnet = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                ...Map\r\n            });\r\n        }\r\n        urlArray = [Componnet]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let comp = []\r\n                if (specBasedComponent) {\r\n                    comp = response[0].data.lstComponent\r\n                }\r\n                const lstComponentMap = constructOptionList(comp || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                if (Map.nregsubtypecode === 6) {\r\n                    let portalOrder = component['Container Type'] || {}\r\n                    let containerType = SubSamplecomboData['ContainerType'] || []\r\n                    let containerList = []\r\n                    const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\r\n                    containerType.map(x => {\r\n                        if (x.item.jsondata.nportalordercode === nportalordercode) {\r\n                            containerList.push(x)\r\n                        }\r\n                    })\r\n\r\n                    SubSamplecomboData['Container Type'] = containerList\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadSubSample: true, childoperation: \"update\",\r\n                        ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                        openChildModal: false, selectComponent: component,\r\n                        parentPopUpSize: \"lg\", loading: false, lstComponent, SubSamplecomboData\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function insertRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/createRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data.rtn === \"Success\") {\r\n                    let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\r\n                    let selectedSample = response.data[\"selectedSample\"];\r\n                    let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    let selectedSubSample = RegistrationGetSubSample;\r\n                    RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                    let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                    if (inputParam.inputData.nneedsubsample) {\r\n                        RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                        selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                        RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                        selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                    }\r\n                    // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                    if (inputParam.multipleselectionFlag) {\r\n                        selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                        RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                        RegistrationGetTest = masterData.RegistrationGetTest;\r\n                    }\r\n\r\n\r\n                    masterData = {\r\n                        ...masterData, ...response.data,\r\n                        selectedSample, selectedSubSample, selectedTest,\r\n                        RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        ...inputParam.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        selectedRecord: undefined,\r\n                        loading: false,\r\n                        loadPreregister: false,\r\n                        showSample: undefined,\r\n                        openPortal: false,\r\n                        selectedSpec: {},\r\n                        selectComponent: {},\r\n                        SelectedTest: {},\r\n                        selectedComponent: {},\r\n                        Component: [],\r\n                        selectedRecord: {},\r\n                        SelectedTest: [],\r\n                        Test: [],\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList: []\r\n                    }\r\n                    inputParam.postParamList[0]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[1]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                } else {\r\n                    toast.info(response.data.rtn);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function insertRegistrationScheduler(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/schedulerinsertRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                // if (response.data.rtn === \"Success\") {\r\n                //     let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\r\n                //     let selectedSample = response.data[\"selectedSample\"];\r\n                //     let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                //     let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                //     let selectedSubSample = RegistrationGetSubSample;\r\n                //     RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                //     let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                //     if (inputParam.inputData.nneedsubsample) {\r\n                //         RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                //         selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                //         RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                //         selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                //     }\r\n                //     // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                //     if (inputParam.multipleselectionFlag) {\r\n                //         selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                //         updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                //         updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                //         RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                //         RegistrationGetTest = masterDat..a.RegistrationGetTest;\r\n                //     }\r\n\r\n\r\n                //     masterData = {\r\n                //         ...masterData, ...response.data,\r\n                //         selectedSample, selectedSubSample, selectedTest,\r\n                //         RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\r\n                //     }\r\n                let respObject = {\r\n                    masterData: { ...masterData, SchedulerTransaction: response[\"data\"].SchedulerTransaction },\r\n                    ...inputParam.inputData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    showConfirmAlert: false,\r\n                    selectedRecord: undefined,\r\n                    loading: false,\r\n                    loadPreregister: false,\r\n                    showSample: undefined,\r\n                    openPortal: false,\r\n                    selectedSpec: {},\r\n                    selectComponent: {},\r\n                    SelectedTest: {},\r\n                    selectedComponent: {},\r\n                    Component: [],\r\n                    selectedRecord: {},\r\n                    SelectedTest: [],\r\n                    Test: [],\r\n                    selectedComponent: {},\r\n                    subSampleDataGridList: []\r\n                }\r\n                // inputParam.postParamList[0]['clearFilter'] = 'yes'\r\n                // dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                dispatch({ type: DEFAULT_RETURN, payload: { ...respObject } })\r\n                // } else {\r\n                //     toast.info(response.data.rtn);\r\n                //     dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n                // }\r\n\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegistrationSample(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData })\r\n            .then(response => {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    ...response.data\r\n                }\r\n                if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                    inputData.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                let respObject = {};\r\n                if (inputData.selectedFilter) {\r\n                    respObject = { selectedFilter: { ...inputData.selectedFilter } };\r\n                }\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        testskip: 0,\r\n                        take: undefined,\r\n                        testtake: undefined,\r\n                        subsampleskip: 0,\r\n                        subsampletake: undefined,\r\n                        showSample: undefined,\r\n                        ...respObject,\r\n                        activeSampleTab: inputData.inputData.activeSampleTab\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegistrationsubSampleDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntransactionstatus: inputData.ntransactionstatus,\r\n            napprovalconfigcode: inputData.napprovalconfigcode,\r\n            activeTestTab: inputData.activeTestTab,\r\n            activeSampleTab: inputData.activeTestTab,\r\n            activeSubSampleTab: inputData.activeTestTab,\r\n            userinfo: inputData.userinfo,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            nneedsubsample: inputData.nneedsubsample,\r\n            //ntype: inputData.checkBoxOperation === 7 ? 2 : undefined,\r\n            ntype: inputData.checkBoxOperation === 7 ? 4 : undefined, //ALPD-497\r\n            checkBoxOperation: inputData.nneedsubsample === true ?\r\n                inputData.checkBoxOperation === 5 ? 3 : inputData.checkBoxOperation : inputData.checkBoxOperation\r\n        }\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        const subSample = inputData.nneedsubsample\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(\"registration/getRegistrationSubSample\", inputParamData)\r\n                .then(response => {\r\n                    sortData(response.data, \"descending\", \"npreregno\");\r\n                    sortData(response.data['RegistrationAttachment']);\r\n                    sortData(response.data['RegistrationComment']);\r\n                    let masterData = {}\r\n                    let skipInfo = {}\r\n                    let oldSelectedTest = inputData.masterData.selectedTest || []\r\n                    if (subSample) {\r\n                        let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n                        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                            inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\",\r\n                            inputData.removeElementFromArray);\r\n                        masterData = {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample,\r\n                            selectedPreregno: inputData.npreregno,\r\n                            selectedSubSample: inputData.masterData.RegistrationGetSubSample.length > 0 ?\r\n                                [inputData.masterData.RegistrationGetSubSample[0]] : [],\r\n                        }\r\n                        let RegistrationTestComment = [];\r\n                        let RegistrationTestAttachment = [];\r\n                        let RegistrationParameter = [];\r\n                        let RegistrationComment = [];\r\n                        //if (inputData.checkBoxOperation === 1 || inputData.checkBoxOperation === 7) {  \r\n                        if (inputData.checkBoxOperation === 1) {\r\n\r\n                            const wholeSubSampleList = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                            oldSelectedSubSample.forEach((subsample, index) => {\r\n                                if (!wholeSubSampleList.includes(subsample.ntransactionsamplecode)) {\r\n                                    oldSelectedSubSample.splice(index, 1)\r\n                                }\r\n\r\n                            })\r\n                            if (oldSelectedSubSample.length > 0) {\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedSubSample: oldSelectedSubSample\r\n                                }\r\n                            }\r\n                            const selectedTest = getSameRecordFromTwoArrays(oldSelectedTest,\r\n                                masterData.selectedSubSample, 'npreregno')\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest\r\n                            }\r\n                        }\r\n                        if (inputData.checkBoxOperation === 7) {\r\n                            // masterData = {\r\n                            //     ...masterData,\r\n                            //     APSelectedTest:responseData.APSelectedTest,\r\n                            //     AP_TEST:responseData.AP_TEST,\r\n                            //     ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\r\n                            // }\r\n\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                    let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                            masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                            masterData[\"RegistrationComment\"] = RegistrationComment;\r\n                        }\r\n                        if (inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 5) {\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest: masterData.RegistrationGetTest.length > 0 ? [masterData.RegistrationGetTest[0]] : []\r\n                            }\r\n\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                    let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = response.data.RegistrationComment ?\r\n                                        [...response.data.RegistrationComment] : [];\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                            masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                            masterData[\"RegistrationComment\"] = RegistrationComment;\r\n\r\n                        }\r\n\r\n\r\n                        let { testskip, testtake, subsampleskip, subsampletake } = inputData\r\n                        let bool = false;\r\n\r\n                        if (inputData.masterData.RegistrationGetSubSample.length < inputData.subsampleskip) {\r\n                            testskip = 0;\r\n                            subsampleskip = 0;\r\n                            bool = true\r\n                        }\r\n                        if (bool) {\r\n                            skipInfo = { testskip, testtake, subsampleskip, subsampletake }\r\n                        }\r\n                    } else {\r\n\r\n                        //let oldSelectedTest = inputData.masterData.selectedTest\r\n                        //  let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n                        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                            inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\",\r\n                            inputData.removeElementFromArray);\r\n                        masterData = {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample,\r\n                            selectedPreregno: inputData.npreregno,\r\n                            selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                            selectedSubSample: inputData.masterData.RegistrationGetSubSample,\r\n                        }\r\n                        let RegistrationTestComment = [];\r\n                        let RegistrationParameter = [];\r\n                        let RegistrationTestAttachment = [];\r\n                        let RegistrationComment = [];\r\n\r\n                        if (inputData.checkBoxOperation === 7 || inputData.checkBoxOperation === 1) {\r\n                            const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                            oldSelectedTest.forEach((test, index) => {\r\n                                if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                    oldSelectedTest.splice(index, 1)\r\n                                }\r\n\r\n                            })\r\n\r\n                            let keepOld = false;\r\n                            let ntransactiontestcode;\r\n                            let npreregno;\r\n                            if (oldSelectedTest.length > 0) {\r\n                                keepOld = true\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedTest: oldSelectedTest,\r\n                                }\r\n                            } else {\r\n                                ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                    inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\"\r\n                                npreregno = inputData.masterData.RegistrationGetSample.length > 0 ?\r\n                                    inputData.masterData.RegistrationGetSample[0].npreregno : \"\"\r\n                            }\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                        inputData.masterData.RegistrationParameter : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ?\r\n                                            inputData.masterData.RegistrationTestAttachment : [] :\r\n                                            getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                                        inputData.masterData.RegistrationTestComment : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = keepOld ? inputData.masterData.RegistrationComment ?\r\n                                        inputData.masterData.RegistrationComment : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment, npreregno, \"npreregno\")\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                        inputData.masterData.RegistrationParameter : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                        }\r\n                        else if (inputData.checkBoxOperation === 5) {\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                    let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = response.data.RegistrationComment ?\r\n                                        [...response.data.RegistrationComment] : [];\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                        }\r\n                        else {\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    RegistrationTestComment = response.data.RegistrationTestComment ?\r\n                                        [...response.data.RegistrationTestComment] : [];\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        RegistrationTestAttachment = response.data.RegistrationTestAttachment ?\r\n                                            [...response.data.RegistrationTestAttachment] : [];\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    RegistrationParameter = response.data.RegistrationParameter ?\r\n                                        [...response.data.RegistrationParameter] : [];\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = response.data.RegistrationComment ?\r\n                                        [...response.data.RegistrationComment] : [];\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    RegistrationParameter = response.data.RegistrationParameter ?\r\n                                        [...response.data.RegistrationParameter] : [];\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                        }\r\n                        masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                        masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                        masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                        masterData['RegistrationComment'] = RegistrationComment;\r\n\r\n                        let { testskip, testtake } = inputData\r\n                        let bool = false;\r\n\r\n                        if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\r\n                            testskip = 0;\r\n                            bool = true\r\n                        }\r\n                        if (bool) {\r\n                            skipInfo = { testskip, testtake }\r\n                        }\r\n\r\n                    }\r\n                    if (inputData.masterData.selectedSample && inputData.sampleGridDataState\r\n                        && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                    if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                        inputData.searchSubSampleRef.current.value = \"\"\r\n                        masterData['searchedSubSample'] = undefined\r\n                    }\r\n                   // let inputParam = { attachmentskip: undefined }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeSampleTab: inputData.activeSampleTab,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            skip: undefined,\r\n                            take: undefined,\r\n                            ...skipInfo,\r\n                           // inputParam:inputData\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n\r\n            let bool = false;\r\n            let skipInfo = {};\r\n            let { testskip, testtake, subsampletake, subsampleskip } = inputData;\r\n            let oldSelectedTest = inputData.masterData.selectedTest\r\n            let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n            // let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            let isGrandChildGetRequired = false;\r\n            let TestSelected = [];\r\n            let subSampleSelected = [];\r\n\r\n\r\n            if (inputData[\"statusNone\"]) {\r\n                TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n            else {\r\n                TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let selectedSample = inputData.selectedSample;\r\n                let filterTestSameOldSelectedTest = getSameRecordFromTwoArrays(oldSelectedTest, inputData.masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                let selectedTest = filterTestSameOldSelectedTest.length > 0 ? filterTestSameOldSelectedTest :\r\n                    inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [];\r\n                let ntransactiontestcode = selectedTest.length > 0 ? selectedTest.map(x => x.ntransactiontestcode).join(\",\") : \"-1\";\r\n                let selectedSubSample = inputData.masterData.RegistrationGetSubSample\r\n\r\n                if (subSample) {\r\n                    let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                    selectedSubSample = filterSelectedSubSample.length > 0 ? filterSelectedSubSample : [inputData.masterData.RegistrationGetSubSample[0]];\r\n                    if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampletake, subsampleskip }\r\n                    }\r\n\r\n                }\r\n                let masterData = { ...inputData.masterData, selectedSample, selectedSubSample, selectedTest }\r\n                if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = { ...skipInfo, testskip, testtake }\r\n                }\r\n                inputData = {\r\n                    ...inputData, childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\r\n                    selectedSubSample, checkBoxOperation: 3, skipInfo, masterData\r\n                }\r\n                if (subSample) {\r\n                    if (selectedTest.length === 0) {\r\n                        inputData[\"npreregno\"] = selectedSubSample.map(x => x.npreregno).join(\",\")\r\n                        inputData[\"ntransactionsamplecode\"] = selectedSubSample.map(x => x.ntransactionsamplecode).join(\",\")\r\n                        inputData[\"checkBoxOperation\"] = 3\r\n                        inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"]\r\n                        dispatch(getRegistrationTestDetail(inputData, true));\r\n                    } else {\r\n                        dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n                    }\r\n                } else {\r\n                    dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n                }\r\n            } else {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    selectedSample: inputData.selectedSample,\r\n                    selectedPreregno: inputData.npreregno,\r\n                    selectedTest: TestSelected ? TestSelected : inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                    // RegistrationTestComment,\r\n                    selectedSubSample: subSampleSelected ? subSampleSelected : inputData.masterData.RegistrationGetSubSample\r\n                }\r\n                let subsamplecheck = true;\r\n                if (subSample) {\r\n                    let SubSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                    if (SubSampleSelected.length > 0) {\r\n                        let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                        if (filterSelectedSubSample.length === 0) {\r\n                            let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                            oldSelectedSubSample.forEach((test, index) => {\r\n                                if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                                    oldSelectedSubSample.splice(index, 1)\r\n                                }\r\n                                return null;\r\n                            })\r\n                            if (oldSelectedSubSample.length === 0 && wholeSubSample.length > 0\r\n                                && masterData.selectedTest.length === 0) {\r\n                                const selectedSubSample1 = [inputData.masterData.RegistrationGetSubSample[0]];\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedSubSample: selectedSubSample1,\r\n                                    selectedTest: []\r\n                                }\r\n                                inputData = { ...inputData, ...masterData }\r\n                                inputData[\"npreregno\"] = selectedSubSample1.map(x => x.npreregno).join(\",\")\r\n                                inputData[\"ntransactionsamplecode\"] = selectedSubSample1.map(x => x.ntransactionsamplecode).join(\",\")\r\n                                inputData[\"checkBoxOperation\"] = 3\r\n                                inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"]\r\n                                subsamplecheck = false;\r\n                                dispatch(getRegistrationTestDetail(inputData, true));\r\n\r\n                            }\r\n                        } else {\r\n                            oldSelectedSubSample = filterSelectedSubSample\r\n                        }\r\n\r\n                    } else {\r\n                        let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                        oldSelectedSubSample.forEach((test, index) => {\r\n                            if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                                oldSelectedSubSample.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                    }\r\n\r\n                    if (subsamplecheck) {\r\n                        masterData = {\r\n                            ...masterData,\r\n                            selectedSubSample: oldSelectedSubSample\r\n                        }\r\n                    }\r\n                    if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampleskip, subsampletake }\r\n                    }\r\n                }\r\n                let wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                oldSelectedTest.forEach((test, index) => {\r\n                    if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        oldSelectedTest.splice(index, 1)\r\n                    }\r\n                    return null;\r\n                })\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedTest: oldSelectedTest\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\"\r\n                }\r\n                masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                let skipInfo = {};\r\n                if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = { ...skipInfo, testskip, testtake }\r\n                }\r\n\r\n                let dataStateArray = [\r\n                    { activeName: 'selectedSample', dataStateName: 'sampleGridDataState' },\r\n                    { activeName: 'RegistrationSourceCountry', dataStateName: 'sourceDataState' },\r\n                    { activeName: 'RegistrationTestComment', dataStateName: 'testCommentDataState' },\r\n                    { activeName: 'RegistrationParameter', dataStateName: 'resultDataState' },\r\n                ]\r\n                dataStateArray.map(arr => {\r\n                    if (inputData[arr.dataStateName] && masterData[arr.activeName] &&\r\n                        masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    return null;\r\n                });\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestTab: inputData.activeTestTab,\r\n                        ...skipInfo\r\n                    }\r\n                })\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function getRegistrationTestDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n            ntransactionstatus: inputData.ntransactionstatus,\r\n            napprovalconfigcode: inputData.napprovalconfigcode,\r\n            activeTestTab: inputData.activeTestTab,\r\n            activeSampleTab: inputData.activeSampleTab,\r\n            activeSubSampleTab: inputData.activeSubSampleTab,\r\n            userinfo: inputData.userinfo,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            checkBoxOperation: inputData.checkBoxOperation,\r\n            nneedsubsample: inputData.nneedsubsample\r\n\r\n        }\r\n        const subSample = inputData.nneedsubsample;\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(\"registration/getRegistrationTest\", inputParamData)\r\n                .then(response => {\r\n                    sortData(response.data);\r\n                    let oldSelectedTest = inputData.masterData.selectedTest || []\r\n                    let oldSelectedSubSample = inputData.masterData.selectedSubSample || []\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                        inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\",\r\n                        inputData.removeElementFromArray);\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        selectedSubSample: inputData.selectedSubSample,\r\n                        selectedTransactionsamplecode: inputData.ntransactionsamplecode,\r\n                        selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                            [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                        // RegistrationTestComment,\r\n                    }\r\n                    //let wholeRegistrationTestComments = [];\r\n                    let RegistrationTestComment = [];\r\n                    let RegistrationTestAttachment = [];\r\n                    let RegistrationParameter = [];\r\n                    let RegistrationSampleComment = [];\r\n                    let RegistrationSampleAttachment = [];\r\n                    if (inputData.checkBoxOperation === 1) {\r\n                        const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                        oldSelectedTest.forEach((test, index) => {\r\n                            if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                oldSelectedTest.splice(index, 1)\r\n                            }\r\n\r\n                        })\r\n\r\n                        let keepOld = false;\r\n                        let ntransactiontestcode;\r\n                        if (oldSelectedTest.length > 0) {\r\n                            keepOld = true\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest: oldSelectedTest,\r\n                            }\r\n                        } else {\r\n                            ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\"\r\n                        }\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                    inputData.masterData.RegistrationParameter : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                                    inputData.masterData.RegistrationTestComment : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ?\r\n                                    inputData.masterData.RegistrationTestAttachment : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                    inputData.masterData.RegistrationParameter : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n\r\n\r\n\r\n                    }\r\n                    else if (inputData.checkBoxOperation === 5) {\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment1 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                }\r\n                                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                {\r\n                                    let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                    let RegistrationTestAttachment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                        RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestAttachment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                }\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment2 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                }\r\n                                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                        // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                    }\r\n                    else if (inputData.checkBoxOperation === 7) {\r\n                        let testList = reArrangeArrays(inputData.masterData.RegistrationGetSubSample, response.data.RegistrationGetTest, \"ntransactionsamplecode\");\r\n                        masterData = {\r\n                            ...masterData,\r\n                            selectedTest: testList ? testList.length > 0 ? [testList[0]] : [] : [],\r\n                            RegistrationGetTest: testList ? testList.length > 0 ? testList : [] : [],\r\n                            //ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\r\n                        }\r\n\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment1 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                }\r\n                                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                {\r\n                                    let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                    let RegistrationTestAttachment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                        RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestAttachment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                }\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                // let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                let RegistrationParameter1 = [...resultResponseData];\r\n                                let ntransactiontestcode1 = testList ? testList.length > 0 ? testList[0].ntransactiontestcode : inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1 : -1\r\n\r\n                                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment2 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                }\r\n                                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                        // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                    }\r\n                    else {\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = response.data.RegistrationTestComment ?\r\n                                    [...response.data.RegistrationTestComment] : [];\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = response.data.RegistrationTestAttachment ?\r\n                                    [...response.data.RegistrationTestAttachment] : [];\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                RegistrationParameter = response.data.RegistrationParameter ?\r\n                                    [...response.data.RegistrationParameter] : [];\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationParameter = response.data.RegistrationParameter ?\r\n                                    [...response.data.RegistrationParameter] : [];\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    if (subSample) {\r\n                        let wholeSubsampleList = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                        oldSelectedSubSample.map((test, index) => {\r\n                            if (!wholeSubsampleList.includes(test.ntransactionsamplecode)) {\r\n                                oldSelectedSubSample.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                        let keepOld = false;\r\n                        let ntransactionsamplecode;\r\n                        if (oldSelectedSubSample.length > 0) {\r\n                            keepOld = true\r\n                        } else {\r\n                            ntransactionsamplecode = masterData.selectedSubSample[0].ntransactionsamplecode\r\n                        }\r\n\r\n                        switch (inputData.activeSubSampleTab) {\r\n                            case \"IDS_SUBSAMPLECOMMENTS\":\r\n                                RegistrationSampleComment = keepOld ? inputData.masterData.RegistrationSampleComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleComment\"\r\n                                dataStateName = \"subSampleCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationSampleAttachment = keepOld ? inputData.masterData.RegistrationSampleAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleAttachment\"\r\n                                dataStateName = \"subSampleAttachmentDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                    masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                    masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                    masterData[\"RegistrationSampleComment\"] = RegistrationSampleComment;\r\n                    masterData[\"RegistrationSampleAttachment\"] = RegistrationSampleAttachment;\r\n                    let { testskip, testtake } = inputData\r\n                    let bool = false;\r\n                    let skipInfo = {}\r\n                    if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\r\n                        testskip = 0;\r\n                        bool = true\r\n                    }\r\n\r\n                    if (bool) {\r\n                        skipInfo = { testskip, testtake }\r\n                    }\r\n                    if (inputData.masterData.selectedSample && inputData.sampleGridDataState\r\n                        && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                  //  let inputParam = { attachmentskip: undefined }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeTabIndex: inputData.activeTabIndex,\r\n                            activeSampleTab: inputData.activeSampleTab,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            skip: undefined,\r\n                            take: undefined,\r\n                            ...skipInfo,\r\n                          //  inputParam\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            let oldSelectedTest = inputData.masterData.selectedTest\r\n            let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            let isGrandChildGetRequired = false;\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = true;\r\n            } else {\r\n                isGrandChildGetRequired = false;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSubSample, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode.toString() : \"-1\";\r\n                let selectedSubSample = inputData.selectedSubSample;\r\n                // let selectedPreregno = inputData.npreregno;\r\n                let selectedTest = inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [];\r\n                // let selectedSubSample = inputData.masterData.RegistrationGetSubSample\r\n                let masterData = { ...inputData.masterData, selectedSubSample, selectedTest }\r\n                inputData = {\r\n                    ...inputData, childTabsKey: [\"RegistrationTestAttachment\", \"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\r\n                    selectedSubSample, checkBoxOperation: 3\r\n                }\r\n                dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n            } else {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    selectedSubSample: inputData.selectedSubSample,\r\n                    selectedTransactioncode: inputData.ntransactionsamplecode,\r\n                    selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                        [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                }\r\n\r\n                const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                oldSelectedTest.forEach((test, index) => {\r\n                    if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        oldSelectedTest.splice(index, 1)\r\n                    }\r\n                    return null;\r\n                })\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedTest: oldSelectedTest,\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                        inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\"\r\n                }\r\n                masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                    inputData.masterData.RegistrationTestComment : [] :\r\n                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                    inputData.masterData.RegistrationParameter : [] :\r\n                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                let skipInfo = {};\r\n                let dataStateArray = [\r\n                    { activeName: 'selectedSample', dataStateName: 'sampleGridDataState' },\r\n                    { activeName: 'RegistrationSourceCountry', dataStateName: 'sourceDataState' },\r\n                    { activeName: 'RegistrationTestComment', dataStateName: 'testCommentDataState' },\r\n                    { activeName: 'RegistrationParameter', dataStateName: 'resultDataState' },\r\n                ]\r\n                dataStateArray.map(arr => {\r\n                    if (inputData[arr.dataStateName] && masterData[arr.activeName] &&\r\n                        masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    return null;\r\n                });\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestTab: inputData.activeTestTab,\r\n                        activeTabIndex: inputData.activeTabIndex,\r\n                        ...skipInfo\r\n                    }\r\n                })\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function acceptRegistration(inputParam, LoginProps) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/acceptRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data.rtn === undefined || response.data.rtn === \"Success\"\r\n                    || response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"\r\n                    || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\" || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                    delete response.data[\"RegistrationGetSample\"];\r\n                    delete response.data[\"RegistrationGetSubSample\"];\r\n                    delete response.data[\"RegistrationGetTest\"];\r\n                    let masterData = {\r\n                        ...LoginProps, ...response.data,\r\n                        selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                        selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                        selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        ...inputParam.inputData,\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        openModal: false,\r\n                        showSample: undefined\r\n                    }\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                    if (response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"\r\n                        || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\" \r\n                        || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\r\n                        toast.info(intl.formatMessage({ id: response.data.rtn }));\r\n                    }\r\n                } else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            loadEsign: false,\r\n                            openModal: false\r\n                        }\r\n                    });\r\n                    toast.info(intl.formatMessage({ id: response.data.rtn }));\r\n                }\r\n            })\r\n            .catch(error => {\r\n               // toast.error(error.message);\r\n                dispatch({type: DEFAULT_RETURN, payload: {loading: false}});\r\n\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                   // toast.info(error.response.data[\"rtn\"] );\r\n                    toast.info(intl.formatMessage({ id: error.response.data[\"rtn\"]  }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport const addMoreTest = (inputParam, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        let { sampleList} = inputParam;\r\n        let value = false;\r\n        if (inputParam.selectedSample && inputParam.selectedSample.length > 0) {\r\n            if (inputParam.selectedSubSample && inputParam.selectedSubSample.length > 0) {\r\n                value = inputParam.selectedSubSample.some(obj => obj.nspecsampletypecode !== inputParam.selectedSubSample[0].nspecsampletypecode)\r\n                if (value) {\r\n                    return toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\" }));\r\n                }\r\n                sampleList = sampleList ? [...sampleList.slice(inputParam.skip, inputParam.take)] : [];\r\n                const selectedsample = getSameRecordFromTwoArrays(sampleList, inputParam.selectedSample, \"npreregno\");\r\n               // const selectsubsample = getSameRecordFromTwoArrays(subsampleList, inputParam.selectedsubsample, \"ntransactionsamplecode\");\r\n                if (selectedsample && selectedsample.length > 0) {\r\n                    const findTransactionStatus = [...new Set(selectedsample.map(item => item.ntransactionstatus))];\r\n\r\n                    if (findTransactionStatus.length === 1) {\r\n                        if (findTransactionStatus[0] !== transactionStatus.REJECT && findTransactionStatus[0] !== transactionStatus.CANCELLED) {\r\n                            if (findTransactionStatus[0] !== transactionStatus.RELEASED) {\r\n\r\n                               // if (selectsubsample && selectsubsample.length > 0) {\r\n                               //     const findSubSampleStatus = [...new Set(selectsubsample.map(item => item.ntransactionstatus))];\r\n                //\r\n                               //     if (findSubSampleStatus[0] !== transactionStatus.REJECT && findSubSampleStatus[0] !== transactionStatus.CANCELLED) \r\n                               //     {                    \r\n\r\n                                        const findApprovalVersion = [...new Set(selectedsample.map(item => item.napprovalversioncode))];\r\n                                        if (findApprovalVersion.length === 1) {\r\n                                            const findSampleSpec = [...new Set(selectedsample.map(item => item.nallottedspeccode))];\r\n                                            //const findComponent = [...new Set(selectsubsample.map(item => item.ncomponentcode))];\r\n                                            if (findSampleSpec.length === 1)//&& findComponent.length === 1 \r\n                                            {\r\n                                                inputParam[\"snspecsampletypecode\"] = inputParam.selectedSubSample &&\r\n                                                    [...new Set(inputParam.selectedSubSample.map(x => x.nspecsampletypecode))].join(\",\")\r\n                                                dispatch(initRequest(true));\r\n                                                const urlArray = []\r\n                                                const TestGet = rsapi.post(\"/registration/getMoreTest\", {\r\n                                                    ...inputParam\r\n                                                });\r\n                                                urlArray[0] = TestGet;\r\n                                                const TestPackageGet = rsapi.post(\"/registration/getMoreTestPackage\", {\r\n                                                    ...inputParam\r\n                                                });\r\n                                                urlArray[1] = TestPackageGet;\r\n\r\n                                                Axios.all(urlArray)\r\n                                                .then(response => {\r\n                                                    let PackageData = []\r\n                                                        const PackageDataMap = constructOptionList(response[1].data || [], \"ntestpackagecode\",\r\n                                                            \"stestpackagename\", undefined, undefined, true);\r\n                                                        PackageData = PackageDataMap.get(\"OptionList\");\r\n                                                        dispatch({\r\n                                                            type: DEFAULT_RETURN,\r\n                                                            payload: {\r\n                                                                availableTest: response[0].data,\r\n                                                                AllTest: response[0].data,\r\n                                                                TestPackage: PackageData,\r\n                                                                loadChildTest: true,\r\n                                                                loading: false, ncontrolCode,\r\n                                                                screenName: \"IDS_TEST\",\r\n                                                                operation: \"create\",\r\n                                                                openModal: true,\r\n                                                                parentPopUpSize: \"lg\",\r\n                                                                selectedRecord: {},\r\n                                                                showSample: undefined\r\n                                                            }\r\n                                                        });\r\n                                                    })\r\n                                                    .catch(error => {\r\n                                                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                                                        if (error.response.status === 500) {\r\n                                                            toast.error(error.message);\r\n                                                        } else {\r\n                                                            toast.info(this.props.formatMessage({ id: error.response.data }));\r\n                                                        }\r\n                                                    });\r\n                                            } else {\r\n                                                toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\" }));\r\n                                            }\r\n                                        } else {\r\n                                            toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMEAPPROVALCONFIG\" }));\r\n                                        }\r\n                                //     }\r\n                                //     else {\r\n                                //         toast.info(intl.formatMessage({ id: \"IDS_SUBSAMPLEISREJECTEDORCANCELLED\" }));\r\n                                //     }\r\n                                // }                               \r\n                            }\r\n                            else {\r\n                                toast.info(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORRELEASEDSAMPLES\" }));\r\n                            }\r\n                        }\r\n                        else {\r\n                            ////     toast.info(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORCANCELLEDREJECTSAMPLES\" }));\r\n                            toast.info(intl.formatMessage({ id: \"IDS_SAMPLEISREJECTEDORCANCELLED\" }));\r\n                        }\r\n                    } else {\r\n                        toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESTATUS\" }));\r\n                    }\r\n                } else {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_SELECTSAMPLE\" }));\r\n                }\r\n            } else {\r\n                toast.info(intl.formatMessage({ id: \"IDS_SELECTSUBSAMPLE\" }));\r\n            }\r\n        } else {\r\n            toast.info(intl.formatMessage({ id: \"IDS_SELECTSAMPLE\" }));\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport const createRegistrationTest = (inputParam, masterData, modalName) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData })\r\n            .then(response => {\r\n                let RegistrationGetTest = updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"], response.data[\"RegistrationGetTest\"]);\r\n                masterData = {\r\n                    ...masterData,\r\n                    RegistrationGetTest:sortData(RegistrationGetTest, \"descending\", \"ntransactiontestcode\"),\r\n                    selectedTest: response.data[\"RegistrationGetTest\"],\r\n                    RegistrationParameter: response.data.RegistrationParameter,\r\n                    // RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, masterData.RegistrationGetSample, 'npreregno')\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    [modalName]: false,\r\n                    loading: false,\r\n                    loadChildTest: false,\r\n                    showSample: undefined,\r\n                    openModal: false,\r\n                    selectedRecord: {}\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no';\r\n                inputParam.postParamList[1]['clearFilter'] = 'no';\r\n                inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n\r\n                // dispatch({\r\n                //     type: DEFAULT_RETURN,\r\n                //     payload: {\r\n                //         masterData,\r\n                //         [modalName]: false,\r\n                //         loading: false,\r\n                //         loadChildTest: false,\r\n                //         showSample: undefined,\r\n                //         openModal: false,\r\n                //         selectedRecord: {}\r\n                //     }\r\n                // });\r\n            })\r\n            .catch(error => {\r\n                \r\n                if (error.response.status === 500) {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    toast.error(error.message);\r\n                } else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                                                                [modalName]: false,\r\n                                                                loading: false,\r\n                                                                loadChildTest: false,\r\n                                                                showSample: undefined,\r\n                                                                openModal: false,\r\n                            selectedRecord: {}\r\n                        }\r\n                    });\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getEditRegistrationComboService(inputParam, columnList,\r\n    selectedRecord1, childColumnList, comboComponents,\r\n    withoutCombocomponent) {\r\n    return function (dispatch) {\r\n\r\n        dispatch(initRequest(true));\r\n        const { userInfo, operation } = { ...inputParam };\r\n        let masterData = inputParam[\"masterData\"];\r\n\r\n        if (masterData[\"selectedSample\"].length > 1 ||\r\n            masterData[\"selectedSample\"]\r\n                .findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"mastertoedit\"][inputParam.primaryKeyName])\r\n            === -1) {\r\n            inputParam.editRegParam[\"getSampleChildDetail\"] = true;\r\n        }\r\n        masterData[\"selectedSample\"] = [];\r\n        masterData[\"selectedSample\"].push(inputParam[\"mastertoedit\"]);\r\n\r\n        const npreregno = inputParam.mastertoedit[inputParam.primaryKeyName];\r\n        let urlArray = [];\r\n\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        // const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n        //     parentcolumnlist: columnList,\r\n        //     childcolumnlist: childColumnList,\r\n        //     userinfo: userInfo\r\n        // })\r\n        const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationDetails\", {\r\n            ...inputParam.editRegParam, npreregno, parentcolumnlist: columnList,\r\n            childcolumnlist: childColumnList,\r\n            userinfo: userInfo\r\n        })\r\n\r\n        const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n            datecolumnlist: withoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n            userinfo:userInfo\r\n        })\r\n\r\n        urlArray = [timeZoneService, selectedRegistration,dateService]\r\n\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = { ...response[1].data[\"EditData\"] };\r\n                selectedRecord = { ...selectedRecord, ...selectedRecord['jsondata'] }\r\n                // const recordToEdit = { ...response[2].data[\"SelectedRegistration\"][0] };\r\n                //  const currentTime = rearrangeDateFormat(userInfo, response[6].data);\r\n\r\n                \r\n\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userInfo.stimezoneid, value: userInfo.ntimezonecode }\r\n\r\n                \r\n                //  const newcomboData = parentChildComboLoad(columnList, response[1].data,\r\n                // selectedRecord, childColumnList, withoutCombocomponent)\r\n\r\n                if (selectedRecord.ntransactionstatus === transactionStatus.CANCELLED\r\n                    || selectedRecord.ntransactionstatus === transactionStatus.REJECT) {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_CANNOTEDITCANCELLEDSAMPLE\" }));\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                }\r\n                else {\r\n                    const languagetypeCode = undefined\r\n                    const comboData = response[1].data;\r\n                    delete comboData['EditData']\r\n                    let comboValues = {}\r\n                    if (columnList.length > 0) {\r\n                        columnList.map(x => {\r\n                            if (x.inputtype === 'combo') {\r\n                                if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \r\n                                {\r\n                                    if (comboData[x.label].length > 0) {\r\n                                        if (comboData[x.label][0].label === undefined) {\r\n                                            const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                            comboData[x.label] = optionList.get(\"OptionList\");\r\n                                        } else {\r\n                                            comboData[x.label] = comboData[x.label]\r\n                                            const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                        }\r\n                                    } else {\r\n                                        comboData[x.label] = []\r\n                                    }\r\n                                    //comboValues = childComboLoad(x, comboData, selectedRecord, \r\n                                    //   childColumnList, withoutCombocomponent)\\\r\n                                    comboValues = childComboLoadForEdit(x, comboData, selectedRecord,\r\n                                        childColumnList, withoutCombocomponent)\r\n                                } else {\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                comboValues = {\r\n                                    comboData: comboData,\r\n                                    ...comboValues\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        comboValues = {\r\n                            \"comboData\": comboData,\r\n                        }\r\n                    }\r\n\r\n                    withoutCombocomponent.map(date => {\r\n                        if (date.inputtype === 'date') {\r\n                            selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\r\n                                rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\"\r\n                                \r\n                                if(date.nperiodcode){\r\n                                    selectedRecord[date.label + \"value\"] = response[2].data[date.label] ?\r\n                                    new Date(response[2].data[date.label][\"datevalue\"]) : null;\r\n                                }else{\r\n                                    selectedRecord[date.label+ \"value\"] = new Date();\r\n                                }\r\n\r\n                                if (date.hidebeforedate) {\r\n                                    selectedRecord[date.label + \"min\"] =selectedRecord[date.label + \"value\"]\r\n                                }\r\n                                if (date.hideafterdate) {\r\n                                    selectedRecord[date.label + \"max\"] = selectedRecord[date.label + \"value\"]\r\n                                }\r\n                        }\r\n                    })\r\n\r\n                    let { Specification, AgaramTree, ActiveKey, FocusKey, OpenNodes } = [];\r\n                    const selectedSpec = {}\r\n                    Specification = constructOptionList(response[1].data[\"Specification\"] || [], \"nallottedspeccode\",\r\n                        \"sspecname\", undefined, undefined, true).get(\"OptionList\");\r\n                    AgaramTree = response[1].data[\"AgaramTree\"];\r\n                    ActiveKey = response[1].data[\"FocusKey\"];\r\n                    FocusKey = response[1].data[\"ActiveKey\"];\r\n                    OpenNodes = response[1].data[\"OpenNodes\"];\r\n                    //Manufacturer = response.data[\"Manufacturer\"];\r\n                    selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\r\n                        \"value\": Specification[0].value,\r\n                        \"label\": Specification[0].label,\r\n                        \"item\": Specification[0].item\r\n                    } : \"\";\r\n\r\n                    selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\"\r\n                    selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ?\r\n                        Specification[0].item.ntemplatemanipulationcode : -1\r\n                    selectedRecord = { ...selectedRecord, ...selectedSpec }\r\n\r\n                    if (inputParam.editRegParam[\"getSampleChildDetail\"] === true){\r\n                        masterData = sortData({...masterData, ...response[1].data[\"SampleChildDetail\"]})\r\n                     }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            AgaramTree,\r\n                            FocusKey,\r\n                            ActiveKey,\r\n                            OpenNodes,\r\n                            selectedSpec,\r\n                            Specification,\r\n                            // statustoEditDetail: response[2].data[\"ApprovalConfigRole\"] || {},\r\n                            // currentTime,\r\n                            operation: \"update\",\r\n                            screenName: inputParam.masterData.RealRegSubTypeValue.sregsubtypename,\r\n                            // PopUpLabel: popUpLabel,\r\n                            timeZoneList,\r\n                            defaultTimeZone,\r\n                            selectedRecord,\r\n                            openPortal: true,\r\n                            ncontrolCode: inputParam.editRegParam.ncontrolCode,\r\n                            loadPreregister: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            loading: false,\r\n                            showSample: undefined,\r\n                            comboData: comboValues.comboData,\r\n                            childColumnList, comboComponents,\r\n                            withoutCombocomponent,\r\n                            columnList,\r\n                            masterData\r\n                            //  regRecordToEdit:recordToEdit\r\n\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.info(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n\r\n    }\r\n}\r\n\r\nexport function updateRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/updateRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data.rtn === \"Success\") {\r\n                    // sortData(response.data);\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSample\"], masterData.RegistrationGetSample, \"npreregno\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                    //  let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    //let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedSample: response.data[\"selectedSample\"],\r\n                        // selectedSubSample: masterData[\"selectedSubSample\"],\r\n                        //selectedTest:masterData[\"selectedTest\"],\r\n                        // RegistrationGetTest,\r\n                        // RegistrationGetSubSample,\r\n                        RegistrationParameter: masterData[\"RegistrationParameter\"]\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData, openPortal: false, loading: false, showConfirmAlert: false,\r\n                            regDateEditConfirmMessage: undefined, loadEsign: false, openModal: false,\r\n                            loadPreregister: false, selectedRecord: {}, showSample: undefined\r\n                        }\r\n                    });\r\n                    // let inputData = {\r\n                    //     masterData,\r\n                    //     selectedTest: masterData.selectedTest,\r\n                    //     ntransactiontestcode: masterData.selectedTest ?\r\n                    //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\r\n                    //     npreregno: masterData.selectedSample ?\r\n                    //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\r\n                    //     userinfo: inputParam.inputData.userinfo,\r\n                    //     activeTestTab : masterData.activeTestTab,\r\n                    //     screenName: masterData.activeTestTab,\r\n                    //     resultDataState: inputParam.resultDataState,\r\n                    //     testCommentDataState: inputParam.testCommentDataState,\r\n                    // }\r\n                    // dispatch(getTestChildTabDetail(inputData, true))\r\n                } else {\r\n                    toast.info(response.data.rtn);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                }\r\n                else if (error.response.status === 302) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false, loadEsign: false,\r\n                            regEditParam: inputParam,\r\n                            showConfirmAlert: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            regDateEditConfirmMessage: error.response.data, showSample: undefined\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showSample: undefined } })\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function cancelTestAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelTest\", inputParam.inputData)\r\n            .then(response => {\r\n\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedTest: response.data[\"selectedTest\"],\r\n                    // RegistrationGetTest:response.data[\"RegistrationGetTest\"],\r\n                    RegistrationGetTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\"),\r\n                    //  RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, LoginProps.RegistrationGetSample, 'npreregno')\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    showConfirmAlert: false,\r\n                    selectedRecord: {},\r\n                    loading: false,\r\n                    loadPreregister: false,\r\n                    showSample: undefined\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no'\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function cancelSampleAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelSample\", inputParam.inputData)\r\n            .then(response => {\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function addsubSampleRegistration(masterData, userinfo, regcolumnList,\r\n    selectRecord, regchildColumnList,\r\n    regSubSamplecomboComponents,\r\n    regSubSamplewithoutCombocomponent, Map, ncontrolcode, specBasedComponent,specBasedTestPackage) {\r\n    return function (dispatch) {\r\n       //console.log(\"spec:\", specBasedComponent);\r\n        const urlArray = []\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        urlArray[0] = timeZoneService;\r\n        const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n            parentcolumnlist: regcolumnList,\r\n            childcolumnlist: regchildColumnList,\r\n            userinfo\r\n        })\r\n        urlArray[1] = actualService;\r\n\r\n        if (specBasedComponent) {\r\n            const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                ...Map,\r\n                specBasedComponent: specBasedComponent,\r\n                userinfo\r\n            })\r\n            urlArray[2] = ComponentTestBySpec;\r\n        } else {\r\n\r\n            const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n                nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                slno: 1,\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage: specBasedTestPackage,\r\n                conditionalTestPackage:true,\r\n                nneedsubsample:Map[\"nneedsubsample\"]\r\n\r\n            })\r\n            urlArray[2] = TestGet;\r\n            const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n                //  nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n                nallottedspeccode: Map[\"nallottedspeccode\"],\r\n              //  slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                  specBasedComponent: specBasedComponent,\r\n                  specBasedTestPackage: specBasedTestPackage,\r\n             //     conditionalTestPackage: conditionalTestPackage\r\n              });\r\n              urlArray[5] = TestPackageGet;\r\n            \r\n        }\r\n        const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n            userinfo\r\n        })\r\n\r\n        urlArray[3] = currentDate\r\n\r\n        const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n            datecolumnlist: regSubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n            userinfo\r\n        })\r\n        urlArray[4] = dateService\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n        .then(response => {\r\n            const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n            const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n            const defaultTimeZone = { label: userinfo.stimezoneid, value: userinfo.ntimezonecode }\r\n            const newcomboData = parentChildComboLoad(regcolumnList, response[1].data,\r\n                selectRecord, regchildColumnList, regSubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo)\r\n            let TestCombined = [];\r\n            let lstComponent = [];\r\n            let PackageData = [];\r\n            if (specBasedComponent) {\r\n                \r\n                const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n\r\n                lstComponent = lstComponentMap.get(\"OptionList\");\r\n\r\n            } else {\r\n                //if (specBasedTestPackage) {\r\n                    const PackageDataMap = constructOptionList(response[5].data.TestPackage || [], \"ntestpackagecode\",\r\n                        \"stestpackagename\", undefined, undefined, true);\r\n                    PackageData = PackageDataMap.get(\"OptionList\");\r\n                    \r\n                    // if (PackageData.length === 0) {\r\n                    //     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \r\n                    // } \r\n                // }\r\n                // else {\r\n                     TestCombined = response[2].data;\r\n                // }\r\n            }\r\n            const comboData1 = newcomboData.comboData\r\n            const selectedRecord1 = newcomboData.selectedRecord\r\n            regSubSamplewithoutCombocomponent.map(componentrow => {\r\n                if (componentrow.inputtype === \"date\") {\r\n                    if (componentrow.loadcurrentdate) {\r\n                        selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[3].data) : \"\";\r\n                        selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                    } else if (componentrow.nperiodcode) {\r\n                        selectedRecord1[componentrow.label + \"value\"] = response[4].data[componentrow.label] ?\r\n                            new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                        if (componentrow.loadselecteddate) {\r\n                            selectedRecord1[componentrow.label] = response[4].data[componentrow.label] ?\r\n                                new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                        }\r\n                        //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                        //    new Date(response[2].data[componentrow.label]):null;\r\n                    } else {\r\n                        selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                    }\r\n\r\n                    if (componentrow.hidebeforedate) {\r\n                        selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                    }\r\n                    if (componentrow.hideafterdate) {\r\n                        selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                    }\r\n\r\n                }\r\n                else if (componentrow.inputtype === \"radio\") {\r\n                    selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                        componentrow.radioOptions.tags[0].text : \"\";\r\n                }\r\n\r\n            })\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                    showSaveContinue: false,\r\n                    parentPopUpSize: \"lg\",\r\n                    loading: false,\r\n                    lstComponent,\r\n                    openModal: true,\r\n                    operation: \"create\",\r\n                    loadRegSubSample: true,\r\n                    selectedRecord: selectedRecord1,\r\n                    regSubSamplecomboData: comboData1,\r\n                    regSubSamplecomboComponents,\r\n                    regSubSamplewithoutCombocomponent,\r\n                    TestCombined,\r\n                    regparentSubSampleColumnList: regcolumnList,\r\n                    regchildSubSampleColumnList: regchildColumnList,\r\n                    ncontrolCode: ncontrolcode,\r\n                    timeZoneList,\r\n                    defaultTimeZone,\r\n                    masterData,\r\n                    specBasedComponent,\r\n                    specBasedTestPackage,\r\n                    TestPackage:PackageData\r\n                }\r\n            });\r\n        })\r\n        .catch(error => {\r\n            toast.error(error.message);\r\n            dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport function saveSubSample(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/createSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                // let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\r\n                // let selectedSample = response.data[\"selectedSample\"];\r\n                let RegistrationGetSubSample = updatedObjectWithNewElement(inputParam.inputData.masterData.RegistrationGetSubSample, response.data[\"selectedSubSample\"]);\r\n                let RegistrationGetTest = response.data[\"selectedTest\"];\r\n                let selectedSubSample = response.data[\"selectedSubSample\"];// RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n\r\n                let RegistrationParameter = response.data[\"RegistrationParameter\"]\r\n\r\n                RegistrationParameter = getSameRecordFromTwoArrays(RegistrationParameter, selectedTest, 'ntransactiontestcode')\r\n\r\n                let masterData = { ...inputParam.inputData.masterData }\r\n                masterData = {\r\n                    ...masterData, ...response.data,\r\n                    selectedSubSample, selectedTest,\r\n                    RegistrationGetSubSample, RegistrationGetTest, RegistrationParameter\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    loading: false,\r\n                    showSample: undefined,\r\n                    selectedRecord: {},\r\n                    loadRegSubSample: false\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no';\r\n                inputParam.postParamList[1]['clearFilter'] = 'yes';\r\n                inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                //    dispatch({\r\n                //     type: DEFAULT_RETURN,\r\n                //     payload: {\r\n                //         masterData,\r\n                //         openModal: false,\r\n                //         loadEsign: false,\r\n                //         loading: false,\r\n                //         showSample: undefined,\r\n                //         selectedRecord: {},\r\n                //         loadRegSubSample:false\r\n                //     }\r\n                // });\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function getEditSubSampleComboService(inputParam, columnList, selectedRecord1,\r\n    childColumnList, comboComponents,\r\n    withoutCombocomponent, specBasedComponent) {\r\n    return function (dispatch) {\r\n\r\n        let { userInfo, operation, masterData } = { ...inputParam };\r\n\r\n        if (masterData[\"selectedSubSample\"].length > 1 ||\r\n            masterData[\"selectedSubSample\"]\r\n                .findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"mastertoedit\"][inputParam.primaryKeyName])\r\n            === -1) {\r\n            inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"] = true;\r\n        }\r\n\r\n        masterData[\"selectedSubSample\"] = [];\r\n        masterData[\"selectedSubSample\"].push(inputParam[\"mastertoedit\"]);\r\n\r\n        inputParam.editSubSampleRegParam[\"npreregno\"] = inputParam[\"mastertoedit\"][\"npreregno\"];\r\n        inputParam.editSubSampleRegParam[\"checkBoxOperation\"] = 3;\r\n        inputParam.editSubSampleRegParam[\"nfilterstatus\"] = inputParam[\"mastertoedit\"][\"ntransactionstatus\"];\r\n        inputParam.editSubSampleRegParam[\"napprovalconfigcode\"] = inputParam[\"mastertoedit\"][\"napprovalconfigcode\"];\r\n        //inputParam.editSubSampleRegParam[\"withoutgetparameter\"] = 3;\r\n\r\n        const ntransactionsamplecode = inputParam.mastertoedit[inputParam.primaryKeyName];\r\n        if (ntransactionsamplecode === undefined) {\r\n            toast.info(intl.formattedMessage({ id: \"IDS_SELECTVALIDSUBSAMPLE\" }));\r\n        }\r\n        else {\r\n            let urlArray = [];\r\n\r\n            const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n            // const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n            //     parentcolumnlist: columnList,\r\n            //     childcolumnlist: childColumnList,\r\n            //     userinfo: userInfo\r\n            // })\r\n            const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationSubSampleDetails\", {\r\n                ...inputParam.editSubSampleRegParam, ntransactionsamplecode, parentcolumnlist: columnList,\r\n                childcolumnlist: childColumnList,\r\n                userinfo: userInfo\r\n            })\r\n\r\n            const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                datecolumnlist: withoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                userinfo:userInfo\r\n            })\r\n    \r\n\r\n            urlArray = [timeZoneService, selectedRegistration,dateService]\r\n            // if(specBasedComponent){\r\n            //     const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n            //         ...Map,\r\n            //         specBasedComponent: specBasedComponent\r\n            //     })\r\n            //     urlArray.push(ComponentTestBySpec) \r\n            // }\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    let selectedRecord = { ...response[1].data[\"EditData\"] };\r\n\r\n                    selectedRecord = { ...selectedRecord, ...selectedRecord['jsondata'] }\r\n\r\n                    const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                    const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                    const defaultTimeZone = { label: userInfo.stimezoneid, value: userInfo.ntimezonecode }\r\n\r\n                    // if (selectedRecord.ntransactionstatus !== transactionStatus.PREREGISTER) {\r\n                    //     toast.info(intl.formatMessage({ id: \"IDS_SELECTPREREGISTERSUBSAMPLETOEDIT\" }));\r\n                    //     dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                    // }\r\n\r\n                    //else {\r\n                    //               let lstComponent=[]\r\n                    if (specBasedComponent) {\r\n                        selectedRecord[\"ncomponentcode\"] = { label: selectedRecord[\"scomponentname\"], value: selectedRecord[\"ncomponentcode\"] }\r\n                    }\r\n                    const languagetypeCode = undefined\r\n                    const comboData = response[1].data;\r\n                    delete comboData['EditData']\r\n                    let comboValues = {}\r\n                    if (columnList.length > 0) {\r\n                        columnList.map(x => {\r\n                            if (x.inputtype === 'combo') {\r\n                                if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \r\n                                {\r\n                                    if (comboData[x.label].length > 0) {\r\n                                        if (comboData[x.label][0].label === undefined) {\r\n                                            const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                            comboData[x.label] = optionList.get(\"OptionList\");\r\n                                        } else {\r\n                                            comboData[x.label] = comboData[x.label]\r\n                                            const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                        }\r\n                                    } else {\r\n                                        comboData[x.label] = []\r\n                                    }\r\n                                    //comboValues = childComboLoad(x, comboData, selectedRecord, \r\n                                    //   childColumnList, withoutCombocomponent)\\\r\n                                    comboValues = childComboLoadForEdit(x, comboData, selectedRecord,\r\n                                        childColumnList, withoutCombocomponent)\r\n                                } else {\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                comboValues = {\r\n                                    comboData: comboData,\r\n                                    ...comboValues\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        comboValues = {\r\n                            \"comboData\": comboData,\r\n                        }\r\n                    }\r\n                    // withoutCombocomponent.map(date => {\r\n                    //     if (date.inputtype === 'date')\r\n                    //         selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\r\n                    //             rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\";\r\n                    // })\r\n\r\n                    withoutCombocomponent.map(date => {\r\n                        if (date.inputtype === 'date') {\r\n                            selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\r\n                                rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\"\r\n                                \r\n                                if(date.nperiodcode){\r\n                                    selectedRecord[date.label + \"value\"] = response[2].data[date.label] ?\r\n                                    new Date(response[2].data[date.label][\"datevalue\"]) : null;\r\n                                }else{\r\n                                    selectedRecord[date.label+ \"value\"] = new Date();\r\n                                }\r\n\r\n                                if (date.hidebeforedate) {\r\n                                    selectedRecord[date.label + \"min\"] =selectedRecord[date.label + \"value\"]\r\n                                }\r\n                                if (date.hideafterdate) {\r\n                                    selectedRecord[date.label + \"max\"] = selectedRecord[date.label + \"value\"]\r\n                                }\r\n                        }\r\n                    })\r\n\r\n                    selectedRecord = { ...selectedRecord }\r\n\r\n                    if (inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"] === true) {\r\n                        masterData = { ...masterData, ...response[1].data[\"SubSampleChildDetail\"] };\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            operation,\r\n                            timeZoneList,\r\n                            defaultTimeZone,\r\n                            selectedRecord,\r\n                            openModal: true,\r\n                            ncontrolCode: inputParam.editSubSampleRegParam.ncontrolCode,\r\n                            parentPopUpSize: \"lg\",\r\n                            loading: false,\r\n                            showSample: undefined,\r\n                            regSubSamplecomboData: comboValues.comboData,\r\n                            loadRegSubSample: true,\r\n                            screenName: \"IDS_SUBSAMPLE\",\r\n                            operation: \"update\",\r\n                            specBasedComponent,\r\n                            //  regRecordToEdit:recordToEdit\r\n                            masterData\r\n                        }\r\n                    })\r\n                    // }\r\n                })\r\n                .catch(error => {\r\n                    //console.log(\"error:\", error);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.info(intl.formatMessage({\r\n                            id: error.response.data\r\n                        }));\r\n                    }\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\nexport function onUpdateSubSampleRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/updateRegistrationSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                sortData(response.data);\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                //replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                //  let RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];\r\n                let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                masterData = {\r\n                    ...masterData,\r\n                    // selectedSample: response.data[\"selectedSample\"],\r\n                    selectedSubSample: response.data[\"selectedSubSample\"],\r\n                    selectedTest: response.data[\"selectedTest\"],\r\n                    RegistrationGetTest,\r\n                    // RegistrationGetSubSample,\r\n                    RegistrationParameter: response.data[\"RegistrationParameter\"]\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, openModal: false, loading: false, showConfirmAlert: false,\r\n                        regDateEditConfirmMessage: undefined, loadEsign: false,\r\n                        loadRegSubSample: false, selectedRecord: {}, showSample: undefined, screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                    }\r\n                });\r\n                // let inputData = {\r\n                //     masterData,\r\n                //     selectedTest: masterData.selectedTest,\r\n                //     ntransactiontestcode: masterData.selectedTest ?\r\n                //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\r\n                //     npreregno: masterData.selectedSample ?\r\n                //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\r\n                //     userinfo: inputParam.inputData.userinfo,\r\n                //     activeTestTab : masterData.activeTestTab,\r\n                //     screenName: masterData.activeTestTab,\r\n                //     resultDataState: inputParam.resultDataState,\r\n                //     testCommentDataState: inputParam.testCommentDataState,\r\n                // }\r\n                // dispatch(getTestChildTabDetail(inputData, true))\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                }\r\n                else if (error.response.status === 302) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false, loadEsign: false,\r\n                            regEditParam: inputParam,\r\n                            showConfirmAlert: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            regDateEditConfirmMessage: error.response.data, showSample: undefined\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showSample: undefined } })\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function cancelSubSampleAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                // replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    // selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function preregRecordToQuarantine(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/quarantineRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                // replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                // replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                delete response.data[\"RegistrationGetSample\"];\r\n                delete response.data[\"RegistrationGetSubSample\"];\r\n                delete response.data[\"RegistrationGetTest\"];\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTestChildTabDetailRegistration(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        if(inputData.ntransactiontestcode === \"\"){\r\n            inputData.ntransactiontestcode = \"0\";\r\n        }\r\n        if (inputData.ntransactiontestcode && inputData.ntransactiontestcode.length > 0) {\r\n            let inputParamData = {\r\n                ntransactiontestcode: inputData.ntransactiontestcode,\r\n                npreregno: inputData.npreregno,\r\n                userinfo: inputData.userinfo\r\n            }\r\n            let url = null\r\n            let { testtake } = inputData;\r\n            let activeName = \"\";\r\n            let dataStateName = \"\";\r\n            switch (inputData.activeTestTab) {\r\n                case \"IDS_RESULTS\":\r\n                    url = \"approval/getapprovalparameter\"\r\n                    activeName = \"ApprovalParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_PARAMETERRESULTS\":\r\n                    url = \"registration/getregistrationparameter\"\r\n                    activeName = \"RegistrationParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    url = \"resultentrybysample/getResultUsedInstrument\"\r\n                    activeName = \"ResultUsedInstrument\"\r\n                    dataStateName = \"instrumentDataState\"\r\n                    break;\r\n                case \"IDS_MATERIAL\":\r\n                    url = \"resultentrybysample/getResultUsedMaterial\"\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    url = \"resultentrybysample/getResultUsedTask\"\r\n                    activeName = \"ResultUsedTasks\"\r\n                    dataStateName = \"taskDataState\"\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    url = \"attachment/getTestAttachment\"\r\n                    activeName = \"RegistrationTestAttachment\"\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    url = \"comments/getTestComment\"\r\n                    activeName = \"RegistrationTestComment\"\r\n                    dataStateName = \"testCommentDataState\"\r\n                    break;\r\n                case \"IDS_DOCUMENTS\":\r\n                    url = \"approval/getapprovalparameter\"\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    url = \"approval/getApprovalResultChangeHistory\"\r\n                    activeName = \"ApprovalResultChangeHistory\"\r\n                    dataStateName = \"resultChangeDataState\"\r\n                    break;\r\n                case \"IDS_TESTAPPROVALHISTORY\":\r\n                    url = \"approval/getApprovalHistory\"\r\n                    activeName = \"ApprovalHistory\"\r\n                    dataStateName = \"historyDataState\"\r\n                    break;\r\n                case \"IDS_SAMPLEATTACHMENTS\":\r\n                    url = \"attachment/getSampleAttachment\"\r\n                    break;\r\n                default:\r\n                    url = \"approval/getapprovalparameter\"\r\n                    activeName = \"ApprovalParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n            }\r\n            if (url !== null) {\r\n                dispatch(initRequest(true));\r\n                if (isServiceRequired) {\r\n                    rsapi.post(url, inputParamData)\r\n                        .then(response => {\r\n                            let skipInfo = {};\r\n                            let responseData = { ...response.data, selectedSample: inputData.selectedSample || inputData.masterData.selectedSample, selectedTest: inputData.selectedTest }\r\n                            //responseData = sortData(responseData)\r\n                            // fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\",inputData.removeElementFromArray);\r\n                            fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\r\n                            let masterData = {\r\n                                ...inputData.masterData,\r\n                                selectedSample: inputData.selectedSample || inputData.masterData.selectedSample,\r\n                                selectedTest: inputData.selectedTest,\r\n                                selectedPreregno: inputData.npreregno,\r\n                                selectedSampleCode: inputData.ntransactionsamplecode,\r\n                                selectedTestCode: inputData.ntransactiontestcode,\r\n                                activeTabIndex: inputData.activeTabIndex,\r\n                                activeTabId: inputData.activeTabId\r\n                            }\r\n                            if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                                skipInfo = {\r\n\r\n                                    [dataStateName]: {\r\n                                        ...inputData[dataStateName],\r\n                                        skip: 0,\r\n                                        sort: undefined,\r\n                                        filter: undefined\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                skipInfo = {\r\n                                    ...skipInfo,\r\n                                    [dataStateName]: {\r\n                                        ...inputData[dataStateName],\r\n                                        sort: undefined,\r\n                                        filter: undefined\r\n                                    }\r\n                                }\r\n                            }\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN, payload: {\r\n                                    masterData,\r\n                                    activeTabIndex: inputData.activeTabIndex,\r\n                                    activeTabId: inputData.activeTabId,\r\n                                    loading: false,\r\n                                    showFilter: false,\r\n                                    activeTestTab: inputData.activeTestTab,\r\n                                    screenName: inputData.screenName,\r\n                                    testtake, testskip: undefined,\r\n                                    ...skipInfo\r\n                                }\r\n                            })\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                            if (error.response.status === 500) {\r\n                                toast.error(error.message);\r\n                            }\r\n                            else {\r\n                                toast.info(error.response.data);\r\n                            }\r\n                        })\r\n                } else {\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\", inputData.removeElementFromArray);\r\n                    let skipInfo = {};\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        selectedTest: inputData.selectedTest,\r\n                        selectedPreregno: inputData.npreregno,\r\n                        selectedSampleCode: inputData.ntransactionsamplecode,\r\n                        selectedTestCode: inputData.ntransactiontestcode,\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            screenName: inputData.screenName,\r\n                            testtake, testskip: undefined,\r\n                            ...skipInfo\r\n                        }\r\n                    })\r\n                }\r\n\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab\r\n                    }\r\n                })\r\n            }\r\n        } else {\r\n            let { ApprovalParameter, ResultUsedInstrument, ResultUsedTasks, RegistrationTestAttachment, ApprovalResultChangeHistory,\r\n                RegistrationTestComment, ApprovalHistory } = inputData.masterData\r\n            switch (inputData.activeTestTab) {\r\n                case \"IDS_RESULTS\":\r\n                    ApprovalParameter = [];\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    ResultUsedInstrument = []\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    ResultUsedTasks = []\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    RegistrationTestAttachment = []\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    ApprovalResultChangeHistory = []\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    RegistrationTestComment = []\r\n                    break;\r\n                case \"IDS_APPROVALHISTORY\":\r\n                    ApprovalHistory = []\r\n                    break;\r\n                default:\r\n                    ApprovalParameter = []\r\n                    break;\r\n            }\r\n\r\n            dispatch({\r\n                type: DEFAULT_RETURN, payload: {\r\n                    masterData: {\r\n                        ...inputData.masterData,\r\n                        selectedTest: [],\r\n                        ApprovalParameter, ResultUsedInstrument, ResultUsedTasks, RegistrationTestAttachment,\r\n                        ApprovalResultChangeHistory, RegistrationTestComment, ApprovalHistory\r\n                    }, loading: false,   \r\n                    activeTabIndex: inputData.activeTabIndex,\r\n                    activeTabId: inputData.activeTabId,\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nconst toTimestamp = (strDate) => {\r\n    // const dt = new Date(strDate).getTime();\r\n    // return dt / 1000;\r\n    const dt = strDate.getTime();\r\n    return dt;\r\n}\r\n\r\nexport function getDynamicFilter(inputParam) {\r\n    if (inputParam.component.inputtype === 'frontendsearchfilter') {\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilter\", { ...inputParam.component, userinfo: inputParam.userinfo })\r\n                .then(response => {\r\n                    const source = inputParam.component.source\r\n                    const languageTypeCode = inputParam.userinfo.slanguagetypecode\r\n                    const lstData = response.data[inputParam.component.label]\r\n\r\n\r\n                    // const responseparam={}\r\n                    const gridColumns = []\r\n                    const fields = []\r\n                    const datefileds = []\r\n                    const multilingual = []\r\n                    inputParam.component.filterfields.map(item => {\r\n                        fields.push(filterObject(item, languageTypeCode, response.data));\r\n                        if (item.ismultilingual) {\r\n                            multilingual.push(item.columnname)\r\n                        }\r\n                        if (item.filterinputtype === \"date\") {\r\n                            datefileds.push(item.columnname)\r\n                        }\r\n                        if (item.filterinputtype !== 'predefinednumeric') {\r\n                            gridColumns.push(creategridColumns(item, languageTypeCode,));\r\n                        }\r\n                    })\r\n\r\n                    const optionList = lstData.map(item => {\r\n                        const jsondata = item[source] ? item[source].value ?\r\n                            JSON.parse(item[source].value) : item.jsondata : item.jsondata\r\n\r\n                        datefileds.map(x => {\r\n                            jsondata[x + \"timestamp\"] = toTimestamp(rearrangeDateFormatforKendoDataTool(inputParam.userinfo, jsondata[x]))\r\n                        })\r\n                        multilingual.map(mul => {\r\n                            jsondata[mul] =\r\n                                jsondata[mul][languageTypeCode] || jsondata[mul]['en-US']\r\n                                ;\r\n                        })\r\n\r\n\r\n                        return jsondata\r\n                    });\r\n                    let map = {\r\n                    }\r\n                    if (inputParam.type==='design') {\r\n                        map={...map, showFilter: true,selectedComponentpath:inputParam.selectedComponentpath}\r\n                    }else{\r\n                        map={...map, loadCustomSearchFilter: true }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            lstPatient: optionList, gridColumns, fields,\r\n                          //  loadCustomSearchFilter: true\r\n                             loading: false,\r\n                            screenName: inputParam.component.displayname[languageTypeCode],\r\n                            seletedFilterComponent: inputParam.component,\r\n                            kendoSkip: 0,\r\n                            kendoTake: 5,\r\n                            kendoFilter: inputParam.component.kendoFilter || {\r\n                                logic: \"and\",\r\n                                filters: []\r\n                            },\r\n                            //awesomeTree: undefined,\r\n                            //awesomeConfig: undefined,\r\n                           // showFilter: true,\r\n                            ...map\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data.rtn);\r\n                    }\r\n\r\n                })\r\n        }\r\n    } else if (inputParam.component.inputtype === \"backendsearchfilter\") {\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilterpredefined\", { ...inputParam.component, userinfo: inputParam.userinfo })\r\n                .then(response => {\r\n                    const languageTypeCode = inputParam.userinfo.slanguagetypecode\r\n                    const { fields, gridColumns } = filterObjectForReactAwesomeFilter(inputParam.component.filterfields, languageTypeCode, response.data)\r\n\r\n                    let map = {\r\n                    }\r\n\r\n                    if (inputParam.component.awesomeTree\r\n                        && inputParam.component.filterquery&&inputParam.component.filterquery !== ''\r\n                        ) {\r\n                        map = {\r\n                            filterquery:  inputParam.component.filterquery \r\n                        }\r\n\r\n                        if(inputParam.type==='design'){\r\n                            map = {\r\n                                ...map,filterquery:  inputParam.component.filterquery ,\r\n                                selectedFieldRecord:{...inputParam.component,awesomeTree:checkTree(loadTree(inputParam.component.awesomeTree), inputParam.component.awesomeConfig)}\r\n                            }\r\n                        }\r\n                    }else{\r\n                        map = {\r\n                            filterquery:  ''\r\n                        }\r\n                    }\r\n\r\n                    if (inputParam.type==='design') {\r\n                        map={...map, \r\n                            showFilter: true,selectedComponentpath:inputParam.selectedComponentpath}\r\n                    }else{\r\n                        map={...map, loadCustomSearchFilter: true }\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            lstPatient: [], gridColumns, fields,\r\n                           // loadCustomSearchFilter: true\r\n                            loading: false,\r\n                            screenName: inputParam.component.displayname[languageTypeCode],\r\n                            seletedFilterComponent: inputParam.component,\r\n                            kendoSkip: 0,\r\n                            kendoTake: 5,\r\n                            awesomeTree: inputParam.component.awesomeTree ? checkTree(loadTree(inputParam.component.awesomeTree), inputParam.component.awesomeConfig) : undefined,\r\n                            onExecute:true,\r\n                            // awesomeConfig: inputParam.component.awesomeConfig || undefined,\r\n                           // showFilter: true,\r\n                            ...map\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data.rtn);\r\n                    }\r\n\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\nlet datapredef = {}\r\nconst CustomFilter = props => {\r\n    const { filter, data = [], defaultItem } = props;\r\n    const onChange = event => {\r\n        props.onFilterChange.call(undefined, {\r\n            nextFilter: { ...props.filter, value: event.target.value.value }\r\n        });\r\n    };\r\n\r\n    return <ComboBox onChange={onChange} data={filter.field ? datapredef[filter.field] : []} textField=\"text\" />;\r\n};\r\n\r\nexport function creategridColumns(item, languageTypeCode) {\r\n    let obj = {}\r\n    if (item.filterinputtype !== 'predefinednumeric') {\r\n        return {\r\n            field: item.columnname,\r\n            title: item.displayname[languageTypeCode], width: \"250px\"\r\n        }\r\n    }\r\n}\r\n\r\nexport function filterObjectForReactAwesomeFilter(filterFields, languageTypeCode, resposedata) {\r\n    let obj = {}\r\n    obj['fields'] = {}\r\n    obj['gridColumns'] = []\r\n    filterFields.map(item => {\r\n        if (item.filterinputtype === 'predefinednumeric' || item.filterinputtype === 'predefinedtext') {\r\n            const optionList = resposedata[item.predefinedtablename].map(data => {\r\n                const jsondata = data[item.predefinedtablename] ? data[item.predefinedtablename].value ?\r\n                    JSON.parse(data[item.predefinedtablename].value) : data.jsondata : data.jsondata\r\n\r\n                jsondata['title'] = item.predefinedismultilingual ?\r\n                    jsondata[item.predefineddisplaymember]\r\n                    [languageTypeCode] || jsondata[item.predefineddisplaymember]['en-US']\r\n                    : jsondata[item.predefineddisplaymember];\r\n                jsondata['value'] = jsondata[item.predefinedvaluemember]\r\n                return jsondata\r\n            });\r\n            datapredef[item.columnname] = optionList\r\n        }\r\n        switch (item.filterinputtype) {\r\n            case \"text\":\r\n                obj['fields'][item.type === 'dynamic' ? item.ismultilingual ?\r\n                    \"jsondata->'\" + item.columnname + \"'->>'\" + languageTypeCode + \"'\" :\r\n                    \"jsondata->>'\" + item.columnname + \"'\" :\r\n                   \"\\\"\"+ item.columnname+\"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"text\",\r\n                    valueSources: [\"value\", \"func\"],\r\n                    mainWidgetProps: {\r\n                        \"valueLabel\": \"Name\",\r\n                        \"valuePlaceholder\": \"Enter\" + item.displayname[languageTypeCode]\r\n                    }\r\n                }\r\n                break;\r\n            case \"numeric\":\r\n                obj['fields'][item.type === 'dynamic' ?\r\n                    \"(jsondata->>'\" + item.columnname + \"')::int\" :\r\n                    \"\\\"\"+ item.columnname+\"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"number\",\r\n                    valueSources: [\"value\"],\r\n                    fieldSettings: {\r\n                        ...item.numericcondition\r\n                    }\r\n                }\r\n                break;\r\n            case \"date\":\r\n                obj['fields'][item.type === 'dynamic' ?\r\n                    \"jsondata->>'\" + item.columnname + \"'\" :\r\n                    \"\\\"\"+ item.columnname+\"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"date\",\r\n                    valueSources: [\"value\"],\r\n                }\r\n                break;\r\n            case \"predefinednumeric\":\r\n                obj['fields'][item.type === 'dynamic' ?\r\n                    \"(jsondata->>'\" + item.columnname + \"')::int\" :\r\n                    \"\\\"\"+ item.columnname+\"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"select\",\r\n                    valueSources: [\"value\"],\r\n                    fieldSettings: {\r\n                        listValues: datapredef[item.columnname]\r\n                    }\r\n\r\n                }\r\n                break;\r\n            case \"predefinedtext\":\r\n                obj['fields'][item.type === 'dynamic' ? item.ismultilingual ?\r\n                    \"jsondata->'\" + item.columnname + \"'->>'\" + languageTypeCode + \"'\" :\r\n                    \"jsondata->>'\" + item.columnname + \"'\" :\r\n                    \"\\\"\"+ item.columnname+\"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"select\",\r\n                    valueSources: [\"value\"],\r\n                    fieldSettings: {\r\n                        listValues: datapredef[item.columnname]\r\n                    }\r\n\r\n                }\r\n                break;\r\n        }\r\n        const gridColumns = creategridColumns(item, languageTypeCode)\r\n        if (item.filterinputtype !== 'predefinednumeric') {\r\n            obj['gridColumns'].push(gridColumns)\r\n        }\r\n\r\n\r\n    })\r\n    return obj;\r\n}\r\n\r\nexport function filterObject(item, languageTypeCode, resposedata) {\r\n    let obj = {}\r\n    let preobj = {}\r\n    if (item.filterinputtype === 'predefinednumeric' || item.filterinputtype === 'predefinedtext') {\r\n        const optionList = resposedata[item.predefinedtablename].map(data => {\r\n            const jsondata = data[item.predefinedtablename] ? data[item.predefinedtablename].value ?\r\n                JSON.parse(data[item.predefinedtablename].value) : data.jsondata : data.jsondata\r\n\r\n            jsondata['text'] = item.predefinedismultilingual ?\r\n                jsondata[item.predefineddisplaymember]\r\n                [languageTypeCode] || jsondata[item.predefineddisplaymember]['en-US']\r\n                : jsondata[item.predefineddisplaymember];\r\n            jsondata['value'] = jsondata[item.predefinedvaluemember]\r\n            //delete jsondata.jsondata\r\n            return jsondata\r\n        });\r\n        datapredef[item.columnname] = optionList\r\n        // preobj = {\r\n        //     predefdata: optionList, predefineddisplaymember: item.predefineddisplaymember,\r\n        //     predefinedvaluemember: item.columnname\r\n        // }\r\n    }\r\n    switch (item.filterinputtype) {\r\n        case \"text\":\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: TextFilter,\r\n                operators: Operators.text,\r\n            }\r\n        case \"numeric\":\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: NumericFilter,\r\n                operators: Operators.numeric,\r\n            }\r\n        case \"date\":\r\n            return obj = {\r\n                name: item.columnname + \"timestamp\",\r\n                label: item.displayname[languageTypeCode],\r\n                filter: DateFilter,\r\n                operators: Operators.date,\r\n            }\r\n        case \"predefinednumeric\":\r\n\r\n\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: CustomFilter,\r\n                operators: Operators.numeric,\r\n            }\r\n        case \"predefinedtext\":\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: CustomFilter,\r\n                operators: Operators.text,\r\n            }\r\n        default:\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: TextFilter,\r\n                operators: Operators.text,\r\n            }\r\n\r\n    }\r\n\r\n    //return obj;\r\n}\r\n\r\nexport function getDynamicFilterExecuteData(inputParam) {\r\n    return function (dispatch) {\r\n        let obj = { ...inputParam.component, filterquery: inputParam.filterquery, userinfo: inputParam.userinfo }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/dynamicpreregdesign/getdynamicfilterexecutedata\", obj)\r\n            .then(response => {\r\n                const source = inputParam.component.source\r\n                const languageTypeCode = inputParam.userinfo.slanguagetypecode\r\n                const lstData = response.data[inputParam.component.label]\r\n                const multilingual = []\r\n                inputParam.component.filterfields.map(item => {\r\n                    if (item.ismultilingual) {\r\n                        multilingual.push(item.columnname)\r\n                    }\r\n                })\r\n                const optionList = lstData.map(item => {\r\n                    const jsondata = item[source] ? item[source].value ?\r\n                        JSON.parse(item[source].value) : item.jsondata : item.jsondata\r\n\r\n                    multilingual.map(mul => {\r\n                        jsondata[mul] =\r\n                            jsondata[mul][languageTypeCode] || jsondata[mul]['en-US'];\r\n                    })\r\n                    // let label = isMultiLingual ?\r\n                    //   jsondata[optionValue]\r\n                    //   [languageTypeCode] || jsondata[optionValue]['en-US']\r\n                    //   : jsondata[optionValue];\r\n\r\n                    return jsondata\r\n                });\r\n                if (inputParam.userinfo.nformcode === 161) { \r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        lstPatient: optionList,\r\n                        onExecute: false,\r\n                        loading: false,\r\n                        screenName: inputParam.component.displayname[languageTypeCode]\r\n                    }\r\n                })\r\n            }\r\n                else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            lstPatient: optionList,\r\n                           // onExecute: false,\r\n                            loading: false,\r\n                            screenName: inputParam.component.displayname[languageTypeCode]\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function rearrangeDateFormatforKendoDataTool(userInfo, dateValue) {\r\n    let splitChar = \"/\";\r\n\r\n    if (dateValue !== undefined) {\r\n        const index = userInfo.ssitedatetime && userInfo.ssitedatetime.indexOf(\"/\" || \"-\")\r\n        if (index !== -1)\r\n            splitChar = userInfo.ssitedatetime.substring(index, index + 1)\r\n\r\n    }\r\n    //   console.log(\"splitChar:\", splitChar);\r\n    if ((splitChar === \"/\" || splitChar === \"-\") && typeof dateValue === \"string\") {\r\n        const firstField = userInfo.ssitedatetime && userInfo.ssitedatetime.split(splitChar)[0];\r\n        // console.log(\"firstField:\", firstField);\r\n        const timeSplitChar = dateValue.indexOf(\"T\") !== -1 ? \"T\" : \" \"\r\n        const datetime = dateValue.split(timeSplitChar);\r\n        const dateArray = datetime[0].split(splitChar);\r\n        if (firstField === \"dd\") {\r\n            const day = dateArray[0];\r\n            const month = dateArray[1];\r\n            const year = dateArray[2];\r\n            const time = datetime[1] || \"00:00:00\";\r\n\r\n            const formatted = year + \"-\" + month + \"-\" + day + \"T\" + time;\r\n            return new Date(formatted);\r\n        }\r\n        else if (firstField === \"yyyy\") {\r\n            const year = dateArray[0];\r\n            const month = dateArray[1];\r\n            const day = dateArray[2];\r\n            const time = datetime[1] || \"00:00:00\";\r\n            const formatted = year + \"-\" + month + \"-\" + day + \"T\" + time;\r\n            return new Date(formatted);\r\n        }\r\n        else {\r\n            return new Date(dateValue);\r\n        }\r\n    }\r\n    else {\r\n        return dateValue;\r\n    }\r\n}\r\n\r\nexport function preRegDispatch(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        dispatch({\r\n            type: DEFAULT_RETURN,\r\n            payload: {\r\n                ...inputParam\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function validateEsignforRegistration(inputParam) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data === \"Success\") {\r\n\r\n                    const methodUrl = \"registration\";\r\n                    inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\r\n\r\n                    if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()] &&\r\n                        inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]) {\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"]\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"]\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"]\r\n                    }\r\n                    //dispatch(inputParam[\"screenData\"][\"inputParam\"].performAction(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"]))\r\n                    dispatch(dispatchMethods(inputParam[\"screenData\"]))\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            })\r\n    };\r\n}\r\n\r\nfunction dispatchMethods(screenData) {\r\n    return (dispatch) => {\r\n        let action = screenData.inputParam.action\r\n        switch (action) {\r\n            case \"preregister\":\r\n                dispatch(insertRegistration(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"editSample\":\r\n                dispatch(updateRegistration(screenData.inputParam, screenData.masterData, 'openModal'));\r\n                break;\r\n            case \"accept\":\r\n                dispatch(acceptRegistration(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"quarantine\":\r\n                dispatch(preregRecordToQuarantine(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"cancelTest\":\r\n                dispatch(cancelTestAction(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"cancelSample\":\r\n                dispatch(cancelSampleAction(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"addregsourcecountry\":\r\n                dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n                break;\r\n            case \"deleteregsourcecountry\":\r\n                dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n                break;\r\n            case \"printer\":\r\n                dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n                break;\r\n            case \"editSubSample\":\r\n                dispatch(onUpdateSubSampleRegistration(screenData.inputParam, screenData.masterData));\r\n            case \"cancelSubSample\":\r\n                dispatch(cancelSubSampleAction(screenData.inputParam, screenData.masterData));\r\n                    \r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\nexport function getStorageCategoryForSendToStore(userInfo, masterData, sendToStoreId, selectedRecord, sampleDetails) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n\r\n        let urlArray = [];\r\n\r\n\r\n        const geStorageCategory = rsapi.post(\"/storagecategory/getStorageCategory\",\r\n            { 'userinfo': userInfo })\r\n        const getUnit = rsapi.post(\"/unit/getUnit\",\r\n            { 'userinfo': userInfo })\r\n\r\n        const getApprovedLocation = rsapi.post(\"/samplestoragemaster/getSampleQty\", sampleDetails);\r\n\r\n        urlArray = [geStorageCategory, getUnit, getApprovedLocation];\r\n\r\n\r\n        Axios.all(urlArray)\r\n            //    rsapi.post(\"/storagecategory/getStorageCategory\",\r\n            //     { 'userinfo': userInfo })\r\n            .then(response => {\r\n\r\n                const conditionMap = constructOptionList(response[0].data, \"nstoragecategorycode\", \"sstoragecategoryname\", false, false, true);\r\n                const conditionMaster = conditionMap.get(\"OptionList\");\r\n\r\n                const conditionUnitMap = constructOptionList(response[1].data, \"nunitcode\", \"sunitname\", false, false, true);\r\n                const conditionUnitMaster = conditionUnitMap.get(\"OptionList\");\r\n\r\n                let approvedTreeData = [];\r\n                selectedRecord[\"nsamplestoragelocationcode\"] = [];\r\n                selectedRecord[\"nstoragecategorycode\"] = [];\r\n                selectedRecord[\"nsampleqty\"] = undefined;\r\n                selectedRecord[\"sampleToStore\"]= sampleDetails.sample === undefined ? \"\" : sampleDetails.sample;\r\n\r\n                if (response[2].data !== null && response[2].data.unit && response[2].data.unit.value !== undefined) {\r\n                    conditionUnitMaster.map(item => item.value === response[2].data.unit.value ?\r\n                        selectedRecord[\"nunitcode\"] = {\r\n                            \"label\": item.label,\r\n                            \"value\": item.value,\r\n                            \"item\": item.item\r\n                        }\r\n                        : \"\");\r\n\r\n                }\r\n                masterData = {\r\n                    ...masterData, storageCategory: conditionMaster, approvedTreeData, unitMaster: conditionUnitMaster\r\n                };\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        openChildModal: true,\r\n                        operation: \"sendToStore\",\r\n                        ncontrolcode: sendToStoreId,\r\n                        selectedRecord,\r\n                        npreregno: sampleDetails.npreregno,\r\n                        ntransactionsamplecode: sampleDetails.ntransactionsamplecode                        \r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}