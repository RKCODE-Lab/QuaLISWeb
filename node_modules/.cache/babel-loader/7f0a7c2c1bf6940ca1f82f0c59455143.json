{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import Axios from'axios';import{toast}from'react-toastify';import{sortData,getComboLabelValue,constructOptionList}from'../components/CommonScript';import{DEFAULT_RETURN}from'./LoginTypes';import{intl}from'../components/App';import{initRequest}from'./LoginAction';export function selectProductMaholderDetail(productmaholder,masterData,userInfo){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/productmaholder/getProductMaHolderByProductMahcode\",{\"nproductmanufcode\":parseInt(productmaholder.nproductmanufcode),\"nproductmahcode\":parseInt(productmaholder.nproductmahcode),'userinfo':userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch(initRequest(false));if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getProductMAHolderComboService(screenName,operation,primaryKeyName,primaryKeyValue,selectedFilter,masterData,userInfo,ncontrolCode){return function(dispatch){if(operation===\"create\"&&selectedFilter.nproductcode&&selectedFilter.nproductmanufcode>0||operation===\"update\"){var MarketAuthorisationService=rsapi.post(\"/product/getMarketAuthorisationHolder\",{\"userinfo\":userInfo});var CertificateLicenseContainertypeService=rsapi.post(\"/product/getCertificateLicenseContainertype\",{\"userinfo\":userInfo});var urlArray=[];if(operation===\"create\"){urlArray=[MarketAuthorisationService,CertificateLicenseContainertypeService];}else{var ProductMAHolderByIDService=rsapi.post(\"/product/getProductMaHolderByProductMahcode\",_defineProperty({\"userinfo\":userInfo},primaryKeyName,primaryKeyValue));urlArray=[MarketAuthorisationService,CertificateLicenseContainertypeService,ProductMAHolderByIDService];}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var MAHolder=response[0].data;var _response$1$data=response[1].data,CertificateType=_response$1$data.CertificateType,ContainerType=_response$1$data.ContainerType,LicenseAuthority=_response$1$data.LicenseAuthority;var ContainerTypeList=constructOptionList(response[1].data[\"ContainerType\"]||[],\"ncontainertypecode\",\"scontainertype\",undefined,undefined,undefined);var ContainerType1=ContainerTypeList.get(\"OptionList\");var MAHolderList=constructOptionList(response[0].data||[],\"nmahcode\",\"smahname\",undefined,undefined,undefined);var MAHolder1=MAHolderList.get(\"OptionList\");var CertificateTypeList=constructOptionList(response[1].data[\"CertificateType\"]||[],\"ncertificatetypecode\",\"scertificatetype\",undefined,undefined,undefined);var CertificateType1=CertificateTypeList.get(\"OptionList\");var selectedRecord={};if(operation===\"update\"){selectedRecord=response[2].data[\"ProductMaHolder\"];getComboLabelValue(selectedRecord,MAHolder,\"nmahcode\",\"smahname\");var index=MAHolder.findIndex(function(x){return x.nmahcode===selectedRecord.nmahcode.value;});selectedRecord[\"saddress1\"]=MAHolder&&MAHolder.length>0&&MAHolder[index].saddress1;selectedRecord[\"saddress2\"]=MAHolder&&MAHolder.length>0&&MAHolder[index].saddress2;selectedRecord[\"saddress3\"]=MAHolder&&MAHolder.length>0&&MAHolder[index].saddress3;selectedRecord[\"scountryname\"]=MAHolder&&MAHolder.length>0&&MAHolder[index].scountryname;getComboLabelValue(selectedRecord,CertificateType,\"ncertificatetypecode\",\"scertificatetype\");getComboLabelValue(selectedRecord,ContainerType,\"ncontainertypecode\",\"scontainertype\");// getComboLabelValue(selectedRecord, LicenseAuthority, \"nauthoritycode\", \"sauthorityname\");\n}else{selectedRecord[\"nstatus\"]=1;selectedRecord[\"sproducttradename\"]=\"\";selectedRecord[\"nproductcode\"]=selectedFilter.nproductcode.value;selectedRecord[\"nproductmanufcode\"]=selectedFilter.nproductmanufcode.value;}dispatch({type:DEFAULT_RETURN,payload:{MAHolder:MAHolder1||[],CertificateType:CertificateType1||[],ContainerType:ContainerType1||[],LicenseAuthority:LicenseAuthority||[],operation:operation,screenName:screenName,selectedRecord:selectedRecord,openModal:true,masterData:masterData,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch(initRequest(false));if(error.response.status===500){toast.error(error.message);}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else if(selectedFilter.nproductcode===undefined){toast.warn(intl.formatMessage({id:\"IDS_SELECTPRODUCT\"}));}else if(selectedFilter.nproductmanufcode===undefined){toast.warn(intl.formatMessage({id:\"IDS_SELECTPRODUCTMANUFACTURER\"}));}};}export function getProductChange(Map,selectedFilter,masterData,searchRef){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/productmaholder/getProductMaHolderByProductcode\",Map).then(function(response){var MAHProductManufacturer=response.data[\"MAHProductManufacturer\"];sortData(response.data);// MAHProductManufacturer.length > 0 ?\n//     selectedFilter[\"nproductmanufcode\"] = {\n//         \"value\": MAHProductManufacturer[0].nproductmanufcode,\n//         \"label\": MAHProductManufacturer[0].smanufname\n//     } : selectedFilter[\"nproductmanufcode\"] = \"\";\nselectedFilter[\"smanufname\"]=MAHProductManufacturer&&MAHProductManufacturer.length>0?MAHProductManufacturer[0].smanufname:\"\";selectedFilter[\"nproductmanufcode\"]=MAHProductManufacturer&&MAHProductManufacturer.length>0?MAHProductManufacturer[0].nproductmanufcode:-1;var selectedRecord={};selectedRecord=selectedFilter;masterData=_objectSpread(_objectSpread({},masterData),response.data);if(searchRef!==undefined&&searchRef.current!==null){searchRef.current.value='';masterData['searchedData']=undefined;}dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,selectedFilter:selectedFilter,selectedRecord:selectedRecord,loading:false}});}).catch(function(error){dispatch(initRequest(false));if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getProductManufactureChange(userInfo,selectedFilter,masterData,searchRef){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/productmaholder/getProductMaHolderByProductManufcode\",{\"userinfo\":userInfo,\"nproductmanufcode\":parseInt(selectedFilter[\"nproductmanufcode\"])}).then(function(response){// const MAHProductManufacturer = response.data[\"MAHProductManufacturer\"];\nsortData(response.data);var SelectedMahProduct={};SelectedMahProduct['sproductname']=selectedFilter[\"nproductcode\"].label;masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{SelectedMahProduct:SelectedMahProduct});if(searchRef!==undefined&&searchRef.current!==null){searchRef.current.value='';masterData['searchedData']=undefined;}dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,selectedFilter:selectedFilter,loading:false}});}).catch(function(error){dispatch(initRequest(false));if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/ProductMAHolderAction.js"],"names":["rsapi","Axios","toast","sortData","getComboLabelValue","constructOptionList","DEFAULT_RETURN","intl","initRequest","selectProductMaholderDetail","productmaholder","masterData","userInfo","dispatch","post","parseInt","nproductmanufcode","nproductmahcode","then","response","data","type","payload","loading","catch","error","status","message","warn","getProductMAHolderComboService","screenName","operation","primaryKeyName","primaryKeyValue","selectedFilter","ncontrolCode","nproductcode","MarketAuthorisationService","CertificateLicenseContainertypeService","urlArray","ProductMAHolderByIDService","all","MAHolder","CertificateType","ContainerType","LicenseAuthority","ContainerTypeList","undefined","ContainerType1","get","MAHolderList","MAHolder1","CertificateTypeList","CertificateType1","selectedRecord","index","findIndex","x","nmahcode","value","length","saddress1","saddress2","saddress3","scountryname","openModal","formatMessage","id","getProductChange","Map","searchRef","MAHProductManufacturer","smanufname","current","getProductManufactureChange","SelectedMahProduct","label"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport Axios from 'axios';\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport {\r\n    sortData,\r\n    getComboLabelValue,\r\n    constructOptionList\r\n} from '../components/CommonScript'\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport { intl } from '../components/App'\r\nimport { initRequest } from './LoginAction';\r\nexport function selectProductMaholderDetail(productmaholder, masterData, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/productmaholder/getProductMaHolderByProductMahcode\", {\r\n            \"nproductmanufcode\": parseInt(productmaholder.nproductmanufcode),\r\n            \"nproductmahcode\": parseInt(productmaholder.nproductmahcode),\r\n            'userinfo': userInfo\r\n        })\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data\r\n                };\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch(initRequest(false));\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\nexport function getProductMAHolderComboService(screenName, operation, primaryKeyName, primaryKeyValue, selectedFilter, masterData, userInfo, ncontrolCode) {\r\n    return function (dispatch) {\r\n\r\n        if ((operation === \"create\" && selectedFilter.nproductcode && selectedFilter.nproductmanufcode > 0) || (operation === \"update\")) {\r\n\r\n            const MarketAuthorisationService = rsapi.post(\"/product/getMarketAuthorisationHolder\", {\r\n                \"userinfo\": userInfo\r\n            });\r\n            const CertificateLicenseContainertypeService = rsapi.post(\"/product/getCertificateLicenseContainertype\", {\r\n                \"userinfo\": userInfo\r\n            });\r\n\r\n            let urlArray = [];\r\n            if (operation === \"create\") {\r\n                urlArray = [MarketAuthorisationService, CertificateLicenseContainertypeService];\r\n            } else {\r\n                const ProductMAHolderByIDService = rsapi.post(\"/product/getProductMaHolderByProductMahcode\", {\r\n                    \"userinfo\": userInfo,\r\n                    [primaryKeyName]: primaryKeyValue\r\n                })\r\n                urlArray = [MarketAuthorisationService, CertificateLicenseContainertypeService, ProductMAHolderByIDService];\r\n            }\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n\r\n                    const MAHolder = response[0].data;\r\n                    const { CertificateType,\r\n                        ContainerType,\r\n                        LicenseAuthority\r\n                    } = response[1].data;\r\n\r\n                    const ContainerTypeList = constructOptionList(response[1].data[\"ContainerType\"] || [], \"ncontainertypecode\",\r\n                        \"scontainertype\", undefined, undefined, undefined);\r\n                    const ContainerType1 = ContainerTypeList.get(\"OptionList\");\r\n\r\n                    const MAHolderList = constructOptionList(response[0].data || [], \"nmahcode\",\r\n                        \"smahname\", undefined, undefined, undefined);\r\n                    const MAHolder1 = MAHolderList.get(\"OptionList\");\r\n\r\n                    const CertificateTypeList = constructOptionList(response[1].data[\"CertificateType\"] || [], \"ncertificatetypecode\",\r\n                        \"scertificatetype\", undefined, undefined, undefined);\r\n                    const CertificateType1 = CertificateTypeList.get(\"OptionList\");\r\n\r\n\r\n                    let selectedRecord = {};\r\n                    if (operation === \"update\") {\r\n                        selectedRecord = response[2].data[\"ProductMaHolder\"];\r\n                        getComboLabelValue(selectedRecord, MAHolder, \"nmahcode\", \"smahname\");\r\n                        let index = MAHolder.findIndex(x => x.nmahcode === selectedRecord.nmahcode.value);\r\n                        selectedRecord[\"saddress1\"] = MAHolder && MAHolder.length > 0 && MAHolder[index].saddress1;\r\n                        selectedRecord[\"saddress2\"] = MAHolder && MAHolder.length > 0 && MAHolder[index].saddress2;\r\n                        selectedRecord[\"saddress3\"] = MAHolder && MAHolder.length > 0 && MAHolder[index].saddress3;\r\n                        selectedRecord[\"scountryname\"] = MAHolder && MAHolder.length > 0 && MAHolder[index].scountryname;\r\n                        getComboLabelValue(selectedRecord, CertificateType, \"ncertificatetypecode\", \"scertificatetype\");\r\n                        getComboLabelValue(selectedRecord, ContainerType, \"ncontainertypecode\", \"scontainertype\");\r\n                        // getComboLabelValue(selectedRecord, LicenseAuthority, \"nauthoritycode\", \"sauthorityname\");\r\n                    } else {\r\n                        selectedRecord[\"nstatus\"] = 1;\r\n                        selectedRecord[\"sproducttradename\"] = \"\";\r\n                        selectedRecord[\"nproductcode\"] = selectedFilter.nproductcode.value;\r\n                        selectedRecord[\"nproductmanufcode\"] = selectedFilter.nproductmanufcode.value;\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            MAHolder: MAHolder1 || [],\r\n                            CertificateType: CertificateType1 || [],\r\n                            ContainerType: ContainerType1 || [],\r\n                            LicenseAuthority: LicenseAuthority || [],\r\n                            operation,\r\n                            screenName,\r\n                            selectedRecord,\r\n                            openModal: true,\r\n                            masterData,\r\n                            ncontrolCode,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch(initRequest(false));\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(intl.formatMessage({\r\n                            id: error.response.data\r\n                        }));\r\n                    }\r\n                })\r\n        } else if (selectedFilter.nproductcode === undefined) {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTPRODUCT\"\r\n            }));\r\n        } else if (selectedFilter.nproductmanufcode === undefined) {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTPRODUCTMANUFACTURER\"\r\n            }));\r\n        }\r\n    }\r\n}\r\nexport function getProductChange(Map, selectedFilter, masterData, searchRef) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/productmaholder/getProductMaHolderByProductcode\", Map)\r\n            .then(response => {\r\n                const MAHProductManufacturer = response.data[\"MAHProductManufacturer\"];\r\n                sortData(response.data)\r\n                // MAHProductManufacturer.length > 0 ?\r\n                //     selectedFilter[\"nproductmanufcode\"] = {\r\n                //         \"value\": MAHProductManufacturer[0].nproductmanufcode,\r\n                //         \"label\": MAHProductManufacturer[0].smanufname\r\n                //     } : selectedFilter[\"nproductmanufcode\"] = \"\";\r\n                selectedFilter[\"smanufname\"] = MAHProductManufacturer && MAHProductManufacturer.length > 0 ?\r\n                    MAHProductManufacturer[0].smanufname : \"\"\r\n\r\n                selectedFilter[\"nproductmanufcode\"] = MAHProductManufacturer && MAHProductManufacturer.length > 0 ?\r\n                    MAHProductManufacturer[0].nproductmanufcode : -1\r\n\r\n                    let selectedRecord={};\r\n                    selectedRecord=selectedFilter;\r\n\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data\r\n                };\r\n                if(searchRef!== undefined &&searchRef.current !== null){\r\n                    searchRef.current.value='';\r\n                    masterData['searchedData']=undefined;\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        selectedFilter,\r\n                        selectedRecord,\r\n                        loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch(initRequest(false));\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getProductManufactureChange(userInfo, selectedFilter, masterData, searchRef) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/productmaholder/getProductMaHolderByProductManufcode\", {\"userinfo\":userInfo,\"nproductmanufcode\":parseInt(selectedFilter[\"nproductmanufcode\"])})\r\n            .then(response => {\r\n                // const MAHProductManufacturer = response.data[\"MAHProductManufacturer\"];\r\n                sortData(response.data)\r\n                let SelectedMahProduct={}\r\n                SelectedMahProduct['sproductname']=selectedFilter[\"nproductcode\"].label\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    SelectedMahProduct\r\n                };\r\n                if(searchRef!== undefined &&searchRef.current !== null){\r\n                    searchRef.current.value='';\r\n                    masterData['searchedData']=undefined;\r\n                }\r\n                \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        selectedFilter,\r\n                        loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch(initRequest(false));\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}