{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{initRequest}from\"./LoginAction\";import rsapi from\"../rsapi\";import{sortData,getComboLabelValue}from\"../components/CommonScript\";import{DEFAULT_RETURN}from\"./LoginTypes\";import{toast}from'react-toastify';import Axios from\"axios\";import{constructOptionList}from\"../components/CommonScript\";import{intl}from'../components/App';import{attachmentType,transactionStatus}from\"../components/Enumeration\";export function getInstitutionDetail(institution,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"institution/getSelectedInstitutionDetail\",{ninstitutioncode:institution.ninstitutioncode,userinfo:userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,operation:null,modalName:undefined,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getInstitutionCombo(screenName,operation,primaryKeyName,masterData,userInfo,ncontrolCode){return function(dispatch){if(masterData.SelectedInstitutionCategory!==null){var urlArray=[];var InstitutionCategory=rsapi.post(\"/institution/getInstitutionCategory\",{\"userinfo\":userInfo});if(operation===\"create\"){urlArray=[InstitutionCategory];}else{var _rsapi$post;var Institution=rsapi.post(\"/institution/getActiveInstitutionById\",(_rsapi$post={},_defineProperty(_rsapi$post,primaryKeyName,masterData.selectedInstitution[primaryKeyName]),_defineProperty(_rsapi$post,\"userinfo\",userInfo),_rsapi$post));urlArray=[InstitutionCategory,Institution];}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var selectedRecord={};var institutioncategoryMap=constructOptionList(response[0].data||[],\"ninstitutioncatcode\",\"sinstitutioncatname\",undefined,undefined,false);var InstitutionCategory=institutioncategoryMap.get(\"OptionList\");selectedRecord={\"ninstitutioncatcode\":{\"value\":masterData.SelectedInstitutionCategory.ninstitutioncatcode,\"label\":masterData.SelectedInstitutionCategory.sinstitutioncatname}};var institutionCategory=[];if(operation===\"update\"){selectedRecord=response[1].data;selectedRecord[\"ninstitutioncatcode\"]={label:selectedRecord.sinstitutioncatname,value:selectedRecord.ninstitutioncatcode};institutionCategory.push({\"value\":response[0].data[\"ninstitutioncatcode\"],\"label\":response[0].data[\"sinstitutioncatname\"]});//selectedRecord[\"ninstitutioncatcode\"] = institutionCategory[0];\n}dispatch({type:DEFAULT_RETURN,payload:{InstitutionCategory:InstitutionCategory,isOpen:true,selectedRecord:selectedRecord,operation:operation,screenName:screenName,openModal:true,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{toast.warn(intl.formatMessage({id:\"IDS_CONFIGINSTITUTIONCATAGORY\"}));}};}export var getInstitutionSiteData=function getInstitutionSiteData(methodParam){return function(dispatch){dispatch(initRequest(true));var url='';var urlArray=[];var selectedRecord={};var institutionSiteService=rsapi.post(\"institution/getInstitutionSiteCombo\",{userinfo:methodParam.userInfo,ninstitutioncode:methodParam.instItem.ninstitutioncode});// url = \"/institution/getInstitutionSiteCombo\";\n// return rsapi.post(url, {\"userinfo\": methodParam.userInfo})\nif(methodParam.operation===\"create\"){urlArray=[institutionSiteService];}else{var _rsapi$post2;var _url=methodParam.inputParam.classUrl+\"/getActiveInstitutionSiteById\";var institutionSiteById=rsapi.post(_url,(_rsapi$post2={\"ninstitutioncode\":methodParam.instItem.ninstitutioncode},_defineProperty(_rsapi$post2,methodParam.primaryKeyField,methodParam.primaryKeyValue),_defineProperty(_rsapi$post2,\"userinfo\",methodParam.userInfo),_rsapi$post2));var cityService=rsapi.post(\"institution/getCity\",{\"ndistrictcode\":methodParam.editRow.ndistrictcode,\"userinfo\":methodParam.userInfo});var districtService=rsapi.post(\"institution/getDistrict\",{\"nregioncode\":methodParam.editRow.nregioncode,\"userinfo\":methodParam.userInfo});urlArray=[institutionSiteService,institutionSiteById,cityService,districtService];//selectedId = methodParam.primaryKeyValue;\n}Axios.all(urlArray).then(function(response){var cityMap=[];var districtMap=[];var cityList=[];var districtList=[];var siteMap=constructOptionList(response[0].data.Site||[],\"nsitecode\",\"ssitename\",undefined,undefined,false);var regionMap=constructOptionList(response[0].data.Region||[],\"nregioncode\",\"sregionname\",undefined,undefined,false);var countryMap=constructOptionList(response[0].data.Country||[],\"ncountrycode\",\"scountryname\",undefined,undefined,false);if(methodParam.operation===\"update\"){cityMap=constructOptionList(response[2].data.cityList||[],\"ncitycode\",\"scityname\",undefined,undefined,false);districtMap=constructOptionList(response[3].data.districtList||[],\"ndistrictcode\",\"sdistrictname\",undefined,undefined,false);cityList=cityMap.get(\"OptionList\");districtList=districtMap.get(\"OptionList\");}var Site=siteMap.get(\"OptionList\");var Region=regionMap.get(\"OptionList\");var Country=countryMap.get(\"OptionList\");if(methodParam.operation===\"update\"){selectedRecord=response[1].data;selectedRecord[\"ncountrycode\"]=getComboLabelValue(selectedRecord,response[0].data.Country,\"ncountrycode\",\"scountryname\");selectedRecord[\"ndistrictcode\"]=getComboLabelValue(selectedRecord,response[3].data.districtList,\"ndistrictcode\",\"sdistrictname\");selectedRecord[\"ncitycode\"]=getComboLabelValue(selectedRecord,response[2].data.cityList,\"ncitycode\",\"scityname\");selectedRecord[\"nsitecode\"]={\"label\":selectedRecord.ssitename,\"value\":selectedRecord.nregionalsitecode};selectedRecord[\"nregioncode\"]=getComboLabelValue(selectedRecord,response[0].data.Region,\"nregioncode\",\"sregionname\");}else{selectedRecord=methodParam.selectedRecord;selectedRecord[\"nsitecode\"]=siteMap.get(\"DefaultValue\");selectedRecord[\"ssitecode\"]=siteMap.get(\"DefaultValue\")['item']['ssitecode'];}dispatch({type:DEFAULT_RETURN,payload:{cityList:cityList,districtList:districtList,Site:Site,Region:Region,Country:Country,isOpen:true,selectedRecord:selectedRecord,operation:methodParam.operation,screenName:methodParam.screenName,//openModal: true,\nncontrolCode:methodParam.ncontrolCode,instItem:methodParam.instItem,loading:false,openChildModal:true,selectedId:methodParam.primaryKeyValue// displayName: methodParam.screenName\n}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===417){toast.info(error.response.data);}else{toast.error(error.message);}});};};export var addInstitutionFile=function addInstitutionFile(inputParam){return function(dispatch){dispatch(initRequest(true));var urlArray=[rsapi.post(\"/linkmaster/getLinkMaster\",{userinfo:inputParam.userInfo})];if(inputParam.operation===\"update\"){urlArray.push(rsapi.post(\"/institution/getInstitutionFileById\",{userinfo:inputParam.userInfo,institutionfile:inputParam.selectedRecord}));}Axios.all(urlArray).then(function(response){var _payload;var linkMap=constructOptionList(response[0].data.LinkMaster,\"nlinkcode\",\"slinkname\",false,false,true);var linkmaster=linkMap.get(\"OptionList\");var selectedRecord={};var defaultLink=linkmaster.filter(function(items){return items.item.ndefaultlink===transactionStatus.YES;});var disabled=false;var editObject={};if(inputParam.operation===\"update\"){editObject=response[1].data;var nlinkcode={};var link={};if(editObject.nattachmenttypecode===attachmentType.LINK){nlinkcode={\"label\":editObject.slinkname,\"value\":editObject.nlinkcode};link={slinkfilename:editObject.sfilename,slinkdescription:editObject.sfiledesc,nlinkdefaultstatus:editObject.ndefaultstatus,sfilesize:'',nfilesize:0,ndefaultstatus:4,sfilename:''};}else{nlinkcode=defaultLink.length>0?defaultLink[0]:\"\";//{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\nlink={slinkfilename:'',slinkdescription:'',nlinkdefaultstatus:4,sfilesize:editObject.sfilesize,nfilesize:editObject.nfilesize,ndefaultstatus:editObject.ndefaultstatus,sfilename:editObject.sfilename,sfiledesc:editObject.sfiledesc};}selectedRecord=_objectSpread(_objectSpread({},link),{},{ninstitutionfilecode:editObject.ninstitutionfilecode,nattachmenttypecode:editObject.nattachmenttypecode,// sfiledesc:editObject.sfiledesc,\n//...editObject,\nnlinkcode:nlinkcode// disabled: true\n});}else{selectedRecord={nattachmenttypecode:response[0].data.AttachmentType.length>0?response[0].data.AttachmentType[0].nattachmenttypecode:attachmentType.FTP,nlinkcode:defaultLink.length>0?defaultLink[0]:\"\",//{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\ndisabled:disabled};}dispatch({type:DEFAULT_RETURN,payload:(_payload={},_defineProperty(_payload,inputParam.modalName,true),_defineProperty(_payload,\"operation\",inputParam.operation),_defineProperty(_payload,\"screenName\",inputParam.screenName),_defineProperty(_payload,\"ncontrolCode\",inputParam.ncontrolCode),_defineProperty(_payload,\"selectedRecord\",selectedRecord),_defineProperty(_payload,\"loading\",false),_defineProperty(_payload,\"linkMaster\",linkmaster),_defineProperty(_payload,\"showSaveContinue\",false),_defineProperty(_payload,\"openChildModal\",true),_defineProperty(_payload,\"editFiles\",editObject.nattachmenttypecode===attachmentType.FTP?editObject:{}),_payload)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};export var changeInstitutionCategoryFilter=function changeInstitutionCategoryFilter(inputParam,FilterInstitutionCategory,defaultInstitutionCategory){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/institution/get\"+inputParam.methodUrl,inputParam.inputData).then(function(response){var masterData=response.data;sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterData:_objectSpread(_objectSpread({},masterData),{},{FilterInstitutionCategory:FilterInstitutionCategory,defaultInstitutionCategory:defaultInstitutionCategory.ninstitutioncatcode.item?defaultInstitutionCategory.ninstitutioncatcode.item:defaultInstitutionCategory,SelectedInstitutionCategory:defaultInstitutionCategory.ninstitutioncatcode.item?defaultInstitutionCategory.ninstitutioncatcode.item:defaultInstitutionCategory})}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error.message);});};};export function getDistComboServices(methodParam){return function(dispatch){var URL=[];URL=rsapi.post(\"/institution/getDistrict\",{\"userinfo\":methodParam.inputData.userinfo,\"nregioncode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){var districtList;var districtMap=constructOptionList(response[0].data['districtList']||[],\"ndistrictcode\",\"sdistrictname\",undefined,undefined,false);districtList=districtMap.get(\"OptionList\");var cityList=undefined;dispatch({type:DEFAULT_RETURN,payload:{districtList:districtList,loading:false,data:undefined,dataState:undefined,cityList:cityList}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getCitComboServices(methodParam){return function(dispatch){var URL=[];URL=rsapi.post(\"/institution/getCity\",{\"userinfo\":methodParam.inputData.userinfo,\"ndistrictcode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){var cityMap=constructOptionList(response[0].data['cityList']||[],\"ncitycode\",\"scityname\",undefined,undefined,false);var cityList=cityMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{cityList:cityList,loading:false,data:undefined,dataState:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/InstitutionAction.js"],"names":["initRequest","rsapi","sortData","getComboLabelValue","DEFAULT_RETURN","toast","Axios","constructOptionList","intl","attachmentType","transactionStatus","getInstitutionDetail","institution","userInfo","masterData","dispatch","post","ninstitutioncode","userinfo","then","response","data","type","payload","operation","modalName","undefined","loading","catch","error","status","message","warn","getInstitutionCombo","screenName","primaryKeyName","ncontrolCode","SelectedInstitutionCategory","urlArray","InstitutionCategory","Institution","selectedInstitution","all","selectedRecord","institutioncategoryMap","get","ninstitutioncatcode","sinstitutioncatname","institutionCategory","label","value","push","isOpen","openModal","formatMessage","id","getInstitutionSiteData","methodParam","url","institutionSiteService","instItem","inputParam","classUrl","institutionSiteById","primaryKeyField","primaryKeyValue","cityService","editRow","ndistrictcode","districtService","nregioncode","cityMap","districtMap","cityList","districtList","siteMap","Site","regionMap","Region","countryMap","Country","ssitename","nregionalsitecode","openChildModal","selectedId","info","addInstitutionFile","institutionfile","linkMap","LinkMaster","linkmaster","defaultLink","filter","items","item","ndefaultlink","YES","disabled","editObject","nlinkcode","link","nattachmenttypecode","LINK","slinkname","slinkfilename","sfilename","slinkdescription","sfiledesc","nlinkdefaultstatus","ndefaultstatus","sfilesize","nfilesize","length","ninstitutionfilecode","AttachmentType","FTP","changeInstitutionCategoryFilter","FilterInstitutionCategory","defaultInstitutionCategory","methodUrl","inputData","getDistComboServices","URL","primarykey","dataState","getCitComboServices"],"mappings":"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","sourcesContent":["import { initRequest } from \"./LoginAction\";\r\nimport rsapi from \"../rsapi\";\r\nimport { sortData,getComboLabelValue } from \"../components/CommonScript\";\r\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\r\nimport { toast } from 'react-toastify';\r\nimport Axios from \"axios\";\r\nimport { constructOptionList } from \"../components/CommonScript\";\r\nimport { intl} from '../components/App';\r\nimport { attachmentType,transactionStatus } from \"../components/Enumeration\";\r\n\r\nexport function getInstitutionDetail (institution, userInfo, masterData) {\r\n    return function (dispatch) {   \r\n    dispatch(initRequest(true));\r\n    return rsapi.post(\"institution/getSelectedInstitutionDetail\", {ninstitutioncode:institution.ninstitutioncode, userinfo:userInfo})\r\n   .then(response=>{     \r\n        masterData = {...masterData, ...response.data};       \r\n        sortData(masterData);\r\n        dispatch({type: DEFAULT_RETURN, payload:{masterData, operation:null, modalName:undefined, \r\n             loading:false}});   \r\n   })\r\n   .catch(error=>{\r\n        dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n       if (error.response.status === 500){\r\n           toast.error(error.message);\r\n       } \r\n       else{               \r\n           toast.warn(error.response.data);\r\n       }  \r\n  \r\n   })\r\n}}\r\nexport function getInstitutionCombo(screenName, operation, primaryKeyName, masterData, userInfo, ncontrolCode) {\r\n    return function (dispatch) {\r\n        if (masterData.SelectedInstitutionCategory!==null) {\r\n        let urlArray = [];\r\n        const InstitutionCategory = rsapi.post(\"/institution/getInstitutionCategory\", {\"userinfo\": userInfo});\r\n        if (operation === \"create\") {\r\n            urlArray = [InstitutionCategory];\r\n\r\n        } else {\r\n            const Institution = rsapi.post(\"/institution/getActiveInstitutionById\", {\r\n                [primaryKeyName]: masterData.selectedInstitution[primaryKeyName],\r\n                \"userinfo\": userInfo\r\n            });\r\n            urlArray = [InstitutionCategory,Institution];\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord ={};\r\n                const institutioncategoryMap = constructOptionList(response[0].data || [], \"ninstitutioncatcode\",\r\n                    \"sinstitutioncatname\", undefined, undefined, false);        \r\n\r\n                const InstitutionCategory = institutioncategoryMap.get(\"OptionList\");              \r\n\r\n                 selectedRecord = {\"ninstitutioncatcode\": {\r\n                            \"value\": masterData.SelectedInstitutionCategory.ninstitutioncatcode,\r\n                             \"label\": masterData.SelectedInstitutionCategory.sinstitutioncatname\r\n                         }};                \r\n                let institutionCategory = [];\r\n                if (operation === \"update\") {\r\n                    selectedRecord = response[1].data;\r\n                    selectedRecord[\"ninstitutioncatcode\"] ={label:selectedRecord.sinstitutioncatname,value:selectedRecord.ninstitutioncatcode}\r\n                    institutionCategory.push({\r\n                        \"value\": response[0].data[\"ninstitutioncatcode\"],\r\n                        \"label\": response[0].data[\"sinstitutioncatname\"]\r\n                    });\r\n                    //selectedRecord[\"ninstitutioncatcode\"] = institutionCategory[0];\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        InstitutionCategory,                       \r\n                        isOpen: true,\r\n                        selectedRecord: selectedRecord,\r\n                        operation: operation,\r\n                        screenName: screenName,\r\n                        openModal: true,\r\n                        ncontrolCode: ncontrolCode,\r\n                        loading: false\r\n                       \r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n        }\r\n        else{\r\n            toast.warn(intl.formatMessage({ id: \"IDS_CONFIGINSTITUTIONCATAGORY\" }));\r\n        }\r\n    }\r\n}\r\n\r\nexport const getInstitutionSiteData = (methodParam) => {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let url = ''\r\n        let urlArray = [];\r\n        let selectedRecord = {};\r\n        const institutionSiteService = rsapi.post(\"institution/getInstitutionSiteCombo\",{userinfo:methodParam.userInfo,ninstitutioncode:methodParam.instItem.ninstitutioncode});\r\n\r\n        // url = \"/institution/getInstitutionSiteCombo\";\r\n\r\n        // return rsapi.post(url, {\"userinfo\": methodParam.userInfo})\r\n        if(methodParam.operation === \"create\"){\r\n            urlArray=[institutionSiteService];\r\n        }else{\r\n            const url = methodParam.inputParam.classUrl+ \"/getActiveInstitutionSiteById\";       \r\n            const institutionSiteById =  rsapi.post(url, {\"ninstitutioncode\":methodParam.instItem.ninstitutioncode, [methodParam.primaryKeyField] :methodParam.primaryKeyValue, \"userinfo\": methodParam.userInfo} );\r\n            const cityService =  rsapi.post(\"institution/getCity\", {\"ndistrictcode\":methodParam.editRow.ndistrictcode,  \"userinfo\": methodParam.userInfo} );\r\n            const districtService =  rsapi.post(\"institution/getDistrict\", {\"nregioncode\":methodParam.editRow.nregioncode,  \"userinfo\": methodParam.userInfo} );\r\n            urlArray = [institutionSiteService, institutionSiteById,cityService,districtService];\r\n            //selectedId = methodParam.primaryKeyValue;\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n              let cityMap=[];\r\n              let districtMap=[];\r\n              let cityList=[];\r\n              let districtList=[];\r\n                const siteMap = constructOptionList(response[0].data.Site || [], \"nsitecode\",\r\n                    \"ssitename\", undefined, undefined, false);                \r\n\r\n                const regionMap =    constructOptionList(response[0].data.Region || [], \"nregioncode\",\r\n                \"sregionname\", undefined, undefined, false);\r\n\r\n                const countryMap = constructOptionList(response[0].data.Country || [], \"ncountrycode\",\r\n                    \"scountryname\", undefined, undefined, false);\r\n                    if(methodParam.operation === \"update\"){\r\n               cityMap = constructOptionList(response[2].data.cityList || [], \"ncitycode\",\r\n                    \"scityname\", undefined, undefined, false);\r\n              districtMap = constructOptionList(response[3].data.districtList || [], \"ndistrictcode\",\r\n                    \"sdistrictname\", undefined, undefined, false);\r\n                    cityList = cityMap.get(\"OptionList\");\r\n                    districtList = districtMap.get(\"OptionList\");\r\n                    }\r\n                const Site = siteMap.get(\"OptionList\");\r\n                const Region = regionMap.get(\"OptionList\");               \r\n                const Country = countryMap.get(\"OptionList\");\r\n                \r\n                \r\n                \r\n                if(methodParam.operation === \"update\"){\r\n                    selectedRecord =response[1].data;\r\n                    selectedRecord[\"ncountrycode\"] = getComboLabelValue(selectedRecord, response[0].data.Country, \r\n                        \"ncountrycode\", \"scountryname\");  \r\n                        selectedRecord[\"ndistrictcode\"] = getComboLabelValue(selectedRecord, response[3].data.districtList, \r\n                            \"ndistrictcode\", \"sdistrictname\");\r\n                         selectedRecord[\"ncitycode\"] = getComboLabelValue(selectedRecord, response[2].data.cityList, \r\n                                \"ncitycode\", \"scityname\");\r\n                    selectedRecord[\"nsitecode\"] = {\"label\":selectedRecord.ssitename,\"value\":selectedRecord.nregionalsitecode}\r\n                    selectedRecord[\"nregioncode\"] = getComboLabelValue(selectedRecord, response[0].data.Region, \r\n                        \"nregioncode\", \"sregionname\");    \r\n                }else{\r\n                    selectedRecord =methodParam.selectedRecord;\r\n                    selectedRecord[\"nsitecode\"] = siteMap.get(\"DefaultValue\"); \r\n                    selectedRecord[\"ssitecode\"] =siteMap.get(\"DefaultValue\")['item']['ssitecode']\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        cityList,\r\n                        districtList,\r\n                        Site,\r\n                        Region,\r\n                        Country,\r\n                        isOpen: true,\r\n                        selectedRecord,\r\n                        operation: methodParam.operation,\r\n                        screenName: methodParam.screenName,\r\n                        //openModal: true,\r\n                        ncontrolCode: methodParam.ncontrolCode,\r\n                        instItem: methodParam.instItem,\r\n                        loading: false,openChildModal:true,\r\n                        selectedId:methodParam.primaryKeyValue,\r\n                       // displayName: methodParam.screenName\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 417) {\r\n                    toast.info(error.response.data)\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const addInstitutionFile = (inputParam) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\r\n            userinfo: inputParam.userInfo\r\n        })];\r\n        if (inputParam.operation === \"update\") {\r\n            urlArray.push(rsapi.post(\"/institution/getInstitutionFileById\", {\r\n                userinfo: inputParam.userInfo,\r\n                institutionfile: inputParam.selectedRecord\r\n            }))\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\r\n                const linkmaster = linkMap.get(\"OptionList\");\r\n                let selectedRecord = {};\r\n                const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\r\n                let disabled = false;\r\n                let editObject = {};\r\n                if (inputParam.operation === \"update\") {\r\n                    editObject = response[1].data;\r\n                    let nlinkcode = {};\r\n                    let link = {};\r\n                    if (editObject.nattachmenttypecode === attachmentType.LINK) {\r\n                        nlinkcode = {\r\n                            \"label\": editObject.slinkname,\r\n                            \"value\": editObject.nlinkcode\r\n                        }\r\n\r\n                        link = {\r\n                            slinkfilename:editObject.sfilename,\r\n                            slinkdescription:editObject.sfiledesc,\r\n                            nlinkdefaultstatus:editObject.ndefaultstatus,\r\n                            sfilesize:'',\r\n                            nfilesize:0,\r\n                            ndefaultstatus:4,\r\n                            sfilename:'',\r\n                        }\r\n\r\n                    } else {\r\n                        nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\" //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\r\n                        link = {\r\n                            slinkfilename:'',\r\n                            slinkdescription:'',\r\n                            nlinkdefaultstatus:4,\r\n                            sfilesize:editObject.sfilesize,\r\n                            nfilesize:editObject.nfilesize,\r\n                            ndefaultstatus:editObject.ndefaultstatus,\r\n                            sfilename:editObject.sfilename,\r\n                            sfiledesc:editObject.sfiledesc\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n                    selectedRecord = {\r\n                        ...link,\r\n                        ninstitutionfilecode:editObject.ninstitutionfilecode,\r\n                        nattachmenttypecode:editObject.nattachmenttypecode,\r\n                       // sfiledesc:editObject.sfiledesc,\r\n                        //...editObject,\r\n                        nlinkcode,\r\n                       // disabled: true\r\n                    };\r\n                } else {\r\n                    selectedRecord = {\r\n                        nattachmenttypecode:response[0].data.AttachmentType.length>0?\r\n                        response[0].data.AttachmentType[0].nattachmenttypecode:attachmentType.FTP,\r\n                        nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\", //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\r\n                        disabled\r\n                    };\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        [inputParam.modalName]: true,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolCode,\r\n                        selectedRecord,\r\n                        loading: false,\r\n                        linkMaster: linkmaster,\r\n                        showSaveContinue: false,\r\n                       // openModal: true\r\n                        openChildModal:true,\r\n                        editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport const changeInstitutionCategoryFilter = (inputParam,FilterInstitutionCategory,defaultInstitutionCategory) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/institution/get\" + inputParam.methodUrl, inputParam.inputData)\r\n            .then(response => {\r\n                const masterData = response.data\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            FilterInstitutionCategory,\r\n                            defaultInstitutionCategory:defaultInstitutionCategory.ninstitutioncatcode.item?defaultInstitutionCategory.ninstitutioncatcode.item:defaultInstitutionCategory,\r\n                            SelectedInstitutionCategory:defaultInstitutionCategory.ninstitutioncatcode.item?defaultInstitutionCategory.ninstitutioncatcode.item:defaultInstitutionCategory\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}\r\nexport function getDistComboServices(methodParam) {\r\n    return function (dispatch) {\r\n        let URL = []; \r\n            URL=rsapi.post(\"/institution/getDistrict\", { \"userinfo\": methodParam.inputData.userinfo, \"nregioncode\":  methodParam.inputData.primarykey  })\r\n         dispatch(initRequest(true));\r\n        Axios.all([URL])\r\n            .then(response => {\r\n                let districtList; \r\n                const districtMap = constructOptionList(response[0].data['districtList'] || [], \"ndistrictcode\",\r\n                \"sdistrictname\", undefined, undefined, false);               \r\n                  districtList = districtMap.get(\"OptionList\"); \r\n                  const cityList =undefined;\r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n                     { districtList, loading: false, data: undefined, dataState: undefined ,cityList} })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getCitComboServices(methodParam) {\r\n    return function (dispatch) {\r\n        let URL=[];\r\n            URL = rsapi.post(\"/institution/getCity\", { \"userinfo\": methodParam.inputData.userinfo, \"ndistrictcode\":  methodParam.inputData.primarykey  })\r\n         dispatch(initRequest(true));\r\n        Axios.all([URL])\r\n            .then(response => {\r\n                 const cityMap = constructOptionList(response[0].data['cityList'] || [], \"ncitycode\",\r\n                 \"scityname\", undefined, undefined, false);               \r\n                 const  cityList = cityMap.get(\"OptionList\"); \r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n                     { cityList,loading: false, data: undefined, dataState: undefined } })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}