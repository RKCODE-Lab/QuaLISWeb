{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Draggable, canUseDOM } from '@progress/kendo-react-common';\nimport { TreeListRow } from './TreeListRow';\n\nvar RowDragClue = function RowDragClue(props) {\n  return props.visible && canUseDOM ? ReactDOM.createPortal(React.createElement(\"div\", {\n    className: \"k-header k-drag-clue\",\n    style: {\n      display: 'block',\n      position: 'absolute',\n      zIndex: 20000,\n      padding: '8px 12px',\n      top: props.top + 'px',\n      left: props.left + 'px'\n    }\n  }, React.createElement(\"span\", {\n    className: 'k-icon k-drag-status ' + (props.allowDrop ? 'k-i-add' : 'k-i-cancel') + ' k-icon-with-modifier'\n  }, React.createElement(\"span\", {\n    className: \"k-icon k-icon-modifier\"\n  })), props.text), document.body) : null;\n};\n\nfunction targetRowIndex(event, parent, currentDocument) {\n  if (!event.originalEvent) {\n    return -1;\n  }\n\n  var row = targetElement(event, 'tr', currentDocument);\n\n  if (row) {\n    var rows = parent ? parent.childNodes : [];\n\n    for (var i = 0; i < rows.length; i++) {\n      if (rows[i] === row) {\n        return i;\n      }\n    }\n  }\n\n  return -1;\n}\n\nfunction targetElement(event, closest, currentDocument) {\n  var target = currentDocument ? currentDocument.elementFromPoint(event.clientX, event.clientY) : null;\n  return closest && target ? target.closest(closest) : null;\n}\n\nvar treelist = '.k-widget.k-grid';\nvar defaultClueState = {\n  visible: false,\n  top: 0,\n  left: 0,\n  text: '',\n  allowDrop: false\n};\n/**\n * The TreeList draggable row component.\n */\n\nvar TreeListDraggableRow = function (_super) {\n  __extends(TreeListDraggableRow, _super);\n\n  function TreeListDraggableRow() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.state = {\n      clueProps: __assign({}, defaultClueState)\n    };\n    _this.draggable = React.createRef();\n    _this.dragged = null;\n    _this.draggedOver = null;\n\n    _this.onPress = function () {\n      return _this.dragged = _this.props.level;\n    };\n\n    _this.onDrag = function (args) {\n      if (!canUseDOM) {\n        return;\n      }\n\n      var element = _this.draggable.current && _this.draggable.current.element;\n      var ownerDocument = element ? element.ownerDocument : document;\n\n      if (!ownerDocument) {\n        return;\n      }\n\n      var event = args.event;\n      var dragged = _this.dragged;\n\n      if (element && dragged) {\n        if (!event.isTouch && event.type !== 'scroll') {\n          event.originalEvent.preventDefault();\n        }\n\n        var hovered_1 = _this.props.levels[targetRowIndex(event, element.parentNode, ownerDocument)];\n\n        _this.draggedOver = hovered_1;\n        var allowDrop = hovered_1 ? !dragged.every(function (num, i) {\n          return num === hovered_1[i];\n        }) : Boolean(targetElement(event, treelist, ownerDocument));\n\n        _this.setState({\n          clueProps: {\n            visible: true,\n            top: event.pageY + 10,\n            left: event.pageX,\n            text: element.innerText,\n            allowDrop: allowDrop\n          }\n        });\n\n        if (_this.props.onDrag) {\n          _this.props.onDrag.call(undefined, {\n            nativeEvent: event.originalEvent,\n            dragged: dragged,\n            draggedOver: hovered_1,\n            draggedItem: _this.props.dataItem\n          });\n        }\n      }\n    };\n\n    _this.onRelease = function (args) {\n      var event = args.event;\n\n      if (_this.dragged) {\n        var dragged = __spreadArray([], _this.dragged, true);\n\n        var draggedOver = _this.draggedOver && __spreadArray([], _this.draggedOver, true);\n\n        var allowDrop = _this.state.clueProps.allowDrop;\n        _this.dragged = null;\n        _this.draggedOver = null;\n\n        _this.setState({\n          clueProps: __assign({}, defaultClueState)\n        });\n\n        var draggedItem = _this.props.dataItem;\n\n        if (allowDrop && _this.props.onDrop) {\n          _this.props.onDrop.call(undefined, {\n            nativeEvent: event.originalEvent,\n            dragged: dragged,\n            draggedOver: draggedOver,\n            draggedItem: draggedItem\n          });\n        }\n      }\n    };\n\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n\n\n  TreeListDraggableRow.prototype.render = function () {\n    var clueProps = this.state.clueProps;\n    return React.createElement(React.Fragment, null, React.createElement(Draggable, {\n      ref: this.draggable,\n      onPress: this.onPress,\n      onDrag: this.onDrag,\n      onRelease: this.onRelease\n    }, React.createElement(TreeListRow, __assign({}, this.props))), React.createElement(RowDragClue, __assign({}, clueProps)));\n  };\n\n  return TreeListDraggableRow;\n}(React.Component);\n\nexport { TreeListDraggableRow };","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/node_modules/@progress/kendo-react-treelist/dist/es/rows/TreeListDraggableRow.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__spreadArray","to","from","pack","l","ar","slice","concat","React","ReactDOM","Draggable","canUseDOM","TreeListRow","RowDragClue","props","visible","createPortal","createElement","className","style","display","position","zIndex","padding","top","left","allowDrop","text","document","body","targetRowIndex","event","parent","currentDocument","originalEvent","row","targetElement","rows","childNodes","closest","target","elementFromPoint","clientX","clientY","treelist","defaultClueState","TreeListDraggableRow","_super","_this","state","clueProps","draggable","createRef","dragged","draggedOver","onPress","level","onDrag","args","element","current","ownerDocument","isTouch","type","preventDefault","hovered_1","levels","parentNode","every","num","Boolean","setState","pageY","pageX","innerText","undefined","nativeEvent","draggedItem","dataItem","onRelease","onDrop","render","Fragment","ref","Component"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Draggable, canUseDOM } from '@progress/kendo-react-common';\nimport { TreeListRow } from './TreeListRow';\nvar RowDragClue = function (props) {\n    return props.visible && canUseDOM ?\n        ReactDOM.createPortal((React.createElement(\"div\", { className: \"k-header k-drag-clue\", style: {\n                display: 'block',\n                position: 'absolute',\n                zIndex: 20000,\n                padding: '8px 12px',\n                top: props.top + 'px',\n                left: props.left + 'px'\n            } },\n            React.createElement(\"span\", { className: 'k-icon k-drag-status ' + (props.allowDrop ? 'k-i-add' : 'k-i-cancel') + ' k-icon-with-modifier' },\n                React.createElement(\"span\", { className: \"k-icon k-icon-modifier\" })),\n            props.text)), document.body) : null;\n};\nfunction targetRowIndex(event, parent, currentDocument) {\n    if (!event.originalEvent) {\n        return -1;\n    }\n    var row = targetElement(event, 'tr', currentDocument);\n    if (row) {\n        var rows = parent ? parent.childNodes : [];\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i] === row) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\nfunction targetElement(event, closest, currentDocument) {\n    var target = currentDocument ? currentDocument.elementFromPoint(event.clientX, event.clientY) : null;\n    return ((closest && target) ? target.closest(closest) : null);\n}\nvar treelist = '.k-widget.k-grid';\nvar defaultClueState = {\n    visible: false,\n    top: 0,\n    left: 0,\n    text: '',\n    allowDrop: false\n};\n/**\n * The TreeList draggable row component.\n */\nvar TreeListDraggableRow = /** @class */ (function (_super) {\n    __extends(TreeListDraggableRow, _super);\n    function TreeListDraggableRow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * @hidden\n         */\n        _this.state = {\n            clueProps: __assign({}, defaultClueState)\n        };\n        _this.draggable = React.createRef();\n        _this.dragged = null;\n        _this.draggedOver = null;\n        _this.onPress = function () { return _this.dragged = _this.props.level; };\n        _this.onDrag = function (args) {\n            if (!canUseDOM) {\n                return;\n            }\n            var element = _this.draggable.current && _this.draggable.current.element;\n            var ownerDocument = element ? element.ownerDocument : document;\n            if (!ownerDocument) {\n                return;\n            }\n            var event = args.event;\n            var dragged = _this.dragged;\n            if (element && dragged) {\n                if (!event.isTouch && event.type !== 'scroll') {\n                    event.originalEvent.preventDefault();\n                }\n                var hovered_1 = _this.props.levels[targetRowIndex(event, element.parentNode, ownerDocument)];\n                _this.draggedOver = hovered_1;\n                var allowDrop = hovered_1 ?\n                    !dragged.every(function (num, i) { return num === hovered_1[i]; }) :\n                    Boolean(targetElement(event, treelist, ownerDocument));\n                _this.setState({\n                    clueProps: {\n                        visible: true,\n                        top: (event.pageY + 10),\n                        left: event.pageX,\n                        text: element.innerText,\n                        allowDrop: allowDrop\n                    }\n                });\n                if (_this.props.onDrag) {\n                    _this.props.onDrag.call(undefined, {\n                        nativeEvent: event.originalEvent,\n                        dragged: dragged,\n                        draggedOver: hovered_1,\n                        draggedItem: _this.props.dataItem\n                    });\n                }\n            }\n        };\n        _this.onRelease = function (args) {\n            var event = args.event;\n            if (_this.dragged) {\n                var dragged = __spreadArray([], _this.dragged, true);\n                var draggedOver = _this.draggedOver && __spreadArray([], _this.draggedOver, true);\n                var allowDrop = _this.state.clueProps.allowDrop;\n                _this.dragged = null;\n                _this.draggedOver = null;\n                _this.setState({ clueProps: __assign({}, defaultClueState) });\n                var draggedItem = _this.props.dataItem;\n                if (allowDrop && _this.props.onDrop) {\n                    _this.props.onDrop.call(undefined, {\n                        nativeEvent: event.originalEvent,\n                        dragged: dragged,\n                        draggedOver: draggedOver,\n                        draggedItem: draggedItem\n                    });\n                }\n            }\n        };\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    TreeListDraggableRow.prototype.render = function () {\n        var clueProps = this.state.clueProps;\n        return (React.createElement(React.Fragment, null,\n            React.createElement(Draggable, { ref: this.draggable, onPress: this.onPress, onDrag: this.onDrag, onRelease: this.onRelease },\n                React.createElement(TreeListRow, __assign({}, this.props))),\n            React.createElement(RowDragClue, __assign({}, clueProps))));\n    };\n    return TreeListDraggableRow;\n}(React.Component));\nexport { TreeListDraggableRow };\n"]},"metadata":{},"sourceType":"module"}