{"ast":null,"code":"import _defineProperty from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Card,Nav,FormGroup,FormLabel}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPencilAlt,faTrashAlt,faThumbsUp,faUserLock,faClock}from'@fortawesome/free-solid-svg-icons';//,faUserTimes, faTrash\nimport{connect}from'react-redux';import{injectIntl,FormattedMessage}from'react-intl';import{toast}from'react-toastify';import{callService,crudMaster,validateEsignCredential,updateStore,getDesignTemplateMappingDetail,getDesignTemplateMappingComboService,filterColumnData,reloadDesignTemplateMapping,getTMPFilterRegType,getTMPFilterRegSubType,getTMPFilterSubmit}from'../../actions';import TemplateFilter from'./TemplateFilter';import{ContentPanel,ReadOnlyText}from'../../components/App.styles';import{getControlMap,showEsign,convertDateValuetoString,constructOptionList}from'../../components/CommonScript';//searchData, sortData,\nimport ListMaster from'../../components/list-master/list-master.component';// import DateTimePicker from '../../components/date-time-picker/date-time-picker.component';\nimport SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import AddDesignTemplateMapping from'./AddDesignTemplateMapping';import Esign from'../../pages/audittrail/Esign';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import BreadcrumbComponent from'../../components/Breadcrumb.Component';import{ListWrapper}from'../../components/client-group.styles';import{formCode,transactionStatus}from'../../components/Enumeration';import{Affix}from'rsuite';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import ReactTooltip from'react-tooltip';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var DesignTemplateMapping=/*#__PURE__*/function(_React$Component){_inherits(DesignTemplateMapping,_React$Component);var _super=_createSuper(DesignTemplateMapping);function DesignTemplateMapping(props){var _this;_classCallCheck(this,DesignTemplateMapping);_this=_super.call(this,props);// const dataState = {\n//     skip: 0,\n//     take: 10,\n// };\n_this.filterComboChange=function(event,fieldname){if(event!==null){// let uRL = \"\";\nvar inputData=[];if(fieldname===\"sampleType\"){inputData={userinfo:_this.props.Login.userInfo,nflag:1,nsampletypecode:parseInt(event.value)};var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultsampletype:event});var inputParam={masterData:masterData,inputData:inputData};_this.props.getTMPFilterRegType(inputParam);}else if(fieldname===\"registrationType\"){inputData={userinfo:_this.props.Login.userInfo,nregtypecode:parseInt(event.value),nsampletypecode:_this.props.Login.masterData.defaultsampletype.value};var _masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultregtype:event});var _inputParam={masterData:_masterData,inputData:inputData};_this.props.getTMPFilterRegSubType(_inputParam);}else{var _masterData2=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultregsubtype:event});var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:_masterData2}};_this.props.updateStore(updateInfo);}}};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputData={userinfo:_this.props.Login.userInfo,nregtypecode:parseInt(_this.props.Login.masterData.realRegTypeValue?_this.props.Login.masterData.realRegTypeValue.value||-1:-1),nregsubtypecode:parseInt(_this.props.Login.masterData.realRegSubTypeValue?_this.props.Login.masterData.realRegSubTypeValue.value||-1:-1),nsampletypecode:_this.props.Login.masterData.realSampleValue.value};var inputParam={masterData:_this.props.Login.masterData,inputData:inputData};_this.props.getTMPFilterSubmit(inputParam);};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};_this.onFilterSubmit=function(){var inputData={userinfo:_this.props.Login.userInfo,nregtypecode:parseInt(_this.props.Login.masterData.defaultregtype?_this.props.Login.masterData.defaultregtype.value||-1:-1),nregsubtypecode:parseInt(_this.props.Login.masterData.defaultregsubtype?_this.props.Login.masterData.defaultregsubtype.value||-1:-1),nsampletypecode:_this.props.Login.masterData.defaultsampletype.value};var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{realSampleValue:_this.props.Login.masterData.defaultsampletype,realRegTypeValue:_this.props.Login.masterData.defaultregtype,realRegSubTypeValue:_this.props.Login.masterData.defaultregsubtype});var inputParam={masterData:masterData,inputData:inputData};_this.props.getTMPFilterSubmit(inputParam);};_this.onApproveClick=function(){if(_this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus!==transactionStatus.RETIRED){var _inputParam2;var ncontrolCode=_this.state.controlMap.has(\"ApproveDesignTemplateMapping\")&&_this.state.controlMap.get(\"ApproveDesignTemplateMapping\").ncontrolcode;var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam=undefined;inputData[\"designtemplatemapping\"]={\"ndesigntemplatemappingcode\":_this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"]?_this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"].Value:\"\"};inputData[\"designtemplatemapping\"]=_this.props.Login.masterData.selectedDesignTemplateMapping;postParam={inputListName:\"DesignTemplateMapping\",selectedObject:\"selectedDesignTemplateMapping\",primaryKeyField:\"ndesigntemplatemappingcode\"};var inputParam=(_inputParam2={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:'designtemplatemapping',methodUrl:\"DesignTemplateMapping\"},_defineProperty(_inputParam2,\"inputData\",inputData),_defineProperty(_inputParam2,\"operation\",\"approve\"),_defineProperty(_inputParam2,\"postParam\",postParam),_inputParam2);var saveType;var masterData=_this.props.Login.masterData;var esignNeeded=showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType,openModal:true,operation:\"approve\"}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_TEMPLATERETIRED\"}));}};_this.ConfirmDelete=function(){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.deleteTemplate();});};_this.deleteTemplate=function(){if(_this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus===transactionStatus.DRAFT){var _inputParam3;var ncontrolCode=_this.state.controlMap.has(\"DeleteDesignTemplateMapping\")&&_this.state.controlMap.get(\"DeleteDesignTemplateMapping\").ncontrolcode;var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam=undefined;inputData[\"designtemplatemapping\"]={\"ndesigntemplatemappingcode\":_this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"]?_this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"].Value:\"\"};inputData[\"designtemplatemapping\"]=_this.props.Login.masterData.selectedDesignTemplateMapping;postParam={inputListName:\"DesignTemplateMapping\",selectedObject:\"selectedDesignTemplateMapping\",primaryKeyField:\"ndesigntemplatemappingcode\"};var inputParam=(_inputParam3={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:'designtemplatemapping',methodUrl:\"DesignTemplateMapping\"},_defineProperty(_inputParam3,\"inputData\",inputData),_defineProperty(_inputParam3,\"operation\",\"delete\"),_defineProperty(_inputParam3,\"postParam\",postParam),_inputParam3);var saveType;var masterData=_this.props.Login.masterData;var esignNeeded=showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType,openModal:true,operation:\"delete\"}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_DRAFTTEMPLETECANDELETED\"}));}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"approve\"||_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;}}else{openModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.handleDateChange=function(dateName,dateValue){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.getJsondata=function(templatedata){var _jsondata;var displayFields=[];var listItem=[];var gridItem=[];var gridMoreItem=[];var editable=[];templatedata&&templatedata.map(function(row){return row.children&&row.children.map(function(column){column.children&&column.children.map(function(component){component.hasOwnProperty('childern')?component.children.map(function(componentRow){displayFields.push(componentRow.label);componentRow.templatemandatory&&listItem.push(componentRow.label);if(componentRow.mandatory||componentRow.templatemandatory)gridItem.push(componentRow.label);else gridMoreItem.push(componentRow.label);if(!componentRow.templatemandatory){editable.push({label:componentRow.label,editableuntill:[17]});}}):displayFields.push(component.label);component.templatemandatory&&listItem.push(component.label);if(component.mandatory||component.templatemandatory)gridItem.push(component.label);else gridMoreItem.push(component.label);if(!component.templatemandatory){editable.push({label:component.label,editableuntill:[17]});}return null;});});});var obj={displayfields:displayFields,listitem:listItem,griditem:gridItem,gridmoreitem:gridMoreItem};var jsondata=(_jsondata={},_defineProperty(_jsondata,formCode.SAMPLEREGISTRATION,_objectSpread(_objectSpread({},obj),{},{editable:editable})),_defineProperty(_jsondata,formCode.RESULTENTRY,_objectSpread({},obj)),_defineProperty(_jsondata,formCode.APPROVAL,_objectSpread({},obj)),_jsondata);return jsondata;};_this.onSaveClick=function(saveType,formRef){var inputData=[];inputData={\"userinfo\":_this.props.Login.userInfo,\"ncontrolcode\":_this.props.Login.ncontrolCode,\"nreactregtemplatecode\":_this.state.selectedRecord.nreactregtemplatecode.value,\"nsampletypecode\":_this.props.Login.masterData.realSampleValue.value,\"nregtypecode\":_this.props.Login.masterData.realRegTypeValue?_this.props.Login.masterData.realRegTypeValue.value:-1,\"nregsubtypecode\":_this.props.Login.masterData.realRegSubTypeValue?_this.props.Login.masterData.realRegSubTypeValue.value:-1,\"jsondataobj\":_this.getJsondata(_this.state.selectedRecord.nreactregtemplatecode.item.jsondata)};// this.state.selectedRecord.nreactregtemplatecode.item.jsondata\nvar postParam=undefined;inputData[\"designtemplatemapping\"]={\"nsitecode\":_this.props.Login.userInfo.nmastersitecode};_this.designtemplatemappingFieldList.map(function(item){return inputData[\"designtemplatemapping\"][item]=_this.state.selectedRecord[item];});var inputParam={classUrl:\"designtemplatemapping\",methodUrl:\"DesignTemplateMapping\",inputData:inputData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.state={isOpen:false,designtemplatemappingData:[],masterStatus:\"\",error:\"\",selectedRecord:{},operation:\"\",screenName:undefined,userLogged:true,selectedDesignTemplateMapping:undefined,userRoleControlRights:[],controlMap:new Map(),showAccordian:true,selectedInput:\"\"};_this.searchRef=React.createRef();_this.confirmMessage=new ConfirmMessage();_this.searchFieldList=[\"sregtemplatename\"];_this.designtemplatemappingFieldList=['ndesigntemplatemappingcode','nsampletypecode','nformcode','nregtypecode','nregsubtypecode','nformwisetypecode','nreactregtemplatecode','ntransactionstatus','nversionno'];//'nmahcode',\nreturn _this;}_createClass(DesignTemplateMapping,[{key:\"render\",value:function render(){var _this2=this;var Layout=this.props.Login.masterData.selectedDesignTemplateMapping&&this.props.Login.masterData.selectedDesignTemplateMapping.jsondata;var userStatusCSS=\"outline-secondary\";if(this.props.Login.masterData.SelectedDesignTemplateMapping?this.props.Login.masterData.SelectedDesignTemplateMapping.ntransactionstatus===transactionStatus.ACTIVE||this.props.Login.masterData.SelectedDesignTemplateMapping.ntransactionstatus===transactionStatus.APPROVED:false){userStatusCSS=\"outline-success\";}else if(this.props.Login.masterData.SelectedDesignTemplateMapping&&this.props.Login.masterData.SelectedDesignTemplateMapping.ntransactionstatus===transactionStatus.RETIRED){userStatusCSS=\"outline-danger\";}var addId=this.state.controlMap.has(\"AddDesignTemplateMapping\")&&this.state.controlMap.get(\"AddDesignTemplateMapping\").ncontrolcode;var deleteId=this.state.controlMap.has(\"DeleteDesignTemplateMapping\")&&this.state.controlMap.get(\"DeleteDesignTemplateMapping\").ncontrolcode;var approveId=this.state.controlMap.has(\"ApproveDesignTemplateMapping\")&&this.state.controlMap.get(\"ApproveDesignTemplateMapping\").ncontrolcode;var filterParam={inputListName:\"DesignTemplateMapping\",selectedObject:\"SelectedDesignTemplateMapping\",primaryKeyField:\"ndesigntemplatemappingcode\",fetchUrl:\"designtemplatemapping/getDesignTemplateMapping\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,// unchangeList: [\"FromDate\", \"ToDate\"],\nsearchFieldList:this.searchFieldList};this.validationColumnList=[{\"idsName\":\"IDS_TEMPLATENAME\",\"dataField\":\"nreactregtemplatecode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];var mandatoryFields=[];this.validationColumnList.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});// let breadCrumbDataDate = convertDateValuetoString(this.props.Login.masterData && this.props.Login.masterData.FromDate,\n//     this.props.Login.masterData && this.props.Login.masterData.ToDate,\n//     this.props.Login.userInfo)\n// const breadCrumbData = [\nvar breadCrumbData=[{\"label\":\"IDS_SAMPLETYPE\",\"value\":this.props.Login.masterData.realSampleValue?this.props.Login.masterData.realSampleValue.label:\"-\"},{\"label\":\"IDS_REGTYPE\",\"value\":this.props.Login.masterData.realRegTypeValue?this.props.Login.masterData.realRegTypeValue.label:\"-\"},{\"label\":\"IDS_REGSUBTYPE\",\"value\":this.props.Login.masterData.realRegSubTypeValue?this.props.Login.masterData.realRegSubTypeValue.label:\"-\"}];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ListWrapper,{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},/*#__PURE__*/React.createElement(ReactTooltip,{place:\"bottom\",globalEventOff:\"click\",id:\"tooltip_list_wrap\"}),breadCrumbData.length>0?/*#__PURE__*/React.createElement(Affix,{top:53},/*#__PURE__*/React.createElement(BreadcrumbComponent,{breadCrumbItem:breadCrumbData})):\"\",/*#__PURE__*/React.createElement(ReactTooltip,{place:\"bottom\",globalEventOff:\"click\",id:\"tooltip_list_wrap\"}),/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster,{formatMessage:this.props.intl.formatMessage,screenName:\"DesignTemplateMapping\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.DesignTemplateMapping,getMasterDetail:function getMasterDetail(designtemplatemapping){return _this2.props.getDesignTemplateMappingDetail(designtemplatemapping,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:this.props.Login.masterData.selectedDesignTemplateMapping,primaryKeyField:\"ndesigntemplatemappingcode\",mainField:\"sregtemplatename\",firstField:\"nversionno\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData,hidePaging:true,openModal:function openModal(){return _this2.props.getDesignTemplateMappingComboService(\"DesignTemplateMapping\",\"create\",_this2.props.Login.userInfo,_this2.props.Login.masterData.realSampleValue?_this2.props.Login.masterData.realSampleValue.value:-1,_this2.props.Login.masterData.realRegTypeValue?_this2.props.Login.masterData.realRegTypeValue.value:-1,_this2.props.Login.masterData.realRegSubTypeValue?_this2.props.Login.masterData.realRegSubTypeValue.value:-1,addId);},showFilterIcon:true,showFilter:this.props.Login.showFilter,openFilter:this.openFilter,closeFilter:this.closeFilter,onFilterSubmit:this.onFilterSubmit,filterComponent:[{\"IDS_TEMPLATEFILTER\":/*#__PURE__*/React.createElement(TemplateFilter,{formatMessage:this.props.intl.formatMessage,filterSampletype:this.state.listSampletype||[],filterRegistrationType:this.state.listRegistrationType||[],filterRegistrationSubType:this.state.listRegistrationSubType||[],defaultsampletype:this.props.Login.masterData[\"defaultsampletype\"]||{},defaultregsubtype:this.props.Login.masterData[\"defaultregsubtype\"]||[],defaultregtype:this.props.Login.masterData[\"defaultregtype\"]||[],filterComboChange:this.filterComboChange})}]})),/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},this.props.Login.masterData.DesignTemplateMapping&&this.props.Login.masterData.DesignTemplateMapping.length>0&&this.props.Login.masterData.selectedDesignTemplateMapping?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,null,/*#__PURE__*/React.createElement(\"h1\",{className:\"product-title-main\"},this.props.Login.masterData.selectedDesignTemplateMapping.sregtemplatename)),/*#__PURE__*/React.createElement(Card.Subtitle,{className:\"text-muted font-weight-normal\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:10,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-outlined \".concat(this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus===transactionStatus.DRAFT?\"outline-secondary\":this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus===transactionStatus.APPROVED?\"outline-success\":\"outline-danger\",\" btn-sm mx-md-3 mx-sm-2\")},this.props.Login.masterData.selectedDesignTemplateMapping.stransdisplaystatus))),/*#__PURE__*/React.createElement(Col,{md:2},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category float-right icon-group-wrap\"},/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2\",hidden:this.state.userRoleControlRights.indexOf(approveId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_APPROVE\"}),\"data-for\":\"tooltip_list_wrap\",onClick:function onClick(){return _this2.onApproveClick();}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faThumbsUp,title:this.props.intl.formatMessage({id:\"IDS_APPROVE\"})})),/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"}),\"data-for\":\"tooltip_list_wrap\",hidden:this.state.userRoleControlRights.indexOf(deleteId)===-1// onClick={() => this.ConfirmDelete(this.state.approveId)}>\n,onClick:function onClick(){return _this2.ConfirmDelete();}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt}))))))),/*#__PURE__*/React.createElement(Card.Body,null,Layout?Layout.map(function(item){return/*#__PURE__*/React.createElement(Row,null,item.children.length>0?item.children.map(function(column){return/*#__PURE__*/React.createElement(Col,{md:12/item.children.length},column.children.map(function(component){return component.hasOwnProperty(\"children\")?/*#__PURE__*/React.createElement(Row,null,component.children.map(function(componentrow){return/*#__PURE__*/React.createElement(Col,{md:12/componentrow.length},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,componentrow.label),/*#__PURE__*/React.createElement(ReadOnlyText,null,\"-\")));})):/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,component.label),/*#__PURE__*/React.createElement(ReadOnlyText,null,\" \",\"-\"));}));}):\"\");}):\"\")):\"\"))))),this.props.Login.openModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,formatMessage:this.props.intl.formatMessage,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(AddDesignTemplateMapping,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,handleDateChange:this.handleDateChange,formatMessage:this.props.intl.formatMessage,designtemplatemappingList:this.props.Login.designtemplatemappingList,selectedDesignTemplateMapping:this.props.Login.masterData.SelectedDesignTemplateMapping||{},operation:this.props.Login.operation,userLogged:this.props.Login.userLogged,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo})}));}// onFilterSubmit = () => {\n//     this.reloadData()\n// }\n},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var updateState=false;var _this$state=this.state,selectedRecord=_this$state.selectedRecord,userRoleControlRights=_this$state.userRoleControlRights,controlMap=_this$state.controlMap,listSampletype=_this$state.listSampletype,listRegistrationType=_this$state.listRegistrationType,listRegistrationSubType=_this$state.listRegistrationSubType;if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);updateState=true;}}if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){updateState=true;selectedRecord=this.props.Login.selectedRecord;}if(this.props.Login.masterData!==previousProps.Login.masterData){updateState=true;var selectedInput={};var Taglstsampletype;var TaglistRegistrationType;var TaglistRegistrationSubType;if(this.props.Login.masterData.SampleTypes){Taglstsampletype=constructOptionList(this.props.Login.masterData.SampleTypes||[],\"nsampletypecode\",\"ssampletypename\",\"nsorter\",\"undefined\",undefined);listSampletype=Taglstsampletype.get(\"OptionList\");}if(this.props.Login.masterData.registrationTypes){TaglistRegistrationType=constructOptionList(this.props.Login.masterData.registrationTypes||[],\"nregtypecode\",\"sregtypename\",undefined,undefined,undefined);listRegistrationType=TaglistRegistrationType.get(\"OptionList\");}if(this.props.Login.masterData.registrationSubTypes){TaglistRegistrationSubType=constructOptionList(this.props.Login.masterData.registrationSubTypes||[],\"nregsubtypecode\",\"sregsubtypename\",\"nsorter\",\"ascending\",undefined);listRegistrationSubType=TaglistRegistrationSubType.get(\"OptionList\");}if(updateState){this.setState({selectedRecord:selectedRecord,controlMap:controlMap,userRoleControlRights:userRoleControlRights,listSampletype:listSampletype,listRegistrationType:listRegistrationType,listRegistrationSubType:listRegistrationSubType,selectedInput:selectedInput});}}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:[],inputParam:undefined,operation:null,modalName:undefined}};this.props.updateStore(updateInfo);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return DesignTemplateMapping;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,updateStore:updateStore,getDesignTemplateMappingDetail:getDesignTemplateMappingDetail,getDesignTemplateMappingComboService:getDesignTemplateMappingComboService,filterColumnData:filterColumnData,reloadDesignTemplateMapping:reloadDesignTemplateMapping,getTMPFilterRegType:getTMPFilterRegType,getTMPFilterRegSubType:getTMPFilterRegSubType,getTMPFilterSubmit:getTMPFilterSubmit})(injectIntl(DesignTemplateMapping));","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/pages/designtemplatemapping/DesignTemplateMapping.jsx"],"names":["React","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faPencilAlt","faTrashAlt","faThumbsUp","faUserLock","faClock","connect","injectIntl","FormattedMessage","toast","callService","crudMaster","validateEsignCredential","updateStore","getDesignTemplateMappingDetail","getDesignTemplateMappingComboService","filterColumnData","reloadDesignTemplateMapping","getTMPFilterRegType","getTMPFilterRegSubType","getTMPFilterSubmit","TemplateFilter","ContentPanel","ReadOnlyText","getControlMap","showEsign","convertDateValuetoString","constructOptionList","ListMaster","SlideOutModal","AddDesignTemplateMapping","Esign","DEFAULT_RETURN","BreadcrumbComponent","ListWrapper","formCode","transactionStatus","Affix","ConfirmMessage","ReactTooltip","mapStateToProps","state","Login","DesignTemplateMapping","props","filterComboChange","event","fieldname","inputData","userinfo","userInfo","nflag","nsampletypecode","parseInt","value","masterData","defaultsampletype","inputParam","nregtypecode","defaultregtype","defaultregsubtype","updateInfo","typeName","data","reloadData","searchRef","current","realRegTypeValue","nregsubtypecode","realRegSubTypeValue","realSampleValue","openFilter","showFilter","closeFilter","onFilterSubmit","onApproveClick","selectedDesignTemplateMapping","ntransactionstatus","RETIRED","ncontrolCode","controlMap","has","get","ncontrolcode","postParam","undefined","Value","inputListName","selectedObject","primaryKeyField","classUrl","methodUrl","saveType","esignNeeded","userRoleControlRights","nformcode","loadEsign","screenData","openModal","operation","warn","intl","formatMessage","id","ConfirmDelete","confirmMessage","confirm","deleteTemplate","DRAFT","validateEsign","sreason","selectedRecord","password","closeModal","selectedId","onComboChange","comboData","fieldName","setState","onInputOnChange","target","type","name","checked","YES","NO","handleDateChange","dateName","dateValue","getJsondata","templatedata","displayFields","listItem","gridItem","gridMoreItem","editable","map","row","children","column","component","hasOwnProperty","componentRow","push","label","templatemandatory","mandatory","editableuntill","obj","displayfields","listitem","griditem","gridmoreitem","jsondata","SAMPLEREGISTRATION","RESULTENTRY","APPROVAL","onSaveClick","formRef","nreactregtemplatecode","item","nmastersitecode","designtemplatemappingFieldList","onTabChange","tabProps","screenName","isOpen","designtemplatemappingData","masterStatus","error","userLogged","Map","showAccordian","selectedInput","createRef","searchFieldList","Layout","userStatusCSS","SelectedDesignTemplateMapping","ACTIVE","APPROVED","addId","deleteId","approveId","filterParam","fetchUrl","fecthInputObject","validationColumnList","mandatoryFields","forEach","breadCrumbData","length","searchedData","designtemplatemapping","listSampletype","listRegistrationType","listRegistrationSubType","sregtemplatename","stransdisplaystatus","indexOf","componentrow","designtemplatemappingList","previousProps","updateState","Object","values","Taglstsampletype","TaglistRegistrationType","TaglistRegistrationSubType","SampleTypes","registrationTypes","registrationSubTypes","modalName","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPencilAlt, faTrashAlt, faThumbsUp, faUserLock, faClock } from '@fortawesome/free-solid-svg-icons';//,faUserTimes, faTrash\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, FormattedMessage } from 'react-intl';\r\nimport { toast } from 'react-toastify';\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, getDesignTemplateMappingDetail,\r\n    getDesignTemplateMappingComboService, filterColumnData, reloadDesignTemplateMapping, getTMPFilterRegType, getTMPFilterRegSubType, getTMPFilterSubmit\r\n} from '../../actions';\r\nimport TemplateFilter from './TemplateFilter';\r\nimport { ContentPanel, ReadOnlyText } from '../../components/App.styles';\r\nimport { getControlMap, showEsign, convertDateValuetoString, constructOptionList } from '../../components/CommonScript';//searchData, sortData,\r\nimport ListMaster from '../../components/list-master/list-master.component';\r\n// import DateTimePicker from '../../components/date-time-picker/date-time-picker.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport AddDesignTemplateMapping from './AddDesignTemplateMapping'\r\nimport Esign from '../../pages/audittrail/Esign';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport BreadcrumbComponent from '../../components/Breadcrumb.Component';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport { formCode, transactionStatus } from '../../components/Enumeration';\r\n\r\nimport { Affix } from 'rsuite';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass DesignTemplateMapping extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // const dataState = {\r\n        //     skip: 0,\r\n        //     take: 10,\r\n        // };\r\n\r\n        this.state = {\r\n            isOpen: false,\r\n            designtemplatemappingData: [],\r\n            masterStatus: \"\",\r\n            error: \"\",\r\n            selectedRecord: {},\r\n            operation: \"\",\r\n\r\n            screenName: undefined,\r\n            userLogged: true,\r\n            selectedDesignTemplateMapping: undefined,\r\n\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            showAccordian: true,\r\n            selectedInput: \"\",\r\n        };\r\n        this.searchRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n        this.searchFieldList = [\"sregtemplatename\"];\r\n\r\n        this.designtemplatemappingFieldList = ['ndesigntemplatemappingcode', 'nsampletypecode', 'nformcode',\r\n            'nregtypecode', 'nregsubtypecode', 'nformwisetypecode', 'nreactregtemplatecode', 'ntransactionstatus', 'nversionno'];//'nmahcode',\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    filterComboChange = (event, fieldname) => {\r\n        if (event !== null) {\r\n            // let uRL = \"\";\r\n            let inputData = [];\r\n            if (fieldname === \"sampleType\") {\r\n\r\n                inputData = {\r\n                    userinfo: this.props.Login.userInfo,\r\n                    nflag: 1,\r\n                    nsampletypecode: parseInt(event.value),\r\n\r\n                }\r\n                let masterData = { ...this.props.Login.masterData, defaultsampletype: event }\r\n                let inputParam = { masterData, inputData }\r\n                this.props.getTMPFilterRegType(inputParam)\r\n            }\r\n            else if (fieldname === \"registrationType\") {\r\n\r\n                inputData = {\r\n                    userinfo: this.props.Login.userInfo,\r\n\r\n                    nregtypecode: parseInt(event.value),\r\n                    nsampletypecode: this.props.Login.masterData.defaultsampletype.value,\r\n\r\n                }\r\n                let masterData = { ...this.props.Login.masterData, defaultregtype: event }\r\n                let inputParam = { masterData, inputData }\r\n                this.props.getTMPFilterRegSubType(inputParam)\r\n            } else {\r\n\r\n                let masterData = { ...this.props.Login.masterData, defaultregsubtype: event }\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: { masterData }\r\n                }\r\n\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const Layout = this.props.Login.masterData.selectedDesignTemplateMapping &&\r\n            this.props.Login.masterData.selectedDesignTemplateMapping.jsondata\r\n\r\n        let userStatusCSS = \"outline-secondary\";\r\n        if (this.props.Login.masterData.SelectedDesignTemplateMapping ? this.props.Login.masterData.SelectedDesignTemplateMapping.ntransactionstatus === transactionStatus.ACTIVE\r\n            || this.props.Login.masterData.SelectedDesignTemplateMapping.ntransactionstatus === transactionStatus.APPROVED : false) {\r\n            userStatusCSS = \"outline-success\";\r\n        }\r\n        else if (this.props.Login.masterData.SelectedDesignTemplateMapping && this.props.Login.masterData.SelectedDesignTemplateMapping.ntransactionstatus === transactionStatus.RETIRED) {\r\n            userStatusCSS = \"outline-danger\";\r\n        }\r\n\r\n        const addId = this.state.controlMap.has(\"AddDesignTemplateMapping\") && this.state.controlMap.get(\"AddDesignTemplateMapping\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"DeleteDesignTemplateMapping\") && this.state.controlMap.get(\"DeleteDesignTemplateMapping\").ncontrolcode;\r\n        const approveId = this.state.controlMap.has(\"ApproveDesignTemplateMapping\") && this.state.controlMap.get(\"ApproveDesignTemplateMapping\").ncontrolcode\r\n\r\n\r\n        const filterParam = {\r\n            inputListName: \"DesignTemplateMapping\",\r\n            selectedObject: \"SelectedDesignTemplateMapping\",\r\n            primaryKeyField: \"ndesigntemplatemappingcode\",\r\n            fetchUrl: \"designtemplatemapping/getDesignTemplateMapping\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData,\r\n            // unchangeList: [\"FromDate\", \"ToDate\"],\r\n            searchFieldList:this.searchFieldList\r\n\r\n        };\r\n        this.validationColumnList = [\r\n            { \"idsName\": \"IDS_TEMPLATENAME\", \"dataField\": \"nreactregtemplatecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n\r\n\r\n        ]\r\n        const mandatoryFields = [];\r\n        this.validationColumnList.forEach(item => item.mandatory === true ?\r\n            mandatoryFields.push(item) : \"\"\r\n        );\r\n        // let breadCrumbDataDate = convertDateValuetoString(this.props.Login.masterData && this.props.Login.masterData.FromDate,\r\n        //     this.props.Login.masterData && this.props.Login.masterData.ToDate,\r\n        //     this.props.Login.userInfo)\r\n\r\n        // const breadCrumbData = [\r\n\r\n        let breadCrumbData = [\r\n            {\r\n                \"label\": \"IDS_SAMPLETYPE\",\r\n                \"value\": this.props.Login.masterData.realSampleValue ? this.props.Login.masterData.realSampleValue.label : \"-\"\r\n            }, {\r\n                \"label\": \"IDS_REGTYPE\",\r\n                \"value\": this.props.Login.masterData.realRegTypeValue ? this.props.Login.masterData.realRegTypeValue.label : \"-\"\r\n            }, {\r\n                \"label\": \"IDS_REGSUBTYPE\",\r\n                \"value\": this.props.Login.masterData.realRegSubTypeValue ? this.props.Login.masterData.realRegSubTypeValue.label : \"-\"\r\n            }\r\n        ];\r\n\r\n        return (\r\n            <>\r\n                <ListWrapper className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n                    <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" />\r\n                    {breadCrumbData.length > 0 ?\r\n                        <Affix top={53}>\r\n                            <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n                        </Affix> : \"\"\r\n                    }\r\n                    {/* Start of get display*/}\r\n                    {/* <div className=\"client-listing-wrap mtop-4\"> */}\r\n                    <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" />\r\n                    <Row noGutters={true}>\r\n                        <Col md={4}>\r\n                            <ListMaster\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                screenName={\"DesignTemplateMapping\"}\r\n                                masterData={this.props.Login.masterData}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.DesignTemplateMapping}\r\n                                getMasterDetail={(designtemplatemapping) => this.props.getDesignTemplateMappingDetail(designtemplatemapping, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                                selectedMaster={this.props.Login.masterData.selectedDesignTemplateMapping}\r\n                                primaryKeyField=\"ndesigntemplatemappingcode\"\r\n                                mainField=\"sregtemplatename\"\r\n                                firstField=\"nversionno\"\r\n                                filterColumnData={this.props.filterColumnData}\r\n                                filterParam={filterParam}\r\n                                userRoleControlRights={this.state.userRoleControlRights}\r\n                                addId={addId}\r\n                                searchRef={this.searchRef}\r\n                                reloadData={this.reloadData}\r\n                                hidePaging={true}\r\n                                openModal={() => this.props.getDesignTemplateMappingComboService(\"DesignTemplateMapping\", \"create\", this.props.Login.userInfo, this.props.Login.masterData.realSampleValue ? this.props.Login.masterData.realSampleValue.value : -1,\r\n                                    this.props.Login.masterData.realRegTypeValue ? this.props.Login.masterData.realRegTypeValue.value : -1, this.props.Login.masterData.realRegSubTypeValue ? this.props.Login.masterData.realRegSubTypeValue.value : -1, addId)}\r\n                                showFilterIcon={true}\r\n                                showFilter={this.props.Login.showFilter}\r\n                                openFilter={this.openFilter}\r\n                                closeFilter={this.closeFilter}\r\n                                onFilterSubmit={this.onFilterSubmit}\r\n\r\n                                filterComponent={[\r\n                                    {\r\n                                        \"IDS_TEMPLATEFILTER\":\r\n                                            <TemplateFilter\r\n                                                formatMessage={this.props.intl.formatMessage}\r\n                                                filterSampletype={this.state.listSampletype || []}\r\n                                                filterRegistrationType={this.state.listRegistrationType || []}\r\n                                                filterRegistrationSubType={this.state.listRegistrationSubType || []}\r\n                                                defaultsampletype={this.props.Login.masterData[\"defaultsampletype\"] || {}}\r\n                                                defaultregsubtype={this.props.Login.masterData[\"defaultregsubtype\"] || []}\r\n                                                defaultregtype={this.props.Login.masterData[\"defaultregtype\"] || []}\r\n\r\n\r\n                                                filterComboChange={this.filterComboChange}\r\n                                            />\r\n                                    }\r\n                                ]}\r\n                            />\r\n                        </Col>\r\n\r\n\r\n                        <Col md={8}>\r\n                            <ContentPanel className=\"panel-main-content\">\r\n                                <Card className=\"border-0\">\r\n                                    {this.props.Login.masterData.DesignTemplateMapping && this.props.Login.masterData.DesignTemplateMapping.length > 0 && this.props.Login.masterData.selectedDesignTemplateMapping ?\r\n                                        <>\r\n                                            <Card.Header>\r\n                                                <Card.Title>\r\n                                                    <h1 className=\"product-title-main\">{this.props.Login.masterData.selectedDesignTemplateMapping.sregtemplatename}</h1>\r\n                                                </Card.Title>\r\n                                                <Card.Subtitle className=\"text-muted font-weight-normal\">\r\n                                                    <Row>\r\n                                                        <Col md={10} className=\"d-flex\">\r\n                                                            <h2 className=\"product-title-sub flex-grow-1\">\r\n\r\n                                                                <span className={`btn btn-outlined ${this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus === transactionStatus.DRAFT ? \"outline-secondary\" : this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus === transactionStatus.APPROVED ? \"outline-success\" : \"outline-danger\"} btn-sm mx-md-3 mx-sm-2`}>\r\n                                                                    {this.props.Login.masterData.selectedDesignTemplateMapping.stransdisplaystatus}\r\n                                                                </span>\r\n\r\n                                                            </h2>\r\n                                                        </Col>\r\n                                                        <Col md={2}>\r\n                                                            <div className=\"d-flex product-category float-right icon-group-wrap\">\r\n\r\n\r\n\r\n                                                                <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                    hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                                                                    data-tip={this.props.intl.formatMessage({ id: \"IDS_APPROVE\" })}\r\n                                                                    data-for=\"tooltip_list_wrap\"\r\n                                                                    onClick={() => this.onApproveClick()}\r\n                                                                >\r\n                                                                    <FontAwesomeIcon icon={faThumbsUp} title={this.props.intl.formatMessage({ id: \"IDS_APPROVE\" })} />\r\n                                                                </Nav.Link>\r\n                                                                <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                                                    data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                                                                    data-for=\"tooltip_list_wrap\"\r\n                                                                    hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                                    // onClick={() => this.ConfirmDelete(this.state.approveId)}>\r\n                                                                    onClick={() => this.ConfirmDelete()}>\r\n                                                                    <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                                </Nav.Link>\r\n                                                            </div>\r\n\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                </Card.Subtitle>\r\n                                            </Card.Header>\r\n                                            <Card.Body>\r\n\r\n                                                {\r\n                                                    Layout ?\r\n                                                        Layout.map((item) =>\r\n                                                            <Row>\r\n                                                                {item.children.length > 0 ?\r\n                                                                    item.children.map((column) =>\r\n                                                                        <Col md={12 / item.children.length}>\r\n                                                                            {\r\n                                                                                column.children.map((component) => {\r\n                                                                                    return (\r\n                                                                                        component.hasOwnProperty(\"children\") ?\r\n                                                                                            <Row>\r\n                                                                                                {component.children.map(componentrow =>\r\n                                                                                                    <Col md={12 / componentrow.length}>\r\n                                                                                                        <FormGroup>\r\n                                                                                                            <FormLabel>{componentrow.label}</FormLabel>\r\n                                                                                                            <ReadOnlyText>{\"-\"}</ReadOnlyText>\r\n                                                                                                        </FormGroup>\r\n                                                                                                    </Col>\r\n                                                                                                )\r\n                                                                                                }\r\n                                                                                            </Row>\r\n                                                                                            :\r\n                                                                                            <FormGroup>\r\n                                                                                                <FormLabel>{component.label}</FormLabel>\r\n                                                                                                <ReadOnlyText> {\"-\"}</ReadOnlyText>\r\n                                                                                            </FormGroup>\r\n                                                                                    )\r\n                                                                                })\r\n                                                                            }\r\n\r\n                                                                        </Col>\r\n                                                                    )\r\n                                                                    : \"\"}\r\n                                                            </Row>\r\n                                                        )\r\n                                                        :\r\n                                                        \"\"\r\n                                                }\r\n                                            </Card.Body>\r\n\r\n                                        </>\r\n                                        : \"\"\r\n                                    }\r\n                                </Card>\r\n                            </ContentPanel>\r\n                        </Col>\r\n                    </Row>\r\n                </ListWrapper>\r\n\r\n\r\n                {this.props.Login.openModal &&\r\n                    <SlideOutModal show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={mandatoryFields}\r\n                        addComponent={this.props.Login.loadEsign ?\r\n                            <Esign operation={this.props.Login.operation}\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            : <AddDesignTemplateMapping\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onComboChange={this.onComboChange}\r\n                                handleDateChange={this.handleDateChange}\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                designtemplatemappingList={this.props.Login.designtemplatemappingList}\r\n                                selectedDesignTemplateMapping={this.props.Login.masterData.SelectedDesignTemplateMapping || {}}\r\n                                operation={this.props.Login.operation}\r\n                                userLogged={this.props.Login.userLogged}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                userInfo={this.props.Login.userInfo}\r\n                            />}\r\n                    />\r\n                }\r\n\r\n            </>\r\n        );\r\n    }\r\n    // onFilterSubmit = () => {\r\n    //     this.reloadData()\r\n    // }\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n\r\n        let inputData = {\r\n            userinfo: this.props.Login.userInfo,\r\n\r\n            nregtypecode: parseInt(this.props.Login.masterData.realRegTypeValue ? this.props.Login.masterData.realRegTypeValue.value || -1 : -1),\r\n            nregsubtypecode: parseInt(this.props.Login.masterData.realRegSubTypeValue ? this.props.Login.masterData.realRegSubTypeValue.value || -1 : -1),\r\n            nsampletypecode: this.props.Login.masterData.realSampleValue.value,\r\n\r\n        };\r\n\r\n        let inputParam = { masterData: this.props.Login.masterData, inputData };\r\n        this.props.getTMPFilterSubmit(inputParam);\r\n\r\n\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        let updateState = false\r\n\r\n        let { selectedRecord, userRoleControlRights, controlMap,\r\n            listSampletype, listRegistrationType, listRegistrationSubType } = this.state;\r\n\r\n\r\n        if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n            if (this.props.Login.userRoleControlRights) {\r\n                this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]\r\n                    && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n\r\n                updateState = true;\r\n            }\r\n\r\n        }\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            updateState = true;\r\n            selectedRecord = this.props.Login.selectedRecord\r\n        }\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n\r\n            updateState = true;\r\n\r\n            const selectedInput = {}\r\n            let Taglstsampletype;\r\n            let TaglistRegistrationType;\r\n            let TaglistRegistrationSubType;\r\n\r\n\r\n\r\n            if (this.props.Login.masterData.SampleTypes) {\r\n                Taglstsampletype = constructOptionList(this.props.Login.masterData.SampleTypes || [], \"nsampletypecode\", \"ssampletypename\", \"nsorter\", \"undefined\", undefined);\r\n                listSampletype = Taglstsampletype.get(\"OptionList\");\r\n            }\r\n            if (this.props.Login.masterData.registrationTypes) {\r\n                TaglistRegistrationType = constructOptionList(this.props.Login.masterData.registrationTypes || [], \"nregtypecode\", \"sregtypename\", undefined, undefined, undefined);\r\n                listRegistrationType = TaglistRegistrationType.get(\"OptionList\");\r\n            }\r\n            if (this.props.Login.masterData.registrationSubTypes) {\r\n                TaglistRegistrationSubType = constructOptionList(this.props.Login.masterData.registrationSubTypes || [], \"nregsubtypecode\", \"sregsubtypename\", \"nsorter\", \"ascending\", undefined);\r\n                listRegistrationSubType = TaglistRegistrationSubType.get(\"OptionList\");\r\n            }\r\n\r\n\r\n            if (updateState) {\r\n                this.setState({\r\n                    selectedRecord, controlMap, userRoleControlRights,\r\n                    listSampletype, listRegistrationType, listRegistrationSubType,\r\n                    selectedInput\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    openFilter = () => {\r\n        let showFilter = !this.props.Login.showFilter\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeFilter = () => {\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n\r\n    onFilterSubmit = () => {\r\n\r\n        let inputData = {\r\n            userinfo: this.props.Login.userInfo,\r\n            nregtypecode: parseInt(this.props.Login.masterData.defaultregtype ? this.props.Login.masterData.defaultregtype.value || -1 : -1),\r\n            nregsubtypecode: parseInt(this.props.Login.masterData.defaultregsubtype ? this.props.Login.masterData.defaultregsubtype.value || -1 : -1),\r\n            nsampletypecode: this.props.Login.masterData.defaultsampletype.value,\r\n\r\n        };\r\n        let masterData = {\r\n            ...this.props.Login.masterData,\r\n            realSampleValue: this.props.Login.masterData.defaultsampletype,\r\n            realRegTypeValue: this.props.Login.masterData.defaultregtype,\r\n            realRegSubTypeValue: this.props.Login.masterData.defaultregsubtype\r\n        }\r\n        let inputParam = { masterData, inputData };\r\n        this.props.getTMPFilterSubmit(inputParam);\r\n    }\r\n\r\n    onApproveClick = () => {\r\n        if (this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus !== transactionStatus.RETIRED) {\r\n\r\n            const ncontrolCode = this.state.controlMap.has(\"ApproveDesignTemplateMapping\") && this.state.controlMap.get(\"ApproveDesignTemplateMapping\").ncontrolcode\r\n            let inputData = [];\r\n            inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n            let postParam = undefined;\r\n            inputData[\"designtemplatemapping\"] = { \"ndesigntemplatemappingcode\": this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"] ? this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"].Value : \"\" };\r\n            inputData[\"designtemplatemapping\"] = this.props.Login.masterData.selectedDesignTemplateMapping;\r\n            postParam = { inputListName: \"DesignTemplateMapping\", selectedObject: \"selectedDesignTemplateMapping\", primaryKeyField: \"ndesigntemplatemappingcode\" };\r\n\r\n\r\n\r\n            const inputParam = {\r\n                inputData: {\r\n                    \"userinfo\": this.props.Login.userInfo,\r\n\r\n                },\r\n                classUrl: 'designtemplatemapping',\r\n                methodUrl: \"DesignTemplateMapping\",\r\n                inputData: inputData,\r\n                operation: \"approve\", postParam\r\n            }\r\n            let saveType;\r\n\r\n            const masterData = this.props.Login.masterData;\r\n\r\n            const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode);\r\n            if (esignNeeded) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData }, saveType, openModal: true, operation: \"approve\"\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n            }\r\n\r\n        }\r\n        else {\r\n\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_TEMPLATERETIRED\" }));\r\n        }\r\n    }\r\n    ConfirmDelete = () => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.deleteTemplate());\r\n    }\r\n    deleteTemplate = () => {\r\n        if ((this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus === transactionStatus.DRAFT)) {\r\n            const ncontrolCode = this.state.controlMap.has(\"DeleteDesignTemplateMapping\") && this.state.controlMap.get(\"DeleteDesignTemplateMapping\").ncontrolcode\r\n            let inputData = [];\r\n            inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n            let postParam = undefined;\r\n            inputData[\"designtemplatemapping\"] = { \"ndesigntemplatemappingcode\": this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"] ? this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"].Value : \"\" };\r\n            inputData[\"designtemplatemapping\"] = this.props.Login.masterData.selectedDesignTemplateMapping;\r\n            postParam = { inputListName: \"DesignTemplateMapping\", selectedObject: \"selectedDesignTemplateMapping\", primaryKeyField: \"ndesigntemplatemappingcode\" };\r\n\r\n\r\n            const inputParam = {\r\n                inputData: {\r\n                    \"userinfo\": this.props.Login.userInfo,\r\n\r\n                },\r\n                classUrl: 'designtemplatemapping',\r\n                methodUrl: \"DesignTemplateMapping\",\r\n                inputData: inputData,\r\n                operation: \"delete\", postParam\r\n            }\r\n            let saveType;\r\n\r\n            const masterData = this.props.Login.masterData;\r\n\r\n            const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode);\r\n            if (esignNeeded) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData }, saveType, openModal: true, operation: \"delete\"\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n            }\r\n\r\n        }\r\n        else {\r\n\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_DRAFTTEMPLETECANDELETED\" }));\r\n        }\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"approve\"\r\n                || this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, loadEsign, selectedRecord, selectedId: null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;;\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n    handleDateChange = (dateName, dateValue) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[dateName] = dateValue;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    getJsondata = (templatedata) => {\r\n        let displayFields = []\r\n        let listItem = []\r\n        let gridItem = []\r\n        let gridMoreItem = []\r\n        let editable = []\r\n\r\n        templatedata && templatedata.map(row =>\r\n            row.children && row.children.map(column => {\r\n                column.children && column.children.map(component => {\r\n                    component.hasOwnProperty('childern') ?\r\n\r\n                         component.children.map(componentRow => {\r\n                            displayFields.push(componentRow.label);\r\n                            componentRow.templatemandatory && listItem.push(componentRow.label)\r\n                            if (componentRow.mandatory || componentRow.templatemandatory)\r\n                                gridItem.push(componentRow.label)\r\n                            else\r\n                                gridMoreItem.push(componentRow.label)\r\n                            if (!componentRow.templatemandatory) {\r\n                                editable.push({label:componentRow.label,editableuntill:[17]})\r\n                            }\r\n                        })\r\n                        :\r\n                        displayFields.push(component.label);\r\n                    component.templatemandatory && listItem.push(component.label)\r\n                    if (component.mandatory || component.templatemandatory)\r\n                        gridItem.push(component.label)\r\n                    else\r\n                        gridMoreItem.push(component.label)\r\n                    if (!component.templatemandatory) {\r\n                        editable.push({label:component.label,editableuntill:[17]})\r\n                    }\r\n                    return null;\r\n                }\r\n\r\n                )\r\n            }\r\n            )\r\n        )\r\n        let obj = {\r\n            displayfields: displayFields,\r\n            listitem: listItem,\r\n            griditem: gridItem,\r\n            gridmoreitem: gridMoreItem,\r\n        }\r\n   \r\n\r\n        let jsondata = {\r\n            [formCode.SAMPLEREGISTRATION]: {\r\n                ...obj,\r\n                editable\r\n            },\r\n            [formCode.RESULTENTRY]: {\r\n                ...obj,\r\n            },\r\n            [formCode.APPROVAL]: {\r\n                ...obj,\r\n            }\r\n\r\n        }\r\n       return jsondata;\r\n    }\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n\r\n        let inputData = [];\r\n\r\n\r\n        \r\n        inputData = {\r\n            \"userinfo\": this.props.Login.userInfo,\r\n            \"ncontrolcode\": this.props.Login.ncontrolCode,\r\n            \"nreactregtemplatecode\": this.state.selectedRecord.nreactregtemplatecode.value,\r\n            \"nsampletypecode\": this.props.Login.masterData.realSampleValue.value,\r\n            \"nregtypecode\": this.props.Login.masterData.realRegTypeValue ? this.props.Login.masterData.realRegTypeValue.value : -1,\r\n            \"nregsubtypecode\": this.props.Login.masterData.realRegSubTypeValue ? this.props.Login.masterData.realRegSubTypeValue.value : -1,\r\n              \"jsondataobj\" :  this.getJsondata(this.state.selectedRecord.nreactregtemplatecode.item.jsondata),\r\n        }\r\n        // this.state.selectedRecord.nreactregtemplatecode.item.jsondata\r\n\r\n\r\n        let postParam = undefined;\r\n\r\n        inputData[\"designtemplatemapping\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n\r\n\r\n        this.designtemplatemappingFieldList.map(item => {\r\n            return inputData[\"designtemplatemapping\"][item] = this.state.selectedRecord[item]\r\n        });\r\n\r\n\r\n        const inputParam = {\r\n            classUrl: \"designtemplatemapping\",\r\n            methodUrl: \"DesignTemplateMapping\",\r\n            inputData: inputData,\r\n            operation: this.props.Login.operation,\r\n            saveType, formRef, postParam, searchRef: this.searchRef\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (\r\n            showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                masterData: [], inputParam: undefined, operation: null, modalName: undefined\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, validateEsignCredential,\r\n    updateStore, getDesignTemplateMappingDetail,\r\n    getDesignTemplateMappingComboService, filterColumnData, reloadDesignTemplateMapping, getTMPFilterRegType, getTMPFilterRegSubType, getTMPFilterSubmit\r\n})(injectIntl(DesignTemplateMapping));\r\n\r\n"]},"metadata":{},"sourceType":"module"}