{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Row,Col,Card,Nav}from'react-bootstrap';import{FormattedMessage,injectIntl}from'react-intl';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus}from'@fortawesome/free-solid-svg-icons';import{process}from'@progress/kendo-data-query';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import AddCommonHolidays from'../configurationmaster/AddCommonHolidays';import AddPublicHolidays from'../configurationmaster/AddPublicHolidays';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,formatInputDate}from'../../components/CommonScript';import Esign from'../audittrail/Esign';import CustomAccordion from'../../components/custom-accordion/custom-accordion.component';import HolidayPlannerTabsAccordion from'../configurationmaster/HolidayPlannerTabsAccordion';import CommonHolidaysTab from'../configurationmaster/CommonHolidaysTab';import PublicHolidaysTab from'../configurationmaster/PublicHolidaysTab';import UserBasedHolidays from'../configurationmaster/UserBasedHolidays';import{transactionStatus}from'../../components/Enumeration';import{toast}from'react-toastify';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import AddUserBasedHolidays from'../configurationmaster/AddUserBasedHolidays';// import ReactTooltip from 'react-tooltip';\nvar HolidayPlannerTab=/*#__PURE__*/function(_Component){_inherits(HolidayPlannerTab,_Component);var _super=_createSuper(HolidayPlannerTab);function HolidayPlannerTab(props){var _this;_classCallCheck(this,HolidayPlannerTab);_this=_super.call(this,props);_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.PublicHolidays,event.dataState),dataState:event.dataState});};_this.dataStateChangeUserBasedHolidays=function(event){_this.setState({userBasedDataResult:process(_this.state.UserBasedHolidays,event.dataState),userBasedDataState:event.dataState});};_this.ConfirmDelete=function(obj){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.Delete(obj);});};_this.holidayYearVersionAccordion=function(yearVersion){var accordionMap=new Map();yearVersion.map(function(version){return accordionMap.set(version.nholidayyearversion,/*#__PURE__*/React.createElement(HolidayPlannerTabsAccordion,{version:version,userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,userInfo:_this.props.userInfo,sendApproveYearVersion:_this.approveVersion,ConfirmDelete:_this.ConfirmDelete,masterData:_this.props.masterData// deleteRecord={this.Delete}\n,tabDetail:_this.tabDetail(version),onTabChange:_this.onTabChange}));});return accordionMap;};_this.tabDetail=function(version){var tabMap=new Map();tabMap.set(\"IDS_COMMONHOLIDAYS\",/*#__PURE__*/React.createElement(CommonHolidaysTab,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,screenName:\"IDS_COMMONHOLIDAYS\",getCommonHolidays:_this.sendCommonHolidays,masterData:_this.props.masterData,version:version}));tabMap.set(\"IDS_PUBLICHOLIDAYS\",/*#__PURE__*/React.createElement(PublicHolidaysTab,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,screenName:\"IDS_PUBLICHOLIDAYS\",getPublicHolidays:_this.getPublicHolidays,masterData:_this.props.masterData,version:version,dataResult:process(_this.state.PublicHolidays||[],_this.state.dataState),dataState:_this.state.dataState,dataStateChange:_this.dataStateChange,publicHolidaysColumns:_this.publicHolidaysColumns,deleteRecord:_this.Delete,selectedId:_this.props.selectedId}));tabMap.set(\"IDS_USERBASEDHOLIDAYS\",/*#__PURE__*/React.createElement(UserBasedHolidays,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,screenName:\"IDS_USERBASEDHOLIDAYS\",getUserBasedHolidays:_this.getUserBasedHolidays,masterData:_this.props.masterData,version:version,dataResult:process(_this.state.UserBasedHolidays||[],_this.state.userBasedDataState),dataState:_this.state.userBasedDataState,dataStateChange:_this.dataStateChangeUserBasedHolidays,userBasedHolidaysColumns:_this.userBasedHolidaysColumns,deleteRecord:_this.Delete,selectedId:_this.props.selectedId}));return tabMap;};_this.getPublicHolidays=function(inputParam){if(_this.props.masterData.selectedYearVersion.ntransactionstatus===transactionStatus.DRAFT){_this.props.getPublicHolidays(inputParam);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};_this.getUserBasedHolidays=function(inputParam){if(_this.props.masterData.selectedYearVersion.ntransactionstatus===transactionStatus.DRAFT){_this.props.getUserBasedHolidays(inputParam);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};_this.sendCommonHolidays=function(screenName,operation,masterData,userInfo,editID){// if (masterData.selectedYearVersion && masterData.selectedYearVersion.ntransactionstatus === transactionStatus.APPROVED) {\n//     toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\" }));\n// }\n// else {\n_this.props.getCommonHolidays(screenName,operation,masterData,userInfo,editID);// }\n};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;if(fieldName===\"ntzddate\"){if(comboData===null){selectedRecord[\"ntzddate\"]=0;selectedRecord[\"stzddate\"]=\"\";}else{selectedRecord[\"stzddate\"]=comboData.label;}}_this.setState({selectedRecord:selectedRecord});};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"){loadEsign=false;openChildModal=false;}else{if(_this.props.screenName===\"HolidayYearVersion\"){openChildModal=false;}loadEsign=false;}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.handleDateChange=function(dateName,dateValue){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name==='ntransactionstatus'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;}else if(event.target.name===\"agree\"){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.approveVersion=function(yearVersion,approveYearVersion){var inputData=[];inputData[\"userinfo\"]=_this.props.userInfo;inputData[\"holidayyearversion\"]={\"nyearcode\":yearVersion.nyearcode,\"nholidayyearversion\":yearVersion.nholidayyearversion,\"ntransactionstatus\":yearVersion.ntransactionstatus};var inputParam={classUrl:_this.props.inputParam.classUrl,methodUrl:\"HolidayYearVersion\",inputData:inputData,operation:approveYearVersion.operation};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,approveYearVersion.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:approveYearVersion.screenName,operation:approveYearVersion.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}};_this.onSaveClick=function(saveType,formRef){var inputParam={};var validDate=false;// if (this.props.masterData.selectedYearVersion && this.props.masterData.selectedYearVersion.stransdisplaystatus === intl.formatMessage({ id: \"IDS_APPROVED\" })) {\n//     toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\" }));\n// }\n// else {\nif(_this.props.screenName===\"IDS_COMMONHOLIDAYS\"){validDate=true;inputParam=_this.UpdateCommonHolidays(saveType,formRef);}else if(_this.props.screenName===\"IDS_PUBLICHOLIDAYS\"){var year=new Date(_this.state.selectedRecord[\"ddate\"]).getFullYear();validDate=String(year).length===4&&String(year)===_this.props.masterData.selectedYear.syear?true:false;inputParam=_this.SavePublicHolidays(saveType,formRef);}else if(_this.props.screenName===\"IDS_USERBASEDHOLIDAYS\"){var _year=new Date(_this.state.selectedRecord[\"ddate\"]).getFullYear();validDate=String(_year).length===4&&String(_year)===_this.props.masterData.selectedYear.syear?true:false;inputParam=_this.SaveUserBasedHolidays(saveType,formRef);}if(validDate){if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_INVALIDDATE\"}));}// }\n};_this.addVersion=function(addParam){var inputData=[];inputData[\"userinfo\"]=_this.props.userInfo;var fieldList=[\"nholidayyearversion\",\"nversioncode\"];if(_this.props.operation===\"update\"){inputData[\"holidayyearversion\"]={\"nyearcode\":_this.props.masterData.selectedYear.nyearcode};fieldList.map(function(item){return inputData[\"holidayyearversion\"][item]=_this.state.selectedRecord[item]?_this.state.selectedRecord[item]:\"\";});}else{inputData[\"holidayyearversion\"]={\"nyearcode\":_this.props.masterData.selectedYear.nyearcode,\"nversioncode\":0};}var inputParam={classUrl:_this.props.inputParam.classUrl,methodUrl:\"HolidayYearVersion\",inputData:inputData,operation:\"create\",saveType:addParam.saveType};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,addParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:addParam.screenName,operation:addParam.operation,saveType:addParam.saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}// this.props.crudMaster(inputParam, this.props.masterData);\n};_this.Delete=function(deleteParam){var inputData=[];if(_this.props.masterData.selectedYearVersion&&_this.props.masterData.selectedYearVersion.ntransactionstatus!==transactionStatus.DRAFT){toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\"}));}else{inputData[deleteParam.methodUrl.toLowerCase()]=deleteParam.selectedRecord;inputData[\"userinfo\"]=_this.props.userInfo;var inputParam={methodUrl:deleteParam.methodUrl,classUrl:_this.props.inputParam.classUrl,inputData:inputData,operation:\"delete\",dataState:_this.state.dataState};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:deleteParam.screenName,operation:deleteParam.operation}};_this.props.updateStore(updateInfo);}else{if(showEsign(_this.props.userRoleControlRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var _updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:deleteParam.screenName,operation:deleteParam.operation}};_this.props.updateStore(_updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}}//this.props.crudMaster(inputParam, this.props.masterData);\n};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={versionSelectedRecord:{},dataResult:[],dataState:dataState,CommonHolidays:_this.props.masterData.CommonHolidays,PublicHolidays:_this.props.masterData.PublicHolidays,Country:[],CurrentYearVersion:_this.props.masterData.CurrentYearVersion,activeTab:'common-tab',selectedRecord:{},UserBasedHolidays:_this.props.masterData.UserBasedHolidays,userBasedDataState:dataState,userBasedDataResult:[]};_this.publicHolidaysColumns=[{\"idsName\":\"IDS_DATE\",\"dataField\":\"sdate\",\"width\":\"150px\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"400px\"}];_this.userBasedHolidaysColumns=[{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"susername\",\"width\":\"150px\"},{\"idsName\":\"IDS_DATE\",\"dataField\":\"sdate\",\"width\":\"150px\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"400px\"}];_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(HolidayPlannerTab,[{key:\"render\",value:function render(){var _this2=this;this.mandatoryPublicHolidaysColumns=[{\"idsName\":\"IDS_DATE\",\"dataField\":\"ddate\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_TIMEZONE\",\"dataField\":\"ntzddate\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];if(this.props.screenName===\"IDS_USERBASEDHOLIDAYS\"){this.mandatoryPublicHolidaysColumns.push({\"idsName\":\"IDS_USER\",\"dataField\":\"nusercode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});}var addYearVersionId=this.props.controlMap.has(\"AddHolidayYearVersion\")&&this.props.controlMap.get(\"AddHolidayYearVersion\").ncontrolcode;// const deleteYearVersionId = this.props.controlMap.has(\"DeleteHolidayYearVersion\") && this.props.controlMap.get(\"DeleteHolidayYearVersion\").ncontrolcode\n// const addCommonHolidaysId = this.props.controlMap.has(\"AddCommonHolidays\") && this.props.controlMap.get(\"AddCommonHolidays\").ncontrolcode\n// const editCommonHolidaysId = this.props.controlMap.has(\"EditCommonHolidays\") && this.props.controlMap.get(\"EditCommonHolidays\").ncontrolcode;\n// const deleteCommonHolidaysId = this.props.controlMap.has(\"DeleteCommonHolidays\") && this.props.controlMap.get(\"DeleteCommonHolidays\").ncontrolcode\n// const addPublicHolidaysId = this.props.controlMap.has(\"AddPublicHolidays\") && this.props.controlMap.get(\"AddPublicHolidays\").ncontrolcode\n// const editPublicHolidaysId = this.props.controlMap.has(\"EditPublicHolidays\") && this.props.controlMap.get(\"EditPublicHolidays\").ncontrolcode;\n// const deletePublicHolidaysId = this.props.controlMap.has(\"DeletePublicHolidays\") && this.props.controlMap.get(\"DeletePublicHolidays\").ncontrolcode\nvar AddYearVersionParam={screenName:\"HolidayYearVersion\",operation:\"create\",inputParam:this.props.inputParam,userInfo:this.props.userInfo,ncontrolCode:addYearVersionId,saveType:1};var mandatoryFields=[];if(this.props.screenName===\"IDS_PUBLICHOLIDAYS\"||this.props.screenName===\"IDS_USERBASEDHOLIDAYS\"){this.mandatoryPublicHolidaysColumns.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,{className:\"at-tabs border-0\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{className:\"add-txt-btn\"// data-tip={this.props.intl.formatMessage({ id: \"IDS_ADDVERSION\" })}\n,hidden:this.props.userRoleControlRights.indexOf(addYearVersionId)===-1,onClick:function onClick(e){return _this2.addVersion(AddYearVersionParam);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_VERSION\",defaultMessage:\"Version\"}))))),/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},this.props.masterData.YearVersion&&this.props.masterData.YearVersion.length>0?/*#__PURE__*/React.createElement(CustomAccordion,{key:\"filter\",accordionTitle:\"sversionno\",accordionComponent:this.holidayYearVersionAccordion(this.props.masterData.YearVersion),inputParam:{masterData:this.props.masterData,userInfo:this.props.userInfo},accordionClick:this.props.getCommonAndPublicHolidays,accordionPrimaryKey:\"nholidayyearversion\",accordionObjectName:\"version\",selectedKey:this.props.masterData.selectedYearVersion.nholidayyearversion}):\"\"))),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.props.screenName,onSaveClick:this.onSaveClick,updateStore:this.props.updateStore,esign:this.props.loadEsign,showSaveContinue:this.props.screenName===\"IDS_PUBLICHOLIDAYS\"||this.props.screenName===\"IDS_USERBASEDHOLIDAYS\"?true:false,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.screenName===\"IDS_COMMONHOLIDAYS\"?/*#__PURE__*/React.createElement(AddCommonHolidays,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,inputParam:this.props.inputParam}):this.props.screenName===\"IDS_PUBLICHOLIDAYS\"?/*#__PURE__*/React.createElement(AddPublicHolidays,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,handleDateChange:this.handleDateChange,onComboChange:this.onComboChange,timeZoneList:this.props.timeZoneList||[],userInfo:this.props.userInfo,minDate:new Date(\"01-01-\"+this.props.masterData.selectedYear.syear),maxDate:new Date(\"12-31-\"+this.props.masterData.selectedYear.syear)}):/*#__PURE__*/React.createElement(AddUserBasedHolidays,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,handleDateChange:this.handleDateChange,onComboChange:this.onComboChange,timeZoneList:this.props.timeZoneList||[],userInfo:this.props.userInfo,minDate:new Date(\"01-01-\"+this.props.masterData.selectedYear.syear),maxDate:new Date(\"12-31-\"+this.props.masterData.selectedYear.syear),Users:this.props.Users})}));}},{key:\"UpdateCommonHolidays\",value:function UpdateCommonHolidays(saveType,formRef){var _this3=this;var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;var fieldList=[\"nmonday\",\"ntuesday\",\"nwednesday\",\"nthursday\",\"nfriday\",\"nsaturday\",\"nsunday\"];if(this.props.operation===\"update\"){inputData[\"commonholidays\"]={\"nyearcode\":this.props.masterData.selectedYear.nyearcode,\"nholidayyearversion\":this.props.masterData.CommonHolidays[0].nholidayyearversion,\"ncommonholidaycode\":this.props.masterData.CommonHolidays[0].ncommonholidaycode};fieldList.map(function(item){return inputData[\"commonholidays\"][item]=_this3.state.selectedRecord[item]?_this3.state.selectedRecord[item]:\"\";});}var inputParam={classUrl:this.props.inputParam.classUrl,methodUrl:\"CommonHolidays\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef};return inputParam;}},{key:\"SaveUserBasedHolidays\",value:function SaveUserBasedHolidays(saveType,formRef){var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;// let fieldList = [\"npublicholidaycode\", \"ddate\", \"sdescription\"];\nif(this.props.operation===\"update\"){inputData[\"userbasedholidays\"]={\"nyearcode\":this.props.masterData.selectedYear.nyearcode,\"nholidayyearversion\":this.props.masterData.CommonHolidays[0].nholidayyearversion};// fieldList.map(item => {\n//     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\n// })\ninputData[\"userbasedholidays\"][\"nuserbasedholidaycode\"]=this.state.selectedRecord[\"nuserbasedholidaycode\"]?this.state.selectedRecord[\"nuserbasedholidaycode\"]:0;inputData[\"userbasedholidays\"][\"nusercode\"]=this.state.selectedRecord[\"nusercode\"]?this.state.selectedRecord[\"nusercode\"].value:-1;inputData[\"userbasedholidays\"][\"ddate\"]=this.state.selectedRecord[\"ddate\"]?this.state.selectedRecord[\"ddate\"]:0;inputData[\"userbasedholidays\"][\"sdescription\"]=this.state.selectedRecord[\"sdescription\"]?this.state.selectedRecord[\"sdescription\"]:0;inputData[\"userbasedholidays\"][\"ntzddate\"]=this.state.selectedRecord[\"ntzddate\"]?this.state.selectedRecord[\"ntzddate\"].value:-1;inputData[\"userbasedholidays\"][\"stzddate\"]=this.state.selectedRecord[\"stzddate\"]||\"\";}else{inputData[\"userbasedholidays\"]={\"nyearcode\":this.props.masterData.selectedYear.nyearcode,\"nholidayyearversion\":this.props.masterData.CommonHolidays[0].nholidayyearversion};// fieldList.map(item => {\n//     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item]\n// })\ninputData[\"userbasedholidays\"][\"nuserbasedholidaycode\"]=this.state.selectedRecord[\"nuserbasedholidaycode\"]?this.state.selectedRecord[\"nuserbasedholidaycode\"]:0;inputData[\"userbasedholidays\"][\"ddate\"]=this.state.selectedRecord[\"ddate\"]?this.state.selectedRecord[\"ddate\"]:0;inputData[\"userbasedholidays\"][\"sdescription\"]=this.state.selectedRecord[\"sdescription\"]?this.state.selectedRecord[\"sdescription\"]:0;inputData[\"userbasedholidays\"][\"nusercode\"]=this.state.selectedRecord[\"nusercode\"]?this.state.selectedRecord[\"nusercode\"].value:-1;inputData[\"userbasedholidays\"][\"ntzddate\"]=this.state.selectedRecord[\"ntzddate\"]?this.state.selectedRecord[\"ntzddate\"].value:-1;inputData[\"userbasedholidays\"][\"stzddate\"]=this.state.selectedRecord[\"stzddate\"]||\"\";}var publicHolidayDate=inputData[\"userbasedholidays\"][\"ddate\"];//need this conversion when the datatype of the field is 'Instant'\ninputData[\"userbasedholidays\"][\"ddate\"]=formatInputDate(publicHolidayDate,false);var inputParam={classUrl:this.props.inputParam.classUrl,methodUrl:\"UserBasedHolidays\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef};return inputParam;//this.props.crudMaster(inputParam, this.props.masterData);\n}},{key:\"SavePublicHolidays\",value:function SavePublicHolidays(saveType,formRef){var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;// let fieldList = [\"npublicholidaycode\", \"ddate\", \"sdescription\"];\nif(this.props.operation===\"update\"){inputData[\"publicholidays\"]={\"nyearcode\":this.props.masterData.selectedYear.nyearcode,\"nholidayyearversion\":this.props.masterData.CommonHolidays[0].nholidayyearversion};// fieldList.map(item => {\n//     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\n// })\ninputData[\"publicholidays\"][\"npublicholidaycode\"]=this.state.selectedRecord[\"npublicholidaycode\"]?this.state.selectedRecord[\"npublicholidaycode\"]:0;inputData[\"publicholidays\"][\"ddate\"]=this.state.selectedRecord[\"ddate\"]?this.state.selectedRecord[\"ddate\"]:0;inputData[\"publicholidays\"][\"sdescription\"]=this.state.selectedRecord[\"sdescription\"]?this.state.selectedRecord[\"sdescription\"]:0;inputData[\"publicholidays\"][\"ntzddate\"]=this.state.selectedRecord[\"ntzddate\"]?this.state.selectedRecord[\"ntzddate\"].value:-1;inputData[\"publicholidays\"][\"stzddate\"]=this.state.selectedRecord[\"stzddate\"]||\"\";}else{inputData[\"publicholidays\"]={\"nyearcode\":this.props.masterData.selectedYear.nyearcode,\"nholidayyearversion\":this.props.masterData.CommonHolidays[0].nholidayyearversion};// fieldList.map(item => {\n//     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item]\n// })\ninputData[\"publicholidays\"][\"npublicholidaycode\"]=this.state.selectedRecord[\"npublicholidaycode\"]?this.state.selectedRecord[\"npublicholidaycode\"]:0;inputData[\"publicholidays\"][\"ddate\"]=this.state.selectedRecord[\"ddate\"]?this.state.selectedRecord[\"ddate\"]:0;inputData[\"publicholidays\"][\"sdescription\"]=this.state.selectedRecord[\"sdescription\"]?this.state.selectedRecord[\"sdescription\"]:0;inputData[\"publicholidays\"][\"ntzddate\"]=this.state.selectedRecord[\"ntzddate\"]?this.state.selectedRecord[\"ntzddate\"].value:-1;inputData[\"publicholidays\"][\"stzddate\"]=this.state.selectedRecord[\"stzddate\"]||\"\";}var publicHolidayDate=inputData[\"publicholidays\"][\"ddate\"];//need this conversion when the datatype of the field is 'Instant'\ninputData[\"publicholidays\"][\"ddate\"]=formatInputDate(publicHolidayDate,false);var inputParam={classUrl:this.props.inputParam.classUrl,methodUrl:\"PublicHolidays\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef};return inputParam;//this.props.crudMaster(inputParam, this.props.masterData);\n}// Delete = (e, selectedRecord, Type, methodURL,operation,screenName, ncontrolCode) => {\n},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.masterData!==previousProps.masterData){var selectedRecord=this.props.selectedRecord||this.state.selectedRecord;var _this$state=this.state,dataState=_this$state.dataState,userBasedDataState=_this$state.userBasedDataState;if(this.props.dataState===undefined){dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};userBasedDataState=_objectSpread({},dataState);}if(this.props.operation===\"create\"&&this.props.inputParam.saveType===2){this.props.inputParam.formRef&&this.props.inputParam.formRef.current.reset();selectedRecord={ddate:new Date(),sdescription:'',ntzddate:{\"value\":this.props.userInfo.ntimezonecode,\"label\":this.props.userInfo.stimezoneid},stzddate:this.props.userInfo.stimezoneid};}this.setState({YearVersion:this.props.masterData.YearVersion,CommonHolidays:this.props.masterData.CommonHolidays,CurrentYearVersion:this.props.masterData.CurrentYearVersion,PublicHolidays:this.props.masterData.PublicHolidays,UserBasedHolidays:this.props.masterData.UserBasedHolidays,dataState:dataState,selectedRecord:selectedRecord,userBasedDataState:userBasedDataState});}else if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}}}]);return HolidayPlannerTab;}(Component);export default injectIntl(HolidayPlannerTab);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/configurationmaster/HolidayPlannerTab.jsx"],"names":["React","Component","Row","Col","Card","Nav","FormattedMessage","injectIntl","FontAwesomeIcon","faPlus","process","SlideOutModal","AddCommonHolidays","AddPublicHolidays","DEFAULT_RETURN","showEsign","formatInputDate","Esign","CustomAccordion","HolidayPlannerTabsAccordion","CommonHolidaysTab","PublicHolidaysTab","UserBasedHolidays","transactionStatus","toast","ConfirmMessage","AddUserBasedHolidays","HolidayPlannerTab","props","dataStateChange","event","setState","dataResult","state","PublicHolidays","dataState","dataStateChangeUserBasedHolidays","userBasedDataResult","userBasedDataState","ConfirmDelete","obj","confirmMessage","confirm","intl","formatMessage","id","Delete","holidayYearVersionAccordion","yearVersion","accordionMap","Map","map","version","set","nholidayyearversion","userRoleControlRights","controlMap","userInfo","approveVersion","masterData","tabDetail","onTabChange","tabMap","inputParam","sendCommonHolidays","getPublicHolidays","publicHolidaysColumns","selectedId","getUserBasedHolidays","userBasedHolidaysColumns","selectedYearVersion","ntransactionstatus","DRAFT","warn","screenName","operation","editID","getCommonHolidays","onComboChange","comboData","fieldName","selectedRecord","label","tabProps","updateInfo","typeName","data","updateStore","closeModal","loadEsign","openChildModal","handleDateChange","dateName","dateValue","onInputOnChange","target","type","name","checked","ACTIVE","DEACTIVE","YES","NO","value","approveYearVersion","inputData","nyearcode","classUrl","methodUrl","esignRights","nformcode","ncontrolCode","screenData","crudMaster","onSaveClick","saveType","formRef","validDate","UpdateCommonHolidays","year","Date","getFullYear","String","length","selectedYear","syear","SavePublicHolidays","SaveUserBasedHolidays","addVersion","addParam","fieldList","item","deleteParam","toLowerCase","validateEsign","sreason","nreasoncode","spredefinedreason","password","validateEsignCredential","skip","take","settings","parseInt","versionSelectedRecord","CommonHolidays","Country","CurrentYearVersion","activeTab","mandatoryPublicHolidaysColumns","push","addYearVersionId","has","get","ncontrolcode","AddYearVersionParam","mandatoryFields","forEach","mandatory","indexOf","e","YearVersion","getCommonAndPublicHolidays","timeZoneList","Users","ncommonholidaycode","publicHolidayDate","previousProps","undefined","current","reset","ddate","sdescription","ntzddate","ntimezonecode","stimezoneid","stzddate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Row, Col, Card, Nav } from 'react-bootstrap';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport AddCommonHolidays from '../configurationmaster/AddCommonHolidays';\r\nimport AddPublicHolidays from '../configurationmaster/AddPublicHolidays';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, formatInputDate } from '../../components/CommonScript';\r\nimport Esign from '../audittrail/Esign';\r\nimport CustomAccordion from '../../components/custom-accordion/custom-accordion.component';\r\nimport HolidayPlannerTabsAccordion from '../configurationmaster/HolidayPlannerTabsAccordion';\r\nimport CommonHolidaysTab from '../configurationmaster/CommonHolidaysTab';\r\nimport PublicHolidaysTab from '../configurationmaster/PublicHolidaysTab';\r\nimport UserBasedHolidays from '../configurationmaster/UserBasedHolidays';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\nimport { toast } from 'react-toastify';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport AddUserBasedHolidays from '../configurationmaster/AddUserBasedHolidays';\r\n\r\n// import ReactTooltip from 'react-tooltip';\r\n\r\nclass HolidayPlannerTab extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            versionSelectedRecord: {}, dataResult: [],\r\n            dataState: dataState, CommonHolidays: this.props.masterData.CommonHolidays,\r\n            PublicHolidays: this.props.masterData.PublicHolidays, Country: [],\r\n            CurrentYearVersion: this.props.masterData.CurrentYearVersion,\r\n            activeTab: 'common-tab', selectedRecord: {},\r\n            UserBasedHolidays: this.props.masterData.UserBasedHolidays, userBasedDataState: dataState, userBasedDataResult: []\r\n        };\r\n        this.publicHolidaysColumns = [\r\n            { \"idsName\": \"IDS_DATE\", \"dataField\": \"sdate\", \"width\": \"150px\" },\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"400px\" }\r\n        ];\r\n        this.userBasedHolidaysColumns = [\r\n            { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"150px\" },\r\n            { \"idsName\": \"IDS_DATE\", \"dataField\": \"sdate\", \"width\": \"150px\" },\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"400px\" }\r\n        ];\r\n        this.confirmMessage = new ConfirmMessage();\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.PublicHolidays, event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n    dataStateChangeUserBasedHolidays = (event) => {\r\n        this.setState({\r\n            userBasedDataResult: process(this.state.UserBasedHolidays, event.dataState),\r\n            userBasedDataState: event.dataState\r\n        });\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        this.mandatoryPublicHolidaysColumns = [\r\n            { \"idsName\": \"IDS_DATE\", \"dataField\": \"ddate\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"idsName\": \"IDS_TIMEZONE\", \"dataField\": \"ntzddate\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" }\r\n        ];\r\n\r\n        if(this.props.screenName === \"IDS_USERBASEDHOLIDAYS\"){\r\n            this.mandatoryPublicHolidaysColumns.push({ \"idsName\": \"IDS_USER\", \"dataField\": \"nusercode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" })\r\n        }\r\n\r\n  \r\n\r\n        const addYearVersionId = this.props.controlMap.has(\"AddHolidayYearVersion\") && this.props.controlMap.get(\"AddHolidayYearVersion\").ncontrolcode\r\n\r\n        // const deleteYearVersionId = this.props.controlMap.has(\"DeleteHolidayYearVersion\") && this.props.controlMap.get(\"DeleteHolidayYearVersion\").ncontrolcode\r\n\r\n\r\n        // const addCommonHolidaysId = this.props.controlMap.has(\"AddCommonHolidays\") && this.props.controlMap.get(\"AddCommonHolidays\").ncontrolcode\r\n        // const editCommonHolidaysId = this.props.controlMap.has(\"EditCommonHolidays\") && this.props.controlMap.get(\"EditCommonHolidays\").ncontrolcode;\r\n        // const deleteCommonHolidaysId = this.props.controlMap.has(\"DeleteCommonHolidays\") && this.props.controlMap.get(\"DeleteCommonHolidays\").ncontrolcode\r\n\r\n        // const addPublicHolidaysId = this.props.controlMap.has(\"AddPublicHolidays\") && this.props.controlMap.get(\"AddPublicHolidays\").ncontrolcode\r\n        // const editPublicHolidaysId = this.props.controlMap.has(\"EditPublicHolidays\") && this.props.controlMap.get(\"EditPublicHolidays\").ncontrolcode;\r\n        // const deletePublicHolidaysId = this.props.controlMap.has(\"DeletePublicHolidays\") && this.props.controlMap.get(\"DeletePublicHolidays\").ncontrolcode\r\n\r\n        const AddYearVersionParam = {\r\n            screenName: \"HolidayYearVersion\", operation: \"create\",\r\n            inputParam: this.props.inputParam, userInfo: this.props.userInfo, ncontrolCode: addYearVersionId,\r\n            saveType: 1\r\n        };\r\n\r\n        const mandatoryFields = [];\r\n        if (this.props.screenName === \"IDS_PUBLICHOLIDAYS\"||this.props.screenName === \"IDS_USERBASEDHOLIDAYS\") {\r\n            this.mandatoryPublicHolidaysColumns.forEach(item => item.mandatory === true ?\r\n                mandatoryFields.push(item) : \"\"\r\n            );\r\n        } \r\n        return (\r\n            <>\r\n                {/* <Row className=\"no-gutters\">\r\n                    <Col md={12}> */}\r\n                <Card className=\"at-tabs border-0\">\r\n                    <Row noGutters={true} >\r\n                        <Col md={12}>\r\n                            <div className=\"d-flex justify-content-end\">\r\n                                {/* <ReactTooltip place=\"bottom\" globalEventOff='click' /> */}\r\n                                <Nav.Link className=\"add-txt-btn\"\r\n                                    // data-tip={this.props.intl.formatMessage({ id: \"IDS_ADDVERSION\" })}\r\n                                    hidden={this.props.userRoleControlRights.indexOf(addYearVersionId) === -1}\r\n                                    onClick={(e) => this.addVersion(AddYearVersionParam)}\r\n                                >\r\n                                    <FontAwesomeIcon icon={faPlus} /> { }\r\n                                    <FormattedMessage id='IDS_VERSION' defaultMessage='Version' />\r\n                                </Nav.Link>\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    {/* <Row className=\"no-gutters text-right border-bottom pt-2 pb-2\" > */}\r\n                    {/* <Col md={4}> */}\r\n                    {/* <Nav.Link className=\"add-txt-btn\"\r\n                                        onClick={(e) => this.addVersion(AddYearVersionParam)}\r\n                                    >\r\n                                        <FontAwesomeIcon icon={faPlus} /> { }\r\n                                        <FormattedMessage id='IDS_ADDVERSION' defaultMessage='Add Version' />\r\n                                    </Nav.Link> */}\r\n                    {/* </Col> */}\r\n                    {/* </Row> */}\r\n                    <Row className=\"no-gutters\">\r\n                        <Col md={12}>\r\n                            {this.props.masterData.YearVersion && this.props.masterData.YearVersion.length > 0 ?\r\n                                <CustomAccordion key=\"filter\"\r\n                                    accordionTitle={\"sversionno\"}\r\n                                    accordionComponent={this.holidayYearVersionAccordion(this.props.masterData.YearVersion)}\r\n                                    inputParam={{ masterData: this.props.masterData, userInfo: this.props.userInfo }}\r\n                                    accordionClick={this.props.getCommonAndPublicHolidays}\r\n                                    accordionPrimaryKey={\"nholidayyearversion\"}\r\n                                    accordionObjectName={\"version\"}\r\n                                    selectedKey={this.props.masterData.selectedYearVersion.nholidayyearversion}\r\n                                />\r\n                                : \"\"}\r\n                        </Col>\r\n                    </Row>\r\n                </Card>\r\n                {/* </Col>\r\n                </Row> */}\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal show={this.props.openChildModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.props.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        updateStore={this.props.updateStore}\r\n                        esign={this.props.loadEsign}\r\n                        showSaveContinue={this.props.screenName === \"IDS_PUBLICHOLIDAYS\"|| this.props.screenName === \"IDS_USERBASEDHOLIDAYS\"? true : false}\r\n                        validateEsign={this.validateEsign}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={mandatoryFields}\r\n                        addComponent={this.props.loadEsign ?\r\n                            <Esign operation={this.props.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> :\r\n                            this.props.screenName === \"IDS_COMMONHOLIDAYS\" ?\r\n                                <AddCommonHolidays selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    inputParam={this.props.inputParam}\r\n                                />\r\n                                : this.props.screenName === \"IDS_PUBLICHOLIDAYS\" ?\r\n                                    <AddPublicHolidays\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        handleDateChange={this.handleDateChange}\r\n                                        onComboChange={this.onComboChange}\r\n                                        timeZoneList={this.props.timeZoneList || []}\r\n                                        userInfo={this.props.userInfo}\r\n                                        minDate={new Date(\"01-01-\" + this.props.masterData.selectedYear.syear)}\r\n                                        maxDate={new Date(\"12-31-\" + this.props.masterData.selectedYear.syear)}\r\n                                    />\r\n                                    :\r\n                                    <AddUserBasedHolidays\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        handleDateChange={this.handleDateChange}\r\n                                        onComboChange={this.onComboChange}\r\n                                        timeZoneList={this.props.timeZoneList || []}\r\n                                        userInfo={this.props.userInfo}\r\n                                        minDate={new Date(\"01-01-\" + this.props.masterData.selectedYear.syear)}\r\n                                        maxDate={new Date(\"12-31-\" + this.props.masterData.selectedYear.syear)}\r\n                                        Users={this.props.Users}\r\n                                    />\r\n\r\n                        }\r\n                    />}\r\n            </>\r\n        );\r\n    }\r\n    ConfirmDelete = (obj) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.Delete(obj));\r\n    }\r\n\r\n    holidayYearVersionAccordion = (yearVersion) => {\r\n        const accordionMap = new Map();\r\n        yearVersion.map((version) =>\r\n            accordionMap.set(version.nholidayyearversion,\r\n                <HolidayPlannerTabsAccordion version={version}\r\n                    userRoleControlRights={this.props.userRoleControlRights}\r\n                    controlMap={this.props.controlMap}\r\n                    userInfo={this.props.userInfo}\r\n                    sendApproveYearVersion={this.approveVersion}\r\n                    ConfirmDelete={this.ConfirmDelete}\r\n                    masterData={this.props.masterData}\r\n                    // deleteRecord={this.Delete}\r\n                    tabDetail={this.tabDetail(version)}\r\n                    onTabChange={this.onTabChange}\r\n                />)\r\n        )\r\n        return accordionMap;\r\n    }\r\n    tabDetail = (version) => {\r\n        const tabMap = new Map();\r\n        tabMap.set(\"IDS_COMMONHOLIDAYS\", <CommonHolidaysTab userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            screenName={\"IDS_COMMONHOLIDAYS\"}\r\n            getCommonHolidays={this.sendCommonHolidays}\r\n            masterData={this.props.masterData}\r\n            version={version}\r\n        />)\r\n        tabMap.set(\"IDS_PUBLICHOLIDAYS\", <PublicHolidaysTab userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            screenName={\"IDS_PUBLICHOLIDAYS\"}\r\n            getPublicHolidays={this.getPublicHolidays}\r\n            masterData={this.props.masterData}\r\n            version={version}\r\n            dataResult={process(this.state.PublicHolidays || [], this.state.dataState)}\r\n            dataState={this.state.dataState}\r\n            dataStateChange={this.dataStateChange}\r\n            publicHolidaysColumns={this.publicHolidaysColumns}\r\n            deleteRecord={this.Delete}\r\n            selectedId={this.props.selectedId}\r\n        />)\r\n        tabMap.set(\"IDS_USERBASEDHOLIDAYS\", <UserBasedHolidays userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            screenName={\"IDS_USERBASEDHOLIDAYS\"}\r\n            getUserBasedHolidays={this.getUserBasedHolidays}\r\n            masterData={this.props.masterData}\r\n            version={version}\r\n            dataResult={process(this.state.UserBasedHolidays || [], this.state.userBasedDataState)}\r\n            dataState={this.state.userBasedDataState}\r\n            dataStateChange={this.dataStateChangeUserBasedHolidays}\r\n            userBasedHolidaysColumns={this.userBasedHolidaysColumns}\r\n            deleteRecord={this.Delete}\r\n            selectedId={this.props.selectedId}\r\n        />)\r\n        return tabMap;\r\n    }\r\n    getPublicHolidays = (inputParam) => {\r\n\r\n        if (this.props.masterData.selectedYearVersion.ntransactionstatus === transactionStatus.DRAFT) {\r\n            this.props.getPublicHolidays(inputParam)\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTVERSION\" }))\r\n        }\r\n    }\r\n\r\n\r\n    \r\n\r\n\r\n\r\n    getUserBasedHolidays = (inputParam) => {\r\n\r\n        if (this.props.masterData.selectedYearVersion.ntransactionstatus === transactionStatus.DRAFT) {\r\n            this.props.getUserBasedHolidays(inputParam)\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTVERSION\" }))\r\n        }\r\n    }\r\n\r\n    sendCommonHolidays = (screenName, operation, masterData, userInfo, editID) => {\r\n        // if (masterData.selectedYearVersion && masterData.selectedYearVersion.ntransactionstatus === transactionStatus.APPROVED) {\r\n        //     toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\" }));\r\n        // }\r\n        // else {\r\n        this.props.getCommonHolidays(screenName, operation, masterData, userInfo, editID);\r\n        // }\r\n\r\n    }\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        if (fieldName === \"ntzddate\") {\r\n            if (comboData === null) {\r\n                selectedRecord[\"ntzddate\"] = 0;\r\n                selectedRecord[\"stzddate\"] = \"\";\r\n            }\r\n            else {\r\n                selectedRecord[\"stzddate\"] = comboData.label;\r\n            }\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n            }\r\n            else {\r\n                if (this.props.screenName === \"HolidayYearVersion\") {\r\n                    openChildModal = false;\r\n                }\r\n                loadEsign = false;\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord, selectedId: null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    handleDateChange = (dateName, dateValue) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[dateName] = dateValue;\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onInputOnChange = (event) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === 'ntransactionstatus') {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            }\r\n            else if (event.target.name === \"agree\") {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n            }\r\n            else {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n            }\r\n\r\n        }\r\n\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    approveVersion = (yearVersion, approveYearVersion) => {\r\n\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"holidayyearversion\"] = { \"nyearcode\": yearVersion.nyearcode, \"nholidayyearversion\": yearVersion.nholidayyearversion, \"ntransactionstatus\": yearVersion.ntransactionstatus };\r\n\r\n        const inputParam = {\r\n            classUrl: this.props.inputParam.classUrl,\r\n            methodUrl: \"HolidayYearVersion\",\r\n            inputData: inputData,\r\n            operation: approveYearVersion.operation\r\n        }\r\n\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, approveYearVersion.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                    openChildModal: true, screenName: approveYearVersion.screenName, operation: approveYearVersion.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n        }\r\n    }\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        let inputParam = {};\r\n        let validDate = false;\r\n        // if (this.props.masterData.selectedYearVersion && this.props.masterData.selectedYearVersion.stransdisplaystatus === intl.formatMessage({ id: \"IDS_APPROVED\" })) {\r\n        //     toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\" }));\r\n        // }\r\n        // else {\r\n        if (this.props.screenName === \"IDS_COMMONHOLIDAYS\") {\r\n            validDate = true;\r\n            inputParam = this.UpdateCommonHolidays(saveType, formRef);\r\n        }\r\n        else if (this.props.screenName === \"IDS_PUBLICHOLIDAYS\") {\r\n\r\n            let year = new Date(this.state.selectedRecord[\"ddate\"]).getFullYear()\r\n            validDate = String(year).length === 4 && String(year) === this.props.masterData.selectedYear.syear ? true : false;\r\n            inputParam = this.SavePublicHolidays(saveType, formRef);\r\n        }\r\n        else if (this.props.screenName === \"IDS_USERBASEDHOLIDAYS\") {\r\n\r\n            let year = new Date(this.state.selectedRecord[\"ddate\"]).getFullYear()\r\n            validDate = String(year).length === 4 && String(year) === this.props.masterData.selectedYear.syear ? true : false;\r\n            inputParam = this.SaveUserBasedHolidays(saveType, formRef);\r\n        }\r\n        if (validDate) {\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_INVALIDDATE\" }))\r\n        }\r\n        // }\r\n    }\r\n    addVersion = (addParam) => {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        let fieldList = [\"nholidayyearversion\", \"nversioncode\"];\r\n        if (this.props.operation === \"update\") {\r\n\r\n            inputData[\"holidayyearversion\"] = { \"nyearcode\": this.props.masterData.selectedYear.nyearcode };\r\n            fieldList.map(item => {\r\n                return inputData[\"holidayyearversion\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\r\n            })\r\n        }\r\n        else {\r\n\r\n            inputData[\"holidayyearversion\"] = { \"nyearcode\": this.props.masterData.selectedYear.nyearcode, \"nversioncode\": 0 };\r\n\r\n        }\r\n        const inputParam = {\r\n            classUrl: this.props.inputParam.classUrl,\r\n            methodUrl: \"HolidayYearVersion\",\r\n            inputData: inputData,\r\n            operation: \"create\", saveType: addParam.saveType\r\n        }\r\n\r\n\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, addParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                    openChildModal: true, screenName: addParam.screenName, operation: addParam.operation, saveType: addParam.saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n        }\r\n        // this.props.crudMaster(inputParam, this.props.masterData);\r\n    }\r\n    UpdateCommonHolidays(saveType, formRef) {\r\n\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        let fieldList = [\"nmonday\", \"ntuesday\", \"nwednesday\",\r\n            \"nthursday\", \"nfriday\", \"nsaturday\", \"nsunday\"];\r\n\r\n        if (this.props.operation === \"update\") {\r\n\r\n            inputData[\"commonholidays\"] = {\r\n                \"nyearcode\": this.props.masterData.selectedYear.nyearcode,\r\n                \"nholidayyearversion\": this.props.masterData.CommonHolidays[0].nholidayyearversion, \"ncommonholidaycode\": this.props.masterData.CommonHolidays[0].ncommonholidaycode\r\n            };\r\n\r\n            fieldList.map(item => {\r\n                return inputData[\"commonholidays\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\r\n            })\r\n        }\r\n\r\n        const inputParam = {\r\n            classUrl: this.props.inputParam.classUrl,\r\n            methodUrl: \"CommonHolidays\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef\r\n        }\r\n        return inputParam;\r\n\r\n    }\r\n\r\n    SaveUserBasedHolidays(saveType, formRef) {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        // let fieldList = [\"npublicholidaycode\", \"ddate\", \"sdescription\"];\r\n\r\n        if (this.props.operation === \"update\") {\r\n\r\n            inputData[\"userbasedholidays\"] = {\r\n                \"nyearcode\": this.props.masterData.selectedYear.nyearcode,\r\n                \"nholidayyearversion\": this.props.masterData.CommonHolidays[0].nholidayyearversion\r\n            };\r\n            // fieldList.map(item => {\r\n            //     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\r\n            // })\r\n            inputData[\"userbasedholidays\"][\"nuserbasedholidaycode\"] = this.state.selectedRecord[\"nuserbasedholidaycode\"] ? this.state.selectedRecord[\"nuserbasedholidaycode\"] : 0;\r\n            inputData[\"userbasedholidays\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value  : -1;\r\n            inputData[\"userbasedholidays\"][\"ddate\"] = this.state.selectedRecord[\"ddate\"] ? this.state.selectedRecord[\"ddate\"] : 0;\r\n            inputData[\"userbasedholidays\"][\"sdescription\"] = this.state.selectedRecord[\"sdescription\"] ? this.state.selectedRecord[\"sdescription\"] : 0;\r\n\r\n            inputData[\"userbasedholidays\"][\"ntzddate\"] = this.state.selectedRecord[\"ntzddate\"] ? this.state.selectedRecord[\"ntzddate\"].value : -1;\r\n            inputData[\"userbasedholidays\"][\"stzddate\"] = this.state.selectedRecord[\"stzddate\"] || \"\";\r\n        }\r\n        else {\r\n\r\n            inputData[\"userbasedholidays\"] = {\r\n                \"nyearcode\": this.props.masterData.selectedYear.nyearcode,\r\n                \"nholidayyearversion\": this.props.masterData.CommonHolidays[0].nholidayyearversion\r\n            };\r\n\r\n            // fieldList.map(item => {\r\n            //     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item]\r\n            // })\r\n\r\n            inputData[\"userbasedholidays\"][\"nuserbasedholidaycode\"] = this.state.selectedRecord[\"nuserbasedholidaycode\"] ? this.state.selectedRecord[\"nuserbasedholidaycode\"] : 0;\r\n            inputData[\"userbasedholidays\"][\"ddate\"] = this.state.selectedRecord[\"ddate\"] ? this.state.selectedRecord[\"ddate\"] : 0;\r\n            inputData[\"userbasedholidays\"][\"sdescription\"] = this.state.selectedRecord[\"sdescription\"] ? this.state.selectedRecord[\"sdescription\"] : 0;\r\n            inputData[\"userbasedholidays\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : -1;\r\n            inputData[\"userbasedholidays\"][\"ntzddate\"] = this.state.selectedRecord[\"ntzddate\"] ? this.state.selectedRecord[\"ntzddate\"].value : -1;\r\n            inputData[\"userbasedholidays\"][\"stzddate\"] = this.state.selectedRecord[\"stzddate\"] || \"\";\r\n        }\r\n\r\n        const publicHolidayDate = inputData[\"userbasedholidays\"][\"ddate\"];\r\n        //need this conversion when the datatype of the field is 'Instant'\r\n        inputData[\"userbasedholidays\"][\"ddate\"] = formatInputDate(publicHolidayDate, false);\r\n\r\n        const inputParam = {\r\n            classUrl: this.props.inputParam.classUrl,\r\n            methodUrl: \"UserBasedHolidays\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef\r\n        }\r\n        return inputParam;\r\n        //this.props.crudMaster(inputParam, this.props.masterData);\r\n    }\r\n    SavePublicHolidays(saveType, formRef) {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        // let fieldList = [\"npublicholidaycode\", \"ddate\", \"sdescription\"];\r\n\r\n        if (this.props.operation === \"update\") {\r\n\r\n            inputData[\"publicholidays\"] = {\r\n                \"nyearcode\": this.props.masterData.selectedYear.nyearcode,\r\n                \"nholidayyearversion\": this.props.masterData.CommonHolidays[0].nholidayyearversion\r\n            };\r\n            // fieldList.map(item => {\r\n            //     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\r\n            // })\r\n            inputData[\"publicholidays\"][\"npublicholidaycode\"] = this.state.selectedRecord[\"npublicholidaycode\"] ? this.state.selectedRecord[\"npublicholidaycode\"] : 0;\r\n            inputData[\"publicholidays\"][\"ddate\"] = this.state.selectedRecord[\"ddate\"] ? this.state.selectedRecord[\"ddate\"] : 0;\r\n            inputData[\"publicholidays\"][\"sdescription\"] = this.state.selectedRecord[\"sdescription\"] ? this.state.selectedRecord[\"sdescription\"] : 0;\r\n\r\n            inputData[\"publicholidays\"][\"ntzddate\"] = this.state.selectedRecord[\"ntzddate\"] ? this.state.selectedRecord[\"ntzddate\"].value : -1;\r\n            inputData[\"publicholidays\"][\"stzddate\"] = this.state.selectedRecord[\"stzddate\"] || \"\";\r\n        }\r\n        else {\r\n\r\n            inputData[\"publicholidays\"] = {\r\n                \"nyearcode\": this.props.masterData.selectedYear.nyearcode,\r\n                \"nholidayyearversion\": this.props.masterData.CommonHolidays[0].nholidayyearversion\r\n            };\r\n\r\n            // fieldList.map(item => {\r\n            //     return inputData[\"publicholidays\"][item] = this.state.selectedRecord[item]\r\n            // })\r\n\r\n            inputData[\"publicholidays\"][\"npublicholidaycode\"] = this.state.selectedRecord[\"npublicholidaycode\"] ? this.state.selectedRecord[\"npublicholidaycode\"] : 0;\r\n            inputData[\"publicholidays\"][\"ddate\"] = this.state.selectedRecord[\"ddate\"] ? this.state.selectedRecord[\"ddate\"] : 0;\r\n            inputData[\"publicholidays\"][\"sdescription\"] = this.state.selectedRecord[\"sdescription\"] ? this.state.selectedRecord[\"sdescription\"] : 0;\r\n\r\n            inputData[\"publicholidays\"][\"ntzddate\"] = this.state.selectedRecord[\"ntzddate\"] ? this.state.selectedRecord[\"ntzddate\"].value : -1;\r\n            inputData[\"publicholidays\"][\"stzddate\"] = this.state.selectedRecord[\"stzddate\"] || \"\";\r\n        }\r\n\r\n        const publicHolidayDate = inputData[\"publicholidays\"][\"ddate\"];\r\n        //need this conversion when the datatype of the field is 'Instant'\r\n        inputData[\"publicholidays\"][\"ddate\"] = formatInputDate(publicHolidayDate, false);\r\n\r\n        const inputParam = {\r\n            classUrl: this.props.inputParam.classUrl,\r\n            methodUrl: \"PublicHolidays\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef\r\n        }\r\n        return inputParam;\r\n        //this.props.crudMaster(inputParam, this.props.masterData);\r\n    }\r\n    // Delete = (e, selectedRecord, Type, methodURL,operation,screenName, ncontrolCode) => {\r\n    Delete = (deleteParam) => {\r\n        let inputData = [];\r\n\r\n        if (this.props.masterData.selectedYearVersion && this.props.masterData.selectedYearVersion.ntransactionstatus !== transactionStatus.DRAFT) {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTEDYEARVERSIONMUSTBEDRAFT\" }));\r\n        }\r\n        else {\r\n            inputData[deleteParam.methodUrl.toLowerCase()] = deleteParam.selectedRecord;\r\n            inputData[\"userinfo\"] = this.props.userInfo;\r\n            const inputParam = {\r\n                methodUrl: deleteParam.methodUrl,\r\n                classUrl: this.props.inputParam.classUrl,\r\n                inputData: inputData,\r\n                operation: \"delete\",\r\n                dataState: this.state.dataState\r\n            }\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                        openChildModal: true, screenName: deleteParam.screenName, operation: deleteParam.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                if (showEsign(this.props.userRoleControlRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n                    const updateInfo = {\r\n                        typeName: DEFAULT_RETURN,\r\n                        data: {\r\n                            loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                            openChildModal: true, screenName: deleteParam.screenName, operation: deleteParam.operation\r\n                        }\r\n                    }\r\n                    this.props.updateStore(updateInfo);\r\n                }\r\n                else {\r\n                    this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n                }\r\n            }\r\n        }\r\n        //this.props.crudMaster(inputParam, this.props.masterData);\r\n    }\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n\r\n            let selectedRecord = this.props.selectedRecord || this.state.selectedRecord;\r\n            let { dataState,userBasedDataState } = this.state;\r\n            if (this.props.dataState === undefined) {\r\n                dataState = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5 }\r\n                userBasedDataState={...dataState}\r\n            }\r\n            if (this.props.operation === \"create\" && this.props.inputParam.saveType === 2) {\r\n\r\n                this.props.inputParam.formRef && this.props.inputParam.formRef.current.reset();\r\n                selectedRecord = {\r\n                    ddate: new Date(), sdescription: '',\r\n                    ntzddate: {\r\n                        \"value\": this.props.userInfo.ntimezonecode,\r\n                        \"label\": this.props.userInfo.stimezoneid\r\n                    },\r\n                    stzddate: this.props.userInfo.stimezoneid\r\n                };\r\n            }\r\n            this.setState({\r\n                YearVersion: this.props.masterData.YearVersion,\r\n                CommonHolidays: this.props.masterData.CommonHolidays,\r\n                CurrentYearVersion: this.props.masterData.CurrentYearVersion, \r\n                PublicHolidays: this.props.masterData.PublicHolidays,\r\n                UserBasedHolidays: this.props.masterData.UserBasedHolidays,\r\n                dataState, selectedRecord,userBasedDataState\r\n\r\n            });\r\n        }\r\n        else if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n    }\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n}\r\nexport default injectIntl(HolidayPlannerTab);"]},"metadata":{},"sourceType":"module"}