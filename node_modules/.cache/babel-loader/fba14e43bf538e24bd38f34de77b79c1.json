{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{version}from'react';import{Row,Col,Card}from'react-bootstrap';import{injectIntl}from'react-intl';import{process}from'@progress/kendo-data-query';import SlideOutModal from'../../../components/slide-out-modal/SlideOutModal';import{DEFAULT_RETURN}from'../../../actions/LoginTypes';import{constructOptionList,onDropAttachFileList,deleteAttachmentDropZone,showEsign,create_UUID}from'../../../components/CommonScript';import CustomTabs from'../../../components/custom-tabs/custom-tabs.component';import{connect}from'react-redux';import TrainingParticipantsTab from'./TrainingParticipantsTab';import TrainingDocTab from'./TrainingDocTab';import AddTrainingDocFile from'./AddTrainingDocFile';import AddTraineeDocFile from'./AddTraineeDocFile';import Esign from'../../audittrail/Esign';import{attachmentType,FORMULAFIELDTYPE,transactionStatus}from'../../../components/Enumeration';import AddParticipantsStatus from'../trainingcertificate/AddParticipantsStatus';import{addtraineedocfile}from'../../../actions';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var TrainingUpdateChildTab=/*#__PURE__*/function(_React$Component){_inherits(TrainingUpdateChildTab,_React$Component);var _super=_createSuper(TrainingUpdateChildTab);function TrainingUpdateChildTab(props){var _this;_classCallCheck(this,TrainingUpdateChildTab);_this=_super.call(this,props);_this.TrainingDocumentDataStateChange=function(event){_this.setState({dataState:event.dataState});};_this.ParticipantsDataStateChange=function(event){_this.setState({dataStateParticipants:event.dataState});};_this.handleChange=function(value,valueParam,isSection){if(value!==null){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[valueParam]=value;_this.setState({selectedRecord:selectedRecord});}};_this.tabDetail=function(){var tabMap=new Map();tabMap.set(\"IDS_TRAININGDOCUMENTS\",/*#__PURE__*/React.createElement(TrainingDocTab,{screenName:\"TrainingDocuments\",onInputOnChange:_this.onInputOnChange,controlMap:_this.props.controlMap,updateStore:_this.props.updateStore,userRoleControlRights:_this.props.userRoleControlRights,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,TrainingDocument:_this.props.masterData.TrainingDocument||[],getAvailableData:_this.props.getAvailableData,settings:_this.props.settings,selectedRecord:_this.state.selectedRecord||{}}));tabMap.set(\"IDS_PARTICIPANTS\",/*#__PURE__*/React.createElement(TrainingParticipantsTab,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,screenName:\" TrainieeDocuments\",updateStore:_this.props.updateStore,primaryKeyField:\"nparticipantcode\",masterData:_this.props.masterData,primaryList:\"Participants\",dataResult:process(_this.props.Login.masterData[(\"Participants\",\"TraineeDocuments\")]||[],_this.state.dataStateParticipants),dataState:_this.props.screenName===undefined||_this.props.screenName===\"Participants\"?_this.state.dataStateParticipants:{skip:0},dataStateChange:function dataStateChange(event){return _this.setState({dataStateParticipants:event.data});},columnList:_this.participantsColumnList,methodUrl:\"TrainingParticipants\",fetchParticipantsRecordByID:_this.fetchParticipantsRecordByID,deleteRecord:_this.deleteRecord,getAvailableData:_this.props.getAvailableData,addtraineedoc:_this.addtraineedoc,selectedRecord:_this.state.selectedRecord||{},getTrainingParticipantsAttended:_this.props.getTrainingParticipantsAttended,getTrainingParticipantsCompetent:_this.props.getTrainingParticipantsCompetent,getTrainingParticipantsCertified:_this.props.getTrainingParticipantsCertified}));return tabMap;};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?optional[0]:optional[1];}else if(event.target.type==='radio'){selectedRecord[event.target.name]=optional;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.addtraineedoc=function(ncontrolcode){var openModal=_this.props.Login.openModal;var operation=\"create\";var screenName=_this.props.Login.screenName;screenName=\"IDS_TRAINEEDOCUMENTS\";openModal=true;var selectedRecord=_this.props.selectedRecord;var updateInfo={userInfo:_this.props.Login.userInfo,operation:operation,selectedRecord:selectedRecord,ncontrolcode:ncontrolcode,screenName:screenName};_this.props.addtraineedocfile(updateInfo);// const updateInfo = {\n//     typeName: DEFAULT_RETURN,\n//     data: {\n//         openModal: true,\n//         operation: \"create\",\n//         selectedRecord: {},\n//         ncontrolcode: ncontrolcode,\n//         screenName : \"IDS_TRAINEEDOCUMENTS\" \n//     }\n// }\n// this.props.updateStore(updateInfo);\n};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"||_this.props.Login.operation===\"certify\"||_this.props.Login.operation===\"attend\"||_this.props.Login.operation===\"competent\"||_this.props.Login.operation===\"complete\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;}}else{openModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.onDropTrainingDoc=function(attachedFiles,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.onDropTrainieeDoc=function(attachedFiles,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"});};_this.deleteRecord=function(deleteParam){var _inputData;var methodUrl=deleteParam.methodUrl;var selected=deleteParam.selectedRecord;var dataState=undefined;var inputParam={inputData:(_inputData={},_defineProperty(_inputData,methodUrl.toLowerCase(),selected),_defineProperty(_inputData,\"userinfo\",_this.props.userInfo),_inputData),classUrl:\"trainingupdate\",operation:deleteParam.operation,methodUrl:methodUrl,dataState:dataState};var masterData=_this.props.masterData;if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,operation:deleteParam.operation,selectedRecord:{}}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\",{});}};_this.onSaveClick=function(saveType,formRef){var inputParam={};var defaultInput={};var isValidRequest=true;if(_this.props.screenName===\"IDS_TRAININGDOCUMENTS\"){inputParam=_this.onSaveTrainingDoc(saveType,formRef);}if(_this.props.screenName===\"IDS_TRAINEEDOCUMENTS\"){inputParam=_this.onSaveTrainieeDoc(saveType,formRef);}if(_this.props.screenName===\"IDS_ATTENDPARTICIPANTSDETAILS\"){inputParam=_this.onSaveAttended(saveType,formRef);}if(_this.props.screenName===\"IDS_CERTIFYPARTICIPANTSDETAILS\"){inputParam=_this.onSaveCertified(saveType,formRef);}if(_this.props.screenName===\"IDS_COMPETENTPARTICIPANTSDETAILS\"){inputParam=_this.onSaveCompetent(saveType,formRef);}if(isValidRequest){if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openModal\",defaultInput);}}};_this.onSaveAttended=function(saveType,formRef){var inputData=[];var trainingupdate=[];var dataState=undefined;var postParam={inputListName:\"TechniqueList\",selectedObject:\"SelectedTrainingUpdate\",primaryKeyField:\"ntrainingcode\"};inputData[\"userinfo\"]=_this.props.userInfo;_this.props.selectedRecord.nusercode&&_this.props.selectedRecord.nusercode.map(function(participants){trainingupdate.push({ntrainingcode:_this.props.masterData.SelectedTrainingUpdate.ntrainingcode,nparticipantcode:_this.props.masterData.selectedParticipants.nparticipantcode,ntransactionstatus:transactionStatus.ATTENDED,ncertifiedstatus:transactionStatus.NO,ncompetencystatus:transactionStatus.NO,nusercode:participants.item.nusercode,ntechniquecode:_this.props.masterData.selectedTechinque.ntechniquecode});});inputData[\"trainingupdate\"]=trainingupdate;var inputParam={classUrl:'trainingupdate',methodUrl:\"TrainingParticipants\",inputData:inputData,operation:\"attend\",saveType:saveType,formRef:formRef,dataState:dataState,postParam:postParam};return inputParam;};_this.onSaveCertified=function(saveType,formRef){var inputData=[];var trainingupdate=[];var dataState=undefined;var postParam={inputListName:\"TechniqueList\",selectedObject:\"SelectedTrainingUpdate\",primaryKeyField:\"ntrainingcode\"};inputData[\"userinfo\"]=_this.props.userInfo;_this.props.selectedRecord.nusercode&&_this.props.selectedRecord.nusercode.map(function(participants){trainingupdate.push({ntrainingcode:_this.props.masterData.SelectedTrainingUpdate.ntrainingcode,nparticipantcode:_this.props.masterData.selectedParticipants.nparticipantcode,ntransactionstatus:transactionStatus.ATTENDED,ncertifiedstatus:transactionStatus.YES,ncompetencystatus:transactionStatus.NO,nusercode:participants.item.nusercode,ntechniquecode:_this.props.masterData.selectedTechinque.ntechniquecode});});inputData[\"trainingupdate\"]=trainingupdate;var inputParam={classUrl:'trainingupdate',methodUrl:\"TrainingParticipants\",inputData:inputData,operation:\"certify\",saveType:saveType,formRef:formRef,dataState:dataState,postParam:postParam};return inputParam;};_this.onSaveCompetent=function(saveType,formRef){var inputData=[];var trainingupdate=[];var dataState=undefined;var postParam={inputListName:\"TechniqueList\",selectedObject:\"SelectedTrainingUpdate\",primaryKeyField:\"ntrainingcode\"};inputData[\"userinfo\"]=_this.props.userInfo;_this.props.selectedRecord.nusercode&&_this.props.selectedRecord.nusercode.map(function(participants){trainingupdate.push({ntrainingcode:_this.props.masterData.SelectedTrainingUpdate.ntrainingcode,nparticipantcode:_this.props.masterData.selectedParticipants.nparticipantcode,ntransactionstatus:transactionStatus.ATTENDED,ncertifiedstatus:transactionStatus.NO,ncompetencystatus:transactionStatus.YES,nusercode:participants.item.nusercode,ntechniquecode:_this.props.masterData.selectedTechinque.ntechniquecode});});inputData[\"trainingupdate\"]=trainingupdate;var inputParam={classUrl:'trainingupdate',methodUrl:\"TrainingParticipants\",inputData:inputData,operation:\"competent\",saveType:saveType,formRef:formRef,dataState:dataState,postParam:postParam};return inputParam;};_this.onSaveTrainingDoc=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var trainingdocArray=[];var trainingdoc={ntrainingcode:_this.props.masterData.SelectedTrainingUpdate.ntrainingcode,ntrainingdoccode:selectedRecord.ntrainingdoccode?selectedRecord.ntrainingdoccode:0,nstatus:transactionStatus.ACTIVE};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},trainingdoc);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=selectedRecord.ssystemfilename?selectedRecord.ssystemfilename.split('.'):\"\";var filesystemfileext=selectedRecord.ssystemfilename?file.name.split('.')[ssystemfilename.length-1]:\"\";var uniquefilename=nattachmenttypecode===attachmentType.FTP?selectedRecord.ntrainingdoccode&&selectedRecord.ntrainingdoccode>0&&selectedRecord.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=file.name.trim();tempData[\"sfiledesc\"]=selectedRecord.sfiledesc?selectedRecord.sfiledesc.trim():\"\";tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"nattachmenttypecode\"]=1;// tempData[\"dcreateddate\"] = this.props.Login.userInfo;\nformData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);trainingdocArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{trainingdoc[\"sfilename\"]=selectedRecord.sfilename;trainingdoc[\"sfiledesc\"]=selectedRecord.sfiledesc?selectedRecord.sfiledesc.trim():\"\";trainingdoc[\"ssystemfilename\"]=selectedRecord.ssystemfilename;trainingdoc[\"nlinkcode\"]=transactionStatus.NA;trainingdoc[\"nfilesize\"]=selectedRecord.nfilesize;trainingdoc[\"dcreateddate\"]=_this.props.Login.userInfo;trainingdoc[\"nattachmenttypecode\"]=1;trainingdocArray.push(trainingdoc);}}else{trainingdoc[\"ssystemfilename\"]=\"\";trainingdoc[\"nattachmenttypecode\"]=2;trainingdoc[\"sfilename\"]=selectedRecord.slinkfilename;trainingdoc[\"sfiledesc\"]=selectedRecord.sfiledesc?selectedRecord.sfiledesc.trim():\"\";trainingdoc[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;trainingdoc[\"nfilesize\"]=0;trainingdocArray.push(trainingdoc);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"trainingdoc\",JSON.stringify(trainingdocArray));var inputParam={inputData:{userinfo:_this.props.userInfo},formData:formData,isFileupload:true,operation:_this.props.operation,classUrl:\"trainingupdate\",saveType:saveType,formRef:formRef,methodUrl:\"TrainingDoc\"};return inputParam;};_this.onSaveTrainieeDoc=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var trainieedocArray=[];var trainieedoc={nparticipantcode:_this.props.masterData.selectedParticipants.nparticipantcode,ntraineedoccode:selectedRecord.ntraineedoccode?selectedRecord.ntraineedoccode:0,nstatus:transactionStatus.ACTIVE};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},trainieedoc);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=selectedRecord.ssystemfilename?selectedRecord.ssystemfilename.split('.'):\"\";var filesystemfileext=selectedRecord.ssystemfilename?file.name.split('.')[ssystemfilename.length-1]:\"\";var uniquefilename=nattachmenttypecode===attachmentType.FTP?selectedRecord.ntraineedoccode&&selectedRecord.ntraineedoccode>0&&selectedRecord.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=file.name;tempData[\"sfiledesc\"]=selectedRecord.sfiledesc?selectedRecord.sfiledesc.trim():\"\";tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"nattachmenttypecode\"]=1;// tempData[\"dcreateddate\"] = this.props.Login.userInfo;\nformData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);trainieedocArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{trainieedoc[\"sfilename\"]=selectedRecord.sfilename;trainieedoc[\"sfiledesc\"]=selectedRecord.sfiledesc?selectedRecord.sfiledesc.trim():\"\";trainieedoc[\"ssystemfilename\"]=selectedRecord.ssystemfilename;trainieedoc[\"nlinkcode\"]=transactionStatus.NA;trainieedoc[\"nfilesize\"]=selectedRecord.nfilesize;trainieedoc[\"dcreateddate\"]=_this.props.Login.userInfo;trainieedoc[\"nattachmenttypecode\"]=1;trainieedocArray.push(trainieedoc);}}else{trainieedoc[\"ssystemfilename\"]=\"\";trainieedoc[\"nattachmenttypecode\"]=2;trainieedoc[\"sfilename\"]=selectedRecord.slinkfilename;trainieedoc[\"sfiledesc\"]=selectedRecord.sfiledesc?selectedRecord.sfiledesc.trim():\"\";trainieedoc[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;trainieedoc[\"nfilesize\"]=0;trainieedocArray.push(trainieedoc);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"trainieedoc\",JSON.stringify(trainieedocArray));var inputParam={inputData:{userinfo:_this.props.userInfo},formData:formData,isFileupload:true,operation:_this.props.operation,classUrl:\"trainingupdate\",saveType:saveType,formRef:formRef,methodUrl:\"TrainieeDoc\"};return inputParam;};_this.fetchParticipantsRecordByID=function(operation,version,ncontrolCode){var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;inputData[\"trainingparticipants\"]={\"nusercode\":version.nusercode,\"nparticipantcode\":version.nparticipantcode,\"ntrainingcode\":version.ntrainingcode,\"ncertifiedstatus\":version.ncertifiedstatus,\"ncompetencystatus\":version.ncompetencystatus,\"ntransactionstatus\":version.ntransactionstatus};var postParam={inputListName:\"TechniqueList\",selectedObject:\"SelectedTrainingUpdate\",primaryKeyField:\"ntrainingcode\",primaryKeyValue:_this.props.Login.masterData.TechniqueList.ntrainingcode,fetchUrl:\"trainingupdate/getTraningUpdateByTechnique\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"TrainingParticipants\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,postParam:postParam,operation:operation};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,operation:operation,screenName:'',id:'ParticipantsStatus'}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};var _dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};var dataStateParticipants={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={isOpen:false,selectedRecord:{},dataResult:[],activeTab:'Trainingdoc-tab',dataState:_dataState,dataStateParticipants:dataStateParticipants,trainingDocument:[],participants:[]};_this.trainingDocumentFieldList=['ntrainingdoccode','nparticipantcode','ntrainingcode','sfilename','ntechniquecode','sfullname','nstatus','ntransactionstatus'];_this.trainingDocumentColumnList=[{\"idsName\":\"IDS_TRAININGDOCUMENTNAME\",\"dataField\":\"sfilename\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];_this.participantsColumnList=[{\"idsName\":\"IDS_PARTICIPANTSNAME\",\"dataField\":\"sfullname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];// this.validationTrainingDocumentColumnList = [{ \"idsName\": \"IDS_TRAININGDOCUMENTNAME\", \"dataField\": \"sfilename\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }];\n_this.validationParticipantsColumnList=[{\"idsName\":\"IDS_PARTICIPANTS\",\"dataField\":\"sfullname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];return _this;}_createClass(TrainingUpdateChildTab,[{key:\"render\",value:function render(){// const mandatoryFields = [];\n// this.validationTrainingDocumentColumnList.forEach(item => item.mandatory === true ?\n//    mandatoryFields.push(item) : \"\"\n//  );\nvar mandatoryFields=[];if(this.props.screenName===\"IDS_TRAININGDOCUMENTS\"||this.props.screenName===\"IDS_TRAINEEDOCUMENTS\"){if(this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK){mandatoryFields.push({\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});}else{mandatoryFields.push({\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"});}}else{mandatoryFields.push({mandatory:true,idsName:\"IDS_PARTICIPANTNAME\",dataField:\"nusercode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs\"},/*#__PURE__*/React.createElement(CustomTabs,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange})))),this.props.Login.openModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,formatMessage:this.props.intl.formatMessage,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.screenName===\"IDS_TRAININGDOCUMENTS\"?/*#__PURE__*/React.createElement(AddTrainingDocFile,{selectedRecord:this.state.selectedRecord||{},onDrop:this.onDropTrainingDoc,onInputOnChange:this.onInputOnChange,deleteAttachment:this.deleteAttachment,formatMessage:this.props.intl.formatMessage,label:this.props.intl.formatMessage({id:\"IDS_FILENAME\"}),operation:this.props.Login.operation,userLogged:this.props.Login.userLogged,inputParam:this.props.Login.inputParam,selectedId:this.props.Login.selectedId,maxSize:20,maxFiles:1,linkMaster:this.props.Login.linkMaster,onComboChange:this.props.onComboChange}):this.props.screenName===\"IDS_TRAINEEDOCUMENTS\"?/*#__PURE__*/React.createElement(AddTraineeDocFile,{selectedRecord:this.state.selectedRecord||{},onDrop:this.onDropTrainieeDoc,onInputOnChange:this.onInputOnChange,deleteAttachment:this.deleteAttachment,formatMessage:this.props.intl.formatMessage,label:this.props.intl.formatMessage({id:\"IDS_FILENAME\"}),operation:this.props.Login.operation,userLogged:this.props.Login.userLogged,inputParam:this.props.Login.inputParam,selectedId:this.props.Login.selectedId,linkMaster:this.props.Login.linkMaster,onComboChange:this.props.onComboChange}):/*#__PURE__*/React.createElement(AddParticipantsStatus,{selectedRecord:this.props.selectedRecord||{},onInputOnChange:this.onInputOnChange,handleChange:this.handleChange,formatMessage:this.props.formatMessage,usersStatus:this.props.usersStatus||[],nusercode:this.props.nusercode||[],selectedTrainingParticipants:this.props.masterData.SelectedTrainingParticipants||{},extractedColumnList:this.extractedColumnList})}));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.masterData!==previousProps.masterData){var isOpen=false;if(this.props.errorCode!==undefined&&(this.state.operation===\"create\"||this.state.operation===\"update\")){isOpen=true;}var _this$state=this.state,_dataState2=_this$state.dataState,_dataStateParticipants=_this$state.dataStateParticipants;if(this.props.dataState===undefined){_dataState2={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5,filter:undefined,sort:undefined};_dataStateParticipants={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5,filter:undefined,sort:undefined};}this.setState({isOpen:isOpen,activeTab:'Trainingdocument-tab',dataState:_dataState2,dataStateParticipants:_dataStateParticipants});}if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}var _this$state2=this.state,dataState=_this$state2.dataState,dataStateParticipants=_this$state2.dataStateParticipants;if(this.props.dataState!==previousProps.dataState&&this.props.dataState!==dataState){dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};dataStateParticipants={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};this.setState({dataState:dataState,dataStateParticipants:dataStateParticipants});}if(this.props.trainingDocument!==previousProps.trainingDocument||this.props.participants!==previousProps.participants){var participants=constructOptionList(this.props.participants||[],\"nparticipantcode\",\"sfullname\",undefined,undefined,undefined);var participantsList=participants.get(\"OptionList\");this.setState({participants:participantsList});}}}]);return TrainingUpdateChildTab;}(React.Component);export default connect(mapStateToProps,{addtraineedocfile:addtraineedocfile})(injectIntl(TrainingUpdateChildTab));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/competencemanagement/trainingupdate/TrainingUpdateChildTab.jsx"],"names":["React","version","Row","Col","Card","injectIntl","process","SlideOutModal","DEFAULT_RETURN","constructOptionList","onDropAttachFileList","deleteAttachmentDropZone","showEsign","create_UUID","CustomTabs","connect","TrainingParticipantsTab","TrainingDocTab","AddTrainingDocFile","AddTraineeDocFile","Esign","attachmentType","FORMULAFIELDTYPE","transactionStatus","AddParticipantsStatus","addtraineedocfile","mapStateToProps","state","Login","TrainingUpdateChildTab","props","TrainingDocumentDataStateChange","event","setState","dataState","ParticipantsDataStateChange","dataStateParticipants","handleChange","value","valueParam","isSection","selectedRecord","tabDetail","tabMap","Map","set","onInputOnChange","controlMap","updateStore","userRoleControlRights","userInfo","inputParam","deleteRecord","masterData","TrainingDocument","getAvailableData","settings","screenName","undefined","skip","data","participantsColumnList","fetchParticipantsRecordByID","addtraineedoc","getTrainingParticipantsAttended","getTrainingParticipantsCompetent","getTrainingParticipantsCertified","optional","target","type","name","checked","ncontrolcode","openModal","operation","updateInfo","closeModal","loadEsign","typeName","selectedId","onDropTrainingDoc","attachedFiles","fieldName","actionType","onDropTrainieeDoc","validateEsign","inputData","sreason","password","screenData","validateEsignCredential","deleteAttachment","file","deleteParam","methodUrl","selected","toLowerCase","classUrl","esignRights","nformcode","ncontrolCode","crudMaster","onSaveClick","saveType","formRef","defaultInput","isValidRequest","onSaveTrainingDoc","onSaveTrainieeDoc","onSaveAttended","onSaveCertified","onSaveCompetent","trainingupdate","postParam","inputListName","selectedObject","primaryKeyField","nusercode","map","participants","push","ntrainingcode","SelectedTrainingUpdate","nparticipantcode","selectedParticipants","ntransactionstatus","ATTENDED","ncertifiedstatus","NO","ncompetencystatus","item","ntechniquecode","selectedTechinque","YES","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","trainingdocArray","trainingdoc","ntrainingdoccode","nstatus","ACTIVE","formData","FormData","FTP","Array","isArray","length","forEach","index","tempData","Object","assign","splittedFileName","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","trim","sfiledesc","size","NA","append","nfilesize","slinkfilename","nlinkcode","JSON","stringify","userinfo","isFileupload","trainieedocArray","trainieedoc","ntraineedoccode","primaryKeyValue","TechniqueList","fetchUrl","fecthInputObject","id","onTabChange","tabProps","take","parseInt","isOpen","dataResult","activeTab","trainingDocument","trainingDocumentFieldList","trainingDocumentColumnList","validationParticipantsColumnList","mandatoryFields","LINK","mandatory","idsName","dataField","mandatoryLabel","controlType","masterStatus","intl","formatMessage","userLogged","linkMaster","onComboChange","usersStatus","SelectedTrainingParticipants","extractedColumnList","previousProps","errorCode","filter","sort","participantsList","get","Component"],"mappings":"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","sourcesContent":["import React, { version } from 'react'\r\nimport { Row, Col, Card } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport SlideOutModal from '../../../components/slide-out-modal/SlideOutModal';\r\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes';\r\nimport { constructOptionList, onDropAttachFileList ,deleteAttachmentDropZone, showEsign,create_UUID} from '../../../components/CommonScript';\r\nimport CustomTabs from '../../../components/custom-tabs/custom-tabs.component';\r\nimport { connect } from 'react-redux';\r\nimport TrainingParticipantsTab from './TrainingParticipantsTab';\r\nimport TrainingDocTab from './TrainingDocTab';\r\nimport AddTrainingDocFile from './AddTrainingDocFile';\r\nimport AddTraineeDocFile from './AddTraineeDocFile';\r\nimport Esign from '../../audittrail/Esign';\r\nimport { attachmentType, FORMULAFIELDTYPE, transactionStatus } from '../../../components/Enumeration';\r\nimport AddParticipantsStatus from '../trainingcertificate/AddParticipantsStatus';\r\nimport { addtraineedocfile } from '../../../actions';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\nclass TrainingUpdateChildTab extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        const dataStateParticipants = {\r\n            skip: 0,\r\n            take:this.props.settings? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        this.state = {\r\n            isOpen: false, selectedRecord: {}, dataResult: [],\r\n            activeTab: 'Trainingdoc-tab',\r\n            dataState: dataState,\r\n            dataStateParticipants: dataStateParticipants, trainingDocument: [], participants: []\r\n        };\r\n        this.trainingDocumentFieldList = ['ntrainingdoccode', 'nparticipantcode', 'ntrainingcode', 'sfilename', 'ntechniquecode', 'sfullname',\r\n            'nstatus', 'ntransactionstatus'];\r\n        this.trainingDocumentColumnList = [{ \"idsName\": \"IDS_TRAININGDOCUMENTNAME\", \"dataField\": \"sfilename\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" }];\r\n        this.participantsColumnList = [{ \"idsName\": \"IDS_PARTICIPANTSNAME\", \"dataField\": \"sfullname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" }];\r\n       // this.validationTrainingDocumentColumnList = [{ \"idsName\": \"IDS_TRAININGDOCUMENTNAME\", \"dataField\": \"sfilename\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n        this.validationParticipantsColumnList = [{ \"idsName\": \"IDS_PARTICIPANTS\", \"dataField\": \"sfullname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n    }\r\n    TrainingDocumentDataStateChange = (event) => {\r\n        this.setState({\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n    ParticipantsDataStateChange = (event) => {\r\n        this.setState({\r\n            dataStateParticipants: event.dataState\r\n        });\r\n    }\r\n    handleChange = (value, valueParam, isSection) => {\r\n\r\n        if (value !== null) {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n\r\n            selectedRecord[valueParam] = value;\r\n \r\n                this.setState({ selectedRecord });\r\n           \r\n\r\n        }\r\n    }\r\n    render() {\r\n        // const mandatoryFields = [];\r\n        // this.validationTrainingDocumentColumnList.forEach(item => item.mandatory === true ?\r\n        //    mandatoryFields.push(item) : \"\"\r\n        //  );\r\n         let mandatoryFields = [];\r\n         if (this.props.screenName === \"IDS_TRAININGDOCUMENTS\"||this.props.screenName===\"IDS_TRAINEEDOCUMENTS\") {\r\n            if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n             mandatoryFields.push(\r\n                { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n                );\r\n                    }else {\r\n              mandatoryFields.push(\r\n                { \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_CHOOSE\", \"controlType\": \"file\"}\r\n                );\r\n            }\r\n                 }\r\n                     else{\r\n                         mandatoryFields.push(\r\n                             {\r\n                               mandatory: true,\r\n                               idsName: \"IDS_PARTICIPANTNAME\",\r\n                               dataField: \"nusercode\",\r\n                               mandatoryLabel: \"IDS_SELECT\",\r\n                               controlType: \"selectbox\",\r\n                             });\r\n                     }\r\n        return (\r\n            <>\r\n                <Row className=\"no-gutters\">\r\n                    <Col md={12}>\r\n                        <Card className=\"at-tabs\">\r\n                            <CustomTabs tabDetail={this.tabDetail()} onTabChange={this.onTabChange} />\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n                {this.props.Login.openModal &&\r\n                    <SlideOutModal show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                       mandatoryFields={mandatoryFields}\r\n                        addComponent={this.props.Login.loadEsign ?\r\n                            <Esign operation={this.props.Login.operation}\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                             : this.props.screenName === \"IDS_TRAININGDOCUMENTS\" ?\r\n                            <AddTrainingDocFile\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onDrop={this.onDropTrainingDoc}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                deleteAttachment={this.deleteAttachment}\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                label={this.props.intl.formatMessage({ id: \"IDS_FILENAME\" })}\r\n                                operation={this.props.Login.operation}\r\n                                userLogged={this.props.Login.userLogged}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedId={this.props.Login.selectedId}\r\n                                maxSize={20}\r\n                                maxFiles={1}\r\n                                linkMaster = {this.props.Login.linkMaster}\r\n                                onComboChange={this.props.onComboChange}\r\n                                />\r\n                            : this.props.screenName === \"IDS_TRAINEEDOCUMENTS\" ?\r\n                            <AddTraineeDocFile\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onDrop={this.onDropTrainieeDoc}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                deleteAttachment={this.deleteAttachment}\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                label={this.props.intl.formatMessage({ id: \"IDS_FILENAME\" })}\r\n                                operation={this.props.Login.operation}\r\n                                userLogged={this.props.Login.userLogged}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedId={this.props.Login.selectedId}\r\n                                linkMaster = {this.props.Login.linkMaster}\r\n                                onComboChange={this.props.onComboChange}\r\n                                />\r\n                            : <AddParticipantsStatus \r\n                            selectedRecord={this.props.selectedRecord || {}}\r\n                            onInputOnChange={this.onInputOnChange}\r\n                            handleChange={this.handleChange}\r\n                            formatMessage={this.props.formatMessage}\r\n                            usersStatus={this.props.usersStatus || []}\r\n                            nusercode={this.props.nusercode || []}\r\n                            selectedTrainingParticipants={this.props.masterData.SelectedTrainingParticipants || {}}\r\n                            extractedColumnList={this.extractedColumnList}\r\n                            />\r\n                        }\r\n                    />\r\n                }\r\n            </>\r\n\r\n        )\r\n\r\n    }\r\n\r\n\r\n    tabDetail = () => {\r\n        \r\n        const tabMap = new Map();\r\n        tabMap.set(\"IDS_TRAININGDOCUMENTS\", <TrainingDocTab\r\n                                                screenName={\"TrainingDocuments\"}\r\n\r\n                                                    onInputOnChange={this.onInputOnChange}\r\n                                                    controlMap={this.props.controlMap}\r\n                                                    updateStore={this.props.updateStore}\r\n                                                    userRoleControlRights={this.props.userRoleControlRights}\r\n                                                    userInfo={this.props.userInfo}\r\n                                                    inputParam={this.props.inputParam}\r\n                                                    deleteRecord={this.deleteRecord}\r\n                                                    TrainingDocument={this.props.masterData.TrainingDocument || []}\r\n                                                    getAvailableData={this.props.getAvailableData}\r\n                                                    settings = {this.props.settings}\r\n                                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                                    />)\r\n        tabMap.set(\"IDS_PARTICIPANTS\", <TrainingParticipantsTab \r\n                                                          \r\n                                                            userRoleControlRights={this.props.userRoleControlRights}\r\n                                                            controlMap={this.props.controlMap}\r\n                                                            inputParam={this.props.inputParam}\r\n                                                            userInfo={this.props.userInfo}\r\n                                                            screenName={\" TrainieeDocuments\"}   \r\n                                                            updateStore={this.props.updateStore}\r\n                                                            primaryKeyField={\"nparticipantcode\"}\r\n                                                            masterData={this.props.masterData}\r\n                                                            primaryList={\"Participants\"}\r\n                                                            dataResult={process(this.props.Login.masterData[\"Participants\", \"TraineeDocuments\"] || [], this.state.dataStateParticipants)}\r\n                                                            dataState={(this.props.screenName === undefined || this.props.screenName === \"Participants\") ? this.state.dataStateParticipants : { skip: 0 }}\r\n                                                            dataStateChange={(event) => this.setState({ dataStateParticipants: event.data })}\r\n                                                            columnList={this.participantsColumnList}\r\n                                                            methodUrl={\"TrainingParticipants\"}\r\n                                                            fetchParticipantsRecordByID={this.fetchParticipantsRecordByID}\r\n                                                            deleteRecord={this.deleteRecord}\r\n                                                        getAvailableData={this.props.getAvailableData}\r\n                                                        addtraineedoc={this.addtraineedoc}\r\n                                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                                        \r\n                                                        getTrainingParticipantsAttended={this.props.getTrainingParticipantsAttended}\r\n                                                        getTrainingParticipantsCompetent={this.props.getTrainingParticipantsCompetent}\r\n                                                        getTrainingParticipantsCertified={this.props.getTrainingParticipantsCertified}\r\n\r\n                                                        />)\r\n        return tabMap;\r\n    }\r\n\r\n\r\n    onInputOnChange = (event,optional) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n       \r\n           \r\n                if (event.target.type === 'checkbox') {\r\n                    selectedRecord[event.target.name] = event.target.checked === true ? optional[0] : optional[1];\r\n                } else if (event.target.type === 'radio') {\r\n                    selectedRecord[event.target.name] = optional;\r\n                } else {\r\n                    selectedRecord[event.target.name] = event.target.value;\r\n                }\r\n                this.setState({ selectedRecord });\r\n             \r\n           \r\n                }\r\n\r\n        addtraineedoc =(ncontrolcode) => {\r\n            let openModal = this.props.Login.openModal;\r\n            let operation = \"create\";\r\n            let screenName = this.props.Login.screenName;\r\n            screenName = \"IDS_TRAINEEDOCUMENTS\";\r\n            openModal = true;\r\n            const selectedRecord = this.props.selectedRecord;\r\n            const updateInfo = {\r\n                userInfo: this.props.Login.userInfo, operation, selectedRecord, ncontrolcode, screenName\r\n               };\r\n               this.props.addtraineedocfile(updateInfo);\r\n        // const updateInfo = {\r\n        //     typeName: DEFAULT_RETURN,\r\n        //     data: {\r\n        //         openModal: true,\r\n        //         operation: \"create\",\r\n        //         selectedRecord: {},\r\n        //         ncontrolcode: ncontrolcode,\r\n        //         screenName : \"IDS_TRAINEEDOCUMENTS\" \r\n\r\n        //     }\r\n        // }\r\n        // this.props.updateStore(updateInfo);\r\n    }\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\" ||\r\n                 this.props.Login.operation === \"certify\" ||\r\n                 this.props.Login.operation === \"attend\" ||\r\n                 this.props.Login.operation === \"competent\" || this.props.Login.operation === \"complete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, loadEsign, selectedRecord, selectedId: null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n    onDropTrainingDoc = (attachedFiles, fieldName) => {\r\n\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n    onDropTrainieeDoc = (attachedFiles, fieldName) => {\r\n\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\" \r\n        });\r\n    }\r\n        \r\n    \r\n    deleteRecord = (deleteParam) => {\r\n        const methodUrl = deleteParam.methodUrl;\r\n        const selected = deleteParam.selectedRecord;\r\n        let dataState = undefined;\r\n    const inputParam =   \r\n       {\r\n          inputData: {\r\n\r\n              [methodUrl.toLowerCase()]: selected,\r\n              userinfo: this.props.userInfo\r\n          },\r\n          classUrl: \"trainingupdate\",\r\n          operation: deleteParam.operation,\r\n          methodUrl: methodUrl,\r\n           dataState\r\n      }\r\n  \r\n   const masterData = this.props.masterData;\r\n      if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n          const updateInfo = {\r\n              typeName: DEFAULT_RETURN,\r\n              data: {\r\n                  loadEsign: true, screenData: { inputParam, masterData },\r\n                  openModal: true,  operation: deleteParam.operation, selectedRecord: {}\r\n              }\r\n          }\r\n          this.props.updateStore(updateInfo);\r\n      } else {\r\n          this.props.crudMaster(inputParam, masterData, \"openModal\", {});\r\n      }\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        let inputParam = {};\r\n        let defaultInput = {};\r\n        let isValidRequest = true;\r\n         if (this.props.screenName === \"IDS_TRAININGDOCUMENTS\") {\r\n            inputParam = this.onSaveTrainingDoc(saveType, formRef);\r\n        } \r\n        if (this.props.screenName === \"IDS_TRAINEEDOCUMENTS\") {\r\n            inputParam = this.onSaveTrainieeDoc(saveType, formRef);\r\n        } \r\n        if (this.props.screenName === \"IDS_ATTENDPARTICIPANTSDETAILS\") {\r\n            inputParam = this.onSaveAttended(saveType, formRef);\r\n        } \r\n        if (this.props.screenName === \"IDS_CERTIFYPARTICIPANTSDETAILS\") {\r\n            inputParam = this.onSaveCertified(saveType, formRef);\r\n        } \r\n        if (this.props.screenName === \"IDS_COMPETENTPARTICIPANTSDETAILS\") {\r\n            inputParam = this.onSaveCompetent(saveType, formRef);\r\n        } \r\n        if (isValidRequest) {\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openModal\", defaultInput);\r\n            }\r\n        }\r\n    }\r\n    onSaveAttended = (saveType, formRef) => {\r\n        let inputData = [];\r\n        let trainingupdate = [];\r\n        let dataState = undefined;\r\n        let postParam = { inputListName: \"TechniqueList\", selectedObject: \"SelectedTrainingUpdate\", primaryKeyField: \"ntrainingcode\" };\r\n\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n            this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\r\n                trainingupdate.push({\r\n                    ntrainingcode: this.props.masterData.SelectedTrainingUpdate.ntrainingcode,\r\n                    nparticipantcode: this.props.masterData.selectedParticipants.nparticipantcode,\r\n                    ntransactionstatus: transactionStatus.ATTENDED,\r\n                    ncertifiedstatus: transactionStatus.NO,\r\n                    ncompetencystatus: transactionStatus.NO,\r\n                    nusercode: participants.item.nusercode,\r\n                ntechniquecode: this.props.masterData.selectedTechinque.ntechniquecode\r\n                })\r\n    \r\n            })\r\n            inputData[\"trainingupdate\"] = trainingupdate\r\n\r\n            const inputParam = {\r\n                classUrl: 'trainingupdate',\r\n                methodUrl: \"TrainingParticipants\",\r\n                inputData: inputData,\r\n                operation: \"attend\",saveType, formRef, dataState,\r\n                postParam\r\n            }\r\n            return inputParam;\r\n            \r\n    }\r\n    onSaveCertified = (saveType, formRef) => {\r\n        let inputData = [];\r\n        let trainingupdate = [];\r\n        let dataState = undefined;\r\n        let postParam = { inputListName: \"TechniqueList\", selectedObject: \"SelectedTrainingUpdate\", primaryKeyField: \"ntrainingcode\" };\r\n\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n            this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\r\n                trainingupdate.push({\r\n                    ntrainingcode: this.props.masterData.SelectedTrainingUpdate.ntrainingcode,\r\n                    nparticipantcode: this.props.masterData.selectedParticipants.nparticipantcode,\r\n                    ntransactionstatus: transactionStatus.ATTENDED,\r\n                    ncertifiedstatus: transactionStatus.YES,\r\n                    ncompetencystatus: transactionStatus.NO,\r\n                    nusercode: participants.item.nusercode,\r\n                    ntechniquecode: this.props.masterData.selectedTechinque.ntechniquecode\r\n\r\n                })\r\n    \r\n            })\r\n            inputData[\"trainingupdate\"] = trainingupdate\r\n\r\n            const inputParam = {\r\n                classUrl: 'trainingupdate',\r\n                methodUrl: \"TrainingParticipants\",\r\n                inputData: inputData,\r\n                operation: \"certify\",saveType, formRef, dataState,postParam\r\n            }\r\n            return inputParam;            \r\n    }\r\n    onSaveCompetent = (saveType, formRef) => {\r\n        let inputData = [];\r\n        let trainingupdate = [];\r\n        let dataState = undefined;\r\n        let postParam = { inputListName: \"TechniqueList\", selectedObject: \"SelectedTrainingUpdate\", primaryKeyField: \"ntrainingcode\" };\r\n\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n            this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\r\n                trainingupdate.push({\r\n                    ntrainingcode: this.props.masterData.SelectedTrainingUpdate.ntrainingcode,\r\n                    nparticipantcode: this.props.masterData.selectedParticipants.nparticipantcode,\r\n                    ntransactionstatus: transactionStatus.ATTENDED,\r\n                    ncertifiedstatus: transactionStatus.NO,\r\n                    ncompetencystatus: transactionStatus.YES,\r\n                    nusercode: participants.item.nusercode,\r\n                    ntechniquecode: this.props.masterData.selectedTechinque.ntechniquecode\r\n\r\n                })\r\n    \r\n            })\r\n            inputData[\"trainingupdate\"] = trainingupdate\r\n\r\n            const inputParam = {\r\n                classUrl: 'trainingupdate',\r\n                methodUrl: \"TrainingParticipants\",\r\n                inputData: inputData,\r\n                operation: \"competent\",saveType, formRef, dataState,postParam\r\n            }\r\n            return inputParam;            \r\n    }\r\n    onSaveTrainingDoc = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = transactionStatus.NO;\r\n        let trainingdocArray = [];\r\n        let trainingdoc = {\r\n            ntrainingcode: this.props.masterData.SelectedTrainingUpdate.ntrainingcode,\r\n            ntrainingdoccode: selectedRecord.ntrainingdoccode ? selectedRecord.ntrainingdoccode : 0,\r\n            nstatus: transactionStatus.ACTIVE,\r\n           \r\n        };\r\n        const formData = new FormData();\r\n        if (nattachmenttypecode === attachmentType.FTP) {\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                acceptedFiles.forEach((file, index) => {\r\n                    const tempData = Object.assign({}, trainingdoc);\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                    const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                    const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                    const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.ntrainingdoccode && selectedRecord.ntrainingdoccode > 0\r\n                        && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                    tempData[\"sfilename\"] = file.name.trim();\r\n                    tempData[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n                    tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    tempData[\"nfilesize\"] = file.size;\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    tempData[\"nattachmenttypecode\"] = 1;\r\n                    // tempData[\"dcreateddate\"] = this.props.Login.userInfo;\r\n                    formData.append(\"uploadedFile\" + index, file);\r\n                    formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                    trainingdocArray.push(tempData);\r\n                });\r\n                formData.append(\"filecount\", acceptedFiles.length);\r\n                isFileEdited = transactionStatus.YES;\r\n            } else {\r\n                trainingdoc[\"sfilename\"] = selectedRecord.sfilename;\r\n                trainingdoc[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n                trainingdoc[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                trainingdoc[\"nlinkcode\"] = transactionStatus.NA;\r\n                trainingdoc[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                trainingdoc[\"dcreateddate\"] = this.props.Login.userInfo;\r\n                trainingdoc[\"nattachmenttypecode\"] = 1;\r\n                trainingdocArray.push(trainingdoc);\r\n            }\r\n        } else {\r\n            trainingdoc[\"ssystemfilename\"] = \"\";\r\n            trainingdoc[\"nattachmenttypecode\"] = 2;\r\n            trainingdoc[\"sfilename\"] = selectedRecord.slinkfilename;\r\n            trainingdoc[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n            trainingdoc[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            trainingdoc[\"nfilesize\"] = 0;\r\n            trainingdocArray.push(trainingdoc);\r\n        }\r\n        \r\n        formData.append(\"isFileEdited\", isFileEdited);\r\n        formData.append(\"trainingdoc\", JSON.stringify(trainingdocArray));\r\n        const inputParam = {\r\n            inputData: { userinfo: this.props.userInfo },\r\n            formData: formData,\r\n            isFileupload: true,\r\n            operation: this.props.operation,\r\n            classUrl: \"trainingupdate\",\r\n            saveType, formRef, methodUrl: \"TrainingDoc\"\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onSaveTrainieeDoc = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = transactionStatus.NO;\r\n        let trainieedocArray = [];\r\n        let trainieedoc = {\r\n            nparticipantcode: this.props.masterData.selectedParticipants.nparticipantcode,\r\n            ntraineedoccode: selectedRecord.ntraineedoccode ? selectedRecord.ntraineedoccode : 0,\r\n            nstatus: transactionStatus.ACTIVE,\r\n        };\r\n        const formData = new FormData();\r\n        if (nattachmenttypecode === attachmentType.FTP) {\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                acceptedFiles.forEach((file, index) => {\r\n                    const tempData = Object.assign({}, trainieedoc);\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                    const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                    const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                    const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.ntraineedoccode && selectedRecord.ntraineedoccode > 0\r\n                        && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                    tempData[\"sfilename\"] = file.name;\r\n                    tempData[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n                    tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    tempData[\"nfilesize\"] = file.size;\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    tempData[\"nattachmenttypecode\"] = 1;\r\n                    // tempData[\"dcreateddate\"] = this.props.Login.userInfo;\r\n                    formData.append(\"uploadedFile\" + index, file);\r\n                    formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                    trainieedocArray.push(tempData);\r\n                });\r\n                formData.append(\"filecount\", acceptedFiles.length);\r\n                isFileEdited = transactionStatus.YES;\r\n            } else {\r\n                trainieedoc[\"sfilename\"] = selectedRecord.sfilename;\r\n                trainieedoc[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n                trainieedoc[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                trainieedoc[\"nlinkcode\"] = transactionStatus.NA;\r\n                trainieedoc[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                trainieedoc[\"dcreateddate\"] = this.props.Login.userInfo;\r\n                trainieedoc[\"nattachmenttypecode\"] = 1;\r\n                trainieedocArray.push(trainieedoc);\r\n            }\r\n        } else {\r\n            trainieedoc[\"ssystemfilename\"] = \"\";\r\n            trainieedoc[\"nattachmenttypecode\"] = 2;\r\n            trainieedoc[\"sfilename\"] = selectedRecord.slinkfilename;\r\n            trainieedoc[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n            trainieedoc[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            trainieedoc[\"nfilesize\"] = 0;\r\n            trainieedocArray.push(trainieedoc);\r\n        }\r\n        formData.append(\"isFileEdited\", isFileEdited);\r\n        formData.append(\"trainieedoc\", JSON.stringify(trainieedocArray));\r\n        const inputParam = {\r\n            inputData: { userinfo: this.props.userInfo },\r\n            formData: formData,\r\n            isFileupload: true,\r\n            operation: this.props.operation,\r\n            classUrl: \"trainingupdate\",\r\n            saveType, formRef, methodUrl: \"TrainieeDoc\"\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    // fetchParticipantsRecordByID = (operation,version,ncontrolCode) => {\r\n\r\n    //     let inputData = [];\r\n    //     inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n    //     inputData[\"trainingparticipants\"] = {\r\n    //         \"nusercode\": version.nusercode,\r\n    //         \"nparticipantcode\": version.nparticipantcode,\r\n    //         \"ntrainingcode\": version.ntrainingcode,\r\n    //         \"ncertifiedstatus\" : version.ncertifiedstatus,\r\n    //         \"ncompetencystatus\" : version.ncompetencystatus,\r\n    //         \"ntransactionstatus\" : version.ntransactionstatus\r\n\r\n    //     }\r\n    //     const postParam = {\r\n    //         inputListName: \"TechniqueList\", \r\n    //         selectedObject: \"SelectedTrainingUpdate\",\r\n    //         primaryKeyField: \"ntrainingcode\",\r\n    //         primaryKeyValue: this.props.Login.masterData.TechniqueList.ntrainingcode,\r\n    //         fetchUrl: \"trainingupdate/getTraningUpdateByTechnique\",\r\n    //         fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n    //     }\r\n    //     const inputParam = {\r\n    //         methodUrl: \"TrainingParticipants\",\r\n    //         classUrl: this.props.Login.inputParam.classUrl,\r\n    //         inputData: inputData, postParam,\r\n    //         operation\r\n    //     }\r\n    //     const masterData = this.props.Login.masterData;\r\n\r\n    //     if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n    //         const updateInfo = {\r\n    //             typeName: DEFAULT_RETURN,\r\n    //             data: {\r\n    //                 loadEsign: true, \r\n    //                 screenData: { inputParam, masterData }, \r\n    //                 openModal: true, \r\n    //                 operation, \r\n    //                 screenName: '', \r\n    //                 id: 'ParticipantsStatus'\r\n    //             }\r\n    //         }\r\n    //         this.props.updateStore(updateInfo);\r\n    //     }\r\n    //     else {\r\n    //         this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n    //     }\r\n    // }\r\n    \r\n    fetchParticipantsRecordByID = (operation,version,ncontrolCode) => {\r\n\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        inputData[\"trainingparticipants\"] = {\r\n            \"nusercode\": version.nusercode,\r\n            \"nparticipantcode\": version.nparticipantcode,\r\n            \"ntrainingcode\": version.ntrainingcode,\r\n            \"ncertifiedstatus\" : version.ncertifiedstatus,\r\n            \"ncompetencystatus\" : version.ncompetencystatus,\r\n            \"ntransactionstatus\" : version.ntransactionstatus\r\n\r\n        }\r\n        const postParam = {\r\n            inputListName: \"TechniqueList\", \r\n            selectedObject: \"SelectedTrainingUpdate\",\r\n            primaryKeyField: \"ntrainingcode\",\r\n            primaryKeyValue: this.props.Login.masterData.TechniqueList.ntrainingcode,\r\n            fetchUrl: \"trainingupdate/getTraningUpdateByTechnique\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"TrainingParticipants\",\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData, postParam,\r\n            operation\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, \r\n                    screenData: { inputParam, masterData }, \r\n                    openModal: true, \r\n                    operation, \r\n                    screenName: '', \r\n                    id: 'ParticipantsStatus'\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n  \r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n\r\n            let isOpen = false;\r\n            if (this.props.errorCode !== undefined && (this.state.operation === \"create\" || this.state.operation === \"update\")) {\r\n                isOpen = true;\r\n            }\r\n            let { dataState, dataStateParticipants } = this.state;\r\n            if(this.props.dataState === undefined)\r\n            {\r\n                dataState={skip: 0,take:this.props.settings? parseInt(this.props.settings[14]) : 5,filter:undefined,sort:undefined}\r\n                dataStateParticipants = { skip: 0, take :this.props.settings? parseInt(this.props.settings[14]) : 5,filter:undefined,sort:undefined }\r\n            } \r\n            this.setState({ isOpen, activeTab: 'Trainingdocument-tab',dataState, dataStateParticipants });\r\n        }\r\n\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n        let { dataState, dataStateParticipants } = this.state;\r\n        if (this.props.dataState !== previousProps.dataState && this.props.dataState !== dataState) {\r\n            dataState = { skip: 0,take : this.props.settings? parseInt(this.props.settings[14]) : 5 }\r\n            dataStateParticipants = { skip: 0 , take:this.props.settings? parseInt(this.props.settings[14]) : 5}\r\n            this.setState({ dataState, dataStateParticipants });\r\n        }\r\n     \r\n       \r\n        if (this.props.trainingDocument !== previousProps.trainingDocument || this.props.participants !== previousProps.participants) {\r\n\r\n           \r\n            const participants = constructOptionList(this.props.participants || [], \"nparticipantcode\",\r\n                \"sfullname\", undefined, undefined, undefined);\r\n            const participantsList = participants.get(\"OptionList\");\r\n\r\n            this.setState({ \r\n                 participants: participantsList });\r\n        }\r\n    }\r\n\r\n    onTabChange = (tabProps) =>{\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {screenName}\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps,{addtraineedocfile})(injectIntl(TrainingUpdateChildTab));\r\n\r\n"]},"metadata":{},"sourceType":"module"}