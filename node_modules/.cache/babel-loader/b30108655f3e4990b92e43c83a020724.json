{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{injectIntl}from'react-intl';import{Row,Col}from'react-bootstrap';import{toast}from'react-toastify';import{process}from'@progress/kendo-data-query';import DynamicDataGrid from'../../components/data-grid/data-grid.component';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import Esign from'../../pages/audittrail/Esign';import{callService,crudMaster,updateStore,validateEsignCredential,getEditDynamicMasterCombo,//fetchRecord,\ngetDynamicMasterCombo,getChildValues,addMasterRecord,getAddMasterCombo,getDynamicMasterTempalte,getChildComboMaster}from'../../actions';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,getControlMap,deleteAttachmentDropZone,getSameRecordFromTwoArrays,onDropAttachFileList,convertDateTimetoString,validateEmail,formatDate,sortData,ageCalculate,formatInputDate,extractFieldHeader,childComboClear}from'../../components/CommonScript';import{ListWrapper}from'../../components/client-group.styles';import DynamicSlideout from'../dynamicpreregdesign/DynamicSlideout.jsx';import{designComponents,transactionStatus}from'../../components/Enumeration';import{getFieldSpecification}from'../../components/type2component/Type2FieldSpecificationList';import AddMasterRecords from'../dynamicpreregdesign/AddMasterRecords';import{getFieldSpecification as getFieldSpecification1}from'../../components/type1component/Type1FieldSpecificationList';import{getFieldSpecification as getFieldSpecification3}from'../../components/type3component/Type3FieldSpecificationList';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var DynamicMaster=/*#__PURE__*/function(_React$Component){_inherits(DynamicMaster,_React$Component);var _super=_createSuper(DynamicMaster);function DynamicMaster(props){var _this;_classCallCheck(this,DynamicMaster);_this=_super.call(this,props);_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.data||[],event.dataState),dataState:event.dataState});};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;var selectedMaster=_this.props.Login.selectedMaster;var selectedControl=_this.props.Login.selectedControl;var masterextractedColumnList=_this.props.Login.masterextractedColumnList;var masterfieldList=_this.props.Login.masterfieldList;var masterprimaryKeyField=_this.props.Login.masterprimaryKeyField;var addMaster=_this.props.Login.addMaster;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}}else if(_this.props.Login.addMaster){selectedMaster={};selectedControl={};masterextractedColumnList=[];masterfieldList={};masterprimaryKeyField=\"\";addMaster=false;}else{openModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null,selectedMaster:selectedMaster,selectedControl:selectedControl,masterextractedColumnList:masterextractedColumnList,masterfieldList:masterfieldList,masterprimaryKeyField:masterprimaryKeyField,addMaster:addMaster}};_this.props.updateStore(updateInfo);};_this.onComboChangeMasterDyanmic=function(comboData,control,customName){var comboName=customName||control.label;var selectedMaster=_this.state.selectedMaster||{};//if (comboData) {\ncomboData[\"item\"]=_objectSpread(_objectSpread({},comboData[\"item\"]),{},{\"pkey\":control.valuemember,\"nquerybuildertablecode\":control.nquerybuildertablecode,\"source\":control.source});selectedMaster[comboName]=comboData;// console.log(\"selected:\", selectedMaster, comboData, control, customName);\nif(control.child&&control.child.length>0){var childComboList=getSameRecordFromTwoArrays(_this.props.Login.mastercomboComponents,control.child,\"label\");var childColumnList={};childComboList.map(function(columnList){var val=_this.comboChild(_this.props.Login.mastercomboComponents,columnList,childColumnList,false);childColumnList=val.childColumnList;});var parentList=getSameRecordFromTwoArrays(_this.props.Login.masterwithoutCombocomponent,control.child,\"label\");if(comboData){var inputParem={child:control.child,source:control.source,primarykeyField:control.valuemember,value:comboData.value,item:comboData.item};_this.props.getChildValuesForAddMaster(inputParem,_this.props.Login.userInfo,selectedMaster,_this.props.Login.mastedataList,childComboList,childColumnList,_this.props.Login.masterwithoutCombocomponent,[].concat(_toConsumableArray(childComboList),_toConsumableArray(parentList)));}else{var _comboData=_this.props.Login.mastedataList;var withoutCombocomponent=_this.props.Login.masterwithoutCombocomponent||[];var inputParam={control:control,comboComponents:_this.props.Login.mastercomboComponents,withoutCombocomponent:withoutCombocomponent,selectedMaster:selectedMaster,comboData:_comboData};var childParam=childComboClear(inputParam);selectedMaster=childParam.selectedRecord;_comboData=childParam.comboData;var updateInfo={typeName:DEFAULT_RETURN,data:{selectedMaster:selectedMaster,mastedataList:_comboData}};_this.props.updateStore(updateInfo);}}else{var _updateInfo={typeName:DEFAULT_RETURN,data:{selectedMaster:selectedMaster}};_this.props.updateStore(_updateInfo);}};_this.onInputOnChangeMasterDynamic=function(event,radiotext){var selectedMaster=_this.state.selectedMaster||{};if(event.target.type==='toggle'){selectedMaster[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else if(event.target.type==='numeric'){if(/\\D/.test(event.target.value))selectedMaster[event.target.name]=event.target.value;}else if(event.target.type==='checkbox'){var value=selectedMaster[event.target.name];if(value!==''&&value!==undefined){if(value.includes(radiotext)){var index=value.indexOf(radiotext);if(index!==-1){if(index===0){var indexcomma=value.indexOf(\",\");if(indexcomma!==-1){selectedMaster[event.target.name]=value.slice(indexcomma+1);}else{selectedMaster[event.target.name]=\"\";}}else{if(value.slice(index).indexOf(\",\")!==-1){selectedMaster[event.target.name]=value.slice(0,index)+value.slice(index+value.slice(index).indexOf(\",\")+1);}else{selectedMaster[event.target.name]=value.slice(0,index-1);}}}}else{selectedMaster[event.target.name]=value+','+radiotext;}}else{selectedMaster[event.target.name]=radiotext;}}else if(event.target.type==='radio'){selectedMaster[event.target.name]=radiotext;}else{selectedMaster[event.target.name]=event.target.value;}_this.setState({selectedMaster:selectedMaster});};_this.handleDateChangeMasterDynamic=function(dateValue,dateName){var selectedMaster=_this.state.selectedMaster;selectedMaster[dateName]=dateValue;_this.setState({selectedMaster:selectedMaster});};_this.onNumericInputChangeMasterDynamic=function(value,name){var selectedMaster=_this.state.selectedMaster;selectedMaster[name]=value;_this.setState({selectedMaster:selectedMaster});};_this.onNumericBlurMasterDynamic=function(value,control){var selectedMaster=_this.state.selectedMaster;if(selectedMaster[control.label]){if(control.max){if(!(selectedMaster[control.label]<parseFloat(control.max))){selectedMaster[control.label]=control.precision?parseFloat(control.max):parseInt(control.max);}}if(control.min){if(!(selectedMaster[control.label]>parseFloat(control.min))){selectedMaster[control.label]=control.precision?parseFloat(control.min):parseInt(control.min);}}}_this.setState({selectedMaster:selectedMaster});};_this.onComboChangeMaster=function(comboData,fieldName,item){var selectedMaster=_this.state.selectedMaster||{};if(comboData!==null){if(_this.props.Login.selectedControl.table.item.nformcode===137){selectedMaster[item.tableDataField]=comboData.value;}else if(item.foreignDataField){selectedMaster[item.foreignDataField]=comboData.value;}}selectedMaster[fieldName]=comboData;if(item.childIndex!==undefined){_this.props.getChildComboMaster(selectedMaster,fieldName,item,_this.props.Login.selectedControl,_this.props.Login.masterfieldList,_this.props.Login.masterdataList,_this.props.Login.userInfo);}else{_this.setState({selectedMaster:selectedMaster});}};_this.handleDateChangeMaster=function(dateName,dateValue,item){var selectedMaster=_this.state.selectedMaster;selectedMaster[dateName]=dateValue;var age=ageCalculate(dateValue);selectedMaster[\"sage\"]=age;_this.setState({selectedMaster:selectedMaster});};_this.onNumericInputOnChangeMaster=function(value,name,item){var selectedMaster=_this.state.selectedMaster||{};selectedMaster[name]=value;_this.setState({selectedMaster:selectedMaster});};_this.onInputOnChangeMaster=function(event){var selectedMaster=_this.state.selectedMaster||{};if(event.target.type==='checkbox'){selectedMaster[event.target.name]=event.target.checked===true?3:4;if(_this.props.Login.selectedControl.table.item.nformcode===137){if(selectedMaster.nneedcurrentaddress===3){selectedMaster.sflatnotemp=selectedMaster.sflatno;selectedMaster.shousenotemp=selectedMaster.shouseno;selectedMaster.spostalcodetemp=selectedMaster.spostalcode;selectedMaster.sstreettemp=selectedMaster.sstreet;selectedMaster.scitynametemp=selectedMaster.scityname;selectedMaster.sdistrictnametemp=selectedMaster.sdistrictname;selectedMaster.sregionnametemp=selectedMaster.sregionname;}else{selectedMaster.sflatnotemp=\"\";selectedMaster.shousenotemp=\"\";selectedMaster.spostalcodetemp=\"\";selectedMaster.sstreettemp=\"\";selectedMaster.scitynametemp=\"\";selectedMaster.sdistrictnametemp=\"\";selectedMaster.sregionnametemp=\"\";}}}else{selectedMaster[event.target.name]=event.target.value;}_this.setState({selectedMaster:selectedMaster});};_this.onSaveMasterRecord=function(saveType,formRef){//add / edit            \nvar inputData=[];inputData[\"userinfo\"]=_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{nformcode:_this.props.Login.selectedControl.table.item.nformcode});inputData[_this.props.Login.selectedControl.table.item.methodUrl.toLowerCase()]={\"nsitecode\":_this.props.Login.userInfo.nmastersitecode};var methodUrl=_this.props.Login.selectedControl.table.item.methodUrl.toLowerCase();if(_this.props.Login.selectedControl.table.item.component==='Dynamic'){var selectedMaster=_this.state.selectedMaster;inputData[\"userinfo\"]=_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{nformcode:_this.props.Login.selectedControl.table.item.nformcode});inputData[\"masterdateconstraints\"]=_this.props.Login.masterDesign.screendesign.masterdateconstraints;inputData[\"masterdatefields\"]=_this.props.Login.masterDesign.screendesign.masterdatefields;inputData[\"mastercombinationunique\"]=_this.props.Login.masterDesign.screendesign.mastercombinationunique;//add                          \ninputData[\"dynamicmaster\"]={nformcode:_this.props.Login.selectedControl.table.item.nformcode,ndesigntemplatemappingcode:_this.props.Login.masterDesign.ndesigntemplatemappingcode,jsondata:{},jsonuidata:{}};var dateList=[];var defaulttimezone=_this.props.Login.defaulttimezone;_this.props.Login.masterDesign&&_this.props.Login.masterDesign.slideoutdesign.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.hasOwnProperty(\"children\")){component.children.map(function(componentrow){if(componentrow.inputtype===\"combo\"){inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=selectedMaster[componentrow.label]?{value:selectedMaster[componentrow.label].value,label:selectedMaster[componentrow.label].label,pkey:selectedMaster[componentrow.label].item.pkey,nquerybuildertablecode:selectedMaster[componentrow.label].item.nquerybuildertablecode,source:selectedMaster[componentrow.label].item.source}:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=selectedMaster[componentrow.label]?selectedMaster[componentrow.label].label:\"\";}else if(componentrow.inputtype===\"date\"){if(componentrow.mandatory){inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=formatDate(selectedMaster[componentrow.label],false);inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];//inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\n}else{inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=componentrow.loadcurrentdate?formatDate(selectedMaster[componentrow.label]||new Date(),false):selectedMaster[componentrow.label]?formatDate(selectedMaster[componentrow.label],false):\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];//convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\n}if(componentrow.timezone){inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(componentrow.label)]=selectedMaster[\"tz\".concat(componentrow.label)]?{value:selectedMaster[\"tz\".concat(componentrow.label)].value,label:selectedMaster[\"tz\".concat(componentrow.label)].label}:defaulttimezone?defaulttimezone:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][\"tz\".concat(componentrow.label)]=inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(componentrow.label)];}dateList.push(componentrow.label);}else{inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=selectedMaster[componentrow.label]?selectedMaster[componentrow.label]:\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];// inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\n}return inputData[\"dynamicmaster\"];});}else{if(component.inputtype===\"combo\"){inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=selectedMaster[component.label]?{value:selectedMaster[component.label].value,label:selectedMaster[component.label].label,pkey:selectedMaster[component.label].item.pkey,nquerybuildertablecode:selectedMaster[component.label].item.nquerybuildertablecode,source:selectedMaster[component.label].item.source}:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label].label;//selectedRecord[component.label] ? selectedRecord[component.label].label : \"\"\n}else if(component.inputtype===\"date\"){if(component.mandatory){inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=formatDate(selectedMaster[component.label],false);// convertDateTimetoString(selectedRecord[component.label] ?\n// selectedRecord[component.label] : new Date(), userInfo);\ninputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label];//convertDateTimetoString(selectedRecord[component.label], userInfo);\n}else{inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=component.loadcurrentdate?//convertDateTimetoString(selectedRecord[component.label] ?                                      \n//    selectedRecord[component.label] : new Date(), userInfo) :\nformatDate(selectedMaster[component.label]||new Date(),false):selectedMaster[component.label]?// convertDateTimetoString(selectedRecord[component.label] ?\n//   selectedRecord[component.label] : new Date(), userInfo) : \"\";\nformatDate(selectedMaster[component.label],false):\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label];//convertDateTimetoString(selectedRecord[component.label], userInfo)\n}if(component.timezone){inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(component.label)]=selectedMaster[\"tz\".concat(component.label)]?{value:selectedMaster[\"tz\".concat(component.label)].value,label:selectedMaster[\"tz\".concat(component.label)].label}:defaulttimezone?defaulttimezone:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][\"tz\".concat(component.label)]=inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(component.label)];}dateList.push(component.label);}else{inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=selectedMaster[component.label]?selectedMaster[component.label]:\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label];}}return inputData[\"dynamicmaster\"];});return inputData[\"dynamicmaster\"];});return inputData[\"dynamicmaster\"];});inputData[\"dynamicmaster\"][\"jsonstring\"]=JSON.stringify(inputData[\"dynamicmaster\"][\"jsondata\"]);inputData[\"dynamicmaster\"][\"jsonuistring\"]=JSON.stringify(inputData[\"dynamicmaster\"][\"jsonuidata\"]);inputData[\"masterdatelist\"]=dateList;}else if(_this.props.Login.selectedControl.table.item.component==='Type3Component'&&_this.props.Login.selectedControl.table.item.nformcode===137){inputData[\"noneedfilter\"]=true;_this.props.Login.masterextractedColumnList.map(function(item){var fieldName=item.dataField;if(item.isJsonField===true){return inputData[methodUrl][item.jsonObjectName]=_objectSpread(_objectSpread({},inputData[methodUrl][item.jsonObjectName]),{},_defineProperty({},fieldName,_this.state.selectedMaster[fieldName]?_this.state.selectedMaster[fieldName]:\"\"));}else{if(item.controlType===\"selectbox\"){// inputData[methodUrl][fieldName] = this.state.selectedMaster[fieldName] ? this.state.selectedMaster[fieldName].label ? this.state.selectedMaster[fieldName].label : \"\" : -1;\ninputData[methodUrl][item.tableDataField]=_this.state.selectedMaster[fieldName]?_this.state.selectedMaster[fieldName].value?_this.state.selectedMaster[fieldName].value:\"\":-1;return inputData;}else if(item.controlType===\"datepicker\"){inputData[methodUrl][item.dateField]=formatInputDate(_this.state.selectedMaster[fieldName]?_this.state.selectedMaster[fieldName]:\"\",false);}else if(item.controlType===\"checkbox\"){inputData[methodUrl][item.controlName]=_this.state.selectedMaster[item.controlName]?_this.state.selectedMaster[item.controlName]:transactionStatus.NO;}else{inputData[methodUrl][fieldName]=_this.state.selectedMaster[fieldName]?_this.state.selectedMaster[fieldName]:\"\";}// inputData[methodUrl][selectedRecordPrimarykey] = this.props.Login.selectedId;\nreturn inputData;}});}else{_this.props.Login.masterextractedColumnList.map(function(item){var fieldName=item.dataField;if(item.isJsonField===true){return inputData[methodUrl][item.jsonObjectName]=_objectSpread(_objectSpread({},inputData[methodUrl][item.jsonObjectName]),{},_defineProperty({},fieldName,_this.state.selectedMaster[fieldName]?_this.state.selectedMaster[fieldName]:\"\"));}else{if(item.controlType===\"selectbox\"){inputData[methodUrl][fieldName]=_this.state.selectedMaster[fieldName]?_this.state.selectedMaster[fieldName].label?_this.state.selectedMaster[fieldName].label:\"\":-1;inputData[methodUrl][item.foreignDataField]=_this.state.selectedMaster[fieldName]?_this.state.selectedMaster[fieldName].value?_this.state.selectedMaster[fieldName].value:\"\":-1;return inputData;}else if(item.controlType===\"datepicker\"){inputData[methodUrl][item.dateField]=formatInputDate(_this.state.selectedMaster[fieldName]?_this.state.selectedMaster[fieldName]:\"\",false);}else if(item.controlType===\"checkbox\"){inputData[methodUrl][item.controlName]=_this.state.selectedMaster[item.controlName]?_this.state.selectedMaster[item.controlName]:transactionStatus.NO;}else{inputData[methodUrl][fieldName]=_this.state.selectedMaster[fieldName]?_this.state.selectedMaster[fieldName]:\"\";}// inputData[methodUrl][selectedRecordPrimarykey] = this.props.Login.selectedId;\nreturn inputData;}});}// }\nvar inputParam={withoutCombocomponent:_this.state.withoutCombocomponent,comboComponents:_this.state.comboComponents,selectedRecord:_this.state.selectedRecord,selectedRecordName:'selectedRecord',loadSubSample:false,selectedControl:_this.props.Login.selectedControl,comboData:_this.props.Login.comboData,comboName:'comboData',classUrl:_this.props.Login.selectedControl.table.item.classUrl,methodUrl:_this.props.Login.selectedControl.table.item.methodUrl,displayName:_this.props.Login.selectedControl.table.item.sdisplayname,inputData:inputData,operation:\"create\",saveType:saveType,formRef:formRef};_this.props.addMasterRecord(inputParam,_this.props.Login.masterData);// if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n//     const updateInfo = {\n//         typeName: DEFAULT_RETURN,\n//         data: {\n//             loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\n//             openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }),\n//             operation: this.props.Login.operation\n//         }\n//     }\n//     this.props.updateStore(updateInfo);\n// }\n// else {\n//  this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\n//  }\n};_this.addMasterRecord=function(control){var fieldList=[];var masterComboColumnFiled=[];var extractedColumnList=[];if(control.table.item.component==='Type2Component'||control.table.item.component==='Type1Component'){if(control.table.item.component==='Type2Component'){fieldList=getFieldSpecification().get(control.table.item.methodUrl)||[];}else{fieldList=getFieldSpecification1().get(control.table.item.methodUrl)||[];}extractedColumnList=extractFieldHeader(Object.values(fieldList));var primaryKeyField=Object.keys(fieldList).length>0?fieldList[0].dataField:\"\";var updateInfo={typeName:DEFAULT_RETURN,data:{selectedControl:control,addMaster:true,masterfieldList:fieldList,masterextractedColumnList:extractedColumnList,masterprimaryKeyField:primaryKeyField,masterComboColumnFiled:masterComboColumnFiled}};_this.props.updateStore(updateInfo);}else if(control.table.item.component==='Type3Component'){fieldList=getFieldSpecification3().get(control.table.item.methodUrl)||[];extractedColumnList=extractFieldHeader(Object.values(fieldList));masterComboColumnFiled=extractedColumnList.filter(function(item){return item.ndesigncomponentcode===designComponents.COMBOBOX;});var _primaryKeyField=Object.keys(fieldList).length>0?fieldList[0].dataField:\"\";var inputParam={userinfo:_this.props.Login.userInfo,selectedControl:control,masterfieldList:fieldList,masterextractedColumnList:extractedColumnList,masterprimaryKeyField:_primaryKeyField,masterComboColumnFiled:masterComboColumnFiled};_this.props.getAddMasterCombo(inputParam);}else if(control.table.item.component==='Dynamic'){var _inputParam={userinfo:_this.props.Login.userInfo,selectedControl:control};_this.props.getDynamicMasterTempalte(_inputParam);}// this.props.getMasterRecord(control);\n};_this.openModal=function(){var addId=_this.props.Login.inputParam&&_this.state.controlMap.has(\"Add\")&&_this.state.controlMap.get(\"Add\").ncontrolcode;_this.props.getDynamicMasterCombo(_this.props.Login.masterData,_this.props.Login.userInfo,addId,_this.state.designData,_this.state.selectedRecord,_this.state.childColumnList,_this.state.comboComponents,_this.state.withoutCombocomponent,false,true,new Map(),true,\"create\",_this.props.Login.displayName);};_this.fetchRecord=function(fetchRecordParam){_this.props.getEditDynamicMasterCombo(fetchRecordParam,_this.state.designData,_this.state.selectedRecord,_this.state.childColumnList,_this.state.comboComponents,_this.state.withoutCombocomponent);};_this.onNumericBlur=function(value,control){var selectedRecord=_this.state.selectedRecord;if(selectedRecord[control.label]){if(control.max){if(!(selectedRecord[control.label]<parseFloat(control.max))){selectedRecord[control.label]=control.precision?parseFloat(control.max):parseInt(control.max);}}if(control.min){if(!(selectedRecord[control.label]>parseFloat(control.min))){selectedRecord[control.label]=control.precision?parseFloat(control.min):parseInt(control.min);}}}_this.setState({selectedRecord:selectedRecord});};_this.comboChild=function(data,columnList,childColumnList,slice){var retunObj={};// if (data.findIndex(x => x.label === columnList.label) !== -1) {\nif(!childColumnList.hasOwnProperty(columnList.label)){if(childColumnList[columnList.label]===undefined){if(columnList.hasOwnProperty(\"child\")){var childList=[];columnList.child.map(function(childData){var index=data.findIndex(function(x){return x.label===childData.label;});if(index!==-1){childList.push(data[index]);if(slice){data=[].concat(_toConsumableArray(data.slice(0,index)),_toConsumableArray(data.slice(index+1)));}}});childColumnList[columnList.label]=childList;if(childList.length>0){childList.map(function(y){if(y.hasOwnProperty(\"child\")){var val=_this.comboChild(data,y,childColumnList,slice);retunObj[\"data\"]=val.data;retunObj[\"childColumnList\"]=val.childColumnList;}else{retunObj[\"data\"]=data;retunObj[\"childColumnList\"]=childColumnList;}});}else{retunObj[\"data\"]=data;retunObj[\"childColumnList\"]=childColumnList;}}else{retunObj[\"data\"]=data;retunObj[\"childColumnList\"]=childColumnList;}}else{retunObj[\"data\"]=data;retunObj[\"childColumnList\"]=childColumnList;}}else{retunObj[\"data\"]=data;retunObj[\"childColumnList\"]=childColumnList;}return retunObj;};_this.onComboChange=function(comboData,control,customName){var comboName=customName||control.label;var selectedRecord=_this.state.selectedRecord||{};if(comboData){comboData[\"item\"]=_objectSpread(_objectSpread({},comboData[\"item\"]),{},{\"pkey\":control.valuemember,\"nquerybuildertablecode\":control.nquerybuildertablecode,\"source\":control.source});selectedRecord[comboName]=comboData;}else{selectedRecord[comboName]=[];}if(control.child&&control.child.length>0){var childComboList=getSameRecordFromTwoArrays(_this.state.comboComponents,control.child,\"label\");var childColumnList={};childComboList.map(function(columnList){var val=_this.comboChild(_this.state.comboComponents,columnList,childColumnList,false);childColumnList=val.childColumnList;});var parentList=getSameRecordFromTwoArrays(_this.state.withoutCombocomponent,control.child,\"label\");var inputParem={child:control.child,source:control.source,primarykeyField:control.valuemember,value:comboData.value,item:comboData.item};_this.props.getChildValues(inputParem,_this.props.Login.userInfo,selectedRecord,_this.props.Login.comboData,childComboList,childColumnList,_this.state.withoutCombocomponent,[].concat(_toConsumableArray(childComboList),_toConsumableArray(parentList)));}else{var updateInfo={typeName:DEFAULT_RETURN,data:{selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);}};_this.onNumericInputChange=function(value,name){var selectedRecord=_this.state.selectedRecord;selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});};_this.handleDateChange=function(dateValue,dateName){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.onDrop=function(value,type,oldVlaue){var design=_this.state.design;var columns=design[0].children;var designData=_this.props.Login.ReactInputFields;value=JSON.parse(value.fields);value=_objectSpread(_objectSpread({},value),{},{type:\"component\"});var designDataIndex=designData.findIndex(function(item){return item.label===value.label;});var firstIndex=columns[0]?columns[0].children.findIndex(function(item){return item.label===value.label;}):-1;var secondIndex=columns[1]?columns[1].children.findIndex(function(item){return item.label===value.label;}):-1;if(designDataIndex>=0)designData.splice(designDataIndex,1);if(firstIndex>=0){if(type!==1){columns[0].children.splice(firstIndex,1);// columns[0].splice(to, 0, columns[0].splice(from, 1)[0]);\n}else{if(oldVlaue){oldVlaue=JSON.parse(oldVlaue);var from=columns[0].children.findIndex(function(item){return item.label===value.label;});var to=columns[0].children.findIndex(function(item){return item.label===oldVlaue.label;});columns[0].children.splice(to,0,columns[0].children.splice(from,1)[0]);}}}else if(type===1){if(columns[0]){columns[0].children.push(value);}else{columns[0]={id:\"1\",type:\"column\",children:[]};columns[0].children.push(value);}}if(secondIndex>=0){if(type!==2){columns[1].splice(secondIndex,1);}else{if(oldVlaue){oldVlaue=JSON.parse(oldVlaue);var _from=columns[1].children.findIndex(function(item){return item.label===value.label;});var _to=columns[1].children.findIndex(function(item){return item.label===oldVlaue.label;});columns[1].children.splice(_to,0,columns[1].children.splice(_from,1)[0]);}}}else if(type===2){if(columns[1]){columns[1].children.push(value);}else{columns[1]={id:\"2\",type:\"column\",children:[]};columns[1].children.push(value);}}// design.push(columns)\n_this.setState({designData:designData,design:design});};_this.onDropFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"//fileToDelete:file.name \n});};_this.onInputOnChange=function(event,value){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='toggle'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else if(event.target.type==='numeric'){if(/\\D/.test(event.target.value))selectedRecord[event.target.name]=event.target.value;}else if(event.target.type==='checkbox'){selectedRecord[event.target.name]=value;}else if(event.target.type==='radio'){selectedRecord[event.target.name]=value;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.deleteRecord=function(deleteParam){var _inputData;var inputParam={classUrl:\"dynamicmaster\",methodUrl:\"DynamicMaster\",displayName:_this.props.Login.displayName,inputData:(_inputData={},_defineProperty(_inputData,\"dynamicmaster\",{\"ndynamicmastercode\":deleteParam.selectedRecord.ndynamicmastercode}),_defineProperty(_inputData,\"userinfo\",_this.props.Login.userInfo),_inputData),operation:\"delete\",dataState:_this.state.dataState};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.Login.displayName,operation:\"delete\"}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.reloadData=function(){var inputParam={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:_this.props.Login.inputParam.classUrl,methodUrl:_this.props.Login.inputParam.methodUrl,userInfo:_this.props.Login.userInfo,displayName:_this.props.Login.inputParam.displayName};_this.props.callService(inputParam);};_this.onSaveClick=function(saveType,formRef){//add / edit  \nvar inputData=[];var dataState=undefined;inputData[\"userinfo\"]=_this.props.Login.userInfo;inputData[\"masterdateconstraints\"]=_this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdateconstraints;inputData[\"masterdatefields\"]=_this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdatefields;inputData[\"mastercombinationunique\"]=_this.props.Login.masterData.DynamicMasterDesign.screendesign.mastercombinationunique;var selectedId=null;var operation=\"\";var selectedRecord=_this.state.selectedRecord;if(_this.props.Login.operation===\"update\"){// edit\ndataState=_this.state.dataState;inputData[\"dynamicmaster\"]={ndynamicmastercode:_this.state.selectedRecord[\"ndynamicmastercode\"]};//this.state.selectedRecord;\ninputData[\"dynamicmaster\"][\"jsondata\"]={};inputData[\"dynamicmaster\"][\"jsonuidata\"]={};selectedId=_this.props.Login.selectedId;operation=\"update\";}else{//add                          \ninputData[\"dynamicmaster\"]={//\"nsitecode\": this.props.Login.userInfo.nmastersitecode, \nnformcode:_this.props.Login.userInfo.nformcode,ndesigntemplatemappingcode:_this.props.Login.masterData.DynamicMasterDesign.ndesigntemplatemappingcode,jsondata:{},jsonuidata:{}};operation=\"create\";}var dateList=[];var defaulttimezone=_this.props.Login.defaulttimezone;var userInfo=_this.props.Login.userInfo;_this.props.Login.masterData.DynamicMasterDesign&&_this.props.Login.masterData.DynamicMasterDesign.slideoutdesign.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.hasOwnProperty(\"children\")){component.children.map(function(componentrow){if(componentrow.inputtype===\"combo\"){inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=selectedRecord[componentrow.label]?{value:selectedRecord[componentrow.label].value,label:selectedRecord[componentrow.label].label,pkey:selectedRecord[componentrow.label].item.pkey,nquerybuildertablecode:selectedRecord[componentrow.label].item.nquerybuildertablecode,source:selectedRecord[componentrow.label].item.source}:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=selectedRecord[componentrow.label]?selectedRecord[componentrow.label].label:\"\";}else if(componentrow.inputtype===\"date\"){if(componentrow.mandatory){inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=formatDate(selectedRecord[componentrow.label],false);inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];//inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\n}else{inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=componentrow.loadcurrentdate?formatDate(selectedRecord[componentrow.label]||new Date(),false):selectedRecord[componentrow.label]?formatDate(selectedRecord[componentrow.label],false):\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];//convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\n}if(componentrow.timezone){inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(componentrow.label)]=selectedRecord[\"tz\".concat(componentrow.label)]?{value:selectedRecord[\"tz\".concat(componentrow.label)].value,label:selectedRecord[\"tz\".concat(componentrow.label)].label}:defaulttimezone?defaulttimezone:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][\"tz\".concat(componentrow.label)]=inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(componentrow.label)];}dateList.push(componentrow.label);}else{inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=selectedRecord[componentrow.label]?selectedRecord[componentrow.label]:\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];// inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\n}return inputData[\"dynamicmaster\"];});}else{if(component.inputtype===\"combo\"){inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=selectedRecord[component.label]?{value:selectedRecord[component.label].value,label:selectedRecord[component.label].label,pkey:selectedRecord[component.label].item.pkey,nquerybuildertablecode:selectedRecord[component.label].item.nquerybuildertablecode,source:selectedRecord[component.label].item.source}:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label].label;//selectedRecord[component.label] ? selectedRecord[component.label].label : \"\"\n}else if(component.inputtype===\"date\"){if(component.mandatory){inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=formatDate(selectedRecord[component.label],false);// convertDateTimetoString(selectedRecord[component.label] ?\n// selectedRecord[component.label] : new Date(), userInfo);\ninputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label];//convertDateTimetoString(selectedRecord[component.label], userInfo);\n}else{inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=component.loadcurrentdate?//convertDateTimetoString(selectedRecord[component.label] ?                                      \n//    selectedRecord[component.label] : new Date(), userInfo) :\nformatDate(selectedRecord[component.label]||new Date(),false):selectedRecord[component.label]?// convertDateTimetoString(selectedRecord[component.label] ?\n//   selectedRecord[component.label] : new Date(), userInfo) : \"\";\nformatDate(selectedRecord[component.label],false):\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label];//convertDateTimetoString(selectedRecord[component.label], userInfo)\n}if(component.timezone){inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(component.label)]=selectedRecord[\"tz\".concat(component.label)]?{value:selectedRecord[\"tz\".concat(component.label)].value,label:selectedRecord[\"tz\".concat(component.label)].label}:defaulttimezone?defaulttimezone:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][\"tz\".concat(component.label)]=inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(component.label)];}dateList.push(component.label);}else{inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=selectedRecord[component.label]?selectedRecord[component.label]:\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label];}}return inputData[\"dynamicmaster\"];});return inputData[\"dynamicmaster\"];});return inputData[\"dynamicmaster\"];});inputData[\"dynamicmaster\"][\"jsonstring\"]=JSON.stringify(inputData[\"dynamicmaster\"][\"jsondata\"]);inputData[\"dynamicmaster\"][\"jsonuistring\"]=JSON.stringify(inputData[\"dynamicmaster\"][\"jsonuidata\"]);inputData[\"masterdatelist\"]=dateList;var inputParam={classUrl:\"dynamicmaster\",methodUrl:\"DynamicMaster\",displayName:_this.props.Login.displayName,inputData:inputData,operation:operation,saveType:saveType,formRef:formRef,selectedId:selectedId,dataState:dataState};var esignNeeded=showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.Login.displayName,operation:\"create\"}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.formRef=React.createRef();_this.extractedColumnList=[];_this.detailedColumnList=[];var _dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={data:[],masterStatus:\"\",error:\"\",selectedRecord:{},dataResult:[],dataState:_dataState,userRoleControlRights:[],controlMap:new Map(),comboComponents:[],withoutCombocomponent:[],selectedMaster:{}};return _this;}_createClass(DynamicMaster,[{key:\"render\",value:function render(){var primaryKeyField=\"ndynamicmastercode\";var editId=this.props.Login.inputParam&&this.state.controlMap.has(\"Edit\")&&this.state.controlMap.get(\"Edit\").ncontrolcode;var editParam={screenName:this.props.Login.inputParam&&this.props.Login.inputParam.displayName&&this.props.intl.formatMessage({id:this.props.Login.inputParam.displayName}),operation:\"update\",primaryKeyField:primaryKeyField,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,ncontrolCode:editId};var deleteParam={operation:\"delete\"};// const mandatoryFields=[];\n// this.extractedColumnList.forEach(item=>item.mandatory === true ? \n//     mandatoryFields.push(item) :\"\"\n// );   \nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(ListWrapper,{className:\"client-list-content\"},this.state.data?/*#__PURE__*/React.createElement(DynamicDataGrid,{primaryKeyField:primaryKeyField,data:this.state.data,dataResult:this.state.dataResult,dataState:this.state.dataState,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList,detailedFieldList:this.detailedColumnList,expandField:this.detailedColumnList.length>0?\"expanded\":false,methodUrl:\"\",controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,fetchRecord:this.fetchRecord,editParam:editParam,deleteRecord:this.deleteRecord,deleteParam:deleteParam,reloadData:this.reloadData,addRecord:this.openModal,pageable:true,scrollable:'scrollable',gridHeight:'600px',isActionRequired:true,isToolBarRequired:true,selectedId:this.props.Login.selectedId}):\"\"))),this.props.Login.openModal?/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,operation:this.props.Login.operation?this.props.Login.operation:\"create\",inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.props.Login.addMaster?this.onSaveMasterRecord:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.props.Login.addMaster?this.state.selectedMaster:this.state.selectedRecord||{},mandatoryFields:this.props.Login.addMaster?this.props.Login.masterextractedColumnList.filter(function(x){return x.mandatory===true;}):this.state.mandatoryFields||[],addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.addMaster?/*#__PURE__*/React.createElement(AddMasterRecords,{selectedControl:this.props.Login.selectedControl,fieldList:this.props.Login.masterfieldList,extractedColumnList:this.props.Login.masterextractedColumnList,primaryKeyField:this.props.Login.masterprimaryKeyField,selectedRecord:this.state.selectedMaster||{},onInputOnChange:this.onInputOnChangeMaster,onComboChange:this.onComboChangeMaster,handleDateChange:this.handleDateChangeMaster,dataList:this.props.Login.masterdataList,onNumericInputOnChange:this.onNumericInputOnChangeMaster,masterDesign:this.props.Login.masterDesign,mastertimeZoneList:this.props.Login.mastertimeZoneList,masterdefaultTimeZone:this.props.Login.masterdefaultTimeZone,onComboChangeMasterDyanmic:this.onComboChangeMasterDyanmic,handleDateChangeMasterDynamic:this.handleDateChangeMasterDynamic,onInputOnChangeMasterDynamic:this.onInputOnChangeMasterDynamic,onNumericInputChangeMasterDynamic:this.onNumericInputChangeMasterDynamic,onNumericBlurMasterDynamic:this.onNumericBlurMasterDynamic,userInfo:this.props.Login.userInfo,Login:this.props.Login,addMasterRecord:this.addMasterRecord,userRoleControlRights:this.props.Login.userRoleControlRights}):/*#__PURE__*/React.createElement(DynamicSlideout,{selectedRecord:this.props.Login.selectedRecord,templateData:this.props.Login.masterData.DynamicMasterDesign&&this.props.Login.masterData.DynamicMasterDesign.slideoutdesign// handleChange={this.handleChange}\n,handleDateChange:this.handleDateChange,onInputOnChange:this.onInputOnChange,onNumericInputChange:this.onNumericInputChange,comboData:this.props.Login.comboData,onComboChange:this.onComboChange,onDropFile:this.onDropFile,deleteAttachment:this.deleteAttachment,onNumericBlur:this.onNumericBlur,userInfo:this.props.Login.userInfo,timeZoneList:this.props.Login.timeZoneList,defaultTimeZone:this.props.Login.defaultTimeZone,Login:this.props.Login,addMasterRecord:this.addMasterRecord,userRoleControlRights:this.props.Login.userRoleControlRights})}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var _this2=this;if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.extractedColumnList=[];this.detailedColumnList=[];if(this.props.Login.masterData&&this.props.Login.masterData.DynamicMasterDesign&&this.props.Login.masterData.DynamicMasterDesign.screendesign){this.props.Login.masterData.DynamicMasterDesign.screendesign.griditem.map(function(row){// console.log(\"data:\", row);\n_this2.extractedColumnList.push({\"idsName\":row[\"1\"][_this2.props.Login.userInfo.slanguagetypecode],\"dataField\":row[\"2\"]});});this.props.Login.masterData.DynamicMasterDesign.screendesign.gridmoreitem.map(function(row){_this2.detailedColumnList.push({\"idsName\":row[\"1\"][_this2.props.Login.userInfo.slanguagetypecode],\"dataField\":row[\"2\"]});});}var data=[];var withoutCombocomponent=[];var mandatoryFields=[];var Layout=this.props.Login.masterData.DynamicMasterDesign&&this.props.Login.masterData.DynamicMasterDesign.slideoutdesign||[];Layout.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.hasOwnProperty(\"children\")){component.children.map(function(componentrow){if(componentrow.inputtype===\"combo\"){data.push(componentrow);}else{withoutCombocomponent.push(componentrow);}if(componentrow.mandatory===true){if(componentrow.inputtype===\"email\"){mandatoryFields.push({\"mandatory\":true,\"idsName\":componentrow.label,\"dataField\":componentrow.label,\"alertPreFix\":_this2.props.intl.formatMessage({id:\"IDS_VALID\"}),\"validateFunction\":validateEmail,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"});}else{mandatoryFields.push({\"mandatory\":true,\"idsName\":componentrow.label,\"dataField\":componentrow.label,\"mandatoryLabel\":componentrow.inputtype===\"combo\"?\"IDS_SELECT\":\"IDS_ENTER\",\"controlType\":componentrow.inputtype===\"combo\"?\"selectbox\":\"textbox\"});}}});}else{component.inputtype===\"combo\"?data.push(component):withoutCombocomponent.push(component);if(component.mandatory===true){if(component.inputtype===\"email\"){mandatoryFields.push({\"mandatory\":true,\"idsName\":component.label,\"dataField\":component.label,\"alertPreFix\":_this2.props.intl.formatMessage({id:\"IDS_VALID\"}),\"validateFunction\":validateEmail,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"});}else{mandatoryFields.push({\"mandatory\":true,\"idsName\":component.label,\"dataField\":component.label,\"mandatoryLabel\":component.inputtype===\"combo\"?\"IDS_SELECT\":\"IDS_ENTER\",\"controlType\":component.inputtype===\"combo\"?\"selectbox\":\"textbox\"});}}}});});});var comboComponents=data;var childColumnList={};data.map(function(columnList){var val=_this2.comboChild(data,columnList,childColumnList,true);data=val.data;childColumnList=val.childColumnList;});var masterData=this.props.Login.masterData.DynamicMasterData?sortData(this.props.Login.masterData.DynamicMasterData,\"descending\",\"ndynamicmastercode\"):[];this.setState({withoutCombocomponent:withoutCombocomponent,comboComponents:comboComponents,childColumnList:childColumnList,designData:data,mandatoryFields:mandatoryFields,userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData.DynamicMasterData||[],dataResult:process(masterData||[],this.state.dataState)});}else{var dataState=this.state.dataState;if(this.props.Login.dataState===undefined){dataState={skip:0,take:this.props.Login.settings?parseInt(this.props.Login.settings[14]):5};}var _masterData=this.props.Login.masterData.DynamicMasterData?sortData(this.props.Login.masterData.DynamicMasterData,\"descending\",\"ndynamicmastercode\"):[];this.setState({data:this.props.Login.masterData.DynamicMasterData||[],selectedRecord:this.props.Login.selectedRecord,dataResult:process(_masterData||[],dataState),dataState:dataState//, comboComponents, withoutCombocomponent\n});}}if(this.props.Login.selectedMaster!==previousProps.Login.selectedMaster){this.setState({selectedMaster:this.props.Login.selectedMaster});}if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}return null;}}]);return DynamicMaster;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,updateStore:updateStore,validateEsignCredential:validateEsignCredential,getChildValues:getChildValues,getEditDynamicMasterCombo:getEditDynamicMasterCombo,//fetchRecord,\ngetDynamicMasterCombo:getDynamicMasterCombo,addMasterRecord:addMasterRecord,getAddMasterCombo:getAddMasterCombo,getDynamicMasterTempalte:getDynamicMasterTempalte,getChildComboMaster:getChildComboMaster})(injectIntl(DynamicMaster));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/dynamicmaster/DynamicMaster.jsx"],"names":["React","connect","injectIntl","Row","Col","toast","process","DynamicDataGrid","SlideOutModal","Esign","callService","crudMaster","updateStore","validateEsignCredential","getEditDynamicMasterCombo","getDynamicMasterCombo","getChildValues","addMasterRecord","getAddMasterCombo","getDynamicMasterTempalte","getChildComboMaster","DEFAULT_RETURN","showEsign","getControlMap","deleteAttachmentDropZone","getSameRecordFromTwoArrays","onDropAttachFileList","convertDateTimetoString","validateEmail","formatDate","sortData","ageCalculate","formatInputDate","extractFieldHeader","childComboClear","ListWrapper","DynamicSlideout","designComponents","transactionStatus","getFieldSpecification","AddMasterRecords","getFieldSpecification1","getFieldSpecification3","mapStateToProps","state","Login","DynamicMaster","props","dataStateChange","event","setState","dataResult","data","dataState","closeModal","loadEsign","openModal","selectedRecord","selectedMaster","selectedControl","masterextractedColumnList","masterfieldList","masterprimaryKeyField","addMaster","operation","updateInfo","typeName","selectedId","onComboChangeMasterDyanmic","comboData","control","customName","comboName","label","valuemember","nquerybuildertablecode","source","child","length","childComboList","mastercomboComponents","childColumnList","map","columnList","val","comboChild","parentList","masterwithoutCombocomponent","inputParem","primarykeyField","value","item","getChildValuesForAddMaster","userInfo","mastedataList","withoutCombocomponent","inputParam","comboComponents","childParam","onInputOnChangeMasterDynamic","radiotext","target","type","name","checked","YES","NO","test","undefined","includes","index","indexOf","indexcomma","slice","handleDateChangeMasterDynamic","dateValue","dateName","onNumericInputChangeMasterDynamic","onNumericBlurMasterDynamic","max","parseFloat","precision","parseInt","min","onComboChangeMaster","fieldName","table","nformcode","tableDataField","foreignDataField","childIndex","masterdataList","handleDateChangeMaster","age","onNumericInputOnChangeMaster","onInputOnChangeMaster","nneedcurrentaddress","sflatnotemp","sflatno","shousenotemp","shouseno","spostalcodetemp","spostalcode","sstreettemp","sstreet","scitynametemp","scityname","sdistrictnametemp","sdistrictname","sregionnametemp","sregionname","onSaveMasterRecord","saveType","formRef","inputData","methodUrl","toLowerCase","nmastersitecode","component","masterDesign","screendesign","masterdateconstraints","masterdatefields","mastercombinationunique","ndesigntemplatemappingcode","jsondata","jsonuidata","dateList","defaulttimezone","slideoutdesign","row","children","column","hasOwnProperty","componentrow","inputtype","pkey","mandatory","loadcurrentdate","Date","timezone","push","JSON","stringify","dataField","isJsonField","jsonObjectName","controlType","dateField","controlName","selectedRecordName","loadSubSample","classUrl","displayName","sdisplayname","masterData","fieldList","masterComboColumnFiled","extractedColumnList","get","Object","values","primaryKeyField","keys","filter","ndesigncomponentcode","COMBOBOX","userinfo","addId","controlMap","has","ncontrolcode","designData","Map","fetchRecord","fetchRecordParam","onNumericBlur","retunObj","childList","childData","findIndex","x","y","onComboChange","onNumericInputChange","handleDateChange","onDrop","oldVlaue","design","columns","ReactInputFields","parse","fields","designDataIndex","firstIndex","secondIndex","splice","from","to","id","onDropFile","attachedFiles","maxSize","actionType","deleteAttachment","file","onInputOnChange","deleteRecord","deleteParam","ndynamicmastercode","userRoleControlRights","ncontrolCode","screenData","screenName","reloadData","onSaveClick","DynamicMasterDesign","esignNeeded","validateEsign","sreason","nreasoncode","spredefinedreason","password","createRef","detailedColumnList","skip","take","settings","masterStatus","error","editId","editParam","intl","formatMessage","mandatoryFields","mastertimeZoneList","masterdefaultTimeZone","timeZoneList","defaultTimeZone","previousProps","griditem","slanguagetypecode","gridmoreitem","Layout","DynamicMasterData","warn","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport { Row, Col } from 'react-bootstrap';\r\nimport { toast } from 'react-toastify';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport DynamicDataGrid from '../../components/data-grid/data-grid.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport Esign from '../../pages/audittrail/Esign';\r\nimport {\r\n    callService, crudMaster, updateStore, validateEsignCredential,\r\n    getEditDynamicMasterCombo,\r\n    //fetchRecord,\r\n    getDynamicMasterCombo, getChildValues,\r\n    addMasterRecord, getAddMasterCombo, getDynamicMasterTempalte,\r\n    getChildComboMaster\r\n} from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport {\r\n    showEsign, getControlMap, deleteAttachmentDropZone,\r\n    getSameRecordFromTwoArrays, onDropAttachFileList, convertDateTimetoString,\r\n    validateEmail, formatDate, sortData, ageCalculate, formatInputDate, extractFieldHeader, childComboClear\r\n} from '../../components/CommonScript';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport DynamicSlideout from '../dynamicpreregdesign/DynamicSlideout.jsx';\r\nimport { designComponents, transactionStatus } from '../../components/Enumeration';\r\nimport { getFieldSpecification } from '../../components/type2component/Type2FieldSpecificationList';\r\nimport AddMasterRecords from '../dynamicpreregdesign/AddMasterRecords'\r\nimport { getFieldSpecification as getFieldSpecification1 } from '../../components/type1component/Type1FieldSpecificationList';\r\nimport { getFieldSpecification as getFieldSpecification3 } from '../../components/type3component/Type3FieldSpecificationList';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass DynamicMaster extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.formRef = React.createRef();\r\n        this.extractedColumnList = [];\r\n        this.detailedColumnList = [];\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            data: [], masterStatus: \"\", error: \"\", selectedRecord: {},\r\n            dataResult: [],\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            comboComponents: [],\r\n            withoutCombocomponent: [],\r\n            selectedMaster:{}\r\n        };\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.data || [], event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let selectedMaster = this.props.Login.selectedMaster;\r\n        let selectedControl = this.props.Login.selectedControl;\r\n        let masterextractedColumnList = this.props.Login.masterextractedColumnList;\r\n        let masterfieldList = this.props.Login.masterfieldList;\r\n        let masterprimaryKeyField = this.props.Login.masterprimaryKeyField;\r\n        let addMaster = this.props.Login.addMaster\r\n\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason'] = \"\"\r\n            }\r\n        } else if (this.props.Login.addMaster) {\r\n            selectedMaster = {}\r\n            selectedControl = {}\r\n            masterextractedColumnList = []\r\n            masterfieldList = {}\r\n            masterprimaryKeyField = \"\"\r\n            addMaster = false\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                openModal, loadEsign,\r\n                selectedRecord, selectedId: null, selectedMaster, selectedControl,\r\n                masterextractedColumnList, masterfieldList,\r\n                masterprimaryKeyField, addMaster\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n\r\n        let primaryKeyField = \"ndynamicmastercode\";\r\n\r\n        const editId = this.props.Login.inputParam && this.state.controlMap.has(\"Edit\")\r\n            && this.state.controlMap.get(\"Edit\").ncontrolcode;\r\n\r\n        const editParam = {\r\n            screenName: this.props.Login.inputParam && this.props.Login.inputParam.displayName\r\n                && this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }), operation: \"update\", primaryKeyField,\r\n            inputParam: this.props.Login.inputParam, userInfo: this.props.Login.userInfo, ncontrolCode: editId\r\n        };\r\n\r\n        const deleteParam = { operation: \"delete\" };\r\n\r\n        // const mandatoryFields=[];\r\n        // this.extractedColumnList.forEach(item=>item.mandatory === true ? \r\n        //     mandatoryFields.push(item) :\"\"\r\n        // );   \r\n\r\n        return (<>\r\n            <Row>\r\n                <Col>\r\n                    <ListWrapper className=\"client-list-content\">\r\n                        {this.state.data ?\r\n                            <DynamicDataGrid\r\n                                primaryKeyField={primaryKeyField}\r\n                                data={this.state.data}\r\n                                dataResult={this.state.dataResult}\r\n                                dataState={this.state.dataState}\r\n                                dataStateChange={this.dataStateChange}\r\n                                extractedColumnList={this.extractedColumnList}\r\n                                detailedFieldList={this.detailedColumnList}\r\n                                expandField={this.detailedColumnList.length > 0 ? \"expanded\" : false}\r\n                                methodUrl={\"\"}\r\n                                controlMap={this.state.controlMap}\r\n                                userRoleControlRights={this.state.userRoleControlRights}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                fetchRecord={this.fetchRecord}\r\n                                editParam={editParam}\r\n                                deleteRecord={this.deleteRecord}\r\n                                deleteParam={deleteParam}\r\n                                reloadData={this.reloadData}\r\n                                addRecord={this.openModal}\r\n                                pageable={true}\r\n                                scrollable={'scrollable'}\r\n                                gridHeight={'600px'}\r\n                                isActionRequired={true}\r\n                                isToolBarRequired={true}\r\n                                selectedId={this.props.Login.selectedId}\r\n                            />\r\n                            : \"\"}\r\n                    </ListWrapper>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/* Below Condition Added to avoid unwanted rendering of SlideOut */}\r\n            {this.props.Login.openModal ?\r\n                <SlideOutModal show={this.props.Login.openModal}\r\n                    closeModal={this.closeModal}\r\n                    operation={this.props.Login.operation ? this.props.Login.operation : \"create\"}\r\n                    inputParam={this.props.Login.inputParam}\r\n                    screenName={this.props.Login.screenName}\r\n                    onSaveClick={this.props.Login.addMaster ? this.onSaveMasterRecord : this.onSaveClick}\r\n                    esign={this.props.Login.loadEsign}\r\n                    validateEsign={this.validateEsign}\r\n                    masterStatus={this.props.Login.masterStatus}\r\n                    updateStore={this.props.updateStore}\r\n                    selectedRecord={this.props.Login.addMaster ?\r\n                        this.state.selectedMaster : this.state.selectedRecord || {}}\r\n                    mandatoryFields={this.props.Login.addMaster ?\r\n                        this.props.Login.masterextractedColumnList.filter(x => x.mandatory === true)\r\n                        : this.state.mandatoryFields || []}\r\n                    addComponent={this.props.Login.loadEsign ?\r\n                        <Esign operation={this.props.Login.operation}\r\n                            onInputOnChange={this.onInputOnChange}\r\n                            inputParam={this.props.Login.inputParam}\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                        /> : this.props.Login.addMaster ?\r\n                            <AddMasterRecords\r\n                                selectedControl={this.props.Login.selectedControl}\r\n                                fieldList={this.props.Login.masterfieldList}\r\n                                extractedColumnList={this.props.Login.masterextractedColumnList}\r\n                                primaryKeyField={this.props.Login.masterprimaryKeyField}\r\n                                selectedRecord={this.state.selectedMaster || {}}\r\n                                onInputOnChange={this.onInputOnChangeMaster}\r\n                                onComboChange={this.onComboChangeMaster}\r\n                                handleDateChange={this.handleDateChangeMaster}\r\n                                dataList={this.props.Login.masterdataList}\r\n                                onNumericInputOnChange={this.onNumericInputOnChangeMaster}\r\n                                masterDesign={this.props.Login.masterDesign}\r\n                                mastertimeZoneList={this.props.Login.mastertimeZoneList}\r\n                                masterdefaultTimeZone={this.props.Login.masterdefaultTimeZone}\r\n                                onComboChangeMasterDyanmic={this.onComboChangeMasterDyanmic}\r\n                                handleDateChangeMasterDynamic={this.handleDateChangeMasterDynamic}\r\n                                onInputOnChangeMasterDynamic={this.onInputOnChangeMasterDynamic}\r\n                                onNumericInputChangeMasterDynamic={this.onNumericInputChangeMasterDynamic}\r\n                                onNumericBlurMasterDynamic={this.onNumericBlurMasterDynamic}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                Login={this.props.Login}\r\n                                addMasterRecord={this.addMasterRecord}\r\n                                userRoleControlRights={this.props.Login.userRoleControlRights}\r\n                            /> :\r\n                            <DynamicSlideout\r\n                                selectedRecord={this.props.Login.selectedRecord}\r\n                                templateData={this.props.Login.masterData.DynamicMasterDesign &&\r\n                                    this.props.Login.masterData.DynamicMasterDesign.slideoutdesign}\r\n                                // handleChange={this.handleChange}\r\n                                handleDateChange={this.handleDateChange}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onNumericInputChange={this.onNumericInputChange}\r\n                                comboData={this.props.Login.comboData}\r\n                                onComboChange={this.onComboChange}\r\n                                onDropFile={this.onDropFile}\r\n                                deleteAttachment={this.deleteAttachment}\r\n                                onNumericBlur={this.onNumericBlur}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                timeZoneList={this.props.Login.timeZoneList}\r\n                                defaultTimeZone={this.props.Login.defaultTimeZone}\r\n                                Login={this.props.Login}\r\n                                addMasterRecord={this.addMasterRecord}\r\n                                userRoleControlRights={this.props.Login.userRoleControlRights}\r\n                            />\r\n                    }\r\n\r\n                /> : \"\"}\r\n        </>\r\n        );\r\n    }\r\n\r\n\r\n    onComboChangeMasterDyanmic = (comboData, control, customName) => {\r\n\r\n        let comboName = customName || control.label;\r\n        let selectedMaster = this.state.selectedMaster || {};\r\n        //if (comboData) {\r\n        comboData[\"item\"] = {\r\n            ...comboData[\"item\"], \"pkey\": control.valuemember, \"nquerybuildertablecode\": control.nquerybuildertablecode,\r\n            \"source\": control.source\r\n        };\r\n        selectedMaster[comboName] = comboData;\r\n\r\n        // console.log(\"selected:\", selectedMaster, comboData, control, customName);\r\n        if (control.child && control.child.length > 0) {\r\n            const childComboList = getSameRecordFromTwoArrays(this.props.Login.mastercomboComponents, control.child, \"label\")\r\n            let childColumnList = {};\r\n            childComboList.map(columnList => {\r\n                const val = this.comboChild(this.props.Login.mastercomboComponents, columnList, childColumnList, false);\r\n                childColumnList = val.childColumnList\r\n            })\r\n\r\n            const parentList = getSameRecordFromTwoArrays(this.props.Login.masterwithoutCombocomponent, control.child, \"label\")\r\n\r\n            if (comboData) {\r\n                const inputParem = {\r\n                    child: control.child,\r\n                    source: control.source,\r\n                    primarykeyField: control.valuemember,\r\n                    value: comboData.value,\r\n                    item: comboData.item\r\n                }\r\n                this.props.getChildValuesForAddMaster(inputParem,\r\n                    this.props.Login.userInfo, selectedMaster, this.props.Login.mastedataList,\r\n                    childComboList, childColumnList, this.props.Login.masterwithoutCombocomponent, [...childComboList, ...parentList])\r\n            } else {\r\n                let comboData = this.props.Login.mastedataList\r\n                const withoutCombocomponent = this.props.Login.masterwithoutCombocomponent || []\r\n                const inputParam = { control, comboComponents: this.props.Login.mastercomboComponents, withoutCombocomponent, selectedMaster, comboData }\r\n                const childParam = childComboClear(inputParam)\r\n                selectedMaster = childParam.selectedRecord\r\n                comboData = childParam.comboData\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: { selectedMaster, mastedataList: comboData }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n        } else {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { selectedMaster }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n    }\r\n\r\n\r\n    onInputOnChangeMasterDynamic = (event, radiotext) => {\r\n        const selectedMaster = this.state.selectedMaster || {};\r\n        if (event.target.type === 'toggle') {\r\n            selectedMaster[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        } else if (event.target.type === 'numeric') {\r\n            if (/\\D/.test(event.target.value))\r\n                selectedMaster[event.target.name] = event.target.value;\r\n        } else if (event.target.type === 'checkbox') {\r\n            const value = selectedMaster[event.target.name];\r\n            if (value !== '' && value !== undefined) {\r\n                if (value.includes(radiotext)) {\r\n                    const index = value.indexOf(radiotext);\r\n                    if (index !== -1) {\r\n                        if (index === 0) {\r\n                            const indexcomma = value.indexOf(\",\")\r\n                            if (indexcomma !== -1) {\r\n                                selectedMaster[event.target.name] = value.slice(indexcomma + 1)\r\n                            } else {\r\n                                selectedMaster[event.target.name] = \"\"\r\n                            }\r\n                        } else {\r\n                            if (value.slice(index).indexOf(\",\") !== -1) {\r\n                                selectedMaster[event.target.name] = value.slice(0, index) + value.slice(index + value.slice(index).indexOf(\",\") + 1)\r\n                            } else {\r\n                                selectedMaster[event.target.name] = value.slice(0, index - 1)\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                } else {\r\n                    selectedMaster[event.target.name] = value + ',' + radiotext;\r\n                }\r\n\r\n            } else {\r\n                selectedMaster[event.target.name] = radiotext;\r\n            }\r\n        } else if (event.target.type === 'radio') {\r\n            selectedMaster[event.target.name] = radiotext\r\n        } else {\r\n            selectedMaster[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedMaster });\r\n    }\r\n\r\n\r\n    handleDateChangeMasterDynamic = (dateValue, dateName) => {\r\n        const { selectedMaster } = this.state;\r\n        selectedMaster[dateName] = dateValue;\r\n\r\n        this.setState({ selectedMaster });\r\n    }\r\n\r\n    onNumericInputChangeMasterDynamic = (value, name) => {\r\n        let selectedMaster = this.state.selectedMaster\r\n        selectedMaster[name] = value;\r\n        this.setState({ selectedMaster });\r\n    }\r\n\r\n    onNumericBlurMasterDynamic = (value, control) => {\r\n        let selectedMaster = this.state.selectedMaster\r\n        if (selectedMaster[control.label]) {\r\n            if (control.max) {\r\n                if (!(selectedMaster[control.label] < parseFloat(control.max))) {\r\n                    selectedMaster[control.label] = control.precision ? parseFloat(control.max) : parseInt(control.max)\r\n                }\r\n            }\r\n            if (control.min) {\r\n                if (!(selectedMaster[control.label] > parseFloat(control.min))) {\r\n                    selectedMaster[control.label] = control.precision ? parseFloat(control.min) : parseInt(control.min)\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n        this.setState({ selectedMaster });\r\n    }\r\n    onComboChangeMaster = (comboData, fieldName, item) => {\r\n        const selectedMaster = this.state.selectedMaster || {};\r\n        if (comboData !== null) {\r\n            if (this.props.Login.selectedControl.table.item.nformcode === 137) {\r\n                selectedMaster[item.tableDataField] = comboData.value;\r\n            }\r\n            else if (item.foreignDataField) {\r\n                selectedMaster[item.foreignDataField] = comboData.value;\r\n            }\r\n        }\r\n        selectedMaster[fieldName] = comboData;\r\n        if (item.childIndex !== undefined) {\r\n            this.props.getChildComboMaster(selectedMaster, fieldName, item,\r\n                this.props.Login.selectedControl,\r\n                this.props.Login.masterfieldList,\r\n                this.props.Login.masterdataList, this.props.Login.userInfo)\r\n        } else {\r\n            this.setState({ selectedMaster });\r\n        }\r\n\r\n    }\r\n\r\n    handleDateChangeMaster = (dateName, dateValue, item) => {\r\n        const { selectedMaster } = this.state;\r\n        selectedMaster[dateName] = dateValue;\r\n        const age = ageCalculate(dateValue);\r\n        selectedMaster[\"sage\"] = age;\r\n        this.setState({ selectedMaster });\r\n\r\n    }\r\n\r\n    onNumericInputOnChangeMaster = (value, name, item) => {\r\n        const selectedMaster = this.state.selectedMaster || {};\r\n        selectedMaster[name] = value;\r\n        this.setState({ selectedMaster });\r\n    }\r\n\r\n\r\n\r\n    onInputOnChangeMaster = (event) => {\r\n        const selectedMaster = this.state.selectedMaster || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedMaster[event.target.name] = event.target.checked === true ? 3 : 4;\r\n            if (this.props.Login.selectedControl.table.item.nformcode === 137) {\r\n                if (selectedMaster.nneedcurrentaddress === 3) {\r\n                    selectedMaster.sflatnotemp = selectedMaster.sflatno;\r\n                    selectedMaster.shousenotemp = selectedMaster.shouseno;\r\n                    selectedMaster.spostalcodetemp = selectedMaster.spostalcode;\r\n                    selectedMaster.sstreettemp = selectedMaster.sstreet;\r\n                    selectedMaster.scitynametemp = selectedMaster.scityname;\r\n                    selectedMaster.sdistrictnametemp = selectedMaster.sdistrictname;\r\n                    selectedMaster.sregionnametemp = selectedMaster.sregionname;\r\n                }\r\n                else {\r\n                    selectedMaster.sflatnotemp = \"\";\r\n                    selectedMaster.shousenotemp = \"\";\r\n                    selectedMaster.spostalcodetemp = \"\";\r\n                    selectedMaster.sstreettemp = \"\";\r\n                    selectedMaster.scitynametemp = \"\";\r\n                    selectedMaster.sdistrictnametemp = \"\";\r\n                    selectedMaster.sregionnametemp = \"\";\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            selectedMaster[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedMaster });\r\n    }\r\n\r\n    onSaveMasterRecord = (saveType, formRef) => {\r\n        //add / edit            \r\n\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = { ...this.props.Login.userInfo, nformcode: this.props.Login.selectedControl.table.item.nformcode };\r\n        inputData[this.props.Login.selectedControl.table.item.methodUrl.toLowerCase()] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n\r\n        const methodUrl = this.props.Login.selectedControl.table.item.methodUrl.toLowerCase()\r\n\r\n\r\n        if (this.props.Login.selectedControl.table.item.component === 'Dynamic') {\r\n            const selectedMaster = this.state.selectedMaster;\r\n            inputData[\"userinfo\"] = { ...this.props.Login.userInfo, nformcode: this.props.Login.selectedControl.table.item.nformcode };\r\n            inputData[\"masterdateconstraints\"] = this.props.Login.masterDesign.screendesign.masterdateconstraints;\r\n            inputData[\"masterdatefields\"] = this.props.Login.masterDesign.screendesign.masterdatefields;\r\n            inputData[\"mastercombinationunique\"] = this.props.Login.masterDesign.screendesign.mastercombinationunique;\r\n            //add                          \r\n            inputData[\"dynamicmaster\"] = {\r\n                nformcode: this.props.Login.selectedControl.table.item.nformcode,\r\n                ndesigntemplatemappingcode: this.props.Login.masterDesign.ndesigntemplatemappingcode,\r\n                jsondata: {}, jsonuidata: {}\r\n            };\r\n\r\n\r\n\r\n            const dateList = [];\r\n            const defaulttimezone = this.props.Login.defaulttimezone;\r\n\r\n            this.props.Login.masterDesign &&\r\n                this.props.Login.masterDesign.slideoutdesign.map(row => {\r\n                    row.children.map(column => {\r\n                        column.children.map(component => {\r\n                            if (component.hasOwnProperty(\"children\")) {\r\n\r\n                                component.children.map(componentrow => {\r\n                                    if (componentrow.inputtype === \"combo\") {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = selectedMaster[componentrow.label] ?\r\n                                            {\r\n                                                value: selectedMaster[componentrow.label].value,\r\n                                                label: selectedMaster[componentrow.label].label,\r\n                                                pkey: selectedMaster[componentrow.label].item.pkey,\r\n                                                nquerybuildertablecode: selectedMaster[componentrow.label].item.nquerybuildertablecode,\r\n                                                source: selectedMaster[componentrow.label].item.source\r\n                                            } : -1\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = selectedMaster[componentrow.label] ? selectedMaster[componentrow.label].label : \"\"\r\n\r\n                                    }\r\n                                    else if (componentrow.inputtype === \"date\") {\r\n                                        if (componentrow.mandatory) {\r\n                                            inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = formatDate(selectedMaster[componentrow.label], false)\r\n\r\n                                            inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n                                            //inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\r\n                                        }\r\n                                        else {\r\n                                            inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = componentrow.loadcurrentdate ?\r\n                                                formatDate(selectedMaster[componentrow.label] || new Date(), false) :\r\n                                                selectedMaster[componentrow.label] ? formatDate(selectedMaster[componentrow.label], false)\r\n                                                    : \"\";\r\n\r\n                                            inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];\r\n                                            //convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\r\n                                        }\r\n                                        if (componentrow.timezone) {\r\n                                            inputData[\"dynamicmaster\"][\"jsondata\"][`tz${componentrow.label}`] = selectedMaster[`tz${componentrow.label}`] ?\r\n                                                { value: selectedMaster[`tz${componentrow.label}`].value, label: selectedMaster[`tz${componentrow.label}`].label } :\r\n                                                defaulttimezone ? defaulttimezone : -1\r\n\r\n                                            inputData[\"dynamicmaster\"][\"jsonuidata\"][`tz${componentrow.label}`] = inputData[\"dynamicmaster\"][\"jsondata\"][`tz${componentrow.label}`]\r\n                                        }\r\n                                        dateList.push(componentrow.label)\r\n                                    }\r\n\r\n                                    else {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = selectedMaster[componentrow.label] ?\r\n                                            selectedMaster[componentrow.label] : \"\"\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n                                        // inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n\r\n                                    }\r\n                                    return inputData[\"dynamicmaster\"];\r\n                                })\r\n                            }\r\n                            else {\r\n                                if (component.inputtype === \"combo\") {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = selectedMaster[component.label] ?\r\n                                        {\r\n                                            value: selectedMaster[component.label].value,\r\n                                            label: selectedMaster[component.label].label,\r\n                                            pkey: selectedMaster[component.label].item.pkey,\r\n                                            nquerybuildertablecode: selectedMaster[component.label].item.nquerybuildertablecode,\r\n                                            source: selectedMaster[component.label].item.source\r\n                                        } : -1\r\n\r\n                                    inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label].label;\r\n                                    //selectedRecord[component.label] ? selectedRecord[component.label].label : \"\"\r\n                                }\r\n                                else if (component.inputtype === \"date\") {\r\n                                    if (component.mandatory) {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = formatDate(selectedMaster[component.label], false);\r\n                                        // convertDateTimetoString(selectedRecord[component.label] ?\r\n                                        // selectedRecord[component.label] : new Date(), userInfo);\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                                        //convertDateTimetoString(selectedRecord[component.label], userInfo);\r\n\r\n                                    } else {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = component.loadcurrentdate ?\r\n                                            //convertDateTimetoString(selectedRecord[component.label] ?                                      \r\n                                            //    selectedRecord[component.label] : new Date(), userInfo) :\r\n                                            formatDate(selectedMaster[component.label] || new Date(), false) :\r\n                                            selectedMaster[component.label] ?\r\n                                                // convertDateTimetoString(selectedRecord[component.label] ?\r\n                                                //   selectedRecord[component.label] : new Date(), userInfo) : \"\";\r\n                                                formatDate(selectedMaster[component.label], false) : \"\";\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                                        //convertDateTimetoString(selectedRecord[component.label], userInfo)\r\n\r\n                                    }\r\n                                    if (component.timezone) {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][`tz${component.label}`] = selectedMaster[`tz${component.label}`] ?\r\n                                            { value: selectedMaster[`tz${component.label}`].value, label: selectedMaster[`tz${component.label}`].label } :\r\n                                            defaulttimezone ? defaulttimezone : -1\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][`tz${component.label}`] = inputData[\"dynamicmaster\"][\"jsondata\"][`tz${component.label}`]\r\n                                    }\r\n                                    dateList.push(component.label)\r\n                                }\r\n                                else {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = selectedMaster[component.label] ?\r\n                                        selectedMaster[component.label] : \"\"\r\n\r\n                                    inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                                }\r\n                            }\r\n                            return inputData[\"dynamicmaster\"];\r\n                        }\r\n                        )\r\n                        return inputData[\"dynamicmaster\"];\r\n                    })\r\n                    return inputData[\"dynamicmaster\"];\r\n                })\r\n\r\n\r\n            inputData[\"dynamicmaster\"][\"jsonstring\"] = JSON.stringify(inputData[\"dynamicmaster\"][\"jsondata\"]);\r\n            inputData[\"dynamicmaster\"][\"jsonuistring\"] = JSON.stringify(inputData[\"dynamicmaster\"][\"jsonuidata\"]);\r\n            inputData[\"masterdatelist\"] = dateList;\r\n\r\n\r\n        }\r\n        else if (this.props.Login.selectedControl.table.item.component === 'Type3Component'\r\n            && this.props.Login.selectedControl.table.item.nformcode === 137) {\r\n            inputData[\"noneedfilter\"] = true\r\n            this.props.Login.masterextractedColumnList.map(item => {\r\n                let fieldName = item.dataField;\r\n                if (item.isJsonField === true) {\r\n                    return inputData[methodUrl][item.jsonObjectName] = { ...inputData[methodUrl][item.jsonObjectName], [fieldName]: this.state.selectedMaster[fieldName] ? this.state.selectedMaster[fieldName] : \"\" }\r\n                }\r\n                else {\r\n                    if (item.controlType === \"selectbox\") {\r\n                        // inputData[methodUrl][fieldName] = this.state.selectedMaster[fieldName] ? this.state.selectedMaster[fieldName].label ? this.state.selectedMaster[fieldName].label : \"\" : -1;\r\n                        inputData[methodUrl][item.tableDataField] = this.state.selectedMaster[fieldName] ? this.state.selectedMaster[fieldName].value ? this.state.selectedMaster[fieldName].value : \"\" : -1;\r\n                        return inputData;\r\n                    }\r\n                    else if (item.controlType === \"datepicker\") {\r\n                        inputData[methodUrl][item.dateField] = formatInputDate(this.state.selectedMaster[fieldName] ? this.state.selectedMaster[fieldName] : \"\", false);\r\n                    }\r\n                    else if (item.controlType === \"checkbox\") {\r\n                        inputData[methodUrl][item.controlName] = this.state.selectedMaster[item.controlName] ? this.state.selectedMaster[item.controlName] : transactionStatus.NO;\r\n                    }\r\n                    else {\r\n                        inputData[methodUrl][fieldName] = this.state.selectedMaster[fieldName] ? this.state.selectedMaster[fieldName] : \"\";\r\n                    }\r\n                    // inputData[methodUrl][selectedRecordPrimarykey] = this.props.Login.selectedId;\r\n                    return inputData;\r\n                }\r\n            })\r\n        }\r\n        else {\r\n\r\n            this.props.Login.masterextractedColumnList.map(item => {\r\n                let fieldName = item.dataField;\r\n                if (item.isJsonField === true) {\r\n                    return inputData[methodUrl][item.jsonObjectName] = { ...inputData[methodUrl][item.jsonObjectName], [fieldName]: this.state.selectedMaster[fieldName] ? this.state.selectedMaster[fieldName] : \"\" }\r\n                }\r\n                else {\r\n                    if (item.controlType === \"selectbox\") {\r\n                        inputData[methodUrl][fieldName] = this.state.selectedMaster[fieldName] ? this.state.selectedMaster[fieldName].label ? this.state.selectedMaster[fieldName].label : \"\" : -1;\r\n                        inputData[methodUrl][item.foreignDataField] = this.state.selectedMaster[fieldName] ? this.state.selectedMaster[fieldName].value ? this.state.selectedMaster[fieldName].value : \"\" : -1;\r\n                        return inputData;\r\n                    }\r\n                    else if (item.controlType === \"datepicker\") {\r\n                        inputData[methodUrl][item.dateField] = formatInputDate(this.state.selectedMaster[fieldName] ? this.state.selectedMaster[fieldName] : \"\", false);\r\n                    }\r\n                    else if (item.controlType === \"checkbox\") {\r\n                        inputData[methodUrl][item.controlName] = this.state.selectedMaster[item.controlName] ? this.state.selectedMaster[item.controlName] : transactionStatus.NO;\r\n                    }\r\n                    else {\r\n                        inputData[methodUrl][fieldName] = this.state.selectedMaster[fieldName] ? this.state.selectedMaster[fieldName] : \"\";\r\n                    }\r\n                    // inputData[methodUrl][selectedRecordPrimarykey] = this.props.Login.selectedId;\r\n                    return inputData;\r\n                }\r\n            })\r\n        }\r\n        // }\r\n\r\n        const inputParam = {\r\n            withoutCombocomponent: this.state.withoutCombocomponent,\r\n            comboComponents: this.state.comboComponents,\r\n            selectedRecord: this.state.selectedRecord,\r\n            selectedRecordName: 'selectedRecord',\r\n            loadSubSample: false,\r\n            selectedControl: this.props.Login.selectedControl,\r\n            comboData: this.props.Login.comboData,\r\n            comboName: 'comboData',\r\n            classUrl: this.props.Login.selectedControl.table.item.classUrl,\r\n            methodUrl: this.props.Login.selectedControl.table.item.methodUrl,\r\n            displayName: this.props.Login.selectedControl.table.item.sdisplayname,\r\n            inputData: inputData,\r\n            operation: \"create\", saveType, formRef\r\n        }\r\n\r\n        this.props.addMasterRecord(inputParam, this.props.Login.masterData)\r\n\r\n\r\n        // if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n\r\n        //     const updateInfo = {\r\n        //         typeName: DEFAULT_RETURN,\r\n        //         data: {\r\n        //             loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n        //             openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }),\r\n        //             operation: this.props.Login.operation\r\n        //         }\r\n        //     }\r\n        //     this.props.updateStore(updateInfo);\r\n        // }\r\n        // else {\r\n        //  this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        //  }\r\n\r\n    }\r\n\r\n\r\n    addMasterRecord = (control) => {\r\n        let fieldList = []\r\n        let masterComboColumnFiled = []\r\n        let extractedColumnList = []\r\n        if (control.table.item.component === 'Type2Component' || control.table.item.component === 'Type1Component') {\r\n            if (control.table.item.component === 'Type2Component') {\r\n                fieldList = getFieldSpecification().get(control.table.item.methodUrl) || [];\r\n            } else {\r\n                fieldList = getFieldSpecification1().get(control.table.item.methodUrl) || [];\r\n            }\r\n\r\n\r\n            extractedColumnList = extractFieldHeader(Object.values(fieldList));\r\n\r\n            const primaryKeyField = Object.keys(fieldList).length > 0 ? fieldList[0].dataField : \"\";\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    selectedControl: control,\r\n                    addMaster: true,\r\n                    masterfieldList: fieldList,\r\n                    masterextractedColumnList: extractedColumnList,\r\n                    masterprimaryKeyField: primaryKeyField,\r\n                    masterComboColumnFiled: masterComboColumnFiled\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo)\r\n        }\r\n        else if (control.table.item.component === 'Type3Component') {\r\n            fieldList = getFieldSpecification3().get(control.table.item.methodUrl) || [];\r\n            extractedColumnList = extractFieldHeader(Object.values(fieldList));\r\n            masterComboColumnFiled = extractedColumnList.filter(item =>\r\n                item.ndesigncomponentcode === designComponents.COMBOBOX)\r\n            const primaryKeyField = Object.keys(fieldList).length > 0 ? fieldList[0].dataField : \"\";\r\n            const inputParam = {\r\n                userinfo: this.props.Login.userInfo,\r\n                selectedControl: control,\r\n                masterfieldList: fieldList,\r\n                masterextractedColumnList: extractedColumnList,\r\n                masterprimaryKeyField: primaryKeyField,\r\n                masterComboColumnFiled: masterComboColumnFiled\r\n            }\r\n\r\n            this.props.getAddMasterCombo(inputParam);\r\n\r\n        }\r\n        else if (control.table.item.component === 'Dynamic') {\r\n            const inputParam = {\r\n                userinfo: this.props.Login.userInfo,\r\n                selectedControl: control\r\n            }\r\n            this.props.getDynamicMasterTempalte(inputParam);\r\n        }\r\n\r\n        // this.props.getMasterRecord(control);\r\n    }\r\n\r\n    openModal = () => {\r\n\r\n        const addId = this.props.Login.inputParam && this.state.controlMap.has(\"Add\")\r\n            && this.state.controlMap.get(\"Add\").ncontrolcode;\r\n\r\n        this.props.getDynamicMasterCombo(this.props.Login.masterData, this.props.Login.userInfo, addId,\r\n            this.state.designData, this.state.selectedRecord, this.state.childColumnList,\r\n            this.state.comboComponents, this.state.withoutCombocomponent,\r\n            false, true, new Map(), true, \"create\", this.props.Login.displayName);\r\n    }\r\n\r\n    fetchRecord = (fetchRecordParam) => {\r\n\r\n        this.props.getEditDynamicMasterCombo(fetchRecordParam,\r\n            this.state.designData, this.state.selectedRecord, this.state.childColumnList,\r\n            this.state.comboComponents, this.state.withoutCombocomponent)\r\n\r\n    }\r\n\r\n\r\n    onNumericBlur = (value, control) => {\r\n        let selectedRecord = this.state.selectedRecord\r\n        if (selectedRecord[control.label]) {\r\n            if (control.max) {\r\n                if (!(selectedRecord[control.label] < parseFloat(control.max))) {\r\n                    selectedRecord[control.label] = control.precision ? parseFloat(control.max) : parseInt(control.max)\r\n                }\r\n            }\r\n            if (control.min) {\r\n                if (!(selectedRecord[control.label] > parseFloat(control.min))) {\r\n                    selectedRecord[control.label] = control.precision ? parseFloat(control.min) : parseInt(control.min)\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    comboChild = (data, columnList, childColumnList, slice) => {\r\n        let retunObj = {}\r\n        // if (data.findIndex(x => x.label === columnList.label) !== -1) {\r\n        if (!childColumnList.hasOwnProperty(columnList.label)) {\r\n            if (childColumnList[columnList.label] === undefined) {\r\n                if (columnList.hasOwnProperty(\"child\")) {\r\n                    let childList = []\r\n                    columnList.child.map(childData => {\r\n                        const index = data.findIndex(x => x.label === childData.label)\r\n                        if (index !== -1) {\r\n                            childList.push(data[index])\r\n                            if (slice) {\r\n                                data = [...data.slice(0, index), ...data.slice(index + 1)]\r\n                            }\r\n                        }\r\n                    })\r\n                    childColumnList[columnList.label] = childList;\r\n                    if (childList.length > 0) {\r\n                        childList.map(y => {\r\n                            if (y.hasOwnProperty(\"child\")) {\r\n                                const val = this.comboChild(data, y, childColumnList, slice)\r\n                                retunObj[\"data\"] = val.data;\r\n                                retunObj[\"childColumnList\"] = val.childColumnList;\r\n                            } else {\r\n                                retunObj[\"data\"] = data;\r\n                                retunObj[\"childColumnList\"] = childColumnList;\r\n                            }\r\n                        })\r\n                    } else {\r\n                        retunObj[\"data\"] = data;\r\n                        retunObj[\"childColumnList\"] = childColumnList;\r\n                    }\r\n                } else {\r\n                    retunObj[\"data\"] = data;\r\n                    retunObj[\"childColumnList\"] = childColumnList;\r\n                }\r\n            } else {\r\n                retunObj[\"data\"] = data;\r\n                retunObj[\"childColumnList\"] = childColumnList;\r\n\r\n            }\r\n        } else {\r\n            retunObj[\"data\"] = data;\r\n            retunObj[\"childColumnList\"] = childColumnList;\r\n\r\n        }\r\n        return retunObj;\r\n    }\r\n\r\n    onComboChange = (comboData, control, customName) => {\r\n\r\n        let comboName = customName || control.label;\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (comboData) {\r\n            comboData[\"item\"] = {\r\n                ...comboData[\"item\"], \"pkey\": control.valuemember, \"nquerybuildertablecode\": control.nquerybuildertablecode,\r\n                \"source\": control.source\r\n            };\r\n            selectedRecord[comboName] = comboData;\r\n        } else {\r\n            selectedRecord[comboName] = [];\r\n        }\r\n        if (control.child && control.child.length > 0) {\r\n            const childComboList = getSameRecordFromTwoArrays(this.state.comboComponents, control.child, \"label\")\r\n            let childColumnList = {};\r\n            childComboList.map(columnList => {\r\n                const val = this.comboChild(this.state.comboComponents, columnList, childColumnList, false);\r\n                childColumnList = val.childColumnList\r\n            })\r\n\r\n            const parentList = getSameRecordFromTwoArrays(this.state.withoutCombocomponent, control.child, \"label\")\r\n\r\n            const inputParem = {\r\n                child: control.child,\r\n                source: control.source,\r\n                primarykeyField: control.valuemember,\r\n                value: comboData.value,\r\n                item: comboData.item\r\n            }\r\n            this.props.getChildValues(inputParem,\r\n                this.props.Login.userInfo, selectedRecord, this.props.Login.comboData,\r\n                childComboList, childColumnList, this.state.withoutCombocomponent, [...childComboList, ...parentList])\r\n        } else {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { selectedRecord }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n    }\r\n\r\n    onNumericInputChange = (value, name) => {\r\n        let selectedRecord = this.state.selectedRecord\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    handleDateChange = (dateValue, dateName) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[dateName] = dateValue;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onDrop = (value, type, oldVlaue) => {\r\n        const design = this.state.design;\r\n        let columns = design[0].children;\r\n        let designData = this.props.Login.ReactInputFields;\r\n        value = JSON.parse(value.fields);\r\n        value = { ...value, type: \"component\" }\r\n        let designDataIndex = designData.findIndex(item => item.label === value.label);\r\n        let firstIndex = columns[0] ? columns[0].children.findIndex(item => item.label === value.label) : -1;\r\n        let secondIndex = columns[1] ? columns[1].children.findIndex(item => item.label === value.label) : -1;\r\n\r\n        if (designDataIndex >= 0)\r\n            designData.splice(designDataIndex, 1);\r\n        if (firstIndex >= 0) {\r\n            if (type !== 1) {\r\n                columns[0].children.splice(firstIndex, 1);\r\n                // columns[0].splice(to, 0, columns[0].splice(from, 1)[0]);\r\n            } else {\r\n                if (oldVlaue) {\r\n                    oldVlaue = JSON.parse(oldVlaue);\r\n                    let from = columns[0].children.findIndex(item => item.label === value.label);\r\n                    let to = columns[0].children.findIndex(item => item.label === oldVlaue.label);\r\n                    columns[0].children.splice(to, 0, columns[0].children.splice(from, 1)[0]);\r\n                }\r\n            }\r\n\r\n        } else if (type === 1) {\r\n            if (columns[0]) {\r\n                columns[0].children.push(value);\r\n            } else {\r\n                columns[0] = {\r\n                    id: \"1\",\r\n                    type: \"column\",\r\n                    children: []\r\n                }\r\n\r\n                columns[0].children.push(value);\r\n            }\r\n        }\r\n        if (secondIndex >= 0) {\r\n            if (type !== 2) {\r\n                columns[1].splice(secondIndex, 1);\r\n            } else {\r\n                if (oldVlaue) {\r\n                    oldVlaue = JSON.parse(oldVlaue);\r\n                    let from = columns[1].children.findIndex(item => item.label === value.label);\r\n                    let to = columns[1].children.findIndex(item => item.label === oldVlaue.label);\r\n                    columns[1].children.splice(to, 0, columns[1].children.splice(from, 1)[0]);\r\n                }\r\n            }\r\n        } else if (type === 2) {\r\n            if (columns[1]) {\r\n                columns[1].children.push(value);\r\n            } else {\r\n                columns[1] = {\r\n                    id: \"2\",\r\n                    type: \"column\",\r\n                    children: []\r\n                }\r\n                columns[1].children.push(value);\r\n            }\r\n        }\r\n\r\n        // design.push(columns)\r\n        this.setState({ designData, design })\r\n    }\r\n\r\n    onDropFile = (attachedFiles, fieldName, maxSize) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n        });\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.extractedColumnList = [];\r\n                this.detailedColumnList = [];\r\n\r\n                if (this.props.Login.masterData && this.props.Login.masterData.DynamicMasterDesign &&\r\n                    this.props.Login.masterData.DynamicMasterDesign.screendesign) {\r\n                    this.props.Login.masterData.DynamicMasterDesign.screendesign.griditem.map(row => {\r\n                        // console.log(\"data:\", row);\r\n                        this.extractedColumnList.push({ \"idsName\": row[\"1\"][this.props.Login.userInfo.slanguagetypecode], \"dataField\": row[\"2\"] });\r\n                    })\r\n                    this.props.Login.masterData.DynamicMasterDesign.screendesign.gridmoreitem.map(row => {\r\n                        this.detailedColumnList.push({ \"idsName\": row[\"1\"][this.props.Login.userInfo.slanguagetypecode], \"dataField\": row[\"2\"] });\r\n                    })\r\n                }\r\n\r\n                let data = [];\r\n                const withoutCombocomponent = [];\r\n                const mandatoryFields = [];\r\n                const Layout = (this.props.Login.masterData.DynamicMasterDesign && this.props.Login.masterData.DynamicMasterDesign.slideoutdesign) || [];\r\n                Layout.map(row => {\r\n                    row.children.map(column => {\r\n                        column.children.map(component => {\r\n                            if (component.hasOwnProperty(\"children\")) {\r\n                                component.children.map(componentrow => {\r\n                                    if (componentrow.inputtype === \"combo\") {\r\n                                        data.push(componentrow)\r\n                                    } else {\r\n                                        withoutCombocomponent.push(componentrow)\r\n                                    }\r\n                                    if (componentrow.mandatory === true) {\r\n                                        if (componentrow.inputtype === \"email\") {\r\n                                            mandatoryFields.push({\r\n                                                \"mandatory\": true, \"idsName\": componentrow.label,\r\n                                                \"dataField\": componentrow.label,\r\n                                                \"alertPreFix\": this.props.intl.formatMessage({ id: \"IDS_VALID\" }),\r\n                                                \"validateFunction\": validateEmail,\r\n                                                \"mandatoryLabel\": \"IDS_ENTER\",\r\n                                                \"controlType\": \"textbox\"\r\n                                            })\r\n                                        }\r\n                                        else {\r\n                                            mandatoryFields.push({\r\n                                                \"mandatory\": true,\r\n                                                \"idsName\": componentrow.label,\r\n                                                \"dataField\": componentrow.label,\r\n                                                \"mandatoryLabel\": componentrow.inputtype === \"combo\" ?\r\n                                                    \"IDS_SELECT\" : \"IDS_ENTER\",\r\n                                                \"controlType\": componentrow.inputtype === \"combo\" ?\r\n                                                    \"selectbox\" : \"textbox\"\r\n                                            })\r\n                                        }\r\n                                    }\r\n                                })\r\n                            }\r\n                            else {\r\n                                component.inputtype === \"combo\" ?\r\n                                    data.push(component)\r\n                                    : withoutCombocomponent.push(component)\r\n\r\n                                if (component.mandatory === true) {\r\n                                    if (component.inputtype === \"email\") {\r\n                                        mandatoryFields.push({\r\n                                            \"mandatory\": true, \"idsName\": component.label,\r\n                                            \"dataField\": component.label,\r\n                                            \"alertPreFix\": this.props.intl.formatMessage({ id: \"IDS_VALID\" }),\r\n                                            \"validateFunction\": validateEmail,\r\n                                            \"mandatoryLabel\": \"IDS_ENTER\",\r\n                                            \"controlType\": \"textbox\"\r\n                                        })\r\n                                    }\r\n                                    else {\r\n                                        mandatoryFields.push({\r\n                                            \"mandatory\": true,\r\n                                            \"idsName\": component.label,\r\n                                            \"dataField\": component.label,\r\n                                            \"mandatoryLabel\": component.inputtype === \"combo\" ?\r\n                                                \"IDS_SELECT\" : \"IDS_ENTER\",\r\n                                            \"controlType\": component.inputtype === \"combo\" ?\r\n                                                \"selectbox\" : \"textbox\"\r\n                                        })\r\n                                    }\r\n                                }\r\n                            }\r\n                        })\r\n                    })\r\n                })\r\n                const comboComponents = data;\r\n                let childColumnList = {};\r\n                data.map(columnList => {\r\n                    const val = this.comboChild(data, columnList, childColumnList, true);\r\n                    data = val.data;\r\n                    childColumnList = val.childColumnList\r\n                })\r\n\r\n                const masterData = this.props.Login.masterData.DynamicMasterData ? sortData(this.props.Login.masterData.DynamicMasterData, \"descending\", \"ndynamicmastercode\") : [];\r\n\r\n                this.setState({\r\n                    withoutCombocomponent, comboComponents, childColumnList, designData: data, mandatoryFields,\r\n                    userRoleControlRights, controlMap, data: this.props.Login.masterData.DynamicMasterData || [],\r\n                    dataResult: process(masterData || [], this.state.dataState),\r\n                });\r\n            }\r\n            else {\r\n                let { dataState } = this.state;\r\n                if (this.props.Login.dataState === undefined) {\r\n                    dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 }\r\n                }\r\n\r\n                const masterData = this.props.Login.masterData.DynamicMasterData ? sortData(this.props.Login.masterData.DynamicMasterData, \"descending\", \"ndynamicmastercode\") : [];\r\n\r\n                this.setState({\r\n                    data: this.props.Login.masterData.DynamicMasterData || [], selectedRecord: this.props.Login.selectedRecord,\r\n                    dataResult: process(masterData || [], dataState),\r\n                    dataState//, comboComponents, withoutCombocomponent\r\n                });\r\n            }\r\n        }\r\n\r\n        if (this.props.Login.selectedMaster !== previousProps.Login.selectedMaster) {\r\n            this.setState({ selectedMaster: this.props.Login.selectedMaster });\r\n        }\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n    }\r\n\r\n    onInputOnChange = (event, value) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n        if (event.target.type === 'toggle') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        } else if (event.target.type === 'numeric') {\r\n            if (/\\D/.test(event.target.value))\r\n                selectedRecord[event.target.name] = event.target.value;\r\n        } else if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = value;\r\n        } else if (event.target.type === 'radio') {\r\n            selectedRecord[event.target.name] = value\r\n        } else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    //deleteRecord = (selectedRecord, operation, ncontrolCode) => {\r\n    deleteRecord = (deleteParam) => {\r\n        const inputParam = {\r\n            classUrl: \"dynamicmaster\",\r\n            methodUrl: \"DynamicMaster\",\r\n            displayName: this.props.Login.displayName,\r\n            inputData: {\r\n                [\"dynamicmaster\"]: { \"ndynamicmastercode\": deleteParam.selectedRecord.ndynamicmastercode },//.dataItem,\r\n                \"userinfo\": this.props.Login.userInfo\r\n            },\r\n            operation: \"delete\",\r\n            dataState: this.state.dataState\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.Login.displayName,\r\n                    operation: \"delete\"\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    reloadData = () => {\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            userInfo: this.props.Login.userInfo,\r\n            displayName: this.props.Login.inputParam.displayName\r\n        };\r\n        this.props.callService(inputParam);\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        //add / edit  \r\n\r\n        let inputData = [];\r\n        let dataState = undefined;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        inputData[\"masterdateconstraints\"] = this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdateconstraints;\r\n        inputData[\"masterdatefields\"] = this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdatefields;\r\n        inputData[\"mastercombinationunique\"] = this.props.Login.masterData.DynamicMasterDesign.screendesign.mastercombinationunique;\r\n        let selectedId = null;\r\n        let operation = \"\";\r\n        let selectedRecord = this.state.selectedRecord;\r\n        if (this.props.Login.operation === \"update\") {    // edit\r\n            dataState = this.state.dataState\r\n            inputData[\"dynamicmaster\"] = { ndynamicmastercode: this.state.selectedRecord[\"ndynamicmastercode\"] };//this.state.selectedRecord;\r\n            inputData[\"dynamicmaster\"][\"jsondata\"] = {};\r\n            inputData[\"dynamicmaster\"][\"jsonuidata\"] = {};\r\n            selectedId = this.props.Login.selectedId;\r\n            operation = \"update\";\r\n        }\r\n        else {\r\n            //add                          \r\n            inputData[\"dynamicmaster\"] = { //\"nsitecode\": this.props.Login.userInfo.nmastersitecode, \r\n                nformcode: this.props.Login.userInfo.nformcode,\r\n                ndesigntemplatemappingcode: this.props.Login.masterData.DynamicMasterDesign.ndesigntemplatemappingcode,\r\n                jsondata: {}, jsonuidata: {}\r\n            };\r\n\r\n            operation = \"create\";\r\n\r\n        }\r\n\r\n        const dateList = [];\r\n        const defaulttimezone = this.props.Login.defaulttimezone;\r\n        const userInfo = this.props.Login.userInfo;\r\n\r\n        this.props.Login.masterData.DynamicMasterDesign &&\r\n            this.props.Login.masterData.DynamicMasterDesign.slideoutdesign.map(row => {\r\n                row.children.map(column => {\r\n                    column.children.map(component => {\r\n                        if (component.hasOwnProperty(\"children\")) {\r\n\r\n                            component.children.map(componentrow => {\r\n                                if (componentrow.inputtype === \"combo\") {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = selectedRecord[componentrow.label] ?\r\n                                        {\r\n                                            value: selectedRecord[componentrow.label].value,\r\n                                            label: selectedRecord[componentrow.label].label,\r\n                                            pkey: selectedRecord[componentrow.label].item.pkey,\r\n                                            nquerybuildertablecode: selectedRecord[componentrow.label].item.nquerybuildertablecode,\r\n                                            source: selectedRecord[componentrow.label].item.source\r\n                                        } : -1\r\n\r\n                                    inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = selectedRecord[componentrow.label] ? selectedRecord[componentrow.label].label : \"\"\r\n\r\n                                }\r\n                                else if (componentrow.inputtype === \"date\") {\r\n                                    if (componentrow.mandatory) {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = formatDate(selectedRecord[componentrow.label], false)\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n                                        //inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\r\n                                    }\r\n                                    else {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = componentrow.loadcurrentdate ?\r\n                                            formatDate(selectedRecord[componentrow.label] || new Date(), false) :\r\n                                            selectedRecord[componentrow.label] ? formatDate(selectedRecord[componentrow.label], false)\r\n                                                : \"\";\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];\r\n                                        //convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\r\n                                    }\r\n                                    if (componentrow.timezone) {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][`tz${componentrow.label}`] = selectedRecord[`tz${componentrow.label}`] ?\r\n                                            { value: selectedRecord[`tz${componentrow.label}`].value, label: selectedRecord[`tz${componentrow.label}`].label } :\r\n                                            defaulttimezone ? defaulttimezone : -1\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][`tz${componentrow.label}`] = inputData[\"dynamicmaster\"][\"jsondata\"][`tz${componentrow.label}`]\r\n                                    }\r\n                                    dateList.push(componentrow.label)\r\n                                }\r\n\r\n                                else {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = selectedRecord[componentrow.label] ?\r\n                                        selectedRecord[componentrow.label] : \"\"\r\n\r\n                                    inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n                                    // inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n\r\n                                }\r\n                                return inputData[\"dynamicmaster\"];\r\n                            })\r\n                        }\r\n                        else {\r\n                            if (component.inputtype === \"combo\") {\r\n                                inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = selectedRecord[component.label] ?\r\n                                    {\r\n                                        value: selectedRecord[component.label].value,\r\n                                        label: selectedRecord[component.label].label,\r\n                                        pkey: selectedRecord[component.label].item.pkey,\r\n                                        nquerybuildertablecode: selectedRecord[component.label].item.nquerybuildertablecode,\r\n                                        source: selectedRecord[component.label].item.source\r\n                                    } : -1\r\n\r\n                                inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label].label;\r\n                                //selectedRecord[component.label] ? selectedRecord[component.label].label : \"\"\r\n                            }\r\n                            else if (component.inputtype === \"date\") {\r\n                                if (component.mandatory) {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = formatDate(selectedRecord[component.label], false);\r\n                                    // convertDateTimetoString(selectedRecord[component.label] ?\r\n                                    // selectedRecord[component.label] : new Date(), userInfo);\r\n\r\n                                    inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                                    //convertDateTimetoString(selectedRecord[component.label], userInfo);\r\n\r\n                                } else {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = component.loadcurrentdate ?\r\n                                        //convertDateTimetoString(selectedRecord[component.label] ?                                      \r\n                                        //    selectedRecord[component.label] : new Date(), userInfo) :\r\n                                        formatDate(selectedRecord[component.label] || new Date(), false) :\r\n                                        selectedRecord[component.label] ?\r\n                                            // convertDateTimetoString(selectedRecord[component.label] ?\r\n                                            //   selectedRecord[component.label] : new Date(), userInfo) : \"\";\r\n                                            formatDate(selectedRecord[component.label], false) : \"\";\r\n                                    inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                                    //convertDateTimetoString(selectedRecord[component.label], userInfo)\r\n\r\n                                }\r\n                                if (component.timezone) {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][`tz${component.label}`] = selectedRecord[`tz${component.label}`] ?\r\n                                        { value: selectedRecord[`tz${component.label}`].value, label: selectedRecord[`tz${component.label}`].label } :\r\n                                        defaulttimezone ? defaulttimezone : -1\r\n\r\n                                    inputData[\"dynamicmaster\"][\"jsonuidata\"][`tz${component.label}`] = inputData[\"dynamicmaster\"][\"jsondata\"][`tz${component.label}`]\r\n                                }\r\n                                dateList.push(component.label)\r\n                            }\r\n                            else {\r\n                                inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = selectedRecord[component.label] ?\r\n                                    selectedRecord[component.label] : \"\"\r\n\r\n                                inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                            }\r\n                        }\r\n                        return inputData[\"dynamicmaster\"];\r\n                    }\r\n                    )\r\n                    return inputData[\"dynamicmaster\"];\r\n                })\r\n                return inputData[\"dynamicmaster\"];\r\n            })\r\n\r\n\r\n        inputData[\"dynamicmaster\"][\"jsonstring\"] = JSON.stringify(inputData[\"dynamicmaster\"][\"jsondata\"]);\r\n        inputData[\"dynamicmaster\"][\"jsonuistring\"] = JSON.stringify(inputData[\"dynamicmaster\"][\"jsonuidata\"]);\r\n        inputData[\"masterdatelist\"] = dateList;\r\n\r\n        const inputParam = {\r\n            classUrl: \"dynamicmaster\",\r\n            methodUrl: \"DynamicMaster\",\r\n            displayName: this.props.Login.displayName,\r\n            inputData: inputData, operation: operation,\r\n            saveType, formRef, selectedId, dataState\r\n\r\n        }\r\n        const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode);\r\n        if (esignNeeded) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.Login.displayName,\r\n                    operation: \"create\"\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, updateStore, validateEsignCredential,\r\n    getChildValues, getEditDynamicMasterCombo,//fetchRecord,\r\n    getDynamicMasterCombo,\r\n    addMasterRecord, getAddMasterCombo, getDynamicMasterTempalte,\r\n    getChildComboMaster\r\n})(injectIntl(DynamicMaster));\r\n"]},"metadata":{},"sourceType":"module"}