{"ast":null,"code":"import rsapi from '../rsapi';\nimport { DEFAULT_RETURN } from './LoginTypes';\nimport { toast } from 'react-toastify';\nimport Axios from 'axios';\nimport { initRequest } from './LoginAction';\nimport { transactionStatus } from '../components/Enumeration';\nimport { constructOptionList } from '../components/CommonScript';\nexport function openFTPConfigModal(userInfo, ncontrolcode) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    const uiArray = [rsapi.post(\"site/getSiteForFTP\", {\n      \"userinfo\": userInfo\n    })];\n    uiArray.push(rsapi.post(\"ftpconfig/getFTPType\", {\n      \"userinfo\": userInfo\n    }));\n    Axios.all(uiArray).then(response => {\n      const selectedRecord = {};\n      const siteList = response[0].data[\"SiteList\"] || [];\n      const ftpTypeListMap = constructOptionList(response[1].data, 'nftptypecode', 'sftptypename', undefined, undefined, undefined, 'ndefaultstatus') || [];\n      const ftpTypeList = ftpTypeListMap.get(\"OptionList\");\n      const defaultftpTypeList = ftpTypeListMap.get(\"DefaultValue\");\n      selectedRecord['nftptypecode'] = defaultftpTypeList;\n      selectedRecord['nsitecode'] = siteList.length > 0 ? siteList[0].ndefaultstatus === transactionStatus.YES ? siteList[0].nsitecode : -1 : -1;\n      selectedRecord['siteValue'] = siteList.length > 0 ? siteList[0].ndefaultstatus === transactionStatus.YES ? [{\n        value: siteList[0].nsitecode,\n        label: siteList[0].ssitename,\n        item: siteList[0]\n      }] : [] : [];\n      selectedRecord[\"sphysicalpath\"] = response[0].data[\"CheckSumDefaultPath\"];\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openModal: true,\n          operation: \"create\",\n          siteOptions: siteList,\n          ftpTypeList,\n          checkSumDefaultPath: response[0].data[\"CheckSumDefaultPath\"],\n          selectedRecord,\n          ncontrolcode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\n;\nexport function fetchFTPConfigByID(editParam) {\n  return function (dispatch) {\n    const url1 = rsapi.post(\"site/getSiteForFTP\", {\n      \"userinfo\": editParam.userInfo\n    });\n    const url2 = rsapi.post(\"ftpconfig/getActiveFTPConfigById\", {\n      [editParam.primaryKeyField]: editParam.primaryKeyValue,\n      \"userinfo\": editParam.userInfo\n    });\n    const url3 = rsapi.post(\"ftpconfig/getFTPType\", {\n      \"userinfo\": editParam.userInfo\n    });\n    dispatch(initRequest(true));\n    Axios.all([url1, url2, url3]).then(response => {\n      let selectedId = editParam.primaryKeyValue;\n      let selectedRecord = response[1].data;\n      selectedRecord['siteValue'] = {\n        value: response[1].data.nsitecode,\n        label: response[1].data.ssitename\n      };\n      selectedRecord['nftptypecode'] = {\n        value: response[1].data.nftptypecode,\n        label: response[1].data.sftptypename\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openModal: true,\n          selectedRecord,\n          ftpTypeList: constructOptionList(response[2].data, 'nftptypecode', 'sftptypename').get(\"OptionList\"),\n          operation: editParam.operation,\n          screenName: editParam.screenName,\n          siteOptions: response[0].data,\n          ncontrolcode: editParam.ncontrolCode,\n          inputparam: editParam.inputparam,\n          loading: false,\n          selectedId\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/FTPConfigAction.js"],"names":["rsapi","DEFAULT_RETURN","toast","Axios","initRequest","transactionStatus","constructOptionList","openFTPConfigModal","userInfo","ncontrolcode","dispatch","uiArray","post","push","all","then","response","selectedRecord","siteList","data","ftpTypeListMap","undefined","ftpTypeList","get","defaultftpTypeList","length","ndefaultstatus","YES","nsitecode","value","label","ssitename","item","type","payload","openModal","operation","siteOptions","checkSumDefaultPath","loading","catch","error","status","message","warn","fetchFTPConfigByID","editParam","url1","url2","primaryKeyField","primaryKeyValue","url3","selectedId","nftptypecode","sftptypename","screenName","ncontrolCode","inputparam"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport {DEFAULT_RETURN} from './LoginTypes';\r\nimport { toast } from 'react-toastify';\r\nimport Axios from 'axios'\r\nimport { initRequest } from './LoginAction';\r\nimport { transactionStatus } from '../components/Enumeration';\r\nimport { constructOptionList } from '../components/CommonScript';\r\n\r\nexport function openFTPConfigModal  (userInfo,ncontrolcode)  {\r\n\r\n    return function(dispatch){\r\n    dispatch(initRequest(true));\r\n   const uiArray=[rsapi.post(\"site/getSiteForFTP\",{\"userinfo\": userInfo})]\r\n   uiArray.push(rsapi.post(\"ftpconfig/getFTPType\",{\"userinfo\": userInfo}))\r\n   Axios.all(uiArray).then(response=> { \r\n        const selectedRecord={};\r\n        const siteList = response[0].data[\"SiteList\"] || [];\r\n        const ftpTypeListMap =constructOptionList(response[1].data,'nftptypecode','sftptypename',undefined, undefined, undefined,\r\n        'ndefaultstatus') || [];\r\n        const ftpTypeList =ftpTypeListMap.get(\"OptionList\");\r\n        const defaultftpTypeList =ftpTypeListMap.get(\"DefaultValue\");\r\n      \r\n        selectedRecord['nftptypecode']=defaultftpTypeList\r\n        \r\n        selectedRecord['nsitecode']=siteList.length>0?\r\n                                    siteList[0].ndefaultstatus===transactionStatus.YES?\r\n                                    siteList[0].nsitecode\r\n                                    :-1:-1\r\n        selectedRecord['siteValue']=siteList.length>0? siteList[0].ndefaultstatus===transactionStatus.YES?  \r\n                                    [{value:siteList[0].nsitecode,label:siteList[0].ssitename,item:siteList[0]}]\r\n                                    :[]:[]\r\n        selectedRecord[\"sphysicalpath\"]= response[0].data[\"CheckSumDefaultPath\"];\r\n        dispatch({\r\n            type: DEFAULT_RETURN, payload:{\r\n                openModal:true,\r\n                operation:\"create\",\r\n                siteOptions:siteList,\r\n                ftpTypeList,\r\n                checkSumDefaultPath: response[0].data[\"CheckSumDefaultPath\"],\r\n                selectedRecord,ncontrolcode    \r\n                ,loading:false           \r\n                }\r\n            }) \r\n    })\r\n    .catch(error => {\r\n        dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n        if (error.response.status === 500){\r\n            toast.error(error.message);\r\n        } \r\n        else{               \r\n            toast.warn(error.response.data);\r\n        }         \r\n    })\r\n}\r\n};\r\n\r\nexport function fetchFTPConfigByID(editParam){\r\n\r\n    return function(dispatch){\r\n    const url1=rsapi.post(\"site/getSiteForFTP\",{\"userinfo\": editParam.userInfo})\r\n    const url2=rsapi.post(\"ftpconfig/getActiveFTPConfigById\",\r\n            { [editParam.primaryKeyField] :editParam.primaryKeyValue,\"userinfo\":editParam.userInfo} )\r\n     const url3=rsapi.post(\"ftpconfig/getFTPType\",{\"userinfo\": editParam.userInfo})\r\n    dispatch(initRequest(true));\r\n    Axios.all([url1,url2,url3])\r\n    .then(response=> { \r\n        let selectedId=editParam.primaryKeyValue\r\n        let selectedRecord=response[1].data\r\n        selectedRecord['siteValue']={value:response[1].data.nsitecode,label:response[1].data.ssitename}\r\n        selectedRecord['nftptypecode']={value:response[1].data.nftptypecode,label:response[1].data.sftptypename}\r\n        \r\n        dispatch({\r\n            type: DEFAULT_RETURN, payload:{\r\n            openModal:true, \r\n            selectedRecord ,\r\n            ftpTypeList:constructOptionList(response[2].data,'nftptypecode','sftptypename').get(\"OptionList\"),\r\n            operation:editParam.operation,\r\n            screenName:editParam.screenName,\r\n            siteOptions:response[0].data,\r\n            ncontrolcode:editParam.ncontrolCode,\r\n            inputparam:editParam.inputparam,\r\n            loading:false,selectedId\r\n        }}) \r\n    })\r\n    .catch(error => {\r\n        dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n        if (error.response.status === 500){\r\n            toast.error(error.message);\r\n        } \r\n        else{               \r\n            toast.warn(error.response.data);\r\n        }         \r\n    })\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}