{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from'react-redux';import{FormattedMessage,injectIntl}from\"react-intl\";import{callService,crudMaster,validateEsignCredential,updateStore,getInstitutionDetail,getInstitutionCombo,getInstitutionSiteData,addInstitutionFile,changeInstitutionCategoryFilter,viewAttachment,filterColumnData,getCitComboServices,getDistComboServices}from\"../../../actions\";import BreadcrumbComponent from\"../../../components/Breadcrumb.Component\";import{Affix}from'rsuite';import{constructOptionList,getControlMap,showEsign,onDropAttachFileList,deleteAttachmentDropZone,create_UUID,validatePhoneNumber,validateEmail,Lims_JSON_stringify}from'../../../components/CommonScript';import{Row,Col,Card,FormGroup,FormLabel,Nav}from\"react-bootstrap\";import{ContentPanel}from'../../product/product.styled';import ListMaster from\"../../../components/list-master/list-master.component\";import ReactTooltip from'react-tooltip';import InstitutionCategoryFilter from\"./InstitutionCategoryFilter\";import{ReadOnlyText}from'../../../components/App.styles';import CustomTab from\"../../../components/custom-tabs/custom-tabs.component\";import InstitutionSiteTab from\"./InstitutionSiteTab\";import InstitutionFileTab from\"./InstitutionFileTab\";import{DEFAULT_RETURN}from\"../../../actions/LoginTypes\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faPencilAlt,faTrashAlt}from\"@fortawesome/free-solid-svg-icons\";import SlideOutModal from\"../../../components/slide-out-modal/SlideOutModal\";import Esign from\"../../audittrail/Esign\";import AddInstitution from\"./AddInstitution\";import AddInstitutionSite from\"./AddInstitutionSite\";import AddInstitutionFile from\"./AddInstitutionFile\";import ConfirmMessage from'../../../components/confirm-alert/confirm-message.component';import{toast}from'react-toastify';import{attachmentType,transactionStatus}from\"../../../components/Enumeration\";var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Institution=/*#__PURE__*/function(_React$Component){_inherits(Institution,_React$Component);var _super=_createSuper(Institution);function Institution(props){var _this;_classCallCheck(this,Institution);_this=_super.call(this,props);_this.tabDetail=function(){var tabMap=new Map();var editSiteId=_this.state.controlMap.has(\"EditInstitutionSite\")&&_this.state.controlMap.get(\"EditInstitutionSite\").ncontrolcode;var deleteSiteId=_this.state.controlMap.has(\"DeleteInstitutionSite\")&&_this.state.controlMap.get(\"DeleteInstitutionSite\").ncontrolcode;var deleteFileId=_this.state.controlMap.has(\"DeleteInstitutionFile\")&&_this.state.controlMap.get(\"DeleteInstitutionFile\").ncontrolcode;var deleteParam={operation:\"delete\",deleteSiteId:deleteSiteId};var deleteTestParam={operation:\"delete\",deleteFileId:deleteFileId};var editParam={screenName:_this.props.intl.formatMessage({id:\"IDS_INSTITUTIONSITE\"}),operation:\"update\",primaryKeyField:\"ninstitutionsitecode\",userInfo:_this.props.Login.userInfo,inputParam:_this.props.Login.inputParam,ncontrolcode:editSiteId,instItem:_this.props.Login.masterData.selectedInstitution,instItemSite:_this.props.Login.masterData.selectedInstitutionSite};tabMap.set(\"IDS_INSTITUTIONSITE\",/*#__PURE__*/React.createElement(InstitutionSiteTab,{selectedId:_this.props.Login.selectedId,controlMap:_this.state.controlMap,userRoleControlRights:_this.state.userRoleControlRights,selectedInstitution:_this.props.Login.masterData.selectedInstitution,InstitutionSite:_this.props.Login.masterData.InstitutionSite,masterData:_this.props.Login.masterData,userInfo:_this.props.Login.userInfo,getInstitutionSiteData:_this.props.getInstitutionSiteData,inputParam:_this.props.Login.inputParam,selectedRecord:_this.state.selectedRecord,dataState:_this.props.Login.dataState,deleteRecord:_this.DeleteInstitutionSite,deleteParam:deleteParam,fetchRecord:_this.props.getInstitutionSiteData,editParam:editParam,InstitutionSiteData:_this.props.Login.masterData.InstitutionSite||[],screenName:\"Institution Site\",settings:_this.props.Login.settings,errorCode:_this.props.Login.errorCode}));tabMap.set(\"IDS_INSTITUTIONFILE\",/*#__PURE__*/React.createElement(InstitutionFileTab,{controlMap:_this.state.controlMap,userRoleControlRights:_this.state.userRoleControlRights,userInfo:_this.props.Login.userInfo,inputParam:_this.props.Login.inputParam,InstitutionFile:_this.props.Login.masterData.InstitutionFile||[],settings:_this.props.Login.settings,addInstitutionFile:_this.props.addInstitutionFile,deleteRecord:_this.DeleteInstitutionFile,deleteParam:deleteTestParam//editParam={editTestParam}\n,viewInstitutionFile:_this.viewInstitutionFile,screenName:_this.props.intl.formatMessage({id:\"IDS_INSTITUTIONFILE\"})}));return tabMap;};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};_this.onFilterSubmit=function(){if(_this.props.Login.masterData.defaultInstitutionCategory){var inputParam={inputData:{ninstitutioncatcode:_this.state.selectedFilterRecord.ninstitutioncatcode.value,userinfo:_this.props.Login.userInfo},classUrl:\"institution\",methodUrl:\"InstitutionByCategory\"};_this.props.changeInstitutionCategoryFilter(inputParam,_this.props.Login.masterData.FilterInstitutionCategory,_this.state.selectedFilterRecord);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_INSTITUTIONCATEGORYNOTAVAILABLE\"}));}};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputParam={inputData:{\"ninstitutioncatcode\":_this.props.Login.masterData.SelectedInstitutionCategory.ninstitutioncatcode,\"userinfo\":_this.props.Login.userInfo},classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"InstitutionByCategory\",displayName:_this.props.intl.formatMessage({id:\"IDS_INSTITUTION\"})};_this.props.changeInstitutionCategoryFilter(inputParam,_this.props.Login.masterData.FilterInstitutionCategory,_this.props.Login.masterData.SelectedInstitutionCategory);};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var openChildModal=_this.props.Login.openChildModal;var selectedRecord=_this.props.Login.selectedRecord;var selectedId=_this.props.Login.selectedId;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;openChildModal=false;selectedRecord=[];}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";selectedRecord=selectedRecord;}}else{openModal=false;openChildModal=false;selectedRecord=[];_this.props.Login.cityList=[];_this.props.Login.districtList=[];selectedId=null;//this.setState({ selectedRecord });\n}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:selectedId,openChildModal:openChildModal}};_this.props.updateStore(updateInfo);};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.onNumericInputOnChange=function(value,name){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type===\"checkbox\"){selectedRecord[event.target.name]=event.target.checked===true?3:4;}else if(event.target.type===\"radio\"){selectedRecord[event.target.name]=optional;}else{if(event.target.name===\"sfaxno\"||event.target.name===\"stelephone\"){if(event.target.value!==\"\"){event.target.value=validatePhoneNumber(event.target.value);selectedRecord[event.target.name]=event.target.value!==\"\"?event.target.value:selectedRecord[event.target.name];}else{selectedRecord[event.target.name]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}}_this.setState({selectedRecord:selectedRecord});};_this.onComboChangeFilter=function(comboData,fieldName){var selectedFilterRecord=_this.state.selectedFilterRecord||[];if(comboData){if(fieldName===\"ninstitutioncatcode\"){//    if(comboData.value !== this.props.Login.masterData.defaultInstitutionCategory. ninstitutioncatcode) {\n//         let masterData = { ...this.props.Login.masterData, defaultInstitutionCategory: comboData.item}\n//         const updateInfo = { \n//             typeName: DEFAULT_RETURN,\n//             data: { masterData }\n//         }\n//         this.props.updateStore(updateInfo);\n//     }  \nselectedFilterRecord[fieldName]=comboData;}_this.setState({selectedFilterRecord:selectedFilterRecord});}};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};if(comboData!=null){if(fieldName===\"ninstitutioncatcode\"){selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"nsitecode\"){selectedRecord[\"nsitecode\"]=comboData;selectedRecord[\"ssitecode\"]=comboData.item[\"ssitecode\"];_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"nregioncode\"){selectedRecord[\"nregioncode\"]=comboData;selectedRecord[\"sregioncode\"]=comboData.item[\"sregioncode\"];_this.props.getDistComboServices({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.nregioncode.label,primarykey:selectedRecord.nregioncode.value}});selectedRecord[\"ndistrictcode\"]=\"\";selectedRecord[\"sdistrictcode\"]=\"\";selectedRecord[\"ncitycode\"]=\"\";selectedRecord[\"scitycode\"]=\"\";_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ncountrycode\"){selectedRecord[\"ncountrycode\"]=comboData;_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ndistrictcode\"){selectedRecord[\"ndistrictcode\"]=comboData;selectedRecord[\"sdistrictcode\"]=comboData.item[\"sdistrictcode\"];_this.props.getCitComboServices({inputData:{userinfo:_this.props.Login.userInfo,sdisplayname:selectedRecord.ndistrictcode.label,primarykey:selectedRecord.ndistrictcode.value}});selectedRecord[\"ncitycode\"]=\"\";selectedRecord[\"scitycode\"]=\"\";_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ncitycode\"){selectedRecord[\"ncitycode\"]=comboData;selectedRecord[\"scitycode\"]=comboData.item[\"scitycode\"];_this.setState({selectedRecord:selectedRecord});}}};_this.onSaveClick=function(saveType,formRef){var postParam=undefined;var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;var dataState=undefined;if(_this.props.Login.screenName===\"Institution\"){if(_this.props.Login.operation===\"update\"){// edit\nvar selectedRecord=_this.state.selectedRecord;postParam={inputListName:\"Institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\"};inputData[\"institution\"]={};_this.fieldInstitutionList.map(function(item){return inputData[\"institution\"][item]=selectedRecord[item]!==null?selectedRecord[item]:\"\";});inputData[\"institution\"][\"ninstitutioncode\"]=selectedRecord[\"ninstitutioncode\"]?selectedRecord[\"ninstitutioncode\"]:-1;inputData[\"institution\"][\"ninstitutioncatcode\"]=_this.state.selectedRecord?_this.state.selectedRecord.ninstitutioncatcode.value:-1;dataState=_this.state.dataState;}else{//add               \ninputData[\"institution\"]={\"nsitecode\":_this.props.Login.userInfo.nmastersitecode};_this.fieldInstitutionList.map(function(item){return inputData[\"institution\"][item]=_this.state.selectedRecord[item]!==undefined?_this.state.selectedRecord[item]:\"\";});inputData[\"institution\"][\"ninstitutioncatcode\"]=_this.state.selectedRecord?_this.state.selectedRecord.ninstitutioncatcode.value:-1;}var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"Institution\",displayName:_this.props.Login.screenName,inputData:inputData,selectedId:_this.state.selectedRecord[\"ninstututioncode\"],operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,dataState:dataState,searchRef:_this.searchRef,postParam:postParam,filtercombochange:_this.props.Login.masterData.searchedData!==undefined?_this.state.selectedRecord.ninstitutioncatcode.value===_this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode?false:true:false};var masterData=_objectSpread({},_this.props.Login.masterData);if(_this.state.selectedRecord.ninstitutioncatcode.value!==_this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode){masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultInstitutionCategory:_this.state.selectedRecord.ninstitutioncatcode.item,SelectedInstitutionCategory:_this.state.selectedRecord.ninstitutioncatcode.item});}//  this.setState({ FilterInstitutionCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\nif(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.screenName}),operation:_this.props.Login.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}else if(_this.props.Login.screenName===\"Institution Site\"){var isValidateEmail=_this.state.selectedRecord[\"semail\"]?validateEmail(_this.state.selectedRecord[\"semail\"]):true;if(isValidateEmail){if(_this.props.Login.operation===\"update\"){// edit\nvar _selectedRecord=_this.state.selectedRecord;postParam={inputListName:\"InstitutionSite\",selectedObject:\"selectedInstitutionSite\",primaryKeyField:\"ninstitutionsitecode\"};inputData[\"institutionsite\"]={};inputData[\"institutionsite\"][\"ninstitutionsitecode\"]=_selectedRecord[\"ninstitutionsitecode\"]?_selectedRecord[\"ninstitutionsitecode\"]:-1;inputData[\"institutionsite\"][\"ninstitutioncode\"]=_this.props.Login.instItem[\"ninstitutioncode\"];;inputData[\"institutionsite\"][\"nregionalsitecode\"]=_this.state.selectedRecord[\"nsitecode\"]?_this.state.selectedRecord[\"nsitecode\"].value:-1;inputData[\"institutionsite\"][\"nregioncode\"]=_this.state.selectedRecord[\"nregioncode\"]?_this.state.selectedRecord[\"nregioncode\"].value:-1;inputData[\"institutionsite\"][\"ncountrycode\"]=_this.state.selectedRecord[\"ncountrycode\"]?_this.state.selectedRecord[\"ncountrycode\"].value:-1;inputData[\"institutionsite\"][\"ncitycode\"]=_this.state.selectedRecord[\"ncitycode\"]?_this.state.selectedRecord[\"ncitycode\"].value:-1;inputData[\"institutionsite\"][\"ndistrictcode\"]=_this.state.selectedRecord[\"ndistrictcode\"]?_this.state.selectedRecord[\"ndistrictcode\"].value:-1;_this.fieldInstitutionSiteList.map(function(item){return inputData[\"institutionsite\"][item]=_selectedRecord[item]!==null?_selectedRecord[item]:\"\";});dataState=_this.state.dataState;}else{postParam=undefined;//add               \n//inputData[\"institutionsite\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };  \ninputData[\"institutionsite\"]={};inputData[\"institutionsite\"][\"ninstitutioncode\"]=_this.props.Login.instItem[\"ninstitutioncode\"];;inputData[\"institutionsite\"][\"nregionalsitecode\"]=_this.state.selectedRecord[\"nsitecode\"]?_this.state.selectedRecord[\"nsitecode\"].value:-1;inputData[\"institutionsite\"][\"nregioncode\"]=_this.state.selectedRecord[\"nregioncode\"]?_this.state.selectedRecord[\"nregioncode\"].value:-1;inputData[\"institutionsite\"][\"ncountrycode\"]=_this.state.selectedRecord[\"ncountrycode\"]?_this.state.selectedRecord[\"ncountrycode\"].value:-1;inputData[\"institutionsite\"][\"ncitycode\"]=_this.state.selectedRecord[\"ncitycode\"]?_this.state.selectedRecord[\"ncitycode\"].value:-1;inputData[\"institutionsite\"][\"ndistrictcode\"]=_this.state.selectedRecord[\"ndistrictcode\"]?_this.state.selectedRecord[\"ndistrictcode\"].value:-1;_this.fieldInstitutionSiteList.map(function(item){return inputData[\"institutionsite\"][item]=_this.state.selectedRecord[item]!==undefined?_this.state.selectedRecord[item]:\"\";});}var _inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"InstitutionSite\",displayName:_this.props.Login.screenName,inputData:inputData,selectedId:_this.state.selectedRecord[\"ninstitutionsitecode\"],operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,dataState:dataState,searchRef:_this.searchRef,postParam:postParam};//this.setState({ FilterClientCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\nif(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var _updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:_inputParam,masterData:_this.props.Login.masterData},openChildModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.screenName}),operation:_this.props.Login.operation}};_this.props.updateStore(_updateInfo);}else{_this.props.crudMaster(_inputParam,_this.props.Login.masterData,\"openChildModal\");}}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_ENTERVALIDEMAIL\"}));}}else if(_this.props.Login.screenName===\"InstitutionFile\"){var _selectedRecord2=_this.state.selectedRecord;var acceptedFiles=_selectedRecord2.sfilename;var nattachmenttypecode=_selectedRecord2.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var institutionFileArray=[];var institutionFile={ninstitutioncode:_this.props.Login.masterData.selectedInstitution.ninstitutioncode,ninstitutionfilecode:_selectedRecord2.ninstitutionfilecode?_selectedRecord2.ninstitutionfilecode:0,nstatus:transactionStatus.ACTIVE,nattachmenttypecode:nattachmenttypecode};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},institutionFile);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=_selectedRecord2.ssystemfilename?_selectedRecord2.ssystemfilename.split('.'):\"\";var filesystemfileext=_selectedRecord2.ssystemfilename?file.name.split('.')[ssystemfilename.length-1]:\"\";var uniquefilename=nattachmenttypecode===attachmentType.FTP?_selectedRecord2.ntestfilecode&&_selectedRecord2.ntestfilecode>0&&_selectedRecord2.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=Lims_JSON_stringify(file.name,false);tempData[\"sfiledesc\"]=Lims_JSON_stringify(_selectedRecord2.sfiledesc?_selectedRecord2.sfiledesc.trim():\"\",false);tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);institutionFileArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{institutionFile[\"sfilename\"]=Lims_JSON_stringify(_selectedRecord2.sfilename,false);institutionFile[\"sfiledesc\"]=Lims_JSON_stringify(_selectedRecord2.sfiledesc?_selectedRecord2.sfiledesc.trim():\"\",false);institutionFile[\"nlinkcode\"]=transactionStatus.NA;institutionFile[\"ssystemfilename\"]=_selectedRecord2.ssystemfilename;institutionFile[\"nfilesize\"]=_selectedRecord2.nfilesize;institutionFileArray.push(institutionFile);}}else{institutionFile[\"sfilename\"]=Lims_JSON_stringify(_selectedRecord2.slinkfilename.trim(),false);institutionFile[\"sfiledesc\"]=Lims_JSON_stringify(_selectedRecord2.slinkdescription?_selectedRecord2.slinkdescription.trim():\"\",false);institutionFile[\"nlinkcode\"]=_selectedRecord2.nlinkcode.value?_selectedRecord2.nlinkcode.value:-1;institutionFile[\"ssystemfilename\"]=\"\";institutionFile[\"nfilesize\"]=0;institutionFileArray.push(institutionFile);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"institutionfile\",JSON.stringify(institutionFileArray));var selectedId=null;var _postParam=undefined;if(_this.props.Login.operation===\"update\"){_postParam={inputListName:\"Institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\"};selectedId=_selectedRecord2[\"ninstitutionfilecode\"];}var _inputParam2={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sformname:Lims_JSON_stringify(_this.props.Login.userInfo.sformname),smodulename:Lims_JSON_stringify(_this.props.Login.userInfo.smodulename)})},formData:formData,isFileupload:true,operation:_this.props.Login.operation,classUrl:\"institution\",saveType:saveType,formRef:formRef,methodUrl:\"InstitutionFile\",postParam:_postParam};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var _updateInfo2={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:_inputParam2,masterData:_this.props.Login.masterData},openChildModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.screenName}),operation:_this.props.Login.operation}};_this.props.updateStore(_updateInfo2);}else{_this.props.crudMaster(_inputParam2,_this.props.Login.masterData,\"openChildModal\");}}};_this.ConfirmDelete=function(deleteId){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.DeleteInstitution(\"delete\",deleteId);});};_this.DeleteInstitutionFile=function(deleteTestParam){var inputData=[];var ncontrolcode=deleteTestParam.ncontrolCode;var operation=deleteTestParam.operation;inputData[\"institutionfile\"]=deleteTestParam.selectedRecord;inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"institutionfile\",selectedObject:\"selectedInstitutionFile\",primaryKeyField:\"ninstitutionfilecode\",primaryKeyValue:deleteTestParam.selectedRecord.ninstitutionfilecode,fetchUrl:\"institution/getInstitutionFile\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"InstitutionFile\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,operation:\"delete\",postParam:postParam};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolcode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,screenName:\"Institution File\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}};_this.DeleteInstitutionSite=function(deleteParam){var inputData=[];var ncontrolcode=deleteParam.ncontrolCode;var operation=deleteParam.operation;delete deleteParam.selectedRecord.expanded;inputData[\"institutionsite\"]=deleteParam.selectedRecord;inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"institutionsite\",selectedObject:\"selectedInstitutionSite\",primaryKeyField:\"ninstitutionsitecode\",primaryKeyValue:deleteParam.selectedRecord.ninstitutionsitecode,fetchUrl:\"institution/getInstitutionSite\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"InstitutionSite\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,operation:\"delete\",postParam:postParam};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolcode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,screenName:\"Institution Site\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}};_this.DeleteInstitution=function(operation,ncontrolCode){var inputData=[];inputData[\"institution\"]=_this.props.Login.masterData.selectedInstitution;inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\",primaryKeyValue:_this.props.Login.masterData.selectedInstitution.ninstitutioncode,fetchUrl:\"institution/getSelectedInstitutionDetail\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"Institution\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,operation:\"delete\",postParam:postParam};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"Institution\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.viewInstitutionFile=function(filedata){var inputParam={inputData:{institutionfile:filedata,userinfo:_this.props.Login.userInfo},classUrl:\"institution\",operation:\"view\",methodUrl:\"InstitutionFile\",screenName:\"IDS_INSTITUTION\"};_this.props.viewAttachment(inputParam);};_this.onDropInstitutionFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"});};_this.validateEsign=function(){var modalName;var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};if(_this.props.Login.screenName===\"Institution\"){modalName=\"openModal\";}else{modalName=\"openChildModal\";}_this.props.validateEsignCredential(inputParam,modalName);};_this.formRef=React.createRef();_this.confirmMessage=new ConfirmMessage();_this.searchRef=React.createRef();_this.fieldInstitutionList=[];_this.fieldInstitutionSiteList=[];var _dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={dataState:_dataState,userRoleControlRights:[],controlMap:new Map(),selectedRecord:{}};return _this;}_createClass(Institution,[{key:\"render\",value:function render(){var _this2=this;var mandatoryFields=[];if(this.props.Login.screenName===\"Institution\"){mandatoryFields.push({mandatory:true,idsName:\"IDS_INSTITUTIONCATEGORY\",dataField:\"ninstitutioncatcode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_INSTITUTION\",dataField:\"sinstitutionname\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"},{mandatory:true,idsName:\"IDS_INSTITUTIONCODE\",dataField:\"sinstitutioncode\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"});}else if(this.props.Login.screenName===\"Institution Site\"){mandatoryFields.push({mandatory:true,idsName:\"IDS_INSTITUTIONSITE\",dataField:\"sinstitutionsitename\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"},{mandatory:true,idsName:\"IDS_REGIONNAME\",dataField:\"nregioncode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_DISTRICT\",dataField:\"ndistrictcode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_CITY\",dataField:\"ncitycode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_COUNTRY\",dataField:\"ncountrycode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_LIMSSITE\",dataField:\"nsitecode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"});}else{if(this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK){mandatoryFields.push({\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});}else{// if (this.props.operation !== 'update') {\nmandatoryFields.push({\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"});}}this.fieldInstitutionList=[\"sinstitutionname\",\"sinstitutioncode\",\"sdescription\"];this.fieldInstitutionSiteList=[\"sinstitutionsitename\",\"sinstitutionsiteaddress\",\"szipcode\",\"sstate\",\"stelephone\",\"sfaxno\",\"semail\",\"swebsite\"];var addId=this.state.controlMap.has(\"AddInstitution\")&&this.state.controlMap.get(\"AddInstitution\").ncontrolcode;var editId=this.state.controlMap.has(\"EditInstitution\")&&this.state.controlMap.get(\"EditInstitution\").ncontrolcode;var deleteId=this.state.controlMap.has(\"DeleteInstitution\")&&this.state.controlMap.get(\"DeleteInstitution\").ncontrolcode;var filterParam={inputListName:\"Institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\",fetchUrl:\"institution/getSelectedInstitutionDetail\",fecthInputObject:{userinfo:this.props.Login.userInfo,Institution:this.props.Login.masterData.selectedInstitution},masterData:this.props.Login.masterData,searchFieldList:[\"sinstitutioncatname\",\"sinstitutionname\",\"sdescription\"]};var selectedInstitution=this.props.Login.masterData.selectedInstitution;var breadCrumbData=this.state.filterData||[];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},breadCrumbData.length>0?/*#__PURE__*/React.createElement(Affix,{top:53},/*#__PURE__*/React.createElement(BreadcrumbComponent,{breadCrumbItem:breadCrumbData})):\"\",/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster,{formatMessage:this.props.intl.formatMessage,screenName:this.props.intl.formatMessage({id:\"IDS_INSTITUTION\"}),masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.Institution,getMasterDetail:function getMasterDetail(_Institution){return _this2.props.getInstitutionDetail(_Institution,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:this.props.Login.masterData.selectedInstitution,primaryKeyField:\"ninstitutioncode\",mainField:\"sinstitutionname\",firstField:\"sinstitutioncatname\",isIDSField:\"Yes\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData,hidePaging:true,openModal:function openModal(){return _this2.props.getInstitutionCombo(_this2.props.intl.formatMessage({id:\"IDS_INSTITUTION\"}),\"create\",\"ninstitutioncode\",_this2.props.Login.masterData,_this2.props.Login.userInfo,addId);},openFilter:this.openFilter,closeFilter:this.closeFilter,onFilterSubmit:this.onFilterSubmit,showFilterIcon:true,showFilter:this.props.Login.showFilter,filterComponent:[{\"IDS_INSTITUTIONCATEGORYFILTER\":/*#__PURE__*/React.createElement(InstitutionCategoryFilter,{FilterInstitutionCategory:this.state.FilterInstitutionCategory||[],nfilterInstitutionCategory:this.props.Login.masterData.defaultInstitutionCategory||{},selectedFilterRecord:this.state.selectedFilterRecord||{},onFilterComboChange:this.onComboChangeFilter})}]})),/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},this.props.Login.masterData.selectedInstitution?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(ReactTooltip,{place:\"bottom\",globalEventOff:\"click\",id:\"tooltip_list_wrap\"}),/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},this.props.Login.masterData.selectedInstitution.sinstitutionname),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"editInstitution\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_EDIT\"}),\"data-for\":\"tooltip_list_wrap\",hidden:this.state.userRoleControlRights.indexOf(editId)===-1,className:\"btn btn-circle outline-grey mr-2\",onClick:function onClick(e){return _this2.props.getInstitutionCombo(_this2.props.intl.formatMessage({id:\"IDS_INSTITUTION\"}),\"update\",\"ninstitutioncode\",_this2.props.Login.masterData,_this2.props.Login.userInfo,editId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"deleteInstitution\",className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"}),\"data-for\":\"tooltip_list_wrap\",hidden:this.state.userRoleControlRights.indexOf(deleteId)===-1,onClick:function onClick(){return _this2.ConfirmDelete(deleteId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt})))))),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_INSTITUTIONCODE\",messasge:\"Institution\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.selectedInstitution.sinstitutioncode))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_DESCRIPTION\",messasge:\"Description\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.selectedInstitution.sdescription)))),selectedInstitution&&/*#__PURE__*/React.createElement(CustomTab,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange}))):\"\"))))))),(this.props.Login.openModal||this.props.Login.openChildModal)&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal||this.props.Login.openChildModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,mandatoryFields:mandatoryFields,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.screenName===this.props.intl.formatMessage({id:\"IDS_INSTITUTION\"})?/*#__PURE__*/React.createElement(AddInstitution,{onNumericInputOnChange:this.onNumericInputOnChange,selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,InstitutionCategory:this.props.Login.InstitutionCategory,operation:this.props.Login.operation,inputParam:this.props.inputParam,userInfo:this.props.Login.userInfo}):this.props.Login.screenName===this.props.intl.formatMessage({id:\"IDS_INSTITUTIONSITE\"})?/*#__PURE__*/React.createElement(AddInstitutionSite,{selectedRecord:this.state.selectedRecord||{},Site:this.props.Login.Site,Region:this.props.Login.Region,Country:this.props.Login.Country,onComboChange:this.onComboChange,onInputOnChange:this.onInputOnChange,operation:this.props.Login.operation,inputParam:this.props.inputParam,userInfo:this.props.Login.userInfo,districtList:this.props.Login.districtList,cityList:this.props.Login.cityList}):this.props.Login.screenName===this.props.intl.formatMessage({id:\"IDS_INSTITUTIONFILE\"})?/*#__PURE__*/React.createElement(AddInstitutionFile,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onDrop:this.onDropInstitutionFile,label:this.props.intl.formatMessage({id:\"IDS_FILENAME\"}),deleteAttachment:this.deleteAttachment,linkMaster:this.props.Login.linkMaster,maxSize:20,maxFiles:1}):\"\"}));}},{key:\"generateBreadCrumData\",value:function generateBreadCrumData(){var breadCrumbData=[];if(this.props.Login.masterData&&this.props.Login.masterData.FilterInstitutionCategory){breadCrumbData.push({\"label\":\"IDS_INSTITUTIONCATEGORY\",\"value\":this.props.Login.masterData.defaultInstitutionCategory?this.props.Login.masterData.defaultInstitutionCategory.sinstitutioncatname:\"-\"});}return breadCrumbData;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var selectedRecord=this.state.selectedRecord||{};if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){selectedRecord=this.props.Login.selectedRecord;this.setState({selectedRecord:selectedRecord});}if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData});}else{var dataState=this.state.dataState;if(this.props.Login.dataState===undefined){dataState={skip:0,take:this.props.Login.settings?parseInt(this.props.Login.settings[14]):5};}this.setState({data:this.props.Login.masterData,dataState:dataState,selectedRecord:this.props.Login.selectedRecord});}///     let FilterInstitutionCategory = this.state.FilterInstitutionCategory || {};\n//   if (this.props.Login.masterData.FilterInstitutionCategory !== previousProps.Login.masterData.FilterInstitutionCategory) {\nvar InstitutionCategoryMap=constructOptionList(this.props.Login.masterData.FilterInstitutionCategory||[],\"ninstitutioncatcode\",\"sinstitutioncatname\",'ninstitutioncatcode','descending',false);var FilterInstitutionCategory=InstitutionCategoryMap.get(\"OptionList\");//  } \nvar filterData=this.generateBreadCrumData();var selectedFilterRecord={\"ninstitutioncatcode\":{\"label\":this.props.Login.masterData.defaultInstitutionCategory?this.props.Login.masterData.defaultInstitutionCategory.sinstitutioncatname:-1,\"value\":this.props.Login.masterData.defaultInstitutionCategory?this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode:'-',\"item\":this.props.Login.masterData.defaultInstitutionCategory?this.props.Login.masterData.defaultInstitutionCategory:{}}};this.setState({FilterInstitutionCategory:FilterInstitutionCategory,filterData:filterData,selectedFilterRecord:selectedFilterRecord});// if(this.props.Login.comboSet){\n//     const updateInfo = {\n//         typeName: DEFAULT_RETURN,\n//         data: { comboSet: false }\n//     }\n//     this.props.updateStore(updateInfo);\n// }\n}// if (this.props.Login.masterData !== previousProps.Login.masterData) {\n//     this.setState({ filterData });\n// }\n}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==\"\"&&props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return Institution;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,updateStore:updateStore,getInstitutionDetail:getInstitutionDetail,getInstitutionCombo:getInstitutionCombo,getInstitutionSiteData:getInstitutionSiteData,addInstitutionFile:addInstitutionFile,changeInstitutionCategoryFilter:changeInstitutionCategoryFilter,viewAttachment:viewAttachment,filterColumnData:filterColumnData,getCitComboServices:getCitComboServices,getDistComboServices:getDistComboServices})(injectIntl(Institution));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/submitter/institution/Institution.jsx"],"names":["React","connect","FormattedMessage","injectIntl","callService","crudMaster","validateEsignCredential","updateStore","getInstitutionDetail","getInstitutionCombo","getInstitutionSiteData","addInstitutionFile","changeInstitutionCategoryFilter","viewAttachment","filterColumnData","getCitComboServices","getDistComboServices","BreadcrumbComponent","Affix","constructOptionList","getControlMap","showEsign","onDropAttachFileList","deleteAttachmentDropZone","create_UUID","validatePhoneNumber","validateEmail","Lims_JSON_stringify","Row","Col","Card","FormGroup","FormLabel","Nav","ContentPanel","ListMaster","ReactTooltip","InstitutionCategoryFilter","ReadOnlyText","CustomTab","InstitutionSiteTab","InstitutionFileTab","DEFAULT_RETURN","FontAwesomeIcon","faPencilAlt","faTrashAlt","SlideOutModal","Esign","AddInstitution","AddInstitutionSite","AddInstitutionFile","ConfirmMessage","toast","attachmentType","transactionStatus","mapStateToProps","state","Login","Institution","props","tabDetail","tabMap","Map","editSiteId","controlMap","has","get","ncontrolcode","deleteSiteId","deleteFileId","deleteParam","operation","deleteTestParam","editParam","screenName","intl","formatMessage","id","primaryKeyField","userInfo","inputParam","instItem","masterData","selectedInstitution","instItemSite","selectedInstitutionSite","set","selectedId","userRoleControlRights","InstitutionSite","selectedRecord","dataState","DeleteInstitutionSite","settings","errorCode","InstitutionFile","DeleteInstitutionFile","viewInstitutionFile","openFilter","showFilter","updateInfo","typeName","data","closeFilter","onFilterSubmit","defaultInstitutionCategory","inputData","ninstitutioncatcode","selectedFilterRecord","value","userinfo","classUrl","methodUrl","FilterInstitutionCategory","warn","reloadData","searchRef","current","SelectedInstitutionCategory","displayName","closeModal","loadEsign","openModal","openChildModal","cityList","districtList","onTabChange","tabProps","onNumericInputOnChange","name","setState","onInputOnChange","event","optional","target","type","checked","onComboChangeFilter","comboData","fieldName","onComboChange","item","sdisplayname","nregioncode","label","primarykey","ndistrictcode","onSaveClick","saveType","formRef","postParam","undefined","inputListName","selectedObject","fieldInstitutionList","map","nmastersitecode","filtercombochange","searchedData","nformcode","ncontrolCode","screenData","isValidateEmail","fieldInstitutionSiteList","info","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","NO","institutionFileArray","institutionFile","ninstitutioncode","ninstitutionfilecode","nstatus","ACTIVE","formData","FormData","FTP","Array","isArray","length","forEach","file","index","tempData","Object","assign","splittedFileName","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","ntestfilecode","sfiledesc","trim","NA","size","append","push","YES","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","sformname","smodulename","isFileupload","ConfirmDelete","deleteId","confirmMessage","confirm","DeleteInstitution","primaryKeyValue","fetchUrl","fecthInputObject","expanded","ninstitutionsitecode","filedata","institutionfile","onDropInstitutionFile","attachedFiles","maxSize","actionType","deleteAttachment","validateEsign","modalName","sreason","nreasoncode","spredefinedreason","password","createRef","skip","take","parseInt","mandatoryFields","mandatory","idsName","dataField","mandatoryLabel","controlType","LINK","addId","editId","filterParam","searchFieldList","breadCrumbData","filterData","sinstitutionname","indexOf","e","sinstitutioncode","sdescription","masterStatus","InstitutionCategory","Site","Region","Country","linkMaster","sinstitutioncatname","previousProps","values","InstitutionCategoryMap","generateBreadCrumData","error","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage, injectIntl } from \"react-intl\";\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, getInstitutionDetail, getInstitutionCombo,\r\n    getInstitutionSiteData, addInstitutionFile, changeInstitutionCategoryFilter, viewAttachment, filterColumnData, getCitComboServices, getDistComboServices\r\n} from \"../../../actions\";\r\nimport BreadcrumbComponent from \"../../../components/Breadcrumb.Component\";\r\nimport { Affix } from 'rsuite';\r\nimport { constructOptionList, getControlMap, showEsign, onDropAttachFileList, deleteAttachmentDropZone, create_UUID, validatePhoneNumber, validateEmail, Lims_JSON_stringify } from '../../../components/CommonScript';\r\nimport { Row, Col, Card, FormGroup, FormLabel, Nav } from \"react-bootstrap\";\r\nimport { ContentPanel } from '../../product/product.styled';\r\nimport ListMaster from \"../../../components/list-master/list-master.component\";\r\nimport ReactTooltip from 'react-tooltip';\r\nimport InstitutionCategoryFilter from \"./InstitutionCategoryFilter\";\r\nimport { ReadOnlyText } from '../../../components/App.styles';\r\nimport CustomTab from \"../../../components/custom-tabs/custom-tabs.component\";\r\nimport InstitutionSiteTab from \"./InstitutionSiteTab\";\r\nimport InstitutionFileTab from \"./InstitutionFileTab\";\r\nimport { DEFAULT_RETURN } from \"../../../actions/LoginTypes\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPencilAlt, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport SlideOutModal from \"../../../components/slide-out-modal/SlideOutModal\";\r\nimport Esign from \"../../audittrail/Esign\";\r\nimport AddInstitution from \"./AddInstitution\";\r\nimport AddInstitutionSite from \"./AddInstitutionSite\";\r\nimport AddInstitutionFile from \"./AddInstitutionFile\";\r\nimport ConfirmMessage from '../../../components/confirm-alert/confirm-message.component';\r\nimport { toast } from 'react-toastify';\r\nimport { attachmentType, transactionStatus } from \"../../../components/Enumeration\";\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\nclass Institution extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.formRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n        this.searchRef = React.createRef();\r\n        this.fieldInstitutionList = [];\r\n        this.fieldInstitutionSiteList = [];\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            selectedRecord: {},\r\n        }\r\n\r\n    }\r\n    render() {\r\n        let mandatoryFields = [];\r\n        if (this.props.Login.screenName === \"Institution\") {\r\n            mandatoryFields.push(\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_INSTITUTIONCATEGORY\",\r\n                    dataField: \"ninstitutioncatcode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                },\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_INSTITUTION\",\r\n                    dataField: \"sinstitutionname\",\r\n                    mandatoryLabel: \"IDS_ENTER\",\r\n                    controlType: \"textbox\",\r\n                },\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_INSTITUTIONCODE\",\r\n                    dataField: \"sinstitutioncode\",\r\n                    mandatoryLabel: \"IDS_ENTER\",\r\n                    controlType: \"textbox\",\r\n                },\r\n\r\n            );\r\n\r\n\r\n\r\n        } else if (this.props.Login.screenName === \"Institution Site\") {\r\n            mandatoryFields.push(\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_INSTITUTIONSITE\",\r\n                    dataField: \"sinstitutionsitename\",\r\n                    mandatoryLabel: \"IDS_ENTER\",\r\n                    controlType: \"textbox\",\r\n                },\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_REGIONNAME\",\r\n                    dataField: \"nregioncode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                },\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_DISTRICT\",\r\n                    dataField: \"ndistrictcode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                },\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_CITY\",\r\n                    dataField: \"ncitycode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                },\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_COUNTRY\",\r\n                    dataField: \"ncountrycode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                },\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_LIMSSITE\",\r\n                    dataField: \"nsitecode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                }\r\n            );\r\n        }\r\n        else {\r\n            if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n                mandatoryFields.push(\r\n                    { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                    { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n                );\r\n            } else {\r\n                // if (this.props.operation !== 'update') {\r\n                mandatoryFields.push(\r\n                    { \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" }\r\n                )\r\n            }\r\n        }\r\n\r\n\r\n        this.fieldInstitutionList = [\"sinstitutionname\", \"sinstitutioncode\", \"sdescription\"];\r\n        this.fieldInstitutionSiteList = [\"sinstitutionsitename\", \"sinstitutionsiteaddress\", \"szipcode\", \"sstate\", \"stelephone\", \"sfaxno\", \"semail\", \"swebsite\"];\r\n\r\n\r\n\r\n        const addId = this.state.controlMap.has(\"AddInstitution\") && this.state.controlMap.get(\"AddInstitution\").ncontrolcode;\r\n        const editId = this.state.controlMap.has(\"EditInstitution\") && this.state.controlMap.get(\"EditInstitution\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"DeleteInstitution\") && this.state.controlMap.get(\"DeleteInstitution\").ncontrolcode;\r\n\r\n        const filterParam = {\r\n            inputListName: \"Institution\", selectedObject: \"selectedInstitution\", primaryKeyField: \"ninstitutioncode\",\r\n            fetchUrl: \"institution/getSelectedInstitutionDetail\", fecthInputObject: { userinfo: this.props.Login.userInfo, Institution: this.props.Login.masterData.selectedInstitution },\r\n            masterData: this.props.Login.masterData,\r\n            searchFieldList: [\"sinstitutioncatname\", \"sinstitutionname\", \"sdescription\"]\r\n        };\r\n\r\n        const { selectedInstitution } = this.props.Login.masterData;\r\n        const breadCrumbData = this.state.filterData || [];\r\n        return (\r\n            <>\r\n                <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n                    {breadCrumbData.length > 0 ?\r\n                        <Affix top={53}>\r\n                            <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n                        </Affix> : \"\"\r\n                    }\r\n                    <Row noGutters={true}>\r\n                        <Col md={4}>\r\n                            <ListMaster\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                screenName={this.props.intl.formatMessage({ id: \"IDS_INSTITUTION\" })}\r\n                                masterData={this.props.Login.masterData}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.Institution}\r\n                                getMasterDetail={(Institution) => this.props.getInstitutionDetail(Institution, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                                selectedMaster={this.props.Login.masterData.selectedInstitution}\r\n                                primaryKeyField=\"ninstitutioncode\"\r\n                                mainField=\"sinstitutionname\"\r\n                                firstField=\"sinstitutioncatname\"\r\n                                isIDSField=\"Yes\"\r\n                                filterColumnData={this.props.filterColumnData}\r\n                                filterParam={filterParam}\r\n                                userRoleControlRights={this.state.userRoleControlRights}\r\n                                addId={addId}\r\n                                searchRef={this.searchRef}\r\n                                reloadData={this.reloadData}\r\n                                hidePaging={true}\r\n                                openModal={() =>\r\n                                    this.props.getInstitutionCombo(\r\n                                        this.props.intl.formatMessage({ id: \"IDS_INSTITUTION\" }),\r\n                                        \"create\",\r\n                                        \"ninstitutioncode\",\r\n                                        this.props.Login.masterData,\r\n                                        this.props.Login.userInfo,\r\n                                        addId\r\n                                    )\r\n                                }\r\n                                openFilter={this.openFilter}\r\n                                closeFilter={this.closeFilter}\r\n                                onFilterSubmit={this.onFilterSubmit}\r\n                                showFilterIcon={true}\r\n                                showFilter={this.props.Login.showFilter}\r\n                                filterComponent={[\r\n                                    {\r\n                                        \"IDS_INSTITUTIONCATEGORYFILTER\":\r\n                                            <InstitutionCategoryFilter\r\n                                                FilterInstitutionCategory={this.state.FilterInstitutionCategory || []}\r\n                                                nfilterInstitutionCategory={this.props.Login.masterData.defaultInstitutionCategory || {}}\r\n                                                selectedFilterRecord={this.state.selectedFilterRecord || {}}\r\n                                                onFilterComboChange={this.onComboChangeFilter}\r\n                                            />\r\n                                    }\r\n                                ]}\r\n                            />\r\n                        </Col>\r\n                        <Col md={8}>\r\n                            <Row>\r\n                                <Col md={12}>\r\n                                    <ContentPanel className=\"panel-main-content\">\r\n                                        <Card className=\"border-0\">\r\n                                            {this.props.Login.masterData.selectedInstitution ? (\r\n                                                <>\r\n                                                    <Card.Header>\r\n                                                        <ReactTooltip\r\n                                                            place=\"bottom\"\r\n                                                            globalEventOff=\"click\"\r\n                                                            id=\"tooltip_list_wrap\"\r\n                                                        />\r\n                                                        <Card.Title className=\"product-title-main\">\r\n                                                            {this.props.Login.masterData.selectedInstitution.sinstitutionname}\r\n                                                        </Card.Title>\r\n                                                        <Card.Subtitle>\r\n                                                            <div className=\"d-flex product-category\">\r\n                                                                <h2 className=\"product-title-sub flex-grow-1\"></h2>\r\n                                                                <div className=\"d-inline\">\r\n                                                                    <Nav.Link\r\n                                                                        name=\"editInstitution\"\r\n                                                                        data-tip={this.props.intl.formatMessage({ id: \"IDS_EDIT\", })}\r\n                                                                        data-for=\"tooltip_list_wrap\" hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                                        className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                        onClick={(e) => this.props.getInstitutionCombo(this.props.intl.formatMessage({ id: \"IDS_INSTITUTION\" }), \"update\", \"ninstitutioncode\", this.props.Login.masterData, this.props.Login.userInfo, editId)}\r\n\r\n                                                                    >\r\n                                                                        <FontAwesomeIcon icon={faPencilAlt} />\r\n                                                                    </Nav.Link>\r\n                                                                    <Nav.Link\r\n                                                                        name=\"deleteInstitution\"\r\n                                                                        className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                                                        data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\", })}\r\n                                                                        data-for=\"tooltip_list_wrap\" hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                                        onClick={() => this.ConfirmDelete(deleteId)}\r\n                                                                    >\r\n                                                                        <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                                    </Nav.Link>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </Card.Subtitle>\r\n                                                    </Card.Header>\r\n                                                    <Card.Body>\r\n                                                        <Row>\r\n                                                            {/* <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_INSTITUTION\" messasge=\"Institution\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sinstitutionname}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col> */}\r\n                                                            {/* <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_INSTITUTIONCATEGORY\" messasge=\"Institution Category\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sinstitutioncatname}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col> */}\r\n                                                            <Col md={4}>\r\n                                                                <FormGroup>\r\n                                                                    <FormLabel>\r\n                                                                        <FormattedMessage id=\"IDS_INSTITUTIONCODE\" messasge=\"Institution\" />\r\n                                                                    </FormLabel>\r\n                                                                    <ReadOnlyText>\r\n                                                                        {this.props.Login.masterData.selectedInstitution.sinstitutioncode}\r\n                                                                    </ReadOnlyText>\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n                                                            <Col md={4}>\r\n                                                                <FormGroup>\r\n                                                                    <FormLabel>\r\n                                                                        <FormattedMessage id=\"IDS_DESCRIPTION\" messasge=\"Description\" />\r\n                                                                    </FormLabel>\r\n                                                                    <ReadOnlyText>\r\n                                                                        {this.props.Login.masterData.selectedInstitution.sdescription}\r\n                                                                    </ReadOnlyText>\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                        {selectedInstitution && (\r\n                                                            <CustomTab\r\n                                                                tabDetail={this.tabDetail()}\r\n                                                                onTabChange={this.onTabChange}\r\n                                                            />\r\n                                                        )}\r\n                                                    </Card.Body>\r\n                                                </>\r\n                                            ) : (\r\n                                                \"\"\r\n                                            )}\r\n                                        </Card>\r\n                                    </ContentPanel>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n                {(this.props.Login.openModal || this.props.Login.openChildModal) && (\r\n                    <SlideOutModal\r\n                        show={(this.props.Login.openModal || this.props.Login.openChildModal)}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        mandatoryFields={mandatoryFields}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        addComponent={\r\n                            this.props.Login.loadEsign ? (\r\n                                <Esign\r\n                                    operation={this.props.Login.operation}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                />\r\n                            ) : this.props.Login.screenName === this.props.intl.formatMessage({\r\n                                id: \"IDS_INSTITUTION\"}) ? (\r\n                                <AddInstitution\r\n                                    onNumericInputOnChange={this.onNumericInputOnChange}\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onComboChange={this.onComboChange}\r\n                                    InstitutionCategory={this.props.Login.InstitutionCategory}\r\n                                    operation={this.props.Login.operation}\r\n                                    inputParam={this.props.inputParam}\r\n                                    userInfo={this.props.Login.userInfo}\r\n\r\n                                />\r\n                            ) : this.props.Login.screenName === this.props.intl.formatMessage({\r\n                                id: \"IDS_INSTITUTIONSITE\"}) ? (\r\n                                <AddInstitutionSite\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    Site={this.props.Login.Site}\r\n                                    Region={this.props.Login.Region}\r\n                                    Country={this.props.Login.Country}\r\n                                    onComboChange={this.onComboChange}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    operation={this.props.Login.operation}\r\n                                    inputParam={this.props.inputParam}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    districtList={this.props.Login.districtList}\r\n                                    cityList={this.props.Login.cityList}\r\n\r\n                                />\r\n                            ) : this.props.Login.screenName === this.props.intl.formatMessage({\r\n                                id: \"IDS_INSTITUTIONFILE\"}) ? (\r\n                                <AddInstitutionFile\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onDrop={this.onDropInstitutionFile}\r\n                                    label={this.props.intl.formatMessage({ id: \"IDS_FILENAME\" })}\r\n                                    deleteAttachment={this.deleteAttachment}\r\n                                    linkMaster={this.props.Login.linkMaster}\r\n                                    maxSize={20}\r\n                                    maxFiles={1}\r\n                                />\r\n                            ) : (\r\n                                \"\"\r\n                            )\r\n                        }\r\n                    />\r\n                )}\r\n            </>\r\n        )\r\n\r\n    }\r\n\r\n    tabDetail = () => {\r\n        const tabMap = new Map();\r\n\r\n        const editSiteId = this.state.controlMap.has(\"EditInstitutionSite\") && this.state.controlMap.get(\"EditInstitutionSite\").ncontrolcode;\r\n        const deleteSiteId = this.state.controlMap.has(\"DeleteInstitutionSite\") && this.state.controlMap.get(\"DeleteInstitutionSite\").ncontrolcode;\r\n        const deleteFileId = this.state.controlMap.has(\"DeleteInstitutionFile\") && this.state.controlMap.get(\"DeleteInstitutionFile\").ncontrolcode;\r\n        const deleteParam = { operation: \"delete\", deleteSiteId };\r\n        const deleteTestParam = { operation: \"delete\", deleteFileId };\r\n        const editParam = {\r\n            screenName: this.props.intl.formatMessage({\r\n                id: \"IDS_INSTITUTIONSITE\"\r\n              }), operation: \"update\", primaryKeyField: \"ninstitutionsitecode\",\r\n            userInfo: this.props.Login.userInfo, inputParam: this.props.Login.inputParam, ncontrolcode: editSiteId,\r\n            instItem: this.props.Login.masterData.selectedInstitution, instItemSite: this.props.Login.masterData.selectedInstitutionSite\r\n        }\r\n\r\n        tabMap.set(\"IDS_INSTITUTIONSITE\",\r\n            <InstitutionSiteTab\r\n                selectedId={this.props.Login.selectedId}\r\n                controlMap={this.state.controlMap}\r\n                userRoleControlRights={this.state.userRoleControlRights}\r\n                selectedInstitution={this.props.Login.masterData.selectedInstitution}\r\n                InstitutionSite={this.props.Login.masterData.InstitutionSite}\r\n                masterData={this.props.Login.masterData}\r\n                userInfo={this.props.Login.userInfo}\r\n                getInstitutionSiteData={this.props.getInstitutionSiteData}\r\n                inputParam={this.props.Login.inputParam}\r\n                selectedRecord={this.state.selectedRecord}\r\n                dataState={this.props.Login.dataState}\r\n                deleteRecord={this.DeleteInstitutionSite}\r\n                deleteParam={deleteParam}\r\n                fetchRecord={this.props.getInstitutionSiteData}\r\n                editParam={editParam}\r\n                InstitutionSiteData={this.props.Login.masterData.InstitutionSite || []}\r\n                screenName=\"Institution Site\"\r\n                settings={this.props.Login.settings}\r\n                errorCode={this.props.Login.errorCode}\r\n            />);\r\n\r\n\r\n\r\n\r\n\r\n        tabMap.set(\"IDS_INSTITUTIONFILE\",\r\n            <InstitutionFileTab\r\n                controlMap={this.state.controlMap}\r\n                userRoleControlRights={this.state.userRoleControlRights}\r\n                userInfo={this.props.Login.userInfo}\r\n                inputParam={this.props.Login.inputParam}\r\n                InstitutionFile={this.props.Login.masterData.InstitutionFile || []}\r\n                settings={this.props.Login.settings}\r\n                addInstitutionFile={this.props.addInstitutionFile}\r\n                deleteRecord={this.DeleteInstitutionFile}\r\n                deleteParam={deleteTestParam}\r\n                //editParam={editTestParam}\r\n                viewInstitutionFile={this.viewInstitutionFile}\r\n                screenName={this.props.intl.formatMessage({\r\n                    id: \"IDS_INSTITUTIONFILE\"\r\n                  })}\r\n            />);\r\n\r\n        return tabMap;\r\n    }\r\n\r\n    openFilter = () => {\r\n        let showFilter = !this.props.Login.showFilter\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeFilter = () => {\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onFilterSubmit = () => {\r\n        if (this.props.Login.masterData.defaultInstitutionCategory) {\r\n            let inputParam = {\r\n                inputData: {\r\n                    ninstitutioncatcode: this.state.selectedFilterRecord.ninstitutioncatcode.value,\r\n                    userinfo: this.props.Login.userInfo,\r\n\r\n                },\r\n                classUrl: \"institution\",\r\n                methodUrl: \"InstitutionByCategory\"\r\n            }\r\n            this.props.changeInstitutionCategoryFilter(inputParam, this.props.Login.masterData.FilterInstitutionCategory, this.state.selectedFilterRecord);\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_INSTITUTIONCATEGORYNOTAVAILABLE\" }));\r\n        }\r\n    }\r\n\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n\r\n        const inputParam = {\r\n            inputData: {\r\n                \"ninstitutioncatcode\": this.props.Login.masterData.SelectedInstitutionCategory.ninstitutioncatcode,\r\n                \"userinfo\": this.props.Login.userInfo\r\n            },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"InstitutionByCategory\",\r\n            displayName: this.props.intl.formatMessage({ id: \"IDS_INSTITUTION\" }),\r\n        };\r\n        this.props.changeInstitutionCategoryFilter(inputParam, this.props.Login.masterData.FilterInstitutionCategory, this.props.Login.masterData.SelectedInstitutionCategory);\r\n\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== \"\" && props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let openChildModal = this.props.Login.openChildModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let selectedId = this.props.Login.selectedId;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                openChildModal = false;\r\n                selectedRecord = [];\r\n            } else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\";\r\n                selectedRecord['esigncomments'] = \"\";\r\n                selectedRecord['esignreason'] = \"\";\r\n                selectedRecord = selectedRecord;\r\n            }\r\n        } else {\r\n            openModal = false;\r\n            openChildModal = false;\r\n            selectedRecord = [];\r\n            this.props.Login.cityList = [];\r\n            this.props.Login.districtList = [];\r\n            selectedId = null;\r\n            //this.setState({ selectedRecord });\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, loadEsign, selectedRecord, selectedId, openChildModal },\r\n        };\r\n        this.props.updateStore(updateInfo);\r\n    };\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName },\r\n        };\r\n        this.props.updateStore(updateInfo);\r\n    };\r\n    onNumericInputOnChange = (value, name) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    };\r\n\r\n    onInputOnChange = (event, optional) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === \"checkbox\") {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n        } else if (event.target.type === \"radio\") {\r\n            selectedRecord[event.target.name] = optional;\r\n        } else {\r\n            if (event.target.name === \"sfaxno\" || event.target.name === \"stelephone\") {\r\n                if (event.target.value !== \"\") {\r\n                    event.target.value = validatePhoneNumber(event.target.value);\r\n                    selectedRecord[event.target.name] = event.target.value !== \"\" ? event.target.value : selectedRecord[event.target.name];\r\n                } else {\r\n                    selectedRecord[event.target.name] = event.target.value;\r\n                }\r\n            } else {\r\n                selectedRecord[event.target.name] = event.target.value;\r\n            }\r\n\r\n        }\r\n        this.setState({ selectedRecord });\r\n    };\r\n\r\n    onComboChangeFilter = (comboData, fieldName) => {\r\n        const selectedFilterRecord = this.state.selectedFilterRecord || [];\r\n        if (comboData) {\r\n            if (fieldName === \"ninstitutioncatcode\") {\r\n                //    if(comboData.value !== this.props.Login.masterData.defaultInstitutionCategory. ninstitutioncatcode) {\r\n                //         let masterData = { ...this.props.Login.masterData, defaultInstitutionCategory: comboData.item}\r\n                //         const updateInfo = { \r\n                //             typeName: DEFAULT_RETURN,\r\n                //             data: { masterData }\r\n                //         }\r\n                //         this.props.updateStore(updateInfo);\r\n                //     }  \r\n\r\n                selectedFilterRecord[fieldName] = comboData;\r\n            }\r\n            this.setState({ selectedFilterRecord });\r\n        }\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (comboData != null) {\r\n            if (fieldName === \"ninstitutioncatcode\") {\r\n                selectedRecord[fieldName] = comboData;\r\n                this.setState({ selectedRecord });\r\n            } else if (fieldName === \"nsitecode\") {\r\n                selectedRecord[\"nsitecode\"] = comboData;\r\n                selectedRecord[\"ssitecode\"] = comboData.item[\"ssitecode\"];\r\n                this.setState({ selectedRecord });\r\n            } else if (fieldName === \"nregioncode\") {\r\n                selectedRecord[\"nregioncode\"] = comboData;\r\n                selectedRecord[\"sregioncode\"] = comboData.item[\"sregioncode\"];\r\n                this.props.getDistComboServices({\r\n                    inputData: {\r\n                        userinfo: this.props.Login.userInfo,\r\n                        sdisplayname: selectedRecord.nregioncode.label,\r\n                        primarykey: selectedRecord.nregioncode.value,\r\n                    }\r\n                });\r\n                selectedRecord[\"ndistrictcode\"] = \"\";\r\n                selectedRecord[\"sdistrictcode\"] = \"\";\r\n                selectedRecord[\"ncitycode\"] = \"\";\r\n                selectedRecord[\"scitycode\"] = \"\";\r\n                this.setState({ selectedRecord });\r\n            } else if (fieldName === \"ncountrycode\") {\r\n                selectedRecord[\"ncountrycode\"] = comboData;\r\n                this.setState({ selectedRecord });\r\n            } else if (fieldName === \"ndistrictcode\") {\r\n                selectedRecord[\"ndistrictcode\"] = comboData;\r\n                selectedRecord[\"sdistrictcode\"] = comboData.item[\"sdistrictcode\"];\r\n                this.props.getCitComboServices({\r\n                    inputData: {\r\n                        userinfo: this.props.Login.userInfo,\r\n                        sdisplayname: selectedRecord.ndistrictcode.label,\r\n                        primarykey: selectedRecord.ndistrictcode.value,\r\n                    }\r\n                });\r\n                selectedRecord[\"ncitycode\"] = \"\";\r\n                selectedRecord[\"scitycode\"] = \"\";\r\n                this.setState({ selectedRecord });\r\n            } else if (fieldName === \"ncitycode\") {\r\n                selectedRecord[\"ncitycode\"] = comboData;\r\n                selectedRecord[\"scitycode\"] = comboData.item[\"scitycode\"];\r\n                this.setState({ selectedRecord });\r\n            }\r\n        }\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        let postParam = undefined;\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        let dataState = undefined;\r\n\r\n        if (this.props.Login.screenName === \"Institution\") {\r\n            if (this.props.Login.operation === \"update\") {  // edit\r\n                const selectedRecord = this.state.selectedRecord;\r\n                postParam = {\r\n                    inputListName: \"Institution\",\r\n                    selectedObject: \"selectedInstitution\",\r\n                    primaryKeyField: \"ninstitutioncode\",\r\n                };\r\n                inputData[\"institution\"] = {};\r\n\r\n                this.fieldInstitutionList.map(item => {\r\n                    return inputData[\"institution\"][item] = selectedRecord[item] !== null ? selectedRecord[item] : \"\";\r\n                })\r\n                inputData[\"institution\"][\"ninstitutioncode\"] = selectedRecord[\"ninstitutioncode\"] ? selectedRecord[\"ninstitutioncode\"] : -1;\r\n                inputData[\"institution\"][\"ninstitutioncatcode\"] = this.state.selectedRecord ? this.state.selectedRecord.ninstitutioncatcode.value : -1;\r\n                dataState = this.state.dataState;\r\n            } else {\r\n                //add               \r\n                inputData[\"institution\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n\r\n\r\n                this.fieldInstitutionList.map(item => {\r\n                    return inputData[\"institution\"][item] = this.state.selectedRecord[item] !== undefined ? this.state.selectedRecord[item] : \"\";\r\n                })\r\n                inputData[\"institution\"][\"ninstitutioncatcode\"] = this.state.selectedRecord ? this.state.selectedRecord.ninstitutioncatcode.value : -1;\r\n            }\r\n\r\n            const inputParam = {\r\n                classUrl: this.props.Login.inputParam.classUrl,\r\n                methodUrl: \"Institution\",\r\n                displayName: this.props.Login.screenName,\r\n                inputData: inputData,\r\n                selectedId: this.state.selectedRecord[\"ninstututioncode\"],\r\n                operation: this.props.Login.operation, saveType, formRef, dataState,\r\n                searchRef: this.searchRef,\r\n                postParam: postParam,\r\n                filtercombochange: this.props.Login.masterData.searchedData !== undefined ?\r\n                    this.state.selectedRecord.ninstitutioncatcode.value ===\r\n                        this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode ? false : true : false\r\n            }\r\n\r\n            let masterData = {\r\n                ...this.props.Login.masterData\r\n            };\r\n\r\n            if (this.state.selectedRecord.ninstitutioncatcode.value !==\r\n                this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode) {\r\n                masterData = {\r\n                    ...this.props.Login.masterData,\r\n                    defaultInstitutionCategory: this.state.selectedRecord.ninstitutioncatcode.item,\r\n                    SelectedInstitutionCategory: this.state.selectedRecord.ninstitutioncatcode.item\r\n                };\r\n            }\r\n\r\n            //  this.setState({ FilterInstitutionCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData },\r\n                        openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.screenName }),\r\n                        operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            } else {\r\n                this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n            }\r\n        } else if (this.props.Login.screenName === \"Institution Site\") {\r\n\r\n            const isValidateEmail = this.state.selectedRecord[\"semail\"] ? validateEmail(this.state.selectedRecord[\"semail\"]) : true;\r\n            if (isValidateEmail) {\r\n\r\n                if (this.props.Login.operation === \"update\") {  // edit\r\n                    const selectedRecord = this.state.selectedRecord;\r\n                    postParam = {\r\n                        inputListName: \"InstitutionSite\",\r\n                        selectedObject: \"selectedInstitutionSite\",\r\n                        primaryKeyField: \"ninstitutionsitecode\",\r\n                    };\r\n                    inputData[\"institutionsite\"] = {};\r\n\r\n                    inputData[\"institutionsite\"][\"ninstitutionsitecode\"] = selectedRecord[\"ninstitutionsitecode\"] ? selectedRecord[\"ninstitutionsitecode\"] : -1;\r\n                    inputData[\"institutionsite\"][\"ninstitutioncode\"] = this.props.Login.instItem[\"ninstitutioncode\"];;\r\n                    inputData[\"institutionsite\"][\"nregionalsitecode\"] = this.state.selectedRecord[\"nsitecode\"] ? this.state.selectedRecord[\"nsitecode\"].value : -1;\r\n                    inputData[\"institutionsite\"][\"nregioncode\"] = this.state.selectedRecord[\"nregioncode\"] ? this.state.selectedRecord[\"nregioncode\"].value : -1;\r\n                    inputData[\"institutionsite\"][\"ncountrycode\"] = this.state.selectedRecord[\"ncountrycode\"] ? this.state.selectedRecord[\"ncountrycode\"].value : -1;\r\n                    inputData[\"institutionsite\"][\"ncitycode\"] = this.state.selectedRecord[\"ncitycode\"] ? this.state.selectedRecord[\"ncitycode\"].value : -1;\r\n                    inputData[\"institutionsite\"][\"ndistrictcode\"] = this.state.selectedRecord[\"ndistrictcode\"] ? this.state.selectedRecord[\"ndistrictcode\"].value : -1;\r\n\r\n                    this.fieldInstitutionSiteList.map(item => {\r\n                        return inputData[\"institutionsite\"][item] = selectedRecord[item] !== null ? selectedRecord[item] : \"\";\r\n                    })\r\n\r\n\r\n                    dataState = this.state.dataState;\r\n                } else {\r\n                    postParam = undefined;\r\n                    //add               \r\n                    //inputData[\"institutionsite\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };  \r\n                    inputData[\"institutionsite\"] = {};\r\n                    inputData[\"institutionsite\"][\"ninstitutioncode\"] = this.props.Login.instItem[\"ninstitutioncode\"];;\r\n                    inputData[\"institutionsite\"][\"nregionalsitecode\"] = this.state.selectedRecord[\"nsitecode\"] ? this.state.selectedRecord[\"nsitecode\"].value : -1;\r\n                    inputData[\"institutionsite\"][\"nregioncode\"] = this.state.selectedRecord[\"nregioncode\"] ? this.state.selectedRecord[\"nregioncode\"].value : -1;\r\n                    inputData[\"institutionsite\"][\"ncountrycode\"] = this.state.selectedRecord[\"ncountrycode\"] ? this.state.selectedRecord[\"ncountrycode\"].value : -1;\r\n                    inputData[\"institutionsite\"][\"ncitycode\"] = this.state.selectedRecord[\"ncitycode\"] ? this.state.selectedRecord[\"ncitycode\"].value : -1;\r\n                    inputData[\"institutionsite\"][\"ndistrictcode\"] = this.state.selectedRecord[\"ndistrictcode\"] ? this.state.selectedRecord[\"ndistrictcode\"].value : -1;\r\n\r\n\r\n                    this.fieldInstitutionSiteList.map(item => {\r\n                        return inputData[\"institutionsite\"][item] = this.state.selectedRecord[item] !== undefined ? this.state.selectedRecord[item] : \"\";\r\n                    })\r\n                }\r\n                const inputParam = {\r\n                    classUrl: this.props.Login.inputParam.classUrl,\r\n                    methodUrl: \"InstitutionSite\",\r\n                    displayName: this.props.Login.screenName,\r\n                    inputData: inputData,\r\n                    selectedId: this.state.selectedRecord[\"ninstitutionsitecode\"],\r\n                    operation: this.props.Login.operation, saveType, formRef, dataState,\r\n                    searchRef: this.searchRef,\r\n                    postParam: postParam\r\n                }\r\n                //this.setState({ FilterClientCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\r\n                if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                    const updateInfo = {\r\n                        typeName: DEFAULT_RETURN,\r\n                        data: {\r\n                            loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                            openChildModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.screenName }),\r\n                            operation: this.props.Login.operation\r\n                        }\r\n                    }\r\n                    this.props.updateStore(updateInfo);\r\n                } else {\r\n                    this.props.crudMaster(inputParam, this.props.Login.masterData, \"openChildModal\");\r\n                }\r\n            } else {\r\n                toast.info(this.props.intl.formatMessage({ id: \"IDS_ENTERVALIDEMAIL\" }))\r\n            }\r\n\r\n        } else if (this.props.Login.screenName === \"InstitutionFile\") {\r\n            const selectedRecord = this.state.selectedRecord;\r\n            const acceptedFiles = selectedRecord.sfilename;\r\n            const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n            let isFileEdited = transactionStatus.NO;\r\n            let institutionFileArray = [];\r\n            let institutionFile = {\r\n                ninstitutioncode: this.props.Login.masterData.selectedInstitution.ninstitutioncode,\r\n                ninstitutionfilecode: selectedRecord.ninstitutionfilecode ? selectedRecord.ninstitutionfilecode : 0,\r\n                nstatus: transactionStatus.ACTIVE,\r\n                nattachmenttypecode,\r\n            };\r\n            const formData = new FormData();\r\n            if (nattachmenttypecode === attachmentType.FTP) {\r\n                if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                    acceptedFiles.forEach((file, index) => {\r\n                        const tempData = Object.assign({}, institutionFile);\r\n                        const splittedFileName = file.name.split('.');\r\n                        const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                        const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                        const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                        const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.ntestfilecode && selectedRecord.ntestfilecode > 0\r\n                            && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                        tempData[\"sfilename\"] = Lims_JSON_stringify(file.name, false);\r\n                        tempData[\"sfiledesc\"] = Lims_JSON_stringify(selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\", false);\r\n                        tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                        tempData[\"ssystemfilename\"] = uniquefilename;\r\n                        tempData[\"nfilesize\"] = file.size;\r\n                        formData.append(\"uploadedFile\" + index, file);\r\n                        formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                        institutionFileArray.push(tempData);\r\n                    });\r\n\r\n                    formData.append(\"filecount\", acceptedFiles.length);\r\n                    isFileEdited = transactionStatus.YES;\r\n                } else {\r\n                    institutionFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename, false);\r\n                    institutionFile[\"sfiledesc\"] = Lims_JSON_stringify(selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\", false);\r\n                    institutionFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                    institutionFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                    institutionFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                    institutionFileArray.push(institutionFile);\r\n                }\r\n            } else {\r\n                institutionFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.slinkfilename.trim(), false);\r\n                institutionFile[\"sfiledesc\"] = Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\", false);\r\n                institutionFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n                institutionFile[\"ssystemfilename\"] = \"\";\r\n                institutionFile[\"nfilesize\"] = 0;\r\n                institutionFileArray.push(institutionFile);\r\n            }\r\n            formData.append(\"isFileEdited\", isFileEdited);\r\n            formData.append(\"institutionfile\", JSON.stringify(institutionFileArray));\r\n            let selectedId = null;\r\n            let postParam = undefined;\r\n            if (this.props.Login.operation === \"update\") {\r\n                postParam = { inputListName: \"Institution\", selectedObject: \"selectedInstitution\", primaryKeyField: \"ninstitutioncode\" };\r\n                selectedId = selectedRecord[\"ninstitutionfilecode\"];\r\n            }\r\n            const inputParam = {\r\n                inputData: {\r\n                    \"userinfo\": {\r\n                        ...this.props.Login.userInfo,\r\n                        sformname: Lims_JSON_stringify(this.props.Login.userInfo.sformname),\r\n                        smodulename: Lims_JSON_stringify(this.props.Login.userInfo.smodulename)\r\n                    }\r\n                },\r\n                formData: formData,\r\n                isFileupload: true,\r\n                operation: this.props.Login.operation,\r\n                classUrl: \"institution\",\r\n                saveType, formRef, methodUrl: \"InstitutionFile\", postParam\r\n            }\r\n\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                        openChildModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.screenName }),\r\n                        operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            } else {\r\n                this.props.crudMaster(inputParam, this.props.Login.masterData, \"openChildModal\");\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    ConfirmDelete = (deleteId) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.DeleteInstitution(\"delete\", deleteId));\r\n    }\r\n\r\n    DeleteInstitutionFile = (deleteTestParam) => {\r\n        let inputData = [];\r\n        let ncontrolcode = deleteTestParam.ncontrolCode;\r\n        let operation = deleteTestParam.operation;\r\n        inputData[\"institutionfile\"] = deleteTestParam.selectedRecord;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institutionfile\", selectedObject: \"selectedInstitutionFile\",\r\n            primaryKeyField: \"ninstitutionfilecode\",\r\n            primaryKeyValue: deleteTestParam.selectedRecord.ninstitutionfilecode,\r\n            fetchUrl: \"institution/getInstitutionFile\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"InstitutionFile\",\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolcode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openChildModal: true, screenName: \"Institution File\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n        }\r\n    }\r\n\r\n\r\n    DeleteInstitutionSite = (deleteParam) => {\r\n        let inputData = [];\r\n        let ncontrolcode = deleteParam.ncontrolCode;\r\n        let operation = deleteParam.operation;\r\n        delete (deleteParam.selectedRecord.expanded);\r\n        inputData[\"institutionsite\"] = deleteParam.selectedRecord;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institutionsite\", selectedObject: \"selectedInstitutionSite\",\r\n            primaryKeyField: \"ninstitutionsitecode\",\r\n            primaryKeyValue: deleteParam.selectedRecord.ninstitutionsitecode,\r\n            fetchUrl: \"institution/getInstitutionSite\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"InstitutionSite\",\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolcode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openChildModal: true, screenName: \"Institution Site\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n        }\r\n    }\r\n\r\n    DeleteInstitution = (operation, ncontrolCode) => {\r\n        let inputData = [];\r\n\r\n        inputData[\"institution\"] = this.props.Login.masterData.selectedInstitution;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institution\", selectedObject: \"selectedInstitution\",\r\n            primaryKeyField: \"ninstitutioncode\",\r\n            primaryKeyValue: this.props.Login.masterData.selectedInstitution.ninstitutioncode,\r\n            fetchUrl: \"institution/getSelectedInstitutionDetail\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"Institution\",\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openModal: true, screenName: \"Institution\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    viewInstitutionFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                institutionfile: filedata,\r\n                userinfo: this.props.Login.userInfo\r\n            },\r\n            classUrl: \"institution\",\r\n            operation: \"view\",\r\n            methodUrl: \"InstitutionFile\",\r\n            screenName: \"IDS_INSTITUTION\"\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n    onDropInstitutionFile = (attachedFiles, fieldName, maxSize) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(\r\n            selectedRecord[fieldName],\r\n            attachedFiles,\r\n            maxSize\r\n        );\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    };\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(\r\n            selectedRecord[fieldName],\r\n            file\r\n        );\r\n\r\n        this.setState({\r\n            selectedRecord,\r\n            actionType: \"delete\",\r\n        });\r\n    };\r\n\r\n    validateEsign = () => {\r\n        let modalName;\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        if (this.props.Login.screenName === \"Institution\") {\r\n            modalName = \"openModal\";\r\n        }\r\n        else {\r\n            modalName = \"openChildModal\";\r\n        }\r\n        this.props.validateEsignCredential(inputParam, modalName);\r\n    }\r\n\r\n    generateBreadCrumData() {\r\n        const breadCrumbData = [];\r\n        if (this.props.Login.masterData && this.props.Login.masterData.FilterInstitutionCategory) {\r\n\r\n            breadCrumbData.push(\r\n                {\r\n                    \"label\": \"IDS_INSTITUTIONCATEGORY\",\r\n                    \"value\": this.props.Login.masterData.defaultInstitutionCategory ? this.props.Login.masterData.defaultInstitutionCategory.sinstitutioncatname : \"-\"\r\n                }\r\n            );\r\n        }\r\n        return breadCrumbData;\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            selectedRecord = this.props.Login.selectedRecord\r\n            this.setState({ selectedRecord });\r\n        }\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({ userRoleControlRights, controlMap, data: this.props.Login.masterData });\r\n            }\r\n            else {\r\n\r\n                let { dataState } = this.state;\r\n                if (this.props.Login.dataState === undefined) {\r\n                    dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 }\r\n                }\r\n\r\n                this.setState({ data: this.props.Login.masterData, dataState, selectedRecord: this.props.Login.selectedRecord });\r\n            }\r\n\r\n\r\n\r\n            ///     let FilterInstitutionCategory = this.state.FilterInstitutionCategory || {};\r\n\r\n            //   if (this.props.Login.masterData.FilterInstitutionCategory !== previousProps.Login.masterData.FilterInstitutionCategory) {\r\n            const InstitutionCategoryMap = constructOptionList(this.props.Login.masterData.FilterInstitutionCategory || [], \"ninstitutioncatcode\", \"sinstitutioncatname\", 'ninstitutioncatcode', 'descending', false);\r\n            const FilterInstitutionCategory = InstitutionCategoryMap.get(\"OptionList\");\r\n            //  } \r\n\r\n\r\n            const filterData = this.generateBreadCrumData();\r\n\r\n            const selectedFilterRecord = {\r\n                \"ninstitutioncatcode\": {\r\n                    \"label\": this.props.Login.masterData.defaultInstitutionCategory ? this.props.Login.masterData.defaultInstitutionCategory.sinstitutioncatname : -1,\r\n                    \"value\": this.props.Login.masterData.defaultInstitutionCategory ? this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode : '-',\r\n                    \"item\": this.props.Login.masterData.defaultInstitutionCategory ? this.props.Login.masterData.defaultInstitutionCategory : {}\r\n                }\r\n            }\r\n\r\n\r\n\r\n            this.setState({ FilterInstitutionCategory, filterData, selectedFilterRecord });\r\n\r\n            // if(this.props.Login.comboSet){\r\n            //     const updateInfo = {\r\n            //         typeName: DEFAULT_RETURN,\r\n            //         data: { comboSet: false }\r\n            //     }\r\n            //     this.props.updateStore(updateInfo);\r\n            // }\r\n        }\r\n\r\n\r\n\r\n        // if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n\r\n        //     this.setState({ filterData });\r\n        // }\r\n    }\r\n\r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, validateEsignCredential, updateStore, getInstitutionDetail, getInstitutionCombo, getInstitutionSiteData, addInstitutionFile, changeInstitutionCategoryFilter, viewAttachment, filterColumnData, getCitComboServices, getDistComboServices\r\n})(injectIntl(Institution));\r\n"]},"metadata":{},"sourceType":"module"}