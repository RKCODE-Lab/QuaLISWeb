{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Card}from'react-bootstrap';//, Nav, Tab\n//import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n//import { faPlus } from '@fortawesome/free-solid-svg-icons';//,faPencilAlt, faTrash\nimport{injectIntl}from'react-intl';//FormattedMessage,\n//import { Grid, GridColumn } from '@progress/kendo-react-grid';\nimport{process}from'@progress/kendo-data-query';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';//import Axios from 'axios';\n//import rsapi from '../../rsapi';\nimport{toast}from'react-toastify';import AddSupplierCategory from'./AddSupplierCategory';import AddMaterialCategory from'./AddMaterialCategory';import Esign from'../audittrail/Esign';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{constructOptionList,showEsign,onDropAttachFileList,create_UUID,validatePhoneNumber,validateEmail,deleteAttachmentDropZone}from'../../components/CommonScript';//import DataGrid from '../../components/DataGrid';\nimport SupplierTabs from'./SupplierTabs';import SupplierFileTab from'./SupplierFileTabs';import{transactionStatus,attachmentType}from'../../components/Enumeration';import CustomTabs from'../../components/custom-tabs/custom-tabs.component';import AddSupplierFile from'./AddSupplierFile';import AddSupplierContact from'./AddSupplierContact';var SupplierMaterialCategoryTab=/*#__PURE__*/function(_React$Component){_inherits(SupplierMaterialCategoryTab,_React$Component);var _super=_createSuper(SupplierMaterialCategoryTab);function SupplierMaterialCategoryTab(props){var _this;_classCallCheck(this,SupplierMaterialCategoryTab);_this=_super.call(this,props);_this.supplierDataStateChange=function(event){_this.setState({dataState:event.dataState});};_this.materialDataStateChange=function(event){_this.setState({dataStateMaterial:event.dataState});};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.onDropSupplierFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.tabDetail=function(){var addSupCatId=_this.props.controlMap.has(\"AddSupplierCategory\")&&_this.props.controlMap.get(\"AddSupplierCategory\").ncontrolcode;var deleteSupCatId=_this.props.controlMap.has(\"DeleteSupplierCategory\")&&_this.props.controlMap.get(\"DeleteSupplierCategory\").ncontrolcode;var addMatCatId=_this.props.controlMap.has(\"AddMaterialCategory\")&&_this.props.controlMap.get(\"AddMaterialCategory\").ncontrolcode;var deleteMatCatId=_this.props.controlMap.has(\"DeleteMaterialCategory\")&&_this.props.controlMap.get(\"DeleteMaterialCategory\").ncontrolcode;var addSupCotId=_this.props.controlMap.has(\"AddSupplierContact\")&&_this.props.controlMap.get(\"AddSupplierContact\").ncontrolcode;var editSupCotId=_this.props.controlMap.has(\"EditSupplierContact\")&&_this.props.controlMap.get(\"EditSupplierContact\").ncontrolcode;var deleteSupCotId=_this.props.controlMap.has(\"DeleteSupplierContact\")&&_this.props.controlMap.get(\"DeleteSupplierContact\").ncontrolcode;var supcatAddParam={screenName:_this.props.intl.formatMessage({id:\"IDS_SUPPLIERCATEGORY\"}),operation:\"create\",primaryKeyField:\"nsuppliercatcode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:addSupCatId};var supcatDeleteParam={screenName:_this.props.intl.formatMessage({id:\"IDS_SUPPLIERCATEGORY\"}),methodUrl:\"SupplierMatrix\",operation:\"delete\",ncontrolCode:deleteSupCatId};var matericatAddParam={screenName:_this.props.intl.formatMessage({id:\"IDS_MATERIALCATEGORY\"}),operation:\"create\",primaryKeyField:\"nmaterialcatcode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:addMatCatId};var materialcatDeleteParam={screenName:_this.props.intl.formatMessage({id:\"IDS_MATERIALCATEGORY\"}),methodUrl:\"SupplierMatrix\",operation:\"delete\",ncontrolCode:deleteMatCatId};var supcotAddParam={screenName:_this.props.intl.formatMessage({id:\"IDS_SUPPLIERCONTACT\"}),operation:\"create\",primaryKeyField:\"nsuppliercontactcode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:addSupCotId};var editcotAddParam={screenName:_this.props.intl.formatMessage({id:\"IDS_SUPPLIERCONTACT\"}),operation:\"update\",primaryKeyField:\"nsuppliercontactcode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:editSupCotId};var supcotDeleteParam={screenName:_this.props.intl.formatMessage({id:\"IDS_SUPPLIERCONTACT\"}),methodUrl:\"Supplier\",operation:\"delete\",ncontrolCode:deleteSupCotId};var tabMap=new Map();var detailedFieldList=[{\"idsName\":\"IDS_DESIGNATION\",\"dataField\":\"sdesignation\",\"width\":\"150px\",\"mandatory\":false,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_MOBILENO\",\"dataField\":\"smobileno\",\"width\":\"150px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_TELEPHONENO\",\"dataField\":\"stelephoneno\",\"width\":\"150px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_EMAIL\",\"dataField\":\"semail\",\"width\":\"150px\",\"mandatory\":false,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"150px\",\"mandatory\":false,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_DEFAULTSTATUS\",\"dataField\":\"sdisplaystatus\",\"width\":\"250px\"}];tabMap.set(\"IDS_SUPPLIERCATEGORY\",/*#__PURE__*/React.createElement(SupplierTabs,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,addId:addSupCatId,addParam:supcatAddParam,comboDataService:_this.props.getSupplierCategoryComboDataService,addTitleIDS:\"IDS_SUPPLIERCATEGORY\",addTitleDefaultMsg:'SupplierCategory',primaryKeyField:\"nsuppliermatrixcode\",masterData:_this.props.masterData,primaryList:\"SupplierCategory\",dataResult:process(_this.props.masterData[\"SupplierCategory\"]||[],_this.state.dataState)// dataState={this.state.dataState}\n// dataStateChange={this.supplierDataStateChange}\n,dataState:_this.props.screenName===undefined||_this.props.screenName===''||_this.props.screenName===\"SupplierCategory\"||_this.props.screenName===_this.props.intl.formatMessage({id:\"IDS_SUPPLIERCATEGORY\"})?_this.state.dataState:{skip:0},dataStateChange:function dataStateChange(event){return _this.setState({dataState:event.dataState});},columnList:_this.suppliercatColumnList,methodUrl:\"SupplierMatrix\",deleteRecord:_this.deleteRecord,deleteParam:supcatDeleteParam//selectedId={this.props.selectedId}\n}));tabMap.set(\"IDS_MATERIALCATEGORY\",/*#__PURE__*/React.createElement(SupplierTabs,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,addId:addMatCatId,addParam:matericatAddParam,comboDataService:_this.props.getMaterialCategoryComboDataService,addTitleIDS:\"IDS_MATERIALCATEGORY\",addTitleDefaultMsg:'MaterialCategory',primaryKeyField:\"nsuppliermatrixcode\",masterData:_this.props.masterData,primaryList:\"MaterialCategory\",dataResult:process(_this.props.masterData[\"MaterialCategory\"]||[],_this.state.dataStateMaterial)// dataState={this.state.dataStateMaterial}\n// dataStateChange={this.materialDataStateChange}\n,dataState:_this.props.screenName===undefined||_this.props.screenName===\"MaterialCategory\"||_this.props.screenName===_this.props.intl.formatMessage({id:\"IDS_MATERIALCATEGORY\"})?_this.state.dataStateMaterial:{skip:0},dataStateChange:function dataStateChange(event){return _this.setState({dataStateMaterial:event.dataState});},columnList:_this.materialcatColumnList,methodUrl:\"SupplierMatrix\",deleteRecord:_this.deleteRecord,deleteParam:materialcatDeleteParam//selectedId={this.props.selectedId}\n}));tabMap.set(\"IDS_SUPPLIERCONTACT\",/*#__PURE__*/React.createElement(SupplierTabs,{userRoleControlRights:_this.props.userRoleControlRights,selectedId:_this.props.selectedId,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,fetchRecord:_this.props.getSupplierContactComboDataService,addId:addSupCotId,editId:editSupCotId,editParam:editcotAddParam,addParam:supcotAddParam,comboDataService:_this.props.getSupplierContactComboDataService,addTitleIDS:\"IDS_SUPPLIERCONTACT\",addTitleDefaultMsg:'SupplierContact',primaryKeyField:\"nsuppliercontactcode\",masterData:_this.props.masterData,primaryList:\"SupplierContact\",dataResult:process(_this.props.masterData[\"SupplierContact\"]||[],_this.state.dataState)// dataState={this.state.dataStateMaterial}\n// dataStateChange={this.materialDataStateChange}\n,dataState:_this.props.screenName===undefined||supcotAddParam.screenName===_this.props.intl.formatMessage({id:\"IDS_SUPPLIERCONTACT\"})?_this.state.dataState:{skip:0},dataStateChange:function dataStateChange(event){return _this.setState({dataState:event.dataState});},columnList:_this.supplierContactColumnList,methodUrl:\"SupplierContact\",deleteRecord:_this.deleteRecord,deleteParam:supcotDeleteParam,detailedFieldList:detailedFieldList//selectedId={this.props.selectedId}\n}));tabMap.set(\"IDS_FILE\",/*#__PURE__*/React.createElement(SupplierFileTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,supplierFile:_this.props.masterData.supplierFile||[],getAvailableData:_this.props.getAvailableData,addSupplierFile:_this.props.addSupplierFile,viewSupplierFile:_this.viewSupplierFile,defaultRecord:_this.defaultRecord,screenName:_this.props.intl.formatMessage({id:\"IDS_SUPPLIERFILE\"}),settings:_this.props.settings}));return tabMap;};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;var selectedId=_this.props.selectedId;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']='';selectedRecord['esigncomments']='';}}else{openChildModal=false;selectedId=null;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:selectedId}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;;if(fieldName===\"nsuppliercatcode\"){var selectedSupplierCategory=comboData;_this.setState({selectedRecord:selectedRecord,selectedSupplierCategory:selectedSupplierCategory});}if(fieldName===\"nmaterialcatcode\"){var selectedMaterialCategory=comboData;_this.setState({selectedRecord:selectedRecord,selectedMaterialCategory:selectedMaterialCategory});}if(fieldName===\"ncountrycode\"){var selectedSupplierContact=comboData;_this.setState({selectedRecord:selectedRecord,selectedSupplierContact:selectedSupplierContact});}};_this.viewSupplierFile=function(filedata){var inputParam={inputData:{supplierfile:filedata,userinfo:_this.props.userInfo},classUrl:\"supplier\",operation:\"view\",methodUrl:\"AttachedSupplierFile\",screenName:\"Supplier File\"};_this.props.viewAttachment(inputParam);};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;// else if (event.target.name === \"nlockmode\")\n//     selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\nelse selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else if(event.target.type==='radio'){selectedRecord[event.target.name]=optional;}else{if(event.target.name===\"stelephoneno\"||event.target.name===\"smobileno\"){if(event.target.value!==\"\"){event.target.value=validatePhoneNumber(event.target.value);selectedRecord[event.target.name]=event.target.value!==\"\"?event.target.value:selectedRecord[event.target.name];}else{selectedRecord[event.target.name]=event.target.value;}}else selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){//add / edit  \nif(_this.state.selectedRecord['semail']?validateEmail(_this.state.selectedRecord['semail']):true){var inputParam={};if(_this.props.screenName===_this.props.intl.formatMessage({id:\"IDS_SUPPLIERCATEGORY\"})){inputParam=_this.saveSupplierCategory(saveType,formRef);}else if(_this.props.screenName===_this.props.intl.formatMessage({id:\"IDS_MATERIALCATEGORY\"})){inputParam=_this.saveMaterial(saveType,formRef);}else if(_this.props.screenName===_this.props.intl.formatMessage({id:\"IDS_SUPPLIERCONTACT\"})){inputParam=_this.saveSupplierContact(saveType,formRef);}else if(_this.props.screenName===_this.props.intl.formatMessage({id:\"IDS_SUPPLIERFILE\"})){inputParam=_this.onSaveSupplierFile(saveType,formRef);}if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_ENTERVALIDEMAIL\"}));}};_this.onSaveSupplierFile=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var supplierFileArray=[];var supplierFile={nsuppliercode:_this.props.masterData.SelectedSupplier.nsuppliercode,nsupplierfilecode:selectedRecord.nsupplierfilecode?selectedRecord.nsupplierfilecode:0,nstatus:transactionStatus.ACTIVE,nattachmenttypecode:nattachmenttypecode// ndefaultstatus: selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] ? selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] : 4\n};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},supplierFile);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=selectedRecord.ssystemfilename?selectedRecord.ssystemfilename.split('.'):\"\";var filesystemfileext=selectedRecord.ssystemfilename?file.name.split('.')[ssystemfilename.length-1]:\"\";var uniquefilename=nattachmenttypecode===attachmentType.FTP?selectedRecord.nsupplierfilecode&&selectedRecord.nsupplierfilecode>0&&selectedRecord.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=file.name;tempData[\"sdescription\"]=selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\";tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);supplierFileArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{supplierFile[\"sfilename\"]=selectedRecord.sfilename;supplierFile[\"sdescription\"]=selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\";supplierFile[\"nlinkcode\"]=transactionStatus.NA;supplierFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;supplierFile[\"nfilesize\"]=selectedRecord.nfilesize;supplierFileArray.push(supplierFile);}}else{supplierFile[\"sfilename\"]=selectedRecord.slinkfilename.trim();supplierFile[\"sdescription\"]=selectedRecord.slinkdescription?selectedRecord.slinkdescription.trim():\"\";supplierFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;supplierFile[\"ssystemfilename\"]=\"\";supplierFile[\"nfilesize\"]=0;supplierFileArray.push(supplierFile);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"supplierfile\",JSON.stringify(supplierFileArray));// formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\nvar selectedId=null;var postParam=undefined;if(_this.props.operation===\"update\"){// edit\npostParam={inputListName:\"Supplier\",selectedObject:\"SelectedSupplier\",primaryKeyField:\"nsuppliercode\"};selectedId=selectedRecord[\"nsupplierfilecode\"];}var inputParam={inputData:{userinfo:_this.props.userInfo},formData:formData,isFileupload:true,operation:_this.props.operation,classUrl:\"supplier\",saveType:saveType,formRef:formRef,methodUrl:\"SupplierFile\",postParam:postParam};return inputParam;};_this.deleteRecord=function(supplierparam){if(_this.props.masterData.SelectedSupplier.ntransactionstatus===transactionStatus.RETIRED){toast.warn(_this.props.intl.formatMessage({id:_this.props.masterData.SelectedSupplier.stranstatus}));}else{var inputParam={};if(_this.props.screenName===_this.props.intl.formatMessage({id:\"IDS_SUPPLIERFILE\"})){var _inputData;inputParam={classUrl:\"supplier\",methodUrl:supplierparam.methodUrl,inputData:(_inputData={},_defineProperty(_inputData,supplierparam.methodUrl.toLowerCase(),supplierparam.selectedRecord),_defineProperty(_inputData,\"userinfo\",_this.props.userInfo),_inputData),operation:supplierparam.operation,//dataState: this.state.dataState,\n//dataStateMaterial: this.state.dataStateMaterial\ndataState:_this.state.dataState};}else if(supplierparam.screenName===_this.props.intl.formatMessage({id:\"IDS_SUPPLIERCONTACT\"})){var _inputData2;inputParam={classUrl:\"supplier\",methodUrl:\"SupplierContact\",inputData:(_inputData2={},_defineProperty(_inputData2,supplierparam.methodUrl.toLowerCase(),supplierparam.selectedRecord),_defineProperty(_inputData2,\"userinfo\",_this.props.userInfo),_inputData2),operation:supplierparam.operation,//dataState: this.state.dataState,\n//dataStateMaterial: this.state.dataStateMaterial\ndataState:_this.state.dataState};}else{var _inputData3;inputParam={classUrl:\"suppliermatrix\",methodUrl:supplierparam.methodUrl,inputData:(_inputData3={},_defineProperty(_inputData3,supplierparam.methodUrl.toLowerCase(),supplierparam.selectedRecord),_defineProperty(_inputData3,\"userinfo\",_this.props.userInfo),_inputData3),operation:supplierparam.operation,//dataState: this.state.dataState,\n//dataStateMaterial: this.state.dataStateMaterial\ndataState:_this.state.dataState};}if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,supplierparam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:supplierparam.screenName,operation:supplierparam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"//fileToDelete:file.name \n});};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};var dataStateMaterial={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={isOpen:false,selectedRecord:{},dataResult:[],activeTab:'SupplierCategory-tab',dataState:dataState,dataStateMaterial:dataStateMaterial,supplierCategory:[],materialCategory:[],countryList:[]};_this.supplerCategoryFieldList=['nsuppliercode','ncategorycode','ntypecode','ssuppliercatname','smaterialcatname','sremarks','ntransactionstatus'];_this.supplierContactFieldList=['ssuppliercontactname','sdescription','sdesignation','saddress1','saddress2','saddress3','sphoneno','smobileno','sfaxno','semail','ndefaultstatus','ncountrycode'];_this.suppliercatColumnList=[{\"idsName\":\"IDS_SUPPLIERCATNAME\",\"dataField\":\"ssuppliercatname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];_this.materialcatColumnList=[{\"idsName\":\"IDS_MATERIALCATNAME\",\"dataField\":\"smaterialcatname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];_this.supplierContactColumnList=[{\"idsName\":\"IDS_SUPPLIERCONTACTNAME\",\"dataField\":\"ssuppliercontactname\",\"width\":\"150px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_DEFAULTSTATUS\",\"dataField\":\"sdisplaystatus\",\"width\":\"250px\",\"mandatory\":false,\"controlType\":\"checkbox\"}];_this.validationSuppliercatColumnList=[{\"idsName\":\"IDS_SUPPLIERCATNAME\",\"dataField\":\"nsuppliercatcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];_this.validationMaterialcatColumnList=[{\"idsName\":\"IDS_MATERIALCATNAME\",\"dataField\":\"nmaterialcatcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];return _this;}_createClass(SupplierMaterialCategoryTab,[{key:\"render\",value:function render(){var mandatoryFields=[];var matmandatoryFields=[];this.validationSuppliercatColumnList.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});//ALPD-849 Fix\nif(this.props.screenName===this.props.intl.formatMessage({id:\"IDS_MATERIALCATEGORY\"})){this.validationMaterialcatColumnList.forEach(function(item){return item.mandatory===true?matmandatoryFields.push(item):\"\";});}else if(this.props.screenName===this.props.intl.formatMessage({id:\"IDS_SUPPLIERFILE\"})){if(this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK){matmandatoryFields=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else{// if (this.props.operation !== 'update') {\nmatmandatoryFields=[{\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"}];// }\n}}else if(this.props.screenName===this.props.intl.formatMessage({id:\"IDS_SUPPLIERCONTACT\"})){matmandatoryFields=[{\"idsName\":\"IDS_SUPPLIERCONTACT\",\"dataField\":\"ssuppliercontactname\",\"width\":\"150px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs\"},/*#__PURE__*/React.createElement(CustomTabs,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange})))),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.props.screenName,onSaveClick:this.onSaveClick,updateStore:this.props.updateStore,esign:this.props.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{},mandatoryFields:this.props.screenName===this.props.intl.formatMessage({id:\"IDS_SUPPLIERCATEGORY\"})?mandatoryFields:matmandatoryFields||[],addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.screenName===this.props.intl.formatMessage({id:\"IDS_SUPPLIERCATEGORY\"})?/*#__PURE__*/React.createElement(AddSupplierCategory,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,selectedSupplierCategory:this.props.masterData.selectedSupplierCategory,supplierCategory:this.state.supplierCategory||[]//{this.props.supplierCategory || []}\n}):this.props.screenName===this.props.intl.formatMessage({id:\"IDS_MATERIALCATEGORY\"})?/*#__PURE__*/React.createElement(AddMaterialCategory,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,operation:this.props.operation,selectedMaterialCategory:this.props.masterData.selectedMaterialCategory,materialCategory:this.state.materialCategory//{this.props.materialCategory}\n}):this.props.screenName===this.props.intl.formatMessage({id:\"IDS_SUPPLIERCONTACT\"})?/*#__PURE__*/React.createElement(AddSupplierContact,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,operation:this.props.operation,formatMessage:this.props.intl.formatMessage,selectedSupplierContact:this.props.masterData.selectedSupplierContact,countryList:this.state.countryList||[]}):this.props.screenName===this.props.intl.formatMessage({id:\"IDS_SUPPLIERFILE\"})?/*#__PURE__*/React.createElement(AddSupplierFile,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onDrop:this.onDropSupplierFile,onDropAccepted:this.onDropAccepted,deleteAttachment:this.deleteAttachment,actionType:this.state.actionType,onComboChange:this.onComboChange,linkMaster:this.props.linkMaster,editFiles:this.props.editFiles,maxSize:20// maxFiles={this.props.operation === \"update\" ? 1 : 3}\n// multiple={this.props.operation === \"update\" ? false : true}\n,maxFiles:1,multiple:false,label:this.props.intl.formatMessage({id:\"IDS_SUPPLIERFILE\"}),name:\"supplierfilename\"}):\"\"}));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.masterData!==previousProps.masterData){var isOpen=false;if(this.props.errorCode!==undefined&&(this.state.operation===\"create\"||this.state.operation===\"update\")){isOpen=true;}var _this$state=this.state,_dataState=_this$state.dataState,_dataStateMaterial=_this$state.dataStateMaterial;if(this.props.dataState===undefined){_dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5,filter:undefined,sort:undefined};_dataStateMaterial={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5,filter:undefined,sort:undefined};}this.setState({isOpen:isOpen,activeTab:'SupplierCategory-tab',dataState:_dataState,dataStateMaterial:_dataStateMaterial});}if(this.props.selectedRecord!==previousProps.selectedRecord){var countryList=constructOptionList(this.props.selectedRecord.countryList||[],\"ncountrycode\",\"scountryname\",undefined,undefined,undefined);var countryListSupplier=countryList.get(\"OptionList\");this.setState({selectedRecord:this.props.selectedRecord,countryList:countryListSupplier});}var _this$state2=this.state,dataState=_this$state2.dataState,dataStateMaterial=_this$state2.dataStateMaterial;if(this.props.dataState!==previousProps.dataState&&this.props.dataState!==dataState){dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};dataStateMaterial={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};this.setState({dataState:dataState,dataStateMaterial:dataStateMaterial});}// {\n//     dataState={...dataState,filter:undefined,sort:undefined}\n//     dataStateMaterial={...dataStateMaterial,filter:undefined,sort:undefined}\n//     this.setState({ dataState, dataStateMaterial });\n// }\nif(this.props.supplierCategory!==previousProps.supplierCategory||this.props.materialCategory!==previousProps.materialCategory){var supplierCategory=constructOptionList(this.props.supplierCategory||[],\"nsuppliercatcode\",\"ssuppliercatname\",undefined,undefined,undefined);var supplierCategoryList=supplierCategory.get(\"OptionList\");var materialCategory=constructOptionList(this.props.materialCategory||[],\"nmaterialcatcode\",\"smaterialcatname\",undefined,undefined,undefined);var materialCategoryList=materialCategory.get(\"OptionList\");this.setState({supplierCategory:supplierCategoryList,materialCategory:materialCategoryList});}}},{key:\"saveSupplierCategory\",value:function saveSupplierCategory(saveType,formRef){var _this2=this;var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;inputData[\"supplier\"]=this.props.masterData.SelectedSupplier;inputData[\"suppliermatrix\"]={};var dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};var suppliermatrixArray=[];suppliermatrixArray=this.state.selectedRecord.nsuppliercatcode.map(function(item){var suppliermat={};suppliermat[\"nsuppliercode\"]=_this2.props.masterData.SelectedSupplier.nsuppliercode;//this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\nsuppliermat[\"ntypecode\"]=1;suppliermat[\"sremarks\"]=\"\";suppliermat[\"ntransactionstatus\"]=transactionStatus.ACTIVE;suppliermat[\"ncategorycode\"]=item.value;//suppliermatrixArray.push(suppliermat);\nreturn suppliermat;});inputData['suppliermatrix']=suppliermatrixArray;var inputParam={classUrl:\"suppliermatrix\",methodUrl:\"SupplierMatrix\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef,dataState:dataState};return inputParam;}},{key:\"saveMaterial\",value:function saveMaterial(saveType,formRef){var _this3=this;var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;inputData[\"supplier\"]=this.props.masterData.SelectedSupplier;inputData[\"suppliermatrix\"]={};var dataStateMaterial=undefined;var suppliermatrixArray=[];suppliermatrixArray=this.state.selectedRecord.nmaterialcatcode.map(function(item){var suppliermat={};suppliermat[\"nsuppliercode\"]=_this3.props.masterData.SelectedSupplier.nsuppliercode;//this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\nsuppliermat[\"ntypecode\"]=2;suppliermat[\"sremarks\"]=\"\";suppliermat[\"ntransactionstatus\"]=transactionStatus.ACTIVE;suppliermat[\"ncategorycode\"]=item.value;//suppliermatrixArray.push(suppliermat);\nreturn suppliermat;});inputData['suppliermatrix']=suppliermatrixArray;var inputParam={classUrl:\"suppliermatrix\",methodUrl:\"SupplierMatrix\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef,dataStateMaterial:dataStateMaterial};return inputParam;}},{key:\"saveSupplierContact\",value:function saveSupplierContact(saveType,formRef){var inputData=[];var postParam={};inputData[\"userinfo\"]=this.props.userInfo;inputData[\"supplier\"]=this.props.masterData.SelectedSupplier;inputData[\"suppliercontact\"]={};var dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};// let suppliercontactArray = []\nvar suppliermat={};if(this.props.operation===\"update\"){postParam={inputListName:\"Suppliercontact\",selectedObject:\"SupplierContact\",primaryKeyField:\"nsuppliercontactcode\"};inputData[\"nsuppliercontactcode\"]=this.state.selectedRecord.nsuppliercontactcode;suppliermat[\"nsuppliercode\"]=this.props.masterData.SelectedSupplier.nsuppliercode;//this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\nsuppliermat[\"sdescription\"]=this.state.selectedRecord.sdescription;suppliermat[\"sdesignation\"]=this.state.selectedRecord.sdesignation;suppliermat[\"smobileno\"]=this.state.selectedRecord.smobileno;suppliermat[\"stelephoneno\"]=this.state.selectedRecord.stelephoneno;suppliermat[\"semail\"]=this.state.selectedRecord.semail;suppliermat[\"ndefaultstatus\"]=this.state.selectedRecord.ndefaultstatus?this.state.selectedRecord.ndefaultstatus:\"4\";suppliermat[\"ssuppliercontactname\"]=this.state.selectedRecord.ssuppliercontactname;suppliermat[\"nsuppliercontactcode\"]=this.state.selectedRecord.nsuppliercontactcode;inputData['suppliercontact']=suppliermat;}else{suppliermat[\"nsuppliercode\"]=this.props.masterData.SelectedSupplier.nsuppliercode;//this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\nsuppliermat[\"sdescription\"]=this.state.selectedRecord.sdescription;suppliermat[\"sdesignation\"]=this.state.selectedRecord.sdesignation;suppliermat[\"smobileno\"]=this.state.selectedRecord.smobileno;suppliermat[\"stelephoneno\"]=this.state.selectedRecord.stelephoneno;suppliermat[\"semail\"]=this.state.selectedRecord.semail;suppliermat[\"ndefaultstatus\"]=this.state.selectedRecord.ndefaultstatus?this.state.selectedRecord.ndefaultstatus:\"4\";suppliermat[\"ssuppliercontactname\"]=this.state.selectedRecord.ssuppliercontactname;//suppliermat[\"ncategorycode\"] = item.value\n//   suppliercontactArray.push(suppliermat);\n//  return suppliermat;\ninputData['suppliercontact']=suppliermat;}var inputParam={classUrl:\"supplier\",methodUrl:\"SupplierContact\",inputData:inputData,operation:this.props.operation,postParam:postParam,saveType:saveType,formRef:formRef,dataState:dataState};return inputParam;}}]);return SupplierMaterialCategoryTab;}(React.Component);export default injectIntl(SupplierMaterialCategoryTab);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/contactmaster/SupplierMaterialCategoryTab.jsx"],"names":["React","Row","Col","Card","injectIntl","process","SlideOutModal","toast","AddSupplierCategory","AddMaterialCategory","Esign","DEFAULT_RETURN","constructOptionList","showEsign","onDropAttachFileList","create_UUID","validatePhoneNumber","validateEmail","deleteAttachmentDropZone","SupplierTabs","SupplierFileTab","transactionStatus","attachmentType","CustomTabs","AddSupplierFile","AddSupplierContact","SupplierMaterialCategoryTab","props","supplierDataStateChange","event","setState","dataState","materialDataStateChange","dataStateMaterial","onTabChange","tabProps","screenName","updateInfo","typeName","data","updateStore","onDropSupplierFile","attachedFiles","fieldName","maxSize","selectedRecord","state","actionType","tabDetail","addSupCatId","controlMap","has","get","ncontrolcode","deleteSupCatId","addMatCatId","deleteMatCatId","addSupCotId","editSupCotId","deleteSupCotId","supcatAddParam","intl","formatMessage","id","operation","primaryKeyField","masterData","userInfo","ncontrolCode","supcatDeleteParam","methodUrl","matericatAddParam","materialcatDeleteParam","supcotAddParam","editcotAddParam","supcotDeleteParam","tabMap","Map","detailedFieldList","set","userRoleControlRights","inputParam","getSupplierCategoryComboDataService","undefined","skip","suppliercatColumnList","deleteRecord","getMaterialCategoryComboDataService","materialcatColumnList","selectedId","getSupplierContactComboDataService","supplierContactColumnList","supplierFile","getAvailableData","addSupplierFile","viewSupplierFile","defaultRecord","settings","closeModal","loadEsign","openChildModal","onComboChange","comboData","selectedSupplierCategory","selectedMaterialCategory","selectedSupplierContact","filedata","inputData","supplierfile","userinfo","classUrl","viewAttachment","onInputOnChange","optional","target","type","name","checked","ACTIVE","DEACTIVE","YES","NO","value","onSaveClick","saveType","formRef","saveSupplierCategory","saveMaterial","saveSupplierContact","onSaveSupplierFile","esignRights","nformcode","screenData","crudMaster","warn","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","supplierFileArray","nsuppliercode","SelectedSupplier","nsupplierfilecode","nstatus","formData","FormData","FTP","Array","isArray","length","forEach","file","index","tempData","Object","assign","splittedFileName","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","sdescription","trim","NA","size","append","push","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","postParam","inputListName","selectedObject","isFileupload","supplierparam","ntransactionstatus","RETIRED","stranstatus","toLowerCase","deleteAttachment","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","validateEsignCredential","take","parseInt","isOpen","dataResult","activeTab","supplierCategory","materialCategory","countryList","supplerCategoryFieldList","supplierContactFieldList","validationSuppliercatColumnList","validationMaterialcatColumnList","mandatoryFields","matmandatoryFields","item","mandatory","LINK","onDropAccepted","linkMaster","editFiles","previousProps","errorCode","filter","sort","countryListSupplier","supplierCategoryList","materialCategoryList","suppliermatrixArray","nsuppliercatcode","map","suppliermat","nmaterialcatcode","nsuppliercontactcode","sdesignation","smobileno","stelephoneno","semail","ndefaultstatus","ssuppliercontactname","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Card } from 'react-bootstrap';//, Nav, Tab\r\n//import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n//import { faPlus } from '@fortawesome/free-solid-svg-icons';//,faPencilAlt, faTrash\r\nimport { injectIntl } from 'react-intl';//FormattedMessage,\r\n//import { Grid, GridColumn } from '@progress/kendo-react-grid';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\n//import Axios from 'axios';\r\n//import rsapi from '../../rsapi';\r\nimport { toast } from 'react-toastify';\r\nimport AddSupplierCategory from './AddSupplierCategory';\r\nimport AddMaterialCategory from './AddMaterialCategory';\r\nimport Esign from '../audittrail/Esign';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { constructOptionList, showEsign, onDropAttachFileList, create_UUID, validatePhoneNumber,\r\n    validateEmail,deleteAttachmentDropZone } from '../../components/CommonScript';\r\n//import DataGrid from '../../components/DataGrid';\r\nimport SupplierTabs from './SupplierTabs';\r\nimport SupplierFileTab from './SupplierFileTabs';\r\nimport { transactionStatus, attachmentType } from '../../components/Enumeration';\r\nimport CustomTabs from '../../components/custom-tabs/custom-tabs.component';\r\nimport AddSupplierFile from './AddSupplierFile';\r\nimport AddSupplierContact from './AddSupplierContact';\r\n\r\nclass SupplierMaterialCategoryTab extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        const dataStateMaterial = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        this.state = {\r\n            isOpen: false, selectedRecord: {}, dataResult: [],\r\n            activeTab: 'SupplierCategory-tab',\r\n            dataState: dataState,\r\n            dataStateMaterial: dataStateMaterial, supplierCategory: [], materialCategory: [], countryList: []\r\n        };\r\n        this.supplerCategoryFieldList = ['nsuppliercode', 'ncategorycode', 'ntypecode', 'ssuppliercatname', 'smaterialcatname',\r\n            'sremarks', 'ntransactionstatus'];\r\n        this.supplierContactFieldList = ['ssuppliercontactname', 'sdescription', 'sdesignation', 'saddress1', 'saddress2', 'saddress3',\r\n            'sphoneno', 'smobileno', 'sfaxno', 'semail', 'ndefaultstatus', 'ncountrycode'];\r\n        this.suppliercatColumnList = [{ \"idsName\": \"IDS_SUPPLIERCATNAME\", \"dataField\": \"ssuppliercatname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" }];\r\n        this.materialcatColumnList = [{ \"idsName\": \"IDS_MATERIALCATNAME\", \"dataField\": \"smaterialcatname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" }];\r\n        this.supplierContactColumnList = [{ \"idsName\": \"IDS_SUPPLIERCONTACTNAME\", \"dataField\": \"ssuppliercontactname\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n        { \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"250px\",\"mandatory\": false,\"controlType\": \"checkbox\" }\r\n        ]\r\n        this.validationSuppliercatColumnList = [{ \"idsName\": \"IDS_SUPPLIERCATNAME\", \"dataField\": \"nsuppliercatcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n        this.validationMaterialcatColumnList = [{ \"idsName\": \"IDS_MATERIALCATNAME\", \"dataField\": \"nmaterialcatcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n\r\n\r\n    }\r\n    supplierDataStateChange = (event) => {\r\n        this.setState({\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n    materialDataStateChange = (event) => {\r\n        this.setState({\r\n            dataStateMaterial: event.dataState\r\n        });\r\n    }\r\n    render() {\r\n        const mandatoryFields = [];\r\n        let matmandatoryFields = [];\r\n\r\n        this.validationSuppliercatColumnList.forEach(item => item.mandatory === true ?\r\n            mandatoryFields.push(item) : \"\"\r\n        );\r\n        //ALPD-849 Fix\r\n        if (this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_MATERIALCATEGORY\" })) {\r\n            this.validationMaterialcatColumnList.forEach(item => item.mandatory === true ?\r\n                matmandatoryFields.push(item) : \"\"\r\n            );\r\n        }\r\n        else if (this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERFILE\" })) {\r\n            if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n                matmandatoryFields = [\r\n                    { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                    { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n                ];\r\n            } else {\r\n                // if (this.props.operation !== 'update') {\r\n                matmandatoryFields = [{ \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" }];\r\n                // }\r\n            }\r\n        }\r\n        else if (this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCONTACT\" })) {\r\n            matmandatoryFields = [{ \"idsName\": \"IDS_SUPPLIERCONTACT\", \"dataField\": \"ssuppliercontactname\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n            ]\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <Row className=\"no-gutters\">\r\n                    <Col md={12}>\r\n                        <Card className=\"at-tabs\">\r\n                            <CustomTabs tabDetail={this.tabDetail()} onTabChange={this.onTabChange} />\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal show={this.props.openChildModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.props.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        updateStore={this.props.updateStore}\r\n                        esign={this.props.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCATEGORY\" }) ? mandatoryFields : matmandatoryFields || []}\r\n                        addComponent={this.props.loadEsign ?\r\n                            <Esign operation={this.props.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> :\r\n                            this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCATEGORY\" }) ?\r\n                                <AddSupplierCategory selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onComboChange={this.onComboChange}\r\n                                    selectedSupplierCategory={this.props.masterData.selectedSupplierCategory}\r\n                                    supplierCategory={this.state.supplierCategory || []} //{this.props.supplierCategory || []}\r\n                                /> :\r\n                                this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_MATERIALCATEGORY\" }) ?\r\n                                    <AddMaterialCategory selectedRecord={this.state.selectedRecord || {}}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        onComboChange={this.onComboChange}\r\n                                        operation={this.props.operation}\r\n                                        selectedMaterialCategory={this.props.masterData.selectedMaterialCategory}\r\n                                        materialCategory={this.state.materialCategory}//{this.props.materialCategory}\r\n                                    /> :\r\n                                    this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCONTACT\" }) ?\r\n                                        <AddSupplierContact\r\n                                            selectedRecord={this.state.selectedRecord || {}}\r\n                                            onInputOnChange={this.onInputOnChange}\r\n                                            onComboChange={this.onComboChange}\r\n                                            operation={this.props.operation}\r\n                                            formatMessage={this.props.intl.formatMessage}\r\n                                            selectedSupplierContact={this.props.masterData.selectedSupplierContact}\r\n                                            countryList={this.state.countryList || []}\r\n                                        /> :\r\n                                        this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERFILE\" }) ?\r\n                                            <AddSupplierFile\r\n                                                selectedRecord={this.state.selectedRecord || {}}\r\n                                                onInputOnChange={this.onInputOnChange}\r\n                                                onDrop={this.onDropSupplierFile}\r\n                                                onDropAccepted={this.onDropAccepted}\r\n                                                deleteAttachment={this.deleteAttachment}\r\n                                                actionType={this.state.actionType}\r\n                                                onComboChange={this.onComboChange}\r\n                                                linkMaster={this.props.linkMaster}\r\n                                                editFiles={this.props.editFiles}\r\n                                                maxSize={20}\r\n                                                // maxFiles={this.props.operation === \"update\" ? 1 : 3}\r\n                                                // multiple={this.props.operation === \"update\" ? false : true}\r\n                                                maxFiles={1}\r\n                                                multiple={false}\r\n                                                label={this.props.intl.formatMessage({ id: \"IDS_SUPPLIERFILE\" })}\r\n                                                name=\"supplierfilename\"\r\n                                            /> : \"\"\r\n                        }\r\n\r\n                    />\r\n                }\r\n            </>\r\n\r\n        )\r\n\r\n    }\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    onDropSupplierFile = (attachedFiles, fieldName, maxSize) => {\r\n\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n\r\n\r\n    tabDetail = () => {\r\n        const addSupCatId = this.props.controlMap.has(\"AddSupplierCategory\") && this.props.controlMap.get(\"AddSupplierCategory\").ncontrolcode\r\n\r\n        const deleteSupCatId = this.props.controlMap.has(\"DeleteSupplierCategory\") && this.props.controlMap.get(\"DeleteSupplierCategory\").ncontrolcode\r\n\r\n        const addMatCatId = this.props.controlMap.has(\"AddMaterialCategory\") && this.props.controlMap.get(\"AddMaterialCategory\").ncontrolcode\r\n\r\n        const deleteMatCatId = this.props.controlMap.has(\"DeleteMaterialCategory\") && this.props.controlMap.get(\"DeleteMaterialCategory\").ncontrolcode\r\n\r\n        const addSupCotId = this.props.controlMap.has(\"AddSupplierContact\") && this.props.controlMap.get(\"AddSupplierContact\").ncontrolcode\r\n\r\n        const editSupCotId = this.props.controlMap.has(\"EditSupplierContact\") && this.props.controlMap.get(\"EditSupplierContact\").ncontrolcode\r\n\r\n        const deleteSupCotId = this.props.controlMap.has(\"DeleteSupplierContact\") && this.props.controlMap.get(\"DeleteSupplierContact\").ncontrolcode\r\n\r\n        const supcatAddParam = {\r\n            screenName: this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCATEGORY\" }), operation: \"create\", primaryKeyField: \"nsuppliercatcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addSupCatId\r\n        };\r\n\r\n        const supcatDeleteParam = { screenName: this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCATEGORY\" }), methodUrl: \"SupplierMatrix\", operation: \"delete\", ncontrolCode: deleteSupCatId };\r\n\r\n        const matericatAddParam = {\r\n            screenName: this.props.intl.formatMessage({ id: \"IDS_MATERIALCATEGORY\" }), operation: \"create\", primaryKeyField: \"nmaterialcatcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addMatCatId\r\n        };\r\n\r\n        const materialcatDeleteParam = { screenName: this.props.intl.formatMessage({ id: \"IDS_MATERIALCATEGORY\" }), methodUrl: \"SupplierMatrix\", operation: \"delete\", ncontrolCode: deleteMatCatId };\r\n\r\n        const supcotAddParam = {\r\n            screenName: this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCONTACT\" }), operation: \"create\", primaryKeyField: \"nsuppliercontactcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addSupCotId\r\n        };\r\n        const editcotAddParam = {\r\n            screenName: this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCONTACT\" }), operation: \"update\", primaryKeyField: \"nsuppliercontactcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: editSupCotId\r\n        };\r\n\r\n\r\n        const supcotDeleteParam = { screenName: this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCONTACT\" }), methodUrl: \"Supplier\", operation: \"delete\", ncontrolCode: deleteSupCotId };\r\n\r\n        const tabMap = new Map();\r\n        const detailedFieldList = [\r\n            { \"idsName\": \"IDS_DESIGNATION\", \"dataField\": \"sdesignation\", \"width\": \"150px\", \"mandatory\": false, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n            { \"idsName\": \"IDS_MOBILENO\", \"dataField\": \"smobileno\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n            { \"idsName\": \"IDS_TELEPHONENO\", \"dataField\": \"stelephoneno\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n            { \"idsName\": \"IDS_EMAIL\", \"dataField\": \"semail\", \"width\": \"150px\", \"mandatory\": false, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"150px\", \"mandatory\": false, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n            { \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"250px\" },\r\n\r\n        ];\r\n\r\n        tabMap.set(\"IDS_SUPPLIERCATEGORY\", <SupplierTabs userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            addId={addSupCatId}\r\n            addParam={supcatAddParam}\r\n            comboDataService={this.props.getSupplierCategoryComboDataService}\r\n            addTitleIDS={\"IDS_SUPPLIERCATEGORY\"}\r\n            addTitleDefaultMsg={'SupplierCategory'}\r\n            primaryKeyField={\"nsuppliermatrixcode\"}\r\n            masterData={this.props.masterData}\r\n            primaryList={\"SupplierCategory\"}\r\n            dataResult={process(this.props.masterData[\"SupplierCategory\"]||[], this.state.dataState)}\r\n            // dataState={this.state.dataState}\r\n            // dataStateChange={this.supplierDataStateChange}\r\n            dataState={(this.props.screenName === undefined || this.props.screenName === '' || this.props.screenName === \"SupplierCategory\" || this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCATEGORY\" })) ? this.state.dataState : { skip: 0 }}\r\n            dataStateChange={(event) => this.setState({ dataState: event.dataState })}\r\n            columnList={this.suppliercatColumnList}\r\n            methodUrl={\"SupplierMatrix\"}\r\n            deleteRecord={this.deleteRecord}\r\n            deleteParam={supcatDeleteParam}\r\n        //selectedId={this.props.selectedId}\r\n        />)\r\n        tabMap.set(\"IDS_MATERIALCATEGORY\", <SupplierTabs userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            addId={addMatCatId}\r\n            addParam={matericatAddParam}\r\n            comboDataService={this.props.getMaterialCategoryComboDataService}\r\n            addTitleIDS={\"IDS_MATERIALCATEGORY\"}\r\n            addTitleDefaultMsg={'MaterialCategory'}\r\n            primaryKeyField={\"nsuppliermatrixcode\"}\r\n            masterData={this.props.masterData}\r\n            primaryList={\"MaterialCategory\"}\r\n            dataResult={process(this.props.masterData[\"MaterialCategory\"]||[], this.state.dataStateMaterial)}\r\n            // dataState={this.state.dataStateMaterial}\r\n            // dataStateChange={this.materialDataStateChange}\r\n            dataState={(this.props.screenName === undefined || this.props.screenName === \"MaterialCategory\" || this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_MATERIALCATEGORY\" })) ? this.state.dataStateMaterial : { skip: 0 }}\r\n            dataStateChange={(event) => this.setState({ dataStateMaterial: event.dataState })}\r\n            columnList={this.materialcatColumnList}\r\n            methodUrl={\"SupplierMatrix\"}\r\n            deleteRecord={this.deleteRecord}\r\n            deleteParam={materialcatDeleteParam}\r\n        //selectedId={this.props.selectedId}\r\n        />)\r\n        tabMap.set(\"IDS_SUPPLIERCONTACT\", <SupplierTabs userRoleControlRights={this.props.userRoleControlRights}\r\n            selectedId = {this.props.selectedId}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            fetchRecord={this.props.getSupplierContactComboDataService}\r\n            addId={addSupCotId}\r\n            editId={editSupCotId}\r\n            editParam={editcotAddParam}\r\n            addParam={supcotAddParam}\r\n            comboDataService={this.props.getSupplierContactComboDataService}\r\n            addTitleIDS={\"IDS_SUPPLIERCONTACT\"}\r\n            addTitleDefaultMsg={'SupplierContact'}\r\n            primaryKeyField={\"nsuppliercontactcode\"}\r\n            masterData={this.props.masterData}\r\n            primaryList={\"SupplierContact\"}\r\n            dataResult={process(this.props.masterData[\"SupplierContact\"]||[], this.state.dataState)}\r\n            // dataState={this.state.dataStateMaterial}\r\n            // dataStateChange={this.materialDataStateChange}\r\n            dataState={(this.props.screenName === undefined || supcotAddParam.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCONTACT\" })) ? this.state.dataState : { skip: 0 }}\r\n            dataStateChange={(event) => this.setState({ dataState: event.dataState })}\r\n            columnList={this.supplierContactColumnList}\r\n            methodUrl={\"SupplierContact\"}\r\n            deleteRecord={this.deleteRecord}\r\n            deleteParam={supcotDeleteParam}\r\n            detailedFieldList={detailedFieldList}\r\n        //selectedId={this.props.selectedId}\r\n        />)\r\n\r\n        tabMap.set(\"IDS_FILE\",\r\n            <SupplierFileTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                userInfo={this.props.userInfo}\r\n                inputParam={this.props.inputParam}\r\n                deleteRecord={this.deleteRecord}\r\n                supplierFile={this.props.masterData.supplierFile || []}\r\n                getAvailableData={this.props.getAvailableData}\r\n                addSupplierFile={this.props.addSupplierFile}\r\n                viewSupplierFile={this.viewSupplierFile}\r\n                defaultRecord={this.defaultRecord}\r\n                screenName={this.props.intl.formatMessage({ id: \"IDS_SUPPLIERFILE\" })}\r\n                settings={this.props.settings}\r\n            />);\r\n        return tabMap;\r\n    }\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        let selectedId = this.props.selectedId;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = '';\r\n                selectedRecord['esigncomments'] = '';\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedId = null;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord,selectedId }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;;\r\n\r\n\r\n        if (fieldName === \"nsuppliercatcode\") {\r\n            let selectedSupplierCategory = comboData;\r\n            this.setState({ selectedRecord, selectedSupplierCategory });\r\n        }\r\n        if (fieldName === \"nmaterialcatcode\") {\r\n            let selectedMaterialCategory = comboData;\r\n            this.setState({ selectedRecord, selectedMaterialCategory });\r\n        }\r\n        if (fieldName === \"ncountrycode\") {\r\n            let selectedSupplierContact = comboData;\r\n            this.setState({ selectedRecord, selectedSupplierContact });\r\n        }\r\n    }\r\n    viewSupplierFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                supplierfile: filedata,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"supplier\",\r\n            operation: \"view\",\r\n            methodUrl: \"AttachedSupplierFile\",\r\n            screenName: \"Supplier File\"\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n    onInputOnChange = (event, optional) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"ntransactionstatus\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            // else if (event.target.name === \"nlockmode\")\r\n            //     selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\r\n            else\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else if (event.target.type === 'radio') {\r\n            selectedRecord[event.target.name] = optional;\r\n        }\r\n        else {\r\n            if (event.target.name === \"stelephoneno\" || event.target.name === \"smobileno\") {\r\n                if (event.target.value !== \"\") {\r\n                    event.target.value = validatePhoneNumber(event.target.value);\r\n                    selectedRecord[event.target.name] = event.target.value !== \"\" ? event.target.value : selectedRecord[event.target.name];\r\n                }\r\n                else {\r\n                    selectedRecord[event.target.name] = event.target.value;\r\n                }\r\n            }\r\n            else\r\n                selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n\r\n            let isOpen = false;\r\n            if (this.props.errorCode !== undefined && (this.state.operation === \"create\" || this.state.operation === \"update\")) {\r\n                isOpen = true;\r\n            }\r\n            let { dataState, dataStateMaterial } = this.state;\r\n            if (this.props.dataState === undefined) {\r\n                dataState = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5, filter: undefined, sort: undefined }\r\n                dataStateMaterial = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5, filter: undefined, sort: undefined }\r\n            }\r\n            this.setState({ isOpen, activeTab: 'SupplierCategory-tab', dataState, dataStateMaterial });\r\n        }\r\n\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n\r\n            const countryList = constructOptionList(this.props.selectedRecord.countryList || [], \"ncountrycode\",\r\n                \"scountryname\", undefined, undefined, undefined);\r\n            const countryListSupplier = countryList.get(\"OptionList\");\r\n            this.setState({ selectedRecord: this.props.selectedRecord, countryList: countryListSupplier });\r\n        }\r\n        let { dataState, dataStateMaterial } = this.state;\r\n        if (this.props.dataState !== previousProps.dataState && this.props.dataState !== dataState) {\r\n            dataState = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5 }\r\n            dataStateMaterial = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5 }\r\n            this.setState({ dataState, dataStateMaterial });\r\n        }\r\n\r\n        // {\r\n        //     dataState={...dataState,filter:undefined,sort:undefined}\r\n        //     dataStateMaterial={...dataStateMaterial,filter:undefined,sort:undefined}\r\n        //     this.setState({ dataState, dataStateMaterial });\r\n        // }\r\n        if (this.props.supplierCategory !== previousProps.supplierCategory || this.props.materialCategory !== previousProps.materialCategory) {\r\n\r\n            const supplierCategory = constructOptionList(this.props.supplierCategory || [], \"nsuppliercatcode\",\r\n                \"ssuppliercatname\", undefined, undefined, undefined);\r\n            const supplierCategoryList = supplierCategory.get(\"OptionList\");\r\n\r\n            const materialCategory = constructOptionList(this.props.materialCategory || [], \"nmaterialcatcode\",\r\n                \"smaterialcatname\", undefined, undefined, undefined);\r\n            const materialCategoryList = materialCategory.get(\"OptionList\");\r\n\r\n            this.setState({ supplierCategory: supplierCategoryList, materialCategory: materialCategoryList });\r\n        }\r\n    }\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        //add / edit  \r\n        if (this.state.selectedRecord['semail'] ? validateEmail(this.state.selectedRecord['semail']) : true) {\r\n\r\n        let inputParam = {};\r\n\r\n        if (this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCATEGORY\" })) {\r\n            inputParam = this.saveSupplierCategory(saveType, formRef);\r\n        }\r\n        else if (this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_MATERIALCATEGORY\" })) {\r\n            inputParam = this.saveMaterial(saveType, formRef);\r\n        }\r\n        else if (this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCONTACT\" })) {\r\n            inputParam = this.saveSupplierContact(saveType, formRef);\r\n        }\r\n        else if (this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERFILE\" })) {\r\n            inputParam = this.onSaveSupplierFile(saveType, formRef);\r\n        }\r\n\r\n\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n        }\r\n    } else {\r\n        toast.warn(this.props.intl.formatMessage({ id: \"IDS_ENTERVALIDEMAIL\" }));\r\n}\r\n\r\n }\r\n\r\n    saveSupplierCategory(saveType, formRef) {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\r\n        inputData[\"suppliermatrix\"] = {};\r\n        let dataState = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5 };\r\n\r\n        let suppliermatrixArray = []\r\n        suppliermatrixArray = this.state.selectedRecord.nsuppliercatcode.map(item => {\r\n            let suppliermat = {}\r\n            suppliermat[\"nsuppliercode\"] = this.props.masterData.SelectedSupplier.nsuppliercode; //this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\r\n            suppliermat[\"ntypecode\"] = 1;\r\n            suppliermat[\"sremarks\"] = \"\";\r\n            suppliermat[\"ntransactionstatus\"] = transactionStatus.ACTIVE;\r\n            suppliermat[\"ncategorycode\"] = item.value\r\n            //suppliermatrixArray.push(suppliermat);\r\n            return suppliermat;\r\n        });\r\n        inputData['suppliermatrix'] = suppliermatrixArray;\r\n\r\n        const inputParam = {\r\n            classUrl: \"suppliermatrix\",\r\n            methodUrl: \"SupplierMatrix\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef, dataState\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    saveMaterial(saveType, formRef) {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\r\n        inputData[\"suppliermatrix\"] = {};\r\n        let dataStateMaterial = undefined;\r\n\r\n        let suppliermatrixArray = []\r\n        suppliermatrixArray = this.state.selectedRecord.nmaterialcatcode.map(item => {\r\n            let suppliermat = {}\r\n            suppliermat[\"nsuppliercode\"] = this.props.masterData.SelectedSupplier.nsuppliercode; //this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\r\n            suppliermat[\"ntypecode\"] = 2;\r\n            suppliermat[\"sremarks\"] = \"\";\r\n            suppliermat[\"ntransactionstatus\"] = transactionStatus.ACTIVE;\r\n            suppliermat[\"ncategorycode\"] = item.value\r\n            //suppliermatrixArray.push(suppliermat);\r\n            return suppliermat;\r\n        });\r\n        inputData['suppliermatrix'] = suppliermatrixArray;\r\n\r\n        const inputParam = {\r\n            classUrl: \"suppliermatrix\",\r\n            methodUrl: \"SupplierMatrix\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef, dataStateMaterial\r\n        }\r\n        return inputParam;\r\n    }\r\n    saveSupplierContact(saveType, formRef) {\r\n        let inputData = [];\r\n        let postParam={};\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\r\n        inputData[\"suppliercontact\"] = {};\r\n        let dataState = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5 };\r\n       // let suppliercontactArray = []\r\n\r\n        let suppliermat = {}\r\n        if (this.props.operation === \"update\") {\r\n            postParam = { inputListName: \"Suppliercontact\", selectedObject: \"SupplierContact\", primaryKeyField: \"nsuppliercontactcode\" };\r\n\r\n            inputData[\"nsuppliercontactcode\"] = this.state.selectedRecord.nsuppliercontactcode;\r\n            suppliermat[\"nsuppliercode\"] = this.props.masterData.SelectedSupplier.nsuppliercode; //this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\r\n            suppliermat[\"sdescription\"] = this.state.selectedRecord.sdescription;\r\n            suppliermat[\"sdesignation\"] = this.state.selectedRecord.sdesignation;\r\n            suppliermat[\"smobileno\"] = this.state.selectedRecord.smobileno;\r\n            suppliermat[\"stelephoneno\"] = this.state.selectedRecord.stelephoneno;\r\n            suppliermat[\"semail\"] = this.state.selectedRecord.semail;\r\n            suppliermat[\"ndefaultstatus\"] = this.state.selectedRecord.ndefaultstatus ? this.state.selectedRecord.ndefaultstatus : \"4\";\r\n            suppliermat[\"ssuppliercontactname\"] = this.state.selectedRecord.ssuppliercontactname;\r\n            suppliermat[\"nsuppliercontactcode\"] = this.state.selectedRecord.nsuppliercontactcode;\r\n            inputData['suppliercontact'] = suppliermat;\r\n\r\n        }\r\n        else {\r\n            suppliermat[\"nsuppliercode\"] = this.props.masterData.SelectedSupplier.nsuppliercode; //this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\r\n            suppliermat[\"sdescription\"] = this.state.selectedRecord.sdescription;\r\n            suppliermat[\"sdesignation\"] = this.state.selectedRecord.sdesignation;\r\n            suppliermat[\"smobileno\"] = this.state.selectedRecord.smobileno;\r\n            suppliermat[\"stelephoneno\"] = this.state.selectedRecord.stelephoneno;\r\n            suppliermat[\"semail\"] = this.state.selectedRecord.semail;\r\n            suppliermat[\"ndefaultstatus\"] = this.state.selectedRecord.ndefaultstatus ? this.state.selectedRecord.ndefaultstatus : \"4\";\r\n            suppliermat[\"ssuppliercontactname\"] = this.state.selectedRecord.ssuppliercontactname;\r\n\r\n            //suppliermat[\"ncategorycode\"] = item.value\r\n            //   suppliercontactArray.push(suppliermat);\r\n            //  return suppliermat;\r\n\r\n            inputData['suppliercontact'] = suppliermat;\r\n        }\r\n        let inputParam = {\r\n            classUrl: \"supplier\",\r\n            methodUrl: \"SupplierContact\",\r\n            inputData: inputData,\r\n            operation: this.props.operation,postParam, saveType, formRef, dataState\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n\r\n\r\n    onSaveSupplierFile = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = transactionStatus.NO;\r\n        let supplierFileArray = [];\r\n        let supplierFile = {\r\n            nsuppliercode: this.props.masterData.SelectedSupplier.nsuppliercode,\r\n            nsupplierfilecode: selectedRecord.nsupplierfilecode ? selectedRecord.nsupplierfilecode : 0,\r\n            nstatus: transactionStatus.ACTIVE,\r\n            nattachmenttypecode,\r\n           // ndefaultstatus: selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] ? selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] : 4\r\n        };\r\n        const formData = new FormData();\r\n        if (nattachmenttypecode === attachmentType.FTP) {\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                acceptedFiles.forEach((file, index) => {\r\n                    const tempData = Object.assign({}, supplierFile);\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                    const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                    const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                    const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.nsupplierfilecode && selectedRecord.nsupplierfilecode > 0\r\n                        && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                    tempData[\"sfilename\"] = file.name;\r\n                    tempData[\"sdescription\"] = selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\";\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    tempData[\"nfilesize\"] = file.size;\r\n                    formData.append(\"uploadedFile\" + index, file);\r\n                    formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                    supplierFileArray.push(tempData);\r\n                });\r\n                formData.append(\"filecount\", acceptedFiles.length);\r\n                isFileEdited = transactionStatus.YES;\r\n            } else {\r\n                supplierFile[\"sfilename\"] = selectedRecord.sfilename;\r\n                supplierFile[\"sdescription\"] = selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\";\r\n                supplierFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                supplierFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                supplierFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                supplierFileArray.push(supplierFile);\r\n            }\r\n        } else {\r\n            supplierFile[\"sfilename\"] = selectedRecord.slinkfilename.trim();\r\n            supplierFile[\"sdescription\"] = selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\";\r\n            supplierFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            supplierFile[\"ssystemfilename\"] = \"\";\r\n            supplierFile[\"nfilesize\"] = 0;\r\n            supplierFileArray.push(supplierFile);\r\n        }\r\n        formData.append(\"isFileEdited\", isFileEdited);\r\n        formData.append(\"supplierfile\", JSON.stringify(supplierFileArray));\r\n        // formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\r\n\r\n\r\n\r\n        let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"Supplier\", selectedObject: \"SelectedSupplier\", primaryKeyField: \"nsuppliercode\" };\r\n            selectedId = selectedRecord[\"nsupplierfilecode\"];\r\n        }\r\n        const inputParam = {\r\n            inputData: { userinfo: this.props.userInfo },\r\n            formData: formData,\r\n            isFileupload: true,\r\n            operation: this.props.operation,\r\n            classUrl: \"supplier\",\r\n            saveType, formRef, methodUrl: \"SupplierFile\", postParam\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    deleteRecord = (supplierparam) => {\r\n        if (this.props.masterData.SelectedSupplier.ntransactionstatus === transactionStatus.RETIRED) {\r\n            toast.warn(this.props.intl.formatMessage({ id: this.props.masterData.SelectedSupplier.stranstatus }));\r\n        }\r\n        else {\r\n            let inputParam = {};\r\n            if (this.props.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERFILE\" })) {\r\n                inputParam = {\r\n                    classUrl: \"supplier\",\r\n                    methodUrl: supplierparam.methodUrl,\r\n                    inputData: {\r\n                        [supplierparam.methodUrl.toLowerCase()]: supplierparam.selectedRecord,\r\n                        \"userinfo\": this.props.userInfo,\r\n\r\n                    },\r\n                    operation: supplierparam.operation,\r\n                    //dataState: this.state.dataState,\r\n                    //dataStateMaterial: this.state.dataStateMaterial\r\n                    dataState: this.state.dataState\r\n                }\r\n            } else if (supplierparam.screenName === this.props.intl.formatMessage({ id: \"IDS_SUPPLIERCONTACT\" })) {\r\n                inputParam = {\r\n                    classUrl: \"supplier\",\r\n                    methodUrl: \"SupplierContact\",\r\n                    inputData: {\r\n                        [supplierparam.methodUrl.toLowerCase()]: supplierparam.selectedRecord,\r\n                        \"userinfo\": this.props.userInfo,\r\n\r\n                    },\r\n                    operation: supplierparam.operation,\r\n                    //dataState: this.state.dataState,\r\n                    //dataStateMaterial: this.state.dataStateMaterial\r\n                    dataState: this.state.dataState\r\n                }\r\n            }\r\n            else {\r\n                inputParam = {\r\n                    classUrl: \"suppliermatrix\",\r\n                    methodUrl: supplierparam.methodUrl,\r\n                    inputData: {\r\n                        [supplierparam.methodUrl.toLowerCase()]: supplierparam.selectedRecord,\r\n                        \"userinfo\": this.props.userInfo,\r\n\r\n                    },\r\n                    operation: supplierparam.operation,\r\n                    //dataState: this.state.dataState,\r\n                    //dataStateMaterial: this.state.dataStateMaterial\r\n                    dataState: this.state.dataState\r\n                }\r\n            }\r\n\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, supplierparam.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                        openChildModal: true, screenName: supplierparam.screenName, operation: supplierparam.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n        }\r\n    }\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n        });\r\n    }\r\n\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n}\r\n\r\nexport default injectIntl(SupplierMaterialCategoryTab);\r\n\r\n"]},"metadata":{},"sourceType":"module"}