{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from\"react-redux\";import{toast}from\"react-toastify\";import{injectIntl,FormattedMessage}from\"react-intl\";import{Row,Col,Card,Nav,FormGroup,FormLabel}from\"react-bootstrap\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faPencilAlt,faTrashAlt}from\"@fortawesome/free-solid-svg-icons\";import DataGrid from\"../../components/data-grid/data-grid.component\";import Fields from\"../../components/PatientMasterFields.json\";import{Query,Builder,BasicConfig,BasicFuncs,Utils as QbUtils}from\"react-awesome-query-builder\";import{callService,crudMaster,validateEsignCredential,updateStore,getPatientDetail,getPatientComboService,filterColumnData,getTestParameter,getPatientReport,getPatientDetailsByFilterQuery}from\"../../actions\";import{DEFAULT_RETURN}from\"../../actions/LoginTypes\";import{showEsign,getControlMap,validatePhoneNumber,ageCalculate,formatInputDate}from\"../../components/CommonScript\";import{transactionStatus}from\"../../components/Enumeration\";import ListMaster from\"../../components/list-master/list-master.component\";import SlideOutModal from\"../../components/slide-out-modal/SlideOutModal\";import{ReactComponent as Reports}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/image/report-Icon.svg\";import{ReadOnlyText,ContentPanel}from\"../../components/App.styles\";import AddPatient from\"./AddPatient\";import Esign from\"../audittrail/Esign\";import ConfirmMessage from\"../../components/confirm-alert/confirm-message.component\";import ReactTooltip from\"react-tooltip\";import{process}from\"@progress/kendo-data-query\";import FilterQueryBuilder from\"../../components/FilterQueryBuilder\";import AddFilteredPatient from\"./AddFilteredPatient\";//import Filtercomponent from '../../components/Filtercomponent';\n// import FilterDemo from \"./FilterDemo\";\n// import \"antd/dist/antd.css\";\n// import 'react-awesome-query-builder/css/styles.scss';\nvar mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var PatientMaster=/*#__PURE__*/function(_React$Component){_inherits(PatientMaster,_React$Component);var _super=_createSuper(PatientMaster);function PatientMaster(props){var _this;_classCallCheck(this,PatientMaster);_this=_super.call(this,props);_this.handleClick=function(){var obj={typeName:DEFAULT_RETURN,data:{openAdvFilter:true,openModal:true,slideResult:undefined}};_this.setState({config:undefined,tree:undefined});_this.props.updateStore(obj);};_this.dataStateChange=function(event){_this.setState({dataState:event.dataState});};_this.handlePageChange=function(event){_this.setState({kendoSkip:event.skip,kendoTake:event.take});};_this.ConfirmDelete=function(deleteId){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.deletePatient(\"Patient\",_this.props.Login.masterData.SelectedPatient,\"delete\",deleteId);});};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;var openAdvFilter=_this.props.Login.openAdvFilter;var slideResult=_this.props.Login.slideResult;var tree=_this.state.tree;var config=_this.state.config;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;}}else{openAdvFilter=false;openModal=false;selectedRecord={};slideResult={};config=undefined;tree=undefined;_this.setState({config:config,tree:tree});}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null,openAdvFilter:openAdvFilter,slideResult:slideResult,config:config,tree:tree}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});};_this.onNumericInputOnChange=function(value,name){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});};_this.onChange=function(immutableTree,config){var selectedRecord=_this.state.selectedRecord||{};// this.setState({ tree: immutableTree, config: config });\nselectedRecord['filterquery']=QbUtils.sqlFormat(immutableTree,config);// const jsonTree = QbUtils.getTree(immutableTree);\n// <div>SQL where: <pre>{selectedRecord['filterquery']}</pre></div>\n_this.setState({tree:immutableTree,config:config,selectedRecord:selectedRecord});};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type===\"checkbox\"){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{if(event.target.name===\"sphoneno\"){if(event.target.value!==\"\"){event.target.value=validatePhoneNumber(event.target.value);selectedRecord[event.target.name]=event.target.value!==\"\"?event.target.value:selectedRecord[event.target.name];}else{selectedRecord[event.target.name]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}}_this.setState({selectedRecord:selectedRecord});};_this.handleDateChange=function(dateName,dateValue){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;var age=ageCalculate(dateValue);selectedRecord[\"sage\"]=age;_this.setState({selectedRecord:selectedRecord});};_this.onSaveGetClick=function(){var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;inputData[\"filterquery\"]=_this.state.selectedRecord['filterquery'];_this.searchRef.current.value=\"\";var paramFlag=true;var inputParam={classUrl:\"patient\",methodUrl:\"ByPatient\",inputData:inputData,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData}}};_this.props.updateStore(updateInfo);}else{_this.props.getPatientDetailsByFilterQuery(inputParam,masterData);}};_this.onSaveClick=function(saveType,formRef){var patientData=[];patientData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"PatientList\",selectedObject:\"SelectedPatient\",primaryKeyField:\"npatientcode\"};if(_this.props.Login.operation===\"update\"){postParam[\"primaryKeyValue\"]=_this.props.Login.masterData.SelectedPatient.npatientcode;patientData[\"patient\"]={npatientcode:_this.props.Login.masterData.SelectedPatient.npatientcode,sfirstname:_this.state.selectedRecord.sfirstname,slastname:_this.state.selectedRecord.slastname,snationalid:_this.state.selectedRecord.snationalid,sage:_this.state.selectedRecord.sage,sphoneno:_this.state.selectedRecord.sphoneno,saddress:_this.state.selectedRecord.saddress,sfathername:_this.state.selectedRecord.sfathername//    \"ddob\": formatInputDate(\n//     this.state.selectedRecord[\"ddob\"],false)\n};}else{patientData[\"patient\"]={nsitecode:_this.props.Login.userInfo.nmastersitecode};_this.patientFieldList.map(function(item){return patientData[\"patient\"][item]=_this.state.selectedRecord[item];});}patientData[\"patient\"][\"ngendercode\"]=_this.state.selectedRecord[\"ngendercode\"]?_this.state.selectedRecord[\"ngendercode\"].value:transactionStatus.NA;// if (patientData[\"patient\"][\"ddob\"] !== undefined\n//     && patientData[\"patient\"][\"ddob\"] !== null && patientData[\"patient\"][\"ddob\"] !== \"\") {\n//     patientData[\"patient\"][\"ddob\"] = formatInputDate(patientData[\"patient\"][\"ddob\"],false);\n// }\nif(_this.state.selectedRecord[\"ddob\"]){patientData[\"patient\"][\"ddob\"]=formatInputDate(_this.state.selectedRecord[\"ddob\"],false);}var inputParam={classUrl:\"patient\",methodUrl:\"Patient\",inputData:patientData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.deletePatient=function(methodUrl,selectedPatient,operation,ncontrolCode){var postParam={inputListName:\"PatientList\",selectedObject:\"SelectedPatient\",primaryKeyField:\"npatientcode\",primaryKeyValue:selectedPatient.npatientcode,fetchUrl:\"patient/getPatient\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:methodUrl,postParam:postParam,inputData:{userinfo:_this.props.Login.userInfo,patient:selectedPatient},operation:operation,isClearSearch:_this.props.Login.isClearSearch};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"IDS_PATIENTMASTER\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.validateEsign=function(){var inputParam={inputData:{userinfo:_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.handleExpandChange=function(row,dataState){var viewParam={userInfo:_this.props.Login.userInfo,primaryKeyField:\"npreregno\",masterData:_this.props.Login.masterData};_this.props.getTestParameter(_objectSpread(_objectSpread({},viewParam),{},{dataState:dataState,primaryKeyValue:row[\"dataItem\"][viewParam.primaryKeyField],viewRow:row[\"dataItem\"]}));};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputParam={inputData:{userinfo:_this.props.Login.userInfo},classUrl:\"patient\",methodUrl:\"Patient\",displayName:\"IDS_PATIENTMASTER\",userInfo:_this.props.Login.userInfo,isClearSearch:_this.props.Login.isClearSearch};_this.props.callService(inputParam);};_this.state={masterStatus:\"\",error:\"\",selectedRecord:{},operation:\"\",selectedPatient:undefined,screenName:undefined,userRoleControlRights:[],controlMap:new Map(),isClearSearch:false,dataState:{skip:0,take:5},tree:undefined,config:undefined,kendoSkip:0,kendoTake:5,fields:{\"patientmaster.sfirstname\":{\"label\":_this.props.intl.formatMessage({id:\"IDS_FIRSTNAME\"}),\"type\":\"text\",\"valueSources\":[\"value\",\"func\"],\"mainWidgetProps\":{\"valueLabel\":\"Name\",\"valuePlaceholder\":\"Enter First Name\"}},\"patientmaster.slastname\":{\"label\":_this.props.intl.formatMessage({id:\"IDS_LASTNAME\"}),\"type\":\"text\",\"valueSources\":[\"value\",\"func\"],\"mainWidgetProps\":{\"valueLabel\":\"Name\",\"valuePlaceholder\":\"Enter Last Name\"}},\"patientmaster.spatientid\":{\"label\":_this.props.intl.formatMessage({id:\"IDS_PATIENTID\"}),\"type\":\"text\",\"valueSources\":[\"value\",\"func\"],\"mainWidgetProps\":{\"valueLabel\":\"Name\",\"valuePlaceholder\":\"Enter Patient Id\"}},\"patientmaster.snationalid\":{\"label\":_this.props.intl.formatMessage({id:\"IDS_NATIONALID\"}),\"type\":\"text\",\"valueSources\":[\"value\",\"func\"],\"mainWidgetProps\":{\"valueLabel\":\"Name\",\"valuePlaceholder\":\"Enter National Id\"}},\"patientmaster.sfathername\":{\"label\":_this.props.intl.formatMessage({id:\"IDS_FATHERGUARDIANNAME\"}),\"type\":\"text\",\"valueSources\":[\"value\",\"func\"],\"mainWidgetProps\":{\"valueLabel\":\"Name\",\"valuePlaceholder\":\"Enter Father Name\"}},\"patientmaster.ddob\":{\"label\":_this.props.intl.formatMessage({id:\"IDS_DATEOFBIRTH\"}),\"type\":\"date\",\"valueSources\":[\"value\"]},\"patientmaster.sage\":{\"label\":_this.props.intl.formatMessage({id:\"IDS_AGE\"}),\"type\":\"text\",\"valueSources\":[\"value\",\"func\"],\"mainWidgetProps\":{\"valueLabel\":\"Age\",\"valuePlaceholder\":\"Enter the Age\"}},\"patientmaster.ngendercode\":{\"label\":_this.props.intl.formatMessage({id:\"IDS_SEX\"}),\"type\":\"select\",\"valueSources\":[\"value\"],\"fieldSettings\":{\"listValues\":[{\"value\":\"1\",\"title\":\"Male\"},{\"value\":\"2\",\"title\":\"Female\"},{\"value\":\"3\",\"title\":\"Others\"}]}},\"patientmaster.saddress\":{\"label\":_this.props.intl.formatMessage({id:\"IDS_ADDRESS\"}),\"type\":\"text\",\"valueSources\":[\"value\",\"func\"],\"mainWidgetProps\":{\"valueLabel\":\"Name\",\"valuePlaceholder\":\"Enter Address\"}},\"patientmaster.sphoneno\":{\"label\":_this.props.intl.formatMessage({id:\"IDS_PHONENO\"}),\"type\":\"text\",\"valueSources\":[\"value\"],\"fieldSettings\":{\"min\":0,\"valuePlaceholder\":\"Enter Phoneno\"}}}};_this.searchRef=React.createRef();_this.emailRef=React.createRef();_this.confirmMessage=new ConfirmMessage();_this.patientFieldList=[\"sfirstname\",\"slastname\",\"sfathername\",\"sage\",\"ddob\",\"sphoneno\",\"saddress\",\"snationalid\"];_this.searchFieldList=[\"saddress\",\"sage\",\"sdob\",\"sgendername\",\"sfirstname\",\"sfathername\",\"slastname\",\"spatientid\",\"sphoneno\"];_this.columnList=[{idsName:\"IDS_ARNO\",dataField:\"sarno\",width:\"150px\"},{idsName:\"IDS_PRODUCT\",dataField:\"sproductname\",width:\"250px\"},{idsName:\"IDS_SPECIFICATION\",dataField:\"sspecname\",width:\"150px\"},{idsName:\"IDS_SPECIMENCOLLECTIONTIME\",dataField:\"scolleciondate\",width:\"150px\"},{idsName:\"IDS_RECEIVEDDATE\",dataField:\"sreceiveddate\",width:\"150px\"},{idsName:\"IDS_STATUS\",dataField:\"stransdisplaystatus\",width:\"100px\"}];_this.childColumnList=[{idsName:\"IDS_TESTNAME\",dataField:\"stestsynonym\",width:\"250px\"},{idsName:\"IDS_PARAMETERNAME\",dataField:\"sparametersynonym\",width:\"250px\"},{idsName:\"IDS_RESULT\",dataField:\"sresult\",width:\"150px\"},{idsName:\"IDS_RESULTFLAG\",dataField:\"sgradename\",width:\"100px\"},{idsName:\"IDS_RESULTDATE\",dataField:\"sentereddate\",width:\"150px\"},{idsName:\"IDS_STATUS\",dataField:\"stransdisplaystatus\",width:\"100px\"}];_this.slideList=[{title:_this.props.intl.formatMessage({id:\"IDS_PATIENTID\"}),filed:\"spatientid\",width:\"250px\"},{title:_this.props.intl.formatMessage({id:\"IDS_FIRSTNAME\"}),filed:\"sfirstname\",width:\"150px\"},{title:_this.props.intl.formatMessage({id:\"IDS_LASTNAME\"}),filed:\"slastname\",width:\"150px\"},{title:_this.props.intl.formatMessage({id:\"IDS_NATIONALID\"}),filed:\"snationalid\",width:\"150px\"},{title:_this.props.intl.formatMessage({id:\"IDS_FATHERGUARDIANNAME\"}),filed:\"sfathername\",width:\"150px\"},{title:_this.props.intl.formatMessage({id:\"IDS_DATEOFBIRTH\"}),filed:\"sdob\",width:\"150px\"},{title:_this.props.intl.formatMessage({id:\"IDS_AGE\"}),filed:\"sage\",width:\"100px\"},{title:_this.props.intl.formatMessage({id:\"IDS_SEX\"}),filed:\"sgendername\",width:\"100px\"},{title:_this.props.intl.formatMessage({id:\"IDS_ADDRESS\"}),filed:\"saddress\",width:\"150px\"},{title:_this.props.intl.formatMessage({id:\"IDS_PHONENO\"}),filed:\"sphoneno\",width:\"150px\"}];return _this;}_createClass(PatientMaster,[{key:\"render\",value:function render(){var _this2=this;var addId=this.state.controlMap.has(\"AddPatient\")&&this.state.controlMap.get(\"AddPatient\").ncontrolcode;var editId=this.state.controlMap.has(\"EditPatient\")&&this.state.controlMap.get(\"EditPatient\").ncontrolcode;var deleteId=this.state.controlMap.has(\"DeletePatient\")&&this.state.controlMap.get(\"DeletePatient\").ncontrolcode;var patientReportId=this.state.controlMap.has(\"PatientReport\")&&this.state.controlMap.get(\"PatientReport\").ncontrolcode;var filterParam={inputListName:\"PatientList\",selectedObject:\"SelectedPatient\",primaryKeyField:\"npatientcode\",fetchUrl:\"patient/getPatient\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,searchFieldList:this.searchFieldList};var addParam={screenName:\"IDS_PATIENTMASTER\",operation:\"create\",primaryKeyName:\"npatientcode\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolcode:addId};var editParam={screenName:\"IDS_PATIENTMASTER\",operation:\"update\",primaryKeyName:\"npatientcode\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolcode:editId,inputListName:\"PatientList\",selectedObject:\"SelectedPatient\"};var mandatoryFields=[{mandatory:true,idsName:\"IDS_FIRSTNAME\",dataField:\"sfirstname\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"},{mandatory:true,idsName:\"IDS_LASTNAME\",dataField:\"slastname\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"},{mandatory:true,idsName:\"IDS_FATHERGUARDIANNAME\",dataField:\"sfathername\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"},{mandatory:true,idsName:\"IDS_DATEOFBIRTH\",dataField:\"ddob\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_AGE\",dataField:\"sage\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"},{mandatory:true,idsName:\"IDS_SEX\",dataField:\"ngendercode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_ADDRESS\",dataField:\"saddress\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"},{mandatory:true,idsName:\"IDS_PHONENO\",dataField:\"sphoneno\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"}];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap  mtop-4 mtop-fixed-breadcrumb\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster,{screenName:this.props.intl.formatMessage({id:\"IDS_PATIENTMASTER\"}),masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.PatientList,getMasterDetail:function getMasterDetail(user){return _this2.props.getPatientDetail(user,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:this.props.Login.masterData.SelectedPatient,primaryKeyField:\"npatientcode\",mainField:\"spatientname\",firstField:\"sfathername\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData,openModal:function openModal(){return _this2.props.getPatientComboService(addParam);},isMultiSelecct:false,hidePaging:false,isClearSearch:this.props.Login.isClearSearch,showMicIcon:true,showAdvFilterIcon:true,handleClick:this.handleClick})),/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},this.props.Login.masterData.PatientList&&this.props.Login.masterData.PatientList.length>0&&this.props.Login.masterData.SelectedPatient?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(ReactTooltip,{place:\"bottom\",globalEventOff:\"click\",id:\"tooltip_list_wrap\"}),/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},this.props.Login.masterData.SelectedPatient.spatientname),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"editPatient\",hidden:this.state.userRoleControlRights.indexOf(editId)===-1,className:\"btn btn-circle outline-grey mr-2\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_EDIT\"}),\"data-for\":\"tooltip_list_wrap\",onClick:function onClick(){return _this2.props.getPatientComboService(editParam);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"deletePatient\",className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"}),\"data-for\":\"tooltip_list_wrap\",hidden:this.state.userRoleControlRights.indexOf(deleteId)===-1,onClick:function onClick(){return _this2.ConfirmDelete(deleteId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt})),/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2\",name:\"patientReport\",hidden:this.state.userRoleControlRights.indexOf(patientReportId)===-1,onClick:function onClick(){return _this2.props.getPatientReport(_this2.props.Login.masterData.SelectedPatient,_this2.props.Login.userInfo,patientReportId);},\"data-for\":\"tooltip_list_wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_PATIENTREPORT\"})},/*#__PURE__*/React.createElement(Reports,{className:\"custom_icons\",width:\"20\",height:\"20\"})))))),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_PATIENTID\",message:\"Patient ID\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.SelectedPatient.spatientid))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_NATIONALID\",message:\"National ID\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.SelectedPatient.snationalid))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_DATEOFBIRTH\",message:\"Date Of Birth\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.SelectedPatient.sdob===null||this.props.Login.masterData.SelectedPatient.sdob.length===0?\"-\":this.props.Login.masterData.SelectedPatient.sdob))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_AGE\",message:\"Age\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.SelectedPatient.sage===null||this.props.Login.masterData.SelectedPatient.sage.length===0?\"-\":this.props.Login.masterData.SelectedPatient.sage))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SEX\",message:\"Sex\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.SelectedPatient.sgendername===null||this.props.Login.masterData.SelectedPatient.sgendername.length===0?\"-\":this.props.Login.masterData.SelectedPatient.sgendername))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_FATHERGUARDIANNAME\",message:\"Father/Guardian Name\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.SelectedPatient.sfathername))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_PHONENO\",message:\"Phone No\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.SelectedPatient.sphoneno))),/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_ADDRESS\",message:\"Address\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.SelectedPatient.saddress===null||this.props.Login.masterData.SelectedPatient.saddress.length===0?\"-\":this.props.Login.masterData.SelectedPatient.saddress)))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(DataGrid,{userRoleControlRights:this.state.userRoleControlRights,controlMap:this.state.controlMap,primaryKeyField:\"npreregno\",data:this.props.Login.masterData&&this.props.Login.masterData[\"PatientHistory\"],dataResult:process(this.props.Login.masterData&&(this.props.Login.masterData[\"PatientHistory\"]||[]),this.state.dataState),dataState:this.state.dataState,dataStateChange:this.dataStateChange,extractedColumnList:this.columnList,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,methodUrl:this.props.Login.inputParam.methodUrl,pageable:true,scrollable:\"scrollable\",isActionRequired:false,isToolBarRequired:false,selectedId:null,hideColumnFilter:false,expandField:\"expanded\",handleExpandChange:this.handleExpandChange,hasChild:true,childColumnList:this.childColumnList,childMappingField:\"npreregno\",childList:this.props.Login.testMap||new Map()}))))):\"\"))))),this.props.Login.openModal?/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,className:\"wide-popup\",size:this.props.Login.loadEsign?\"lg\":this.props.Login.openAdvFilter?\"xl\":\"lg\",operation:this.props.Login.openAdvFilter?\"\":this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.props.Login.openAdvFilter?this.onSaveGetClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,showSubmit:this.props.Login.openAdvFilter?true:false,hideSave:this.props.Login.openAdvFilter?true:false,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:this.props.Login.openAdvFilter?\"\":this.props.Login.openModal?mandatoryFields:\"\",addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.openAdvFilter?/*#__PURE__*/React.createElement(FilterQueryBuilder//fields={Fields}\n,{fields:this.state.fields,skip:this.state.kendoSkip,take:this.state.kendoTake,onChange:this.onChange,tree:this.state.tree,config:this.state.config,gridColumns:this.slideList,filterData:this.props.Login.slideResult||[],handlePageChange:this.handlePageChange,static:true,userInfo:this.props.Login.userInfo// controlMap={this.state.controlMap}\n// dataState={this.state.dataState}\n// dataStateChange={this.dataStateChange}\n}):/*#__PURE__*/React.createElement(AddPatient,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,onNumericInputOnChange:this.onNumericInputOnChange,handleDateChange:this.handleDateChange,genderList:this.props.Login.genderList||[],selectedPatient:this.props.Login.masterData.SelectedPatient||{},operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,currentTime:this.props.Login.currentTime})}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap});}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return PatientMaster;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,updateStore:updateStore,getPatientDetail:getPatientDetail,getPatientComboService:getPatientComboService,filterColumnData:filterColumnData,getTestParameter:getTestParameter,getPatientReport:getPatientReport,getPatientDetailsByFilterQuery:getPatientDetailsByFilterQuery})(injectIntl(PatientMaster));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/contactmaster/PatientMaster.jsx"],"names":["React","connect","toast","injectIntl","FormattedMessage","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faPencilAlt","faTrashAlt","DataGrid","Fields","Query","Builder","BasicConfig","BasicFuncs","Utils","QbUtils","callService","crudMaster","validateEsignCredential","updateStore","getPatientDetail","getPatientComboService","filterColumnData","getTestParameter","getPatientReport","getPatientDetailsByFilterQuery","DEFAULT_RETURN","showEsign","getControlMap","validatePhoneNumber","ageCalculate","formatInputDate","transactionStatus","ListMaster","SlideOutModal","ReadOnlyText","ContentPanel","AddPatient","Esign","ConfirmMessage","ReactTooltip","process","FilterQueryBuilder","AddFilteredPatient","mapStateToProps","state","Login","PatientMaster","props","handleClick","obj","typeName","data","openAdvFilter","openModal","slideResult","undefined","setState","config","tree","dataStateChange","event","dataState","handlePageChange","kendoSkip","skip","kendoTake","take","ConfirmDelete","deleteId","confirmMessage","confirm","intl","formatMessage","id","deletePatient","masterData","SelectedPatient","closeModal","loadEsign","selectedRecord","operation","updateInfo","selectedId","onComboChange","comboData","fieldName","onNumericInputOnChange","value","name","onChange","immutableTree","sqlFormat","onInputOnChange","target","type","checked","YES","NO","handleDateChange","dateName","dateValue","age","onSaveGetClick","inputData","userInfo","searchRef","current","paramFlag","inputParam","classUrl","methodUrl","isClearSearch","userRoleControlRights","nformcode","ncontrolCode","screenData","onSaveClick","saveType","formRef","patientData","postParam","inputListName","selectedObject","primaryKeyField","npatientcode","sfirstname","slastname","snationalid","sage","sphoneno","saddress","sfathername","nsitecode","nmastersitecode","patientFieldList","map","item","NA","selectedPatient","primaryKeyValue","fetchUrl","fecthInputObject","userinfo","patient","screenName","validateEsign","sreason","password","handleExpandChange","row","viewParam","viewRow","reloadData","displayName","masterStatus","error","controlMap","Map","fields","createRef","emailRef","searchFieldList","columnList","idsName","dataField","width","childColumnList","slideList","title","filed","addId","has","get","ncontrolcode","editId","patientReportId","filterParam","addParam","primaryKeyName","editParam","mandatoryFields","mandatory","mandatoryLabel","controlType","searchedData","PatientList","user","length","spatientname","indexOf","spatientid","sdob","sgendername","testMap","genderList","currentTime","previousProps","Object","values","push","warn","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { injectIntl, FormattedMessage } from \"react-intl\";\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from \"react-bootstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPencilAlt, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport DataGrid from \"../../components/data-grid/data-grid.component\";\r\nimport Fields from \"../../components/PatientMasterFields.json\";\r\nimport {\r\n  Query,\r\n  Builder,\r\n  BasicConfig, BasicFuncs,\r\n  Utils as QbUtils,\r\n} from \"react-awesome-query-builder\";\r\nimport {\r\n  callService,\r\n  crudMaster,\r\n  validateEsignCredential,\r\n  updateStore,\r\n  getPatientDetail,\r\n  getPatientComboService,\r\n  filterColumnData,\r\n  getTestParameter,\r\n  getPatientReport, getPatientDetailsByFilterQuery\r\n} from \"../../actions\";\r\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\r\nimport {\r\n  showEsign,\r\n  getControlMap,\r\n  validatePhoneNumber,\r\n  ageCalculate,\r\n  formatInputDate,\r\n} from \"../../components/CommonScript\";\r\nimport { transactionStatus } from \"../../components/Enumeration\";\r\nimport ListMaster from \"../../components/list-master/list-master.component\";\r\nimport SlideOutModal from \"../../components/slide-out-modal/SlideOutModal\";\r\nimport { ReactComponent as Reports } from \"../../assets/image/report-Icon.svg\";\r\nimport { ReadOnlyText, ContentPanel } from \"../../components/App.styles\";\r\nimport AddPatient from \"./AddPatient\";\r\nimport Esign from \"../audittrail/Esign\";\r\nimport ConfirmMessage from \"../../components/confirm-alert/confirm-message.component\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport { process } from \"@progress/kendo-data-query\";\r\nimport FilterQueryBuilder from \"../../components/FilterQueryBuilder\";\r\nimport AddFilteredPatient from \"./AddFilteredPatient\";\r\n//import Filtercomponent from '../../components/Filtercomponent';\r\n// import FilterDemo from \"./FilterDemo\";\r\n// import \"antd/dist/antd.css\";\r\n// import 'react-awesome-query-builder/css/styles.scss';\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { Login: state.Login };\r\n};\r\n\r\nclass PatientMaster extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      masterStatus: \"\",\r\n      error: \"\",\r\n      selectedRecord: {},\r\n      operation: \"\",\r\n      selectedPatient: undefined,\r\n      screenName: undefined,\r\n      userRoleControlRights: [],\r\n      controlMap: new Map(),\r\n      isClearSearch: false,\r\n      dataState: { skip: 0, take: 5 },\r\n      tree: undefined,\r\n      config: undefined,\r\n      kendoSkip:0,\r\n      kendoTake:5,\r\n      fields: {\r\n        \"patientmaster.sfirstname\": {\r\n          \"label\": this.props.intl.formatMessage({\r\n            id: \"IDS_FIRSTNAME\",\r\n          }),\r\n          \"type\": \"text\",\r\n          \"valueSources\": [\"value\", \"func\"],\r\n\r\n          \"mainWidgetProps\": {\r\n            \"valueLabel\": \"Name\",\r\n            \"valuePlaceholder\": \"Enter First Name\"\r\n          }\r\n\r\n        },\r\n        \"patientmaster.slastname\": {\r\n          \"label\": this.props.intl.formatMessage({\r\n            id: \"IDS_LASTNAME\",\r\n          }),\r\n          \"type\": \"text\",\r\n          \"valueSources\": [\"value\", \"func\"],\r\n          \"mainWidgetProps\": {\r\n            \"valueLabel\": \"Name\",\r\n            \"valuePlaceholder\": \"Enter Last Name\"\r\n\r\n          }\r\n        },\r\n        \"patientmaster.spatientid\": {\r\n          \"label\": this.props.intl.formatMessage({\r\n            id: \"IDS_PATIENTID\",\r\n          }),\r\n          \"type\": \"text\",\r\n          \"valueSources\": [\"value\", \"func\"],\r\n          \"mainWidgetProps\": {\r\n            \"valueLabel\": \"Name\",\r\n            \"valuePlaceholder\": \"Enter Patient Id\"\r\n\r\n          }\r\n        },\r\n        \"patientmaster.snationalid\": {\r\n          \"label\": this.props.intl.formatMessage({\r\n            id: \"IDS_NATIONALID\",\r\n          }),\r\n          \"type\": \"text\",\r\n          \"valueSources\": [\"value\", \"func\"],\r\n          \"mainWidgetProps\": {\r\n            \"valueLabel\": \"Name\",\r\n            \"valuePlaceholder\": \"Enter National Id\"\r\n\r\n          }\r\n        },\r\n        \"patientmaster.sfathername\": {\r\n          \"label\": this.props.intl.formatMessage({\r\n            id: \"IDS_FATHERGUARDIANNAME\",\r\n          }),\r\n          \"type\": \"text\",\r\n          \"valueSources\": [\"value\", \"func\"],\r\n          \"mainWidgetProps\": {\r\n            \"valueLabel\": \"Name\",\r\n            \"valuePlaceholder\": \"Enter Father Name\"\r\n\r\n          }\r\n        },\r\n        \"patientmaster.ddob\": {\r\n          \"label\": this.props.intl.formatMessage({\r\n            id: \"IDS_DATEOFBIRTH\",\r\n          }),\r\n          \"type\": \"date\",\r\n          \"valueSources\": [\"value\"]\r\n        },\r\n\r\n        \"patientmaster.sage\": {\r\n          \"label\": this.props.intl.formatMessage({\r\n            id: \"IDS_AGE\",\r\n          }),\r\n          \"type\": \"text\",\r\n          \"valueSources\": [\"value\", \"func\"],\r\n          \"mainWidgetProps\": {\r\n            \"valueLabel\": \"Age\",\r\n            \"valuePlaceholder\": \"Enter the Age\"\r\n\r\n          }\r\n        },\r\n\r\n        \"patientmaster.ngendercode\": {\r\n          \"label\": this.props.intl.formatMessage({\r\n            id: \"IDS_SEX\",\r\n          }),\r\n          \"type\": \"select\",\r\n          \"valueSources\": [\"value\"],\r\n          \"fieldSettings\": {\r\n            \"listValues\": [\r\n              { \"value\": \"1\", \"title\": \"Male\" },\r\n              { \"value\": \"2\", \"title\": \"Female\" },\r\n              { \"value\": \"3\", \"title\": \"Others\" }\r\n            ]\r\n          }\r\n        },\r\n        \"patientmaster.saddress\": {\r\n          \"label\": this.props.intl.formatMessage({\r\n            id: \"IDS_ADDRESS\",\r\n          }),\r\n          \"type\": \"text\",\r\n          \"valueSources\": [\"value\", \"func\"],\r\n          \"mainWidgetProps\": {\r\n            \"valueLabel\": \"Name\",\r\n            \"valuePlaceholder\": \"Enter Address\"\r\n\r\n          }\r\n        },\r\n        \"patientmaster.sphoneno\": {\r\n          \"label\": this.props.intl.formatMessage({\r\n            id: \"IDS_PHONENO\",\r\n          }),\r\n          \"type\": \"text\",\r\n          \"valueSources\": [\"value\"],\r\n          \"fieldSettings\": {\r\n            \"min\": 0,\r\n            \"valuePlaceholder\": \"Enter Phoneno\"\r\n\r\n          }\r\n        }\r\n      }\r\n\r\n    };\r\n    this.searchRef = React.createRef();\r\n    this.emailRef = React.createRef();\r\n    this.confirmMessage = new ConfirmMessage();\r\n\r\n    this.patientFieldList = [\r\n      \"sfirstname\",\r\n      \"slastname\",\r\n      \"sfathername\",\r\n      \"sage\",\r\n      \"ddob\",\r\n      \"sphoneno\",\r\n      \"saddress\",\r\n      \"snationalid\",\r\n    ];\r\n\r\n    this.searchFieldList = [\r\n      \"saddress\",\r\n      \"sage\",\r\n      \"sdob\",\r\n      \"sgendername\",\r\n      \"sfirstname\",\r\n      \"sfathername\",\r\n      \"slastname\",\r\n      \"spatientid\",\r\n      \"sphoneno\",\r\n    ];\r\n\r\n    this.columnList = [\r\n      { idsName: \"IDS_ARNO\", dataField: \"sarno\", width: \"150px\" },\r\n      { idsName: \"IDS_PRODUCT\", dataField: \"sproductname\", width: \"250px\" },\r\n      { idsName: \"IDS_SPECIFICATION\", dataField: \"sspecname\", width: \"150px\" },\r\n      {\r\n        idsName: \"IDS_SPECIMENCOLLECTIONTIME\",\r\n        dataField: \"scolleciondate\",\r\n        width: \"150px\",\r\n      },\r\n      {\r\n        idsName: \"IDS_RECEIVEDDATE\",\r\n        dataField: \"sreceiveddate\",\r\n        width: \"150px\",\r\n      },\r\n      {\r\n        idsName: \"IDS_STATUS\",\r\n        dataField: \"stransdisplaystatus\",\r\n        width: \"100px\",\r\n      },\r\n    ];\r\n\r\n    this.childColumnList = [\r\n      { idsName: \"IDS_TESTNAME\", dataField: \"stestsynonym\", width: \"250px\" },\r\n      {\r\n        idsName: \"IDS_PARAMETERNAME\",\r\n        dataField: \"sparametersynonym\",\r\n        width: \"250px\",\r\n      },\r\n      { idsName: \"IDS_RESULT\", dataField: \"sresult\", width: \"150px\" },\r\n      { idsName: \"IDS_RESULTFLAG\", dataField: \"sgradename\", width: \"100px\" },\r\n      { idsName: \"IDS_RESULTDATE\", dataField: \"sentereddate\", width: \"150px\" },\r\n      {\r\n        idsName: \"IDS_STATUS\",\r\n        dataField: \"stransdisplaystatus\",\r\n        width: \"100px\",\r\n      },\r\n    ];\r\n    this.slideList = [\r\n      { title: this.props.intl.formatMessage({ id: \"IDS_PATIENTID\" }), filed: \"spatientid\", width: \"250px\" },\r\n      { title: this.props.intl.formatMessage({ id: \"IDS_FIRSTNAME\" }), filed: \"sfirstname\", width: \"150px\" },\r\n      { title: this.props.intl.formatMessage({ id: \"IDS_LASTNAME\" }), filed: \"slastname\", width: \"150px\" },\r\n      { title: this.props.intl.formatMessage({ id: \"IDS_NATIONALID\" }), filed: \"snationalid\", width: \"150px\" },\r\n      { title: this.props.intl.formatMessage({ id: \"IDS_FATHERGUARDIANNAME\" }), filed: \"sfathername\", width: \"150px\" },\r\n      { title: this.props.intl.formatMessage({ id: \"IDS_DATEOFBIRTH\" }), filed: \"sdob\", width: \"150px\" },\r\n      { title: this.props.intl.formatMessage({ id: \"IDS_AGE\" }), filed: \"sage\", width: \"100px\" },\r\n      { title: this.props.intl.formatMessage({ id: \"IDS_SEX\" }), filed: \"sgendername\", width: \"100px\" },\r\n      { title: this.props.intl.formatMessage({ id: \"IDS_ADDRESS\" }), filed: \"saddress\", width: \"150px\" },\r\n      { title: this.props.intl.formatMessage({ id: \"IDS_PHONENO\" }), filed: \"sphoneno\", width: \"150px\" },\r\n    ];\r\n\r\n\r\n\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (\r\n      props.Login.masterStatus !== \"\" &&\r\n      props.Login.masterStatus !== state.masterStatus\r\n    ) {\r\n      toast.warn(props.Login.masterStatus);\r\n      props.Login.masterStatus = \"\";\r\n    }\r\n    if (props.Login.error !== state.error) {\r\n      toast.error(props.Login.error);\r\n      props.Login.error = \"\";\r\n    }\r\n    if (props.Login.selectedRecord === undefined) {\r\n      return { selectedRecord: {} };\r\n    }\r\n    return null;\r\n  }\r\n  handleClick = () => {\r\n    let obj = { typeName: DEFAULT_RETURN, data: { openAdvFilter: true, openModal: true, slideResult: undefined } }\r\n    this.setState({ config: undefined, tree: undefined })\r\n    this.props.updateStore(obj);\r\n  }\r\n  dataStateChange = (event) => {\r\n    this.setState({ dataState: event.dataState })\r\n  }\r\n\r\n  handlePageChange = (event) => {\r\n    this.setState({ kendoSkip: event.skip, kendoTake: event.take });\r\n};\r\n  render() {\r\n    const addId =\r\n      this.state.controlMap.has(\"AddPatient\") &&\r\n      this.state.controlMap.get(\"AddPatient\").ncontrolcode;\r\n    const editId =\r\n      this.state.controlMap.has(\"EditPatient\") &&\r\n      this.state.controlMap.get(\"EditPatient\").ncontrolcode;\r\n    const deleteId =\r\n      this.state.controlMap.has(\"DeletePatient\") &&\r\n      this.state.controlMap.get(\"DeletePatient\").ncontrolcode;\r\n    const patientReportId =\r\n      this.state.controlMap.has(\"PatientReport\") &&\r\n      this.state.controlMap.get(\"PatientReport\").ncontrolcode;\r\n\r\n    const filterParam = {\r\n      inputListName: \"PatientList\",\r\n      selectedObject: \"SelectedPatient\",\r\n      primaryKeyField: \"npatientcode\",\r\n      fetchUrl: \"patient/getPatient\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n      masterData: this.props.Login.masterData,\r\n      searchFieldList: this.searchFieldList,\r\n    };\r\n\r\n    const addParam = {\r\n      screenName: \"IDS_PATIENTMASTER\",\r\n      operation: \"create\",\r\n      primaryKeyName: \"npatientcode\",\r\n      masterData: this.props.Login.masterData,\r\n      userInfo: this.props.Login.userInfo,\r\n      ncontrolcode: addId,\r\n    };\r\n    const editParam = {\r\n      screenName: \"IDS_PATIENTMASTER\",\r\n      operation: \"update\",\r\n      primaryKeyName: \"npatientcode\",\r\n      masterData: this.props.Login.masterData,\r\n      userInfo: this.props.Login.userInfo,\r\n      ncontrolcode: editId,\r\n      inputListName: \"PatientList\",\r\n      selectedObject: \"SelectedPatient\",\r\n    };\r\n    const mandatoryFields = [\r\n      {\r\n        mandatory: true,\r\n        idsName: \"IDS_FIRSTNAME\",\r\n        dataField: \"sfirstname\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n      {\r\n        mandatory: true,\r\n        idsName: \"IDS_LASTNAME\",\r\n        dataField: \"slastname\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n      {\r\n        mandatory: true,\r\n        idsName: \"IDS_FATHERGUARDIANNAME\",\r\n        dataField: \"sfathername\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n      {\r\n\r\n        mandatory: true,\r\n        idsName: \"IDS_DATEOFBIRTH\",\r\n        dataField: \"ddob\",\r\n        mandatoryLabel: \"IDS_SELECT\",\r\n        controlType: \"selectbox\",\r\n      },\r\n      {\r\n        mandatory: true,\r\n        idsName: \"IDS_AGE\",\r\n        dataField: \"sage\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n      {\r\n        mandatory: true,\r\n        idsName: \"IDS_SEX\",\r\n        dataField: \"ngendercode\",\r\n        mandatoryLabel: \"IDS_SELECT\",\r\n        controlType: \"selectbox\",\r\n      },\r\n      {\r\n        mandatory: true,\r\n        idsName: \"IDS_ADDRESS\",\r\n        dataField: \"saddress\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n      {\r\n        mandatory: true,\r\n        idsName: \"IDS_PHONENO\",\r\n        dataField: \"sphoneno\",\r\n        mandatoryLabel: \"IDS_ENTER\",\r\n        controlType: \"textbox\",\r\n      },\r\n    ];\r\n\r\n    return (\r\n      <>\r\n        <div className=\"client-listing-wrap  mtop-4 mtop-fixed-breadcrumb\">\r\n          <Row noGutters>\r\n            <Col md={4}>\r\n              <ListMaster\r\n                screenName={this.props.intl.formatMessage({\r\n                  id: \"IDS_PATIENTMASTER\",\r\n                })}\r\n                masterData={this.props.Login.masterData}\r\n                userInfo={this.props.Login.userInfo}\r\n                masterList={\r\n                  this.props.Login.masterData.searchedData ||\r\n                  this.props.Login.masterData.PatientList\r\n                }\r\n                getMasterDetail={(user) =>\r\n                  this.props.getPatientDetail(\r\n                    user,\r\n                    this.props.Login.userInfo,\r\n                    this.props.Login.masterData\r\n                  )\r\n                }\r\n                selectedMaster={this.props.Login.masterData.SelectedPatient}\r\n                primaryKeyField=\"npatientcode\"\r\n                mainField=\"spatientname\"\r\n                firstField=\"sfathername\"\r\n                filterColumnData={this.props.filterColumnData}\r\n                filterParam={filterParam}\r\n                userRoleControlRights={this.state.userRoleControlRights}\r\n                addId={addId}\r\n                searchRef={this.searchRef}\r\n                reloadData={this.reloadData}\r\n                openModal={() => this.props.getPatientComboService(addParam)}\r\n                isMultiSelecct={false}\r\n                hidePaging={false}\r\n                isClearSearch={this.props.Login.isClearSearch}\r\n                showMicIcon={true}\r\n                showAdvFilterIcon={true}\r\n                handleClick={this.handleClick}\r\n              />\r\n            </Col>\r\n            <Col md={8}>\r\n              <ContentPanel className=\"panel-main-content\">\r\n                <Card className=\"border-0\">\r\n                  {this.props.Login.masterData.PatientList &&\r\n                    this.props.Login.masterData.PatientList.length > 0 &&\r\n                    this.props.Login.masterData.SelectedPatient ? (\r\n                    <>\r\n                      <Card.Header>\r\n                        <ReactTooltip\r\n                          place=\"bottom\"\r\n                          globalEventOff=\"click\"\r\n                          id=\"tooltip_list_wrap\"\r\n                        />\r\n                        <Card.Title className=\"product-title-main\">\r\n                          {\r\n                            this.props.Login.masterData.SelectedPatient\r\n                              .spatientname\r\n                          }\r\n                        </Card.Title>\r\n                        <Card.Subtitle>\r\n                          <div className=\"d-flex product-category\">\r\n                            <h2 className=\"product-title-sub flex-grow-1\"></h2>\r\n                            <div className=\"d-inline\">\r\n                              <Nav.Link\r\n                                name=\"editPatient\"\r\n                                hidden={\r\n                                  this.state.userRoleControlRights.indexOf(\r\n                                    editId\r\n                                  ) === -1\r\n                                }\r\n                                className=\"btn btn-circle outline-grey mr-2\"\r\n                                data-tip={this.props.intl.formatMessage({\r\n                                  id: \"IDS_EDIT\",\r\n                                })}\r\n                                data-for=\"tooltip_list_wrap\"\r\n                                onClick={() =>\r\n                                  this.props.getPatientComboService(editParam)\r\n                                }\r\n                              >\r\n                                <FontAwesomeIcon icon={faPencilAlt} />\r\n                              </Nav.Link>\r\n\r\n                              <Nav.Link\r\n                                name=\"deletePatient\"\r\n                                className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                data-tip={this.props.intl.formatMessage({\r\n                                  id: \"IDS_DELETE\",\r\n                                })}\r\n                                data-for=\"tooltip_list_wrap\"\r\n                                hidden={\r\n                                  this.state.userRoleControlRights.indexOf(\r\n                                    deleteId\r\n                                  ) === -1\r\n                                }\r\n                                onClick={() => this.ConfirmDelete(deleteId)}\r\n                              >\r\n                                <FontAwesomeIcon icon={faTrashAlt} />\r\n                              </Nav.Link>\r\n\r\n                              <Nav.Link\r\n                                className=\"btn btn-circle outline-grey mr-2\"\r\n                                name=\"patientReport\"\r\n                                hidden={\r\n                                  this.state.userRoleControlRights.indexOf(\r\n                                    patientReportId\r\n                                  ) === -1\r\n                                }\r\n                                onClick={() =>\r\n                                  this.props.getPatientReport(\r\n                                    this.props.Login.masterData.SelectedPatient,\r\n                                    this.props.Login.userInfo,\r\n                                    patientReportId\r\n                                  )\r\n                                }\r\n                                data-for=\"tooltip_list_wrap\"\r\n                                data-tip={this.props.intl.formatMessage({\r\n                                  id: \"IDS_PATIENTREPORT\",\r\n                                })}\r\n                              >\r\n                                <Reports\r\n                                  className=\"custom_icons\"\r\n                                  width=\"20\"\r\n                                  height=\"20\"\r\n                                />\r\n                              </Nav.Link>\r\n                            </div>\r\n                          </div>\r\n                        </Card.Subtitle>\r\n                      </Card.Header>\r\n                      <Card.Body>\r\n                        <Row>\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_PATIENTID\"\r\n                                  message=\"Patient ID\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .spatientid\r\n                                }\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_NATIONALID\"\r\n                                  message=\"National ID\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .snationalid\r\n                                }\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_DATEOFBIRTH\"\r\n                                  message=\"Date Of Birth\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {this.props.Login.masterData.SelectedPatient\r\n                                  .sdob === null ||\r\n                                  this.props.Login.masterData.SelectedPatient.sdob\r\n                                    .length === 0\r\n                                  ? \"-\"\r\n                                  : this.props.Login.masterData.SelectedPatient\r\n                                    .sdob}\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage id=\"IDS_AGE\" message=\"Age\" />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {this.props.Login.masterData.SelectedPatient\r\n                                  .sage === null ||\r\n                                  this.props.Login.masterData.SelectedPatient.sage\r\n                                    .length === 0\r\n                                  ? \"-\"\r\n                                  : this.props.Login.masterData.SelectedPatient\r\n                                    .sage}\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage id=\"IDS_SEX\" message=\"Sex\" />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {this.props.Login.masterData.SelectedPatient\r\n                                  .sgendername === null ||\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .sgendername.length === 0\r\n                                  ? \"-\"\r\n                                  : this.props.Login.masterData.SelectedPatient\r\n                                    .sgendername}\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_FATHERGUARDIANNAME\"\r\n                                  message=\"Father/Guardian Name\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .sfathername\r\n                                }\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n                          <Col md={4}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_PHONENO\"\r\n                                  message=\"Phone No\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .sphoneno\r\n                                }\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n\r\n                          <Col md={8}>\r\n                            <FormGroup>\r\n                              <FormLabel>\r\n                                <FormattedMessage\r\n                                  id=\"IDS_ADDRESS\"\r\n                                  message=\"Address\"\r\n                                />\r\n                              </FormLabel>\r\n                              <ReadOnlyText>\r\n                                {this.props.Login.masterData.SelectedPatient\r\n                                  .saddress === null ||\r\n                                  this.props.Login.masterData.SelectedPatient\r\n                                    .saddress.length === 0\r\n                                  ? \"-\"\r\n                                  : this.props.Login.masterData.SelectedPatient\r\n                                    .saddress}\r\n                              </ReadOnlyText>\r\n                            </FormGroup>\r\n                          </Col>\r\n                        </Row>\r\n                        <Row>\r\n                          <Col>\r\n                            <DataGrid\r\n                              userRoleControlRights={\r\n                                this.state.userRoleControlRights\r\n                              }\r\n                              controlMap={this.state.controlMap}\r\n                              primaryKeyField={\"npreregno\"}\r\n                              data={\r\n                                this.props.Login.masterData &&\r\n                                this.props.Login.masterData[\"PatientHistory\"]\r\n                              }\r\n                              dataResult={process(\r\n                                this.props.Login.masterData &&\r\n                                (this.props.Login.masterData[\r\n                                  \"PatientHistory\"\r\n                                ] ||\r\n                                  []),\r\n                                this.state.dataState\r\n                              )}\r\n                              dataState={this.state.dataState}\r\n                              dataStateChange={this.dataStateChange}\r\n                              extractedColumnList={this.columnList}\r\n                              inputParam={this.props.Login.inputParam}\r\n                              userInfo={this.props.Login.userInfo}\r\n                              methodUrl={this.props.Login.inputParam.methodUrl}\r\n                              pageable={true}\r\n                              scrollable={\"scrollable\"}\r\n                              isActionRequired={false}\r\n                              isToolBarRequired={false}\r\n                              selectedId={null}\r\n                              hideColumnFilter={false}\r\n                              expandField={\"expanded\"}\r\n                              handleExpandChange={this.handleExpandChange}\r\n                              hasChild={true}\r\n                              childColumnList={this.childColumnList}\r\n                              childMappingField={\"npreregno\"}\r\n                              childList={this.props.Login.testMap || new Map()}\r\n                            />\r\n                          </Col>\r\n                        </Row>\r\n                      </Card.Body>\r\n                    </>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                </Card>\r\n              </ContentPanel>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n\r\n        {this.props.Login.openModal ? (\r\n          <SlideOutModal\r\n            show={this.props.Login.openModal}\r\n            closeModal={this.closeModal}\r\n            className=\"wide-popup\"\r\n            size={this.props.Login.loadEsign ? \"lg\" : this.props.Login.openAdvFilter ? \"xl\" : \"lg\"}\r\n            operation={this.props.Login.openAdvFilter ? \"\" : this.props.Login.operation}\r\n            inputParam={this.props.Login.inputParam}\r\n            screenName={this.props.Login.screenName}\r\n            onSaveClick={this.props.Login.openAdvFilter ? this.onSaveGetClick : this.onSaveClick}\r\n            esign={this.props.Login.loadEsign}\r\n            validateEsign={this.validateEsign}\r\n            showSubmit={this.props.Login.openAdvFilter ? true : false}\r\n            hideSave={this.props.Login.openAdvFilter ? true : false}\r\n            masterStatus={this.props.Login.masterStatus}\r\n            updateStore={this.props.updateStore}\r\n            selectedRecord={this.state.selectedRecord || {}}\r\n            mandatoryFields={this.props.Login.openAdvFilter ? \"\" : this.props.Login.openModal ? mandatoryFields : \"\"}\r\n\r\n            addComponent={\r\n              this.props.Login.loadEsign ? (\r\n                <Esign\r\n                  operation={this.props.Login.operation}\r\n                  onInputOnChange={this.onInputOnChange}\r\n                  inputParam={this.props.Login.inputParam}\r\n                  selectedRecord={this.state.selectedRecord || {}}\r\n                />\r\n              ) : this.props.Login.openAdvFilter ? (\r\n                <FilterQueryBuilder\r\n                  //fields={Fields}\r\n                  fields={this.state.fields}\r\n                  skip={this.state.kendoSkip}\r\n                  take={this.state.kendoTake}\r\n                  onChange={this.onChange}\r\n                  tree={this.state.tree}\r\n                  config={this.state.config}\r\n                  gridColumns={this.slideList}\r\n                  filterData={this.props.Login.slideResult||[]}\r\n                  handlePageChange={this.handlePageChange}\r\n                  static={true}\r\n                  userInfo={this.props.Login.userInfo}\r\n                // controlMap={this.state.controlMap}\r\n                // dataState={this.state.dataState}\r\n                // dataStateChange={this.dataStateChange}\r\n                />)\r\n                : (\r\n                  <AddPatient\r\n                    selectedRecord={this.state.selectedRecord || {}}\r\n                    onInputOnChange={this.onInputOnChange}\r\n                    onComboChange={this.onComboChange}\r\n                    onNumericInputOnChange={this.onNumericInputOnChange}\r\n                    handleDateChange={this.handleDateChange}\r\n                    genderList={this.props.Login.genderList || []}\r\n                    selectedPatient={\r\n                      this.props.Login.masterData.SelectedPatient || {}\r\n                    }\r\n                    operation={this.props.Login.operation}\r\n                    inputParam={this.props.Login.inputParam}\r\n                    userInfo={this.props.Login.userInfo}\r\n                    currentTime={this.props.Login.currentTime}\r\n                  />\r\n                )\r\n            }\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n\r\n  componentDidUpdate(previousProps) {\r\n    if (\r\n      this.props.Login.selectedRecord !== previousProps.Login.selectedRecord\r\n    ) {\r\n      this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n    }\r\n    if (\r\n      this.props.Login.userInfo.nformcode !==\r\n      previousProps.Login.userInfo.nformcode\r\n    ) {\r\n      const userRoleControlRights = [];\r\n      if (this.props.Login.userRoleControlRights) {\r\n        this.props.Login.userRoleControlRights[\r\n          this.props.Login.userInfo.nformcode\r\n        ] &&\r\n          Object.values(\r\n            this.props.Login.userRoleControlRights[\r\n            this.props.Login.userInfo.nformcode\r\n            ]\r\n          ).map((item) => userRoleControlRights.push(item.ncontrolcode));\r\n      }\r\n      const controlMap = getControlMap(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode\r\n      );\r\n      this.setState({ userRoleControlRights, controlMap });\r\n    }\r\n  }\r\n\r\n  ConfirmDelete = (deleteId) => {\r\n    this.confirmMessage.confirm(\r\n      \"deleteMessage\",\r\n      this.props.intl.formatMessage({ id: \"IDS_DELETE\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_OK\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n      () =>\r\n        this.deletePatient(\r\n          \"Patient\",\r\n          this.props.Login.masterData.SelectedPatient,\r\n          \"delete\",\r\n          deleteId\r\n        )\r\n    );\r\n  };\r\n\r\n  closeModal = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n    let openModal = this.props.Login.openModal;\r\n    let selectedRecord = this.props.Login.selectedRecord;\r\n    let openAdvFilter = this.props.Login.openAdvFilter;\r\n    let slideResult = this.props.Login.slideResult;\r\n    let tree = this.state.tree;\r\n\r\n\r\n    let config = this.state.config;\r\n\r\n    if (this.props.Login.loadEsign) {\r\n      if (this.props.Login.operation === \"delete\") {\r\n        loadEsign = false;\r\n        openModal = false;\r\n        selectedRecord = {};\r\n      } else {\r\n        loadEsign = false;\r\n      }\r\n    } else {\r\n      openAdvFilter = false;\r\n      openModal = false;\r\n      selectedRecord = {};\r\n      slideResult = {};\r\n      config = undefined;\r\n      tree = undefined;\r\n      this.setState({ config: config, tree: tree })\r\n    }\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { openModal, loadEsign, selectedRecord, selectedId: null, openAdvFilter, slideResult, config, tree },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  onComboChange = (comboData, fieldName) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    selectedRecord[fieldName] = comboData;\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n  onNumericInputOnChange = (value, name) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    selectedRecord[name] = value;\r\n    this.setState({ selectedRecord });\r\n  };\r\n  // onFilterInputChange(immutableTree,){\r\n\r\n  //  let QbUtilss=JSON.stringify(QbUtils.sqlFormat(immutableTree, config));\r\n  //   console.log('QbUtils',QbUtilss)\r\n  // return QbUtilss\r\n\r\n  // };\r\n  onChange = (immutableTree, config) => {\r\n    let selectedRecord = this.state.selectedRecord || {};\r\n\r\n    // this.setState({ tree: immutableTree, config: config });\r\n    selectedRecord['filterquery'] = QbUtils.sqlFormat(immutableTree, config);\r\n    // const jsonTree = QbUtils.getTree(immutableTree);\r\n    // <div>SQL where: <pre>{selectedRecord['filterquery']}</pre></div>\r\n\r\n    this.setState({ tree: immutableTree, config: config, selectedRecord: selectedRecord });\r\n\r\n  };\r\n  onInputOnChange = (event) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n\r\n    if (event.target.type === \"checkbox\") {\r\n      selectedRecord[event.target.name] =\r\n        event.target.checked === true\r\n          ? transactionStatus.YES\r\n          : transactionStatus.NO;\r\n    } else {\r\n      if (event.target.name === \"sphoneno\") {\r\n        if (event.target.value !== \"\") {\r\n          event.target.value = validatePhoneNumber(event.target.value);\r\n          selectedRecord[event.target.name] =\r\n            event.target.value !== \"\"\r\n              ? event.target.value\r\n              : selectedRecord[event.target.name];\r\n        } else {\r\n          selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n      } else {\r\n        selectedRecord[event.target.name] = event.target.value;\r\n      }\r\n    }\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n  handleDateChange = (dateName, dateValue) => {\r\n    const { selectedRecord } = this.state;\r\n    selectedRecord[dateName] = dateValue;\r\n    const age = ageCalculate(dateValue);\r\n    selectedRecord[\"sage\"] = age;\r\n\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n  onSaveGetClick = () => {\r\n    let inputData = [];\r\n    inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n    inputData[\"filterquery\"] = this.state.selectedRecord['filterquery'];\r\n    this.searchRef.current.value = \"\";\r\n    let paramFlag = true;\r\n\r\n    const inputParam = {\r\n      classUrl: \"patient\",\r\n      methodUrl: \"ByPatient\",\r\n      inputData: inputData,\r\n      searchRef: this.searchRef,\r\n      isClearSearch: this.props.Login.isClearSearch,\r\n    };\r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (\r\n      showEsign(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode,\r\n        this.props.Login.ncontrolCode\r\n      )\r\n    ) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData }\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.getPatientDetailsByFilterQuery(inputParam, masterData);\r\n    }\r\n  };\r\n\r\n  onSaveClick = (saveType, formRef) => {\r\n    let patientData = [];\r\n    patientData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n    let postParam = {\r\n      inputListName: \"PatientList\",\r\n      selectedObject: \"SelectedPatient\",\r\n      primaryKeyField: \"npatientcode\",\r\n    };\r\n\r\n    if (this.props.Login.operation === \"update\") {\r\n      postParam[\"primaryKeyValue\"] =\r\n        this.props.Login.masterData.SelectedPatient.npatientcode;\r\n      patientData[\"patient\"] = {\r\n        npatientcode: this.props.Login.masterData.SelectedPatient.npatientcode,\r\n        sfirstname: this.state.selectedRecord.sfirstname,\r\n        slastname: this.state.selectedRecord.slastname,\r\n        snationalid: this.state.selectedRecord.snationalid,\r\n        sage: this.state.selectedRecord.sage,\r\n        sphoneno: this.state.selectedRecord.sphoneno,\r\n        saddress: this.state.selectedRecord.saddress,\r\n        sfathername: this.state.selectedRecord.sfathername,\r\n        //    \"ddob\": formatInputDate(\r\n        //     this.state.selectedRecord[\"ddob\"],false)\r\n      };\r\n\r\n    } else {\r\n      patientData[\"patient\"] = {\r\n        nsitecode: this.props.Login.userInfo.nmastersitecode,\r\n      };\r\n\r\n      this.patientFieldList.map((item) => {\r\n        return (patientData[\"patient\"][item] = this.state.selectedRecord[item]);\r\n      });\r\n    }\r\n\r\n    patientData[\"patient\"][\"ngendercode\"] = this.state.selectedRecord[\r\n      \"ngendercode\"\r\n    ]\r\n      ? this.state.selectedRecord[\"ngendercode\"].value\r\n      : transactionStatus.NA;\r\n\r\n    // if (patientData[\"patient\"][\"ddob\"] !== undefined\r\n    //     && patientData[\"patient\"][\"ddob\"] !== null && patientData[\"patient\"][\"ddob\"] !== \"\") {\r\n    //     patientData[\"patient\"][\"ddob\"] = formatInputDate(patientData[\"patient\"][\"ddob\"],false);\r\n\r\n    // }\r\n    if (this.state.selectedRecord[\"ddob\"]) {\r\n      patientData[\"patient\"][\"ddob\"] = formatInputDate(\r\n        this.state.selectedRecord[\"ddob\"],\r\n        false\r\n      );\r\n    }\r\n    const inputParam = {\r\n      classUrl: \"patient\",\r\n      methodUrl: \"Patient\",\r\n      inputData: patientData,\r\n      operation: this.props.Login.operation,\r\n      saveType,\r\n      formRef,\r\n      postParam,\r\n      searchRef: this.searchRef,\r\n      isClearSearch: this.props.Login.isClearSearch,\r\n    };\r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (\r\n      showEsign(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode,\r\n        this.props.Login.ncontrolCode\r\n      )\r\n    ) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          saveType,\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n    }\r\n  };\r\n\r\n  deletePatient = (methodUrl, selectedPatient, operation, ncontrolCode) => {\r\n    const postParam = {\r\n      inputListName: \"PatientList\",\r\n      selectedObject: \"SelectedPatient\",\r\n      primaryKeyField: \"npatientcode\",\r\n      primaryKeyValue: selectedPatient.npatientcode,\r\n      fetchUrl: \"patient/getPatient\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n    };\r\n\r\n    const inputParam = {\r\n      classUrl: this.props.Login.inputParam.classUrl,\r\n      methodUrl,\r\n      postParam,\r\n      inputData: {\r\n        userinfo: this.props.Login.userInfo,\r\n        patient: selectedPatient,\r\n      },\r\n      operation,\r\n      isClearSearch: this.props.Login.isClearSearch,\r\n    };\r\n\r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (\r\n      showEsign(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode,\r\n        ncontrolCode\r\n      )\r\n    ) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          openModal: true,\r\n          screenName: \"IDS_PATIENTMASTER\",\r\n          operation,\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n    }\r\n  };\r\n\r\n  validateEsign = () => {\r\n    const inputParam = {\r\n      inputData: {\r\n        userinfo: {\r\n          ...this.props.Login.userInfo,\r\n          sreason: this.state.selectedRecord[\"esigncomments\"],\r\n        },\r\n        password: this.state.selectedRecord[\"esignpassword\"],\r\n      },\r\n      screenData: this.props.Login.screenData,\r\n    };\r\n    this.props.validateEsignCredential(inputParam, \"openModal\");\r\n  };\r\n\r\n  handleExpandChange = (row, dataState) => {\r\n    const viewParam = {\r\n      userInfo: this.props.Login.userInfo,\r\n      primaryKeyField: \"npreregno\",\r\n      masterData: this.props.Login.masterData,\r\n    };\r\n\r\n    this.props.getTestParameter({\r\n      ...viewParam,\r\n      dataState,\r\n      primaryKeyValue: row[\"dataItem\"][viewParam.primaryKeyField],\r\n      viewRow: row[\"dataItem\"],\r\n    });\r\n  };\r\n\r\n  reloadData = () => {\r\n    this.searchRef.current.value = \"\";\r\n\r\n    const inputParam = {\r\n      inputData: { userinfo: this.props.Login.userInfo },\r\n      classUrl: \"patient\",\r\n      methodUrl: \"Patient\",\r\n      displayName: \"IDS_PATIENTMASTER\",\r\n      userInfo: this.props.Login.userInfo,\r\n      isClearSearch: this.props.Login.isClearSearch,\r\n    };\r\n\r\n    this.props.callService(inputParam);\r\n  };\r\n}\r\nexport default connect(mapStateToProps, {\r\n  callService,\r\n  crudMaster,\r\n  validateEsignCredential,\r\n  updateStore,\r\n  getPatientDetail,\r\n  getPatientComboService,\r\n  filterColumnData,\r\n  getTestParameter,\r\n  getPatientReport, getPatientDetailsByFilterQuery\r\n})(injectIntl(PatientMaster));\r\n"]},"metadata":{},"sourceType":"module"}