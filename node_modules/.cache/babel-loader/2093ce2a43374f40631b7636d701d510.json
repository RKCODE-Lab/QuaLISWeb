{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{Lims_JSON_stringify,sortData}from'../components/CommonScript';import rsapi from'../rsapi';import{initRequest}from'./LoginAction';import{DEFAULT_RETURN,REQUEST_FAILURE}from'./LoginTypes';import{toast}from'react-toastify';import{postCRUDOrganiseSearch}from'./ServiceAction';import{intl}from'../components/App';export var validateEsignCredentialStorage=function validateEsignCredentialStorage(inputParam,modalName,action){return function(dispatch){//dispatch(initRequest(true));\nif(inputParam&&inputParam.inputData&&inputParam.inputData.userinfo){inputParam.inputData[\"userinfo\"]=_objectSpread(_objectSpread({},inputParam.inputData.userinfo),{},{sformname:Lims_JSON_stringify(inputParam.inputData.userinfo.sformname),smodulename:Lims_JSON_stringify(inputParam.inputData.userinfo.smodulename)});}return rsapi.post(\"login/validateEsignCredential\",inputParam.inputData).then(function(response){if(response.data===\"Success\"){var methodUrl=inputParam[\"screenData\"][\"inputParam\"][\"methodUrl\"];inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"]=inputParam.inputData.userinfo;if(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]){delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];if(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]){delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];}// ALPD-2437 added for Type3 Component. Use selected record to clear esign values\nif(inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"]){delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignreason\"];delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignpassword\"];delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esigncomments\"];delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"agree\"];}}dispatch(crudMasterstorage(inputParam[\"screenData\"][\"inputParam\"],inputParam[\"screenData\"][\"masterData\"],modalName,undefined,action));}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{if(error.response.data==='IDS_SOURCEANDDESTINATIONMISMATCH'){action();}else{toast.warn(intl.formatMessage({id:error.response.data}));}}});};};export function crudMasterstorage(inputParam,masterData,modalName,defaultInput,action){return function(dispatch){dispatch(initRequest(true));var requestUrl='';if(inputParam.isFileupload){var formData=inputParam.formData;formData.append(\"userinfo\",JSON.stringify(inputParam.inputData.userinfo));requestUrl=rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,formData);}else{requestUrl=rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,_objectSpread({},inputParam.inputData));}return requestUrl.then(function(response){if(response.status===202){var _objectSpread2;//HttpStatus:Accepted\n//Use this block when u need to display any success message\nvar selectedRecordObj={};if(inputParam.selectedRecord){selectedRecordObj={selectedRecord:inputParam.selectedRecord};}dispatch({type:DEFAULT_RETURN,payload:_objectSpread((_objectSpread2={loadEsign:false},_defineProperty(_objectSpread2,modalName,false),_defineProperty(_objectSpread2,\"loading\",false),_objectSpread2),selectedRecordObj)});toast.success(response.data);}else if(response.status===208){var _objectSpread3;//HttpStatus:Accepted\n//208-Already Reported\nvar _selectedRecordObj={};if(inputParam.selectedRecord){_selectedRecordObj={selectedRecord:inputParam.selectedRecord};}dispatch({type:DEFAULT_RETURN,payload:_objectSpread((_objectSpread3={loadEsign:false},_defineProperty(_objectSpread3,modalName,false),_defineProperty(_objectSpread3,\"loading\",false),_objectSpread3),_selectedRecordObj)});toast.warn(response.data);}else{var _objectSpread4;var retrievedData=sortData(response.data);if(masterData===undefined||Array.isArray(retrievedData)){masterData=retrievedData;}else{masterData=_objectSpread(_objectSpread({},masterData),retrievedData);if(modalName===\"openModal\"&&inputParam.operation!==\"delete\"&&inputParam.operation!==\"prepare\"&&inputParam.operation!==\"create\"&&inputParam.operation!==\"copy\"){if(inputParam.postParam){if(masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]){var foundIndex=masterData[inputParam.postParam.inputListName].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField];});masterData[inputParam.postParam.inputListName][foundIndex]=masterData[inputParam.postParam.selectedObject];}else{var _foundIndex=masterData[inputParam.postParam.inputListName].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][0][inputParam.postParam.primaryKeyField];});masterData[inputParam.postParam.inputListName][_foundIndex]=masterData[inputParam.postParam.selectedObject][0];}}}else if(modalName===\"openModal\"&&inputParam.operation===\"create\"){if(inputParam.postParam&&inputParam.postParam.isSingleGet){masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]);//masterData[inputParam.postParam.selectedObject] = response.data;\nsortData(masterData);}}else if(modalName===\"openChildModal\"&&inputParam.operation===\"create\"){//searchedData\nif(inputParam.postParam&&inputParam.postParam.isSingleGet){var _foundIndex2=masterData[inputParam.postParam.inputListName].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField];});masterData[inputParam.postParam.inputListName][_foundIndex2]=masterData[inputParam.postParam.selectedObject];if(masterData[\"searchedData\"]!==undefined){var _foundIndex3=masterData[\"searchedData\"].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField];});masterData[\"searchedData\"][_foundIndex3]=masterData[inputParam.postParam.selectedObject];}sortData(masterData);}}else if(modalName===\"openModal\"&&inputParam.operation===\"copy\"){if(inputParam.postParam&&inputParam.postParam.isSingleGet){masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]);masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);}}else if(modalName===\"openModal\"&&(inputParam.operation===\"delete\"||inputParam.operation===\"prepare\")){if(inputParam.postParam&&inputParam.postParam.isSingleGet){if(inputParam.postParam.task===\"cancel\"){var _foundIndex4=masterData[inputParam.postParam.inputListName].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField];});masterData[inputParam.postParam.inputListName][_foundIndex4]=masterData[inputParam.postParam.selectedObject];}else{var list=masterData[inputParam.postParam.inputListName].filter(function(item){return item[inputParam.postParam.primaryKeyField]!==inputParam.postParam.primaryKeyValue;});masterData[inputParam.postParam.inputListName]=list;// const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\n//   x => x[inputParam.postParam.primaryKeyField] === inputParam.postParam.primaryKeyField\n// );\n// masterData[inputParam.postParam.inputListName].splice(foundIndex, 1)         \n}masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);}}}// (masterData);\nvar openModal=false;// let openChildModal= false;\nvar selectedRecord={};var activeSampleTab=inputParam.activeSampleTab?{activeSampleTab:inputParam.activeSampleTab}:'';var activeTestKey=inputParam.activeTestKey?{activeTestKey:inputParam.activeTestKey}:'';var showSample=inputParam.showSample?inputParam.showSample:'';var respObject=_objectSpread(_objectSpread(_objectSpread((_objectSpread4={masterData:masterData,inputParam:inputParam,modalName:modalName},_defineProperty(_objectSpread4,modalName,openModal),_defineProperty(_objectSpread4,\"operation\",inputParam.operation),_defineProperty(_objectSpread4,\"masterStatus\",\"\"),_defineProperty(_objectSpread4,\"errorCode\",undefined),_defineProperty(_objectSpread4,\"loadEsign\",false),_defineProperty(_objectSpread4,\"showEsign\",false),_defineProperty(_objectSpread4,\"selectedRecord\",selectedRecord),_defineProperty(_objectSpread4,\"loading\",false),_defineProperty(_objectSpread4,\"dataState\",inputParam.dataState),_defineProperty(_objectSpread4,\"selectedId\",inputParam.selectedId),_objectSpread4),activeSampleTab),activeTestKey),{},{showSample:showSample,design:[],//organisation: undefined\norganisation:inputParam.nextNode?{selectedNode:inputParam.nextNode,selectedNodeName:masterData.SelectedNodeName,primaryKeyValue:masterData.AddedChildPrimaryKey}:undefined,showConfirmAlert:inputParam.showConfirmAlert,loadPoolSource:inputParam.loadPoolSource,skip:inputParam.skip||undefined,take:inputParam.take||undefined,openPortal:false,importRetrieveOrDispose:false,isRetrieveOrDispose:false});if(inputParam.operation===\"create\"||inputParam.operation===\"copy\"){var _objectSpread5;if(inputParam.saveType===2){openModal=true;selectedRecord=defaultInput;}respObject=_objectSpread(_objectSpread({},respObject),{},(_objectSpread5={},_defineProperty(_objectSpread5,modalName,openModal),_defineProperty(_objectSpread5,\"selectedRecord\",selectedRecord),_objectSpread5));}if((modalName===\"openModal\"||modalName===\"openChildModal\")&&Object.keys(masterData).indexOf(\"searchedData\")!==-1&&masterData[\"searchedData\"]!==undefined){dispatch(postCRUDOrganiseSearch(inputParam.postParam,respObject));}else{dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{modalName:undefined})});}}}).catch(function(error){if(error.response.status===500){dispatch({type:REQUEST_FAILURE,payload:{error:error.message,loading:false// openPortal:this.props.Login.openPortal,\n//openModal:inputParam.openPortal?false:true\n}});}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.data==='IDS_SOURCEANDDESTINATIONMISMATCH'){action();}else{toast.warn(intl.formatMessage({id:error.response.data}));}}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/SampleStorageMoveAction.js"],"names":["Lims_JSON_stringify","sortData","rsapi","initRequest","DEFAULT_RETURN","REQUEST_FAILURE","toast","postCRUDOrganiseSearch","intl","validateEsignCredentialStorage","inputParam","modalName","action","dispatch","inputData","userinfo","sformname","smodulename","post","then","response","data","methodUrl","toLowerCase","crudMasterstorage","undefined","catch","error","type","payload","loading","status","formatMessage","id","message","warn","masterData","defaultInput","requestUrl","isFileupload","formData","append","JSON","stringify","classUrl","operation","selectedRecordObj","selectedRecord","loadEsign","success","retrievedData","Array","isArray","postParam","selectedObject","primaryKeyField","foundIndex","inputListName","findIndex","x","isSingleGet","push","task","list","filter","item","primaryKeyValue","openModal","activeSampleTab","activeTestKey","showSample","respObject","dataState","selectedId","design","organisation","nextNode","selectedNode","selectedNodeName","SelectedNodeName","AddedChildPrimaryKey","showConfirmAlert","loadPoolSource","skip","take","openPortal","importRetrieveOrDispose","isRetrieveOrDispose","saveType","Object","keys","indexOf"],"mappings":"qUAAC,OAASA,mBAAT,CAA8BC,QAA9B,KAA8C,4BAA9C,CACD,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,OAAQC,cAAR,CAAwBC,eAAxB,KAA8C,cAA9C,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,sBAAT,KAAuC,iBAAvC,CACA,OAASC,IAAT,KAAqB,mBAArB,CAEA,MAAO,IAAMC,CAAAA,8BAA8B,CAAG,QAAjCA,CAAAA,8BAAiC,CAACC,UAAD,CAAaC,SAAb,CAAuBC,MAAvB,CAAkC,CAC5E,MAAO,UAACC,QAAD,CAAc,CACnB;AACA,GAAIH,UAAU,EAAIA,UAAU,CAACI,SAAzB,EAAsCJ,UAAU,CAACI,SAAX,CAAqBC,QAA/D,CAAyE,CACvEL,UAAU,CAACI,SAAX,CAAqB,UAArB,iCACKJ,UAAU,CAACI,SAAX,CAAqBC,QAD1B,MAEEC,SAAS,CAAEhB,mBAAmB,CAACU,UAAU,CAACI,SAAX,CAAqBC,QAArB,CAA8BC,SAA/B,CAFhC,CAGEC,WAAW,CAAEjB,mBAAmB,CAACU,UAAU,CAACI,SAAX,CAAqBC,QAArB,CAA8BE,WAA/B,CAHlC,GAKD,CACD,MAAOf,CAAAA,KAAK,CAACgB,IAAN,CAAW,+BAAX,CAA4CR,UAAU,CAACI,SAAvD,EACJK,IADI,CACC,SAAAC,QAAQ,CAAI,CAChB,GAAIA,QAAQ,CAACC,IAAT,GAAkB,SAAtB,CAAiC,CAE/B,GAAMC,CAAAA,SAAS,CAAGZ,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,CAAlB,CACAA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoD,UAApD,EAAkEA,UAAU,CAACI,SAAX,CAAqBC,QAAvF,CAEA,GAAIL,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDY,SAAS,CAACC,WAAV,EAApD,CAAJ,CAAkF,CAEhF,MAAOb,CAAAA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDY,SAAS,CAACC,WAAV,EAApD,EAA6E,aAA7E,CAAP,CAEA,GAAIb,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDY,SAAS,CAACC,WAAV,EAApD,CAAJ,CAAkF,CAChF,MAAOb,CAAAA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDY,SAAS,CAACC,WAAV,EAApD,EAA6E,eAA7E,CAAP,CACA,MAAOb,CAAAA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDY,SAAS,CAACC,WAAV,EAApD,EAA6E,eAA7E,CAAP,CACA,MAAOb,CAAAA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDY,SAAS,CAACC,WAAV,EAApD,EAA6E,OAA7E,CAAP,CAGD,CAED;AACA,GAAIb,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,gBAAvC,CAAJ,CAA8D,CAE5D,MAAOA,CAAAA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,gBAAvC,EAAyD,aAAzD,CAAP,CACA,MAAOA,CAAAA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,gBAAvC,EAAyD,eAAzD,CAAP,CACA,MAAOA,CAAAA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,gBAAvC,EAAyD,eAAzD,CAAP,CACA,MAAOA,CAAAA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,gBAAvC,EAAyD,OAAzD,CAAP,CACD,CACF,CACDG,QAAQ,CAACW,iBAAiB,CAACd,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,CAAD,CAAyCA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,CAAzC,CAAiFC,SAAjF,CAA2Fc,SAA3F,CAAqGb,MAArG,CAAlB,CAAR,CACD,CACF,CA9BI,EA+BJc,KA/BI,CA+BE,SAAAC,KAAK,CAAI,CACdd,QAAQ,CAAC,CAAEe,IAAI,CAAExB,cAAR,CAAwByB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIH,KAAK,CAACP,QAAN,CAAeW,MAAf,GAA0B,GAA9B,CAAmC,CACjCzB,KAAK,CAACqB,KAAN,CAAYnB,IAAI,CAACwB,aAAL,CAAmB,CAAEC,EAAE,CAAEN,KAAK,CAACO,OAAZ,CAAnB,CAAZ,EACD,CAFD,IAEO,CACL,GAAGP,KAAK,CAACP,QAAN,CAAeC,IAAf,GAAsB,kCAAzB,CAA4D,CACxDT,MAAM,GACT,CAFD,IAEK,CACDN,KAAK,CAAC6B,IAAN,CAAW3B,IAAI,CAACwB,aAAL,CAAmB,CAAEC,EAAE,CAAEN,KAAK,CAACP,QAAN,CAAeC,IAArB,CAAnB,CAAX,EACH,CACF,CACF,CA1CI,CAAP,CA2CD,CApDD,CAqDD,CAtDI,CAyDL,MAAO,SAASG,CAAAA,iBAAT,CAA2Bd,UAA3B,CAAuC0B,UAAvC,CAAmDzB,SAAnD,CAA8D0B,YAA9D,CAA2EzB,MAA3E,CAAmF,CAExF,MAAO,UAAUC,QAAV,CAAoB,CACzBA,QAAQ,CAACV,WAAW,CAAC,IAAD,CAAZ,CAAR,CACA,GAAImC,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAI5B,UAAU,CAAC6B,YAAf,CAA6B,CAC3B,GAAMC,CAAAA,QAAQ,CAAG9B,UAAU,CAAC8B,QAA5B,CACAA,QAAQ,CAACC,MAAT,CAAgB,UAAhB,CAA4BC,IAAI,CAACC,SAAL,CAAejC,UAAU,CAACI,SAAX,CAAqBC,QAApC,CAA5B,EACAuB,UAAU,CAAGpC,KAAK,CAACgB,IAAN,CAAWR,UAAU,CAACkC,QAAX,CAAsB,GAAtB,CAA4BlC,UAAU,CAACmC,SAAvC,CAAmDnC,UAAU,CAACY,SAAzE,CAAoFkB,QAApF,CAAb,CACD,CAJD,IAIO,CACLF,UAAU,CAAGpC,KAAK,CAACgB,IAAN,CAAWR,UAAU,CAACkC,QAAX,CAAsB,GAAtB,CAA4BlC,UAAU,CAACmC,SAAvC,CAAmDnC,UAAU,CAACY,SAAzE,kBAAyFZ,UAAU,CAACI,SAApG,EAAb,CACD,CACD,MAAOwB,CAAAA,UAAU,CACdnB,IADI,CACC,SAAAC,QAAQ,CAAI,CAChB,GAAIA,QAAQ,CAACW,MAAT,GAAoB,GAAxB,CAA6B,oBAC3B;AACA;AACA,GAAIe,CAAAA,iBAAiB,CAAG,EAAxB,CACA,GAAIpC,UAAU,CAACqC,cAAf,CAA+B,CAC7BD,iBAAiB,CAAG,CAAEC,cAAc,CAAErC,UAAU,CAACqC,cAA7B,CAApB,CACD,CAEDlC,QAAQ,CAAC,CACPe,IAAI,CAAExB,cADC,CACeyB,OAAO,gCAC3BmB,SAAS,CAAE,KADgB,iCAE1BrC,SAF0B,CAEd,KAFc,2CAGlB,KAHkB,kBAIxBmC,iBAJwB,CADtB,CAAD,CAAR,CAQAxC,KAAK,CAAC2C,OAAN,CAAc7B,QAAQ,CAACC,IAAvB,EACD,CAjBD,IAkBK,IAAID,QAAQ,CAACW,MAAT,GAAoB,GAAxB,CAA6B,oBAChC;AACA;AACA,GAAIe,CAAAA,kBAAiB,CAAG,EAAxB,CACA,GAAIpC,UAAU,CAACqC,cAAf,CAA+B,CAC7BD,kBAAiB,CAAG,CAAEC,cAAc,CAAErC,UAAU,CAACqC,cAA7B,CAApB,CACD,CACDlC,QAAQ,CAAC,CACPe,IAAI,CAAExB,cADC,CACeyB,OAAO,gCAC3BmB,SAAS,CAAE,KADgB,iCAE1BrC,SAF0B,CAEd,KAFc,2CAGlB,KAHkB,kBAIxBmC,kBAJwB,CADtB,CAAD,CAAR,CASAxC,KAAK,CAAC6B,IAAN,CAAWf,QAAQ,CAACC,IAApB,EACD,CAjBI,IAkBA,oBACH,GAAM6B,CAAAA,aAAa,CAAGjD,QAAQ,CAACmB,QAAQ,CAACC,IAAV,CAA9B,CACA,GAAIe,UAAU,GAAKX,SAAf,EAA4B0B,KAAK,CAACC,OAAN,CAAcF,aAAd,CAAhC,CAA8D,CAC5Dd,UAAU,CAAGc,aAAb,CACD,CAFD,IAGK,CACHd,UAAU,gCACLA,UADK,EAELc,aAFK,CAAV,CAIA,GAAIvC,SAAS,GAAK,WAAd,EAA6BD,UAAU,CAACmC,SAAX,GAAyB,QAAtD,EAAkEnC,UAAU,CAACmC,SAAX,GAAyB,SAA3F,EACCnC,UAAU,CAACmC,SAAX,GAAyB,QAD1B,EACsCnC,UAAU,CAACmC,SAAX,GAAyB,MADnE,CAC2E,CAEzE,GAAInC,UAAU,CAAC2C,SAAf,CAA0B,CACxB,GAAIjB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBC,cAAtB,CAAV,CAAgD5C,UAAU,CAAC2C,SAAX,CAAqBE,eAArE,CAAJ,CAA2F,CACzF,GAAMC,CAAAA,UAAU,CAAGpB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CAA+CC,SAA/C,CACjB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACjD,UAAU,CAAC2C,SAAX,CAAqBE,eAAtB,CAAD,GAA4CnB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBC,cAAtB,CAAV,CAAgD5C,UAAU,CAAC2C,SAAX,CAAqBE,eAArE,CAAhD,EADgB,CAAnB,CAGAnB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CAA+CD,UAA/C,EAA6DpB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBC,cAAtB,CAAvE,CACD,CALD,IAKO,CACL,GAAME,CAAAA,WAAU,CAAGpB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CAA+CC,SAA/C,CACjB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACjD,UAAU,CAAC2C,SAAX,CAAqBE,eAAtB,CAAD,GAA4CnB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBC,cAAtB,CAAV,CAAgD,CAAhD,EAAmD5C,UAAU,CAAC2C,SAAX,CAAqBE,eAAxE,CAAhD,EADgB,CAAnB,CAGAnB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CAA+CD,WAA/C,EAA6DpB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBC,cAAtB,CAAV,CAAgD,CAAhD,CAA7D,CACD,CACF,CACF,CAhBD,IAiBK,IAAI3C,SAAS,GAAK,WAAd,EAA6BD,UAAU,CAACmC,SAAX,GAAyB,QAA1D,CAAoE,CACvE,GAAInC,UAAU,CAAC2C,SAAX,EAAwB3C,UAAU,CAAC2C,SAAX,CAAqBO,WAAjD,CAA8D,CAC5DxB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CAA+CI,IAA/C,CAAoDzC,QAAQ,CAACC,IAAT,CAAcX,UAAU,CAAC2C,SAAX,CAAqBC,cAAnC,CAApD,EACA;AACArD,QAAQ,CAACmC,UAAD,CAAR,CACD,CACF,CANI,IAOA,IAAIzB,SAAS,GAAK,gBAAd,EAAkCD,UAAU,CAACmC,SAAX,GAAyB,QAA/D,CAAyE,CAAC;AAC7E,GAAInC,UAAU,CAAC2C,SAAX,EAAwB3C,UAAU,CAAC2C,SAAX,CAAqBO,WAAjD,CAA8D,CAC5D,GAAMJ,CAAAA,YAAU,CAAGpB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CAA+CC,SAA/C,CACjB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACjD,UAAU,CAAC2C,SAAX,CAAqBE,eAAtB,CAAD,GAA4CnB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBC,cAAtB,CAAV,CAAgD5C,UAAU,CAAC2C,SAAX,CAAqBE,eAArE,CAAhD,EADgB,CAAnB,CAGAnB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CAA+CD,YAA/C,EAA6DpB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBC,cAAtB,CAAvE,CAEA,GAAIlB,UAAU,CAAC,cAAD,CAAV,GAA+BX,SAAnC,CAA8C,CAC5C,GAAM+B,CAAAA,YAAU,CAAGpB,UAAU,CAAC,cAAD,CAAV,CAA2BsB,SAA3B,CACjB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACjD,UAAU,CAAC2C,SAAX,CAAqBE,eAAtB,CAAD,GAA4CnB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBC,cAAtB,CAAV,CAAgD5C,UAAU,CAAC2C,SAAX,CAAqBE,eAArE,CAAhD,EADgB,CAAnB,CAGAnB,UAAU,CAAC,cAAD,CAAV,CAA2BoB,YAA3B,EAAyCpB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBC,cAAtB,CAAnD,CAED,CACDrD,QAAQ,CAACmC,UAAD,CAAR,CACD,CACF,CAhBI,IAiBA,IAAIzB,SAAS,GAAK,WAAd,EAA6BD,UAAU,CAACmC,SAAX,GAAyB,MAA1D,CAAkE,CACrE,GAAInC,UAAU,CAAC2C,SAAX,EAAwB3C,UAAU,CAAC2C,SAAX,CAAqBO,WAAjD,CAA8D,CAC5DxB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CAA+CI,IAA/C,CAAoDzC,QAAQ,CAACC,IAAT,CAAcX,UAAU,CAAC2C,SAAX,CAAqBC,cAAnC,CAApD,EACAlB,UAAU,gCAAQA,UAAR,EAAuBhB,QAAQ,CAACC,IAAhC,CAAV,CACApB,QAAQ,CAACmC,UAAD,CAAR,CACD,CACF,CANI,IAOA,IAAIzB,SAAS,GAAK,WAAd,GAA8BD,UAAU,CAACmC,SAAX,GAAyB,QAAzB,EAAqCnC,UAAU,CAACmC,SAAX,GAAyB,SAA5F,CAAJ,CAA4G,CAC/G,GAAInC,UAAU,CAAC2C,SAAX,EAAwB3C,UAAU,CAAC2C,SAAX,CAAqBO,WAAjD,CAA8D,CAC5D,GAAIlD,UAAU,CAAC2C,SAAX,CAAqBS,IAArB,GAA8B,QAAlC,CAA4C,CAC1C,GAAMN,CAAAA,YAAU,CAAGpB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CAA+CC,SAA/C,CACjB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACjD,UAAU,CAAC2C,SAAX,CAAqBE,eAAtB,CAAD,GAA4CnB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBC,cAAtB,CAAV,CAAgD5C,UAAU,CAAC2C,SAAX,CAAqBE,eAArE,CAAhD,EADgB,CAAnB,CAGAnB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CAA+CD,YAA/C,EAA6DpB,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBC,cAAtB,CAAvE,CACD,CALD,IAMK,CACH,GAAMS,CAAAA,IAAI,CAAG3B,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CACVO,MADU,CACH,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACvD,UAAU,CAAC2C,SAAX,CAAqBE,eAAtB,CAAJ,GAA+C7C,UAAU,CAAC2C,SAAX,CAAqBa,eAAxE,EADD,CAAb,CAEA9B,UAAU,CAAC1B,UAAU,CAAC2C,SAAX,CAAqBI,aAAtB,CAAV,CAAiDM,IAAjD,CAEA;AACA;AACA;AACA;AAED,CACD3B,UAAU,gCAAQA,UAAR,EAAuBhB,QAAQ,CAACC,IAAhC,CAAV,CACApB,QAAQ,CAACmC,UAAD,CAAR,CACD,CACF,CACF,CACD;AAEA,GAAI+B,CAAAA,SAAS,CAAG,KAAhB,CACA;AAEA,GAAIpB,CAAAA,cAAc,CAAG,EAArB,CACA,GAAIqB,CAAAA,eAAe,CAAG1D,UAAU,CAAC0D,eAAX,CAA6B,CAAEA,eAAe,CAAE1D,UAAU,CAAC0D,eAA9B,CAA7B,CAA+E,EAArG,CACA,GAAIC,CAAAA,aAAa,CAAG3D,UAAU,CAAC2D,aAAX,CAA2B,CAAEA,aAAa,CAAE3D,UAAU,CAAC2D,aAA5B,CAA3B,CAAyE,EAA7F,CACA,GAAIC,CAAAA,UAAU,CAAG5D,UAAU,CAAC4D,UAAX,CAAwB5D,UAAU,CAAC4D,UAAnC,CAAgD,EAAjE,CACA,GAAIC,CAAAA,UAAU,4DACZnC,UAAU,CAAVA,UADY,CAEZ1B,UAAU,CAAVA,UAFY,CAGZC,SAAS,CAATA,SAHY,iCAMXA,SANW,CAMCwD,SAND,6CAODzD,UAAU,CAACmC,SAPV,gDAQE,EARF,6CASDpB,SATC,6CAUD,KAVC,6CAWD,KAXC,kDAYZsB,cAZY,2CAaH,KAbG,6CAcDrC,UAAU,CAAC8D,SAdV,8CAeA9D,UAAU,CAAC+D,UAfX,kBAgBTL,eAhBS,EAiBTC,aAjBS,MAkBZC,UAAU,CAAVA,UAlBY,CAmBZI,MAAM,CAAE,EAnBI,CAqBZ;AACAC,YAAY,CAAEjE,UAAU,CAACkE,QAAX,CAAsB,CAClCC,YAAY,CAAEnE,UAAU,CAACkE,QADS,CAElCE,gBAAgB,CAAE1C,UAAU,CAAC2C,gBAFK,CAGlCb,eAAe,CAAE9B,UAAU,CAAC4C,oBAHM,CAAtB,CAKVvD,SA3BQ,CA4BZwD,gBAAgB,CAAEvE,UAAU,CAACuE,gBA5BjB,CA6BZC,cAAc,CAAExE,UAAU,CAACwE,cA7Bf,CA8BZC,IAAI,CAAEzE,UAAU,CAACyE,IAAX,EAAmB1D,SA9Bb,CA+BZ2D,IAAI,CAAE1E,UAAU,CAAC0E,IAAX,EAAmB3D,SA/Bb,CAgCZ4D,UAAU,CAAE,KAhCA,CAiCZC,uBAAuB,CAAC,KAjCZ,CAkCZC,mBAAmB,CAAC,KAlCR,EAAd,CAqCA,GAAI7E,UAAU,CAACmC,SAAX,GAAyB,QAAzB,EAAqCnC,UAAU,CAACmC,SAAX,GAAyB,MAAlE,CAA0E,oBACxE,GAAInC,UAAU,CAAC8E,QAAX,GAAwB,CAA5B,CAA+B,CAC7BrB,SAAS,CAAG,IAAZ,CACApB,cAAc,CAAGV,YAAjB,CAED,CACDkC,UAAU,gCAAQA,UAAR,uDAAqB5D,SAArB,CAAiCwD,SAAjC,kDAA4CpB,cAA5C,kBAAV,CACD,CACD,GAAI,CAACpC,SAAS,GAAK,WAAd,EAA6BA,SAAS,GAAK,gBAA5C,GAAiE8E,MAAM,CAACC,IAAP,CAAYtD,UAAZ,EAAwBuD,OAAxB,CAAgC,cAAhC,IAAoD,CAAC,CAAtH,EACCvD,UAAU,CAAC,cAAD,CAAV,GAA+BX,SADpC,CAC+C,CAC7CZ,QAAQ,CAACN,sBAAsB,CAACG,UAAU,CAAC2C,SAAZ,CAAuBkB,UAAvB,CAAvB,CAAR,CACD,CAHD,IAIK,CACH1D,QAAQ,CAAC,CAAEe,IAAI,CAAExB,cAAR,CAAwByB,OAAO,gCAAO0C,UAAP,MAAmB5D,SAAS,CAAEc,SAA9B,EAA/B,CAAD,CAAR,CACD,CACF,CACF,CAtLI,EAuLJC,KAvLI,CAuLE,SAAAC,KAAK,CAAI,CACd,GAAIA,KAAK,CAACP,QAAN,CAAeW,MAAf,GAA0B,GAA9B,CAAmC,CACjClB,QAAQ,CAAC,CACPe,IAAI,CAAEvB,eADC,CAEPwB,OAAO,CAAE,CACPF,KAAK,CAAEA,KAAK,CAACO,OADN,CAEPJ,OAAO,CAAE,KACT;AACA;AAJO,CAFF,CAAD,CAAR,CASD,CAVD,IAUO,CACLjB,QAAQ,CAAC,CAAEe,IAAI,CAAExB,cAAR,CAAwByB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAGH,KAAK,CAACP,QAAN,CAAeC,IAAf,GAAsB,kCAAzB,CAA4D,CACxDT,MAAM,GACT,CAFD,IAEK,CACDN,KAAK,CAAC6B,IAAN,CAAY3B,IAAI,CAACwB,aAAL,CAAmB,CAAEC,EAAE,CAAEN,KAAK,CAACP,QAAN,CAAeC,IAArB,CAAnB,CAAZ,EACH,CAEF,CACF,CA3MI,CAAP,CA4MD,CAtND,CAuND","sourcesContent":[" import { Lims_JSON_stringify, sortData } from '../components/CommonScript';\r\nimport rsapi from '../rsapi';\r\nimport { initRequest } from './LoginAction';\r\nimport {DEFAULT_RETURN, REQUEST_FAILURE} from './LoginTypes'; \r\nimport { toast } from 'react-toastify';   \r\nimport { postCRUDOrganiseSearch } from './ServiceAction';\r\nimport { intl } from '../components/App';\r\n\r\nexport const validateEsignCredentialStorage = (inputParam, modalName,action) => {\r\n    return (dispatch) => {\r\n      //dispatch(initRequest(true));\r\n      if (inputParam && inputParam.inputData && inputParam.inputData.userinfo) {\r\n        inputParam.inputData[\"userinfo\"] = {\r\n          ...inputParam.inputData.userinfo,\r\n          sformname: Lims_JSON_stringify(inputParam.inputData.userinfo.sformname),\r\n          smodulename: Lims_JSON_stringify(inputParam.inputData.userinfo.smodulename),\r\n        }\r\n      }\r\n      return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData)\r\n        .then(response => {\r\n          if (response.data === \"Success\") {\r\n  \r\n            const methodUrl = inputParam[\"screenData\"][\"inputParam\"][\"methodUrl\"];\r\n            inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\r\n  \r\n            if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]) {\r\n  \r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];\r\n  \r\n              if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]) {\r\n                delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];\r\n                delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];\r\n                delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];\r\n  \r\n  \r\n              }\r\n  \r\n              // ALPD-2437 added for Type3 Component. Use selected record to clear esign values\r\n              if (inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"]) {\r\n  \r\n                delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignreason\"];\r\n                delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignpassword\"];\r\n                delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esigncomments\"];\r\n                delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"agree\"];\r\n              }\r\n            }\r\n            dispatch(crudMasterstorage(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName,undefined,action))  \r\n          }\r\n        })\r\n        .catch(error => {\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n          if (error.response.status === 500) {\r\n            toast.error(intl.formatMessage({ id: error.message }));\r\n          } else {\r\n            if(error.response.data==='IDS_SOURCEANDDESTINATIONMISMATCH'){\r\n                action()\r\n            }else{\r\n                toast.warn(intl.formatMessage({ id: error.response.data }));\r\n            } \r\n          }\r\n        })\r\n    };\r\n  }\r\n\r\n\r\n  export function crudMasterstorage(inputParam, masterData, modalName, defaultInput,action) {\r\n\r\n    return function (dispatch) {\r\n      dispatch(initRequest(true));\r\n      let requestUrl = '';\r\n      if (inputParam.isFileupload) {\r\n        const formData = inputParam.formData;\r\n        formData.append(\"userinfo\", JSON.stringify(inputParam.inputData.userinfo));\r\n        requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, formData);\r\n      } else {\r\n        requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData });\r\n      }\r\n      return requestUrl\r\n        .then(response => {\r\n          if (response.status === 202) {\r\n            //HttpStatus:Accepted\r\n            //Use this block when u need to display any success message\r\n            let selectedRecordObj = {}\r\n            if (inputParam.selectedRecord) {\r\n              selectedRecordObj = { selectedRecord: inputParam.selectedRecord }\r\n            }\r\n  \r\n            dispatch({\r\n              type: DEFAULT_RETURN, payload: {\r\n                loadEsign: false,\r\n                [modalName]: false,\r\n                loading: false,\r\n                ...selectedRecordObj\r\n              }\r\n            })\r\n            toast.success(response.data);\r\n          }\r\n          else if (response.status === 208) {\r\n            //HttpStatus:Accepted\r\n            //208-Already Reported\r\n            let selectedRecordObj = {}\r\n            if (inputParam.selectedRecord) {\r\n              selectedRecordObj = { selectedRecord: inputParam.selectedRecord }\r\n            }\r\n            dispatch({\r\n              type: DEFAULT_RETURN, payload: {\r\n                loadEsign: false,\r\n                [modalName]: false,\r\n                loading: false,\r\n                ...selectedRecordObj\r\n  \r\n              }\r\n            })\r\n            toast.warn(response.data);\r\n          }\r\n          else {\r\n            const retrievedData = sortData(response.data);\r\n            if (masterData === undefined || Array.isArray(retrievedData)) {\r\n              masterData = retrievedData;\r\n            }\r\n            else {\r\n              masterData = {\r\n                ...masterData,\r\n                ...retrievedData\r\n              };\r\n              if (modalName === \"openModal\" && inputParam.operation !== \"delete\" && inputParam.operation !== \"prepare\"\r\n                && inputParam.operation !== \"create\" && inputParam.operation !== \"copy\") {\r\n  \r\n                if (inputParam.postParam) {\r\n                  if (masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]) {\r\n                    const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                      x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                    );\r\n                    masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n                  } else {\r\n                    const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                      x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][0][inputParam.postParam.primaryKeyField]\r\n                    );\r\n                    masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject][0];\r\n                  }\r\n                }\r\n              }\r\n              else if (modalName === \"openModal\" && inputParam.operation === \"create\") {\r\n                if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                  masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]);\r\n                  //masterData[inputParam.postParam.selectedObject] = response.data;\r\n                  sortData(masterData);\r\n                }\r\n              }\r\n              else if (modalName === \"openChildModal\" && inputParam.operation === \"create\") {//searchedData\r\n                if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                  const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                    x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                  );\r\n                  masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n  \r\n                  if (masterData[\"searchedData\"] !== undefined) {\r\n                    const foundIndex = masterData[\"searchedData\"].findIndex(\r\n                      x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                    );\r\n                    masterData[\"searchedData\"][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n  \r\n                  }\r\n                  sortData(masterData);\r\n                }\r\n              }\r\n              else if (modalName === \"openModal\" && inputParam.operation === \"copy\") {\r\n                if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                  masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]);\r\n                  masterData = { ...masterData, ...response.data };\r\n                  sortData(masterData);\r\n                }\r\n              }\r\n              else if (modalName === \"openModal\" && (inputParam.operation === \"delete\" || inputParam.operation === \"prepare\")) {\r\n                if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                  if (inputParam.postParam.task === \"cancel\") {\r\n                    const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                      x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                    );\r\n                    masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n                  }\r\n                  else {\r\n                    const list = masterData[inputParam.postParam.inputListName]\r\n                      .filter(item => item[inputParam.postParam.primaryKeyField] !== inputParam.postParam.primaryKeyValue)\r\n                    masterData[inputParam.postParam.inputListName] = list;\r\n  \r\n                    // const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                    //   x => x[inputParam.postParam.primaryKeyField] === inputParam.postParam.primaryKeyField\r\n                    // );\r\n                    // masterData[inputParam.postParam.inputListName].splice(foundIndex, 1)         \r\n  \r\n                  }\r\n                  masterData = { ...masterData, ...response.data };\r\n                  sortData(masterData);\r\n                }\r\n              }\r\n            }\r\n            // (masterData);\r\n  \r\n            let openModal = false;\r\n            // let openChildModal= false;\r\n  \r\n            let selectedRecord = {};\r\n            let activeSampleTab = inputParam.activeSampleTab ? { activeSampleTab: inputParam.activeSampleTab } : ''\r\n            let activeTestKey = inputParam.activeTestKey ? { activeTestKey: inputParam.activeTestKey } : ''\r\n            let showSample = inputParam.showSample ? inputParam.showSample : ''\r\n            let respObject = {\r\n              masterData,\r\n              inputParam,\r\n              modalName,\r\n              //   openChildModal,\r\n              //modalName:undefined,\r\n              [modalName]: openModal,\r\n              operation: inputParam.operation,\r\n              masterStatus: \"\",\r\n              errorCode: undefined,\r\n              loadEsign: false,\r\n              showEsign: false,\r\n              selectedRecord,\r\n              loading: false,\r\n              dataState: inputParam.dataState,\r\n              selectedId: inputParam.selectedId,\r\n              ...activeSampleTab,\r\n              ...activeTestKey,\r\n              showSample,\r\n              design: [],\r\n  \r\n              //organisation: undefined\r\n              organisation: inputParam.nextNode ? {\r\n                selectedNode: inputParam.nextNode,\r\n                selectedNodeName: masterData.SelectedNodeName,\r\n                primaryKeyValue: masterData.AddedChildPrimaryKey,\r\n  \r\n              } : undefined,\r\n              showConfirmAlert: inputParam.showConfirmAlert,\r\n              loadPoolSource: inputParam.loadPoolSource,\r\n              skip: inputParam.skip || undefined,\r\n              take: inputParam.take || undefined,\r\n              openPortal: false,\r\n              importRetrieveOrDispose:false,\r\n              isRetrieveOrDispose:false\r\n            }\r\n  \r\n            if (inputParam.operation === \"create\" || inputParam.operation === \"copy\") {\r\n              if (inputParam.saveType === 2) {\r\n                openModal = true;\r\n                selectedRecord = defaultInput;\r\n  \r\n              }\r\n              respObject = { ...respObject, [modalName]: openModal, selectedRecord };\r\n            }\r\n            if ((modalName === \"openModal\" || modalName === \"openChildModal\") && Object.keys(masterData).indexOf(\"searchedData\") !== -1\r\n              && masterData[\"searchedData\"] !== undefined) {\r\n              dispatch(postCRUDOrganiseSearch(inputParam.postParam, respObject))\r\n            }\r\n            else {\r\n              dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, modalName: undefined } })\r\n            }\r\n          }\r\n        })\r\n        .catch(error => { \r\n          if (error.response.status === 500) {\r\n            dispatch({\r\n              type: REQUEST_FAILURE,\r\n              payload: {\r\n                error: error.message,\r\n                loading: false,\r\n                // openPortal:this.props.Login.openPortal,\r\n                //openModal:inputParam.openPortal?false:true\r\n              }\r\n            });\r\n          } else { \r\n            dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            if(error.response.data==='IDS_SOURCEANDDESTINATIONMISMATCH'){\r\n                action()\r\n            }else{\r\n                toast.warn( intl.formatMessage({ id: error.response.data }));\r\n            } \r\n  \r\n          }\r\n        });\r\n    }\r\n  }"]},"metadata":{},"sourceType":"module"}