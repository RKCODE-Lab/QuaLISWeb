{"ast":null,"code":"import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Col,Row}from'react-bootstrap';import{injectIntl}from'react-intl';import DropZone from'../../components/dropzone/dropzone.component';import{attachmentType,transactionStatus}from'../../components/Enumeration';import{deleteAttachmentDropZone,onDropAttachFileList}from'../../components/CommonScript';import{viewAttachment}from'../../actions';import{connect}from'react-redux';import CustomSwitch from'../../components/custom-switch/custom-switch.component';import FormTextarea from'../../components/form-textarea/form-textarea.component';import FormSelectSearch from'../../components/form-select-search/form-select-search.component';import{toast}from'react-toastify';import{updateStore}from'../../actions';import FormNumericInput from'../../components/form-numeric-input/form-numeric-input.component';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var AddReleaseTestAttachment=/*#__PURE__*/function(_React$Component){_inherits(AddReleaseTestAttachment,_React$Component);var _super=_createSuper(AddReleaseTestAttachment);function AddReleaseTestAttachment(props){var _this;_classCallCheck(this,AddReleaseTestAttachment);_this=_super.call(this,props);_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};var lstRegistrationSampleArno=_this.props.masterData.RegistrationSampleArno;var lstRegistrationTest=_this.props.masterData.RegistrationTest;var RegistrationSampleArno=[];var RegistrationTest=[];var ntransactionsamplecode=\"\";var ntransactiontestcode=\"\";var ssamplearno=null;var stestsynonym=null;var needSubSample=_this.props.masterData.realRegSubTypeValue&&_this.props.masterData.realRegSubTypeValue.nneedsubsample;if(fieldName===\"npreregno\"){lstRegistrationSampleArno.map(function(item){if(item.item.npreregno===comboData.value){RegistrationSampleArno.push(item);}});if(!needSubSample){lstRegistrationTest.map(function(item){if(item.item.ntransactionsamplecode===RegistrationSampleArno[0].item.ntransactionsamplecode){RegistrationTest.push(item);}});ntransactionsamplecode={item:RegistrationSampleArno[0],label:RegistrationSampleArno[0].label,value:RegistrationSampleArno[0].value};ssamplearno=RegistrationSampleArno[0].item.ssamplearno;}var npreregno={item:comboData.item,label:comboData.label,value:comboData.value};var sarno=comboData.item.sarno;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{RegistrationSampleArno:RegistrationSampleArno,RegistrationTest:RegistrationTest,npreregno:npreregno,sarno:sarno,ntransactionsamplecode:ntransactionsamplecode,ntransactiontestcode:ntransactiontestcode,ssamplearno:ssamplearno,stestsynonym:stestsynonym});_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ntransactionsamplecode\"){lstRegistrationTest.map(function(item){if(item.item.ntransactionsamplecode===comboData.value){RegistrationTest.push(item);}});ntransactionsamplecode={item:comboData.item,label:comboData.label,value:comboData.value};ssamplearno=comboData.item.ssamplearno;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{RegistrationTest:RegistrationTest,ntransactionsamplecode:ntransactionsamplecode,ssamplearno:ssamplearno,ntransactiontestcode:ntransactiontestcode,stestsynonym:stestsynonym});_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ntransactiontestcode\"){ntransactiontestcode={item:comboData.item,label:comboData.label,value:comboData.value};stestsynonym=comboData.item.stestsynonym;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{ntransactiontestcode:ntransactiontestcode,stestsynonym:stestsynonym});_this.setState({selectedRecord:selectedRecord});}_this.props.childDataChange(selectedRecord);};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[event.target.name]=event.target.value;if(event.target.type==='checkbox'){if(event.target.name===\"nneedreport\"){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}}else{selectedRecord[event.target.name]=event.target.value;}if(selectedRecord[\"nneedreport\"]&&selectedRecord[\"nneedreport\"]===transactionStatus.YES&&selectedRecord[\"sfilename\"]!==undefined&&selectedRecord[\"sfilename\"].length>0){var fileFormat=false;var requiredFileFormat=_this.props.settings&&_this.props.settings[32]&&_this.props.settings[32].split(\",\");var fileNameSplit=selectedRecord[\"sfilename\"]&&Array.isArray(selectedRecord[\"sfilename\"])?selectedRecord[\"sfilename\"][0].name.split(\".\"):selectedRecord[\"sfilename\"].split(\".\");requiredFileFormat.map(function(item){if(item.slice(1)===fileNameSplit[fileNameSplit.length-1]){fileFormat=true;}});selectedRecord[\"nneedreport\"]=fileFormat?selectedRecord[\"nneedreport\"]:transactionStatus.NO;!fileFormat&&toast.warn(_this.props.intl.formatMessage({id:\"IDS_REPORTSUPPORTSONLYFILEFORMATS\"}));}_this.setState({selectedRecord:selectedRecord});_this.props.childDataChange(selectedRecord);};_this.onNumericInputOnChange=function(value,name){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});_this.props.childDataChange(selectedRecord);};_this.onDrop=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord});_this.props.childDataChange(selectedRecord);};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord});_this.props.childDataChange(selectedRecord);};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={loading:false,ReleaseTestAttachmentDetails:_this.props.ReleaseTestAttachmentDetails,dataState:dataState,openModal:false,inputParam:_this.props.inputParam,loadEsign:false,operation:_this.props.operation?_this.props.operation:\"\",selectedRecord:_this.props.selectedRecord,isneedReport:_this.props.isneedReport};return _this;}_createClass(AddReleaseTestAttachment,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.ReleaseTestAttachmentDetails!==prevProps.ReleaseTestAttachmentDetails){this.setState({ReleaseTestAttachmentDetails:this.props.ReleaseTestAttachmentDetails});}if(this.props.inputParam!==prevProps.inputParam){this.setState({inputParam:this.props.inputParam});}if(this.props.selectedRecord!==prevProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}if(this.props.operation!==prevProps.operation){this.setState({operation:this.props.operation});}}},{key:\"render\",value:function render(){var _this2=this;// const addReleaseTestAttachment =\n//     this.props.controlMap.has(\"AddReleaseTestAttachment\") &&\n//     this.props.controlMap.get(\"AddReleaseTestAttachment\").ncontrolcode;\nvar editReleaseTestAttachment=this.props.controlMap.has(\"EditReleaseTestAttachment\")&&this.props.controlMap.get(\"EditReleaseTestAttachment\").ncontrolcode;// const editReleaseTestAttachmentParam = {\n//     screenName: this.props.intl.formatMessage({ id: \"IDS_RELEASETESTATTACHMENT\" }),\n//     operation: \"update\", primaryKeyField: \"nreleasetestattachmentcode\",\n//     inputParam: this.state.inputParam,\n//     userInfo: this.props.userInfo,\n//     ncontrolCode: editReleaseTestAttachment\n// };\nthis.fieldsForReleasedTestAttachmentGrid=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"sfilename\",\"width\":\"200px\"},{\"idsName\":\"IDS_ARNO\",\"dataField\":\"sarno\",\"width\":\"200px\"}];{this.props.masterData.realRegSubTypeValue&&this.props.masterData.realRegSubTypeValue.nneedsubsample&&this.fieldsForReleasedTestAttachmentGrid.push({\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"200px\"});}this.fieldsForReleasedTestAttachmentGrid.push({\"idsName\":\"IDS_TESTSYNONYM\",\"dataField\":\"stestsynonym\",\"width\":\"200px\"},{\"idsName\":\"IDS_SCREENNAME\",\"dataField\":\"sformname\",\"width\":\"200px\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"200px\"},{\"idsName\":\"IDS_INCULDEINREPORT\",\"dataField\":\"sneedreport\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"susername\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERROLENAME\",\"dataField\":\"suserrolename\",\"width\":\"200px\"},{\"idsName\":\"IDS_CREATEDDATE\",\"dataField\":\"screateddate\",\"width\":\"200px\"});var sdescrption=this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK?\"slinkdescription\":\"sdescription\";return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(DropZone,{name:\"AttachmentFile\",label:this.props.intl.formatMessage({id:\"IDS_FILE\"}),isMandatory:true,accept:this.state.selectedRecord&&this.state.selectedRecord.nneedreport===transactionStatus.YES?this.props.settings&&this.props.settings[32]:\"\",maxFiles:1,minSize:0,maxSize:this.props.maxSize,onDrop:function onDrop(event){return _this2.onDrop(event,'sfilename',1);},deleteAttachment:this.deleteAttachment,actionType:this.actionType,fileNameLength:this.fileNameLength,editFiles:this.state.selectedRecord?this.state.selectedRecord:{},attachmentTypeCode:this.state.selectedRecord&&this.state.selectedRecord.selectedAttachmentFile&&this.state.selectedRecord.selectedAttachmentFile.nattachmenttypecode,fileSizeName:\"nfilesize\",fileName:\"sfilename\"})),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_ARNUMBER\"}),isSearchable:true,name:\"npreregno\",isDisabled:this.state.operation===\"create\"?false:true,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:true,options:this.state.selectedRecord?this.state.selectedRecord.RegistrationArno:[],optionId:\"npreregno\",optionValue:\"sarno\",value:this.state.selectedRecord?this.state.selectedRecord.npreregno:\"\",onChange:function onChange(event){return _this2.onComboChange(event,'npreregno');},closeMenuOnSelect:true,alphabeticalSort:true})),this.props.masterData.realRegSubTypeValue&&this.props.masterData.realRegSubTypeValue.nneedsubsample&&/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_SAMPLEARNO\"}),isSearchable:true,name:\"ntransactionsamplecode\",isDisabled:this.state.operation===\"create\"?false:true,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:true,options:this.state.selectedRecord?this.state.selectedRecord.RegistrationSampleArno:[],optionId:\"ntransactionsamplecode\",optionValue:\"ssamplearno\",value:this.state.selectedRecord?this.state.selectedRecord.ntransactionsamplecode:\"\",onChange:function onChange(event){return _this2.onComboChange(event,'ntransactionsamplecode');},closeMenuOnSelect:true,alphabeticalSort:true})),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_TESTSYNONYM\"}),isSearchable:true,name:\"ntransactiontestcode\",isDisabled:this.state.operation===\"create\"?false:true,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:true,options:this.state.selectedRecord?this.state.selectedRecord.RegistrationTest:[],optionId:\"ntransactiontestcode\",optionValue:\"stestsynonym\",value:this.state.selectedRecord?this.state.selectedRecord.ntransactiontestcode:\"\",onChange:function onChange(event){return _this2.onComboChange(event,'ntransactiontestcode');},closeMenuOnSelect:true,alphabeticalSort:true})),/*#__PURE__*/React.createElement(Col,{md:\"12\",className:\"mt-4\"},/*#__PURE__*/React.createElement(FormTextarea,{name:\"sheader\",label:this.props.intl.formatMessage({id:\"IDS_HEADER\"}),onChange:function onChange(event){return _this2.onInputOnChange(event,1);},placeholder:this.props.intl.formatMessage({id:\"IDS_HEADER\"}),value:this.state.selectedRecord&&this.state.selectedRecord[\"sheader\"]?this.state.selectedRecord[\"sheader\"]:\"\",rows:\"2\",required:false//isMandatory={true}\n,maxLength:255})),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormNumericInput,{name:\"nsortorder\",label:this.props.intl.formatMessage({id:\"IDS_SORT\"}),placeholder:this.props.intl.formatMessage({id:\"IDS_SORT\"}),type:\"number\",value:this.state.selectedRecord&&this.state.selectedRecord[\"nsortorder\"]!==null?this.state.selectedRecord[\"nsortorder\"]:null,max:99,min:0,strict:true,maxLength:2,onChange:function onChange(event){return _this2.onNumericInputOnChange(event,'nsortorder');},noStyle:true,precision:0,className:\"form-control\",isMandatory:false,errors:\"Please provide a valid number.\"})),/*#__PURE__*/React.createElement(Col,{md:\"12\",className:\"mt-4\"},/*#__PURE__*/React.createElement(FormTextarea,{name:sdescrption,label:this.props.intl.formatMessage({id:\"IDS_DESCRIPTION\"}),onChange:function onChange(event){return _this2.onInputOnChange(event,1);},placeholder:this.props.intl.formatMessage({id:\"IDS_DESCRIPTION\"}),value:this.state.selectedRecord&&this.state.selectedRecord[sdescrption]?this.state.selectedRecord[sdescrption]:\"\",rows:\"2\",required:false,maxLength:255})),/*#__PURE__*/React.createElement(Col,{md:\"12\",className:\"mt-4\"},/*#__PURE__*/React.createElement(CustomSwitch,{label:this.props.intl.formatMessage({id:\"IDS_INCULDEINREPORT\"}),type:\"switch\",name:\"nneedreport\",onChange:function onChange(event){return _this2.onInputOnChange(event,1);},defaultValue:false,isMandatory:false,required:true,checked:this.state.selectedRecord?this.state.selectedRecord.nneedreport===transactionStatus.YES?true:false:false}))));}}]);return AddReleaseTestAttachment;}(React.Component);export default connect(mapStateToProps,{viewAttachment:viewAttachment,updateStore:updateStore})(injectIntl(AddReleaseTestAttachment));","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/release/AddReleaseTestAttachment.jsx"],"names":["React","Col","Row","injectIntl","DropZone","attachmentType","transactionStatus","deleteAttachmentDropZone","onDropAttachFileList","viewAttachment","connect","CustomSwitch","FormTextarea","FormSelectSearch","toast","updateStore","FormNumericInput","mapStateToProps","state","Login","AddReleaseTestAttachment","props","onComboChange","comboData","fieldName","selectedRecord","lstRegistrationSampleArno","masterData","RegistrationSampleArno","lstRegistrationTest","RegistrationTest","ntransactionsamplecode","ntransactiontestcode","ssamplearno","stestsynonym","needSubSample","realRegSubTypeValue","nneedsubsample","map","item","npreregno","value","push","label","sarno","setState","childDataChange","onInputOnChange","event","target","name","type","checked","YES","NO","undefined","length","fileFormat","requiredFileFormat","settings","split","fileNameSplit","Array","isArray","slice","warn","intl","formatMessage","id","onNumericInputOnChange","onDrop","attachedFiles","maxSize","deleteAttachment","file","dataState","skip","take","parseInt","loading","ReleaseTestAttachmentDetails","openModal","inputParam","loadEsign","operation","isneedReport","prevProps","editReleaseTestAttachment","controlMap","has","get","ncontrolcode","fieldsForReleasedTestAttachmentGrid","sdescrption","nattachmenttypecode","LINK","nneedreport","actionType","fileNameLength","selectedAttachmentFile","RegistrationArno","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';\r\nimport DropZone from '../../components/dropzone/dropzone.component';\r\nimport { attachmentType, transactionStatus } from '../../components/Enumeration';\r\nimport { deleteAttachmentDropZone, onDropAttachFileList } from '../../components/CommonScript';\r\nimport { viewAttachment } from '../../actions';\r\nimport { connect } from 'react-redux';\r\nimport CustomSwitch from '../../components/custom-switch/custom-switch.component';\r\nimport FormTextarea from '../../components/form-textarea/form-textarea.component';\r\nimport FormSelectSearch from '../../components/form-select-search/form-select-search.component';\r\nimport { toast } from 'react-toastify';\r\nimport { updateStore } from '../../actions';\r\nimport FormNumericInput from '../../components/form-numeric-input/form-numeric-input.component';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass AddReleaseTestAttachment extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            loading: false,\r\n            ReleaseTestAttachmentDetails: this.props.ReleaseTestAttachmentDetails,\r\n            dataState: dataState,\r\n            openModal: false,\r\n            inputParam: this.props.inputParam,\r\n            loadEsign: false,\r\n            operation: this.props.operation ? this.props.operation : \"\",\r\n            selectedRecord: this.props.selectedRecord,\r\n            isneedReport: this.props.isneedReport\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.ReleaseTestAttachmentDetails !== prevProps.ReleaseTestAttachmentDetails) {\r\n            this.setState({ ReleaseTestAttachmentDetails: this.props.ReleaseTestAttachmentDetails })\r\n        }\r\n        if (this.props.inputParam !== prevProps.inputParam) {\r\n            this.setState({ inputParam: this.props.inputParam })\r\n        }\r\n        if (this.props.selectedRecord !== prevProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord })\r\n        }\r\n        if (this.props.operation !== prevProps.operation) {\r\n            this.setState({ operation: this.props.operation })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        // const addReleaseTestAttachment =\r\n        //     this.props.controlMap.has(\"AddReleaseTestAttachment\") &&\r\n        //     this.props.controlMap.get(\"AddReleaseTestAttachment\").ncontrolcode;\r\n\r\n        const editReleaseTestAttachment =\r\n            this.props.controlMap.has(\"EditReleaseTestAttachment\") &&\r\n            this.props.controlMap.get(\"EditReleaseTestAttachment\").ncontrolcode;\r\n\r\n        // const editReleaseTestAttachmentParam = {\r\n        //     screenName: this.props.intl.formatMessage({ id: \"IDS_RELEASETESTATTACHMENT\" }),\r\n        //     operation: \"update\", primaryKeyField: \"nreleasetestattachmentcode\",\r\n        //     inputParam: this.state.inputParam,\r\n        //     userInfo: this.props.userInfo,\r\n        //     ncontrolCode: editReleaseTestAttachment\r\n        // };\r\n\r\n        this.fieldsForReleasedTestAttachmentGrid =\r\n            [\r\n                { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"sfilename\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_ARNO\", \"dataField\": \"sarno\", \"width\": \"200px\" }\r\n            ]\r\n        {\r\n            this.props.masterData.realRegSubTypeValue && this.props.masterData.realRegSubTypeValue.nneedsubsample &&\r\n                this.fieldsForReleasedTestAttachmentGrid.push(\r\n                    { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"200px\" }\r\n                )\r\n        }\r\n        this.fieldsForReleasedTestAttachmentGrid.push(\r\n            { \"idsName\": \"IDS_TESTSYNONYM\", \"dataField\": \"stestsynonym\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_SCREENNAME\", \"dataField\": \"sformname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_INCULDEINREPORT\", \"dataField\": \"sneedreport\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_USERROLENAME\", \"dataField\": \"suserrolename\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_CREATEDDATE\", \"dataField\": \"screateddate\", \"width\": \"200px\" }\r\n        );\r\n\r\n        const sdescrption = this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK ? \"slinkdescription\" : \"sdescription\";\r\n        return (\r\n            <>\r\n                <Row>\r\n                    {\r\n                        <Col md={12}>\r\n                            <DropZone\r\n                                name='AttachmentFile'\r\n                                label={this.props.intl.formatMessage({ id: \"IDS_FILE\" })}\r\n                                isMandatory={true}\r\n                                accept={this.state.selectedRecord && this.state.selectedRecord.nneedreport === transactionStatus.YES ? this.props.settings && this.props.settings[32] : \"\"}\r\n                                maxFiles={1}\r\n                                minSize={0}\r\n                                maxSize={this.props.maxSize}\r\n                                onDrop={(event) => this.onDrop(event, 'sfilename', 1)}\r\n                                deleteAttachment={this.deleteAttachment}\r\n                                actionType={this.actionType}\r\n                                fileNameLength={this.fileNameLength}\r\n                                editFiles={this.state.selectedRecord ? this.state.selectedRecord : {}}\r\n                                attachmentTypeCode={this.state.selectedRecord && this.state.selectedRecord.selectedAttachmentFile && this.state.selectedRecord.selectedAttachmentFile.nattachmenttypecode}\r\n                                fileSizeName=\"nfilesize\"\r\n                                fileName=\"sfilename\"\r\n                            />\r\n                        </Col>\r\n                    }\r\n\r\n                    <Col md={12}>\r\n                        <FormSelectSearch\r\n                            formLabel={this.props.intl.formatMessage({ id: \"IDS_ARNUMBER\" })}\r\n                            isSearchable={true}\r\n                            name={\"npreregno\"}\r\n                            isDisabled={this.state.operation === \"create\" ? false : true}\r\n                            placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                            isMandatory={true}\r\n                            options={this.state.selectedRecord ? this.state.selectedRecord.RegistrationArno : []}\r\n                            optionId='npreregno'\r\n                            optionValue='sarno'\r\n                            value={this.state.selectedRecord ? this.state.selectedRecord.npreregno : \"\"}\r\n                            onChange={(event) => this.onComboChange(event, 'npreregno')}\r\n                            closeMenuOnSelect={true}\r\n                            alphabeticalSort={true}\r\n                        />\r\n                    </Col>\r\n\r\n                    {this.props.masterData.realRegSubTypeValue && this.props.masterData.realRegSubTypeValue.nneedsubsample &&\r\n                        <Col md={12}>\r\n                            <FormSelectSearch\r\n                                formLabel={this.props.intl.formatMessage({ id: \"IDS_SAMPLEARNO\" })}\r\n                                isSearchable={true}\r\n                                name={\"ntransactionsamplecode\"}\r\n                                isDisabled={this.state.operation === \"create\" ? false : true}\r\n                                placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                isMandatory={true}\r\n                                options={this.state.selectedRecord ? this.state.selectedRecord.RegistrationSampleArno : []}\r\n                                optionId='ntransactionsamplecode'\r\n                                optionValue='ssamplearno'\r\n                                value={this.state.selectedRecord ? this.state.selectedRecord.ntransactionsamplecode : \"\"}\r\n                                onChange={(event) => this.onComboChange(event, 'ntransactionsamplecode')}\r\n                                closeMenuOnSelect={true}\r\n                                alphabeticalSort={true}\r\n                            />\r\n                        </Col>\r\n                    }\r\n\r\n\r\n                    <Col md={12}>\r\n                        <FormSelectSearch\r\n                            formLabel={this.props.intl.formatMessage({ id: \"IDS_TESTSYNONYM\" })}\r\n                            isSearchable={true}\r\n                            name={\"ntransactiontestcode\"}\r\n                            isDisabled={this.state.operation === \"create\" ? false : true}\r\n                            placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                            isMandatory={true}\r\n                            options={this.state.selectedRecord ? this.state.selectedRecord.RegistrationTest : []}\r\n                            optionId='ntransactiontestcode'\r\n                            optionValue='stestsynonym'\r\n                            value={this.state.selectedRecord ? this.state.selectedRecord.ntransactiontestcode : \"\"}\r\n                            onChange={(event) => this.onComboChange(event, 'ntransactiontestcode')}\r\n                            closeMenuOnSelect={true}\r\n                            alphabeticalSort={true}\r\n                        />\r\n                    </Col>\r\n\r\n                    <Col md=\"12\" className=\"mt-4\">\r\n                        <FormTextarea\r\n                            name={\"sheader\"}\r\n                            label={this.props.intl.formatMessage({ id: \"IDS_HEADER\" })}\r\n                            onChange={(event) => this.onInputOnChange(event, 1)}\r\n                            placeholder={this.props.intl.formatMessage({ id: \"IDS_HEADER\" })}\r\n                            value={this.state.selectedRecord && this.state.selectedRecord[\"sheader\"] ? this.state.selectedRecord[\"sheader\"] : \"\"}\r\n                            rows=\"2\"\r\n                            required={false}\r\n                            //isMandatory={true}\r\n                            maxLength={255}\r\n                        >\r\n                        </FormTextarea>\r\n                    </Col>\r\n                    <Col md={12}>\r\n                        <FormNumericInput\r\n                            name={\"nsortorder\"}\r\n                            label={this.props.intl.formatMessage({ id: \"IDS_SORT\" })}\r\n                            placeholder={this.props.intl.formatMessage({ id: \"IDS_SORT\" })}\r\n                            type=\"number\"\r\n                            value={this.state.selectedRecord && this.state.selectedRecord[\"nsortorder\"] !== null ? this.state.selectedRecord[\"nsortorder\"] : null}\r\n                            max={99}\r\n                            min={0}\r\n                            strict={true}\r\n                            maxLength={2}\r\n                            onChange={(event) => this.onNumericInputOnChange(event, 'nsortorder')}\r\n                            noStyle={true}\r\n                            precision={0}\r\n                            className=\"form-control\"\r\n                            isMandatory={false}\r\n                            errors=\"Please provide a valid number.\"\r\n                        />\r\n                    </Col>\r\n\r\n                    <Col md=\"12\" className=\"mt-4\">\r\n                        <FormTextarea\r\n                            name={sdescrption}\r\n                            label={this.props.intl.formatMessage({ id: \"IDS_DESCRIPTION\" })}\r\n                            onChange={(event) => this.onInputOnChange(event, 1)}\r\n                            placeholder={this.props.intl.formatMessage({ id: \"IDS_DESCRIPTION\" })}\r\n                            value={this.state.selectedRecord && this.state.selectedRecord[sdescrption] ? this.state.selectedRecord[sdescrption] : \"\"}\r\n                            rows=\"2\"\r\n                            required={false}\r\n                            maxLength={255}\r\n                        >\r\n                        </FormTextarea>\r\n                    </Col>\r\n\r\n                    <Col md=\"12\" className=\"mt-4\">\r\n                        <CustomSwitch\r\n                            label={this.props.intl.formatMessage({ id: \"IDS_INCULDEINREPORT\" })}\r\n                            type=\"switch\"\r\n                            name={\"nneedreport\"}\r\n                            onChange={(event) => this.onInputOnChange(event, 1)}\r\n                            defaultValue={false}\r\n                            isMandatory={false}\r\n                            required={true}\r\n                            checked={this.state.selectedRecord ? this.state.selectedRecord.nneedreport === transactionStatus.YES ? true : false : false}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n            </>\r\n        );\r\n    };\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        let lstRegistrationSampleArno = this.props.masterData.RegistrationSampleArno;\r\n        let lstRegistrationTest = this.props.masterData.RegistrationTest;\r\n        let RegistrationSampleArno = [];\r\n        let RegistrationTest = [];\r\n        let ntransactionsamplecode = \"\";\r\n        let ntransactiontestcode = \"\";\r\n        let ssamplearno = null;\r\n        let stestsynonym = null;\r\n        const needSubSample = this.props.masterData.realRegSubTypeValue && this.props.masterData.realRegSubTypeValue.nneedsubsample;\r\n        if (fieldName === \"npreregno\") {\r\n            lstRegistrationSampleArno.map(item => {\r\n                if (item.item.npreregno === comboData.value) {\r\n                    RegistrationSampleArno.push(item);\r\n                }\r\n            });\r\n            if (!needSubSample) {\r\n                lstRegistrationTest.map(item => {\r\n                    if (item.item.ntransactionsamplecode === RegistrationSampleArno[0].item.ntransactionsamplecode) {\r\n                        RegistrationTest.push(item);\r\n                    }\r\n                });\r\n                ntransactionsamplecode = {\r\n                    item: RegistrationSampleArno[0],\r\n                    label: RegistrationSampleArno[0].label,\r\n                    value: RegistrationSampleArno[0].value\r\n                }\r\n                ssamplearno = RegistrationSampleArno[0].item.ssamplearno\r\n            }\r\n            let npreregno = {\r\n                item: comboData.item,\r\n                label: comboData.label,\r\n                value: comboData.value\r\n            };\r\n            let sarno = comboData.item.sarno;\r\n            selectedRecord = {\r\n                ...selectedRecord, RegistrationSampleArno, RegistrationTest, npreregno\r\n                , sarno, ntransactionsamplecode, ntransactiontestcode, ssamplearno, stestsynonym\r\n            };\r\n            this.setState({ selectedRecord });\r\n        } else if (fieldName === \"ntransactionsamplecode\") {\r\n            lstRegistrationTest.map(item => {\r\n                if (item.item.ntransactionsamplecode === comboData.value) {\r\n                    RegistrationTest.push(item);\r\n                }\r\n            });\r\n            ntransactionsamplecode = {\r\n                item: comboData.item,\r\n                label: comboData.label,\r\n                value: comboData.value\r\n            }\r\n            ssamplearno = comboData.item.ssamplearno;\r\n            selectedRecord = {\r\n                ...selectedRecord, RegistrationTest, ntransactionsamplecode\r\n                , ssamplearno, ntransactiontestcode, stestsynonym\r\n            };\r\n            this.setState({ selectedRecord });\r\n        } else if (fieldName === \"ntransactiontestcode\") {\r\n            ntransactiontestcode = {\r\n                item: comboData.item,\r\n                label: comboData.label,\r\n                value: comboData.value\r\n            }\r\n            stestsynonym = comboData.item.stestsynonym;\r\n            selectedRecord = {\r\n                ...selectedRecord, ntransactiontestcode\r\n                , stestsynonym\r\n            }\r\n            this.setState({ selectedRecord });\r\n        }\r\n        this.props.childDataChange(selectedRecord);\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[event.target.name] = event.target.value;\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"nneedreport\") {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n            }\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        if (selectedRecord[\"nneedreport\"] && selectedRecord[\"nneedreport\"] === transactionStatus.YES && selectedRecord[\"sfilename\"] !== undefined && selectedRecord[\"sfilename\"].length > 0) {\r\n            let fileFormat = false;\r\n            let requiredFileFormat = this.props.settings && this.props.settings[32] && this.props.settings[32].split(\",\");\r\n            let fileNameSplit = selectedRecord[\"sfilename\"] && Array.isArray(selectedRecord[\"sfilename\"]) ? selectedRecord[\"sfilename\"][0].name.split(\".\") : selectedRecord[\"sfilename\"].split(\".\");\r\n            requiredFileFormat.map(item => {\r\n                if (item.slice(1) === fileNameSplit[fileNameSplit.length - 1]) {\r\n                    fileFormat = true;\r\n                }\r\n            });\r\n            selectedRecord[\"nneedreport\"] = fileFormat ? selectedRecord[\"nneedreport\"] : transactionStatus.NO;\r\n            !fileFormat && toast.warn(this.props.intl.formatMessage({ id: \"IDS_REPORTSUPPORTSONLYFILEFORMATS\" }));\r\n        }\r\n        this.setState({ selectedRecord })\r\n        this.props.childDataChange(selectedRecord);\r\n    }\r\n    onNumericInputOnChange = (value, name) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n        this.props.childDataChange(selectedRecord);\r\n    }\r\n\r\n    onDrop = (attachedFiles, fieldName, maxSize) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize)\r\n        this.setState({ selectedRecord });\r\n        this.props.childDataChange(selectedRecord);\r\n    }\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n        this.setState({\r\n            selectedRecord\r\n        });\r\n        this.props.childDataChange(selectedRecord);\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { viewAttachment, updateStore })(injectIntl(AddReleaseTestAttachment));"]},"metadata":{},"sourceType":"module"}