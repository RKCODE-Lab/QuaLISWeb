{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Window } from '@progress/kendo-react-dialogs';\nimport { TabStrip, TabStripTab } from '@progress/kendo-react-layout';\nimport { registerForLocalization, provideLocalizationService } from '@progress/kendo-react-intl';\nimport { messages } from './../messages';\nimport { EditorToolsSettings } from './../config/toolsSettings';\nimport { formatString } from './../tools/utils';\nimport { find, replace, replaceAll, findAll, TextSelection, textHighlightKey, selectedLineTextOnly } from '@progress/kendo-editor-common';\nvar enter = 13,\n    esc = 27;\nvar checkboxProps = {\n  className: 'k-checkbox',\n  type: 'checkbox'\n};\nvar settings = EditorToolsSettings.findAndReplace;\n/**\n * @hidden\n */\n\nvar FindAndReplaceDialog =\n/** @class */\nfunction (_super) {\n  __extends(FindAndReplaceDialog, _super);\n\n  function FindAndReplaceDialog(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.onTabSelect = function (event) {\n      _this.setState({\n        selectedTab: event.selected\n      });\n    };\n\n    _this.onClose = function () {\n      var view = _this.props.view;\n      var state = view.state;\n      var transaction = state.tr.setSelection(TextSelection.create(state.doc, state.selection.from, state.selection.to));\n      view.updateState(state.apply(transaction));\n      view.focus();\n\n      _this.props.onClose.call(undefined);\n    };\n\n    _this.matchesMessage = function (locMessage) {\n      var matches = _this.state.matches;\n      var nextMatch = _this.state.nextMatch;\n      var cur = 0,\n          all = 0;\n\n      if (matches && nextMatch) {\n        var current = matches.findIndex(function (s) {\n          return s.eq(nextMatch);\n        });\n        cur = current === -1 ? matches.length : current + 1;\n        all = matches.length;\n      }\n\n      return formatString(locMessage, cur, all);\n    };\n\n    _this.onFindNext = function () {\n      _this.onFind();\n    };\n\n    _this.onFindPrev = function () {\n      _this.onFind(true);\n    };\n\n    _this.onFind = function (backward) {\n      if (backward === void 0) {\n        backward = false;\n      }\n\n      var view = _this.props.view;\n      var _a = _this.state,\n          text = _a.searchText,\n          matchCase = _a.matchCase,\n          matchCyclic = _a.matchCyclic,\n          matchWord = _a.matchWord,\n          useRegExp = _a.useRegExp;\n      var searchOptions = {\n        text: text,\n        matchWord: matchWord,\n        matchCase: matchCase,\n        useRegExp: useRegExp,\n        backward: backward,\n        matchCyclic: matchCyclic\n      };\n      var selectionResult = find(view.state, searchOptions);\n\n      if (selectionResult) {\n        var transaction = view.state.tr.setSelection(selectionResult);\n        transaction.scrollIntoView();\n        view.updateState(view.state.apply(transaction));\n\n        _this.setState({\n          nextMatch: selectionResult\n        });\n      }\n    };\n\n    _this.onReplace = function () {\n      var view = _this.props.view;\n      var selection = view.state.selection;\n      var replaceText = _this.state.replaceText;\n\n      if (!selection.empty) {\n        var start = selection.from;\n        var end = start + replaceText.length;\n        var transaction = replace(selection, replaceText, view.state.tr);\n        transaction.setSelection(TextSelection.create(transaction.doc, start, end));\n        transaction.scrollIntoView();\n        view.dispatch(transaction);\n\n        _this.setNextState({});\n      }\n    };\n\n    _this.onReplaceAll = function () {\n      var view = _this.props.view;\n      var _a = _this.state,\n          searchText = _a.searchText,\n          replaceText = _a.replaceText,\n          matchCase = _a.matchCase,\n          matchWord = _a.matchWord,\n          useRegExp = _a.useRegExp;\n      var searchOptions = {\n        text: searchText,\n        matchWord: matchWord,\n        matchCase: matchCase,\n        useRegExp: useRegExp\n      };\n      view.dispatch(replaceAll(view.state, replaceText, searchOptions));\n\n      _this.setNextState({});\n    };\n\n    _this.onKeyDown = function (event) {\n      if (event.keyCode === enter) {\n        _this.onFindNext();\n      } else if (event.keyCode === esc) {\n        _this.onClose();\n      }\n    };\n\n    _this.onMatchCaseChecked = function (e) {\n      return _this.setNextState({\n        matchCase: e.target.checked\n      });\n    };\n\n    _this.onMatchWordChecked = function (e) {\n      return _this.setNextState({\n        matchWord: e.target.checked\n      });\n    };\n\n    _this.onMatchCyclicChecked = function (e) {\n      return _this.setNextState({\n        matchCyclic: e.target.checked\n      });\n    };\n\n    _this.onUseRegExpChecked = function (e) {\n      return _this.setNextState({\n        useRegExp: e.target.checked\n      });\n    };\n\n    _this.onSearchChange = function (e) {\n      return _this.setNextState({\n        searchText: e.target.value\n      });\n    };\n\n    _this.onReplaceChange = function (e) {\n      return _this.setNextState({\n        replaceText: e.target.value\n      });\n    };\n\n    _this.setNextState = function (next) {\n      var nextState = __assign({}, _this.state, next, {\n        matches: undefined,\n        nextMatch: undefined\n      });\n\n      var view = _this.props.view;\n\n      if (nextState.searchText) {\n        var text = nextState.searchText,\n            matchWord = nextState.matchWord,\n            matchCase = nextState.matchCase,\n            useRegExp = nextState.useRegExp,\n            matchCyclic = nextState.matchCyclic;\n        var searchOptions = {\n          text: text,\n          matchWord: matchWord,\n          matchCase: matchCase,\n          useRegExp: useRegExp\n        };\n        var selection_1 = view.state.selection;\n        var matches = findAll(view.state.doc, searchOptions);\n        var nextMatch = !_this.state.searchText && matches[0] || matches.find(function (match) {\n          return match.from >= selection_1.from;\n        }) || matchCyclic && matches[0] || undefined;\n\n        _this.setState(__assign({}, nextState, {\n          matches: matches,\n          nextMatch: nextMatch\n        }));\n      } else {\n        _this.setState(nextState);\n      }\n    };\n\n    _this.state = {\n      selectedTab: 0,\n      searchText: selectedLineTextOnly(props.view.state),\n      replaceText: '',\n      matchCase: false,\n      matchWord: false,\n      matchCyclic: false,\n      useRegExp: false\n    };\n    return _this;\n  }\n\n  Object.defineProperty(FindAndReplaceDialog.prototype, \"settings\", {\n    get: function get() {\n      return this.props.settings || settings;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  FindAndReplaceDialog.prototype.componentDidUpdate = function (_, prevState) {\n    var view = this.props.view;\n    var _a = this.state,\n        _b = _a.matches,\n        matches = _b === void 0 ? [] : _b,\n        nextMatch = _a.nextMatch;\n\n    if (prevState.nextMatch !== nextMatch) {\n      var state = view.state; // highlight selection\n\n      var tr = state.tr;\n      var highlights_1 = [];\n      matches.forEach(function (m) {\n        highlights_1.push({\n          from: m.from,\n          to: m.to,\n          attrs: {\n            class: nextMatch && m.eq(nextMatch) ? 'k-text-selected' : 'k-text-highlighted'\n          }\n        });\n      });\n      tr.setMeta(textHighlightKey, highlights_1);\n      tr.setSelection(nextMatch || TextSelection.create(state.doc, state.selection.from));\n      view.dispatch(tr);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  FindAndReplaceDialog.prototype.render = function () {\n    var localization = provideLocalizationService(this);\n    var _a = this.settings.messages,\n        findReplaceDialogTitle = _a.findReplaceDialogTitle,\n        findReplaceTabFind = _a.findReplaceTabFind,\n        findReplaceTabReplace = _a.findReplaceTabReplace,\n        findReplaceFindWhat = _a.findReplaceFindWhat,\n        findReplaceReplaceWith = _a.findReplaceReplaceWith,\n        findReplaceReplace = _a.findReplaceReplace,\n        findReplaceReplaceAll = _a.findReplaceReplaceAll,\n        findReplaceMatchCase = _a.findReplaceMatchCase,\n        findReplaceMatchWord = _a.findReplaceMatchWord,\n        findReplaceMatchCyclic = _a.findReplaceMatchCyclic,\n        findReplaceUseRegExp = _a.findReplaceUseRegExp,\n        findReplacePrevMatch = _a.findReplacePrevMatch,\n        findReplaceNextMatch = _a.findReplaceNextMatch,\n        findReplaceMatches = _a.findReplaceMatches;\n    var _b = this.state,\n        matchCase = _b.matchCase,\n        matchWord = _b.matchWord,\n        matchCyclic = _b.matchCyclic,\n        useRegExp = _b.useRegExp,\n        searchText = _b.searchText,\n        replaceText = _b.replaceText,\n        nextMatch = _b.nextMatch;\n    var checkboxes = React.createElement(\"div\", {\n      className: \"k-search-options\"\n    }, React.createElement(\"span\", null, React.createElement(\"input\", __assign({}, checkboxProps, {\n      id: \"match-case\",\n      checked: matchCase,\n      onChange: this.onMatchCaseChecked\n    })), React.createElement(\"label\", {\n      htmlFor: \"match-case\",\n      className: \"k-checkbox-label\"\n    }, localization.toLanguageString(findReplaceMatchCase, messages[findReplaceMatchCase]))), React.createElement(\"span\", null, React.createElement(\"input\", __assign({}, checkboxProps, {\n      id: \"match-whole\",\n      checked: matchWord,\n      onChange: this.onMatchWordChecked\n    })), React.createElement(\"label\", {\n      htmlFor: \"match-whole\",\n      className: \"k-checkbox-label\"\n    }, localization.toLanguageString(findReplaceMatchWord, messages[findReplaceMatchWord]))), React.createElement(\"span\", null, React.createElement(\"input\", __assign({}, checkboxProps, {\n      id: \"match-cyclic\",\n      checked: matchCyclic,\n      onChange: this.onMatchCyclicChecked\n    })), React.createElement(\"label\", {\n      htmlFor: \"match-cyclic\",\n      className: \"k-checkbox-label\"\n    }, localization.toLanguageString(findReplaceMatchCyclic, messages[findReplaceMatchCyclic]))), React.createElement(\"span\", null, React.createElement(\"input\", __assign({}, checkboxProps, {\n      id: \"regular-expression\",\n      checked: useRegExp,\n      onChange: this.onUseRegExpChecked\n    })), React.createElement(\"label\", {\n      htmlFor: \"regular-expression\",\n      className: \"k-checkbox-label\"\n    }, localization.toLanguageString(findReplaceUseRegExp, messages[findReplaceUseRegExp]))));\n    var navigation = React.createElement(\"div\", {\n      className: \"k-matches-container\"\n    }, React.createElement(\"button\", {\n      className: \"k-button k-flat k-primary\",\n      onClick: this.onFindPrev\n    }, React.createElement(\"span\", {\n      className: \"k-icon k-i-arrow-chevron-left\"\n    }), localization.toLanguageString(findReplacePrevMatch, messages[findReplacePrevMatch])), React.createElement(\"span\", null, this.matchesMessage(localization.toLanguageString(findReplaceMatches, messages[findReplaceMatches]))), React.createElement(\"button\", {\n      className: \"k-button k-flat k-primary\",\n      onClick: this.onFindNext\n    }, localization.toLanguageString(findReplaceNextMatch, messages[findReplaceNextMatch]), React.createElement(\"span\", {\n      className: \"k-icon k-i-arrow-chevron-right\"\n    })));\n    var findWhat = React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"k-edit-label\"\n    }, React.createElement(\"label\", {\n      htmlFor: \"findWhat\"\n    }, localization.toLanguageString(findReplaceFindWhat, messages[findReplaceFindWhat]))), React.createElement(\"div\", {\n      className: \"k-edit-field\"\n    }, React.createElement(\"input\", {\n      id: \"findWhat\",\n      type: \"text\",\n      className: \"k-textbox\",\n      value: searchText,\n      onChange: this.onSearchChange,\n      onFocus: this.onSearchChange,\n      onKeyDown: this.onKeyDown,\n      autoFocus: true\n    })));\n    var replaceWith = React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"k-edit-label\"\n    }, React.createElement(\"label\", {\n      htmlFor: \"replaceWith\"\n    }, localization.toLanguageString(findReplaceReplaceWith, messages[findReplaceReplaceWith]))), React.createElement(\"div\", {\n      className: \"k-edit-field\"\n    }, React.createElement(\"input\", {\n      id: \"replaceWith\",\n      className: \"k-textbox\",\n      type: \"text\",\n      value: replaceText,\n      onChange: this.onReplaceChange\n    })));\n    return ReactDOM.createPortal(React.createElement(Window, {\n      title: localization.toLanguageString(findReplaceDialogTitle, messages[findReplaceDialogTitle]),\n      onClose: this.onClose,\n      style: {\n        width: 'auto',\n        height: 'auto',\n        userSelect: 'none'\n      },\n      resizable: false,\n      minimizeButton: function minimizeButton() {\n        return null;\n      },\n      maximizeButton: function maximizeButton() {\n        return null;\n      }\n    }, React.createElement(TabStrip, {\n      selected: this.state.selectedTab,\n      className: \"k-editor-find-replace\",\n      onSelect: this.onTabSelect,\n      animation: false\n    }, React.createElement(TabStripTab, {\n      title: localization.toLanguageString(findReplaceTabFind, messages[findReplaceTabFind])\n    }, React.createElement(\"div\", {\n      className: \"k-edit-form-container\"\n    }, findWhat), checkboxes, navigation), React.createElement(TabStripTab, {\n      title: localization.toLanguageString(findReplaceTabReplace, messages[findReplaceTabReplace])\n    }, React.createElement(\"div\", {\n      className: \"k-edit-form-container\"\n    }, findWhat, replaceWith), React.createElement(\"div\", {\n      className: \"k-actions k-hstack k-justify-content-end\"\n    }, React.createElement(\"button\", {\n      className: \"k-button\",\n      disabled: !Boolean(nextMatch),\n      onClick: this.onReplace\n    }, localization.toLanguageString(findReplaceReplace, messages[findReplaceReplace])), React.createElement(\"button\", {\n      className: \"k-button\",\n      disabled: !Boolean(nextMatch),\n      onClick: this.onReplaceAll\n    }, localization.toLanguageString(findReplaceReplaceAll, messages[findReplaceReplaceAll]))), checkboxes, navigation))), document.body);\n  };\n\n  return FindAndReplaceDialog;\n}(React.Component);\n\nexport { FindAndReplaceDialog };\nregisterForLocalization(FindAndReplaceDialog);","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/node_modules/@progress/kendo-react-editor/dist/es/dialogs/FindReplace.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","React","ReactDOM","Window","TabStrip","TabStripTab","registerForLocalization","provideLocalizationService","messages","EditorToolsSettings","formatString","find","replace","replaceAll","findAll","TextSelection","textHighlightKey","selectedLineTextOnly","enter","esc","checkboxProps","className","type","settings","findAndReplace","FindAndReplaceDialog","_super","props","_this","onTabSelect","event","setState","selectedTab","selected","onClose","view","state","transaction","tr","setSelection","doc","selection","from","to","updateState","focus","undefined","matchesMessage","locMessage","matches","nextMatch","cur","all","current","findIndex","eq","onFindNext","onFind","onFindPrev","backward","_a","text","searchText","matchCase","matchCyclic","matchWord","useRegExp","searchOptions","selectionResult","scrollIntoView","onReplace","replaceText","empty","start","end","dispatch","setNextState","onReplaceAll","onKeyDown","keyCode","onMatchCaseChecked","e","target","checked","onMatchWordChecked","onMatchCyclicChecked","onUseRegExpChecked","onSearchChange","value","onReplaceChange","next","nextState","selection_1","match","defineProperty","get","enumerable","configurable","componentDidUpdate","_","prevState","_b","highlights_1","forEach","m","push","attrs","class","setMeta","render","localization","findReplaceDialogTitle","findReplaceTabFind","findReplaceTabReplace","findReplaceFindWhat","findReplaceReplaceWith","findReplaceReplace","findReplaceReplaceAll","findReplaceMatchCase","findReplaceMatchWord","findReplaceMatchCyclic","findReplaceUseRegExp","findReplacePrevMatch","findReplaceNextMatch","findReplaceMatches","checkboxes","createElement","id","onChange","htmlFor","toLanguageString","navigation","onClick","findWhat","Fragment","onFocus","autoFocus","replaceWith","createPortal","title","style","width","height","userSelect","resizable","minimizeButton","maximizeButton","onSelect","animation","disabled","Boolean","document","body","Component"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,cAAa,GAAG,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,cAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd;AAAiB,YAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAA1C;AAAwD,KAF9E;;AAGA,WAAOP,cAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,cAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaA,IAAII,QAAQ,GAAI,QAAQ,KAAKA,QAAd,IAA2B,YAAY;AAClDA,EAAAA,QAAQ,GAAGV,MAAM,CAACW,MAAP,IAAiB,UAASC,CAAT,EAAY;AACpC,SAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAGC,SAAS,CAACC,MAAjC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;AACjDD,MAAAA,CAAC,GAAGG,SAAS,CAACF,CAAD,CAAb;;AACA,WAAK,IAAIV,CAAT,IAAcS,CAAd;AAAiB,YAAIb,MAAM,CAACQ,SAAP,CAAiBH,cAAjB,CAAgCa,IAAhC,CAAqCL,CAArC,EAAwCT,CAAxC,CAAJ,EACbQ,CAAC,CAACR,CAAD,CAAD,GAAOS,CAAC,CAACT,CAAD,CAAR;AADJ;AAEH;;AACD,WAAOQ,CAAP;AACH,GAPD;;AAQA,SAAOF,QAAQ,CAACS,KAAT,CAAe,IAAf,EAAqBH,SAArB,CAAP;AACH,CAVD;;AAWA,OAAO,KAAKI,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAKC,QAAZ,MAA0B,WAA1B;AACA,SAASC,MAAT,QAAuB,+BAAvB;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,8BAAtC;AACA,SAASC,uBAAT,EAAkCC,0BAAlC,QAAoE,4BAApE;AACA,SAASC,QAAT,QAAyB,eAAzB;AACA,SAASC,mBAAT,QAAoC,2BAApC;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAASC,IAAT,EAAeC,OAAf,EAAwBC,UAAxB,EAAoCC,OAApC,EAA6CC,aAA7C,EAA4DC,gBAA5D,EAA8EC,oBAA9E,QAA0G,+BAA1G;AACA,IAAIC,KAAK,GAAG,EAAZ;AAAA,IAAgBC,GAAG,GAAG,EAAtB;AACA,IAAIC,aAAa,GAAG;AAAEC,EAAAA,SAAS,EAAE,YAAb;AAA2BC,EAAAA,IAAI,EAAE;AAAjC,CAApB;AACA,IAAIC,QAAQ,GAAGd,mBAAmB,CAACe,cAAnC;AACA;AACA;AACA;;AACA,IAAIC,oBAAoB;AAAG;AAAe,UAAUC,MAAV,EAAkB;AACxDjD,EAAAA,SAAS,CAACgD,oBAAD,EAAuBC,MAAvB,CAAT;;AACA,WAASD,oBAAT,CAA8BE,KAA9B,EAAqC;AACjC,QAAIC,KAAK,GAAGF,MAAM,CAAC3B,IAAP,CAAY,IAAZ,EAAkB4B,KAAlB,KAA4B,IAAxC;;AACAC,IAAAA,KAAK,CAACC,WAAN,GAAoB,UAAUC,KAAV,EAAiB;AACjCF,MAAAA,KAAK,CAACG,QAAN,CAAe;AAAEC,QAAAA,WAAW,EAAEF,KAAK,CAACG;AAArB,OAAf;AACH,KAFD;;AAGAL,IAAAA,KAAK,CAACM,OAAN,GAAgB,YAAY;AACxB,UAAIC,IAAI,GAAGP,KAAK,CAACD,KAAN,CAAYQ,IAAvB;AACA,UAAIC,KAAK,GAAGD,IAAI,CAACC,KAAjB;AACA,UAAIC,WAAW,GAAGD,KAAK,CAACE,EAAN,CAASC,YAAT,CAAsBxB,aAAa,CAACzB,MAAd,CAAqB8C,KAAK,CAACI,GAA3B,EAAgCJ,KAAK,CAACK,SAAN,CAAgBC,IAAhD,EAAsDN,KAAK,CAACK,SAAN,CAAgBE,EAAtE,CAAtB,CAAlB;AACAR,MAAAA,IAAI,CAACS,WAAL,CAAiBR,KAAK,CAACpC,KAAN,CAAYqC,WAAZ,CAAjB;AACAF,MAAAA,IAAI,CAACU,KAAL;;AACAjB,MAAAA,KAAK,CAACD,KAAN,CAAYO,OAAZ,CAAoBnC,IAApB,CAAyB+C,SAAzB;AACH,KAPD;;AAQAlB,IAAAA,KAAK,CAACmB,cAAN,GAAuB,UAAUC,UAAV,EAAsB;AACzC,UAAIC,OAAO,GAAGrB,KAAK,CAACQ,KAAN,CAAYa,OAA1B;AACA,UAAIC,SAAS,GAAGtB,KAAK,CAACQ,KAAN,CAAYc,SAA5B;AACA,UAAIC,GAAG,GAAG,CAAV;AAAA,UAAaC,GAAG,GAAG,CAAnB;;AACA,UAAIH,OAAO,IAAIC,SAAf,EAA0B;AACtB,YAAIG,OAAO,GAAGJ,OAAO,CAACK,SAAR,CAAkB,UAAU5D,CAAV,EAAa;AAAE,iBAAOA,CAAC,CAAC6D,EAAF,CAAKL,SAAL,CAAP;AAAyB,SAA1D,CAAd;AACAC,QAAAA,GAAG,GAAGE,OAAO,KAAK,CAAC,CAAb,GAAiBJ,OAAO,CAACnD,MAAzB,GAAkCuD,OAAO,GAAG,CAAlD;AACAD,QAAAA,GAAG,GAAGH,OAAO,CAACnD,MAAd;AACH;;AACD,aAAOY,YAAY,CAACsC,UAAD,EAAaG,GAAb,EAAkBC,GAAlB,CAAnB;AACH,KAVD;;AAWAxB,IAAAA,KAAK,CAAC4B,UAAN,GAAmB,YAAY;AAC3B5B,MAAAA,KAAK,CAAC6B,MAAN;AACH,KAFD;;AAGA7B,IAAAA,KAAK,CAAC8B,UAAN,GAAmB,YAAY;AAC3B9B,MAAAA,KAAK,CAAC6B,MAAN,CAAa,IAAb;AACH,KAFD;;AAGA7B,IAAAA,KAAK,CAAC6B,MAAN,GAAe,UAAUE,QAAV,EAAoB;AAC/B,UAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AAAEA,QAAAA,QAAQ,GAAG,KAAX;AAAmB;;AAC9C,UAAIxB,IAAI,GAAGP,KAAK,CAACD,KAAN,CAAYQ,IAAvB;AACA,UAAIyB,EAAE,GAAGhC,KAAK,CAACQ,KAAf;AAAA,UAAsByB,IAAI,GAAGD,EAAE,CAACE,UAAhC;AAAA,UAA4CC,SAAS,GAAGH,EAAE,CAACG,SAA3D;AAAA,UAAsEC,WAAW,GAAGJ,EAAE,CAACI,WAAvF;AAAA,UAAoGC,SAAS,GAAGL,EAAE,CAACK,SAAnH;AAAA,UAA8HC,SAAS,GAAGN,EAAE,CAACM,SAA7I;AACA,UAAIC,aAAa,GAAG;AAAEN,QAAAA,IAAI,EAAEA,IAAR;AAAcI,QAAAA,SAAS,EAAEA,SAAzB;AAAoCF,QAAAA,SAAS,EAAEA,SAA/C;AAA0DG,QAAAA,SAAS,EAAEA,SAArE;AAAgFP,QAAAA,QAAQ,EAAEA,QAA1F;AAAoGK,QAAAA,WAAW,EAAEA;AAAjH,OAApB;AACA,UAAII,eAAe,GAAGzD,IAAI,CAACwB,IAAI,CAACC,KAAN,EAAa+B,aAAb,CAA1B;;AACA,UAAIC,eAAJ,EAAqB;AACjB,YAAI/B,WAAW,GAAGF,IAAI,CAACC,KAAL,CAAWE,EAAX,CAAcC,YAAd,CAA2B6B,eAA3B,CAAlB;AACA/B,QAAAA,WAAW,CAACgC,cAAZ;AACAlC,QAAAA,IAAI,CAACS,WAAL,CAAiBT,IAAI,CAACC,KAAL,CAAWpC,KAAX,CAAiBqC,WAAjB,CAAjB;;AACAT,QAAAA,KAAK,CAACG,QAAN,CAAe;AAAEmB,UAAAA,SAAS,EAAEkB;AAAb,SAAf;AACH;AACJ,KAZD;;AAaAxC,IAAAA,KAAK,CAAC0C,SAAN,GAAkB,YAAY;AAC1B,UAAInC,IAAI,GAAGP,KAAK,CAACD,KAAN,CAAYQ,IAAvB;AACA,UAAIM,SAAS,GAAGN,IAAI,CAACC,KAAL,CAAWK,SAA3B;AACA,UAAI8B,WAAW,GAAG3C,KAAK,CAACQ,KAAN,CAAYmC,WAA9B;;AACA,UAAI,CAAC9B,SAAS,CAAC+B,KAAf,EAAsB;AAClB,YAAIC,KAAK,GAAGhC,SAAS,CAACC,IAAtB;AACA,YAAIgC,GAAG,GAAGD,KAAK,GAAGF,WAAW,CAACzE,MAA9B;AACA,YAAIuC,WAAW,GAAGzB,OAAO,CAAC6B,SAAD,EAAY8B,WAAZ,EAAyBpC,IAAI,CAACC,KAAL,CAAWE,EAApC,CAAzB;AACAD,QAAAA,WAAW,CAACE,YAAZ,CAAyBxB,aAAa,CAACzB,MAAd,CAAqB+C,WAAW,CAACG,GAAjC,EAAsCiC,KAAtC,EAA6CC,GAA7C,CAAzB;AACArC,QAAAA,WAAW,CAACgC,cAAZ;AACAlC,QAAAA,IAAI,CAACwC,QAAL,CAActC,WAAd;;AACAT,QAAAA,KAAK,CAACgD,YAAN,CAAmB,EAAnB;AACH;AACJ,KAbD;;AAcAhD,IAAAA,KAAK,CAACiD,YAAN,GAAqB,YAAY;AAC7B,UAAI1C,IAAI,GAAGP,KAAK,CAACD,KAAN,CAAYQ,IAAvB;AACA,UAAIyB,EAAE,GAAGhC,KAAK,CAACQ,KAAf;AAAA,UAAsB0B,UAAU,GAAGF,EAAE,CAACE,UAAtC;AAAA,UAAkDS,WAAW,GAAGX,EAAE,CAACW,WAAnE;AAAA,UAAgFR,SAAS,GAAGH,EAAE,CAACG,SAA/F;AAAA,UAA0GE,SAAS,GAAGL,EAAE,CAACK,SAAzH;AAAA,UAAoIC,SAAS,GAAGN,EAAE,CAACM,SAAnJ;AACA,UAAIC,aAAa,GAAG;AAAEN,QAAAA,IAAI,EAAEC,UAAR;AAAoBG,QAAAA,SAAS,EAAEA,SAA/B;AAA0CF,QAAAA,SAAS,EAAEA,SAArD;AAAgEG,QAAAA,SAAS,EAAEA;AAA3E,OAApB;AACA/B,MAAAA,IAAI,CAACwC,QAAL,CAAc9D,UAAU,CAACsB,IAAI,CAACC,KAAN,EAAamC,WAAb,EAA0BJ,aAA1B,CAAxB;;AACAvC,MAAAA,KAAK,CAACgD,YAAN,CAAmB,EAAnB;AACH,KAND;;AAOAhD,IAAAA,KAAK,CAACkD,SAAN,GAAkB,UAAUhD,KAAV,EAAiB;AAC/B,UAAIA,KAAK,CAACiD,OAAN,KAAkB7D,KAAtB,EAA6B;AACzBU,QAAAA,KAAK,CAAC4B,UAAN;AACH,OAFD,MAGK,IAAI1B,KAAK,CAACiD,OAAN,KAAkB5D,GAAtB,EAA2B;AAC5BS,QAAAA,KAAK,CAACM,OAAN;AACH;AACJ,KAPD;;AAQAN,IAAAA,KAAK,CAACoD,kBAAN,GAA2B,UAAUC,CAAV,EAAa;AAAE,aAAOrD,KAAK,CAACgD,YAAN,CAAmB;AAAEb,QAAAA,SAAS,EAAEkB,CAAC,CAACC,MAAF,CAASC;AAAtB,OAAnB,CAAP;AAA6D,KAAvG;;AACAvD,IAAAA,KAAK,CAACwD,kBAAN,GAA2B,UAAUH,CAAV,EAAa;AAAE,aAAOrD,KAAK,CAACgD,YAAN,CAAmB;AAAEX,QAAAA,SAAS,EAAEgB,CAAC,CAACC,MAAF,CAASC;AAAtB,OAAnB,CAAP;AAA6D,KAAvG;;AACAvD,IAAAA,KAAK,CAACyD,oBAAN,GAA6B,UAAUJ,CAAV,EAAa;AAAE,aAAOrD,KAAK,CAACgD,YAAN,CAAmB;AAAEZ,QAAAA,WAAW,EAAEiB,CAAC,CAACC,MAAF,CAASC;AAAxB,OAAnB,CAAP;AAA+D,KAA3G;;AACAvD,IAAAA,KAAK,CAAC0D,kBAAN,GAA2B,UAAUL,CAAV,EAAa;AAAE,aAAOrD,KAAK,CAACgD,YAAN,CAAmB;AAAEV,QAAAA,SAAS,EAAEe,CAAC,CAACC,MAAF,CAASC;AAAtB,OAAnB,CAAP;AAA6D,KAAvG;;AACAvD,IAAAA,KAAK,CAAC2D,cAAN,GAAuB,UAAUN,CAAV,EAAa;AAAE,aAAOrD,KAAK,CAACgD,YAAN,CAAmB;AAAEd,QAAAA,UAAU,EAAEmB,CAAC,CAACC,MAAF,CAASM;AAAvB,OAAnB,CAAP;AAA4D,KAAlG;;AACA5D,IAAAA,KAAK,CAAC6D,eAAN,GAAwB,UAAUR,CAAV,EAAa;AAAE,aAAOrD,KAAK,CAACgD,YAAN,CAAmB;AAAEL,QAAAA,WAAW,EAAEU,CAAC,CAACC,MAAF,CAASM;AAAxB,OAAnB,CAAP;AAA6D,KAApG;;AACA5D,IAAAA,KAAK,CAACgD,YAAN,GAAqB,UAAUc,IAAV,EAAgB;AACjC,UAAIC,SAAS,GAAGpG,QAAQ,CAAC,EAAD,EAAKqC,KAAK,CAACQ,KAAX,EAAkBsD,IAAlB,EAAwB;AAAEzC,QAAAA,OAAO,EAAEH,SAAX;AAAsBI,QAAAA,SAAS,EAAEJ;AAAjC,OAAxB,CAAxB;;AACA,UAAIX,IAAI,GAAGP,KAAK,CAACD,KAAN,CAAYQ,IAAvB;;AACA,UAAIwD,SAAS,CAAC7B,UAAd,EAA0B;AACtB,YAAID,IAAI,GAAG8B,SAAS,CAAC7B,UAArB;AAAA,YAAiCG,SAAS,GAAG0B,SAAS,CAAC1B,SAAvD;AAAA,YAAkEF,SAAS,GAAG4B,SAAS,CAAC5B,SAAxF;AAAA,YAAmGG,SAAS,GAAGyB,SAAS,CAACzB,SAAzH;AAAA,YAAoIF,WAAW,GAAG2B,SAAS,CAAC3B,WAA5J;AACA,YAAIG,aAAa,GAAG;AAAEN,UAAAA,IAAI,EAAEA,IAAR;AAAcI,UAAAA,SAAS,EAAEA,SAAzB;AAAoCF,UAAAA,SAAS,EAAEA,SAA/C;AAA0DG,UAAAA,SAAS,EAAEA;AAArE,SAApB;AACA,YAAI0B,WAAW,GAAGzD,IAAI,CAACC,KAAL,CAAWK,SAA7B;AACA,YAAIQ,OAAO,GAAGnC,OAAO,CAACqB,IAAI,CAACC,KAAL,CAAWI,GAAZ,EAAiB2B,aAAjB,CAArB;AACA,YAAIjB,SAAS,GAAI,CAACtB,KAAK,CAACQ,KAAN,CAAY0B,UAAb,IAA2Bb,OAAO,CAAC,CAAD,CAAnC,IACZA,OAAO,CAACtC,IAAR,CAAa,UAAUkF,KAAV,EAAiB;AAAE,iBAAOA,KAAK,CAACnD,IAAN,IAAckD,WAAW,CAAClD,IAAjC;AAAwC,SAAxE,CADY,IAEXsB,WAAW,IAAIf,OAAO,CAAC,CAAD,CAFX,IAGZH,SAHJ;;AAIAlB,QAAAA,KAAK,CAACG,QAAN,CAAexC,QAAQ,CAAC,EAAD,EAAKoG,SAAL,EAAgB;AAAE1C,UAAAA,OAAO,EAAEA,OAAX;AACnCC,UAAAA,SAAS,EAAEA;AADwB,SAAhB,CAAvB;AAEH,OAXD,MAYK;AACDtB,QAAAA,KAAK,CAACG,QAAN,CAAe4D,SAAf;AACH;AACJ,KAlBD;;AAmBA/D,IAAAA,KAAK,CAACQ,KAAN,GAAc;AACVJ,MAAAA,WAAW,EAAE,CADH;AAEV8B,MAAAA,UAAU,EAAE7C,oBAAoB,CAACU,KAAK,CAACQ,IAAN,CAAWC,KAAZ,CAFtB;AAGVmC,MAAAA,WAAW,EAAE,EAHH;AAIVR,MAAAA,SAAS,EAAE,KAJD;AAKVE,MAAAA,SAAS,EAAE,KALD;AAMVD,MAAAA,WAAW,EAAE,KANH;AAOVE,MAAAA,SAAS,EAAE;AAPD,KAAd;AASA,WAAOtC,KAAP;AACH;;AACD/C,EAAAA,MAAM,CAACiH,cAAP,CAAsBrE,oBAAoB,CAACpC,SAA3C,EAAsD,UAAtD,EAAkE;AAC9D0G,IAAAA,GAAG,EAAE,eAAY;AACb,aAAO,KAAKpE,KAAL,CAAWJ,QAAX,IAAuBA,QAA9B;AACH,KAH6D;AAI9DyE,IAAAA,UAAU,EAAE,IAJkD;AAK9DC,IAAAA,YAAY,EAAE;AALgD,GAAlE;AAOA;AACJ;AACA;;AACIxE,EAAAA,oBAAoB,CAACpC,SAArB,CAA+B6G,kBAA/B,GAAoD,UAAUC,CAAV,EAAaC,SAAb,EAAwB;AACxE,QAAIjE,IAAI,GAAG,KAAKR,KAAL,CAAWQ,IAAtB;AACA,QAAIyB,EAAE,GAAG,KAAKxB,KAAd;AAAA,QAAqBiE,EAAE,GAAGzC,EAAE,CAACX,OAA7B;AAAA,QAAsCA,OAAO,GAAGoD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAArE;AAAA,QAAyEnD,SAAS,GAAGU,EAAE,CAACV,SAAxF;;AACA,QAAIkD,SAAS,CAAClD,SAAV,KAAwBA,SAA5B,EAAuC;AACnC,UAAId,KAAK,GAAGD,IAAI,CAACC,KAAjB,CADmC,CAEnC;;AACA,UAAIE,EAAE,GAAGF,KAAK,CAACE,EAAf;AACA,UAAIgE,YAAY,GAAG,EAAnB;AACArD,MAAAA,OAAO,CAACsD,OAAR,CAAgB,UAAUC,CAAV,EAAa;AACzBF,QAAAA,YAAY,CAACG,IAAb,CAAkB;AACd/D,UAAAA,IAAI,EAAE8D,CAAC,CAAC9D,IADM;AAEdC,UAAAA,EAAE,EAAE6D,CAAC,CAAC7D,EAFQ;AAGd+D,UAAAA,KAAK,EAAE;AACHC,YAAAA,KAAK,EAAGzD,SAAS,IAAIsD,CAAC,CAACjD,EAAF,CAAKL,SAAL,CAAd,GACH,iBADG,GAEH;AAHD;AAHO,SAAlB;AASH,OAVD;AAWAZ,MAAAA,EAAE,CAACsE,OAAH,CAAW5F,gBAAX,EAA6BsF,YAA7B;AACAhE,MAAAA,EAAE,CAACC,YAAH,CAAgBW,SAAS,IAAInC,aAAa,CAACzB,MAAd,CAAqB8C,KAAK,CAACI,GAA3B,EAAgCJ,KAAK,CAACK,SAAN,CAAgBC,IAAhD,CAA7B;AACAP,MAAAA,IAAI,CAACwC,QAAL,CAAcrC,EAAd;AACH;AACJ,GAvBD;AAwBA;AACJ;AACA;;;AACIb,EAAAA,oBAAoB,CAACpC,SAArB,CAA+BwH,MAA/B,GAAwC,YAAY;AAChD,QAAIC,YAAY,GAAGvG,0BAA0B,CAAC,IAAD,CAA7C;AACA,QAAIqD,EAAE,GAAG,KAAKrC,QAAL,CAAcf,QAAvB;AAAA,QAAiCuG,sBAAsB,GAAGnD,EAAE,CAACmD,sBAA7D;AAAA,QAAqFC,kBAAkB,GAAGpD,EAAE,CAACoD,kBAA7G;AAAA,QAAiIC,qBAAqB,GAAGrD,EAAE,CAACqD,qBAA5J;AAAA,QAAmLC,mBAAmB,GAAGtD,EAAE,CAACsD,mBAA5M;AAAA,QAAiOC,sBAAsB,GAAGvD,EAAE,CAACuD,sBAA7P;AAAA,QAAqRC,kBAAkB,GAAGxD,EAAE,CAACwD,kBAA7S;AAAA,QAAiUC,qBAAqB,GAAGzD,EAAE,CAACyD,qBAA5V;AAAA,QAAmXC,oBAAoB,GAAG1D,EAAE,CAAC0D,oBAA7Y;AAAA,QAAmaC,oBAAoB,GAAG3D,EAAE,CAAC2D,oBAA7b;AAAA,QAAmdC,sBAAsB,GAAG5D,EAAE,CAAC4D,sBAA/e;AAAA,QAAugBC,oBAAoB,GAAG7D,EAAE,CAAC6D,oBAAjiB;AAAA,QAAujBC,oBAAoB,GAAG9D,EAAE,CAAC8D,oBAAjlB;AAAA,QAAumBC,oBAAoB,GAAG/D,EAAE,CAAC+D,oBAAjoB;AAAA,QAAupBC,kBAAkB,GAAGhE,EAAE,CAACgE,kBAA/qB;AACA,QAAIvB,EAAE,GAAG,KAAKjE,KAAd;AAAA,QAAqB2B,SAAS,GAAGsC,EAAE,CAACtC,SAApC;AAAA,QAA+CE,SAAS,GAAGoC,EAAE,CAACpC,SAA9D;AAAA,QAAyED,WAAW,GAAGqC,EAAE,CAACrC,WAA1F;AAAA,QAAuGE,SAAS,GAAGmC,EAAE,CAACnC,SAAtH;AAAA,QAAiIJ,UAAU,GAAGuC,EAAE,CAACvC,UAAjJ;AAAA,QAA6JS,WAAW,GAAG8B,EAAE,CAAC9B,WAA9K;AAAA,QAA2LrB,SAAS,GAAGmD,EAAE,CAACnD,SAA1M;AACA,QAAI2E,UAAU,GAAI5H,KAAK,CAAC6H,aAAN,CAAoB,KAApB,EAA2B;AAAEzG,MAAAA,SAAS,EAAE;AAAb,KAA3B,EACdpB,KAAK,CAAC6H,aAAN,CAAoB,MAApB,EAA4B,IAA5B,EACI7H,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6BvI,QAAQ,CAAC,EAAD,EAAK6B,aAAL,EAAoB;AAAE2G,MAAAA,EAAE,EAAE,YAAN;AAAoB5C,MAAAA,OAAO,EAAEpB,SAA7B;AAAwCiE,MAAAA,QAAQ,EAAE,KAAKhD;AAAvD,KAApB,CAArC,CADJ,EAEI/E,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6B;AAAEG,MAAAA,OAAO,EAAE,YAAX;AAAyB5G,MAAAA,SAAS,EAAE;AAApC,KAA7B,EAAuFyF,YAAY,CAACoB,gBAAb,CAA8BZ,oBAA9B,EAAoD9G,QAAQ,CAAC8G,oBAAD,CAA5D,CAAvF,CAFJ,CADc,EAIdrH,KAAK,CAAC6H,aAAN,CAAoB,MAApB,EAA4B,IAA5B,EACI7H,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6BvI,QAAQ,CAAC,EAAD,EAAK6B,aAAL,EAAoB;AAAE2G,MAAAA,EAAE,EAAE,aAAN;AAAqB5C,MAAAA,OAAO,EAAElB,SAA9B;AAAyC+D,MAAAA,QAAQ,EAAE,KAAK5C;AAAxD,KAApB,CAArC,CADJ,EAEInF,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6B;AAAEG,MAAAA,OAAO,EAAE,aAAX;AAA0B5G,MAAAA,SAAS,EAAE;AAArC,KAA7B,EAAwFyF,YAAY,CAACoB,gBAAb,CAA8BX,oBAA9B,EAAoD/G,QAAQ,CAAC+G,oBAAD,CAA5D,CAAxF,CAFJ,CAJc,EAOdtH,KAAK,CAAC6H,aAAN,CAAoB,MAApB,EAA4B,IAA5B,EACI7H,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6BvI,QAAQ,CAAC,EAAD,EAAK6B,aAAL,EAAoB;AAAE2G,MAAAA,EAAE,EAAE,cAAN;AAAsB5C,MAAAA,OAAO,EAAEnB,WAA/B;AAA4CgE,MAAAA,QAAQ,EAAE,KAAK3C;AAA3D,KAApB,CAArC,CADJ,EAEIpF,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6B;AAAEG,MAAAA,OAAO,EAAE,cAAX;AAA2B5G,MAAAA,SAAS,EAAE;AAAtC,KAA7B,EAAyFyF,YAAY,CAACoB,gBAAb,CAA8BV,sBAA9B,EAAsDhH,QAAQ,CAACgH,sBAAD,CAA9D,CAAzF,CAFJ,CAPc,EAUdvH,KAAK,CAAC6H,aAAN,CAAoB,MAApB,EAA4B,IAA5B,EACI7H,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6BvI,QAAQ,CAAC,EAAD,EAAK6B,aAAL,EAAoB;AAAE2G,MAAAA,EAAE,EAAE,oBAAN;AAA4B5C,MAAAA,OAAO,EAAEjB,SAArC;AAAgD8D,MAAAA,QAAQ,EAAE,KAAK1C;AAA/D,KAApB,CAArC,CADJ,EAEIrF,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6B;AAAEG,MAAAA,OAAO,EAAE,oBAAX;AAAiC5G,MAAAA,SAAS,EAAE;AAA5C,KAA7B,EAA+FyF,YAAY,CAACoB,gBAAb,CAA8BT,oBAA9B,EAAoDjH,QAAQ,CAACiH,oBAAD,CAA5D,CAA/F,CAFJ,CAVc,CAAlB;AAaA,QAAIU,UAAU,GAAIlI,KAAK,CAAC6H,aAAN,CAAoB,KAApB,EAA2B;AAAEzG,MAAAA,SAAS,EAAE;AAAb,KAA3B,EACdpB,KAAK,CAAC6H,aAAN,CAAoB,QAApB,EAA8B;AAAEzG,MAAAA,SAAS,EAAE,2BAAb;AAA0C+G,MAAAA,OAAO,EAAE,KAAK1E;AAAxD,KAA9B,EACIzD,KAAK,CAAC6H,aAAN,CAAoB,MAApB,EAA4B;AAAEzG,MAAAA,SAAS,EAAE;AAAb,KAA5B,CADJ,EAEIyF,YAAY,CAACoB,gBAAb,CAA8BR,oBAA9B,EAAoDlH,QAAQ,CAACkH,oBAAD,CAA5D,CAFJ,CADc,EAIdzH,KAAK,CAAC6H,aAAN,CAAoB,MAApB,EAA4B,IAA5B,EAAkC,KAAK/E,cAAL,CAAoB+D,YAAY,CAACoB,gBAAb,CAA8BN,kBAA9B,EAAkDpH,QAAQ,CAACoH,kBAAD,CAA1D,CAApB,CAAlC,CAJc,EAKd3H,KAAK,CAAC6H,aAAN,CAAoB,QAApB,EAA8B;AAAEzG,MAAAA,SAAS,EAAE,2BAAb;AAA0C+G,MAAAA,OAAO,EAAE,KAAK5E;AAAxD,KAA9B,EACIsD,YAAY,CAACoB,gBAAb,CAA8BP,oBAA9B,EAAoDnH,QAAQ,CAACmH,oBAAD,CAA5D,CADJ,EAEI1H,KAAK,CAAC6H,aAAN,CAAoB,MAApB,EAA4B;AAAEzG,MAAAA,SAAS,EAAE;AAAb,KAA5B,CAFJ,CALc,CAAlB;AAQA,QAAIgH,QAAQ,GAAIpI,KAAK,CAAC6H,aAAN,CAAoB7H,KAAK,CAACqI,QAA1B,EAAoC,IAApC,EACZrI,KAAK,CAAC6H,aAAN,CAAoB,KAApB,EAA2B;AAAEzG,MAAAA,SAAS,EAAE;AAAb,KAA3B,EACIpB,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6B;AAAEG,MAAAA,OAAO,EAAE;AAAX,KAA7B,EAAsDnB,YAAY,CAACoB,gBAAb,CAA8BhB,mBAA9B,EAAmD1G,QAAQ,CAAC0G,mBAAD,CAA3D,CAAtD,CADJ,CADY,EAGZjH,KAAK,CAAC6H,aAAN,CAAoB,KAApB,EAA2B;AAAEzG,MAAAA,SAAS,EAAE;AAAb,KAA3B,EACIpB,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6B;AAAEC,MAAAA,EAAE,EAAE,UAAN;AAAkBzG,MAAAA,IAAI,EAAE,MAAxB;AAAgCD,MAAAA,SAAS,EAAE,WAA3C;AAAwDmE,MAAAA,KAAK,EAAE1B,UAA/D;AAA2EkE,MAAAA,QAAQ,EAAE,KAAKzC,cAA1F;AAA0GgD,MAAAA,OAAO,EAAE,KAAKhD,cAAxH;AAAwIT,MAAAA,SAAS,EAAE,KAAKA,SAAxJ;AAAmK0D,MAAAA,SAAS,EAAE;AAA9K,KAA7B,CADJ,CAHY,CAAhB;AAKA,QAAIC,WAAW,GAAIxI,KAAK,CAAC6H,aAAN,CAAoB7H,KAAK,CAACqI,QAA1B,EAAoC,IAApC,EACfrI,KAAK,CAAC6H,aAAN,CAAoB,KAApB,EAA2B;AAAEzG,MAAAA,SAAS,EAAE;AAAb,KAA3B,EACIpB,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6B;AAAEG,MAAAA,OAAO,EAAE;AAAX,KAA7B,EAAyDnB,YAAY,CAACoB,gBAAb,CAA8Bf,sBAA9B,EAAsD3G,QAAQ,CAAC2G,sBAAD,CAA9D,CAAzD,CADJ,CADe,EAGflH,KAAK,CAAC6H,aAAN,CAAoB,KAApB,EAA2B;AAAEzG,MAAAA,SAAS,EAAE;AAAb,KAA3B,EACIpB,KAAK,CAAC6H,aAAN,CAAoB,OAApB,EAA6B;AAAEC,MAAAA,EAAE,EAAE,aAAN;AAAqB1G,MAAAA,SAAS,EAAE,WAAhC;AAA6CC,MAAAA,IAAI,EAAE,MAAnD;AAA2DkE,MAAAA,KAAK,EAAEjB,WAAlE;AAA+EyD,MAAAA,QAAQ,EAAE,KAAKvC;AAA9F,KAA7B,CADJ,CAHe,CAAnB;AAKA,WAAOvF,QAAQ,CAACwI,YAAT,CAAuBzI,KAAK,CAAC6H,aAAN,CAAoB3H,MAApB,EAA4B;AAAEwI,MAAAA,KAAK,EAAE7B,YAAY,CAACoB,gBAAb,CAA8BnB,sBAA9B,EAAsDvG,QAAQ,CAACuG,sBAAD,CAA9D,CAAT;AAAkG7E,MAAAA,OAAO,EAAE,KAAKA,OAAhH;AAAyH0G,MAAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE,MAAT;AAAiBC,QAAAA,MAAM,EAAE,MAAzB;AAAiCC,QAAAA,UAAU,EAAE;AAA7C,OAAhI;AAAuLC,MAAAA,SAAS,EAAE,KAAlM;AAAyMC,MAAAA,cAAc,EAAE,0BAAY;AAAE,eAAO,IAAP;AAAc,OAArP;AAAuPC,MAAAA,cAAc,EAAE,0BAAY;AAAE,eAAO,IAAP;AAAc;AAAnS,KAA5B,EAC1BjJ,KAAK,CAAC6H,aAAN,CAAoB1H,QAApB,EAA8B;AAAE6B,MAAAA,QAAQ,EAAE,KAAKG,KAAL,CAAWJ,WAAvB;AAAoCX,MAAAA,SAAS,EAAE,uBAA/C;AAAwE8H,MAAAA,QAAQ,EAAE,KAAKtH,WAAvF;AAAoGuH,MAAAA,SAAS,EAAE;AAA/G,KAA9B,EACInJ,KAAK,CAAC6H,aAAN,CAAoBzH,WAApB,EAAiC;AAAEsI,MAAAA,KAAK,EAAE7B,YAAY,CAACoB,gBAAb,CAA8BlB,kBAA9B,EAAkDxG,QAAQ,CAACwG,kBAAD,CAA1D;AAAT,KAAjC,EACI/G,KAAK,CAAC6H,aAAN,CAAoB,KAApB,EAA2B;AAAEzG,MAAAA,SAAS,EAAE;AAAb,KAA3B,EAAmEgH,QAAnE,CADJ,EAEIR,UAFJ,EAGIM,UAHJ,CADJ,EAKIlI,KAAK,CAAC6H,aAAN,CAAoBzH,WAApB,EAAiC;AAAEsI,MAAAA,KAAK,EAAE7B,YAAY,CAACoB,gBAAb,CAA8BjB,qBAA9B,EAAqDzG,QAAQ,CAACyG,qBAAD,CAA7D;AAAT,KAAjC,EACIhH,KAAK,CAAC6H,aAAN,CAAoB,KAApB,EAA2B;AAAEzG,MAAAA,SAAS,EAAE;AAAb,KAA3B,EACIgH,QADJ,EAEII,WAFJ,CADJ,EAIIxI,KAAK,CAAC6H,aAAN,CAAoB,KAApB,EAA2B;AAAEzG,MAAAA,SAAS,EAAE;AAAb,KAA3B,EACIpB,KAAK,CAAC6H,aAAN,CAAoB,QAApB,EAA8B;AAAEzG,MAAAA,SAAS,EAAE,UAAb;AAAyBgI,MAAAA,QAAQ,EAAE,CAACC,OAAO,CAACpG,SAAD,CAA3C;AAAwDkF,MAAAA,OAAO,EAAE,KAAK9D;AAAtE,KAA9B,EAAiHwC,YAAY,CAACoB,gBAAb,CAA8Bd,kBAA9B,EAAkD5G,QAAQ,CAAC4G,kBAAD,CAA1D,CAAjH,CADJ,EAEInH,KAAK,CAAC6H,aAAN,CAAoB,QAApB,EAA8B;AAAEzG,MAAAA,SAAS,EAAE,UAAb;AAAyBgI,MAAAA,QAAQ,EAAE,CAACC,OAAO,CAACpG,SAAD,CAA3C;AAAwDkF,MAAAA,OAAO,EAAE,KAAKvD;AAAtE,KAA9B,EAAoHiC,YAAY,CAACoB,gBAAb,CAA8Bb,qBAA9B,EAAqD7G,QAAQ,CAAC6G,qBAAD,CAA7D,CAApH,CAFJ,CAJJ,EAOIQ,UAPJ,EAQIM,UARJ,CALJ,CAD0B,CAAvB,EAcqBoB,QAAQ,CAACC,IAd9B,CAAP;AAeH,GAlDD;;AAmDA,SAAO/H,oBAAP;AACH,CAvMyC,CAuMxCxB,KAAK,CAACwJ,SAvMkC,CAA1C;;AAwMA,SAAShI,oBAAT;AACAnB,uBAAuB,CAACmB,oBAAD,CAAvB","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Window } from '@progress/kendo-react-dialogs';\nimport { TabStrip, TabStripTab } from '@progress/kendo-react-layout';\nimport { registerForLocalization, provideLocalizationService } from '@progress/kendo-react-intl';\nimport { messages } from './../messages';\nimport { EditorToolsSettings } from './../config/toolsSettings';\nimport { formatString } from './../tools/utils';\nimport { find, replace, replaceAll, findAll, TextSelection, textHighlightKey, selectedLineTextOnly } from '@progress/kendo-editor-common';\nvar enter = 13, esc = 27;\nvar checkboxProps = { className: 'k-checkbox', type: 'checkbox' };\nvar settings = EditorToolsSettings.findAndReplace;\n/**\n * @hidden\n */\nvar FindAndReplaceDialog = /** @class */ (function (_super) {\n    __extends(FindAndReplaceDialog, _super);\n    function FindAndReplaceDialog(props) {\n        var _this = _super.call(this, props) || this;\n        _this.onTabSelect = function (event) {\n            _this.setState({ selectedTab: event.selected });\n        };\n        _this.onClose = function () {\n            var view = _this.props.view;\n            var state = view.state;\n            var transaction = state.tr.setSelection(TextSelection.create(state.doc, state.selection.from, state.selection.to));\n            view.updateState(state.apply(transaction));\n            view.focus();\n            _this.props.onClose.call(undefined);\n        };\n        _this.matchesMessage = function (locMessage) {\n            var matches = _this.state.matches;\n            var nextMatch = _this.state.nextMatch;\n            var cur = 0, all = 0;\n            if (matches && nextMatch) {\n                var current = matches.findIndex(function (s) { return s.eq(nextMatch); });\n                cur = current === -1 ? matches.length : current + 1;\n                all = matches.length;\n            }\n            return formatString(locMessage, cur, all);\n        };\n        _this.onFindNext = function () {\n            _this.onFind();\n        };\n        _this.onFindPrev = function () {\n            _this.onFind(true);\n        };\n        _this.onFind = function (backward) {\n            if (backward === void 0) { backward = false; }\n            var view = _this.props.view;\n            var _a = _this.state, text = _a.searchText, matchCase = _a.matchCase, matchCyclic = _a.matchCyclic, matchWord = _a.matchWord, useRegExp = _a.useRegExp;\n            var searchOptions = { text: text, matchWord: matchWord, matchCase: matchCase, useRegExp: useRegExp, backward: backward, matchCyclic: matchCyclic };\n            var selectionResult = find(view.state, searchOptions);\n            if (selectionResult) {\n                var transaction = view.state.tr.setSelection(selectionResult);\n                transaction.scrollIntoView();\n                view.updateState(view.state.apply(transaction));\n                _this.setState({ nextMatch: selectionResult });\n            }\n        };\n        _this.onReplace = function () {\n            var view = _this.props.view;\n            var selection = view.state.selection;\n            var replaceText = _this.state.replaceText;\n            if (!selection.empty) {\n                var start = selection.from;\n                var end = start + replaceText.length;\n                var transaction = replace(selection, replaceText, view.state.tr);\n                transaction.setSelection(TextSelection.create(transaction.doc, start, end));\n                transaction.scrollIntoView();\n                view.dispatch(transaction);\n                _this.setNextState({});\n            }\n        };\n        _this.onReplaceAll = function () {\n            var view = _this.props.view;\n            var _a = _this.state, searchText = _a.searchText, replaceText = _a.replaceText, matchCase = _a.matchCase, matchWord = _a.matchWord, useRegExp = _a.useRegExp;\n            var searchOptions = { text: searchText, matchWord: matchWord, matchCase: matchCase, useRegExp: useRegExp };\n            view.dispatch(replaceAll(view.state, replaceText, searchOptions));\n            _this.setNextState({});\n        };\n        _this.onKeyDown = function (event) {\n            if (event.keyCode === enter) {\n                _this.onFindNext();\n            }\n            else if (event.keyCode === esc) {\n                _this.onClose();\n            }\n        };\n        _this.onMatchCaseChecked = function (e) { return _this.setNextState({ matchCase: e.target.checked }); };\n        _this.onMatchWordChecked = function (e) { return _this.setNextState({ matchWord: e.target.checked }); };\n        _this.onMatchCyclicChecked = function (e) { return _this.setNextState({ matchCyclic: e.target.checked }); };\n        _this.onUseRegExpChecked = function (e) { return _this.setNextState({ useRegExp: e.target.checked }); };\n        _this.onSearchChange = function (e) { return _this.setNextState({ searchText: e.target.value }); };\n        _this.onReplaceChange = function (e) { return _this.setNextState({ replaceText: e.target.value }); };\n        _this.setNextState = function (next) {\n            var nextState = __assign({}, _this.state, next, { matches: undefined, nextMatch: undefined });\n            var view = _this.props.view;\n            if (nextState.searchText) {\n                var text = nextState.searchText, matchWord = nextState.matchWord, matchCase = nextState.matchCase, useRegExp = nextState.useRegExp, matchCyclic = nextState.matchCyclic;\n                var searchOptions = { text: text, matchWord: matchWord, matchCase: matchCase, useRegExp: useRegExp };\n                var selection_1 = view.state.selection;\n                var matches = findAll(view.state.doc, searchOptions);\n                var nextMatch = (!_this.state.searchText && matches[0]) ||\n                    matches.find(function (match) { return match.from >= selection_1.from; }) ||\n                    (matchCyclic && matches[0]) ||\n                    undefined;\n                _this.setState(__assign({}, nextState, { matches: matches,\n                    nextMatch: nextMatch }));\n            }\n            else {\n                _this.setState(nextState);\n            }\n        };\n        _this.state = {\n            selectedTab: 0,\n            searchText: selectedLineTextOnly(props.view.state),\n            replaceText: '',\n            matchCase: false,\n            matchWord: false,\n            matchCyclic: false,\n            useRegExp: false\n        };\n        return _this;\n    }\n    Object.defineProperty(FindAndReplaceDialog.prototype, \"settings\", {\n        get: function () {\n            return this.props.settings || settings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    FindAndReplaceDialog.prototype.componentDidUpdate = function (_, prevState) {\n        var view = this.props.view;\n        var _a = this.state, _b = _a.matches, matches = _b === void 0 ? [] : _b, nextMatch = _a.nextMatch;\n        if (prevState.nextMatch !== nextMatch) {\n            var state = view.state;\n            // highlight selection\n            var tr = state.tr;\n            var highlights_1 = [];\n            matches.forEach(function (m) {\n                highlights_1.push({\n                    from: m.from,\n                    to: m.to,\n                    attrs: {\n                        class: (nextMatch && m.eq(nextMatch)) ?\n                            'k-text-selected' :\n                            'k-text-highlighted'\n                    }\n                });\n            });\n            tr.setMeta(textHighlightKey, highlights_1);\n            tr.setSelection(nextMatch || TextSelection.create(state.doc, state.selection.from));\n            view.dispatch(tr);\n        }\n    };\n    /**\n     * @hidden\n     */\n    FindAndReplaceDialog.prototype.render = function () {\n        var localization = provideLocalizationService(this);\n        var _a = this.settings.messages, findReplaceDialogTitle = _a.findReplaceDialogTitle, findReplaceTabFind = _a.findReplaceTabFind, findReplaceTabReplace = _a.findReplaceTabReplace, findReplaceFindWhat = _a.findReplaceFindWhat, findReplaceReplaceWith = _a.findReplaceReplaceWith, findReplaceReplace = _a.findReplaceReplace, findReplaceReplaceAll = _a.findReplaceReplaceAll, findReplaceMatchCase = _a.findReplaceMatchCase, findReplaceMatchWord = _a.findReplaceMatchWord, findReplaceMatchCyclic = _a.findReplaceMatchCyclic, findReplaceUseRegExp = _a.findReplaceUseRegExp, findReplacePrevMatch = _a.findReplacePrevMatch, findReplaceNextMatch = _a.findReplaceNextMatch, findReplaceMatches = _a.findReplaceMatches;\n        var _b = this.state, matchCase = _b.matchCase, matchWord = _b.matchWord, matchCyclic = _b.matchCyclic, useRegExp = _b.useRegExp, searchText = _b.searchText, replaceText = _b.replaceText, nextMatch = _b.nextMatch;\n        var checkboxes = (React.createElement(\"div\", { className: \"k-search-options\" },\n            React.createElement(\"span\", null,\n                React.createElement(\"input\", __assign({}, checkboxProps, { id: \"match-case\", checked: matchCase, onChange: this.onMatchCaseChecked })),\n                React.createElement(\"label\", { htmlFor: \"match-case\", className: \"k-checkbox-label\" }, localization.toLanguageString(findReplaceMatchCase, messages[findReplaceMatchCase]))),\n            React.createElement(\"span\", null,\n                React.createElement(\"input\", __assign({}, checkboxProps, { id: \"match-whole\", checked: matchWord, onChange: this.onMatchWordChecked })),\n                React.createElement(\"label\", { htmlFor: \"match-whole\", className: \"k-checkbox-label\" }, localization.toLanguageString(findReplaceMatchWord, messages[findReplaceMatchWord]))),\n            React.createElement(\"span\", null,\n                React.createElement(\"input\", __assign({}, checkboxProps, { id: \"match-cyclic\", checked: matchCyclic, onChange: this.onMatchCyclicChecked })),\n                React.createElement(\"label\", { htmlFor: \"match-cyclic\", className: \"k-checkbox-label\" }, localization.toLanguageString(findReplaceMatchCyclic, messages[findReplaceMatchCyclic]))),\n            React.createElement(\"span\", null,\n                React.createElement(\"input\", __assign({}, checkboxProps, { id: \"regular-expression\", checked: useRegExp, onChange: this.onUseRegExpChecked })),\n                React.createElement(\"label\", { htmlFor: \"regular-expression\", className: \"k-checkbox-label\" }, localization.toLanguageString(findReplaceUseRegExp, messages[findReplaceUseRegExp])))));\n        var navigation = (React.createElement(\"div\", { className: \"k-matches-container\" },\n            React.createElement(\"button\", { className: \"k-button k-flat k-primary\", onClick: this.onFindPrev },\n                React.createElement(\"span\", { className: \"k-icon k-i-arrow-chevron-left\" }),\n                localization.toLanguageString(findReplacePrevMatch, messages[findReplacePrevMatch])),\n            React.createElement(\"span\", null, this.matchesMessage(localization.toLanguageString(findReplaceMatches, messages[findReplaceMatches]))),\n            React.createElement(\"button\", { className: \"k-button k-flat k-primary\", onClick: this.onFindNext },\n                localization.toLanguageString(findReplaceNextMatch, messages[findReplaceNextMatch]),\n                React.createElement(\"span\", { className: \"k-icon k-i-arrow-chevron-right\" }))));\n        var findWhat = (React.createElement(React.Fragment, null,\n            React.createElement(\"div\", { className: \"k-edit-label\" },\n                React.createElement(\"label\", { htmlFor: \"findWhat\" }, localization.toLanguageString(findReplaceFindWhat, messages[findReplaceFindWhat]))),\n            React.createElement(\"div\", { className: \"k-edit-field\" },\n                React.createElement(\"input\", { id: \"findWhat\", type: \"text\", className: \"k-textbox\", value: searchText, onChange: this.onSearchChange, onFocus: this.onSearchChange, onKeyDown: this.onKeyDown, autoFocus: true }))));\n        var replaceWith = (React.createElement(React.Fragment, null,\n            React.createElement(\"div\", { className: \"k-edit-label\" },\n                React.createElement(\"label\", { htmlFor: \"replaceWith\" }, localization.toLanguageString(findReplaceReplaceWith, messages[findReplaceReplaceWith]))),\n            React.createElement(\"div\", { className: \"k-edit-field\" },\n                React.createElement(\"input\", { id: \"replaceWith\", className: \"k-textbox\", type: \"text\", value: replaceText, onChange: this.onReplaceChange }))));\n        return ReactDOM.createPortal((React.createElement(Window, { title: localization.toLanguageString(findReplaceDialogTitle, messages[findReplaceDialogTitle]), onClose: this.onClose, style: { width: 'auto', height: 'auto', userSelect: 'none' }, resizable: false, minimizeButton: function () { return null; }, maximizeButton: function () { return null; } },\n            React.createElement(TabStrip, { selected: this.state.selectedTab, className: \"k-editor-find-replace\", onSelect: this.onTabSelect, animation: false },\n                React.createElement(TabStripTab, { title: localization.toLanguageString(findReplaceTabFind, messages[findReplaceTabFind]) },\n                    React.createElement(\"div\", { className: \"k-edit-form-container\" }, findWhat),\n                    checkboxes,\n                    navigation),\n                React.createElement(TabStripTab, { title: localization.toLanguageString(findReplaceTabReplace, messages[findReplaceTabReplace]) },\n                    React.createElement(\"div\", { className: \"k-edit-form-container\" },\n                        findWhat,\n                        replaceWith),\n                    React.createElement(\"div\", { className: \"k-actions k-hstack k-justify-content-end\" },\n                        React.createElement(\"button\", { className: \"k-button\", disabled: !Boolean(nextMatch), onClick: this.onReplace }, localization.toLanguageString(findReplaceReplace, messages[findReplaceReplace])),\n                        React.createElement(\"button\", { className: \"k-button\", disabled: !Boolean(nextMatch), onClick: this.onReplaceAll }, localization.toLanguageString(findReplaceReplaceAll, messages[findReplaceReplaceAll]))),\n                    checkboxes,\n                    navigation)))), document.body);\n    };\n    return FindAndReplaceDialog;\n}(React.Component));\nexport { FindAndReplaceDialog };\nregisterForLocalization(FindAndReplaceDialog);\n"]},"metadata":{},"sourceType":"module"}