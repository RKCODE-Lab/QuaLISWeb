{"ast":null,"code":"import rsapi from \"../rsapi\";\nimport { toast } from \"react-toastify\";\nimport { constructOptionList, sortData, getComboLabelValue } from \"../components/CommonScript\";\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\nimport Axios from \"axios\";\nimport { initRequest } from \"./LoginAction\";\nimport { transactionStatus, attachmentType } from \"../components/Enumeration\";\nimport { intl } from \"../components/App\"; //Test click\n\nexport const getTestMaster = (testItem, userInfo, masterData) => {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testmaster/getTestById\", {\n      ntestcode: testItem.ntestcode,\n      userinfo: userInfo\n    }).then(response => {\n      masterData = { ...masterData,\n        ...response.data\n      };\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          dataState: undefined\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}; //tab click\n\nexport const getTestDetails = inputParam => {\n  return function (dispatch) {\n    const testParameter = inputParam.testParameter;\n    dispatch(initRequest(true));\n    rsapi.post(\"/testmaster/getothertestdetails\", {\n      ntestcode: testParameter.ntestcode,\n      \"nFlag\": inputParam.nFlag,\n      ntestparametercode: testParameter.ntestparametercode,\n      userinfo: inputParam.userInfo,\n      nclinicaltyperequired: inputParam.masterData.SelectedTest.nclinicaltyperequired\n    }).then(response => {\n      let masterData = inputParam.masterData;\n      masterData = { ...masterData,\n        ...response.data\n      };\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}; //Add Test\n\nexport const addTest = (operation, testmaster, userInfo, ncontrolCode, nfilterTestCategory) => {\n  return function (dispatch) {\n    if (nfilterTestCategory && Object.values(nfilterTestCategory).length > 0) {\n      dispatch(initRequest(true));\n      const urlArray = [rsapi.post(\"testcategory/getTestCategory\", {\n        \"userinfo\": userInfo\n      }), rsapi.post(\"checklist/getApprovedChecklist\", {\n        \"userinfo\": userInfo\n      })];\n\n      if (operation === \"update\") {\n        urlArray.push(rsapi.post(\"testmaster/getActiveTestById\", {\n          \"userinfo\": userInfo,\n          ntestcode: testmaster.ntestcode\n        }));\n        urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\n          \"ncontrolcode\": ncontrolCode,\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\n          \"userinfo\": userInfo\n        }));\n      } else if (operation === \"create\") {\n        urlArray.push(rsapi.post(\"parametertype/getParameterType\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"grade/getGrade\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"section/getSection\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testmaster/getAvailableMethod\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"unit/getUnit\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"instrumentcategory/fetchinstrumentcategory\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testmaster/getAddTest\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"containertype/getContainerType\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testpackage/getTestPackage\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\n          \"ncontrolcode\": ncontrolCode,\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testmaster/getResultAccuracy\", {\n          \"userinfo\": userInfo\n        }));\n      } else if (operation === \"copy\") {\n        urlArray.push(rsapi.post(\"testmaster/validateCopyTest\", {\n          \"userinfo\": userInfo,\n          ntestcode: testmaster.ntestcode\n        }));\n        urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\n          \"ncontrolcode\": ncontrolCode,\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\n          \"userinfo\": userInfo\n        }));\n      }\n\n      Axios.all(urlArray).then(response => {\n        let selectedRecord = {};\n        let selectedsubcodedresult = [];\n        const testCategoryMap = constructOptionList(response[0].data || [], \"ntestcategorycode\", \"stestcategoryname\", false, false, true);\n        const testCategory = testCategoryMap.get(\"OptionList\");\n        const checklistMap = constructOptionList(response[0].data || [], \"nchecklistversioncode\", \"schecklistname\", false, false, true);\n        const ChecklistVersion = checklistMap.get(\"OptionList\"); //const periodMap=[];\n\n        const testData = {\n          testCategory,\n          ChecklistVersion\n        };\n        let parameterData = {};\n        let otherTestData = {};\n        let needOtherTest = false;\n\n        if (operation === \"update\") {\n          const editData = response[2].data;\n          selectedRecord = editData;\n          const periodMap = constructOptionList(response[3].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\n          const interfacetypeMap = constructOptionList(response[4].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true);\n          parameterData = {\n            period: periodMap.get(\"OptionList\"),\n            interfacetype: interfacetypeMap.get(\"OptionList\")\n          };\n          selectedRecord[\"ntestcategorycode\"] = {\n            \"value\": editData[\"ntestcategorycode\"],\n            \"label\": editData[\"stestcategoryname\"]\n          };\n          selectedRecord[\"nchecklistversioncode\"] = {\n            \"value\": editData[\"nchecklistversioncode\"],\n            \"label\": editData[\"schecklistname\"]\n          };\n\n          if (selectedRecord[\"ntatperiodcode\"] !== -1) {\n            selectedRecord[\"ntatperiodcode\"] = {\n              \"value\": editData[\"ntatperiodcode\"],\n              \"label\": editData[\"statperiodname\"]\n            };\n          }\n\n          selectedRecord[\"ninterfacetypecode\"] = {\n            \"value\": editData[\"ninterfacetypecode\"],\n            \"label\": editData[\"sinterfacetypename\"]\n          };\n        } else if (operation === \"copy\") {\n          const periodMap = constructOptionList(response[3].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\n          const interfacetypeMap = constructOptionList(response[4].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true); //period:periodMap.get(\"OptionList\")\n\n          parameterData = {\n            period: periodMap.get(\"OptionList\"),\n            interfacetype: interfacetypeMap.get(\"OptionList\")\n          };\n          selectedRecord = {\n            ntestcategorycode: nfilterTestCategory.value === -2 ? testCategory.length > 0 ? // {\"label\": testCategory[0].stestcategoryname, \"value\": testCategory[0].ntestcategorycode}\n            testCategory[0] : \"\" : nfilterTestCategory,\n            ntransactionstatus: transactionStatus.ACTIVE,\n            naccredited: transactionStatus.NOTACCREDITED,\n            ntrainingneed: transactionStatus.NO,\n            stestsynonym: \"\",\n            stestname: \"\",\n            sdescription: \"\",\n            ncost: \"\" //period:periodMap.get(\"OptionList\"),\n\n          };\n        } else {\n          // const { Grade } = response[7].data; //ParameterType\n          const parameterMap = constructOptionList(response[2].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true); // const parameterType = parameterMap.get(\"OptionList\");//response[2].data;\n\n          const gradeMap = constructOptionList(response[3].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true); // const grade = gradeMap.get(\"OptionList\");// response[3].data;\n\n          const parameterItem = parameterMap.get(\"DefaultValue\") ? parameterMap.get(\"DefaultValue\") : \"\"; //parameterType.filter(item=>{ return item.nparametertypecode === 3 });//ParameterType[0];\n\n          selectedRecord = {\n            // nsectioncode: {\"value\": response[2].data[0].nsectioncode, \"label\": response[2].data[0].ssectionname},\n            nunitcode: -1,\n            nresultaccuracycode: -1,\n            nparametertypecode: parameterItem,\n            //{\"value\": parameterItem[0].nparametertypecode, \"label\": parameterItem[0].sdisplaystatus},\n            ntestcategorycode: nfilterTestCategory.value === -2 ? testCategory.length > 0 ? // {\"label\": testCategory[0].stestcategoryname, \"value\": testCategory[0].ntestcategorycode}: \"\")\n            testCategory[0] : \"\" : nfilterTestCategory,\n            ntransactionstatus: transactionStatus.ACTIVE,\n            naccredited: transactionStatus.NOTACCREDITED,\n            ntrainingneed: transactionStatus.NO,\n            stestsynonym: \"\",\n            stestname: \"\",\n            sdescription: \"\",\n            ncost: \"\"\n          };\n          let needUnit = true;\n          let needRoundingDigit = true;\n          let needCodedResult = true;\n          let needActualResult = true;\n          let npredefinedcode = transactionStatus.NO;\n          const unitMap = constructOptionList(response[6].data || [], \"nunitcode\", \"sunitname\", false, false, true);\n          const periodMap = constructOptionList(response[11].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\n          const deltaperiodMap = constructOptionList(response[11].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\n          const interfacetypeMap = constructOptionList(response[12].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true);\n          const resultAccuracyMap = constructOptionList(response[13].data || [], \"nresultaccuracycode\", \"sresultaccuracyname\", false, false, true);\n\n          if (parameterItem && parameterItem.item) {\n            if (parameterItem.item[\"nunit\"] === transactionStatus.YES) {\n              needUnit = false;\n              selectedRecord[\"nunitcode\"] = unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\"; //{\"value\": response[4].data[0][\"nunitcode\"], \"label\": response[4].data[0][\"sunitname\"]};\n            }\n\n            if (parameterItem.item[\"nroundingdigit\"] === transactionStatus.YES) {\n              needRoundingDigit = false;\n            }\n\n            if (parameterItem.item[\"npredefinedcode\"] === transactionStatus.YES) {\n              needCodedResult = false;\n              npredefinedcode = parameterItem.item[\"npredefinedcode\"];\n            }\n\n            if (parameterItem.item[\"ngrade\"] === transactionStatus.YES) {\n              needActualResult = false;\n              selectedRecord[\"ngradecode\"] = gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"; //{\"value\": Grade.ngradecode, \"label\": Grade[\"sdisplaystatus\"]};\n            }\n          } // const testParameterMap = constructOptionList(response[8].data[\"TestParameter\"] || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true);\n\n\n          parameterData = {\n            grade: gradeMap.get(\"OptionList\"),\n            parameterType: parameterMap.get(\"OptionList\"),\n            unit: unitMap.get(\"OptionList\"),\n            period: periodMap.get(\"OptionList\"),\n            interfacetype: interfacetypeMap.get(\"OptionList\"),\n            deltaperiod: deltaperiodMap.get(\"OptionList\"),\n            resultaccuracy: resultAccuracyMap.get(\"OptionList\"),\n            needRoundingDigit,\n            needUnit,\n            needCodedResult,\n            needActualResult,\n            npredefinedcode,\n            testParameter: constructOptionList(response[8].data[\"TestParameter\"] || [], 'sparametername', 'sparametername', false, false, true).get(\"OptionList\"),\n            defaultUnit: unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\",\n            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\" //testParameterMap.get(\"OptionList\")\n\n          };\n          const sectionMap = constructOptionList(response[4].data || [], \"nsectioncode\", \"ssectionname\", false, false, true); // const methodMap = constructOptionList(response[5].data.Method.length>0?response[5].data.Method:[] || [], \"nmethodcode\", \"smethodname\", false, false, true);\n\n          const methodMap = constructOptionList(response[5].data || [], \"nmethodcode\", \"smethodname\", false, false, true);\n          const instCatMap = constructOptionList(response[7].data || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", false, false, true);\n          const continerType = constructOptionList(response[9].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\n          const packageMap = constructOptionList(response[10].data || [], \"ntestpackagecode\", \"stestpackagename\", false, false, true);\n          otherTestData = {\n            package: packageMap.get(\"OptionList\"),\n            section: sectionMap.get(\"OptionList\"),\n            method: methodMap.get(\"OptionList\"),\n            instrumentcategory: instCatMap.get(\"OptionList\"),\n            containertype: continerType.get(\"OptionList\")\n          };\n          needOtherTest = true;\n          const periodDefault = periodMap.get(\"DefaultValue\");\n\n          if (periodDefault !== undefined) {\n            selectedRecord = { ...selectedRecord,\n              \"ntatperiodcode\": {\n                \"value\": periodDefault.value,\n                \"label\": periodDefault.label\n              }\n            };\n          }\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            // parameterData: {\n            //     period: periodMap.get(\"OptionList\")\n            // },   \n            openModal: true,\n            needOtherTest,\n            operation: operation,\n            screenName: \"IDS_TEST\",\n            selectedRecord,\n            ncontrolCode,\n            testData,\n            parameterData,\n            otherTestData,\n            loading: false,\n            selectedsubcodedresult\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_TESTCATEGORYNOTAVAILABLE\"\n      }));\n    }\n  };\n}; //Add Test Parameter\n\nexport const addParameter = (operation, selectedParameter, userInfo, ncontrolCode) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    const urlArray = [];\n    urlArray.push(rsapi.post(\"unit/getUnit\", {\n      \"userinfo\": userInfo\n    }));\n    urlArray.push(rsapi.post(\"parametertype/getParameterType\", {\n      \"userinfo\": userInfo\n    }));\n    urlArray.push(rsapi.post(\"grade/getGrade\", {\n      \"userinfo\": userInfo\n    }));\n    urlArray.push(rsapi.post(\"testmaster/getAddTest\", {\n      \"userinfo\": userInfo\n    }));\n    urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\n      \"ncontrolcode\": ncontrolCode,\n      \"userinfo\": userInfo\n    }));\n\n    if (operation === \"update\") {\n      urlArray.push(rsapi.post(\"testmaster/getActiveParameterById\", {\n        ntestparametercode: selectedParameter.ntestparametercode,\n        \"userinfo\": userInfo\n      }));\n      urlArray.push(rsapi.post(\"testmaster/getDestinationUnit\", {\n        nunitcode: selectedParameter.nunitcode,\n        \"userinfo\": userInfo\n      }));\n    }\n\n    urlArray.push(rsapi.post(\"testmaster/getResultAccuracy\", {\n      \"userinfo\": userInfo\n    }));\n    Axios.all(urlArray).then(response => {\n      // const { Grade, ParameterType } = response[1].data;\n      let DestinationUnitMap = [];\n      const parameterMap = constructOptionList(response[1].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true);\n      const gradeMap = constructOptionList(response[2].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\n      const unitMap = constructOptionList(response[0].data || [], \"nunitcode\", \"sunitname\", false, false, true);\n      const deltaperiodMap = constructOptionList(response[4].data || [], \"nperiodcode\", \"speriodname\", false, false, true); //ALPD-4363\n\n      const resultAccuracyMap = constructOptionList(operation === \"update\" ? response[7].data : response[5].data || [], \"nresultaccuracycode\", \"sresultaccuracyname\", false, false, true);\n\n      if (operation === \"update\") {\n        DestinationUnitMap = constructOptionList(response[6].data.DestinationUnit || [], \"ndestinationunitcode\", \"sunitname1\", false, false, true).get(\"OptionList\");\n      } //response[2].data;\n      // const grade = response[2].data;\n      // const parameterType = response[1].data;\n\n\n      let selectedRecord = {};\n      let needUnit = true;\n      let needRoundingDigit = true;\n      let needCodedResult = true;\n      let needActualResult = true;\n      let npredefinedcode = transactionStatus.No;\n\n      if (operation === \"update\") {\n        const editTestParameter = response[5].data.TestParameter[0]; //ALPD-3521\n\n        if (editTestParameter[\"ndestinationunitcode\"] == -1) {\n          editTestParameter[\"soperator\"] = [];\n        }\n\n        selectedRecord = editTestParameter;\n        const nparametertypecode = editTestParameter[\"nparametertypecode\"];\n        const parameterItem = parameterMap.get(\"OptionList\").filter(function (item) {\n          return item.value === nparametertypecode;\n        });\n        selectedRecord[\"sparametername\"] = {\n          value: editTestParameter[\"sparametername\"],\n          label: editTestParameter[\"sparametername\"]\n        };\n\n        if (editTestParameter[\"ndeltaunitcode\"] !== -1) {\n          selectedRecord[\"ndeltaunitcode\"] = {\n            \"value\": editTestParameter[\"ndeltaunitcode\"],\n            \"label\": editTestParameter[\"sdeltaunitname\"]\n          };\n        }\n\n        selectedRecord[\"nparametertypecode\"] = {\n          value: nparametertypecode,\n          label: editTestParameter[\"sdisplaystatus\"]\n        };\n\n        if (parameterItem && parameterItem[0].item) {\n          const selectedParameterItem = parameterItem[0].item;\n\n          if (selectedParameterItem[\"nunitrequired\"] === transactionStatus.YES) {\n            needUnit = false;\n            selectedRecord[\"nunitcode\"] = {\n              value: editTestParameter[\"nunitcode\"],\n              label: editTestParameter[\"sunitname\"]\n            };\n\n            if (editTestParameter[\"ndestinationunitcode\"] != -1) {\n              selectedRecord[\"ndestinationunitcode\"] = {\n                value: editTestParameter[\"ndestinationunitcode\"],\n                label: editTestParameter[\"sunitname1\"]\n              };\n            }\n\n            selectedRecord[\"nresultaccuracycode\"] = {\n              value: editTestParameter[\"nresultaccuracycode\"],\n              label: editTestParameter[\"sresultaccuracyname\"]\n            };\n          }\n\n          if (selectedParameterItem[\"nroundingrequired\"] === transactionStatus.YES) {\n            needRoundingDigit = false;\n          }\n\n          if (selectedParameterItem[\"npredefinedrequired\"] === transactionStatus.YES || selectedParameterItem[\"ngraderequired\"] === transactionStatus.YES) {\n            const editCodedResult = response[5].data.TestPredefinedParameter;\n\n            if (editCodedResult.length > 0) {\n              const defaultCodedResult = editCodedResult.filter(function (item) {\n                return item.ndefaultstatus === transactionStatus.YES;\n              });\n\n              if (defaultCodedResult.length > 0) {\n                selectedRecord[\"spredefinedname\"] = defaultCodedResult[0].spredefinedname;\n                selectedRecord[\"ntestpredefinedcode\"] = defaultCodedResult[0].ntestpredefinedcode;\n                ;\n                selectedRecord[\"ngradecode\"] = {\n                  value: defaultCodedResult[0].ngradecode,\n                  label: defaultCodedResult[0][\"sdisplaystatus\"]\n                }; //selectedRecord[\"sresultparacomment\"] = defaultCodedResult[0].sresultparacomment;\n\n                selectedRecord[\"spredefinedsynonym\"] = defaultCodedResult[0].spredefinedsynonym;\n                selectedRecord[\"spredefinedcomments\"] = defaultCodedResult[0].spredefinedcomments;\n              } else {\n                selectedRecord[\"spredefinedname\"] = editCodedResult[0].spredefinedname;\n                selectedRecord[\"ntestpredefinedcode\"] = editCodedResult[0].ntestpredefinedcode;\n                selectedRecord[\"ngradecode\"] = {\n                  value: editCodedResult[0].ngradecode,\n                  label: editCodedResult[0][\"sdisplaystatus\"]\n                }; //selectedRecord[\"sresultparacomment\"] = defaultCodedResult[0].sresultparacomment;\n\n                selectedRecord[\"spredefinedsynonym\"] = defaultCodedResult[0].spredefinedsynonym;\n                selectedRecord[\"spredefinedcomments\"] = defaultCodedResult[0].spredefinedcomments;\n              }\n            }\n          } else {\n            selectedRecord[\"spredefinedname\"] = \"\";\n            selectedRecord[\"ngradecode\"] = -1;\n          }\n\n          if (selectedParameterItem[\"npredefinedrequired\"] === transactionStatus.YES) {\n            needCodedResult = false;\n            npredefinedcode = selectedParameterItem[\"npredefinedrequired\"];\n          }\n\n          if (selectedParameterItem[\"ngraderequired\"] === transactionStatus.YES) {\n            needActualResult = false;\n          }\n        }\n      } else {\n        const parameterItem = parameterMap.get(\"DefaultValue\") ? parameterMap.get(\"DefaultValue\").item : {}; // parameterType.filter(item=>{ return item.nparametertypecode === transactionStatus.YES });\n\n        if (parameterItem[\"nunitrequired\"] === transactionStatus.YES) {\n          needUnit = false;\n          selectedRecord[\"nunitcode\"] = unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\"; //{\"value\": response[0].data[0][\"nunitcode\"], \"label\": response[0].data[0][\"sunitname\"]};\n        }\n\n        if (parameterItem[\"nroundingrequired\"] === transactionStatus.YES) {\n          needRoundingDigit = false;\n        }\n\n        if (parameterItem[\"npredefinedcrequired\"] === transactionStatus.YES) {\n          needCodedResult = false;\n          npredefinedcode = parameterItem[\"npredefinedcode\"];\n        }\n\n        if (parameterItem[\"ngraderequired\"] === transactionStatus.YES) {\n          needActualResult = false; // selectedRecord[\"ngradecode\"] = {\"value\": Grade.ngradecode, \"label\": Grade[\"sdisplaystatus\"]};\n        }\n\n        selectedRecord[\"nparametertypecode\"] = parameterMap.get(\"DefaultValue\"); //{value: parameterItem[0].nparametertypecode, label: parameterItem[0].sdisplaystatus};\n\n        selectedRecord[\"nroundingdigits\"] = \"\";\n        selectedRecord[\"nunitcode\"] = \"\";\n        selectedRecord[\"nresultaccuracycode\"] = \"\";\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: true,\n          operation: operation,\n          screenName: \"IDS_PARAMETER\",\n          selectedRecord,\n          DestinationUnit: DestinationUnitMap.length > 0 ? DestinationUnitMap : [],\n          parameterData: {\n            unit: unitMap.get(\"OptionList\"),\n            grade: gradeMap.get(\"OptionList\"),\n            deltaperiod: deltaperiodMap.get(\"OptionList\"),\n            parameterType: parameterMap.get(\"OptionList\"),\n            resultaccuracy: resultAccuracyMap.get(\"OptionList\"),\n            needUnit,\n            needRoundingDigit,\n            needCodedResult,\n            needActualResult,\n            npredefinedcode,\n            testParameter: constructOptionList(response[3].data[\"TestParameter\"] || [], 'sparametername', 'sparametername', false, false, true).get(\"OptionList\"),\n            defaultUnit: unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\",\n            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"\n          },\n          ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}; //Add Coded result\n\nexport const addCodedResult = (operation, paramdata, userInfo, ncontrolCode) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    const urlArray = [rsapi.post(\"testmaster/getAddTest\", {\n      \"userinfo\": userInfo\n    }), rsapi.post(\"grade/getGrade\", {\n      \"userinfo\": userInfo\n    })];\n\n    if (operation === \"update\") {\n      urlArray.push(rsapi.post(\"testmaster/getActivePredefinedParameterById\", {\n        ntestpredefinedcode: paramdata[\"ntestpredefinedcode\"],\n        \"userinfo\": userInfo\n      }));\n    }\n\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = {}; // const grade = response[1].data;\n\n      const gradeMap = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\n\n      if (operation === \"update\") {\n        const editCodedResult = response[2].data;\n        selectedRecord = {\n          ntestpredefinedcode: paramdata[\"ntestpredefinedcode\"],\n          ntestparametercode: paramdata[\"ntestparametercode\"],\n          ngradecode: {\n            \"label\": editCodedResult[\"sdisplaystatus\"],\n            \"value\": editCodedResult[\"ngradecode\"]\n          },\n          spredefinedname: editCodedResult[\"spredefinedname\"],\n          ndefaultstatus: editCodedResult[\"ndefaultstatus\"],\n          //sresultparacomment:editCodedResult[\"sresultparacomment\"],\n          spredefinedsynonym: editCodedResult[\"spredefinedsynonym\"]\n        };\n      } else {\n        selectedRecord = {\n          ntestparametercode: paramdata[\"ntestparametercode\"],\n          ngradecode: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\" //{\"value\": grade[0].ngradecode, \"label\": grade[0][\"sdisplaystatus\"]}\n\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: false,\n          operation: operation,\n          screenName: \"IDS_CODEDRESULT\",\n          parameterData: {\n            grade: gradeMap.get(\"OptionList\"),\n            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"\n          },\n          selectedRecord,\n          ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}; //Add parameter specification\n\nexport const addParameterSpecification = (operation, paramdata, userInfo, ncontrolCode) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    let inputparam = [];\n    let surl = \"\";\n\n    if (operation === \"update\") {\n      surl = \"getParameterSpecificationById\";\n      inputparam = {\n        userinfo: userInfo,\n        ntestparamnumericcode: paramdata[\"ntestparamnumericcode\"]\n      };\n    } else {\n      surl = \"getParameterSpecificationByCount\";\n      inputparam = {\n        userinfo: userInfo,\n        ntestparametercode: paramdata[\"ntestparametercode\"]\n      };\n    }\n\n    const urlArray = [rsapi.post(\"testmaster/\" + surl, inputparam), rsapi.post(\"grade/getGrade\", {\n      userinfo: userInfo\n    })];\n    Axios.all(urlArray).then(response => {\n      let grade = {};\n      let selectedRecord = {};\n      const gradeMap = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\n      grade = gradeMap.get(\"OptionList\");\n\n      if (operation === \"update\") {\n        selectedRecord = { ...response[0].data\n        }; //ALPD-4364\n\n        selectedRecord[\"ngradecode\"] = getComboLabelValue(response[0].data, response[1].data, \"ngradecode\", \"sdisplaystatus\");\n      } else {\n        selectedRecord = {\n          ntestparametercode: paramdata[\"ntestparametercode\"]\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: false,\n          operation: operation,\n          screenName: \"IDS_SPECIFICATION\",\n          selectedRecord,\n          ncontrolCode,\n          parameterData: {\n            grade\n          },\n          loading: false,\n          grade\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const getAvailableData = (testItem, url, key, screenName, userInfo, ncontrolCode) => {\n  return dispatch => {\n    const inputParam = {\n      TestMaster: testItem,\n      \"userinfo\": userInfo\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"testmaster/\" + url, inputParam).then(response => {\n      const availableDataMap = constructOptionList(response.data, key === \"section\" ? \"nsectioncode\" : key === \"method\" ? \"nmethodcode\" : key == \"instrumentcategory\" ? \"ninstrumentcatcode\" : key == \"package\" ? \"ntestpackagecode\" : key == \"technique\" ? \"ntechniquecode\" : \"ncontainertypecode\", key === \"section\" ? \"ssectionname\" : key === \"method\" ? \"smethodname\" : key == \"instrumentcategory\" ? \"sinstrumentcatname\" : key == \"package\" ? \"stestpackagename\" : key == \"technique\" ? \"stechniquename\" : \"scontainertype\", false, false, true);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: false,\n          otherTestData: {\n            [key]: availableDataMap.get(\"OptionList\")\n          },\n          screenName: screenName,\n          selectedRecord: {\n            availableData: \"\"\n          },\n          operation: \"create\",\n          ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 417) {\n        toast.info(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n}; //Add formula\n\nexport const addFormula = (paramdata, userInfo, ncontrolCode) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"testmaster/addTestFormula\", {\n      userinfo: userInfo,\n      nFlag: 1\n    }).then(response => {\n      const responseData = response.data;\n      const testMasterMap = constructOptionList(responseData[\"TestMaster\"], \"ntestcode\", \"stestname\", false, false, false);\n      const testCategoryMap = constructOptionList(responseData[\"TestCategory\"], \"ntestcategorycode\", \"stestcategoryname\", 'descending', false, true);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: false,\n          operation: \"create\",\n          screenName: \"IDS_FORMULA\",\n          formulaData: {\n            operators: responseData[\"Operators\"],\n            functions: responseData[\"Functions\"],\n            testCategory: testCategoryMap.get(\"OptionList\"),\n            testMaster: testMasterMap.get(\"OptionList\"),\n            dynamicFormulaFields: responseData[\"DynamicFormulaFields\"]\n          },\n          isFormulaOpen: true,\n          selectedRecord: {\n            ntestcategorycode: testCategoryMap.get(\"OptionList\") && testCategoryMap.get(\"OptionList\").length > 0 ? testCategoryMap.get(\"OptionList\")[0] : \"\",\n            //responseData[\"TestCategory\"].length>0? {\"label\": responseData[\"TestCategory\"][0][\"stestcategoryname\"], \"value\": responseData[\"TestCategory\"][0][\"ntestcategorycode\"]}: \"\",\n            ntestcode: testMasterMap.get(\"OptionList\") && testMasterMap.get(\"OptionList\").length > 0 ? testMasterMap.get(\"OptionList\")[0] : \"\",\n            //responseData[\"TestMaster\"].length>0? {\"label\": responseData[\"TestMaster\"][0][\"stestname\"], \"value\": responseData[\"TestMaster\"][0][\"ntestcode\"]}: \"\",\n            ntestparametercode: paramdata[\"ntestparametercode\"]\n          },\n          ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}; //Formula test category and test change event function\n\nexport const formulaChangeFunction = (inputParam, formulaData, caseNo, selectedRecordData, methodUrl) => {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testmaster\" + methodUrl, inputParam).then(response => {\n      const masterData = response.data;\n      const testMasterMap = constructOptionList(masterData[\"TestMaster\"] || [], \"ntestcode\", \"stestname\", 'descending', 'ntestcode', false);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: caseNo === 1 ? {\n          formulaData: { ...formulaData,\n            testMaster: testMasterMap.get(\"OptionList\"),\n            dynamicFormulaFields: masterData[\"DynamicFormulaFields\"] || []\n          },\n          selectedRecord: { ...selectedRecordData,\n            ntestcode: testMasterMap.get(\"OptionList\") && testMasterMap.get(\"OptionList\").length > 0 ? testMasterMap.get(\"OptionList\")[0] : \"\" // masterData[\"TestMaster\"].length>0? {\"label\": masterData[\"TestMaster\"][0][\"stestname\"], \"value\": masterData[\"TestMaster\"][0][\"ntestcode\"]}: \"\"\n\n          },\n          loading: false\n        } : {\n          formulaData: { ...formulaData,\n            dynamicFormulaFields: masterData[\"DynamicFormulaFields\"]\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      toast.error(error.message);\n    });\n  };\n};\nexport const changeTestCategoryFilter = (inputParam, filterTestCategory) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testmaster/get\" + inputParam.methodUrl, inputParam.inputData).then(response => {\n      const masterData = response.data;\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          masterData: { ...masterData,\n            filterTestCategory,\n            nfilterTestCategory: inputParam.inputData.nfilterTestCategory\n          }\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      toast.error(error.message);\n    });\n  };\n};\nexport const addTestFile = inputParam => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\n      userinfo: inputParam.userInfo\n    })];\n\n    if (inputParam.operation === \"update\") {\n      urlArray.push(rsapi.post(\"/testmaster/editTestFile\", {\n        userinfo: inputParam.userInfo,\n        testfile: inputParam.selectedRecord\n      }));\n    }\n\n    Axios.all(urlArray).then(response => {\n      const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\n      const linkmaster = linkMap.get(\"OptionList\");\n      let selectedRecord = {};\n      const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\n      let disabled = false;\n      let editObject = {};\n\n      if (inputParam.operation === \"update\") {\n        editObject = response[1].data;\n        let nlinkcode = {};\n        let link = {};\n\n        if (editObject.nattachmenttypecode === attachmentType.LINK) {\n          nlinkcode = {\n            \"label\": editObject.slinkname,\n            \"value\": editObject.nlinkcode\n          };\n          link = {\n            slinkfilename: editObject.sfilename,\n            slinkdescription: editObject.sdescription,\n            nlinkdefaultstatus: editObject.ndefaultstatus,\n            sfilesize: '',\n            nfilesize: 0,\n            ndefaultstatus: 4,\n            sfilename: ''\n          };\n        } else {\n          nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\"; //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\n\n          link = {\n            slinkfilename: '',\n            slinkdescription: '',\n            nlinkdefaultstatus: 4,\n            sfilesize: editObject.sfilesize,\n            nfilesize: editObject.nfilesize,\n            ndefaultstatus: editObject.ndefaultstatus,\n            sfilename: editObject.sfilename,\n            sdescription: editObject.sdescription\n          };\n        }\n\n        selectedRecord = { ...link,\n          ssystemfilename: editObject.ssystemfilename,\n          ntestfilecode: editObject.ntestfilecode,\n          nattachmenttypecode: editObject.nattachmenttypecode,\n          //...editObject,\n          nlinkcode // disabled: true\n\n        };\n      } else {\n        selectedRecord = {\n          nattachmenttypecode: response[0].data.AttachmentType.length > 0 ? response[0].data.AttachmentType[0].nattachmenttypecode : attachmentType.FTP,\n          nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\",\n          //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\n          disabled\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          [inputParam.modalName]: true,\n          operation: inputParam.operation,\n          screenName: inputParam.screenName,\n          ncontrolCode: inputParam.ncontrolCode,\n          selectedRecord,\n          loading: false,\n          linkMaster: linkmaster,\n          showSaveContinue: false,\n          editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const getActiveTestContainerTypeById = containerParam => {\n  return function (dispatch) {\n    let urlArray = [];\n    const containerTypeById = rsapi.post(\"containertype/getContainerType\", {\n      \"userinfo\": containerParam.userInfo\n    });\n    const containerById = rsapi.post(\"testmaster/getActiveTestContainerTypeById\", {\n      [containerParam.primaryKeyField]: containerParam.primaryKeyValue,\n      \"userinfo\": containerParam.userInfo\n    });\n    const units = rsapi.post(\"unit/getUnit\", {\n      \"userinfo\": containerParam.userInfo\n    });\n    urlArray = [containerTypeById, containerById, units];\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = {};\n      const continerType = constructOptionList(response[0].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\n      const unitMap = constructOptionList(response[2].data || [], \"nunitcode\", \"sunitname\", false, false, true);\n      let otherTestData = {\n        containertype: continerType.get(\"OptionList\"),\n        unit: unitMap.get(\"OptionList\")\n      };\n      let ContainerType = [];\n      let unit = [];\n      ContainerType.push({\n        \"value\": response[1].data[\"ncontainertypecode\"],\n        \"label\": response[1].data[\"scontainertype\"]\n      });\n      selectedRecord = response[1].data;\n      selectedRecord[\"ncontainertypecode\"] = ContainerType[0];\n\n      if (response[1].data[\"nunitcode\"] !== -1) {\n        unit.push({\n          \"value\": response[1].data[\"nunitcode\"],\n          \"label\": response[1].data[\"sunitname\"]\n        });\n        selectedRecord = response[1].data;\n        selectedRecord[\"nunitcode\"] = unit[0];\n        selectedRecord[\"unitMandatory\"] = true;\n      } else {\n        selectedRecord[\"nunitcode\"] = undefined;\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          otherTestData: otherTestData,\n          selectedRecord: selectedRecord,\n          isOpen: true,\n          operation: containerParam.operation,\n          screenName: \"IDS_CONTAINERTYPE\",\n          openChildModal: true,\n          ncontrolCode: containerParam.ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n};\nexport const addContainerType = (operation, testparametercode, userInfo, ncontrolCode) => {\n  return function (dispatch) {\n    let urlArray = [];\n    const containerTypeById = rsapi.post(\"unit/getUnit\", {\n      \"userinfo\": userInfo\n    });\n    const containerById = rsapi.post(\"testmaster/getAvailableContainerType\", {\n      \"TestMaster\": testparametercode,\n      \"userinfo\": userInfo\n    });\n    urlArray = [containerTypeById, containerById];\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = {};\n      const unitMap = constructOptionList(response[0].data || [], \"nunitcode\", \"sunitname\", false, false, true);\n      const continerType = constructOptionList(response[1].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\n      let otherTestData = {\n        containertype: continerType.get(\"OptionList\"),\n        unit: unitMap.get(\"OptionList\")\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          otherTestData: otherTestData,\n          selectedRecord: selectedRecord,\n          showSaveContinue: false,\n          isOpen: true,\n          operation: operation,\n          screenName: \"IDS_CONTAINERTYPE\",\n          openChildModal: true,\n          loading: false,\n          ncontrolCode\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n};\nexport function ReportInfoTest(screenName, operation, primaryKeyName, masterData, userInfo, ncontrolCode) {\n  return function (dispatch) {\n    let urlArray = [];\n    const Submitter = rsapi.post(\"/testmaster/getEditReportInfoTest\", {\n      [primaryKeyName]: masterData.SelectedTest[primaryKeyName],\n      \"userinfo\": userInfo\n    });\n    urlArray = [Submitter];\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = {};\n      selectedRecord[\"sconfirmstatement\"] = response[0].data.ReportInfoTest.sconfirmstatement;\n      selectedRecord[\"sdecisionrule\"] = response[0].data.ReportInfoTest.sdecisionrule;\n      selectedRecord[\"ssopdescription\"] = response[0].data.ReportInfoTest.ssopdescription;\n      selectedRecord[\"stestcondition\"] = response[0].data.ReportInfoTest.stestcondition;\n      selectedRecord[\"sdeviationcomments\"] = response[0].data.ReportInfoTest.sdeviationcomments;\n      selectedRecord[\"smethodstandard\"] = response[0].data.ReportInfoTest.smethodstandard;\n      selectedRecord[\"sreference\"] = response[0].data.ReportInfoTest.sreference;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          isOpen: true,\n          masterData: masterData,\n          selectedRecord,\n          operation: operation,\n          screenName: screenName,\n          openModal: true,\n          ncontrolCode: ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport function getUnitConversion(nunitcode, masterData, userInfo, selectedRecord) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"testmaster/getDestinationUnit\", {\n      \"nunitcode\": nunitcode,\n      \"userinfo\": userInfo\n    }).then(response => {\n      let DestinationUnit = [];\n      selectedRecord[\"ndestinationunitcode\"] = \"\";\n      const DestinationUnitMap = constructOptionList(response.data.DestinationUnit || [], \"ndestinationunitcode\", \"sunitname1\", undefined, undefined, false);\n      DestinationUnit = DestinationUnitMap.get(\"OptionList\"); //ALPD-3521\n\n      if (DestinationUnit.length === 0) {\n        selectedRecord[\"noperatorcode\"] = -1;\n        selectedRecord[\"nconversionfactor\"] = \"\";\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          DestinationUnit,\n          selectedRecord,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getConversionOperator(nunitcode, ndestinationunitcode, masterData, userInfo, selectedRecord) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"testmaster/getConversionOperator\", {\n      \"nsourceunitcode\": nunitcode,\n      \"ndestinationunitcode\": ndestinationunitcode,\n      \"userinfo\": userInfo\n    }).then(response => {\n      //ALPD-3521\n      selectedRecord[\"noperatorcode\"] = response.data.UnitConversion[0].noperatorcode;\n      selectedRecord[\"soperator\"] = response.data.UnitConversion[0].soperator;\n      selectedRecord[\"nconversionfactor\"] = response.data.UnitConversion[0].nconversionfactor;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedRecord,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport const addClinicalSpecification = (operation, paramdata, userInfo, ncontrolCode) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    const urlArray = [rsapi.post(\"patient/getGender\", {\n      \"userinfo\": userInfo\n    }), rsapi.post(\"grade/getGrade\", {\n      userinfo: userInfo\n    }), rsapi.post(\"/period/getPeriodByControl\", {\n      \"ncontrolcode\": ncontrolCode,\n      \"userinfo\": userInfo\n    })];\n\n    if (operation === \"update\") {\n      urlArray.push(rsapi.post(\"testmaster/getTestParameterClinicalSpecById\", { ...paramdata,\n        \"userinfo\": userInfo\n      }));\n    }\n\n    Axios.all(urlArray).then(response => {\n      let grade = {};\n      let gender = {};\n      let period = {};\n      let selectedRecord = {}; //ALPD-5053 added by Dhanushya RI,To get fromage period and toage period\n\n      let ntoageperiod = [];\n      let nfromageperiod = [];\n      const gradeMap = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\n      grade = gradeMap.get(\"OptionList\");\n      const genderMap = constructOptionList(response[0].data.genderList || [], \"ngendercode\", \"sgendername\", false, false, true);\n      gender = genderMap.get(\"OptionList\");\n      const PeriodMap = constructOptionList(response[2].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\n      period = PeriodMap.get(\"OptionList\");\n\n      if (operation === \"update\") {\n        selectedRecord = { ...response[3].data\n        };\n        selectedRecord[\"ngradecode\"] = getComboLabelValue(response[3].data, response[1].data, \"ngradecode\", \"sgradename\");\n        selectedRecord[\"ngendercode\"] = getComboLabelValue(response[3].data, response[0].data.genderList, \"ngendercode\", \"sgendername\");\n        nfromageperiod.push({\n          \"value\": response[3].data[\"nfromageperiod\"],\n          \"label\": response[3].data[\"sfromageperiod\"]\n        });\n        ntoageperiod.push({\n          \"value\": response[3].data[\"ntoageperiod\"],\n          \"label\": response[3].data[\"stoageperiod\"]\n        });\n        selectedRecord[\"nfromageperiod\"] = nfromageperiod[0];\n        selectedRecord[\"ntoageperiod\"] = ntoageperiod[0];\n        selectedRecord[\"nhigha\"] = selectedRecord[\"shigha\"] === 'null' ? '' : selectedRecord[\"shigha\"];\n        selectedRecord[\"nhighb\"] = selectedRecord[\"shighb\"] === 'null' ? '' : selectedRecord[\"shighb\"];\n        selectedRecord[\"nlowa\"] = selectedRecord[\"slowa\"] === 'null' ? '' : selectedRecord[\"slowa\"];\n        selectedRecord[\"nlowb\"] = selectedRecord[\"slowb\"] === 'null' ? '' : selectedRecord[\"slowb\"];\n        selectedRecord[\"sminlod\"] = selectedRecord[\"sminlod\"] === 'null' ? '' : selectedRecord[\"sminlod\"];\n        selectedRecord[\"smaxlod\"] = selectedRecord[\"smaxlod\"] === 'null' ? '' : selectedRecord[\"smaxlod\"];\n        selectedRecord[\"sminloq\"] = selectedRecord[\"sminloq\"] === 'null' ? '' : selectedRecord[\"sminloq\"];\n        selectedRecord[\"smaxloq\"] = selectedRecord[\"smaxloq\"] === 'null' ? '' : selectedRecord[\"smaxloq\"];\n        selectedRecord[\"sdisregard\"] = selectedRecord[\"sdisregard\"] === 'null' ? '' : selectedRecord[\"sdisregard\"];\n        selectedRecord[\"sresultvalue\"] = selectedRecord[\"sresultvalue\"] === 'null' ? '' : selectedRecord[\"sresultvalue\"];\n      } else {\n        selectedRecord = {\n          ntestparametercode: paramdata[\"ntestparametercode\"]\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: false,\n          operation: operation,\n          screenName: \"IDS_CLINICALSPEC\",\n          selectedRecord,\n          ncontrolCode,\n          loading: false,\n          parameterData: {\n            gender,\n            grade,\n            formAgePeriod: period,\n            toAgePeriod: period,\n            needCodedResult: false\n          }\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const addPredefinedModal = (userInfo, ncontrolCode) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"testmaster/getPreDefinedFormula\", {\n      userinfo: userInfo\n    }).then(response => {\n      const responseData = response.data;\n      const preDefinedFormulaMap = constructOptionList(responseData[\"PreDefinedFormula\"], \"npredefinedformulacode\", \"sdescription\", false, false, false);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: false,\n          operation: \"create\",\n          screenName: \"IDS_PREDEFINEDFORMULA\",\n          preDefinedFormula: preDefinedFormulaMap.get(\"OptionList\"),\n          ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/QuaLISWeb/src/actions/TestMasterAction.js"],"names":["rsapi","toast","constructOptionList","sortData","getComboLabelValue","DEFAULT_RETURN","Axios","initRequest","transactionStatus","attachmentType","intl","getTestMaster","testItem","userInfo","masterData","dispatch","post","ntestcode","userinfo","then","response","data","type","payload","loading","dataState","undefined","catch","error","status","message","warn","getTestDetails","inputParam","testParameter","nFlag","ntestparametercode","nclinicaltyperequired","SelectedTest","addTest","operation","testmaster","ncontrolCode","nfilterTestCategory","Object","values","length","urlArray","push","all","selectedRecord","selectedsubcodedresult","testCategoryMap","testCategory","get","checklistMap","ChecklistVersion","testData","parameterData","otherTestData","needOtherTest","editData","periodMap","interfacetypeMap","period","interfacetype","ntestcategorycode","value","ntransactionstatus","ACTIVE","naccredited","NOTACCREDITED","ntrainingneed","NO","stestsynonym","stestname","sdescription","ncost","parameterMap","gradeMap","parameterItem","nunitcode","nresultaccuracycode","nparametertypecode","needUnit","needRoundingDigit","needCodedResult","needActualResult","npredefinedcode","unitMap","deltaperiodMap","resultAccuracyMap","item","YES","grade","parameterType","unit","deltaperiod","resultaccuracy","defaultUnit","defaultGrade","sectionMap","methodMap","instCatMap","continerType","packageMap","package","section","method","instrumentcategory","containertype","periodDefault","label","openModal","screenName","formatMessage","id","addParameter","selectedParameter","DestinationUnitMap","DestinationUnit","No","editTestParameter","TestParameter","filter","selectedParameterItem","editCodedResult","TestPredefinedParameter","defaultCodedResult","ndefaultstatus","spredefinedname","ntestpredefinedcode","ngradecode","spredefinedsynonym","spredefinedcomments","openChildModal","showSaveContinue","addCodedResult","paramdata","addParameterSpecification","inputparam","surl","ntestparamnumericcode","getAvailableData","url","key","TestMaster","availableDataMap","availableData","info","addFormula","responseData","testMasterMap","formulaData","operators","functions","testMaster","dynamicFormulaFields","isFormulaOpen","formulaChangeFunction","caseNo","selectedRecordData","methodUrl","changeTestCategoryFilter","filterTestCategory","inputData","addTestFile","testfile","linkMap","LinkMaster","linkmaster","defaultLink","items","ndefaultlink","disabled","editObject","nlinkcode","link","nattachmenttypecode","LINK","slinkname","slinkfilename","sfilename","slinkdescription","nlinkdefaultstatus","sfilesize","nfilesize","ssystemfilename","ntestfilecode","AttachmentType","FTP","modalName","linkMaster","editFiles","getActiveTestContainerTypeById","containerParam","containerTypeById","containerById","primaryKeyField","primaryKeyValue","units","ContainerType","isOpen","addContainerType","testparametercode","ReportInfoTest","primaryKeyName","Submitter","sconfirmstatement","sdecisionrule","ssopdescription","stestcondition","sdeviationcomments","smethodstandard","sreference","getUnitConversion","getConversionOperator","ndestinationunitcode","UnitConversion","noperatorcode","soperator","nconversionfactor","addClinicalSpecification","gender","ntoageperiod","nfromageperiod","genderMap","genderList","PeriodMap","formAgePeriod","toAgePeriod","addPredefinedModal","preDefinedFormulaMap","preDefinedFormula"],"mappings":"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","sourcesContent":["import rsapi from \"../rsapi\";\r\nimport {\r\n    toast\r\n} from \"react-toastify\";\r\nimport {\r\n    constructOptionList,\r\n    sortData,getComboLabelValue\r\n} from \"../components/CommonScript\";\r\nimport {\r\n    DEFAULT_RETURN\r\n} from \"./LoginTypes\";\r\nimport Axios from \"axios\";\r\nimport {\r\n    initRequest\r\n} from \"./LoginAction\";\r\nimport {\r\n    transactionStatus,\r\n    attachmentType\r\n} from \"../components/Enumeration\";\r\nimport {\r\n    intl\r\n} from \"../components/App\";\r\n\r\n//Test click\r\nexport const getTestMaster = (testItem, userInfo, masterData) => {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testmaster/getTestById\", {\r\n                ntestcode: testItem.ntestcode,\r\n                userinfo: userInfo\r\n            })\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data\r\n                }\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        dataState: undefined\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n//tab click\r\nexport const getTestDetails = (inputParam) => {\r\n    return function (dispatch) {\r\n        const testParameter = inputParam.testParameter;\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testmaster/getothertestdetails\", {\r\n                ntestcode: testParameter.ntestcode,\r\n                \"nFlag\": inputParam.nFlag,\r\n                ntestparametercode: testParameter.ntestparametercode,\r\n                userinfo: inputParam.userInfo,\r\n                nclinicaltyperequired:inputParam.masterData.SelectedTest.nclinicaltyperequired\r\n            })\r\n            .then(response => {\r\n                let masterData = inputParam.masterData\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data\r\n                };\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\n\r\n//Add Test\r\nexport const addTest = (operation, testmaster, userInfo, ncontrolCode, nfilterTestCategory) => {\r\n    return function (dispatch) {\r\n        if (nfilterTestCategory && Object.values(nfilterTestCategory).length > 0) {\r\n            dispatch(initRequest(true));\r\n            const urlArray = [\r\n                rsapi.post(\"testcategory/getTestCategory\", {\r\n                    \"userinfo\": userInfo\r\n                }),\r\n                rsapi.post(\"checklist/getApprovedChecklist\", {\r\n                    \"userinfo\": userInfo\r\n                })\r\n            ];\r\n            if (operation === \"update\") {\r\n                urlArray.push(rsapi.post(\"testmaster/getActiveTestById\", {\r\n                    \"userinfo\": userInfo,\r\n                    ntestcode: testmaster.ntestcode\r\n                }))\r\n\r\n                urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\r\n                    \"ncontrolcode\": ncontrolCode,\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n            } else if (operation === \"create\") {\r\n                urlArray.push(rsapi.post(\"parametertype/getParameterType\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"grade/getGrade\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"section/getSection\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testmaster/getAvailableMethod\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"unit/getUnit\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n               \r\n                urlArray.push(rsapi.post(\"instrumentcategory/fetchinstrumentcategory\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testmaster/getAddTest\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"containertype/getContainerType\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testpackage/getTestPackage\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n\r\n                urlArray.push(  rsapi.post(\"period/getPeriodByControl\", {\r\n                    \"ncontrolcode\": ncontrolCode,\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testmaster/getResultAccuracy\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n            } else if (operation === \"copy\") {\r\n                urlArray.push(rsapi.post(\"testmaster/validateCopyTest\", {\r\n                    \"userinfo\": userInfo,\r\n                    ntestcode: testmaster.ntestcode\r\n                }));\r\n\r\n                urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\r\n                    \"ncontrolcode\": ncontrolCode,\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                \r\n            }\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                  \r\n                    let selectedRecord = {};\r\n                    let selectedsubcodedresult = [];\r\n                    const testCategoryMap = constructOptionList(response[0].data || [], \"ntestcategorycode\", \"stestcategoryname\", false, false, true);\r\n                    const testCategory = testCategoryMap.get(\"OptionList\");\r\n                    const checklistMap = constructOptionList(response[0].data || [], \"nchecklistversioncode\", \"schecklistname\", false, false, true);\r\n                    const ChecklistVersion = checklistMap.get(\"OptionList\");\r\n                    //const periodMap=[];\r\n                    const testData = {\r\n                        testCategory,\r\n                        ChecklistVersion\r\n                    };\r\n                    let parameterData = {};\r\n                    let otherTestData = {}\r\n                    let needOtherTest = false;\r\n                    if (operation === \"update\") {\r\n                        const editData = response[2].data;\r\n                        selectedRecord = editData;\r\n                        const periodMap = constructOptionList(response[3].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n                        const interfacetypeMap = constructOptionList(response[4].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true);\r\n\r\n                        parameterData = {\r\n                            period:periodMap.get(\"OptionList\"),\r\n                            interfacetype:interfacetypeMap.get(\"OptionList\")\r\n                        }\r\n                        selectedRecord[\"ntestcategorycode\"] = {\r\n                            \"value\": editData[\"ntestcategorycode\"],\r\n                            \"label\": editData[\"stestcategoryname\"]\r\n                        };\r\n                        selectedRecord[\"nchecklistversioncode\"] = {\r\n                            \"value\": editData[\"nchecklistversioncode\"],\r\n                            \"label\": editData[\"schecklistname\"]\r\n                        };\r\n                        \r\n                        if(selectedRecord[\"ntatperiodcode\"] !==-1){\r\n                            selectedRecord[\"ntatperiodcode\"] = {\r\n                                \"value\": editData[\"ntatperiodcode\"],\r\n                                \"label\": editData[\"statperiodname\"]\r\n                            };\r\n                        }\r\n                        selectedRecord[\"ninterfacetypecode\"] = {\r\n                            \"value\": editData[\"ninterfacetypecode\"],\r\n                            \"label\": editData[\"sinterfacetypename\"]\r\n                        };\r\n                    } else if (operation === \"copy\") {\r\n                        const periodMap = constructOptionList(response[3].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n                        const interfacetypeMap = constructOptionList(response[4].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true);\r\n\r\n                        //period:periodMap.get(\"OptionList\")\r\n                        parameterData={\r\n                            period: periodMap.get(\"OptionList\"),\r\n                            interfacetype:interfacetypeMap.get(\"OptionList\")\r\n                        } ;\r\n                        selectedRecord = {\r\n                            ntestcategorycode: nfilterTestCategory.value === -2 ? (testCategory.length > 0 ?\r\n                                // {\"label\": testCategory[0].stestcategoryname, \"value\": testCategory[0].ntestcategorycode}\r\n                                testCategory[0] : \"\") : nfilterTestCategory,\r\n                            ntransactionstatus: transactionStatus.ACTIVE,\r\n                            naccredited: transactionStatus.NOTACCREDITED,\r\n                            ntrainingneed: transactionStatus.NO,\r\n                            stestsynonym: \"\",\r\n                            stestname: \"\",\r\n                            sdescription: \"\",\r\n                            ncost: \"\",\r\n                            //period:periodMap.get(\"OptionList\"),\r\n                           \r\n                        }\r\n                        \r\n                    } else {\r\n                        // const { Grade } = response[7].data; //ParameterType\r\n                        const parameterMap = constructOptionList(response[2].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true);\r\n                        // const parameterType = parameterMap.get(\"OptionList\");//response[2].data;\r\n                        const gradeMap = constructOptionList(response[3].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                        // const grade = gradeMap.get(\"OptionList\");// response[3].data;\r\n                        const parameterItem = parameterMap.get(\"DefaultValue\") ? parameterMap.get(\"DefaultValue\") : \"\"; //parameterType.filter(item=>{ return item.nparametertypecode === 3 });//ParameterType[0];\r\n                        selectedRecord = {\r\n                            // nsectioncode: {\"value\": response[2].data[0].nsectioncode, \"label\": response[2].data[0].ssectionname},\r\n                            nunitcode: -1,\r\n                            nresultaccuracycode: -1,\r\n                            nparametertypecode: parameterItem, //{\"value\": parameterItem[0].nparametertypecode, \"label\": parameterItem[0].sdisplaystatus},\r\n                            ntestcategorycode: nfilterTestCategory.value === -2 ? (testCategory.length > 0 ?\r\n                                // {\"label\": testCategory[0].stestcategoryname, \"value\": testCategory[0].ntestcategorycode}: \"\")\r\n                                testCategory[0] : \"\") : nfilterTestCategory,\r\n                            ntransactionstatus: transactionStatus.ACTIVE,\r\n                            naccredited: transactionStatus.NOTACCREDITED,\r\n                            ntrainingneed: transactionStatus.NO,\r\n                            stestsynonym: \"\",\r\n                            stestname: \"\",\r\n                            sdescription: \"\",\r\n                            ncost: \"\"\r\n                        }\r\n                        let needUnit = true;\r\n                        let needRoundingDigit = true;\r\n                        let needCodedResult = true;\r\n                        let needActualResult = true;\r\n                        let npredefinedcode = transactionStatus.NO;\r\n                        const unitMap = constructOptionList(response[6].data || [], \"nunitcode\", \"sunitname\", false, false, true);\r\n                        const periodMap = constructOptionList(response[11].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n                        const deltaperiodMap = constructOptionList(response[11].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n                        const interfacetypeMap = constructOptionList(response[12].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true);\r\n                        const resultAccuracyMap = constructOptionList(response[13].data || [], \"nresultaccuracycode\",\"sresultaccuracyname\", false, false, true);\r\n\r\n                        if (parameterItem && parameterItem.item) {\r\n                            if (parameterItem.item[\"nunit\"] === transactionStatus.YES) {\r\n                                needUnit = false;\r\n                                selectedRecord[\"nunitcode\"] = unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\";\r\n                                //{\"value\": response[4].data[0][\"nunitcode\"], \"label\": response[4].data[0][\"sunitname\"]};\r\n                            }\r\n                            if (parameterItem.item[\"nroundingdigit\"] === transactionStatus.YES) {\r\n                                needRoundingDigit = false;\r\n                            }\r\n                            if (parameterItem.item[\"npredefinedcode\"] === transactionStatus.YES) {\r\n                                needCodedResult = false;\r\n                                npredefinedcode = parameterItem.item[\"npredefinedcode\"];\r\n                            }\r\n                            if (parameterItem.item[\"ngrade\"] === transactionStatus.YES) {\r\n                                needActualResult = false;\r\n                                selectedRecord[\"ngradecode\"] = gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\";\r\n                                //{\"value\": Grade.ngradecode, \"label\": Grade[\"sdisplaystatus\"]};\r\n                            }\r\n                        }\r\n                        // const testParameterMap = constructOptionList(response[8].data[\"TestParameter\"] || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true);\r\n                        parameterData = {\r\n                            grade: gradeMap.get(\"OptionList\"),\r\n                            parameterType: parameterMap.get(\"OptionList\"),\r\n                            unit: unitMap.get(\"OptionList\"),\r\n                            period:periodMap.get(\"OptionList\"),\r\n                            interfacetype:interfacetypeMap.get(\"OptionList\"),\r\n                            deltaperiod: deltaperiodMap.get(\"OptionList\"),\r\n                            resultaccuracy:resultAccuracyMap.get(\"OptionList\"),\r\n                            needRoundingDigit,\r\n                            needUnit,\r\n                            needCodedResult,\r\n                            needActualResult,\r\n                            npredefinedcode,\r\n                            testParameter: constructOptionList(response[8].data[\"TestParameter\"] || [], 'sparametername', 'sparametername', false, false, true).get(\"OptionList\"),\r\n                            defaultUnit: unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\",\r\n                            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"\r\n                            //testParameterMap.get(\"OptionList\")\r\n                        };\r\n                        const sectionMap = constructOptionList(response[4].data || [], \"nsectioncode\", \"ssectionname\", false, false, true);\r\n                       // const methodMap = constructOptionList(response[5].data.Method.length>0?response[5].data.Method:[] || [], \"nmethodcode\", \"smethodname\", false, false, true);\r\n                       const methodMap = constructOptionList(response[5].data||[], \"nmethodcode\", \"smethodname\", false, false, true);\r\n\r\n                       const instCatMap = constructOptionList(response[7].data || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", false, false, true);\r\n                        const continerType = constructOptionList(response[9].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\r\n                        const packageMap = constructOptionList(response[10].data || [], \"ntestpackagecode\", \"stestpackagename\", false, false, true);\r\n                        otherTestData = {\r\n                            package: packageMap.get(\"OptionList\"),\r\n                            section: sectionMap.get(\"OptionList\"),\r\n                            method: methodMap.get(\"OptionList\"),\r\n                            instrumentcategory: instCatMap.get(\"OptionList\"),\r\n                            containertype: continerType.get(\"OptionList\")\r\n\r\n                        }\r\n                        needOtherTest = true;\r\n                        const periodDefault = periodMap.get(\"DefaultValue\");\r\n\r\n                        if (periodDefault !== undefined) {\r\n                            selectedRecord = {\r\n                                ...selectedRecord,\r\n                                \"ntatperiodcode\": {\r\n                                    \"value\": periodDefault.value,\r\n                                    \"label\": periodDefault.label\r\n                                },\r\n                            }\r\n                        }\r\n                        \r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            // parameterData: {\r\n                            //     period: periodMap.get(\"OptionList\")\r\n                            // },   \r\n                            openModal: true,\r\n                            needOtherTest,\r\n                            operation: operation,\r\n                            screenName: \"IDS_TEST\",\r\n                            selectedRecord,\r\n                            ncontrolCode,\r\n                            testData,\r\n                            parameterData,\r\n                            otherTestData,\r\n                            loading: false,selectedsubcodedresult\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_TESTCATEGORYNOTAVAILABLE\"\r\n            }))\r\n        }\r\n    }\r\n}\r\n\r\n//Add Test Parameter\r\nexport const addParameter = (operation, selectedParameter, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        const urlArray = [];\r\n        urlArray.push(rsapi.post(\"unit/getUnit\", {\r\n            \"userinfo\": userInfo\r\n        }));\r\n        urlArray.push(rsapi.post(\"parametertype/getParameterType\", {\r\n            \"userinfo\": userInfo\r\n        }));\r\n        urlArray.push(rsapi.post(\"grade/getGrade\", {\r\n            \"userinfo\": userInfo\r\n        }));\r\n        urlArray.push(rsapi.post(\"testmaster/getAddTest\", {\r\n            \"userinfo\": userInfo\r\n        }));\r\n        urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\r\n            \"ncontrolcode\": ncontrolCode,\r\n            \"userinfo\": userInfo\r\n        }));\r\n            \r\n        \r\n        if (operation === \"update\") {            \r\n\r\n            urlArray.push(rsapi.post(\"testmaster/getActiveParameterById\", {\r\n                ntestparametercode: selectedParameter.ntestparametercode,\r\n                \"userinfo\": userInfo\r\n            }));\r\n\r\n            urlArray.push(rsapi.post(\"testmaster/getDestinationUnit\", {\r\n                nunitcode: selectedParameter.nunitcode,\r\n                \"userinfo\": userInfo\r\n            }));\r\n        }\r\n        urlArray.push(rsapi.post(\"testmaster/getResultAccuracy\", {\r\n            \"userinfo\": userInfo\r\n        }));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                // const { Grade, ParameterType } = response[1].data;\r\n                let DestinationUnitMap =[];\r\n                const parameterMap = constructOptionList(response[1].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true);\r\n                const gradeMap = constructOptionList(response[2].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                const unitMap = constructOptionList(response[0].data || [], \"nunitcode\", \"sunitname\", false, false, true);\r\n                const deltaperiodMap = constructOptionList(response[4].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n                //ALPD-4363\r\n                const resultAccuracyMap = constructOptionList(operation === \"update\" ? response[7].data : response[5].data || [], \"nresultaccuracycode\", \"sresultaccuracyname\", false, false, true);\r\n\r\n                if (operation === \"update\") {\r\n                    DestinationUnitMap = constructOptionList(response[6].data.DestinationUnit || [], \"ndestinationunitcode\", \"sunitname1\", false, false, true).get(\"OptionList\");\r\n                }\r\n\r\n\r\n                //response[2].data;\r\n                // const grade = response[2].data;\r\n                // const parameterType = response[1].data;\r\n                let selectedRecord = {};\r\n                let needUnit = true;\r\n                let needRoundingDigit = true;\r\n                let needCodedResult = true;\r\n                let needActualResult = true;\r\n                let npredefinedcode = transactionStatus.No;\r\n                if (operation === \"update\") {\r\n\r\n                    const editTestParameter = response[5].data.TestParameter[0];\r\n                    //ALPD-3521\r\n  \t\t\t\t if(editTestParameter[\"ndestinationunitcode\"]==-1){\r\n   \t\t\t\t\t editTestParameter[\"soperator\"]=[];\t\r\n\t\t\t\t\t}\r\n                    selectedRecord = editTestParameter;\r\n                    const nparametertypecode = editTestParameter[\"nparametertypecode\"];\r\n                    const parameterItem = parameterMap.get(\"OptionList\").filter(function (item) {\r\n                        return item.value === nparametertypecode;\r\n                    });\r\n                    selectedRecord[\"sparametername\"] = {\r\n                        value: editTestParameter[\"sparametername\"],\r\n                        label: editTestParameter[\"sparametername\"]\r\n                    };\r\n\r\n                    if(editTestParameter[\"ndeltaunitcode\"] !==-1){\r\n                        selectedRecord[\"ndeltaunitcode\"] = {\r\n                            \"value\": editTestParameter[\"ndeltaunitcode\"],\r\n                            \"label\": editTestParameter[\"sdeltaunitname\"]\r\n                        };\r\n                    }\r\n                    selectedRecord[\"nparametertypecode\"] = {\r\n                        value: nparametertypecode,\r\n                        label: editTestParameter[\"sdisplaystatus\"]\r\n                    };\r\n                    if (parameterItem && parameterItem[0].item) {\r\n                        const selectedParameterItem = parameterItem[0].item;\r\n                        if (selectedParameterItem[\"nunitrequired\"] === transactionStatus.YES) {\r\n                            needUnit = false;\r\n                            selectedRecord[\"nunitcode\"] = {\r\n                                value: editTestParameter[\"nunitcode\"],\r\n                                label: editTestParameter[\"sunitname\"]\r\n                            };\r\n                            if(editTestParameter[\"ndestinationunitcode\"]!=-1){\r\n                            selectedRecord[\"ndestinationunitcode\"] = {\r\n                                value: editTestParameter[\"ndestinationunitcode\"],\r\n                                label: editTestParameter[\"sunitname1\"]\r\n                            };\r\n                            }\r\n                            selectedRecord[\"nresultaccuracycode\"] = {\r\n                                value: editTestParameter[\"nresultaccuracycode\"],\r\n                                label: editTestParameter[\"sresultaccuracyname\"]\r\n                            };\r\n                            \r\n                        }\r\n                        if (selectedParameterItem[\"nroundingrequired\"] === transactionStatus.YES) {\r\n                            needRoundingDigit = false;\r\n                        }\r\n\r\n                        if (selectedParameterItem[\"npredefinedrequired\"] === transactionStatus.YES || selectedParameterItem[\"ngraderequired\"] === transactionStatus.YES) {\r\n                            const editCodedResult = response[5].data.TestPredefinedParameter;\r\n                            if (editCodedResult.length > 0) {\r\n                                const defaultCodedResult = editCodedResult.filter(function (item) {\r\n                                    return item.ndefaultstatus === transactionStatus.YES;\r\n                                });\r\n                                if (defaultCodedResult.length > 0) {\r\n                                    selectedRecord[\"spredefinedname\"] = defaultCodedResult[0].spredefinedname;\r\n                                    selectedRecord[\"ntestpredefinedcode\"] = defaultCodedResult[0].ntestpredefinedcode;;\r\n                                    selectedRecord[\"ngradecode\"] = {\r\n                                        value: defaultCodedResult[0].ngradecode,\r\n                                        label: defaultCodedResult[0][\"sdisplaystatus\"]\r\n                                    };\r\n                                    //selectedRecord[\"sresultparacomment\"] = defaultCodedResult[0].sresultparacomment;\r\n                                    selectedRecord[\"spredefinedsynonym\"] = defaultCodedResult[0].spredefinedsynonym;\r\n                                    selectedRecord[\"spredefinedcomments\"] = defaultCodedResult[0].spredefinedcomments;\r\n                                } else {\r\n                                    selectedRecord[\"spredefinedname\"] = editCodedResult[0].spredefinedname;\r\n                                    selectedRecord[\"ntestpredefinedcode\"] = editCodedResult[0].ntestpredefinedcode;\r\n                                    selectedRecord[\"ngradecode\"] = {\r\n                                        value: editCodedResult[0].ngradecode,\r\n                                        label: editCodedResult[0][\"sdisplaystatus\"]\r\n                                    };\r\n                                    //selectedRecord[\"sresultparacomment\"] = defaultCodedResult[0].sresultparacomment;\r\n                                    selectedRecord[\"spredefinedsynonym\"] = defaultCodedResult[0].spredefinedsynonym;\r\n                                    selectedRecord[\"spredefinedcomments\"] = defaultCodedResult[0].spredefinedcomments;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            selectedRecord[\"spredefinedname\"] = \"\";\r\n                            selectedRecord[\"ngradecode\"] = -1;\r\n                        }\r\n                        if (selectedParameterItem[\"npredefinedrequired\"] === transactionStatus.YES) {\r\n                            needCodedResult = false;\r\n                            npredefinedcode = selectedParameterItem[\"npredefinedrequired\"];\r\n                        }\r\n                        if (selectedParameterItem[\"ngraderequired\"] === transactionStatus.YES) {\r\n                            needActualResult = false;\r\n                        }\r\n                    }\r\n                } else {\r\n                    const parameterItem = parameterMap.get(\"DefaultValue\") ? parameterMap.get(\"DefaultValue\").item : {};\r\n                    // parameterType.filter(item=>{ return item.nparametertypecode === transactionStatus.YES });\r\n                    if (parameterItem[\"nunitrequired\"] === transactionStatus.YES) {\r\n                        needUnit = false;\r\n                        selectedRecord[\"nunitcode\"] = unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\"; //{\"value\": response[0].data[0][\"nunitcode\"], \"label\": response[0].data[0][\"sunitname\"]};\r\n                    }\r\n                    if (parameterItem[\"nroundingrequired\"] === transactionStatus.YES) {\r\n                        needRoundingDigit = false;\r\n                    }\r\n                    if (parameterItem[\"npredefinedcrequired\"] === transactionStatus.YES) {\r\n                        needCodedResult = false;\r\n                        npredefinedcode = parameterItem[\"npredefinedcode\"];\r\n                    }\r\n                    if (parameterItem[\"ngraderequired\"] === transactionStatus.YES) {\r\n                        needActualResult = false;\r\n                        // selectedRecord[\"ngradecode\"] = {\"value\": Grade.ngradecode, \"label\": Grade[\"sdisplaystatus\"]};\r\n                    }\r\n                    selectedRecord[\"nparametertypecode\"] = parameterMap.get(\"DefaultValue\"); //{value: parameterItem[0].nparametertypecode, label: parameterItem[0].sdisplaystatus};\r\n                    selectedRecord[\"nroundingdigits\"]=\"\";\r\n                    selectedRecord[\"nunitcode\"] = \"\";\r\n                    selectedRecord[\"nresultaccuracycode\"]=\"\";\r\n\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: true,\r\n                        operation: operation,\r\n                        screenName: \"IDS_PARAMETER\",\r\n                        selectedRecord,\r\n                        DestinationUnit : DestinationUnitMap.length >0  ? DestinationUnitMap:[],\r\n                        parameterData: {\r\n                            unit: unitMap.get(\"OptionList\"),\r\n                            grade: gradeMap.get(\"OptionList\"),\r\n                            deltaperiod:deltaperiodMap.get(\"OptionList\"),\r\n                            parameterType: parameterMap.get(\"OptionList\"), \r\n                            resultaccuracy: resultAccuracyMap.get(\"OptionList\"),\r\n                            needUnit,\r\n                            needRoundingDigit,\r\n                            needCodedResult,\r\n                            needActualResult,\r\n                            npredefinedcode,\r\n                            testParameter: constructOptionList(response[3].data[\"TestParameter\"] || [], 'sparametername', 'sparametername', false, false, true).get(\"OptionList\"),\r\n                            defaultUnit: unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\",\r\n                            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"\r\n                        },\r\n                        ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n//Add Coded result\r\nexport const addCodedResult = (operation, paramdata, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        const urlArray = [\r\n            rsapi.post(\"testmaster/getAddTest\", {\r\n                \"userinfo\": userInfo\r\n            }),\r\n            rsapi.post(\"grade/getGrade\", {\r\n                \"userinfo\": userInfo\r\n            })\r\n        ];\r\n        if (operation === \"update\") {\r\n            urlArray.push(rsapi.post(\"testmaster/getActivePredefinedParameterById\", {\r\n                ntestpredefinedcode: paramdata[\"ntestpredefinedcode\"],\r\n                \"userinfo\": userInfo\r\n            }));\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = {};\r\n                // const grade = response[1].data;\r\n                const gradeMap = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                if (operation === \"update\") {\r\n                    const editCodedResult = response[2].data;\r\n                    selectedRecord = {\r\n                        ntestpredefinedcode: paramdata[\"ntestpredefinedcode\"],\r\n                        ntestparametercode: paramdata[\"ntestparametercode\"],\r\n                        ngradecode: {\r\n                            \"label\": editCodedResult[\"sdisplaystatus\"],\r\n                            \"value\": editCodedResult[\"ngradecode\"]\r\n                        },\r\n                        spredefinedname: editCodedResult[\"spredefinedname\"],\r\n                        ndefaultstatus: editCodedResult[\"ndefaultstatus\"],\r\n                        //sresultparacomment:editCodedResult[\"sresultparacomment\"],\r\n                        spredefinedsynonym:editCodedResult[\"spredefinedsynonym\"],\r\n                    }\r\n                } else {\r\n                    selectedRecord = {\r\n                        ntestparametercode: paramdata[\"ntestparametercode\"],\r\n                        ngradecode: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\" //{\"value\": grade[0].ngradecode, \"label\": grade[0][\"sdisplaystatus\"]}\r\n                    }\r\n                }\r\n              \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: false,\r\n                        operation: operation,\r\n                        screenName: \"IDS_CODEDRESULT\",\r\n                        parameterData: {\r\n                            grade: gradeMap.get(\"OptionList\"),\r\n                            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"\r\n                        },\r\n                        selectedRecord,\r\n                        ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n//Add parameter specification\r\nexport const addParameterSpecification = (operation, paramdata, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let inputparam = [];\r\n        let surl = \"\";\r\n        if (operation === \"update\") {\r\n            surl = \"getParameterSpecificationById\";\r\n            inputparam = {\r\n                userinfo: userInfo,\r\n                ntestparamnumericcode: paramdata[\"ntestparamnumericcode\"]\r\n            };\r\n        } else {\r\n            surl = \"getParameterSpecificationByCount\";\r\n            inputparam = {\r\n                userinfo: userInfo,\r\n                ntestparametercode: paramdata[\"ntestparametercode\"]\r\n            };\r\n        }\r\n        const urlArray = [rsapi.post(\"testmaster/\" + surl, inputparam),\r\n        rsapi.post(\"grade/getGrade\", {\r\n            userinfo: userInfo\r\n        }),]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let grade ={};\r\n                let selectedRecord = {};\r\n                const gradeMap = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                grade = gradeMap.get(\"OptionList\");\r\n                if (operation === \"update\") {\r\n                    selectedRecord = {\r\n                        ...response[0].data\r\n                    }\r\n                    //ALPD-4364\r\n                    selectedRecord[\"ngradecode\"] = getComboLabelValue(response[0].data, response[1].data, \r\n                        \"ngradecode\", \"sdisplaystatus\");   \r\n                } else {\r\n                    selectedRecord = {\r\n                        ntestparametercode: paramdata[\"ntestparametercode\"]\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: false,\r\n                        operation: operation,\r\n                        screenName: \"IDS_SPECIFICATION\",\r\n                        selectedRecord,\r\n                        ncontrolCode,parameterData: {\r\n                          grade,\r\n                                                  },\r\n                        loading: false,grade\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getAvailableData = (testItem, url, key, screenName, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        const inputParam = {\r\n            TestMaster: testItem,\r\n            \"userinfo\": userInfo\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testmaster/\" + url, inputParam)\r\n            .then(response => {\r\n                const availableDataMap = constructOptionList(response.data, key === \"section\" ? \"nsectioncode\" : key === \"method\" ? \"nmethodcode\" : key == \"instrumentcategory\" ?\"ninstrumentcatcode\" : key == \"package\" ?\"ntestpackagecode\" : key == \"technique\" ?\"ntechniquecode\" : \"ncontainertypecode\",\r\n                    key === \"section\" ? \"ssectionname\" : key === \"method\" ? \"smethodname\" :  key == \"instrumentcategory\" ? \"sinstrumentcatname\"  :  key == \"package\" ? \"stestpackagename\" :key == \"technique\" ? \"stechniquename\" : \"scontainertype\", false, false, true);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: false,\r\n                        otherTestData: {\r\n                            [key]: availableDataMap.get(\"OptionList\")\r\n                        },\r\n                        screenName: screenName,\r\n                        selectedRecord: {\r\n                            availableData: \"\"\r\n                        },\r\n                        operation: \"create\",\r\n                        ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 417) {\r\n                    toast.info(error.response.data)\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n//Add formula\r\nexport const addFormula = (paramdata, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testmaster/addTestFormula\", {\r\n                userinfo: userInfo,\r\n                nFlag: 1\r\n            })\r\n            .then(response => {\r\n                const responseData = response.data;\r\n                const testMasterMap = constructOptionList(responseData[\"TestMaster\"], \"ntestcode\", \"stestname\", false, false, false);\r\n                const testCategoryMap = constructOptionList(responseData[\"TestCategory\"], \r\n                \"ntestcategorycode\", \"stestcategoryname\", 'descending', false, true);\r\n            \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: false,\r\n                        operation: \"create\",\r\n                        screenName: \"IDS_FORMULA\",\r\n                        formulaData: {\r\n                            operators: responseData[\"Operators\"],\r\n                            functions: responseData[\"Functions\"],\r\n                            testCategory: testCategoryMap.get(\"OptionList\"),\r\n                            testMaster: testMasterMap.get(\"OptionList\"),\r\n                            dynamicFormulaFields: responseData[\"DynamicFormulaFields\"]\r\n                        },\r\n                        isFormulaOpen: true,\r\n                        selectedRecord: {\r\n                            ntestcategorycode: testCategoryMap.get(\"OptionList\") && testCategoryMap.get(\"OptionList\").length > 0 ? testCategoryMap.get(\"OptionList\")[0] : \"\", //responseData[\"TestCategory\"].length>0? {\"label\": responseData[\"TestCategory\"][0][\"stestcategoryname\"], \"value\": responseData[\"TestCategory\"][0][\"ntestcategorycode\"]}: \"\",\r\n                            ntestcode: testMasterMap.get(\"OptionList\") && testMasterMap.get(\"OptionList\").length > 0 ? testMasterMap.get(\"OptionList\")[0] : \"\", //responseData[\"TestMaster\"].length>0? {\"label\": responseData[\"TestMaster\"][0][\"stestname\"], \"value\": responseData[\"TestMaster\"][0][\"ntestcode\"]}: \"\",\r\n                            ntestparametercode: paramdata[\"ntestparametercode\"]\r\n                        },\r\n                        ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n//Formula test category and test change event function\r\nexport const formulaChangeFunction = (inputParam, formulaData, caseNo, selectedRecordData, methodUrl) => {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testmaster\" + methodUrl, inputParam)\r\n            .then(response => {\r\n                const masterData = response.data;\r\n                const testMasterMap = constructOptionList(masterData[\"TestMaster\"] || [], \"ntestcode\", \"stestname\", 'descending', 'ntestcode', false);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n\r\n                    payload: caseNo === 1 ? {\r\n                        formulaData: {\r\n                            ...formulaData,\r\n                            testMaster: testMasterMap.get(\"OptionList\"),\r\n                            dynamicFormulaFields: masterData[\"DynamicFormulaFields\"] || []\r\n                        },\r\n                        selectedRecord: {\r\n                            ...selectedRecordData,\r\n                            ntestcode: testMasterMap.get(\"OptionList\") && testMasterMap.get(\"OptionList\").length > 0 ? testMasterMap.get(\"OptionList\")[0] : \"\"\r\n                            // masterData[\"TestMaster\"].length>0? {\"label\": masterData[\"TestMaster\"][0][\"stestname\"], \"value\": masterData[\"TestMaster\"][0][\"ntestcode\"]}: \"\"\r\n                        },\r\n                        loading: false\r\n                    } : {\r\n                        formulaData: {\r\n                            ...formulaData,\r\n                            dynamicFormulaFields: masterData[\"DynamicFormulaFields\"]\r\n                        },\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}\r\n\r\nexport const changeTestCategoryFilter = (inputParam, filterTestCategory) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testmaster/get\" + inputParam.methodUrl, inputParam.inputData)\r\n            .then(response => {\r\n                const masterData = response.data\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            filterTestCategory,\r\n                            nfilterTestCategory: inputParam.inputData.nfilterTestCategory\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}\r\n\r\nexport const addTestFile = (inputParam) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\r\n            userinfo: inputParam.userInfo\r\n        })];\r\n        if (inputParam.operation === \"update\") {\r\n            urlArray.push(rsapi.post(\"/testmaster/editTestFile\", {\r\n                userinfo: inputParam.userInfo,\r\n                testfile: inputParam.selectedRecord\r\n            }))\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n              \r\n                const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\r\n                const linkmaster = linkMap.get(\"OptionList\");\r\n                let selectedRecord = {};\r\n                const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\r\n                let disabled = false;\r\n                let editObject = {};\r\n                if (inputParam.operation === \"update\") {\r\n                    editObject = response[1].data;\r\n                    let nlinkcode = {};\r\n                    let link = {};\r\n                    if (editObject.nattachmenttypecode === attachmentType.LINK) {\r\n                        nlinkcode = {\r\n                            \"label\": editObject.slinkname,\r\n                            \"value\": editObject.nlinkcode\r\n                        }\r\n\r\n                        link = {\r\n                            slinkfilename:editObject.sfilename,\r\n                            slinkdescription:editObject.sdescription,\r\n                            nlinkdefaultstatus:editObject.ndefaultstatus,\r\n                            sfilesize:'',\r\n                            nfilesize:0,\r\n                            ndefaultstatus:4,\r\n                            sfilename:'',\r\n                        }\r\n\r\n                    } else {\r\n                        nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\" //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\r\n                        link = {\r\n                            slinkfilename:'',\r\n                            slinkdescription:'',\r\n                            nlinkdefaultstatus:4,\r\n                            sfilesize:editObject.sfilesize,\r\n                            nfilesize:editObject.nfilesize,\r\n                            ndefaultstatus:editObject.ndefaultstatus,\r\n                            sfilename:editObject.sfilename,\r\n                            sdescription:editObject.sdescription\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n                    selectedRecord = {\r\n                        ...link,\r\n                        ssystemfilename:editObject.ssystemfilename,\r\n                        ntestfilecode:editObject.ntestfilecode,\r\n                        nattachmenttypecode:editObject.nattachmenttypecode,\r\n                        //...editObject,\r\n                        nlinkcode,\r\n        \r\n                       // disabled: true\r\n                    };\r\n                } else {\r\n                    selectedRecord = {\r\n                        nattachmenttypecode:response[0].data.AttachmentType.length>0?\r\n                        response[0].data.AttachmentType[0].nattachmenttypecode:attachmentType.FTP,\r\n                        nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\", //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\r\n                        disabled\r\n                    };\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        [inputParam.modalName]: true,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolCode,\r\n                        selectedRecord,\r\n                        loading: false,\r\n                        linkMaster: linkmaster,\r\n                        showSaveContinue: false,\r\n                        editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n \r\n\r\nexport const getActiveTestContainerTypeById = (containerParam) => {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n        const containerTypeById =rsapi.post(\"containertype/getContainerType\", {\r\n            \"userinfo\": containerParam.userInfo});\r\n        \r\n          \r\n            const containerById=rsapi.post(\"testmaster/getActiveTestContainerTypeById\", {\r\n                [containerParam.primaryKeyField] :containerParam.primaryKeyValue,\r\n                \"userinfo\": containerParam.userInfo\r\n                });\r\n                const units =rsapi.post(\"unit/getUnit\", {\r\n                    \"userinfo\": containerParam.userInfo});\r\n            urlArray = [containerTypeById, containerById,units];\r\n\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = {};\r\n               \r\n                const continerType = constructOptionList(response[0].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\r\n                const unitMap = constructOptionList(response[2].data || [], \"nunitcode\", \"sunitname\", false, false, true);\r\n\r\n                let otherTestData = {\r\n                    containertype: continerType.get(\"OptionList\"),\r\n                    unit: unitMap.get(\"OptionList\")\r\n                }\r\n                let ContainerType = [];\r\n                let unit=[];\r\n\r\n                ContainerType.push({\r\n                    \"value\": response[1].data[\"ncontainertypecode\"],\r\n                    \"label\": response[1].data[\"scontainertype\"]\r\n                });\r\n                selectedRecord = response[1].data;\r\n\r\n                selectedRecord[\"ncontainertypecode\"] = ContainerType[0];\r\n               \r\n                if( response[1].data[\"nunitcode\"]!==-1){\r\n                    unit.push({\r\n                        \"value\": response[1].data[\"nunitcode\"],\r\n                        \"label\": response[1].data[\"sunitname\"]\r\n                    });\r\n                    selectedRecord = response[1].data;\r\n                    selectedRecord[\"nunitcode\"] = unit[0];\r\n                    selectedRecord[\"unitMandatory\"] = true;\r\n                } else {\r\n                    selectedRecord[\"nunitcode\"] = undefined;\r\n                }\r\n                \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        otherTestData:otherTestData,\r\n                       selectedRecord: selectedRecord,\r\n                        isOpen: true,\r\n                        operation: containerParam.operation,\r\n                        screenName: \"IDS_CONTAINERTYPE\",\r\n                        openChildModal: true,\r\n                        ncontrolCode:containerParam.ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const addContainerType = (operation, testparametercode, userInfo, ncontrolCode) => {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n        const containerTypeById =rsapi.post(\"unit/getUnit\", {\r\n            \"userinfo\": userInfo});\r\n        \r\n          \r\n             const containerById=rsapi.post(\"testmaster/getAvailableContainerType\", {\r\n                \"TestMaster\": testparametercode,\r\n                 \"userinfo\": userInfo\r\n                 });\r\n             urlArray = [containerTypeById,containerById];\r\n\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = {};\r\n                const unitMap = constructOptionList(response[0].data || [], \"nunitcode\", \"sunitname\", false, false, true);\r\n \r\n                const continerType = constructOptionList(response[1].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\r\n\r\n                let otherTestData = {\r\n                    containertype: continerType.get(\"OptionList\"),\r\n                    unit: unitMap.get(\"OptionList\")\r\n\r\n                }\r\n                \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        otherTestData:otherTestData,\r\n                       selectedRecord: selectedRecord,\r\n                       showSaveContinue: false,\r\n                        isOpen: true,\r\n                        operation: operation,\r\n                        screenName: \"IDS_CONTAINERTYPE\",\r\n                        openChildModal: true,\r\n                        loading: false,\r\n                        ncontrolCode\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function ReportInfoTest(screenName, operation, primaryKeyName, masterData, userInfo, ncontrolCode) {\r\n    return function (dispatch) {\r\n\r\n           let urlArray = [];                \r\n            const Submitter = rsapi.post(\"/testmaster/getEditReportInfoTest\", {\r\n                                              [primaryKeyName]: masterData.SelectedTest[primaryKeyName],\r\n                                              \"userinfo\": userInfo\r\n                            });\r\n                            urlArray = [Submitter];\r\n                        dispatch(initRequest(true));\r\n                        Axios.all(urlArray)\r\n                        .then(response => {\r\n                            let selectedRecord ={};                              \r\n                            selectedRecord[\"sconfirmstatement\"]  = response[0].data.ReportInfoTest.sconfirmstatement ;\r\n                            selectedRecord[\"sdecisionrule\"]  = response[0].data.ReportInfoTest.sdecisionrule;\r\n                            selectedRecord[\"ssopdescription\"]  = response[0].data.ReportInfoTest.ssopdescription;\r\n                            selectedRecord[\"stestcondition\"]  = response[0].data.ReportInfoTest.stestcondition;  \r\n                            selectedRecord[\"sdeviationcomments\"]  = response[0].data.ReportInfoTest.sdeviationcomments;                      \r\n                            selectedRecord[\"smethodstandard\"]  = response[0].data.ReportInfoTest.smethodstandard;  \r\n                            selectedRecord[\"sreference\"]  = response[0].data.ReportInfoTest.sreference;               \r\n    \r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    isOpen: true,\r\n                                    masterData:masterData,\r\n                                    selectedRecord,\r\n                                    operation: operation,\r\n                                    screenName: screenName,\r\n                                    openModal: true,\r\n                                    ncontrolCode: ncontrolCode,\r\n                                    loading: false,\r\n                           \r\n                                }\r\n                            });\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    loading: false\r\n                                }\r\n                            })\r\n                            if (error.response.status === 500) {\r\n                                toast.error(intl.formatMessage({ id: error.message  }));\r\n                            } else {\r\n                            toast.warn(intl.formatMessage({id: error.response.data }));\r\n                            }\r\n                        })              \r\n        \r\n    }\r\n\r\n}\r\n\r\nexport function getUnitConversion(nunitcode,masterData, userInfo, selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"testmaster/getDestinationUnit\", {\"nunitcode\": nunitcode,\"userinfo\": userInfo})\r\n            .then(response => {\r\n                let DestinationUnit = [];   \r\n                selectedRecord[\"ndestinationunitcode\"]=\"\";                  \r\n\r\n                const DestinationUnitMap = constructOptionList(response.data.DestinationUnit || [], \"ndestinationunitcode\",\"sunitname1\", undefined, undefined, false);\r\n                DestinationUnit = DestinationUnitMap.get(\"OptionList\");\r\n\t\t\t\t\t//ALPD-3521\r\n                if(DestinationUnit.length===0){\r\n                    selectedRecord[\"noperatorcode\"]=-1;\r\n                    selectedRecord[\"nconversionfactor\"]=\"\";\r\n\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        DestinationUnit,\r\n                        selectedRecord,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getConversionOperator(nunitcode,ndestinationunitcode,masterData, userInfo, selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"testmaster/getConversionOperator\", {\"nsourceunitcode\":nunitcode,\"ndestinationunitcode\": ndestinationunitcode,\"userinfo\": userInfo})\r\n            .then(response => {      \r\n                \r\n                //ALPD-3521\r\n                selectedRecord[\"noperatorcode\"]=response.data.UnitConversion[0].noperatorcode;\r\n                selectedRecord[\"soperator\"] = response.data.UnitConversion[0].soperator;           \r\n                selectedRecord[\"nconversionfactor\"] = response.data.UnitConversion[0].nconversionfactor;\r\n                \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {                       \r\n                        selectedRecord,\r\n                        loading: false\r\n                    }\r\n                });\r\n\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\nexport const addClinicalSpecification = (operation, paramdata, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n            dispatch(initRequest(true));\r\n            const urlArray = [\r\n                rsapi.post(\"patient/getGender\", {\r\n                    \"userinfo\": userInfo\r\n                }),\r\n                rsapi.post(\"grade/getGrade\", {\r\n                    userinfo: userInfo\r\n                }),\r\n                rsapi.post(\"/period/getPeriodByControl\", {\r\n                    \"ncontrolcode\": ncontrolCode,\r\n                    \"userinfo\": userInfo\r\n                })\r\n            ];\r\n            \r\n            if (operation === \"update\") {\r\n                urlArray.push(rsapi.post(\"testmaster/getTestParameterClinicalSpecById\", {\r\n                    ...paramdata,\r\n                    \"userinfo\": userInfo\r\n                        }));\r\n            }\r\n            Axios.all(urlArray)\r\n            .then(response => {\r\n                let grade ={};\r\n                let gender={};\r\n                let period={};\r\n                let selectedRecord = {};\r\n        //ALPD-5053 added by Dhanushya RI,To get fromage period and toage period\r\n                let ntoageperiod=[];\r\n                let nfromageperiod=[];\r\n\r\n                const gradeMap = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                grade = gradeMap.get(\"OptionList\");\r\n                const genderMap = constructOptionList(response[0].data.genderList || [], \"ngendercode\", \"sgendername\", false, false, true);\r\n                 gender = genderMap.get(\"OptionList\");  \r\n                 const PeriodMap = constructOptionList(response[2].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n                 period = PeriodMap.get(\"OptionList\");  \r\n                                    \r\n                if (operation === \"update\") {\r\n                    selectedRecord = {\r\n                        ...response[3].data\r\n                    }\r\n                    selectedRecord[\"ngradecode\"] = getComboLabelValue(response[3].data, response[1].data, \r\n                        \"ngradecode\", \"sgradename\");   \r\n                    selectedRecord[\"ngendercode\"] = getComboLabelValue(response[3].data, response[0].data.genderList, \r\n                            \"ngendercode\", \"sgendername\");\r\n                    nfromageperiod.push({\r\n                                \"value\": response[3].data[\"nfromageperiod\"],\r\n                                \"label\": response[3].data[\"sfromageperiod\"]\r\n                            });\r\n                    ntoageperiod.push({\r\n                                \"value\": response[3].data[\"ntoageperiod\"],\r\n                                \"label\": response[3].data[\"stoageperiod\"]\r\n                            });  \r\n                        selectedRecord[\"nfromageperiod\"]=nfromageperiod[0];\r\n                        selectedRecord[\"ntoageperiod\"]=ntoageperiod[0];\r\n\r\n                            selectedRecord[\"nhigha\"]= selectedRecord[\"shigha\"]==='null'?'':selectedRecord[\"shigha\"]\r\n                            selectedRecord[\"nhighb\"]= selectedRecord[\"shighb\"]==='null'?'':selectedRecord[\"shighb\"]\r\n                           selectedRecord[\"nlowa\"]= selectedRecord[\"slowa\"]==='null'?'':selectedRecord[\"slowa\"]\r\n                           selectedRecord[\"nlowb\"]=selectedRecord[\"slowb\"]==='null'?'':selectedRecord[\"slowb\"]\r\n                           selectedRecord[\"sminlod\"]= selectedRecord[\"sminlod\"] ==='null'?'':selectedRecord[\"sminlod\"]\r\n                           selectedRecord[\"smaxlod\"]= selectedRecord[\"smaxlod\"] ==='null'?'':selectedRecord[\"smaxlod\"]\r\n                           selectedRecord[\"sminloq\"]= selectedRecord[\"sminloq\"] ==='null'?'':selectedRecord[\"sminloq\"]\r\n                           selectedRecord[\"smaxloq\"]= selectedRecord[\"smaxloq\"] ==='null'?'':selectedRecord[\"smaxloq\"]\r\n                           selectedRecord[\"sdisregard\"]= selectedRecord[\"sdisregard\"] ==='null'?'':selectedRecord[\"sdisregard\"]\r\n                           selectedRecord[\"sresultvalue\"]= selectedRecord[\"sresultvalue\"]==='null'?'':selectedRecord[\"sresultvalue\"] \r\n                } else {\r\n                    selectedRecord = {\r\n                        ntestparametercode: paramdata[\"ntestparametercode\"]\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: false,\r\n                        operation: operation,\r\n                        screenName: \"IDS_CLINICALSPEC\",\r\n                        selectedRecord,\r\n                        ncontrolCode,\r\n                        loading: false, parameterData: {\r\n                            gender,grade,formAgePeriod:period,toAgePeriod:period,\r\n                            needCodedResult: false\r\n                        },\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport const addPredefinedModal = ( userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testmaster/getPreDefinedFormula\", {\r\n                userinfo: userInfo,\r\n            })\r\n            .then(response => {\r\n                const responseData = response.data;\r\n                const preDefinedFormulaMap = constructOptionList(responseData[\"PreDefinedFormula\"], \"npredefinedformulacode\", \"sdescription\", false, false, false);\r\n            \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: false,\r\n                        operation: \"create\",\r\n                        screenName: \"IDS_PREDEFINEDFORMULA\",\r\n                        preDefinedFormula: preDefinedFormulaMap.get(\"OptionList\"),\r\n                        ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}