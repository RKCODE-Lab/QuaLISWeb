{"ast":null,"code":"var _jsxFileName = \"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\src\\\\components\\\\FilterQueryBuilder.jsx\";\nimport React, { Component } from \"react\";\nimport merge from \"lodash/merge\";\nimport { Query, Builder, BasicConfig, BasicFuncs, Utils as QbUtils } from \"react-awesome-query-builder\";\nimport \"react-awesome-query-builder/lib/css/styles.css\";\nimport { FormattedMessage, injectIntl } from \"react-intl\";\nimport AddFilteredPatient from \"../pages/contactmaster/AddFilteredPatient\";\nimport { Pager } from \"@progress/kendo-react-data-tools\";\nimport { Grid, GridColumn } from \"@progress/kendo-react-grid\";\nimport { Button } from \"react-bootstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCalculator } from \"@fortawesome/free-solid-svg-icons\";\nimport { LocalizationProvider } from \"@progress/kendo-react-intl\";\nconst InitialConfig = BasicConfig;\nconst conjunctions = {\n  AND: InitialConfig.conjunctions.AND,\n  OR: InitialConfig.conjunctions.OR\n}; // Object.keys(conjunctions).map(x=>{\n//   conjunctions[x]['label']=\"IDS_\"+conjunctions[x]['label'].toUpperCase()\n// })\n\nconst operators1 = { ...InitialConfig.operators\n};\nObject.keys(operators1).map(x => {\n  operators1[x]['label'] = \"IDS_\" + operators1[x]['label'].toUpperCase();\n});\ndelete operators1.proximity;\nconst operators = { ...operators1,\n  between: { ...operators1.between,\n    textSeparators: [\"from\", \"to\"]\n  }\n};\nconst widgets = { ...InitialConfig.widgets,\n  date: { ...InitialConfig.widgets.date,\n    dateFormat: \"DD.MM.YYYY\",\n    valueFormat: \"YYYY-MM-DD\"\n  }\n};\nconst types = { ...InitialConfig.types,\n  boolean: merge(InitialConfig.types.boolean, {\n    widgets: {\n      boolean: {\n        widgetProps: {\n          hideOperator: true,\n          operatorInlineLabel: \"is\"\n        }\n      }\n    }\n  })\n};\nconst localeSettings = {\n  locale: {\n    moment: \"ru\" //  antd:messages['en-US']\n\n  },\n  valueLabel: \"Values\",\n  valuePlaceholder: \"Values\",\n  operatorLabel: \"Operator\",\n  fieldPlaceholder: \"Select field\",\n  operatorPlaceholder: \"Select operator\",\n  deleteLabel: null,\n  addGroupLabel: \"Add group\",\n  addRuleLabel: \"Add rule\",\n  addSubRuleLabel: \"Add sub rule\",\n  delGroupLabel: null,\n  notLabel: \"Not\",\n  funcLabel: \"Function\",\n  valueSourcesPopupTitle: \"Select value source\",\n  removeRuleConfirmOptions: {\n    title: \"Are you sure delete this rule?\",\n    okText: \"Yes\",\n    okType: \"danger\"\n  },\n  removeGroupConfirmOptions: {\n    title: \"Are you sure delete this group?\",\n    okText: \"Yes\",\n    okType: \"danger\"\n  }\n};\nconst settings1 = { ...InitialConfig.settings\n};\ndelete settings1.field;\nconst settings = { ...settings1,\n  ...localeSettings,\n  valueSourcesInfo: {\n    value: {\n      label: \"Value\"\n    },\n    field: {\n      label: \"Field\",\n      widget: \"field\"\n    },\n    func: {\n      label: \"Function\",\n      widget: \"func\"\n    }\n  },\n  // canReorder: false,\n  // canRegroup: false,\n  // showNot: false,\n  // showLabels: true,\n  maxNesting: 5,\n  canLeaveEmptyGroup: true,\n  shouldCreateEmptyGroup: false,\n  showErrorMessage: true,\n  customFieldSelectProps: {\n    showSearch: true\n  } //after deletion\n  // renderField: (props) => <FieldCascader {...props} />,\n  // renderOperator: (props) => <FieldDropdown {...props} />,\n  // renderFunc: (props) => <FieldSelect {...props} />,\n\n};\nconst funcs = { ...BasicFuncs\n}; // delete funcs.valueSourcesInfo.field\n\nconst config = { ...InitialConfig,\n  conjunctions,\n  operators,\n  widgets,\n  types,\n  settings,\n  funcs,\n  fields: {}\n};\nObject.keys(config['funcs']).map(x => {\n  config['funcs'][x]['label'] = \"IDS_\" + config['funcs'][x]['label'].toUpperCase();\n});\n\nclass FilterQueryBuilder extends Component {\n  constructor(_props) {\n    super(_props);\n\n    this.render = () => /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 5\n      }\n    }, !this.props.static ? /*#__PURE__*/React.createElement(Button, {\n      className: \"btn-user btn-primary-blue\",\n      style: {\n        \"margin-left\": '900px'\n      },\n      onClick: () => this.props.handleExecuteClick(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faCalculator,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }\n    }), \" \", /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_EXECUTE\",\n      defaultMessage: \"Execute\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }\n    })) : \"\", /*#__PURE__*/React.createElement(Query, Object.assign({}, this.props.config || this.state.config, {\n      value: this.props.tree || this.state.tree,\n      onChange: this.props.onChange,\n      renderBuilder: this.renderBuilder,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 7\n      }\n    })), !this.props.static ? /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }\n    }) : \"\", !this.props.static ? /*#__PURE__*/React.createElement(LocalizationProvider, {\n      language: this.props.userInfo.slanguagetypecode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      style: {\n        maxHeight: \"400px\"\n      },\n      onRowClick: this.props.onRowClick,\n      data: this.props.filterData.slice(this.props.skip, this.props.skip + this.props.take),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }\n    }, this.props.gridColumns.map(x => {\n      return /*#__PURE__*/React.createElement(GridColumn, {\n        field: x.field,\n        title: x.title,\n        width: x.width,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 22\n        }\n      });\n    }))) : \"\", !this.props.static ? /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }\n    }) : \"\", !this.props.static ? /*#__PURE__*/React.createElement(LocalizationProvider, {\n      language: this.props.userInfo.slanguagetypecode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Pager, {\n      skip: this.props.skip,\n      take: this.props.take,\n      type: \"input\",\n      previousNext: true,\n      total: this.props.filterData.length,\n      onPageChange: this.props.handlePageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }\n    })) : \"\");\n\n    this.renderBuilder = props => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"query-builder-wrap kendo-theme\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Builder, Object.assign({}, props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }\n    })));\n\n    Object.keys(config.operators).map(x => {\n      config.operators[x]['label'] = this.props.intl.formatMessage({\n        id: config.operators[x]['label']\n      }); //  return  {[x]:config.operators[x]};\n    });\n    Object.keys(config['funcs']).map(x => {\n      config['funcs'][x]['label'] = this.props.intl.formatMessage({\n        id: config['funcs'][x]['label']\n      });\n    });\n    this.state = {\n      config: { ...config,\n        settings: { ...config.settings,\n          notLabel: this.props.intl.formatMessage({\n            id: \"IDS_NOT\"\n          }),\n          valueLabel: this.props.intl.formatMessage({\n            id: \"IDS_VALUE\"\n          }),\n          valuePlaceholder: this.props.intl.formatMessage({\n            id: \"IDS_VALUE\"\n          }),\n          operatorLabel: this.props.intl.formatMessage({\n            id: \"IDS_OPERATOR\"\n          }),\n          fieldPlaceholder: this.props.intl.formatMessage({\n            id: \"IDS_SELECTFIELD\"\n          }),\n          operatorPlaceholder: this.props.intl.formatMessage({\n            id: \"IDS_SELECTOPERATOR\"\n          }),\n          // deleteLabel: this.props.intl.formatMessage({id: \"\" }),\n          addGroupLabel: this.props.intl.formatMessage({\n            id: \"IDS_ADDGROUP\"\n          }),\n          addRuleLabel: this.props.intl.formatMessage({\n            id: \"IDS_ADDRULE\"\n          }),\n          addSubRuleLabel: this.props.intl.formatMessage({\n            id: \"IDS_ADDSUBRULE\"\n          }),\n          //delGroupLabel: this.props.intl.formatMessage({id: \"\" }),\n          valueSourcesPopupTitle: this.props.intl.formatMessage({\n            id: \"IDS_SELECTVALUESOURCE\"\n          }),\n          funcLabel: this.props.intl.formatMessage({\n            id: \"IDS_FUNCTION\"\n          }),\n          valueSourcesInfo: {\n            field: {\n              label: this.props.intl.formatMessage({\n                id: \"IDS_FIELD\"\n              }),\n              widget: 'field'\n            },\n            func: {\n              label: this.props.intl.formatMessage({\n                id: \"IDS_FUNCTION\"\n              }),\n              widget: 'func'\n            },\n            value: {\n              label: this.props.intl.formatMessage({\n                id: \"IDS_VALUE\"\n              })\n            }\n          },\n          removeRuleConfirmOptions: {\n            title: this.props.intl.formatMessage({\n              id: \"IDS_AREYOUSUREDELETETHISRULE\"\n            }),\n            okText: this.props.intl.formatMessage({\n              id: \"IDS_YES\"\n            }),\n            okType: \"danger\"\n          },\n          removeGroupConfirmOptions: {\n            title: this.props.intl.formatMessage({\n              id: \"IDS_AREYOUSUREDELETETHISGROUP\"\n            }),\n            okText: this.props.intl.formatMessage({\n              id: \"IDS_YES\"\n            }),\n            okType: \"danger\"\n          }\n        },\n        conjunctions: {\n          AND: { ...config['conjunctions']['AND'],\n            label: this.props.intl.formatMessage({\n              id: \"IDS_AND\"\n            })\n          },\n          OR: { ...config['conjunctions']['OR'],\n            label: this.props.intl.formatMessage({\n              id: \"IDS_OR\"\n            })\n          }\n        },\n        //  operators: { ...Object.keys(config.operators).map(x =>) }\n        fields: this.props.fields //,settings:{...config.settings,notLabel:this.props.intl.formatMessage({id: \"NOT\"})}\n\n      }\n    };\n  } // onChange = (immutableTree, config) => {\n  //   this.setState({ tree: immutableTree, config: config });\n  //   const jsonTree = QbUtils.getTree(immutableTree);\n  //   console.log(jsonTree);\n  // };\n\n\n}\n\nexport default injectIntl(FilterQueryBuilder);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/components/FilterQueryBuilder.jsx"],"names":["React","Component","merge","Query","Builder","BasicConfig","BasicFuncs","Utils","QbUtils","FormattedMessage","injectIntl","AddFilteredPatient","Pager","Grid","GridColumn","Button","FontAwesomeIcon","faCalculator","LocalizationProvider","InitialConfig","conjunctions","AND","OR","operators1","operators","Object","keys","map","x","toUpperCase","proximity","between","textSeparators","widgets","date","dateFormat","valueFormat","types","boolean","widgetProps","hideOperator","operatorInlineLabel","localeSettings","locale","moment","valueLabel","valuePlaceholder","operatorLabel","fieldPlaceholder","operatorPlaceholder","deleteLabel","addGroupLabel","addRuleLabel","addSubRuleLabel","delGroupLabel","notLabel","funcLabel","valueSourcesPopupTitle","removeRuleConfirmOptions","title","okText","okType","removeGroupConfirmOptions","settings1","settings","field","valueSourcesInfo","value","label","widget","func","maxNesting","canLeaveEmptyGroup","shouldCreateEmptyGroup","showErrorMessage","customFieldSelectProps","showSearch","funcs","config","fields","FilterQueryBuilder","constructor","props","render","static","handleExecuteClick","state","tree","onChange","renderBuilder","userInfo","slanguagetypecode","maxHeight","onRowClick","filterData","slice","skip","take","gridColumns","width","length","handlePageChange","intl","formatMessage","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport merge from \"lodash/merge\";\r\nimport {\r\n  Query,\r\n  Builder,\r\n  BasicConfig, BasicFuncs,\r\n  Utils as QbUtils,\r\n} from \"react-awesome-query-builder\";\r\nimport \"react-awesome-query-builder/lib/css/styles.css\";\r\nimport { FormattedMessage, injectIntl } from \"react-intl\";\r\nimport AddFilteredPatient from \"../pages/contactmaster/AddFilteredPatient\";\r\nimport { Pager } from \"@progress/kendo-react-data-tools\";\r\nimport { Grid, GridColumn } from \"@progress/kendo-react-grid\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faCalculator } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { LocalizationProvider } from \"@progress/kendo-react-intl\";\r\n\r\n\r\nconst InitialConfig = BasicConfig;\r\n\r\nconst conjunctions = {\r\n  AND: InitialConfig.conjunctions.AND,\r\n  OR: InitialConfig.conjunctions.OR,\r\n};\r\n\r\n// Object.keys(conjunctions).map(x=>{\r\n//   conjunctions[x]['label']=\"IDS_\"+conjunctions[x]['label'].toUpperCase()\r\n// })\r\n\r\nconst operators1 = {\r\n  ...InitialConfig.operators\r\n}\r\n\r\nObject.keys(operators1).map(x => {\r\n  operators1[x]['label'] = \"IDS_\" + operators1[x]['label'].toUpperCase()\r\n})\r\ndelete operators1.proximity\r\nconst operators = {\r\n  ...operators1,\r\n  between: {\r\n    ...operators1.between,\r\n    textSeparators: [\r\n      \"from\",\r\n      \"to\"\r\n    ],\r\n  }\r\n};\r\n\r\n\r\nconst widgets = {\r\n  ...InitialConfig.widgets,\r\n  date: {\r\n    ...InitialConfig.widgets.date,\r\n    dateFormat: \"DD.MM.YYYY\",\r\n    valueFormat: \"YYYY-MM-DD\",\r\n  }\r\n};\r\n\r\n\r\nconst types = {\r\n  ...InitialConfig.types,\r\n  boolean: merge(InitialConfig.types.boolean, {\r\n    widgets: {\r\n      boolean: {\r\n        widgetProps: {\r\n          hideOperator: true,\r\n          operatorInlineLabel: \"is\",\r\n        }\r\n      },\r\n    },\r\n  }),\r\n};\r\n\r\n\r\n\r\n\r\nconst localeSettings = {\r\n  locale: {\r\n    moment: \"ru\",\r\n    //  antd:messages['en-US']\r\n\r\n  },\r\n  valueLabel: \"Values\",\r\n  valuePlaceholder: \"Values\",\r\n  operatorLabel: \"Operator\",\r\n  fieldPlaceholder: \"Select field\",\r\n  operatorPlaceholder: \"Select operator\",\r\n  deleteLabel: null,\r\n  addGroupLabel: \"Add group\",\r\n  addRuleLabel: \"Add rule\",\r\n  addSubRuleLabel: \"Add sub rule\",\r\n  delGroupLabel: null,\r\n  notLabel: \"Not\",\r\n  funcLabel: \"Function\",\r\n  valueSourcesPopupTitle: \"Select value source\",\r\n  removeRuleConfirmOptions: {\r\n    title: \"Are you sure delete this rule?\",\r\n    okText: \"Yes\",\r\n    okType: \"danger\",\r\n  },\r\n  removeGroupConfirmOptions: {\r\n    title: \"Are you sure delete this group?\",\r\n    okText: \"Yes\",\r\n    okType: \"danger\",\r\n  },\r\n};\r\nconst settings1 = { ...InitialConfig.settings }\r\ndelete settings1.field\r\nconst settings = {\r\n  ...settings1,\r\n  ...localeSettings,\r\n\r\n  valueSourcesInfo: {\r\n    value: {\r\n      label: \"Value\"\r\n    }\r\n    ,\r\n    field: {\r\n      label: \"Field\",\r\n      widget: \"field\",\r\n    },\r\n    func: {\r\n      label: \"Function\",\r\n      widget: \"func\",\r\n    }\r\n  },\r\n  // canReorder: false,\r\n  // canRegroup: false,\r\n  // showNot: false,\r\n  // showLabels: true,\r\n  maxNesting: 5,\r\n  canLeaveEmptyGroup: true,\r\n  shouldCreateEmptyGroup: false,\r\n  showErrorMessage: true,\r\n  customFieldSelectProps: {\r\n    showSearch: true\r\n  }, //after deletion\r\n\r\n  // renderField: (props) => <FieldCascader {...props} />,\r\n  // renderOperator: (props) => <FieldDropdown {...props} />,\r\n  // renderFunc: (props) => <FieldSelect {...props} />,\r\n};\r\n\r\nconst funcs = {\r\n  ...BasicFuncs\r\n};\r\n// delete funcs.valueSourcesInfo.field\r\nconst config = {\r\n  ...InitialConfig, conjunctions,\r\n  operators,\r\n  widgets,\r\n  types,\r\n  settings,\r\n  funcs,\r\n  fields: {}\r\n\r\n};\r\n\r\n\r\n\r\nObject.keys(config['funcs']).map(x => {\r\n  config['funcs'][x]['label'] = \"IDS_\" + config['funcs'][x]['label'].toUpperCase()\r\n})\r\n\r\n\r\n\r\nclass FilterQueryBuilder extends Component {\r\n  constructor(props) {\r\n\r\n    super(props);\r\n    Object.keys(config.operators).map(x => {\r\n      config.operators[x]['label'] = this.props.intl.formatMessage({ id: config.operators[x]['label'] })\r\n      //  return  {[x]:config.operators[x]};\r\n    })\r\n\r\n    Object.keys(config['funcs']).map(x => {\r\n      config['funcs'][x]['label'] = this.props.intl.formatMessage({ id: config['funcs'][x]['label']})\r\n    })\r\n\r\n    this.state = {\r\n      config: {\r\n        ...config, settings: {\r\n          ...config.settings, notLabel: this.props.intl.formatMessage({ id: \"IDS_NOT\" }),\r\n          valueLabel: this.props.intl.formatMessage({ id: \"IDS_VALUE\" }),\r\n          valuePlaceholder: this.props.intl.formatMessage({ id: \"IDS_VALUE\" }),\r\n          operatorLabel: this.props.intl.formatMessage({ id: \"IDS_OPERATOR\" }),\r\n          fieldPlaceholder: this.props.intl.formatMessage({ id: \"IDS_SELECTFIELD\" }),\r\n          operatorPlaceholder: this.props.intl.formatMessage({ id: \"IDS_SELECTOPERATOR\" }),\r\n          // deleteLabel: this.props.intl.formatMessage({id: \"\" }),\r\n          addGroupLabel: this.props.intl.formatMessage({ id: \"IDS_ADDGROUP\" }),\r\n          addRuleLabel: this.props.intl.formatMessage({ id: \"IDS_ADDRULE\" }),\r\n          addSubRuleLabel: this.props.intl.formatMessage({ id: \"IDS_ADDSUBRULE\" }),\r\n          //delGroupLabel: this.props.intl.formatMessage({id: \"\" }),\r\n          valueSourcesPopupTitle: this.props.intl.formatMessage({ id: \"IDS_SELECTVALUESOURCE\" }),\r\n          funcLabel: this.props.intl.formatMessage({ id: \"IDS_FUNCTION\" }),\r\n          valueSourcesInfo: {\r\n            field: { label: this.props.intl.formatMessage({ id: \"IDS_FIELD\" }), widget: 'field' },\r\n            func: { label: this.props.intl.formatMessage({ id: \"IDS_FUNCTION\" }), widget: 'func' },\r\n            value: { label: this.props.intl.formatMessage({ id: \"IDS_VALUE\" }) }\r\n          },\r\n          removeRuleConfirmOptions: {\r\n            title: this.props.intl.formatMessage({ id: \"IDS_AREYOUSUREDELETETHISRULE\" }),\r\n            okText: this.props.intl.formatMessage({ id: \"IDS_YES\" }),\r\n            okType: \"danger\",\r\n          },\r\n          removeGroupConfirmOptions: {\r\n            title: this.props.intl.formatMessage({ id: \"IDS_AREYOUSUREDELETETHISGROUP\" }),\r\n            okText: this.props.intl.formatMessage({ id: \"IDS_YES\" }),\r\n            okType: \"danger\",\r\n          }\r\n\r\n\r\n        }, conjunctions: {\r\n          AND: { ...config['conjunctions']['AND'], label: this.props.intl.formatMessage({ id: \"IDS_AND\" }) },\r\n          OR: { ...config['conjunctions']['OR'], label: this.props.intl.formatMessage({ id: \"IDS_OR\" }) }\r\n        },\r\n        //  operators: { ...Object.keys(config.operators).map(x =>) }\r\n        fields: this.props.fields//,settings:{...config.settings,notLabel:this.props.intl.formatMessage({id: \"NOT\"})}\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  render = () => (\r\n\r\n    <React.Fragment>\r\n      {!this.props.static ?\r\n        <Button className=\"btn-user btn-primary-blue\" style={{ \"margin-left\": '900px' }} onClick={() => this.props.handleExecuteClick()}>\r\n          <FontAwesomeIcon icon={faCalculator} /> { }\r\n          <FormattedMessage id='IDS_EXECUTE' defaultMessage='Execute' />\r\n        </Button>\r\n        : \"\"}\r\n      <Query\r\n        {...(this.props.config || this.state.config)}\r\n        value={this.props.tree || this.state.tree}\r\n        onChange={this.props.onChange}\r\n        renderBuilder={this.renderBuilder}\r\n\r\n      />\r\n\r\n      {!this.props.static ?\r\n        <hr /> : \"\"}\r\n      {!this.props.static ?\r\n        <LocalizationProvider language={this.props.userInfo.slanguagetypecode}>\r\n          <Grid\r\n            style={{\r\n              maxHeight: \"400px\",\r\n            }}\r\n            onRowClick={this.props.onRowClick}\r\n            data={this.props.filterData.slice(this.props.skip, this.props.skip + this.props.take)}\r\n          >\r\n            {this.props.gridColumns.map(x => {\r\n\r\n              return <GridColumn field={x.field} title={x.title} width={x.width} />\r\n\r\n            })}\r\n\r\n            {/* <GridColumn field=\"UnitPrice\" title=\"Price\" />\r\n              <GridColumn field=\"Discontinued\" title=\"Discontinued\" /> */}\r\n          </Grid>\r\n        </LocalizationProvider>\r\n        : \"\"}\r\n      {!this.props.static ?\r\n        <hr />\r\n        : \"\"}\r\n      {!this.props.static ?\r\n        <LocalizationProvider language={this.props.userInfo.slanguagetypecode}>\r\n          <Pager\r\n            skip={this.props.skip}\r\n            take={this.props.take}\r\n            type=\"input\"\r\n            previousNext={true}\r\n            total={this.props.filterData.length}\r\n            onPageChange={this.props.handlePageChange}\r\n          />\r\n        </LocalizationProvider>\r\n        : \"\"}\r\n      {/* {this.props.slideResult && this.props.slideResult.length>0?\r\n      // <AddFilteredPatient\r\n      //           slideList={this.props.slideList}\r\n      //           slideResult={this.props.slideResult}\r\n      //           controlMap={this.props.controlMap}\r\n      //           dataState={this.props.dataState}\r\n      //           dataStateChange={this.props.dataStateChange}\r\n      //         />\r\n\r\n    :\"\"} */}\r\n    </React.Fragment>\r\n\r\n  );\r\n\r\n  renderBuilder = (props) => (\r\n    <div className=\"query-builder-wrap kendo-theme\">\r\n        <Builder {...props}\r\n        />\r\n    </div>\r\n  );\r\n  // onChange = (immutableTree, config) => {\r\n  //   this.setState({ tree: immutableTree, config: config });\r\n\r\n  //   const jsonTree = QbUtils.getTree(immutableTree);\r\n  //   console.log(jsonTree);\r\n  // };\r\n}\r\nexport default injectIntl(FilterQueryBuilder);\r\n"]},"metadata":{},"sourceType":"module"}