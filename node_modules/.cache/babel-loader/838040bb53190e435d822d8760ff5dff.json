{"ast":null,"code":"import rsapi from '../rsapi';\nimport { DEFAULT_RETURN } from './LoginTypes'; //import {getComboLabelValue, constructOptionList} from '../components/CommonScript'\n\nimport { sortData, getComboLabelValue, constructOptionList, formatInputDate, rearrangeDateFormat, formatDate } from '../components/CommonScript';\nimport { toast } from 'react-toastify';\nimport Axios from 'axios';\nimport { initRequest } from './LoginAction'; //import { intl } from '../components/App';\n\nexport function getMethodDetail(method, userInfo, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"method/getMethod\", {\n      nmethodcode: method.nmethodcode,\n      userinfo: userInfo\n    }).then(response => {\n      masterData = { ...masterData,\n        ...response.data\n      };\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          operation: null,\n          modalName: undefined,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n} //export function getMethodComboService (screenName, primaryKeyName, primaryKeyValue, operation, inputParam , userInfo, ncontrolCode) {            \n\nexport function getMethodComboService(methodParam) {\n  return function (dispatch) {\n    const methodCategoryService = rsapi.post(\"methodcategory/getMethodCategory\", {\n      userinfo: methodParam.userInfo\n    });\n    let urlArray = [];\n    let selectedId = null;\n\n    if (methodParam.operation === \"create\") {\n      urlArray = [methodCategoryService];\n    } else {\n      // const url = methodParam.inputParam.classUrl+ \"/getActive\" + methodParam.inputParam.methodUrl + \"ById\";   //\"method/getActiveMethodById\"      \n      const url = \"method/getActiveMethodById\"; //\"method/getActiveMethodById\"      \n\n      const methodById = rsapi.post(url, {\n        [methodParam.primaryKeyName]: methodParam.masterData.SelectedMethod[methodParam.primaryKeyName],\n        \"userinfo\": methodParam.userInfo\n      });\n      urlArray = [methodCategoryService, methodById];\n      selectedId = methodParam.primaryKeyValue;\n    }\n\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = {};\n      const methodCatMap = constructOptionList(response[0].data || [], \"nmethodcatcode\", \"smethodcatname\", undefined, undefined, true);\n      const methodCategoryList = methodCatMap.get(\"OptionList\");\n\n      if (methodParam.operation === \"update\") {\n        selectedRecord = response[1].data;\n        selectedRecord[\"nmethodcatcode\"] = getComboLabelValue(selectedRecord, response[0].data, \"nmethodcatcode\", \"smethodcatname\");\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          methodCategoryList,\n          //:response[0].data || [],                               \n          operation: methodParam.operation,\n          screenName: methodParam.screenName,\n          selectedRecord,\n          openModal: true,\n          ncontrolCode: methodParam.ncontrolcode,\n          loading: false,\n          selectedId\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport const getAvailableValidityData = (methodItem, url, key, screenName, userInfo, ncontrolCode) => {\n  return dispatch => {\n    const inputParam = {\n      \"userinfo\": userInfo\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"method/\" + url, inputParam).then(response => {\n      const availableDataMap = constructOptionList(response.data, key === \"methodvalidity\" ? \"nmethodvaliditycode\" : key === \"method\" ? \"nmethodcode\" : key == \"instrumentcategory\" ? \"ninstrumentcatcode\" : key == \"package\" ? \"ntestpackagecode\" : \"ncontainertypecode\", key === \"section\" ? \"ssectionname\" : key === \"method\" ? \"smethodname\" : key == \"instrumentcategory\" ? \"sinstrumentcatname\" : key == \"package\" ? \"stestpackagename\" : \"scontainertype\", false, false, true);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: false,\n          // otherTestData: {\n          //     [key]: availableDataMap.get(\"OptionList\")\n          // },\n          screenName: screenName,\n          selectedRecord: {\n            availableData: \"\"\n          },\n          operation: \"create\",\n          ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 417) {\n        toast.info(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport function fetchMethodValidityById(editParam) {\n  return function (dispatch) {\n    const URL3 = rsapi.post(\"/method/getActiveMethodValidityById\", {\n      [editParam.primaryKeyName]: editParam.editRow.nmethodvaliditycode,\n      \"userinfo\": editParam.userInfo\n    });\n    dispatch(initRequest(true));\n    Axios.all([URL3]).then(response => {\n      let selectedRecord = {};\n      let selectedId = editParam.editRow.nmethodvaliditycode;\n      selectedRecord = response[0].data.body.MethodValidity[0];\n\n      if (selectedRecord[\"svaliditystartdate\"] !== \"\") {\n        selectedRecord[\"dvaliditystartdate\"] = rearrangeDateFormat(editParam.userInfo, selectedRecord[\"svaliditystartdate\"]); //new Date(response[7].data[\"smanufacdate\"]);\n      }\n\n      if (selectedRecord[\"svalidityenddate\"] !== \"\") {\n        selectedRecord[\"dvalidityenddate\"] = rearrangeDateFormat(editParam.userInfo, selectedRecord[\"svalidityenddate\"]); //new Date(response[7].data[\"spodate\"]);\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedRecord,\n          operation: editParam.operation,\n          openChildModal: true,\n          screenName: editParam.screenName,\n          ncontrolcode: editParam.ncontrolCode,\n          loading: false,\n          selectedId\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/MethodAction.js"],"names":["rsapi","DEFAULT_RETURN","sortData","getComboLabelValue","constructOptionList","formatInputDate","rearrangeDateFormat","formatDate","toast","Axios","initRequest","getMethodDetail","method","userInfo","masterData","dispatch","post","nmethodcode","userinfo","then","response","data","type","payload","operation","modalName","undefined","loading","catch","error","status","message","warn","getMethodComboService","methodParam","methodCategoryService","urlArray","selectedId","url","methodById","primaryKeyName","SelectedMethod","primaryKeyValue","all","selectedRecord","methodCatMap","methodCategoryList","get","screenName","openModal","ncontrolCode","ncontrolcode","getAvailableValidityData","methodItem","key","inputParam","availableDataMap","openChildModal","showSaveContinue","availableData","info","fetchMethodValidityById","editParam","URL3","editRow","nmethodvaliditycode","body","MethodValidity"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport {DEFAULT_RETURN} from './LoginTypes';\r\n//import {getComboLabelValue, constructOptionList} from '../components/CommonScript'\r\nimport {sortData, getComboLabelValue, constructOptionList,formatInputDate, rearrangeDateFormat, formatDate} from '../components/CommonScript';\r\nimport { toast } from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport { initRequest } from './LoginAction';\r\n//import { intl } from '../components/App';\r\n\r\nexport function getMethodDetail (method, userInfo, masterData) {\r\n    return function (dispatch) {   \r\n    dispatch(initRequest(true));\r\n    return rsapi.post(\"method/getMethod\", {nmethodcode:method.nmethodcode, userinfo:userInfo})\r\n   .then(response=>{     \r\n        masterData = {...masterData, ...response.data};       \r\n        sortData(masterData);\r\n        dispatch({type: DEFAULT_RETURN, payload:{masterData, operation:null, modalName:undefined, \r\n             loading:false}});   \r\n   })\r\n   .catch(error=>{\r\n        dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n       if (error.response.status === 500){\r\n           toast.error(error.message);\r\n       } \r\n       else{               \r\n           toast.warn(error.response.data);\r\n       }  \r\n  \r\n   })\r\n}\r\n}\r\n\r\n//export function getMethodComboService (screenName, primaryKeyName, primaryKeyValue, operation, inputParam , userInfo, ncontrolCode) {            \r\nexport function getMethodComboService (methodParam) {            \r\n    return function (dispatch) {   \r\n    const methodCategoryService = rsapi.post(\"methodcategory/getMethodCategory\", \r\n                                    {userinfo:methodParam.userInfo});\r\n    let urlArray = [];\r\n    let selectedId = null;\r\n    if (methodParam.operation === \"create\"){\r\n        urlArray = [methodCategoryService];\r\n    }\r\n    else{           \r\n       // const url = methodParam.inputParam.classUrl+ \"/getActive\" + methodParam.inputParam.methodUrl + \"ById\";   //\"method/getActiveMethodById\"      \r\n       const url = \"method/getActiveMethodById\";   //\"method/getActiveMethodById\"      \r\n        const methodById =  rsapi.post(url, { [methodParam.primaryKeyName] :methodParam.masterData.SelectedMethod[methodParam.primaryKeyName], \"userinfo\": methodParam.userInfo} );\r\n        urlArray = [methodCategoryService, methodById];\r\n        selectedId = methodParam.primaryKeyValue;\r\n    }\r\n    dispatch(initRequest(true));\r\n    Axios.all(urlArray)\r\n        .then(response=>{                  \r\n            \r\n            let selectedRecord =  {};\r\n\r\n            const methodCatMap = constructOptionList(response[0].data || [], \"nmethodcatcode\",\r\n                                \"smethodcatname\", undefined, undefined, true);\r\n            const methodCategoryList = methodCatMap.get(\"OptionList\");\r\n            \r\n            if (methodParam.operation === \"update\"){\r\n                selectedRecord = response[1].data;\r\n                selectedRecord[\"nmethodcatcode\"] = getComboLabelValue(selectedRecord, response[0].data, \r\n                    \"nmethodcatcode\", \"smethodcatname\");                   \r\n            }\r\n           \r\n            dispatch({type: DEFAULT_RETURN, payload:{methodCategoryList,//:response[0].data || [],                               \r\n                        operation:methodParam.operation, screenName:methodParam.screenName, selectedRecord, \r\n                        openModal : true,\r\n                        ncontrolCode:methodParam.ncontrolcode,\r\n                        loading:false,selectedId\r\n                    }});\r\n        })\r\n        .catch(error=>{\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500){\r\n                toast.error(error.message);\r\n            } \r\n            else{               \r\n                toast.warn(error.response.data);\r\n            }  \r\n        })        \r\n    }\r\n}\r\n\r\nexport const getAvailableValidityData = (methodItem, url, key, screenName, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        const inputParam = {\r\n            \"userinfo\": userInfo\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"method/\" + url, inputParam)\r\n            .then(response => {\r\n                const availableDataMap = constructOptionList(response.data, key === \"methodvalidity\" ? \"nmethodvaliditycode\" : key === \"method\" ? \"nmethodcode\" : key == \"instrumentcategory\" ?\"ninstrumentcatcode\" : key == \"package\" ?\"ntestpackagecode\" : \"ncontainertypecode\",\r\n                    key === \"section\" ? \"ssectionname\" : key === \"method\" ? \"smethodname\" :  key == \"instrumentcategory\" ? \"sinstrumentcatname\"  :  key == \"package\" ? \"stestpackagename\" : \"scontainertype\", false, false, true);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: false,\r\n                        // otherTestData: {\r\n                        //     [key]: availableDataMap.get(\"OptionList\")\r\n                        // },\r\n                        screenName: screenName,\r\n                        selectedRecord: {\r\n                            availableData: \"\"\r\n                        },\r\n                        operation: \"create\",\r\n                        ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 417) {\r\n                    toast.info(error.response.data)\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\nexport function fetchMethodValidityById (editParam){  \r\n    return function(dispatch){\r\n        \r\n        const URL3=rsapi.post(\"/method/getActiveMethodValidityById\", { [editParam.primaryKeyName] :editParam.editRow.nmethodvaliditycode , \"userinfo\": editParam.userInfo} )\r\n        dispatch(initRequest(true));\r\n        Axios.all([URL3])\r\n        .then(response=> { \r\n            let selectedRecord={}\r\n            let selectedId = editParam.editRow.nmethodvaliditycode;\r\n            selectedRecord=response[0].data.body.MethodValidity[0];\r\n\r\n            if (selectedRecord[\"svaliditystartdate\"] !== \"\") {\r\n\r\n                selectedRecord[\"dvaliditystartdate\"] = rearrangeDateFormat(editParam.userInfo, selectedRecord[\"svaliditystartdate\"]); //new Date(response[7].data[\"smanufacdate\"]);\r\n            }\r\n\r\n            if (selectedRecord[\"svalidityenddate\"] !== \"\") {\r\n                selectedRecord[\"dvalidityenddate\"] = rearrangeDateFormat(editParam.userInfo, selectedRecord[\"svalidityenddate\"]); //new Date(response[7].data[\"spodate\"]);\r\n            }\r\n            \r\n            dispatch({\r\n                type: DEFAULT_RETURN, payload:{\r\n                selectedRecord ,\r\n                operation:editParam.operation,\r\n                openChildModal: true,\r\n                screenName:editParam.screenName,\r\n                ncontrolcode:editParam.ncontrolCode,\r\n                loading:false,selectedId\r\n            }\r\n            }); \r\n            \r\n        })\r\n        .catch(error => {\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500){\r\n                toast.error(error.message);\r\n            } \r\n            else{               \r\n                toast.warn(error.response.data);\r\n            }         \r\n        })\r\n    }\r\n }"]},"metadata":{},"sourceType":"module"}