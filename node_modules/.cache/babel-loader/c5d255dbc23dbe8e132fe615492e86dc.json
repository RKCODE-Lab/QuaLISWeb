{"ast":null,"code":"import { AllSelection } from '@progress/kendo-editor-common';\nimport { EditorUtils } from './index';\n\nvar setValue = function (view, value) {\n  var transaction = value.tr || view.state.tr.setSelection(new AllSelection(view.state.doc)).replaceSelectionWith(value.doc || EditorUtils.createDocument(view.state.schema, value.html || '')).setMeta('commandName', 'setHTML');\n  view.updateState(view.state.apply(transaction));\n};\n/**\n * @hidden\n */\n\n\nexport var updateEditorValue = function (view, value, prevValue, trOnChange, htmlOnChange) {\n  if (typeof value === 'string') {\n    if (trOnChange && value === htmlOnChange) {\n      setValue(view, {\n        tr: trOnChange\n      });\n    } else if (value !== prevValue) {\n      setValue(view, {\n        html: value\n      });\n    }\n  } else {\n    if (trOnChange && value.eq(trOnChange.doc)) {\n      setValue(view, {\n        tr: trOnChange\n      });\n    } else if (!view.state.doc.eq(value)) {\n      setValue(view, {\n        doc: value\n      });\n    }\n  }\n};","map":{"version":3,"sources":["../../../src/utils/controlled-value.ts"],"names":[],"mappings":"AAAA,SAAsB,YAAtB,QAA4D,+BAA5D;AACA,SAAS,WAAT,QAA4B,SAA5B;;AAEA,IAAM,QAAQ,GAAG,UAAC,IAAD,EAAmB,KAAnB,EAAyE;AACtF,MAAM,WAAW,GAAG,KAAK,CAAC,EAAN,IACf,IAAI,CAAC,KAAL,CAAW,EAAX,CACI,YADJ,CACiB,IAAI,YAAJ,CAAiB,IAAI,CAAC,KAAL,CAAW,GAA5B,CADjB,EAEI,oBAFJ,CAEyB,KAAK,CAAC,GAAN,IAAa,WAAW,CAAC,cAAZ,CAA2B,IAAI,CAAC,KAAL,CAAW,MAAtC,EAA8C,KAAK,CAAC,IAAN,IAAc,EAA5D,CAFtC,EAGI,OAHJ,CAGY,aAHZ,EAG2B,SAH3B,CADL;AAMA,EAAA,IAAI,CAAC,WAAL,CAAiB,IAAI,CAAC,KAAL,CAAW,KAAX,CAAiB,WAAjB,CAAjB;AACH,CARD;AAUA;;AAEG;;;AACH,OAAO,IAAM,iBAAiB,GAAG,UAAC,IAAD,EACC,KADD,EAEC,SAFD,EAGC,UAHD,EAIC,YAJD,EAI4B;AACzD,MAAI,OAAO,KAAP,KAAiB,QAArB,EAA+B;AAC3B,QAAI,UAAU,IAAI,KAAK,KAAK,YAA5B,EAA0C;AACtC,MAAA,QAAQ,CAAC,IAAD,EAAO;AAAE,QAAA,EAAE,EAAE;AAAN,OAAP,CAAR;AACH,KAFD,MAEO,IAAI,KAAK,KAAK,SAAd,EAAyB;AAC5B,MAAA,QAAQ,CAAC,IAAD,EAAO;AAAE,QAAA,IAAI,EAAE;AAAR,OAAP,CAAR;AACH;AACJ,GAND,MAMO;AACH,QAAI,UAAU,IAAI,KAAK,CAAC,EAAN,CAAS,UAAU,CAAC,GAApB,CAAlB,EAA4C;AACxC,MAAA,QAAQ,CAAC,IAAD,EAAO;AAAE,QAAA,EAAE,EAAE;AAAN,OAAP,CAAR;AACH,KAFD,MAEO,IAAI,CAAC,IAAI,CAAC,KAAL,CAAW,GAAX,CAAe,EAAf,CAAkB,KAAlB,CAAL,EAA+B;AAClC,MAAA,QAAQ,CAAC,IAAD,EAAO;AAAE,QAAA,GAAG,EAAE;AAAP,OAAP,CAAR;AACH;AACJ;AACJ,CAlBM","sourceRoot":"","sourcesContent":["import { AllSelection } from '@progress/kendo-editor-common';\nimport { EditorUtils } from './index';\nvar setValue = function (view, value) {\n    var transaction = value.tr ||\n        (view.state.tr\n            .setSelection(new AllSelection(view.state.doc))\n            .replaceSelectionWith(value.doc || EditorUtils.createDocument(view.state.schema, value.html || ''))\n            .setMeta('commandName', 'setHTML'));\n    view.updateState(view.state.apply(transaction));\n};\n/**\n * @hidden\n */\nexport var updateEditorValue = function (view, value, prevValue, trOnChange, htmlOnChange) {\n    if (typeof value === 'string') {\n        if (trOnChange && value === htmlOnChange) {\n            setValue(view, { tr: trOnChange });\n        }\n        else if (value !== prevValue) {\n            setValue(view, { html: value });\n        }\n    }\n    else {\n        if (trOnChange && value.eq(trOnChange.doc)) {\n            setValue(view, { tr: trOnChange });\n        }\n        else if (!view.state.doc.eq(value)) {\n            setValue(view, { doc: value });\n        }\n    }\n};\n//# sourceMappingURL=controlled-value.js.map"]},"metadata":{},"sourceType":"module"}