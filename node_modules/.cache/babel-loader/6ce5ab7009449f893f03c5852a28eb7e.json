{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{create_UUID,Lims_JSON_stringify}from\"../../../components/CommonScript\";import{attachmentType,transactionStatus}from\"../../../components/Enumeration\";export function onSaveSampleAttachment(saveParam,selectedMaster){var formData=new FormData();var selectedRecord=saveParam.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var fileArray=[];var samindex={index:0};if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];// const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \n//         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\nselectedMaster.forEach(function(sample,sampleindex){var fileName=selectedRecord.nregattachmentcode&&selectedRecord.nregattachmentcode>0&&selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;var tempData={};tempData['nregattachmentcode']=selectedRecord.nregattachmentcode?selectedRecord.nregattachmentcode:0;tempData[\"npreregno\"]=sample.npreregno;tempData['nformcode']=saveParam.userInfo.nformcode;tempData['nusercode']=saveParam.userInfo.nusercode;tempData['nuserrolecode']=saveParam.userInfo.nuserrole;tempData[\"nlinkcode\"]=transactionStatus.NA;// tempData[\"nfilesize\"] = file.size;\ntempData['jsondata']={susername:saveParam.userInfo.susername,suserrolename:saveParam.userInfo.suserrolename,ssystemfilename:uniquefilename,sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:file.size,sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),slinkname:\"\"};tempData['nattachmenttypecode']=nattachmenttypecode;// tempData[\"ssystemfilename\"] = uniquefilename;\n// tempData[\"sfilename\"] = file.name.trim();\n// tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\ntempData['nstatus']=transactionStatus.ACTIVE;formData.append(\"uploadedFile\"+samindex[\"index\"],file);formData.append(\"uniquefilename\"+samindex[\"index\"],uniquefilename);fileArray.push(tempData);samindex[\"index\"]=samindex[\"index\"]+1;});});formData.append(\"filecount\",acceptedFiles.length*selectedMaster.length);isFileEdited=transactionStatus.YES;}else{selectedMaster.forEach(function(sample){var sampleFile={};sampleFile['nregattachmentcode']=selectedRecord.nregattachmentcode?selectedRecord.nregattachmentcode:0;sampleFile[\"npreregno\"]=sample.npreregno;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=transactionStatus.NA;// sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\nsampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile['jsondata']={susername:saveParam.userInfo.susername,suserrolename:saveParam.userInfo.suserrolename,ssystemfilename:selectedRecord.ssystemfilename,sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:selectedRecord.nfilesize,sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),slinkname:\"\"};sampleFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;sampleFile[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false);// sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\nsampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}}else{selectedMaster.forEach(function(sample){var sampleFile={};sampleFile['nregattachmentcode']=selectedRecord.nregattachmentcode?selectedRecord.nregattachmentcode:0;sampleFile[\"npreregno\"]=sample.npreregno;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;sampleFile['jsondata']={susername:saveParam.userInfo.susername,suserrolename:saveParam.userInfo.suserrolename,ssystemfilename:\"\",sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:0,slinkname:selectedRecord.nlinkcode.label,sdescription:Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};sampleFile['nattachmenttypecode']=nattachmenttypecode;// sampleFile[\"ssystemfilename\"] = \"\";\nsampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}formData.append(\"ncontrolCode\",saveParam.ncontrolCode);formData.append(\"isFileEdited\",isFileEdited);formData.append(\"sampleattachment\",JSON.stringify(fileArray));//ALPD-1728\n//formData.append(\"sampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\nformData.append(\"nattachmenttypecode\",nattachmenttypecode);formData.append(\"npreregno\",saveParam.npreregno);//formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\nformData.append(\"userinfo\",JSON.stringify(_objectSpread(_objectSpread({},saveParam.userInfo),{},{sformname:Lims_JSON_stringify(saveParam.userInfo.sformname),smodulename:Lims_JSON_stringify(saveParam.userInfo.smodulename),slanguagename:Lims_JSON_stringify(saveParam.userInfo.slanguagename)})));var inputParam={// inputData: { userinfo: saveParam.userInfo },\ninputData:{// userinfo: saveParam.userInfo },\n\"userinfo\":_objectSpread(_objectSpread({},saveParam.userInfo),{},{sformname:Lims_JSON_stringify(saveParam.userInfo.sformname),smodulename:Lims_JSON_stringify(saveParam.userInfo.smodulename),slanguagename:Lims_JSON_stringify(saveParam.userInfo.slanguagename)})},formData:formData,isFileupload:true,operation:saveParam.operation,classUrl:\"attachment\",saveType:saveParam.saveType,formRef:saveParam.formRef,methodUrl:\"SampleAttachment\"};return inputParam;}export function onSaveTestAttachment(saveParam,selectedMaster){var formData=new FormData();var selectedRecord=saveParam.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var fileArray=[];var testindex1={index:0};if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){if(saveParam.operation==='create'){acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];selectedMaster.forEach(function(test,testindex){var fileName=selectedRecord.nregattachmentcode&&selectedRecord.nregattachmentcode>0&&selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;var tempData={};tempData['ntestattachmentcode']=selectedRecord.ntestattachmentcode?selectedRecord.ntestattachmentcode:0;tempData[\"ntransactiontestcode\"]=test.ntransactiontestcode;tempData[\"ntransactionsamplecode\"]=test.ntransactionsamplecode;tempData[\"npreregno\"]=test.npreregno;tempData['nformcode']=saveParam.userInfo.nformcode;tempData['nusercode']=saveParam.userInfo.nusercode;tempData['nuserrolecode']=saveParam.userInfo.nuserrole;tempData[\"nlinkcode\"]=transactionStatus.NA;tempData['nattachmenttypecode']=nattachmenttypecode;tempData['jsondata']={stestsynonym:Lims_JSON_stringify(test.stestsynonym.trim(),false),susername:saveParam.userInfo.susername,suserrolename:saveParam.userInfo.suserrolename,nfilesize:file.size,ssystemfilename:uniquefilename,sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),slinkname:\"\",sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:selectedRecord.nneedreport?selectedRecord.nneedreport:transactionStatus.NO};// tempData[\"nfilesize\"] = file.size; :\n// tempData[\"ssystemfilename\"] = uniquefilename;\n// tempData[\"sfilename\"] = file.name.trim();\n// tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\ntempData['nstatus']=transactionStatus.ACTIVE;formData.append(\"uploadedFile\"+testindex1[\"index\"],file);formData.append(\"uniquefilename\"+testindex1[\"index\"],uniquefilename);fileArray.push(tempData);testindex1[\"index\"]=testindex1[\"index\"]+1;});});formData.append(\"filecount\",acceptedFiles.length*selectedMaster.length);isFileEdited=transactionStatus.YES;}else{acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];selectedMaster.forEach(function(test,testindex){var fileName=selectedRecord.nregattachmentcode&&selectedRecord.nregattachmentcode>0&&selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;var tempData={};tempData['ntestattachmentcode']=selectedRecord.ntestattachmentcode?selectedRecord.ntestattachmentcode:0;tempData[\"ntransactiontestcode\"]=selectedRecord.ntransactiontestcode;tempData[\"ntransactionsamplecode\"]=selectedRecord.ntransactionsamplecode;tempData[\"npreregno\"]=selectedRecord.npreregno;tempData['nformcode']=saveParam.userInfo.nformcode;tempData['nusercode']=saveParam.userInfo.nusercode;tempData['nuserrolecode']=saveParam.userInfo.nuserrole;tempData[\"nlinkcode\"]=transactionStatus.NA;tempData['nattachmenttypecode']=nattachmenttypecode;tempData['jsondata']={stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),susername:saveParam.userInfo.susername,suserrolename:saveParam.userInfo.suserrolename,nfilesize:file.size,ssystemfilename:uniquefilename,sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),slinkname:\"\",sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:selectedRecord.nneedreport?selectedRecord.nneedreport:transactionStatus.NO};// tempData[\"nfilesize\"] = file.size;\n// tempData[\"ssystemfilename\"] = uniquefilename;\n// tempData[\"sfilename\"] = file.name.trim();\n// tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\ntempData['nstatus']=transactionStatus.ACTIVE;formData.append(\"uploadedFile\"+testindex1[\"index\"],file);formData.append(\"uniquefilename\"+testindex1[\"index\"],uniquefilename);fileArray.push(tempData);testindex1[\"index\"]=testindex1[\"index\"]+1;});});formData.append(\"filecount\",acceptedFiles.length*selectedMaster.length);isFileEdited=transactionStatus.YES;}}else{selectedMaster.forEach(function(test){var sampleFile={};sampleFile['ntestattachmentcode']=selectedRecord.ntestattachmentcode?selectedRecord.ntestattachmentcode:0;sampleFile[\"ntransactiontestcode\"]=selectedRecord.ntransactiontestcode;sampleFile[\"ntransactionsamplecode\"]=selectedRecord.ntransactionsamplecode;sampleFile[\"npreregno\"]=selectedRecord.npreregno;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=transactionStatus.NA;// sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\nsampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile['jsondata']={stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),susername:saveParam.userInfo.susername,suserrolename:saveParam.userInfo.suserrolename,nfilesize:selectedRecord.size,ssystemfilename:selectedRecord.ssystemfilename,sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),slinkname:\"\",sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:selectedRecord.nneedreport?selectedRecord.nneedreport:transactionStatus.NO};// sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\n// sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\n// sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\nsampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}}else{if(saveParam.operation==='create'){selectedMaster.forEach(function(test){var sampleFile={};sampleFile['ntestattachmentcode']=selectedRecord.ntestattachmentcode?selectedRecord.ntestattachmentcode:0;sampleFile[\"ntransactiontestcode\"]=test.ntransactiontestcode;sampleFile[\"ntransactionsamplecode\"]=test.ntransactionsamplecode;sampleFile[\"npreregno\"]=test.npreregno;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;sampleFile[\"jsondata\"]={stestsynonym:Lims_JSON_stringify(test.stestsynonym.trim(),false),susername:saveParam.userInfo.susername,suserrolename:saveParam.userInfo.suserrolename,ssystemfilename:\"\",sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:0,slinkname:selectedRecord.nlinkcode.label,sdescription:Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:transactionStatus.NO};sampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}else{selectedMaster.forEach(function(test){var sampleFile={};sampleFile['ntestattachmentcode']=selectedRecord.ntestattachmentcode?selectedRecord.ntestattachmentcode:0;sampleFile[\"ntransactiontestcode\"]=selectedRecord.ntransactiontestcode;sampleFile[\"ntransactionsamplecode\"]=selectedRecord.ntransactionsamplecode;sampleFile[\"npreregno\"]=selectedRecord.npreregno;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;sampleFile[\"jsondata\"]={stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),susername:saveParam.userInfo.susername,suserrolename:saveParam.userInfo.suserrolename,ssystemfilename:\"\",sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:0,slinkname:selectedRecord.nlinkcode.label,sdescription:Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),nneedreport:transactionStatus.NO};sampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"testattachment\",JSON.stringify(fileArray));//ALPD-1728\n// formData.append(\"testattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\nformData.append(\"nattachmenttypecode\",nattachmenttypecode);formData.append(\"ntransactiontestcode\",saveParam.ntransactiontestcode);// formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\nvar inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},saveParam.userInfo),{},{sformname:Lims_JSON_stringify(saveParam.userInfo.sformname),smodulename:Lims_JSON_stringify(saveParam.userInfo.smodulename),slanguagename:Lims_JSON_stringify(saveParam.userInfo.slanguagename)})},formData:formData,isFileupload:true,operation:saveParam.operation,classUrl:\"attachment\",saveType:saveParam.saveType,formRef:saveParam.formRef,methodUrl:\"TestAttachment\"};return inputParam;}export function onSaveBatchAttachment(saveParam,selectedMaster){var formData=new FormData();var selectedRecord=saveParam.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var fileArray=[];var nreleasebatchcode=selectedMaster.nreleasebatchcode;if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var fileName=selectedRecord.nbatchfilecode&&selectedRecord.nbatchfilecode>0&&selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;//selectedMaster.forEach(sample=>{\nvar tempData={};tempData['nbatchfilecode']=selectedRecord.nbatchfilecode?selectedRecord.nbatchfilecode:0;tempData[\"nreleasebatchcode\"]=selectedMaster.nreleasebatchcode;tempData[\"nlinkcode\"]=transactionStatus.NA;tempData['nattachmenttypecode']=nattachmenttypecode;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"sfilename\"]=Lims_JSON_stringify(file.name.trim(),false);tempData[\"sdescription\"]=Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.trim().replaceAll('\\\\n','#r#'):\"\",false);tempData['nstatus']=transactionStatus.ACTIVE;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);fileArray.push(tempData);//nreleasebatchcode.push(selectedMaster.releasebatchcode)\n//})\n});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{// selectedMaster.forEach(sample=>{\nvar sampleFile={};sampleFile['nbatchfilecode']=selectedRecord.nbatchfilecode?selectedRecord.nbatchfilecode:0;sampleFile[\"nreleasebatchcode\"]=selectedMaster.nreleasebatchcode;sampleFile[\"nlinkcode\"]=transactionStatus.NA;sampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;sampleFile[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.sfilename.trim(),false);sampleFile[\"sdescription\"]=Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.trim().replaceAll('\\\\n','#r#'):\"\",false);sampleFile['nstatus']=transactionStatus.ACTIVE;//npreregno.push(sample.npreregno)\nfileArray.push(sampleFile);// })\n}}else{//selectedMaster.forEach(sample=>{\nvar _sampleFile={};_sampleFile['nbatchfilecode']=selectedRecord.nbatchfilecode?selectedRecord.nbatchfilecode:0;_sampleFile[\"nreleasebatchcode\"]=selectedMaster.nreleasebatchcode;_sampleFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;_sampleFile['nattachmenttypecode']=nattachmenttypecode;_sampleFile[\"ssystemfilename\"]=\"\";_sampleFile[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.slinkfilename.trim(),false);_sampleFile[\"sdescription\"]=Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.trim():\"\",false);_sampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(_sampleFile);//npreregno.push(sample.npreregno)\n//})  \n}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"batchcreationfile\",JSON.stringify(fileArray));//ALPD-1728\n//formData.append(\"batchcreationfile\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\nformData.append(\"nattachmenttypecode\",nattachmenttypecode);formData.append(\"nreleasebatchcode\",nreleasebatchcode);formData.append(\"userinfo\",JSON.stringify(saveParam.userInfo));var inputParam={inputData:{userinfo:saveParam.userInfo},formData:formData,isFileupload:true,operation:saveParam.operation,classUrl:\"attachment\",saveType:saveParam.saveType,formRef:saveParam.formRef,methodUrl:\"BatchCreationFile\"};return inputParam;}export function onSaveSubSampleAttachment(saveParam,selectedMaster){var formData=new FormData();var selectedRecord=saveParam.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var fileArray=[];var samindex={index:0};if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];// const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \n//         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\nselectedMaster.forEach(function(sample,sampleindex){var fileName=selectedRecord.nsampleattachmentcode&&selectedRecord.nsampleattachmentcode>0&&selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==\"\"?selectedRecord.ssystemfilename.split('.')[0]:create_UUID();var uniquefilename=fileName+'.'+fileExtension;var tempData={};tempData['nsampleattachmentcode']=selectedRecord.nsampleattachmentcode?selectedRecord.nsampleattachmentcode:0;tempData[\"npreregno\"]=sample.npreregno;tempData[\"ntransactionsamplecode\"]=sample.ntransactionsamplecode;tempData['nformcode']=saveParam.userInfo.nformcode;tempData['nusercode']=saveParam.userInfo.nusercode;tempData['nuserrolecode']=saveParam.userInfo.nuserrole;tempData[\"nlinkcode\"]=transactionStatus.NA;// tempData[\"nfilesize\"] = file.size;\ntempData['jsondata']={susername:saveParam.userInfo.susername,suserrolename:saveParam.userInfo.suserrolename,ssystemfilename:uniquefilename,sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:file.size,sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),slinkname:\"\"};tempData['nattachmenttypecode']=nattachmenttypecode;// tempData[\"ssystemfilename\"] = uniquefilename;\n// tempData[\"sfilename\"] = file.name.trim();\n// tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\ntempData['nstatus']=transactionStatus.ACTIVE;formData.append(\"uploadedFile\"+samindex[\"index\"],file);formData.append(\"uniquefilename\"+samindex[\"index\"],uniquefilename);fileArray.push(tempData);samindex[\"index\"]=samindex[\"index\"]+1;});});formData.append(\"filecount\",acceptedFiles.length*selectedMaster.length);isFileEdited=transactionStatus.YES;}else{selectedMaster.forEach(function(sample){var sampleFile={};sampleFile['nsampleattachmentcode']=selectedRecord.nsampleattachmentcode?selectedRecord.nsampleattachmentcode:0;sampleFile[\"npreregno\"]=sample.npreregno;sampleFile[\"ntransactionsamplecode\"]=sample.ntransactionsamplecode;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=transactionStatus.NA;// sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\nsampleFile['nattachmenttypecode']=nattachmenttypecode;sampleFile['jsondata']={susername:saveParam.userInfo.susername,suserrolename:saveParam.userInfo.suserrolename,ssystemfilename:selectedRecord.ssystemfilename,sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:selectedRecord.nfilesize,sdescription:Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),slinkname:\"\"};sampleFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;//sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\n// sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\nsampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}}else{selectedMaster.forEach(function(sample){var sampleFile={};sampleFile['nsampleattachmentcode']=selectedRecord.nsampleattachmentcode?selectedRecord.nsampleattachmentcode:0;sampleFile[\"npreregno\"]=sample.npreregno;sampleFile[\"ntransactionsamplecode\"]=sample.ntransactionsamplecode;sampleFile['nformcode']=saveParam.userInfo.nformcode;sampleFile['nusercode']=saveParam.userInfo.nusercode;sampleFile['nuserrolecode']=saveParam.userInfo.nuserrole;sampleFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;sampleFile['jsondata']={susername:saveParam.userInfo.susername,suserrolename:saveParam.userInfo.suserrolename,ssystemfilename:\"\",sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),nfilesize:0,slinkname:selectedRecord.nlinkcode.label,sdescription:Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false)};sampleFile['nattachmenttypecode']=nattachmenttypecode;// sampleFile[\"ssystemfilename\"] = \"\";\nsampleFile['nstatus']=transactionStatus.ACTIVE;fileArray.push(sampleFile);});}formData.append(\"ncontrolCode\",saveParam.ncontrolCode);formData.append(\"isFileEdited\",isFileEdited);formData.append(\"subsampleattachment\",JSON.stringify(fileArray));//ALPD-1728\n//formData.append(\"subsampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\nformData.append(\"nattachmenttypecode\",nattachmenttypecode);formData.append(\"npreregno\",saveParam.npreregno);formData.append(\"ntransactionsamplecode\",saveParam.ntransactionsamplecode);//formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\nformData.append(\"userinfo\",JSON.stringify(_objectSpread(_objectSpread({},saveParam.userInfo),{},{sformname:Lims_JSON_stringify(saveParam.userInfo.sformname),smodulename:Lims_JSON_stringify(saveParam.userInfo.smodulename),slanguagename:Lims_JSON_stringify(saveParam.userInfo.slanguagename)})));var inputParam={inputData:{// userinfo: saveParam.userInfo },\n\"userinfo\":_objectSpread(_objectSpread({},saveParam.userInfo),{},{sformname:Lims_JSON_stringify(saveParam.userInfo.sformname),smodulename:Lims_JSON_stringify(saveParam.userInfo.smodulename),slanguagename:Lims_JSON_stringify(saveParam.userInfo.slanguagename)})},formData:formData,isFileupload:true,operation:saveParam.operation,classUrl:\"attachment\",saveType:saveParam.saveType,formRef:saveParam.formRef,methodUrl:\"SubSampleAttachment\"};return inputParam;}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/attachmentscomments/attachments/AttachmentFunctions.js"],"names":["create_UUID","Lims_JSON_stringify","attachmentType","transactionStatus","onSaveSampleAttachment","saveParam","selectedMaster","formData","FormData","selectedRecord","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","NO","fileArray","samindex","index","FTP","Array","isArray","length","forEach","file","splittedFileName","name","split","fileExtension","sample","sampleindex","fileName","nregattachmentcode","ssystemfilename","uniquefilename","tempData","npreregno","userInfo","nformcode","nusercode","nuserrole","NA","susername","suserrolename","replaceAll","trim","nfilesize","size","sdescription","slinkname","ACTIVE","append","push","YES","sampleFile","nlinkcode","value","slinkfilename","label","slinkdescription","ncontrolCode","JSON","stringify","sformname","smodulename","slanguagename","inputParam","inputData","isFileupload","operation","classUrl","saveType","formRef","methodUrl","onSaveTestAttachment","testindex1","test","testindex","ntestattachmentcode","ntransactiontestcode","ntransactionsamplecode","stestsynonym","nneedreport","onSaveBatchAttachment","nreleasebatchcode","nbatchfilecode","userinfo","onSaveSubSampleAttachment","nsampleattachmentcode"],"mappings":"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","sourcesContent":["import { create_UUID, Lims_JSON_stringify } from \"../../../components/CommonScript\";\r\nimport { attachmentType, transactionStatus } from \"../../../components/Enumeration\";\r\n\r\nexport function onSaveSampleAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let samindex = {\r\n        index: 0\r\n    };\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            acceptedFiles.forEach((file, index) => {\r\n\r\n                const splittedFileName = file.name.split('.');\r\n                const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                // const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \r\n                //         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\r\n\r\n\r\n                selectedMaster.forEach((sample, sampleindex) => {\r\n                    const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                    const uniquefilename = fileName + '.' + fileExtension;\r\n                    const tempData = {};\r\n                    tempData['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\r\n                    tempData[\"npreregno\"] = sample.npreregno;\r\n                    tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                    tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                    tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    // tempData[\"nfilesize\"] = file.size;\r\n                    tempData['jsondata'] = {\r\n                        susername: saveParam.userInfo.susername,\r\n                        suserrolename: saveParam.userInfo.suserrolename,\r\n                        ssystemfilename: uniquefilename,\r\n                        sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                        nfilesize: file.size,\r\n                        sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                        slinkname: \"\"\r\n                    }\r\n                    tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                    // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    // tempData[\"sfilename\"] = file.name.trim();\r\n                    // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                    tempData['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n\r\n\r\n                    formData.append(\"uploadedFile\" + samindex[\"index\"], file);\r\n                    formData.append(\"uniquefilename\" + samindex[\"index\"], uniquefilename);\r\n                    fileArray.push(tempData);\r\n                    samindex[\"index\"] = samindex[\"index\"] + 1;\r\n                })\r\n            });\r\n            formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n\r\n            isFileEdited = transactionStatus.YES;\r\n        } else {\r\n            selectedMaster.forEach(sample => {\r\n                let sampleFile = {};\r\n                sampleFile['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\r\n                sampleFile[\"npreregno\"] = sample.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['jsondata'] = {\r\n                    susername: saveParam.userInfo.susername,\r\n                    suserrolename: saveParam.userInfo.suserrolename,\r\n                    ssystemfilename: selectedRecord.ssystemfilename,\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: selectedRecord.nfilesize,\r\n                    sdescription:Lims_JSON_stringify( selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    slinkname: \"\"\r\n                }\r\n                sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                sampleFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ;\r\n                // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n    } else {\r\n        selectedMaster.forEach(sample => {\r\n            let sampleFile = {};\r\n            sampleFile['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\r\n            sampleFile[\"npreregno\"] = sample.npreregno;\r\n            sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n            sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n            sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n            sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            sampleFile['jsondata'] = {\r\n                susername: saveParam.userInfo.susername,\r\n                suserrolename: saveParam.userInfo.suserrolename,\r\n                ssystemfilename: \"\",\r\n                sfilename:Lims_JSON_stringify( selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),\r\n                nfilesize: 0,\r\n                slinkname: selectedRecord.nlinkcode.label,\r\n                sdescription:Lims_JSON_stringify(  selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(): \"\",false)\r\n            }\r\n            sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n            // sampleFile[\"ssystemfilename\"] = \"\";\r\n            sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n            fileArray.push(sampleFile);\r\n        })\r\n    }\r\n    formData.append(\"ncontrolCode\", saveParam.ncontrolCode);\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"sampleattachment\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n    //formData.append(\"sampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"npreregno\", saveParam.npreregno);\r\n    //formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n    formData.append(\"userinfo\", JSON.stringify({...saveParam.userInfo,\r\n                                                sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n                                                smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n                                                slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}));\r\n    const inputParam = {\r\n       // inputData: { userinfo: saveParam.userInfo },\r\n       inputData: {// userinfo: saveParam.userInfo },\r\n                    \"userinfo\": {...saveParam.userInfo,\r\n                    sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n                    smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n                    slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}},\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"SampleAttachment\"\r\n    }\r\n    return inputParam;\r\n}\r\n\r\nexport function onSaveTestAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let testindex1 = {\r\n        index: 0\r\n    };\r\n\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            if(saveParam.operation==='create'){\r\n                acceptedFiles.forEach((file, index) => {\r\n\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n    \r\n    \r\n                    selectedMaster.forEach((test, testindex) => {\r\n                        const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                        const uniquefilename = fileName + '.' + fileExtension;\r\n                        const tempData = {};\r\n                        tempData['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                        tempData[\"ntransactiontestcode\"] = test.ntransactiontestcode;\r\n                        tempData[\"ntransactionsamplecode\"] = test.ntransactionsamplecode;\r\n                        tempData[\"npreregno\"] = test.npreregno;\r\n                        tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                        tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                        tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                        tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                        tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                        tempData['jsondata'] = {\r\n                            stestsynonym:Lims_JSON_stringify(test.stestsynonym.trim(),false),\r\n                            susername: saveParam.userInfo.susername,\r\n                            suserrolename: saveParam.userInfo.suserrolename,\r\n                            nfilesize: file.size,\r\n                            ssystemfilename: uniquefilename,\r\n                            sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                            slinkname: \"\",                         \r\n                            sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                            nneedreport:selectedRecord.nneedreport ?  selectedRecord.nneedreport  : transactionStatus.NO\r\n                        }\r\n                        // tempData[\"nfilesize\"] = file.size; :\r\n                        // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                        // tempData[\"sfilename\"] = file.name.trim();\r\n                        // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                        tempData['nstatus'] = transactionStatus.ACTIVE;\r\n    \r\n    \r\n                        formData.append(\"uploadedFile\" + testindex1[\"index\"], file);\r\n                        formData.append(\"uniquefilename\" + testindex1[\"index\"], uniquefilename);\r\n                        fileArray.push(tempData);\r\n                        testindex1[\"index\"] = testindex1[\"index\"] + 1;\r\n                    })\r\n                });\r\n                formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n                isFileEdited = transactionStatus.YES;\r\n            }else {\r\n                acceptedFiles.forEach((file, index) => {\r\n\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n    \r\n    \r\n                    selectedMaster.forEach((test, testindex) => {\r\n                        const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                        const uniquefilename = fileName + '.' + fileExtension;\r\n                        const tempData = {};\r\n                        tempData['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                        tempData[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\r\n                        tempData[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\r\n                        tempData[\"npreregno\"] = selectedRecord.npreregno;\r\n                        tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                        tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                        tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                        tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                        tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                        tempData['jsondata'] = {\r\n                            stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),\r\n                            susername: saveParam.userInfo.susername,\r\n                            suserrolename: saveParam.userInfo.suserrolename,\r\n                            nfilesize: file.size,\r\n                            ssystemfilename: uniquefilename,\r\n                            sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                            slinkname: \"\",\r\n                            sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),\r\n                            nneedreport:selectedRecord.nneedreport ?  selectedRecord.nneedreport  : transactionStatus.NO   \r\n                        }\r\n                        // tempData[\"nfilesize\"] = file.size;\r\n                        // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                        // tempData[\"sfilename\"] = file.name.trim();\r\n                        // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                        tempData['nstatus'] = transactionStatus.ACTIVE;\r\n    \r\n    \r\n                        formData.append(\"uploadedFile\" + testindex1[\"index\"], file);\r\n                        formData.append(\"uniquefilename\" + testindex1[\"index\"], uniquefilename);\r\n                        fileArray.push(tempData);\r\n                        testindex1[\"index\"] = testindex1[\"index\"] + 1;\r\n                    })\r\n                });\r\n                formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n                isFileEdited = transactionStatus.YES;\r\n            }\r\n\r\n            \r\n        } else {\r\n            selectedMaster.forEach(test => {\r\n                let sampleFile = {};\r\n                sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                sampleFile[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\r\n                sampleFile[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\r\n                sampleFile[\"npreregno\"] = selectedRecord.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['jsondata'] = {\r\n                    stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),\r\n                    susername: saveParam.userInfo.susername,\r\n                    suserrolename: saveParam.userInfo.suserrolename,\r\n                    nfilesize: selectedRecord.size,\r\n                    ssystemfilename: selectedRecord.ssystemfilename,\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                    slinkname: \"\",\r\n                    sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(): \"\",false),\r\n                    nneedreport:selectedRecord.nneedreport ? selectedRecord.nneedreport : transactionStatus.NO    \r\n                }\r\n                // sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                // sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\r\n                // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n    } else {\r\n        if(saveParam.operation==='create'){\r\n            selectedMaster.forEach(test => {\r\n                let sampleFile = {};\r\n                sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                sampleFile[\"ntransactiontestcode\"] = test.ntransactiontestcode;\r\n                sampleFile[\"ntransactionsamplecode\"] = test.ntransactionsamplecode;\r\n                sampleFile[\"npreregno\"] = test.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n                sampleFile[\"jsondata\"] = {\r\n                    stestsynonym:Lims_JSON_stringify(test.stestsynonym.trim(),false),\r\n                    susername: saveParam.userInfo.susername,\r\n                    suserrolename: saveParam.userInfo.suserrolename,\r\n                    ssystemfilename: \"\",\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: 0,\r\n                    slinkname: selectedRecord.nlinkcode.label,\r\n                    sdescription:Lims_JSON_stringify( selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    nneedreport : transactionStatus.NO\r\n                };\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }else {\r\n            selectedMaster.forEach(test => {\r\n                let sampleFile = {};\r\n                sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                sampleFile[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\r\n                sampleFile[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\r\n                sampleFile[\"npreregno\"] = selectedRecord.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n                sampleFile[\"jsondata\"] = {\r\n                    stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),\r\n                    susername: saveParam.userInfo.susername,\r\n                    suserrolename: saveParam.userInfo.suserrolename,\r\n                    ssystemfilename: \"\",\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: 0,\r\n                    slinkname: selectedRecord.nlinkcode.label,\r\n                    sdescription:Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),\r\n                    nneedreport : transactionStatus.NO\r\n                };\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n\r\n    }\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"testattachment\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n   // formData.append(\"testattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"ntransactiontestcode\", saveParam.ntransactiontestcode);\r\n   // formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n\r\n\r\n    const inputParam = {\r\n        inputData: { \"userinfo\": {...saveParam.userInfo,\r\n            sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n            smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n            slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)} },\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"TestAttachment\"\r\n    }\r\n    return inputParam;\r\n}\r\n\r\nexport function onSaveBatchAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let nreleasebatchcode = selectedMaster.nreleasebatchcode;\r\n\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            acceptedFiles.forEach((file, index) => {\r\n\r\n                const splittedFileName = file.name.split('.');\r\n                const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                const fileName = selectedRecord.nbatchfilecode && selectedRecord.nbatchfilecode > 0 &&\r\n                    selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ?\r\n                    selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                const uniquefilename = fileName + '.' + fileExtension;\r\n\r\n                //selectedMaster.forEach(sample=>{\r\n\r\n                const tempData = {};\r\n                tempData['nbatchfilecode'] = selectedRecord.nbatchfilecode ?\r\n                    selectedRecord.nbatchfilecode : 0;\r\n                tempData[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\r\n                tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                tempData['nattachmenttypecode'] = nattachmenttypecode;\r\n                tempData[\"ssystemfilename\"] = uniquefilename;\r\n                tempData[\"sfilename\"] =Lims_JSON_stringify(file.name.trim(),false)  ;\r\n                tempData[\"sdescription\"] =Lims_JSON_stringify( selectedRecord.sdescription ? selectedRecord.sdescription.trim().replaceAll('\\\\n','#r#'):\"\",false)  ;\r\n                tempData['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n\r\n                formData.append(\"uploadedFile\" + index, file);\r\n                formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                fileArray.push(tempData);\r\n                //nreleasebatchcode.push(selectedMaster.releasebatchcode)\r\n                //})\r\n            });\r\n            formData.append(\"filecount\", acceptedFiles.length);\r\n            isFileEdited = transactionStatus.YES;\r\n        }\r\n        else {\r\n            // selectedMaster.forEach(sample=>{\r\n            let sampleFile = {};\r\n            sampleFile['nbatchfilecode'] = selectedRecord.nbatchfilecode ? selectedRecord.nbatchfilecode : 0;\r\n            sampleFile[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\r\n            sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n            sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n            sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n            sampleFile[\"sfilename\"] =Lims_JSON_stringify(selectedRecord.sfilename.trim(),false)  ;\r\n            sampleFile[\"sdescription\"] =Lims_JSON_stringify(  selectedRecord.sdescription ? selectedRecord.sdescription.trim().replaceAll('\\\\n','#r#') : \"\",false);\r\n            sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n            //npreregno.push(sample.npreregno)\r\n            fileArray.push(sampleFile);\r\n            // })\r\n        }\r\n    } else {\r\n        //selectedMaster.forEach(sample=>{\r\n        let sampleFile = {};\r\n        sampleFile['nbatchfilecode'] = selectedRecord.nbatchfilecode ? selectedRecord.nbatchfilecode : 0;\r\n        sampleFile[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\r\n        sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n        sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n        sampleFile[\"ssystemfilename\"] = \"\";\r\n        sampleFile[\"sfilename\"] =Lims_JSON_stringify(selectedRecord.slinkfilename.trim(),false)  ;\r\n        sampleFile[\"sdescription\"] =Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\",false)  ;\r\n        sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n        fileArray.push(sampleFile);\r\n        //npreregno.push(sample.npreregno)\r\n        //})  \r\n    }\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"batchcreationfile\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n    //formData.append(\"batchcreationfile\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"nreleasebatchcode\", nreleasebatchcode);\r\n    formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n\r\n    const inputParam = {\r\n        inputData: { userinfo: saveParam.userInfo },\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"BatchCreationFile\"\r\n    }\r\n    return inputParam;\r\n}\r\n\r\nexport function onSaveSubSampleAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let samindex = {\r\n        index: 0\r\n    };\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            acceptedFiles.forEach((file, index) => {\r\n\r\n                const splittedFileName = file.name.split('.');\r\n                const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                // const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \r\n                //         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\r\n\r\n\r\n                selectedMaster.forEach((sample, sampleindex) => {\r\n                    const fileName = selectedRecord.nsampleattachmentcode && selectedRecord.nsampleattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                    const uniquefilename = fileName + '.' + fileExtension;\r\n                    const tempData = {};\r\n                    tempData['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\r\n                    tempData[\"npreregno\"] = sample.npreregno;\r\n                    tempData[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\r\n                    tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                    tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                    tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    // tempData[\"nfilesize\"] = file.size;\r\n                    tempData['jsondata'] = {\r\n                        susername: saveParam.userInfo.susername,\r\n                        suserrolename: saveParam.userInfo.suserrolename,\r\n                        ssystemfilename: uniquefilename,\r\n                        sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                        nfilesize: file.size,\r\n                        sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false)  ,\r\n                        slinkname: \"\"\r\n                    }\r\n                    tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                    // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    // tempData[\"sfilename\"] = file.name.trim();\r\n                    // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                    tempData['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n\r\n\r\n                    formData.append(\"uploadedFile\" + samindex[\"index\"], file);\r\n                    formData.append(\"uniquefilename\" + samindex[\"index\"], uniquefilename);\r\n                    fileArray.push(tempData);\r\n                    samindex[\"index\"] = samindex[\"index\"] + 1;\r\n                })\r\n            });\r\n            formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n\r\n            isFileEdited = transactionStatus.YES;\r\n        } else {\r\n            selectedMaster.forEach(sample => {\r\n                let sampleFile = {};\r\n                sampleFile['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\r\n                sampleFile[\"npreregno\"] = sample.npreregno;\r\n                sampleFile[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['jsondata'] = {\r\n                    susername: saveParam.userInfo.susername,\r\n                    suserrolename: saveParam.userInfo.suserrolename,\r\n                    ssystemfilename: selectedRecord.ssystemfilename,\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: selectedRecord.nfilesize,\r\n                    sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                    slinkname: \"\"\r\n                }\r\n                sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                //sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\r\n                // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n    } else {\r\n        selectedMaster.forEach(sample => {\r\n            let sampleFile = {};\r\n            sampleFile['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\r\n            sampleFile[\"npreregno\"] = sample.npreregno;\r\n            sampleFile[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\r\n            sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n            sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n            sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n            sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            sampleFile['jsondata'] = {\r\n                susername: saveParam.userInfo.susername,\r\n                suserrolename: saveParam.userInfo.suserrolename,\r\n                ssystemfilename: \"\",\r\n                sfilename:Lims_JSON_stringify( selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                nfilesize: 0,\r\n                slinkname: selectedRecord.nlinkcode.label,\r\n                sdescription:Lims_JSON_stringify( selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false)\r\n            }\r\n            sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n            // sampleFile[\"ssystemfilename\"] = \"\";\r\n            sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n            fileArray.push(sampleFile);\r\n        })\r\n    }\r\n    formData.append(\"ncontrolCode\", saveParam.ncontrolCode);\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"subsampleattachment\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n    //formData.append(\"subsampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"npreregno\", saveParam.npreregno);\r\n    formData.append(\"ntransactionsamplecode\", saveParam.ntransactionsamplecode);\r\n    //formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n\r\n    formData.append(\"userinfo\", JSON.stringify({...saveParam.userInfo,\r\n        sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n        smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n        slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}));\r\n\r\n    const inputParam = {\r\n        inputData: {// userinfo: saveParam.userInfo },\r\n                    \"userinfo\": {...saveParam.userInfo,\r\n                    sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n                    smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n                    slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}},\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"SubSampleAttachment\"\r\n    }\r\n    return inputParam;\r\n}"]},"metadata":{},"sourceType":"module"}