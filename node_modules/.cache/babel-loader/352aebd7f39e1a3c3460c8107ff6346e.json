{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Card,Nav,FormGroup,FormLabel}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus,faPencilAlt,faTrashAlt}from'@fortawesome/free-solid-svg-icons';import{connect}from'react-redux';import{injectIntl,FormattedMessage}from'react-intl';import{callService,crudMaster,validateEsignCredential,updateStore,getChecklistVersion,getVersionQB,viewVersionTemplate,onSaveTemplate,showChecklistAddScreen,fetchChecklistRecordByID,filterColumnData}from'../../../actions';import{process}from'@progress/kendo-data-query';import{toast}from'react-toastify';import TemplateForm from'./TemplateForm';import ListMaster from'../../../components/list-master/list-master.component';import ChecklistForms from'./ChecklistForms';import{getSaveInputData,versionCreate,templateChangeHandler}from'./checklistMethods';import{DEFAULT_RETURN}from'../../../actions/LoginTypes';import{showEsign,getControlMap}from'../../../components/CommonScript';// import ConfirmDialog from '../../../components/confirm-alert/confirm-alert.component';\nimport{ProductList}from'../../testmanagement/testmaster-styled';import{transactionStatus}from'../../../components/Enumeration';import CustomAccordion from'../../../components/custom-accordion/custom-accordion.component';import ChecklistVersionAccordion from'./ChecklistVersionAccordion';import{ContentPanel,ReadOnlyText}from'../../../components/App.styles';// import { Tooltip } from '@progress/kendo-react-tooltip';\nimport ConfirmMessage from'../../../components/confirm-alert/confirm-message.component';// import ReactTooltip from 'react-tooltip';\nvar mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Checklist=/*#__PURE__*/function(_React$Component){_inherits(Checklist,_React$Component);var _super=_createSuper(Checklist);function Checklist(props){var _this;_classCallCheck(this,Checklist);_this=_super.call(this,props);_this.handleClose=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var openChildModal=_this.props.Login.openChildModal;var selectedRecord=_this.props.Login.selectedRecord;var templateData=_this.props.Login.templateData;var operation=_this.props.Login.operation;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"||_this.props.Login.operation===\"approve\"){loadEsign=false;openModal=false;openChildModal=false;selectedRecord={};templateData={};operation=undefined;}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}}else{openModal=false;openChildModal=false;selectedRecord={};templateData={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,templateData:templateData,selectedId:null,operation:operation}};_this.props.updateStore(updateInfo);};_this.validateEsign=function(){var modalName=_this.props.Login.id==='checklist'?'openModal':'openChildModal';var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,modalName);};_this.onSaveClick=function(saveType,formRef){var modalName=\"\";if(_this.props.Login.id==='checklistversion'){if(_this.props.Login.masterData.selectedchecklist){var inputParam=versionCreate(_this.state.selectedRecord,_this.props.Login.masterData.selectedchecklist,_this.props.Login);var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolcode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,operation:_this.props.Login.operation,screenName:'',id:_this.props.Login.id}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}}}else{modalName=_this.props.Login.id==='checklist'?'openModal':'openChildModal';var _inputParam=getSaveInputData(_this.props.Login.id,_this.props.Login.operation,_this.props.Login,_this.props.Login.availableQBCategory,_this.state.selectedRecord,_this.props.Login.masterData.selectedversion,formRef,_this.searchRef,_this.state.dataState);var _masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolcode)){var _updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:_inputParam,masterData:_masterData},saveType:saveType,operation:_this.props.Login.operation,id:_this.props.Login.id}};_this.props.updateStore(_updateInfo);}else{_this.props.crudMaster(_inputParam,_masterData,modalName);}}};_this.approveVersion=function(version,ncontrolCode){var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;inputData[\"checklistversion\"]={\"schecklistversionname\":version.schecklistversionname,\"nchecklistversioncode\":version.nchecklistversioncode,\"nchecklistcode\":version.nchecklistcode};var postParam={inputListName:\"checklist\",selectedObject:\"selectedchecklist\",primaryKeyField:\"nchecklistcode\",primaryKeyValue:_this.props.Login.masterData.selectedchecklist.nchecklistcode,fetchUrl:\"checklist/getChecklistVersion\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"ChecklistVersion\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,postParam:postParam,operation:\"approve\"};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,operation:'approve',screenName:'',id:'checklistversion'}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}};_this.deleteRecord=function(qbDeleteParam){var _inputData;var modalName='openChildModal';var selectedRecord=qbDeleteParam.selectedRecord;delete selectedRecord.expanded;var postParam=undefined;if(qbDeleteParam.methodUrl==='Checklist'){postParam={inputListName:\"checklist\",selectedObject:\"selectedchecklist\",primaryKeyField:\"nchecklistcode\",primaryKeyValue:_this.props.Login.masterData.selectedchecklist.nchecklistcode,fetchUrl:\"checklist/getChecklistVersion\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};modalName='openModal';}var inputParam={methodUrl:qbDeleteParam.methodUrl,classUrl:_this.props.Login.inputParam.classUrl,inputData:(_inputData={},_defineProperty(_inputData,qbDeleteParam.key,selectedRecord),_defineProperty(_inputData,\"userinfo\",_this.props.Login.userInfo),_inputData),operation:\"delete\",postParam:postParam,displayName:qbDeleteParam.methodUrl,dataState:_this.state.dataState};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,qbDeleteParam.ncontrolCode)){var _data;var updateInfo={typeName:DEFAULT_RETURN,data:(_data={loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData}},_defineProperty(_data,modalName,true),_defineProperty(_data,\"operation\",'delete'),_defineProperty(_data,\"screenName\",qbDeleteParam.methodUrl),_defineProperty(_data,\"id\",qbDeleteParam.methodUrl.toLowerCase()),_data)};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,modalName);}};_this.ConfirmDelete=function(deleteParam){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.deleteRecord(deleteParam);});};_this.checklistVersionAccordion=function(versionList){var accordionMap=new Map();versionList.map(function(version){return accordionMap.set(version.nchecklistversioncode,/*#__PURE__*/React.createElement(ChecklistVersionAccordion,{version:version,userRoleControlRights:_this.state.userRoleControlRights,controlMap:_this.state.controlMap,userInfo:_this.props.Login.userInfo,masterData:_this.props.Login.masterData,inputParam:_this.props.Login.inputParam,showChecklistAddScreen:_this.props.showChecklistAddScreen,dataResult:process(_this.props.Login.masterData.checklistversionqb?_this.props.Login.masterData.checklistversionqb:[],_this.state.dataState),dataState:_this.state.dataState,dataStateChange:_this.dataStateChange,fetchChecklistRecordByID:_this.props.fetchChecklistRecordByID,ConfirmDelete:_this.ConfirmDelete,selectedId:_this.props.Login.selectedId,approveVersion:_this.approveVersion,deleteRecord:_this.deleteRecord,viewVersionTemplate:_this.props.viewVersionTemplate}));});return accordionMap;};_this.dataStateChange=function(event){_this.setState({dataState:event.dataState});};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};if(fieldName===\"nchecklistqbcategorycode\"){//only go inside when combo has value\nif(comboData){selectedRecord[\"schecklistqbcategoryname\"]=comboData.label;selectedRecord[selectedRecord[\"schecklistqbcategoryname\"]]=_this.state.selectedRecord?_this.state.selectedRecord[comboData.label]?_this.state.selectedRecord[comboData.label]:\"\":\"\";_this.setState({availableQB:_this.props.Login.listQb[comboData.label],selectedRecord:selectedRecord});}else{selectedRecord[\"schecklistqbcategoryname\"]=\"\";_this.setState({selectedRecord:selectedRecord,availableQB:[]});}}else{selectedRecord[_this.state.selectedRecord.schecklistqbcategoryname]=comboData;_this.setState({selectedRecord:selectedRecord});}};_this.onTemplateInputChange=function(event,control){var selectedRecord=templateChangeHandler(1,_this.state.selectedRecord,event,control);_this.setState({selectedRecord:selectedRecord});};_this.onTemplateComboChange=function(comboData,control){var selectedRecord=templateChangeHandler(2,_this.state.selectedRecord,comboData,control);_this.setState({selectedRecord:selectedRecord});};_this.onTemplateDateChange=function(dateData,control){var selectedRecord=templateChangeHandler(3,_this.state.selectedRecord,dateData,control);_this.setState({selectedRecord:selectedRecord});};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputParam={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:\"checklist\",methodUrl:\"Checklist\",displayName:\"IDS_CHECKLIST\",userInfo:_this.props.Login.userInfo};_this.props.callService(inputParam);};_this.formRef=React.createRef();_this.searchRef=React.createRef();var dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={masterStatus:\"\",error:\"\",dataState:dataState,selectedRecord:{},availableQB:[],QBCategory:undefined,QB:undefined,listQb:{},userRoleControlRights:[],controlMap:new Map()};_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(Checklist,[{key:\"render\",value:function render(){var _this2=this;var filterParam={inputListName:\"checklist\",selectedObject:\"selectedchecklist\",primaryKeyField:\"nchecklistcode\",fetchUrl:\"checklist/getChecklistVersion\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,searchFieldList:[\"schecklistname\",\"sdescription\"]};var addChecklistId=this.state.controlMap.has(\"AddChecklist\")&&this.state.controlMap.get(\"AddChecklist\").ncontrolcode;var editChecklistId=this.state.controlMap.has(\"EditChecklist\")&&this.state.controlMap.get(\"EditChecklist\").ncontrolcode;var deleteChecklistId=this.state.controlMap.has(\"DeleteChecklist\")&&this.state.controlMap.get(\"DeleteChecklist\").ncontrolcode;var createVersionId=this.state.controlMap.has(\"CreateChecklistVersion\")&&this.state.controlMap.get(\"CreateChecklistVersion\").ncontrolcode;this.props.Login.showAccordion=true;var checklistEditParam={screenName:\"Checklist\",operation:\"update\",primaryKeyField:\"nchecklistcode\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,primaryKeyValue:this.props.Login.masterData.selectedchecklist?this.props.Login.masterData.selectedchecklist.nchecklistcode:-1,ncontrolCode:editChecklistId};var checklistDeleteParam={screenName:\"Checklist\",methodUrl:\"Checklist\",operation:\"delete\",key:'checklist',ncontrolCode:deleteChecklistId,selectedRecord:this.props.Login.masterData.selectedchecklist?this.props.Login.masterData.selectedchecklist:{}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-4\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster,{screenName:this.props.intl.formatMessage({id:\"IDS_CHECKLIST\"}),masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.checklist,getMasterDetail:function getMasterDetail(checklist){return _this2.props.getChecklistVersion(checklist,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:this.props.Login.masterData.selectedchecklist,primaryKeyField:\"nchecklistcode\",mainField:\"schecklistname\",filterColumnData:this.props.filterColumnData,openModal:function openModal(){return _this2.props.showChecklistAddScreen(null,'checklist',addChecklistId,_this2.props.Login.userInfo);},userRoleControlRights:this.state.userRoleControlRights,addId:addChecklistId,searchRef:this.searchRef,filterParam:filterParam,hidePaging:true,reloadData:this.reloadData})),/*#__PURE__*/React.createElement(Col,{md:8},this.props.Login.masterData.selectedchecklist?Object.entries(this.props.Login.masterData.selectedchecklist).length>0?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},this.props.Login.masterData.selectedchecklist.schecklistname),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(ProductList,{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_EDIT\"})//    data-for=\"tooltip_list_wrap\"\n,hidden:this.state.userRoleControlRights.indexOf(editChecklistId)===-1,onClick:function onClick(){return _this2.props.fetchChecklistRecordByID(checklistEditParam);}//\"Checklist\",\"nchecklistcode\",this.props.Login.masterData.selectedchecklist.nchecklistcode)\n},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt,title:this.props.intl.formatMessage({id:\"IDS_EDIT\"})})),/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"})//  data-for=\"tooltip_list_wrap\"\n,hidden:this.state.userRoleControlRights.indexOf(deleteChecklistId)===-1,onClick:function onClick(){return _this2.ConfirmDelete(checklistDeleteParam);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt}))))),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_DESCRIPTION\",message:\"Description\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.selectedchecklist.sdescription)))),/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{id:\"checklistvsersion\",className:\"at-tabs border-0\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{className:\"add-txt-btn\",hidden:this.state.userRoleControlRights.indexOf(createVersionId)===-1,onClick:function onClick(){return _this2.props.showChecklistAddScreen(null,'checklistversion',createVersionId,_this2.props.Login.userInfo);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_VERSION\",defaultMessage:\"Version\"}))))),/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},this.props.Login.masterData.checklistversion&&this.props.Login.masterData.checklistversion.length>0?/*#__PURE__*/React.createElement(CustomAccordion,{key:\"ChecklistVersion\",accordionTitle:\"schecklistversionname\",accordionComponent:this.checklistVersionAccordion(this.props.Login.masterData.checklistversion),inputParam:{masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo},accordionClick:this.props.getVersionQB,accordionPrimaryKey:\"nchecklistversioncode\",accordionObjectName:\"version\",selectedKey:this.props.Login.masterData.selectedversion.nchecklistversioncode}):\"\")))))))))):\"\":\"\"))),this.props.Login.operation&&this.props.Login.inputParam&&this.props.Login.id&&/*#__PURE__*/React.createElement(ChecklistForms,{Login:this.props.Login,isOpen:this.props.Login.id?this.props.Login.id==='checklist'?this.props.Login.openModal:this.props.Login.openChildModal:false,onInputOnChange:this.onInputOnChange,handleClose:this.handleClose,onSaveClick:this.onSaveClick,onComboChange:this.onComboChange,id:this.props.Login.id?this.props.Login.id:\"\",operation:this.props.Login.operation?this.props.Login.operation:'',selectedRecord:this.state.selectedRecord,QBCategory:this.props.Login.QBCategory,availableQBCategory:this.props.Login.availableQBCategory,QB:this.props.Login.QB,availableQB:this.state.selectedRecord?this.state.availableQB:[],validateEsign:this.validateEsign}),this.props.Login.templateData&&this.props.Login.templateData.length>0?/*#__PURE__*/React.createElement(TemplateForm,{templateData:this.props.Login.templateData,needSaveButton:this.props.Login.masterData.selectedversion.ntransactionstatus===transactionStatus.DRAFT?true:false,formRef:this.formRef,onTemplateInputChange:this.onTemplateInputChange,handleClose:this.handleClose,onTemplateComboChange:this.onTemplateComboChange,onSaveClick:this.props.onSaveTemplate,Login:this.props.Login,viewScreen:this.props.Login.openTemplateModal,selectedRecord:this.state.selectedRecord,onTemplateDateChange:this.onTemplateDateChange}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap});}if(this.props.Login.masterData!==previousProps.Login.masterData){var dataState=this.state.dataState;if(this.props.Login.dataState===undefined){dataState={skip:0,take:this.props.Login.settings?parseInt(this.props.Login.settings[14]):5};this.setState({dataState:dataState});}}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:[],inputParam:undefined,operation:null,modalName:undefined}};this.props.updateStore(updateInfo);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return Checklist;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,updateStore:updateStore,getChecklistVersion:getChecklistVersion,getVersionQB:getVersionQB,viewVersionTemplate:viewVersionTemplate,onSaveTemplate:onSaveTemplate,showChecklistAddScreen:showChecklistAddScreen,fetchChecklistRecordByID:fetchChecklistRecordByID,filterColumnData:filterColumnData})(injectIntl(Checklist));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/checklist/checklist/Checklist.jsx"],"names":["React","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faPlus","faPencilAlt","faTrashAlt","connect","injectIntl","FormattedMessage","callService","crudMaster","validateEsignCredential","updateStore","getChecklistVersion","getVersionQB","viewVersionTemplate","onSaveTemplate","showChecklistAddScreen","fetchChecklistRecordByID","filterColumnData","process","toast","TemplateForm","ListMaster","ChecklistForms","getSaveInputData","versionCreate","templateChangeHandler","DEFAULT_RETURN","showEsign","getControlMap","ProductList","transactionStatus","CustomAccordion","ChecklistVersionAccordion","ContentPanel","ReadOnlyText","ConfirmMessage","mapStateToProps","state","Login","Checklist","props","handleClose","loadEsign","openModal","openChildModal","selectedRecord","templateData","operation","undefined","updateInfo","typeName","data","selectedId","validateEsign","modalName","id","inputParam","inputData","userInfo","sreason","nreasoncode","value","spredefinedreason","label","password","screenData","onSaveClick","saveType","formRef","masterData","selectedchecklist","userRoleControlRights","nformcode","ncontrolcode","screenName","availableQBCategory","selectedversion","searchRef","dataState","approveVersion","version","ncontrolCode","schecklistversionname","nchecklistversioncode","nchecklistcode","postParam","inputListName","selectedObject","primaryKeyField","primaryKeyValue","fetchUrl","fecthInputObject","userinfo","methodUrl","classUrl","deleteRecord","qbDeleteParam","expanded","key","displayName","toLowerCase","ConfirmDelete","deleteParam","confirmMessage","confirm","intl","formatMessage","checklistVersionAccordion","versionList","accordionMap","Map","map","set","controlMap","checklistversionqb","dataStateChange","event","setState","onInputOnChange","target","type","name","checked","YES","NO","onComboChange","comboData","fieldName","availableQB","listQb","schecklistqbcategoryname","onTemplateInputChange","control","onTemplateComboChange","onTemplateDateChange","dateData","reloadData","current","createRef","skip","take","settings","parseInt","masterStatus","error","QBCategory","QB","filterParam","searchFieldList","addChecklistId","has","get","editChecklistId","deleteChecklistId","createVersionId","showAccordion","checklistEditParam","checklistDeleteParam","searchedData","checklist","Object","entries","length","schecklistname","indexOf","sdescription","checklistversion","ntransactionstatus","DRAFT","openTemplateModal","previousProps","values","item","push","warn","Component"],"mappings":"67BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,CAAcC,GAAd,CAAmBC,IAAnB,CAAyBC,GAAzB,CAA8BC,SAA9B,CAAyCC,SAAzC,KAA0D,iBAA1D,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,OAASC,MAAT,CAAiBC,WAAjB,CAA8BC,UAA9B,KAAgD,mCAAhD,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,UAAT,CAAqBC,gBAArB,KAA6C,YAA7C,CACA,OACIC,WADJ,CACiBC,UADjB,CAC6BC,uBAD7B,CACsDC,WADtD,CACmEC,mBADnE,CACwFC,YADxF,CACsGC,mBADtG,CAC2HC,cAD3H,CAEIC,sBAFJ,CAE4BC,wBAF5B,CAEsDC,gBAFtD,KAGO,kBAHP,CAIA,OAASC,OAAT,KAAwB,4BAAxB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,uDAAvB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,gBAAT,CAA2BC,aAA3B,CAA0CC,qBAA1C,KAAuE,oBAAvE,CACA,OAASC,cAAT,KAA+B,6BAA/B,CACA,OAASC,SAAT,CAAoBC,aAApB,KAAyC,kCAAzC,CACA;AACA,OAASC,WAAT,KAA4B,wCAA5B,CACA,OAASC,iBAAT,KAAkC,iCAAlC,CACA,MAAOC,CAAAA,eAAP,KAA4B,iEAA5B,CACA,MAAOC,CAAAA,yBAAP,KAAsC,6BAAtC,CACA,OAASC,YAAT,CAAuBC,YAAvB,KAA2C,gCAA3C,CACA;AACA,MAAOC,CAAAA,cAAP,KAA2B,6DAA3B,CACA;AAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,KAAK,CAAI,CAC7B,MAAQ,CAAEC,KAAK,CAAED,KAAK,CAACC,KAAf,CAAR,CACH,CAFD,C,GAIMC,CAAAA,S,kHACF,mBAAYC,KAAZ,CAAmB,2CACf,uBAAMA,KAAN,EADe,MAoBnBC,WApBmB,CAoBL,UAAM,CAChB,GAAIC,CAAAA,SAAS,CAAG,MAAKF,KAAL,CAAWF,KAAX,CAAiBI,SAAjC,CACA,GAAIC,CAAAA,SAAS,CAAG,MAAKH,KAAL,CAAWF,KAAX,CAAiBK,SAAjC,CACA,GAAIC,CAAAA,cAAc,CAAG,MAAKJ,KAAL,CAAWF,KAAX,CAAiBM,cAAtC,CACA,GAAIC,CAAAA,cAAc,CAAG,MAAKL,KAAL,CAAWF,KAAX,CAAiBO,cAAtC,CACA,GAAIC,CAAAA,YAAY,CAAG,MAAKN,KAAL,CAAWF,KAAX,CAAiBQ,YAApC,CACA,GAAIC,CAAAA,SAAS,CAAG,MAAKP,KAAL,CAAWF,KAAX,CAAiBS,SAAjC,CACA,GAAI,MAAKP,KAAL,CAAWF,KAAX,CAAiBI,SAArB,CAAgC,CAC5B,GAAI,MAAKF,KAAL,CAAWF,KAAX,CAAiBS,SAAjB,GAA+B,QAA/B,EAA2C,MAAKP,KAAL,CAAWF,KAAX,CAAiBS,SAAjB,GAA+B,SAA9E,CAAyF,CACrFL,SAAS,CAAG,KAAZ,CACAC,SAAS,CAAG,KAAZ,CACAC,cAAc,CAAG,KAAjB,CACAC,cAAc,CAAG,EAAjB,CACAC,YAAY,CAAG,EAAf,CACAC,SAAS,CAAGC,SAAZ,CACH,CAPD,IAQK,CACDN,SAAS,CAAG,KAAZ,CACAG,cAAc,CAAC,eAAD,CAAd,CAAkC,EAAlC,CACAA,cAAc,CAAC,eAAD,CAAd,CAAkC,EAAlC,CACAA,cAAc,CAAC,aAAD,CAAd,CAA8B,EAA9B,CACH,CACJ,CAfD,IAgBK,CACDF,SAAS,CAAG,KAAZ,CACAC,cAAc,CAAG,KAAjB,CACAC,cAAc,CAAG,EAAjB,CACAC,YAAY,CAAG,EAAf,CACH,CAED,GAAMG,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAExB,cADK,CAEfyB,IAAI,CAAE,CAAER,SAAS,CAATA,SAAF,CAAaC,cAAc,CAAdA,cAAb,CAA6BF,SAAS,CAATA,SAA7B,CAAwCG,cAAc,CAAdA,cAAxC,CAAwDC,YAAY,CAAZA,YAAxD,CAAsEM,UAAU,CAAE,IAAlF,CAAwFL,SAAS,CAATA,SAAxF,CAFS,CAAnB,CAIA,MAAKP,KAAL,CAAW9B,WAAX,CAAuBuC,UAAvB,EACH,CAvDkB,OAwDnBI,aAxDmB,CAwDH,UAAM,CAClB,GAAIC,CAAAA,SAAS,CAAG,MAAKd,KAAL,CAAWF,KAAX,CAAiBiB,EAAjB,GAAwB,WAAxB,CAAsC,WAAtC,CAAoD,gBAApE,CACA,GAAMC,CAAAA,UAAU,CAAG,CACfC,SAAS,CAAE,CACP,0CACO,MAAKjB,KAAL,CAAWF,KAAX,CAAiBoB,QADxB,MAEIC,OAAO,CAAE,MAAKtB,KAAL,CAAWQ,cAAX,CAA0B,eAA1B,CAFb,CAGIe,WAAW,CAAC,MAAKvB,KAAL,CAAWQ,cAAX,CAA0B,aAA1B,GAA4C,MAAKR,KAAL,CAAWQ,cAAX,CAA0B,aAA1B,EAAyCgB,KAHrG,CAIIC,iBAAiB,CAAC,MAAKzB,KAAL,CAAWQ,cAAX,CAA0B,aAA1B,GAA4C,MAAKR,KAAL,CAAWQ,cAAX,CAA0B,aAA1B,EAAyCkB,KAJ3G,EADO,CAQPC,QAAQ,CAAE,MAAK3B,KAAL,CAAWQ,cAAX,CAA0B,eAA1B,CARH,CADI,CAWfoB,UAAU,CAAE,MAAKzB,KAAL,CAAWF,KAAX,CAAiB2B,UAXd,CAAnB,CAaA,MAAKzB,KAAL,CAAW/B,uBAAX,CAAmC+C,UAAnC,CAA+CF,SAA/C,EACH,CAxEkB,OAyEnBY,WAzEmB,CAyEL,SAACC,QAAD,CAAWC,OAAX,CAAuB,CACjC,GAAId,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAI,MAAKd,KAAL,CAAWF,KAAX,CAAiBiB,EAAjB,GAAwB,kBAA5B,CAAgD,CAC5C,GAAI,MAAKf,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAAhC,CAAmD,CAE/C,GAAId,CAAAA,UAAU,CAAGhC,aAAa,CAAC,MAAKa,KAAL,CAAWQ,cAAZ,CAA4B,MAAKL,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAAxD,CAA2E,MAAK9B,KAAL,CAAWF,KAAtF,CAA9B,CAEA,GAAM+B,CAAAA,UAAU,CAAG,MAAK7B,KAAL,CAAWF,KAAX,CAAiB+B,UAApC,CAEA,GAAI1C,SAAS,CAAC,MAAKa,KAAL,CAAWF,KAAX,CAAiBiC,qBAAlB,CAAyC,MAAK/B,KAAL,CAAWF,KAAX,CAAiBoB,QAAjB,CAA0Bc,SAAnE,CAA8E,MAAKhC,KAAL,CAAWF,KAAX,CAAiBmC,YAA/F,CAAb,CAA2H,CACvH,GAAMxB,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAExB,cADK,CAEfyB,IAAI,CAAE,CACFT,SAAS,CAAE,IADT,CACeuB,UAAU,CAAE,CAAET,UAAU,CAAVA,UAAF,CAAca,UAAU,CAAVA,UAAd,CAD3B,CACuDzB,cAAc,CAAE,IADvE,CAC6EG,SAAS,CAAE,MAAKP,KAAL,CAAWF,KAAX,CAAiBS,SADzG,CACoH2B,UAAU,CAAE,EADhI,CACoInB,EAAE,CAAE,MAAKf,KAAL,CAAWF,KAAX,CAAiBiB,EADzJ,CAFS,CAAnB,CAMA,MAAKf,KAAL,CAAW9B,WAAX,CAAuBuC,UAAvB,EACH,CARD,IASK,CACD,MAAKT,KAAL,CAAWhC,UAAX,CAAsBgD,UAAtB,CAAkCa,UAAlC,CAA8C,gBAA9C,EACH,CACJ,CACJ,CApBD,IAoBO,CACHf,SAAS,CAAG,MAAKd,KAAL,CAAWF,KAAX,CAAiBiB,EAAjB,GAAwB,WAAxB,CAAsC,WAAtC,CAAoD,gBAAhE,CACA,GAAIC,CAAAA,WAAU,CAAGjC,gBAAgB,CAAC,MAAKiB,KAAL,CAAWF,KAAX,CAAiBiB,EAAlB,CAAsB,MAAKf,KAAL,CAAWF,KAAX,CAAiBS,SAAvC,CAAkD,MAAKP,KAAL,CAAWF,KAA7D,CAC7B,MAAKE,KAAL,CAAWF,KAAX,CAAiBqC,mBADY,CACS,MAAKtC,KAAL,CAAWQ,cADpB,CACoC,MAAKL,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BO,eADhE,CACiFR,OADjF,CAC0F,MAAKS,SAD/F,CAC0G,MAAKxC,KAAL,CAAWyC,SADrH,CAAjC,CAIA,GAAMT,CAAAA,WAAU,CAAG,MAAK7B,KAAL,CAAWF,KAAX,CAAiB+B,UAApC,CAEA,GAAI1C,SAAS,CAAC,MAAKa,KAAL,CAAWF,KAAX,CAAiBiC,qBAAlB,CAAyC,MAAK/B,KAAL,CAAWF,KAAX,CAAiBoB,QAAjB,CAA0Bc,SAAnE,CAA8E,MAAKhC,KAAL,CAAWF,KAAX,CAAiBmC,YAA/F,CAAb,CAA2H,CACvH,GAAMxB,CAAAA,WAAU,CAAG,CACfC,QAAQ,CAAExB,cADK,CAEfyB,IAAI,CAAE,CACFT,SAAS,CAAE,IADT,CACeuB,UAAU,CAAE,CAAET,UAAU,CAAVA,WAAF,CAAca,UAAU,CAAVA,WAAd,CAD3B,CACuDF,QAAQ,CAARA,QADvD,CAEFpB,SAAS,CAAE,MAAKP,KAAL,CAAWF,KAAX,CAAiBS,SAF1B,CAEqCQ,EAAE,CAAE,MAAKf,KAAL,CAAWF,KAAX,CAAiBiB,EAF1D,CAFS,CAAnB,CAOA,MAAKf,KAAL,CAAW9B,WAAX,CAAuBuC,WAAvB,EACH,CATD,IAUK,CACD,MAAKT,KAAL,CAAWhC,UAAX,CAAsBgD,WAAtB,CAAkCa,WAAlC,CAA8Cf,SAA9C,EACH,CACJ,CAEJ,CAtHkB,OAyHnByB,cAzHmB,CAyHF,SAACC,OAAD,CAAUC,YAAV,CAA2B,CAExC,GAAIxB,CAAAA,SAAS,CAAG,EAAhB,CACAA,SAAS,CAAC,UAAD,CAAT,CAAwB,MAAKjB,KAAL,CAAWF,KAAX,CAAiBoB,QAAzC,CACAD,SAAS,CAAC,kBAAD,CAAT,CAAgC,CAC5B,wBAAyBuB,OAAO,CAACE,qBADL,CAE5B,wBAAyBF,OAAO,CAACG,qBAFL,CAG5B,iBAAkBH,OAAO,CAACI,cAHE,CAAhC,CAKA,GAAMC,CAAAA,SAAS,CAAG,CACdC,aAAa,CAAE,WADD,CACcC,cAAc,CAAE,mBAD9B,CAEdC,eAAe,CAAE,gBAFH,CAGdC,eAAe,CAAE,MAAKjD,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAA5B,CAA8Cc,cAHjD,CAIdM,QAAQ,CAAE,+BAJI,CAKdC,gBAAgB,CAAE,CAAEC,QAAQ,CAAE,MAAKpD,KAAL,CAAWF,KAAX,CAAiBoB,QAA7B,CALJ,CAAlB,CAOA,GAAMF,CAAAA,UAAU,CAAG,CACfqC,SAAS,CAAE,kBADI,CAEfC,QAAQ,CAAE,MAAKtD,KAAL,CAAWF,KAAX,CAAiBkB,UAAjB,CAA4BsC,QAFvB,CAGfrC,SAAS,CAAEA,SAHI,CAGO4B,SAAS,CAATA,SAHP,CAIftC,SAAS,CAAE,SAJI,CAAnB,CAMA,GAAMsB,CAAAA,UAAU,CAAG,MAAK7B,KAAL,CAAWF,KAAX,CAAiB+B,UAApC,CAEA,GAAI1C,SAAS,CAAC,MAAKa,KAAL,CAAWF,KAAX,CAAiBiC,qBAAlB,CAAyC,MAAK/B,KAAL,CAAWF,KAAX,CAAiBoB,QAAjB,CAA0Bc,SAAnE,CAA8ES,YAA9E,CAAb,CAA0G,CACtG,GAAMhC,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAExB,cADK,CAEfyB,IAAI,CAAE,CACFT,SAAS,CAAE,IADT,CACeuB,UAAU,CAAE,CAAET,UAAU,CAAVA,UAAF,CAAca,UAAU,CAAVA,UAAd,CAD3B,CACuDzB,cAAc,CAAE,IADvE,CAC6EG,SAAS,CAAE,SADxF,CACmG2B,UAAU,CAAE,EAD/G,CACmHnB,EAAE,CAAE,kBADvH,CAFS,CAAnB,CAMA,MAAKf,KAAL,CAAW9B,WAAX,CAAuBuC,UAAvB,EACH,CARD,IASK,CACD,MAAKT,KAAL,CAAWhC,UAAX,CAAsBgD,UAAtB,CAAkCa,UAAlC,CAA8C,gBAA9C,EACH,CACJ,CA7JkB,OAiKnB0B,YAjKmB,CAiKJ,SAACC,aAAD,CAAmB,gBAC9B,GAAI1C,CAAAA,SAAS,CAAG,gBAAhB,CACA,GAAIT,CAAAA,cAAc,CAAGmD,aAAa,CAACnD,cAAnC,CACA,MAAOA,CAAAA,cAAc,CAACoD,QAAtB,CACA,GAAIZ,CAAAA,SAAS,CAAGrC,SAAhB,CACA,GAAIgD,aAAa,CAACH,SAAd,GAA4B,WAAhC,CAA6C,CACzCR,SAAS,CAAG,CACRC,aAAa,CAAE,WADP,CACoBC,cAAc,CAAE,mBADpC,CAERC,eAAe,CAAE,gBAFT,CAGRC,eAAe,CAAE,MAAKjD,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAA5B,CAA8Cc,cAHvD,CAIRM,QAAQ,CAAE,+BAJF,CAKRC,gBAAgB,CAAE,CAAEC,QAAQ,CAAE,MAAKpD,KAAL,CAAWF,KAAX,CAAiBoB,QAA7B,CALV,CAAZ,CAQAJ,SAAS,CAAG,WAAZ,CACH,CACD,GAAME,CAAAA,UAAU,CAAG,CACfqC,SAAS,CAAEG,aAAa,CAACH,SADV,CAEfC,QAAQ,CAAE,MAAKtD,KAAL,CAAWF,KAAX,CAAiBkB,UAAjB,CAA4BsC,QAFvB,CAGfrC,SAAS,2CAAKuC,aAAa,CAACE,GAAnB,CAAyBrD,cAAzB,6BAAyC,UAAzC,CAAqD,MAAKL,KAAL,CAAWF,KAAX,CAAiBoB,QAAtE,aAHM,CAIfX,SAAS,CAAE,QAJI,CAIMsC,SAAS,CAATA,SAJN,CAKfc,WAAW,CAAEH,aAAa,CAACH,SALZ,CAMff,SAAS,CAAE,MAAKzC,KAAL,CAAWyC,SANP,CAAnB,CAQA,GAAMT,CAAAA,UAAU,CAAG,MAAK7B,KAAL,CAAWF,KAAX,CAAiB+B,UAApC,CAEA,GAAI1C,SAAS,CAAC,MAAKa,KAAL,CAAWF,KAAX,CAAiBiC,qBAAlB,CAAyC,MAAK/B,KAAL,CAAWF,KAAX,CAAiBoB,QAAjB,CAA0Bc,SAAnE,CAA8EwB,aAAa,CAACf,YAA5F,CAAb,CAAwH,WACpH,GAAMhC,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAExB,cADK,CAEfyB,IAAI,SACAT,SAAS,CAAE,IADX,CACiBuB,UAAU,CAAE,CAAET,UAAU,CAAVA,UAAF,CAAca,UAAU,CAAVA,UAAd,CAD7B,wBAC0Df,SAD1D,CACsE,IADtE,oCAEW,QAFX,qCAEiC0C,aAAa,CAACH,SAF/C,6BAE8DG,aAAa,CAACH,SAAd,CAAwBO,WAAxB,EAF9D,QAFW,CAAnB,CAOA,MAAK5D,KAAL,CAAW9B,WAAX,CAAuBuC,UAAvB,EACH,CATD,IAUK,CACD,MAAKT,KAAL,CAAWhC,UAAX,CAAsBgD,UAAtB,CAAkCa,UAAlC,CAA8Cf,SAA9C,EACH,CACJ,CAxMkB,OAobnB+C,aApbmB,CAobH,SAACC,WAAD,CAAiB,CAC7B,MAAKC,cAAL,CAAoBC,OAApB,CAA4B,eAA5B,CAA6C,MAAKhE,KAAL,CAAWiE,IAAX,CAAgBC,aAAhB,CAA8B,CAAEnD,EAAE,CAAE,YAAN,CAA9B,CAA7C,CAAkG,MAAKf,KAAL,CAAWiE,IAAX,CAAgBC,aAAhB,CAA8B,CAAEnD,EAAE,CAAE,uBAAN,CAA9B,CAAlG,CACI,MAAKf,KAAL,CAAWiE,IAAX,CAAgBC,aAAhB,CAA8B,CAAEnD,EAAE,CAAE,QAAN,CAA9B,CADJ,CACqD,MAAKf,KAAL,CAAWiE,IAAX,CAAgBC,aAAhB,CAA8B,CAAEnD,EAAE,CAAE,YAAN,CAA9B,CADrD,CAEI,iBAAM,OAAKwC,YAAL,CAAkBO,WAAlB,CAAN,EAFJ,EAGH,CAxbkB,OAkcnBK,yBAlcmB,CAkcS,SAACC,WAAD,CAAiB,CACzC,GAAMC,CAAAA,YAAY,CAAG,GAAIC,CAAAA,GAAJ,EAArB,CACAF,WAAW,CAACG,GAAZ,CAAgB,SAAC/B,OAAD,QACZ6B,CAAAA,YAAY,CAACG,GAAb,CAAiBhC,OAAO,CAACG,qBAAzB,cACI,oBAAC,yBAAD,EACI,OAAO,CAAEH,OADb,CAEI,qBAAqB,CAAE,MAAK3C,KAAL,CAAWkC,qBAFtC,CAGI,UAAU,CAAE,MAAKlC,KAAL,CAAW4E,UAH3B,CAII,QAAQ,CAAE,MAAKzE,KAAL,CAAWF,KAAX,CAAiBoB,QAJ/B,CAKI,UAAU,CAAE,MAAKlB,KAAL,CAAWF,KAAX,CAAiB+B,UALjC,CAMI,UAAU,CAAE,MAAK7B,KAAL,CAAWF,KAAX,CAAiBkB,UANjC,CAOI,sBAAsB,CAAE,MAAKhB,KAAL,CAAWzB,sBAPvC,CAQI,UAAU,CAAEG,OAAO,CAAC,MAAKsB,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4B6C,kBAA5B,CAAiD,MAAK1E,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4B6C,kBAA7E,CAAkG,EAAnG,CAAuG,MAAK7E,KAAL,CAAWyC,SAAlH,CARvB,CASI,SAAS,CAAE,MAAKzC,KAAL,CAAWyC,SAT1B,CAUI,eAAe,CAAE,MAAKqC,eAV1B,CAWI,wBAAwB,CAAE,MAAK3E,KAAL,CAAWxB,wBAXzC,CAYI,aAAa,CAAE,MAAKqF,aAZxB,CAaI,UAAU,CAAE,MAAK7D,KAAL,CAAWF,KAAX,CAAiBc,UAbjC,CAcI,cAAc,CAAE,MAAK2B,cAdzB,CAeI,YAAY,CAAE,MAAKgB,YAfvB,CAgBI,mBAAmB,CAAE,MAAKvD,KAAL,CAAW3B,mBAhBpC,EADJ,CADY,EAAhB,EAqBA,MAAOgG,CAAAA,YAAP,CACH,CA1dkB,OA2dnBM,eA3dmB,CA2dD,SAACC,KAAD,CAAW,CACzB,MAAKC,QAAL,CAAc,CACVvC,SAAS,CAAEsC,KAAK,CAACtC,SADP,CAAd,EAGH,CA/dkB,OAienBwC,eAjemB,CAieD,SAACF,KAAD,CAAW,CACzB,GAAMvE,CAAAA,cAAc,CAAG,MAAKR,KAAL,CAAWQ,cAAX,EAA6B,EAApD,CACA,GAAIuE,KAAK,CAACG,MAAN,CAAaC,IAAb,GAAsB,UAA1B,CAAsC,CAClC3E,cAAc,CAACuE,KAAK,CAACG,MAAN,CAAaE,IAAd,CAAd,CAAoCL,KAAK,CAACG,MAAN,CAAaG,OAAb,GAAyB,IAAzB,CAAgC5F,iBAAiB,CAAC6F,GAAlD,CAAwD7F,iBAAiB,CAAC8F,EAA9G,CACH,CAFD,IAGK,CACD/E,cAAc,CAACuE,KAAK,CAACG,MAAN,CAAaE,IAAd,CAAd,CAAoCL,KAAK,CAACG,MAAN,CAAa1D,KAAjD,CACH,CACD,MAAKwD,QAAL,CAAc,CAAExE,cAAc,CAAdA,cAAF,CAAd,EACH,CA1ekB,OA2enBgF,aA3emB,CA2eH,SAACC,SAAD,CAAYC,SAAZ,CAA0B,CACtC,GAAMlF,CAAAA,cAAc,CAAG,MAAKR,KAAL,CAAWQ,cAAX,EAA6B,EAApD,CACA,GAAIkF,SAAS,GAAK,0BAAlB,CAA8C,CAC1C;AACA,GAAID,SAAJ,CAAe,CACXjF,cAAc,CAAC,0BAAD,CAAd,CAA6CiF,SAAS,CAAC/D,KAAvD,CACAlB,cAAc,CAACA,cAAc,CAAC,0BAAD,CAAf,CAAd,CAA6D,MAAKR,KAAL,CAAWQ,cAAX,CAA4B,MAAKR,KAAL,CAAWQ,cAAX,CAA0BiF,SAAS,CAAC/D,KAApC,EACrF,MAAK1B,KAAL,CAAWQ,cAAX,CAA0BiF,SAAS,CAAC/D,KAApC,CADqF,CACxC,EADY,CACP,EADtD,CAEA,MAAKsD,QAAL,CAAc,CAAEW,WAAW,CAAE,MAAKxF,KAAL,CAAWF,KAAX,CAAiB2F,MAAjB,CAAwBH,SAAS,CAAC/D,KAAlC,CAAf,CAAyDlB,cAAc,CAAdA,cAAzD,CAAd,EACH,CALD,IAKO,CACHA,cAAc,CAAC,0BAAD,CAAd,CAA6C,EAA7C,CACA,MAAKwE,QAAL,CAAc,CAAExE,cAAc,CAAdA,cAAF,CAAkBmF,WAAW,CAAE,EAA/B,CAAd,EACH,CACJ,CAXD,IAWO,CACHnF,cAAc,CAAC,MAAKR,KAAL,CAAWQ,cAAX,CAA0BqF,wBAA3B,CAAd,CAAqEJ,SAArE,CACA,MAAKT,QAAL,CAAc,CAAExE,cAAc,CAAdA,cAAF,CAAd,EACH,CACJ,CA5fkB,OA6fnBsF,qBA7fmB,CA6fK,SAACf,KAAD,CAAQgB,OAAR,CAAoB,CACxC,GAAIvF,CAAAA,cAAc,CAAGpB,qBAAqB,CAAC,CAAD,CAAI,MAAKY,KAAL,CAAWQ,cAAf,CAA+BuE,KAA/B,CAAsCgB,OAAtC,CAA1C,CACA,MAAKf,QAAL,CAAc,CAAExE,cAAc,CAAdA,cAAF,CAAd,EACH,CAhgBkB,OAigBnBwF,qBAjgBmB,CAigBK,SAACP,SAAD,CAAYM,OAAZ,CAAwB,CAC5C,GAAIvF,CAAAA,cAAc,CAAGpB,qBAAqB,CAAC,CAAD,CAAI,MAAKY,KAAL,CAAWQ,cAAf,CAA+BiF,SAA/B,CAA0CM,OAA1C,CAA1C,CACA,MAAKf,QAAL,CAAc,CAAExE,cAAc,CAAdA,cAAF,CAAd,EACH,CApgBkB,OAqgBnByF,oBArgBmB,CAqgBI,SAACC,QAAD,CAAWH,OAAX,CAAuB,CAC1C,GAAIvF,CAAAA,cAAc,CAAGpB,qBAAqB,CAAC,CAAD,CAAI,MAAKY,KAAL,CAAWQ,cAAf,CAA+B0F,QAA/B,CAAyCH,OAAzC,CAA1C,CACA,MAAKf,QAAL,CAAc,CAAExE,cAAc,CAAdA,cAAF,CAAd,EACH,CAxgBkB,OAygBnB2F,UAzgBmB,CAygBN,UAAM,CACf,MAAK3D,SAAL,CAAe4D,OAAf,CAAuB5E,KAAvB,CAA+B,EAA/B,CACA,GAAML,CAAAA,UAAU,CAAG,CACfC,SAAS,CAAE,CAAE,WAAY,MAAKjB,KAAL,CAAWF,KAAX,CAAiBoB,QAA/B,CADI,CAEfoC,QAAQ,CAAE,WAFK,CAGfD,SAAS,CAAE,WAHI,CAIfM,WAAW,CAAE,eAJE,CAKfzC,QAAQ,CAAE,MAAKlB,KAAL,CAAWF,KAAX,CAAiBoB,QALZ,CAAnB,CAQA,MAAKlB,KAAL,CAAWjC,WAAX,CAAuBiD,UAAvB,EACH,CAphBkB,CAEf,MAAKY,OAAL,CAAe3E,KAAK,CAACiJ,SAAN,EAAf,CACA,MAAK7D,SAAL,CAAiBpF,KAAK,CAACiJ,SAAN,EAAjB,CACA,GAAM5D,CAAAA,SAAS,CAAG,CACd6D,IAAI,CAAE,CADQ,CAEdC,IAAI,CAAE,MAAKpG,KAAL,CAAWF,KAAX,CAAiBuG,QAAjB,CAA4BC,QAAQ,CAAC,MAAKtG,KAAL,CAAWF,KAAX,CAAiBuG,QAAjB,CAA0B,EAA1B,CAAD,CAApC,CAAsE,CAF9D,CAAlB,CAIA,MAAKxG,KAAL,CAAa,CAET0G,YAAY,CAAE,EAFL,CAESC,KAAK,CAAE,EAFhB,CAGTlE,SAAS,CAAEA,SAHF,CAITjC,cAAc,CAAE,EAJP,CAKTmF,WAAW,CAAE,EALJ,CAKQiB,UAAU,CAAEjG,SALpB,CAK+BkG,EAAE,CAAElG,SALnC,CAK8CiF,MAAM,CAAE,EALtD,CAMT1D,qBAAqB,CAAE,EANd,CAOT0C,UAAU,CAAE,GAAIH,CAAAA,GAAJ,EAPH,CAAb,CASA,MAAKP,cAAL,CAAsB,GAAIpE,CAAAA,cAAJ,EAAtB,CAjBe,aAkBlB,C,4CA0MD,iBAAS,iBACL,GAAMgH,CAAAA,WAAW,CAAG,CAChB7D,aAAa,CAAE,WADC,CACYC,cAAc,CAAE,mBAD5B,CACiDC,eAAe,CAAE,gBADlE,CAEhBE,QAAQ,CAAE,+BAFM,CAGhBC,gBAAgB,CAAE,CAAEC,QAAQ,CAAE,KAAKpD,KAAL,CAAWF,KAAX,CAAiBoB,QAA7B,CAHF,CAIhBW,UAAU,CAAE,KAAK7B,KAAL,CAAWF,KAAX,CAAiB+B,UAJb,CAKhB+E,eAAe,CAAE,CAAC,gBAAD,CAAmB,cAAnB,CALD,CAApB,CAQA,GAAMC,CAAAA,cAAc,CAAG,KAAKhH,KAAL,CAAW4E,UAAX,CAAsBqC,GAAtB,CAA0B,cAA1B,GAA6C,KAAKjH,KAAL,CAAW4E,UAAX,CAAsBsC,GAAtB,CAA0B,cAA1B,EAA0C9E,YAA9G,CACA,GAAM+E,CAAAA,eAAe,CAAG,KAAKnH,KAAL,CAAW4E,UAAX,CAAsBqC,GAAtB,CAA0B,eAA1B,GAA8C,KAAKjH,KAAL,CAAW4E,UAAX,CAAsBsC,GAAtB,CAA0B,eAA1B,EAA2C9E,YAAjH,CACA,GAAMgF,CAAAA,iBAAiB,CAAG,KAAKpH,KAAL,CAAW4E,UAAX,CAAsBqC,GAAtB,CAA0B,iBAA1B,GAAgD,KAAKjH,KAAL,CAAW4E,UAAX,CAAsBsC,GAAtB,CAA0B,iBAA1B,EAA6C9E,YAAvH,CACA,GAAMiF,CAAAA,eAAe,CAAG,KAAKrH,KAAL,CAAW4E,UAAX,CAAsBqC,GAAtB,CAA0B,wBAA1B,GAAuD,KAAKjH,KAAL,CAAW4E,UAAX,CAAsBsC,GAAtB,CAA0B,wBAA1B,EAAoD9E,YAAnI,CAGA,KAAKjC,KAAL,CAAWF,KAAX,CAAiBqH,aAAjB,CAAiC,IAAjC,CACA,GAAMC,CAAAA,kBAAkB,CAAG,CACvBlF,UAAU,CAAE,WADW,CACE3B,SAAS,CAAE,QADb,CACuByC,eAAe,CAAE,gBADxC,CAEvBnB,UAAU,CAAE,KAAK7B,KAAL,CAAWF,KAAX,CAAiB+B,UAFN,CAEkBX,QAAQ,CAAE,KAAKlB,KAAL,CAAWF,KAAX,CAAiBoB,QAF7C,CAGvB+B,eAAe,CAAE,KAAKjD,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAA5B,CAAgD,KAAK9B,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAA5B,CAA8Cc,cAA9F,CAA+G,CAAC,CAH1G,CAIvBH,YAAY,CAAEuE,eAJS,CAA3B,CAOA,GAAMK,CAAAA,oBAAoB,CAAG,CACzBnF,UAAU,CAAE,WADa,CACAmB,SAAS,CAAE,WADX,CACwB9C,SAAS,CAAE,QADnC,CAC6CmD,GAAG,CAAE,WADlD,CAC+DjB,YAAY,CAAEwE,iBAD7E,CAEzB5G,cAAc,CAAE,KAAKL,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAA5B,CAAgD,KAAK9B,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAA5E,CAAgG,EAFvF,CAA7B,CAMA,mBACI,qDACI,2BAAK,SAAS,CAAC,4BAAf,eACI,oBAAC,GAAD,EAAK,SAAS,CAAE,IAAhB,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eACI,oBAAC,UAAD,EACI,UAAU,CAAE,KAAK9B,KAAL,CAAWiE,IAAX,CAAgBC,aAAhB,CAA8B,CAAEnD,EAAE,CAAE,eAAN,CAA9B,CADhB,CAEI,UAAU,CAAE,KAAKf,KAAL,CAAWF,KAAX,CAAiB+B,UAFjC,CAGI,QAAQ,CAAE,KAAK7B,KAAL,CAAWF,KAAX,CAAiBoB,QAH/B,CAII,UAAU,CAAE,KAAKlB,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4ByF,YAA5B,EAA4C,KAAKtH,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4B0F,SAJxF,CAKI,eAAe,CAAE,yBAACA,SAAD,QAAe,CAAA,MAAI,CAACvH,KAAL,CAAW7B,mBAAX,CAA+BoJ,SAA/B,CAA0C,MAAI,CAACvH,KAAL,CAAWF,KAAX,CAAiBoB,QAA3D,CAAqE,MAAI,CAAClB,KAAL,CAAWF,KAAX,CAAiB+B,UAAtF,CAAf,EALrB,CAMI,cAAc,CAAE,KAAK7B,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBANhD,CAOI,eAAe,CAAE,gBAPrB,CAQI,SAAS,CAAC,gBARd,CASI,gBAAgB,CAAE,KAAK9B,KAAL,CAAWvB,gBATjC,CAUI,SAAS,CAAE,2BAAM,CAAA,MAAI,CAACuB,KAAL,CAAWzB,sBAAX,CAAkC,IAAlC,CAAwC,WAAxC,CAAqDsI,cAArD,CAAqE,MAAI,CAAC7G,KAAL,CAAWF,KAAX,CAAiBoB,QAAtF,CAAN,EAVf,CAWI,qBAAqB,CAAE,KAAKrB,KAAL,CAAWkC,qBAXtC,CAYI,KAAK,CAAE8E,cAZX,CAaI,SAAS,CAAE,KAAKxE,SAbpB,CAcI,WAAW,CAAEsE,WAdjB,CAeI,UAAU,CAAE,IAfhB,CAgBI,UAAU,CAAE,KAAKX,UAhBrB,EADJ,CADJ,cAqBI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,EACK,KAAKhG,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAA5B,CAAgD0F,MAAM,CAACC,OAAP,CAAe,KAAKzH,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAA3C,EAA8D4F,MAA9D,CAAuE,CAAvE,cAC7C,oBAAC,GAAD,mBACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACI,oBAAC,YAAD,EAAc,SAAS,CAAC,oBAAxB,eACI,oBAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,eACI,oBAAC,IAAD,CAAM,MAAN,mBACI,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,oBAAtB,EACK,KAAK1H,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAA5B,CAA8C6F,cADnD,CADJ,cAII,oBAAC,IAAD,CAAM,QAAN,mBAGI,oBAAC,WAAD,EAAa,SAAS,CAAC,4BAAvB,eACI,oBAAC,GAAD,CAAK,IAAL,EAAU,SAAS,CAAC,kCAApB,CACI,WAAU,KAAK3H,KAAL,CAAWiE,IAAX,CAAgBC,aAAhB,CAA8B,CAAEnD,EAAE,CAAE,UAAN,CAA9B,CACd;AAFA,CAGI,MAAM,CAAE,KAAKlB,KAAL,CAAWkC,qBAAX,CAAiC6F,OAAjC,CAAyCZ,eAAzC,IAA8D,CAAC,CAH3E,CAII,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAChH,KAAL,CAAWxB,wBAAX,CAAoC4I,kBAApC,CAAN,EAEL;AANR,eAQI,oBAAC,eAAD,EAAiB,IAAI,CAAE1J,WAAvB,CAAoC,KAAK,CAAE,KAAKsC,KAAL,CAAWiE,IAAX,CAAgBC,aAAhB,CAA8B,CAAEnD,EAAE,CAAE,UAAN,CAA9B,CAA3C,EARJ,CADJ,cAYI,oBAAC,GAAD,CAAK,IAAL,EAAU,SAAS,CAAC,oDAApB,CACI,WAAU,KAAKf,KAAL,CAAWiE,IAAX,CAAgBC,aAAhB,CAA8B,CAAEnD,EAAE,CAAE,YAAN,CAA9B,CACZ;AAFF,CAGI,MAAM,CAAE,KAAKlB,KAAL,CAAWkC,qBAAX,CAAiC6F,OAAjC,CAAyCX,iBAAzC,IAAgE,CAAC,CAH7E,CAII,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACpD,aAAL,CAAmBwD,oBAAnB,CAAN,EAJb,eAKI,oBAAC,eAAD,EAAiB,IAAI,CAAE1J,UAAvB,EALJ,CAZJ,CAHJ,CAJJ,CADJ,cAyCI,oBAAC,IAAD,CAAM,IAAN,mBAEI,oBAAC,GAAD,mBACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACI,oBAAC,SAAD,mBACI,oBAAC,SAAD,mBAAW,oBAAC,gBAAD,EAAkB,EAAE,CAAC,iBAArB,CAAuC,OAAO,CAAC,aAA/C,EAAX,CADJ,cAEI,oBAAC,YAAD,MAAe,KAAKqC,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BC,iBAA5B,CAA8C+F,YAA7D,CAFJ,CADJ,CADJ,CAFJ,cAWI,oBAAC,GAAD,EAAK,SAAS,CAAE,IAAhB,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACI,oBAAC,IAAD,EAAM,EAAE,CAAC,mBAAT,CAA6B,SAAS,CAAC,kBAAvC,eACI,oBAAC,GAAD,EAAK,SAAS,CAAE,IAAhB,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,eACI,2BAAK,SAAS,CAAC,4BAAf,eAEI,oBAAC,GAAD,CAAK,IAAL,EAAU,SAAS,CAAC,aAApB,CACI,MAAM,CAAE,KAAKhI,KAAL,CAAWkC,qBAAX,CAAiC6F,OAAjC,CAAyCV,eAAzC,IAA8D,CAAC,CAD3E,CAEI,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAClH,KAAL,CAAWzB,sBAAX,CAAkC,IAAlC,CAAwC,kBAAxC,CAA4D2I,eAA5D,CAA6E,MAAI,CAAClH,KAAL,CAAWF,KAAX,CAAiBoB,QAA9F,CAAN,EAFb,eAII,oBAAC,eAAD,EAAiB,IAAI,CAAEzD,MAAvB,EAJJ,kBAKI,oBAAC,gBAAD,EAAkB,EAAE,CAAC,aAArB,CAAmC,cAAc,CAAC,SAAlD,EALJ,CAFJ,CADJ,CADJ,CADJ,cAeI,oBAAC,GAAD,EAAK,SAAS,CAAE,IAAhB,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,EACK,KAAKuC,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BiG,gBAA5B,EAAgD,KAAK9H,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BiG,gBAA5B,CAA6CJ,MAA7C,CAAsD,CAAtG,cACG,oBAAC,eAAD,EACI,GAAG,CAAC,kBADR,CAEI,cAAc,CAAE,uBAFpB,CAGI,kBAAkB,CAAE,KAAKvD,yBAAL,CAA+B,KAAKnE,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BiG,gBAA3D,CAHxB,CAII,UAAU,CAAE,CAAEjG,UAAU,CAAE,KAAK7B,KAAL,CAAWF,KAAX,CAAiB+B,UAA/B,CAA2CX,QAAQ,CAAE,KAAKlB,KAAL,CAAWF,KAAX,CAAiBoB,QAAtE,CAJhB,CAKI,cAAc,CAAE,KAAKlB,KAAL,CAAW5B,YAL/B,CAMI,mBAAmB,CAAE,uBANzB,CAOI,mBAAmB,CAAE,SAPzB,CAQI,WAAW,CAAE,KAAK4B,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BO,eAA5B,CAA4CO,qBAR7D,EADH,CAWK,EAZV,CADJ,CAfJ,CADJ,CADJ,CAXJ,CAzCJ,CADJ,CADJ,CADJ,CAD6C,CAkG3C,EAlGL,CAkGU,EAnGf,CArBJ,CADJ,CADJ,CA+HK,KAAK3C,KAAL,CAAWF,KAAX,CAAiBS,SAAjB,EAA8B,KAAKP,KAAL,CAAWF,KAAX,CAAiBkB,UAA/C,EAA6D,KAAKhB,KAAL,CAAWF,KAAX,CAAiBiB,EAA9E,eACG,oBAAC,cAAD,EACI,KAAK,CAAE,KAAKf,KAAL,CAAWF,KADtB,CAEI,MAAM,CAAE,KAAKE,KAAL,CAAWF,KAAX,CAAiBiB,EAAjB,CAAsB,KAAKf,KAAL,CAAWF,KAAX,CAAiBiB,EAAjB,GAAwB,WAAxB,CAAsC,KAAKf,KAAL,CAAWF,KAAX,CAAiBK,SAAvD,CAAmE,KAAKH,KAAL,CAAWF,KAAX,CAAiBM,cAA1G,CAA2H,KAFvI,CAGI,eAAe,CAAE,KAAK0E,eAH1B,CAII,WAAW,CAAE,KAAK7E,WAJtB,CAKI,WAAW,CAAE,KAAKyB,WALtB,CAMI,aAAa,CAAE,KAAK2D,aANxB,CAOI,EAAE,CAAE,KAAKrF,KAAL,CAAWF,KAAX,CAAiBiB,EAAjB,CAAsB,KAAKf,KAAL,CAAWF,KAAX,CAAiBiB,EAAvC,CAA4C,EAPpD,CAQI,SAAS,CAAE,KAAKf,KAAL,CAAWF,KAAX,CAAiBS,SAAjB,CAA6B,KAAKP,KAAL,CAAWF,KAAX,CAAiBS,SAA9C,CAA0D,EARzE,CASI,cAAc,CAAE,KAAKV,KAAL,CAAWQ,cAT/B,CAUI,UAAU,CAAE,KAAKL,KAAL,CAAWF,KAAX,CAAiB2G,UAVjC,CAWI,mBAAmB,CAAE,KAAKzG,KAAL,CAAWF,KAAX,CAAiBqC,mBAX1C,CAYI,EAAE,CAAE,KAAKnC,KAAL,CAAWF,KAAX,CAAiB4G,EAZzB,CAaI,WAAW,CAAE,KAAK7G,KAAL,CAAWQ,cAAX,CAA4B,KAAKR,KAAL,CAAW2F,WAAvC,CAAqD,EAbtE,CAcI,aAAa,CAAE,KAAK3E,aAdxB,EAhIR,CAiJK,KAAKb,KAAL,CAAWF,KAAX,CAAiBQ,YAAjB,EAAiC,KAAKN,KAAL,CAAWF,KAAX,CAAiBQ,YAAjB,CAA8BoH,MAA9B,CAAuC,CAAxE,cACG,oBAAC,YAAD,EACI,YAAY,CAAE,KAAK1H,KAAL,CAAWF,KAAX,CAAiBQ,YADnC,CAEI,cAAc,CAAE,KAAKN,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,CAA4BO,eAA5B,CAA4C2F,kBAA5C,GAAmEzI,iBAAiB,CAAC0I,KAArF,CAA6F,IAA7F,CAAoG,KAFxH,CAGI,OAAO,CAAE,KAAKpG,OAHlB,CAII,qBAAqB,CAAE,KAAK+D,qBAJhC,CAKI,WAAW,CAAE,KAAK1F,WALtB,CAMI,qBAAqB,CAAE,KAAK4F,qBANhC,CAOI,WAAW,CAAE,KAAK7F,KAAL,CAAW1B,cAP5B,CAQI,KAAK,CAAE,KAAK0B,KAAL,CAAWF,KARtB,CASI,UAAU,CAAE,KAAKE,KAAL,CAAWF,KAAX,CAAiBmI,iBATjC,CAUI,cAAc,CAAE,KAAKpI,KAAL,CAAWQ,cAV/B,CAWI,oBAAoB,CAAE,KAAKyF,oBAX/B,EADH,CAaQ,EA9Jb,CADJ,CAmKH,C,kCACD,4BAAmBoC,aAAnB,CAAkC,CAC9B,GAAI,KAAKlI,KAAL,CAAWF,KAAX,CAAiBO,cAAjB,GAAoC6H,aAAa,CAACpI,KAAd,CAAoBO,cAA5D,CAA4E,CACxE,KAAKwE,QAAL,CAAc,CAAExE,cAAc,CAAE,KAAKL,KAAL,CAAWF,KAAX,CAAiBO,cAAnC,CAAd,EACH,CACD,GAAI,KAAKL,KAAL,CAAWF,KAAX,CAAiBoB,QAAjB,CAA0Bc,SAA1B,GAAwCkG,aAAa,CAACpI,KAAd,CAAoBoB,QAApB,CAA6Bc,SAAzE,CAAoF,CAChF,GAAMD,CAAAA,qBAAqB,CAAG,EAA9B,CACA,GAAI,KAAK/B,KAAL,CAAWF,KAAX,CAAiBiC,qBAArB,CAA4C,CACxC,KAAK/B,KAAL,CAAWF,KAAX,CAAiBiC,qBAAjB,CAAuC,KAAK/B,KAAL,CAAWF,KAAX,CAAiBoB,QAAjB,CAA0Bc,SAAjE,GAA+EwF,MAAM,CAACW,MAAP,CAAc,KAAKnI,KAAL,CAAWF,KAAX,CAAiBiC,qBAAjB,CAAuC,KAAK/B,KAAL,CAAWF,KAAX,CAAiBoB,QAAjB,CAA0Bc,SAAjE,CAAd,EAA2FuC,GAA3F,CAA+F,SAAA6D,IAAI,QAC9KrG,CAAAA,qBAAqB,CAACsG,IAAtB,CAA2BD,IAAI,CAACnG,YAAhC,CAD8K,EAAnG,CAA/E,CAEH,CACD,GAAMwC,CAAAA,UAAU,CAAGrF,aAAa,CAAC,KAAKY,KAAL,CAAWF,KAAX,CAAiBiC,qBAAlB,CAAyC,KAAK/B,KAAL,CAAWF,KAAX,CAAiBoB,QAAjB,CAA0Bc,SAAnE,CAAhC,CACA,KAAK6C,QAAL,CAAc,CAAE9C,qBAAqB,CAArBA,qBAAF,CAAyB0C,UAAU,CAAVA,UAAzB,CAAd,EACH,CACD,GAAI,KAAKzE,KAAL,CAAWF,KAAX,CAAiB+B,UAAjB,GAAgCqG,aAAa,CAACpI,KAAd,CAAoB+B,UAAxD,CAAoE,CAChE,GAAMS,CAAAA,SAAN,CAAoB,KAAKzC,KAAzB,CAAMyC,SAAN,CACA,GAAI,KAAKtC,KAAL,CAAWF,KAAX,CAAiBwC,SAAjB,GAA+B9B,SAAnC,CAA8C,CAC1C8B,SAAS,CAAG,CAAE6D,IAAI,CAAE,CAAR,CAAYC,IAAI,CAAE,KAAKpG,KAAL,CAAWF,KAAX,CAAiBuG,QAAjB,CAA4BC,QAAQ,CAAC,KAAKtG,KAAL,CAAWF,KAAX,CAAiBuG,QAAjB,CAA0B,EAA1B,CAAD,CAApC,CAAsE,CAAxF,CAAZ,CACA,KAAKxB,QAAL,CAAc,CAAEvC,SAAS,CAATA,SAAF,CAAd,EACH,CAEJ,CACJ,C,oCAOD,+BAAuB,CACnB,GAAM7B,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAExB,cADK,CAEfyB,IAAI,CAAE,CACFkB,UAAU,CAAE,EADV,CACcb,UAAU,CAAER,SAD1B,CACqCD,SAAS,CAAE,IADhD,CACsDO,SAAS,CAAEN,SADjE,CAFS,CAAnB,CAMA,KAAKR,KAAL,CAAW9B,WAAX,CAAuBuC,UAAvB,EACH,C,0CArPD,kCAAgCT,KAAhC,CAAuCH,KAAvC,CAA8C,CAE1C,GAAIG,KAAK,CAACF,KAAN,CAAYyG,YAAZ,GAA6B,EAA7B,EAAmCvG,KAAK,CAACF,KAAN,CAAYyG,YAAZ,GAA6B1G,KAAK,CAAC0G,YAA1E,CAAwF,CACpF5H,KAAK,CAAC2J,IAAN,CAAWtI,KAAK,CAACF,KAAN,CAAYyG,YAAvB,EACAvG,KAAK,CAACF,KAAN,CAAYyG,YAAZ,CAA2B,EAA3B,CACH,CAED,GAAIvG,KAAK,CAACF,KAAN,CAAY0G,KAAZ,GAAsB3G,KAAK,CAAC2G,KAAhC,CAAuC,CACnC7H,KAAK,CAAC6H,KAAN,CAAYxG,KAAK,CAACF,KAAN,CAAY0G,KAAxB,EACAxG,KAAK,CAACF,KAAN,CAAY0G,KAAZ,CAAoB,EAApB,CACH,CACD,GAAIxG,KAAK,CAACF,KAAN,CAAYO,cAAZ,GAA+BG,SAAnC,CAA8C,CAC1C,MAAO,CAAEH,cAAc,CAAE,EAAlB,CAAP,CACH,CACD,MAAO,KAAP,CACH,C,uBA5NmBpD,KAAK,CAACsL,S,EAuhB9B,cAAe3K,CAAAA,OAAO,CAACgC,eAAD,CAAkB,CACpC7B,WAAW,CAAXA,WADoC,CACvBC,UAAU,CAAVA,UADuB,CACXC,uBAAuB,CAAvBA,uBADW,CACcC,WAAW,CAAXA,WADd,CAC2BC,mBAAmB,CAAnBA,mBAD3B,CACgDC,YAAY,CAAZA,YADhD,CAC8DC,mBAAmB,CAAnBA,mBAD9D,CACmFC,cAAc,CAAdA,cADnF,CAEpCC,sBAAsB,CAAtBA,sBAFoC,CAEZC,wBAAwB,CAAxBA,wBAFY,CAEcC,gBAAgB,CAAhBA,gBAFd,CAAlB,CAAP,CAGZZ,UAAU,CAACkC,SAAD,CAHE,CAAf","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faPencilAlt, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, FormattedMessage } from 'react-intl';\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, getChecklistVersion, getVersionQB, viewVersionTemplate, onSaveTemplate,\r\n    showChecklistAddScreen, fetchChecklistRecordByID, filterColumnData\r\n} from '../../../actions';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { toast } from 'react-toastify';\r\nimport TemplateForm from './TemplateForm';\r\nimport ListMaster from '../../../components/list-master/list-master.component';\r\nimport ChecklistForms from './ChecklistForms';\r\nimport { getSaveInputData, versionCreate, templateChangeHandler } from './checklistMethods'\r\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes';\r\nimport { showEsign, getControlMap } from '../../../components/CommonScript';\r\n// import ConfirmDialog from '../../../components/confirm-alert/confirm-alert.component';\r\nimport { ProductList } from '../../testmanagement/testmaster-styled';\r\nimport { transactionStatus } from '../../../components/Enumeration';\r\nimport CustomAccordion from '../../../components/custom-accordion/custom-accordion.component';\r\nimport ChecklistVersionAccordion from './ChecklistVersionAccordion';\r\nimport { ContentPanel, ReadOnlyText } from '../../../components/App.styles';\r\n// import { Tooltip } from '@progress/kendo-react-tooltip';\r\nimport ConfirmMessage from '../../../components/confirm-alert/confirm-message.component';\r\n// import ReactTooltip from 'react-tooltip';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass Checklist extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.formRef = React.createRef();\r\n        this.searchRef = React.createRef();\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\r\n        };\r\n        this.state = {\r\n\r\n            masterStatus: \"\", error: \"\",\r\n            dataState: dataState,\r\n            selectedRecord: {},\r\n            availableQB: [], QBCategory: undefined, QB: undefined, listQb: {},\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n        };\r\n        this.confirmMessage = new ConfirmMessage();\r\n    }\r\n\r\n    handleClose = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let openChildModal = this.props.Login.openChildModal\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let templateData = this.props.Login.templateData;\r\n        let operation = this.props.Login.operation\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"approve\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n                templateData = {};\r\n                operation = undefined\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n            templateData = {}\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, openChildModal, loadEsign, selectedRecord, templateData, selectedId: null, operation }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    };\r\n    validateEsign = () => {\r\n        let modalName = this.props.Login.id === 'checklist' ? 'openModal' : 'openChildModal'\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, modalName);\r\n    }\r\n    onSaveClick = (saveType, formRef) => {\r\n        let modalName = \"\";\r\n        if (this.props.Login.id === 'checklistversion') {\r\n            if (this.props.Login.masterData.selectedchecklist) {\r\n\r\n                let inputParam = versionCreate(this.state.selectedRecord, this.props.Login.masterData.selectedchecklist, this.props.Login)\r\n\r\n                const masterData = this.props.Login.masterData;\r\n\r\n                if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolcode)) {\r\n                    const updateInfo = {\r\n                        typeName: DEFAULT_RETURN,\r\n                        data: {\r\n                            loadEsign: true, screenData: { inputParam, masterData }, openChildModal: true, operation: this.props.Login.operation, screenName: '', id: this.props.Login.id\r\n                        }\r\n                    }\r\n                    this.props.updateStore(updateInfo);\r\n                }\r\n                else {\r\n                    this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n                }\r\n            }\r\n        } else {\r\n            modalName = this.props.Login.id === 'checklist' ? 'openModal' : 'openChildModal'\r\n            let inputParam = getSaveInputData(this.props.Login.id, this.props.Login.operation, this.props.Login,\r\n                this.props.Login.availableQBCategory, this.state.selectedRecord, this.props.Login.masterData.selectedversion, formRef, this.searchRef, this.state.dataState)\r\n\r\n\r\n            const masterData = this.props.Login.masterData;\r\n\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolcode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData }, saveType,\r\n                        operation: this.props.Login.operation, id: this.props.Login.id\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, masterData, modalName);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    approveVersion = (version, ncontrolCode) => {\r\n\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        inputData[\"checklistversion\"] = {\r\n            \"schecklistversionname\": version.schecklistversionname,\r\n            \"nchecklistversioncode\": version.nchecklistversioncode,\r\n            \"nchecklistcode\": version.nchecklistcode\r\n        }\r\n        const postParam = {\r\n            inputListName: \"checklist\", selectedObject: \"selectedchecklist\",\r\n            primaryKeyField: \"nchecklistcode\",\r\n            primaryKeyValue: this.props.Login.masterData.selectedchecklist.nchecklistcode,\r\n            fetchUrl: \"checklist/getChecklistVersion\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"ChecklistVersion\",\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData, postParam,\r\n            operation: \"approve\"\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, openChildModal: true, operation: 'approve', screenName: '', id: 'checklistversion'\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n        }\r\n    }\r\n\r\n\r\n    //to delete a recoed\r\n    deleteRecord = (qbDeleteParam) => {\r\n        let modalName = 'openChildModal'\r\n        let selectedRecord = qbDeleteParam.selectedRecord\r\n        delete selectedRecord.expanded\r\n        let postParam = undefined\r\n        if (qbDeleteParam.methodUrl === 'Checklist') {\r\n            postParam = {\r\n                inputListName: \"checklist\", selectedObject: \"selectedchecklist\",\r\n                primaryKeyField: \"nchecklistcode\",\r\n                primaryKeyValue: this.props.Login.masterData.selectedchecklist.nchecklistcode,\r\n                fetchUrl: \"checklist/getChecklistVersion\",\r\n                fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n\r\n            }\r\n            modalName = 'openModal'\r\n        }\r\n        const inputParam = {\r\n            methodUrl: qbDeleteParam.methodUrl,\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: { [qbDeleteParam.key]: selectedRecord, \"userinfo\": this.props.Login.userInfo },\r\n            operation: \"delete\", postParam,\r\n            displayName: qbDeleteParam.methodUrl,\r\n            dataState: this.state.dataState\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, qbDeleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, [modalName]: true,\r\n                    operation: 'delete', screenName: qbDeleteParam.methodUrl, id: qbDeleteParam.methodUrl.toLowerCase()\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, modalName);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n    render() {\r\n        const filterParam = {\r\n            inputListName: \"checklist\", selectedObject: \"selectedchecklist\", primaryKeyField: \"nchecklistcode\",\r\n            fetchUrl: \"checklist/getChecklistVersion\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData,\r\n            searchFieldList: [\"schecklistname\", \"sdescription\"]\r\n        }\r\n\r\n        const addChecklistId = this.state.controlMap.has(\"AddChecklist\") && this.state.controlMap.get(\"AddChecklist\").ncontrolcode;\r\n        const editChecklistId = this.state.controlMap.has(\"EditChecklist\") && this.state.controlMap.get(\"EditChecklist\").ncontrolcode;\r\n        const deleteChecklistId = this.state.controlMap.has(\"DeleteChecklist\") && this.state.controlMap.get(\"DeleteChecklist\").ncontrolcode\r\n        const createVersionId = this.state.controlMap.has(\"CreateChecklistVersion\") && this.state.controlMap.get(\"CreateChecklistVersion\").ncontrolcode\r\n\r\n\r\n        this.props.Login.showAccordion = true;\r\n        const checklistEditParam = {\r\n            screenName: \"Checklist\", operation: \"update\", primaryKeyField: \"nchecklistcode\",\r\n            masterData: this.props.Login.masterData, userInfo: this.props.Login.userInfo,\r\n            primaryKeyValue: this.props.Login.masterData.selectedchecklist ? this.props.Login.masterData.selectedchecklist.nchecklistcode : -1,\r\n            ncontrolCode: editChecklistId\r\n        };\r\n\r\n        const checklistDeleteParam = {\r\n            screenName: \"Checklist\", methodUrl: \"Checklist\", operation: \"delete\", key: 'checklist', ncontrolCode: deleteChecklistId,\r\n            selectedRecord: this.props.Login.masterData.selectedchecklist ? this.props.Login.masterData.selectedchecklist : {}\r\n        };\r\n\r\n\r\n        return (\r\n            <>\r\n                <div className=\"client-listing-wrap mtop-4\">\r\n                    <Row noGutters={true}>\r\n                        <Col md={4}>\r\n                            <ListMaster\r\n                                screenName={this.props.intl.formatMessage({ id: \"IDS_CHECKLIST\" })}\r\n                                masterData={this.props.Login.masterData}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.checklist}\r\n                                getMasterDetail={(checklist) => this.props.getChecklistVersion(checklist, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                                selectedMaster={this.props.Login.masterData.selectedchecklist}\r\n                                primaryKeyField={\"nchecklistcode\"}\r\n                                mainField=\"schecklistname\"\r\n                                filterColumnData={this.props.filterColumnData}\r\n                                openModal={() => this.props.showChecklistAddScreen(null, 'checklist', addChecklistId, this.props.Login.userInfo)}\r\n                                userRoleControlRights={this.state.userRoleControlRights}\r\n                                addId={addChecklistId}\r\n                                searchRef={this.searchRef}\r\n                                filterParam={filterParam}\r\n                                hidePaging={true}\r\n                                reloadData={this.reloadData}\r\n                            />\r\n                        </Col>\r\n                        <Col md={8}>\r\n                            {this.props.Login.masterData.selectedchecklist ? Object.entries(this.props.Login.masterData.selectedchecklist).length > 0 ?\r\n                                <Row>\r\n                                    <Col md={12}>\r\n                                        <ContentPanel className=\"panel-main-content\">\r\n                                            <Card className=\"border-0\">\r\n                                                <Card.Header>\r\n                                                    <Card.Title className=\"product-title-main\">\r\n                                                        {this.props.Login.masterData.selectedchecklist.schecklistname}\r\n                                                    </Card.Title>\r\n                                                    <Card.Subtitle>\r\n                                                        {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n                                                        {/* <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" /> */}\r\n                                                        <ProductList className=\"d-flex justify-content-end\">\r\n                                                            <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_EDIT\" })}\r\n                                                            //    data-for=\"tooltip_list_wrap\"\r\n                                                                hidden={this.state.userRoleControlRights.indexOf(editChecklistId) === -1}\r\n                                                                onClick={() => this.props.fetchChecklistRecordByID(checklistEditParam)\r\n\r\n                                                                    //\"Checklist\",\"nchecklistcode\",this.props.Login.masterData.selectedchecklist.nchecklistcode)\r\n                                                                }>\r\n                                                                <FontAwesomeIcon icon={faPencilAlt} title={this.props.intl.formatMessage({ id: \"IDS_EDIT\" })} />\r\n                                                            </Nav.Link>\r\n\r\n                                                            <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                                                              //  data-for=\"tooltip_list_wrap\"\r\n                                                                hidden={this.state.userRoleControlRights.indexOf(deleteChecklistId) === -1}\r\n                                                                onClick={() => this.ConfirmDelete(checklistDeleteParam)}>\r\n                                                                <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                                {/* <ConfirmDialog\r\n                                                                        name=\"deleteMessage\"\r\n                                                                        message={this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" })}\r\n                                                                        doLabel={this.props.intl.formatMessage({ id: \"IDS_OK\" })}\r\n                                                                        doNotLabel={this.props.intl.formatMessage({ id: \"IDS_CANCEL\" })}\r\n                                                                        icon={faTrashAlt}\r\n                                                                        //title={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                                                                        hidden={this.state.userRoleControlRights.indexOf(deleteChecklistId) === -1}\r\n                                                                        handleClickDelete={() => this.deleteRecord(checklistDeleteParam)}\r\n                                                                    /> */}\r\n                                                            </Nav.Link>\r\n                                                        </ProductList>\r\n                                                        {/* </Tooltip> */}\r\n                                                    </Card.Subtitle>\r\n                                                </Card.Header>\r\n                                                <Card.Body>\r\n                                                    {/* <Card.Text> */}\r\n                                                    <Row>\r\n                                                        <Col md={12}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel><FormattedMessage id=\"IDS_DESCRIPTION\" message=\"Description\" /></FormLabel>\r\n                                                                <ReadOnlyText>{this.props.Login.masterData.selectedchecklist.sdescription}</ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                    {/* </Card.Text> */}\r\n                                                    <Row noGutters={true}>\r\n                                                        <Col md={12}>\r\n                                                            <Card id=\"checklistvsersion\" className=\"at-tabs border-0\">\r\n                                                                <Row noGutters={true} >\r\n                                                                    <Col md={12}>\r\n                                                                        <div className=\"d-flex justify-content-end\">\r\n                                                                            {/* <ReactTooltip place=\"bottom\" globalEventOff='click' /> */}\r\n                                                                            <Nav.Link className=\"add-txt-btn\"\r\n                                                                                hidden={this.state.userRoleControlRights.indexOf(createVersionId) === -1}\r\n                                                                                onClick={() => this.props.showChecklistAddScreen(null, 'checklistversion', createVersionId, this.props.Login.userInfo)}\r\n                                                                            >\r\n                                                                                <FontAwesomeIcon icon={faPlus} /> { }\r\n                                                                                <FormattedMessage id='IDS_VERSION' defaultMessage='Version' />\r\n                                                                            </Nav.Link>\r\n                                                                        </div>\r\n                                                                    </Col>\r\n                                                                </Row>\r\n                                                                <Row noGutters={true}>\r\n                                                                    <Col md={12}>\r\n                                                                        {this.props.Login.masterData.checklistversion && this.props.Login.masterData.checklistversion.length > 0 ?\r\n                                                                            <CustomAccordion\r\n                                                                                key=\"ChecklistVersion\"\r\n                                                                                accordionTitle={\"schecklistversionname\"}\r\n                                                                                accordionComponent={this.checklistVersionAccordion(this.props.Login.masterData.checklistversion)}\r\n                                                                                inputParam={{ masterData: this.props.Login.masterData, userInfo: this.props.Login.userInfo }}\r\n                                                                                accordionClick={this.props.getVersionQB}\r\n                                                                                accordionPrimaryKey={\"nchecklistversioncode\"}\r\n                                                                                accordionObjectName={\"version\"}\r\n                                                                                selectedKey={this.props.Login.masterData.selectedversion.nchecklistversioncode}\r\n                                                                            />\r\n                                                                            : \"\"}\r\n                                                                    </Col>\r\n                                                                </Row>\r\n\r\n                                                            </Card>\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                </Card.Body>\r\n                                            </Card>\r\n                                        </ContentPanel>\r\n                                    </Col>\r\n                                </Row>\r\n                                : \"\" : \"\"}\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n\r\n                {this.props.Login.operation && this.props.Login.inputParam && this.props.Login.id &&\r\n                    <ChecklistForms\r\n                        Login={this.props.Login}\r\n                        isOpen={this.props.Login.id ? this.props.Login.id === 'checklist' ? this.props.Login.openModal : this.props.Login.openChildModal : false}\r\n                        onInputOnChange={this.onInputOnChange}\r\n                        handleClose={this.handleClose}\r\n                        onSaveClick={this.onSaveClick}\r\n                        onComboChange={this.onComboChange}\r\n                        id={this.props.Login.id ? this.props.Login.id : \"\"}\r\n                        operation={this.props.Login.operation ? this.props.Login.operation : ''}\r\n                        selectedRecord={this.state.selectedRecord}\r\n                        QBCategory={this.props.Login.QBCategory}\r\n                        availableQBCategory={this.props.Login.availableQBCategory}\r\n                        QB={this.props.Login.QB}\r\n                        availableQB={this.state.selectedRecord ? this.state.availableQB : []}\r\n                        validateEsign={this.validateEsign}\r\n                    />\r\n                }\r\n                {this.props.Login.templateData && this.props.Login.templateData.length > 0 ?\r\n                    <TemplateForm\r\n                        templateData={this.props.Login.templateData}\r\n                        needSaveButton={this.props.Login.masterData.selectedversion.ntransactionstatus === transactionStatus.DRAFT ? true : false}\r\n                        formRef={this.formRef}\r\n                        onTemplateInputChange={this.onTemplateInputChange}\r\n                        handleClose={this.handleClose}\r\n                        onTemplateComboChange={this.onTemplateComboChange}\r\n                        onSaveClick={this.props.onSaveTemplate}\r\n                        Login={this.props.Login}\r\n                        viewScreen={this.props.Login.openTemplateModal}\r\n                        selectedRecord={this.state.selectedRecord}\r\n                        onTemplateDateChange={this.onTemplateDateChange}\r\n                    /> : \"\"\r\n                }\r\n            </>\r\n        );\r\n    }\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n        if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n            const userRoleControlRights = [];\r\n            if (this.props.Login.userRoleControlRights) {\r\n                this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                    userRoleControlRights.push(item.ncontrolcode))\r\n            }\r\n            const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n            this.setState({ userRoleControlRights, controlMap });\r\n        }\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            let { dataState } = this.state;\r\n            if (this.props.Login.dataState === undefined) {\r\n                dataState = { skip: 0 , take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5}\r\n                this.setState({ dataState });\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    ConfirmDelete = (deleteParam) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.deleteRecord(deleteParam));\r\n    }\r\n    componentWillUnmount() {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                masterData: [], inputParam: undefined, operation: null, modalName: undefined\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    checklistVersionAccordion = (versionList) => {\r\n        const accordionMap = new Map();\r\n        versionList.map((version) =>\r\n            accordionMap.set(version.nchecklistversioncode,\r\n                <ChecklistVersionAccordion\r\n                    version={version}\r\n                    userRoleControlRights={this.state.userRoleControlRights}\r\n                    controlMap={this.state.controlMap}\r\n                    userInfo={this.props.Login.userInfo}\r\n                    masterData={this.props.Login.masterData}\r\n                    inputParam={this.props.Login.inputParam}\r\n                    showChecklistAddScreen={this.props.showChecklistAddScreen}\r\n                    dataResult={process(this.props.Login.masterData.checklistversionqb ? this.props.Login.masterData.checklistversionqb : [], this.state.dataState)}\r\n                    dataState={this.state.dataState}\r\n                    dataStateChange={this.dataStateChange}\r\n                    fetchChecklistRecordByID={this.props.fetchChecklistRecordByID}\r\n                    ConfirmDelete={this.ConfirmDelete}\r\n                    selectedId={this.props.Login.selectedId}\r\n                    approveVersion={this.approveVersion}\r\n                    deleteRecord={this.deleteRecord}\r\n                    viewVersionTemplate={this.props.viewVersionTemplate}\r\n                />)\r\n        )\r\n        return accordionMap;\r\n    }\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (fieldName === \"nchecklistqbcategorycode\") {\r\n            //only go inside when combo has value\r\n            if (comboData) {\r\n                selectedRecord[\"schecklistqbcategoryname\"] = comboData.label;\r\n                selectedRecord[selectedRecord[\"schecklistqbcategoryname\"]] = this.state.selectedRecord ? this.state.selectedRecord[comboData.label] ?\r\n                    this.state.selectedRecord[comboData.label] : \"\" : \"\"\r\n                this.setState({ availableQB: this.props.Login.listQb[comboData.label], selectedRecord });\r\n            } else {\r\n                selectedRecord[\"schecklistqbcategoryname\"] = \"\"\r\n                this.setState({ selectedRecord, availableQB: [] });\r\n            }\r\n        } else {\r\n            selectedRecord[this.state.selectedRecord.schecklistqbcategoryname] = comboData\r\n            this.setState({ selectedRecord })\r\n        }\r\n    }\r\n    onTemplateInputChange = (event, control) => {\r\n        let selectedRecord = templateChangeHandler(1, this.state.selectedRecord, event, control)\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onTemplateComboChange = (comboData, control) => {\r\n        let selectedRecord = templateChangeHandler(2, this.state.selectedRecord, comboData, control)\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onTemplateDateChange = (dateData, control) => {\r\n        let selectedRecord = templateChangeHandler(3, this.state.selectedRecord, dateData, control)\r\n        this.setState({ selectedRecord });\r\n    }\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: \"checklist\",\r\n            methodUrl: \"Checklist\",\r\n            displayName: \"IDS_CHECKLIST\",\r\n            userInfo: this.props.Login.userInfo\r\n        };\r\n\r\n        this.props.callService(inputParam);\r\n    }\r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, validateEsignCredential, updateStore, getChecklistVersion, getVersionQB, viewVersionTemplate, onSaveTemplate,\r\n    showChecklistAddScreen, fetchChecklistRecordByID, filterColumnData\r\n})(injectIntl(Checklist));"]},"metadata":{},"sourceType":"module"}