{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport { BaseView } from '../../components/BaseView';\nimport { useCellSync, useRowSync } from '../../hooks';\nimport { Day, MS_PER_DAY, MS_PER_MINUTE, getDate, ZonedDate, addDays } from '@progress/kendo-date-math';\nimport { HorizontalResourceIterator } from '../common/HorizontalResourceIterator';\nimport { TimelineViewRowContent } from './TimelineViewRowContent';\nimport { TimelineViewAllEventsRowContent } from './TimelineViewAllEventsRowContent';\nimport { VerticalResourceIterator } from '../common/VerticalResourceIterator';\nimport { mapItemsToSlots, mapSlotsToItems, isInTimeRange, toUTCDateTime, intersects, first, last, orderSort, isInDaysRange } from '../../utils';\nimport { classNames } from '@progress/kendo-react-common';\nimport { toRanges } from '../../services/rangeService';\nimport { toSlots } from '../../services/slotsService';\nimport { toOccurrences } from '../../services/occurrenceService';\nimport { toItems } from '../../services/itemsService';\nimport { SchedulerEditSlot } from '../../slots/SchedulerEditSlot';\nimport { BORDER_WIDTH } from '../../constants';\nimport { useInternationalization } from '@progress/kendo-react-intl';\nimport { SchedulerEditItem } from '../../items/SchedulerEditItem';\nimport { useSchedulerDataContext, useSchedulerPropsContext, useSchedulerGroupsContext, useSchedulerFieldsContext, useSchedulerDateRangeContext, useSchedulerOrientationContext } from '../../context/SchedulerContext';\nimport { SchedulerResourceIteratorContext } from '../../context/SchedulerResourceIteratorContext';\nimport { CurrentTimeMarker } from '../../components/CurrentTimeMarket';\nimport { DateHeaderCell } from '../../components/DateHeaderCell';\nimport { TimeHeaderCell } from '../../components/TimeHeaderCell';\nvar TIME_FORMAT = 't';\nvar FIRST_INDEX = 0;\n/**\n * @hidden\n */\n\nexport var MultiDayTimelineView = function MultiDayTimelineView(props) {\n  var _a = useSchedulerPropsContext(),\n      group = _a.group,\n      timezone = _a.timezone,\n      propResources = _a.resources;\n\n  var timeRef = React.useRef(null);\n  var bodyRef = React.useRef(null);\n  var EditItem = props.editItem || SchedulerEditItem;\n  var EditSlot = props.editSlot || SchedulerEditSlot;\n  var element = React.useRef(null);\n  var data = useSchedulerDataContext()[0];\n  var orientation = useSchedulerOrientationContext();\n  var groups = useSchedulerGroupsContext();\n  var dateRange = useSchedulerDateRangeContext();\n  var fields = useSchedulerFieldsContext();\n  var intl = useInternationalization();\n  var showWorkHours = props.showWorkHours;\n  var slotDivisions = props.slotDivisions || defaultProps.slotDivisions;\n  var slotDuration = props.slotDuration || defaultProps.slotDuration;\n  var workWeekStart = props.workWeekStart || defaultProps.workWeekStart;\n  var workWeekEnd = props.workWeekEnd || defaultProps.workWeekEnd;\n  var workDayStart = intl.parseDate(props.workDayStart || props.isWorkDayStart || defaultProps.isWorkDayStart);\n  var workDayEnd = intl.parseDate(props.workDayEnd || props.isWorkDayEnd || defaultProps.isWorkDayEnd);\n  var startTime = intl.parseDate(props.startTime || defaultProps.startTime);\n  var endTime = intl.parseDate(props.endTime || defaultProps.endTime);\n  var viewStart = React.useMemo(function () {\n    return showWorkHours ? workDayStart : startTime;\n  }, [showWorkHours, workDayStart, startTime]);\n  var viewEnd = React.useMemo(function () {\n    return showWorkHours ? workDayEnd : endTime;\n  }, [showWorkHours, workDayEnd, endTime]);\n  var ranges = React.useMemo(function () {\n    return toRanges(dateRange, {\n      step: MS_PER_DAY,\n      timezone: timezone\n    });\n  }, [dateRange.start.getTime(), dateRange.end.getTime(), timezone]);\n  var slots = React.useMemo(function () {\n    return toSlots(dateRange, {\n      step: slotDuration / slotDivisions * MS_PER_MINUTE\n    }, {\n      groups: groups,\n      ranges: ranges\n    }).filter(function (slot) {\n      return isInTimeRange(slot.zonedStart, viewStart, viewEnd) || viewStart.getTime() === viewEnd.getTime();\n    });\n  }, [groups, ranges, dateRange.start.getTime(), dateRange.end.getTime(), timezone, slotDuration, slotDivisions, viewStart.getTime(), viewEnd.getTime()]);\n  var occurrences = React.useMemo(function () {\n    return toOccurrences(data, {\n      dateRange: dateRange,\n      fields: fields,\n      timezone: timezone\n    });\n  }, [data, dateRange.start.getTime(), dateRange.end.getTime(), fields, timezone]);\n  var items = React.useMemo(function () {\n    return toItems(occurrences, {\n      timezone: timezone\n    }, {\n      groups: groups,\n      ranges: ranges\n    }).filter(function (item) {\n      return viewStart.getTime() === viewEnd.getTime() || isInTimeRange(item.zonedStart, viewStart, viewEnd) || isInTimeRange(item.zonedEnd, viewStart, viewEnd) || isInTimeRange(new Date(item.zonedEnd.getTime() - (item.zonedEnd.getTime() - item.zonedStart.getTime()) / 2), viewStart, viewEnd);\n    });\n  }, [occurrences, timezone, groups, ranges, viewStart.getTime(), viewEnd.getTime()]);\n  React.useMemo(function () {\n    return mapItemsToSlots(items, slots, true);\n  }, [items, slots]);\n  React.useMemo(function () {\n    return mapSlotsToItems(items, slots, true);\n  }, [items, slots]);\n  var width = (orientation === 'horizontal' ? slots.length : slots.length / groups.length) * ((props.columnWidth || defaultProps.columnWidth) + BORDER_WIDTH);\n  var head = React.createElement(SchedulerResourceIteratorContext.Consumer, null, function () {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"k-scheduler-row\"\n    }, ranges.map(function (range, rangeIndex) {\n      return React.createElement(DateHeaderCell, {\n        as: props.dateHeaderCell,\n        key: rangeIndex,\n        date: range.zonedStart,\n        start: range.start,\n        end: range.end,\n        format: 'm'\n      });\n    })), React.createElement(\"div\", {\n      className: \"k-scheduler-row\",\n      ref: timeRef\n    }, ranges.map(function (_, rangeIndex) {\n      return slots.filter(function (s) {\n        return s.group.index === FIRST_INDEX && s.range.index === rangeIndex;\n      }).map(function (slot) {\n        return slot.zonedStart.getMinutes() % slotDuration === 0 ? React.createElement(TimeHeaderCell, {\n          key: slot.index,\n          as: props.timeHeaderCell,\n          format: TIME_FORMAT,\n          date: slot.zonedStart,\n          start: slot.zonedStart,\n          end: slot.zonedEnd\n        }) : null;\n      });\n    })));\n  });\n  var body = React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n    var groupIndex = _a.groupIndex;\n    return React.createElement(\"div\", {\n      className: \"k-scheduler-row\"\n    }, ranges.map(function (_, rangeIndex) {\n      return slots.filter(function (s) {\n        return s.group.index === groupIndex && s.range.index === rangeIndex;\n      }).map(function (slot, slotIndex, filtered) {\n        return React.createElement(EditSlot, __assign({\n          key: \"\".concat(slot.start.getTime(), \":\").concat(slot.group.index),\n          slot: props.slot,\n          viewSlot: props.viewSlot\n        }, slot, {\n          form: props.form,\n          onDataAction: props.onDataAction,\n          isWorkHour: isInTimeRange(slot.zonedStart, workDayStart, workDayEnd),\n          isWorkDay: isInDaysRange(slot.zonedEnd.getDay(), workWeekStart, workWeekEnd),\n          col: orientation === 'horizontal' ? rangeIndex * filtered.length + slotIndex + filtered.length * ranges.length * (groupIndex || 0) : rangeIndex * filtered.length + slotIndex,\n          row: orientation === 'horizontal' ? 0 : groupIndex || 0,\n          expandable: true,\n          editable: props.editable\n        }));\n      });\n    }));\n  });\n  var className = React.useMemo(function () {\n    return classNames('k-scheduler-timeline-view', props.className);\n  }, [props.className]);\n  useCellSync({\n    element: element,\n    selector: '.k-resource-cell',\n    attribute: 'data-depth-index',\n    explicitDepth: true\n  });\n  useRowSync({\n    element: element,\n    selector: '.k-resource-row',\n    horizontalAttribute: 'data-depth-index',\n    verticalAttribute: 'data-resource-index',\n    applyTo: '.k-resource-cell'\n  });\n  return React.createElement(React.Fragment, null, React.createElement(BaseView, {\n    ref: element,\n    id: props.id,\n    style: __assign({}, props.style),\n    className: className,\n    props: props,\n    slots: slots,\n    ranges: ranges\n  }, React.createElement(\"div\", {\n    className: \"k-scheduler-head\",\n    style: {\n      width: width\n    }\n  }, orientation === 'horizontal' ? React.createElement(HorizontalResourceIterator, {\n    nested: true,\n    group: group,\n    resources: propResources,\n    rowContent: TimelineViewRowContent\n  }, head) : React.createElement(VerticalResourceIterator, {\n    wrapGroup: true,\n    group: group,\n    resources: propResources\n  }, head)), React.createElement(\"div\", {\n    className: \"k-scheduler-body\",\n    style: {\n      width: width\n    },\n    ref: bodyRef\n  }, orientation === 'horizontal' ? React.createElement(HorizontalResourceIterator, {\n    group: group,\n    resources: propResources,\n    rowContent: TimelineViewAllEventsRowContent\n  }, body, React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n    var groupIndex = _a.groupIndex;\n    return props.currentTimeMarker && intersects(first(ranges).start, last(ranges).end, new Date(), new Date(), true) && React.createElement(CurrentTimeMarker, {\n      groupIndex: groupIndex,\n      attachArrow: timeRef,\n      vertical: true\n    });\n  })) : React.createElement(VerticalResourceIterator, {\n    nested: true,\n    wrapGroup: true,\n    group: group,\n    resources: propResources\n  }, body), orientation === 'vertical' && props.currentTimeMarker && intersects(first(ranges).start, last(ranges).end, new Date(), new Date(), true) && React.createElement(CurrentTimeMarker, {\n    attachArrow: timeRef,\n    vertical: true\n  }), items.sort(orderSort).map(function (item) {\n    return React.createElement(EditItem, __assign({\n      key: item.isRecurring ? \"\".concat(item.uid, \":\").concat(item.group.index, \":\").concat(item.range.index, \":\").concat(item.originalStart) : \"\".concat(item.uid, \":\").concat(item.group.index, \":\").concat(item.range.index)\n    }, item, {\n      format: 't',\n      form: props.form,\n      onDataAction: props.onDataAction,\n      item: props.item,\n      viewItem: props.viewItem,\n      editable: props.editable,\n      ignoreIsAllDay: true,\n      vertical: false\n    }));\n  }))));\n};\n\nvar multiDayTimelineDateRange = function multiDayTimelineDateRange(_a) {\n  var date = _a.date,\n      _b = _a.numberOfDays,\n      numberOfDays = _b === void 0 ? 1 : _b,\n      timezone = _a.timezone;\n  var normalized = ZonedDate.fromLocalDate(date, timezone);\n  var firstDay = getDate(normalized);\n  var lastDay = addDays(firstDay, numberOfDays);\n  var zonedStart = ZonedDate.fromUTCDate(toUTCDateTime(firstDay), timezone);\n  var zonedEnd = ZonedDate.fromUTCDate(toUTCDateTime(lastDay), timezone);\n  var start = new Date(zonedStart.getTime());\n  var end = new Date(zonedEnd.getTime());\n  return {\n    start: start,\n    end: end,\n    zonedStart: zonedStart,\n    zonedEnd: zonedEnd\n  };\n};\n/** @hidden */\n\n\nexport var defaultProps = {\n  name: 'multi-day-timeline',\n  title: 'Multi Day Timeline',\n  currentTimeMarker: true,\n  dateRange: multiDayTimelineDateRange,\n  selectedDateFormat: '{0:D} - {1:D}',\n  selectedShortDateFormat: '{0:d} - {1:d}',\n  step: 1,\n  numberOfDays: 1,\n  startTime: '00:00',\n  endTime: '00:00',\n  isWorkDayStart: '8:00',\n  isWorkDayEnd: '17:00',\n  workWeekStart: Day.Monday,\n  workWeekEnd: Day.Friday,\n  slotDivisions: 2,\n  slotDuration: 60,\n  // showCurrentTime: true // TODO: Phase 2\n  defaultShowWorkHours: true,\n  columnWidth: 100\n};\nMultiDayTimelineView.defaultProps = defaultProps;","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/node_modules/@progress/kendo-react-scheduler/dist/es/views/time/MultiDayTimelineView.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","BaseView","useCellSync","useRowSync","Day","MS_PER_DAY","MS_PER_MINUTE","getDate","ZonedDate","addDays","HorizontalResourceIterator","TimelineViewRowContent","TimelineViewAllEventsRowContent","VerticalResourceIterator","mapItemsToSlots","mapSlotsToItems","isInTimeRange","toUTCDateTime","intersects","first","last","orderSort","isInDaysRange","classNames","toRanges","toSlots","toOccurrences","toItems","SchedulerEditSlot","BORDER_WIDTH","useInternationalization","SchedulerEditItem","useSchedulerDataContext","useSchedulerPropsContext","useSchedulerGroupsContext","useSchedulerFieldsContext","useSchedulerDateRangeContext","useSchedulerOrientationContext","SchedulerResourceIteratorContext","CurrentTimeMarker","DateHeaderCell","TimeHeaderCell","TIME_FORMAT","FIRST_INDEX","MultiDayTimelineView","props","_a","group","timezone","propResources","resources","timeRef","useRef","bodyRef","EditItem","editItem","EditSlot","editSlot","element","data","orientation","groups","dateRange","fields","intl","showWorkHours","slotDivisions","defaultProps","slotDuration","workWeekStart","workWeekEnd","workDayStart","parseDate","isWorkDayStart","workDayEnd","isWorkDayEnd","startTime","endTime","viewStart","useMemo","viewEnd","ranges","step","start","getTime","end","slots","filter","slot","zonedStart","occurrences","items","item","zonedEnd","Date","width","columnWidth","head","createElement","Consumer","Fragment","className","map","range","rangeIndex","as","dateHeaderCell","key","date","format","ref","_","index","getMinutes","timeHeaderCell","body","groupIndex","slotIndex","filtered","concat","viewSlot","form","onDataAction","isWorkHour","isWorkDay","getDay","col","row","expandable","editable","selector","attribute","explicitDepth","horizontalAttribute","verticalAttribute","applyTo","id","style","nested","rowContent","wrapGroup","currentTimeMarker","attachArrow","vertical","sort","isRecurring","uid","originalStart","viewItem","ignoreIsAllDay","multiDayTimelineDateRange","_b","numberOfDays","normalized","fromLocalDate","firstDay","lastDay","fromUTCDate","name","title","selectedDateFormat","selectedShortDateFormat","Monday","Friday","defaultShowWorkHours"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { BaseView } from '../../components/BaseView';\nimport { useCellSync, useRowSync } from '../../hooks';\nimport { Day, MS_PER_DAY, MS_PER_MINUTE, getDate, ZonedDate, addDays } from '@progress/kendo-date-math';\nimport { HorizontalResourceIterator } from '../common/HorizontalResourceIterator';\nimport { TimelineViewRowContent } from './TimelineViewRowContent';\nimport { TimelineViewAllEventsRowContent } from './TimelineViewAllEventsRowContent';\nimport { VerticalResourceIterator } from '../common/VerticalResourceIterator';\nimport { mapItemsToSlots, mapSlotsToItems, isInTimeRange, toUTCDateTime, intersects, first, last, orderSort, isInDaysRange } from '../../utils';\nimport { classNames } from '@progress/kendo-react-common';\nimport { toRanges } from '../../services/rangeService';\nimport { toSlots } from '../../services/slotsService';\nimport { toOccurrences } from '../../services/occurrenceService';\nimport { toItems } from '../../services/itemsService';\nimport { SchedulerEditSlot } from '../../slots/SchedulerEditSlot';\nimport { BORDER_WIDTH } from '../../constants';\nimport { useInternationalization } from '@progress/kendo-react-intl';\nimport { SchedulerEditItem } from '../../items/SchedulerEditItem';\nimport { useSchedulerDataContext, useSchedulerPropsContext, useSchedulerGroupsContext, useSchedulerFieldsContext, useSchedulerDateRangeContext, useSchedulerOrientationContext } from '../../context/SchedulerContext';\nimport { SchedulerResourceIteratorContext } from '../../context/SchedulerResourceIteratorContext';\nimport { CurrentTimeMarker } from '../../components/CurrentTimeMarket';\nimport { DateHeaderCell } from '../../components/DateHeaderCell';\nimport { TimeHeaderCell } from '../../components/TimeHeaderCell';\nvar TIME_FORMAT = 't';\nvar FIRST_INDEX = 0;\n/**\n * @hidden\n */\nexport var MultiDayTimelineView = function (props) {\n    var _a = useSchedulerPropsContext(), group = _a.group, timezone = _a.timezone, propResources = _a.resources;\n    var timeRef = React.useRef(null);\n    var bodyRef = React.useRef(null);\n    var EditItem = props.editItem || SchedulerEditItem;\n    var EditSlot = props.editSlot || SchedulerEditSlot;\n    var element = React.useRef(null);\n    var data = useSchedulerDataContext()[0];\n    var orientation = useSchedulerOrientationContext();\n    var groups = useSchedulerGroupsContext();\n    var dateRange = useSchedulerDateRangeContext();\n    var fields = useSchedulerFieldsContext();\n    var intl = useInternationalization();\n    var showWorkHours = props.showWorkHours;\n    var slotDivisions = props.slotDivisions || defaultProps.slotDivisions;\n    var slotDuration = props.slotDuration || defaultProps.slotDuration;\n    var workWeekStart = props.workWeekStart || defaultProps.workWeekStart;\n    var workWeekEnd = props.workWeekEnd || defaultProps.workWeekEnd;\n    var workDayStart = intl.parseDate(props.workDayStart || props.isWorkDayStart || defaultProps.isWorkDayStart);\n    var workDayEnd = intl.parseDate(props.workDayEnd || props.isWorkDayEnd || defaultProps.isWorkDayEnd);\n    var startTime = intl.parseDate(props.startTime || defaultProps.startTime);\n    var endTime = intl.parseDate(props.endTime || defaultProps.endTime);\n    var viewStart = React.useMemo(function () { return showWorkHours\n        ? workDayStart\n        : startTime; }, [\n        showWorkHours,\n        workDayStart,\n        startTime\n    ]);\n    var viewEnd = React.useMemo(function () { return showWorkHours\n        ? workDayEnd\n        : endTime; }, [\n        showWorkHours,\n        workDayEnd,\n        endTime\n    ]);\n    var ranges = React.useMemo(function () { return toRanges(dateRange, { step: MS_PER_DAY, timezone: timezone }); }, [\n        dateRange.start.getTime(),\n        dateRange.end.getTime(),\n        timezone\n    ]);\n    var slots = React.useMemo(function () { return toSlots(dateRange, { step: slotDuration / slotDivisions * MS_PER_MINUTE }, { groups: groups, ranges: ranges })\n        .filter(function (slot) { return isInTimeRange(slot.zonedStart, viewStart, viewEnd) || viewStart.getTime() === viewEnd.getTime(); }); }, [\n        groups,\n        ranges,\n        dateRange.start.getTime(),\n        dateRange.end.getTime(),\n        timezone,\n        slotDuration,\n        slotDivisions,\n        viewStart.getTime(),\n        viewEnd.getTime()\n    ]);\n    var occurrences = React.useMemo(function () { return toOccurrences(data, { dateRange: dateRange, fields: fields, timezone: timezone }); }, [data, dateRange.start.getTime(), dateRange.end.getTime(), fields, timezone]);\n    var items = React.useMemo(function () { return toItems(occurrences, { timezone: timezone }, { groups: groups, ranges: ranges })\n        .filter(function (item) { return viewStart.getTime() === viewEnd.getTime()\n        || isInTimeRange(item.zonedStart, viewStart, viewEnd)\n        || isInTimeRange(item.zonedEnd, viewStart, viewEnd)\n        || isInTimeRange(new Date(item.zonedEnd.getTime() - ((item.zonedEnd.getTime() - item.zonedStart.getTime()) / 2)), viewStart, viewEnd); }); }, [occurrences, timezone, groups, ranges, viewStart.getTime(), viewEnd.getTime()]);\n    React.useMemo(function () { return mapItemsToSlots(items, slots, true); }, [items, slots]);\n    React.useMemo(function () { return mapSlotsToItems(items, slots, true); }, [items, slots]);\n    var width = (orientation === 'horizontal' ? slots.length : slots.length / groups.length)\n        * ((props.columnWidth || defaultProps.columnWidth) + BORDER_WIDTH);\n    var head = (React.createElement(SchedulerResourceIteratorContext.Consumer, null, function () { return (React.createElement(React.Fragment, null,\n        React.createElement(\"div\", { className: \"k-scheduler-row\" }, ranges.map(function (range, rangeIndex) { return (React.createElement(DateHeaderCell, { as: props.dateHeaderCell, key: rangeIndex, date: range.zonedStart, start: range.start, end: range.end, format: 'm' })); })),\n        React.createElement(\"div\", { className: \"k-scheduler-row\", ref: timeRef }, ranges.map(function (_, rangeIndex) {\n            return slots\n                .filter(function (s) { return (s.group.index === FIRST_INDEX && s.range.index === rangeIndex); })\n                .map(function (slot) { return (slot.zonedStart.getMinutes() % slotDuration === 0\n                ? (React.createElement(TimeHeaderCell, { key: slot.index, as: props.timeHeaderCell, format: TIME_FORMAT, date: slot.zonedStart, start: slot.zonedStart, end: slot.zonedEnd })) : null); });\n        })))); }));\n    var body = (React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n        var groupIndex = _a.groupIndex;\n        return (React.createElement(\"div\", { className: \"k-scheduler-row\" }, ranges.map(function (_, rangeIndex) {\n            return (slots\n                .filter(function (s) { return s.group.index === groupIndex && s.range.index === rangeIndex; })\n                .map(function (slot, slotIndex, filtered) { return (React.createElement(EditSlot, __assign({ key: \"\".concat(slot.start.getTime(), \":\").concat(slot.group.index), slot: props.slot, viewSlot: props.viewSlot }, slot, { form: props.form, onDataAction: props.onDataAction, isWorkHour: isInTimeRange(slot.zonedStart, workDayStart, workDayEnd), isWorkDay: isInDaysRange(slot.zonedEnd.getDay(), workWeekStart, workWeekEnd), col: orientation === 'horizontal'\n                    ? (((rangeIndex * filtered.length) + slotIndex)\n                        + ((filtered.length * ranges.length) * (groupIndex || 0)))\n                    : ((rangeIndex * filtered.length) + slotIndex), row: orientation === 'horizontal'\n                    ? 0\n                    : (groupIndex || 0), expandable: true, editable: props.editable }))); }));\n        })));\n    }));\n    var className = React.useMemo(function () { return classNames('k-scheduler-timeline-view', props.className); }, [props.className]);\n    useCellSync({\n        element: element,\n        selector: '.k-resource-cell',\n        attribute: 'data-depth-index',\n        explicitDepth: true\n    });\n    useRowSync({\n        element: element,\n        selector: '.k-resource-row',\n        horizontalAttribute: 'data-depth-index',\n        verticalAttribute: 'data-resource-index',\n        applyTo: '.k-resource-cell'\n    });\n    return (React.createElement(React.Fragment, null,\n        React.createElement(BaseView, { ref: element, id: props.id, style: (__assign({}, props.style)), className: className, props: props, slots: slots, ranges: ranges },\n            React.createElement(\"div\", { className: \"k-scheduler-head\", style: { width: width } }, orientation === 'horizontal'\n                ? React.createElement(HorizontalResourceIterator, { nested: true, group: group, resources: propResources, rowContent: TimelineViewRowContent }, head)\n                : React.createElement(VerticalResourceIterator, { wrapGroup: true, group: group, resources: propResources }, head)),\n            React.createElement(\"div\", { className: \"k-scheduler-body\", style: { width: width }, ref: bodyRef },\n                orientation === 'horizontal'\n                    ? React.createElement(HorizontalResourceIterator, { group: group, resources: propResources, rowContent: TimelineViewAllEventsRowContent },\n                        body,\n                        React.createElement(SchedulerResourceIteratorContext.Consumer, null, function (_a) {\n                            var groupIndex = _a.groupIndex;\n                            return ((props.currentTimeMarker\n                                && intersects(first(ranges).start, last(ranges).end, new Date(), new Date(), true))\n                                && (React.createElement(CurrentTimeMarker, { groupIndex: groupIndex, attachArrow: timeRef, vertical: true })));\n                        }))\n                    : React.createElement(VerticalResourceIterator, { nested: true, wrapGroup: true, group: group, resources: propResources }, body),\n                (orientation === 'vertical'\n                    && props.currentTimeMarker\n                    && intersects(first(ranges).start, last(ranges).end, new Date(), new Date(), true))\n                    && (React.createElement(CurrentTimeMarker, { attachArrow: timeRef, vertical: true })),\n                items\n                    .sort(orderSort)\n                    .map(function (item) { return (React.createElement(EditItem, __assign({ key: item.isRecurring\n                        ? \"\".concat(item.uid, \":\").concat(item.group.index, \":\").concat(item.range.index, \":\").concat(item.originalStart)\n                        : \"\".concat(item.uid, \":\").concat(item.group.index, \":\").concat(item.range.index) }, item, { format: 't', form: props.form, onDataAction: props.onDataAction, item: props.item, viewItem: props.viewItem, editable: props.editable, ignoreIsAllDay: true, vertical: false }))); })))));\n};\nvar multiDayTimelineDateRange = function (_a) {\n    var date = _a.date, _b = _a.numberOfDays, numberOfDays = _b === void 0 ? 1 : _b, timezone = _a.timezone;\n    var normalized = ZonedDate.fromLocalDate(date, timezone);\n    var firstDay = getDate(normalized);\n    var lastDay = addDays(firstDay, numberOfDays);\n    var zonedStart = ZonedDate.fromUTCDate(toUTCDateTime(firstDay), timezone);\n    var zonedEnd = ZonedDate.fromUTCDate(toUTCDateTime(lastDay), timezone);\n    var start = new Date(zonedStart.getTime());\n    var end = new Date(zonedEnd.getTime());\n    return {\n        start: start,\n        end: end,\n        zonedStart: zonedStart,\n        zonedEnd: zonedEnd\n    };\n};\n/** @hidden */\nexport var defaultProps = {\n    name: 'multi-day-timeline',\n    title: 'Multi Day Timeline',\n    currentTimeMarker: true,\n    dateRange: multiDayTimelineDateRange,\n    selectedDateFormat: '{0:D} - {1:D}',\n    selectedShortDateFormat: '{0:d} - {1:d}',\n    step: 1,\n    numberOfDays: 1,\n    startTime: '00:00',\n    endTime: '00:00',\n    isWorkDayStart: '8:00',\n    isWorkDayEnd: '17:00',\n    workWeekStart: Day.Monday,\n    workWeekEnd: Day.Friday,\n    slotDivisions: 2,\n    slotDuration: 60,\n    // showCurrentTime: true // TODO: Phase 2\n    defaultShowWorkHours: true,\n    columnWidth: 100\n};\nMultiDayTimelineView.defaultProps = defaultProps;\n"]},"metadata":{},"sourceType":"module"}