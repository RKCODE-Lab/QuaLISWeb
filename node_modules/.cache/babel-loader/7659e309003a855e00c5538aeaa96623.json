{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{toast}from\"react-toastify\";import{injectIntl}from\"react-intl\";import rsapi from\"../../rsapi\";import{process}from\"@progress/kendo-data-query\";import{Row}from\"react-bootstrap\";import\"../../assets/styles/lims-global-theme.css\";import SlideOutModal from\"../../components/slide-out-modal/SlideOutModal\";import{DEFAULT_RETURN}from\"../../actions/LoginTypes\";import{showEsign,getControlMap,create_UUID,onDropAttachFileList,convertDateValuetoString,deleteAttachmentDropZone,formatInputDate,rearrangeDateFormat}from\"../../components/CommonScript\";import Esign from\"../audittrail/Esign\";import AddMethodValidity from\"./AddMethodValidity\";//import ValidateFormula from './ValidateFormula';\nimport{parameterType,transactionStatus,operators,attachmentType,FORMULAFIELDTYPE}from\"../../components/Enumeration\";import CustomTab from\"../../components/custom-tabs/custom-tabs.component\";import MethodValidityTab from\"./MethodValidityTab\";import ConfirmMessage from\"../../components/confirm-alert/confirm-message.component\";import{ChartLegendTitle}from\"@progress/kendo-react-charts\";import{rearrangeDateFormatDateOnly}from'./../../components/CommonScript';var MethodValidityView=/*#__PURE__*/function(_Component){_inherits(MethodValidityView,_Component);var _super=_createSuper(MethodValidityView);function MethodValidityView(props){var _this;_classCallCheck(this,MethodValidityView);_this=_super.call(this,props);_this.handleDateChange=function(dateName,dateValue,sdatename){var selectedRecord=_this.state.selectedRecord;// if(dateName === \"dvaliditystartdate\")\n// {\n//   selectedRecord[\"dvalidityenddate\"] = dateValue;  \n// }\nselectedRecord[dateName]=dateValue;selectedRecord[sdatename]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.tabDetail=function(){var tabMap=new Map();for(var i=0;i<_this.props.masterData[\"MethodValidity\"].length;i++){_this.props.masterData[\"MethodValidity\"][i].svaliditystartdate=rearrangeDateFormatDateOnly(_this.props.userInfo,_this.props.masterData[\"MethodValidity\"][i].svaliditystartdate);_this.props.masterData[\"MethodValidity\"][i].svalidityenddate=rearrangeDateFormatDateOnly(_this.props.userInfo,_this.props.masterData[\"MethodValidity\"][i].svalidityenddate);}tabMap.set(\"IDS_METHODVALIDITY\",/*#__PURE__*/React.createElement(MethodValidityTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,operation:_this.props.operation,dataResult:process(_this.props.masterData[\"MethodValidity\"],_this.props.screenName===undefined||_this.props.screenName===\"IDS_METHODVALIDITY\"?_this.state.methodvalidityDataState:{skip:0,take:10}),dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_METHODVALIDITY\"?_this.state.methodvalidityDataState:{skip:0,take:10},dataStateChange:function dataStateChange(event){return _this.setState({methodvalidityDataState:event.dataState});},selectedMethod:_this.props.masterData.SelectedMethod,fetchMethodValidityById:_this.props.fetchMethodValidityById,editParam:_this.props.editParam,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,selectedComponent:_this.state.selectedComponent,handleComponentRowClick:_this.handleComponentRowClick,formatMessage:_this.props.intl.formatMessage,deleteRecord:_this.deleteRecord,onApproveClick:_this.onApproveClick,openChildModal:_this.openChildModal,defaultRecord:_this.defaultRecord,selectedId:_this.props.selectedId,getAvailableValidityData:_this.props.getAvailableValidityData,MethodValidity:_this.props.masterData.MethodValidity||[],screenName:\"IDS_METHODVALIDITY\",approveParam:_this.props.approveParam}));return tabMap;};_this.handleComponentRowClick=function(event){var selectedComponent=event.dataItem;// let SelectedTest = this.props.Login.Test && this.props.Login.Test[selectedComponent.slno] ? this.props.Login.Test[selectedComponent.slno] : [];\nvar updateInfo={typeName:DEFAULT_RETURN,data:{operation:\"\"// SelectedTest, selectedComponent,\n// testDataState: {\n//     skip: 0, take: this.props.Login.settings ?\n//         parseInt(this.props.Login.settings[14]) : 5\n// }\n}};_this.props.updateStore(updateInfo);_this.setState({selectedComponent:selectedComponent});};_this.openChildModal=function(){var addParam={screenName:\"IDS_METHOD\",operation:\"create\",primaryKeyName:\"nmethodvaliditycode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo};_this.props.getMethodValidityUTCDate(addParam);//let selectedRecord={};\n// const updateInfo = {\n//   typeName: DEFAULT_RETURN,\n//   data: { openChildModal: true,operation:\"create\" },\n// };//,selectedRecord\n// this.props.updateStore(updateInfo);\n};_this.onApproveClick=function(selectedDataItem,operation,primaryKeyName){if(selectedDataItem.dataItem.ntransactionstatus===transactionStatus.DRAFT){// if (this.state.selectedComponent.ntransactionstatus === transactionStatus.DRAFT) {\nvar approveId=_this.props.controlMap.has(\"ApproveMethodValidity\")&&_this.props.controlMap.get(\"ApproveMethodValidity\").ncontrolcode;var inputData=[];inputData[\"userinfo\"]=_this.props.userInfo;//add               \nvar postParam=undefined;inputData[\"methodvalidity\"]=selectedDataItem.dataItem;postParam={inputListName:\"MethodValidity\",selectedObject:\"selectedComponent\",primaryKeyField:\"nmethodvaliditycode\"};var inputParam={classUrl:\"method\",methodUrl:\"MethodValidity\",inputData:inputData,operation:\"approve\",postParam:postParam};var saveType;var masterData=_this.props.masterData;var esignNeeded=showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,approveId);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},screenName:\"IDS_METHOD\",openChildModal:true,operation:\"approve\",selectedRecord:{}}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\",{});}//  }\n// else {\n//     toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTRECORDTOAPPROVE\" }));\n// }\n}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_NOTEDITDELETEMETHODVALIDITY\"}));}};_this.deleteRecord=function(deleteParam){if(deleteParam.selectedRecord.ntransactionstatus===transactionStatus.DRAFT){var _inputData;var methodUrl=deleteParam.methodUrl;var selected=deleteParam.selectedRecord;var dataState=undefined;if(_this.props.screenName===\"IDS_SECTION\"){dataState=_this.state.methodValidityDataState;}var inputParam={inputData:(_inputData={},_defineProperty(_inputData,methodUrl.toLowerCase(),selected),_defineProperty(_inputData,\"userinfo\",_this.props.userInfo),_inputData),classUrl:\"method\",operation:deleteParam.operation,methodUrl:methodUrl,screenName:\"IDS_METHOD\",dataState:dataState};var masterData=_this.props.masterData;if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,screenName:\"IDS_METHOD\",operation:deleteParam.operation,selectedRecord:{}}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\",{});}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_NOTEDITDELETEMETHODVALIDITY\"}));}};_this.defaultRecord=function(defaultParam,event){var _inputData2;var methodUrl=defaultParam.methodUrl;var dataItem=defaultParam.selectedRecord;// dataItem[\"ndefaultstatus\"] = transactionStatus.YES;\nvar dataState=undefined;if(_this.props.screenName===\"IDS_SECTION\"){dataState=_this.state.methodValidityDataState;}var inputParam={inputData:(_inputData2={},_defineProperty(_inputData2,methodUrl.toLowerCase(),dataItem),_defineProperty(_inputData2,\"userinfo\",_this.props.userInfo),_inputData2),classUrl:\"method\",operation:\"setDefault\",methodUrl:methodUrl,dataState:dataState};var masterData=_this.props.masterData;if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,defaultParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,screenName:\"Method\",operation:defaultParam.operation,selectedRecord:{}}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\",{});}};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;var selectedId=_this.props.selectedId;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"||_this.props.operation===\"approve\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord[\"agree\"]=4;selectedRecord[\"esignpassword\"]=\"\";selectedRecord[\"esigncomments\"]=\"\";}}else{openChildModal=false;selectedRecord={};selectedId=null;}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:selectedId}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName,caseNo){var selectedRecord=_this.state.selectedRecord||{};switch(caseNo){case 1:if(fieldName===\"sparametername\"){selectedRecord[fieldName]=comboData;selectedRecord[\"sparametersynonym\"]=comboData.value;}else{selectedRecord[fieldName]=comboData;}_this.setState({selectedRecord:selectedRecord});break;case 2:var parameterData=_this.props.parameterData;var item=comboData[\"item\"];var needUnit=true;var needRoundingDigit=true;var needCodedResult=true;var needActualResult=true;var npredefinedcode=4;if(item[\"nunitrequired\"]===3){needUnit=false;selectedRecord[\"nunitcode\"]=_this.props.parameterData.defaultUnit;}else{selectedRecord[\"nunitcode\"]=\"\";}if(item[\"nroundingrequired\"]===3){needRoundingDigit=false;}else{selectedRecord[\"nroundingdigits\"]=\"\";}if(item[\"npredefinedrequired\"]===3){needCodedResult=false;npredefinedcode=item[\"npredefinedrequired\"];}else{selectedRecord[\"spredefinedname\"]=\"\";}if(item[\"ngraderequired\"]===3){needActualResult=false;selectedRecord[\"ngradecode\"]=_this.props.parameterData.defaultGrade;}else{selectedRecord[\"ngradecode\"]=\"\";}selectedRecord[fieldName]=comboData;var parameterInfo={typeName:DEFAULT_RETURN,data:{selectedRecord:selectedRecord,parameterData:_objectSpread(_objectSpread({},parameterData),{},{needUnit:needUnit,needRoundingDigit:needRoundingDigit,needCodedResult:needCodedResult,needActualResult:needActualResult,npredefinedcode:npredefinedcode})}};_this.props.updateStore(parameterInfo);break;case 3:selectedRecord[fieldName]=comboData;_this.props.formulaChangeFunction({ntestcategorycode:comboData.value,nFlag:2,userinfo:_this.props.userInfo},_this.props.formulaData,1,selectedRecord,\"/changeTestCatgoryInFormula\");break;case 4:selectedRecord[fieldName]=comboData;_this.props.formulaChangeFunction({ntestcode:comboData.value,nFlag:3,userinfo:_this.props.userInfo},_this.props.formulaData,2,selectedRecord,\"/changeTestInFormula\");break;default:break;}};_this.onEsignInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type===\"checkbox\"){selectedRecord[event.target.name]=event.target.checked===true?3:4;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,caseNo,optional){var selectedRecord=_this.state.selectedRecord||{};switch(caseNo){case 1:if(event.target.type===\"checkbox\"){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else if(event.target.type===\"radio\"){selectedRecord[event.target.name]=optional;//  selectedRecord[\"sfilename\"]=\"\";\n}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});break;case 4:var inputValue=event.target.value;if(/^-?\\d*?\\.?\\d*?$/.test(inputValue)||inputValue===\"\"){selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});break;case 5:if(optional.ndynamicformulafieldcode===FORMULAFIELDTYPE.INTEGER&&optional.sdescription.indexOf(\"P$\")===-1){var value=event.target.value.replace(/[^-^0-9]/g,\"\");var dynamicField=_this.state.dynamicField||[];if(/^-?\\d*?$/.test(value)){if(!selectedRecord[\"formulainput\"]){selectedRecord[\"formulainput\"]={};}selectedRecord[\"formulainput\"][event.target.name]=value;dynamicField[event.target.name]={sparameter:optional.sdescription,svalues:value};}else if(value===\"\"){if(!selectedRecord[\"formulainput\"]){selectedRecord[\"formulainput\"]={};}selectedRecord[\"formulainput\"][event.target.name]=value;dynamicField[event.target.name]={sparameter:optional.sdescription,svalues:value};}_this.setState({dynamicField:dynamicField,selectedRecord:selectedRecord});break;}else{var _value=event.target.value.replace(/[^-^0-9.]/g,\"\");var _dynamicField=_this.state.dynamicField||[];if(/^-?\\d*?\\.?\\d*?$/.test(_value)||_value!==\"\"){if(!selectedRecord[\"formulainput\"]){selectedRecord[\"formulainput\"]={};}selectedRecord[\"formulainput\"][event.target.name]=_value;_dynamicField[event.target.name]={sparameter:optional.sdescription,svalues:_value};}_this.setState({dynamicField:_dynamicField,selectedRecord:selectedRecord});break;}default:break;}};_this.onSaveClick=function(saveType,formRef){//add / edit\nvar inputData=[];inputData[\"userinfo\"]=_this.props.userInfo;var postParam=undefined;var editId=_this.props.controlMap.has(\"AddMethodValidity\")&&_this.props.controlMap.get(\"AddMethodValidity\").ncontrolcode;// if (this.state.selectedRecord[\"ncommentsubtypecode\"].value === 3) {\n//     if (this.state.selectedRecord[\"spredefinedname\"] === undefined || \n//          this.state.selectedRecord[\"spredefinedname\"] === \"\") {\n//         toast.info(\"Enter PreDefined Name\");\n//         return;\n//     }\n// }\n//   if (this.state.selectedRecord[\"dvalidityenddate\"] !== undefined && this.state.selectedRecord[\"dvaliditystartdate\"] !== undefined) {\n//     if (this.state.selectedRecord[\"dvalidityenddate\"] < this.state.selectedRecord[\"dvaliditystartdate\"]) {\n//         toast.info(this.props.intl.formatMessage({ id: \"IDS_ENDDATEGRATERTHANSTARTDATE\" }));\n//         return;\n//     }\n// }\nvar obj=convertDateValuetoString(_this.state.selectedRecord[\"dvaliditystartdate\"]?_this.state.selectedRecord[\"dvaliditystartdate\"]:new Date(),_this.state.selectedRecord[\"dvalidityenddate\"]?_this.state.selectedRecord[\"dvalidityenddate\"]:new Date(),_this.props.userInfo);_this.state.selectedRecord[\"svaliditystartdate\"]=obj.fromDate;_this.state.selectedRecord[\"svalidityenddate\"]=obj.toDate;if(_this.props.operation===\"update\"){// edit\npostParam={inputListName:\"methodvalidity\",selectedObject:\"MethodValidity\",primaryKeyField:\"nmethodvaliditycode\",primaryKeyValue:_this.state.selectedRecord[\"nmethodvaliditycode\"],fetchUrl:\"method/getActiveMethodValidityById\",fecthInputObject:{userinfo:_this.props.userInfo},masterData:_this.props.masterData};inputData[\"methodvalidity\"]={\"nsitecode\":_this.props.userInfo.nmastersitecode};inputData[\"methodvalidity\"][\"dvaliditystartdate\"]=_this.state.selectedRecord[\"dvaliditystartdate\"]?formatInputDate(_this.state.selectedRecord[\"dvaliditystartdate\"]):formatInputDate(new Date());inputData[\"methodvalidity\"][\"dvalidityenddate\"]=_this.state.selectedRecord[\"dvalidityenddate\"]?_this.state.selectedRecord[\"dvalidityenddate\"]:new Date();inputData[\"methodvalidity\"][\"svaliditystartdate\"]=_this.state.selectedRecord[\"svaliditystartdate\"]?_this.state.selectedRecord[\"svaliditystartdate\"]:new Date();inputData[\"methodvalidity\"][\"svalidityenddate\"]=_this.state.selectedRecord[\"svalidityenddate\"]?_this.state.selectedRecord[\"svalidityenddate\"]:new Date();inputData[\"methodvalidity\"][\"nmethodcode\"]=_this.props.selectedMethod.nmethodcode;inputData[\"methodvalidity\"][\"nmethodvaliditycode\"]=_this.state.selectedRecord[\"nmethodvaliditycode\"]?_this.state.selectedRecord[\"nmethodvaliditycode\"]:0;editId=_this.props.controlMap.has(\"EditMethodValidity\")&&_this.props.controlMap.get(\"EditMethodValidity\").ncontrolcode;}else{inputData[\"methodvalidity\"]={\"nsitecode\":_this.props.userInfo.nmastersitecode};inputData[\"methodvalidity\"][\"dvaliditystartdate\"]=_this.state.selectedRecord[\"dvaliditystartdate\"]?_this.state.selectedRecord[\"dvaliditystartdate\"]:new Date();inputData[\"methodvalidity\"][\"dvalidityenddate\"]=_this.state.selectedRecord[\"dvalidityenddate\"]?_this.state.selectedRecord[\"dvalidityenddate\"]:new Date();inputData[\"methodvalidity\"][\"svaliditystartdate\"]=_this.state.selectedRecord[\"svaliditystartdate\"]?_this.state.selectedRecord[\"svaliditystartdate\"]:new Date();inputData[\"methodvalidity\"][\"svalidityenddate\"]=_this.state.selectedRecord[\"svalidityenddate\"]?_this.state.selectedRecord[\"svalidityenddate\"]:new Date();inputData[\"methodvalidity\"][\"nmethodcode\"]=_this.props.selectedMethod.nmethodcode;}var inputParam={classUrl:\"method\",methodUrl:\"MethodValidity\",displayName:\"IDS_METHOD\",inputData:inputData,operation:_this.props.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef};var masterData=_this.props.masterData;var esignNeeded=showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,editId);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};_this.ConfirmDelete=function(deleteParam,deleteID){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.deleteRecord(deleteParam);});};_this.state={selectedRecord:{},fieldFlag:true,operatorFlag:false,functionFlag:true,methodvalidityDataState:{skip:0,take:10},methodDataState:{skip:0,take:10},selectedComponent:\"\"};_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(MethodValidityView,[{key:\"render\",value:function render(){var SelectedMethod=this.props.masterData.SelectedMethod;var mandatoryFields=[{idsName:\"IDS_VALIDITYSTARTDATE\",dataField:\"dvaliditystartdate\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{idsName:\"IDS_VALIDITYENDDATE\",dataField:\"dvalidityenddate\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"}];return/*#__PURE__*/React.createElement(React.Fragment,null,SelectedMethod&&/*#__PURE__*/React.createElement(CustomTab,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange}),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:\"IDS_METHODVALIDITY\",onSaveClick:this.onSaveClick,esign:this.props.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{},mandatoryFields:this.mandatoryFields,addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,onInputOnChange:this.onEsignInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(AddMethodValidity,{selectedRecord:this.state.selectedRecord||{},methodvalidity:this.props.MethodValidity,handleDateChange:this.handleDateChange,userInfo:this.props.userInfo})}));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}if(this.props.masterData!==previousProps.masterData){var _this$state=this.state,methodValidityDataState=_this$state.methodValidityDataState,selectedRecord=_this$state.selectedRecord;if(this.props.dataState===undefined){if(this.props.screenName===\"IDS_METHODVALIDITY\"){methodValidityDataState={skip:0,take:10};}}//this.props.masterData.MethodValidity\nthis.setState({methodValidityDataState:methodValidityDataState,selectedRecord:selectedRecord});}if(this.props.Login!==previousProps.Login){this.PrevoiusLoginData=previousProps;}// if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n//     this.setState({ selectedRecord: this.props.Login.selectedRecord });\n// }\n// if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n//     const userRoleControlRights = [];\n//     if (this.props.Login.userRoleControlRights) {\n//         this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\n//             userRoleControlRights.push(item.ncontrolcode))\n//     }\n//     const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\n//     this.setState({ userRoleControlRights, controlMap });\n// }\n}}]);return MethodValidityView;}(Component);export default injectIntl(MethodValidityView);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/testmanagement/MethodValidityView.jsx"],"names":["React","Component","toast","injectIntl","rsapi","process","Row","SlideOutModal","DEFAULT_RETURN","showEsign","getControlMap","create_UUID","onDropAttachFileList","convertDateValuetoString","deleteAttachmentDropZone","formatInputDate","rearrangeDateFormat","Esign","AddMethodValidity","parameterType","transactionStatus","operators","attachmentType","FORMULAFIELDTYPE","CustomTab","MethodValidityTab","ConfirmMessage","ChartLegendTitle","rearrangeDateFormatDateOnly","MethodValidityView","props","handleDateChange","dateName","dateValue","sdatename","selectedRecord","state","setState","onTabChange","tabProps","screenName","updateInfo","typeName","data","updateStore","tabDetail","tabMap","Map","i","masterData","length","svaliditystartdate","userInfo","svalidityenddate","set","controlMap","userRoleControlRights","operation","undefined","methodvalidityDataState","skip","take","event","dataState","SelectedMethod","fetchMethodValidityById","editParam","inputParam","selectedComponent","handleComponentRowClick","intl","formatMessage","deleteRecord","onApproveClick","openChildModal","defaultRecord","selectedId","getAvailableValidityData","MethodValidity","approveParam","dataItem","addParam","primaryKeyName","getMethodValidityUTCDate","selectedDataItem","ntransactionstatus","DRAFT","approveId","has","get","ncontrolcode","inputData","postParam","inputListName","selectedObject","primaryKeyField","classUrl","methodUrl","saveType","esignNeeded","esignRights","nformcode","loadEsign","screenData","crudMaster","warn","id","deleteParam","selected","methodValidityDataState","toLowerCase","ncontrolCode","defaultParam","closeModal","onComboChange","comboData","fieldName","caseNo","value","parameterData","item","needUnit","needRoundingDigit","needCodedResult","needActualResult","npredefinedcode","defaultUnit","defaultGrade","parameterInfo","formulaChangeFunction","ntestcategorycode","nFlag","userinfo","formulaData","ntestcode","onEsignInputOnChange","target","type","name","checked","onInputOnChange","optional","YES","NO","inputValue","test","ndynamicformulafieldcode","INTEGER","sdescription","indexOf","replace","dynamicField","sparameter","svalues","onSaveClick","formRef","editId","obj","Date","fromDate","toDate","primaryKeyValue","fetchUrl","fecthInputObject","nmastersitecode","selectedMethod","nmethodcode","displayName","searchRef","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","validateEsignCredential","ConfirmDelete","deleteID","confirmMessage","confirm","fieldFlag","operatorFlag","functionFlag","methodDataState","mandatoryFields","idsName","dataField","mandatoryLabel","controlType","previousProps","Login","PrevoiusLoginData"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { injectIntl } from \"react-intl\";\r\nimport rsapi from \"../../rsapi\";\r\nimport { process } from \"@progress/kendo-data-query\";\r\nimport { Row } from \"react-bootstrap\";\r\nimport \"../../assets/styles/lims-global-theme.css\";\r\nimport SlideOutModal from \"../../components/slide-out-modal/SlideOutModal\";\r\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\r\nimport {\r\n  showEsign,\r\n  getControlMap,\r\n  create_UUID,\r\n  onDropAttachFileList,\r\n  convertDateValuetoString,\r\n  deleteAttachmentDropZone,\r\n  formatInputDate,\r\n  rearrangeDateFormat,\r\n} from \"../../components/CommonScript\";\r\nimport Esign from \"../audittrail/Esign\";\r\nimport AddMethodValidity from \"./AddMethodValidity\";\r\n//import ValidateFormula from './ValidateFormula';\r\nimport {\r\n  parameterType,\r\n  transactionStatus,\r\n  operators,\r\n  attachmentType,\r\n  FORMULAFIELDTYPE,\r\n} from \"../../components/Enumeration\";\r\nimport CustomTab from \"../../components/custom-tabs/custom-tabs.component\";\r\nimport MethodValidityTab from \"./MethodValidityTab\";\r\nimport ConfirmMessage from \"../../components/confirm-alert/confirm-message.component\";\r\nimport { ChartLegendTitle } from \"@progress/kendo-react-charts\";\r\nimport { rearrangeDateFormatDateOnly } from './../../components/CommonScript';\r\n\r\nclass MethodValidityView extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedRecord: {},\r\n      fieldFlag: true,\r\n      operatorFlag: false,\r\n      functionFlag: true,\r\n      methodvalidityDataState: { skip: 0, take: 10 },\r\n      methodDataState: { skip: 0, take: 10 },\r\n      selectedComponent:\"\"\r\n    };\r\n    this.confirmMessage = new ConfirmMessage();\r\n  }\r\n\r\n  render() {\r\n    const { SelectedMethod } = this.props.masterData;\r\n    \r\n    const mandatoryFields = [\r\n      {\r\n        idsName: \"IDS_VALIDITYSTARTDATE\",\r\n        dataField: \"dvaliditystartdate\",\r\n        mandatoryLabel: \"IDS_SELECT\",\r\n        controlType: \"selectbox\",\r\n      },\r\n      {\r\n        idsName: \"IDS_VALIDITYENDDATE\",\r\n        dataField: \"dvalidityenddate\",\r\n        mandatoryLabel: \"IDS_SELECT\",\r\n        controlType: \"selectbox\",\r\n      },\r\n    ];\r\n    return (\r\n      <>\r\n        {SelectedMethod && (\r\n          <CustomTab\r\n            tabDetail={this.tabDetail()}\r\n            onTabChange={this.onTabChange}\r\n          />\r\n        )}\r\n\r\n        {this.props.openChildModal && (\r\n          <SlideOutModal\r\n            show={this.props.openChildModal}\r\n            closeModal={this.closeModal}\r\n            operation={this.props.operation}\r\n            inputParam={this.props.inputParam}\r\n            screenName={\"IDS_METHODVALIDITY\"}\r\n            onSaveClick={this.onSaveClick}\r\n            esign={this.props.loadEsign}\r\n            validateEsign={this.validateEsign}\r\n            selectedRecord={this.state.selectedRecord || {}}\r\n            mandatoryFields={this.mandatoryFields}\r\n            addComponent={\r\n              this.props.loadEsign ? (\r\n                <Esign\r\n                  operation={this.props.operation}\r\n                  onInputOnChange={this.onEsignInputOnChange}\r\n                  inputParam={this.props.inputParam}\r\n                  selectedRecord={this.state.selectedRecord || {}}\r\n                />\r\n              ) : (\r\n                <AddMethodValidity\r\n                  selectedRecord={this.state.selectedRecord || {}}\r\n                  methodvalidity={this.props.MethodValidity}\r\n                  handleDateChange={this.handleDateChange}\r\n                  userInfo={this.props.userInfo}\r\n                />\r\n              )\r\n            }\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n  handleDateChange = (dateName, dateValue, sdatename) => {\r\n    const { selectedRecord } = this.state;\r\n    // if(dateName === \"dvaliditystartdate\")\r\n    // {\r\n    //   selectedRecord[\"dvalidityenddate\"] = dateValue;  \r\n    // }\r\n    selectedRecord[dateName] = dateValue;\r\n    selectedRecord[sdatename] = dateValue;\r\n    this.setState({ selectedRecord });\r\n  };\r\n  onTabChange = (tabProps) => {\r\n    const screenName = tabProps.screenName;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { screenName },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n  tabDetail = () => {\r\n    const tabMap = new Map();\r\n\r\n    for(let i=0;i<this.props.masterData[\"MethodValidity\"].length;i++)\r\n    {\r\n      this.props.masterData[\"MethodValidity\"][i].svaliditystartdate=rearrangeDateFormatDateOnly(this.props.userInfo,this.props.masterData[\"MethodValidity\"][i].svaliditystartdate);\r\n      this.props.masterData[\"MethodValidity\"][i].svalidityenddate=rearrangeDateFormatDateOnly(this.props.userInfo,this.props.masterData[\"MethodValidity\"][i].svalidityenddate);\r\n    }\r\n\r\n    tabMap.set(\r\n      \"IDS_METHODVALIDITY\",\r\n      <MethodValidityTab\r\n        controlMap={this.props.controlMap}\r\n        userRoleControlRights={this.props.userRoleControlRights}\r\n        operation = {this.props.operation}\r\n        dataResult={process(\r\n          this.props.masterData[\"MethodValidity\"],\r\n          this.props.screenName === undefined ||\r\n            this.props.screenName === \"IDS_METHODVALIDITY\"\r\n            ? this.state.methodvalidityDataState\r\n            : { skip: 0, take: 10 }\r\n        )}\r\n        dataState={\r\n          this.props.screenName === undefined ||\r\n          this.props.screenName === \"IDS_METHODVALIDITY\"\r\n            ? this.state.methodvalidityDataState\r\n            : { skip: 0, take: 10 }\r\n        }\r\n        dataStateChange={(event) =>\r\n          this.setState({ methodvalidityDataState: event.dataState })\r\n        }\r\n        selectedMethod={this.props.masterData.SelectedMethod}\r\n        fetchMethodValidityById={this.props.fetchMethodValidityById}\r\n        editParam={this.props.editParam}\r\n        userInfo={this.props.userInfo}\r\n        inputParam={this.props.inputParam}\r\n        selectedComponent={this.state.selectedComponent}\r\n        handleComponentRowClick={this.handleComponentRowClick}\r\n        formatMessage={this.props.intl.formatMessage}\r\n        deleteRecord={this.deleteRecord}\r\n        onApproveClick={this.onApproveClick}\r\n        openChildModal={this.openChildModal}\r\n        defaultRecord={this.defaultRecord}\r\n        selectedId={this.props.selectedId}\r\n        getAvailableValidityData={this.props.getAvailableValidityData}\r\n        MethodValidity={this.props.masterData.MethodValidity || []}\r\n        screenName=\"IDS_METHODVALIDITY\"\r\n        approveParam={this.props.approveParam}\r\n      />\r\n    );\r\n\r\n    return tabMap;\r\n  };\r\n  handleComponentRowClick = (event) => {\r\n    let selectedComponent = event.dataItem;\r\n    // let SelectedTest = this.props.Login.Test && this.props.Login.Test[selectedComponent.slno] ? this.props.Login.Test[selectedComponent.slno] : [];\r\n    const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          operation:\"\"\r\n            // SelectedTest, selectedComponent,\r\n            // testDataState: {\r\n            //     skip: 0, take: this.props.Login.settings ?\r\n            //         parseInt(this.props.Login.settings[14]) : 5\r\n            // }\r\n        }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n    this.setState({selectedComponent});\r\n\r\n};\r\n  openChildModal = () => {\r\n    const addParam = {\r\n      screenName: \"IDS_METHOD\", operation: \"create\", primaryKeyName: \"nmethodvaliditycode\",\r\n      masterData: this.props.masterData, userInfo: this.props.userInfo\r\n     \r\n  }\r\n  this.props.getMethodValidityUTCDate(addParam);\r\n    //let selectedRecord={};\r\n    // const updateInfo = {\r\n    //   typeName: DEFAULT_RETURN,\r\n    //   data: { openChildModal: true,operation:\"create\" },\r\n    // };//,selectedRecord\r\n    // this.props.updateStore(updateInfo);\r\n  };\r\n    onApproveClick = (selectedDataItem, operation, primaryKeyName) => {\r\n      if (selectedDataItem.dataItem.ntransactionstatus === transactionStatus.DRAFT) {\r\n   // if (this.state.selectedComponent.ntransactionstatus === transactionStatus.DRAFT) {\r\n        const approveId = this.props.controlMap.has(\"ApproveMethodValidity\") && this.props.controlMap.get(\"ApproveMethodValidity\").ncontrolcode\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        //add               \r\n        let postParam = undefined;\r\n        inputData[\"methodvalidity\"] =selectedDataItem.dataItem;\r\n        postParam = { inputListName: \"MethodValidity\", selectedObject: \"selectedComponent\", primaryKeyField: \"nmethodvaliditycode\" };\r\n        const inputParam = {\r\n            classUrl: \"method\",\r\n            methodUrl: \"MethodValidity\",\r\n            inputData: inputData,\r\n            operation: \"approve\", postParam\r\n        }\r\n        let saveType;\r\n\r\n        const masterData = this.props.masterData;\r\n\r\n        const esignNeeded = showEsign(this.props.esignRights, this.props.userInfo.nformcode, approveId);\r\n        if (esignNeeded) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, screenName: \"IDS_METHOD\", openChildModal: true, operation: \"approve\",selectedRecord: {}\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n            \r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\",{});\r\n        }\r\n\r\n  //  }\r\n    // else {\r\n    //     toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTRECORDTOAPPROVE\" }));\r\n    // }\r\n      }\r\n      else {\r\n        toast.warn(this.props.intl.formatMessage({ id: \"IDS_NOTEDITDELETEMETHODVALIDITY\" }));\r\n    }\r\n\r\n}\r\n  deleteRecord = (deleteParam) => {\r\n    if (deleteParam.selectedRecord.ntransactionstatus === transactionStatus.DRAFT) {\r\n    const methodUrl = deleteParam.methodUrl;\r\n    const selected = deleteParam.selectedRecord;\r\n    let dataState = undefined;\r\n    if (this.props.screenName === \"IDS_SECTION\") {\r\n      dataState = this.state.methodValidityDataState;\r\n    }\r\n    const inputParam = {\r\n      inputData: {\r\n        [methodUrl.toLowerCase()]: selected,\r\n        userinfo: this.props.userInfo,\r\n      },\r\n      classUrl: \"method\",\r\n      operation: deleteParam.operation,\r\n      methodUrl: methodUrl,\r\n      screenName: \"IDS_METHOD\",\r\n      dataState,\r\n    };\r\n    const masterData = this.props.masterData;\r\n    if (\r\n      showEsign(\r\n        this.props.esignRights,\r\n        this.props.userInfo.nformcode,\r\n        deleteParam.ncontrolCode\r\n      )\r\n    ) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          openChildModal: true,\r\n          screenName: \"IDS_METHOD\",\r\n          operation: deleteParam.operation,\r\n          selectedRecord: {},\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, \"openChildModal\", {});\r\n    }\r\n  }\r\n  else {\r\n    toast.warn(this.props.intl.formatMessage({ id: \"IDS_NOTEDITDELETEMETHODVALIDITY\" }));\r\n}\r\n  };\r\n\r\n  defaultRecord = (defaultParam, event) => {\r\n    const methodUrl = defaultParam.methodUrl;\r\n    let dataItem = defaultParam.selectedRecord;\r\n    // dataItem[\"ndefaultstatus\"] = transactionStatus.YES;\r\n    let dataState = undefined;\r\n    if (this.props.screenName === \"IDS_SECTION\") {\r\n      dataState = this.state.methodValidityDataState;\r\n    }\r\n    const inputParam = {\r\n      inputData: {\r\n        [methodUrl.toLowerCase()]: dataItem,\r\n        userinfo: this.props.userInfo,\r\n      },\r\n      classUrl: \"method\",\r\n      operation: \"setDefault\",\r\n      methodUrl: methodUrl,\r\n      dataState,\r\n    };\r\n    const masterData = this.props.masterData;\r\n    if (\r\n      showEsign(\r\n        this.props.esignRights,\r\n        this.props.userInfo.nformcode,\r\n        defaultParam.ncontrolCode\r\n      )\r\n    ) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          openChildModal: true,\r\n          screenName: \"Method\",\r\n          operation: defaultParam.operation,\r\n          selectedRecord: {},\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, \"openChildModal\", {});\r\n    }\r\n  };\r\n  closeModal = () => {\r\n    let loadEsign = this.props.loadEsign;\r\n    let openChildModal = this.props.openChildModal;\r\n    let selectedRecord = this.props.selectedRecord;\r\n    let selectedId = this.props.selectedId;\r\n    if (this.props.loadEsign) {\r\n      if (\r\n        this.props.operation === \"delete\" ||\r\n        this.props.operation === \"approve\"  \r\n      ) {\r\n        loadEsign = false;\r\n        openChildModal = false;\r\n        selectedRecord = {};\r\n      } else {\r\n        loadEsign = false;\r\n        selectedRecord[\"agree\"] = 4;\r\n        selectedRecord[\"esignpassword\"] = \"\";\r\n        selectedRecord[\"esigncomments\"] = \"\";\r\n      }\r\n    } else {\r\n      openChildModal = false;\r\n      selectedRecord = {};\r\n      selectedId=null;\r\n    }\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { openChildModal, loadEsign, selectedRecord,selectedId },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  onComboChange = (comboData, fieldName, caseNo) => {\r\n    let selectedRecord = this.state.selectedRecord || {};\r\n    switch (caseNo) {\r\n      case 1:\r\n        if (fieldName === \"sparametername\") {\r\n          selectedRecord[fieldName] = comboData;\r\n          selectedRecord[\"sparametersynonym\"] = comboData.value;\r\n        } else {\r\n          selectedRecord[fieldName] = comboData;\r\n        }\r\n        this.setState({ selectedRecord });\r\n        break;\r\n\r\n      case 2:\r\n        const parameterData = this.props.parameterData;\r\n        let item = comboData[\"item\"];\r\n        let needUnit = true;\r\n        let needRoundingDigit = true;\r\n        let needCodedResult = true;\r\n        let needActualResult = true;\r\n        let npredefinedcode = 4;\r\n        if (item[\"nunitrequired\"] === 3) {\r\n          needUnit = false;\r\n          selectedRecord[\"nunitcode\"] = this.props.parameterData.defaultUnit;\r\n        } else {\r\n          selectedRecord[\"nunitcode\"] = \"\";\r\n        }\r\n        if (item[\"nroundingrequired\"] === 3) {\r\n          needRoundingDigit = false;\r\n        } else {\r\n          selectedRecord[\"nroundingdigits\"] = \"\";\r\n        }\r\n        if (item[\"npredefinedrequired\"] === 3) {\r\n          needCodedResult = false;\r\n          npredefinedcode = item[\"npredefinedrequired\"];\r\n        } else {\r\n          selectedRecord[\"spredefinedname\"] = \"\";\r\n        }\r\n        if (item[\"ngraderequired\"] === 3) {\r\n          needActualResult = false;\r\n          selectedRecord[\"ngradecode\"] = this.props.parameterData.defaultGrade;\r\n        } else {\r\n          selectedRecord[\"ngradecode\"] = \"\";\r\n        }\r\n        selectedRecord[fieldName] = comboData;\r\n        const parameterInfo = {\r\n          typeName: DEFAULT_RETURN,\r\n          data: {\r\n            selectedRecord,\r\n            parameterData: {\r\n              ...parameterData,\r\n              needUnit,\r\n              needRoundingDigit,\r\n              needCodedResult,\r\n              needActualResult,\r\n              npredefinedcode,\r\n            },\r\n          },\r\n        };\r\n        this.props.updateStore(parameterInfo);\r\n        break;\r\n\r\n      case 3:\r\n        selectedRecord[fieldName] = comboData;\r\n        this.props.formulaChangeFunction(\r\n          {\r\n            ntestcategorycode: comboData.value,\r\n            nFlag: 2,\r\n            userinfo: this.props.userInfo,\r\n          },\r\n          this.props.formulaData,\r\n          1,\r\n          selectedRecord,\r\n          \"/changeTestCatgoryInFormula\"\r\n        );\r\n        break;\r\n\r\n      case 4:\r\n        selectedRecord[fieldName] = comboData;\r\n        this.props.formulaChangeFunction(\r\n          {\r\n            ntestcode: comboData.value,\r\n            nFlag: 3,\r\n            userinfo: this.props.userInfo,\r\n          },\r\n          this.props.formulaData,\r\n          2,\r\n          selectedRecord,\r\n          \"/changeTestInFormula\"\r\n        );\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  onEsignInputOnChange = (event) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    if (event.target.type === \"checkbox\") {\r\n      selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n    } else {\r\n      selectedRecord[event.target.name] = event.target.value;\r\n    }\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n  onInputOnChange = (event, caseNo, optional) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    switch (caseNo) {\r\n      case 1:\r\n        if (event.target.type === \"checkbox\") {\r\n          selectedRecord[event.target.name] =\r\n            event.target.checked === true\r\n              ? transactionStatus.YES\r\n              : transactionStatus.NO;\r\n        } else if (event.target.type === \"radio\") {\r\n          selectedRecord[event.target.name] = optional;\r\n          //  selectedRecord[\"sfilename\"]=\"\";\r\n        } else {\r\n          selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n        break;\r\n\r\n      case 4:\r\n        const inputValue = event.target.value;\r\n        if (/^-?\\d*?\\.?\\d*?$/.test(inputValue) || inputValue === \"\") {\r\n          selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n        break;\r\n\r\n      case 5:\r\n        if (\r\n          optional.ndynamicformulafieldcode === FORMULAFIELDTYPE.INTEGER &&\r\n          optional.sdescription.indexOf(\"P$\") === -1\r\n        ) {\r\n          const value = event.target.value.replace(/[^-^0-9]/g, \"\");\r\n          const dynamicField = this.state.dynamicField || [];\r\n          if (/^-?\\d*?$/.test(value)) {\r\n            if (!selectedRecord[\"formulainput\"]) {\r\n              selectedRecord[\"formulainput\"] = {};\r\n            }\r\n            selectedRecord[\"formulainput\"][event.target.name] = value;\r\n            dynamicField[event.target.name] = {\r\n              sparameter: optional.sdescription,\r\n              svalues: value,\r\n            };\r\n          } else if (value === \"\") {\r\n            if (!selectedRecord[\"formulainput\"]) {\r\n              selectedRecord[\"formulainput\"] = {};\r\n            }\r\n            selectedRecord[\"formulainput\"][event.target.name] = value;\r\n            dynamicField[event.target.name] = {\r\n              sparameter: optional.sdescription,\r\n              svalues: value,\r\n            };\r\n          }\r\n          this.setState({ dynamicField, selectedRecord });\r\n          break;\r\n        } else {\r\n          const value = event.target.value.replace(/[^-^0-9.]/g, \"\");\r\n          const dynamicField = this.state.dynamicField || [];\r\n          if (/^-?\\d*?\\.?\\d*?$/.test(value) || value !== \"\") {\r\n            if (!selectedRecord[\"formulainput\"]) {\r\n              selectedRecord[\"formulainput\"] = {};\r\n            }\r\n            selectedRecord[\"formulainput\"][event.target.name] = value;\r\n            dynamicField[event.target.name] = {\r\n              sparameter: optional.sdescription,\r\n              svalues: value,\r\n            };\r\n          }\r\n          this.setState({ dynamicField, selectedRecord });\r\n          break;\r\n        }\r\n\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  onSaveClick = (saveType, formRef) => {\r\n    //add / edit\r\n    let inputData = [];\r\n    inputData[\"userinfo\"] = this.props.userInfo;\r\n    let postParam = undefined;\r\n    let editId = this.props.controlMap.has(\"AddMethodValidity\") && this.props.controlMap.get(\"AddMethodValidity\").ncontrolcode\r\n    // if (this.state.selectedRecord[\"ncommentsubtypecode\"].value === 3) {\r\n    //     if (this.state.selectedRecord[\"spredefinedname\"] === undefined || \r\n    //          this.state.selectedRecord[\"spredefinedname\"] === \"\") {\r\n    //         toast.info(\"Enter PreDefined Name\");\r\n    //         return;\r\n    //     }\r\n    // }\r\n  //   if (this.state.selectedRecord[\"dvalidityenddate\"] !== undefined && this.state.selectedRecord[\"dvaliditystartdate\"] !== undefined) {\r\n  //     if (this.state.selectedRecord[\"dvalidityenddate\"] < this.state.selectedRecord[\"dvaliditystartdate\"]) {\r\n  //         toast.info(this.props.intl.formatMessage({ id: \"IDS_ENDDATEGRATERTHANSTARTDATE\" }));\r\n  //         return;\r\n  //     }\r\n  // }\r\n  let obj= convertDateValuetoString(this.state.selectedRecord[\"dvaliditystartdate\"] ? this.state.selectedRecord[\"dvaliditystartdate\"]: new Date(),this.state.selectedRecord[\"dvalidityenddate\"]?this.state.selectedRecord[\"dvalidityenddate\"]:new Date(),this.props.userInfo);\r\n  this.state.selectedRecord[\"svaliditystartdate\"]=obj.fromDate;\r\n  this.state.selectedRecord[\"svalidityenddate\"]=obj.toDate;\r\n    if (this.props.operation === \"update\") {\r\n        // edit\r\n        postParam = { inputListName: \"methodvalidity\", selectedObject: \"MethodValidity\", primaryKeyField: \"nmethodvaliditycode\",\r\n        primaryKeyValue: this.state.selectedRecord[\"nmethodvaliditycode\"],\r\n         fetchUrl: \"method/getActiveMethodValidityById\", fecthInputObject: { userinfo: this.props.userInfo },\r\n         masterData: this.props.masterData \r\n      }\r\n        inputData[\"methodvalidity\"] = { \"nsitecode\": this.props.userInfo.nmastersitecode };\r\n        \r\n        inputData[\"methodvalidity\"][\"dvaliditystartdate\"] = this.state.selectedRecord[\"dvaliditystartdate\"] ? formatInputDate(this.state.selectedRecord[\"dvaliditystartdate\"]) : formatInputDate(new Date());\r\n        inputData[\"methodvalidity\"][\"dvalidityenddate\"] = this.state.selectedRecord[\"dvalidityenddate\"] ? this.state.selectedRecord[\"dvalidityenddate\"] : new Date();\r\n        inputData[\"methodvalidity\"][\"svaliditystartdate\"] = this.state.selectedRecord[\"svaliditystartdate\"] ? this.state.selectedRecord[\"svaliditystartdate\"] : new Date();\r\n        inputData[\"methodvalidity\"][\"svalidityenddate\"] = this.state.selectedRecord[\"svalidityenddate\"] ? this.state.selectedRecord[\"svalidityenddate\"] : new Date();\r\n        inputData[\"methodvalidity\"][\"nmethodcode\"] =this.props.selectedMethod.nmethodcode;\r\n        inputData[\"methodvalidity\"][\"nmethodvaliditycode\"] =this.state.selectedRecord[\"nmethodvaliditycode\"] ? this.state.selectedRecord[\"nmethodvaliditycode\"] : 0;\r\n        editId = this.props.controlMap.has(\"EditMethodValidity\") && this.props.controlMap.get(\"EditMethodValidity\").ncontrolcode\r\n    } else {\r\n        inputData[\"methodvalidity\"] = { \"nsitecode\": this.props.userInfo.nmastersitecode };\r\n        \r\n        inputData[\"methodvalidity\"][\"dvaliditystartdate\"] = this.state.selectedRecord[\"dvaliditystartdate\"] ? this.state.selectedRecord[\"dvaliditystartdate\"] :new Date();\r\n        inputData[\"methodvalidity\"][\"dvalidityenddate\"] = this.state.selectedRecord[\"dvalidityenddate\"] ? this.state.selectedRecord[\"dvalidityenddate\"] : new Date();\r\n        inputData[\"methodvalidity\"][\"svaliditystartdate\"] = this.state.selectedRecord[\"svaliditystartdate\"] ? this.state.selectedRecord[\"svaliditystartdate\"] : new Date();\r\n        inputData[\"methodvalidity\"][\"svalidityenddate\"] = this.state.selectedRecord[\"svalidityenddate\"] ? this.state.selectedRecord[\"svalidityenddate\"] : new Date();\r\n        inputData[\"methodvalidity\"][\"nmethodcode\"] =this.props.selectedMethod.nmethodcode;\r\n    }\r\n    \r\n        \r\n    const inputParam = {\r\n        classUrl: \"method\",\r\n        methodUrl: \"MethodValidity\",\r\n        displayName:\"IDS_METHOD\",\r\n        inputData: inputData,\r\n        operation: this.props.operation,\r\n        saveType, formRef, postParam, searchRef: this.searchRef\r\n    }\r\n    const masterData = this.props.masterData;\r\n    const esignNeeded  = showEsign(this.props.esignRights, this.props.userInfo.nformcode, editId)\r\n    if (esignNeeded) {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    else {\r\n        \r\n        this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n    }\r\n  };\r\n  validateEsign = () => {\r\n    const inputParam = {\r\n        inputData: {\r\n            \"userinfo\": {\r\n                ...this.props.userInfo,\r\n                sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n           \r\n            },\r\n            password: this.state.selectedRecord[\"esignpassword\"]\r\n        },\r\n        screenData: this.props.screenData\r\n    }\r\n    this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n}\r\n  ConfirmDelete = (deleteParam, deleteID) => {\r\n    this.confirmMessage.confirm(\r\n      \"deleteMessage\",\r\n      this.props.intl.formatMessage({ id: \"IDS_DELETE\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_OK\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n      () => this.deleteRecord(deleteParam)\r\n    );\r\n  };\r\n  componentDidUpdate(previousProps) {\r\n    if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n      this.setState({ selectedRecord: this.props.selectedRecord });\r\n    }\r\n\r\n    \r\n   \r\n    if (this.props.masterData !== previousProps.masterData) {\r\n      let { methodValidityDataState, selectedRecord } = this.state;\r\n      if (this.props.dataState === undefined) {\r\n        if (this.props.screenName === \"IDS_METHODVALIDITY\") {\r\n          methodValidityDataState = { skip: 0, take: 10 };\r\n        }\r\n      }\r\n      //this.props.masterData.MethodValidity\r\n      \r\n      this.setState({ methodValidityDataState, selectedRecord });\r\n    }\r\n    if (this.props.Login !== previousProps.Login) {\r\n      this.PrevoiusLoginData = previousProps;\r\n    }\r\n\r\n    // if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n    //     this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n    // }\r\n    // if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n    //     const userRoleControlRights = [];\r\n    //     if (this.props.Login.userRoleControlRights) {\r\n    //         this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n    //             userRoleControlRights.push(item.ncontrolcode))\r\n    //     }\r\n    //     const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n    //     this.setState({ userRoleControlRights, controlMap });\r\n    // }\r\n  }\r\n}\r\nexport default injectIntl(MethodValidityView);\r\n"]},"metadata":{},"sourceType":"module"}