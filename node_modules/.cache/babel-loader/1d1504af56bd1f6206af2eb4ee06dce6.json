{"ast":null,"code":"import _slicedToArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import classNames from\"classnames\";import{useDrag,useDrop}from\"react-dnd\";import\"./styles.css\";var ACCEPTS=[\"sidebarItem\",\"column\",\"component\",\"componentrow\",\"row\"];var DropArea=function DropArea(_ref){var data=_ref.data,onDrop=_ref.onDrop,isLast=_ref.isLast,className=_ref.className,isEmpty=_ref.isEmpty;var _useDrop=useDrop({accept:ACCEPTS,drop:function drop(item,monitor){onDrop(data,item);},canDrop:function canDrop(item,monitor){var dropZonePath=data.path;var splitDropZonePath=dropZonePath.split(\"-\");var itemPath=item.path;// sidebar items can always be dropped anywhere\n// sidebar items can always be dropped anywhere\nif(!itemPath){if(splitDropZonePath.length===1){if(data.childrenCount===1){return false;}//  return false;\n}return true;}var splitItemPath=itemPath.split(\"-\");// limit columns when dragging from one row to another row\n// limit columns when dragging from one row to another row\nvar dropZonePathRowIndex=splitDropZonePath[0];var itemPathRowIndex=splitItemPath[0];var diffRow=dropZonePathRowIndex!==itemPathRowIndex;if(diffRow&&splitDropZonePath.length===2&&data.childrenCount>=3){return false;}// Invalid (Can't drop a parent element (row) into a child (column))\n// Invalid (Can't drop a parent element (row) into a child (column))\nvar parentDropInChild=splitItemPath.length<splitDropZonePath.length;if(parentDropInChild)return false;// Current item can't possible move to it's own location\n// Current item can't possible move to it's own location\nif(itemPath===dropZonePath)return false;// Current area\n// Current area\nif(splitItemPath.length===splitDropZonePath.length){var pathToItem=splitItemPath.slice(0,-1).join(\"-\");var currentItemIndex=Number(splitItemPath.slice(-1)[0]);var pathToDropZone=splitDropZonePath.slice(0,-1).join(\"-\");var currentDropZoneIndex=Number(splitDropZonePath.slice(-1)[0]);if(pathToItem===pathToDropZone){var nextDropZoneIndex=currentItemIndex+1;if(nextDropZoneIndex===currentDropZoneIndex)return false;}}if(splitItemPath.length>1){if(splitDropZonePath.length===1){return false;}else{return true;}}return true;},collect:function collect(monitor){return{isOver:monitor.isOver(),canDrop:monitor.canDrop()};}}),_useDrop2=_slicedToArray(_useDrop,2),_useDrop2$=_useDrop2[0],isOver=_useDrop2$.isOver,canDrop=_useDrop2$.canDrop,drop=_useDrop2[1];var isActive=!isOver&&canDrop;var isOkay=isOver&&canDrop;return/*#__PURE__*/React.createElement(\"div\",{className:classNames(\"\".concat(isEmpty?\"emptyDropZone\":\"dropZone\"),\"\".concat(isActive?'active':isOkay?\"okay\":\"\"),isLast,className),ref:drop});};export default DropArea;","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/components/droparea/DropArea.jsx"],"names":["React","classNames","useDrag","useDrop","ACCEPTS","DropArea","data","onDrop","isLast","className","isEmpty","accept","drop","item","monitor","canDrop","dropZonePath","path","splitDropZonePath","split","itemPath","length","childrenCount","splitItemPath","dropZonePathRowIndex","itemPathRowIndex","diffRow","parentDropInChild","pathToItem","slice","join","currentItemIndex","Number","pathToDropZone","currentDropZoneIndex","nextDropZoneIndex","collect","isOver","isActive","isOkay"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport \"./styles.css\"\r\nconst ACCEPTS = [\"sidebarItem\", \"column\", \"component\", \"componentrow\", \"row\"];\r\n\r\nconst DropArea = ({ data, onDrop, isLast, className, isEmpty }) => {\r\n\r\n  const [{ isOver, canDrop }, drop] = useDrop({\r\n    accept: ACCEPTS,\r\n    drop: (item, monitor) => {\r\n      onDrop(data, item);\r\n    },\r\n    canDrop: (item, monitor) => {\r\n      const dropZonePath = data.path;\r\n      const splitDropZonePath = dropZonePath.split(\"-\");\r\n      const itemPath = item.path;\r\n\r\n      // sidebar items can always be dropped anywhere\r\n      if (!itemPath) {\r\n        if (splitDropZonePath.length === 1) {\r\n          if (data.childrenCount === 1) {\r\n            return false;\r\n          }\r\n          //  return false;\r\n        }\r\n        return true;\r\n      }\r\n\r\n      const splitItemPath = itemPath.split(\"-\");\r\n\r\n      // limit columns when dragging from one row to another row\r\n      const dropZonePathRowIndex = splitDropZonePath[0];\r\n      const itemPathRowIndex = splitItemPath[0];\r\n      const diffRow = dropZonePathRowIndex !== itemPathRowIndex;\r\n      if (\r\n        diffRow &&\r\n        splitDropZonePath.length === 2 &&\r\n        data.childrenCount >= 3\r\n      ) {\r\n        return false;\r\n      }\r\n\r\n\r\n      // Invalid (Can't drop a parent element (row) into a child (column))\r\n      const parentDropInChild = splitItemPath.length < splitDropZonePath.length;\r\n      if (parentDropInChild) return false;\r\n\r\n      // Current item can't possible move to it's own location\r\n      if (itemPath === dropZonePath) return false;\r\n\r\n      // Current area\r\n      if (splitItemPath.length === splitDropZonePath.length) {\r\n        const pathToItem = splitItemPath.slice(0, -1).join(\"-\");\r\n        const currentItemIndex = Number(splitItemPath.slice(-1)[0]);\r\n\r\n        const pathToDropZone = splitDropZonePath.slice(0, -1).join(\"-\");\r\n        const currentDropZoneIndex = Number(splitDropZonePath.slice(-1)[0]);\r\n\r\n        if (pathToItem === pathToDropZone) {\r\n          const nextDropZoneIndex = currentItemIndex + 1;\r\n          if (nextDropZoneIndex === currentDropZoneIndex) return false;\r\n        }\r\n      }\r\n\r\n      if (splitItemPath.length > 1) {\r\n        if (splitDropZonePath.length === 1) {\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n\r\n\r\n      return true;\r\n    },\r\n    collect: (monitor) => ({\r\n      isOver: monitor.isOver(),\r\n      canDrop: monitor.canDrop()\r\n    })\r\n  });\r\n\r\n  const isActive = !isOver && canDrop;\r\n  const isOkay = isOver && canDrop;\r\n  return (\r\n    <div\r\n      className={classNames(`${isEmpty ? \"emptyDropZone\" : \"dropZone\"}`, `${isActive ? 'active' : isOkay ? \"okay\" : \"\"}`, isLast, className)}\r\n      ref={drop}\r\n   \r\n      ></div>\r\n  );\r\n};\r\nexport default DropArea;\r\n"]},"metadata":{},"sourceType":"module"}