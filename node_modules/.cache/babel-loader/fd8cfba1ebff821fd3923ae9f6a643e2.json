{"ast":null,"code":"import _slicedToArray from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import classNames from\"classnames\";import{useDrop}from\"react-dnd\";import{COMPONENT,ROW,COLUMN,COMPONENTROW}from\"./constants\";import\"./styles.css\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faTrashAlt}from\"@fortawesome/free-solid-svg-icons\";var ACCEPTS=[ROW,COLUMN,COMPONENT,COMPONENTROW];var TrashDropZone=function TrashDropZone(_ref){var data=_ref.data,onDrop=_ref.onDrop;var _useDrop=useDrop({accept:ACCEPTS,drop:function drop(item,monitor){onDrop(data,item);},canDrop:function canDrop(item,monitor){var layout=data;var itemPath=item.path;var splitItemPath=itemPath.split(\"-\");var itemPathRowIndex=splitItemPath[0];var itemRowChildrenLength=layout[itemPathRowIndex]&&layout[itemPathRowIndex].children.length;// prevent removing a col when row has only one col\n// prevent removing a col when row has only one col\nif(item.type===COLUMN&&itemRowChildrenLength&&itemRowChildrenLength<2){return false;}if(item.data&&item.data.templatemandatory){return false;}else{return validateDrop(item);}// return true;\n},collect:function collect(monitor){return{isOver:monitor.isOver(),canDrop:monitor.canDrop()};}}),_useDrop2=_slicedToArray(_useDrop,2),_useDrop2$=_useDrop2[0],isOver=_useDrop2$.isOver,canDrop=_useDrop2$.canDrop,drop=_useDrop2[1];var validateDrop=function validateDrop(data){var mandatoryComponent=[];data.children?data.children.length>0&&data.children.map(function(item){return item.type===COMPONENT?item.templatemandatory?mandatoryComponent.push(1):\"\":validateDrop(item);}):data.type===COMPONENT&&data.templatemandatory&&mandatoryComponent.push(1);if(mandatoryComponent.length>0){return false;}else{return true;}};var isActive=isOver&&canDrop;return/*#__PURE__*/React.createElement(\"div\",{className:classNames(\"trashDropZone\",{active:isActive}),ref:drop},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt}));};export default TrashDropZone;","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/components/droparea/TrashDropZone.jsx"],"names":["React","classNames","useDrop","COMPONENT","ROW","COLUMN","COMPONENTROW","FontAwesomeIcon","faTrashAlt","ACCEPTS","TrashDropZone","data","onDrop","accept","drop","item","monitor","canDrop","layout","itemPath","path","splitItemPath","split","itemPathRowIndex","itemRowChildrenLength","children","length","type","templatemandatory","validateDrop","collect","isOver","mandatoryComponent","map","push","isActive","active"],"mappings":"iKAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,OAASC,SAAT,CAAoBC,GAApB,CAAyBC,MAAzB,CAAiCC,YAAjC,KAAqD,aAArD,CACA,MAAO,cAAP,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,OAASC,UAAT,KAA2B,mCAA3B,CAEA,GAAMC,CAAAA,OAAO,CAAG,CAACL,GAAD,CAAMC,MAAN,CAAcF,SAAd,CAAyBG,YAAzB,CAAhB,CAEA,GAAMI,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAAsB,IAAnBC,CAAAA,IAAmB,MAAnBA,IAAmB,CAAbC,MAAa,MAAbA,MAAa,CAC1C,aAAoCV,OAAO,CAAC,CAC1CW,MAAM,CAAEJ,OADkC,CAE1CK,IAAI,CAAE,cAACC,IAAD,CAAOC,OAAP,CAAmB,CACvBJ,MAAM,CAACD,IAAD,CAAOI,IAAP,CAAN,CACD,CAJyC,CAK1CE,OAAO,CAAE,iBAACF,IAAD,CAAOC,OAAP,CAAmB,CAC1B,GAAME,CAAAA,MAAM,CAAGP,IAAf,CACA,GAAMQ,CAAAA,QAAQ,CAAGJ,IAAI,CAACK,IAAtB,CACA,GAAMC,CAAAA,aAAa,CAAGF,QAAQ,CAACG,KAAT,CAAe,GAAf,CAAtB,CACA,GAAMC,CAAAA,gBAAgB,CAAGF,aAAa,CAAC,CAAD,CAAtC,CACA,GAAMG,CAAAA,qBAAqB,CACzBN,MAAM,CAACK,gBAAD,CAAN,EAA4BL,MAAM,CAACK,gBAAD,CAAN,CAAyBE,QAAzB,CAAkCC,MADhE,CAGA;AAAA;AACA,GACEX,IAAI,CAACY,IAAL,GAActB,MAAd,EACAmB,qBADA,EAEAA,qBAAqB,CAAG,CAH1B,CAIE,CACA,MAAO,MAAP,CACD,CACD,GAAIT,IAAI,CAACJ,IAAL,EAAaI,IAAI,CAACJ,IAAL,CAAUiB,iBAA3B,CAA8C,CAC5C,MAAO,MAAP,CACD,CAFD,IAEO,CAEL,MAAOC,CAAAA,YAAY,CAACd,IAAD,CAAnB,CACD,CAED;AACD,CA7ByC,CA8B1Ce,OAAO,CAAE,iBAACd,OAAD,QAAc,CACrBe,MAAM,CAAEf,OAAO,CAACe,MAAR,EADa,CAErBd,OAAO,CAAED,OAAO,CAACC,OAAR,EAFY,CAAd,EA9BiC,CAAD,CAA3C,8DAASc,MAAT,YAASA,MAAT,CAAiBd,OAAjB,YAAiBA,OAAjB,CAA4BH,IAA5B,cAmCA,GAAMe,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAClB,IAAD,CAAU,CAC7B,GAAIqB,CAAAA,kBAAkB,CAAG,EAAzB,CACArB,IAAI,CAACc,QAAL,CAAgBd,IAAI,CAACc,QAAL,CAAcC,MAAd,CAAuB,CAAvB,EACdf,IAAI,CAACc,QAAL,CAAcQ,GAAd,CAAkB,SAAAlB,IAAI,QACpBA,CAAAA,IAAI,CAACY,IAAL,GAAcxB,SAAd,CACEY,IAAI,CAACa,iBAAL,CAAyBI,kBAAkB,CAACE,IAAnB,CAAwB,CAAxB,CAAzB,CACI,EAFN,CAGIL,YAAY,CAACd,IAAD,CAJI,EAAtB,CADF,CAOIJ,IAAI,CAACgB,IAAL,GAAcxB,SAAd,EAA2BQ,IAAI,CAACiB,iBAAhC,EAAqDI,kBAAkB,CAACE,IAAnB,CAAwB,CAAxB,CAPzD,CAQA,GAAIF,kBAAkB,CAACN,MAAnB,CAA4B,CAAhC,CAAmC,CACjC,MAAO,MAAP,CACD,CAFD,IAEO,CACL,MAAO,KAAP,CACD,CAEF,CAhBD,CAiBA,GAAMS,CAAAA,QAAQ,CAAGJ,MAAM,EAAId,OAA3B,CACA,mBACE,2BACE,SAAS,CAAEhB,UAAU,CAAC,eAAD,CAAkB,CAAEmC,MAAM,CAAED,QAAV,CAAlB,CADvB,CAEE,GAAG,CAAErB,IAFP,eAIE,oBAAC,eAAD,EAAiB,IAAI,CAAEN,UAAvB,EAJF,CADF,CASD,CA/DD,CAgEA,cAAeE,CAAAA,aAAf","sourcesContent":["import React from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport { COMPONENT, ROW, COLUMN, COMPONENTROW } from \"./constants\";\r\nimport \"./styles.css\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst ACCEPTS = [ROW, COLUMN, COMPONENT, COMPONENTROW];\r\n\r\nconst TrashDropZone = ({ data, onDrop }) => {\r\n  const [{ isOver, canDrop }, drop] = useDrop({\r\n    accept: ACCEPTS,\r\n    drop: (item, monitor) => {\r\n      onDrop(data, item);\r\n    },\r\n    canDrop: (item, monitor) => {\r\n      const layout = data;\r\n      const itemPath = item.path;\r\n      const splitItemPath = itemPath.split(\"-\");\r\n      const itemPathRowIndex = splitItemPath[0];\r\n      const itemRowChildrenLength =\r\n        layout[itemPathRowIndex] && layout[itemPathRowIndex].children.length;\r\n\r\n      // prevent removing a col when row has only one col\r\n      if (\r\n        item.type === COLUMN &&\r\n        itemRowChildrenLength &&\r\n        itemRowChildrenLength < 2\r\n      ) {\r\n        return false;\r\n      }\r\n      if (item.data && item.data.templatemandatory) {\r\n        return false;\r\n      } else {\r\n\r\n        return validateDrop(item);\r\n      }\r\n\r\n      // return true;\r\n    },\r\n    collect: (monitor) => ({\r\n      isOver: monitor.isOver(),\r\n      canDrop: monitor.canDrop()\r\n    })\r\n  });\r\n  const validateDrop = (data) => {\r\n    let mandatoryComponent = [];\r\n    data.children ? data.children.length > 0 &&\r\n      data.children.map(item =>\r\n        item.type === COMPONENT ?\r\n          item.templatemandatory ? mandatoryComponent.push(1)\r\n            : \"\"\r\n          : validateDrop(item)\r\n      )\r\n      : data.type === COMPONENT && data.templatemandatory && mandatoryComponent.push(1)\r\n    if (mandatoryComponent.length > 0) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n\r\n  }\r\n  const isActive = isOver && canDrop;\r\n  return (\r\n    <div\r\n      className={classNames(\"trashDropZone\", { active: isActive })}\r\n      ref={drop}\r\n    >\r\n      <FontAwesomeIcon icon={faTrashAlt} />\r\n      {/* Drop Columns/Component to remove */}\r\n    </div>\r\n  );\r\n};\r\nexport default TrashDropZone;\r\n"]},"metadata":{},"sourceType":"module"}