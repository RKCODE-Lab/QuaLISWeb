{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import{process}from'@progress/kendo-data-query';import React from'react';import{FormattedMessage,injectIntl}from'react-intl';import{DEFAULT_RETURN}from'../../../actions/LoginTypes';import DataGrid from'../../../components/data-grid/data-grid.component';import{transactionStatus}from'../../../components/Enumeration';import SlideOutModal from'../../../components/slide-out-modal/SlideOutModal';import Esign from'../../audittrail/Esign';import AddComment from'./AddComment';import{updateStore,viewAttachment,validateEsignCredential,crudMaster,getCommentsCombo,deleteComment,getSampleTestComments}from'../../../actions';import{connect}from'react-redux';import{faPlus}from'@fortawesome/free-solid-svg-icons';import{Nav}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Comments=/*#__PURE__*/function(_React$Component){_inherits(Comments,_React$Component);var _super=_createSuper(Comments);function Comments(props){var _this;_classCallCheck(this,Comments);_this=_super.call(this,props);_this.onComboChange=function(comboData,comboName){var addFileId=_this.props.controlMap.has(_this.props.addName)&&_this.props.controlMap.get(_this.props.addName).ncontrolcode;if(comboData){var selectedRecord=_this.state.selectedRecord||{};if(comboName==='ncommentsubtypecode'){selectedRecord[comboName]=comboData;_this.props.getSampleTestComments(selectedRecord,_this.props.Login.userInfo);}else{if(comboName==='nsampletestcommentscode'){selectedRecord['scomments']=comboData.item.scomments;}selectedRecord[comboName]=comboData;_this.setState({selectedRecord:selectedRecord});}}};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){// const masterData = this.props.Login.masterData;\n// let inputData = {}\n// let inputParam = {}\n// inputData[\"userinfo\"] = this.props.Login.userInfo;\n// if(this.props.Login.screenName === \"IDS_SAMPLECOMMENTS\") {\n//     // let saveParam={userInfo:this.props.Login.userInfo,\n//     //     selectedRecord:this.state.selectedRecord,\n//     //     masterData:this.props.Login.masterData,\n//     //     saveType, formRef,\n//     //     operation:this.props.Login.operation\n//     // }\n//     // inputParam = onSaveSampleAttachment(saveParam);\n// }else if(this.props.Login.screenName === \"IDS_TESTCOMMENTS\") {\n//     let saveParam={\n//         userInfo:this.props.Login.userInfo,\n//         isTestComment:this.props.isTestComment,\n//         selectedRecord:this.state.selectedRecord,\n//         masterData:this.props.Login.masterData,\n//         saveType, formRef,\n//         operation:this.props.Login.operation,\n//         selectedMaster:this.props.selectedMaster\n//     }\n//     inputParam = onSaveTestComments(saveParam);\n// }\n// if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n//     const updateInfo = {\n//         typeName: DEFAULT_RETURN,\n//         data: {\n//             loadEsign: true,\n//             screenData: { inputParam, masterData },\n//             operation: this.props.Login.operation,\n//             screenName: this.props.Login.screenName,\n//         }\n//     }\n//     this.props.updateStore(updateInfo);\n// }\n// else {\n//     this.props.crudMaster(inputParam, masterData, \"openCommentModal\");\n// }\n_this.props.onSaveClick(saveType,formRef,_this.state.selectedRecord);};_this.handleClose=function(){var loadEsign=_this.props.Login.loadEsign;var openCommentModal=_this.props.Login.openCommentModal;var selectedRecord=_this.props.Login.selectedRecord;var operation=_this.props.Login.operation;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openCommentModal=false;selectedRecord={};operation=undefined;}else{loadEsign=false;selectedRecord[\"esigncomments\"]=\"\";selectedRecord[\"esignpassword\"]=\"\";}}else{openCommentModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openCommentModal:openCommentModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedParamId:null,operation:operation}};_this.props.updateStore(updateInfo);};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};if(_this.props.Login.operation==='dynamic'){_this.props.validateEsignforApproval(inputParam,\"openChildModal\");}else{_this.props.validateEsignCredential(inputParam,\"openCommentModal\");}};_this.state={selectedRecord:{}};return _this;}_createClass(Comments,[{key:\"render\",value:function render(){var _this2=this;var extractedColumnList=[];if(this.props.Login.activeTestTab===\"IDS_SAMPLECOMMENTS\"){// if (this.props.masterData && this.props.masterData[\"RegSubTypeValue\"] && \n//    this.props.masterData[\"RegSubTypeValue\"].nneedsubsample || this.props.masterData[\"nneedsubsample\"]){\n//     extractedColumnList.push({\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\", \"width\": \"155px\"} );\n// }\n// else{\nextractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"155px\"});//}\nextractedColumnList.push(//  {\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"150px\"},\n// { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"200px\" },\n{\"idsName\":\"IDS_COMMENTS\",\"dataField\":\"scomments\",\"width\":\"200px\",jsonField:true},// { \"idsName\": \"IDS_SAMPLETESTCOMMENTS\", \"dataField\": \"ssampletestcommentname\", \"width\": \"400px\" },\n{\"idsName\":\"IDS_SCREENNAME\",\"dataField\":\"sdisplayname\",\"width\":\"150px\"},{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"susername\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERROLE\",\"dataField\":\"suserrolename\",\"width\":\"200px\"});}else if(this.props.Login.activeTestTab===\"IDS_SUBSAMPLECOMMENTS\"){extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"155px\"});if(this.props.masterData[\"RegSubTypeValue\"]&&this.props.masterData[\"RegSubTypeValue\"].nneedsubsample||this.props.masterData[\"nneedsubsample\"]){extractedColumnList.push({\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"155px\"});}//else{\n//    extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\", \"width\": \"155px\"});\n//}\nextractedColumnList.push(//  {\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"100px\"},\n// { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"200px\" },\n{\"idsName\":\"IDS_COMMENTS\",\"dataField\":\"scomments\",\"width\":\"200px\",jsonField:true},// { \"idsName\": \"IDS_SAMPLETESTCOMMENTS\", \"dataField\": \"ssampletestcommentname\", \"width\": \"400px\" },\n{\"idsName\":\"IDS_SCREENNAME\",\"dataField\":\"sdisplayname\",\"width\":\"150px\"},{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"susername\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERROLE\",\"dataField\":\"suserrolename\",\"width\":\"200px\"});}else{if(this.props.Login.activeTestTab===\"IDS_TESTCOMMENTS\"){extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"155px\"});if(this.props.masterData&&this.props.masterData[\"RealRegSubTypeValue\"]&&this.props.masterData[\"RealRegSubTypeValue\"].nneedsubsample||this.props.masterData[\"nneedsubsample\"]){extractedColumnList.push({\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"155px\"});}// else{\n//     extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\", \"width\": \"155px\"});\n// }\nextractedColumnList.push(// extractedColumnList = [\n// {\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"100px\"},\n// {\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"150px\"},\n{\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestsynonym\",\"width\":\"200px\",jsonField:true},{\"idsName\":\"IDS_COMMENTS\",\"dataField\":\"scomments\",\"width\":\"200px\",jsonField:true},// { \"idsName\": \"IDS_SAMPLETESTCOMMENTS\", \"dataField\": \"ssampletestcommentname\", \"width\": \"400px\" },\n{\"idsName\":\"IDS_SCREENNAME\",\"dataField\":\"sdisplayname\",\"width\":\"150px\"},{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"susername\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERROLE\",\"dataField\":\"suserrolename\",\"width\":\"200px\"});// ];\n}}var addFileId=this.props.controlMap.has(this.props.addName)&&this.props.controlMap.get(this.props.addName).ncontrolcode;var mandatoryFields=[];if(this.props.isTestComment){if(this.props.masterData&&this.props.masterData[\"RegSubTypeValue\"]&&this.props.masterData[\"RegSubTypeValue\"].nneedsubsample){extractedColumnList.push({\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"155px\"});}else{extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"155px\"});}extractedColumnList.push(//  { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"200px\" },\n{\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestsynonym\",\"width\":\"200px\",jsonField:true},{\"idsName\":\"IDS_COMMENTS\",\"dataField\":\"scomments\",\"width\":\"200px\",jsonField:true},{\"idsName\":\"IDS_SAMPLETESTCOMMENTS\",\"dataField\":\"ssampletestcommentname\",\"width\":\"400px\"},{\"idsName\":\"IDS_SCREENNAME\",\"dataField\":\"sdisplayname\",\"width\":\"150px\"},{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"susername\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERROLE\",\"dataField\":\"suserrolename\",\"width\":\"200px\"});//]\nmandatoryFields=[{\"idsName\":\"IDS_SAMPLETESTCOMMENTS\",\"dataField\":\"nsamplecommentscode\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_COMMENT\",\"dataField\":\"scomments\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}else if(this.props.isSampleTestComment&&this.props.isSampleTestComment===true){extractedColumnList=[];mandatoryFields=[];extractedColumnList.push({\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestsynonym\",\"width\":\"200px\"},{\"idsName\":\"IDS_COMMENTNAME\",\"dataField\":\"scommentsubtype\",\"width\":\"200px\"},{\"idsName\":\"IDS_ABBREVIATIONNAME\",\"dataField\":\"spredefinedname\",\"width\":\"200px\"},{\"idsName\":\"IDS_COMMENT\",\"dataField\":\"scomments\",\"width\":\"200px\"},{\"idsName\":\"IDS_SCREENNAME\",\"dataField\":\"sdisplayname\",\"width\":\"150px\"},{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"susername\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERROLE\",\"dataField\":\"suserrolename\",\"width\":\"200px\"});if(this.props.Login.isAbbrevationneeded){mandatoryFields=[{\"idsName\":\"IDS_COMMENTNAME\",\"dataField\":\"ncommentsubtypecode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"combo\"},{\"idsName\":\"IDS_ABBREVIATIONNAME\",\"dataField\":\"nsampletestcommentscode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"combo\"},{\"idsName\":\"IDS_COMMENT\",\"dataField\":\"scomments\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}else{mandatoryFields=[{\"idsName\":\"IDS_COMMENTNAME\",\"dataField\":\"ncommentsubtypecode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"combo\"},{\"idsName\":\"IDS_COMMENT\",\"dataField\":\"scomments\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}}else{mandatoryFields=[{\"idsName\":\"IDS_COMMENT\",\"dataField\":\"scomments\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"actions-stripe border-bottom\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"add_\".concat(this.props.Login.screenName,\"_comment\"),className:\"add-txt-btn\",hidden:this.props.userRoleControlRights.indexOf(addFileId)===-1,onClick:function onClick(){return _this2.props.getCommentsCombo({userInfo:_this2.props.Login.userInfo,operation:\"create\",ncontrolCode:addFileId,screenName:_this2.props.screenName,modalName:\"openCommentModal\",masterList:_this2.props.masterList,masterAlertStatus:_this2.props.masterAlertStatus,isSampleTestComment:_this2.props.isSampleTestComment});}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_COMMENT\",defaultMessage:\" Comment\"})))),/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:this.props.primaryKeyField,data:this.props.Comments,dataResult:process(this.props.Comments||[],this.props.dataState),dataState:this.props.dataState,dataStateChange:this.props.dataStateChange,extractedColumnList:extractedColumnList,userInfo:this.props.userInfo,controlMap:this.props.controlMap,userRoleControlRights:this.props.userRoleControlRights,inputParam:this.props.inputParam,pageable:true,expandField:\"expanded\",hideDetailBand:true,isActionRequired:this.props.isActionRequired!==undefined?this.props.isActionRequired:true,deleteParam:this.props.deleteParam||\"\",fetchRecord:this.props.fetchRecord||\"\",editParam:_objectSpread(_objectSpread({},this.props.editParam),{},{isSampleTestComment:this.props.isSampleTestComment,modalName:\"openCommentModal\"})||\"\",deleteRecord:this.props.deleteComment||\"\",selectedId:this.props.selectedId,isToolBarRequired:false,scrollable:\"scrollable\",gridHeight:\"500px\",methodUrl:this.props.methodUrl,jsonField:\"jsondata\"}),this.props.Login.openCommentModal?/*#__PURE__*/React.createElement(SlideOutModal,{onSaveClick:this.onSaveClick,operation:this.props.Login.operation,screenName:this.props.Login.screenName,closeModal:this.handleClose,show:this.props.Login.openCommentModal,inputParam:this.props.Login.inputParam,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(AddComment,{selectedRecord:this.state.selectedRecord,jsonField:\"jsondata\",SampleTestComments:this.props.Login.sampleTestComments,predefcomments:this.props.Login.predefcomments&&this.props.Login.predefcomments,CommentSubType:this.props.Login.CommentSubType&&this.props.Login.CommentSubType,onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,isTestComment:this.props.isTestComment,isSampleTestComment:this.props.isSampleTestComment,maxSize:20,maxFiles:3,operation:this.props.Login.operation,selectedListName:this.props.selectedListName,displayName:this.props.displayName,masterList:this.props.masterList})}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}}}]);return Comments;}(React.Component);export default connect(mapStateToProps,{updateStore:updateStore,viewAttachment:viewAttachment,validateEsignCredential:validateEsignCredential,crudMaster:crudMaster,getCommentsCombo:getCommentsCombo,deleteComment:deleteComment,getSampleTestComments:getSampleTestComments})(injectIntl(Comments));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/attachmentscomments/comments/Comments.jsx"],"names":["process","React","FormattedMessage","injectIntl","DEFAULT_RETURN","DataGrid","transactionStatus","SlideOutModal","Esign","AddComment","updateStore","viewAttachment","validateEsignCredential","crudMaster","getCommentsCombo","deleteComment","getSampleTestComments","connect","faPlus","Nav","FontAwesomeIcon","mapStateToProps","state","Login","Comments","props","onComboChange","comboData","comboName","addFileId","controlMap","has","addName","get","ncontrolcode","selectedRecord","userInfo","item","scomments","setState","onInputOnChange","event","target","type","name","checked","YES","NO","value","onSaveClick","saveType","formRef","handleClose","loadEsign","openCommentModal","operation","undefined","updateInfo","typeName","data","selectedParamId","validateEsign","inputParam","inputData","sreason","nreasoncode","spredefinedreason","label","password","screenData","validateEsignforApproval","extractedColumnList","activeTestTab","push","jsonField","masterData","nneedsubsample","mandatoryFields","isTestComment","isSampleTestComment","isAbbrevationneeded","screenName","userRoleControlRights","indexOf","ncontrolCode","modalName","masterList","masterAlertStatus","primaryKeyField","dataState","dataStateChange","isActionRequired","deleteParam","fetchRecord","editParam","selectedId","methodUrl","masterStatus","sampleTestComments","predefcomments","CommentSubType","selectedListName","displayName","previousProps","Component"],"mappings":"yxBAAA,OAASA,OAAT,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,gBAAT,CAA2BC,UAA3B,KAA6C,YAA7C,CACA,OAASC,cAAT,KAA+B,6BAA/B,CACA,MAAOC,CAAAA,QAAP,KAAqB,mDAArB,CACA,OAASC,iBAAT,KAAkC,iCAAlC,CACA,MAAOC,CAAAA,aAAP,KAA0B,mDAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,wBAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,OAASC,WAAT,CAAsBC,cAAtB,CAAsCC,uBAAtC,CAA+DC,UAA/D,CAA2EC,gBAA3E,CAA6FC,aAA7F,CAA2GC,qBAA3G,KAAwI,kBAAxI,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,MAAT,KAAuB,mCAAvB,CACA,OAASC,GAAT,KAAoB,iBAApB,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,KAAK,CAAI,CAC7B,MAAQ,CAAEC,KAAK,CAAED,KAAK,CAACC,KAAf,CAAR,CACH,CAFD,C,GAGMC,CAAAA,Q,gHACF,kBAAYC,KAAZ,CAAmB,0CACf,uBAAMA,KAAN,EADe,MA8NnBC,aA9NmB,CA8NH,SAACC,SAAD,CAAYC,SAAZ,CAA0B,CACtC,GAAIC,CAAAA,SAAS,CAAG,MAAKJ,KAAL,CAAWK,UAAX,CAAsBC,GAAtB,CAA0B,MAAKN,KAAL,CAAWO,OAArC,GAAiD,MAAKP,KAAL,CAAWK,UAAX,CAAsBG,GAAtB,CAA0B,MAAKR,KAAL,CAAWO,OAArC,EAA8CE,YAA/G,CACA,GAAIP,SAAJ,CAAe,CACX,GAAIQ,CAAAA,cAAc,CAAG,MAAKb,KAAL,CAAWa,cAAX,EAA6B,EAAlD,CACA,GAAIP,SAAS,GAAK,qBAAlB,CAAyC,CACrCO,cAAc,CAACP,SAAD,CAAd,CAA4BD,SAA5B,CACA,MAAKF,KAAL,CAAWT,qBAAX,CAAiCmB,cAAjC,CAAgD,MAAKV,KAAL,CAAWF,KAAX,CAAiBa,QAAjE,EACH,CAHD,IAKA,CACI,GAAIR,SAAS,GAAK,yBAAlB,CAA6C,CACzCO,cAAc,CAAC,WAAD,CAAd,CAA8BR,SAAS,CAACU,IAAV,CAAeC,SAA7C,CACH,CACDH,cAAc,CAACP,SAAD,CAAd,CAA4BD,SAA5B,CACA,MAAKY,QAAL,CAAc,CAAEJ,cAAc,CAAdA,cAAF,CAAd,EACH,CAEJ,CACJ,CAhPkB,OAiPnBK,eAjPmB,CAiPD,SAACC,KAAD,CAAW,CACzB,GAAIN,CAAAA,cAAc,CAAG,MAAKb,KAAL,CAAWa,cAAX,EAA6B,EAAlD,CACA,GAAIM,KAAK,CAACC,MAAN,CAAaC,IAAb,GAAsB,UAA1B,CAAsC,CAClCR,cAAc,CAACM,KAAK,CAACC,MAAN,CAAaE,IAAd,CAAd,CAAoCH,KAAK,CAACC,MAAN,CAAaG,OAAb,GAAyB,IAAzB,CAAgCvC,iBAAiB,CAACwC,GAAlD,CAAwDxC,iBAAiB,CAACyC,EAA9G,CACH,CAFD,IAGK,CACDZ,cAAc,CAACM,KAAK,CAACC,MAAN,CAAaE,IAAd,CAAd,CAAoCH,KAAK,CAACC,MAAN,CAAaM,KAAjD,CACH,CACD,MAAKT,QAAL,CAAc,CAAEJ,cAAc,CAAdA,cAAF,CAAd,EACH,CA1PkB,OA2PnBc,WA3PmB,CA2PL,SAACC,QAAD,CAAWC,OAAX,CAAuB,CACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK1B,KAAL,CAAWwB,WAAX,CAAuBC,QAAvB,CAAiCC,OAAjC,CAA0C,MAAK7B,KAAL,CAAWa,cAArD,EACH,CApSkB,OAqSnBiB,WArSmB,CAqSL,UAAM,CAChB,GAAIC,CAAAA,SAAS,CAAG,MAAK5B,KAAL,CAAWF,KAAX,CAAiB8B,SAAjC,CACA,GAAIC,CAAAA,gBAAgB,CAAG,MAAK7B,KAAL,CAAWF,KAAX,CAAiB+B,gBAAxC,CACA,GAAInB,CAAAA,cAAc,CAAG,MAAKV,KAAL,CAAWF,KAAX,CAAiBY,cAAtC,CACA,GAAIoB,CAAAA,SAAS,CAAG,MAAK9B,KAAL,CAAWF,KAAX,CAAiBgC,SAAjC,CACA,GAAI,MAAK9B,KAAL,CAAWF,KAAX,CAAiB8B,SAArB,CAAgC,CAC5B,GAAI,MAAK5B,KAAL,CAAWF,KAAX,CAAiBgC,SAAjB,GAA+B,QAAnC,CAA6C,CACzCF,SAAS,CAAG,KAAZ,CACAC,gBAAgB,CAAG,KAAnB,CACAnB,cAAc,CAAG,EAAjB,CACAoB,SAAS,CAAGC,SAAZ,CACH,CALD,IAMK,CACDH,SAAS,CAAG,KAAZ,CACAlB,cAAc,CAAC,eAAD,CAAd,CAAkC,EAAlC,CACAA,cAAc,CAAC,eAAD,CAAd,CAAkC,EAAlC,CACH,CACJ,CAZD,IAaK,CACDmB,gBAAgB,CAAG,KAAnB,CACAnB,cAAc,CAAG,EAAjB,CACH,CAED,GAAMsB,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEtD,cADK,CAEfuD,IAAI,CAAE,CAAEL,gBAAgB,CAAhBA,gBAAF,CAAoBD,SAAS,CAATA,SAApB,CAA+BlB,cAAc,CAAdA,cAA/B,CAA+CyB,eAAe,CAAE,IAAhE,CAAsEL,SAAS,CAATA,SAAtE,CAFS,CAAnB,CAIA,MAAK9B,KAAL,CAAWf,WAAX,CAAuB+C,UAAvB,EACH,CAjUkB,OAkUnBI,aAlUmB,CAkUH,UAAM,CAClB,GAAMC,CAAAA,UAAU,CAAG,CACfC,SAAS,CAAE,CACP,0CACO,MAAKtC,KAAL,CAAWF,KAAX,CAAiBa,QADxB,MAEI4B,OAAO,CAAE,MAAK1C,KAAL,CAAWa,cAAX,CAA0B,eAA1B,CAFb,CAGI8B,WAAW,CAAC,MAAK3C,KAAL,CAAWa,cAAX,CAA0B,aAA1B,GAA4C,MAAKb,KAAL,CAAWa,cAAX,CAA0B,aAA1B,EAAyCa,KAHrG,CAIIkB,iBAAiB,CAAC,MAAK5C,KAAL,CAAWa,cAAX,CAA0B,aAA1B,GAA4C,MAAKb,KAAL,CAAWa,cAAX,CAA0B,aAA1B,EAAyCgC,KAJ3G,EADO,CAQPC,QAAQ,CAAE,MAAK9C,KAAL,CAAWa,cAAX,CAA0B,eAA1B,CARH,CADI,CAWfkC,UAAU,CAAE,MAAK5C,KAAL,CAAWF,KAAX,CAAiB8C,UAXd,CAAnB,CAaA,GAAI,MAAK5C,KAAL,CAAWF,KAAX,CAAiBgC,SAAjB,GAA+B,SAAnC,CAA8C,CAC1C,MAAK9B,KAAL,CAAW6C,wBAAX,CAAoCR,UAApC,CAAgD,gBAAhD,EACH,CAFD,IAEO,CACH,MAAKrC,KAAL,CAAWb,uBAAX,CAAmCkD,UAAnC,CAA+C,kBAA/C,EACH,CACJ,CArVkB,CAEf,MAAKxC,KAAL,CAAa,CACTa,cAAc,CAAE,EADP,CAAb,CAFe,aAKlB,C,2CACD,iBAAS,iBACL,GAAIoC,CAAAA,mBAAmB,CAAG,EAA1B,CACA,GAAG,KAAK9C,KAAL,CAAWF,KAAX,CAAiBiD,aAAjB,GAAiC,oBAApC,CAAyD,CACrD;AACA;AACA;AACA;AACA;AACID,mBAAmB,CAACE,IAApB,CAAyB,CAAC,UAAU,cAAX,CAA0B,YAAY,OAAtC,CAA+C,QAAS,OAAxD,CAAzB,EACL;AACEF,mBAAmB,CAACE,IAApB,CACG;AACD;AACC,CAAE,UAAW,cAAb,CAA6B,YAAa,WAA1C,CAAuD,QAAS,OAAhE,CAAwEC,SAAS,CAAC,IAAlF,CAHH,CAIG;AACA,CAAE,UAAW,gBAAb,CAA+B,YAAa,cAA5C,CAA4D,QAAS,OAArE,CALH,CAMG,CAAE,UAAW,cAAb,CAA6B,YAAa,WAA1C,CAAuD,QAAS,OAAhE,CANH,CAOG,CAAE,UAAW,cAAb,CAA6B,YAAa,eAA1C,CAA2D,QAAS,OAApE,CAPH,EASJ,CAjBD,IAkBK,IAAG,KAAKjD,KAAL,CAAWF,KAAX,CAAiBiD,aAAjB,GAAiC,uBAApC,CAA4D,CAC7DD,mBAAmB,CAACE,IAApB,CAAyB,CAAC,UAAU,cAAX,CAA0B,YAAY,OAAtC,CAA+C,QAAS,OAAxD,CAAzB,EACA,GAAI,KAAKhD,KAAL,CAAWkD,UAAX,CAAsB,iBAAtB,GACF,KAAKlD,KAAL,CAAWkD,UAAX,CAAsB,iBAAtB,EAAyCC,cADvC,EAEC,KAAKnD,KAAL,CAAWkD,UAAX,CAAsB,gBAAtB,CAFL,CAGG,CACCJ,mBAAmB,CAACE,IAApB,CAAyB,CAAC,UAAU,gBAAX,CAA4B,YAAY,aAAxC,CAAuD,QAAS,OAAhE,CAAzB,EACH,CACD;AACA;AACA;AACGF,mBAAmB,CAACE,IAApB,CACA;AACD;AACC,CAAE,UAAW,cAAb,CAA6B,YAAa,WAA1C,CAAuD,QAAS,OAAhE,CAAwEC,SAAS,CAAC,IAAlF,CAHA,CAIA;AACA,CAAE,UAAW,gBAAb,CAA+B,YAAa,cAA5C,CAA4D,QAAS,OAArE,CALA,CAMA,CAAE,UAAW,cAAb,CAA6B,YAAa,WAA1C,CAAuD,QAAS,OAAhE,CANA,CAOA,CAAE,UAAW,cAAb,CAA6B,YAAa,eAA1C,CAA2D,QAAS,OAApE,CAPA,EASP,CApBK,IAqBD,CACA,GAAG,KAAKjD,KAAL,CAAWF,KAAX,CAAiBiD,aAAjB,GAAiC,kBAApC,CAAwD,CACpDD,mBAAmB,CAACE,IAApB,CAAyB,CAAC,UAAU,cAAX,CAA0B,YAAY,OAAtC,CAA+C,QAAS,OAAxD,CAAzB,EACJ,GAAI,KAAKhD,KAAL,CAAWkD,UAAX,EAAyB,KAAKlD,KAAL,CAAWkD,UAAX,CAAsB,qBAAtB,CAAzB,EACF,KAAKlD,KAAL,CAAWkD,UAAX,CAAsB,qBAAtB,EAA6CC,cAD3C,EAC2D,KAAKnD,KAAL,CAAWkD,UAAX,CAAsB,gBAAtB,CAD/D,CACuG,CACnGJ,mBAAmB,CAACE,IAApB,CAAyB,CAAC,UAAU,gBAAX,CAA4B,YAAY,aAAxC,CAAuD,QAAS,OAAhE,CAAzB,EACH,CACD;AACA;AACA;AACAF,mBAAmB,CAAEE,IAArB,CACA;AACI;AACA;AACA,CAAE,UAAW,cAAb,CAA6B,YAAa,cAA1C,CAA0D,QAAS,OAAnE,CAA2EC,SAAS,CAAC,IAArF,CAJJ,CAKI,CAAE,UAAW,cAAb,CAA6B,YAAa,WAA1C,CAAuD,QAAS,OAAhE,CAAwEA,SAAS,CAAC,IAAlF,CALJ,CAMI;AACA,CAAE,UAAW,gBAAb,CAA+B,YAAa,cAA5C,CAA4D,QAAS,OAArE,CAPJ,CAQI,CAAE,UAAW,cAAb,CAA6B,YAAa,WAA1C,CAAuD,QAAS,OAAhE,CARJ,CASI,CAAE,UAAW,cAAb,CAA6B,YAAa,eAA1C,CAA2D,QAAS,OAApE,CATJ,EAUD;AACE,CACJ,CAED,GAAI7C,CAAAA,SAAS,CAAG,KAAKJ,KAAL,CAAWK,UAAX,CAAsBC,GAAtB,CAA0B,KAAKN,KAAL,CAAWO,OAArC,GAAiD,KAAKP,KAAL,CAAWK,UAAX,CAAsBG,GAAtB,CAA0B,KAAKR,KAAL,CAAWO,OAArC,EAA8CE,YAA/G,CACA,GAAI2C,CAAAA,eAAe,CAAG,EAAtB,CACA,GAAI,KAAKpD,KAAL,CAAWqD,aAAf,CAA8B,CAC1B,GAAI,KAAKrD,KAAL,CAAWkD,UAAX,EAAyB,KAAKlD,KAAL,CAAWkD,UAAX,CAAsB,iBAAtB,CAAzB,EAAqE,KAAKlD,KAAL,CAAWkD,UAAX,CAAsB,iBAAtB,EAAyCC,cAAlH,CAAiI,CAC7HL,mBAAmB,CAACE,IAApB,CAAyB,CAAC,UAAU,gBAAX,CAA4B,YAAY,aAAxC,CAAuD,QAAS,OAAhE,CAAzB,EACH,CAFD,IAGI,CACAF,mBAAmB,CAACE,IAApB,CAAyB,CAAC,UAAU,cAAX,CAA0B,YAAY,OAAtC,CAA+C,QAAS,OAAxD,CAAzB,EACH,CACDF,mBAAmB,CAAEE,IAArB,CACE;AACE,CAAE,UAAW,cAAb,CAA6B,YAAa,cAA1C,CAA0D,QAAS,OAAnE,CAA4EC,SAAS,CAAE,IAAvF,CAFJ,CAGI,CAAE,UAAW,cAAb,CAA6B,YAAa,WAA1C,CAAuD,QAAS,OAAhE,CAAwEA,SAAS,CAAC,IAAlF,CAHJ,CAII,CAAE,UAAW,wBAAb,CAAuC,YAAa,wBAApD,CAA8E,QAAS,OAAvF,CAJJ,CAKI,CAAE,UAAW,gBAAb,CAA+B,YAAa,cAA5C,CAA4D,QAAS,OAArE,CALJ,CAMI,CAAE,UAAW,cAAb,CAA6B,YAAa,WAA1C,CAAuD,QAAS,OAAhE,CANJ,CAOI,CAAE,UAAW,cAAb,CAA6B,YAAa,eAA1C,CAA2D,QAAS,OAApE,CAPJ,EAQA;AACAG,eAAe,CAAG,CACd,CAAE,UAAW,wBAAb,CAAuC,YAAa,qBAApD,CAA2E,iBAAiB,WAA5F,CAAyG,cAAe,SAAxH,CADc,CAEd,CAAE,UAAW,aAAb,CAA4B,YAAa,WAAzC,CAAsD,iBAAiB,WAAvE,CAAoF,cAAe,SAAnG,CAFc,CAAlB,CAIH,CApBD,IAoBM,IAAG,KAAKpD,KAAL,CAAWsD,mBAAX,EAAgC,KAAKtD,KAAL,CAAWsD,mBAAX,GAAiC,IAApE,CACN,CACIR,mBAAmB,CAAC,EAApB,CACAM,eAAe,CAAC,EAAhB,CACAN,mBAAmB,CAACE,IAApB,CACI,CAAE,UAAW,cAAb,CAA6B,YAAa,cAA1C,CAA0D,QAAS,OAAnE,CADJ,CAEM,CAAE,UAAW,iBAAb,CAAgC,YAAa,iBAA7C,CAAgE,QAAS,OAAzE,CAFN,CAGM,CAAC,UAAW,sBAAZ,CAAoC,YAAa,iBAAjD,CAAoE,QAAS,OAA7E,CAHN,CAIM,CAAC,UAAW,aAAZ,CAA2B,YAAa,WAAxC,CAAqD,QAAS,OAA9D,CAJN,CAKM,CAAE,UAAW,gBAAb,CAA+B,YAAa,cAA5C,CAA4D,QAAS,OAArE,CALN,CAMM,CAAE,UAAW,cAAb,CAA6B,YAAa,WAA1C,CAAuD,QAAS,OAAhE,CANN,CAOM,CAAE,UAAW,cAAb,CAA6B,YAAa,eAA1C,CAA2D,QAAS,OAApE,CAPN,EAQM,GAAG,KAAKhD,KAAL,CAAWF,KAAX,CAAiByD,mBAApB,CACA,CACEH,eAAe,CAAG,CACd,CAAE,UAAW,iBAAb,CAAgC,YAAa,qBAA7C,CAAoE,iBAAiB,YAArF,CAAmG,cAAe,OAAlH,CADc,CAEd,CAAE,UAAW,sBAAb,CAAqC,YAAa,yBAAlD,CAA6E,iBAAiB,YAA9F,CAA4G,cAAe,OAA3H,CAFc,CAGd,CAAE,UAAW,aAAb,CAA4B,YAAa,WAAzC,CAAsD,iBAAiB,WAAvE,CAAoF,cAAe,SAAnG,CAHc,CAAlB,CAMD,CARD,IASI,CACFA,eAAe,CAAG,CACd,CAAE,UAAW,iBAAb,CAAgC,YAAa,qBAA7C,CAAoE,iBAAiB,YAArF,CAAmG,cAAe,OAAlH,CADc,CAEd,CAAE,UAAW,aAAb,CAA4B,YAAa,WAAzC,CAAsD,iBAAiB,WAAvE,CAAoF,cAAe,SAAnG,CAFc,CAAlB,CAKD,CAEV,CA7BK,IA8BD,CAEDA,eAAe,CAAG,CACd,CAAE,UAAW,aAAb,CAA4B,YAAa,WAAzC,CAAsD,iBAAiB,WAAvE,CAAoF,cAAe,SAAnG,CADc,CAAlB,CAIH,CAED,mBAEI,qDACI,2BAAK,SAAS,CAAC,8BAAf,eACI,2BAAK,SAAS,CAAC,4BAAf,eACI,oBAAC,GAAD,CAAK,IAAL,EAAU,IAAI,eAAS,KAAKpD,KAAL,CAAWF,KAAX,CAAiB0D,UAA1B,YAAd,CAA8D,SAAS,CAAC,aAAxE,CAAsF,MAAM,CAAE,KAAKxD,KAAL,CAAWyD,qBAAX,CAAiCC,OAAjC,CAAyCtD,SAAzC,IAAwD,CAAC,CAAvJ,CACI,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACJ,KAAL,CAAWX,gBAAX,CAA4B,CAAEsB,QAAQ,CAAE,MAAI,CAACX,KAAL,CAAWF,KAAX,CAAiBa,QAA7B,CAAuCmB,SAAS,CAAE,QAAlD,CAA4D6B,YAAY,CAAEvD,SAA1E,CAAqFoD,UAAU,CAAE,MAAI,CAACxD,KAAL,CAAWwD,UAA5G,CAAwHI,SAAS,CAAE,kBAAnI,CAAuJC,UAAU,CAAE,MAAI,CAAC7D,KAAL,CAAW6D,UAA9K,CAA0LC,iBAAiB,CAAE,MAAI,CAAC9D,KAAL,CAAW8D,iBAAxN,CAC3CR,mBAAmB,CAAC,MAAI,CAACtD,KAAL,CAAWsD,mBADY,CAA5B,CAAN,EADb,eAGI,oBAAC,eAAD,EAAiB,IAAI,CAAE7D,MAAvB,EAHJ,kBAII,oBAAC,gBAAD,EAAkB,EAAE,CAAC,aAArB,CAAmC,cAAc,CAAC,UAAlD,EAJJ,CADJ,CADJ,CADJ,cAWI,oBAAC,QAAD,EACI,eAAe,CAAE,KAAKO,KAAL,CAAW+D,eADhC,CAEI,IAAI,CAAE,KAAK/D,KAAL,CAAWD,QAFrB,CAGI,UAAU,CAAExB,OAAO,CAAC,KAAKyB,KAAL,CAAWD,QAAX,EAAuB,EAAxB,CAA4B,KAAKC,KAAL,CAAWgE,SAAvC,CAHvB,CAII,SAAS,CAAE,KAAKhE,KAAL,CAAWgE,SAJ1B,CAKI,eAAe,CAAE,KAAKhE,KAAL,CAAWiE,eALhC,CAMI,mBAAmB,CAAEnB,mBANzB,CAOI,QAAQ,CAAE,KAAK9C,KAAL,CAAWW,QAPzB,CAQI,UAAU,CAAE,KAAKX,KAAL,CAAWK,UAR3B,CASI,qBAAqB,CAAE,KAAKL,KAAL,CAAWyD,qBATtC,CAUI,UAAU,CAAE,KAAKzD,KAAL,CAAWqC,UAV3B,CAWI,QAAQ,CAAE,IAXd,CAYI,WAAW,CAAC,UAZhB,CAaI,cAAc,CAAE,IAbpB,CAcI,gBAAgB,CAAE,KAAKrC,KAAL,CAAWkE,gBAAX,GAAgCnC,SAAhC,CAA4C,KAAK/B,KAAL,CAAWkE,gBAAvD,CAA0E,IAdhG,CAeI,WAAW,CAAE,KAAKlE,KAAL,CAAWmE,WAAX,EAA0B,EAf3C,CAgBI,WAAW,CAAE,KAAKnE,KAAL,CAAWoE,WAAX,EAA0B,EAhB3C,CAiBI,SAAS,CAAE,+BAAK,KAAKpE,KAAL,CAAWqE,SAAhB,MAA0Bf,mBAAmB,CAAC,KAAKtD,KAAL,CAAWsD,mBAAzD,CAA+EM,SAAS,CAAE,kBAA1F,IAAkH,EAjBjI,CAkBI,YAAY,CAAE,KAAK5D,KAAL,CAAWV,aAAX,EAA4B,EAlB9C,CAmBI,UAAU,CAAE,KAAKU,KAAL,CAAWsE,UAnB3B,CAoBI,iBAAiB,CAAE,KApBvB,CAqBI,UAAU,CAAE,YArBhB,CAsBI,UAAU,CAAE,OAtBhB,CAuBI,SAAS,CAAE,KAAKtE,KAAL,CAAWuE,SAvB1B,CAwBI,SAAS,CAAI,UAxBjB,EAXJ,CAsCQ,KAAKvE,KAAL,CAAWF,KAAX,CAAiB+B,gBAAjB,cACI,oBAAC,aAAD,EACI,WAAW,CAAE,KAAKL,WADtB,CAEI,SAAS,CAAE,KAAKxB,KAAL,CAAWF,KAAX,CAAiBgC,SAFhC,CAGI,UAAU,CAAE,KAAK9B,KAAL,CAAWF,KAAX,CAAiB0D,UAHjC,CAII,UAAU,CAAE,KAAK7B,WAJrB,CAKI,IAAI,CAAE,KAAK3B,KAAL,CAAWF,KAAX,CAAiB+B,gBAL3B,CAMI,UAAU,CAAE,KAAK7B,KAAL,CAAWF,KAAX,CAAiBuC,UANjC,CAOI,KAAK,CAAE,KAAKrC,KAAL,CAAWF,KAAX,CAAiB8B,SAP5B,CAQI,aAAa,CAAE,KAAKQ,aARxB,CASI,YAAY,CAAE,KAAKpC,KAAL,CAAWF,KAAX,CAAiB0E,YATnC,CAUI,WAAW,CAAE,KAAKxE,KAAL,CAAWf,WAV5B,CAWI,cAAc,CAAE,KAAKY,KAAL,CAAWa,cAAX,EAA6B,EAXjD,CAYI,eAAe,CAAE0C,eAZrB,CAaI,YAAY,CAAE,KAAKpD,KAAL,CAAWF,KAAX,CAAiB8B,SAAjB,cACV,oBAAC,KAAD,EACI,SAAS,CAAE,KAAK5B,KAAL,CAAWF,KAAX,CAAiBgC,SADhC,CAEI,eAAe,CAAE,KAAKf,eAF1B,CAGI,UAAU,CAAE,KAAKf,KAAL,CAAWF,KAAX,CAAiBuC,UAHjC,CAII,cAAc,CAAE,KAAKxC,KAAL,CAAWa,cAAX,EAA6B,EAJjD,EADU,cAQV,oBAAC,UAAD,EACI,cAAc,CAAE,KAAKb,KAAL,CAAWa,cAD/B,CAEI,SAAS,CAAI,UAFjB,CAGI,kBAAkB,CAAE,KAAKV,KAAL,CAAWF,KAAX,CAAiB2E,kBAHzC,CAII,cAAc,CAAE,KAAKzE,KAAL,CAAWF,KAAX,CAAiB4E,cAAjB,EAAiC,KAAK1E,KAAL,CAAWF,KAAX,CAAiB4E,cAJtE,CAKI,cAAc,CAAE,KAAK1E,KAAL,CAAWF,KAAX,CAAiB6E,cAAjB,EAAiC,KAAK3E,KAAL,CAAWF,KAAX,CAAiB6E,cALtE,CAMI,eAAe,CAAE,KAAK5D,eAN1B,CAOI,aAAa,CAAE,KAAKd,aAPxB,CAQI,aAAa,CAAE,KAAKD,KAAL,CAAWqD,aAR9B,CASI,mBAAmB,CAAE,KAAKrD,KAAL,CAAWsD,mBATpC,CAUI,OAAO,CAAE,EAVb,CAWI,QAAQ,CAAE,CAXd,CAYI,SAAS,CAAE,KAAKtD,KAAL,CAAWF,KAAX,CAAiBgC,SAZhC,CAaI,gBAAgB,CAAE,KAAK9B,KAAL,CAAW4E,gBAbjC,CAcI,WAAW,CAAE,KAAK5E,KAAL,CAAW6E,WAd5B,CAeI,UAAU,CAAE,KAAK7E,KAAL,CAAW6D,UAf3B,EArBR,EADJ,CAyCM,EA/Ed,CAFJ,CAqFH,C,kCACD,4BAAmBiB,aAAnB,CAAkC,CAC9B,GAAI,KAAK9E,KAAL,CAAWF,KAAX,CAAiBY,cAAjB,GAAoCoE,aAAa,CAAChF,KAAd,CAAoBY,cAA5D,CAA4E,CACxE,KAAKI,QAAL,CAAc,CAAEJ,cAAc,CAAE,KAAKV,KAAL,CAAWF,KAAX,CAAiBY,cAAnC,CAAd,EACH,CACJ,C,sBA9NkBlC,KAAK,CAACuG,S,EAwV7B,cAAevF,CAAAA,OAAO,CAACI,eAAD,CAAkB,CAAEX,WAAW,CAAXA,WAAF,CAAeC,cAAc,CAAdA,cAAf,CAA+BC,uBAAuB,CAAvBA,uBAA/B,CAAwDC,UAAU,CAAVA,UAAxD,CAAoEC,gBAAgB,CAAhBA,gBAApE,CAAsFC,aAAa,CAAbA,aAAtF,CAAoGC,qBAAqB,CAArBA,qBAApG,CAAlB,CAAP,CAAsJb,UAAU,CAACqB,QAAD,CAAhK,CAAf","sourcesContent":["import { process } from '@progress/kendo-data-query';\r\nimport React from 'react';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes';\r\nimport DataGrid from '../../../components/data-grid/data-grid.component';\r\nimport { transactionStatus } from '../../../components/Enumeration';\r\nimport SlideOutModal from '../../../components/slide-out-modal/SlideOutModal';\r\nimport Esign from '../../audittrail/Esign';\r\nimport AddComment from './AddComment';\r\nimport { updateStore, viewAttachment, validateEsignCredential, crudMaster, getCommentsCombo, deleteComment,getSampleTestComments } from '../../../actions'\r\nimport { connect } from 'react-redux';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { Nav } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\nclass Comments extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            selectedRecord: {}\r\n        }\r\n    }\r\n    render() {\r\n        let extractedColumnList = []\r\n        if(this.props.Login.activeTestTab===\"IDS_SAMPLECOMMENTS\"){\r\n            // if (this.props.masterData && this.props.masterData[\"RegSubTypeValue\"] && \r\n            //    this.props.masterData[\"RegSubTypeValue\"].nneedsubsample || this.props.masterData[\"nneedsubsample\"]){\r\n            //     extractedColumnList.push({\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\", \"width\": \"155px\"} );\r\n            // }\r\n            // else{\r\n                extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\", \"width\": \"155px\"});\r\n           //}\r\n             extractedColumnList.push(\r\n                //  {\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"150px\"},\r\n               // { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"scomments\", \"width\": \"200px\",jsonField:true },\r\n                // { \"idsName\": \"IDS_SAMPLETESTCOMMENTS\", \"dataField\": \"ssampletestcommentname\", \"width\": \"400px\" },\r\n                { \"idsName\": \"IDS_SCREENNAME\", \"dataField\": \"sdisplayname\", \"width\": \"150px\" },\r\n                { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_USERROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\" },\r\n             );\r\n        }\r\n        else if(this.props.Login.activeTestTab===\"IDS_SUBSAMPLECOMMENTS\"){\r\n            extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\", \"width\": \"155px\"});\r\n            if (this.props.masterData[\"RegSubTypeValue\"] && \r\n              this.props.masterData[\"RegSubTypeValue\"].nneedsubsample\r\n              || this.props.masterData[\"nneedsubsample\"]\r\n              ){\r\n                extractedColumnList.push({\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\", \"width\": \"155px\"} );\r\n            }\r\n            //else{\r\n            //    extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\", \"width\": \"155px\"});\r\n            //}\r\n               extractedColumnList.push(\r\n               //  {\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"100px\"},\r\n              // { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"200px\" },\r\n               { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"scomments\", \"width\": \"200px\",jsonField:true },\r\n               // { \"idsName\": \"IDS_SAMPLETESTCOMMENTS\", \"dataField\": \"ssampletestcommentname\", \"width\": \"400px\" },\r\n               { \"idsName\": \"IDS_SCREENNAME\", \"dataField\": \"sdisplayname\", \"width\": \"150px\" },\r\n               { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n               { \"idsName\": \"IDS_USERROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\" },\r\n               );\r\n       }\r\n        else{  \r\n            if(this.props.Login.activeTestTab===\"IDS_TESTCOMMENTS\") {       \r\n                extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\", \"width\": \"155px\"});\r\n            if (this.props.masterData && this.props.masterData[\"RealRegSubTypeValue\"] && \r\n              this.props.masterData[\"RealRegSubTypeValue\"].nneedsubsample||this.props.masterData[\"nneedsubsample\"]){\r\n                extractedColumnList.push({\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\", \"width\": \"155px\"} );\r\n            }\r\n            // else{\r\n            //     extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\", \"width\": \"155px\"});\r\n            // }\r\n            extractedColumnList .push(\r\n            // extractedColumnList = [\r\n                // {\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"100px\"},\r\n                // {\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"150px\"},\r\n                { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestsynonym\", \"width\": \"200px\",jsonField:true },\r\n                { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"scomments\", \"width\": \"200px\",jsonField:true },\r\n                // { \"idsName\": \"IDS_SAMPLETESTCOMMENTS\", \"dataField\": \"ssampletestcommentname\", \"width\": \"400px\" },\r\n                { \"idsName\": \"IDS_SCREENNAME\", \"dataField\": \"sdisplayname\", \"width\": \"150px\" },\r\n                { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_USERROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\" });\r\n           // ];\r\n            }\r\n        }\r\n       \r\n        let addFileId = this.props.controlMap.has(this.props.addName) && this.props.controlMap.get(this.props.addName).ncontrolcode;\r\n        let mandatoryFields = [];\r\n        if (this.props.isTestComment) {\r\n            if (this.props.masterData && this.props.masterData[\"RegSubTypeValue\"] && this.props.masterData[\"RegSubTypeValue\"].nneedsubsample){\r\n                extractedColumnList.push({\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\", \"width\": \"155px\"} );\r\n            }\r\n            else{\r\n                extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\", \"width\": \"155px\"});\r\n            }\r\n            extractedColumnList .push(\r\n              //  { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestsynonym\", \"width\": \"200px\", jsonField: true },\r\n                { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"scomments\", \"width\": \"200px\",jsonField:true },\r\n                { \"idsName\": \"IDS_SAMPLETESTCOMMENTS\", \"dataField\": \"ssampletestcommentname\", \"width\": \"400px\" },\r\n                { \"idsName\": \"IDS_SCREENNAME\", \"dataField\": \"sdisplayname\", \"width\": \"150px\" },\r\n                { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_USERROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\" });\r\n            //]\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_SAMPLETESTCOMMENTS\", \"dataField\": \"nsamplecommentscode\", \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_COMMENT\", \"dataField\": \"scomments\", \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" }\r\n            ];\r\n        }else if(this.props.isSampleTestComment&&this.props.isSampleTestComment===true )\r\n        {\r\n            extractedColumnList=[]\r\n            mandatoryFields=[]\r\n            extractedColumnList.push( \r\n                { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestsynonym\", \"width\": \"200px\"  },\r\n                  { \"idsName\": \"IDS_COMMENTNAME\", \"dataField\": \"scommentsubtype\", \"width\": \"200px\"  },\r\n                  {\"idsName\": \"IDS_ABBREVIATIONNAME\", \"dataField\": \"spredefinedname\", \"width\": \"200px\"  }, \r\n                  {\"idsName\": \"IDS_COMMENT\", \"dataField\": \"scomments\", \"width\": \"200px\"  },  \r\n                  { \"idsName\": \"IDS_SCREENNAME\", \"dataField\": \"sdisplayname\", \"width\": \"150px\" },\r\n                  { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n                  { \"idsName\": \"IDS_USERROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\" }); \r\n                  if(this.props.Login.isAbbrevationneeded)\r\n                  {\r\n                    mandatoryFields = [\r\n                        { \"idsName\": \"IDS_COMMENTNAME\", \"dataField\": \"ncommentsubtypecode\", \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"combo\" },\r\n                        { \"idsName\": \"IDS_ABBREVIATIONNAME\", \"dataField\": \"nsampletestcommentscode\", \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"combo\" },\r\n                        { \"idsName\": \"IDS_COMMENT\", \"dataField\": \"scomments\", \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" } \r\n      \r\n                    ];\r\n                  }\r\n                  else{\r\n                    mandatoryFields = [\r\n                        { \"idsName\": \"IDS_COMMENTNAME\", \"dataField\": \"ncommentsubtypecode\", \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"combo\" }, \r\n                        { \"idsName\": \"IDS_COMMENT\", \"dataField\": \"scomments\", \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" } \r\n      \r\n                    ];\r\n                  }\r\n             \r\n        } \r\n        else {\r\n\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_COMMENT\", \"dataField\": \"scomments\", \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n            ];\r\n\r\n        }\r\n\r\n        return (\r\n\r\n            <>\r\n                <div className=\"actions-stripe border-bottom\">\r\n                    <div className=\"d-flex justify-content-end\">\r\n                        <Nav.Link name={`add_${this.props.Login.screenName}_comment`} className=\"add-txt-btn\" hidden={this.props.userRoleControlRights.indexOf(addFileId) === -1}\r\n                            onClick={() => this.props.getCommentsCombo({ userInfo: this.props.Login.userInfo, operation: \"create\", ncontrolCode: addFileId, screenName: this.props.screenName, modalName: \"openCommentModal\", masterList: this.props.masterList, masterAlertStatus: this.props.masterAlertStatus,\r\n                            isSampleTestComment:this.props.isSampleTestComment })}>\r\n                            <FontAwesomeIcon icon={faPlus} /> { }\r\n                            <FormattedMessage id=\"IDS_COMMENT\" defaultMessage=\" Comment\" />\r\n                        </Nav.Link>\r\n                    </div>\r\n                </div>\r\n                <DataGrid\r\n                    primaryKeyField={this.props.primaryKeyField}\r\n                    data={this.props.Comments}\r\n                    dataResult={process(this.props.Comments || [], this.props.dataState)}\r\n                    dataState={this.props.dataState}\r\n                    dataStateChange={this.props.dataStateChange}\r\n                    extractedColumnList={extractedColumnList}\r\n                    userInfo={this.props.userInfo}\r\n                    controlMap={this.props.controlMap}\r\n                    userRoleControlRights={this.props.userRoleControlRights}\r\n                    inputParam={this.props.inputParam}\r\n                    pageable={true}\r\n                    expandField=\"expanded\"\r\n                    hideDetailBand={true}\r\n                    isActionRequired={this.props.isActionRequired !== undefined ? this.props.isActionRequired : true}\r\n                    deleteParam={this.props.deleteParam || \"\"}\r\n                    fetchRecord={this.props.fetchRecord || \"\"}\r\n                    editParam={{ ...this.props.editParam,isSampleTestComment:this.props.isSampleTestComment , modalName: \"openCommentModal\" } || \"\"}\r\n                    deleteRecord={this.props.deleteComment || \"\"}\r\n                    selectedId={this.props.selectedId}\r\n                    isToolBarRequired={false}\r\n                    scrollable={\"scrollable\"}\r\n                    gridHeight={\"500px\"}\r\n                    methodUrl={this.props.methodUrl}\r\n                    jsonField = {\"jsondata\"}\r\n                />\r\n                {\r\n                    this.props.Login.openCommentModal ?\r\n                        <SlideOutModal\r\n                            onSaveClick={this.onSaveClick}\r\n                            operation={this.props.Login.operation}\r\n                            screenName={this.props.Login.screenName}\r\n                            closeModal={this.handleClose}\r\n                            show={this.props.Login.openCommentModal}\r\n                            inputParam={this.props.Login.inputParam}\r\n                            esign={this.props.Login.loadEsign}\r\n                            validateEsign={this.validateEsign}\r\n                            masterStatus={this.props.Login.masterStatus}\r\n                            updateStore={this.props.updateStore}\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                            mandatoryFields={mandatoryFields}\r\n                            addComponent={this.props.Login.loadEsign ?\r\n                                <Esign\r\n                                    operation={this.props.Login.operation}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                />\r\n                                :\r\n                                <AddComment\r\n                                    selectedRecord={this.state.selectedRecord}\r\n                                    jsonField = {\"jsondata\"}\r\n                                    SampleTestComments={this.props.Login.sampleTestComments}\r\n                                    predefcomments={this.props.Login.predefcomments&&this.props.Login.predefcomments} \r\n                                    CommentSubType={this.props.Login.CommentSubType&&this.props.Login.CommentSubType} \r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onComboChange={this.onComboChange}\r\n                                    isTestComment={this.props.isTestComment}\r\n                                    isSampleTestComment={this.props.isSampleTestComment} \r\n                                    maxSize={20}\r\n                                    maxFiles={3}\r\n                                    operation={this.props.Login.operation}\r\n                                    selectedListName={this.props.selectedListName}\r\n                                    displayName={this.props.displayName}\r\n                                    masterList={this.props.masterList}\r\n                                />  \r\n                            }\r\n                        />\r\n                        : \"\"\r\n                }\r\n            </>\r\n        )\r\n    }\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n    }\r\n    onComboChange = (comboData, comboName) => {\r\n        let addFileId = this.props.controlMap.has(this.props.addName) && this.props.controlMap.get(this.props.addName).ncontrolcode; \r\n        if (comboData) {\r\n            let selectedRecord = this.state.selectedRecord || {};\r\n            if (comboName === 'ncommentsubtypecode') {\r\n                selectedRecord[comboName] = comboData\r\n                this.props.getSampleTestComments(selectedRecord,this.props.Login.userInfo)  \r\n            }\r\n            else\r\n            {\r\n                if (comboName === 'nsampletestcommentscode') {\r\n                    selectedRecord['scomments'] = comboData.item.scomments;\r\n                }\r\n                selectedRecord[comboName] = comboData\r\n                this.setState({ selectedRecord });\r\n            } \r\n\r\n        }\r\n    }\r\n    onInputOnChange = (event) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onSaveClick = (saveType, formRef) => {\r\n        // const masterData = this.props.Login.masterData;\r\n        // let inputData = {}\r\n        // let inputParam = {}\r\n        // inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        // if(this.props.Login.screenName === \"IDS_SAMPLECOMMENTS\") {\r\n        //     // let saveParam={userInfo:this.props.Login.userInfo,\r\n        //     //     selectedRecord:this.state.selectedRecord,\r\n        //     //     masterData:this.props.Login.masterData,\r\n        //     //     saveType, formRef,\r\n        //     //     operation:this.props.Login.operation\r\n        //     // }\r\n        //     // inputParam = onSaveSampleAttachment(saveParam);\r\n        // }else if(this.props.Login.screenName === \"IDS_TESTCOMMENTS\") {\r\n        //     let saveParam={\r\n        //         userInfo:this.props.Login.userInfo,\r\n        //         isTestComment:this.props.isTestComment,\r\n        //         selectedRecord:this.state.selectedRecord,\r\n        //         masterData:this.props.Login.masterData,\r\n        //         saveType, formRef,\r\n        //         operation:this.props.Login.operation,\r\n        //         selectedMaster:this.props.selectedMaster\r\n        //     }\r\n        //     inputParam = onSaveTestComments(saveParam);\r\n        // }\r\n        // if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n        //     const updateInfo = {\r\n        //         typeName: DEFAULT_RETURN,\r\n        //         data: {\r\n        //             loadEsign: true,\r\n        //             screenData: { inputParam, masterData },\r\n        //             operation: this.props.Login.operation,\r\n        //             screenName: this.props.Login.screenName,\r\n        //         }\r\n        //     }\r\n        //     this.props.updateStore(updateInfo);\r\n        // }\r\n        // else {\r\n        //     this.props.crudMaster(inputParam, masterData, \"openCommentModal\");\r\n        // }\r\n        this.props.onSaveClick(saveType, formRef, this.state.selectedRecord)\r\n    }\r\n    handleClose = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openCommentModal = this.props.Login.openCommentModal\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let operation = this.props.Login.operation;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openCommentModal = false;\r\n                selectedRecord = {};\r\n                operation = undefined;\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord[\"esigncomments\"] = \"\";\r\n                selectedRecord[\"esignpassword\"] = \"\";\r\n            }\r\n        }\r\n        else {\r\n            openCommentModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openCommentModal, loadEsign, selectedRecord, selectedParamId: null, operation }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        if (this.props.Login.operation === 'dynamic') {\r\n            this.props.validateEsignforApproval(inputParam, \"openChildModal\");\r\n        } else {\r\n            this.props.validateEsignCredential(inputParam, \"openCommentModal\");\r\n        }\r\n    }\r\n}\r\nexport default connect(mapStateToProps, { updateStore, viewAttachment, validateEsignCredential, crudMaster, getCommentsCombo, deleteComment,getSampleTestComments })(injectIntl(Comments));"]},"metadata":{},"sourceType":"module"}