{"ast":null,"code":"import rsapi from \"../rsapi\";\nimport { toast } from \"react-toastify\";\nimport { constructOptionList, sortData } from \"../components/CommonScript\";\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\nimport Axios from \"axios\";\nimport { initRequest } from \"./LoginAction\";\nimport { transactionStatus, attachmentType } from \"../components/Enumeration\";\nimport { intl } from \"../components/App\"; //Test click\n\nexport const getTestMaster = (testItem, userInfo, masterData) => {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testmaster/getTestById\", {\n      ntestcode: testItem.ntestcode,\n      userinfo: userInfo\n    }).then(response => {\n      masterData = { ...masterData,\n        ...response.data\n      };\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          dataState: undefined\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      toast.error(error.message);\n    });\n  };\n}; //tab click\n\nexport const getTestDetails = inputParam => {\n  return function (dispatch) {\n    const testParameter = inputParam.testParameter;\n    dispatch(initRequest(true));\n    rsapi.post(\"/testmaster/getothertestdetails\", {\n      ntestcode: testParameter.ntestcode,\n      \"nFlag\": inputParam.nFlag,\n      ntestparametercode: testParameter.ntestparametercode,\n      userinfo: inputParam.userInfo\n    }).then(response => {\n      let masterData = inputParam.masterData;\n      masterData = { ...masterData,\n        ...response.data\n      };\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}; //Add Test\n\nexport const addTest = (operation, testmaster, userInfo, ncontrolCode, nfilterTestCategory) => {\n  return function (dispatch) {\n    if (nfilterTestCategory && Object.values(nfilterTestCategory).length > 0) {\n      dispatch(initRequest(true));\n      const urlArray = [rsapi.post(\"testcategory/getTestCategory\", {\n        \"userinfo\": userInfo\n      }), rsapi.post(\"checklist/getApprovedChecklist\", {\n        \"userinfo\": userInfo\n      })];\n\n      if (operation === \"update\") {\n        urlArray.push(rsapi.post(\"testmaster/getActiveTestById\", {\n          \"userinfo\": userInfo,\n          ntestcode: testmaster.ntestcode\n        }));\n        urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\n          \"ncontrolcode\": ncontrolCode,\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\n          \"userinfo\": userInfo\n        }));\n      } else if (operation === \"create\") {\n        urlArray.push(rsapi.post(\"parametertype/getParameterType\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"grade/getGrade\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"section/getSection\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testmaster/getAvailableMethod\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"unit/getUnit\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"instrumentcategory/fetchinstrumentcategory\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testmaster/getAddTest\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"containertype/getContainerType\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testpackage/getTestPackage\", {\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\n          \"ncontrolcode\": ncontrolCode,\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\n          \"userinfo\": userInfo\n        }));\n      } else if (operation === \"copy\") {\n        urlArray.push(rsapi.post(\"testmaster/validateCopyTest\", {\n          \"userinfo\": userInfo,\n          ntestcode: testmaster.ntestcode\n        }));\n        urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\n          \"ncontrolcode\": ncontrolCode,\n          \"userinfo\": userInfo\n        }));\n        urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\n          \"userinfo\": userInfo\n        }));\n      }\n\n      Axios.all(urlArray).then(response => {\n        let selectedRecord = {};\n        let selectedsubcodedresult = [];\n        const testCategoryMap = constructOptionList(response[0].data || [], \"ntestcategorycode\", \"stestcategoryname\", false, false, true);\n        const testCategory = testCategoryMap.get(\"OptionList\");\n        const checklistMap = constructOptionList(response[0].data || [], \"nchecklistversioncode\", \"schecklistname\", false, false, true);\n        const ChecklistVersion = checklistMap.get(\"OptionList\"); //const periodMap=[];\n\n        const testData = {\n          testCategory,\n          ChecklistVersion\n        };\n        let parameterData = {};\n        let otherTestData = {};\n        let needOtherTest = false;\n\n        if (operation === \"update\") {\n          const editData = response[2].data;\n          selectedRecord = editData;\n          const periodMap = constructOptionList(response[3].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\n          const interfacetypeMap = constructOptionList(response[4].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true);\n          parameterData = {\n            period: periodMap.get(\"OptionList\"),\n            interfacetype: interfacetypeMap.get(\"OptionList\")\n          };\n          selectedRecord[\"ntestcategorycode\"] = {\n            \"value\": editData[\"ntestcategorycode\"],\n            \"label\": editData[\"stestcategoryname\"]\n          };\n          selectedRecord[\"nchecklistversioncode\"] = {\n            \"value\": editData[\"nchecklistversioncode\"],\n            \"label\": editData[\"schecklistname\"]\n          };\n\n          if (selectedRecord[\"ntatperiodcode\"] !== -1) {\n            selectedRecord[\"ntatperiodcode\"] = {\n              \"value\": editData[\"ntatperiodcode\"],\n              \"label\": editData[\"statperiodname\"]\n            };\n          }\n\n          selectedRecord[\"ninterfacetypecode\"] = {\n            \"value\": editData[\"ninterfacetypecode\"],\n            \"label\": editData[\"sinterfacetypename\"]\n          };\n        } else if (operation === \"copy\") {\n          const periodMap = constructOptionList(response[3].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\n          const interfacetypeMap = constructOptionList(response[4].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true); //period:periodMap.get(\"OptionList\")\n\n          parameterData = {\n            period: periodMap.get(\"OptionList\"),\n            interfacetype: interfacetypeMap.get(\"OptionList\")\n          };\n          selectedRecord = {\n            ntestcategorycode: nfilterTestCategory.value === -2 ? testCategory.length > 0 ? // {\"label\": testCategory[0].stestcategoryname, \"value\": testCategory[0].ntestcategorycode}\n            testCategory[0] : \"\" : nfilterTestCategory,\n            ntransactionstatus: transactionStatus.ACTIVE,\n            naccredited: transactionStatus.NOTACCREDITED,\n            ntrainingneed: transactionStatus.NO,\n            stestsynonym: \"\",\n            stestname: \"\",\n            sdescription: \"\",\n            ncost: \"\" //period:periodMap.get(\"OptionList\"),\n\n          };\n        } else {\n          // const { Grade } = response[7].data; //ParameterType\n          const parameterMap = constructOptionList(response[2].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true); // const parameterType = parameterMap.get(\"OptionList\");//response[2].data;\n\n          const gradeMap = constructOptionList(response[3].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true); // const grade = gradeMap.get(\"OptionList\");// response[3].data;\n\n          const parameterItem = parameterMap.get(\"DefaultValue\") ? parameterMap.get(\"DefaultValue\") : \"\"; //parameterType.filter(item=>{ return item.nparametertypecode === 3 });//ParameterType[0];\n\n          selectedRecord = {\n            // nsectioncode: {\"value\": response[2].data[0].nsectioncode, \"label\": response[2].data[0].ssectionname},\n            nunitcode: -1,\n            nparametertypecode: parameterItem,\n            //{\"value\": parameterItem[0].nparametertypecode, \"label\": parameterItem[0].sdisplaystatus},\n            ntestcategorycode: nfilterTestCategory.value === -2 ? testCategory.length > 0 ? // {\"label\": testCategory[0].stestcategoryname, \"value\": testCategory[0].ntestcategorycode}: \"\")\n            testCategory[0] : \"\" : nfilterTestCategory,\n            ntransactionstatus: transactionStatus.ACTIVE,\n            naccredited: transactionStatus.NOTACCREDITED,\n            ntrainingneed: transactionStatus.NO,\n            stestsynonym: \"\",\n            stestname: \"\",\n            sdescription: \"\",\n            ncost: \"\"\n          };\n          let needUnit = true;\n          let needRoundingDigit = true;\n          let needCodedResult = true;\n          let needActualResult = true;\n          let npredefinedcode = transactionStatus.NO;\n          const unitMap = constructOptionList(response[6].data || [], \"nunitcode\", \"sunitname\", false, false, true);\n          const periodMap = constructOptionList(response[11].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\n          const deltaperiodMap = constructOptionList(response[11].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\n          const interfacetypeMap = constructOptionList(response[12].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true);\n\n          if (parameterItem && parameterItem.item) {\n            if (parameterItem.item[\"nunit\"] === transactionStatus.YES) {\n              needUnit = false;\n              selectedRecord[\"nunitcode\"] = unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\"; //{\"value\": response[4].data[0][\"nunitcode\"], \"label\": response[4].data[0][\"sunitname\"]};\n            }\n\n            if (parameterItem.item[\"nroundingdigit\"] === transactionStatus.YES) {\n              needRoundingDigit = false;\n            }\n\n            if (parameterItem.item[\"npredefinedcode\"] === transactionStatus.YES) {\n              needCodedResult = false;\n              npredefinedcode = parameterItem.item[\"npredefinedcode\"];\n            }\n\n            if (parameterItem.item[\"ngrade\"] === transactionStatus.YES) {\n              needActualResult = false;\n              selectedRecord[\"ngradecode\"] = gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"; //{\"value\": Grade.ngradecode, \"label\": Grade[\"sdisplaystatus\"]};\n            }\n          } // const testParameterMap = constructOptionList(response[8].data[\"TestParameter\"] || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true);\n\n\n          parameterData = {\n            grade: gradeMap.get(\"OptionList\"),\n            parameterType: parameterMap.get(\"OptionList\"),\n            unit: unitMap.get(\"OptionList\"),\n            period: periodMap.get(\"OptionList\"),\n            interfacetype: interfacetypeMap.get(\"OptionList\"),\n            deltaperiod: deltaperiodMap.get(\"OptionList\"),\n            needRoundingDigit,\n            needUnit,\n            needCodedResult,\n            needActualResult,\n            npredefinedcode,\n            testParameter: constructOptionList(response[8].data[\"TestParameter\"] || [], 'sparametername', 'sparametername', false, false, true).get(\"OptionList\"),\n            defaultUnit: unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\",\n            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\" //testParameterMap.get(\"OptionList\")\n\n          };\n          const sectionMap = constructOptionList(response[4].data || [], \"nsectioncode\", \"ssectionname\", false, false, true); // const methodMap = constructOptionList(response[5].data.Method.length>0?response[5].data.Method:[] || [], \"nmethodcode\", \"smethodname\", false, false, true);\n\n          const methodMap = constructOptionList(response[5].data || [], \"nmethodcode\", \"smethodname\", false, false, true);\n          const instCatMap = constructOptionList(response[7].data || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", false, false, true);\n          const continerType = constructOptionList(response[9].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\n          const packageMap = constructOptionList(response[10].data || [], \"ntestpackagecode\", \"stestpackagename\", false, false, true);\n          otherTestData = {\n            package: packageMap.get(\"OptionList\"),\n            section: sectionMap.get(\"OptionList\"),\n            method: methodMap.get(\"OptionList\"),\n            instrumentcategory: instCatMap.get(\"OptionList\"),\n            containertype: continerType.get(\"OptionList\")\n          };\n          needOtherTest = true;\n          const periodDefault = periodMap.get(\"DefaultValue\");\n\n          if (periodDefault !== undefined) {\n            selectedRecord = { ...selectedRecord,\n              \"ntatperiodcode\": {\n                \"value\": periodDefault.value,\n                \"label\": periodDefault.label\n              }\n            };\n          }\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            // parameterData: {\n            //     period: periodMap.get(\"OptionList\")\n            // },   \n            openModal: true,\n            needOtherTest,\n            operation: operation,\n            screenName: \"IDS_TEST\",\n            selectedRecord,\n            ncontrolCode,\n            testData,\n            parameterData,\n            otherTestData,\n            loading: false,\n            selectedsubcodedresult\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_TESTCATEGORYNOTAVAILABLE\"\n      }));\n    }\n  };\n}; //Add Test Parameter\n\nexport const addParameter = (operation, ntestparametercode, userInfo, ncontrolCode) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    const urlArray = [rsapi.post(\"unit/getUnit\", {\n      \"userinfo\": userInfo\n    }), rsapi.post(\"parametertype/getParameterType\", {\n      \"userinfo\": userInfo\n    }), rsapi.post(\"grade/getGrade\", {\n      \"userinfo\": userInfo\n    }), rsapi.post(\"testmaster/getAddTest\", {\n      \"userinfo\": userInfo\n    }), rsapi.post(\"period/getPeriodByControl\", {\n      \"ncontrolcode\": ncontrolCode,\n      \"userinfo\": userInfo\n    })];\n\n    if (operation === \"update\") {\n      urlArray.push(rsapi.post(\"testmaster/getActiveParameterById\", {\n        ntestparametercode: ntestparametercode,\n        \"userinfo\": userInfo\n      }));\n    }\n\n    Axios.all(urlArray).then(response => {\n      // const { Grade, ParameterType } = response[1].data;\n      const parameterMap = constructOptionList(response[1].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true);\n      const gradeMap = constructOptionList(response[2].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\n      const unitMap = constructOptionList(response[0].data || [], \"nunitcode\", \"sunitname\", false, false, true);\n      const deltaperiodMap = constructOptionList(response[4].data || [], \"nperiodcode\", \"speriodname\", false, false, true); //response[2].data;\n      // const grade = response[2].data;\n      // const parameterType = response[1].data;\n\n      let selectedRecord = {};\n      let needUnit = true;\n      let needRoundingDigit = true;\n      let needCodedResult = true;\n      let needActualResult = true;\n      let npredefinedcode = transactionStatus.No;\n\n      if (operation === \"update\") {\n        const editTestParameter = response[5].data.TestParameter[0];\n        selectedRecord = editTestParameter;\n        const nparametertypecode = editTestParameter[\"nparametertypecode\"];\n        const parameterItem = parameterMap.get(\"OptionList\").filter(function (item) {\n          return item.value === nparametertypecode;\n        });\n        selectedRecord[\"sparametername\"] = {\n          value: editTestParameter[\"sparametername\"],\n          label: editTestParameter[\"sparametername\"]\n        };\n\n        if (editTestParameter[\"ndeltaunitcode\"] !== -1) {\n          selectedRecord[\"ndeltaunitcode\"] = {\n            \"value\": editTestParameter[\"ndeltaunitcode\"],\n            \"label\": editTestParameter[\"sdeltaunitname\"]\n          };\n        }\n\n        selectedRecord[\"nparametertypecode\"] = {\n          value: nparametertypecode,\n          label: editTestParameter[\"sdisplaystatus\"]\n        };\n\n        if (parameterItem && parameterItem[0].item) {\n          const selectedParameterItem = parameterItem[0].item;\n\n          if (selectedParameterItem[\"nunitrequired\"] === transactionStatus.YES) {\n            needUnit = false;\n            selectedRecord[\"nunitcode\"] = {\n              value: editTestParameter[\"nunitcode\"],\n              label: editTestParameter[\"sunitname\"]\n            };\n          }\n\n          if (selectedParameterItem[\"nroundingrequired\"] === transactionStatus.YES) {\n            needRoundingDigit = false;\n          }\n\n          if (selectedParameterItem[\"npredefinedrequired\"] === transactionStatus.YES || selectedParameterItem[\"ngraderequired\"] === transactionStatus.YES) {\n            const editCodedResult = response[5].data.TestPredefinedParameter;\n\n            if (editCodedResult.length > 0) {\n              const defaultCodedResult = editCodedResult.filter(function (item) {\n                return item.ndefaultstatus === transactionStatus.YES;\n              });\n\n              if (defaultCodedResult.length > 0) {\n                selectedRecord[\"spredefinedname\"] = defaultCodedResult[0].spredefinedname;\n                selectedRecord[\"ntestpredefinedcode\"] = defaultCodedResult[0].ntestpredefinedcode;\n                ;\n                selectedRecord[\"ngradecode\"] = {\n                  value: defaultCodedResult[0].ngradecode,\n                  label: defaultCodedResult[0][\"sdisplaystatus\"]\n                };\n                selectedRecord[\"sresultparacomment\"] = defaultCodedResult[0].sresultparacomment;\n              } else {\n                selectedRecord[\"spredefinedname\"] = editCodedResult[0].spredefinedname;\n                selectedRecord[\"ntestpredefinedcode\"] = editCodedResult[0].ntestpredefinedcode;\n                selectedRecord[\"ngradecode\"] = {\n                  value: editCodedResult[0].ngradecode,\n                  label: editCodedResult[0][\"sdisplaystatus\"]\n                };\n                selectedRecord[\"sresultparacomment\"] = defaultCodedResult[0].sresultparacomment;\n              }\n            }\n          } else {\n            selectedRecord[\"spredefinedname\"] = \"\";\n            selectedRecord[\"ngradecode\"] = -1;\n          }\n\n          if (selectedParameterItem[\"npredefinedrequired\"] === transactionStatus.YES) {\n            needCodedResult = false;\n            npredefinedcode = selectedParameterItem[\"npredefinedrequired\"];\n          }\n\n          if (selectedParameterItem[\"ngraderequired\"] === transactionStatus.YES) {\n            needActualResult = false;\n          }\n        }\n      } else {\n        const parameterItem = parameterMap.get(\"DefaultValue\") ? parameterMap.get(\"DefaultValue\").item : {}; // parameterType.filter(item=>{ return item.nparametertypecode === transactionStatus.YES });\n\n        if (parameterItem[\"nunitrequired\"] === transactionStatus.YES) {\n          needUnit = false;\n          selectedRecord[\"nunitcode\"] = unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\"; //{\"value\": response[0].data[0][\"nunitcode\"], \"label\": response[0].data[0][\"sunitname\"]};\n        }\n\n        if (parameterItem[\"nroundingrequired\"] === transactionStatus.YES) {\n          needRoundingDigit = false;\n        }\n\n        if (parameterItem[\"npredefinedcrequired\"] === transactionStatus.YES) {\n          needCodedResult = false;\n          npredefinedcode = parameterItem[\"npredefinedcode\"];\n        }\n\n        if (parameterItem[\"ngraderequired\"] === transactionStatus.YES) {\n          needActualResult = false; // selectedRecord[\"ngradecode\"] = {\"value\": Grade.ngradecode, \"label\": Grade[\"sdisplaystatus\"]};\n        }\n\n        selectedRecord[\"nparametertypecode\"] = parameterMap.get(\"DefaultValue\"); //{value: parameterItem[0].nparametertypecode, label: parameterItem[0].sdisplaystatus};\n\n        selectedRecord[\"nroundingdigits\"] = \"\";\n        selectedRecord[\"nunitcode\"] = \"\";\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: true,\n          operation: operation,\n          screenName: \"IDS_PARAMETER\",\n          selectedRecord,\n          parameterData: {\n            unit: unitMap.get(\"OptionList\"),\n            grade: gradeMap.get(\"OptionList\"),\n            deltaperiod: deltaperiodMap.get(\"OptionList\"),\n            parameterType: parameterMap.get(\"OptionList\"),\n            needUnit,\n            needRoundingDigit,\n            needCodedResult,\n            needActualResult,\n            npredefinedcode,\n            testParameter: constructOptionList(response[3].data[\"TestParameter\"] || [], 'sparametername', 'sparametername', false, false, true).get(\"OptionList\"),\n            defaultUnit: unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\",\n            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"\n          },\n          ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}; //Add Coded result\n\nexport const addCodedResult = (operation, paramdata, userInfo, ncontrolCode) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    const urlArray = [rsapi.post(\"testmaster/getAddTest\", {\n      \"userinfo\": userInfo\n    }), rsapi.post(\"grade/getGrade\", {\n      \"userinfo\": userInfo\n    })];\n\n    if (operation === \"update\") {\n      urlArray.push(rsapi.post(\"testmaster/getActivePredefinedParameterById\", {\n        ntestpredefinedcode: paramdata[\"ntestpredefinedcode\"],\n        \"userinfo\": userInfo\n      }));\n    }\n\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = {}; // const grade = response[1].data;\n\n      const gradeMap = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\n\n      if (operation === \"update\") {\n        const editCodedResult = response[2].data;\n        selectedRecord = {\n          ntestpredefinedcode: paramdata[\"ntestpredefinedcode\"],\n          ntestparametercode: paramdata[\"ntestparametercode\"],\n          ngradecode: {\n            \"label\": editCodedResult[\"sdisplaystatus\"],\n            \"value\": editCodedResult[\"ngradecode\"]\n          },\n          spredefinedname: editCodedResult[\"spredefinedname\"],\n          ndefaultstatus: editCodedResult[\"ndefaultstatus\"],\n          sresultparacomment: editCodedResult[\"sresultparacomment\"]\n        };\n      } else {\n        selectedRecord = {\n          ntestparametercode: paramdata[\"ntestparametercode\"],\n          ngradecode: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\" //{\"value\": grade[0].ngradecode, \"label\": grade[0][\"sdisplaystatus\"]}\n\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: false,\n          operation: operation,\n          screenName: \"IDS_CODEDRESULT\",\n          parameterData: {\n            grade: gradeMap.get(\"OptionList\"),\n            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"\n          },\n          selectedRecord,\n          ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}; //Add parameter specification\n\nexport const addParameterSpecification = (operation, paramdata, userInfo, ncontrolCode) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    let inputparam = [];\n    let surl = \"\";\n\n    if (operation === \"update\") {\n      surl = \"getParameterSpecificationById\";\n      inputparam = {\n        userinfo: userInfo,\n        ntestparamnumericcode: paramdata[\"ntestparamnumericcode\"]\n      };\n    } else {\n      surl = \"getParameterSpecificationByCount\";\n      inputparam = {\n        userinfo: userInfo,\n        ntestparametercode: paramdata[\"ntestparametercode\"]\n      };\n    }\n\n    rsapi.post(\"testmaster/\" + surl, inputparam).then(response => {\n      let selectedRecord = {};\n\n      if (operation === \"update\") {\n        selectedRecord = { ...response.data\n        };\n      } else {\n        selectedRecord = {\n          ntestparametercode: paramdata[\"ntestparametercode\"]\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: false,\n          operation: operation,\n          screenName: \"IDS_SPECIFICATION\",\n          selectedRecord,\n          ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const getAvailableData = (testItem, url, key, screenName, userInfo, ncontrolCode) => {\n  return dispatch => {\n    const inputParam = {\n      TestMaster: testItem,\n      \"userinfo\": userInfo\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"testmaster/\" + url, inputParam).then(response => {\n      const availableDataMap = constructOptionList(response.data, key === \"section\" ? \"nsectioncode\" : key === \"method\" ? \"nmethodcode\" : key == \"instrumentcategory\" ? \"ninstrumentcatcode\" : key == \"package\" ? \"ntestpackagecode\" : key == \"technique\" ? \"ntechniquecode\" : \"ncontainertypecode\", key === \"section\" ? \"ssectionname\" : key === \"method\" ? \"smethodname\" : key == \"instrumentcategory\" ? \"sinstrumentcatname\" : key == \"package\" ? \"stestpackagename\" : key == \"technique\" ? \"stechniquename\" : \"scontainertype\", false, false, true);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: false,\n          otherTestData: {\n            [key]: availableDataMap.get(\"OptionList\")\n          },\n          screenName: screenName,\n          selectedRecord: {\n            availableData: \"\"\n          },\n          operation: \"create\",\n          ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 417) {\n        toast.info(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n}; //Add formula\n\nexport const addFormula = (paramdata, userInfo, ncontrolCode) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"testmaster/addTestFormula\", {\n      userinfo: userInfo,\n      nFlag: 1\n    }).then(response => {\n      const responseData = response.data;\n      const testMasterMap = constructOptionList(responseData[\"TestMaster\"], \"ntestcode\", \"stestname\", false, false, false);\n      const testCategoryMap = constructOptionList(responseData[\"TestCategory\"], \"ntestcategorycode\", \"stestcategoryname\", 'descending', false, true);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          showSaveContinue: false,\n          operation: \"create\",\n          screenName: \"IDS_FORMULA\",\n          formulaData: {\n            operators: responseData[\"Operators\"],\n            functions: responseData[\"Functions\"],\n            testCategory: testCategoryMap.get(\"OptionList\"),\n            testMaster: testMasterMap.get(\"OptionList\"),\n            dynamicFormulaFields: responseData[\"DynamicFormulaFields\"]\n          },\n          isFormulaOpen: true,\n          selectedRecord: {\n            ntestcategorycode: testCategoryMap.get(\"OptionList\") && testCategoryMap.get(\"OptionList\").length > 0 ? testCategoryMap.get(\"OptionList\")[0] : \"\",\n            //responseData[\"TestCategory\"].length>0? {\"label\": responseData[\"TestCategory\"][0][\"stestcategoryname\"], \"value\": responseData[\"TestCategory\"][0][\"ntestcategorycode\"]}: \"\",\n            ntestcode: testMasterMap.get(\"OptionList\") && testMasterMap.get(\"OptionList\").length > 0 ? testMasterMap.get(\"OptionList\")[0] : \"\",\n            //responseData[\"TestMaster\"].length>0? {\"label\": responseData[\"TestMaster\"][0][\"stestname\"], \"value\": responseData[\"TestMaster\"][0][\"ntestcode\"]}: \"\",\n            ntestparametercode: paramdata[\"ntestparametercode\"]\n          },\n          ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}; //Formula test category and test change event function\n\nexport const formulaChangeFunction = (inputParam, formulaData, caseNo, selectedRecordData, methodUrl) => {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testmaster\" + methodUrl, inputParam).then(response => {\n      const masterData = response.data;\n      const testMasterMap = constructOptionList(masterData[\"TestMaster\"] || [], \"ntestcode\", \"stestname\", 'descending', 'ntestcode', false);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: caseNo === 1 ? {\n          formulaData: { ...formulaData,\n            testMaster: testMasterMap.get(\"OptionList\"),\n            dynamicFormulaFields: masterData[\"DynamicFormulaFields\"] || []\n          },\n          selectedRecord: { ...selectedRecordData,\n            ntestcode: testMasterMap.get(\"OptionList\") && testMasterMap.get(\"OptionList\").length > 0 ? testMasterMap.get(\"OptionList\")[0] : \"\" // masterData[\"TestMaster\"].length>0? {\"label\": masterData[\"TestMaster\"][0][\"stestname\"], \"value\": masterData[\"TestMaster\"][0][\"ntestcode\"]}: \"\"\n\n          },\n          loading: false\n        } : {\n          formulaData: { ...formulaData,\n            dynamicFormulaFields: masterData[\"DynamicFormulaFields\"]\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      toast.error(error.message);\n    });\n  };\n};\nexport const changeTestCategoryFilter = (inputParam, filterTestCategory) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testmaster/get\" + inputParam.methodUrl, inputParam.inputData).then(response => {\n      const masterData = response.data;\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          masterData: { ...masterData,\n            filterTestCategory,\n            nfilterTestCategory: inputParam.inputData.nfilterTestCategory\n          }\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      toast.error(error.message);\n    });\n  };\n};\nexport const addTestFile = inputParam => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\n      userinfo: inputParam.userInfo\n    })];\n\n    if (inputParam.operation === \"update\") {\n      urlArray.push(rsapi.post(\"/testmaster/editTestFile\", {\n        userinfo: inputParam.userInfo,\n        testfile: inputParam.selectedRecord\n      }));\n    }\n\n    Axios.all(urlArray).then(response => {\n      const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\n      const linkmaster = linkMap.get(\"OptionList\");\n      let selectedRecord = {};\n      const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\n      let disabled = false;\n      let editObject = {};\n\n      if (inputParam.operation === \"update\") {\n        editObject = response[1].data;\n        let nlinkcode = {};\n        let link = {};\n\n        if (editObject.nattachmenttypecode === attachmentType.LINK) {\n          nlinkcode = {\n            \"label\": editObject.slinkname,\n            \"value\": editObject.nlinkcode\n          };\n          link = {\n            slinkfilename: editObject.sfilename,\n            slinkdescription: editObject.sdescription,\n            nlinkdefaultstatus: editObject.ndefaultstatus,\n            sfilesize: '',\n            nfilesize: 0,\n            ndefaultstatus: 4,\n            sfilename: ''\n          };\n        } else {\n          nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\"; //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\n\n          link = {\n            slinkfilename: '',\n            slinkdescription: '',\n            nlinkdefaultstatus: 4,\n            sfilesize: editObject.sfilesize,\n            nfilesize: editObject.nfilesize,\n            ndefaultstatus: editObject.ndefaultstatus,\n            sfilename: editObject.sfilename,\n            sdescription: editObject.sdescription\n          };\n        }\n\n        selectedRecord = { ...link,\n          ntestfilecode: editObject.ntestfilecode,\n          nattachmenttypecode: editObject.nattachmenttypecode,\n          //...editObject,\n          nlinkcode // disabled: true\n\n        };\n      } else {\n        selectedRecord = {\n          nattachmenttypecode: response[0].data.AttachmentType.length > 0 ? response[0].data.AttachmentType[0].nattachmenttypecode : attachmentType.FTP,\n          nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\",\n          //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\n          disabled\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          [inputParam.modalName]: true,\n          operation: inputParam.operation,\n          screenName: inputParam.screenName,\n          ncontrolCode: inputParam.ncontrolCode,\n          selectedRecord,\n          loading: false,\n          linkMaster: linkmaster,\n          showSaveContinue: false,\n          editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const getActiveTestContainerTypeById = containerParam => {\n  return function (dispatch) {\n    let urlArray = [];\n    const containerTypeById = rsapi.post(\"containertype/getContainerType\", {\n      \"userinfo\": containerParam.userInfo\n    });\n    const containerById = rsapi.post(\"testmaster/getActiveTestContainerTypeById\", {\n      [containerParam.primaryKeyField]: containerParam.primaryKeyValue,\n      \"userinfo\": containerParam.userInfo\n    });\n    const units = rsapi.post(\"unit/getUnit\", {\n      \"userinfo\": containerParam.userInfo\n    });\n    urlArray = [containerTypeById, containerById, units];\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = {};\n      const continerType = constructOptionList(response[0].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\n      const unitMap = constructOptionList(response[2].data || [], \"nunitcode\", \"sunitname\", false, false, true);\n      let otherTestData = {\n        containertype: continerType.get(\"OptionList\"),\n        unit: unitMap.get(\"OptionList\")\n      };\n      let ContainerType = [];\n      let unit = [];\n      ContainerType.push({\n        \"value\": response[1].data[\"ncontainertypecode\"],\n        \"label\": response[1].data[\"scontainertype\"]\n      });\n      selectedRecord = response[1].data;\n      selectedRecord[\"ncontainertypecode\"] = ContainerType[0];\n\n      if (response[1].data[\"nunitcode\"] !== -1) {\n        unit.push({\n          \"value\": response[1].data[\"nunitcode\"],\n          \"label\": response[1].data[\"sunitname\"]\n        });\n        selectedRecord = response[1].data;\n        selectedRecord[\"nunitcode\"] = unit[0];\n        selectedRecord[\"unitMandatory\"] = true;\n      } else {\n        selectedRecord[\"nunitcode\"] = undefined;\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          otherTestData: otherTestData,\n          selectedRecord: selectedRecord,\n          isOpen: true,\n          operation: containerParam.operation,\n          screenName: \"IDS_CONTAINERTYPE\",\n          openChildModal: true,\n          ncontrolCode: containerParam.ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n};\nexport const addContainerType = (operation, testparametercode, userInfo, ncontrolCode) => {\n  return function (dispatch) {\n    let urlArray = [];\n    const containerTypeById = rsapi.post(\"unit/getUnit\", {\n      \"userinfo\": userInfo\n    });\n    const containerById = rsapi.post(\"testmaster/getAvailableContainerType\", {\n      \"TestMaster\": testparametercode,\n      \"userinfo\": userInfo\n    });\n    urlArray = [containerTypeById, containerById];\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = {};\n      const unitMap = constructOptionList(response[0].data || [], \"nunitcode\", \"sunitname\", false, false, true);\n      const continerType = constructOptionList(response[1].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\n      let otherTestData = {\n        containertype: continerType.get(\"OptionList\"),\n        unit: unitMap.get(\"OptionList\")\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          otherTestData: otherTestData,\n          selectedRecord: selectedRecord,\n          showSaveContinue: false,\n          isOpen: true,\n          operation: operation,\n          screenName: \"IDS_CONTAINERTYPE\",\n          openChildModal: true,\n          loading: false,\n          ncontrolCode\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n};","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/TestMasterAction.js"],"names":["rsapi","toast","constructOptionList","sortData","DEFAULT_RETURN","Axios","initRequest","transactionStatus","attachmentType","intl","getTestMaster","testItem","userInfo","masterData","dispatch","post","ntestcode","userinfo","then","response","data","type","payload","loading","dataState","undefined","catch","error","message","getTestDetails","inputParam","testParameter","nFlag","ntestparametercode","status","warn","addTest","operation","testmaster","ncontrolCode","nfilterTestCategory","Object","values","length","urlArray","push","all","selectedRecord","selectedsubcodedresult","testCategoryMap","testCategory","get","checklistMap","ChecklistVersion","testData","parameterData","otherTestData","needOtherTest","editData","periodMap","interfacetypeMap","period","interfacetype","ntestcategorycode","value","ntransactionstatus","ACTIVE","naccredited","NOTACCREDITED","ntrainingneed","NO","stestsynonym","stestname","sdescription","ncost","parameterMap","gradeMap","parameterItem","nunitcode","nparametertypecode","needUnit","needRoundingDigit","needCodedResult","needActualResult","npredefinedcode","unitMap","deltaperiodMap","item","YES","grade","parameterType","unit","deltaperiod","defaultUnit","defaultGrade","sectionMap","methodMap","instCatMap","continerType","packageMap","package","section","method","instrumentcategory","containertype","periodDefault","label","openModal","screenName","formatMessage","id","addParameter","No","editTestParameter","TestParameter","filter","selectedParameterItem","editCodedResult","TestPredefinedParameter","defaultCodedResult","ndefaultstatus","spredefinedname","ntestpredefinedcode","ngradecode","sresultparacomment","openChildModal","showSaveContinue","addCodedResult","paramdata","addParameterSpecification","inputparam","surl","ntestparamnumericcode","getAvailableData","url","key","TestMaster","availableDataMap","availableData","info","addFormula","responseData","testMasterMap","formulaData","operators","functions","testMaster","dynamicFormulaFields","isFormulaOpen","formulaChangeFunction","caseNo","selectedRecordData","methodUrl","changeTestCategoryFilter","filterTestCategory","inputData","addTestFile","testfile","linkMap","LinkMaster","linkmaster","defaultLink","items","ndefaultlink","disabled","editObject","nlinkcode","link","nattachmenttypecode","LINK","slinkname","slinkfilename","sfilename","slinkdescription","nlinkdefaultstatus","sfilesize","nfilesize","ntestfilecode","AttachmentType","FTP","modalName","linkMaster","editFiles","getActiveTestContainerTypeById","containerParam","containerTypeById","containerById","primaryKeyField","primaryKeyValue","units","ContainerType","isOpen","addContainerType","testparametercode"],"mappings":"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","sourcesContent":["import rsapi from \"../rsapi\";\r\nimport {\r\n    toast\r\n} from \"react-toastify\";\r\nimport {\r\n    constructOptionList,\r\n    sortData\r\n} from \"../components/CommonScript\";\r\nimport {\r\n    DEFAULT_RETURN\r\n} from \"./LoginTypes\";\r\nimport Axios from \"axios\";\r\nimport {\r\n    initRequest\r\n} from \"./LoginAction\";\r\nimport {\r\n    transactionStatus,\r\n    attachmentType\r\n} from \"../components/Enumeration\";\r\nimport {\r\n    intl\r\n} from \"../components/App\";\r\n\r\n//Test click\r\nexport const getTestMaster = (testItem, userInfo, masterData) => {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testmaster/getTestById\", {\r\n                ntestcode: testItem.ntestcode,\r\n                userinfo: userInfo\r\n            })\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data\r\n                }\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        dataState: undefined\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}\r\n\r\n//tab click\r\nexport const getTestDetails = (inputParam) => {\r\n    return function (dispatch) {\r\n        const testParameter = inputParam.testParameter;\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testmaster/getothertestdetails\", {\r\n                ntestcode: testParameter.ntestcode,\r\n                \"nFlag\": inputParam.nFlag,\r\n                ntestparametercode: testParameter.ntestparametercode,\r\n                userinfo: inputParam.userInfo\r\n            })\r\n            .then(response => {\r\n                let masterData = inputParam.masterData\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data\r\n                };\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\n\r\n//Add Test\r\nexport const addTest = (operation, testmaster, userInfo, ncontrolCode, nfilterTestCategory) => {\r\n    return function (dispatch) {\r\n        if (nfilterTestCategory && Object.values(nfilterTestCategory).length > 0) {\r\n            dispatch(initRequest(true));\r\n            const urlArray = [\r\n                rsapi.post(\"testcategory/getTestCategory\", {\r\n                    \"userinfo\": userInfo\r\n                }),\r\n                rsapi.post(\"checklist/getApprovedChecklist\", {\r\n                    \"userinfo\": userInfo\r\n                })\r\n            ];\r\n            if (operation === \"update\") {\r\n                urlArray.push(rsapi.post(\"testmaster/getActiveTestById\", {\r\n                    \"userinfo\": userInfo,\r\n                    ntestcode: testmaster.ntestcode\r\n                }))\r\n\r\n                urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\r\n                    \"ncontrolcode\": ncontrolCode,\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n            } else if (operation === \"create\") {\r\n                urlArray.push(rsapi.post(\"parametertype/getParameterType\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"grade/getGrade\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"section/getSection\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testmaster/getAvailableMethod\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"unit/getUnit\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"instrumentcategory/fetchinstrumentcategory\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testmaster/getAddTest\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"containertype/getContainerType\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testpackage/getTestPackage\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n\r\n                urlArray.push(  rsapi.post(\"period/getPeriodByControl\", {\r\n                    \"ncontrolcode\": ncontrolCode,\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n            } else if (operation === \"copy\") {\r\n                urlArray.push(rsapi.post(\"testmaster/validateCopyTest\", {\r\n                    \"userinfo\": userInfo,\r\n                    ntestcode: testmaster.ntestcode\r\n                }));\r\n\r\n                urlArray.push(rsapi.post(\"period/getPeriodByControl\", {\r\n                    \"ncontrolcode\": ncontrolCode,\r\n                    \"userinfo\": userInfo\r\n                }));\r\n                urlArray.push(rsapi.post(\"testmaster/getInterfaceType\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n            }\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                  \r\n                    let selectedRecord = {};\r\n                    let selectedsubcodedresult = [];\r\n                    const testCategoryMap = constructOptionList(response[0].data || [], \"ntestcategorycode\", \"stestcategoryname\", false, false, true);\r\n                    const testCategory = testCategoryMap.get(\"OptionList\");\r\n                    const checklistMap = constructOptionList(response[0].data || [], \"nchecklistversioncode\", \"schecklistname\", false, false, true);\r\n                    const ChecklistVersion = checklistMap.get(\"OptionList\");\r\n                    //const periodMap=[];\r\n                    const testData = {\r\n                        testCategory,\r\n                        ChecklistVersion\r\n                    };\r\n                    let parameterData = {};\r\n                    let otherTestData = {}\r\n                    let needOtherTest = false;\r\n                    if (operation === \"update\") {\r\n                        const editData = response[2].data;\r\n                        selectedRecord = editData;\r\n                        const periodMap = constructOptionList(response[3].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n                        const interfacetypeMap = constructOptionList(response[4].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true);\r\n\r\n                        parameterData = {\r\n                            period:periodMap.get(\"OptionList\"),\r\n                            interfacetype:interfacetypeMap.get(\"OptionList\")\r\n                        }\r\n                        selectedRecord[\"ntestcategorycode\"] = {\r\n                            \"value\": editData[\"ntestcategorycode\"],\r\n                            \"label\": editData[\"stestcategoryname\"]\r\n                        };\r\n                        selectedRecord[\"nchecklistversioncode\"] = {\r\n                            \"value\": editData[\"nchecklistversioncode\"],\r\n                            \"label\": editData[\"schecklistname\"]\r\n                        };\r\n                        \r\n                        if(selectedRecord[\"ntatperiodcode\"] !==-1){\r\n                            selectedRecord[\"ntatperiodcode\"] = {\r\n                                \"value\": editData[\"ntatperiodcode\"],\r\n                                \"label\": editData[\"statperiodname\"]\r\n                            };\r\n                        }\r\n                        selectedRecord[\"ninterfacetypecode\"] = {\r\n                            \"value\": editData[\"ninterfacetypecode\"],\r\n                            \"label\": editData[\"sinterfacetypename\"]\r\n                        };\r\n                    } else if (operation === \"copy\") {\r\n                        const periodMap = constructOptionList(response[3].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n                        const interfacetypeMap = constructOptionList(response[4].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true);\r\n\r\n                        //period:periodMap.get(\"OptionList\")\r\n                        parameterData={\r\n                            period: periodMap.get(\"OptionList\"),\r\n                            interfacetype:interfacetypeMap.get(\"OptionList\")\r\n                        } ;\r\n                        selectedRecord = {\r\n                            ntestcategorycode: nfilterTestCategory.value === -2 ? (testCategory.length > 0 ?\r\n                                // {\"label\": testCategory[0].stestcategoryname, \"value\": testCategory[0].ntestcategorycode}\r\n                                testCategory[0] : \"\") : nfilterTestCategory,\r\n                            ntransactionstatus: transactionStatus.ACTIVE,\r\n                            naccredited: transactionStatus.NOTACCREDITED,\r\n                            ntrainingneed: transactionStatus.NO,\r\n                            stestsynonym: \"\",\r\n                            stestname: \"\",\r\n                            sdescription: \"\",\r\n                            ncost: \"\",\r\n                            //period:periodMap.get(\"OptionList\"),\r\n                           \r\n                        }\r\n                        \r\n                    } else {\r\n                        // const { Grade } = response[7].data; //ParameterType\r\n                        const parameterMap = constructOptionList(response[2].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true);\r\n                        // const parameterType = parameterMap.get(\"OptionList\");//response[2].data;\r\n                        const gradeMap = constructOptionList(response[3].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                        // const grade = gradeMap.get(\"OptionList\");// response[3].data;\r\n                        const parameterItem = parameterMap.get(\"DefaultValue\") ? parameterMap.get(\"DefaultValue\") : \"\"; //parameterType.filter(item=>{ return item.nparametertypecode === 3 });//ParameterType[0];\r\n                        selectedRecord = {\r\n                            // nsectioncode: {\"value\": response[2].data[0].nsectioncode, \"label\": response[2].data[0].ssectionname},\r\n                            nunitcode: -1,\r\n                            nparametertypecode: parameterItem, //{\"value\": parameterItem[0].nparametertypecode, \"label\": parameterItem[0].sdisplaystatus},\r\n                            ntestcategorycode: nfilterTestCategory.value === -2 ? (testCategory.length > 0 ?\r\n                                // {\"label\": testCategory[0].stestcategoryname, \"value\": testCategory[0].ntestcategorycode}: \"\")\r\n                                testCategory[0] : \"\") : nfilterTestCategory,\r\n                            ntransactionstatus: transactionStatus.ACTIVE,\r\n                            naccredited: transactionStatus.NOTACCREDITED,\r\n                            ntrainingneed: transactionStatus.NO,\r\n                            stestsynonym: \"\",\r\n                            stestname: \"\",\r\n                            sdescription: \"\",\r\n                            ncost: \"\"\r\n                        }\r\n                        let needUnit = true;\r\n                        let needRoundingDigit = true;\r\n                        let needCodedResult = true;\r\n                        let needActualResult = true;\r\n                        let npredefinedcode = transactionStatus.NO;\r\n                        const unitMap = constructOptionList(response[6].data || [], \"nunitcode\", \"sunitname\", false, false, true);\r\n                        const periodMap = constructOptionList(response[11].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n                        const deltaperiodMap = constructOptionList(response[11].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n                        const interfacetypeMap = constructOptionList(response[12].data || [], \"ninterfacetypecode\", \"sinterfacetypename\", false, false, true);\r\n\r\n                        if (parameterItem && parameterItem.item) {\r\n                            if (parameterItem.item[\"nunit\"] === transactionStatus.YES) {\r\n                                needUnit = false;\r\n                                selectedRecord[\"nunitcode\"] = unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\";\r\n                                //{\"value\": response[4].data[0][\"nunitcode\"], \"label\": response[4].data[0][\"sunitname\"]};\r\n                            }\r\n                            if (parameterItem.item[\"nroundingdigit\"] === transactionStatus.YES) {\r\n                                needRoundingDigit = false;\r\n                            }\r\n                            if (parameterItem.item[\"npredefinedcode\"] === transactionStatus.YES) {\r\n                                needCodedResult = false;\r\n                                npredefinedcode = parameterItem.item[\"npredefinedcode\"];\r\n                            }\r\n                            if (parameterItem.item[\"ngrade\"] === transactionStatus.YES) {\r\n                                needActualResult = false;\r\n                                selectedRecord[\"ngradecode\"] = gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\";\r\n                                //{\"value\": Grade.ngradecode, \"label\": Grade[\"sdisplaystatus\"]};\r\n                            }\r\n                        }\r\n                        // const testParameterMap = constructOptionList(response[8].data[\"TestParameter\"] || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true);\r\n                        parameterData = {\r\n                            grade: gradeMap.get(\"OptionList\"),\r\n                            parameterType: parameterMap.get(\"OptionList\"),\r\n                            unit: unitMap.get(\"OptionList\"),\r\n                            period:periodMap.get(\"OptionList\"),\r\n                            interfacetype:interfacetypeMap.get(\"OptionList\"),\r\n                            deltaperiod:deltaperiodMap.get(\"OptionList\"),\r\n                            needRoundingDigit,\r\n                            needUnit,\r\n                            needCodedResult,\r\n                            needActualResult,\r\n                            npredefinedcode,\r\n                            testParameter: constructOptionList(response[8].data[\"TestParameter\"] || [], 'sparametername', 'sparametername', false, false, true).get(\"OptionList\"),\r\n                            defaultUnit: unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\",\r\n                            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"\r\n                            //testParameterMap.get(\"OptionList\")\r\n                        };\r\n                        const sectionMap = constructOptionList(response[4].data || [], \"nsectioncode\", \"ssectionname\", false, false, true);\r\n                       // const methodMap = constructOptionList(response[5].data.Method.length>0?response[5].data.Method:[] || [], \"nmethodcode\", \"smethodname\", false, false, true);\r\n                       const methodMap = constructOptionList(response[5].data||[], \"nmethodcode\", \"smethodname\", false, false, true);\r\n\r\n                       const instCatMap = constructOptionList(response[7].data || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", false, false, true);\r\n                        const continerType = constructOptionList(response[9].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\r\n                        const packageMap = constructOptionList(response[10].data || [], \"ntestpackagecode\", \"stestpackagename\", false, false, true);\r\n                        otherTestData = {\r\n                            package: packageMap.get(\"OptionList\"),\r\n                            section: sectionMap.get(\"OptionList\"),\r\n                            method: methodMap.get(\"OptionList\"),\r\n                            instrumentcategory: instCatMap.get(\"OptionList\"),\r\n                            containertype: continerType.get(\"OptionList\")\r\n\r\n                        }\r\n                        needOtherTest = true;\r\n                        const periodDefault = periodMap.get(\"DefaultValue\");\r\n\r\n                        if (periodDefault !== undefined) {\r\n                            selectedRecord = {\r\n                                ...selectedRecord,\r\n                                \"ntatperiodcode\": {\r\n                                    \"value\": periodDefault.value,\r\n                                    \"label\": periodDefault.label\r\n                                },\r\n                            }\r\n                        }\r\n                        \r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            // parameterData: {\r\n                            //     period: periodMap.get(\"OptionList\")\r\n                            // },   \r\n                            openModal: true,\r\n                            needOtherTest,\r\n                            operation: operation,\r\n                            screenName: \"IDS_TEST\",\r\n                            selectedRecord,\r\n                            ncontrolCode,\r\n                            testData,\r\n                            parameterData,\r\n                            otherTestData,\r\n                            loading: false,selectedsubcodedresult\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_TESTCATEGORYNOTAVAILABLE\"\r\n            }))\r\n        }\r\n    }\r\n}\r\n\r\n//Add Test Parameter\r\nexport const addParameter = (operation, ntestparametercode, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        const urlArray = [\r\n            rsapi.post(\"unit/getUnit\", {\r\n                \"userinfo\": userInfo\r\n            }),\r\n            rsapi.post(\"parametertype/getParameterType\", {\r\n                \"userinfo\": userInfo\r\n            }),\r\n            rsapi.post(\"grade/getGrade\", {\r\n                \"userinfo\": userInfo\r\n            }),\r\n            rsapi.post(\"testmaster/getAddTest\", {\r\n                \"userinfo\": userInfo\r\n            }),\r\n            rsapi.post(\"period/getPeriodByControl\", {\r\n                \"ncontrolcode\": ncontrolCode,\r\n                \"userinfo\": userInfo\r\n            })\r\n            \r\n        ];\r\n        if (operation === \"update\") {\r\n            urlArray.push(rsapi.post(\"testmaster/getActiveParameterById\", {\r\n                ntestparametercode: ntestparametercode,\r\n                \"userinfo\": userInfo\r\n            }));\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                // const { Grade, ParameterType } = response[1].data;\r\n                const parameterMap = constructOptionList(response[1].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true);\r\n                const gradeMap = constructOptionList(response[2].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                const unitMap = constructOptionList(response[0].data || [], \"nunitcode\", \"sunitname\", false, false, true);\r\n                const deltaperiodMap = constructOptionList(response[4].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n\r\n                //response[2].data;\r\n                // const grade = response[2].data;\r\n                // const parameterType = response[1].data;\r\n                let selectedRecord = {};\r\n                let needUnit = true;\r\n                let needRoundingDigit = true;\r\n                let needCodedResult = true;\r\n                let needActualResult = true;\r\n                let npredefinedcode = transactionStatus.No;\r\n                if (operation === \"update\") {\r\n                    const editTestParameter = response[5].data.TestParameter[0];\r\n                    selectedRecord = editTestParameter;\r\n                    const nparametertypecode = editTestParameter[\"nparametertypecode\"];\r\n                    const parameterItem = parameterMap.get(\"OptionList\").filter(function (item) {\r\n                        return item.value === nparametertypecode;\r\n                    });\r\n                    selectedRecord[\"sparametername\"] = {\r\n                        value: editTestParameter[\"sparametername\"],\r\n                        label: editTestParameter[\"sparametername\"]\r\n                    };\r\n\r\n                    if(editTestParameter[\"ndeltaunitcode\"] !==-1){\r\n                        selectedRecord[\"ndeltaunitcode\"] = {\r\n                            \"value\": editTestParameter[\"ndeltaunitcode\"],\r\n                            \"label\": editTestParameter[\"sdeltaunitname\"]\r\n                        };\r\n                    }\r\n                    selectedRecord[\"nparametertypecode\"] = {\r\n                        value: nparametertypecode,\r\n                        label: editTestParameter[\"sdisplaystatus\"]\r\n                    };\r\n                    if (parameterItem && parameterItem[0].item) {\r\n                        const selectedParameterItem = parameterItem[0].item;\r\n                        if (selectedParameterItem[\"nunitrequired\"] === transactionStatus.YES) {\r\n                            needUnit = false;\r\n                            selectedRecord[\"nunitcode\"] = {\r\n                                value: editTestParameter[\"nunitcode\"],\r\n                                label: editTestParameter[\"sunitname\"]\r\n                            };\r\n                        }\r\n                        if (selectedParameterItem[\"nroundingrequired\"] === transactionStatus.YES) {\r\n                            needRoundingDigit = false;\r\n                        }\r\n\r\n                        if (selectedParameterItem[\"npredefinedrequired\"] === transactionStatus.YES || selectedParameterItem[\"ngraderequired\"] === transactionStatus.YES) {\r\n                            const editCodedResult = response[5].data.TestPredefinedParameter;\r\n                            if (editCodedResult.length > 0) {\r\n                                const defaultCodedResult = editCodedResult.filter(function (item) {\r\n                                    return item.ndefaultstatus === transactionStatus.YES;\r\n                                });\r\n                                if (defaultCodedResult.length > 0) {\r\n                                    selectedRecord[\"spredefinedname\"] = defaultCodedResult[0].spredefinedname;\r\n                                    selectedRecord[\"ntestpredefinedcode\"] = defaultCodedResult[0].ntestpredefinedcode;;\r\n                                    selectedRecord[\"ngradecode\"] = {\r\n                                        value: defaultCodedResult[0].ngradecode,\r\n                                        label: defaultCodedResult[0][\"sdisplaystatus\"]\r\n                                    };\r\n                                    selectedRecord[\"sresultparacomment\"] = defaultCodedResult[0].sresultparacomment;\r\n                                } else {\r\n                                    selectedRecord[\"spredefinedname\"] = editCodedResult[0].spredefinedname;\r\n                                    selectedRecord[\"ntestpredefinedcode\"] = editCodedResult[0].ntestpredefinedcode;\r\n                                    selectedRecord[\"ngradecode\"] = {\r\n                                        value: editCodedResult[0].ngradecode,\r\n                                        label: editCodedResult[0][\"sdisplaystatus\"]\r\n                                    };\r\n                                    selectedRecord[\"sresultparacomment\"] = defaultCodedResult[0].sresultparacomment;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            selectedRecord[\"spredefinedname\"] = \"\";\r\n                            selectedRecord[\"ngradecode\"] = -1;\r\n                        }\r\n                        if (selectedParameterItem[\"npredefinedrequired\"] === transactionStatus.YES) {\r\n                            needCodedResult = false;\r\n                            npredefinedcode = selectedParameterItem[\"npredefinedrequired\"];\r\n                        }\r\n                        if (selectedParameterItem[\"ngraderequired\"] === transactionStatus.YES) {\r\n                            needActualResult = false;\r\n                        }\r\n                    }\r\n                } else {\r\n                    const parameterItem = parameterMap.get(\"DefaultValue\") ? parameterMap.get(\"DefaultValue\").item : {};\r\n                    // parameterType.filter(item=>{ return item.nparametertypecode === transactionStatus.YES });\r\n                    if (parameterItem[\"nunitrequired\"] === transactionStatus.YES) {\r\n                        needUnit = false;\r\n                        selectedRecord[\"nunitcode\"] = unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\"; //{\"value\": response[0].data[0][\"nunitcode\"], \"label\": response[0].data[0][\"sunitname\"]};\r\n                    }\r\n                    if (parameterItem[\"nroundingrequired\"] === transactionStatus.YES) {\r\n                        needRoundingDigit = false;\r\n                    }\r\n                    if (parameterItem[\"npredefinedcrequired\"] === transactionStatus.YES) {\r\n                        needCodedResult = false;\r\n                        npredefinedcode = parameterItem[\"npredefinedcode\"];\r\n                    }\r\n                    if (parameterItem[\"ngraderequired\"] === transactionStatus.YES) {\r\n                        needActualResult = false;\r\n                        // selectedRecord[\"ngradecode\"] = {\"value\": Grade.ngradecode, \"label\": Grade[\"sdisplaystatus\"]};\r\n                    }\r\n                    selectedRecord[\"nparametertypecode\"] = parameterMap.get(\"DefaultValue\"); //{value: parameterItem[0].nparametertypecode, label: parameterItem[0].sdisplaystatus};\r\n                    selectedRecord[\"nroundingdigits\"]=\"\";\r\n                    selectedRecord[\"nunitcode\"]=\"\";\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: true,\r\n                        operation: operation,\r\n                        screenName: \"IDS_PARAMETER\",\r\n                        selectedRecord,\r\n                        parameterData: {\r\n                            unit: unitMap.get(\"OptionList\"),\r\n                            grade: gradeMap.get(\"OptionList\"),\r\n                            deltaperiod:deltaperiodMap.get(\"OptionList\"),\r\n                            parameterType: parameterMap.get(\"OptionList\"),\r\n                            needUnit,\r\n                            needRoundingDigit,\r\n                            needCodedResult,\r\n                            needActualResult,\r\n                            npredefinedcode,\r\n                            testParameter: constructOptionList(response[3].data[\"TestParameter\"] || [], 'sparametername', 'sparametername', false, false, true).get(\"OptionList\"),\r\n                            defaultUnit: unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\",\r\n                            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"\r\n                        },\r\n                        ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n//Add Coded result\r\nexport const addCodedResult = (operation, paramdata, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        const urlArray = [\r\n            rsapi.post(\"testmaster/getAddTest\", {\r\n                \"userinfo\": userInfo\r\n            }),\r\n            rsapi.post(\"grade/getGrade\", {\r\n                \"userinfo\": userInfo\r\n            })\r\n        ];\r\n        if (operation === \"update\") {\r\n            urlArray.push(rsapi.post(\"testmaster/getActivePredefinedParameterById\", {\r\n                ntestpredefinedcode: paramdata[\"ntestpredefinedcode\"],\r\n                \"userinfo\": userInfo\r\n            }));\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = {};\r\n                // const grade = response[1].data;\r\n                const gradeMap = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                if (operation === \"update\") {\r\n                    const editCodedResult = response[2].data;\r\n                    selectedRecord = {\r\n                        ntestpredefinedcode: paramdata[\"ntestpredefinedcode\"],\r\n                        ntestparametercode: paramdata[\"ntestparametercode\"],\r\n                        ngradecode: {\r\n                            \"label\": editCodedResult[\"sdisplaystatus\"],\r\n                            \"value\": editCodedResult[\"ngradecode\"]\r\n                        },\r\n                        spredefinedname: editCodedResult[\"spredefinedname\"],\r\n                        ndefaultstatus: editCodedResult[\"ndefaultstatus\"],\r\n                        sresultparacomment:editCodedResult[\"sresultparacomment\"],\r\n                    }\r\n                } else {\r\n                    selectedRecord = {\r\n                        ntestparametercode: paramdata[\"ntestparametercode\"],\r\n                        ngradecode: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\" //{\"value\": grade[0].ngradecode, \"label\": grade[0][\"sdisplaystatus\"]}\r\n                    }\r\n                }\r\n              \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: false,\r\n                        operation: operation,\r\n                        screenName: \"IDS_CODEDRESULT\",\r\n                        parameterData: {\r\n                            grade: gradeMap.get(\"OptionList\"),\r\n                            defaultGrade: gradeMap.get(\"DefaultValue\") ? gradeMap.get(\"DefaultValue\") : \"\"\r\n                        },\r\n                        selectedRecord,\r\n                        ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n//Add parameter specification\r\nexport const addParameterSpecification = (operation, paramdata, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let inputparam = [];\r\n        let surl = \"\";\r\n        if (operation === \"update\") {\r\n            surl = \"getParameterSpecificationById\";\r\n            inputparam = {\r\n                userinfo: userInfo,\r\n                ntestparamnumericcode: paramdata[\"ntestparamnumericcode\"]\r\n            };\r\n        } else {\r\n            surl = \"getParameterSpecificationByCount\";\r\n            inputparam = {\r\n                userinfo: userInfo,\r\n                ntestparametercode: paramdata[\"ntestparametercode\"]\r\n            };\r\n        }\r\n        rsapi.post(\"testmaster/\" + surl, inputparam)\r\n            .then(response => {\r\n                let selectedRecord = {};\r\n                if (operation === \"update\") {\r\n                    selectedRecord = {\r\n                        ...response.data\r\n                    }\r\n                } else {\r\n                    selectedRecord = {\r\n                        ntestparametercode: paramdata[\"ntestparametercode\"]\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: false,\r\n                        operation: operation,\r\n                        screenName: \"IDS_SPECIFICATION\",\r\n                        selectedRecord,\r\n                        ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getAvailableData = (testItem, url, key, screenName, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        const inputParam = {\r\n            TestMaster: testItem,\r\n            \"userinfo\": userInfo\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testmaster/\" + url, inputParam)\r\n            .then(response => {\r\n                const availableDataMap = constructOptionList(response.data, key === \"section\" ? \"nsectioncode\" : key === \"method\" ? \"nmethodcode\" : key == \"instrumentcategory\" ?\"ninstrumentcatcode\" : key == \"package\" ?\"ntestpackagecode\" : key == \"technique\" ?\"ntechniquecode\" : \"ncontainertypecode\",\r\n                    key === \"section\" ? \"ssectionname\" : key === \"method\" ? \"smethodname\" :  key == \"instrumentcategory\" ? \"sinstrumentcatname\"  :  key == \"package\" ? \"stestpackagename\" :key == \"technique\" ? \"stechniquename\" : \"scontainertype\", false, false, true);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: false,\r\n                        otherTestData: {\r\n                            [key]: availableDataMap.get(\"OptionList\")\r\n                        },\r\n                        screenName: screenName,\r\n                        selectedRecord: {\r\n                            availableData: \"\"\r\n                        },\r\n                        operation: \"create\",\r\n                        ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 417) {\r\n                    toast.info(error.response.data)\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n//Add formula\r\nexport const addFormula = (paramdata, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testmaster/addTestFormula\", {\r\n                userinfo: userInfo,\r\n                nFlag: 1\r\n            })\r\n            .then(response => {\r\n                const responseData = response.data;\r\n                const testMasterMap = constructOptionList(responseData[\"TestMaster\"], \"ntestcode\", \"stestname\", false, false, false);\r\n                const testCategoryMap = constructOptionList(responseData[\"TestCategory\"], \r\n                \"ntestcategorycode\", \"stestcategoryname\", 'descending', false, true);\r\n            \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openChildModal: true,\r\n                        showSaveContinue: false,\r\n                        operation: \"create\",\r\n                        screenName: \"IDS_FORMULA\",\r\n                        formulaData: {\r\n                            operators: responseData[\"Operators\"],\r\n                            functions: responseData[\"Functions\"],\r\n                            testCategory: testCategoryMap.get(\"OptionList\"),\r\n                            testMaster: testMasterMap.get(\"OptionList\"),\r\n                            dynamicFormulaFields: responseData[\"DynamicFormulaFields\"]\r\n                        },\r\n                        isFormulaOpen: true,\r\n                        selectedRecord: {\r\n                            ntestcategorycode: testCategoryMap.get(\"OptionList\") && testCategoryMap.get(\"OptionList\").length > 0 ? testCategoryMap.get(\"OptionList\")[0] : \"\", //responseData[\"TestCategory\"].length>0? {\"label\": responseData[\"TestCategory\"][0][\"stestcategoryname\"], \"value\": responseData[\"TestCategory\"][0][\"ntestcategorycode\"]}: \"\",\r\n                            ntestcode: testMasterMap.get(\"OptionList\") && testMasterMap.get(\"OptionList\").length > 0 ? testMasterMap.get(\"OptionList\")[0] : \"\", //responseData[\"TestMaster\"].length>0? {\"label\": responseData[\"TestMaster\"][0][\"stestname\"], \"value\": responseData[\"TestMaster\"][0][\"ntestcode\"]}: \"\",\r\n                            ntestparametercode: paramdata[\"ntestparametercode\"]\r\n                        },\r\n                        ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n//Formula test category and test change event function\r\nexport const formulaChangeFunction = (inputParam, formulaData, caseNo, selectedRecordData, methodUrl) => {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testmaster\" + methodUrl, inputParam)\r\n            .then(response => {\r\n                const masterData = response.data;\r\n                const testMasterMap = constructOptionList(masterData[\"TestMaster\"] || [], \"ntestcode\", \"stestname\", 'descending', 'ntestcode', false);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n\r\n                    payload: caseNo === 1 ? {\r\n                        formulaData: {\r\n                            ...formulaData,\r\n                            testMaster: testMasterMap.get(\"OptionList\"),\r\n                            dynamicFormulaFields: masterData[\"DynamicFormulaFields\"] || []\r\n                        },\r\n                        selectedRecord: {\r\n                            ...selectedRecordData,\r\n                            ntestcode: testMasterMap.get(\"OptionList\") && testMasterMap.get(\"OptionList\").length > 0 ? testMasterMap.get(\"OptionList\")[0] : \"\"\r\n                            // masterData[\"TestMaster\"].length>0? {\"label\": masterData[\"TestMaster\"][0][\"stestname\"], \"value\": masterData[\"TestMaster\"][0][\"ntestcode\"]}: \"\"\r\n                        },\r\n                        loading: false\r\n                    } : {\r\n                        formulaData: {\r\n                            ...formulaData,\r\n                            dynamicFormulaFields: masterData[\"DynamicFormulaFields\"]\r\n                        },\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}\r\n\r\nexport const changeTestCategoryFilter = (inputParam, filterTestCategory) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testmaster/get\" + inputParam.methodUrl, inputParam.inputData)\r\n            .then(response => {\r\n                const masterData = response.data\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            filterTestCategory,\r\n                            nfilterTestCategory: inputParam.inputData.nfilterTestCategory\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}\r\n\r\nexport const addTestFile = (inputParam) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\r\n            userinfo: inputParam.userInfo\r\n        })];\r\n        if (inputParam.operation === \"update\") {\r\n            urlArray.push(rsapi.post(\"/testmaster/editTestFile\", {\r\n                userinfo: inputParam.userInfo,\r\n                testfile: inputParam.selectedRecord\r\n            }))\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n              \r\n                const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\r\n                const linkmaster = linkMap.get(\"OptionList\");\r\n                let selectedRecord = {};\r\n                const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\r\n                let disabled = false;\r\n                let editObject = {};\r\n                if (inputParam.operation === \"update\") {\r\n                    editObject = response[1].data;\r\n                    let nlinkcode = {};\r\n                    let link = {};\r\n                    if (editObject.nattachmenttypecode === attachmentType.LINK) {\r\n                        nlinkcode = {\r\n                            \"label\": editObject.slinkname,\r\n                            \"value\": editObject.nlinkcode\r\n                        }\r\n\r\n                        link = {\r\n                            slinkfilename:editObject.sfilename,\r\n                            slinkdescription:editObject.sdescription,\r\n                            nlinkdefaultstatus:editObject.ndefaultstatus,\r\n                            sfilesize:'',\r\n                            nfilesize:0,\r\n                            ndefaultstatus:4,\r\n                            sfilename:'',\r\n                        }\r\n\r\n                    } else {\r\n                        nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\" //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\r\n                        link = {\r\n                            slinkfilename:'',\r\n                            slinkdescription:'',\r\n                            nlinkdefaultstatus:4,\r\n                            sfilesize:editObject.sfilesize,\r\n                            nfilesize:editObject.nfilesize,\r\n                            ndefaultstatus:editObject.ndefaultstatus,\r\n                            sfilename:editObject.sfilename,\r\n                            sdescription:editObject.sdescription\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n                    selectedRecord = {\r\n                        ...link,\r\n                        ntestfilecode:editObject.ntestfilecode,\r\n                        nattachmenttypecode:editObject.nattachmenttypecode,\r\n                        //...editObject,\r\n                        nlinkcode,\r\n        \r\n                       // disabled: true\r\n                    };\r\n                } else {\r\n                    selectedRecord = {\r\n                        nattachmenttypecode:response[0].data.AttachmentType.length>0?\r\n                        response[0].data.AttachmentType[0].nattachmenttypecode:attachmentType.FTP,\r\n                        nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\", //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\r\n                        disabled\r\n                    };\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        [inputParam.modalName]: true,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolCode,\r\n                        selectedRecord,\r\n                        loading: false,\r\n                        linkMaster: linkmaster,\r\n                        showSaveContinue: false,\r\n                        editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n \r\n\r\nexport const getActiveTestContainerTypeById = (containerParam) => {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n        const containerTypeById =rsapi.post(\"containertype/getContainerType\", {\r\n            \"userinfo\": containerParam.userInfo});\r\n        \r\n          \r\n            const containerById=rsapi.post(\"testmaster/getActiveTestContainerTypeById\", {\r\n                [containerParam.primaryKeyField] :containerParam.primaryKeyValue,\r\n                \"userinfo\": containerParam.userInfo\r\n                });\r\n                const units =rsapi.post(\"unit/getUnit\", {\r\n                    \"userinfo\": containerParam.userInfo});\r\n            urlArray = [containerTypeById, containerById,units];\r\n\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = {};\r\n               \r\n                const continerType = constructOptionList(response[0].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\r\n                const unitMap = constructOptionList(response[2].data || [], \"nunitcode\", \"sunitname\", false, false, true);\r\n\r\n                let otherTestData = {\r\n                    containertype: continerType.get(\"OptionList\"),\r\n                    unit: unitMap.get(\"OptionList\")\r\n                }\r\n                let ContainerType = [];\r\n                let unit=[];\r\n\r\n                ContainerType.push({\r\n                    \"value\": response[1].data[\"ncontainertypecode\"],\r\n                    \"label\": response[1].data[\"scontainertype\"]\r\n                });\r\n                selectedRecord = response[1].data;\r\n\r\n                selectedRecord[\"ncontainertypecode\"] = ContainerType[0];\r\n               \r\n                if( response[1].data[\"nunitcode\"]!==-1){\r\n                    unit.push({\r\n                        \"value\": response[1].data[\"nunitcode\"],\r\n                        \"label\": response[1].data[\"sunitname\"]\r\n                    });\r\n                    selectedRecord = response[1].data;\r\n                    selectedRecord[\"nunitcode\"] = unit[0];\r\n                    selectedRecord[\"unitMandatory\"] = true;\r\n                } else {\r\n                    selectedRecord[\"nunitcode\"] = undefined;\r\n                }\r\n                \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        otherTestData:otherTestData,\r\n                       selectedRecord: selectedRecord,\r\n                        isOpen: true,\r\n                        operation: containerParam.operation,\r\n                        screenName: \"IDS_CONTAINERTYPE\",\r\n                        openChildModal: true,\r\n                        ncontrolCode:containerParam.ncontrolCode,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const addContainerType = (operation, testparametercode, userInfo, ncontrolCode) => {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n        const containerTypeById =rsapi.post(\"unit/getUnit\", {\r\n            \"userinfo\": userInfo});\r\n        \r\n          \r\n             const containerById=rsapi.post(\"testmaster/getAvailableContainerType\", {\r\n                \"TestMaster\": testparametercode,\r\n                 \"userinfo\": userInfo\r\n                 });\r\n             urlArray = [containerTypeById,containerById];\r\n\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = {};\r\n                const unitMap = constructOptionList(response[0].data || [], \"nunitcode\", \"sunitname\", false, false, true);\r\n \r\n                const continerType = constructOptionList(response[1].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true);\r\n\r\n                let otherTestData = {\r\n                    containertype: continerType.get(\"OptionList\"),\r\n                    unit: unitMap.get(\"OptionList\")\r\n\r\n                }\r\n                \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        otherTestData:otherTestData,\r\n                       selectedRecord: selectedRecord,\r\n                       showSaveContinue: false,\r\n                        isOpen: true,\r\n                        operation: operation,\r\n                        screenName: \"IDS_CONTAINERTYPE\",\r\n                        openChildModal: true,\r\n                        loading: false,\r\n                        ncontrolCode\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}