{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{sortData,constructOptionList}from'../components/CommonScript';import Axios from'axios';import{initRequest}from'./LoginAction';import{intl}from'../components/App';import{toast}from'react-toastify';import{transactionStatus}from'../components/Enumeration';export function getManfacturerCombo(screenName,operation,primaryKeyName,masterData,userInfo,ncontrolCode){return function(dispatch){var urlArray=[];if(operation===\"create\"){// const EDQMManufacturer = rsapi.post(\"/edqmmanufacturer/getEDQMManufacturer\", { \"userinfo\": userInfo });\nvar CountryService=rsapi.post(\"country/getCountry\",{\"userinfo\":userInfo});urlArray=[CountryService];}else{var _rsapi$post;var EDQMManufacturer=rsapi.post(\"/edqmmanufacturer/getEDQMManufacturer\",{\"userinfo\":userInfo});var ManufacturerByID=rsapi.post(\"/manufacturer/getManufacturerById\",(_rsapi$post={},_defineProperty(_rsapi$post,primaryKeyName,masterData.selectedManufacturer[primaryKeyName]),_defineProperty(_rsapi$post,\"userinfo\",userInfo),_rsapi$post));urlArray=[EDQMManufacturer,ManufacturerByID];}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var countryCode=[];var countryMap=constructOptionList(response[0].data||[],\"ncountrycode\",\"scountryname\",undefined,undefined,true);var countryList=countryMap.get(\"OptionList\");var edqmManufacturer=[];var selectedRecord={};var edqmManufacturerMap=constructOptionList(response[0].data||[],\"nofficialmanufcode\",\"sofficialmanufname\",undefined,undefined,false);var edqmManufacturerList=edqmManufacturerMap.get(\"OptionList\");if(operation===\"update\"){selectedRecord=response[1].data;selectedRecord[\"nofficialmanufcode\"]={label:response[1].data[\"sofficialmanufname\"],value:response[1].data[\"nofficialmanufcode\"]};// edqmManufacturer.push({\n//     label: response[1].data[\"sofficialmanufname\"],\n//     value: response[1].data[\"nofficialmanufcode\"]\n// });\n}dispatch({type:DEFAULT_RETURN,payload:{edqmManufacturerList:edqmManufacturerList,Country:countryList,countryCode:countryCode,isOpen:true,selectedRecord:operation===\"update\"?selectedRecord:{\"ntransactionstatus\":1},edqmManufacturer:edqmManufacturer,operation:operation,screenName:screenName,openModal:true,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function selectCheckBoxManufacturer(Manufacturer,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/manufacturer/getManufacturerWithSiteAndContactDetails\",{'userinfo':userInfo,\"nmanufcode\":Manufacturer.nmanufcode}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);// console.log(\" Select Checked : \", masterData);\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,selectedId:null}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});});};}export function getContactInfo(SiteDetails,masterData){return function(dispatch){var Map={};Map[\"nmanufcode\"]=parseInt(SiteDetails.siteAddress.nmanufcode);Map[\"nmanufsitecode\"]=parseInt(SiteDetails.siteAddress.nmanufsitecode);Map[\"userinfo\"]=SiteDetails.userInfo;dispatch(initRequest(true));rsapi.post(\"/manufacturer/getContactManufacturerBySite\",Map).then(function(response){// dispatch({type: DEFAULT_RETURN, payload:{\n//     ManufacturerContactInfo :response.data,\n//     SiteCode: SiteDetails.nmanufsitecode, loading:false\n// }});   \nmasterData=_objectSpread(_objectSpread({},SiteDetails.masterData),{},{ManufacturerContactInfo:response.data,selectedSite:SiteDetails.siteAddress,SiteCode:SiteDetails.siteAddress.nmanufsitecode});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,dataState:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});// console.log(error);\n});};}export function getSiteManufacturerLoadEdit(screenName,operation,manufCode,manufSiteCode,ncontrolCode,userInfo){return function(dispatch){var urlArray=[];var selectedRecord={};if(operation===\"create\"){var Country=rsapi.post(\"/country/getCountry\",{\"userinfo\":userInfo});urlArray=[Country];}else{var _Country=rsapi.post(\"/country/getCountry\",{\"userinfo\":userInfo});var ManufacturerSiteByID=rsapi.post(\"/manufacturer/getSiteManufacturerById\",{\"nmanufcode\":manufCode,\"nmanufsitecode\":manufSiteCode,\"userinfo\":userInfo});urlArray=[_Country,ManufacturerSiteByID];}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var countryCode=[];var countryMap=constructOptionList(response[0].data||[],\"ncountrycode\",\"scountryname\",undefined,undefined,true);var countryList=countryMap.get(\"OptionList\");if(operation===\"update\"){selectedRecord=response[1].data;selectedRecord[\"ncountrycode\"]={label:response[1].data[\"scountryname\"],value:response[1].data[\"ncountrycode\"]};// countryCode.push({\n//     label: response[1].data[\"scountryname\"],\n//     value: response[1].data[\"ncountrycode\"]\n// });\n}dispatch({type:DEFAULT_RETURN,payload:{Country:countryList,openChildModal:true,operation:operation,selectedRecord:operation===\"update\"?selectedRecord:{\"ntransactionstatus\":transactionStatus.ACTIVE,\"ndefaultstatus\":transactionStatus.NO},countryCode:countryCode,ncontrolCode:ncontrolCode,screenName:\"IDS_SITEDETAILS\",loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getContactManufacturerLoadEdit(fetchRecord){return function(dispatch){var urlArray=[];var selectedId=null;var ManufacturerContactByID=rsapi.post(\"/manufacturer/getContactManufacturerById\",{\"nmanufcode\":fetchRecord.editRow.nmanufcode,\"nmanufsitecode\":fetchRecord.editRow.nmanufsitecode,\"nmanufcontactcode\":fetchRecord.editRow.nmanufcontactcode,\"userinfo\":fetchRecord.userInfo});urlArray=[ManufacturerContactByID];selectedId=fetchRecord.editRow.nmanufcontactcode;dispatch(initRequest(true));Axios.all(urlArray).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{openChildModal:true,operation:fetchRecord.operation,selectedRecord:fetchRecord.operation===\"update\"?response[0].data:undefined,defaultSite:fetchRecord.editRow.nmanufsitecode,ncontrolCode:fetchRecord.ncontrolCode,screenName:\"IDS_CONTACTDETAILS\",loading:false,selectedId:selectedId}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}// export function filterColumnDataManufacturer(filterValue, masterData, userInfo) {\n//     return function (dispatch) {  \n//         let manuFCode = 0;   \n//         let searchedData = undefined;\n//         if (filterValue === \"\"){\n//             manuFCode = masterData[\"Manufacturer\"][0].nmanufcode;\n//         }\n//         else{\n//             // if (filterValue.length > 2)\n//             // {\n//                 searchedData = searchData(filterValue, masterData[\"Manufacturer\"]);\n//                 if (searchedData.length > 0){\n//                     manuFCode = searchedData[0].nmanufcode; \n//                 }\n//             // }\n//         }\n//         if (manuFCode !== 0){\n//             dispatch(initRequest(true));\n//             return rsapi.post(\"manufacturer/getManufacturerWithSiteAndContactDetails\", {userInfo, nmanufcode:manuFCode})\n//             .then(response=>{         \n//                         masterData[\"ManufacturerSiteAddress\"] = response.data[\"ManufacturerSiteAddress\"];\n//                         masterData[\"ManufacturerContactInfo\"] = response.data[\"ManufacturerContactInfo\"];\n//                         masterData[\"selectedManufacturer\"] = response.data[\"selectedManufacturer\"];\n//                         masterData[\"SiteCode\"] = response.data[\"SiteCode\"];\n//                         masterData[\"searchedData\"] = searchedData;\n//                         dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false}});       \n//             })\n//             .catch(error=>{\n//                 dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\n//                 if (error.response.status === 500){\n//                     toast.error(error.message);\n//                 } \n//                 else{               \n//                     toast.warn(error.response.data);\n//                 }  \n//             }) \n//         } \n//         else{        \n//             masterData[\"ManufacturerSiteAddress\"] = [];\n//             masterData[\"ManufacturerContactInfo\"] = undefined;\n//             masterData[\"selectedManufacturer\"] = [];\n//             masterData[\"searchedData\"] = [];\n//             masterData[\"SiteCode\"]  = 0;\n//             dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false}}); \n//         }           \n//     }   \n// }","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/ManufacturerAction.js"],"names":["rsapi","DEFAULT_RETURN","sortData","constructOptionList","Axios","initRequest","intl","toast","transactionStatus","getManfacturerCombo","screenName","operation","primaryKeyName","masterData","userInfo","ncontrolCode","dispatch","urlArray","CountryService","post","EDQMManufacturer","ManufacturerByID","selectedManufacturer","all","then","response","countryCode","countryMap","data","undefined","countryList","get","edqmManufacturer","selectedRecord","edqmManufacturerMap","edqmManufacturerList","label","value","type","payload","Country","isOpen","openModal","loading","catch","error","status","formatMessage","id","message","warn","selectCheckBoxManufacturer","Manufacturer","nmanufcode","selectedId","getContactInfo","SiteDetails","Map","parseInt","siteAddress","nmanufsitecode","ManufacturerContactInfo","selectedSite","SiteCode","dataState","getSiteManufacturerLoadEdit","manufCode","manufSiteCode","ManufacturerSiteByID","openChildModal","ACTIVE","NO","getContactManufacturerLoadEdit","fetchRecord","ManufacturerContactByID","editRow","nmanufcontactcode","defaultSite"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport {DEFAULT_RETURN} from './LoginTypes';\r\nimport {sortData, constructOptionList} from '../components/CommonScript';\r\nimport Axios from 'axios';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\nimport { toast } from 'react-toastify';\r\nimport { transactionStatus } from '../components/Enumeration';\r\n\r\nexport function getManfacturerCombo(screenName, operation, primaryKeyName,  masterData, userInfo, ncontrolCode) {\r\n return function(dispatch){ \r\n    let urlArray = [];\r\n    if (operation === \"create\") {\r\n        // const EDQMManufacturer = rsapi.post(\"/edqmmanufacturer/getEDQMManufacturer\", { \"userinfo\": userInfo });\r\n        const CountryService = rsapi.post(\"country/getCountry\", { \"userinfo\" : userInfo });\r\n        urlArray = [CountryService];\r\n    }\r\n    else {\r\n\r\n        const EDQMManufacturer = rsapi.post(\"/edqmmanufacturer/getEDQMManufacturer\", { \"userinfo\": userInfo });\r\n        const ManufacturerByID = rsapi.post(\"/manufacturer/getManufacturerById\", { [primaryKeyName] :masterData.selectedManufacturer[primaryKeyName], \"userinfo\": userInfo });\r\n        urlArray = [EDQMManufacturer, ManufacturerByID];\r\n    }\r\n\r\n    dispatch(initRequest(true));\r\n    Axios.all(urlArray)\r\n        .then(response => {\r\n\r\n            let countryCode = [];\r\n            const countryMap = constructOptionList(response[0].data || [], \"ncountrycode\",\r\n            \"scountryname\", undefined, undefined, true);\r\n            const countryList = countryMap.get(\"OptionList\");\r\n\r\n            let edqmManufacturer = [];\r\n            let selectedRecord = {};\r\n\r\n            const edqmManufacturerMap = constructOptionList(response[0].data || [], \"nofficialmanufcode\",\r\n            \"sofficialmanufname\", undefined, undefined, false);\r\n\r\n            const edqmManufacturerList = edqmManufacturerMap.get(\"OptionList\");\r\n\r\n            if (operation === \"update\") {\r\n\r\n                selectedRecord = response[1].data;\r\n                selectedRecord[\"nofficialmanufcode\"] = {\r\n                    label: response[1].data[\"sofficialmanufname\"],\r\n                    value: response[1].data[\"nofficialmanufcode\"]\r\n                };\r\n                // edqmManufacturer.push({\r\n                //     label: response[1].data[\"sofficialmanufname\"],\r\n                //     value: response[1].data[\"nofficialmanufcode\"]\r\n                // });\r\n            }\r\n            dispatch({type: DEFAULT_RETURN, \r\n                payload:{  \r\n                edqmManufacturerList,Country: countryList,countryCode: countryCode,  isOpen: true,  \r\n                selectedRecord: operation === \"update\" ? selectedRecord : {\"ntransactionstatus\": 1}, \r\n                edqmManufacturer: edqmManufacturer ,\r\n                operation: operation,\r\n                     screenName: screenName,\r\n                    openModal : true, ncontrolCode: ncontrolCode, loading:false\r\n            }});\r\n        })\r\n        .catch(error => {\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500) {\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            }\r\n            else {\r\n                toast.warn(intl.formatMessage({ id: error.response.data }));\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function selectCheckBoxManufacturer(Manufacturer, userInfo, masterData){\r\n    return function(dispatch){ \r\n    dispatch(initRequest(true));\r\n    rsapi.post(\"/manufacturer/getManufacturerWithSiteAndContactDetails\", { 'userinfo': userInfo, \"nmanufcode\": Manufacturer.nmanufcode })\r\n        \r\n    .then(response=>{      \r\n        masterData = {...masterData, ...response.data};        \r\n        sortData(masterData);\r\n        // console.log(\" Select Checked : \", masterData);\r\n        dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false,selectedId:null}});   \r\n   })   \r\n        .catch(error => {\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n        })\r\n    }\r\n}\r\n\r\nexport function getContactInfo(SiteDetails, masterData){\r\n    return function(dispatch){ \r\n    let Map={};\r\n \r\n    Map[\"nmanufcode\"]=parseInt(SiteDetails.siteAddress.nmanufcode);\r\n    Map[\"nmanufsitecode\"]=parseInt(SiteDetails.siteAddress.nmanufsitecode);\r\n    Map[\"userinfo\"]=SiteDetails.userInfo\r\n    dispatch(initRequest(true));\r\n    rsapi.post(\"/manufacturer/getContactManufacturerBySite\",Map)\r\n    .then(response =>{\r\n        // dispatch({type: DEFAULT_RETURN, payload:{\r\n        //     ManufacturerContactInfo :response.data,\r\n        //     SiteCode: SiteDetails.nmanufsitecode, loading:false\r\n        // }});   \r\n         \r\n        masterData = {...SiteDetails.masterData, ManufacturerContactInfo: response.data,\r\n            selectedSite:  SiteDetails.siteAddress,\r\n             SiteCode: SiteDetails.siteAddress.nmanufsitecode};     \r\n        sortData(masterData);\r\n        dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false, dataState: undefined}}); \r\n\r\n    })\r\n    .catch(error =>{\r\n        dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n        // console.log(error);\r\n    })\r\n}\r\n}\r\n\r\nexport function getSiteManufacturerLoadEdit(screenName, operation, manufCode, manufSiteCode, ncontrolCode, userInfo){\r\n    return function(dispatch){ \r\n    let urlArray = [];\r\n    let selectedRecord = {};\r\n\r\n    if (operation === \"create\") {\r\n        const Country = rsapi.post(\"/country/getCountry\", { \"userinfo\": userInfo });\r\n        urlArray = [Country];\r\n    }\r\n    else {\r\n\r\n        const Country = rsapi.post(\"/country/getCountry\", { \"userinfo\": userInfo });\r\n        const ManufacturerSiteByID = rsapi.post(\"/manufacturer/getSiteManufacturerById\", { \"nmanufcode\": manufCode, \"nmanufsitecode\": manufSiteCode ,\"userinfo\": userInfo});\r\n        urlArray = [Country, ManufacturerSiteByID];\r\n    }\r\n\r\n    dispatch(initRequest(true));\r\n    Axios.all(urlArray)\r\n        .then(response => {\r\n\r\n            let countryCode = [];\r\n\r\n            const countryMap = constructOptionList(response[0].data || [], \"ncountrycode\",\r\n            \"scountryname\", undefined, undefined, true);\r\n\r\n            const countryList = countryMap.get(\"OptionList\");\r\n\r\n\r\n            if (operation === \"update\") {\r\n\r\n                selectedRecord = response[1].data;\r\n                selectedRecord[\"ncountrycode\"] = {\r\n                    label: response[1].data[\"scountryname\"],\r\n                    value: response[1].data[\"ncountrycode\"]\r\n                };\r\n                // countryCode.push({\r\n                //     label: response[1].data[\"scountryname\"],\r\n                //     value: response[1].data[\"ncountrycode\"]\r\n                // });\r\n            }\r\n\r\n            dispatch({type: DEFAULT_RETURN, payload:{\r\n                Country: countryList, openChildModal:true, operation, \r\n                selectedRecord: operation === \"update\" ? selectedRecord : {\"ntransactionstatus\": transactionStatus.ACTIVE,\"ndefaultstatus\":transactionStatus.NO}, countryCode: countryCode, ncontrolCode,\r\n                screenName: \"IDS_SITEDETAILS\", loading:false\r\n             }});\r\n        })\r\n        .catch(error => {\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500) {\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            }\r\n            else {\r\n                toast.warn(intl.formatMessage({ id: error.response.data }));\r\n            }\r\n        })\r\n    }\r\n}\r\nexport function getContactManufacturerLoadEdit(fetchRecord){\r\n    return function(dispatch){ \r\n    let urlArray = [];\r\n    let selectedId = null;\r\n    const ManufacturerContactByID = rsapi.post(\"/manufacturer/getContactManufacturerById\", { \"nmanufcode\": fetchRecord.editRow.nmanufcode, \"nmanufsitecode\": fetchRecord.editRow.nmanufsitecode, \"nmanufcontactcode\": fetchRecord.editRow.nmanufcontactcode,\"userinfo\": fetchRecord.userInfo });\r\n    urlArray = [ManufacturerContactByID];\r\n    selectedId = fetchRecord.editRow.nmanufcontactcode;\r\n\r\n    dispatch(initRequest(true));\r\n    Axios.all(urlArray)\r\n        .then(response => {            \r\n            dispatch({type: DEFAULT_RETURN, payload:{\r\n                openChildModal:true, operation:fetchRecord.operation, \r\n                selectedRecord: fetchRecord.operation === \"update\" ? response[0].data : undefined,\r\n          defaultSite: fetchRecord.editRow.nmanufsitecode, ncontrolCode:fetchRecord.ncontrolCode ,\r\n          screenName: \"IDS_CONTACTDETAILS\", loading:false, selectedId\r\n        }});\r\n        })\r\n        .catch(error => {\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500) {\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            }\r\n            else {\r\n                toast.warn(intl.formatMessage({ id: error.response.data }));\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\n// export function filterColumnDataManufacturer(filterValue, masterData, userInfo) {\r\n//     return function (dispatch) {  \r\n      \r\n//         let manuFCode = 0;   \r\n//         let searchedData = undefined;\r\n//         if (filterValue === \"\"){\r\n//             manuFCode = masterData[\"Manufacturer\"][0].nmanufcode;\r\n//         }\r\n//         else{\r\n//             // if (filterValue.length > 2)\r\n//             // {\r\n//                 searchedData = searchData(filterValue, masterData[\"Manufacturer\"]);\r\n            \r\n//                 if (searchedData.length > 0){\r\n//                     manuFCode = searchedData[0].nmanufcode; \r\n//                 }\r\n//             // }\r\n//         }\r\n     \r\n//         if (manuFCode !== 0){\r\n//             dispatch(initRequest(true));\r\n//             return rsapi.post(\"manufacturer/getManufacturerWithSiteAndContactDetails\", {userInfo, nmanufcode:manuFCode})\r\n//             .then(response=>{         \r\n//                         masterData[\"ManufacturerSiteAddress\"] = response.data[\"ManufacturerSiteAddress\"];\r\n//                         masterData[\"ManufacturerContactInfo\"] = response.data[\"ManufacturerContactInfo\"];\r\n//                         masterData[\"selectedManufacturer\"] = response.data[\"selectedManufacturer\"];\r\n//                         masterData[\"SiteCode\"] = response.data[\"SiteCode\"];\r\n//                         masterData[\"searchedData\"] = searchedData;\r\n\r\n//                         dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false}});       \r\n//             })\r\n//             .catch(error=>{\r\n//                 dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n//                 if (error.response.status === 500){\r\n//                     toast.error(error.message);\r\n//                 } \r\n//                 else{               \r\n//                     toast.warn(error.response.data);\r\n//                 }  \r\n//             }) \r\n//         } \r\n//         else{        \r\n//             masterData[\"ManufacturerSiteAddress\"] = [];\r\n//             masterData[\"ManufacturerContactInfo\"] = undefined;\r\n//             masterData[\"selectedManufacturer\"] = [];\r\n//             masterData[\"searchedData\"] = [];\r\n//             masterData[\"SiteCode\"]  = 0;\r\n//             dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false}}); \r\n//         }           \r\n//     }   \r\n// } \r\n\r\n"]},"metadata":{},"sourceType":"module"}