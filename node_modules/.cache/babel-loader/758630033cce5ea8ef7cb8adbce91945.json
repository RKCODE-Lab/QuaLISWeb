{"ast":null,"code":"import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{injectIntl}from'react-intl';import{Row,Col}from'react-bootstrap';import{callService,updateStore,crudMaster,formSortingService1,formModuleGetSorting,moduleSortingOrder1}from'../../actions';import{getControlMap,constructOptionList}from'../../components/CommonScript';import FormSelectSearch from'../../components/form-select-search/form-select-search.component';import SortableItemUI from'./FormModuleSortingConfig';import{sortData}from'../../components/CommonScript';import{Sortable}from\"@progress/kendo-react-sortable\";import{DEFAULT_RETURN}from\"../../actions/LoginTypes\";var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Sorting=/*#__PURE__*/function(_React$Component){_inherits(Sorting,_React$Component);var _super=_createSuper(Sorting);function Sorting(props){var _this;_classCallCheck(this,Sorting);_this=_super.call(this,props);_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;if(_this.state.bool===1){if(fieldName===\"nmenucode\"){_this.props.formSortingService1({inputData:{nmenucode:selectedRecord.nmenucode.value,userinfo:_this.props.Login.userInfo,primarykey:selectedRecord.nmenucode.value,boolValue:1},masterData:_this.props.Login.masterData,url:\"sorting/getFilter\"});}}else if(_this.state.bool===2){if(fieldName===\"nmenucode\"){_this.props.formSortingService1({inputData:{nmenucode:selectedRecord.nmenucode.value,userinfo:_this.props.Login.userInfo,primarykey:selectedRecord.nmenucode.value,boolValue:2},masterData:_this.props.Login.masterData,url:\"sorting/getFilter\"});}}if(fieldName===\"nmodulecode\"){_this.props.formSortingService1({inputData:{nmenucode:selectedRecord.nmodulecode.item.nmenucode,nmodulecode:selectedRecord.nmodulecode.value,userinfo:_this.props.Login.userInfo,primarykey:selectedRecord.nmodulecode.item.nmenucode,primarykey1:selectedRecord.nmodulecode.value,boolValue:1},masterData:_this.props.Login.masterData,url:\"sorting/getFilter1\"});}else{_this.setState({selectedRecord:selectedRecord});}};_this.onNavigate=function(event){_this.setState({palettes:event.newState});};_this.booleanValue=function(fieldName){if(fieldName==\"formSorting\"){_this.setState({bool:1,btnControl1:\"primary active\",btnControl:\"primary disabled\"});var updateInfo={typeName:DEFAULT_RETURN,data:{boolValue:1,displayName:_this.props.intl.formatMessage({id:\"IDS_SCREENORGANISINGFORM\"})}};_this.props.updateStore(updateInfo);_this.props.Login.masterData[\"nFlag\"]=0;_this.props.formModuleGetSorting({inputData:{boolValue:1,userinfo:_this.props.Login.userInfo},masterData:_this.props.Login.masterData,url:\"sorting/getSorting\"});}else if(fieldName==\"moduleSorting\"){_this.setState({bool:2,btnControl:\"primary active\",btnControl1:\"primary disabled\"});var _updateInfo={typeName:DEFAULT_RETURN,data:{boolValue:2,displayName:_this.props.intl.formatMessage({id:\"IDS_SCREENORGANISINGMODULE\"})}};_this.props.updateStore(_updateInfo);_this.props.Login.masterData[\"nFlag\"]=0;_this.props.formModuleGetSorting({inputData:{boolValue:2,userinfo:_this.props.Login.userInfo},masterData:_this.props.Login.masterData,url:\"sorting/getSorting\"});}};_this.formRef=React.createRef();_this.extractedColumnList=[];_this.state={masterStatus:\"\",error:\"\",selectedRecord:{},isOpen:false,userRoleControlRights:[],controlMap:new Map(),data:[],bool:1,btnControl:\"primary disabled\",btnControl1:\"primary active\"};return _this;}_createClass(Sorting,[{key:\"render\",value:function render(){var _this2=this;if(this.props.Login.inputParam!==undefined){this.extractedColumnList=[];}var masterdata=_objectSpread({},this.props.Login.masterData);delete masterdata.MenuList;delete masterdata.SelectedMenuSorting;delete masterdata.SelectedModuleSorting;delete masterdata.moduleList;delete masterdata.nFlag;delete masterdata.formsList;var palettes=masterdata&&Object.keys(masterdata);var masterdata1=[];var palettes2=[];if(this.state.bool==1){this.props.Login.masterData.nFlag===1||this.props.Login.nFlag===1?masterdata1.push.apply(masterdata1,_toConsumableArray(this.props.Login.masterData.SelectedModuleSorting&&this.props.Login.masterData.SelectedModuleSorting)):palettes.map(function(item){return _this2.props.Login.masterData.SelectedModuleSorting&&_this2.props.Login.masterData.SelectedModuleSorting.map(function(item1){return item===item1.smodulename?masterdata1.push(item1):\"\";});});var m1=Object.keys(masterdata1);var m2=m1.map(function(item){return{smodulename:masterdata1[item].smodulename,nsorter:masterdata1[item].nsorter,nmodulecode:masterdata1[item].nmodulecode,sdisplayname:masterdata1[item].sdisplayname};});var palettes1=Object.values(m2.map(function(item){return item;}));palettes1&&palettes1.map(function(item,index){var formList=masterdata[item.smodulename];sortData(masterdata[item.smodulename],'ascending','nsorter');palettes2.push({data:formList,name:item.sdisplayname,id:index,nmoduleSorter:item.nsorter,nmodulecode:item.nmodulecode});});}else if(this.state.bool==2){this.props.Login.masterData.nFlag===1||this.props.Login.nFlag===1?masterdata1.push.apply(masterdata1,_toConsumableArray(this.props.Login.masterData.SelectedMenuSorting)):palettes.map(function(item){return _this2.props.Login.masterData.SelectedMenuSorting.map(function(item1){return item===item1.smenuname?masterdata1.push(item1):\"\";});});var _m=Object.keys(masterdata1);var _m2=_m.map(function(item){return{smenuname:masterdata1[item].smenuname,nsorter:masterdata1[item].nsorter,nmenucode:masterdata1[item].nmenucode,sdisplayname:masterdata1[item].sdisplayname};});var _palettes=Object.values(_m2.map(function(item){return item;}));_palettes&&_palettes.map(function(item,index){var formList=masterdata[item.smenuname];sortData(masterdata[item.smenuname],'ascending','nsorter');palettes2.push({data:formList,name:item.sdisplayname,id:index,nmenuSorter:item.nsorter,nmenucode:item.nmenucode});});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-5\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-\"+this.state.btnControl+\" btn-padd-custom\",style:{float:\"right\",marginRight:\"35px\"},onClick:function onClick(){return _this2.booleanValue('moduleSorting');}},this.props.intl.formatMessage({id:\"IDS_MODULE\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-\"+this.state.btnControl1+\" btn-padd-custom\",style:{float:\"right\",marginRight:\"35px\"},onClick:function onClick(){return _this2.booleanValue('formSorting');}},this.props.intl.formatMessage({id:\"IDS_FORM\"})),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(FormSelectSearch,{name:\"nmenucode\",formLabel:this.props.intl.formatMessage({id:\"IDS_MENU\"}),placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),options:this.state.lstMenuSorting||[],value:this.props.Login.masterData&&this.props.Login.masterData.SelectedMenuSorting&&{value:this.props.Login.masterData.SelectedMenuSorting[0]?this.props.Login.masterData.SelectedMenuSorting[0].nmenucode:\"\",label:this.props.Login.masterData.SelectedMenuSorting[0]?this.props.Login.masterData.SelectedMenuSorting[0].sdisplayname:\"\"},isMandatory:true,isMulti:false,isClearable:false,isSearchable:true,isDisabled:false,closeMenuOnSelect:true,className:\"mb-2\",onChange:function onChange(event){return _this2.onComboChange(event,'nmenucode');},maxMenuHeight:150})),this.state.bool===1?/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(FormSelectSearch,{name:\"nmodulecode\",formLabel:this.props.intl.formatMessage({id:\"IDS_MODULE\"}),placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),options:this.state.lstModuleSorting||[],value:this.props.Login.masterData&&this.props.Login.masterData.SelectedModuleSorting&&{value:this.props.Login.masterData.SelectedModuleSorting[0]?this.props.Login.masterData.SelectedModuleSorting[0].nmodulecode:\"\",label:this.props.Login.masterData.SelectedModuleSorting[0]?this.props.Login.masterData.SelectedModuleSorting[0].sdisplayname:\"\"},isMandatory:true,isMulti:false,isClearable:false,isSearchable:true,isDisabled:false,closeMenuOnSelect:true,className:\"mb-2\",onChange:function onChange(event){return _this2.onComboChange(event,'nmodulecode');},maxMenuHeight:150})):\"\"),/*#__PURE__*/React.createElement(Col,{md:10},this.props.Login.masterData.SelectedMenuSorting||this.props.Login.masterData.SelectedModuleSorting?/*#__PURE__*/React.createElement(Sortable,{idField:\"id\",data:palettes2||[],itemUI:SortableItemUI,onDragOver:this.onDragOver,onNavigate:this.onNavigate,masterdata:masterdata}):\"\")));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);var menuMap=constructOptionList(this.props.Login.masterData.MenuList||[],\"nmenucode\",\"sdisplayname\",undefined,undefined,true);var MenuList=menuMap.get(\"OptionList\");var moduleMap=constructOptionList(this.props.Login.masterData.moduleList||[],\"nmodulecode\",\"sdisplayname\",undefined,undefined,true);var moduleList=moduleMap.get(\"OptionList\");this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,lstMenuSorting:MenuList,lstModuleSorting:moduleList});}else{var _moduleMap=constructOptionList(this.props.Login.masterData.moduleList||[],\"nmodulecode\",\"sdisplayname\",undefined,undefined,true);var _moduleList=_moduleMap.get(\"OptionList\");this.setState({isOpen:false,selectedRecord:this.props.Login.selectedRecord,lstModuleSorting:_moduleList});}}else if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}}}]);return Sorting;}(React.Component);export default connect(mapStateToProps,{callService:callService,updateStore:updateStore,crudMaster:crudMaster,formSortingService1:formSortingService1,formModuleGetSorting:formModuleGetSorting,moduleSortingOrder1:moduleSortingOrder1})(injectIntl(Sorting));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/credentialmanagement/Sorting.jsx"],"names":["React","connect","injectIntl","Row","Col","callService","updateStore","crudMaster","formSortingService1","formModuleGetSorting","moduleSortingOrder1","getControlMap","constructOptionList","FormSelectSearch","SortableItemUI","sortData","Sortable","DEFAULT_RETURN","mapStateToProps","state","Login","Sorting","props","onComboChange","comboData","fieldName","selectedRecord","bool","inputData","nmenucode","value","userinfo","userInfo","primarykey","boolValue","masterData","url","nmodulecode","item","primarykey1","setState","onNavigate","event","palettes","newState","booleanValue","btnControl1","btnControl","updateInfo","typeName","data","displayName","intl","formatMessage","id","formRef","createRef","extractedColumnList","masterStatus","error","isOpen","userRoleControlRights","controlMap","Map","inputParam","undefined","masterdata","MenuList","SelectedMenuSorting","SelectedModuleSorting","moduleList","nFlag","formsList","Object","keys","masterdata1","palettes2","push","map","item1","smodulename","m1","m2","nsorter","sdisplayname","palettes1","values","index","formList","name","nmoduleSorter","smenuname","nmenuSorter","float","marginRight","lstMenuSorting","label","lstModuleSorting","onDragOver","previousProps","nformcode","ncontrolcode","menuMap","get","moduleMap","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport { Row, Col } from 'react-bootstrap';\r\nimport { callService, updateStore, crudMaster, formSortingService1, formModuleGetSorting, moduleSortingOrder1 } from '../../actions';\r\nimport { getControlMap, constructOptionList } from '../../components/CommonScript';\r\nimport FormSelectSearch from '../../components/form-select-search/form-select-search.component';\r\nimport SortableItemUI from './FormModuleSortingConfig';\r\nimport { sortData } from '../../components/CommonScript';\r\nimport { Sortable } from \"@progress/kendo-react-sortable\";\r\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass Sorting extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.formRef = React.createRef();\r\n        this.extractedColumnList = [];\r\n\r\n        this.state = {\r\n            masterStatus: \"\", error: \"\", selectedRecord: {},\r\n            isOpen: false,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            data : [],\r\n            bool : 1,\r\n            btnControl : \"primary disabled\",\r\n            btnControl1 : \"primary active\"\r\n        };\r\n    };\r\n\r\n    render() {\r\n\r\n        if (this.props.Login.inputParam !== undefined) {\r\n\r\n            this.extractedColumnList = []\r\n        }\r\n\r\n        let masterdata = {...this.props.Login.masterData};\r\n        delete(masterdata.MenuList);\r\n        delete(masterdata.SelectedMenuSorting);\r\n        delete(masterdata.SelectedModuleSorting);\r\n        delete(masterdata.moduleList);\r\n        delete(masterdata.nFlag); \r\n        delete(masterdata.formsList); \r\n\r\n        let palettes=masterdata && Object.keys(masterdata);\r\n        const masterdata1 = [];\r\n        const palettes2 = [];\r\n\r\n        if(this.state.bool == 1){\r\n            this.props.Login.masterData.nFlag === 1 || this.props.Login.nFlag ===1 ?\r\n        masterdata1.push(...this.props.Login.masterData.SelectedModuleSorting && this.props.Login.masterData.SelectedModuleSorting) :\r\n        palettes.map(item => this.props.Login.masterData.SelectedModuleSorting && this.props.Login.masterData.SelectedModuleSorting.map(\r\n            item1 =>item === item1.smodulename ? masterdata1.push(item1) : \"\"))\r\n\r\n        let m1 = Object.keys(masterdata1);\r\n\r\n        let m2 = \r\n        m1.map((item)=>({\r\n            smodulename : masterdata1[item].smodulename,\r\n            nsorter : masterdata1[item].nsorter,\r\n            nmodulecode : masterdata1[item].nmodulecode,\r\n            sdisplayname : masterdata1[item].sdisplayname\r\n        })) \r\n\r\n        const palettes1 = Object.values(m2.map((item)=>item));\r\n\r\n        palettes1 && palettes1.map((item, index)=>{\r\n            let formList =masterdata[item.smodulename]\r\n            sortData(masterdata[item.smodulename],'ascending','nsorter')\r\n            palettes2.push({\r\n              data: formList,\r\n              name: item.sdisplayname,\r\n              id: index,\r\n              nmoduleSorter: item.nsorter,\r\n              nmodulecode : item.nmodulecode\r\n            })  \r\n          })\r\n        }\r\n        else if(this.state.bool == 2){\r\n            this.props.Login.masterData.nFlag === 1 || this.props.Login.nFlag ===1 ?\r\n            masterdata1.push(...this.props.Login.masterData.SelectedMenuSorting) :\r\n            palettes.map(item => this.props.Login.masterData.SelectedMenuSorting.map(\r\n                item1 =>item === item1.smenuname ? masterdata1.push(item1) : \"\"))\r\n    \r\n            let m1 = Object.keys(masterdata1);\r\n    \r\n            let m2 = \r\n            m1.map((item)=>({\r\n                smenuname : masterdata1[item].smenuname,\r\n                nsorter : masterdata1[item].nsorter,\r\n                nmenucode : masterdata1[item].nmenucode,\r\n                sdisplayname : masterdata1[item].sdisplayname\r\n            })) \r\n    \r\n            const palettes1 = Object.values(m2.map((item)=>item));\r\n    \r\n                palettes1 && palettes1.map((item, index)=>{\r\n                let formList =masterdata[item.smenuname]\r\n                sortData(masterdata[item.smenuname],'ascending','nsorter')\r\n                palettes2.push({\r\n                  data: formList,\r\n                  name: item.sdisplayname,\r\n                  id: index,\r\n                  nmenuSorter: item.nsorter,\r\n                  nmenucode : item.nmenucode\r\n                })  \r\n              })\r\n        }\r\n        return (\r\n            <>\r\n                <div className=\"client-listing-wrap mtop-5\">\r\n                    <button className={\"btn btn-\"+(this.state.btnControl)+\" btn-padd-custom\"} style={{ float: \"right\", marginRight : \"35px\" }}\r\n                    onClick={() => this.booleanValue('moduleSorting') }>{this.props.intl.formatMessage({ id: \"IDS_MODULE\" })}</button>\r\n                    <button className={\"btn btn-\"+(this.state.btnControl1)+\" btn-padd-custom\"} style={{ float: \"right\", marginRight : \"35px\" }}\r\n                    onClick={() => this.booleanValue('formSorting')}>{this.props.intl.formatMessage({ id: \"IDS_FORM\" })}</button>\r\n                    <Row>\r\n                    <Col md={3}>\r\n                        <FormSelectSearch\r\n                            name={\"nmenucode\"}\r\n                            formLabel={this.props.intl.formatMessage({ id: \"IDS_MENU\" })}\r\n                            placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                            options={this.state.lstMenuSorting || []}\r\n                            value={this.props.Login.masterData && this.props.Login.masterData.SelectedMenuSorting\r\n                            && {\r\n                            value: this.props.Login.masterData.SelectedMenuSorting[0]? this.props.Login.masterData.SelectedMenuSorting[0].nmenucode :\"\",\r\n                            label: this.props.Login.masterData.SelectedMenuSorting[0]? this.props.Login.masterData.SelectedMenuSorting[0].sdisplayname : \"\"\r\n                            }}\r\n                            isMandatory={true}\r\n                            isMulti={false}\r\n                            isClearable={false}\r\n                            isSearchable={true}\r\n                            isDisabled={false}\r\n                            closeMenuOnSelect={true}\r\n                            className=\"mb-2\"\r\n                            onChange={(event) => this.onComboChange(event, 'nmenucode')}\r\n                            maxMenuHeight={150}\r\n                        /></Col>\r\n                        {this.state.bool === 1 ?\r\n                        <Col md={3}>\r\n                        <FormSelectSearch\r\n                            name={\"nmodulecode\"}\r\n                            formLabel={this.props.intl.formatMessage({ id: \"IDS_MODULE\" })}\r\n                            placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                            options={this.state.lstModuleSorting || []}\r\n                            value={this.props.Login.masterData && this.props.Login.masterData.SelectedModuleSorting\r\n                            && {\r\n                            value: this.props.Login.masterData.SelectedModuleSorting[0]? this.props.Login.masterData.SelectedModuleSorting[0].nmodulecode : \"\",\r\n                            label: this.props.Login.masterData.SelectedModuleSorting[0]? this.props.Login.masterData.SelectedModuleSorting[0].sdisplayname : \"\",\r\n                            }}\r\n                            isMandatory={true}\r\n                            isMulti={false}\r\n                            isClearable={false}\r\n                            isSearchable={true}\r\n                            isDisabled={false}\r\n                            closeMenuOnSelect={true}\r\n                            className=\"mb-2\"\r\n                            onChange={(event) => this.onComboChange(event, 'nmodulecode')}\r\n                            maxMenuHeight={150}\r\n                        /></Col>: \"\"}\r\n                        </Row>\r\n                        <Col md={10}>\r\n                    {this.props.Login.masterData.SelectedMenuSorting || this.props.Login.masterData.SelectedModuleSorting ? \r\n                    <Sortable\r\n                    idField={\"id\"}\r\n                    data={palettes2 || []}\r\n                    itemUI={SortableItemUI}\r\n                    onDragOver={this.onDragOver}\r\n                    onNavigate={this.onNavigate}\r\n                    masterdata={masterdata}\r\n                  />\r\n                   : \"\"}\r\n                    </Col>                                                                 \r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n\r\n                const menuMap = constructOptionList(this.props.Login.masterData.MenuList || [], \"nmenucode\",\r\n                    \"sdisplayname\", undefined, undefined, true);\r\n                const MenuList = menuMap.get(\"OptionList\");\r\n                const moduleMap = constructOptionList(this.props.Login.masterData.moduleList || [], \"nmodulecode\",\r\n                    \"sdisplayname\", undefined, undefined, true);\r\n                const moduleList = moduleMap.get(\"OptionList\");\r\n\r\n                this.setState({\r\n                    userRoleControlRights, controlMap, lstMenuSorting: MenuList, lstModuleSorting: moduleList,\r\n                });\r\n            }\r\n            else {\r\n                const moduleMap = constructOptionList(this.props.Login.masterData.moduleList || [], \"nmodulecode\",\r\n                    \"sdisplayname\", undefined, undefined, true);\r\n                const moduleList = moduleMap.get(\"OptionList\");\r\n\r\n                this.setState({\r\n                    isOpen: false,\r\n                    selectedRecord: this.props.Login.selectedRecord,lstModuleSorting: moduleList\r\n                });\r\n            }\r\n        } else if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n\r\n        if(this.state.bool === 1){\r\n        if (fieldName === \"nmenucode\") {\r\n            this.props.formSortingService1({\r\n                inputData: {\r\n                    nmenucode: selectedRecord.nmenucode.value,\r\n                    userinfo: this.props.Login.userInfo,\r\n                    primarykey: selectedRecord.nmenucode.value,\r\n                    boolValue: 1\r\n                },\r\n                masterData: this.props.Login.masterData,\r\n                url:\"sorting/getFilter\"\r\n            });\r\n        }\r\n    }\r\n    else if(this.state.bool === 2){\r\n        if (fieldName === \"nmenucode\") {\r\n            this.props.formSortingService1({\r\n                inputData: {\r\n                    nmenucode: selectedRecord.nmenucode.value,\r\n                    userinfo: this.props.Login.userInfo,\r\n                    primarykey: selectedRecord.nmenucode.value,\r\n                    boolValue: 2\r\n                },\r\n                masterData: this.props.Login.masterData,\r\n                url:\"sorting/getFilter\"\r\n            });\r\n        }      \r\n    }\r\n        if(fieldName === \"nmodulecode\"){\r\n            this.props.formSortingService1({\r\n                inputData: {\r\n                    nmenucode: selectedRecord.nmodulecode.item.nmenucode,\r\n                    nmodulecode: selectedRecord.nmodulecode.value,\r\n                    userinfo: this.props.Login.userInfo,\r\n                    primarykey: selectedRecord.nmodulecode.item.nmenucode,\r\n                    primarykey1: selectedRecord.nmodulecode.value,\r\n                    boolValue: 1\r\n                },\r\n                masterData: this.props.Login.masterData,\r\n                url:\"sorting/getFilter1\"\r\n            });\r\n        }\r\n        else{\r\n            this.setState({ selectedRecord });\r\n        } \r\n    }\r\n          \r\n    onNavigate = (event) => {\r\n        this.setState({\r\n          palettes: event.newState,\r\n        });\r\n      };\r\n\r\n      booleanValue = (fieldName) => {\r\n          if(fieldName == \"formSorting\"){\r\n              this.setState({\r\n                  bool:1,\r\n                  btnControl1:\"primary active\",\r\n                  btnControl:\"primary disabled\"\r\n              })\r\n\r\n              const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    boolValue: 1,\r\n                    displayName: this.props.intl.formatMessage({ id: \"IDS_SCREENORGANISINGFORM\" }),\r\n                    }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n            this.props.Login.masterData[\"nFlag\"] = 0;\r\n\r\n              this.props.formModuleGetSorting({\r\n                inputData: {\r\n                    boolValue:1,\r\n                    userinfo: this.props.Login.userInfo,\r\n                },\r\n                masterData: this.props.Login.masterData,\r\n                url:\"sorting/getSorting\"\r\n            });\r\n          }\r\n          else if(fieldName == \"moduleSorting\"){\r\n              this.setState({\r\n                  bool:2,\r\n                  btnControl:\"primary active\",\r\n                  btnControl1:\"primary disabled\"\r\n              })\r\n\r\n              const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    boolValue: 2,\r\n                    displayName: this.props.intl.formatMessage({ id: \"IDS_SCREENORGANISINGMODULE\" }),\r\n                    }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n            this.props.Login.masterData[\"nFlag\"] = 0;\r\n\r\n              this.props.formModuleGetSorting({\r\n                inputData: {\r\n                    boolValue:2,\r\n                    userinfo: this.props.Login.userInfo,\r\n                },\r\n                masterData: this.props.Login.masterData,\r\n                url:\"sorting/getSorting\"\r\n            });\r\n          }\r\n      }\r\n}\r\n\r\nexport default connect(mapStateToProps, { callService, updateStore, crudMaster, formSortingService1, formModuleGetSorting, moduleSortingOrder1 })(injectIntl(Sorting));\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}