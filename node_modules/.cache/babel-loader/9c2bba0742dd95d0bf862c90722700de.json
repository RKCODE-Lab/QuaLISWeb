{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";var _connect;import React,{Component}from'react';import{connect}from'react-redux';import{process}from'@progress/kendo-data-query';import{callService,crudMaster,getApprovalSubType,closeFilterService,changeFilterSubmit,getComboService,getTransactionForms,updateStore,getRegTypeBySampleType,getFilterSubmit,getRegSubTypeByRegtype,validateEsignCredential,filterColumnData}from'../../actions';import{Col,Row}from'react-bootstrap';import{SampleType}from'../../components/Enumeration';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import CustomSwitch from'../../components/custom-switch/custom-switch.component';import{Affix}from\"rsuite\";import{toast}from'react-toastify';import{injectIntl}from'react-intl';import'react-perfect-scrollbar/dist/css/styles.css';import{getControlMap,showEsign,constructOptionList}from'../../components/CommonScript';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import Esign from'../audittrail/Esign';import{transactionStatus}from'../../components/Enumeration';import{ListWrapper}from'../../components/client-group.styles';import DataGrid from'../../components/data-grid/data-grid.component';import ApprovalStatusConfigFilter from'../../pages/approvalstatusconfig/ApprovalStatusConfigFilter';import BreadcrumbComponentToolbar from'../../components/ToolbarBreadcrumb.Component';import AddApprovalStatusConfig from'./AddApprovalStatusConfig';var ApprovalStatusConfig=/*#__PURE__*/function(_Component){_inherits(ApprovalStatusConfig,_Component);var _super=_createSuper(ApprovalStatusConfig);function ApprovalStatusConfig(props){var _this;_classCallCheck(this,ApprovalStatusConfig);_this=_super.call(this,props);_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.data,event.dataState),dataState:event.dataState});};_this.closeFilter=function(){var inputData={userinfo:_this.props.Login.userInfo,nformcode:_this.props.Login.masterData.realdefaultForms?_this.props.Login.masterData.realdefaultForms.value:-1,napprovalsubtypecode:_this.props.Login.masterData.realSampleType.value===SampleType.Masters?_this.props.Login.masterData.realApprovalSubType?_this.props.Login.masterData.realApprovalSubType.item.napprovalsubtypecode:-1:-1,nregsubtypecode:_this.props.Login.masterData.realSampleType.value===SampleType.Masters?-1:_this.props.Login.masterData.realRegSubType?_this.props.Login.masterData.realRegSubType.value:-1,nregtypecode:_this.props.Login.masterData.realSampleType.value===SampleType.Masters?-1:_this.props.Login.masterData.realRegType?_this.props.Login.masterData.realRegType.value:-1,nsampletypecode:_this.props.Login.masterData.realSampleType?_this.props.Login.masterData.realSampleType.value:-1,defaultSample:_this.props.Login.masterData.realSampleType?_this.props.Login.masterData.realSampleType:\"\",defaultRegType:_this.props.Login.masterData.realRegType?_this.props.Login.masterData.realRegType:\"\",defaultRegSubType:_this.props.Login.masterData.realRegSubType?_this.props.Login.masterData.realRegSubType:\"\",defaultApprovalSubType:_this.props.Login.masterData.realApprovalSubType?_this.props.Login.masterData.realApprovalSubType:\"\",defaultForms:_this.props.Login.masterData.realdefaultForms?_this.props.Login.masterData.realdefaultForms:\"\"};var masterData=_objectSpread({},_this.props.Login.masterData);var inputParam={masterData:masterData,inputData:inputData};_this.props.closeFilterService(inputParam);};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";}}else{openModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.switchGroupBy=function(event){var selectedSwitch=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;var dataState=_this.state.dataState||{};var dataResult=_this.state.dataResult||{};if(selectedSwitch===transactionStatus.YES){dataState={skip:0,take:_this.state.dataState.take,group:[{field:'sapprovalstatusfunctions'}]};dataResult=process(_this.props.Login.masterData.approvalstatsusconfig||[],dataState);}else{dataState={skip:0,take:_this.state.dataState.take};dataResult=process(_this.props.Login.masterData.approvalstatsusconfig||[],dataState);}_this.setState({selectedSwitch:selectedSwitch,dataState:dataState,dataResult:dataResult});};_this.onComboChange=function(comboData,fieldName){var inputData=[];if(fieldName===\"nsampletypecode\"){inputData={userinfo:_this.props.Login.userInfo,nsampletypecode:parseInt(comboData.value),defaultSample:comboData};var masterData=_objectSpread({},_this.props.Login.masterData);var inputParam={masterData:masterData,inputData:inputData};_this.props.getRegTypeBySampleType(inputParam);}else if(fieldName===\"nformcode\"){var _masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultForms:comboData});var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:_masterData}};_this.props.updateStore(updateInfo);}else if(fieldName==\"napprovalsubtypecode\"){var _masterData2=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultApprovalSubType:comboData});var _updateInfo={typeName:DEFAULT_RETURN,data:{masterData:_masterData2}};_this.props.updateStore(_updateInfo);}else if(fieldName==\"nregtypecode\"){inputData={userinfo:_this.props.Login.userInfo,nregtypecode:parseInt(comboData.value),nsampletypecode:_this.props.Login.masterData.defaultSample.value,defaultRegType:comboData};var _masterData3=_objectSpread({},_this.props.Login.masterData);var _inputParam={masterData:_masterData3,inputData:inputData};_this.props.getRegSubTypeByRegtype(_inputParam);}else if(fieldName==\"nregsubtypecode\"){inputData={userinfo:_this.props.Login.userInfo,nregtypecode:_this.props.Login.masterData.defaultRegType.value,defaultRegSubType:comboData,nregsubtypecode:comboData.value};var _masterData4=_objectSpread({},_this.props.Login.masterData);var _inputParam2={masterData:_masterData4,inputData:inputData};_this.props.getTransactionForms(_inputParam2);}else if(fieldName===\"ntranscode\"){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[\"ntranscode\"]=comboData;_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"nstatusfunctioncode\"){var _selectedRecord=_this.state.selectedRecord||{};_selectedRecord[\"nstatusfunctioncode\"]=comboData;_this.setState({selectedRecord:_selectedRecord});}};_this.onFilterSubmit=function(){var inputData=[];inputData={userinfo:_this.props.Login.userInfo,nregtypecode:_this.props.Login.masterData.defaultSample.value===SampleType.Masters?transactionStatus.NA:parseInt(_this.props.Login.masterData.defaultRegType?_this.props.Login.masterData.defaultRegType.value:-1),nregsubtypecode:_this.props.Login.masterData.defaultSample.value===SampleType.Masters?transactionStatus.NA:parseInt(_this.props.Login.masterData.defaultRegSubType?_this.props.Login.masterData.defaultRegSubType.value:-1),nsampletypecode:_this.props.Login.masterData.defaultSample.value,nformcode:_this.props.Login.masterData.defaultForms?_this.props.Login.masterData.defaultForms.value:-1,napprovalsubtypecode:_this.props.Login.masterData.defaultApprovalSubType?_this.props.Login.masterData.defaultApprovalSubType.item.napprovalsubtypecode:-1};var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{realSampleType:_this.props.Login.masterData.defaultSample,realdefaultForms:_this.props.Login.masterData.defaultForms,realRegType:_this.props.Login.masterData.defaultRegType,realRegSubType:_this.props.Login.masterData.defaultRegSubType,realApprovalSubType:_this.props.Login.masterData.defaultApprovalSubType});var inputParam={masterData:masterData,inputData:inputData};_this.props.getFilterSubmit(inputParam);};_this.deleteRecord=function(deleteParam){var _inputData;var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:_this.props.Login.inputParam.methodUrl,displayName:_this.props.Login.inputParam.displayName,inputData:(_inputData={},_defineProperty(_inputData,_this.props.Login.inputParam.methodUrl.toLowerCase(),deleteParam.selectedRecord),_defineProperty(_inputData,\"nsampletypecode\",_this.props.Login.masterData.defaultSample.value),_defineProperty(_inputData,\"userinfo\",_this.props.Login.userInfo),_inputData),operation:deleteParam.operation,dataState:_this.state.dataState};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.inputParam.displayName}),operation:deleteParam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.onSaveClick=function(saveType,formRef){var inputData=[];inputData[\"approvalstatusconfig\"]=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;var dataState=undefined;var selectedId=null;var selectedTrans=[];_this.state.selectedRecord.ntranscode&&_this.state.selectedRecord.ntranscode.map(function(data){selectedTrans.push({nformcode:_this.props.Login.masterData.realdefaultForms?_this.props.Login.masterData.realdefaultForms.value:-1,nstatusfunctioncode:_this.state.selectedRecord[\"nstatusfunctioncode\"]?_this.state.selectedRecord[\"nstatusfunctioncode\"].value:-1,napprovalsubtypecode:_this.props.Login.masterData.realSampleType.value===SampleType.Masters?_this.props.Login.masterData.realApprovalSubType?_this.props.Login.masterData.realApprovalSubType.item.napprovalsubtypecode:-1:-1,nregsubtypecode:_this.props.Login.masterData.realSampleType.value===SampleType.Masters?-1:_this.props.Login.masterData.realRegSubType?_this.props.Login.masterData.realRegSubType.value:-1,nregtypecode:_this.props.Login.masterData.realSampleType.value===SampleType.Masters?-1:_this.props.Login.masterData.realRegType?_this.props.Login.masterData.realRegType.value:-1,nsampletypecode:_this.props.Login.masterData.realSampleType?_this.props.Login.masterData.realSampleType.value:-1,ntranscode:data.item.ntranscode});});inputData[\"approvalstatusconfig\"]=selectedTrans;var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:_this.props.Login.inputParam.methodUrl,displayName:_this.props.Login.inputParam.displayName,inputData:inputData,selectedId:selectedId,dataState:dataState,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef};var esignNeeded=showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:\"IDS_APPROVALSTATUSCONFIG\"}),operation:_this.props.Login.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.reloadData=function(){var inputData={userinfo:_this.props.Login.userInfo,nformcode:_this.props.Login.masterData.realdefaultForms?_this.props.Login.masterData.realdefaultForms.value:-1,napprovalsubtypecode:_this.props.Login.masterData.realSampleType.value===SampleType.Masters?_this.props.Login.masterData.realApprovalSubType?_this.props.Login.masterData.realApprovalSubType.item.napprovalsubtypecode:-1:-1,nregsubtypecode:_this.props.Login.masterData.realSampleType.value===SampleType.Masters?-1:_this.props.Login.masterData.realRegSubType?_this.props.Login.masterData.realRegSubType.value:-1,nregtypecode:_this.props.Login.masterData.realSampleType.value===SampleType.Masters?-1:_this.props.Login.masterData.realRegType?_this.props.Login.masterData.realRegType.value:-1,nsampletypecode:_this.props.Login.masterData.realSampleType?_this.props.Login.masterData.realSampleType.value:-1,defaultSample:_this.props.Login.masterData.realSampleType?_this.props.Login.masterData.realSampleType:\"\",defaultRegType:_this.props.Login.masterData.realRegType?_this.props.Login.masterData.realRegType:\"\",defaultRegSubType:_this.props.Login.masterData.realRegSubType?_this.props.Login.masterData.realRegSubType:\"\",defaultApprovalSubType:_this.props.Login.masterData.realApprovalSubType?_this.props.Login.masterData.realApprovalSubType:\"\",defaultForms:_this.props.Login.masterData.realdefaultForms?_this.props.Login.masterData.realdefaultForms:\"\"};// console.log(\"close inputdata\");\n// inputData[\"breadcrumdata\"] = breadcrumdata;\nvar masterData=_objectSpread({},_this.props.Login.masterData);var inputParam={masterData:masterData,inputData:inputData};_this.props.closeFilterService(inputParam);};_this.formRef=React.createRef();var _dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={data:[],masterStatus:\"\",error:\"\",selectedRecord:{},dataResult:[],dataState:_dataState,userRoleControlRights:[],controlMap:new Map(),group:[],selectedSwitch:false};_this.detailedFieldList=[{\"idsName\":\"IDS_STATUSFUNCTION\",\"dataField\":\"sapprovalstatusfunctions\",\"width\":\"150px\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}//   { \"idsName\": \"IDS_TRANSACTIONSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"150px\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\n];_this.extractedColumnList=[{\"idsName\":\"IDS_STATUSFUNCTION\",\"dataField\":\"sapprovalstatusfunctions\",\"width\":\"150px\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_TRANSACTIONSTATUS\",\"dataField\":\"sdisplaystatus\",\"width\":\"150px\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];return _this;}_createClass(ApprovalStatusConfig,[{key:\"render\",value:function render(){var _this2=this;var addId=this.props.Login.inputParam&&this.state.controlMap.has(\"Add\".concat(this.props.Login.inputParam.methodUrl))&&this.state.controlMap.get(\"Add\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;var addParam={screenName:this.props.Login.displayName,primaryeyField:\"nstatusconfigcode\",primaryKeyValue:undefined,operation:\"create\",inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,ncontrolCode:addId,nsampletypecode:this.props.Login.masterData.realSampleType?this.props.Login.masterData.realSampleType.value:-1,nregtypecode:this.props.Login.masterData.realRegType?this.props.Login.masterData.realRegType.value:-1,nregsubtypecode:this.props.Login.masterData.realRegSubType?this.props.Login.masterData.realRegSubType.value:-1,nformcode:this.props.Login.masterData.realdefaultForms?this.props.Login.masterData.realdefaultForms.value:-1,napprovalsubtypecode:this.props.Login.masterData.realApprovalSubType?this.props.Login.masterData.realApprovalSubType.value:-1};var deleteParam={operation:\"delete\"};var breadCrumbData=[];this.props.Login.masterData.realSampleType&&this.props.Login.masterData.realSampleType.value==4?breadCrumbData=[{\"label\":\"IDS_SAMPLETYPE\",\"value\":this.props.Login.masterData.realSampleType?this.props.Login.masterData.realSampleType.label:\"-\"},{\"label\":\"IDS_FORMNAME\",\"value\":this.props.Login.masterData.realdefaultForms?this.props.Login.masterData.realdefaultForms.label:\"-\"}]:breadCrumbData=[{\"label\":\"IDS_SAMPLETYPE\",\"value\":this.props.Login.masterData.realSampleType?this.props.Login.masterData.realSampleType.label:\"-\"},{\"label\":\"IDS_REGTYPE\",\"value\":this.props.Login.masterData.realRegType?this.props.Login.masterData.realRegType.label:\"-\"},{\"label\":\"IDS_REGSUBTYPE\",\"value\":this.props.Login.masterData.realRegSubType?this.props.Login.masterData.realRegSubType.label:\"-\"},{\"label\":\"IDS_FORMNAME\",\"value\":this.props.Login.masterData.realdefaultForms?this.props.Login.masterData.realdefaultForms.label:\"-\"}];this.props.Login.masterData&&this.props.Login.masterData.realdefaultForms&&this.props.Login.masterData.realdefaultForms.value===55&&breadCrumbData.push({\"label\":\"IDS_APPROVALSUBTYPE\",\"value\":this.props.Login.masterData.realApprovalSubType?this.props.Login.masterData.realApprovalSubType.label:\"-\"});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},/*#__PURE__*/React.createElement(Affix,{top:53},/*#__PURE__*/React.createElement(BreadcrumbComponentToolbar,{showSearch:false,showSwitch:true,closeFilter:this.closeFilter,callCloseFunction:true,breadCrumbItem:breadCrumbData,filterComponent:[{\"IDS_APPROVALSTATUSCONFIG\":/*#__PURE__*/React.createElement(ApprovalStatusConfigFilter,{formatMessage:this.props.intl.formatMessage,defaultForms:this.props.Login.masterData[\"defaultForms\"]||[],defaultSample:this.props.Login.masterData[\"defaultSample\"]||[],defaultRegType:this.props.Login.masterData[\"defaultRegType\"]||[],defaultRegSubType:this.props.Login.masterData[\"defaultRegSubType\"]||[],defaultApprovalSubType:this.props.Login.masterData[\"defaultApprovalSubType\"]||[],userInfo:this.props.Login.userInfo||{},SampleTypes:this.state.SampleTypes||[],approvalSubType:this.state.approvalSubType||[],qualisForms:this.state.qualisForms||[],registrationTypes:this.state.registrationTypes||[],regSubTypeList:this.state.regSubTypeList||[],onComboChange:this.onComboChange})}],onFilterSubmit:this.onFilterSubmit,switchGroupBy:this.switchGroupBy,selectedSwitch:this.state.selectedSwitch})),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(ListWrapper,{className:\"client-list-content\"},this.state.data?/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:\"nstatusconfigcode\",data:this.state.data,dataResult:this.state.dataResult,dataState:this.state.dataState,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList,reloadData:this.reloadData,controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,pageable:true,deleteParam:deleteParam,deleteRecord:this.deleteRecord,scrollable:'scrollable',isToolBarRequired:true,gridHeight:'600px',isActionRequired:true,selectedId:this.props.Login.selectedId,addRecord:function addRecord(){return _this2.props.getComboService(addParam);}}):\"\")))),this.props.Login.openModal?/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,validateEsign:this.validateEsign,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:[{\"mandatory\":true,\"idsName\":\"IDS_STATUSFUNCTION\",\"dataField\":\"nstatusfunctioncode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"mandatory\":true,\"idsName\":\"IDS_TRANSACTIONSTATUS\",\"dataField\":\"ntranscode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}],addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(AddApprovalStatusConfig,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,statusFunctionList:this.props.Login.statusFunctionList||[],transactionsList:this.props.Login.transactionsList||[],operation:this.props.Login.operation,inputParam:this.props.Login.inputParam})}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData.approvalstatsusconfig,dataResult:process(this.props.Login.masterData.approvalstatsusconfig,this.state.dataState)});}else{var dataState=this.state.dataState;if(this.props.Login.dataState===undefined){if(this.state.selectedSwitch===transactionStatus.YES){dataState={skip:0,take:this.state.dataState.take,group:[{field:'sapprovalstatusfunctions'}]};}else{dataState={skip:0,take:this.state.dataState.take};}}if(this.state.selectedSwitch===transactionStatus.YES){if(this.state.dataResult.data){if(this.state.dataResult.data.length===1){if(this.state.dataResult.data[0].items.length===1){var skipcount=this.state.dataState.skip>0?this.state.dataState.skip-this.state.dataState.take:this.state.dataState.skip;dataState={skip:skipcount,take:this.state.dataState.take,group:[{field:'sapprovalstatusfunctions'}]};}}}}else{if(this.state.dataResult.data){if(this.state.dataResult.data.length===1){var _skipcount=this.state.dataState.skip>0?this.state.dataState.skip-this.state.dataState.take:this.state.dataState.skip;dataState={skip:_skipcount,take:this.state.dataState.take};}}}this.setState({data:this.props.Login.masterData.approvalstatsusconfig||[],selectedRecord:this.props.Login.selectedRecord,dataResult:process(this.props.Login.masterData.approvalstatsusconfig||[],dataState),dataState:dataState});}var SampleTypes=this.state.SampleTypes||[];var qualisForms=this.state.qualisForms||[];var approvalSubType=this.state.approvalSubType||{};var registrationTypes=this.state.registrationTypes||{};var regSubTypeList=this.state.regSubTypeList||{};if(this.props.Login.masterData.SampleTypes!==previousProps.Login.masterData.SampleTypes){SampleTypes=constructOptionList(this.props.Login.masterData.SampleTypes||[],\"nsampletypecode\",\"ssampletypename\",undefined,undefined,false).get(\"OptionList\");}if(this.props.Login.masterData.qualisForms!==previousProps.Login.masterData.qualisForms){qualisForms=constructOptionList(this.props.Login.masterData.qualisForms||[],\"nformcode\",\"sdisplayname\",undefined,undefined,false).get(\"OptionList\");}if(this.props.Login.masterData.approvalSubType!==previousProps.Login.masterData.approvalSubType){approvalSubType=constructOptionList(this.props.Login.masterData.approvalSubType||[],\"napprovalsubtypecode\",\"ssubtypename\",undefined,undefined,false).get(\"OptionList\");}if(this.props.Login.masterData.registrationTypes!==previousProps.Login.masterData.registrationTypes){registrationTypes=constructOptionList(this.props.Login.masterData.registrationTypes||[],\"nregtypecode\",\"sregtypename\",undefined,undefined,false).get(\"OptionList\");}if(this.props.Login.masterData.regSubTypeList!==previousProps.Login.masterData.regSubTypeList){regSubTypeList=constructOptionList(this.props.Login.masterData.regSubTypeList||[],\"nregsubtypecode\",\"sregsubtypename\",undefined,undefined,false).get(\"OptionList\");}this.setState({SampleTypes:SampleTypes,qualisForms:qualisForms,approvalSubType:approvalSubType,registrationTypes:registrationTypes,regSubTypeList:regSubTypeList});}else if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}return null;}// expandChange = event => {\n//     const item = event.dataItem;\n//     const isExpanded =\n//         event.dataItem.expanded === undefined\n//             ? event.dataItem.aggregates\n//             : event.dataItem.expanded;\n//     event.dataItem.expanded = !isExpanded;\n//     this.setState({ ...this.state });\n//     //this.setState({ ...this.state.dataState });\n// };\n}]);return ApprovalStatusConfig;}(Component);var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};export default connect(mapStateToProps,(_connect={callService:callService,crudMaster:crudMaster,updateStore:updateStore,validateEsignCredential:validateEsignCredential,closeFilterService:closeFilterService,getComboService:getComboService,getTransactionForms:getTransactionForms,getFilterSubmit:getFilterSubmit,getRegSubTypeByRegtype:getRegSubTypeByRegtype},_defineProperty(_connect,\"getRegSubTypeByRegtype\",getRegSubTypeByRegtype),_defineProperty(_connect,\"filterColumnData\",filterColumnData),_defineProperty(_connect,\"getApprovalSubType\",getApprovalSubType),_defineProperty(_connect,\"getRegTypeBySampleType\",getRegTypeBySampleType),_defineProperty(_connect,\"changeFilterSubmit\",changeFilterSubmit),_connect))(injectIntl(ApprovalStatusConfig));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/approvalstatusconfig/ApprovalStatusConfig.jsx"],"names":["React","Component","connect","process","callService","crudMaster","getApprovalSubType","closeFilterService","changeFilterSubmit","getComboService","getTransactionForms","updateStore","getRegTypeBySampleType","getFilterSubmit","getRegSubTypeByRegtype","validateEsignCredential","filterColumnData","Col","Row","SampleType","SlideOutModal","CustomSwitch","Affix","toast","injectIntl","getControlMap","showEsign","constructOptionList","DEFAULT_RETURN","Esign","transactionStatus","ListWrapper","DataGrid","ApprovalStatusConfigFilter","BreadcrumbComponentToolbar","AddApprovalStatusConfig","ApprovalStatusConfig","props","dataStateChange","event","setState","dataResult","state","data","dataState","closeFilter","inputData","userinfo","Login","userInfo","nformcode","masterData","realdefaultForms","value","napprovalsubtypecode","realSampleType","Masters","realApprovalSubType","item","nregsubtypecode","realRegSubType","nregtypecode","realRegType","nsampletypecode","defaultSample","defaultRegType","defaultRegSubType","defaultApprovalSubType","defaultForms","inputParam","closeModal","loadEsign","openModal","selectedRecord","operation","updateInfo","typeName","selectedId","switchGroupBy","selectedSwitch","target","checked","YES","NO","skip","take","group","field","approvalstatsusconfig","onComboChange","comboData","fieldName","parseInt","onFilterSubmit","NA","deleteRecord","deleteParam","classUrl","methodUrl","displayName","toLowerCase","userRoleControlRights","ncontrolCode","screenData","screenName","intl","formatMessage","id","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","onSaveClick","saveType","formRef","undefined","selectedTrans","ntranscode","map","push","nstatusfunctioncode","esignNeeded","onInputOnChange","type","name","reloadData","createRef","settings","masterStatus","error","controlMap","Map","detailedFieldList","extractedColumnList","addId","has","concat","get","ncontrolcode","addParam","primaryeyField","primaryKeyValue","breadCrumbData","SampleTypes","approvalSubType","qualisForms","registrationTypes","regSubTypeList","statusFunctionList","transactionsList","previousProps","Object","values","length","items","skipcount","warn","mapStateToProps"],"mappings":"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","sourcesContent":["\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport {\r\n    callService, crudMaster, getApprovalSubType, closeFilterService, changeFilterSubmit, getComboService, getTransactionForms, updateStore, getRegTypeBySampleType, getFilterSubmit, getRegSubTypeByRegtype, validateEsignCredential, filterColumnData\r\n} from '../../actions'\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport {\r\n    SampleType\r\n\r\n} from '../../components/Enumeration';\r\n\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport CustomSwitch from '../../components/custom-switch/custom-switch.component';\r\n\r\nimport { Affix } from \"rsuite\";\r\nimport { toast } from 'react-toastify';\r\nimport { injectIntl } from 'react-intl';\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\nimport { getControlMap, showEsign, constructOptionList } from '../../components/CommonScript';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport Esign from '../audittrail/Esign';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport ApprovalStatusConfigFilter from '../../pages/approvalstatusconfig/ApprovalStatusConfigFilter';\r\nimport BreadcrumbComponentToolbar from '../../components/ToolbarBreadcrumb.Component';\r\nimport AddApprovalStatusConfig from './AddApprovalStatusConfig';\r\nclass ApprovalStatusConfig extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.formRef = React.createRef();\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\r\n\r\n        };\r\n        this.state = {\r\n            data: [], masterStatus: \"\", error: \"\", selectedRecord: {},\r\n            dataResult: [],\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            group: [],\r\n            selectedSwitch:false\r\n        };\r\n\r\n        this.detailedFieldList = [\r\n            { \"idsName\": \"IDS_STATUSFUNCTION\", \"dataField\": \"sapprovalstatusfunctions\", \"width\": \"150px\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            //   { \"idsName\": \"IDS_TRANSACTIONSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"150px\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n        ]\r\n\r\n        this.extractedColumnList = [\r\n            { \"idsName\": \"IDS_STATUSFUNCTION\", \"dataField\": \"sapprovalstatusfunctions\", \"width\": \"150px\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            { \"idsName\": \"IDS_TRANSACTIONSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"150px\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n        ]\r\n    }\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.data, event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n  \r\n    // switchGroupBy = (event)=>{\r\n\r\n    //     const selectedSwitch = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n    //     let dataState = this.state.dataState || {};\r\n    //      if (selectedSwitch === transactionStatus.YES){\r\n    //         dataState= {...dataState, group: [{ field: 'sapprovalstatusfunctions' }]} ;\r\n    //      }\r\n    //     else{\r\n    //         dataState= {skip: dataState.skip,  take: dataState.take} \r\n    //     }\r\n    //     this.setState({selectedSwitch, dataState});\r\n    // }\r\n\r\n    closeFilter = () => {\r\n    \r\n\r\n        const inputData = {\r\n            userinfo: this.props.Login.userInfo,\r\n            nformcode: this.props.Login.masterData.realdefaultForms ? this.props.Login.masterData.realdefaultForms.value : -1,\r\n            napprovalsubtypecode: this.props.Login.masterData.realSampleType.value === SampleType.Masters ? (this.props.Login.masterData.realApprovalSubType ? this.props.Login.masterData.realApprovalSubType.item.napprovalsubtypecode : -1) : -1,\r\n            nregsubtypecode: this.props.Login.masterData.realSampleType.value === SampleType.Masters ? -1 : this.props.Login.masterData.realRegSubType ? this.props.Login.masterData.realRegSubType.value : -1,\r\n            nregtypecode: this.props.Login.masterData.realSampleType.value === SampleType.Masters ? -1 : this.props.Login.masterData.realRegType ? this.props.Login.masterData.realRegType.value : -1,\r\n            nsampletypecode: this.props.Login.masterData.realSampleType ? this.props.Login.masterData.realSampleType.value : -1,\r\n            defaultSample: this.props.Login.masterData.realSampleType ? this.props.Login.masterData.realSampleType : \"\",\r\n            defaultRegType: this.props.Login.masterData.realRegType ? this.props.Login.masterData.realRegType : \"\",\r\n            defaultRegSubType: this.props.Login.masterData.realRegSubType ? this.props.Login.masterData.realRegSubType : \"\",\r\n            defaultApprovalSubType: this.props.Login.masterData.realApprovalSubType ? this.props.Login.masterData.realApprovalSubType : \"\",\r\n            defaultForms: this.props.Login.masterData.realdefaultForms ? this.props.Login.masterData.realdefaultForms : \"\"\r\n        }\r\n     \r\n        const masterData = { ...this.props.Login.masterData }\r\n        const inputParam = { masterData, inputData }\r\n        this.props.closeFilterService(inputParam);\r\n\r\n    }\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, loadEsign, selectedRecord, selectedId: null }\r\n        }\r\n\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        return null;\r\n    }\r\n    // expandChange = event => {\r\n    //     const item = event.dataItem;\r\n    //     const isExpanded =\r\n    //         event.dataItem.expanded === undefined\r\n    //             ? event.dataItem.aggregates\r\n    //             : event.dataItem.expanded;\r\n    //     event.dataItem.expanded = !isExpanded;\r\n    //     this.setState({ ...this.state });\r\n    //     //this.setState({ ...this.state.dataState });\r\n    // };\r\n\r\n    switchGroupBy = (event) => {\r\n\r\n        const selectedSwitch = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        let dataState = this.state.dataState || {};\r\n        let dataResult = this.state.dataResult || {};\r\n        if (selectedSwitch === transactionStatus.YES) {\r\n            dataState = { skip: 0, take: this.state.dataState.take, group: [{ field: 'sapprovalstatusfunctions' }] };\r\n            dataResult = process(this.props.Login.masterData.approvalstatsusconfig || [], dataState)\r\n        }\r\n        else {\r\n            dataState = { skip: 0, take: this.state.dataState.take }\r\n            dataResult = process(this.props.Login.masterData.approvalstatsusconfig || [], dataState)\r\n        }\r\n        this.setState({ selectedSwitch, dataState, dataResult });\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        let inputData = [];\r\n        if (fieldName === \"nsampletypecode\") {\r\n            inputData = {\r\n                userinfo: this.props.Login.userInfo,\r\n                nsampletypecode: parseInt(comboData.value),\r\n                defaultSample: comboData\r\n            }\r\n            const masterData = { ...this.props.Login.masterData }\r\n            const inputParam = { masterData, inputData }\r\n            this.props.getRegTypeBySampleType(inputParam);\r\n\r\n        }\r\n        else if (fieldName === \"nformcode\") {\r\n\r\n            const masterData = { ...this.props.Login.masterData, defaultForms: comboData }\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { masterData }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else if (fieldName == \"napprovalsubtypecode\") {\r\n            const masterData = { ...this.props.Login.masterData, defaultApprovalSubType: comboData }\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { masterData }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n\r\n        else if (fieldName == \"nregtypecode\") {\r\n            inputData = {\r\n                userinfo: this.props.Login.userInfo,\r\n                nregtypecode: parseInt(comboData.value),\r\n                nsampletypecode: this.props.Login.masterData.defaultSample.value,\r\n                defaultRegType: comboData\r\n            }\r\n            const masterData = { ...this.props.Login.masterData }\r\n            const inputParam = { masterData, inputData }\r\n            this.props.getRegSubTypeByRegtype(inputParam)\r\n        }\r\n\r\n        else if (fieldName == \"nregsubtypecode\") {\r\n            inputData = {\r\n                userinfo: this.props.Login.userInfo,\r\n                nregtypecode: this.props.Login.masterData.defaultRegType.value,\r\n                defaultRegSubType: comboData,\r\n                nregsubtypecode: comboData.value\r\n            }\r\n            const masterData = { ...this.props.Login.masterData }\r\n            const inputParam = { masterData, inputData }\r\n            this.props.getTransactionForms(inputParam);\r\n\r\n        }\r\n        else if (fieldName === \"ntranscode\") {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n            selectedRecord[\"ntranscode\"] = comboData;\r\n            this.setState({ selectedRecord });\r\n        }\r\n        else if (fieldName === \"nstatusfunctioncode\") {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n            selectedRecord[\"nstatusfunctioncode\"] = comboData;\r\n            this.setState({ selectedRecord });\r\n        }\r\n    }\r\n    onFilterSubmit = () => {\r\n        let inputData = [];\r\n        inputData = {\r\n            userinfo: this.props.Login.userInfo,\r\n            nregtypecode: this.props.Login.masterData.defaultSample.value === SampleType.Masters ? transactionStatus.NA : parseInt(this.props.Login.masterData.defaultRegType ? this.props.Login.masterData.defaultRegType.value : -1),\r\n            nregsubtypecode: this.props.Login.masterData.defaultSample.value === SampleType.Masters ? transactionStatus.NA : parseInt(this.props.Login.masterData.defaultRegSubType ? this.props.Login.masterData.defaultRegSubType.value : -1),\r\n            nsampletypecode: this.props.Login.masterData.defaultSample.value,\r\n            nformcode: this.props.Login.masterData.defaultForms ? this.props.Login.masterData.defaultForms.value : -1,\r\n            napprovalsubtypecode: this.props.Login.masterData.defaultApprovalSubType ? this.props.Login.masterData.defaultApprovalSubType.item.napprovalsubtypecode : -1\r\n        }\r\n\r\n        let masterData = {\r\n            ...this.props.Login.masterData,\r\n            realSampleType: this.props.Login.masterData.defaultSample,\r\n            realdefaultForms: this.props.Login.masterData.defaultForms,\r\n            realRegType: this.props.Login.masterData.defaultRegType,\r\n            realRegSubType: this.props.Login.masterData.defaultRegSubType,\r\n            realApprovalSubType: this.props.Login.masterData.defaultApprovalSubType\r\n        }\r\n        let inputParam = { masterData, inputData };\r\n        this.props.getFilterSubmit(inputParam);\r\n\r\n    }\r\n\r\n    deleteRecord = (deleteParam) => {\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: {\r\n                [this.props.Login.inputParam.methodUrl.toLowerCase()]: deleteParam.selectedRecord,\r\n                \"nsampletypecode\": this.props.Login.masterData.defaultSample.value,\r\n                \"userinfo\": this.props.Login.userInfo\r\n            },\r\n            operation: deleteParam.operation,\r\n            dataState: this.state.dataState\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }),\r\n                    operation: deleteParam.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        let inputData = [];\r\n        inputData[\"approvalstatusconfig\"] = [];\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        let dataState = undefined;\r\n        let selectedId = null;\r\n        let selectedTrans = [];\r\n\r\n        this.state.selectedRecord.ntranscode && this.state.selectedRecord.ntranscode.map(data => {\r\n            selectedTrans.push({\r\n                nformcode: this.props.Login.masterData.realdefaultForms ? this.props.Login.masterData.realdefaultForms.value : -1,\r\n                nstatusfunctioncode: this.state.selectedRecord[\"nstatusfunctioncode\"] ? this.state.selectedRecord[\"nstatusfunctioncode\"].value : -1,\r\n                napprovalsubtypecode: this.props.Login.masterData.realSampleType.value === SampleType.Masters ? (this.props.Login.masterData.realApprovalSubType ? this.props.Login.masterData.realApprovalSubType.item.napprovalsubtypecode : -1) : -1,\r\n                nregsubtypecode: this.props.Login.masterData.realSampleType.value === SampleType.Masters ? -1 : this.props.Login.masterData.realRegSubType ? this.props.Login.masterData.realRegSubType.value : -1,\r\n                nregtypecode: this.props.Login.masterData.realSampleType.value === SampleType.Masters ? -1 : this.props.Login.masterData.realRegType ? this.props.Login.masterData.realRegType.value : -1,\r\n                nsampletypecode: this.props.Login.masterData.realSampleType ? this.props.Login.masterData.realSampleType.value : -1,\r\n                ntranscode: data.item.ntranscode\r\n            })\r\n\r\n        })\r\n        inputData[\"approvalstatusconfig\"] = selectedTrans;\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: inputData, selectedId, dataState,\r\n            operation: this.props.Login.operation, saveType, formRef\r\n        }\r\n\r\n        const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode);\r\n        if (esignNeeded) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.intl.formatMessage({ id: \"IDS_APPROVALSTATUSCONFIG\" }),\r\n                    operation: this.props.Login.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        \r\n        const addId = this.props.Login.inputParam && this.state.controlMap.has(\"Add\".concat(this.props.Login.inputParam.methodUrl))\r\n            && this.state.controlMap.get(\"Add\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;\r\n\r\n        const addParam = {\r\n            screenName: this.props.Login.displayName, primaryeyField: \"nstatusconfigcode\", primaryKeyValue: undefined,\r\n            operation: \"create\", inputParam: this.props.Login.inputParam, userInfo: this.props.Login.userInfo, ncontrolCode: addId,\r\n            nsampletypecode: this.props.Login.masterData.realSampleType ? this.props.Login.masterData.realSampleType.value : -1,\r\n            nregtypecode: this.props.Login.masterData.realRegType ? this.props.Login.masterData.realRegType.value : -1,\r\n            nregsubtypecode: this.props.Login.masterData.realRegSubType ? this.props.Login.masterData.realRegSubType.value : -1,\r\n            nformcode: this.props.Login.masterData.realdefaultForms ? this.props.Login.masterData.realdefaultForms.value : -1,\r\n            napprovalsubtypecode: this.props.Login.masterData.realApprovalSubType ? this.props.Login.masterData.realApprovalSubType.value : -1\r\n        };\r\n\r\n        const deleteParam = { operation: \"delete\" };\r\n\r\n\r\n        let breadCrumbData = [];\r\n        this.props.Login.masterData.realSampleType && this.props.Login.masterData.realSampleType.value == 4 ?\r\n            breadCrumbData = [\r\n                {\r\n                    \"label\": \"IDS_SAMPLETYPE\",\r\n                    \"value\": this.props.Login.masterData.realSampleType ? this.props.Login.masterData.realSampleType.label : \"-\"\r\n                },\r\n\r\n                {\r\n                    \"label\": \"IDS_FORMNAME\",\r\n                    \"value\": this.props.Login.masterData.realdefaultForms ? this.props.Login.masterData.realdefaultForms.label : \"-\"\r\n                }\r\n\r\n            ]\r\n            :\r\n            breadCrumbData = [\r\n                {\r\n                    \"label\": \"IDS_SAMPLETYPE\",\r\n                    \"value\": this.props.Login.masterData.realSampleType ? this.props.Login.masterData.realSampleType.label : \"-\"\r\n                },\r\n                {\r\n                    \"label\": \"IDS_REGTYPE\",\r\n                    \"value\": this.props.Login.masterData.realRegType ? this.props.Login.masterData.realRegType.label : \"-\"\r\n                },\r\n\r\n                {\r\n                    \"label\": \"IDS_REGSUBTYPE\",\r\n                    \"value\": this.props.Login.masterData.realRegSubType ? this.props.Login.masterData.realRegSubType.label : \"-\"\r\n                },\r\n                {\r\n                    \"label\": \"IDS_FORMNAME\",\r\n                    \"value\": this.props.Login.masterData.realdefaultForms ? this.props.Login.masterData.realdefaultForms.label : \"-\"\r\n                }\r\n            ]\r\n\r\n        this.props.Login.masterData && this.props.Login.masterData.realdefaultForms && this.props.Login.masterData.realdefaultForms.value === 55 &&\r\n            breadCrumbData.push(\r\n                {\r\n\r\n                    \"label\": \"IDS_APPROVALSUBTYPE\",\r\n                    \"value\": this.props.Login.masterData.realApprovalSubType ? this.props.Login.masterData.realApprovalSubType.label : \"-\"\r\n                }\r\n\r\n            )\r\n        return (\r\n            <>\r\n\r\n                <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n                    <Affix top={53}>\r\n                        <BreadcrumbComponentToolbar\r\n                            showSearch={false}\r\n                            showSwitch={true}\r\n                            closeFilter={this.closeFilter}\r\n                            callCloseFunction={true}\r\n                            breadCrumbItem={breadCrumbData}\r\n                            filterComponent={[\r\n                                {\r\n                                    \"IDS_APPROVALSTATUSCONFIG\": <ApprovalStatusConfigFilter\r\n                                        formatMessage={this.props.intl.formatMessage}\r\n                                        defaultForms={this.props.Login.masterData[\"defaultForms\"] || []}\r\n                                        defaultSample={this.props.Login.masterData[\"defaultSample\"] || []}\r\n                                        defaultRegType={this.props.Login.masterData[\"defaultRegType\"] || []}\r\n                                        defaultRegSubType={this.props.Login.masterData[\"defaultRegSubType\"] || []}\r\n                                        defaultApprovalSubType={this.props.Login.masterData[\"defaultApprovalSubType\"] || []}\r\n                                        userInfo={this.props.Login.userInfo || {}}\r\n                                        SampleTypes={this.state.SampleTypes || []}\r\n                                        approvalSubType={this.state.approvalSubType || []}\r\n                                        qualisForms={this.state.qualisForms || []}\r\n                                        registrationTypes={this.state.registrationTypes || []}\r\n                                        regSubTypeList={this.state.regSubTypeList || []}\r\n                                        onComboChange={this.onComboChange}\r\n                                    />\r\n                                }]}\r\n                            onFilterSubmit={this.onFilterSubmit}\r\n                            switchGroupBy={this.switchGroupBy}\r\n                            selectedSwitch={this.state.selectedSwitch}\r\n                            \r\n                        />\r\n                    </Affix>\r\n                    <Row>\r\n                    <Col>\r\n                        <ListWrapper className=\"client-list-content\">\r\n\r\n                            {this.state.data ?\r\n                                <DataGrid\r\n\r\n                                    primaryKeyField={\"nstatusconfigcode\"}\r\n                                    data={this.state.data}\r\n                                    dataResult={this.state.dataResult}\r\n                                    dataState={this.state.dataState}\r\n                                    dataStateChange={this.dataStateChange}\r\n                                    extractedColumnList={this.extractedColumnList}\r\n                                    reloadData={this.reloadData}\r\n                                    controlMap={this.state.controlMap}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    pageable={true}\r\n                                    deleteParam={deleteParam}\r\n                                    deleteRecord={this.deleteRecord}\r\n                                    scrollable={'scrollable'}\r\n                                    isToolBarRequired={true}\r\n                                    gridHeight={'600px'}\r\n                                    isActionRequired={true}\r\n                                    selectedId={this.props.Login.selectedId}\r\n                                    addRecord={() => this.props.getComboService(addParam)}\r\n\r\n                                />\r\n                                : \"\"}\r\n                        </ListWrapper>\r\n                    </Col>\r\n                </Row>\r\n                </div>\r\n               \r\n              \r\n                { }\r\n                {this.props.Login.openModal ?\r\n                    <SlideOutModal\r\n                        show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        validateEsign={this.validateEsign}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={[\r\n                            { \"mandatory\": true, \"idsName\": \"IDS_STATUSFUNCTION\", \"dataField\": \"nstatusfunctioncode\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                            { \"mandatory\": true, \"idsName\": \"IDS_TRANSACTIONSTATUS\", \"dataField\": \"ntranscode\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }]}\r\n                        addComponent={this.props.Login.loadEsign ?\r\n                            <Esign operation={this.props.Login.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            : <AddApprovalStatusConfig\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onComboChange={this.onComboChange}\r\n                                statusFunctionList={this.props.Login.statusFunctionList || []}\r\n                                transactionsList={this.props.Login.transactionsList || []}\r\n                                operation={this.props.Login.operation}\r\n                                inputParam={this.props.Login.inputParam}\r\n                            />}\r\n                    />\r\n                    : \"\"}\r\n\r\n\r\n            </>);\r\n\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    reloadData = () => {\r\n\r\n        const inputData = {\r\n            userinfo: this.props.Login.userInfo,\r\n            nformcode: this.props.Login.masterData.realdefaultForms ? this.props.Login.masterData.realdefaultForms.value : -1,\r\n            napprovalsubtypecode: this.props.Login.masterData.realSampleType.value === SampleType.Masters ? (this.props.Login.masterData.realApprovalSubType ? this.props.Login.masterData.realApprovalSubType.item.napprovalsubtypecode : -1) : -1,\r\n            nregsubtypecode: this.props.Login.masterData.realSampleType.value === SampleType.Masters ? -1 : this.props.Login.masterData.realRegSubType ? this.props.Login.masterData.realRegSubType.value : -1,\r\n            nregtypecode: this.props.Login.masterData.realSampleType.value === SampleType.Masters ? -1 : this.props.Login.masterData.realRegType ? this.props.Login.masterData.realRegType.value : -1,\r\n            nsampletypecode: this.props.Login.masterData.realSampleType ? this.props.Login.masterData.realSampleType.value : -1,\r\n            defaultSample: this.props.Login.masterData.realSampleType ? this.props.Login.masterData.realSampleType : \"\",\r\n            defaultRegType: this.props.Login.masterData.realRegType ? this.props.Login.masterData.realRegType : \"\",\r\n            defaultRegSubType: this.props.Login.masterData.realRegSubType ? this.props.Login.masterData.realRegSubType : \"\",\r\n            defaultApprovalSubType: this.props.Login.masterData.realApprovalSubType ? this.props.Login.masterData.realApprovalSubType : \"\",\r\n            defaultForms: this.props.Login.masterData.realdefaultForms ? this.props.Login.masterData.realdefaultForms : \"\"\r\n        }\r\n        // console.log(\"close inputdata\");\r\n        // inputData[\"breadcrumdata\"] = breadcrumdata;\r\n        const masterData = { ...this.props.Login.masterData }\r\n        const inputParam = { masterData, inputData }\r\n        this.props.closeFilterService(inputParam);\r\n    }\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({\r\n                    userRoleControlRights, controlMap,\r\n                    data: this.props.Login.masterData.approvalstatsusconfig,\r\n                    dataResult: process(this.props.Login.masterData.approvalstatsusconfig,\r\n                        this.state.dataState)\r\n                });\r\n            }\r\n            else {\r\n                let { dataState } = this.state;\r\n                if (this.props.Login.dataState === undefined) {\r\n                    if (this.state.selectedSwitch === transactionStatus.YES) {\r\n                        dataState = { skip: 0, take: this.state.dataState.take, group: [{ field: 'sapprovalstatusfunctions' }] }\r\n                    }\r\n                    else {\r\n                        dataState = { skip: 0, take: this.state.dataState.take }\r\n                    }\r\n\r\n                }\r\n\r\n                if (this.state.selectedSwitch === transactionStatus.YES) {\r\n                    if (this.state.dataResult.data) {\r\n                        if (this.state.dataResult.data.length === 1) {\r\n                            if (this.state.dataResult.data[0].items.length === 1) {\r\n                                let skipcount = this.state.dataState.skip > 0 ? (this.state.dataState.skip - this.state.dataState.take) :\r\n                                    this.state.dataState.skip\r\n                                dataState = { skip: skipcount, take: this.state.dataState.take, group: [{ field: 'sapprovalstatusfunctions' }] }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    if (this.state.dataResult.data) {\r\n                        if (this.state.dataResult.data.length === 1) {\r\n                            let skipcount = this.state.dataState.skip > 0 ? (this.state.dataState.skip - this.state.dataState.take) :\r\n                                this.state.dataState.skip\r\n                            dataState = { skip: skipcount, take: this.state.dataState.take }\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n\r\n\r\n\r\n                this.setState({\r\n                    data: this.props.Login.masterData.approvalstatsusconfig || [], selectedRecord: this.props.Login.selectedRecord,\r\n                    dataResult: process(this.props.Login.masterData.approvalstatsusconfig || [], dataState),\r\n                    dataState\r\n                });\r\n\r\n            }\r\n            let SampleTypes = this.state.SampleTypes || [];\r\n            let qualisForms = this.state.qualisForms || [];\r\n            let approvalSubType = this.state.approvalSubType || {};\r\n            let registrationTypes = this.state.registrationTypes || {};\r\n            let regSubTypeList = this.state.regSubTypeList || {};\r\n\r\n            if (this.props.Login.masterData.SampleTypes !== previousProps.Login.masterData.SampleTypes) {\r\n                SampleTypes = constructOptionList(this.props.Login.masterData.SampleTypes || [], \"nsampletypecode\",\r\n                    \"ssampletypename\", undefined, undefined, false).get(\"OptionList\");\r\n            }\r\n\r\n            if (this.props.Login.masterData.qualisForms !== previousProps.Login.masterData.qualisForms) {\r\n                qualisForms = constructOptionList(this.props.Login.masterData.qualisForms || [], \"nformcode\",\r\n                    \"sdisplayname\", undefined, undefined, false).get(\"OptionList\");\r\n            }\r\n\r\n            if (this.props.Login.masterData.approvalSubType !== previousProps.Login.masterData.approvalSubType) {\r\n                approvalSubType = constructOptionList(this.props.Login.masterData.approvalSubType || [], \"napprovalsubtypecode\",\r\n                    \"ssubtypename\", undefined, undefined, false).get(\"OptionList\");\r\n\r\n            }\r\n\r\n            if (this.props.Login.masterData.registrationTypes !== previousProps.Login.masterData.registrationTypes) {\r\n                registrationTypes = constructOptionList(this.props.Login.masterData.registrationTypes || [], \"nregtypecode\",\r\n                    \"sregtypename\", undefined, undefined, false).get(\"OptionList\");\r\n\r\n            }\r\n            if (this.props.Login.masterData.regSubTypeList !== previousProps.Login.masterData.regSubTypeList) {\r\n                regSubTypeList = constructOptionList(this.props.Login.masterData.regSubTypeList || [], \"nregsubtypecode\",\r\n                    \"sregsubtypename\", undefined, undefined, false).get(\"OptionList\");\r\n\r\n            }\r\n\r\n\r\n            this.setState({ SampleTypes, qualisForms, approvalSubType, registrationTypes, regSubTypeList });\r\n        }\r\n        else if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n\r\n    }\r\n}\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster,\r\n    updateStore, validateEsignCredential, closeFilterService, getComboService, getTransactionForms, getFilterSubmit, getRegSubTypeByRegtype, getRegSubTypeByRegtype, filterColumnData, getApprovalSubType, getRegTypeBySampleType, changeFilterSubmit,\r\n})(injectIntl(ApprovalStatusConfig));"]},"metadata":{},"sourceType":"module"}