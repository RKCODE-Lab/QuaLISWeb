{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{sortData,constructOptionList,parentChildComboLoad,rearrangeDateFormat,constructjsonOptionList}from'../components/CommonScript';import{toast}from'react-toastify';import Axios from'axios';import{initRequest}from'./LoginAction';import{intl}from'../components/App';import{attachmentType,transactionStatus}from'../components/Enumeration';export function initialcombochangeMaterialInvget(nmaterialtypecode,nmaterialcatcode,data,userInfo){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/materialinventory/getMaterialInventorycombo\",{nmaterialtypecode:nmaterialtypecode,nmaterialcatcode:nmaterialcatcode&&nmaterialcatcode,\"userinfo\":userInfo}).then(function(response){var masterData=_objectSpread(_objectSpread(_objectSpread({},data),response.data),{},{searchedData:undefined});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function getMaterialInventoryByID(selectedcombo,selectedcombouser,selectedMaterialcombo,Data,userInfo){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/materialinventory/getMaterialInventoryByID\",selectedcombouser!==undefined?{nmaterialtypecode:selectedcombo['nmaterialtypecode'].value!==undefined?selectedcombo['nmaterialtypecode'].value:selectedcombo['nmaterialtypecode'],nmaterialcatcode:selectedcombouser['nmaterialcatcode'].value!==undefined?selectedcombouser['nmaterialcatcode'].value:selectedcombouser['nmaterialcatcode'],nmaterialcode:selectedMaterialcombo[\"nmaterialcode\"].value!==undefined?selectedMaterialcombo[\"nmaterialcode\"].value:selectedMaterialcombo[\"nmaterialcode\"],\"userinfo\":userInfo}:{nmaterialtypecode:selectedcombo['nmaterialtypecode'].value,\"userinfo\":userInfo}).then(function(response){var masterData={};masterData=_objectSpread(_objectSpread(_objectSpread({},Data),response.data),{},{searchedData:undefined});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,skip:0,take:20}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function getAddMaterialInventoryPopup(operation,loginInfo,selectedcombo,ncontrolCode,masterData,selectedRecord){return function(dispatch){if(operation===\"create\"){if(selectedcombo!==undefined){var urlArray=[];var timeZoneList;var templateData=[];var data=[];var dataparent=[];var withoutCombocomponent=[];var filterQueryComponents=[];var Layout=masterData.selectedTemplate[0].jsondata;Layout.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.hasOwnProperty(\"parent\")){dataparent.push(component);}if(component.hasOwnProperty(\"nsqlquerycode\")){filterQueryComponents.push(component);}return component.hasOwnProperty(\"children\")?component.children.map(function(componentrow){if(componentrow.inputtype===\"combo\"&&!component.hasOwnProperty(\"parent\")){if(componentrow.hasOwnProperty(\"parent\")){dataparent.push(componentrow);}else{data.push(componentrow);}}if(componentrow.hasOwnProperty(\"nsqlquerycode\")){filterQueryComponents.push(componentrow);}}):component.inputtype===\"combo\"&&!component.hasOwnProperty(\"parent\")?data.push(component):withoutCombocomponent.push(component);});});});var comboComponents=data;dataparent[0]={displaymember:dataparent[0].displaymember,inputtype:dataparent[0].inputtype,label:dataparent[0].label,source:dataparent[0].source,type:dataparent[0].type,valuemember:dataparent[0].valuemember};var filterQueryComponents1=[];filterQueryComponents.map(function(temp){// filterQueryComponents1.push({'nsqlquerycode':temp.nsqlquerycode})\nfilterQueryComponents1+=temp.nsqlquerycode+',';});var MaterialInvreq=rsapi.post(\"dynamicpreregdesign/getComboValues\",{\"nunitcode\":selectedcombo['jsondata'][\"nunitcode\"].value,\"userinfo\":loginInfo.userInfo,\"parentcolumnlist\":comboComponents,\"filterQueryComponents\":filterQueryComponents1.substring(0,filterQueryComponents1.length-1),\"parameters\":{'nmaterialcode':masterData['SelectedMaterialCrumb']['jsondata'].nmaterialcode}});var MaterialInvreq1=rsapi.post('dynamicpreregdesign/getChildValues',{child:Layout[0].children[0].children[0].childValue,parentdata:{nunitcode:selectedcombo['jsondata'][\"nunitcode\"].value},parentsource:'unit','nunitcode':selectedcombo['jsondata'][\"nunitcode\"].value,valuemember:'nunitcode','userinfo':loginInfo.userInfo,parentcolumnlist:dataparent});var materialReq3=rsapi.post('materialinventory/getMaterialInventoryByID',{'nmaterialcatcode':masterData['SelectedMaterialCategory'].nmaterialcatcode,'nmaterialtypecode':masterData['SelectedMaterialType'][0].nmaterialtypecode,'nmaterialcode':masterData['SelectedMaterialCrumb']['jsondata'].nmaterialcode,'userinfo':loginInfo.userInfo});var timezone=rsapi.post(\"timezone/getTimeZone\");urlArray=[MaterialInvreq,MaterialInvreq1,timezone,materialReq3];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){templateData=response[0].data;data.splice(1,0,dataparent[0]);var temp1=[];var temp2=_objectSpread(_objectSpread({},response[0].data),response[1].data);templateData=parentChildComboLoad(data,temp2,selectedRecord,null,withoutCombocomponent,undefined,loginInfo.userInfo.slanguagetypecode,loginInfo.userInfo);var dateLables=[];var Layout=masterData.selectedTemplate[0].jsondata;Layout.map(function(row){row.children.map(function(column){column.children.map(function(component){// if (component.inputtype === 'combo') {\n//     selectedRecord[component.label] = templateData[\"comboData\"][component.label]\n//         && templateData[\"comboData\"][component.label][0]\n// }\n// else\nif(component.inputtype==='date'){if(component.hasOwnProperty('timezone'))dateLables.push(component.label);}component.hasOwnProperty(\"children\")&&component.children.map(function(componentrow){if(componentrow.inputtype==='combo'){if(componentrow.label==='Unit')selectedRecord[componentrow.label]=templateData[\"comboData\"][componentrow.label]&&templateData[\"comboData\"][componentrow.label][0];}else if(componentrow.inputtype==='date'){if(componentrow.hasOwnProperty('timezone'))dateLables.push(componentrow.label);}});});});});if(dateLables){var timeZoneListMap=constructOptionList(response[2].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);timeZoneList=timeZoneListMap.get(\"OptionList\");dateLables.map(function(temp){selectedRecord[\"tz\".concat(temp)]=timeZoneList[0];});}masterData['SelectedMaterialCrumb']=response[3].data.SelectedMaterialCrumb;dispatch({type:DEFAULT_RETURN,payload:{operation:operation,timeZoneList:timeZoneList,screenname:'IDS_MATERIALINVENTORY',masterData:masterData,selectedRecord:selectedRecord,showMaterialSection:false,templateData:templateData,openModal:true,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{if(masterData.MaterialCategoryMain===undefined){toast.warn(intl.formatMessage({id:'IDS_CONFIGMATERIALCATANDMATERIAL'}));}if(masterData.MaterialCombo){if(masterData.MaterialCombo.length===0){toast.warn(intl.formatMessage({id:'IDS_CONFIGMATERIAL'}));}}}}else{var _urlArray=[];var _templateData=[];var _data=[];var _filterQueryComponents=[];var _dataparent=[];var dateLables=[];var _timeZoneList;var _withoutCombocomponent=[];var _Layout=masterData.selectedTemplate[0].jsondata;if(masterData[\"SelectedMaterialInventory\"].ntranscode!==transactionStatus.RETIRED&&masterData[\"SelectedMaterialInventory\"].ntranscode!==transactionStatus.RELEASED&&masterData[\"SelectedMaterialInventory\"].ntranscode!==transactionStatus.EXPIRED){_Layout.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.hasOwnProperty(\"parent\")){_dataparent.push(component);}if(component.hasOwnProperty(\"nsqlquerycode\")){_filterQueryComponents.push(component);}if(component.hasOwnProperty('timezone')){dateLables.push(component.label);}return component.hasOwnProperty(\"children\")?component.children.map(function(componentrow){if(componentrow.inputtype===\"combo\"&&!component.hasOwnProperty(\"parent\")){if(componentrow.hasOwnProperty(\"parent\")){_dataparent.push(componentrow);}else{_data.push(componentrow);}}if(componentrow.hasOwnProperty(\"nsqlquerycode\")){_filterQueryComponents.push(componentrow);}if(component.hasOwnProperty('timezone')){dateLables.push(component.label);}}):component.inputtype===\"combo\"&&!component.hasOwnProperty(\"parent\")?_data.push(component):_withoutCombocomponent.push(component);});});});var _comboComponents=_data;var MaterialInv=rsapi.post(\"/materialinventory/getMaterialInventoryEdit\",{'nmaterialtypecode':masterData.SelectedMaterialInventory.nmaterialtypecode,'nmaterialinventorycode':masterData.SelectedMaterialInventory.nmaterialinventorycode,\"userinfo\":loginInfo.userInfo});_dataparent[0]={displaymember:_dataparent[0].displaymember,inputtype:_dataparent[0].inputtype,label:_dataparent[0].label,source:_dataparent[0].source,type:_dataparent[0].type,valuemember:_dataparent[0].valuemember};var _filterQueryComponents2=[];_filterQueryComponents.map(function(temp){// filterQueryComponents1.push({'nsqlquerycode':temp.nsqlquerycode})\n_filterQueryComponents2+=temp.nsqlquerycode+',';});var Materialinvreq=rsapi.post(\"dynamicpreregdesign/getComboValues\",{\"nunitcode\":selectedcombo['jsondata'][\"nunitcode\"].value,\"userinfo\":loginInfo.userInfo,\"parentcolumnlist\":_comboComponents,\"filterQueryComponents\":_filterQueryComponents2.substring(0,_filterQueryComponents2.length-1),\"parameters\":{'nmaterialcode':masterData['SelectedMaterialCrumb']['jsondata'].nmaterialcode}});var _MaterialInvreq=rsapi.post('dynamicpreregdesign/getChildValues',{child:_Layout[0].children[0].children[0].childValue,parentdata:{nunitcode:selectedcombo['jsondata'][\"nunitcode\"].value},parentsource:'unit','nunitcode':selectedcombo['jsondata'][\"nunitcode\"].value,valuemember:'nunitcode',\"userinfo\":loginInfo.userInfo,parentcolumnlist:_dataparent});var _timezone=rsapi.post(\"timezone/getTimeZone\");var _materialReq=rsapi.post('materialinventory/getMaterialInventoryByID',{'nmaterialcatcode':masterData['SelectedMaterialCategory'].nmaterialcatcode,'nmaterialtypecode':masterData['SelectedMaterialType'][0].nmaterialtypecode,'nmaterialcode':masterData['SelectedMaterialCrumb']['jsondata'].nmaterialcode,\"userinfo\":loginInfo.userInfo});_urlArray=[Materialinvreq,_MaterialInvreq,MaterialInv,_timezone,_materialReq];dispatch(initRequest(true));Axios.all(_urlArray).then(function(response){_templateData=response[0].data;_data=[].concat(_toConsumableArray(_data),_dataparent);_templateData=parentChildComboLoad(_data,_objectSpread(_objectSpread({},response[0].data),response[1].data),selectedRecord,null,_withoutCombocomponent,undefined,loginInfo.userInfo.slanguagetypecode,loginInfo.userInfo);if(response[2].data[\"EditedMaterialInventory\"].length>0){if(response[2].data[\"MaterialInventoryDateFeild\"]!==undefined){response[2].data[\"MaterialInventoryDateFeild\"].map(function(temp){response[2].data[\"EditedMaterialInventory\"][0][temp]=rearrangeDateFormat(loginInfo.userInfo,response[2].data[\"EditedMaterialInventory\"][0][temp]);});response[2].data[\"DateFeildsInventory\"].map(function(temp){if(response[2].data[\"EditedMaterialInventory\"][0].hasOwnProperty(temp)&&response[2].data[\"EditedMaterialInventory\"][0][temp]==='-'){delete response[2].data[\"EditedMaterialInventory\"][0][temp];}});}else{response[2].data[\"DateFeildsInventory\"].map(function(temp){if(response[2].data[\"EditedMaterialInventory\"][0].hasOwnProperty(temp)&&response[2].data[\"EditedMaterialInventory\"][0][temp]==='-'){delete response[2].data[\"EditedMaterialInventory\"][0][temp];}});}}selectedRecord=_objectSpread(_objectSpread({},selectedRecord),response[2].data.EditedMaterialInventory[0]);if(dateLables){var timeZoneListMap=constructOptionList(response[3].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);_timeZoneList=timeZoneListMap.get(\"OptionList\");response[2].data[\"DateFeildsInventory\"].map(function(temp){if(!selectedRecord.hasOwnProperty(temp)){selectedRecord[\"tz\".concat(temp)]=_timeZoneList[0];}});}masterData['SelectedMaterialCrumb']=response[4].data.SelectedMaterialCrumb;dispatch({type:DEFAULT_RETURN,payload:{operation:operation,screenname:'IDS_MATERIALINVENTORY',timeZoneList:_timeZoneList,masterData:masterData,isSelectedRecordChange:false,showMaterialSection:false,templateData:_templateData,openModal:true,selectedcombo:selectedcombo,selectedRecord:selectedRecord,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTQUARENTINEINVENTORY\"}));}}};}export function getMaterialInventoryDetails(inputData,masterData,userInfo){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"materialinventory/getMaterialInventoryDetails\",{\"nmaterialcode\":inputData.nmaterialcode,\"nmaterialcatcode\":inputData.nmaterialcatcode,\"nmaterialtypecode\":inputData.nmaterialtypecode,\"nmaterialinventorycode\":inputData.nmaterialinventorycode,\"userinfo\":userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response}));}});};}export function updateMaterialStatus(masterData,userInfo,ncontrolcode,nflag){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"materialinventory/updateMaterialStatus\",{nflag:nflag,nmaterialinventorycode:masterData[\"SelectedMaterialInventory\"].nmaterialinventorycode,nmaterialcode:masterData[\"SelectedMaterialInventory\"].nmaterialcode,nmaterialtypecode:masterData[\"SelectedMaterialInventory\"].nmaterialtypecode,nmaterialcatcode:masterData[\"SelectedMaterialInventory\"].nmaterialcatcode,nsectioncode:masterData[\"SelectedMaterialInventory\"].nsectioncode,\"userinfo\":userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function openDatePopup(masterData,ncontrolCode){return function(dispatch){if(masterData.SelectedMaterialCrumb['jsondata']['Open Expiry Need']!==transactionStatus.NO){dispatch(initRequest(true));return rsapi.post(\"timezone/getTimeZone\").then(function(response){var selectedRecord={};// const timeZoneListMap = constructOptionList(response.data || [], \"ntimezonecode\",\n//     \"stimezoneid\", undefined, undefined, true);\n// const timeZoneList = timeZoneListMap.get(\"OptionList\");\n// selectedRecord = { 'tzIDS_OPENDATE': timeZoneList[0] }\n//  dispatch({ type: DEFAULT_RETURN, payload: { timeZoneList, ncontrolCode, selectedRecord, ModaTitle: 'IDS_OPENDATE', showModalPopup: true, masterData, loading: false } });\ndispatch({type:DEFAULT_RETURN,payload:{operation:'IDS_OPENDATE',ncontrolCode:ncontrolCode,selectedRecord:selectedRecord,ModaTitle:'IDS_OPENDATE',showModalPopup:true,masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{toast.warn(intl.formatMessage({id:'IDS_OPENDATEISDISABLEDFORTHISMATERIAL'}));}};}export function getQuantityTransactionPopup(Data,userInfo,updateInfo,ncontrolCode){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var timeZoneList;var getQuantityTransaction=rsapi.post(\"/materialinventory/getQuantityTransaction\",{\"userinfo\":userInfo,'nmaterialtypecode':Data[\"SelectedMaterialType\"][\"nmaterialtypecode\"],nmaterialinventorycode:Data[\"SelectedMaterialInventory\"][\"nmaterialinventorycode\"],nflag:1,sprecision:Data.sprecision,needsectionwise:Data.SelectedMaterialCategory.needSectionwise});var timezone=rsapi.post(\"timezone/getTimeZone\");urlArray=[getQuantityTransaction,timezone];Axios.all(urlArray).then(function(response){// if (Array.isArray(response[0].data)) {\nvar masterData={};var isSectionneed;var templateData=[];var selectedRecord={};var arr1=[];var arr2=[];arr1.push(response[0].data.parentcolumnlist[0]);arr2.push(response[0].data.parentcolumnlist[1]);masterData=_objectSpread(_objectSpread(_objectSpread({},Data),response[0].data),{},{searchedData:undefined});templateData[0]=parentChildComboLoad(arr1,response[0].data,selectedRecord,response[0].data.childcolumnlist[0],undefined,undefined,userInfo.slanguagetypecode,userInfo);templateData[1]=parentChildComboLoad(arr2,response[0].data,selectedRecord,response[0].data.childcolumnlist[1],undefined,undefined,userInfo.slanguagetypecode,userInfo);templateData[0]['comboData']['Transaction Type'].forEach(function(x,index){if(x['value']==64&&masterData.SelectedMaterialCategory.needSectionwise===transactionStatus.YES){templateData[0]['comboData']['Transaction Type'].splice(index,1);}});selectedRecord=_objectSpread(_objectSpread(_objectSpread({},templateData[0].selectedRecord),templateData[1].selectedRecord),{},{//'IDS_SECTION': Data['SelectedMaterialInventory']['jsondata']['IDS_SECTION'],\n'Available Quantity/Unit':response[0].data.navailableqty,'Unit':Data.SelectedMaterialCrumb.jsondata.nunitcode.label,'Received Quantity':0,'Transaction Type':response[0].data[\"Transaction Type\"][0]});if(selectedRecord.Site){if(selectedRecord.Site.value===userInfo.nsitecode){isSectionneed=3;}}// const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\n//     \"stimezoneid\", undefined, undefined, true);\n// const timeZoneList = timeZoneListMap.get(\"OptionList\");\n// response[0].data[\"DateFeildsProperties\"].map((temp) => {\n//     if (!selectedRecord.hasOwnProperty(temp)) {\n//         selectedRecord[`tz${temp}`] = timeZoneList[0]\n//     }\n// })\n// masterData['QuantityTransactionTemplate'][0].jsondata.map((row) => {\n//     row.children.map((column) => {\n//         column.children.map((component,i) => {\n//             if (component.inputtype === 'combo') {\n//                 if(selectedRecord.hasOwnProperty(component.label))\n//                 if (selectedRecord[component.label] === undefined) {\n//                     if(templateData[0]!==undefined)\n//                     selectedRecord[component.label] = templateData[0].comboData[component.label][0]\n//                 }\n//             }\n//             if (component.inputtype === 'date') {\n//                 if (component.hasOwnProperty('timezone')) {\n//                     const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\n//                         \"stimezoneid\", undefined, undefined, true);\n//                      timeZoneList = timeZoneListMap.get(\"OptionList\");\n//                     response[0].data[\"DateFeildsProperties\"].map((temp) => {\n//                         if (!selectedRecord.hasOwnProperty(temp)) {\n//                             selectedRecord[`tz${temp}`] = timeZoneList[0]\n//                         }\n//                     })\n//                 }\n//             }\n//         })\n//      })\n//  }) \ndispatch({type:DEFAULT_RETURN,payload:{operation:\"create\",selectedRecord:selectedRecord,templateData:templateData[0],timeZoneList:timeZoneList,navailableqty:response[0].data.navailableqty,masterData:masterData,updateInfo:updateInfo,ncontrolCode:ncontrolCode,openModal:true,screenname:\"IDS_QUANTITYTRANSACTION\",loading:false,skip:0,take:20,isSectionneed:isSectionneed}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getMaterialChildValues(inputParem,userInfo,selectedRecord,parentcolumnlist,childcolumnlist,comboData,childKeyname,parentDependentChild,masterData){// if (selectedRecord[\"Transaction Type\"] !== undefined) {\nreturn function(dispatch){var _rsapi$post;dispatch(initRequest(true));rsapi.post('materialinventory/getChildValuesMaterial',(_rsapi$post={child:inputParem.child,parentdata:inputParem.item.jsondata,parentsource:inputParem.source},_defineProperty(_rsapi$post,inputParem.primarykeyField,inputParem.value),_defineProperty(_rsapi$post,\"valuemember\",inputParem.primarykeyField),_defineProperty(_rsapi$post,\"userInfo\",userInfo),_defineProperty(_rsapi$post,\"parentcolumnlist\",childcolumnlist[childKeyname]),_defineProperty(_rsapi$post,\"childcolumnlist\",childcolumnlist[childKeyname][0]),_defineProperty(_rsapi$post,\"parameters\",childcolumnlist[childKeyname][0].hasOwnProperty('nsqlquerycode')?{nmaterialinventorycode:masterData.SelectedMaterialInventory['nmaterialinventorycode'],nsitecode:selectedRecord.Site.value,nusercode:userInfo.nusercode}:null),_defineProperty(_rsapi$post,\"userinfo\",userInfo),_rsapi$post)).then(function(response){var templateData=[];var temp=selectedRecord[childKeyname];var returnObj=_objectSpread(_objectSpread({},comboData),response.data);//const x=returnObj['Section'] \ntemplateData=parentChildComboLoad(parentcolumnlist,returnObj,selectedRecord,childcolumnlist,undefined,undefined,userInfo.slanguagetypecode,userInfo);if(templateData.comboData['Section']===undefined){var optionlist=constructjsonOptionList(response.data['Section']||[],'nsectioncode','ssectionname',false,false,true,undefined,'section',false,userInfo.slanguagetypecode);templateData.comboData['Section']=optionlist.get(\"OptionList\");}templateData['comboData']['Transaction Type'].forEach(function(x,index){if(x['value']==64&&masterData.SelectedMaterialCategory.needSectionwise===transactionStatus.YES){templateData['comboData']['Transaction Type'].splice(index,1);}});//  templateData.comboData={...templateData.comboData,...returnObj }\nselectedRecord[childKeyname]=temp;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},_defineProperty({},parentDependentChild,templateData['comboData'][parentDependentChild][0]));var comboData1={value:selectedRecord['Transaction Type']&&selectedRecord['Transaction Type'].value};dispatch(getQuantityTransactionOnchange(comboData1,masterData,userInfo,selectedRecord,templateData));// dispatch( type: DEFAULT_RETURN, payload: {templateData,selectedRecord});\n//  dispatch({\n//     type: DEFAULT_RETURN,\n//     payload: {\n//         templateData,selectedRecord,loading: false\n//     }\n// });\n}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error);});};// } else {\n//     toast.warn(intl.formatMessage({\n//         id: \"IDS_SELECTTRANSACTIONTYPE\"\n//     }))\n// }\n}// export function getQuantityTransactionOnchange( ) {\n//     return function (dispatch) {\n//         dispatch(initRequest(true));\n//         rsapi.post(\"/materialinventory/getQuantityTransaction\",\n//             {\n//                 \"userinfo\": userInfo, 'nmaterialtypecode': Data[\"SelectedMaterialType\"][\"nmaterialtypecode\"],\n//                 nmaterialinventorycode: Data[\"SelectedMaterialInventory\"][\"nmaterialinventorycode\"]\n//                 , nflag: selectedRecord['Inventory Transaction Type'].value === transactionStatus.ACTIVE ? 2 : 3,\n//                 ntransactiontype: ntransactiontype?selectedRecord['Transaction Type'].value:\n//                 comboData.value,sourceSection:selectedRecord['Section']&&selectedRecord['Section'].value,\n//                 needsectionwise:Data.SelectedMaterialCrumb&&Data.SelectedMaterialCrumb.jsondata.needsectionwise,\n//                 sprecision:Data.sprecision\n//             })\n//             .then(response => { \n//                 dispatch(getQuantityTransactionOnchange(comboData1, masterData, userInfo, selectedRecord, templateData));\n//             })\n//             .catch(error => {\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\n//                 toast.error(error);\n//             });\n//     }\n// }\nexport function getSiteonchange(comboData,Data,userInfo,selectedRecord,templateData,ntransactiontype){return function(dispatch){dispatch(initRequest(true));rsapi.post('dynamicpreregdesign/getcombovalues',{// \"nunitcode\": selectedcombo['jsondata'][\"nunitcode\"].value\n// , \"userinfo\": loginInfo.userInfo, \"parentcolumnlist\": comboComponents,\n// \"filterQueryComponents\": filterQueryComponents1.substring(0, filterQueryComponents1.length - 1),\n// \"parameters\":{'nmaterialcode': masterData['SelectedMaterialCrumb']['jsondata'].nmaterialcode}\n}).then(function(response){// let templateData = [];\n// let temp = selectedRecord[childKeyname]\n// let returnObj = { ...comboData, ...response.data }\n// templateData = parentChildComboLoad(parentcolumnlist, returnObj, selectedRecord, childcolumnlist, undefined, undefined, userInfo.slanguagetypecode,userInfo)\n// selectedRecord[childKeyname] = temp\n// selectedRecord = { ...selectedRecord, [parentDependentChild]: templateData['comboData'][parentDependentChild][0] }\n// const comboData1 = { value: selectedRecord['Transaction Type'].value }\n// dispatch(getQuantityTransactionOnchange(comboData1, masterData, userInfo, selectedRecord, templateData)); \n}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error);});};}export function getQuantityTransactionOnchange(comboData,Data,userInfo,selectedRecord,templateData,ntransactiontype){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/materialinventory/getQuantityTransaction\",{\"userinfo\":userInfo,'nmaterialtypecode':Data[\"SelectedMaterialType\"][\"nmaterialtypecode\"]||Data[\"SelectedMaterialType\"][0][\"nmaterialtypecode\"],nmaterialinventorycode:Data[\"SelectedMaterialInventory\"][\"nmaterialinventorycode\"],nflag:selectedRecord['Inventory Transaction Type'].value===transactionStatus.ACTIVE?2:3,ntransactiontype:ntransactiontype?selectedRecord['Transaction Type']&&selectedRecord['Transaction Type'].value:comboData.value&&comboData.value,sourceSection:selectedRecord['Section']&&selectedRecord['Section'].value,needsectionwise:Data.SelectedMaterialCrumb&&Data.SelectedMaterialCrumb.jsondata.needsectionwise,sprecision:Data.sprecision,nsitecode:selectedRecord.Site&&selectedRecord.Site.value}).then(function(response){var isSectionneed;var masterData={};var navailableqtyref={};masterData=_objectSpread(_objectSpread({},Data),response.data);selectedRecord=_objectSpread({},selectedRecord);navailableqtyref=response.data.navailableqtyref;if(selectedRecord['Transaction Type']){selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{'Available Quantity/Unit':response.data.navailableqty});if(selectedRecord['Transaction Type'].value===transactionStatus.RECEIVED){masterData['QuantityTransactionTemplate'][0].jsondata.map(function(row){row.children.map(function(column){column.children.map(function(component,i){if(component.label==='Available Quantity/Unit'){delete column.children[i];}component.hasOwnProperty(\"children\")&&component.children.map(function(componentrow,j){if(componentrow.label==='Available Quantity/Unit'||componentrow.label==='Unit'){delete component.children[j];}});});});});}}if(selectedRecord.Site){if(selectedRecord.Site.value===userInfo.nsitecode){isSectionneed=3;//    selectedRecord['Transaction Type']=templateData.comboData['Transaction Type'][1]\n}else{if(masterData.SelectedMaterialCategory.needSectionwise===transactionStatus.NO){isSectionneed=4;selectedRecord.Section&&delete selectedRecord.Section;}}}dispatch({type:DEFAULT_RETURN,payload:{operation:\"create\",selectedRecord:selectedRecord,templateData:templateData,navailableqtyref:navailableqtyref,masterData:masterData,openModal:true,screenname:\"IDS_QUANTITYTRANSACTION\",loading:false,skip:0,take:20,isSectionneed:isSectionneed}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error);});};}export function addMaterialInventoryFile(inputParam,param){return function(dispatch){dispatch(initRequest(true));var urlArray=[rsapi.post(\"/materialinventory/getMaterialInventoryLinkMaster\",{nmaterialinventorycode:param.nmaterialinventorycode&&param.nmaterialinventorycode,userinfo:inputParam.userInfo})];if(inputParam.operation===\"update\"){urlArray.push(rsapi.post(\"/materialinventory/editMaterialInventoryFile\",{userinfo:inputParam.userInfo,nmaterialinventorycode:param.nmaterialinventorycode&&param.nmaterialinventorycode,nmaterialinventoryfilecode:inputParam.selectedRecord.nmaterialinventoryfilecode}));}Axios.all(urlArray).then(function(response){var linkMap=constructOptionList(response[0].data.LinkMaster,\"nlinkcode\",\"slinkname\",false,false,true);var linkmaster=linkMap.get(\"OptionList\");var selectedRecord={};var defaultLink=linkmaster.filter(function(items){return items.item.ndefaultlink===transactionStatus.YES;});var disabled=false;var editObject={};if(inputParam.operation===\"update\"){editObject=response[1].data;var nlinkcode={};var link={};if(editObject[\"jsondata\"].nattachmenttypecode===attachmentType.LINK){nlinkcode={\"label\":editObject[\"jsondata\"].slinkname,\"value\":editObject[\"jsondata\"].nlinkcode};link={slinkfilename:editObject[\"jsondata\"].sfilename,slinkdescription:editObject[\"jsondata\"].sdescription,nlinkdefaultstatus:editObject[\"jsondata\"].ndefaultstatus,sfilesize:'',nfilesize:0,ndefaultstatus:4,sfilename:''};}else{nlinkcode=defaultLink.length>0?defaultLink[0]:\"\";link={slinkfilename:'',slinkdescription:'',nlinkdefaultstatus:4,sfilesize:editObject[\"jsondata\"].sfilesize,nfilesize:editObject[\"jsondata\"].nfilesize,ndefaultstatus:editObject[\"jsondata\"].ndefaultstatus,ssystemfilename:editObject[\"jsondata\"].ssystemfilename,sfilename:editObject[\"jsondata\"].sfilename};}selectedRecord=_objectSpread(_objectSpread({},link),{},{sdescription:editObject[\"jsondata\"].sdescription,nmaterialinventoryfilecode:editObject[\"jsondata\"].nmaterialinventoryfilecode,nattachmenttypecode:editObject[\"jsondata\"].nattachmenttypecode,nlinkcode:nlinkcode});}else{selectedRecord={nattachmenttypecode:response[0].data.AttachmentType.length>0?response[0].data.AttachmentType[0].nattachmenttypecode:attachmentType.FTP,nlinkcode:defaultLink.length>0?defaultLink[0]:\"\",disabled:disabled};}dispatch({type:DEFAULT_RETURN,payload:{// openChildModal: true,\nopenModal:true,dcreateddate:inputParam.selectedRecord&&rearrangeDateFormat(inputParam.userInfo,inputParam.selectedRecord.dcreateddate),operation:inputParam.operation,screenname:inputParam.screenName,ncontrolCode:inputParam.ncontrolCode,selectedRecord:selectedRecord,loading:false,linkMaster:linkmaster,showSaveContinue:false,editFiles:editObject.nattachmenttypecode===attachmentType.FTP?editObject:{}}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/MaterialInventoryAction.js"],"names":["rsapi","DEFAULT_RETURN","sortData","constructOptionList","parentChildComboLoad","rearrangeDateFormat","constructjsonOptionList","toast","Axios","initRequest","intl","attachmentType","transactionStatus","initialcombochangeMaterialInvget","nmaterialtypecode","nmaterialcatcode","data","userInfo","dispatch","post","then","response","masterData","searchedData","undefined","type","payload","loading","catch","error","formatMessage","id","message","getMaterialInventoryByID","selectedcombo","selectedcombouser","selectedMaterialcombo","Data","value","nmaterialcode","skip","take","getAddMaterialInventoryPopup","operation","loginInfo","ncontrolCode","selectedRecord","urlArray","timeZoneList","templateData","dataparent","withoutCombocomponent","filterQueryComponents","Layout","selectedTemplate","jsondata","map","row","children","column","component","hasOwnProperty","push","componentrow","inputtype","comboComponents","displaymember","label","source","valuemember","filterQueryComponents1","temp","nsqlquerycode","MaterialInvreq","substring","length","MaterialInvreq1","child","childValue","parentdata","nunitcode","parentsource","parentcolumnlist","materialReq3","timezone","all","splice","temp1","temp2","slanguagetypecode","dateLables","timeZoneListMap","get","SelectedMaterialCrumb","screenname","showMaterialSection","openModal","status","warn","MaterialCategoryMain","MaterialCombo","ntranscode","RETIRED","RELEASED","EXPIRED","MaterialInv","SelectedMaterialInventory","nmaterialinventorycode","Materialinvreq","EditedMaterialInventory","isSelectedRecordChange","getMaterialInventoryDetails","inputData","updateMaterialStatus","ncontrolcode","nflag","nsectioncode","openDatePopup","NO","ModaTitle","showModalPopup","getQuantityTransactionPopup","updateInfo","getQuantityTransaction","sprecision","needsectionwise","SelectedMaterialCategory","needSectionwise","isSectionneed","arr1","arr2","childcolumnlist","forEach","x","index","YES","navailableqty","Site","nsitecode","getMaterialChildValues","inputParem","comboData","childKeyname","parentDependentChild","item","primarykeyField","nusercode","returnObj","optionlist","comboData1","getQuantityTransactionOnchange","getSiteonchange","ntransactiontype","ACTIVE","sourceSection","navailableqtyref","RECEIVED","i","j","Section","addMaterialInventoryFile","inputParam","param","userinfo","nmaterialinventoryfilecode","linkMap","LinkMaster","linkmaster","defaultLink","filter","items","ndefaultlink","disabled","editObject","nlinkcode","link","nattachmenttypecode","LINK","slinkname","slinkfilename","sfilename","slinkdescription","sdescription","nlinkdefaultstatus","ndefaultstatus","sfilesize","nfilesize","ssystemfilename","AttachmentType","FTP","dcreateddate","screenName","linkMaster","showSaveContinue","editFiles"],"mappings":"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","sourcesContent":["\r\n\r\nimport rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { sortData, constructOptionList, parentChildComboLoad, rearrangeDateFormat, constructjsonOptionList } from '../components/CommonScript'\r\nimport { toast } from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\nimport { attachmentType, transactionStatus } from '../components/Enumeration';\r\n\r\n\r\nexport function initialcombochangeMaterialInvget(nmaterialtypecode, nmaterialcatcode, data, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/materialinventory/getMaterialInventorycombo\", { nmaterialtypecode, nmaterialcatcode: nmaterialcatcode && nmaterialcatcode, \"userinfo\": userInfo })\r\n            .then(response => {\r\n                const masterData = { ...data, ...response.data, searchedData: undefined }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            });\r\n    }\r\n}\r\n\r\nexport function getMaterialInventoryByID(selectedcombo, selectedcombouser, selectedMaterialcombo, Data, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/materialinventory/getMaterialInventoryByID\", selectedcombouser !== undefined ? {\r\n            nmaterialtypecode: selectedcombo['nmaterialtypecode'].value !== undefined ?\r\n                selectedcombo['nmaterialtypecode'].value : selectedcombo['nmaterialtypecode'],\r\n            nmaterialcatcode: selectedcombouser['nmaterialcatcode'].value !== undefined ?\r\n                selectedcombouser['nmaterialcatcode'].value : selectedcombouser['nmaterialcatcode'],\r\n            nmaterialcode: selectedMaterialcombo[\"nmaterialcode\"].value !== undefined ?\r\n                selectedMaterialcombo[\"nmaterialcode\"].value : selectedMaterialcombo[\"nmaterialcode\"]\r\n            , \"userinfo\": userInfo\r\n        } : {\r\n            nmaterialtypecode: selectedcombo['nmaterialtypecode'].value\r\n\r\n            , \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n                let masterData = {}\r\n\r\n                masterData = { ...Data, ...response.data, searchedData: undefined }\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData, loading: false, skip: 0, take: 20\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            });\r\n    }\r\n}\r\nexport function getAddMaterialInventoryPopup(operation, loginInfo, selectedcombo,\r\n    ncontrolCode, masterData, selectedRecord) {\r\n    return function (dispatch) {\r\n        if (operation === \"create\") {\r\n            if (selectedcombo !== undefined) {\r\n                let urlArray = [];\r\n                let timeZoneList;\r\n                let templateData = [];\r\n                let data = [];\r\n                let dataparent = [];\r\n                const withoutCombocomponent = []\r\n                let filterQueryComponents = [];\r\n                const Layout = masterData.selectedTemplate[0].jsondata\r\n                Layout.map(row => {\r\n                    row.children.map(column => {\r\n                        column.children.map(component => {\r\n                            if (component.hasOwnProperty(\"parent\")) {\r\n                                dataparent.push(component)\r\n                            }\r\n                            if (component.hasOwnProperty(\"nsqlquerycode\")) {\r\n                                filterQueryComponents.push(component)\r\n                            }\r\n                            return component.hasOwnProperty(\"children\") ? component.children.map(componentrow => {\r\n                                if (componentrow.inputtype === \"combo\" && !(component.hasOwnProperty(\"parent\"))) {\r\n                                    if (componentrow.hasOwnProperty(\"parent\")) {\r\n                                        dataparent.push(componentrow)\r\n                                    }\r\n                                    else {\r\n                                        data.push(componentrow)\r\n                                    }\r\n                                }\r\n                                if (componentrow.hasOwnProperty(\"nsqlquerycode\")) {\r\n                                    filterQueryComponents.push(componentrow)\r\n                                }\r\n                            })\r\n                                : component.inputtype === \"combo\" && !(component.hasOwnProperty(\"parent\")) ? data.push(component) : withoutCombocomponent.push(component)\r\n                        })\r\n                    })\r\n                })\r\n                const comboComponents = data\r\n                dataparent[0] = {\r\n                    displaymember: dataparent[0].displaymember,\r\n                    inputtype: dataparent[0].inputtype,\r\n                    label: dataparent[0].label,\r\n                    source: dataparent[0].source,\r\n                    type: dataparent[0].type,\r\n                    valuemember: dataparent[0].valuemember\r\n                }\r\n                let filterQueryComponents1 = []\r\n                filterQueryComponents.map(temp => {\r\n                    // filterQueryComponents1.push({'nsqlquerycode':temp.nsqlquerycode})\r\n                    filterQueryComponents1 += temp.nsqlquerycode + ','\r\n                })\r\n                const MaterialInvreq = rsapi.post(\"dynamicpreregdesign/getComboValues\",\r\n                    {\r\n                        \"nunitcode\": selectedcombo['jsondata'][\"nunitcode\"].value\r\n                        , \"userinfo\": loginInfo.userInfo, \"parentcolumnlist\": comboComponents,\r\n                        \"filterQueryComponents\": filterQueryComponents1.substring(0, filterQueryComponents1.length - 1),\r\n                        \"parameters\": { 'nmaterialcode': masterData['SelectedMaterialCrumb']['jsondata'].nmaterialcode }\r\n                    });\r\n                const MaterialInvreq1 = rsapi.post('dynamicpreregdesign/getChildValues', {\r\n                    child: Layout[0].children[0].children[0].childValue,\r\n                    parentdata: { nunitcode: selectedcombo['jsondata'][\"nunitcode\"].value },\r\n                    parentsource: 'unit',\r\n                    'nunitcode': selectedcombo['jsondata'][\"nunitcode\"].value,\r\n                    valuemember: 'nunitcode',\r\n                    'userinfo': loginInfo.userInfo,\r\n                    parentcolumnlist: dataparent\r\n                });\r\n                const materialReq3 = rsapi.post('materialinventory/getMaterialInventoryByID', {\r\n                    'nmaterialcatcode': masterData['SelectedMaterialCategory'].nmaterialcatcode,\r\n                    'nmaterialtypecode': masterData['SelectedMaterialType'][0].nmaterialtypecode,\r\n                    'nmaterialcode': masterData['SelectedMaterialCrumb']['jsondata'].nmaterialcode,\r\n                    'userinfo': loginInfo.userInfo\r\n                });\r\n                const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n                urlArray = [MaterialInvreq, MaterialInvreq1, timezone, materialReq3];\r\n                dispatch(initRequest(true));\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        templateData = response[0].data;\r\n                        data.splice(1, 0, dataparent[0])\r\n                        let temp1 = []\r\n                        const temp2 = { ...response[0].data, ...response[1].data }\r\n                        templateData = parentChildComboLoad(data, temp2, selectedRecord, null, withoutCombocomponent, undefined, loginInfo.userInfo.slanguagetypecode, loginInfo.userInfo)\r\n                        let dateLables = []\r\n                        const Layout = masterData.selectedTemplate[0].jsondata\r\n                        Layout.map((row) => {\r\n                            row.children.map((column) => {\r\n                                column.children.map((component) => {\r\n                                    // if (component.inputtype === 'combo') {\r\n                                    //     selectedRecord[component.label] = templateData[\"comboData\"][component.label]\r\n                                    //         && templateData[\"comboData\"][component.label][0]\r\n                                    // }\r\n                                    // else\r\n                                    if (component.inputtype === 'date') {\r\n                                        if (component.hasOwnProperty('timezone'))\r\n                                            dateLables.push(component.label)\r\n\r\n                                    }\r\n                                    component.hasOwnProperty(\"children\") && component.children.map(\r\n                                        (componentrow) => {\r\n                                            if (componentrow.inputtype === 'combo') {\r\n                                                if (componentrow.label === 'Unit')\r\n                                                    selectedRecord[componentrow.label] = templateData[\"comboData\"][componentrow.label]\r\n                                                        && templateData[\"comboData\"][componentrow.label][0]\r\n                                            }\r\n                                            else\r\n                                                if (componentrow.inputtype === 'date') {\r\n                                                    if (componentrow.hasOwnProperty('timezone'))\r\n                                                        dateLables.push(componentrow.label)\r\n\r\n                                                }\r\n\r\n                                        }\r\n                                    )\r\n                                })\r\n                            })\r\n                        })\r\n                        if (dateLables) {\r\n                            const timeZoneListMap = constructOptionList(response[2].data || [], \"ntimezonecode\",\r\n                                \"stimezoneid\", undefined, undefined, true);\r\n                            timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n                            dateLables.map((temp) => {\r\n                                selectedRecord[`tz${temp}`] = timeZoneList[0]\r\n                            })\r\n                        }\r\n                        masterData['SelectedMaterialCrumb'] = response[3].data.SelectedMaterialCrumb\r\n                        dispatch({\r\n\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                operation, timeZoneList, screenname: 'IDS_MATERIALINVENTORY', masterData, selectedRecord, showMaterialSection: false, templateData, openModal: true,\r\n                                ncontrolCode, loading: false\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(intl.formatMessage({ id: error.message }));\r\n                        }\r\n                        else {\r\n                            toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                        }\r\n                    })\r\n            }\r\n            else {\r\n                if (masterData.MaterialCategoryMain === undefined) {\r\n                    toast.warn(intl.formatMessage({ id: 'IDS_CONFIGMATERIALCATANDMATERIAL' }));\r\n                }\r\n                if (masterData.MaterialCombo) {\r\n                    if (masterData.MaterialCombo.length === 0) {\r\n                        toast.warn(intl.formatMessage({ id: 'IDS_CONFIGMATERIAL' }));\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n        else {\r\n            let urlArray = [];\r\n            let templateData = [];\r\n            let data = [];\r\n            let filterQueryComponents = [];\r\n            let dataparent = [];\r\n            let dateLables = [];\r\n            let timeZoneList;\r\n            const withoutCombocomponent = []\r\n            const Layout = masterData.selectedTemplate[0].jsondata\r\n            if (masterData[\"SelectedMaterialInventory\"].ntranscode !== transactionStatus.RETIRED &&\r\n                masterData[\"SelectedMaterialInventory\"].ntranscode !== transactionStatus.RELEASED\r\n                && masterData[\"SelectedMaterialInventory\"].ntranscode !== transactionStatus.EXPIRED) {\r\n                Layout.map(row => {\r\n                    row.children.map(column => {\r\n                        column.children.map(component => {\r\n                            if (component.hasOwnProperty(\"parent\")) {\r\n                                dataparent.push(component)\r\n                            }\r\n                            if (component.hasOwnProperty(\"nsqlquerycode\")) {\r\n                                filterQueryComponents.push(component)\r\n                            }\r\n                            if (component.hasOwnProperty('timezone')) {\r\n                                dateLables.push(component.label)\r\n                            }\r\n                            return component.hasOwnProperty(\"children\") ? component.children.map(componentrow => {\r\n                                if (componentrow.inputtype === \"combo\" && !(component.hasOwnProperty(\"parent\"))) {\r\n                                    if (componentrow.hasOwnProperty(\"parent\")) {\r\n                                        dataparent.push(componentrow)\r\n                                    }\r\n                                    else {\r\n                                        data.push(componentrow)\r\n                                    }\r\n                                }\r\n                                if (componentrow.hasOwnProperty(\"nsqlquerycode\")) {\r\n                                    filterQueryComponents.push(componentrow)\r\n                                }\r\n                                if (component.hasOwnProperty('timezone')) {\r\n                                    dateLables.push(component.label)\r\n                                }\r\n                            })\r\n                                : component.inputtype === \"combo\" && !(component.hasOwnProperty(\"parent\")) ? data.push(component) : withoutCombocomponent.push(component)\r\n                        })\r\n                    })\r\n                })\r\n                const comboComponents = data\r\n                const MaterialInv = rsapi.post(\"/materialinventory/getMaterialInventoryEdit\",\r\n                    {\r\n                        'nmaterialtypecode': masterData.SelectedMaterialInventory.nmaterialtypecode,\r\n                        'nmaterialinventorycode': masterData.SelectedMaterialInventory.nmaterialinventorycode, \"userinfo\": loginInfo.userInfo\r\n                    });\r\n                dataparent[0] = {\r\n                    displaymember: dataparent[0].displaymember,\r\n                    inputtype: dataparent[0].inputtype,\r\n                    label: dataparent[0].label,\r\n                    source: dataparent[0].source,\r\n                    type: dataparent[0].type,\r\n                    valuemember: dataparent[0].valuemember\r\n                }\r\n                let filterQueryComponents1 = []\r\n                filterQueryComponents.map(temp => {\r\n                    // filterQueryComponents1.push({'nsqlquerycode':temp.nsqlquerycode})\r\n                    filterQueryComponents1 += temp.nsqlquerycode + ','\r\n                })\r\n                const Materialinvreq = rsapi.post(\"dynamicpreregdesign/getComboValues\",\r\n                    {\r\n                        \"nunitcode\": selectedcombo['jsondata'][\"nunitcode\"].value\r\n                        , \"userinfo\": loginInfo.userInfo, \"parentcolumnlist\": comboComponents,\r\n                        \"filterQueryComponents\": filterQueryComponents1.substring(0, filterQueryComponents1.length - 1),\r\n                        \"parameters\": { 'nmaterialcode': masterData['SelectedMaterialCrumb']['jsondata'].nmaterialcode }\r\n                    });\r\n                const MaterialInvreq1 = rsapi.post('dynamicpreregdesign/getChildValues', {\r\n                    child: Layout[0].children[0].children[0].childValue,\r\n                    parentdata: { nunitcode: selectedcombo['jsondata'][\"nunitcode\"].value },\r\n                    parentsource: 'unit',\r\n                    'nunitcode': selectedcombo['jsondata'][\"nunitcode\"].value,\r\n                    valuemember: 'nunitcode',\r\n                    \"userinfo\": loginInfo.userInfo,\r\n                    parentcolumnlist: dataparent\r\n                });\r\n                const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n                const materialReq3 = rsapi.post('materialinventory/getMaterialInventoryByID', {\r\n                    'nmaterialcatcode': masterData['SelectedMaterialCategory'].nmaterialcatcode,\r\n                    'nmaterialtypecode': masterData['SelectedMaterialType'][0].nmaterialtypecode,\r\n                    'nmaterialcode': masterData['SelectedMaterialCrumb']['jsondata'].nmaterialcode,\r\n                    \"userinfo\": loginInfo.userInfo\r\n                });\r\n                urlArray = [Materialinvreq, MaterialInvreq1, MaterialInv, timezone, materialReq3];\r\n\r\n                dispatch(initRequest(true));\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        templateData = response[0].data;\r\n                        data = [...data, ...dataparent]\r\n                        templateData = parentChildComboLoad(data, { ...response[0].data, ...response[1].data }, selectedRecord, null, withoutCombocomponent, undefined, loginInfo.userInfo.slanguagetypecode, loginInfo.userInfo)\r\n\r\n                        if (response[2].data[\"EditedMaterialInventory\"].length > 0) {\r\n                            if (response[2].data[\"MaterialInventoryDateFeild\"] !== undefined) {\r\n                                response[2].data[\"MaterialInventoryDateFeild\"].map((temp) => {\r\n                                    response[2].data[\"EditedMaterialInventory\"][0][temp] =\r\n                                        rearrangeDateFormat(loginInfo.userInfo, response[2].data[\"EditedMaterialInventory\"][0][temp])\r\n                                })\r\n                                response[2].data[\"DateFeildsInventory\"].map((temp) => {\r\n                                    if (response[2].data[\"EditedMaterialInventory\"][0].hasOwnProperty(temp) &&\r\n                                        response[2].data[\"EditedMaterialInventory\"][0][temp] === '-') {\r\n                                        delete response[2].data[\"EditedMaterialInventory\"][0][temp]\r\n                                    }\r\n                                })\r\n                            }\r\n                            else {\r\n                                response[2].data[\"DateFeildsInventory\"].map((temp) => {\r\n                                    if (response[2].data[\"EditedMaterialInventory\"][0].hasOwnProperty(temp) &&\r\n                                        response[2].data[\"EditedMaterialInventory\"][0][temp] === '-') {\r\n                                        delete response[2].data[\"EditedMaterialInventory\"][0][temp]\r\n                                    }\r\n                                })\r\n                            }\r\n                        }\r\n                        selectedRecord = { ...selectedRecord, ...response[2].data.EditedMaterialInventory[0] }\r\n                        if (dateLables) {\r\n                            const timeZoneListMap = constructOptionList(response[3].data || [], \"ntimezonecode\",\r\n                                \"stimezoneid\", undefined, undefined, true);\r\n                            timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n\r\n                            response[2].data[\"DateFeildsInventory\"].map((temp) => {\r\n                                if (!selectedRecord.hasOwnProperty(temp)) {\r\n                                    selectedRecord[`tz${temp}`] = timeZoneList[0]\r\n                                }\r\n                            })\r\n                        }\r\n                        masterData['SelectedMaterialCrumb'] = response[4].data.SelectedMaterialCrumb\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                operation, screenname: 'IDS_MATERIALINVENTORY', timeZoneList, masterData, isSelectedRecordChange: false, showMaterialSection: false, templateData, openModal: true, selectedcombo, selectedRecord,\r\n                                ncontrolCode, loading: false\r\n                            }\r\n                        });\r\n\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(intl.formatMessage({ id: error.message }));\r\n                        }\r\n                        else {\r\n                            toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                        }\r\n                    })\r\n            }\r\n            else {\r\n                toast.warn(intl.formatMessage({ id: \"IDS_SELECTQUARENTINEINVENTORY\" }));\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\nexport function getMaterialInventoryDetails(inputData, masterData, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"materialinventory/getMaterialInventoryDetails\", {\r\n            \"nmaterialcode\": inputData.nmaterialcode,\r\n            \"nmaterialcatcode\": inputData.nmaterialcatcode,\r\n            \"nmaterialtypecode\": inputData.nmaterialtypecode,\r\n            \"nmaterialinventorycode\": inputData.nmaterialinventorycode,\r\n            \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { masterData, loading: false } });\r\n            }).catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: error.response }));\r\n                }\r\n            })\r\n\r\n    }\r\n}\r\n\r\nexport function updateMaterialStatus(masterData, userInfo, ncontrolcode, nflag) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"materialinventory/updateMaterialStatus\", {\r\n            nflag: nflag,\r\n            nmaterialinventorycode: masterData[\"SelectedMaterialInventory\"].nmaterialinventorycode,\r\n            nmaterialcode: masterData[\"SelectedMaterialInventory\"].nmaterialcode,\r\n            nmaterialtypecode: masterData[\"SelectedMaterialInventory\"].nmaterialtypecode,\r\n            nmaterialcatcode: masterData[\"SelectedMaterialInventory\"].nmaterialcatcode,\r\n            nsectioncode: masterData[\"SelectedMaterialInventory\"].nsectioncode,\r\n            \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { masterData, loading: false } });\r\n            }).catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            })\r\n\r\n    }\r\n}\r\n\r\n\r\nexport function openDatePopup(masterData, ncontrolCode) {\r\n    return function (dispatch) {\r\n        if (masterData.SelectedMaterialCrumb['jsondata']['Open Expiry Need'] !== transactionStatus.NO) {\r\n            dispatch(initRequest(true));\r\n            return rsapi.post(\"timezone/getTimeZone\")\r\n                .then(response => {\r\n                    let selectedRecord = {};\r\n                    // const timeZoneListMap = constructOptionList(response.data || [], \"ntimezonecode\",\r\n                    //     \"stimezoneid\", undefined, undefined, true);\r\n                    // const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n                    // selectedRecord = { 'tzIDS_OPENDATE': timeZoneList[0] }\r\n                    //  dispatch({ type: DEFAULT_RETURN, payload: { timeZoneList, ncontrolCode, selectedRecord, ModaTitle: 'IDS_OPENDATE', showModalPopup: true, masterData, loading: false } });\r\n\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { operation: 'IDS_OPENDATE', ncontrolCode, selectedRecord, ModaTitle: 'IDS_OPENDATE', showModalPopup: true, masterData, loading: false } });\r\n                }).catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({ id: error.message }));\r\n                    }\r\n                    else {\r\n                        toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n            toast.warn(intl.formatMessage({ id: 'IDS_OPENDATEISDISABLEDFORTHISMATERIAL' }));\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nexport function getQuantityTransactionPopup(Data, userInfo, updateInfo, ncontrolCode) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [];\r\n        let timeZoneList;\r\n        const getQuantityTransaction = rsapi.post(\"/materialinventory/getQuantityTransaction\",\r\n            {\r\n                \"userinfo\": userInfo, 'nmaterialtypecode': Data[\"SelectedMaterialType\"][\"nmaterialtypecode\"],\r\n                nmaterialinventorycode: Data[\"SelectedMaterialInventory\"][\"nmaterialinventorycode\"]\r\n                , nflag: 1, sprecision: Data.sprecision, needsectionwise: Data.SelectedMaterialCategory.needSectionwise\r\n            })\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n        urlArray = [getQuantityTransaction, timezone]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                // if (Array.isArray(response[0].data)) {\r\n                let masterData = {}\r\n                let isSectionneed;\r\n                let templateData = [];\r\n                let selectedRecord = {};\r\n                let arr1 = []\r\n                let arr2 = []\r\n                arr1.push(response[0].data.parentcolumnlist[0])\r\n                arr2.push(response[0].data.parentcolumnlist[1])\r\n                masterData = { ...Data, ...response[0].data, searchedData: undefined }\r\n                templateData[0] = parentChildComboLoad(arr1, response[0].data, selectedRecord,\r\n                    response[0].data.childcolumnlist[0], undefined, undefined, userInfo.slanguagetypecode, userInfo)\r\n                templateData[1] = parentChildComboLoad(arr2, response[0].data, selectedRecord,\r\n                    response[0].data.childcolumnlist[1], undefined, undefined, userInfo.slanguagetypecode, userInfo)\r\n\r\n                    templateData[0]['comboData']['Transaction Type'].forEach((x,index)=> {\r\n                        if(x['value']==64&&masterData.SelectedMaterialCategory.needSectionwise===transactionStatus.YES){\r\n                                 templateData[0]['comboData']['Transaction Type'].splice(index,1)  \r\n                        }\r\n                    });\r\n                selectedRecord = {\r\n                    ...templateData[0].selectedRecord, ...templateData[1].selectedRecord,\r\n                    //'IDS_SECTION': Data['SelectedMaterialInventory']['jsondata']['IDS_SECTION'],\r\n                    'Available Quantity/Unit': response[0].data.navailableqty,\r\n                    'Unit':Data.SelectedMaterialCrumb.jsondata.nunitcode.label,\r\n                    'Received Quantity': 0,'Transaction Type':response[0].data[\"Transaction Type\"][0]\r\n                }\r\n                if (selectedRecord.Site) {\r\n                    if (selectedRecord.Site.value === userInfo.nsitecode) {\r\n                        isSectionneed = 3;\r\n                    }\r\n                }\r\n\r\n                // const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                //     \"stimezoneid\", undefined, undefined, true);\r\n                // const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n                // response[0].data[\"DateFeildsProperties\"].map((temp) => {\r\n                //     if (!selectedRecord.hasOwnProperty(temp)) {\r\n                //         selectedRecord[`tz${temp}`] = timeZoneList[0]\r\n                //     }\r\n                // })\r\n                // masterData['QuantityTransactionTemplate'][0].jsondata.map((row) => {\r\n                //     row.children.map((column) => {\r\n                //         column.children.map((component,i) => {\r\n                //             if (component.inputtype === 'combo') {\r\n                //                 if(selectedRecord.hasOwnProperty(component.label))\r\n                //                 if (selectedRecord[component.label] === undefined) {\r\n                //                     if(templateData[0]!==undefined)\r\n                //                     selectedRecord[component.label] = templateData[0].comboData[component.label][0]\r\n                //                 }\r\n                //             }\r\n                //             if (component.inputtype === 'date') {\r\n                //                 if (component.hasOwnProperty('timezone')) {\r\n                //                     const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                //                         \"stimezoneid\", undefined, undefined, true);\r\n                //                      timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n                //                     response[0].data[\"DateFeildsProperties\"].map((temp) => {\r\n                //                         if (!selectedRecord.hasOwnProperty(temp)) {\r\n                //                             selectedRecord[`tz${temp}`] = timeZoneList[0]\r\n                //                         }\r\n                //                     })\r\n                //                 }\r\n                //             }\r\n                //         })\r\n                //      })\r\n                //  }) \r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        operation: \"create\", selectedRecord, templateData: templateData[0], timeZoneList, navailableqty: response[0].data.navailableqty,\r\n                        masterData, updateInfo, ncontrolCode, openModal: true, screenname: \"IDS_QUANTITYTRANSACTION\",\r\n                        loading: false, skip: 0, take: 20, isSectionneed\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getMaterialChildValues(inputParem, userInfo, selectedRecord,\r\n    parentcolumnlist, childcolumnlist, comboData, childKeyname, parentDependentChild, masterData) {\r\n   // if (selectedRecord[\"Transaction Type\"] !== undefined) {\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post('materialinventory/getChildValuesMaterial', {\r\n                child: inputParem.child,\r\n                parentdata: inputParem.item.jsondata,\r\n                parentsource: inputParem.source,\r\n                [inputParem.primarykeyField]: inputParem.value,\r\n                valuemember: inputParem.primarykeyField,\r\n                userInfo,\r\n                parentcolumnlist: childcolumnlist[childKeyname],\r\n                childcolumnlist: childcolumnlist[childKeyname][0],\r\n                parameters: childcolumnlist[childKeyname][0].hasOwnProperty('nsqlquerycode') ? {\r\n                    nmaterialinventorycode: masterData.SelectedMaterialInventory['nmaterialinventorycode'],\r\n                    nsitecode: selectedRecord.Site.value, nusercode: userInfo.nusercode\r\n                } : null,\r\n                userinfo: userInfo\r\n            })\r\n                .then(response => {\r\n                    let templateData = [];\r\n                    let temp = selectedRecord[childKeyname]\r\n                    let returnObj = { ...comboData, ...response.data }\r\n                    //const x=returnObj['Section'] \r\n                    templateData = parentChildComboLoad(parentcolumnlist, returnObj, selectedRecord, childcolumnlist, undefined, undefined, userInfo.slanguagetypecode, userInfo)\r\n\r\n                    if (templateData.comboData['Section'] === undefined) {\r\n                        const optionlist = constructjsonOptionList(response.data['Section'] || [], 'nsectioncode',\r\n                            'ssectionname', false, false, true, undefined, 'section', false, userInfo.slanguagetypecode)\r\n                        templateData.comboData['Section'] = optionlist.get(\"OptionList\");\r\n                    }\r\n                    templateData['comboData']['Transaction Type'].forEach((x,index)=> {\r\n                        if(x['value']==64&&masterData.SelectedMaterialCategory.needSectionwise===transactionStatus.YES){\r\n                                 templateData['comboData']['Transaction Type'].splice(index,1)  \r\n                        }\r\n                    });\r\n                    //  templateData.comboData={...templateData.comboData,...returnObj }\r\n                    selectedRecord[childKeyname] = temp\r\n                    selectedRecord = { ...selectedRecord, [parentDependentChild]: templateData['comboData'][parentDependentChild][0] }\r\n               \r\n                    const comboData1 = { value: selectedRecord['Transaction Type'] && selectedRecord['Transaction Type'].value }\r\n\r\n                    dispatch(getQuantityTransactionOnchange(comboData1, masterData, userInfo, selectedRecord, templateData));\r\n                    // dispatch( type: DEFAULT_RETURN, payload: {templateData,selectedRecord});\r\n                    //  dispatch({\r\n                    //     type: DEFAULT_RETURN,\r\n                    //     payload: {\r\n                    //         templateData,selectedRecord,loading: false\r\n                    //     }\r\n                    // });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    toast.error(error);\r\n                });\r\n        }\r\n    // } else {\r\n    //     toast.warn(intl.formatMessage({\r\n    //         id: \"IDS_SELECTTRANSACTIONTYPE\"\r\n    //     }))\r\n    // }\r\n}\r\n// export function getQuantityTransactionOnchange( ) {\r\n//     return function (dispatch) {\r\n//         dispatch(initRequest(true));\r\n//         rsapi.post(\"/materialinventory/getQuantityTransaction\",\r\n//             {\r\n//                 \"userinfo\": userInfo, 'nmaterialtypecode': Data[\"SelectedMaterialType\"][\"nmaterialtypecode\"],\r\n//                 nmaterialinventorycode: Data[\"SelectedMaterialInventory\"][\"nmaterialinventorycode\"]\r\n//                 , nflag: selectedRecord['Inventory Transaction Type'].value === transactionStatus.ACTIVE ? 2 : 3,\r\n//                 ntransactiontype: ntransactiontype?selectedRecord['Transaction Type'].value:\r\n//                 comboData.value,sourceSection:selectedRecord['Section']&&selectedRecord['Section'].value,\r\n//                 needsectionwise:Data.SelectedMaterialCrumb&&Data.SelectedMaterialCrumb.jsondata.needsectionwise,\r\n//                 sprecision:Data.sprecision\r\n//             })\r\n//             .then(response => { \r\n//                 dispatch(getQuantityTransactionOnchange(comboData1, masterData, userInfo, selectedRecord, templateData));\r\n//             })\r\n//             .catch(error => {\r\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n//                 toast.error(error);\r\n//             });\r\n//     }\r\n// }\r\nexport function getSiteonchange(comboData, Data, userInfo, selectedRecord, templateData, ntransactiontype) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post('dynamicpreregdesign/getcombovalues', {\r\n            // \"nunitcode\": selectedcombo['jsondata'][\"nunitcode\"].value\r\n            // , \"userinfo\": loginInfo.userInfo, \"parentcolumnlist\": comboComponents,\r\n            // \"filterQueryComponents\": filterQueryComponents1.substring(0, filterQueryComponents1.length - 1),\r\n            // \"parameters\":{'nmaterialcode': masterData['SelectedMaterialCrumb']['jsondata'].nmaterialcode}\r\n        })\r\n            .then(response => {\r\n                // let templateData = [];\r\n                // let temp = selectedRecord[childKeyname]\r\n                // let returnObj = { ...comboData, ...response.data }\r\n                // templateData = parentChildComboLoad(parentcolumnlist, returnObj, selectedRecord, childcolumnlist, undefined, undefined, userInfo.slanguagetypecode,userInfo)\r\n                // selectedRecord[childKeyname] = temp\r\n                // selectedRecord = { ...selectedRecord, [parentDependentChild]: templateData['comboData'][parentDependentChild][0] }\r\n                // const comboData1 = { value: selectedRecord['Transaction Type'].value }\r\n                // dispatch(getQuantityTransactionOnchange(comboData1, masterData, userInfo, selectedRecord, templateData)); \r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(error);\r\n            });\r\n    }\r\n}\r\nexport function getQuantityTransactionOnchange(comboData, Data, userInfo, selectedRecord, templateData, ntransactiontype) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/materialinventory/getQuantityTransaction\",\r\n            {\r\n                \"userinfo\": userInfo, 'nmaterialtypecode': Data[\"SelectedMaterialType\"][\"nmaterialtypecode\"] || Data[\"SelectedMaterialType\"][0][\"nmaterialtypecode\"],\r\n                nmaterialinventorycode: Data[\"SelectedMaterialInventory\"][\"nmaterialinventorycode\"]\r\n                , nflag: selectedRecord['Inventory Transaction Type'].value === transactionStatus.ACTIVE ? 2 : 3,\r\n                ntransactiontype: ntransactiontype ? selectedRecord['Transaction Type'] && selectedRecord['Transaction Type'].value :\r\n                    comboData.value && comboData.value, sourceSection: selectedRecord['Section'] && selectedRecord['Section'].value,\r\n                needsectionwise: Data.SelectedMaterialCrumb && Data.SelectedMaterialCrumb.jsondata.needsectionwise,\r\n                sprecision: Data.sprecision, nsitecode: selectedRecord.Site && selectedRecord.Site.value\r\n            })\r\n            .then(response => {\r\n                let isSectionneed;\r\n                let masterData = {}\r\n                let navailableqtyref = {}\r\n                masterData = { ...Data, ...response.data }\r\n                selectedRecord = {\r\n                    ...selectedRecord\r\n                }\r\n                navailableqtyref = response.data.navailableqtyref\r\n                if (selectedRecord['Transaction Type']) {\r\n                    selectedRecord = {\r\n                        ...selectedRecord,\r\n                        'Available Quantity/Unit': response.data.navailableqty,\r\n                    }\r\n                    if (selectedRecord['Transaction Type'].value === transactionStatus.RECEIVED) {\r\n                        masterData['QuantityTransactionTemplate'][0].jsondata.map((row) => {\r\n                            row.children.map((column) => {\r\n                                column.children.map((component, i) => {\r\n                                    if (component.label === 'Available Quantity/Unit') {\r\n                                        delete column.children[i]\r\n                                    }\r\n\r\n                                    component.hasOwnProperty(\"children\") && component.children.map(\r\n\r\n                                        (componentrow,j) => {\r\n    \r\n                                            if (componentrow.label === 'Available Quantity/Unit'||componentrow.label === 'Unit') {\r\n    \r\n                                                delete component.children[j]\r\n    \r\n                                            }\r\n    \r\n    \r\n    \r\n                                        }\r\n    \r\n                                    )\r\n                                })\r\n                            })\r\n                        })\r\n                    }\r\n                }\r\n                if (selectedRecord.Site) {\r\n                    if (selectedRecord.Site.value === userInfo.nsitecode) {\r\n                        isSectionneed = 3;\r\n                        //    selectedRecord['Transaction Type']=templateData.comboData['Transaction Type'][1]\r\n                    }\r\n                    else {\r\n                            if(masterData.SelectedMaterialCategory.needSectionwise===transactionStatus.NO){\r\n                          isSectionneed = 4; \r\n\r\n                          selectedRecord.Section&&delete selectedRecord.Section\r\n                    }\r\n                    }\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        operation: \"create\", selectedRecord, templateData, navailableqtyref,\r\n                        masterData, openModal: true, screenname: \"IDS_QUANTITYTRANSACTION\",\r\n                        loading: false, skip: 0, take: 20, isSectionneed\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(error);\r\n            });\r\n    }\r\n}\r\n\r\nexport function addMaterialInventoryFile(inputParam, param) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [rsapi.post(\"/materialinventory/getMaterialInventoryLinkMaster\", {\r\n            nmaterialinventorycode: param.nmaterialinventorycode && param.nmaterialinventorycode,\r\n            userinfo: inputParam.userInfo\r\n        })];\r\n        if (inputParam.operation === \"update\") {\r\n            urlArray.push(rsapi.post(\"/materialinventory/editMaterialInventoryFile\", {\r\n                userinfo: inputParam.userInfo,\r\n                nmaterialinventorycode: param.nmaterialinventorycode && param.nmaterialinventorycode,\r\n                nmaterialinventoryfilecode: inputParam.selectedRecord.nmaterialinventoryfilecode\r\n            }))\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\r\n                const linkmaster = linkMap.get(\"OptionList\");\r\n                let selectedRecord = {};\r\n                const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\r\n                let disabled = false;\r\n                let editObject = {};\r\n                if (inputParam.operation === \"update\") {\r\n                    editObject = response[1].data;\r\n                    let nlinkcode = {};\r\n                    let link = {};\r\n                    if (editObject[\"jsondata\"].nattachmenttypecode === attachmentType.LINK) {\r\n                        nlinkcode = {\r\n                            \"label\": editObject[\"jsondata\"].slinkname,\r\n                            \"value\": editObject[\"jsondata\"].nlinkcode\r\n                        }\r\n\r\n                        link = {\r\n                            slinkfilename: editObject[\"jsondata\"].sfilename,\r\n                            slinkdescription: editObject[\"jsondata\"].sdescription,\r\n                            nlinkdefaultstatus: editObject[\"jsondata\"].ndefaultstatus,\r\n                            sfilesize: '',\r\n                            nfilesize: 0,\r\n                            ndefaultstatus: 4,\r\n                            sfilename: '',\r\n                        }\r\n\r\n                    } else {\r\n                        nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\"\r\n                        link = {\r\n                            slinkfilename: '',\r\n                            slinkdescription: '',\r\n                            nlinkdefaultstatus: 4,\r\n                            sfilesize: editObject[\"jsondata\"].sfilesize,\r\n                            nfilesize: editObject[\"jsondata\"].nfilesize,\r\n                            ndefaultstatus: editObject[\"jsondata\"].ndefaultstatus,\r\n                            ssystemfilename: editObject[\"jsondata\"].ssystemfilename,\r\n                            sfilename: editObject[\"jsondata\"].sfilename,\r\n                        }\r\n                    }\r\n                    selectedRecord = {\r\n                        ...link,\r\n                        sdescription: editObject[\"jsondata\"].sdescription,\r\n                        nmaterialinventoryfilecode: editObject[\"jsondata\"].nmaterialinventoryfilecode,\r\n                        nattachmenttypecode: editObject[\"jsondata\"].nattachmenttypecode,\r\n                        nlinkcode,\r\n                    };\r\n                } else {\r\n                    selectedRecord = {\r\n                        nattachmenttypecode: response[0].data.AttachmentType.length > 0 ?\r\n                            response[0].data.AttachmentType[0].nattachmenttypecode : attachmentType.FTP,\r\n                        nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\",\r\n                        disabled\r\n                    };\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                       // openChildModal: true,\r\n                       openModal: true,\r\n                        dcreateddate: inputParam.selectedRecord && rearrangeDateFormat(inputParam.userInfo, inputParam.selectedRecord.dcreateddate),\r\n                        operation: inputParam.operation,\r\n                        screenname: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolCode,\r\n                        selectedRecord,\r\n                        loading: false,\r\n                        linkMaster: linkmaster,\r\n                        showSaveContinue: false,\r\n                        editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}