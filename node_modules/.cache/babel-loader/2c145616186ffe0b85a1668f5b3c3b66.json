{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{FormattedMessage,injectIntl}from'react-intl';import{Row,Col,Button}from'react-bootstrap';import DataGrid from'../../components/data-grid/data-grid.component';import DataGridWithSelection from'../../components/data-grid/DataGridWithSelection';import{faSave}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{MediaHeader}from'../product/product.styled';import{process}from\"@progress/kendo-data-query\";import{toast}from'react-toastify';// ADDed by Neeraj-ALPD-5136\n//WorkList Screen -> Including filter in Data selection Kendo Grid \n//Changed functional component into class component\nvar AddWorklistSample=/*#__PURE__*/function(_Component){_inherits(AddWorklistSample,_Component);var _super=_createSuper(AddWorklistSample);function AddWorklistSample(props){var _this;_classCallCheck(this,AddWorklistSample);_this=_super.call(this,props);_this.addSaveDataGrid=function(){var filterdata1=_this.state.dataState?process(_this.state.addComponentDataListCopy||[],_objectSpread(_objectSpread({},_this.state.dataState),{},{take:_this.state.addComponentDataList.length})).data:[];var sortListedData1=filterdata1.filter(function(x){return _this.state.addedComponentList.some(function(item){return item.ntransactiontestcode===x.ntransactiontestcode;});});var exists=_this.state.dataState&&_this.state.dataState.filter!==null&&_this.state.dataState.filter!==undefined?sortListedData1.length>0?true:false:true;var sortListedDataList=_this.state.addedComponentList&&_this.state.addedComponentList.filter(function(addedItem){return process(_this.state.addComponentDataList||[],_this.state.dataState).data.some(function(item){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});})||[];if(sortListedDataList&&sortListedDataList.length>0&&exists){var addComponentSortedList=[];var updatedList=[];var ListedData=[];var sortListedData=[];var updatedDataList=[];if(_this.state.dataState&&_this.state.dataState.filter!==null&&_this.state.dataState.filter!==undefined){var filterdata=process(_this.state.addComponentDataListCopy||_this.state.addComponentDataList||[],_this.state.dataState).data||[];sortListedData=filterdata.filter(function(x){return _this.state.addedComponentList.some(function(item){return item.ntransactiontestcode===x.ntransactiontestcode;});});updatedDataList=_this.state.addedComponentList.filter(function(item){return!sortListedData.some(function(addedItem){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});});updatedList=process(_this.state.addComponentDataListCopy||_this.state.addComponentDataList||[],_objectSpread(_objectSpread({},_this.state.dataState),{},{skip:0,take:_this.state.addComponentDataList.length})).data.filter(function(item){return!sortListedData.some(function(addedItem){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});});updatedDataList.map(function(x){if(x.selected){ListedData.push(x);}});}else{ListedData=_this.state.addedComponentList.filter(function(addedItem){return!process(_this.state.addComponentDataList||[],_this.state.dataState).data.some(function(item){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});})||[];sortListedData=_this.state.addedComponentList.filter(function(addedItem){return process(_this.state.addComponentDataList||[],_this.state.dataState).data.some(function(item){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});});updatedList=_this.state.addComponentDataList.filter(function(item){return!sortListedData.some(function(addedItem){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});});}if(_this.state.addComponentSortedList.length>0){_this.state.addComponentSortedList.map(function(item){var newItem=JSON.parse(JSON.stringify(item));newItem[\"jsondata\"]={};newItem[\"jsonuidata\"]={};newItem[\"jsondata\"]['worklist']=item;newItem[\"jsonuidata\"]['worklist']=item;addComponentSortedList.push(newItem);});}sortListedData.map(function(item){var newItem=JSON.parse(JSON.stringify(item));newItem[\"jsondata\"]={};newItem[\"jsonuidata\"]={};newItem[\"jsondata\"]['worklist']=item;newItem[\"jsonuidata\"]['worklist']=item;addComponentSortedList.push(newItem);});_this.props.childDataChange(addComponentSortedList);_this.setState({addComponentDataList:updatedList||[],addSelectAll:_this.valiateCheckAll(_this.state.dataState&&_this.state.dataState.filter!==null&&_this.state.dataState.filter!==undefined?process(updatedList||[],_objectSpread(_objectSpread({},_this.state.dataState),{},{skip:0,take:updatedList.length})).data||[]:updatedList),addComponentSortedList:addComponentSortedList,addedComponentList:ListedData,addComponentDataListCopy:_this.valiateCopy(addComponentSortedList||[],updatedList||[],ListedData||[]),dataState:_this.dataStateValidation()});}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELCETONESAMPLE\"}));}};_this.dataStateChangeWorklistSample=function(event){var updatedList=[];if(event.dataState&&event.dataState.filter===null){var addComponentDataListCopy=_this.state.addComponentDataListCopy||_this.state.addComponentDataList||[];addComponentDataListCopy.forEach(function(x){var exists=_this.state.addComponentSortedList.some(function(item){return item.ntransactiontestcode===x.ntransactiontestcode;});if(!exists){updatedList.push(x);}});}else{updatedList=_this.state.addComponentDataList||[];}_this.setState({dataResult:process(_this.state.addComponentDataList||[],event.dataState),dataState:event.dataState,addComponentDataList:updatedList,addSelectAll:event.dataState&&event.dataState.filter===null?_this.valiateCheckAll(updatedList):_this.valiateCheckAll(process(updatedList||[],event.dataState).data)});};_this.headerSelectionChange=function(event){var checked=event.syntheticEvent.target.checked;var eventData=event.target.props.data.hasOwnProperty('data')?event.target.props.data.data||[]:event.target.props.data||[];var addComponentDataList=//event.target.props.data \n_this.state.addComponentDataList||[];var addedComponentList=_this.state.addedComponentList||[];if(checked){var _this$setState;var data=addComponentDataList.map(function(item){var matchingData=eventData.find(function(dataItem){return dataItem.ntransactiontestcode===item.ntransactiontestcode;});if(matchingData){var existingIndex=addedComponentList.findIndex(function(x){return x.ntransactiontestcode===item.ntransactiontestcode;});if(existingIndex===-1){var newItem=_objectSpread(_objectSpread({},item),{},{selected:true// ALPD-5535 - commented by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\n// jsondata: { worklist: item },\n// jsonuidata: { worklist: item },\n});addedComponentList.push(newItem);}// ALPD-5523 - commented by Gowtham in 10/03/2025 - Run batch creation -->In the sample grid filter, samples are repeated.\n// else {\n//         const oldItem = { ...addedComponentList[existingIndex], selected: true };\n//         const newItem = {\n//                 ...oldItem,\n//                 selected: true,\n//                 jsondata: { worklist: oldItem },\n//                 jsonuidata: { worklist: oldItem },\n//         };\n//         addedComponentList.push(newItem);\n// }\nreturn _objectSpread(_objectSpread({},item),{},{selected:true});}else{return _objectSpread(_objectSpread({},item),{},{selected:item.selected?true:false});}});_this.setState((_this$setState={addComponentDataList:data,addedComponentList:addedComponentList,addComponentDataListCopy:_this.valiateCopy(_this.state.addComponentSortedList||[],data||[],addedComponentList||[]),addSelectAll:_this.valiateCheckAll(process(data||[],_this.state.dataState))},_defineProperty(_this$setState,\"addSelectAll\",checked),_defineProperty(_this$setState,\"deleteSelectAll\",false),_this$setState));}else{var _this$setState2;var addedComponentData=_this.state.addedComponentList||[];var deletedListdData=_this.state.deletedList||[];var _data=addComponentDataList.map(function(x){var matchedItem=eventData.find(function(item){return x.ntransactiontestcode===item.ntransactiontestcode;});if(matchedItem){addedComponentData=addedComponentData.filter(function(item1){return item1.npreregno!==matchedItem.npreregno;});deletedListdData=deletedListdData.filter(function(item1){return item1.npreregno!==matchedItem.npreregno;});matchedItem.selected=false;return matchedItem;}return x;});_this.setState((_this$setState2={addComponentDataList:_data,addedComponentList:addedComponentData,deletedList:deletedListdData,addSelectAll:_this.valiateCheckAll(addedComponentList),deleteSelectAll:_this.valiateCheckAll(addedComponentList)},_defineProperty(_this$setState2,\"addSelectAll\",checked),_defineProperty(_this$setState2,\"deleteSelectAll\",false),_defineProperty(_this$setState2,\"addComponentDataListCopy\",_this.valiateCopy(_this.state.addComponentSortedList||[],_data||[],addedComponentData||[])),_this$setState2));}};_this.selectionChange=function(event){var addedComponentList=_this.state.addedComponentList||[];var addComponentDataList=_this.state.addComponentDataList.map(function(item){if(item.ntransactiontestcode===event.dataItem.ntransactiontestcode){item.selected=!event.dataItem.selected;if(item.selected){var newItem=JSON.parse(JSON.stringify(item));// ALPD-5535 - commented by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\n// newItem[\"jsondata\"] = {}\n// newItem[\"jsonuidata\"] = {}\ndelete newItem['selected'];newItem.selected=true;// newItem[\"jsondata\"]['worklist'] = item\n// newItem[\"jsonuidata\"]['worklist'] = item\naddedComponentList.push(newItem);}else{addedComponentList=addedComponentList.filter(function(item1){return item1.ntransactiontestcode!==item.ntransactiontestcode;});}}return item;});_this.setState({addSelectAll:_this.valiateCheckAll(process(addComponentDataList||[],_this.state.dataState).data),addComponentDataList:addComponentDataList,addedComponentList:addedComponentList,deleteSelectAll:_this.valiateCheckAll(addedComponentList),addComponentDataListCopy:_this.valiateCopy(_this.state.addComponentSortedList||[],addComponentDataList||[],addedComponentList||[])});};_this.handleClickDelete=function(row){var updatedAddList=[];if(row){var ntransactiontestcode=row&&row.dataItem&&row.dataItem.ntransactiontestcode;var updatedList=_this.state.addComponentSortedList&&_this.state.addComponentSortedList.filter(function(item){return item.ntransactiontestcode!==ntransactiontestcode;});var exists=_this.state.addComponentDataList&&_this.state.addComponentDataList.some(function(item){return item.ntransactiontestcode===ntransactiontestcode;});if(!exists){updatedAddList=_this.state.addComponentDataList&&_this.state.addComponentDataList.map(function(item){return item;});// ALPD-5535 - delete json by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\nrow.dataItem&&row.dataItem.jsondata&&delete row.dataItem.jsondata;row.dataItem&&row.dataItem.jsonuidata&&delete row.dataItem.jsonuidata;updatedAddList.push(_objectSpread(_objectSpread({},row.dataItem),{},{selected:false}));}_this.props.childDataChange(updatedList);_this.setState({addComponentDataList:updatedAddList,addComponentSortedList:updatedList,addComponentDataListCopy:_this.valiateCopy(updatedList||[],updatedAddList||[]),addSelectAll:_this.valiateCheckAll(updatedAddList)});}};var dataState={skip:0,take:10};_this.state={addComponentSortedList:[],dataState:dataState};_this.formRef=React.createRef();return _this;}_createClass(AddWorklistSample,[{key:\"render\",value:function render(){var _this2=this;var extractedColumnList=[];var count=(this.state.addComponentSortedList||[]).length;extractedColumnList.push({idsName:\"IDS_ARNO\",dataField:\"sarno\",\"width\":\"155px\"});if(this.props.nneedsubsample){extractedColumnList.push({idsName:\"IDS_SAMPLEARNO\",dataField:\"ssamplearno\",\"width\":\"155px\"});}extractedColumnList.push({idsName:\"IDS_TEST\",dataField:\"stestname\",\"width\":\"155px\"},{idsName:\"IDS_SAMPLENAME\",dataField:\"ssamplename\",\"width\":\"155px\"},{idsName:\"IDS_REGISTRATIONDATE\",dataField:\"sregistereddate\",\"width\":\"200px\"});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{className:\"d-flex justify-content-end p-2\",md:12},/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this2.addSaveDataGrid();}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_ADD\",defaultMessage:\"Add\"}))),/*#__PURE__*/React.createElement(Row,{style:{marginTop:'10px'}},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(DataGridWithSelection,{primaryKeyField:\"nworklistsamplecode\",userInfo:this.props.userInfo,data:this.state.addComponentDataList||[],selectAll:this.state.addSelectAll,title:this.props.intl.formatMessage({id:\"IDS_SELECTTODELETE\"}),selectionChange:this.selectionChange,headerSelectionChange:this.headerSelectionChange,extractedColumnList:extractedColumnList,dataState:this.state.dataState?this.state.dataState:{skip:0,take:10},dataResult:this.state.dataResult?this.state.dataResult:process(this.state.addComponentDataList||[],this.state.dataState?this.state.dataState:{skip:0,take:10}),dataStateChange:this.dataStateChangeWorklistSample,scrollable:'scrollable',pageable:true}))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Row,{style:{marginTop:'10px'}},/*#__PURE__*/React.createElement(Col,{md:'12'},/*#__PURE__*/React.createElement(MediaHeader,{className:\"mb-3\"},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\",color:\"black\"}},this.props.intl.formatMessage({id:\"IDS_SELECTEDSAMPLES\"})+\" : \"),/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\",color:\"blue\"}},count))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(DataGridWithSelection,{primaryKeyField:\"nworklistsamplecode\",userInfo:this.props.userInfo,data:this.state.addComponentSortedList||[],title:this.props.intl.formatMessage({id:\"IDS_SELECTTODELETE\"}),extractedColumnList:extractedColumnList,hideColumnFilter:true,isHidemulipleselect:true,isActionRequired:true,handleClickDelete:this.handleClickDelete})))));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps,previousState){if(this.props.addComponentDataLists!==previousProps.addComponentDataLists){this.setState({addComponentDataList:this.props.addComponentDataLists||[]});}if(this.state.addComponentDataList!==previousState.addComponentDataList){this.setState({dataResult:process(this.state.addComponentDataList||[],this.state.dataState)});}}},{key:\"dataStateValidation\",value:function dataStateValidation(){var dataState=_objectSpread({},this.state.dataState);var count=0;this.state.dataResult.data.map(function(x){if(x.selected){count++;}});if(this.state.dataResult.data){if(parseInt(this.state.dataResult.total)===parseInt(count)+parseInt(this.state.dataState.skip)){var skipcount=this.state.dataState.skip>0?this.state.dataState.skip-this.state.dataState.take:this.state.dataState.skip;dataState=_objectSpread(_objectSpread({},dataState),{},{skip:skipcount,take:this.state.dataState.take});}}return dataState;}},{key:\"valiateCopy\",value:function valiateCopy(sortedList,addComponentDataList,addedComponentList){var addedComponentLists=addedComponentList||this.state.addedComponentList||[];var listData=this.props.addComponentDataLists||[];var copyingList=listData.filter(function(item1){return!sortedList.some(function(item2){return item1.ntransactiontestcode===item2.ntransactiontestcode;});})||[];var copyingListData=copyingList.map(function(item){var existsInAddComponentDataList=addedComponentLists.some(function(item1){return item1.ntransactiontestcode===item.ntransactiontestcode;});if(existsInAddComponentDataList){return _objectSpread(_objectSpread({},item),{},{selected:true});}else{return _objectSpread(_objectSpread({},item),{},{selected:false});}});return copyingListData;}},{key:\"valiateCheckAll\",value:function valiateCheckAll(data){var selectAll=true;if(data&&data.length>0){data.forEach(function(dataItem){if(dataItem.selected){if(dataItem.selected===false){selectAll=false;}}else{selectAll=false;}});}else{selectAll=false;}return selectAll;}}]);return AddWorklistSample;}(Component);export default injectIntl(AddWorklistSample);","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/worklist/AddWorklistSample.js"],"names":["React","Component","FormattedMessage","injectIntl","Row","Col","Button","DataGrid","DataGridWithSelection","faSave","FontAwesomeIcon","MediaHeader","process","toast","AddWorklistSample","props","addSaveDataGrid","filterdata1","state","dataState","addComponentDataListCopy","take","addComponentDataList","length","data","sortListedData1","filter","x","addedComponentList","some","item","ntransactiontestcode","exists","undefined","sortListedDataList","addedItem","addComponentSortedList","updatedList","ListedData","sortListedData","updatedDataList","filterdata","skip","map","selected","push","newItem","JSON","parse","stringify","childDataChange","setState","addSelectAll","valiateCheckAll","valiateCopy","dataStateValidation","warn","intl","formatMessage","id","dataStateChangeWorklistSample","event","forEach","dataResult","headerSelectionChange","checked","syntheticEvent","target","eventData","hasOwnProperty","matchingData","find","dataItem","existingIndex","findIndex","addedComponentData","deletedListdData","deletedList","matchedItem","item1","npreregno","deleteSelectAll","selectionChange","handleClickDelete","row","updatedAddList","jsondata","jsonuidata","formRef","createRef","extractedColumnList","count","idsName","dataField","nneedsubsample","marginTop","userInfo","fontWeight","color","previousProps","previousState","addComponentDataLists","parseInt","total","skipcount","sortedList","addedComponentLists","listData","copyingList","item2","copyingListData","existsInAddComponentDataList","selectAll"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { Row, Col, Button } from 'react-bootstrap';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport DataGridWithSelection from '../../components/data-grid/DataGridWithSelection';\r\nimport { faSave } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { MediaHeader } from '../product/product.styled';\r\nimport { process } from \"@progress/kendo-data-query\";\r\nimport { toast } from 'react-toastify';\r\n\r\n// ADDed by Neeraj-ALPD-5136\r\n//WorkList Screen -> Including filter in Data selection Kendo Grid \r\n//Changed functional component into class component\r\nclass AddWorklistSample extends Component {\r\n        constructor(props) {\r\n                super(props);\r\n                const dataState = { skip: 0, take: 10 };\r\n                this.state = {\r\n                        addComponentSortedList: [], dataState\r\n                };\r\n                this.formRef = React.createRef();\r\n        }\r\n\r\n        render() {\r\n                const extractedColumnList = [];\r\n                let count = (this.state.addComponentSortedList || []).length;\r\n                extractedColumnList.push({ idsName: \"IDS_ARNO\", dataField: \"sarno\", \"width\": \"155px\" });\r\n                if (this.props.nneedsubsample) {\r\n                        extractedColumnList.push({ idsName: \"IDS_SAMPLEARNO\", dataField: \"ssamplearno\", \"width\": \"155px\" });\r\n                }\r\n                extractedColumnList.push({ idsName: \"IDS_TEST\", dataField: \"stestname\", \"width\": \"155px\" },\r\n                        { idsName: \"IDS_SAMPLENAME\", dataField: \"ssamplename\", \"width\": \"155px\" },\r\n                        { idsName: \"IDS_REGISTRATIONDATE\", dataField: \"sregistereddate\", \"width\": \"200px\" });\r\n                return (\r\n                        <>\r\n                                <Row>\r\n                                        <Col className=\"d-flex justify-content-end p-2\" md={12}>\r\n                                                <Button className=\"btn-user btn-primary-blue\"\r\n                                                        onClick={() => this.addSaveDataGrid()}>\r\n                                                        <FontAwesomeIcon icon={faSave} /> { }\r\n                                                        <FormattedMessage id='IDS_ADD' defaultMessage='Add' />\r\n                                                </Button>\r\n                                        </Col>\r\n                                        <Row style={{ marginTop: '10px' }}>\r\n                                                <Col>\r\n                                                        <DataGridWithSelection\r\n                                                                primaryKeyField={\"nworklistsamplecode\"}\r\n                                                                userInfo={this.props.userInfo}\r\n                                                                data={this.state.addComponentDataList || []}\r\n                                                                selectAll={this.state.addSelectAll}\r\n                                                                title={this.props.intl.formatMessage({ id: \"IDS_SELECTTODELETE\" })}\r\n                                                                selectionChange={this.selectionChange}\r\n                                                                headerSelectionChange={this.headerSelectionChange}\r\n                                                                extractedColumnList={extractedColumnList}\r\n                                                                dataState={this.state.dataState\r\n                                                                        ? this.state.dataState : { skip: 0, take: 10 }}\r\n                                                                dataResult={this.state.dataResult ? this.state.dataResult :\r\n                                                                        process(this.state.addComponentDataList || [], this.state.dataState\r\n                                                                                ? this.state.dataState : { skip: 0, take: 10 })}\r\n                                                                dataStateChange={this.dataStateChangeWorklistSample}\r\n                                                                scrollable={'scrollable'}\r\n                                                                pageable={true}\r\n                                                        />\r\n                                                </Col>\r\n                                        </Row>\r\n                                        <br>\r\n                                        </br>\r\n                                        <Row style={{ marginTop: '10px' }}>\r\n                                                <Col md={'12'}>\r\n                                                        <MediaHeader className='mb-3'>\r\n                                                                <span style={{ fontWeight: \"bold\", color: \"black\" }}>\r\n                                                                        {this.props.intl.formatMessage({ id: \"IDS_SELECTEDSAMPLES\" }) + \" : \"}\r\n                                                                </span>\r\n                                                                <span style={{ fontWeight: \"bold\", color: \"blue\" }}>\r\n                                                                        {count}\r\n                                                                </span>\r\n                                                        </MediaHeader>\r\n                                                </Col>\r\n                                                <Col>\r\n                                                        <DataGridWithSelection\r\n                                                                primaryKeyField={\"nworklistsamplecode\"}\r\n                                                                userInfo={this.props.userInfo}\r\n                                                                data={this.state.addComponentSortedList || []}\r\n                                                                title={this.props.intl.formatMessage({ id: \"IDS_SELECTTODELETE\" })}\r\n                                                                extractedColumnList={extractedColumnList}\r\n                                                                hideColumnFilter={true}\r\n                                                                isHidemulipleselect={true}\r\n                                                                isActionRequired={true}\r\n                                                                handleClickDelete={this.handleClickDelete}\r\n                                                        />\r\n                                                </Col>\r\n                                        </Row>\r\n                                </Row>\r\n                        </>\r\n                );\r\n        }\r\n\r\n        componentDidUpdate(previousProps,previousState) {\r\n                if (this.props.addComponentDataLists !== previousProps.addComponentDataLists) {\r\n                        this.setState({ addComponentDataList: this.props.addComponentDataLists || [] });\r\n                }\r\n                if(this.state.addComponentDataList!==previousState.addComponentDataList){\r\n                        this.setState({ dataResult: process(this.state.addComponentDataList || [], this.state.dataState) });\r\n                }\r\n        }\r\n\r\n        addSaveDataGrid = () => {\r\n                let filterdata1 = this.state.dataState ? process(this.state.addComponentDataListCopy || [], { ...this.state.dataState, take: this.state.addComponentDataList.length }).data : [];\r\n                let sortListedData1 = filterdata1.filter(x =>\r\n                        this.state.addedComponentList.some(item => item.ntransactiontestcode === x.ntransactiontestcode)\r\n                );\r\n                let exists = this.state.dataState && this.state.dataState.filter !== null && this.state.dataState.filter !== undefined ?\r\n                        sortListedData1.length > 0 ? true : false : true;\r\n                let sortListedDataList = this.state.addedComponentList && this.state.addedComponentList.filter(\r\n                        (addedItem) => process(this.state.addComponentDataList || [], this.state.dataState).data.some(\r\n                                (item) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                        )\r\n                ) || [];\r\n                if (sortListedDataList && sortListedDataList.length > 0 && exists) {\r\n                        let addComponentSortedList = [];\r\n                        let updatedList = [];\r\n                        let ListedData = [];\r\n                        let sortListedData = [];\r\n                        let updatedDataList = [];\r\n                        if (this.state.dataState && this.state.dataState.filter !== null && this.state.dataState.filter !== undefined) {\r\n                                let filterdata = process(this.state.addComponentDataListCopy || this.state.addComponentDataList || [],\r\n                                        this.state.dataState ).data || [];\r\n                                sortListedData = filterdata.filter(x =>\r\n                                        this.state.addedComponentList.some(item => item.ntransactiontestcode === x.ntransactiontestcode)\r\n                                );\r\n                                updatedDataList = this.state.addedComponentList.filter(\r\n                                        (item) => !sortListedData.some(\r\n                                                (addedItem) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                                        )\r\n                                );\r\n                                updatedList = process(this.state.addComponentDataListCopy || this.state.addComponentDataList || [],{ ...this.state.dataState,skip:0, take: this.state.addComponentDataList.length } ).data.filter(\r\n                                        (item) => !sortListedData.some(\r\n                                                (addedItem) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                                        )\r\n                                );\r\n                                updatedDataList.map(x => { if (x.selected) { ListedData.push(x) } });\r\n\r\n                        } else {\r\n\r\n                                ListedData = this.state.addedComponentList.filter(\r\n                                        (addedItem) => !process(this.state.addComponentDataList || [], this.state.dataState).data.some(\r\n                                                (item) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                                        )\r\n                                ) || [];\r\n\r\n                                sortListedData = this.state.addedComponentList.filter(\r\n                                        (addedItem) => process(this.state.addComponentDataList || [], this.state.dataState).data.some(\r\n                                                (item) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                                        )\r\n                                );\r\n                                updatedList = this.state.addComponentDataList.filter(\r\n                                        (item) => !sortListedData.some(\r\n                                                (addedItem) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                                        )\r\n                                );\r\n                        }\r\n                        if (this.state.addComponentSortedList.length > 0) {\r\n                                this.state.addComponentSortedList.map(item => {\r\n                                        const newItem = JSON.parse(JSON.stringify(item));\r\n                                        newItem[\"jsondata\"] = {}\r\n                                        newItem[\"jsonuidata\"] = {}\r\n                                        newItem[\"jsondata\"]['worklist'] = item\r\n                                        newItem[\"jsonuidata\"]['worklist'] = item\r\n                                        addComponentSortedList.push(newItem)\r\n                                })\r\n                        }\r\n                        sortListedData.map(item => {\r\n                                const newItem = JSON.parse(JSON.stringify(item));\r\n                                newItem[\"jsondata\"] = {}\r\n                                newItem[\"jsonuidata\"] = {}\r\n                                newItem[\"jsondata\"]['worklist'] = item\r\n                                newItem[\"jsonuidata\"]['worklist'] = item\r\n                                addComponentSortedList.push(newItem)\r\n                        })\r\n                        this.props.childDataChange(addComponentSortedList);\r\n                        this.setState({\r\n                                addComponentDataList:   updatedList||[],\r\n                                addSelectAll: this.valiateCheckAll(this.state.dataState && this.state.dataState.filter !== null && this.state.dataState.filter !== undefined\r\n                                        ? process(updatedList || [],\r\n                                                { ...this.state.dataState,skip:0, take: updatedList.length }).data || [] : updatedList)\r\n                                , addComponentSortedList: addComponentSortedList\r\n                                , addedComponentList: ListedData,\r\n                                addComponentDataListCopy: this.valiateCopy(addComponentSortedList || [], updatedList || [], ListedData || []),\r\n                                dataState: this.dataStateValidation()\r\n                        })\r\n                } else {\r\n                        toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELCETONESAMPLE\" }));\r\n                }\r\n        }\r\n        dataStateValidation() {\r\n                let dataState = { ...this.state.dataState };\r\n                let count=0;\r\n                this.state.dataResult.data.map(x=>{if(x.selected){count++}});\r\n                if (this.state.dataResult.data) {\r\n                        if (parseInt(this.state.dataResult.total) ===  (parseInt(count)+parseInt(this.state.dataState.skip))) {\r\n                                let skipcount = this.state.dataState.skip > 0 ? (this.state.dataState.skip - this.state.dataState.take) :\r\n                                        this.state.dataState.skip\r\n                                dataState = { ...dataState,skip: skipcount, take: this.state.dataState.take }\r\n                        }\r\n                }\r\n               return dataState;\r\n        }\r\n\r\n\r\n        dataStateChangeWorklistSample = (event) => {\r\n                let updatedList = [];\r\n                if (event.dataState && event.dataState.filter === null) {\r\n                        let addComponentDataListCopy = this.state.addComponentDataListCopy || this.state.addComponentDataList || [];\r\n                        addComponentDataListCopy.forEach(x => {\r\n                                const exists = this.state.addComponentSortedList.some(\r\n                                        item => item.ntransactiontestcode === x.ntransactiontestcode\r\n                                );\r\n                                if (!exists) {\r\n                                        updatedList.push(x);\r\n                                }\r\n                        });\r\n                } else {\r\n                        updatedList = this.state.addComponentDataList || []\r\n                }\r\n                this.setState({\r\n                        dataResult: process(this.state.addComponentDataList || [], event.dataState),\r\n                        dataState: event.dataState, addComponentDataList: updatedList, addSelectAll: event.dataState && event.dataState.filter === null ?\r\n                                this.valiateCheckAll(updatedList) :\r\n                                this.valiateCheckAll(process(updatedList || [], event.dataState).data)\r\n                });\r\n        }\r\n\r\n\r\n        headerSelectionChange = (event) => {\r\n                const checked = event.syntheticEvent.target.checked;\r\n                const eventData = event.target.props.data.hasOwnProperty('data') ? event.target.props.data.data || [] : event.target.props.data || [];\r\n                let addComponentDataList = //event.target.props.data \r\n                        this.state.addComponentDataList || [];\r\n                let addedComponentList = this.state.addedComponentList || [];\r\n                if (checked) {\r\n                        const data = addComponentDataList.map(item => {\r\n                                const matchingData = eventData.find(dataItem => dataItem.ntransactiontestcode === item.ntransactiontestcode);\r\n                                if (matchingData) {\r\n                                        const existingIndex = addedComponentList.findIndex(\r\n                                                x => x.ntransactiontestcode === item.ntransactiontestcode\r\n                                        );\r\n\r\n                                        if (existingIndex === -1) {\r\n                                                const newItem = {\r\n                                                        ...item,\r\n                                                        selected: true,\r\n                                                        // ALPD-5535 - commented by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\r\n                                                        // jsondata: { worklist: item },\r\n                                                        // jsonuidata: { worklist: item },\r\n                                                };\r\n                                                addedComponentList.push(newItem);\r\n                                        } \r\n                                        // ALPD-5523 - commented by Gowtham in 10/03/2025 - Run batch creation -->In the sample grid filter, samples are repeated.\r\n                                        // else {\r\n                                        //         const oldItem = { ...addedComponentList[existingIndex], selected: true };\r\n                                        //         const newItem = {\r\n                                        //                 ...oldItem,\r\n                                        //                 selected: true,\r\n                                        //                 jsondata: { worklist: oldItem },\r\n                                        //                 jsonuidata: { worklist: oldItem },\r\n                                        //         };\r\n                                        //         addedComponentList.push(newItem);\r\n                                        // }\r\n\r\n                                        return { ...item, selected: true };\r\n                                } else {\r\n                                        return { ...item, selected: item.selected ? true : false };\r\n                                }\r\n                        });\r\n                        this.setState({\r\n                                addComponentDataList: data, addedComponentList,\r\n                                addComponentDataListCopy: this.valiateCopy(this.state.addComponentSortedList || [], data || [], addedComponentList || []),\r\n                                addSelectAll: this.valiateCheckAll(process(data || [], this.state.dataState)),\r\n                                addSelectAll: checked, deleteSelectAll: false\r\n                        });\r\n                } else {\r\n                        let addedComponentData = this.state.addedComponentList || [];\r\n                        let deletedListdData = this.state.deletedList || [];\r\n                        const data = addComponentDataList.map(x => {\r\n                                const matchedItem = eventData.find(item => x.ntransactiontestcode === item.ntransactiontestcode);\r\n                                if (matchedItem) {\r\n                                        addedComponentData = addedComponentData.filter(item1 => item1.npreregno !== matchedItem.npreregno);\r\n                                        deletedListdData = deletedListdData.filter(item1 => item1.npreregno !== matchedItem.npreregno);\r\n                                        matchedItem.selected = false;\r\n                                        return matchedItem;\r\n                                }\r\n                                return x;\r\n                        });\r\n\r\n                        this.setState({\r\n                                addComponentDataList: data, addedComponentList: addedComponentData, deletedList: deletedListdData,\r\n                                addSelectAll: this.valiateCheckAll(addedComponentList),\r\n                                deleteSelectAll: this.valiateCheckAll(addedComponentList),\r\n                                addSelectAll: checked, deleteSelectAll: false,\r\n                                addComponentDataListCopy: this.valiateCopy(this.state.addComponentSortedList || [], data || [], addedComponentData || []),\r\n                        });\r\n                }\r\n        }\r\n\r\n        selectionChange = (event) => {\r\n                let addedComponentList = this.state.addedComponentList || [];\r\n                const addComponentDataList = this.state.addComponentDataList.map(item => {\r\n                        if (item.ntransactiontestcode === event.dataItem.ntransactiontestcode) {\r\n                                item.selected = !event.dataItem.selected;\r\n                                if (item.selected) {\r\n                                        const newItem = JSON.parse(JSON.stringify(item));\r\n                                        // ALPD-5535 - commented by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\r\n                                        // newItem[\"jsondata\"] = {}\r\n                                        // newItem[\"jsonuidata\"] = {}\r\n                                        delete newItem['selected']\r\n                                        newItem.selected = true;\r\n                                        // newItem[\"jsondata\"]['worklist'] = item\r\n                                        // newItem[\"jsonuidata\"]['worklist'] = item\r\n                                        addedComponentList.push(newItem);\r\n                                }\r\n                                else {\r\n                                        addedComponentList = addedComponentList.filter(item1 => item1.ntransactiontestcode !== item.ntransactiontestcode)\r\n                                }\r\n                        }\r\n                        return item;\r\n                });\r\n                this.setState({\r\n                        addSelectAll: this.valiateCheckAll(process(addComponentDataList || [], this.state.dataState).data),\r\n                        addComponentDataList, addedComponentList,\r\n                        deleteSelectAll: this.valiateCheckAll(addedComponentList),\r\n                        addComponentDataListCopy: this.valiateCopy(this.state.addComponentSortedList || [], addComponentDataList || [], addedComponentList || [])\r\n                });\r\n        }\r\n\r\n        valiateCopy(sortedList, addComponentDataList, addedComponentList) {\r\n                let addedComponentLists = addedComponentList || this.state.addedComponentList || [];\r\n                let listData = this.props.addComponentDataLists || [];\r\n                let copyingList = listData.filter(item1 =>\r\n                        !sortedList.some(item2 => item1.ntransactiontestcode === item2.ntransactiontestcode)\r\n                ) || [];\r\n                let copyingListData = copyingList.map(item => {\r\n                        const existsInAddComponentDataList = addedComponentLists.some(\r\n                                item1 => item1.ntransactiontestcode === item.ntransactiontestcode\r\n                        );\r\n                        if (existsInAddComponentDataList) {\r\n                                return { ...item, selected: true };\r\n                        } else {\r\n                                return { ...item, selected: false };\r\n                        }\r\n                });\r\n                return copyingListData;\r\n        }\r\n        valiateCheckAll(data) {\r\n                let selectAll = true;\r\n                if (data && data.length > 0) {\r\n                        data.forEach(dataItem => {\r\n                                if (dataItem.selected) {\r\n                                        if (dataItem.selected === false) {\r\n                                                selectAll = false;\r\n                                        }\r\n                                } else {\r\n                                        selectAll = false;\r\n                                }\r\n                        })\r\n                } else {\r\n                        selectAll = false;\r\n                }\r\n                return selectAll;\r\n        }\r\n\r\n        handleClickDelete = (row) => {\r\n                let updatedAddList = [];\r\n                if (row) {\r\n                        const ntransactiontestcode = row && row.dataItem && row.dataItem.ntransactiontestcode;\r\n                        const updatedList = this.state.addComponentSortedList && this.state.addComponentSortedList.filter(\r\n                                (item) => item.ntransactiontestcode !== ntransactiontestcode\r\n                        );\r\n                        const exists = this.state.addComponentDataList && this.state.addComponentDataList.some(\r\n                                (item) => item.ntransactiontestcode === ntransactiontestcode\r\n                        );\r\n                        if (!exists) {\r\n                                updatedAddList = this.state.addComponentDataList && this.state.addComponentDataList.map(item => {\r\n                                        return item\r\n                                })\r\n                                // ALPD-5535 - delete json by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\r\n                                row.dataItem && row.dataItem.jsondata && delete row.dataItem.jsondata;\r\n                                row.dataItem && row.dataItem.jsonuidata && delete row.dataItem.jsonuidata;\r\n                                updatedAddList.push({ ...row.dataItem, selected: false });\r\n                        }\r\n                        this.props.childDataChange(updatedList);\r\n                        this.setState({\r\n                                addComponentDataList: updatedAddList, addComponentSortedList: updatedList,\r\n                                addComponentDataListCopy: this.valiateCopy(updatedList || [], updatedAddList || []),\r\n                                addSelectAll: this.valiateCheckAll(updatedAddList)\r\n                        })\r\n                }\r\n        }\r\n}\r\n\r\nexport default (injectIntl(AddWorklistSample));"]},"metadata":{},"sourceType":"module"}