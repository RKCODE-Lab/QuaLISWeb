{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Card,Nav,FormGroup,FormLabel}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPencilAlt,faTrashAlt,faThumbsUp,faUserLock,faClock,faList}from'@fortawesome/free-solid-svg-icons';//,faUserTimes, faTrash\nimport{connect}from'react-redux';import{injectIntl,FormattedMessage}from'react-intl';import{toast}from'react-toastify';import{callService,crudMaster,validateEsignCredential,updateStore,getDesignTemplateMappingDetail,getMappedFieldProps,getDesignTemplateMappingComboService,filterColumnData,reloadDesignTemplateMapping,getTMPFilterRegType,getTMPFilterRegSubType,getTMPFilterSubmit}from'../../actions';import TemplateFilter from'./TemplateFilter';import{ContentPanel,ReadOnlyText}from'../../components/App.styles';import{getControlMap,showEsign,convertDateValuetoString,constructOptionList}from'../../components/CommonScript';//searchData, sortData,\nimport ListMaster from'../../components/list-master/list-master.component';// import DateTimePicker from '../../components/date-time-picker/date-time-picker.component';\nimport SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import AddDesignTemplateMapping from'./AddDesignTemplateMapping';import Esign from'../../pages/audittrail/Esign';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import BreadcrumbComponent from'../../components/Breadcrumb.Component';import{ListWrapper}from'../../components/client-group.styles';import{designProperties,formCode,TemplateType,transactionStatus}from'../../components/Enumeration';import{Affix}from'rsuite';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import ReactTooltip from'react-tooltip';import ConfigureScreenFields from'./ConfigureScreenFields';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var DesignTemplateMapping=/*#__PURE__*/function(_React$Component){_inherits(DesignTemplateMapping,_React$Component);var _super=_createSuper(DesignTemplateMapping);function DesignTemplateMapping(props){var _this;_classCallCheck(this,DesignTemplateMapping);_this=_super.call(this,props);// const dataState = {\n//     skip: 0,\n//     take: 10,\n// };\n_this.filterComboChange=function(event,fieldname){if(event!==null){// let uRL = \"\";\nvar inputData=[];if(fieldname===\"sampleType\"){inputData={userinfo:_this.props.Login.userInfo,nflag:1,nsampletypecode:parseInt(event.value)};var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultsampletype:event});var inputParam={masterData:masterData,inputData:inputData};_this.props.getTMPFilterRegType(inputParam);}else if(fieldname===\"registrationType\"){inputData={userinfo:_this.props.Login.userInfo,nregtypecode:parseInt(event.value),nsampletypecode:_this.props.Login.masterData.defaultsampletype.value};var _masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultregtype:event});var _inputParam={masterData:_masterData,inputData:inputData};_this.props.getTMPFilterRegSubType(_inputParam);}else if(fieldname===\"registrationSubType\"){var _masterData2=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultregsubtype:event});var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:_masterData2}};_this.props.updateStore(updateInfo);}else{var _masterData3=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultform:event});var _updateInfo={typeName:DEFAULT_RETURN,data:{masterData:_masterData3}};_this.props.updateStore(_updateInfo);}}};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputData={userinfo:_this.props.Login.userInfo// nregtypecode: parseInt(this.props.Login.masterData.realRegTypeValue ? this.props.Login.masterData.realRegTypeValue.value || -1 : -1),\n// nregsubtypecode: parseInt(this.props.Login.masterData.realRegSubTypeValue ? this.props.Login.masterData.realRegSubTypeValue.value || -1 : -1),\n// nsampletypecode: this.props.Login.masterData.realSampleValue.value,\n};var inputParam={masterData:_this.props.Login.masterData,inputData:inputData};_this.props.reloadDesignTemplateMapping(inputParam);};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};_this.onFilterSubmit=function(){var inputData={userinfo:_this.props.Login.userInfo,nregtypecode:parseInt(_this.props.Login.masterData.defaultregtype?_this.props.Login.masterData.defaultregtype.value||-1:-1),nregsubtypecode:parseInt(_this.props.Login.masterData.defaultregsubtype?_this.props.Login.masterData.defaultregsubtype.value||-1:-1),nsampletypecode:_this.props.Login.masterData.defaultsampletype.value,nformcode:_this.props.Login.masterData.defaultform?_this.props.Login.masterData.defaultform.value||-1:-1};var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{realSampleValue:_this.props.Login.masterData.defaultsampletype,realFormValue:_this.props.Login.masterData.defaultform,realRegTypeValue:_this.props.Login.masterData.defaultregtype,realRegSubTypeValue:_this.props.Login.masterData.defaultregsubtype});var inputParam={masterData:masterData,inputData:inputData};_this.props.getTMPFilterSubmit(inputParam);};_this.onApproveClick=function(){if(_this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus!==transactionStatus.RETIRED){var _inputParam2;var ncontrolCode=_this.state.controlMap.has(\"ApproveDesignTemplateMapping\")&&_this.state.controlMap.get(\"ApproveDesignTemplateMapping\").ncontrolcode;var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam=undefined;inputData[\"designtemplatemapping\"]={\"ndesigntemplatemappingcode\":_this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"]?_this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"].Value:\"\"};inputData[\"designtemplatemapping\"]=_this.props.Login.masterData.selectedDesignTemplateMapping;postParam={inputListName:\"DesignTemplateMapping\",selectedObject:\"selectedDesignTemplateMapping\",primaryKeyField:\"ndesigntemplatemappingcode\"};var inputParam=(_inputParam2={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:'designtemplatemapping',methodUrl:\"DesignTemplateMapping\"},_defineProperty(_inputParam2,\"inputData\",inputData),_defineProperty(_inputParam2,\"operation\",\"approve\"),_defineProperty(_inputParam2,\"postParam\",postParam),_inputParam2);var saveType;var masterData=_this.props.Login.masterData;var esignNeeded=showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType,openModal:true,operation:\"approve\"}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_TEMPLATERETIRED\"}));}};_this.ConfirmDelete=function(){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.deleteTemplate();});};_this.deleteTemplate=function(){if(_this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus===transactionStatus.DRAFT){var _inputParam3;var ncontrolCode=_this.state.controlMap.has(\"DeleteDesignTemplateMapping\")&&_this.state.controlMap.get(\"DeleteDesignTemplateMapping\").ncontrolcode;var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam=undefined;inputData[\"designtemplatemapping\"]={\"ndesigntemplatemappingcode\":_this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"]?_this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"].Value:\"\"};inputData[\"designtemplatemapping\"]=_this.props.Login.masterData.selectedDesignTemplateMapping;postParam={inputListName:\"DesignTemplateMapping\",selectedObject:\"selectedDesignTemplateMapping\",primaryKeyField:\"ndesigntemplatemappingcode\"};var inputParam=(_inputParam3={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:'designtemplatemapping',methodUrl:\"DesignTemplateMapping\"},_defineProperty(_inputParam3,\"inputData\",inputData),_defineProperty(_inputParam3,\"operation\",\"delete\"),_defineProperty(_inputParam3,\"postParam\",postParam),_inputParam3);var saveType;var masterData=_this.props.Login.masterData;var esignNeeded=showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType,openModal:true,operation:\"delete\"}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDRAFTRECORDTODELETE\"}));}};_this.openFieldConfiguration=function(controlCode){var openModal=true;var operation='configure';var ncontrolcode=controlCode;var screenName=\"IDS_FIELDS\";var inputParam={inputData:{designtemplatemapping:{ndesigntemplatemappingcode:_this.props.Login.masterData.selectedDesignTemplateMapping.ndesigntemplatemappingcode},userinfo:_this.props.Login.userInfo},operation:operation,ncontrolcode:ncontrolcode,screenName:screenName};_this.props.getMappedFieldProps(inputParam);};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"approve\"||_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;}}else{openModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.handleDateChange=function(dateName,dateValue){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.getGridJsondata=function(templatedata){var gridItem=[];var gridMoreItem=[];var masterdatefields=[];var editable=[];var jdynamiccolumns=[];var jnumericcolumns=[];var templatePrimaryKey=\"\";templatedata&&templatedata.map(function(row){return row.children&&row.children.map(function(column){column.children&&column.children.map(function(component,index){if(component.hasOwnProperty('children')){component.children.map(function(componentRow){var _masterdatefields$pus;templatePrimaryKey=templatePrimaryKey===\"\"&&index===0?componentRow.label:templatePrimaryKey;jdynamiccolumns.push({columnname:componentRow.label,displayname:componentRow.displayname});if(componentRow.inputtype==='combo'){jnumericcolumns.push({\"columnname\":componentRow.displaymember,\"displayname\":componentRow.displayname,\"foriegntablePK\":componentRow.label,// \"ismultilingual\": true,\n// \"conditionstring\": \" and nformcode in (\"+componentRow.table.item.nformcode+\") \",\n\"tablecolumnname\":componentRow.valuemember,\"foriegntablename\":componentRow.source});}// samplesearchfields.push(componentRow.label)\ncomponentRow.inputtype==='date'&&masterdatefields.push((_masterdatefields$pus={},_defineProperty(_masterdatefields$pus,designProperties.VALUE,componentRow.label),_defineProperty(_masterdatefields$pus,\"dateonly\",componentRow.dateonly||false),_masterdatefields$pus));// displayFields.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label });\n// componentRow.templatemandatory && listItem.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label })\nif(componentRow.mandatory||componentRow.templatemandatory){var _gridItem$push;gridItem.push((_gridItem$push={},_defineProperty(_gridItem$push,designProperties.LABEL,componentRow.displayname),_defineProperty(_gridItem$push,designProperties.VALUE,componentRow.label),_gridItem$push));}else{var _gridMoreItem$push;gridMoreItem.push((_gridMoreItem$push={},_defineProperty(_gridMoreItem$push,designProperties.LABEL,componentRow.displayname),_defineProperty(_gridMoreItem$push,designProperties.VALUE,componentRow.label),_gridMoreItem$push));}if(!componentRow.templatemandatory){editable.push({label:componentRow.label,editableuntill:[8]});}return null;});}else{var _masterdatefields$pus2;templatePrimaryKey=templatePrimaryKey===\"\"&&index===0?component.label:templatePrimaryKey;jdynamiccolumns.push({columnname:component.label,displayname:component.displayname});if(component.inputtype==='combo'){jnumericcolumns.push({\"columnname\":component.label,\"displayname\":component.displayname,\"foriegntablePK\":component.label,// \"ismultilingual\": true,\n\"conditionstring\":\" and nformcode in (\"+component.table.item.nformcode+\") \",\"tablecolumnname\":component.column.value,\"foriegntablename\":\"dynamicmasters\"});}// samplesearchfields.push(component.label)\ncomponent.inputtype==='date'&&masterdatefields.push((_masterdatefields$pus2={},_defineProperty(_masterdatefields$pus2,designProperties.VALUE,component.label),_defineProperty(_masterdatefields$pus2,\"dateonly\",component.dateonly||false),_masterdatefields$pus2));// displayFields.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label })\n// component.templatemandatory && listItem.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label })\nif(component.mandatory||component.templatemandatory){var _gridItem$push2;gridItem.push((_gridItem$push2={},_defineProperty(_gridItem$push2,designProperties.LABEL,component.displayname),_defineProperty(_gridItem$push2,designProperties.VALUE,component.label),_gridItem$push2));}else{var _gridMoreItem$push2;gridMoreItem.push((_gridMoreItem$push2={},_defineProperty(_gridMoreItem$push2,designProperties.LABEL,component.displayname),_defineProperty(_gridMoreItem$push2,designProperties.VALUE,component.label),_gridMoreItem$push2));}if(!component.templatemandatory){editable.push({label:component.label,editableuntill:[8]});}return null;}});});});var jsondata={gridItem:gridItem,gridMoreItem:gridMoreItem,masterdatefields:masterdatefields,editable:editable};return{jsondata:jsondata,jdynamiccolumns:jdynamiccolumns,jnumericcolumns:jnumericcolumns,templatePrimaryKey:templatePrimaryKey};};_this.getJsondata=function(templatedata){var _ref,_ref2,_displayFields$push3,_jsondata;var displayFields=[];var listItem=[];var gridItem=[];var gridMoreItem=[];var editable=[];var subsampleeditable=[];var subsamplelistitem=[];var sampledatefields=[(_ref={},_defineProperty(_ref,designProperties.VALUE,'dregdate'),_defineProperty(_ref,\"dateonly\",false),_ref)];var sampledateconstraints=[];var subsampledatefields=[];var subsampledateconstraints=[];var samplesearchfields=[];var subsamplesearchfields=[];var sampletemplatefields=[];var subsampletemplatefields=[];var jdynamiccolumns=[];var jnumericcolumns=[];var testdatefields=[(_ref2={},_defineProperty(_ref2,designProperties.VALUE,'dtransactiondate'),_defineProperty(_ref2,\"dateonly\",false),_ref2)];_this.state.selectedRecord.nsubsampletemplatecode&&_this.state.selectedRecord.nsubsampletemplatecode.item.jsondata.map(function(row){return row.children&&row.children.map(function(column){column.children&&column.children.map(function(component){if(component.hasOwnProperty('children')){component.children.map(function(componentRow){var _subsamplelistitem$pu;subsamplesearchfields.push(componentRow.label);subsampleeditable.push({label:componentRow.label,editableuntill:[17]});if(componentRow.inputtype==='date'){var _subsampledatefields$;subsampledatefields.push((_subsampledatefields$={},_defineProperty(_subsampledatefields$,designProperties.VALUE,componentRow.label),_defineProperty(_subsampledatefields$,\"dateonly\",componentRow.dateonly||false),_subsampledatefields$));subsampledateconstraints=componentRow.dateConstraintArraySQL?[].concat(_toConsumableArray(componentRow.dateConstraintArraySQL),_toConsumableArray(subsampledateconstraints)):subsampledateconstraints;}subsamplelistitem.push((_subsamplelistitem$pu={},_defineProperty(_subsamplelistitem$pu,designProperties.LABEL,componentRow.displayname),_defineProperty(_subsamplelistitem$pu,designProperties.VALUE,componentRow.label),_subsamplelistitem$pu));});}else{var _subsamplelistitem$pu2;subsamplesearchfields.push(component.label);subsampleeditable.push({label:component.label,editableuntill:[17]});if(component.inputtype==='date'){var _subsampledatefields$2;subsampledatefields.push((_subsampledatefields$2={},_defineProperty(_subsampledatefields$2,designProperties.VALUE,component.label),_defineProperty(_subsampledatefields$2,\"dateonly\",component.dateonly||false),_subsampledatefields$2));subsampledateconstraints=component.dateConstraintArraySQL?[].concat(_toConsumableArray(component.dateConstraintArraySQL),_toConsumableArray(subsampledateconstraints)):subsampledateconstraints;}subsamplelistitem.push((_subsamplelistitem$pu2={},_defineProperty(_subsamplelistitem$pu2,designProperties.LABEL,component.displayname),_defineProperty(_subsamplelistitem$pu2,designProperties.VALUE,component.label),_subsamplelistitem$pu2));}});});});templatedata&&templatedata.map(function(row){return row.children&&row.children.map(function(column){column.children&&column.children.map(function(component){if(component.hasOwnProperty('children')){// let combinedField = [];\ncomponent.children.map(function(componentRow){var _sampletemplatefields,_displayFields$push,_listItem$push;// combinedField.push(componentRow.label)\njdynamiccolumns.push({columnname:componentRow.label,displayname:componentRow.displayname});if(componentRow.hasOwnProperty('child')){componentRow.child.map(function(childData){jnumericcolumns.push({\"columnname\":componentRow.label,\"displayname\":componentRow.displayname,\"foriegntablePK\":componentRow.label,// \"ismultilingual\": true,\n// \"conditionstring\": \" and nformcode in (140) \",\n\"tablecolumnname\":childData.tablecolumnname,\"foriegntablename\":\"dynamicmasters\"});});}samplesearchfields.push(componentRow.label);sampletemplatefields.push((_sampletemplatefields={},_defineProperty(_sampletemplatefields,designProperties.LABEL,componentRow.displayname),_defineProperty(_sampletemplatefields,designProperties.VALUE,componentRow.label),_sampletemplatefields));if(componentRow.inputtype==='date'){var _sampledatefields$pus;sampledatefields.push((_sampledatefields$pus={},_defineProperty(_sampledatefields$pus,designProperties.VALUE,componentRow.label),_defineProperty(_sampledatefields$pus,\"dateonly\",componentRow.dateonly||false),_sampledatefields$pus));sampledateconstraints=componentRow.dateConstraintArraySQL?[].concat(_toConsumableArray(componentRow.dateConstraintArraySQL),_toConsumableArray(sampledateconstraints)):sampledateconstraints;}displayFields.push((_displayFields$push={},_defineProperty(_displayFields$push,designProperties.LABEL,componentRow.displayname),_defineProperty(_displayFields$push,designProperties.VALUE,componentRow.label),_displayFields$push));componentRow.templatemandatory&&listItem.push((_listItem$push={},_defineProperty(_listItem$push,designProperties.LABEL,componentRow.displayname),_defineProperty(_listItem$push,designProperties.VALUE,componentRow.label),_listItem$push));if(componentRow.mandatory||componentRow.templatemandatory){var _gridItem$push3;gridItem.push((_gridItem$push3={},_defineProperty(_gridItem$push3,designProperties.LABEL,componentRow.displayname),_defineProperty(_gridItem$push3,designProperties.VALUE,componentRow.label),_gridItem$push3));}else{var _gridMoreItem$push3;gridMoreItem.push((_gridMoreItem$push3={},_defineProperty(_gridMoreItem$push3,designProperties.LABEL,componentRow.displayname),_defineProperty(_gridMoreItem$push3,designProperties.VALUE,componentRow.label),_gridMoreItem$push3));}if(!componentRow.templatemandatory){editable.push({label:componentRow.label,editableuntill:[17]});}return null;});// let fieldSet = combinedField.join(\"&\")\n// displayFields.push(fieldSet);\n// componentRow.templatemandatory && listItem.push(fieldSet)\n// gridMoreItem.push(fieldSet);\n}else{var _sampletemplatefields2,_displayFields$push2,_listItem$push2;jdynamiccolumns.push({columnname:component.label,displayname:component.displayname});if(component.hasOwnProperty('child')){component.child.map(function(childData){jnumericcolumns.push({\"columnname\":component.label,\"displayname\":component.displayname,\"foriegntablePK\":component.label,// \"ismultilingual\": true,\n// \"conditionstring\": \" and nformcode in (140) \",\n\"tablecolumnname\":childData.tablecolumnname,\"foriegntablename\":\"dynamicmasters\"});});}samplesearchfields.push(component.label);sampletemplatefields.push((_sampletemplatefields2={},_defineProperty(_sampletemplatefields2,designProperties.LABEL,component.displayname),_defineProperty(_sampletemplatefields2,designProperties.VALUE,component.label),_sampletemplatefields2));if(component.inputtype==='date'){var _sampledatefields$pus2;sampledatefields.push((_sampledatefields$pus2={},_defineProperty(_sampledatefields$pus2,designProperties.VALUE,component.label),_defineProperty(_sampledatefields$pus2,\"dateonly\",component.dateonly||false),_sampledatefields$pus2));sampledateconstraints=component.dateConstraintArraySQL?[].concat(_toConsumableArray(component.dateConstraintArraySQL),_toConsumableArray(sampledateconstraints)):sampledateconstraints;}displayFields.push((_displayFields$push2={},_defineProperty(_displayFields$push2,designProperties.LABEL,component.displayname),_defineProperty(_displayFields$push2,designProperties.VALUE,component.label),_displayFields$push2));component.templatemandatory&&listItem.push((_listItem$push2={},_defineProperty(_listItem$push2,designProperties.LABEL,component.displayname),_defineProperty(_listItem$push2,designProperties.VALUE,component.label),_listItem$push2));if(component.mandatory||component.templatemandatory){var _gridItem$push4;gridItem.push((_gridItem$push4={},_defineProperty(_gridItem$push4,designProperties.LABEL,component.displayname),_defineProperty(_gridItem$push4,designProperties.VALUE,component.label),_gridItem$push4));}else{var _gridMoreItem$push4;gridMoreItem.push((_gridMoreItem$push4={},_defineProperty(_gridMoreItem$push4,designProperties.LABEL,component.displayname),_defineProperty(_gridMoreItem$push4,designProperties.VALUE,component.label),_gridMoreItem$push4));}if(!component.templatemandatory){editable.push({label:component.label,editableuntill:[17]});}return null;}});});});displayFields.push((_displayFields$push3={},_defineProperty(_displayFields$push3,designProperties.LABEL,{\"en-US\":\"Reg Date\"}),_defineProperty(_displayFields$push3,designProperties.VALUE,'dregdate'),_displayFields$push3));var obj=_objectSpread({sampledisplayfields:displayFields,samplelistitem:listItem,samplegriditem:gridItem,samplegridmoreitem:gridMoreItem,subsamplelistitem:subsamplelistitem,sampledatefields:sampledatefields,subsampledatefields:subsampledatefields,samplesearchfields:samplesearchfields,subsamplesearchfields:subsamplesearchfields,testdatefields:testdatefields,sampledateconstraints:sampledateconstraints,subsampledateconstraints:subsampledateconstraints},_this.props.Login.testListFields);var jsondata=(_jsondata={sampletemplatefields:sampletemplatefields,subsampletemplatefields:subsamplesearchfields},_defineProperty(_jsondata,formCode.SAMPLEREGISTRATION,_objectSpread(_objectSpread({},obj),{},{sampleeditable:editable,subsampleeditable:subsampleeditable})),_defineProperty(_jsondata,formCode.RESULTENTRY,_objectSpread({},obj)),_defineProperty(_jsondata,formCode.APPROVAL,_objectSpread({},obj)),_defineProperty(_jsondata,formCode.JOBALLOCATION,_objectSpread({},obj)),_defineProperty(_jsondata,formCode.MYJOBS,_objectSpread({},obj)),_jsondata);return jsondata;};_this.onChangeToggle=function(event,dataItem,field,dataIndex,formCode){var designData=_this.props.Login.designData;var dataResult=_this.props.Login.dataResult;dataResult[formCode][dataIndex][field]=event.target.checked;if(event.target.checked){if(field==='samplelistitem'&&designData[formCode][field].length>=6){return toast.warn(_this.props.intl.formatMessage({id:\"IDS_MAXIMUMSELECTIONEXCEEDS\"}));}else{designData[formCode][field].splice(dataIndex,0,dataItem.realData);}if(field==='sampledisplayfields'){designData[formCode]['samplesearchfields'].splice(dataIndex,0,dataItem.label);}}else{if(field==='sampledisplayfields'){designData[formCode]['samplesearchfields'].splice(designData[formCode]['samplesearchfields'].findIndex(function(x){return x===dataItem.label;}),1);}designData[formCode][field].splice(designData[formCode][field].findIndex(function(x){return x[designProperties.VALUE]===dataItem.label;}),1);}var updateInfo={typeName:DEFAULT_RETURN,data:{designData:designData,dataResult:dataResult}};_this.props.updateStore(updateInfo);};_this.onSaveClick=function(saveType,formRef){var inputData=[];if(_this.props.Login.operation==='configure'){inputData={designtemplatemapping:{ndesigntemplatemappingcode:_this.props.Login.masterData.selectedDesignTemplateMapping.ndesigntemplatemappingcode,jsondataobj:_this.props.Login.designData},userinfo:_this.props.Login.userInfo};}else{var _ref3=_this.props.Login.masterData.realSampleValue.value===4?_this.getGridJsondata(_this.state.selectedRecord.nreactregtemplatecode.item.jsondata):{},jsondata=_ref3.jsondata,jdynamiccolumns=_ref3.jdynamiccolumns,jnumericcolumns=_ref3.jnumericcolumns,templatePrimaryKey=_ref3.templatePrimaryKey;inputData={\"userinfo\":_this.props.Login.userInfo,\"ncontrolcode\":_this.props.Login.ncontrolCode,\"nreactregtemplatecode\":_this.state.selectedRecord.nreactregtemplatecode.value,\"nsampletypecode\":_this.props.Login.masterData.realSampleValue.value,\"nregtypecode\":_this.props.Login.masterData.realRegTypeValue?_this.props.Login.masterData.realRegTypeValue.value:-1,\"nregsubtypecode\":_this.props.Login.masterData.realRegSubTypeValue?_this.props.Login.masterData.realRegSubTypeValue.value:-1,\"nformcode\":_this.props.Login.masterData.realFormValue?_this.props.Login.masterData.realFormValue.value:-1,\"nsubsampletemplatecode\":_this.state.selectedRecord.nsubsampletemplatecode?_this.state.selectedRecord.nsubsampletemplatecode.value:-1,\"jsondataobj\":_this.props.Login.masterData.realSampleValue.value===4?jsondata:_this.getJsondata(_this.state.selectedRecord.nreactregtemplatecode.item.jsondata)};inputData[\"designtemplatemapping\"]={\"nsitecode\":_this.props.Login.userInfo.nmastersitecode};if(_this.props.Login.masterData.realFormValue&&_this.props.Login.masterData.realFormValue.value===-2){var qf_jsonData={sdisplayname:{}};var qbt_jsonData={tablename:{}};_this.props.Login.languageList.map(function(lang){qf_jsonData['sdisplayname'][lang.value]=_this.state.selectedRecord.sformname;qbt_jsonData['tablename'][lang.value]=_this.state.selectedRecord.sformname;});inputData=_objectSpread(_objectSpread({},inputData),{},{sformname:_this.state.selectedRecord.sformname,qf_jsonData:qf_jsonData,qbt_jsonData:qbt_jsonData,sprimarykeyname:templatePrimaryKey,jdynamiccolumns:jdynamiccolumns,jnumericcolumns:jnumericcolumns});}// this.designtemplatemappingFieldList.map(item => {\n//     return inputData[\"designtemplatemapping\"][item] = this.state.selectedRecord[item]\n// });\n}var postParam=undefined;var inputParam={classUrl:\"designtemplatemapping\",methodUrl:\"DesignTemplateMapping\",inputData:inputData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.state={isOpen:false,designtemplatemappingData:[],masterStatus:\"\",error:\"\",selectedRecord:{},operation:\"\",screenName:undefined,userLogged:true,selectedDesignTemplateMapping:undefined,userRoleControlRights:[],controlMap:new Map(),showAccordian:true,selectedInput:\"\"};_this.searchRef=React.createRef();_this.confirmMessage=new ConfirmMessage();_this.searchFieldList=[\"sregtemplatename\",\"sversionno\",\"stransdisplaystatus\"];_this.designtemplatemappingFieldList=['ndesigntemplatemappingcode','nsampletypecode','nformcode','nregtypecode','nregsubtypecode','nformwisetypecode','nreactregtemplatecode','ntransactionstatus','nversionno'];//'nmahcode',\nreturn _this;}_createClass(DesignTemplateMapping,[{key:\"render\",value:function render(){var _this2=this;var Layout=this.props.Login.masterData.selectedDesignTemplateMapping&&this.props.Login.masterData.selectedDesignTemplateMapping.jsondata;var userStatusCSS=\"outline-secondary\";if(this.props.Login.masterData.selectedDesignTemplateMapping?this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus===transactionStatus.ACTIVE||this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus===transactionStatus.APPROVED:false){userStatusCSS=\"outline-success\";}else if(this.props.Login.masterData.selectedDesignTemplateMapping&&this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus===transactionStatus.RETIRED){userStatusCSS=\"outline-danger\";}var addId=this.state.controlMap.has(\"AddDesignTemplateMapping\")&&this.state.controlMap.get(\"AddDesignTemplateMapping\").ncontrolcode;var deleteId=this.state.controlMap.has(\"DeleteDesignTemplateMapping\")&&this.state.controlMap.get(\"DeleteDesignTemplateMapping\").ncontrolcode;var approveId=this.state.controlMap.has(\"ApproveDesignTemplateMapping\")&&this.state.controlMap.get(\"ApproveDesignTemplateMapping\").ncontrolcode;var filterParam={inputListName:\"DesignTemplateMapping\",selectedObject:\"selectedDesignTemplateMapping\",primaryKeyField:\"ndesigntemplatemappingcode\",fetchUrl:\"designtemplatemapping/getDesignTemplateMapping\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,// unchangeList: [\"FromDate\", \"ToDate\"],\nsearchFieldList:this.searchFieldList};this.validationColumnList=[{\"idsName\":\"IDS_TEMPLATENAME\",\"dataField\":\"nreactregtemplatecode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];var mandatoryFields=[];this.validationColumnList.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});// let breadCrumbDataDate = convertDateValuetoString(this.props.Login.masterData && this.props.Login.masterData.FromDate,\n//     this.props.Login.masterData && this.props.Login.masterData.ToDate,\n//     this.props.Login.userInfo)\n// const breadCrumbData = [\nvar breadCrumbData=[];this.props.Login.masterData[\"realSampleValue\"]&&this.props.Login.masterData[\"realSampleValue\"].value===4?breadCrumbData=[{\"label\":\"IDS_SAMPLETYPE\",\"value\":this.props.Login.masterData.realSampleValue?this.props.Login.masterData.realSampleValue.label:\"-\"},{\"label\":\"IDS_SCREEN\",\"value\":this.props.Login.masterData.realFormValue?this.props.Login.masterData.realFormValue.label:\"-\"}]:breadCrumbData=[{\"label\":\"IDS_SAMPLETYPE\",\"value\":this.props.Login.masterData.realSampleValue?this.props.Login.masterData.realSampleValue.label:\"-\"},{\"label\":\"IDS_REGTYPE\",\"value\":this.props.Login.masterData.realRegTypeValue?this.props.Login.masterData.realRegTypeValue.label:\"-\"},{\"label\":\"IDS_REGSUBTYPE\",\"value\":this.props.Login.masterData.realRegSubTypeValue?this.props.Login.masterData.realRegSubTypeValue.label:\"-\"}];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ListWrapper,{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},/*#__PURE__*/React.createElement(ReactTooltip,{place:\"bottom\",globalEventOff:\"click\",id:\"tooltip_list_wrap\"}),breadCrumbData.length>0?/*#__PURE__*/React.createElement(Affix,{top:53},/*#__PURE__*/React.createElement(BreadcrumbComponent,{breadCrumbItem:breadCrumbData})):\"\",/*#__PURE__*/React.createElement(ReactTooltip,{place:\"bottom\",globalEventOff:\"click\",id:\"tooltip_list_wrap\"}),/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster,{formatMessage:this.props.intl.formatMessage,screenName:\"DesignTemplateMapping\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.DesignTemplateMapping,getMasterDetail:function getMasterDetail(designtemplatemapping){return _this2.props.getDesignTemplateMappingDetail(designtemplatemapping,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:this.props.Login.masterData.selectedDesignTemplateMapping,primaryKeyField:\"ndesigntemplatemappingcode\",mainField:\"sregtemplatename\",firstField:\"sversionno\",secondField:\"stransdisplaystatus\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData,hidePaging:true,openModal:function openModal(){return _this2.props.getDesignTemplateMappingComboService(\"DesignTemplateMapping\",\"create\",_this2.props.Login.userInfo,_this2.props.Login.masterData.realSampleValue?_this2.props.Login.masterData.realSampleValue.value:-1,_this2.props.Login.masterData.realRegTypeValue?_this2.props.Login.masterData.realRegTypeValue.value:-1,_this2.props.Login.masterData.realRegSubTypeValue?_this2.props.Login.masterData.realRegSubTypeValue.value:-1,addId);},showFilterIcon:true,showFilter:this.props.Login.showFilter,openFilter:this.openFilter,closeFilter:this.closeFilter,onFilterSubmit:this.onFilterSubmit,filterComponent:[{\"IDS_TEMPLATEFILTER\":/*#__PURE__*/React.createElement(TemplateFilter,{formatMessage:this.props.intl.formatMessage,filterSampletype:this.state.listSampletype||[],filterRegistrationType:this.state.listRegistrationType||[],filterRegistrationSubType:this.state.listRegistrationSubType||[],filterForms:this.state.listForms||[],defaultsampletype:this.props.Login.masterData[\"defaultsampletype\"]||{},defaultregsubtype:this.props.Login.masterData[\"defaultregsubtype\"]||[],defaultregtype:this.props.Login.masterData[\"defaultregtype\"]||[],defaultform:this.props.Login.masterData.defaultform||[],filterComboChange:this.filterComboChange})}]})),/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},this.props.Login.masterData.DesignTemplateMapping&&this.props.Login.masterData.DesignTemplateMapping.length>0&&this.props.Login.masterData.selectedDesignTemplateMapping?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,null,/*#__PURE__*/React.createElement(\"h1\",{className:\"product-title-main\"},this.props.Login.masterData.selectedDesignTemplateMapping.sregtemplatename)),/*#__PURE__*/React.createElement(Card.Subtitle,{className:\"text-muted font-weight-normal\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:10,className:\"d-flex\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"},\"\".concat(this.props.intl.formatMessage({id:\"IDS_VERSION\"}),\" : \").concat(this.props.Login.masterData.selectedDesignTemplateMapping.sversionno),/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-outlined \".concat(this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus===transactionStatus.DRAFT?\"outline-secondary\":this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus===transactionStatus.APPROVED?\"outline-success\":\"outline-danger\",\" btn-sm mx-md-3 mx-sm-2\")},this.props.Login.masterData.selectedDesignTemplateMapping.stransdisplaystatus))),/*#__PURE__*/React.createElement(Col,{md:2},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category float-right icon-group-wrap\"},/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2\",hidden:this.state.userRoleControlRights.indexOf(approveId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_APPROVE\"}),\"data-for\":\"tooltip_list_wrap\",onClick:function onClick(){return _this2.onApproveClick();}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faThumbsUp,title:this.props.intl.formatMessage({id:\"IDS_APPROVE\"})})),this.props.Login.masterData.realSampleValue&&this.props.Login.masterData.realSampleValue.value!==TemplateType.Masters?/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2\",hidden:this.state.userRoleControlRights.indexOf(approveId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_CONFIGUREFIELDS\"}),\"data-for\":\"tooltip_list_wrap\",onClick:function onClick(){return _this2.openFieldConfiguration(approveId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faList,title:this.props.intl.formatMessage({id:\"IDS_CONFIGUREFIELDS\"})})):\"\",/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"}),\"data-for\":\"tooltip_list_wrap\",hidden:this.state.userRoleControlRights.indexOf(deleteId)===-1// onClick={() => this.ConfirmDelete(this.state.approveId)}>\n,onClick:function onClick(){return _this2.ConfirmDelete();}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt}))))))),/*#__PURE__*/React.createElement(Card.Body,null,Layout?Layout.map(function(item){return/*#__PURE__*/React.createElement(Row,null,item.children.length>0?item.children.map(function(column){return/*#__PURE__*/React.createElement(Col,{md:12/item.children.length},column.children.map(function(component){return component.hasOwnProperty(\"children\")?/*#__PURE__*/React.createElement(Row,null,component.children.map(function(componentrow){return/*#__PURE__*/React.createElement(Col,{md:12/componentrow.length},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,componentrow.label),/*#__PURE__*/React.createElement(ReadOnlyText,null,\"-\")));})):/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,component.label),/*#__PURE__*/React.createElement(ReadOnlyText,null,\" \",\"-\"));}));}):\"\");}):\"\")):\"\"))))),this.props.Login.openModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,size:this.props.Login.operation==='configure'?\"xl\":\"lg\",closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:this.props.Login.operation==='configure'?[]:mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,formatMessage:this.props.intl.formatMessage,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.operation==='configure'?/*#__PURE__*/React.createElement(ConfigureScreenFields,{designData:this.props.Login.designData||{},inputParam:this.props.Login.inputParam,dataResult:this.props.Login.dataResult||{},onChangeToggle:this.onChangeToggle}):/*#__PURE__*/React.createElement(AddDesignTemplateMapping,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,handleDateChange:this.handleDateChange,formatMessage:this.props.intl.formatMessage,designtemplatemappingList:this.props.Login.designtemplatemappingList,subSampleTemplateList:this.props.Login.subSampleTemplateList,selectedDesignTemplateMapping:this.props.Login.masterData.selectedDesignTemplateMapping||{},operation:this.props.Login.operation,userLogged:this.props.Login.userLogged,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,nformcode:this.props.Login.masterData.realFormValue?this.props.Login.masterData.realFormValue.value:-1,needSubSample:this.props.Login.masterData.realRegSubTypeValue?this.props.Login.masterData.realRegSubTypeValue.item.nneedsubsample:false})}));}// onFilterSubmit = () => {\n//     this.reloadData()\n// }\n},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var updateState=false;var _this$state=this.state,selectedRecord=_this$state.selectedRecord,userRoleControlRights=_this$state.userRoleControlRights,controlMap=_this$state.controlMap,listSampletype=_this$state.listSampletype,listRegistrationType=_this$state.listRegistrationType,listRegistrationSubType=_this$state.listRegistrationSubType,listForms=_this$state.listForms;if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);updateState=true;}}if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){updateState=true;selectedRecord=this.props.Login.selectedRecord;}if(this.props.Login.masterData!==previousProps.Login.masterData){updateState=true;var selectedInput={};var Taglstsampletype;var TaglistRegistrationType;var TaglistRegistrationSubType;var ListFormsMap;if(this.props.Login.masterData.SampleTypes){Taglstsampletype=constructOptionList(this.props.Login.masterData.SampleTypes||[],\"nsampletypecode\",\"ssampletypename\",\"nsorter\",\"undefined\",undefined);listSampletype=Taglstsampletype.get(\"OptionList\");}if(this.props.Login.masterData.registrationTypes){TaglistRegistrationType=constructOptionList(this.props.Login.masterData.registrationTypes||[],\"nregtypecode\",\"sregtypename\",undefined,undefined,undefined);listRegistrationType=TaglistRegistrationType.get(\"OptionList\");}if(this.props.Login.masterData.registrationSubTypes){TaglistRegistrationSubType=constructOptionList(this.props.Login.masterData.registrationSubTypes||[],\"nregsubtypecode\",\"sregsubtypename\",\"nsorter\",\"ascending\",undefined);listRegistrationSubType=TaglistRegistrationSubType.get(\"OptionList\");}if(this.props.Login.masterData.qualisforms){ListFormsMap=constructOptionList(this.props.Login.masterData.qualisforms||[],\"nformcode\",\"sdisplayname\",undefined,undefined,undefined);listForms=ListFormsMap.get(\"OptionList\");}if(updateState){this.setState({selectedRecord:selectedRecord,controlMap:controlMap,userRoleControlRights:userRoleControlRights,listSampletype:listSampletype,listRegistrationType:listRegistrationType,listRegistrationSubType:listRegistrationSubType,selectedInput:selectedInput,listForms:listForms});}}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:[],inputParam:undefined,operation:null,modalName:undefined}};this.props.updateStore(updateInfo);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return DesignTemplateMapping;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,updateStore:updateStore,getDesignTemplateMappingDetail:getDesignTemplateMappingDetail,getMappedFieldProps:getMappedFieldProps,getDesignTemplateMappingComboService:getDesignTemplateMappingComboService,filterColumnData:filterColumnData,reloadDesignTemplateMapping:reloadDesignTemplateMapping,getTMPFilterRegType:getTMPFilterRegType,getTMPFilterRegSubType:getTMPFilterRegSubType,getTMPFilterSubmit:getTMPFilterSubmit})(injectIntl(DesignTemplateMapping));","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/pages/designtemplatemapping/DesignTemplateMapping.jsx"],"names":["React","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faPencilAlt","faTrashAlt","faThumbsUp","faUserLock","faClock","faList","connect","injectIntl","FormattedMessage","toast","callService","crudMaster","validateEsignCredential","updateStore","getDesignTemplateMappingDetail","getMappedFieldProps","getDesignTemplateMappingComboService","filterColumnData","reloadDesignTemplateMapping","getTMPFilterRegType","getTMPFilterRegSubType","getTMPFilterSubmit","TemplateFilter","ContentPanel","ReadOnlyText","getControlMap","showEsign","convertDateValuetoString","constructOptionList","ListMaster","SlideOutModal","AddDesignTemplateMapping","Esign","DEFAULT_RETURN","BreadcrumbComponent","ListWrapper","designProperties","formCode","TemplateType","transactionStatus","Affix","ConfirmMessage","ReactTooltip","ConfigureScreenFields","mapStateToProps","state","Login","DesignTemplateMapping","props","filterComboChange","event","fieldname","inputData","userinfo","userInfo","nflag","nsampletypecode","parseInt","value","masterData","defaultsampletype","inputParam","nregtypecode","defaultregtype","defaultregsubtype","updateInfo","typeName","data","defaultform","reloadData","searchRef","current","openFilter","showFilter","closeFilter","onFilterSubmit","nregsubtypecode","nformcode","realSampleValue","realFormValue","realRegTypeValue","realRegSubTypeValue","onApproveClick","selectedDesignTemplateMapping","ntransactionstatus","RETIRED","ncontrolCode","controlMap","has","get","ncontrolcode","postParam","undefined","Value","inputListName","selectedObject","primaryKeyField","classUrl","methodUrl","saveType","esignNeeded","userRoleControlRights","loadEsign","screenData","openModal","operation","warn","intl","formatMessage","id","ConfirmDelete","confirmMessage","confirm","deleteTemplate","DRAFT","openFieldConfiguration","controlCode","screenName","designtemplatemapping","ndesigntemplatemappingcode","validateEsign","sreason","selectedRecord","password","closeModal","selectedId","onComboChange","comboData","fieldName","setState","onInputOnChange","target","type","name","checked","YES","NO","handleDateChange","dateName","dateValue","getGridJsondata","templatedata","gridItem","gridMoreItem","masterdatefields","editable","jdynamiccolumns","jnumericcolumns","templatePrimaryKey","map","row","children","column","component","index","hasOwnProperty","componentRow","label","push","columnname","displayname","inputtype","displaymember","valuemember","source","VALUE","dateonly","mandatory","templatemandatory","LABEL","editableuntill","table","item","jsondata","getJsondata","displayFields","listItem","subsampleeditable","subsamplelistitem","sampledatefields","sampledateconstraints","subsampledatefields","subsampledateconstraints","samplesearchfields","subsamplesearchfields","sampletemplatefields","subsampletemplatefields","testdatefields","nsubsampletemplatecode","dateConstraintArraySQL","child","childData","tablecolumnname","obj","sampledisplayfields","samplelistitem","samplegriditem","samplegridmoreitem","testListFields","SAMPLEREGISTRATION","sampleeditable","RESULTENTRY","APPROVAL","JOBALLOCATION","MYJOBS","onChangeToggle","dataItem","field","dataIndex","designData","dataResult","length","splice","realData","findIndex","x","onSaveClick","formRef","jsondataobj","nreactregtemplatecode","nmastersitecode","qf_jsonData","sdisplayname","qbt_jsonData","tablename","languageList","lang","sformname","sprimarykeyname","onTabChange","tabProps","isOpen","designtemplatemappingData","masterStatus","error","userLogged","Map","showAccordian","selectedInput","createRef","searchFieldList","designtemplatemappingFieldList","Layout","userStatusCSS","ACTIVE","APPROVED","addId","deleteId","approveId","filterParam","fetchUrl","fecthInputObject","validationColumnList","mandatoryFields","forEach","breadCrumbData","searchedData","listSampletype","listRegistrationType","listRegistrationSubType","listForms","sregtemplatename","sversionno","stransdisplaystatus","indexOf","Masters","componentrow","designtemplatemappingList","subSampleTemplateList","nneedsubsample","previousProps","updateState","Object","values","Taglstsampletype","TaglistRegistrationType","TaglistRegistrationSubType","ListFormsMap","SampleTypes","registrationTypes","registrationSubTypes","qualisforms","modalName","Component"],"mappings":"gmCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,CAAcC,GAAd,CAAmBC,IAAnB,CAAyBC,GAAzB,CAA8BC,SAA9B,CAAyCC,SAAzC,KAA0D,iBAA1D,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,OAASC,WAAT,CAAsBC,UAAtB,CAAkCC,UAAlC,CAA8CC,UAA9C,CAA0DC,OAA1D,CAAmEC,MAAnE,KAAiF,mCAAjF,CAAqH;AACrH,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,UAAT,CAAqBC,gBAArB,KAA6C,YAA7C,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OACIC,WADJ,CACiBC,UADjB,CAC6BC,uBAD7B,CACsDC,WADtD,CACmEC,8BADnE,CACmGC,mBADnG,CAEIC,oCAFJ,CAE0CC,gBAF1C,CAE4DC,2BAF5D,CAEyFC,mBAFzF,CAE8GC,sBAF9G,CAEsIC,kBAFtI,KAGO,eAHP,CAIA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,YAAT,CAAuBC,YAAvB,KAA2C,6BAA3C,CACA,OAASC,aAAT,CAAwBC,SAAxB,CAAmCC,wBAAnC,CAA6DC,mBAA7D,KAAwF,+BAAxF,CAAwH;AACxH,MAAOC,CAAAA,UAAP,KAAuB,oDAAvB,CACA;AACA,MAAOC,CAAAA,aAAP,KAA0B,gDAA1B,CACA,MAAOC,CAAAA,wBAAP,KAAqC,4BAArC,CACA,MAAOC,CAAAA,KAAP,KAAkB,8BAAlB,CACA,OAASC,cAAT,KAA+B,0BAA/B,CACA,MAAOC,CAAAA,mBAAP,KAAgC,uCAAhC,CACA,OAASC,WAAT,KAA4B,sCAA5B,CACA,OAASC,gBAAT,CAA2BC,QAA3B,CAAqCC,YAArC,CAAmDC,iBAAnD,KAA4E,8BAA5E,CAEA,OAASC,KAAT,KAAsB,QAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,0DAA3B,CACA,MAAOC,CAAAA,YAAP,KAAyB,eAAzB,CACA,MAAOC,CAAAA,qBAAP,KAAkC,yBAAlC,CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,KAAK,CAAI,CAC7B,MAAQ,CAAEC,KAAK,CAAED,KAAK,CAACC,KAAf,CAAR,CACH,CAFD,C,GAIMC,CAAAA,qB,0IACF,+BAAYC,KAAZ,CAAmB,uDACf,uBAAMA,KAAN,EAEA;AACA;AACA;AACA;AANe,MAkDnBC,iBAlDmB,CAkDC,SAACC,KAAD,CAAQC,SAAR,CAAsB,CACtC,GAAID,KAAK,GAAK,IAAd,CAAoB,CAChB;AACA,GAAIE,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAID,SAAS,GAAK,YAAlB,CAAgC,CAE5BC,SAAS,CAAG,CACRC,QAAQ,CAAE,MAAKL,KAAL,CAAWF,KAAX,CAAiBQ,QADnB,CAERC,KAAK,CAAE,CAFC,CAGRC,eAAe,CAAEC,QAAQ,CAACP,KAAK,CAACQ,KAAP,CAHjB,CAAZ,CAMA,GAAIC,CAAAA,UAAU,gCAAQ,MAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAAzB,MAAqCC,iBAAiB,CAAEV,KAAxD,EAAd,CACA,GAAIW,CAAAA,UAAU,CAAG,CAAEF,UAAU,CAAVA,UAAF,CAAcP,SAAS,CAATA,SAAd,CAAjB,CACA,MAAKJ,KAAL,CAAW7B,mBAAX,CAA+B0C,UAA/B,EACH,CAXD,IAYK,IAAIV,SAAS,GAAK,kBAAlB,CAAsC,CAEvCC,SAAS,CAAG,CACRC,QAAQ,CAAE,MAAKL,KAAL,CAAWF,KAAX,CAAiBQ,QADnB,CAGRQ,YAAY,CAAEL,QAAQ,CAACP,KAAK,CAACQ,KAAP,CAHd,CAIRF,eAAe,CAAE,MAAKR,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BC,iBAA5B,CAA8CF,KAJvD,CAAZ,CAOA,GAAIC,CAAAA,WAAU,gCAAQ,MAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAAzB,MAAqCI,cAAc,CAAEb,KAArD,EAAd,CACA,GAAIW,CAAAA,WAAU,CAAG,CAAEF,UAAU,CAAVA,WAAF,CAAcP,SAAS,CAATA,SAAd,CAAjB,CACA,MAAKJ,KAAL,CAAW5B,sBAAX,CAAkCyC,WAAlC,EAEH,CAbI,IAaE,IAAIV,SAAS,GAAK,qBAAlB,CAAyC,CAE5C,GAAIQ,CAAAA,YAAU,gCAAQ,MAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAAzB,MAAqCK,iBAAiB,CAAEd,KAAxD,EAAd,CACA,GAAMe,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEjC,cADK,CAEfkC,IAAI,CAAE,CAAER,UAAU,CAAVA,YAAF,CAFS,CAAnB,CAKA,MAAKX,KAAL,CAAWnC,WAAX,CAAuBoD,UAAvB,EACH,CATM,IASA,CACH,GAAIN,CAAAA,YAAU,gCAAQ,MAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAAzB,MAAqCS,WAAW,CAAElB,KAAlD,EAAd,CACA,GAAMe,CAAAA,WAAU,CAAG,CACfC,QAAQ,CAAEjC,cADK,CAEfkC,IAAI,CAAE,CAAER,UAAU,CAAVA,YAAF,CAFS,CAAnB,CAKA,MAAKX,KAAL,CAAWnC,WAAX,CAAuBoD,WAAvB,EACH,CACJ,CACJ,CAlGkB,OAwYnBI,UAxYmB,CAwYN,UAAM,CACf,MAAKC,SAAL,CAAeC,OAAf,CAAuBb,KAAvB,CAA+B,EAA/B,CAEA,GAAIN,CAAAA,SAAS,CAAG,CACZC,QAAQ,CAAE,MAAKL,KAAL,CAAWF,KAAX,CAAiBQ,QAE3B;AACA;AACA;AALY,CAAhB,CASA,GAAIO,CAAAA,UAAU,CAAG,CAAEF,UAAU,CAAE,MAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAA/B,CAA2CP,SAAS,CAATA,SAA3C,CAAjB,CACA,MAAKJ,KAAL,CAAW9B,2BAAX,CAAuC2C,UAAvC,EAGH,CAxZkB,OAwdnBW,UAxdmB,CAwdN,UAAM,CACf,GAAIC,CAAAA,UAAU,CAAG,CAAC,MAAKzB,KAAL,CAAWF,KAAX,CAAiB2B,UAAnC,CACA,GAAMR,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEjC,cADK,CAEfkC,IAAI,CAAE,CAAEM,UAAU,CAAVA,UAAF,CAFS,CAAnB,CAIA,MAAKzB,KAAL,CAAWnC,WAAX,CAAuBoD,UAAvB,EACH,CA/dkB,OAienBS,WAjemB,CAieL,UAAM,CAEhB,GAAMT,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEjC,cADK,CAEfkC,IAAI,CAAE,CAAEM,UAAU,CAAE,KAAd,CAFS,CAAnB,CAIA,MAAKzB,KAAL,CAAWnC,WAAX,CAAuBoD,UAAvB,EACH,CAxekB,OA2enBU,cA3emB,CA2eF,UAAM,CAEnB,GAAIvB,CAAAA,SAAS,CAAG,CACZC,QAAQ,CAAE,MAAKL,KAAL,CAAWF,KAAX,CAAiBQ,QADf,CAEZQ,YAAY,CAAEL,QAAQ,CAAC,MAAKT,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BI,cAA5B,CAA6C,MAAKf,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BI,cAA5B,CAA2CL,KAA3C,EAAoD,CAAC,CAAlG,CAAsG,CAAC,CAAxG,CAFV,CAGZkB,eAAe,CAAEnB,QAAQ,CAAC,MAAKT,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BK,iBAA5B,CAAgD,MAAKhB,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BK,iBAA5B,CAA8CN,KAA9C,EAAuD,CAAC,CAAxG,CAA4G,CAAC,CAA9G,CAHb,CAIZF,eAAe,CAAE,MAAKR,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BC,iBAA5B,CAA8CF,KAJnD,CAKZmB,SAAS,CAAE,MAAK7B,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BS,WAA5B,CAA0C,MAAKpB,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BS,WAA5B,CAAwCV,KAAxC,EAAiD,CAAC,CAA5F,CAAgG,CAAC,CALhG,CAAhB,CAQA,GAAIC,CAAAA,UAAU,gCACP,MAAKX,KAAL,CAAWF,KAAX,CAAiBa,UADV,MAEVmB,eAAe,CAAE,MAAK9B,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BC,iBAFnC,CAGVmB,aAAa,CAAE,MAAK/B,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BS,WAHjC,CAIVY,gBAAgB,CAAE,MAAKhC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BI,cAJpC,CAKVkB,mBAAmB,CAAE,MAAKjC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BK,iBALvC,EAAd,CAOA,GAAIH,CAAAA,UAAU,CAAG,CAAEF,UAAU,CAAVA,UAAF,CAAcP,SAAS,CAATA,SAAd,CAAjB,CACA,MAAKJ,KAAL,CAAW3B,kBAAX,CAA8BwC,UAA9B,EACH,CA9fkB,OAggBnBqB,cAhgBmB,CAggBF,UAAM,CACnB,GAAI,MAAKlC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DC,kBAA1D,GAAiF7C,iBAAiB,CAAC8C,OAAvG,CAAgH,kBAE5G,GAAMC,CAAAA,YAAY,CAAG,MAAKzC,KAAL,CAAW0C,UAAX,CAAsBC,GAAtB,CAA0B,8BAA1B,GAA6D,MAAK3C,KAAL,CAAW0C,UAAX,CAAsBE,GAAtB,CAA0B,8BAA1B,EAA0DC,YAA5I,CACA,GAAItC,CAAAA,SAAS,CAAG,EAAhB,CACAA,SAAS,CAAC,UAAD,CAAT,CAAwB,MAAKJ,KAAL,CAAWF,KAAX,CAAiBQ,QAAzC,CAEA,GAAIqC,CAAAA,SAAS,CAAGC,SAAhB,CACAxC,SAAS,CAAC,uBAAD,CAAT,CAAqC,CAAE,6BAA8B,MAAKJ,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0D,4BAA1D,EAA0F,MAAKnC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0D,4BAA1D,EAAwFU,KAAlL,CAA0L,EAA1N,CAArC,CACAzC,SAAS,CAAC,uBAAD,CAAT,CAAqC,MAAKJ,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAAjE,CACAQ,SAAS,CAAG,CAAEG,aAAa,CAAE,uBAAjB,CAA0CC,cAAc,CAAE,+BAA1D,CAA2FC,eAAe,CAAE,4BAA5G,CAAZ,CAIA,GAAMnC,CAAAA,UAAU,gBACZT,SAAS,CAAE,CACP,WAAY,MAAKJ,KAAL,CAAWF,KAAX,CAAiBQ,QADtB,CADC,CAKZ2C,QAAQ,CAAE,uBALE,CAMZC,SAAS,CAAE,uBANC,2CAOD9C,SAPC,2CAQD,SARC,2CAQUuC,SARV,eAAhB,CAUA,GAAIQ,CAAAA,QAAJ,CAEA,GAAMxC,CAAAA,UAAU,CAAG,MAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAApC,CAEA,GAAMyC,CAAAA,WAAW,CAAG1E,SAAS,CAAC,MAAKsB,KAAL,CAAWF,KAAX,CAAiBuD,qBAAlB,CAAyC,MAAKrD,KAAL,CAAWF,KAAX,CAAiBQ,QAAjB,CAA0BuB,SAAnE,CAA8ES,YAA9E,CAA7B,CACA,GAAIc,WAAJ,CAAiB,CACb,GAAMnC,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEjC,cADK,CAEfkC,IAAI,CAAE,CACFmC,SAAS,CAAE,IADT,CACeC,UAAU,CAAE,CAAE1C,UAAU,CAAVA,UAAF,CAAcF,UAAU,CAAVA,UAAd,CAD3B,CACuDwC,QAAQ,CAARA,QADvD,CACiEK,SAAS,CAAE,IAD5E,CACkFC,SAAS,CAAE,SAD7F,CAFS,CAAnB,CAMA,MAAKzD,KAAL,CAAWnC,WAAX,CAAuBoD,UAAvB,EACH,CARD,IASK,CACD,MAAKjB,KAAL,CAAWrC,UAAX,CAAsBkD,UAAtB,CAAkCF,UAAlC,CAA8C,WAA9C,EACH,CAEJ,CAzCD,IA0CK,CAEDlD,KAAK,CAACiG,IAAN,CAAW,MAAK1D,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,qBAAN,CAA9B,CAAX,EACH,CACJ,CA/iBkB,OAgjBnBC,aAhjBmB,CAgjBH,UAAM,CAClB,MAAKC,cAAL,CAAoBC,OAApB,CAA4B,eAA5B,CAA6C,MAAKhE,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,YAAN,CAA9B,CAA7C,CAAkG,MAAK7D,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,uBAAN,CAA9B,CAAlG,CACI,MAAK7D,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,QAAN,CAA9B,CADJ,CACqD,MAAK7D,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,YAAN,CAA9B,CADrD,CAEI,iBAAM,OAAKI,cAAL,EAAN,EAFJ,EAGH,CApjBkB,OAqjBnBA,cArjBmB,CAqjBF,UAAM,CACnB,GAAK,MAAKjE,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DC,kBAA1D,GAAiF7C,iBAAiB,CAAC2E,KAAxG,CAAgH,kBAC5G,GAAM5B,CAAAA,YAAY,CAAG,MAAKzC,KAAL,CAAW0C,UAAX,CAAsBC,GAAtB,CAA0B,6BAA1B,GAA4D,MAAK3C,KAAL,CAAW0C,UAAX,CAAsBE,GAAtB,CAA0B,6BAA1B,EAAyDC,YAA1I,CACA,GAAItC,CAAAA,SAAS,CAAG,EAAhB,CACAA,SAAS,CAAC,UAAD,CAAT,CAAwB,MAAKJ,KAAL,CAAWF,KAAX,CAAiBQ,QAAzC,CAEA,GAAIqC,CAAAA,SAAS,CAAGC,SAAhB,CACAxC,SAAS,CAAC,uBAAD,CAAT,CAAqC,CAAE,6BAA8B,MAAKJ,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0D,4BAA1D,EAA0F,MAAKnC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0D,4BAA1D,EAAwFU,KAAlL,CAA0L,EAA1N,CAArC,CACAzC,SAAS,CAAC,uBAAD,CAAT,CAAqC,MAAKJ,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAAjE,CACAQ,SAAS,CAAG,CAAEG,aAAa,CAAE,uBAAjB,CAA0CC,cAAc,CAAE,+BAA1D,CAA2FC,eAAe,CAAE,4BAA5G,CAAZ,CAGA,GAAMnC,CAAAA,UAAU,gBACZT,SAAS,CAAE,CACP,WAAY,MAAKJ,KAAL,CAAWF,KAAX,CAAiBQ,QADtB,CADC,CAKZ2C,QAAQ,CAAE,uBALE,CAMZC,SAAS,CAAE,uBANC,2CAOD9C,SAPC,2CAQD,QARC,2CAQSuC,SART,eAAhB,CAUA,GAAIQ,CAAAA,QAAJ,CAEA,GAAMxC,CAAAA,UAAU,CAAG,MAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAApC,CAEA,GAAMyC,CAAAA,WAAW,CAAG1E,SAAS,CAAC,MAAKsB,KAAL,CAAWF,KAAX,CAAiBuD,qBAAlB,CAAyC,MAAKrD,KAAL,CAAWF,KAAX,CAAiBQ,QAAjB,CAA0BuB,SAAnE,CAA8ES,YAA9E,CAA7B,CACA,GAAIc,WAAJ,CAAiB,CACb,GAAMnC,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEjC,cADK,CAEfkC,IAAI,CAAE,CACFmC,SAAS,CAAE,IADT,CACeC,UAAU,CAAE,CAAE1C,UAAU,CAAVA,UAAF,CAAcF,UAAU,CAAVA,UAAd,CAD3B,CACuDwC,QAAQ,CAARA,QADvD,CACiEK,SAAS,CAAE,IAD5E,CACkFC,SAAS,CAAE,QAD7F,CAFS,CAAnB,CAMA,MAAKzD,KAAL,CAAWnC,WAAX,CAAuBoD,UAAvB,EACH,CARD,IASK,CACD,MAAKjB,KAAL,CAAWrC,UAAX,CAAsBkD,UAAtB,CAAkCF,UAAlC,CAA8C,WAA9C,EACH,CAEJ,CAvCD,IAwCK,CAEDlD,KAAK,CAACiG,IAAN,CAAW,MAAK1D,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,+BAAN,CAA9B,CAAX,EACH,CACJ,CAlmBkB,OAmmBnBM,sBAnmBmB,CAmmBM,SAACC,WAAD,CAAiB,CACtC,GAAIZ,CAAAA,SAAS,CAAG,IAAhB,CACA,GAAIC,CAAAA,SAAS,CAAG,WAAhB,CACA,GAAIf,CAAAA,YAAY,CAAG0B,WAAnB,CACA,GAAIC,CAAAA,UAAU,CAAG,YAAjB,CACA,GAAIxD,CAAAA,UAAU,CAAG,CACbT,SAAS,CAAE,CACPkE,qBAAqB,CAAE,CACnBC,0BAA0B,CAAE,MAAKvE,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DoC,0BADnE,CADhB,CAIPlE,QAAQ,CAAE,MAAKL,KAAL,CAAWF,KAAX,CAAiBQ,QAJpB,CADE,CAObmD,SAAS,CAATA,SAPa,CAQbf,YAAY,CAAZA,YARa,CASb2B,UAAU,CAAVA,UATa,CAAjB,CAWA,MAAKrE,KAAL,CAAWjC,mBAAX,CAA+B8C,UAA/B,EACH,CApnBkB,OAqnBnB2D,aArnBmB,CAqnBH,UAAM,CAClB,GAAM3D,CAAAA,UAAU,CAAG,CACfT,SAAS,CAAE,CACP,0CACO,MAAKJ,KAAL,CAAWF,KAAX,CAAiBQ,QADxB,MAEImE,OAAO,CAAE,MAAK5E,KAAL,CAAW6E,cAAX,CAA0B,eAA1B,CAFb,EADO,CAKPC,QAAQ,CAAE,MAAK9E,KAAL,CAAW6E,cAAX,CAA0B,eAA1B,CALH,CADI,CAQfnB,UAAU,CAAE,MAAKvD,KAAL,CAAWF,KAAX,CAAiByD,UARd,CAAnB,CAWA,MAAKvD,KAAL,CAAWpC,uBAAX,CAAmCiD,UAAnC,CAA+C,WAA/C,EACH,CAloBkB,OAsoBnB+D,UAtoBmB,CAsoBN,UAAM,CACf,GAAItB,CAAAA,SAAS,CAAG,MAAKtD,KAAL,CAAWF,KAAX,CAAiBwD,SAAjC,CACA,GAAIE,CAAAA,SAAS,CAAG,MAAKxD,KAAL,CAAWF,KAAX,CAAiB0D,SAAjC,CACA,GAAIkB,CAAAA,cAAc,CAAG,MAAK1E,KAAL,CAAWF,KAAX,CAAiB4E,cAAtC,CACA,GAAI,MAAK1E,KAAL,CAAWF,KAAX,CAAiBwD,SAArB,CAAgC,CAC5B,GAAI,MAAKtD,KAAL,CAAWF,KAAX,CAAiB2D,SAAjB,GAA+B,SAA/B,EACG,MAAKzD,KAAL,CAAWF,KAAX,CAAiB2D,SAAjB,GAA+B,QADtC,CACgD,CAC5CH,SAAS,CAAG,KAAZ,CACAE,SAAS,CAAG,KAAZ,CACAkB,cAAc,CAAG,EAAjB,CACH,CALD,IAMK,CACDpB,SAAS,CAAG,KAAZ,CACH,CACJ,CAVD,IAWK,CACDE,SAAS,CAAG,KAAZ,CACAkB,cAAc,CAAG,EAAjB,CACH,CAED,GAAMzD,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEjC,cADK,CAEfkC,IAAI,CAAE,CAAEqC,SAAS,CAATA,SAAF,CAAaF,SAAS,CAATA,SAAb,CAAwBoB,cAAc,CAAdA,cAAxB,CAAwCG,UAAU,CAAE,IAApD,CAFS,CAAnB,CAIA,MAAK7E,KAAL,CAAWnC,WAAX,CAAuBoD,UAAvB,EAEH,CAhqBkB,OAkqBnB6D,aAlqBmB,CAkqBH,SAACC,SAAD,CAAYC,SAAZ,CAA0B,CACtC,GAAMN,CAAAA,cAAc,CAAG,MAAK7E,KAAL,CAAW6E,cAAX,EAA6B,EAApD,CACAA,cAAc,CAACM,SAAD,CAAd,CAA4BD,SAA5B,CAAsC,CAEtC,MAAKE,QAAL,CAAc,CAAEP,cAAc,CAAdA,cAAF,CAAd,EACH,CAvqBkB,OAyqBnBQ,eAzqBmB,CAyqBD,SAAChF,KAAD,CAAW,CACzB,GAAMwE,CAAAA,cAAc,CAAG,MAAK7E,KAAL,CAAW6E,cAAX,EAA6B,EAApD,CACA,GAAIxE,KAAK,CAACiF,MAAN,CAAaC,IAAb,GAAsB,UAA1B,CAAsC,CAClCV,cAAc,CAACxE,KAAK,CAACiF,MAAN,CAAaE,IAAd,CAAd,CAAoCnF,KAAK,CAACiF,MAAN,CAAaG,OAAb,GAAyB,IAAzB,CAAgC/F,iBAAiB,CAACgG,GAAlD,CAAwDhG,iBAAiB,CAACiG,EAA9G,CACH,CAFD,IAGK,CACDd,cAAc,CAACxE,KAAK,CAACiF,MAAN,CAAaE,IAAd,CAAd,CAAoCnF,KAAK,CAACiF,MAAN,CAAazE,KAAjD,CACH,CAED,MAAKuE,QAAL,CAAc,CAAEP,cAAc,CAAdA,cAAF,CAAd,EACH,CAnrBkB,OAorBnBe,gBAprBmB,CAorBA,SAACC,QAAD,CAAWC,SAAX,CAAyB,CACxC,GAAQjB,CAAAA,cAAR,CAA2B,MAAK7E,KAAhC,CAAQ6E,cAAR,CACAA,cAAc,CAACgB,QAAD,CAAd,CAA2BC,SAA3B,CACA,MAAKV,QAAL,CAAc,CAAEP,cAAc,CAAdA,cAAF,CAAd,EACH,CAxrBkB,OA0rBnBkB,eA1rBmB,CA0rBD,SAACC,YAAD,CAAkB,CAChC,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,YAAY,CAAG,EAAnB,CACA,GAAIC,CAAAA,gBAAgB,CAAG,EAAvB,CACA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,eAAe,CAAG,EAAtB,CACA,GAAIC,CAAAA,eAAe,CAAG,EAAtB,CACA,GAAIC,CAAAA,kBAAkB,CAAG,EAAzB,CACAP,YAAY,EAAIA,YAAY,CAACQ,GAAb,CAAiB,SAAAC,GAAG,QAChCA,CAAAA,GAAG,CAACC,QAAJ,EAAgBD,GAAG,CAACC,QAAJ,CAAaF,GAAb,CAAiB,SAAAG,MAAM,CAAI,CACvCA,MAAM,CAACD,QAAP,EAAmBC,MAAM,CAACD,QAAP,CAAgBF,GAAhB,CAAoB,SAACI,SAAD,CAAYC,KAAZ,CAAsB,CACzD,GAAID,SAAS,CAACE,cAAV,CAAyB,UAAzB,CAAJ,CAA0C,CACtCF,SAAS,CAACF,QAAV,CAAmBF,GAAnB,CAAuB,SAAAO,YAAY,CAAI,2BACnCR,kBAAkB,CAAGA,kBAAkB,GAAK,EAAvB,EAA6BM,KAAK,GAAK,CAAvC,CAA2CE,YAAY,CAACC,KAAxD,CAAgET,kBAArF,CACAF,eAAe,CAACY,IAAhB,CAAqB,CACjBC,UAAU,CAAEH,YAAY,CAACC,KADR,CAEjBG,WAAW,CAAEJ,YAAY,CAACI,WAFT,CAArB,EAIA,GAAIJ,YAAY,CAACK,SAAb,GAA2B,OAA/B,CAAwC,CACpCd,eAAe,CAACW,IAAhB,CAAqB,CACjB,aAAcF,YAAY,CAACM,aADV,CAEjB,cAAeN,YAAY,CAACI,WAFX,CAGjB,iBAAkBJ,YAAY,CAACC,KAHd,CAIjB;AACA;AACA,kBAAmBD,YAAY,CAACO,WANf,CAOjB,mBAAoBP,YAAY,CAACQ,MAPhB,CAArB,EASH,CACD;AACAR,YAAY,CAACK,SAAb,GAA2B,MAA3B,EAAqCjB,gBAAgB,CAACc,IAAjB,iEAAyB1H,gBAAgB,CAACiI,KAA1C,CAAkDT,YAAY,CAACC,KAA/D,mDAAgFD,YAAY,CAACU,QAAb,EAAyB,KAAzG,yBAArC,CACA;AACA;AACA,GAAIV,YAAY,CAACW,SAAb,EAA0BX,YAAY,CAACY,iBAA3C,CAA8D,oBAC1D1B,QAAQ,CAACgB,IAAT,mDAAiB1H,gBAAgB,CAACqI,KAAlC,CAA0Cb,YAAY,CAACI,WAAvD,iCAAqE5H,gBAAgB,CAACiI,KAAtF,CAA8FT,YAAY,CAACC,KAA3G,mBACH,CAFD,IAGK,wBACDd,YAAY,CAACe,IAAb,2DAAqB1H,gBAAgB,CAACqI,KAAtC,CAA8Cb,YAAY,CAACI,WAA3D,qCAAyE5H,gBAAgB,CAACiI,KAA1F,CAAkGT,YAAY,CAACC,KAA/G,uBACH,CACD,GAAI,CAACD,YAAY,CAACY,iBAAlB,CAAqC,CACjCvB,QAAQ,CAACa,IAAT,CAAc,CAAED,KAAK,CAAED,YAAY,CAACC,KAAtB,CAA6Ba,cAAc,CAAE,CAAC,CAAD,CAA7C,CAAd,EACH,CACD,MAAO,KAAP,CACH,CA/BD,EAgCH,CAjCD,IAiCO,4BACHtB,kBAAkB,CAAGA,kBAAkB,GAAK,EAAvB,EAA6BM,KAAK,GAAK,CAAvC,CAA2CD,SAAS,CAACI,KAArD,CAA6DT,kBAAlF,CACAF,eAAe,CAACY,IAAhB,CAAqB,CACjBC,UAAU,CAAEN,SAAS,CAACI,KADL,CAEjBG,WAAW,CAAEP,SAAS,CAACO,WAFN,CAArB,EAIA,GAAIP,SAAS,CAACQ,SAAV,GAAwB,OAA5B,CAAqC,CACjCd,eAAe,CAACW,IAAhB,CAAqB,CACjB,aAAcL,SAAS,CAACI,KADP,CAEjB,cAAeJ,SAAS,CAACO,WAFR,CAGjB,iBAAkBP,SAAS,CAACI,KAHX,CAIjB;AACA,kBAAmB,sBAAsBJ,SAAS,CAACkB,KAAV,CAAgBC,IAAhB,CAAqB/F,SAA3C,CAAqD,IALvD,CAMjB,kBAAmB4E,SAAS,CAACD,MAAV,CAAiB9F,KANnB,CAOjB,mBAAoB,gBAPH,CAArB,EASH,CACD;AACA+F,SAAS,CAACQ,SAAV,GAAwB,MAAxB,EAAkCjB,gBAAgB,CAACc,IAAjB,mEAAyB1H,gBAAgB,CAACiI,KAA1C,CAAkDZ,SAAS,CAACI,KAA5D,oDAA6EJ,SAAS,CAACa,QAAV,EAAsB,KAAnG,0BAAlC,CACA;AACA;AACA,GAAIb,SAAS,CAACc,SAAV,EAAuBd,SAAS,CAACe,iBAArC,CAAwD,qBACpD1B,QAAQ,CAACgB,IAAT,qDAAiB1H,gBAAgB,CAACqI,KAAlC,CAA0ChB,SAAS,CAACO,WAApD,kCAAkE5H,gBAAgB,CAACiI,KAAnF,CAA2FZ,SAAS,CAACI,KAArG,oBACH,CAFD,IAEO,yBACHd,YAAY,CAACe,IAAb,6DAAqB1H,gBAAgB,CAACqI,KAAtC,CAA8ChB,SAAS,CAACO,WAAxD,sCAAsE5H,gBAAgB,CAACiI,KAAvF,CAA+FZ,SAAS,CAACI,KAAzG,wBACH,CACD,GAAI,CAACJ,SAAS,CAACe,iBAAf,CAAkC,CAC9BvB,QAAQ,CAACa,IAAT,CAAc,CAAED,KAAK,CAAEJ,SAAS,CAACI,KAAnB,CAA0Ba,cAAc,CAAE,CAAC,CAAD,CAA1C,CAAd,EACH,CACD,MAAO,KAAP,CACH,CAEJ,CAlEkB,CAAnB,CAmEH,CApEe,CADgB,EAApB,CAAhB,CAuEA,GAAIG,CAAAA,QAAQ,CAAG,CACX/B,QAAQ,CAARA,QADW,CAEXC,YAAY,CAAZA,YAFW,CAGXC,gBAAgB,CAAhBA,gBAHW,CAIXC,QAAQ,CAARA,QAJW,CAAf,CAMA,MAAO,CAAE4B,QAAQ,CAARA,QAAF,CAAY3B,eAAe,CAAfA,eAAZ,CAA6BC,eAAe,CAAfA,eAA7B,CAA8CC,kBAAkB,CAAlBA,kBAA9C,CAAP,CACH,CAhxBkB,OAixBnB0B,WAjxBmB,CAixBL,SAACjC,YAAD,CAAkB,+CAC5B,GAAIkC,CAAAA,aAAa,CAAG,EAApB,CACA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIlC,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,YAAY,CAAG,EAAnB,CACA,GAAIE,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIgC,CAAAA,iBAAiB,CAAG,EAAxB,CACA,GAAIC,CAAAA,iBAAiB,CAAG,EAAxB,CACA,GAAIC,CAAAA,gBAAgB,CAAG,+BAAI/I,gBAAgB,CAACiI,KAArB,CAA6B,UAA7B,kCAAmD,KAAnD,QAAvB,CACA,GAAIe,CAAAA,qBAAqB,CAAG,EAA5B,CACA,GAAIC,CAAAA,mBAAmB,CAAG,EAA1B,CACA,GAAIC,CAAAA,wBAAwB,CAAG,EAA/B,CACA,GAAIC,CAAAA,kBAAkB,CAAG,EAAzB,CACA,GAAIC,CAAAA,qBAAqB,CAAG,EAA5B,CACA,GAAIC,CAAAA,oBAAoB,CAAG,EAA3B,CACA,GAAIC,CAAAA,uBAAuB,CAAG,EAA9B,CACA,GAAIxC,CAAAA,eAAe,CAAG,EAAtB,CACA,GAAIC,CAAAA,eAAe,CAAG,EAAtB,CACA,GAAIwC,CAAAA,cAAc,CAAG,iCAAIvJ,gBAAgB,CAACiI,KAArB,CAA6B,kBAA7B,mCAA2D,KAA3D,SAArB,CACA,MAAKxH,KAAL,CAAW6E,cAAX,CAA0BkE,sBAA1B,EAAoD,MAAK/I,KAAL,CAAW6E,cAAX,CAA0BkE,sBAA1B,CAAiDhB,IAAjD,CAAsDC,QAAtD,CAA+DxB,GAA/D,CAAmE,SAAAC,GAAG,QACtHA,CAAAA,GAAG,CAACC,QAAJ,EAAgBD,GAAG,CAACC,QAAJ,CAAaF,GAAb,CAAiB,SAAAG,MAAM,CAAI,CACvCA,MAAM,CAACD,QAAP,EAAmBC,MAAM,CAACD,QAAP,CAAgBF,GAAhB,CAAoB,SAAAI,SAAS,CAAI,CAChD,GAAIA,SAAS,CAACE,cAAV,CAAyB,UAAzB,CAAJ,CAA0C,CACtCF,SAAS,CAACF,QAAV,CAAmBF,GAAnB,CAAuB,SAAAO,YAAY,CAAI,2BACnC4B,qBAAqB,CAAC1B,IAAtB,CAA2BF,YAAY,CAACC,KAAxC,EACAoB,iBAAiB,CAACnB,IAAlB,CAAuB,CAAED,KAAK,CAAED,YAAY,CAACC,KAAtB,CAA6Ba,cAAc,CAAE,CAAC,EAAD,CAA7C,CAAvB,EACA,GAAId,YAAY,CAACK,SAAb,GAA2B,MAA/B,CAAuC,2BACnCoB,mBAAmB,CAACvB,IAApB,iEAA4B1H,gBAAgB,CAACiI,KAA7C,CAAqDT,YAAY,CAACC,KAAlE,mDAAmFD,YAAY,CAACU,QAAb,EAAyB,KAA5G,0BACAgB,wBAAwB,CAAG1B,YAAY,CAACiC,sBAAb,8BAA0CjC,YAAY,CAACiC,sBAAvD,qBAAkFP,wBAAlF,GAA8GA,wBAAzI,CACH,CACDJ,iBAAiB,CAACpB,IAAlB,iEAA0B1H,gBAAgB,CAACqI,KAA3C,CAAmDb,YAAY,CAACI,WAAhE,wCAA8E5H,gBAAgB,CAACiI,KAA/F,CAAuGT,YAAY,CAACC,KAApH,0BACH,CARD,EAUH,CAXD,IAWO,4BACH2B,qBAAqB,CAAC1B,IAAtB,CAA2BL,SAAS,CAACI,KAArC,EACAoB,iBAAiB,CAACnB,IAAlB,CAAuB,CAAED,KAAK,CAAEJ,SAAS,CAACI,KAAnB,CAA0Ba,cAAc,CAAE,CAAC,EAAD,CAA1C,CAAvB,EACA,GAAIjB,SAAS,CAACQ,SAAV,GAAwB,MAA5B,CAAoC,4BAChCoB,mBAAmB,CAACvB,IAApB,mEAA4B1H,gBAAgB,CAACiI,KAA7C,CAAqDZ,SAAS,CAACI,KAA/D,oDAAgFJ,SAAS,CAACa,QAAV,EAAsB,KAAtG,2BACAgB,wBAAwB,CAAG7B,SAAS,CAACoC,sBAAV,8BAAuCpC,SAAS,CAACoC,sBAAjD,qBAA4EP,wBAA5E,GAAwGA,wBAAnI,CACH,CACDJ,iBAAiB,CAACpB,IAAlB,mEAA0B1H,gBAAgB,CAACqI,KAA3C,CAAmDhB,SAAS,CAACO,WAA7D,yCAA2E5H,gBAAgB,CAACiI,KAA5F,CAAoGZ,SAAS,CAACI,KAA9G,2BACH,CACJ,CArBkB,CAAnB,CAsBH,CAvBe,CADsG,EAAtE,CAApD,CA0BAhB,YAAY,EAAIA,YAAY,CAACQ,GAAb,CAAiB,SAAAC,GAAG,QAChCA,CAAAA,GAAG,CAACC,QAAJ,EAAgBD,GAAG,CAACC,QAAJ,CAAaF,GAAb,CAAiB,SAAAG,MAAM,CAAI,CACvCA,MAAM,CAACD,QAAP,EAAmBC,MAAM,CAACD,QAAP,CAAgBF,GAAhB,CAAoB,SAAAI,SAAS,CAAI,CAChD,GAAIA,SAAS,CAACE,cAAV,CAAyB,UAAzB,CAAJ,CAA0C,CACtC;AACAF,SAAS,CAACF,QAAV,CAAmBF,GAAnB,CAAuB,SAAAO,YAAY,CAAI,8DACnC;AACAV,eAAe,CAACY,IAAhB,CAAqB,CACjBC,UAAU,CAAEH,YAAY,CAACC,KADR,CAEjBG,WAAW,CAAEJ,YAAY,CAACI,WAFT,CAArB,EAIA,GAAIJ,YAAY,CAACD,cAAb,CAA4B,OAA5B,CAAJ,CAA0C,CACtCC,YAAY,CAACkC,KAAb,CAAmBzC,GAAnB,CAAuB,SAAA0C,SAAS,CAAI,CAChC5C,eAAe,CAACW,IAAhB,CAAqB,CACjB,aAAcF,YAAY,CAACC,KADV,CAEjB,cAAeD,YAAY,CAACI,WAFX,CAGjB,iBAAkBJ,YAAY,CAACC,KAHd,CAIjB;AACA;AACA,kBAAmBkC,SAAS,CAACC,eANZ,CAOjB,mBAAoB,gBAPH,CAArB,EASH,CAVD,EAWH,CACDT,kBAAkB,CAACzB,IAAnB,CAAwBF,YAAY,CAACC,KAArC,EACA4B,oBAAoB,CAAC3B,IAArB,iEAA6B1H,gBAAgB,CAACqI,KAA9C,CAAsDb,YAAY,CAACI,WAAnE,wCAAiF5H,gBAAgB,CAACiI,KAAlG,CAA0GT,YAAY,CAACC,KAAvH,0BACA,GAAID,YAAY,CAACK,SAAb,GAA2B,MAA/B,CAAuC,2BACnCkB,gBAAgB,CAACrB,IAAjB,iEAAyB1H,gBAAgB,CAACiI,KAA1C,CAAkDT,YAAY,CAACC,KAA/D,mDAAgFD,YAAY,CAACU,QAAb,EAAyB,KAAzG,0BACAc,qBAAqB,CAAGxB,YAAY,CAACiC,sBAAb,8BAA0CjC,YAAY,CAACiC,sBAAvD,qBAAkFT,qBAAlF,GAA2GA,qBAAnI,CACH,CACDL,aAAa,CAACjB,IAAd,6DAAsB1H,gBAAgB,CAACqI,KAAvC,CAA+Cb,YAAY,CAACI,WAA5D,sCAA0E5H,gBAAgB,CAACiI,KAA3F,CAAmGT,YAAY,CAACC,KAAhH,wBACAD,YAAY,CAACY,iBAAb,EAAkCQ,QAAQ,CAAClB,IAAT,mDAAiB1H,gBAAgB,CAACqI,KAAlC,CAA0Cb,YAAY,CAACI,WAAvD,iCAAqE5H,gBAAgB,CAACiI,KAAtF,CAA8FT,YAAY,CAACC,KAA3G,kBAAlC,CACA,GAAID,YAAY,CAACW,SAAb,EAA0BX,YAAY,CAACY,iBAA3C,CAA8D,qBAC1D1B,QAAQ,CAACgB,IAAT,qDAAiB1H,gBAAgB,CAACqI,KAAlC,CAA0Cb,YAAY,CAACI,WAAvD,kCAAqE5H,gBAAgB,CAACiI,KAAtF,CAA8FT,YAAY,CAACC,KAA3G,oBACH,CAFD,IAGK,yBACDd,YAAY,CAACe,IAAb,6DAAqB1H,gBAAgB,CAACqI,KAAtC,CAA8Cb,YAAY,CAACI,WAA3D,sCAAyE5H,gBAAgB,CAACiI,KAA1F,CAAkGT,YAAY,CAACC,KAA/G,wBACH,CACD,GAAI,CAACD,YAAY,CAACY,iBAAlB,CAAqC,CACjCvB,QAAQ,CAACa,IAAT,CAAc,CAAED,KAAK,CAAED,YAAY,CAACC,KAAtB,CAA6Ba,cAAc,CAAE,CAAC,EAAD,CAA7C,CAAd,EACH,CACD,MAAO,KAAP,CACH,CArCD,EAsCA;AACA;AACA;AACA;AACH,CA5CD,IA4CO,iEACHxB,eAAe,CAACY,IAAhB,CAAqB,CACjBC,UAAU,CAAEN,SAAS,CAACI,KADL,CAEjBG,WAAW,CAAEP,SAAS,CAACO,WAFN,CAArB,EAIA,GAAIP,SAAS,CAACE,cAAV,CAAyB,OAAzB,CAAJ,CAAuC,CACnCF,SAAS,CAACqC,KAAV,CAAgBzC,GAAhB,CAAoB,SAAA0C,SAAS,CAAI,CAC7B5C,eAAe,CAACW,IAAhB,CAAqB,CACjB,aAAcL,SAAS,CAACI,KADP,CAEjB,cAAeJ,SAAS,CAACO,WAFR,CAGjB,iBAAkBP,SAAS,CAACI,KAHX,CAIjB;AACA;AACA,kBAAmBkC,SAAS,CAACC,eANZ,CAOjB,mBAAoB,gBAPH,CAArB,EASH,CAVD,EAWH,CACDT,kBAAkB,CAACzB,IAAnB,CAAwBL,SAAS,CAACI,KAAlC,EACA4B,oBAAoB,CAAC3B,IAArB,mEAA6B1H,gBAAgB,CAACqI,KAA9C,CAAsDhB,SAAS,CAACO,WAAhE,yCAA8E5H,gBAAgB,CAACiI,KAA/F,CAAuGZ,SAAS,CAACI,KAAjH,2BACA,GAAIJ,SAAS,CAACQ,SAAV,GAAwB,MAA5B,CAAoC,4BAChCkB,gBAAgB,CAACrB,IAAjB,mEAAyB1H,gBAAgB,CAACiI,KAA1C,CAAkDZ,SAAS,CAACI,KAA5D,oDAA6EJ,SAAS,CAACa,QAAV,EAAsB,KAAnG,2BACAc,qBAAqB,CAAG3B,SAAS,CAACoC,sBAAV,8BAAuCpC,SAAS,CAACoC,sBAAjD,qBAA4ET,qBAA5E,GAAqGA,qBAA7H,CACH,CACDL,aAAa,CAACjB,IAAd,+DAAsB1H,gBAAgB,CAACqI,KAAvC,CAA+ChB,SAAS,CAACO,WAAzD,uCAAuE5H,gBAAgB,CAACiI,KAAxF,CAAgGZ,SAAS,CAACI,KAA1G,yBACAJ,SAAS,CAACe,iBAAV,EAA+BQ,QAAQ,CAAClB,IAAT,qDAAiB1H,gBAAgB,CAACqI,KAAlC,CAA0ChB,SAAS,CAACO,WAApD,kCAAkE5H,gBAAgB,CAACiI,KAAnF,CAA2FZ,SAAS,CAACI,KAArG,mBAA/B,CACA,GAAIJ,SAAS,CAACc,SAAV,EAAuBd,SAAS,CAACe,iBAArC,CAAwD,qBACpD1B,QAAQ,CAACgB,IAAT,qDAAiB1H,gBAAgB,CAACqI,KAAlC,CAA0ChB,SAAS,CAACO,WAApD,kCAAkE5H,gBAAgB,CAACiI,KAAnF,CAA2FZ,SAAS,CAACI,KAArG,oBACH,CAFD,IAEO,yBACHd,YAAY,CAACe,IAAb,6DAAqB1H,gBAAgB,CAACqI,KAAtC,CAA8ChB,SAAS,CAACO,WAAxD,sCAAsE5H,gBAAgB,CAACiI,KAAvF,CAA+FZ,SAAS,CAACI,KAAzG,wBACH,CACD,GAAI,CAACJ,SAAS,CAACe,iBAAf,CAAkC,CAC9BvB,QAAQ,CAACa,IAAT,CAAc,CAAED,KAAK,CAAEJ,SAAS,CAACI,KAAnB,CAA0Ba,cAAc,CAAE,CAAC,EAAD,CAA1C,CAAd,EACH,CACD,MAAO,KAAP,CACH,CAEJ,CAlFkB,CAAnB,CAmFH,CApFe,CADgB,EAApB,CAAhB,CAwFAK,aAAa,CAACjB,IAAd,+DAAsB1H,gBAAgB,CAACqI,KAAvC,CAA+C,CAAE,QAAS,UAAX,CAA/C,uCAAyErI,gBAAgB,CAACiI,KAA1F,CAAkG,UAAlG,yBACA,GAAI4B,CAAAA,GAAG,gBACHC,mBAAmB,CAAEnB,aADlB,CAEHoB,cAAc,CAAEnB,QAFb,CAGHoB,cAAc,CAAEtD,QAHb,CAIHuD,kBAAkB,CAAEtD,YAJjB,CAKHmC,iBAAiB,CAAjBA,iBALG,CAMHC,gBAAgB,CAAhBA,gBANG,CAOHE,mBAAmB,CAAnBA,mBAPG,CAQHE,kBAAkB,CAAlBA,kBARG,CASHC,qBAAqB,CAArBA,qBATG,CAUHG,cAAc,CAAdA,cAVG,CAWHP,qBAAqB,CAArBA,qBAXG,CAYHE,wBAAwB,CAAxBA,wBAZG,EAaA,MAAKtI,KAAL,CAAWF,KAAX,CAAiBwJ,cAbjB,CAAP,CAiBA,GAAIzB,CAAAA,QAAQ,aACRY,oBAAoB,CAApBA,oBADQ,CAERC,uBAAuB,CAAEF,qBAFjB,4BAGPnJ,QAAQ,CAACkK,kBAHF,gCAIDN,GAJC,MAKJO,cAAc,CAAEvD,QALZ,CAMJgC,iBAAiB,CAAjBA,iBANI,8BAQP5I,QAAQ,CAACoK,WARF,kBASDR,GATC,6BAWP5J,QAAQ,CAACqK,QAXF,kBAYDT,GAZC,6BAcP5J,QAAQ,CAACsK,aAdF,kBAeDV,GAfC,6BAiBP5J,QAAQ,CAACuK,MAjBF,kBAkBDX,GAlBC,aAAZ,CAsBA,MAAOpB,CAAAA,QAAP,CACH,CA/7BkB,OAi8BnBgC,cAj8BmB,CAi8BF,SAAC3J,KAAD,CAAQ4J,QAAR,CAAkBC,KAAlB,CAAyBC,SAAzB,CAAoC3K,QAApC,CAAiD,CAC9D,GAAI4K,CAAAA,UAAU,CAAG,MAAKjK,KAAL,CAAWF,KAAX,CAAiBmK,UAAlC,CACA,GAAIC,CAAAA,UAAU,CAAG,MAAKlK,KAAL,CAAWF,KAAX,CAAiBoK,UAAlC,CACAA,UAAU,CAAC7K,QAAD,CAAV,CAAqB2K,SAArB,EAAgCD,KAAhC,EAAyC7J,KAAK,CAACiF,MAAN,CAAaG,OAAtD,CACA,GAAIpF,KAAK,CAACiF,MAAN,CAAaG,OAAjB,CAA0B,CACtB,GAAIyE,KAAK,GAAK,gBAAV,EAA8BE,UAAU,CAAC5K,QAAD,CAAV,CAAqB0K,KAArB,EAA4BI,MAA5B,EAAsC,CAAxE,CAA2E,CACvE,MAAO1M,CAAAA,KAAK,CAACiG,IAAN,CAAW,MAAK1D,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,6BAAN,CAA9B,CAAX,CAAP,CACH,CAFD,IAEO,CACHoG,UAAU,CAAC5K,QAAD,CAAV,CAAqB0K,KAArB,EAA4BK,MAA5B,CAAmCJ,SAAnC,CAA8C,CAA9C,CAAiDF,QAAQ,CAACO,QAA1D,EACH,CACD,GAAIN,KAAK,GAAK,qBAAd,CAAqC,CACjCE,UAAU,CAAC5K,QAAD,CAAV,CAAqB,oBAArB,EAA2C+K,MAA3C,CAAkDJ,SAAlD,CAA6D,CAA7D,CAAgEF,QAAQ,CAACjD,KAAzE,EACH,CACJ,CATD,IASO,CACH,GAAIkD,KAAK,GAAK,qBAAd,CAAqC,CACjCE,UAAU,CAAC5K,QAAD,CAAV,CAAqB,oBAArB,EAA2C+K,MAA3C,CAAkDH,UAAU,CAAC5K,QAAD,CAAV,CAAqB,oBAArB,EAA2CiL,SAA3C,CAAqD,SAAAC,CAAC,QAAIA,CAAAA,CAAC,GAAKT,QAAQ,CAACjD,KAAnB,EAAtD,CAAlD,CAAmI,CAAnI,EACH,CACDoD,UAAU,CAAC5K,QAAD,CAAV,CAAqB0K,KAArB,EAA4BK,MAA5B,CAAmCH,UAAU,CAAC5K,QAAD,CAAV,CAAqB0K,KAArB,EAA4BO,SAA5B,CAAsC,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACnL,gBAAgB,CAACiI,KAAlB,CAAD,GAA8ByC,QAAQ,CAACjD,KAA3C,EAAvC,CAAnC,CAA6H,CAA7H,EACH,CACD,GAAM5F,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEjC,cADK,CAEfkC,IAAI,CAAE,CAAE8I,UAAU,CAAVA,UAAF,CAAcC,UAAU,CAAVA,UAAd,CAFS,CAAnB,CAIA,MAAKlK,KAAL,CAAWnC,WAAX,CAAuBoD,UAAvB,EAEH,CA19BkB,OA29BnBuJ,WA39BmB,CA29BL,SAACrH,QAAD,CAAWsH,OAAX,CAAuB,CAGjC,GAAIrK,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAI,MAAKJ,KAAL,CAAWF,KAAX,CAAiB2D,SAAjB,GAA+B,WAAnC,CAAgD,CAC5CrD,SAAS,CAAG,CACRkE,qBAAqB,CAAE,CACnBC,0BAA0B,CAAE,MAAKvE,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DoC,0BADnE,CAEnBmG,WAAW,CAAE,MAAK1K,KAAL,CAAWF,KAAX,CAAiBmK,UAFX,CADf,CAKR5J,QAAQ,CAAE,MAAKL,KAAL,CAAWF,KAAX,CAAiBQ,QALnB,CAAZ,CAOH,CARD,IAQO,CACH,UAAyE,MAAKN,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BmB,eAA5B,CAA4CpB,KAA5C,GAAsD,CAAtD,CACrE,MAAKkF,eAAL,CAAqB,MAAK/F,KAAL,CAAW6E,cAAX,CAA0BiG,qBAA1B,CAAgD/C,IAAhD,CAAqDC,QAA1E,CADqE,CAEnE,EAFN,CAAMA,QAAN,OAAMA,QAAN,CAAgB3B,eAAhB,OAAgBA,eAAhB,CAAiCC,eAAjC,OAAiCA,eAAjC,CAAkDC,kBAAlD,OAAkDA,kBAAlD,CAGAhG,SAAS,CAAG,CACR,WAAY,MAAKJ,KAAL,CAAWF,KAAX,CAAiBQ,QADrB,CAER,eAAgB,MAAKN,KAAL,CAAWF,KAAX,CAAiBwC,YAFzB,CAGR,wBAAyB,MAAKzC,KAAL,CAAW6E,cAAX,CAA0BiG,qBAA1B,CAAgDjK,KAHjE,CAIR,kBAAmB,MAAKV,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BmB,eAA5B,CAA4CpB,KAJvD,CAKR,eAAgB,MAAKV,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BqB,gBAA5B,CAA+C,MAAKhC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BqB,gBAA5B,CAA6CtB,KAA5F,CAAoG,CAAC,CAL7G,CAMR,kBAAmB,MAAKV,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BsB,mBAA5B,CAAkD,MAAKjC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BsB,mBAA5B,CAAgDvB,KAAlG,CAA0G,CAAC,CANtH,CAOR,YAAa,MAAKV,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BoB,aAA5B,CAA4C,MAAK/B,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BoB,aAA5B,CAA0CrB,KAAtF,CAA8F,CAAC,CAPpG,CAQR,yBAA0B,MAAKb,KAAL,CAAW6E,cAAX,CAA0BkE,sBAA1B,CAAmD,MAAK/I,KAAL,CAAW6E,cAAX,CAA0BkE,sBAA1B,CAAiDlI,KAApG,CAA4G,CAAC,CAR/H,CASR,cAAe,MAAKV,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BmB,eAA5B,CAA4CpB,KAA5C,GAAsD,CAAtD,CAA0DmH,QAA1D,CACT,MAAKC,WAAL,CAAiB,MAAKjI,KAAL,CAAW6E,cAAX,CAA0BiG,qBAA1B,CAAgD/C,IAAhD,CAAqDC,QAAtE,CAVE,CAAZ,CAYAzH,SAAS,CAAC,uBAAD,CAAT,CAAqC,CAAE,YAAa,MAAKJ,KAAL,CAAWF,KAAX,CAAiBQ,QAAjB,CAA0BsK,eAAzC,CAArC,CACA,GAAI,MAAK5K,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BoB,aAA5B,EAA6C,MAAK/B,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BoB,aAA5B,CAA0CrB,KAA1C,GAAoD,CAAC,CAAtG,CAAyG,CACrG,GAAImK,CAAAA,WAAW,CAAG,CACdC,YAAY,CAAE,EADA,CAAlB,CAGA,GAAIC,CAAAA,YAAY,CAAG,CACfC,SAAS,CAAE,EADI,CAAnB,CAGA,MAAKhL,KAAL,CAAWF,KAAX,CAAiBmL,YAAjB,CAA8B5E,GAA9B,CAAkC,SAAA6E,IAAI,CAAI,CACtCL,WAAW,CAAC,cAAD,CAAX,CAA4BK,IAAI,CAACxK,KAAjC,EAA0C,MAAKb,KAAL,CAAW6E,cAAX,CAA0ByG,SAApE,CACAJ,YAAY,CAAC,WAAD,CAAZ,CAA0BG,IAAI,CAACxK,KAA/B,EAAwC,MAAKb,KAAL,CAAW6E,cAAX,CAA0ByG,SAAlE,CACH,CAHD,EAIA/K,SAAS,gCACFA,SADE,MAEL+K,SAAS,CAAE,MAAKtL,KAAL,CAAW6E,cAAX,CAA0ByG,SAFhC,CAGLN,WAAW,CAAXA,WAHK,CAILE,YAAY,CAAZA,YAJK,CAKLK,eAAe,CAAEhF,kBALZ,CAMLF,eAAe,CAAfA,eANK,CAOLC,eAAe,CAAfA,eAPK,EAAT,CASH,CACD;AACA;AACA;AACH,CACD,GAAIxD,CAAAA,SAAS,CAAGC,SAAhB,CACA,GAAM/B,CAAAA,UAAU,CAAG,CACfoC,QAAQ,CAAE,uBADK,CAEfC,SAAS,CAAE,uBAFI,CAGf9C,SAAS,CAAEA,SAHI,CAIfqD,SAAS,CAAE,MAAKzD,KAAL,CAAWF,KAAX,CAAiB2D,SAJb,CAKfN,QAAQ,CAARA,QALe,CAKLsH,OAAO,CAAPA,OALK,CAKI9H,SAAS,CAATA,SALJ,CAKerB,SAAS,CAAE,MAAKA,SAL/B,CAAnB,CAOA,GAAMX,CAAAA,UAAU,CAAG,MAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAApC,CACA,GACIjC,SAAS,CAAC,MAAKsB,KAAL,CAAWF,KAAX,CAAiBuD,qBAAlB,CAAyC,MAAKrD,KAAL,CAAWF,KAAX,CAAiBQ,QAAjB,CAA0BuB,SAAnE,CAA8E,MAAK7B,KAAL,CAAWF,KAAX,CAAiBwC,YAA/F,CADb,CAC2H,CACvH,GAAMrB,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEjC,cADK,CAEfkC,IAAI,CAAE,CACFmC,SAAS,CAAE,IADT,CACeC,UAAU,CAAE,CAAE1C,UAAU,CAAVA,UAAF,CAAcF,UAAU,CAAVA,UAAd,CAD3B,CACuDwC,QAAQ,CAARA,QADvD,CAFS,CAAnB,CAMA,MAAKnD,KAAL,CAAWnC,WAAX,CAAuBoD,UAAvB,EACH,CATD,IAUK,CACD,MAAKjB,KAAL,CAAWrC,UAAX,CAAsBkD,UAAtB,CAAkCF,UAAlC,CAA8C,WAA9C,EACH,CACJ,CAviCkB,OAqjCnB0K,WArjCmB,CAqjCL,SAACC,QAAD,CAAc,CACxB,GAAMjH,CAAAA,UAAU,CAAGiH,QAAQ,CAACjH,UAA5B,CACA,GAAMpD,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEjC,cADK,CAEfkC,IAAI,CAAE,CAAEkD,UAAU,CAAVA,UAAF,CAFS,CAAnB,CAIA,MAAKrE,KAAL,CAAWnC,WAAX,CAAuBoD,UAAvB,EACH,CA5jCkB,CAQf,MAAKpB,KAAL,CAAa,CACT0L,MAAM,CAAE,KADC,CAETC,yBAAyB,CAAE,EAFlB,CAGTC,YAAY,CAAE,EAHL,CAITC,KAAK,CAAE,EAJE,CAKThH,cAAc,CAAE,EALP,CAMTjB,SAAS,CAAE,EANF,CAQTY,UAAU,CAAEzB,SARH,CAST+I,UAAU,CAAE,IATH,CAUTxJ,6BAA6B,CAAES,SAVtB,CAYTS,qBAAqB,CAAE,EAZd,CAaTd,UAAU,CAAE,GAAIqJ,CAAAA,GAAJ,EAbH,CAcTC,aAAa,CAAE,IAdN,CAeTC,aAAa,CAAE,EAfN,CAAb,CAiBA,MAAKxK,SAAL,CAAiB9E,KAAK,CAACuP,SAAN,EAAjB,CACA,MAAKhI,cAAL,CAAsB,GAAItE,CAAAA,cAAJ,EAAtB,CACA,MAAKuM,eAAL,CAAuB,CAAC,kBAAD,CAAqB,YAArB,CAAmC,qBAAnC,CAAvB,CAEA,MAAKC,8BAAL,CAAsC,CAAC,4BAAD,CAA+B,iBAA/B,CAAkD,WAAlD,CAClC,cADkC,CAClB,iBADkB,CACC,mBADD,CACsB,uBADtB,CAC+C,oBAD/C,CACqE,YADrE,CAAtC,CACyH;AA9B1G,aA+BlB,C,wDAqED,iBAAS,iBACL,GAAMC,CAAAA,MAAM,CAAG,KAAKlM,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,EACX,KAAKnC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0D0F,QAD9D,CAGA,GAAIsE,CAAAA,aAAa,CAAG,mBAApB,CACA,GAAI,KAAKnM,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA4D,KAAKnC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DC,kBAA1D,GAAiF7C,iBAAiB,CAAC6M,MAAnG,EACzD,KAAKpM,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DC,kBAA1D,GAAiF7C,iBAAiB,CAAC8M,QADtG,CACiH,KADrH,CAC4H,CACxHF,aAAa,CAAG,iBAAhB,CACH,CAHD,IAIK,IAAI,KAAKnM,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,EAA6D,KAAKnC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DC,kBAA1D,GAAiF7C,iBAAiB,CAAC8C,OAApK,CAA6K,CAC9K8J,aAAa,CAAG,gBAAhB,CACH,CAED,GAAMG,CAAAA,KAAK,CAAG,KAAKzM,KAAL,CAAW0C,UAAX,CAAsBC,GAAtB,CAA0B,0BAA1B,GAAyD,KAAK3C,KAAL,CAAW0C,UAAX,CAAsBE,GAAtB,CAA0B,0BAA1B,EAAsDC,YAA7H,CACA,GAAM6J,CAAAA,QAAQ,CAAG,KAAK1M,KAAL,CAAW0C,UAAX,CAAsBC,GAAtB,CAA0B,6BAA1B,GAA4D,KAAK3C,KAAL,CAAW0C,UAAX,CAAsBE,GAAtB,CAA0B,6BAA1B,EAAyDC,YAAtI,CACA,GAAM8J,CAAAA,SAAS,CAAG,KAAK3M,KAAL,CAAW0C,UAAX,CAAsBC,GAAtB,CAA0B,8BAA1B,GAA6D,KAAK3C,KAAL,CAAW0C,UAAX,CAAsBE,GAAtB,CAA0B,8BAA1B,EAA0DC,YAAzI,CAGA,GAAM+J,CAAAA,WAAW,CAAG,CAChB3J,aAAa,CAAE,uBADC,CAEhBC,cAAc,CAAE,+BAFA,CAGhBC,eAAe,CAAE,4BAHD,CAIhB0J,QAAQ,CAAE,gDAJM,CAKhBC,gBAAgB,CAAE,CAAEtM,QAAQ,CAAE,KAAKL,KAAL,CAAWF,KAAX,CAAiBQ,QAA7B,CALF,CAMhBK,UAAU,CAAE,KAAKX,KAAL,CAAWF,KAAX,CAAiBa,UANb,CAOhB;AACAqL,eAAe,CAAE,KAAKA,eARN,CAApB,CAWA,KAAKY,oBAAL,CAA4B,CACxB,CAAE,UAAW,kBAAb,CAAiC,YAAa,uBAA9C,CAAuE,QAAS,OAAhF,CAAyF,YAAa,IAAtG,CAA4G,iBAAkB,YAA9H,CAA4I,cAAe,WAA3J,CADwB,CAA5B,CAKA,GAAMC,CAAAA,eAAe,CAAG,EAAxB,CACA,KAAKD,oBAAL,CAA0BE,OAA1B,CAAkC,SAAAlF,IAAI,QAAIA,CAAAA,IAAI,CAACL,SAAL,GAAmB,IAAnB,CACtCsF,eAAe,CAAC/F,IAAhB,CAAqBc,IAArB,CADsC,CACT,EADK,EAAtC,EAGA;AACA;AACA;AAEA;AAEA,GAAImF,CAAAA,cAAc,CAAG,EAArB,CACA,KAAK/M,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B,iBAA5B,GAAkD,KAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B,iBAA5B,EAA+CD,KAA/C,GAAyD,CAA3G,CACIqM,cAAc,CAAG,CACb,CACI,QAAS,gBADb,CAEI,QAAS,KAAK/M,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BmB,eAA5B,CAA8C,KAAK9B,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BmB,eAA5B,CAA4C+E,KAA1F,CAAkG,GAF/G,CADa,CAIV,CACC,QAAS,YADV,CAEC,QAAS,KAAK7G,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BoB,aAA5B,CAA4C,KAAK/B,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BoB,aAA5B,CAA0C8E,KAAtF,CAA8F,GAFxG,CAJU,CADrB,CAUIkG,cAAc,CAAG,CACb,CACI,QAAS,gBADb,CAEI,QAAS,KAAK/M,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BmB,eAA5B,CAA8C,KAAK9B,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BmB,eAA5B,CAA4C+E,KAA1F,CAAkG,GAF/G,CADa,CAIV,CACC,QAAS,aADV,CAEC,QAAS,KAAK7G,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BqB,gBAA5B,CAA+C,KAAKhC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BqB,gBAA5B,CAA6C6E,KAA5F,CAAoG,GAF9G,CAJU,CAOV,CACC,QAAS,gBADV,CAEC,QAAS,KAAK7G,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BsB,mBAA5B,CAAkD,KAAKjC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BsB,mBAA5B,CAAgD4E,KAAlG,CAA0G,GAFpH,CAPU,CAVrB,CAuBA,mBACI,qDACI,oBAAC,WAAD,EAAa,SAAS,CAAC,4DAAvB,eACI,oBAAC,YAAD,EAAc,KAAK,CAAC,QAApB,CAA6B,cAAc,CAAC,OAA5C,CAAoD,EAAE,CAAC,mBAAvD,EADJ,CAEKkG,cAAc,CAAC5C,MAAf,CAAwB,CAAxB,cACG,oBAAC,KAAD,EAAO,GAAG,CAAE,EAAZ,eACI,oBAAC,mBAAD,EAAqB,cAAc,CAAE4C,cAArC,EADJ,CADH,CAGc,EALnB,cASI,oBAAC,YAAD,EAAc,KAAK,CAAC,QAApB,CAA6B,cAAc,CAAC,OAA5C,CAAoD,EAAE,CAAC,mBAAvD,EATJ,cAUI,oBAAC,GAAD,EAAK,SAAS,CAAE,IAAhB,eACI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eACI,oBAAC,UAAD,EACI,aAAa,CAAE,KAAK/M,KAAL,CAAW2D,IAAX,CAAgBC,aADnC,CAEI,UAAU,CAAE,uBAFhB,CAGI,UAAU,CAAE,KAAK5D,KAAL,CAAWF,KAAX,CAAiBa,UAHjC,CAII,QAAQ,CAAE,KAAKX,KAAL,CAAWF,KAAX,CAAiBQ,QAJ/B,CAKI,UAAU,CAAE,KAAKN,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BqM,YAA5B,EAA4C,KAAKhN,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BZ,qBALxF,CAMI,eAAe,CAAE,yBAACuE,qBAAD,QAA2B,CAAA,MAAI,CAACtE,KAAL,CAAWlC,8BAAX,CAA0CwG,qBAA1C,CAAiE,MAAI,CAACtE,KAAL,CAAWF,KAAX,CAAiBQ,QAAlF,CAA4F,MAAI,CAACN,KAAL,CAAWF,KAAX,CAAiBa,UAA7G,CAA3B,EANrB,CAOI,cAAc,CAAE,KAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAPhD,CAQI,eAAe,CAAC,4BARpB,CASI,SAAS,CAAC,kBATd,CAUI,UAAU,CAAC,YAVf,CAWI,WAAW,CAAC,qBAXhB,CAYI,gBAAgB,CAAE,KAAKnC,KAAL,CAAW/B,gBAZjC,CAaI,WAAW,CAAEwO,WAbjB,CAcI,qBAAqB,CAAE,KAAK5M,KAAL,CAAWwD,qBAdtC,CAeI,KAAK,CAAEiJ,KAfX,CAgBI,SAAS,CAAE,KAAKhL,SAhBpB,CAiBI,UAAU,CAAE,KAAKD,UAjBrB,CAkBI,UAAU,CAAE,IAlBhB,CAmBI,SAAS,CAAE,2BAAM,CAAA,MAAI,CAACrB,KAAL,CAAWhC,oCAAX,CAAgD,uBAAhD,CAAyE,QAAzE,CAAmF,MAAI,CAACgC,KAAL,CAAWF,KAAX,CAAiBQ,QAApG,CAA8G,MAAI,CAACN,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BmB,eAA5B,CAA8C,MAAI,CAAC9B,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BmB,eAA5B,CAA4CpB,KAA1F,CAAkG,CAAC,CAAjN,CACb,MAAI,CAACV,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BqB,gBAA5B,CAA+C,MAAI,CAAChC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BqB,gBAA5B,CAA6CtB,KAA5F,CAAoG,CAAC,CADxF,CAC2F,MAAI,CAACV,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BsB,mBAA5B,CAAkD,MAAI,CAACjC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BsB,mBAA5B,CAAgDvB,KAAlG,CAA0G,CAAC,CADtM,CACyM4L,KADzM,CAAN,EAnBf,CAqBI,cAAc,CAAE,IArBpB,CAsBI,UAAU,CAAE,KAAKtM,KAAL,CAAWF,KAAX,CAAiB2B,UAtBjC,CAuBI,UAAU,CAAE,KAAKD,UAvBrB,CAwBI,WAAW,CAAE,KAAKE,WAxBtB,CAyBI,cAAc,CAAE,KAAKC,cAzBzB,CA2BI,eAAe,CAAE,CACb,CACI,kCACI,oBAAC,cAAD,EACI,aAAa,CAAE,KAAK3B,KAAL,CAAW2D,IAAX,CAAgBC,aADnC,CAEI,gBAAgB,CAAE,KAAK/D,KAAL,CAAWoN,cAAX,EAA6B,EAFnD,CAGI,sBAAsB,CAAE,KAAKpN,KAAL,CAAWqN,oBAAX,EAAmC,EAH/D,CAII,yBAAyB,CAAE,KAAKrN,KAAL,CAAWsN,uBAAX,EAAsC,EAJrE,CAKI,WAAW,CAAE,KAAKtN,KAAL,CAAWuN,SAAX,EAAwB,EALzC,CAMI,iBAAiB,CAAE,KAAKpN,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B,mBAA5B,GAAoD,EAN3E,CAOI,iBAAiB,CAAE,KAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B,mBAA5B,GAAoD,EAP3E,CAQI,cAAc,CAAE,KAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B,gBAA5B,GAAiD,EARrE,CASI,WAAW,CAAE,KAAKX,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BS,WAA5B,EAA2C,EAT5D,CAWI,iBAAiB,CAAE,KAAKnB,iBAX5B,EAFR,CADa,CA3BrB,EADJ,CADJ,cAmDI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eACI,oBAAC,YAAD,EAAc,SAAS,CAAC,oBAAxB,eACI,oBAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,EACK,KAAKD,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BZ,qBAA5B,EAAqD,KAAKC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BZ,qBAA5B,CAAkDoK,MAAlD,CAA2D,CAAhH,EAAqH,KAAKnK,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAAjJ,cACG,qDACI,oBAAC,IAAD,CAAM,MAAN,mBACI,oBAAC,IAAD,CAAM,KAAN,mBACI,0BAAI,SAAS,CAAC,oBAAd,EAAoC,KAAKnC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DkL,gBAA9F,CADJ,CADJ,cAII,oBAAC,IAAD,CAAM,QAAN,EAAe,SAAS,CAAC,+BAAzB,eACI,oBAAC,GAAD,mBACI,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,QAAvB,eACI,0BAAI,SAAS,CAAC,+BAAd,YACQ,KAAKrN,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,aAAN,CAA9B,CADR,eACkE,KAAK7D,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DmL,UAD5H,eAEI,4BAAM,SAAS,4BAAsB,KAAKtN,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DC,kBAA1D,GAAiF7C,iBAAiB,CAAC2E,KAAnG,CAA2G,mBAA3G,CAAiI,KAAKlE,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DC,kBAA1D,GAAiF7C,iBAAiB,CAAC8M,QAAnG,CAA8G,iBAA9G,CAAkI,gBAAzR,2BAAf,EACK,KAAKrM,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,CAA0DoL,mBAD/D,CAFJ,CADJ,CADJ,cAUI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eACI,2BAAK,SAAS,CAAC,qDAAf,eACI,oBAAC,GAAD,CAAK,IAAL,EAAU,SAAS,CAAC,kCAApB,CACI,MAAM,CAAE,KAAK1N,KAAL,CAAWwD,qBAAX,CAAiCmK,OAAjC,CAAyChB,SAAzC,IAAwD,CAAC,CADrE,CAEI,WAAU,KAAKxM,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,aAAN,CAA9B,CAFd,CAGI,WAAS,mBAHb,CAII,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC3B,cAAL,EAAN,EAJb,eAMI,oBAAC,eAAD,EAAiB,IAAI,CAAEhF,UAAvB,CAAmC,KAAK,CAAE,KAAK8C,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,aAAN,CAA9B,CAA1C,EANJ,CADJ,CASK,KAAK7D,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BmB,eAA5B,EAA+C,KAAK9B,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BmB,eAA5B,CAA4CpB,KAA5C,GAAsDpB,YAAY,CAACmO,OAAlH,cACG,oBAAC,GAAD,CAAK,IAAL,EAAU,SAAS,CAAC,kCAApB,CACI,MAAM,CAAE,KAAK5N,KAAL,CAAWwD,qBAAX,CAAiCmK,OAAjC,CAAyChB,SAAzC,IAAwD,CAAC,CADrE,CAEI,WAAU,KAAKxM,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,qBAAN,CAA9B,CAFd,CAGI,WAAS,mBAHb,CAII,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACM,sBAAL,CAA4BqI,SAA5B,CAAN,EAJb,eAMI,oBAAC,eAAD,EAAiB,IAAI,CAAEnP,MAAvB,CAA+B,KAAK,CAAE,KAAK2C,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,qBAAN,CAA9B,CAAtC,EANJ,CADH,CASK,EAlBV,cAmBI,oBAAC,GAAD,CAAK,IAAL,EAAU,SAAS,CAAC,oDAApB,CACI,WAAU,KAAK7D,KAAL,CAAW2D,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,YAAN,CAA9B,CADd,CAEI,WAAS,mBAFb,CAGI,MAAM,CAAE,KAAKhE,KAAL,CAAWwD,qBAAX,CAAiCmK,OAAjC,CAAyCjB,QAAzC,IAAuD,CAAC,CAChE;AAJJ,CAKI,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACzI,aAAL,EAAN,EALb,eAMI,oBAAC,eAAD,EAAiB,IAAI,CAAE7G,UAAvB,EANJ,CAnBJ,CADJ,CAVJ,CADJ,CAJJ,CADJ,cAkDI,oBAAC,IAAD,CAAM,IAAN,MAGQiP,MAAM,CACFA,MAAM,CAAC7F,GAAP,CAAW,SAACuB,IAAD,qBACP,oBAAC,GAAD,MACKA,IAAI,CAACrB,QAAL,CAAc4D,MAAd,CAAuB,CAAvB,CACGvC,IAAI,CAACrB,QAAL,CAAcF,GAAd,CAAkB,SAACG,MAAD,qBACd,oBAAC,GAAD,EAAK,EAAE,CAAE,GAAKoB,IAAI,CAACrB,QAAL,CAAc4D,MAA5B,EAEQ3D,MAAM,CAACD,QAAP,CAAgBF,GAAhB,CAAoB,SAACI,SAAD,CAAe,CAC/B,MACIA,CAAAA,SAAS,CAACE,cAAV,CAAyB,UAAzB,eACI,oBAAC,GAAD,MACKF,SAAS,CAACF,QAAV,CAAmBF,GAAnB,CAAuB,SAAAqH,YAAY,qBAChC,oBAAC,GAAD,EAAK,EAAE,CAAE,GAAKA,YAAY,CAACvD,MAA3B,eACI,oBAAC,SAAD,mBACI,oBAAC,SAAD,MAAYuD,YAAY,CAAC7G,KAAzB,CADJ,cAEI,oBAAC,YAAD,MAAe,GAAf,CAFJ,CADJ,CADgC,EAAnC,CADL,CADJ,cAaI,oBAAC,SAAD,mBACI,oBAAC,SAAD,MAAYJ,SAAS,CAACI,KAAtB,CADJ,cAEI,oBAAC,YAAD,UAAgB,GAAhB,CAFJ,CAdR,CAmBH,CApBD,CAFR,CADc,EAAlB,CADH,CA6BK,EA9BV,CADO,EAAX,CADE,CAoCF,EAvCZ,CAlDJ,CADH,CA+FK,EAhGV,CADJ,CADJ,CAnDJ,CAVJ,CADJ,CAyKK,KAAK7G,KAAL,CAAWF,KAAX,CAAiB0D,SAAjB,eACG,oBAAC,aAAD,EACI,IAAI,CAAE,KAAKxD,KAAL,CAAWF,KAAX,CAAiB0D,SAD3B,CAEI,IAAI,CAAE,KAAKxD,KAAL,CAAWF,KAAX,CAAiB2D,SAAjB,GAA+B,WAA/B,CAA6C,IAA7C,CAAoD,IAF9D,CAGI,UAAU,CAAE,KAAKmB,UAHrB,CAII,SAAS,CAAE,KAAK5E,KAAL,CAAWF,KAAX,CAAiB2D,SAJhC,CAKI,UAAU,CAAE,KAAKzD,KAAL,CAAWF,KAAX,CAAiBe,UALjC,CAMI,UAAU,CAAE,KAAKb,KAAL,CAAWF,KAAX,CAAiBuE,UANjC,CAOI,WAAW,CAAE,KAAKmG,WAPtB,CAQI,KAAK,CAAE,KAAKxK,KAAL,CAAWF,KAAX,CAAiBwD,SAR5B,CASI,aAAa,CAAE,KAAKkB,aATxB,CAUI,YAAY,CAAE,KAAKxE,KAAL,CAAWF,KAAX,CAAiB2L,YAVnC,CAWI,WAAW,CAAE,KAAKzL,KAAL,CAAWnC,WAX5B,CAYI,cAAc,CAAE,KAAKgC,KAAL,CAAW6E,cAAX,EAA6B,EAZjD,CAaI,eAAe,CAAE,KAAK1E,KAAL,CAAWF,KAAX,CAAiB2D,SAAjB,GAA+B,WAA/B,CAA6C,EAA7C,CAAkDoJ,eAbvE,CAcI,YAAY,CAAE,KAAK7M,KAAL,CAAWF,KAAX,CAAiBwD,SAAjB,cACV,oBAAC,KAAD,EAAO,SAAS,CAAE,KAAKtD,KAAL,CAAWF,KAAX,CAAiB2D,SAAnC,CACI,aAAa,CAAE,KAAKzD,KAAL,CAAW2D,IAAX,CAAgBC,aADnC,CAEI,eAAe,CAAE,KAAKsB,eAF1B,CAGI,UAAU,CAAE,KAAKlF,KAAL,CAAWF,KAAX,CAAiBe,UAHjC,CAII,cAAc,CAAE,KAAKhB,KAAL,CAAW6E,cAAX,EAA6B,EAJjD,EADU,CAOR,KAAK1E,KAAL,CAAWF,KAAX,CAAiB2D,SAAjB,GAA+B,WAA/B,cACE,oBAAC,qBAAD,EACI,UAAU,CAAE,KAAKzD,KAAL,CAAWF,KAAX,CAAiBmK,UAAjB,EAA+B,EAD/C,CAEI,UAAU,CAAE,KAAKjK,KAAL,CAAWF,KAAX,CAAiBe,UAFjC,CAGI,UAAU,CAAE,KAAKb,KAAL,CAAWF,KAAX,CAAiBoK,UAAjB,EAA+B,EAH/C,CAII,cAAc,CAAE,KAAKL,cAJzB,EADF,cAOI,oBAAC,wBAAD,EACE,cAAc,CAAE,KAAKhK,KAAL,CAAW6E,cAAX,EAA6B,EAD/C,CAEE,eAAe,CAAE,KAAKQ,eAFxB,CAGE,aAAa,CAAE,KAAKJ,aAHtB,CAIE,gBAAgB,CAAE,KAAKW,gBAJzB,CAKE,aAAa,CAAE,KAAKzF,KAAL,CAAW2D,IAAX,CAAgBC,aALjC,CAME,yBAAyB,CAAE,KAAK5D,KAAL,CAAWF,KAAX,CAAiB6N,yBAN9C,CAOE,qBAAqB,CAAE,KAAK3N,KAAL,CAAWF,KAAX,CAAiB8N,qBAP1C,CAQE,6BAA6B,CAAE,KAAK5N,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BwB,6BAA5B,EAA6D,EAR9F,CASE,SAAS,CAAE,KAAKnC,KAAL,CAAWF,KAAX,CAAiB2D,SAT9B,CAUE,UAAU,CAAE,KAAKzD,KAAL,CAAWF,KAAX,CAAiB6L,UAV/B,CAWE,UAAU,CAAE,KAAK3L,KAAL,CAAWF,KAAX,CAAiBe,UAX/B,CAYE,QAAQ,CAAE,KAAKb,KAAL,CAAWF,KAAX,CAAiBQ,QAZ7B,CAaE,SAAS,CAAE,KAAKN,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BoB,aAA5B,CAA4C,KAAK/B,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BoB,aAA5B,CAA0CrB,KAAtF,CAA8F,CAAC,CAb5G,CAcE,aAAa,CAAE,KAAKV,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BsB,mBAA5B,CAAkD,KAAKjC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4BsB,mBAA5B,CAAgD2F,IAAhD,CAAqDiG,cAAvG,CAAwH,KAdzI,EA5Bd,EA1KR,CADJ,CA4NH,CACD;AACA;AACA;kCAmBA,4BAAmBC,aAAnB,CAAkC,CAC9B,GAAIC,CAAAA,WAAW,CAAG,KAAlB,CAEA,gBACiF,KAAKlO,KADtF,CAAM6E,cAAN,aAAMA,cAAN,CAAsBrB,qBAAtB,aAAsBA,qBAAtB,CAA6Cd,UAA7C,aAA6CA,UAA7C,CACI0K,cADJ,aACIA,cADJ,CACoBC,oBADpB,aACoBA,oBADpB,CAC0CC,uBAD1C,aAC0CA,uBAD1C,CACmEC,SADnE,aACmEA,SADnE,CAIA,GAAI,KAAKpN,KAAL,CAAWF,KAAX,CAAiBQ,QAAjB,CAA0BuB,SAA1B,GAAwCiM,aAAa,CAAChO,KAAd,CAAoBQ,QAApB,CAA6BuB,SAAzE,CAAoF,CAChF,GAAI,KAAK7B,KAAL,CAAWF,KAAX,CAAiBuD,qBAArB,CAA4C,CACxC,KAAKrD,KAAL,CAAWF,KAAX,CAAiBuD,qBAAjB,CAAuC,KAAKrD,KAAL,CAAWF,KAAX,CAAiBQ,QAAjB,CAA0BuB,SAAjE,GACOmM,MAAM,CAACC,MAAP,CAAc,KAAKjO,KAAL,CAAWF,KAAX,CAAiBuD,qBAAjB,CAAuC,KAAKrD,KAAL,CAAWF,KAAX,CAAiBQ,QAAjB,CAA0BuB,SAAjE,CAAd,EAA2FwE,GAA3F,CAA+F,SAAAuB,IAAI,QAClGvE,CAAAA,qBAAqB,CAACyD,IAAtB,CAA2Bc,IAAI,CAAClF,YAAhC,CADkG,EAAnG,CADP,CAGAH,UAAU,CAAG9D,aAAa,CAAC,KAAKuB,KAAL,CAAWF,KAAX,CAAiBuD,qBAAlB,CAAyC,KAAKrD,KAAL,CAAWF,KAAX,CAAiBQ,QAAjB,CAA0BuB,SAAnE,CAA1B,CAEAkM,WAAW,CAAG,IAAd,CACH,CAEJ,CACD,GAAI,KAAK/N,KAAL,CAAWF,KAAX,CAAiB4E,cAAjB,GAAoCoJ,aAAa,CAAChO,KAAd,CAAoB4E,cAA5D,CAA4E,CACxEqJ,WAAW,CAAG,IAAd,CACArJ,cAAc,CAAG,KAAK1E,KAAL,CAAWF,KAAX,CAAiB4E,cAAlC,CACH,CACD,GAAI,KAAK1E,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,GAAgCmN,aAAa,CAAChO,KAAd,CAAoBa,UAAxD,CAAoE,CAEhEoN,WAAW,CAAG,IAAd,CAEA,GAAMjC,CAAAA,aAAa,CAAG,EAAtB,CACA,GAAIoC,CAAAA,gBAAJ,CACA,GAAIC,CAAAA,uBAAJ,CACA,GAAIC,CAAAA,0BAAJ,CACA,GAAIC,CAAAA,YAAJ,CAGA,GAAI,KAAKrO,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B2N,WAAhC,CAA6C,CACzCJ,gBAAgB,CAAGtP,mBAAmB,CAAC,KAAKoB,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B2N,WAA5B,EAA2C,EAA5C,CAAgD,iBAAhD,CAAmE,iBAAnE,CAAsF,SAAtF,CAAiG,WAAjG,CAA8G1L,SAA9G,CAAtC,CACAqK,cAAc,CAAGiB,gBAAgB,CAACzL,GAAjB,CAAqB,YAArB,CAAjB,CACH,CACD,GAAI,KAAKzC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B4N,iBAAhC,CAAmD,CAC/CJ,uBAAuB,CAAGvP,mBAAmB,CAAC,KAAKoB,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B4N,iBAA5B,EAAiD,EAAlD,CAAsD,cAAtD,CAAsE,cAAtE,CAAsF3L,SAAtF,CAAiGA,SAAjG,CAA4GA,SAA5G,CAA7C,CACAsK,oBAAoB,CAAGiB,uBAAuB,CAAC1L,GAAxB,CAA4B,YAA5B,CAAvB,CACH,CACD,GAAI,KAAKzC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B6N,oBAAhC,CAAsD,CAClDJ,0BAA0B,CAAGxP,mBAAmB,CAAC,KAAKoB,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B6N,oBAA5B,EAAoD,EAArD,CAAyD,iBAAzD,CAA4E,iBAA5E,CAA+F,SAA/F,CAA0G,WAA1G,CAAuH5L,SAAvH,CAAhD,CACAuK,uBAAuB,CAAGiB,0BAA0B,CAAC3L,GAA3B,CAA+B,YAA/B,CAA1B,CACH,CACD,GAAI,KAAKzC,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B8N,WAAhC,CAA6C,CACzCJ,YAAY,CAAGzP,mBAAmB,CAAC,KAAKoB,KAAL,CAAWF,KAAX,CAAiBa,UAAjB,CAA4B8N,WAA5B,EAA2C,EAA5C,CAAgD,WAAhD,CAA6D,cAA7D,CAA6E7L,SAA7E,CAAwFA,SAAxF,CAAmGA,SAAnG,CAAlC,CACAwK,SAAS,CAAGiB,YAAY,CAAC5L,GAAb,CAAiB,YAAjB,CAAZ,CACH,CAGD,GAAIsL,WAAJ,CAAiB,CACb,KAAK9I,QAAL,CAAc,CACVP,cAAc,CAAdA,cADU,CACMnC,UAAU,CAAVA,UADN,CACkBc,qBAAqB,CAArBA,qBADlB,CAEV4J,cAAc,CAAdA,cAFU,CAEMC,oBAAoB,CAApBA,oBAFN,CAE4BC,uBAAuB,CAAvBA,uBAF5B,CAGVrB,aAAa,CAAbA,aAHU,CAGKsB,SAAS,CAATA,SAHL,CAAd,EAKH,CACJ,CACJ,C,oCAslBD,+BAAuB,CACnB,GAAMnM,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEjC,cADK,CAEfkC,IAAI,CAAE,CACFR,UAAU,CAAE,EADV,CACcE,UAAU,CAAE+B,SAD1B,CACqCa,SAAS,CAAE,IADhD,CACsDiL,SAAS,CAAE9L,SADjE,CAFS,CAAnB,CAMA,KAAK5C,KAAL,CAAWnC,WAAX,CAAuBoD,UAAvB,EACH,C,0CAlhCD,kCAAgCjB,KAAhC,CAAuCH,KAAvC,CAA8C,CAE1C,GAAIG,KAAK,CAACF,KAAN,CAAY2L,YAAZ,GAA6B,EAA7B,EAAmCzL,KAAK,CAACF,KAAN,CAAY2L,YAAZ,GAA6B5L,KAAK,CAAC4L,YAA1E,CAAwF,CACpFhO,KAAK,CAACiG,IAAN,CAAW1D,KAAK,CAACF,KAAN,CAAY2L,YAAvB,EACAzL,KAAK,CAACF,KAAN,CAAY2L,YAAZ,CAA2B,EAA3B,CACH,CAED,GAAIzL,KAAK,CAACF,KAAN,CAAY4L,KAAZ,GAAsB7L,KAAK,CAAC6L,KAAhC,CAAuC,CACnCjO,KAAK,CAACiO,KAAN,CAAY1L,KAAK,CAACF,KAAN,CAAY4L,KAAxB,EACA1L,KAAK,CAACF,KAAN,CAAY4L,KAAZ,CAAoB,EAApB,CACH,CACD,GAAI1L,KAAK,CAACF,KAAN,CAAY4E,cAAZ,GAA+B9B,SAAnC,CAA8C,CAC1C,MAAO,CAAE8B,cAAc,CAAE,EAAlB,CAAP,CACH,CACD,MAAO,KAAP,CACH,C,mCAjD+BlI,KAAK,CAACmS,S,EA+jC1C,cAAerR,CAAAA,OAAO,CAACsC,eAAD,CAAkB,CACpClC,WAAW,CAAXA,WADoC,CACvBC,UAAU,CAAVA,UADuB,CACXC,uBAAuB,CAAvBA,uBADW,CAEpCC,WAAW,CAAXA,WAFoC,CAEvBC,8BAA8B,CAA9BA,8BAFuB,CAESC,mBAAmB,CAAnBA,mBAFT,CAGpCC,oCAAoC,CAApCA,oCAHoC,CAGEC,gBAAgB,CAAhBA,gBAHF,CAGoBC,2BAA2B,CAA3BA,2BAHpB,CAGiDC,mBAAmB,CAAnBA,mBAHjD,CAGsEC,sBAAsB,CAAtBA,sBAHtE,CAG8FC,kBAAkB,CAAlBA,kBAH9F,CAAlB,CAAP,CAIZd,UAAU,CAACwC,qBAAD,CAJE,CAAf","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPencilAlt, faTrashAlt, faThumbsUp, faUserLock, faClock, faList } from '@fortawesome/free-solid-svg-icons';//,faUserTimes, faTrash\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, FormattedMessage } from 'react-intl';\r\nimport { toast } from 'react-toastify';\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, getDesignTemplateMappingDetail, getMappedFieldProps,\r\n    getDesignTemplateMappingComboService, filterColumnData, reloadDesignTemplateMapping, getTMPFilterRegType, getTMPFilterRegSubType, getTMPFilterSubmit\r\n} from '../../actions';\r\nimport TemplateFilter from './TemplateFilter';\r\nimport { ContentPanel, ReadOnlyText } from '../../components/App.styles';\r\nimport { getControlMap, showEsign, convertDateValuetoString, constructOptionList } from '../../components/CommonScript';//searchData, sortData,\r\nimport ListMaster from '../../components/list-master/list-master.component';\r\n// import DateTimePicker from '../../components/date-time-picker/date-time-picker.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport AddDesignTemplateMapping from './AddDesignTemplateMapping'\r\nimport Esign from '../../pages/audittrail/Esign';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport BreadcrumbComponent from '../../components/Breadcrumb.Component';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport { designProperties, formCode, TemplateType, transactionStatus } from '../../components/Enumeration';\r\n\r\nimport { Affix } from 'rsuite';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport ConfigureScreenFields from './ConfigureScreenFields';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass DesignTemplateMapping extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // const dataState = {\r\n        //     skip: 0,\r\n        //     take: 10,\r\n        // };\r\n\r\n        this.state = {\r\n            isOpen: false,\r\n            designtemplatemappingData: [],\r\n            masterStatus: \"\",\r\n            error: \"\",\r\n            selectedRecord: {},\r\n            operation: \"\",\r\n\r\n            screenName: undefined,\r\n            userLogged: true,\r\n            selectedDesignTemplateMapping: undefined,\r\n\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            showAccordian: true,\r\n            selectedInput: \"\",\r\n        };\r\n        this.searchRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n        this.searchFieldList = [\"sregtemplatename\", \"sversionno\", \"stransdisplaystatus\"];\r\n\r\n        this.designtemplatemappingFieldList = ['ndesigntemplatemappingcode', 'nsampletypecode', 'nformcode',\r\n            'nregtypecode', 'nregsubtypecode', 'nformwisetypecode', 'nreactregtemplatecode', 'ntransactionstatus', 'nversionno'];//'nmahcode',\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    filterComboChange = (event, fieldname) => {\r\n        if (event !== null) {\r\n            // let uRL = \"\";\r\n            let inputData = [];\r\n            if (fieldname === \"sampleType\") {\r\n\r\n                inputData = {\r\n                    userinfo: this.props.Login.userInfo,\r\n                    nflag: 1,\r\n                    nsampletypecode: parseInt(event.value),\r\n\r\n                }\r\n                let masterData = { ...this.props.Login.masterData, defaultsampletype: event }\r\n                let inputParam = { masterData, inputData }\r\n                this.props.getTMPFilterRegType(inputParam)\r\n            }\r\n            else if (fieldname === \"registrationType\") {\r\n\r\n                inputData = {\r\n                    userinfo: this.props.Login.userInfo,\r\n\r\n                    nregtypecode: parseInt(event.value),\r\n                    nsampletypecode: this.props.Login.masterData.defaultsampletype.value,\r\n\r\n                }\r\n                let masterData = { ...this.props.Login.masterData, defaultregtype: event }\r\n                let inputParam = { masterData, inputData }\r\n                this.props.getTMPFilterRegSubType(inputParam)\r\n\r\n            } else if (fieldname === \"registrationSubType\") {\r\n\r\n                let masterData = { ...this.props.Login.masterData, defaultregsubtype: event }\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: { masterData }\r\n                }\r\n\r\n                this.props.updateStore(updateInfo);\r\n            } else {\r\n                let masterData = { ...this.props.Login.masterData, defaultform: event }\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: { masterData }\r\n                }\r\n\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const Layout = this.props.Login.masterData.selectedDesignTemplateMapping &&\r\n            this.props.Login.masterData.selectedDesignTemplateMapping.jsondata\r\n\r\n        let userStatusCSS = \"outline-secondary\";\r\n        if (this.props.Login.masterData.selectedDesignTemplateMapping ? this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus === transactionStatus.ACTIVE\r\n            || this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus === transactionStatus.APPROVED : false) {\r\n            userStatusCSS = \"outline-success\";\r\n        }\r\n        else if (this.props.Login.masterData.selectedDesignTemplateMapping && this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus === transactionStatus.RETIRED) {\r\n            userStatusCSS = \"outline-danger\";\r\n        }\r\n\r\n        const addId = this.state.controlMap.has(\"AddDesignTemplateMapping\") && this.state.controlMap.get(\"AddDesignTemplateMapping\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"DeleteDesignTemplateMapping\") && this.state.controlMap.get(\"DeleteDesignTemplateMapping\").ncontrolcode;\r\n        const approveId = this.state.controlMap.has(\"ApproveDesignTemplateMapping\") && this.state.controlMap.get(\"ApproveDesignTemplateMapping\").ncontrolcode\r\n\r\n\r\n        const filterParam = {\r\n            inputListName: \"DesignTemplateMapping\",\r\n            selectedObject: \"selectedDesignTemplateMapping\",\r\n            primaryKeyField: \"ndesigntemplatemappingcode\",\r\n            fetchUrl: \"designtemplatemapping/getDesignTemplateMapping\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData,\r\n            // unchangeList: [\"FromDate\", \"ToDate\"],\r\n            searchFieldList: this.searchFieldList\r\n\r\n        };\r\n        this.validationColumnList = [\r\n            { \"idsName\": \"IDS_TEMPLATENAME\", \"dataField\": \"nreactregtemplatecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n\r\n\r\n        ]\r\n        const mandatoryFields = [];\r\n        this.validationColumnList.forEach(item => item.mandatory === true ?\r\n            mandatoryFields.push(item) : \"\"\r\n        );\r\n        // let breadCrumbDataDate = convertDateValuetoString(this.props.Login.masterData && this.props.Login.masterData.FromDate,\r\n        //     this.props.Login.masterData && this.props.Login.masterData.ToDate,\r\n        //     this.props.Login.userInfo)\r\n\r\n        // const breadCrumbData = [\r\n\r\n        let breadCrumbData = [];\r\n        this.props.Login.masterData[\"realSampleValue\"] && this.props.Login.masterData[\"realSampleValue\"].value === 4 ?\r\n            breadCrumbData = [\r\n                {\r\n                    \"label\": \"IDS_SAMPLETYPE\",\r\n                    \"value\": this.props.Login.masterData.realSampleValue ? this.props.Login.masterData.realSampleValue.label : \"-\"\r\n                }, {\r\n                    \"label\": \"IDS_SCREEN\",\r\n                    \"value\": this.props.Login.masterData.realFormValue ? this.props.Login.masterData.realFormValue.label : \"-\"\r\n                }\r\n            ] :\r\n            breadCrumbData = [\r\n                {\r\n                    \"label\": \"IDS_SAMPLETYPE\",\r\n                    \"value\": this.props.Login.masterData.realSampleValue ? this.props.Login.masterData.realSampleValue.label : \"-\"\r\n                }, {\r\n                    \"label\": \"IDS_REGTYPE\",\r\n                    \"value\": this.props.Login.masterData.realRegTypeValue ? this.props.Login.masterData.realRegTypeValue.label : \"-\"\r\n                }, {\r\n                    \"label\": \"IDS_REGSUBTYPE\",\r\n                    \"value\": this.props.Login.masterData.realRegSubTypeValue ? this.props.Login.masterData.realRegSubTypeValue.label : \"-\"\r\n                }\r\n            ];\r\n\r\n        return (\r\n            <>\r\n                <ListWrapper className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n                    <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" />\r\n                    {breadCrumbData.length > 0 ?\r\n                        <Affix top={53}>\r\n                            <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n                        </Affix> : \"\"\r\n                    }\r\n                    {/* Start of get display*/}\r\n                    {/* <div className=\"client-listing-wrap mtop-4\"> */}\r\n                    <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" />\r\n                    <Row noGutters={true}>\r\n                        <Col md={4}>\r\n                            <ListMaster\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                screenName={\"DesignTemplateMapping\"}\r\n                                masterData={this.props.Login.masterData}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.DesignTemplateMapping}\r\n                                getMasterDetail={(designtemplatemapping) => this.props.getDesignTemplateMappingDetail(designtemplatemapping, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                                selectedMaster={this.props.Login.masterData.selectedDesignTemplateMapping}\r\n                                primaryKeyField=\"ndesigntemplatemappingcode\"\r\n                                mainField=\"sregtemplatename\"\r\n                                firstField=\"sversionno\"\r\n                                secondField=\"stransdisplaystatus\"\r\n                                filterColumnData={this.props.filterColumnData}\r\n                                filterParam={filterParam}\r\n                                userRoleControlRights={this.state.userRoleControlRights}\r\n                                addId={addId}\r\n                                searchRef={this.searchRef}\r\n                                reloadData={this.reloadData}\r\n                                hidePaging={true}\r\n                                openModal={() => this.props.getDesignTemplateMappingComboService(\"DesignTemplateMapping\", \"create\", this.props.Login.userInfo, this.props.Login.masterData.realSampleValue ? this.props.Login.masterData.realSampleValue.value : -1,\r\n                                    this.props.Login.masterData.realRegTypeValue ? this.props.Login.masterData.realRegTypeValue.value : -1, this.props.Login.masterData.realRegSubTypeValue ? this.props.Login.masterData.realRegSubTypeValue.value : -1, addId)}\r\n                                showFilterIcon={true}\r\n                                showFilter={this.props.Login.showFilter}\r\n                                openFilter={this.openFilter}\r\n                                closeFilter={this.closeFilter}\r\n                                onFilterSubmit={this.onFilterSubmit}\r\n\r\n                                filterComponent={[\r\n                                    {\r\n                                        \"IDS_TEMPLATEFILTER\":\r\n                                            <TemplateFilter\r\n                                                formatMessage={this.props.intl.formatMessage}\r\n                                                filterSampletype={this.state.listSampletype || []}\r\n                                                filterRegistrationType={this.state.listRegistrationType || []}\r\n                                                filterRegistrationSubType={this.state.listRegistrationSubType || []}\r\n                                                filterForms={this.state.listForms || []}\r\n                                                defaultsampletype={this.props.Login.masterData[\"defaultsampletype\"] || {}}\r\n                                                defaultregsubtype={this.props.Login.masterData[\"defaultregsubtype\"] || []}\r\n                                                defaultregtype={this.props.Login.masterData[\"defaultregtype\"] || []}\r\n                                                defaultform={this.props.Login.masterData.defaultform || []}\r\n\r\n                                                filterComboChange={this.filterComboChange}\r\n                                            />\r\n                                    }\r\n                                ]}\r\n                            />\r\n                        </Col>\r\n\r\n\r\n                        <Col md={8}>\r\n                            <ContentPanel className=\"panel-main-content\">\r\n                                <Card className=\"border-0\">\r\n                                    {this.props.Login.masterData.DesignTemplateMapping && this.props.Login.masterData.DesignTemplateMapping.length > 0 && this.props.Login.masterData.selectedDesignTemplateMapping ?\r\n                                        <>\r\n                                            <Card.Header>\r\n                                                <Card.Title>\r\n                                                    <h1 className=\"product-title-main\">{this.props.Login.masterData.selectedDesignTemplateMapping.sregtemplatename}</h1>\r\n                                                </Card.Title>\r\n                                                <Card.Subtitle className=\"text-muted font-weight-normal\">\r\n                                                    <Row>\r\n                                                        <Col md={10} className=\"d-flex\">\r\n                                                            <h2 className=\"product-title-sub flex-grow-1\">\r\n                                                                {`${this.props.intl.formatMessage({ id: \"IDS_VERSION\" })} : ${this.props.Login.masterData.selectedDesignTemplateMapping.sversionno}`}\r\n                                                                <span className={`btn btn-outlined ${this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus === transactionStatus.DRAFT ? \"outline-secondary\" : this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus === transactionStatus.APPROVED ? \"outline-success\" : \"outline-danger\"} btn-sm mx-md-3 mx-sm-2`}>\r\n                                                                    {this.props.Login.masterData.selectedDesignTemplateMapping.stransdisplaystatus}\r\n                                                                </span>\r\n\r\n                                                            </h2>\r\n                                                        </Col>\r\n                                                        <Col md={2}>\r\n                                                            <div className=\"d-flex product-category float-right icon-group-wrap\">\r\n                                                                <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                    hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                                                                    data-tip={this.props.intl.formatMessage({ id: \"IDS_APPROVE\" })}\r\n                                                                    data-for=\"tooltip_list_wrap\"\r\n                                                                    onClick={() => this.onApproveClick()}\r\n                                                                >\r\n                                                                    <FontAwesomeIcon icon={faThumbsUp} title={this.props.intl.formatMessage({ id: \"IDS_APPROVE\" })} />\r\n                                                                </Nav.Link>\r\n                                                                {this.props.Login.masterData.realSampleValue && this.props.Login.masterData.realSampleValue.value !== TemplateType.Masters ?\r\n                                                                    <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                        hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                                                                        data-tip={this.props.intl.formatMessage({ id: \"IDS_CONFIGUREFIELDS\" })}\r\n                                                                        data-for=\"tooltip_list_wrap\"\r\n                                                                        onClick={() => this.openFieldConfiguration(approveId)}\r\n                                                                    >\r\n                                                                        <FontAwesomeIcon icon={faList} title={this.props.intl.formatMessage({ id: \"IDS_CONFIGUREFIELDS\" })} />\r\n                                                                    </Nav.Link>\r\n                                                                    : \"\"}\r\n                                                                <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                                                    data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                                                                    data-for=\"tooltip_list_wrap\"\r\n                                                                    hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                                    // onClick={() => this.ConfirmDelete(this.state.approveId)}>\r\n                                                                    onClick={() => this.ConfirmDelete()}>\r\n                                                                    <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                                </Nav.Link>\r\n                                                            </div>\r\n\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                </Card.Subtitle>\r\n                                            </Card.Header>\r\n                                            <Card.Body>\r\n\r\n                                                {\r\n                                                    Layout ?\r\n                                                        Layout.map((item) =>\r\n                                                            <Row>\r\n                                                                {item.children.length > 0 ?\r\n                                                                    item.children.map((column) =>\r\n                                                                        <Col md={12 / item.children.length}>\r\n                                                                            {\r\n                                                                                column.children.map((component) => {\r\n                                                                                    return (\r\n                                                                                        component.hasOwnProperty(\"children\") ?\r\n                                                                                            <Row>\r\n                                                                                                {component.children.map(componentrow =>\r\n                                                                                                    <Col md={12 / componentrow.length}>\r\n                                                                                                        <FormGroup>\r\n                                                                                                            <FormLabel>{componentrow.label}</FormLabel>\r\n                                                                                                            <ReadOnlyText>{\"-\"}</ReadOnlyText>\r\n                                                                                                        </FormGroup>\r\n                                                                                                    </Col>\r\n                                                                                                )\r\n                                                                                                }\r\n                                                                                            </Row>\r\n                                                                                            :\r\n                                                                                            <FormGroup>\r\n                                                                                                <FormLabel>{component.label}</FormLabel>\r\n                                                                                                <ReadOnlyText> {\"-\"}</ReadOnlyText>\r\n                                                                                            </FormGroup>\r\n                                                                                    )\r\n                                                                                })\r\n                                                                            }\r\n\r\n                                                                        </Col>\r\n                                                                    )\r\n                                                                    : \"\"}\r\n                                                            </Row>\r\n                                                        )\r\n                                                        :\r\n                                                        \"\"\r\n                                                }\r\n                                            </Card.Body>\r\n\r\n                                        </>\r\n                                        : \"\"\r\n                                    }\r\n                                </Card>\r\n                            </ContentPanel>\r\n                        </Col>\r\n                    </Row>\r\n                </ListWrapper>\r\n\r\n\r\n                {this.props.Login.openModal &&\r\n                    <SlideOutModal\r\n                        show={this.props.Login.openModal}\r\n                        size={this.props.Login.operation === 'configure' ? \"xl\" : \"lg\"}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={this.props.Login.operation === 'configure' ? [] : mandatoryFields}\r\n                        addComponent={this.props.Login.loadEsign ?\r\n                            <Esign operation={this.props.Login.operation}\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            : this.props.Login.operation === 'configure' ?\r\n                                <ConfigureScreenFields\r\n                                    designData={this.props.Login.designData || {}}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    dataResult={this.props.Login.dataResult || {}}\r\n                                    onChangeToggle={this.onChangeToggle}\r\n                                />\r\n                                : <AddDesignTemplateMapping\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onComboChange={this.onComboChange}\r\n                                    handleDateChange={this.handleDateChange}\r\n                                    formatMessage={this.props.intl.formatMessage}\r\n                                    designtemplatemappingList={this.props.Login.designtemplatemappingList}\r\n                                    subSampleTemplateList={this.props.Login.subSampleTemplateList}\r\n                                    selectedDesignTemplateMapping={this.props.Login.masterData.selectedDesignTemplateMapping || {}}\r\n                                    operation={this.props.Login.operation}\r\n                                    userLogged={this.props.Login.userLogged}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    nformcode={this.props.Login.masterData.realFormValue ? this.props.Login.masterData.realFormValue.value : -1}\r\n                                    needSubSample={this.props.Login.masterData.realRegSubTypeValue ? this.props.Login.masterData.realRegSubTypeValue.item.nneedsubsample : false}\r\n                                />}\r\n                    />\r\n                }\r\n\r\n            </>\r\n        );\r\n    }\r\n    // onFilterSubmit = () => {\r\n    //     this.reloadData()\r\n    // }\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n\r\n        let inputData = {\r\n            userinfo: this.props.Login.userInfo,\r\n\r\n            // nregtypecode: parseInt(this.props.Login.masterData.realRegTypeValue ? this.props.Login.masterData.realRegTypeValue.value || -1 : -1),\r\n            // nregsubtypecode: parseInt(this.props.Login.masterData.realRegSubTypeValue ? this.props.Login.masterData.realRegSubTypeValue.value || -1 : -1),\r\n            // nsampletypecode: this.props.Login.masterData.realSampleValue.value,\r\n\r\n        };\r\n\r\n        let inputParam = { masterData: this.props.Login.masterData, inputData };\r\n        this.props.reloadDesignTemplateMapping(inputParam);\r\n\r\n\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        let updateState = false\r\n\r\n        let { selectedRecord, userRoleControlRights, controlMap,\r\n            listSampletype, listRegistrationType, listRegistrationSubType, listForms } = this.state;\r\n\r\n\r\n        if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n            if (this.props.Login.userRoleControlRights) {\r\n                this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]\r\n                    && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n\r\n                updateState = true;\r\n            }\r\n\r\n        }\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            updateState = true;\r\n            selectedRecord = this.props.Login.selectedRecord\r\n        }\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n\r\n            updateState = true;\r\n\r\n            const selectedInput = {}\r\n            let Taglstsampletype;\r\n            let TaglistRegistrationType;\r\n            let TaglistRegistrationSubType;\r\n            let ListFormsMap;\r\n\r\n\r\n            if (this.props.Login.masterData.SampleTypes) {\r\n                Taglstsampletype = constructOptionList(this.props.Login.masterData.SampleTypes || [], \"nsampletypecode\", \"ssampletypename\", \"nsorter\", \"undefined\", undefined);\r\n                listSampletype = Taglstsampletype.get(\"OptionList\");\r\n            }\r\n            if (this.props.Login.masterData.registrationTypes) {\r\n                TaglistRegistrationType = constructOptionList(this.props.Login.masterData.registrationTypes || [], \"nregtypecode\", \"sregtypename\", undefined, undefined, undefined);\r\n                listRegistrationType = TaglistRegistrationType.get(\"OptionList\");\r\n            }\r\n            if (this.props.Login.masterData.registrationSubTypes) {\r\n                TaglistRegistrationSubType = constructOptionList(this.props.Login.masterData.registrationSubTypes || [], \"nregsubtypecode\", \"sregsubtypename\", \"nsorter\", \"ascending\", undefined);\r\n                listRegistrationSubType = TaglistRegistrationSubType.get(\"OptionList\");\r\n            }\r\n            if (this.props.Login.masterData.qualisforms) {\r\n                ListFormsMap = constructOptionList(this.props.Login.masterData.qualisforms || [], \"nformcode\", \"sdisplayname\", undefined, undefined, undefined);\r\n                listForms = ListFormsMap.get(\"OptionList\");\r\n            }\r\n\r\n\r\n            if (updateState) {\r\n                this.setState({\r\n                    selectedRecord, controlMap, userRoleControlRights,\r\n                    listSampletype, listRegistrationType, listRegistrationSubType,\r\n                    selectedInput, listForms\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    openFilter = () => {\r\n        let showFilter = !this.props.Login.showFilter\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeFilter = () => {\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n\r\n    onFilterSubmit = () => {\r\n\r\n        let inputData = {\r\n            userinfo: this.props.Login.userInfo,\r\n            nregtypecode: parseInt(this.props.Login.masterData.defaultregtype ? this.props.Login.masterData.defaultregtype.value || -1 : -1),\r\n            nregsubtypecode: parseInt(this.props.Login.masterData.defaultregsubtype ? this.props.Login.masterData.defaultregsubtype.value || -1 : -1),\r\n            nsampletypecode: this.props.Login.masterData.defaultsampletype.value,\r\n            nformcode: this.props.Login.masterData.defaultform ? this.props.Login.masterData.defaultform.value || -1 : -1\r\n\r\n        };\r\n        let masterData = {\r\n            ...this.props.Login.masterData,\r\n            realSampleValue: this.props.Login.masterData.defaultsampletype,\r\n            realFormValue: this.props.Login.masterData.defaultform,\r\n            realRegTypeValue: this.props.Login.masterData.defaultregtype,\r\n            realRegSubTypeValue: this.props.Login.masterData.defaultregsubtype\r\n        }\r\n        let inputParam = { masterData, inputData };\r\n        this.props.getTMPFilterSubmit(inputParam);\r\n    }\r\n\r\n    onApproveClick = () => {\r\n        if (this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus !== transactionStatus.RETIRED) {\r\n\r\n            const ncontrolCode = this.state.controlMap.has(\"ApproveDesignTemplateMapping\") && this.state.controlMap.get(\"ApproveDesignTemplateMapping\").ncontrolcode\r\n            let inputData = [];\r\n            inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n            let postParam = undefined;\r\n            inputData[\"designtemplatemapping\"] = { \"ndesigntemplatemappingcode\": this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"] ? this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"].Value : \"\" };\r\n            inputData[\"designtemplatemapping\"] = this.props.Login.masterData.selectedDesignTemplateMapping;\r\n            postParam = { inputListName: \"DesignTemplateMapping\", selectedObject: \"selectedDesignTemplateMapping\", primaryKeyField: \"ndesigntemplatemappingcode\" };\r\n\r\n\r\n\r\n            const inputParam = {\r\n                inputData: {\r\n                    \"userinfo\": this.props.Login.userInfo,\r\n\r\n                },\r\n                classUrl: 'designtemplatemapping',\r\n                methodUrl: \"DesignTemplateMapping\",\r\n                inputData: inputData,\r\n                operation: \"approve\", postParam\r\n            }\r\n            let saveType;\r\n\r\n            const masterData = this.props.Login.masterData;\r\n\r\n            const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode);\r\n            if (esignNeeded) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData }, saveType, openModal: true, operation: \"approve\"\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n            }\r\n\r\n        }\r\n        else {\r\n\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_TEMPLATERETIRED\" }));\r\n        }\r\n    }\r\n    ConfirmDelete = () => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.deleteTemplate());\r\n    }\r\n    deleteTemplate = () => {\r\n        if ((this.props.Login.masterData.selectedDesignTemplateMapping.ntransactionstatus === transactionStatus.DRAFT)) {\r\n            const ncontrolCode = this.state.controlMap.has(\"DeleteDesignTemplateMapping\") && this.state.controlMap.get(\"DeleteDesignTemplateMapping\").ncontrolcode\r\n            let inputData = [];\r\n            inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n            let postParam = undefined;\r\n            inputData[\"designtemplatemapping\"] = { \"ndesigntemplatemappingcode\": this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"] ? this.props.Login.masterData.selectedDesignTemplateMapping[\"ndesigntemplatemappingcode\"].Value : \"\" };\r\n            inputData[\"designtemplatemapping\"] = this.props.Login.masterData.selectedDesignTemplateMapping;\r\n            postParam = { inputListName: \"DesignTemplateMapping\", selectedObject: \"selectedDesignTemplateMapping\", primaryKeyField: \"ndesigntemplatemappingcode\" };\r\n\r\n\r\n            const inputParam = {\r\n                inputData: {\r\n                    \"userinfo\": this.props.Login.userInfo,\r\n\r\n                },\r\n                classUrl: 'designtemplatemapping',\r\n                methodUrl: \"DesignTemplateMapping\",\r\n                inputData: inputData,\r\n                operation: \"delete\", postParam\r\n            }\r\n            let saveType;\r\n\r\n            const masterData = this.props.Login.masterData;\r\n\r\n            const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode);\r\n            if (esignNeeded) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData }, saveType, openModal: true, operation: \"delete\"\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n            }\r\n\r\n        }\r\n        else {\r\n\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTRECORDTODELETE\" }));\r\n        }\r\n    }\r\n    openFieldConfiguration = (controlCode) => {\r\n        let openModal = true;\r\n        let operation = 'configure';\r\n        let ncontrolcode = controlCode;\r\n        let screenName = \"IDS_FIELDS\"\r\n        let inputParam = {\r\n            inputData: {\r\n                designtemplatemapping: {\r\n                    ndesigntemplatemappingcode: this.props.Login.masterData.selectedDesignTemplateMapping.ndesigntemplatemappingcode\r\n                },\r\n                userinfo: this.props.Login.userInfo\r\n            },\r\n            operation,\r\n            ncontrolcode,\r\n            screenName\r\n        }\r\n        this.props.getMappedFieldProps(inputParam)\r\n    }\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"approve\"\r\n                || this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, loadEsign, selectedRecord, selectedId: null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;;\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n    handleDateChange = (dateName, dateValue) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[dateName] = dateValue;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    getGridJsondata = (templatedata) => {\r\n        let gridItem = [];\r\n        let gridMoreItem = [];\r\n        let masterdatefields = [];\r\n        let editable = [];\r\n        let jdynamiccolumns = [];\r\n        let jnumericcolumns = [];\r\n        let templatePrimaryKey = \"\";\r\n        templatedata && templatedata.map(row =>\r\n            row.children && row.children.map(column => {\r\n                column.children && column.children.map((component, index) => {\r\n                    if (component.hasOwnProperty('children')) {\r\n                        component.children.map(componentRow => {\r\n                            templatePrimaryKey = templatePrimaryKey === \"\" && index === 0 ? componentRow.label : templatePrimaryKey;\r\n                            jdynamiccolumns.push({\r\n                                columnname: componentRow.label,\r\n                                displayname: componentRow.displayname\r\n                            })\r\n                            if (componentRow.inputtype === 'combo') {\r\n                                jnumericcolumns.push({\r\n                                    \"columnname\": componentRow.displaymember,\r\n                                    \"displayname\": componentRow.displayname,\r\n                                    \"foriegntablePK\": componentRow.label,\r\n                                    // \"ismultilingual\": true,\r\n                                    // \"conditionstring\": \" and nformcode in (\"+componentRow.table.item.nformcode+\") \",\r\n                                    \"tablecolumnname\": componentRow.valuemember,\r\n                                    \"foriegntablename\": componentRow.source\r\n                                })\r\n                            }\r\n                            // samplesearchfields.push(componentRow.label)\r\n                            componentRow.inputtype === 'date' && masterdatefields.push({ [designProperties.VALUE]: componentRow.label, dateonly: componentRow.dateonly || false });\r\n                            // displayFields.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label });\r\n                            // componentRow.templatemandatory && listItem.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label })\r\n                            if (componentRow.mandatory || componentRow.templatemandatory) {\r\n                                gridItem.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label })\r\n                            }\r\n                            else {\r\n                                gridMoreItem.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label });\r\n                            }\r\n                            if (!componentRow.templatemandatory) {\r\n                                editable.push({ label: componentRow.label, editableuntill: [8] })\r\n                            }\r\n                            return null;\r\n                        })\r\n                    } else {\r\n                        templatePrimaryKey = templatePrimaryKey === \"\" && index === 0 ? component.label : templatePrimaryKey;\r\n                        jdynamiccolumns.push({\r\n                            columnname: component.label,\r\n                            displayname: component.displayname\r\n                        });\r\n                        if (component.inputtype === 'combo') {\r\n                            jnumericcolumns.push({\r\n                                \"columnname\": component.label,\r\n                                \"displayname\": component.displayname,\r\n                                \"foriegntablePK\": component.label,\r\n                                // \"ismultilingual\": true,\r\n                                \"conditionstring\": \" and nformcode in (\"+component.table.item.nformcode+\") \",\r\n                                \"tablecolumnname\": component.column.value,\r\n                                \"foriegntablename\": \"dynamicmasters\"\r\n                            })\r\n                        }\r\n                        // samplesearchfields.push(component.label)\r\n                        component.inputtype === 'date' && masterdatefields.push({ [designProperties.VALUE]: component.label, dateonly: component.dateonly || false });\r\n                        // displayFields.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label })\r\n                        // component.templatemandatory && listItem.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label })\r\n                        if (component.mandatory || component.templatemandatory) {\r\n                            gridItem.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label })\r\n                        } else {\r\n                            gridMoreItem.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label });\r\n                        }\r\n                        if (!component.templatemandatory) {\r\n                            editable.push({ label: component.label, editableuntill: [8] })\r\n                        }\r\n                        return null;\r\n                    }\r\n\r\n                })\r\n            })\r\n        );\r\n        let jsondata = {\r\n            gridItem,\r\n            gridMoreItem,\r\n            masterdatefields,\r\n            editable\r\n        }\r\n        return { jsondata, jdynamiccolumns, jnumericcolumns, templatePrimaryKey };\r\n    }\r\n    getJsondata = (templatedata) => {\r\n        let displayFields = []\r\n        let listItem = []\r\n        let gridItem = []\r\n        let gridMoreItem = []\r\n        let editable = []\r\n        let subsampleeditable = [];\r\n        let subsamplelistitem = [];\r\n        let sampledatefields = [{ [designProperties.VALUE]: 'dregdate', dateonly: false }];\r\n        let sampledateconstraints = [];\r\n        let subsampledatefields = [];\r\n        let subsampledateconstraints = [];\r\n        let samplesearchfields = [];\r\n        let subsamplesearchfields = [];\r\n        let sampletemplatefields = [];\r\n        let subsampletemplatefields = [];\r\n        let jdynamiccolumns = [];\r\n        let jnumericcolumns = [];\r\n        let testdatefields = [{ [designProperties.VALUE]: 'dtransactiondate', dateonly: false }];\r\n        this.state.selectedRecord.nsubsampletemplatecode && this.state.selectedRecord.nsubsampletemplatecode.item.jsondata.map(row =>\r\n            row.children && row.children.map(column => {\r\n                column.children && column.children.map(component => {\r\n                    if (component.hasOwnProperty('children')) {\r\n                        component.children.map(componentRow => {\r\n                            subsamplesearchfields.push(componentRow.label);\r\n                            subsampleeditable.push({ label: componentRow.label, editableuntill: [17] })\r\n                            if (componentRow.inputtype === 'date') {\r\n                                subsampledatefields.push({ [designProperties.VALUE]: componentRow.label, dateonly: componentRow.dateonly || false });\r\n                                subsampledateconstraints = componentRow.dateConstraintArraySQL ? [...componentRow.dateConstraintArraySQL, ...subsampledateconstraints] : subsampledateconstraints;\r\n                            }\r\n                            subsamplelistitem.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label })\r\n                        }\r\n                        )\r\n                    } else {\r\n                        subsamplesearchfields.push(component.label);\r\n                        subsampleeditable.push({ label: component.label, editableuntill: [17] })\r\n                        if (component.inputtype === 'date') {\r\n                            subsampledatefields.push({ [designProperties.VALUE]: component.label, dateonly: component.dateonly || false });\r\n                            subsampledateconstraints = component.dateConstraintArraySQL ? [...component.dateConstraintArraySQL, ...subsampledateconstraints] : subsampledateconstraints;\r\n                        }\r\n                        subsamplelistitem.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label });\r\n                    }\r\n                })\r\n            })\r\n        )\r\n        templatedata && templatedata.map(row =>\r\n            row.children && row.children.map(column => {\r\n                column.children && column.children.map(component => {\r\n                    if (component.hasOwnProperty('children')) {\r\n                        // let combinedField = [];\r\n                        component.children.map(componentRow => {\r\n                            // combinedField.push(componentRow.label)\r\n                            jdynamiccolumns.push({\r\n                                columnname: componentRow.label,\r\n                                displayname: componentRow.displayname\r\n                            })\r\n                            if (componentRow.hasOwnProperty('child')) {\r\n                                componentRow.child.map(childData => {\r\n                                    jnumericcolumns.push({\r\n                                        \"columnname\": componentRow.label,\r\n                                        \"displayname\": componentRow.displayname,\r\n                                        \"foriegntablePK\": componentRow.label,\r\n                                        // \"ismultilingual\": true,\r\n                                        // \"conditionstring\": \" and nformcode in (140) \",\r\n                                        \"tablecolumnname\": childData.tablecolumnname,\r\n                                        \"foriegntablename\": \"dynamicmasters\"\r\n                                    })\r\n                                })\r\n                            }\r\n                            samplesearchfields.push(componentRow.label)\r\n                            sampletemplatefields.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label })\r\n                            if (componentRow.inputtype === 'date') {\r\n                                sampledatefields.push({ [designProperties.VALUE]: componentRow.label, dateonly: componentRow.dateonly || false });\r\n                                sampledateconstraints = componentRow.dateConstraintArraySQL ? [...componentRow.dateConstraintArraySQL, ...sampledateconstraints] : sampledateconstraints;\r\n                            }\r\n                            displayFields.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label });\r\n                            componentRow.templatemandatory && listItem.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label })\r\n                            if (componentRow.mandatory || componentRow.templatemandatory) {\r\n                                gridItem.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label })\r\n                            }\r\n                            else {\r\n                                gridMoreItem.push({ [designProperties.LABEL]: componentRow.displayname, [designProperties.VALUE]: componentRow.label });\r\n                            }\r\n                            if (!componentRow.templatemandatory) {\r\n                                editable.push({ label: componentRow.label, editableuntill: [17] })\r\n                            }\r\n                            return null;\r\n                        })\r\n                        // let fieldSet = combinedField.join(\"&\")\r\n                        // displayFields.push(fieldSet);\r\n                        // componentRow.templatemandatory && listItem.push(fieldSet)\r\n                        // gridMoreItem.push(fieldSet);\r\n                    } else {\r\n                        jdynamiccolumns.push({\r\n                            columnname: component.label,\r\n                            displayname: component.displayname\r\n                        });\r\n                        if (component.hasOwnProperty('child')) {\r\n                            component.child.map(childData => {\r\n                                jnumericcolumns.push({\r\n                                    \"columnname\": component.label,\r\n                                    \"displayname\": component.displayname,\r\n                                    \"foriegntablePK\": component.label,\r\n                                    // \"ismultilingual\": true,\r\n                                    // \"conditionstring\": \" and nformcode in (140) \",\r\n                                    \"tablecolumnname\": childData.tablecolumnname,\r\n                                    \"foriegntablename\": \"dynamicmasters\"\r\n                                })\r\n                            })\r\n                        }\r\n                        samplesearchfields.push(component.label)\r\n                        sampletemplatefields.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label })\r\n                        if (component.inputtype === 'date') {\r\n                            sampledatefields.push({ [designProperties.VALUE]: component.label, dateonly: component.dateonly || false });\r\n                            sampledateconstraints = component.dateConstraintArraySQL ? [...component.dateConstraintArraySQL, ...sampledateconstraints] : sampledateconstraints;\r\n                        }\r\n                        displayFields.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label })\r\n                        component.templatemandatory && listItem.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label })\r\n                        if (component.mandatory || component.templatemandatory) {\r\n                            gridItem.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label })\r\n                        } else {\r\n                            gridMoreItem.push({ [designProperties.LABEL]: component.displayname, [designProperties.VALUE]: component.label });\r\n                        }\r\n                        if (!component.templatemandatory) {\r\n                            editable.push({ label: component.label, editableuntill: [17] })\r\n                        }\r\n                        return null;\r\n                    }\r\n\r\n                })\r\n            }\r\n            )\r\n        )\r\n        displayFields.push({ [designProperties.LABEL]: { \"en-US\": \"Reg Date\" }, [designProperties.VALUE]: 'dregdate' });\r\n        let obj = {\r\n            sampledisplayfields: displayFields,\r\n            samplelistitem: listItem,\r\n            samplegriditem: gridItem,\r\n            samplegridmoreitem: gridMoreItem,\r\n            subsamplelistitem,\r\n            sampledatefields,\r\n            subsampledatefields,\r\n            samplesearchfields,\r\n            subsamplesearchfields,\r\n            testdatefields,\r\n            sampledateconstraints,\r\n            subsampledateconstraints,\r\n            ...this.props.Login.testListFields\r\n        }\r\n\r\n\r\n        let jsondata = {\r\n            sampletemplatefields,\r\n            subsampletemplatefields: subsamplesearchfields,\r\n            [formCode.SAMPLEREGISTRATION]: {\r\n                ...obj,\r\n                sampleeditable: editable,\r\n                subsampleeditable\r\n            },\r\n            [formCode.RESULTENTRY]: {\r\n                ...obj,\r\n            },\r\n            [formCode.APPROVAL]: {\r\n                ...obj,\r\n            },\r\n            [formCode.JOBALLOCATION]: {\r\n                ...obj,\r\n            },\r\n            [formCode.MYJOBS]: {\r\n                ...obj,\r\n            }\r\n\r\n        }\r\n        return jsondata;\r\n    }\r\n\r\n    onChangeToggle = (event, dataItem, field, dataIndex, formCode) => {\r\n        let designData = this.props.Login.designData;\r\n        let dataResult = this.props.Login.dataResult;\r\n        dataResult[formCode][dataIndex][field] = event.target.checked;\r\n        if (event.target.checked) {\r\n            if (field === 'samplelistitem' && designData[formCode][field].length >= 6) {\r\n                return toast.warn(this.props.intl.formatMessage({ id: \"IDS_MAXIMUMSELECTIONEXCEEDS\" }))\r\n            } else {\r\n                designData[formCode][field].splice(dataIndex, 0, dataItem.realData)\r\n            }\r\n            if (field === 'sampledisplayfields') {\r\n                designData[formCode]['samplesearchfields'].splice(dataIndex, 0, dataItem.label)\r\n            }\r\n        } else {\r\n            if (field === 'sampledisplayfields') {\r\n                designData[formCode]['samplesearchfields'].splice(designData[formCode]['samplesearchfields'].findIndex(x => x === dataItem.label), 1)\r\n            }\r\n            designData[formCode][field].splice(designData[formCode][field].findIndex(x => x[designProperties.VALUE] === dataItem.label), 1)\r\n        }\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { designData, dataResult }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n\r\n        let inputData = [];\r\n        if (this.props.Login.operation === 'configure') {\r\n            inputData = {\r\n                designtemplatemapping: {\r\n                    ndesigntemplatemappingcode: this.props.Login.masterData.selectedDesignTemplateMapping.ndesigntemplatemappingcode,\r\n                    jsondataobj: this.props.Login.designData\r\n                },\r\n                userinfo: this.props.Login.userInfo\r\n            }\r\n        } else {\r\n            let { jsondata, jdynamiccolumns, jnumericcolumns, templatePrimaryKey } = this.props.Login.masterData.realSampleValue.value === 4 ?\r\n                this.getGridJsondata(this.state.selectedRecord.nreactregtemplatecode.item.jsondata)\r\n                : {}\r\n            inputData = {\r\n                \"userinfo\": this.props.Login.userInfo,\r\n                \"ncontrolcode\": this.props.Login.ncontrolCode,\r\n                \"nreactregtemplatecode\": this.state.selectedRecord.nreactregtemplatecode.value,\r\n                \"nsampletypecode\": this.props.Login.masterData.realSampleValue.value,\r\n                \"nregtypecode\": this.props.Login.masterData.realRegTypeValue ? this.props.Login.masterData.realRegTypeValue.value : -1,\r\n                \"nregsubtypecode\": this.props.Login.masterData.realRegSubTypeValue ? this.props.Login.masterData.realRegSubTypeValue.value : -1,\r\n                \"nformcode\": this.props.Login.masterData.realFormValue ? this.props.Login.masterData.realFormValue.value : -1,\r\n                \"nsubsampletemplatecode\": this.state.selectedRecord.nsubsampletemplatecode ? this.state.selectedRecord.nsubsampletemplatecode.value : -1,\r\n                \"jsondataobj\": this.props.Login.masterData.realSampleValue.value === 4 ? jsondata\r\n                    : this.getJsondata(this.state.selectedRecord.nreactregtemplatecode.item.jsondata),\r\n            }\r\n            inputData[\"designtemplatemapping\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n            if (this.props.Login.masterData.realFormValue && this.props.Login.masterData.realFormValue.value === -2) {\r\n                let qf_jsonData = {\r\n                    sdisplayname: {}\r\n                };\r\n                let qbt_jsonData = {\r\n                    tablename: {}\r\n                };\r\n                this.props.Login.languageList.map(lang => {\r\n                    qf_jsonData['sdisplayname'][lang.value] = this.state.selectedRecord.sformname;\r\n                    qbt_jsonData['tablename'][lang.value] = this.state.selectedRecord.sformname\r\n                })\r\n                inputData = {\r\n                    ...inputData,\r\n                    sformname: this.state.selectedRecord.sformname,\r\n                    qf_jsonData,\r\n                    qbt_jsonData,\r\n                    sprimarykeyname: templatePrimaryKey,\r\n                    jdynamiccolumns,\r\n                    jnumericcolumns\r\n                }\r\n            }\r\n            // this.designtemplatemappingFieldList.map(item => {\r\n            //     return inputData[\"designtemplatemapping\"][item] = this.state.selectedRecord[item]\r\n            // });\r\n        }\r\n        let postParam = undefined;\r\n        const inputParam = {\r\n            classUrl: \"designtemplatemapping\",\r\n            methodUrl: \"DesignTemplateMapping\",\r\n            inputData: inputData,\r\n            operation: this.props.Login.operation,\r\n            saveType, formRef, postParam, searchRef: this.searchRef\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (\r\n            showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n    componentWillUnmount() {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                masterData: [], inputParam: undefined, operation: null, modalName: undefined\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, validateEsignCredential,\r\n    updateStore, getDesignTemplateMappingDetail, getMappedFieldProps,\r\n    getDesignTemplateMappingComboService, filterColumnData, reloadDesignTemplateMapping, getTMPFilterRegType, getTMPFilterRegSubType, getTMPFilterSubmit\r\n})(injectIntl(DesignTemplateMapping));\r\n\r\n"]},"metadata":{},"sourceType":"module"}