{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import Axios from'axios';import{toast}from'react-toastify';import{DEFAULT_RETURN}from'./LoginTypes';import{initRequest}from'./LoginAction';import{sortData,constructOptionList,rearrangeDateFormat,formatInputDate}from'../components/CommonScript';import{transactionStatus}from'../components/Enumeration';import{intl}from\"../components/App\";export var getreloadQuotation=function getreloadQuotation(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/quotation/get\"+inputParam.methodUrl,inputParam.inputData).then(function(response){var masterData=response.data;sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{loading:false,dataState:undefined,masterData:_objectSpread({},masterData)}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error.message);});};};export function getClientCategoryComboService(methodParam,selectedRecord){return function(dispatch){var URL=[];URL=rsapi.post(\"/client/getClientByCategory\",{\"userinfo\":methodParam.inputData.userinfo,\"nclientcatcode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){var Client,sclientsiteaddress;var SelectedClient=[];var usertMap=constructOptionList(response[0].data.Client||[],\"nclientcode\",\"sclientname\",undefined,undefined,false);Client=usertMap.get(\"OptionList\");// SelectedClient=response[0].data.selectedClient;\n//  sclientsiteaddress= response[0].data.selectedClientSite.saddress1;\n// selectedRecord={...selectedRecord,...response[0].data.selectedClient}\n// selectedRecord={...selectedRecord,...response[0].data.selectedClientSite.saddress1} \nif(Client.length>0){selectedRecord[\"nclientcode\"]={label:response[0].data.selectedClient.sclientname,value:response[0].data.selectedClient.nclientcode,item:response[0].data.selectedClient};// selectedRecord[\"nclientcode\"]=response[0].data.selectedClient.nclientcode;\n// selectedRecord[\"sclientname\"]=response[0].data.selectedClient.sclientname;\nselectedRecord[\"sclientsiteaddress\"]=response[0].data.selectedClientSite.saddress1;// selectedRecord={response[0].data.selectedClientSite.saddress1}\n}selectedRecord=_objectSpread({},selectedRecord);dispatch({type:DEFAULT_RETURN,payload:{Client:Client,selectedRecord:selectedRecord,loading:false,data:undefined,dataState:undefined,sclientsiteaddress:sclientsiteaddress,SelectedClient:SelectedClient}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getQuotaionClientComboService(methodParam,selectedRecord){return function(dispatch){var URL=[];URL=rsapi.post(\"/client/getSelectedClientDetail\",{\"userinfo\":methodParam.inputData.userinfo,\"nclientcode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){var sclientsiteaddress;var SelectedClient=[];// SelectedClient=response[0].data.selectedClient;\n// sclientsiteaddress= response[0].data.selectedClientSite.saddress1;\nselectedRecord[\"sclientname\"]=response[0].data.selectedClient.sclientname;selectedRecord[\"sclientsiteaddress\"]=response[0].data.selectedClientSite.saddress1;dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,loading:false,data:undefined,dataState:undefined,sclientsiteaddress:sclientsiteaddress,SelectedClient:SelectedClient}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getProjectTypeComboService(methodParam,selectedRecord){return function(dispatch){var URL=[];URL=rsapi.post(\"/projectmaster/getApprovedProjectMasterByProjectType\",{\"userinfo\":methodParam.inputData.userinfo,\"nprojecttypecode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){var ProjectCode,ProjectMaster=[];var srfwdate;var usertMap=constructOptionList(response[0].data.ProjectCode||[],\"nprojectmastercode\",\"sprojectcode\",undefined,undefined,false);ProjectCode=usertMap.get(\"OptionList\");if(ProjectCode.length>0){selectedRecord[\"nprojectmastercode\"]={label:response[0].data.SelectedProjectCode.sprojectcode,value:response[0].data.SelectedProjectCode.nprojectmastercode,item:response[0].data.SelectedProjectCode};srfwdate=rearrangeDateFormat(methodParam.inputData.userinfo,response[0].data.Projectmaster[0].srfwdate);//  srfwdate=response[0].data.Projectmaster[0].srfwdate;\nselectedRecord[\"sprojecttitle\"]=response[0].data.Projectmaster[0].sprojecttitle;selectedRecord[\"srfwdate\"]=srfwdate;selectedRecord[\"suserrolename\"]=response[0].data.Projectmaster[0].suserrolename;selectedRecord[\"susername\"]=response[0].data.Projectmaster[0].susername;// selectedRecord[\"nuserrolecode\"]=response[0].data.Projectmaster[0].nuserrolecode;\nselectedRecord[\"nusercode\"]=response[0].data.Projectmaster[0].nusercode;// ProjectMaster={...response[0].data.Projectmaster[0],srfwdate:srfwdate};\n}dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,loading:false,data:undefined,dataState:undefined,ProjectCode:ProjectCode,ProjectMaster:ProjectMaster}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getProjectCodeComboService(methodParam,selectedRecord){return function(dispatch){var URL=[];URL=rsapi.post(\"/projectmaster/getActiveProjectMasterById\",{\"userinfo\":methodParam.inputData.userinfo,\"nprojectmastercode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){// let ProjectMaster=[];  \nvar srfwdate;// srfwdate= rearrangeDateFormat( methodParam.inputData.userinfo, response[0].data.Projectmaster[0].srfwdate);\n// ProjectMaster=response[0].data.SelectedProjectMaster;\nselectedRecord[\"nprojectmastercode\"]={label:response[0].data.SelectedProjectMaster.sprojectcode,value:response[0].data.SelectedProjectMaster.nprojectmastercode,item:response[0].data.SelectedProjectMaster};// srfwdate=response[0].data.SelectedProjectMaster.srfwdate;\n// ProjectMaster={...response[0].data.SelectedProjectMaster,srfwdate:srfwdate};\nsrfwdate=rearrangeDateFormat(methodParam.inputData.userinfo,response[0].data.SelectedProjectMaster.srfwdate);selectedRecord[\"sprojecttitle\"]=response[0].data.SelectedProjectMaster.sprojecttitle;selectedRecord[\"srfwdate\"]=srfwdate;selectedRecord[\"suserrolename\"]=response[0].data.SelectedProjectMaster.suserrolename;selectedRecord[\"susername\"]=response[0].data.SelectedProjectMaster.susername;// selectedRecord[\"nuserrolecode\"]=response[0].data.SelectedProjectMaster.nuserrolecode;\nselectedRecord[\"nusercode\"]=response[0].data.SelectedProjectMaster.nusercode;dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,loading:false,data:undefined,dataState:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}//Add Quotation\nexport var addQuotation=function addQuotation(operation,userInfo,ncontrolCode,selectedQuotation){return function(dispatch){if(operation===\"create\"||operation===\"update\"&&selectedQuotation.ntransactionstatus!==transactionStatus.APPROVED){dispatch(initRequest(true));var urlArray=[];var selectedRecord={};if(operation===\"create\"||operation===\"update\"){urlArray.push(rsapi.post(\"clientcategory/getClientCategory\",{\"userinfo\":userInfo}));urlArray.push(rsapi.post(\"client/getClientByCategory\",{\"nclientcatcode\":1,\"userinfo\":userInfo}));urlArray.push(rsapi.post(\"projecttype/getProjectType\",{\"userinfo\":userInfo}));urlArray.push(rsapi.post(\"quotation/getQuotationType\",{\"userinfo\":userInfo}));}if(operation===\"update\"){urlArray.push(rsapi.post(\"quotation/getActiveQuotationById\",{\"userinfo\":userInfo,\"nquotationcode\":selectedQuotation.nquotationcode}));}Axios.all(urlArray).then(function(response){var testData={};var _ref=[],ClientCategory=_ref.ClientCategory,Client=_ref.Client,ProjectType=_ref.ProjectType,ProjectMaster=_ref.ProjectMaster,sclientsiteaddress=_ref.sclientsiteaddress,QuotationType=_ref.QuotationType;if(operation===\"create\"){ClientCategory=constructOptionList(response[0].data||[],\"nclientcatcode\",\"sclientcatname\",false,false,true).get(\"OptionList\");//       Client = constructOptionList(response[1].data || [], \"nclientcode\", \"sclientname\", false, false, true).get(\"OptionList\");\nProjectType=constructOptionList(response[2].data||[],\"nprojecttypecode\",\"sprojecttypename\",false,false,true).get(\"OptionList\");QuotationType=constructOptionList(response[3].data||[],\"nquotationtypecode\",\"squotationname\",false,false,true).get(\"OptionList\");selectedRecord[\"dquotationdate\"]=new Date();// selectedRecord[\"dquotationdate\"] = formatInputDate(new Date(), true);\n}else if(operation===\"update\"){var editData=response[4].data.SelectedQuotation;ProjectMaster=response[4].data.SelectedQuotation;// sclientsiteaddress = editData.sclientsiteaddress;\nselectedRecord[\"sclientsiteaddress\"]=editData.sclientsiteaddress;selectedRecord[\"sinvoiceaddress\"]=editData.sinvoiceaddress;selectedRecord[\"sprojecttitle\"]=editData.sprojecttitle;selectedRecord[\"sdescription\"]=editData.sdescription;selectedRecord[\"sdeviationremarks\"]=editData.sdeviationremarks;selectedRecord[\"suserrolename\"]=editData.suserrolename;selectedRecord[\"susername\"]=editData.susername;// selectedRecord[\"nuserrolecode\"] = editData.nuserrolecode;\nselectedRecord[\"nusercode\"]=editData.nusercode;selectedRecord=_objectSpread({},selectedRecord);ClientCategory=constructOptionList(response[0].data||[],\"nclientcatcode\",\"sclientcatname\",false,false,true).get(\"OptionList\");Client=constructOptionList(response[1].data.Client||[],\"nclientcode\",\"sclientname\",false,false,true).get(\"OptionList\");ProjectType=constructOptionList(response[2].data||[],\"nprojecttypecode\",\"sprojecttypename\",false,false,true).get(\"OptionList\");QuotationType=constructOptionList(response[3].data||[],\"nquotationtypecode\",\"squotationname\",false,false,true).get(\"OptionList\");selectedRecord[\"nprojecttypecode\"]={\"value\":editData[\"nprojecttypecode\"],\"label\":editData[\"sprojecttypename\"]};selectedRecord[\"nclientcatcode\"]={\"value\":editData[\"nclientcatcode\"],\"label\":editData[\"sclientcatname\"]};selectedRecord[\"nclientcode\"]={\"value\":editData[\"nclientcode\"],\"label\":editData[\"sclientname\"]};selectedRecord[\"nquotationtypecode\"]={\"value\":editData[\"nquotationtypecode\"],\"label\":editData[\"squotationname\"]};selectedRecord[\"nprojectmastercode\"]={\"value\":editData[\"nprojectmastercode\"],\"label\":editData[\"sprojectcode\"]};selectedRecord[\"srfwdate\"]=rearrangeDateFormat(userInfo,editData.srfwdate);selectedRecord[\"dquotationdate\"]=rearrangeDateFormat(userInfo,editData.squotationdate);}dispatch({type:DEFAULT_RETURN,payload:{openModal:true,ProjectType:ProjectType,operation:operation,ClientCategory:ClientCategory,Client:Client,ProjectMaster:ProjectMaster,sclientsiteaddress:sclientsiteaddress,QuotationType:QuotationType,screenName:\"IDS_QUOTATION\",modalScreenSize:false,selectedRecord:selectedRecord,ncontrolCode:ncontrolCode,testData:testData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};};export var GrossQuotation=function GrossQuotation(operation,userInfo,ncontrolCode,selectedQuotation){return function(dispatch){//  if (operation === \"create\" || (operation === \"update\" && selectedQuotation.ntransactionstatus !== transactionStatus.RETIRED)) {\ndispatch(initRequest(true));var urlArray=[];var selectedRecord={};urlArray.push(rsapi.post(\"discountband/getDiscountBand\",{\"userinfo\":userInfo}));urlArray.push(rsapi.post(\"vatband/getVATBand\",{\"userinfo\":userInfo}));urlArray.push(rsapi.post(\"quotation/getQuotationGrossAmount\",{\"nquotationcode\":selectedQuotation.nquotationcode,\"userinfo\":userInfo}));Axios.all(urlArray).then(function(response){var _ref2=[],DiscountBand=_ref2.DiscountBand,VATBand=_ref2.VATBand;DiscountBand=constructOptionList(response[0].data||[],\"ndiscountbandcode\",\"sdiscountbandname\",false,false,true).get(\"OptionList\");VATBand=constructOptionList(response[1].data||[],\"nvatbandcode\",\"svatbandname\",false,false,true).get(\"OptionList\");var QuotationGrossAmount=response[2].data;if(QuotationGrossAmount[0].ndiscountpercentage>0||QuotationGrossAmount[0].nvatpercentage>0){selectedRecord[\"ndiscountpercentage\"]=QuotationGrossAmount[0].ndiscountpercentage;selectedRecord[\"nvatpercentage\"]=QuotationGrossAmount[0].nvatpercentage;//  selectedRecord[\"ndiscountamount\"] = QuotationGrossAmount[0].ndiscountamount; \n//   selectedRecord[\"nvatamount\"] = QuotationGrossAmount[0].nvatamount; \nselectedRecord[\"DiscountAmount\"]=QuotationGrossAmount[0].ndiscountamount;selectedRecord[\"VatAmount\"]=QuotationGrossAmount[0].nvatamount;selectedRecord[\"TotalNetAmount\"]=QuotationGrossAmount[0].ntotalgrossamount+selectedRecord[\"VatAmount\"]-selectedRecord[\"DiscountAmount\"];selectedRecord[\"nvatbandcode\"]={\"value\":QuotationGrossAmount[0][\"nvatbandcode\"],\"label\":QuotationGrossAmount[0][\"svatbandname\"]};selectedRecord[\"ndiscountbandcode\"]={\"value\":QuotationGrossAmount[0][\"ndiscountbandcode\"],\"label\":QuotationGrossAmount[0][\"sdiscountbandname\"]};}else{/*                 selectedRecord[\"ndiscountpercentage\"]= DiscountBand[0].item.namount;\r\n                    selectedRecord[\"nvatpercentage\"] = VATBand[0].item.namount;\r\n\r\n                    selectedRecord[\"nvatbandcode\"] = {\r\n                        \"value\": VATBand[0][\"value\"],\r\n                        \"label\": VATBand[0][\"label\"]\r\n                    };\r\n\r\n                    selectedRecord[\"ndiscountbandcode\"] = {\r\n                        \"value\": DiscountBand[0][\"value\"],\r\n                        \"label\": DiscountBand[0][\"label\"]\r\n                    }; \r\n\r\n                    selectedRecord[\"DiscountAmount\"]=QuotationGrossAmount[0].ntotalgrossamount * (DiscountBand[0].item.namount/100);\r\n                    selectedRecord[\"VatAmount\"]=QuotationGrossAmount[0].ntotalgrossamount * (VATBand[0].item.namount/100);\r\n     //             selectedRecord[\"TotalNetAmount\"]=QuotationGrossAmount[0].ntotalgrossamount+(selectedRecord[\"DiscountAmount\"]-selectedRecord[\"VatAmount\"]);\r\n                    selectedRecord[\"TotalNetAmount\"]=(QuotationGrossAmount[0].ntotalgrossamount+selectedRecord[\"VatAmount\"])-selectedRecord[\"DiscountAmount\"];\r\n\r\n*/selectedRecord[\"ndiscountpercentage\"]=0;selectedRecord[\"nvatpercentage\"]=0;selectedRecord[\"nvatbandcode\"]=\"\";selectedRecord[\"ndiscountbandcode\"]=\"\";selectedRecord[\"DiscountAmount\"]=0;selectedRecord[\"VatAmount\"]=0;selectedRecord[\"TotalNetAmount\"]=QuotationGrossAmount[0].ntotalgrossamount;}dispatch({type:DEFAULT_RETURN,payload:{openModal:true,DiscountBand:DiscountBand,modalScreenSize:false,operation:operation,VATBand:VATBand,QuotationGrossAmount:QuotationGrossAmount,screenName:\"IDS_CALCULATEPRICING\",selectedRecord:selectedRecord,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});//  } else {\n//         toast.warn(intl.formatMessage({id: \"IDS_SELECTDRAFTVERSION\"}));\n//  }\n};};//Quotation Record Click \nexport var getQuotation=function getQuotation(quotationItem,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/quotation/getActiveQuotationById\",{nquotationcode:quotationItem.nquotationcode,userinfo:userInfo}).then(function(response){var masterData1=_objectSpread(_objectSpread({},masterData),response.data);// ...masterData,\n// ...response.data\nmasterData=masterData1;sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{// masterData,\nloading:false,dataState:undefined,masterData:masterData}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error.message);});};};export function getQuotationAddTestService(screenName,operation,masterData,userInfo,ncontrolCode){return function(dispatch){if(masterData.SelectedQuotation.ntransactionstatus===transactionStatus.DRAFT){dispatch(initRequest(true));rsapi.post(\"quotation/getQuotationUnmappedTest\",{\"nquotationcode\":masterData.SelectedQuotation[\"nquotationcode\"],userinfo:userInfo}).then(function(response){var masterData1=_objectSpread(_objectSpread({},masterData),response.data);masterData=masterData1;dispatch({type:DEFAULT_RETURN,payload:{QuotationTestList:response.data,masterData:masterData,modalScreenSize:false,openModal:true,operation:operation,screenName:screenName,ncontrolCode:ncontrolCode,//selectedRecord, \nloading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};}export function getQuotationPricingEditService(editParam){return function(dispatch){// screenName, operation, masterData, userInfo, ncontrolCode\n//console.log(\"editParam:\", editParam);\nif(editParam.masterData.SelectedQuotation.ntransactionstatus===transactionStatus.DRAFT){dispatch(initRequest(true));rsapi.post(\"quotation/getQuotationPrice\",{\"nquotationcode\":editParam.masterData.SelectedQuotation[\"nquotationcode\"],\"nquotationtestcode\":editParam.editRow?editParam.editRow.nquotationtestcode:null,userinfo:editParam.userInfo}).then(function(response){var selectedRecord=[];if(editParam.editRow){selectedRecord.push(response.data[\"SelectedQuotationPrice\"]);}else{selectedRecord=sortData(response.data[\"QuotationPrice\"]);}dispatch({type:DEFAULT_RETURN,payload:{//pricingTestList:testList, \n//testPriceList:response.data[\"TestPrice\"],\nopenModal:true,modalScreenSize:false,operation:editParam.operation,screenName:editParam.screenName,ncontrolCode:editParam.ncontrolCode,selectedRecord:selectedRecord,selectedId:editParam.editRow?editParam.editRow.nquotationtestcode:null,loading:false,quotationDataState:editParam.quotationDataState}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/QuotationAction.js"],"names":["rsapi","Axios","toast","DEFAULT_RETURN","initRequest","sortData","constructOptionList","rearrangeDateFormat","formatInputDate","transactionStatus","intl","getreloadQuotation","inputParam","dispatch","post","methodUrl","inputData","then","response","masterData","data","type","payload","loading","dataState","undefined","catch","error","message","getClientCategoryComboService","methodParam","selectedRecord","URL","userinfo","primarykey","all","Client","sclientsiteaddress","SelectedClient","usertMap","get","length","label","selectedClient","sclientname","value","nclientcode","item","selectedClientSite","saddress1","status","warn","getQuotaionClientComboService","getProjectTypeComboService","ProjectCode","ProjectMaster","srfwdate","SelectedProjectCode","sprojectcode","nprojectmastercode","Projectmaster","sprojecttitle","suserrolename","susername","nusercode","getProjectCodeComboService","SelectedProjectMaster","addQuotation","operation","userInfo","ncontrolCode","selectedQuotation","ntransactionstatus","APPROVED","urlArray","push","nquotationcode","testData","ClientCategory","ProjectType","QuotationType","Date","editData","SelectedQuotation","sinvoiceaddress","sdescription","sdeviationremarks","squotationdate","openModal","screenName","modalScreenSize","formatMessage","id","GrossQuotation","DiscountBand","VATBand","QuotationGrossAmount","ndiscountpercentage","nvatpercentage","ndiscountamount","nvatamount","ntotalgrossamount","getQuotation","quotationItem","masterData1","getQuotationAddTestService","DRAFT","QuotationTestList","getQuotationPricingEditService","editParam","editRow","nquotationtestcode","selectedId","quotationDataState"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport Axios from 'axios';\r\nimport {toast} from 'react-toastify';\r\nimport { DEFAULT_RETURN} from './LoginTypes';\r\nimport { initRequest } from './LoginAction';\r\nimport { sortData ,constructOptionList,rearrangeDateFormat,formatInputDate } from '../components/CommonScript';\r\nimport { transactionStatus } from '../components/Enumeration';\r\nimport { intl } from \"../components/App\"; \r\n\r\nexport const getreloadQuotation = (inputParam) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/quotation/get\" + inputParam.methodUrl, inputParam.inputData)\r\n            .then(response => {\r\n                const masterData = response.data\r\n                sortData(masterData);\r\n                    \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        dataState: undefined,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            // quotation: inputParam.inputData.quotation\r\n                            \r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}\r\n\r\nexport function getClientCategoryComboService(methodParam,selectedRecord) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let URL = [];\r\n\r\n            URL=rsapi.post(\"/client/getClientByCategory\", { \"userinfo\": methodParam.inputData.userinfo, \"nclientcatcode\":  methodParam.inputData.primarykey  })\r\n\r\n         dispatch(initRequest(true));\r\n\r\n        Axios.all([URL])\r\n\r\n            .then(response => {\r\n\r\n                let Client,sclientsiteaddress;\r\n                let SelectedClient=[];\r\n             \r\n\r\n                const usertMap = constructOptionList(response[0].data.Client || [], \"nclientcode\",\"sclientname\", undefined, undefined, false);              \r\n\r\n                Client = usertMap.get(\"OptionList\");\r\n\r\n                // SelectedClient=response[0].data.selectedClient;\r\n               //  sclientsiteaddress= response[0].data.selectedClientSite.saddress1;\r\n                // selectedRecord={...selectedRecord,...response[0].data.selectedClient}\r\n                // selectedRecord={...selectedRecord,...response[0].data.selectedClientSite.saddress1} \r\n\r\n                if(Client.length>0){\r\n                    \r\n                    selectedRecord[\"nclientcode\"]=  {\r\n                        label: response[0].data.selectedClient.sclientname,\r\n                        value: response[0].data.selectedClient.nclientcode,\r\n                        item: response[0].data.selectedClient\r\n                    }\r\n                    // selectedRecord[\"nclientcode\"]=response[0].data.selectedClient.nclientcode;\r\n                    // selectedRecord[\"sclientname\"]=response[0].data.selectedClient.sclientname;\r\n                    selectedRecord[\"sclientsiteaddress\"]=response[0].data.selectedClientSite.saddress1;\r\n                    // selectedRecord={response[0].data.selectedClientSite.saddress1}\r\n                }\r\n                \r\n               selectedRecord = {...selectedRecord}\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n\r\n                     { Client,selectedRecord, loading: false, data: undefined, dataState: undefined,sclientsiteaddress,SelectedClient } })\r\n\r\n            })\r\n\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n\r\n                if (error.response.status === 500) {\r\n\r\n                    toast.error(error.message);\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    toast.warn(error.response.data);\r\n\r\n                }\r\n\r\n            })\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function getQuotaionClientComboService(methodParam,selectedRecord) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let URL = [];\r\n\r\n            URL=rsapi.post(\"/client/getSelectedClientDetail\", { \"userinfo\": methodParam.inputData.userinfo, \"nclientcode\":  methodParam.inputData.primarykey  })\r\n\r\n         dispatch(initRequest(true));\r\n\r\n        Axios.all([URL])\r\n\r\n            .then(response => {\r\n\r\n                let sclientsiteaddress;\r\n                let SelectedClient=[];\r\n\r\n                // SelectedClient=response[0].data.selectedClient;\r\n                // sclientsiteaddress= response[0].data.selectedClientSite.saddress1;\r\n                selectedRecord[\"sclientname\"]=response[0].data.selectedClient.sclientname;\r\n                selectedRecord[\"sclientsiteaddress\"]=response[0].data.selectedClientSite.saddress1;\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n\r\n                     { selectedRecord, loading: false, data: undefined, dataState: undefined,sclientsiteaddress,SelectedClient } })\r\n\r\n            })\r\n\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n\r\n                if (error.response.status === 500) {\r\n\r\n                    toast.error(error.message);\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    toast.warn(error.response.data);\r\n\r\n                }\r\n\r\n            })\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function getProjectTypeComboService(methodParam,selectedRecord) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let URL = [];\r\n\r\n            URL=rsapi.post(\"/projectmaster/getApprovedProjectMasterByProjectType\", { \"userinfo\": methodParam.inputData.userinfo, \"nprojecttypecode\":  methodParam.inputData.primarykey  })\r\n\r\n         dispatch(initRequest(true));\r\n\r\n        Axios.all([URL])\r\n\r\n            .then(response => {\r\n\r\n                let ProjectCode,ProjectMaster=[];    \r\n                let srfwdate;\r\n\r\n                const usertMap = constructOptionList(response[0].data.ProjectCode || [], \"nprojectmastercode\",\"sprojectcode\", undefined, undefined, false);              \r\n\r\n                ProjectCode = usertMap.get(\"OptionList\");\r\n    \r\n                if(ProjectCode.length>0){\r\n\r\n                    selectedRecord[\"nprojectmastercode\"]=  {\r\n                                label: response[0].data.SelectedProjectCode.sprojectcode,\r\n                                value: response[0].data.SelectedProjectCode.nprojectmastercode,\r\n                                item: response[0].data.SelectedProjectCode}\r\n\r\n                    srfwdate= rearrangeDateFormat( methodParam.inputData.userinfo, response[0].data.Projectmaster[0].srfwdate);\r\n                //  srfwdate=response[0].data.Projectmaster[0].srfwdate;\r\n                    selectedRecord[\"sprojecttitle\"]=response[0].data.Projectmaster[0].sprojecttitle;\r\n                    selectedRecord[\"srfwdate\"]=srfwdate;\r\n                    selectedRecord[\"suserrolename\"]=response[0].data.Projectmaster[0].suserrolename;\r\n                    selectedRecord[\"susername\"]=response[0].data.Projectmaster[0].susername;\r\n                    // selectedRecord[\"nuserrolecode\"]=response[0].data.Projectmaster[0].nuserrolecode;\r\n                    selectedRecord[\"nusercode\"]=response[0].data.Projectmaster[0].nusercode;\r\n                    // ProjectMaster={...response[0].data.Projectmaster[0],srfwdate:srfwdate};\r\n                }\r\n               \r\n\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n\r\n                     { selectedRecord, loading: false, data: undefined, dataState: undefined,ProjectCode,ProjectMaster } })\r\n\r\n            })\r\n\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n\r\n                if (error.response.status === 500) {\r\n\r\n                    toast.error(error.message);\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    toast.warn(error.response.data);\r\n\r\n                }\r\n\r\n            })\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function getProjectCodeComboService(methodParam,selectedRecord) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let URL = [];\r\n\r\n            URL=rsapi.post(\"/projectmaster/getActiveProjectMasterById\", { \"userinfo\": methodParam.inputData.userinfo, \"nprojectmastercode\":  methodParam.inputData.primarykey  })\r\n\r\n         dispatch(initRequest(true));\r\n\r\n        Axios.all([URL])\r\n\r\n            .then(response => {\r\n\r\n                // let ProjectMaster=[];  \r\n                let srfwdate;  \r\n               \r\n                // srfwdate= rearrangeDateFormat( methodParam.inputData.userinfo, response[0].data.Projectmaster[0].srfwdate);\r\n                \r\n                // ProjectMaster=response[0].data.SelectedProjectMaster;\r\n\r\n                selectedRecord[\"nprojectmastercode\"]=  {\r\n                    label: response[0].data.SelectedProjectMaster.sprojectcode,\r\n                    value: response[0].data.SelectedProjectMaster.nprojectmastercode,\r\n                    item: response[0].data.SelectedProjectMaster}\r\n\r\n                // srfwdate=response[0].data.SelectedProjectMaster.srfwdate;\r\n                // ProjectMaster={...response[0].data.SelectedProjectMaster,srfwdate:srfwdate};\r\n\r\n                srfwdate= rearrangeDateFormat( methodParam.inputData.userinfo, response[0].data.SelectedProjectMaster.srfwdate);\r\n                selectedRecord[\"sprojecttitle\"]=response[0].data.SelectedProjectMaster.sprojecttitle;\r\n                selectedRecord[\"srfwdate\"]=srfwdate;\r\n                selectedRecord[\"suserrolename\"]=response[0].data.SelectedProjectMaster.suserrolename;\r\n                selectedRecord[\"susername\"]=response[0].data.SelectedProjectMaster.susername;\r\n                // selectedRecord[\"nuserrolecode\"]=response[0].data.SelectedProjectMaster.nuserrolecode;\r\n                selectedRecord[\"nusercode\"]=response[0].data.SelectedProjectMaster.nusercode;\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n\r\n                     { selectedRecord, loading: false, data: undefined, dataState: undefined } })\r\n\r\n            })\r\n\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n\r\n                if (error.response.status === 500) {\r\n\r\n                    toast.error(error.message);\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    toast.warn(error.response.data);\r\n\r\n                }\r\n\r\n            })\r\n\r\n    }\r\n\r\n}\r\n\r\n//Add Quotation\r\nexport const addQuotation = (operation, userInfo, ncontrolCode,selectedQuotation ) => {\r\n    return function (dispatch) {\r\n     if (operation === \"create\" || (operation === \"update\" && selectedQuotation.ntransactionstatus !== transactionStatus.APPROVED)) {\r\n                dispatch(initRequest(true));\r\n            const urlArray = [\r\n            ];\r\n            let selectedRecord = {};\r\n\r\n             if (operation === \"create\" || operation === \"update\") {\r\n\r\n                urlArray.push(rsapi.post(\"clientcategory/getClientCategory\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n\r\n                urlArray.push(rsapi.post(\"client/getClientByCategory\", {\r\n                    \"nclientcatcode\": 1,\r\n                    \"userinfo\": userInfo\r\n                })); \r\n\r\n\r\n                urlArray.push(rsapi.post(\"projecttype/getProjectType\", {\r\n                    \"userinfo\": userInfo \r\n                    \r\n                })); \r\n         \r\n                urlArray.push(rsapi.post(\"quotation/getQuotationType\", {\r\n                    \"userinfo\": userInfo \r\n                    \r\n                })); \r\n            } \r\n             if (operation === \"update\"){\r\n\r\n                urlArray.push(rsapi.post(\"quotation/getActiveQuotationById\", {\r\n                    \"userinfo\": userInfo,\r\n                    \"nquotationcode\": selectedQuotation.nquotationcode\r\n                }));\r\n\r\n            }\r\n\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n\r\n               \r\n                let testData = {};\r\n\r\n                let {ClientCategory,Client,ProjectType,ProjectMaster,sclientsiteaddress,QuotationType}=[]\r\n                \r\n\r\n              if (operation === \"create\") {\r\n                   \r\n                   \r\n                     ClientCategory = constructOptionList(response[0].data || [], \"nclientcatcode\", \"sclientcatname\", false, false, true).get(\"OptionList\");\r\n                   \r\n              //       Client = constructOptionList(response[1].data || [], \"nclientcode\", \"sclientname\", false, false, true).get(\"OptionList\");\r\n\r\n                     ProjectType = constructOptionList(response[2].data || [], \"nprojecttypecode\", \"sprojecttypename\", false, false, true).get(\"OptionList\");\r\n                     QuotationType = constructOptionList(response[3].data || [], \"nquotationtypecode\", \"squotationname\", false, false, true).get(\"OptionList\");\r\n\r\n                    selectedRecord[\"dquotationdate\"] = new Date();\r\n                    // selectedRecord[\"dquotationdate\"] = formatInputDate(new Date(), true);\r\n                     \r\n\r\n                }else if (operation === \"update\") {\r\n                    \r\n                    const editData = response[4].data.SelectedQuotation;\r\n                    ProjectMaster=response[4].data.SelectedQuotation;\r\n\r\n                    // sclientsiteaddress = editData.sclientsiteaddress;\r\n                    selectedRecord[\"sclientsiteaddress\"]=editData.sclientsiteaddress;\r\n                    selectedRecord[\"sinvoiceaddress\"] = editData.sinvoiceaddress;\r\n                    selectedRecord[\"sprojecttitle\"] = editData.sprojecttitle;\r\n                    selectedRecord[\"sdescription\"] = editData.sdescription;\r\n                    selectedRecord[\"sdeviationremarks\"] = editData.sdeviationremarks;\r\n                    selectedRecord[\"suserrolename\"] = editData.suserrolename;\r\n                    selectedRecord[\"susername\"] = editData.susername;\r\n                    // selectedRecord[\"nuserrolecode\"] = editData.nuserrolecode;\r\n                    selectedRecord[\"nusercode\"] = editData.nusercode;\r\n                   \r\n                \r\n                    selectedRecord = {...selectedRecord}\r\n\r\n                   \r\n                ClientCategory = constructOptionList(response[0].data || [], \"nclientcatcode\", \"sclientcatname\", false, false, true).get(\"OptionList\");\r\n                Client = constructOptionList(response[1].data.Client || [], \"nclientcode\", \"sclientname\", false, false, true).get(\"OptionList\");\r\n                ProjectType = constructOptionList(response[2].data || [], \"nprojecttypecode\", \"sprojecttypename\", false, false, true).get(\"OptionList\");\r\n                QuotationType = constructOptionList(response[3].data || [], \"nquotationtypecode\", \"squotationname\", false, false, true).get(\"OptionList\");\r\n\r\n                          \r\n\r\n                    selectedRecord[\"nprojecttypecode\"] = {\r\n                        \"value\": editData[\"nprojecttypecode\"],\r\n                        \"label\":  editData[\"sprojecttypename\"]\r\n                    };\r\n\r\n                    selectedRecord[\"nclientcatcode\"] = {\r\n                        \"value\": editData[\"nclientcatcode\"],\r\n                        \"label\": editData[\"sclientcatname\"]\r\n                    };\r\n\r\n                    selectedRecord[\"nclientcode\"] = {\r\n                        \"value\": editData[\"nclientcode\"],\r\n                        \"label\": editData[\"sclientname\"]\r\n                    };\r\n                    \r\n                    selectedRecord[\"nquotationtypecode\"] = {\r\n                        \"value\": editData[\"nquotationtypecode\"],\r\n                        \"label\": editData[\"squotationname\"]\r\n                    };\r\n\r\n                    selectedRecord[\"nprojectmastercode\"] = {\r\n                        \"value\": editData[\"nprojectmastercode\"],\r\n                        \"label\": editData[\"sprojectcode\"]\r\n                    };\r\n                  \r\n                selectedRecord[\"srfwdate\"] = rearrangeDateFormat(userInfo,editData.srfwdate);\r\n                selectedRecord[\"dquotationdate\"] = rearrangeDateFormat(userInfo,editData.squotationdate);\r\n               \r\n                }\r\n                   \r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n  \r\n                            openModal: true,\r\n                            ProjectType,\r\n                            operation: operation,ClientCategory,Client,ProjectMaster,sclientsiteaddress,QuotationType,\r\n                            screenName: \"IDS_QUOTATION\",modalScreenSize:false,\r\n                            selectedRecord,\r\n                            ncontrolCode,\r\n                            testData,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n         } else {\r\n                          \r\n                toast.warn(intl.formatMessage({id: \"IDS_SELECTDRAFTVERSION\"}));\r\n\r\n         }\r\n    }\r\n}\r\n\r\nexport const GrossQuotation = (operation, userInfo, ncontrolCode,selectedQuotation ) => {\r\n    return function (dispatch) {\r\n    //  if (operation === \"create\" || (operation === \"update\" && selectedQuotation.ntransactionstatus !== transactionStatus.RETIRED)) {\r\n                dispatch(initRequest(true));\r\n            const urlArray = [\r\n            ];\r\n            let selectedRecord = {};\r\n\r\n                urlArray.push(rsapi.post(\"discountband/getDiscountBand\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n\r\n                urlArray.push(rsapi.post(\"vatband/getVATBand\", {\r\n                    \"userinfo\": userInfo\r\n                })); \r\n\r\n                urlArray.push(rsapi.post(\"quotation/getQuotationGrossAmount\", {\r\n                    \"nquotationcode\": selectedQuotation.nquotationcode,\r\n                    \"userinfo\": userInfo\r\n                })); \r\n\r\n            \r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n\r\n                let {DiscountBand,VATBand}=[]\r\n                \r\n                DiscountBand = constructOptionList(response[0].data || [], \"ndiscountbandcode\", \"sdiscountbandname\", false, false, true).get(\"OptionList\");\r\n                VATBand = constructOptionList(response[1].data || [], \"nvatbandcode\", \"svatbandname\", false, false, true).get(\"OptionList\");\r\n                const QuotationGrossAmount= response[2].data;\r\n\r\n                if(QuotationGrossAmount[0].ndiscountpercentage >0 || QuotationGrossAmount[0].nvatpercentage >0){\r\n\r\n                    selectedRecord[\"ndiscountpercentage\"]= QuotationGrossAmount[0].ndiscountpercentage;\r\n                    selectedRecord[\"nvatpercentage\"] = QuotationGrossAmount[0].nvatpercentage;  \r\n                //  selectedRecord[\"ndiscountamount\"] = QuotationGrossAmount[0].ndiscountamount; \r\n               //   selectedRecord[\"nvatamount\"] = QuotationGrossAmount[0].nvatamount; \r\n                    selectedRecord[\"DiscountAmount\"] = QuotationGrossAmount[0].ndiscountamount; \r\n                    selectedRecord[\"VatAmount\"] = QuotationGrossAmount[0].nvatamount;\r\n                    selectedRecord[\"TotalNetAmount\"]=(QuotationGrossAmount[0].ntotalgrossamount+selectedRecord[\"VatAmount\"])-selectedRecord[\"DiscountAmount\"];\r\n\r\n                    selectedRecord[\"nvatbandcode\"] = {\r\n                        \"value\": QuotationGrossAmount[0][\"nvatbandcode\"],\r\n                        \"label\":  QuotationGrossAmount[0][\"svatbandname\"]\r\n                    };\r\n\r\n                    selectedRecord[\"ndiscountbandcode\"] = {\r\n                        \"value\": QuotationGrossAmount[0][\"ndiscountbandcode\"],\r\n                        \"label\": QuotationGrossAmount[0][\"sdiscountbandname\"]\r\n                    }; \r\n\r\n\r\n                }else {\r\n\r\n   /*                 selectedRecord[\"ndiscountpercentage\"]= DiscountBand[0].item.namount;\r\n                    selectedRecord[\"nvatpercentage\"] = VATBand[0].item.namount;\r\n\r\n                    selectedRecord[\"nvatbandcode\"] = {\r\n                        \"value\": VATBand[0][\"value\"],\r\n                        \"label\": VATBand[0][\"label\"]\r\n                    };\r\n\r\n                    selectedRecord[\"ndiscountbandcode\"] = {\r\n                        \"value\": DiscountBand[0][\"value\"],\r\n                        \"label\": DiscountBand[0][\"label\"]\r\n                    }; \r\n\r\n                    selectedRecord[\"DiscountAmount\"]=QuotationGrossAmount[0].ntotalgrossamount * (DiscountBand[0].item.namount/100);\r\n                    selectedRecord[\"VatAmount\"]=QuotationGrossAmount[0].ntotalgrossamount * (VATBand[0].item.namount/100);\r\n     //             selectedRecord[\"TotalNetAmount\"]=QuotationGrossAmount[0].ntotalgrossamount+(selectedRecord[\"DiscountAmount\"]-selectedRecord[\"VatAmount\"]);\r\n                    selectedRecord[\"TotalNetAmount\"]=(QuotationGrossAmount[0].ntotalgrossamount+selectedRecord[\"VatAmount\"])-selectedRecord[\"DiscountAmount\"];\r\n\r\n*/\r\n                    selectedRecord[\"ndiscountpercentage\"]= 0;\r\n                    selectedRecord[\"nvatpercentage\"] = 0;\r\n                    selectedRecord[\"nvatbandcode\"] =\"\";\r\n                    selectedRecord[\"ndiscountbandcode\"] = \"\";\r\n                    selectedRecord[\"DiscountAmount\"]=0;\r\n                    selectedRecord[\"VatAmount\"]=0;\r\n                    selectedRecord[\"TotalNetAmount\"]=QuotationGrossAmount[0].ntotalgrossamount;\r\n\r\n                }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n  \r\n                            openModal: true,\r\n                            DiscountBand,modalScreenSize:false,\r\n                            operation: operation,VATBand,QuotationGrossAmount,\r\n                            screenName: \"IDS_CALCULATEPRICING\",\r\n                            selectedRecord,\r\n                            ncontrolCode,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n        //  } else {\r\n                          \r\n        //         toast.warn(intl.formatMessage({id: \"IDS_SELECTDRAFTVERSION\"}));\r\n\r\n        //  }\r\n    }\r\n}\r\n\r\n//Quotation Record Click \r\nexport const getQuotation = (quotationItem, userInfo, masterData) => {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/quotation/getActiveQuotationById\", {\r\n            nquotationcode: quotationItem.nquotationcode,\r\n                userinfo: userInfo\r\n            })\r\n            .then(response => {\r\n                \r\n\r\n                    let masterData1  = {...masterData,\r\n\r\n                        ...response.data }\r\n\r\n                    // ...masterData,\r\n                    // ...response.data\r\n                    masterData=masterData1\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                       // masterData,\r\n                        loading: false,\r\n                        dataState: undefined,\r\n                        masterData\r\n                        \r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}\r\n\r\nexport function getQuotationAddTestService(screenName, operation, masterData, userInfo, ncontrolCode){\r\n    return function (dispatch) {    \r\n        if (masterData.SelectedQuotation.ntransactionstatus === transactionStatus.DRAFT){     \r\n        \r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"quotation/getQuotationUnmappedTest\",{\r\n            \"nquotationcode\":masterData.SelectedQuotation[\"nquotationcode\"], \r\n            userinfo:userInfo})\r\n\r\n        .then(response=>{\r\n\r\n            let masterData1  = {...masterData,\r\n\r\n                ...response.data }\r\n                masterData=masterData1                       \r\n                dispatch({type: DEFAULT_RETURN, payload:{ \r\n                                                        QuotationTestList:response.data,\r\n                                                        masterData,modalScreenSize:false,\r\n                                                        openModal:true,\r\n                                                        operation, screenName, ncontrolCode,\r\n                                                        //selectedRecord, \r\n                                                        loading:false}});\r\n            })\r\n            .catch(error=>{\r\n                dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n                if (error.response.status === 500){\r\n                    toast.error(error.message);\r\n                } \r\n                else{               \r\n                    toast.warn(error.response.data);\r\n                }      \r\n            }) \r\n    }\r\n    else{\r\n        toast.warn(intl.formatMessage({id: \"IDS_SELECTDRAFTVERSION\"}));\r\n    }\r\n}}\r\n\r\n\r\nexport function getQuotationPricingEditService(editParam){\r\n    return function (dispatch) {    \r\n       // screenName, operation, masterData, userInfo, ncontrolCode\r\n       //console.log(\"editParam:\", editParam);\r\n        if (editParam.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.DRAFT){     \r\n        \r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"quotation/getQuotationPrice\",{\"nquotationcode\":editParam.masterData.SelectedQuotation[\"nquotationcode\"], \r\n                                                \"nquotationtestcode\":editParam.editRow ? editParam.editRow.nquotationtestcode :null,\r\n                                                userinfo:editParam.userInfo})\r\n\r\n        .then(response=>{\r\n                   \r\n                let selectedRecord =[];\r\n                if (editParam.editRow){\r\n                    selectedRecord.push(response.data[\"SelectedQuotationPrice\"]);\r\n                }\r\n                else{\r\n                    selectedRecord = sortData(response.data[\"QuotationPrice\"])\r\n                }\r\n                dispatch({type: DEFAULT_RETURN, payload:{//pricingTestList:testList, \r\n                                                        //testPriceList:response.data[\"TestPrice\"],\r\n                                                        openModal:true,modalScreenSize:false,\r\n                                                        operation:editParam.operation,\r\n                                                        screenName:editParam.screenName, \r\n                                                        ncontrolCode:editParam.ncontrolCode,\r\n                                                        selectedRecord, \r\n                                                        selectedId:editParam.editRow ? editParam.editRow.nquotationtestcode :null,\r\n                                                        loading:false,\r\n                                                        quotationDataState:editParam.quotationDataState}});\r\n            })\r\n            .catch(error=>{\r\n                dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n                if (error.response.status === 500){\r\n                    toast.error(error.message);\r\n                } \r\n                else{               \r\n                    toast.warn(error.response.data); \r\n                }      \r\n            }) \r\n    }\r\n    else{\r\n        toast.warn(intl.formatMessage({id: \"IDS_SELECTDRAFTVERSION\"}));\r\n    }\r\n}}\r\n\r\n"]},"metadata":{},"sourceType":"module"}