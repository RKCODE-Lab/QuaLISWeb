{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{toast}from'react-toastify';import{injectIntl,FormattedMessage}from'react-intl';import{Row,Col,Card,Nav,FormGroup,FormLabel}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faCopy,faPencilAlt,faThumbsUp,faTrashAlt,faPlus}from'@fortawesome/free-solid-svg-icons';import DataGrid from'../../components/data-grid/data-grid.component';import{callService,crudMaster,validateEsignCredential,updateStore,filterColumnData,getEditTestPriceVersionService,getTestPriceVersionDetail,getPricingAddTestService,getPricingEditService}from'../../actions';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,getControlMap}from'../../components/CommonScript';import{process}from'@progress/kendo-data-query';import{transactionStatus}from'../../components/Enumeration';import ListMaster from'../../components/list-master/list-master.component';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import{ReadOnlyText,ContentPanel}from'../../components/App.styles';import AddType1Component from'../../components/type1component/AddType1Component';//import AddUser from './AddUser';\n//import UserTabs from './UserTabs';\nimport Esign from'../audittrail/Esign';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import AddPricingTest from'./AddPricingTest';import EditTestPricing from'./EditTestPricing';import{isText}from'domhandler';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var TestMasterPricing=/*#__PURE__*/function(_React$Component){_inherits(TestMasterPricing,_React$Component);var _super=_createSuper(TestMasterPricing);function TestMasterPricing(props){var _this;_classCallCheck(this,TestMasterPricing);_this=_super.call(this,props);_this.openModal=function(inputParam){var updateInfo={typeName:DEFAULT_RETURN,data:{selectedRecord:{},operation:inputParam.operation,ncontrolCode:inputParam.ncontrolcode,selectedId:null,openModal:true,screenName:_this.props.intl.formatMessage({id:'IDS_TESTPRICEVERSION'})}};_this.props.updateStore(updateInfo);};_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.data,event.dataState),priceDataState:event.dataState});};_this.confirmDelete=function(deleteId){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.deleteOrApproveTestPriceVersion(\"TestPriceVersion\",_this.props.Login.masterData.SelectedTestPriceVersion,\"delete\",deleteId);});};_this.deleteTestPrice=function(deleteParam){var postParam={inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\",primaryKeyField:\"npriceversioncode\"};var inputParam={classUrl:\"testpricing\",methodUrl:\"TestPrice\",postParam:postParam,//displayName: ,\ninputData:{\"testprice\":deleteParam.selectedRecord,//.dataItem,\n\"npriceversioncode\":_this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode,\"userinfo\":_this.props.Login.userInfo//postParam \n},operation:\"delete\",priceDataState:_this.state.priceDataState};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:\"IDS_TESTPRICE\"}),operation:deleteParam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;var selectedId=_this.props.Login.selectedId;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"||_this.props.Login.operation===\"approve\"){loadEsign=false;openModal=false;selectedRecord={};selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}}else{openModal=false;selectedRecord={};selectedId=null;}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:selectedId}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});};_this.onNumericInputOnChange=function(value,name){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,primaryFieldKey){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;else selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{if(primaryFieldKey&&event.target.name===\"ncost\"){var index=selectedRecord.findIndex(function(item){return item.ntestpricedetailcode===primaryFieldKey;});if(/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){selectedRecord[index][\"ncost\"]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){var versionData=[];versionData[\"userinfo\"]=_this.props.Login.userInfo;var postParam=undefined;if(_this.props.Login.operation===\"update\"){// edit\npostParam={inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\",primaryKeyField:\"npriceversioncode\"};versionData[\"testpriceversion\"]=JSON.parse(JSON.stringify(_this.props.Login.selectedRecord));versionData[\"sversionname\"]=_this.state.selectedRecord[\"sversionname\"]||\"\";versionData[\"sdescription\"]=_this.state.selectedRecord[\"sdescription\"]||\"\";}else{//add               \nversionData[\"testpriceversion\"]={\"nsitecode\":_this.props.Login.userInfo.nmastersitecode,\"ntransactionstatus\":transactionStatus.DRAFT,\"sversionname\":_this.state.selectedRecord[\"sversionname\"]||\"\",\"sdescription\":_this.state.selectedRecord[\"sdescription\"]||\"\"};if(_this.props.Login.operation===\"copy\"){versionData[\"testpriceversion\"][\"npriceversioncode\"]=_this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode;}}if(versionData[\"testpriceversion\"].hasOwnProperty('esignpassword')){if(versionData[\"testpriceversion\"]['esignpassword']===''){delete versionData[\"testpriceversion\"]['esigncomments'];delete versionData[\"testpriceversion\"]['esignpassword'];}}var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"TestPriceVersion\",inputData:versionData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.onSaveTestPrice=function(saveType,formRef){// console.log(\"this.props.Login.selectedRecord:\", this.props.Login.selectedRecord);\nvar testPriceData={\"userinfo\":_this.props.Login.userInfo,\"testpriceversion\":_this.props.Login.masterData.SelectedTestPriceVersion,\"npriceversioncode\":_this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode};var postParam=undefined;var priceDataState=undefined;var selectedId=null;if(_this.props.Login.operation===\"update\"){// edit\npriceDataState=_this.state.priceDataState;selectedId=_this.props.Login.selectedId;postParam={inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\",primaryKeyField:\"npriceversioncode\"};testPriceData[\"testpricelist\"]=JSON.parse(JSON.stringify(_this.props.Login.selectedRecord));}else{//add               \nvar priceList=[];_this.state.selectedRecord[\"ntestcode\"]&&_this.state.selectedRecord[\"ntestcode\"].map(function(item){return priceList.push({ntestcode:item.value});});testPriceData[\"testpricelist\"]=priceList;}if(testPriceData[\"testpriceversion\"].hasOwnProperty('esignpassword')){if(testPriceData[\"testpriceversion\"]['esignpassword']===''){delete testPriceData[\"testpriceversion\"]['esigncomments'];delete testPriceData[\"testpriceversion\"]['esignpassword'];delete testPriceData[\"testpriceversion\"][\"agree\"];}}//console.log(\"update data:\", testPriceData);\nvar inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"TestPrice\",inputData:testPriceData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.Login.isClearSearch,selectedId:selectedId,priceDataState:priceDataState};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.deleteOrApproveTestPriceVersion=function(methodUrl,SelectedTestPriceVersion,operation,ncontrolCode){if(SelectedTestPriceVersion.ntransactionstatus===transactionStatus.DRAFT){var postParam={inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\",primaryKeyField:\"npriceversioncode\",primaryKeyValue:SelectedTestPriceVersion.npriceversioncode,fetchUrl:\"testpricing/getTestPriceVersion\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:methodUrl,postParam:postParam,inputData:{\"userinfo\":_this.props.Login.userInfo,\"testpriceversion\":SelectedTestPriceVersion},operation:operation,isClearSearch:_this.props.Login.isClearSearch};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"IDS_TESTPRICEVERSION\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDRAFTTESTPRICEVERSION\"}));}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputParam={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:\"testpricing\",methodUrl:\"TestPriceVersion\",displayName:\"IDS_TESTPRICEVERSION\",userInfo:_this.props.Login.userInfo,isClearSearch:_this.props.Login.isClearSearch};_this.props.callService(inputParam);};var _priceDataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={masterStatus:\"\",error:\"\",selectedRecord:{},operation:\"\",SelectedTestPriceVersion:undefined,screenName:undefined,userRoleControlRights:[],controlMap:new Map(),isClearSearch:false,data:[],dataResult:[],priceDataState:_priceDataState};_this.searchRef=React.createRef();// this.emailRef = React.createRef();\n_this.confirmMessage=new ConfirmMessage();// this.versionFieldList = ['sversionname', 'sdescription'];\n_this.versionFieldList=[{\"idsName\":\"IDS_VERSIONNAME\",\"dataField\":\"sversionname\",\"width\":\"200px\",\"fieldLength\":\"100\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"200px\",\"fieldLength\":\"255\",\"mandatory\":false,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textarea\"}];_this.extractedColumnList=[{\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestname\",\"width\":\"200px\"},{\"idsName\":\"IDS_COST\",\"dataField\":\"ncost\",\"width\":\"200px\"}];_this.mandatoryFields=[{\"idsName\":\"IDS_VERSIONNAME\",\"dataField\":\"sversionname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];_this.mandatoryTestFields=[{\"idsName\":\"IDS_TEST\",\"dataField\":\"ntestcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];_this.searchFieldList=[\"sversionname\",\"sversionno\",\"sdescription\",\"sversionstatus\"];return _this;}_createClass(TestMasterPricing,[{key:\"render\",value:function render(){var _this2=this;var versionStatusCSS=\"outline-secondary\";var activeIconCSS=\"fa fa-check\";if(this.props.Login.masterData.SelectedTestPriceVersion&&this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus===transactionStatus.APPROVED){versionStatusCSS=\"outline-success\";}else if(this.props.Login.masterData.SelectedTestPriceVersion&&this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus===transactionStatus.RETIRED){versionStatusCSS=\"outline-danger\";activeIconCSS=\"\";}else if(this.props.Login.masterData.SelectedTestPriceVersion&&this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus===transactionStatus.DRAFT){activeIconCSS=\"\";}var addId=this.state.controlMap.has(\"AddTestPriceVersion\")&&this.state.controlMap.get(\"AddTestPriceVersion\").ncontrolcode;var editId=this.state.controlMap.has(\"EditTestPriceVersion\")&&this.state.controlMap.get(\"EditTestPriceVersion\").ncontrolcode;var deleteId=this.state.controlMap.has(\"DeleteTestPriceVersion\")&&this.state.controlMap.get(\"DeleteTestPriceVersion\").ncontrolcode;var approveId=this.state.controlMap.has(\"ApproveTestPriceVersion\")&&this.state.controlMap.get(\"ApproveTestPriceVersion\").ncontrolcode;var copyId=this.state.controlMap.has(\"CopyTestPriceVersion\")&&this.state.controlMap.get(\"CopyTestPriceVersion\").ncontrolcode;var addPriceId=this.state.controlMap.has(\"AddTestPrice\")&&this.state.controlMap.get(\"AddTestPrice\").ncontrolcode;var updatePriceId=this.state.controlMap.has(\"EditTestPrice\")&&this.state.controlMap.get(\"EditTestPrice\").ncontrolcode;// const deletePriceId = this.state.controlMap.has(\"DeleteTestPrice\") && this.state.controlMap.get(\"DeleteTestPrice\").ncontrolcode;\nvar filterParam={inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\",primaryKeyField:\"npriceversioncode\",fetchUrl:\"testpricing/getTestPriceVersion\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,searchFieldList:this.searchFieldList};var addParam={screenName:\"IDS_TESTMASTERPRICING\",operation:\"create\",primaryKeyName:\"npriceversioncode\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolcode:addId};var editParam={screenName:this.props.intl.formatMessage({id:'IDS_TESTPRICEVERSION'}),operation:\"update\",primaryKeyName:\"npriceversioncode\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolcode:editId,inputListName:\"TestPriceVersion\",selectedObject:\"SelectedTestPriceVersion\"};var copyParam={screenName:\"IDS_TESTMASTERPRICING\",operation:\"copy\",primaryKeyName:\"npriceversioncode\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolcode:copyId};var editTestPriceParam={screenName:\"IDS_PRICE\",\"operation\":\"update\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,ncontrolCode:updatePriceId};//console.log(\"props:\", this.props.Login.masterData.TestPriceVersion);\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster,{screenName:this.props.intl.formatMessage({id:\"IDS_TESTMASTERPRICING\"}),masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.TestPriceVersion,getMasterDetail:function getMasterDetail(testPriceVersion){return _this2.props.getTestPriceVersionDetail(testPriceVersion,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:this.props.Login.masterData.SelectedTestPriceVersion,primaryKeyField:\"npriceversioncode\",mainField:\"sversionname\",firstField:\"sversionno\",secondField:\"sversionstatus\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData,openModal:function openModal(){return _this2.openModal(addParam);},isMultiSelecct:false,hidePaging:false,isClearSearch:this.props.Login.isClearSearch})),/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},this.props.Login.masterData.TestPriceVersion&&this.props.Login.masterData.TestPriceVersion.length>0&&this.props.Login.masterData.SelectedTestPriceVersion?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},this.props.Login.masterData.SelectedTestPriceVersion.sversionname),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-outlined \".concat(versionStatusCSS,\" btn-sm ml-3\")},activeIconCSS!==\"\"?/*#__PURE__*/React.createElement(\"i\",{class:activeIconCSS}):\"\",this.props.Login.masterData.SelectedTestPriceVersion.sversionstatus)),/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"editTestPriceVersion\",hidden:this.state.userRoleControlRights.indexOf(editId)===-1,className:\"btn btn-circle outline-grey mr-2\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_EDIT\"})//data-for=\"tooltip_list_wrap\"\n,onClick:function onClick(){return _this2.props.getEditTestPriceVersionService(editParam);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"deleteTestPriceVersion\",className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"})// data-for=\"tooltip_list_wrap\"\n,hidden:this.state.userRoleControlRights.indexOf(deleteId)===-1,onClick:function onClick(){return _this2.confirmDelete(deleteId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"approveTestPriceVersion\",className:\"btn btn-circle outline-grey mr-2\",hidden:this.state.userRoleControlRights.indexOf(approveId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_APPROVE\"})//data-for=\"tooltip_list_wrap\"\n,onClick:function onClick(){return _this2.deleteOrApproveTestPriceVersion(\"TestPriceVersion\",_this2.props.Login.masterData.SelectedTestPriceVersion,\"approve\",approveId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faThumbsUp})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"copyTestPriceVersion\",className:\"btn btn-circle outline-grey mr-2\",hidden:this.state.userRoleControlRights.indexOf(approveId)===-1,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_COPY\"}),onClick:function onClick(){return _this2.openModal(copyParam);}// onClick={() => this.copyTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion,\n//     \"copy\", approveId)}\n},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faCopy})))))),/*#__PURE__*/React.createElement(Card.Body,{className:\"form-static-wrap\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_DESCRIPTION\",message:\"Description\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.SelectedTestPriceVersion.sdescription)))),/*#__PURE__*/React.createElement(Card,{className:\"at-tabs border-0\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"addPrice\",className:\"add-txt-btn\",hidden:this.state.userRoleControlRights.indexOf(addPriceId)===-1,onClick:function onClick(){return _this2.props.getPricingAddTestService(\"IDS_TEST\",\"create\",_this2.props.Login.masterData,_this2.props.Login.userInfo,addPriceId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_TEST\",defaultMessage:\"Test\"})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"updatePrice\",className:\"add-txt-btn\",hidden:this.state.userRoleControlRights.indexOf(updatePriceId)===-1,onClick:function onClick(){return _this2.props.getPricingEditService(_objectSpread(_objectSpread({},editTestPriceParam),{},{\"updateType\":\"All\",priceDataState:undefined}));}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_PRICE\",defaultMessage:\"Price\"}))))),/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:\"ntestpricedetailcode\",data:this.state.data,dataResult:this.state.dataResult,dataState:this.state.priceDataState,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList,controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,fetchRecord:this.props.getPricingEditService,editParam:_objectSpread(_objectSpread({},editTestPriceParam),{},{\"updateType\":\"Single\",priceDataState:this.state.priceDataState}),deleteRecord:this.deleteTestPrice,deleteParam:{operation:\"delete\"},methodUrl:\"TestPrice\"// reloadData={this.reloadData}\n,addRecord:function addRecord(){return _this2.openModal(addId);},pageable:true,scrollable:'scrollable'// gridHeight = {'600px'}\n,isActionRequired:true,isToolBarRequired:false,selectedId:this.props.Login.selectedId})))))):\"\"))))),this.props.Login.openModal?/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.props.Login.screenName===\"IDS_TEST\"||this.props.Login.screenName===\"IDS_PRICE\"?this.onSaveTestPrice:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:this.props.Login.screenName===\"IDS_TEST\"||this.props.Login.screenName===\"IDS_PRICE\"?this.props.Login.operation===\"update\"?[]:this.mandatoryTestFields:this.mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.screenName===\"IDS_TEST\"||this.props.Login.screenName===\"IDS_PRICE\"?this.props.Login.operation===\"update\"?/*#__PURE__*/React.createElement(EditTestPricing,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange//testPriceList={this.props.Login.testPriceList || []}\n}):/*#__PURE__*/React.createElement(AddPricingTest,{selectedRecord:this.state.selectedRecord||{},onComboChange:this.onComboChange,pricingTestList:this.props.Login.pricingTestList||[]}):/*#__PURE__*/React.createElement(AddType1Component,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,extractedColumnList:this.versionFieldList})}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData.TestPrice,dataResult:process(this.props.Login.masterData.TestPrice||[],this.state.priceDataState)});}else{var priceDataState=this.state.priceDataState;if(this.props.Login.priceDataState===undefined){priceDataState={skip:0,take:this.props.Login.settings?parseInt(this.props.Login.settings[14]):5};}this.setState({data:this.props.Login.masterData.TestPrice,selectedRecord:this.props.Login.selectedRecord,dataResult:process(this.props.Login.masterData.TestPrice||[],priceDataState),priceDataState:priceDataState});}}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:[],inputParam:undefined,operation:null,modalName:undefined}};this.props.updateStore(updateInfo);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return TestMasterPricing;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,getEditTestPriceVersionService:getEditTestPriceVersionService,updateStore:updateStore,filterColumnData:filterColumnData,getTestPriceVersionDetail:getTestPriceVersionDetail,getPricingAddTestService:getPricingAddTestService,getPricingEditService:getPricingEditService})(injectIntl(TestMasterPricing));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/testmanagement/TestMasterPricing.jsx"],"names":["React","connect","toast","injectIntl","FormattedMessage","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faCopy","faPencilAlt","faThumbsUp","faTrashAlt","faPlus","DataGrid","callService","crudMaster","validateEsignCredential","updateStore","filterColumnData","getEditTestPriceVersionService","getTestPriceVersionDetail","getPricingAddTestService","getPricingEditService","DEFAULT_RETURN","showEsign","getControlMap","process","transactionStatus","ListMaster","SlideOutModal","ReadOnlyText","ContentPanel","AddType1Component","Esign","ConfirmMessage","AddPricingTest","EditTestPricing","isText","mapStateToProps","state","Login","TestMasterPricing","props","openModal","inputParam","updateInfo","typeName","data","selectedRecord","operation","ncontrolCode","ncontrolcode","selectedId","screenName","intl","formatMessage","id","dataStateChange","event","setState","dataResult","dataState","priceDataState","confirmDelete","deleteId","confirmMessage","confirm","deleteOrApproveTestPriceVersion","masterData","SelectedTestPriceVersion","deleteTestPrice","deleteParam","postParam","inputListName","selectedObject","primaryKeyField","classUrl","methodUrl","inputData","npriceversioncode","userInfo","userRoleControlRights","nformcode","loadEsign","screenData","closeModal","onComboChange","comboData","fieldName","onNumericInputOnChange","value","name","onInputOnChange","primaryFieldKey","target","type","checked","ACTIVE","DEACTIVE","YES","NO","index","findIndex","item","ntestpricedetailcode","test","onSaveClick","saveType","formRef","versionData","undefined","JSON","parse","stringify","nmastersitecode","DRAFT","hasOwnProperty","searchRef","isClearSearch","onSaveTestPrice","testPriceData","priceList","map","push","ntestcode","ntransactionstatus","primaryKeyValue","fetchUrl","fecthInputObject","userinfo","warn","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","reloadData","current","displayName","skip","take","settings","parseInt","masterStatus","error","controlMap","Map","createRef","versionFieldList","extractedColumnList","mandatoryFields","mandatoryTestFields","searchFieldList","versionStatusCSS","activeIconCSS","APPROVED","RETIRED","addId","has","get","editId","approveId","copyId","addPriceId","updatePriceId","filterParam","addParam","primaryKeyName","editParam","copyParam","editTestPriceParam","searchedData","TestPriceVersion","testPriceVersion","length","sversionname","sversionstatus","indexOf","sdescription","pricingTestList","previousProps","Object","values","TestPrice","modalName","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { injectIntl, FormattedMessage } from 'react-intl';\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCopy, faPencilAlt, faThumbsUp, faTrashAlt, faPlus} from '@fortawesome/free-solid-svg-icons';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, filterColumnData,\r\n   getEditTestPriceVersionService, getTestPriceVersionDetail, getPricingAddTestService,\r\n   getPricingEditService} from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, getControlMap } from '../../components/CommonScript';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\nimport ListMaster from '../../components/list-master/list-master.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\n\r\nimport { ReadOnlyText, ContentPanel } from '../../components/App.styles';\r\nimport AddType1Component from '../../components/type1component/AddType1Component';\r\n//import AddUser from './AddUser';\r\n//import UserTabs from './UserTabs';\r\nimport Esign from '../audittrail/Esign';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport AddPricingTest from './AddPricingTest';\r\nimport EditTestPricing from './EditTestPricing';\r\nimport { isText } from 'domhandler';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass TestMasterPricing extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const priceDataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n\r\n            masterStatus: \"\",\r\n            error: \"\",\r\n            selectedRecord: {},\r\n            operation: \"\",\r\n            SelectedTestPriceVersion: undefined,\r\n            screenName: undefined,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            isClearSearch: false,\r\n            data: [], \r\n            dataResult: [],\r\n            priceDataState: priceDataState,\r\n\r\n        };\r\n        this.searchRef = React.createRef();\r\n       // this.emailRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n\r\n       // this.versionFieldList = ['sversionname', 'sdescription'];\r\n\r\n        this.versionFieldList = [\r\n            { \"idsName\": \"IDS_VERSIONNAME\", \"dataField\": \"sversionname\", \"width\": \"200px\",\"fieldLength\":\"100\",\"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\" , \"fieldLength\":\"255\",\"mandatory\": false , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textarea\"},\r\n            ]\r\n        this.extractedColumnList = [\r\n                { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestname\", \"width\": \"200px\"},\r\n                { \"idsName\": \"IDS_COST\", \"dataField\": \"ncost\", \"width\": \"200px\" },\r\n               ]\r\n        this.mandatoryFields = [ { \"idsName\": \"IDS_VERSIONNAME\", \"dataField\": \"sversionname\", \"width\": \"200px\",\"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n                                    ];\r\n        this.mandatoryTestFields = [ { \"idsName\": \"IDS_TEST\", \"dataField\": \"ntestcode\", \"width\": \"200px\",\"mandatory\": true , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"},\r\n                                ];\r\n        this.searchFieldList = [\"sversionname\", \"sversionno\", \"sdescription\", \"sversionstatus\"];\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n\r\n        let versionStatusCSS = \"outline-secondary\";\r\n        let activeIconCSS = \"fa fa-check\"\r\n        if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.APPROVED) {\r\n            versionStatusCSS = \"outline-success\";\r\n        }\r\n        else if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.RETIRED) {\r\n            versionStatusCSS = \"outline-danger\";\r\n            activeIconCSS = \"\";\r\n        }\r\n        else if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.DRAFT) {\r\n            activeIconCSS = \"\";\r\n        }\r\n\r\n        const addId = this.state.controlMap.has(\"AddTestPriceVersion\") && this.state.controlMap.get(\"AddTestPriceVersion\").ncontrolcode;\r\n        const editId = this.state.controlMap.has(\"EditTestPriceVersion\") && this.state.controlMap.get(\"EditTestPriceVersion\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"DeleteTestPriceVersion\") && this.state.controlMap.get(\"DeleteTestPriceVersion\").ncontrolcode\r\n        const approveId = this.state.controlMap.has(\"ApproveTestPriceVersion\") && this.state.controlMap.get(\"ApproveTestPriceVersion\").ncontrolcode\r\n        const copyId = this.state.controlMap.has(\"CopyTestPriceVersion\") && this.state.controlMap.get(\"CopyTestPriceVersion\").ncontrolcode\r\n        const addPriceId = this.state.controlMap.has(\"AddTestPrice\") && this.state.controlMap.get(\"AddTestPrice\").ncontrolcode;\r\n        const updatePriceId = this.state.controlMap.has(\"EditTestPrice\") && this.state.controlMap.get(\"EditTestPrice\").ncontrolcode;\r\n       // const deletePriceId = this.state.controlMap.has(\"DeleteTestPrice\") && this.state.controlMap.get(\"DeleteTestPrice\").ncontrolcode;\r\n     \r\n     \r\n\r\n        const filterParam = {\r\n            inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\",\r\n            fetchUrl: \"testpricing/getTestPriceVersion\", fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData, searchFieldList: this.searchFieldList\r\n        };\r\n\r\n        const addParam = {\r\n            screenName: \"IDS_TESTMASTERPRICING\", operation: \"create\", primaryKeyName: \"npriceversioncode\",\r\n            masterData: this.props.Login.masterData, userInfo: this.props.Login.userInfo,\r\n            ncontrolcode: addId\r\n        }\r\n\r\n        const editParam = {\r\n            screenName:  this.props.intl.formatMessage({id:'IDS_TESTPRICEVERSION'}), operation: \"update\", primaryKeyName: \"npriceversioncode\",\r\n            masterData: this.props.Login.masterData, userInfo: this.props.Login.userInfo,\r\n            ncontrolcode: editId, inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\"\r\n        };\r\n\r\n        const copyParam = {\r\n            screenName: \"IDS_TESTMASTERPRICING\", operation: \"copy\", primaryKeyName: \"npriceversioncode\",\r\n            masterData: this.props.Login.masterData, userInfo: this.props.Login.userInfo,\r\n            ncontrolcode: copyId\r\n        }\r\n\r\n        const editTestPriceParam = {screenName:\"IDS_PRICE\", \"operation\":\"update\", \r\n                                    masterData:this.props.Login.masterData, userInfo: this.props.Login.userInfo, \r\n                                    ncontrolCode:updatePriceId};\r\n\r\n        //console.log(\"props:\", this.props.Login.masterData.TestPriceVersion);\r\n        return (<>\r\n            {/* Start of get display*/}\r\n            <div className=\"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\">\r\n                <Row noGutters>\r\n                    <Col md={4}>\r\n                        {/* <Row noGutters>\r\n                            <Col md={12}> */}\r\n                            {/* <div className=\"list-fixed-wrap\"> */}\r\n                                <ListMaster\r\n                                    screenName={this.props.intl.formatMessage({ id: \"IDS_TESTMASTERPRICING\" })}\r\n                                    masterData={this.props.Login.masterData}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.TestPriceVersion}\r\n                                    getMasterDetail={(testPriceVersion) => this.props.getTestPriceVersionDetail(testPriceVersion, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                                    selectedMaster={this.props.Login.masterData.SelectedTestPriceVersion}\r\n                                    primaryKeyField=\"npriceversioncode\"\r\n                                    mainField=\"sversionname\"\r\n                                    firstField=\"sversionno\"\r\n                                    secondField=\"sversionstatus\"\r\n                                    filterColumnData={this.props.filterColumnData}\r\n                                    filterParam={filterParam}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    addId={addId}\r\n                                    searchRef={this.searchRef}\r\n                                    reloadData={this.reloadData}\r\n                                    openModal={() => this.openModal(addParam)}\r\n                                    isMultiSelecct={false}\r\n                                    hidePaging={false}\r\n                                    isClearSearch={this.props.Login.isClearSearch}\r\n                                />\r\n                            {/* </div>\r\n                        </Col></Row> */}\r\n                    </Col>\r\n                    <Col md={8}>\r\n                        {/* <Row>\r\n                            <Col md={12}> */}\r\n                            <ContentPanel className=\"panel-main-content\">\r\n                                <Card className=\"border-0\">\r\n                                    {this.props.Login.masterData.TestPriceVersion && this.props.Login.masterData.TestPriceVersion.length > 0 && this.props.Login.masterData.SelectedTestPriceVersion ?\r\n                                        <>\r\n                                            <Card.Header>\r\n                                                {/* <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" /> */}\r\n                                                <Card.Title className=\"product-title-main\">\r\n                                                    {this.props.Login.masterData.SelectedTestPriceVersion.sversionname}\r\n                                                </Card.Title>\r\n                                                <Card.Subtitle>\r\n                                                    <div className=\"d-flex product-category\">\r\n                                                        <h2 className=\"product-title-sub flex-grow-1\">\r\n\r\n                                                            <span className={`btn btn-outlined ${versionStatusCSS} btn-sm ml-3`}>\r\n                                                                {activeIconCSS !== \"\" ? <i class={activeIconCSS}></i> : \"\"}\r\n                                                                {this.props.Login.masterData.SelectedTestPriceVersion.sversionstatus}\r\n                                                            \r\n                                                            </span>\r\n                                                        </h2>\r\n                                                        {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n                                                        <div className=\"d-inline\">\r\n                                                            <Nav.Link name=\"editTestPriceVersion\" hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                                className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_EDIT\" })}\r\n                                                                //data-for=\"tooltip_list_wrap\"\r\n                                                                onClick={() => this.props.getEditTestPriceVersionService(editParam)}\r\n                                                            >\r\n                                                                <FontAwesomeIcon icon={faPencilAlt} />\r\n                                                            </Nav.Link>\r\n\r\n                                                            <Nav.Link name=\"deleteTestPriceVersion\" className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                                                               // data-for=\"tooltip_list_wrap\"\r\n                                                                hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                                onClick={() => this.confirmDelete(deleteId)}>\r\n                                                                <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                               \r\n                                                            </Nav.Link>\r\n                                                            <Nav.Link name=\"approveTestPriceVersion\" className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_APPROVE\" })}\r\n                                                                //data-for=\"tooltip_list_wrap\"\r\n                                                                onClick={() => this.deleteOrApproveTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion,\r\n                                                                    \"approve\", approveId)}>\r\n                                                                <FontAwesomeIcon icon={faThumbsUp} />\r\n                                                            </Nav.Link>\r\n                                                            <Nav.Link name=\"copyTestPriceVersion\" className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_COPY\" })}\r\n                                                                onClick={()=>this.openModal(copyParam)}\r\n                                                                // onClick={() => this.copyTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion,\r\n                                                                //     \"copy\", approveId)}\r\n                                                                >\r\n                                                                <FontAwesomeIcon icon={faCopy} />\r\n                                                            </Nav.Link>\r\n                                                        </div>\r\n                                                        {/* </Tooltip> */}\r\n                                                    </div>\r\n\r\n                                                </Card.Subtitle>\r\n                                            </Card.Header>\r\n                                            <Card.Body className=\"form-static-wrap\">\r\n                                                {/* <Card.Text> */}\r\n\r\n                                                <Row>\r\n                                                    <Col md={12}>\r\n                                                        <FormGroup>\r\n                                                            <FormLabel><FormattedMessage id=\"IDS_DESCRIPTION\" message=\"Description\" /></FormLabel>\r\n                                                            <ReadOnlyText>{this.props.Login.masterData.SelectedTestPriceVersion.sdescription}</ReadOnlyText>\r\n                                                        </FormGroup>\r\n                                                    </Col>\r\n                                                  \r\n                                                </Row>\r\n                                                {/* <Row>\r\n                                                    <Col>\r\n                                                        <div className=\"horizontal-line\"></div>\r\n                                                    </Col>\r\n                                                </Row> */}\r\n                                                  <Card className=\"at-tabs border-0\">\r\n                                                        <Row noGutters>\r\n                                                            <Col md={12}>\r\n                                                                <div className=\"d-flex justify-content-end\">\r\n                                                                <Nav.Link name=\"addPrice\" className=\"add-txt-btn\" \r\n                                                                        hidden={this.state.userRoleControlRights.indexOf(addPriceId) === -1}\r\n                                                                        onClick={()=>this.props.getPricingAddTestService(\"IDS_TEST\", \"create\", this.props.Login.masterData, this.props.Login.userInfo, addPriceId)}\r\n                                                                        >\r\n                                                                     <FontAwesomeIcon icon={faPlus} /> { } \r\n                                                                    <FormattedMessage id='IDS_TEST' defaultMessage='Test' />\r\n                                                                </Nav.Link>\r\n                                                                <Nav.Link name=\"updatePrice\" className=\"add-txt-btn\" \r\n                                                                        hidden={this.state.userRoleControlRights.indexOf(updatePriceId) === -1}\r\n                                                                        onClick={()=>this.props.getPricingEditService({...editTestPriceParam, \"updateType\":\"All\", priceDataState:undefined})}\r\n                                                                        >\r\n                                                                    <FontAwesomeIcon icon={faPencilAlt} /> { }\r\n                                                                    <FormattedMessage id='IDS_PRICE' defaultMessage='Price' />\r\n                                                                </Nav.Link>\r\n                                                                </div>\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                        <Row noGutters>\r\n                                                            <Col md={12}>\r\n                                                                <DataGrid\r\n                                                                    primaryKeyField={\"ntestpricedetailcode\"}\r\n                                                                    data={this.state.data}\r\n                                                                    dataResult={this.state.dataResult}\r\n                                                                    dataState={this.state.priceDataState}\r\n                                                                    dataStateChange={this.dataStateChange}\r\n                                                                    extractedColumnList={this.extractedColumnList}\r\n                                                                    controlMap={this.state.controlMap}\r\n                                                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                                                    inputParam={this.props.Login.inputParam}\r\n                                                                    userInfo={this.props.Login.userInfo}\r\n                                                                    fetchRecord={this.props.getPricingEditService}\r\n                                                                    editParam={{...editTestPriceParam, \"updateType\":\"Single\", priceDataState:this.state.priceDataState}}\r\n                                                                    deleteRecord={this.deleteTestPrice}\r\n                                                                    deleteParam={{operation:\"delete\"}}\r\n                                                                    methodUrl={\"TestPrice\"}\r\n                                                                // reloadData={this.reloadData}\r\n                                                                    addRecord = {() => this.openModal(addId)}\r\n                                                                    pageable={true}\r\n                                                                    scrollable={'scrollable'}\r\n                                                                // gridHeight = {'600px'}\r\n                                                                    isActionRequired={true}\r\n                                                                    isToolBarRequired={false}\r\n                                                                    selectedId={this.props.Login.selectedId}\r\n                                                                />\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                </Card>\r\n                                                {/* </Card.Text> */}\r\n                                            \r\n                                            </Card.Body>\r\n                                        </>\r\n                                        : \"\"\r\n                                    }\r\n                                </Card>\r\n                            </ContentPanel>\r\n                        </Col></Row>\r\n                    {/* </Col>\r\n                </Row> */}\r\n            </div>\r\n\r\n            {/* End of get display*/}\r\n\r\n            {/* Start of Modal Sideout for  Creation */}\r\n            {/* Below Condition Added to avoid unwanted rendering of SlideOut */}\r\n            {this.props.Login.openModal ?\r\n                <SlideOutModal show={this.props.Login.openModal}\r\n                    closeModal={this.closeModal}\r\n                    operation={this.props.Login.operation}\r\n                    inputParam={this.props.Login.inputParam}\r\n                    screenName={this.props.Login.screenName}\r\n                    onSaveClick={(this.props.Login.screenName === \"IDS_TEST\" || \r\n                                this.props.Login.screenName === \"IDS_PRICE\")  ? this.onSaveTestPrice: this.onSaveClick}\r\n                    esign={this.props.Login.loadEsign}\r\n                    validateEsign={this.validateEsign}\r\n                    masterStatus={this.props.Login.masterStatus}\r\n                    updateStore={this.props.updateStore}\r\n                    selectedRecord={this.state.selectedRecord || {}}\r\n                    mandatoryFields={(this.props.Login.screenName === \"IDS_TEST\" || \r\n                    this.props.Login.screenName === \"IDS_PRICE\")? \r\n                            this.props.Login.operation === \"update\" ? [] : this.mandatoryTestFields:\r\n                            this.mandatoryFields}\r\n                    addComponent={this.props.Login.loadEsign ?\r\n                        <Esign operation={this.props.Login.operation}\r\n                            onInputOnChange={this.onInputOnChange}\r\n                            inputParam={this.props.Login.inputParam}\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                        />\r\n                        : (this.props.Login.screenName === \"IDS_TEST\" || \r\n                        this.props.Login.screenName === \"IDS_PRICE\")  ? \r\n                            this.props.Login.operation === \"update\" ?\r\n                                <EditTestPricing\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    //testPriceList={this.props.Login.testPriceList || []}\r\n                                    />\r\n                                :<AddPricingTest\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onComboChange={this.onComboChange}\r\n                                    pricingTestList={this.props.Login.pricingTestList || []}/>\r\n\r\n                            : <AddType1Component\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                extractedColumnList={this.versionFieldList}\r\n                            />\r\n                      \r\n                    }\r\n                /> : \"\"}\r\n            {/* End of Modal Sideout for User Creation */}\r\n        </>\r\n        );\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({ userRoleControlRights, controlMap,\r\n                    data: this.props.Login.masterData.TestPrice,\r\n                    dataResult: process(this.props.Login.masterData.TestPrice || [], this.state.priceDataState), });\r\n            }\r\n            else {        \r\n                let {priceDataState} = this.state;\r\n                if(this.props.Login.priceDataState === undefined){\r\n                    priceDataState={skip:0,take:this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5}\r\n                }         \r\n                this.setState({\r\n                    data: this.props.Login.masterData.TestPrice, selectedRecord: this.props.Login.selectedRecord,\r\n                    dataResult: process(this.props.Login.masterData.TestPrice ||[],priceDataState),\r\n                    priceDataState\r\n                });\r\n            }  \r\n        }\r\n    }\r\n\r\n    openModal = (inputParam) => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                selectedRecord: {}, operation: inputParam.operation, ncontrolCode:inputParam.ncontrolcode, selectedId:null,\r\n                openModal: true, screenName: this.props.intl.formatMessage({id:'IDS_TESTPRICEVERSION'})\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.data, event.dataState),\r\n            priceDataState: event.dataState\r\n        });\r\n    }\r\n\r\n\r\n    confirmDelete = (deleteId) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.deleteOrApproveTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion, \"delete\", deleteId));\r\n    }\r\n\r\n    deleteTestPrice = (deleteParam) =>{\r\n        const postParam = { inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\" };\r\n\r\n        const inputParam = {\r\n            classUrl: \"testpricing\",\r\n            methodUrl: \"TestPrice\",\r\n            postParam,\r\n            //displayName: ,\r\n            inputData: {\r\n                \"testprice\": deleteParam.selectedRecord,//.dataItem,\r\n                \"npriceversioncode\":this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode,\r\n                \"userinfo\": this.props.Login.userInfo,\r\n                //postParam \r\n\r\n            },\r\n            operation:\"delete\",\r\n            priceDataState:this.state.priceDataState\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.intl.formatMessage({ id: \"IDS_TESTPRICE\" }),\r\n                    operation:deleteParam.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let selectedId = this.props.Login.selectedId;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"approve\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n            selectedId = null;\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, loadEsign, selectedRecord, selectedId }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onNumericInputOnChange = (value, name) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onInputOnChange = (event, primaryFieldKey) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"ntransactionstatus\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            else\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n\r\n        }\r\n        else {   \r\n            if(primaryFieldKey && event.target.name === \"ncost\"){\r\n                const index = selectedRecord.findIndex(item=>item.ntestpricedetailcode === primaryFieldKey);\r\n                if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){\r\n                    selectedRecord[index][\"ncost\"] = event.target.value;\r\n                }\r\n            }\r\n            else{      \r\n                selectedRecord[event.target.name] = event.target.value;\r\n            }           \r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        let versionData = [];\r\n        versionData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n        let postParam = undefined;\r\n\r\n        if (this.props.Login.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\" };\r\n            versionData[\"testpriceversion\"] = JSON.parse(JSON.stringify(this.props.Login.selectedRecord));\r\n            versionData[\"sversionname\"]=this.state.selectedRecord[\"sversionname\"] || \"\";\r\n            versionData[\"sdescription\"]=this.state.selectedRecord[\"sdescription\"] || \"\";\r\n\r\n        }\r\n        else {\r\n            //add               \r\n            versionData[\"testpriceversion\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode,\r\n                                                 \"ntransactionstatus\": transactionStatus.DRAFT,\r\n                                                \"sversionname\":this.state.selectedRecord[\"sversionname\"] || \"\",\r\n                                                \"sdescription\":this.state.selectedRecord[\"sdescription\"] || \"\",\r\n                                            };\r\n\r\n            if(this.props.Login.operation === \"copy\"){\r\n                versionData[\"testpriceversion\"][\"npriceversioncode\"] = this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode;\r\n            }\r\n\r\n        }\r\n        if (versionData[\"testpriceversion\"].hasOwnProperty('esignpassword')) {\r\n            if (versionData[\"testpriceversion\"]['esignpassword'] === '') {\r\n                delete versionData[\"testpriceversion\"]['esigncomments']\r\n                delete versionData[\"testpriceversion\"]['esignpassword']\r\n            }\r\n        }\r\n      \r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"TestPriceVersion\",\r\n            inputData: versionData,\r\n            operation: this.props.Login.operation,\r\n            saveType, formRef, postParam, searchRef: this.searchRef,\r\n            isClearSearch: this.props.Login.isClearSearch\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n\r\n    }\r\n\r\n    onSaveTestPrice = (saveType, formRef) => {\r\n\r\n       // console.log(\"this.props.Login.selectedRecord:\", this.props.Login.selectedRecord);\r\n        const testPriceData = {\"userinfo\": this.props.Login.userInfo,\r\n                                \"testpriceversion\":this.props.Login.masterData.SelectedTestPriceVersion,\r\n                                \"npriceversioncode\":this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode};\r\n\r\n        let postParam = undefined;\r\n        let priceDataState = undefined;\r\n        let selectedId = null;\r\n        \r\n        if (this.props.Login.operation === \"update\") {\r\n            // edit\r\n            priceDataState = this.state.priceDataState;\r\n            selectedId = this.props.Login.selectedId; \r\n            postParam = { inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\" };\r\n            testPriceData[\"testpricelist\"] = JSON.parse(JSON.stringify(this.props.Login.selectedRecord));           \r\n        }\r\n        else {\r\n            //add               \r\n                                               \r\n            let priceList = [];\r\n            this.state.selectedRecord[\"ntestcode\"] &&\r\n                this.state.selectedRecord[\"ntestcode\"].map(item => {\r\n                    return priceList.push({\r\n                       ntestcode: item.value                      \r\n                    })\r\n                })\r\n           \r\n            testPriceData[\"testpricelist\"] = priceList;                             \r\n\r\n        }\r\n        if (testPriceData[\"testpriceversion\"].hasOwnProperty('esignpassword')) {\r\n            if (testPriceData[\"testpriceversion\"]['esignpassword'] === '') {\r\n                delete testPriceData[\"testpriceversion\"]['esigncomments']\r\n                delete testPriceData[\"testpriceversion\"]['esignpassword']\r\n                delete testPriceData[\"testpriceversion\"][\"agree\"]\r\n            }\r\n        }\r\n       //console.log(\"update data:\", testPriceData);\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"TestPrice\",\r\n            inputData: testPriceData,\r\n            operation: this.props.Login.operation,\r\n            saveType, formRef, postParam, searchRef: this.searchRef,\r\n            isClearSearch: this.props.Login.isClearSearch,\r\n            selectedId, priceDataState\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {            \r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n\r\n    }\r\n\r\n\r\n    deleteOrApproveTestPriceVersion = (methodUrl, SelectedTestPriceVersion, operation, ncontrolCode) => {\r\n        if (SelectedTestPriceVersion.ntransactionstatus === transactionStatus.DRAFT) {         \r\n\r\n            const postParam = {\r\n                inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\",\r\n                primaryKeyField: \"npriceversioncode\",\r\n                primaryKeyValue: SelectedTestPriceVersion.npriceversioncode,\r\n                fetchUrl: \"testpricing/getTestPriceVersion\",\r\n                fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            }\r\n\r\n            const inputParam = {\r\n                classUrl: this.props.Login.inputParam.classUrl,\r\n                methodUrl, postParam,\r\n                inputData: {\r\n                    \"userinfo\": this.props.Login.userInfo,\r\n                    \"testpriceversion\": SelectedTestPriceVersion\r\n                },\r\n                operation,\r\n                isClearSearch: this.props.Login.isClearSearch\r\n            }\r\n\r\n            const masterData = this.props.Login.masterData;\r\n\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData },\r\n                        openModal: true, screenName: \"IDS_TESTPRICEVERSION\", operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n            }\r\n        }    \r\n        else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTTESTPRICEVERSION\" }));\r\n        }\r\n    \r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                masterData: [], inputParam: undefined, operation: null, modalName: undefined\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: \"testpricing\",\r\n            methodUrl: \"TestPriceVersion\",\r\n            displayName: \"IDS_TESTPRICEVERSION\",\r\n            userInfo: this.props.Login.userInfo,\r\n            isClearSearch: this.props.Login.isClearSearch\r\n\r\n        };\r\n\r\n        this.props.callService(inputParam);\r\n    }\r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, validateEsignCredential,getEditTestPriceVersionService,\r\n    updateStore,filterColumnData, getTestPriceVersionDetail, getPricingAddTestService,\r\n    getPricingEditService\r\n})(injectIntl(TestMasterPricing));\r\n\r\n"]},"metadata":{},"sourceType":"module"}