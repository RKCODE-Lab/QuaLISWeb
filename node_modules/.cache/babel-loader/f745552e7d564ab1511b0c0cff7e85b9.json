{"ast":null,"code":"import rsapi from '../rsapi';\nimport { DEFAULT_RETURN } from './LoginTypes';\nimport { constructOptionList, sortData } from '../components/CommonScript'; //getComboLabelValue,, searchData\n\nimport { toast } from 'react-toastify';\nimport Axios from 'axios';\nimport { initRequest } from './LoginAction';\nimport { intl } from '../components/App';\nimport { ColumnType, queryTypeFilter, transactionStatus } from '../components/Enumeration';\nimport { format } from 'date-fns';\nexport function getTestGroupRulesEngineAdd(userInfo, testgrouprulesengine, inputParam, masterData) {\n  let testcomments = [];\n  let reportcomments = [];\n  let predefcomments = [];\n  let sampletestcommentsList = [];\n  let selectedRecord = {};\n  let addGroupList = [];\n  return function (dispatch) {\n    if (masterData && masterData.SelectedTest === null) {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_ADDTEST\"\n      }));\n    } else {\n      //if (masterData.SelectedSpecification&&masterData.SelectedSpecification['napprovalstatus'] === transactionStatus.APPROVED) { \n      dispatch(initRequest(true));\n      let url = [];\n\n      if (testgrouprulesengine) {\n        url.push(rsapi.post(\"/testgrouprulesengine/getdatabasetables\", {\n          userinfo: userInfo\n        }));\n      } else {\n        url.push(rsapi.post(\"/testgrouprulesengine/getTestGroupRulesEngineAdd\", {\n          \"ntestgrouptestcode\": masterData.SelectedTest.ntestgrouptestcode,\n          \"nspecsampletypecode\": masterData.SelectedComponent.nspecsampletypecode,\n          \"napproveconfversioncode\": masterData.SelectedSpecification.napproveconfversioncode,\n          \"nallottedspeccode\": masterData.SelectedSpecification.nallottedspeccode,\n          userinfo: userInfo\n        }));\n        url.push(rsapi.post(\"/grade/getGrade\", {\n          userinfo: userInfo\n        }));\n        url.push(rsapi.post(\"/site/getSite\", {\n          userinfo: userInfo\n        }));\n        url.push(rsapi.post(\"/sampletestcomments/getSampleTestComments\", {\n          userinfo: userInfo\n        }));\n        url.push(rsapi.post(\"/sampletestcomments/getCommentType\", {\n          userinfo: userInfo\n        }));\n        url.push(rsapi.post(\"/sampletestcomments/getCommentSubType\", {\n          userinfo: userInfo\n        }));\n      }\n\n      Axios.all(url).then(response => {\n        const DiagnosticCase = constructOptionList(response[0].data[\"DiagnosticCase\"] || [], \"ndiagnosticcasecode\", \"sdiagnosticcasename\", false, false, false);\n        const Grade = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, false);\n        const viewListMap = constructOptionList(response[0].data[\"TestParameter\"] || [], \"ntestgrouptestparametercode\", \"stestparametersynonym\", undefined, undefined, undefined);\n        const resultType = constructOptionList(response[0].data[\"ResultType\"] || [], \"nresultypecode\", \"sdisplayname\", undefined, undefined, undefined);\n        const site = constructOptionList(response[2].data || [], \"nsitecode\", \"ssitename\", false, false, false);\n        const CommentType = constructOptionList(response[4].data['CommentType'] || [], \"ncommenttypecode\", \"scommenttype\", false, false, false);\n        let commentsubtypelst = response[5].data['CommentSubType'];\n        let w = commentsubtypelst.filter(x => x.ncommentsubtypecode === 3 || x.ncommentsubtypecode === 6);\n        const CommentSubType = constructOptionList(w || [], \"ncommentsubtypecode\", \"scommentsubtype\", false, false, false);\n        const testInitiateTestCombo = constructOptionList(masterData['TestGroupTest'] || [], \"ntestgrouptestcode\", \"stestsynonym\", false, false, false);\n        let commentlist = response[3].data;\n        let x = commentlist.filter(x => x.ncommentsubtypecode === 1);\n        let y = commentlist.filter(x => x.ncommentsubtypecode === 4);\n        let z = commentlist.filter(x => x.ncommentsubtypecode === 3);\n        testcomments = constructOptionList(x || [], \"nsampletestcommentscode\", \"sdescription\", false, false, false).get(\"OptionList\");\n        reportcomments = constructOptionList(y || [], \"nsampletestcommentscode\", \"sdescription\", false, false, false).get(\"OptionList\");\n        predefcomments = constructOptionList(z || [], \"nsampletestcommentscode\", \"spredefinedname\", false, false, false).get(\"OptionList\");\n        masterData['testParameter'] = {};\n        masterData['testParameterComments'] = {};\n        masterData['testParameterreportComments'] = {};\n        masterData['testComments'] = {};\n        masterData['reportComments'] = {};\n        masterData['testSite'] = {};\n        masterData['testRepeat'] = [];\n        masterData['testenforceTests'] = [];\n        selectedRecord[\"groupList\"] = [];\n        selectedRecord[\"groupList\"][0] = [];\n        selectedRecord[\"groupList\"][0][\"button_and\"] = true;\n        selectedRecord[\"groupList\"][0][0] = {};\n        addGroupList[0] = 1;\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            operation: 'create',\n            databaseviewList: viewListMap.get(\"OptionList\"),\n            testcomments,\n            reportcomments,\n            openPortalModal: true,\n            screenName: \"IDS_ADDRULESENGINE\",\n            testgrouprulesengine,\n            ...inputParam,\n            siteObject: {},\n            testCommentObject: {},\n            reportCommentObject: {},\n            testInitiateTests: [],\n            testRepeatTests: [],\n            testenforceTests: [],\n            testCommentsTests: [],\n            reportCommentsTests: [],\n            reportCommentsTestsTab: [],\n            activeTabIndex: 0,\n            masterData: { ...masterData,\n              testInitiateTestCombo: testInitiateTestCombo.get(\"OptionList\"),\n              testCommentsTestCombo: testInitiateTestCombo.get(\"OptionList\"),\n              testRepeatTestCombo: testInitiateTestCombo.get(\"OptionList\"),\n              testenforceTestCombo: testInitiateTestCombo.get(\"OptionList\"),\n              rulesOption: viewListMap.get(\"OptionList\"),\n              DiagnosticCaseList: DiagnosticCase.get(\"OptionList\"),\n              GradeList: Grade.get(\"OptionList\"),\n              siteList: site.get(\"OptionList\"),\n              resultTypeList: resultType.get(\"OptionList\"),\n              testCommentsTestsTab: [],\n              testInitiateSiteTab: [],\n              PredefinedParameterOptions: [],\n              testRepeatTestsTab: [],\n              testenforceTestsTab: []\n            },\n            testInitiateTestOptions: viewListMap.get(\"OptionList\"),\n            testCommentsTestOptions: viewListMap.get(\"OptionList\"),\n            reportCommentsTestOptions: viewListMap.get(\"OptionList\"),\n            CommentType: CommentType.get(\"OptionList\"),\n            CommentSubType: CommentSubType.get(\"OptionList\"),\n            predefcomments,\n            openModalPopup: false,\n            openmodalsavePopup: false,\n            addGroupList,\n            selectedRecord,\n            viewColumnListByRule: viewListMap.get(\"OptionList\")\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      }); // }\n      // else {\n      //     toast.warn(intl.formatMessage({ id: \"IDS_RULESCANBEADDEDONLYFORAPPROVEDSPEC\" })); \n      // }\n    }\n  };\n}\nexport function getSpecificationTestGroupRulesEngine(inputParam, selectedRecord, ismodalcombochange, masterData, userInfo) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testgrouprulesengine/getSpecificationTestGroupRulesEngine\", {\n      'userinfo': userInfo,\n      \"nproductcatcode\": inputParam.nproductcatcode.item.nproductcatcode\n    }).then(response => {\n      const TestGroupSpecification = constructOptionList(response.data.TestGroupSpecification || [], \"nallottedspeccode\", \"sspecname\", undefined, undefined, undefined);\n      let TestGroupSpecificationList = TestGroupSpecification.get(\"OptionList\");\n\n      if (ismodalcombochange) {\n        selectedRecord = { ...selectedRecord,\n          ...inputParam,\n          'nallottedspeccode': TestGroupSpecificationList[0]\n        };\n        masterData = { ...masterData,\n          ...response.data\n        };\n      } else {\n        let selectedcombo = { ...inputParam,\n          'nallottedspeccode': TestGroupSpecificationList[0]\n        };\n        masterData = { ...masterData,\n          ...response.data,\n          selectedcombo\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          selectedRecord,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getComponentTestGroupRulesEngine(inputParam, selectedRecord, ismodalcombochange, masterData, userInfo) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testgrouprulesengine/getComponentTestGroupRulesEngine\", {\n      'userinfo': userInfo,\n      \"nallottedspeccode\": inputParam.nallottedspeccode.item.nallottedspeccode\n    }).then(response => {\n      const Component = constructOptionList(response.data.Component || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, undefined);\n      let ComponentList = Component.get(\"OptionList\");\n\n      if (ismodalcombochange) {\n        selectedRecord = { ...selectedRecord,\n          ...inputParam,\n          'ncomponentcode': ComponentList[0]\n        };\n        masterData = { ...masterData,\n          ...response.data\n        };\n      } else {\n        let selectedcombo = { ...inputParam,\n          'ncomponentcode': ComponentList[0]\n        };\n        masterData = { ...masterData,\n          ...response.data,\n          selectedcombo\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          selectedRecord,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getSelectedTestGroupRulesEngine(inputParam, userInfo, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testgrouprulesengine/getSelectedTestGroupRulesEngine\", {\n      'userinfo': userInfo,\n      \"ntestgrouprulesenginecode\": parseInt(inputParam.ntestgrouprulesenginecode) //, nproductcatcode: masterData.SelectedProductCategory.nproductcatcode\n      ,\n      \"ntestgrouptestcode\": masterData.SelectedTest.ntestgrouptestcode\n    }).then(response => {\n      masterData = { ...masterData,\n        SelectedRulesEngine: response.data[\"SelectedRulesEngine\"]\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getTestGroupRulesEngine(nproductcatcode, nallottedspeccode, ncomponentcode, userInfo, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testgrouprulesengine/getTestGroupRulesEngine\", {\n      'userinfo': userInfo,\n      \"nproductcatcode\": nproductcatcode,\n      \"nallottedspeccode\": nallottedspeccode,\n      \"ncomponentcode\": ncomponentcode\n    }).then(response => {\n      masterData = { ...response.data\n      };\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getEditTestGroupRulesEngine(operation, masterData //,\n// ncontrolCode\n, userInfo) {\n  let testcomments = [];\n  let reportcomments = [];\n  let predefcomments = [];\n  return function (dispatch) {\n    if (masterData['RulesEngine'] && masterData['RulesEngine'].length > 0) {\n      let urlArray = [];\n      let selectedRecord = {};\n      urlArray.push(rsapi.post(\"testgrouprulesengine/getEditTestGroupRulesEngine\", {\n        'ntestgrouprulesenginecode': masterData.SelectedRulesEngine['ntestgrouprulesenginecode'],\n        'masterData': masterData,\n        \"userinfo\": userInfo\n      }));\n      urlArray.push(rsapi.post(\"/grade/getGrade\", {\n        userinfo: userInfo\n      }));\n      urlArray.push(rsapi.post(\"/site/getSite\", {\n        userinfo: userInfo\n      }));\n      urlArray.push(rsapi.post(\"/sampletestcomments/getSampleTestComments\", {\n        userinfo: userInfo\n      }));\n      urlArray.push(rsapi.post(\"/testgrouprulesengine/getTestGroupRulesEngineAdd\", {\n        \"ntestgrouptestcode\": masterData.SelectedTest.ntestgrouptestcode,\n        \"nspecsampletypecode\": masterData.SelectedComponent.nspecsampletypecode,\n        \"napproveconfversioncode\": masterData.SelectedSpecification.napproveconfversioncode,\n        \"nallottedspeccode\": masterData.SelectedSpecification.nallottedspeccode,\n        userinfo: userInfo\n      }));\n      urlArray.push(rsapi.post(\"/productcategory/getProductCategory\", {\n        userinfo: userInfo\n      }));\n      urlArray.push(rsapi.post(\"/sampletestcomments/getCommentType\", {\n        userinfo: userInfo\n      }));\n      urlArray.push(rsapi.post(\"/sampletestcomments/getCommentSubType\", {\n        userinfo: userInfo\n      }));\n      dispatch(initRequest(true));\n      Axios.all(urlArray).then(response => {\n        masterData['testParameter'] = {};\n        masterData['testParameterComments'] = {};\n        masterData['testParameterreportComments'] = {};\n        let responsedata = response[0].data;\n        let srulename = responsedata['RulesEngineEdit'][0]['srulename'];\n        let nruleexecorder = responsedata['RulesEngineEdit'][0]['nruleexecorder'];\n        let groupList = responsedata['RulesEngineEdit'][0]['jsondata'];\n        let outcomeList = responsedata['RulesEngineEdit'][0]['jsonuidata'];\n        selectedRecord[\"groupList\"] = [];\n        groupList.map((ruleslist, index) => {\n          if (ruleslist.hasOwnProperty('button_or')) {\n            selectedRecord[\"groupList\"][index] = ruleslist[\"button_or\"];\n            selectedRecord[\"groupList\"][index][\"button_or\"] = true;\n          }\n\n          if (ruleslist.hasOwnProperty('button_and')) {\n            selectedRecord[\"groupList\"][index] = ruleslist[\"button_and\"];\n            selectedRecord[\"groupList\"][index][\"button_and\"] = true;\n          }\n\n          if (ruleslist.hasOwnProperty('button_not_button_and')) {\n            selectedRecord[\"groupList\"][index] = ruleslist[\"button_not_button_and\"];\n            selectedRecord[\"groupList\"][index][\"button_and\"] = true;\n            selectedRecord[\"groupList\"][index][\"button_not\"] = true;\n          }\n\n          if (ruleslist.hasOwnProperty('button_not_button_or')) {\n            selectedRecord[\"groupList\"][index] = ruleslist[\"button_not_button_or\"];\n            selectedRecord[\"groupList\"][index][\"button_or\"] = true;\n            selectedRecord[\"groupList\"][index][\"button_not\"] = true;\n          }\n        }); // if (responsedata['RulesEngineEdit'][0]['jsondata'].hasOwnProperty('button_not_button_and')) {\n        //     selectedRecord[\"groupList\"]['button_not'] = true\n        // }\n        // if (responsedata['RulesEngineEdit'][0]['jsondata'].hasOwnProperty('button_not_button_or')) {\n        //     selectedRecord[\"groupList\"]['button_not'] = true\n        // }\n\n        if (responsedata['RulesEngineEdit'][0]['jsondata'].hasOwnProperty('button_or')) {\n          selectedRecord[\"groupList\"]['button_or'] = true;\n        } else {\n          selectedRecord[\"groupList\"]['button_and'] = true;\n        }\n\n        selectedRecord['srulename'] = srulename;\n        selectedRecord['srulenamecopy'] = srulename;\n        selectedRecord['nruleexecordercopy'] = nruleexecorder; // selectedRecord[\"groupList\"][0][\"button_and\"] = true\n\n        let addGroupList = [];\n        addGroupList = responsedata['RulesEngineEdit'][0]['jsonuidata']['addGroupList'];\n        const DiagnosticCase = constructOptionList(response[4].data[\"DiagnosticCase\"] || [], \"ndiagnosticcasecode\", \"sdiagnosticcasename\", false, false, false);\n        const Grade = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, false);\n        const viewListMap = constructOptionList(response[4].data[\"TestParameter\"] || [], \"ntestgrouptestparametercode\", \"stestparametersynonym\", undefined, undefined, undefined);\n        const resultType = constructOptionList(response[4].data[\"ResultType\"] || [], \"nresultypecode\", \"sdisplayname\", undefined, undefined, undefined);\n        const site = constructOptionList(response[2].data || [], \"nsitecode\", \"ssitename\", false, false, false);\n        const CommentType = constructOptionList(response[6].data['CommentType'] || [], \"ncommenttypecode\", \"scommenttype\", false, false, false);\n        const testInitiateTestCombo = constructOptionList(masterData['TestGroupTest'] || [], \"ntestgrouptestcode\", \"stestsynonym\", false, false, false);\n        let commentsubtypelst = response[7].data['CommentSubType'];\n        let w = commentsubtypelst.filter(x => x.ncommentsubtypecode === 3 || x.ncommentsubtypecode === 6);\n        const CommentSubType = constructOptionList(w || [], \"ncommentsubtypecode\", \"scommentsubtype\", false, false, false);\n        let commentlist = response[3].data;\n        let x = commentlist.filter(x => x.ncommentsubtypecode === 1);\n        let y = commentlist.filter(x => x.ncommentsubtypecode === 4);\n        let z = commentlist.filter(x => x.ncommentsubtypecode === 3);\n        testcomments = constructOptionList(x || [], \"nsampletestcommentscode\", \"sdescription\", false, false, false).get(\"OptionList\");\n        reportcomments = constructOptionList(y || [], \"nsampletestcommentscode\", \"sdescription\", false, false, false).get(\"OptionList\");\n        predefcomments = constructOptionList(z || [], \"nsampletestcommentscode\", \"spredefinedname\", false, false, false).get(\"OptionList\");\n        masterData['testParameter'] = outcomeList['testInitiateTests'] && outcomeList['testInitiateTests'];\n        masterData['testRepeat'] = outcomeList['testRepeatTests'] && outcomeList['testRepeatTests'];\n        masterData['testenforceTests'] = outcomeList['testenforceTests'] && outcomeList['testenforceTests'];\n        masterData['testParameterComments'] = outcomeList['testCommentsTests'] && outcomeList['testCommentsTests'];\n        masterData['testParameterreportComments'] = outcomeList['reportCommentsTests'] && outcomeList['reportCommentsTests'];\n        masterData[\"testComments\"] = outcomeList['testCommentObject'] && outcomeList['testCommentObject'];\n        masterData[\"reportComments\"] = outcomeList['reportCommentObject'] && outcomeList['reportCommentObject'];\n        masterData[\"testSite\"] = outcomeList['siteObject'] && outcomeList['siteObject'];\n        selectedRecord[\"nproductcatcode\"] = outcomeList['nproductcatcode'] && outcomeList['nproductcatcode'];\n        selectedRecord[\"nallottedspeccode\"] = outcomeList['nallottedspeccode'] && outcomeList['nallottedspeccode'];\n        selectedRecord[\"ncomponentcode\"] = outcomeList['ncomponentcode'] && outcomeList['ncomponentcode'];\n        selectedRecord[\"groupListJoins\"] = outcomeList['groupListJoins'] && outcomeList['groupListJoins'];\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            operation: operation,\n            screenName: \"IDS_EDITRULESENGINE\",\n            selectedRecord,\n            openPortalModal: true,\n            // ncontrolCode: ncontrolCode,\n            loading: false,\n            addGroupList,\n            masterData: { ...masterData,\n              testInitiateTestCombo: testInitiateTestCombo.get(\"OptionList\"),\n              testCommentsTestCombo: testInitiateTestCombo.get(\"OptionList\"),\n              testRepeatTestCombo: testInitiateTestCombo.get(\"OptionList\"),\n              testenforceTestCombo: testInitiateTestCombo.get(\"OptionList\"),\n              rulesOption: viewListMap.get(\"OptionList\"),\n              DiagnosticCaseList: DiagnosticCase.get(\"OptionList\"),\n              GradeList: Grade.get(\"OptionList\"),\n              siteList: site.get(\"OptionList\"),\n              resultTypeList: resultType.get(\"OptionList\"),\n              testCommentsTestsTab: outcomeList['testCommentsTestsTab'],\n              testRepeatTestsTab: outcomeList['testRepeatTestsTab'],\n              testenforceTestsTab: outcomeList['testenforceTestsTab'],\n              PredefinedParameterOptions: outcomeList['PredefinedParameterOptions'],\n              testInitiateSiteTab: outcomeList['testInitiateSiteTab'],\n              reportCommentsTestsTab: outcomeList['reportCommentsTestsTab']\n            },\n            viewColumnListByRule: viewListMap.get(\"OptionList\"),\n            testcomments,\n            reportcomments,\n            testInitiateTests: outcomeList['testInitiateTests'] && outcomeList['testInitiateTests'],\n            testCommentsTests: outcomeList['testCommentsTests'] && outcomeList['testCommentsTests'],\n            testRepeatTests: outcomeList['testRepeatTests'] && outcomeList['testRepeatTests'],\n            testenforceTests: outcomeList['testenforceTests'] && outcomeList['testenforceTests'],\n            reportCommentsTests: outcomeList['reportCommentsTests'] && outcomeList['reportCommentsTests'],\n            siteObject: outcomeList['siteObject'] && outcomeList['siteObject'],\n            testCommentObject: outcomeList['testCommentObject'] && outcomeList['testCommentObject'],\n            reportCommentObject: outcomeList['reportCommentObject'] && outcomeList['reportCommentObject'],\n            CommentType: CommentType.get(\"OptionList\"),\n            CommentSubType: CommentSubType.get(\"OptionList\"),\n            predefcomments,\n            openModalPopup: false,\n            openmodalsavePopup: false,\n            activeTabIndex: 0,\n            action: \"update\"\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(intl.formatMessage({\n            id: error.message\n          }));\n        } else {\n          toast.warn(intl.formatMessage({\n            id: error.response.data\n          }));\n        }\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTRULETOEDIT\"\n      }));\n    }\n  };\n}\nexport function getParameterRulesEngine(selectedRecord, masterData, userInfo) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testgrouprulesengine/getParameterRulesEngine\", {\n      'userinfo': userInfo,\n      \"ntestgrouptestcode\": selectedRecord['ntestgrouptestcode'].value\n    }).then(response => {\n      const testGroupTestParameterRulesEngine = constructOptionList(response.data.TestGroupTestParameterRulesEngine || [], \"ntestgrouptestparametercode\", \"sparametersynonym\", undefined, undefined, undefined);\n      let testGroupTestParameterRulesEngineList = testGroupTestParameterRulesEngine.get(\"OptionList\");\n      masterData['testGroupTestParameterRulesEngine'] = testGroupTestParameterRulesEngineList;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          selectedRecord,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getParameterResultValue(combodata, groupIndex, index, PredefinedParameterOptions, selectedRecord, masterData, userInfo) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testgrouprulesengine/getParameterResultValue\", {\n      'userinfo': userInfo,\n      \"nparametertypecode\": combodata['stestname']['item']['nparametertypecode'],\n      'ntestgrouptestparametercode': combodata['stestname']['item']['ntestgrouptestparametercode']\n    }).then(response => {\n      const PredefinedParameterRulesEngine = constructOptionList(response.data.PredefinedParameterRulesEngine || [], \"ntestgrouptestpredefcode\", \"spredefinedname\", undefined, undefined, undefined);\n\n      if (PredefinedParameterOptions[groupIndex] === undefined) {\n        PredefinedParameterOptions[groupIndex] = [];\n      }\n\n      if (PredefinedParameterOptions[groupIndex][index] === undefined) {\n        PredefinedParameterOptions[groupIndex][index] = [];\n      }\n\n      PredefinedParameterOptions[groupIndex][index] = PredefinedParameterRulesEngine.get(\"OptionList\");\n      masterData['PredefinedParameterOptions'] = PredefinedParameterOptions;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          selectedRecord,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/TestGroupRuleEngineAction.js"],"names":["rsapi","DEFAULT_RETURN","constructOptionList","sortData","toast","Axios","initRequest","intl","ColumnType","queryTypeFilter","transactionStatus","format","getTestGroupRulesEngineAdd","userInfo","testgrouprulesengine","inputParam","masterData","testcomments","reportcomments","predefcomments","sampletestcommentsList","selectedRecord","addGroupList","dispatch","SelectedTest","warn","formatMessage","id","url","push","post","userinfo","ntestgrouptestcode","SelectedComponent","nspecsampletypecode","SelectedSpecification","napproveconfversioncode","nallottedspeccode","all","then","response","DiagnosticCase","data","Grade","viewListMap","undefined","resultType","site","CommentType","commentsubtypelst","w","filter","x","ncommentsubtypecode","CommentSubType","testInitiateTestCombo","commentlist","y","z","get","type","payload","loading","operation","databaseviewList","openPortalModal","screenName","siteObject","testCommentObject","reportCommentObject","testInitiateTests","testRepeatTests","testenforceTests","testCommentsTests","reportCommentsTests","reportCommentsTestsTab","activeTabIndex","testCommentsTestCombo","testRepeatTestCombo","testenforceTestCombo","rulesOption","DiagnosticCaseList","GradeList","siteList","resultTypeList","testCommentsTestsTab","testInitiateSiteTab","PredefinedParameterOptions","testRepeatTestsTab","testenforceTestsTab","testInitiateTestOptions","testCommentsTestOptions","reportCommentsTestOptions","openModalPopup","openmodalsavePopup","viewColumnListByRule","catch","error","status","message","getSpecificationTestGroupRulesEngine","ismodalcombochange","nproductcatcode","item","TestGroupSpecification","TestGroupSpecificationList","selectedcombo","getComponentTestGroupRulesEngine","Component","ComponentList","getSelectedTestGroupRulesEngine","parseInt","ntestgrouprulesenginecode","SelectedRulesEngine","getTestGroupRulesEngine","ncomponentcode","getEditTestGroupRulesEngine","length","urlArray","responsedata","srulename","nruleexecorder","groupList","outcomeList","map","ruleslist","index","hasOwnProperty","action","getParameterRulesEngine","value","testGroupTestParameterRulesEngine","TestGroupTestParameterRulesEngine","testGroupTestParameterRulesEngineList","getParameterResultValue","combodata","groupIndex","PredefinedParameterRulesEngine"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport {\r\n    constructOptionList,\r\n    sortData\r\n} from '../components/CommonScript' //getComboLabelValue,, searchData\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport {\r\n    initRequest\r\n} from './LoginAction';\r\nimport {\r\n    intl\r\n} from '../components/App';\r\nimport {\r\n    ColumnType,\r\n    queryTypeFilter,\r\n    transactionStatus\r\n} from '../components/Enumeration';\r\nimport { format } from 'date-fns';\r\n\r\nexport function getTestGroupRulesEngineAdd(userInfo, testgrouprulesengine, inputParam, masterData) {\r\n    let testcomments = []\r\n    let reportcomments = []\r\n    let predefcomments = []\r\n    let sampletestcommentsList = []\r\n    let selectedRecord = {}\r\n    let addGroupList = []\r\n    return function (dispatch) {\r\n        if (masterData && masterData.SelectedTest === null) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_ADDTEST\" }));\r\n        }\r\n        else {\r\n        //if (masterData.SelectedSpecification&&masterData.SelectedSpecification['napprovalstatus'] === transactionStatus.APPROVED) { \r\n        dispatch(initRequest(true)); \r\n            let url = [];\r\n            if (testgrouprulesengine) {\r\n                url.push(rsapi.post(\"/testgrouprulesengine/getdatabasetables\", {\r\n                    userinfo: userInfo\r\n                }));\r\n\r\n            } else {\r\n                url.push(rsapi.post(\"/testgrouprulesengine/getTestGroupRulesEngineAdd\", {\r\n                    \"ntestgrouptestcode\": masterData.SelectedTest.ntestgrouptestcode,\r\n                    \"nspecsampletypecode\": masterData.SelectedComponent.nspecsampletypecode,\r\n                    \"napproveconfversioncode\":masterData.SelectedSpecification.napproveconfversioncode,\r\n                    \"nallottedspeccode\":masterData.SelectedSpecification.nallottedspeccode,\r\n                    userinfo: userInfo\r\n                }));\r\n                url.push(rsapi.post(\"/grade/getGrade\", {\r\n                    userinfo: userInfo\r\n                }));\r\n                url.push(rsapi.post(\"/site/getSite\", {\r\n                    userinfo: userInfo\r\n                }));\r\n                url.push(rsapi.post(\"/sampletestcomments/getSampleTestComments\", {\r\n                    userinfo: userInfo\r\n                }));\r\n                url.push(rsapi.post(\"/sampletestcomments/getCommentType\", {\r\n                    userinfo: userInfo\r\n                }));\r\n                url.push(rsapi.post(\"/sampletestcomments/getCommentSubType\", {\r\n                    userinfo: userInfo\r\n                }));\r\n            }\r\n            Axios.all(url)\r\n                .then(response => {\r\n                    const DiagnosticCase = constructOptionList(response[0].data[\"DiagnosticCase\"] || [], \"ndiagnosticcasecode\", \"sdiagnosticcasename\", false, false, false);\r\n                    const Grade = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, false);\r\n                    const viewListMap = constructOptionList(response[0].data[\"TestParameter\"] || [], \"ntestgrouptestparametercode\", \"stestparametersynonym\", undefined, undefined, undefined);\r\n                    const resultType = constructOptionList(response[0].data[\"ResultType\"] || [], \"nresultypecode\", \"sdisplayname\", undefined, undefined, undefined);\r\n                    const site = constructOptionList(response[2].data || [], \"nsitecode\", \"ssitename\", false, false, false);\r\n                    const CommentType = constructOptionList(response[4].data['CommentType'] || [], \"ncommenttypecode\", \"scommenttype\", false, false, false);\r\n                    let commentsubtypelst = response[5].data['CommentSubType']\r\n                    let w = commentsubtypelst.filter(x => x.ncommentsubtypecode === 3 || x.ncommentsubtypecode === 6)\r\n                    const CommentSubType = constructOptionList(w || [], \"ncommentsubtypecode\", \"scommentsubtype\", false, false, false);\r\n                    const testInitiateTestCombo = constructOptionList(masterData['TestGroupTest'] || [], \"ntestgrouptestcode\", \"stestsynonym\", false, false, false);\r\n\r\n                    let commentlist = response[3].data\r\n                    let x = commentlist.filter(x => x.ncommentsubtypecode === 1)\r\n                    let y = commentlist.filter(x => x.ncommentsubtypecode === 4)\r\n                    let z = commentlist.filter(x => x.ncommentsubtypecode === 3)\r\n\r\n                    testcomments = (constructOptionList(x || [], \"nsampletestcommentscode\", \"sdescription\", false, false, false)).get(\"OptionList\");\r\n                    reportcomments = (constructOptionList(y || [], \"nsampletestcommentscode\", \"sdescription\", false, false, false)).get(\"OptionList\");\r\n                    predefcomments = (constructOptionList(z || [], \"nsampletestcommentscode\", \"spredefinedname\", false, false, false)).get(\"OptionList\");\r\n\r\n                    masterData['testParameter'] = {}\r\n                    masterData['testParameterComments'] = {}\r\n                    masterData['testParameterreportComments'] = {}\r\n                    masterData['testComments'] = {}\r\n                    masterData['reportComments'] = {}\r\n                    masterData['testSite'] = {}\r\n                    masterData['testRepeat'] = []\r\n                    masterData['testenforceTests'] = []\r\n\r\n                    selectedRecord[\"groupList\"] = [];\r\n                    selectedRecord[\"groupList\"][0] = [];\r\n                    selectedRecord[\"groupList\"][0][\"button_and\"] = true;\r\n                    selectedRecord[\"groupList\"][0][0] = {};\r\n                    addGroupList[0] = 1;\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            operation: 'create',\r\n                            databaseviewList: viewListMap.get(\"OptionList\"),\r\n                            testcomments,\r\n                            reportcomments,\r\n\r\n                            openPortalModal: true,\r\n                            screenName: \"IDS_ADDRULESENGINE\",\r\n                            testgrouprulesengine,\r\n                            ...inputParam,\r\n\r\n                            siteObject: {},\r\n                            testCommentObject: {},\r\n                            reportCommentObject: {},\r\n                            testInitiateTests: [],\r\n                            testRepeatTests: [],\r\n                            testenforceTests: [],\r\n                            testCommentsTests: [],\r\n                            reportCommentsTests: []\r\n                            ,\r\n                            reportCommentsTestsTab: [],\r\n                            \r\n                            activeTabIndex: 0,\r\n                            masterData: {\r\n                                ...masterData, testInitiateTestCombo: testInitiateTestCombo.get(\"OptionList\"),\r\n                                testCommentsTestCombo: testInitiateTestCombo.get(\"OptionList\"),\r\n                                testRepeatTestCombo: testInitiateTestCombo.get(\"OptionList\"),\r\n                                testenforceTestCombo: testInitiateTestCombo.get(\"OptionList\"),\r\n                                rulesOption: viewListMap.get(\"OptionList\"),\r\n                                DiagnosticCaseList: DiagnosticCase.get(\"OptionList\"),\r\n                                GradeList: Grade.get(\"OptionList\"),\r\n                                siteList: site.get(\"OptionList\"),\r\n                                resultTypeList: resultType.get(\"OptionList\"),\r\n                                testCommentsTestsTab: [],\r\n                                testInitiateSiteTab: [],\r\n                                PredefinedParameterOptions:[],\r\n                                testRepeatTestsTab: [],\r\n                                testenforceTestsTab: [],\r\n                            },\r\n\r\n                            testInitiateTestOptions: viewListMap.get(\"OptionList\"),\r\n                            testCommentsTestOptions: viewListMap.get(\"OptionList\"),\r\n                            reportCommentsTestOptions: viewListMap.get(\"OptionList\"),\r\n                            CommentType: CommentType.get(\"OptionList\"),\r\n                            CommentSubType: CommentSubType.get(\"OptionList\"),\r\n                            predefcomments,\r\n                            openModalPopup: false,\r\n                            openmodalsavePopup: false,\r\n                            addGroupList,\r\n                            selectedRecord,\r\n                            viewColumnListByRule: viewListMap.get(\"OptionList\")\r\n                        }\r\n                    });\r\n                }\r\n                )\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n       // }\r\n        // else {\r\n        //     toast.warn(intl.formatMessage({ id: \"IDS_RULESCANBEADDEDONLYFORAPPROVEDSPEC\" })); \r\n        // }\r\n\r\n            }\r\n    }\r\n}\r\nexport function getSpecificationTestGroupRulesEngine(inputParam, selectedRecord, ismodalcombochange, masterData, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgrouprulesengine/getSpecificationTestGroupRulesEngine\",\r\n            { 'userinfo': userInfo, \"nproductcatcode\": inputParam.nproductcatcode.item.nproductcatcode })\r\n            .then(response => {\r\n                const TestGroupSpecification = constructOptionList(response.data.TestGroupSpecification || [], \"nallottedspeccode\",\r\n                    \"sspecname\", undefined, undefined, undefined);\r\n                let TestGroupSpecificationList = TestGroupSpecification.get(\"OptionList\");\r\n                if (ismodalcombochange) {\r\n                    selectedRecord = { ...selectedRecord, ...inputParam, 'nallottedspeccode': TestGroupSpecificationList[0] }\r\n                    masterData = { ...masterData, ...response.data }\r\n                }\r\n                else {\r\n                    let selectedcombo = { ...inputParam, 'nallottedspeccode': TestGroupSpecificationList[0] }\r\n                    masterData = { ...masterData, ...response.data, selectedcombo }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        selectedRecord,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport function getComponentTestGroupRulesEngine(inputParam, selectedRecord, ismodalcombochange, masterData, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgrouprulesengine/getComponentTestGroupRulesEngine\",\r\n            { 'userinfo': userInfo, \"nallottedspeccode\": inputParam.nallottedspeccode.item.nallottedspeccode })\r\n            .then(response => {\r\n                const Component = constructOptionList(response.data.Component || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, undefined);\r\n                let ComponentList = Component.get(\"OptionList\");\r\n                if (ismodalcombochange) {\r\n                    selectedRecord = { ...selectedRecord, ...inputParam, 'ncomponentcode': ComponentList[0] }\r\n                    masterData = { ...masterData, ...response.data }\r\n                }\r\n                else {\r\n                    let selectedcombo = { ...inputParam, 'ncomponentcode': ComponentList[0] }\r\n                    masterData = { ...masterData, ...response.data, selectedcombo }\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        selectedRecord,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport function getSelectedTestGroupRulesEngine(inputParam, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgrouprulesengine/getSelectedTestGroupRulesEngine\",\r\n            {\r\n                'userinfo': userInfo, \"ntestgrouprulesenginecode\": parseInt(inputParam.ntestgrouprulesenginecode)//, nproductcatcode: masterData.SelectedProductCategory.nproductcatcode\r\n                , \"ntestgrouptestcode\": masterData.SelectedTest.ntestgrouptestcode,\r\n            })\r\n            .then(response => {\r\n\r\n                masterData = {\r\n                    ...masterData, SelectedRulesEngine: response.data[\"SelectedRulesEngine\"]\r\n                };\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function getTestGroupRulesEngine(nproductcatcode, nallottedspeccode, ncomponentcode, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgrouprulesengine/getTestGroupRulesEngine\",\r\n            {\r\n                'userinfo': userInfo, \"nproductcatcode\": nproductcatcode\r\n                , \"nallottedspeccode\": nallottedspeccode\r\n                , \"ncomponentcode\": ncomponentcode\r\n            })\r\n            .then(response => {\r\n\r\n                masterData = {\r\n                    ...response.data\r\n                };\r\n                sortData(masterData);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport function getEditTestGroupRulesEngine(operation, masterData//,\r\n    // ncontrolCode\r\n    , userInfo) {\r\n    let testcomments = []\r\n    let reportcomments = []\r\n    let predefcomments = []\r\n    return function (dispatch) {\r\n        if (masterData['RulesEngine'] && masterData['RulesEngine'].length > 0) {\r\n            let urlArray = [];\r\n            let selectedRecord = {}\r\n            urlArray.push(rsapi.post(\"testgrouprulesengine/getEditTestGroupRulesEngine\", {\r\n                'ntestgrouprulesenginecode':\r\n                    masterData.SelectedRulesEngine['ntestgrouprulesenginecode'], 'masterData': masterData, \"userinfo\": userInfo\r\n            }));\r\n            urlArray.push(rsapi.post(\"/grade/getGrade\", {\r\n                userinfo: userInfo\r\n            }));\r\n            urlArray.push(rsapi.post(\"/site/getSite\", {\r\n                userinfo: userInfo\r\n            }));\r\n            urlArray.push(rsapi.post(\"/sampletestcomments/getSampleTestComments\", {\r\n                userinfo: userInfo\r\n            }));\r\n            urlArray.push(rsapi.post(\"/testgrouprulesengine/getTestGroupRulesEngineAdd\", {\r\n                \"ntestgrouptestcode\": masterData.SelectedTest.ntestgrouptestcode,\r\n                \"nspecsampletypecode\": masterData.SelectedComponent.nspecsampletypecode,\r\n                \"napproveconfversioncode\":masterData.SelectedSpecification.napproveconfversioncode,\r\n                \"nallottedspeccode\":masterData.SelectedSpecification.nallottedspeccode,\r\n                userinfo: userInfo\r\n            }));\r\n            urlArray.push(rsapi.post(\"/productcategory/getProductCategory\", {\r\n                userinfo: userInfo\r\n            }));\r\n\r\n            urlArray.push(rsapi.post(\"/sampletestcomments/getCommentType\", {\r\n                userinfo: userInfo\r\n            }));\r\n            urlArray.push(rsapi.post(\"/sampletestcomments/getCommentSubType\", {\r\n                userinfo: userInfo\r\n            }));\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    masterData['testParameter'] = {}\r\n                    masterData['testParameterComments'] = {}\r\n                    masterData['testParameterreportComments'] = {}\r\n                    let responsedata = response[0].data\r\n                    let srulename = responsedata['RulesEngineEdit'][0]['srulename']\r\n                    let nruleexecorder = responsedata['RulesEngineEdit'][0]['nruleexecorder']\r\n                    let groupList = responsedata['RulesEngineEdit'][0]['jsondata']\r\n                    let outcomeList = responsedata['RulesEngineEdit'][0]['jsonuidata']\r\n                    selectedRecord[\"groupList\"] = []\r\n                    groupList.map((ruleslist, index) => {\r\n\r\n                        if (ruleslist.hasOwnProperty('button_or')) {\r\n                            selectedRecord[\"groupList\"][index] = ruleslist[\"button_or\"]\r\n                            selectedRecord[\"groupList\"][index][\"button_or\"] = true\r\n                        }\r\n                        if (ruleslist.hasOwnProperty('button_and')) {\r\n                            selectedRecord[\"groupList\"][index] = ruleslist[\"button_and\"]\r\n                            selectedRecord[\"groupList\"][index][\"button_and\"] = true\r\n                        }\r\n                        if (ruleslist.hasOwnProperty('button_not_button_and')) {\r\n                            selectedRecord[\"groupList\"][index] = ruleslist[\"button_not_button_and\"]\r\n                            selectedRecord[\"groupList\"][index][\"button_and\"] = true\r\n                            selectedRecord[\"groupList\"][index][\"button_not\"] = true\r\n                        }\r\n                        if (ruleslist.hasOwnProperty('button_not_button_or')) {\r\n                            selectedRecord[\"groupList\"][index] = ruleslist[\"button_not_button_or\"]\r\n                            selectedRecord[\"groupList\"][index][\"button_or\"] = true\r\n                            selectedRecord[\"groupList\"][index][\"button_not\"] = true\r\n                        }\r\n                    })\r\n                    // if (responsedata['RulesEngineEdit'][0]['jsondata'].hasOwnProperty('button_not_button_and')) {\r\n                    //     selectedRecord[\"groupList\"]['button_not'] = true\r\n                    // }\r\n                    // if (responsedata['RulesEngineEdit'][0]['jsondata'].hasOwnProperty('button_not_button_or')) {\r\n                    //     selectedRecord[\"groupList\"]['button_not'] = true\r\n                    // }\r\n                    if (responsedata['RulesEngineEdit'][0]['jsondata'].hasOwnProperty('button_or')) {\r\n                        selectedRecord[\"groupList\"]['button_or'] = true\r\n                    }\r\n                    else {\r\n                        selectedRecord[\"groupList\"]['button_and'] = true\r\n                    }\r\n                    selectedRecord['srulename'] = srulename\r\n                    selectedRecord['srulenamecopy'] = srulename\r\n                    selectedRecord['nruleexecordercopy'] =nruleexecorder\r\n                    // selectedRecord[\"groupList\"][0][\"button_and\"] = true\r\n                    let addGroupList = []\r\n                    addGroupList = responsedata['RulesEngineEdit'][0]['jsonuidata']['addGroupList']\r\n                    const DiagnosticCase = constructOptionList(response[4].data[\"DiagnosticCase\"] || [], \"ndiagnosticcasecode\", \"sdiagnosticcasename\", false, false, false);\r\n                    const Grade = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, false);\r\n                    const viewListMap = constructOptionList(response[4].data[\"TestParameter\"] || [], \"ntestgrouptestparametercode\", \"stestparametersynonym\", undefined, undefined, undefined);\r\n                    const resultType = constructOptionList(response[4].data[\"ResultType\"] || [], \"nresultypecode\", \"sdisplayname\", undefined, undefined, undefined);\r\n                    const site = constructOptionList(response[2].data || [], \"nsitecode\", \"ssitename\", false, false, false);\r\n                    const CommentType = constructOptionList(response[6].data['CommentType'] || [], \"ncommenttypecode\", \"scommenttype\", false, false, false);\r\n                    const testInitiateTestCombo = constructOptionList(masterData['TestGroupTest'] || [], \"ntestgrouptestcode\", \"stestsynonym\", false, false, false);\r\n\r\n\r\n                    let commentsubtypelst = response[7].data['CommentSubType']\r\n                    let w = commentsubtypelst.filter(x => x.ncommentsubtypecode === 3 || x.ncommentsubtypecode === 6)\r\n                    const CommentSubType = constructOptionList(w || [], \"ncommentsubtypecode\", \"scommentsubtype\", false, false, false);\r\n                    let commentlist = response[3].data\r\n                    let x = commentlist.filter(x => x.ncommentsubtypecode === 1)\r\n                    let y = commentlist.filter(x => x.ncommentsubtypecode === 4)\r\n                    let z = commentlist.filter(x => x.ncommentsubtypecode === 3)\r\n                    testcomments = (constructOptionList(x || [], \"nsampletestcommentscode\", \"sdescription\", false, false, false)).get(\"OptionList\");\r\n                    reportcomments = (constructOptionList(y || [], \"nsampletestcommentscode\", \"sdescription\", false, false, false)).get(\"OptionList\");\r\n                    predefcomments = (constructOptionList(z || [], \"nsampletestcommentscode\", \"spredefinedname\", false, false, false)).get(\"OptionList\");\r\n\r\n                    masterData['testParameter'] = outcomeList['testInitiateTests'] && outcomeList['testInitiateTests']\r\n                    masterData['testRepeat'] = outcomeList['testRepeatTests'] && outcomeList['testRepeatTests']\r\n                    masterData['testenforceTests'] = outcomeList['testenforceTests'] && outcomeList['testenforceTests']\r\n\r\n                    masterData['testParameterComments'] = outcomeList['testCommentsTests'] && outcomeList['testCommentsTests']\r\n                    masterData['testParameterreportComments'] = outcomeList['reportCommentsTests'] && outcomeList['reportCommentsTests']\r\n\r\n                    masterData[\"testComments\"] = outcomeList['testCommentObject'] && outcomeList['testCommentObject']\r\n                    masterData[\"reportComments\"] = outcomeList['reportCommentObject'] && outcomeList['reportCommentObject']\r\n                    masterData[\"testSite\"] = outcomeList['siteObject'] && outcomeList['siteObject']\r\n                    selectedRecord[\"nproductcatcode\"] = outcomeList['nproductcatcode'] && outcomeList['nproductcatcode']\r\n                    selectedRecord[\"nallottedspeccode\"] = outcomeList['nallottedspeccode'] && outcomeList['nallottedspeccode']\r\n                    selectedRecord[\"ncomponentcode\"] = outcomeList['ncomponentcode'] && outcomeList['ncomponentcode']\r\n                    selectedRecord[\"groupListJoins\"] = outcomeList['groupListJoins'] && outcomeList['groupListJoins']\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            operation: operation, screenName: \"IDS_EDITRULESENGINE\", selectedRecord,\r\n                            openPortalModal: true,// ncontrolCode: ncontrolCode,\r\n                            loading: false, addGroupList,\r\n                            masterData: {\r\n                                ...masterData, testInitiateTestCombo: testInitiateTestCombo.get(\"OptionList\"),\r\n                                testCommentsTestCombo: testInitiateTestCombo.get(\"OptionList\"),\r\n                                testRepeatTestCombo: testInitiateTestCombo.get(\"OptionList\"),\r\n                                testenforceTestCombo: testInitiateTestCombo.get(\"OptionList\"),\r\n                                rulesOption: viewListMap.get(\"OptionList\"),\r\n                                DiagnosticCaseList: DiagnosticCase.get(\"OptionList\"),\r\n                                GradeList: Grade.get(\"OptionList\"),\r\n                                siteList: site.get(\"OptionList\"),\r\n                                resultTypeList: resultType.get(\"OptionList\"),\r\n                                testCommentsTestsTab: outcomeList['testCommentsTestsTab'],\r\n                                testRepeatTestsTab: outcomeList['testRepeatTestsTab'], \r\n                                testenforceTestsTab: outcomeList['testenforceTestsTab'],  \r\n                                PredefinedParameterOptions: outcomeList['PredefinedParameterOptions'],\r\n                                testInitiateSiteTab: outcomeList['testInitiateSiteTab'],\r\n                                reportCommentsTestsTab: outcomeList['reportCommentsTestsTab'],\r\n                            },\r\n                            viewColumnListByRule: viewListMap.get(\"OptionList\"),\r\n\r\n                            testcomments,\r\n                            reportcomments,\r\n\r\n                            testInitiateTests: outcomeList['testInitiateTests'] && outcomeList['testInitiateTests'],\r\n                            testCommentsTests: outcomeList['testCommentsTests'] && outcomeList['testCommentsTests'],\r\n                            testRepeatTests: outcomeList['testRepeatTests'] && outcomeList['testRepeatTests'],\r\n                            testenforceTests: outcomeList['testenforceTests'] && outcomeList['testenforceTests'],\r\n                            reportCommentsTests: outcomeList['reportCommentsTests'] && outcomeList['reportCommentsTests'],\r\n                            siteObject: outcomeList['siteObject'] && outcomeList['siteObject'],\r\n                            testCommentObject: outcomeList['testCommentObject'] && outcomeList['testCommentObject'],\r\n                            reportCommentObject: outcomeList['reportCommentObject'] && outcomeList['reportCommentObject'],\r\n                          \r\n                            CommentType: CommentType.get(\"OptionList\"),\r\n                            CommentSubType: CommentSubType.get(\"OptionList\"),\r\n                            predefcomments,\r\n                            openModalPopup: false,\r\n                            openmodalsavePopup: false,\r\n                            activeTabIndex: 0,\r\n                            action: \"update\"\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({ id: error.message }));\r\n                    }\r\n                    else {\r\n                        toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTRULETOEDIT\" }));\r\n        }\r\n    }\r\n}\r\nexport function getParameterRulesEngine(selectedRecord, masterData, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgrouprulesengine/getParameterRulesEngine\",\r\n            { 'userinfo': userInfo, \"ntestgrouptestcode\": selectedRecord['ntestgrouptestcode'].value, })\r\n            .then(response => {\r\n                const testGroupTestParameterRulesEngine = constructOptionList(response.data.TestGroupTestParameterRulesEngine || [], \"ntestgrouptestparametercode\",\r\n                    \"sparametersynonym\", undefined, undefined, undefined);\r\n                let testGroupTestParameterRulesEngineList = testGroupTestParameterRulesEngine.get(\"OptionList\");\r\n                masterData['testGroupTestParameterRulesEngine'] = testGroupTestParameterRulesEngineList\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        selectedRecord,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getParameterResultValue(combodata,groupIndex,index,PredefinedParameterOptions, selectedRecord, masterData, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgrouprulesengine/getParameterResultValue\",\r\n            {\r\n                'userinfo': userInfo, \"nparametertypecode\": combodata['stestname']['item']['nparametertypecode'],\r\n                'ntestgrouptestparametercode': combodata['stestname']['item']['ntestgrouptestparametercode']\r\n            })\r\n            .then(response => {\r\n                const PredefinedParameterRulesEngine = constructOptionList(response.data.PredefinedParameterRulesEngine || [], \"ntestgrouptestpredefcode\",\r\n                    \"spredefinedname\", undefined, undefined, undefined);\r\n                    if(PredefinedParameterOptions[groupIndex]===undefined)\r\n                    {\r\n                        PredefinedParameterOptions[groupIndex]=[] \r\n                    }\r\n                    if(PredefinedParameterOptions[groupIndex][index]===undefined)\r\n                    {\r\n                        PredefinedParameterOptions[groupIndex][index]=[] \r\n                    }\r\n                 PredefinedParameterOptions[groupIndex][index] = PredefinedParameterRulesEngine.get(\"OptionList\"); \r\n                masterData['PredefinedParameterOptions'] = PredefinedParameterOptions\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        selectedRecord,\r\n                        loading: false\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}