{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{DEFAULT_RETURN}from'./LoginTypes';import rsapi from'../rsapi';import{toast}from'react-toastify';import{sortData,constructOptionList}from'../components/CommonScript';import{initRequest}from'./LoginAction';import{intl}from'../components/App';import Axios from'axios';export function getSiteDetail(Site,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"site/getSiteScreen\",{nsitecode:Site.nsitecode,userinfo:userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,operation:null,modalName:undefined,loading:false,dataState:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getSiteCombo(siteParam){return function(dispatch){var urlArray=[];var selectedId=null;var timeZoneService=rsapi.post(\"timezone/getTimeZone\");var dateformat=rsapi.post(\"site/getDateFormat\",{userinfo:siteParam.userInfo});if(siteParam.operation===\"create\"){urlArray=[timeZoneService,dateformat];}else{var _rsapi$post;var SiteByID=rsapi.post(\"site/getActiveSiteById\",(_rsapi$post={},_defineProperty(_rsapi$post,siteParam.primaryKeyField,siteParam.primaryKeyValue),_defineProperty(_rsapi$post,\"userinfo\",siteParam.userInfo),_rsapi$post));urlArray=[timeZoneService,dateformat,SiteByID];selectedId=siteParam.primaryKeyValue;}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var _payload;var timezone=[];var dateFormat=[];var selectedRecord={};var timezoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,false);var TimeZoneList=timezoneMap.get(\"OptionList\");var dateFormatMap=constructOptionList(response[1].data.DateFormat||[],\"ndateformatcode\",\"sdateformat\",undefined,undefined,false);var dateFormatList=dateFormatMap.get(\"OptionList\");if(siteParam.operation===\"update\"){selectedRecord=response[2].data;timezone.push({\"value\":response[2].data[\"ntimezonecode\"],\"label\":response[2].data[\"stimezoneid\"]});dateFormat.push({\"value\":response[2].data[\"ndateformatcode\"],\"label\":response[2].data[\"sdateformat\"]});selectedRecord[\"ntimezonecode\"]=timezone[0];selectedRecord[\"ndateformatcode\"]=dateFormat[0];}// else {\n//     selectedRecord = {\n//         ntimezonecode: {\n//             \"label\": siteParam.userInfo.stimezoneid,\n//             \"value\": siteParam.userInfo.ntimezonecode\n//         }\n//     };\n// }\ndispatch({type:DEFAULT_RETURN,payload:(_payload={TimeZoneList:TimeZoneList,isOpen:true,selectedRecord:siteParam.operation===\"update\"?selectedRecord:{\"ntransactionstatus\":1},operation:siteParam.operation,screenName:siteParam.screenName},_defineProperty(_payload,\"selectedRecord\",selectedRecord),_defineProperty(_payload,\"openModal\",true),_defineProperty(_payload,\"ncontrolCode\",siteParam.ncontrolCode),_defineProperty(_payload,\"loading\",false),_defineProperty(_payload,\"selectedId\",selectedId),_defineProperty(_payload,\"dateFormatList\",dateFormatList),_payload)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/SiteAction.js"],"names":["DEFAULT_RETURN","rsapi","toast","sortData","constructOptionList","initRequest","intl","Axios","getSiteDetail","Site","userInfo","masterData","dispatch","post","nsitecode","userinfo","then","response","data","type","payload","operation","modalName","undefined","loading","dataState","catch","error","status","message","warn","getSiteCombo","siteParam","urlArray","selectedId","timeZoneService","dateformat","SiteByID","primaryKeyField","primaryKeyValue","all","timezone","dateFormat","selectedRecord","timezoneMap","TimeZoneList","get","dateFormatMap","DateFormat","dateFormatList","push","isOpen","screenName","ncontrolCode","formatMessage","id"],"mappings":"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","sourcesContent":["import { DEFAULT_RETURN } from './LoginTypes';\r\nimport rsapi from '../rsapi';\r\nimport { toast } from 'react-toastify';\r\nimport { sortData, constructOptionList } from '../components/CommonScript';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\nimport Axios from 'axios';\r\n\r\n\r\nexport function getSiteDetail(Site, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"site/getSiteScreen\", { nsitecode: Site.nsitecode, userinfo: userInfo })\r\n            .then(response => {\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData, operation: null, modalName: undefined,\r\n                        loading: false, dataState: undefined\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getSiteCombo(siteParam) {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n        let selectedId = null;\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        const dateformat = rsapi.post(\"site/getDateFormat\", { userinfo: siteParam.userInfo });\r\n        if (siteParam.operation === \"create\") {\r\n\r\n            urlArray = [timeZoneService, dateformat];\r\n        }\r\n        else {\r\n\r\n            const SiteByID = rsapi.post(\"site/getActiveSiteById\", { [siteParam.primaryKeyField]: siteParam.primaryKeyValue, \"userinfo\": siteParam.userInfo });\r\n            urlArray = [timeZoneService, dateformat, SiteByID];\r\n            selectedId = siteParam.primaryKeyValue;\r\n\r\n        }\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n\r\n                let timezone = [];\r\n                let dateFormat = [];\r\n\r\n                let selectedRecord = {};\r\n                const timezoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, false);\r\n\r\n                const TimeZoneList = timezoneMap.get(\"OptionList\");\r\n\r\n                const dateFormatMap = constructOptionList(response[1].data.DateFormat || [], \"ndateformatcode\",\r\n                    \"sdateformat\", undefined, undefined, false);\r\n\r\n                const dateFormatList = dateFormatMap.get(\"OptionList\");\r\n                if (siteParam.operation === \"update\") {\r\n\r\n                    selectedRecord = response[2].data;\r\n                    timezone.push({ \"value\": response[2].data[\"ntimezonecode\"], \"label\": response[2].data[\"stimezoneid\"] });\r\n                    dateFormat.push({ \"value\": response[2].data[\"ndateformatcode\"], \"label\": response[2].data[\"sdateformat\"] });\r\n\r\n                    selectedRecord[\"ntimezonecode\"] = timezone[0];\r\n                    selectedRecord[\"ndateformatcode\"] = dateFormat[0];\r\n\r\n\r\n                }\r\n                // else {\r\n                //     selectedRecord = {\r\n                //         ntimezonecode: {\r\n                //             \"label\": siteParam.userInfo.stimezoneid,\r\n                //             \"value\": siteParam.userInfo.ntimezonecode\r\n                //         }\r\n                //     };\r\n                // }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        TimeZoneList, isOpen: true,\r\n                        selectedRecord: siteParam.operation === \"update\" ? selectedRecord : { \"ntransactionstatus\": 1 },\r\n                        operation: siteParam.operation, screenName: siteParam.screenName, selectedRecord,\r\n                        openModal: true,\r\n                        ncontrolCode: siteParam.ncontrolCode,\r\n                        loading: false, selectedId, dateFormatList\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}