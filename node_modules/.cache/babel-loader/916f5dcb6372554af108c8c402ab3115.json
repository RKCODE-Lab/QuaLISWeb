{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{sortData}from'../components/CommonScript';//, getComboLabelValue, searchData\nimport{toast}from'react-toastify';import Axios from'axios';import{initRequest}from'./LoginAction';import{intl}from'../components/App';import{transactionStatus}from'../components/Enumeration';export function getSupplierDetail(supplier,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"supplier/getSupplier\",{nsuppliercode:supplier.nsuppliercode,\"userinfo\":userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response}));}});};}export function getSupplierComboService(screenName,operation,primaryKeyName,primaryKeyValue,masterData,userInfo,ncontrolCode){return function(dispatch){if(operation===\"create\"||operation===\"update\"&&masterData.SelectedSupplier.ntransactionstatus!==transactionStatus.RETIRED){var countryService=rsapi.post(\"country/getCountry\",{userinfo:userInfo});var urlArray=[];if(operation===\"create\"){urlArray=[countryService];}else{var _rsapi$post;var supplierById=rsapi.post(\"supplier/getActiveSupplierById\",(_rsapi$post={},_defineProperty(_rsapi$post,primaryKeyName,primaryKeyValue),_defineProperty(_rsapi$post,\"userinfo\",userInfo),_rsapi$post));//this.props.Login.userInfo\nurlArray=[countryService,supplierById];}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var country=[];var selectedRecord={};if(operation===\"update\"){selectedRecord=response[1].data;country.push({\"value\":response[1].data[\"ncountrycode\"],\"label\":response[1].data[\"scountryname\"]});selectedRecord[\"ncountrycode\"]=country[0];}else{selectedRecord[\"ntransactionstatus\"]=1;}dispatch({type:DEFAULT_RETURN,payload:{countryList:response[0].data||[],operation:operation,screenName:screenName,selectedRecord:selectedRecord,openModal:true,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{//toast.warn(this.props.formatMessage({ id: masterData.SelectedSupplier.stranstatus }));\ntoast.warn(intl.formatMessage({id:masterData.SelectedSupplier.stranstatus}));}};}export function getSupplierCategoryComboDataService(supplierparam){return function(dispatch){if(supplierparam.masterData.SelectedSupplier.ntransactionstatus!==transactionStatus.RETIRED){var contactData={\"nsuppliercode\":supplierparam.masterData.SelectedSupplier.nsuppliercode,\"userinfo\":supplierparam.userInfo};var contactService=rsapi.post(\"suppliercategory/getSupplierCategoryBySupplierCode\",contactData);var urlArray=[];if(supplierparam.operation===\"create\"){urlArray=[contactService];}else{var _rsapi$post2;var contactById=rsapi.post(\"suppliercategory/getActiveSupplierCategoryById\",(_rsapi$post2={},_defineProperty(_rsapi$post2,supplierparam.primaryKeyField,supplierparam.primaryKeyValue),_defineProperty(_rsapi$post2,\"userinfo\",supplierparam.userInfo),_rsapi$post2));urlArray=[contactService,contactById];}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var selectedRecord={};//let selectedSupplierCategory = {};\nif(supplierparam.operation===\"update\"){selectedRecord=response[1].data;selectedRecord[\"nsuppliercatcode\"]=response[1].data[\"nsuppliercatcode\"];}dispatch({type:DEFAULT_RETURN,payload:{supplierCategory:response[0].data||[],selectedSupplierCategory:[],selectedRecord:selectedRecord,openChildModal:true,operation:supplierparam.operation,screenName:supplierparam.screenName,ncontrolCode:supplierparam.ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{//toast.warn(this.props.formatMessage({ id: supplierparam.masterData.SelectedSupplier.stranstatus }));\ntoast.warn(intl.formatMessage({id:supplierparam.masterData.SelectedSupplier.stranstatus}));}};}export function getMaterialCategoryComboDataService(materialparam){return function(dispatch){if(materialparam.masterData.SelectedSupplier.ntransactionstatus!==transactionStatus.RETIRED){var materialData={\"nsuppliercode\":materialparam.masterData.SelectedSupplier.nsuppliercode,\"userinfo\":materialparam.userInfo};var materialService=rsapi.post(\"materialcategory/getMaterialCategoryBYSupplierCode\",materialData);var urlArray=[];if(materialparam.operation===\"create\"){urlArray=[materialService];}else{var _rsapi$post3;var contactById=rsapi.post(\"suppliercategory/getActiveSupplierCategoryById\",(_rsapi$post3={},_defineProperty(_rsapi$post3,materialparam.primaryKeyField,materialparam.primaryKeyValue),_defineProperty(_rsapi$post3,\"userinfo\",materialparam.userInfo),_rsapi$post3));urlArray=[materialService,contactById];}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var selectedRecord={};if(materialparam.operation===\"update\"){selectedRecord=response[1].data;selectedRecord[\"nsuppliercatcode\"]=response[1].data[\"nsuppliercatcode\"];}dispatch({type:DEFAULT_RETURN,payload:{materialCategory:response[0].data||[],selectedMaterialCategory:[],selectedRecord:selectedRecord,openChildModal:true,operation:materialparam.operation,screenName:materialparam.screenName,ncontrolCode:materialparam.ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{//toast.warn(this.props.formatMessage({ id: materialparam.masterData.SelectedSupplier.stranstatus }));\ntoast.warn(intl.formatMessage({id:materialparam.masterData.SelectedSupplier.stranstatus}));}};}// export function filterColumnDataSupplier(filterValue, masterData, userInfo) {\n//     return function (dispatch) {\n//         let supplierCode = 0;\n//         let searchedData = undefined;\n//         if (filterValue === \"\") {\n//             supplierCode = masterData[\"Supplier\"][0].nsuppliercode;\n//         }\n//         else {\n//             searchedData = searchData(filterValue, masterData[\"Supplier\"], \"ssuppliername\");\n//             if (searchedData.length > 0) {\n//                 supplierCode = searchedData[0].nsuppliercode;\n//             }\n//             else {\n//                 masterData[\"Supplier\"] = [];\n//                 masterData[\"SupplierCategory\"] = [];\n//                 masterData[\"MaterialCategory\"] = [];\n//                 masterData[\"SelectedSupplier\"] = [];\n//                 masterData[\"searchedData\"] = [];\n//                 dispatch({ type: DEFAULT_RETURN, payload: { masterData } });\n//             }\n//         }\n//         dispatch(initRequest(true));\n//         return rsapi.post(\"supplier/getSupplier\", { nsuppliercode: supplierCode, userinfo: userInfo })\n//             .then(response => {\n//                 masterData[\"Supplier\"] = response.data[\"Supplier\"];\n//                 masterData[\"SupplierCategory\"] = response.data[\"SupplierCategory\"];\n//                 masterData[\"MaterialCategory\"] = response.data[\"MaterialCategory\"];\n//                 masterData[\"SelectedSupplier\"] = response.data[\"SelectedSupplier\"];\n//                 masterData[\"searchedData\"] = searchedData;\n//                 dispatch({ type: DEFAULT_RETURN, payload: { masterData, loading: false } });\n//             })\n//             .catch(error => {\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\n//                 if (error.response.status === 500) {\n//                     toast.error(error.message);\n//                 }\n//                 else {\n//                     toast.warn(error.response.data);\n//                 }\n//             })\n//     }\n// }","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/SupplierAction.js"],"names":["rsapi","DEFAULT_RETURN","sortData","toast","Axios","initRequest","intl","transactionStatus","getSupplierDetail","supplier","userInfo","masterData","dispatch","post","nsuppliercode","then","response","data","type","payload","loading","catch","error","status","formatMessage","id","message","warn","getSupplierComboService","screenName","operation","primaryKeyName","primaryKeyValue","ncontrolCode","SelectedSupplier","ntransactionstatus","RETIRED","countryService","userinfo","urlArray","supplierById","all","country","selectedRecord","push","countryList","openModal","stranstatus","getSupplierCategoryComboDataService","supplierparam","contactData","contactService","contactById","primaryKeyField","supplierCategory","selectedSupplierCategory","openChildModal","getMaterialCategoryComboDataService","materialparam","materialData","materialService","materialCategory","selectedMaterialCategory"],"mappings":"qUAAA,MAAOA,CAAAA,KAAP,KAAkB,UAAlB,CACA,OAASC,cAAT,KAA+B,cAA/B,CACA,OAASC,QAAT,KAAyB,4BAAzB,CAAqD;AACrD,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,OAASC,IAAT,KAAqB,mBAArB,CACA,OAASC,iBAAT,KAAkC,2BAAlC,CAEA,MAAO,SAASC,CAAAA,iBAAT,CAA2BC,QAA3B,CAAqCC,QAArC,CAA+CC,UAA/C,CAA2D,CAC9D,MAAO,UAAUC,QAAV,CAAoB,CACvBA,QAAQ,CAACP,WAAW,CAAC,IAAD,CAAZ,CAAR,CACA,MAAOL,CAAAA,KAAK,CAACa,IAAN,CAAW,sBAAX,CAAmC,CACtCC,aAAa,CAAEL,QAAQ,CAACK,aADc,CAEtC,WAAYJ,QAF0B,CAAnC,EAIFK,IAJE,CAIG,SAAAC,QAAQ,CAAI,CAEdL,UAAU,gCAAQA,UAAR,EAAuBK,QAAQ,CAACC,IAAhC,CAAV,CACAf,QAAQ,CAACS,UAAD,CAAR,CACAC,QAAQ,CAAC,CAAEM,IAAI,CAAEjB,cAAR,CAAwBkB,OAAO,CAAE,CAAER,UAAU,CAAVA,UAAF,CAAcS,OAAO,CAAE,KAAvB,CAAjC,CAAD,CAAR,CACH,CATE,EAUFC,KAVE,CAUI,SAAAC,KAAK,CAAI,CACZV,QAAQ,CAAC,CAAEM,IAAI,CAAEjB,cAAR,CAAwBkB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACN,QAAN,CAAeO,MAAf,GAA0B,GAA9B,CAAmC,CAC/BpB,KAAK,CAACmB,KAAN,CAAYhB,IAAI,CAACkB,aAAL,CAAmB,CAAEC,EAAE,CAAEH,KAAK,CAACI,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CAEDvB,KAAK,CAACwB,IAAN,CAAWrB,IAAI,CAACkB,aAAL,CAAmB,CAAEC,EAAE,CAAEH,KAAK,CAACN,QAAZ,CAAnB,CAAX,EACH,CAEJ,CApBE,CAAP,CAqBH,CAvBD,CAwBH,CAED,MAAO,SAASY,CAAAA,uBAAT,CAAiCC,UAAjC,CAA6CC,SAA7C,CAAwDC,cAAxD,CAAwEC,eAAxE,CAAyFrB,UAAzF,CAAqGD,QAArG,CAA+GuB,YAA/G,CAA6H,CAChI,MAAO,UAAUrB,QAAV,CAAoB,CACvB,GAAIkB,SAAS,GAAK,QAAd,EAA2BA,SAAS,GAAK,QAAd,EAA0BnB,UAAU,CAACuB,gBAAX,CAA4BC,kBAA5B,GAAmD5B,iBAAiB,CAAC6B,OAA9H,CAAwI,CAGpI,GAAMC,CAAAA,cAAc,CAAGrC,KAAK,CAACa,IAAN,CAAW,oBAAX,CAAiC,CAAEyB,QAAQ,CAAE5B,QAAZ,CAAjC,CAAvB,CAEA,GAAI6B,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIT,SAAS,GAAK,QAAlB,CAA4B,CAExBS,QAAQ,CAAG,CAACF,cAAD,CAAX,CACH,CAHD,IAIK,iBACD,GAAMG,CAAAA,YAAY,CAAGxC,KAAK,CAACa,IAAN,CAAW,gCAAX,6CAAgDkB,cAAhD,CAAiEC,eAAjE,8BAAkF,UAAlF,CAA8FtB,QAA9F,eAArB,CAA+H;AAE/H6B,QAAQ,CAAG,CAACF,cAAD,CAAiBG,YAAjB,CAAX,CACH,CACD5B,QAAQ,CAACP,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAD,KAAK,CAACqC,GAAN,CAAUF,QAAV,EACKxB,IADL,CACU,SAAAC,QAAQ,CAAI,CAGd,GAAI0B,CAAAA,OAAO,CAAG,EAAd,CAEA,GAAIC,CAAAA,cAAc,CAAG,EAArB,CAEA,GAAIb,SAAS,GAAK,QAAlB,CAA4B,CACxBa,cAAc,CAAG3B,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAA7B,CAEAyB,OAAO,CAACE,IAAR,CAAa,CAAE,QAAS5B,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiB,cAAjB,CAAX,CAA6C,QAASD,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiB,cAAjB,CAAtD,CAAb,EAGA0B,cAAc,CAAC,cAAD,CAAd,CAAiCD,OAAO,CAAC,CAAD,CAAxC,CAGH,CATD,IAUK,CACDC,cAAc,CAAC,oBAAD,CAAd,CAAuC,CAAvC,CAGH,CAGD/B,QAAQ,CAAC,CACLM,IAAI,CAAEjB,cADD,CACiBkB,OAAO,CAAE,CAC3B0B,WAAW,CAAE7B,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,EAAoB,EADN,CAG3Ba,SAAS,CAATA,SAH2B,CAGhBD,UAAU,CAAVA,UAHgB,CAGJc,cAAc,CAAdA,cAHI,CAGYG,SAAS,CAAE,IAHvB,CAI3Bb,YAAY,CAAZA,YAJ2B,CAIbb,OAAO,CAAE,KAJI,CAD1B,CAAD,CAAR,CAQH,CAjCL,EAkCKC,KAlCL,CAkCW,SAAAC,KAAK,CAAI,CACZV,QAAQ,CAAC,CAAEM,IAAI,CAAEjB,cAAR,CAAwBkB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACN,QAAN,CAAeO,MAAf,GAA0B,GAA9B,CAAmC,CAC/BpB,KAAK,CAACmB,KAAN,CAAYhB,IAAI,CAACkB,aAAL,CAAmB,CAAEC,EAAE,CAAEH,KAAK,CAACI,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CAEDvB,KAAK,CAACwB,IAAN,CAAWrB,IAAI,CAACkB,aAAL,CAAmB,CAAEC,EAAE,CAAEH,KAAK,CAACN,QAAN,CAAeC,IAArB,CAAnB,CAAX,EACH,CACJ,CA3CL,EA4CH,CA5DD,IA6DK,CACD;AACAd,KAAK,CAACwB,IAAN,CAAWrB,IAAI,CAACkB,aAAL,CAAmB,CAAEC,EAAE,CAAEd,UAAU,CAACuB,gBAAX,CAA4Ba,WAAlC,CAAnB,CAAX,EACH,CACJ,CAlED,CAmEH,CAGD,MAAO,SAASC,CAAAA,mCAAT,CAA6CC,aAA7C,CAA4D,CAC/D,MAAO,UAAUrC,QAAV,CAAoB,CACvB,GAAIqC,aAAa,CAACtC,UAAd,CAAyBuB,gBAAzB,CAA0CC,kBAA1C,GAAiE5B,iBAAiB,CAAC6B,OAAvF,CAAgG,CAE5F,GAAMc,CAAAA,WAAW,CAAG,CAChB,gBAAiBD,aAAa,CAACtC,UAAd,CAAyBuB,gBAAzB,CAA0CpB,aAD3C,CAEhB,WAAYmC,aAAa,CAACvC,QAFV,CAApB,CAMA,GAAMyC,CAAAA,cAAc,CAAGnD,KAAK,CAACa,IAAN,CAAW,oDAAX,CAAiEqC,WAAjE,CAAvB,CAEA,GAAIX,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIU,aAAa,CAACnB,SAAd,GAA4B,QAAhC,CAA0C,CAEtCS,QAAQ,CAAG,CAACY,cAAD,CAAX,CACH,CAHD,IAIK,kBACD,GAAMC,CAAAA,WAAW,CAAGpD,KAAK,CAACa,IAAN,CAAW,gDAAX,+CAAgEoC,aAAa,CAACI,eAA9E,CAAgGJ,aAAa,CAACjB,eAA9G,+BAA+H,UAA/H,CAA2IiB,aAAa,CAACvC,QAAzJ,gBAApB,CACA6B,QAAQ,CAAG,CAACY,cAAD,CAAiBC,WAAjB,CAAX,CACH,CACDxC,QAAQ,CAACP,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAD,KAAK,CAACqC,GAAN,CAAUF,QAAV,EACKxB,IADL,CACU,SAAAC,QAAQ,CAAI,CAGd,GAAI2B,CAAAA,cAAc,CAAG,EAArB,CACA;AACA,GAAIM,aAAa,CAACnB,SAAd,GAA4B,QAAhC,CAA0C,CACtCa,cAAc,CAAG3B,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAA7B,CAGA0B,cAAc,CAAC,kBAAD,CAAd,CAAqC3B,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiB,kBAAjB,CAArC,CACH,CAGDL,QAAQ,CAAC,CACLM,IAAI,CAAEjB,cADD,CACiBkB,OAAO,CAAE,CAC3BmC,gBAAgB,CAAEtC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,EAAoB,EADX,CAE3BsC,wBAAwB,CAAE,EAFC,CAI3BZ,cAAc,CAAdA,cAJ2B,CAK3Ba,cAAc,CAAE,IALW,CAO3B1B,SAAS,CAAEmB,aAAa,CAACnB,SAPE,CAOSD,UAAU,CAAEoB,aAAa,CAACpB,UAPnC,CAQ3BI,YAAY,CAAEgB,aAAa,CAAChB,YARD,CAQeb,OAAO,CAAE,KARxB,CAD1B,CAAD,CAAR,CAaH,CA3BL,EA4BKC,KA5BL,CA4BW,SAAAC,KAAK,CAAI,CACZV,QAAQ,CAAC,CAAEM,IAAI,CAAEjB,cAAR,CAAwBkB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACN,QAAN,CAAeO,MAAf,GAA0B,GAA9B,CAAmC,CAC/BpB,KAAK,CAACmB,KAAN,CAAYhB,IAAI,CAACkB,aAAL,CAAmB,CAAEC,EAAE,CAAEH,KAAK,CAACI,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CAEDvB,KAAK,CAACwB,IAAN,CAAWrB,IAAI,CAACkB,aAAL,CAAmB,CAAEC,EAAE,CAAEH,KAAK,CAACN,QAAN,CAAeC,IAArB,CAAnB,CAAX,EACH,CACJ,CArCL,EAsCH,CA1DD,IA2DK,CACD;AACAd,KAAK,CAACwB,IAAN,CAAWrB,IAAI,CAACkB,aAAL,CAAmB,CAAEC,EAAE,CAAEwB,aAAa,CAACtC,UAAd,CAAyBuB,gBAAzB,CAA0Ca,WAAhD,CAAnB,CAAX,EACH,CACJ,CAhED,CAiEH,CAGD,MAAO,SAASU,CAAAA,mCAAT,CAA6CC,aAA7C,CAA4D,CAC/D,MAAO,UAAU9C,QAAV,CAAoB,CACvB,GAAI8C,aAAa,CAAC/C,UAAd,CAAyBuB,gBAAzB,CAA0CC,kBAA1C,GAAiE5B,iBAAiB,CAAC6B,OAAvF,CAAgG,CAE5F,GAAMuB,CAAAA,YAAY,CAAG,CACjB,gBAAiBD,aAAa,CAAC/C,UAAd,CAAyBuB,gBAAzB,CAA0CpB,aAD1C,CAEjB,WAAY4C,aAAa,CAAChD,QAFT,CAArB,CAMA,GAAMkD,CAAAA,eAAe,CAAG5D,KAAK,CAACa,IAAN,CAAW,oDAAX,CAAiE8C,YAAjE,CAAxB,CAEA,GAAIpB,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAImB,aAAa,CAAC5B,SAAd,GAA4B,QAAhC,CAA0C,CAEtCS,QAAQ,CAAG,CAACqB,eAAD,CAAX,CACH,CAHD,IAIK,kBACD,GAAMR,CAAAA,WAAW,CAAGpD,KAAK,CAACa,IAAN,CAAW,gDAAX,+CAAgE6C,aAAa,CAACL,eAA9E,CAAgGK,aAAa,CAAC1B,eAA9G,+BAA+H,UAA/H,CAA2I0B,aAAa,CAAChD,QAAzJ,gBAApB,CACA6B,QAAQ,CAAG,CAACqB,eAAD,CAAkBR,WAAlB,CAAX,CACH,CACDxC,QAAQ,CAACP,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAD,KAAK,CAACqC,GAAN,CAAUF,QAAV,EACKxB,IADL,CACU,SAAAC,QAAQ,CAAI,CAGd,GAAI2B,CAAAA,cAAc,CAAG,EAArB,CACA,GAAIe,aAAa,CAAC5B,SAAd,GAA4B,QAAhC,CAA0C,CACtCa,cAAc,CAAG3B,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAA7B,CAGA0B,cAAc,CAAC,kBAAD,CAAd,CAAqC3B,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiB,kBAAjB,CAArC,CACH,CAEDL,QAAQ,CAAC,CACLM,IAAI,CAAEjB,cADD,CACiBkB,OAAO,CAAE,CAC3B0C,gBAAgB,CAAE7C,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,EAAoB,EADX,CAE3B6C,wBAAwB,CAAE,EAFC,CAI3BnB,cAAc,CAAdA,cAJ2B,CAK3Ba,cAAc,CAAE,IALW,CAO3B1B,SAAS,CAAE4B,aAAa,CAAC5B,SAPE,CAOSD,UAAU,CAAE6B,aAAa,CAAC7B,UAPnC,CAQ3BI,YAAY,CAAEyB,aAAa,CAACzB,YARD,CAQeb,OAAO,CAAE,KARxB,CAD1B,CAAD,CAAR,CAYH,CAxBL,EAyBKC,KAzBL,CAyBW,SAAAC,KAAK,CAAI,CACZV,QAAQ,CAAC,CAAEM,IAAI,CAAEjB,cAAR,CAAwBkB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACN,QAAN,CAAeO,MAAf,GAA0B,GAA9B,CAAmC,CAC/BpB,KAAK,CAACmB,KAAN,CAAYhB,IAAI,CAACkB,aAAL,CAAmB,CAAEC,EAAE,CAAEH,KAAK,CAACI,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CAEDvB,KAAK,CAACwB,IAAN,CAAWrB,IAAI,CAACkB,aAAL,CAAmB,CAAEC,EAAE,CAAEH,KAAK,CAACN,QAAN,CAAeC,IAArB,CAAnB,CAAX,EACH,CACJ,CAlCL,EAmCH,CAvDD,IAwDK,CACD;AACAd,KAAK,CAACwB,IAAN,CAAWrB,IAAI,CAACkB,aAAL,CAAmB,CAAEC,EAAE,CAAEiC,aAAa,CAAC/C,UAAd,CAAyBuB,gBAAzB,CAA0Ca,WAAhD,CAAnB,CAAX,EACH,CACJ,CA7DD,CA8DH,CAED;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA","sourcesContent":["import rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { sortData } from '../components/CommonScript'//, getComboLabelValue, searchData\r\nimport { toast } from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\nimport { transactionStatus } from '../components/Enumeration';\r\n\r\nexport function getSupplierDetail(supplier, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"supplier/getSupplier\", {\r\n            nsuppliercode: supplier.nsuppliercode,\r\n            \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { masterData, loading: false } });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n\r\n                    toast.warn(intl.formatMessage({ id: error.response }));\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getSupplierComboService(screenName, operation, primaryKeyName, primaryKeyValue, masterData, userInfo, ncontrolCode) {\r\n    return function (dispatch) {\r\n        if (operation === \"create\" || (operation === \"update\" && masterData.SelectedSupplier.ntransactionstatus !== transactionStatus.RETIRED)) {\r\n\r\n\r\n            const countryService = rsapi.post(\"country/getCountry\", { userinfo: userInfo });\r\n\r\n            let urlArray = [];\r\n            if (operation === \"create\") {\r\n\r\n                urlArray = [countryService];\r\n            }\r\n            else {\r\n                const supplierById = rsapi.post(\"supplier/getActiveSupplierById\", { [primaryKeyName]: primaryKeyValue, \"userinfo\": userInfo });//this.props.Login.userInfo\r\n\r\n                urlArray = [countryService, supplierById];\r\n            }\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n\r\n\r\n                    let country = [];\r\n\r\n                    let selectedRecord = {};\r\n\r\n                    if (operation === \"update\") {\r\n                        selectedRecord = response[1].data;\r\n\r\n                        country.push({ \"value\": response[1].data[\"ncountrycode\"], \"label\": response[1].data[\"scountryname\"] });\r\n\r\n\r\n                        selectedRecord[\"ncountrycode\"] = country[0];\r\n\r\n\r\n                    }\r\n                    else {\r\n                        selectedRecord[\"ntransactionstatus\"] = 1;\r\n\r\n\r\n                    }\r\n\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            countryList: response[0].data || [],\r\n\r\n                            operation, screenName, selectedRecord, openModal: true,\r\n                            ncontrolCode, loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({ id: error.message }));\r\n                    }\r\n                    else {\r\n\r\n                        toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n            //toast.warn(this.props.formatMessage({ id: masterData.SelectedSupplier.stranstatus }));\r\n            toast.warn(intl.formatMessage({ id: masterData.SelectedSupplier.stranstatus }));\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function getSupplierCategoryComboDataService(supplierparam) {\r\n    return function (dispatch) {\r\n        if (supplierparam.masterData.SelectedSupplier.ntransactionstatus !== transactionStatus.RETIRED) {\r\n\r\n            const contactData = {\r\n                \"nsuppliercode\": supplierparam.masterData.SelectedSupplier.nsuppliercode,\r\n                \"userinfo\": supplierparam.userInfo\r\n\r\n            };\r\n\r\n            const contactService = rsapi.post(\"suppliercategory/getSupplierCategoryBySupplierCode\", contactData);\r\n\r\n            let urlArray = [];\r\n            if (supplierparam.operation === \"create\") {\r\n\r\n                urlArray = [contactService];\r\n            }\r\n            else {\r\n                const contactById = rsapi.post(\"suppliercategory/getActiveSupplierCategoryById\", { [supplierparam.primaryKeyField]: supplierparam.primaryKeyValue, \"userinfo\": supplierparam.userInfo });\r\n                urlArray = [contactService, contactById];\r\n            }\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n\r\n\r\n                    let selectedRecord = {};\r\n                    //let selectedSupplierCategory = {};\r\n                    if (supplierparam.operation === \"update\") {\r\n                        selectedRecord = response[1].data;\r\n\r\n\r\n                        selectedRecord[\"nsuppliercatcode\"] = response[1].data[\"nsuppliercatcode\"];\r\n                    }\r\n\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            supplierCategory: response[0].data || [],\r\n                            selectedSupplierCategory: [],\r\n\r\n                            selectedRecord,\r\n                            openChildModal: true,\r\n\r\n                            operation: supplierparam.operation, screenName: supplierparam.screenName,\r\n                            ncontrolCode: supplierparam.ncontrolCode, loading: false\r\n                        }\r\n                    });\r\n\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({ id: error.message }));\r\n                    }\r\n                    else {\r\n\r\n                        toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n            //toast.warn(this.props.formatMessage({ id: supplierparam.masterData.SelectedSupplier.stranstatus }));\r\n            toast.warn(intl.formatMessage({ id: supplierparam.masterData.SelectedSupplier.stranstatus }));\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function getMaterialCategoryComboDataService(materialparam) {\r\n    return function (dispatch) {\r\n        if (materialparam.masterData.SelectedSupplier.ntransactionstatus !== transactionStatus.RETIRED) {\r\n\r\n            const materialData = {\r\n                \"nsuppliercode\": materialparam.masterData.SelectedSupplier.nsuppliercode,\r\n                \"userinfo\": materialparam.userInfo\r\n\r\n            };\r\n\r\n            const materialService = rsapi.post(\"materialcategory/getMaterialCategoryBYSupplierCode\", materialData);\r\n\r\n            let urlArray = [];\r\n            if (materialparam.operation === \"create\") {\r\n\r\n                urlArray = [materialService];\r\n            }\r\n            else {\r\n                const contactById = rsapi.post(\"suppliercategory/getActiveSupplierCategoryById\", { [materialparam.primaryKeyField]: materialparam.primaryKeyValue, \"userinfo\": materialparam.userInfo });\r\n                urlArray = [materialService, contactById];\r\n            }\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n\r\n\r\n                    let selectedRecord = {};\r\n                    if (materialparam.operation === \"update\") {\r\n                        selectedRecord = response[1].data;\r\n\r\n\r\n                        selectedRecord[\"nsuppliercatcode\"] = response[1].data[\"nsuppliercatcode\"];\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            materialCategory: response[0].data || [],\r\n                            selectedMaterialCategory: [],\r\n\r\n                            selectedRecord,\r\n                            openChildModal: true,\r\n\r\n                            operation: materialparam.operation, screenName: materialparam.screenName,\r\n                            ncontrolCode: materialparam.ncontrolCode, loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({ id: error.message }));\r\n                    }\r\n                    else {\r\n\r\n                        toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n            //toast.warn(this.props.formatMessage({ id: materialparam.masterData.SelectedSupplier.stranstatus }));\r\n            toast.warn(intl.formatMessage({ id: materialparam.masterData.SelectedSupplier.stranstatus }));\r\n        }\r\n    }\r\n}\r\n\r\n// export function filterColumnDataSupplier(filterValue, masterData, userInfo) {\r\n//     return function (dispatch) {\r\n\r\n//         let supplierCode = 0;\r\n//         let searchedData = undefined;\r\n//         if (filterValue === \"\") {\r\n//             supplierCode = masterData[\"Supplier\"][0].nsuppliercode;\r\n//         }\r\n//         else {\r\n\r\n//             searchedData = searchData(filterValue, masterData[\"Supplier\"], \"ssuppliername\");\r\n\r\n//             if (searchedData.length > 0) {\r\n//                 supplierCode = searchedData[0].nsuppliercode;\r\n//             }\r\n//             else {\r\n//                 masterData[\"Supplier\"] = [];\r\n//                 masterData[\"SupplierCategory\"] = [];\r\n//                 masterData[\"MaterialCategory\"] = [];\r\n//                 masterData[\"SelectedSupplier\"] = [];\r\n//                 masterData[\"searchedData\"] = [];\r\n//                 dispatch({ type: DEFAULT_RETURN, payload: { masterData } });\r\n//             }\r\n\r\n//         }\r\n//         dispatch(initRequest(true));\r\n//         return rsapi.post(\"supplier/getSupplier\", { nsuppliercode: supplierCode, userinfo: userInfo })\r\n//             .then(response => {\r\n//                 masterData[\"Supplier\"] = response.data[\"Supplier\"];\r\n//                 masterData[\"SupplierCategory\"] = response.data[\"SupplierCategory\"];\r\n//                 masterData[\"MaterialCategory\"] = response.data[\"MaterialCategory\"];\r\n//                 masterData[\"SelectedSupplier\"] = response.data[\"SelectedSupplier\"];\r\n//                 masterData[\"searchedData\"] = searchedData;\r\n\r\n//                 dispatch({ type: DEFAULT_RETURN, payload: { masterData, loading: false } });\r\n//             })\r\n//             .catch(error => {\r\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n//                 if (error.response.status === 500) {\r\n//                     toast.error(error.message);\r\n//                 }\r\n//                 else {\r\n//                     toast.warn(error.response.data);\r\n//                 }\r\n//             })\r\n\r\n\r\n\r\n//     }\r\n// }\r\n\r\n"]},"metadata":{},"sourceType":"module"}