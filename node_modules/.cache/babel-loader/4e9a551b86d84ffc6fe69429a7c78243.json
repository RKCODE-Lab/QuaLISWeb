{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Card}from'react-bootstrap';import{injectIntl}from'react-intl';//FormattedMessage,\nimport SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import{toast}from'react-toastify';import Esign from'../audittrail/Esign';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{constructOptionList,showEsign,create_UUID,deleteAttachmentDropZone,onDropAttachFileList}from'../../components/CommonScript';// import TestTab from './TestTab';\nimport{transactionStatus,attachmentType}from'../../components/Enumeration';import CustomTabs from'../../components/custom-tabs/custom-tabs.component';import TestTab from\"../../pages/quotation/TestTab\";// import AddQuotationTest from \"../../pages/quotation/AddQuotationTest\";\n// import EditQuotationTestPricing from \"../../pages/quotation/EditQuotationTestPricing\";\nimport AddQuotationTest from'./AddQuotationTest';import EditQuotationTestPricing from'./EditQuotationTestPricing';var QuotationTab=/*#__PURE__*/function(_React$Component){_inherits(QuotationTab,_React$Component);var _super=_createSuper(QuotationTab);function QuotationTab(props){var _this;_classCallCheck(this,QuotationTab);_this=_super.call(this,props);_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.onInputOnChange=function(event,primaryFieldKey){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;else selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{if(primaryFieldKey&&event.target.name===\"ncost\"){var index=selectedRecord.findIndex(function(item){return item.ntestpricecode===primaryFieldKey;});if(/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){selectedRecord[index][\"ncost\"]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}}_this.setState({selectedRecord:selectedRecord});};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});};_this.tabDetail=function(){var addquotationId=_this.props.controlMap.has(\"AddQuotationTest\")&&_this.props.controlMap.get(\"AddQuotationTest\").ncontrolcode;var deletequotationId=_this.props.controlMap.has(\"DeleteQuotationTest\")&&_this.props.controlMap.get(\"DeleteQuotationTest\").ncontrolcode;var quotationAddParam={screenName:\"IDS_TEST\",operation:\"create\",primaryKeyField:\"nquotationtestcode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:addquotationId};var quotationDeleteParam={//    screenName: \"IDS_TEST\", methodUrl: \"ProjectMember\", operation: \"delete\", ncontrolCode: deletequotationId \nscreenName:\"IDS_TEST\",operation:\"delete\",primaryKeyField:\"nquotationtestcode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:deletequotationId};var tabMap=new Map();tabMap.set(\"IDS_TEST\",/*#__PURE__*/React.createElement(TestTab,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,addId:addquotationId,addParam:quotationAddParam,comboDataService:_this.props.getQuotationAddTestService,addTitleIDS:\"IDS_TEST\",addTitleDefaultMsg:'QuotationTest',primaryKeyField:\"nquotationtestcode\",masterData:_this.props.masterData,primaryList:\"QuotationTest\",dataResult:_this.props.dataResult,dataState:_this.props.dataState,dataStateChange:_this.props.dataStateChange,columnList:_this.quotationColumnList,methodUrl:_this.props.methodUrl,deleteRecord:_this.props.deleteRecord,deleteParam:quotationDeleteParam// deleteParam={deletequotationId}\n}));return tabMap;};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;// let selectedRecord = this.props.selectedRecord;\nvar selectedRecord=_this.state.selectedRecord;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']='';selectedRecord['esigncomments']='';}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);};_this.onSaveClick=function(saveType,formRef){var QuotationData=[];var inputParam={};QuotationData[\"userinfo\"]=_this.props.userInfo;var postParam={inputListName:\"QuotationList\",selectedObject:\"SelectedQuotation\",primaryKeyField:\"nquotationtestcode\"};if(_this.props.operation===\"create\"&&_this.props.screenName===\"IDS_TEST\"){inputParam=_this.onSaveQuotationTest(saveType,formRef);}if((_this.props.operation===\"create\"||_this.props.operation===\"update\")&&_this.props.screenName===\"IDS_ADDPROJECTMASTER\"){inputParam={classUrl:\"quotation\",methodUrl:\"Quotation\",inputData:QuotationData,operation:_this.props.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.isClearSearch};}var masterData=_this.props.masterData;if(showEsign(_this.props.userRoleControlRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}};_this.deleteRecord=function(projectmasterfileparam){if(_this.props.masterData.SelectedQuotation.ntransactionstatus===transactionStatus.DRAFT){var inputParam={};var inputData={};// if (this.props.screenName === 'ProjectMaster File') { \nvar selectedRecord=projectmasterfileparam.selectedRecord;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{ntransactionstatus:_this.props.masterData.SelectedQuotation.ntransactionstatus});// inputData[\"projectmasterfile\"]={\n//     selectedRecord                    \n//     };\nif(_this.props.screenName==='IDS_FILE'){inputParam={classUrl:\"projectmaster\",methodUrl:projectmasterfileparam.methodUrl,inputData:{\"projectmasterfile\":selectedRecord,\"userinfo\":_this.props.userInfo},operation:projectmasterfileparam.operation,//dataState: this.state.dataState,\n//dataStateMaterial: this.state.dataStateMaterial\ndataState:_this.state.dataState};}if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,projectmasterfileparam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:projectmasterfileparam.screenName,operation:projectmasterfileparam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDRAFTRECORD\"}));}};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"//fileToDelete:file.name \n});};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={isOpen:false,selectedRecord:{},dataResult:[],activeTab:'ProjectMembers-tab',dataState:dataState};_this.quotationColumnList=[{\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestname\",\"width\":\"200px\"},{\"idsName\":\"IDS_TESTDESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"200px\"},{\"idsName\":\"IDS_TESTCOST\",\"dataField\":\"ncost\",\"width\":\"200px\"},{\"idsName\":\"IDS_NUMBEROFSAMPLES\",\"dataField\":\"nnoofsamples\",\"width\":\"200px\"}];return _this;}_createClass(QuotationTab,[{key:\"render\",value:function render(){// const mandatoryFields = [];\nvar mandatoryFields=[];if(this.props.screenName==='IDS_FILE'){if(this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK){mandatoryFields=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else{mandatoryFields=[{\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"}];}}else if(this.props.screenName==='IDS_TEST'){mandatoryFields=[{\"idsName\":\"IDS_USER\",\"dataField\":\"nusercode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs\"},/*#__PURE__*/React.createElement(CustomTabs,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange})))));}},{key:\"onSaveQuotationTest\",value:function onSaveQuotationTest(saveType,formRef){var _this2=this;var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;// inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\n//  inputData[\"Quotation\"] = {};\nvar testArray=[];testArray=this.props.selectedRecord.ntestcode.map(function(item){var QuotationData={};QuotationData[\"ntestcode\"]=item.value;QuotationData[\"nquotationcode\"]=_this2.props.masterData.SelectedQuotation.nquotationcode;return QuotationData;});inputData['QuotationTest']=testArray;var inputParam={classUrl:\"quotation\",methodUrl:\"QuotationTest\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef};return inputParam;}}]);return QuotationTab;}(React.Component);export default injectIntl(QuotationTab);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/quotation/QuotationTab.jsx"],"names":["React","Row","Col","Card","injectIntl","SlideOutModal","toast","Esign","DEFAULT_RETURN","constructOptionList","showEsign","create_UUID","deleteAttachmentDropZone","onDropAttachFileList","transactionStatus","attachmentType","CustomTabs","TestTab","AddQuotationTest","EditQuotationTestPricing","QuotationTab","props","onTabChange","tabProps","screenName","updateInfo","typeName","data","updateStore","onInputOnChange","event","primaryFieldKey","selectedRecord","state","target","type","name","checked","ACTIVE","DEACTIVE","YES","NO","index","findIndex","item","ntestpricecode","test","value","setState","onComboChange","comboData","fieldName","tabDetail","addquotationId","controlMap","has","get","ncontrolcode","deletequotationId","quotationAddParam","operation","primaryKeyField","masterData","userInfo","ncontrolCode","quotationDeleteParam","tabMap","Map","set","userRoleControlRights","inputParam","getQuotationAddTestService","dataResult","dataState","dataStateChange","quotationColumnList","methodUrl","deleteRecord","closeModal","loadEsign","openChildModal","onSaveClick","saveType","formRef","QuotationData","postParam","inputListName","selectedObject","onSaveQuotationTest","classUrl","inputData","searchRef","isClearSearch","nformcode","screenData","crudMaster","projectmasterfileparam","SelectedQuotation","ntransactionstatus","DRAFT","esignRights","warn","intl","formatMessage","id","deleteAttachment","file","actionType","validateEsign","sreason","password","validateEsignCredential","skip","take","settings","parseInt","isOpen","activeTab","mandatoryFields","nattachmenttypecode","LINK","testArray","ntestcode","map","nquotationcode","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Card } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';  //FormattedMessage,\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport { toast } from 'react-toastify';\r\nimport Esign from '../audittrail/Esign';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { constructOptionList, showEsign, create_UUID, deleteAttachmentDropZone, onDropAttachFileList } from '../../components/CommonScript';\r\n// import TestTab from './TestTab';\r\nimport { transactionStatus, attachmentType } from '../../components/Enumeration';\r\nimport CustomTabs from '../../components/custom-tabs/custom-tabs.component';\r\nimport TestTab from \"../../pages/quotation/TestTab\";\r\n// import AddQuotationTest from \"../../pages/quotation/AddQuotationTest\";\r\n// import EditQuotationTestPricing from \"../../pages/quotation/EditQuotationTestPricing\";\r\nimport AddQuotationTest from './AddQuotationTest';\r\nimport EditQuotationTestPricing from './EditQuotationTestPricing';\r\n\r\nclass QuotationTab extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n\r\n        this.state = {\r\n            isOpen: false, selectedRecord: {}, dataResult: [],\r\n            activeTab: 'ProjectMembers-tab',\r\n            dataState: dataState\r\n\r\n        };\r\n\r\n        this.quotationColumnList = [\r\n\r\n            { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_TESTDESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_TESTCOST\", \"dataField\": \"ncost\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_NUMBEROFSAMPLES\", \"dataField\": \"nnoofsamples\", \"width\": \"200px\" }\r\n\r\n        ]\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        // const mandatoryFields = [];\r\n        let mandatoryFields = [];\r\n\r\n        if (this.props.screenName === 'IDS_FILE') {\r\n\r\n            if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n                mandatoryFields = [\r\n                    { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                    { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n                ];\r\n            } else {\r\n\r\n                mandatoryFields = [{ \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" }];\r\n\r\n            }\r\n        } else if (this.props.screenName === 'IDS_TEST') {\r\n\r\n            mandatoryFields = [{ \"idsName\": \"IDS_USER\", \"dataField\": \"nusercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <Row className=\"no-gutters\">\r\n                    <Col md={12}>\r\n                        <Card className=\"at-tabs\">\r\n                            <CustomTabs tabDetail={this.tabDetail()} onTabChange={this.onTabChange} />\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n\r\n               \r\n            </> \r\n\r\n        ) \r\n\r\n    }\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onInputOnChange = (event, primaryFieldKey) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"ntransactionstatus\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            else\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n\r\n        }\r\n        else {   \r\n            if(primaryFieldKey && event.target.name === \"ncost\"){\r\n                const index = selectedRecord.findIndex(item=>item.ntestpricecode === primaryFieldKey);\r\n                if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){\r\n                    selectedRecord[index][\"ncost\"] = event.target.value;\r\n                }\r\n            }\r\n            else{      \r\n                selectedRecord[event.target.name] = event.target.value;\r\n            }           \r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    tabDetail = () => {\r\n\r\n        const addquotationId = this.props.controlMap.has(\"AddQuotationTest\") && this.props.controlMap.get(\"AddQuotationTest\").ncontrolcode;\r\n        const deletequotationId = this.props.controlMap.has(\"DeleteQuotationTest\") && this.props.controlMap.get(\"DeleteQuotationTest\").ncontrolcode;\r\n\r\n        const quotationAddParam = {\r\n            screenName: \"IDS_TEST\", operation: \"create\", primaryKeyField: \"nquotationtestcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addquotationId\r\n        };\r\n\r\n        const quotationDeleteParam = {\r\n\r\n            //    screenName: \"IDS_TEST\", methodUrl: \"ProjectMember\", operation: \"delete\", ncontrolCode: deletequotationId \r\n\r\n            screenName: \"IDS_TEST\", operation: \"delete\", primaryKeyField: \"nquotationtestcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: deletequotationId\r\n        };\r\n\r\n\r\n\r\n        const tabMap = new Map();\r\n\r\n        tabMap.set(\"IDS_TEST\", <TestTab\r\n            userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            addId={addquotationId}\r\n            addParam={quotationAddParam}\r\n            comboDataService={this.props.getQuotationAddTestService}\r\n            addTitleIDS={\"IDS_TEST\"}\r\n            addTitleDefaultMsg={'QuotationTest'}\r\n            primaryKeyField={\"nquotationtestcode\"}\r\n            masterData={this.props.masterData}\r\n            primaryList={\"QuotationTest\"}\r\n            dataResult={this.props.dataResult}\r\n            dataState={this.props.dataState}\r\n            dataStateChange={this.props.dataStateChange}\r\n            columnList={this.quotationColumnList}\r\n            methodUrl={this.props.methodUrl}\r\n            deleteRecord={this.props.deleteRecord}\r\n            deleteParam={quotationDeleteParam}\r\n        // deleteParam={deletequotationId}\r\n        />)\r\n\r\n\r\n       \r\n        return tabMap;\r\n    }\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        // let selectedRecord = this.props.selectedRecord;\r\n        let selectedRecord = this.state.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = '';\r\n                selectedRecord['esigncomments'] = '';\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        let QuotationData = [];\r\n        let inputParam = {};\r\n        QuotationData[\"userinfo\"] = this.props.userInfo;\r\n\r\n        let postParam = {\r\n            inputListName: \"QuotationList\",\r\n            selectedObject: \"SelectedQuotation\",\r\n            primaryKeyField: \"nquotationtestcode\",\r\n        };\r\n\r\n\r\n        if ((this.props.operation === \"create\") && (this.props.screenName === \"IDS_TEST\")) {\r\n\r\n           \r\n            inputParam = this.onSaveQuotationTest(saveType, formRef);\r\n        }\r\n\r\n        if (((this.props.operation === \"create\") || (this.props.operation === \"update\")) && (this.props.screenName === \"IDS_ADDPROJECTMASTER\")) {\r\n\r\n            inputParam = {\r\n                classUrl: \"quotation\",\r\n                methodUrl: \"Quotation\",\r\n                inputData: QuotationData,\r\n                operation: this.props.operation,\r\n                saveType,\r\n                formRef,\r\n                postParam,\r\n                searchRef: this.searchRef,\r\n                isClearSearch: this.props.isClearSearch,\r\n            };\r\n        }\r\n\r\n\r\n        const masterData = this.props.masterData;\r\n\r\n        if (showEsign(this.props.userRoleControlRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true,\r\n                    screenData: { inputParam, masterData },\r\n                    saveType,\r\n                },\r\n            };\r\n            this.props.updateStore(updateInfo);\r\n        } else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n        }\r\n\r\n    };\r\n\r\n\r\n    onSaveQuotationTest(saveType, formRef) {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        // inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\r\n      //  inputData[\"Quotation\"] = {};\r\n\r\n\r\n        let testArray = []\r\n        testArray = this.props.selectedRecord.ntestcode.map(item => {\r\n            let QuotationData = {}\r\n\r\n            QuotationData[\"ntestcode\"] = item.value\r\n            QuotationData[\"nquotationcode\"] = this.props.masterData.SelectedQuotation.nquotationcode;\r\n\r\n\r\n            return QuotationData;\r\n        });\r\n        inputData['QuotationTest'] = testArray;\r\n\r\n        const inputParam = {\r\n            classUrl: \"quotation\",\r\n            methodUrl: \"QuotationTest\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    deleteRecord = (projectmasterfileparam) => {\r\n\r\n        if (this.props.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\r\n\r\n            let inputParam = {};\r\n            let inputData = {};\r\n            // if (this.props.screenName === 'ProjectMaster File') { \r\n            let selectedRecord = projectmasterfileparam.selectedRecord\r\n\r\n            selectedRecord = { ...selectedRecord, ntransactionstatus: this.props.masterData.SelectedQuotation.ntransactionstatus }\r\n\r\n            // inputData[\"projectmasterfile\"]={\r\n            //     selectedRecord                    \r\n            //     };\r\n\r\n            if (this.props.screenName === 'IDS_FILE') {\r\n                inputParam = {\r\n                    classUrl: \"projectmaster\",\r\n                    methodUrl: projectmasterfileparam.methodUrl,\r\n                    inputData: {\r\n\r\n                        \"projectmasterfile\": selectedRecord,\r\n                        \"userinfo\": this.props.userInfo\r\n                    },\r\n\r\n                    operation: projectmasterfileparam.operation,\r\n                    //dataState: this.state.dataState,\r\n                    //dataStateMaterial: this.state.dataStateMaterial\r\n                    dataState: this.state.dataState\r\n                }\r\n            }\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, projectmasterfileparam.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                        openChildModal: true, screenName: projectmasterfileparam.screenName, operation: projectmasterfileparam.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n\r\n        }\r\n        else {\r\n\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTRECORD\" }));\r\n        }\r\n    }\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n        });\r\n    }\r\n\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n}\r\n\r\nexport default injectIntl(QuotationTab);\r\n\r\n"]},"metadata":{},"sourceType":"module"}