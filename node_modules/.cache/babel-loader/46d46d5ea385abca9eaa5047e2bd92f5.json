{"ast":null,"code":"var _jsxFileName = \"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\branches\\\\SOURCE-513-PROD\\\\QuaLISWeb\\\\src\\\\pages\\\\competencemanagement\\\\trainingcertificate\\\\TrainingCertificateParticipantsTab.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faUserPlus } from '@fortawesome/free-solid-svg-icons';\nimport { MediaLabel } from '../../../components/add-client.styles';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { process } from '@progress/kendo-data-query';\nimport SlideOutModal from '../../../components/slide-out-modal/SlideOutModal';\nimport { toast } from 'react-toastify';\nimport AddParticipants from './AddParticipants';\nimport Esign from '../../audittrail/Esign';\nimport { callService, crudMaster, getTrainingParticipantsComboDataService, getSectionUsersDataService, updateStore, validateEsignCredential, getTrainingParticipantsInvite, getTrainingParticipantsCancel } from '../../../actions';\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes';\nimport { showEsign } from '../../../components/CommonScript';\nimport DataGrid from '../../../components/data-grid/data-grid.component';\nimport { transactionStatus } from '../../../components/Enumeration';\nimport AddParticipantsStatus from './AddParticipantsStatus'; //import ReactTooltip from 'react-tooltip';\n\nimport { ReactComponent as Reject } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/image/reject.svg\";\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass TrainingCertificateParticipantsTab extends React.Component {\n  constructor(_props) {\n    super(_props);\n\n    this.participantDataStateChange = event => {\n      this.setState({\n        dataResult: process(this.props.masterData[\"TrainingParticipants\"], event.dataState),\n        dataState: event.dataState\n      });\n    };\n\n    this.expandChange = event => {\n      const isExpanded = event.dataItem.expanded === undefined ? event.dataItem.aggregates : event.dataItem.expanded;\n      event.dataItem.expanded = !isExpanded;\n      this.setState({ ...this.props\n      });\n    };\n\n    this.detailBand = props => {\n      const Dataitem = props.dataItem;\n      const OptionalFieldList = [{\n        datafield: \"ssectionname\",\n        Column: \"Section Name\"\n      }, {\n        datafield: \"sfullname\",\n        Column: \"Participants Details\"\n      }];\n      return /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 17\n        }\n      }, OptionalFieldList.map(fields => {\n        return /*#__PURE__*/React.createElement(Col, {\n          md: \"6\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(FormGroup, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(FormLabel, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(FormattedMessage, {\n          id: fields.Column,\n          message: fields.Column,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 40\n          }\n        })), /*#__PURE__*/React.createElement(MediaLabel, {\n          className: \"readonly-text font-weight-normal\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 29\n          }\n        }, Dataitem[fields.datafield])));\n      }));\n    };\n\n    this.closeModal = () => {\n      let loadEsign = this.props.loadEsign;\n      let openChildModal = this.props.openChildModal;\n      let selectedRecord = this.props.selectedRecord;\n\n      if (this.props.loadEsign) {\n        if (this.props.operation === \"delete\" || this.props.operation === \"cancel\") {\n          loadEsign = false;\n          openChildModal = false;\n          selectedRecord = {};\n        } else {\n          loadEsign = false;\n          selectedRecord['esignpassword'] = \"\";\n          selectedRecord['esigncomments'] = \"\";\n          selectedRecord['esignreason'] = \"\";\n        }\n      } else {\n        openChildModal = false;\n        selectedRecord = {};\n      }\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openChildModal,\n          loadEsign,\n          selectedRecord,\n          selectedId: null\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.getTabContent = event => {\n      this.setState({\n        activeTab: event.currentTarget.name\n      });\n    };\n\n    this.onComboChange = (comboData, fieldName) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[fieldName] = comboData;\n      ;\n\n      if (fieldName === \"ndeputyusersitecode\") {\n        this.state.deputyUserList.map(item => {\n          if (item.nusersitecode === comboData.value) {\n            selectedRecord[\"sdeputyname\"] = item.sfirstname + \" \" + item.slastname;\n          }\n\n          return null;\n        });\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onInputOnChange = event => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (event.target.type === 'checkbox') {\n        if (event.target.name === \"ntransactionstatus\") selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;else selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\n      } else {\n        selectedRecord[event.target.name] = event.target.value;\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.handleChange = (value, valueParam, isSection) => {\n      if (value !== null) {\n        const selectedRecord = this.state.selectedRecord || {};\n        selectedRecord[valueParam] = value;\n        const SelectedTrainingCertificate = this.props.masterData.SelectedTrainingCertificate.ntrainingcode || {};\n\n        if (isSection === \"Section\") {\n          this.props.getSectionUsersDataService(value.value, selectedRecord, this.props.Login.userInfo, SelectedTrainingCertificate);\n          selectedRecord[\"nusercode\"] = undefined;\n          this.setState({\n            selectedRecord\n          });\n        } else {\n          this.setState({\n            selectedRecord\n          });\n        }\n      }\n    };\n\n    this.onSaveClick = (saveType, formRef) => {\n      //add / edit  \n      let inputParam = {};\n\n      if (this.props.screenName === \"IDS_PARTICIPANTSDETAILS\") {\n        inputParam = this.saveParticipantDetails(saveType, formRef);\n      }\n\n      if (this.props.screenName === \"IDS_INVITEDPARTICIPANTSDETAILS\") {\n        inputParam = this.saveParticipantInvite(saveType, formRef);\n      }\n\n      if (this.props.screenName === \"IDS_CANCELPARTICIPANTSDETAILS\") {\n        inputParam = this.saveParticipantCancel(saveType, formRef);\n      }\n\n      if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData: this.props.masterData\n            },\n            saveType\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\n      }\n    };\n\n    this.saveParticipantInvite = (saveType, formRef) => {\n      let inputData = [];\n      let trainingparticipants = [];\n      let dataState = undefined;\n      let postParam = {\n        inputListName: \"TrainingCertificate\",\n        selectedObject: \"SelectedTrainingCertificate\",\n        primaryKeyField: \"ntrainingcode\"\n      };\n      inputData[\"userinfo\"] = this.props.userInfo;\n      this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\n        trainingparticipants.push({\n          ntrainingcode: this.props.masterData.SelectedTrainingCertificate.ntrainingcode,\n          //        nparticipantcode: this.props.masterData.SelectedTrainingParticipants.nparticipantcode,\n          nusercode: participants.item.nusercode,\n          ntrainingcategorycode: this.props.masterData.SelectedTrainingCertificate.ntrainingcategorycode,\n          ntechniquecode: this.props.masterData.SelectedTrainingCertificate.ntechniquecode,\n          susername: participants.item.sfullname\n        });\n      });\n      inputData[\"trainingparticipants\"] = trainingparticipants;\n      const inputParam = {\n        classUrl: 'trainingcertificate',\n        methodUrl: \"TrainingParticipants\",\n        inputData: inputData,\n        operation: \"invite\",\n        saveType,\n        formRef,\n        dataState,\n        postParam\n      };\n      return inputParam;\n    };\n\n    this.saveParticipantCancel = (saveType, formRef) => {\n      let inputData = [];\n      let trainingparticipants = [];\n      let dataState = undefined;\n      let postParam = {\n        inputListName: \"TrainingCertificate\",\n        selectedObject: \"SelectedTrainingCertificate\",\n        primaryKeyField: \"ntrainingcode\"\n      };\n      inputData[\"userinfo\"] = this.props.userInfo;\n      this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\n        trainingparticipants.push({\n          ntrainingcode: this.props.masterData.SelectedTrainingCertificate.ntrainingcode,\n          //   nparticipantcode: this.props.masterData.selectedTrainingParticipants.nparticipantcode,\n          nusercode: participants.item.nusercode,\n          nparticipantcode: participants.item.nparticipantcode,\n          ntrainingcategorycode: this.props.masterData.SelectedTrainingCertificate.ntrainingcategorycode,\n          ntechniquecode: this.props.masterData.SelectedTrainingCertificate.ntechniquecode\n        });\n      });\n      inputData[\"trainingparticipants\"] = trainingparticipants;\n      const inputParam = {\n        classUrl: 'trainingcertificate',\n        methodUrl: \"TrainingParticipants\",\n        inputData: inputData,\n        operation: \"cancel\",\n        saveType,\n        formRef,\n        dataState,\n        postParam\n      };\n      return inputParam;\n    };\n\n    this.validateEsign = () => {\n      const inputParam = {\n        inputData: {\n          \"userinfo\": { ...this.props.userInfo,\n            sreason: this.state.selectedRecord[\"esigncomments\"],\n            nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\n            spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label\n          },\n          password: this.state.selectedRecord[\"esignpassword\"]\n        },\n        screenData: this.props.screenData\n      };\n      this.props.validateEsignCredential(inputParam, \"openChildModal\");\n    };\n\n    this.getTrainingCertificateData = (participantParam, selectedRecord, masterData, operation) => {\n      if (masterData.SelectedTrainingCertificate.ntransactionstatus !== transactionStatus.CANCELLED && masterData.SelectedTrainingCertificate.ntransactionstatus !== transactionStatus.COMPLETED) {\n        if (masterData.SelectedTrainingCertificate.ntransactionstatus !== transactionStatus.CONDUCTED) {\n          if (participantParam.operation === \"create\") {\n            this.props.getTrainingParticipantsComboDataService(participantParam, masterData);\n          } else if (participantParam.operation === \"invite\") {\n            this.props.getTrainingParticipantsInvite(participantParam, selectedRecord, masterData, operation);\n          } else {\n            this.props.getTrainingParticipantsCancel(participantParam, selectedRecord, masterData, operation);\n          }\n        } else {\n          toast.warn(this.props.intl.formatMessage({\n            id: \"IDS_TESTTRAININGALREADYCONDUCTED\"\n          }));\n        }\n      } else {\n        toast.warn(this.props.intl.formatMessage({\n          id: masterData.SelectedTrainingCertificate.ntransactionstatus === transactionStatus.CANCELLED ? \"IDS_TESTTRAININGALREADYCANCELLED\" : \"IDS_TESTTRAININGALREADYCOMPLETED\"\n        }));\n      }\n    };\n\n    this.detailedFieldList = [{\n      dataField: \"ssectionname\",\n      idsName: \"IDS_SECTIONNAME\",\n      columnSize: \"4\"\n    }, {\n      dataField: \"sfullname\",\n      idsName: \"IDS_PARTICIPANTS\",\n      columnSize: \"4\"\n    } // { dataField: \"sfaxno\", idsName: \"IDS_FAXNO\", columnSize:\"4\" },\n    // //{ dataField: \"sdisplaystatus\", idsName: \"IDS_DISPLAYSTATUS\" },\n    //{ \"idsName\": \"IDS_DISPLAYSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"20%\", \"isIdsField\": true, \"controlName\": \"ndefaultstatus\" }\n    ];\n    const _dataState = {\n      skip: 0,\n      take: this.props.settings ? parseInt(this.props.settings[14]) : 5\n    };\n    this.state = {\n      isOpen: false,\n      selectedRecord: {},\n      dataResult: [],\n      activeTab: 'TrainingParticipants-tab',\n      dataState: _dataState\n    }; // this.mandatoryColumnList =\n    //     [{ \"idsName\": \"IDS_SECTION\", \"dataField\": \"nsectioncode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"select\" },\n    //     { \"idsName\": \"IDS_PARTICIPANTNAME\", \"dataField\": \"nusercode\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\n    //     ];\n    // this.mandatoryStatusList=\n    // [{ \"idsName\": \"IDS_PARTICIPANTNAME\", \"dataField\": \"nusercode\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\n\n    this.participantsColumnList = [{\n      \"idsName\": \"IDS_PARTICIPANTNAME\",\n      \"dataField\": \"sfullname\",\n      \"width\": \"150px\"\n    }, {\n      \"idsName\": \"IDS_PARTICIPANTSTATUS\",\n      \"dataField\": \"sdisplaystatus\",\n      \"width\": \"150px\"\n    } // { \"idsName\": \"IDS_DATE\", \"dataField\": \"smodifieddate\", \"width\": \"150px\" }\n    ];\n  }\n\n  render() {\n    const addParticipantsId = this.props.controlMap.has(\"AddparticipantsTrainingCertificate\") && this.props.controlMap.get(\"AddparticipantsTrainingCertificate\").ncontrolcode;\n    const iniviteParticipantsId = this.props.controlMap.has(\"InviteParticipant\") && this.props.controlMap.get(\"InviteParticipant\").ncontrolcode;\n    const cancelParticipantsId = this.props.controlMap.has(\"CancelTrainingCertificate\") && this.props.controlMap.get(\"CancelTrainingCertificate\").ncontrolcode;\n    const ParticipantsAddParam = {\n      screenName: \"ParticipantsDetails\",\n      operation: \"create\",\n      primaryKeyField: \"nparticipantcode\",\n      masterData: this.props.masterData,\n      userInfo: this.props.userInfo,\n      ncontrolCode: addParticipantsId\n    };\n    const ParticipantsIniviteParam = {\n      screenName: \"ParticipantsDetails\",\n      operation: \"invite\",\n      primaryKeyField: \"nparticipantcode\",\n      masterData: this.props.masterData,\n      userInfo: this.props.userInfo,\n      ncontrolCode: iniviteParticipantsId\n    };\n    const ParticipantsCancelParam = {\n      screenName: \"ParticipantsDetails\",\n      methodUrl: \"trainingcertificate\",\n      operation: \"cancel\",\n      ncontrolCode: cancelParticipantsId,\n      userInfo: this.props.userInfo\n    }; //         const mandatoryFields = [];\n    //         const mandatoryColumnList =this.props.Login.nFlag===2||this.props.Login.nFlag===3?\n    //                  [{ \"idsName\": \"IDS_PARTICIPANTNAME\", \"dataField\": \"nusercode\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }]\n    // :\n    //             [{ \"idsName\": \"IDS_SECTION\", \"dataField\": \"nsectioncode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"select\" },\n    //             { \"idsName\": \"IDS_PARTICIPANTNAME\", \"dataField\": \"nusercode\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\n    //             ];\n    //         mandatoryColumnList.forEach(item => item.mandatory === true ?\n    //             mandatoryFields.push(item) : \"\");\n\n    let mandatoryFields = [];\n\n    if (this.props.Login.screenName === \"IDS_PARTICIPANTSDETAILS\") {\n      mandatoryFields.push({\n        mandatory: true,\n        idsName: \"IDS_SECTION\",\n        dataField: \"nsectioncode\",\n        mandatoryLabel: \"IDS_SELECT\",\n        controlType: \"selectbox\"\n      }, {\n        mandatory: true,\n        idsName: \"IDS_PARTICIPANTNAME\",\n        dataField: \"nusercode\",\n        mandatoryLabel: \"IDS_SELECT\",\n        controlType: \"selectbox\"\n      });\n    } else {\n      mandatoryFields.push({\n        mandatory: true,\n        idsName: \"IDS_PARTICIPANTNAME\",\n        dataField: \"nusercode\",\n        mandatoryLabel: \"IDS_SELECT\",\n        controlType: \"selectbox\"\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n      className: \"no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Card //className=\"at-tabs border-0\"\n    , {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Card.Header, {\n      className: \"add-txt-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 33\n      }\n    }, \" \", /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_PARTICIPANTSDETAILS\",\n      defaultMessage: \"Participants Details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 42\n      }\n    }))), /*#__PURE__*/React.createElement(Card.Body, {\n      style: {\n        paddingTop: 'unset'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: \"no-gutters text-right border-bottom pt-2 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      className: \"btn btn-circle outline-grey mr-2\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_ADDPARTICIPANTS\"\n      }) //  data-for=\"tooltip_list_wrap\"\n      ,\n      hidden: this.props.userRoleControlRights.indexOf(addParticipantsId) === -1,\n      onClick: () => this.getTrainingCertificateData(ParticipantsAddParam, this.state.selectedRecord, this.props.Login.masterData, \"Create\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPlus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      className: \"btn btn-circle outline-grey mr-2\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_INVITEPARTICIPANTS\"\n      }) //    data-for=\"tooltip_list_wrap\"\n      ,\n      hidden: this.props.userRoleControlRights.indexOf(iniviteParticipantsId) === -1,\n      onClick: () => this.getTrainingCertificateData(ParticipantsIniviteParam, this.state.selectedRecord, this.props.Login.masterData, \"Invite\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faUserPlus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      className: \"btn btn-circle outline-grey mr-2\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_CANCELPARTICIPANTS\"\n      }) //  data-for=\"tooltip_list_wrap\"\n      ,\n      hidden: this.props.userRoleControlRights.indexOf(cancelParticipantsId) === -1,\n      onClick: () => this.getTrainingCertificateData(ParticipantsCancelParam, this.state.selectedRecord, this.props.Login.masterData, \"Cancel\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Reject, {\n      className: \"custom_icons\",\n      width: \"20\",\n      height: \"20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 29\n      }\n    }))))), /*#__PURE__*/React.createElement(Row, {\n      className: \"no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(DataGrid, {\n      primaryKeyField: \"nparticipantcode\" //  expandField=\"expanded\"\n      ,\n      detailedFieldList: this.detailedFieldList,\n      data: this.props.masterData[\"TrainingParticipants\"],\n      dataResult: process(this.props.masterData[\"TrainingParticipants\"], this.state.dataState),\n      dataState: this.state.dataState,\n      dataStateChange: this.participantDataStateChange,\n      extractedColumnList: this.participantsColumnList,\n      controlMap: this.props.controlMap,\n      userRoleControlRights: this.props.userRoleControlRights,\n      inputParam: this.props.inputParam,\n      userInfo: this.props.userInfo,\n      methodUrl: \"TrainingParticipants\",\n      addRecord: () => this.props.getTrainingParticipantsComboDataService(ParticipantsAddParam, this.props.Login.masterData),\n      fetchRecord: this.props.getTrainingParticipantsComboDataService,\n      editParam: ParticipantsIniviteParam,\n      deleteRecord: this.deleteRecord,\n      deleteParam: ParticipantsCancelParam,\n      pageable: true,\n      scrollable: \"scrollable\",\n      isActionRequired: false,\n      isToolBarRequired: false,\n      selectedId: this.props.selectedId,\n      oldActionRequired: false,\n      hasDynamicColSize: true,\n      actionIcons: false //     [\n      //         {\n      //             title: this.props.intl.formatMessage({ id: \"IDS_INVITE\" }),\n      //             controlname: \"faUserPlus\",\n      //             objectName: \"mastertoedit\",\n      //             hidden: this.props.userRoleControlRights.indexOf(iniviteParticipantsId) === -1,\n      //             onClick: this.oninviteListClick,\n      //             inputData: {}\n      //         },{\n      //             title: this.props.intl.formatMessage({ id: \"IDS_TRAININGSCHEDULECANCEL\" }),\n      //             controlname: \"reject\",\n      //             objectName: \"mastertoedit\",\n      //             hidden: this.props.userRoleControlRights.indexOf(cancelParticipantsId) === -1,\n      //             onClick: this.onCancelListClick,\n      //             inputData: {}\n      //         }\n      //     ]\n      //  }\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 41\n      }\n    }))))))), this.props.openChildModal && /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.openChildModal,\n      closeModal: this.closeModal,\n      operation: this.props.operation,\n      inputParam: this.props.inputParam,\n      screenName: this.props.screenName,\n      onSaveClick: this.onSaveClick,\n      updateStore: this.props.updateStore,\n      esign: this.props.loadEsign,\n      validateEsign: this.validateEsign,\n      selectedRecord: this.state.selectedRecord || {},\n      mandatoryFields: mandatoryFields,\n      addComponent: this.props.loadEsign ? /*#__PURE__*/React.createElement(Esign, {\n        operation: this.props.operation,\n        formatMessage: this.props.formatMessage,\n        onInputOnChange: this.onInputOnChange,\n        inputParam: this.props.inputParam,\n        selectedRecord: this.state.selectedRecord || {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 29\n        }\n      }) : this.props.screenName === \"IDS_PARTICIPANTSDETAILS\" ? /*#__PURE__*/React.createElement(AddParticipants, {\n        selectedRecord: this.state.selectedRecord || {},\n        onInputOnChange: this.onInputOnChange,\n        handleChange: this.handleChange,\n        formatMessage: this.props.formatMessage,\n        section: this.props.Login.section || [],\n        sectionUsers: this.props.Login.sectionUsers || [],\n        nusercode: this.props.Login.nusercode || [],\n        nsectioncode: this.props.Login.nsectioncode || [],\n        selectedTrainingParticipants: this.props.masterData.SelectedTrainingParticipants || {},\n        extractedColumnList: this.extractedColumnList,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 29\n        }\n      }) : /*#__PURE__*/React.createElement(AddParticipantsStatus, {\n        selectedRecord: this.state.selectedRecord || {},\n        onInputOnChange: this.onInputOnChange,\n        handleChange: this.handleChange,\n        formatMessage: this.props.formatMessage,\n        usersStatus: this.props.Login.usersStatus || [],\n        nusercode: this.props.Login.nusercode || [],\n        selectedTrainingParticipants: this.props.masterData.SelectedTrainingParticipants || {},\n        extractedColumnList: this.extractedColumnList,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 30\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 21\n      }\n    }));\n  }\n\n  componentDidUpdate(previousProps) {\n    if (this.props.masterData !== previousProps.masterData) {\n      let {\n        dataState\n      } = this.state;\n\n      if (this.props.dataState === undefined) {\n        dataState = {\n          skip: 0,\n          take: this.props.settings ? parseInt(this.props.settings[14]) : 5\n        };\n      }\n\n      let isOpen = false;\n\n      if (this.props.errorCode !== undefined && (this.state.operation === \"create\" || this.state.operation === \"update\")) {\n        isOpen = true;\n      }\n\n      this.setState({\n        isOpen,\n        activeTab: 'TrainingParticipants-tab',\n        dataState\n      });\n    }\n\n    if (this.props.selectedRecord !== previousProps.selectedRecord) {\n      this.setState({\n        selectedRecord: this.props.selectedRecord\n      });\n    }\n  }\n\n  saveParticipantDetails(saveType, formRef) {\n    let inputData = [];\n    let dataState = undefined;\n    inputData[\"userinfo\"] = this.props.userInfo;\n    let selectedId = null;\n    let trainingparticipants = [];\n    this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\n      trainingparticipants.push({\n        ntrainingcode: this.props.masterData.SelectedTrainingCertificate.ntrainingcode,\n        ntrainingcategorycode: this.props.masterData.SelectedTrainingCertificate.ntrainingcategorycode,\n        ntechniquecode: this.props.masterData.SelectedTrainingCertificate.ntechniquecode,\n        nusercode: participants.item.nusercode,\n        susername: participants.item.sfullname,\n        ntransactionstatus: this.props.masterData.SelectedTrainingCertificate.ntransactionstatus\n      });\n    });\n    inputData[\"trainingparticipants\"] = trainingparticipants;\n    const inputParam = {\n      classUrl: \"trainingcertificate\",\n      methodUrl: \"TrainingParticipants\",\n      inputData: inputData,\n      selectedId,\n      operation: this.props.operation,\n      saveType,\n      formRef,\n      dataState\n    };\n    return inputParam;\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  callService,\n  crudMaster,\n  getTrainingParticipantsComboDataService,\n  getSectionUsersDataService,\n  updateStore,\n  validateEsignCredential,\n  getTrainingParticipantsInvite,\n  getTrainingParticipantsCancel\n})(injectIntl(TrainingCertificateParticipantsTab));","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/QuaLISWeb/src/pages/competencemanagement/trainingcertificate/TrainingCertificateParticipantsTab.jsx"],"names":["React","connect","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faPlus","faUserPlus","MediaLabel","FormattedMessage","injectIntl","process","SlideOutModal","toast","AddParticipants","Esign","callService","crudMaster","getTrainingParticipantsComboDataService","getSectionUsersDataService","updateStore","validateEsignCredential","getTrainingParticipantsInvite","getTrainingParticipantsCancel","DEFAULT_RETURN","showEsign","DataGrid","transactionStatus","AddParticipantsStatus","mapStateToProps","state","Login","TrainingCertificateParticipantsTab","Component","constructor","props","participantDataStateChange","event","setState","dataResult","masterData","dataState","expandChange","isExpanded","dataItem","expanded","undefined","aggregates","detailBand","Dataitem","OptionalFieldList","datafield","Column","map","fields","closeModal","loadEsign","openChildModal","selectedRecord","operation","updateInfo","typeName","data","selectedId","getTabContent","activeTab","currentTarget","name","onComboChange","comboData","fieldName","deputyUserList","item","nusersitecode","value","sfirstname","slastname","onInputOnChange","target","type","checked","ACTIVE","DEACTIVE","YES","NO","handleChange","valueParam","isSection","SelectedTrainingCertificate","ntrainingcode","userInfo","onSaveClick","saveType","formRef","inputParam","screenName","saveParticipantDetails","saveParticipantInvite","saveParticipantCancel","esignRights","nformcode","ncontrolCode","screenData","inputData","trainingparticipants","postParam","inputListName","selectedObject","primaryKeyField","nusercode","participants","push","ntrainingcategorycode","ntechniquecode","susername","sfullname","classUrl","methodUrl","nparticipantcode","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","getTrainingCertificateData","participantParam","ntransactionstatus","CANCELLED","COMPLETED","CONDUCTED","warn","intl","formatMessage","id","detailedFieldList","dataField","idsName","columnSize","skip","take","settings","parseInt","isOpen","participantsColumnList","render","addParticipantsId","controlMap","has","get","ncontrolcode","iniviteParticipantsId","cancelParticipantsId","ParticipantsAddParam","ParticipantsIniviteParam","ParticipantsCancelParam","mandatoryFields","mandatory","mandatoryLabel","controlType","paddingTop","userRoleControlRights","indexOf","deleteRecord","section","sectionUsers","nsectioncode","SelectedTrainingParticipants","extractedColumnList","usersStatus","componentDidUpdate","previousProps","errorCode"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faUserPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { MediaLabel } from '../../../components/add-client.styles';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport SlideOutModal from '../../../components/slide-out-modal/SlideOutModal';\r\nimport { toast } from 'react-toastify';\r\nimport AddParticipants from './AddParticipants';\r\nimport Esign from '../../audittrail/Esign';\r\nimport { callService, crudMaster, getTrainingParticipantsComboDataService, getSectionUsersDataService, updateStore, validateEsignCredential ,getTrainingParticipantsInvite,getTrainingParticipantsCancel} from '../../../actions';\r\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes';\r\nimport { showEsign } from '../../../components/CommonScript';\r\nimport DataGrid from '../../../components/data-grid/data-grid.component';\r\nimport { transactionStatus } from '../../../components/Enumeration';\r\nimport AddParticipantsStatus from './AddParticipantsStatus';\r\n//import ReactTooltip from 'react-tooltip';\r\nimport { ReactComponent as Reject } from '../../../assets/image/reject.svg'\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass TrainingCertificateParticipantsTab extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        this.state = {\r\n            isOpen: false, selectedRecord: {}, dataResult: [],\r\n            activeTab: 'TrainingParticipants-tab',\r\n            dataState: dataState\r\n        };\r\n\r\n\r\n        // this.mandatoryColumnList =\r\n        //     [{ \"idsName\": \"IDS_SECTION\", \"dataField\": \"nsectioncode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"select\" },\r\n        //     { \"idsName\": \"IDS_PARTICIPANTNAME\", \"dataField\": \"nusercode\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n        //     ];\r\n        // this.mandatoryStatusList=\r\n        // [{ \"idsName\": \"IDS_PARTICIPANTNAME\", \"dataField\": \"nusercode\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n\r\n\r\n        this.participantsColumnList =\r\n            [{ \"idsName\": \"IDS_PARTICIPANTNAME\", \"dataField\": \"sfullname\", \"width\": \"150px\" },\r\n            { \"idsName\": \"IDS_PARTICIPANTSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"150px\" },\r\n            // { \"idsName\": \"IDS_DATE\", \"dataField\": \"smodifieddate\", \"width\": \"150px\" }\r\n            ];\r\n    }\r\n\r\n    participantDataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.props.masterData[\"TrainingParticipants\"], event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const addParticipantsId = this.props.controlMap.has(\"AddparticipantsTrainingCertificate\") && this.props.controlMap.get(\"AddparticipantsTrainingCertificate\").ncontrolcode\r\n        const iniviteParticipantsId = this.props.controlMap.has(\"InviteParticipant\") && this.props.controlMap.get(\"InviteParticipant\").ncontrolcode;\r\n        const cancelParticipantsId = this.props.controlMap.has(\"CancelTrainingCertificate\") && this.props.controlMap.get(\"CancelTrainingCertificate\").ncontrolcode\r\n\r\n\r\n        const ParticipantsAddParam = {\r\n            screenName: \"ParticipantsDetails\", operation: \"create\", primaryKeyField: \"nparticipantcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addParticipantsId\r\n        };\r\n\r\n        const ParticipantsIniviteParam = {\r\n            screenName: \"ParticipantsDetails\", operation: \"invite\", primaryKeyField: \"nparticipantcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: iniviteParticipantsId\r\n        };\r\n\r\n        const ParticipantsCancelParam = { screenName: \"ParticipantsDetails\", methodUrl: \"trainingcertificate\", operation: \"cancel\", ncontrolCode: cancelParticipantsId ,userInfo: this.props.userInfo};\r\n//         const mandatoryFields = [];\r\n//         const mandatoryColumnList =this.props.Login.nFlag===2||this.props.Login.nFlag===3?\r\n//                  [{ \"idsName\": \"IDS_PARTICIPANTNAME\", \"dataField\": \"nusercode\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }]\r\n// :\r\n//             [{ \"idsName\": \"IDS_SECTION\", \"dataField\": \"nsectioncode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"select\" },\r\n//             { \"idsName\": \"IDS_PARTICIPANTNAME\", \"dataField\": \"nusercode\", \"width\": \"150px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n//             ];\r\n//         mandatoryColumnList.forEach(item => item.mandatory === true ?\r\n//             mandatoryFields.push(item) : \"\");\r\n    \r\n            let mandatoryFields = [];\r\n           \r\n                if (this.props.Login.screenName===\"IDS_PARTICIPANTSDETAILS\") {\r\n                    mandatoryFields.push(\r\n                        {\r\n                          mandatory: true,\r\n                          idsName: \"IDS_SECTION\",\r\n                          dataField: \"nsectioncode\",\r\n                          mandatoryLabel: \"IDS_SELECT\",\r\n                          controlType: \"selectbox\",\r\n                        },\r\n                       \r\n                            {\r\n                              mandatory: true,\r\n                              idsName: \"IDS_PARTICIPANTNAME\",\r\n                              dataField: \"nusercode\",\r\n                              mandatoryLabel: \"IDS_SELECT\",\r\n                              controlType: \"selectbox\",\r\n                            });\r\n                        }\r\n                            else{\r\n                                mandatoryFields.push(\r\n                                    {\r\n                                      mandatory: true,\r\n                                      idsName: \"IDS_PARTICIPANTNAME\",\r\n                                      dataField: \"nusercode\",\r\n                                      mandatoryLabel: \"IDS_SELECT\",\r\n                                      controlType: \"selectbox\",\r\n                                    });\r\n                            }\r\n                \r\n        return (\r\n            <>\r\n                <Row className=\"no-gutters\">\r\n                    <Col md={12}>\r\n                        <Card //className=\"at-tabs border-0\"\r\n                        >\r\n                            <Card.Header className=\"add-txt-btn\">\r\n                                <strong> <FormattedMessage id=\"IDS_PARTICIPANTSDETAILS\" defaultMessage=\"Participants Details\" /></strong>\r\n                            </Card.Header>\r\n                            <Card.Body style={{ paddingTop: 'unset' }}>\r\n                                <Row className=\"no-gutters text-right border-bottom pt-2 pb-2\" >\r\n                                    <Col md={12}>\r\n                                        <div className=\"d-flex justify-content-end\">\r\n\r\n                                            <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\r\n                            data-tip={this.props.intl.formatMessage({ id: \"IDS_ADDPARTICIPANTS\" })}\r\n                          //  data-for=\"tooltip_list_wrap\"\r\n                            hidden={this.props.userRoleControlRights.indexOf(addParticipantsId) === -1}\r\n                            onClick={() => this.getTrainingCertificateData(ParticipantsAddParam, this.state.selectedRecord, this.props.Login.masterData, \"Create\")}>\r\n                            \r\n                        <FontAwesomeIcon icon={faPlus} />\r\n                        </Nav.Link>\r\n                        <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\r\n                            data-tip={this.props.intl.formatMessage({ id: \"IDS_INVITEPARTICIPANTS\" })}\r\n                        //    data-for=\"tooltip_list_wrap\"\r\n                            hidden={this.props.userRoleControlRights.indexOf(iniviteParticipantsId) === -1}\r\n                            onClick={() => this.getTrainingCertificateData(ParticipantsIniviteParam,this.state.selectedRecord,this.props.Login.masterData,\"Invite\")}>\r\n                           \r\n                                <FontAwesomeIcon icon={faUserPlus} />\r\n                           \r\n                        </Nav.Link>\r\n                        <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\r\n                            data-tip={this.props.intl.formatMessage({ id: \"IDS_CANCELPARTICIPANTS\" })}\r\n                          //  data-for=\"tooltip_list_wrap\"\r\n                            hidden={this.props.userRoleControlRights.indexOf(cancelParticipantsId) === -1}\r\n                            onClick={() => this.getTrainingCertificateData(ParticipantsCancelParam,this.state.selectedRecord,this.props.Login.masterData,\"Cancel\")}>\r\n                            <Reject className=\"custom_icons\" width=\"20\" height=\"20\" />\r\n\r\n                        </Nav.Link>\r\n                                        </div>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Row className=\"no-gutters\">\r\n                                    <Col md={12}>\r\n                                        <DataGrid\r\n                                            primaryKeyField={\"nparticipantcode\"}\r\n                                          //  expandField=\"expanded\"\r\n                                            detailedFieldList={this.detailedFieldList}\r\n                                            data={this.props.masterData[\"TrainingParticipants\"]}\r\n                                            dataResult={process(this.props.masterData[\"TrainingParticipants\"], this.state.dataState)}\r\n                                            dataState={this.state.dataState}\r\n                                            dataStateChange={this.participantDataStateChange}\r\n                                            extractedColumnList={this.participantsColumnList}\r\n                                            controlMap={this.props.controlMap}\r\n                                            userRoleControlRights={this.props.userRoleControlRights}\r\n                                            inputParam={this.props.inputParam}\r\n                                            userInfo={this.props.userInfo}\r\n                                            methodUrl=\"TrainingParticipants\"\r\n                                            addRecord={() => this.props.getTrainingParticipantsComboDataService(ParticipantsAddParam, this.props.Login.masterData)}\r\n                                            fetchRecord={this.props.getTrainingParticipantsComboDataService}\r\n                                            editParam={ParticipantsIniviteParam}\r\n                                            deleteRecord={this.deleteRecord}\r\n                                            deleteParam={ParticipantsCancelParam}\r\n                                            pageable={true}\r\n                                            scrollable={\"scrollable\"}\r\n                                            isActionRequired={false}\r\n                                            isToolBarRequired={false}\r\n                                            selectedId={this.props.selectedId}\r\n                                            oldActionRequired={false}\r\n                                            hasDynamicColSize={true}\r\n                                             actionIcons={false}\r\n                                                \r\n                                            //     [\r\n                                            //         {\r\n                                            //             title: this.props.intl.formatMessage({ id: \"IDS_INVITE\" }),\r\n                                            //             controlname: \"faUserPlus\",\r\n                                            //             objectName: \"mastertoedit\",\r\n                                            //             hidden: this.props.userRoleControlRights.indexOf(iniviteParticipantsId) === -1,\r\n                                            //             onClick: this.oninviteListClick,\r\n                                            //             inputData: {}\r\n                                            //         },{\r\n                                            //             title: this.props.intl.formatMessage({ id: \"IDS_TRAININGSCHEDULECANCEL\" }),\r\n                                            //             controlname: \"reject\",\r\n                                            //             objectName: \"mastertoedit\",\r\n                                            //             hidden: this.props.userRoleControlRights.indexOf(cancelParticipantsId) === -1,\r\n                                            //             onClick: this.onCancelListClick,\r\n                                            //             inputData: {}\r\n                                            //         }\r\n                                            //     ]\r\n                                          //  }\r\n                                        />\r\n\r\n                                    </Col>\r\n                                </Row>\r\n\r\n\r\n                            </Card.Body>\r\n\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal show={this.props.openChildModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.props.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        updateStore={this.props.updateStore}\r\n                        esign={this.props.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={mandatoryFields}\r\n                        addComponent={this.props.loadEsign ?\r\n\r\n\r\n                            <Esign operation={this.props.operation}\r\n                                formatMessage={this.props.formatMessage}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> :  this.props.screenName === \"IDS_PARTICIPANTSDETAILS\" ?\r\n                            <AddParticipants\r\n\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                handleChange={this.handleChange}\r\n                                formatMessage={this.props.formatMessage}\r\n                                section={this.props.Login.section || []}\r\n                                sectionUsers={this.props.Login.sectionUsers || []}\r\n                                nusercode={this.props.Login.nusercode || []}\r\n                                nsectioncode={this.props.Login.nsectioncode || []}\r\n                                selectedTrainingParticipants={this.props.masterData.SelectedTrainingParticipants || {}}\r\n                                extractedColumnList={this.extractedColumnList}\r\n                            />\r\n\r\n                            :<AddParticipantsStatus \r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                            onInputOnChange={this.onInputOnChange}\r\n                            handleChange={this.handleChange}\r\n                            formatMessage={this.props.formatMessage}\r\n                            usersStatus={this.props.Login.usersStatus || []}\r\n                            nusercode={this.props.Login.nusercode || []}\r\n                            selectedTrainingParticipants={this.props.masterData.SelectedTrainingParticipants || {}}\r\n                            extractedColumnList={this.extractedColumnList}\r\n                            />\r\n                            \r\n                        }\r\n\r\n                    />\r\n                }\r\n            </>\r\n        )\r\n\r\n    }\r\n\r\n    expandChange = (event) => {\r\n        const isExpanded =\r\n            event.dataItem.expanded === undefined ?\r\n                event.dataItem.aggregates : event.dataItem.expanded;\r\n        event.dataItem.expanded = !isExpanded;\r\n        this.setState({ ...this.props });\r\n    }\r\n    detailBand = (props) => {\r\n\r\n        const Dataitem = props.dataItem\r\n        const OptionalFieldList = [\r\n            { datafield: \"ssectionname\", Column: \"Section Name\" },\r\n            { datafield: \"sfullname\", Column: \"Participants Details\" },\r\n\r\n        ];\r\n        return (<Row>\r\n            {OptionalFieldList.map((fields) => {\r\n                return (\r\n                    <Col md='6'>\r\n                        <FormGroup>\r\n                            <FormLabel><FormattedMessage id={fields.Column} message={fields.Column} /></FormLabel>\r\n                            <MediaLabel className=\"readonly-text font-weight-normal\">{Dataitem[fields.datafield]}</MediaLabel>\r\n                        </FormGroup>\r\n                    </Col>\r\n                )\r\n            })\r\n            }\r\n        </Row>)\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\" || this.props.operation === \"cancel\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\";\r\n                selectedRecord['esigncomments'] = \"\";\r\n                selectedRecord['esignreason']=\"\";\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord, selectedId: null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    getTabContent = (event) => {\r\n        this.setState({ activeTab: event.currentTarget.name });\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;;\r\n\r\n        if (fieldName === \"ndeputyusersitecode\") {\r\n            this.state.deputyUserList.map(item => {\r\n                if (item.nusersitecode === comboData.value) {\r\n                    selectedRecord[\"sdeputyname\"] = item.sfirstname + \" \" + item.slastname\r\n                }\r\n                return null;\r\n            })\r\n        }\r\n        this.setState({ selectedRecord });\r\n\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"ntransactionstatus\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            else\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n\r\n\r\n            selectedRecord[event.target.name] = event.target.value;\r\n\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    handleChange = (value, valueParam, isSection) => {\r\n\r\n        if (value !== null) {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n\r\n            selectedRecord[valueParam] = value;\r\n            const SelectedTrainingCertificate = this.props.masterData.SelectedTrainingCertificate.ntrainingcode || {};\r\n\r\n            if (isSection === \"Section\") {\r\n                this.props.getSectionUsersDataService(value.value, selectedRecord, this.props.Login.userInfo, SelectedTrainingCertificate);\r\n\r\n                selectedRecord[\"nusercode\"] = undefined;\r\n\r\n                this.setState({ selectedRecord });\r\n            }\r\n            else {\r\n                this.setState({ selectedRecord });\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n\r\n            let { dataState } = this.state;\r\n            if (this.props.dataState === undefined) {\r\n                dataState = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5 }\r\n            }\r\n\r\n            let isOpen = false;\r\n            if (this.props.errorCode !== undefined && (this.state.operation === \"create\" || this.state.operation === \"update\")) {\r\n                isOpen = true;\r\n            }\r\n            this.setState({ isOpen, activeTab: 'TrainingParticipants-tab', dataState });\r\n        }\r\n\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        //add / edit  \r\n        let inputParam = {};\r\n\r\n        if (this.props.screenName === \"IDS_PARTICIPANTSDETAILS\" ) {\r\n            inputParam = this.saveParticipantDetails(saveType, formRef);\r\n        }\r\nif(this.props.screenName === \"IDS_INVITEDPARTICIPANTSDETAILS\"){\r\n    inputParam = this.saveParticipantInvite(saveType, formRef);\r\n\r\n}\r\nif(this.props.screenName === \"IDS_CANCELPARTICIPANTSDETAILS\"){\r\n    inputParam = this.saveParticipantCancel(saveType, formRef);\r\n\r\n}\r\n\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n        }\r\n    }\r\n\r\n\r\n    saveParticipantDetails(saveType, formRef) {\r\n        let inputData = [];\r\n        let dataState = undefined;\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n\r\n        let selectedId = null;\r\n\r\n        let trainingparticipants = [];\r\n\r\n\r\n        this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\r\n            trainingparticipants.push({\r\n                ntrainingcode: this.props.masterData.SelectedTrainingCertificate.ntrainingcode,\r\n                ntrainingcategorycode: this.props.masterData.SelectedTrainingCertificate.ntrainingcategorycode,\r\n                ntechniquecode: this.props.masterData.SelectedTrainingCertificate.ntechniquecode,\r\n                nusercode: participants.item.nusercode,\r\n                susername:participants.item.sfullname,\r\n            ntransactionstatus:this.props.masterData.SelectedTrainingCertificate.ntransactionstatus\r\n            })\r\n\r\n        })\r\n\r\n\r\n\r\n        inputData[\"trainingparticipants\"] = trainingparticipants\r\n\r\n\r\n\r\n\r\n        const inputParam = {\r\n            classUrl: \"trainingcertificate\",\r\n            methodUrl: \"TrainingParticipants\",\r\n            inputData: inputData, selectedId,\r\n            operation: this.props.operation, saveType, formRef, dataState\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n\r\n    saveParticipantInvite = (saveType, formRef) => {\r\n        let inputData = [];\r\n        let trainingparticipants = [];\r\n        let dataState = undefined;\r\n        let postParam = { inputListName: \"TrainingCertificate\", selectedObject: \"SelectedTrainingCertificate\", primaryKeyField: \"ntrainingcode\" };\r\n\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n            this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\r\n                trainingparticipants.push({\r\n                    ntrainingcode: this.props.masterData.SelectedTrainingCertificate.ntrainingcode,\r\n            //        nparticipantcode: this.props.masterData.SelectedTrainingParticipants.nparticipantcode,\r\n                    nusercode: participants.item.nusercode,\r\n                    ntrainingcategorycode: this.props.masterData.SelectedTrainingCertificate.ntrainingcategorycode,\r\n                ntechniquecode: this.props.masterData.SelectedTrainingCertificate.ntechniquecode,\r\n                susername:participants.item.sfullname,\r\n                })\r\n    \r\n            })\r\n            inputData[\"trainingparticipants\"] = trainingparticipants\r\n\r\n            const inputParam = {\r\n                classUrl: 'trainingcertificate',\r\n                methodUrl: \"TrainingParticipants\",\r\n                inputData: inputData,\r\n                operation: \"invite\",saveType, formRef, dataState,\r\n                postParam\r\n            }\r\n            return inputParam;\r\n\r\n            \r\n    }\r\n\r\n    saveParticipantCancel = (saveType, formRef) => {\r\n        let inputData = [];\r\n        let trainingparticipants = [];\r\n        let dataState = undefined;\r\n        let postParam = { inputListName: \"TrainingCertificate\", selectedObject: \"SelectedTrainingCertificate\", primaryKeyField: \"ntrainingcode\" };\r\n\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n            this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\r\n                trainingparticipants.push({\r\n                    ntrainingcode: this.props.masterData.SelectedTrainingCertificate.ntrainingcode,\r\n                //   nparticipantcode: this.props.masterData.selectedTrainingParticipants.nparticipantcode,\r\n                    nusercode: participants.item.nusercode,\r\n                    nparticipantcode: participants.item.nparticipantcode,\r\n                    ntrainingcategorycode: this.props.masterData.SelectedTrainingCertificate.ntrainingcategorycode,\r\n                ntechniquecode: this.props.masterData.SelectedTrainingCertificate.ntechniquecode\r\n                })\r\n    \r\n            })\r\n            inputData[\"trainingparticipants\"] = trainingparticipants\r\n\r\n            const inputParam = {\r\n                classUrl: 'trainingcertificate',\r\n                methodUrl: \"TrainingParticipants\",\r\n                inputData: inputData,\r\n                operation: \"cancel\",saveType, formRef, dataState,postParam\r\n            }\r\n            return inputParam;\r\n\r\n        \r\n            \r\n    }\r\n    // onCancelListClick = (row) => {\r\n    //     //if (this.props.Login.masterData.SelectedTrainingCertificate.ntransactionstatus === transactionStatus.DRAFT) {\r\n    //     const ncontrolCode = this.props.controlMap.has(\"CancelTrainingCertificate\") && this.props.controlMap.get(\"CancelTrainingCertificate\").ncontrolcode\r\n    //     let inputData = [];\r\n    //     inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n    //     //add               \r\n    //     let postParam = undefined;\r\n    //     inputData[\"trainingparticipants\"] = { \"nparticipantcode\": row.nparticipantcode };\r\n    //     inputData[\"trainingparticipants\"][\"ntrainingcode\"] = this.props.Login.masterData.TrainingParticipants[0].ntrainingcode;\r\n\r\n    //     postParam = { inputListName: \"TrainingParticipants\", selectedObject: \"TrainingParticipants\", primaryKeyField: \"nparticipantcode\" };\r\n\r\n\r\n    //     const inputParam = {\r\n    //         classUrl: 'trainingcertificate',\r\n    //         methodUrl: \"TrainingParticipants\",\r\n    //         inputData: inputData,\r\n    //         operation: \"cancel\", postParam,\r\n    //         selectedId: row.nparticipantcode\r\n    //     }\r\n    //     let saveType;\r\n\r\n    //     const masterData = this.props.Login.masterData;\r\n\r\n    //     const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode);\r\n    //     if (esignNeeded) {\r\n    //         const updateInfo = {\r\n    //             typeName: DEFAULT_RETURN,\r\n    //             data: {\r\n    //                 loadEsign: true, screenData: { inputParam, masterData }, saveType, openModal: true, operation: \"cancel\"\r\n    //             }\r\n    //         }\r\n    //         this.props.updateStore(updateInfo);\r\n    //     }\r\n    //     else {\r\n    //         this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n    //     }\r\n\r\n\r\n    // }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n\r\n    getTrainingCertificateData = (participantParam,selectedRecord, masterData, operation) => {\r\n\r\n        if(masterData.SelectedTrainingCertificate.ntransactionstatus !== transactionStatus.CANCELLED && masterData.SelectedTrainingCertificate.ntransactionstatus !== transactionStatus.COMPLETED){\r\n            if(masterData.SelectedTrainingCertificate.ntransactionstatus !== transactionStatus.CONDUCTED){\r\n                if(participantParam.operation === \"create\"){\r\n                    this.props.getTrainingParticipantsComboDataService(participantParam,masterData);\r\n                }\r\n                else if(participantParam.operation === \"invite\"){\r\n                    this.props.getTrainingParticipantsInvite(participantParam,selectedRecord, masterData, operation);\r\n                }\r\n                else{\r\n                    this.props.getTrainingParticipantsCancel(participantParam,selectedRecord, masterData, operation);\r\n                }\r\n            }\r\n            else{\r\n                toast.warn(this.props.intl.formatMessage({ id: \"IDS_TESTTRAININGALREADYCONDUCTED\"}));\r\n            }\r\n        }\r\n        else{\r\n                toast.warn(this.props.intl.formatMessage({ id: masterData.SelectedTrainingCertificate.ntransactionstatus === transactionStatus.CANCELLED? \"IDS_TESTTRAININGALREADYCANCELLED\" : \"IDS_TESTTRAININGALREADYCOMPLETED\"}));\r\n        }\r\n    }\r\n\r\n    detailedFieldList = [\r\n        { dataField: \"ssectionname\", idsName: \"IDS_SECTIONNAME\", columnSize: \"4\" },\r\n        { dataField: \"sfullname\", idsName: \"IDS_PARTICIPANTS\", columnSize: \"4\" },\r\n        // { dataField: \"sfaxno\", idsName: \"IDS_FAXNO\", columnSize:\"4\" },\r\n        // //{ dataField: \"sdisplaystatus\", idsName: \"IDS_DISPLAYSTATUS\" },\r\n        //{ \"idsName\": \"IDS_DISPLAYSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"20%\", \"isIdsField\": true, \"controlName\": \"ndefaultstatus\" }\r\n\r\n    ];\r\n}\r\n\r\nexport default connect(mapStateToProps, { callService, crudMaster,getTrainingParticipantsComboDataService, getSectionUsersDataService, updateStore, validateEsignCredential,getTrainingParticipantsInvite,getTrainingParticipantsCancel })(injectIntl(TrainingCertificateParticipantsTab));\r\n\r\n"]},"metadata":{},"sourceType":"module"}