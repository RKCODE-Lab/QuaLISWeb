{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Scheduler,TimelineView,DayView,WeekView,MonthView,SchedulerEditItem,AgendaView,SchedulerProportionalViewItem,SchedulerHeader}from'@progress/kendo-react-scheduler';import FormSelectSearch from'../../components/form-select-search/form-select-search.component';import{Col,Row}from\"react-bootstrap\";import{injectIntl}from\"react-intl\";//import { FormWithCustomEditor } from './custom-form';\n// import { EditItemWithDynamicTitle } from './custom-item';\n//import {CustomEditItem} from './editors'\nimport{guid}from'@progress/kendo-react-common';import{DEFAULT_RETURN}from\"../../actions/LoginTypes\";import'./Calender.css';import CustomEditItem,{CustomEditSlot,CustomEditSlotForMonth,CustomTask,CustomViewSlot,CustomViewSlotForMonth,headerComponent}from\"./EditItem\";import{FormWithCustomEditor}from\"./custom-form\";import{toast}from\"react-toastify\";var NewJobAlloct=/*#__PURE__*/function(_React$Component){_inherits(NewJobAlloct,_React$Component);var _super=_createSuper(NewJobAlloct);function NewJobAlloct(props){var _this;_classCallCheck(this,NewJobAlloct);_this=_super.call(this,props);_this.handleDataChange=function(_ref){var created=_ref.created,updated=_ref.updated,deleted=_ref.deleted;console.log('data change');var data=_this.state.data;var aa=created.concat(created.map(function(item){return Object.assign({},item,{id:guid()});}));if(aa.length>1){if(data.filter(function(x){return x.insertRecord;}).length===0){data=data.filter(function(item){return deleted.find(function(current){return current.id===item.id;})===undefined;})// Find and replace the updated items\n.map(function(item){return updated.find(function(current){return current.id===item.id;})||item;})// Add the newly created items and assign an `id`.\n.concat(_this.props.selectedTest.map(function(y){return Object.assign({},y,_objectSpread({},created.map(function(item){return Object.assign({},item,{id:guid(),insertRecord:true,title:\"ArNo:\".concat(y.sarno&&y.sarno,\" - Test Name:\").concat(y.stestsynonym&&y.stestsynonym,\" - Status:\").concat(y.stransdisplaystatus&&y.stransdisplaystatus)});})[0]));}));_this.setState({data:data});}else{toast.info(\"Already assigned.delete old One\");}}if(updated.length>0){_this.setState(function(old){return{data:old.data// Filter the deleted items\n.filter(function(item){return deleted.find(function(current){return current.id===item.id;})===undefined;})// Find and replace the updated items\n.map(function(item){return updated.find(function(current){return current.id===item.id;})||item;})// Add the newly created items and assign an `id`.\n.concat(created.map(function(item){return Object.assign({},item,{id:guid()});}))};});}if(deleted.length>0){_this.setState(function(old){return{data:old.data// Filter the deleted items\n.filter(function(item){return deleted.find(function(current){return current.id===item.id;})===undefined;})// Find and replace the updated items\n.map(function(item){return updated.find(function(current){return current.id===item.id;})||item;})// Add the newly created items and assign an `id`.\n.concat(created.map(function(item){return Object.assign({},item,{id:guid(),title:\"\".concat(_this.props.selectedTest[0].sarno&&_this.props.selectedTest[0].sarno,\" - \").concat(_this.props.selectedTest[0].stestsynonym&&_this.props.selectedTest[0].stestsynonym,\" - \").concat(_this.props.selectedTest[0].stransdisplaystatus&&_this.props.selectedTest[0].stransdisplaystatus)});}))};});}_this.props.parentScheduleState(data);};_this.state={data:[],resource:[{name:'instrumentCategory',data:[],field:'InstrumentCategory',valueField:'value',textField:'text',colorField:'color'},{name:'instrument',data:[],field:'Instrument',valueField:'value',textField:'text',colorField:'color'}]// instrument:[]\n};return _this;}_createClass(NewJobAlloct,[{key:\"render\",value:function render(){var _this2=this;var displayDate=new Date(Date.UTC(currentYear,new Date().getMonth(),new Date().getDate()));console.log(\"job Allocation\",this.state.data);return/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_TECHNIQUE\"}),isSearchable:true,name:\"ntechniquecode\",isDisabled:false,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:false,isClearable:true,options:this.props.Technique,value:this.props.selectedRecord[\"ntechniquecode\"]||\"\",defaultValue:this.props.selectedRecord[\"ntechniquecode\"],onChange:function onChange(event){return _this2.props.onComboChange(event,\"ntechniquecode\");},closeMenuOnSelect:true})),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_USERS\"}),isSearchable:true,name:\"nusercode\",isDisabled:false,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:true,isClearable:false,options:this.props.Users,value:this.props.selectedRecord[\"nusercode\"]||\"\",defaultValue:this.props.selectedRecord[\"nusercode\"],onChange:function onChange(event){return _this2.props.onComboChange(event,\"nusercode\");},closeMenuOnSelect:true})))),/*#__PURE__*/React.createElement(Col,{md:9},/*#__PURE__*/React.createElement(Scheduler,{data:this.state.data,onDataChange:this.handleDataChange,editable:{add:true,remove:true,drag:true,resize:true,select:true,edit:true},height:500,editItem:CustomEditItem,form:FormWithCustomEditor,defaultDate:displayDate// viewSlot={CustomViewSlotForMonth}\n,editSlot:CustomEditSlotForMonth// header={(props) =>\n//      <SchedulerHeader {...props}  children={headerComponent}   /> \n//   }\n// viewSlot={CustomViewSlot}\n//  editSlot={CustomEditSlot}\n// editItem={CustomEditItem}\n//  allDayLabel={false}\n// isAllDay={false}\n// isRecurring={false}\n//   onFormItemChange={this.onchnge}\n//  dataItem={[\"one\",\"two\"]}\n//  onFormSubmitAction={this.onchnge}\n//  editItem={this.CustomEditItem}\n//group={{ resources: ['users'] }}\n//</Col> resources={this.state.resource}\n// resources={[{...this.state.resource[0]},{...this.state.resource[1],data:this.props.Instrument?this.props.Instrument.map((x, i) => {\n//     return {\n//         text: x.label,\n//         value: x.value,\n//         color: `#${Math.floor(Math.random() * 16777215).toString(16)}`\n//     }\n// }):[]}]}\n// modelFields={{\n//     id: \"id\",\n//     title: \"title\",\n//     description: \"description\",\n//     start: \"start\",\n//     end: \"end\",\n//     // recurrenceRule: \"RecurrenceRule\",\n//     //  recurrenceId: \"RecurrenceID\",\n//     //  recurrenceExceptions: \"RecurrenceException\",\n// }}\n// editItem={EditItemWithDynamicTitle}\n},/*#__PURE__*/React.createElement(AgendaView,{slotDivisions:1,task:CustomTask,editable:{add:false,remove:false,drag:false,resize:false,select:false,edit:false}}),/*#__PURE__*/React.createElement(MonthView//viewItem={SchedulerProportionalViewItem} //slotDivisions={1}\n,null),/*#__PURE__*/React.createElement(WeekView,{viewItem:SchedulerProportionalViewItem,slotDivisions:1// viewSlot={CustomViewSlot}\n//editSlot={CustomEditSlot}\n}),/*#__PURE__*/React.createElement(DayView,{viewItem:SchedulerProportionalViewItem,slotDivisions:1,allDaySlot:false//viewSlot={CustomViewSlot}\n// editSlot={CustomEditSlot} \n,numberOfDays:3,style:{zorder:25000}}),/*#__PURE__*/React.createElement(TimelineView//slotDivisions={1}\n,null))));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var data=[];//let resource = this.state.resource\nif(this.props.userData!==undefined){if(!(this.props.userData.length<=this.state.data.length)){for(var i=0;i<this.props.userData.length;i++){data.push(_objectSpread(_objectSpread({},this.props.userData[i].jsondata),this.props.userData[i]));}data=data.map(function(dataItem,i){return{start:parseAdjust(dataItem.UserStartDate+\".000z\"),end:parseAdjust(dataItem.UserEndDate+\".000z\"),title:\"ArNo:\".concat(dataItem.sarno&&dataItem.sarno,\" - Test Name:\").concat(dataItem.stestsynonym&&dataItem.stestsynonym,\" - Status:\").concat(dataItem.stransdisplaystatus&&dataItem.stransdisplaystatus),id:dataItem.id?dataItem.id:i,startTimezone:dataItem.startTimezone,endTimezone:dataItem.endTimezone,description:dataItem.Comments?dataItem.Comments:\"\",Instrument:dataItem.Instrument.value,InstrumentCategory:dataItem.InstrumentCategory.value,sarno:dataItem.sarno,ssamplearno:dataItem.ssamplearno,stestsynonym:dataItem.stestsynonym,ntransactionstatus:dataItem.ntransactionstatus,stransdisplaystatus:dataItem.stransdisplaystatus};});// if (this.props.InstrumentCategory && this.props.InstrumentCategory.length > 0) {\n//     const userList = this.props.InstrumentCategory.map((x, i) => {\n//         return {\n//             text: x.label,\n//             value: x.value,\n//             color: `#${Math.floor(Math.random() * 16777215).toString(16)}`\n//         }\n//     })\n//     resource[0].data = userList\n// }\nthis.setState({data:data});}// if (this.props.Instrument !== this.state.instrument) {\n//     const userList = this.props.Instrument.map((x, i) => {\n//         return {\n//             text: x.sinstrumentid,\n//             value: x.ninstrumentcode,\n//             color: `#${Math.floor(Math.random() * 16777215).toString(16)}`\n//         }\n//     })\n//     resource[0].data = userList\n// }\n// this.setState({ data: data, resource});\n}}}]);return NewJobAlloct;}(React.Component);export default injectIntl(NewJobAlloct);export var currentYear=new Date().getFullYear();export var parseAdjust=function parseAdjust(eventDate){var date=new Date(eventDate);date.setFullYear(currentYear);return date;};","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/joballocation/NewJobAlloct.jsx"],"names":["React","Scheduler","TimelineView","DayView","WeekView","MonthView","SchedulerEditItem","AgendaView","SchedulerProportionalViewItem","SchedulerHeader","FormSelectSearch","Col","Row","injectIntl","guid","DEFAULT_RETURN","CustomEditItem","CustomEditSlot","CustomEditSlotForMonth","CustomTask","CustomViewSlot","CustomViewSlotForMonth","headerComponent","FormWithCustomEditor","toast","NewJobAlloct","props","handleDataChange","created","updated","deleted","console","log","data","state","aa","concat","map","item","Object","assign","id","length","filter","x","insertRecord","find","current","undefined","selectedTest","y","title","sarno","stestsynonym","stransdisplaystatus","setState","info","old","parentScheduleState","resource","name","field","valueField","textField","colorField","displayDate","Date","UTC","currentYear","getMonth","getDate","intl","formatMessage","Technique","selectedRecord","event","onComboChange","Users","add","remove","drag","resize","select","edit","zorder","previousProps","userData","i","push","jsondata","dataItem","start","parseAdjust","UserStartDate","end","UserEndDate","startTimezone","endTimezone","description","Comments","Instrument","value","InstrumentCategory","ssamplearno","ntransactionstatus","Component","getFullYear","eventDate","date","setFullYear"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Scheduler, TimelineView, DayView, WeekView, MonthView, SchedulerEditItem, AgendaView, SchedulerProportionalViewItem, SchedulerHeader } from '@progress/kendo-react-scheduler';\r\nimport FormSelectSearch from '../../components/form-select-search/form-select-search.component';\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport { injectIntl } from \"react-intl\";\r\n//import { FormWithCustomEditor } from './custom-form';\r\n// import { EditItemWithDynamicTitle } from './custom-item';\r\n//import {CustomEditItem} from './editors'\r\nimport { guid } from '@progress/kendo-react-common';\r\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\r\nimport './Calender.css'\r\nimport CustomEditItem, { CustomEditSlot, CustomEditSlotForMonth, CustomTask, CustomViewSlot, CustomViewSlotForMonth, headerComponent } from \"./EditItem\";\r\nimport { FormWithCustomEditor } from \"./custom-form\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nclass NewJobAlloct extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            data: [],\r\n            resource: [{\r\n                name: 'instrumentCategory',\r\n                data: [],\r\n                field: 'InstrumentCategory',\r\n                valueField: 'value',\r\n                textField: 'text',\r\n                colorField: 'color'\r\n            }, {\r\n                name: 'instrument',\r\n                data: [],\r\n                field: 'Instrument',\r\n                valueField: 'value',\r\n                textField: 'text',\r\n                colorField: 'color'\r\n            }],\r\n            // instrument:[]\r\n        }\r\n    }\r\n\r\n    render() {\r\n        var displayDate = new Date(Date.UTC(currentYear, new Date().getMonth(), new Date().getDate()));\r\n        console.log(\"job Allocation\", this.state.data);\r\n        return (\r\n            <Row>\r\n                <Col md={3}>\r\n                    <Row>\r\n                        <Col md={12}>\r\n                            <FormSelectSearch\r\n                                formLabel={this.props.intl.formatMessage({ id: \"IDS_TECHNIQUE\" })}\r\n                                isSearchable={true}\r\n                                name={\"ntechniquecode\"}\r\n                                isDisabled={false}\r\n                                placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                isMandatory={false}\r\n                                isClearable={true}\r\n                                options={this.props.Technique}\r\n                                value={this.props.selectedRecord[\"ntechniquecode\"] || \"\"}\r\n                                defaultValue={this.props.selectedRecord[\"ntechniquecode\"]}\r\n                                onChange={(event) => this.props.onComboChange(event, \"ntechniquecode\")}\r\n                                closeMenuOnSelect={true}\r\n                            >\r\n                            </FormSelectSearch>\r\n                        </Col>\r\n                        <Col md={12}>\r\n                            <FormSelectSearch\r\n                                formLabel={this.props.intl.formatMessage({ id: \"IDS_USERS\" })}\r\n                                isSearchable={true}\r\n                                name={\"nusercode\"}\r\n                                isDisabled={false}\r\n                                placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                isMandatory={true}\r\n                                isClearable={false}\r\n                                options={this.props.Users}\r\n                                value={this.props.selectedRecord[\"nusercode\"] || \"\"}\r\n                                defaultValue={this.props.selectedRecord[\"nusercode\"]}\r\n                                onChange={(event) => this.props.onComboChange(event, \"nusercode\")}\r\n                                closeMenuOnSelect={true}\r\n                            >\r\n                            </FormSelectSearch>\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n                <Col md={9}>\r\n                    <Scheduler data={this.state.data}\r\n                        onDataChange={this.handleDataChange}\r\n                        editable={{\r\n                            add: true,\r\n                            remove: true,\r\n                            drag: true,\r\n                            resize: true,\r\n                            select: true,\r\n                            edit: true\r\n                        }}\r\n                        height={500}\r\n                        editItem={CustomEditItem}\r\n                        form={FormWithCustomEditor}\r\n                        defaultDate={displayDate}\r\n                        // viewSlot={CustomViewSlotForMonth}\r\n                        editSlot={CustomEditSlotForMonth}\r\n                    // header={(props) =>\r\n                    //      <SchedulerHeader {...props}  children={headerComponent}   /> \r\n                    //   }\r\n                    // viewSlot={CustomViewSlot}\r\n                    //  editSlot={CustomEditSlot}\r\n\r\n                    // editItem={CustomEditItem}\r\n                    //  allDayLabel={false}\r\n                    // isAllDay={false}\r\n                    // isRecurring={false}\r\n                    //   onFormItemChange={this.onchnge}\r\n                    //  dataItem={[\"one\",\"two\"]}\r\n                    //  onFormSubmitAction={this.onchnge}\r\n                    //  editItem={this.CustomEditItem}\r\n                    //group={{ resources: ['users'] }}\r\n                    //</Col> resources={this.state.resource}\r\n\r\n\r\n                    // resources={[{...this.state.resource[0]},{...this.state.resource[1],data:this.props.Instrument?this.props.Instrument.map((x, i) => {\r\n                    //     return {\r\n                    //         text: x.label,\r\n                    //         value: x.value,\r\n                    //         color: `#${Math.floor(Math.random() * 16777215).toString(16)}`\r\n                    //     }\r\n                    // }):[]}]}\r\n                    // modelFields={{\r\n                    //     id: \"id\",\r\n                    //     title: \"title\",\r\n                    //     description: \"description\",\r\n                    //     start: \"start\",\r\n                    //     end: \"end\",\r\n                    //     // recurrenceRule: \"RecurrenceRule\",\r\n                    //     //  recurrenceId: \"RecurrenceID\",\r\n                    //     //  recurrenceExceptions: \"RecurrenceException\",\r\n                    // }}\r\n                    // editItem={EditItemWithDynamicTitle}\r\n                    >\r\n\r\n                        <AgendaView slotDivisions={1} task={CustomTask} editable={{\r\n                            add: false,\r\n                            remove: false,\r\n                            drag: false,\r\n                            resize: false,\r\n                            select: false,\r\n                            edit: false\r\n                        }} />\r\n                        <MonthView //viewItem={SchedulerProportionalViewItem} //slotDivisions={1}\r\n\r\n                        />\r\n                        <WeekView viewItem={SchedulerProportionalViewItem} slotDivisions={1}\r\n                        // viewSlot={CustomViewSlot}\r\n                        //editSlot={CustomEditSlot}\r\n                        />\r\n                        <DayView viewItem={SchedulerProportionalViewItem} slotDivisions={1} allDaySlot={false}\r\n                            //viewSlot={CustomViewSlot}\r\n                            // editSlot={CustomEditSlot} \r\n                            numberOfDays={3}\r\n                            style={{ zorder: 25000 }}\r\n                        />\r\n                        <TimelineView //slotDivisions={1}\r\n                        />\r\n\r\n                    </Scheduler>\r\n                </Col>\r\n            </Row>\r\n\r\n\r\n\r\n        );\r\n\r\n    }\r\n\r\n\r\n    handleDataChange = ({\r\n        created,\r\n        updated,\r\n        deleted\r\n    }) => {\r\n        console.log('data change')\r\n        let data = this.state.data;\r\n        const aa = created.concat(created.map(item => Object.assign({}, item, {\r\n            id: guid()\r\n        })));\r\n        if (aa.length > 1) {\r\n\r\n            if (data.filter(x => x.insertRecord).length === 0) {\r\n\r\n                data= data.filter(item => deleted.find(current => current.id === item.id) === undefined) // Find and replace the updated items\r\n                .map(item => updated.find(current => current.id === item.id) || item) // Add the newly created items and assign an `id`.\r\n                .concat(this.props.selectedTest.map((y) => Object.assign({}, y, {\r\n                    ...created.map(item => Object.assign({}, item, {\r\n                        id: guid(), insertRecord: true, title: `ArNo:${y.sarno && y.sarno} - Test Name:${y.stestsynonym && y.stestsynonym} - Status:${y.stransdisplaystatus && y.stransdisplaystatus}`\r\n                    }))[0]\r\n                })\r\n                ))\r\n\r\n\r\n                this.setState({data});\r\n            } else {\r\n\r\n                toast.info(\"Already assigned.delete old One\")\r\n            }\r\n\r\n        }\r\n        if (updated.length > 0) {\r\n\r\n            this.setState(old => ({\r\n                data: old.data     // Filter the deleted items\r\n                    .filter(item => deleted.find(current => current.id === item.id) === undefined) // Find and replace the updated items\r\n                    .map(item => updated.find(current => current.id === item.id) || item) // Add the newly created items and assign an `id`.\r\n                    .concat(created.map(item => Object.assign({}, item, {\r\n                        id: guid()\r\n                    })))\r\n            }));\r\n        }\r\n\r\n        if (deleted.length > 0) {\r\n\r\n            this.setState(old => ({\r\n                data: old.data     // Filter the deleted items\r\n                    .filter(item => deleted.find(current => current.id === item.id) === undefined) // Find and replace the updated items\r\n                    .map(item => updated.find(current => current.id === item.id) || item) // Add the newly created items and assign an `id`.\r\n                    .concat(created.map(item => Object.assign({}, item, {\r\n                        id: guid(), title: `${this.props.selectedTest[0].sarno && this.props.selectedTest[0].sarno} - ${this.props.selectedTest[0].stestsynonym && this.props.selectedTest[0].stestsynonym} - ${this.props.selectedTest[0].stransdisplaystatus && this.props.selectedTest[0].stransdisplaystatus}`\r\n                    })))\r\n            }));\r\n        }\r\n\r\n        this.props.parentScheduleState(data);\r\n    };\r\n\r\n    componentDidUpdate(previousProps) {\r\n        let data = [];\r\n        //let resource = this.state.resource\r\n        if (this.props.userData !== undefined) {\r\n            if (!(this.props.userData.length <= this.state.data.length)) {\r\n                for (let i = 0; i < this.props.userData.length; i++) {\r\n                    data.push({ ...this.props.userData[i].jsondata, ...this.props.userData[i] });\r\n                }\r\n\r\n                data = data.map((dataItem, i) => ({\r\n                    start: parseAdjust(dataItem.UserStartDate + \".000z\"),\r\n                    end: parseAdjust(dataItem.UserEndDate + \".000z\"),\r\n                    title: `ArNo:${dataItem.sarno && dataItem.sarno} - Test Name:${dataItem.stestsynonym && dataItem.stestsynonym} - Status:${dataItem.stransdisplaystatus && dataItem.stransdisplaystatus}`,\r\n                    id: dataItem.id ? dataItem.id : i,\r\n                    startTimezone: dataItem.startTimezone,\r\n                    endTimezone: dataItem.endTimezone,\r\n                    description: dataItem.Comments ? dataItem.Comments : \"\",\r\n                    Instrument: dataItem.Instrument.value,\r\n                    InstrumentCategory: dataItem.InstrumentCategory.value,\r\n                    sarno: dataItem.sarno,\r\n                    ssamplearno: dataItem.ssamplearno,\r\n                    stestsynonym: dataItem.stestsynonym,\r\n                    ntransactionstatus: dataItem.ntransactionstatus,\r\n                    stransdisplaystatus: dataItem.stransdisplaystatus\r\n                }))\r\n\r\n                // if (this.props.InstrumentCategory && this.props.InstrumentCategory.length > 0) {\r\n                //     const userList = this.props.InstrumentCategory.map((x, i) => {\r\n                //         return {\r\n                //             text: x.label,\r\n                //             value: x.value,\r\n                //             color: `#${Math.floor(Math.random() * 16777215).toString(16)}`\r\n                //         }\r\n                //     })\r\n                //     resource[0].data = userList\r\n                // }\r\n\r\n                this.setState({ data: data });\r\n            }\r\n\r\n            // if (this.props.Instrument !== this.state.instrument) {\r\n            //     const userList = this.props.Instrument.map((x, i) => {\r\n            //         return {\r\n            //             text: x.sinstrumentid,\r\n            //             value: x.ninstrumentcode,\r\n            //             color: `#${Math.floor(Math.random() * 16777215).toString(16)}`\r\n            //         }\r\n            //     })\r\n            //     resource[0].data = userList\r\n            // }\r\n\r\n            // this.setState({ data: data, resource});\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nexport default injectIntl(NewJobAlloct);\r\nexport const currentYear = new Date().getFullYear();\r\nexport const parseAdjust = eventDate => {\r\n    const date = new Date(eventDate);\r\n    date.setFullYear(currentYear);\r\n    return date;\r\n};"]},"metadata":{},"sourceType":"module"}