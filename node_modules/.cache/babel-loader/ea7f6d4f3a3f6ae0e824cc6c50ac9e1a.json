{"ast":null,"code":"import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{injectIntl,FormattedMessage}from'react-intl';import{Row,Col,Card,Nav,FormGroup,FormLabel,Form,Button,FormControl}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import PerfectScrollbar from'react-perfect-scrollbar';import{faTrashAlt,faCopy,faPencilAlt,faSync,faPlus,faThumbsUp,faBoxOpen,faBox,faLocationArrow,faFolderMinus,faFolder,faFolderOpen,faArrowRight,faSearch,faTimes,faArrowDown,faHandPointLeft,faArrowUp,faClone,faPuzzlePiece,faCalculator,faEye}from'@fortawesome/free-solid-svg-icons';import{toast}from'react-toastify';import ListMaster from'../../components/list-master/list-master.component';import{constructOptionList,getControlMap,onSaveMandatoryValidation,searchData,searchJsonData,showEsign,sortData}from'../../components/CommonScript';import{ReadOnlyText,ContentPanel,SearchIcon}from'../../components/App.styles';//import SortableTree from 'react-sortable-tree'; \nimport FormSelectSearch from'../../components/form-select-search/form-select-search.component';import DataGrid from'../../components/data-grid/data-grid.component';import{BasicConfig,BasicFuncs,Utils as QbUtils}from\"@react-awesome-query-builder/ui\";import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import{callService,crudMaster,validateEsignCredential,updateStore,getSelectedSampleStorageLocation,filterColumnData,changeStorageCategoryFilter,openPropertyModal,editSampleStorageLocation,approveSampleStorageLocation,getSelectedSampleStorageVersion,fetchStorageCategory,copySampleStorageVersion,crudSampleStorageLocation}from'../../actions';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{ListWrapper}from'../../components/client-group.styles';import{MediaLabel,ProductList}from'../product/product.styled';// import ReactTooltip from 'react-tooltip';\nimport{uuid}from\"uuidv4\";import TreeEditable from\"../../components/form-tree-editable/TreeEditable\";import TreeViewEditable from\"../../components/form-tree-editable/form-tree-editable.component\";import{getItemPath,mapTree,removeItems}from\"@progress/kendo-react-treelist\";import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import AddTreeview from'./AddTreeview';import AddTreeProperties from'./AddTreeProperties';import{Splitter}from'@progress/kendo-react-layout';import TransactionListMaster from'../../components/TransactionListMaster';import BreadcrumbComponent from'../../components/Breadcrumb.Component';import SplitterLayout from'react-splitter-layout';import StorageCategoryFilter from'./StorageCategoryFilter';import{transactionStatus}from'../../components/Enumeration';import Esign from'../audittrail/Esign';import{TreeViewDragAnalyzer,moveTreeViewItem}from'@progress/kendo-react-treeview';import ModalShow from'../../components/ModalShow';import rsapi from'../../rsapi';import AddSampleStorageMapping from'./AddSampleStorageMapping';import Axios from'axios';import StorageMappingFilter from'./StorageMappingFilter';import Preloader from'../../components/preloader/preloader.component';import TransactionListMasterJsonView from'../../components/TransactionListMasterJsonView';import{groupBy,process}from'@progress/kendo-data-query';//import Spreadsheet from '../../components/Spreadsheet/Spreadsheet';\nimport MatrixComponent from'../../components/MatrixComponent';import FilterQueryBuilder from'../../components/FilterQueryBuilder';import{Grid,GridColumn}from'@progress/kendo-react-grid';import FormInput from'../../components/form-input/form-input.component';var SampleStorageListPreperation=/*#__PURE__*/function(_Component){_inherits(SampleStorageListPreperation,_Component);var _super=_createSuper(SampleStorageListPreperation);function SampleStorageListPreperation(props){var _this$state;var _this;_classCallCheck(this,SampleStorageListPreperation);_this=_super.call(this,props);_this.dragOverCnt=0;_this.isDragDrop=false;_this.SEPARATOR='_';_this.uniqueIDArr=[];_this.countforTree=0;_this.pointedItem=undefined;_this.getitemPath={};_this.openModal=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:true,selectedRecord:{},loadTreeProperties:false,treeData:[{text:\"root\",expanded:true,editable:true,root:true,id:uuid()}],operation:\"create\"}};_this.props.updateStore(updateInfo);};_this.closeModal=function(){// const updateInfo = {\n//     typeName: DEFAULT_RETURN,\n//     data: {\n//         openModal: false, selectedRecord: {}\n//     }\n// }\n// this.props.updateStore(updateInfo);\nvar loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedId=_this.props.Login.selectedId;var selectedRecord=_this.state.selectedRecord;//this.props.Login.selectedRecord;\nif(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"||_this.props.Login.operation===\"Approve\"||_this.props.Login.operation===\"copy\"){loadEsign=false;openModal=false;selectedRecord={};selectedId=null;}else{loadEsign=false;}}else{openModal=false;selectedId=null;selectedRecord={};}// const updateInfo = {\n//     typeName: DEFAULT_RETURN,\n//     data: { openModal, loadEsign, selectedRecord, selectedId }\n// }\n// this.props.updateStore(updateInfo);\n// this.getsamplestoragetransaction({}, this.props.Login.userInfo);\n// if (!this.state.isFilterPopup) {\n//     this.getDynamicFilterExecuteData()\n// }\n_this.setState({selectedRecord:selectedRecord,openModal:false,isInitialRender:true,isFilterPopup:false});};_this.onInputChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type===\"checkbox\"){selectedRecord[event.target.name]=event.target.checked;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){if(_this.props.Login.loadTreeProperties===true){_this.onSaveProperties(saveType,formRef);}else if(_this.state.openSpreadSheet){_this.CRUDSampleStorageTransaction(_objectSpread(_objectSpread({},_this.state.editedsheetData),{},{nsamplestoragemappingcode:_this.state.isMultiSampleAdd?Object.keys(_this.state.sheetData).map(function(nsamplestoragemappingcode){return nsamplestoragemappingcode;}).join(\",\"):_this.state.editedsheetData.nsamplestoragemappingcode.toString(),nsamplestoragelocationcode:_this.state.editedsheetData.nsamplestoragelocationcode,sheetData:JSON.stringify(_this.state.sheetData?_this.state.sheetData:{}),sheetUpdate:true,userinfo:_this.props.Login.userInfo,isMultiSampleAdd:_this.state.isMultiSampleAdd}),'create');}else{_this.onSaveSampleStorageTransaction(saveType,formRef);}};_this.paneSizeChange=function(d){_this.setState({splitChangeWidthPercentage:d});};_this.handlePageChange=function(e){_this.setState({skip:e.skip,take:e.take});};_this.handleDetailPageChange=function(e){_this.setState({skip:e.skip,take:e.take});};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};_this.reloadData=function(){_this.onFilterSubmit();};_this.onEditSampleStorageLocation=function(selectedSampleStorageVersion,userInfo,editId){_this.handleSearch();_this.setState({searchedTreeData:undefined});if(_this.searchRef.current){_this.searchRef.current.value=\"\";}var isOnlyDraft=false;if(_this.props.Login.masterData.sampleStorageVersion&&_this.props.Login.masterData.sampleStorageVersion.length>1){isOnlyDraft=true;}_this.props.editSampleStorageLocation(selectedSampleStorageVersion,userInfo,isOnlyDraft,editId);};_this.openStorageMapping=function(addId){_this.addSampleStorageMapping({userInfo:_this.props.Login.userInfo,addId:addId});};_this.deletesamplestoragemapping=function(param){_this.CRUDSampleStorageTransaction({'nsamplestoragelocationcode':_this.state.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode,'nsamplestoragemappingcode':param.nsamplestoragemappingcode,userinfo:_this.props.Login.userInfo},'delete');};_this.addMultipleSample=function(param){_this.setState({//sheetData: JSON.parse(response[0].data.sheetData),\nopenModal:true,isMultiSampleAdd:true,openSpreadSheet:true,//, editedsheetData: param, Rows: param.nrow, columns: param.ncolumn,\nloading:false});};_this.opensearch=function(){_this.setState({openModal:true,isFilterPopup:true,selectedRecord:_objectSpread({},_this.state.submittedselectedRecord)||_objectSpread({},_this.state.selectedRecord)});};_this.addSample=function(param,nflag){_this.setState({loading:true});var urlArray=[];var url1=rsapi.post(\"samplestoragelistpreperation/getsamplestoragemappingSheetData\",{isMultiSampleAdd:nflag===2?true:false,nsamplestoragemappingcode:nflag===2?_this.state.masterData.samplestoragelistpreperation.map(function(item){return item.nsamplestoragemappingcode;}).join(\",\"):param.nsamplestoragemappingcode.toString()});urlArray=[url1];Axios.all(urlArray).then(function(response){if(nflag===2){_this.setState({sheetData:JSON.parse(response[0].data.sheetData),openModal:true,isMultiSampleAdd:true,openSpreadSheet:true,//, editedsheetData: param, Rows: param.nrow, columns: param.ncolumn,\nloading:false});}else{_this.setState({sheetData:JSON.parse(response[0].data.sheetData),openModal:true,isMultiSampleAdd:false,openSpreadSheet:true,editedsheetData:param,Rows:param.nrow,columns:param.ncolumn,loading:false});}}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this.setState({loading:false});});};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};var selectedRecordFilter=_this.state.selectedRecordFilter||{};if(fieldName==='nstoragecategorycode'){return _this.getSampleStorageLocation({userinfo:_this.props.Login.userInfo,nstoragecategorycode:comboData.value},fieldName,comboData);}else if(fieldName==='ncontainertypecode'){return _this.getContainerStructure({userinfo:_this.props.Login.userInfo,ncontainertypecode:comboData.value},fieldName,comboData);}else if(fieldName==='nprojecttypecode'){return _this.getprojectbarcodeconfig(comboData);}else if(fieldName==='ncontainerstructurecode'){selectedRecord['nrow']=comboData.item.nrow?comboData.item.nrow:1;selectedRecord['ncolumn']=comboData.item.ncolumn?comboData.item.ncolumn:1;}else if(fieldName==='nsamplestoragelocationcode'){return _this.getSampleStorageLocation({userinfo:_this.props.Login.userInfo,nstoragecategorycode:_this.state.selectedRecordFilter['nstoragecategorycode'].value,nsamplestoragelocationcode:comboData.value},fieldName,comboData);}if(fieldName==='nsamplestorageversioncode'){selectedRecordFilter[fieldName]=comboData;_this.setState({selectedRecordFilter:selectedRecordFilter});}else{selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord,selectedRecordFilter:selectedRecordFilter});}};_this.onSaveSampleStorageTransaction=function(saveType){var selectedRecord=_this.state.selectedRecord;var containerpathCodeArray=[];if(_this.state.operation==='create'){containerpathCodeArray=selectedRecord['nsamplestoragecontainerpathcode'].map(function(item){return item.value;});}var inputParam={nsamplestoragetransactioncode:selectedRecord['nsamplestoragetransactioncode']?parseInt(selectedRecord['nsamplestoragetransactioncode']):0,nsamplestoragelocationcode:_this.state.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode,nsamplestoragemappingcode:selectedRecord['nsamplestoragemappingcode']?parseInt(selectedRecord['nsamplestoragemappingcode']):0,ncontainertypecode:-1,nproductcode:selectedRecord['nproductcode'].value,ndirectionmastercode:-1,ssamplestoragemappingname:\"-\",nsamplestoragecontainerpathcode:_this.state.operation==='create'?JSON.stringify(containerpathCodeArray):parseInt(selectedRecord['nsamplestoragecontainerpathcode'].value),containerpathsize:containerpathCodeArray.length,nneedposition:4,ncontainerstructurecode:-1,nquantity:selectedRecord['nquantity']?parseInt(selectedRecord['nquantity']):1,userinfo:_this.props.Login.userInfo};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolcode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.CRUDSampleStorageTransaction(inputParam,_this.state.operation);}};_this.getsamplestoragetransaction=function(inputParam,userinfo){_this.setState({loading:true});var urlArray=[];var url1=rsapi.post(\"samplestoragelistpreperation/getsamplestoragetransaction\",{userinfo:_this.props.Login.userInfo});urlArray=[url1];Axios.all(urlArray).then(function(response){_this.setState({masterData:_objectSpread(_objectSpread({},_this.state.masterData),response[0].data),loading:false});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this.setState({loading:false});});};_this.childDataChange=function(selectedRecord){_this.setState({selectedRecord:_objectSpread({},selectedRecord),isInitialRender:false});};_this.childSheetDataChange=function(sheetData){_this.setState({// selectedRecord: {\n//     ...this.state.selectedRecord,\n//     sheetData: {\n//         ...this.state.selectedRecord.sheetData,\n//         ...sheetData\n//     }\n// },\nsheetData:_objectSpread({},sheetData),isInitialRender:false});};_this.getActiveSampleStorageMappingById=function(inputParam,userinfo){_this.setState({loading:true});var urlArray=[];var url1=rsapi.post(\"samplestoragelistpreperation/getActiveSampleStorageMappingById\",{nsamplestoragelocationcode:inputParam['selectedSampleStorageLocation'][0].nsamplestoragelocationcode,userinfo:userinfo});urlArray=[url1];Axios.all(urlArray).then(function(response){_this.setState({masterData:_objectSpread(_objectSpread({},_this.state.masterData),response[0].data)//,\n// selectedRecord: {\n//     ...this.state.selectedRecord\n//    // , sheetData: JSON.parse(response[0].data.selectedSampleStoragemapping.jsondata.value)\n// }\n,loading:false});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this.setState({loading:false});});};_this.filterColumnData=function(filterValue,filterParam){var masterData=filterParam.masterData;var primaryKeyValue=0;var searchedData=undefined;if(filterValue===\"\"){if(masterData[filterParam.inputListName]&&masterData[filterParam.inputListName].length>0){primaryKeyValue=masterData[filterParam.inputListName][0][filterParam.primaryKeyField];}}else{if(filterParam.isjsondata){searchedData=searchJsonData(filterValue,masterData[filterParam.inputListName],filterParam.searchFieldList||[]);}else{searchedData=searchData(filterValue,masterData[filterParam.inputListName],filterParam.searchFieldList||[]);}if(searchedData.length>0){primaryKeyValue=searchedData[0][filterParam.primaryKeyField];}}if(primaryKeyValue!==0){_this.setState({loading:true});return rsapi.post(filterParam.fetchUrl,_objectSpread(_objectSpread({},filterParam.fecthInputObject),{},_defineProperty({},filterParam.primaryKeyField,primaryKeyValue))).then(function(response){masterData[\"searchedData\"]=searchedData;masterData=_objectSpread(_objectSpread({},masterData),response.data);if(filterParam.sortField){sortData(masterData,filterParam.sortOrder,filterParam.sortField);}else{sortData(masterData);}_this.setState({masterData:masterData,loading:false,skip:0,take:10,selectedId:null});}).catch(function(error){_this.setState({loading:false});if(error.response.status===500){toast.error(_this.props.intl.formatMessage({id:error.message}));}else{toast.warn(_this.props.intl.formatMessage({id:error.response.data}));}});}else{masterData[filterParam.selectedObject]=undefined;masterData[\"searchedData\"]=[];Object.keys(masterData).forEach(function(item){if(item!==filterParam.inputListName&&item!==filterParam.selectedObject&&filterParam.unchangeList&&filterParam.unchangeList.indexOf(item)===-1)masterData[item]=[];});_this.setState({masterData:masterData,operation:null,modalName:undefined,loading:false});}};_this.CRUDSampleStorageTransaction=function(inputParam,operation){_this.setState({loading:true});var urlArray=[];var url1=rsapi.post(\"samplestoragelistpreperation/\"+operation+\"samplestoragelistpreperation\",inputParam);urlArray=[url1];Axios.all(urlArray).then(function(response){_this.setState({isInitialRender:true,selectedRecord:{},masterData:_objectSpread(_objectSpread({},_this.state.masterData),response[0].data),openModal:false,loading:false});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this.setState({loading:false});});};_this.onFilterSubmit=function(){_this.setState({loading:true});var inputParamData={nstoragecategorycode:_this.state.selectedRecordFilter[\"nstoragecategorycode\"].value,// nsamplestoragelocationcode: this.state.selectedRecordFilter[\"nsamplestoragelocationcode\"].value,\n// nsamplestorageversioncode: this.state.selectedRecordFilter[\"nsamplestorageversioncode\"].value,\nuserinfo:_this.props.Login.userInfo};var urlArray=[];var url1=rsapi.post(\"samplestoragelistpreperation/getsamplestoragemapping\",inputParamData);urlArray=[url1];Axios.all(urlArray).then(function(response){var object={selectedStorageCategoryName:_this.state.selectedRecordFilter[\"nstoragecategorycode\"].item.sstoragecategoryname// ssamplestoragelocationname: this.state.selectedRecordFilter[\"nsamplestoragelocationcode\"].item.ssamplestoragelocationname,\n// selectedSampleStorageVersion: this.state.selectedRecordFilter[\"nsamplestorageversioncode\"].item.nversionno,\n};var filterData=_this.generateBreadCrumData(object);_this.setState({filterData:filterData,masterData:_objectSpread(_objectSpread({},_this.state.masterData),response[0].data),loading:false});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this.setState({loading:false});});};_this.onSampleMappingSaveClick=function(){var mandatoryFields=_this.state.openSpreadSheet?[]:_this.state.selectedRecord[\"nneedposition\"]===undefined||_this.state.selectedRecord[\"nneedposition\"]===false?[{\"idsName\":\"IDS_SAMPLESTORAGEMAPPING\",\"dataField\":\"nsamplestoragecontainerpathcode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_PRODUCT\",\"dataField\":\"nproductcode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_AVAILABLESPACE\",\"dataField\":\"nquantity\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"selectbox\"}]:[{\"idsName\":\"IDS_SAMPLESTORAGEMAPPING\",\"dataField\":\"nsamplestoragecontainerpathcode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_PRODUCT\",\"dataField\":\"nproductcode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_CONTAINERTYPE\",\"dataField\":\"ncontainertypecode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_CONTAINERSTRUCTURENAME\",\"dataField\":\"ncontainerstructurecode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_DIRECTION\",\"dataField\":\"ndirectionmastercode\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_AVAILABLESPACE\",\"dataField\":\"nquantity\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"selectbox\"}];onSaveMandatoryValidation(_this.state.selectedRecord,mandatoryFields,_this.onSaveClick);};_this.dataStateChange=function(event){_this.setState({dataStateChange:event.dataState});};_this.approveSampleStorageMapping=function(event){var inputParamData={};_this.setState({loading:true});inputParamData={nsamplestoragelocationcode:_this.state.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode,userinfo:_this.props.Login.userInfo};var urlArray=[];var url1=rsapi.post(\"samplestoragelistpreperation/approveSampleStorageMapping\",inputParamData);urlArray=[url1];Axios.all(urlArray).then(function(response){_this.setState({masterData:_objectSpread(_objectSpread({},_this.state.masterData),response[0].data),loading:false});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this.setState({loading:false});});};_this.fetchRecord=function(data){_this.setState({loading:true});var selectedRecord=_this.state.selectedRecord;var inputParamData={nsamplestoragelocationcode:_this.state.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode,userinfo:_this.props.Login.userInfo};var urlArray=[];var url1=rsapi.post(\"samplestoragelistpreperation/addSampleStorageMapping\",inputParamData);var url2=rsapi.post(\"product/getProduct\",{'userinfo':_this.props.Login.userInfo});var url3=rsapi.post(\"samplestoragelistpreperation/getEditSampleStorageMapping\",{'nsamplestoragemappingcode':data.nsamplestoragemappingcode,'userinfo':_this.props.Login.userInfo});urlArray=[url1,url2,url3];Axios.all(urlArray).then(function(response){var storageMappingMap=constructOptionList(response[0].data['samplestoragecontainerpath']||[],\"nsamplestoragecontainerpathcode\",\"scontainerpath\",undefined,undefined,true);var storageMappingMapList=storageMappingMap.get(\"OptionList\");var containerStructure=response[0].data['containerStructure'];var containerTypeMap=constructOptionList(response[0].data['containerType']||[],\"ncontainertypecode\",\"scontainertype\",undefined,undefined,true);var containerTypeList=containerTypeMap.get(\"OptionList\");var directionmasterMap=constructOptionList(response[0].data['directionmaster']||[],\"ndirectionmastercode\",\"sdirection\",undefined,undefined,true);var directionmasterList=directionmasterMap.get(\"OptionList\");var containerstructureMap=constructOptionList(response[2].data['containerStructure']||[],\"ncontainerstructurecode\",\"scontainerstructurename\",undefined,undefined,true);var containerstructureList=containerstructureMap.get(\"OptionList\");var productMap=constructOptionList(response[1].data['Product']||[],\"nproductcode\",\"sproductname\",undefined,undefined,true);var productList=productMap.get(\"OptionList\");var editedObject=response[2].data.editsampleStorageMapping;storageMappingMapList.unshift({label:editedObject.scontainerpath,value:editedObject.nsamplestoragecontainerpathcode});selectedRecord={ndirectionmastercode:{label:editedObject.sdirection,value:editedObject.ndirectionmastercode},nsamplestoragecontainerpathcode:{label:editedObject.scontainerpath,value:editedObject.nsamplestoragecontainerpathcode},nproductcode:{label:editedObject.sproductname,value:editedObject.nproductcode},ncontainertypecode:{label:editedObject.scontainertype,value:editedObject.ncontainertypecode},ncontainerstructurecode:{label:editedObject.scontainerstructurename,value:editedObject.ncontainerstructurecode},nneedposition:editedObject.nneedposition===3?true:false,directionmasterOptions:directionmasterList,nquantity:editedObject.nquantity,nrow:editedObject.nrow,ncolumn:editedObject.ncolumn,nsamplestoragemappingcode:editedObject.nsamplestoragemappingcode};_this.setState({openSpreadSheet:false,openModal:true,selectedRecord:_objectSpread(_objectSpread({},selectedRecord),{},{storageMappingMapOptions:storageMappingMapList,productOptions:productList,containerTypeOptions:containerTypeList,containerStructureOptions:containerstructureList,isInitialRender:true}),operation:'update',loading:false});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this.setState({loading:false});});};_this.retrievalType=function(){var retrievalType=_this.state.retrievalType;if(retrievalType===1){retrievalType=2;}else{retrievalType=1;}_this.setState({retrievalType:retrievalType});};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"agree\"){selectedRecord[event.target.name]=event.target.checked===true?3:4;}}else if(event.target.type==='select-one'){selectedRecord[event.target.name]=event.target.value;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.handlePageChangeFilter=function(event){_this.setState({kendoSkip:event.skip,kendoTake:event.take});};_this.onChange=function(immutableTree,config){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[\"tree\"]=immutableTree;selectedRecord[\"config\"]=config;selectedRecord['filterquery']=QbUtils.sqlFormat(immutableTree,config);_this.setState({tree:immutableTree,config:config,selectedRecord:selectedRecord});};_this.processWithGroups=function(data,dataState){var aggregates=[{field:\"navailablespace\",aggregate:\"sum\"}];var groups=dataState.group;if(groups){groups.map(function(group){return group.aggregates=aggregates;});}dataState.group=groups;var newDataState=process(data,dataState);// setGroupIds({\n//     data: newDataState.data,\n//     group: dataState.group,\n// });\nreturn newDataState;};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.state=(_this$state={retrievalType:1,// extractedColumnList: [   \n//     { \"idsName\": \"IDS_SAMPLESTORAGELOCATION\", \"dataField\": \"ssamplestoragelocationname\", \"width\": \"200px\" },\n//     { \"idsName\": \"IDS_SAMPLESTORAGEPATH\", \"dataField\": \"scontainerpath\", \"width\": \"450px\" },\n//     { \"idsName\": \"IDS_POSITION\", \"dataField\": \"sposition\", \"width\": \"100px\" },\n//     { \"idsName\": \"IDS_SAMPLEID\", \"dataField\": \"spositionvalue\", \"width\": \"100px\" },\n//     //{ \"idsName\": \"IDS_PROJECTTYPE\", \"dataField\": \"sprojecttypename\", \"width\": \"100px\" },\n//     //{ \"idsName\": \"IDS_PRODUCT\", \"dataField\": \"sproductname\", \"width\": \"100px\" },\n//     { \"idsName\": \"IDS_PARTICIPANTS\", \"dataField\": \"sparticipantid\", \"width\": \"100px\" },\n//     //{ \"idsName\": \"IDS_VISITNUMBER\", \"dataField\": \"svisitnumber\", \"width\": \"100px\" },\n//     { \"dataField\": \"svisitnumbershortcode\", \"idsName\": \"IDS_VISITNUMBERCODE\", \"width\": \"100px\" }, \n//     { \"dataField\": \"sprojectshortcode\", \"idsName\": \"IDS_PROJECTTYPECODE\" , \"width\": \"100px\"} ,\n//     { \"dataField\": \"sproductshortcode\", \"idsName\": \"IDS_PRODUCTCODE\", \"width\": \"100px\" } ,\n//     { \"dataField\": \"ssampledonorshortcode\", \"idsName\": \"IDS_SAMPLEDONORCODE\", \"width\": \"100px\" }  ,\n//     { \"dataField\": \"scollectiontubetypeshortcode\", \"idsName\": \"IDS_COLLECTIONTUBETYPECODE\", \"width\": \"100px\" }\n// ],\nsheetData:{},selectedRecordFilter:{},treeData:[{title:'Chicken',children:[{title:'Egg'}]}],toggleAction:false,treeDataView:undefined,toggleActionView:false},_defineProperty(_this$state,\"treeData\",[{//  text: \"root\",\ntext:_this.props.intl.formatMessage({id:\"IDS_ROOT\"}),expanded:true,editable:true,root:true,id:uuid()}]),_defineProperty(_this$state,\"panes\",[{size:'50%',scrollable:false}]),_defineProperty(_this$state,\"selectedRecord\",{}),_defineProperty(_this$state,\"userRoleControlRights\",[]),_defineProperty(_this$state,\"controlMap\",new Map()),_defineProperty(_this$state,\"skip\",0),_defineProperty(_this$state,\"detailSkip\",0),_defineProperty(_this$state,\"detailTake\",10),_defineProperty(_this$state,\"take\",_this.props.Login.settings?_this.props.Login.settings[3]:25),_defineProperty(_this$state,\"splitChangeWidthPercentage\",22),_defineProperty(_this$state,\"selectedItem\",undefined),_defineProperty(_this$state,\"loading\",false),_defineProperty(_this$state,\"dataStateChange\",{take:10,skip:0// group: [\n//     {\n//         field: \"ssamplestoragelocationname\",\n//     },\n// ],\n}),_this$state);var fields={};// if (this.state.extractedColumnList) {\n//     // let newArr=[...[  { \"dataField\": \"svisitnumbershortcode\", \"idsName\": \"IDS_VISITNUMBERCODE\", \"width\": \"100px\" }, \n//     // { \"dataField\": \"sprojectshortcode\", \"idsName\": \"IDS_PROJECTTYPECODE\" , \"width\": \"100px\"} ,\n//     // { \"dataField\": \"sproductshortcode\", \"idsName\": \"IDS_PRODUCTCODE\", \"width\": \"100px\" } ,\n//     // { \"dataField\": \"ssampledonorshortcode\", \"idsName\": \"IDS_SAMPLEDONORCODE\", \"width\": \"100px\" }  ,\n//     // { \"dataField\": \"scollectiontubetypeshortcode\", \"idsName\": \"IDS_COLLECTIONTUBETYPECODE\", \"width\": \"100px\" }]\n//     // ,...this.state.extractedColumnList]\n//     this.state.extractedColumnList.map(field => {\n//         if (field.dataField !== 'ssamplestoragelocationname' && field.dataField !== 'sproductname'\n//             && field.dataField !== 'sprojecttypename' && field.dataField !== 'svisitnumber') {\n//             fields = {\n//                 ...fields,\n//                 [field.dataField]: {\n//                     \"label\":\n//                         this.props.intl.formatMessage({\n//                             id: field.idsName,\n//                         })\n//                     ,\n//                     \"type\": field.dataField === 'navailablespace' ? \"number\" : \"text\",\n//                     \"valueSources\": [\"value\", \"func\"],\n//                     \"mainWidgetProps\": {\n//                         \"valueLabel\": \"Name\",\n//                         \"valuePlaceholder\": this.props.intl.formatMessage({\n//                             id: field.idsName\n//                         })\n//                     }\n//                 }\n//             }\n//         }\n//     });\n// }\n_this.state=_objectSpread(_objectSpread({},_this.state),{},{'fields':fields});_this.searchRef=React.createRef();_this.dragClue=React.createRef();_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(SampleStorageListPreperation,[{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps,previousState){var _this2=this;var _this$state2=this.state,filterData=_this$state2.filterData,storageCategoryOptions=_this$state2.storageCategoryOptions,selectedRecord=_this$state2.selectedRecord,controlMap=_this$state2.controlMap,userRoleControlRights=_this$state2.userRoleControlRights,storageLocationOptions=_this$state2.storageLocationOptions,sampleStorageVersionOptions=_this$state2.sampleStorageVersionOptions,masterData=_this$state2.masterData,selectedRecordFilter=_this$state2.selectedRecordFilter,fields=_this$state2.fields,selectedProjectType=_this$state2.selectedProjectType,selectedProjectTypeList=_this$state2.selectedProjectTypeList;var bool=false;///////////////////////////////\nif(this.props.Login.masterData.sampleStorageLocation!==previousProps.Login.masterData.sampleStorageLocation){var queryBuilderFreezer=[];bool=true;this.props.Login.masterData.sampleStorageLocation&&this.props.Login.masterData.sampleStorageLocation.map(function(item){return queryBuilderFreezer.push({\"value\":item.nsamplestoragelocationcode,\"title\":item.ssamplestoragelocationname});});fields=_objectSpread(_objectSpread({},fields),{},{'nsamplestoragelocationcode':{\"label\":this.props.intl.formatMessage({id:\"IDS_SAMPLESTORAGELOCATIONNAME\"}),\"type\":\"select\",\"valueSources\":[\"value\"],\"fieldSettings\":{\"listValues\":queryBuilderFreezer}}});}// if (this.props.Login.masterData.sampleType !== previousProps.Login.masterData.sampleType) {\n//     let queryBuilderFreezer = [];\n//     bool = true;\n//     this.props.Login.masterData.sampleType && this.props.Login.masterData.sampleType.map(\n//         (item) => queryBuilderFreezer.push({ \"value\": item.nproductcode, \"title\": item.sproductname })\n//     )\n//     fields = {\n//         ...fields,\n//         'nproductcode': {\n//             \"label\": this.props.intl.formatMessage({\n//                 id: \"IDS_PRODUCT\",\n//             }),\n//             \"type\": \"select\",\n//             \"valueSources\": [\"value\"],\n//             \"fieldSettings\": {\n//                 \"listValues\": queryBuilderFreezer\n//             }\n//         }\n//     }\n// }\n// if (this.props.Login.masterData.ProjectType !== previousProps.Login.masterData.ProjectType) {\n//     let queryBuilderFreezer = [];\n//     bool = true;\n//     this.props.Login.masterData.ProjectType && this.props.Login.masterData.ProjectType.map(\n//         (item) => queryBuilderFreezer.push({ \"value\": item.nprojecttypecode, \"title\": item.sprojecttypename })\n//     )\n//     fields = {\n//         ...fields,\n//         'nprojecttypecode': {\n//             \"label\": this.props.intl.formatMessage({\n//                 id: \"IDS_PROJECTTYPE\",\n//             }),\n//             \"type\": \"select\",\n//             \"valueSources\": [\"value\"],\n//             \"fieldSettings\": {\n//                 \"listValues\": queryBuilderFreezer\n//             }\n//         }\n//     }\n// } if (this.props.Login.masterData.VisitNumber !== previousProps.Login.masterData.VisitNumber) {\n//     let queryBuilderFreezer = [];\n//     bool = true;\n//     this.props.Login.masterData.VisitNumber && this.props.Login.masterData.VisitNumber.map(\n//         (item) => queryBuilderFreezer.push({ \"value\": item.nvisitnumbercode, \"title\": item.svisitnumber })\n//     )\n//     fields = {\n//         ...fields,\n//         'nvisitnumbercode': {\n//             \"label\": this.props.intl.formatMessage({\n//                 id: \"IDS_VISITNUMBER\",\n//             }),\n//             \"type\": \"select\",\n//             \"valueSources\": [\"value\"],\n//             \"fieldSettings\": {\n//                 \"listValues\": queryBuilderFreezer\n//             }\n//         }\n//     }\n// }\n///////////////////////////////\nif(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){bool=true;userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);}if(this.props.Login.masterData.filterStorageCategory!==previousProps.Login.masterData.filterStorageCategory){bool=true;var filterStorageCategorylist=constructOptionList(this.props.Login.masterData.filterStorageCategory||[],\"nstoragecategorycode\",\"sstoragecategoryname\",undefined,undefined,undefined);storageCategoryOptions=filterStorageCategorylist.get(\"OptionList\");if(this.props.Login.masterData.selectedStorageCategory){selectedRecordFilter=_objectSpread(_objectSpread({},selectedRecordFilter),{},{nstoragecategorycode:storageCategoryOptions.filter(function(item){return item.value===_this2.props.Login.masterData.selectedStorageCategory.nstoragecategorycode;})[0]});}}if(this.props.Login.masterData.sampleStorageLocation!==previousProps.Login.masterData.sampleStorageLocation){bool=true;var sampleStorageLocationList=constructOptionList(this.props.Login.masterData.sampleStorageLocation||[],\"nsamplestoragelocationcode\",\"ssamplestoragelocationname\",undefined,undefined,undefined);storageLocationOptions=sampleStorageLocationList.get(\"OptionList\");if(this.props.Login.masterData.selectedSampleStorageLocation){selectedRecordFilter=_objectSpread(_objectSpread({},selectedRecordFilter),{},{nsamplestoragelocationcode:storageLocationOptions.filter(function(item){return item.value===_this2.props.Login.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode;})[0]});}}if(this.props.Login.masterData.sampleStorageVersion!==previousProps.Login.masterData.sampleStorageVersion){bool=true;var sampleStorageVersionList=constructOptionList(this.props.Login.masterData.sampleStorageVersion||[],\"nsamplestorageversioncode\",\"nversionno\",undefined,undefined,undefined);sampleStorageVersionOptions=sampleStorageVersionList.get(\"OptionList\");if(this.props.Login.masterData.selectedSampleStorageVersion){selectedRecordFilter=_objectSpread(_objectSpread({},selectedRecordFilter),{},{nsamplestorageversioncode:sampleStorageVersionOptions.filter(function(item){return item.value===_this2.props.Login.masterData.selectedSampleStorageVersion.nsamplestorageversioncode;})[0]});}}if(this.props.Login.masterData!==previousProps.Login.masterData){bool=true;masterData=this.props.Login.masterData;selectedProjectType={label:this.props.Login.masterData.selectedProjectType&&this.props.Login.masterData.selectedProjectType.sprojecttypename,value:this.props.Login.masterData.selectedProjectType&&this.props.Login.masterData.selectedProjectType.nprojecttypecode};selectedProjectTypeList=this.props.Login.masterData.selectedProjectTypeList;var _filterStorageCategorylist=constructOptionList(this.props.Login.masterData.projectbarcodeconfig||[],\"nprojecttypecode\",\"sprojecttypename\",undefined,undefined,undefined);masterData['projectbarcodeconfig']=_filterStorageCategorylist.get(\"OptionList\");if(masterData.samplestoragelistpreperation===undefined){masterData['samplestoragelistpreperation']=[];}filterData=this.generateBreadCrumData(this.props.Login.masterData);}if(this.state.masterData!==previousState.masterData){bool=true;filterData=this.generateBreadCrumData(this.state.masterData);}if(bool){this.setState({storageCategoryOptions:storageCategoryOptions,filterData:filterData,selectedRecord:selectedRecord,controlMap:controlMap,userRoleControlRights:userRoleControlRights,storageLocationOptions:storageLocationOptions,sampleStorageVersionOptions:sampleStorageVersionOptions,masterData:masterData,selectedRecordFilter:selectedRecordFilter,fields:fields,selectedProjectType:selectedProjectType,selectedProjectTypeList:selectedProjectTypeList});}}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.parentHeight){var height=this.parentHeight.clientHeight;this.setState({firstPane:height-80,parentHeight:height-50});}}},{key:\"generateBreadCrumData\",value:function generateBreadCrumData(obj){var breadCrumbData=[];if(this.state.masterData&&this.state.masterData.filterStorageCategory){breadCrumbData.push({\"label\":\"IDS_STORAGECATEGORY\",\"value\":obj.selectedStorageCategoryName&&obj.selectedStorageCategoryName!==null?obj.selectedStorageCategoryName:\"NA\"}// ,\n// {\n//     \"label\": \"IDS_STORAGECATEGORYLOCATION\",\n//     \"value\": obj.selectedSampleStorageLocation &&\n//         obj.selectedSampleStorageLocation.ssamplestoragelocationname !== null ?\n//         obj.selectedSampleStorageLocation.ssamplestoragelocationname : \"NA\"\n// },\n// {\n//     \"label\": \"IDS_STORAGECATEGORYVERSION\",\n//     \"value\": obj.selectedSampleStorageVersion &&\n//         obj.selectedSampleStorageVersion.nversionno !== null ?\n//         obj.selectedSampleStorageVersion.nversionno : \"NA\"\n// }\n);}return breadCrumbData;}},{key:\"getSampleStorageLocation\",value:function getSampleStorageLocation(inputData,fieldName,comboData){var _this3=this;var selectedRecordFilter=this.state.selectedRecordFilter||{};var inputParamData={};this.setState({loading:true});if(fieldName==='nsamplestoragelocationcode'){inputParamData={nstoragecategorycode:selectedRecordFilter['nstoragecategorycode'].value,nsamplestoragelocationcode:comboData.value,userinfo:inputData.userinfo};}else{inputParamData={nstoragecategorycode:comboData.value,userinfo:inputData.userinfo};}var urlArray=[];var url1=rsapi.post(\"samplestoragelistpreperation/getsamplestoragemapping\",inputParamData);urlArray=[url1];Axios.all(urlArray).then(function(response){var _this3$state=_this3.state,storageLocationOptions=_this3$state.storageLocationOptions,sampleStorageVersionOptions=_this3$state.sampleStorageVersionOptions;var sampleStorageLocationList=constructOptionList(response[0].data.sampleStorageLocation||[],\"nsamplestoragelocationcode\",\"ssamplestoragelocationname\",undefined,undefined,undefined);storageLocationOptions=sampleStorageLocationList.get(\"OptionList\");var sampleStorageVersionList=constructOptionList(response[0].data.sampleStorageVersion||[],\"nsamplestorageversioncode\",\"nversionno\",undefined,undefined,undefined);sampleStorageVersionOptions=sampleStorageVersionList.get(\"OptionList\");selectedRecordFilter=_objectSpread(_objectSpread({},selectedRecordFilter),{},{nsamplestoragelocationcode:storageLocationOptions.length>0?storageLocationOptions[0]:[],nsamplestorageversioncode:sampleStorageVersionOptions.length>0?sampleStorageVersionOptions[0]:[]});_this3.setState({storageLocationOptions:storageLocationOptions,sampleStorageVersionOptions:sampleStorageVersionOptions,selectedRecordFilter:_objectSpread(_objectSpread({},selectedRecordFilter),{},_defineProperty({},fieldName,comboData)),loading:false});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this3.setState({loading:false});});}},{key:\"addSampleStorageMapping\",value:function addSampleStorageMapping(){var _this4=this;this.setState({loading:true});var selectedRecord=this.state.selectedRecord;var inputParamData={// nstoragecategorycode: this.state.selectedRecordFilter[\"nstoragecategorycode\"].value,\nnsamplestoragelocationcode:this.state.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode,// nsamplestorageversioncode: this.state.selectedRecordFilter[\"nsamplestorageversioncode\"].value,\nuserinfo:this.props.Login.userInfo};var urlArray=[];var url1=rsapi.post(\"samplestoragelistpreperation/addSampleStorageMapping\",inputParamData);var url2=rsapi.post(\"product/getProduct\",{'userinfo':this.props.Login.userInfo});var url3=rsapi.post(\"containertype/getContainerType\",{'userinfo':this.props.Login.userInfo});urlArray=[url1,url2];Axios.all(urlArray).then(function(response){var storageMappingMap=constructOptionList(response[0].data['samplestoragecontainerpath']||[],\"nsamplestoragecontainerpathcode\",\"scontainerpath\",undefined,undefined,true);var storageMappingMapList=storageMappingMap.get(\"OptionList\");var containerStructure=response[0].data['containerStructure'];var containerTypeMap=constructOptionList(response[0].data['containerType']||[],\"ncontainertypecode\",\"scontainertype\",undefined,undefined,true);var containerTypeList=containerTypeMap.get(\"OptionList\");var directionmasterMap=constructOptionList(response[0].data['directionmaster']||[],\"ndirectionmastercode\",\"sdirection\",undefined,undefined,true);var directionmasterList=directionmasterMap.get(\"OptionList\");var containerstructureMap=constructOptionList(response[0].data['containerStructure']||[],\"ncontainerstructurecode\",\"scontainerstructurename\",undefined,undefined,true);var containerstructureList=containerstructureMap.get(\"OptionList\");var productMap=constructOptionList(response[1].data['Product']||[],\"nproductcode\",\"sproductname\",undefined,undefined,true);var productList=productMap.get(\"OptionList\");_this4.setState({openModal:true,selectedRecord:_objectSpread(_objectSpread({},selectedRecord),{},{storageMappingMapOptions:storageMappingMapList,productOptions:productList,containerTypeOptions:containerTypeList,directionmasterOptions:directionmasterList,// ncontainertypecode: containerTypeList[0],\n// containerStructureOptions: containerstructureList,\n// ncontainerstructurecode: containerstructureList[0],\nnrow:containerStructure.length>0?containerStructure[0].nrow:1,ncolumn:containerStructure.length>0?containerStructure[0].ncolumn:1,isInitialRender:true}),openSpreadSheet:false,operation:'create',loading:false});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this4.setState({loading:false});});}},{key:\"getprojectbarcodeconfig\",value:function getprojectbarcodeconfig(comboData){var _this5=this;var inputParamData={};this.setState({loading:true});inputParamData={nprojecttypecode:comboData.value,userinfo:this.props.Login.userInfo};var urlArray=[];var url1=rsapi.post(\"samplestoragelistpreperation/getProjectbarcodeconfig\",inputParamData);urlArray=[url1];Axios.all(urlArray).then(function(response){var masterData=_this5.state.masterData;var submittedselectedRecord=_this5.state.submittedselectedRecord;if(_this5.state.selectedProjectType.value!==comboData.value){masterData=_objectSpread(_objectSpread({},masterData),{},{samplestoragelistpreperation:[]});submittedselectedRecord={};}_this5.setState({masterData:masterData,submittedselectedRecord:submittedselectedRecord,selectedProjectTypeList:sortData(response[0].data.selectedProjectTypeList),selectedProjectType:{label:comboData.label,value:comboData.value},selectedRecord:{nprojecttypecode:{label:comboData.label,value:comboData.value}},loading:false});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this5.setState({loading:false});});}},{key:\"getContainerStructure\",value:function getContainerStructure(inputData,fieldName,comboData){var _this6=this;var inputParamData={};this.setState({loading:true});inputParamData={ncontainertypecode:comboData.value,userinfo:inputData.userinfo};var urlArray=[];var url1=rsapi.post(\"samplestoragelistpreperation/getContainerStructure\",inputParamData);urlArray=[url1];Axios.all(urlArray).then(function(response){var _this6$state=_this6.state,containerStructureOptions=_this6$state.containerStructureOptions,selectedRecord=_this6$state.selectedRecord;var containerStructureList=constructOptionList(response[0].data.containerStructure||[],\"ncontainerstructurecode\",\"scontainerstructurename\",undefined,undefined,undefined);containerStructureOptions=containerStructureList.get(\"OptionList\");selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{nrow:containerStructureOptions.length>0?containerStructureOptions[0].item.nrow:1,ncolumn:containerStructureOptions.length>0?containerStructureOptions[0].item.ncolumn:1,ncontainerstructurecode:containerStructureOptions.length>0?containerStructureOptions[0]:[],containerStructureOptions:containerStructureOptions.length>0?_toConsumableArray(containerStructureOptions):[]});_this6.setState({selectedRecord:_objectSpread(_objectSpread({},selectedRecord),{},_defineProperty({},fieldName,comboData)),loading:false});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this6.setState({loading:false});});}},{key:\"getSelectedBarcodeData\",value:function getSelectedBarcodeData(inputParam){var _this7=this;this.setState({loading:true});var selectedRecord=this.state.selectedRecord||{};var urlArray=[];var url1=rsapi.post(\"/samplestoragelistpreperation/getSelectedBarcodeData\",{nprojecttypecode:this.state.selectedProjectType.value,spositionvalue:inputParam.spositionvalue});urlArray=[url1];Axios.all(urlArray).then(function(response){_this7.setState({selectedBarcodeValue:_objectSpread({},response[0].data['selectedBarcodeValue']),loading:false});}).catch(function(error){_this7.setState({loading:false});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});}},{key:\"getDynamicFilterExecuteData\",value:function getDynamicFilterExecuteData(nflag){var _this8=this;var selectedRecord=this.state.selectedRecord||{};if(nflag===2?true:selectedRecord.filterquery&&selectedRecord.filterquery!==\"\"){this.setState({loading:true});var obj={// ...inputParam.component, \nlabel:'samplestoragelistpreperation',valuemember:'nsamplestoragetransactioncode',filterquery:nflag===2?this.state.submittedselectedRecord.filterquery+\" and nprojecttypecode=\"+this.state.selectedProjectType.value:selectedRecord.filterquery+\" and nprojecttypecode=\"+this.state.selectedProjectType.value// , source: 'view_samplelistprep_' + this.state.selectedProjectType.value\n,source:'view_samplelistprep_',userinfo:this.props.Login.userInfo,nprojecttypecode:this.state.selectedProjectType.value};var urlArray=[];var url1=rsapi.post(\"/samplestoragelistpreperation/getdynamicfilterexecutedata\",obj);urlArray=[url1];Axios.all(urlArray).then(function(response){var masterData=_this8.state.masterData;masterData=_objectSpread(_objectSpread({},masterData),response[0].data);_this8.setState({masterData:_objectSpread({},masterData),loading:false,openModal:false,isFilterPopup:false,submittedselectedRecord:nflag===2?_objectSpread({},_this8.state.submittedselectedRecord):_objectSpread({},selectedRecord),selectedRecord:{},displayQuery:_this8.state.tree?QbUtils.queryString(_this8.state.tree,_this8.state.config,true):\"\"});}).catch(function(error){_this8.setState({loading:false});if(error.response.status===500){toast.error(error.message);}else{toast.info(error.response.data.rtn);}});}else{toast.warn(this.props.intl.formatMessage({id:\"IDS_SELECTAFILTER\"}));}}// getDynamicFilterExecuteData(nflag) {\n//     this.setState({ loading: true })\n//     let selectedRecord = this.state.selectedRecord || {};\n//     let obj = {// ...inputParam.component, \n//         label: 'samplestoragelistpreperation', valuemember: 'nsamplestoragetransactioncode',\n//         filterquery:   \n//         selectedRecord.filterquery, source: 'view_sampleretrieval', userinfo: this.props.Login.userInfo\n//     }\n//     let urlArray = [];\n//     const url1 = rsapi.post(\"/samplestoragelistpreperation/getdynamicfilterexecutedata\", obj);\n//     urlArray = [url1];\n//     Axios.all(urlArray)\n//         .then(response => {\n//             console.log(response)\n//             let masterData = this.state.masterData\n//             masterData = { ...masterData, ...response[0].data }\n//             this.setState({\n//                 masterData: { ...masterData },\n//                 loading: false,\n//                 openModal: false,\n//                 submittedselectedRecord: nflag === 2 ?\n//                     { ...this.state.submittedselectedRecord }\n//                     :\n//                     { ...selectedRecord }\n//                 ,\n//                 isFilterPopup: false,\n//                 selectedRecord: {}\n//             })\n//         })\n//         .catch(error => {\n//             this.setState({\n//                 loading: false\n//             });\n//             if (error.response.status === 500) {\n//                 toast.error(error.message);\n//             }\n//             else {\n//                 toast.info(error.response.data.rtn);\n//             }\n//         })\n// }\n},{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){if(this.state.openModal&&nextState.isInitialRender===false&&nextState.selectedRecord!==this.state.selectedRecord){return false;}else if(this.state.openModal&&nextState.isInitialRender===false&&nextState.sheetData!==this.state.sheetData){return false;}else{return true;}}},{key:\"gridfillingColumn\",value:function gridfillingColumn(data){//  const tempArray = [];\n// const temparray = data && data.map((option) => {\n//     return { \"idsName\": option.sfieldname, \"dataField\": option.sfieldname, \"width\": \"200px\" };\n// });\n// return temparray;\nvar temparray1=[{\"idsName\":\"IDS_SAMPLEID\",\"dataField\":\"spositionvalue\",\"width\":\"200px\",\"staticField\":true},{\"idsName\":\"IDS_POSITION\",\"dataField\":\"sposition\",\"width\":\"200px\",\"staticField\":true},{\"idsName\":\"IDS_QUANTITY\",\"dataField\":\"nquantity\",\"width\":\"200px\",\"staticField\":true},{\"idsName\":\"IDS_UNIT\",\"dataField\":\"sunitname\",\"width\":\"200px\",\"staticField\":true}];var temparray2=data&&data.map(function(option){return{\"idsName\":option.sfieldname,\"dataField\":option.sfieldname,\"width\":\"200px\"};});var newArray=[].concat(temparray1,_toConsumableArray(temparray2));return newArray;}},{key:\"render\",value:function render(){var _this9=this;var addId=this.state.controlMap.has(\"Add samplestoragelistpreperation\")&&this.state.controlMap.get(\"Add samplestoragelistpreperation\").ncontrolcode;var editId=this.state.controlMap.has(\"Edit SampleStorageLocation\")&&this.state.controlMap.get(\"Edit SampleStorageLocation\").ncontrolcode;var deleteId=this.state.controlMap.has(\"Delete SampleStorageLocation\")&&this.state.controlMap.get(\"Delete SampleStorageLocation\").ncontrolcode;var copyId=this.state.controlMap.has(\"Copy SampleStorageLocation\")&&this.state.controlMap.get(\"Copy SampleStorageLocation\").ncontrolcode;var approveId=this.state.controlMap.has(\"Approve SampleStorageLocation\")&&this.state.controlMap.get(\"Approve SampleStorageLocation\").ncontrolcode;var extractedColumnList=this.state.selectedProjectTypeList?this.gridfillingColumn(this.state.selectedProjectTypeList):[];var fields={};if(extractedColumnList.length>0){extractedColumnList.map(function(field){field.hasOwnProperty(\"staticField\")?fields=_objectSpread(_objectSpread({},fields),{},_defineProperty({},field.dataField,{\"label\":_this9.props.intl.formatMessage({id:field.idsName}),\"type\":\"text\",\"valueSources\":[\"value\",\"func\"],\"mainWidgetProps\":{\"valueLabel\":\"Name\",\"valuePlaceholder\":_this9.props.intl.formatMessage({id:field.idsName})}})):fields=_objectSpread(_objectSpread({},fields),{},_defineProperty({},'\"'+field.dataField+'\"',{\"label\":field.dataField,\"type\":\"text\",\"valueSources\":[\"value\",\"func\"],\"mainWidgetProps\":{\"valueLabel\":\"Name\",\"valuePlaceholder\":field.dataField}}));});}var filterParam={inputListName:\"sampleStorageLocation\",selectedObject:\"selectedSampleStorageLocation\",primaryKeyField:\"nsamplestoragelocationcode\",fetchUrl:\"samplestoragelistpreperation/getActiveSampleStorageMappingById\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,searchFieldList:[\"ssamplestoragelocationname\"]};var breadCrumbData=this.state.filterData||[];var confirmMessage=new ConfirmMessage();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Preloader,{loading:this.state.loading}),/*#__PURE__*/ //this.state.retrievalType === 1 ?\nReact.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ListWrapper,{className:\"client-list-content\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(FormSelectSearch,{name:\"nprojecttypecode\",as:\"select\",onChange:function onChange(event){return _this9.onComboChange(event,'nprojecttypecode');},formLabel:this.props.intl.formatMessage({id:\"IDS_PROJECTTYPE\"}),isMandatory:this.state.selectedRecord[\"nneedposition\"],value:this.state.selectedProjectType?this.state.selectedProjectType||[]:[],options:this.state.masterData&&this.state.masterData.projectbarcodeconfig||[],optionId:\"value\",optionValue:\"label\",isMulti:false,isDisabled:false,isSearchable:false,isClearable:false}))),this.state.selectedProjectTypeList&&/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(DataGrid// isDownloadPDFRequired={this.state.masterData && this.state.masterData.samplestoragelistpreperation &&\n//     this.processWithGroups(this.state.masterData.samplestoragelistpreperation || [],\n//         this.state.dataStateChange ? this.state.dataStateChange : {\n//             take: 10,\n//             skip: 0\n//         }).data.length > 0 ?\n//     true : false}\n// isDownloadExcelRequired={this.state.masterData && this.state.masterData.samplestoragelistpreperation &&\n//     this.processWithGroups(this.state.masterData.samplestoragelistpreperation || [],\n//         this.state.dataStateChange ? this.state.dataStateChange : {\n//             take: 10,\n//             skip: 0\n//         }).data.length > 0 ?\n//     true : false}\n,{isCustomButton:true,customButtonlist:[{label:'IDS_SEARCH',id:{},onClick:function onClick(){return _this9.opensearch();},controlname:'faSearch'}],isRefreshRequired:false// onGroupChange={this.handleGroupChange}\n,primaryKeyField:'nsamplestoragetransactioncode',data:this.state.masterData&&this.state.masterData.samplestoragelistpreperation,dataResult:this.state.masterData&&this.state.masterData.samplestoragelistpreperation?process(this.state.masterData.samplestoragelistpreperation||[],this.state.dataStateChange?this.state.dataStateChange:{skip:0,take:10}):[]// this.processWithGroups(this.state.masterData.samplestoragelistpreperation || [],\n//     this.state.dataStateChange ? this.state.dataStateChange : {\n//         take: 10,\n//         skip: 0\n//     })\n,dataState:this.state.dataStateChange?this.state.dataStateChange:{skip:0,take:10},dataStateChange:this.dataStateChange,extractedColumnList:extractedColumnList,controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,userInfo:this.props.Login.userInfo,deleteRecord:this.deleteRecord,addRecord:function addRecord(){return _this9.openStorageMapping();},pageable:true,scrollable:'scrollable'// isComponent={true}\n,gridHeight:'600px'// isActionRequired={true}\n,isToolBarRequired:true// actionIcons={\n//     [{\n//         title: this.props.intl.formatMessage({ id: \"IDS_ADDSAMPLE\" }),\n//         controlname: \"faPenSquare\",\n//         hidden: false,\n//         objectName: \"add\",\n//         onClick: (param) => this.addSample(param, 1)\n//     }]}\n}),\" \"))))),this.state.openModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.state.openModal,closeModal:this.closeModal,hideSave:true,showSubmit:true,size:this.state.openSpreadSheet||this.state.isFilterPopup?'xl':\"\",operation:\"\",inputParam:this.props.Login.inputParam,screenName:this.state.isFilterPopup?\"\":this.state.isMultiSampleAdd?this.props.intl.formatMessage({id:\"IDS_SAMPLESTORAGELOCATION\"}):this.state.editedsheetData.scontainerpath,onSaveClick:this.state.isFilterPopup?this.getDynamicFilterExecuteData.bind(this):this.onSampleMappingSaveClick,esign:this.props.Login.loadEsign// className={\"wide-popup\"}\n,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},addComponent:this.state.isFilterPopup?/*#__PURE__*/React.createElement(FilterQueryBuilder,{fields:fields,isSampleStorage:true,queryArray:this.state.queryArray,skip:this.state.kendoSkip,take:this.state.kendoTake,onChange:this.onChange,tree:this.props.Login.tree!==undefined?this.props.Login.tree:this.state.selectedRecord.tree,gridColumns:this.slideList,filterData:this.props.Login.slideResult||[],handlePageChange:this.handlePageChangeFilter,static:true,userInfo:this.props.Login.userInfo,updateStore:this.props.updateStore}):this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,formatMessage:this.props.intl.formatMessage,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.state.openSpreadSheet?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MatrixComponent,{Rows:this.state.Rows||1,userInfo:this.props.Login.userInfo,columns:this.state.columns||1,selectedRecord:this.state.selectedRecord.sheetData||{},sheetData:this.state.sheetData||{},isMultiSampleAdd:this.state.isMultiSampleAdd,childSheetDataChange:this.childSheetDataChange,editedsheetData:this.state.editedsheetData,multipleSheetData:this.state.masterData&&this.state.masterData.samplestoragelistpreperation&&process(this.state.masterData.samplestoragelistpreperation||[],this.state.dataStateChange?this.state.dataStateChange:{skip:0,take:10}).data})):/*#__PURE__*/React.createElement(AddSampleStorageMapping,{operation:this.state.operation,selectedRecordFilter:this.state.selectedRecordFilter,onInputChange:function onInputChange(e){return _this9.onInputChange(e);},onComboChange:this.onComboChange,selectedRecord:this.state.selectedRecord||{},childDataChange:this.childDataChange,userInfo:this.props.Login.userInfo})}));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==\"\"&&props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}return null;}}]);return SampleStorageListPreperation;}(Component);var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};export default connect(mapStateToProps,{callService:callService})(injectIntl(SampleStorageListPreperation));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/basemaster/SampleStorageListPreperation.jsx"],"names":["React","Component","connect","injectIntl","FormattedMessage","Row","Col","Card","Nav","FormGroup","FormLabel","Form","Button","FormControl","FontAwesomeIcon","PerfectScrollbar","faTrashAlt","faCopy","faPencilAlt","faSync","faPlus","faThumbsUp","faBoxOpen","faBox","faLocationArrow","faFolderMinus","faFolder","faFolderOpen","faArrowRight","faSearch","faTimes","faArrowDown","faHandPointLeft","faArrowUp","faClone","faPuzzlePiece","faCalculator","faEye","toast","ListMaster","constructOptionList","getControlMap","onSaveMandatoryValidation","searchData","searchJsonData","showEsign","sortData","ReadOnlyText","ContentPanel","SearchIcon","FormSelectSearch","DataGrid","BasicConfig","BasicFuncs","Utils","QbUtils","SlideOutModal","callService","crudMaster","validateEsignCredential","updateStore","getSelectedSampleStorageLocation","filterColumnData","changeStorageCategoryFilter","openPropertyModal","editSampleStorageLocation","approveSampleStorageLocation","getSelectedSampleStorageVersion","fetchStorageCategory","copySampleStorageVersion","crudSampleStorageLocation","DEFAULT_RETURN","ListWrapper","MediaLabel","ProductList","uuid","TreeEditable","TreeViewEditable","getItemPath","mapTree","removeItems","ConfirmMessage","AddTreeview","AddTreeProperties","Splitter","TransactionListMaster","BreadcrumbComponent","SplitterLayout","StorageCategoryFilter","transactionStatus","Esign","TreeViewDragAnalyzer","moveTreeViewItem","ModalShow","rsapi","AddSampleStorageMapping","Axios","StorageMappingFilter","Preloader","TransactionListMasterJsonView","groupBy","process","MatrixComponent","FilterQueryBuilder","Grid","GridColumn","FormInput","SampleStorageListPreperation","props","dragOverCnt","isDragDrop","SEPARATOR","uniqueIDArr","countforTree","pointedItem","undefined","getitemPath","openModal","updateInfo","typeName","data","selectedRecord","loadTreeProperties","treeData","text","expanded","editable","root","id","operation","closeModal","loadEsign","Login","selectedId","state","setState","isInitialRender","isFilterPopup","onInputChange","event","target","type","name","checked","value","onSaveClick","saveType","formRef","onSaveProperties","openSpreadSheet","CRUDSampleStorageTransaction","editedsheetData","nsamplestoragemappingcode","isMultiSampleAdd","Object","keys","sheetData","map","join","toString","nsamplestoragelocationcode","JSON","stringify","sheetUpdate","userinfo","userInfo","onSaveSampleStorageTransaction","paneSizeChange","d","splitChangeWidthPercentage","handlePageChange","e","skip","take","handleDetailPageChange","openFilter","showFilter","closeFilter","reloadData","onFilterSubmit","onEditSampleStorageLocation","selectedSampleStorageVersion","editId","handleSearch","searchedTreeData","searchRef","current","isOnlyDraft","masterData","sampleStorageVersion","length","openStorageMapping","addId","addSampleStorageMapping","deletesamplestoragemapping","param","selectedSampleStorageLocation","addMultipleSample","loading","opensearch","submittedselectedRecord","addSample","nflag","urlArray","url1","post","samplestoragelistpreperation","item","all","then","response","parse","Rows","nrow","columns","ncolumn","catch","error","status","message","warn","onComboChange","comboData","fieldName","selectedRecordFilter","getSampleStorageLocation","nstoragecategorycode","getContainerStructure","ncontainertypecode","getprojectbarcodeconfig","containerpathCodeArray","inputParam","nsamplestoragetransactioncode","parseInt","nproductcode","ndirectionmastercode","ssamplestoragemappingname","nsamplestoragecontainerpathcode","containerpathsize","nneedposition","ncontainerstructurecode","nquantity","userRoleControlRights","nformcode","ncontrolcode","screenData","getsamplestoragetransaction","childDataChange","childSheetDataChange","getActiveSampleStorageMappingById","filterValue","filterParam","primaryKeyValue","searchedData","inputListName","primaryKeyField","isjsondata","searchFieldList","fetchUrl","fecthInputObject","sortField","sortOrder","intl","formatMessage","selectedObject","forEach","unchangeList","indexOf","modalName","inputParamData","object","selectedStorageCategoryName","sstoragecategoryname","filterData","generateBreadCrumData","onSampleMappingSaveClick","mandatoryFields","dataStateChange","dataState","approveSampleStorageMapping","fetchRecord","url2","url3","storageMappingMap","storageMappingMapList","get","containerStructure","containerTypeMap","containerTypeList","directionmasterMap","directionmasterList","containerstructureMap","containerstructureList","productMap","productList","editedObject","editsampleStorageMapping","unshift","label","scontainerpath","sdirection","sproductname","scontainertype","scontainerstructurename","directionmasterOptions","storageMappingMapOptions","productOptions","containerTypeOptions","containerStructureOptions","retrievalType","onInputOnChange","handlePageChangeFilter","kendoSkip","kendoTake","onChange","immutableTree","config","sqlFormat","tree","processWithGroups","aggregates","field","aggregate","groups","group","newDataState","validateEsign","inputData","sreason","nreasoncode","spredefinedreason","password","title","children","toggleAction","treeDataView","toggleActionView","size","scrollable","Map","settings","fields","createRef","dragClue","confirmMessage","previousProps","previousState","storageCategoryOptions","controlMap","storageLocationOptions","sampleStorageVersionOptions","selectedProjectType","selectedProjectTypeList","bool","sampleStorageLocation","queryBuilderFreezer","push","ssamplestoragelocationname","values","filterStorageCategory","filterStorageCategorylist","selectedStorageCategory","filter","sampleStorageLocationList","sampleStorageVersionList","nsamplestorageversioncode","sprojecttypename","nprojecttypecode","projectbarcodeconfig","parentHeight","height","clientHeight","firstPane","obj","breadCrumbData","containerStructureList","spositionvalue","selectedBarcodeValue","info","rtn","filterquery","valuemember","source","displayQuery","queryString","nextProps","nextState","temparray1","temparray2","option","sfieldname","newArray","has","deleteId","copyId","approveId","extractedColumnList","gridfillingColumn","hasOwnProperty","dataField","idsName","onClick","controlname","deleteRecord","getDynamicFilterExecuteData","bind","masterStatus","queryArray","slideList","slideResult","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, FormattedMessage } from 'react-intl';\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel, Form, Button, FormControl } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { faTrashAlt, faCopy, faPencilAlt, faSync, faPlus, faThumbsUp, faBoxOpen, faBox, faLocationArrow, faFolderMinus, faFolder, faFolderOpen, faArrowRight, faSearch, faTimes, faArrowDown, faHandPointLeft, faArrowUp, faClone, faPuzzlePiece, faCalculator, faEye } from '@fortawesome/free-solid-svg-icons';\r\nimport { toast } from 'react-toastify';\r\nimport ListMaster from '../../components/list-master/list-master.component';\r\nimport { constructOptionList, getControlMap, onSaveMandatoryValidation, searchData, searchJsonData, showEsign, sortData } from '../../components/CommonScript';\r\nimport { ReadOnlyText, ContentPanel, SearchIcon } from '../../components/App.styles';\r\n//import SortableTree from 'react-sortable-tree'; \r\nimport FormSelectSearch from '../../components/form-select-search/form-select-search.component';\r\n\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport {\r\n    BasicConfig, BasicFuncs,\r\n    Utils as QbUtils,\r\n} from \"@react-awesome-query-builder/ui\";\r\n\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, getSelectedSampleStorageLocation, filterColumnData, changeStorageCategoryFilter,\r\n    openPropertyModal, editSampleStorageLocation, approveSampleStorageLocation, getSelectedSampleStorageVersion, fetchStorageCategory, copySampleStorageVersion,\r\n    crudSampleStorageLocation\r\n} from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport { MediaLabel, ProductList } from '../product/product.styled';\r\n// import ReactTooltip from 'react-tooltip';\r\nimport { uuid } from \"uuidv4\";\r\nimport TreeEditable from \"../../components/form-tree-editable/TreeEditable\";\r\nimport TreeViewEditable from \"../../components/form-tree-editable/form-tree-editable.component\";\r\nimport { getItemPath, mapTree, removeItems } from \"@progress/kendo-react-treelist\";\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport AddTreeview from './AddTreeview';\r\nimport AddTreeProperties from './AddTreeProperties';\r\nimport { Splitter } from '@progress/kendo-react-layout';\r\nimport TransactionListMaster from '../../components/TransactionListMaster';\r\nimport BreadcrumbComponent from '../../components/Breadcrumb.Component';\r\nimport SplitterLayout from 'react-splitter-layout';\r\nimport StorageCategoryFilter from './StorageCategoryFilter';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\nimport Esign from '../audittrail/Esign';\r\nimport { TreeViewDragAnalyzer, moveTreeViewItem } from '@progress/kendo-react-treeview';\r\nimport ModalShow from '../../components/ModalShow';\r\nimport rsapi from '../../rsapi';\r\nimport AddSampleStorageMapping from './AddSampleStorageMapping';\r\nimport Axios from 'axios';\r\nimport StorageMappingFilter from './StorageMappingFilter';\r\nimport Preloader from '../../components/preloader/preloader.component';\r\nimport TransactionListMasterJsonView from '../../components/TransactionListMasterJsonView';\r\n\r\nimport { groupBy, process } from '@progress/kendo-data-query';\r\n//import Spreadsheet from '../../components/Spreadsheet/Spreadsheet';\r\nimport MatrixComponent from '../../components/MatrixComponent';\r\nimport FilterQueryBuilder from '../../components/FilterQueryBuilder';\r\nimport { Grid, GridColumn } from '@progress/kendo-react-grid';\r\nimport FormInput from '../../components/form-input/form-input.component';\r\n\r\n\r\nclass SampleStorageListPreperation extends Component {\r\n    dragOverCnt = 0;\r\n    isDragDrop = false;\r\n    SEPARATOR = '_';\r\n    uniqueIDArr = [];\r\n    countforTree = 0;\r\n    pointedItem = undefined\r\n    getitemPath = {};\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            retrievalType: 1,\r\n            // extractedColumnList: [   \r\n            //     { \"idsName\": \"IDS_SAMPLESTORAGELOCATION\", \"dataField\": \"ssamplestoragelocationname\", \"width\": \"200px\" },\r\n            //     { \"idsName\": \"IDS_SAMPLESTORAGEPATH\", \"dataField\": \"scontainerpath\", \"width\": \"450px\" },\r\n            //     { \"idsName\": \"IDS_POSITION\", \"dataField\": \"sposition\", \"width\": \"100px\" },\r\n            //     { \"idsName\": \"IDS_SAMPLEID\", \"dataField\": \"spositionvalue\", \"width\": \"100px\" },\r\n            //     //{ \"idsName\": \"IDS_PROJECTTYPE\", \"dataField\": \"sprojecttypename\", \"width\": \"100px\" },\r\n            //     //{ \"idsName\": \"IDS_PRODUCT\", \"dataField\": \"sproductname\", \"width\": \"100px\" },\r\n            //     { \"idsName\": \"IDS_PARTICIPANTS\", \"dataField\": \"sparticipantid\", \"width\": \"100px\" },\r\n            //     //{ \"idsName\": \"IDS_VISITNUMBER\", \"dataField\": \"svisitnumber\", \"width\": \"100px\" },\r\n            //     { \"dataField\": \"svisitnumbershortcode\", \"idsName\": \"IDS_VISITNUMBERCODE\", \"width\": \"100px\" }, \r\n            //     { \"dataField\": \"sprojectshortcode\", \"idsName\": \"IDS_PROJECTTYPECODE\" , \"width\": \"100px\"} ,\r\n            //     { \"dataField\": \"sproductshortcode\", \"idsName\": \"IDS_PRODUCTCODE\", \"width\": \"100px\" } ,\r\n            //     { \"dataField\": \"ssampledonorshortcode\", \"idsName\": \"IDS_SAMPLEDONORCODE\", \"width\": \"100px\" }  ,\r\n            //     { \"dataField\": \"scollectiontubetypeshortcode\", \"idsName\": \"IDS_COLLECTIONTUBETYPECODE\", \"width\": \"100px\" }\r\n            // ],\r\n            sheetData: {},\r\n            selectedRecordFilter: {},\r\n            treeData: [{ title: 'Chicken', children: [{ title: 'Egg' }] }],\r\n            toggleAction: false,\r\n            treeDataView: undefined,\r\n            toggleActionView: false,\r\n            treeData: [\r\n                {\r\n                    //  text: \"root\",\r\n                    text: this.props.intl.formatMessage({ id: \"IDS_ROOT\" }),\r\n                    expanded: true,\r\n                    editable: true,\r\n                    root: true,\r\n                    id: uuid(),\r\n                }],\r\n            panes: [{\r\n                size: '50%',\r\n                scrollable: false\r\n            }],\r\n            selectedRecord: {},\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            skip: 0,\r\n            detailSkip: 0,\r\n            detailTake: 10,\r\n            take: this.props.Login.settings ?\r\n                this.props.Login.settings[3] : 25,\r\n            splitChangeWidthPercentage: 22,\r\n            selectedItem: undefined,\r\n            loading: false,\r\n            dataStateChange: {\r\n                take: 10,\r\n                skip: 0,\r\n                // group: [\r\n                //     {\r\n                //         field: \"ssamplestoragelocationname\",\r\n                //     },\r\n                // ],\r\n            }\r\n        };\r\n        let fields = {};\r\n        // if (this.state.extractedColumnList) {\r\n        //     // let newArr=[...[  { \"dataField\": \"svisitnumbershortcode\", \"idsName\": \"IDS_VISITNUMBERCODE\", \"width\": \"100px\" }, \r\n        //     // { \"dataField\": \"sprojectshortcode\", \"idsName\": \"IDS_PROJECTTYPECODE\" , \"width\": \"100px\"} ,\r\n        //     // { \"dataField\": \"sproductshortcode\", \"idsName\": \"IDS_PRODUCTCODE\", \"width\": \"100px\" } ,\r\n        //     // { \"dataField\": \"ssampledonorshortcode\", \"idsName\": \"IDS_SAMPLEDONORCODE\", \"width\": \"100px\" }  ,\r\n        //     // { \"dataField\": \"scollectiontubetypeshortcode\", \"idsName\": \"IDS_COLLECTIONTUBETYPECODE\", \"width\": \"100px\" }]\r\n        //     // ,...this.state.extractedColumnList]\r\n        //     this.state.extractedColumnList.map(field => {\r\n        //         if (field.dataField !== 'ssamplestoragelocationname' && field.dataField !== 'sproductname'\r\n        //             && field.dataField !== 'sprojecttypename' && field.dataField !== 'svisitnumber') {\r\n        //             fields = {\r\n        //                 ...fields,\r\n        //                 [field.dataField]: {\r\n        //                     \"label\":\r\n        //                         this.props.intl.formatMessage({\r\n        //                             id: field.idsName,\r\n        //                         })\r\n        //                     ,\r\n        //                     \"type\": field.dataField === 'navailablespace' ? \"number\" : \"text\",\r\n        //                     \"valueSources\": [\"value\", \"func\"],\r\n\r\n        //                     \"mainWidgetProps\": {\r\n        //                         \"valueLabel\": \"Name\",\r\n        //                         \"valuePlaceholder\": this.props.intl.formatMessage({\r\n        //                             id: field.idsName\r\n        //                         })\r\n        //                     }\r\n        //                 }\r\n        //             }\r\n        //         }\r\n        //     });\r\n        // }\r\n        this.state = { ... this.state, 'fields': fields }\r\n        this.searchRef = React.createRef();\r\n        this.dragClue = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n    }\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== \"\" && props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        return null;\r\n    }\r\n    componentDidUpdate(previousProps, previousState) {\r\n        let { filterData, storageCategoryOptions,\r\n            selectedRecord, controlMap,\r\n            userRoleControlRights, storageLocationOptions,\r\n            sampleStorageVersionOptions, masterData, selectedRecordFilter, fields, selectedProjectType, selectedProjectTypeList } = this.state\r\n        let bool = false;\r\n        ///////////////////////////////\r\n        if (this.props.Login.masterData.sampleStorageLocation !== previousProps.Login.masterData.sampleStorageLocation) {\r\n            let queryBuilderFreezer = [];\r\n            bool = true;\r\n            this.props.Login.masterData.sampleStorageLocation && this.props.Login.masterData.sampleStorageLocation.map(\r\n                (item) => queryBuilderFreezer.push({ \"value\": item.nsamplestoragelocationcode, \"title\": item.ssamplestoragelocationname })\r\n            )\r\n            fields = {\r\n                ...fields,\r\n                'nsamplestoragelocationcode': {\r\n                    \"label\": this.props.intl.formatMessage({\r\n                        id: \"IDS_SAMPLESTORAGELOCATIONNAME\",\r\n                    }),\r\n                    \"type\": \"select\",\r\n                    \"valueSources\": [\"value\"],\r\n                    \"fieldSettings\": {\r\n                        \"listValues\": queryBuilderFreezer\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n        // if (this.props.Login.masterData.sampleType !== previousProps.Login.masterData.sampleType) {\r\n        //     let queryBuilderFreezer = [];\r\n        //     bool = true;\r\n        //     this.props.Login.masterData.sampleType && this.props.Login.masterData.sampleType.map(\r\n        //         (item) => queryBuilderFreezer.push({ \"value\": item.nproductcode, \"title\": item.sproductname })\r\n        //     )\r\n        //     fields = {\r\n        //         ...fields,\r\n        //         'nproductcode': {\r\n        //             \"label\": this.props.intl.formatMessage({\r\n        //                 id: \"IDS_PRODUCT\",\r\n        //             }),\r\n        //             \"type\": \"select\",\r\n        //             \"valueSources\": [\"value\"],\r\n        //             \"fieldSettings\": {\r\n        //                 \"listValues\": queryBuilderFreezer\r\n        //             }\r\n        //         }\r\n        //     }\r\n\r\n        // }\r\n        // if (this.props.Login.masterData.ProjectType !== previousProps.Login.masterData.ProjectType) {\r\n        //     let queryBuilderFreezer = [];\r\n        //     bool = true;\r\n        //     this.props.Login.masterData.ProjectType && this.props.Login.masterData.ProjectType.map(\r\n        //         (item) => queryBuilderFreezer.push({ \"value\": item.nprojecttypecode, \"title\": item.sprojecttypename })\r\n        //     )\r\n        //     fields = {\r\n        //         ...fields,\r\n        //         'nprojecttypecode': {\r\n        //             \"label\": this.props.intl.formatMessage({\r\n        //                 id: \"IDS_PROJECTTYPE\",\r\n        //             }),\r\n        //             \"type\": \"select\",\r\n        //             \"valueSources\": [\"value\"],\r\n        //             \"fieldSettings\": {\r\n        //                 \"listValues\": queryBuilderFreezer\r\n        //             }\r\n        //         }\r\n        //     }\r\n\r\n        // } if (this.props.Login.masterData.VisitNumber !== previousProps.Login.masterData.VisitNumber) {\r\n        //     let queryBuilderFreezer = [];\r\n        //     bool = true;\r\n        //     this.props.Login.masterData.VisitNumber && this.props.Login.masterData.VisitNumber.map(\r\n        //         (item) => queryBuilderFreezer.push({ \"value\": item.nvisitnumbercode, \"title\": item.svisitnumber })\r\n        //     )\r\n        //     fields = {\r\n        //         ...fields,\r\n        //         'nvisitnumbercode': {\r\n        //             \"label\": this.props.intl.formatMessage({\r\n        //                 id: \"IDS_VISITNUMBER\",\r\n        //             }),\r\n        //             \"type\": \"select\",\r\n        //             \"valueSources\": [\"value\"],\r\n        //             \"fieldSettings\": {\r\n        //                 \"listValues\": queryBuilderFreezer\r\n        //             }\r\n        //         }\r\n        //     }\r\n\r\n        // }\r\n        ///////////////////////////////\r\n        if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n            bool = true;\r\n            userRoleControlRights = [];\r\n            if (this.props.Login.userRoleControlRights) {\r\n                this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                    userRoleControlRights.push(item.ncontrolcode))\r\n            }\r\n            controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n\r\n        }\r\n\r\n        if (this.props.Login.masterData.filterStorageCategory !== previousProps.Login.masterData.filterStorageCategory) {\r\n            bool = true;\r\n            const filterStorageCategorylist = constructOptionList(this.props.Login.masterData.filterStorageCategory || [], \"nstoragecategorycode\",\r\n                \"sstoragecategoryname\", undefined, undefined, undefined);\r\n            storageCategoryOptions = filterStorageCategorylist.get(\"OptionList\");\r\n            if (this.props.Login.masterData.selectedStorageCategory) {\r\n                selectedRecordFilter = {\r\n                    ...selectedRecordFilter,\r\n                    nstoragecategorycode: storageCategoryOptions.filter(item =>\r\n                        item.value === this.props.Login.masterData.selectedStorageCategory.nstoragecategorycode)[0]\r\n                }\r\n            }\r\n\r\n        }\r\n        if (this.props.Login.masterData.sampleStorageLocation !== previousProps.Login.masterData.sampleStorageLocation) {\r\n            bool = true;\r\n            const sampleStorageLocationList = constructOptionList(this.props.Login.masterData.sampleStorageLocation || [], \"nsamplestoragelocationcode\",\r\n                \"ssamplestoragelocationname\", undefined, undefined, undefined);\r\n            storageLocationOptions = sampleStorageLocationList.get(\"OptionList\");\r\n            if (this.props.Login.masterData.selectedSampleStorageLocation) {\r\n                selectedRecordFilter = {\r\n                    ...selectedRecordFilter,\r\n                    nsamplestoragelocationcode: storageLocationOptions.filter(item =>\r\n                        item.value === this.props.Login.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode)[0]\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n        if (this.props.Login.masterData.sampleStorageVersion !== previousProps.Login.masterData.sampleStorageVersion) {\r\n            bool = true;\r\n            const sampleStorageVersionList = constructOptionList(this.props.Login.masterData.sampleStorageVersion || [], \"nsamplestorageversioncode\",\r\n                \"nversionno\", undefined, undefined, undefined);\r\n            sampleStorageVersionOptions = sampleStorageVersionList.get(\"OptionList\");\r\n            if (this.props.Login.masterData.selectedSampleStorageVersion) {\r\n                selectedRecordFilter = {\r\n                    ...selectedRecordFilter,\r\n                    nsamplestorageversioncode: sampleStorageVersionOptions.filter(item =>\r\n                        item.value === this.props.Login.masterData.selectedSampleStorageVersion.nsamplestorageversioncode)[0]\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            bool = true;\r\n            masterData = this.props.Login.masterData;\r\n            selectedProjectType = {\r\n                label: this.props.Login.masterData.selectedProjectType &&\r\n                    this.props.Login.masterData.selectedProjectType.sprojecttypename, value:\r\n                    this.props.Login.masterData.selectedProjectType &&\r\n                    this.props.Login.masterData.selectedProjectType.nprojecttypecode\r\n            };\r\n            selectedProjectTypeList = this.props.Login.masterData.selectedProjectTypeList;\r\n            const filterStorageCategorylist = constructOptionList(this.props.Login.masterData.projectbarcodeconfig || [], \"nprojecttypecode\",\r\n                \"sprojecttypename\", undefined, undefined, undefined);\r\n            masterData['projectbarcodeconfig'] = filterStorageCategorylist.get(\"OptionList\");\r\n            if(masterData.samplestoragelistpreperation===undefined){\r\n                masterData['samplestoragelistpreperation']=[]\r\n            } \r\n            filterData = this.generateBreadCrumData(this.props.Login.masterData);\r\n\r\n        }\r\n        if (this.state.masterData !== previousState.masterData) {\r\n            bool = true;\r\n            filterData = this.generateBreadCrumData(this.state.masterData);\r\n\r\n        }\r\n\r\n\r\n        if (bool) {\r\n            this.setState({\r\n                storageCategoryOptions, filterData,\r\n                selectedRecord, controlMap,\r\n                userRoleControlRights, storageLocationOptions,\r\n                sampleStorageVersionOptions, masterData, selectedRecordFilter, fields, selectedProjectType, selectedProjectTypeList\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n\r\n    openModal = () => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                openModal: true, selectedRecord: {}, loadTreeProperties: false,\r\n                treeData: [\r\n                    {\r\n                        text: \"root\",\r\n                        expanded: true,\r\n                        editable: true,\r\n                        root: true,\r\n                        id: uuid(),\r\n                    },\r\n                ], operation: \"create\"\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    closeModal = () => {\r\n        // const updateInfo = {\r\n        //     typeName: DEFAULT_RETURN,\r\n        //     data: {\r\n        //         openModal: false, selectedRecord: {}\r\n        //     }\r\n        // }\r\n        // this.props.updateStore(updateInfo);\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedId = this.props.Login.selectedId;\r\n        let selectedRecord = this.state.selectedRecord; //this.props.Login.selectedRecord;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"Approve\" || this.props.Login.operation === \"copy\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n                selectedId = null;\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedId = null;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        // const updateInfo = {\r\n        //     typeName: DEFAULT_RETURN,\r\n        //     data: { openModal, loadEsign, selectedRecord, selectedId }\r\n        // }\r\n        // this.props.updateStore(updateInfo);\r\n        // this.getsamplestoragetransaction({}, this.props.Login.userInfo);\r\n        // if (!this.state.isFilterPopup) {\r\n        //     this.getDynamicFilterExecuteData()\r\n\r\n        // }\r\n        this.setState({\r\n            selectedRecord,\r\n            openModal: false, isInitialRender: true\r\n            , isFilterPopup: false\r\n        })\r\n    }\r\n    onInputChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === \"checkbox\") {\r\n            selectedRecord[event.target.name] = event.target.checked;\r\n        } else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    };\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        if (this.props.Login.loadTreeProperties === true) {\r\n            this.onSaveProperties(saveType, formRef);\r\n        } else if (this.state.openSpreadSheet) {\r\n            this.CRUDSampleStorageTransaction({\r\n                ...this.state.editedsheetData,\r\n                nsamplestoragemappingcode: this.state.isMultiSampleAdd ?\r\n                    Object.keys(this.state.sheetData).map(nsamplestoragemappingcode => nsamplestoragemappingcode).join(\",\")\r\n                    : this.state.editedsheetData.nsamplestoragemappingcode.toString(),\r\n                nsamplestoragelocationcode: this.state.editedsheetData.nsamplestoragelocationcode,\r\n                sheetData: JSON.stringify(this.state.sheetData ? this.state.sheetData : {}),\r\n                sheetUpdate: true,\r\n                userinfo: this.props.Login.userInfo,\r\n                isMultiSampleAdd: this.state.isMultiSampleAdd\r\n            }, 'create');\r\n        } else {\r\n            this.onSaveSampleStorageTransaction(saveType, formRef);\r\n        }\r\n    };\r\n\r\n\r\n    paneSizeChange = (d) => {\r\n        this.setState({\r\n            splitChangeWidthPercentage: d\r\n        })\r\n    }\r\n    handlePageChange = e => {\r\n        this.setState({\r\n            skip: e.skip,\r\n            take: e.take\r\n        });\r\n    };\r\n    handleDetailPageChange = e => {\r\n        this.setState({\r\n            skip: e.skip,\r\n            take: e.take\r\n        });\r\n    };\r\n    componentDidMount() {\r\n        if (this.parentHeight) {\r\n            const height = this.parentHeight.clientHeight;\r\n            this.setState({\r\n                firstPane: height - 80,\r\n                parentHeight: height - 50\r\n            });\r\n        }\r\n    }\r\n    generateBreadCrumData(obj) {\r\n        const breadCrumbData = [];\r\n        if (this.state.masterData && this.state.masterData.filterStorageCategory) {\r\n\r\n            breadCrumbData.push(\r\n                {\r\n                    \"label\": \"IDS_STORAGECATEGORY\",\r\n                    \"value\": obj.selectedStorageCategoryName &&\r\n                        obj.selectedStorageCategoryName !== null ?\r\n                        obj.selectedStorageCategoryName : \"NA\"\r\n\r\n                }\r\n                // ,\r\n                // {\r\n                //     \"label\": \"IDS_STORAGECATEGORYLOCATION\",\r\n                //     \"value\": obj.selectedSampleStorageLocation &&\r\n                //         obj.selectedSampleStorageLocation.ssamplestoragelocationname !== null ?\r\n                //         obj.selectedSampleStorageLocation.ssamplestoragelocationname : \"NA\"\r\n                // },\r\n                // {\r\n                //     \"label\": \"IDS_STORAGECATEGORYVERSION\",\r\n                //     \"value\": obj.selectedSampleStorageVersion &&\r\n                //         obj.selectedSampleStorageVersion.nversionno !== null ?\r\n                //         obj.selectedSampleStorageVersion.nversionno : \"NA\"\r\n                // }\r\n            );\r\n        }\r\n        return breadCrumbData;\r\n    }\r\n\r\n    openFilter = () => {\r\n        let showFilter = !this.props.Login.showFilter\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeFilter = () => {\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    reloadData = () => {\r\n        this.onFilterSubmit();\r\n    }\r\n    onEditSampleStorageLocation = (selectedSampleStorageVersion, userInfo, editId) => {\r\n        this.handleSearch();\r\n        this.setState({ searchedTreeData: undefined })\r\n        if (this.searchRef.current) {\r\n            this.searchRef.current.value = \"\";\r\n        }\r\n\r\n        let isOnlyDraft = false;\r\n        if (this.props.Login.masterData.sampleStorageVersion && this.props.Login.masterData.sampleStorageVersion.length > 1) {\r\n            isOnlyDraft = true;\r\n        }\r\n        this.props.editSampleStorageLocation(selectedSampleStorageVersion, userInfo, isOnlyDraft, editId);\r\n    }\r\n    openStorageMapping = (addId) => {\r\n        this.addSampleStorageMapping({ userInfo: this.props.Login.userInfo, addId });\r\n    }\r\n    deletesamplestoragemapping = (param) => {\r\n        this.CRUDSampleStorageTransaction({\r\n            'nsamplestoragelocationcode': this.state.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode,\r\n            'nsamplestoragemappingcode': param.nsamplestoragemappingcode,\r\n            userinfo: this.props.Login.userInfo\r\n        }, 'delete');\r\n    }\r\n    addMultipleSample = (param) => {\r\n        this.setState({\r\n            //sheetData: JSON.parse(response[0].data.sheetData),\r\n            openModal: true, isMultiSampleAdd: true, openSpreadSheet: true,//, editedsheetData: param, Rows: param.nrow, columns: param.ncolumn,\r\n            loading: false\r\n        })\r\n    }\r\n    opensearch = () => {\r\n        this.setState({\r\n            openModal: true, isFilterPopup: true, selectedRecord: { ...this.state.submittedselectedRecord } ||\r\n                { ...this.state.selectedRecord }\r\n        })\r\n    }\r\n    addSample = (param, nflag) => {\r\n        this.setState({ loading: true })\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"samplestoragelistpreperation/getsamplestoragemappingSheetData\",\r\n            {\r\n                isMultiSampleAdd: (nflag === 2) ? true : false,\r\n                nsamplestoragemappingcode:\r\n                    (nflag === 2) ? this.state.masterData.samplestoragelistpreperation.map(item => item.nsamplestoragemappingcode).join(\",\")\r\n                        : param.nsamplestoragemappingcode.toString()\r\n            });\r\n        urlArray = [url1];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                if (nflag === 2) {\r\n                    this.setState({\r\n                        sheetData: JSON.parse(response[0].data.sheetData),\r\n                        openModal: true, isMultiSampleAdd: true, openSpreadSheet: true,//, editedsheetData: param, Rows: param.nrow, columns: param.ncolumn,\r\n                        loading: false\r\n                    })\r\n                } else {\r\n                    this.setState({\r\n                        sheetData: JSON.parse(response[0].data.sheetData),\r\n                        openModal: true, isMultiSampleAdd: false, openSpreadSheet: true,\r\n                        editedsheetData: param, Rows: param.nrow, columns: param.ncolumn,\r\n                        loading: false\r\n                    })\r\n                }\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n\r\n\r\n    }\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        let selectedRecordFilter = this.state.selectedRecordFilter || {};\r\n\r\n        if (fieldName === 'nstoragecategorycode') {\r\n            return this.getSampleStorageLocation({\r\n                userinfo: this.props.Login.userInfo,\r\n                nstoragecategorycode: comboData.value\r\n            }, fieldName, comboData);\r\n        } else if (fieldName === 'ncontainertypecode') {\r\n            return this.getContainerStructure({\r\n                userinfo: this.props.Login.userInfo,\r\n                ncontainertypecode: comboData.value\r\n            }, fieldName, comboData);\r\n\r\n        } else if (fieldName === 'nprojecttypecode') {\r\n            return this.getprojectbarcodeconfig(comboData);\r\n\r\n        }\r\n        else if (fieldName === 'ncontainerstructurecode') {\r\n            selectedRecord['nrow'] = comboData.item.nrow ? comboData.item.nrow : 1;\r\n            selectedRecord['ncolumn'] = comboData.item.ncolumn ? comboData.item.ncolumn : 1;\r\n        } else if (fieldName === 'nsamplestoragelocationcode') {\r\n            return this.getSampleStorageLocation({\r\n                userinfo: this.props.Login.userInfo,\r\n                nstoragecategorycode: this.state.selectedRecordFilter['nstoragecategorycode'].value,\r\n                nsamplestoragelocationcode: comboData.value\r\n\r\n            }, fieldName, comboData);\r\n        }\r\n        if (fieldName === 'nsamplestorageversioncode') {\r\n            selectedRecordFilter[fieldName] = comboData;\r\n            this.setState({ selectedRecordFilter });\r\n\r\n        } else {\r\n            selectedRecord[fieldName] = comboData;\r\n            this.setState({ selectedRecord, selectedRecordFilter });\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onSaveSampleStorageTransaction = (saveType) => {\r\n        let selectedRecord = this.state.selectedRecord;\r\n        let containerpathCodeArray = [];\r\n        if (this.state.operation === 'create') {\r\n            containerpathCodeArray = selectedRecord['nsamplestoragecontainerpathcode'].map(item => item.value);\r\n        }\r\n        const inputParam =\r\n        {\r\n            nsamplestoragetransactioncode: selectedRecord['nsamplestoragetransactioncode'] ?\r\n                parseInt(selectedRecord['nsamplestoragetransactioncode']) : 0,\r\n            nsamplestoragelocationcode: this.state.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode,\r\n            nsamplestoragemappingcode: selectedRecord['nsamplestoragemappingcode'] ?\r\n                parseInt(selectedRecord['nsamplestoragemappingcode']) : 0,\r\n            ncontainertypecode: -1,\r\n            nproductcode: selectedRecord['nproductcode'].value,\r\n            ndirectionmastercode: -1,\r\n            ssamplestoragemappingname: \"-\",\r\n            nsamplestoragecontainerpathcode: this.state.operation === 'create' ?\r\n                JSON.stringify(containerpathCodeArray) : parseInt(selectedRecord['nsamplestoragecontainerpathcode'].value),\r\n            containerpathsize: containerpathCodeArray.length,\r\n            nneedposition: 4,\r\n            ncontainerstructurecode: -1, nquantity: selectedRecord['nquantity'] ?\r\n                parseInt(selectedRecord['nquantity']) : 1,\r\n            userinfo: this.props.Login.userInfo\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolcode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.CRUDSampleStorageTransaction(inputParam, this.state.operation);\r\n        }\r\n    }\r\n    getsamplestoragetransaction = (inputParam, userinfo) => {\r\n        this.setState({ loading: true })\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"samplestoragelistpreperation/getsamplestoragetransaction\", {\r\n            userinfo: this.props.Login.userInfo\r\n        });\r\n        urlArray = [url1];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                this.setState({\r\n                    masterData: {\r\n                        ...this.state.masterData, ...response[0].data\r\n                    },\r\n                    loading: false\r\n                });\r\n\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n\r\n    }\r\n\r\n    childDataChange = (selectedRecord) => {\r\n        this.setState({\r\n            selectedRecord: {\r\n                ...selectedRecord\r\n            },\r\n            isInitialRender: false\r\n        });\r\n    }\r\n    childSheetDataChange = (sheetData) => {\r\n\r\n        this.setState({\r\n            // selectedRecord: {\r\n            //     ...this.state.selectedRecord,\r\n            //     sheetData: {\r\n            //         ...this.state.selectedRecord.sheetData,\r\n            //         ...sheetData\r\n            //     }\r\n            // },\r\n            sheetData: {\r\n                ...sheetData\r\n            },\r\n            isInitialRender: false\r\n        });\r\n    }\r\n    // Actions start\r\n    getActiveSampleStorageMappingById = (inputParam, userinfo) => {\r\n        this.setState({ loading: true })\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"samplestoragelistpreperation/getActiveSampleStorageMappingById\", {\r\n            nsamplestoragelocationcode: inputParam['selectedSampleStorageLocation'][0].nsamplestoragelocationcode,\r\n            userinfo: userinfo\r\n        });\r\n        urlArray = [url1];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                this.setState({\r\n                    masterData: {\r\n                        ...this.state.masterData, ...response[0].data\r\n                    }//,\r\n                    // selectedRecord: {\r\n                    //     ...this.state.selectedRecord\r\n                    //    // , sheetData: JSON.parse(response[0].data.selectedSampleStoragemapping.jsondata.value)\r\n                    // }\r\n                    ,\r\n                    loading: false\r\n                });\r\n\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n\r\n    }\r\n    filterColumnData = (filterValue, filterParam) => {\r\n        let masterData = filterParam.masterData;\r\n        let primaryKeyValue = 0;\r\n        let searchedData = undefined;\r\n        if (filterValue === \"\") {\r\n            if (masterData[filterParam.inputListName] && masterData[filterParam.inputListName].length > 0) {\r\n                primaryKeyValue = masterData[filterParam.inputListName][0][filterParam.primaryKeyField];\r\n            }\r\n        }\r\n        else {\r\n            if (filterParam.isjsondata) {\r\n                searchedData = searchJsonData(filterValue, masterData[filterParam.inputListName], filterParam.searchFieldList || []);\r\n            }\r\n            else {\r\n                searchedData = searchData(filterValue, masterData[filterParam.inputListName], filterParam.searchFieldList || []);\r\n\r\n            }\r\n            if (searchedData.length > 0) {\r\n                primaryKeyValue = searchedData[0][filterParam.primaryKeyField];\r\n            }\r\n        }\r\n\r\n        if (primaryKeyValue !== 0) {\r\n            this.setState({ loading: true });\r\n            return rsapi.post(filterParam.fetchUrl, { ...filterParam.fecthInputObject, [filterParam.primaryKeyField]: primaryKeyValue })\r\n                .then(response => {\r\n                    masterData[\"searchedData\"] = searchedData;\r\n                    masterData = { ...masterData, ...response.data };\r\n\r\n                    if (filterParam.sortField) {\r\n                        sortData(masterData, filterParam.sortOrder, filterParam.sortField);\r\n                    }\r\n                    else {\r\n                        sortData(masterData);\r\n                    }\r\n                    this.setState({ masterData, loading: false, skip: 0, take: 10, selectedId: null });\r\n                })\r\n                .catch(error => {\r\n                    this.setState({ loading: false });\r\n                    if (error.response.status === 500) {\r\n                        toast.error(this.props.intl.formatMessage({ id: error.message }));\r\n                    }\r\n                    else {\r\n                        toast.warn(this.props.intl.formatMessage({ id: error.response.data }));\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n            masterData[filterParam.selectedObject] = undefined;\r\n            masterData[\"searchedData\"] = [];\r\n            Object.keys(masterData).forEach(item => {\r\n                if (item !== filterParam.inputListName && item !== filterParam.selectedObject\r\n                    && filterParam.unchangeList && filterParam.unchangeList.indexOf(item) === -1)\r\n                    masterData[item] = [];\r\n            })\r\n            this.setState({\r\n                masterData, operation: null, modalName: undefined,\r\n                loading: false\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n\r\n    CRUDSampleStorageTransaction = (inputParam, operation) => {\r\n        this.setState({ loading: true })\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"samplestoragelistpreperation/\" + operation + \"samplestoragelistpreperation\", inputParam);\r\n        urlArray = [url1];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                this.setState({\r\n                    isInitialRender: true,\r\n                    selectedRecord: {},\r\n                    masterData: {\r\n                        ...this.state.masterData, ...response[0].data\r\n                    },\r\n                    openModal: false,\r\n                    loading: false\r\n                });\r\n\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n\r\n    }\r\n\r\n    getSampleStorageLocation(inputData, fieldName, comboData) {\r\n        let selectedRecordFilter = this.state.selectedRecordFilter || {};\r\n        let inputParamData = {}\r\n        this.setState({ loading: true })\r\n        if (fieldName === 'nsamplestoragelocationcode') {\r\n            inputParamData = {\r\n                nstoragecategorycode: selectedRecordFilter['nstoragecategorycode'].value,\r\n                nsamplestoragelocationcode: comboData.value,\r\n                userinfo: inputData.userinfo\r\n            }\r\n        } else {\r\n            inputParamData = {\r\n                nstoragecategorycode: comboData.value,\r\n                userinfo: inputData.userinfo\r\n            }\r\n        }\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"samplestoragelistpreperation/getsamplestoragemapping\", inputParamData);\r\n\r\n        urlArray = [url1];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let { storageLocationOptions,\r\n                    sampleStorageVersionOptions } = this.state\r\n\r\n                let sampleStorageLocationList = constructOptionList(response[0].data.sampleStorageLocation || [], \"nsamplestoragelocationcode\",\r\n                    \"ssamplestoragelocationname\", undefined, undefined, undefined);\r\n                storageLocationOptions = sampleStorageLocationList.get(\"OptionList\");\r\n                let sampleStorageVersionList = constructOptionList(response[0].data.sampleStorageVersion || [], \"nsamplestorageversioncode\",\r\n                    \"nversionno\", undefined, undefined, undefined);\r\n                sampleStorageVersionOptions = sampleStorageVersionList.get(\"OptionList\");\r\n                selectedRecordFilter = {\r\n                    ...selectedRecordFilter,\r\n                    nsamplestoragelocationcode: storageLocationOptions.length > 0 ?\r\n                        storageLocationOptions[0] : [],\r\n                    nsamplestorageversioncode: sampleStorageVersionOptions.length > 0 ?\r\n                        sampleStorageVersionOptions[0] : [],\r\n\r\n                }\r\n                this.setState({\r\n                    storageLocationOptions, sampleStorageVersionOptions,\r\n                    selectedRecordFilter: {\r\n                        ...selectedRecordFilter,\r\n                        [fieldName]: comboData\r\n                    },\r\n                    loading: false\r\n                });\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n    }\r\n\r\n    onFilterSubmit = () => {\r\n        this.setState({ loading: true })\r\n        let inputParamData = {\r\n            nstoragecategorycode: this.state.selectedRecordFilter[\"nstoragecategorycode\"].value,\r\n            // nsamplestoragelocationcode: this.state.selectedRecordFilter[\"nsamplestoragelocationcode\"].value,\r\n            // nsamplestorageversioncode: this.state.selectedRecordFilter[\"nsamplestorageversioncode\"].value,\r\n            userinfo: this.props.Login.userInfo,\r\n        }\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"samplestoragelistpreperation/getsamplestoragemapping\", inputParamData);\r\n        urlArray = [url1];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let object = {\r\n                    selectedStorageCategoryName: this.state.selectedRecordFilter[\"nstoragecategorycode\"].item.sstoragecategoryname,\r\n                    // ssamplestoragelocationname: this.state.selectedRecordFilter[\"nsamplestoragelocationcode\"].item.ssamplestoragelocationname,\r\n                    // selectedSampleStorageVersion: this.state.selectedRecordFilter[\"nsamplestorageversioncode\"].item.nversionno,\r\n                }\r\n                let filterData = this.generateBreadCrumData(object);\r\n\r\n                this.setState({\r\n                    filterData,\r\n                    masterData: {\r\n                        ...this.state.masterData,\r\n                        ...response[0].data,\r\n                        //   samplestoragelistpreperation: response[0].data['samplestoragelistpreperation'],\r\n                    },\r\n                    loading: false\r\n                });\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n    }\r\n    addSampleStorageMapping() {\r\n        this.setState({ loading: true })\r\n        let selectedRecord = this.state.selectedRecord\r\n        let inputParamData = {\r\n            // nstoragecategorycode: this.state.selectedRecordFilter[\"nstoragecategorycode\"].value,\r\n            nsamplestoragelocationcode: this.state.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode,\r\n            // nsamplestorageversioncode: this.state.selectedRecordFilter[\"nsamplestorageversioncode\"].value,\r\n            userinfo: this.props.Login.userInfo,\r\n        }\r\n\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"samplestoragelistpreperation/addSampleStorageMapping\", inputParamData);\r\n\r\n        const url2 = rsapi.post(\"product/getProduct\",\r\n            { 'userinfo': this.props.Login.userInfo });\r\n\r\n        const url3 = rsapi.post(\"containertype/getContainerType\",\r\n            { 'userinfo': this.props.Login.userInfo });\r\n\r\n        urlArray = [url1, url2];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const storageMappingMap = constructOptionList(response[0].data['samplestoragecontainerpath'] || [],\r\n                    \"nsamplestoragecontainerpathcode\",\r\n                    \"scontainerpath\", undefined, undefined, true);\r\n                const storageMappingMapList = storageMappingMap.get(\"OptionList\");\r\n                let containerStructure = response[0].data['containerStructure'];\r\n\r\n                const containerTypeMap = constructOptionList(response[0].data['containerType'] || [],\r\n                    \"ncontainertypecode\",\r\n                    \"scontainertype\", undefined, undefined, true);\r\n                const containerTypeList = containerTypeMap.get(\"OptionList\");\r\n\r\n\r\n                const directionmasterMap = constructOptionList(response[0].data['directionmaster'] || [],\r\n                    \"ndirectionmastercode\",\r\n                    \"sdirection\", undefined, undefined, true);\r\n                const directionmasterList = directionmasterMap.get(\"OptionList\");\r\n\r\n                const containerstructureMap = constructOptionList(response[0].data['containerStructure']\r\n                    || [],\r\n                    \"ncontainerstructurecode\",\r\n                    \"scontainerstructurename\", undefined, undefined, true);\r\n                const containerstructureList = containerstructureMap.get(\"OptionList\");\r\n\r\n                const productMap = constructOptionList(response[1].data['Product'] || [],\r\n                    \"nproductcode\",\r\n                    \"sproductname\", undefined, undefined, true);\r\n                const productList = productMap.get(\"OptionList\");\r\n\r\n                this.setState({\r\n                    openModal: true,\r\n                    selectedRecord: {\r\n                        ...selectedRecord,\r\n                        storageMappingMapOptions: storageMappingMapList,\r\n                        productOptions: productList,\r\n                        containerTypeOptions: containerTypeList,\r\n                        directionmasterOptions: directionmasterList,\r\n                        // ncontainertypecode: containerTypeList[0],\r\n                        // containerStructureOptions: containerstructureList,\r\n                        // ncontainerstructurecode: containerstructureList[0],\r\n                        nrow: containerStructure.length > 0 ? containerStructure[0].nrow : 1,\r\n                        ncolumn: containerStructure.length > 0 ? containerStructure[0].ncolumn : 1,\r\n                        isInitialRender: true\r\n\r\n                    },\r\n                    openSpreadSheet: false,\r\n                    operation: 'create',\r\n                    loading: false\r\n                });\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n    }\r\n    getprojectbarcodeconfig(comboData) {\r\n        let inputParamData = {}\r\n        this.setState({ loading: true })\r\n        inputParamData = {\r\n            nprojecttypecode: comboData.value,\r\n            userinfo: this.props.Login.userInfo\r\n        }\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"samplestoragelistpreperation/getProjectbarcodeconfig\", inputParamData);\r\n\r\n        urlArray = [url1];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let masterData = this.state.masterData;\r\n                let submittedselectedRecord = this.state.submittedselectedRecord;\r\n                if (this.state.selectedProjectType.value !== comboData.value) {\r\n                    masterData = {\r\n                        ...masterData,\r\n                        samplestoragelistpreperation: []\r\n                    }\r\n                    submittedselectedRecord = {}\r\n                }\r\n                this.setState({\r\n                    masterData,\r\n                    submittedselectedRecord,\r\n                    selectedProjectTypeList: sortData(response[0].data.selectedProjectTypeList),\r\n                    selectedProjectType: { label: comboData.label, value: comboData.value },\r\n                    selectedRecord: {\r\n                        nprojecttypecode: { label: comboData.label, value: comboData.value }\r\n                    },\r\n                    loading: false\r\n                });\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n    }\r\n\r\n    getContainerStructure(inputData, fieldName, comboData) {\r\n        let inputParamData = {}\r\n        this.setState({ loading: true })\r\n        inputParamData = {\r\n            ncontainertypecode: comboData.value,\r\n            userinfo: inputData.userinfo\r\n        }\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"samplestoragelistpreperation/getContainerStructure\", inputParamData);\r\n\r\n        urlArray = [url1];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let { containerStructureOptions, selectedRecord } = this.state\r\n\r\n                let containerStructureList = constructOptionList(response[0].data.containerStructure || [], \"ncontainerstructurecode\",\r\n                    \"scontainerstructurename\", undefined, undefined, undefined);\r\n                containerStructureOptions = containerStructureList.get(\"OptionList\");\r\n                selectedRecord = {\r\n                    ...selectedRecord,\r\n                    nrow: containerStructureOptions.length > 0 ?\r\n                        containerStructureOptions[0].item.nrow : 1,\r\n                    ncolumn: containerStructureOptions.length > 0 ?\r\n                        containerStructureOptions[0].item.ncolumn : 1,\r\n                    ncontainerstructurecode: containerStructureOptions.length > 0 ?\r\n                        containerStructureOptions[0] : [],\r\n                    containerStructureOptions: containerStructureOptions.length > 0 ?\r\n                        [...containerStructureOptions] : [],\r\n                }\r\n\r\n                this.setState({\r\n\r\n                    selectedRecord: {\r\n                        ...selectedRecord,\r\n                        [fieldName]: comboData\r\n                    },\r\n                    loading: false\r\n                });\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n    }\r\n    onSampleMappingSaveClick = () => {\r\n        const mandatoryFields = this.state.openSpreadSheet ? [] : this.state.selectedRecord[\"nneedposition\"] === undefined ||\r\n            this.state.selectedRecord[\"nneedposition\"] === false ? [\r\n            {\r\n                \"idsName\": \"IDS_SAMPLESTORAGEMAPPING\", \"dataField\": \"nsamplestoragecontainerpathcode\",\r\n                \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\"\r\n            },\r\n            {\r\n                \"idsName\": \"IDS_PRODUCT\",\r\n                \"dataField\": \"nproductcode\", \"mandatoryLabel\":\r\n                    \"IDS_SELECT\", \"controlType\": \"selectbox\"\r\n            },\r\n            {\r\n                \"idsName\": \"IDS_AVAILABLESPACE\",\r\n                \"dataField\": \"nquantity\", \"mandatoryLabel\":\r\n                    \"IDS_ENTER\", \"controlType\": \"selectbox\"\r\n            }\r\n        ] : [\r\n            {\r\n                \"idsName\": \"IDS_SAMPLESTORAGEMAPPING\", \"dataField\": \"nsamplestoragecontainerpathcode\",\r\n                \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\"\r\n            },\r\n            {\r\n                \"idsName\": \"IDS_PRODUCT\",\r\n                \"dataField\": \"nproductcode\", \"mandatoryLabel\":\r\n                    \"IDS_SELECT\", \"controlType\": \"selectbox\"\r\n            }\r\n            ,\r\n            {\r\n                \"idsName\": \"IDS_CONTAINERTYPE\",\r\n                \"dataField\": \"ncontainertypecode\", \"mandatoryLabel\":\r\n                    \"IDS_SELECT\", \"controlType\": \"selectbox\"\r\n            },\r\n            {\r\n                \"idsName\": \"IDS_CONTAINERSTRUCTURENAME\",\r\n                \"dataField\": \"ncontainerstructurecode\", \"mandatoryLabel\":\r\n                    \"IDS_SELECT\", \"controlType\": \"selectbox\"\r\n            },\r\n            {\r\n                \"idsName\": \"IDS_DIRECTION\",\r\n                \"dataField\": \"ndirectionmastercode\", \"mandatoryLabel\":\r\n                    \"IDS_ENTER\", \"controlType\": \"selectbox\"\r\n            },\r\n            {\r\n                \"idsName\": \"IDS_AVAILABLESPACE\",\r\n                \"dataField\": \"nquantity\", \"mandatoryLabel\":\r\n                    \"IDS_ENTER\", \"controlType\": \"selectbox\"\r\n            }\r\n        ]\r\n        onSaveMandatoryValidation(this.state.selectedRecord, mandatoryFields,\r\n            this.onSaveClick)\r\n    }\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataStateChange: event.dataState\r\n        });\r\n    }\r\n\r\n    approveSampleStorageMapping = (event) => {\r\n        let inputParamData = {}\r\n        this.setState({ loading: true })\r\n        inputParamData = {\r\n            nsamplestoragelocationcode: this.state.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode,\r\n            userinfo: this.props.Login.userInfo\r\n        }\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"samplestoragelistpreperation/approveSampleStorageMapping\", inputParamData);\r\n\r\n        urlArray = [url1];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                this.setState({\r\n                    masterData: {\r\n                        ...this.state.masterData,\r\n                        ...response[0].data\r\n                    },\r\n                    loading: false\r\n                });\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n    }\r\n    getSelectedBarcodeData(inputParam) {\r\n        this.setState({ loading: true })\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"/samplestoragelistpreperation/getSelectedBarcodeData\", {\r\n            nprojecttypecode: this.state.selectedProjectType.value,\r\n            spositionvalue: inputParam.spositionvalue\r\n        });\r\n        urlArray = [url1];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                this.setState({\r\n                    selectedBarcodeValue: { ...response[0].data['selectedBarcodeValue'] },\r\n                    loading: false\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n\r\n            })\r\n    }\r\n    getDynamicFilterExecuteData(nflag) {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        if (nflag === 2 ? true : (selectedRecord.filterquery && selectedRecord.filterquery !== \"\")) {\r\n            this.setState({ loading: true })\r\n            let obj = {// ...inputParam.component, \r\n                label: 'samplestoragelistpreperation', valuemember: 'nsamplestoragetransactioncode',\r\n                filterquery: nflag === 2 ?\r\n                    this.state.submittedselectedRecord.filterquery + \" and nprojecttypecode=\" + this.state.selectedProjectType.value\r\n                    :\r\n                    selectedRecord.filterquery + \" and nprojecttypecode=\" + this.state.selectedProjectType.value\r\n               // , source: 'view_samplelistprep_' + this.state.selectedProjectType.value\r\n               , source: 'view_samplelistprep_'\r\n                , userinfo: this.props.Login.userInfo,\r\n                nprojecttypecode: this.state.selectedProjectType.value\r\n            }\r\n            let urlArray = [];\r\n            const url1 = rsapi.post(\"/samplestoragelistpreperation/getdynamicfilterexecutedata\", obj);\r\n            urlArray = [url1];\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    let masterData = this.state.masterData\r\n                    masterData = { ...masterData, ...response[0].data }\r\n                    this.setState({\r\n                        masterData: { ...masterData },\r\n                        loading: false,\r\n                        openModal: false,\r\n                        isFilterPopup: false,\r\n                        submittedselectedRecord: nflag === 2 ?\r\n                            { ...this.state.submittedselectedRecord }\r\n                            :\r\n                            { ...selectedRecord }\r\n                        ,\r\n                        selectedRecord: {},\r\n                        displayQuery: this.state.tree ? QbUtils.queryString(this.state.tree, this.state.config, true) : \"\"\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        loading: false\r\n                    });\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data.rtn);\r\n                    }\r\n\r\n                })\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTAFILTER\" }));\r\n\r\n        }\r\n    }\r\n    // getDynamicFilterExecuteData(nflag) {\r\n    //     this.setState({ loading: true })\r\n    //     let selectedRecord = this.state.selectedRecord || {};\r\n    //     let obj = {// ...inputParam.component, \r\n    //         label: 'samplestoragelistpreperation', valuemember: 'nsamplestoragetransactioncode',\r\n    //         filterquery:   \r\n    //         selectedRecord.filterquery, source: 'view_sampleretrieval', userinfo: this.props.Login.userInfo\r\n    //     }\r\n    //     let urlArray = [];\r\n    //     const url1 = rsapi.post(\"/samplestoragelistpreperation/getdynamicfilterexecutedata\", obj);\r\n    //     urlArray = [url1];\r\n    //     Axios.all(urlArray)\r\n    //         .then(response => {\r\n    //             console.log(response)\r\n    //             let masterData = this.state.masterData\r\n    //             masterData = { ...masterData, ...response[0].data }\r\n    //             this.setState({\r\n    //                 masterData: { ...masterData },\r\n    //                 loading: false,\r\n    //                 openModal: false,\r\n    //                 submittedselectedRecord: nflag === 2 ?\r\n    //                     { ...this.state.submittedselectedRecord }\r\n    //                     :\r\n    //                     { ...selectedRecord }\r\n    //                 ,\r\n    //                 isFilterPopup: false,\r\n    //                 selectedRecord: {}\r\n    //             })\r\n    //         })\r\n    //         .catch(error => {\r\n    //             this.setState({\r\n    //                 loading: false\r\n    //             });\r\n    //             if (error.response.status === 500) {\r\n    //                 toast.error(error.message);\r\n    //             }\r\n    //             else {\r\n    //                 toast.info(error.response.data.rtn);\r\n    //             }\r\n\r\n    //         })\r\n    // }\r\n\r\n    fetchRecord = (data) => {\r\n        this.setState({ loading: true })\r\n        let selectedRecord = this.state.selectedRecord\r\n        let inputParamData = {\r\n            nsamplestoragelocationcode: this.state.masterData.selectedSampleStorageLocation.nsamplestoragelocationcode,\r\n            userinfo: this.props.Login.userInfo,\r\n        }\r\n        let urlArray = [];\r\n        const url1 = rsapi.post(\"samplestoragelistpreperation/addSampleStorageMapping\", inputParamData);\r\n\r\n        const url2 = rsapi.post(\"product/getProduct\",\r\n            { 'userinfo': this.props.Login.userInfo });\r\n\r\n        const url3 = rsapi.post(\"samplestoragelistpreperation/getEditSampleStorageMapping\",\r\n            { 'nsamplestoragemappingcode': data.nsamplestoragemappingcode, 'userinfo': this.props.Login.userInfo });\r\n\r\n        urlArray = [url1, url2, url3];\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const storageMappingMap = constructOptionList(response[0].data['samplestoragecontainerpath'] || [],\r\n                    \"nsamplestoragecontainerpathcode\",\r\n                    \"scontainerpath\", undefined, undefined, true);\r\n                const storageMappingMapList = storageMappingMap.get(\"OptionList\");\r\n                let containerStructure = response[0].data['containerStructure'];\r\n\r\n                const containerTypeMap = constructOptionList(response[0].data['containerType'] || [],\r\n                    \"ncontainertypecode\",\r\n                    \"scontainertype\", undefined, undefined, true);\r\n                const containerTypeList = containerTypeMap.get(\"OptionList\");\r\n\r\n                const directionmasterMap = constructOptionList(response[0].data['directionmaster'] || [],\r\n                    \"ndirectionmastercode\",\r\n                    \"sdirection\", undefined, undefined, true);\r\n                const directionmasterList = directionmasterMap.get(\"OptionList\");\r\n\r\n\r\n                const containerstructureMap = constructOptionList(response[2].data['containerStructure']\r\n                    || [],\r\n                    \"ncontainerstructurecode\",\r\n                    \"scontainerstructurename\", undefined, undefined, true);\r\n                const containerstructureList = containerstructureMap.get(\"OptionList\");\r\n\r\n                const productMap = constructOptionList(response[1].data['Product'] || [],\r\n                    \"nproductcode\",\r\n                    \"sproductname\", undefined, undefined, true);\r\n                const productList = productMap.get(\"OptionList\");\r\n\r\n                const editedObject = response[2].data.editsampleStorageMapping;\r\n\r\n                storageMappingMapList.unshift({ label: editedObject.scontainerpath, value: editedObject.nsamplestoragecontainerpathcode })\r\n                selectedRecord = {\r\n                    ndirectionmastercode: { label: editedObject.sdirection, value: editedObject.ndirectionmastercode },\r\n                    nsamplestoragecontainerpathcode: { label: editedObject.scontainerpath, value: editedObject.nsamplestoragecontainerpathcode },\r\n                    nproductcode: { label: editedObject.sproductname, value: editedObject.nproductcode },\r\n                    ncontainertypecode: { label: editedObject.scontainertype, value: editedObject.ncontainertypecode },\r\n                    ncontainerstructurecode: { label: editedObject.scontainerstructurename, value: editedObject.ncontainerstructurecode },\r\n                    nneedposition: editedObject.nneedposition === 3 ? true : false,\r\n                    directionmasterOptions: directionmasterList,\r\n                    nquantity: editedObject.nquantity,\r\n                    nrow: editedObject.nrow,\r\n                    ncolumn: editedObject.ncolumn,\r\n                    nsamplestoragemappingcode: editedObject.nsamplestoragemappingcode\r\n                }\r\n                this.setState({\r\n                    openSpreadSheet: false,\r\n                    openModal: true,\r\n                    selectedRecord: {\r\n                        ...selectedRecord,\r\n                        storageMappingMapOptions: storageMappingMapList,\r\n                        productOptions: productList,\r\n                        containerTypeOptions: containerTypeList,\r\n                        containerStructureOptions: containerstructureList,\r\n                        isInitialRender: true\r\n                    },\r\n                    operation: 'update',\r\n                    loading: false\r\n                });\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n    }\r\n    // Actions End\r\n    retrievalType = () => {\r\n        let retrievalType = this.state.retrievalType;\r\n        if (retrievalType === 1) {\r\n            retrievalType = 2;\r\n        } else {\r\n            retrievalType = 1;\r\n        }\r\n        this.setState({ retrievalType: retrievalType })\r\n    }\r\n    onInputOnChange = (event) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"agree\") {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n            }\r\n        }\r\n        else if (event.target.type === 'select-one') {\r\n\r\n            selectedRecord[event.target.name] = event.target.value;\r\n\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (this.state.openModal && nextState.isInitialRender === false &&\r\n            (nextState.selectedRecord !== this.state.selectedRecord)) {\r\n            return false;\r\n        } else if (this.state.openModal && nextState.isInitialRender === false &&\r\n            (nextState.sheetData !== this.state.sheetData)) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n    handlePageChangeFilter = (event) => {\r\n        this.setState({ kendoSkip: event.skip, kendoTake: event.take });\r\n    };\r\n    onChange = (immutableTree, config) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[\"tree\"] = immutableTree;\r\n        selectedRecord[\"config\"] = config;\r\n        selectedRecord['filterquery'] = QbUtils.sqlFormat(immutableTree, config);\r\n        this.setState({ tree: immutableTree, config: config, selectedRecord: selectedRecord });\r\n\r\n    };\r\n    // cellRender(tdElement, cellProps) {\r\n\r\n    //     if (cellProps.rowType === \"groupFooter\") {\r\n    //         console.log('cellProps.field', cellProps)\r\n    //         if (cellProps.dataItem.field === \"ssamplestoragelocationname\") {\r\n    //             console.log('tdElement', tdElement, 'cellProps', cellProps)\r\n    //             return (\r\n    //                 <td aria-colindex={cellProps.columnIndex} role={\"gridcell\"}>\r\n    //                     Sum: {cellProps.dataItem.aggregates.navailablespace.sum}\r\n    //                 </td>\r\n    //             );\r\n    //         }\r\n    //     }\r\n    //     return tdElement;\r\n    // }\r\n    // handleGroupChange = (event) => {\r\n    //     const newDataState = this.processWithGroups(this.state.masterData.samplestoragelistpreperation || [], this.state.dataStateChange, event.group);\r\n    //     this.setState({\r\n    //         masterData: { ...this.state.masterData, samplestoragelistpreperation: newDataState },\r\n    //         group: event.group,\r\n    //     });\r\n    // };\r\n    // processWithGroups = (data, group) => {\r\n    //     const newDataState = groupBy(data, group);\r\n    //     return newDataState;\r\n    // };\r\n    processWithGroups = (data, dataState) => {\r\n        const aggregates = [\r\n            {\r\n                field: \"navailablespace\",\r\n                aggregate: \"sum\",\r\n            }\r\n        ];\r\n        const groups = dataState.group;\r\n        if (groups) {\r\n            groups.map((group) => (group.aggregates = aggregates));\r\n        }\r\n        dataState.group = groups;\r\n        const newDataState = process(data, dataState);\r\n        // setGroupIds({\r\n        //     data: newDataState.data,\r\n        //     group: dataState.group,\r\n        // });\r\n        return newDataState;\r\n    };\r\n    gridfillingColumn(data) {\r\n        //  const tempArray = [];\r\n        // const temparray = data && data.map((option) => {\r\n        //     return { \"idsName\": option.sfieldname, \"dataField\": option.sfieldname, \"width\": \"200px\" };\r\n        // });\r\n        // return temparray;\r\n        const temparray1 = [{ \"idsName\": \"IDS_SAMPLEID\", \"dataField\": \"spositionvalue\", \"width\": \"200px\", \"staticField\": true },\r\n        { \"idsName\": \"IDS_POSITION\", \"dataField\": \"sposition\", \"width\": \"200px\", \"staticField\": true },\r\n        { \"idsName\": \"IDS_QUANTITY\", \"dataField\": \"nquantity\", \"width\": \"200px\", \"staticField\": true },\r\n        { \"idsName\": \"IDS_UNIT\", \"dataField\": \"sunitname\", \"width\": \"200px\", \"staticField\": true }];\r\n        const temparray2 = data && data.map((option) => {\r\n            return { \"idsName\": option.sfieldname, \"dataField\": option.sfieldname, \"width\": \"200px\" };\r\n        });\r\n        const newArray = [...temparray1, ...temparray2]\r\n        return newArray;\r\n    }\r\n    render() {\r\n        const addId = this.state.controlMap.has(\"Add samplestoragelistpreperation\") && this.state.controlMap.get(\"Add samplestoragelistpreperation\").ncontrolcode;\r\n        const editId = this.state.controlMap.has(\"Edit SampleStorageLocation\") && this.state.controlMap.get(\"Edit SampleStorageLocation\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"Delete SampleStorageLocation\") && this.state.controlMap.get(\"Delete SampleStorageLocation\").ncontrolcode;\r\n        const copyId = this.state.controlMap.has(\"Copy SampleStorageLocation\") && this.state.controlMap.get(\"Copy SampleStorageLocation\").ncontrolcode;\r\n        const approveId = this.state.controlMap.has(\"Approve SampleStorageLocation\") && this.state.controlMap.get(\"Approve SampleStorageLocation\").ncontrolcode;\r\n\r\n        const extractedColumnList = this.state.selectedProjectTypeList ? this.gridfillingColumn(this.state.selectedProjectTypeList) : [];\r\n\r\n        let fields = {};\r\n        if (extractedColumnList.length > 0) {\r\n            extractedColumnList.map(field => {\r\n                field.hasOwnProperty(\"staticField\") ?\r\n                    fields = {\r\n                        ...fields,\r\n                        [field.dataField]: {\r\n                            \"label\": this.props.intl.formatMessage({\r\n                                id: field.idsName,\r\n                            })\r\n                            ,\r\n                            \"type\": \"text\",\r\n                            \"valueSources\": [\"value\", \"func\"],\r\n\r\n                            \"mainWidgetProps\": {\r\n                                \"valueLabel\": \"Name\",\r\n                                \"valuePlaceholder\": this.props.intl.formatMessage({\r\n                                    id: field.idsName\r\n                                })\r\n                            }\r\n                        }\r\n                    }\r\n                    :\r\n                    fields = {\r\n                        ...fields,\r\n                        ['\"' + field.dataField + '\"']: {\r\n                            \"label\": field.dataField\r\n                            ,\r\n                            \"type\": \"text\",\r\n                            \"valueSources\": [\"value\", \"func\"],\r\n\r\n                            \"mainWidgetProps\": {\r\n                                \"valueLabel\": \"Name\",\r\n                                \"valuePlaceholder\": field.dataField\r\n                            }\r\n                        }\r\n                    }\r\n            });\r\n        }\r\n        const filterParam = {\r\n            inputListName: \"sampleStorageLocation\", selectedObject: \"selectedSampleStorageLocation\", primaryKeyField: \"nsamplestoragelocationcode\",\r\n            fetchUrl: \"samplestoragelistpreperation/getActiveSampleStorageMappingById\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData,\r\n            searchFieldList: [\"ssamplestoragelocationname\"]\r\n        };\r\n\r\n        const breadCrumbData = this.state.filterData || [];\r\n\r\n        const confirmMessage = new ConfirmMessage();\r\n        return (\r\n            <>\r\n\r\n                <Preloader loading={this.state.loading} />\r\n                {//this.state.retrievalType === 1 ?\r\n                    <>\r\n\r\n                        <ListWrapper className=\"client-list-content\">\r\n\r\n                            {\r\n                                <Col md={12}>\r\n                                    <Row>\r\n                                        <Col md={6}>\r\n                                            <FormSelectSearch\r\n                                                name={\"nprojecttypecode\"}\r\n                                                as={\"select\"}\r\n                                                onChange={(event) => this.onComboChange(event, 'nprojecttypecode')}\r\n                                                formLabel={this.props.intl.formatMessage({ id: \"IDS_PROJECTTYPE\" })}\r\n                                                isMandatory={this.state.selectedRecord[\"nneedposition\"]}\r\n                                                value={this.state.selectedProjectType ? this.state.selectedProjectType || [] : []}\r\n                                                options={this.state.masterData && this.state.masterData.projectbarcodeconfig || []}\r\n                                                optionId={\"value\"}\r\n                                                optionValue={\"label\"}\r\n                                                isMulti={false}\r\n                                                isDisabled={false}\r\n                                                isSearchable={false}\r\n                                                isClearable={false}\r\n                                            />\r\n                                        </Col>\r\n                                    </Row>\r\n\r\n                                    {this.state.selectedProjectTypeList && <Row>\r\n                                        <Col md={12}><DataGrid\r\n                                            // isDownloadPDFRequired={this.state.masterData && this.state.masterData.samplestoragelistpreperation &&\r\n                                            //     this.processWithGroups(this.state.masterData.samplestoragelistpreperation || [],\r\n                                            //         this.state.dataStateChange ? this.state.dataStateChange : {\r\n                                            //             take: 10,\r\n                                            //             skip: 0\r\n                                            //         }).data.length > 0 ?\r\n                                            //     true : false}\r\n                                            // isDownloadExcelRequired={this.state.masterData && this.state.masterData.samplestoragelistpreperation &&\r\n                                            //     this.processWithGroups(this.state.masterData.samplestoragelistpreperation || [],\r\n                                            //         this.state.dataStateChange ? this.state.dataStateChange : {\r\n                                            //             take: 10,\r\n                                            //             skip: 0\r\n                                            //         }).data.length > 0 ?\r\n                                            //     true : false}\r\n                                            isCustomButton={true}\r\n                                            customButtonlist={[{\r\n                                                label: 'IDS_SEARCH',\r\n                                                id: {},\r\n                                                onClick: () => this.opensearch(),\r\n                                                controlname: 'faSearch'\r\n                                            }]}\r\n                                            isRefreshRequired={false}\r\n                                            // onGroupChange={this.handleGroupChange}\r\n                                            primaryKeyField={'nsamplestoragetransactioncode'}\r\n                                            data={this.state.masterData &&\r\n                                                this.state.masterData.samplestoragelistpreperation}\r\n                                            dataResult={this.state.masterData &&\r\n                                                this.state.masterData.samplestoragelistpreperation ?\r\n                                                process(this.state.masterData.samplestoragelistpreperation || [],\r\n                                                    this.state.dataStateChange ? this.state.dataStateChange : { skip: 0, take: 10 }) : []\r\n                                                // this.processWithGroups(this.state.masterData.samplestoragelistpreperation || [],\r\n                                                //     this.state.dataStateChange ? this.state.dataStateChange : {\r\n                                                //         take: 10,\r\n                                                //         skip: 0\r\n                                                //     })\r\n                                            }\r\n                                            dataState={this.state.dataStateChange ? this.state.dataStateChange : { skip: 0, take: 10 }}\r\n                                            dataStateChange={this.dataStateChange}\r\n                                            extractedColumnList={extractedColumnList}\r\n                                            controlMap={this.state.controlMap}\r\n                                            userRoleControlRights={this.state.userRoleControlRights}\r\n                                            userInfo={this.props.Login.userInfo}\r\n                                            deleteRecord={this.deleteRecord}\r\n                                            addRecord={() => this.openStorageMapping()}\r\n                                            pageable={true}\r\n                                            scrollable={'scrollable'}\r\n                                            // isComponent={true}\r\n                                            gridHeight={'600px'}\r\n                                            // isActionRequired={true}\r\n                                            isToolBarRequired={true}\r\n                                        // actionIcons={\r\n                                        //     [{\r\n                                        //         title: this.props.intl.formatMessage({ id: \"IDS_ADDSAMPLE\" }),\r\n                                        //         controlname: \"faPenSquare\",\r\n                                        //         hidden: false,\r\n                                        //         objectName: \"add\",\r\n                                        //         onClick: (param) => this.addSample(param, 1)\r\n                                        //     }]}\r\n                                        /> </Col></Row>}\r\n\r\n\r\n                                </Col>\r\n\r\n\r\n                            }\r\n\r\n                        </ListWrapper>\r\n\r\n                        {/* < ListWrapper className=\"client-list-content\" ><Row>\r\n                        \r\n                        </Row>\r\n                            <Col md={12}>\r\n                                <Col md={6}>\r\n                                    <Row>\r\n                                        <FormInput\r\n                                            name={'spositionvalue'}\r\n                                            onb\r\n                                            label={this.props.intl.formatMessage({ id: \"IDS_POSITIONVALUE\" })}\r\n                                            placeholder={this.props.intl.formatMessage({ id: \"IDS_POSITIONVALUE\" })}\r\n                                            value={this.state.selectedRecord['spositionvalue']\r\n                                                ? this.state.selectedRecord['spositionvalue'] : \"\"}\r\n                                            maxLength={255}\r\n                                            isDisabled={this.props.isDisabled}\r\n                                            onKeyDown={(event) => this.getSelectedBarcodeData(this.state.selectedRecord)}\r\n                                            onChange={(event) => this.onInputOnChange(event)}\r\n                                        />\r\n                                    </Row>\r\n                                </Col>\r\n                                <Col md={6}>\r\n                                    {this.state.selectedBarcodeValue && <div className=\"d-flex justify-content-end mr-3\">\r\n                                        <Row>\r\n                                            {\r\n                                                extractedColumnList.map((item, index) => {\r\n                                                    return (\r\n                                                        <>\r\n                                                            <Col md={6} key={`specInfo_${index}`}>\r\n                                                                <FormGroup>\r\n                                                                    <FormLabel>{this.props.intl.formatMessage({ id: item.idsName })}</FormLabel>\r\n                                                                    <ReadOnlyText>{this.state.selectedBarcodeValue[item.dataField]}</ReadOnlyText>\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n                                                        </>\r\n                                                    )\r\n                                                })\r\n                                            }\r\n                                        </Row>\r\n                                    </div>}\r\n                                </Col>\r\n                            </Col>\r\n                            </ListWrapper> */}\r\n                    </>}\r\n\r\n\r\n                {\r\n                    this.state.openModal &&\r\n                    <SlideOutModal show={this.state.openModal}\r\n                        closeModal={this.closeModal}\r\n                        hideSave={true}\r\n                        showSubmit={true}\r\n                        size={this.state.openSpreadSheet || this.state.isFilterPopup ? 'xl' : \"\"}\r\n                        operation={\"\"}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.state.isFilterPopup ? \"\" : this.state.isMultiSampleAdd ? this.props.intl.formatMessage({ id: \"IDS_SAMPLESTORAGELOCATION\" })\r\n                            : this.state.editedsheetData.scontainerpath}\r\n                        onSaveClick={this.state.isFilterPopup ? this.getDynamicFilterExecuteData.bind(this) : this.onSampleMappingSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        // className={\"wide-popup\"}\r\n\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        addComponent={this.state.isFilterPopup ?\r\n                            <FilterQueryBuilder\r\n                                fields={fields}\r\n                                isSampleStorage={true}\r\n\r\n                                queryArray={this.state.queryArray}\r\n                                skip={this.state.kendoSkip}\r\n                                take={this.state.kendoTake}\r\n                                onChange={this.onChange}\r\n                                tree={this.props.Login.tree !== undefined ? this.props.Login.tree : this.state.selectedRecord.tree}\r\n                                gridColumns={this.slideList}\r\n                                filterData={this.props.Login.slideResult || []}\r\n                                handlePageChange={this.handlePageChangeFilter}\r\n                                static={true}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                updateStore={this.props.updateStore}\r\n                            />\r\n                            : this.props.Login.loadEsign ?\r\n                                <Esign operation={this.props.Login.operation}\r\n                                    formatMessage={this.props.intl.formatMessage}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                />\r\n                                :\r\n                                this.state.openSpreadSheet ? <>\r\n                                    <MatrixComponent\r\n                                        Rows={this.state.Rows || 1}\r\n                                        userInfo={this.props.Login.userInfo}\r\n                                        columns={this.state.columns || 1}\r\n                                        selectedRecord={this.state.selectedRecord.sheetData || {}}\r\n                                        sheetData={this.state.sheetData || {}}\r\n                                        isMultiSampleAdd={this.state.isMultiSampleAdd}\r\n                                        childSheetDataChange={this.childSheetDataChange}\r\n                                        editedsheetData={this.state.editedsheetData}\r\n                                        multipleSheetData={this.state.masterData &&\r\n                                            this.state.masterData.samplestoragelistpreperation &&\r\n                                            process(this.state.masterData.samplestoragelistpreperation || [],\r\n                                                this.state.dataStateChange ? this.state.dataStateChange : { skip: 0, take: 10 }).data} />\r\n                                </> :\r\n                                    <AddSampleStorageMapping\r\n                                        operation={this.state.operation}\r\n                                        selectedRecordFilter={this.state.selectedRecordFilter}\r\n                                        onInputChange={(e) => this.onInputChange(e)}\r\n                                        onComboChange={this.onComboChange}\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        childDataChange={this.childDataChange}\r\n                                        userInfo={this.props.Login.userInfo}\r\n                                    />\r\n                        }\r\n                    />\r\n                }\r\n            </>\r\n        )\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n}\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    callService\r\n})(injectIntl(SampleStorageListPreperation));"]},"metadata":{},"sourceType":"module"}