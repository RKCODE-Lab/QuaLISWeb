{"ast":null,"code":"import _toConsumableArray from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{sortData,constructOptionList,parentChildComboLoad,rearrangeDateFormat}from'../components/CommonScript';import{toast}from'react-toastify';import Axios from'axios';import{initRequest}from'./LoginAction';import{intl}from'../components/App';import{attachmentType,transactionStatus}from'../components/Enumeration';export function initialcombochangeget(nmaterialtypecode,data,userInfo){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/material/getMaterialcombo\",{nmaterialtypecode:nmaterialtypecode,\"userinfo\":userInfo}).then(function(response){var masterData=_objectSpread(_objectSpread(_objectSpread({},data),response.data),{},{searchedData:undefined});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function getAddMaterialPopup(operation,loginInfo,selectedcombo,ncontrolCode,masterData,selectedRecord,screenname){return function(dispatch){if(masterData.SelectedMaterialCategoryFilter){if(operation===\"create\"){var urlArray=[];var templateData=[];var data=[];var toggleComponents=[];var radioComponents=[];var filterQueryComponents=[];var dataparent=[];var withoutCombocomponent=[];var Layout=masterData.selectedTemplate[0].jsondata;Layout.map(function(row){return row.children.map(function(column){return column.children.map(function(component){if(component.hasOwnProperty(\"parent\")){dataparent.push(component);}if(component.inputtype==='toggle'){toggleComponents.push(component);}if(component.inputtype==='radio'){radioComponents.push(component);}if(component.hasOwnProperty(\"nsqlquerycode\")){filterQueryComponents.push(component);}return component.hasOwnProperty(\"children\")?component.children.map(function(componentrow){if(componentrow.inputtype==='toggle'){toggleComponents.push(componentrow);}if(componentrow.inputtype===\"combo\"&&!component.hasOwnProperty(\"parent\")){if(componentrow.hasOwnProperty(\"parent\")){dataparent.push(componentrow);}else{data.push(componentrow);}}if(componentrow.hasOwnProperty(\"nsqlquerycode\")){filterQueryComponents.push(componentrow);}}):component.inputtype===\"combo\"&&!component.hasOwnProperty(\"parent\")?data.push(component):withoutCombocomponent.push(component);});});});var comboComponents=data;dataparent[0]={displaymember:dataparent[0].displaymember,inputtype:dataparent[0].inputtype,label:dataparent[0].label,source:dataparent[0].source,type:dataparent[0].type,valuemember:dataparent[0].valuemember,nquerybuildertablecode:dataparent[0].nquerybuildertablecode};var filterQueryComponents1=[];filterQueryComponents.map(function(temp){//filterQueryComponents1.push({'nsqlquerycode':temp.nsqlquerycode})\nfilterQueryComponents1+=temp.nsqlquerycode+',';});var materialReq1=rsapi.post(\"dynamicpreregdesign/getComboValues\",{\"nmaterialtypecode\":masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode,\"userinfo\":loginInfo.userInfo,\"parentcolumnlist\":comboComponents,\"filterQueryComponents\":filterQueryComponents1.substring(0,filterQueryComponents1.length-1)});var materialReq2=rsapi.post('dynamicpreregdesign/getChildValues',{//ALPD-2272\nchild:Layout[0].children[0].children[0].childValue||[],parentdata:{nmaterialtypecode:masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode},parentsource:'materialcategory','nmaterialtypecode':masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode,valuemember:'nmaterialtypecode',\"userinfo\":loginInfo.userInfo,parentcolumnlist:dataparent});// const materialReq3 = rsapi.post(\"/material/getMaterialByTypeCode\",  {\n//     nmaterialtypecode: selectedcombo['nmaterialtypecode'].value,\n//     nmaterialcatcode: masterData.SelectedMaterialCategory['nmaterialcatcode'].value\n//     , \"userinfo\": userInfo\n// });\nurlArray=[materialReq1,materialReq2//,materialReq3\n];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){templateData=response[0].data;data.splice(1,0,dataparent[0]);var temp2=_objectSpread(_objectSpread({},response[0].data),response[1].data);templateData=parentChildComboLoad(data,temp2,selectedRecord,null,withoutCombocomponent,undefined,loginInfo.userInfo.slanguagetypecode,loginInfo.userInfo);toggleComponents.map(function(temp){if(temp.hasOwnProperty('defaultchecked')&&temp.defaultchecked===transactionStatus.YES){templateData['selectedRecord']=_objectSpread(_objectSpread({},templateData['selectedRecord']),{},_defineProperty({},temp.label,temp.defaultchecked));}});radioComponents.map(function(temp){if(temp.hasOwnProperty('radioOptions')){var tags=temp.radioOptions.tags;tags.map(function(tag){if(tag.hasOwnProperty('defaultchecked'))//selectedRecord[temp.label] = tag['defaultchecked']\ntemplateData['selectedRecord']=_objectSpread(_objectSpread({},templateData['selectedRecord']),{},_defineProperty({},temp.label,tag['defaultchecked']));});}});selectedRecord=templateData['selectedRecord'];if(masterData.SelectedMaterialCategoryFilter&&masterData.SelectedMaterialCategoryFilter.length!==0){templateData['comboData'][\"Material Category\"].map(function(item){if(masterData.SelectedMaterialCategoryFilter.nmaterialcatcode===item.value){selectedRecord={\"Material Category\":{\"label\":masterData.SelectedMaterialCategoryFilter.smaterialcatname,\"value\":masterData.SelectedMaterialCategoryFilter.nmaterialcatcode,\"item\":{\"jsondata\":item.item.jsondata,\"pkey\":\"nmaterialcatcode\",\"source\":\"materialcategory\"}}};}});}// selectedRecord={\n//     \"Material Category\":{\n//         \"label\":masterData.SelectedMaterialCategoryFilter.smaterialcatname,\n//         \"value\":masterData.SelectedMaterialCategoryFilter.nmaterialcatcode\n//     }\n// }\nselectedRecord['Expiry']=transactionStatus.NO;selectedRecord['Need Expiry']=transactionStatus.NO;selectedRecord['Open Expiry Need']=transactionStatus.NO;selectedRecord['Quarantine']=transactionStatus.NO;selectedRecord['Next Validation Need']=transactionStatus.NO;selectedRecord['Expiry Policy Period']=undefined;//selectedRecord['Expiry Validations'] = 'No Expiry'\n// if(selectedRecord['IDS_EXPIRY'])\n// {\n//     if(selectedRecord['IDS_EXPIRY']===transactionStatus.NO)\n//     {\n//         selectedRecord['IDS_NEEDEXPIRY']=transactionStatus.NO\n//     } \n// }\ndispatch({type:DEFAULT_RETURN,payload:{operation:operation,screenname:screenname,//ismaterialSectionneed:response[2].data.ismaterialSectionneed,\nselectedRecord:selectedRecord,showMaterialSection:false,templateData:templateData,openModal:true,selectedcombo:selectedcombo,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{var _urlArray=[];var _templateData=[];var _data=[];var _dataparent=[];var _filterQueryComponents=[];var _withoutCombocomponent=[];var _Layout=masterData.selectedTemplate[0].jsondata;_Layout.map(function(row){return row.children.map(function(column){return column.children.map(function(component){if(component.hasOwnProperty(\"parent\")){_dataparent.push(component);}if(component.hasOwnProperty(\"nsqlquerycode\")){_filterQueryComponents.push(component);}return component.hasOwnProperty(\"children\")?component.children.map(function(componentrow){if(componentrow.inputtype===\"combo\"&&!component.hasOwnProperty(\"parent\")){if(componentrow.hasOwnProperty(\"parent\")){_dataparent.push(componentrow);}else{_data.push(componentrow);}}if(componentrow.hasOwnProperty(\"nsqlquerycode\")){_filterQueryComponents.push(componentrow);}}):component.inputtype===\"combo\"&&!component.hasOwnProperty(\"parent\")?_data.push(component):_withoutCombocomponent.push(component);});});});var _comboComponents=_data;var Material=rsapi.post(\"/material/getMaterialEdit\",{'nmaterialcode':masterData.SelectedMaterial.nmaterialcode,'nmaterialtypecode':masterData.SelectedMaterialType[0].nmaterialtypecode,\"userinfo\":loginInfo.userInfo});_dataparent[0]={displaymember:_dataparent[0].displaymember,inputtype:_dataparent[0].inputtype,label:_dataparent[0].label,source:_dataparent[0].source,type:_dataparent[0].type,valuemember:_dataparent[0].valuemember};var _filterQueryComponents2=[];_filterQueryComponents.map(function(temp){// filterQueryComponents1.push({'nsqlquerycode':temp.nsqlquerycode})\n_filterQueryComponents2+=temp.nsqlquerycode+',';});var _materialReq=rsapi.post(\"dynamicpreregdesign/getComboValues\",{\"nmaterialtypecode\":masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode,\"userinfo\":loginInfo.userInfo,\"parentcolumnlist\":_comboComponents,\"filterQueryComponents\":_filterQueryComponents2.substring(0,_filterQueryComponents2.length-1)});var _materialReq2=rsapi.post('dynamicpreregdesign/getChildValues',{//ALPD-2272\nchild:_Layout[0].children[0].children[0].childValue||[],parentdata:{nmaterialtypecode:masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode},parentsource:'materialcategory','nmaterialtypecode':masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode,valuemember:'nmaterialtypecode',\"userinfo\":loginInfo.userInfo,parentcolumnlist:_dataparent});_urlArray=[_materialReq,_materialReq2,Material];dispatch(initRequest(true));Axios.all(_urlArray).then(function(response){_templateData=response[0].data;_data=[].concat(_toConsumableArray(_data),_dataparent);_templateData=parentChildComboLoad(_data,_objectSpread(_objectSpread({},response[0].data),response[1].data),selectedRecord,null,_withoutCombocomponent,undefined,loginInfo.userInfo.slanguagetypecode,loginInfo.userInfo);selectedRecord=response[2].data.EditedMaterial[0];if(response[2].data[\"EditedMaterial\"].length>0){if(response[2].data[\"MaterialDateFeild\"]!==undefined){response[2].data[\"MaterialDateFeild\"].map(function(temp){response[2].data[\"EditedMaterial\"][0][temp]=rearrangeDateFormat(loginInfo.userInfo,response[2].data[\"EditedMaterial\"][0][temp]);});response[2].data[\"DateFeildsMaterial\"].map(function(temp){if(response[2].data[\"EditedMaterial\"][0].hasOwnProperty(temp)&&response[2].data[\"EditedMaterial\"][0][temp]==='-'){delete response[2].data[\"EditedMaterial\"][0][temp];}});}else{response[2].data[\"DateFeildsMaterial\"].map(function(temp){if(response[2].data[\"EditedMaterial\"][0].hasOwnProperty(temp)&&response[2].data[\"EditedMaterial\"][0][temp]==='-'){delete response[2].data[\"EditedMaterial\"][0][temp];}});}}selectedRecord['Material Category']=_objectSpread(_objectSpread({},selectedRecord['Material Category']),{},{needsectionwise:response[2].data.EditedMaterial[0].needsectionwise});dispatch({type:DEFAULT_RETURN,payload:{operation:operation,screenname:'IDS_MATERIAL',isSelectedRecordChange:false,showMaterialSection:false,templateData:_templateData,openModal:true,selectedcombo:selectedcombo,selectedRecord:selectedRecord,ncontrolCode:ncontrolCode,loading:false,showSectionWhileEdit:false//,  ismaterialSectionneed:response[2].data.EditedMaterial[0].jsondata.needsectionwise\n}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}}else{toast.warn(intl.formatMessage({id:\"IDS_CONFIGMATERIALCAT\"}));}};}export function getMaterialDetails(inputData,masterData,userInfo){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"material/getMaterialDetails\",{\"nmaterialcode\":inputData.nmaterialcode,\"nmaterialcatcode\":masterData.SelectedMaterialCategoryFilter.nmaterialcatcode,\"nmaterialtypecode\":masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode,\"userinfo\":userInfo,fromDate:masterData.fromDate,toDate:masterData.toDate}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getMaterialEdit(screenName,operation,primaryKeyName,masterData,userInfo,ncontrolCode){return function(dispatch){var urlArray=[];if(operation===\"create\"){var EDQMManufacturer=rsapi.post(\"/edqmmanufacturer/getEDQMManufacturer\",{\"userinfo\":userInfo});urlArray=[EDQMManufacturer];}else{var _rsapi$post;var Material=rsapi.post(\"/material/getMaterialEdit\",(_rsapi$post={},_defineProperty(_rsapi$post,primaryKeyName,masterData.SelectedMaterial.jsondata.nmaterialcode),_defineProperty(_rsapi$post,'nmaterialtypecode',masterData.SelectedMaterialType.nmaterialtypecode),_defineProperty(_rsapi$post,\"userinfo\",userInfo),_rsapi$post));urlArray=[Material];}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var selectedRecord={};if(operation===\"update\"){selectedRecord=response[2].data.EditedMaterial[0].jsondata;}dispatch({type:DEFAULT_RETURN,payload:{isOpen:true,selectedRecord:operation===\"update\"?selectedRecord:{\"ntransactionstatus\":1},operation:operation,screenName:screenName,openModal:true,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getMaterialByTypeCode(selectedcombo,selectedMaterialCat,Data,userInfo){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/material/getMaterialByTypeCode\",selectedMaterialCat!==undefined?{nmaterialtypecode:selectedcombo['nmaterialtypecode'].value,nmaterialcatcode:selectedMaterialCat['nmaterialcatcode'].value,fromDate:Data.fromDate,toDate:Data.toDate,\"userinfo\":userInfo,'nflag':1}:{nmaterialtypecode:selectedcombo['nmaterialtypecode'].value,\"userinfo\":userInfo}).then(function(response){var masterData={};var tabScreen;if(response[\"data\"].ismaterialSectionneed===3){tabScreen='IDS_MATERIALSECTION';}masterData=_objectSpread(_objectSpread(_objectSpread({},Data),response.data),{},{tabScreen:tabScreen,searchedData:undefined});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,skip:0,take:20}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function getMaterialReload(selectedcombo,selectedMaterialCat,Data,userInfo){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/material/getMaterialByTypeCode\",selectedMaterialCat!==undefined?{nmaterialtypecode:selectedcombo[0]['nmaterialtypecode'],nmaterialcatcode:selectedMaterialCat['nmaterialcatcode'],fromDate:Data.fromDate,toDate:Data.toDate,\"userinfo\":userInfo,'nflag':1}:{nmaterialtypecode:selectedcombo['nmaterialtypecode'].value,\"userinfo\":userInfo}).then(function(response){var masterData={};masterData=_objectSpread(_objectSpread(_objectSpread({},Data),response.data),{},{searchedData:undefined});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,skip:0,take:20}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function getAddMaterialSectionPopup(Data,userInfo,updateInfo,ncontrolCode){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/material/getMaterialSection\",{\"userinfo\":userInfo,'nmaterialcode':Data[\"SelectedMaterial\"][\"nmaterialcode\"],'needSectionwise':Data[\"SelectedMaterialCategory\"].needSectionwise}).then(function(response){var masterData={};if(Array.isArray(response.data)){var MaterialSectionOptions=[];MaterialSectionOptions=response.data;var productCatMap=constructOptionList(response.data||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,true);var productCategoryList={productCategoryList:productCatMap.get(\"OptionList\")};masterData=_objectSpread(_objectSpread({},Data),productCategoryList);dispatch({type:DEFAULT_RETURN,payload:{operation:\"create\",masterData:masterData,updateInfo:updateInfo,ncontrolCode:ncontrolCode,openModal:true,ismaterialsectionEdit:false,isneedcombomulti:false,screenname:\"IDS_MATERIALSECTION\",showMaterialSection:true,loading:false,skip:0,take:20}});}else{toast.warn(response.data);masterData=_objectSpread({},Data);dispatch({type:DEFAULT_RETURN,payload:{operation:\"create\",masterData:masterData,updateInfo:updateInfo,openModal:false,ismaterialsectionEdit:false,isneedcombomulti:false,screenname:\"IDS_MATERIALSECTION\",showMaterialSection:true,loading:false,skip:0,take:20}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error);});};}export function getMaterialSectionEdit(inputparam){return function(dispatch){var urlArray=[];var selectedRecord=_objectSpread({},inputparam.selectedRecord);dispatch(initRequest(true));var url1=rsapi.post(\"/material/getActiveMaterialSectionById\",{editRow:inputparam[\"editRow\"],ncontrolCode:inputparam.ncontrolCode,operation:inputparam.operation,primaryKeyField:\"nmaterialsectioncode\",primaryKeyValue:inputparam.primaryKeyValue,selectedId:inputparam.primaryKeyValue,\"userinfo\":inputparam.userInfo});var url2=rsapi.post(\"/material/getMaterialSection\",{\"userinfo\":inputparam.userInfo,nmaterialcode:inputparam[\"editRow\"].nmaterialcode,primaryKeyValue:inputparam.primaryKeyValue,needSectionwise:inputparam.masterData[\"SelectedMaterialCategory\"].needSectionwise,nmaterialsectioncode:inputparam['editRow'].nmaterialsectioncode//,nflag:1\n});urlArray=[url1,url2];Axios.all(urlArray).then(function(response){var productCatMap=constructOptionList(response[0].data.MaterialSectionEditData||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,true);selectedRecord[\"nmaterialsectioncode\"]=productCatMap.get(\"OptionList\");selectedRecord[\"nreorderlevel\"]=inputparam[\"editRow\"].nreorderlevel;selectedRecord[\"nmaterialsectioncodeprimaryKeyValue\"]=inputparam.primaryKeyValue;if(!Array.isArray(response[1].data)){dispatch({type:DEFAULT_RETURN,payload:{isOpen:true,selectedRecord:selectedRecord,operation:\"update\",isneedcombomulti:true,selectedId:inputparam.primaryKeyValue,openModal:true,showMaterialSection:true,ismaterialsectionEdit:true,screenname:\"IDS_MATERIALSECTION\",ncontrolCode:inputparam.ncontrolCode,loading:false}});}var productCatMap1=constructOptionList(response[1].data||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,true);var productCategoryList2={productCategoryList:productCatMap1.get(\"OptionList\")};//productCategoryList2['productCategoryList']={...selectedRecord[\"nmaterialsectioncode\"]}\nvar masterData={};masterData=_objectSpread(_objectSpread({},inputparam.masterData),productCategoryList2);if(Array.isArray(response[1].data)){dispatch({type:DEFAULT_RETURN,payload:{isOpen:true,selectedRecord:selectedRecord,masterData:masterData,operation:\"update\",isneedcombomulti:true,selectedId:inputparam.primaryKeyValue,openModal:true,showMaterialSection:true,ismaterialsectionEdit:true,screenname:\"IDS_MATERIALSECTION\",ncontrolCode:inputparam.ncontrolCode,loading:false}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function addSafetyInstructions(Data,userInfo,ncontrolcode){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/material/getMaterialSafetyInstructions\",{'nmaterialcode':Data[\"SelectedMaterial\"].nmaterialcode,\"userinfo\":userInfo,nflag:1}).then(function(response){if(Array.isArray(response.data[\"selectedTemplateSafetyInstructions\"])){var selectedRecord=response.data[\"MaterialSafetyInstructions\"].length>0?response.data[\"MaterialSafetyInstructions\"][0].jsondata:[];var masterData={};var MaterialSafetyInstructions={MaterialSafetyInstructions:response.data[\"MaterialSafetyInstructions\"]};masterData=_objectSpread(_objectSpread({},Data),MaterialSafetyInstructions);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,loadEsign:false,selectedRecord:selectedRecord,ncontrolCode:ncontrolcode,openModal:true,screenname:\"IDS_MATERIALSAFETYINSTRUCTIONS\"}});}else{toast.warn(response.data);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function addMaterialProperty(Data,userInfo,ncontrolcode){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var date;var timeZoneList;var timezone=rsapi.post(\"timezone/getTimeZone\");var getMaterialSafety=rsapi.post(\"/material/getMaterialSafetyInstructions\",{'nmaterialcode':Data[\"SelectedMaterial\"].nmaterialcode,\"userinfo\":userInfo,nflag:2});urlArray=[getMaterialSafety,timezone];Axios.all(urlArray).then(function(response){if(Array.isArray(response[0].data[\"selectedTemplateProperties\"])){var selectedRecord=response[0].data[\"MaterialProperties\"].length>0?response[0].data[\"MaterialProperties\"][0].jsondata:[];var masterData={};var MaterialProperties={MaterialProperties:response[0].data[\"MaterialProperties\"]};// if (response[0].data[\"MaterialProperties\"].length > 0) {\n//     if (response[0].data[\"MaterialPropertiesDateFeild\"]) {\n//         response[0].data[\"MaterialPropertiesDateFeild\"].map((temp) => {\n//             response[0].data[\"MaterialProperties\"][0].jsondata[temp] =\n//                 rearrangeDateFormat(userInfo, response[0].data[\"MaterialProperties\"][0].jsondata[temp])\n//         })\n//     }\n// }\nresponse[0].data['selectedTemplateProperties'][0]['jsondata'].map(function(row){row.children.map(function(column){column.children.map(function(component,i){if(component.inputtype==='date'){if(response[0].data[\"MaterialProperties\"][0]){if(response[0].data[\"MaterialProperties\"][0].jsondata[component.label]!==\"-\"){if(response[0].data[\"MaterialProperties\"][0]){response[0].data[\"MaterialProperties\"][0].jsondata[component.label]=rearrangeDateFormat(userInfo,response[0].data[\"MaterialProperties\"][0].jsondata[component.label]);}}else{if(response[0].data[\"MaterialProperties\"][0]){delete response[0].data[\"MaterialProperties\"][0].jsondata[component.label];}}}else{if(response[0].data[\"MaterialProperties\"][0]){delete response[0].data[\"MaterialProperties\"][0].jsondata[component.label];}}}});});});//   response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'] =\n// rearrangeDateFormat(userInfo, response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'])\n//new Date(response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'])\nmasterData=_objectSpread(_objectSpread({},Data),MaterialProperties);Data['selectedTemplateProperties'][0].jsondata.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.inputtype==='date'){if(component.hasOwnProperty('timezone')){var timeZoneListMap=constructOptionList(response[1].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);timeZoneList=timeZoneListMap.get(\"OptionList\");response[0].data[\"DateFeildsProperties\"].map(function(temp){if(!selectedRecord.hasOwnProperty(temp)){selectedRecord[\"tz\".concat(temp)]=timeZoneList[0];}});}}});});});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,loadEsign:false,selectedRecord:selectedRecord,isSelectedRecordChange:false,timeZoneList:timeZoneList,ncontrolCode:ncontrolcode,openModal:true,screenname:\"IDS_MATERIALPROPERTY\"}});}else{toast.warn(response.data||response[0].data);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function addMaterialFile(inputParam,param){return function(dispatch){dispatch(initRequest(true));var urlArray=[rsapi.post(\"/material/getMaterialLinkMaster\",{nmaterialcode:param.nmaterialcode&&param.nmaterialcode,userinfo:inputParam.userInfo})];if(inputParam.operation===\"update\"){urlArray.push(rsapi.post(\"/material/editMaterialMsdsAttachment\",{userinfo:inputParam.userInfo,nmaterialcode:param.nmaterialcode&&param.nmaterialcode,nmaterialfilecode:inputParam.selectedRecord.nmaterialfilecode}));}Axios.all(urlArray).then(function(response){var linkMap=constructOptionList(response[0].data.LinkMaster,\"nlinkcode\",\"slinkname\",false,false,true);var linkmaster=linkMap.get(\"OptionList\");var selectedRecord={};var defaultLink=linkmaster.filter(function(items){return items.item.ndefaultlink===transactionStatus.YES;});var disabled=false;var editObject={};if(inputParam.operation===\"update\"){editObject=response[1].data;var nlinkcode={};var link={};if(editObject[\"jsondata\"].nattachmenttypecode===attachmentType.LINK){nlinkcode={\"label\":editObject[\"jsondata\"].slinkname,\"value\":editObject[\"jsondata\"].nlinkcode};link={slinkfilename:editObject[\"jsondata\"].sfilename,slinkdescription:editObject[\"jsondata\"].sdescription,nlinkdefaultstatus:editObject[\"jsondata\"].ndefaultstatus,sfilesize:'',nfilesize:0,ndefaultstatus:editObject[\"jsondata\"].ndefaultstatus===3?3:4,sfilename:''};}else{nlinkcode=defaultLink.length>0?defaultLink[0]:\"\";link=_defineProperty({slinkfilename:'',slinkdescription:'',nlinkdefaultstatus:4,sfilesize:editObject[\"jsondata\"].sfilesize,nfilesize:editObject[\"jsondata\"].nfilesize,ndefaultstatus:editObject[\"jsondata\"].ndefaultstatus,ssystemfilename:editObject[\"jsondata\"].ssystemfilename,sfilename:editObject[\"jsondata\"].sfilename},\"nlinkdefaultstatus\",editObject[\"jsondata\"].ndefaultstatus);}selectedRecord=_objectSpread(_objectSpread({},link),{},{sdescription:editObject[\"jsondata\"].sdescription,nmaterialfilecode:editObject[\"jsondata\"].nmaterialfilecode,nattachmenttypecode:editObject[\"jsondata\"].nattachmenttypecode,nlinkcode:nlinkcode});}else{selectedRecord={nattachmenttypecode:response[0].data.AttachmentType.length>0?response[0].data.AttachmentType[0].nattachmenttypecode:attachmentType.FTP,nlinkcode:defaultLink.length>0?defaultLink[0]:\"\",disabled:disabled};}dispatch({type:DEFAULT_RETURN,payload:{openModal:true,dcreateddate:inputParam.selectedRecord&&rearrangeDateFormat(inputParam.userInfo,inputParam.selectedRecord.dcreateddate),operation:inputParam.operation,screenname:inputParam.screenName,ncontrolCode:inputParam.ncontrolCode,selectedRecord:selectedRecord,loading:false,linkMaster:linkmaster,showSaveContinue:false,editFiles:editObject.nattachmenttypecode===attachmentType.FTP?editObject:{}}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function addMaterialAccountingProperty(Data,userInfo,ncontrolcode){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var date;var timeZoneList;var timezone=rsapi.post(\"timezone/getTimeZone\");var getMaterialSafety=rsapi.post(\"/material/getMaterialAcountingProperties\",{'nmaterialcode':Data[\"SelectedMaterial\"].nmaterialcode,\"userinfo\":userInfo,nflag:2});urlArray=[getMaterialSafety,timezone];Axios.all(urlArray).then(function(response){if(Array.isArray(response[0].data[\"selectedTemplateProperties\"])){var selectedRecord=response[0].data[\"MaterialProperties\"].length>0?response[0].data[\"MaterialProperties\"][0].jsondata:[];var masterData={};var MaterialProperties={MaterialProperties:response[0].data[\"MaterialProperties\"]};var selectedTemplateProperties=response[0].data[\"selectedTemplateProperties\"];// if (response[0].data[\"MaterialProperties\"].length > 0) \n//     if (response[0].data[\"MaterialPropertiesDateFeild\"]) {\n//         response[0].data[\"MaterialPropertiesDateFeild\"].map((temp) => {\n//             response[0].data[\"MaterialProperties\"][0].jsondata[temp] =\n//                 rearrangeDateFormat(userInfo, response[0].data[\"MaterialProperties\"][0].jsondata[temp])\n//         })\n//     }\n// }\nresponse[0].data['selectedTemplateProperties'][0]['jsondata'].map(function(row){row.children.map(function(column){column.children.map(function(component,i){if(component.inputtype==='date'){if(response[0].data[\"MaterialProperties\"][0]){if(response[0].data[\"MaterialProperties\"][0].jsondata[component.label]!==\"-\"){if(response[0].data[\"MaterialProperties\"][0]){response[0].data[\"MaterialProperties\"][0].jsondata[component.label]=rearrangeDateFormat(userInfo,response[0].data[\"MaterialProperties\"][0].jsondata[component.label]);}}else{if(response[0].data[\"MaterialProperties\"][0]){delete response[0].data[\"MaterialProperties\"][0].jsondata[component.label];}}}else{if(response[0].data[\"MaterialProperties\"][0]){delete response[0].data[\"MaterialProperties\"][0].jsondata[component.label];}}}});});});//   response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'] =\n// rearrangeDateFormat(userInfo, response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'])\n//new Date(response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'])\nmasterData=_objectSpread(_objectSpread(_objectSpread({},Data),MaterialProperties),{},{selectedTemplateProperties:selectedTemplateProperties// ALPD-854\n// searchedData: undefined \n});Data['selectedTemplateProperties'][0].jsondata.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.inputtype==='date'){if(component.hasOwnProperty('timezone')){var timeZoneListMap=constructOptionList(response[1].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);timeZoneList=timeZoneListMap.get(\"OptionList\");response[0].data[\"DateFeildsProperties\"].map(function(temp){if(!selectedRecord.hasOwnProperty(temp)){selectedRecord[\"tz\".concat(temp)]=timeZoneList[0];}});}}});});});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,loadEsign:false,selectedRecord:selectedRecord,isSelectedRecordChange:false,timeZoneList:timeZoneList,ncontrolCode:ncontrolcode,openModal:true,screenname:\"IDS_MATERIALACCOUNTING\"}});}else{toast.warn(response.data||response[0].data);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}export function getAddMaterialAccountingPopup(operation,loginInfo,selectedcombo,ncontrolCode,masterData,selectedRecord,screenname,samplestate){return function(dispatch){if(masterData.SelectedMaterialCategoryFilter){if(operation===\"create\"){var urlArray=[];var templateData=[];var data=[];var toggleComponents=[];var radioComponents=[];var filterQueryComponents=[];var dataparent=[];var withoutCombocomponent=[];var selectedTemplate=[];var Layout=masterData.selectedTemplate[0].jsondata;if(samplestate===\"powder\"||samplestate===\"Liquid\"){Layout=masterData.selectedTemplatepowder[0].jsondata;selectedTemplate=masterData.selectedTemplatepowder;}// else if(samplestate===\"Liquid\"){\n//      Layout = masterData.selectedTemplatesolution[0].jsondata \n//      selectedTemplate=masterData.selectedTemplatesolution\n// }\nelse{selectedTemplate=masterData.selectedTemplatePellet;}masterData=_objectSpread(_objectSpread({samplestate:samplestate},masterData),{},{selectedTemplate:selectedTemplate});//const Layout = masterData.selectedTemplate[0].jsondata\nLayout.map(function(row){return row.children.map(function(column){return column.children.map(function(component){if(component.hasOwnProperty(\"parent\")){dataparent.push(component);}if(component.inputtype==='toggle'){toggleComponents.push(component);}if(component.inputtype==='radio'){radioComponents.push(component);}if(component.hasOwnProperty(\"nsqlquerycode\")){filterQueryComponents.push(component);}return component.hasOwnProperty(\"children\")?component.children.map(function(componentrow){if(componentrow.inputtype==='toggle'){toggleComponents.push(componentrow);}if(componentrow.inputtype===\"combo\"&&!component.hasOwnProperty(\"parent\")){if(componentrow.hasOwnProperty(\"parent\")){dataparent.push(componentrow);}else{data.push(componentrow);}}if(componentrow.hasOwnProperty(\"nsqlquerycode\")){filterQueryComponents.push(componentrow);}}):component.inputtype===\"combo\"&&!component.hasOwnProperty(\"parent\")?data.push(component):withoutCombocomponent.push(component);});});});var comboComponents=data;var Material=rsapi.post(\"/material/getMaterialAvailableQty\",{'nmaterialcode':masterData.SelectedMaterial.nmaterialcode,\"userinfo\":loginInfo.userInfo});dataparent[0]={displaymember:dataparent[0].displaymember,inputtype:dataparent[0].inputtype,label:dataparent[0].label,source:dataparent[0].source,type:dataparent[0].type,valuemember:dataparent[0].valuemember,nquerybuildertablecode:dataparent[0].nquerybuildertablecode};var filterQueryComponents1=[];filterQueryComponents.map(function(temp){filterQueryComponents1+=temp.nsqlquerycode+',';});var materialReq1=rsapi.post(\"dynamicpreregdesign/getComboValues\",{\"nmaterialtypecode\":masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode,\"userinfo\":loginInfo.userInfo,\"parentcolumnlist\":comboComponents,\"filterQueryComponents\":filterQueryComponents1.substring(0,filterQueryComponents1.length-1)});var materialReq2=rsapi.post('dynamicpreregdesign/getChildValues',{child:Layout[0].children[0].children[0].childValue||[],parentdata:{nmaterialtypecode:masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode},parentsource:'materialcategory','nmaterialtypecode':masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode,valuemember:'nmaterialtypecode',\"userinfo\":loginInfo.userInfo,parentcolumnlist:dataparent});urlArray=[materialReq1,materialReq2,Material//,materialReq3\n];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){templateData=response[0].data;data.splice(1,0,dataparent[0]);var temp2=_objectSpread(_objectSpread({},response[0].data),response[1].data);templateData=parentChildComboLoad(data,temp2,selectedRecord,null,withoutCombocomponent,undefined,loginInfo.userInfo.slanguagetypecode,loginInfo.userInfo);toggleComponents.map(function(temp){if(temp.hasOwnProperty('defaultchecked')&&temp.defaultchecked===transactionStatus.YES){templateData['selectedRecord']=_objectSpread(_objectSpread({},templateData['selectedRecord']),{},_defineProperty({},temp.label,temp.defaultchecked));}});radioComponents.map(function(temp){if(temp.hasOwnProperty('radioOptions')){var tags=temp.radioOptions.tags;tags.map(function(tag){if(tag.hasOwnProperty('defaultchecked'))templateData['selectedRecord']=_objectSpread(_objectSpread({},templateData['selectedRecord']),{},_defineProperty({},temp.label,tag['defaultchecked']));});}});var defaultValue=[];response[2].data.Productname.map(function(item){defaultValue.push({label:item['sproductname'],value:item['sproductname'],item:item});return defaultValue;});templateData['comboData']=_objectSpread(_objectSpread({},templateData['comboData']),{},{'SampleName':defaultValue});selectedRecord=templateData['selectedRecord'];//delete templateData.selectedRecord[\"Material Category\"]\nif(masterData.SelectedMaterialCategoryFilter&&masterData.SelectedMaterialCategoryFilter.length!==0){templateData['comboData'][\"Material Category\"].map(function(item){if(masterData.SelectedMaterialCategoryFilter.nmaterialcatcode===item.value){selectedRecord={\"Material Category\":{\"label\":masterData.SelectedMaterialCategoryFilter.smaterialcatname,\"value\":masterData.SelectedMaterialCategoryFilter.nmaterialcatcode,\"item\":{\"jsondata\":item.item.jsondata,\"pkey\":\"nmaterialcatcode\",\"source\":\"materialcategory\"}}};}});}selectedRecord['AvailableQty']=response[2].data.AvailableQty;selectedRecord['AvailableUraniumQty']=response[2].data.AvailableUraniumQty;selectedRecord['MaterialName']=masterData.SelectedMaterial[\"Material Name\"];//selectedRecord['SampleName']= masterData.SelectedMaterial[\"Material Name\"]\nselectedRecord['suraniumconversionfactor']=response[2].data.suraniumconversionfactor;selectedRecord['Transaction Date']=rearrangeDateFormat(loginInfo.userInfo,masterData.Currentdate);selectedRecord=_objectSpread({\"materialinventorytype\":{\"label\":response[2].data.Inventorytype.sinventorytypename,\"value\":response[2].data.Inventorytype.ninventorytypecode},\"SampleName\":{\"label\":masterData.SelectedMaterial[\"Material Name\"],\"value\":0}},selectedRecord);dispatch({type:DEFAULT_RETURN,payload:{operation:operation,screenname:screenname,masterData:masterData,//ismaterialSectionneed:response[2].data.ismaterialSectionneed,\nselectedRecord:selectedRecord,showMaterialSection:false,templateData:templateData,openModal:true,selectedcombo:selectedcombo,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}}else{toast.warn(intl.formatMessage({id:\"IDS_CONFIGMATERIALCAT\"}));}};}export function getReportDetails(masterData,userInfo){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"material/getUraniumContentType\",{\"userinfo\":userInfo}).then(function(response){//let UraniumContentType=;\nvar uraniumcontenttypeMap=constructOptionList(response.data.lstUraniumContentType||[],\"nuraniumcontenttypecode\",\"suraniumcontenttype\",undefined,undefined,false);var UraniumContentType=uraniumcontenttypeMap.get(\"OptionList\");var accountingPlantGroupMap=constructOptionList(response.data.lstAccountingPlantGroup||[],\"nmaterialaccountinggroupcode\",\"smaterialaccountinggroupname\",undefined,undefined,false);var accountingPlantGroup=accountingPlantGroupMap.get(\"OptionList\");//  const defaultValue = [];\n// response.data.month.map((item, index)=> {\n//     defaultValue.push({\n//         label: item[index],\n//         item: index\n//       })\n//     return defaultValue\n//   });\nvar listOfMonth=Object.keys(response.data.month).map(function(key){return{label:response.data.month[key],value:parseInt(key)};});masterData=_objectSpread(_objectSpread({},masterData),{},{UraniumContentType:UraniumContentType,listOfMonth:listOfMonth,accountingPlantGroup:accountingPlantGroup});//sortData(masterData);\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,modalShow:true}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/actions/MaterialAction.js"],"names":["rsapi","DEFAULT_RETURN","sortData","constructOptionList","parentChildComboLoad","rearrangeDateFormat","toast","Axios","initRequest","intl","attachmentType","transactionStatus","initialcombochangeget","nmaterialtypecode","data","userInfo","dispatch","post","then","response","masterData","searchedData","undefined","type","payload","loading","catch","error","formatMessage","id","message","getAddMaterialPopup","operation","loginInfo","selectedcombo","ncontrolCode","selectedRecord","screenname","SelectedMaterialCategoryFilter","urlArray","templateData","toggleComponents","radioComponents","filterQueryComponents","dataparent","withoutCombocomponent","Layout","selectedTemplate","jsondata","map","row","children","column","component","hasOwnProperty","push","inputtype","componentrow","comboComponents","displaymember","label","source","valuemember","nquerybuildertablecode","filterQueryComponents1","temp","nsqlquerycode","materialReq1","SelectedMaterialTypeFilter","substring","length","materialReq2","child","childValue","parentdata","parentsource","parentcolumnlist","all","splice","temp2","slanguagetypecode","defaultchecked","YES","tags","radioOptions","tag","item","nmaterialcatcode","value","smaterialcatname","NO","showMaterialSection","openModal","status","warn","Material","SelectedMaterial","nmaterialcode","SelectedMaterialType","EditedMaterial","needsectionwise","isSelectedRecordChange","showSectionWhileEdit","getMaterialDetails","inputData","fromDate","toDate","getMaterialEdit","screenName","primaryKeyName","EDQMManufacturer","isOpen","getMaterialByTypeCode","selectedMaterialCat","Data","tabScreen","ismaterialSectionneed","skip","take","getMaterialReload","getAddMaterialSectionPopup","updateInfo","needSectionwise","Array","isArray","MaterialSectionOptions","productCatMap","productCategoryList","get","ismaterialsectionEdit","isneedcombomulti","getMaterialSectionEdit","inputparam","url1","editRow","primaryKeyField","primaryKeyValue","selectedId","url2","nmaterialsectioncode","MaterialSectionEditData","nreorderlevel","productCatMap1","productCategoryList2","addSafetyInstructions","ncontrolcode","nflag","MaterialSafetyInstructions","loadEsign","addMaterialProperty","date","timeZoneList","timezone","getMaterialSafety","MaterialProperties","i","timeZoneListMap","addMaterialFile","inputParam","param","userinfo","nmaterialfilecode","linkMap","LinkMaster","linkmaster","defaultLink","filter","items","ndefaultlink","disabled","editObject","nlinkcode","link","nattachmenttypecode","LINK","slinkname","slinkfilename","sfilename","slinkdescription","sdescription","nlinkdefaultstatus","ndefaultstatus","sfilesize","nfilesize","ssystemfilename","AttachmentType","FTP","dcreateddate","linkMaster","showSaveContinue","editFiles","addMaterialAccountingProperty","selectedTemplateProperties","getAddMaterialAccountingPopup","samplestate","selectedTemplatepowder","selectedTemplatePellet","defaultValue","Productname","AvailableQty","AvailableUraniumQty","suraniumconversionfactor","Currentdate","Inventorytype","sinventorytypename","ninventorytypecode","getReportDetails","uraniumcontenttypeMap","lstUraniumContentType","UraniumContentType","accountingPlantGroupMap","lstAccountingPlantGroup","accountingPlantGroup","listOfMonth","Object","keys","month","key","parseInt","modalShow"],"mappings":"ujBAAA,MAAOA,CAAAA,KAAP,KAAkB,UAAlB,CACA,OAASC,cAAT,KAA+B,cAA/B,CACA,OAASC,QAAT,CAAmBC,mBAAnB,CAAwCC,oBAAxC,CAA8DC,mBAA9D,KAAyF,4BAAzF,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,OAASC,IAAT,KAAqB,mBAArB,CACA,OAASC,cAAT,CAAyBC,iBAAzB,KAAkD,2BAAlD,CAEA,MAAO,SAASC,CAAAA,qBAAT,CAA+BC,iBAA/B,CAAkDC,IAAlD,CAAwDC,QAAxD,CAAkE,CACrE,MAAO,UAAUC,QAAV,CAAoB,CACvBA,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAR,KAAK,CAACiB,IAAN,CAAW,4BAAX,CAAyC,CAAEJ,iBAAiB,CAAjBA,iBAAF,CAAqB,WAAYE,QAAjC,CAAzC,EACKG,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAMC,CAAAA,UAAU,8CAAQN,IAAR,EAAiBK,QAAQ,CAACL,IAA1B,MAAgCO,YAAY,CAAEC,SAA9C,EAAhB,CACAN,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BJ,UAAU,CAAVA,UAD2B,CACfK,OAAO,CAAE,KADM,CAD1B,CAAD,CAAR,CAKH,CARL,EASKC,KATL,CASW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACAnB,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CAZL,EAaH,CAfD,CAgBH,CAED,MAAO,SAASC,CAAAA,mBAAT,CAA6BC,SAA7B,CAAwCC,SAAxC,CAAmDC,aAAnD,CAAkEC,YAAlE,CAAgFf,UAAhF,CAA4FgB,cAA5F,CAA2GC,UAA3G,CAAuH,CAC1H,MAAO,UAAUrB,QAAV,CAAoB,CACvB,GAAII,UAAU,CAACkB,8BAAf,CAA+C,CAC3C,GAAIN,SAAS,GAAK,QAAlB,CAA4B,CACxB,GAAIO,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,YAAY,CAAG,EAAnB,CACA,GAAI1B,CAAAA,IAAI,CAAG,EAAX,CACA,GAAI2B,CAAAA,gBAAgB,CAAG,EAAvB,CACA,GAAIC,CAAAA,eAAe,CAAG,EAAtB,CACA,GAAIC,CAAAA,qBAAqB,CAAG,EAA5B,CACA,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAMC,CAAAA,qBAAqB,CAAG,EAA9B,CACA,GAAMC,CAAAA,MAAM,CAAG1B,UAAU,CAAC2B,gBAAX,CAA4B,CAA5B,EAA+BC,QAA9C,CACAF,MAAM,CAACG,GAAP,CAAW,SAAAC,GAAG,CAAI,CACd,MAAOA,CAAAA,GAAG,CAACC,QAAJ,CAAaF,GAAb,CAAiB,SAAAG,MAAM,CAAI,CAC9B,MAAOA,CAAAA,MAAM,CAACD,QAAP,CAAgBF,GAAhB,CAAoB,SAAAI,SAAS,CAAI,CACpC,GAAIA,SAAS,CAACC,cAAV,CAAyB,QAAzB,CAAJ,CAAwC,CACpCV,UAAU,CAACW,IAAX,CAAgBF,SAAhB,EACH,CACD,GAAIA,SAAS,CAACG,SAAV,GAAwB,QAA5B,CAAsC,CAClCf,gBAAgB,CAACc,IAAjB,CAAsBF,SAAtB,EACH,CACD,GAAIA,SAAS,CAACG,SAAV,GAAwB,OAA5B,CAAqC,CACjCd,eAAe,CAACa,IAAhB,CAAqBF,SAArB,EACH,CACD,GAAIA,SAAS,CAACC,cAAV,CAAyB,eAAzB,CAAJ,CAA+C,CAC3CX,qBAAqB,CAACY,IAAtB,CAA2BF,SAA3B,EACH,CACD,MAAOA,CAAAA,SAAS,CAACC,cAAV,CAAyB,UAAzB,EAAuCD,SAAS,CAACF,QAAV,CAAmBF,GAAnB,CAAuB,SAAAQ,YAAY,CAAI,CACjF,GAAIA,YAAY,CAACD,SAAb,GAA2B,QAA/B,CAAyC,CACrCf,gBAAgB,CAACc,IAAjB,CAAsBE,YAAtB,EACH,CACD,GAAIA,YAAY,CAACD,SAAb,GAA2B,OAA3B,EAAsC,CAAEH,SAAS,CAACC,cAAV,CAAyB,QAAzB,CAA5C,CAAiF,CAC7E,GAAIG,YAAY,CAACH,cAAb,CAA4B,QAA5B,CAAJ,CAA2C,CACvCV,UAAU,CAACW,IAAX,CAAgBE,YAAhB,EACH,CAFD,IAGK,CACD3C,IAAI,CAACyC,IAAL,CAAUE,YAAV,EACH,CAEJ,CACD,GAAIA,YAAY,CAACH,cAAb,CAA4B,eAA5B,CAAJ,CAAkD,CAC9CX,qBAAqB,CAACY,IAAtB,CAA2BE,YAA3B,EACH,CACJ,CAhB6C,CAAvC,CAiBDJ,SAAS,CAACG,SAAV,GAAwB,OAAxB,EAAmC,CAAEH,SAAS,CAACC,cAAV,CAAyB,QAAzB,CAArC,CACFxC,IAAI,CAACyC,IAAL,CAAUF,SAAV,CADE,CACqBR,qBAAqB,CAACU,IAAtB,CAA2BF,SAA3B,CAlB3B,CAmBH,CAhCM,CAAP,CAiCH,CAlCM,CAAP,CAmCH,CApCD,EAqCA,GAAMK,CAAAA,eAAe,CAAG5C,IAAxB,CAEA8B,UAAU,CAAC,CAAD,CAAV,CAAgB,CACZe,aAAa,CAAEf,UAAU,CAAC,CAAD,CAAV,CAAce,aADjB,CAEZH,SAAS,CAAEZ,UAAU,CAAC,CAAD,CAAV,CAAcY,SAFb,CAGZI,KAAK,CAAEhB,UAAU,CAAC,CAAD,CAAV,CAAcgB,KAHT,CAIZC,MAAM,CAAEjB,UAAU,CAAC,CAAD,CAAV,CAAciB,MAJV,CAKZtC,IAAI,CAAEqB,UAAU,CAAC,CAAD,CAAV,CAAcrB,IALR,CAMZuC,WAAW,CAAElB,UAAU,CAAC,CAAD,CAAV,CAAckB,WANf,CAOZC,sBAAsB,CAAEnB,UAAU,CAAC,CAAD,CAAV,CAAcmB,sBAP1B,CAAhB,CASA,GAAIC,CAAAA,sBAAsB,CAAG,EAA7B,CACArB,qBAAqB,CAACM,GAAtB,CAA0B,SAAAgB,IAAI,CAAI,CAC9B;AACAD,sBAAsB,EAAIC,IAAI,CAACC,aAAL,CAAqB,GAA/C,CACH,CAHD,EAIA,GAAMC,CAAAA,YAAY,CAAGnE,KAAK,CAACiB,IAAN,CAAW,oCAAX,CACjB,CACI,oBAAqBG,UAAU,CAACgD,0BAAX,CAAsC,CAAtC,EAAyCvD,iBADlE,CAEM,WAAYoB,SAAS,CAAClB,QAF5B,CAEsC,mBAAoB2C,eAF1D,CAGI,wBAAyBM,sBAAsB,CAACK,SAAvB,CAAiC,CAAjC,CAAoCL,sBAAsB,CAACM,MAAvB,CAAgC,CAApE,CAH7B,CADiB,CAArB,CAMA,GAAMC,CAAAA,YAAY,CAAGvE,KAAK,CAACiB,IAAN,CAAW,oCAAX,CAAiD,CAClE;AACAuD,KAAK,CAAE1B,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,CAAmB,CAAnB,EAAsBA,QAAtB,CAA+B,CAA/B,EAAkCsB,UAAlC,EAAgD,EAFW,CAGlEC,UAAU,CAAE,CAAE7D,iBAAiB,CAAEO,UAAU,CAACgD,0BAAX,CAAsC,CAAtC,EAAyCvD,iBAA9D,CAHsD,CAIlE8D,YAAY,CAAE,kBAJoD,CAKlE,oBAAoBvD,UAAU,CAACgD,0BAAX,CAAsC,CAAtC,EAAyCvD,iBALK,CAMlEiD,WAAW,CAAE,mBANqD,CAOlE,WAAY7B,SAAS,CAAClB,QAP4C,CAQlE6D,gBAAgB,CAAEhC,UARgD,CAAjD,CAArB,CAUA;AACA;AACA;AACA;AACA;AACAL,QAAQ,CAAG,CAAC4B,YAAD,CAAeI,YACtB;AADO,CAAX,CAGAvD,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAD,KAAK,CAACsE,GAAN,CAAUtC,QAAV,EACKrB,IADL,CACU,SAAAC,QAAQ,CAAI,CACdqB,YAAY,CAAGrB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAA3B,CACAA,IAAI,CAACgE,MAAL,CAAY,CAAZ,CAAe,CAAf,CAAkBlC,UAAU,CAAC,CAAD,CAA5B,EACA,GAAMmC,CAAAA,KAAK,gCAAQ5D,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAApB,EAA6BK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAzC,CAAX,CACA0B,YAAY,CAAGpC,oBAAoB,CAACU,IAAD,CAAOiE,KAAP,CAAc3C,cAAd,CAA8B,IAA9B,CAAoCS,qBAApC,CAA2DvB,SAA3D,CAAsEW,SAAS,CAAClB,QAAV,CAAmBiE,iBAAzF,CAA4G/C,SAAS,CAAClB,QAAtH,CAAnC,CACA0B,gBAAgB,CAACQ,GAAjB,CAAqB,SAACgB,IAAD,CAAU,CAC3B,GAAIA,IAAI,CAACX,cAAL,CAAoB,gBAApB,GAAyCW,IAAI,CAACgB,cAAL,GAAwBtE,iBAAiB,CAACuE,GAAvF,CAA4F,CACxF1C,YAAY,CAAC,gBAAD,CAAZ,gCACOA,YAAY,CAAC,gBAAD,CADnB,wBAEKyB,IAAI,CAACL,KAFV,CAEkBK,IAAI,CAACgB,cAFvB,GAIH,CACJ,CAPD,EAQAvC,eAAe,CAACO,GAAhB,CAAoB,SAACgB,IAAD,CAAU,CAC1B,GAAIA,IAAI,CAACX,cAAL,CAAoB,cAApB,CAAJ,CAAyC,CACrC,GAAI6B,CAAAA,IAAI,CAAClB,IAAI,CAACmB,YAAL,CAAkBD,IAA3B,CACAA,IAAI,CAAClC,GAAL,CAAS,SAACoC,GAAD,CAAS,CACd,GAAGA,GAAG,CAAC/B,cAAJ,CAAmB,gBAAnB,CAAH,CACA;AACAd,YAAY,CAAC,gBAAD,CAAZ,gCACOA,YAAY,CAAC,gBAAD,CADnB,wBAEKyB,IAAI,CAACL,KAFV,CAEkByB,GAAG,CAAC,gBAAD,CAFrB,GAIH,CAPD,EAQH,CACJ,CAZD,EAaAjD,cAAc,CAAGI,YAAY,CAAC,gBAAD,CAA7B,CACA,GAAGpB,UAAU,CAACkB,8BAAX,EAA2ClB,UAAU,CAACkB,8BAAX,CAA0CgC,MAA1C,GAAmD,CAAjG,CAAmG,CAC/F9B,YAAY,CAAC,WAAD,CAAZ,CAA0B,mBAA1B,EAA+CS,GAA/C,CAAmD,SAAAqC,IAAI,CAAE,CACrD,GAAIlE,UAAU,CAACkB,8BAAX,CAA0CiD,gBAA1C,GAA+DD,IAAI,CAACE,KAAxE,CAA+E,CAC3EpD,cAAc,CAAG,CACb,oBAAqB,CACjB,QAAShB,UAAU,CAACkB,8BAAX,CAA0CmD,gBADlC,CAEjB,QAASrE,UAAU,CAACkB,8BAAX,CAA0CiD,gBAFlC,CAGjB,OAAQ,CAAE,WAAYD,IAAI,CAACA,IAAL,CAAUtC,QAAxB,CAAiC,OAAQ,kBAAzC,CAA6D,SAAU,kBAAvE,CAHS,CADR,CAAjB,CAOH,CACT,CAVI,EAWN,CAEE;AACA;AACA;AACA;AACA;AACA;AACAZ,cAAc,CAAC,QAAD,CAAd,CAA2BzB,iBAAiB,CAAC+E,EAA7C,CACAtD,cAAc,CAAC,aAAD,CAAd,CAAgCzB,iBAAiB,CAAC+E,EAAlD,CACAtD,cAAc,CAAC,kBAAD,CAAd,CAAqCzB,iBAAiB,CAAC+E,EAAvD,CACAtD,cAAc,CAAC,YAAD,CAAd,CAA+BzB,iBAAiB,CAAC+E,EAAjD,CACAtD,cAAc,CAAC,sBAAD,CAAd,CAAyCzB,iBAAiB,CAAC+E,EAA3D,CACAtD,cAAc,CAAC,sBAAD,CAAd,CAAyCd,SAAzC,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAN,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BQ,SAAS,CAATA,SAD2B,CAChBK,UAAU,CAAEA,UADI,CAE3B;AACAD,cAAc,CAAdA,cAH2B,CAGXuD,mBAAmB,CAAE,KAHV,CAGiBnD,YAAY,CAAZA,YAHjB,CAG+BoD,SAAS,CAAE,IAH1C,CAGgD1D,aAAa,CAAbA,aAHhD,CAI3BC,YAAY,CAAZA,YAJ2B,CAIbV,OAAO,CAAE,KAJI,CAD1B,CAAD,CAAR,CAQH,CAtEL,EAuEKC,KAvEL,CAuEW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACR,QAAN,CAAe0E,MAAf,GAA0B,GAA9B,CAAmC,CAC/BvF,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CACDxB,KAAK,CAACwF,IAAN,CAAWrF,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACR,QAAN,CAAeL,IAArB,CAAnB,CAAX,EACH,CACJ,CA/EL,EAgFH,CAxKD,IAyKK,CACD,GAAIyB,CAAAA,SAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,aAAY,CAAG,EAAnB,CACA,GAAI1B,CAAAA,KAAI,CAAG,EAAX,CACA,GAAI8B,CAAAA,WAAU,CAAG,EAAjB,CACA,GAAID,CAAAA,sBAAqB,CAAG,EAA5B,CACA,GAAME,CAAAA,sBAAqB,CAAG,EAA9B,CACA,GAAMC,CAAAA,OAAM,CAAG1B,UAAU,CAAC2B,gBAAX,CAA4B,CAA5B,EAA+BC,QAA9C,CACAF,OAAM,CAACG,GAAP,CAAW,SAAAC,GAAG,CAAI,CACd,MAAOA,CAAAA,GAAG,CAACC,QAAJ,CAAaF,GAAb,CAAiB,SAAAG,MAAM,CAAI,CAC9B,MAAOA,CAAAA,MAAM,CAACD,QAAP,CAAgBF,GAAhB,CAAoB,SAAAI,SAAS,CAAI,CACpC,GAAIA,SAAS,CAACC,cAAV,CAAyB,QAAzB,CAAJ,CAAwC,CACpCV,WAAU,CAACW,IAAX,CAAgBF,SAAhB,EACH,CACD,GAAIA,SAAS,CAACC,cAAV,CAAyB,eAAzB,CAAJ,CAA+C,CAC3CX,sBAAqB,CAACY,IAAtB,CAA2BF,SAA3B,EACH,CACD,MAAOA,CAAAA,SAAS,CAACC,cAAV,CAAyB,UAAzB,EAAuCD,SAAS,CAACF,QAAV,CAAmBF,GAAnB,CAAuB,SAAAQ,YAAY,CAAI,CACjF,GAAIA,YAAY,CAACD,SAAb,GAA2B,OAA3B,EAAsC,CAAEH,SAAS,CAACC,cAAV,CAAyB,QAAzB,CAA5C,CAAiF,CAC7E,GAAIG,YAAY,CAACH,cAAb,CAA4B,QAA5B,CAAJ,CAA2C,CACvCV,WAAU,CAACW,IAAX,CAAgBE,YAAhB,EACH,CAFD,IAGK,CACD3C,KAAI,CAACyC,IAAL,CAAUE,YAAV,EACH,CACJ,CACD,GAAIA,YAAY,CAACH,cAAb,CAA4B,eAA5B,CAAJ,CAAkD,CAC9CX,sBAAqB,CAACY,IAAtB,CAA2BE,YAA3B,EACH,CACJ,CAZ6C,CAAvC,CAaDJ,SAAS,CAACG,SAAV,GAAwB,OAAxB,EAAmC,CAAEH,SAAS,CAACC,cAAV,CAAyB,QAAzB,CAArC,CAA2ExC,KAAI,CAACyC,IAAL,CAAUF,SAAV,CAA3E,CAAkGR,sBAAqB,CAACU,IAAtB,CAA2BF,SAA3B,CAbxG,CAcH,CArBM,CAAP,CAsBH,CAvBM,CAAP,CAwBH,CAzBD,EA0BA,GAAMK,CAAAA,gBAAe,CAAG5C,KAAxB,CACA,GAAMiF,CAAAA,QAAQ,CAAG/F,KAAK,CAACiB,IAAN,CAAW,2BAAX,CAAwC,CAAE,gBAAiBG,UAAU,CAAC4E,gBAAX,CAA4BC,aAA/C,CACzD,oBAAqB7E,UAAU,CAAC8E,oBAAX,CAAgC,CAAhC,EAAmCrF,iBADC,CACkB,WAAYoB,SAAS,CAAClB,QADxC,CAAxC,CAAjB,CAEA6B,WAAU,CAAC,CAAD,CAAV,CAAgB,CACZe,aAAa,CAAEf,WAAU,CAAC,CAAD,CAAV,CAAce,aADjB,CAEZH,SAAS,CAAEZ,WAAU,CAAC,CAAD,CAAV,CAAcY,SAFb,CAGZI,KAAK,CAAEhB,WAAU,CAAC,CAAD,CAAV,CAAcgB,KAHT,CAIZC,MAAM,CAAEjB,WAAU,CAAC,CAAD,CAAV,CAAciB,MAJV,CAKZtC,IAAI,CAAEqB,WAAU,CAAC,CAAD,CAAV,CAAcrB,IALR,CAMZuC,WAAW,CAAElB,WAAU,CAAC,CAAD,CAAV,CAAckB,WANf,CAAhB,CAQA,GAAIE,CAAAA,uBAAsB,CAAG,EAA7B,CACArB,sBAAqB,CAACM,GAAtB,CAA0B,SAAAgB,IAAI,CAAI,CAC9B;AACAD,uBAAsB,EAAIC,IAAI,CAACC,aAAL,CAAqB,GAA/C,CACH,CAHD,EAIA,GAAMC,CAAAA,YAAY,CAAGnE,KAAK,CAACiB,IAAN,CAAW,oCAAX,CACjB,CACI,oBAAqBG,UAAU,CAACgD,0BAAX,CAAsC,CAAtC,EAAyCvD,iBADlE,CAEK,WAAYoB,SAAS,CAAClB,QAF3B,CAEqC,mBAAoB2C,gBAFzD,CAGI,wBAAyBM,uBAAsB,CAACK,SAAvB,CAAiC,CAAjC,CAAoCL,uBAAsB,CAACM,MAAvB,CAAgC,CAApE,CAH7B,CADiB,CAArB,CAMA,GAAMC,CAAAA,aAAY,CAAGvE,KAAK,CAACiB,IAAN,CAAW,oCAAX,CAAiD,CAChE;AACFuD,KAAK,CAAE1B,OAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,CAAmB,CAAnB,EAAsBA,QAAtB,CAA+B,CAA/B,EAAkCsB,UAAlC,EAA8C,EAFa,CAGlEC,UAAU,CAAE,CAAE7D,iBAAiB,CAAEO,UAAU,CAACgD,0BAAX,CAAsC,CAAtC,EAAyCvD,iBAA9D,CAHsD,CAIlE8D,YAAY,CAAE,kBAJoD,CAKlE,oBAAoBvD,UAAU,CAACgD,0BAAX,CAAsC,CAAtC,EAAyCvD,iBALK,CAMlEiD,WAAW,CAAE,mBANqD,CAOlE,WAAY7B,SAAS,CAAClB,QAP4C,CAQlE6D,gBAAgB,CAAEhC,WARgD,CAAjD,CAArB,CAUAL,SAAQ,CAAG,CAAC4B,YAAD,CAAeI,aAAf,CAA6BwB,QAA7B,CAAX,CACA/E,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAD,KAAK,CAACsE,GAAN,CAAUtC,SAAV,EACKrB,IADL,CACU,SAAAC,QAAQ,CAAI,CACdqB,aAAY,CAAGrB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAA3B,CACAA,KAAI,8BAAOA,KAAP,EAAgB8B,WAAhB,CAAJ,CACAJ,aAAY,CAAGpC,oBAAoB,CAACU,KAAD,gCAAYK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAxB,EAAiCK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAA7C,EAAqDsB,cAArD,CAAqE,IAArE,CAA2ES,sBAA3E,CAAkGvB,SAAlG,CAA6GW,SAAS,CAAClB,QAAV,CAAmBiE,iBAAhI,CAAmJ/C,SAAS,CAAClB,QAA7J,CAAnC,CACAqB,cAAc,CAAGjB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiBqF,cAAjB,CAAgC,CAAhC,CAAjB,CAEA,GAAIhF,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,gBAAjB,EAAmCwD,MAAnC,CAA4C,CAAhD,CAAmD,CAC/C,GAAInD,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,mBAAjB,IAAwCQ,SAA5C,CAAuD,CACnDH,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,mBAAjB,EAAsCmC,GAAtC,CAA0C,SAACgB,IAAD,CAAU,CAChD9C,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,gBAAjB,EAAmC,CAAnC,EAAsCmD,IAAtC,EACI5D,mBAAmB,CAAE4B,SAAS,CAAClB,QAAZ,CAAsBI,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,gBAAjB,EAAmC,CAAnC,EAAsCmD,IAAtC,CAAtB,CADvB,CAEH,CAHD,EAIA9C,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuCmC,GAAvC,CAA2C,SAACgB,IAAD,CAAU,CACjD,GAAI9C,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,gBAAjB,EAAmC,CAAnC,EAAsCwC,cAAtC,CAAqDW,IAArD,GACJ9C,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,gBAAjB,EAAmC,CAAnC,EAAsCmD,IAAtC,IAA8C,GAD9C,CACmD,CAC/C,MAAO9C,CAAAA,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,gBAAjB,EAAmC,CAAnC,EAAsCmD,IAAtC,CAAP,CACH,CACJ,CALD,EAMH,CAXD,IAaA,CACI9C,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuCmC,GAAvC,CAA2C,SAACgB,IAAD,CAAU,CACjD,GAAI9C,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,gBAAjB,EAAmC,CAAnC,EAAsCwC,cAAtC,CAAqDW,IAArD,GACJ9C,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,gBAAjB,EAAmC,CAAnC,EAAsCmD,IAAtC,IAA8C,GAD9C,CACmD,CAC/C,MAAO9C,CAAAA,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,gBAAjB,EAAmC,CAAnC,EAAsCmD,IAAtC,CAAP,CACH,CACJ,CALD,EAMH,CACJ,CAED7B,cAAc,CAAC,mBAAD,CAAd,gCACOA,cAAc,CAAC,mBAAD,CADrB,MAEIgE,eAAe,CAAEjF,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiBqF,cAAjB,CAAgC,CAAhC,EAAmCC,eAFxD,GAKApF,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BQ,SAAS,CAATA,SAD2B,CAChBK,UAAU,CAAE,cADI,CACYgE,sBAAsB,CAAE,KADpC,CAC2CV,mBAAmB,CAAE,KADhE,CACuEnD,YAAY,CAAZA,aADvE,CACqFoD,SAAS,CAAE,IADhG,CACsG1D,aAAa,CAAbA,aADtG,CACqHE,cAAc,CAAdA,cADrH,CAE3BD,YAAY,CAAZA,YAF2B,CAEbV,OAAO,CAAE,KAFI,CAEE6E,oBAAoB,CAAC,KAClD;AAH2B,CAD1B,CAAD,CAAR,CAOH,CA3CL,EA4CK5E,KA5CL,CA4CW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACR,QAAN,CAAe0E,MAAf,GAA0B,GAA9B,CAAmC,CAC/BvF,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CACDxB,KAAK,CAACwF,IAAN,CAAWrF,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACR,QAAN,CAAeL,IAArB,CAAnB,CAAX,EACH,CACJ,CApDL,EAqDH,CACJ,CApSD,IAqSK,CACDR,KAAK,CAACwF,IAAN,CAAWrF,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAE,uBAAN,CAAnB,CAAX,EACH,CACJ,CAzSD,CA0SH,CAED,MAAO,SAAS0E,CAAAA,kBAAT,CAA4BC,SAA5B,CAAuCpF,UAAvC,CAAmDL,QAAnD,CAA6D,CAChE,MAAO,UAAUC,QAAV,CAAoB,CACvBA,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACA,MAAOR,CAAAA,KAAK,CAACiB,IAAN,CAAW,6BAAX,CAA0C,CAC7C,gBAAiBuF,SAAS,CAACP,aADkB,CAE7C,mBAAoB7E,UAAU,CAACkB,8BAAX,CAA0CiD,gBAFjB,CAG7C,oBAAqBnE,UAAU,CAACgD,0BAAX,CAAsC,CAAtC,EAAyCvD,iBAHjB,CAI7C,WAAYE,QAJiC,CAK7C0F,QAAQ,CAACrF,UAAU,CAACqF,QALyB,CAM7CC,MAAM,CAACtF,UAAU,CAACsF,MAN2B,CAA1C,EAQFxF,IARE,CAQG,SAAAC,QAAQ,CAAI,CACdC,UAAU,gCAAQA,UAAR,EAAuBD,QAAQ,CAACL,IAAhC,CAAV,CACAZ,QAAQ,CAACkB,UAAD,CAAR,CACAJ,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEJ,UAAU,CAAVA,UAAF,CAAcK,OAAO,CAAE,KAAvB,CAAjC,CAAD,CAAR,CACH,CAZE,EAYAC,KAZA,CAYM,SAAAC,KAAK,CAAI,CACdX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACR,QAAN,CAAe0E,MAAf,GAA0B,GAA9B,CAAmC,CAC/BvF,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CACDxB,KAAK,CAACwF,IAAN,CAAWrF,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACR,QAAN,CAAeL,IAArB,CAAnB,CAAX,EACH,CACJ,CApBE,CAAP,CAqBH,CAvBD,CAwBH,CAED,MAAO,SAAS6F,CAAAA,eAAT,CAAyBC,UAAzB,CAAqC5E,SAArC,CAAgD6E,cAAhD,CAAgEzF,UAAhE,CAA4EL,QAA5E,CAAsFoB,YAAtF,CAAoG,CACvG,MAAO,UAAUnB,QAAV,CAAoB,CACvB,GAAIuB,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIP,SAAS,GAAK,QAAlB,CAA4B,CACxB,GAAM8E,CAAAA,gBAAgB,CAAG9G,KAAK,CAACiB,IAAN,CAAW,uCAAX,CAAoD,CAAE,WAAYF,QAAd,CAApD,CAAzB,CACAwB,QAAQ,CAAG,CAACuE,gBAAD,CAAX,CACH,CAHD,IAIK,iBACD,GAAMf,CAAAA,QAAQ,CAAG/F,KAAK,CAACiB,IAAN,CAAW,2BAAX,6CACd4F,cADc,CACGzF,UAAU,CAAC4E,gBAAX,CAA4BhD,QAA5B,CAAqCiD,aADxC,8BAEb,mBAFa,CAEQ7E,UAAU,CAAC8E,oBAAX,CAAgCrF,iBAFxC,8BAE2D,UAF3D,CAEuEE,QAFvE,eAAjB,CAGAwB,QAAQ,CAAG,CAACwD,QAAD,CAAX,CACH,CACD/E,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAD,KAAK,CAACsE,GAAN,CAAUtC,QAAV,EACKrB,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAIiB,CAAAA,cAAc,CAAG,EAArB,CACA,GAAIJ,SAAS,GAAK,QAAlB,CAA4B,CACxBI,cAAc,CAAGjB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiBqF,cAAjB,CAAgC,CAAhC,EAAmCnD,QAApD,CACH,CACDhC,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CAELuB,OAAO,CAAE,CACLuF,MAAM,CAAE,IADH,CAEL3E,cAAc,CAAEJ,SAAS,GAAK,QAAd,CAAyBI,cAAzB,CAA0C,CAAE,qBAAsB,CAAxB,CAFrD,CAGLJ,SAAS,CAAEA,SAHN,CAIL4E,UAAU,CAAEA,UAJP,CAKLhB,SAAS,CAAE,IALN,CAKYzD,YAAY,CAAEA,YAL1B,CAKwCV,OAAO,CAAE,KALjD,CAFJ,CAAD,CAAR,CAUH,CAhBL,EAiBKC,KAjBL,CAiBW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACR,QAAN,CAAe0E,MAAf,GAA0B,GAA9B,CAAmC,CAC/BvF,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CACDxB,KAAK,CAACwF,IAAN,CAAWrF,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACR,QAAN,CAAeL,IAArB,CAAnB,CAAX,EACH,CACJ,CAzBL,EA0BH,CAvCD,CAwCH,CAED,MAAO,SAASkG,CAAAA,qBAAT,CAA+B9E,aAA/B,CAA8C+E,mBAA9C,CAAmEC,IAAnE,CAAyEnG,QAAzE,CAAmF,CACtF,MAAO,UAAUC,QAAV,CAAoB,CACvBA,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAR,KAAK,CAACiB,IAAN,CAAW,iCAAX,CAA8CgG,mBAAmB,GAAK3F,SAAxB,CAAoC,CAC9ET,iBAAiB,CAAEqB,aAAa,CAAC,mBAAD,CAAb,CAAmCsD,KADwB,CAE9ED,gBAAgB,CAAE0B,mBAAmB,CAAC,kBAAD,CAAnB,CAAwCzB,KAFoB,CAG9EiB,QAAQ,CAACS,IAAI,CAACT,QAHgE,CAI9EC,MAAM,CAACQ,IAAI,CAACR,MAJkE,CAM5E,WAAY3F,QANgE,CAO9E,QAAQ,CAPsE,CAApC,CAQ1C,CACAF,iBAAiB,CAAEqB,aAAa,CAAC,mBAAD,CAAb,CAAmCsD,KADtD,CAGE,WAAYzE,QAHd,CARJ,EAaKG,IAbL,CAaU,SAAAC,QAAQ,CAAI,CACd,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAI+F,CAAAA,SAAJ,CACA,GAAIhG,QAAQ,CAAC,MAAD,CAAR,CAAiBiG,qBAAjB,GAA2C,CAA/C,CAAkD,CAC9CD,SAAS,CAAG,qBAAZ,CACH,CACD/F,UAAU,8CAAQ8F,IAAR,EAAiB/F,QAAQ,CAACL,IAA1B,MAAgCqG,SAAS,CAATA,SAAhC,CAA2C9F,YAAY,CAAEC,SAAzD,EAAV,CAEDpB,QAAQ,CAACkB,UAAD,CAAR,CACCJ,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BJ,UAAU,CAAVA,UAD2B,CACfK,OAAO,CAAE,KADM,CACC4F,IAAI,CAAE,CADP,CACUC,IAAI,CAAE,EADhB,CAD1B,CAAD,CAAR,CAKH,CA3BL,EA4BK5F,KA5BL,CA4BW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACAnB,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CA/BL,EAgCH,CAlCD,CAmCH,CACD,MAAO,SAASyF,CAAAA,iBAAT,CAA2BrF,aAA3B,CAA0C+E,mBAA1C,CAA+DC,IAA/D,CAAqEnG,QAArE,CAA+E,CAClF,MAAO,UAAUC,QAAV,CAAoB,CACvBA,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAR,KAAK,CAACiB,IAAN,CAAW,iCAAX,CAA8CgG,mBAAmB,GAAK3F,SAAxB,CAAoC,CAC9ET,iBAAiB,CAAEqB,aAAa,CAAC,CAAD,CAAb,CAAiB,mBAAjB,CAD2D,CAE9EqD,gBAAgB,CAAE0B,mBAAmB,CAAC,kBAAD,CAFyC,CAG9ER,QAAQ,CAACS,IAAI,CAACT,QAHgE,CAI9EC,MAAM,CAACQ,IAAI,CAACR,MAJkE,CAK5E,WAAY3F,QALgE,CAM9E,QAAQ,CANsE,CAApC,CAO1C,CACAF,iBAAiB,CAAEqB,aAAa,CAAC,mBAAD,CAAb,CAAmCsD,KADtD,CAGE,WAAYzE,QAHd,CAPJ,EAYKG,IAZL,CAYU,SAAAC,QAAQ,CAAI,CACd,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CAEAA,UAAU,8CAAQ8F,IAAR,EAAiB/F,QAAQ,CAACL,IAA1B,MAAgCO,YAAY,CAAEC,SAA9C,EAAV,CAEApB,QAAQ,CAACkB,UAAD,CAAR,CACAJ,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BJ,UAAU,CAAVA,UAD2B,CACfK,OAAO,CAAE,KADM,CACC4F,IAAI,CAAE,CADP,CACUC,IAAI,CAAE,EADhB,CAD1B,CAAD,CAAR,CAKH,CAvBL,EAwBK5F,KAxBL,CAwBW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACAnB,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CA3BL,EA4BH,CA9BD,CA+BH,CACD,MAAO,SAAS0F,CAAAA,0BAAT,CAAoCN,IAApC,CAA0CnG,QAA1C,CAAoD0G,UAApD,CAAgEtF,YAAhE,CAA8E,CACjF,MAAO,UAAUnB,QAAV,CAAoB,CACvBA,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAR,KAAK,CAACiB,IAAN,CAAW,8BAAX,CAA2C,CACvC,WAAYF,QAD2B,CAEvC,gBAAiBmG,IAAI,CAAC,kBAAD,CAAJ,CAAyB,eAAzB,CAFsB,CAGrC,kBAAmBA,IAAI,CAAC,0BAAD,CAAJ,CAAiCQ,eAHf,CAA3C,EAKKxG,IALL,CAKU,SAAAC,QAAQ,CAAI,CACd,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAIuG,KAAK,CAACC,OAAN,CAAczG,QAAQ,CAACL,IAAvB,CAAJ,CAAkC,CAC9B,GAAI+G,CAAAA,sBAAsB,CAAG,EAA7B,CACAA,sBAAsB,CAAG1G,QAAQ,CAACL,IAAlC,CACA,GAAMgH,CAAAA,aAAa,CAAG3H,mBAAmB,CAACgB,QAAQ,CAACL,IAAT,EAAiB,EAAlB,CAAsB,cAAtB,CACrC,cADqC,CACrBQ,SADqB,CACVA,SADU,CACC,IADD,CAAzC,CAEA,GAAMyG,CAAAA,mBAAmB,CAAG,CAAEA,mBAAmB,CAAED,aAAa,CAACE,GAAd,CAAkB,YAAlB,CAAvB,CAA5B,CACA5G,UAAU,gCAAQ8F,IAAR,EAAiBa,mBAAjB,CAAV,CACA/G,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BQ,SAAS,CAAE,QADgB,CAE3BZ,UAAU,CAAVA,UAF2B,CAEfqG,UAAU,CAAVA,UAFe,CAEHtF,YAAY,CAAZA,YAFG,CAEWyD,SAAS,CAAE,IAFtB,CAE4BqC,qBAAqB,CAAE,KAFnD,CAE0DC,gBAAgB,CAAE,KAF5E,CAEmF7F,UAAU,CAAE,qBAF/F,CAEsHsD,mBAAmB,CAAE,IAF3I,CAEiJlE,OAAO,CAAE,KAF1J,CAEiK4F,IAAI,CAAE,CAFvK,CAE0KC,IAAI,CAAE,EAFhL,CAD1B,CAAD,CAAR,CAMH,CAbD,IAcK,CACDhH,KAAK,CAACwF,IAAN,CAAW3E,QAAQ,CAACL,IAApB,EACAM,UAAU,kBAAQ8F,IAAR,CAAV,CACAlG,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BQ,SAAS,CAAE,QADgB,CAE3BZ,UAAU,CAAVA,UAF2B,CAEfqG,UAAU,CAAVA,UAFe,CAEH7B,SAAS,CAAE,KAFR,CAEeqC,qBAAqB,CAAE,KAFtC,CAE6CC,gBAAgB,CAAE,KAF/D,CAEsE7F,UAAU,CAAE,qBAFlF,CAEyGsD,mBAAmB,CAAE,IAF9H,CAEoIlE,OAAO,CAAE,KAF7I,CAEoJ4F,IAAI,CAAE,CAF1J,CAE6JC,IAAI,CAAE,EAFnK,CAD1B,CAAD,CAAR,CAMH,CACJ,CA/BL,EAgCK5F,KAhCL,CAgCW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACAnB,KAAK,CAACqB,KAAN,CAAYA,KAAZ,EACH,CAnCL,EAoCH,CAtCD,CAuCH,CAED,MAAO,SAASwG,CAAAA,sBAAT,CAAgCC,UAAhC,CAA4C,CAC/C,MAAO,UAAUpH,QAAV,CAAoB,CACvB,GAAIuB,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIH,CAAAA,cAAc,kBAAQgG,UAAU,CAAChG,cAAnB,CAAlB,CACApB,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACA,GAAM6H,CAAAA,IAAI,CAAGrI,KAAK,CAACiB,IAAN,CAAW,wCAAX,CAAqD,CAC9DqH,OAAO,CAAEF,UAAU,CAAC,SAAD,CAD2C,CAE9DjG,YAAY,CAAEiG,UAAU,CAACjG,YAFqC,CAG9DH,SAAS,CAAEoG,UAAU,CAACpG,SAHwC,CAI9DuG,eAAe,CAAE,sBAJ6C,CAK9DC,eAAe,CAAEJ,UAAU,CAACI,eALkC,CAM9DC,UAAU,CAAEL,UAAU,CAACI,eANuC,CAO9D,WAAYJ,UAAU,CAACrH,QAPuC,CAArD,CAAb,CASA,GAAM2H,CAAAA,IAAI,CAAG1I,KAAK,CAACiB,IAAN,CAAW,8BAAX,CAA2C,CACpD,WAAYmH,UAAU,CAACrH,QAD6B,CAEpDkF,aAAa,CAAEmC,UAAU,CAAC,SAAD,CAAV,CAAsBnC,aAFe,CAEAuC,eAAe,CAAEJ,UAAU,CAACI,eAF5B,CAGpDd,eAAe,CAAEU,UAAU,CAAChH,UAAX,CAAsB,0BAAtB,EAAkDsG,eAHf,CAIpDiB,oBAAoB,CAAEP,UAAU,CAAC,SAAD,CAAV,CAAsBO,oBAC5C;AALoD,CAA3C,CAAb,CAOApG,QAAQ,CAAG,CAAC8F,IAAD,CAAOK,IAAP,CAAX,CACAnI,KAAK,CAACsE,GAAN,CAAUtC,QAAV,EACKrB,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAM2G,CAAAA,aAAa,CAAG3H,mBAAmB,CAACgB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB8H,uBAAjB,EAA4C,EAA7C,CAAiD,cAAjD,CACrC,cADqC,CACrBtH,SADqB,CACVA,SADU,CACC,IADD,CAAzC,CAEAc,cAAc,CAAC,sBAAD,CAAd,CAAyC0F,aAAa,CAACE,GAAd,CAAkB,YAAlB,CAAzC,CACA5F,cAAc,CAAC,eAAD,CAAd,CAAkCgG,UAAU,CAAC,SAAD,CAAV,CAAsBS,aAAxD,CACAzG,cAAc,CAAC,qCAAD,CAAd,CAAwDgG,UAAU,CAACI,eAAnE,CACA,GAAI,CAACb,KAAK,CAACC,OAAN,CAAczG,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAA1B,CAAL,CAAsC,CAClCE,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CAELuB,OAAO,CAAE,CACLuF,MAAM,CAAE,IADH,CAEL3E,cAAc,CAAdA,cAFK,CAGLJ,SAAS,CAAE,QAHN,CAILkG,gBAAgB,CAAE,IAJb,CAKLO,UAAU,CAAEL,UAAU,CAACI,eALlB,CAML5C,SAAS,CAAE,IANN,CAMYD,mBAAmB,CAAE,IANjC,CAMuCsC,qBAAqB,CAAE,IAN9D,CAMoE5F,UAAU,CAAE,qBANhF,CAMuGF,YAAY,CAAEiG,UAAU,CAACjG,YANhI,CAM8IV,OAAO,CAAE,KANvJ,CAFJ,CAAD,CAAR,CAWH,CACD,GAAMqH,CAAAA,cAAc,CAAG3I,mBAAmB,CAACgB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,EAAoB,EAArB,CAAyB,cAAzB,CACtC,cADsC,CACtBQ,SADsB,CACXA,SADW,CACA,IADA,CAA1C,CAEA,GAAMyH,CAAAA,oBAAoB,CAAG,CAAEhB,mBAAmB,CAAEe,cAAc,CAACd,GAAf,CAAmB,YAAnB,CAAvB,CAA7B,CACA;AACA,GAAI5G,CAAAA,UAAU,CAAG,EAAjB,CACAA,UAAU,gCAAQgH,UAAU,CAAChH,UAAnB,EAAkC2H,oBAAlC,CAAV,CAEA,GAAIpB,KAAK,CAACC,OAAN,CAAczG,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAA1B,CAAJ,CAAqC,CACjCE,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CAELuB,OAAO,CAAE,CACLuF,MAAM,CAAE,IADH,CAEL3E,cAAc,CAAdA,cAFK,CAGLhB,UAAU,CAAVA,UAHK,CAILY,SAAS,CAAE,QAJN,CAKLkG,gBAAgB,CAAE,IALb,CAMLO,UAAU,CAAEL,UAAU,CAACI,eANlB,CAOL5C,SAAS,CAAE,IAPN,CAOYD,mBAAmB,CAAE,IAPjC,CAOuCsC,qBAAqB,CAAE,IAP9D,CAOoE5F,UAAU,CAAE,qBAPhF,CAOuGF,YAAY,CAAEiG,UAAU,CAACjG,YAPhI,CAO8IV,OAAO,CAAE,KAPvJ,CAFJ,CAAD,CAAR,CAYH,CAEJ,CA1CL,EA2CKC,KA3CL,CA2CW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACR,QAAN,CAAe0E,MAAf,GAA0B,GAA9B,CAAmC,CAC/BvF,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CACDxB,KAAK,CAACwF,IAAN,CAAWrF,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACR,QAAN,CAAeL,IAArB,CAAnB,CAAX,EACH,CACJ,CAnDL,EAoDH,CAzED,CA0EH,CAED,MAAO,SAASkI,CAAAA,qBAAT,CAA+B9B,IAA/B,CAAqCnG,QAArC,CAA+CkI,YAA/C,CAA6D,CAChE,MAAO,UAAUjI,QAAV,CAAoB,CACvBA,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAR,KAAK,CAACiB,IAAN,CAAW,yCAAX,CAAsD,CAClD,gBAAiBiG,IAAI,CAAC,kBAAD,CAAJ,CAAyBjB,aADQ,CAElD,WAAYlF,QAFsC,CAE5BmI,KAAK,CAAE,CAFqB,CAAtD,EAIKhI,IAJL,CAIU,SAAAC,QAAQ,CAAI,CACd,GAAIwG,KAAK,CAACC,OAAN,CAAczG,QAAQ,CAACL,IAAT,CAAc,oCAAd,CAAd,CAAJ,CAAwE,CACpE,GAAIsB,CAAAA,cAAc,CAAGjB,QAAQ,CAACL,IAAT,CAAc,4BAAd,EAA4CwD,MAA5C,CAAqD,CAArD,CACjBnD,QAAQ,CAACL,IAAT,CAAc,4BAAd,EAA4C,CAA5C,EAA+CkC,QAD9B,CACyC,EAD9D,CAEA,GAAI5B,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAM+H,CAAAA,0BAA0B,CAAG,CAAEA,0BAA0B,CAAEhI,QAAQ,CAACL,IAAT,CAAc,4BAAd,CAA9B,CAAnC,CACAM,UAAU,gCAAQ8F,IAAR,EAAiBiC,0BAAjB,CAAV,CAKAnI,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BJ,UAAU,CAAVA,UAD2B,CACfK,OAAO,CAAE,KADM,CAE3B2H,SAAS,CAAE,KAFgB,CAG3BhH,cAAc,CAAdA,cAH2B,CAI3BD,YAAY,CAAE8G,YAJa,CAKzBrD,SAAS,CAAE,IALc,CAKRvD,UAAU,CAAE,gCALJ,CAD1B,CAAD,CAAR,CASH,CAnBD,IAoBK,CACD/B,KAAK,CAACwF,IAAN,CAAW3E,QAAQ,CAACL,IAApB,EACAE,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BC,OAAO,CAAE,KADkB,CAD1B,CAAD,CAAR,CAMH,CACJ,CAlCL,EAmCKC,KAnCL,CAmCW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACAnB,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CAtCL,EAuCH,CAzCD,CA0CH,CAED,MAAO,SAASuH,CAAAA,mBAAT,CAA6BnC,IAA7B,CAAmCnG,QAAnC,CAA6CkI,YAA7C,CAA2D,CAC9D,MAAO,UAAUjI,QAAV,CAAoB,CACvBA,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACA,GAAI+B,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAI+G,CAAAA,IAAJ,CACA,GAAIC,CAAAA,YAAJ,CACA,GAAMC,CAAAA,QAAQ,CAAGxJ,KAAK,CAACiB,IAAN,CAAW,sBAAX,CAAjB,CACA,GAAMwI,CAAAA,iBAAiB,CAAGzJ,KAAK,CAACiB,IAAN,CAAW,yCAAX,CAAsD,CAC5E,gBAAiBiG,IAAI,CAAC,kBAAD,CAAJ,CAAyBjB,aADkC,CAE5E,WAAYlF,QAFgE,CAEtDmI,KAAK,CAAE,CAF+C,CAAtD,CAA1B,CAIA3G,QAAQ,CAAG,CAACkH,iBAAD,CAAoBD,QAApB,CAAX,CACAjJ,KAAK,CAACsE,GAAN,CAAUtC,QAAV,EACKrB,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAIwG,KAAK,CAACC,OAAN,CAAczG,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,4BAAjB,CAAd,CAAJ,CAAmE,CAC/D,GAAIsB,CAAAA,cAAc,CAAGjB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuCwD,MAAvC,CAAgD,CAAhD,CACjBnD,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QADzB,CACoC,EADzD,CAEA,GAAI5B,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAMsI,CAAAA,kBAAkB,CAAG,CAAEA,kBAAkB,CAAEvI,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,CAAtB,CAA3B,CACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACAK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,4BAAjB,EAA+C,CAA/C,EAAkD,UAAlD,EAA8DmC,GAA9D,CAAkE,SAACC,GAAD,CAAS,CACvEA,GAAG,CAACC,QAAJ,CAAaF,GAAb,CAAiB,SAACG,MAAD,CAAY,CACzBA,MAAM,CAACD,QAAP,CAAgBF,GAAhB,CAAoB,SAACI,SAAD,CAAYsG,CAAZ,CAAkB,CAElC,GAAItG,SAAS,CAACG,SAAV,GAAwB,MAA5B,CAAoC,CAChC,GAAIrC,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,CAAJ,CAA+C,CAC/C,GAAIK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QAA1C,CAAmDK,SAAS,CAACO,KAA7D,IAAwE,GAA5E,CAAiF,CAC7E,GAAIzC,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,CAAJ,CAA+C,CAC3CK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QAA1C,CAAmDK,SAAS,CAACO,KAA7D,EACIvD,mBAAmB,CAACU,QAAD,CAAWI,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QAA1C,CAAmDK,SAAS,CAACO,KAA7D,CAAX,CADvB,CAEH,CACJ,CALD,IAKM,CACF,GAAIzC,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,CAAJ,CAA+C,CAC/C,MAAOK,CAAAA,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QAA1C,CAAmDK,SAAS,CAACO,KAA7D,CAAP,CACC,CACJ,CACJ,CAXG,IAYK,CACD,GAAIzC,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,CAAJ,CAA+C,CAC/C,MAAOK,CAAAA,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QAA1C,CAAmDK,SAAS,CAACO,KAA7D,CAAP,CACC,CACJ,CAEJ,CACJ,CAtBD,EAuBH,CAxBD,EAyBH,CA1BD,EA2BA;AACA;AACA;AAGAxC,UAAU,gCAAQ8F,IAAR,EAAiBwC,kBAAjB,CAAV,CAIAxC,IAAI,CAAC,4BAAD,CAAJ,CAAmC,CAAnC,EAAsClE,QAAtC,CAA+CC,GAA/C,CAAmD,SAACC,GAAD,CAAS,CACxDA,GAAG,CAACC,QAAJ,CAAaF,GAAb,CAAiB,SAACG,MAAD,CAAY,CACzBA,MAAM,CAACD,QAAP,CAAgBF,GAAhB,CAAoB,SAACI,SAAD,CAAe,CAC/B,GAAIA,SAAS,CAACG,SAAV,GAAwB,MAA5B,CAAoC,CAChC,GAAIH,SAAS,CAACC,cAAV,CAAyB,UAAzB,CAAJ,CAA0C,CACtC,GAAMsG,CAAAA,eAAe,CAAGzJ,mBAAmB,CAACgB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,EAAoB,EAArB,CAAyB,eAAzB,CACvC,aADuC,CACxBQ,SADwB,CACbA,SADa,CACF,IADE,CAA3C,CAEAiI,YAAY,CAAGK,eAAe,CAAC5B,GAAhB,CAAoB,YAApB,CAAf,CAEA7G,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,sBAAjB,EAAyCmC,GAAzC,CAA6C,SAACgB,IAAD,CAAU,CACnD,GAAI,CAAC7B,cAAc,CAACkB,cAAf,CAA8BW,IAA9B,CAAL,CAA0C,CACtC7B,cAAc,aAAM6B,IAAN,EAAd,CAA8BsF,YAAY,CAAC,CAAD,CAA1C,CACH,CACJ,CAJD,EAKH,CACJ,CACJ,CAdD,EAeH,CAhBD,EAiBH,CAlBD,EAqBAvI,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BJ,UAAU,CAAVA,UAD2B,CACfK,OAAO,CAAE,KADM,CAE3B2H,SAAS,CAAE,KAFgB,CAG3BhH,cAAc,CAAdA,cAH2B,CAI3BiE,sBAAsB,CAAE,KAJG,CAK3BkD,YAAY,CAAZA,YAL2B,CAM3BpH,YAAY,CAAE8G,YANa,CAOzBrD,SAAS,CAAE,IAPc,CAORvD,UAAU,CAAE,sBAPJ,CAD1B,CAAD,CAAR,CAWH,CAlFD,IAmFK,CACD/B,KAAK,CAACwF,IAAN,CAAW3E,QAAQ,CAACL,IAAT,EAAeK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAtC,EACAE,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BC,OAAO,CAAE,KADkB,CAD1B,CAAD,CAAR,CAKH,CACJ,CA7FL,EA8FKC,KA9FL,CA8FW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACAnB,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CAjGL,EAkGH,CA7GD,CA8GH,CACD,MAAO,SAAS+H,CAAAA,eAAT,CAAyBC,UAAzB,CAAqCC,KAArC,CAA4C,CAC/C,MAAO,UAAC/I,QAAD,CAAc,CACjBA,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACA,GAAI+B,CAAAA,QAAQ,CAAG,CAACvC,KAAK,CAACiB,IAAN,CAAW,iCAAX,CAA8C,CAC1DgF,aAAa,CAAE8D,KAAK,CAAC9D,aAAN,EAAuB8D,KAAK,CAAC9D,aADc,CAE1D+D,QAAQ,CAAEF,UAAU,CAAC/I,QAFqC,CAA9C,CAAD,CAAf,CAIA,GAAI+I,UAAU,CAAC9H,SAAX,GAAyB,QAA7B,CAAuC,CACnCO,QAAQ,CAACgB,IAAT,CAAcvD,KAAK,CAACiB,IAAN,CAAW,sCAAX,CAAmD,CAC7D+I,QAAQ,CAAEF,UAAU,CAAC/I,QADwC,CAE7DkF,aAAa,CAAE8D,KAAK,CAAC9D,aAAN,EAAuB8D,KAAK,CAAC9D,aAFiB,CAG7DgE,iBAAiB,CAAEH,UAAU,CAAC1H,cAAX,CAA0B6H,iBAHgB,CAAnD,CAAd,EAKH,CACD1J,KAAK,CAACsE,GAAN,CAAUtC,QAAV,EACKrB,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAM+I,CAAAA,OAAO,CAAG/J,mBAAmB,CAACgB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiBqJ,UAAlB,CAA8B,WAA9B,CAA2C,WAA3C,CAAwD,KAAxD,CAA+D,KAA/D,CAAsE,IAAtE,CAAnC,CACA,GAAMC,CAAAA,UAAU,CAAGF,OAAO,CAAClC,GAAR,CAAY,YAAZ,CAAnB,CACA,GAAI5F,CAAAA,cAAc,CAAG,EAArB,CACA,GAAMiI,CAAAA,WAAW,CAAGD,UAAU,CAACE,MAAX,CAAkB,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACjF,IAAN,CAAWkF,YAAX,GAA4B7J,iBAAiB,CAACuE,GAAlD,EAAvB,CAApB,CACA,GAAIuF,CAAAA,QAAQ,CAAG,KAAf,CACA,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAIZ,UAAU,CAAC9H,SAAX,GAAyB,QAA7B,CAAuC,CACnC0I,UAAU,CAAGvJ,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAzB,CACA,GAAI6J,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIF,UAAU,CAAC,UAAD,CAAV,CAAuBG,mBAAvB,GAA+CnK,cAAc,CAACoK,IAAlE,CAAwE,CACpEH,SAAS,CAAG,CACR,QAASD,UAAU,CAAC,UAAD,CAAV,CAAuBK,SADxB,CAER,QAASL,UAAU,CAAC,UAAD,CAAV,CAAuBC,SAFxB,CAAZ,CAKAC,IAAI,CAAG,CACHI,aAAa,CAAEN,UAAU,CAAC,UAAD,CAAV,CAAuBO,SADnC,CAEHC,gBAAgB,CAAER,UAAU,CAAC,UAAD,CAAV,CAAuBS,YAFtC,CAGHC,kBAAkB,CAAEV,UAAU,CAAC,UAAD,CAAV,CAAuBW,cAHxC,CAIHC,SAAS,CAAE,EAJR,CAKHC,SAAS,CAAE,CALR,CAMHF,cAAc,CAAEX,UAAU,CAAC,UAAD,CAAV,CAAuBW,cAAvB,GAAwC,CAAxC,CAA0C,CAA1C,CAA4C,CANzD,CAOHJ,SAAS,CAAE,EAPR,CAAP,CAUH,CAhBD,IAgBO,CACHN,SAAS,CAAGN,WAAW,CAAC/F,MAAZ,CAAqB,CAArB,CAAyB+F,WAAW,CAAC,CAAD,CAApC,CAA0C,EAAtD,CACAO,IAAI,kBACAI,aAAa,CAAE,EADf,CAEAE,gBAAgB,CAAE,EAFlB,CAGAE,kBAAkB,CAAE,CAHpB,CAIAE,SAAS,CAAEZ,UAAU,CAAC,UAAD,CAAV,CAAuBY,SAJlC,CAKAC,SAAS,CAAEb,UAAU,CAAC,UAAD,CAAV,CAAuBa,SALlC,CAMAF,cAAc,CAAEX,UAAU,CAAC,UAAD,CAAV,CAAuBW,cANvC,CAOAG,eAAe,CAAEd,UAAU,CAAC,UAAD,CAAV,CAAuBc,eAPxC,CAQAP,SAAS,CAAEP,UAAU,CAAC,UAAD,CAAV,CAAuBO,SARlC,uBASoBP,UAAU,CAAC,UAAD,CAAV,CAAuBW,cAT3C,CAAJ,CAWH,CACDjJ,cAAc,gCACPwI,IADO,MAEVO,YAAY,CAAET,UAAU,CAAC,UAAD,CAAV,CAAuBS,YAF3B,CAGVlB,iBAAiB,CAAES,UAAU,CAAC,UAAD,CAAV,CAAuBT,iBAHhC,CAIVY,mBAAmB,CAAEH,UAAU,CAAC,UAAD,CAAV,CAAuBG,mBAJlC,CAKVF,SAAS,CAATA,SALU,EAAd,CAOH,CAzCD,IAyCO,CACHvI,cAAc,CAAG,CACbyI,mBAAmB,CAAE1J,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB2K,cAAjB,CAAgCnH,MAAhC,CAAyC,CAAzC,CACjBnD,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB2K,cAAjB,CAAgC,CAAhC,EAAmCZ,mBADlB,CACwCnK,cAAc,CAACgL,GAF/D,CAGbf,SAAS,CAAEN,WAAW,CAAC/F,MAAZ,CAAqB,CAArB,CAAyB+F,WAAW,CAAC,CAAD,CAApC,CAA0C,EAHxC,CAIbI,QAAQ,CAARA,QAJa,CAAjB,CAMH,CACDzJ,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CAELuB,OAAO,CAAE,CACLoE,SAAS,CAAE,IADN,CAEL+F,YAAY,CAAE7B,UAAU,CAAC1H,cAAX,EAA6B/B,mBAAmB,CAACyJ,UAAU,CAAC/I,QAAZ,CAAsB+I,UAAU,CAAC1H,cAAX,CAA0BuJ,YAAhD,CAFzD,CAGL3J,SAAS,CAAE8H,UAAU,CAAC9H,SAHjB,CAILK,UAAU,CAAEyH,UAAU,CAAClD,UAJlB,CAKLzE,YAAY,CAAE2H,UAAU,CAAC3H,YALpB,CAMLC,cAAc,CAAdA,cANK,CAOLX,OAAO,CAAE,KAPJ,CAQLmK,UAAU,CAAExB,UARP,CASLyB,gBAAgB,CAAE,KATb,CAULC,SAAS,CAAEpB,UAAU,CAACG,mBAAX,GAAmCnK,cAAc,CAACgL,GAAlD,CAAwDhB,UAAxD,CAAqE,EAV3E,CAFJ,CAAD,CAAR,CAeH,CAxEL,EAyEKhJ,KAzEL,CAyEW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CAELuB,OAAO,CAAE,CACLC,OAAO,CAAE,KADJ,CAFJ,CAAD,CAAR,CAMA,GAAIE,KAAK,CAACR,QAAN,CAAe0E,MAAf,GAA0B,GAA9B,CAAmC,CAC/BvF,KAAK,CAACqB,KAAN,CAAYA,KAAK,CAACG,OAAlB,EACH,CAFD,IAEO,CACHxB,KAAK,CAACwF,IAAN,CAAWnE,KAAK,CAACR,QAAN,CAAeL,IAA1B,EACH,CACJ,CArFL,EAsFH,CAnGD,CAoGH,CAID,MAAO,SAASiL,CAAAA,6BAAT,CAAuC7E,IAAvC,CAA6CnG,QAA7C,CAAuDkI,YAAvD,CAAqE,CACxE,MAAO,UAAUjI,QAAV,CAAoB,CACvBA,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACA,GAAI+B,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAI+G,CAAAA,IAAJ,CACA,GAAIC,CAAAA,YAAJ,CACA,GAAMC,CAAAA,QAAQ,CAAGxJ,KAAK,CAACiB,IAAN,CAAW,sBAAX,CAAjB,CACA,GAAMwI,CAAAA,iBAAiB,CAAGzJ,KAAK,CAACiB,IAAN,CAAW,0CAAX,CAAuD,CAC7E,gBAAiBiG,IAAI,CAAC,kBAAD,CAAJ,CAAyBjB,aADmC,CAE7E,WAAYlF,QAFiE,CAEvDmI,KAAK,CAAE,CAFgD,CAAvD,CAA1B,CAIA3G,QAAQ,CAAG,CAACkH,iBAAD,CAAoBD,QAApB,CAAX,CACAjJ,KAAK,CAACsE,GAAN,CAAUtC,QAAV,EACKrB,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAIwG,KAAK,CAACC,OAAN,CAAczG,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,4BAAjB,CAAd,CAAJ,CAAmE,CAC/D,GAAIsB,CAAAA,cAAc,CAAGjB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuCwD,MAAvC,CAAgD,CAAhD,CACjBnD,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QADzB,CACoC,EADzD,CAEA,GAAI5B,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAMsI,CAAAA,kBAAkB,CAAG,CAAEA,kBAAkB,CAAEvI,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,CAAtB,CAA3B,CACA,GAAMkL,CAAAA,0BAA0B,CAAC7K,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,4BAAjB,CAAjC,CACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACAK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,4BAAjB,EAA+C,CAA/C,EAAkD,UAAlD,EAA8DmC,GAA9D,CAAkE,SAACC,GAAD,CAAS,CACvEA,GAAG,CAACC,QAAJ,CAAaF,GAAb,CAAiB,SAACG,MAAD,CAAY,CACzBA,MAAM,CAACD,QAAP,CAAgBF,GAAhB,CAAoB,SAACI,SAAD,CAAYsG,CAAZ,CAAkB,CAElC,GAAItG,SAAS,CAACG,SAAV,GAAwB,MAA5B,CAAoC,CAChC,GAAIrC,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,CAAJ,CAA+C,CAC/C,GAAIK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QAA1C,CAAmDK,SAAS,CAACO,KAA7D,IAAwE,GAA5E,CAAiF,CAC7E,GAAIzC,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,CAAJ,CAA+C,CAC3CK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QAA1C,CAAmDK,SAAS,CAACO,KAA7D,EACIvD,mBAAmB,CAACU,QAAD,CAAWI,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QAA1C,CAAmDK,SAAS,CAACO,KAA7D,CAAX,CADvB,CAEH,CACJ,CALD,IAKM,CACF,GAAIzC,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,CAAJ,CAA+C,CAC/C,MAAOK,CAAAA,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QAA1C,CAAmDK,SAAS,CAACO,KAA7D,CAAP,CACC,CACJ,CACJ,CAXG,IAYK,CACD,GAAIzC,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,CAAJ,CAA+C,CAC/C,MAAOK,CAAAA,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,oBAAjB,EAAuC,CAAvC,EAA0CkC,QAA1C,CAAmDK,SAAS,CAACO,KAA7D,CAAP,CACC,CACJ,CAEJ,CACJ,CAtBD,EAuBH,CAxBD,EAyBH,CA1BD,EA2BA;AACA;AACA;AAGAxC,UAAU,8CAAQ8F,IAAR,EAAiBwC,kBAAjB,MAAoCsC,0BAA0B,CAA1BA,0BAC3C;AACC;AAFM,EAAV,CAIA9E,IAAI,CAAC,4BAAD,CAAJ,CAAmC,CAAnC,EAAsClE,QAAtC,CAA+CC,GAA/C,CAAmD,SAACC,GAAD,CAAS,CACxDA,GAAG,CAACC,QAAJ,CAAaF,GAAb,CAAiB,SAACG,MAAD,CAAY,CACzBA,MAAM,CAACD,QAAP,CAAgBF,GAAhB,CAAoB,SAACI,SAAD,CAAe,CAC/B,GAAIA,SAAS,CAACG,SAAV,GAAwB,MAA5B,CAAoC,CAChC,GAAIH,SAAS,CAACC,cAAV,CAAyB,UAAzB,CAAJ,CAA0C,CACtC,GAAMsG,CAAAA,eAAe,CAAGzJ,mBAAmB,CAACgB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,EAAoB,EAArB,CAAyB,eAAzB,CACvC,aADuC,CACxBQ,SADwB,CACbA,SADa,CACF,IADE,CAA3C,CAEAiI,YAAY,CAAGK,eAAe,CAAC5B,GAAhB,CAAoB,YAApB,CAAf,CAEA7G,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB,sBAAjB,EAAyCmC,GAAzC,CAA6C,SAACgB,IAAD,CAAU,CACnD,GAAI,CAAC7B,cAAc,CAACkB,cAAf,CAA8BW,IAA9B,CAAL,CAA0C,CACtC7B,cAAc,aAAM6B,IAAN,EAAd,CAA8BsF,YAAY,CAAC,CAAD,CAA1C,CACH,CACJ,CAJD,EAKH,CACJ,CACJ,CAdD,EAeH,CAhBD,EAiBH,CAlBD,EAqBAvI,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BJ,UAAU,CAAVA,UAD2B,CACfK,OAAO,CAAE,KADM,CAE3B2H,SAAS,CAAE,KAFgB,CAG3BhH,cAAc,CAAdA,cAH2B,CAI3BiE,sBAAsB,CAAE,KAJG,CAK3BkD,YAAY,CAAZA,YAL2B,CAM3BpH,YAAY,CAAE8G,YANa,CAOzBrD,SAAS,CAAE,IAPc,CAORvD,UAAU,CAAE,wBAPJ,CAD1B,CAAD,CAAR,CAWH,CAnFD,IAoFK,CACD/B,KAAK,CAACwF,IAAN,CAAW3E,QAAQ,CAACL,IAAT,EAAeK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAtC,EACAE,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BC,OAAO,CAAE,KADkB,CAD1B,CAAD,CAAR,CAKH,CACJ,CA9FL,EA+FKC,KA/FL,CA+FW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACAnB,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CAlGL,EAmGH,CA9GD,CA+GH,CAKD,MAAO,SAASmK,CAAAA,6BAAT,CAAuCjK,SAAvC,CAAkDC,SAAlD,CAA6DC,aAA7D,CAA4EC,YAA5E,CAA0Ff,UAA1F,CAAsGgB,cAAtG,CAAqHC,UAArH,CAAgI6J,WAAhI,CAA6I,CAChJ,MAAO,UAAUlL,QAAV,CAAoB,CACvB,GAAII,UAAU,CAACkB,8BAAf,CAA+C,CAC3C,GAAIN,SAAS,GAAK,QAAlB,CAA4B,CACxB,GAAIO,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,YAAY,CAAG,EAAnB,CACA,GAAI1B,CAAAA,IAAI,CAAG,EAAX,CACA,GAAI2B,CAAAA,gBAAgB,CAAG,EAAvB,CACA,GAAIC,CAAAA,eAAe,CAAG,EAAtB,CACA,GAAIC,CAAAA,qBAAqB,CAAG,EAA5B,CACA,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAMC,CAAAA,qBAAqB,CAAG,EAA9B,CACA,GAAIE,CAAAA,gBAAgB,CAAC,EAArB,CACA,GAAID,CAAAA,MAAM,CAAG1B,UAAU,CAAC2B,gBAAX,CAA4B,CAA5B,EAA+BC,QAA5C,CACA,GAAGkJ,WAAW,GAAG,QAAd,EAA0BA,WAAW,GAAG,QAA3C,CAAoD,CAC/CpJ,MAAM,CAAG1B,UAAU,CAAC+K,sBAAX,CAAkC,CAAlC,EAAqCnJ,QAA9C,CACAD,gBAAgB,CAAC3B,UAAU,CAAC+K,sBAA5B,CACJ,CACD;AACA;AACA;AACA;AAPA,IAQI,CACApJ,gBAAgB,CAAC3B,UAAU,CAACgL,sBAA5B,CACH,CAEDhL,UAAU,8BACN8K,WAAW,CAACA,WADN,EAEH9K,UAFG,MAGN2B,gBAAgB,CAAhBA,gBAHM,EAAV,CAKA;AACAD,MAAM,CAACG,GAAP,CAAW,SAAAC,GAAG,CAAI,CACd,MAAOA,CAAAA,GAAG,CAACC,QAAJ,CAAaF,GAAb,CAAiB,SAAAG,MAAM,CAAI,CAC9B,MAAOA,CAAAA,MAAM,CAACD,QAAP,CAAgBF,GAAhB,CAAoB,SAAAI,SAAS,CAAI,CACpC,GAAIA,SAAS,CAACC,cAAV,CAAyB,QAAzB,CAAJ,CAAwC,CACpCV,UAAU,CAACW,IAAX,CAAgBF,SAAhB,EACH,CACD,GAAIA,SAAS,CAACG,SAAV,GAAwB,QAA5B,CAAsC,CAClCf,gBAAgB,CAACc,IAAjB,CAAsBF,SAAtB,EACH,CACD,GAAIA,SAAS,CAACG,SAAV,GAAwB,OAA5B,CAAqC,CACjCd,eAAe,CAACa,IAAhB,CAAqBF,SAArB,EACH,CACD,GAAIA,SAAS,CAACC,cAAV,CAAyB,eAAzB,CAAJ,CAA+C,CAC3CX,qBAAqB,CAACY,IAAtB,CAA2BF,SAA3B,EACH,CACD,MAAOA,CAAAA,SAAS,CAACC,cAAV,CAAyB,UAAzB,EAAuCD,SAAS,CAACF,QAAV,CAAmBF,GAAnB,CAAuB,SAAAQ,YAAY,CAAI,CACjF,GAAIA,YAAY,CAACD,SAAb,GAA2B,QAA/B,CAAyC,CACrCf,gBAAgB,CAACc,IAAjB,CAAsBE,YAAtB,EACH,CACD,GAAIA,YAAY,CAACD,SAAb,GAA2B,OAA3B,EAAsC,CAAEH,SAAS,CAACC,cAAV,CAAyB,QAAzB,CAA5C,CAAiF,CAC7E,GAAIG,YAAY,CAACH,cAAb,CAA4B,QAA5B,CAAJ,CAA2C,CACvCV,UAAU,CAACW,IAAX,CAAgBE,YAAhB,EACH,CAFD,IAGK,CACD3C,IAAI,CAACyC,IAAL,CAAUE,YAAV,EACH,CAEJ,CACD,GAAIA,YAAY,CAACH,cAAb,CAA4B,eAA5B,CAAJ,CAAkD,CAC9CX,qBAAqB,CAACY,IAAtB,CAA2BE,YAA3B,EACH,CACJ,CAhB6C,CAAvC,CAiBDJ,SAAS,CAACG,SAAV,GAAwB,OAAxB,EAAmC,CAAEH,SAAS,CAACC,cAAV,CAAyB,QAAzB,CAArC,CACFxC,IAAI,CAACyC,IAAL,CAAUF,SAAV,CADE,CACqBR,qBAAqB,CAACU,IAAtB,CAA2BF,SAA3B,CAlB3B,CAmBH,CAhCM,CAAP,CAiCH,CAlCM,CAAP,CAmCH,CApCD,EAqCA,GAAMK,CAAAA,eAAe,CAAG5C,IAAxB,CACA,GAAMiF,CAAAA,QAAQ,CAAG/F,KAAK,CAACiB,IAAN,CAAW,mCAAX,CAAgD,CAAE,gBAAiBG,UAAU,CAAC4E,gBAAX,CAA4BC,aAA/C,CAChE,WAAYhE,SAAS,CAAClB,QAD0C,CAAhD,CAAjB,CAGA6B,UAAU,CAAC,CAAD,CAAV,CAAgB,CACZe,aAAa,CAAEf,UAAU,CAAC,CAAD,CAAV,CAAce,aADjB,CAEZH,SAAS,CAAEZ,UAAU,CAAC,CAAD,CAAV,CAAcY,SAFb,CAGZI,KAAK,CAAEhB,UAAU,CAAC,CAAD,CAAV,CAAcgB,KAHT,CAIZC,MAAM,CAAEjB,UAAU,CAAC,CAAD,CAAV,CAAciB,MAJV,CAKZtC,IAAI,CAAEqB,UAAU,CAAC,CAAD,CAAV,CAAcrB,IALR,CAMZuC,WAAW,CAAElB,UAAU,CAAC,CAAD,CAAV,CAAckB,WANf,CAOZC,sBAAsB,CAAEnB,UAAU,CAAC,CAAD,CAAV,CAAcmB,sBAP1B,CAAhB,CASA,GAAIC,CAAAA,sBAAsB,CAAG,EAA7B,CACArB,qBAAqB,CAACM,GAAtB,CAA0B,SAAAgB,IAAI,CAAI,CAC9BD,sBAAsB,EAAIC,IAAI,CAACC,aAAL,CAAqB,GAA/C,CACH,CAFD,EAGA,GAAMC,CAAAA,YAAY,CAAGnE,KAAK,CAACiB,IAAN,CAAW,oCAAX,CACjB,CACI,oBAAqBG,UAAU,CAACgD,0BAAX,CAAsC,CAAtC,EAAyCvD,iBADlE,CAEM,WAAYoB,SAAS,CAAClB,QAF5B,CAEsC,mBAAoB2C,eAF1D,CAGI,wBAAyBM,sBAAsB,CAACK,SAAvB,CAAiC,CAAjC,CAAoCL,sBAAsB,CAACM,MAAvB,CAAgC,CAApE,CAH7B,CADiB,CAArB,CAMA,GAAMC,CAAAA,YAAY,CAAGvE,KAAK,CAACiB,IAAN,CAAW,oCAAX,CAAiD,CAElEuD,KAAK,CAAE1B,MAAM,CAAC,CAAD,CAAN,CAAUK,QAAV,CAAmB,CAAnB,EAAsBA,QAAtB,CAA+B,CAA/B,EAAkCsB,UAAlC,EAAgD,EAFW,CAGlEC,UAAU,CAAE,CAAE7D,iBAAiB,CAAEO,UAAU,CAACgD,0BAAX,CAAsC,CAAtC,EAAyCvD,iBAA9D,CAHsD,CAIlE8D,YAAY,CAAE,kBAJoD,CAKlE,oBAAoBvD,UAAU,CAACgD,0BAAX,CAAsC,CAAtC,EAAyCvD,iBALK,CAMlEiD,WAAW,CAAE,mBANqD,CAOlE,WAAY7B,SAAS,CAAClB,QAP4C,CAQlE6D,gBAAgB,CAAEhC,UARgD,CAAjD,CAArB,CAUAL,QAAQ,CAAG,CAAC4B,YAAD,CAAeI,YAAf,CAA4BwB,QACnC;AADO,CAAX,CAGA/E,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAD,KAAK,CAACsE,GAAN,CAAUtC,QAAV,EACKrB,IADL,CACU,SAAAC,QAAQ,CAAI,CACdqB,YAAY,CAAGrB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAA3B,CACAA,IAAI,CAACgE,MAAL,CAAY,CAAZ,CAAe,CAAf,CAAkBlC,UAAU,CAAC,CAAD,CAA5B,EACA,GAAMmC,CAAAA,KAAK,gCAAQ5D,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAApB,EAA6BK,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAzC,CAAX,CACA0B,YAAY,CAAGpC,oBAAoB,CAACU,IAAD,CAAOiE,KAAP,CAAc3C,cAAd,CAA8B,IAA9B,CAAoCS,qBAApC,CAA2DvB,SAA3D,CAAsEW,SAAS,CAAClB,QAAV,CAAmBiE,iBAAzF,CAA4G/C,SAAS,CAAClB,QAAtH,CAAnC,CACA0B,gBAAgB,CAACQ,GAAjB,CAAqB,SAACgB,IAAD,CAAU,CAC3B,GAAIA,IAAI,CAACX,cAAL,CAAoB,gBAApB,GAAyCW,IAAI,CAACgB,cAAL,GAAwBtE,iBAAiB,CAACuE,GAAvF,CAA4F,CACxF1C,YAAY,CAAC,gBAAD,CAAZ,gCACOA,YAAY,CAAC,gBAAD,CADnB,wBAEKyB,IAAI,CAACL,KAFV,CAEkBK,IAAI,CAACgB,cAFvB,GAIH,CACJ,CAPD,EAQAvC,eAAe,CAACO,GAAhB,CAAoB,SAACgB,IAAD,CAAU,CAC1B,GAAIA,IAAI,CAACX,cAAL,CAAoB,cAApB,CAAJ,CAAyC,CACrC,GAAI6B,CAAAA,IAAI,CAAClB,IAAI,CAACmB,YAAL,CAAkBD,IAA3B,CACAA,IAAI,CAAClC,GAAL,CAAS,SAACoC,GAAD,CAAS,CACd,GAAGA,GAAG,CAAC/B,cAAJ,CAAmB,gBAAnB,CAAH,CACAd,YAAY,CAAC,gBAAD,CAAZ,gCACOA,YAAY,CAAC,gBAAD,CADnB,wBAEKyB,IAAI,CAACL,KAFV,CAEkByB,GAAG,CAAC,gBAAD,CAFrB,GAIH,CAND,EAOH,CACJ,CAXD,EAaA,GAAMgH,CAAAA,YAAY,CAAG,EAArB,CACAlL,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiBwL,WAAjB,CAA6BrJ,GAA7B,CAAiC,SAAAqC,IAAI,CAAI,CACrC+G,YAAY,CAAC9I,IAAb,CAAkB,CACdK,KAAK,CAAE0B,IAAI,CAAC,cAAD,CADG,CACeE,KAAK,CAAEF,IAAI,CAAC,cAAD,CAD1B,CAEdA,IAAI,CAAEA,IAFQ,CAAlB,EAIA,MAAO+G,CAAAA,YAAP,CAGD,CARH,EASE7J,YAAY,CAAC,WAAD,CAAZ,gCACKA,YAAY,CAAC,WAAD,CADjB,MAEE,aAAa6J,YAFf,GAIFjK,cAAc,CAAGI,YAAY,CAAC,gBAAD,CAA7B,CACA;AACA,GAAGpB,UAAU,CAACkB,8BAAX,EAA2ClB,UAAU,CAACkB,8BAAX,CAA0CgC,MAA1C,GAAmD,CAAjG,CAAmG,CAC/F9B,YAAY,CAAC,WAAD,CAAZ,CAA0B,mBAA1B,EAA+CS,GAA/C,CAAmD,SAAAqC,IAAI,CAAE,CACrD,GAAIlE,UAAU,CAACkB,8BAAX,CAA0CiD,gBAA1C,GAA+DD,IAAI,CAACE,KAAxE,CAA+E,CAC3EpD,cAAc,CAAG,CACb,oBAAqB,CACjB,QAAShB,UAAU,CAACkB,8BAAX,CAA0CmD,gBADlC,CAEjB,QAASrE,UAAU,CAACkB,8BAAX,CAA0CiD,gBAFlC,CAGjB,OAAQ,CAAE,WAAYD,IAAI,CAACA,IAAL,CAAUtC,QAAxB,CAAiC,OAAQ,kBAAzC,CAA6D,SAAU,kBAAvE,CAHS,CADR,CAAjB,CAQH,CACT,CAXI,EAYN,CAEFZ,cAAc,CAAC,cAAD,CAAd,CAAiCjB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiByL,YAAlD,CACAnK,cAAc,CAAC,qBAAD,CAAd,CAAwCjB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB0L,mBAAzD,CACApK,cAAc,CAAC,cAAD,CAAd,CAAgChB,UAAU,CAAC4E,gBAAX,CAA4B,eAA5B,CAAhC,CACA;AACA5D,cAAc,CAAC,0BAAD,CAAd,CAA6CjB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB2L,wBAA9D,CACArK,cAAc,CAAC,kBAAD,CAAd,CAAmC/B,mBAAmB,CAAC4B,SAAS,CAAClB,QAAX,CAAoBK,UAAU,CAACsL,WAA/B,CAAtD,CAEAtK,cAAc,gBACV,wBAAyB,CACrB,QAASjB,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB6L,aAAjB,CAA+BC,kBADnB,CAErB,QAASzL,QAAQ,CAAC,CAAD,CAAR,CAAYL,IAAZ,CAAiB6L,aAAjB,CAA+BE,kBAFnB,CADf,CAMV,aAAc,CACV,QAASzL,UAAU,CAAC4E,gBAAX,CAA4B,eAA5B,CADC,CAEV,QAAS,CAFC,CANJ,EAWb5D,cAXa,CAAd,CAeIpB,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CACiBuB,OAAO,CAAE,CAC3BQ,SAAS,CAATA,SAD2B,CAChBK,UAAU,CAAEA,UADI,CACOjB,UAAU,CAACA,UADlB,CAE3B;AACAgB,cAAc,CAAdA,cAH2B,CAGXuD,mBAAmB,CAAE,KAHV,CAGiBnD,YAAY,CAAZA,YAHjB,CAG+BoD,SAAS,CAAE,IAH1C,CAGgD1D,aAAa,CAAbA,aAHhD,CAI3BC,YAAY,CAAZA,YAJ2B,CAIbV,OAAO,CAAE,KAJI,CAD1B,CAAD,CAAR,CAQH,CAxFL,EAyFKC,KAzFL,CAyFW,SAAAC,KAAK,CAAI,CACZX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACR,QAAN,CAAe0E,MAAf,GAA0B,GAA9B,CAAmC,CAC/BvF,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CACDxB,KAAK,CAACwF,IAAN,CAAWrF,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACR,QAAN,CAAeL,IAArB,CAAnB,CAAX,EACH,CACJ,CAjGL,EAkGH,CACJ,CA3MD,IA4MK,CACDR,KAAK,CAACwF,IAAN,CAAWrF,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAE,uBAAN,CAAnB,CAAX,EACH,CACJ,CAhND,CAkNH,CAGD,MAAO,SAASiL,CAAAA,gBAAT,CAA0B1L,UAA1B,CAAsCL,QAAtC,CAAgD,CACnD,MAAO,UAAUC,QAAV,CAAoB,CACvBA,QAAQ,CAACR,WAAW,CAAC,IAAD,CAAZ,CAAR,CACA,MAAOR,CAAAA,KAAK,CAACiB,IAAN,CAAW,gCAAX,CAA6C,CAChD,WAAYF,QADoC,CAA7C,EAGFG,IAHE,CAGG,SAAAC,QAAQ,CAAI,CACd;AACA,GAAM4L,CAAAA,qBAAqB,CAAG5M,mBAAmB,CAACgB,QAAQ,CAACL,IAAT,CAAckM,qBAAd,EAAuC,EAAxC,CAA4C,yBAA5C,CACjD,qBADiD,CAC1B1L,SAD0B,CACfA,SADe,CACJ,KADI,CAAjD,CAEA,GAAM2L,CAAAA,kBAAkB,CAAGF,qBAAqB,CAAC/E,GAAtB,CAA0B,YAA1B,CAA3B,CAEA,GAAMkF,CAAAA,uBAAuB,CAAG/M,mBAAmB,CAACgB,QAAQ,CAACL,IAAT,CAAcqM,uBAAd,EAAyC,EAA1C,CAA8C,8BAA9C,CACnD,8BADmD,CACnB7L,SADmB,CACRA,SADQ,CACG,KADH,CAAnD,CAEA,GAAM8L,CAAAA,oBAAoB,CAAGF,uBAAuB,CAAClF,GAAxB,CAA4B,YAA5B,CAA7B,CAEF;AACE;AACA;AACA;AACA;AACA;AACA;AAGA;AACA,GAAMqF,CAAAA,WAAW,CAAGC,MAAM,CAACC,IAAP,CAAYpM,QAAQ,CAACL,IAAT,CAAc0M,KAA1B,EAAiCvK,GAAjC,CAAqC,SAAAwK,GAAG,QAAK,CAC7D7J,KAAK,CAAEzC,QAAQ,CAACL,IAAT,CAAc0M,KAAd,CAAoBC,GAApB,CADsD,CAE7DjI,KAAK,CAAEkI,QAAQ,CAACD,GAAD,CAF8C,CAAL,EAAxC,CAApB,CAKArM,UAAU,gCAAQA,UAAR,MAAoB6L,kBAAkB,CAAlBA,kBAApB,CAAuCI,WAAW,CAAXA,WAAvC,CAAmDD,oBAAoB,CAApBA,oBAAnD,EAAV,CACA;AACApM,QAAQ,CAAC,CACLO,IAAI,CAAEtB,cADD,CAELuB,OAAO,CAAE,CAAEJ,UAAU,CAAVA,UAAF,CAAcK,OAAO,CAAE,KAAvB,CAA6BkM,SAAS,CAAC,IAAvC,CAFJ,CAAD,CAAR,CAIH,CAlCE,EAkCAjM,KAlCA,CAkCM,SAAAC,KAAK,CAAI,CACdX,QAAQ,CAAC,CAAEO,IAAI,CAAEtB,cAAR,CAAwBuB,OAAO,CAAE,CAAEC,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACR,QAAN,CAAe0E,MAAf,GAA0B,GAA9B,CAAmC,CAC/BvF,KAAK,CAACqB,KAAN,CAAYlB,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACG,OAAZ,CAAnB,CAAZ,EACH,CAFD,IAGK,CACDxB,KAAK,CAACwF,IAAN,CAAWrF,IAAI,CAACmB,aAAL,CAAmB,CAAEC,EAAE,CAAEF,KAAK,CAACR,QAAN,CAAeL,IAArB,CAAnB,CAAX,EACH,CACJ,CA1CE,CAAP,CA2CH,CA7CD,CA8CH","sourcesContent":["import rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { sortData, constructOptionList, parentChildComboLoad, rearrangeDateFormat } from '../components/CommonScript'\r\nimport { toast } from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\nimport { attachmentType, transactionStatus } from '../components/Enumeration';\r\n\r\nexport function initialcombochangeget(nmaterialtypecode, data, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/material/getMaterialcombo\", { nmaterialtypecode, \"userinfo\": userInfo })\r\n            .then(response => {\r\n                const masterData = { ...data, ...response.data, searchedData: undefined }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            });\r\n    }\r\n}\r\n\r\nexport function getAddMaterialPopup(operation, loginInfo, selectedcombo, ncontrolCode, masterData, selectedRecord,screenname) {\r\n    return function (dispatch) {\r\n        if (masterData.SelectedMaterialCategoryFilter) {\r\n            if (operation === \"create\") {\r\n                let urlArray = [];\r\n                let templateData = [];\r\n                let data = [];\r\n                let toggleComponents = [];\r\n                let radioComponents = [];\r\n                let filterQueryComponents = [];\r\n                let dataparent = [];\r\n                const withoutCombocomponent = []\r\n                const Layout = masterData.selectedTemplate[0].jsondata\r\n                Layout.map(row => {\r\n                    return row.children.map(column => {\r\n                        return column.children.map(component => {\r\n                            if (component.hasOwnProperty(\"parent\")) {\r\n                                dataparent.push(component)\r\n                            }\r\n                            if (component.inputtype === 'toggle') {\r\n                                toggleComponents.push(component)\r\n                            }\r\n                            if (component.inputtype === 'radio') {\r\n                                radioComponents.push(component)\r\n                            }\r\n                            if (component.hasOwnProperty(\"nsqlquerycode\")) {\r\n                                filterQueryComponents.push(component)\r\n                            }\r\n                            return component.hasOwnProperty(\"children\") ? component.children.map(componentrow => {\r\n                                if (componentrow.inputtype === 'toggle') {\r\n                                    toggleComponents.push(componentrow)\r\n                                }\r\n                                if (componentrow.inputtype === \"combo\" && !(component.hasOwnProperty(\"parent\"))) {\r\n                                    if (componentrow.hasOwnProperty(\"parent\")) {\r\n                                        dataparent.push(componentrow)\r\n                                    }\r\n                                    else {\r\n                                        data.push(componentrow)\r\n                                    }\r\n\r\n                                }\r\n                                if (componentrow.hasOwnProperty(\"nsqlquerycode\")) {\r\n                                    filterQueryComponents.push(componentrow)\r\n                                }\r\n                            })\r\n                                : component.inputtype === \"combo\" && !(component.hasOwnProperty(\"parent\")) ? \r\n                                data.push(component) : withoutCombocomponent.push(component)\r\n                        })\r\n                    })\r\n                })\r\n                const comboComponents = data\r\n\r\n                dataparent[0] = {\r\n                    displaymember: dataparent[0].displaymember,\r\n                    inputtype: dataparent[0].inputtype,\r\n                    label: dataparent[0].label,\r\n                    source: dataparent[0].source,\r\n                    type: dataparent[0].type,\r\n                    valuemember: dataparent[0].valuemember,\r\n                    nquerybuildertablecode: dataparent[0].nquerybuildertablecode\r\n                }\r\n                let filterQueryComponents1 = []\r\n                filterQueryComponents.map(temp => {\r\n                    //filterQueryComponents1.push({'nsqlquerycode':temp.nsqlquerycode})\r\n                    filterQueryComponents1 += temp.nsqlquerycode + ','\r\n                })\r\n                const materialReq1 = rsapi.post(\"dynamicpreregdesign/getComboValues\",\r\n                    {\r\n                        \"nmaterialtypecode\": masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode\r\n                        , \"userinfo\": loginInfo.userInfo, \"parentcolumnlist\": comboComponents,\r\n                        \"filterQueryComponents\": filterQueryComponents1.substring(0, filterQueryComponents1.length - 1)\r\n                    });\r\n                const materialReq2 = rsapi.post('dynamicpreregdesign/getChildValues', {\r\n                    //ALPD-2272\r\n                    child: Layout[0].children[0].children[0].childValue || [],\r\n                    parentdata: { nmaterialtypecode: masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode },\r\n                    parentsource: 'materialcategory',\r\n                    'nmaterialtypecode':masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode,\r\n                    valuemember: 'nmaterialtypecode',\r\n                    \"userinfo\": loginInfo.userInfo,\r\n                    parentcolumnlist: dataparent\r\n                });\r\n                // const materialReq3 = rsapi.post(\"/material/getMaterialByTypeCode\",  {\r\n                //     nmaterialtypecode: selectedcombo['nmaterialtypecode'].value,\r\n                //     nmaterialcatcode: masterData.SelectedMaterialCategory['nmaterialcatcode'].value\r\n                //     , \"userinfo\": userInfo\r\n                // });\r\n                urlArray = [materialReq1, materialReq2\r\n                    //,materialReq3\r\n                ];\r\n                dispatch(initRequest(true));\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        templateData = response[0].data;\r\n                        data.splice(1, 0, dataparent[0])\r\n                        const temp2 = { ...response[0].data, ...response[1].data }\r\n                        templateData = parentChildComboLoad(data, temp2, selectedRecord, null, withoutCombocomponent, undefined, loginInfo.userInfo.slanguagetypecode, loginInfo.userInfo)\r\n                        toggleComponents.map((temp) => {\r\n                            if (temp.hasOwnProperty('defaultchecked') && temp.defaultchecked === transactionStatus.YES) {\r\n                                templateData['selectedRecord'] = {\r\n                                    ...templateData['selectedRecord'],\r\n                                    [temp.label]: temp.defaultchecked\r\n                                }\r\n                            }\r\n                        })\r\n                        radioComponents.map((temp) => {\r\n                            if (temp.hasOwnProperty('radioOptions')) {\r\n                                let tags=temp.radioOptions.tags\r\n                                tags.map((tag) => {\r\n                                    if(tag.hasOwnProperty('defaultchecked'))\r\n                                    //selectedRecord[temp.label] = tag['defaultchecked']\r\n                                    templateData['selectedRecord'] = {\r\n                                        ...templateData['selectedRecord'],\r\n                                        [temp.label]: tag['defaultchecked']\r\n                                    }\r\n                                })\r\n                            }\r\n                        })\r\n                        selectedRecord = templateData['selectedRecord']\r\n                        if(masterData.SelectedMaterialCategoryFilter&&masterData.SelectedMaterialCategoryFilter.length!==0){\r\n                            templateData['comboData'][\"Material Category\"].map(item=>{\r\n                                if (masterData.SelectedMaterialCategoryFilter.nmaterialcatcode === item.value) {\r\n                                    selectedRecord = {\r\n                                        \"Material Category\": {\r\n                                            \"label\": masterData.SelectedMaterialCategoryFilter.smaterialcatname,\r\n                                            \"value\": masterData.SelectedMaterialCategoryFilter.nmaterialcatcode,\r\n                                            \"item\": { \"jsondata\": item.item.jsondata,\"pkey\": \"nmaterialcatcode\", \"source\": \"materialcategory\" }                               \r\n                                        }\r\n                                    }\r\n                                }\r\n                       })      \r\n                     }\r\n                       \r\n                        // selectedRecord={\r\n                        //     \"Material Category\":{\r\n                        //         \"label\":masterData.SelectedMaterialCategoryFilter.smaterialcatname,\r\n                        //         \"value\":masterData.SelectedMaterialCategoryFilter.nmaterialcatcode\r\n                        //     }\r\n                        // }\r\n                        selectedRecord['Expiry'] = transactionStatus.NO;\r\n                        selectedRecord['Need Expiry'] = transactionStatus.NO;\r\n                        selectedRecord['Open Expiry Need'] = transactionStatus.NO;\r\n                        selectedRecord['Quarantine'] = transactionStatus.NO;\r\n                        selectedRecord['Next Validation Need'] = transactionStatus.NO;\r\n                        selectedRecord['Expiry Policy Period'] = undefined\r\n                        //selectedRecord['Expiry Validations'] = 'No Expiry'\r\n                        // if(selectedRecord['IDS_EXPIRY'])\r\n                        // {\r\n                        //     if(selectedRecord['IDS_EXPIRY']===transactionStatus.NO)\r\n                        //     {\r\n                        //         selectedRecord['IDS_NEEDEXPIRY']=transactionStatus.NO\r\n                        //     } \r\n                        // }\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                operation, screenname: screenname,\r\n                                //ismaterialSectionneed:response[2].data.ismaterialSectionneed,\r\n                                selectedRecord, showMaterialSection: false, templateData, openModal: true, selectedcombo,\r\n                                ncontrolCode, loading: false\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(intl.formatMessage({ id: error.message }));\r\n                        }\r\n                        else {\r\n                            toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                        }\r\n                    })\r\n            }\r\n            else {\r\n                let urlArray = [];\r\n                let templateData = [];\r\n                let data = [];\r\n                let dataparent = [];\r\n                let filterQueryComponents = [];\r\n                const withoutCombocomponent = []\r\n                const Layout = masterData.selectedTemplate[0].jsondata\r\n                Layout.map(row => {\r\n                    return row.children.map(column => {\r\n                        return column.children.map(component => {\r\n                            if (component.hasOwnProperty(\"parent\")) {\r\n                                dataparent.push(component)\r\n                            }\r\n                            if (component.hasOwnProperty(\"nsqlquerycode\")) {\r\n                                filterQueryComponents.push(component)\r\n                            }\r\n                            return component.hasOwnProperty(\"children\") ? component.children.map(componentrow => {\r\n                                if (componentrow.inputtype === \"combo\" && !(component.hasOwnProperty(\"parent\"))) {\r\n                                    if (componentrow.hasOwnProperty(\"parent\")) {\r\n                                        dataparent.push(componentrow)\r\n                                    }\r\n                                    else {\r\n                                        data.push(componentrow)\r\n                                    }\r\n                                }\r\n                                if (componentrow.hasOwnProperty(\"nsqlquerycode\")) {\r\n                                    filterQueryComponents.push(componentrow)\r\n                                }\r\n                            })\r\n                                : component.inputtype === \"combo\" && !(component.hasOwnProperty(\"parent\")) ? data.push(component) : withoutCombocomponent.push(component)\r\n                        })\r\n                    })\r\n                })\r\n                const comboComponents = data\r\n                const Material = rsapi.post(\"/material/getMaterialEdit\", { 'nmaterialcode': masterData.SelectedMaterial.nmaterialcode,\r\n                'nmaterialtypecode': masterData.SelectedMaterialType[0].nmaterialtypecode, \"userinfo\": loginInfo.userInfo });\r\n                dataparent[0] = {\r\n                    displaymember: dataparent[0].displaymember,\r\n                    inputtype: dataparent[0].inputtype,\r\n                    label: dataparent[0].label,\r\n                    source: dataparent[0].source,\r\n                    type: dataparent[0].type,\r\n                    valuemember: dataparent[0].valuemember\r\n                }\r\n                let filterQueryComponents1 = []\r\n                filterQueryComponents.map(temp => {\r\n                    // filterQueryComponents1.push({'nsqlquerycode':temp.nsqlquerycode})\r\n                    filterQueryComponents1 += temp.nsqlquerycode + ','\r\n                })\r\n                const materialReq1 = rsapi.post(\"dynamicpreregdesign/getComboValues\",\r\n                    {\r\n                        \"nmaterialtypecode\": masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode\r\n                        ,\"userinfo\": loginInfo.userInfo, \"parentcolumnlist\": comboComponents,\r\n                        \"filterQueryComponents\": filterQueryComponents1.substring(0, filterQueryComponents1.length - 1)\r\n                    });\r\n                const materialReq2 = rsapi.post('dynamicpreregdesign/getChildValues', {\r\n                      //ALPD-2272\r\n                    child: Layout[0].children[0].children[0].childValue||[],\r\n                    parentdata: { nmaterialtypecode: masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode },\r\n                    parentsource: 'materialcategory',\r\n                    'nmaterialtypecode':masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode,\r\n                    valuemember: 'nmaterialtypecode',\r\n                    \"userinfo\": loginInfo.userInfo,\r\n                    parentcolumnlist: dataparent\r\n                });\r\n                urlArray = [materialReq1, materialReq2, Material];\r\n                dispatch(initRequest(true));\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        templateData = response[0].data;\r\n                        data = [...data, ...dataparent]\r\n                        templateData = parentChildComboLoad(data, { ...response[0].data, ...response[1].data }, selectedRecord, null, withoutCombocomponent, undefined, loginInfo.userInfo.slanguagetypecode, loginInfo.userInfo)\r\n                        selectedRecord = response[2].data.EditedMaterial[0]\r\n                     \r\n                        if (response[2].data[\"EditedMaterial\"].length > 0) {\r\n                            if (response[2].data[\"MaterialDateFeild\"]!==undefined) {\r\n                                response[2].data[\"MaterialDateFeild\"].map((temp) => {\r\n                                    response[2].data[\"EditedMaterial\"][0][temp] =\r\n                                        rearrangeDateFormat( loginInfo.userInfo, response[2].data[\"EditedMaterial\"][0][temp])\r\n                                })\r\n                                response[2].data[\"DateFeildsMaterial\"].map((temp) => {\r\n                                    if (response[2].data[\"EditedMaterial\"][0].hasOwnProperty(temp)&&\r\n                                    response[2].data[\"EditedMaterial\"][0][temp]==='-') {\r\n                                        delete response[2].data[\"EditedMaterial\"][0][temp] \r\n                                    }\r\n                                }) \r\n                            }\r\n                            else\r\n                            {\r\n                                response[2].data[\"DateFeildsMaterial\"].map((temp) => {\r\n                                    if (response[2].data[\"EditedMaterial\"][0].hasOwnProperty(temp)&&\r\n                                    response[2].data[\"EditedMaterial\"][0][temp]==='-') {\r\n                                        delete response[2].data[\"EditedMaterial\"][0][temp] \r\n                                    }\r\n                                })  \r\n                            }\r\n                        }\r\n                     \r\n                        selectedRecord['Material Category'] = {\r\n                            ...selectedRecord['Material Category'],\r\n                            needsectionwise: response[2].data.EditedMaterial[0].needsectionwise\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                operation, screenname: 'IDS_MATERIAL', isSelectedRecordChange: false, showMaterialSection: false, templateData, openModal: true, selectedcombo, selectedRecord,\r\n                                ncontrolCode, loading: false,showSectionWhileEdit:false\r\n                                //,  ismaterialSectionneed:response[2].data.EditedMaterial[0].jsondata.needsectionwise\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(intl.formatMessage({ id: error.message }));\r\n                        }\r\n                        else {\r\n                            toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                        }\r\n                    })\r\n            }\r\n        }\r\n        else {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_CONFIGMATERIALCAT\" }));\r\n        }\r\n    }\r\n}\r\n\r\nexport function getMaterialDetails(inputData, masterData, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"material/getMaterialDetails\", {\r\n            \"nmaterialcode\": inputData.nmaterialcode,\r\n            \"nmaterialcatcode\": masterData.SelectedMaterialCategoryFilter.nmaterialcatcode,\r\n            \"nmaterialtypecode\": masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode,\r\n            \"userinfo\": userInfo,\r\n            fromDate:masterData.fromDate,\r\n            toDate:masterData.toDate\r\n        })\r\n            .then(response => {\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { masterData, loading: false } });\r\n            }).catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getMaterialEdit(screenName, operation, primaryKeyName, masterData, userInfo, ncontrolCode) {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n        if (operation === \"create\") {\r\n            const EDQMManufacturer = rsapi.post(\"/edqmmanufacturer/getEDQMManufacturer\", { \"userinfo\": userInfo });\r\n            urlArray = [EDQMManufacturer];\r\n        }\r\n        else {\r\n            const Material = rsapi.post(\"/material/getMaterialEdit\", \r\n            { [primaryKeyName]: masterData.SelectedMaterial.jsondata.nmaterialcode,\r\n                'nmaterialtypecode': masterData.SelectedMaterialType.nmaterialtypecode, \"userinfo\": userInfo });\r\n            urlArray = [Material];\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = {};\r\n                if (operation === \"update\") {\r\n                    selectedRecord = response[2].data.EditedMaterial[0].jsondata;\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        isOpen: true,\r\n                        selectedRecord: operation === \"update\" ? selectedRecord : { \"ntransactionstatus\": 1 },\r\n                        operation: operation,\r\n                        screenName: screenName,\r\n                        openModal: true, ncontrolCode: ncontrolCode, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getMaterialByTypeCode(selectedcombo, selectedMaterialCat, Data, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/material/getMaterialByTypeCode\", selectedMaterialCat !== undefined ? {\r\n            nmaterialtypecode: selectedcombo['nmaterialtypecode'].value,\r\n            nmaterialcatcode: selectedMaterialCat['nmaterialcatcode'].value,       \r\n            fromDate:Data.fromDate,\r\n            toDate:Data.toDate\r\n           \r\n            , \"userinfo\": userInfo,\r\n            'nflag':1\r\n        } : {\r\n            nmaterialtypecode: selectedcombo['nmaterialtypecode'].value\r\n\r\n            , \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n                let masterData = {}\r\n                let tabScreen;\r\n                if (response[\"data\"].ismaterialSectionneed === 3) {\r\n                    tabScreen = 'IDS_MATERIALSECTION'\r\n                }\r\n                masterData = { ...Data, ...response.data, tabScreen, searchedData: undefined }\r\n\r\n               sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData, loading: false, skip: 0, take: 20\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            });\r\n    }\r\n}\r\nexport function getMaterialReload(selectedcombo, selectedMaterialCat, Data, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/material/getMaterialByTypeCode\", selectedMaterialCat !== undefined ? {\r\n            nmaterialtypecode: selectedcombo[0]['nmaterialtypecode'],\r\n            nmaterialcatcode: selectedMaterialCat['nmaterialcatcode'],\r\n            fromDate:Data.fromDate,\r\n            toDate:Data.toDate\r\n            , \"userinfo\": userInfo,\r\n            'nflag':1\r\n        } : {\r\n            nmaterialtypecode: selectedcombo['nmaterialtypecode'].value\r\n\r\n            , \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n                let masterData = {}\r\n\r\n                masterData = { ...Data, ...response.data, searchedData: undefined }\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData, loading: false, skip: 0, take: 20\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            });\r\n    }\r\n}\r\nexport function getAddMaterialSectionPopup(Data, userInfo, updateInfo, ncontrolCode) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/material/getMaterialSection\", {\r\n            \"userinfo\": userInfo,\r\n            'nmaterialcode': Data[\"SelectedMaterial\"][\"nmaterialcode\"]\r\n            , 'needSectionwise': Data[\"SelectedMaterialCategory\"].needSectionwise\r\n        })\r\n            .then(response => {\r\n                let masterData = {}\r\n                if (Array.isArray(response.data)) {\r\n                    let MaterialSectionOptions = [];\r\n                    MaterialSectionOptions = response.data\r\n                    const productCatMap = constructOptionList(response.data || [], \"nsectioncode\",\r\n                        \"ssectionname\", undefined, undefined, true);\r\n                    const productCategoryList = { productCategoryList: productCatMap.get(\"OptionList\") };\r\n                    masterData = { ...Data, ...productCategoryList}\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            operation: \"create\",\r\n                            masterData, updateInfo, ncontrolCode, openModal: true, ismaterialsectionEdit: false, isneedcombomulti: false, screenname: \"IDS_MATERIALSECTION\", showMaterialSection: true, loading: false, skip: 0, take: 20\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.warn(response.data);\r\n                    masterData = { ...Data }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            operation: \"create\",\r\n                            masterData, updateInfo, openModal: false, ismaterialsectionEdit: false, isneedcombomulti: false, screenname: \"IDS_MATERIALSECTION\", showMaterialSection: true, loading: false, skip: 0, take: 20\r\n                        }\r\n                    });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(error);\r\n            });\r\n    }\r\n}\r\n\r\nexport function getMaterialSectionEdit(inputparam) {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n        let selectedRecord = { ...inputparam.selectedRecord };\r\n        dispatch(initRequest(true));\r\n        const url1 = rsapi.post(\"/material/getActiveMaterialSectionById\", {\r\n            editRow: inputparam[\"editRow\"],\r\n            ncontrolCode: inputparam.ncontrolCode,\r\n            operation: inputparam.operation,\r\n            primaryKeyField: \"nmaterialsectioncode\",\r\n            primaryKeyValue: inputparam.primaryKeyValue,\r\n            selectedId: inputparam.primaryKeyValue,\r\n            \"userinfo\": inputparam.userInfo\r\n        })\r\n        const url2 = rsapi.post(\"/material/getMaterialSection\", {\r\n            \"userinfo\": inputparam.userInfo,\r\n            nmaterialcode: inputparam[\"editRow\"].nmaterialcode, primaryKeyValue: inputparam.primaryKeyValue,\r\n            needSectionwise: inputparam.masterData[\"SelectedMaterialCategory\"].needSectionwise,\r\n            nmaterialsectioncode: inputparam['editRow'].nmaterialsectioncode\r\n            //,nflag:1\r\n        })\r\n        urlArray = [url1, url2]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const productCatMap = constructOptionList(response[0].data.MaterialSectionEditData || [], \"nsectioncode\",\r\n                    \"ssectionname\", undefined, undefined, true);\r\n                selectedRecord[\"nmaterialsectioncode\"] = productCatMap.get(\"OptionList\");\r\n                selectedRecord[\"nreorderlevel\"] = inputparam[\"editRow\"].nreorderlevel;\r\n                selectedRecord[\"nmaterialsectioncodeprimaryKeyValue\"] = inputparam.primaryKeyValue;\r\n                if (!Array.isArray(response[1].data)) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            isOpen: true,\r\n                            selectedRecord,\r\n                            operation: \"update\",\r\n                            isneedcombomulti: true,\r\n                            selectedId: inputparam.primaryKeyValue,\r\n                            openModal: true, showMaterialSection: true, ismaterialsectionEdit: true, screenname: \"IDS_MATERIALSECTION\", ncontrolCode: inputparam.ncontrolCode, loading: false\r\n                        }\r\n                    });\r\n                }\r\n                const productCatMap1 = constructOptionList(response[1].data || [], \"nsectioncode\",\r\n                    \"ssectionname\", undefined, undefined, true);\r\n                const productCategoryList2 = { productCategoryList: productCatMap1.get(\"OptionList\") };\r\n                //productCategoryList2['productCategoryList']={...selectedRecord[\"nmaterialsectioncode\"]}\r\n                let masterData = {}\r\n                masterData = { ...inputparam.masterData, ...productCategoryList2}\r\n\r\n                if (Array.isArray(response[1].data)) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            isOpen: true,\r\n                            selectedRecord,\r\n                            masterData,\r\n                            operation: \"update\",\r\n                            isneedcombomulti: true,\r\n                            selectedId: inputparam.primaryKeyValue,\r\n                            openModal: true, showMaterialSection: true, ismaterialsectionEdit: true, screenname: \"IDS_MATERIALSECTION\", ncontrolCode: inputparam.ncontrolCode, loading: false\r\n                        }\r\n                    });\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function addSafetyInstructions(Data, userInfo, ncontrolcode) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/material/getMaterialSafetyInstructions\", {\r\n            'nmaterialcode': Data[\"SelectedMaterial\"].nmaterialcode,\r\n            \"userinfo\": userInfo, nflag: 1\r\n        })\r\n            .then(response => {\r\n                if (Array.isArray(response.data[\"selectedTemplateSafetyInstructions\"])) {\r\n                    let selectedRecord = response.data[\"MaterialSafetyInstructions\"].length > 0 ?\r\n                        response.data[\"MaterialSafetyInstructions\"][0].jsondata : []\r\n                    let masterData = {}\r\n                    const MaterialSafetyInstructions = { MaterialSafetyInstructions: response.data[\"MaterialSafetyInstructions\"] }\r\n                    masterData = { ...Data, ...MaterialSafetyInstructions\r\n                                 // ALPD-854\r\n                                  // searchedData: undefined \r\n                                 }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData, loading: false,\r\n                            loadEsign: false,\r\n                            selectedRecord,\r\n                            ncontrolCode: ncontrolcode\r\n                            , openModal: true, screenname: \"IDS_MATERIALSAFETYINSTRUCTIONS\"\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.warn(response.data);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            });\r\n    }\r\n}\r\n\r\nexport function addMaterialProperty(Data, userInfo, ncontrolcode) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [];\r\n        let date;\r\n        let timeZoneList;\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n        const getMaterialSafety = rsapi.post(\"/material/getMaterialSafetyInstructions\", {\r\n            'nmaterialcode': Data[\"SelectedMaterial\"].nmaterialcode,\r\n            \"userinfo\": userInfo, nflag: 2\r\n        })\r\n        urlArray = [getMaterialSafety, timezone]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                if (Array.isArray(response[0].data[\"selectedTemplateProperties\"])) {\r\n                    let selectedRecord = response[0].data[\"MaterialProperties\"].length > 0 ?\r\n                        response[0].data[\"MaterialProperties\"][0].jsondata : []\r\n                    let masterData = {}\r\n                    const MaterialProperties = { MaterialProperties: response[0].data[\"MaterialProperties\"] }\r\n                    // if (response[0].data[\"MaterialProperties\"].length > 0) {\r\n                    //     if (response[0].data[\"MaterialPropertiesDateFeild\"]) {\r\n                    //         response[0].data[\"MaterialPropertiesDateFeild\"].map((temp) => {\r\n                    //             response[0].data[\"MaterialProperties\"][0].jsondata[temp] =\r\n                    //                 rearrangeDateFormat(userInfo, response[0].data[\"MaterialProperties\"][0].jsondata[temp])\r\n\r\n                    //         })\r\n                    //     }\r\n                    // }\r\n                    response[0].data['selectedTemplateProperties'][0]['jsondata'].map((row) => {\r\n                        row.children.map((column) => {\r\n                            column.children.map((component, i) => {\r\n\r\n                                if (component.inputtype === 'date') {\r\n                                    if (response[0].data[\"MaterialProperties\"][0]) {\r\n                                    if (response[0].data[\"MaterialProperties\"][0].jsondata[component.label] !== \"-\") {\r\n                                        if (response[0].data[\"MaterialProperties\"][0]) {\r\n                                            response[0].data[\"MaterialProperties\"][0].jsondata[component.label] =\r\n                                                rearrangeDateFormat(userInfo, response[0].data[\"MaterialProperties\"][0].jsondata[component.label])\r\n                                        }\r\n                                    }else {\r\n                                        if (response[0].data[\"MaterialProperties\"][0]) {\r\n                                        delete response[0].data[\"MaterialProperties\"][0].jsondata[component.label]\r\n                                        }\r\n                                    }\r\n                                }\r\n                                    else {\r\n                                        if (response[0].data[\"MaterialProperties\"][0]) {\r\n                                        delete response[0].data[\"MaterialProperties\"][0].jsondata[component.label]\r\n                                        }\r\n                                    }\r\n\r\n                                }\r\n                            })\r\n                        })\r\n                    })\r\n                    //   response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'] =\r\n                    // rearrangeDateFormat(userInfo, response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'])\r\n                    //new Date(response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'])\r\n\r\n\r\n                    masterData = { ...Data, ...MaterialProperties,\r\n                       // ALPD-854\r\n                        // searchedData: undefined \r\n                    }\r\n                    Data['selectedTemplateProperties'][0].jsondata.map((row) => {\r\n                        row.children.map((column) => {\r\n                            column.children.map((component) => {\r\n                                if (component.inputtype === 'date') {\r\n                                    if (component.hasOwnProperty('timezone')) {\r\n                                        const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                                            \"stimezoneid\", undefined, undefined, true);\r\n                                        timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n\r\n                                        response[0].data[\"DateFeildsProperties\"].map((temp) => {\r\n                                            if (!selectedRecord.hasOwnProperty(temp)) {\r\n                                                selectedRecord[`tz${temp}`] = timeZoneList[0]\r\n                                            }\r\n                                        })\r\n                                    }\r\n                                }\r\n                            })\r\n                        })\r\n                    })\r\n\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData, loading: false,\r\n                            loadEsign: false,\r\n                            selectedRecord,\r\n                            isSelectedRecordChange: false,\r\n                            timeZoneList,\r\n                            ncontrolCode: ncontrolcode\r\n                            , openModal: true, screenname: \"IDS_MATERIALPROPERTY\"\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.warn(response.data||response[0].data);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            });\r\n    }\r\n}\r\nexport function addMaterialFile(inputParam, param) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [rsapi.post(\"/material/getMaterialLinkMaster\", {\r\n            nmaterialcode: param.nmaterialcode && param.nmaterialcode,\r\n            userinfo: inputParam.userInfo\r\n        })];\r\n        if (inputParam.operation === \"update\") {\r\n            urlArray.push(rsapi.post(\"/material/editMaterialMsdsAttachment\", {\r\n                userinfo: inputParam.userInfo,\r\n                nmaterialcode: param.nmaterialcode && param.nmaterialcode,\r\n                nmaterialfilecode: inputParam.selectedRecord.nmaterialfilecode\r\n            }))\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\r\n                const linkmaster = linkMap.get(\"OptionList\");\r\n                let selectedRecord = {};\r\n                const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\r\n                let disabled = false;\r\n                let editObject = {};\r\n                if (inputParam.operation === \"update\") {\r\n                    editObject = response[1].data;\r\n                    let nlinkcode = {};\r\n                    let link = {};\r\n                    if (editObject[\"jsondata\"].nattachmenttypecode === attachmentType.LINK) {\r\n                        nlinkcode = {\r\n                            \"label\": editObject[\"jsondata\"].slinkname,\r\n                            \"value\": editObject[\"jsondata\"].nlinkcode\r\n                        }\r\n\r\n                        link = {\r\n                            slinkfilename: editObject[\"jsondata\"].sfilename,\r\n                            slinkdescription: editObject[\"jsondata\"].sdescription,\r\n                            nlinkdefaultstatus: editObject[\"jsondata\"].ndefaultstatus,\r\n                            sfilesize: '',\r\n                            nfilesize: 0,\r\n                            ndefaultstatus: editObject[\"jsondata\"].ndefaultstatus===3?3:4,\r\n                            sfilename: '',\r\n                        }\r\n\r\n                    } else {\r\n                        nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\"\r\n                        link = {\r\n                            slinkfilename: '',\r\n                            slinkdescription: '',\r\n                            nlinkdefaultstatus: 4,\r\n                            sfilesize: editObject[\"jsondata\"].sfilesize,\r\n                            nfilesize: editObject[\"jsondata\"].nfilesize,\r\n                            ndefaultstatus: editObject[\"jsondata\"].ndefaultstatus,\r\n                            ssystemfilename: editObject[\"jsondata\"].ssystemfilename,\r\n                            sfilename: editObject[\"jsondata\"].sfilename,\r\n                            nlinkdefaultstatus: editObject[\"jsondata\"].ndefaultstatus\r\n                        }\r\n                    }\r\n                    selectedRecord = {\r\n                        ...link,\r\n                        sdescription: editObject[\"jsondata\"].sdescription,\r\n                        nmaterialfilecode: editObject[\"jsondata\"].nmaterialfilecode,\r\n                        nattachmenttypecode: editObject[\"jsondata\"].nattachmenttypecode,\r\n                        nlinkcode,\r\n                    };\r\n                } else {\r\n                    selectedRecord = {\r\n                        nattachmenttypecode: response[0].data.AttachmentType.length > 0 ?\r\n                            response[0].data.AttachmentType[0].nattachmenttypecode : attachmentType.FTP,\r\n                        nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\",\r\n                        disabled\r\n                    };\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openModal: true,\r\n                        dcreateddate: inputParam.selectedRecord && rearrangeDateFormat(inputParam.userInfo, inputParam.selectedRecord.dcreateddate),\r\n                        operation: inputParam.operation,\r\n                        screenname: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolCode,\r\n                        selectedRecord,\r\n                        loading: false,\r\n                        linkMaster: linkmaster,\r\n                        showSaveContinue: false,\r\n                        editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function addMaterialAccountingProperty(Data, userInfo, ncontrolcode) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [];\r\n        let date;\r\n        let timeZoneList;\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n        const getMaterialSafety = rsapi.post(\"/material/getMaterialAcountingProperties\", {\r\n            'nmaterialcode': Data[\"SelectedMaterial\"].nmaterialcode,\r\n            \"userinfo\": userInfo, nflag: 2\r\n        })\r\n        urlArray = [getMaterialSafety, timezone]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                if (Array.isArray(response[0].data[\"selectedTemplateProperties\"])) {\r\n                    let selectedRecord = response[0].data[\"MaterialProperties\"].length > 0 ?\r\n                        response[0].data[\"MaterialProperties\"][0].jsondata : []\r\n                    let masterData = {}\r\n                    const MaterialProperties = { MaterialProperties: response[0].data[\"MaterialProperties\"] }\r\n                    const selectedTemplateProperties=response[0].data[\"selectedTemplateProperties\"]\r\n                    // if (response[0].data[\"MaterialProperties\"].length > 0) \r\n                    //     if (response[0].data[\"MaterialPropertiesDateFeild\"]) {\r\n                    //         response[0].data[\"MaterialPropertiesDateFeild\"].map((temp) => {\r\n                    //             response[0].data[\"MaterialProperties\"][0].jsondata[temp] =\r\n                    //                 rearrangeDateFormat(userInfo, response[0].data[\"MaterialProperties\"][0].jsondata[temp])\r\n\r\n                    //         })\r\n                    //     }\r\n                    // }\r\n                    response[0].data['selectedTemplateProperties'][0]['jsondata'].map((row) => {\r\n                        row.children.map((column) => {\r\n                            column.children.map((component, i) => {\r\n\r\n                                if (component.inputtype === 'date') {\r\n                                    if (response[0].data[\"MaterialProperties\"][0]) {\r\n                                    if (response[0].data[\"MaterialProperties\"][0].jsondata[component.label] !== \"-\") {\r\n                                        if (response[0].data[\"MaterialProperties\"][0]) {\r\n                                            response[0].data[\"MaterialProperties\"][0].jsondata[component.label] =\r\n                                                rearrangeDateFormat(userInfo, response[0].data[\"MaterialProperties\"][0].jsondata[component.label])\r\n                                        }\r\n                                    }else {\r\n                                        if (response[0].data[\"MaterialProperties\"][0]) {\r\n                                        delete response[0].data[\"MaterialProperties\"][0].jsondata[component.label]\r\n                                        }\r\n                                    }\r\n                                }\r\n                                    else {\r\n                                        if (response[0].data[\"MaterialProperties\"][0]) {\r\n                                        delete response[0].data[\"MaterialProperties\"][0].jsondata[component.label]\r\n                                        }\r\n                                    }\r\n\r\n                                }\r\n                            })\r\n                        })\r\n                    })\r\n                    //   response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'] =\r\n                    // rearrangeDateFormat(userInfo, response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'])\r\n                    //new Date(response[0].data[\"MaterialProperties\"][0].jsondata['IDS_DATEOFSTANDARDIZATION'])\r\n\r\n\r\n                    masterData = { ...Data, ...MaterialProperties,selectedTemplateProperties\r\n                       // ALPD-854\r\n                        // searchedData: undefined \r\n                    }\r\n                    Data['selectedTemplateProperties'][0].jsondata.map((row) => {\r\n                        row.children.map((column) => {\r\n                            column.children.map((component) => {\r\n                                if (component.inputtype === 'date') {\r\n                                    if (component.hasOwnProperty('timezone')) {\r\n                                        const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                                            \"stimezoneid\", undefined, undefined, true);\r\n                                        timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n\r\n                                        response[0].data[\"DateFeildsProperties\"].map((temp) => {\r\n                                            if (!selectedRecord.hasOwnProperty(temp)) {\r\n                                                selectedRecord[`tz${temp}`] = timeZoneList[0]\r\n                                            }\r\n                                        })\r\n                                    }\r\n                                }\r\n                            })\r\n                        })\r\n                    })\r\n\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData, loading: false,\r\n                            loadEsign: false,\r\n                            selectedRecord,\r\n                            isSelectedRecordChange: false,\r\n                            timeZoneList,\r\n                            ncontrolCode: ncontrolcode\r\n                            , openModal: true, screenname: \"IDS_MATERIALACCOUNTING\"\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.warn(response.data||response[0].data);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            });\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport function getAddMaterialAccountingPopup(operation, loginInfo, selectedcombo, ncontrolCode, masterData, selectedRecord,screenname,samplestate) {\r\n    return function (dispatch) {\r\n        if (masterData.SelectedMaterialCategoryFilter) {\r\n            if (operation === \"create\") {\r\n                let urlArray = [];\r\n                let templateData = [];\r\n                let data = [];\r\n                let toggleComponents = [];\r\n                let radioComponents = [];\r\n                let filterQueryComponents = [];\r\n                let dataparent = [];\r\n                const withoutCombocomponent = [];\r\n                let selectedTemplate=[];\r\n                let Layout = masterData.selectedTemplate[0].jsondata;\r\n                if(samplestate===\"powder\" || samplestate===\"Liquid\"){\r\n                     Layout = masterData.selectedTemplatepowder[0].jsondata\r\n                     selectedTemplate=masterData.selectedTemplatepowder\r\n                }\r\n                // else if(samplestate===\"Liquid\"){\r\n                //      Layout = masterData.selectedTemplatesolution[0].jsondata \r\n                //      selectedTemplate=masterData.selectedTemplatesolution\r\n                // }\r\n                else{\r\n                    selectedTemplate=masterData.selectedTemplatePellet\r\n                }\r\n               \r\n                masterData={\r\n                    samplestate:samplestate,\r\n                    ...masterData,\r\n                    selectedTemplate\r\n                }\r\n                //const Layout = masterData.selectedTemplate[0].jsondata\r\n                Layout.map(row => {\r\n                    return row.children.map(column => {\r\n                        return column.children.map(component => {\r\n                            if (component.hasOwnProperty(\"parent\")) {\r\n                                dataparent.push(component)\r\n                            }\r\n                            if (component.inputtype === 'toggle') {\r\n                                toggleComponents.push(component)\r\n                            }\r\n                            if (component.inputtype === 'radio') {\r\n                                radioComponents.push(component)\r\n                            }\r\n                            if (component.hasOwnProperty(\"nsqlquerycode\")) {\r\n                                filterQueryComponents.push(component)\r\n                            }\r\n                            return component.hasOwnProperty(\"children\") ? component.children.map(componentrow => {\r\n                                if (componentrow.inputtype === 'toggle') {\r\n                                    toggleComponents.push(componentrow)\r\n                                }\r\n                                if (componentrow.inputtype === \"combo\" && !(component.hasOwnProperty(\"parent\"))) {\r\n                                    if (componentrow.hasOwnProperty(\"parent\")) {\r\n                                        dataparent.push(componentrow)\r\n                                    }\r\n                                    else {\r\n                                        data.push(componentrow)\r\n                                    }\r\n\r\n                                }\r\n                                if (componentrow.hasOwnProperty(\"nsqlquerycode\")) {\r\n                                    filterQueryComponents.push(componentrow)\r\n                                }\r\n                            })\r\n                                : component.inputtype === \"combo\" && !(component.hasOwnProperty(\"parent\")) ? \r\n                                data.push(component) : withoutCombocomponent.push(component)\r\n                        })\r\n                    })\r\n                })\r\n                const comboComponents = data\r\n                const Material = rsapi.post(\"/material/getMaterialAvailableQty\", { 'nmaterialcode': masterData.SelectedMaterial.nmaterialcode,\r\n                 \"userinfo\": loginInfo.userInfo });\r\n\r\n                dataparent[0] = {\r\n                    displaymember: dataparent[0].displaymember,\r\n                    inputtype: dataparent[0].inputtype,\r\n                    label: dataparent[0].label,\r\n                    source: dataparent[0].source,\r\n                    type: dataparent[0].type,\r\n                    valuemember: dataparent[0].valuemember,\r\n                    nquerybuildertablecode: dataparent[0].nquerybuildertablecode\r\n                }\r\n                let filterQueryComponents1 = []\r\n                filterQueryComponents.map(temp => {\r\n                    filterQueryComponents1 += temp.nsqlquerycode + ','\r\n                })\r\n                const materialReq1 = rsapi.post(\"dynamicpreregdesign/getComboValues\",\r\n                    {\r\n                        \"nmaterialtypecode\": masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode\r\n                        , \"userinfo\": loginInfo.userInfo, \"parentcolumnlist\": comboComponents,\r\n                        \"filterQueryComponents\": filterQueryComponents1.substring(0, filterQueryComponents1.length - 1)\r\n                    });\r\n                const materialReq2 = rsapi.post('dynamicpreregdesign/getChildValues', {\r\n                   \r\n                    child: Layout[0].children[0].children[0].childValue || [],\r\n                    parentdata: { nmaterialtypecode: masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode },\r\n                    parentsource: 'materialcategory',\r\n                    'nmaterialtypecode':masterData.SelectedMaterialTypeFilter[0].nmaterialtypecode,\r\n                    valuemember: 'nmaterialtypecode',\r\n                    \"userinfo\": loginInfo.userInfo,\r\n                    parentcolumnlist: dataparent\r\n                });\r\n                urlArray = [materialReq1, materialReq2,Material\r\n                    //,materialReq3\r\n                ];\r\n                dispatch(initRequest(true));\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        templateData = response[0].data;\r\n                        data.splice(1, 0, dataparent[0])\r\n                        const temp2 = { ...response[0].data, ...response[1].data }\r\n                        templateData = parentChildComboLoad(data, temp2, selectedRecord, null, withoutCombocomponent, undefined, loginInfo.userInfo.slanguagetypecode, loginInfo.userInfo)\r\n                        toggleComponents.map((temp) => {\r\n                            if (temp.hasOwnProperty('defaultchecked') && temp.defaultchecked === transactionStatus.YES) {\r\n                                templateData['selectedRecord'] = {\r\n                                    ...templateData['selectedRecord'],\r\n                                    [temp.label]: temp.defaultchecked\r\n                                }\r\n                            }\r\n                        })\r\n                        radioComponents.map((temp) => {\r\n                            if (temp.hasOwnProperty('radioOptions')) {\r\n                                let tags=temp.radioOptions.tags\r\n                                tags.map((tag) => {\r\n                                    if(tag.hasOwnProperty('defaultchecked'))\r\n                                    templateData['selectedRecord'] = {\r\n                                        ...templateData['selectedRecord'],\r\n                                        [temp.label]: tag['defaultchecked']\r\n                                    }\r\n                                })\r\n                            }\r\n                        })\r\n                      \r\n                        const defaultValue = [];\r\n                        response[2].data.Productname.map(item => {\r\n                            defaultValue.push({\r\n                                label: item['sproductname'], value: item['sproductname'],\r\n                                item: item\r\n                              })\r\n                            return defaultValue\r\n                              \r\n                            \r\n                          });\r\n                          templateData['comboData'] = {\r\n                            ...templateData['comboData'],\r\n                            'SampleName':defaultValue\r\n                        }\r\n                        selectedRecord = templateData['selectedRecord']\r\n                        //delete templateData.selectedRecord[\"Material Category\"]\r\n                        if(masterData.SelectedMaterialCategoryFilter&&masterData.SelectedMaterialCategoryFilter.length!==0){\r\n                            templateData['comboData'][\"Material Category\"].map(item=>{\r\n                                if (masterData.SelectedMaterialCategoryFilter.nmaterialcatcode === item.value) {\r\n                                    selectedRecord = {\r\n                                        \"Material Category\": {\r\n                                            \"label\": masterData.SelectedMaterialCategoryFilter.smaterialcatname,\r\n                                            \"value\": masterData.SelectedMaterialCategoryFilter.nmaterialcatcode,\r\n                                            \"item\": { \"jsondata\": item.item.jsondata,\"pkey\": \"nmaterialcatcode\", \"source\": \"materialcategory\" }                               \r\n                                        },\r\n                                  \r\n                                    }\r\n                                }\r\n                       })      \r\n                     }\r\n\r\n                    selectedRecord['AvailableQty'] = response[2].data.AvailableQty\r\n                    selectedRecord['AvailableUraniumQty'] = response[2].data.AvailableUraniumQty\r\n                    selectedRecord['MaterialName']= masterData.SelectedMaterial[\"Material Name\"]\r\n                    //selectedRecord['SampleName']= masterData.SelectedMaterial[\"Material Name\"]\r\n                    selectedRecord['suraniumconversionfactor'] = response[2].data.suraniumconversionfactor\r\n                    selectedRecord['Transaction Date']=rearrangeDateFormat(loginInfo.userInfo,masterData.Currentdate)\r\n                   \r\n                    selectedRecord = {\r\n                        \"materialinventorytype\": {\r\n                            \"label\": response[2].data.Inventorytype.sinventorytypename,\r\n                            \"value\": response[2].data.Inventorytype.ninventorytypecode,\r\n                                                          \r\n                        },\r\n                        \"SampleName\": {\r\n                            \"label\": masterData.SelectedMaterial[\"Material Name\"],\r\n                            \"value\": 0,\r\n                                                          \r\n                        },\r\n                  ...selectedRecord\r\n                    }\r\n                  \r\n                    \r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                operation, screenname: screenname,masterData:masterData,\r\n                                //ismaterialSectionneed:response[2].data.ismaterialSectionneed,\r\n                                selectedRecord, showMaterialSection: false, templateData, openModal: true, selectedcombo,\r\n                                ncontrolCode, loading: false\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(intl.formatMessage({ id: error.message }));\r\n                        }\r\n                        else {\r\n                            toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                        }\r\n                    })\r\n            }\r\n        }\r\n        else {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_CONFIGMATERIALCAT\" }));\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n\r\nexport function getReportDetails(masterData, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"material/getUraniumContentType\", {          \r\n            \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n                //let UraniumContentType=;\r\n                const uraniumcontenttypeMap = constructOptionList(response.data.lstUraniumContentType || [], \"nuraniumcontenttypecode\",\r\n                \"suraniumcontenttype\", undefined, undefined, false);\r\n                const UraniumContentType = uraniumcontenttypeMap.get(\"OptionList\");\r\n\r\n                const accountingPlantGroupMap = constructOptionList(response.data.lstAccountingPlantGroup || [], \"nmaterialaccountinggroupcode\",\r\n                \"smaterialaccountinggroupname\", undefined, undefined, false);\r\n                const accountingPlantGroup = accountingPlantGroupMap.get(\"OptionList\");\r\n\r\n              //  const defaultValue = [];\r\n                // response.data.month.map((item, index)=> {\r\n                //     defaultValue.push({\r\n                //         label: item[index],\r\n                //         item: index\r\n                //       })\r\n                //     return defaultValue\r\n                      \r\n                    \r\n                //   });\r\n                const listOfMonth = Object.keys(response.data.month).map(key => ({\r\n                    label: response.data.month[key],\r\n                    value: parseInt(key)\r\n                }));\r\n                            \r\n                masterData = { ...masterData, UraniumContentType,listOfMonth,accountingPlantGroup };\r\n                //sortData(masterData);\r\n                dispatch({ \r\n                    type: DEFAULT_RETURN, \r\n                    payload: { masterData, loading: false,modalShow:true } \r\n                });\r\n            }).catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}