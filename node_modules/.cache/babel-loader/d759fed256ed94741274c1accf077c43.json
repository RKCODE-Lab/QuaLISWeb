{"ast":null,"code":"import _objectSpread from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Card}from'react-bootstrap';//, Nav, Tab\n//import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n//import { faPlus } from '@fortawesome/free-solid-svg-icons';//,faPencilAlt, faTrash\nimport{injectIntl}from'react-intl';//FormattedMessage,\n//import { Grid, GridColumn } from '@progress/kendo-react-grid';\nimport{process}from'@progress/kendo-data-query';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';//import Axios from 'axios';\n//import rsapi from '../../rsapi';\nimport{toast}from'react-toastify';import AddSupplierCategory from'./AddSupplierCategory';import AddMaterialCategory from'./AddMaterialCategory';import Esign from'../audittrail/Esign';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{constructOptionList,showEsign}from'../../components/CommonScript';//import DataGrid from '../../components/DataGrid';\nimport SupplierTabs from'./SupplierTabs';import{transactionStatus}from'../../components/Enumeration';import CustomTabs from'../../components/custom-tabs/custom-tabs.component';var SupplierMaterialCategoryTab=/*#__PURE__*/function(_React$Component){_inherits(SupplierMaterialCategoryTab,_React$Component);var _super=_createSuper(SupplierMaterialCategoryTab);function SupplierMaterialCategoryTab(props){var _this;_classCallCheck(this,SupplierMaterialCategoryTab);_this=_super.call(this,props);_this.supplierDataStateChange=function(event){_this.setState({dataState:event.dataState});};_this.materialDataStateChange=function(event){_this.setState({dataStateMaterial:event.dataState});};_this.tabDetail=function(){var addSupCatId=_this.props.controlMap.has(\"AddSupplierCategory\")&&_this.props.controlMap.get(\"AddSupplierCategory\").ncontrolcode;var deleteSupCatId=_this.props.controlMap.has(\"DeleteSupplierCategory\")&&_this.props.controlMap.get(\"DeleteSupplierCategory\").ncontrolcode;var addMatCatId=_this.props.controlMap.has(\"AddMaterialCategory\")&&_this.props.controlMap.get(\"AddMaterialCategory\").ncontrolcode;var deleteMatCatId=_this.props.controlMap.has(\"DeleteMaterialCategory\")&&_this.props.controlMap.get(\"DeleteMaterialCategory\").ncontrolcode;var supcatAddParam={screenName:\"Supplier Category\",operation:\"create\",primaryKeyField:\"nsuppliercatcode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:addSupCatId};var supcatDeleteParam={screenName:\"SupplierCategory\",methodUrl:\"SupplierMatrix\",operation:\"delete\",ncontrolCode:deleteSupCatId};var matericatAddParam={screenName:\"Material Category\",operation:\"create\",primaryKeyField:\"nmaterialcatcode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:addMatCatId};var materialcatDeleteParam={screenName:\"MaterialCategory\",methodUrl:\"SupplierMatrix\",operation:\"delete\",ncontrolCode:deleteMatCatId};var tabMap=new Map();tabMap.set(\"IDS_SUPPLIERCATEGORY\",/*#__PURE__*/React.createElement(SupplierTabs,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,addId:addSupCatId,addParam:supcatAddParam,comboDataService:_this.props.getSupplierCategoryComboDataService,addTitleIDS:\"IDS_SUPPLIERCATEGORY\",addTitleDefaultMsg:'SupplierCategory',primaryKeyField:\"nsuppliermatrixcode\",masterData:_this.props.masterData,primaryList:\"SupplierCategory\",dataResult:process(_this.props.masterData[\"SupplierCategory\"],_this.state.dataState)// dataState={this.state.dataState}\n// dataStateChange={this.supplierDataStateChange}\n,dataState:_this.props.screenName===undefined||_this.props.screenName===\"SupplierCategory\"?_this.state.dataState:{skip:0},dataStateChange:function dataStateChange(event){return _this.setState({dataState:event.data});},columnList:_this.suppliercatColumnList,methodUrl:\"SupplierMatrix\",deleteRecord:_this.deleteRecord,deleteParam:supcatDeleteParam//selectedId={this.props.selectedId}\n}));tabMap.set(\"IDS_MATERIALCATEGORY\",/*#__PURE__*/React.createElement(SupplierTabs,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,addId:addMatCatId,addParam:matericatAddParam,comboDataService:_this.props.getMaterialCategoryComboDataService,addTitleIDS:\"IDS_MATERIALCATEGORY\",addTitleDefaultMsg:'MaterialCategory',primaryKeyField:\"nsuppliermatrixcode\",masterData:_this.props.masterData,primaryList:\"MaterialCategory\",dataResult:process(_this.props.masterData[\"MaterialCategory\"],_this.state.dataStateMaterial)// dataState={this.state.dataStateMaterial}\n// dataStateChange={this.materialDataStateChange}\n,dataState:_this.props.screenName===undefined||_this.props.screenName===\"MaterialCategory\"?_this.state.dataStateMaterial:{skip:0},dataStateChange:function dataStateChange(event){return _this.setState({dataStateMaterial:event.data});},columnList:_this.materialcatColumnList,methodUrl:\"SupplierMatrix\",deleteRecord:_this.deleteRecord,deleteParam:materialcatDeleteParam//selectedId={this.props.selectedId}\n}));return tabMap;};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"){loadEsign=false;openChildModal=false;}else{loadEsign=false;}}else{openChildModal=false;}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;;if(fieldName===\"nsuppliercatcode\"){var selectedSupplierCategory=comboData;_this.setState({selectedRecord:selectedRecord,selectedSupplierCategory:selectedSupplierCategory});}if(fieldName===\"nmaterialcatcode\"){var selectedMaterialCategory=comboData;_this.setState({selectedRecord:selectedRecord,selectedMaterialCategory:selectedMaterialCategory});}};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;// else if (event.target.name === \"nlockmode\")\n//     selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\nelse selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){//add / edit  \nvar inputParam={};if(_this.props.screenName===\"Supplier Category\"){inputParam=_this.saveSupplierCategory(saveType,formRef);}else if(_this.props.screenName===\"Material Category\"){inputParam=_this.saveMaterial(saveType,formRef);}if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}};_this.deleteRecord=function(supplierparam){if(_this.props.masterData.SelectedSupplier.ntransactionstatus===transactionStatus.RETIRED){toast.warn(_this.props.intl.formatMessage({id:_this.props.masterData.SelectedSupplier.stranstatus}));}else{var _inputData;var inputParam={classUrl:\"suppliermatrix\",methodUrl:supplierparam.methodUrl,inputData:(_inputData={},_defineProperty(_inputData,supplierparam.methodUrl.toLowerCase(),supplierparam.selectedRecord),_defineProperty(_inputData,\"userinfo\",_this.props.userInfo),_inputData),operation:supplierparam.operation,//dataState: this.state.dataState,\n//dataStateMaterial: this.state.dataStateMaterial\ndataState:_this.state.dataState};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,supplierparam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:supplierparam.screenName,operation:supplierparam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};var dataStateMaterial={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={isOpen:false,selectedRecord:{},dataResult:[],activeTab:'SupplierCategory-tab',dataState:dataState,dataStateMaterial:dataStateMaterial,supplierCategory:[],materialCategory:[]};_this.supplerCategoryFieldList=['nsuppliercode','ncategorycode','ntypecode','ssuppliercatname','smaterialcatname','sremarks','ntransactionstatus'];_this.suppliercatColumnList=[{\"idsName\":\"IDS_SUPPLIERCATNAME\",\"dataField\":\"ssuppliercatname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];_this.materialcatColumnList=[{\"idsName\":\"IDS_MATERIALCATNAME\",\"dataField\":\"smaterialcatname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];_this.validationSuppliercatColumnList=[{\"idsName\":\"IDS_SUPPLIERCATNAME\",\"dataField\":\"nsuppliercatcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];_this.validationMaterialcatColumnList=[{\"idsName\":\"IDS_MATERIALCATNAME\",\"dataField\":\"nmaterialcatcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];return _this;}_createClass(SupplierMaterialCategoryTab,[{key:\"render\",value:function render(){var mandatoryFields=[];var matmandatoryFields=[];this.validationSuppliercatColumnList.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});this.validationMaterialcatColumnList.forEach(function(item){return item.mandatory===true?matmandatoryFields.push(item):\"\";});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs\"},/*#__PURE__*/React.createElement(CustomTabs,{tabDetail:this.tabDetail(),onTabChange:this.props.onTabChange})))),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.props.screenName,onSaveClick:this.onSaveClick,updateStore:this.props.updateStore,esign:this.props.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{},mandatoryFields:this.props.screenName===\"Supplier Category\"?mandatoryFields:matmandatoryFields||[],addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.screenName===\"Supplier Category\"?/*#__PURE__*/React.createElement(AddSupplierCategory,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,selectedSupplierCategory:this.props.masterData.selectedSupplierCategory,supplierCategory:this.state.supplierCategory||[]//{this.props.supplierCategory || []}\n}):/*#__PURE__*/React.createElement(AddMaterialCategory,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,operation:this.props.operation,selectedMaterialCategory:this.props.masterData.selectedMaterialCategory,materialCategory:this.state.materialCategory//{this.props.materialCategory}\n})}));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.masterData!==previousProps.masterData){var isOpen=false;if(this.props.errorCode!==undefined&&(this.state.operation===\"create\"||this.state.operation===\"update\")){isOpen=true;}var _this$state=this.state,_dataState=_this$state.dataState,_dataStateMaterial=_this$state.dataStateMaterial;if(this.props.dataState===undefined){_dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5,filter:undefined,sort:undefined};_dataStateMaterial={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5,filter:undefined,sort:undefined};}this.setState({isOpen:isOpen,activeTab:'SupplierCategory-tab',dataState:_dataState,dataStateMaterial:_dataStateMaterial});}if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}var _this$state2=this.state,dataState=_this$state2.dataState,dataStateMaterial=_this$state2.dataStateMaterial;if(this.props.dataState!==previousProps.dataState&&this.props.dataState!==dataState){dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};dataStateMaterial={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};this.setState({dataState:dataState,dataStateMaterial:dataStateMaterial});}// {\n//     dataState={...dataState,filter:undefined,sort:undefined}\n//     dataStateMaterial={...dataStateMaterial,filter:undefined,sort:undefined}\n//     this.setState({ dataState, dataStateMaterial });\n// }\nif(this.props.supplierCategory!==previousProps.supplierCategory||this.props.materialCategory!==previousProps.materialCategory){var supplierCategory=constructOptionList(this.props.supplierCategory||[],\"nsuppliercatcode\",\"ssuppliercatname\",undefined,undefined,undefined);var supplierCategoryList=supplierCategory.get(\"OptionList\");var materialCategory=constructOptionList(this.props.materialCategory||[],\"nmaterialcatcode\",\"smaterialcatname\",undefined,undefined,undefined);var materialCategoryList=materialCategory.get(\"OptionList\");this.setState({supplierCategory:supplierCategoryList,materialCategory:materialCategoryList});}}},{key:\"saveSupplierCategory\",value:function saveSupplierCategory(saveType,formRef){var _this2=this;var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;inputData[\"supplier\"]=this.props.masterData.SelectedSupplier;inputData[\"suppliermatrix\"]={};var dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};var suppliermatrixArray=[];suppliermatrixArray=this.state.selectedRecord.nsuppliercatcode.map(function(item){var suppliermat={};suppliermat[\"nsuppliercode\"]=_this2.props.masterData.SelectedSupplier.nsuppliercode;//this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\nsuppliermat[\"ntypecode\"]=1;suppliermat[\"sremarks\"]=\"\";suppliermat[\"ntransactionstatus\"]=transactionStatus.ACTIVE;suppliermat[\"ncategorycode\"]=item.value;//suppliermatrixArray.push(suppliermat);\nreturn suppliermat;});inputData['suppliermatrix']=suppliermatrixArray;var inputParam={classUrl:\"suppliermatrix\",methodUrl:\"SupplierMatrix\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef,dataState:dataState};return inputParam;}},{key:\"saveMaterial\",value:function saveMaterial(saveType,formRef){var _this3=this;var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;inputData[\"supplier\"]=this.props.masterData.SelectedSupplier;inputData[\"suppliermatrix\"]={};var dataStateMaterial=undefined;var suppliermatrixArray=[];suppliermatrixArray=this.state.selectedRecord.nmaterialcatcode.map(function(item){var suppliermat={};suppliermat[\"nsuppliercode\"]=_this3.props.masterData.SelectedSupplier.nsuppliercode;//this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\nsuppliermat[\"ntypecode\"]=2;suppliermat[\"sremarks\"]=\"\";suppliermat[\"ntransactionstatus\"]=transactionStatus.ACTIVE;suppliermat[\"ncategorycode\"]=item.value;//suppliermatrixArray.push(suppliermat);\nreturn suppliermat;});inputData['suppliermatrix']=suppliermatrixArray;var inputParam={classUrl:\"suppliermatrix\",methodUrl:\"SupplierMatrix\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef,dataStateMaterial:dataStateMaterial};return inputParam;}}]);return SupplierMaterialCategoryTab;}(React.Component);export default injectIntl(SupplierMaterialCategoryTab);","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/pages/contactmaster/SupplierMaterialCategoryTab.jsx"],"names":["React","Row","Col","Card","injectIntl","process","SlideOutModal","toast","AddSupplierCategory","AddMaterialCategory","Esign","DEFAULT_RETURN","constructOptionList","showEsign","SupplierTabs","transactionStatus","CustomTabs","SupplierMaterialCategoryTab","props","supplierDataStateChange","event","setState","dataState","materialDataStateChange","dataStateMaterial","tabDetail","addSupCatId","controlMap","has","get","ncontrolcode","deleteSupCatId","addMatCatId","deleteMatCatId","supcatAddParam","screenName","operation","primaryKeyField","masterData","userInfo","ncontrolCode","supcatDeleteParam","methodUrl","matericatAddParam","materialcatDeleteParam","tabMap","Map","set","userRoleControlRights","inputParam","getSupplierCategoryComboDataService","state","undefined","skip","data","suppliercatColumnList","deleteRecord","getMaterialCategoryComboDataService","materialcatColumnList","closeModal","loadEsign","openChildModal","updateInfo","typeName","updateStore","onComboChange","comboData","fieldName","selectedRecord","selectedSupplierCategory","selectedMaterialCategory","onInputOnChange","target","type","name","checked","ACTIVE","DEACTIVE","YES","NO","value","onSaveClick","saveType","formRef","saveSupplierCategory","saveMaterial","esignRights","nformcode","screenData","crudMaster","supplierparam","SelectedSupplier","ntransactionstatus","RETIRED","warn","intl","formatMessage","id","stranstatus","classUrl","inputData","toLowerCase","validateEsign","sreason","password","validateEsignCredential","take","settings","parseInt","isOpen","dataResult","activeTab","supplierCategory","materialCategory","supplerCategoryFieldList","validationSuppliercatColumnList","validationMaterialcatColumnList","mandatoryFields","matmandatoryFields","forEach","item","mandatory","push","onTabChange","previousProps","errorCode","filter","sort","supplierCategoryList","materialCategoryList","suppliermatrixArray","nsuppliercatcode","map","suppliermat","nsuppliercode","nmaterialcatcode","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Card } from 'react-bootstrap';//, Nav, Tab\r\n//import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n//import { faPlus } from '@fortawesome/free-solid-svg-icons';//,faPencilAlt, faTrash\r\nimport { injectIntl } from 'react-intl';//FormattedMessage,\r\n//import { Grid, GridColumn } from '@progress/kendo-react-grid';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\n//import Axios from 'axios';\r\n//import rsapi from '../../rsapi';\r\nimport { toast } from 'react-toastify';\r\nimport AddSupplierCategory from './AddSupplierCategory';\r\nimport AddMaterialCategory from './AddMaterialCategory';\r\nimport Esign from '../audittrail/Esign';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { constructOptionList, showEsign } from '../../components/CommonScript';\r\n//import DataGrid from '../../components/DataGrid';\r\nimport SupplierTabs from './SupplierTabs';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\nimport CustomTabs from '../../components/custom-tabs/custom-tabs.component';\r\n\r\nclass SupplierMaterialCategoryTab extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        const dataStateMaterial = {\r\n            skip: 0,\r\n            take:this.props.settings? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        this.state = {\r\n            isOpen: false, selectedRecord: {}, dataResult: [],\r\n            activeTab: 'SupplierCategory-tab',\r\n            dataState: dataState,\r\n            dataStateMaterial: dataStateMaterial, supplierCategory: [], materialCategory: []\r\n        };\r\n        this.supplerCategoryFieldList = ['nsuppliercode', 'ncategorycode', 'ntypecode', 'ssuppliercatname', 'smaterialcatname',\r\n            'sremarks', 'ntransactionstatus'];\r\n        this.suppliercatColumnList = [{ \"idsName\": \"IDS_SUPPLIERCATNAME\", \"dataField\": \"ssuppliercatname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" }];\r\n        this.materialcatColumnList = [{ \"idsName\": \"IDS_MATERIALCATNAME\", \"dataField\": \"smaterialcatname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" }];\r\n        this.validationSuppliercatColumnList = [{ \"idsName\": \"IDS_SUPPLIERCATNAME\", \"dataField\": \"nsuppliercatcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n        this.validationMaterialcatColumnList = [{ \"idsName\": \"IDS_MATERIALCATNAME\", \"dataField\": \"nmaterialcatcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n    }\r\n    supplierDataStateChange = (event) => {\r\n        this.setState({\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n    materialDataStateChange = (event) => {\r\n        this.setState({\r\n            dataStateMaterial: event.dataState\r\n        });\r\n    }\r\n    render() {\r\n        const mandatoryFields = [];\r\n        const matmandatoryFields = [];\r\n        this.validationSuppliercatColumnList.forEach(item => item.mandatory === true ?\r\n            mandatoryFields.push(item) : \"\"\r\n        );\r\n        this.validationMaterialcatColumnList.forEach(item => item.mandatory === true ?\r\n            matmandatoryFields.push(item) : \"\"\r\n        );\r\n        return (\r\n            <>\r\n                <Row className=\"no-gutters\">\r\n                    <Col md={12}>\r\n                        <Card className=\"at-tabs\">\r\n                            <CustomTabs tabDetail={this.tabDetail()} onTabChange={this.props.onTabChange} />\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal show={this.props.openChildModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.props.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        updateStore={this.props.updateStore}\r\n                        esign={this.props.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={this.props.screenName === \"Supplier Category\" ? mandatoryFields : matmandatoryFields || []}\r\n                        addComponent={this.props.loadEsign ?\r\n                            <Esign operation={this.props.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> :\r\n                            this.props.screenName === \"Supplier Category\" ?\r\n                                <AddSupplierCategory selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onComboChange={this.onComboChange}\r\n                                    selectedSupplierCategory={this.props.masterData.selectedSupplierCategory}\r\n                                    supplierCategory={this.state.supplierCategory || []} //{this.props.supplierCategory || []}\r\n                                />\r\n                                : <AddMaterialCategory selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onComboChange={this.onComboChange}\r\n                                    operation={this.props.operation}\r\n                                    selectedMaterialCategory={this.props.masterData.selectedMaterialCategory}\r\n                                    materialCategory={this.state.materialCategory}//{this.props.materialCategory}\r\n                                />\r\n\r\n                        }\r\n\r\n                    />\r\n                }\r\n            </>\r\n\r\n        )\r\n\r\n    }\r\n\r\n    tabDetail = () => {\r\n        const addSupCatId = this.props.controlMap.has(\"AddSupplierCategory\") && this.props.controlMap.get(\"AddSupplierCategory\").ncontrolcode\r\n\r\n        const deleteSupCatId = this.props.controlMap.has(\"DeleteSupplierCategory\") && this.props.controlMap.get(\"DeleteSupplierCategory\").ncontrolcode\r\n\r\n        const addMatCatId = this.props.controlMap.has(\"AddMaterialCategory\") && this.props.controlMap.get(\"AddMaterialCategory\").ncontrolcode\r\n\r\n        const deleteMatCatId = this.props.controlMap.has(\"DeleteMaterialCategory\") && this.props.controlMap.get(\"DeleteMaterialCategory\").ncontrolcode\r\n\r\n        const supcatAddParam = {\r\n            screenName: \"Supplier Category\", operation: \"create\", primaryKeyField: \"nsuppliercatcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addSupCatId\r\n        };\r\n\r\n        const supcatDeleteParam = { screenName: \"SupplierCategory\", methodUrl: \"SupplierMatrix\", operation: \"delete\", ncontrolCode: deleteSupCatId };\r\n\r\n        const matericatAddParam = {\r\n            screenName: \"Material Category\", operation: \"create\", primaryKeyField: \"nmaterialcatcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addMatCatId\r\n        };\r\n\r\n        const materialcatDeleteParam = { screenName: \"MaterialCategory\", methodUrl: \"SupplierMatrix\", operation: \"delete\", ncontrolCode: deleteMatCatId };\r\n\r\n        const tabMap = new Map();\r\n        tabMap.set(\"IDS_SUPPLIERCATEGORY\", <SupplierTabs userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            addId={addSupCatId}\r\n            addParam={supcatAddParam}\r\n            comboDataService={this.props.getSupplierCategoryComboDataService}\r\n            addTitleIDS={\"IDS_SUPPLIERCATEGORY\"}\r\n            addTitleDefaultMsg={'SupplierCategory'}\r\n            primaryKeyField={\"nsuppliermatrixcode\"}\r\n            masterData={this.props.masterData}\r\n            primaryList={\"SupplierCategory\"}\r\n            dataResult={process(this.props.masterData[\"SupplierCategory\"], this.state.dataState)}\r\n            // dataState={this.state.dataState}\r\n            // dataStateChange={this.supplierDataStateChange}\r\n            dataState={(this.props.screenName === undefined || this.props.screenName === \"SupplierCategory\") ? this.state.dataState : { skip: 0 }}\r\n            dataStateChange={(event) => this.setState({ dataState: event.data })}\r\n            columnList={this.suppliercatColumnList}\r\n            methodUrl={\"SupplierMatrix\"}\r\n            deleteRecord={this.deleteRecord}\r\n            deleteParam={supcatDeleteParam}\r\n        //selectedId={this.props.selectedId}\r\n        />)\r\n        tabMap.set(\"IDS_MATERIALCATEGORY\", <SupplierTabs userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            addId={addMatCatId}\r\n            addParam={matericatAddParam}\r\n            comboDataService={this.props.getMaterialCategoryComboDataService}\r\n            addTitleIDS={\"IDS_MATERIALCATEGORY\"}\r\n            addTitleDefaultMsg={'MaterialCategory'}\r\n            primaryKeyField={\"nsuppliermatrixcode\"}\r\n            masterData={this.props.masterData}\r\n            primaryList={\"MaterialCategory\"}\r\n            dataResult={process(this.props.masterData[\"MaterialCategory\"], this.state.dataStateMaterial)}\r\n            // dataState={this.state.dataStateMaterial}\r\n            // dataStateChange={this.materialDataStateChange}\r\n            dataState={(this.props.screenName === undefined || this.props.screenName === \"MaterialCategory\") ? this.state.dataStateMaterial : { skip: 0 }}\r\n            dataStateChange={(event) => this.setState({ dataStateMaterial: event.data })}\r\n            columnList={this.materialcatColumnList}\r\n            methodUrl={\"SupplierMatrix\"}\r\n            deleteRecord={this.deleteRecord}\r\n            deleteParam={materialcatDeleteParam}\r\n        //selectedId={this.props.selectedId}\r\n        />)\r\n        return tabMap;\r\n    }\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;;\r\n\r\n\r\n        if (fieldName === \"nsuppliercatcode\") {\r\n            let selectedSupplierCategory = comboData;\r\n            this.setState({ selectedRecord, selectedSupplierCategory });\r\n        }\r\n        if (fieldName === \"nmaterialcatcode\") {\r\n            let selectedMaterialCategory = comboData;\r\n            this.setState({ selectedRecord, selectedMaterialCategory });\r\n        }\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"ntransactionstatus\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            // else if (event.target.name === \"nlockmode\")\r\n            //     selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\r\n            else\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n\r\n            let isOpen = false;\r\n            if (this.props.errorCode !== undefined && (this.state.operation === \"create\" || this.state.operation === \"update\")) {\r\n                isOpen = true;\r\n            }\r\n            let { dataState, dataStateMaterial } = this.state;\r\n            if(this.props.dataState === undefined)\r\n            {\r\n                dataState={skip: 0,take:this.props.settings? parseInt(this.props.settings[14]) : 5,filter:undefined,sort:undefined}\r\n                dataStateMaterial = { skip: 0, take :this.props.settings? parseInt(this.props.settings[14]) : 5,filter:undefined,sort:undefined }\r\n            } \r\n            this.setState({ isOpen, activeTab: 'SupplierCategory-tab',dataState, dataStateMaterial });\r\n        }\r\n\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n        let { dataState, dataStateMaterial } = this.state;\r\n        if (this.props.dataState !== previousProps.dataState && this.props.dataState !== dataState) {\r\n            dataState = { skip: 0,take : this.props.settings? parseInt(this.props.settings[14]) : 5 }\r\n            dataStateMaterial = { skip: 0 , take:this.props.settings? parseInt(this.props.settings[14]) : 5}\r\n            this.setState({ dataState, dataStateMaterial });\r\n        }\r\n     \r\n        // {\r\n        //     dataState={...dataState,filter:undefined,sort:undefined}\r\n        //     dataStateMaterial={...dataStateMaterial,filter:undefined,sort:undefined}\r\n        //     this.setState({ dataState, dataStateMaterial });\r\n        // }\r\n        if (this.props.supplierCategory !== previousProps.supplierCategory || this.props.materialCategory !== previousProps.materialCategory) {\r\n\r\n            const supplierCategory = constructOptionList(this.props.supplierCategory || [], \"nsuppliercatcode\",\r\n                \"ssuppliercatname\", undefined, undefined, undefined);\r\n            const supplierCategoryList = supplierCategory.get(\"OptionList\");\r\n\r\n            const materialCategory = constructOptionList(this.props.materialCategory || [], \"nmaterialcatcode\",\r\n                \"smaterialcatname\", undefined, undefined, undefined);\r\n            const materialCategoryList = materialCategory.get(\"OptionList\");\r\n\r\n            this.setState({ supplierCategory: supplierCategoryList, materialCategory: materialCategoryList });\r\n        }\r\n    }\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        //add / edit  \r\n        let inputParam = {};\r\n\r\n        if (this.props.screenName === \"Supplier Category\") {\r\n            inputParam = this.saveSupplierCategory(saveType, formRef);\r\n        }\r\n        else if (this.props.screenName === \"Material Category\") {\r\n            inputParam = this.saveMaterial(saveType, formRef);\r\n        }\r\n\r\n\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n        }\r\n\r\n    }\r\n\r\n    saveSupplierCategory(saveType, formRef) {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\r\n        inputData[\"suppliermatrix\"] = {};\r\n        let dataState = { skip: 0 , take :this.props.settings? parseInt(this.props.settings[14]) : 5 };\r\n\r\n        let suppliermatrixArray = []\r\n        suppliermatrixArray = this.state.selectedRecord.nsuppliercatcode.map(item => {\r\n            let suppliermat = {}\r\n            suppliermat[\"nsuppliercode\"] = this.props.masterData.SelectedSupplier.nsuppliercode; //this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\r\n            suppliermat[\"ntypecode\"] = 1;\r\n            suppliermat[\"sremarks\"] = \"\";\r\n            suppliermat[\"ntransactionstatus\"] = transactionStatus.ACTIVE;\r\n            suppliermat[\"ncategorycode\"] = item.value\r\n            //suppliermatrixArray.push(suppliermat);\r\n            return suppliermat;\r\n        });\r\n        inputData['suppliermatrix'] = suppliermatrixArray;\r\n\r\n        const inputParam = {\r\n            classUrl: \"suppliermatrix\",\r\n            methodUrl: \"SupplierMatrix\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef, dataState\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    saveMaterial(saveType, formRef) {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\r\n        inputData[\"suppliermatrix\"] = {};\r\n        let dataStateMaterial = undefined;\r\n\r\n        let suppliermatrixArray = []\r\n        suppliermatrixArray = this.state.selectedRecord.nmaterialcatcode.map(item => {\r\n            let suppliermat = {}\r\n            suppliermat[\"nsuppliercode\"] = this.props.masterData.SelectedSupplier.nsuppliercode; //this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\r\n            suppliermat[\"ntypecode\"] = 2;\r\n            suppliermat[\"sremarks\"] = \"\";\r\n            suppliermat[\"ntransactionstatus\"] = transactionStatus.ACTIVE;\r\n            suppliermat[\"ncategorycode\"] = item.value\r\n            //suppliermatrixArray.push(suppliermat);\r\n            return suppliermat;\r\n        });\r\n        inputData['suppliermatrix'] = suppliermatrixArray;\r\n\r\n        const inputParam = {\r\n            classUrl: \"suppliermatrix\",\r\n            methodUrl: \"SupplierMatrix\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef, dataStateMaterial\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n\r\n    deleteRecord = (supplierparam) => {\r\n        if (this.props.masterData.SelectedSupplier.ntransactionstatus === transactionStatus.RETIRED) {\r\n            toast.warn(this.props.intl.formatMessage({ id: this.props.masterData.SelectedSupplier.stranstatus }));\r\n        }\r\n        else {\r\n            const inputParam = {\r\n                classUrl: \"suppliermatrix\",\r\n                methodUrl: supplierparam.methodUrl,\r\n                inputData: {\r\n                    [supplierparam.methodUrl.toLowerCase()]: supplierparam.selectedRecord,\r\n                    \"userinfo\": this.props.userInfo,\r\n\r\n                },\r\n                operation: supplierparam.operation,\r\n                //dataState: this.state.dataState,\r\n                //dataStateMaterial: this.state.dataStateMaterial\r\n                dataState: this.state.dataState\r\n            }\r\n\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, supplierparam.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                        openChildModal: true, screenName: supplierparam.screenName, operation: supplierparam.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n        }\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n}\r\n\r\nexport default injectIntl(SupplierMaterialCategoryTab);\r\n\r\n"]},"metadata":{},"sourceType":"module"}