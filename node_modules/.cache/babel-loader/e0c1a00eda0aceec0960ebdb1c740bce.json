{"ast":null,"code":"import { toast } from \"react-toastify\";\nimport rsapi from \"../rsapi\";\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\nimport { attachmentType, parameterType, SampleType, transactionStatus, MaterialType } from \"../components/Enumeration\";\nimport { constructjsonOptionList, constructOptionList, rearrangeDateFormat, //formatInputDate,\nsortData, getComboLabelValue } from \"../components/CommonScript\";\nimport Axios from \"axios\";\nimport { intl } from \"../components/App\";\nimport { initRequest } from \"./LoginAction\";\nexport const sampleTypeOnChange = (inputParam, masterData) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    let url = \"/testgroup\";\n\n    if (inputParam.classUrl) {\n      url = inputParam.classUrl;\n    }\n\n    rsapi.post(url + inputParam.methodUrl, inputParam.inputData).then(response => {\n      sortData(response.data);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          tempFilterData: inputParam.inputData.tempFilterData,\n          masterData: { ...masterData,\n            ...response.data\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 409 || error.response.status === 417) {\n        masterData[\"ExistingLinkTable\"] = [];\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false\n          }\n        });\n        toast.warn(error.response.data);\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const filterTestGroup = (inputParam, masterData, searchRef) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testgroup/filterTestGroup\", inputParam.inputData).then(response => {\n      sortData(response.data);\n\n      if (searchRef.current) {\n        searchRef.current.value = \"\";\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          filterData: inputParam.inputData.filterData,\n          masterData: { ...masterData,\n            ...response.data,\n            selectedRecordCopy: response.data.AgaramTree,\n            isrulesenginerequired: inputParam['inputData']['filterData']['nsampletypecode']['item']['nrulesenginerequired'],\n            searchedData: undefined\n          },\n          loading: false,\n          testskip: 0,\n          historyDataState: { ...inputParam.historyDataState,\n            sort: undefined,\n            filter: undefined\n          }\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const createTree = (selectedRecord, userInfo, masterData, ncontrolCode) => {\n  return dispatch => {\n    //ALPD-1466,1465\n    let isValid = false;\n\n    if (selectedRecord && selectedRecord.ntreeversiontempcode !== \"\") {\n      // if (selectedRecord && selectedRecord.nsampletypecode.item.nportalrequired === transactionStatus.YES &&\n      //     masterData.FocusKey === \"root\" && masterData && masterData.TreeTemplateManipulation.length > 0) {\n      //     toast.warn(intl.formatMessage({\n      //         id: \"IDS_MORETHANONEPROFILENOTALLOWEDCLINICALTYPE\"\n      //     }));\n      // } else \n      if (selectedRecord.nsampletypecode.item.ncategorybasedflowrequired === transactionStatus.YES) {\n        isValid = true;\n      } else if (selectedRecord.nproductcatcode.item.ncategorybasedflow === transactionStatus.YES || selectedRecord.nproductcode) {\n        isValid = true;\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_PRODUCTNOTAVAILABLE\"\n        }));\n      }\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_STUDYPLANTEMPLATEISNOTAVAILABLE\"\n      }));\n    }\n\n    if (isValid) {\n      const inputParam = {\n        sampletype: selectedRecord.nsampletypecode.item,\n        ncategorycode: selectedRecord.nproductcatcode.value,\n        ntreeversiontempcode: selectedRecord.ntreeversiontempcode.value,\n        nprojectmastercode: selectedRecord.nprojectmastercode ? selectedRecord.nprojectmastercode.value : -1,\n        userinfo: userInfo,\n        treetemplatemanipulation: masterData.selectedNode\n      };\n      dispatch(initRequest(true));\n      rsapi.post(\"/testgroup/getTemplateMasterDetails\", { ...inputParam\n      }).then(response => {\n        const treetempTranstestGroup = response.data[\"TreetempTranstestGroup\"] || []; // const treeMandatoryFields = treetempTranstestGroup.map((item, index) => {\n        //         return {\n        //             \"idsName\": item.slabelname,\n        //             \"dataField\": \"sleveldescription_\" + index,\n        //             \"mandatory\": true\n        //         }\n        // });\n        //  const selectedNodeLevel = selectedNode ? selectedNode.slevelcode.split(\"/1\").length-2 : -1;\n\n        const mandatoryFields = [];\n        treetempTranstestGroup.forEach((item, index) => {\n          if (item.sleveldescription === null) {\n            mandatoryFields.push({\n              \"idsName\": item.slabelname,\n              \"dataField\": \"sleveldescription_\" + index,\n              \"mandatory\": true\n            });\n          }\n        });\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            openModal: true,\n            operation: \"create\",\n            screenName: \"IDS_PROFILETREE\",\n            TreetempTranstestGroup: treetempTranstestGroup,\n            treeMandatoryFields: mandatoryFields,\n            //selectedRecord,\n            ncontrolCode,\n            loading: false\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.warn(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    }\n  };\n};\nexport const editTree = (operation, selectedNode, userinfo, ncontrolCode, filterData, masterData) => {\n  return dispatch => {\n    if (!selectedNode) {\n      return toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTPROFILENODETOEDIT\"\n      }));\n    } //console.log(\"edit Tree:\", selectedNode, masterData);\n\n\n    const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(x => x[\"ntreeversiontempcode\"] === selectedNode[\"ntreeversiontempcode\"]); // if (treeVersionTemplateIndex !== -1){\n\n    const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus; //}\n\n    if (templateVersionStatus === transactionStatus.RETIRED) {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTEDTEMPLATEISRETIRED\"\n      }));\n    } else {\n      if (selectedNode) {\n        dispatch(initRequest(true));\n        rsapi.post(\"/testgroup/getTreeById\", {\n          userinfo,\n          treetemplatemanipulation: selectedNode,\n          ntreeversiontempcode: filterData.ntreeversiontempcode.value\n        }).then(response => {\n          const treetempTranstestGroup = response.data;\n          const treeMandatoryFields = treetempTranstestGroup && [{\n            \"idsName\": treetempTranstestGroup.slabelname,\n            \"dataField\": \"sleveldescription\",\n            \"mandatory\": true\n          }];\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              openModal: true,\n              operation: operation,\n              screenName: \"IDS_EDITTREE\",\n              selectedRecord: { ...treetempTranstestGroup\n              },\n              treeMandatoryFields,\n              ncontrolCode,\n              loading: false\n            }\n          });\n        }).catch(error => {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n\n          if (error.response.status === 409 || error.response.status === 417) {\n            toast.warn(error.response.data);\n          } else {\n            toast.error(error.message);\n          }\n        });\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SELECTPROFILENODETOEDIT\"\n        }));\n      }\n    }\n  };\n};\nexport const addSpecification = (operation, inputParam, ncontrolCode, masterDatas) => {\n  return dispatch => {\n    //if (inputParam.selectedNode != null && inputParam.selectedNode.schildnode === \"\") {\n    if (inputParam.selectedRecord && inputParam.selectedRecord.ntreeversiontempcode !== \"\") {\n      if (inputParam.selectedRecord.ntreeversiontempcode.item.ntransactionstatus === transactionStatus.RETIRED) {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SELECTEDTEMPLATEISRETIRED\"\n        }));\n      } else {\n        if (inputParam.selectedNode != null && inputParam.selectedNode.nnextchildcode === -1) {\n          if (masterDatas && masterDatas.SelectedSpecification === null && operation === \"copy\") {\n            toast.warn(intl.formatMessage({\n              id: \"IDS_SELECTSPECIFICATION\"\n            }));\n          } else {\n            let urlArray = [];\n\n            if (operation === \"update\") {\n              const testgroupspecification = inputParam.testgroupspecification[0]; // let isValidOperation = false;\n              // if (operation === \"update\"){\n              //     if (testgroupspecification.napprovalstatus === transactionStatus.CORRECTION ||\n              //         testgroupspecification.napprovalstatus === transactionStatus.DRAFT) {\n              //             isValidOperation = true;\n              //     }\n              //     else {\n              //         toast.warn(intl.formatMessage({id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));\n              //         return;\n              //     }\n              // }\n              // else{\n              //     isValidOperation = true;\n              // }\n\n              if (testgroupspecification.napprovalstatus === transactionStatus.CORRECTION || testgroupspecification.napprovalstatus === transactionStatus.DRAFT) {\n                urlArray = [rsapi.post(\"timezone/getTimeZone\")];\n                urlArray.push(rsapi.post(\"/testgroup/getActiveSpecificationById\", {\n                  testgroupspecification,\n                  userinfo: inputParam.userinfo,\n                  ntreeversiontempcode: inputParam.selectedRecord.ntreeversiontempcode.value\n                }));\n              } else {\n                toast.warn(intl.formatMessage({\n                  id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n                }));\n                return;\n              }\n            } else {\n              urlArray = [rsapi.post(\"timezone/getTimeZone\")];\n              urlArray.push(rsapi.post(\"/testgroup/getAddSpecification\", {\n                userinfo: inputParam.userInfo,\n                ntreeversiontempcode: inputParam.selectedRecord.ntreeversiontempcode.value,\n                nprojectmastercode: masterDatas.selectedNode.nprojectmastercode //currentdate: formatInputDate(new Date(), true)\n\n              }));\n            }\n\n            Axios.all(urlArray).then(response => {\n              let selectedRecord = {};\n              let masterData = inputParam.masterData !== undefined ? inputParam.masterData : masterDatas;\n\n              if (operation === \"update\") {\n                masterData = { ...inputParam.masterData,\n                  ...response[1].data,\n                  testgroupspecification: inputParam.testgroupspecification\n                };\n                selectedRecord = {\n                  sproductname: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow === transactionStatus.YES ? \"\" : inputParam.selectedRecord.nproductcode && inputParam.selectedRecord.nproductcode.label,\n                  sproductcatname: inputParam.selectedRecord.nproductcatcode.label,\n                  ncategorybasedflow: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow,\n                  ...response[1].data.SelectedSpecification,\n                  //dexpirydate: new Date(response[1].data[\"sexpirydate\"]),\n                  dexpirydate: rearrangeDateFormat(inputParam.userinfo, response[1].data.SelectedSpecification[\"sexpirydate\"]),\n                  ntzexpirydate: {\n                    \"label\": response[1].data.SelectedSpecification.stimezoneid,\n                    \"value\": response[1].data.SelectedSpecification.ntzexpirydate\n                  }\n                };\n              } else {\n                selectedRecord = {\n                  sproductname: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow === transactionStatus.YES ? \"\" : inputParam.selectedRecord.nproductcode && inputParam.selectedRecord.nproductcode.label,\n                  sproductcatname: inputParam.selectedRecord.nproductcatcode.label,\n                  sspecname: inputParam.selectedNode.sleveldescription,\n                  ncategorybasedflow: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow,\n                  dexpirydate: rearrangeDateFormat(inputParam.userInfo, response[1].data.ExpiryDate),\n                  selectedCopyProfileName: inputParam.selectedNode.sleveldescription,\n                  selectedCopyNodeManipulationCode: inputParam.selectedNode.ntemplatemanipulationcode,\n                  CopyFocusKey: masterData.FocusKey,\n                  CopyActiveKey: masterData.ActiveKey,\n                  scopyspecname: inputParam.selectedNode.sleveldescription,\n                  //ncomponentrequired: inputParam.selectedNode.nsampletypecode === SampleType.CLINICALTYPE ? transactionStatus.YES : transactionStatus.NO,\n                  // ncomponentrequired: transactionStatus.YES,\n                  // ncomponentrequired :inputParam.selectedRecord.nproductcatcode.item.nmaterialtypecode == MaterialType.IQCSTANDARDMATERIALTYPE ?transactionStatus.NO:transactionStatus.YES,\n                  ncomponentrequired: inputParam.selectedRecord.nsampletypecode && inputParam.selectedRecord.nsampletypecode.item.ncomponentrequired ? inputParam.selectedRecord.nsampletypecode.item.ncomponentrequired : transactionStatus.YES,\n                  // nclinicalspec: inputParam.selectedNode.nsampletypecode===SampleType.CLINICALTYPE?transactionStatus.YES:transactionStatus.NO,\n                  ntransactionstatus: transactionStatus.ACTIVE,\n                  ntzexpirydate: {\n                    \"label\": inputParam.userInfo.stimezoneid,\n                    \"value\": inputParam.userInfo.ntimezonecode\n                  }\n                };\n              }\n\n              dispatch({\n                type: DEFAULT_RETURN,\n                payload: {\n                  openModal: true,\n                  operation: operation,\n                  screenName: \"IDS_SPECIFICATION\",\n                  masterData,\n                  selectedRecord,\n                  timeZoneList: constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", false, false, true).get(\"OptionList\"),\n                  ncontrolCode\n                }\n              });\n            }).catch(error => {\n              if (error.response.status === 500) {\n                toast.error(error.message);\n              } else {\n                toast.warn(error.response.data);\n              }\n            });\n          }\n        } else {\n          if (operation === \"copy\") {\n            toast.warn(intl.formatMessage({\n              id: \"IDS_SELECTSPECIFICATION\"\n            }));\n          } else {\n            toast.warn(intl.formatMessage({\n              id: \"IDS_SELECTLASTLEVELNODETOADDSPEC\"\n            }));\n          }\n        }\n      }\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_STUDYPLANTEMPLATEISNOTAVAILABLE\"\n      }));\n    }\n  };\n};\nexport const addComponent = (SelectedSpecification, userInfo, ncontrolCode, masterData, genericLabel) => {\n  return dispatch => {\n    const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\n    const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;\n\n    if (templateVersionStatus === transactionStatus.RETIRED) {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTEDTEMPLATEISRETIRED\"\n      }));\n    } else {\n      rsapi.post(\"/testgroup/getAvailableComponent\", {\n        userinfo: userInfo,\n        testgroupspecification: { ...SelectedSpecification,\n          nprojectmastercode: masterData[\"selectedNode\"][\"nprojectmastercode\"],\n          nclinicaltyperequired: masterData.nsampletypecode.item.nclinicaltyperequired\n        }\n      }).then(response => {\n        const testGroupSpecSampleType = response.data[\"TestGroupSpecSampleType\"] || [];\n\n        if (testGroupSpecSampleType.length > 0) {\n          const testCategory = constructOptionList(response.data[\"TestCategory\"] || [], \"ntestcategorycode\", \"stestcategoryname\", 'ntestcategorycode', 'ascending', false);\n          const sampleTypeMap = constructOptionList(testGroupSpecSampleType, \"ncomponentcode\", \"scomponentname\", false, false, true); // const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              openModal: true,\n              operation: \"create\",\n              screenName: genericLabel[\"Component\"][\"jsondata\"][\"sdisplayname\"][userInfo.slanguagetypecode],\n              testGroupInputData: {\n                TestCategory: testCategory.get(\"OptionList\"),\n                TestGroupSpecSampleType: sampleTypeMap.get(\"OptionList\"),\n                TestGroupTest: response.data[\"TestGroupTest\"] || [] //TestGroupTestMap.get(\"OptionList\"),\n\n              },\n              selectedRecord: {\n                ncomponentcode: sampleTypeMap.get(\"DefaultValue\"),\n                ntestcategorycode: testCategory.get(\"DefaultValue\") ? testCategory.get(\"DefaultValue\") : testCategory.get(\"OptionList\")[0]\n              },\n              ncontrolCode\n            }\n          });\n        } else {\n          toast.warn(genericLabel[\"Component\"][\"jsondata\"][\"sdisplayname\"][userInfo.slanguagetypecode] + \" \" + intl.formatMessage({\n            id: \"IDS_NOTAVAILABLE\"\n          }));\n        }\n      }).catch(error => {\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.warn(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    }\n  };\n};\nexport const addTestGroupTest = (selectedComponent, userInfo, ncontrolCode, selectedSpecification, filterData, masterData) => {\n  return dispatch => {\n    if (masterData.selectedNode !== undefined && masterData.selectedNode !== null) {\n      const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\n      const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;\n\n      if (templateVersionStatus === transactionStatus.RETIRED) {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SELECTEDTEMPLATEISRETIRED\"\n        }));\n      } else {\n        if (selectedSpecification) {\n          if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT || selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\n            let openTestModal = false;\n\n            if (selectedSpecification.ncomponentrequired === transactionStatus.YES) {\n              if (selectedComponent == undefined) {\n                toast.warn(intl.formatMessage({\n                  id: \"IDS_NEEDCOMPONENTTOADDTEST\"\n                }));\n              } else {\n                openTestModal = true;\n              }\n            } else {\n              openTestModal = true;\n            }\n\n            if (openTestModal === true) {\n              rsapi.post(\"/testgroup/getAvailableTest\", {\n                userinfo: userInfo,\n                testgroupspecsampletype: selectedComponent,\n                ntreeversiontempcode: filterData.ntreeversiontempcode.value,\n                nprojectmastercode: masterData.selectedNode.nprojectmastercode,\n                nclinicaltyperequired: filterData.nsampletypecode && filterData.nsampletypecode.item.nclinicaltyperequired\n              }).then(response => {\n                let testCategory; // = constructOptionList(response.data[\"TestCategory\"], \"ntestcategorycode\", \"stestcategoryname\", \"ntestcategorycode\", \"ascending\", false);\n                // const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\n\n                if (response.data[\"TestCategory\"].length > 0) {\n                  testCategory = constructOptionList(response.data[\"TestCategory\"], \"ntestcategorycode\", \"stestcategoryname\", \"ntestcategorycode\", \"ascending\", false);\n                  dispatch({\n                    type: DEFAULT_RETURN,\n                    payload: {\n                      openModal: true,\n                      operation: \"create\",\n                      screenName: \"IDS_TEST\",\n                      testGroupInputData: {\n                        TestCategory: testCategory.get(\"OptionList\"),\n                        TestGroupTest: response.data[\"TestGroupTest\"] || [] //TestGroupTestMap.get(\"OptionList\"),\n\n                      },\n                      selectedRecord: {\n                        ntestcategorycode: {\n                          label: response.data[\"SelectedTestCategory\"].stestcategoryname,\n                          value: response.data[\"SelectedTestCategory\"].stestcategorycode,\n                          item: response.data[\"SelectedTestCategory\"]\n                        } //ntestcategorycode: testCategory.get(\"DefaultValue\") ? testCategory.get(\"DefaultValue\") : testCategory.get(\"OptionList\")[0]\n\n                      },\n                      ncontrolCode\n                    }\n                  });\n                } else {\n                  toast.warn(intl.formatMessage({\n                    id: \"IDS_TESTCATEGORYNOTAVAILABLE\"\n                  }));\n                }\n              }).catch(error => {\n                if (error.response.status === 409 || error.response.status === 417) {\n                  toast.warn(error.response.data);\n                } else {\n                  toast.error(error.message);\n                }\n              });\n            }\n          } else {\n            toast.warn(intl.formatMessage({\n              id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n            }));\n          }\n        } else {\n          toast.warn(intl.formatMessage({\n            id: \"IDS_SELECTSPECIFICATION\"\n          }));\n        }\n      }\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTSPECIFICATION\"\n      }));\n    }\n  };\n};\nexport const editTestGroupTest = (operation, selectedTest, userInfo, ncontrolCode, selectedSpecification, filterData, masterData) => {\n  return dispatch => {\n    const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\n    const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;\n\n    if (templateVersionStatus === transactionStatus.RETIRED) {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTEDTEMPLATEISRETIRED\"\n      }));\n    } else {\n      if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT || selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\n        const ntestcode = selectedTest.ntestcode;\n        const urlArray = [rsapi.post(\"/testgroup/getActiveTestById\", {\n          userinfo: userInfo,\n          testgrouptest: selectedTest,\n          ntreeversiontempcode: filterData.ntreeversiontempcode.value,\n          nprojectmastercode: masterData[\"selectedNode\"][\"nprojectmastercode\"] ? masterData[\"selectedNode\"][\"nprojectmastercode\"] : -1\n        }), // rsapi.post(\"/source/getSource\", {\n        //     userinfo: userInfo\n        // }),\n        rsapi.post(\"/testmaster/getSection\", {\n          ntestcode,\n          userinfo: userInfo\n        }), rsapi.post(\"/testmaster/getMethod\", {\n          ntestcode,\n          userinfo: userInfo\n        }), rsapi.post(\"/testmaster/getInstrumentCategory\", {\n          ntestcode,\n          userinfo: userInfo\n        }), rsapi.post(\"/testmaster/getTestAttachment\", {\n          ntestcode,\n          userinfo: userInfo\n        }), rsapi.post(\"/testmaster/getContainerType\", {\n          ntestcode,\n          userinfo: userInfo\n        }), //ALPD-3418\n        rsapi.post(\"/testmaster/getTestPackage\", {\n          ntestcode,\n          userinfo: userInfo\n        })];\n        Axios.all(urlArray).then(response => {\n          // const editObject = response[0].data.TestGroupTest;\n          // const testFileItem = response[0].data.TestGroupTestFile;\n          // const SelectedTest = response[0].data.TestGroupTest;\n          const editObject = response[0].data.SelectedTestGroupTest;\n          const testFileItem = response[0].data.TestGroupTestFile;\n          const SelectedTest = response[0].data.SelectedTest; //const TestGroupTest = response[0].data.TestGroupTest;\n\n          const selectedRecord = { ...editObject,\n            // nsourcecode: {\n            //     \"label\": editObject.ssourcename,\n            //     \"value\": editObject.nsourcecode\n            // },\n            nsectioncode: {\n              \"label\": editObject.ssectionname,\n              \"value\": editObject.nsectioncode\n            },\n            nmethodcode: {\n              \"label\": editObject.smethodname,\n              \"value\": editObject.nmethodcode\n            },\n            ninstrumentcatcode: {\n              \"label\": editObject.sinstrumentcatname,\n              \"value\": editObject.ninstrumentcatcode\n            },\n            ncontainertypecode: {\n              \"label\": editObject.scontainertype,\n              \"value\": editObject.ncontainertypecode\n            },\n            ntestpackagecode: {\n              \"label\": editObject.stestpackagename,\n              \"value\": editObject.ntestpackagecode\n            }\n          };\n\n          if (testFileItem) {\n            selectedRecord[\"ntestfilecode\"] = {\n              \"label\": testFileItem.sfilename,\n              \"value\": testFileItem.ntestgroupfilecode,\n              item: testFileItem\n            };\n            selectedRecord[\"ntestgroupfilecode\"] = testFileItem.ntestgroupfilecode;\n          }\n\n          if (editObject.nmethodcode !== -1) {\n            selectedRecord[\"nmethodcode\"] = {\n              \"label\": editObject.smethodname,\n              \"value\": editObject.nmethodcode\n            };\n          } else {\n            selectedRecord[\"nmethodcode\"] = undefined;\n          }\n\n          if (editObject.ninstrumentcatcode !== -1) {\n            selectedRecord[\"ninstrumentcatcode\"] = {\n              \"label\": editObject.sinstrumentcatname,\n              \"value\": editObject.ninstrumentcatcode\n            };\n          } else {\n            selectedRecord[\"ninstrumentcatcode\"] = undefined;\n          }\n\n          if (editObject.ncontainertypecode !== -1) {\n            selectedRecord[\"ncontainertypecode\"] = {\n              \"label\": editObject.scontainertype,\n              \"value\": editObject.ncontainertypecode\n            };\n          } else {\n            selectedRecord[\"ncontainertypecode\"] = undefined;\n          } //ALPD-3418\n\n\n          if (editObject.ntestpackagecode !== -1) {\n            selectedRecord[\"ntestpackagecode\"] = {\n              \"label\": editObject.stestpackagename,\n              \"value\": editObject.ntestpackagecode\n            };\n          } else {\n            selectedRecord[\"ntestpackagecode\"] = undefined;\n          }\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              masterData: { ...masterData,\n                ...response[0].data,\n                SelectedTest: SelectedTest //TestGroupTest : [TestGroupTest]\n\n              },\n              openModal: true,\n              operation: operation,\n              screenName: \"IDS_EDITTESTGROUPTEST\",\n              testGroupInputData: {\n                // source: constructOptionList(response[1].data || [], \"nsourcecode\", \"ssourcename\", false, false, true).get(\"OptionList\"),\n                section: constructOptionList(response[1].data || [], \"nsectioncode\", \"ssectionname\", false, false, true).get(\"OptionList\"),\n                method: constructOptionList(response[2].data || [], \"nmethodcode\", \"smethodname\", false, false, true).get(\"OptionList\"),\n                instrumentCategory: constructOptionList(response[3].data || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", false, false, true).get(\"OptionList\"),\n                containerType: constructOptionList(response[5].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true).get(\"OptionList\"),\n                testFile: constructOptionList(response[4].data || [], \"ntestfilecode\", \"sfilename\", false, false, true).get(\"OptionList\"),\n                testpackage: constructOptionList(response[6].data || [], \"ntestpackagecode\", \"stestpackagename\", false, false, true).get(\"OptionList\")\n              },\n              selectedRecord,\n              ncontrolCode\n            }\n          });\n        }).catch(error => {\n          //console.log(\"errror:\", error);\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n\n          if (error.response.status === 409 || error.response.status === 417) {\n            toast.warn(error.response.data);\n          } else {\n            toast.error(error.message);\n          }\n        });\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n        }));\n      }\n    }\n  };\n};\nexport const editTestGroupParameter = (operation, selectedParameter, userInfo, ncontrolCode, selectedSpecification, filterData, masterData) => {\n  return dispatch => {\n    const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\n    const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;\n\n    if (templateVersionStatus === transactionStatus.RETIRED) {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTEDTEMPLATEISRETIRED\"\n      }));\n    } else {\n      if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT || selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\n        dispatch(initRequest(true));\n        const urlArray = [rsapi.post(\"/testgroup/getActiveParameterById\", {\n          userinfo: userInfo,\n          testgrouptestparameter: { ...selectedParameter,\n            nprojectmastercode: masterData[\"selectedNode\"][\"nprojectmastercode\"]\n          },\n          ntreeversiontempcode: filterData.ntreeversiontempcode.value\n        }), rsapi.post(\"/parametertype/getParameterType\", {\n          userinfo: userInfo\n        }), rsapi.post(\"unit/getUnit\", {\n          userinfo: userInfo\n        }), rsapi.post(\"grade/getGrade\", {\n          userinfo: userInfo\n        }), rsapi.post(\"checklist/getApprovedChecklist\", {\n          \"userinfo\": userInfo\n        })];\n        Axios.all(urlArray).then(response => {\n          const parameterObject = response[0].data.TestGroupTestParameter[0];\n          const predefinedObject = response[0].data.TestGroupTestPredefinedParameter;\n          const characterObject = response[0].data.TestGroupTestCharParameter;\n          const numericObject = response[0].data.TestGroupTestNumericParameter && response[0].data.TestGroupTestNumericParameter.length > 0 ? response[0].data.TestGroupTestNumericParameter[0] : {};\n          const selectedRecord = { ...parameterObject,\n            nunitcode: {\n              \"label\": parameterObject.sunitname,\n              \"value\": parameterObject.nunitcode\n            },\n            nparametertypecode: {\n              \"label\": parameterObject.sdisplaystatus,\n              \"value\": parameterObject.nparametertypecode\n            },\n            parameterTypeCode: parameterObject.nparametertypecode,\n            nchecklistversioncode: {\n              \"label\": parameterObject.schecklistname,\n              \"value\": parameterObject.nchecklistversioncode\n            },\n            schecklistversionname: parameterObject.schecklistversionname,\n            ntestformulacode: parameterObject.ntestformulacode > 0 ? {\n              \"label\": parameterObject.sformulaname,\n              \"value\": parameterObject.ntestformulacode,\n              item: {\n                sformulacalculationdetail: parameterObject.sformulaname,\n                ntestformulacode: parameterObject.ntestformulacode,\n                sformulacalculationcode: parameterObject.sformulacalculationcode\n              }\n            } : \"\"\n          };\n\n          if (selectedRecord[\"schecklistname\"] === \"NA\") {\n            delete selectedRecord[\"nchecklistversioncode\"];\n          }\n\n          if (selectedRecord[\"schecklistversionname\"] === \"NA\") {\n            delete selectedRecord[\"schecklistversionname\"];\n          }\n\n          if (selectedRecord[\"sunitname\"] === \"NA\") {\n            delete selectedRecord[\"nunitcode\"];\n          }\n\n          if (characterObject) {\n            selectedRecord[\"scharname\"] = characterObject.scharname;\n            selectedRecord[\"ntestgrouptestcharcode\"] = characterObject.ntestgrouptestcharcode;\n          }\n\n          if (predefinedObject) {\n            selectedRecord[\"ntestgrouptestpredefcode\"] = predefinedObject.ntestgrouptestpredefcode;\n            selectedRecord[\"spredefinedname\"] = predefinedObject.spredefinedname;\n            selectedRecord[\"ndefaultstatus\"] = predefinedObject.ndefaultstatus;\n            selectedRecord[\"ngradecode\"] = {\n              \"label\": predefinedObject.sdisplaystatus,\n              \"value\": predefinedObject.ngradecode\n            };\n          }\n\n          if (numericObject) {\n            selectedRecord[\"ntestgrouptestnumericcode\"] = numericObject.ntestgrouptestnumericcode;\n            selectedRecord[\"sminlod\"] = numericObject.sminlod;\n            selectedRecord[\"smaxlod\"] = numericObject.smaxlod;\n            selectedRecord[\"sminb\"] = numericObject.sminb;\n            selectedRecord[\"smina\"] = numericObject.smina;\n            selectedRecord[\"smaxa\"] = numericObject.smaxa;\n            selectedRecord[\"smaxb\"] = numericObject.smaxb;\n            selectedRecord[\"sminloq\"] = numericObject.sminloq;\n            selectedRecord[\"smaxloq\"] = numericObject.smaxloq;\n            selectedRecord[\"sdisregard\"] = numericObject.sdisregard;\n            selectedRecord[\"sresultvalue\"] = numericObject.sresultvalue;\n            selectedRecord[\"ngradecode\"] = {\n              \"label\": numericObject.sgradename,\n              \"value\": numericObject.ngradecode\n            };\n          }\n\n          const gradeMap = constructOptionList(response[3].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\n          const unitMap = constructOptionList(response[2].data || [], \"nunitcode\", \"sunitname\", false, false, true);\n          const grade = gradeMap.get(\"OptionList\");\n          const unit = unitMap.get(\"OptionList\");\n          const disabled = parameterObject.nparametertypecode === parameterType.NUMERIC ? false : true;\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              openChildModal: true,\n              operation: operation,\n              screenName: \"IDS_PARAMETER\",\n              testGroupInputData: {\n                unit,\n                grade,\n                testFormula: constructOptionList(response[0].data.TestFormula || [], \"ntestformulacode\", \"sformulaname\", false, false, true).get(\"OptionList\"),\n                parameterType: constructOptionList(response[1].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true).get(\"OptionList\"),\n                checkListVersion: constructOptionList(response[4].data || [], \"nchecklistversioncode\", \"schecklistname\", false, false, true).get(\"OptionList\"),\n                needRoundingDigit: disabled,\n                needUnit: disabled\n              },\n              parameterData: {\n                grade,\n                defaultUnit: unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\"\n              },\n              selectedRecord,\n              ncontrolCode,\n              loading: false\n            }\n          });\n        }).catch(error => {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n\n          if (error.response.status === 409 || error.response.status === 417) {\n            toast.warn(error.response.data);\n          } else {\n            toast.error(error.message);\n          }\n        });\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n        }));\n      }\n    }\n  };\n}; // export const addTestGroupFormula = (selectedParameter, userInfo, ncontrolCode, optionalData) => {\n//     return dispatch => {\n//         const testgroupspecification = optionalData.testgroupspecification;\n//         if(testgroupspecification.napprovalstatus === transactionStatus.DRAFT || \n//             testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\n//             dispatch(initRequest(true));\n//             rsapi.post(\"/testgroup/getTestGroupFormula\", {userinfo: userInfo, testgrouptestparameter: selectedParameter, testgroupspecification})\n//             .then(response=>{\n//                 dispatch({\n//                     type: DEFAULT_RETURN, \n//                     payload:{\n//                         openChildModal: true,\n//                         operation: \"create\",\n//                         screenName: \"IDS_FORMULA\",\n//                         testGroupInputData: {testFormula: response.data},\n//                         selectedRecord: {},\n//                         ncontrolCode\n//                 }});\n//             })\n//             .catch(error=>{\n//                 dispatch({type: DEFAULT_RETURN, payload: {loading:false}});\n//                 if(error.response.status === 409 || error.response.status === 417) {\n//                     toast.warn(error.response.data);\n//                 } else {\n//                     toast.error(error.message)\n//                 }\n//             });\n//         } else {\n//             toast.warn(intl.formatMessage({id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));\n//         }\n//     }\n// }\n\nexport const getTestGroupParameter = inputParam => {\n  return dispatch => {\n    rsapi.post(\"/testgroup/getTestGroupTestParameter\", { ...inputParam\n    }).then(response => {\n      sortData(response.data);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputParam.masterData,\n            ...response.data\n          }\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const getComponentBySpecId = (inputParam, masterData, searchRef) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testgroup/\" + inputParam.operation + inputParam.methodUrl, {\n      [inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0],\n      userinfo: inputParam.userInfo\n    }).then(response => {\n      sortData(response.data);\n\n      if (searchRef.current) {\n        searchRef.current.value = \"\";\n      }\n\n      const historyDataState = { ...inputParam.historyDataState,\n        sort: undefined,\n        filter: undefined\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            ...response.data,\n            searchedData: undefined\n          },\n          historyDataState,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const getTestGroupDetails = inputParam => {\n  return dispatch => {\n    //...inputParam, \n    dispatch(initRequest(true));\n    rsapi.post(\"/testgroup/getTestGroupTest\", {\n      ntestgrouptestcode: parseInt(inputParam['ntestgrouptestcode']),\n      userinfo: inputParam.userInfo\n    }) // rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \n    //     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\n    .then(response => {\n      sortData(response.data);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputParam.masterData,\n            ...response.data\n          },\n          testskip: undefined,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const getTestGroupComponentDetails = (inputParam, masterData, searchRef) => {\n  return dispatch => {\n    //...inputParam, \n    dispatch(initRequest(true));\n    rsapi.post(\"/testgroup/getTestByComponentId\", {\n      testgroupspecsampletype: inputParam['testgroupspecsampletype'],\n      userinfo: inputParam.userInfo\n    }) // rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \n    //     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\n    .then(response => {\n      sortData(response.data);\n      if (searchRef.current) searchRef.current.value = \"\";\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            ...response.data,\n            searchedData: undefined\n          },\n          testskip: 0,\n          testtake: 5,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const getSpecification = (inputParam, masterData, searchRef) => {\n  return dispatch => {\n    if (inputParam.selectedRecord !== null) {\n      rsapi.post(\"/testgroup/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam,\n        [inputParam.keyName]: inputParam.selectedRecord\n      }).then(response => {\n        sortData(response.data);\n        if (searchRef.current) searchRef.current.value = \"\";\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...masterData,\n              ActiveKey: inputParam.activeKey,\n              FocusKey: inputParam.focusKey,\n              primaryKey: inputParam.primaryKey,\n              ...response.data,\n              selectedNode: inputParam.selectedRecord,\n              searchedData: undefined\n            },\n            historyDataState: { ...inputParam.historyDataState,\n              sort: undefined,\n              filter: undefined\n            }\n          }\n        });\n      }).catch(error => {\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.warn(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    } else {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            selectedNode: inputParam.selectedRecord,\n            TestGroupSpecification: [],\n            SelectedSpecification: {},\n            TestGroupTest: [],\n            TestGroupTestParameter: [],\n            TestGroupTestNumericParameter: [],\n            TestGroupTestFormula: [],\n            TestGroupTestPredefinedParameter: [],\n            TestGroupTestClinicalSpec: [],\n            TestGroupTestCharParameter: [],\n            ActiveKey: inputParam.activeKey,\n            FocusKey: inputParam.focusKey,\n            SelectedTest: {},\n            selectedParameter: {},\n            TestGroupSpecFile: [],\n            TestGroupSpecificationHistory: [],\n            SelectedComponent: undefined,\n            RulesEngine: []\n          }\n        }\n      });\n    }\n  };\n};\nexport const changeTestCategory = (inputParam, testGroupInputData) => {\n  return dispatch => {\n    rsapi.post(\"/testgroup/getTestMasterByCategory\", { ...inputParam\n    }).then(response => {\n      sortData(response.data);\n      inputParam.selectedRecord.ntestcode = [];\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedRecord: inputParam.selectedRecord,\n          testGroupInputData: { ...testGroupInputData,\n            ...response.data\n          }\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const getSpecificationDetails = (inputParam, masterData, searchRef) => {\n  return dispatch => {\n    rsapi.post(\"/testgroup/get\" + inputParam.methodUrl, { ...inputParam.inputData\n    }).then(response => {\n      if (searchRef.current) searchRef.current.value = \"\";\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            ...response.data,\n            searchedData: undefined\n          },\n          screenName: inputParam.screenName\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const editSpecFile = inputParam => {\n  return dispatch => {\n    const masterData = inputParam.masterData;\n    const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\n    const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;\n\n    if (templateVersionStatus === transactionStatus.RETIRED) {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTEDTEMPLATEISRETIRED\"\n      }));\n    } else {\n      if (inputParam.testgroupspecification.napprovalstatus === transactionStatus.DRAFT || inputParam.testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\n        let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\n          userinfo: inputParam.userInfo\n        }), rsapi.post(\"/testgroup/getActiveSpecFileById\", {\n          userinfo: inputParam.userInfo,\n          testgroupspecfile: inputParam.selectedRecord,\n          ntreeversiontempcode: inputParam.filterData.ntreeversiontempcode.value\n        })];\n        Axios.all(urlArray).then(response => {\n          const linkmaster = response[0].data.LinkMaster;\n          const defaultLink = linkmaster.filter(item => item.ndefaultlink === transactionStatus.YES);\n          const editObject = response[1].data;\n          let nlinkcode = {};\n          let link = {};\n\n          if (editObject.nattachmenttypecode === attachmentType.LINK) {\n            nlinkcode = {\n              \"label\": editObject.slinkname,\n              \"value\": editObject.nlinkcode\n            };\n            link = {\n              slinkfilename: editObject.sfilename,\n              slinkdescription: editObject.sdescription,\n              nlinkdefaultstatus: editObject.ndefaultstatus,\n              sfilesize: '',\n              nfilesize: 0,\n              ndefaultstatus: 4,\n              sfilename: ''\n            };\n          } else {\n            nlinkcode = defaultLink.length > 0 ? {\n              \"label\": defaultLink[0].slinkname,\n              \"value\": defaultLink[0].nlinkcode\n            } : \"\";\n            link = {\n              slinkfilename: '',\n              slinkdescription: '',\n              sdescription: editObject.sdescription,\n              nlinkdefaultstatus: 4,\n              sfilesize: editObject.sfilesize,\n              nfilesize: editObject.nfilesize,\n              ndefaultstatus: editObject.ndefaultstatus,\n              sfilename: editObject.sfilename\n            };\n          }\n\n          const selectedRecord = { // ...editObject,\n            ...link,\n            nallotedspeccode: editObject.nallotedspeccode,\n            nspecfilecode: editObject.nspecfilecode,\n            stypename: editObject.stypename,\n            nattachmenttypecode: editObject.nattachmenttypecode,\n            nlinkcode // disabled: true\n\n          };\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              openModal: true,\n              operation: \"update\",\n              screenName: \"IDS_SPECFILE\",\n              editFiles: Object.values(editObject).length > 0 && editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {},\n              selectedRecord,\n              ncontrolCode: inputParam.ncontrolCode\n            }\n          });\n        }).catch(error => {\n          if (error.response.status === 409 || error.response.status === 417) {\n            toast.warn(error.response.data);\n          } else {\n            toast.error(error.message);\n          }\n        });\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n        }));\n      }\n    }\n  };\n};\nexport const addTestGroupCodedResult = (operation, paramdata, userInfo, ncontrolCode, optionalData, masterData) => {\n  return dispatch => {\n    const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\n    const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;\n\n    if (templateVersionStatus === transactionStatus.RETIRED) {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTEDTEMPLATEISRETIRED\"\n      }));\n    } else {\n      const testgroupspecification = optionalData.testgroupspecification;\n\n      if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT || testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\n        dispatch(initRequest(true));\n        const urlArray = [rsapi.post(\"grade/getGrade\", {\n          \"userinfo\": userInfo\n        })];\n\n        if (operation === \"update\") {\n          urlArray.push(rsapi.post(\"testgroup/getActivePredefinedParameterById\", {\n            testgrouptestpredefinedparameter: paramdata,\n            \"userinfo\": userInfo,\n            testgroupspecification\n          }));\n          urlArray.push(rsapi.post(\"testgroup/getActivePredefinedParameterSubCodedById\", {\n            testgrouptestpredefinedparameter: paramdata,\n            \"userinfo\": userInfo,\n            testgroupspecification\n          }));\n        }\n\n        Axios.all(urlArray).then(response => {\n          let selectedRecord = {};\n          let selectedsubcodedresult = [];\n          let selectsubcodedelete = [];\n          const gradeMap = constructOptionList(response[0].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\n          const grade = gradeMap.get(\"OptionList\");\n\n          if (operation === \"update\") {\n            const editCodedResult = response[1].data;\n            selectedRecord = {\n              ntestgrouptestpredefcode: paramdata[\"ntestgrouptestpredefcode\"],\n              ntestgrouptestparametercode: paramdata[\"ntestgrouptestparametercode\"],\n              ngradecode: {\n                \"label\": editCodedResult[\"sdisplaystatus\"],\n                \"value\": editCodedResult[\"ngradecode\"]\n              },\n              spredefinedname: editCodedResult[\"spredefinedname\"],\n              //sresultparacomment: editCodedResult[\"sresultparacomment\"],\n              spredefinedsynonym: editCodedResult[\"spredefinedsynonym\"],\n              spredefinedcomments: editCodedResult[\"spredefinedcomments\"],\n              nneedresultentryalert: editCodedResult[\"nneedresultentryalert\"],\n              nneedsubcodedresult: editCodedResult[\"nneedsubcodedresult\"],\n              salertmessage: editCodedResult[\"salertmessage\"]\n            };\n            selectedsubcodedresult = response[2].data;\n          } else {\n            selectedRecord = {\n              ngradecode: gradeMap.get(\"DefaultValue\"),\n              nneedresultentryalert: 4,\n              nneedsubcodedresult: 4 // {\n              //     \"value\": grade[0].ngradecode,\n              //     \"label\": grade[0][\"sdisplaystatus\"]\n              // }\n\n            };\n          }\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              openChildModal: true,\n              showSaveContinue: false,\n              operation: operation,\n              screenName: \"IDS_CODEDRESULT\",\n              parameterData: {\n                grade,\n                needCodedResult: false\n              },\n              selectedRecord,\n              ncontrolCode,\n              loading: false,\n              selectedsubcodedresult,\n              selectsubcodedelete\n            }\n          });\n        }).catch(error => {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n\n          if (error.response.status === 500) {\n            toast.error(error.message);\n          } else {\n            toast.warn(error.response.data);\n          }\n        });\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n        }));\n      }\n    }\n  };\n};\nexport const subCodedResultView = (operation, paramdata, userInfo, ncontrolCode, optionalData, masterData) => {\n  return dispatch => {\n    rsapi.post(\"testgroup/getActivePredefinedParameterSubCoded\", {\n      testgrouptestpredefinedparameter: paramdata,\n      \"userinfo\": userInfo\n    }).then(response => {\n      let selectedsubcoderesult = [];\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openModal: true,\n          operation: \"View\",\n          screenName: \"IDS_SUBCODERESULT\",\n          selectedsubcoderesult: response.data,\n          masterData: { ...masterData,\n            selectedsubcoderesult: response.data,\n            searchedData: undefined\n          } //screenName: inputParam.screenName\n\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const addTestGroupNumericTab = (operation, paramdata, userInfo, optionalData, masterData, ncontrolCode) => {\n  return dispatch => {\n    const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\n    const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;\n\n    if (templateVersionStatus === transactionStatus.RETIRED) {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTEDTEMPLATEISRETIRED\"\n      }));\n    } else {\n      const testgroupspecification = optionalData.testgroupspecification;\n\n      if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT || testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\n        dispatch(initRequest(true));\n        const urlArray = [rsapi.post(\"patient/getGender\", {\n          \"userinfo\": userInfo\n        }), rsapi.post(\"grade/getGrade\", {\n          userinfo: userInfo\n        })];\n\n        if (operation === \"update\") {\n          urlArray.push(rsapi.post(\"testgroup/getActiveClinicalSpecById\", {\n            testgrouptestpredefinedparameter: paramdata,\n            \"userinfo\": userInfo,\n            testgroupspecification\n          }));\n        }\n\n        Axios.all(urlArray).then(response => {\n          let selectedRecord = {};\n          const gradeMap = constructOptionList(response[0].data.genderList || [], \"ngendercode\", \"sgendername\", false, false, true);\n          const gender = gradeMap.get(\"OptionList\");\n          const gradeNewMap = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\n          const grade = gradeNewMap.get(\"OptionList\");\n          sortData(grade || [], \"ascending\", \"value\");\n\n          if (operation === \"update\") {\n            const editCodedResult = response[2].data;\n            selectedRecord = {\n              ntestgrouptestclinicspeccode: paramdata[\"ntestgrouptestclinicspeccode\"],\n              ntestgrouptestparametercode: paramdata[\"ntestgrouptestparametercode\"],\n              nfromage: paramdata[\"nfromage\"],\n              ntoage: paramdata[\"ntoage\"],\n              ngradecode: getComboLabelValue(editCodedResult, response[1].data, \"ngradecode\", \"sgradename\"),\n              ngendercode: {\n                \"label\": editCodedResult[\"sgendername\"],\n                \"value\": editCodedResult[\"ngendercode\"]\n              },\n              // ngradecode: {\n              //     \"label\": editCodedResult[\"sgradename\"],\n              //     \"value\": editCodedResult[\"ngradecode\"]\n              // },\n              nhigha: editCodedResult[\"shigha\"] === 'null' ? '' : editCodedResult[\"shigha\"],\n              nhighb: editCodedResult[\"shighb\"] === 'null' ? '' : editCodedResult[\"shighb\"],\n              nlowa: editCodedResult[\"slowa\"] === 'null' ? '' : editCodedResult[\"slowa\"],\n              nlowb: editCodedResult[\"slowb\"] === 'null' ? '' : editCodedResult[\"slowb\"],\n              sminlod: editCodedResult[\"sminlod\"] === 'null' ? '' : editCodedResult[\"sminlod\"],\n              smaxlod: editCodedResult[\"smaxlod\"] === 'null' ? '' : editCodedResult[\"smaxlod\"],\n              sminloq: editCodedResult[\"sminloq\"] === 'null' ? '' : editCodedResult[\"sminloq\"],\n              smaxloq: editCodedResult[\"smaxloq\"] === 'null' ? '' : editCodedResult[\"smaxloq\"],\n              sdisregard: editCodedResult[\"sdisregard\"] === 'null' ? '' : editCodedResult[\"sdisregard\"],\n              sresultvalue: editCodedResult[\"sresultvalue\"] === 'null' ? '' : editCodedResult[\"sresultvalue\"]\n            };\n          } else {\n            selectedRecord = {\n              ngendercode: gradeMap.get(\"DefaultValue\") // {\n              //     \"value\": grade[0].ngradecode,\n              //     \"label\": grade[0][\"sdisplaystatus\"]\n              // }\n\n            };\n          }\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              openChildModal: true,\n              showSaveContinue: false,\n              operation: operation,\n              screenName: \"IDS_CLINICALSPEC\",\n              parameterData: {\n                gender,\n                grade,\n                needCodedResult: false\n              },\n              selectedRecord,\n              ncontrolCode,\n              loading: false\n            }\n          });\n        }).catch(error => {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n\n          if (error.response.status === 500) {\n            toast.error(error.message);\n          } else {\n            toast.warn(error.response.data);\n          }\n        });\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n        }));\n      }\n    }\n  };\n};\nexport const viewTestGroupCheckList = (inputParam, userInfo) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"checklist/viewTemplate\", { ...inputParam\n    }).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openTemplateModal: true,\n          testGroupCheckList: {\n            templateData: response.data\n          },\n          loading: false,\n          selectedRecord: {}\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const reportSpecification = inputParam => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"testgroup/specReportGenerate\", { ...inputParam,\n      ntreeversiontempcode: inputParam.filterData.ntreeversiontempcode.value\n    }).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          loadEsign: false,\n          openModal: false,\n          showConfirmAlert: false\n        }\n      });\n      document.getElementById(\"download_data\").setAttribute(\"href\", response.data.filepath);\n      document.getElementById(\"download_data\").click();\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const retireSpecification = (inputParam, masterData) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"testgroup/retireSpec\", { ...inputParam\n    }).then(response => {\n      // const TestGroupSpecification = response.data.TestGroupSpecificationHistory ;\n      sortData(response.data);\n      masterData = { ...masterData,\n        ...response.data\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const getDataForTestMaterial = (screenName, operation, userInfo, ncontrolCode, selectedRecord, masterData, primaryKeyName) => {\n  return function (dispatch) {\n    if (masterData.selectedNode !== undefined && masterData.selectedNode !== null && masterData.SelectedSpecification !== null) {\n      const testgroupspecification = masterData.SelectedSpecification;\n\n      if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT || testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\n        let urlArray = [];\n        const materialTypeUrl = rsapi.post(\"materialcategory/getMaterialType\", {\n          \"userinfo\": userInfo\n        });\n        const validationUrl = rsapi.post(\"testgroup/validationForRetiredTemplate\", {\n          \"userinfo\": userInfo,\n          ntreeversiontempcode: masterData.selectedNode.ntreeversiontempcode\n        });\n        urlArray = [materialTypeUrl, validationUrl];\n        dispatch(initRequest(true));\n        Axios.all(urlArray).then(response => {\n          console.log(ncontrolCode);\n\n          if (masterData.SelectedTest && masterData.SelectedTest !== undefined) {\n            if (response[1].data === \"Success\") {\n              const materialTypeMap = constructOptionList(response[0].data || [], \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, false);\n              const materialType = materialTypeMap.get(\"OptionList\");\n              const materialTypedefault = materialTypeMap.get(\"DefaultValue\");\n              selectedRecord[\"nmaterialtypecode\"] = materialTypedefault;\n\n              if (selectedRecord[\"nmaterialtypecode\"] !== undefined) {\n                let inputData = [];\n                let inputParam = {\n                  operation: operation,\n                  selectedRecord: selectedRecord,\n                  materialType: materialType,\n                  inputData: {\n                    nmaterialtypecode: materialTypedefault.value\n                  },\n                  materialType: materialType,\n                  masterData: masterData,\n                  screenName: screenName,\n                  ncontrolCode\n                };\n                dispatch(getMaterialCategoryBasedMaterialType(inputParam));\n              } else {\n                dispatch({\n                  type: DEFAULT_RETURN,\n                  payload: {\n                    materialType: materialType,\n                    materialList: undefined,\n                    materialCategoryList: undefined,\n                    isOpen: true,\n                    operation: operation,\n                    screenName: screenName,\n                    openChildModal: true,\n                    ncontrolCode: ncontrolCode,\n                    loading: false\n                  }\n                });\n              }\n            } else {\n              toast.warn(intl.formatMessage({\n                id: response[1].data\n              }));\n              dispatch({\n                type: DEFAULT_RETURN,\n                payload: {\n                  operation: operation,\n                  screenName: screenName,\n                  ncontrolCode: ncontrolCode,\n                  loading: false\n                }\n              });\n            }\n          } else {\n            toast.warn(intl.formatMessage({\n              id: \"IDS_NEEDTOADDTEST\"\n            }));\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                operation: operation,\n                screenName: screenName,\n                ncontrolCode: ncontrolCode,\n                loading: false\n              }\n            });\n          }\n        }).catch(error => {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n\n          if (error.response.status === 500) {\n            toast.error(intl.formatMessage({\n              id: error.message\n            }));\n          } else {\n            toast.warn(intl.formatMessage({\n              id: error.response.data\n            }));\n          }\n        });\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n        }));\n      }\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTSPECIFICATION\"\n      }));\n    }\n  };\n};\nexport function getMaterialCategoryBasedMaterialType(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"material/getMaterialcombo\", {\n      nmaterialtypecode: inputParam.inputData.nmaterialtypecode\n    }).then(response => {\n      let selectedRecord = {};\n      selectedRecord = inputParam.selectedRecord;\n      const materialCategoryMap = constructOptionList(response.data.MaterialCategoryMain || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, false);\n      const materialCategoryList = materialCategoryMap.get(\"OptionList\");\n      const materialCategorydefault = materialCategoryMap.get(\"DefaultValue\");\n      selectedRecord['nmaterialcatcode'] = materialCategorydefault;\n      let masterData = { ...inputParam.masterData,\n        ...response.data\n      };\n\n      if (response.data.MaterialCategoryMain.length === 0) {\n        if (selectedRecord['nmaterialcatcode']) {\n          delete selectedRecord['nmaterialcatcode'];\n        }\n\n        if (selectedRecord['nmaterialcode']) {\n          delete selectedRecord['nmaterialcode'];\n        }\n      }\n\n      let materialList = [];\n\n      if (materialCategoryList.length !== 0) {\n        materialList = materialList;\n        inputParam = { ...inputParam,\n          responsecat: response,\n          materialCategoryList: materialCategoryList,\n          selectedRecord: selectedRecord,\n          inputData: {\n            //nmaterialcatcode: materialCategorydefault.value,\n            nmaterialtypecode: inputParam.inputData.nmaterialtypecode\n          }\n        };\n        dispatch(getMaterialBasedMaterialCategory(inputParam));\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            openChildModal: true,\n            screenName: inputParam.screenName,\n            masterData,\n            loading: false,\n            materialCategoryList: materialCategoryList,\n            materialType: inputParam.materialType,\n            materialList: materialList,\n            selectedRecord: selectedRecord,\n            operation: inputParam.operation,\n            ncontrolCode: inputParam.ncontrolCode\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport function getMaterialBasedMaterialCategory(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"testgroup/getAvailableMaterial\", {\n      nmaterialtypecode: inputParam.inputData.nmaterialtypecode,\n      nmaterialcatcode: inputParam.inputData.nmaterialcatcode !== undefined ? inputParam.inputData.nmaterialcatcode : inputParam.responsecat.data.MaterialCategoryMain[0].nmaterialcatcode,\n      ntestgrouptestcode: inputParam.masterData.SelectedTest.ntestgrouptestcode\n    }).then(response => {\n      let selectedRecord = inputParam.selectedRecord;\n      const materialMap = constructjsonOptionList(response.data.MaterialCombo || [], \"nmaterialcode\", \"Material Name\", undefined, undefined, false);\n      const materialList = materialMap.get(\"OptionList\");\n\n      if (response.data.MaterialCombo.length === 0) {\n        delete selectedRecord['nmaterialcode'];\n      }\n\n      let masterData = { ...inputParam.masterData,\n        ...response.data\n      };\n\n      if (inputParam.materialCategoryList) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            materialCategoryList: inputParam.materialCategoryList,\n            masterData,\n            loading: false,\n            materialList: materialList,\n            openChildModal: true,\n            screenName: inputParam.screenName,\n            selectedRecord: inputParam.selectedRecord,\n            materialType: inputParam.materialType,\n            operation: inputParam.operation,\n            ncontrolCode: inputParam.ncontrolCode\n          }\n        });\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            materialList: materialList,\n            openChildModal: true\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport const getTestGroupMaterial = inputParam => {\n  return dispatch => {\n    rsapi.post(\"/testgroup/getTestGroupTestMaterial\", { ...inputParam\n    }).then(response => {\n      sortData(response.data);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputParam.masterData,\n            ...response.data\n          }\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const getDataForEditTestMaterial = (screenName, operation, userInfo, ncontrolCode, selectedRecord, Data, primaryKeyName) => {\n  return function (dispatch) {\n    const testgroupspecification = Data.SelectedSpecification;\n\n    if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT || testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\n      let urlArray = [];\n      const materialTypeUrl = rsapi.post(\"materialcategory/getMaterialType\", {\n        \"userinfo\": userInfo\n      });\n      const materialCatUrl = rsapi.post(\"material/getMaterialcombo\", {\n        nmaterialtypecode: Data.selectedMaterial.nmaterialtypecode\n      });\n      const materialUrl = rsapi.post(\"testgroup/getAvailableMaterial\", {\n        nmaterialcatcode: Data.selectedMaterial.nmaterialcatcode,\n        nmaterialtypecode: Data.selectedMaterial.nmaterialtypecode,\n        ntestgrouptestcode: Data.SelectedTest.ntestgrouptestcode\n      });\n      const materialById = rsapi.post(\"testgroup/getActiveTestMaterialById\", {\n        [primaryKeyName]: Data.selectedMaterial.ntestgrouptestmaterialcode,\n        \"userinfo\": userInfo\n      });\n      const validationUrl = rsapi.post(\"testgroup/validationForRetiredTemplate\", {\n        \"userinfo\": userInfo,\n        ntreeversiontempcode: Data.selectedNode.ntreeversiontempcode\n      });\n      urlArray = [materialTypeUrl, materialCatUrl, materialUrl, materialById, validationUrl];\n      dispatch(initRequest(true));\n      Axios.all(urlArray).then(response => {\n        if (response[4].data === \"Success\") {\n          let selectedRecord = {};\n          let MaterialCategoryData = [];\n          let MaterialTypeData = [];\n          let MaterialData = [];\n          const materialTypeMap = constructOptionList(response[0].data || [], \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, false);\n          const materialType = materialTypeMap.get(\"OptionList\");\n          const materialCategoryMap = constructOptionList(response[1].data.MaterialCategoryMain || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, false);\n          const materialCategoryList = materialCategoryMap.get(\"OptionList\");\n          const materialMap = constructjsonOptionList(response[2].data.MaterialCombo || [], \"nmaterialcode\", \"Material Name\", undefined, undefined, false);\n          const materialList = materialMap.get(\"OptionList\");\n          MaterialCategoryData.push({\n            \"value\": response[3].data[\"nmaterialcatcode\"],\n            \"label\": response[3].data[\"smaterialcatname\"]\n          });\n          MaterialTypeData.push({\n            \"value\": response[3].data[\"nmaterialtypecode\"],\n            \"label\": response[3].data[\"smaterialtypename\"]\n          });\n          MaterialData.push({\n            \"value\": response[3].data[\"nmaterialcode\"],\n            \"label\": response[3].data[\"smaterialname\"]\n          });\n          selectedRecord = response[3].data;\n          selectedRecord[\"nmaterialcatcode\"] = MaterialCategoryData[0];\n          selectedRecord[\"nmaterialtypecode\"] = MaterialTypeData[0];\n          selectedRecord[\"nmaterialcode\"] = MaterialData[0];\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              materialType: materialType,\n              materialList: materialList,\n              materialCategoryList: materialCategoryList,\n              selectedRecord: selectedRecord,\n              isOpen: true,\n              operation: operation,\n              screenName: screenName,\n              openChildModal: true,\n              ncontrolCode: ncontrolCode,\n              loading: false\n            }\n          });\n        } else {\n          toast.warn(intl.formatMessage({\n            id: response[4].data\n          }));\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              operation: operation,\n              screenName: screenName,\n              ncontrolCode: ncontrolCode,\n              loading: false\n            }\n          });\n        }\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(intl.formatMessage({\n            id: error.message\n          }));\n        } else {\n          toast.warn(intl.formatMessage({\n            id: error.response.data\n          }));\n        }\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n      }));\n    }\n  };\n}; //To get spec details for copy action --ALPD-4099 ,work done by Dhanushya R I\n\nexport const getSpecDetailsForCopy = (data, key, isProduct, masterDatas, selectedRecord) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testgroup/getSpecDetailsForCopy\", {\n      nproductcode: data.value,\n      nsampletypecode: masterDatas.selectedNode.nsampletypecode,\n      nproductcatcode: data.item.nproductcatcode,\n      nprojectmastercode: masterDatas.selectedNode.nprojectmastercode,\n      ntreeversiontempcode: masterDatas.selectedNode.ntreeversiontempcode\n    }).then(response => {\n      sortData(response.data);\n      selectedRecord = { ...selectedRecord,\n        CopyFocusKey: response.data.FocusKey,\n        CopyActiveKey: response.data.ActiveKey,\n        selectedCopyNodeManipulationCode: response.data.selectedNode.ntemplatemanipulationcode,\n        selectedCopyProfileName: response.data.selectedNode.sleveldescription,\n        scopyspecname: response.data.selectedNode.sleveldescription\n      };\n      let selectedRecordCopy = {\n        nproductcode: data,\n        nproductcatcode: data,\n        ...response.data,\n        CopyFocusKey: response.data.FocusKey,\n        CopyActiveKey: response.data.ActiveKey,\n        isCopy: true\n      };\n      let CopyOpenNodes = response.data.OpenNodes;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedRecord,\n          masterData: { ...masterDatas,\n            selectedRecordCopy,\n            CopyOpenNodes\n          },\n          loading: false,\n          testskip: 0\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: masterDatas,\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/TestGroupAction.js"],"names":["toast","rsapi","DEFAULT_RETURN","attachmentType","parameterType","SampleType","transactionStatus","MaterialType","constructjsonOptionList","constructOptionList","rearrangeDateFormat","sortData","getComboLabelValue","Axios","intl","initRequest","sampleTypeOnChange","inputParam","masterData","dispatch","url","classUrl","post","methodUrl","inputData","then","response","data","type","payload","tempFilterData","loading","catch","error","status","warn","message","filterTestGroup","searchRef","current","value","filterData","selectedRecordCopy","AgaramTree","isrulesenginerequired","searchedData","undefined","testskip","historyDataState","sort","filter","createTree","selectedRecord","userInfo","ncontrolCode","isValid","ntreeversiontempcode","nsampletypecode","item","ncategorybasedflowrequired","YES","nproductcatcode","ncategorybasedflow","nproductcode","formatMessage","id","sampletype","ncategorycode","nprojectmastercode","userinfo","treetemplatemanipulation","selectedNode","treetempTranstestGroup","mandatoryFields","forEach","index","sleveldescription","push","slabelname","openModal","operation","screenName","TreetempTranstestGroup","treeMandatoryFields","editTree","treeVersionTemplateIndex","findIndex","x","templateVersionStatus","ntransactionstatus","RETIRED","addSpecification","masterDatas","nnextchildcode","SelectedSpecification","urlArray","testgroupspecification","napprovalstatus","CORRECTION","DRAFT","all","sproductname","label","sproductcatname","dexpirydate","ntzexpirydate","stimezoneid","sspecname","ExpiryDate","selectedCopyProfileName","selectedCopyNodeManipulationCode","ntemplatemanipulationcode","CopyFocusKey","FocusKey","CopyActiveKey","ActiveKey","scopyspecname","ncomponentrequired","ACTIVE","ntimezonecode","timeZoneList","get","addComponent","genericLabel","nclinicaltyperequired","testGroupSpecSampleType","length","testCategory","sampleTypeMap","slanguagetypecode","testGroupInputData","TestCategory","TestGroupSpecSampleType","TestGroupTest","ncomponentcode","ntestcategorycode","addTestGroupTest","selectedComponent","selectedSpecification","openTestModal","testgroupspecsampletype","stestcategoryname","stestcategorycode","editTestGroupTest","selectedTest","ntestcode","testgrouptest","editObject","SelectedTestGroupTest","testFileItem","TestGroupTestFile","SelectedTest","nsectioncode","ssectionname","nmethodcode","smethodname","ninstrumentcatcode","sinstrumentcatname","ncontainertypecode","scontainertype","ntestpackagecode","stestpackagename","sfilename","ntestgroupfilecode","section","method","instrumentCategory","containerType","testFile","testpackage","editTestGroupParameter","selectedParameter","testgrouptestparameter","parameterObject","TestGroupTestParameter","predefinedObject","TestGroupTestPredefinedParameter","characterObject","TestGroupTestCharParameter","numericObject","TestGroupTestNumericParameter","nunitcode","sunitname","nparametertypecode","sdisplaystatus","parameterTypeCode","nchecklistversioncode","schecklistname","schecklistversionname","ntestformulacode","sformulaname","sformulacalculationdetail","sformulacalculationcode","scharname","ntestgrouptestcharcode","ntestgrouptestpredefcode","spredefinedname","ndefaultstatus","ngradecode","ntestgrouptestnumericcode","sminlod","smaxlod","sminb","smina","smaxa","smaxb","sminloq","smaxloq","sdisregard","sresultvalue","sgradename","gradeMap","unitMap","grade","unit","disabled","NUMERIC","openChildModal","testFormula","TestFormula","checkListVersion","needRoundingDigit","needUnit","parameterData","defaultUnit","getTestGroupParameter","getComponentBySpecId","keyName","getTestGroupDetails","ntestgrouptestcode","parseInt","getTestGroupComponentDetails","testtake","getSpecification","activeKey","focusKey","primaryKey","TestGroupSpecification","TestGroupTestFormula","TestGroupTestClinicalSpec","TestGroupSpecFile","TestGroupSpecificationHistory","SelectedComponent","RulesEngine","changeTestCategory","getSpecificationDetails","editSpecFile","testgroupspecfile","linkmaster","LinkMaster","defaultLink","ndefaultlink","nlinkcode","link","nattachmenttypecode","LINK","slinkname","slinkfilename","slinkdescription","sdescription","nlinkdefaultstatus","sfilesize","nfilesize","nallotedspeccode","nspecfilecode","stypename","editFiles","Object","values","FTP","addTestGroupCodedResult","paramdata","optionalData","testgrouptestpredefinedparameter","selectedsubcodedresult","selectsubcodedelete","editCodedResult","ntestgrouptestparametercode","spredefinedsynonym","spredefinedcomments","nneedresultentryalert","nneedsubcodedresult","salertmessage","showSaveContinue","needCodedResult","subCodedResultView","selectedsubcoderesult","addTestGroupNumericTab","genderList","gender","gradeNewMap","ntestgrouptestclinicspeccode","nfromage","ntoage","ngendercode","nhigha","nhighb","nlowa","nlowb","viewTestGroupCheckList","openTemplateModal","testGroupCheckList","templateData","reportSpecification","loadEsign","showConfirmAlert","document","getElementById","setAttribute","filepath","click","retireSpecification","getDataForTestMaterial","primaryKeyName","materialTypeUrl","validationUrl","console","log","materialTypeMap","materialType","materialTypedefault","nmaterialtypecode","getMaterialCategoryBasedMaterialType","materialList","materialCategoryList","isOpen","materialCategoryMap","MaterialCategoryMain","materialCategorydefault","responsecat","getMaterialBasedMaterialCategory","nmaterialcatcode","materialMap","MaterialCombo","getTestGroupMaterial","getDataForEditTestMaterial","Data","materialCatUrl","selectedMaterial","materialUrl","materialById","ntestgrouptestmaterialcode","MaterialCategoryData","MaterialTypeData","MaterialData","getSpecDetailsForCopy","key","isProduct","isCopy","CopyOpenNodes","OpenNodes"],"mappings":"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","sourcesContent":["import {\r\n    toast\r\n} from \"react-toastify\";\r\nimport rsapi from \"../rsapi\";\r\nimport {\r\n    DEFAULT_RETURN\r\n} from \"./LoginTypes\";\r\nimport {\r\n    attachmentType,\r\n    parameterType,\r\n    SampleType,\r\n    transactionStatus,MaterialType\r\n} from \"../components/Enumeration\";\r\nimport {\r\n    constructjsonOptionList,\r\n    constructOptionList,\r\n    rearrangeDateFormat,\r\n    //formatInputDate,\r\n    sortData,getComboLabelValue\r\n} from \"../components/CommonScript\";\r\nimport Axios from \"axios\";\r\nimport {\r\n    intl\r\n} from \"../components/App\";\r\nimport {\r\n    initRequest\r\n} from \"./LoginAction\";\r\n\r\n\r\nexport const sampleTypeOnChange = (inputParam, masterData) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let url = \"/testgroup\";\r\n        if (inputParam.classUrl) {\r\n            url = inputParam.classUrl;\r\n        }\r\n        rsapi.post(url + inputParam.methodUrl, inputParam.inputData)\r\n            .then(response => {\r\n                sortData(response.data);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        tempFilterData: inputParam.inputData.tempFilterData,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    masterData[\"ExistingLinkTable\"] = [];\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const filterTestGroup = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgroup/filterTestGroup\", inputParam.inputData)\r\n            .then(response => {\r\n                sortData(response.data);\r\n                if (searchRef.current) {\r\n                    searchRef.current.value = \"\";\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        filterData: inputParam.inputData.filterData,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            selectedRecordCopy:response.data.AgaramTree,\r\n                            isrulesenginerequired:inputParam['inputData']['filterData']['nsampletypecode']['item']['nrulesenginerequired'],\r\n                            searchedData: undefined\r\n                        }, \r\n                        loading: false,\r\n                        testskip: 0,\r\n                        historyDataState: {\r\n                            ...inputParam.historyDataState,\r\n                            sort: undefined,\r\n                            filter: undefined\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const createTree = (selectedRecord, userInfo, masterData, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        //ALPD-1466,1465\r\n     let isValid =false;\r\n        if (selectedRecord && selectedRecord.ntreeversiontempcode !== \"\") {\r\n            // if (selectedRecord && selectedRecord.nsampletypecode.item.nportalrequired === transactionStatus.YES &&\r\n            //     masterData.FocusKey === \"root\" && masterData && masterData.TreeTemplateManipulation.length > 0) {\r\n            //     toast.warn(intl.formatMessage({\r\n            //         id: \"IDS_MORETHANONEPROFILENOTALLOWEDCLINICALTYPE\"\r\n            //     }));\r\n            // } else \r\n            if (selectedRecord.nsampletypecode.item.ncategorybasedflowrequired === transactionStatus.YES) {\r\n                isValid=true;\r\n            } else if ((selectedRecord.nproductcatcode.item.ncategorybasedflow === transactionStatus.YES) || (selectedRecord.nproductcode)) {\r\n                isValid=true;\r\n            } else {\r\n               \r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_PRODUCTNOTAVAILABLE\"\r\n                }));\r\n            }\r\n        }\r\n         else {\r\n                toast.warn(intl.formatMessage({ id: \"IDS_STUDYPLANTEMPLATEISNOTAVAILABLE\" }));\r\n            }\r\n            if(isValid){\r\n                const inputParam = {\r\n                    sampletype: selectedRecord.nsampletypecode.item,\r\n                    ncategorycode: selectedRecord.nproductcatcode.value,\r\n                    ntreeversiontempcode: selectedRecord.ntreeversiontempcode.value,\r\n                    nprojectmastercode: selectedRecord.nprojectmastercode ? selectedRecord.nprojectmastercode.value : -1,\r\n                    userinfo: userInfo,\r\n                    treetemplatemanipulation: masterData.selectedNode\r\n                }\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"/testgroup/getTemplateMasterDetails\", {\r\n                    ...inputParam\r\n                })\r\n                    .then(response => {\r\n                        const treetempTranstestGroup = response.data[\"TreetempTranstestGroup\"] || [];\r\n\r\n                        // const treeMandatoryFields = treetempTranstestGroup.map((item, index) => {\r\n                        //         return {\r\n                        //             \"idsName\": item.slabelname,\r\n                        //             \"dataField\": \"sleveldescription_\" + index,\r\n                        //             \"mandatory\": true\r\n                        //         }\r\n                        // });\r\n\r\n                        //  const selectedNodeLevel = selectedNode ? selectedNode.slevelcode.split(\"/1\").length-2 : -1;\r\n                        const mandatoryFields = [];\r\n                        treetempTranstestGroup.forEach((item, index) => {\r\n                            if (item.sleveldescription === null) {\r\n                                mandatoryFields.push({\r\n                                    \"idsName\": item.slabelname,\r\n                                    \"dataField\": \"sleveldescription_\" + index,\r\n                                    \"mandatory\": true\r\n                                })\r\n                            }\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openModal: true,\r\n                                operation: \"create\",\r\n                                screenName: \"IDS_PROFILETREE\",\r\n                                TreetempTranstestGroup: treetempTranstestGroup,\r\n                                treeMandatoryFields: mandatoryFields,\r\n                                //selectedRecord,\r\n                                ncontrolCode,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        });\r\n                        if (error.response.status === 409 || error.response.status === 417) {\r\n                            toast.warn(error.response.data);\r\n                        } else {\r\n                            toast.error(error.message)\r\n                        }\r\n                    });\r\n            }\r\n}\r\n}\r\n \r\nexport const editTree = (operation, selectedNode, userinfo, ncontrolCode, filterData, masterData) => {\r\n    return (dispatch) => {\r\n        if (!selectedNode) {\r\n            return toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTPROFILENODETOEDIT\"\r\n            }))\r\n        }\r\n        //console.log(\"edit Tree:\", selectedNode, masterData);\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === selectedNode[\"ntreeversiontempcode\"]);\r\n        // if (treeVersionTemplateIndex !== -1){\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        //}\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            if (selectedNode) {\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"/testgroup/getTreeById\", {\r\n                    userinfo,\r\n                    treetemplatemanipulation: selectedNode,\r\n                    ntreeversiontempcode: filterData.ntreeversiontempcode.value\r\n                })\r\n                    .then(response => {\r\n                        const treetempTranstestGroup = response.data;\r\n                        const treeMandatoryFields = treetempTranstestGroup && [{\r\n                            \"idsName\": treetempTranstestGroup.slabelname,\r\n                            \"dataField\": \"sleveldescription\",\r\n                            \"mandatory\": true\r\n                        }];\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openModal: true,\r\n                                operation: operation,\r\n                                screenName: \"IDS_EDITTREE\",\r\n                                selectedRecord: {\r\n                                    ...treetempTranstestGroup\r\n                                },\r\n                                treeMandatoryFields,\r\n                                ncontrolCode,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        });\r\n                        if (error.response.status === 409 || error.response.status === 417) {\r\n                            toast.warn(error.response.data);\r\n                        } else {\r\n                            toast.error(error.message)\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SELECTPROFILENODETOEDIT\"\r\n                }))\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const addSpecification = (operation, inputParam, ncontrolCode, masterDatas) => {\r\n    return (dispatch) => {\r\n        //if (inputParam.selectedNode != null && inputParam.selectedNode.schildnode === \"\") {\r\n        if (inputParam.selectedRecord && inputParam.selectedRecord.ntreeversiontempcode !== \"\") {\r\n            if (inputParam.selectedRecord.ntreeversiontempcode.item.ntransactionstatus === transactionStatus.RETIRED) {\r\n                toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n            }\r\n            else {\r\n                if (inputParam.selectedNode != null && inputParam.selectedNode.nnextchildcode === -1) {\r\n\r\n                    if (masterDatas && masterDatas.SelectedSpecification === null && operation === \"copy\") {\r\n                        toast.warn(intl.formatMessage({ id: \"IDS_SELECTSPECIFICATION\" }));\r\n                    }\r\n                    else {\r\n                        let urlArray = [];\r\n                        if (operation === \"update\") {\r\n                            const testgroupspecification = inputParam.testgroupspecification[0];\r\n                            // let isValidOperation = false;\r\n                            // if (operation === \"update\"){\r\n                            //     if (testgroupspecification.napprovalstatus === transactionStatus.CORRECTION ||\r\n                            //         testgroupspecification.napprovalstatus === transactionStatus.DRAFT) {\r\n                            //             isValidOperation = true;\r\n                            //     }\r\n                            //     else {\r\n                            //         toast.warn(intl.formatMessage({id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));\r\n                            //         return;\r\n                            //     }\r\n                            // }\r\n                            // else{\r\n                            //     isValidOperation = true;\r\n                            // }\r\n                            if (testgroupspecification.napprovalstatus === transactionStatus.CORRECTION ||\r\n                                testgroupspecification.napprovalstatus === transactionStatus.DRAFT) {\r\n                                urlArray = [rsapi.post(\"timezone/getTimeZone\")];\r\n\r\n                                urlArray.push(rsapi.post(\"/testgroup/getActiveSpecificationById\", {\r\n                                    testgroupspecification,\r\n                                    userinfo: inputParam.userinfo,\r\n                                    ntreeversiontempcode: inputParam.selectedRecord.ntreeversiontempcode.value\r\n                                }));\r\n                            }\r\n                            else {\r\n                                toast.warn(intl.formatMessage({ id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\" }));\r\n                                return;\r\n                            }\r\n                        }\r\n                        else {\r\n                            urlArray = [rsapi.post(\"timezone/getTimeZone\")];\r\n\r\n                            urlArray.push(rsapi.post(\"/testgroup/getAddSpecification\", {\r\n                                userinfo: inputParam.userInfo,\r\n                                ntreeversiontempcode: inputParam.selectedRecord.ntreeversiontempcode.value,\r\n                                nprojectmastercode:masterDatas.selectedNode.nprojectmastercode\r\n                                //currentdate: formatInputDate(new Date(), true)\r\n                            }));\r\n                        }\r\n                        Axios.all(urlArray)\r\n                            .then(response => {\r\n                                let selectedRecord = {};\r\n                                let masterData = inputParam.masterData !== undefined ? inputParam.masterData : masterDatas;\r\n\r\n                                if (operation === \"update\") {\r\n                                    masterData = {\r\n                                        ...inputParam.masterData,\r\n                                        ...response[1].data,\r\n                                        testgroupspecification: inputParam.testgroupspecification\r\n                                    }\r\n                                    selectedRecord = {\r\n                                        sproductname: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow === transactionStatus.YES ? \"\" : inputParam.selectedRecord.nproductcode && inputParam.selectedRecord.nproductcode.label,\r\n                                        sproductcatname: inputParam.selectedRecord.nproductcatcode.label,\r\n                                        ncategorybasedflow: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow,\r\n                                        ...response[1].data.SelectedSpecification,\r\n                                        //dexpirydate: new Date(response[1].data[\"sexpirydate\"]),\r\n                                        dexpirydate: rearrangeDateFormat(inputParam.userinfo, response[1].data.SelectedSpecification[\"sexpirydate\"]),\r\n                                        ntzexpirydate: {\r\n                                            \"label\": response[1].data.SelectedSpecification.stimezoneid,\r\n                                            \"value\": response[1].data.SelectedSpecification.ntzexpirydate\r\n                                        }\r\n                                    };\r\n                                } else {\r\n                                    selectedRecord = {\r\n                                        sproductname: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow === transactionStatus.YES ? \"\" : inputParam.selectedRecord.nproductcode && inputParam.selectedRecord.nproductcode.label,\r\n                                        sproductcatname: inputParam.selectedRecord.nproductcatcode.label,\r\n                                        sspecname: inputParam.selectedNode.sleveldescription,\r\n                                        ncategorybasedflow: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow,\r\n                                        dexpirydate: rearrangeDateFormat(inputParam.userInfo, response[1].data.ExpiryDate),\r\n                                        selectedCopyProfileName: inputParam.selectedNode.sleveldescription,\r\n                                        selectedCopyNodeManipulationCode: inputParam.selectedNode.ntemplatemanipulationcode,\r\n                                        CopyFocusKey: masterData.FocusKey,\r\n                                        CopyActiveKey: masterData.ActiveKey,\r\n                                        scopyspecname: inputParam.selectedNode.sleveldescription,\r\n                                        //ncomponentrequired: inputParam.selectedNode.nsampletypecode === SampleType.CLINICALTYPE ? transactionStatus.YES : transactionStatus.NO,\r\n                                       // ncomponentrequired: transactionStatus.YES,\r\n                                        // ncomponentrequired :inputParam.selectedRecord.nproductcatcode.item.nmaterialtypecode == MaterialType.IQCSTANDARDMATERIALTYPE ?transactionStatus.NO:transactionStatus.YES,\r\n                                        ncomponentrequired : inputParam.selectedRecord.nsampletypecode && inputParam.selectedRecord.nsampletypecode.item.ncomponentrequired ? inputParam.selectedRecord.nsampletypecode.item.ncomponentrequired : transactionStatus.YES,\r\n                                        // nclinicalspec: inputParam.selectedNode.nsampletypecode===SampleType.CLINICALTYPE?transactionStatus.YES:transactionStatus.NO,\r\n                                        ntransactionstatus: transactionStatus.ACTIVE,\r\n                                        ntzexpirydate: {\r\n                                            \"label\": inputParam.userInfo.stimezoneid,\r\n                                            \"value\": inputParam.userInfo.ntimezonecode\r\n                                        }\r\n                                    };\r\n                                }\r\n                                dispatch({\r\n                                    type: DEFAULT_RETURN,\r\n                                    payload: {\r\n                                        openModal: true,\r\n                                        operation: operation,\r\n                                        screenName: \"IDS_SPECIFICATION\",\r\n                                        masterData,\r\n                                        selectedRecord,\r\n                                        timeZoneList: constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", false, false, true).get(\"OptionList\"),\r\n                                        ncontrolCode\r\n                                    }\r\n                                });\r\n                            })\r\n                            .catch(error => {\r\n                                if (error.response.status === 500) {\r\n                                    toast.error(error.message);\r\n                                } else {\r\n                                    toast.warn(error.response.data);\r\n                                }\r\n                            })\r\n                    }\r\n                } else {\r\n                    if (operation === \"copy\") {\r\n                        toast.warn(intl.formatMessage({ id: \"IDS_SELECTSPECIFICATION\" }));\r\n                    }\r\n                    else {\r\n                        toast.warn(intl.formatMessage({ id: \"IDS_SELECTLASTLEVELNODETOADDSPEC\" }));\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_STUDYPLANTEMPLATEISNOTAVAILABLE\" }));\r\n        }\r\n    }\r\n}\r\n\r\nexport const addComponent = (SelectedSpecification, userInfo, ncontrolCode, masterData,genericLabel) => {\r\n    return (dispatch) => {\r\n\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            rsapi.post(\"/testgroup/getAvailableComponent\", {\r\n                userinfo: userInfo,\r\n                testgroupspecification: {...SelectedSpecification,nprojectmastercode:masterData[\"selectedNode\"][\"nprojectmastercode\"],\r\n                nclinicaltyperequired:masterData.nsampletypecode.item.nclinicaltyperequired}\r\n            })\r\n                .then(response => {\r\n                    const testGroupSpecSampleType = response.data[\"TestGroupSpecSampleType\"] || [];\r\n                    if (testGroupSpecSampleType.length > 0) {\r\n                        const testCategory = constructOptionList(response.data[\"TestCategory\"] || [], \"ntestcategorycode\", \"stestcategoryname\", 'ntestcategorycode', 'ascending', false);\r\n                        const sampleTypeMap = constructOptionList(testGroupSpecSampleType, \"ncomponentcode\", \"scomponentname\", false, false, true);\r\n                        // const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openModal: true,\r\n                                operation: \"create\",\r\n                                screenName:genericLabel[\"Component\"][\"jsondata\"][\"sdisplayname\"][userInfo.slanguagetypecode],\r\n                                testGroupInputData: {\r\n                                    TestCategory: testCategory.get(\"OptionList\"),\r\n                                    TestGroupSpecSampleType: sampleTypeMap.get(\"OptionList\"),\r\n                                    TestGroupTest: response.data[\"TestGroupTest\"] || [] //TestGroupTestMap.get(\"OptionList\"),\r\n                                },\r\n                                selectedRecord: {\r\n                                    ncomponentcode: sampleTypeMap.get(\"DefaultValue\"),\r\n                                    ntestcategorycode: testCategory.get(\"DefaultValue\") ? testCategory.get(\"DefaultValue\") : testCategory.get(\"OptionList\")[0]\r\n                                },\r\n                                ncontrolCode\r\n                            }\r\n                        });\r\n                    } else {\r\n                        toast.warn(\r\n                             genericLabel[\"Component\"][\"jsondata\"][\"sdisplayname\"][userInfo.slanguagetypecode]+\" \"+intl.formatMessage({ id: \"IDS_NOTAVAILABLE\" })\r\n                        );\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\nexport const addTestGroupTest = (selectedComponent, userInfo, ncontrolCode, selectedSpecification, filterData, masterData) => {\r\n    return dispatch => {\r\n        if (masterData.selectedNode !== undefined && masterData.selectedNode !== null) {\r\n            const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n                x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n            const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n            if (templateVersionStatus === transactionStatus.RETIRED) {\r\n                toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n            }\r\n            else {\r\n                if (selectedSpecification) {\r\n                    if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                        selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n\r\n                        let openTestModal = false;\r\n                        if (selectedSpecification.ncomponentrequired === transactionStatus.YES) {\r\n                            if (selectedComponent == undefined) {\r\n                                toast.warn(intl.formatMessage({\r\n                                    id: \"IDS_NEEDCOMPONENTTOADDTEST\"\r\n                                }));\r\n                            } else {\r\n                                openTestModal = true;\r\n                            }\r\n                        } else {\r\n                            openTestModal = true;\r\n                        }\r\n\r\n                        if (openTestModal === true) {\r\n                            rsapi.post(\"/testgroup/getAvailableTest\", {\r\n                                userinfo: userInfo,\r\n                                testgroupspecsampletype: selectedComponent,\r\n                                ntreeversiontempcode: filterData.ntreeversiontempcode.value,\r\n                                nprojectmastercode: masterData.selectedNode.nprojectmastercode,\r\n                                nclinicaltyperequired:filterData.nsampletypecode && filterData.nsampletypecode.item.nclinicaltyperequired\r\n                            })\r\n                                .then(response => {\r\n                                    let testCategory;\r\n                                    // = constructOptionList(response.data[\"TestCategory\"], \"ntestcategorycode\", \"stestcategoryname\", \"ntestcategorycode\", \"ascending\", false);\r\n                                    // const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\r\n                                    if (response.data[\"TestCategory\"].length > 0) {\r\n                                        testCategory = constructOptionList(response.data[\"TestCategory\"], \"ntestcategorycode\", \"stestcategoryname\", \"ntestcategorycode\", \"ascending\", false);\r\n                                        dispatch({\r\n                                            type: DEFAULT_RETURN,\r\n                                            payload: {\r\n                                                openModal: true,\r\n                                                operation: \"create\",\r\n                                                screenName: \"IDS_TEST\",\r\n                                                testGroupInputData: {\r\n                                                    TestCategory: testCategory.get(\"OptionList\"),\r\n                                                    TestGroupTest: response.data[\"TestGroupTest\"] || [] //TestGroupTestMap.get(\"OptionList\"),\r\n                                                },\r\n                                                selectedRecord: {\r\n                                                    ntestcategorycode: {\r\n                                                        label: response.data[\"SelectedTestCategory\"].stestcategoryname,\r\n                                                        value: response.data[\"SelectedTestCategory\"].stestcategorycode,\r\n                                                        item: response.data[\"SelectedTestCategory\"]\r\n                                                    }\r\n                                                    //ntestcategorycode: testCategory.get(\"DefaultValue\") ? testCategory.get(\"DefaultValue\") : testCategory.get(\"OptionList\")[0]\r\n                                                },\r\n                                                ncontrolCode\r\n                                            }\r\n                                        });\r\n                                    } else {\r\n                                        toast.warn(intl.formatMessage({\r\n                                            id: \"IDS_TESTCATEGORYNOTAVAILABLE\"\r\n                                        }))\r\n                                    }\r\n                                })\r\n                                .catch(error => {\r\n                                    if (error.response.status === 409 || error.response.status === 417) {\r\n                                        toast.warn(error.response.data);\r\n                                    } else {\r\n                                        toast.error(error.message);\r\n                                    }\r\n                                });\r\n                        }\r\n\r\n\r\n                    } else {\r\n                        toast.warn(intl.formatMessage({\r\n                            id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                        }));\r\n                    }\r\n\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: \"IDS_SELECTSPECIFICATION\"\r\n                    }));\r\n                }\r\n            }\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTSPECIFICATION\"\r\n            }));\r\n        }\r\n    }\r\n}\r\n\r\nexport const editTestGroupTest = (operation, selectedTest, userInfo, ncontrolCode, selectedSpecification, filterData, masterData) => {\r\n    return dispatch => {\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                const ntestcode = selectedTest.ntestcode;\r\n                const urlArray = [\r\n                    rsapi.post(\"/testgroup/getActiveTestById\", {\r\n                        userinfo: userInfo,\r\n                        testgrouptest: selectedTest,\r\n                        ntreeversiontempcode: filterData.ntreeversiontempcode.value,\r\n                        nprojectmastercode:masterData[\"selectedNode\"][\"nprojectmastercode\"] ? masterData[\"selectedNode\"][\"nprojectmastercode\"]  :-1                  \r\n                    }),\r\n                    // rsapi.post(\"/source/getSource\", {\r\n                    //     userinfo: userInfo\r\n                    // }),\r\n                    rsapi.post(\"/testmaster/getSection\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"/testmaster/getMethod\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"/testmaster/getInstrumentCategory\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"/testmaster/getTestAttachment\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"/testmaster/getContainerType\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    }),\r\n\t\t\t//ALPD-3418\r\n                    rsapi.post(\"/testmaster/getTestPackage\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    })\r\n                ]\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        // const editObject = response[0].data.TestGroupTest;\r\n                        // const testFileItem = response[0].data.TestGroupTestFile;\r\n                        // const SelectedTest = response[0].data.TestGroupTest;\r\n\r\n                        const editObject = response[0].data.SelectedTestGroupTest;\r\n                        const testFileItem = response[0].data.TestGroupTestFile;\r\n                        const SelectedTest = response[0].data.SelectedTest;\r\n                        //const TestGroupTest = response[0].data.TestGroupTest;\r\n\r\n                        const selectedRecord = {\r\n                            ...editObject,\r\n                            // nsourcecode: {\r\n                            //     \"label\": editObject.ssourcename,\r\n                            //     \"value\": editObject.nsourcecode\r\n                            // },\r\n                            nsectioncode: {\r\n                                \"label\": editObject.ssectionname,\r\n                                \"value\": editObject.nsectioncode\r\n                            },\r\n                            nmethodcode: {\r\n                                \"label\": editObject.smethodname,\r\n                                \"value\": editObject.nmethodcode\r\n                            },\r\n                            ninstrumentcatcode: {\r\n                                \"label\": editObject.sinstrumentcatname,\r\n                                \"value\": editObject.ninstrumentcatcode\r\n                            },\r\n                            ncontainertypecode: {\r\n                                \"label\": editObject.scontainertype,\r\n                                \"value\": editObject.ncontainertypecode\r\n                            },\r\n                            ntestpackagecode: {\r\n                                \"label\": editObject.stestpackagename,\r\n                                \"value\": editObject.ntestpackagecode\r\n                            }\r\n                        };\r\n                        if (testFileItem) {\r\n                            selectedRecord[\"ntestfilecode\"] = {\r\n                                \"label\": testFileItem.sfilename,\r\n                                \"value\": testFileItem.ntestgroupfilecode,\r\n                                item: testFileItem\r\n                            };\r\n                            selectedRecord[\"ntestgroupfilecode\"] = testFileItem.ntestgroupfilecode\r\n                        }\r\n                        if (editObject.nmethodcode !== -1) {\r\n                            selectedRecord[\"nmethodcode\"] = {\r\n                                \"label\": editObject.smethodname,\r\n                                \"value\": editObject.nmethodcode\r\n                            }\r\n                        } else {\r\n                            selectedRecord[\"nmethodcode\"] = undefined;\r\n                        }\r\n                        if (editObject.ninstrumentcatcode !== -1) {\r\n                            selectedRecord[\"ninstrumentcatcode\"] = {\r\n                                \"label\": editObject.sinstrumentcatname,\r\n                                \"value\": editObject.ninstrumentcatcode\r\n                            }\r\n                        } else {\r\n                            selectedRecord[\"ninstrumentcatcode\"] = undefined;\r\n                        }\r\n                        if (editObject.ncontainertypecode !== -1) {\r\n                            selectedRecord[\"ncontainertypecode\"] = {\r\n                                \"label\": editObject.scontainertype,\r\n                                \"value\": editObject.ncontainertypecode\r\n                            }\r\n                        } else {\r\n                            selectedRecord[\"ncontainertypecode\"] = undefined;\r\n                        }\r\n\t\t\t\t\t\t\t//ALPD-3418\r\n                        if (editObject.ntestpackagecode !== -1) {\r\n                            selectedRecord[\"ntestpackagecode\"]= {\r\n                                \"label\": editObject.stestpackagename,\r\n                                \"value\": editObject.ntestpackagecode\r\n                            }\r\n                        }\r\n                        else {\r\n                            selectedRecord[\"ntestpackagecode\"] = undefined;\r\n                        }\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    ...response[0].data,\r\n                                    SelectedTest: SelectedTest,\r\n                                    //TestGroupTest : [TestGroupTest]\r\n                                },\r\n                                openModal: true,\r\n                                operation: operation,\r\n                                screenName: \"IDS_EDITTESTGROUPTEST\",\r\n                                testGroupInputData: {\r\n                                    // source: constructOptionList(response[1].data || [], \"nsourcecode\", \"ssourcename\", false, false, true).get(\"OptionList\"),\r\n                                    section: constructOptionList(response[1].data || [], \"nsectioncode\", \"ssectionname\", false, false, true).get(\"OptionList\"),\r\n                                    method: constructOptionList(response[2].data || [], \"nmethodcode\", \"smethodname\", false, false, true).get(\"OptionList\"),\r\n                                    instrumentCategory: constructOptionList(response[3].data || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", false, false, true).get(\"OptionList\"),\r\n                                    containerType: constructOptionList(response[5].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true).get(\"OptionList\"),\r\n                                    testFile: constructOptionList(response[4].data || [], \"ntestfilecode\", \"sfilename\", false, false, true).get(\"OptionList\"),\r\n                                    testpackage:constructOptionList(response[6].data || [], \"ntestpackagecode\", \"stestpackagename\", false, false, true).get(\"OptionList\")\r\n                                },\r\n                                selectedRecord,\r\n                                ncontrolCode\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        //console.log(\"errror:\", error);\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                        if (error.response.status === 409 || error.response.status === 417) {\r\n                            toast.warn(error.response.data);\r\n                        } else {\r\n                            toast.error(error.message)\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const editTestGroupParameter = (operation, selectedParameter, userInfo, ncontrolCode, selectedSpecification, filterData, masterData) => {\r\n    return dispatch => {\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                dispatch(initRequest(true));\r\n                const urlArray = [\r\n                    rsapi.post(\"/testgroup/getActiveParameterById\", {\r\n                        userinfo: userInfo,\r\n                        testgrouptestparameter: {...selectedParameter,nprojectmastercode:masterData[\"selectedNode\"][\"nprojectmastercode\"]},\r\n                        ntreeversiontempcode: filterData.ntreeversiontempcode.value\r\n                    }),\r\n                    rsapi.post(\"/parametertype/getParameterType\", {\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"unit/getUnit\", {\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"grade/getGrade\", {\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"checklist/getApprovedChecklist\", {\r\n                        \"userinfo\": userInfo\r\n                    })\r\n                ]\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        const parameterObject = response[0].data.TestGroupTestParameter[0];\r\n                        const predefinedObject = response[0].data.TestGroupTestPredefinedParameter;\r\n                        const characterObject = response[0].data.TestGroupTestCharParameter;\r\n                        const numericObject = response[0].data.TestGroupTestNumericParameter && response[0].data.TestGroupTestNumericParameter.length > 0 ? response[0].data.TestGroupTestNumericParameter[0] : {};\r\n                        const selectedRecord = {\r\n                            ...parameterObject,\r\n                            nunitcode: {\r\n                                \"label\": parameterObject.sunitname,\r\n                                \"value\": parameterObject.nunitcode\r\n                            },\r\n                            nparametertypecode: {\r\n                                \"label\": parameterObject.sdisplaystatus,\r\n                                \"value\": parameterObject.nparametertypecode\r\n                            },\r\n                            parameterTypeCode: parameterObject.nparametertypecode,\r\n                            nchecklistversioncode: {\r\n                                \"label\": parameterObject.schecklistname,\r\n                                \"value\": parameterObject.nchecklistversioncode\r\n                            },\r\n                            schecklistversionname: parameterObject.schecklistversionname,\r\n                            ntestformulacode: parameterObject.ntestformulacode > 0 ? {\r\n                                \"label\": parameterObject.sformulaname,\r\n                                \"value\": parameterObject.ntestformulacode,\r\n                                item: {\r\n                                    sformulacalculationdetail: parameterObject.sformulaname,\r\n                                    ntestformulacode: parameterObject.ntestformulacode,\r\n                                    sformulacalculationcode: parameterObject.sformulacalculationcode\r\n                                }\r\n                            } : \"\"\r\n                        };\r\n                        if (selectedRecord[\"schecklistname\"] === \"NA\") {\r\n                            delete selectedRecord[\"nchecklistversioncode\"]\r\n                        }\r\n                        if (selectedRecord[\"schecklistversionname\"] === \"NA\") {\r\n                            delete selectedRecord[\"schecklistversionname\"]\r\n                        }\r\n                        if (selectedRecord[\"sunitname\"] === \"NA\") {\r\n                            delete selectedRecord[\"nunitcode\"]\r\n                        }\r\n                        if (characterObject) {\r\n                            selectedRecord[\"scharname\"] = characterObject.scharname;\r\n                            selectedRecord[\"ntestgrouptestcharcode\"] = characterObject.ntestgrouptestcharcode;\r\n                        }\r\n                        if (predefinedObject) {\r\n                            selectedRecord[\"ntestgrouptestpredefcode\"] = predefinedObject.ntestgrouptestpredefcode;\r\n                            selectedRecord[\"spredefinedname\"] = predefinedObject.spredefinedname;\r\n                            selectedRecord[\"ndefaultstatus\"] = predefinedObject.ndefaultstatus;\r\n                            selectedRecord[\"ngradecode\"] = {\r\n                                \"label\": predefinedObject.sdisplaystatus,\r\n                                \"value\": predefinedObject.ngradecode\r\n                            };\r\n                        }\r\n                        if (numericObject) {\r\n                            selectedRecord[\"ntestgrouptestnumericcode\"] = numericObject.ntestgrouptestnumericcode;\r\n                            selectedRecord[\"sminlod\"] = numericObject.sminlod;\r\n                            selectedRecord[\"smaxlod\"] = numericObject.smaxlod;\r\n                            selectedRecord[\"sminb\"] = numericObject.sminb;\r\n                            selectedRecord[\"smina\"] = numericObject.smina;\r\n                            selectedRecord[\"smaxa\"] = numericObject.smaxa;\r\n                            selectedRecord[\"smaxb\"] = numericObject.smaxb;\r\n                            selectedRecord[\"sminloq\"] = numericObject.sminloq;\r\n                            selectedRecord[\"smaxloq\"] = numericObject.smaxloq;\r\n                            selectedRecord[\"sdisregard\"] = numericObject.sdisregard;\r\n                            selectedRecord[\"sresultvalue\"] = numericObject.sresultvalue;\r\n                            selectedRecord[\"ngradecode\"] = {\r\n                                \"label\": numericObject.sgradename,\r\n                                \"value\": numericObject.ngradecode\r\n                            };\r\n                        }\r\n                        const gradeMap = constructOptionList(response[3].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                        const unitMap = constructOptionList(response[2].data || [], \"nunitcode\", \"sunitname\", false, false, true);\r\n                        const grade = gradeMap.get(\"OptionList\");\r\n                        const unit = unitMap.get(\"OptionList\");\r\n                        const disabled = parameterObject.nparametertypecode === parameterType.NUMERIC ? false : true;\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openChildModal: true,\r\n                                operation: operation,\r\n                                screenName: \"IDS_PARAMETER\",\r\n                                testGroupInputData: {\r\n                                    unit,\r\n                                    grade,\r\n                                    testFormula: constructOptionList(response[0].data.TestFormula || [], \"ntestformulacode\", \"sformulaname\", false, false, true).get(\"OptionList\"),\r\n                                    parameterType: constructOptionList(response[1].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true).get(\"OptionList\"),\r\n                                    checkListVersion: constructOptionList(response[4].data || [], \"nchecklistversioncode\", \"schecklistname\", false, false, true).get(\"OptionList\"),\r\n                                    needRoundingDigit: disabled,\r\n                                    needUnit: disabled\r\n                                },\r\n                                parameterData: {\r\n                                    grade,\r\n                                    defaultUnit: unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\",\r\n                                },\r\n                                selectedRecord,\r\n                                ncontrolCode,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        });\r\n                        if (error.response.status === 409 || error.response.status === 417) {\r\n                            toast.warn(error.response.data);\r\n                        } else {\r\n                            toast.error(error.message);\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// export const addTestGroupFormula = (selectedParameter, userInfo, ncontrolCode, optionalData) => {\r\n//     return dispatch => {\r\n//         const testgroupspecification = optionalData.testgroupspecification;\r\n//         if(testgroupspecification.napprovalstatus === transactionStatus.DRAFT || \r\n//             testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n//             dispatch(initRequest(true));\r\n//             rsapi.post(\"/testgroup/getTestGroupFormula\", {userinfo: userInfo, testgrouptestparameter: selectedParameter, testgroupspecification})\r\n//             .then(response=>{\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN, \r\n//                     payload:{\r\n//                         openChildModal: true,\r\n//                         operation: \"create\",\r\n//                         screenName: \"IDS_FORMULA\",\r\n//                         testGroupInputData: {testFormula: response.data},\r\n//                         selectedRecord: {},\r\n//                         ncontrolCode\r\n//                 }});\r\n//             })\r\n//             .catch(error=>{\r\n//                 dispatch({type: DEFAULT_RETURN, payload: {loading:false}});\r\n//                 if(error.response.status === 409 || error.response.status === 417) {\r\n//                     toast.warn(error.response.data);\r\n//                 } else {\r\n//                     toast.error(error.message)\r\n//                 }\r\n//             });\r\n//         } else {\r\n//             toast.warn(intl.formatMessage({id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));\r\n//         }\r\n//     }\r\n// }\r\n\r\nexport const getTestGroupParameter = (inputParam) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/getTestGroupTestParameter\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                sortData(response.data);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputParam.masterData,\r\n                            ...response.data\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getComponentBySpecId = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgroup/\" + inputParam.operation + inputParam.methodUrl, {\r\n            [inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0],\r\n            userinfo: inputParam.userInfo\r\n        })\r\n            .then(response => {\r\n\r\n                sortData(response.data);\r\n                if (searchRef.current) {\r\n                    searchRef.current.value = \"\";\r\n                }\r\n                const historyDataState = {\r\n                    ...inputParam.historyDataState,\r\n                    sort: undefined,\r\n                    filter: undefined\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            searchedData: undefined\r\n                        },\r\n                        historyDataState,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getTestGroupDetails = (inputParam) => {\r\n    return (dispatch) => { //...inputParam, \r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgroup/getTestGroupTest\", {\r\n            ntestgrouptestcode: parseInt(inputParam['ntestgrouptestcode']),\r\n            userinfo: inputParam.userInfo\r\n        })\r\n            // rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \r\n            //     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\r\n            .then(response => {\r\n                    sortData(response.data);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputParam.masterData,\r\n                            ...response.data\r\n                        },\r\n                        testskip: undefined,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getTestGroupComponentDetails = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => { //...inputParam, \r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgroup/getTestByComponentId\", {\r\n            testgroupspecsampletype: inputParam['testgroupspecsampletype'],\r\n            userinfo: inputParam.userInfo\r\n        })\r\n            // rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \r\n            //     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\r\n            .then(response => {\r\n                sortData(response.data);\r\n                if (searchRef.current)\r\n                    searchRef.current.value = \"\";\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            searchedData: undefined\r\n                        },\r\n                        testskip: 0,\r\n                        testtake: 5,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getSpecification = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        if (inputParam.selectedRecord !== null) {\r\n            rsapi.post(\"/testgroup/\" + inputParam.operation + inputParam.methodUrl, {\r\n                ...inputParam,\r\n                [inputParam.keyName]: inputParam.selectedRecord\r\n            })\r\n                .then(response => {\r\n                    sortData(response.data);\r\n                    if (searchRef.current)\r\n                        searchRef.current.value = \"\";\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData: {\r\n                                ...masterData,\r\n                                ActiveKey: inputParam.activeKey,\r\n                                FocusKey: inputParam.focusKey,\r\n                                primaryKey: inputParam.primaryKey,\r\n                                ...response.data,\r\n                                selectedNode: inputParam.selectedRecord,\r\n                                searchedData: undefined,\r\n\r\n                            },\r\n                            historyDataState: {\r\n                                ...inputParam.historyDataState,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            },\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        } else {\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    masterData: {\r\n                        ...masterData,\r\n                        selectedNode: inputParam.selectedRecord,\r\n                        TestGroupSpecification: [],\r\n                        SelectedSpecification: {},\r\n                        TestGroupTest: [],\r\n                        TestGroupTestParameter: [],\r\n                        TestGroupTestNumericParameter: [],\r\n                        TestGroupTestFormula: [],\r\n                        TestGroupTestPredefinedParameter: [],\r\n                        TestGroupTestClinicalSpec: [],\r\n                        TestGroupTestCharParameter: [],\r\n                        ActiveKey: inputParam.activeKey,\r\n                        FocusKey: inputParam.focusKey,\r\n                        SelectedTest: {},\r\n                        selectedParameter: {},\r\n                        TestGroupSpecFile: [],\r\n                        TestGroupSpecificationHistory: [],\r\n                        SelectedComponent: undefined,\r\n                        RulesEngine: []\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport const changeTestCategory = (inputParam, testGroupInputData) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/getTestMasterByCategory\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                sortData(response.data);\r\n                inputParam.selectedRecord.ntestcode = [];\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedRecord: inputParam.selectedRecord,\r\n                        testGroupInputData: {\r\n                            ...testGroupInputData,\r\n                            ...response.data\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getSpecificationDetails = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/get\" + inputParam.methodUrl, {\r\n            ...inputParam.inputData\r\n        })\r\n            .then(response => {\r\n                if (searchRef.current)\r\n                    searchRef.current.value = \"\";\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            searchedData: undefined\r\n                        },\r\n                        screenName: inputParam.screenName\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const editSpecFile = (inputParam) => {\r\n    return (dispatch) => {\r\n        const masterData = inputParam.masterData;\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            if (inputParam.testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                inputParam.testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\r\n                    userinfo: inputParam.userInfo\r\n                }),\r\n                rsapi.post(\"/testgroup/getActiveSpecFileById\", {\r\n                    userinfo: inputParam.userInfo,\r\n                    testgroupspecfile: inputParam.selectedRecord,\r\n                    ntreeversiontempcode: inputParam.filterData.ntreeversiontempcode.value\r\n                })\r\n                ]\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        const linkmaster = response[0].data.LinkMaster;\r\n                        const defaultLink = linkmaster.filter(item => item.ndefaultlink === transactionStatus.YES);\r\n                        const editObject = response[1].data;\r\n                        let nlinkcode = {};\r\n                        let link = {};\r\n                        if (editObject.nattachmenttypecode === attachmentType.LINK) {\r\n                            nlinkcode = {\r\n                                \"label\": editObject.slinkname,\r\n                                \"value\": editObject.nlinkcode\r\n                            }\r\n                            link = {\r\n                                slinkfilename: editObject.sfilename,\r\n                                slinkdescription: editObject.sdescription,\r\n                                nlinkdefaultstatus: editObject.ndefaultstatus,\r\n                                sfilesize: '',\r\n                                nfilesize: 0,\r\n                                ndefaultstatus: 4,\r\n                                sfilename: '',\r\n                            }\r\n\r\n                        } else {\r\n                            nlinkcode = defaultLink.length > 0 ? {\r\n                                \"label\": defaultLink[0].slinkname,\r\n                                \"value\": defaultLink[0].nlinkcode\r\n                            } : \"\"\r\n\r\n                            link = {\r\n                                slinkfilename: '',\r\n                                slinkdescription: '',\r\n                                sdescription: editObject.sdescription,\r\n                                nlinkdefaultstatus: 4,\r\n                                sfilesize: editObject.sfilesize,\r\n                                nfilesize: editObject.nfilesize,\r\n                                ndefaultstatus: editObject.ndefaultstatus,\r\n                                sfilename: editObject.sfilename,\r\n                            }\r\n                        }\r\n                        const selectedRecord = {\r\n                            // ...editObject,\r\n                            ...link,\r\n                            nallotedspeccode: editObject.nallotedspeccode,\r\n                            nspecfilecode: editObject.nspecfilecode,\r\n                            stypename: editObject.stypename,\r\n                            nattachmenttypecode: editObject.nattachmenttypecode,\r\n                            nlinkcode,\r\n                            // disabled: true\r\n                        };\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openModal: true,\r\n                                operation: \"update\",\r\n                                screenName: \"IDS_SPECFILE\",\r\n                                editFiles: Object.values(editObject).length > 0 && editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {},\r\n                                selectedRecord,\r\n                                ncontrolCode: inputParam.ncontrolCode\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        if (error.response.status === 409 || error.response.status === 417) {\r\n                            toast.warn(error.response.data);\r\n                        } else {\r\n                            toast.error(error.message)\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const addTestGroupCodedResult = (operation, paramdata, userInfo, ncontrolCode, optionalData, masterData) => {\r\n    return (dispatch) => {\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            const testgroupspecification = optionalData.testgroupspecification;\r\n            if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                dispatch(initRequest(true));\r\n                const urlArray = [\r\n                    rsapi.post(\"grade/getGrade\", {\r\n                        \"userinfo\": userInfo\r\n                    })\r\n                ];\r\n                if (operation === \"update\") {\r\n                    urlArray.push(rsapi.post(\"testgroup/getActivePredefinedParameterById\", {\r\n                        testgrouptestpredefinedparameter: paramdata,\r\n                        \"userinfo\": userInfo,\r\n                        testgroupspecification\r\n                    }));\r\n\r\n                    urlArray.push(rsapi.post(\"testgroup/getActivePredefinedParameterSubCodedById\", {\r\n                        testgrouptestpredefinedparameter: paramdata,\r\n                        \"userinfo\": userInfo,\r\n                        testgroupspecification\r\n                    }));\r\n                }\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        let selectedRecord = {};\r\n                        let selectedsubcodedresult = [];\r\n                        let selectsubcodedelete = [];\r\n                        const gradeMap = constructOptionList(response[0].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                        const grade = gradeMap.get(\"OptionList\");\r\n                        if (operation === \"update\") {\r\n                            const editCodedResult = response[1].data;\r\n                            selectedRecord = {\r\n                                ntestgrouptestpredefcode: paramdata[\"ntestgrouptestpredefcode\"],\r\n                                ntestgrouptestparametercode: paramdata[\"ntestgrouptestparametercode\"],\r\n                                ngradecode: {\r\n                                    \"label\": editCodedResult[\"sdisplaystatus\"],\r\n                                    \"value\": editCodedResult[\"ngradecode\"]\r\n                                },\r\n                                spredefinedname: editCodedResult[\"spredefinedname\"],\r\n                                //sresultparacomment: editCodedResult[\"sresultparacomment\"],\r\n                                spredefinedsynonym: editCodedResult[\"spredefinedsynonym\"],\r\n                                spredefinedcomments: editCodedResult[\"spredefinedcomments\"],\r\n                                nneedresultentryalert: editCodedResult[\"nneedresultentryalert\"],\r\n                                nneedsubcodedresult: editCodedResult[\"nneedsubcodedresult\"],\r\n                                salertmessage: editCodedResult[\"salertmessage\"]\r\n                            }\r\n\r\n                            selectedsubcodedresult = response[2].data;\r\n                        } else {\r\n                            selectedRecord = {\r\n                                ngradecode: gradeMap.get(\"DefaultValue\"),\r\n                                nneedresultentryalert: 4,\r\n                                nneedsubcodedresult: 4\r\n                                // {\r\n                                //     \"value\": grade[0].ngradecode,\r\n                                //     \"label\": grade[0][\"sdisplaystatus\"]\r\n                                // }\r\n                            }\r\n\r\n                        }\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openChildModal: true,\r\n                                showSaveContinue: false,\r\n                                operation: operation,\r\n                                screenName: \"IDS_CODEDRESULT\",\r\n                                parameterData: {\r\n                                    grade,\r\n                                    needCodedResult: false\r\n                                },\r\n                                selectedRecord,\r\n                                ncontrolCode,\r\n                                loading: false,\r\n                                selectedsubcodedresult,\r\n                                selectsubcodedelete\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        });\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const subCodedResultView = (operation, paramdata, userInfo, ncontrolCode, optionalData, masterData) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"testgroup/getActivePredefinedParameterSubCoded\", {\r\n            testgrouptestpredefinedparameter: paramdata,\r\n            \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n                let selectedsubcoderesult = [];\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n\r\n                    payload: {\r\n                        openModal: true,\r\n                        operation: \"View\",\r\n                        screenName: \"IDS_SUBCODERESULT\",\r\n                        selectedsubcoderesult: response.data,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            selectedsubcoderesult: response.data,\r\n                            searchedData: undefined,\r\n                        },\r\n                        //screenName: inputParam.screenName\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const addTestGroupNumericTab = (operation, paramdata, userInfo, optionalData, masterData, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            const testgroupspecification = optionalData.testgroupspecification;\r\n            if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                dispatch(initRequest(true));\r\n                const urlArray = [\r\n                    rsapi.post(\"patient/getGender\", {\r\n                        \"userinfo\": userInfo\r\n                    }),\r\n                    rsapi.post(\"grade/getGrade\", {\r\n                        userinfo: userInfo\r\n                    }),\r\n                ];\r\n                if (operation === \"update\") {\r\n                    urlArray.push(rsapi.post(\"testgroup/getActiveClinicalSpecById\", {\r\n                        testgrouptestpredefinedparameter: paramdata,\r\n                        \"userinfo\": userInfo,\r\n                        testgroupspecification\r\n                    }));\r\n                }\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        let selectedRecord = {};\r\n                        const gradeMap = constructOptionList(response[0].data.genderList || [], \"ngendercode\", \"sgendername\", false, false, true);\r\n                        const gender = gradeMap.get(\"OptionList\");                       \r\n                        const gradeNewMap = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);                        \r\n                        const grade = gradeNewMap.get(\"OptionList\");\r\n                        sortData(grade || [], \"ascending\", \"value\")\r\n                        if (operation === \"update\") {\r\n                            const editCodedResult = response[2].data;\r\n                            selectedRecord = {\r\n                                ntestgrouptestclinicspeccode: paramdata[\"ntestgrouptestclinicspeccode\"],\r\n                                ntestgrouptestparametercode: paramdata[\"ntestgrouptestparametercode\"],\r\n                                nfromage: paramdata[\"nfromage\"],\r\n                                ntoage: paramdata[\"ntoage\"],\r\n                                ngradecode: getComboLabelValue(editCodedResult, response[1].data, \r\n                                    \"ngradecode\", \"sgradename\"),\r\n                                ngendercode: {\r\n                                    \"label\": editCodedResult[\"sgendername\"],\r\n                                    \"value\": editCodedResult[\"ngendercode\"]\r\n                                },\r\n                                // ngradecode: {\r\n                                //     \"label\": editCodedResult[\"sgradename\"],\r\n                                //     \"value\": editCodedResult[\"ngradecode\"]\r\n                                // },\r\n                                nhigha: editCodedResult[\"shigha\"]==='null'?'':editCodedResult[\"shigha\"],\r\n                                nhighb: editCodedResult[\"shighb\"]==='null'?'':editCodedResult[\"shighb\"],\r\n                                nlowa: editCodedResult[\"slowa\"]==='null'?'':editCodedResult[\"slowa\"],\r\n                                nlowb: editCodedResult[\"slowb\"]==='null'?'':editCodedResult[\"slowb\"],\r\n                                sminlod: editCodedResult[\"sminlod\"] ==='null'?'':editCodedResult[\"sminlod\"],\r\n                                smaxlod: editCodedResult[\"smaxlod\"] ==='null'?'':editCodedResult[\"smaxlod\"],\r\n                                sminloq: editCodedResult[\"sminloq\"] ==='null'?'':editCodedResult[\"sminloq\"],\r\n                                smaxloq: editCodedResult[\"smaxloq\"] ==='null'?'':editCodedResult[\"smaxloq\"],\r\n                                sdisregard: editCodedResult[\"sdisregard\"] ==='null'?'':editCodedResult[\"sdisregard\"],\r\n                                sresultvalue: editCodedResult[\"sresultvalue\"]==='null'?'':editCodedResult[\"sresultvalue\"]\r\n\r\n                            }\r\n                        } else {\r\n                            selectedRecord = {\r\n                                ngendercode: gradeMap.get(\"DefaultValue\")\r\n                                // {\r\n                                //     \"value\": grade[0].ngradecode,\r\n                                //     \"label\": grade[0][\"sdisplaystatus\"]\r\n                                // }\r\n                            }\r\n                        }\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openChildModal: true,\r\n                                showSaveContinue: false,\r\n                                operation: operation,\r\n                                screenName: \"IDS_CLINICALSPEC\",\r\n                                parameterData: {\r\n                                    gender,grade,\r\n                                    needCodedResult: false\r\n                                },\r\n                                selectedRecord,\r\n                                ncontrolCode,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        });\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const viewTestGroupCheckList = (inputParam, userInfo) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"checklist/viewTemplate\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openTemplateModal: true,\r\n                        testGroupCheckList: {\r\n                            templateData: response.data\r\n                        },\r\n                        loading: false,\r\n                        selectedRecord: {}\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport const reportSpecification = (inputParam) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testgroup/specReportGenerate\", {\r\n            ...inputParam,\r\n            ntreeversiontempcode: inputParam.filterData.ntreeversiontempcode.value\r\n        })\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        openModal: false,\r\n                        showConfirmAlert: false\r\n                    }\r\n                })\r\n                document.getElementById(\"download_data\").setAttribute(\"href\", response.data.filepath);\r\n                document.getElementById(\"download_data\").click();\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport const retireSpecification = (inputParam, masterData) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testgroup/retireSpec\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n\r\n                // const TestGroupSpecification = response.data.TestGroupSpecificationHistory ;\r\n                sortData(response.data);\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                })\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport const getDataForTestMaterial = (screenName, operation, userInfo, ncontrolCode, selectedRecord, masterData, primaryKeyName) => {\r\n    return function (dispatch) {\r\n        if (masterData.selectedNode !== undefined && masterData.selectedNode !== null && masterData.SelectedSpecification !== null) {\r\n            const testgroupspecification = masterData.SelectedSpecification;\r\n            if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                let urlArray = [];\r\n                const materialTypeUrl = rsapi.post(\"materialcategory/getMaterialType\", { \"userinfo\": userInfo });\r\n                const validationUrl = rsapi.post(\"testgroup/validationForRetiredTemplate\", { \"userinfo\": userInfo, ntreeversiontempcode: masterData.selectedNode.ntreeversiontempcode});\r\n\r\n                urlArray = [materialTypeUrl, validationUrl];\r\n\r\n                dispatch(initRequest(true));\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        console.log(ncontrolCode)\r\n                        if (masterData.SelectedTest && masterData.SelectedTest !== undefined) {\r\n\r\n                            if (response[1].data === \"Success\") {\r\n\r\n                                const materialTypeMap = constructOptionList(response[0].data || [], \"nmaterialtypecode\",\r\n                                    \"smaterialtypename\", undefined, undefined, false);\r\n\r\n                                const materialType = materialTypeMap.get(\"OptionList\");\r\n                                const materialTypedefault = materialTypeMap.get(\"DefaultValue\");\r\n\r\n                                selectedRecord[\"nmaterialtypecode\"] = materialTypedefault;\r\n                                if (selectedRecord[\"nmaterialtypecode\"] !== undefined) {\r\n                                    let inputData = []\r\n                                    let inputParam = { operation: operation, selectedRecord: selectedRecord, materialType: materialType, inputData: { nmaterialtypecode: materialTypedefault.value }, materialType: materialType, masterData: masterData, screenName: screenName, ncontrolCode }\r\n                                    dispatch(getMaterialCategoryBasedMaterialType(inputParam));\r\n\r\n                                } else {\r\n                                    dispatch({\r\n                                        type: DEFAULT_RETURN,\r\n                                        payload: {\r\n                                            materialType: materialType,\r\n                                            materialList: undefined,\r\n                                            materialCategoryList: undefined,\r\n                                            isOpen: true,\r\n                                            operation: operation,\r\n                                            screenName: screenName,\r\n                                            openChildModal: true,\r\n                                            ncontrolCode: ncontrolCode,\r\n                                            loading: false,\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                            else {\r\n                                toast.warn(intl.formatMessage({\r\n                                    id: response[1].data\r\n                                }));\r\n                                dispatch({\r\n                                    type: DEFAULT_RETURN,\r\n                                    payload: {\r\n                                        operation: operation,\r\n                                        screenName: screenName,\r\n                                        ncontrolCode: ncontrolCode,\r\n                                        loading: false\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        }\r\n                        else {\r\n\r\n                            toast.warn(intl.formatMessage({\r\n                                id: \"IDS_NEEDTOADDTEST\"\r\n                            }));\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    operation: operation,\r\n                                    screenName: screenName,\r\n                                    ncontrolCode: ncontrolCode,\r\n                                    loading: false\r\n                                }\r\n                            });\r\n\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(intl.formatMessage({\r\n                                id: error.message\r\n                            }));\r\n                        } else {\r\n                            toast.warn(intl.formatMessage({\r\n                                id: error.response.data\r\n                            }));\r\n                        }\r\n                    })\r\n\r\n\r\n            }\r\n            else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTSPECIFICATION\"\r\n            }));\r\n        }\r\n    }\r\n}\r\nexport function getMaterialCategoryBasedMaterialType(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"material/getMaterialcombo\", { nmaterialtypecode: inputParam.inputData.nmaterialtypecode })\r\n            .then(response => {\r\n                let selectedRecord = {}\r\n                selectedRecord = inputParam.selectedRecord\r\n\r\n                const materialCategoryMap = constructOptionList(response.data.MaterialCategoryMain || [], \"nmaterialcatcode\",\r\n                    \"smaterialcatname\", undefined, undefined, false);\r\n\r\n                const materialCategoryList = materialCategoryMap.get(\"OptionList\");\r\n                const materialCategorydefault = materialCategoryMap.get(\"DefaultValue\");\r\n                selectedRecord['nmaterialcatcode'] = materialCategorydefault;\r\n                let masterData = { ...inputParam.masterData, ...response.data }\r\n                if (response.data.MaterialCategoryMain.length === 0) {\r\n                    if (selectedRecord['nmaterialcatcode']) {\r\n                        delete selectedRecord['nmaterialcatcode']\r\n\r\n                    }\r\n                    if (selectedRecord['nmaterialcode']) {\r\n                        delete selectedRecord['nmaterialcode']\r\n\r\n                    }\r\n                }\r\n                let materialList = []\r\n                if (materialCategoryList.length !== 0) {\r\n                    materialList = materialList\r\n                    inputParam = {\r\n                        ...inputParam, responsecat: response, materialCategoryList: materialCategoryList, selectedRecord: selectedRecord,\r\n                        inputData: {\r\n                            //nmaterialcatcode: materialCategorydefault.value,\r\n                            nmaterialtypecode: inputParam.inputData.nmaterialtypecode\r\n                        }\r\n                    }\r\n                    dispatch(getMaterialBasedMaterialCategory(inputParam));\r\n                }\r\n\r\n                else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            openChildModal: true,\r\n                            screenName: inputParam.screenName,\r\n                            masterData, loading: false,\r\n                            materialCategoryList: materialCategoryList,\r\n                            materialType: inputParam.materialType,\r\n                            materialList: materialList,\r\n                            selectedRecord: selectedRecord,\r\n                            operation: inputParam.operation,\r\n                            ncontrolCode: inputParam.ncontrolCode\r\n                        }\r\n                    });\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getMaterialBasedMaterialCategory(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"testgroup/getAvailableMaterial\", {\r\n            nmaterialtypecode: inputParam.inputData.nmaterialtypecode, nmaterialcatcode: inputParam.inputData.nmaterialcatcode !== undefined\r\n                ? inputParam.inputData.nmaterialcatcode : inputParam.responsecat.data.MaterialCategoryMain[0].nmaterialcatcode,\r\n            ntestgrouptestcode: inputParam.masterData.SelectedTest.ntestgrouptestcode\r\n        })\r\n            .then(response => {\r\n\r\n                let selectedRecord = inputParam.selectedRecord;\r\n\r\n                const materialMap = constructjsonOptionList(response.data.MaterialCombo || [], \"nmaterialcode\",\r\n                    \"Material Name\", undefined, undefined, false);\r\n\r\n                const materialList = materialMap.get(\"OptionList\");\r\n\r\n                if (response.data.MaterialCombo.length === 0) {\r\n                    delete selectedRecord['nmaterialcode']\r\n                }\r\n                let masterData = { ...inputParam.masterData, ...response.data }\r\n                if (inputParam.materialCategoryList) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            materialCategoryList: inputParam.materialCategoryList,\r\n                            masterData, loading: false,\r\n                            materialList: materialList,\r\n                            openChildModal: true,\r\n                            screenName: inputParam.screenName,\r\n                            selectedRecord: inputParam.selectedRecord,\r\n                            materialType: inputParam.materialType,\r\n                            operation: inputParam.operation,\r\n                            ncontrolCode: inputParam.ncontrolCode\r\n\r\n\r\n\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData, loading: false,\r\n                            materialList: materialList,\r\n                            openChildModal: true,\r\n\r\n\r\n                        }\r\n                    });\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport const getTestGroupMaterial = (inputParam) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/getTestGroupTestMaterial\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                sortData(response.data);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputParam.masterData,\r\n                            ...response.data\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport const getDataForEditTestMaterial = (screenName, operation, userInfo, ncontrolCode, selectedRecord, Data, primaryKeyName) => {\r\n    return function (dispatch) {\r\n\r\n        const testgroupspecification = Data.SelectedSpecification;\r\n        if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n            testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n\r\n\r\n            let urlArray = [];\r\n            const materialTypeUrl = rsapi.post(\"materialcategory/getMaterialType\", { \"userinfo\": userInfo });\r\n            const materialCatUrl = rsapi.post(\"material/getMaterialcombo\", { nmaterialtypecode: Data.selectedMaterial.nmaterialtypecode });\r\n            const materialUrl = rsapi.post(\"testgroup/getAvailableMaterial\", {\r\n                nmaterialcatcode: Data.selectedMaterial.nmaterialcatcode, nmaterialtypecode: Data.selectedMaterial.nmaterialtypecode,\r\n                ntestgrouptestcode: Data.SelectedTest.ntestgrouptestcode\r\n            });\r\n            const materialById = rsapi.post(\"testgroup/getActiveTestMaterialById\", {\r\n                [primaryKeyName]: Data.selectedMaterial.ntestgrouptestmaterialcode, \"userinfo\": userInfo\r\n            });\r\n            const validationUrl = rsapi.post(\"testgroup/validationForRetiredTemplate\", { \"userinfo\": userInfo, ntreeversiontempcode: Data.selectedNode.ntreeversiontempcode });\r\n\r\n            urlArray = [materialTypeUrl, materialCatUrl, materialUrl, materialById, validationUrl];\r\n\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    if (response[4].data === \"Success\") {\r\n\r\n                        let selectedRecord = {};\r\n                        let MaterialCategoryData = [];\r\n                        let MaterialTypeData = [];\r\n                        let MaterialData = [];\r\n\r\n                        const materialTypeMap = constructOptionList(response[0].data || [], \"nmaterialtypecode\",\r\n                            \"smaterialtypename\", undefined, undefined, false);\r\n\r\n                        const materialType = materialTypeMap.get(\"OptionList\");\r\n\r\n                        const materialCategoryMap = constructOptionList(response[1].data.MaterialCategoryMain || [], \"nmaterialcatcode\",\r\n                            \"smaterialcatname\", undefined, undefined, false);\r\n\r\n                        const materialCategoryList = materialCategoryMap.get(\"OptionList\");\r\n                        const materialMap = constructjsonOptionList(response[2].data.MaterialCombo || [], \"nmaterialcode\",\r\n                            \"Material Name\", undefined, undefined, false);\r\n\r\n                        const materialList = materialMap.get(\"OptionList\");\r\n\r\n                        MaterialCategoryData.push({\r\n                            \"value\": response[3].data[\"nmaterialcatcode\"],\r\n                            \"label\": response[3].data[\"smaterialcatname\"]\r\n                        });\r\n                        MaterialTypeData.push({\r\n                            \"value\": response[3].data[\"nmaterialtypecode\"],\r\n                            \"label\": response[3].data[\"smaterialtypename\"]\r\n                        });\r\n                        MaterialData.push({\r\n                            \"value\": response[3].data[\"nmaterialcode\"],\r\n                            \"label\": response[3].data[\"smaterialname\"]\r\n                        });\r\n\r\n                        selectedRecord = response[3].data;\r\n                        selectedRecord[\"nmaterialcatcode\"] = MaterialCategoryData[0];\r\n                        selectedRecord[\"nmaterialtypecode\"] = MaterialTypeData[0];\r\n                        selectedRecord[\"nmaterialcode\"] = MaterialData[0];\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                materialType: materialType,\r\n                                materialList: materialList,\r\n                                materialCategoryList: materialCategoryList,\r\n                                selectedRecord: selectedRecord,\r\n                                isOpen: true,\r\n                                operation: operation,\r\n                                screenName: screenName,\r\n                                openChildModal: true,\r\n                                ncontrolCode: ncontrolCode,\r\n                                loading: false,\r\n                            }\r\n                        });\r\n                    } else {\r\n                        toast.warn(intl.formatMessage({\r\n                            id: response[4].data\r\n                        }));\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                operation: operation,\r\n                                screenName: screenName,\r\n                                ncontrolCode: ncontrolCode,\r\n                                loading: false\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({\r\n                            id: error.message\r\n                        }));\r\n                    } else {\r\n                        toast.warn(intl.formatMessage({\r\n                            id: error.response.data\r\n                        }));\r\n                    }\r\n                })\r\n\r\n\r\n        }\r\n        else {\r\n            toast.warn(intl.formatMessage({\r\n                                 id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n            }));\r\n        }\r\n    }\r\n}\r\n//To get spec details for copy action --ALPD-4099 ,work done by Dhanushya R I\r\nexport const getSpecDetailsForCopy = (data, key,isProduct,masterDatas,selectedRecord) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgroup/getSpecDetailsForCopy\", {\r\n            nproductcode: data.value, nsampletypecode:masterDatas.selectedNode.nsampletypecode, nproductcatcode:data.item.nproductcatcode,\r\n            nprojectmastercode:masterDatas.selectedNode.nprojectmastercode,ntreeversiontempcode:masterDatas.selectedNode.ntreeversiontempcode,\r\n        })\r\n            .then(response => {\r\n                sortData(response.data);\r\n                 selectedRecord = { ...selectedRecord,\r\n                    CopyFocusKey: response.data.FocusKey,\r\n                     CopyActiveKey: response.data.ActiveKey,\r\n                     selectedCopyNodeManipulationCode: response.data.selectedNode.ntemplatemanipulationcode,\r\n                     selectedCopyProfileName: response.data.selectedNode.sleveldescription,\r\n                     scopyspecname: response.data.selectedNode.sleveldescription\r\n                };\r\n                \r\n                let selectedRecordCopy = {\r\n                    nproductcode: data, nproductcatcode: data, ...response.data ,\r\n                    CopyFocusKey: response.data.FocusKey,\r\n                    CopyActiveKey: response.data.ActiveKey,\r\n                    isCopy:true\r\n                };\r\n                let CopyOpenNodes = response.data.OpenNodes;\r\n                         \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedRecord,\r\n                        masterData: { ...masterDatas, selectedRecordCopy, CopyOpenNodes}, \r\n                        loading: false,\r\n                        testskip: 0,\r\n                        \r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData:masterDatas,\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}