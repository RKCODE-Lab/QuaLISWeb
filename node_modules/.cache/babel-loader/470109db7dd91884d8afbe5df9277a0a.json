{"ast":null,"code":"var _jsxFileName = \"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\branches\\\\SOURCE-512\\\\QuaLISWeb\\\\src\\\\actions\\\\RegistrationAction.js\";\nimport React from 'react';\nimport rsapi from '../rsapi';\nimport Axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { filterRecordBasedOnTwoArrays, sortData, rearrangeDateFormat, convertDateTimetoString, fillRecordBasedOnCheckBoxSelection, getRecordBasedOnPrimaryKeyName, updatedObjectWithNewElement, replaceUpdatedObject, parentChildComboLoad, getSameRecordFromTwoArrays, constructjsonOptionList, constructjsonOptionDefault, childComboLoad, filterRecordBasedOnPrimaryKeyName, reArrangeArrays, childComboLoadForEdit, sortDataByParent, sortDataForDate } from '../components/CommonScript';\nimport { DEFAULT_RETURN } from './LoginTypes';\nimport { intl } from '../components/App';\nimport { initRequest } from './LoginAction';\nimport { //RegistrationSubType, RegistrationType, \nSampleType, checkBoxOperation, orderType, transactionStatus } from '../components/Enumeration';\nimport { crudMaster, postCRUDOrganiseTransSearch } from './ServiceAction'; //import { getTestChildTabDetail } from './index.js'\n\nimport { constructOptionList } from '../components/CommonScript';\nimport { Operators, TextFilter, NumericFilter, // BooleanFilter,\nDateFilter // EnumFilter,\n//  EnumFilterProps,\n} from \"@progress/kendo-react-data-tools\";\nimport { ComboBox } from \"@progress/kendo-react-dropdowns\";\nimport { Utils as QbUtils } from \"@react-awesome-query-builder/ui\";\nimport { leftArrowClass } from '@progress/kendo-react-layout';\nimport { openModal } from './ApprovalConfigAction';\nconst {\n  checkTree,\n  loadTree\n} = QbUtils;\nexport function getSampleTypeChange(Map, masterData, event, labelname) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getRegTypeBySampleType\", Map).then(response => {\n      masterData = { ...masterData,\n        ...response.data,\n        [labelname]: { ...event.item\n        }\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getSubSampleChildTabDetail(inputData) {\n  return function (dispatch) {\n    if (inputData.ntransactionsamplecode.length > 0) {\n      let inputParamData = {\n        ntransactionsamplecode: inputData.ntransactionsamplecode,\n        userinfo: inputData.userinfo,\n        npreregno: inputData.npreregno ? inputData.npreregno : -1\n      };\n      let url = null;\n\n      switch (inputData.activeSubSampleTab) {\n        case \"IDS_SUBSAMPLEATTACHMENTS\":\n          url = \"attachment/getSubSampleAttachment\";\n          break;\n\n        case \"IDS_SUBSAMPLECOMMENTS\":\n          url = \"comments/getSubSampleComment\";\n          break;\n\n        case \"IDS_OUTSOURCEDETAILS\":\n          url = \"registration/getOutsourceDetails\";\n          break;\n\n        default:\n          url = null;\n          break;\n      }\n\n      if (url !== null) {\n        dispatch(initRequest(true));\n        rsapi.post(url, inputParamData).then(response => {\n          let responseData = { ...response.data\n          };\n          responseData = sortData(responseData);\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              masterData: { ...inputData.masterData,\n                ...responseData,\n                selectedSubSample: inputData.selectedSubSample // selectedTestCode: inputData.ntransactiontestcode,\n\n              },\n              loading: false,\n              showFilter: false,\n              activeSubSampleTab: inputData.activeSubSampleTab,\n              screenName: inputData.screenName,\n              activeTestTab: inputData.activeSubSampleTab,\n              screenName: inputData.screenName,\n              selectedId: null,\n              activeTabIndex: inputData.activeTabIndex\n            }\n          });\n        }).catch(error => {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n\n          if (error.response.status === 500) {\n            toast.error(error.message);\n          } else {\n            toast.info(error.response.data);\n          }\n        });\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...inputData.masterData,\n              selectedSample: inputData.selectedSample\n            },\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab\n          }\n        });\n      }\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_PLSSELECTASAMPLE\"\n      }));\n    }\n  };\n}\nexport function getRegTypeChange(Map, masterData, event, labelname) {\n  return function (dispatch) {\n    rsapi.post(\"/registration/getRegSubTypeByRegType\", Map).then(response => {\n      masterData = { ...masterData,\n        ...response.data,\n        [labelname]: { ...event.item\n        }\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getRegSubTypeChange(Map, masterData, event, labelname) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getRegTemplateTypeByRegSubType\", Map).then(response => {\n      masterData = { ...masterData,\n        ...response.data,\n        [labelname]: { ...event.item\n        }\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function onApprovalConfigVersionChange(Map, masterData, event, labelname) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getApprovalConfigBasedTemplateDesign\", Map).then(response => {\n      masterData = { ...masterData,\n        ...response.data,\n        [labelname]: { ...event.item\n        }\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getComponentTestBySpec(Map, selectedRecord, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getComponentTestBySpec\", Map).then(response => {\n      const {\n        Component,\n        Test\n      } = response.data;\n      let slno = Component.length > 0 ? Component[0].slno : -1;\n      let selectedComponent = Component.length > 0 ? Component[0] : undefined;\n      let SelectedTest = [];\n\n      if (Object.keys(Test).length > 0) {\n        SelectedTest = Test[slno];\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Component,\n          Test,\n          SelectedTest,\n          selectedComponent,\n          loading: false,\n          selectedRecord,\n          popUptestDataState: {\n            skip: 0,\n            take: 10\n          }\n        }\n      });\n    }).catch(error => {\n      // console.log(error);\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getTestfromDB(objComponent, LoginProps, nflag) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let component = { ...objComponent\n    };\n    component[\"ncomponentcode\"] = objComponent[\"ncomponentcode\"] ? objComponent[\"ncomponentcode\"].value : -1;\n    component[\"nstoragelocationcode\"] = objComponent[\"nstoragelocationcode\"] ? objComponent[\"nstoragelocationcode\"].value : -1;\n    component[\"nstorageconditioncode\"] = objComponent[\"nstorageconditioncode\"] ? objComponent[\"nstorageconditioncode\"].value : -1;\n    component[\"slno\"] = LoginProps.Component ? Object.keys(LoginProps.Component).length + 1 : 0;\n    component[\"scomponentname\"] = objComponent[\"ncomponentcode\"].label;\n    component[\"sstoragelocationname\"] = objComponent[\"nstoragelocationcode\"] && objComponent[\"nstoragelocationcode\"].label ? objComponent[\"nstoragelocationcode\"].label : \"\";\n    component[\"sstorageconditionname\"] = objComponent[\"nstorageconditioncode\"] && objComponent[\"nstorageconditioncode\"].label ? objComponent[\"nstorageconditioncode\"].label : \"\";\n    component[\"ntzdmanufdate\"] = objComponent[\"ntzdmanufdate\"] ? objComponent[\"ntzdmanufdate\"].value : -1;\n    component[\"ntzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].value : -1;\n    component[\"stzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].label : \"\";\n    component[\"nplasmafilecode\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].value : -1;\n    component[\"splasmafilenumber\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].label : \"\";\n    const dreceiveddate = objComponent[\"dreceiveddate\"];\n    component[\"dreceiveddate\"] = dreceiveddate; //formatInputDate(objComponent[\"dreceiveddate\"], false);\n\n    component[\"sreceiveddate\"] = convertDateTimetoString(dreceiveddate, LoginProps.userInfo); //formatInputDateWithoutT(objComponent[\"dreceiveddate\"], false);//formatDate(objComponent[\"sreceiveddate\"]);\n    // rsapi.post(\"/registration/getTestfromDB\", { \"Component\": component })\n\n    rsapi.post(\"/registration/getTestfromDB\", {\n      nspecsampletypecode: component.nspecsampletypecode,\n      slno: component.slno,\n      nneedsubsample: LoginProps.masterData.RealRegSubTypeValue.nneedsubsample\n    }).then(response => {\n      let TestData = response.data;\n      let slno = component.slno;\n      let SelectedTest = [];\n      let loadComponent = true;\n      let selectComponent = {};\n      let showSaveContinue = true;\n      let SelectedSource = []; // let openChildModal = true;\n\n      let selectedComponent = undefined;\n      let parentPopUpSize = \"lg\"; // selectComponent = objComponent\n\n      if (nflag === 1) {\n        loadComponent = true;\n        objComponent[\"smanuflotno\"] = \"\";\n        objComponent[\"dreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime); //new Date(LoginProps.CurrentTime);\n\n        objComponent[\"sreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime); //new Date(LoginProps.CurrentTime);\n\n        selectComponent = objComponent;\n      } else {\n        loadComponent = false;\n        parentPopUpSize = \"xl\"; // openChildModal = false;\n\n        showSaveContinue = false;\n        selectComponent = undefined;\n      }\n\n      let Test = LoginProps.Test || [];\n      let Component = LoginProps.Component || [];\n      Component.unshift(component);\n      selectedComponent = component;\n      Test[slno] = response.data;\n      SelectedTest = TestData;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Component,\n          Test,\n          SelectedTest,\n          selectComponent,\n          selectedComponent,\n          loadComponent,\n          showSaveContinue,\n          parentPopUpSize,\n          loading: false,\n          SelectedSource\n        }\n      }); // console.log(response.data);\n    }).catch(error => {\n      //   console.log(error);\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function EditComponent(Map, component, userInfo) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", Map);\n    const timezone = rsapi.post(\"timezone/getTimeZone\");\n    urlArray = [ComponentTestBySpec, timezone];\n    Axios.all(urlArray).then(response => {\n      const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n      const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const TimeZoneField = response[1].data;\n      const lstComponent = lstComponentMap.get(\"OptionList\");\n      const timeZoneList = timeZoneListMap.get(\"OptionList\");\n      component[\"ncomponentcode\"] = {\n        label: component.scomponentname,\n        value: component.ncomponentcode\n      };\n      component[\"dreceiveddate\"] = rearrangeDateFormat(userInfo, component[\"sreceiveddate\"]);\n      component[\"scomments\"] = component[\"scomments\"];\n      let ntzdreceivedate = component.ntzdreceivedate;\n\n      if (component.ntzdreceivedate !== null && typeof component.ntzdreceivedate === \"object\") {\n        ntzdreceivedate = component.ntzdreceivedate.value;\n      }\n\n      component[\"ntzdreceivedate\"] = component.ntzdreceivedate ? {\n        \"label\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].stimezoneid,\n        \"value\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].ntimezonecode\n      } : \"\";\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loadComponent: true,\n          childoperation: \"update\",\n          lstComponent,\n          ChildscreenName: \"Component\",\n          openChildModal: false,\n          selectComponent: component,\n          parentPopUpSize: \"lg\",\n          timeZoneList,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function ReloadData(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData\n    }).then(response => {\n      let masterData = { ...inputData.masterData,\n        ...response.data\n      };\n\n      if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\n        inputData.searchSampleRef.current.value = \"\";\n        masterData['searchedSample'] = undefined;\n      }\n\n      if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n        inputData.searchSubSampleRef.current.value = \"\";\n        masterData['searchedSubSample'] = undefined;\n      }\n\n      if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n        inputData.searchTestRef.current.value = \"\"; //masterData['searchedTests'] = undefined\n\n        masterData['searchedTest'] = undefined;\n      } // let selectedFilter = inputData.selectedFilter;\n      // selectedFilter[\"fromdate\"] = \"\";\n      // selectedFilter[\"todate\"] = \"\";\n\n\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          showFilter: false,\n          skip: 0,\n          testskip: 0,\n          take: undefined,\n          testtake: undefined,\n          subsampletake: undefined,\n          subsampleskip: 0,\n          showSample: undefined,\n          regSampleExisted: false // filterColumnActive:false,\n          //selectedFilter\n\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.info(error.response.data);\n      }\n    });\n  };\n}\nexport function getTreeByProduct(Map, selectedRecord, comboData, inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n\n    if (Map.nsampletypecode === SampleType.CLINICALTYPE && Map.nportalrequired === transactionStatus.YES && selectedRecord[\"Order Type\"] && selectedRecord[\"Order Type\"].value == 2) {\n      Map = { ...Map,\n        nordertypecode: selectedRecord[\"Order Type\"].value,\n        nallottedspeccode: selectedRecord[\"Order\"] && selectedRecord[\"Order\"].item.jsondata.nallottedspeccode\n      };\n    } else if (Map.nsampletypecode === SampleType.PRODUCT && selectedRecord[\"Plant Order\"] && selectedRecord[\"Plant Order\"].item && selectedRecord[\"Plant Order\"].item.jsondata) {\n      Map = { ...Map,\n        nallottedspeccode: selectedRecord[\"Plant Order\"] && selectedRecord[\"Plant Order\"].item.jsondata.nallottedspeccode\n      };\n    }\n\n    rsapi.post(\"/registration/getTreeByProduct\", Map).then(response => {\n      let {\n        Specification,\n        AgaramTree,\n        ActiveKey,\n        FocusKey,\n        OpenNodes\n      } = [];\n      const selectedSpec = {};\n\n      if (response.data[\"rtn\"] === true) {\n        Specification = constructOptionList(response.data[\"Specification\"] || [], \"nallottedspeccode\", \"sspecname\", undefined, undefined, true).get(\"OptionList\");\n        AgaramTree = response.data[\"AgaramTree\"];\n        ActiveKey = response.data[\"ActiveKey\"];\n        FocusKey = response.data[\"FocusKey\"];\n        OpenNodes = response.data[\"OpenNodes\"]; //Manufacturer = response.data[\"Manufacturer\"];\n\n        selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\n          \"value\": Specification[0].value,\n          \"label\": Specification[0].label,\n          \"item\": Specification[0].item\n        } : \"\";\n        selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\n        selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\n      }\n\n      selectedRecord = { ...selectedRecord,\n        ...selectedSpec\n      };\n\n      if (Map.nsampletypecode === SampleType.CLINICALTYPE && Map.nportalrequired && Map.nportalrequired === 3 && selectedRecord[\"Order Type\"] && selectedRecord[\"Order Type\"].value === 2 || Map.nsampletypecode === SampleType.PRODUCT && selectedRecord[\"Plant Order\"] && selectedRecord[\"Plant Order\"].item && selectedRecord[\"Plant Order\"].item.jsondata.nallottedspeccode) {\n        let dispatchData = {\n          Specification,\n          selectedRecord,\n          AgaramTree,\n          ActiveKey,\n          FocusKey,\n          OpenNodes,\n          Test: [],\n          SelectedTest: [],\n          loading: false,\n          comboData,\n          ...inputParam,\n          selectedSpec,\n          Component: [],\n          selectComponent: {},\n          selectedComponent: {},\n          subSampleDataGridList: [],\n          \"userInfo\": Map.userInfo // ALPD-3673 VISHAKH\n\n        };\n\n        if (Specification.length > 0) {\n          if (Map.nsampletypecode === SampleType.CLINICALTYPE) {\n            dispatch(autoExternalComponentLoadBasedOnSpec(dispatchData));\n          } else if (Map.nsampletypecode === SampleType.PRODUCT) {\n            dispatch(autoPortalTestLoadBasedOnSpec(dispatchData));\n          }\n        } else {\n          let masterStatus = '';\n\n          if (selectedRecord[\"Order\"] && selectedRecord[\"Order\"].item.jsondata.nallottedspeccode) {\n            masterStatus = intl.formatMessage({\n              id: \"IDS_SELECTEDEXTERNALORDERSPECISRETIRED\"\n            });\n          }\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: { ...dispatchData,\n              masterStatus\n            }\n          });\n        }\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            Specification,\n            selectedRecord,\n            AgaramTree,\n            ActiveKey,\n            FocusKey,\n            OpenNodes,\n            Test: [],\n            SelectedTest: [],\n            loading: false,\n            comboData,\n            ...inputParam,\n            selectedSpec,\n            Component: [],\n            selectComponent: {},\n            selectedComponent: {},\n            subSampleDataGridList: [],\n            addMaster: false,\n            masterIndex: undefined\n          }\n        });\n      }\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport const getNewRegSpecification = (inputParam, masterData) => {\n  return dispatch => {\n    if (inputParam.selectedNode !== null) {\n      dispatch(initRequest(true));\n      rsapi.post(\"/registration/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam,\n        ntreetemplatemanipulationcode: inputParam.selectedNode.ntemplatemanipulationcode\n      }).then(response => {\n        sortData(response.data);\n        let Specification = constructOptionList(response.data || [], \"nallottedspeccode\", \"sspecname\", false, false, true).get(\"OptionList\");\n        let selectedComponent = undefined;\n        inputParam.selectedRecord[\"nallottedspeccode\"] = Specification.length > 0 ? {\n          value: Specification[0].value,\n          label: Specification[0].label,\n          item: Specification[0].item\n        } : \"\";\n        inputParam.selectedRecord[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\n        inputParam.selectedRecord[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            ActiveKey: inputParam.activeKey,\n            FocusKey: inputParam.focusKey,\n            primaryKey: inputParam.primaryKey,\n            Specification: Specification,\n            selectedNode: inputParam.selectedNode,\n            selectedRecord: inputParam.selectedRecord,\n            //  Test: [],\n            selectedComponent,\n            //ALPD-1793_fix\n            // SelectedTest: [],\n            loading: false,\n            showSample: undefined\n          }\n        });\n      }).catch(error => {\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.info(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    }\n  };\n};\nexport function AddComponents(Map) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", Map);\n    const timezone = rsapi.post(\"timezone/getTimeZone\");\n    urlArray = [ComponentTestBySpec, timezone];\n    Axios.all(urlArray).then(response => {\n      const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n      const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const lstComponent = lstComponentMap.get(\"OptionList\");\n      const timeZoneList = timeZoneListMap.get(\"OptionList\");\n      let dreceiveddate = null;\n      if (lstComponent[0].item.sreceiveddate) dreceiveddate = rearrangeDateFormat(Map[\"userinfo\"], lstComponent[0].item.sreceiveddate); //new Date(lstComponent[0].item.sreceiveddate);//|| [];\n\n      let selectComponent = {\n        sreceiveddate: dreceiveddate,\n        dreceiveddate,\n        ntzdreceivedate: {\n          \"label\": Map[\"userinfo\"].stimezoneid,\n          \"value\": Map[\"userinfo\"].ntimezonecode\n        },\n        stzdreceivedate: Map[\"userinfo\"].stimezoneid,\n        scomments: \"\",\n        nallottedspeccode: lstComponent[0].item.nallottedspeccode\n      };\n      let CurrentTime = dreceiveddate;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loadComponent: true,\n          lstComponent,\n          dreceiveddate,\n          ChildscreenName: \"Component\",\n          showSaveContinue: true,\n          openChildModal: false,\n          childoperation: \"create\",\n          selectComponent,\n          parentPopUpSize: \"lg\",\n          CurrentTime,\n          timeZoneList,\n          loading: false,\n          openPortal: true,\n          openModal: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getAllTest(objComponent, LoginProps, nneedsubsample, specBasedComponent, selectPackage1, specBasedTestPackage, selectPackage) {\n  return function (dispatch) {\n    if (Object.keys(objComponent).length > 0) {\n      dispatch(initRequest(true));\n      rsapi.post(\"/registration/getTestfromDB\", {\n        nspecsampletypecode: objComponent.nspecsampletypecode,\n        slno: objComponent.slno,\n        nneedsubsample: nneedsubsample,\n        nallottedspeccode: objComponent.nallottedspeccode,\n        specBasedComponent: specBasedComponent,\n        specBasedTestPackage: specBasedTestPackage,\n        conditionalTestPackage: true //    ntestpackagecode:selectPackage.ntestpackagecode.value\n\n      }).then(response => {\n        let PackageData = [];\n        let TestCombined = []; //   const TestCombined = response.data;\n\n        let TestData = response.data;\n        let Test = LoginProps.Test || [];\n        let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\n        TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestgrouptestcode\");\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            TestCombined,\n            TestPackage: PackageData,\n            selectPackage: [],\n            loadTest: true,\n            openChildModal: false,\n            ChildscreenName: intl.formatMessage({\n              id: \"IDS_TEST\"\n            }),\n            screenName: intl.formatMessage({\n              id: \"IDS_TEST\"\n            }),\n            operation: \"create\",\n            childoperation: \"create\",\n            parentPopUpSize: \"lg\",\n            loading: false\n          }\n        });\n      }).catch(error => {\n        toast.error(error.message);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      });\n    } else {\n      toast.info(intl.formatMessage({\n        id: \"IDS_SELECTCOMPONENTTOADDTEST\"\n      }));\n    }\n  };\n}\nexport function getTest(objComponent, LoginProps, nneedsubsample, specBasedComponent, selectPackage1, specBasedTestPackage, selectPackage) {\n  return function (dispatch) {\n    // if (Object.keys(objComponent).length > 0) {\n    const urlArray = [];\n    const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\n      nspecsampletypecode: objComponent.nspecsampletypecode,\n      slno: objComponent.slno,\n      nneedsubsample: nneedsubsample,\n      nallottedspeccode: objComponent.nallottedspeccode,\n      specBasedComponent: specBasedComponent,\n      specBasedTestPackage: specBasedTestPackage,\n      conditionalTestPackage: true //    ntestpackagecode:selectPackage.ntestpackagecode.value\n\n    });\n    urlArray[0] = TestGet;\n    const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\n      nspecsampletypecode: objComponent.nspecsampletypecode,\n      slno: objComponent.slno,\n      nneedsubsample: nneedsubsample,\n      nallottedspeccode: objComponent.nallottedspeccode,\n      specBasedComponent: specBasedComponent,\n      specBasedTestPackage: specBasedTestPackage,\n      conditionalTestPackage: true\n    });\n    urlArray[1] = TestPackageGet;\n    const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\n      nspecsampletypecode: objComponent.nspecsampletypecode,\n      slno: objComponent.slno,\n      nneedsubsample: nneedsubsample,\n      nallottedspeccode: objComponent.nallottedspeccode,\n      specBasedComponent: specBasedComponent,\n      specBasedTestPackage: specBasedTestPackage,\n      conditionalTestPackage: true\n    });\n    urlArray[2] = TestSectionGet;\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      // const TestCombined = [];\n      let PackageData = [];\n      let TestSectionData = []; //  if (specBasedTestPackage) {\n\n      const PackageDataMap = constructOptionList(response[1].data.TestPackage || [], \"ntestpackagecode\", \"stestpackagename\", undefined, undefined, true);\n      PackageData = PackageDataMap.get(\"OptionList\");\n      const TestSectionDataMap = constructOptionList(response[2].data.TestSection || [], \"nsectioncode\", \"ssectionname\", undefined, undefined, true);\n      TestSectionData = TestSectionDataMap.get(\"OptionList\"); //    }\n      //    else {\n\n      let TestData = response[0].data;\n      let Test = LoginProps.Test || [];\n      let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\n      let TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\"); //    }\n      // const lstComponentMap = constructOptionList(TestCombined|| [], \"ntestgrouptestcode\",\n      //\"stestsynonym\", undefined, undefined, true);\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          TestCombined,\n          TestPackage: PackageData,\n          selectPackage: [],\n          AllTest: TestData,\n          TestSection: TestSectionData,\n          selectSection: [],\n          loadTest: true,\n          openChildModal: false,\n          ChildscreenName: intl.formatMessage({\n            id: \"IDS_TEST\"\n          }),\n          screenName: intl.formatMessage({\n            id: \"IDS_TEST\"\n          }),\n          operation: \"create\",\n          childoperation: \"create\",\n          parentPopUpSize: \"lg\",\n          loading: false,\n          AllSection: TestSectionData,\n          selectedTestData: []\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    }); // } else {\n    //     toast.info(intl.formatMessage({ id: \"IDS_SELECTCOMPONENTTOADDTEST\" }));\n    // }\n  };\n}\nexport function addsubSample(masterData, userinfo, columnList, selectComponent, childColumnList, SubSamplecomboComponents, SubSamplewithoutCombocomponent, specBasedComponent, Map, Component, isServiceRequired, SubSamplecomboData, selectedRecord, conditionalTestPackage, specBasedTestPackage, LoginProps) {\n  if (isServiceRequired) {\n    return function (dispatch) {\n      dispatch(initRequest(true));\n      const urlArray = [];\n      const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\n      urlArray[0] = timeZoneService;\n      const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n        parentcolumnlist: columnList ? columnList.filter(x => x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter' && x.readonly !== true) : [],\n        childcolumnlist: childColumnList ? childColumnList : [],\n        userinfo\n      });\n      urlArray[1] = actualService;\n\n      if (specBasedComponent) {\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", { ...Map,\n          specBasedComponent: specBasedComponent //   conditionalTestPackage:true\n\n        });\n        urlArray[2] = ComponentTestBySpec;\n      } else {\n        Component = Component ? Component : [];\n        const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\n          nallottedspeccode: Map[\"nallottedspeccode\"],\n          slno: Component ? Object.keys(Component).length + 1 : 1,\n          nneedsubsample: Map[\"nneedsubsample\"],\n          // nallottedspeccode: objComponent.nallottedspeccode,\n          specBasedComponent: specBasedComponent,\n          conditionalTestPackage: true,\n          specBasedTestPackage: specBasedTestPackage\n        });\n        urlArray[2] = TestGet;\n        const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\n          nallottedspeccode: Map[\"nallottedspeccode\"],\n          // slno: Component ? Object.keys(Component).length + 1 : 1,\n          specBasedComponent: specBasedComponent //   specBasedTestPackage: specBasedTestPackage,\n          //  conditionalTestPackage: conditionalTestPackage\n\n        });\n        urlArray[5] = TestPackageGet;\n        const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\n          nallottedspeccode: Map[\"nallottedspeccode\"],\n          // slno: Component ? Object.keys(Component).length + 1 : 1,\n          specBasedComponent: specBasedComponent //   specBasedTestPackage: specBasedTestPackage,\n          //  conditionalTestPackage: conditionalTestPackage\n\n        });\n        urlArray[6] = TestSectionGet;\n      }\n\n      const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\n        userinfo\n      });\n      urlArray[3] = currentDate;\n      const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\n        datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\n        userinfo\n      });\n      urlArray[4] = dateService;\n      Axios.all(urlArray).then(response => {\n        const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n        const timeZoneList = timeZoneMap.get(\"OptionList\");\n        const defaultTimeZone = {\n          label: userinfo.stimezoneid,\n          value: userinfo.ntimezonecode\n        };\n        const newcomboData = parentChildComboLoad(columnList.filter(x => x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter' && x.readonly !== true), response[1].data, selectComponent, childColumnList, SubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo);\n        let TestCombined = [];\n        let lstComponent = [];\n        let PackageData = [];\n        let TestSectionData = [];\n        const selectedRecord1 = newcomboData.selectedRecord;\n\n        if (specBasedComponent) {\n          const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n          lstComponent = lstComponentMap.get(\"OptionList\"); // if (lstComponent.length > 0) {\n          //     selectedRecord1['ncomponentcode'] = { ...lstComponent[0] }\n          //     selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\n          //     selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\n          //     selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample\n          // }\n          //Added by Dhanushya for jira ETICA-22\n\n          if (lstComponent.length > 0) {\n            if (Map[\"orderTypeCombCode\"] && Map[\"orderTypeCombCode\"] === orderType.EXTERNAL) {\n              selectedRecord1['ncomponentcode'] = { ...lstComponent[0]\n              };\n              selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\n              selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\n              selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample;\n            } else {\n              selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'] && selectedRecord1['ncomponentcode'].item && selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\n              selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample;\n            }\n          }\n        } else {\n          const PackageDataMap = constructOptionList(response[5].data.TestPackage || [], \"ntestpackagecode\", \"stestpackagename\", undefined, undefined, true);\n          PackageData = PackageDataMap.get(\"OptionList\");\n          const testSectionDataMap = constructOptionList(response[6].data.TestSection || [], \"nsectioncode\", \"ssectionname\", undefined, undefined, true);\n          TestSectionData = testSectionDataMap.get(\"OptionList\");\n          TestCombined = response[2].data;\n        }\n\n        const comboData1 = newcomboData.comboData;\n        SubSamplewithoutCombocomponent.map(componentrow => {\n          if (componentrow.inputtype === \"date\") {\n            if (componentrow.loadcurrentdate) {\n              selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[3].data) : \"\";\n              selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\n            } else if (componentrow.nperiodcode) {\n              selectedRecord1[componentrow.label + \"value\"] = response[4].data[componentrow.label] ? new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\n\n              if (componentrow.loadselecteddate) {\n                selectedRecord1[componentrow.label] = response[4].data[componentrow.label] ? new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\n              } //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n              //    new Date(response[2].data[componentrow.label]):null;\n\n            } else {\n              selectedRecord1[componentrow.label + \"value\"] = new Date();\n            }\n\n            if (componentrow.hidebeforedate) {\n              selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"];\n            }\n\n            if (componentrow.hideafterdate) {\n              selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"];\n            }\n          } else if (componentrow.inputtype === \"radio\" || componentrow.inputtype === \"checkbox\" || componentrow.inputtype === \"predefineddropdown\") {\n            if (componentrow['radiodefaultvalue']) {\n              if (componentrow.inputtype === \"checkbox\") {\n                let val = '';\n                componentrow.radiodefaultvalue && componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\n                  val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',');\n                });\n                selectedRecord1[componentrow.label] = val;\n              } else if (componentrow.inputtype === \"predefineddropdown\") {\n                selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ? componentrow.radiodefaultvalue : \"\";\n              } else {\n                selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ? componentrow.radiodefaultvalue.label : \"\";\n              }\n            } else {\n              if (componentrow.inputtype === \"radio\") {\n                selectedRecord1[componentrow.label] = componentrow.radioOptions ? componentrow.radioOptions.tags[0].text : \"\";\n              }\n            }\n          }\n        });\n        const inputParam = {\n          ChildscreenName: intl.formatMessage({\n            id: \"IDS_SUBSAMPLE\"\n          }),\n          screenName: intl.formatMessage({\n            id: \"IDS_SUBSAMPLE\"\n          }),\n          showSaveContinue: true,\n          openChildModal: false,\n          childoperation: \"create\",\n          parentPopUpSize: \"lg\",\n          loading: false,\n          lstComponent,\n          openPortal: true,\n          openModal: false,\n          operation: \"create\",\n          loadSubSample: true,\n          selectComponent: selectedRecord1,\n          saveContinueData: { ...selectedRecord1\n          },\n          SubSamplecomboData: comboData1,\n          SubSamplecomboComponents,\n          SubSamplewithoutCombocomponent,\n          TestCombined,\n          parentSubSampleColumnList: columnList,\n          childSubSampleColumnList: childColumnList,\n          timeZoneList,\n          defaultTimeZone,\n          masterData,\n          selectPackage: [],\n          TestPackage: PackageData,\n          TestSection: TestSectionData,\n          selectSection: [],\n          AllTest: TestCombined,\n          AllSection: TestSectionData\n        }; //if (specBasedComponent) {\n        //Added by Dhanushya for jira ETICA-22\n\n        if (specBasedComponent && selectedRecord1['ncomponentcode'] !== undefined) {\n          dispatch(componentTest(selectedRecord1, false, specBasedComponent, Component, specBasedTestPackage, conditionalTestPackage, inputParam));\n        } else {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: { ...inputParam\n            }\n          });\n        }\n      }).catch(error => {\n        toast.error(error.message);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      });\n    };\n  } else {\n    const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData, selectComponent, childColumnList, SubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo);\n    return dispatch => {\n      if (!specBasedComponent) {\n        const urlArray = [];\n        const ComponentTestBySpec = rsapi.post(\"/registration/getTestfromDB\", {\n          nallottedspeccode: Map[\"nallottedspeccode\"],\n          slno: Component ? Object.keys(Component).length + 1 : 1,\n          // nneedsubsample: Map[\"nneedsubsample\"],\n          ...Map,\n          // nallottedspeccode: objComponent.nallottedspeccode,\n          specBasedComponent: specBasedComponent,\n          conditionalTestPackage: true,\n          specBasedTestPackage: specBasedTestPackage\n        });\n        urlArray[0] = ComponentTestBySpec;\n        const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\n          userinfo\n        });\n        urlArray[1] = currentDate;\n        const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\n          datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\n          userinfo\n        });\n        urlArray[2] = dateService;\n        const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\n          //  nspecsampletypecode: selectedobject.nspecsampletypecode,\n          nallottedspeccode: selectedRecord.nallottedspeccode.item.nallottedspeccode,\n          slno: Component ? Object.keys(Component).length + 1 : 1,\n          specBasedComponent: specBasedComponent,\n          specBasedTestPackage: specBasedTestPackage,\n          conditionalTestPackage: conditionalTestPackage\n        });\n        urlArray[3] = TestPackageGet;\n        const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\n          //  nspecsampletypecode: selectedobject.nspecsampletypecode,\n          nallottedspeccode: selectedRecord.nallottedspeccode.item.nallottedspeccode,\n          slno: Component ? Object.keys(Component).length + 1 : 1,\n          specBasedComponent: specBasedComponent,\n          specBasedTestPackage: specBasedTestPackage,\n          conditionalTestPackage: conditionalTestPackage\n        });\n        urlArray[4] = TestSectionGet;\n        Axios.all(urlArray).then(response => {\n          let TestCombined = [];\n          let PackageData = [];\n          let TestSectionData = []; //  if (!specBasedTestPackage) {\n\n          TestCombined = response[0].data; // } \n          // else {\n\n          const PackageDataMap = constructOptionList(response[3].data.TestPackage || [], \"ntestpackagecode\", \"stestpackagename\", undefined, undefined, true);\n          PackageData = PackageDataMap.get(\"OptionList\");\n          const TestSectionDataMap = constructOptionList(response[4].data.TestSection || [], \"nsectioncode\", \"ssectionname\", undefined, undefined, true);\n          TestSectionData = TestSectionDataMap.get(\"OptionList\"); // if (PackageData.length === 0) {\n          //    dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \n          //} \n          // }\n\n          const selectedRecord1 = newcomboData.selectedRecord;\n          SubSamplewithoutCombocomponent.map(componentrow => {\n            if (componentrow.inputtype === \"date\") {\n              if (componentrow.loadcurrentdate) {\n                selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[1].data) : \"\";\n                selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\n              } else if (componentrow.nperiodcode) {\n                selectedRecord1[componentrow.label + \"value\"] = response[2].data[componentrow.label] ? new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\n\n                if (componentrow.loadselecteddate) {\n                  selectedRecord1[componentrow.label] = response[2].data[componentrow.label] ? new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\n                } //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n                //    new Date(response[2].data[componentrow.label]):null;\n\n              } else {\n                selectedRecord1[componentrow.label + \"value\"] = new Date();\n              }\n\n              if (componentrow.hidebeforedate) {\n                selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"];\n              }\n\n              if (componentrow.hideafterdate) {\n                selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"];\n              }\n            } else if (componentrow.inputtype === \"radio\" || componentrow.inputtype === \"checkbox\" || componentrow.inputtype === \"predefineddropdown\") {\n              if (componentrow['radiodefaultvalue']) {\n                if (componentrow.inputtype === \"checkbox\") {\n                  let val = '';\n                  componentrow.radiodefaultvalue && componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\n                    val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',');\n                  });\n                  selectedRecord1[componentrow.label] = val;\n                } else if (componentrow.inputtype === \"predefineddropdown\") {\n                  selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ? componentrow.radiodefaultvalue : \"\";\n                } else {\n                  selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ? componentrow.radiodefaultvalue.label : \"\";\n                }\n              } else {\n                if (componentrow.inputtype === \"radio\") {\n                  selectedRecord1[componentrow.label] = componentrow.radioOptions ? componentrow.radioOptions.tags[0].text : \"\";\n                }\n              }\n            }\n          }); // if (masterData.RealRegSubTypeValue.nregsubtypecode === 6) {\n          //     let portalOrder = selectedRecord && selectedRecord['Portal Order ID'] || {}\n          //     let containerType = SubSamplecomboData['ContainerType'] || []\n          //     let containerList = []\n          //     const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\n          //     containerType.map(x => {\n          //         if (x.item.jsondata.nportalordercode === nportalordercode) {\n          //             containerList.push(x)\n          //         }\n          //     })\n          //     SubSamplecomboData['Container Type'] = containerList\n          // }\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              ChildscreenName: intl.formatMessage({\n                id: \"IDS_SUBSAMPLE\"\n              }),\n              screenName: intl.formatMessage({\n                id: \"IDS_SUBSAMPLE\"\n              }),\n              showSaveContinue: true,\n              openChildModal: false,\n              childoperation: \"create\",\n              parentPopUpSize: \"lg\",\n              loading: false,\n              lstComponent: [],\n              openPortal: true,\n              openModal: false,\n              operation: \"create\",\n              loadSubSample: true,\n              selectComponent: selectedRecord1,\n              saveContinueData: { ...selectedRecord1\n              },\n              TestCombined: TestCombined,\n              TestPackage: PackageData,\n              TestSection: TestSectionData,\n              selectSection: []\n            }\n          });\n        });\n      } else {\n        const urlArray = [];\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", { ...Map,\n          specBasedComponent: specBasedComponent\n        });\n        urlArray[0] = ComponentTestBySpec;\n        const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\n          userinfo\n        });\n        urlArray[1] = currentDate;\n        const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\n          datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\n          userinfo\n        });\n        urlArray[2] = dateService;\n        Axios.all(urlArray).then(response => {\n          const selectedRecord1 = newcomboData.selectedRecord; // const lstComponent =  response.data.lstComponent\n\n          let lstComponent = response[0].data.lstComponent; //filterRecordBasedOnTwoArrays(response.data.lstComponent, Component, \"ncomponentcode\")\n\n          const lstComponentMap = constructOptionList(lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n          lstComponent = lstComponentMap.get(\"OptionList\");\n\n          if (lstComponent.length > 0) {\n            // selectedRecord1['ncomponentcode'] = { ...lstComponent[0] }\n            // selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\n            // selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\n            // selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample\n            //Added by Dhanushya for jira ETICA-22\n            if (Map[\"orderTypeCombCode\"] && Map[\"orderTypeCombCode\"] === orderType.EXTERNAL) {\n              selectedRecord1['ncomponentcode'] = { ...lstComponent[0]\n              };\n              selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\n              selectedRecord1[\"nspecsampletypecode\"] = lstComponent[0].item.nspecsampletypecode;\n              selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample;\n            } else {\n              selectedRecord1[\"nspecsampletypecode\"] = lstComponent[0].item.nspecsampletypecode;\n              selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample;\n            }\n          }\n\n          SubSamplewithoutCombocomponent.map(componentrow => {\n            if (componentrow.inputtype === \"date\") {\n              if (componentrow.loadcurrentdate) {\n                selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[1].data) : \"\";\n                selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\n              } else if (componentrow.nperiodcode) {\n                selectedRecord1[componentrow.label + \"value\"] = response[2].data[componentrow.label] ? new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\n\n                if (componentrow.loadselecteddate) {\n                  selectedRecord1[componentrow.label] = response[2].data[componentrow.label] ? new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\n                } //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n                //    new Date(response[2].data[componentrow.label]):null;\n\n              } else {\n                selectedRecord1[componentrow.label + \"value\"] = new Date();\n              }\n\n              if (componentrow.hidebeforedate) {\n                selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"];\n              }\n\n              if (componentrow.hideafterdate) {\n                selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"];\n              }\n            } else if (componentrow.inputtype === \"radio\" || componentrow.inputtype === \"checkbox\" || componentrow.inputtype === \"predefineddropdown\") {\n              if (componentrow['radiodefaultvalue']) {\n                if (componentrow.inputtype === \"checkbox\") {\n                  let val = '';\n                  componentrow.radiodefaultvalue && componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\n                    val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',');\n                  });\n                  selectedRecord1[componentrow.label] = val;\n                } else if (componentrow.inputtype === \"predefineddropdown\") {\n                  selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ? componentrow.radiodefaultvalue : \"\";\n                } else {\n                  selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ? componentrow.radiodefaultvalue.label : \"\";\n                }\n              } else {\n                if (componentrow.inputtype === \"radio\") {\n                  selectedRecord1[componentrow.label] = componentrow.radioOptions ? componentrow.radioOptions.tags[0].text : \"\";\n                }\n              }\n            }\n          });\n          const inputParam = {\n            ChildscreenName: intl.formatMessage({\n              id: \"IDS_SUBSAMPLE\"\n            }),\n            screenName: intl.formatMessage({\n              id: \"IDS_SUBSAMPLE\"\n            }),\n            showSaveContinue: true,\n            openChildModal: false,\n            childoperation: \"create\",\n            parentPopUpSize: \"lg\",\n            loading: false,\n            lstComponent,\n            openPortal: true,\n            openModal: false,\n            operation: \"create\",\n            loadSubSample: true,\n            selectComponent: selectedRecord1,\n            saveContinueData: { ...selectedRecord1\n            },\n            TestCombined: [],\n            selectedTestData: [],\n            selectPackage: [],\n            selectSection: []\n          };\n\n          if (specBasedComponent) {\n            dispatch(componentTest(selectedRecord1, false, specBasedComponent, Component, specBasedTestPackage, conditionalTestPackage, inputParam));\n          } else {\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: { ...inputParam\n              }\n            });\n          }\n        });\n      }\n    };\n  }\n}\nexport function componentTest(selectedobject, Reg, specBasedComponent, Component, specBasedTestPackage, conditionalTestPackage, inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    const urlArray = [];\n    Component = Component ? Component : [];\n    const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\n      nspecsampletypecode: selectedobject.nspecsampletypecode,\n      slno: Component ? Object.keys(Component).length + 1 : 1,\n      specBasedComponent: specBasedComponent,\n      specBasedTestPackage: specBasedTestPackage,\n      conditionalTestPackage: conditionalTestPackage,\n      nneedsubsample: selectedobject.nneedsubsample\n    });\n    urlArray[0] = TestGet;\n    const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\n      nspecsampletypecode: selectedobject.nspecsampletypecode,\n      slno: Component ? Object.keys(Component).length + 1 : 1,\n      specBasedComponent: specBasedComponent,\n      specBasedTestPackage: specBasedTestPackage,\n      conditionalTestPackage: conditionalTestPackage\n    });\n    urlArray[1] = TestPackageGet;\n    const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\n      nspecsampletypecode: selectedobject.nspecsampletypecode,\n      slno: Component ? Object.keys(Component).length + 1 : 1,\n      specBasedComponent: specBasedComponent,\n      specBasedTestPackage: specBasedTestPackage,\n      conditionalTestPackage: conditionalTestPackage\n    });\n    urlArray[2] = TestSectionGet;\n    Axios.all(urlArray).then(response => {\n      let PackageData = [];\n      let TestData = [];\n      let TestSectionData = []; // if (specBasedTestPackage) {\n\n      const PackageDataMap = constructOptionList(response[1].data.TestPackage || [], \"ntestpackagecode\", \"stestpackagename\", undefined, undefined, true);\n      PackageData = PackageDataMap.get(\"OptionList\");\n      const testSectionDataMap = constructOptionList(response[2].data.TestSection || [], \"nsectioncode\", \"ssectionname\", undefined, undefined, true);\n      TestSectionData = testSectionDataMap.get(\"OptionList\"); // if (PackageData.length === 0) {\n      //     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \n      // } \n      //   }\n      //    else {\n\n      TestData = response[0].data; //  }\n      //let Test = [];\n      // Test[selectedobject.slno] = TestData;\n\n      const Map = {};\n\n      if (Reg) {\n        Map[\"selectedRecord\"] = selectedobject;\n      } else {\n        Map[\"selectComponent\"] = selectedobject;\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: { ...inputParam,\n          TestCombined: TestData,\n          AllTest: TestData,\n          TestPackage: PackageData,\n          ...Map,\n          loading: false,\n          selectedTestData: [],\n          selectPackage: [],\n          TestSection: TestSectionData,\n          selectSection: [],\n          AllSection: TestSectionData\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n} // export function testPackageTest(selectedobject, Reg, specBasedComponent, Component,specBasedTestPackage,conditionalTestPackage,selectComponent,objComponent,LoginProps,selectPackage,subSampleBased,selectedSpec,nneedsubsample) {\n// export function testPackageTest(selectedobject, Reg, specBasedComponent, Component, selectComponent, objComponent, LoginProps, selectPackage, subSampleBased, selectedSpec, nneedsubsample, action) {\n//     return function (dispatch) {\n//         dispatch(initRequest(true));\n//         Component = Component ? Component : []\n//         // rsapi.post(\"/registration/getTestBasesdTestPackage\", {\n//         //     nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\n//         //     slno:subSampleBased?Component ? Object.keys(Component).length + 1 : 1:selectComponent.slno,\n//         //     specBasedComponent: specBasedComponent,\n//         //     ntestpackagecode: selectPackage.ntestpackagecode.value,\n//         //     nallottedspeccode:selectedSpec!==undefined?selectedSpec.value:selectedobject.nallottedspeccode\n//         // })\n//         rsapi.post(\"/registration/getTestBasesdTestPackage\", {\n//             // nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\n//             nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\n//             //     slno: subSampleBased ? Component ? Object.keys(Component).length + 1 : 1 : selectComponent.slno,\n//             specBasedComponent: specBasedComponent,\n//             ntestpackagecode: selectPackage.ntestpackagecode.value,\n//             nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\n//         })\n//             .then(response => {\n//                 const Map = {}\n//                 let TestData = response.data;\n//                 let Test = (action !== \"AddSubSample\") ? (LoginProps.Test || []) : [];\n//                 let componentTest = [];\n//                 if (subSampleBased) {\n//                     componentTest = Test[Component ? Object.keys(Component).length + 1 : 1] ? Test[Component ? Object.keys(Component).length + 1 : 1] : [];\n//                 } else {\n//                     componentTest = objComponent && Test[objComponent.slno] ? Test[objComponent.slno] : [];\n//                 }\n//                 const availableTest = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\n//                 const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\n//                 delete selectedobject.ntestgrouptestcode;\n//                 if (Reg) {\n//                     Map[\"selectedRecord\"] = selectedobject\n//                 } else {\n//                     Map[\"selectPackage\"] = selectPackage\n//                 }\n//                 dispatch({\n//                     type: DEFAULT_RETURN,\n//                     payload: {\n//                         availableTest, TestCombined, ...Map, loading: false, selectedTestData: [], AllTest: LoginProps.TestCombined\n//                         //, selectPackage: []\n//                         // TestCombined,loadTest: true, openChildModal: false,\n//                         // ChildscreenName: \"Test\",\n//                         //  screenName: \"Test\",\n//                         // operation: \"create\",\n//                         //  childoperation: \"create\",\n//                         //   parentPopUpSize: \"lg\", loading: false\n//                     }\n//                 });\n//             })\n//             .catch(error => {\n//                 toast.error(error.message);\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\n//             })\n//     }\n// }\n\nexport function testPackageTest(selectedobject, Reg, specBasedComponent, Component, selectComponent, objComponent, LoginProps, selectPackage, selectSection, subSampleBased, selectedSpec, nneedsubsample, action) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    let testpackage;\n    Component = Component ? Component : [];\n    const testsection = rsapi.post(\"/registration/getTestSectionBasesdTestPackage\", {\n      nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\n      specBasedComponent: specBasedComponent,\n      ntestpackagecode: selectPackage.ntestpackagecode.value,\n      nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\n    }); //ALPD-3404\n\n    urlArray[0] = testsection;\n    testpackage = rsapi.post(\"/registration/getTestBasesdTestPackage\", {\n      nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\n      specBasedComponent: specBasedComponent,\n      ntestpackagecode: selectPackage.ntestpackagecode.value,\n      nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\n    });\n    urlArray[1] = testpackage;\n    Axios.all(urlArray).then(response => {\n      const Map = {};\n      let TestSectionData = [];\n      let TestData = response[1].data;\n      let Test = action !== \"AddSubSample\" ? LoginProps.Test || [] : [];\n      let componentTest = [];\n\n      if (subSampleBased) {\n        componentTest = Test[Component ? Object.keys(Component).length + 1 : 1] ? Test[Component ? Object.keys(Component).length + 1 : 1] : [];\n      } else {\n        componentTest = objComponent && Test[objComponent.slno] ? Test[objComponent.slno] : [];\n      }\n\n      const availableTest = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\n      const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\n      const testSectionDataMap = constructOptionList(response[0].data.TestSectionBasedonTestPackage || [], \"nsectioncode\", \"ssectionname\", undefined, undefined, true);\n      TestSectionData = testSectionDataMap.get(\"OptionList\");\n      delete selectedobject.ntestgrouptestcode;\n      delete selectedobject.nsectioncode;\n\n      if (Reg) {\n        Map[\"selectedRecord\"] = selectedobject;\n      } else {\n        Map[\"selectPackage\"] = selectPackage;\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          availableTest,\n          TestCombined,\n          ...Map,\n          loading: false,\n          selectedTestData: [],\n          AllTest: LoginProps.AllTest,\n          AllSection: LoginProps.AllSection,\n          TestSection: TestSectionData,\n          selectSection: [],\n          TestPakageTest: TestCombined //, selectPackage: []\n          // TestCombined,loadTest: true, openChildModal: false,\n          // ChildscreenName: \"Test\",\n          //  screenName: \"Test\",\n          // operation: \"create\",\n          //  childoperation: \"create\",\n          //   parentPopUpSize: \"lg\", loading: false\n\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n} //ALPD-3404\n\nexport function testSectionTest(selectedobject, Reg, specBasedComponent, Component, selectComponent, objComponent, LoginProps, selectPackage, selectSection, subSampleBased, selectedSpec, nneedsubsample, action) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    Component = Component ? Component : [];\n    rsapi.post(\"/registration/getTestBasedTestSection\", {\n      nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\n      specBasedComponent: specBasedComponent,\n      ntestpackagecode: selectPackage.ntestpackagecode && selectPackage.ntestpackagecode.value || -1,\n      nsectioncode: selectSection.nsectioncode.value,\n      nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\n    }).then(response => {\n      const Map = {};\n      let TestData = response.data;\n      let Test = action !== \"AddSubSample\" ? LoginProps.Test || [] : [];\n      let componentTest = [];\n\n      if (subSampleBased) {\n        componentTest = Test[Component ? Object.keys(Component).length + 1 : 1] ? Test[Component ? Object.keys(Component).length + 1 : 1] : [];\n      } else {\n        componentTest = objComponent && Test[objComponent.slno] ? Test[objComponent.slno] : [];\n      }\n\n      const availableTest = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\n      const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\n      delete selectedobject.ntestgrouptestcode;\n\n      if (Reg) {\n        Map[\"selectedRecord\"] = selectedobject;\n      } else {\n        Map[\"selectPackage\"] = selectPackage;\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          availableTest,\n          TestCombined,\n          ...Map,\n          loading: false,\n          selectedTestData: [],\n          AllTest: LoginProps.AllTest\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function addSubSampleSaveContinue(Map1, Map, specBasedComponent, Component, selectedTestData, lstComponent, LoginProps) {\n  //  const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\n  //     selectComponent, childColumnList, SubSamplewithoutCombocomponent)\n  return dispatch => {\n    if (!specBasedComponent) {\n      // rsapi.post(\"/registration/getTestfromDB\", {\n      //     nallottedspeccode: Map[\"nallottedspeccode\"],\n      //     nspecsampletypecode: Map[\"nspecsampletypecode\"],\n      //     slno: Map1.Component ? Object.keys(Map1.Component).length + 1 : 1,\n      //     specBasedComponent: specBasedComponent, nneedsubsample: Map[\"nneedsubsample\"]\n      // }).then(response => {\n      //     let TestCombined = Map1.TestCombined;//response.data\n      //     // let selectedTestPackageData = selectedTestPackageData && selectedTestPackageData.length > 0 ? selectedTestData : []\n      //     let selectedTestPackageData = selectedTestData && selectedTestData.length > 0 ? selectedTestData : []\n      //     const selectedTestPackageData1 = TestCombined.filter(function (x) {\n      //         return selectedTestPackageData.some(function (y) {\n      //             return x[\"ntestpackagetestcode\"] === y.value\n      //         })\n      //     });\n      //     selectedTestData = selectedTestData && selectedTestData.length > 0 ? selectedTestPackageData : []\n      //     const selectedTestData1 = TestCombined.filter(function (x) {\n      //         return selectedTestData.some(function (y) {\n      //             return x[\"ntestgrouptestcode\"] === y.value\n      //         })\n      //     });\n      //     selectedTestData = constructOptionList(selectedTestData1, \"ntestgrouptestcode\", \"stestsynonym\")\n      //     selectedTestData[\"ntestgrouptestcode\"] = selectedTestData.get(\"OptionList\")\n      //     selectedTestPackageData = constructOptionList(selectedTestPackageData1, \"ntestpackagetestcode\", \"stestpackagename\")\n      //     selectedTestPackageData[\"ntestpackagetestcode\"] = selectedTestPackageData.get(\"OptionList\")\n      //     // Map1.selectComponent = {};\n      //     Map1.selectComponent = { ...Map1.saveContinueData };\n      //     // Map1.selectComponent[\"ncomponentcode\"] = {};\n      //     dispatch({\n      //         type: DEFAULT_RETURN,\n      //         payload: {\n      //             ...Map1,\n      //             loading: false,\n      //             TestCombined,\n      //             selectPackage: [],\n      //             //TestPackage\n      //             //selectedTestData,\n      //             //selectedTestPackageData,\n      //             selectedTestData: [],\n      //             selectedTestPackageData: [],\n      //             masterStatus: intl.formatMessage({ id: \"IDS_SAVESUCCESSFULLY\" })\n      //         }\n      //     });\n      // })\n      Map1.selectComponent = { ...Map1.saveContinueData\n      }; //ALPD-3404\n\n      const TestCombined = LoginProps.AllTest || Map1.TestCombined;\n      delete Map1.TestCombined;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: { ...Map1,\n          loading: false,\n          TestCombined,\n          selectPackage: [],\n          selectSection: [],\n          //TestPackage\n          //selectedTestData,\n          //selectedTestPackageData,\n          selectedTestData: [],\n          selectedTestPackageData: [],\n          masterStatus: intl.formatMessage({\n            id: \"IDS_SAVESUCCESSFULLY\"\n          })\n        }\n      });\n    } else {\n      // lstComponent = lstComponent.filter(x => x.item.nspecsampletypecode !== Map1.selectComponent[\"nspecsampletypecode\"])\n      // Map1.selectComponent = {};\n      // Map1.selectComponent[\"ncomponentcode\"] = {};           \n      // Map1.selectComponent[\"Sample Name\"] = \"\";\n      Map1.selectComponent = { ...Map1.saveContinueData\n      }; //, \"ncomponentcode\": {} };\n\n      const inputParam = { ...Map1,\n        loading: false,\n        TestCombined: [],\n        selectPackage: [],\n        TestPackage: [],\n        selectedTestData: [],\n        selectedTestPackageData: [],\n        selectComponent: {},\n        lstComponent,\n        masterStatus: intl.formatMessage({\n          id: \"IDS_SAVESUCCESSFULLY\"\n        })\n      };\n\n      if (Map1.selectComponent['ncomponentcode'] !== undefined) {\n        dispatch(componentTest(Map1.selectComponent, false, specBasedComponent, Component, Map1.specBasedTestPackage, Map1.specBasedTestPackage ? true : false, inputParam));\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: { ...inputParam\n          }\n        });\n      }\n    }\n  };\n}\nexport function editSubSample(Map, component, userInfo, specBasedComponent, SubSamplecomboData, selectedRecord) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    let Componnet = {};\n\n    if (specBasedComponent) {\n      Componnet = rsapi.post(\"/registration/getComponentBySpec\", { ...Map\n      });\n    }\n\n    urlArray = [Componnet];\n    Axios.all(urlArray).then(response => {\n      let comp = [];\n\n      if (specBasedComponent) {\n        comp = response[0].data.lstComponent;\n      }\n\n      const lstComponentMap = constructOptionList(comp || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n      const lstComponent = lstComponentMap.get(\"OptionList\");\n\n      if (Map.nregsubtypecode === 6) {\n        let portalOrder = component['Container Type'] || {};\n        let containerType = SubSamplecomboData['ContainerType'] || [];\n        let containerList = [];\n        const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1;\n        containerType.map(x => {\n          if (x.item.jsondata.nportalordercode === nportalordercode) {\n            containerList.push(x);\n          }\n        });\n        SubSamplecomboData['Container Type'] = containerList;\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loadSubSample: true,\n          childoperation: \"update\",\n          ChildscreenName: intl.formatMessage({\n            id: \"IDS_SUBSAMPLE\"\n          }),\n          openChildModal: false,\n          selectComponent: component,\n          parentPopUpSize: \"lg\",\n          loading: false,\n          lstComponent,\n          SubSamplecomboData\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function insertRegistration(inputParam, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let requestUrl = '';\n\n    if (inputParam.isFileupload) {\n      requestUrl = rsapi.post(\"/registration/createRegistrationWithFile\", inputParam.formData);\n    } else {\n      requestUrl = rsapi.post(\"/registration/createRegistration\", inputParam.inputData);\n    }\n\n    return requestUrl //  rsapi.post(\"/registration/createRegistration\", inputParam.formData)\n    .then(response => {\n      if (response.data.rtn === \"Success\") {\n        // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n        //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n        // }\n        let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample, 'Sample');\n        let selectedSample = response.data[\"selectedSample\"];\n        let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n        let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n        let selectedSubSample = RegistrationGetSubSample;\n        RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\n        let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\n        let regSampleExisted = inputParam.inputData && inputParam.inputData.orderTypeValue === 2 ? true : false;\n\n        if (inputParam.inputData.nneedsubsample) {\n          RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc');\n          selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\n          RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode);\n          selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\n        } // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\n\n\n        if (inputParam.multipleselectionFlag) {\n          selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\n          updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\n          updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\n          RegistrationGetSubSample = masterData.RegistrationGetSubSample;\n          RegistrationGetTest = masterData.RegistrationGetTest;\n        }\n\n        masterData = { ...masterData,\n          ...response.data,\n          selectedSample,\n          selectedSubSample,\n          selectedTest,\n          RegistrationGetSubSample,\n          RegistrationGetTest,\n          RegistrationGetSample\n        };\n\n        if (masterData[\"kendoFilterList\"] !== undefined) {\n          masterData[\"kendoFilterList\"] = undefined;\n        }\n\n        let respObject = {\n          masterData,\n          ...inputParam.inputData,\n          openModal: false,\n          loadEsign: false,\n          showConfirmAlert: false,\n          selectedRecord: undefined,\n          loading: false,\n          loadPreregister: false,\n          showSample: undefined,\n          openPortal: false,\n          selectedSpec: {},\n          selectComponent: {},\n          SelectedTest: {},\n          selectedComponent: {},\n          Component: [],\n          selectedRecord: {},\n          SelectedTest: [],\n          Test: [],\n          selectedComponent: {},\n          subSampleDataGridList: [],\n          preregConfirmMessage: undefined,\n          regSampleExisted,\n          loadImportFileData: false,\n          loadImportSampleCountData: false,\n          skip: 0,\n          subsampleskip: 0,\n          testskip: 0,\n          isDynamicViewSlideOut: false // filterColumnActive:false,\n\n        };\n        inputParam.postParamList[0]['clearFilter'] = 'yes';\n        inputParam.postParamList[1]['clearFilter'] = 'yes';\n        inputParam.postParamList[2]['clearFilter'] = 'yes';\n        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n      } else {\n        toast.warn(response.data.rtn);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            showConfirmAlert: false,\n            preregConfirmMessage: undefined\n          }\n        });\n      }\n    }).catch(error => {\n      console.log(error);\n\n      if (error.response.status === 500) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            showConfirmAlert: false,\n            preregConfirmMessage: undefined\n          }\n        });\n        toast.error(error.message);\n      } else {\n        if (error.response.data.NeedConfirmAlert) {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              showConfirmAlert: true,\n              preregConfirmMessage: error.response.data.rtn,\n              preregConfirmParam: {\n                inputParam,\n                masterData\n              },\n              loading: false,\n              showSample: undefined\n            }\n          });\n        } else {\n          toast.error(error.message);\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false,\n              showConfirmAlert: false,\n              preregConfirmMessage: undefined\n            }\n          });\n        }\n      }\n    });\n  };\n}\nexport function insertRegistrationScheduler(inputParam, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/schedulerinsertRegistration\", inputParam.inputData).then(response => {\n      // if (response.data.rtn === \"Success\") {\n      //     let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\n      //     let selectedSample = response.data[\"selectedSample\"];\n      //     let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n      //     let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n      //     let selectedSubSample = RegistrationGetSubSample;\n      //     RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\n      //     let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\n      //     if (inputParam.inputData.nneedsubsample) {\n      //         RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\n      //         selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\n      //         RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\n      //         selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\n      //     }\n      //     // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\n      //     if (inputParam.multipleselectionFlag) {\n      //         selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\n      //         updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\n      //         updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\n      //         RegistrationGetSubSample = masterData.RegistrationGetSubSample;\n      //         RegistrationGetTest = masterDat..a.RegistrationGetTest;\n      //     }\n      //     masterData = {\n      //         ...masterData, ...response.data,\n      //         selectedSample, selectedSubSample, selectedTest,\n      //         RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\n      //     }\n      let respObject = {\n        masterData: { ...masterData,\n          SchedulerTransaction: response[\"data\"].SchedulerTransaction\n        },\n        ...inputParam.inputData,\n        openModal: false,\n        loadEsign: false,\n        showConfirmAlert: false,\n        selectedRecord: undefined,\n        loading: false,\n        loadPreregister: false,\n        showSample: undefined,\n        openPortal: false,\n        selectedSpec: {},\n        selectComponent: {},\n        SelectedTest: {},\n        selectedComponent: {},\n        Component: [],\n        selectedRecord: {},\n        SelectedTest: [],\n        Test: [],\n        selectedComponent: {},\n        subSampleDataGridList: []\n      }; // inputParam.postParamList[0]['clearFilter'] = 'yes'\n      // dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: { ...respObject\n        }\n      }); // } else {\n      //     toast.info(response.data.rtn);\n      //     dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\n      // }\n    }).catch(error => {\n      // console.log(error);\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          showConfirmAlert: false\n        }\n      });\n    });\n  };\n}\nexport function getRegistrationSample(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData\n    }).then(response => {\n      let masterData = { ...inputData.masterData,\n        ...response.data\n      };\n\n      if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\n        inputData.searchSampleRef.current.value = \"\";\n        masterData['searchedSample'] = undefined;\n      }\n\n      if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n        inputData.searchSubSampleRef.current.value = \"\";\n        masterData['searchedSubSample'] = undefined;\n      }\n\n      if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n        inputData.searchTestRef.current.value = \"\";\n        masterData['searchedTest'] = undefined;\n      }\n\n      let respObject = {};\n\n      if (inputData.selectedFilter) {\n        respObject = {\n          selectedFilter: { ...inputData.selectedFilter\n          }\n        };\n      }\n\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          showFilter: false,\n          skip: 0,\n          testskip: 0,\n          take: undefined,\n          testtake: undefined,\n          subsampleskip: 0,\n          subsampletake: undefined,\n          showSample: undefined,\n          ...respObject,\n          activeSampleTab: inputData.inputData.activeSampleTab,\n          regSampleExisted: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.info(error.response.data);\n      }\n    });\n  };\n}\nexport function getRegistrationsubSampleDetail(inputData, isServiceRequired, isParentValue) {\n  return function (dispatch) {\n    let inputParamData = {\n      nsampletypecode: inputData.nsampletypecode,\n      nregtypecode: inputData.nregtypecode,\n      nregsubtypecode: inputData.nregsubtypecode,\n      npreregno: inputData.npreregno,\n      ntransactionstatus: inputData.ntransactionstatus,\n      napprovalconfigcode: inputData.napprovalconfigcode,\n      activeTestTab: inputData.activeTestTab,\n      activeSampleTab: inputData.activeTestTab,\n      activeSubSampleTab: inputData.activeTestTab,\n      userinfo: inputData.userinfo,\n      ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n      nneedsubsample: inputData.nneedsubsample,\n      // ntype: inputData.nneedsubsample === true ? inputData.checkBoxOperation === 7 ? 4 : undefined:2, //ALPD-497\n      ntype: inputData.nneedsubsample === true ? inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL ? checkBoxOperation.SINGLEDESELECT : undefined : checkBoxOperation.DESELECT,\n      //ALPD-497\n      checkBoxOperation: inputData.nneedsubsample === true ? inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS ? checkBoxOperation.SINGLESELECT : inputData.checkBoxOperation : inputData.checkBoxOperation,\n      OrderCodeData: inputData.selectedSample ? inputData.selectedSample.length > 0 && inputData.selectedSample.map(item => item.hasOwnProperty(\"OrderCodeData\") ? item.OrderCodeData : -1).join(\",\") : null,\n      selectedPreregno: inputData.selectedSample && inputData.selectedSample.length > 0 ? inputData.selectedSample.map(item => item.npreregno).join(\",\") : null,\n      selectedTransactionsamplecode: inputData.selectedSample && inputData.selectedSample.length > 1 && inputData.masterData.selectedSubSample ? inputData.masterData.selectedSubSample.map(item => item.ntransactionsamplecode).join(\",\") : null,\n      noutsourcerequired: inputData.masterData && inputData.masterData.RealSampleTypeValue ? inputData.masterData.RealSampleTypeValue.noutsourcerequired : transactionStatus.NA\n    };\n    let activeName = \"\";\n    let dataStateName = \"\";\n    const subSample = inputData.nneedsubsample;\n    dispatch(initRequest(true));\n\n    if (isServiceRequired) {\n      rsapi.post(\"registration/getRegistrationSubSample\", inputParamData).then(response => {\n        sortData(response.data, \"descending\", \"npreregno\"); // if(isParentValue){\n\n        response.data['RegistrationGetSubSample'] = sortDataByParent(response.data['RegistrationGetSubSample'], inputData.sample, \"npreregno\"); //response.data['RegistrationGetTest']= sortDataByParent(response.data['RegistrationGetTest'],response.data['RegistrationGetSubSample'], \"ntransactionsamplecode\");\n        //  }\n\n        sortData(response.data['RegistrationAttachment']);\n        sortData(response.data['RegistrationComment']);\n        let masterData = {};\n        let skipInfo = {};\n        let oldSelectedTest = inputData.masterData.selectedTest || [];\n        let externalOrderAttachmentList = response.data && response.data.ExternalOrderAttachmentList;\n        let outsourceDetailsList = response.data && response.data.OutsourceDetailsList;\n\n        if (subSample) {\n          let oldSelectedSubSample = inputData.masterData.selectedSubSample;\n          fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n          masterData = { ...inputData.masterData,\n            selectedSample: inputData.selectedSample,\n            selectedPreregno: inputData.npreregno,\n            selectedSubSample: inputData.masterData.RegistrationGetSubSample.length > 0 ? [inputData.masterData.RegistrationGetSubSample[0]] : [],\n            activeTabIndex: inputData.activeTabIndex\n          };\n          let RegistrationTestComment = [];\n          let RegistrationTestAttachment = [];\n          let RegistrationParameter = [];\n          let RegistrationComment = []; //if (inputData.checkBoxOperation === 1 || inputData.checkBoxOperation === 7) {  \n          //if (inputData.checkBoxOperation === 1) {\n\n          if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\n            const wholeSubSampleList = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode); // START ALPD-3625 VISHAKH\n            // oldSelectedSubSample.forEach((subsample, index) => {\n            //     if (!wholeSubSampleList.includes(subsample.ntransactionsamplecode)) {\n            //         oldSelectedSubSample.splice(index, 1)\n            //     }\n            // })\n\n            oldSelectedSubSample = oldSelectedSubSample.filter(item => wholeSubSampleList.includes(item.ntransactionsamplecode)); // END ALPD-3625 VISHAKH\n\n            if (oldSelectedSubSample.length > 0) {\n              masterData = { ...masterData,\n                selectedSubSample: oldSelectedSubSample\n              };\n            }\n\n            const selectedTest = getSameRecordFromTwoArrays(oldSelectedTest, masterData.selectedSubSample, 'npreregno');\n            masterData = { ...masterData,\n              selectedTest\n            };\n          } //  if (inputData.checkBoxOperation === 7) {\n\n\n          if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {\n            // masterData = {\n            //     ...masterData,\n            //     APSelectedTest:responseData.APSelectedTest,\n            //     AP_TEST:responseData.AP_TEST,\n            //     ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\n            // }\n            switch (inputData.activeTestTab) {\n              case \"IDS_TESTCOMMENTS\":\n                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment1 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\n                }\n\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                {\n                  let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\n                  let RegistrationTestAttachment1 = [];\n\n                  if (inputData.masterData.RegistrationTestAttachment !== undefined) {\n                    RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\n                  }\n\n                  let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                  RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\n                  activeName = \"RegistrationTestAttachment\";\n                  dataStateName = \"testCommentDataState\";\n                }\n                break;\n\n              case \"IDS_PARAMETERRESULTS\":\n                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\n                let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\n                let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1;\n                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              default:\n                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment2 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\n                }\n\n                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n            }\n\n            masterData['RegistrationTestComment'] = RegistrationTestComment;\n            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\n            masterData[\"RegistrationParameter\"] = RegistrationParameter;\n            masterData[\"RegistrationComment\"] = RegistrationComment;\n          } //if (inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 5) {\n\n\n          if (inputData.checkBoxOperation === checkBoxOperation.SINGLESELECT || inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {\n            masterData = { ...masterData,\n              selectedTest: masterData.RegistrationGetTest.length > 0 ? [masterData.RegistrationGetTest[0]] : []\n            };\n\n            switch (inputData.activeTestTab) {\n              case \"IDS_TESTCOMMENTS\":\n                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment1 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment1 = [// ...inputData.masterData.RegistrationTestComment, \n                  ...ResponseData];\n                }\n\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                {\n                  let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\n                  let RegistrationTestAttachment1 = [];\n\n                  if (inputData.masterData.RegistrationTestAttachment !== undefined) {\n                    RegistrationTestAttachment1 = [// ...inputData.masterData.RegistrationTestAttachment, \n                    ...ResponseData];\n                  }\n\n                  let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                  RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\n                  activeName = \"RegistrationTestAttachment\";\n                  dataStateName = \"testCommentDataState\";\n                }\n                break;\n\n              case \"IDS_PARAMETERRESULTS\":\n                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\n                let RegistrationParameter1 = [// ...inputData.masterData.RegistrationParameter, \n                ...resultResponseData];\n                let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1;\n                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              case \"IDS_SAMPLECOMMENTS\":\n                RegistrationComment = response.data.RegistrationComment ? [...response.data.RegistrationComment] : [];\n                activeName = \"RegistrationComment\";\n                dataStateName = \"sampleCommentsDataState\";\n                break;\n\n              default:\n                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment2 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment2 = [// ...inputData.masterData.RegistrationTestComment, \n                  ...ResponseData1];\n                }\n\n                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n            }\n\n            masterData['RegistrationTestComment'] = RegistrationTestComment;\n            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\n            masterData[\"RegistrationParameter\"] = RegistrationParameter;\n            masterData[\"RegistrationComment\"] = RegistrationComment;\n          }\n\n          masterData['ExternalOrderAttachmentList'] = externalOrderAttachmentList;\n          masterData['OutsourceDetailsList'] = outsourceDetailsList;\n          let {\n            testskip,\n            testtake,\n            subsampleskip,\n            subsampletake\n          } = inputData; // let bool = false;\n          // Commented bool value because no need to check bool condition to update skipInfo value.\n          // if (inputData.masterData.RegistrationGetSubSample.length < inputData.subsampleskip) {\n\n          testskip = 0;\n          subsampleskip = 0; // bool = true\n          // }\n          // if (bool) {\n\n          skipInfo = {\n            testskip,\n            testtake,\n            subsampleskip,\n            subsampletake\n          }; // }\n        } else {\n          //let oldSelectedTest = inputData.masterData.selectedTest\n          //  let oldSelectedSubSample = inputData.masterData.selectedSubSample\n          fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n          masterData = { ...inputData.masterData,\n            selectedSample: inputData.selectedSample,\n            selectedPreregno: inputData.npreregno,\n            selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [],\n            selectedSubSample: inputData.masterData.RegistrationGetSubSample\n          };\n          let RegistrationTestComment = [];\n          let RegistrationParameter = [];\n          let RegistrationTestAttachment = [];\n          let RegistrationComment = []; //if (inputData.checkBoxOperation === 7 || inputData.checkBoxOperation === 1) {\n\n          if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL || inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\n            const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode); // START ALPD-3625 VISHAKH\n            // oldSelectedTest.forEach((test, index) => {\n            //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\n            //         oldSelectedTest.splice(index, 1)\n            //     }\n            // })\n\n            oldSelectedTest = oldSelectedTest.filter(item => wholeTestList.includes(item.ntransactiontestcode)); // START ALPD-3625 VISHAKH\n\n            let keepOld = false;\n            let ntransactiontestcode;\n            let npreregno;\n\n            if (oldSelectedTest.length > 0) {\n              keepOld = true;\n              masterData = { ...masterData,\n                selectedTest: oldSelectedTest\n              };\n            } else {\n              ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\";\n              npreregno = inputData.masterData.RegistrationGetSample.length > 0 ? inputData.masterData.RegistrationGetSample[0].npreregno : \"\";\n            }\n\n            switch (inputData.activeTestTab) {\n              case \"IDS_PARAMETERRESULTS\":\n                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ? inputData.masterData.RegistrationParameter : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                {\n                  RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ? inputData.masterData.RegistrationTestAttachment : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\");\n                  activeName = \"RegistrationTestAttachment\";\n                  dataStateName = \"testCommentDataState\";\n                }\n                break;\n\n              case \"IDS_TESTCOMMENTS\":\n                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ? inputData.masterData.RegistrationTestComment : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              case \"IDS_SAMPLECOMMENTS\":\n                RegistrationComment = keepOld ? inputData.masterData.RegistrationComment ? inputData.masterData.RegistrationComment : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment, npreregno, \"npreregno\");\n                activeName = \"RegistrationComment\";\n                dataStateName = \"sampleCommentsDataState\";\n                break;\n\n              default:\n                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ? inputData.masterData.RegistrationParameter : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n            }\n          } //else if (inputData.checkBoxOperation === 5) {\n          else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {\n            switch (inputData.activeTestTab) {\n              case \"IDS_TESTCOMMENTS\":\n                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment1 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\n                }\n\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                {\n                  let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\n                  let RegistrationTestAttachment1 = [];\n\n                  if (inputData.masterData.RegistrationTestAttachment !== undefined) {\n                    RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\n                  }\n\n                  let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                  RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\n                  activeName = \"RegistrationTestAttachment\";\n                  dataStateName = \"testCommentDataState\";\n                }\n                break;\n\n              case \"IDS_PARAMETERRESULTS\":\n                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\n                let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\n                let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              case \"IDS_SAMPLECOMMENTS\":\n                RegistrationComment = response.data.RegistrationComment ? [...response.data.RegistrationComment] : [];\n                activeName = \"RegistrationComment\";\n                dataStateName = \"sampleCommentsDataState\";\n                break;\n\n              default:\n                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment2 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\n                }\n\n                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n            } // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n\n          } else {\n            switch (inputData.activeTestTab) {\n              case \"IDS_TESTCOMMENTS\":\n                RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                {\n                  RegistrationTestAttachment = response.data.RegistrationTestAttachment ? [...response.data.RegistrationTestAttachment] : [];\n                  activeName = \"RegistrationTestAttachment\";\n                  dataStateName = \"testCommentDataState\";\n                }\n                break;\n\n              case \"IDS_PARAMETERRESULTS\":\n                RegistrationParameter = response.data.RegistrationParameter ? [...response.data.RegistrationParameter] : [];\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              case \"IDS_SAMPLECOMMENTS\":\n                RegistrationComment = response.data.RegistrationComment ? [...response.data.RegistrationComment] : [];\n                activeName = \"RegistrationComment\";\n                dataStateName = \"sampleCommentsDataState\";\n                break;\n\n              default:\n                RegistrationParameter = response.data.RegistrationParameter ? [...response.data.RegistrationParameter] : [];\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n            }\n          }\n\n          masterData['RegistrationTestComment'] = RegistrationTestComment;\n          masterData[\"RegistrationParameter\"] = RegistrationParameter;\n          masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\n          masterData['RegistrationComment'] = RegistrationComment;\n          let {\n            testskip,\n            testtake\n          } = inputData;\n          let bool = false;\n\n          if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\n            testskip = 0;\n            bool = true;\n          }\n\n          if (bool) {\n            skipInfo = {\n              testskip,\n              testtake\n            };\n          }\n        }\n\n        if (inputData.masterData.selectedSample && inputData.sampleGridDataState && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\n          skipInfo = { ...skipInfo,\n            sampleGridDataState: { ...inputData.sampleGridDataState,\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            sampleGridDataState: { ...inputData.sampleGridDataState,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n          inputData.searchTestRef.current.value = \"\";\n          masterData['searchedTest'] = undefined;\n        }\n\n        if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n          inputData.searchSubSampleRef.current.value = \"\";\n          masterData['searchedSubSample'] = undefined;\n        } // let inputParam = { attachmentskip: undefined }\n\n\n        if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } // Start of ALPD-4130 on Save Additional Filter - ATE-241\n\n\n        let multifilterInfo = {};\n\n        if (inputData.multiFilterLoad !== undefined) {\n          if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\n            inputData.searchSampleRef.current.value = \"\";\n          }\n\n          if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n            inputData.searchSubSampleRef.current.value = \"\";\n          }\n\n          if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n            inputData.searchTestRef.current.value = \"\";\n          }\n\n          multifilterInfo = {\n            multiFilterLoad: inputData.multiFilterLoad,\n            openModal: inputData.openModal,\n            searchSampleRef: inputData.searchSampleRef,\n            searchSubSampleRef: inputData.searchSubSampleRef,\n            searchTestRef: inputData.searchTestRef,\n            testskip: inputData.testskip,\n            subsampleskip: inputData.subsampleskip,\n            skip: inputData.skip // filterColumnActive:true\n\n          };\n        } //  End of ALPD-4130 ATE-241\n\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestTab: inputData.activeTestTab,\n            skip: undefined,\n            take: undefined,\n            ...skipInfo,\n            activeTabIndex: inputData.activeTabIndex,\n            // ALPD-4130 Additional Filter Info ATE-241\n            ...multifilterInfo // inputParam:inputData\n\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.info(error.response.data);\n        }\n      });\n    } else {\n      let bool = false;\n      let skipInfo = {};\n      let {\n        testskip,\n        testtake,\n        subsampletake,\n        subsampleskip\n      } = inputData;\n      let oldSelectedTest = inputData.masterData.selectedTest;\n      let oldSelectedSubSample = inputData.masterData.selectedSubSample; // let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n\n      let isGrandChildGetRequired = false;\n      let TestSelected = [];\n      let subSampleSelected = [];\n\n      if (inputData[\"statusNone\"]) {\n        TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n        subSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n      } else {\n        TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n        subSampleSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n      }\n\n      if (TestSelected.length > 0) {\n        isGrandChildGetRequired = false;\n      } else {\n        isGrandChildGetRequired = true;\n      }\n\n      fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n\n      if (isGrandChildGetRequired) {\n        let selectedSample = inputData.selectedSample;\n        let filterTestSameOldSelectedTest = getSameRecordFromTwoArrays(oldSelectedTest, inputData.masterData.RegistrationGetTest, \"ntransactiontestcode\");\n        let selectedTest = filterTestSameOldSelectedTest.length > 0 ? filterTestSameOldSelectedTest : inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [];\n        let ntransactiontestcode = selectedTest.length > 0 ? selectedTest.map(x => x.ntransactiontestcode).join(\",\") : \"-1\";\n        let selectedSubSample = inputData.masterData.RegistrationGetSubSample;\n\n        if (subSample) {\n          let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\n          selectedSubSample = filterSelectedSubSample.length > 0 ? filterSelectedSubSample : [inputData.masterData.RegistrationGetSubSample[0]];\n\n          if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\n            subsampleskip = 0;\n            skipInfo = {\n              subsampletake,\n              subsampleskip\n            };\n          }\n        } // START ALPD-3671 VISHAKH\n\n\n        let masterData = { ...inputData.masterData,\n          selectedSample,\n          selectedSubSample,\n          selectedTest\n        };\n\n        if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n          inputData.searchSubSampleRef.current.value = \"\";\n          masterData['searchedSubSample'] = undefined;\n        }\n\n        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n          inputData.searchTestRef.current.value = \"\";\n          masterData['searchedTest'] = undefined;\n        } // END ALPD-3671 VISHAKH\n\n\n        if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\n          testskip = 0;\n          bool = true;\n        }\n\n        if (bool) {\n          skipInfo = { ...skipInfo,\n            testskip,\n            testtake\n          };\n        } // inputData = {\n        //     ...inputData, childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\n        //     selectedSubSample, checkBoxOperation: 3, skipInfo, masterData\n        // }\n\n\n        inputData = { ...inputData,\n          childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\", \"RegistrationTestAttachment\"],\n          ntransactiontestcode,\n          masterData,\n          selectedTest,\n          selectedSubSample,\n          checkBoxOperation: checkBoxOperation.SINGLESELECT,\n          skipInfo,\n          masterData\n        };\n\n        if (subSample) {\n          if (selectedTest.length === 0) {\n            inputData[\"npreregno\"] = selectedSubSample.map(x => x.npreregno).join(\",\");\n            inputData[\"ntransactionsamplecode\"] = selectedSubSample.map(x => x.ntransactionsamplecode).join(\",\"); // inputData[\"checkBoxOperation\"] = 3\n\n            inputData[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT;\n            inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"];\n            dispatch(getRegistrationTestDetail(inputData, true));\n          } else {\n            dispatch(getTestChildTabDetailRegistration(inputData, true));\n          }\n        } else {\n          dispatch(getTestChildTabDetailRegistration(inputData, true));\n        }\n      } else {\n        let masterData = { ...inputData.masterData,\n          selectedSample: inputData.selectedSample,\n          selectedPreregno: inputData.npreregno,\n          selectedTest: TestSelected ? TestSelected : inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [],\n          // RegistrationTestComment,\n          selectedSubSample: subSampleSelected ? subSampleSelected : inputData.masterData.RegistrationGetSubSample\n        }; // START ALPD-3671 VISHAKH\n\n        if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n          inputData.searchSubSampleRef.current.value = \"\";\n          masterData['searchedSubSample'] = undefined;\n        }\n\n        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n          inputData.searchTestRef.current.value = \"\";\n          masterData['searchedTest'] = undefined;\n        } // END ALPD-3671 VISHAKH\n\n\n        let subsamplecheck = true;\n\n        if (subSample) {\n          let SubSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n\n          if (SubSampleSelected.length > 0) {\n            let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\n\n            if (filterSelectedSubSample.length === 0) {\n              let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode); // START ALPD-3625 VISHAKH\n              // oldSelectedSubSample.forEach((test, index) => {\n              //     if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\n              //         oldSelectedSubSample.splice(index, 1)\n              //     }\n              //     return null;\n              // })\n\n              oldSelectedSubSample = oldSelectedSubSample.filter(item => wholeSubSample.includes(item.ntransactionsamplecode)); // END ALPD-3625 VISHAKH\n\n              if (oldSelectedSubSample.length === 0 && wholeSubSample.length > 0 && masterData.selectedTest.length === 0) {\n                const selectedSubSample1 = [inputData.masterData.RegistrationGetSubSample[0]];\n                masterData = { ...masterData,\n                  selectedSubSample: selectedSubSample1,\n                  selectedTest: []\n                };\n                inputData = { ...inputData,\n                  ...masterData\n                };\n                inputData[\"npreregno\"] = selectedSubSample1.map(x => x.npreregno).join(\",\");\n                inputData[\"ntransactionsamplecode\"] = selectedSubSample1.map(x => x.ntransactionsamplecode).join(\",\"); // inputData[\"checkBoxOperation\"] = 3\n\n                inputData[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT;\n                inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"];\n                subsamplecheck = false;\n                dispatch(getRegistrationTestDetail(inputData, true));\n              }\n            } else {\n              oldSelectedSubSample = filterSelectedSubSample;\n            }\n          } else {\n            let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode); // START ALPD-3625 VISHAKH\n            // oldSelectedSubSample.forEach((test, index) => {\n            //     if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\n            //         oldSelectedSubSample.splice(index, 1)\n            //     }\n            //     return null;\n            // })\n\n            oldSelectedSubSample = oldSelectedSubSample.filter(item => wholeSubSample.includes(item.ntransactionsamplecode)); // END ALPD-3625 VISHAKH\n          }\n\n          if (subsamplecheck) {\n            masterData = { ...masterData,\n              selectedSubSample: oldSelectedSubSample\n            };\n          }\n\n          if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\n            subsampleskip = 0;\n            skipInfo = {\n              subsampleskip,\n              subsampletake\n            };\n          }\n        }\n\n        let wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode); // START ALPD-3625 VISHAKH\n        // oldSelectedTest.forEach((test, index) => {\n        //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\n        //         oldSelectedTest.splice(index, 1)\n        //     }\n        //     return null;\n        // })\n\n        oldSelectedTest = oldSelectedTest.filter(item => wholeTestList.includes(item.ntransactiontestcode)); // END ALPD-3625 VISHAKH\n\n        let keepOld = false;\n        let ntransactiontestcode;\n\n        if (oldSelectedTest.length > 0) {\n          keepOld = true;\n          masterData = { ...masterData,\n            selectedTest: oldSelectedTest\n          };\n        } else {\n          ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\";\n        }\n\n        masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n        masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n        let skipInfo = {};\n\n        if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\n          testskip = 0;\n          bool = true;\n        }\n\n        if (bool) {\n          skipInfo = { ...skipInfo,\n            testskip,\n            testtake\n          };\n        }\n\n        let dataStateArray = [{\n          activeName: 'selectedSample',\n          dataStateName: 'sampleGridDataState'\n        }, {\n          activeName: 'RegistrationSourceCountry',\n          dataStateName: 'sourceDataState'\n        }, {\n          activeName: 'RegistrationTestComment',\n          dataStateName: 'testCommentDataState'\n        }, {\n          activeName: 'RegistrationParameter',\n          dataStateName: 'resultDataState'\n        }];\n        dataStateArray.map(arr => {\n          if (inputData[arr.dataStateName] && masterData[arr.activeName] && masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\n            skipInfo = { ...skipInfo,\n              [arr.dataStateName]: { ...inputData[arr.dataStateName],\n                skip: 0,\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          } else {\n            skipInfo = { ...skipInfo,\n              [arr.dataStateName]: { ...inputData[arr.dataStateName],\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          }\n\n          return null;\n        });\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestTab: inputData.activeTestTab,\n            ...skipInfo // activeTabIndex: inputData.activeTabIndex\n\n          }\n        });\n      }\n    }\n  };\n}\nexport function getRegistrationTestDetail(inputData, isServiceRequired) {\n  return function (dispatch) {\n    let inputParamData = {\n      nsampletypecode: inputData.nsampletypecode,\n      nregtypecode: inputData.nregtypecode,\n      nregsubtypecode: inputData.nregsubtypecode,\n      npreregno: inputData.npreregno,\n      ntransactionsamplecode: inputData.ntransactionsamplecode,\n      ntransactionstatus: inputData.ntransactionstatus,\n      napprovalconfigcode: inputData.napprovalconfigcode,\n      activeTestTab: inputData.activeTestTab,\n      activeSampleTab: inputData.activeSampleTab,\n      activeSubSampleTab: inputData.activeSubSampleTab,\n      userinfo: inputData.userinfo,\n      ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n      checkBoxOperation: inputData.checkBoxOperation,\n      nneedsubsample: inputData.nneedsubsample,\n      selectedTransactionsamplecode: inputData.selectedSubSample && inputData.selectedSubSample.length > 0 && inputData.selectedSubSample.map(item => item.ntransactionsamplecode).join(\",\"),\n      noutsourcerequired: inputData.masterData && inputData.masterData.RealSampleTypeValue ? inputData.masterData.RealSampleTypeValue.noutsourcerequired : transactionStatus.NA\n    };\n    const subSample = inputData.nneedsubsample;\n    let activeName = \"\";\n    let dataStateName = \"\";\n    dispatch(initRequest(true));\n\n    if (isServiceRequired) {\n      rsapi.post(\"registration/getRegistrationTest\", inputParamData).then(response => {\n        //sortData(response.data);\n        //ALPD-1609\n        sortData(response.data, 'descending', 'npreregno');\n        let oldSelectedTest = inputData.masterData.selectedTest || [];\n        let oldSelectedSubSample = inputData.masterData.selectedSubSample || [];\n        let outsourceDetailsList = response.data && response.data.OutsourceDetailsList;\n        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\n        let masterData = { ...inputData.masterData,\n          selectedSubSample: inputData.selectedSubSample,\n          selectedTransactionsamplecode: inputData.ntransactionsamplecode,\n          selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [] // RegistrationTestComment,\n\n        }; //let wholeRegistrationTestComments = [];\n\n        let RegistrationTestComment = [];\n        let RegistrationTestAttachment = [];\n        let RegistrationParameter = [];\n        let RegistrationSampleComment = [];\n        let RegistrationSampleAttachment = []; //if (inputData.checkBoxOperation === 1) {\n\n        if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\n          const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode); // START ALPD-3625 VISHAKH\n          // oldSelectedTest.forEach((test, index) => {\n          //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\n          //         oldSelectedTest.splice(index, 1)\n          //     }\n          // })\n\n          oldSelectedTest = oldSelectedTest.filter(item => wholeTestList.includes(item.ntransactiontestcode)); // END ALPD-3625 VISHAKH\n\n          let keepOld = false;\n          let ntransactiontestcode;\n\n          if (oldSelectedTest.length > 0) {\n            keepOld = true;\n            masterData = { ...masterData,\n              selectedTest: oldSelectedTest\n            };\n          } else {\n            ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\";\n          }\n\n          switch (inputData.activeTestTab) {\n            case \"IDS_PARAMETERRESULTS\":\n              RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ? inputData.masterData.RegistrationParameter : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ? inputData.masterData.RegistrationTestComment : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_TESTATTACHMENTS\":\n              RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ? inputData.masterData.RegistrationTestAttachment : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            default:\n              RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ? inputData.masterData.RegistrationParameter : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n          }\n        } // else if (inputData.checkBoxOperation === 5) {\n        else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {\n          switch (inputData.activeTestTab) {\n            case \"IDS_TESTCOMMENTS\":\n              let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n              let RegistrationTestComment1 = [];\n\n              if (inputData.masterData.RegistrationTestComment !== undefined) {\n                RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\n              }\n\n              let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              {\n                let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\n                let RegistrationTestAttachment1 = [];\n\n                if (inputData.masterData.RegistrationTestAttachment !== undefined) {\n                  RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\n                }\n\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestAttachment\";\n                dataStateName = \"testCommentDataState\";\n              }\n              break;\n\n            case \"IDS_PARAMETERRESULTS\":\n              let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\n              let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\n              let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n              RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n\n            default:\n              let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n              let RegistrationTestComment2 = [];\n\n              if (inputData.masterData.RegistrationTestComment !== undefined) {\n                RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\n              }\n\n              let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n          } // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n\n        } // else if (inputData.checkBoxOperation === 7) {\n        else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {\n          let testList = reArrangeArrays(inputData.masterData.RegistrationGetSubSample, response.data.RegistrationGetTest, \"ntransactionsamplecode\");\n          masterData = { ...masterData,\n            selectedTest: testList ? testList.length > 0 ? [testList[0]] : [] : [],\n            RegistrationGetTest: testList ? testList.length > 0 ? testList : [] : [] //ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\n\n          };\n\n          switch (inputData.activeTestTab) {\n            case \"IDS_TESTCOMMENTS\":\n              let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n              let RegistrationTestComment1 = [];\n\n              if (inputData.masterData.RegistrationTestComment !== undefined) {\n                RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\n              }\n\n              let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              {\n                let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\n                let RegistrationTestAttachment1 = [];\n\n                if (inputData.masterData.RegistrationTestAttachment !== undefined) {\n                  RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\n                }\n\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestAttachment\";\n                dataStateName = \"testCommentDataState\";\n              }\n              break;\n\n            case \"IDS_PARAMETERRESULTS\":\n              let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : []; // let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\n\n              let RegistrationParameter1 = [...resultResponseData];\n              let ntransactiontestcode1 = testList ? testList.length > 0 ? testList[0].ntransactiontestcode : inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1 : -1;\n              RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n\n            default:\n              let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n              let RegistrationTestComment2 = [];\n\n              if (inputData.masterData.RegistrationTestComment !== undefined) {\n                RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\n              }\n\n              let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n          } // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n\n        } else {\n          switch (inputData.activeTestTab) {\n            case \"IDS_TESTCOMMENTS\":\n              RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_TESTATTACHMENTS\":\n              RegistrationTestAttachment = response.data.RegistrationTestAttachment ? [...response.data.RegistrationTestAttachment] : [];\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_PARAMETERRESULTS\":\n              RegistrationParameter = response.data.RegistrationParameter ? [...response.data.RegistrationParameter] : [];\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n\n            default:\n              RegistrationParameter = response.data.RegistrationParameter ? [...response.data.RegistrationParameter] : [];\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n          }\n        }\n\n        if (subSample) {\n          let wholeSubsampleList = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode); // START ALPD-3625 VISHAKH\n          // oldSelectedSubSample.map((test, index) => {\n          //     if (!wholeSubsampleList.includes(test.ntransactionsamplecode)) {\n          //         oldSelectedSubSample.splice(index, 1)\n          //     }\n          //     return null;\n          // })\n\n          oldSelectedSubSample = oldSelectedSubSample.filter(item => wholeSubsampleList.includes(item.ntransactionsamplecode)); // END ALPD-3625 VISHAKH\n\n          let keepOld = false;\n          let ntransactionsamplecode;\n\n          if (oldSelectedSubSample.length > 0) {\n            keepOld = true;\n          } else {\n            ntransactionsamplecode = masterData.selectedSubSample[0].ntransactionsamplecode;\n          }\n\n          switch (inputData.activeSubSampleTab) {\n            case \"IDS_SUBSAMPLECOMMENTS\":\n              RegistrationSampleComment = keepOld ? inputData.masterData.RegistrationSampleComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment, ntransactionsamplecode, \"ntransactionsamplecode\");\n              activeName = \"RegistrationSampleComment\";\n              dataStateName = \"subSampleCommentDataState\";\n              break;\n\n            default:\n              RegistrationSampleAttachment = keepOld ? inputData.masterData.RegistrationSampleAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment, ntransactionsamplecode, \"ntransactionsamplecode\");\n              activeName = \"RegistrationSampleAttachment\";\n              dataStateName = \"subSampleAttachmentDataState\";\n              break;\n          }\n        }\n\n        masterData['RegistrationTestComment'] = RegistrationTestComment;\n        masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\n        masterData[\"RegistrationParameter\"] = RegistrationParameter;\n        masterData[\"RegistrationSampleComment\"] = RegistrationSampleComment;\n        masterData[\"RegistrationSampleAttachment\"] = RegistrationSampleAttachment;\n        masterData['OutsourceDetailsList'] = outsourceDetailsList;\n        let {\n          testskip,\n          testtake,\n          subsampleskip,\n          subsampletake\n        } = inputData; // let bool = false;\n        // Commented bool value because no need to check bool condition to update skipInfo value.\n\n        let skipInfo = {}; // if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\n\n        testskip = 0; // bool = true\n        // }\n\n        if (inputData.masterData.RegistrationGetSubSample.length < inputData.subsampleskip) {\n          subsampleskip = 0; // bool = true\n        } // if (bool) {\n\n\n        skipInfo = {\n          testskip,\n          testtake,\n          subsampleskip,\n          subsampletake\n        }; // }\n\n        if (inputData.masterData.selectedSample && inputData.sampleGridDataState && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\n          skipInfo = { ...skipInfo,\n            sampleGridDataState: { ...inputData.sampleGridDataState,\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            sampleGridDataState: { ...inputData.sampleGridDataState,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n          inputData.searchTestRef.current.value = \"\";\n          masterData['searchedTest'] = undefined;\n        } //  let inputParam = { attachmentskip: undefined }\n\n\n        if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            showFilter: false,\n            // activeTabIndex: inputData.activeTabIndex,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestTab: inputData.activeTestTab,\n            skip: undefined,\n            take: undefined,\n            ...skipInfo //  inputParam\n\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.info(error.response.data);\n        }\n      });\n    } else {\n      let oldSelectedTest = inputData.masterData.selectedTest; // START ALPD-3625 VISHAKH\n      // let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n\n      let TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\n      let isGrandChildGetRequired = false;\n\n      if (TestSelected.length > 0) {\n        isGrandChildGetRequired = false;\n      } else {\n        isGrandChildGetRequired = true;\n      } // END ALPD-3625 VISHAKH\n\n\n      fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSubSample, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\n\n      if (isGrandChildGetRequired) {\n        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode.toString() : \"-1\";\n        let selectedSubSample = inputData.selectedSubSample; // let selectedPreregno = inputData.npreregno;\n\n        let selectedTest = inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : []; // let selectedSubSample = inputData.masterData.RegistrationGetSubSample\n\n        let masterData = { ...inputData.masterData,\n          selectedSubSample,\n          selectedTest\n        }; // inputData = {\n        //     ...inputData, childTabsKey: [\"RegistrationTestAttachment\", \"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\n        //     selectedSubSample, checkBoxOperation: 3, activeTabIndex: inputData.masterData.activeTabIndex\n        // }\n        // START ALPD-3671 VISHAKH\n\n        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n          inputData.searchTestRef.current.value = \"\";\n          masterData['searchedTest'] = undefined;\n        } // END ALPD-3671 VISHAKH\n\n\n        inputData = { ...inputData,\n          childTabsKey: [\"RegistrationTestAttachment\", \"RegistrationTestComment\", \"RegistrationParameter\"],\n          ntransactiontestcode,\n          masterData,\n          selectedTest,\n          selectedSubSample,\n          checkBoxOperation: checkBoxOperation.SINGLESELECT,\n          activeTabIndex: inputData.masterData.activeTabIndex\n        };\n        dispatch(getTestChildTabDetailRegistration(inputData, true));\n      } else {\n        let masterData = { ...inputData.masterData,\n          selectedSubSample: inputData.selectedSubSample,\n          selectedTransactioncode: inputData.ntransactionsamplecode,\n          selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : []\n        }; // START ALPD-3671 VISHAKH\n\n        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n          inputData.searchTestRef.current.value = \"\";\n          masterData['searchedTest'] = undefined;\n        } // END ALPD-3671 VISHAKH\n\n\n        const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode); // START ALPD-3625 VISHAKH\n        // oldSelectedTest.forEach((test, index) => {\n        //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\n        //         oldSelectedTest.splice(index, 1)\n        //     }\n        //     return null;\n        // })\n\n        oldSelectedTest = oldSelectedTest.filter(item => wholeTestList.includes(item.ntransactiontestcode)); // END ALPD-3625 VISHAKH\n\n        let keepOld = false;\n        let ntransactiontestcode;\n\n        if (oldSelectedTest.length > 0) {\n          keepOld = true;\n          masterData = { ...masterData,\n            selectedTest: oldSelectedTest\n          };\n        } else {\n          ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\";\n        }\n\n        masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment ? inputData.masterData.RegistrationTestComment : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n        masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter ? inputData.masterData.RegistrationParameter : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n        let skipInfo = {};\n        let dataStateArray = [{\n          activeName: 'selectedSample',\n          dataStateName: 'sampleGridDataState'\n        }, {\n          activeName: 'RegistrationSourceCountry',\n          dataStateName: 'sourceDataState'\n        }, {\n          activeName: 'RegistrationTestComment',\n          dataStateName: 'testCommentDataState'\n        }, {\n          activeName: 'RegistrationParameter',\n          dataStateName: 'resultDataState'\n        }];\n        dataStateArray.map(arr => {\n          if (inputData[arr.dataStateName] && masterData[arr.activeName] && masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\n            skipInfo = { ...skipInfo,\n              [arr.dataStateName]: { ...inputData[arr.dataStateName],\n                skip: 0,\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          } else {\n            skipInfo = { ...skipInfo,\n              [arr.dataStateName]: { ...inputData[arr.dataStateName],\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          }\n\n          return null;\n        });\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestTab: inputData.activeTestTab,\n            // activeTabIndex: inputData.activeTabIndex,\n            ...skipInfo\n          }\n        });\n      }\n    }\n  };\n}\nexport function acceptRegistration(inputParam, LoginProps) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/acceptRegistration\", inputParam.inputData).then(response => {\n      if (response.data.rtn === undefined || response.data.rtn === \"Success\" || response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\" || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\" || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\n        // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n        //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n        // }\n        replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n        replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n        replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n        delete response.data[\"RegistrationGetSample\"];\n        delete response.data[\"RegistrationGetSubSample\"];\n        delete response.data[\"RegistrationGetTest\"];\n        let masterData = { ...LoginProps,\n          ...response.data,\n          selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\n          selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\n          selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\")\n        };\n        let respObject = {\n          masterData,\n          ...inputParam.inputData,\n          loading: false,\n          loadEsign: false,\n          openModal: false,\n          showSample: undefined,\n          showConfirmAlert: false,\n          acceptConfirmMessage: undefined,\n          skip: 0,\n          testskip: 0,\n          take: undefined,\n          testtake: undefined,\n          subsampletake: undefined,\n          subsampleskip: 0\n        };\n        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n\n        if (response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\" || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\" || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\n          toast.info(intl.formatMessage({\n            id: response.data.rtn\n          }));\n        }\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false,\n            openModal: false\n          }\n        });\n        toast.info(intl.formatMessage({\n          id: response.data.rtn\n        }));\n      }\n    }).catch(error => {\n      // toast.error(error.message);           \n      if (error.response.status === 500) {\n        toast.error(error.message);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      } else {\n        //toast.info(intl.formatMessage({ id: error.response.data[\"rtn\"] }));\n        if (error.response.data.NeedConfirmAlert) {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              showConfirmAlert: true,\n              acceptConfirmMessage: error.response.data.rtn,\n              acceptConfirmParam: {\n                inputParam,\n                masterData: LoginProps\n              },\n              loading: false\n            }\n          });\n        } else {\n          //toast.error(error.message);\n          toast.warn(intl.formatMessage({\n            id: error.response.data[\"rtn\"]\n          }));\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false,\n              showConfirmAlert: false,\n              acceptConfirmMessage: undefined\n            }\n          });\n        }\n      }\n    });\n  };\n}\nexport const addMoreTest = (inputParam, ncontrolCode) => {\n  return dispatch => {\n    let {\n      sampleList\n    } = inputParam;\n    let value = false;\n\n    if (inputParam.selectedSample && inputParam.selectedSample.length > 0) {\n      if (inputParam.selectedSubSample && inputParam.selectedSubSample.length > 0) {\n        value = inputParam.selectedSubSample.some(obj => obj.nspecsampletypecode !== inputParam.selectedSubSample[0].nspecsampletypecode);\n\n        if (value) {\n          return toast.info(intl.formatMessage({\n            id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\"\n          }));\n        } //sampleList = sampleList ? [...sampleList.slice(inputParam.skip, inputParam.take)] : [];\n        //const selectedsample = getSameRecordFromTwoArrays(sampleList, inputParam.selectedSample, \"npreregno\");\n        // const selectsubsample = getSameRecordFromTwoArrays(subsampleList, inputParam.selectedsubsample, \"ntransactionsamplecode\");\n        //if (selectedsample && selectedsample.length > 0) {\n\n\n        const selectedsample = inputParam.selectedSample;\n        const findTransactionStatus = [...new Set(selectedsample.map(item => item.ntransactionstatus))];\n\n        if (findTransactionStatus.length === 1) {\n          if (findTransactionStatus[0] !== transactionStatus.REJECT && findTransactionStatus[0] !== transactionStatus.CANCELLED) {\n            if (findTransactionStatus[0] !== transactionStatus.RELEASED) {\n              // if (selectsubsample && selectsubsample.length > 0) {\n              //     const findSubSampleStatus = [...new Set(selectsubsample.map(item => item.ntransactionstatus))];\n              //\n              //     if (findSubSampleStatus[0] !== transactionStatus.REJECT && findSubSampleStatus[0] !== transactionStatus.CANCELLED) \n              //     {                    \n              const findApprovalVersion = [...new Set(selectedsample.map(item => item.napprovalversioncode))];\n\n              if (findApprovalVersion.length === 1) {\n                const findSampleSpec = [...new Set(selectedsample.map(item => item.nallottedspeccode))]; //const findComponent = [...new Set(selectsubsample.map(item => item.ncomponentcode))];\n\n                if (findSampleSpec.length === 1) //&& findComponent.length === 1 \n                  {\n                    inputParam[\"snspecsampletypecode\"] = inputParam.selectedSubSample && [...new Set(inputParam.selectedSubSample.map(x => x.nspecsampletypecode))].join(\",\");\n                    dispatch(initRequest(true));\n                    const urlArray = [];\n                    const TestGet = rsapi.post(\"/registration/getMoreTest\", { ...inputParam\n                    });\n                    urlArray[0] = TestGet;\n                    const TestPackageGet = rsapi.post(\"/registration/getMoreTestPackage\", { ...inputParam\n                    });\n                    urlArray[1] = TestPackageGet;\n                    const TestSectionGet = rsapi.post(\"/registration/getMoreTestSection\", { ...inputParam\n                    });\n                    urlArray[2] = TestSectionGet;\n                    Axios.all(urlArray).then(response => {\n                      let PackageData = [];\n                      let TestSectionData = [];\n                      const PackageDataMap = constructOptionList(response[1].data || [], \"ntestpackagecode\", \"stestpackagename\", undefined, undefined, true);\n                      PackageData = PackageDataMap.get(\"OptionList\");\n                      const TestSectionDataMap = constructOptionList(response[2].data || [], \"nsectioncode\", \"ssectionname\", undefined, undefined, true);\n                      TestSectionData = TestSectionDataMap.get(\"OptionList\");\n                      dispatch({\n                        type: DEFAULT_RETURN,\n                        payload: {\n                          availableTest: response[0].data,\n                          TestCombined: response[0].data,\n                          AllTest: response[0].data,\n                          TestPackage: PackageData,\n                          loadChildTest: true,\n                          loading: false,\n                          ncontrolCode,\n                          screenName: \"IDS_TEST\",\n                          operation: \"create\",\n                          openModal: true,\n                          parentPopUpSize: \"lg\",\n                          selectedRecord: {},\n                          showSample: undefined,\n                          loadPrinter: false,\n                          TestSection: TestSectionData,\n                          AllSection: TestSectionData\n                        }\n                      });\n                    }).catch(error => {\n                      dispatch({\n                        type: DEFAULT_RETURN,\n                        payload: {\n                          loading: false\n                        }\n                      });\n\n                      if (error.response.status === 500) {\n                        toast.error(error.message);\n                      } else {\n                        toast.info(this.props.formatMessage({\n                          id: error.response.data\n                        }));\n                      }\n                    });\n                  } else {\n                  toast.info(intl.formatMessage({\n                    id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\"\n                  }));\n                }\n              } else {\n                toast.info(intl.formatMessage({\n                  id: \"IDS_PLEASESELECTSAMPLEWITHSAMEAPPROVALCONFIG\"\n                }));\n              } //     }\n              //     else {\n              //         toast.info(intl.formatMessage({ id: \"IDS_SUBSAMPLEISREJECTEDORCANCELLED\" }));\n              //     }\n              // }                               \n\n            } else {\n              toast.info(intl.formatMessage({\n                id: \"IDS_TESTCANNOTBEFORRELEASEDSAMPLES\"\n              }));\n            }\n          } else {\n            ////     toast.info(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORCANCELLEDREJECTSAMPLES\" }));\n            toast.info(intl.formatMessage({\n              id: \"IDS_SAMPLEISREJECTEDORCANCELLED\"\n            }));\n          }\n        } else {\n          toast.info(intl.formatMessage({\n            id: \"IDS_PLEASESELECTSAMPLEWITHSAMESTATUS\"\n          }));\n        } // } else {\n        //     toast.info(intl.formatMessage({ id: \"IDS_SELECTSAMPLE\" }));\n        // }\n\n      } else {\n        toast.info(intl.formatMessage({\n          id: \"IDS_SELECTSUBSAMPLE\"\n        }));\n      }\n    } else {\n      toast.info(intl.formatMessage({\n        id: \"IDS_SELECTSAMPLE\"\n      }));\n    }\n  };\n};\nexport const createRegistrationTest = (inputParam, masterData, modalName) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData\n    }).then(response => {\n      let RegistrationGetTest = updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"], response.data[\"RegistrationGetTest\"]); //let RegistrationGetSubSample = updatedObjectWithNewElement(masterData[\"RegistrationGetSubSample\"], response.data[\"RegistrationGetSubSample\"]);\n\n      masterData = { ...masterData,\n        RegistrationGetTest: sortData(RegistrationGetTest, \"descending\", \"ntransactiontestcode\"),\n        RegistrationGetSubSample: sortData(response.data[\"RegistrationGetSubSample\"], \"descending\", \"ntransactionsamplecode\"),\n        selectedTest: response.data[\"RegistrationGetTest\"],\n        //  selectedSubSample: response.data[\"RegistrationGetSubSample\"],\n        selectedSubSample: response.data[\"selectedSubSample\"],\n        RegistrationParameter: response.data.RegistrationParameter,\n        RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, masterData.RegistrationGetSample, 'npreregno')\n      };\n      let respObject = {\n        masterData,\n        [modalName]: false,\n        loading: false,\n        loadChildTest: false,\n        showSample: undefined,\n        openModal: false,\n        selectedRecord: {},\n        showConfirmAlert: false,\n        createTestConfirmMessage: undefined\n      };\n      inputParam.postParamList[0]['clearFilter'] = 'no';\n      inputParam.postParamList[1]['clearFilter'] = 'no';\n      inputParam.postParamList[2]['clearFilter'] = 'yes';\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n    }).catch(error => {\n      if (error.response.status === 500) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            createTestConfirmMessage: undefined\n          }\n        });\n        toast.error(error.message);\n      } else {\n        if (error.response.data.NeedConfirmAlert) {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              showConfirmAlert: true,\n              createTestConfirmMessage: error.response.data.rtn,\n              createTestConfirmParam: {\n                inputParam,\n                masterData,\n                modalName\n              },\n              //[modalName]: false,\n              loading: false,\n              loadChildTest: true,\n              showSample: undefined //openModal: false,\n              //selectedRecord: {}\n\n            }\n          });\n        } else {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              [modalName]: false,\n              loading: false,\n              loadChildTest: false,\n              showSample: undefined,\n              openModal: false,\n              selectedRecord: {},\n              createTestConfirmMessage: undefined\n            }\n          });\n          toast.info(error.response.data.rtn);\n        }\n      }\n    });\n  };\n};\nexport function getEditRegistrationComboService(inputParam, columnList, selectedRecord1, childColumnList, comboComponents, withoutCombocomponent, editableComboList) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    const {\n      userInfo,\n      operation\n    } = { ...inputParam\n    };\n    let masterData = inputParam[\"masterData\"];\n    let parentColumnList = [...columnList, ...editableComboList];\n\n    if (masterData[\"selectedSample\"].length > 1 || masterData[\"selectedSample\"].findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"mastertoedit\"][inputParam.primaryKeyName]) === -1) {\n      inputParam.editRegParam[\"getSampleChildDetail\"] = true;\n    }\n\n    masterData[\"selectedSample\"] = [];\n    masterData[\"selectedSample\"].push(inputParam[\"mastertoedit\"]);\n    const npreregno = inputParam.mastertoedit[inputParam.primaryKeyName];\n    let urlArray = [];\n    const timeZoneService = rsapi.post(\"timezone/getTimeZone\"); // const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n    //     parentcolumnlist: columnList,\n    //     childcolumnlist: childColumnList,\n    //     userinfo: userInfo\n    // })\n\n    const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationDetails\", { ...inputParam.editRegParam,\n      npreregno,\n      parentcolumnlist: parentColumnList,\n      childcolumnlist: childColumnList,\n      userinfo: userInfo,\n      nallottedspeccode: inputParam.mastertoedit.nallottedspeccode || -1\n    });\n    const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\n      datecolumnlist: withoutCombocomponent.filter(x => x.inputtype === \"date\"),\n      userinfo: userInfo\n    });\n    urlArray = [timeZoneService, selectedRegistration, dateService];\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = { ...response[1].data[\"EditData\"]\n      };\n      selectedRecord = { ...selectedRecord,\n        ...selectedRecord['jsondata']\n      }; // const recordToEdit = { ...response[2].data[\"SelectedRegistration\"][0] };\n      //  const currentTime = rearrangeDateFormat(userInfo, response[6].data);\n\n      const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const timeZoneList = timeZoneMap.get(\"OptionList\");\n      const defaultTimeZone = {\n        label: userInfo.stimezoneid,\n        value: userInfo.ntimezonecode\n      }; //  const newcomboData = parentChildComboLoad(columnList, response[1].data,\n      // selectedRecord, childColumnList, withoutCombocomponent)\n\n      if (selectedRecord.ntransactionstatus === transactionStatus.CANCELLED || selectedRecord.ntransactionstatus === transactionStatus.REJECT) {\n        toast.info(intl.formatMessage({\n          id: \"IDS_CANNOTEDITCANCELLEDSAMPLE\"\n        })); // ALPD-3393\n\n        if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\n          masterData = sortData({ ...masterData,\n            ...response[1].data[\"SampleChildDetail\"]\n          });\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            masterData\n          }\n        });\n      } else {\n        const languagetypeCode = undefined;\n        const comboData = response[1].data;\n        delete comboData['EditData'];\n        let comboValues = {};\n\n        if (columnList.length > 0) {\n          columnList.map(x => {\n            if (x.inputtype === 'combo') {\n              if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \n                {\n                  if (comboData[x.label].length > 0) {\n                    if (comboData[x.label][0].label === undefined) {\n                      const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x);\n                      comboData[x.label] = optionList.get(\"OptionList\");\n                    } else {\n                      comboData[x.label] = comboData[x.label];\n                      const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x);\n                    }\n                  } else {\n                    comboData[x.label] = [];\n                  } //comboValues = childComboLoad(x, comboData, selectedRecord, \n                  //   childColumnList, withoutCombocomponent)\\\n\n\n                  comboValues = childComboLoadForEdit(x, comboData, selectedRecord, childColumnList, withoutCombocomponent);\n                } else {\n                comboValues = {\n                  \"comboData\": comboData\n                };\n              }\n            } else {\n              comboValues = {\n                comboData: comboData,\n                ...comboValues\n              };\n            }\n          });\n        } else {\n          comboValues = {\n            \"comboData\": comboData\n          };\n        }\n\n        if (editableComboList.length > 0) {\n          editableComboList.map(x => {\n            if (x.inputtype === 'combo') {\n              if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \n                {\n                  if (comboData[x.label].length > 0) {\n                    if (comboData[x.label][0].label === undefined) {\n                      const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x);\n                      comboData[x.label] = optionList.get(\"OptionList\");\n                    } else {\n                      comboData[x.label] = comboData[x.label];\n                      const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x);\n                    }\n                  } else {\n                    comboData[x.label] = [];\n                  }\n\n                  comboValues = {\n                    \"comboData\": comboData\n                  };\n                } else {\n                comboValues = {\n                  \"comboData\": comboData\n                };\n              }\n            } else {\n              comboValues = {\n                comboData: comboData,\n                ...comboValues\n              };\n            }\n          });\n        }\n\n        withoutCombocomponent.map(date => {\n          if (date.inputtype === 'date') {\n            selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ? rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\";\n\n            if (date.nperiodcode) {\n              selectedRecord[date.label + \"value\"] = response[2].data[date.label] ? new Date(response[2].data[date.label][\"datevalue\"]) : null;\n            } else {\n              selectedRecord[date.label + \"value\"] = new Date();\n            }\n\n            if (date.hidebeforedate) {\n              selectedRecord[date.label + \"min\"] = selectedRecord[date.label + \"value\"];\n            }\n\n            if (date.hideafterdate) {\n              selectedRecord[date.label + \"max\"] = selectedRecord[date.label + \"value\"];\n            }\n          }\n        });\n        let {\n          Specification,\n          AgaramTree,\n          ActiveKey,\n          FocusKey,\n          OpenNodes,\n          specValue\n        } = [];\n        specValue = [{\n          nallottedspeccode: selectedRecord.nallottedspeccode,\n          sspecname: selectedRecord.sspecname,\n          sversion: selectedRecord.sversion\n        }];\n        const selectedSpec = {};\n        Specification = constructOptionList(specValue || [], \"nallottedspeccode\", \"sspecname\", undefined, undefined, true).get(\"OptionList\"); //AgaramTree = response[1].data[\"AgaramTree\"];\n        // ActiveKey = response[1].data[\"FocusKey\"];\n        //FocusKey = response[1].data[\"ActiveKey\"];\n        //OpenNodes = response[1].data[\"OpenNodes\"];\n        //Manufacturer = response.data[\"Manufacturer\"];\n\n        selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\n          \"value\": Specification[0].value,\n          \"label\": Specification[0].label,\n          \"item\": Specification[0].item\n        } : \"\";\n        selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\n        selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\n        selectedRecord = { ...selectedRecord,\n          ...selectedSpec\n        };\n\n        if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\n          masterData = sortData({ ...masterData,\n            ...response[1].data[\"SampleChildDetail\"]\n          });\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            // AgaramTree,\n            //FocusKey,\n            // ActiveKey,\n            //OpenNodes,\n            selectedSpec,\n            Specification,\n            // statustoEditDetail: response[2].data[\"ApprovalConfigRole\"] || {},\n            // currentTime,\n            operation: \"update\",\n            screenName: inputParam.masterData.RealRegSubTypeValue.sregsubtypename,\n            // PopUpLabel: popUpLabel,\n            timeZoneList,\n            defaultTimeZone,\n            selectedRecord,\n            openPortal: true,\n            ncontrolCode: inputParam.editRegParam.ncontrolCode,\n            loadPreregister: true,\n            parentPopUpSize: \"xl\",\n            loading: false,\n            showSample: undefined,\n            comboData: comboValues.comboData,\n            childColumnList,\n            comboComponents,\n            withoutCombocomponent,\n            columnList,\n            masterData //  regRecordToEdit:recordToEdit\n\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.info(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport function updateRegistration(inputParam, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let requestUrl = '';\n\n    if (inputParam.isFileupload) {\n      requestUrl = rsapi.post(\"/registration/updateRegistrationWithFile\", inputParam.formData);\n    } else {\n      requestUrl = rsapi.post(\"/registration/updateRegistration\", inputParam.inputData);\n    }\n\n    return requestUrl //   rsapi.post(\"/registration/updateRegistration\", inputParam.inputData)\n    .then(response => {\n      if (response.data.rtn === \"Success\") {\n        // sortData(response.data);\n        replaceUpdatedObject(response.data[\"RegistrationGetSample\"], masterData.RegistrationGetSample, \"npreregno\");\n        replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\n        replaceUpdatedObject(response.data[\"RegistrationGetTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\"); //  let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n        //let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n\n        masterData = { ...masterData,\n          selectedSample: response.data[\"selectedSample\"],\n          // selectedSubSample: masterData[\"selectedSubSample\"],\n          //selectedTest:masterData[\"selectedTest\"],\n          // RegistrationGetTest,\n          // RegistrationGetSubSample,\n          RegistrationParameter: masterData[\"RegistrationParameter\"]\n        };\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            openPortal: false,\n            loading: false,\n            showConfirmAlert: false,\n            regDateEditConfirmMessage: undefined,\n            loadEsign: false,\n            openModal: false,\n            loadPreregister: false,\n            selectedRecord: {},\n            showSample: undefined\n          }\n        }); // let inputData = {\n        //     masterData,\n        //     selectedTest: masterData.selectedTest,\n        //     ntransactiontestcode: masterData.selectedTest ?\n        //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\n        //     npreregno: masterData.selectedSample ?\n        //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\n        //     userinfo: inputParam.inputData.userinfo,\n        //     activeTestTab : masterData.activeTestTab,\n        //     screenName: masterData.activeTestTab,\n        //     resultDataState: inputParam.resultDataState,\n        //     testCommentDataState: inputParam.testCommentDataState,\n        // }\n        // dispatch(getTestChildTabDetail(inputData, true))\n      } else {\n        toast.info(response.data.rtn);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      }\n    }).catch(error => {\n      if (error.response.status === 500) {\n        toast.error(error.message);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      } else if (error.response.status === 302) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false,\n            regEditParam: inputParam,\n            showConfirmAlert: true,\n            parentPopUpSize: \"xl\",\n            regDateEditConfirmMessage: error.response.data,\n            showSample: undefined\n          }\n        });\n      } else {\n        toast.info(error.response.data);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            showSample: undefined\n          }\n        });\n      }\n    });\n  };\n}\nexport function cancelTestAction(inputParam, LoginProps) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/cancelTest\", inputParam.inputData).then(response => {\n      // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n      let masterData = { ...LoginProps,\n        selectedTest: response.data[\"selectedTest\"],\n        // RegistrationGetTest:response.data[\"RegistrationGetTest\"],\n        RegistrationGetTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\") //  RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, LoginProps.RegistrationGetSample, 'npreregno')\n\n      };\n      let respObject = {\n        masterData,\n        ...inputParam.inputData,\n        openModal: false,\n        loadEsign: false,\n        showConfirmAlert: false,\n        selectedRecord: {},\n        loading: false,\n        loadPreregister: false,\n        showSample: undefined\n      };\n      inputParam.postParamList[0]['clearFilter'] = 'no';\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.info(error.response.data.rtn);\n      }\n    });\n  };\n}\nexport function cancelSampleAction(inputParam, LoginProps) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/cancelSample\", inputParam.inputData).then(response => {\n      // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n      //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n      // }\n      replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n      replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n      let masterData = { ...LoginProps,\n        selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\n        selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\n        selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\")\n      };\n      let respObject = {\n        masterData,\n        ...inputParam.inputData,\n        loading: false,\n        loadEsign: false,\n        openModal: false,\n        showSample: undefined\n      };\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.info(error.response.data.rtn);\n      }\n    });\n  };\n}\nexport function addsubSampleRegistration(masterData, userinfo, regcolumnList, selectRecord, regchildColumnList, regSubSamplecomboComponents, regSubSamplewithoutCombocomponent, Map, ncontrolcode, specBasedComponent, specBasedTestPackage) {\n  return function (dispatch) {\n    const urlArray = [];\n    const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\n    urlArray[0] = timeZoneService;\n    const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n      parentcolumnlist: regcolumnList.filter(x => x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter' && x.readonly !== true),\n      childcolumnlist: regchildColumnList,\n      userinfo\n    });\n    urlArray[1] = actualService;\n\n    if (specBasedComponent) {\n      const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", { ...Map,\n        specBasedComponent: specBasedComponent,\n        userinfo\n      });\n      urlArray[2] = ComponentTestBySpec;\n    } else {\n      const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\n        nallottedspeccode: Map[\"nallottedspeccode\"],\n        slno: 1,\n        specBasedComponent: specBasedComponent,\n        specBasedTestPackage: specBasedTestPackage,\n        conditionalTestPackage: true,\n        nneedsubsample: Map[\"nneedsubsample\"]\n      });\n      urlArray[2] = TestGet;\n      const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\n        nallottedspeccode: Map[\"nallottedspeccode\"],\n        specBasedComponent: specBasedComponent,\n        specBasedTestPackage: specBasedTestPackage\n      });\n      urlArray[5] = TestPackageGet;\n      const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\n        nallottedspeccode: Map[\"nallottedspeccode\"],\n        specBasedComponent: specBasedComponent,\n        specBasedTestPackage: specBasedTestPackage\n      });\n      urlArray[6] = TestSectionGet;\n    }\n\n    const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\n      userinfo\n    });\n    urlArray[3] = currentDate;\n    const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\n      datecolumnlist: regSubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\n      userinfo\n    });\n    urlArray[4] = dateService;\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const timeZoneList = timeZoneMap.get(\"OptionList\");\n      const defaultTimeZone = {\n        label: userinfo.stimezoneid,\n        value: userinfo.ntimezonecode\n      };\n      const newcomboData = parentChildComboLoad(regcolumnList.filter(x => x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter' && x.readonly !== true), response[1].data, selectRecord, regchildColumnList, regSubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo);\n      let TestCombined = [];\n      let lstComponent = [];\n      let PackageData = [];\n      let TestSectionData = [];\n      const selectedRecord1 = newcomboData.selectedRecord;\n\n      if (specBasedComponent) {\n        const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n        lstComponent = lstComponentMap.get(\"OptionList\"); //Commented by Dhanushya for jira ETICA-22\n        // if (lstComponent.length > 0) {\n        //     selectedRecord1['ncomponentcode'] = { ...lstComponent[0] }\n        //     selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\n        //     selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\n        //     selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample\n        // }\n      } else {\n        //if (specBasedTestPackage) {\n        const PackageDataMap = constructOptionList(response[5].data.TestPackage || [], \"ntestpackagecode\", \"stestpackagename\", undefined, undefined, true);\n        PackageData = PackageDataMap.get(\"OptionList\");\n        const TestSectionDataMap = constructOptionList(response[6].data.TestSection || [], \"nsectioncode\", \"ssectionname\", undefined, undefined, true);\n        TestSectionData = TestSectionDataMap.get(\"OptionList\"); // if (PackageData.length === 0) {\n        //     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \n        // } \n        // }\n        // else {\n\n        TestCombined = response[2].data; // }\n      }\n\n      const comboData1 = newcomboData.comboData;\n      regSubSamplewithoutCombocomponent.map(componentrow => {\n        if (componentrow.inputtype === \"date\") {\n          if (componentrow.loadcurrentdate) {\n            selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[3].data) : \"\";\n            selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\n          } else if (componentrow.nperiodcode) {\n            selectedRecord1[componentrow.label + \"value\"] = response[4].data[componentrow.label] ? new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\n\n            if (componentrow.loadselecteddate) {\n              selectedRecord1[componentrow.label] = response[4].data[componentrow.label] ? new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\n            } //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\n            //    new Date(response[2].data[componentrow.label]):null;\n\n          } else {\n            selectedRecord1[componentrow.label + \"value\"] = new Date();\n          }\n\n          if (componentrow.hidebeforedate) {\n            selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"];\n          }\n\n          if (componentrow.hideafterdate) {\n            selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"];\n          }\n        } else if (componentrow.inputtype === \"radio\" || componentrow.inputtype === \"checkbox\" || componentrow.inputtype === \"predefineddropdown\") {\n          if (componentrow['radiodefaultvalue']) {\n            if (componentrow.inputtype === \"checkbox\") {\n              let val = '';\n              componentrow.radiodefaultvalue && componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\n                val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',');\n              });\n              selectedRecord1[componentrow.label] = val;\n            } else if (componentrow.inputtype === \"predefineddropdown\") {\n              selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ? componentrow.radiodefaultvalue : \"\";\n            } else {\n              selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ? componentrow.radiodefaultvalue.label : \"\";\n            }\n          } else {\n            if (componentrow.inputtype === \"radio\") {\n              selectedRecord1[componentrow.label] = componentrow.radioOptions ? componentrow.radioOptions.tags[0].text : \"\";\n            }\n          }\n        }\n      });\n      const inputParam = {\n        screenName: intl.formatMessage({\n          id: \"IDS_SUBSAMPLE\"\n        }),\n        showSaveContinue: false,\n        parentPopUpSize: \"lg\",\n        loading: false,\n        lstComponent,\n        openModal: true,\n        loadPrinter: false,\n        operation: \"create\",\n        loadRegSubSample: true,\n        selectedRecord: selectedRecord1,\n        regSubSamplecomboData: comboData1,\n        regSubSamplecomboComponents,\n        regSubSamplewithoutCombocomponent,\n        TestCombined,\n        regparentSubSampleColumnList: regcolumnList,\n        regchildSubSampleColumnList: regchildColumnList,\n        ncontrolCode: ncontrolcode,\n        timeZoneList,\n        defaultTimeZone,\n        masterData,\n        specBasedComponent,\n        specBasedTestPackage,\n        TestPackage: PackageData,\n        //ALPD-624\n        testskip: 0,\n        subsampleskip: 0,\n        TestSection: TestSectionData,\n        AllTest: TestCombined,\n        AllSection: TestSectionData\n      }; // if (specBasedComponent) {\n      //Added by Dhanushya for jira ETICA-22\n\n      if (specBasedComponent && selectedRecord1['ncomponentcode'] !== undefined) {\n        dispatch(componentTest(selectedRecord1, true, specBasedComponent, [], specBasedTestPackage, true, inputParam));\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: { ...inputParam\n          }\n        });\n      }\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function saveSubSample(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let requestUrl = '';\n\n    if (inputParam.isFileupload) {\n      requestUrl = rsapi.post(\"/registration/createSubSampleWithFile\", inputParam.formData);\n    } else {\n      requestUrl = rsapi.post(\"/registration/createSubSample\", inputParam.inputData);\n    }\n\n    return requestUrl //  rsapi.post(\"/registration/createSubSample\", inputParam.inputData)\n    .then(response => {\n      // let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], inputParam.inputData.masterData.RegistrationGetSample);\n      // let selectedSample = response.data[\"selectedSample\"];\n      let RegistrationGetSubSample = updatedObjectWithNewElement(inputParam.inputData.masterData.RegistrationGetSubSample, response.data[\"selectedSubSample\"]);\n      let RegistrationGetTest = response.data[\"selectedTest\"];\n      let selectedSubSample = response.data[\"selectedSubSample\"]; // RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\n\n      RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\n      let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\n      let RegistrationParameter = response.data[\"RegistrationParameter\"];\n      RegistrationParameter = RegistrationParameter ? getSameRecordFromTwoArrays(RegistrationParameter, selectedTest, 'ntransactiontestcode') : RegistrationParameter;\n      let RegistrationGetSample = replaceUpdatedObject(response.data[\"selectedSample\"], inputParam.inputData.masterData.RegistrationGetSample, 'npreregno');\n      let selectedSample = response.data[\"selectedSample\"];\n      let masterData = { ...inputParam.inputData.masterData\n      };\n      masterData = { ...masterData,\n        ...response.data,\n        selectedSubSample,\n        selectedTest,\n        RegistrationGetSubSample,\n        RegistrationGetTest,\n        RegistrationParameter,\n        selectedSample,\n        RegistrationGetSample\n      };\n      let respObject = {\n        masterData,\n        openModal: false,\n        loadEsign: false,\n        loading: false,\n        showSample: undefined,\n        selectedRecord: {},\n        loadRegSubSample: false,\n        showConfirmAlert: false,\n        subSampleConfirmMessage: undefined\n      };\n      inputParam.postParamList[0]['clearFilter'] = 'no';\n      inputParam.postParamList[1]['clearFilter'] = 'yes';\n      inputParam.postParamList[2]['clearFilter'] = 'yes';\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject)); //    dispatch({\n      //     type: DEFAULT_RETURN,\n      //     payload: {\n      //         masterData,\n      //         openModal: false,\n      //         loadEsign: false,\n      //         loading: false,\n      //         showSample: undefined,\n      //         selectedRecord: {},\n      //         loadRegSubSample:false\n      //     }\n      // });\n    }).catch(error => {\n      // console.log(error);\n      // toast.error(error.message);\n      // dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\n      if (error.response.status === 500) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            showConfirmAlert: false,\n            subSampleConfirmMessage: undefined\n          }\n        });\n        toast.error(error.message);\n      } else {\n        if (error.response.data.NeedConfirmAlert) {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              showConfirmAlert: true,\n              subSampleConfirmMessage: error.response.data.rtn,\n              subSampleConfirmParam: {\n                inputParam\n              },\n              loading: false\n            }\n          });\n        } else if (error.response.data.rtn) {\n          toast.warn(intl.formatMessage({\n            id: error.response.data.rtn\n          }));\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n        } else {\n          toast.error(error.message);\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false,\n              showConfirmAlert: false,\n              subSampleConfirmMessage: undefined\n            }\n          });\n        }\n      }\n    });\n  };\n}\nexport function getEditSubSampleComboService(inputParam, columnList, selectedRecord1, childColumnList, comboComponents, withoutCombocomponent, specBasedComponent) {\n  return function (dispatch) {\n    let {\n      userInfo,\n      operation,\n      masterData\n    } = { ...inputParam\n    };\n\n    if (masterData[\"selectedSubSample\"].length > 1 || masterData[\"selectedSubSample\"].findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"mastertoedit\"][inputParam.primaryKeyName]) === -1) {\n      inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"] = true;\n    }\n\n    masterData[\"selectedSubSample\"] = [];\n    masterData[\"selectedSubSample\"].push(inputParam[\"mastertoedit\"]);\n    inputParam.editSubSampleRegParam[\"npreregno\"] = inputParam[\"mastertoedit\"][\"npreregno\"]; //inputParam.editSubSampleRegParam[\"checkBoxOperation\"] = 3;\n\n    inputParam.editSubSampleRegParam[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT;\n    inputParam.editSubSampleRegParam[\"nfilterstatus\"] = inputParam[\"mastertoedit\"][\"ntransactionstatus\"];\n    inputParam.editSubSampleRegParam[\"napprovalconfigcode\"] = inputParam[\"mastertoedit\"][\"napprovalconfigcode\"]; //inputParam.editSubSampleRegParam[\"withoutgetparameter\"] = 3;\n\n    const ntransactionsamplecode = inputParam.mastertoedit[inputParam.primaryKeyName];\n\n    if (ntransactionsamplecode === undefined) {\n      toast.info(intl.formattedMessage({\n        id: \"IDS_SELECTVALIDSUBSAMPLE\"\n      }));\n    } else {\n      let urlArray = [];\n      const timeZoneService = rsapi.post(\"timezone/getTimeZone\"); // const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n      //     parentcolumnlist: columnList,\n      //     childcolumnlist: childColumnList,\n      //     userinfo: userInfo\n      // })\n\n      const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationSubSampleDetails\", { ...inputParam.editSubSampleRegParam,\n        ntransactionsamplecode,\n        parentcolumnlist: columnList,\n        childcolumnlist: childColumnList,\n        userinfo: userInfo\n      });\n      const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\n        datecolumnlist: withoutCombocomponent.filter(x => x.inputtype === \"date\"),\n        userinfo: userInfo\n      });\n      urlArray = [timeZoneService, selectedRegistration, dateService]; // if(specBasedComponent){\n      //     const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\n      //         ...Map,\n      //         specBasedComponent: specBasedComponent\n      //     })\n      //     urlArray.push(ComponentTestBySpec) \n      // }\n\n      dispatch(initRequest(true));\n      Axios.all(urlArray).then(response => {\n        let selectedRecord = { ...response[1].data[\"EditData\"]\n        };\n        selectedRecord = { ...selectedRecord,\n          ...selectedRecord['jsondata']\n        };\n        const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n        const timeZoneList = timeZoneMap.get(\"OptionList\");\n        const defaultTimeZone = {\n          label: userInfo.stimezoneid,\n          value: userInfo.ntimezonecode\n        }; // if (selectedRecord.ntransactionstatus !== transactionStatus.PREREGISTER) {\n        //     toast.info(intl.formatMessage({ id: \"IDS_SELECTPREREGISTERSUBSAMPLETOEDIT\" }));\n        //     dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\n        // }\n        //else {\n        //               let lstComponent=[]\n\n        if (specBasedComponent) {\n          selectedRecord[\"ncomponentcode\"] = {\n            label: selectedRecord[\"scomponentname\"],\n            value: selectedRecord[\"ncomponentcode\"]\n          };\n        }\n\n        const languagetypeCode = undefined;\n        const comboData = response[1].data;\n        delete comboData['EditData'];\n        let comboValues = {};\n\n        if (columnList.length > 0) {\n          columnList.map(x => {\n            if (x.inputtype === 'combo') {\n              if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \n                {\n                  if (comboData[x.label].length > 0) {\n                    if (comboData[x.label][0].label === undefined) {\n                      const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x);\n                      comboData[x.label] = optionList.get(\"OptionList\");\n                    } else {\n                      comboData[x.label] = comboData[x.label];\n                      const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x);\n                    }\n                  } else {\n                    comboData[x.label] = [];\n                  } //comboValues = childComboLoad(x, comboData, selectedRecord, \n                  //   childColumnList, withoutCombocomponent)\\\n\n\n                  comboValues = childComboLoadForEdit(x, comboData, selectedRecord, childColumnList, withoutCombocomponent);\n                } else {\n                comboValues = {\n                  \"comboData\": comboData\n                };\n              }\n            } else {\n              comboValues = {\n                comboData: comboData,\n                ...comboValues\n              };\n            }\n          });\n        } else {\n          comboValues = {\n            \"comboData\": comboData\n          };\n        } // withoutCombocomponent.map(date => {\n        //     if (date.inputtype === 'date')\n        //         selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\n        //             rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\";\n        // })\n\n\n        withoutCombocomponent.map(date => {\n          if (date.inputtype === 'date') {\n            selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ? rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\";\n\n            if (date.nperiodcode) {\n              selectedRecord[date.label + \"value\"] = response[2].data[date.label] ? new Date(response[2].data[date.label][\"datevalue\"]) : null;\n            } else {\n              selectedRecord[date.label + \"value\"] = new Date();\n            }\n\n            if (date.hidebeforedate) {\n              selectedRecord[date.label + \"min\"] = selectedRecord[date.label + \"value\"];\n            }\n\n            if (date.hideafterdate) {\n              selectedRecord[date.label + \"max\"] = selectedRecord[date.label + \"value\"];\n            }\n          }\n        });\n        selectedRecord = { ...selectedRecord\n        };\n\n        if (inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"] === true) {\n          if (masterData[\"searchedTest\"]) {\n            if (inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null) {\n              inputParam.searchTestRef.current.value = \"\";\n              masterData['searchedTest'] = undefined;\n            }\n          }\n\n          masterData = { ...masterData,\n            ...response[1].data[\"SubSampleChildDetail\"]\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            operation,\n            timeZoneList,\n            defaultTimeZone,\n            selectedRecord,\n            openModal: true,\n            ncontrolCode: inputParam.editSubSampleRegParam.ncontrolCode,\n            parentPopUpSize: \"lg\",\n            loading: false,\n            showSample: undefined,\n            regSubSamplecomboData: comboValues.comboData,\n            loadRegSubSample: true,\n            screenName: \"IDS_SUBSAMPLE\",\n            operation: \"update\",\n            specBasedComponent,\n            //  regRecordToEdit:recordToEdit\n            masterData,\n            withoutCombocomponent\n          }\n        }); // }\n      }).catch(error => {\n        //console.log(\"error:\", error);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.info(intl.formatMessage({\n            id: error.response.data\n          }));\n        }\n      });\n    }\n  };\n}\nexport function onUpdateSubSampleRegistration(inputParam, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let requestUrl = '';\n\n    if (inputParam.isFileupload) {\n      requestUrl = rsapi.post(\"/registration/updateRegistrationSubSampleWithFile\", inputParam.formData);\n    } else {\n      requestUrl = rsapi.post(\"/registration/updateRegistrationSubSample\", inputParam.inputData);\n    }\n\n    return requestUrl // rsapi.post(\"/registration/updateRegistrationSubSample\", inputParam.inputData)\n    .then(response => {\n      sortData(response.data);\n      replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\"); //replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      // replaceUpdatedObject(response.data[\"selectedTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\n      //  let RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];\n\n      let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n      masterData = { ...masterData,\n        // selectedSample: response.data[\"selectedSample\"],\n        selectedSubSample: response.data[\"selectedSubSample\"],\n        //selectedTest: response.data[\"selectedTest\"],\n        selectedTest: replaceUpdatedObject(response.data[\"RegistrationGetTest\"], masterData.selectedTest, \"ntransactiontestcode\"),\n        RegistrationGetTest,\n        // RegistrationGetSubSample,\n        RegistrationParameter: response.data[\"RegistrationParameter\"]\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          openModal: false,\n          loading: false,\n          showConfirmAlert: false,\n          regDateEditConfirmMessage: undefined,\n          loadEsign: false,\n          loadRegSubSample: false,\n          selectedRecord: {},\n          showSample: undefined,\n          screenName: intl.formatMessage({\n            id: \"IDS_SUBSAMPLE\"\n          })\n        }\n      }); // let inputData = {\n      //     masterData,\n      //     selectedTest: masterData.selectedTest,\n      //     ntransactiontestcode: masterData.selectedTest ?\n      //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\n      //     npreregno: masterData.selectedSample ?\n      //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\n      //     userinfo: inputParam.inputData.userinfo,\n      //     activeTestTab : masterData.activeTestTab,\n      //     screenName: masterData.activeTestTab,\n      //     resultDataState: inputParam.resultDataState,\n      //     testCommentDataState: inputParam.testCommentDataState,\n      // }\n      // dispatch(getTestChildTabDetail(inputData, true))\n    }).catch(error => {\n      if (error.response.status === 500) {\n        toast.error(error.message);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      } else if (error.response.status === 302) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false,\n            regEditParam: inputParam,\n            showConfirmAlert: true,\n            parentPopUpSize: \"xl\",\n            regDateEditConfirmMessage: error.response.data,\n            showSample: undefined\n          }\n        });\n      } else {\n        toast.info(error.response.data);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            showSample: undefined\n          }\n        });\n      }\n    });\n  };\n}\nexport function cancelSubSampleAction(inputParam, LoginProps) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/cancelSubSample\", inputParam.inputData).then(response => {\n      if (inputParam.inputData.nsampletypecode === SampleType.CLINICALTYPE && response.data.isMapped) {\n        replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n      }\n\n      replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n      let masterData = { ...LoginProps,\n        //selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\n        selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\n        selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\")\n      };\n\n      if (inputParam.inputData.nsampletypecode === SampleType.CLINICALTYPE && response.data.isMapped) {\n        masterData = { ...masterData,\n          selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\")\n        };\n      }\n\n      let respObject = {\n        masterData,\n        ...inputParam.inputData,\n        loading: false,\n        loadEsign: false,\n        openModal: false,\n        showSample: undefined\n      };\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.info(error.response.data.rtn);\n      }\n    });\n  };\n}\nexport function preregRecordToQuarantine(inputParam, LoginProps) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/quarantineRegistration\", inputParam.inputData).then(response => {\n      // replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n      // replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n      replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n      replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n      delete response.data[\"RegistrationGetSample\"];\n      delete response.data[\"RegistrationGetSubSample\"];\n      delete response.data[\"RegistrationGetTest\"];\n      let masterData = { ...LoginProps,\n        selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\n        selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\n        selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\")\n      };\n      let respObject = {\n        masterData,\n        loading: false,\n        loadEsign: false,\n        openModal: false,\n        showSample: undefined\n      };\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.info(error.response.data.rtn);\n      }\n    });\n  };\n}\nexport function getTestChildTabDetailRegistration(inputData, isServiceRequired) {\n  return function (dispatch) {\n    if (inputData.ntransactiontestcode === \"\") {\n      inputData.ntransactiontestcode = \"0\";\n    }\n\n    if (inputData.ntransactiontestcode && inputData.ntransactiontestcode.length > 0) {\n      let inputParamData = {\n        ntransactiontestcode: inputData.ntransactiontestcode,\n        npreregno: inputData.npreregno,\n        userinfo: inputData.userinfo,\n        ntransactionsamplecode: inputData.ntransactionsamplecode ? inputData.ntransactionsamplecode : inputData.selectedSubSample && inputData.selectedSubSample.map(item => item.ntransactionsamplecode).join(\",\"),\n        OrderCodeData: inputData.masterData && inputData.masterData.selectedSample && inputData.masterData.selectedSample.length > 0 ? inputData.masterData.selectedSample.map(item => item.hasOwnProperty(\"OrderCodeData\") ? item.OrderCodeData : -1).join(\",\") : null\n      };\n      let url = null;\n      let {\n        testtake\n      } = inputData;\n      let activeName = \"\";\n      let dataStateName = \"\";\n\n      switch (inputData.activeTestTab) {\n        case \"IDS_RESULTS\":\n          url = \"approval/getapprovalparameter\";\n          activeName = \"ApprovalParameter\";\n          dataStateName = \"resultDataState\";\n          break;\n\n        case \"IDS_PARAMETERRESULTS\":\n          url = \"registration/getregistrationparameter\";\n          activeName = \"RegistrationParameter\";\n          dataStateName = \"resultDataState\";\n          break;\n\n        case \"IDS_INSTRUMENT\":\n          url = \"resultentrybysample/getResultUsedInstrument\";\n          activeName = \"ResultUsedInstrument\";\n          dataStateName = \"instrumentDataState\";\n          break;\n\n        case \"IDS_MATERIAL\":\n          url = \"resultentrybysample/getResultUsedMaterial\";\n          break;\n\n        case \"IDS_TASK\":\n          url = \"resultentrybysample/getResultUsedTask\";\n          activeName = \"ResultUsedTasks\";\n          dataStateName = \"taskDataState\";\n          break;\n\n        case \"IDS_TESTATTACHMENTS\":\n          url = \"attachment/getTestAttachment\";\n          activeName = \"RegistrationTestAttachment\";\n          break;\n\n        case \"IDS_TESTCOMMENTS\":\n          url = \"comments/getTestComment\";\n          activeName = \"RegistrationTestComment\";\n          dataStateName = \"testCommentDataState\";\n          break;\n\n        case \"IDS_TESTHISTORY\":\n          url = \"history/getTestHistory\";\n          activeName = \"RegistrationTestHistory\";\n          dataStateName = \"registrationTestHistoryDataState\";\n          break;\n\n        case \"IDS_DOCUMENTS\":\n          url = \"approval/getapprovalparameter\";\n          break;\n\n        case \"IDS_RESULTCHANGEHISTORY\":\n          url = \"approval/getApprovalResultChangeHistory\";\n          activeName = \"ApprovalResultChangeHistory\";\n          dataStateName = \"resultChangeDataState\";\n          break;\n\n        case \"IDS_TESTAPPROVALHISTORY\":\n          url = \"approval/getApprovalHistory\";\n          activeName = \"ApprovalHistory\";\n          dataStateName = \"historyDataState\";\n          break;\n\n        case \"IDS_SAMPLEATTACHMENTS\":\n          url = \"attachment/getSampleAttachment\";\n          break;\n\n        case \"IDS_OUTSOURCEDETAILS\":\n          url = \"registration/getOutsourceDetails\";\n          break;\n\n        case \"IDS_EXTERNALORDERREPORTS\":\n          url = \"registration/getExternalOrderAttachment\";\n          break;\n\n        case \"IDS_TESTHISTORY\":\n          url = \"history/getTestHistory\";\n          break;\n\n        default:\n          url = \"approval/getapprovalparameter\";\n          activeName = \"ApprovalParameter\";\n          dataStateName = \"resultDataState\";\n          break;\n      }\n\n      if (url !== null) {\n        dispatch(initRequest(true));\n\n        if (isServiceRequired) {\n          rsapi.post(url, inputParamData).then(response => {\n            let skipInfo = {};\n            let responseData = { ...response.data,\n              selectedSample: inputData.selectedSample || inputData.masterData.selectedSample,\n              selectedTest: inputData.selectedTest\n            }; //responseData = sortData(responseData)\n            // fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\",inputData.removeElementFromArray);\n\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\n            let masterData = { ...inputData.masterData,\n              selectedSample: inputData.selectedSample || inputData.masterData.selectedSample,\n              selectedTest: inputData.selectedTest,\n              selectedPreregno: inputData.npreregno,\n              selectedSampleCode: inputData.ntransactionsamplecode,\n              selectedTestCode: inputData.ntransactiontestcode,\n              activeTabIndex: inputData.activeTabIndex,\n              activeTabId: inputData.activeTabId\n            };\n\n            if (inputData[dataStateName] && masterData[activeName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n              skipInfo = {\n                [dataStateName]: { ...inputData[dataStateName],\n                  skip: 0,\n                  sort: undefined,\n                  filter: undefined\n                }\n              };\n            } else {\n              skipInfo = { ...skipInfo,\n                [dataStateName]: { ...inputData[dataStateName],\n                  sort: undefined,\n                  filter: undefined\n                }\n              };\n            }\n\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                masterData,\n                activeTabIndex: inputData.activeTabIndex,\n                activeTabId: inputData.activeTabId,\n                loading: false,\n                showFilter: false,\n                activeTestTab: inputData.activeTestTab,\n                screenName: inputData.screenName,\n                testtake,\n                testskip: undefined,\n                ...skipInfo\n              }\n            });\n          }).catch(error => {\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                loading: false\n              }\n            });\n\n            if (error.response.status === 500) {\n              toast.error(error.message);\n            } else {\n              toast.info(error.response.data);\n            }\n          });\n        } else {\n          fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\", inputData.removeElementFromArray);\n          let skipInfo = {};\n          let masterData = { ...inputData.masterData,\n            selectedTest: inputData.selectedTest,\n            selectedPreregno: inputData.npreregno,\n            selectedSampleCode: inputData.ntransactionsamplecode,\n            selectedTestCode: inputData.ntransactiontestcode\n          };\n\n          if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n            skipInfo = {\n              [dataStateName]: { ...inputData[dataStateName],\n                skip: 0,\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          } else {\n            skipInfo = { ...skipInfo,\n              [dataStateName]: { ...inputData[dataStateName],\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          }\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              masterData,\n              loading: false,\n              showFilter: false,\n              activeTestTab: inputData.activeTestTab,\n              screenName: inputData.screenName,\n              testtake,\n              testskip: undefined,\n              ...skipInfo\n            }\n          });\n        }\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...inputData.masterData\n            },\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab\n          }\n        });\n      }\n    } else {\n      let {\n        ApprovalParameter,\n        ResultUsedInstrument,\n        ResultUsedTasks,\n        RegistrationTestAttachment,\n        ApprovalResultChangeHistory,\n        RegistrationTestComment,\n        ApprovalHistory,\n        RegistrationTestHistory\n      } = inputData.masterData;\n\n      switch (inputData.activeTestTab) {\n        case \"IDS_RESULTS\":\n          ApprovalParameter = [];\n          break;\n\n        case \"IDS_INSTRUMENT\":\n          ResultUsedInstrument = [];\n          break;\n\n        case \"IDS_TASK\":\n          ResultUsedTasks = [];\n          break;\n\n        case \"IDS_TESTATTACHMENTS\":\n          RegistrationTestAttachment = [];\n          break;\n\n        case \"IDS_RESULTCHANGEHISTORY\":\n          ApprovalResultChangeHistory = [];\n          break;\n\n        case \"IDS_TESTCOMMENTS\":\n          RegistrationTestComment = [];\n          break;\n\n        case \"IDS_APPROVALHISTORY\":\n          ApprovalHistory = [];\n          break;\n\n        case \"IDS_TESTHISTORY\":\n          RegistrationTestHistory = [];\n          break;\n\n        default:\n          ApprovalParameter = [];\n          break;\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            selectedTest: [],\n            ApprovalParameter,\n            ResultUsedInstrument,\n            ResultUsedTasks,\n            RegistrationTestAttachment,\n            ApprovalResultChangeHistory,\n            RegistrationTestComment,\n            ApprovalHistory,\n            RegistrationTestHistory\n          },\n          loading: false,\n          activeTabIndex: inputData.activeTabIndex,\n          activeTabId: inputData.activeTabId\n        }\n      });\n    }\n  };\n}\nexport const toTimestamp = strDate => {\n  // const dt = new Date(strDate).getTime();\n  // return dt / 1000;\n  const dt = strDate.getTime();\n  return dt;\n};\nexport function getDynamicFilter(inputParam) {\n  if (inputParam.component.inputtype === 'frontendsearchfilter') {\n    return function (dispatch) {\n      dispatch(initRequest(true));\n      rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilter\", { ...inputParam.component,\n        userinfo: inputParam.userinfo\n      }).then(response => {\n        const source = inputParam.component.source;\n        const languageTypeCode = inputParam.userinfo.slanguagetypecode;\n        const lstData = response.data[inputParam.component.label]; // const responseparam={}\n\n        const gridColumns = [];\n        const fields = [];\n        const datefileds = [];\n        const multilingual = [];\n        inputParam.component.filterfields.map(item => {\n          fields.push(filterObject(item, languageTypeCode, response.data, inputParam.component));\n\n          if (item.ismultilingual) {\n            multilingual.push(item.columnname);\n          }\n\n          if (item.filterinputtype === \"date\") {\n            datefileds.push(item.columnname);\n          }\n\n          if (item.filterinputtype !== 'predefinednumeric') {\n            gridColumns.push(creategridColumns(item, languageTypeCode));\n          }\n        });\n        const optionList = lstData.map(item => {\n          const jsondata = item[source] ? item[source].value ? JSON.parse(item[source].value) : item.jsondata : item.jsondata;\n          datefileds.map(x => {\n            jsondata[x + \"timestamp\"] = toTimestamp(rearrangeDateFormatforKendoDataTool(inputParam.userinfo, jsondata[x]));\n          });\n          multilingual.map(mul => {\n            jsondata[mul] = jsondata[mul][languageTypeCode] || jsondata[mul]['en-US'];\n          });\n          return jsondata;\n        });\n        let map = {};\n\n        if (inputParam.type === 'design') {\n          map = { ...map,\n            showFilter: true,\n            selectedComponentpath: inputParam.selectedComponentpath\n          };\n        } else {\n          map = { ...map,\n            loadCustomSearchFilter: true\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            lstPatient: optionList,\n            gridColumns,\n            fields,\n            //  loadCustomSearchFilter: true\n            loading: false,\n            screenName: inputParam.component.displayname[languageTypeCode],\n            seletedFilterComponent: inputParam.component,\n            kendoSkip: 0,\n            kendoTake: 5,\n            kendoFilter: inputParam.component.kendoFilter || {\n              logic: \"and\",\n              filters: []\n            },\n            //awesomeTree: undefined,\n            //awesomeConfig: undefined,\n            // showFilter: true,\n            ...map\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.info(error.response.data.rtn);\n        }\n      });\n    };\n  } else if (inputParam.component.inputtype === \"backendsearchfilter\") {\n    return function (dispatch) {\n      dispatch(initRequest(true));\n      rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilterpredefined\", { ...inputParam.component,\n        userinfo: inputParam.userinfo\n      }).then(response => {\n        const languageTypeCode = inputParam.userinfo.slanguagetypecode;\n        const {\n          fields,\n          gridColumns\n        } = filterObjectForReactAwesomeFilter(inputParam.component.filterfields, languageTypeCode, response.data, inputParam.component);\n        let map = {};\n        let awesomeTree = inputParam.component.awesomeTree ? checkTree(loadTree(inputParam.component.awesomeTree), inputParam.component.awesomeConfig) : undefined;\n\n        if (inputParam.component.awesomeTree && inputParam.component.filterquery && inputParam.component.filterquery !== '') {\n          map = {\n            filterquery: inputParam.component.filterquery\n          };\n\n          if (inputParam.type === 'design') {\n            map = { ...map,\n              filterquery: inputParam.component.filterquery,\n              selectedFieldRecord: { ...inputParam.component,\n                awesomeTree: awesomeTree\n              }\n            };\n          }\n        } else {\n          map = {\n            filterquery: ''\n          };\n\n          if (inputParam.type === 'design') {\n            map = { ...map,\n              filterquery: inputParam.component.filterquery,\n              selectedFieldRecord: { ...inputParam.component,\n                awesomeTree: awesomeTree\n              }\n            };\n          }\n        }\n\n        if (inputParam.type === 'design') {\n          map = { ...map,\n            showFilter: true,\n            selectedComponentpath: inputParam.selectedComponentpath\n          };\n        } else {\n          map = { ...map,\n            loadCustomSearchFilter: true\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            lstPatient: [],\n            gridColumns,\n            fields,\n            // loadCustomSearchFilter: true\n            loading: false,\n            screenName: inputParam.component.displayname[languageTypeCode],\n            seletedFilterComponent: inputParam.component,\n            kendoSkip: 0,\n            kendoTake: 5,\n            awesomeTree,\n            onExecute: true,\n            // awesomeConfig: inputParam.component.awesomeConfig || undefined,\n            // showFilter: true,\n            ...map\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.info(error.response.data.rtn);\n        }\n      });\n    };\n  }\n}\nlet datapredef = {};\n\nconst CustomFilter = props => {\n  const {\n    filter,\n    data = [],\n    defaultItem\n  } = props;\n\n  const onChange = event => {\n    props.onFilterChange.call(undefined, {\n      nextFilter: { ...props.filter,\n        value: event.target.value.value\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(ComboBox, {\n    onChange: onChange,\n    data: filter.field ? datapredef[filter.field] : [],\n    textField: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 5079,\n      columnNumber: 12\n    }\n  });\n};\n\nexport function creategridColumns(item, languageTypeCode) {\n  let obj = {};\n\n  if (item.filterinputtype !== 'predefinednumeric') {\n    return {\n      field: item.columnname,\n      title: item.displayname[languageTypeCode],\n      width: \"250px\"\n    };\n  }\n}\nexport function filterObjectForReactAwesomeFilter(filterFields, languageTypeCode, resposedata, component) {\n  let obj = {};\n  obj['fields'] = {};\n  obj['gridColumns'] = [];\n  filterFields.map(item => {\n    if (item.filterinputtype === 'predefinednumeric' || item.filterinputtype === 'predefinedtext') {\n      const optionList = resposedata[item.predefinedtablename].map(data => {\n        const jsondata = data[item.predefinedtablename] ? data[item.predefinedtablename].value ? JSON.parse(data[item.predefinedtablename].value) : data.jsondata : data.jsondata;\n        jsondata['title'] = item.predefinedismultilingual ? jsondata[item.predefineddisplaymember][languageTypeCode] || jsondata[item.predefineddisplaymember]['en-US'] : jsondata[item.predefineddisplaymember];\n        jsondata['value'] = jsondata[component.valuemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember];\n        return jsondata;\n      });\n      datapredef[item.columnname] = optionList;\n    }\n\n    switch (item.filterinputtype) {\n      case \"text\":\n        obj['fields'][item.type === 'dynamic' ? item.ismultilingual ? \"jsondata->'\" + item.columnname + \"'->>'\" + languageTypeCode + \"'\" : \"jsondata->>'\" + item.columnname + \"'\" : \"\\\"\" + item.columnname + \"\\\"\"] = {\n          label: item.displayname[languageTypeCode],\n          type: \"text\",\n          valueSources: [\"value\", \"func\"],\n          mainWidgetProps: {\n            \"valueLabel\": \"Name\",\n            \"valuePlaceholder\": intl.formatMessage({\n              id: \"IDS_ENTER\"\n            }) + \" \" + item.displayname[languageTypeCode]\n          }\n        };\n        break;\n\n      case \"numeric\":\n        obj['fields'][item.type === 'dynamic' ? \"(jsondata->>'\" + item.columnname + \"')::int\" : \"\\\"\" + item.columnname + \"\\\"\"] = {\n          label: item.displayname[languageTypeCode],\n          type: \"number\",\n          valueSources: [\"value\"],\n          fieldSettings: { ...item.numericcondition\n          }\n        };\n        break;\n\n      case \"date\":\n        obj['fields'][item.type === 'dynamic' ? \"jsondata->>'\" + item.columnname + \"'\" : \"\\\"\" + item.columnname + \"\\\"\"] = {\n          label: item.displayname[languageTypeCode],\n          type: \"date\",\n          valueSources: [\"value\"]\n        };\n        break;\n\n      case \"predefinednumeric\":\n        obj['fields'][item.type === 'dynamic' ? \"(jsondata->>'\" + item.columnname + \"')::int\" : \"\\\"\" + item.columnname + \"\\\"\"] = {\n          label: item.displayname[languageTypeCode],\n          type: \"select\",\n          valueSources: [\"value\"],\n          fieldSettings: {\n            listValues: datapredef[item.columnname]\n          }\n        };\n        break;\n\n      case \"predefinedtext\":\n        obj['fields'][item.type === 'dynamic' ? item.ismultilingual ? \"jsondata->'\" + item.columnname + \"'->>'\" + languageTypeCode + \"'\" : \"jsondata->>'\" + item.columnname + \"'\" : \"\\\"\" + item.columnname + \"\\\"\"] = {\n          label: item.displayname[languageTypeCode],\n          type: \"select\",\n          valueSources: [\"value\"],\n          fieldSettings: {\n            listValues: datapredef[item.columnname]\n          }\n        };\n        break;\n    }\n\n    const gridColumns = creategridColumns(item, languageTypeCode);\n\n    if (item.filterinputtype !== 'predefinednumeric') {\n      obj['gridColumns'].push(gridColumns);\n    }\n  });\n  return obj;\n}\nexport function filterObject(item, languageTypeCode, resposedata, component, isMultiFilter) {\n  let obj = {};\n  let preobj = {};\n\n  if (item.filterinputtype === 'predefinednumeric' || item.filterinputtype === 'predefinedtext') {\n    const optionList = resposedata[item.predefinedtablename].map(data => {\n      const jsondata = data[item.predefinedtablename] ? data[item.predefinedtablename].value ? JSON.parse(data[item.predefinedtablename].value) : data.jsondata : data.jsondata;\n      jsondata['text'] = item.predefinedismultilingual ? jsondata[item.predefineddisplaymember][languageTypeCode] || jsondata[item.predefineddisplaymember]['en-US'] : jsondata[item.predefineddisplaymember];\n      jsondata['value'] = jsondata[component.valuemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember]; //delete jsondata.jsondata\n\n      return jsondata;\n    });\n    datapredef[item.columnname] = optionList; // preobj = {\n    //     predefdata: optionList, predefineddisplaymember: item.predefineddisplaymember,\n    //     predefinedvaluemember: item.columnname\n    // }\n  }\n\n  switch (item.filterinputtype && item.filterinputtype.toLowerCase()) {\n    case \"text\":\n      return obj = {\n        name: item.columnname,\n        label: item.displayname[languageTypeCode],\n        filter: TextFilter,\n        operators: Operators.text\n      };\n\n    case \"numeric\":\n      return obj = {\n        name: item.columnname,\n        label: item.displayname[languageTypeCode],\n        filter: NumericFilter,\n        operators: Operators.numeric\n      };\n\n    case \"date\":\n      if (isMultiFilter) {\n        return obj = {\n          name: item.columnname,\n          // + \"timestamp\",\n          label: item.displayname[languageTypeCode],\n          filter: DateFilter,\n          operators: Operators.date\n        };\n      } else {\n        return obj = {\n          name: item.columnname + \"timestamp\",\n          label: item.displayname[languageTypeCode],\n          filter: DateFilter,\n          operators: Operators.date\n        };\n      }\n\n    case \"predefinednumeric\":\n      return obj = {\n        name: item.columnname,\n        label: item.displayname[languageTypeCode],\n        filter: CustomFilter,\n        operators: Operators.text // operators: Operators.numeric,\n\n      };\n\n    case \"predefinedtext\":\n      return obj = {\n        name: item.columnname,\n        label: item.displayname[languageTypeCode],\n        filter: CustomFilter,\n        operators: Operators.text\n      };\n\n    default:\n      return obj = {\n        name: item.columnname,\n        label: item.displayname[languageTypeCode],\n        filter: TextFilter,\n        operators: Operators.text\n      };\n  } //return obj;\n\n}\nexport function getDynamicFilterExecuteData(inputParam) {\n  return function (dispatch) {\n    let obj = { ...inputParam.component,\n      filterquery: inputParam.filterquery,\n      userinfo: inputParam.userinfo\n    };\n    dispatch(initRequest(true));\n    rsapi.post(\"/dynamicpreregdesign/getdynamicfilterexecutedata\", obj).then(response => {\n      const source = inputParam.component.source;\n      const languageTypeCode = inputParam.userinfo.slanguagetypecode;\n      const lstData = response.data[inputParam.component.label];\n      const multilingual = [];\n      inputParam.component.filterfields.map(item => {\n        if (item.ismultilingual) {\n          multilingual.push(item.columnname);\n        }\n      });\n      const optionList = lstData.map(item => {\n        const jsondata = item[source] ? item[source].value ? JSON.parse(item[source].value) : item.jsondata : item.jsondata;\n        multilingual.map(mul => {\n          jsondata[mul] = jsondata[mul][languageTypeCode] || jsondata[mul]['en-US'];\n        }); // let label = isMultiLingual ?\n        //   jsondata[optionValue]\n        //   [languageTypeCode] || jsondata[optionValue]['en-US']\n        //   : jsondata[optionValue];\n\n        return jsondata;\n      });\n\n      if (inputParam.userinfo.nformcode === 161) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            lstPatient: optionList,\n            onExecute: false,\n            loading: false,\n            screenName: inputParam.component.displayname[languageTypeCode]\n          }\n        });\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            lstPatient: optionList,\n            // onExecute: false,\n            loading: false,\n            screenName: inputParam.component.displayname[languageTypeCode]\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.info(error.response.data.rtn);\n      }\n    });\n  };\n}\nexport function rearrangeDateFormatforKendoDataTool(userInfo, dateValue) {\n  let splitChar = \"/\";\n\n  if (dateValue !== undefined) {\n    const index = userInfo.ssitedatetime && userInfo.ssitedatetime.indexOf(\"/\" || \"-\");\n    if (index !== -1) splitChar = userInfo.ssitedatetime.substring(index, index + 1);\n  } //   console.log(\"splitChar:\", splitChar);\n\n\n  if ((splitChar === \"/\" || splitChar === \"-\") && typeof dateValue === \"string\") {\n    const firstField = userInfo.ssitedatetime && userInfo.ssitedatetime.split(splitChar)[0]; // console.log(\"firstField:\", firstField);\n\n    const timeSplitChar = dateValue.indexOf(\"T\") !== -1 ? \"T\" : \" \";\n    const datetime = dateValue.split(timeSplitChar);\n    const dateArray = datetime[0].split(splitChar);\n\n    if (firstField === \"dd\") {\n      const day = dateArray[0];\n      const month = dateArray[1];\n      const year = dateArray[2];\n      const time = datetime[1] || \"00:00:00\";\n      const formatted = year + \"-\" + month + \"-\" + day + \"T\" + time;\n      return new Date(formatted);\n    } else if (firstField === \"yyyy\") {\n      const year = dateArray[0];\n      const month = dateArray[1];\n      const day = dateArray[2];\n      const time = datetime[1] || \"00:00:00\";\n      const formatted = year + \"-\" + month + \"-\" + day + \"T\" + time;\n      return new Date(formatted);\n    } else {\n      return new Date(dateValue);\n    }\n  } else {\n    return dateValue;\n  }\n}\nexport function preRegDispatch(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    dispatch({\n      type: DEFAULT_RETURN,\n      payload: { ...inputParam\n      }\n    });\n  };\n}\nexport function validateEsignforRegistration(inputParam) {\n  return dispatch => {\n    dispatch(initRequest(true));\n    return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData).then(response => {\n      if (response.data === \"Success\") {\n        const methodUrl = \"registration\";\n        inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\n\n        if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()] && inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]) {\n          delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];\n          delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];\n          delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];\n          delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];\n        } //dispatch(inputParam[\"screenData\"][\"inputParam\"].performAction(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"]))\n\n\n        dispatch(dispatchMethods(inputParam[\"screenData\"]));\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.info(error.response.data);\n      }\n    });\n  };\n}\n\nfunction dispatchMethods(screenData) {\n  return dispatch => {\n    let action = screenData.inputParam.action;\n\n    switch (action) {\n      case \"preregister\":\n        dispatch(insertRegistration(screenData.inputParam, screenData.masterData));\n        break;\n\n      case \"editSample\":\n        dispatch(updateRegistration(screenData.inputParam, screenData.masterData, 'openModal'));\n        break;\n\n      case \"accept\":\n        dispatch(acceptRegistration(screenData.inputParam, screenData.masterData));\n        break;\n\n      case \"quarantine\":\n        dispatch(preregRecordToQuarantine(screenData.inputParam, screenData.masterData));\n        break;\n\n      case \"cancelTest\":\n        dispatch(cancelTestAction(screenData.inputParam, screenData.masterData));\n        break;\n\n      case \"cancelSample\":\n        dispatch(cancelSampleAction(screenData.inputParam, screenData.masterData));\n        break;\n\n      case \"addregsourcecountry\":\n        dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"));\n        break;\n\n      case \"deleteregsourcecountry\":\n        dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"));\n        break;\n\n      case \"printer\":\n        dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"));\n        break;\n\n      case \"editSubSample\":\n        dispatch(onUpdateSubSampleRegistration(screenData.inputParam, screenData.masterData)); //ALPD-1128\n\n        break;\n\n      case \"cancelSubSample\":\n        dispatch(cancelSubSampleAction(screenData.inputParam, screenData.masterData));\n        break;\n\n      case \"adhocTest\":\n        dispatch(createAdhocTest(screenData.inputParam, screenData.masterData));\n        break;\n\n      default:\n        break;\n    }\n  };\n}\n\nexport function getStorageCategoryForSendToStore(storeInputParam, selectedRecord, sampleDetails) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    const userInfo = storeInputParam.userInfo;\n    let masterData = storeInputParam.masterData;\n    const sendToStoreId = storeInputParam.controlcode;\n    const geStorageCategory = rsapi.post(\"/storagecategory/getStorageCategory\", {\n      'userinfo': userInfo\n    });\n    const getUnit = rsapi.post(\"/unit/getUnit\", {\n      'userinfo': userInfo\n    });\n    const getApprovedLocation = rsapi.post(\"/samplestoragemaster/getSampleQty\", sampleDetails);\n    let urlArray = [geStorageCategory, getUnit, getApprovedLocation]; ///////////////////////////////\n\n    if (sampleDetails.needSubSample) {\n      if (masterData[\"selectedSubSample\"].length > 1 || masterData[\"selectedSubSample\"].findIndex(x => x[storeInputParam.primaryKeyName] === storeInputParam[\"mastersendtostore\"][storeInputParam.primaryKeyName]) === -1) {\n        storeInputParam.subSampleRegParam[\"getSubSampleChildDetail\"] = true;\n      }\n\n      masterData[\"selectedSubSample\"] = [];\n      masterData[\"selectedSubSample\"].push(storeInputParam[\"mastersendtostore\"]); // storeInputParam.subSampleRegParam[\"npreregno\"] = storeInputParam[\"mastersendtostore\"][\"npreregno\"];\n      // storeInputParam.subSampleRegParam[\"checkBoxOperation\"] = 3;\n      // storeInputParam.subSampleRegParam[\"nfilterstatus\"] = storeInputParam[\"mastersendtostore\"][\"ntransactionstatus\"];\n      // storeInputParam.subSampleRegParam[\"napprovalconfigcode\"] = storeInputParam[\"mastersendtostore\"][\"napprovalconfigcode\"];\n\n      let inputParamData = {\n        nsampletypecode: storeInputParam[\"subSampleRegParam\"].nsampletypecode,\n        nregtypecode: storeInputParam[\"subSampleRegParam\"].nregtypecode,\n        nregsubtypecode: storeInputParam[\"subSampleRegParam\"].nregsubtypecode,\n        npreregno: String(storeInputParam[\"mastersendtostore\"].npreregno),\n        ntransactionsamplecode: String(storeInputParam[\"mastersendtostore\"].ntransactionsamplecode),\n        ntransactionstatus: storeInputParam[\"mastersendtostore\"].ntransactionstatus,\n        napprovalconfigcode: storeInputParam[\"mastersendtostore\"].napprovalconfigcode,\n        activeTestTab: storeInputParam[\"subSampleRegParam\"].activeTestTab,\n        activeSampleTab: storeInputParam[\"subSampleRegParam\"].activeSampleTab,\n        activeSubSampleTab: storeInputParam[\"subSampleRegParam\"].activeSubSampleTab,\n        userinfo: storeInputParam.userInfo,\n        ndesigntemplatemappingcode: storeInputParam[\"subSampleRegParam\"].ndesigntemplatemappingcode,\n        checkBoxOperation: storeInputParam[\"masterData\"].checkBoxOperation,\n        nneedsubsample: storeInputParam[\"subSampleRegParam\"].nneedsubsample\n      };\n      urlArray.push(rsapi.post(\"registration/getRegistrationTest\", inputParamData));\n    } else {\n      if (masterData[\"selectedSample\"].length > 1 || masterData[\"selectedSample\"].findIndex(x => x[storeInputParam.primaryKeyName] === storeInputParam[\"mastersendtostore\"][storeInputParam.primaryKeyName]) === -1) {\n        storeInputParam.mainSampleRegParam[\"getSampleChildDetail\"] = true;\n      }\n\n      masterData[\"selectedSample\"] = [];\n      masterData[\"selectedSample\"].push(storeInputParam[\"mastersendtostore\"]);\n      const inputParamData = {\n        nsampletypecode: storeInputParam.mainSampleRegParam.nsampletypecode,\n        nregtypecode: storeInputParam.mainSampleRegParam.nregtypecode,\n        nregsubtypecode: storeInputParam.mainSampleRegParam.nregsubtypecode,\n        npreregno: String(storeInputParam.mastersendtostore.npreregno),\n        ntransactionstatus: storeInputParam.mastersendtostore.ntransactionstatus,\n        napprovalconfigcode: storeInputParam.mastersendtostore.napprovalconfigcode,\n        activeTestTab: storeInputParam.mainSampleRegParam.activeTestTab,\n        activeSampleTab: storeInputParam.mainSampleRegParam.activeTestTab,\n        activeSubSampleTab: storeInputParam.mainSampleRegParam.activeTestTab,\n        userinfo: storeInputParam.userInfo,\n        ndesigntemplatemappingcode: storeInputParam.mainSampleRegParam.ndesigntemplatemappingcode,\n        nneedsubsample: storeInputParam.mainSampleRegParam.nneedsubsample,\n        // ntype: storeInputParam.masterData.checkBoxOperation === 7 ? 4 : undefined,\n        ntype: storeInputParam.masterData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL ? 4 : undefined,\n        // checkBoxOperation: storeInputParam.masterData.nneedsubsample === true ?\n        //     storeInputParam.masterData.checkBoxOperation === 5 ? 3 : storeInputParam.masterData.checkBoxOperation : storeInputParam.mastersendtostore.checkBoxOperation\n        checkBoxOperation: storeInputParam.masterData.nneedsubsample === true ? storeInputParam.masterData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS ? checkBoxOperation.SINGLESELECT : storeInputParam.masterData.checkBoxOperation : storeInputParam.mastersendtostore.checkBoxOperation\n      };\n      urlArray.push(rsapi.post(\"registration/getRegistrationSubSample\", inputParamData));\n    }\n\n    Axios.all(urlArray).then(response => {\n      //console.log(\"res:\", response);\n      if (response[2].data[\"ReturnStatus\"] !== undefined) {\n        toast.info(response[2].data[\"ReturnStatus\"]);\n        masterData = { ...masterData,\n          ...response[3].data\n        };\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            // openChildModal: true,\n            // operation: \"sendToStore\",\n            ncontrolcode: sendToStoreId,\n            selectedRecord,\n            npreregno: sampleDetails.npreregno,\n            ntransactionsamplecode: sampleDetails.ntransactionsamplecode\n          }\n        });\n      } else {\n        const conditionMap = constructOptionList(response[0].data, \"nstoragecategorycode\", \"sstoragecategoryname\", false, false, true);\n        const conditionMaster = conditionMap.get(\"OptionList\");\n        const conditionUnitMap = constructOptionList(response[1].data, \"nunitcode\", \"sunitname\", false, false, true);\n        const conditionUnitMaster = conditionUnitMap.get(\"OptionList\");\n        let isneedSubSampleQty = false;\n        let approvedTreeData = [];\n        selectedRecord[\"nsamplestoragelocationcode\"] = [];\n        selectedRecord[\"nstoragecategorycode\"] = [];\n        selectedRecord[\"nsampleqty\"] = undefined;\n        selectedRecord[\"sampleToStore\"] = sampleDetails.sample === undefined ? \"\" : sampleDetails.sample;\n\n        if (response[2].data !== null && response[2].data[\"isNeedSubSampleQty\"] && response[2].data[\"isNeedSubSampleQty\"] !== \"\") {\n          isneedSubSampleQty = false;\n        } else {\n          isneedSubSampleQty = true;\n        }\n\n        if (response[2].data !== null && response[2].data.unit && response[2].data.unit.value !== undefined) {\n          conditionUnitMaster.map(item => item.value === response[2].data.unit.value ? selectedRecord[\"nunitcode\"] = {\n            \"label\": item.label,\n            \"value\": item.value,\n            \"item\": item.item\n          } : \"\");\n        }\n\n        masterData = { ...masterData,\n          storageCategory: conditionMaster,\n          approvedTreeData,\n          unitMaster: conditionUnitMaster,\n          ...response[3].data\n        };\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            openChildModal: true,\n            operation: \"sendToStore\",\n            ncontrolcode: sendToStoreId,\n            selectedRecord,\n            npreregno: sampleDetails.npreregno,\n            ntransactionsamplecode: sampleDetails.ntransactionsamplecode,\n            isneedSubSampleQty\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 503) {\n        toast.error(error.message);\n      } else {\n        toast.info(error.response.data);\n      }\n    });\n  };\n}\nexport function UpdateExternalOrderStatus(portallist, inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(String(inputParam.inputData[\"url\"]) + \"/portal/UpdateMultiSampleStatus\", JSON.stringify(portallist), {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response !== undefined && error.response.status === 500) {\n        toast.error(error.message);\n      } else if (error.response === undefined) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function autoExternalComponentLoadBasedOnSpec(dispatchData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getSampleBasedOnExternalOrder\", {\n      'nexternalordercode': dispatchData.selectedRecord[\"Order\"] ? dispatchData.selectedRecord[\"Order\"].value : -1,\n      \"nexternalordersamplecode\": dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1\n    }).then(response => {\n      let Sample = response.data.Sample; //console.log(\"sample:\", Sample);\n\n      let Test1 = response.data.Test;\n      let subSampleDataGridList = [];\n      let Component = [];\n      const Test = {};\n      Sample.map((sample, index) => {\n        let saveComponent = {};\n        saveComponent[\"slno\"] = index;\n        saveComponent['jsondata'] = {};\n        saveComponent['jsonuidata'] = {};\n        saveComponent['ncomponentcode'] = sample['ncomponentcode'];\n        saveComponent['nspecsampletypecode'] = sample['nspecsampletypecode'];\n        saveComponent['scomponentname'] = sample['scomponentname']; //saveComponent['jsondata']['ncomponentcode'] = { label: sample['scomponentname'], value: sample['ncomponentcode'] }\n        // saveComponent['jsonuidata']['ncomponentcode'] = sample['scomponentname']\n        //  saveComponent['jsondata']['scomponentname'] =  sample['scomponentname']\n\n        saveComponent['jsonuidata']['scomponentname'] = sample['scomponentname'];\n        saveComponent['jsondata']['External Sample ID_child'] = sample['sexternalsampleid'];\n        saveComponent['jsonuidata']['External Sample ID_child'] = sample['sexternalsampleid'];\n        saveComponent['jsondata']['sampleorderid'] = sample['sexternalsampleid'];\n        saveComponent['jsonuidata']['sampleorderid'] = sample['sexternalsampleid'];\n        saveComponent['jsondata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1;\n        saveComponent['jsonuidata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1; // ALPD-3575\n\n        saveComponent['jsondata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime'];\n        saveComponent['jsonuidata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime'];\n        saveComponent['jsondata']['nsampleappearancecode'] = sample['nsampleappearancecode'];\n        saveComponent['jsonuidata']['nsampleappearancecode'] = sample['nsampleappearancecode'];\n        saveComponent['jsondata']['ssampleappearance'] = sample['ssampleappearance'];\n        saveComponent['jsonuidata']['ssampleappearance'] = sample['ssampleappearance'];\n        saveComponent['jsondata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime'];\n        saveComponent['jsonuidata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime'];\n        saveComponent['jsondata']['Sample Appearance_child'] = {\n          'label': sample['ssampleappearance'],\n          'value': sample['nsampleappearancecode'],\n          'source': 'sampleappearance',\n          'pkey': 'nsampleappearancecode',\n          'nquerybuildertablecode': sample['nquerybuildertablecode']\n        };\n        saveComponent['jsonuidata']['Sample Appearance_child'] = sample['ssampleappearance']; // ALPD-3575\n        // saveComponent['jsondata']['Quantity_child'] = sample['nsampleqty']\n        // saveComponent['jsonuidata']['Quantity_child'] = sample['nsampleqty']\n        // saveComponent['jsondata']['Unit Name_child'] = { label: sample['sunitname'], value: sample['nunitcode'] }\n        // saveComponent['jsonuidata']['Unit Name_child'] = sample['sunitname']\n\n        subSampleDataGridList.push({ ...saveComponent['jsonuidata'],\n          ...saveComponent,\n          \"Sample Collection Date Time_child\": convertDateTimetoString(new Date(sample['dsamplecollectiondatetime']), dispatchData.userInfo)\n        });\n        Component.unshift(saveComponent);\n        delete dispatchData['userInfo'];\n        const filterTest = Test1.filter(x => x.nexternalordersamplecode === sample.nexternalordersamplecode);\n        filterTest.map(x => {\n          x['slno'] = index;\n        }); //selectedTestData=[...selectedTestData,...filterTest]\n\n        Test[index] = filterTest;\n      });\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: { ...dispatchData,\n          Component,\n          selectedComponent: Component.length > 0 ? { ...Component[0]\n          } : {},\n          selectComponent: {},\n          SelectedTest: Component.length > 0 ? Test[Component[0].slno] : [],\n          Test: Test,\n          selectedTestData: {},\n          subSampleDataGridList\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function autoPortalTestLoadBasedOnSpec(dispatchData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getSampleBasedOnPortalOrder\", {\n      'nexternalordercode': dispatchData.selectedRecord[\"Plant Order\"] ? dispatchData.selectedRecord[\"Plant Order\"].value : -1,\n      'userinfo': dispatchData.userInfo\n    }).then(response => {\n      let Sample = response.data.Sample;\n      let Test1 = response.data.Test;\n      let subSampleDataGridList = [];\n      let Component = [];\n      const Test = {};\n      Sample.map((sample, index) => {\n        let saveComponent = {};\n        saveComponent[\"slno\"] = index;\n        saveComponent['jsondata'] = {};\n        saveComponent['jsonuidata'] = {};\n        saveComponent['ncomponentcode'] = sample['ncomponentcode'];\n        saveComponent['nspecsampletypecode'] = sample['nspecsampletypecode'];\n        saveComponent['scomponentname'] = sample['scomponentname'];\n        saveComponent['jsonuidata']['scomponentname'] = sample['scomponentname'];\n        saveComponent['jsondata']['External Sample ID_child'] = sample['sexternalsampleid'];\n        saveComponent['jsonuidata']['External Sample ID_child'] = sample['sexternalsampleid'];\n        saveComponent['jsondata']['sampleorderid'] = sample['sexternalsampleid'];\n        saveComponent['jsonuidata']['sampleorderid'] = sample['sexternalsampleid'];\n        saveComponent['jsondata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1;\n        saveComponent['jsonuidata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1;\n        saveComponent['jsondata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime'];\n        saveComponent['jsonuidata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime'];\n        saveComponent['jsondata']['nsampleappearancecode'] = sample['nsampleappearancecode'];\n        saveComponent['jsonuidata']['nsampleappearancecode'] = sample['nsampleappearancecode'];\n        saveComponent['jsondata']['ssampleappearance'] = sample['ssampleappearance'];\n        saveComponent['jsonuidata']['ssampleappearance'] = sample['ssampleappearance'];\n        saveComponent['jsondata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime'];\n        saveComponent['jsonuidata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime'];\n        saveComponent['jsondata']['Sample Appearance_child'] = {\n          'label': sample['ssampleappearance'],\n          'value': sample['nsampleappearancecode'],\n          'source': 'sampleappearance',\n          'pkey': 'nsampleappearancecode',\n          'nquerybuildertablecode': sample['nquerybuildertablecode']\n        };\n        saveComponent['jsonuidata']['Sample Appearance_child'] = sample['ssampleappearance'];\n        subSampleDataGridList.push({ ...saveComponent['jsonuidata'],\n          ...saveComponent,\n          \"Sample Collection Date Time_child\": convertDateTimetoString(new Date(sample['dsamplecollectiondatetime']), dispatchData.userInfo)\n        });\n        Component.unshift(saveComponent);\n        delete dispatchData['userInfo'];\n        const filterTest = Test1.filter(x => x.nexternalordersamplecode === sample.nexternalordersamplecode);\n        filterTest.map(x => {\n          x['slno'] = index;\n        });\n        Test[index] = filterTest;\n      });\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: { ...dispatchData,\n          Component,\n          selectedComponent: Component.length > 0 ? { ...Component[0]\n          } : {},\n          selectComponent: {},\n          SelectedTest: Test[0],\n          Test: Test,\n          subSampleDataGridList\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getBarcodeAndPrinterService(inputParam) {\n  return dispatch => {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    const getPrinter = rsapi.post(\"barcode/getPrinter\", inputParam.userInfo);\n    const getControlBasedBarcode = rsapi.post(\"barcode/getControlBasedBarcode\", inputParam);\n    urlArray = [getPrinter, getControlBasedBarcode]; // rsapi.post(\"barcode/getPrinter\", inputParam.userInfo)\n\n    Axios.all(urlArray).then(response => {\n      let selectedPrinterData = {\n        sprintername: {\n          value: response[0].data[0].sprintername,\n          label: response[0].data[0].sprintername,\n          item: response[0].data[0]\n        },\n        sbarcodename: \"\"\n      };\n      const printer = constructOptionList(response[0].data || [], \"sprintername\", \"sprintername\", undefined, undefined, true).get(\"OptionList\");\n      const barcode = constructOptionList(response[1].data || [], \"sbarcodename\", \"sbarcodename\", undefined, undefined, true).get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputParam.masterData,\n            control: inputParam.control\n          },\n          printer,\n          barcode,\n          selectedPrinterData,\n          operation: \"printer\",\n          screenName: \"IDS_PRINTBARCODE\",\n          //dataToPrint: inputParam.selectedGoodsIn.nrmsno,\n          ncontrolcode: inputParam.ncontrolcode,\n          loading: false,\n          openModal: true,\n          loadPrinter: true\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport function getOrderDetails(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/externalorder/getDraftExternalOrderDetails\", {\n      sexternalorderid: inputData.sexternalorderid,\n      nexternalordertypecode: inputData.selectedRecord.nexternalordertypecode && inputData.selectedRecord.nexternalordertypecode.value,\n      userinfo: inputData.userinfo\n    }).then(response => {\n      let masterData = { ...inputData.masterData\n      }; //orders:response.data.ExternalOrder\n\n      let selectedRecord = { ...inputData.selectedRecord\n      };\n      selectedRecord['orders'] = response.data.ExternalOrder;\n      response.data.isRecordNotAvailable && response.data.isRecordNotAvailable !== \"\" && toast.warn(response.data.isRecordNotAvailable);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          selectedRecord,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        //toast.warn(error.response.data['rtn']);\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function onUpdateCancelExternalOrder(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/externalorder/onUpdateCancelExternalOrder\", { ...inputParam.inputData\n    }).then(response => {\n      // if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n      //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n      // }\n      let masterData = { ...inputParam.inputData.masterData,\n        orders: []\n      }; // if (response.data[\"rtn\"] === true) {\n      //     toast.info(intl.formatMessage({ id: response.data[\"rtn\"] }));\n      // }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedRecord: {},\n          masterData,\n          loading: false,\n          openModal: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        //toast.warn(error.response.data['rtn']);\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getOutSourceSite(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/externalorder/getOutSourceSite\", { ...inputParam.inputData\n    }).then(response => {\n      //console.log(\"response if loop\");\n      const siteListMap = constructOptionList(response.data || [], 'nsitecode', 'ssitename', undefined, undefined, undefined, 'ndefaultstatus') || [];\n      const siteList = siteListMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          outSourceSiteList: siteList,\n          loading: false,\n          openModal: true,\n          outsourcetest: true,\n          outSourceSiteData: inputParam.inputData,\n          screenName: inputParam.screenName,\n          parentPopUpSize: \"lg\"\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        })); //toast.error(error.response.data);\n      }\n    });\n  };\n}\nexport function getOutSourceSiteAndTest(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/externalorder/getOutSourceSiteAndTest\", { ...inputParam.inputData\n    }).then(response => {\n      //console.log(\"response if loop\");\n      const siteListMap = constructOptionList(response.data.Site || [], 'nsitecode', 'ssitename', undefined, undefined, undefined, 'ndefaultstatus') || []; // const testListMap = constructOptionList(response.data.Test || [], 'ntransactiontestcode', 'stestsynonym', undefined, undefined, undefined,\n      // 'ndefaultstatus') || [];\n\n      const selectedRecord = [];\n      selectedRecord[\"ssampleid\"] = inputParam.inputData.registrationtest.ssamplearno;\n      selectedRecord[\"doutsourcedate\"] = new Date();\n      const siteList = siteListMap.get(\"OptionList\");\n      const str = response.data.regDate;\n      const date = new Date(str); // const testList = testListMap.get(\"OptionList\");\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          outSourceSiteList: siteList,\n          outSourceTestList: response.data.Test,\n          //testList,\n          regDate: date.toDateString(),\n          loading: false,\n          openModal: true,\n          outsourcetest: true,\n          outSourceSiteData: inputParam.inputData,\n          screenName: inputParam.screenName,\n          parentPopUpSize: \"lg\",\n          selectedRecord\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        })); //toast.error(error.response.data);\n      }\n    });\n  };\n}\nexport function outsourceTest(inputData, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true)); //console.log(\"inputData:\", inputData);\n\n    rsapi.post(\"/externalorder/outSourceTest\", { ...inputData\n    }).then(response => {\n      //console.log(\"Test OutSourced\");\n      const OutSourcedTestGet = response.data[\"OutSourcedTestGet\"]; // console.log(\"OutSourcedTestGet:\", OutSourcedTestGet);\n\n      masterData = { ...masterData,\n        selectedTest: OutSourcedTestGet,\n        ...masterData.selectedSample.map(statusupdate => {\n          if (statusupdate.npreregno === OutSourcedTestGet[0].npreregno) {\n            // childref.ref.current.value = \"\";\n            statusupdate.ntransactionstatus = 33;\n            statusupdate.stransdisplaystatus = \"Released\";\n          }\n        }),\n        RegistrationGetTest: replaceUpdatedObject(OutSourcedTestGet, masterData.RegistrationGetTest, \"ntransactiontestcode\")\n      };\n      toast.info(response.data[\"Msg\"]);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          openModal: false,\n          outsourcetest: false,\n          masterData\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function outsourceSampleTest(inputData, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true)); //console.log(\"inputData:\", inputData);\n\n    rsapi.post(\"/externalorder/outSourceSampleTest\", { ...inputData\n    }).then(response => {\n      //console.log(\"Test OutSourced\");\n      const OutSourcedTestGet = response.data[\"OutSourcedTestGet\"]; // console.log(\"OutSourcedTestGet:\", OutSourcedTestGet);\n\n      const OutSourcedSubSampleGet = response.data[\"OutSourcedSubSampleGet\"];\n      const OutsourceDetailsList = response.data[\"OutsourceDetailsList\"];\n      masterData = { ...masterData,\n        selectedTest: OutSourcedTestGet,\n        OutsourceDetailsList,\n        //selectedSubSample:OutSourcedSubSampleGet,\n        // ...masterData.selectedSample.map(statusupdate => {\n        //     if (statusupdate.npreregno === OutSourcedTestGet[0].npreregno) {\n        //      // childref.ref.current.value = \"\";\n        //      statusupdate.ntransactionstatus=33;\n        //      statusupdate.stransdisplaystatus=\"Released\";\n        //     }\n        //   }),\n        RegistrationGetTest: replaceUpdatedObject(OutSourcedTestGet, masterData.RegistrationGetTest, \"ntransactiontestcode\"),\n        RegistrationGetSubSample: replaceUpdatedObject(OutSourcedSubSampleGet, masterData.RegistrationGetSubSample, \"ntransactionsamplecode\"),\n        RegistrationGetSample: replaceUpdatedObject(response.data[\"OutSourcedSampleGet\"], masterData.RegistrationGetSample, \"npreregno\")\n      };\n      toast.info(response.data[\"Msg\"]);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          openModal: false,\n          outsourcetest: false,\n          masterData,\n          selectedRecord: {}\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function insertMultipleRegistration(inputParam, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let requestUrl = '';\n\n    if (inputParam.isFileupload) {\n      requestUrl = rsapi.post(\"/registration/importRegistrationData\", inputParam.formData);\n    } else {\n      requestUrl = rsapi.post(\"/registration/createRegistration\", inputParam.inputData);\n    }\n\n    return requestUrl //  rsapi.post(\"/registration/createRegistration\", inputParam.formData)\n    .then(response => {\n      if (response.data.rtn === \"Success\") {\n        // if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n        //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n        // }\n        let registrationList = [...response.data[\"RegistrationGetSample\"], ...masterData.RegistrationGetSample];\n        let RegistrationGetSample = registrationList; // updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"] , masterData.RegistrationGetSample, 'Sample');\n\n        let selectedSample = response.data[\"selectedSample\"];\n        let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n        let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n        let selectedSubSample = RegistrationGetSubSample;\n        RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\n        let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\n        let regSampleExisted = inputParam.inputData && inputParam.inputData.orderTypeValue === 2 ? true : false;\n\n        if (inputParam.inputData.nneedsubsample) {\n          RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc');\n          selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\n          RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode);\n          selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\n        } // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\n\n\n        if (inputParam.multipleselectionFlag) {\n          selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\n          updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\n          updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\n          RegistrationGetSubSample = masterData.RegistrationGetSubSample;\n          RegistrationGetTest = masterData.RegistrationGetTest;\n        }\n\n        masterData = { ...masterData,\n          ...response.data,\n          selectedSample,\n          selectedSubSample,\n          selectedTest,\n          RegistrationGetSubSample,\n          RegistrationGetTest,\n          RegistrationGetSample\n        };\n        let respObject = {\n          masterData,\n          ...inputParam.inputData,\n          openModal: false,\n          loadEsign: false,\n          showConfirmAlert: false,\n          selectedRecord: undefined,\n          loading: false,\n          loadPreregister: false,\n          showSample: undefined,\n          openPortal: false,\n          selectedSpec: {},\n          selectComponent: {},\n          SelectedTest: {},\n          selectedComponent: {},\n          Component: [],\n          selectedRecord: {},\n          SelectedTest: [],\n          Test: [],\n          selectedComponent: {},\n          subSampleDataGridList: [],\n          preregConfirmMessage: undefined,\n          regSampleExisted,\n          loadImportFileData: false,\n          loadImportSampleCountData: false\n        };\n        inputParam.postParamList[0]['clearFilter'] = 'yes';\n        inputParam.postParamList[1]['clearFilter'] = 'yes';\n        inputParam.postParamList[2]['clearFilter'] = 'yes';\n        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n      } else {\n        toast.info(response.data.rtn);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            showConfirmAlert: false,\n            preregConfirmMessage: undefined,\n            loadImportFileData: false,\n            loadImportSampleCountData: false,\n            openModal: false,\n            openPortal: false,\n            loadEsign: false,\n            showConfirmAlert: false\n          }\n        });\n      }\n    }).catch(error => {\n      // console.log(error);             \n      if (error.response.status === 500) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            showConfirmAlert: false,\n            preregConfirmMessage: undefined\n          }\n        });\n        toast.error(error.message);\n      } else {\n        if (error.response.data.NeedConfirmAlert) {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              showConfirmAlert: true,\n              preregConfirmMessage: error.response.data.rtn,\n              preregConfirmParam: {\n                inputParam,\n                masterData\n              },\n              loading: false,\n              showSample: undefined\n            }\n          });\n        } else {\n          toast.error(error.message);\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false,\n              showConfirmAlert: false,\n              preregConfirmMessage: undefined\n            }\n          });\n        }\n      }\n    });\n  };\n}\nexport function insertRegSample(inputParam, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true)); //console.log(\"inputData:\", inputData);\n\n    rsapi.post(\"/registration/importRegistrationSample\", inputParam.formData).then(response => {\n      if (response.data.rtn === \"Success\") {\n        // if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n        //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n        // }\n        // Commented because insertRegSample is for smtl not for portal\n        let registrationList = [...response.data[\"RegistrationGetSample\"], ...masterData.RegistrationGetSample];\n        let RegistrationGetSample = registrationList; // updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"] , masterData.RegistrationGetSample, 'Sample');\n\n        let selectedSample = response.data[\"selectedSample\"];\n        let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n        let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n        let selectedSubSample = RegistrationGetSubSample;\n        RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\n        let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\n        let regSampleExisted = inputParam.inputData && inputParam.inputData.orderTypeValue === 2 ? true : false;\n\n        if (inputParam.inputData.nneedsubsample) {\n          RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc');\n          selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\n          RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode);\n          selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\n        } // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\n\n\n        if (inputParam.multipleselectionFlag) {\n          selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\n          updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\n          updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\n          RegistrationGetSubSample = masterData.RegistrationGetSubSample;\n          RegistrationGetTest = masterData.RegistrationGetTest;\n        }\n\n        masterData = { ...masterData,\n          ...response.data,\n          selectedSample,\n          selectedSubSample,\n          selectedTest,\n          RegistrationGetSubSample,\n          RegistrationGetTest,\n          RegistrationGetSample\n        };\n        let respObject = {\n          masterData,\n          ...inputParam.inputData,\n          openModal: false,\n          loadEsign: false,\n          showConfirmAlert: false,\n          selectedRecord: undefined,\n          loading: false,\n          loadPreregister: false,\n          showSample: undefined,\n          openPortal: false,\n          selectedSpec: {},\n          selectComponent: {},\n          SelectedTest: {},\n          selectedComponent: {},\n          Component: [],\n          selectedRecord: {},\n          SelectedTest: [],\n          Test: [],\n          selectedComponent: {},\n          subSampleDataGridList: [],\n          preregConfirmMessage: undefined,\n          regSampleExisted,\n          loadImportFileData: false,\n          loadImportSampleCountData: false\n        };\n        inputParam.postParamList[0]['clearFilter'] = 'yes';\n        inputParam.postParamList[1]['clearFilter'] = 'yes';\n        inputParam.postParamList[2]['clearFilter'] = 'yes';\n        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n      } else {\n        toast.info(response.data.rtn);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            //showConfirmAlert: false, \n            // preregConfirmMessage: undefined,\n            //loadImportFileData:false,\n            //loadImportSampleCountData:false, \n            openModal: false,\n            // openPortal:false,\n            loadEsign: false //showConfirmAlert: false,\n\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getExternalOrderTypeForMapping(inputParem) {\n  return function (dispatch) {\n    let masterData = inputParem.inputParam.masterData;\n    let selectedSample = {};\n\n    if (masterData[\"selectedSample\"].length > 1) {\n      inputParem.masterData.selectedSample.map(x => {\n        if (x.npreregno === inputParem.inputParam[\"subSample\"].npreregno) {\n          selectedSample = x;\n        }\n      });\n    } else {\n      selectedSample = masterData.selectedSample[0];\n    }\n\n    if (selectedSample && selectedSample.orderTypeValue === orderType.MANUAL) {\n      if (inputParem.inputParam.subSample.nordertypecode === orderType.MANUAL && inputParem.inputParam.subSample.ntransactionstatus !== transactionStatus.RELEASED && inputParem.inputParam.subSample.ntransactionstatus !== transactionStatus.REJECT && inputParem.inputParam.subSample.ntransactionstatus !== transactionStatus.CANCELLED) {\n        dispatch(initRequest(true));\n        rsapi.post(\"/registration/getExternalOrderForMapping\", inputParem).then(response => {\n          const orderListMap = constructOptionList(response.data.externalOrderList || [], \"nexternalordersamplecode\", \"sexternalsampleid\", \"nsorter\", \"ascending\", false);\n          const orderList = orderListMap.get(\"OptionList\");\n\n          if (masterData[\"selectedSubSample\"].length > 1) {\n            masterData[\"selectedSubSample\"] = [];\n            masterData[\"selectedSubSample\"].push(inputParem.inputParam[\"subSample\"]);\n          } // if (masterData[\"selectedSample\"].length > 1) {\n          //     inputParem.masterData.selectedSample.map(x => {\n          //         if(x.npreregno === inputParem.inputParam[\"subSample\"].npreregno)\n          //         {\n          //             selectedSample = x;\n          //         }\n          //     });\n          // } else {\n          //     selectedSample = masterData.selectedSample[0];\n          // }\n\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              orderList,\n              orderDetails: { ...inputParem.inputParam,\n                selectedSample: selectedSample\n              },\n              masterData: masterData,\n              loading: false,\n              showFilter: false,\n              MappingFields: true,\n              showQRCode: false,\n              openChildModal: true,\n              selectedDetailField: {},\n              selectedRecord: {}\n            }\n          });\n        }).catch(error => {\n          toast.error(error.message);\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n        });\n      } else {\n        if (inputParem.inputParam.subSample.ntransactionstatus === transactionStatus.RELEASED) {\n          toast.info(intl.formatMessage({\n            id: \"IDS_RELEASEDSAMPLESCONNOTBEMAPPED\"\n          }));\n        } else if (inputParem.inputParam.subSample.ntransactionstatus === transactionStatus.REJECT) {\n          toast.info(intl.formatMessage({\n            id: \"IDS_REJECTEDSAMPLESCONNOTBEMAPPED\"\n          }));\n        } else if (inputParem.inputParam.subSample.ntransactionstatus === transactionStatus.CANCELLED) {\n          toast.info(intl.formatMessage({\n            id: \"IDS_CANCELLEDSAMPLESCONNOTBEMAPPED\"\n          }));\n        } else {\n          toast.info(intl.formatMessage({\n            id: \"IDS_ALREADYEXTERNALMAPPED\"\n          }));\n        }\n      }\n    } else {\n      toast.info(intl.formatMessage({\n        id: \"IDS_SELECTMANUALORDER\"\n      }));\n    }\n  };\n}\nexport function getExternalOrderForMapping(inputParem) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getExternalOrderForMapping\", inputParem).then(response => {\n      const orderListMap = constructOptionList(response.data.externalOrderList || [], \"nexternalordersamplecode\", \"sexternalsampleid\", \"nsorter\", \"ascending\", false);\n      const orderList = orderListMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          orderList,\n          selectedRecord: inputParem.selectedRecord,\n          masterData: inputParem.masterData,\n          loading: false,\n          showFilter: false,\n          MappingFields: true,\n          showQRCode: false,\n          openChildModal: true,\n          selectedDetailField: {}\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function orderMapping(inputParem) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/orderMapping\", inputParem.inputData).then(response => {\n      // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n      //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParem));\n      // }\n      replaceUpdatedObject(response.data[\"RegistrationGetSample\"], inputParem.masterData.RegistrationGetSample, \"npreregno\");\n      replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], inputParem.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      replaceUpdatedObject(response.data[\"RegistrationGetTest\"], inputParem.masterData.RegistrationGetTest, \"ntransactiontestcode\");\n      let masterData = { ...inputParem.masterData,\n        selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], inputParem.masterData.selectedSample, \"npreregno\"),\n        selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], inputParem.masterData.selectedSubSample, \"ntransactionsamplecode\"),\n        selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], inputParem.masterData.selectedTest, \"ntransactiontestcode\")\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: masterData,\n          loading: false,\n          showFilter: false,\n          openChildModal: false,\n          showQRCode: false,\n          selectedDetailField: undefined,\n          orderList: []\n        }\n      });\n\n      if (response.data.rtn === \"Success\") {\n        toast.info(intl.formatMessage({\n          id: \"IDS_EXTERNALSAMPLEMAPPEDSUCCESSFULLY\"\n        }));\n      }\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function orderRecords(inputData) {\n  return function (dispatch) {\n    rsapi.post(\"/externalorder/getExternalOrderType\", inputData).then(response => {\n      let selectedRecord = { ...inputData.selectedRecord\n      };\n      let externalOrderType = [];\n      response.data.ExternalOrderType.map(item => item.nexternalordertypecode !== -1 && externalOrderType.push(item));\n      let externalOrderTypeMap = constructOptionList(externalOrderType || [], \"nexternalordertypecode\", \"sexternalordertypename\", \"nexternalordertypecode\", \"descending\", false);\n      const externalOrderTypeList = externalOrderTypeMap.get(\"OptionList\"); // let selectedExternalOrderType = externalOrderTypeList[0];\n      // selectedRecord[\"selectedExternalOrderType\"] = selectedExternalOrderType;\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          ncontrolcode: inputData.CancelExternalOrderSampleId,\n          operation: inputData.operation,\n          loadPrinter: false,\n          openModal: true,\n          parentPopUpSize: 'xl',\n          screenName: inputData.screenName,\n          loading: false,\n          masterData: inputData.masterData,\n          externalOrderTypeList // selectedRecord\n\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n} //ALPD-3615--Start\n\nexport const getAdhocTest = (inputParam, masterData, ncontrolCode) => {\n  return dispatch => {\n    const {\n      userInfo\n    } = { ...inputParam\n    };\n    let ntransactionsamplecode = -1;\n    let requestUrl = '';\n\n    if (masterData && masterData.RealRegSubTypeValue.nneedsubsample) {\n      if (masterData[\"selectedSubSample\"].length > 1 || masterData[\"selectedSubSample\"].findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"sampleadhoctest\"][inputParam.primaryKeyName]) === -1) {\n        inputParam.editRegParam[\"getSubSampleChildDetail\"] = true;\n      }\n\n      masterData[\"selectedSubSample\"] = [];\n      masterData[\"selectedSubSample\"].push(inputParam[\"sampleadhoctest\"]);\n      const selectedSpec = getSameRecordFromTwoArrays(masterData.selectedSample, masterData.selectedSubSample, \"npreregno\");\n      inputParam.sampleadhoctest['nallottedspeccode'] = selectedSpec[0].nallottedspeccode;\n      inputParam.sampleadhoctest['sspecname'] = selectedSpec[0].sspecname;\n      inputParam.editRegParam[\"npreregno\"] = inputParam[\"sampleadhoctest\"][\"npreregno\"];\n      inputParam.editRegParam[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT;\n      inputParam.editRegParam[\"nfilterstatus\"] = inputParam[\"sampleadhoctest\"][\"ntransactionstatus\"];\n      inputParam.editRegParam[\"napprovalconfigcode\"] = inputParam[\"sampleadhoctest\"][\"napprovalconfigcode\"];\n      ntransactionsamplecode = inputParam.sampleadhoctest[inputParam.primaryKeyName];\n      inputParam.editRegParam['nallottedspeccode'] = selectedSpec[0].nallottedspeccode;\n    } else {\n      if (masterData[\"selectedSample\"].length > 1 || masterData[\"selectedSample\"].findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"sampleadhoctest\"][inputParam.primaryKeyName]) === -1) {\n        inputParam.editRegParam[\"getSampleChildDetail\"] = true;\n      }\n\n      masterData[\"selectedSample\"] = [];\n      masterData[\"selectedSample\"].push(inputParam[\"sampleadhoctest\"]);\n    }\n\n    const npreregno = inputParam[\"sampleadhoctest\"].npreregno;\n\n    if (inputParam[\"sampleadhoctest\"] && inputParam[\"sampleadhoctest\"].ntransactionstatus !== transactionStatus.REJECT && inputParam[\"sampleadhoctest\"] && inputParam[\"sampleadhoctest\"].ntransactionstatus !== transactionStatus.CANCELLED) {\n      if (inputParam[\"sampleadhoctest\"] && inputParam[\"sampleadhoctest\"].ntransactionstatus !== transactionStatus.RELEASED) {\n        inputParam[\"nallottedspeccode\"] = inputParam[\"sampleadhoctest\"][\"nallottedspeccode\"];\n        dispatch(initRequest(true));\n\n        if (masterData && masterData.RealRegSubTypeValue.nneedsubsample) {\n          requestUrl = rsapi.post(\"/registration/getAdhocTest\", { ...inputParam.editRegParam,\n            ntransactionsamplecode,\n            UserInfo: userInfo\n          });\n        } else {\n          requestUrl = rsapi.post(\"/registration/getAdhocTest\", { ...inputParam.editRegParam,\n            UserInfo: userInfo,\n            npreregno,\n            nallottedspeccode: inputParam.sampleadhoctest.nallottedspeccode || -1\n          });\n        }\n\n        return requestUrl.then(response => {\n          let testData = [];\n          const TestDataMap = constructOptionList(response.data['AdhocTest'] || [], \"ntestcode\", \"stestsynonym\", undefined, undefined, true);\n          testData = TestDataMap.get(\"OptionList\");\n          let selectedRecord = {};\n          selectedRecord['visibleadhoctest'] = transactionStatus.NO;\n          selectedRecord['specName'] = inputParam.sampleadhoctest['sspecname'];\n\n          if (masterData && masterData.RealRegSubTypeValue.nneedsubsample) {\n            if (inputParam.editRegParam[\"getSubSampleChildDetail\"] === true) {\n              masterData = { ...masterData,\n                ...response.data[\"SubSampleChildDetail\"]\n              };\n            }\n          } else {\n            if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\n              masterData = sortData({ ...masterData,\n                ...response.data[\"SampleChildDetail\"]\n              });\n            }\n          }\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              masterData: masterData,\n              availableAdhocTest: testData,\n              loadAdhocTest: true,\n              loading: false,\n              ncontrolCode,\n              screenName: \"IDS_ADHOCTEST\",\n              operation: \"create\",\n              openModal: true,\n              parentPopUpSize: \"lg\",\n              selectedRecord: selectedRecord,\n              showSample: undefined\n            }\n          });\n        }).catch(error => {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n\n          if (error.response.status === 500) {\n            toast.error(error.message);\n          } else {\n            toast.info(this.props.formatMessage({\n              id: error.response.data\n            }));\n          }\n        });\n      } else {\n        toast.info(intl.formatMessage({\n          id: \"IDS_TESTCANNOTBEFORRELEASEDSAMPLES\"\n        })); // if (inputParam.addTestParam[\"getSampleChildDetail\"] === true) {\n        //     masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\n        // }\n      }\n    } else {\n      toast.info(intl.formatMessage({\n        id: \"IDS_SAMPLEISREJECTEDORCANCELLED\"\n      })); // if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\n      //     masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\n      // }\n    }\n  };\n};\nexport const createAdhocTest = (inputParam, masterData, modalName) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData\n    }).then(response => {\n      let RegistrationGetTest = updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"], response.data[\"RegistrationGetTest\"]); //let RegistrationGetSubSample = updatedObjectWithNewElement(masterData[\"RegistrationGetSubSample\"], response.data[\"RegistrationGetSubSample\"]);\n\n      masterData = { ...masterData,\n        RegistrationGetTest: sortData(RegistrationGetTest, \"descending\", \"ntransactiontestcode\"),\n        RegistrationGetSubSample: sortData(response.data[\"RegistrationGetSubSample\"], \"descending\", \"ntransactionsamplecode\"),\n        selectedTest: response.data[\"RegistrationGetTest\"],\n        //  selectedSubSample: response.data[\"RegistrationGetSubSample\"],\n        selectedSubSample: response.data[\"selectedSubSample\"],\n        RegistrationParameter: response.data.RegistrationParameter,\n        RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, masterData.RegistrationGetSample, 'npreregno')\n      };\n      let respObject = {\n        masterData,\n        [modalName]: false,\n        loading: false,\n        loadChildTest: false,\n        showSample: undefined,\n        openModal: false,\n        loadEsign: false,\n        selectedRecord: {},\n        showConfirmAlert: false,\n        createTestConfirmMessage: undefined,\n        //ALPD-4225--Vignesh R(24-05-2024)--when search the additional  filter the adhoc test popup are showing in sample reg screen.\n        loadAdhocTest: false\n      };\n      inputParam.postParamList[0]['clearFilter'] = 'no';\n      inputParam.postParamList[1]['clearFilter'] = 'no';\n      inputParam.postParamList[2]['clearFilter'] = 'yes';\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n    }).catch(error => {\n      if (error.response.status === 500) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            createTestConfirmMessage: undefined\n          }\n        });\n        toast.error(error.message);\n      } else {\n        if (error.response.data.NeedConfirmAlert) {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              showConfirmAlert: true,\n              createTestConfirmMessage: error.response.data.rtn,\n              createTestConfirmParam: {\n                inputParam,\n                masterData,\n                modalName\n              },\n              loading: false,\n              loadChildTest: false,\n              showSample: undefined,\n              loadAdhocTest: inputParam.inputData.loadAdhocTest //openModal: false,\n              //selectedRecord: {}\n\n            }\n          });\n        } else {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              [modalName]: false,\n              loading: false,\n              loadChildTest: false,\n              showSample: undefined,\n              openModal: false,\n              selectedRecord: {},\n              createTestConfirmMessage: undefined,\n              loadAdhocTest: false,\n              loadEsign: false\n            }\n          });\n          toast.info(error.response.data.rtn);\n        }\n      }\n    });\n  };\n}; //ALPD-3615--End\n\nexport const copySampleService = (inputData, masterData) => {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/copySample\", inputData).then(response => {\n      // masterData = {\n      //     ...masterData,\n      //     ...response.data\n      // };\n      if (response.data.rtn === \"Success\") {\n        // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\n        //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\n        // }\n        let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"], masterData.RegistrationGetSample);\n        let selectedSample = response.data[\"selectedSample\"];\n        let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n        let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n        let selectedSubSample = RegistrationGetSubSample;\n        RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\n        let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\n        let regSampleExisted = inputData && inputData.orderTypeValue === 2 ? true : false;\n\n        if (inputData.nneedsubsample) {\n          RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc');\n          selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\n          RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode);\n          selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\n        } // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\n\n\n        if (inputData.multipleselectionFlag) {\n          selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\n          updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\n          updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\n          RegistrationGetSubSample = masterData.RegistrationGetSubSample;\n          RegistrationGetTest = masterData.RegistrationGetTest;\n        }\n\n        masterData = { ...masterData,\n          ...response.data,\n          selectedSample,\n          selectedSubSample,\n          selectedTest,\n          RegistrationGetSubSample,\n          RegistrationGetTest,\n          RegistrationGetSample\n        };\n        let respObject = {\n          masterData,\n          //...inputData,\n          openModal: false,\n          loadEsign: false,\n          showConfirmAlert: false,\n          selectedRecord: undefined,\n          loading: false,\n          loadPreregister: false,\n          showSample: undefined,\n          openPortal: false,\n          selectedSpec: {},\n          selectComponent: {},\n          SelectedTest: {},\n          selectedComponent: {},\n          Component: [],\n          selectedRecord: {},\n          SelectedTest: [],\n          Test: [],\n          selectedComponent: {},\n          subSampleDataGridList: [],\n          preregConfirmMessage: undefined,\n          regSampleExisted,\n          loadImportFileData: false,\n          loadImportSampleCountData: false,\n          skip: 0,\n          subsampleskip: 0,\n          testskip: 0,\n          isDynamicViewSlideOut: false\n        };\n        let postParamList = [];\n        dispatch(postCRUDOrganiseTransSearch(postParamList, respObject));\n      } else {\n        toast.warn(response.data.rtn);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            showConfirmAlert: false,\n            preregConfirmMessage: undefined\n          }\n        });\n      }\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n};","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-512/QuaLISWeb/src/actions/RegistrationAction.js"],"names":["React","rsapi","Axios","toast","filterRecordBasedOnTwoArrays","sortData","rearrangeDateFormat","convertDateTimetoString","fillRecordBasedOnCheckBoxSelection","getRecordBasedOnPrimaryKeyName","updatedObjectWithNewElement","replaceUpdatedObject","parentChildComboLoad","getSameRecordFromTwoArrays","constructjsonOptionList","constructjsonOptionDefault","childComboLoad","filterRecordBasedOnPrimaryKeyName","reArrangeArrays","childComboLoadForEdit","sortDataByParent","sortDataForDate","DEFAULT_RETURN","intl","initRequest","SampleType","checkBoxOperation","orderType","transactionStatus","crudMaster","postCRUDOrganiseTransSearch","constructOptionList","Operators","TextFilter","NumericFilter","DateFilter","ComboBox","Utils","QbUtils","leftArrowClass","openModal","checkTree","loadTree","getSampleTypeChange","Map","masterData","event","labelname","dispatch","post","then","response","data","item","type","payload","loading","catch","error","message","getSubSampleChildTabDetail","inputData","ntransactionsamplecode","length","inputParamData","userinfo","npreregno","url","activeSubSampleTab","responseData","selectedSubSample","showFilter","screenName","activeTestTab","selectedId","activeTabIndex","status","info","selectedSample","activeSampleTab","warn","formatMessage","id","getRegTypeChange","getRegSubTypeChange","onApprovalConfigVersionChange","getComponentTestBySpec","selectedRecord","Component","Test","slno","selectedComponent","undefined","SelectedTest","Object","keys","popUptestDataState","skip","take","getTestfromDB","objComponent","LoginProps","nflag","component","value","label","dreceiveddate","userInfo","nspecsampletypecode","nneedsubsample","RealRegSubTypeValue","TestData","loadComponent","selectComponent","showSaveContinue","SelectedSource","parentPopUpSize","CurrentTime","unshift","EditComponent","urlArray","ComponentTestBySpec","timezone","all","lstComponentMap","lstComponent","timeZoneListMap","TimeZoneField","get","timeZoneList","scomponentname","ncomponentcode","ntzdreceivedate","findIndex","x","ntimezonecode","stimezoneid","childoperation","ChildscreenName","openChildModal","ReloadData","searchSampleRef","current","searchSubSampleRef","searchTestRef","testskip","testtake","subsampletake","subsampleskip","showSample","regSampleExisted","getTreeByProduct","comboData","inputParam","nsampletypecode","CLINICALTYPE","nportalrequired","YES","nordertypecode","nallottedspeccode","jsondata","PRODUCT","Specification","AgaramTree","ActiveKey","FocusKey","OpenNodes","selectedSpec","sversion","ntemplatemanipulationcode","dispatchData","subSampleDataGridList","autoExternalComponentLoadBasedOnSpec","autoPortalTestLoadBasedOnSpec","masterStatus","addMaster","masterIndex","getNewRegSpecification","selectedNode","operation","methodUrl","ntreetemplatemanipulationcode","activeKey","focusKey","primaryKey","AddComponents","sreceiveddate","stzdreceivedate","scomments","openPortal","getAllTest","specBasedComponent","selectPackage1","specBasedTestPackage","selectPackage","conditionalTestPackage","PackageData","TestCombined","componentTest","TestPackage","loadTest","getTest","TestGet","TestPackageGet","TestSectionGet","TestSectionData","PackageDataMap","TestSectionDataMap","TestSection","AllTest","selectSection","AllSection","selectedTestData","addsubSample","columnList","childColumnList","SubSamplecomboComponents","SubSamplewithoutCombocomponent","isServiceRequired","SubSamplecomboData","timeZoneService","actualService","parentcolumnlist","filter","inputtype","readonly","childcolumnlist","currentDate","dateService","datecolumnlist","timeZoneMap","defaultTimeZone","newcomboData","slanguagetypecode","selectedRecord1","EXTERNAL","testSectionDataMap","comboData1","map","componentrow","loadcurrentdate","nperiodcode","Date","loadselecteddate","hidebeforedate","hideafterdate","val","radiodefaultvalue","i","radioOptions","tags","text","loadSubSample","saveContinueData","parentSubSampleColumnList","childSubSampleColumnList","selectedobject","Reg","testPackageTest","subSampleBased","action","testpackage","testsection","ntestpackagecode","availableTest","TestSectionBasedonTestPackage","ntestgrouptestcode","nsectioncode","TestPakageTest","testSectionTest","addSubSampleSaveContinue","Map1","selectedTestPackageData","editSubSample","Componnet","comp","nregsubtypecode","portalOrder","containerType","containerList","nportalordercode","push","insertRegistration","requestUrl","isFileupload","formData","rtn","RegistrationGetSample","RegistrationGetSubSample","RegistrationGetTest","selectedTest","orderTypeValue","multipleselectionFlag","respObject","loadEsign","showConfirmAlert","loadPreregister","preregConfirmMessage","loadImportFileData","loadImportSampleCountData","isDynamicViewSlideOut","postParamList","console","log","NeedConfirmAlert","preregConfirmParam","insertRegistrationScheduler","SchedulerTransaction","getRegistrationSample","selectedFilter","getRegistrationsubSampleDetail","isParentValue","nregtypecode","ntransactionstatus","napprovalconfigcode","ndesigntemplatemappingcode","ntype","QUICKSELECTALL","SINGLEDESELECT","DESELECT","QUICKSELECTSTATUS","SINGLESELECT","OrderCodeData","hasOwnProperty","join","selectedPreregno","selectedTransactionsamplecode","noutsourcerequired","RealSampleTypeValue","NA","activeName","dataStateName","subSample","sample","skipInfo","oldSelectedTest","externalOrderAttachmentList","ExternalOrderAttachmentList","outsourceDetailsList","OutsourceDetailsList","oldSelectedSubSample","childTabsKey","removeElementFromArray","RegistrationTestComment","RegistrationTestAttachment","RegistrationParameter","RegistrationComment","MULTISELECT","wholeSubSampleList","b","includes","ResponseData","RegistrationTestComment1","ntransactiontestcode","RegistrationTestAttachment1","resultResponseData","RegistrationParameter1","ntransactiontestcode1","ResponseData1","RegistrationTestComment2","ntransactionTestCode","wholeTestList","keepOld","bool","sampleGridDataState","sort","multifilterInfo","multiFilterLoad","isGrandChildGetRequired","TestSelected","subSampleSelected","filterTestSameOldSelectedTest","filterSelectedSubSample","getRegistrationTestDetail","getTestChildTabDetailRegistration","subsamplecheck","SubSampleSelected","wholeSubSample","selectedSubSample1","dataStateArray","arr","RegistrationSampleComment","RegistrationSampleAttachment","testList","wholeSubsampleList","toString","selectedTransactioncode","acceptRegistration","acceptConfirmMessage","acceptConfirmParam","addMoreTest","ncontrolCode","sampleList","some","obj","selectedsample","findTransactionStatus","Set","REJECT","CANCELLED","RELEASED","findApprovalVersion","napprovalversioncode","findSampleSpec","loadChildTest","loadPrinter","props","createRegistrationTest","modalName","classUrl","createTestConfirmMessage","createTestConfirmParam","getEditRegistrationComboService","comboComponents","withoutCombocomponent","editableComboList","parentColumnList","primaryKeyName","editRegParam","mastertoedit","selectedRegistration","languagetypeCode","comboValues","optionList","valuemember","displaymember","source","isMultiLingual","date","specValue","sspecname","sregsubtypename","updateRegistration","regDateEditConfirmMessage","regEditParam","cancelTestAction","cancelSampleAction","addsubSampleRegistration","regcolumnList","selectRecord","regchildColumnList","regSubSamplecomboComponents","regSubSamplewithoutCombocomponent","ncontrolcode","loadRegSubSample","regSubSamplecomboData","regparentSubSampleColumnList","regchildSubSampleColumnList","saveSubSample","subSampleConfirmMessage","subSampleConfirmParam","getEditSubSampleComboService","editSubSampleRegParam","formattedMessage","onUpdateSubSampleRegistration","cancelSubSampleAction","isMapped","preregRecordToQuarantine","selectedSampleCode","selectedTestCode","activeTabId","ApprovalParameter","ResultUsedInstrument","ResultUsedTasks","ApprovalResultChangeHistory","ApprovalHistory","RegistrationTestHistory","toTimestamp","strDate","dt","getTime","getDynamicFilter","languageTypeCode","lstData","gridColumns","fields","datefileds","multilingual","filterfields","filterObject","ismultilingual","columnname","filterinputtype","creategridColumns","JSON","parse","rearrangeDateFormatforKendoDataTool","mul","selectedComponentpath","loadCustomSearchFilter","lstPatient","displayname","seletedFilterComponent","kendoSkip","kendoTake","kendoFilter","logic","filters","filterObjectForReactAwesomeFilter","awesomeTree","awesomeConfig","filterquery","selectedFieldRecord","onExecute","datapredef","CustomFilter","defaultItem","onChange","onFilterChange","call","nextFilter","target","field","title","width","filterFields","resposedata","predefinedtablename","predefinedismultilingual","predefineddisplaymember","predefinedvaluemember","valueSources","mainWidgetProps","fieldSettings","numericcondition","listValues","isMultiFilter","preobj","toLowerCase","name","operators","numeric","getDynamicFilterExecuteData","nformcode","dateValue","splitChar","index","ssitedatetime","indexOf","substring","firstField","split","timeSplitChar","datetime","dateArray","day","month","year","time","formatted","preRegDispatch","validateEsignforRegistration","dispatchMethods","screenData","createAdhocTest","getStorageCategoryForSendToStore","storeInputParam","sampleDetails","sendToStoreId","controlcode","geStorageCategory","getUnit","getApprovedLocation","needSubSample","subSampleRegParam","String","mainSampleRegParam","mastersendtostore","conditionMap","conditionMaster","conditionUnitMap","conditionUnitMaster","isneedSubSampleQty","approvedTreeData","unit","storageCategory","unitMaster","UpdateExternalOrderStatus","portallist","stringify","headers","Sample","Test1","saveComponent","filterTest","nexternalordersamplecode","getBarcodeAndPrinterService","getPrinter","getControlBasedBarcode","selectedPrinterData","sprintername","sbarcodename","printer","barcode","control","getOrderDetails","sexternalorderid","nexternalordertypecode","ExternalOrder","isRecordNotAvailable","onUpdateCancelExternalOrder","orders","getOutSourceSite","siteListMap","siteList","outSourceSiteList","outsourcetest","outSourceSiteData","getOutSourceSiteAndTest","Site","registrationtest","ssamplearno","str","regDate","outSourceTestList","toDateString","outsourceTest","OutSourcedTestGet","statusupdate","stransdisplaystatus","outsourceSampleTest","OutSourcedSubSampleGet","insertMultipleRegistration","registrationList","insertRegSample","getExternalOrderTypeForMapping","inputParem","MANUAL","orderListMap","externalOrderList","orderList","orderDetails","MappingFields","showQRCode","selectedDetailField","getExternalOrderForMapping","orderMapping","orderRecords","externalOrderType","ExternalOrderType","externalOrderTypeMap","externalOrderTypeList","CancelExternalOrderSampleId","getAdhocTest","sampleadhoctest","UserInfo","testData","TestDataMap","NO","availableAdhocTest","loadAdhocTest","copySampleService"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport rsapi from '../rsapi';\r\nimport Axios from 'axios';\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport {\r\n    filterRecordBasedOnTwoArrays, sortData,\r\n    rearrangeDateFormat, convertDateTimetoString,\r\n    fillRecordBasedOnCheckBoxSelection, getRecordBasedOnPrimaryKeyName, updatedObjectWithNewElement,\r\n    replaceUpdatedObject, parentChildComboLoad, getSameRecordFromTwoArrays, constructjsonOptionList,\r\n    constructjsonOptionDefault, childComboLoad, filterRecordBasedOnPrimaryKeyName, reArrangeArrays, childComboLoadForEdit, sortDataByParent, sortDataForDate\r\n} from '../components/CommonScript'\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport { intl } from '../components/App';\r\nimport { initRequest } from './LoginAction';\r\nimport { //RegistrationSubType, RegistrationType, \r\n    SampleType,\r\n    checkBoxOperation,\r\n    orderType,\r\n    transactionStatus\r\n} from '../components/Enumeration';\r\nimport { crudMaster, postCRUDOrganiseTransSearch } from './ServiceAction'\r\n//import { getTestChildTabDetail } from './index.js'\r\nimport { constructOptionList } from '../components/CommonScript';\r\nimport {\r\n    Operators,\r\n    TextFilter,\r\n    NumericFilter,\r\n    // BooleanFilter,\r\n    DateFilter,\r\n    // EnumFilter,\r\n    //  EnumFilterProps,\r\n} from \"@progress/kendo-react-data-tools\";\r\nimport { ComboBox } from \"@progress/kendo-react-dropdowns\";\r\nimport { Utils as QbUtils } from \"@react-awesome-query-builder/ui\";\r\nimport { leftArrowClass } from '@progress/kendo-react-layout';\r\nimport { openModal } from './ApprovalConfigAction';\r\nconst { checkTree, loadTree } = QbUtils;\r\n\r\nexport function getSampleTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getRegTypeBySampleType\", Map)\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getSubSampleChildTabDetail(inputData) {\r\n    return function (dispatch) {\r\n        if (inputData.ntransactionsamplecode.length > 0) {\r\n            let inputParamData = {\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n                userinfo: inputData.userinfo,\r\n                npreregno: inputData.npreregno ? inputData.npreregno : -1\r\n            }\r\n            let url = null\r\n            switch (inputData.activeSubSampleTab) {\r\n                case \"IDS_SUBSAMPLEATTACHMENTS\":\r\n                    url = \"attachment/getSubSampleAttachment\"\r\n                    break;\r\n                case \"IDS_SUBSAMPLECOMMENTS\":\r\n                    url = \"comments/getSubSampleComment\"\r\n                    break;\r\n                case \"IDS_OUTSOURCEDETAILS\":\r\n                    url = \"registration/getOutsourceDetails\"\r\n                    break;\r\n                default:\r\n                    url = null\r\n                    break;\r\n            }\r\n            if (url !== null) {\r\n                dispatch(initRequest(true));\r\n                rsapi.post(url, inputParamData)\r\n                    .then(response => {\r\n                        let responseData = { ...response.data }\r\n                        responseData = sortData(responseData)\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                masterData: {\r\n                                    ...inputData.masterData,\r\n                                    ...responseData,\r\n                                    selectedSubSample: inputData.selectedSubSample,\r\n                                    // selectedTestCode: inputData.ntransactiontestcode,\r\n                                },\r\n                                loading: false,\r\n                                showFilter: false,\r\n                                activeSubSampleTab: inputData.activeSubSampleTab,\r\n                                screenName: inputData.screenName,\r\n                                activeTestTab: inputData.activeSubSampleTab,\r\n                                screenName: inputData.screenName,\r\n                                selectedId: null,\r\n                                activeTabIndex: inputData.activeTabIndex\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        }\r\n                        else {\r\n                            toast.info(error.response.data);\r\n                        }\r\n                    })\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab\r\n                    }\r\n                })\r\n            }\r\n        } else {\r\n\r\n            toast.warn(intl.formatMessage({ id: \"IDS_PLSSELECTASAMPLE\" }));\r\n        }\r\n    }\r\n}\r\n\r\nexport function getRegTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        rsapi.post(\"/registration/getRegSubTypeByRegType\", Map)\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegSubTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getRegTemplateTypeByRegSubType\", Map)\r\n\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function onApprovalConfigVersionChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getApprovalConfigBasedTemplateDesign\", Map)\r\n\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getComponentTestBySpec(Map, selectedRecord, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getComponentTestBySpec\", Map)\r\n            .then(response => {\r\n                const { Component, Test } = response.data;\r\n                let slno = Component.length > 0 ? Component[0].slno : -1;\r\n                let selectedComponent = Component.length > 0 ? Component[0] : undefined\r\n                let SelectedTest = [];\r\n                if (Object.keys(Test).length > 0) {\r\n                    SelectedTest = Test[slno];\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Component, Test, SelectedTest, selectedComponent, loading: false,\r\n                        selectedRecord, popUptestDataState: { skip: 0, take: 10 }\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTestfromDB(objComponent, LoginProps, nflag) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let component = { ...objComponent };\r\n        component[\"ncomponentcode\"] = objComponent[\"ncomponentcode\"] ? objComponent[\"ncomponentcode\"].value : -1;\r\n        component[\"nstoragelocationcode\"] = objComponent[\"nstoragelocationcode\"] ? objComponent[\"nstoragelocationcode\"].value : -1;\r\n        component[\"nstorageconditioncode\"] = objComponent[\"nstorageconditioncode\"] ? objComponent[\"nstorageconditioncode\"].value : -1;\r\n        component[\"slno\"] = LoginProps.Component ? Object.keys(LoginProps.Component).length + 1 : 0;\r\n        component[\"scomponentname\"] = objComponent[\"ncomponentcode\"].label;\r\n        component[\"sstoragelocationname\"] = objComponent[\"nstoragelocationcode\"] && objComponent[\"nstoragelocationcode\"].label ? objComponent[\"nstoragelocationcode\"].label : \"\";\r\n        component[\"sstorageconditionname\"] = objComponent[\"nstorageconditioncode\"] && objComponent[\"nstorageconditioncode\"].label ? objComponent[\"nstorageconditioncode\"].label : \"\";\r\n        component[\"ntzdmanufdate\"] = objComponent[\"ntzdmanufdate\"] ? objComponent[\"ntzdmanufdate\"].value : -1;\r\n        component[\"ntzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].value : -1;\r\n        component[\"stzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].label : \"\";\r\n        component[\"nplasmafilecode\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].value : -1;\r\n        component[\"splasmafilenumber\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].label : \"\";\r\n        const dreceiveddate = objComponent[\"dreceiveddate\"];\r\n        component[\"dreceiveddate\"] = dreceiveddate;//formatInputDate(objComponent[\"dreceiveddate\"], false);\r\n        component[\"sreceiveddate\"] = convertDateTimetoString(dreceiveddate, LoginProps.userInfo);//formatInputDateWithoutT(objComponent[\"dreceiveddate\"], false);//formatDate(objComponent[\"sreceiveddate\"]);\r\n        // rsapi.post(\"/registration/getTestfromDB\", { \"Component\": component })\r\n        rsapi.post(\"/registration/getTestfromDB\", {\r\n            nspecsampletypecode: component.nspecsampletypecode,\r\n            slno: component.slno,\r\n            nneedsubsample: LoginProps.masterData.RealRegSubTypeValue.nneedsubsample\r\n        })\r\n            .then(response => {\r\n                let TestData = response.data;\r\n                let slno = component.slno;\r\n                let SelectedTest = [];\r\n                let loadComponent = true;\r\n                let selectComponent = {};\r\n                let showSaveContinue = true;\r\n                let SelectedSource = [];\r\n                // let openChildModal = true;\r\n                let selectedComponent = undefined;\r\n                let parentPopUpSize = \"lg\"\r\n                // selectComponent = objComponent\r\n                if (nflag === 1) {\r\n                    loadComponent = true;\r\n                    objComponent[\"smanuflotno\"] = \"\";\r\n                    objComponent[\"dreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime)//new Date(LoginProps.CurrentTime);\r\n                    objComponent[\"sreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime)//new Date(LoginProps.CurrentTime);\r\n                    selectComponent = objComponent;\r\n                } else {\r\n                    loadComponent = false;\r\n                    parentPopUpSize = \"xl\"\r\n                    // openChildModal = false;\r\n                    showSaveContinue = false;\r\n                    selectComponent = undefined\r\n                }\r\n                let Test = LoginProps.Test || [];\r\n                let Component = LoginProps.Component || [];\r\n                Component.unshift(component);\r\n                selectedComponent = component;\r\n                Test[slno] = response.data;\r\n                SelectedTest = TestData;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Component, Test, SelectedTest, selectComponent, selectedComponent,\r\n                        loadComponent, showSaveContinue, parentPopUpSize, loading: false, SelectedSource\r\n                    }\r\n                });\r\n                // console.log(response.data);\r\n            })\r\n            .catch(error => {\r\n                //   console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function EditComponent(Map, component, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [];\r\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\",\r\n            Map);\r\n\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n\r\n        urlArray = [ComponentTestBySpec, timezone]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, true);\r\n                const TimeZoneField = response[1].data;\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n\r\n                component[\"ncomponentcode\"] = { label: component.scomponentname, value: component.ncomponentcode }\r\n                component[\"dreceiveddate\"] = rearrangeDateFormat(userInfo, component[\"sreceiveddate\"]);\r\n                component[\"scomments\"] = component[\"scomments\"]\r\n\r\n                let ntzdreceivedate = component.ntzdreceivedate;\r\n                if (component.ntzdreceivedate !== null && typeof component.ntzdreceivedate === \"object\") {\r\n                    ntzdreceivedate = component.ntzdreceivedate.value;\r\n                }\r\n                component[\"ntzdreceivedate\"] = component.ntzdreceivedate ?\r\n                    {\r\n                        \"label\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].stimezoneid, \"value\":\r\n                            TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].ntimezonecode\r\n                    } : \"\"\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadComponent: true, childoperation: \"update\",\r\n                        lstComponent, ChildscreenName: \"Component\",\r\n                        openChildModal: false, selectComponent: component, parentPopUpSize: \"lg\",\r\n                        timeZoneList, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function ReloadData(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData })\r\n            .then(response => {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    ...response.data\r\n                }\r\n                if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                    inputData.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    //masterData['searchedTests'] = undefined\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // let selectedFilter = inputData.selectedFilter;\r\n                // selectedFilter[\"fromdate\"] = \"\";\r\n                // selectedFilter[\"todate\"] = \"\";\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        testskip: 0,\r\n                        take: undefined,\r\n                        testtake: undefined,\r\n                        subsampletake: undefined,\r\n                        subsampleskip: 0,\r\n                        showSample: undefined, regSampleExisted: false,\r\n                        // filterColumnActive:false,\r\n                        //selectedFilter\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTreeByProduct(Map, selectedRecord, comboData, inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        if (Map.nsampletypecode === SampleType.CLINICALTYPE &&\r\n            Map.nportalrequired === transactionStatus.YES && selectedRecord[\"Order Type\"] && selectedRecord[\"Order Type\"].value == 2) {\r\n            Map = { ...Map, nordertypecode: selectedRecord[\"Order Type\"].value, nallottedspeccode: selectedRecord[\"Order\"] && selectedRecord[\"Order\"].item.jsondata.nallottedspeccode }\r\n        }\r\n        else if (Map.nsampletypecode === SampleType.PRODUCT && selectedRecord[\"Plant Order\"] && selectedRecord[\"Plant Order\"].item && selectedRecord[\"Plant Order\"].item.jsondata) {\r\n            Map = { ...Map, nallottedspeccode: selectedRecord[\"Plant Order\"] && selectedRecord[\"Plant Order\"].item.jsondata.nallottedspeccode }\r\n        }\r\n\r\n        rsapi.post(\"/registration/getTreeByProduct\", Map)\r\n            .then(response => {\r\n                let { Specification, AgaramTree, ActiveKey, FocusKey, OpenNodes } = [];\r\n                const selectedSpec = {}\r\n                if (response.data[\"rtn\"] === true) {\r\n                    Specification = constructOptionList(response.data[\"Specification\"] || [], \"nallottedspeccode\",\r\n                        \"sspecname\", undefined, undefined, true).get(\"OptionList\");\r\n                    AgaramTree = response.data[\"AgaramTree\"];\r\n                    ActiveKey = response.data[\"ActiveKey\"];\r\n                    FocusKey = response.data[\"FocusKey\"];\r\n                    OpenNodes = response.data[\"OpenNodes\"];\r\n                    //Manufacturer = response.data[\"Manufacturer\"];\r\n                    selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\r\n                        \"value\": Specification[0].value,\r\n                        \"label\": Specification[0].label,\r\n                        \"item\": Specification[0].item\r\n                    } : \"\";\r\n\r\n                    selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\"\r\n                    selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1\r\n                }\r\n                selectedRecord = { ...selectedRecord, ...selectedSpec }\r\n\r\n                if ((Map.nsampletypecode === SampleType.CLINICALTYPE &&\r\n                    Map.nportalrequired && Map.nportalrequired === 3\r\n                    && selectedRecord[\"Order Type\"] && selectedRecord[\"Order Type\"].value === 2)\r\n                    || (Map.nsampletypecode === SampleType.PRODUCT\r\n                        && selectedRecord[\"Plant Order\"] && selectedRecord[\"Plant Order\"].item && selectedRecord[\"Plant Order\"].item.jsondata.nallottedspeccode)) {\r\n\r\n                    let dispatchData = {\r\n                        Specification,\r\n                        selectedRecord,\r\n                        AgaramTree, ActiveKey, FocusKey, OpenNodes,\r\n                        Test: [],\r\n                        SelectedTest: [],\r\n                        loading: false,\r\n                        comboData,\r\n                        ...inputParam,\r\n                        selectedSpec,\r\n                        Component: [],\r\n                        selectComponent: {},\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList: [],\r\n                        \"userInfo\": Map.userInfo  // ALPD-3673 VISHAKH\r\n                    }\r\n\r\n\r\n                    if (Specification.length > 0) {\r\n                        if (Map.nsampletypecode === SampleType.CLINICALTYPE) {\r\n                            dispatch(autoExternalComponentLoadBasedOnSpec(dispatchData))\r\n                        }\r\n                        else if (Map.nsampletypecode === SampleType.PRODUCT) {\r\n                            dispatch(autoPortalTestLoadBasedOnSpec(dispatchData))\r\n                        }\r\n\r\n                    } else {\r\n                        let masterStatus = ''\r\n                        if (selectedRecord[\"Order\"] && selectedRecord[\"Order\"].item.jsondata.nallottedspeccode) {\r\n                            masterStatus = intl.formatMessage({ id: \"IDS_SELECTEDEXTERNALORDERSPECISRETIRED\" })\r\n                        }\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: { ...dispatchData, masterStatus }\r\n                        })\r\n                    }\r\n\r\n                }\r\n                else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            Specification,\r\n                            selectedRecord,\r\n                            AgaramTree, ActiveKey, FocusKey, OpenNodes,\r\n                            Test: [],\r\n                            SelectedTest: [],\r\n                            loading: false,\r\n                            comboData,\r\n                            ...inputParam,\r\n                            selectedSpec,\r\n                            Component: [],\r\n                            selectComponent: {},\r\n                            selectedComponent: {},\r\n                            subSampleDataGridList: [],\r\n                            addMaster: false,\r\n                            masterIndex: undefined,\r\n\r\n                        }\r\n                    });\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport const getNewRegSpecification = (inputParam, masterData) => {\r\n    return (dispatch) => {\r\n        if (inputParam.selectedNode !== null) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/registration/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam, ntreetemplatemanipulationcode: inputParam.selectedNode.ntemplatemanipulationcode })\r\n                .then(response => {\r\n                    sortData(response.data);\r\n                    let Specification = constructOptionList(response.data || [], \"nallottedspeccode\", \"sspecname\", false, false, true).get(\"OptionList\");\r\n                    let selectedComponent = undefined;\r\n                    inputParam.selectedRecord[\"nallottedspeccode\"] = Specification.length > 0 ? { value: Specification[0].value, label: Specification[0].label, item: Specification[0].item } : \"\";\r\n                    inputParam.selectedRecord[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\r\n                    inputParam.selectedRecord[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ActiveKey: inputParam.activeKey,\r\n                            FocusKey: inputParam.focusKey,\r\n                            primaryKey: inputParam.primaryKey,\r\n                            Specification: Specification,\r\n                            selectedNode: inputParam.selectedNode,\r\n                            selectedRecord: inputParam.selectedRecord,\r\n                            //  Test: [],\r\n                            selectedComponent,\r\n                            //ALPD-1793_fix\r\n                            // SelectedTest: [],\r\n                            loading: false,\r\n                            showSample: undefined\r\n                        }\r\n                    }\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.info(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\nexport function AddComponents(Map) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = []\r\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\",\r\n            Map);\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n\r\n        urlArray = [ComponentTestBySpec, timezone\r\n        ]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, true);\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n                let dreceiveddate = null;\r\n                if (lstComponent[0].item.sreceiveddate)\r\n                    dreceiveddate = rearrangeDateFormat(Map[\"userinfo\"], lstComponent[0].item.sreceiveddate);//new Date(lstComponent[0].item.sreceiveddate);//|| [];\r\n\r\n                let selectComponent = {\r\n                    sreceiveddate: dreceiveddate,\r\n                    dreceiveddate,\r\n                    ntzdreceivedate: { \"label\": Map[\"userinfo\"].stimezoneid, \"value\": Map[\"userinfo\"].ntimezonecode },\r\n                    stzdreceivedate: Map[\"userinfo\"].stimezoneid,\r\n                    scomments: \"\",\r\n                    nallottedspeccode: lstComponent[0].item.nallottedspeccode\r\n                };\r\n                let CurrentTime = dreceiveddate;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadComponent: true,\r\n                        lstComponent, dreceiveddate, ChildscreenName: \"Component\",\r\n                        showSaveContinue: true, openChildModal: false, childoperation: \"create\", selectComponent\r\n                        , parentPopUpSize: \"lg\", CurrentTime, timeZoneList, loading: false,\r\n                        openPortal: true, openModal: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getAllTest(objComponent, LoginProps, nneedsubsample, specBasedComponent, selectPackage1, specBasedTestPackage, selectPackage) {\r\n    return function (dispatch) {\r\n        if (Object.keys(objComponent).length > 0) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/registration/getTestfromDB\", {\r\n                nspecsampletypecode: objComponent.nspecsampletypecode,\r\n                slno: objComponent.slno,\r\n                nneedsubsample: nneedsubsample,\r\n                nallottedspeccode: objComponent.nallottedspeccode,\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage: specBasedTestPackage,\r\n                conditionalTestPackage: true,\r\n                //    ntestpackagecode:selectPackage.ntestpackagecode.value\r\n\r\n            })\r\n                .then(response => {\r\n                    let PackageData = [];\r\n                    let TestCombined = [];\r\n                    //   const TestCombined = response.data;\r\n                    let TestData = response.data;\r\n                    let Test = LoginProps.Test || [];\r\n                    let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n                    TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestgrouptestcode\");\r\n\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            TestCombined, TestPackage: PackageData, selectPackage: [],\r\n                            loadTest: true, openChildModal: false,\r\n                            ChildscreenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                            screenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                            operation: \"create\",\r\n                            childoperation: \"create\",\r\n                            parentPopUpSize: \"lg\", loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                })\r\n        } else {\r\n            toast.info(intl.formatMessage({ id: \"IDS_SELECTCOMPONENTTOADDTEST\" }));\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function getTest(objComponent, LoginProps, nneedsubsample, specBasedComponent, selectPackage1, specBasedTestPackage, selectPackage) {\r\n    return function (dispatch) {\r\n\r\n\r\n        // if (Object.keys(objComponent).length > 0) {\r\n        const urlArray = []\r\n\r\n        const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n            nspecsampletypecode: objComponent.nspecsampletypecode,\r\n            slno: objComponent.slno,\r\n            nneedsubsample: nneedsubsample,\r\n            nallottedspeccode: objComponent.nallottedspeccode,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: true,\r\n            //    ntestpackagecode:selectPackage.ntestpackagecode.value\r\n\r\n        });\r\n        urlArray[0] = TestGet;\r\n        const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n            nspecsampletypecode: objComponent.nspecsampletypecode,\r\n            slno: objComponent.slno,\r\n            nneedsubsample: nneedsubsample,\r\n            nallottedspeccode: objComponent.nallottedspeccode,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: true,\r\n        });\r\n        urlArray[1] = TestPackageGet;\r\n        const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\r\n            nspecsampletypecode: objComponent.nspecsampletypecode,\r\n            slno: objComponent.slno,\r\n            nneedsubsample: nneedsubsample,\r\n            nallottedspeccode: objComponent.nallottedspeccode,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: true,\r\n        });\r\n        urlArray[2] = TestSectionGet;\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray).then(response => {\r\n\r\n            // const TestCombined = [];\r\n            let PackageData = [];\r\n            let TestSectionData = [];\r\n            //  if (specBasedTestPackage) {\r\n            const PackageDataMap = constructOptionList(response[1].data.TestPackage || [], \"ntestpackagecode\",\r\n                \"stestpackagename\", undefined, undefined, true);\r\n            PackageData = PackageDataMap.get(\"OptionList\");\r\n\r\n            const TestSectionDataMap = constructOptionList(response[2].data.TestSection || [], \"nsectioncode\",\r\n                \"ssectionname\", undefined, undefined, true);\r\n            TestSectionData = TestSectionDataMap.get(\"OptionList\");\r\n            //    }\r\n            //    else {\r\n            let TestData = response[0].data;\r\n            let Test = LoginProps.Test || [];\r\n            let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n            let TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n            //    }\r\n            // const lstComponentMap = constructOptionList(TestCombined|| [], \"ntestgrouptestcode\",\r\n            //\"stestsynonym\", undefined, undefined, true);\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    TestCombined, TestPackage: PackageData, selectPackage: [], AllTest: TestData,\r\n                    TestSection: TestSectionData, selectSection: [],\r\n                    loadTest: true, openChildModal: false,\r\n                    ChildscreenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                    screenName: intl.formatMessage({ id: \"IDS_TEST\" }),\r\n                    operation: \"create\",\r\n                    childoperation: \"create\",\r\n                    parentPopUpSize: \"lg\", loading: false, AllSection: TestSectionData, selectedTestData: []\r\n                }\r\n            });\r\n        })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n        // } else {\r\n        //     toast.info(intl.formatMessage({ id: \"IDS_SELECTCOMPONENTTOADDTEST\" }));\r\n        // }\r\n\r\n    }\r\n}\r\n\r\nexport function addsubSample(masterData, userinfo, columnList,\r\n    selectComponent, childColumnList,\r\n    SubSamplecomboComponents, SubSamplewithoutCombocomponent,\r\n    specBasedComponent, Map, Component, isServiceRequired,\r\n    SubSamplecomboData, selectedRecord, conditionalTestPackage, specBasedTestPackage, LoginProps) {\r\n    if (isServiceRequired) {\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            const urlArray = []\r\n            const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n            urlArray[0] = timeZoneService;\r\n            const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n                parentcolumnlist: columnList ? columnList.filter(x => (x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter') && (x.readonly !== true)) : [],\r\n                childcolumnlist: childColumnList ? childColumnList : [],\r\n                userinfo\r\n            })\r\n            urlArray[1] = actualService;\r\n            if (specBasedComponent) {\r\n                const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                    ...Map,\r\n                    specBasedComponent: specBasedComponent,\r\n                    //   conditionalTestPackage:true\r\n                })\r\n                urlArray[2] = ComponentTestBySpec;\r\n            } else {\r\n                Component = Component ? Component : []\r\n                const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    nneedsubsample: Map[\"nneedsubsample\"],\r\n                    // nallottedspeccode: objComponent.nallottedspeccode,\r\n                    specBasedComponent: specBasedComponent,\r\n                    conditionalTestPackage: true,\r\n                    specBasedTestPackage: specBasedTestPackage\r\n                })\r\n                urlArray[2] = TestGet;\r\n                const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    // slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    specBasedComponent: specBasedComponent,\r\n                    //   specBasedTestPackage: specBasedTestPackage,\r\n                    //  conditionalTestPackage: conditionalTestPackage\r\n                });\r\n                urlArray[5] = TestPackageGet;\r\n\r\n                const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    // slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    specBasedComponent: specBasedComponent,\r\n                    //   specBasedTestPackage: specBasedTestPackage,\r\n                    //  conditionalTestPackage: conditionalTestPackage\r\n                });\r\n                urlArray[6] = TestSectionGet;\r\n            }\r\n            const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n                userinfo\r\n            })\r\n            urlArray[3] = currentDate\r\n            const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                userinfo\r\n            })\r\n            urlArray[4] = dateService\r\n            Axios.all(urlArray).then(response => {\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userinfo.stimezoneid, value: userinfo.ntimezonecode }\r\n                const newcomboData = parentChildComboLoad(columnList.filter(x => (x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter') && (x.readonly !== true)), response[1].data,\r\n                    selectComponent, childColumnList, SubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo)\r\n                let TestCombined = [];\r\n                let lstComponent = [];\r\n                let PackageData = [];\r\n                let TestSectionData = [];\r\n\r\n                const selectedRecord1 = newcomboData.selectedRecord\r\n                if (specBasedComponent) {\r\n                    const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, true);\r\n                    lstComponent = lstComponentMap.get(\"OptionList\");\r\n                    // if (lstComponent.length > 0) {\r\n                    //     selectedRecord1['ncomponentcode'] = { ...lstComponent[0] }\r\n                    //     selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\r\n                    //     selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\r\n                    //     selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample\r\n\r\n                    // }\r\n                    //Added by Dhanushya for jira ETICA-22\r\n                    if (lstComponent.length > 0) {\r\n                        if(Map[\"orderTypeCombCode\"] && Map[\"orderTypeCombCode\"]===orderType.EXTERNAL){\r\n                            selectedRecord1['ncomponentcode'] = { ...lstComponent[0] }\r\n                            selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\r\n                            selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\r\n                            selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample  \r\n                        }\r\n                        else{\r\n                      \r\n                         selectedRecord1[\"nspecsampletypecode\"] =  selectedRecord1['ncomponentcode'] && \r\n                         selectedRecord1['ncomponentcode'].item && selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\r\n                         selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample        \r\n                        }\r\n                                      \r\n                   }\r\n\r\n\r\n                } else {\r\n                    const PackageDataMap = constructOptionList(response[5].data.TestPackage || [], \"ntestpackagecode\",\r\n                        \"stestpackagename\", undefined, undefined, true);\r\n                    PackageData = PackageDataMap.get(\"OptionList\");\r\n                    const testSectionDataMap = constructOptionList(response[6].data.TestSection || [], \"nsectioncode\",\r\n                        \"ssectionname\", undefined, undefined, true);\r\n                    TestSectionData = testSectionDataMap.get(\"OptionList\");\r\n                    TestCombined = response[2].data\r\n                }\r\n                const comboData1 = newcomboData.comboData\r\n                SubSamplewithoutCombocomponent.map(componentrow => {\r\n                    if (componentrow.inputtype === \"date\") {\r\n                        if (componentrow.loadcurrentdate) {\r\n                            selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[3].data) : \"\";\r\n                            selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                        } else if (componentrow.nperiodcode) {\r\n                            selectedRecord1[componentrow.label + \"value\"] = response[4].data[componentrow.label] ?\r\n                                new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                            if (componentrow.loadselecteddate) {\r\n                                selectedRecord1[componentrow.label] = response[4].data[componentrow.label] ?\r\n                                    new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                            }\r\n                            //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                            //    new Date(response[2].data[componentrow.label]):null;\r\n                        } else {\r\n                            selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                        }\r\n\r\n                        if (componentrow.hidebeforedate) {\r\n                            selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                        }\r\n                        if (componentrow.hideafterdate) {\r\n                            selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                        }\r\n\r\n                    }\r\n                    else if (componentrow.inputtype === \"radio\"\r\n                        || componentrow.inputtype === \"checkbox\"\r\n                        || componentrow.inputtype === \"predefineddropdown\") {\r\n\r\n                        if (componentrow['radiodefaultvalue']) {\r\n                            if (componentrow.inputtype === \"checkbox\") {\r\n\r\n                                let val = ''\r\n                                componentrow.radiodefaultvalue &&\r\n                                    componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\r\n                                        val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',')\r\n                                    })\r\n\r\n                                selectedRecord1[componentrow.label] = val\r\n\r\n                            } else if (componentrow.inputtype === \"predefineddropdown\") {\r\n                                selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                    componentrow.radiodefaultvalue : \"\";\r\n                            } else {\r\n                                selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                    componentrow.radiodefaultvalue.label : \"\";\r\n                            }\r\n\r\n                        } else {\r\n                            if (componentrow.inputtype === \"radio\") {\r\n                                selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                                    componentrow.radioOptions.tags[0].text : \"\";\r\n                            }\r\n                        }\r\n\r\n                    }\r\n\r\n                })\r\n\r\n\r\n\r\n                const inputParam = {\r\n                    ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                    screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                    showSaveContinue: true,\r\n                    openChildModal: false,\r\n                    childoperation: \"create\",\r\n                    parentPopUpSize: \"lg\",\r\n                    loading: false,\r\n                    lstComponent,\r\n                    openPortal: true,\r\n                    openModal: false,\r\n                    operation: \"create\",\r\n                    loadSubSample: true,\r\n                    selectComponent: selectedRecord1,\r\n                    saveContinueData: { ...selectedRecord1 },\r\n                    SubSamplecomboData: comboData1,\r\n                    SubSamplecomboComponents,\r\n                    SubSamplewithoutCombocomponent,\r\n                    TestCombined,\r\n                    parentSubSampleColumnList: columnList,\r\n                    childSubSampleColumnList: childColumnList,\r\n                    timeZoneList,\r\n                    defaultTimeZone,\r\n                    masterData,\r\n                    selectPackage: [],\r\n                    TestPackage: PackageData,\r\n                    TestSection: TestSectionData, selectSection: [], AllTest: TestCombined, AllSection: TestSectionData\r\n                }\r\n\r\n                //if (specBasedComponent) {\r\n                //Added by Dhanushya for jira ETICA-22\r\n                    if (specBasedComponent && selectedRecord1['ncomponentcode']!==undefined) {\r\n\r\n                    dispatch(componentTest(selectedRecord1, false, specBasedComponent, Component, specBasedTestPackage, conditionalTestPackage, inputParam));\r\n\r\n                } else {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { ...inputParam } })\r\n                }\r\n            })\r\n                .catch(error => {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                })\r\n        }\r\n    } else {\r\n        const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\r\n            selectComponent, childColumnList,\r\n            SubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo)\r\n        return (dispatch) => {\r\n            if (!specBasedComponent) {\r\n                const urlArray = []\r\n                const ComponentTestBySpec = rsapi.post(\"/registration/getTestfromDB\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    // nneedsubsample: Map[\"nneedsubsample\"],\r\n                    ...Map,\r\n                    // nallottedspeccode: objComponent.nallottedspeccode,\r\n                    specBasedComponent: specBasedComponent,\r\n                    conditionalTestPackage: true,\r\n                    specBasedTestPackage: specBasedTestPackage\r\n                })\r\n                urlArray[0] = ComponentTestBySpec;\r\n                const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n                    userinfo\r\n                })\r\n                urlArray[1] = currentDate;\r\n                const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                    datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                    userinfo\r\n                })\r\n                urlArray[2] = dateService\r\n                const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n                    //  nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n                    nallottedspeccode: selectedRecord.nallottedspeccode.item.nallottedspeccode,\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    specBasedComponent: specBasedComponent,\r\n                    specBasedTestPackage: specBasedTestPackage,\r\n                    conditionalTestPackage: conditionalTestPackage\r\n                });\r\n                urlArray[3] = TestPackageGet;\r\n\r\n                const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\r\n                    //  nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n                    nallottedspeccode: selectedRecord.nallottedspeccode.item.nallottedspeccode,\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    specBasedComponent: specBasedComponent,\r\n                    specBasedTestPackage: specBasedTestPackage,\r\n                    conditionalTestPackage: conditionalTestPackage\r\n                });\r\n                urlArray[4] = TestSectionGet;\r\n                Axios.all(urlArray).then(response => {\r\n                    let TestCombined = []\r\n                    let PackageData = []\r\n                    let TestSectionData = []\r\n\r\n                    //  if (!specBasedTestPackage) {\r\n                    TestCombined = response[0].data\r\n                    // } \r\n                    // else {\r\n                    const PackageDataMap = constructOptionList(response[3].data.TestPackage || [], \"ntestpackagecode\",\r\n                        \"stestpackagename\", undefined, undefined, true);\r\n                    PackageData = PackageDataMap.get(\"OptionList\");\r\n\r\n                    const TestSectionDataMap = constructOptionList(response[4].data.TestSection || [], \"nsectioncode\",\r\n                        \"ssectionname\", undefined, undefined, true);\r\n                    TestSectionData = TestSectionDataMap.get(\"OptionList\");\r\n                    // if (PackageData.length === 0) {\r\n                    //    dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \r\n                    //} \r\n\r\n                    // }\r\n                    const selectedRecord1 = newcomboData.selectedRecord\r\n                    SubSamplewithoutCombocomponent.map(componentrow => {\r\n                        if (componentrow.inputtype === \"date\") {\r\n                            if (componentrow.loadcurrentdate) {\r\n                                selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[1].data) : \"\";\r\n                                selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                            } else if (componentrow.nperiodcode) {\r\n                                selectedRecord1[componentrow.label + \"value\"] = response[2].data[componentrow.label] ?\r\n                                    new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                if (componentrow.loadselecteddate) {\r\n                                    selectedRecord1[componentrow.label] = response[2].data[componentrow.label] ?\r\n                                        new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                }\r\n                                //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                                //    new Date(response[2].data[componentrow.label]):null;\r\n                            } else {\r\n                                selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                            }\r\n\r\n                            if (componentrow.hidebeforedate) {\r\n                                selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n                            if (componentrow.hideafterdate) {\r\n                                selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n\r\n                        }\r\n                        else if (componentrow.inputtype === \"radio\"\r\n                            || componentrow.inputtype === \"checkbox\"\r\n                            || componentrow.inputtype === \"predefineddropdown\") {\r\n\r\n                            if (componentrow['radiodefaultvalue']) {\r\n                                if (componentrow.inputtype === \"checkbox\") {\r\n\r\n                                    let val = ''\r\n                                    componentrow.radiodefaultvalue &&\r\n                                        componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\r\n                                            val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',')\r\n                                        })\r\n\r\n                                    selectedRecord1[componentrow.label] = val\r\n\r\n                                } else if (componentrow.inputtype === \"predefineddropdown\") {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                        componentrow.radiodefaultvalue : \"\";\r\n                                } else {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                        componentrow.radiodefaultvalue.label : \"\";\r\n                                }\r\n\r\n                            } else {\r\n                                if (componentrow.inputtype === \"radio\") {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                                        componentrow.radioOptions.tags[0].text : \"\";\r\n                                }\r\n                            }\r\n\r\n                        }\r\n\r\n                    })\r\n                    // if (masterData.RealRegSubTypeValue.nregsubtypecode === 6) {\r\n\r\n                    //     let portalOrder = selectedRecord && selectedRecord['Portal Order ID'] || {}\r\n                    //     let containerType = SubSamplecomboData['ContainerType'] || []\r\n                    //     let containerList = []\r\n                    //     const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\r\n                    //     containerType.map(x => {\r\n                    //         if (x.item.jsondata.nportalordercode === nportalordercode) {\r\n                    //             containerList.push(x)\r\n                    //         }\r\n                    //     })\r\n\r\n                    //     SubSamplecomboData['Container Type'] = containerList\r\n                    // }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                            screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                            showSaveContinue: true,\r\n                            openChildModal: false,\r\n                            childoperation: \"create\",\r\n                            parentPopUpSize: \"lg\",\r\n                            loading: false,\r\n                            lstComponent: [],\r\n                            openPortal: true,\r\n                            openModal: false,\r\n                            operation: \"create\",\r\n                            loadSubSample: true,\r\n                            selectComponent: selectedRecord1,\r\n                            saveContinueData: { ...selectedRecord1 },\r\n                            TestCombined: TestCombined,\r\n                            TestPackage: PackageData, TestSection: TestSectionData, selectSection: []\r\n                        }\r\n                    });\r\n                })\r\n            } else {\r\n\r\n                const urlArray = []\r\n                const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                    ...Map,\r\n                    specBasedComponent: specBasedComponent\r\n                })\r\n                urlArray[0] = ComponentTestBySpec;\r\n                const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n                    userinfo\r\n                })\r\n                urlArray[1] = currentDate;\r\n                const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                    datecolumnlist: SubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                    userinfo\r\n                })\r\n                urlArray[2] = dateService\r\n                Axios.all(urlArray).then(response => {\r\n\r\n                    const selectedRecord1 = newcomboData.selectedRecord\r\n                    // const lstComponent =  response.data.lstComponent\r\n                    let lstComponent = response[0].data.lstComponent //filterRecordBasedOnTwoArrays(response.data.lstComponent, Component, \"ncomponentcode\")\r\n                    const lstComponentMap = constructOptionList(lstComponent || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, true);\r\n\r\n                    lstComponent = lstComponentMap.get(\"OptionList\");\r\n\r\n                    if (lstComponent.length > 0) {\r\n                        // selectedRecord1['ncomponentcode'] = { ...lstComponent[0] }\r\n                        // selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\r\n                        // selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\r\n                        // selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample\r\n                        //Added by Dhanushya for jira ETICA-22\r\n                        if(Map[\"orderTypeCombCode\"] && Map[\"orderTypeCombCode\"]===orderType.EXTERNAL){\r\n                            selectedRecord1['ncomponentcode'] = { ...lstComponent[0] }\r\n                            selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\r\n                            selectedRecord1[\"nspecsampletypecode\"] = lstComponent[0].item.nspecsampletypecode;\r\n                            selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample\r\n                           }\r\n                           else{\r\n                            selectedRecord1[\"nspecsampletypecode\"] = lstComponent[0].item.nspecsampletypecode;\r\n                            selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample\r\n                           }\r\n\r\n                    }\r\n\r\n                    SubSamplewithoutCombocomponent.map(componentrow => {\r\n                        if (componentrow.inputtype === \"date\") {\r\n                            if (componentrow.loadcurrentdate) {\r\n                                selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[1].data) : \"\";\r\n                                selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                            } else if (componentrow.nperiodcode) {\r\n                                selectedRecord1[componentrow.label + \"value\"] = response[2].data[componentrow.label] ?\r\n                                    new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                if (componentrow.loadselecteddate) {\r\n                                    selectedRecord1[componentrow.label] = response[2].data[componentrow.label] ?\r\n                                        new Date(response[2].data[componentrow.label][\"datevalue\"]) : null;\r\n                                }\r\n                                //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                                //    new Date(response[2].data[componentrow.label]):null;\r\n                            } else {\r\n                                selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                            }\r\n\r\n                            if (componentrow.hidebeforedate) {\r\n                                selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n                            if (componentrow.hideafterdate) {\r\n                                selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                            }\r\n\r\n                        }\r\n                        else if (componentrow.inputtype === \"radio\"\r\n                            || componentrow.inputtype === \"checkbox\"\r\n                            || componentrow.inputtype === \"predefineddropdown\") {\r\n\r\n                            if (componentrow['radiodefaultvalue']) {\r\n                                if (componentrow.inputtype === \"checkbox\") {\r\n\r\n                                    let val = ''\r\n                                    componentrow.radiodefaultvalue &&\r\n                                        componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\r\n                                            val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',')\r\n                                        })\r\n\r\n                                    selectedRecord1[componentrow.label] = val\r\n\r\n                                } else if (componentrow.inputtype === \"predefineddropdown\") {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                        componentrow.radiodefaultvalue : \"\";\r\n                                } else {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                        componentrow.radiodefaultvalue.label : \"\";\r\n                                }\r\n\r\n                            } else {\r\n                                if (componentrow.inputtype === \"radio\") {\r\n                                    selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                                        componentrow.radioOptions.tags[0].text : \"\";\r\n                                }\r\n                            }\r\n\r\n                        }\r\n\r\n                    })\r\n\r\n\r\n\r\n                    const inputParam = {\r\n                        ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                        screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                        showSaveContinue: true,\r\n                        openChildModal: false,\r\n                        childoperation: \"create\",\r\n                        parentPopUpSize: \"lg\",\r\n                        loading: false,\r\n                        lstComponent,\r\n                        openPortal: true,\r\n                        openModal: false,\r\n                        operation: \"create\",\r\n                        loadSubSample: true,\r\n                        selectComponent: selectedRecord1,\r\n                        saveContinueData: { ...selectedRecord1 },\r\n                        TestCombined: [],\r\n                        selectedTestData: [],\r\n                        selectPackage: [], selectSection: []\r\n                    }\r\n                    if (specBasedComponent) {\r\n                        dispatch(componentTest(selectedRecord1, false, specBasedComponent, Component, specBasedTestPackage, conditionalTestPackage, inputParam));\r\n\r\n                    } else {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { ...inputParam } })\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function componentTest(selectedobject, Reg, specBasedComponent, Component, specBasedTestPackage, conditionalTestPackage, inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const urlArray = []\r\n        Component = Component ? Component : []\r\n        const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n            nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n            slno: Component ? Object.keys(Component).length + 1 : 1,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: conditionalTestPackage,\r\n            nneedsubsample: selectedobject.nneedsubsample\r\n        });\r\n        urlArray[0] = TestGet;\r\n        const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n            nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n            slno: Component ? Object.keys(Component).length + 1 : 1,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: conditionalTestPackage\r\n        });\r\n        urlArray[1] = TestPackageGet;\r\n\r\n        const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\r\n            nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n            slno: Component ? Object.keys(Component).length + 1 : 1,\r\n            specBasedComponent: specBasedComponent,\r\n            specBasedTestPackage: specBasedTestPackage,\r\n            conditionalTestPackage: conditionalTestPackage\r\n        });\r\n        urlArray[2] = TestSectionGet;\r\n        Axios.all(urlArray).then(response => {\r\n            let PackageData = []\r\n            let TestData = []\r\n            let TestSectionData = []\r\n            // if (specBasedTestPackage) {\r\n            const PackageDataMap = constructOptionList(response[1].data.TestPackage || [], \"ntestpackagecode\",\r\n                \"stestpackagename\", undefined, undefined, true);\r\n            PackageData = PackageDataMap.get(\"OptionList\");\r\n\r\n            const testSectionDataMap = constructOptionList(response[2].data.TestSection || [], \"nsectioncode\",\r\n                \"ssectionname\", undefined, undefined, true);\r\n            TestSectionData = testSectionDataMap.get(\"OptionList\");\r\n\r\n            // if (PackageData.length === 0) {\r\n            //     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \r\n            // } \r\n            //   }\r\n            //    else {\r\n            TestData = response[0].data;\r\n            //  }\r\n            //let Test = [];\r\n            // Test[selectedobject.slno] = TestData;\r\n            const Map = {}\r\n            if (Reg) {\r\n                Map[\"selectedRecord\"] = selectedobject\r\n            } else {\r\n                Map[\"selectComponent\"] = selectedobject\r\n            }\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    ...inputParam, TestCombined: TestData, AllTest: TestData, TestPackage: PackageData, ...Map, loading: false, selectedTestData: [],\r\n                    selectPackage: [], TestSection: TestSectionData, selectSection: [], AllSection: TestSectionData\r\n\r\n                }\r\n            });\r\n        })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\n// export function testPackageTest(selectedobject, Reg, specBasedComponent, Component,specBasedTestPackage,conditionalTestPackage,selectComponent,objComponent,LoginProps,selectPackage,subSampleBased,selectedSpec,nneedsubsample) {\r\n// export function testPackageTest(selectedobject, Reg, specBasedComponent, Component, selectComponent, objComponent, LoginProps, selectPackage, subSampleBased, selectedSpec, nneedsubsample, action) {\r\n\r\n//     return function (dispatch) {\r\n//         dispatch(initRequest(true));\r\n//         Component = Component ? Component : []\r\n//         // rsapi.post(\"/registration/getTestBasesdTestPackage\", {\r\n//         //     nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\r\n//         //     slno:subSampleBased?Component ? Object.keys(Component).length + 1 : 1:selectComponent.slno,\r\n//         //     specBasedComponent: specBasedComponent,\r\n//         //     ntestpackagecode: selectPackage.ntestpackagecode.value,\r\n//         //     nallottedspeccode:selectedSpec!==undefined?selectedSpec.value:selectedobject.nallottedspeccode\r\n\r\n//         // })\r\n//         rsapi.post(\"/registration/getTestBasesdTestPackage\", {\r\n//             // nspecsampletypecode:!nneedsubsample?selectedSpec.item.nspecsampletypecode: Object.keys(selectedobject).length!==0?selectedobject.nspecsampletypecode:selectComponent.nspecsampletypecode,\r\n//             nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\r\n//             //     slno: subSampleBased ? Component ? Object.keys(Component).length + 1 : 1 : selectComponent.slno,\r\n//             specBasedComponent: specBasedComponent,\r\n//             ntestpackagecode: selectPackage.ntestpackagecode.value,\r\n//             nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\r\n\r\n//         })\r\n//             .then(response => {\r\n//                 const Map = {}\r\n//                 let TestData = response.data;\r\n//                 let Test = (action !== \"AddSubSample\") ? (LoginProps.Test || []) : [];\r\n\r\n//                 let componentTest = [];\r\n//                 if (subSampleBased) {\r\n//                     componentTest = Test[Component ? Object.keys(Component).length + 1 : 1] ? Test[Component ? Object.keys(Component).length + 1 : 1] : [];\r\n\r\n//                 } else {\r\n//                     componentTest = objComponent && Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n\r\n//                 }\r\n//                 const availableTest = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n//                 const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n\r\n//                 delete selectedobject.ntestgrouptestcode;\r\n//                 if (Reg) {\r\n//                     Map[\"selectedRecord\"] = selectedobject\r\n//                 } else {\r\n//                     Map[\"selectPackage\"] = selectPackage\r\n//                 }\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN,\r\n//                     payload: {\r\n//                         availableTest, TestCombined, ...Map, loading: false, selectedTestData: [], AllTest: LoginProps.TestCombined\r\n//                         //, selectPackage: []\r\n//                         // TestCombined,loadTest: true, openChildModal: false,\r\n//                         // ChildscreenName: \"Test\",\r\n//                         //  screenName: \"Test\",\r\n//                         // operation: \"create\",\r\n//                         //  childoperation: \"create\",\r\n//                         //   parentPopUpSize: \"lg\", loading: false\r\n//                     }\r\n//                 });\r\n//             })\r\n//             .catch(error => {\r\n//                 toast.error(error.message);\r\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n//             })\r\n//     }\r\n// }\r\n\r\nexport function testPackageTest(selectedobject, Reg, specBasedComponent, Component, selectComponent, objComponent, LoginProps, selectPackage, selectSection, subSampleBased, selectedSpec, nneedsubsample, action) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = []\r\n        let testpackage;\r\n        Component = Component ? Component : []\r\n        const testsection = rsapi.post(\"/registration/getTestSectionBasesdTestPackage\", {\r\n            nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\r\n            specBasedComponent: specBasedComponent,\r\n            ntestpackagecode: selectPackage.ntestpackagecode.value,\r\n            nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\r\n\r\n        })\r\n        //ALPD-3404\r\n        urlArray[0] = testsection;\r\n        testpackage = rsapi.post(\"/registration/getTestBasesdTestPackage\", {\r\n            nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\r\n            specBasedComponent: specBasedComponent,\r\n            ntestpackagecode: selectPackage.ntestpackagecode.value,\r\n            nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\r\n\r\n        })\r\n        urlArray[1] = testpackage;\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const Map = {}\r\n                let TestSectionData = [];\r\n                let TestData = response[1].data;\r\n                let Test = (action !== \"AddSubSample\") ? (LoginProps.Test || []) : [];\r\n\r\n                let componentTest = [];\r\n                if (subSampleBased) {\r\n                    componentTest = Test[Component ? Object.keys(Component).length + 1 : 1] ? Test[Component ? Object.keys(Component).length + 1 : 1] : [];\r\n\r\n                } else {\r\n                    componentTest = objComponent && Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n\r\n                }\r\n                const availableTest = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n                const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n\r\n\r\n                const testSectionDataMap = constructOptionList(response[0].data.TestSectionBasedonTestPackage || [], \"nsectioncode\",\r\n                    \"ssectionname\", undefined, undefined, true);\r\n                TestSectionData = testSectionDataMap.get(\"OptionList\");\r\n\r\n                delete selectedobject.ntestgrouptestcode;\r\n                delete selectedobject.nsectioncode;\r\n                if (Reg) {\r\n                    Map[\"selectedRecord\"] = selectedobject\r\n                } else {\r\n                    Map[\"selectPackage\"] = selectPackage\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        availableTest, TestCombined, ...Map, loading: false, selectedTestData: [],\r\n                        AllTest: LoginProps.AllTest,\r\n                        AllSection: LoginProps.AllSection, TestSection: TestSectionData, selectSection: [],\r\n                        TestPakageTest: TestCombined\r\n                        //, selectPackage: []\r\n                        // TestCombined,loadTest: true, openChildModal: false,\r\n                        // ChildscreenName: \"Test\",\r\n                        //  screenName: \"Test\",\r\n                        // operation: \"create\",\r\n                        //  childoperation: \"create\",\r\n                        //   parentPopUpSize: \"lg\", loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n//ALPD-3404\r\nexport function testSectionTest(selectedobject, Reg, specBasedComponent, Component, selectComponent, objComponent, LoginProps, selectPackage, selectSection, subSampleBased, selectedSpec, nneedsubsample, action) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        Component = Component ? Component : []\r\n        rsapi.post(\"/registration/getTestBasedTestSection\", {\r\n            nspecsampletypecode: selectComponent && selectComponent.nspecsampletypecode ? selectComponent.nspecsampletypecode : selectedobject.nspecsampletypecode,\r\n            specBasedComponent: specBasedComponent,\r\n            ntestpackagecode: selectPackage.ntestpackagecode && selectPackage.ntestpackagecode.value || -1,\r\n            nsectioncode: selectSection.nsectioncode.value,\r\n            nallottedspeccode: selectedSpec && selectedSpec.value !== undefined ? selectedSpec.value : selectedobject.nallottedspeccode\r\n        })\r\n            .then(response => {\r\n                const Map = {}\r\n                let TestData = response.data;\r\n                let Test = (action !== \"AddSubSample\") ? (LoginProps.Test || []) : [];\r\n\r\n                let componentTest = [];\r\n                if (subSampleBased) {\r\n                    componentTest = Test[Component ? Object.keys(Component).length + 1 : 1] ? Test[Component ? Object.keys(Component).length + 1 : 1] : [];\r\n\r\n                } else {\r\n                    componentTest = objComponent && Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n\r\n                }\r\n                const availableTest = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n                const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestcode\");\r\n\r\n                delete selectedobject.ntestgrouptestcode;\r\n                if (Reg) {\r\n                    Map[\"selectedRecord\"] = selectedobject\r\n                } else {\r\n                    Map[\"selectPackage\"] = selectPackage\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        availableTest, TestCombined, ...Map, loading: false, selectedTestData: [],\r\n                        AllTest: LoginProps.AllTest\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function addSubSampleSaveContinue(Map1, Map,\r\n    specBasedComponent, Component, selectedTestData, lstComponent, LoginProps) {\r\n\r\n    //  const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\r\n    //     selectComponent, childColumnList, SubSamplewithoutCombocomponent)\r\n    return (dispatch) => {\r\n        if (!specBasedComponent) {\r\n            // rsapi.post(\"/registration/getTestfromDB\", {\r\n            //     nallottedspeccode: Map[\"nallottedspeccode\"],\r\n            //     nspecsampletypecode: Map[\"nspecsampletypecode\"],\r\n            //     slno: Map1.Component ? Object.keys(Map1.Component).length + 1 : 1,\r\n            //     specBasedComponent: specBasedComponent, nneedsubsample: Map[\"nneedsubsample\"]\r\n            // }).then(response => {\r\n            //     let TestCombined = Map1.TestCombined;//response.data\r\n            //     // let selectedTestPackageData = selectedTestPackageData && selectedTestPackageData.length > 0 ? selectedTestData : []\r\n\r\n            //     let selectedTestPackageData = selectedTestData && selectedTestData.length > 0 ? selectedTestData : []\r\n\r\n            //     const selectedTestPackageData1 = TestCombined.filter(function (x) {\r\n            //         return selectedTestPackageData.some(function (y) {\r\n            //             return x[\"ntestpackagetestcode\"] === y.value\r\n            //         })\r\n            //     });\r\n            //     selectedTestData = selectedTestData && selectedTestData.length > 0 ? selectedTestPackageData : []\r\n\r\n            //     const selectedTestData1 = TestCombined.filter(function (x) {\r\n            //         return selectedTestData.some(function (y) {\r\n            //             return x[\"ntestgrouptestcode\"] === y.value\r\n            //         })\r\n            //     });\r\n\r\n\r\n            //     selectedTestData = constructOptionList(selectedTestData1, \"ntestgrouptestcode\", \"stestsynonym\")\r\n            //     selectedTestData[\"ntestgrouptestcode\"] = selectedTestData.get(\"OptionList\")\r\n            //     selectedTestPackageData = constructOptionList(selectedTestPackageData1, \"ntestpackagetestcode\", \"stestpackagename\")\r\n            //     selectedTestPackageData[\"ntestpackagetestcode\"] = selectedTestPackageData.get(\"OptionList\")\r\n\r\n            //     // Map1.selectComponent = {};\r\n            //     Map1.selectComponent = { ...Map1.saveContinueData };\r\n            //     // Map1.selectComponent[\"ncomponentcode\"] = {};\r\n            //     dispatch({\r\n            //         type: DEFAULT_RETURN,\r\n            //         payload: {\r\n            //             ...Map1,\r\n            //             loading: false,\r\n            //             TestCombined,\r\n            //             selectPackage: [],\r\n            //             //TestPackage\r\n            //             //selectedTestData,\r\n            //             //selectedTestPackageData,\r\n            //             selectedTestData: [],\r\n            //             selectedTestPackageData: [],\r\n            //             masterStatus: intl.formatMessage({ id: \"IDS_SAVESUCCESSFULLY\" })\r\n            //         }\r\n            //     });\r\n            // })\r\n            Map1.selectComponent = { ...Map1.saveContinueData };\r\n            //ALPD-3404\r\n            const TestCombined = LoginProps.AllTest || Map1.TestCombined;\r\n            delete (Map1.TestCombined)\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    ...Map1,\r\n                    loading: false,\r\n                    TestCombined,\r\n                    selectPackage: [],\r\n                    selectSection: [],\r\n                    //TestPackage\r\n                    //selectedTestData,\r\n                    //selectedTestPackageData,\r\n                    selectedTestData: [],\r\n                    selectedTestPackageData: [],\r\n                    masterStatus: intl.formatMessage({ id: \"IDS_SAVESUCCESSFULLY\" }),\r\n                }\r\n            });\r\n\r\n        }\r\n        else {\r\n            // lstComponent = lstComponent.filter(x => x.item.nspecsampletypecode !== Map1.selectComponent[\"nspecsampletypecode\"])\r\n            // Map1.selectComponent = {};\r\n            // Map1.selectComponent[\"ncomponentcode\"] = {};           \r\n            // Map1.selectComponent[\"Sample Name\"] = \"\";\r\n            Map1.selectComponent = { ...Map1.saveContinueData }//, \"ncomponentcode\": {} };\r\n            const inputParam = {\r\n                ...Map1,\r\n                loading: false,\r\n                TestCombined: [],\r\n                selectPackage: [],\r\n                TestPackage: [],\r\n                selectedTestData: [],\r\n                selectedTestPackageData: [],\r\n                selectComponent:{},\r\n                lstComponent,\r\n                masterStatus: intl.formatMessage({ id: \"IDS_SAVESUCCESSFULLY\" }),\r\n            }\r\n            if (Map1.selectComponent['ncomponentcode'] !== undefined) {\r\n                dispatch(componentTest(Map1.selectComponent, false, specBasedComponent, Component, Map1.specBasedTestPackage, Map1.specBasedTestPackage ? true : false, inputParam));\r\n            }\r\n            else{\r\n                dispatch({ type: DEFAULT_RETURN, payload: { ...inputParam } })\r\n            }\r\n            }\r\n    }\r\n\r\n}\r\n\r\nexport function editSubSample(Map,\r\n    component, userInfo, specBasedComponent,\r\n    SubSamplecomboData, selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = []\r\n        let Componnet = {}\r\n        if (specBasedComponent) {\r\n            Componnet = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                ...Map\r\n            });\r\n        }\r\n        urlArray = [Componnet]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let comp = []\r\n                if (specBasedComponent) {\r\n                    comp = response[0].data.lstComponent\r\n                }\r\n                const lstComponentMap = constructOptionList(comp || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                if (Map.nregsubtypecode === 6) {\r\n                    let portalOrder = component['Container Type'] || {}\r\n                    let containerType = SubSamplecomboData['ContainerType'] || []\r\n                    let containerList = []\r\n                    const nportalordercode = portalOrder && portalOrder.value ? portalOrder.value : -1\r\n                    containerType.map(x => {\r\n                        if (x.item.jsondata.nportalordercode === nportalordercode) {\r\n                            containerList.push(x)\r\n                        }\r\n                    })\r\n\r\n                    SubSamplecomboData['Container Type'] = containerList\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadSubSample: true, childoperation: \"update\",\r\n                        ChildscreenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                        openChildModal: false, selectComponent: component,\r\n                        parentPopUpSize: \"lg\", loading: false, lstComponent, SubSamplecomboData\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function insertRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload) {\r\n            requestUrl = rsapi.post(\"/registration/createRegistrationWithFile\", inputParam.formData)\r\n        } else {\r\n            requestUrl = rsapi.post(\"/registration/createRegistration\", inputParam.inputData)\r\n        }\r\n        return requestUrl\r\n            //  rsapi.post(\"/registration/createRegistration\", inputParam.formData)\r\n            .then(response => {\r\n                if (response.data.rtn === \"Success\") {\r\n                    // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                    //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                    // }\r\n\r\n                    let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample, 'Sample');\r\n                    let selectedSample = response.data[\"selectedSample\"];\r\n                    let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    let selectedSubSample = RegistrationGetSubSample;\r\n                    RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                    let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                    let regSampleExisted = inputParam.inputData && inputParam.inputData.orderTypeValue === 2 ? true : false;\r\n                    if (inputParam.inputData.nneedsubsample) {\r\n                        RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                        selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                        RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                        selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                    }\r\n                    // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                    if (inputParam.multipleselectionFlag) {\r\n                        selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                        RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                        RegistrationGetTest = masterData.RegistrationGetTest;\r\n                    }\r\n\r\n                    masterData = {\r\n                        ...masterData, ...response.data,\r\n                        selectedSample, selectedSubSample, selectedTest,\r\n                        RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample,\r\n                    }\r\n                    if (masterData[\"kendoFilterList\"] !== undefined) {\r\n                        masterData[\"kendoFilterList\"] = undefined;\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        ...inputParam.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        selectedRecord: undefined,\r\n                        loading: false,\r\n                        loadPreregister: false,\r\n                        showSample: undefined,\r\n                        openPortal: false,\r\n                        selectedSpec: {},\r\n                        selectComponent: {},\r\n                        SelectedTest: {},\r\n                        selectedComponent: {},\r\n                        Component: [],\r\n                        selectedRecord: {},\r\n                        SelectedTest: [],\r\n                        Test: [],\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList: [],\r\n                        preregConfirmMessage: undefined,\r\n                        regSampleExisted, loadImportFileData: false, loadImportSampleCountData: false,\r\n                        skip: 0,\r\n                        subsampleskip: 0,\r\n                        testskip: 0,\r\n                        isDynamicViewSlideOut: false,\r\n                        // filterColumnActive:false,\r\n                    }\r\n                    inputParam.postParamList[0]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[1]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                } else {\r\n                    toast.warn(response.data.rtn);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false, preregConfirmMessage: undefined } })\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                if (error.response.status === 500) {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false, preregConfirmMessage: undefined } })\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                preregConfirmMessage: error.response.data.rtn,\r\n                                preregConfirmParam: { inputParam, masterData },\r\n                                loading: false,\r\n                                showSample: undefined,\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        toast.error(error.message);\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                loading: false,\r\n                                showConfirmAlert: false, preregConfirmMessage: undefined\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function insertRegistrationScheduler(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/schedulerinsertRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                // if (response.data.rtn === \"Success\") {\r\n                //     let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\r\n                //     let selectedSample = response.data[\"selectedSample\"];\r\n                //     let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                //     let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                //     let selectedSubSample = RegistrationGetSubSample;\r\n                //     RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                //     let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                //     if (inputParam.inputData.nneedsubsample) {\r\n                //         RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                //         selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                //         RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                //         selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                //     }\r\n                //     // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                //     if (inputParam.multipleselectionFlag) {\r\n                //         selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                //         updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                //         updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                //         RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                //         RegistrationGetTest = masterDat..a.RegistrationGetTest;\r\n                //     }\r\n\r\n\r\n                //     masterData = {\r\n                //         ...masterData, ...response.data,\r\n                //         selectedSample, selectedSubSample, selectedTest,\r\n                //         RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\r\n                //     }\r\n                let respObject = {\r\n                    masterData: { ...masterData, SchedulerTransaction: response[\"data\"].SchedulerTransaction },\r\n                    ...inputParam.inputData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    showConfirmAlert: false,\r\n                    selectedRecord: undefined,\r\n                    loading: false,\r\n                    loadPreregister: false,\r\n                    showSample: undefined,\r\n                    openPortal: false,\r\n                    selectedSpec: {},\r\n                    selectComponent: {},\r\n                    SelectedTest: {},\r\n                    selectedComponent: {},\r\n                    Component: [],\r\n                    selectedRecord: {},\r\n                    SelectedTest: [],\r\n                    Test: [],\r\n                    selectedComponent: {},\r\n                    subSampleDataGridList: []\r\n                }\r\n                // inputParam.postParamList[0]['clearFilter'] = 'yes'\r\n                // dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                dispatch({ type: DEFAULT_RETURN, payload: { ...respObject } })\r\n                // } else {\r\n                //     toast.info(response.data.rtn);\r\n                //     dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n                // }\r\n\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegistrationSample(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData })\r\n            .then(response => {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    ...response.data\r\n                }\r\n                if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                    inputData.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                let respObject = {};\r\n                if (inputData.selectedFilter) {\r\n                    respObject = { selectedFilter: { ...inputData.selectedFilter } };\r\n                }\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        testskip: 0,\r\n                        take: undefined,\r\n                        testtake: undefined,\r\n                        subsampleskip: 0,\r\n                        subsampletake: undefined,\r\n                        showSample: undefined,\r\n                        ...respObject,\r\n                        activeSampleTab: inputData.inputData.activeSampleTab, regSampleExisted: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegistrationsubSampleDetail(inputData, isServiceRequired, isParentValue) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntransactionstatus: inputData.ntransactionstatus,\r\n            napprovalconfigcode: inputData.napprovalconfigcode,\r\n            activeTestTab: inputData.activeTestTab,\r\n            activeSampleTab: inputData.activeTestTab,\r\n            activeSubSampleTab: inputData.activeTestTab,\r\n            userinfo: inputData.userinfo,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            nneedsubsample: inputData.nneedsubsample,\r\n            // ntype: inputData.nneedsubsample === true ? inputData.checkBoxOperation === 7 ? 4 : undefined:2, //ALPD-497\r\n            ntype: inputData.nneedsubsample === true ? inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL ? checkBoxOperation.SINGLEDESELECT : undefined : checkBoxOperation.DESELECT, //ALPD-497\r\n            checkBoxOperation: inputData.nneedsubsample === true ?\r\n                inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS ? checkBoxOperation.SINGLESELECT : inputData.checkBoxOperation : inputData.checkBoxOperation,\r\n            OrderCodeData: inputData.selectedSample ? inputData.selectedSample.length > 0 && inputData.selectedSample.map(item => item.hasOwnProperty(\"OrderCodeData\") ? item.OrderCodeData : -1).join(\",\") : null,\r\n            selectedPreregno: inputData.selectedSample && inputData.selectedSample.length > 0 ? inputData.selectedSample.map(item => item.npreregno).join(\",\") : null,\r\n            selectedTransactionsamplecode: inputData.selectedSample && inputData.selectedSample.length > 1\r\n                && inputData.masterData.selectedSubSample ? inputData.masterData.selectedSubSample.map(item => item.ntransactionsamplecode).join(\",\") : null,\r\n            noutsourcerequired: inputData.masterData && inputData.masterData.RealSampleTypeValue ? inputData.masterData.RealSampleTypeValue.noutsourcerequired : transactionStatus.NA\r\n        }\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        const subSample = inputData.nneedsubsample\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(\"registration/getRegistrationSubSample\", inputParamData)\r\n                .then(response => {\r\n                    sortData(response.data, \"descending\", \"npreregno\");\r\n                    // if(isParentValue){\r\n                    response.data['RegistrationGetSubSample'] = sortDataByParent(response.data['RegistrationGetSubSample'], inputData.sample, \"npreregno\");\r\n                    //response.data['RegistrationGetTest']= sortDataByParent(response.data['RegistrationGetTest'],response.data['RegistrationGetSubSample'], \"ntransactionsamplecode\");\r\n                    //  }\r\n                    sortData(response.data['RegistrationAttachment']);\r\n                    sortData(response.data['RegistrationComment']);\r\n                    let masterData = {}\r\n                    let skipInfo = {}\r\n                    let oldSelectedTest = inputData.masterData.selectedTest || []\r\n                    let externalOrderAttachmentList = response.data && response.data.ExternalOrderAttachmentList;\r\n                    let outsourceDetailsList = response.data && response.data.OutsourceDetailsList;\r\n                    if (subSample) {\r\n                        let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n                        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                            inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\",\r\n                            inputData.removeElementFromArray);\r\n                        masterData = {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample,\r\n                            selectedPreregno: inputData.npreregno,\r\n                            selectedSubSample: inputData.masterData.RegistrationGetSubSample.length > 0 ?\r\n                                [inputData.masterData.RegistrationGetSubSample[0]] : [],\r\n                            activeTabIndex: inputData.activeTabIndex,\r\n                        }\r\n                        let RegistrationTestComment = [];\r\n                        let RegistrationTestAttachment = [];\r\n                        let RegistrationParameter = [];\r\n                        let RegistrationComment = [];\r\n                        //if (inputData.checkBoxOperation === 1 || inputData.checkBoxOperation === 7) {  \r\n                        //if (inputData.checkBoxOperation === 1) {\r\n                        if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\r\n\r\n                            const wholeSubSampleList = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                            // START ALPD-3625 VISHAKH\r\n                            // oldSelectedSubSample.forEach((subsample, index) => {\r\n                            //     if (!wholeSubSampleList.includes(subsample.ntransactionsamplecode)) {\r\n                            //         oldSelectedSubSample.splice(index, 1)\r\n                            //     }\r\n\r\n                            // })\r\n                            oldSelectedSubSample = oldSelectedSubSample.filter(item =>\r\n                                wholeSubSampleList.includes(item.ntransactionsamplecode)\r\n                            );\r\n                            // END ALPD-3625 VISHAKH\r\n                            if (oldSelectedSubSample.length > 0) {\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedSubSample: oldSelectedSubSample\r\n                                }\r\n                            }\r\n                            const selectedTest = getSameRecordFromTwoArrays(oldSelectedTest,\r\n                                masterData.selectedSubSample, 'npreregno')\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest\r\n                            }\r\n                        }\r\n                        //  if (inputData.checkBoxOperation === 7) {\r\n                        if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {\r\n                            // masterData = {\r\n                            //     ...masterData,\r\n                            //     APSelectedTest:responseData.APSelectedTest,\r\n                            //     AP_TEST:responseData.AP_TEST,\r\n                            //     ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\r\n                            // }\r\n\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                    let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                            masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                            masterData[\"RegistrationComment\"] = RegistrationComment;\r\n                        }\r\n                        //if (inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 5) {\r\n                        if (inputData.checkBoxOperation === checkBoxOperation.SINGLESELECT || inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest: masterData.RegistrationGetTest.length > 0 ? [masterData.RegistrationGetTest[0]] : []\r\n                            }\r\n\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [\r\n                                            // ...inputData.masterData.RegistrationTestComment, \r\n                                            ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [\r\n                                                // ...inputData.masterData.RegistrationTestAttachment, \r\n                                                ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [\r\n                                        // ...inputData.masterData.RegistrationParameter, \r\n                                        ...resultResponseData];\r\n                                    let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = response.data.RegistrationComment ?\r\n                                        [...response.data.RegistrationComment] : [];\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [\r\n                                            // ...inputData.masterData.RegistrationTestComment, \r\n                                            ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                            masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                            masterData[\"RegistrationComment\"] = RegistrationComment;\r\n\r\n                        }\r\n                        masterData['ExternalOrderAttachmentList'] = externalOrderAttachmentList;\r\n                        masterData['OutsourceDetailsList'] = outsourceDetailsList;\r\n                        let { testskip, testtake, subsampleskip, subsampletake } = inputData\r\n                        // let bool = false;\r\n                        // Commented bool value because no need to check bool condition to update skipInfo value.\r\n                        // if (inputData.masterData.RegistrationGetSubSample.length < inputData.subsampleskip) {\r\n                        testskip = 0;\r\n                        subsampleskip = 0;\r\n                        // bool = true\r\n                        // }\r\n                        // if (bool) {\r\n                        skipInfo = { testskip, testtake, subsampleskip, subsampletake }\r\n                        // }\r\n                    } else {\r\n\r\n                        //let oldSelectedTest = inputData.masterData.selectedTest\r\n                        //  let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n                        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                            inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\",\r\n                            inputData.removeElementFromArray);\r\n                        masterData = {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample,\r\n                            selectedPreregno: inputData.npreregno,\r\n                            selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                            selectedSubSample: inputData.masterData.RegistrationGetSubSample,\r\n                        }\r\n                        let RegistrationTestComment = [];\r\n                        let RegistrationParameter = [];\r\n                        let RegistrationTestAttachment = [];\r\n                        let RegistrationComment = [];\r\n\r\n                        //if (inputData.checkBoxOperation === 7 || inputData.checkBoxOperation === 1) {\r\n                        if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL || inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\r\n                            const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                            // START ALPD-3625 VISHAKH\r\n                            // oldSelectedTest.forEach((test, index) => {\r\n                            //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                            //         oldSelectedTest.splice(index, 1)\r\n                            //     }\r\n\r\n                            // })\r\n                            oldSelectedTest = oldSelectedTest.filter(item =>\r\n                                wholeTestList.includes(item.ntransactiontestcode)\r\n                            );\r\n                            // START ALPD-3625 VISHAKH\r\n                            let keepOld = false;\r\n                            let ntransactiontestcode;\r\n                            let npreregno;\r\n                            if (oldSelectedTest.length > 0) {\r\n                                keepOld = true\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedTest: oldSelectedTest,\r\n                                }\r\n                            } else {\r\n                                ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                    inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\"\r\n                                npreregno = inputData.masterData.RegistrationGetSample.length > 0 ?\r\n                                    inputData.masterData.RegistrationGetSample[0].npreregno : \"\"\r\n                            }\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                        inputData.masterData.RegistrationParameter : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ?\r\n                                            inputData.masterData.RegistrationTestAttachment : [] :\r\n                                            getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                                        inputData.masterData.RegistrationTestComment : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = keepOld ? inputData.masterData.RegistrationComment ?\r\n                                        inputData.masterData.RegistrationComment : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment, npreregno, \"npreregno\")\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                        inputData.masterData.RegistrationParameter : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                        }\r\n                        //else if (inputData.checkBoxOperation === 5) {\r\n                        else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                    let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = response.data.RegistrationComment ?\r\n                                        [...response.data.RegistrationComment] : [];\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                        }\r\n                        else {\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    RegistrationTestComment = response.data.RegistrationTestComment ?\r\n                                        [...response.data.RegistrationTestComment] : [];\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        RegistrationTestAttachment = response.data.RegistrationTestAttachment ?\r\n                                            [...response.data.RegistrationTestAttachment] : [];\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    RegistrationParameter = response.data.RegistrationParameter ?\r\n                                        [...response.data.RegistrationParameter] : [];\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_SAMPLECOMMENTS\":\r\n                                    RegistrationComment = response.data.RegistrationComment ?\r\n                                        [...response.data.RegistrationComment] : [];\r\n                                    activeName = \"RegistrationComment\"\r\n                                    dataStateName = \"sampleCommentsDataState\"\r\n                                    break;\r\n                                default:\r\n                                    RegistrationParameter = response.data.RegistrationParameter ?\r\n                                        [...response.data.RegistrationParameter] : [];\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                        }\r\n                        masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                        masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                        masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                        masterData['RegistrationComment'] = RegistrationComment;\r\n                        let { testskip, testtake } = inputData\r\n                        let bool = false;\r\n\r\n                        if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\r\n                            testskip = 0;\r\n                            bool = true\r\n                        }\r\n                        if (bool) {\r\n                            skipInfo = { testskip, testtake }\r\n                        }\r\n\r\n                    }\r\n                    if (inputData.masterData.selectedSample && inputData.sampleGridDataState\r\n                        && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                    if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                        inputData.searchSubSampleRef.current.value = \"\"\r\n                        masterData['searchedSubSample'] = undefined\r\n                    }\r\n                    // let inputParam = { attachmentskip: undefined }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                   // Start of ALPD-4130 on Save Additional Filter - ATE-241\r\n                    let multifilterInfo = {}\r\n                    if (inputData.multiFilterLoad !== undefined) {\r\n                        if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                            inputData.searchSampleRef.current.value = \"\";\r\n                        }\r\n                        if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                            inputData.searchSubSampleRef.current.value = \"\";\r\n                        }\r\n                        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                            inputData.searchTestRef.current.value = \"\";\r\n                        }\r\n                        multifilterInfo = {\r\n                            multiFilterLoad: inputData.multiFilterLoad,\r\n                            openModal: inputData.openModal,\r\n                            searchSampleRef: inputData.searchSampleRef,\r\n                            searchSubSampleRef: inputData.searchSubSampleRef,\r\n                            searchTestRef: inputData.searchTestRef,\r\n                            testskip: inputData.testskip,\r\n                            subsampleskip: inputData.subsampleskip,\r\n                            skip: inputData.skip,\r\n                            // filterColumnActive:true\r\n                        }\r\n                    }\r\n                    //  End of ALPD-4130 ATE-241\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeSampleTab: inputData.activeSampleTab,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            skip: undefined,\r\n                            take: undefined,\r\n                            ...skipInfo,\r\n                            activeTabIndex: inputData.activeTabIndex,\r\n                            // ALPD-4130 Additional Filter Info ATE-241\r\n                            ...multifilterInfo,\r\n                            // inputParam:inputData\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n\r\n            let bool = false;\r\n            let skipInfo = {};\r\n            let { testskip, testtake, subsampletake, subsampleskip } = inputData;\r\n            let oldSelectedTest = inputData.masterData.selectedTest\r\n            let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n            // let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            let isGrandChildGetRequired = false;\r\n            let TestSelected = [];\r\n            let subSampleSelected = [];\r\n\r\n\r\n            if (inputData[\"statusNone\"]) {\r\n                TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n            else {\r\n                TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let selectedSample = inputData.selectedSample;\r\n                let filterTestSameOldSelectedTest = getSameRecordFromTwoArrays(oldSelectedTest, inputData.masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                let selectedTest = filterTestSameOldSelectedTest.length > 0 ? filterTestSameOldSelectedTest :\r\n                    inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [];\r\n                let ntransactiontestcode = selectedTest.length > 0 ? selectedTest.map(x => x.ntransactiontestcode).join(\",\") : \"-1\";\r\n                let selectedSubSample = inputData.masterData.RegistrationGetSubSample\r\n\r\n                if (subSample) {\r\n                    let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                    selectedSubSample = filterSelectedSubSample.length > 0 ? filterSelectedSubSample : [inputData.masterData.RegistrationGetSubSample[0]];\r\n                    if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampletake, subsampleskip }\r\n                    }\r\n\r\n                }\r\n                // START ALPD-3671 VISHAKH\r\n                let masterData = { ...inputData.masterData, selectedSample, selectedSubSample, selectedTest }\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // END ALPD-3671 VISHAKH\r\n                if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = { ...skipInfo, testskip, testtake }\r\n                }\r\n                // inputData = {\r\n                //     ...inputData, childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\r\n                //     selectedSubSample, checkBoxOperation: 3, skipInfo, masterData\r\n                // }\r\n                inputData = {\r\n                    ...inputData, childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\", \"RegistrationTestAttachment\"], ntransactiontestcode, masterData, selectedTest,\r\n                    selectedSubSample, checkBoxOperation: checkBoxOperation.SINGLESELECT, skipInfo, masterData\r\n                }\r\n                if (subSample) {\r\n                    if (selectedTest.length === 0) {\r\n                        inputData[\"npreregno\"] = selectedSubSample.map(x => x.npreregno).join(\",\")\r\n                        inputData[\"ntransactionsamplecode\"] = selectedSubSample.map(x => x.ntransactionsamplecode).join(\",\")\r\n                        // inputData[\"checkBoxOperation\"] = 3\r\n                        inputData[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT\r\n                        inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"]\r\n                        dispatch(getRegistrationTestDetail(inputData, true));\r\n                    } else {\r\n                        dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n                    }\r\n                } else {\r\n                    dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n                }\r\n            }\r\n            else {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    selectedSample: inputData.selectedSample,\r\n                    selectedPreregno: inputData.npreregno,\r\n                    selectedTest: TestSelected ? TestSelected : inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                    // RegistrationTestComment,\r\n                    selectedSubSample: subSampleSelected ? subSampleSelected : inputData.masterData.RegistrationGetSubSample\r\n                }\r\n                // START ALPD-3671 VISHAKH\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // END ALPD-3671 VISHAKH\r\n                let subsamplecheck = true;\r\n                if (subSample) {\r\n                    let SubSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                    if (SubSampleSelected.length > 0) {\r\n                        let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                        if (filterSelectedSubSample.length === 0) {\r\n                            let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                            // START ALPD-3625 VISHAKH\r\n                            // oldSelectedSubSample.forEach((test, index) => {\r\n                            //     if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                            //         oldSelectedSubSample.splice(index, 1)\r\n                            //     }\r\n                            //     return null;\r\n                            // })\r\n                            oldSelectedSubSample = oldSelectedSubSample.filter(item =>\r\n                                wholeSubSample.includes(item.ntransactionsamplecode)\r\n                            );\r\n                            // END ALPD-3625 VISHAKH\r\n                            if (oldSelectedSubSample.length === 0 && wholeSubSample.length > 0\r\n                                && masterData.selectedTest.length === 0) {\r\n                                const selectedSubSample1 = [inputData.masterData.RegistrationGetSubSample[0]];\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedSubSample: selectedSubSample1,\r\n                                    selectedTest: []\r\n                                }\r\n                                inputData = { ...inputData, ...masterData }\r\n                                inputData[\"npreregno\"] = selectedSubSample1.map(x => x.npreregno).join(\",\")\r\n                                inputData[\"ntransactionsamplecode\"] = selectedSubSample1.map(x => x.ntransactionsamplecode).join(\",\")\r\n                                // inputData[\"checkBoxOperation\"] = 3\r\n                                inputData[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT\r\n                                inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"]\r\n                                subsamplecheck = false;\r\n                                dispatch(getRegistrationTestDetail(inputData, true));\r\n\r\n                            }\r\n                        } else {\r\n                            oldSelectedSubSample = filterSelectedSubSample\r\n                        }\r\n\r\n                    } else {\r\n                        let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                        // START ALPD-3625 VISHAKH\r\n                        // oldSelectedSubSample.forEach((test, index) => {\r\n                        //     if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                        //         oldSelectedSubSample.splice(index, 1)\r\n                        //     }\r\n                        //     return null;\r\n                        // })\r\n                        oldSelectedSubSample = oldSelectedSubSample.filter(item =>\r\n                            wholeSubSample.includes(item.ntransactionsamplecode)\r\n                        );\r\n                        // END ALPD-3625 VISHAKH\r\n                    }\r\n\r\n                    if (subsamplecheck) {\r\n                        masterData = {\r\n                            ...masterData,\r\n                            selectedSubSample: oldSelectedSubSample\r\n                        }\r\n                    }\r\n                    if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampleskip, subsampletake }\r\n                    }\r\n                }\r\n                let wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                // START ALPD-3625 VISHAKH\r\n                // oldSelectedTest.forEach((test, index) => {\r\n                //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                //         oldSelectedTest.splice(index, 1)\r\n                //     }\r\n                //     return null;\r\n                // })\r\n                oldSelectedTest = oldSelectedTest.filter(item =>\r\n                    wholeTestList.includes(item.ntransactiontestcode)\r\n                );\r\n                // END ALPD-3625 VISHAKH\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedTest: oldSelectedTest\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\"\r\n                }\r\n                masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                let skipInfo = {};\r\n                if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = { ...skipInfo, testskip, testtake }\r\n                }\r\n\r\n                let dataStateArray = [\r\n                    { activeName: 'selectedSample', dataStateName: 'sampleGridDataState' },\r\n                    { activeName: 'RegistrationSourceCountry', dataStateName: 'sourceDataState' },\r\n                    { activeName: 'RegistrationTestComment', dataStateName: 'testCommentDataState' },\r\n                    { activeName: 'RegistrationParameter', dataStateName: 'resultDataState' },\r\n                ]\r\n                dataStateArray.map(arr => {\r\n                    if (inputData[arr.dataStateName] && masterData[arr.activeName] &&\r\n                        masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    return null;\r\n                });\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestTab: inputData.activeTestTab,\r\n                        ...skipInfo,\r\n                        // activeTabIndex: inputData.activeTabIndex\r\n                    }\r\n                })\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function getRegistrationTestDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n            ntransactionstatus: inputData.ntransactionstatus,\r\n            napprovalconfigcode: inputData.napprovalconfigcode,\r\n            activeTestTab: inputData.activeTestTab,\r\n            activeSampleTab: inputData.activeSampleTab,\r\n            activeSubSampleTab: inputData.activeSubSampleTab,\r\n            userinfo: inputData.userinfo,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            checkBoxOperation: inputData.checkBoxOperation,\r\n            nneedsubsample: inputData.nneedsubsample,\r\n            selectedTransactionsamplecode: inputData.selectedSubSample && inputData.selectedSubSample.length > 0 && inputData.selectedSubSample.map(item => item.ntransactionsamplecode).join(\",\"),\r\n            noutsourcerequired: inputData.masterData && inputData.masterData.RealSampleTypeValue ? inputData.masterData.RealSampleTypeValue.noutsourcerequired : transactionStatus.NA\r\n\r\n        }\r\n        const subSample = inputData.nneedsubsample;\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(\"registration/getRegistrationTest\", inputParamData)\r\n                .then(response => {\r\n                    //sortData(response.data);\r\n                    //ALPD-1609\r\n                    sortData(response.data, 'descending', 'npreregno')\r\n                    let oldSelectedTest = inputData.masterData.selectedTest || []\r\n                    let oldSelectedSubSample = inputData.masterData.selectedSubSample || []\r\n                    let outsourceDetailsList = response.data && response.data.OutsourceDetailsList;\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                        inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\",\r\n                        inputData.removeElementFromArray);\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        selectedSubSample: inputData.selectedSubSample,\r\n                        selectedTransactionsamplecode: inputData.ntransactionsamplecode,\r\n                        selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                            [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                        // RegistrationTestComment,\r\n                    }\r\n\r\n                    //let wholeRegistrationTestComments = [];\r\n                    let RegistrationTestComment = [];\r\n                    let RegistrationTestAttachment = [];\r\n                    let RegistrationParameter = [];\r\n                    let RegistrationSampleComment = [];\r\n                    let RegistrationSampleAttachment = [];\r\n                    //if (inputData.checkBoxOperation === 1) {\r\n                    if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {\r\n                        const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                        // START ALPD-3625 VISHAKH\r\n                        // oldSelectedTest.forEach((test, index) => {\r\n                        //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        //         oldSelectedTest.splice(index, 1)\r\n                        //     }\r\n\r\n                        // })\r\n                        oldSelectedTest = oldSelectedTest.filter(item =>\r\n                            wholeTestList.includes(item.ntransactiontestcode)\r\n                        );\r\n                        // END ALPD-3625 VISHAKH\r\n                        let keepOld = false;\r\n                        let ntransactiontestcode;\r\n                        if (oldSelectedTest.length > 0) {\r\n                            keepOld = true\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest: oldSelectedTest,\r\n                            }\r\n                        } else {\r\n                            ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\"\r\n                        }\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                    inputData.masterData.RegistrationParameter : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                                    inputData.masterData.RegistrationTestComment : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ?\r\n                                    inputData.masterData.RegistrationTestAttachment : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                    inputData.masterData.RegistrationParameter : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n\r\n\r\n\r\n                    }\r\n                    // else if (inputData.checkBoxOperation === 5) {\r\n                    else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment1 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                }\r\n                                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                {\r\n                                    let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                    let RegistrationTestAttachment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                        RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestAttachment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                }\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment2 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                }\r\n                                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                        // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                    }\r\n                    // else if (inputData.checkBoxOperation === 7) {\r\n                    else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {\r\n                        let testList = reArrangeArrays(inputData.masterData.RegistrationGetSubSample, response.data.RegistrationGetTest, \"ntransactionsamplecode\");\r\n                        masterData = {\r\n                            ...masterData,\r\n                            selectedTest: testList ? testList.length > 0 ? [testList[0]] : [] : [],\r\n                            RegistrationGetTest: testList ? testList.length > 0 ? testList : [] : [],\r\n                            //ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\r\n                        }\r\n\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment1 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                }\r\n                                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                {\r\n                                    let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                    let RegistrationTestAttachment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                        RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestAttachment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                }\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                // let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                let RegistrationParameter1 = [...resultResponseData];\r\n                                let ntransactiontestcode1 = testList ? testList.length > 0 ? testList[0].ntransactiontestcode : inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1 : -1\r\n\r\n                                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment2 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                }\r\n                                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                        // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                    }\r\n                    else {\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = response.data.RegistrationTestComment ?\r\n                                    [...response.data.RegistrationTestComment] : [];\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = response.data.RegistrationTestAttachment ?\r\n                                    [...response.data.RegistrationTestAttachment] : [];\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                RegistrationParameter = response.data.RegistrationParameter ?\r\n                                    [...response.data.RegistrationParameter] : [];\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationParameter = response.data.RegistrationParameter ?\r\n                                    [...response.data.RegistrationParameter] : [];\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    if (subSample) {\r\n                        let wholeSubsampleList = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                        // START ALPD-3625 VISHAKH\r\n                        // oldSelectedSubSample.map((test, index) => {\r\n                        //     if (!wholeSubsampleList.includes(test.ntransactionsamplecode)) {\r\n                        //         oldSelectedSubSample.splice(index, 1)\r\n                        //     }\r\n                        //     return null;\r\n                        // })\r\n                        oldSelectedSubSample = oldSelectedSubSample.filter(item =>\r\n                            wholeSubsampleList.includes(item.ntransactionsamplecode)\r\n                        );\r\n                        // END ALPD-3625 VISHAKH\r\n                        let keepOld = false;\r\n                        let ntransactionsamplecode;\r\n                        if (oldSelectedSubSample.length > 0) {\r\n                            keepOld = true\r\n                        } else {\r\n                            ntransactionsamplecode = masterData.selectedSubSample[0].ntransactionsamplecode\r\n                        }\r\n\r\n                        switch (inputData.activeSubSampleTab) {\r\n                            case \"IDS_SUBSAMPLECOMMENTS\":\r\n                                RegistrationSampleComment = keepOld ? inputData.masterData.RegistrationSampleComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleComment\"\r\n                                dataStateName = \"subSampleCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationSampleAttachment = keepOld ? inputData.masterData.RegistrationSampleAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleAttachment\"\r\n                                dataStateName = \"subSampleAttachmentDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                    masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                    masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                    masterData[\"RegistrationSampleComment\"] = RegistrationSampleComment;\r\n                    masterData[\"RegistrationSampleAttachment\"] = RegistrationSampleAttachment;\r\n                    masterData['OutsourceDetailsList'] = outsourceDetailsList;\r\n                    let { testskip, testtake, subsampleskip, subsampletake } = inputData\r\n                    // let bool = false;\r\n                    // Commented bool value because no need to check bool condition to update skipInfo value.\r\n                    let skipInfo = {}\r\n                    // if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\r\n                    testskip = 0;\r\n                    // bool = true\r\n                    // }\r\n                    if (inputData.masterData.RegistrationGetSubSample.length < inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        // bool = true\r\n                    }\r\n                    // if (bool) {\r\n                    skipInfo = { testskip, testtake, subsampleskip, subsampletake }\r\n                    // }\r\n                    if (inputData.masterData.selectedSample && inputData.sampleGridDataState\r\n                        && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                    //  let inputParam = { attachmentskip: undefined }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            // activeTabIndex: inputData.activeTabIndex,\r\n                            activeSampleTab: inputData.activeSampleTab,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            skip: undefined,\r\n                            take: undefined,\r\n                            ...skipInfo,\r\n                            //  inputParam\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            let oldSelectedTest = inputData.masterData.selectedTest\r\n            // START ALPD-3625 VISHAKH\r\n            // let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            let TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\r\n            let isGrandChildGetRequired = false;\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            // END ALPD-3625 VISHAKH\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSubSample, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode.toString() : \"-1\";\r\n                let selectedSubSample = inputData.selectedSubSample;\r\n                // let selectedPreregno = inputData.npreregno;\r\n                let selectedTest = inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [];\r\n                // let selectedSubSample = inputData.masterData.RegistrationGetSubSample\r\n                let masterData = { ...inputData.masterData, selectedSubSample, selectedTest }\r\n                // inputData = {\r\n                //     ...inputData, childTabsKey: [\"RegistrationTestAttachment\", \"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\r\n                //     selectedSubSample, checkBoxOperation: 3, activeTabIndex: inputData.masterData.activeTabIndex\r\n                // }\r\n                // START ALPD-3671 VISHAKH\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // END ALPD-3671 VISHAKH\r\n                inputData = {\r\n                    ...inputData, childTabsKey: [\"RegistrationTestAttachment\", \"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\r\n                    selectedSubSample, checkBoxOperation: checkBoxOperation.SINGLESELECT, activeTabIndex: inputData.masterData.activeTabIndex\r\n                }\r\n                dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n            } else {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    selectedSubSample: inputData.selectedSubSample,\r\n                    selectedTransactioncode: inputData.ntransactionsamplecode,\r\n                    selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                        [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                }\r\n                // START ALPD-3671 VISHAKH\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // END ALPD-3671 VISHAKH\r\n                const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                // START ALPD-3625 VISHAKH\r\n                // oldSelectedTest.forEach((test, index) => {\r\n                //     if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                //         oldSelectedTest.splice(index, 1)\r\n                //     }\r\n                //     return null;\r\n                // })\r\n                oldSelectedTest = oldSelectedTest.filter(item =>\r\n                    wholeTestList.includes(item.ntransactiontestcode)\r\n                );\r\n                // END ALPD-3625 VISHAKH\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedTest: oldSelectedTest,\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                        inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\"\r\n                }\r\n                masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                    inputData.masterData.RegistrationTestComment : [] :\r\n                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                    inputData.masterData.RegistrationParameter : [] :\r\n                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                let skipInfo = {};\r\n                let dataStateArray = [\r\n                    { activeName: 'selectedSample', dataStateName: 'sampleGridDataState' },\r\n                    { activeName: 'RegistrationSourceCountry', dataStateName: 'sourceDataState' },\r\n                    { activeName: 'RegistrationTestComment', dataStateName: 'testCommentDataState' },\r\n                    { activeName: 'RegistrationParameter', dataStateName: 'resultDataState' },\r\n                ]\r\n                dataStateArray.map(arr => {\r\n                    if (inputData[arr.dataStateName] && masterData[arr.activeName] &&\r\n                        masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    return null;\r\n                });\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestTab: inputData.activeTestTab,\r\n                        // activeTabIndex: inputData.activeTabIndex,\r\n                        ...skipInfo\r\n                    }\r\n                })\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function acceptRegistration(inputParam, LoginProps) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/acceptRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data.rtn === undefined || response.data.rtn === \"Success\"\r\n                    || response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"\r\n                    || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\" || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\r\n                    // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                    //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                    // }\r\n\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                    delete response.data[\"RegistrationGetSample\"];\r\n                    delete response.data[\"RegistrationGetSubSample\"];\r\n                    delete response.data[\"RegistrationGetTest\"];\r\n                    let masterData = {\r\n                        ...LoginProps, ...response.data,\r\n                        selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                        selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                        selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        ...inputParam.inputData,\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        openModal: false,\r\n                        showSample: undefined,\r\n                        showConfirmAlert: false,\r\n                        acceptConfirmMessage: undefined,\r\n                        skip: 0,\r\n                        testskip: 0,\r\n                        take: undefined,\r\n                        testtake: undefined,\r\n                        subsampletake: undefined,\r\n                        subsampleskip: 0,\r\n                    }\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                    if (response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"\r\n                        || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\"\r\n                        || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\r\n                        toast.info(intl.formatMessage({ id: response.data.rtn }));\r\n                    }\r\n                } else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            loadEsign: false,\r\n                            openModal: false,\r\n                        }\r\n                    });\r\n                    toast.info(intl.formatMessage({ id: response.data.rtn }));\r\n                }\r\n            })\r\n            .catch(error => {\r\n                // toast.error(error.message);           \r\n\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                } else {\r\n                    //toast.info(intl.formatMessage({ id: error.response.data[\"rtn\"] }));\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                acceptConfirmMessage: error.response.data.rtn,\r\n                                acceptConfirmParam: { inputParam, masterData: LoginProps },\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        //toast.error(error.message);\r\n                        toast.warn(intl.formatMessage({ id: error.response.data[\"rtn\"] }));\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                loading: false,\r\n                                showConfirmAlert: false, acceptConfirmMessage: undefined\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport const addMoreTest = (inputParam, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        let { sampleList } = inputParam;\r\n        let value = false;\r\n        if (inputParam.selectedSample && inputParam.selectedSample.length > 0) {\r\n            if (inputParam.selectedSubSample && inputParam.selectedSubSample.length > 0) {\r\n                value = inputParam.selectedSubSample.some(obj => obj.nspecsampletypecode !== inputParam.selectedSubSample[0].nspecsampletypecode)\r\n                if (value) {\r\n                    return toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\" }));\r\n                }\r\n                //sampleList = sampleList ? [...sampleList.slice(inputParam.skip, inputParam.take)] : [];\r\n                //const selectedsample = getSameRecordFromTwoArrays(sampleList, inputParam.selectedSample, \"npreregno\");\r\n                // const selectsubsample = getSameRecordFromTwoArrays(subsampleList, inputParam.selectedsubsample, \"ntransactionsamplecode\");\r\n                //if (selectedsample && selectedsample.length > 0) {\r\n\r\n                const selectedsample = inputParam.selectedSample;\r\n                const findTransactionStatus = [...new Set(selectedsample.map(item => item.ntransactionstatus))];\r\n\r\n                if (findTransactionStatus.length === 1) {\r\n                    if (findTransactionStatus[0] !== transactionStatus.REJECT && findTransactionStatus[0] !== transactionStatus.CANCELLED) {\r\n                        if (findTransactionStatus[0] !== transactionStatus.RELEASED) {\r\n\r\n                            // if (selectsubsample && selectsubsample.length > 0) {\r\n                            //     const findSubSampleStatus = [...new Set(selectsubsample.map(item => item.ntransactionstatus))];\r\n                            //\r\n                            //     if (findSubSampleStatus[0] !== transactionStatus.REJECT && findSubSampleStatus[0] !== transactionStatus.CANCELLED) \r\n                            //     {                    \r\n\r\n                            const findApprovalVersion = [...new Set(selectedsample.map(item => item.napprovalversioncode))];\r\n                            if (findApprovalVersion.length === 1) {\r\n                                const findSampleSpec = [...new Set(selectedsample.map(item => item.nallottedspeccode))];\r\n                                //const findComponent = [...new Set(selectsubsample.map(item => item.ncomponentcode))];\r\n                                if (findSampleSpec.length === 1)//&& findComponent.length === 1 \r\n                                {\r\n                                    inputParam[\"snspecsampletypecode\"] = inputParam.selectedSubSample &&\r\n                                        [...new Set(inputParam.selectedSubSample.map(x => x.nspecsampletypecode))].join(\",\")\r\n                                    dispatch(initRequest(true));\r\n                                    const urlArray = []\r\n                                    const TestGet = rsapi.post(\"/registration/getMoreTest\", {\r\n                                        ...inputParam\r\n                                    });\r\n                                    urlArray[0] = TestGet;\r\n                                    const TestPackageGet = rsapi.post(\"/registration/getMoreTestPackage\", {\r\n                                        ...inputParam\r\n                                    });\r\n                                    urlArray[1] = TestPackageGet;\r\n\r\n                                    const TestSectionGet = rsapi.post(\"/registration/getMoreTestSection\", {\r\n                                        ...inputParam\r\n                                    });\r\n                                    urlArray[2] = TestSectionGet;\r\n\r\n                                    Axios.all(urlArray)\r\n                                        .then(response => {\r\n                                            let PackageData = []\r\n                                            let TestSectionData = []\r\n                                            const PackageDataMap = constructOptionList(response[1].data || [], \"ntestpackagecode\",\r\n                                                \"stestpackagename\", undefined, undefined, true);\r\n                                            PackageData = PackageDataMap.get(\"OptionList\");\r\n                                            const TestSectionDataMap = constructOptionList(response[2].data || [], \"nsectioncode\",\r\n                                                \"ssectionname\", undefined, undefined, true);\r\n                                            TestSectionData = TestSectionDataMap.get(\"OptionList\");\r\n                                            dispatch({\r\n                                                type: DEFAULT_RETURN,\r\n                                                payload: {\r\n                                                    availableTest: response[0].data,\r\n                                                    TestCombined: response[0].data,\r\n                                                    AllTest: response[0].data,\r\n                                                    TestPackage: PackageData,\r\n                                                    loadChildTest: true,\r\n                                                    loading: false, ncontrolCode,\r\n                                                    screenName: \"IDS_TEST\",\r\n                                                    operation: \"create\",\r\n                                                    openModal: true,\r\n                                                    parentPopUpSize: \"lg\",\r\n                                                    selectedRecord: {},\r\n                                                    showSample: undefined,\r\n                                                    loadPrinter: false, TestSection: TestSectionData, AllSection: TestSectionData\r\n                                                }\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                                            if (error.response.status === 500) {\r\n                                                toast.error(error.message);\r\n                                            } else {\r\n                                                toast.info(this.props.formatMessage({ id: error.response.data }));\r\n                                            }\r\n                                        });\r\n                                } else {\r\n                                    toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\" }));\r\n                                }\r\n                            } else {\r\n                                toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMEAPPROVALCONFIG\" }));\r\n                            }\r\n                            //     }\r\n                            //     else {\r\n                            //         toast.info(intl.formatMessage({ id: \"IDS_SUBSAMPLEISREJECTEDORCANCELLED\" }));\r\n                            //     }\r\n                            // }                               \r\n                        }\r\n                        else {\r\n                            toast.info(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORRELEASEDSAMPLES\" }));\r\n                        }\r\n                    }\r\n                    else {\r\n                        ////     toast.info(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORCANCELLEDREJECTSAMPLES\" }));\r\n                        toast.info(intl.formatMessage({ id: \"IDS_SAMPLEISREJECTEDORCANCELLED\" }));\r\n                    }\r\n                } else {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESTATUS\" }));\r\n                }\r\n                // } else {\r\n                //     toast.info(intl.formatMessage({ id: \"IDS_SELECTSAMPLE\" }));\r\n                // }\r\n            } else {\r\n                toast.info(intl.formatMessage({ id: \"IDS_SELECTSUBSAMPLE\" }));\r\n            }\r\n        } else {\r\n            toast.info(intl.formatMessage({ id: \"IDS_SELECTSAMPLE\" }));\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport const createRegistrationTest = (inputParam, masterData, modalName) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData })\r\n            .then(response => {\r\n                let RegistrationGetTest = updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"], response.data[\"RegistrationGetTest\"]);\r\n\r\n                //let RegistrationGetSubSample = updatedObjectWithNewElement(masterData[\"RegistrationGetSubSample\"], response.data[\"RegistrationGetSubSample\"]);\r\n                masterData = {\r\n                    ...masterData,\r\n                    RegistrationGetTest: sortData(RegistrationGetTest, \"descending\", \"ntransactiontestcode\"),\r\n                    RegistrationGetSubSample: sortData(response.data[\"RegistrationGetSubSample\"], \"descending\", \"ntransactionsamplecode\"),\r\n                    selectedTest: response.data[\"RegistrationGetTest\"],\r\n                    //  selectedSubSample: response.data[\"RegistrationGetSubSample\"],\r\n                    selectedSubSample: response.data[\"selectedSubSample\"],\r\n                    RegistrationParameter: response.data.RegistrationParameter,\r\n                    RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, masterData.RegistrationGetSample, 'npreregno')\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    [modalName]: false,\r\n                    loading: false,\r\n                    loadChildTest: false,\r\n                    showSample: undefined,\r\n                    openModal: false,\r\n                    selectedRecord: {},\r\n                    showConfirmAlert: false,\r\n                    createTestConfirmMessage: undefined\r\n\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no';\r\n                inputParam.postParamList[1]['clearFilter'] = 'no';\r\n                inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n\r\n            })\r\n            .catch(error => {\r\n\r\n                if (error.response.status === 500) {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, createTestConfirmMessage: undefined } })\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                createTestConfirmMessage: error.response.data.rtn,\r\n                                createTestConfirmParam: { inputParam, masterData, modalName },\r\n\r\n                                //[modalName]: false,\r\n                                loading: false,\r\n                                loadChildTest: true,\r\n                                showSample: undefined\r\n\r\n\r\n                                //openModal: false,\r\n                                //selectedRecord: {}\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                [modalName]: false,\r\n                                loading: false,\r\n                                loadChildTest: false,\r\n                                showSample: undefined,\r\n                                openModal: false,\r\n                                selectedRecord: {},\r\n                                createTestConfirmMessage: undefined\r\n\r\n\r\n                            }\r\n                        });\r\n                        toast.info(error.response.data.rtn);\r\n                    }\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getEditRegistrationComboService(inputParam, columnList,\r\n    selectedRecord1, childColumnList, comboComponents,\r\n    withoutCombocomponent, editableComboList) {\r\n    return function (dispatch) {\r\n\r\n        dispatch(initRequest(true));\r\n        const { userInfo, operation } = { ...inputParam };\r\n        let masterData = inputParam[\"masterData\"];\r\n        let parentColumnList = [...columnList, ...editableComboList];\r\n        if (masterData[\"selectedSample\"].length > 1 ||\r\n            masterData[\"selectedSample\"]\r\n                .findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"mastertoedit\"][inputParam.primaryKeyName])\r\n            === -1) {\r\n            inputParam.editRegParam[\"getSampleChildDetail\"] = true;\r\n        }\r\n        masterData[\"selectedSample\"] = [];\r\n        masterData[\"selectedSample\"].push(inputParam[\"mastertoedit\"]);\r\n\r\n        const npreregno = inputParam.mastertoedit[inputParam.primaryKeyName];\r\n        let urlArray = [];\r\n\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        // const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n        //     parentcolumnlist: columnList,\r\n        //     childcolumnlist: childColumnList,\r\n        //     userinfo: userInfo\r\n        // })\r\n        const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationDetails\", {\r\n            ...inputParam.editRegParam, npreregno, parentcolumnlist: parentColumnList,\r\n            childcolumnlist: childColumnList,\r\n            userinfo: userInfo, nallottedspeccode: inputParam.mastertoedit.nallottedspeccode || -1\r\n        })\r\n\r\n        const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n            datecolumnlist: withoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n            userinfo: userInfo\r\n        })\r\n\r\n        urlArray = [timeZoneService, selectedRegistration, dateService]\r\n\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = { ...response[1].data[\"EditData\"] };\r\n                selectedRecord = { ...selectedRecord, ...selectedRecord['jsondata'] }\r\n                // const recordToEdit = { ...response[2].data[\"SelectedRegistration\"][0] };\r\n                //  const currentTime = rearrangeDateFormat(userInfo, response[6].data);\r\n\r\n\r\n\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userInfo.stimezoneid, value: userInfo.ntimezonecode }\r\n\r\n\r\n                //  const newcomboData = parentChildComboLoad(columnList, response[1].data,\r\n                // selectedRecord, childColumnList, withoutCombocomponent)\r\n\r\n                if (selectedRecord.ntransactionstatus === transactionStatus.CANCELLED\r\n                    || selectedRecord.ntransactionstatus === transactionStatus.REJECT) {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_CANNOTEDITCANCELLEDSAMPLE\" }));\r\n                    // ALPD-3393\r\n                    if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\r\n                        masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\r\n                    }\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, masterData } });\r\n                }\r\n                else {\r\n                    const languagetypeCode = undefined\r\n                    const comboData = response[1].data;\r\n                    delete comboData['EditData']\r\n                    let comboValues = {}\r\n                    if (columnList.length > 0) {\r\n                        columnList.map(x => {\r\n                            if (x.inputtype === 'combo') {\r\n                                if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \r\n                                {\r\n                                    if (comboData[x.label].length > 0) {\r\n                                        if (comboData[x.label][0].label === undefined) {\r\n                                            const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                            comboData[x.label] = optionList.get(\"OptionList\");\r\n                                        } else {\r\n                                            comboData[x.label] = comboData[x.label]\r\n                                            const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                        }\r\n                                    } else {\r\n                                        comboData[x.label] = []\r\n                                    }\r\n                                    //comboValues = childComboLoad(x, comboData, selectedRecord, \r\n                                    //   childColumnList, withoutCombocomponent)\\\r\n                                    comboValues = childComboLoadForEdit(x, comboData, selectedRecord,\r\n                                        childColumnList, withoutCombocomponent)\r\n                                } else {\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                comboValues = {\r\n                                    comboData: comboData,\r\n                                    ...comboValues\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        comboValues = {\r\n                            \"comboData\": comboData,\r\n                        }\r\n                    }\r\n                    if (editableComboList.length > 0) {\r\n                        editableComboList.map(x => {\r\n                            if (x.inputtype === 'combo') {\r\n                                if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \r\n                                {\r\n                                    if (comboData[x.label].length > 0) {\r\n                                        if (comboData[x.label][0].label === undefined) {\r\n                                            const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                            comboData[x.label] = optionList.get(\"OptionList\");\r\n                                        } else {\r\n                                            comboData[x.label] = comboData[x.label]\r\n                                            const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                        }\r\n                                    } else {\r\n                                        comboData[x.label] = []\r\n                                    }\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n\r\n                                } else {\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                comboValues = {\r\n                                    comboData: comboData,\r\n                                    ...comboValues\r\n                                }\r\n                            }\r\n                        })\r\n\r\n                    }\r\n\r\n                    withoutCombocomponent.map(date => {\r\n                        if (date.inputtype === 'date') {\r\n                            selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\r\n                                rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\"\r\n\r\n                            if (date.nperiodcode) {\r\n                                selectedRecord[date.label + \"value\"] = response[2].data[date.label] ?\r\n                                    new Date(response[2].data[date.label][\"datevalue\"]) : null;\r\n                            } else {\r\n                                selectedRecord[date.label + \"value\"] = new Date();\r\n                            }\r\n\r\n                            if (date.hidebeforedate) {\r\n                                selectedRecord[date.label + \"min\"] = selectedRecord[date.label + \"value\"]\r\n                            }\r\n                            if (date.hideafterdate) {\r\n                                selectedRecord[date.label + \"max\"] = selectedRecord[date.label + \"value\"]\r\n                            }\r\n                        }\r\n                    })\r\n\r\n                    let { Specification, AgaramTree, ActiveKey, FocusKey, OpenNodes, specValue } = [];\r\n                    specValue = [{ nallottedspeccode: selectedRecord.nallottedspeccode, sspecname: selectedRecord.sspecname, sversion: selectedRecord.sversion }];\r\n                    const selectedSpec = {}\r\n                    Specification = constructOptionList(specValue || [], \"nallottedspeccode\",\r\n                        \"sspecname\", undefined, undefined, true).get(\"OptionList\");\r\n                    //AgaramTree = response[1].data[\"AgaramTree\"];\r\n                    // ActiveKey = response[1].data[\"FocusKey\"];\r\n                    //FocusKey = response[1].data[\"ActiveKey\"];\r\n                    //OpenNodes = response[1].data[\"OpenNodes\"];\r\n                    //Manufacturer = response.data[\"Manufacturer\"];\r\n                    selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\r\n                        \"value\": Specification[0].value,\r\n                        \"label\": Specification[0].label,\r\n                        \"item\": Specification[0].item\r\n                    } : \"\";\r\n\r\n                    selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\"\r\n                    selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ?\r\n                        Specification[0].item.ntemplatemanipulationcode : -1\r\n                    selectedRecord = { ...selectedRecord, ...selectedSpec }\r\n\r\n                    if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\r\n                        masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            // AgaramTree,\r\n                            //FocusKey,\r\n                            // ActiveKey,\r\n                            //OpenNodes,\r\n                            selectedSpec,\r\n                            Specification,\r\n                            // statustoEditDetail: response[2].data[\"ApprovalConfigRole\"] || {},\r\n                            // currentTime,\r\n                            operation: \"update\",\r\n                            screenName: inputParam.masterData.RealRegSubTypeValue.sregsubtypename,\r\n                            // PopUpLabel: popUpLabel,\r\n                            timeZoneList,\r\n                            defaultTimeZone,\r\n                            selectedRecord,\r\n                            openPortal: true,\r\n                            ncontrolCode: inputParam.editRegParam.ncontrolCode,\r\n                            loadPreregister: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            loading: false,\r\n                            showSample: undefined,\r\n                            comboData: comboValues.comboData,\r\n                            childColumnList, comboComponents,\r\n                            withoutCombocomponent,\r\n                            columnList,\r\n                            masterData\r\n                            //  regRecordToEdit:recordToEdit\r\n\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.info(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n\r\n    }\r\n}\r\n\r\nexport function updateRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload) {\r\n            requestUrl = rsapi.post(\"/registration/updateRegistrationWithFile\", inputParam.formData)\r\n        } else {\r\n            requestUrl = rsapi.post(\"/registration/updateRegistration\", inputParam.inputData)\r\n        }\r\n        return requestUrl\r\n            //   rsapi.post(\"/registration/updateRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data.rtn === \"Success\") {\r\n                    // sortData(response.data);\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSample\"], masterData.RegistrationGetSample, \"npreregno\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                    //  let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    //let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedSample: response.data[\"selectedSample\"],\r\n                        // selectedSubSample: masterData[\"selectedSubSample\"],\r\n                        //selectedTest:masterData[\"selectedTest\"],\r\n                        // RegistrationGetTest,\r\n                        // RegistrationGetSubSample,\r\n                        RegistrationParameter: masterData[\"RegistrationParameter\"]\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData, openPortal: false, loading: false, showConfirmAlert: false,\r\n                            regDateEditConfirmMessage: undefined, loadEsign: false, openModal: false,\r\n                            loadPreregister: false, selectedRecord: {}, showSample: undefined\r\n                        }\r\n                    });\r\n                    // let inputData = {\r\n                    //     masterData,\r\n                    //     selectedTest: masterData.selectedTest,\r\n                    //     ntransactiontestcode: masterData.selectedTest ?\r\n                    //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\r\n                    //     npreregno: masterData.selectedSample ?\r\n                    //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\r\n                    //     userinfo: inputParam.inputData.userinfo,\r\n                    //     activeTestTab : masterData.activeTestTab,\r\n                    //     screenName: masterData.activeTestTab,\r\n                    //     resultDataState: inputParam.resultDataState,\r\n                    //     testCommentDataState: inputParam.testCommentDataState,\r\n                    // }\r\n                    // dispatch(getTestChildTabDetail(inputData, true))\r\n                } else {\r\n                    toast.info(response.data.rtn);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                }\r\n                else if (error.response.status === 302) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false, loadEsign: false,\r\n                            regEditParam: inputParam,\r\n                            showConfirmAlert: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            regDateEditConfirmMessage: error.response.data, showSample: undefined\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showSample: undefined } })\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function cancelTestAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelTest\", inputParam.inputData)\r\n            .then(response => {\r\n\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedTest: response.data[\"selectedTest\"],\r\n                    // RegistrationGetTest:response.data[\"RegistrationGetTest\"],\r\n                    RegistrationGetTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\"),\r\n                    //  RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, LoginProps.RegistrationGetSample, 'npreregno')\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    showConfirmAlert: false,\r\n                    selectedRecord: {},\r\n                    loading: false,\r\n                    loadPreregister: false,\r\n                    showSample: undefined\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no'\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function cancelSampleAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelSample\", inputParam.inputData)\r\n            .then(response => {\r\n                // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                // }\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function addsubSampleRegistration(masterData, userinfo, regcolumnList,\r\n    selectRecord, regchildColumnList,\r\n    regSubSamplecomboComponents,\r\n    regSubSamplewithoutCombocomponent, Map, ncontrolcode, specBasedComponent, specBasedTestPackage) {\r\n    return function (dispatch) {\r\n        const urlArray = []\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        urlArray[0] = timeZoneService;\r\n        const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n            parentcolumnlist: regcolumnList.filter(x => (x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter') && (x.readonly !== true)),\r\n            childcolumnlist: regchildColumnList,\r\n            userinfo\r\n        })\r\n        urlArray[1] = actualService;\r\n\r\n        if (specBasedComponent) {\r\n            const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                ...Map,\r\n                specBasedComponent: specBasedComponent,\r\n                userinfo\r\n            })\r\n            urlArray[2] = ComponentTestBySpec;\r\n        } else {\r\n\r\n            const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n                nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                slno: 1,\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage: specBasedTestPackage,\r\n                conditionalTestPackage: true,\r\n                nneedsubsample: Map[\"nneedsubsample\"]\r\n\r\n            })\r\n            urlArray[2] = TestGet;\r\n            const TestPackageGet = rsapi.post(\"/registration/getTestfromTestPackage\", {\r\n                nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage: specBasedTestPackage,\r\n            });\r\n            urlArray[5] = TestPackageGet;\r\n            const TestSectionGet = rsapi.post(\"/registration/getTestfromSection\", {\r\n                nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                specBasedComponent: specBasedComponent,\r\n                specBasedTestPackage: specBasedTestPackage,\r\n            });\r\n            urlArray[6] = TestSectionGet;\r\n\r\n        }\r\n        const currentDate = rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n            userinfo\r\n        })\r\n\r\n        urlArray[3] = currentDate\r\n\r\n        const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n            datecolumnlist: regSubSamplewithoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n            userinfo\r\n        })\r\n        urlArray[4] = dateService\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userinfo.stimezoneid, value: userinfo.ntimezonecode }\r\n                const newcomboData = parentChildComboLoad(regcolumnList.filter(x => (x.inputtype !== 'backendsearchfilter' && x.inputtype !== 'frontendsearchfilter') && (x.readonly !== true)), response[1].data,\r\n                    selectRecord, regchildColumnList, regSubSamplewithoutCombocomponent, undefined, userinfo.slanguagetypecode, userinfo)\r\n                let TestCombined = [];\r\n                let lstComponent = [];\r\n                let PackageData = [];\r\n                let TestSectionData = [];\r\n                const selectedRecord1 = newcomboData.selectedRecord\r\n                if (specBasedComponent) {\r\n\r\n                    const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, true);\r\n\r\n                    lstComponent = lstComponentMap.get(\"OptionList\");\r\n                    //Commented by Dhanushya for jira ETICA-22\r\n                    // if (lstComponent.length > 0) {\r\n                    //     selectedRecord1['ncomponentcode'] = { ...lstComponent[0] }\r\n                    //     selectedRecord1[\"Sample Name\"] = selectedRecord1['ncomponentcode'].label;\r\n                    //     selectedRecord1[\"nspecsampletypecode\"] = selectedRecord1['ncomponentcode'].item.nspecsampletypecode;\r\n                    //     selectedRecord1[\"nneedsubsample\"] = Map.nneedsubsample\r\n\r\n                    // }\r\n\r\n                } else {\r\n                    //if (specBasedTestPackage) {\r\n                    const PackageDataMap = constructOptionList(response[5].data.TestPackage || [], \"ntestpackagecode\",\r\n                        \"stestpackagename\", undefined, undefined, true);\r\n                    PackageData = PackageDataMap.get(\"OptionList\");\r\n\r\n                    const TestSectionDataMap = constructOptionList(response[6].data.TestSection || [], \"nsectioncode\",\r\n                        \"ssectionname\", undefined, undefined, true);\r\n                    TestSectionData = TestSectionDataMap.get(\"OptionList\");\r\n\r\n                    // if (PackageData.length === 0) {\r\n                    //     dispatch(getAllTest(selectComponent, LoginProps, undefined, specBasedComponent, undefined, false, undefined)); \r\n                    // } \r\n                    // }\r\n                    // else {\r\n                    TestCombined = response[2].data;\r\n                    // }\r\n                }\r\n                const comboData1 = newcomboData.comboData\r\n\r\n                regSubSamplewithoutCombocomponent.map(componentrow => {\r\n                    if (componentrow.inputtype === \"date\") {\r\n                        if (componentrow.loadcurrentdate) {\r\n                            selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? rearrangeDateFormat(userinfo, response[3].data) : \"\";\r\n                            selectedRecord1[componentrow.label + \"value\"] = selectedRecord1[componentrow.label];\r\n                        } else if (componentrow.nperiodcode) {\r\n                            selectedRecord1[componentrow.label + \"value\"] = response[4].data[componentrow.label] ?\r\n                                new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                            if (componentrow.loadselecteddate) {\r\n                                selectedRecord1[componentrow.label] = response[4].data[componentrow.label] ?\r\n                                    new Date(response[4].data[componentrow.label][\"datevalue\"]) : null;\r\n                            }\r\n                            //    selectedRecord1[componentrow.label]=response[2].data[componentrow.label]?\r\n                            //    new Date(response[2].data[componentrow.label]):null;\r\n                        } else {\r\n                            selectedRecord1[componentrow.label + \"value\"] = new Date();\r\n                        }\r\n\r\n                        if (componentrow.hidebeforedate) {\r\n                            selectedRecord1[componentrow.label + \"min\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                        }\r\n                        if (componentrow.hideafterdate) {\r\n                            selectedRecord1[componentrow.label + \"max\"] = selectedRecord1[componentrow.label + \"value\"]\r\n                        }\r\n\r\n                    }\r\n                    else if (componentrow.inputtype === \"radio\"\r\n                        || componentrow.inputtype === \"checkbox\"\r\n                        || componentrow.inputtype === \"predefineddropdown\") {\r\n\r\n                        if (componentrow['radiodefaultvalue']) {\r\n                            if (componentrow.inputtype === \"checkbox\") {\r\n\r\n                                let val = ''\r\n                                componentrow.radiodefaultvalue &&\r\n                                    componentrow.radiodefaultvalue.length > 0 && componentrow.radiodefaultvalue.map((x, i) => {\r\n                                        val = val + (i === componentrow.radiodefaultvalue.length - 1 ? x.label : x.label + ',')\r\n                                    })\r\n\r\n                                selectedRecord1[componentrow.label] = val\r\n\r\n                            } else if (componentrow.inputtype === \"predefineddropdown\") {\r\n                                selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                    componentrow.radiodefaultvalue : \"\";\r\n                            } else {\r\n                                selectedRecord1[componentrow.label] = componentrow.radiodefaultvalue ?\r\n                                    componentrow.radiodefaultvalue.label : \"\";\r\n                            }\r\n\r\n                        } else {\r\n                            if (componentrow.inputtype === \"radio\") {\r\n                                selectedRecord1[componentrow.label] = componentrow.radioOptions ?\r\n                                    componentrow.radioOptions.tags[0].text : \"\";\r\n                            }\r\n                        }\r\n\r\n                    }\r\n\r\n                })\r\n\r\n                const inputParam = {\r\n                    screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                    showSaveContinue: false,\r\n                    parentPopUpSize: \"lg\",\r\n                    loading: false,\r\n                    lstComponent,\r\n                    openModal: true,\r\n                    loadPrinter: false,\r\n                    operation: \"create\",\r\n                    loadRegSubSample: true,\r\n                    selectedRecord: selectedRecord1,\r\n                    regSubSamplecomboData: comboData1,\r\n                    regSubSamplecomboComponents,\r\n                    regSubSamplewithoutCombocomponent,\r\n                    TestCombined,\r\n                    regparentSubSampleColumnList: regcolumnList,\r\n                    regchildSubSampleColumnList: regchildColumnList,\r\n                    ncontrolCode: ncontrolcode,\r\n                    timeZoneList,\r\n                    defaultTimeZone,\r\n                    masterData,\r\n                    specBasedComponent,\r\n                    specBasedTestPackage,\r\n                    TestPackage: PackageData,\r\n                    //ALPD-624\r\n                    testskip: 0,\r\n                    subsampleskip: 0,\r\n                    TestSection: TestSectionData, AllTest: TestCombined, AllSection: TestSectionData\r\n                }\r\n                // if (specBasedComponent) {\r\n                //Added by Dhanushya for jira ETICA-22\r\n                if (specBasedComponent && selectedRecord1['ncomponentcode']!==undefined) {\r\n\r\n                    dispatch(componentTest(selectedRecord1, true, specBasedComponent, [], specBasedTestPackage, true, inputParam))\r\n                } else {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { ...inputParam } })\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function saveSubSample(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload) {\r\n            requestUrl = rsapi.post(\"/registration/createSubSampleWithFile\", inputParam.formData)\r\n        } else {\r\n            requestUrl = rsapi.post(\"/registration/createSubSample\", inputParam.inputData);\r\n        }\r\n        return requestUrl\r\n            //  rsapi.post(\"/registration/createSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                // let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], inputParam.inputData.masterData.RegistrationGetSample);\r\n                // let selectedSample = response.data[\"selectedSample\"];\r\n                let RegistrationGetSubSample = updatedObjectWithNewElement(inputParam.inputData.masterData.RegistrationGetSubSample, response.data[\"selectedSubSample\"]);\r\n                let RegistrationGetTest = response.data[\"selectedTest\"];\r\n                let selectedSubSample = response.data[\"selectedSubSample\"];// RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                let RegistrationParameter = response.data[\"RegistrationParameter\"];\r\n                RegistrationParameter = RegistrationParameter ? getSameRecordFromTwoArrays(RegistrationParameter, selectedTest, 'ntransactiontestcode') : RegistrationParameter;\r\n                let RegistrationGetSample = replaceUpdatedObject(response.data[\"selectedSample\"], inputParam.inputData.masterData.RegistrationGetSample, 'npreregno');\r\n                let selectedSample = response.data[\"selectedSample\"];\r\n\r\n\r\n\r\n                let masterData = { ...inputParam.inputData.masterData }\r\n                masterData = {\r\n                    ...masterData, ...response.data,\r\n                    selectedSubSample, selectedTest,\r\n                    RegistrationGetSubSample, RegistrationGetTest, RegistrationParameter, selectedSample, RegistrationGetSample\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    loading: false,\r\n                    showSample: undefined,\r\n                    selectedRecord: {},\r\n                    loadRegSubSample: false,\r\n                    showConfirmAlert: false,\r\n                    subSampleConfirmMessage: undefined\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no';\r\n                inputParam.postParamList[1]['clearFilter'] = 'yes';\r\n                inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                //    dispatch({\r\n                //     type: DEFAULT_RETURN,\r\n                //     payload: {\r\n                //         masterData,\r\n                //         openModal: false,\r\n                //         loadEsign: false,\r\n                //         loading: false,\r\n                //         showSample: undefined,\r\n                //         selectedRecord: {},\r\n                //         loadRegSubSample:false\r\n                //     }\r\n                // });\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                // toast.error(error.message);\r\n                // dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n                if (error.response.status === 500) {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false, subSampleConfirmMessage: undefined } })\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                subSampleConfirmMessage: error.response.data.rtn,\r\n                                subSampleConfirmParam: { inputParam },\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    } else if (error.response.data.rtn) {\r\n                        toast.warn(intl.formatMessage({\r\n                            id: error.response.data.rtn\r\n                        }));\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                loading: false,\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        toast.error(error.message);\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                loading: false,\r\n                                showConfirmAlert: false, subSampleConfirmMessage: undefined\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                }\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function getEditSubSampleComboService(inputParam, columnList, selectedRecord1,\r\n    childColumnList, comboComponents,\r\n    withoutCombocomponent, specBasedComponent) {\r\n    return function (dispatch) {\r\n\r\n        let { userInfo, operation, masterData } = { ...inputParam };\r\n\r\n        if (masterData[\"selectedSubSample\"].length > 1 ||\r\n            masterData[\"selectedSubSample\"]\r\n                .findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"mastertoedit\"][inputParam.primaryKeyName])\r\n            === -1) {\r\n            inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"] = true;\r\n        }\r\n\r\n        masterData[\"selectedSubSample\"] = [];\r\n        masterData[\"selectedSubSample\"].push(inputParam[\"mastertoedit\"]);\r\n\r\n        inputParam.editSubSampleRegParam[\"npreregno\"] = inputParam[\"mastertoedit\"][\"npreregno\"];\r\n        //inputParam.editSubSampleRegParam[\"checkBoxOperation\"] = 3;\r\n        inputParam.editSubSampleRegParam[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT;\r\n        inputParam.editSubSampleRegParam[\"nfilterstatus\"] = inputParam[\"mastertoedit\"][\"ntransactionstatus\"];\r\n        inputParam.editSubSampleRegParam[\"napprovalconfigcode\"] = inputParam[\"mastertoedit\"][\"napprovalconfigcode\"];\r\n        //inputParam.editSubSampleRegParam[\"withoutgetparameter\"] = 3;\r\n\r\n        const ntransactionsamplecode = inputParam.mastertoedit[inputParam.primaryKeyName];\r\n        if (ntransactionsamplecode === undefined) {\r\n            toast.info(intl.formattedMessage({ id: \"IDS_SELECTVALIDSUBSAMPLE\" }));\r\n        }\r\n        else {\r\n            let urlArray = [];\r\n\r\n            const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n            // const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n            //     parentcolumnlist: columnList,\r\n            //     childcolumnlist: childColumnList,\r\n            //     userinfo: userInfo\r\n            // })\r\n            const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationSubSampleDetails\", {\r\n                ...inputParam.editSubSampleRegParam, ntransactionsamplecode, parentcolumnlist: columnList,\r\n                childcolumnlist: childColumnList,\r\n                userinfo: userInfo\r\n            })\r\n\r\n            const dateService = rsapi.post(\"dynamicpreregdesign/dateValidation\", {\r\n                datecolumnlist: withoutCombocomponent.filter(x => x.inputtype === \"date\"),\r\n                userinfo: userInfo\r\n            })\r\n\r\n\r\n            urlArray = [timeZoneService, selectedRegistration, dateService]\r\n            // if(specBasedComponent){\r\n            //     const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n            //         ...Map,\r\n            //         specBasedComponent: specBasedComponent\r\n            //     })\r\n            //     urlArray.push(ComponentTestBySpec) \r\n            // }\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    let selectedRecord = { ...response[1].data[\"EditData\"] };\r\n\r\n                    selectedRecord = { ...selectedRecord, ...selectedRecord['jsondata'] }\r\n\r\n                    const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                    const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                    const defaultTimeZone = { label: userInfo.stimezoneid, value: userInfo.ntimezonecode }\r\n\r\n                    // if (selectedRecord.ntransactionstatus !== transactionStatus.PREREGISTER) {\r\n                    //     toast.info(intl.formatMessage({ id: \"IDS_SELECTPREREGISTERSUBSAMPLETOEDIT\" }));\r\n                    //     dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                    // }\r\n\r\n                    //else {\r\n                    //               let lstComponent=[]\r\n                    if (specBasedComponent) {\r\n                        selectedRecord[\"ncomponentcode\"] = { label: selectedRecord[\"scomponentname\"], value: selectedRecord[\"ncomponentcode\"] }\r\n                    }\r\n                    const languagetypeCode = undefined\r\n                    const comboData = response[1].data;\r\n                    delete comboData['EditData']\r\n                    let comboValues = {}\r\n                    if (columnList.length > 0) {\r\n                        columnList.map(x => {\r\n                            if (x.inputtype === 'combo') {\r\n                                if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \r\n                                {\r\n                                    if (comboData[x.label].length > 0) {\r\n                                        if (comboData[x.label][0].label === undefined) {\r\n                                            const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                            comboData[x.label] = optionList.get(\"OptionList\");\r\n                                        } else {\r\n                                            comboData[x.label] = comboData[x.label]\r\n                                            const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode, x)\r\n                                        }\r\n                                    } else {\r\n                                        comboData[x.label] = []\r\n                                    }\r\n                                    //comboValues = childComboLoad(x, comboData, selectedRecord, \r\n                                    //   childColumnList, withoutCombocomponent)\\\r\n                                    comboValues = childComboLoadForEdit(x, comboData, selectedRecord,\r\n                                        childColumnList, withoutCombocomponent)\r\n                                } else {\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                comboValues = {\r\n                                    comboData: comboData,\r\n                                    ...comboValues\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        comboValues = {\r\n                            \"comboData\": comboData,\r\n                        }\r\n                    }\r\n                    // withoutCombocomponent.map(date => {\r\n                    //     if (date.inputtype === 'date')\r\n                    //         selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\r\n                    //             rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\";\r\n                    // })\r\n\r\n                    withoutCombocomponent.map(date => {\r\n                        if (date.inputtype === 'date') {\r\n                            selectedRecord[date.label] = selectedRecord[date.label] && selectedRecord[date.label] !== '-' ?\r\n                                rearrangeDateFormat(userInfo, selectedRecord[date.label]) : \"\"\r\n\r\n                            if (date.nperiodcode) {\r\n                                selectedRecord[date.label + \"value\"] = response[2].data[date.label] ?\r\n                                    new Date(response[2].data[date.label][\"datevalue\"]) : null;\r\n                            } else {\r\n                                selectedRecord[date.label + \"value\"] = new Date();\r\n                            }\r\n\r\n                            if (date.hidebeforedate) {\r\n                                selectedRecord[date.label + \"min\"] = selectedRecord[date.label + \"value\"]\r\n                            }\r\n                            if (date.hideafterdate) {\r\n                                selectedRecord[date.label + \"max\"] = selectedRecord[date.label + \"value\"]\r\n                            }\r\n                        }\r\n                    })\r\n\r\n                    selectedRecord = { ...selectedRecord }\r\n\r\n                    if (inputParam.editSubSampleRegParam[\"getSubSampleChildDetail\"] === true) {\r\n                        if (masterData[\"searchedTest\"]) {\r\n                            if (inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null) {\r\n                                inputParam.searchTestRef.current.value = \"\"\r\n                                masterData['searchedTest'] = undefined\r\n                            }\r\n                        }\r\n                        masterData = { ...masterData, ...response[1].data[\"SubSampleChildDetail\"] };\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            operation,\r\n                            timeZoneList,\r\n                            defaultTimeZone,\r\n                            selectedRecord,\r\n                            openModal: true,\r\n                            ncontrolCode: inputParam.editSubSampleRegParam.ncontrolCode,\r\n                            parentPopUpSize: \"lg\",\r\n                            loading: false,\r\n                            showSample: undefined,\r\n                            regSubSamplecomboData: comboValues.comboData,\r\n                            loadRegSubSample: true,\r\n                            screenName: \"IDS_SUBSAMPLE\",\r\n                            operation: \"update\",\r\n                            specBasedComponent,\r\n                            //  regRecordToEdit:recordToEdit\r\n                            masterData,\r\n                            withoutCombocomponent\r\n                        }\r\n                    })\r\n                    // }\r\n                })\r\n                .catch(error => {\r\n                    //console.log(\"error:\", error);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.info(intl.formatMessage({\r\n                            id: error.response.data\r\n                        }));\r\n                    }\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\nexport function onUpdateSubSampleRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload) {\r\n            requestUrl = rsapi.post(\"/registration/updateRegistrationSubSampleWithFile\", inputParam.formData)\r\n        } else {\r\n            requestUrl = rsapi.post(\"/registration/updateRegistrationSubSample\", inputParam.inputData)\r\n        }\r\n        return requestUrl\r\n            // rsapi.post(\"/registration/updateRegistrationSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                sortData(response.data);\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                //replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                //  let RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];\r\n                let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                masterData = {\r\n                    ...masterData,\r\n                    // selectedSample: response.data[\"selectedSample\"],\r\n                    selectedSubSample: response.data[\"selectedSubSample\"],\r\n                    //selectedTest: response.data[\"selectedTest\"],\r\n                    selectedTest: replaceUpdatedObject(response.data[\"RegistrationGetTest\"], masterData.selectedTest, \"ntransactiontestcode\"),\r\n                    RegistrationGetTest,\r\n                    // RegistrationGetSubSample,\r\n                    RegistrationParameter: response.data[\"RegistrationParameter\"]\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, openModal: false, loading: false, showConfirmAlert: false,\r\n                        regDateEditConfirmMessage: undefined, loadEsign: false,\r\n                        loadRegSubSample: false, selectedRecord: {}, showSample: undefined, screenName: intl.formatMessage({ id: \"IDS_SUBSAMPLE\" }),\r\n                    }\r\n                });\r\n                // let inputData = {\r\n                //     masterData,\r\n                //     selectedTest: masterData.selectedTest,\r\n                //     ntransactiontestcode: masterData.selectedTest ?\r\n                //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\r\n                //     npreregno: masterData.selectedSample ?\r\n                //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\r\n                //     userinfo: inputParam.inputData.userinfo,\r\n                //     activeTestTab : masterData.activeTestTab,\r\n                //     screenName: masterData.activeTestTab,\r\n                //     resultDataState: inputParam.resultDataState,\r\n                //     testCommentDataState: inputParam.testCommentDataState,\r\n                // }\r\n                // dispatch(getTestChildTabDetail(inputData, true))\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                }\r\n                else if (error.response.status === 302) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false, loadEsign: false,\r\n                            regEditParam: inputParam,\r\n                            showConfirmAlert: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            regDateEditConfirmMessage: error.response.data, showSample: undefined\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showSample: undefined } })\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function cancelSubSampleAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                if (inputParam.inputData.nsampletypecode === SampleType.CLINICALTYPE && response.data.isMapped) {\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                }\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    //selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n                if (inputParam.inputData.nsampletypecode === SampleType.CLINICALTYPE && response.data.isMapped) {\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\")\r\n                    }\r\n                }\r\n\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function preregRecordToQuarantine(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/quarantineRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                // replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                // replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                delete response.data[\"RegistrationGetSample\"];\r\n                delete response.data[\"RegistrationGetSubSample\"];\r\n                delete response.data[\"RegistrationGetTest\"];\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTestChildTabDetailRegistration(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        if (inputData.ntransactiontestcode === \"\") {\r\n            inputData.ntransactiontestcode = \"0\";\r\n        }\r\n        if (inputData.ntransactiontestcode && inputData.ntransactiontestcode.length > 0) {\r\n            let inputParamData = {\r\n                ntransactiontestcode: inputData.ntransactiontestcode,\r\n                npreregno: inputData.npreregno,\r\n                userinfo: inputData.userinfo,\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode ? inputData.ntransactionsamplecode :\r\n                    inputData.selectedSubSample && inputData.selectedSubSample.map(item => item.ntransactionsamplecode).join(\",\"),\r\n                OrderCodeData: inputData.masterData && inputData.masterData.selectedSample && inputData.masterData.selectedSample.length > 0 ?\r\n                    inputData.masterData.selectedSample.map(item => item.hasOwnProperty(\"OrderCodeData\") ? item.OrderCodeData : -1).join(\",\") : null,\r\n            }\r\n            let url = null\r\n            let { testtake } = inputData;\r\n            let activeName = \"\";\r\n            let dataStateName = \"\";\r\n            switch (inputData.activeTestTab) {\r\n                case \"IDS_RESULTS\":\r\n                    url = \"approval/getapprovalparameter\"\r\n                    activeName = \"ApprovalParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_PARAMETERRESULTS\":\r\n                    url = \"registration/getregistrationparameter\"\r\n                    activeName = \"RegistrationParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    url = \"resultentrybysample/getResultUsedInstrument\"\r\n                    activeName = \"ResultUsedInstrument\"\r\n                    dataStateName = \"instrumentDataState\"\r\n                    break;\r\n                case \"IDS_MATERIAL\":\r\n                    url = \"resultentrybysample/getResultUsedMaterial\"\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    url = \"resultentrybysample/getResultUsedTask\"\r\n                    activeName = \"ResultUsedTasks\"\r\n                    dataStateName = \"taskDataState\"\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    url = \"attachment/getTestAttachment\"\r\n                    activeName = \"RegistrationTestAttachment\"\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    url = \"comments/getTestComment\"\r\n                    activeName = \"RegistrationTestComment\"\r\n                    dataStateName = \"testCommentDataState\"\r\n                    break;\r\n                case \"IDS_TESTHISTORY\":\r\n                    url = \"history/getTestHistory\"\r\n                    activeName = \"RegistrationTestHistory\"\r\n                    dataStateName = \"registrationTestHistoryDataState\"\r\n                    break;\r\n                case \"IDS_DOCUMENTS\":\r\n                    url = \"approval/getapprovalparameter\"\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    url = \"approval/getApprovalResultChangeHistory\"\r\n                    activeName = \"ApprovalResultChangeHistory\"\r\n                    dataStateName = \"resultChangeDataState\"\r\n                    break;\r\n                case \"IDS_TESTAPPROVALHISTORY\":\r\n                    url = \"approval/getApprovalHistory\"\r\n                    activeName = \"ApprovalHistory\"\r\n                    dataStateName = \"historyDataState\"\r\n                    break;\r\n                case \"IDS_SAMPLEATTACHMENTS\":\r\n                    url = \"attachment/getSampleAttachment\"\r\n                    break;\r\n                case \"IDS_OUTSOURCEDETAILS\":\r\n                    url = \"registration/getOutsourceDetails\"\r\n                    break;\r\n                case \"IDS_EXTERNALORDERREPORTS\":\r\n                    url = \"registration/getExternalOrderAttachment\"\r\n                    break;\r\n                case \"IDS_TESTHISTORY\":\r\n                    url = \"history/getTestHistory\"\r\n                    break;\r\n                default:\r\n                    url = \"approval/getapprovalparameter\"\r\n                    activeName = \"ApprovalParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n            }\r\n            if (url !== null) {\r\n                dispatch(initRequest(true));\r\n                if (isServiceRequired) {\r\n                    rsapi.post(url, inputParamData)\r\n                        .then(response => {\r\n                            let skipInfo = {};\r\n                            let responseData = { ...response.data, selectedSample: inputData.selectedSample || inputData.masterData.selectedSample, selectedTest: inputData.selectedTest }\r\n                            //responseData = sortData(responseData)\r\n                            // fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\",inputData.removeElementFromArray);\r\n                            fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\r\n                            let masterData = {\r\n                                ...inputData.masterData,\r\n                                selectedSample: inputData.selectedSample || inputData.masterData.selectedSample,\r\n                                selectedTest: inputData.selectedTest,\r\n                                selectedPreregno: inputData.npreregno,\r\n                                selectedSampleCode: inputData.ntransactionsamplecode,\r\n                                selectedTestCode: inputData.ntransactiontestcode,\r\n                                activeTabIndex: inputData.activeTabIndex,\r\n                                activeTabId: inputData.activeTabId\r\n                            }\r\n                            if (inputData[dataStateName] && masterData[activeName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                                skipInfo = {\r\n\r\n                                    [dataStateName]: {\r\n                                        ...inputData[dataStateName],\r\n                                        skip: 0,\r\n                                        sort: undefined,\r\n                                        filter: undefined\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                skipInfo = {\r\n                                    ...skipInfo,\r\n                                    [dataStateName]: {\r\n                                        ...inputData[dataStateName],\r\n                                        sort: undefined,\r\n                                        filter: undefined\r\n                                    }\r\n                                }\r\n                            }\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN, payload: {\r\n                                    masterData,\r\n                                    activeTabIndex: inputData.activeTabIndex,\r\n                                    activeTabId: inputData.activeTabId,\r\n                                    loading: false,\r\n                                    showFilter: false,\r\n                                    activeTestTab: inputData.activeTestTab,\r\n                                    screenName: inputData.screenName,\r\n                                    testtake, testskip: undefined,\r\n                                    ...skipInfo\r\n                                }\r\n                            })\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                            if (error.response.status === 500) {\r\n                                toast.error(error.message);\r\n                            }\r\n                            else {\r\n                                toast.info(error.response.data);\r\n                            }\r\n                        })\r\n                } else {\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\", inputData.removeElementFromArray);\r\n                    let skipInfo = {};\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        selectedTest: inputData.selectedTest,\r\n                        selectedPreregno: inputData.npreregno,\r\n                        selectedSampleCode: inputData.ntransactionsamplecode,\r\n                        selectedTestCode: inputData.ntransactiontestcode,\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            screenName: inputData.screenName,\r\n                            testtake, testskip: undefined,\r\n                            ...skipInfo\r\n                        }\r\n                    })\r\n                }\r\n\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab\r\n                    }\r\n                })\r\n            }\r\n        } else {\r\n            let { ApprovalParameter, ResultUsedInstrument, ResultUsedTasks, RegistrationTestAttachment, ApprovalResultChangeHistory,\r\n                RegistrationTestComment, ApprovalHistory, RegistrationTestHistory } = inputData.masterData\r\n            switch (inputData.activeTestTab) {\r\n                case \"IDS_RESULTS\":\r\n                    ApprovalParameter = [];\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    ResultUsedInstrument = []\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    ResultUsedTasks = []\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    RegistrationTestAttachment = []\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    ApprovalResultChangeHistory = []\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    RegistrationTestComment = []\r\n                    break;\r\n                case \"IDS_APPROVALHISTORY\":\r\n                    ApprovalHistory = []\r\n                    break;\r\n                case \"IDS_TESTHISTORY\":\r\n                    RegistrationTestHistory = []\r\n                    break;\r\n                default:\r\n                    ApprovalParameter = []\r\n                    break;\r\n            }\r\n\r\n            dispatch({\r\n                type: DEFAULT_RETURN, payload: {\r\n                    masterData: {\r\n                        ...inputData.masterData,\r\n                        selectedTest: [],\r\n                        ApprovalParameter, ResultUsedInstrument, ResultUsedTasks, RegistrationTestAttachment,\r\n                        ApprovalResultChangeHistory, RegistrationTestComment, ApprovalHistory, RegistrationTestHistory\r\n                    }, loading: false,\r\n                    activeTabIndex: inputData.activeTabIndex,\r\n                    activeTabId: inputData.activeTabId,\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport const toTimestamp = (strDate) => {\r\n    // const dt = new Date(strDate).getTime();\r\n    // return dt / 1000;\r\n    const dt = strDate.getTime();\r\n    return dt;\r\n}\r\n\r\nexport function getDynamicFilter(inputParam) {\r\n    if (inputParam.component.inputtype === 'frontendsearchfilter') {\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilter\", { ...inputParam.component, userinfo: inputParam.userinfo })\r\n                .then(response => {\r\n                    const source = inputParam.component.source\r\n                    const languageTypeCode = inputParam.userinfo.slanguagetypecode\r\n                    const lstData = response.data[inputParam.component.label]\r\n\r\n\r\n                    // const responseparam={}\r\n                    const gridColumns = []\r\n                    const fields = []\r\n                    const datefileds = []\r\n                    const multilingual = []\r\n                    inputParam.component.filterfields.map(item => {\r\n                        fields.push(filterObject(item, languageTypeCode, response.data, inputParam.component));\r\n                        if (item.ismultilingual) {\r\n                            multilingual.push(item.columnname)\r\n                        }\r\n                        if (item.filterinputtype === \"date\") {\r\n                            datefileds.push(item.columnname)\r\n                        }\r\n                        if (item.filterinputtype !== 'predefinednumeric') {\r\n                            gridColumns.push(creategridColumns(item, languageTypeCode,));\r\n                        }\r\n                    })\r\n\r\n                    const optionList = lstData.map(item => {\r\n                        const jsondata = item[source] ? item[source].value ?\r\n                            JSON.parse(item[source].value) : item.jsondata : item.jsondata\r\n\r\n                        datefileds.map(x => {\r\n                            jsondata[x + \"timestamp\"] = toTimestamp(rearrangeDateFormatforKendoDataTool(inputParam.userinfo, jsondata[x]))\r\n                        })\r\n                        multilingual.map(mul => {\r\n                            jsondata[mul] =\r\n                                jsondata[mul][languageTypeCode] || jsondata[mul]['en-US']\r\n                                ;\r\n                        })\r\n\r\n\r\n                        return jsondata\r\n                    });\r\n                    let map = {\r\n                    }\r\n                    if (inputParam.type === 'design') {\r\n                        map = { ...map, showFilter: true, selectedComponentpath: inputParam.selectedComponentpath }\r\n                    } else {\r\n                        map = { ...map, loadCustomSearchFilter: true }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            lstPatient: optionList, gridColumns, fields,\r\n                            //  loadCustomSearchFilter: true\r\n                            loading: false,\r\n                            screenName: inputParam.component.displayname[languageTypeCode],\r\n                            seletedFilterComponent: inputParam.component,\r\n                            kendoSkip: 0,\r\n                            kendoTake: 5,\r\n                            kendoFilter: inputParam.component.kendoFilter || {\r\n                                logic: \"and\",\r\n                                filters: []\r\n                            },\r\n                            //awesomeTree: undefined,\r\n                            //awesomeConfig: undefined,\r\n                            // showFilter: true,\r\n                            ...map\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data.rtn);\r\n                    }\r\n\r\n                })\r\n        }\r\n    } else if (inputParam.component.inputtype === \"backendsearchfilter\") {\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/dynamicpreregdesign/getcustomsearchfilterpredefined\", { ...inputParam.component, userinfo: inputParam.userinfo })\r\n                .then(response => {\r\n                    const languageTypeCode = inputParam.userinfo.slanguagetypecode\r\n                    const { fields, gridColumns } = filterObjectForReactAwesomeFilter(inputParam.component.filterfields, languageTypeCode, response.data, inputParam.component)\r\n\r\n                    let map = {\r\n                    }\r\n                    let awesomeTree = inputParam.component.awesomeTree ? checkTree(loadTree(inputParam.component.awesomeTree), inputParam.component.awesomeConfig) : undefined\r\n                    if (inputParam.component.awesomeTree\r\n                        && inputParam.component.filterquery && inputParam.component.filterquery !== ''\r\n                    ) {\r\n                        map = {\r\n                            filterquery: inputParam.component.filterquery\r\n                        }\r\n\r\n                        if (inputParam.type === 'design') {\r\n                            map = {\r\n                                ...map, filterquery: inputParam.component.filterquery,\r\n                                selectedFieldRecord: { ...inputParam.component, awesomeTree: awesomeTree }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        map = {\r\n                            filterquery: ''\r\n                        }\r\n                        if (inputParam.type === 'design') {\r\n                            map = {\r\n                                ...map, filterquery: inputParam.component.filterquery,\r\n                                selectedFieldRecord: { ...inputParam.component, awesomeTree: awesomeTree }\r\n                            }\r\n                        }\r\n                    }\r\n                    if (inputParam.type === 'design') {\r\n                        map = {\r\n                            ...map,\r\n                            showFilter: true, selectedComponentpath: inputParam.selectedComponentpath\r\n                        }\r\n                    } else {\r\n                        map = { ...map, loadCustomSearchFilter: true }\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            lstPatient: [], gridColumns, fields,\r\n                            // loadCustomSearchFilter: true\r\n                            loading: false,\r\n                            screenName: inputParam.component.displayname[languageTypeCode],\r\n                            seletedFilterComponent: inputParam.component,\r\n                            kendoSkip: 0,\r\n                            kendoTake: 5,\r\n                            awesomeTree,\r\n                            onExecute: true,\r\n                            // awesomeConfig: inputParam.component.awesomeConfig || undefined,\r\n                            // showFilter: true,\r\n                            ...map\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.info(error.response.data.rtn);\r\n                    }\r\n\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\nlet datapredef = {}\r\nconst CustomFilter = props => {\r\n    const { filter, data = [], defaultItem } = props;\r\n    const onChange = event => {\r\n        props.onFilterChange.call(undefined, {\r\n            nextFilter: { ...props.filter, value: event.target.value.value }\r\n        });\r\n    };\r\n\r\n    return <ComboBox onChange={onChange} data={filter.field ? datapredef[filter.field] : []} textField=\"text\" />;\r\n};\r\n\r\nexport function creategridColumns(item, languageTypeCode) {\r\n    let obj = {}\r\n    if (item.filterinputtype !== 'predefinednumeric') {\r\n        return {\r\n            field: item.columnname,\r\n            title: item.displayname[languageTypeCode], width: \"250px\"\r\n        }\r\n    }\r\n}\r\n\r\nexport function filterObjectForReactAwesomeFilter(filterFields, languageTypeCode, resposedata, component) {\r\n    let obj = {}\r\n    obj['fields'] = {}\r\n    obj['gridColumns'] = []\r\n    filterFields.map(item => {\r\n        if (item.filterinputtype === 'predefinednumeric' || item.filterinputtype === 'predefinedtext') {\r\n            const optionList = resposedata[item.predefinedtablename].map(data => {\r\n                const jsondata = data[item.predefinedtablename] ? data[item.predefinedtablename].value ?\r\n                    JSON.parse(data[item.predefinedtablename].value) : data.jsondata : data.jsondata\r\n\r\n                jsondata['title'] = item.predefinedismultilingual ?\r\n                    jsondata[item.predefineddisplaymember]\r\n                    [languageTypeCode] || jsondata[item.predefineddisplaymember]['en-US']\r\n                    : jsondata[item.predefineddisplaymember];\r\n                jsondata['value'] = jsondata[component.valuemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember]\r\n                return jsondata\r\n            });\r\n            datapredef[item.columnname] = optionList\r\n        }\r\n        switch (item.filterinputtype) {\r\n            case \"text\":\r\n                obj['fields'][item.type === 'dynamic' ? item.ismultilingual ?\r\n                    \"jsondata->'\" + item.columnname + \"'->>'\" + languageTypeCode + \"'\" :\r\n                    \"jsondata->>'\" + item.columnname + \"'\" :\r\n                    \"\\\"\" + item.columnname + \"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"text\",\r\n                    valueSources: [\"value\", \"func\"],\r\n                    mainWidgetProps: {\r\n                        \"valueLabel\": \"Name\",\r\n                        \"valuePlaceholder\": intl.formatMessage({ id: \"IDS_ENTER\" }) + \" \" + item.displayname[languageTypeCode]\r\n                    }\r\n                }\r\n                break;\r\n            case \"numeric\":\r\n                obj['fields'][item.type === 'dynamic' ?\r\n                    \"(jsondata->>'\" + item.columnname + \"')::int\" :\r\n                    \"\\\"\" + item.columnname + \"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"number\",\r\n                    valueSources: [\"value\"],\r\n                    fieldSettings: {\r\n                        ...item.numericcondition\r\n                    }\r\n                }\r\n                break;\r\n            case \"date\":\r\n                obj['fields'][item.type === 'dynamic' ?\r\n                    \"jsondata->>'\" + item.columnname + \"'\" :\r\n                    \"\\\"\" + item.columnname + \"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"date\",\r\n                    valueSources: [\"value\"],\r\n                }\r\n                break;\r\n            case \"predefinednumeric\":\r\n                obj['fields'][item.type === 'dynamic' ?\r\n                    \"(jsondata->>'\" + item.columnname + \"')::int\" :\r\n                    \"\\\"\" + item.columnname + \"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"select\",\r\n                    valueSources: [\"value\"],\r\n                    fieldSettings: {\r\n                        listValues: datapredef[item.columnname]\r\n                    }\r\n\r\n                }\r\n                break;\r\n            case \"predefinedtext\":\r\n                obj['fields'][item.type === 'dynamic' ? item.ismultilingual ?\r\n                    \"jsondata->'\" + item.columnname + \"'->>'\" + languageTypeCode + \"'\" :\r\n                    \"jsondata->>'\" + item.columnname + \"'\" :\r\n                    \"\\\"\" + item.columnname + \"\\\"\"] = {\r\n                    label: item.displayname[languageTypeCode],\r\n                    type: \"select\",\r\n                    valueSources: [\"value\"],\r\n                    fieldSettings: {\r\n                        listValues: datapredef[item.columnname]\r\n                    }\r\n\r\n                }\r\n                break;\r\n        }\r\n        const gridColumns = creategridColumns(item, languageTypeCode)\r\n        if (item.filterinputtype !== 'predefinednumeric') {\r\n            obj['gridColumns'].push(gridColumns)\r\n        }\r\n\r\n\r\n    })\r\n    return obj;\r\n}\r\n\r\nexport function filterObject(item, languageTypeCode, resposedata, component, isMultiFilter) {\r\n    let obj = {}\r\n    let preobj = {}\r\n    if (item.filterinputtype === 'predefinednumeric' || item.filterinputtype === 'predefinedtext') {\r\n        const optionList = resposedata[item.predefinedtablename].map(data => {\r\n            const jsondata = data[item.predefinedtablename] ? data[item.predefinedtablename].value ?\r\n                JSON.parse(data[item.predefinedtablename].value) : data.jsondata : data.jsondata\r\n\r\n            jsondata['text'] = item.predefinedismultilingual ?\r\n                jsondata[item.predefineddisplaymember]\r\n                [languageTypeCode] || jsondata[item.predefineddisplaymember]['en-US']\r\n                : jsondata[item.predefineddisplaymember];\r\n            jsondata['value'] = jsondata[component.valuemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember === 'ndynamicmastercode' ? item.predefineddisplaymember : item.predefinedvaluemember]\r\n            //delete jsondata.jsondata\r\n            return jsondata\r\n        });\r\n        datapredef[item.columnname] = optionList\r\n        // preobj = {\r\n        //     predefdata: optionList, predefineddisplaymember: item.predefineddisplaymember,\r\n        //     predefinedvaluemember: item.columnname\r\n        // }\r\n    }\r\n    switch (item.filterinputtype && item.filterinputtype.toLowerCase()) {\r\n        case \"text\":\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: TextFilter,\r\n                operators: Operators.text,\r\n            }\r\n        case \"numeric\":\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: NumericFilter,\r\n                operators: Operators.numeric,\r\n            }\r\n        case \"date\":\r\n            if (isMultiFilter) {\r\n                return obj = {\r\n                    name: item.columnname,\r\n                    // + \"timestamp\",\r\n                    label: item.displayname[languageTypeCode],\r\n                    filter: DateFilter,\r\n                    operators: Operators.date,\r\n                }\r\n            } else {\r\n                return obj = {\r\n                    name: item.columnname + \"timestamp\",\r\n                    label: item.displayname[languageTypeCode],\r\n                    filter: DateFilter,\r\n                    operators: Operators.date,\r\n                }\r\n            }\r\n\r\n        case \"predefinednumeric\":\r\n\r\n\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: CustomFilter,\r\n                operators: Operators.text,\r\n                // operators: Operators.numeric,\r\n            }\r\n        case \"predefinedtext\":\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: CustomFilter,\r\n                operators: Operators.text,\r\n            }\r\n        default:\r\n            return obj = {\r\n                name: item.columnname,\r\n                label: item.displayname[languageTypeCode],\r\n                filter: TextFilter,\r\n                operators: Operators.text,\r\n            }\r\n\r\n    }\r\n\r\n    //return obj;\r\n}\r\n\r\nexport function getDynamicFilterExecuteData(inputParam) {\r\n    return function (dispatch) {\r\n\r\n        let obj = { ...inputParam.component, filterquery: inputParam.filterquery, userinfo: inputParam.userinfo }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/dynamicpreregdesign/getdynamicfilterexecutedata\", obj)\r\n            .then(response => {\r\n                const source = inputParam.component.source\r\n                const languageTypeCode = inputParam.userinfo.slanguagetypecode\r\n                const lstData = response.data[inputParam.component.label]\r\n                const multilingual = []\r\n                inputParam.component.filterfields.map(item => {\r\n                    if (item.ismultilingual) {\r\n                        multilingual.push(item.columnname)\r\n                    }\r\n                })\r\n                const optionList = lstData.map(item => {\r\n                    const jsondata = item[source] ? item[source].value ?\r\n                        JSON.parse(item[source].value) : item.jsondata : item.jsondata\r\n\r\n                    multilingual.map(mul => {\r\n                        jsondata[mul] =\r\n                            jsondata[mul][languageTypeCode] || jsondata[mul]['en-US'];\r\n                    })\r\n                    // let label = isMultiLingual ?\r\n                    //   jsondata[optionValue]\r\n                    //   [languageTypeCode] || jsondata[optionValue]['en-US']\r\n                    //   : jsondata[optionValue];\r\n\r\n                    return jsondata\r\n                });\r\n                if (inputParam.userinfo.nformcode === 161) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            lstPatient: optionList,\r\n                            onExecute: false,\r\n                            loading: false,\r\n                            screenName: inputParam.component.displayname[languageTypeCode]\r\n                        }\r\n                    })\r\n                }\r\n                else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            lstPatient: optionList,\r\n                            // onExecute: false,\r\n                            loading: false,\r\n                            screenName: inputParam.component.displayname[languageTypeCode]\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data.rtn);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function rearrangeDateFormatforKendoDataTool(userInfo, dateValue) {\r\n    let splitChar = \"/\";\r\n\r\n    if (dateValue !== undefined) {\r\n        const index = userInfo.ssitedatetime && userInfo.ssitedatetime.indexOf(\"/\" || \"-\")\r\n        if (index !== -1)\r\n            splitChar = userInfo.ssitedatetime.substring(index, index + 1)\r\n\r\n    }\r\n    //   console.log(\"splitChar:\", splitChar);\r\n    if ((splitChar === \"/\" || splitChar === \"-\") && typeof dateValue === \"string\") {\r\n        const firstField = userInfo.ssitedatetime && userInfo.ssitedatetime.split(splitChar)[0];\r\n        // console.log(\"firstField:\", firstField);\r\n        const timeSplitChar = dateValue.indexOf(\"T\") !== -1 ? \"T\" : \" \"\r\n        const datetime = dateValue.split(timeSplitChar);\r\n        const dateArray = datetime[0].split(splitChar);\r\n        if (firstField === \"dd\") {\r\n            const day = dateArray[0];\r\n            const month = dateArray[1];\r\n            const year = dateArray[2];\r\n            const time = datetime[1] || \"00:00:00\";\r\n\r\n            const formatted = year + \"-\" + month + \"-\" + day + \"T\" + time;\r\n            return new Date(formatted);\r\n        }\r\n        else if (firstField === \"yyyy\") {\r\n            const year = dateArray[0];\r\n            const month = dateArray[1];\r\n            const day = dateArray[2];\r\n            const time = datetime[1] || \"00:00:00\";\r\n            const formatted = year + \"-\" + month + \"-\" + day + \"T\" + time;\r\n            return new Date(formatted);\r\n        }\r\n        else {\r\n            return new Date(dateValue);\r\n        }\r\n    }\r\n    else {\r\n        return dateValue;\r\n    }\r\n}\r\n\r\nexport function preRegDispatch(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        dispatch({\r\n            type: DEFAULT_RETURN,\r\n            payload: {\r\n                ...inputParam\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function validateEsignforRegistration(inputParam) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data === \"Success\") {\r\n\r\n                    const methodUrl = \"registration\";\r\n                    inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\r\n\r\n                    if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()] &&\r\n                        inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]) {\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"]\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"]\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"]\r\n                    }\r\n                    //dispatch(inputParam[\"screenData\"][\"inputParam\"].performAction(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"]))\r\n                    dispatch(dispatchMethods(inputParam[\"screenData\"]))\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            })\r\n    };\r\n}\r\n\r\nfunction dispatchMethods(screenData) {\r\n    return (dispatch) => {\r\n        let action = screenData.inputParam.action\r\n        switch (action) {\r\n            case \"preregister\":\r\n                dispatch(insertRegistration(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"editSample\":\r\n                dispatch(updateRegistration(screenData.inputParam, screenData.masterData, 'openModal'));\r\n                break;\r\n            case \"accept\":\r\n                dispatch(acceptRegistration(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"quarantine\":\r\n                dispatch(preregRecordToQuarantine(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"cancelTest\":\r\n                dispatch(cancelTestAction(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"cancelSample\":\r\n                dispatch(cancelSampleAction(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"addregsourcecountry\":\r\n                dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n                break;\r\n            case \"deleteregsourcecountry\":\r\n                dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n                break;\r\n            case \"printer\":\r\n                dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n                break;\r\n            case \"editSubSample\":\r\n                dispatch(onUpdateSubSampleRegistration(screenData.inputParam, screenData.masterData));\r\n                //ALPD-1128\r\n                break;\r\n            case \"cancelSubSample\":\r\n                dispatch(cancelSubSampleAction(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            case \"adhocTest\":\r\n                dispatch(createAdhocTest(screenData.inputParam, screenData.masterData));\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\nexport function getStorageCategoryForSendToStore(storeInputParam, selectedRecord, sampleDetails) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n\r\n        const userInfo = storeInputParam.userInfo;\r\n        let masterData = storeInputParam.masterData;\r\n        const sendToStoreId = storeInputParam.controlcode;\r\n\r\n\r\n        const geStorageCategory = rsapi.post(\"/storagecategory/getStorageCategory\", { 'userinfo': userInfo });\r\n        const getUnit = rsapi.post(\"/unit/getUnit\", { 'userinfo': userInfo });\r\n        const getApprovedLocation = rsapi.post(\"/samplestoragemaster/getSampleQty\", sampleDetails);\r\n\r\n        let urlArray = [geStorageCategory, getUnit, getApprovedLocation];\r\n\r\n        ///////////////////////////////\r\n        if (sampleDetails.needSubSample) {\r\n            if (masterData[\"selectedSubSample\"].length > 1 ||\r\n                masterData[\"selectedSubSample\"]\r\n                    .findIndex(x => x[storeInputParam.primaryKeyName] === storeInputParam[\"mastersendtostore\"][storeInputParam.primaryKeyName])\r\n                === -1) {\r\n                storeInputParam.subSampleRegParam[\"getSubSampleChildDetail\"] = true;\r\n            }\r\n\r\n            masterData[\"selectedSubSample\"] = [];\r\n            masterData[\"selectedSubSample\"].push(storeInputParam[\"mastersendtostore\"]);\r\n\r\n            // storeInputParam.subSampleRegParam[\"npreregno\"] = storeInputParam[\"mastersendtostore\"][\"npreregno\"];\r\n            // storeInputParam.subSampleRegParam[\"checkBoxOperation\"] = 3;\r\n            // storeInputParam.subSampleRegParam[\"nfilterstatus\"] = storeInputParam[\"mastersendtostore\"][\"ntransactionstatus\"];\r\n            // storeInputParam.subSampleRegParam[\"napprovalconfigcode\"] = storeInputParam[\"mastersendtostore\"][\"napprovalconfigcode\"];\r\n\r\n            let inputParamData = {\r\n                nsampletypecode: storeInputParam[\"subSampleRegParam\"].nsampletypecode,\r\n                nregtypecode: storeInputParam[\"subSampleRegParam\"].nregtypecode,\r\n                nregsubtypecode: storeInputParam[\"subSampleRegParam\"].nregsubtypecode,\r\n                npreregno: String(storeInputParam[\"mastersendtostore\"].npreregno),\r\n                ntransactionsamplecode: String(storeInputParam[\"mastersendtostore\"].ntransactionsamplecode),\r\n                ntransactionstatus: storeInputParam[\"mastersendtostore\"].ntransactionstatus,\r\n                napprovalconfigcode: storeInputParam[\"mastersendtostore\"].napprovalconfigcode,\r\n                activeTestTab: storeInputParam[\"subSampleRegParam\"].activeTestTab,\r\n                activeSampleTab: storeInputParam[\"subSampleRegParam\"].activeSampleTab,\r\n                activeSubSampleTab: storeInputParam[\"subSampleRegParam\"].activeSubSampleTab,\r\n                userinfo: storeInputParam.userInfo,\r\n                ndesigntemplatemappingcode: storeInputParam[\"subSampleRegParam\"].ndesigntemplatemappingcode,\r\n                checkBoxOperation: storeInputParam[\"masterData\"].checkBoxOperation,\r\n                nneedsubsample: storeInputParam[\"subSampleRegParam\"].nneedsubsample\r\n            }\r\n\r\n            urlArray.push(rsapi.post(\"registration/getRegistrationTest\", inputParamData));\r\n        }\r\n        else {\r\n            if (masterData[\"selectedSample\"].length > 1 ||\r\n                masterData[\"selectedSample\"]\r\n                    .findIndex(x => x[storeInputParam.primaryKeyName] === storeInputParam[\"mastersendtostore\"][storeInputParam.primaryKeyName])\r\n                === -1) {\r\n                storeInputParam.mainSampleRegParam[\"getSampleChildDetail\"] = true;\r\n            }\r\n            masterData[\"selectedSample\"] = [];\r\n            masterData[\"selectedSample\"].push(storeInputParam[\"mastersendtostore\"]);\r\n\r\n            const inputParamData = {\r\n                nsampletypecode: storeInputParam.mainSampleRegParam.nsampletypecode,\r\n                nregtypecode: storeInputParam.mainSampleRegParam.nregtypecode,\r\n                nregsubtypecode: storeInputParam.mainSampleRegParam.nregsubtypecode,\r\n                npreregno: String(storeInputParam.mastersendtostore.npreregno),\r\n                ntransactionstatus: storeInputParam.mastersendtostore.ntransactionstatus,\r\n                napprovalconfigcode: storeInputParam.mastersendtostore.napprovalconfigcode,\r\n                activeTestTab: storeInputParam.mainSampleRegParam.activeTestTab,\r\n                activeSampleTab: storeInputParam.mainSampleRegParam.activeTestTab,\r\n                activeSubSampleTab: storeInputParam.mainSampleRegParam.activeTestTab,\r\n                userinfo: storeInputParam.userInfo,\r\n                ndesigntemplatemappingcode: storeInputParam.mainSampleRegParam.ndesigntemplatemappingcode,\r\n                nneedsubsample: storeInputParam.mainSampleRegParam.nneedsubsample,\r\n                // ntype: storeInputParam.masterData.checkBoxOperation === 7 ? 4 : undefined,\r\n                ntype: storeInputParam.masterData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL ? 4 : undefined,\r\n                // checkBoxOperation: storeInputParam.masterData.nneedsubsample === true ?\r\n                //     storeInputParam.masterData.checkBoxOperation === 5 ? 3 : storeInputParam.masterData.checkBoxOperation : storeInputParam.mastersendtostore.checkBoxOperation\r\n                checkBoxOperation: storeInputParam.masterData.nneedsubsample === true ?\r\n                    storeInputParam.masterData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS ? checkBoxOperation.SINGLESELECT : storeInputParam.masterData.checkBoxOperation : storeInputParam.mastersendtostore.checkBoxOperation\r\n\r\n            }\r\n            urlArray.push(rsapi.post(\"registration/getRegistrationSubSample\", inputParamData));\r\n\r\n        }\r\n\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                //console.log(\"res:\", response);\r\n                if (response[2].data[\"ReturnStatus\"] !== undefined) {\r\n                    toast.info(response[2].data[\"ReturnStatus\"]);\r\n                    masterData = {\r\n                        ...masterData, ...response[3].data\r\n                    };\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            // openChildModal: true,\r\n                            // operation: \"sendToStore\",\r\n                            ncontrolcode: sendToStoreId,\r\n                            selectedRecord,\r\n                            npreregno: sampleDetails.npreregno,\r\n                            ntransactionsamplecode: sampleDetails.ntransactionsamplecode\r\n\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    const conditionMap = constructOptionList(response[0].data, \"nstoragecategorycode\", \"sstoragecategoryname\", false, false, true);\r\n                    const conditionMaster = conditionMap.get(\"OptionList\");\r\n\r\n                    const conditionUnitMap = constructOptionList(response[1].data, \"nunitcode\", \"sunitname\", false, false, true);\r\n                    const conditionUnitMaster = conditionUnitMap.get(\"OptionList\");\r\n\r\n                    let isneedSubSampleQty = false;\r\n                    let approvedTreeData = [];\r\n                    selectedRecord[\"nsamplestoragelocationcode\"] = [];\r\n                    selectedRecord[\"nstoragecategorycode\"] = [];\r\n                    selectedRecord[\"nsampleqty\"] = undefined;\r\n                    selectedRecord[\"sampleToStore\"] = sampleDetails.sample === undefined ? \"\" : sampleDetails.sample;\r\n\r\n                    if (response[2].data !== null && response[2].data[\"isNeedSubSampleQty\"] && response[2].data[\"isNeedSubSampleQty\"] !== \"\") {\r\n                        isneedSubSampleQty = false;\r\n                    } else {\r\n                        isneedSubSampleQty = true;\r\n                    }\r\n\r\n                    if (response[2].data !== null && response[2].data.unit && response[2].data.unit.value !== undefined) {\r\n                        conditionUnitMaster.map(item => item.value === response[2].data.unit.value ?\r\n                            selectedRecord[\"nunitcode\"] = {\r\n                                \"label\": item.label,\r\n                                \"value\": item.value,\r\n                                \"item\": item.item\r\n                            }\r\n                            : \"\");\r\n\r\n                    }\r\n                    masterData = {\r\n                        ...masterData, storageCategory: conditionMaster, approvedTreeData,\r\n                        unitMaster: conditionUnitMaster, ...response[3].data\r\n                    };\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            openChildModal: true,\r\n                            operation: \"sendToStore\",\r\n                            ncontrolcode: sendToStoreId,\r\n                            selectedRecord,\r\n                            npreregno: sampleDetails.npreregno,\r\n                            ntransactionsamplecode: sampleDetails.ntransactionsamplecode, isneedSubSampleQty\r\n\r\n                        }\r\n                    });\r\n                }\r\n\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 503) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.info(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport function UpdateExternalOrderStatus(portallist, inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post((String)(inputParam.inputData[\"url\"]) + \"/portal/UpdateMultiSampleStatus\", JSON.stringify(portallist), {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            }\r\n        })\r\n            .then(response => {\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response !== undefined && error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else if (error.response === undefined) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function autoExternalComponentLoadBasedOnSpec(dispatchData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getSampleBasedOnExternalOrder\",\r\n            {\r\n                'nexternalordercode': dispatchData.selectedRecord[\"Order\"] ? dispatchData.selectedRecord[\"Order\"].value : -1,\r\n                \"nexternalordersamplecode\": dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1\r\n            })\r\n            .then(response => {\r\n                let Sample = response.data.Sample;\r\n                //console.log(\"sample:\", Sample);\r\n                let Test1 = response.data.Test\r\n                let subSampleDataGridList = []\r\n                let Component = []\r\n                const Test = {};\r\n                Sample.map((sample, index) => {\r\n                    let saveComponent = {};\r\n                    saveComponent[\"slno\"] = index;\r\n                    saveComponent['jsondata'] = {}\r\n                    saveComponent['jsonuidata'] = {}\r\n                    saveComponent['ncomponentcode'] = sample['ncomponentcode']\r\n                    saveComponent['nspecsampletypecode'] = sample['nspecsampletypecode']\r\n                    saveComponent['scomponentname'] = sample['scomponentname']\r\n                    //saveComponent['jsondata']['ncomponentcode'] = { label: sample['scomponentname'], value: sample['ncomponentcode'] }\r\n                    // saveComponent['jsonuidata']['ncomponentcode'] = sample['scomponentname']\r\n\r\n                    //  saveComponent['jsondata']['scomponentname'] =  sample['scomponentname']\r\n                    saveComponent['jsonuidata']['scomponentname'] = sample['scomponentname']\r\n\r\n                    saveComponent['jsondata']['External Sample ID_child'] = sample['sexternalsampleid']\r\n                    saveComponent['jsonuidata']['External Sample ID_child'] = sample['sexternalsampleid']\r\n\r\n                    saveComponent['jsondata']['sampleorderid'] = sample['sexternalsampleid']\r\n                    saveComponent['jsonuidata']['sampleorderid'] = sample['sexternalsampleid']\r\n\r\n                    saveComponent['jsondata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1;\r\n                    saveComponent['jsonuidata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1;\r\n                    // ALPD-3575\r\n                    saveComponent['jsondata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime']\r\n                    saveComponent['jsonuidata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime']\r\n\r\n                    saveComponent['jsondata']['nsampleappearancecode'] = sample['nsampleappearancecode']\r\n                    saveComponent['jsonuidata']['nsampleappearancecode'] = sample['nsampleappearancecode']\r\n\r\n                    saveComponent['jsondata']['ssampleappearance'] = sample['ssampleappearance']\r\n                    saveComponent['jsonuidata']['ssampleappearance'] = sample['ssampleappearance']\r\n\r\n                    saveComponent['jsondata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime']\r\n                    saveComponent['jsonuidata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime']\r\n\r\n                    saveComponent['jsondata']['Sample Appearance_child'] = {\r\n                        'label': sample['ssampleappearance'], 'value': sample['nsampleappearancecode'],\r\n                        'source': 'sampleappearance', 'pkey': 'nsampleappearancecode', 'nquerybuildertablecode': sample['nquerybuildertablecode']\r\n                    }\r\n                    saveComponent['jsonuidata']['Sample Appearance_child'] = sample['ssampleappearance']\r\n                    // ALPD-3575\r\n                    // saveComponent['jsondata']['Quantity_child'] = sample['nsampleqty']\r\n                    // saveComponent['jsonuidata']['Quantity_child'] = sample['nsampleqty']\r\n\r\n                    // saveComponent['jsondata']['Unit Name_child'] = { label: sample['sunitname'], value: sample['nunitcode'] }\r\n                    // saveComponent['jsonuidata']['Unit Name_child'] = sample['sunitname']\r\n\r\n                    subSampleDataGridList.push({ ...saveComponent['jsonuidata'], ...saveComponent, \"Sample Collection Date Time_child\": convertDateTimetoString(new Date(sample['dsamplecollectiondatetime']), dispatchData.userInfo) });\r\n                    Component.unshift(saveComponent);\r\n                    delete dispatchData['userInfo'];\r\n                    const filterTest = Test1.filter(x => x.nexternalordersamplecode === sample.nexternalordersamplecode)\r\n                    filterTest.map(x => {\r\n                        x['slno'] = index\r\n                    })\r\n                    //selectedTestData=[...selectedTestData,...filterTest]\r\n                    Test[index] = filterTest\r\n\r\n                })\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ...dispatchData,\r\n                        Component,\r\n                        selectedComponent: Component.length > 0 ? { ...Component[0] } : {},\r\n                        selectComponent: {},\r\n                        SelectedTest: Component.length > 0 ? Test[Component[0].slno] : [],\r\n                        Test: Test,\r\n                        selectedTestData: {},\r\n                        subSampleDataGridList,\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function autoPortalTestLoadBasedOnSpec(dispatchData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getSampleBasedOnPortalOrder\",\r\n            {\r\n                'nexternalordercode': dispatchData.selectedRecord[\"Plant Order\"] ? dispatchData.selectedRecord[\"Plant Order\"].value : -1,\r\n                'userinfo': dispatchData.userInfo\r\n            })\r\n            .then(response => {\r\n                let Sample = response.data.Sample;\r\n                let Test1 = response.data.Test\r\n                let subSampleDataGridList = []\r\n                let Component = []\r\n                const Test = {};\r\n\r\n                Sample.map((sample, index) => {\r\n                    let saveComponent = {};\r\n                    saveComponent[\"slno\"] = index;\r\n                    saveComponent['jsondata'] = {}\r\n                    saveComponent['jsonuidata'] = {}\r\n                    saveComponent['ncomponentcode'] = sample['ncomponentcode']\r\n                    saveComponent['nspecsampletypecode'] = sample['nspecsampletypecode']\r\n                    saveComponent['scomponentname'] = sample['scomponentname']\r\n                    saveComponent['jsonuidata']['scomponentname'] = sample['scomponentname']\r\n                    saveComponent['jsondata']['External Sample ID_child'] = sample['sexternalsampleid']\r\n                    saveComponent['jsonuidata']['External Sample ID_child'] = sample['sexternalsampleid']\r\n                    saveComponent['jsondata']['sampleorderid'] = sample['sexternalsampleid']\r\n                    saveComponent['jsonuidata']['sampleorderid'] = sample['sexternalsampleid']\r\n                    saveComponent['jsondata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1;\r\n                    saveComponent['jsonuidata']['nsampleordercode'] = dispatchData.selectedRecord[\"External Sample Id\"] ? dispatchData.selectedRecord[\"External Sample Id\"].value : -1;\r\n                    saveComponent['jsondata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime']\r\n                    saveComponent['jsonuidata']['subsamplecollectiondatetime'] = sample['dsamplecollectiondatetime']\r\n\r\n                    saveComponent['jsondata']['nsampleappearancecode'] = sample['nsampleappearancecode']\r\n                    saveComponent['jsonuidata']['nsampleappearancecode'] = sample['nsampleappearancecode']\r\n\r\n                    saveComponent['jsondata']['ssampleappearance'] = sample['ssampleappearance']\r\n                    saveComponent['jsonuidata']['ssampleappearance'] = sample['ssampleappearance']\r\n\r\n                    saveComponent['jsondata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime']\r\n                    saveComponent['jsonuidata']['Sample Collection Date Time_child'] = sample['dsamplecollectiondatetime']\r\n\r\n                    saveComponent['jsondata']['Sample Appearance_child'] = {\r\n                        'label': sample['ssampleappearance'], 'value': sample['nsampleappearancecode'],\r\n                        'source': 'sampleappearance', 'pkey': 'nsampleappearancecode', 'nquerybuildertablecode': sample['nquerybuildertablecode']\r\n                    }\r\n                    saveComponent['jsonuidata']['Sample Appearance_child'] = sample['ssampleappearance']\r\n\r\n                    subSampleDataGridList.push({ ...saveComponent['jsonuidata'], ...saveComponent, \"Sample Collection Date Time_child\": convertDateTimetoString(new Date(sample['dsamplecollectiondatetime']), dispatchData.userInfo) });\r\n                    Component.unshift(saveComponent);\r\n                    delete dispatchData['userInfo'];\r\n                    const filterTest = Test1.filter(x => x.nexternalordersamplecode === sample.nexternalordersamplecode)\r\n                    filterTest.map(x => {\r\n                        x['slno'] = index\r\n                    })\r\n                    Test[index] = filterTest\r\n\r\n                })\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ...dispatchData,\r\n                        Component,\r\n                        selectedComponent: Component.length > 0 ? { ...Component[0] } : {},\r\n                        selectComponent: {},\r\n                        SelectedTest: Test[0],\r\n                        Test: Test,\r\n                        subSampleDataGridList,\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function getBarcodeAndPrinterService(inputParam) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true))\r\n        let urlArray = [];\r\n        const getPrinter = rsapi.post(\"barcode/getPrinter\", inputParam.userInfo);\r\n\r\n        const getControlBasedBarcode = rsapi.post(\"barcode/getControlBasedBarcode\", inputParam);\r\n\r\n        urlArray = [getPrinter, getControlBasedBarcode]\r\n        // rsapi.post(\"barcode/getPrinter\", inputParam.userInfo)\r\n        Axios.all(urlArray).then(response => {\r\n            let selectedPrinterData = {\r\n                sprintername: {\r\n                    value: response[0].data[0].sprintername,\r\n                    label: response[0].data[0].sprintername,\r\n                    item: response[0].data[0]\r\n                },\r\n                sbarcodename: \"\"\r\n            };\r\n            const printer = constructOptionList(response[0].data || [], \"sprintername\",\r\n                \"sprintername\", undefined, undefined, true).get(\"OptionList\");\r\n            const barcode = constructOptionList(response[1].data || [], \"sbarcodename\",\r\n                \"sbarcodename\", undefined, undefined, true).get(\"OptionList\");\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    masterData: {\r\n                        ...inputParam.masterData, control: inputParam.control,\r\n                    },\r\n                    printer,\r\n                    barcode,\r\n                    selectedPrinterData,\r\n                    operation: \"printer\",\r\n                    screenName: \"IDS_PRINTBARCODE\",\r\n                    //dataToPrint: inputParam.selectedGoodsIn.nrmsno,\r\n                    ncontrolcode: inputParam.ncontrolcode,\r\n                    loading: false,\r\n                    openModal: true,\r\n                    loadPrinter: true\r\n                }\r\n            });\r\n        })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            });\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function getOrderDetails(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/externalorder/getDraftExternalOrderDetails\", { sexternalorderid: inputData.sexternalorderid, nexternalordertypecode: inputData.selectedRecord.nexternalordertypecode && inputData.selectedRecord.nexternalordertypecode.value, userinfo: inputData.userinfo }).then(response => {\r\n\r\n            let masterData = { ...inputData.masterData }  //orders:response.data.ExternalOrder\r\n            let selectedRecord = { ...inputData.selectedRecord }\r\n\r\n            selectedRecord['orders'] = response.data.ExternalOrder\r\n            response.data.isRecordNotAvailable && response.data.isRecordNotAvailable !== \"\" && toast.warn(response.data.isRecordNotAvailable);\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    masterData,\r\n                    selectedRecord,\r\n                    loading: false\r\n                }\r\n            });\r\n        })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    //toast.warn(error.response.data['rtn']);\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function onUpdateCancelExternalOrder(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/externalorder/onUpdateCancelExternalOrder\", { ...inputParam.inputData }).then(response => {\r\n\r\n\r\n            // if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n            //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n            // }\r\n            let masterData = { ...inputParam.inputData.masterData, orders: [] }\r\n\r\n            // if (response.data[\"rtn\"] === true) {\r\n            //     toast.info(intl.formatMessage({ id: response.data[\"rtn\"] }));\r\n            // }\r\n\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    selectedRecord: {},\r\n                    masterData,\r\n                    loading: false,\r\n                    openModal: false\r\n                }\r\n            });\r\n        })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    //toast.warn(error.response.data['rtn']);\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getOutSourceSite(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/externalorder/getOutSourceSite\", { ...inputParam.inputData })\r\n            .then(response => {\r\n                //console.log(\"response if loop\");\r\n                const siteListMap = constructOptionList(response.data || [], 'nsitecode', 'ssitename', undefined, undefined, undefined,\r\n                    'ndefaultstatus') || [];\r\n\r\n                const siteList = siteListMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        outSourceSiteList: siteList,\r\n                        loading: false,\r\n                        openModal: true,\r\n                        outsourcetest: true,\r\n                        outSourceSiteData: inputParam.inputData,\r\n                        screenName: inputParam.screenName,\r\n                        parentPopUpSize: \"lg\"\r\n\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                    //toast.error(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function getOutSourceSiteAndTest(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/externalorder/getOutSourceSiteAndTest\", { ...inputParam.inputData })\r\n            .then(response => {\r\n                //console.log(\"response if loop\");\r\n                const siteListMap = constructOptionList(response.data.Site || [], 'nsitecode', 'ssitename', undefined, undefined, undefined,\r\n                    'ndefaultstatus') || [];\r\n                // const testListMap = constructOptionList(response.data.Test || [], 'ntransactiontestcode', 'stestsynonym', undefined, undefined, undefined,\r\n                // 'ndefaultstatus') || [];\r\n\r\n                const selectedRecord = [];\r\n                selectedRecord[\"ssampleid\"] = inputParam.inputData.registrationtest.ssamplearno;\r\n                selectedRecord[\"doutsourcedate\"] = new Date();\r\n                const siteList = siteListMap.get(\"OptionList\");\r\n                const str = response.data.regDate;\r\n\r\n                const date = new Date(str);\r\n                // const testList = testListMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        outSourceSiteList: siteList,\r\n                        outSourceTestList: response.data.Test,//testList,\r\n                        regDate: date.toDateString(),\r\n                        loading: false,\r\n                        openModal: true,\r\n                        outsourcetest: true,\r\n                        outSourceSiteData: inputParam.inputData,\r\n                        screenName: inputParam.screenName,\r\n                        parentPopUpSize: \"lg\",\r\n                        selectedRecord\r\n\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                    //toast.error(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function outsourceTest(inputData, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        //console.log(\"inputData:\", inputData);\r\n        rsapi.post(\"/externalorder/outSourceTest\", { ...inputData })\r\n            .then(response => {\r\n                //console.log(\"Test OutSourced\");\r\n                const OutSourcedTestGet = response.data[\"OutSourcedTestGet\"];\r\n                // console.log(\"OutSourcedTestGet:\", OutSourcedTestGet);\r\n\r\n                masterData = {\r\n                    ...masterData,\r\n                    selectedTest: OutSourcedTestGet,\r\n\r\n                    ...masterData.selectedSample.map(statusupdate => {\r\n                        if (statusupdate.npreregno === OutSourcedTestGet[0].npreregno) {\r\n                            // childref.ref.current.value = \"\";\r\n                            statusupdate.ntransactionstatus = 33;\r\n                            statusupdate.stransdisplaystatus = \"Released\";\r\n                        }\r\n                    }),\r\n\r\n                    RegistrationGetTest: replaceUpdatedObject(OutSourcedTestGet, masterData.RegistrationGetTest, \"ntransactiontestcode\"),\r\n                }\r\n\r\n                toast.info(response.data[\"Msg\"]);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        loading: false,\r\n                        openModal: false,\r\n                        outsourcetest: false,\r\n                        masterData\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function outsourceSampleTest(inputData, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        //console.log(\"inputData:\", inputData);\r\n        rsapi.post(\"/externalorder/outSourceSampleTest\", { ...inputData })\r\n            .then(response => {\r\n                //console.log(\"Test OutSourced\");\r\n                const OutSourcedTestGet = response.data[\"OutSourcedTestGet\"];\r\n                // console.log(\"OutSourcedTestGet:\", OutSourcedTestGet);\r\n                const OutSourcedSubSampleGet = response.data[\"OutSourcedSubSampleGet\"];\r\n                const OutsourceDetailsList = response.data[\"OutsourceDetailsList\"];\r\n                masterData = {\r\n                    ...masterData,\r\n                    selectedTest: OutSourcedTestGet, OutsourceDetailsList,\r\n                    //selectedSubSample:OutSourcedSubSampleGet,\r\n                    // ...masterData.selectedSample.map(statusupdate => {\r\n                    //     if (statusupdate.npreregno === OutSourcedTestGet[0].npreregno) {\r\n                    //      // childref.ref.current.value = \"\";\r\n                    //      statusupdate.ntransactionstatus=33;\r\n                    //      statusupdate.stransdisplaystatus=\"Released\";\r\n                    //     }\r\n                    //   }),\r\n\r\n                    RegistrationGetTest: replaceUpdatedObject(OutSourcedTestGet, masterData.RegistrationGetTest, \"ntransactiontestcode\"),\r\n                    RegistrationGetSubSample: replaceUpdatedObject(OutSourcedSubSampleGet, masterData.RegistrationGetSubSample, \"ntransactionsamplecode\"),\r\n                    RegistrationGetSample: replaceUpdatedObject(response.data[\"OutSourcedSampleGet\"], masterData.RegistrationGetSample, \"npreregno\"),\r\n                }\r\n\r\n                toast.info(response.data[\"Msg\"]);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        loading: false,\r\n                        openModal: false,\r\n                        outsourcetest: false,\r\n                        masterData,\r\n                        selectedRecord: {},\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function insertMultipleRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload) {\r\n            requestUrl = rsapi.post(\"/registration/importRegistrationData\", inputParam.formData)\r\n        } else {\r\n            requestUrl = rsapi.post(\"/registration/createRegistration\", inputParam.inputData)\r\n        }\r\n        return requestUrl\r\n            //  rsapi.post(\"/registration/createRegistration\", inputParam.formData)\r\n            .then(response => {\r\n                if (response.data.rtn === \"Success\") {\r\n                    // if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                    //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                    // }\r\n                    let registrationList = [...response.data[\"RegistrationGetSample\"], ...masterData.RegistrationGetSample]\r\n                    let RegistrationGetSample = registrationList;\r\n                    // updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"] , masterData.RegistrationGetSample, 'Sample');\r\n                    let selectedSample = response.data[\"selectedSample\"];\r\n                    let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    let selectedSubSample = RegistrationGetSubSample;\r\n                    RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                    let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                    let regSampleExisted = inputParam.inputData && inputParam.inputData.orderTypeValue === 2 ? true : false;\r\n                    if (inputParam.inputData.nneedsubsample) {\r\n                        RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                        selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                        RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                        selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                    }\r\n                    // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                    if (inputParam.multipleselectionFlag) {\r\n                        selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                        RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                        RegistrationGetTest = masterData.RegistrationGetTest;\r\n                    }\r\n\r\n\r\n                    masterData = {\r\n                        ...masterData, ...response.data,\r\n                        selectedSample, selectedSubSample, selectedTest,\r\n                        RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        ...inputParam.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        selectedRecord: undefined,\r\n                        loading: false,\r\n                        loadPreregister: false,\r\n                        showSample: undefined,\r\n                        openPortal: false,\r\n                        selectedSpec: {},\r\n                        selectComponent: {},\r\n                        SelectedTest: {},\r\n                        selectedComponent: {},\r\n                        Component: [],\r\n                        selectedRecord: {},\r\n                        SelectedTest: [],\r\n                        Test: [],\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList: [],\r\n                        preregConfirmMessage: undefined,\r\n                        regSampleExisted, loadImportFileData: false, loadImportSampleCountData: false\r\n                    }\r\n                    inputParam.postParamList[0]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[1]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                } else {\r\n                    toast.info(response.data.rtn);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false, showConfirmAlert: false, preregConfirmMessage: undefined, loadImportFileData: false, loadImportSampleCountData: false, openModal: false,\r\n                            openPortal: false,\r\n                            loadEsign: false,\r\n                            showConfirmAlert: false,\r\n                        }\r\n                    })\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);             \r\n                if (error.response.status === 500) {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false, preregConfirmMessage: undefined } })\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                preregConfirmMessage: error.response.data.rtn,\r\n                                preregConfirmParam: { inputParam, masterData },\r\n                                loading: false,\r\n                                showSample: undefined,\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        toast.error(error.message);\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                loading: false,\r\n                                showConfirmAlert: false, preregConfirmMessage: undefined\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function insertRegSample(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        //console.log(\"inputData:\", inputData);\r\n        rsapi.post(\"/registration/importRegistrationSample\", inputParam.formData)\r\n            .then(response => {\r\n                if (response.data.rtn === \"Success\") {\r\n                    // if (response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                    //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                    // }\r\n                    // Commented because insertRegSample is for smtl not for portal\r\n                    let registrationList = [...response.data[\"RegistrationGetSample\"], ...masterData.RegistrationGetSample]\r\n                    let RegistrationGetSample = registrationList;\r\n                    // updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"] , masterData.RegistrationGetSample, 'Sample');\r\n                    let selectedSample = response.data[\"selectedSample\"];\r\n                    let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    let selectedSubSample = RegistrationGetSubSample;\r\n                    RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                    let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                    let regSampleExisted = inputParam.inputData && inputParam.inputData.orderTypeValue === 2 ? true : false;\r\n                    if (inputParam.inputData.nneedsubsample) {\r\n                        RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                        selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                        RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                        selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                    }\r\n                    // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                    if (inputParam.multipleselectionFlag) {\r\n                        selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                        RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                        RegistrationGetTest = masterData.RegistrationGetTest;\r\n                    }\r\n\r\n\r\n                    masterData = {\r\n                        ...masterData, ...response.data,\r\n                        selectedSample, selectedSubSample, selectedTest,\r\n                        RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        ...inputParam.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        selectedRecord: undefined,\r\n                        loading: false,\r\n                        loadPreregister: false,\r\n                        showSample: undefined,\r\n                        openPortal: false,\r\n                        selectedSpec: {},\r\n                        selectComponent: {},\r\n                        SelectedTest: {},\r\n                        selectedComponent: {},\r\n                        Component: [],\r\n                        selectedRecord: {},\r\n                        SelectedTest: [],\r\n                        Test: [],\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList: [],\r\n                        preregConfirmMessage: undefined,\r\n                        regSampleExisted, loadImportFileData: false, loadImportSampleCountData: false\r\n                    }\r\n                    inputParam.postParamList[0]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[1]['clearFilter'] = 'yes';\r\n                    inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                } else {\r\n                    toast.info(response.data.rtn);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false,\r\n                            //showConfirmAlert: false, \r\n                            // preregConfirmMessage: undefined,\r\n                            //loadImportFileData:false,\r\n                            //loadImportSampleCountData:false, \r\n                            openModal: false,\r\n                            // openPortal:false,\r\n                            loadEsign: false,\r\n                            //showConfirmAlert: false,\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getExternalOrderTypeForMapping(inputParem) {\r\n    return function (dispatch) {\r\n        let masterData = inputParem.inputParam.masterData;\r\n        let selectedSample = {};\r\n        if (masterData[\"selectedSample\"].length > 1) {\r\n            inputParem.masterData.selectedSample.map(x => {\r\n                if (x.npreregno === inputParem.inputParam[\"subSample\"].npreregno) {\r\n                    selectedSample = x;\r\n                }\r\n            });\r\n\r\n        } else {\r\n            selectedSample = masterData.selectedSample[0];\r\n        }\r\n        if (selectedSample && selectedSample.orderTypeValue === orderType.MANUAL) {\r\n\r\n            if (inputParem.inputParam.subSample.nordertypecode === orderType.MANUAL && inputParem.inputParam.subSample.ntransactionstatus !== transactionStatus.RELEASED\r\n                && inputParem.inputParam.subSample.ntransactionstatus !== transactionStatus.REJECT\r\n                && inputParem.inputParam.subSample.ntransactionstatus !== transactionStatus.CANCELLED) {\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"/registration/getExternalOrderForMapping\", inputParem)\r\n                    .then(response => {\r\n                        const orderListMap = constructOptionList(response.data.externalOrderList || [], \"nexternalordersamplecode\",\r\n                            \"sexternalsampleid\", \"nsorter\", \"ascending\", false);\r\n                        const orderList = orderListMap.get(\"OptionList\")\r\n                        if (masterData[\"selectedSubSample\"].length > 1) {\r\n                            masterData[\"selectedSubSample\"] = [];\r\n                            masterData[\"selectedSubSample\"].push(inputParem.inputParam[\"subSample\"]);\r\n                        }\r\n                        // if (masterData[\"selectedSample\"].length > 1) {\r\n                        //     inputParem.masterData.selectedSample.map(x => {\r\n                        //         if(x.npreregno === inputParem.inputParam[\"subSample\"].npreregno)\r\n                        //         {\r\n                        //             selectedSample = x;\r\n                        //         }\r\n                        //     });\r\n\r\n                        // } else {\r\n                        //     selectedSample = masterData.selectedSample[0];\r\n                        // }\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                orderList, orderDetails: { ...inputParem.inputParam, selectedSample: selectedSample },\r\n                                masterData: masterData, loading: false, showFilter: false, MappingFields: true, showQRCode: false,\r\n                                openChildModal: true, selectedDetailField: {}, selectedRecord: {}\r\n                            }\r\n                        });\r\n\r\n                    })\r\n                    .catch(error => {\r\n                        toast.error(error.message);\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    })\r\n            } else {\r\n                if (inputParem.inputParam.subSample.ntransactionstatus === transactionStatus.RELEASED) {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_RELEASEDSAMPLESCONNOTBEMAPPED\" }));\r\n                } else if (inputParem.inputParam.subSample.ntransactionstatus === transactionStatus.REJECT) {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_REJECTEDSAMPLESCONNOTBEMAPPED\" }));\r\n                } else if (inputParem.inputParam.subSample.ntransactionstatus === transactionStatus.CANCELLED) {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_CANCELLEDSAMPLESCONNOTBEMAPPED\" }));\r\n                } else {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_ALREADYEXTERNALMAPPED\" }));\r\n                }\r\n            }\r\n        } else {\r\n            toast.info(intl.formatMessage({ id: \"IDS_SELECTMANUALORDER\" }));\r\n        }\r\n    }\r\n}\r\nexport function getExternalOrderForMapping(inputParem) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getExternalOrderForMapping\", inputParem)\r\n            .then(response => {\r\n                const orderListMap = constructOptionList(response.data.externalOrderList || [], \"nexternalordersamplecode\",\r\n                    \"sexternalsampleid\", \"nsorter\", \"ascending\", false);\r\n                const orderList = orderListMap.get(\"OptionList\")\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        orderList, selectedRecord: inputParem.selectedRecord,\r\n                        masterData: inputParem.masterData, loading: false, showFilter: false, MappingFields: true, showQRCode: false,\r\n                        openChildModal: true, selectedDetailField: {}\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n\r\n    }\r\n}\r\nexport function orderMapping(inputParem) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/orderMapping\", inputParem.inputData)\r\n            .then(response => {\r\n                // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParem));\r\n                // }\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSample\"], inputParem.masterData.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], inputParem.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], inputParem.masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                let masterData = {\r\n                    ...inputParem.masterData,\r\n                    selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], inputParem.masterData.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], inputParem.masterData.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], inputParem.masterData.selectedTest, \"ntransactiontestcode\"),\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: masterData,\r\n                        loading: false, showFilter: false, openChildModal: false, showQRCode: false, selectedDetailField: undefined,\r\n                        orderList: []\r\n                    }\r\n                });\r\n                if (response.data.rtn === \"Success\") {\r\n                    toast.info(intl.formatMessage({ id: \"IDS_EXTERNALSAMPLEMAPPEDSUCCESSFULLY\" }));\r\n                }\r\n\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function orderRecords(inputData) {\r\n    return function (dispatch) {\r\n        rsapi.post(\"/externalorder/getExternalOrderType\", inputData)\r\n            .then(response => {\r\n                let selectedRecord = { ...inputData.selectedRecord }\r\n                let externalOrderType = [];\r\n                response.data.ExternalOrderType.map(item => item.nexternalordertypecode !== -1 && externalOrderType.push(item));\r\n                let externalOrderTypeMap = constructOptionList(externalOrderType || [], \"nexternalordertypecode\",\r\n                    \"sexternalordertypename\", \"nexternalordertypecode\", \"descending\", false);\r\n                const externalOrderTypeList = externalOrderTypeMap.get(\"OptionList\")\r\n                // let selectedExternalOrderType = externalOrderTypeList[0];\r\n                // selectedRecord[\"selectedExternalOrderType\"] = selectedExternalOrderType;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ncontrolcode: inputData.CancelExternalOrderSampleId,\r\n                        operation: inputData.operation,\r\n                        loadPrinter: false,\r\n                        openModal: true,\r\n                        parentPopUpSize: 'xl',\r\n                        screenName: inputData.screenName,\r\n                        loading: false,\r\n                        masterData: inputData.masterData,\r\n                        externalOrderTypeList,\r\n                        // selectedRecord\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n//ALPD-3615--Start\r\nexport const getAdhocTest = (inputParam, masterData, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        const { userInfo } = { ...inputParam };\r\n        let ntransactionsamplecode = -1;\r\n        let requestUrl = '';\r\n\r\n        if (masterData && masterData.RealRegSubTypeValue.nneedsubsample) {\r\n            if (masterData[\"selectedSubSample\"].length > 1 ||\r\n                masterData[\"selectedSubSample\"]\r\n                    .findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"sampleadhoctest\"][inputParam.primaryKeyName])\r\n                === -1) {\r\n                inputParam.editRegParam[\"getSubSampleChildDetail\"] = true;\r\n            }\r\n            masterData[\"selectedSubSample\"] = [];\r\n            masterData[\"selectedSubSample\"].push(inputParam[\"sampleadhoctest\"]);\r\n            const selectedSpec = getSameRecordFromTwoArrays(masterData.selectedSample, masterData.selectedSubSample, \"npreregno\");\r\n            inputParam.sampleadhoctest['nallottedspeccode'] = selectedSpec[0].nallottedspeccode;\r\n            inputParam.sampleadhoctest['sspecname'] = selectedSpec[0].sspecname;\r\n            inputParam.editRegParam[\"npreregno\"] = inputParam[\"sampleadhoctest\"][\"npreregno\"];\r\n            inputParam.editRegParam[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT;\r\n            inputParam.editRegParam[\"nfilterstatus\"] = inputParam[\"sampleadhoctest\"][\"ntransactionstatus\"];\r\n            inputParam.editRegParam[\"napprovalconfigcode\"] = inputParam[\"sampleadhoctest\"][\"napprovalconfigcode\"];\r\n            ntransactionsamplecode = inputParam.sampleadhoctest[inputParam.primaryKeyName];\r\n            inputParam.editRegParam['nallottedspeccode'] = selectedSpec[0].nallottedspeccode;\r\n        }\r\n        else {\r\n            if (masterData[\"selectedSample\"].length > 1 ||\r\n                masterData[\"selectedSample\"]\r\n                    .findIndex(x => x[inputParam.primaryKeyName] === inputParam[\"sampleadhoctest\"][inputParam.primaryKeyName])\r\n                === -1) {\r\n                inputParam.editRegParam[\"getSampleChildDetail\"] = true;\r\n            }\r\n            masterData[\"selectedSample\"] = [];\r\n            masterData[\"selectedSample\"].push(inputParam[\"sampleadhoctest\"]);\r\n        }\r\n        const npreregno = inputParam[\"sampleadhoctest\"].npreregno;\r\n        if (inputParam[\"sampleadhoctest\"] && inputParam[\"sampleadhoctest\"].ntransactionstatus !== transactionStatus.REJECT && inputParam[\"sampleadhoctest\"] && inputParam[\"sampleadhoctest\"].ntransactionstatus !== transactionStatus.CANCELLED) {\r\n            if (inputParam[\"sampleadhoctest\"] && inputParam[\"sampleadhoctest\"].ntransactionstatus !== transactionStatus.RELEASED) {\r\n\r\n\r\n                inputParam[\"nallottedspeccode\"] = inputParam[\"sampleadhoctest\"][\"nallottedspeccode\"]\r\n                dispatch(initRequest(true));\r\n                if (masterData && masterData.RealRegSubTypeValue.nneedsubsample) {\r\n                    requestUrl = rsapi.post(\"/registration/getAdhocTest\", {\r\n                        ...inputParam.editRegParam, ntransactionsamplecode,\r\n                        UserInfo: userInfo\r\n                    })\r\n                } else {\r\n                    requestUrl = rsapi.post(\"/registration/getAdhocTest\", {\r\n                        ...inputParam.editRegParam, UserInfo: userInfo, npreregno, nallottedspeccode: inputParam.sampleadhoctest.nallottedspeccode || -1\r\n                    })\r\n                }\r\n                return requestUrl\r\n\r\n                    .then(response => {\r\n                        let testData = [];\r\n                        const TestDataMap = constructOptionList(response.data['AdhocTest'] || [], \"ntestcode\",\r\n                            \"stestsynonym\", undefined, undefined, true);\r\n                        testData = TestDataMap.get(\"OptionList\");\r\n                        let selectedRecord = {};\r\n                        selectedRecord['visibleadhoctest'] = transactionStatus.NO;\r\n                        selectedRecord['specName'] = inputParam.sampleadhoctest['sspecname'];\r\n                        if (masterData && masterData.RealRegSubTypeValue.nneedsubsample) {\r\n                            if (inputParam.editRegParam[\"getSubSampleChildDetail\"] === true) {\r\n                                masterData = { ...masterData, ...response.data[\"SubSampleChildDetail\"] };\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\r\n                                masterData = sortData({ ...masterData, ...response.data[\"SampleChildDetail\"] })\r\n                            }\r\n                        }\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: masterData,\r\n                                availableAdhocTest: testData,\r\n                                loadAdhocTest: true,\r\n                                loading: false, ncontrolCode,\r\n                                screenName: \"IDS_ADHOCTEST\",\r\n                                operation: \"create\",\r\n                                openModal: true,\r\n                                parentPopUpSize: \"lg\",\r\n                                selectedRecord: selectedRecord,\r\n                                showSample: undefined,\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.info(this.props.formatMessage({ id: error.response.data }));\r\n                        }\r\n                    });\r\n            }\r\n            else {\r\n                toast.info(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORRELEASEDSAMPLES\" }));\r\n                // if (inputParam.addTestParam[\"getSampleChildDetail\"] === true) {\r\n                //     masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\r\n                // }\r\n            }\r\n        }\r\n        else {\r\n            toast.info(intl.formatMessage({ id: \"IDS_SAMPLEISREJECTEDORCANCELLED\" }));\r\n            // if (inputParam.editRegParam[\"getSampleChildDetail\"] === true) {\r\n            //     masterData = sortData({ ...masterData, ...response[1].data[\"SampleChildDetail\"] })\r\n            // }\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\nexport const createAdhocTest = (inputParam, masterData, modalName) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData })\r\n            .then(response => {\r\n                let RegistrationGetTest = updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"], response.data[\"RegistrationGetTest\"]);\r\n                //let RegistrationGetSubSample = updatedObjectWithNewElement(masterData[\"RegistrationGetSubSample\"], response.data[\"RegistrationGetSubSample\"]);\r\n\r\n                masterData = {\r\n                    ...masterData,\r\n                    RegistrationGetTest: sortData(RegistrationGetTest, \"descending\", \"ntransactiontestcode\"),\r\n                    RegistrationGetSubSample: sortData(response.data[\"RegistrationGetSubSample\"], \"descending\", \"ntransactionsamplecode\"),\r\n                    selectedTest: response.data[\"RegistrationGetTest\"],\r\n                    //  selectedSubSample: response.data[\"RegistrationGetSubSample\"],\r\n                    selectedSubSample: response.data[\"selectedSubSample\"],\r\n                    RegistrationParameter: response.data.RegistrationParameter,\r\n                    RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, masterData.RegistrationGetSample, 'npreregno')\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    [modalName]: false,\r\n                    loading: false,\r\n                    loadChildTest: false,\r\n                    showSample: undefined,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    selectedRecord: {},\r\n                    showConfirmAlert: false,\r\n                    createTestConfirmMessage: undefined,\r\n                    //ALPD-4225--Vignesh R(24-05-2024)--when search the additional  filter the adhoc test popup are showing in sample reg screen.\r\n                    loadAdhocTest: false\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no';\r\n                inputParam.postParamList[1]['clearFilter'] = 'no';\r\n                inputParam.postParamList[2]['clearFilter'] = 'yes';\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n\r\n            })\r\n            .catch(error => {\r\n\r\n                if (error.response.status === 500) {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, createTestConfirmMessage: undefined } })\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    if (error.response.data.NeedConfirmAlert) {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                showConfirmAlert: true,\r\n                                createTestConfirmMessage: error.response.data.rtn,\r\n                                createTestConfirmParam: { inputParam, masterData, modalName },\r\n                                loading: false,\r\n                                loadChildTest: false,\r\n                                showSample: undefined,\r\n                                loadAdhocTest:  inputParam.inputData.loadAdhocTest\r\n                                //openModal: false,\r\n                                //selectedRecord: {}\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                [modalName]: false,\r\n                                loading: false,\r\n                                loadChildTest: false,\r\n                                showSample: undefined,\r\n                                openModal: false,\r\n                                selectedRecord: {},\r\n                                createTestConfirmMessage: undefined,\r\n                                loadAdhocTest: false,\r\n                                loadEsign: false,\r\n\r\n\r\n                            }\r\n                        });\r\n                        toast.info(error.response.data.rtn);\r\n                    }\r\n                }\r\n            });\r\n    }\r\n}\r\n//ALPD-3615--End\r\n\r\nexport const copySampleService = (inputData, masterData) => {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/copySample\", inputData)\r\n            .then(response => {\r\n                // masterData = {\r\n                //     ...masterData,\r\n                //     ...response.data\r\n                // };\r\n                if (response.data.rtn === \"Success\") {\r\n                    // if (response.data[\"isPortalData\"] && response.data[\"PortalStatus\"] && response.data[\"PortalStatus\"].length > 0) {\r\n                    //     dispatch(UpdateExternalOrderStatus(response.data[\"PortalStatus\"], inputParam));\r\n                    // }\r\n\r\n                    let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"RegistrationGetSample\"], masterData.RegistrationGetSample);\r\n                    let selectedSample = response.data[\"selectedSample\"];\r\n                    let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                    let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                    let selectedSubSample = RegistrationGetSubSample;\r\n                    RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                    let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                    let regSampleExisted = inputData && inputData.orderTypeValue === 2 ? true : false;\r\n                    if (inputData.nneedsubsample) {\r\n                        RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                        selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                        RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                        selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                    }\r\n                    // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                    if (inputData.multipleselectionFlag) {\r\n                        selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                        updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                        RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                        RegistrationGetTest = masterData.RegistrationGetTest;\r\n                    }\r\n\r\n                    masterData = {\r\n                        ...masterData, ...response.data,\r\n                        selectedSample, selectedSubSample, selectedTest,\r\n                        RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        //...inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        selectedRecord: undefined,\r\n                        loading: false,\r\n                        loadPreregister: false,\r\n                        showSample: undefined,\r\n                        openPortal: false,\r\n                        selectedSpec: {},\r\n                        selectComponent: {},\r\n                        SelectedTest: {},\r\n                        selectedComponent: {},\r\n                        Component: [],\r\n                        selectedRecord: {},\r\n                        SelectedTest: [],\r\n                        Test: [],\r\n                        selectedComponent: {},\r\n                        subSampleDataGridList: [],\r\n                        preregConfirmMessage: undefined,\r\n                        regSampleExisted, loadImportFileData: false, loadImportSampleCountData: false,\r\n                        skip: 0,\r\n                        subsampleskip: 0,\r\n                        testskip: 0,\r\n                        isDynamicViewSlideOut: false\r\n                    }\r\n                    let postParamList = [];\r\n                    dispatch(postCRUDOrganiseTransSearch(postParamList, respObject))\r\n                } else {\r\n                    toast.warn(response.data.rtn);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false, preregConfirmMessage: undefined } })\r\n                }\r\n\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}