{"ast":null,"code":"import _toConsumableArray from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{toast}from'react-toastify';import rsapi from'../rsapi';import{initRequest,updateStore}from'./LoginAction';import{DEFAULT_RETURN,REQUEST_FAILURE}from'./LoginTypes';import{sortData,searchData,searchJsonData,replaceUpdatedObject,constructOptionList,rearrangeDateFormat,Lims_JSON_stringify}from'../components/CommonScript';import{intl}from'../components/App';import{selectedDashBoardView}from'./DashBoardTypeAction';import Axios from\"axios\";import{REPORTTYPE,designComponents,transactionStatus}from'../components/Enumeration';import ConfirmMessage from'../components/confirm-alert/confirm-message.component';import{viewReportDetailWithParametersReports}from'./ReportDesignerAction';// import { getValidComponent } from '../components/droparea/helpers';\n//import { Engine } from 'json-rules-engine';\n//import employee from '../rules/Employee-Salary.json';\nexport var callService=function callService(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(inputParam.classUrl+\"/get\"+inputParam.methodUrl,inputParam.inputData).then(function(response){// console.log(\"res:\", response);\n///Start of Rule Engine code///////////////////////\n// const decisions1 = [\n//   {\n//       \"conditions\": {\n//           \"all\": [\n//               {\n//                   \"fact\": \"Designation\",\n//                   \"operator\": \"equal\",\n//                   \"value\": \"Manager\"\n//               },\n//               {\n//                   \"fact\": \"Experience\",\n//                   \"operator\": \"greaterThan\",\n//                   \"value\": 10\n//               }\n//           ]\n//       },\n//       \"event\": {\n//           \"type\": \"RS.1500000\",\n//           \"params\": {message: 'Your Salary is 1500000/annum!'}\n//       }\n//   }\n// ];\n// console.log(\"decisions:\",decisions1);  \n// const inputs1 = {Designation: 'Manager', Experience: 9 };\n// const engine = new Engine(employee.decisions);   \n// engine.run(inputs1)\n// .then(results => {       \n//   console.log(\"Rule output:\", results.events);\n//   if ( results.events.length > 0){\n//     const events = results.events;\n//     events.map(event => console.log(\"Message:\",event.params.message)); \n//     rsapi.post(\"section/getSection\" , inputParam.inputData)\n//     .then(response => {\n//       console.log(\"data:\", response);\n//       let data = response.data;\n//       sortData(data);\n//       const updateInfo = {\n//         typeName: DEFAULT_RETURN,\n//         data: { masterData: [], organisation: undefined, }\n//       }\n//       dispatch(updateStore(updateInfo))\n//       dispatch({\n//         type: DEFAULT_RETURN,\n//         payload: {\n//           masterData: data,\n//           activeTestTab: data.activeTestTab,\n//           activeTestKey: data.activeTestKey,\n//           activeBCTab: data.activeBCTab,\n//           inputParam: inputParam,\n//           masterStatus: \"\",\n//           userInfo: inputParam.inputData.userinfo,\n//           loading: false, selectedId: null, selectedRecord: {},\n//           dataState: undefined,\n//           organisation: {\n//             selectedNode: data.SelectedNode, selectedNodeName: data.SelectedNodeName,\n//             primaryKeyValue: data.AddedChildPrimaryKey\n//           },\n//           displayName: inputParam.displayName,\n//           reportFilePath: undefined\n//         }\n//       })\n//     })\n//     .catch(error => {\n//       if (error.response === undefined && error === \"Network Error\") {\n//         dispatch({\n//           type: REQUEST_FAILURE,\n//           payload: {\n//             error: \"Network Error\",\n//             loading: false,\n//           }\n//         });\n//       } else if (error.response.status === 417) {\n//         toast.warning(error.response.data);\n//         dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } });\n//       } else {\n//         dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } })\n//       }\n//     })\n//   }\n//   else{\n//     console.log(\"Message:\",\"Rules Failed\");\n//     dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } });\n//   }         \n// })\n///End of Rule Engine code///////////////////////\n////uncomment below for Orginial Source start////////////////////\nif(response.data[\"Success\"]){toast.warn(response.data.Success);}var data=response.data;sortData(data);var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:[],organisation:undefined}};dispatch(updateStore(updateInfo));if(response.data.rtn==\"IDS_USERNOTINRESULTENTRYFLOW\"){toast.warning(intl.formatMessage({id:\"IDS_USERNOTINRESULTENTRYFLOW\"}));}dispatch({type:DEFAULT_RETURN,payload:{openExcelModal:false,masterData:data,activeTestTab:data.activeTestTab,activeTestKey:data.activeTestKey,activeBCTab:data.activeBCTab,inputParam:inputParam,masterStatus:\"\",userInfo:inputParam.inputData.userinfo,loading:false,selectedId:null,selectedRecord:{},dataState:undefined,organisation:{selectedNode:data.SelectedNode,selectedNodeName:data.SelectedNodeName,primaryKeyValue:data.AddedChildPrimaryKey},displayName:inputParam.displayName,reportFilePath:undefined,skip:0,take:undefined,testskip:0,//testtake: 5,\ntesttake:inputParam.inputData.settings?inputParam.inputData.settings[12]:10//  key:inputParam.key!==undefined?inputParam.key:\"\"\n}});///Uncomment till above for original source\n}).catch(function(error){//console.log(\"error:\", error);\nif(error.response===undefined&&error===\"Network Error\"){dispatch({type:REQUEST_FAILURE,payload:{error:\"Network Error\",loading:false}});}else if(error.response!==undefined&&error.response.status===417){toast.warning(error.response.data);dispatch({type:DEFAULT_RETURN,payload:{loading:false,displayName:inputParam.displayName,userInfo:inputParam.inputData.userinfo}});}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false,displayName:inputParam.displayName,userInfo:inputParam.inputData.userinfo}});}});};};//Start- Add /Edit/Delete Master Data\nexport function crudMaster(inputParam,masterData,modalName,defaultInput,ConfirmMessage,clearSelectedRecordField){return function(dispatch){dispatch(initRequest(true));var requestUrl='';if(inputParam.isFileupload&&inputParam.isFileupload!=='undefined'){var formData=inputParam.formData;formData.append(\"userinfo\",JSON.stringify(inputParam.inputData.userinfo));requestUrl=rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,formData);}else{requestUrl=rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,_objectSpread({},inputParam.inputData));}return requestUrl.then(function(response){if(response.status===202){var _objectSpread2;//HttpStatus:Accepted\n//Use this block when u need to display any success message\nvar selectedRecordObj={};if(inputParam.selectedRecord){selectedRecordObj={selectedRecord:inputParam.selectedRecord};}dispatch({type:DEFAULT_RETURN,payload:_objectSpread((_objectSpread2={loadEsign:false},_defineProperty(_objectSpread2,modalName,false),_defineProperty(_objectSpread2,\"isFilterDetail\",false),_defineProperty(_objectSpread2,\"loading\",false),_objectSpread2),selectedRecordObj)});toast.success(response.data);}else if(response.status===208){var _objectSpread3;//HttpStatus:Accepted\n//208-Already Reported\nvar _selectedRecordObj={};if(inputParam.selectedRecord){_selectedRecordObj={selectedRecord:inputParam.selectedRecord};}dispatch({type:DEFAULT_RETURN,payload:_objectSpread((_objectSpread3={loadEsign:false},_defineProperty(_objectSpread3,modalName,false),_defineProperty(_objectSpread3,\"loading\",false),_objectSpread3),_selectedRecordObj)});toast.warn(response.data);}else{var _objectSpread4;var retrievedData=sortData(response.data);if(masterData===undefined||Array.isArray(retrievedData)){masterData=retrievedData;}else{if(!response.data.flag){masterData=_objectSpread(_objectSpread({},masterData),retrievedData);}else{masterData=_objectSpread({},masterData);}if(modalName===\"openModal\"&&inputParam.operation!==\"delete\"&&inputParam.operation!==\"prepare\"&&inputParam.operation!==\"create\"&&inputParam.operation!==\"copy\"){if(inputParam.postParam){if(masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]){var foundIndex=masterData[inputParam.postParam.inputListName].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField];});masterData[inputParam.postParam.inputListName][foundIndex]=masterData[inputParam.postParam.selectedObject];}else{var _foundIndex=masterData[inputParam.postParam.inputListName].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][0][inputParam.postParam.primaryKeyField];});masterData[inputParam.postParam.inputListName][_foundIndex]=masterData[inputParam.postParam.selectedObject][0];}}}else if(modalName===\"openModal\"&&inputParam.operation===\"create\"){if(inputParam.postParam&&inputParam.postParam.isSingleGet){masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]);//masterData[inputParam.postParam.selectedObject] = response.data;\nsortData(masterData);}}else if(modalName===\"openChildModal\"&&inputParam.operation===\"create\"){//searchedData\nif(inputParam.postParam&&inputParam.postParam.isSingleGet){var _foundIndex2=masterData[inputParam.postParam.inputListName].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField];});masterData[inputParam.postParam.inputListName][_foundIndex2]=masterData[inputParam.postParam.selectedObject];if(masterData[\"searchedData\"]!==undefined){var _foundIndex3=masterData[\"searchedData\"].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField];});masterData[\"searchedData\"][_foundIndex3]=masterData[inputParam.postParam.selectedObject];}sortData(masterData);}}else if(modalName===\"openModal\"&&inputParam.operation===\"copy\"){if(inputParam.postParam&&inputParam.postParam.isSingleGet){masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]);masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);}}else if(modalName===\"openModal\"&&(inputParam.operation===\"delete\"||inputParam.operation===\"prepare\")){if(inputParam.postParam&&inputParam.postParam.isSingleGet){if(inputParam.postParam.task===\"cancel\"){var _foundIndex4=masterData[inputParam.postParam.inputListName].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField];});masterData[inputParam.postParam.inputListName][_foundIndex4]=masterData[inputParam.postParam.selectedObject];}else{var list=masterData[inputParam.postParam.inputListName].filter(function(item){return item[inputParam.postParam.primaryKeyField]!==inputParam.postParam.primaryKeyValue;});masterData[inputParam.postParam.inputListName]=list;// const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\n//   x => x[inputParam.postParam.primaryKeyField] === inputParam.postParam.primaryKeyField\n// );\n// masterData[inputParam.postParam.inputListName].splice(foundIndex, 1)         \n}response.data.masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);}}}// (masterData);\n//let openModal = false;\nvar openModal=masterData.flag&&masterData.flag==='true'?true:false;// let openChildModal= false;\nvar selectedRecord={};var activeSampleTab=inputParam.activeSampleTab?{activeSampleTab:inputParam.activeSampleTab}:'';var activeTestKey=inputParam.activeTestKey?{activeTestKey:inputParam.activeTestKey}:'';var showSample=inputParam.showSample?inputParam.showSample:'';var respObject=_objectSpread(_objectSpread(_objectSpread((_objectSpread4={masterData:masterData,inputParam:inputParam,modalName:modalName,//   openChildModal,\n//modalName:undefined,\n//ATE234 Janakumar ALPD-5589,ALPD-5436 Test approval---> When using the save filter button, 500 occurs in Specific scenario Release & Report -> Edit Report Template Slide out issues.\n//isFilterDetail is mainly use in the transaction save filter in all screen.\nisFilterDetail:false},_defineProperty(_objectSpread4,modalName,openModal),_defineProperty(_objectSpread4,\"operation\",inputParam.operation),_defineProperty(_objectSpread4,\"masterStatus\",\"\"),_defineProperty(_objectSpread4,\"errorCode\",undefined),_defineProperty(_objectSpread4,\"loadEsign\",false),_defineProperty(_objectSpread4,\"showEsign\",false),_defineProperty(_objectSpread4,\"selectedRecord\",selectedRecord),_defineProperty(_objectSpread4,\"loading\",false),_defineProperty(_objectSpread4,\"dataState\",inputParam.dataState),_defineProperty(_objectSpread4,\"selectedId\",inputParam.selectedId),_objectSpread4),activeSampleTab),activeTestKey),{},{showSample:showSample,design:[],//organisation: undefined\norganisation:inputParam.nextNode?{selectedNode:inputParam.nextNode,selectedNodeName:masterData.SelectedNodeName,primaryKeyValue:masterData.AddedChildPrimaryKey}:undefined,showConfirmAlert:inputParam.showConfirmAlert,loadPoolSource:inputParam.loadPoolSource,skip:inputParam.skip||undefined,take:inputParam.take||undefined,openPortal:false});if(inputParam.operation===\"create\"||inputParam.operation===\"copy\"){var _objectSpread5;if(inputParam.saveType===2){openModal=true;//ALPD-5063 added by Dhanushya RI,Enable save and continue option in Type3 component based screen\nObject.keys(inputParam.selectedRecord).map(function(item){clearSelectedRecordField.map(function(data){if(data.controlType===\"checkbox\"?item===data.controlName||item===data.dataField:item===data.dataField){selectedRecord=inputParam.selectedRecord;selectedRecord[item]=data.preSetValue?data.preSetValue:\"\";}//Added by sonia on 04th Mar 2025 for  jira id:ALPD-5504\nelse{selectedRecord=inputParam.selectedRecord;}});});// selectedRecord = defaultInput;\n}respObject=_objectSpread(_objectSpread({},respObject),{},(_objectSpread5={},_defineProperty(_objectSpread5,modalName,openModal),_defineProperty(_objectSpread5,\"selectedRecord\",selectedRecord),_objectSpread5));}if((modalName===\"openModal\"||modalName===\"openChildModal\")&&Object.keys(masterData).indexOf(\"searchedData\")!==-1&&masterData[\"searchedData\"]!==undefined){dispatch(postCRUDOrganiseSearch(inputParam.postParam,respObject));}else{//ALPD-5540--Added by vignesh R(07-03-2025)--Supplier-->When click the logout button, blank page occurs in specific scenario\nif(inputParam.saveType===2){dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},_defineProperty({},modalName,openModal))});}else{dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},_defineProperty({},modalName,undefined))});}}}}).catch(function(response){console.log(\"error:\",response);if(response.response.status===500){dispatch({type:REQUEST_FAILURE,payload:{error:response.message,loading:false// openPortal:this.props.Login.openPortal,\n//openModal:inputParam.openPortal?false:true\n}});}else if(response.response.status===409&&response.response.data.flag){dispatch({type:REQUEST_FAILURE,payload:{loading:false}});var inputData=_objectSpread(_objectSpread({},inputParam.inputData),{},{DeleteExistingRecord:true});ConfirmMessage.confirm(\"deleteMessage\",intl.formatMessage({id:\"IDS_INFOMATION\"}),intl.formatMessage({id:\"IDS_REMOVEEXISTINGCONFIGUARTION\"}),intl.formatMessage({id:\"IDS_OK\"}),intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return dispatch(crudMaster(inputParam=_objectSpread(_objectSpread({},inputParam),{},{inputData:inputData}),masterData,modalName,defaultInput,ConfirmMessage));});}else{var obj={};if(inputParam.openPortal===true){obj={openModal:false};}var selectedRecordObj={};if(inputParam.selectedRecord){selectedRecordObj={selectedRecord:inputParam.selectedRecord};}if(inputParam.operation===\"delete\"||inputParam.operation===\"prepare\"||inputParam.operation===\"receive\"||inputParam.operation==='approve'||inputParam.operation==='Approve'||inputParam.operation===\"correction\"||inputParam.operation===\"complete\"||inputParam.operation===\"dynamic\"||inputParam.operation===\"setDefault\"||inputParam.operation===\"reset\"||inputParam.operation===\"retire\"||inputParam.operation===\"xml\"||inputParam.operation==='blackList'||inputParam.operation==='attendance'||inputParam.operation==='certified'||inputParam.operation==='competent'||inputParam.operation===\"invite\"||inputParam.operation===\"cancel\"||inputParam.operation===\"cancel\"||inputParam.operation===\"conduct\"||inputParam.operation===\"attend\"||inputParam.operation===\"certify\"||inputParam.operation===\"Competent\"||inputParam.operation===\"Create\"||inputParam.operation===\"check\"){var _objectSpread8;dispatch({type:DEFAULT_RETURN,payload:_objectSpread((_objectSpread8={masterStatus:response.response.data,errorCode:response.response.status,loadEsign:false},_defineProperty(_objectSpread8,modalName,false),_defineProperty(_objectSpread8,\"loading\",false),_defineProperty(_objectSpread8,\"openPortal\",false),_objectSpread8),selectedRecordObj)});}else{// console.log('dispatch',obj)\nif(inputParam.selectedRecord){selectedRecordObj={selectedRecord:inputParam.selectedRecord};}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({masterStatus:response.response.data,errorCode:response.response.status,loadEsign:false,loading:false},obj),selectedRecordObj)});}}});};}export var validateEsignCredential=function validateEsignCredential(inputParam,modalName,confirmMessage){return function(dispatch){dispatch(initRequest(true));if(inputParam&&inputParam.inputData&&inputParam.inputData.userinfo){inputParam.inputData[\"userinfo\"]=_objectSpread(_objectSpread({},inputParam.inputData.userinfo),{},{sformname:Lims_JSON_stringify(inputParam.inputData.userinfo.sformname),smodulename:Lims_JSON_stringify(inputParam.inputData.userinfo.smodulename)});}return rsapi.post(\"login/validateEsignCredential\",inputParam.inputData).then(function(response){if(response.data===\"Success\"){var methodUrl=inputParam[\"screenData\"][\"inputParam\"][\"methodUrl\"];inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"]=inputParam.inputData.userinfo;if(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]){delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];if(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]){delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];}// ALPD-2437 added for Type3 Component. Use selected record to clear esign values\nif(inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"]){delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignreason\"];delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignpassword\"];delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esigncomments\"];delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"agree\"];}}//dispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName,'',confirmMessage))\nif(inputParam[\"screenData\"][\"inputParam\"][\"operation\"]&&inputParam[\"screenData\"][\"inputParam\"][\"operation\"]===\"sync\"){dispatch(syncAction(inputParam[\"screenData\"][\"inputParam\"]));}else{//dispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName))\n//ALPD-5444 Test Group - Copy the spec in test group and do save continue loading issue occurs.\ndispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"],inputParam[\"screenData\"][\"masterData\"],modalName,'',confirmMessage,inputParam[\"screenData\"][\"clearSelectedRecordField\"]));}}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};};export var fetchRecord=function fetchRecord(fetchRecordParam){return function(dispatch){var _rsapi$post;dispatch(initRequest(true));var url=fetchRecordParam.inputParam.classUrl+\"/getActive\"+fetchRecordParam.inputParam.methodUrl+\"ById\";rsapi.post(url,(_rsapi$post={},_defineProperty(_rsapi$post,fetchRecordParam.primaryKeyField,fetchRecordParam.primaryKeyValue),_defineProperty(_rsapi$post,\"userinfo\",fetchRecordParam.userInfo),_rsapi$post)).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:response.data,screenName:fetchRecordParam.screenName,operation:fetchRecordParam.operation,openModal:true,ncontrolCode:fetchRecordParam.ncontrolCode,loading:false,selectedId:fetchRecordParam.primaryKeyValue}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};};export function filterColumnData(filterValue,filterParam,filterOperator){return function(dispatch){var masterData=filterParam.masterData;var primaryKeyValue=0;var searchedData=undefined;if(filterValue===\"\"){if(masterData[filterParam.inputListName]&&masterData[filterParam.inputListName].length>0){// if(filterParam.isjsondata)\n// {\n//    primaryKeyValue = masterData[filterParam.inputListName][0][\"jsondata\"][filterParam.primaryKeyField]\n//  }\n//else\n// {\nprimaryKeyValue=masterData[filterParam.inputListName][0][filterParam.primaryKeyField];// }\n}}else{if(filterParam.isjsondata){searchedData=searchJsonData(filterValue,masterData[filterParam.inputListName],filterParam.searchFieldList||[],filterOperator);}else{searchedData=searchData(filterValue,masterData[filterParam.inputListName],filterParam.searchFieldList||[],filterOperator);}if(searchedData.length>0){//  if(filterParam.isjsondata)\n// {\n//  primaryKeyValue = searchedData[0][\"jsondata\"][filterParam.primaryKeyField];\n//  }\n// else{\nprimaryKeyValue=searchedData[0][filterParam.primaryKeyField];//  }\n}}if(primaryKeyValue!==0){dispatch(initRequest(true));return rsapi.post(filterParam.fetchUrl,_objectSpread(_objectSpread({},filterParam.fecthInputObject),{},_defineProperty({},filterParam.primaryKeyField,primaryKeyValue))).then(function(response){masterData[\"searchedData\"]=searchedData;masterData=_objectSpread(_objectSpread({},masterData),response.data);if(filterParam.inputListName===\"DashBoardView\"){dispatch(selectedDashBoardView(response,masterData));}else{if(filterParam.sortField){sortData(masterData,filterParam.sortOrder,filterParam.sortField);}else{sortData(masterData);}dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,skip:0,take:10,selectedId:null}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{masterData[filterParam.selectedObject]=undefined;masterData[\"searchedData\"]=[];Object.keys(masterData).forEach(function(item){if(item!==filterParam.inputListName&&item!==filterParam.selectedObject&&filterParam.unchangeList&&filterParam.unchangeList.indexOf(item)===-1)masterData[item]=[];});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,operation:null,modalName:undefined,loading:false}});}};}export function postCRUDOrganiseSearch(postParam,respObject){return function(dispatch){var masterData=respObject.masterData;if(respObject.inputParam.operation===\"create\"||respObject.inputParam.operation===\"copy\"){if(respObject.modalName===\"openModal\"){if(respObject.inputParam.isChild===undefined){// ALPD-5605 Added by Abdul to handle front end collapse when current becomes null when unmounted\nif(respObject.inputParam.searchRef.current&&respObject.inputParam.searchRef.current.value)// ALPD-5605 End \nrespObject.inputParam.searchRef.current.value=\"\";masterData[\"searchedData\"]=undefined;}}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{masterData:masterData,modalName:undefined})});}else if(respObject.inputParam.operation===\"delete\"||respObject.inputParam.operation===\"prepare\"){if(masterData[\"searchedData\"]!==undefined&&respObject.modalName===\"openModal\"){var temp=masterData[\"searchedData\"];var primaryKeyValue=respObject.masterData[\"searchedData\"][0][postParam.primaryKeyField];if(respObject.inputParam.isChild===undefined){temp=masterData[\"searchedData\"].filter(function(item){return Array.isArray(postParam.primaryKeyValue)?!postParam.primaryKeyValue.includes(item[postParam.primaryKeyField]):item[postParam.primaryKeyField]!==postParam.primaryKeyValue;});primaryKeyValue=temp.length>0?temp[0][postParam.primaryKeyField]:0;}else{primaryKeyValue=masterData[postParam.selectedObject][postParam.primaryKeyField];}masterData[\"searchedData\"]=temp;respObject=_objectSpread(_objectSpread({},respObject),{},{modalName:undefined});if(masterData[\"searchedData\"].length>0){primaryKeyValue=masterData[\"searchedData\"][0][postParam.primaryKeyField];return rsapi.post(postParam.fetchUrl,_objectSpread(_objectSpread({},postParam.fecthInputObject),{},_defineProperty({},postParam.primaryKeyField,primaryKeyValue))).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{masterData:masterData})});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:_objectSpread({},respObject)});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{masterData[postParam.selectedObject]=undefined;masterData[\"searchedData\"]=[];Object.keys(masterData).forEach(function(item){if(item!==postParam.inputListName&&item!==postParam.selectedObject&&postParam.unchangeList&&postParam.unchangeList.indexOf(item)===-1)masterData[item]=masterData&&Array.isArray(masterData[item])?[]:undefined;});dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{masterData:masterData})});}}else{dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{masterData:masterData,modalName:undefined})});}}else if(respObject.inputParam.filtercombochange){respObject=_objectSpread(_objectSpread({},respObject),{},{modalName:undefined});if(masterData[\"searchedData\"]!==undefined){masterData[\"searchedData\"]=undefined;// ALPD-5605 Added by Abdul to handle front end collapse when current becomes null when unmounted\nif(respObject.inputParam.searchRef.current&&respObject.inputParam.searchRef.current.value)// ALPD-5605 End \nrespObject.inputParam.searchRef.current.value=\"\";}var _Map={};if(postParam.selectedComboName!==undefined){_Map=_defineProperty({},postParam.selectedComboName,_defineProperty({},postParam.selectedComboId,postParam.selectedCombo));}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{masterData:masterData},_Map)});}else{respObject=_objectSpread(_objectSpread({},respObject),{},{modalName:undefined});if(masterData[\"searchedData\"]!==undefined){if(masterData[postParam.selectedObject][postParam.primaryKeyField]){var foundIndex=masterData[\"searchedData\"].findIndex(function(x){return x[postParam.primaryKeyField]===masterData[postParam.selectedObject][postParam.primaryKeyField];});masterData[\"searchedData\"][foundIndex]=masterData[postParam.selectedObject];}else{var _foundIndex5=masterData[\"searchedData\"].findIndex(function(x){return x[postParam.primaryKeyField]===masterData[postParam.selectedObject][0][postParam.primaryKeyField];});masterData[\"searchedData\"][_foundIndex5]=masterData[postParam.selectedObject][0];}}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{masterData:masterData})});}};}export var viewAttachment=function viewAttachment(inputParam){return function(dispatch){var inputData=_objectSpread({},inputParam.inputData);if(inputData['selectedRecord']){delete inputData['selectedRecord']['expanded'];}dispatch(initRequest(true));rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});var value=\"\";if(response.data[\"AttachFile\"]){document.getElementById(\"download_data\").setAttribute(\"href\",response.data.FilePath);document.getElementById(\"download_data\").click();}else if(response.data[\"AttachLink\"]){value=response.data[\"AttachLink\"];var win=window.open(value,'_blank');if(win){win.focus();}else{intl.warn('IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE');}}else{if(response.data[\"rtn\"]){toast.warn(intl.formatMessage({id:response.data.rtn}));}}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};export function filterTransactionList(filterValue,filterParam,filteredListName,param){return function(dispatch){var masterData=filterParam.masterData;filteredListName=filteredListName||\"searchedData\";var primaryKeyValue=0;var searchedData=undefined;var selectedData=[];filterParam.childRefs&&filterParam.childRefs.map(function(childref){if(childref.ref!==undefined&&childref.ref.current!==null){childref.ref.current.value=\"\";masterData[childref.childFilteredListName]=undefined;}return null;});if(filterValue===\"\"){if(masterData[filterParam.inputListName]&&masterData[filterParam.inputListName].length>0){primaryKeyValue=masterData[filterParam.inputListName][0][filterParam.primaryKeyField];selectedData.push(masterData[filterParam.inputListName][0]);}}else{if(masterData[filterParam.inputListName]){searchedData=searchData(filterValue,masterData[filterParam.inputListName],filterParam.searchFieldList||[]);}else{searchedData=[];}if(searchedData.length>0){primaryKeyValue=searchedData[0][filterParam.primaryKeyField];selectedData.push(searchedData[0]);}}if(primaryKeyValue!==0&&!filterParam.isService){primaryKeyValue=filterParam.isSingleSelect?primaryKeyValue:String(primaryKeyValue);dispatch(initRequest(true));return rsapi.post(filterParam.fetchUrl,_objectSpread(_objectSpread({},filterParam.fecthInputObject),{},_defineProperty({},filterParam.primaryKeyField,primaryKeyValue))).then(function(response){var dataState={skip:0,take:10};masterData[filteredListName]=searchedData;masterData[filterParam.selectedObject]=selectedData;// ALPD-4130 for Addition Filter Config Data Clear ATE-241\nif(filterParam.primaryKeyField&&filterParam.primaryKeyField===\"npreregno\"){masterData[\"kendoFilterList\"]=undefined;}masterData=_objectSpread(_objectSpread({},masterData),response.data);if(filterParam.isSortable){sortData(masterData[filterParam.sortList],'descending',filterParam.sortValue);}if(filterParam.isMultiSort){filterParam.multiSortData.forEach(function(item){sortData(masterData[item.list],'descending',item.pkey);});}dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,// skip: 0, take: 10, testskip: 0, testtake: 10,dataState \nskip:filterParam.skip,take:filterParam.take,sampleskip:filterParam.sampleskip,sampletake:filterParam.sampletake,subsampleskip:filterParam.subsampleskip,subsampletake:filterParam.subsampletake,testskip:filterParam.testskip,testtake:filterParam.testtake,dataState:dataState// filterColumnActive:true,\n}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{masterData[filterParam.selectedObject]=!filterParam.isService?undefined:searchedData;masterData[filteredListName]=!filterParam.isService?[]:searchedData;filterParam.changeList&&filterParam.changeList.map(function(name){return masterData[name]=[];});param&&param.map(function(item){return masterData[item]=[];});// Object.keys(masterData).forEach(item=> {\n//   if (item !== filterParam.inputListName && item !== filterParam.selectedObject \n//     && filterParam.unchangeList && filterParam.unchangeList.indexOf(item) ===-1)\n//       masterData[item] = [];\n//   })   \ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,operation:null,modalName:undefined,// |ilterColumnActive:true,\nloading:false}});}};}export function postCRUDOrganiseTransSearch(postParamList,respObject){return function(dispatch){var masterData=respObject.masterData;postParamList&&Array.isArray(postParamList)&&postParamList.map(function(postParam,index){if(postParam.clearFilter==='yes'){if(postParam.searchRef.current){postParam.searchRef.current.value=\"\";}masterData[postParam.filteredListName]=undefined;postParam.childRefs&&postParam.childRefs.map(function(childref){if(childref.ref!==undefined&&childref.ref.current!==null){childref.ref.current.value=\"\";masterData[childref.childFilteredListName]=undefined;}return null;});}if(Object.keys(masterData).indexOf(postParam.filteredListName)!==-1&&masterData[postParam.filteredListName]!==undefined){if(postParam.clearFilter==='check'){if(masterData[postParam.filteredListName]!==undefined){var temp=masterData[postParam.filteredListName].filter(function(item){return!Array.isArray(postParam.primaryKeyValue)?postParam.primaryKeyValue:postParam.primaryKeyValue.includes(item[postParam.primaryKeyField]);});masterData[postParam.filteredListName]=temp;if(masterData[postParam.filteredListName].length>0){return rsapi.post(postParam.fetchUrl,_objectSpread(_objectSpread({},postParam.fecthInputObject.fecthInputObject),{},_defineProperty({},postParam.primaryKeyField,String(respObject.masterData[postParam.filteredListName][0][postParam.primaryKeyField])))).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);});}}}else{if(masterData[postParam.filteredListName]!==undefined){masterData[postParam.filteredListName]=replaceUpdatedObject(masterData[postParam.updatedListname],masterData[postParam.filteredListName],postParam.primaryKeyField);}}}return null;});//sortData(masterData);\ndispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{masterData:masterData})});};}export function showUnderDevelopment(){return function(dispatch){toast.info(intl.formatMessage({id:\"IDS_UNDERDEVELOPMENT\"}));};}//Fetch record when clicking add button in Type3Component\n// export function onComboLoad(operation, userInfo, inputParam, ncontrolCode, extractedColumnList,IntegrationSettings) {\n//   return function (dispatch) {\n//     dispatch(initRequest(true));\n//     let urlArray = [];\n//     extractedColumnList.map(item=>{\n//       if(item.elnget){\n//         //urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\n//         urlArray.push(rsapi.post(IntegrationSettings[0].slinkname+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\n//       }\n//       else{\n//         urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { userinfo: userInfo }))\n//       }\n//     }\n//       )\n//           Axios.all(urlArray)\n//               .then(response => {\n//                 let ComboFieldData = [];\n//                 let dataList = [];\n//                     extractedColumnList.map((item, index)=> {\n//                       if(item.ndesigncomponentcode == designComponents.COMBOBOX){\n//                         ComboFieldData = constructOptionList(item.objectValue === null ? response[index].data || [] : response[index].data[item.objectValue], item.foreignDataField,\n//                                 item.dataField, undefined, undefined, undefined);\n//                            dataList[item.dataField] = ComboFieldData.get(\"OptionList\");\n//                       }\n//     extractedColumnList.map(item =>\n//       urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, { userinfo: userInfo }))\n//     )\n//     Axios.all(urlArray)\n//       .then(response => {\n//         let ComboFieldData = [];\n//         let dataList = [];\n//         extractedColumnList.map((item, index) => {\n//           if (item.ndesigncomponentcode == designComponents.COMBOBOX) {\n//             ComboFieldData = constructOptionList(item.objectValue === null ? response[index].data || [] : response[index].data[item.objectValue], item.foreignDataField,\n//               item.dataField, undefined, undefined, undefined);\n//             dataList[item.dataField] = ComboFieldData.get(\"OptionList\");\n//           }\n//         });\n//         dispatch({\n//           type: DEFAULT_RETURN,\n//           payload: {\n//             dataList,\n//             operation,\n//             screenName: inputParam.displayName,\n//             openModal: true,\n//             ncontrolCode, loading: false\n//           }\n//         })\n//       })\n//       .catch(error => {\n//         dispatch(initRequest(false));\n//         if (error.response.status === 500) {\n//           toast.error(error.message);\n//         } else {\n//           toast.warn(intl.formatMessage({\n//             id: error.response.data\n//           }));\n//         }\n//       })\n//   }\n// }\n//Fetch record when clicking add button in Type3Component\nexport function onComboLoad(operation,userInfo,inputParam,ncontrolCode,extractedColumnList,IntegrationSettings){return function(dispatch){dispatch(initRequest(true));var urlArray=[];extractedColumnList.map(function(item){if(item.ndesigncomponentcode!==designComponents.CHECKBOX){if(item.elnget){//urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\nurlArray.push(rsapi.post(IntegrationSettings[0].slinkname+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}));}else{urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl,{userinfo:userInfo}));}}});Axios.all(urlArray).then(function(response){var ComboFieldData=[];var dataList=[];var selectedRecord={};extractedColumnList.map(function(item,index){if(item.ndesigncomponentcode==designComponents.COMBOBOX){ComboFieldData=constructOptionList(item.objectValue===null?response[index].data||[]:response[index].data[item.objectValue],item.foreignDataField,item.dataField,undefined,undefined,undefined);dataList[item.dataField]=ComboFieldData.get(\"OptionList\");}else if(item.ndesigncomponentcode===designComponents.CHECKBOX&&item.defaultvalue){selectedRecord[item.controlName]=transactionStatus.YES;}});dispatch({type:DEFAULT_RETURN,payload:{dataList:dataList,operation:operation,screenName:inputParam.displayName,openModal:true,ncontrolCode:ncontrolCode,loading:false,selectedRecord:selectedRecord}});}).catch(function(error){dispatch(initRequest(false));if(error.response!==undefined&&error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else if(error.response===undefined){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}//Fetch record when clicking edit button in Type3Component\nexport var fetchRecordCombo=function fetchRecordCombo(fetchRecordParam){return function(dispatch){var _rsapi$post2;dispatch(initRequest(true));var urlArray=[];var url=fetchRecordParam.inputParam.classUrl+\"/getActive\"+fetchRecordParam.inputParam.methodUrl+\"ById\";urlArray.push(rsapi.post(url,(_rsapi$post2={},_defineProperty(_rsapi$post2,fetchRecordParam.primaryKeyField,fetchRecordParam.primaryKeyValue),_defineProperty(_rsapi$post2,\"userinfo\",fetchRecordParam.userInfo),_rsapi$post2)));fetchRecordParam.extractedColumnList.map(function(item){if(item.elnget){urlArray.push(rsapi.post(fetchRecordParam.integrationSettings[0].slinkname+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}));}else if(item.classUrl&&item.methodUrl){if(item.parentPrimaryField&&item.parentPrimaryField!==null){var _rsapi$post3;urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl,(_rsapi$post3={},_defineProperty(_rsapi$post3,item.foreignDataField,fetchRecordParam.editRow[item.foreignDataField]),_defineProperty(_rsapi$post3,item.parentPrimaryField,fetchRecordParam.editRow[item.parentPrimaryField]||undefined),_defineProperty(_rsapi$post3,\"userinfo\",fetchRecordParam.userInfo),_rsapi$post3)));}else{var _rsapi$post4;urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl,(_rsapi$post4={},_defineProperty(_rsapi$post4,item.foreignDataField,fetchRecordParam.editRow[item.foreignDataField]),_defineProperty(_rsapi$post4,\"userinfo\",fetchRecordParam.userInfo),_rsapi$post4)));}// urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, {[item.parentPrimaryField]: fetchRecordParam.editRow.nprojecttypecode , \"userinfo\": fetchRecordParam.userInfo}))\n}});Axios.all(urlArray).then(function(response){var ComboFieldData=[];var dataList=[];var selectedRecordData=_objectSpread({},response[0].data);var responseData=_toConsumableArray(response);var extractedColumnData=[];responseData.splice(0,1);fetchRecordParam.extractedColumnList.map(function(item){if(item.ndesigncomponentcode===designComponents.COMBOBOX){extractedColumnData.push(item);if(!item.hideNARecord||selectedRecordData[item.tableDataField]!==-1){selectedRecordData[item.dataField]={value:selectedRecordData[item.foreignDataField],label:selectedRecordData[item.dataField]};}}else if(item.ndesigncomponentcode===designComponents.DATEPICKER){selectedRecordData[item.dataField]=rearrangeDateFormat(fetchRecordParam.userInfo,selectedRecordData[item.dataField]);}});extractedColumnData.map(function(field,index){responseData.map(function(item,indexValue){if(index===indexValue){if(field.classUrl==='limselnusermapping'&&field.methodUrl==='getLimsUsers'||field.classUrl==='limselnsitemapping'&&field.methodUrl==='getLimsSite'){responseData[index].data.push(response[0].data);}ComboFieldData=constructOptionList(field.objectValue===null?responseData[index].data||[]:responseData[index].data[field.objectValue],field.foreignDataField,field.dataField,undefined,undefined,undefined);dataList[field.dataField]=ComboFieldData.get(\"OptionList\");}});});dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecordData,screenName:fetchRecordParam.screenName,operation:fetchRecordParam.operation,openModal:true,ncontrolCode:fetchRecordParam.ncontrolCode,loading:false,selectedId:fetchRecordParam.primaryKeyValue,dataList:dataList}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response!==undefined&&error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else if(error.response===undefined){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};};//Fetch record when clicking edit button in Type3Component\n// export const fetchRecordCombo = (fetchRecordParam) => {\n//   return (dispatch) => {\n//     dispatch(initRequest(true));\n//     let urlArray = [];\n//     const url = fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\";\n//     urlArray.push(rsapi.post(url, { [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue, \"userinfo\": fetchRecordParam.userInfo }));\n//     fetchRecordParam.extractedColumnList.map(item => {\n//       if(item.classUrl && item.methodUrl){\n//         if(item.elnget){\n//           urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\n//         }\n//         else{\n//           urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { \"userinfo\" : fetchRecordParam.userInfo }))\n//         }\n//         //urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { \"userinfo\" : fetchRecordParam.userInfo }))\n//       if (item.classUrl && item.methodUrl) {\n//         urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, { \"userinfo\": fetchRecordParam.userInfo }))\n//       }\n//     });\n//     Axios.all(urlArray)\n//       .then(response => {\n//       fetchRecordParam.extractedColumnList.map((item) => {\n//         if(item.ndesigncomponentcode === designComponents.COMBOBOX){\n//           extractedColumnData.push(item);\n//           selectedRecordData[item.dataField] = {\n//             value:selectedRecordData[item.foreignDataField],\n//             label:selectedRecordData[item.dataField]\n//           }                      \n//         }\n//         else if(item.ndesigncomponentcode === designComponents.DATEPICKER){\n//           selectedRecordData[item.dataField] = rearrangeDateFormat(fetchRecordParam.userInfo, selectedRecordData[item.dataField]);\n//         }\n//       })\n//       extractedColumnData.map((field, index) => {\n//         responseData.map((item, indexValue) => {\n//           if(index === indexValue){\n//             if(field.classUrl==='limselnusermapping'&&field.methodUrl==='getLimsUsers'){\n//             responseData[index].data.push(response[0].data);}\n//             ComboFieldData = constructOptionList(field.objectValue === null ? responseData[index].data || [] : responseData[index].data[field.objectValue], field.foreignDataField,\n//               field.dataField, undefined, undefined, undefined);\n//          dataList[field.dataField] = ComboFieldData.get(\"OptionList\");\n//         let ComboFieldData = [];\n//         let dataList = [];\n//         let selectedRecordData = { ...response[0].data };\n//         let responseData = [...response];\n//         let extractedColumnData = [];\n//         responseData.splice(0, 1);\n//         fetchRecordParam.extractedColumnList.map((item) => {\n//           if (item.ndesigncomponentcode === designComponents.COMBOBOX) {\n//             extractedColumnData.push(item);\n//             selectedRecordData[item.dataField] = {\n//               value: selectedRecordData[item.foreignDataField],\n//               label: selectedRecordData[item.dataField]\n//             }\n//           }\n//           else if (item.ndesigncomponentcode === designComponents.DATEPICKER) {\n//             selectedRecordData[item.dataField] = rearrangeDateFormat(fetchRecordParam.userInfo, selectedRecordData[item.dataField]);\n//           }\n//         })\n//         extractedColumnData.map((field, index) => {\n//           responseData.map((item, indexValue) => {\n//             if (index === indexValue) {\n//               ComboFieldData = constructOptionList(field.objectValue === null ? responseData[index].data || [] : responseData[index].data[field.objectValue], field.foreignDataField,\n//                 field.dataField, undefined, undefined, undefined);\n//               dataList[field.dataField] = ComboFieldData.get(\"OptionList\");\n//             }\n//           })\n//         });\n//         dispatch({\n//           type: DEFAULT_RETURN,\n//           payload: {\n//             selectedRecord: selectedRecordData,\n//             screenName: fetchRecordParam.screenName,\n//             operation: fetchRecordParam.operation,\n//             openModal: true,\n//             ncontrolCode: fetchRecordParam.ncontrolCode,\n//             loading: false,\n//             selectedId: fetchRecordParam.primaryKeyValue,\n//             dataList\n//           }\n//         });\n//       })\n//       .catch(error => {\n//         dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\n//         if (error.response.status === 500) {\n//           toast.error(intl.formatMessage({ id: error.message }));\n//         } else {\n//           toast.warn(intl.formatMessage({ id: error.response.data }));\n//         }\n//       })\n//   }\n// }\nexport function onServiceLoad(userInfo,inputParam,ncontrolCode,comboColumnField,primarykeyvalue,inputData){return function(dispatch){dispatch(initRequest(true));var urlArray=[];comboColumnField.map(function(item){var _rsapi$post5;urlArray.push(rsapi.post(item.classUrl+\"/\"+item.onChangeUrl,(_rsapi$post5={userinfo:userInfo},_defineProperty(_rsapi$post5,item.tableDataField,primarykeyvalue[item.tableDataField]),_defineProperty(_rsapi$post5,\"parentPrimaryField\",inputData.selectedRecord[item.parentPrimaryField]),_rsapi$post5)));}//dependentParentPrimaryField into parentPrimaryField\n);Axios.all(urlArray).then(function(response){var ComboFieldData=[];var dataList=[];var selectedRecord=_objectSpread({},inputData.selectedRecord);comboColumnField.map(function(item,index){if(item.ndesigncomponentcode==designComponents.COMBOBOX){ComboFieldData=constructOptionList(item.childObjectValue===null?response[index].data||[]:response[index].data[item.childObjectValue],item.childPrimaryField,item.childdataField,undefined,undefined,undefined);dataList[item.childdataField]=ComboFieldData.get(\"OptionList\");selectedRecord[item.childdataField]=undefined;}});dataList=_objectSpread(_objectSpread({},inputData.dataList),dataList);dispatch({type:DEFAULT_RETURN,payload:{dataList:dataList,//  operation,\nscreenName:inputParam.displayName,openModal:true,ncontrolCode:ncontrolCode,loading:false,selectedRecord:selectedRecord}});}).catch(function(error){dispatch(initRequest(false));if(error.response.status===500){toast.error(error.message);}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function dynamicFileDownload(filedata){return function(dispatch){if(filedata.viewName==='InfoView'){if(filedata&&filedata[filedata.field[2]+['_ssystemfilename_Sample']]!==undefined&&filedata[filedata.field[2]]!==\"\"){var inputParam={inputData:{viewFile:{ssystemfilename:filedata[filedata.field[2]+['_ssystemfilename_Sample']],npreregno:filedata.npreregno,sarno:filedata.sarno,sfilename:filedata[filedata.field[2]]},userinfo:filedata.userInfo},classUrl:\"registration\",operation:\"view\",methodUrl:\"RegistrationFile\"//screenName: filedata.displayName\n};dispatch(viewAttachment(inputParam));}else{toast.warn(intl.formatMessage({id:\"IDS_FILENOTUPLOADED\"}));}}else if(filedata.viewName==='subSample'){if(filedata&&filedata[filedata.field[2]+['_ssystemfilename_subSample']]!==undefined&&filedata[filedata.field[2]]!==\"\"){var _inputParam={inputData:{viewFile:{ssystemfilename:filedata[filedata.field[2]+['_ssystemfilename_subSample']],npreregno:filedata.npreregno,ntransactionsamplecode:filedata.ntransactionsamplecode,ssamplearno:filedata.ssamplearno,sfilename:filedata[filedata.field[2]],sarno:filedata.sarno},userinfo:filedata.userInfo},classUrl:\"registration\",operation:\"view\",methodUrl:\"RegistrationSubSampleFile\"//screenName: filedata.displayName\n};dispatch(viewAttachment(_inputParam));}else{toast.warn(intl.formatMessage({id:\"IDS_FILENOTUPLOADED\"}));}}else{var isFileupload;if(filedata&&filedata[filedata['dataField']+['_ssystemfilename']]!==undefined&&filedata[filedata['dataField']]!==\"\"){isFileupload=true;}if(filedata&&filedata[filedata.dataField+['_ssystemfilename_Sample']]!==undefined&&filedata[filedata.dataField]!==\"\"){isFileupload=true;}if(isFileupload){var _inputParam2={inputData:{viewFile:filedata.screenName==='SampleRegistration'?{ssystemfilename:filedata[filedata.dataField+['_ssystemfilename_Sample']],npreregno:filedata.npreregno,sarno:filedata.sarno,sfilename:filedata[filedata.dataField]}:{ssystemfilename:filedata[filedata['dataField']+['_ssystemfilename']],ndynamicmastercode:filedata.ndynamicmastercode,ndesigntemplatemappingcode:filedata.ndesigntemplatemappingcode,sfieldname:filedata.dataField,sfilename:filedata[filedata.dataField]},userinfo:filedata.userInfo},classUrl:filedata.classUrl,operation:\"view\",methodUrl:filedata.methodUrl//screenName: filedata.displayName\n};dispatch(viewAttachment(_inputParam2));}else{toast.warn(intl.formatMessage({id:\"IDS_FILENOTUPLOADED\"}));}}};}export function modalSave(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,inputParam.inputData).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);if(inputParam.postParam){var foundIndex=masterData[inputParam.postParam.inputListName].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField];});masterData[inputParam.postParam.inputListName][foundIndex]=masterData[inputParam.postParam.selectedObject];if(masterData[\"searchedData\"]!==undefined){var _foundIndex6=masterData[\"searchedData\"].findIndex(function(x){return x[inputParam.postParam.primaryKeyField]===masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField];});masterData[\"searchedData\"][_foundIndex6]=masterData[inputParam.postParam.selectedObject];}// sortData(masterData);\n}masterData=sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{//ALPD-4519-Vignesh R(06-08-2024)\nloadEsign:false,loading:false,masterData:masterData,modalShow:inputParam.modalShow,openModal:false,modalTitle:undefined,operation:inputParam.operation}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loadEsign:false,loading:false,modalShow:true,openModal:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function openBarcodeModal(selectedMaster,ncontrolCode,userinfo){return function(dispatch){dispatch(initRequest(true));var urlArray=[];var getPrinter=rsapi.post(\"barcode/getPrinter\",userinfo);var getControlBasedBarcode=rsapi.post(\"barcodeconfiguration/checkConfiguration\",{selectedMaster:selectedMaster,ncontrolCode:ncontrolCode,userinfo:userinfo,Multiselect:Array.isArray(selectedMaster)});urlArray=[getPrinter,getControlBasedBarcode];Axios.all(urlArray).then(function(response){var printer=constructOptionList(response[0].data||[],\"sprintername\",\"sprintername\",undefined,undefined,true).get(\"OptionList\");var barcode=constructOptionList(response[1].data.Barcode||[],\"sbarcodename\",\"sbarcodename\",undefined,undefined,true).get(\"OptionList\");var selectedRecord={};if(printer.length>0)selectedRecord['sprintername']=printer[0];if(barcode.length>0)selectedRecord['nbarcode']=barcode[0];selectedRecord['nbarcodeprint']=1;dispatch({type:DEFAULT_RETURN,payload:{openModal:true,operation:\"barcode\",BarcodeList:barcode,Printer:printer,loading:false,ncontrolcode:ncontrolCode,nbarcodeprint:response[1].data.nbarcodeprint,barcodeSelectedRecord:selectedMaster,selectedRecord:selectedRecord}});}).catch(function(error){dispatch(initRequest(false));if(error.response.status===500){toast.error(error.message);}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function barcodeGeneration(selectedMaster,ncontrolCode,userinfo,selectedRecord){return function(dispatch){dispatch(initRequest(true));var list=[];if(Array.isArray(selectedMaster)){list=selectedMaster;}else{list.push(selectedMaster);}rsapi.post(\"barcodeconfiguration/barcodeGeneration\",{selectedMaster:list,ncontrolCode:ncontrolCode,userinfo:userinfo,nbarcode:selectedRecord.nbarcode.item.nbarcode,sprintername:selectedRecord.sprintername.value,nbarcodeprintcount:selectedRecord.nbarcodeprintcount?selectedRecord.nbarcodeprintcount:1}).then(function(response){toast.info(response.data);dispatch({type:DEFAULT_RETURN,payload:{openModal:false,operation:\"barcode\",loading:false,selectedRecord:{},barcodeSelectedRecord:undefined}});}).catch(function(error){dispatch(initRequest(false));if(error.response.status===500){toast.error(error.message);}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export var syncAction=function syncAction(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,inputParam.inputData).then(function(response){var data=response.data;sortData(data);var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:[],operation:inputParam.operation,organisation:undefined}};dispatch(updateStore(updateInfo));dispatch({type:DEFAULT_RETURN,payload:{masterData:data,operation:inputParam.operation,activeTestTab:data.activeTestTab,activeTestKey:data.activeTestKey,activeBCTab:data.activeBCTab,inputParam:inputParam,masterStatus:\"\",userInfo:inputParam.inputData.userinfo,loading:false,openModal:false,selectedId:null,selectedRecord:{},dataState:undefined,organisation:{selectedNode:data.SelectedNode,selectedNodeName:data.SelectedNodeName,primaryKeyValue:data.AddedChildPrimaryKey},displayName:inputParam.displayName,reportFilePath:undefined,skip:0,take:undefined,testskip:0,testtake:inputParam.inputData.settings?inputParam.inputData.settings[12]:10}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false,openModal:false,loadEsign:false}});if(error.response.status===503){toast.warn(intl.formatMessage({id:\"IDS_SYNCUNABLEOATTEMPT\"}));}else if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};//export const generateControlBasedReport = (inputParam) => {\nexport var generateControlBasedReport=function generateControlBasedReport(ncontrolCode,selectedRecord,Login,primaryKeyField,primaryKeyValue){return function(dispatch){dispatch(initRequest(true));var inputParam={primaryKeyField:primaryKeyField,nformcode:Login.userInfo.nformcode,sreportlink:Login.reportSettings[15],smrttemplatelink:Login.reportSettings[16],ncontrolcode:ncontrolCode,userinfo:Login.userInfo,selectedRecord:selectedRecord,ntranscode:selectedRecord.ntransactionstatus,primaryKeyValue:primaryKeyValue,nreporttypecode:REPORTTYPE.CONTROLBASED};rsapi.post(\"controlbasedreport/controlBasedReport\",_objectSpread({},inputParam)).then(function(response){if(response.data.SelectedViewReportMaster&&response.data.SelectedViewReportMaster.sreportformatdetail==='viewer'){viewReportDetailWithParametersReports(response.data,inputParam);dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,openModal:false,showConfirmAlert:false}});}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,openModal:false,showConfirmAlert:false}});document.getElementById(\"download_data\").setAttribute(\"href\",response.data.filepath);document.getElementById(\"download_data\").click();}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};export var dynamicExportTemplate=function dynamicExportTemplate(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"exportimport/exportTemplate\",inputParam).then(function(response){var value=\"\";if(response.data.rtn===\"Success\"){value=response.data[\"exportFileViewUrl\"];var win=window.open(value);if(win){win.focus();}else{toast.warn(intl.formatMessage(\"IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE\"));}}else{if(response.data.rtn){toast.warn(intl.formatMessage({id:response.data.rtn}));}}dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,openModal:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};export function dynamicImportTemplate(inputParam,masterData,modalName,defaultInput,ConfirmMessage){return function(dispatch){dispatch(initRequest(true));var requestUrl='';if(inputParam.isFileupload&&inputParam.isFileupload!=='undefined'){var formData=inputParam.formData;formData.append(\"userinfo\",JSON.stringify(inputParam.inputData.userinfo));requestUrl=rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,formData);}else{requestUrl=rsapi.post(inputParam.classUrl+\"/\"+inputParam.operation+inputParam.methodUrl,_objectSpread({},inputParam.inputData));}return requestUrl.then(function(response){if(response.data.rtn===\"Success\"){var inputParams={classUrl:response.data.classUrl,methodUrl:response.data.methodUrl,inputData:{'userinfo':inputParam.inputData.userinfo},displayName:inputParam.displayName};// dispatch(callService(inputParams))\nvar data=response.data.ResponseBody;sortData(data);var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:[],organisation:undefined}};dispatch(updateStore(updateInfo));dispatch({type:DEFAULT_RETURN,payload:{openExcelModal:false,masterData:data,activeTestTab:data.activeTestTab,activeTestKey:data.activeTestKey,activeBCTab:data.activeBCTab,inputParam:inputParams,masterStatus:\"\",userInfo:inputParam.inputData.userinfo,loading:false,selectedId:null,selectedRecord:{},dataState:undefined,organisation:{selectedNode:data.SelectedNode,selectedNodeName:data.SelectedNodeName,primaryKeyValue:data.AddedChildPrimaryKey},displayName:inputParams.displayName,reportFilePath:undefined,skip:0,take:undefined,testskip:0,//testtake: 5,\ntesttake:inputParams.inputData.settings?inputParams.inputData.settings[12]:10//  key:inputParam.key!==undefined?inputParam.key:\"\"\n}});}dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,openExcelModal:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/actions/ServiceAction.js"],"names":["toast","rsapi","initRequest","updateStore","DEFAULT_RETURN","REQUEST_FAILURE","sortData","searchData","searchJsonData","replaceUpdatedObject","constructOptionList","rearrangeDateFormat","Lims_JSON_stringify","intl","selectedDashBoardView","Axios","REPORTTYPE","designComponents","transactionStatus","ConfirmMessage","viewReportDetailWithParametersReports","callService","inputParam","dispatch","post","classUrl","methodUrl","inputData","then","response","data","warn","Success","updateInfo","typeName","masterData","organisation","undefined","rtn","warning","formatMessage","id","type","payload","openExcelModal","activeTestTab","activeTestKey","activeBCTab","masterStatus","userInfo","userinfo","loading","selectedId","selectedRecord","dataState","selectedNode","SelectedNode","selectedNodeName","SelectedNodeName","primaryKeyValue","AddedChildPrimaryKey","displayName","reportFilePath","skip","take","testskip","testtake","settings","catch","error","status","crudMaster","modalName","defaultInput","clearSelectedRecordField","requestUrl","isFileupload","formData","append","JSON","stringify","operation","selectedRecordObj","loadEsign","success","retrievedData","Array","isArray","flag","postParam","selectedObject","primaryKeyField","foundIndex","inputListName","findIndex","x","isSingleGet","push","task","list","filter","item","openModal","activeSampleTab","showSample","respObject","isFilterDetail","design","nextNode","showConfirmAlert","loadPoolSource","openPortal","saveType","Object","keys","map","controlType","controlName","dataField","preSetValue","indexOf","postCRUDOrganiseSearch","console","log","message","DeleteExistingRecord","confirm","obj","errorCode","validateEsignCredential","confirmMessage","sformname","smodulename","toLowerCase","syncAction","fetchRecord","fetchRecordParam","url","screenName","ncontrolCode","filterColumnData","filterValue","filterParam","filterOperator","searchedData","length","isjsondata","searchFieldList","fetchUrl","fecthInputObject","sortField","sortOrder","forEach","unchangeList","isChild","searchRef","current","value","temp","includes","filtercombochange","Map","selectedComboName","selectedComboId","selectedCombo","viewAttachment","document","getElementById","setAttribute","FilePath","click","win","window","open","focus","filterTransactionList","filteredListName","param","selectedData","childRefs","childref","ref","childFilteredListName","isService","isSingleSelect","String","isSortable","sortList","sortValue","isMultiSort","multiSortData","pkey","sampleskip","sampletake","subsampleskip","subsampletake","changeList","name","postCRUDOrganiseTransSearch","postParamList","index","clearFilter","updatedListname","showUnderDevelopment","info","onComboLoad","extractedColumnList","IntegrationSettings","urlArray","ndesigncomponentcode","CHECKBOX","elnget","slinkname","all","ComboFieldData","dataList","COMBOBOX","objectValue","foreignDataField","get","defaultvalue","YES","fetchRecordCombo","integrationSettings","parentPrimaryField","editRow","selectedRecordData","responseData","extractedColumnData","splice","hideNARecord","tableDataField","label","DATEPICKER","field","indexValue","onServiceLoad","comboColumnField","primarykeyvalue","onChangeUrl","childObjectValue","childPrimaryField","childdataField","dynamicFileDownload","filedata","viewName","viewFile","ssystemfilename","npreregno","sarno","sfilename","ntransactionsamplecode","ssamplearno","ndynamicmastercode","ndesigntemplatemappingcode","sfieldname","modalSave","modalShow","modalTitle","openBarcodeModal","selectedMaster","getPrinter","getControlBasedBarcode","Multiselect","printer","barcode","Barcode","BarcodeList","Printer","ncontrolcode","nbarcodeprint","barcodeSelectedRecord","barcodeGeneration","nbarcode","sprintername","nbarcodeprintcount","generateControlBasedReport","Login","nformcode","sreportlink","reportSettings","smrttemplatelink","ntranscode","ntransactionstatus","nreporttypecode","CONTROLBASED","SelectedViewReportMaster","sreportformatdetail","filepath","dynamicExportTemplate","dynamicImportTemplate","inputParams","ResponseBody"],"mappings":"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","sourcesContent":["import { toast } from 'react-toastify';\r\nimport rsapi from '../rsapi';\r\nimport { initRequest, updateStore } from './LoginAction';\r\nimport { DEFAULT_RETURN, REQUEST_FAILURE } from './LoginTypes';\r\nimport { sortData, searchData, searchJsonData, replaceUpdatedObject, constructOptionList, rearrangeDateFormat, Lims_JSON_stringify } from '../components/CommonScript';\r\nimport { intl } from '../components/App';\r\nimport { selectedDashBoardView } from './DashBoardTypeAction';\r\nimport Axios from \"axios\";\r\nimport { REPORTTYPE, designComponents, transactionStatus } from '../components/Enumeration';\r\nimport ConfirmMessage from '../components/confirm-alert/confirm-message.component';\r\nimport { viewReportDetailWithParametersReports } from './ReportDesignerAction';\r\n\r\n// import { getValidComponent } from '../components/droparea/helpers';\r\n//import { Engine } from 'json-rules-engine';\r\n//import employee from '../rules/Employee-Salary.json';\r\n\r\nexport const callService = (inputParam) => {\r\n  return (dispatch) => {\r\n    dispatch(initRequest(true));\r\n    return rsapi.post(inputParam.classUrl + \"/get\" + inputParam.methodUrl, inputParam.inputData)\r\n      .then(response => {\r\n\r\n        // console.log(\"res:\", response);\r\n\r\n        ///Start of Rule Engine code///////////////////////\r\n\r\n        // const decisions1 = [\r\n        //   {\r\n        //       \"conditions\": {\r\n        //           \"all\": [\r\n        //               {\r\n        //                   \"fact\": \"Designation\",\r\n        //                   \"operator\": \"equal\",\r\n        //                   \"value\": \"Manager\"\r\n        //               },\r\n        //               {\r\n        //                   \"fact\": \"Experience\",\r\n        //                   \"operator\": \"greaterThan\",\r\n        //                   \"value\": 10\r\n        //               }\r\n        //           ]\r\n        //       },\r\n        //       \"event\": {\r\n        //           \"type\": \"RS.1500000\",\r\n        //           \"params\": {message: 'Your Salary is 1500000/annum!'}\r\n        //       }\r\n        //   }\r\n        // ];\r\n        // console.log(\"decisions:\",decisions1);  \r\n        // const inputs1 = {Designation: 'Manager', Experience: 9 };\r\n\r\n        // const engine = new Engine(employee.decisions);   \r\n\r\n        // engine.run(inputs1)\r\n        // .then(results => {       \r\n        //   console.log(\"Rule output:\", results.events);\r\n        //   if ( results.events.length > 0){\r\n        //     const events = results.events;\r\n        //     events.map(event => console.log(\"Message:\",event.params.message)); \r\n\r\n\r\n        //     rsapi.post(\"section/getSection\" , inputParam.inputData)\r\n        //     .then(response => {\r\n        //       console.log(\"data:\", response);\r\n        //       let data = response.data;\r\n        //       sortData(data);\r\n\r\n        //       const updateInfo = {\r\n        //         typeName: DEFAULT_RETURN,\r\n        //         data: { masterData: [], organisation: undefined, }\r\n        //       }\r\n        //       dispatch(updateStore(updateInfo))\r\n\r\n        //       dispatch({\r\n        //         type: DEFAULT_RETURN,\r\n        //         payload: {\r\n        //           masterData: data,\r\n        //           activeTestTab: data.activeTestTab,\r\n        //           activeTestKey: data.activeTestKey,\r\n        //           activeBCTab: data.activeBCTab,\r\n        //           inputParam: inputParam,\r\n        //           masterStatus: \"\",\r\n        //           userInfo: inputParam.inputData.userinfo,\r\n        //           loading: false, selectedId: null, selectedRecord: {},\r\n        //           dataState: undefined,\r\n        //           organisation: {\r\n        //             selectedNode: data.SelectedNode, selectedNodeName: data.SelectedNodeName,\r\n        //             primaryKeyValue: data.AddedChildPrimaryKey\r\n        //           },\r\n        //           displayName: inputParam.displayName,\r\n        //           reportFilePath: undefined\r\n        //         }\r\n        //       })\r\n\r\n        //     })\r\n        //     .catch(error => {\r\n        //       if (error.response === undefined && error === \"Network Error\") {\r\n        //         dispatch({\r\n        //           type: REQUEST_FAILURE,\r\n        //           payload: {\r\n        //             error: \"Network Error\",\r\n        //             loading: false,\r\n        //           }\r\n        //         });\r\n        //       } else if (error.response.status === 417) {\r\n        //         toast.warning(error.response.data);\r\n        //         dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } });\r\n        //       } else {\r\n        //         dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } })\r\n        //       }\r\n        //     })\r\n        //   }\r\n        //   else{\r\n        //     console.log(\"Message:\",\"Rules Failed\");\r\n        //     dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } });\r\n        //   }         \r\n        // })\r\n        ///End of Rule Engine code///////////////////////\r\n\r\n        ////uncomment below for Orginial Source start////////////////////\r\n\r\n        if (response.data[\"Success\"]) {\r\n          toast.warn(response.data.Success);\r\n        }\r\n\r\n        let data = response.data;\r\n        sortData(data);\r\n\r\n        const updateInfo = {\r\n          typeName: DEFAULT_RETURN,\r\n          data: { masterData: [], organisation: undefined, }\r\n        }\r\n        dispatch(updateStore(updateInfo))\r\n\r\n        if (response.data.rtn == \"IDS_USERNOTINRESULTENTRYFLOW\") {\r\n          toast.warning(intl.formatMessage({ id: \"IDS_USERNOTINRESULTENTRYFLOW\" }));\r\n        }\r\n\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            openExcelModal: false,\r\n            masterData: data,\r\n            activeTestTab: data.activeTestTab,\r\n            activeTestKey: data.activeTestKey,\r\n            activeBCTab: data.activeBCTab,\r\n            inputParam: inputParam,\r\n            masterStatus: \"\",\r\n            userInfo: inputParam.inputData.userinfo,\r\n            loading: false, selectedId: null, selectedRecord: {},\r\n            dataState: undefined,\r\n            organisation: {\r\n              selectedNode: data.SelectedNode, selectedNodeName: data.SelectedNodeName,\r\n              primaryKeyValue: data.AddedChildPrimaryKey\r\n            },\r\n            displayName: inputParam.displayName,\r\n            reportFilePath: undefined,\r\n            skip: 0, take: undefined,\r\n            testskip: 0,\r\n            //testtake: 5,\r\n            testtake: inputParam.inputData.settings ? inputParam.inputData.settings[12] : 10,\r\n            //  key:inputParam.key!==undefined?inputParam.key:\"\"\r\n          }\r\n        })\r\n\r\n        ///Uncomment till above for original source\r\n      })\r\n      .catch(error => {\r\n        //console.log(\"error:\", error);\r\n        if (error.response === undefined && error === \"Network Error\") {\r\n          dispatch({\r\n            type: REQUEST_FAILURE,\r\n            payload: {\r\n              error: \"Network Error\",\r\n              loading: false,\r\n            }\r\n          });\r\n        } else if (error.response !== undefined && error.response.status === 417) {\r\n          toast.warning(error.response.data);\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } });\r\n        } else {\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } })\r\n        }\r\n      })\r\n\r\n  };\r\n};\r\n\r\n//Start- Add /Edit/Delete Master Data\r\nexport function crudMaster(inputParam, masterData, modalName, defaultInput,ConfirmMessage,clearSelectedRecordField) {\r\n\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n    let requestUrl = '';\r\n    if (inputParam.isFileupload && inputParam.isFileupload!=='undefined') {\r\n      const formData = inputParam.formData;\r\n      formData.append(\"userinfo\", JSON.stringify(inputParam.inputData.userinfo));\r\n      requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, formData);\r\n    } else {\r\n      requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData });\r\n    }\r\n    return requestUrl\r\n      .then(response => {\r\n        if (response.status === 202) {\r\n          //HttpStatus:Accepted\r\n          //Use this block when u need to display any success message\r\n          let selectedRecordObj = {}\r\n          if (inputParam.selectedRecord) {\r\n            selectedRecordObj = { selectedRecord: inputParam.selectedRecord }\r\n          }\r\n\r\n          dispatch({\r\n            type: DEFAULT_RETURN, payload: {\r\n              loadEsign: false,\r\n              [modalName]: false,\r\n            //ATE234 Janakumar ALPD-5589,ALPD-5436 Test approval---> When using the save filter button, 500 occurs in Specific scenario Release & Report -> Edit Report Template Slide out issues.\r\n            //isFilterDetail is mainly use in the transaction save filter in all screen.\r\n              isFilterDetail:false,\r\n              loading: false,\r\n              ...selectedRecordObj\r\n            }\r\n          })\r\n          toast.success(response.data);\r\n        }\r\n        else if (response.status === 208) {\r\n          //HttpStatus:Accepted\r\n          //208-Already Reported\r\n          let selectedRecordObj = {}\r\n          if (inputParam.selectedRecord) {\r\n            selectedRecordObj = { selectedRecord: inputParam.selectedRecord }\r\n          }\r\n          dispatch({\r\n            type: DEFAULT_RETURN, payload: {\r\n              loadEsign: false,\r\n              [modalName]: false,\r\n              loading: false,\r\n              ...selectedRecordObj\r\n\r\n            }\r\n          })\r\n          toast.warn(response.data);\r\n        }\r\n        else {\r\n          const retrievedData = sortData(response.data);\r\n          if (masterData === undefined || Array.isArray(retrievedData)) {\r\n            masterData = retrievedData;\r\n          }\r\n          else {\r\n           if(!response.data.flag)\r\n           {\r\n            masterData = {\r\n            ...masterData,\r\n            ...retrievedData\r\n          }\r\n        }else{\r\n            masterData = {\r\n              ...masterData\r\n            }\r\n          }\r\n\r\n            \r\n            if (modalName === \"openModal\" && inputParam.operation !== \"delete\" && inputParam.operation !== \"prepare\"\r\n              && inputParam.operation !== \"create\" && inputParam.operation !== \"copy\") {\r\n\r\n              if (inputParam.postParam) {\r\n                if (masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]) {\r\n                  const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                    x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                  );\r\n                  masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n                } else {\r\n                  const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                    x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][0][inputParam.postParam.primaryKeyField]\r\n                  );\r\n                  masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject][0];\r\n                }\r\n              }\r\n            }\r\n            else if (modalName === \"openModal\" && inputParam.operation === \"create\") {\r\n              if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]);\r\n                //masterData[inputParam.postParam.selectedObject] = response.data;\r\n                sortData(masterData);\r\n              }\r\n            }\r\n            else if (modalName === \"openChildModal\" && inputParam.operation === \"create\") {//searchedData\r\n              if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                  x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                );\r\n                masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n\r\n                if (masterData[\"searchedData\"] !== undefined) {\r\n                  const foundIndex = masterData[\"searchedData\"].findIndex(\r\n                    x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                  );\r\n                  masterData[\"searchedData\"][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n\r\n                }\r\n                sortData(masterData);\r\n              }\r\n            }\r\n            else if (modalName === \"openModal\" && inputParam.operation === \"copy\") {\r\n              if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]);\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n              }\r\n            }\r\n            else if (modalName === \"openModal\" && (inputParam.operation === \"delete\" || inputParam.operation === \"prepare\")) {\r\n              if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                if (inputParam.postParam.task === \"cancel\") {\r\n                  const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                    x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                  );\r\n                  masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n                }\r\n                else {\r\n                  const list = masterData[inputParam.postParam.inputListName]\r\n                    .filter(item => item[inputParam.postParam.primaryKeyField] !== inputParam.postParam.primaryKeyValue)\r\n                  masterData[inputParam.postParam.inputListName] = list;\r\n\r\n                  // const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                  //   x => x[inputParam.postParam.primaryKeyField] === inputParam.postParam.primaryKeyField\r\n                  // );\r\n                  // masterData[inputParam.postParam.inputListName].splice(foundIndex, 1)         \r\n\r\n                }\r\n                response.data.\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n              }\r\n            }\r\n          }\r\n          // (masterData);\r\n\r\n          //let openModal = false;\r\n          let openModal = masterData.flag && masterData.flag==='true'  ? true :false;\r\n          // let openChildModal= false;\r\n\r\n          let selectedRecord = {};\r\n          let activeSampleTab = inputParam.activeSampleTab ? { activeSampleTab: inputParam.activeSampleTab } : ''\r\n          let activeTestKey = inputParam.activeTestKey ? { activeTestKey: inputParam.activeTestKey } : ''\r\n          let showSample = inputParam.showSample ? inputParam.showSample : ''\r\n          let respObject = {\r\n            masterData,\r\n            inputParam,\r\n            modalName,\r\n            //   openChildModal,\r\n            //modalName:undefined,\r\n            //ATE234 Janakumar ALPD-5589,ALPD-5436 Test approval---> When using the save filter button, 500 occurs in Specific scenario Release & Report -> Edit Report Template Slide out issues.\r\n            //isFilterDetail is mainly use in the transaction save filter in all screen.\r\n            isFilterDetail:false,\r\n            [modalName]: openModal,\r\n            operation: inputParam.operation,\r\n            masterStatus: \"\",\r\n            errorCode: undefined,\r\n            loadEsign: false,\r\n            showEsign: false,\r\n            selectedRecord,\r\n            loading: false,\r\n            dataState: inputParam.dataState,\r\n            selectedId: inputParam.selectedId,\r\n            ...activeSampleTab,\r\n            ...activeTestKey,\r\n            showSample,\r\n            design: [],\r\n\r\n            //organisation: undefined\r\n            organisation: inputParam.nextNode ? {\r\n              selectedNode: inputParam.nextNode,\r\n              selectedNodeName: masterData.SelectedNodeName,\r\n              primaryKeyValue: masterData.AddedChildPrimaryKey,\r\n\r\n            } : undefined,\r\n            showConfirmAlert: inputParam.showConfirmAlert,\r\n            loadPoolSource: inputParam.loadPoolSource,\r\n            skip: inputParam.skip || undefined,\r\n            take: inputParam.take || undefined,\r\n            openPortal: false,\r\n          }\r\n\r\n          if (inputParam.operation === \"create\" || inputParam.operation === \"copy\") {\r\n            if (inputParam.saveType === 2) {\r\n              openModal = true;\r\n              //ALPD-5063 added by Dhanushya RI,Enable save and continue option in Type3 component based screen\r\n              Object.keys(inputParam.selectedRecord).map(item=>{\r\n                clearSelectedRecordField.map(data=>{\r\n                    if(data.controlType === \"checkbox\" ? (item===data.controlName || item===data.dataField): item===data.dataField){\r\n                      selectedRecord= inputParam.selectedRecord;\r\n                      selectedRecord[item]=data.preSetValue ? data.preSetValue:\"\";\r\n                    } \r\n                    //Added by sonia on 04th Mar 2025 for  jira id:ALPD-5504\r\n                    else {\r\n                        selectedRecord= inputParam.selectedRecord;\r\n                    }            \r\n                })\r\n              })\r\n             // selectedRecord = defaultInput;\r\n              \r\n            }\r\n            respObject = { ...respObject, [modalName]: openModal, selectedRecord };\r\n          }\r\n          if ((modalName === \"openModal\" || modalName === \"openChildModal\") && Object.keys(masterData).indexOf(\"searchedData\") !== -1\r\n            && masterData[\"searchedData\"] !== undefined) {\r\n            dispatch(postCRUDOrganiseSearch(inputParam.postParam, respObject))\r\n          }\r\n          else {\r\n            //ALPD-5540--Added by vignesh R(07-03-2025)--Supplier-->When click the logout button, blank page occurs in specific scenario\r\n            if (inputParam.saveType === 2) {\r\n              dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, [modalName]: openModal } })\r\n\r\n            }\r\n            else{\r\n            dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, [modalName]: undefined } })\r\n            \r\n            }\r\n          }\r\n        }\r\n      })\r\n      .catch(response => {\r\n        console.log(\"error:\", response);\r\n        if (response.response.status === 500) {\r\n          dispatch({\r\n            type: REQUEST_FAILURE,\r\n            payload: {\r\n              error: response.message,\r\n              loading: false,\r\n              // openPortal:this.props.Login.openPortal,\r\n              //openModal:inputParam.openPortal?false:true\r\n            }\r\n          });\r\n        } \r\n        else if (response.response.status === 409 && response.response.data.flag) {\r\n          dispatch({\r\n            type: REQUEST_FAILURE,\r\n            payload: {\r\n              loading: false,\r\n            }\r\n          });\r\n          let inputData={...inputParam.inputData,DeleteExistingRecord:true}\r\n          ConfirmMessage.confirm(\r\n            \"deleteMessage\",\r\n            intl.formatMessage({ id: \"IDS_INFOMATION\" }),\r\n            intl.formatMessage({ id: \"IDS_REMOVEEXISTINGCONFIGUARTION\" }),\r\n            intl.formatMessage({ id: \"IDS_OK\" }),\r\n            intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () =>\r\n            dispatch(crudMaster(inputParam={...inputParam,inputData}, masterData, modalName, defaultInput,ConfirmMessage))\r\n          );\r\n      }\r\n        else {\r\n\r\n          let obj = {}\r\n          if (inputParam.openPortal === true) {\r\n            obj = { openModal: false }\r\n          }\r\n          let selectedRecordObj = {}\r\n          if (inputParam.selectedRecord) {\r\n            selectedRecordObj = { selectedRecord: inputParam.selectedRecord }\r\n          }\r\n\r\n          if (inputParam.operation === \"delete\" || inputParam.operation === \"prepare\" || inputParam.operation === \"receive\" ||\r\n            inputParam.operation === 'approve' || inputParam.operation === 'Approve' || inputParam.operation === \"correction\"\r\n            || inputParam.operation === \"complete\" || inputParam.operation === \"dynamic\" \r\n            || inputParam.operation === \"setDefault\" || inputParam.operation === \"reset\" || inputParam.operation === \"retire\"\r\n            || inputParam.operation === \"xml\" || inputParam.operation === 'blackList' || inputParam.operation === 'attendance'\r\n            || inputParam.operation === 'certified' || inputParam.operation === 'competent' || inputParam.operation === \"invite\"\r\n            || inputParam.operation === \"cancel\" || inputParam.operation === \"cancel\" || inputParam.operation === \"conduct\"\r\n            || inputParam.operation === \"attend\" || inputParam.operation === \"certify\" || inputParam.operation === \"Competent\"\r\n            || inputParam.operation === \"Create\" || inputParam.operation === \"check\") {\r\n            dispatch({\r\n              type: DEFAULT_RETURN,\r\n              payload: {\r\n                masterStatus: response.response.data,\r\n                errorCode: response.response.status,\r\n                loadEsign: false,\r\n                [modalName]: false,\r\n                loading: false,\r\n                openPortal: false,\r\n                ...selectedRecordObj\r\n              }\r\n            });\r\n          } else {\r\n            // console.log('dispatch',obj)\r\n            if (inputParam.selectedRecord) {\r\n              selectedRecordObj = { selectedRecord: inputParam.selectedRecord }\r\n            }\r\n            dispatch({\r\n              type: DEFAULT_RETURN,\r\n              payload: {\r\n                masterStatus: response.response.data,\r\n                errorCode: response.response.status,\r\n                loadEsign: false, loading: false,\r\n                ...obj,\r\n                ...selectedRecordObj\r\n\r\n          \r\n              }\r\n            });\r\n          }\r\n\r\n        }\r\n      });\r\n  }\r\n}\r\nexport const validateEsignCredential = (inputParam, modalName,confirmMessage) => {\r\n  return (dispatch) => {\r\n    dispatch(initRequest(true));\r\n    if (inputParam && inputParam.inputData && inputParam.inputData.userinfo) {\r\n      inputParam.inputData[\"userinfo\"] = {\r\n        ...inputParam.inputData.userinfo,\r\n        sformname: Lims_JSON_stringify(inputParam.inputData.userinfo.sformname),\r\n        smodulename: Lims_JSON_stringify(inputParam.inputData.userinfo.smodulename),\r\n      }\r\n    }\r\n    return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData)\r\n      .then(response => {\r\n        if (response.data === \"Success\") {\r\n\r\n          const methodUrl = inputParam[\"screenData\"][\"inputParam\"][\"methodUrl\"];\r\n          inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\r\n\r\n          if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]) {\r\n\r\n            delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];\r\n\r\n            if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]) {\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];\r\n\r\n\r\n            }\r\n\r\n            // ALPD-2437 added for Type3 Component. Use selected record to clear esign values\r\n            if (inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"]) {\r\n\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignreason\"];\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignpassword\"];\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esigncomments\"];\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"agree\"];\r\n            }\r\n          }\r\n          //dispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName,'',confirmMessage))\r\n\r\n          if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"]&&inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"sync\"){\r\n          dispatch(syncAction(inputParam[\"screenData\"][\"inputParam\"]))\r\n\r\n          }else{\r\n            //dispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName))\r\n            //ALPD-5444 Test Group - Copy the spec in test group and do save continue loading issue occurs.\r\n            dispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName,'',confirmMessage,inputParam[\"screenData\"][\"clearSelectedRecordField\"]))\r\n\r\n          }\r\n        }\r\n      })\r\n      .catch(error => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        if (error.response.status === 500) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else {\r\n          toast.warn(intl.formatMessage({ id: error.response.data }));\r\n        }\r\n      })\r\n  };\r\n};\r\n\r\nexport const fetchRecord = (fetchRecordParam) => {\r\n  return (dispatch) => {\r\n\r\n    dispatch(initRequest(true));\r\n    const url = fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\";\r\n    rsapi.post(url, {\r\n      [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue, \"userinfo\": fetchRecordParam.userInfo\r\n    })\r\n      .then(response => {\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            selectedRecord: response.data,\r\n            screenName: fetchRecordParam.screenName,\r\n            operation: fetchRecordParam.operation,\r\n            openModal: true,\r\n            ncontrolCode: fetchRecordParam.ncontrolCode,\r\n            loading: false,\r\n            selectedId: fetchRecordParam.primaryKeyValue\r\n          }\r\n        });\r\n      })\r\n      .catch(error => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        if (error.response.status === 500) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else {\r\n          toast.warn(intl.formatMessage({ id: error.response.data }));\r\n        }\r\n      })\r\n  }\r\n}\r\n\r\nexport function filterColumnData(filterValue, filterParam,filterOperator) {\r\n  return function (dispatch) {\r\n\r\n    let masterData = filterParam.masterData;\r\n\r\n    let primaryKeyValue = 0;\r\n    let searchedData = undefined;\r\n    if (filterValue === \"\") {\r\n      if (masterData[filterParam.inputListName] && masterData[filterParam.inputListName].length > 0) {\r\n        // if(filterParam.isjsondata)\r\n        // {\r\n        //    primaryKeyValue = masterData[filterParam.inputListName][0][\"jsondata\"][filterParam.primaryKeyField]\r\n\r\n        //  }\r\n        //else\r\n        // {\r\n        primaryKeyValue = masterData[filterParam.inputListName][0][filterParam.primaryKeyField];\r\n        // }\r\n      }\r\n    }\r\n    else {\r\n      if (filterParam.isjsondata) {\r\n        searchedData = searchJsonData(filterValue, masterData[filterParam.inputListName], filterParam.searchFieldList || [],filterOperator);\r\n      }\r\n      else {\r\n        searchedData = searchData(filterValue, masterData[filterParam.inputListName], filterParam.searchFieldList || [],filterOperator);\r\n\r\n      }\r\n      if (searchedData.length > 0) {\r\n        //  if(filterParam.isjsondata)\r\n        // {\r\n        //  primaryKeyValue = searchedData[0][\"jsondata\"][filterParam.primaryKeyField];\r\n        //  }\r\n        // else{\r\n        primaryKeyValue = searchedData[0][filterParam.primaryKeyField];\r\n        //  }\r\n      }\r\n    }\r\n\r\n    if (primaryKeyValue !== 0) {\r\n      dispatch(initRequest(true));\r\n      return rsapi.post(filterParam.fetchUrl, { ...filterParam.fecthInputObject, [filterParam.primaryKeyField]: primaryKeyValue })\r\n        .then(response => {\r\n          masterData[\"searchedData\"] = searchedData;\r\n          masterData = { ...masterData, ...response.data };\r\n\r\n          if (filterParam.inputListName === \"DashBoardView\") {\r\n            dispatch(selectedDashBoardView(response, masterData));\r\n          }\r\n          else {\r\n            if (filterParam.sortField) {\r\n              sortData(masterData, filterParam.sortOrder, filterParam.sortField);\r\n            }\r\n            else {\r\n              sortData(masterData);\r\n            }\r\n            dispatch({ type: DEFAULT_RETURN, payload: { masterData, loading: false, skip: 0, take: 10, selectedId: null } });\r\n          }\r\n        })\r\n        .catch(error => {\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n          if (error.response.status === 500) {\r\n            toast.error(intl.formatMessage({ id: error.message }));\r\n          }\r\n          else {\r\n            toast.warn(intl.formatMessage({ id: error.response.data }));\r\n          }\r\n        })\r\n    }\r\n    else {\r\n      masterData[filterParam.selectedObject] = undefined;\r\n      masterData[\"searchedData\"] = [];\r\n      Object.keys(masterData).forEach(item => {\r\n        if (item !== filterParam.inputListName && item !== filterParam.selectedObject\r\n          && filterParam.unchangeList && filterParam.unchangeList.indexOf(item) === -1)\r\n          masterData[item] = [];\r\n      })\r\n      dispatch({\r\n        type: DEFAULT_RETURN, payload: {\r\n          masterData, operation: null, modalName: undefined,\r\n          loading: false\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport function postCRUDOrganiseSearch(postParam, respObject) {\r\n  return function (dispatch) {\r\n\r\n    let masterData = respObject.masterData;\r\n\r\n    if (respObject.inputParam.operation === \"create\" || respObject.inputParam.operation === \"copy\") {\r\n      if (respObject.modalName === \"openModal\") {\r\n        if (respObject.inputParam.isChild === undefined) {\r\n          // ALPD-5605 Added by Abdul to handle front end collapse when current becomes null when unmounted\r\n          if(respObject.inputParam.searchRef.current && respObject.inputParam.searchRef.current.value )\r\n          // ALPD-5605 End \r\n            respObject.inputParam.searchRef.current.value = \"\";\r\n          masterData[\"searchedData\"] = undefined;\r\n        }\r\n      }\r\n      dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData, modalName: undefined } })\r\n    }\r\n    else if (respObject.inputParam.operation === \"delete\" || respObject.inputParam.operation === \"prepare\") {\r\n\r\n      if (masterData[\"searchedData\"] !== undefined && respObject.modalName === \"openModal\") {\r\n        let temp = masterData[\"searchedData\"];\r\n        let primaryKeyValue = respObject.masterData[\"searchedData\"][0][postParam.primaryKeyField];\r\n        if (respObject.inputParam.isChild === undefined) {\r\n\r\n          temp = masterData[\"searchedData\"].filter(item => Array.isArray(postParam.primaryKeyValue) ?\r\n            !postParam.primaryKeyValue.includes(item[postParam.primaryKeyField])\r\n            : item[postParam.primaryKeyField] !== postParam.primaryKeyValue);\r\n          primaryKeyValue = temp.length > 0 ? temp[0][postParam.primaryKeyField] : 0;\r\n        }\r\n        else {\r\n          primaryKeyValue = masterData[postParam.selectedObject][postParam.primaryKeyField];\r\n        }\r\n        masterData[\"searchedData\"] = temp;\r\n        respObject = { ...respObject, modalName: undefined };\r\n        if (masterData[\"searchedData\"].length > 0) {\r\n          primaryKeyValue = masterData[\"searchedData\"][0][postParam.primaryKeyField];\r\n\r\n          return rsapi.post(postParam.fetchUrl, {\r\n            ...postParam.fecthInputObject, [postParam.primaryKeyField]: primaryKeyValue\r\n          })\r\n            .then(response => {\r\n              masterData = { ...masterData, ...response.data };\r\n              sortData(masterData);\r\n              dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData } });\r\n            })\r\n            .catch(error => {\r\n              dispatch({ type: DEFAULT_RETURN, payload: { ...respObject } })\r\n              if (error.response.status === 500) {\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n              }\r\n              else {\r\n                toast.warn(intl.formatMessage({ id: error.response.data }));\r\n              }\r\n            })\r\n        }\r\n        else {\r\n          masterData[postParam.selectedObject] = undefined;\r\n          masterData[\"searchedData\"] = [];\r\n          Object.keys(masterData).forEach(item => {\r\n            if (item !== postParam.inputListName && item !== postParam.selectedObject\r\n              && postParam.unchangeList && postParam.unchangeList.indexOf(item) === -1)\r\n              masterData[item] = masterData && Array.isArray(masterData[item])?[]:undefined;\r\n          })\r\n\r\n          dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData } });\r\n        }\r\n      }\r\n      else {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData, modalName: undefined } });\r\n      }\r\n    }\r\n    else if (respObject.inputParam.filtercombochange) {\r\n\r\n      respObject = { ...respObject, modalName: undefined };\r\n      if (masterData[\"searchedData\"] !== undefined) {\r\n        masterData[\"searchedData\"] = undefined;\r\n        // ALPD-5605 Added by Abdul to handle front end collapse when current becomes null when unmounted\r\n        if(respObject.inputParam.searchRef.current && respObject.inputParam.searchRef.current.value )\r\n        // ALPD-5605 End \r\n          respObject.inputParam.searchRef.current.value = \"\";\r\n      }\r\n\r\n      let Map = {}\r\n      if (postParam.selectedComboName !== undefined) {\r\n        Map = { [postParam.selectedComboName]: { [postParam.selectedComboId]: postParam.selectedCombo } }\r\n      }\r\n\r\n      dispatch({\r\n        type: DEFAULT_RETURN, payload: {\r\n          ...respObject, masterData, ...Map\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      respObject = { ...respObject, modalName: undefined };\r\n      if (masterData[\"searchedData\"] !== undefined) {\r\n        if (masterData[postParam.selectedObject][postParam.primaryKeyField]) {\r\n\r\n          const foundIndex = masterData[\"searchedData\"].findIndex(\r\n            x => x[postParam.primaryKeyField] === masterData[postParam.selectedObject][postParam.primaryKeyField]\r\n          );\r\n          masterData[\"searchedData\"][foundIndex] = masterData[postParam.selectedObject];\r\n        } else {\r\n          const foundIndex = masterData[\"searchedData\"].findIndex(\r\n            x => x[postParam.primaryKeyField] === masterData[postParam.selectedObject][0][postParam.primaryKeyField]\r\n          );\r\n          masterData[\"searchedData\"][foundIndex] = masterData[postParam.selectedObject][0];\r\n        }\r\n      }\r\n      dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData } });\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport const viewAttachment = (inputParam) => {\r\n  return (dispatch) => {\r\n    let inputData = { ...inputParam.inputData }\r\n    if (inputData['selectedRecord']) {\r\n      delete inputData['selectedRecord']['expanded'];\r\n    }\r\n    dispatch(initRequest(true));\r\n    rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, inputData)\r\n      .then(response => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        let value = \"\";\r\n        if (response.data[\"AttachFile\"]) {\r\n          document.getElementById(\"download_data\").setAttribute(\"href\", response.data.FilePath);\r\n          document.getElementById(\"download_data\").click();\r\n        } else if (response.data[\"AttachLink\"]) {\r\n          value = response.data[\"AttachLink\"];\r\n          var win = window.open(value, '_blank');\r\n          if (win) {\r\n            win.focus();\r\n          } else {\r\n            intl.warn('IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE');\r\n          }\r\n        }\r\n        else {\r\n          if (response.data[\"rtn\"]) {\r\n            toast.warn(intl.formatMessage({ id: response.data.rtn }));\r\n          }\r\n\r\n        }\r\n      })\r\n      .catch(error => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        if (error.response.status === 500) {\r\n          toast.error(error.message);\r\n        } else {\r\n          toast.warn(error.response.data);\r\n        }\r\n      });\r\n  }\r\n}\r\n\r\nexport function filterTransactionList(filterValue, filterParam, filteredListName,param) {\r\n  return function (dispatch) {\r\n    let masterData = filterParam.masterData;\r\n    filteredListName = filteredListName || \"searchedData\"\r\n    let primaryKeyValue = 0;\r\n    let searchedData = undefined;\r\n    let selectedData = []\r\n    filterParam.childRefs && filterParam.childRefs.map(childref => {\r\n      if (childref.ref !== undefined && childref.ref.current !== null) {\r\n        childref.ref.current.value = \"\";\r\n        masterData[childref.childFilteredListName] = undefined\r\n      }\r\n      return null;\r\n    })\r\n    if (filterValue === \"\") {\r\n      if (masterData[filterParam.inputListName] && masterData[filterParam.inputListName].length > 0) {\r\n        primaryKeyValue = masterData[filterParam.inputListName][0][filterParam.primaryKeyField];\r\n        selectedData.push(masterData[filterParam.inputListName][0])\r\n      }\r\n    }\r\n    else {\r\n      if (masterData[filterParam.inputListName]) {\r\n        searchedData = searchData(filterValue, masterData[filterParam.inputListName], filterParam.searchFieldList || []);\r\n      } else {\r\n        searchedData = []\r\n      }\r\n\r\n      if (searchedData.length > 0) {\r\n        primaryKeyValue = searchedData[0][filterParam.primaryKeyField];\r\n        selectedData.push(searchedData[0])\r\n      }\r\n    }\r\n\r\n    if (primaryKeyValue !== 0 && !filterParam.isService) {\r\n      primaryKeyValue = filterParam.isSingleSelect ? primaryKeyValue : String(primaryKeyValue)\r\n      dispatch(initRequest(true));\r\n      return rsapi.post(filterParam.fetchUrl, { ...filterParam.fecthInputObject, [filterParam.primaryKeyField]: primaryKeyValue })\r\n        .then(response => {\r\n          const dataState = {\r\n            skip: 0,\r\n            take: 10\r\n          }\r\n          masterData[filteredListName] = searchedData;\r\n          masterData[filterParam.selectedObject] = selectedData\r\n\r\n          // ALPD-4130 for Addition Filter Config Data Clear ATE-241\r\n          if(filterParam.primaryKeyField && filterParam.primaryKeyField === \"npreregno\"){\r\n          masterData[\"kendoFilterList\"]= undefined;\r\n          }\r\n          masterData = { ...masterData, ...response.data };\r\n          if (filterParam.isSortable) {\r\n            sortData(masterData[filterParam.sortList], 'descending', filterParam.sortValue);\r\n          }\r\n          if (filterParam.isMultiSort) {\r\n            filterParam.multiSortData.forEach(item => {\r\n              sortData(masterData[item.list], 'descending', item.pkey);\r\n            })\r\n          }\r\n          dispatch({\r\n            type: DEFAULT_RETURN, payload: {\r\n              masterData, loading: false,\r\n              // skip: 0, take: 10, testskip: 0, testtake: 10,dataState \r\n              skip: filterParam.skip, take: filterParam.take,\r\n              sampleskip : filterParam.sampleskip,\r\n              sampletake : filterParam.sampletake,\r\n              subsampleskip: filterParam.subsampleskip, subsampletake: filterParam.subsampletake,\r\n              testskip: filterParam.testskip, testtake: filterParam.testtake,\r\n              dataState,\r\n              // filterColumnActive:true,\r\n            }\r\n          });\r\n        })\r\n        .catch(error => {\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n          if (error.response.status === 500) {\r\n            toast.error(intl.formatMessage({ id: error.message }));\r\n          }\r\n          else {\r\n            toast.warn(intl.formatMessage({ id: error.response.data }));\r\n          }\r\n        })\r\n    }\r\n    else {\r\n      masterData[filterParam.selectedObject] =  !filterParam.isService ?undefined:searchedData;\r\n      masterData[filteredListName] =  !filterParam.isService?[]:searchedData;\r\n      \r\n      filterParam.changeList && filterParam.changeList.map(name => masterData[name] = [])\r\n      param && param.map(item=>masterData[item]=[])\r\n      // Object.keys(masterData).forEach(item=> {\r\n      //   if (item !== filterParam.inputListName && item !== filterParam.selectedObject \r\n      //     && filterParam.unchangeList && filterParam.unchangeList.indexOf(item) ===-1)\r\n      //       masterData[item] = [];\r\n      //   })   \r\n      dispatch({\r\n        type: DEFAULT_RETURN, payload: {\r\n          masterData, operation: null, modalName: undefined, \r\n          // |ilterColumnActive:true,\r\n          loading: false\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport function postCRUDOrganiseTransSearch(postParamList, respObject) {\r\n  return function (dispatch) {\r\n    let masterData = respObject.masterData;\r\n    postParamList && Array.isArray(postParamList) && postParamList.map((postParam, index) => {\r\n      if (postParam.clearFilter === 'yes') {\r\n\r\n        if (postParam.searchRef.current) {\r\n          postParam.searchRef.current.value = \"\";\r\n        }\r\n        masterData[postParam.filteredListName] = undefined;\r\n        postParam.childRefs && postParam.childRefs.map(childref => {\r\n          if (childref.ref !== undefined && childref.ref.current !== null) {\r\n            childref.ref.current.value = \"\";\r\n            masterData[childref.childFilteredListName] = undefined\r\n          }\r\n          return null;\r\n        })\r\n\r\n      }\r\n      if (Object.keys(masterData).indexOf(postParam.filteredListName) !== -1 && masterData[postParam.filteredListName] !== undefined) {\r\n\r\n        if (postParam.clearFilter === 'check') {\r\n          if (masterData[postParam.filteredListName] !== undefined) {\r\n            const temp = masterData[postParam.filteredListName].filter(item => !Array.isArray(postParam.primaryKeyValue) ? postParam.primaryKeyValue : postParam.primaryKeyValue.includes(item[postParam.primaryKeyField]));\r\n            masterData[postParam.filteredListName] = temp;\r\n\r\n            if (masterData[postParam.filteredListName].length > 0) {\r\n              return rsapi.post(postParam.fetchUrl, { ...postParam.fecthInputObject.fecthInputObject, [postParam.primaryKeyField]: String(respObject.masterData[postParam.filteredListName][0][postParam.primaryKeyField]) })\r\n                .then(response => {\r\n                  masterData = { ...masterData, ...response.data };\r\n                })\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          if (masterData[postParam.filteredListName] !== undefined) {\r\n            masterData[postParam.filteredListName] = replaceUpdatedObject(masterData[postParam.updatedListname], masterData[postParam.filteredListName], postParam.primaryKeyField)\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    })\r\n    //sortData(masterData);\r\n    dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData } })\r\n  }\r\n}\r\n\r\nexport function showUnderDevelopment() {\r\n  return function (dispatch) {\r\n    toast.info(intl.formatMessage({ id: \"IDS_UNDERDEVELOPMENT\" }));\r\n  }\r\n}\r\n\r\n//Fetch record when clicking add button in Type3Component\r\n// export function onComboLoad(operation, userInfo, inputParam, ncontrolCode, extractedColumnList,IntegrationSettings) {\r\n//   return function (dispatch) {\r\n\r\n//     dispatch(initRequest(true));\r\n//     let urlArray = [];\r\n//     extractedColumnList.map(item=>{\r\n//       if(item.elnget){\r\n//         //urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\r\n//         urlArray.push(rsapi.post(IntegrationSettings[0].slinkname+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\r\n//       }\r\n//       else{\r\n//         urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { userinfo: userInfo }))\r\n//       }\r\n\r\n//     }\r\n\r\n//       )\r\n\r\n//           Axios.all(urlArray)\r\n//               .then(response => {\r\n//                 let ComboFieldData = [];\r\n//                 let dataList = [];\r\n\r\n//                     extractedColumnList.map((item, index)=> {\r\n//                       if(item.ndesigncomponentcode == designComponents.COMBOBOX){\r\n//                         ComboFieldData = constructOptionList(item.objectValue === null ? response[index].data || [] : response[index].data[item.objectValue], item.foreignDataField,\r\n//                                 item.dataField, undefined, undefined, undefined);\r\n//                            dataList[item.dataField] = ComboFieldData.get(\"OptionList\");\r\n//                       }\r\n//     extractedColumnList.map(item =>\r\n//       urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, { userinfo: userInfo }))\r\n//     )\r\n\r\n//     Axios.all(urlArray)\r\n//       .then(response => {\r\n//         let ComboFieldData = [];\r\n//         let dataList = [];\r\n\r\n//         extractedColumnList.map((item, index) => {\r\n//           if (item.ndesigncomponentcode == designComponents.COMBOBOX) {\r\n//             ComboFieldData = constructOptionList(item.objectValue === null ? response[index].data || [] : response[index].data[item.objectValue], item.foreignDataField,\r\n//               item.dataField, undefined, undefined, undefined);\r\n//             dataList[item.dataField] = ComboFieldData.get(\"OptionList\");\r\n//           }\r\n\r\n//         });\r\n\r\n//         dispatch({\r\n//           type: DEFAULT_RETURN,\r\n//           payload: {\r\n//             dataList,\r\n//             operation,\r\n//             screenName: inputParam.displayName,\r\n//             openModal: true,\r\n//             ncontrolCode, loading: false\r\n//           }\r\n//         })\r\n//       })\r\n//       .catch(error => {\r\n//         dispatch(initRequest(false));\r\n//         if (error.response.status === 500) {\r\n//           toast.error(error.message);\r\n//         } else {\r\n//           toast.warn(intl.formatMessage({\r\n//             id: error.response.data\r\n//           }));\r\n//         }\r\n//       })\r\n//   }\r\n// }\r\n\r\n\r\n//Fetch record when clicking add button in Type3Component\r\n\r\nexport function onComboLoad(operation, userInfo, inputParam, ncontrolCode, extractedColumnList, IntegrationSettings) {\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n    let urlArray = [];\r\n    extractedColumnList.map(item => {\r\n      if(item.ndesigncomponentcode !== designComponents.CHECKBOX){\r\n      if (item.elnget) {\r\n        //urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\r\n        urlArray.push(rsapi.post(IntegrationSettings[0].slinkname + \"/\" + item.classUrl + \"/\" + item.methodUrl, {}))\r\n      }\r\n      else {\r\n          urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, { userinfo: userInfo }))\r\n      }\r\n\r\n    }\r\n    }\r\n    )\r\n    Axios.all(urlArray)\r\n      .then(response => {\r\n        let ComboFieldData = [];\r\n        let dataList = [];\r\n        let selectedRecord={};\r\n        extractedColumnList.map((item, index) => {\r\n          if (item.ndesigncomponentcode == designComponents.COMBOBOX) {\r\n            ComboFieldData = constructOptionList(item.objectValue === null ? response[index].data || [] : response[index].data[item.objectValue], item.foreignDataField,\r\n              item.dataField, undefined, undefined, undefined);\r\n            dataList[item.dataField] = ComboFieldData.get(\"OptionList\");\r\n          }else if(item.ndesigncomponentcode === designComponents.CHECKBOX  && item.defaultvalue){\r\n            selectedRecord[item.controlName]= transactionStatus.YES;\r\n\r\n          }\r\n        });\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            dataList,\r\n            operation,\r\n            screenName: inputParam.displayName,\r\n            openModal: true,\r\n            ncontrolCode, loading: false,selectedRecord\r\n          }\r\n        })\r\n      })\r\n\r\n      .catch(error => {\r\n\r\n        dispatch(initRequest(false));\r\n\r\n        if (error.response !== undefined && error.response.status === 500) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else if (error.response === undefined) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else {\r\n          toast.warn(intl.formatMessage({\r\n            id: error.response.data\r\n          }));\r\n\r\n        }\r\n\r\n      })\r\n\r\n  }\r\n\r\n}\r\n\r\n//Fetch record when clicking edit button in Type3Component\r\nexport const fetchRecordCombo = (fetchRecordParam) => {\r\n  return (dispatch) => {\r\n\r\n    dispatch(initRequest(true));\r\n    let urlArray = [];\r\n    const url = fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\";\r\n    urlArray.push(rsapi.post(url, { [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue, \"userinfo\": fetchRecordParam.userInfo }));\r\n    fetchRecordParam.extractedColumnList.map(item => {\r\n\r\n      if (item.elnget) {\r\n        urlArray.push(rsapi.post(fetchRecordParam.integrationSettings[0].slinkname + \"/\" + item.classUrl + \"/\" + item.methodUrl, {}))\r\n      }\r\n      else if (item.classUrl && item.methodUrl) {\r\n\r\n        if (item.parentPrimaryField && item.parentPrimaryField !== null) {\r\n          urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl,\r\n            {\r\n              [item.foreignDataField]: fetchRecordParam.editRow[item.foreignDataField],\r\n              [item.parentPrimaryField]: fetchRecordParam.editRow[item.parentPrimaryField] || undefined,\r\n              \"userinfo\": fetchRecordParam.userInfo\r\n            }))\r\n        }\r\n        else {\r\n          urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, {\r\n            [item.foreignDataField]:\r\n              fetchRecordParam.editRow[item.foreignDataField], \"userinfo\": fetchRecordParam.userInfo\r\n          }))\r\n        }\r\n\r\n        // urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, {[item.parentPrimaryField]: fetchRecordParam.editRow.nprojecttypecode , \"userinfo\": fetchRecordParam.userInfo}))\r\n      }\r\n    });\r\n\r\n    Axios.all(urlArray)\r\n      .then(response => {\r\n\r\n        let ComboFieldData = [];\r\n        let dataList = [];\r\n        let selectedRecordData = { ...response[0].data };\r\n        let responseData = [...response];\r\n        let extractedColumnData = [];\r\n        responseData.splice(0, 1);\r\n\r\n        fetchRecordParam.extractedColumnList.map((item) => {\r\n          if (item.ndesigncomponentcode === designComponents.COMBOBOX) {\r\n            extractedColumnData.push(item);\r\n            if (!item.hideNARecord || selectedRecordData[item.tableDataField]!==-1) {\r\n              selectedRecordData[item.dataField] = {\r\n                value: selectedRecordData[item.foreignDataField],\r\n                label: selectedRecordData[item.dataField]\r\n              }\r\n            }\r\n          }\r\n          else if (item.ndesigncomponentcode === designComponents.DATEPICKER) {\r\n            selectedRecordData[item.dataField] = rearrangeDateFormat(fetchRecordParam.userInfo, selectedRecordData[item.dataField]);\r\n          }\r\n        })\r\n\r\n        extractedColumnData.map((field, index) => {\r\n          responseData.map((item, indexValue) => {\r\n            if (index === indexValue) {\r\n              if ((field.classUrl === 'limselnusermapping' && field.methodUrl === 'getLimsUsers') || (field.classUrl === 'limselnsitemapping' && field.methodUrl === 'getLimsSite')) {\r\n                responseData[index].data.push(response[0].data);\r\n              }\r\n              ComboFieldData = constructOptionList(field.objectValue === null ? responseData[index].data || [] : responseData[index].data[field.objectValue], field.foreignDataField,\r\n                field.dataField, undefined, undefined, undefined);\r\n              dataList[field.dataField] = ComboFieldData.get(\"OptionList\");\r\n            }\r\n          })\r\n        });\r\n\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            selectedRecord: selectedRecordData,\r\n            screenName: fetchRecordParam.screenName,\r\n            operation: fetchRecordParam.operation,\r\n            openModal: true,\r\n            ncontrolCode: fetchRecordParam.ncontrolCode,\r\n            loading: false,\r\n            selectedId: fetchRecordParam.primaryKeyValue,\r\n            dataList\r\n          }\r\n        });\r\n      })\r\n      .catch(error => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        if (error.response !== undefined && error.response.status === 500) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else if (error.response === undefined) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else {\r\n          toast.warn(intl.formatMessage({ id: error.response.data }));\r\n        }\r\n      })\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n//Fetch record when clicking edit button in Type3Component\r\n// export const fetchRecordCombo = (fetchRecordParam) => {\r\n//   return (dispatch) => {\r\n\r\n//     dispatch(initRequest(true));\r\n//     let urlArray = [];\r\n//     const url = fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\";\r\n//     urlArray.push(rsapi.post(url, { [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue, \"userinfo\": fetchRecordParam.userInfo }));\r\n//     fetchRecordParam.extractedColumnList.map(item => {\r\n//       if(item.classUrl && item.methodUrl){\r\n\r\n//         if(item.elnget){\r\n//           urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\r\n//         }\r\n//         else{\r\n//           urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { \"userinfo\" : fetchRecordParam.userInfo }))\r\n//         }\r\n//         //urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { \"userinfo\" : fetchRecordParam.userInfo }))\r\n//       if (item.classUrl && item.methodUrl) {\r\n//         urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, { \"userinfo\": fetchRecordParam.userInfo }))\r\n//       }\r\n//     });\r\n\r\n//     Axios.all(urlArray)\r\n//       .then(response => {\r\n\r\n//       fetchRecordParam.extractedColumnList.map((item) => {\r\n//         if(item.ndesigncomponentcode === designComponents.COMBOBOX){\r\n//           extractedColumnData.push(item);\r\n//           selectedRecordData[item.dataField] = {\r\n//             value:selectedRecordData[item.foreignDataField],\r\n//             label:selectedRecordData[item.dataField]\r\n//           }                      \r\n//         }\r\n//         else if(item.ndesigncomponentcode === designComponents.DATEPICKER){\r\n//           selectedRecordData[item.dataField] = rearrangeDateFormat(fetchRecordParam.userInfo, selectedRecordData[item.dataField]);\r\n//         }\r\n//       })\r\n\r\n//       extractedColumnData.map((field, index) => {\r\n//         responseData.map((item, indexValue) => {\r\n//           if(index === indexValue){\r\n//             if(field.classUrl==='limselnusermapping'&&field.methodUrl==='getLimsUsers'){\r\n//             responseData[index].data.push(response[0].data);}\r\n//             ComboFieldData = constructOptionList(field.objectValue === null ? responseData[index].data || [] : responseData[index].data[field.objectValue], field.foreignDataField,\r\n//               field.dataField, undefined, undefined, undefined);\r\n//          dataList[field.dataField] = ComboFieldData.get(\"OptionList\");\r\n//         let ComboFieldData = [];\r\n//         let dataList = [];\r\n//         let selectedRecordData = { ...response[0].data };\r\n//         let responseData = [...response];\r\n//         let extractedColumnData = [];\r\n//         responseData.splice(0, 1);\r\n\r\n//         fetchRecordParam.extractedColumnList.map((item) => {\r\n//           if (item.ndesigncomponentcode === designComponents.COMBOBOX) {\r\n//             extractedColumnData.push(item);\r\n//             selectedRecordData[item.dataField] = {\r\n//               value: selectedRecordData[item.foreignDataField],\r\n//               label: selectedRecordData[item.dataField]\r\n//             }\r\n//           }\r\n//           else if (item.ndesigncomponentcode === designComponents.DATEPICKER) {\r\n//             selectedRecordData[item.dataField] = rearrangeDateFormat(fetchRecordParam.userInfo, selectedRecordData[item.dataField]);\r\n//           }\r\n//         })\r\n\r\n//         extractedColumnData.map((field, index) => {\r\n//           responseData.map((item, indexValue) => {\r\n//             if (index === indexValue) {\r\n//               ComboFieldData = constructOptionList(field.objectValue === null ? responseData[index].data || [] : responseData[index].data[field.objectValue], field.foreignDataField,\r\n//                 field.dataField, undefined, undefined, undefined);\r\n//               dataList[field.dataField] = ComboFieldData.get(\"OptionList\");\r\n//             }\r\n//           })\r\n//         });\r\n\r\n//         dispatch({\r\n//           type: DEFAULT_RETURN,\r\n//           payload: {\r\n//             selectedRecord: selectedRecordData,\r\n//             screenName: fetchRecordParam.screenName,\r\n//             operation: fetchRecordParam.operation,\r\n//             openModal: true,\r\n//             ncontrolCode: fetchRecordParam.ncontrolCode,\r\n//             loading: false,\r\n//             selectedId: fetchRecordParam.primaryKeyValue,\r\n//             dataList\r\n//           }\r\n//         });\r\n//       })\r\n//       .catch(error => {\r\n//         dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n//         if (error.response.status === 500) {\r\n//           toast.error(intl.formatMessage({ id: error.message }));\r\n//         } else {\r\n//           toast.warn(intl.formatMessage({ id: error.response.data }));\r\n//         }\r\n//       })\r\n//   }\r\n// }\r\nexport function onServiceLoad(userInfo, inputParam, ncontrolCode, comboColumnField, primarykeyvalue, inputData) {\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n    let urlArray = [];\r\n\r\n\r\n    comboColumnField.map(item => {\r\n        urlArray.push(rsapi.post(item.classUrl + \"/\" + item.onChangeUrl, {\r\n          userinfo: userInfo,\r\n          [item.tableDataField]: primarykeyvalue[item.tableDataField], \"parentPrimaryField\": inputData.selectedRecord[item.parentPrimaryField]\r\n        }))\r\n    }  //dependentParentPrimaryField into parentPrimaryField\r\n\r\n    )\r\n    Axios.all(urlArray)\r\n      .then(response => {\r\n\r\n        let ComboFieldData = [];\r\n        let dataList = [];\r\n        let selectedRecord = { ...inputData.selectedRecord };\r\n        comboColumnField.map((item, index) => {\r\n          if (item.ndesigncomponentcode == designComponents.COMBOBOX) {\r\n            ComboFieldData = constructOptionList(item.childObjectValue === null ? response[index].data || [] : response[index].data[item.childObjectValue], item.childPrimaryField,\r\n              item.childdataField, undefined, undefined, undefined);\r\n            dataList[item.childdataField] = ComboFieldData.get(\"OptionList\");\r\n            selectedRecord[item.childdataField] = undefined;\r\n\r\n          }\r\n        });\r\n\r\n        dataList = { ...inputData.dataList, ...dataList }\r\n\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            dataList,\r\n            //  operation,\r\n            screenName: inputParam.displayName,\r\n            openModal: true,\r\n            ncontrolCode, loading: false,\r\n            selectedRecord\r\n          }\r\n        })\r\n      })\r\n\r\n      .catch(error => {\r\n\r\n        dispatch(initRequest(false));\r\n\r\n        if (error.response.status === 500) {\r\n\r\n          toast.error(error.message);\r\n\r\n        } else {\r\n\r\n          toast.warn(intl.formatMessage({\r\n\r\n            id: error.response.data\r\n\r\n          }));\r\n\r\n        }\r\n\r\n      })\r\n\r\n  }\r\n\r\n}\r\n\r\nexport function dynamicFileDownload(filedata) {\r\n  return (dispatch) => {\r\n    if (filedata.viewName === 'InfoView') {\r\n      if (filedata && filedata[filedata.field[2] + ['_ssystemfilename_Sample']] !== undefined && filedata[filedata.field[2]] !== \"\") {\r\n        const inputParam = {\r\n          inputData: {\r\n            viewFile: {\r\n              ssystemfilename: filedata[filedata.field[2] + ['_ssystemfilename_Sample']],\r\n              npreregno: filedata.npreregno,\r\n              sarno: filedata.sarno,\r\n              sfilename: filedata[filedata.field[2]]\r\n            },\r\n            userinfo: filedata.userInfo\r\n          },\r\n          classUrl: \"registration\",\r\n          operation: \"view\",\r\n          methodUrl: \"RegistrationFile\",\r\n          //screenName: filedata.displayName\r\n        }\r\n        dispatch(viewAttachment(inputParam));\r\n      } else {\r\n        toast.warn(intl.formatMessage({ id: \"IDS_FILENOTUPLOADED\" }))\r\n      }\r\n    } else if (filedata.viewName === 'subSample') {\r\n      if (filedata && filedata[filedata.field[2] + ['_ssystemfilename_subSample']] !== undefined && filedata[filedata.field[2]] !== \"\") {\r\n        const inputParam = {\r\n          inputData: {\r\n            viewFile: {\r\n              ssystemfilename: filedata[filedata.field[2] + ['_ssystemfilename_subSample']],\r\n              npreregno: filedata.npreregno,\r\n              ntransactionsamplecode: filedata.ntransactionsamplecode,\r\n              ssamplearno: filedata.ssamplearno,\r\n              sfilename: filedata[filedata.field[2]],\r\n              sarno: filedata.sarno\r\n            },\r\n            userinfo: filedata.userInfo\r\n          },\r\n          classUrl: \"registration\",\r\n          operation: \"view\",\r\n          methodUrl: \"RegistrationSubSampleFile\",\r\n          //screenName: filedata.displayName\r\n        }\r\n        dispatch(viewAttachment(inputParam));\r\n      } else {\r\n        toast.warn(intl.formatMessage({ id: \"IDS_FILENOTUPLOADED\" }))\r\n      }\r\n    } else {\r\n      let isFileupload;\r\n      if (filedata && filedata[filedata['dataField'] + ['_ssystemfilename']] !== undefined && filedata[filedata['dataField']] !== \"\") {\r\n        isFileupload = true;\r\n      }\r\n      if (filedata && filedata[filedata.dataField + ['_ssystemfilename_Sample']] !== undefined && filedata[filedata.dataField] !== \"\") {\r\n        isFileupload = true;\r\n      }\r\n      if (isFileupload) {\r\n        const inputParam = {\r\n          inputData: {\r\n            viewFile: filedata.screenName === 'SampleRegistration' ?\r\n              {\r\n                ssystemfilename: filedata[filedata.dataField + ['_ssystemfilename_Sample']],\r\n                npreregno: filedata.npreregno,\r\n                sarno: filedata.sarno,\r\n                sfilename: filedata[filedata.dataField]\r\n              } :\r\n              {\r\n                ssystemfilename: filedata[filedata['dataField'] + ['_ssystemfilename']],\r\n                ndynamicmastercode: filedata.ndynamicmastercode,\r\n                ndesigntemplatemappingcode: filedata.ndesigntemplatemappingcode,\r\n                sfieldname: filedata.dataField,\r\n                sfilename: filedata[filedata.dataField]\r\n              },\r\n            userinfo: filedata.userInfo\r\n          },\r\n          classUrl: filedata.classUrl,\r\n          operation: \"view\",\r\n          methodUrl: filedata.methodUrl,\r\n          //screenName: filedata.displayName\r\n        }\r\n        dispatch(viewAttachment(inputParam));\r\n      } else {\r\n        toast.warn(intl.formatMessage({ id: \"IDS_FILENOTUPLOADED\" }))\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport function modalSave(inputParam, masterData) {\r\n\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n    rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, inputParam.inputData).then(response => {\r\n\r\n      masterData = {\r\n        ...masterData,\r\n        ...response.data\r\n      }\r\n      if (inputParam.postParam) {\r\n\r\n        const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n\r\n          x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n\r\n        );\r\n\r\n        masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n\r\n        if (masterData[\"searchedData\"] !== undefined) {\r\n\r\n          const foundIndex = masterData[\"searchedData\"].findIndex(\r\n\r\n            x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n\r\n          );\r\n          masterData[\"searchedData\"][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n        }\r\n        // sortData(masterData);\r\n      }\r\n      masterData = sortData(masterData);\r\n      dispatch({\r\n        type: DEFAULT_RETURN, payload: {\r\n\t\t//ALPD-4519-Vignesh R(06-08-2024)\r\n          loadEsign: false,\r\n          loading: false,\r\n          masterData,\r\n          modalShow: inputParam.modalShow,\r\n          openModal: false,\r\n          modalTitle: undefined,\r\n          operation: inputParam.operation\r\n        }\r\n      }\r\n      )\r\n    })\r\n      .catch(error => {\r\n\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            loadEsign: false,\r\n            loading: false,\r\n            modalShow: true,\r\n            openModal: false\r\n          }\r\n        })\r\n\r\n        if (error.response.status === 500) {\r\n          toast.error(error.message);\r\n        }\r\n        else {\r\n          toast.warn(error.response.data);\r\n        }\r\n      })\r\n  }\r\n\r\n}\r\n\r\nexport function openBarcodeModal(selectedMaster, ncontrolCode, userinfo) {\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n\r\n\r\n    let urlArray = [];\r\n    const getPrinter = rsapi.post(\"barcode/getPrinter\", userinfo);\r\n    const getControlBasedBarcode = rsapi.post(\"barcodeconfiguration/checkConfiguration\", { selectedMaster, ncontrolCode, userinfo, Multiselect:Array.isArray(selectedMaster) });\r\n    urlArray = [getPrinter, getControlBasedBarcode]\r\n    Axios.all(urlArray).then(response => {\r\n\r\n      const printer = constructOptionList(response[0].data || [], \"sprintername\",\r\n        \"sprintername\", undefined, undefined, true).get(\"OptionList\");\r\n\r\n      const barcode = constructOptionList(response[1].data.Barcode || [], \"sbarcodename\",\r\n        \"sbarcodename\", undefined, undefined, true).get(\"OptionList\");\r\n\r\n       const selectedRecord={}\r\n\r\n       if(printer.length>0)\r\n       selectedRecord['sprintername']=printer[0];\r\n\r\n        if(barcode.length>0)selectedRecord['nbarcode']=barcode[0];\r\n        selectedRecord['nbarcodeprint']=1\r\n       \r\n\r\n      dispatch({\r\n        type: DEFAULT_RETURN,\r\n        payload: {\r\n          openModal: true,\r\n          operation: \"barcode\",\r\n          BarcodeList: barcode,\r\n          Printer: printer,\r\n          loading: false,\r\n          ncontrolcode: ncontrolCode,\r\n          nbarcodeprint: response[1].data.nbarcodeprint,\r\n          barcodeSelectedRecord: selectedMaster,\r\n          selectedRecord:selectedRecord\r\n        }\r\n      })\r\n    })\r\n\r\n      .catch(error => {\r\n\r\n        dispatch(initRequest(false));\r\n\r\n        if (error.response.status === 500) {\r\n\r\n          toast.error(error.message);\r\n\r\n        } else {\r\n\r\n          toast.warn(intl.formatMessage({\r\n\r\n            id: error.response.data\r\n\r\n          }));\r\n\r\n        }\r\n\r\n      })\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\nexport function barcodeGeneration(selectedMaster, ncontrolCode, userinfo, selectedRecord) {\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n    let list = []\r\n    if (Array.isArray(selectedMaster)) {\r\n      list = selectedMaster\r\n    } else {\r\n      list.push(selectedMaster)\r\n    }\r\n    rsapi.post(\"barcodeconfiguration/barcodeGeneration\", {\r\n      selectedMaster: list, ncontrolCode,\r\n      userinfo, nbarcode: selectedRecord.nbarcode.item.nbarcode, sprintername: selectedRecord.sprintername.value,\r\n      nbarcodeprintcount: selectedRecord.nbarcodeprintcount ? selectedRecord.nbarcodeprintcount : 1\r\n    })\r\n      .then(response => {\r\n        toast.info(response.data)\r\n\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            openModal: false,\r\n            operation: \"barcode\",\r\n            loading: false,\r\n            selectedRecord: {},\r\n            barcodeSelectedRecord: undefined\r\n          }\r\n        })\r\n      })\r\n\r\n      .catch(error => {\r\n\r\n        dispatch(initRequest(false));\r\n\r\n        if (error.response.status === 500) {\r\n\r\n          toast.error(error.message);\r\n\r\n        } else {\r\n\r\n          toast.warn(intl.formatMessage({\r\n\r\n            id: error.response.data\r\n\r\n          }));\r\n\r\n        }\r\n\r\n      })\r\n\r\n  }\r\n\r\n}\r\n\r\nexport const syncAction = (inputParam) => {\r\n  return (dispatch) => {\r\n    dispatch(initRequest(true));\r\n    return rsapi.post(inputParam.classUrl + \"/\"+inputParam.operation+ inputParam.methodUrl, inputParam.inputData)\r\n      .then(response => {       \r\n \r\n        let data = response.data;\r\n        sortData(data);\r\n \r\n        const updateInfo = {\r\n          typeName: DEFAULT_RETURN,\r\n          data: { masterData: [],operation:inputParam.operation, organisation: undefined, }\r\n        }\r\n        dispatch(updateStore(updateInfo))\r\n \r\n       \r\n \r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            masterData: data,\r\n            operation:inputParam.operation,\r\n            activeTestTab: data.activeTestTab,\r\n            activeTestKey: data.activeTestKey,\r\n            activeBCTab: data.activeBCTab,\r\n            inputParam: inputParam,\r\n            masterStatus: \"\",\r\n            userInfo: inputParam.inputData.userinfo,\r\n            loading: false, \r\n            openModal :false,\r\n            selectedId: null,\r\n            selectedRecord: {},\r\n            dataState: undefined,\r\n            organisation: {\r\n              selectedNode: data.SelectedNode, selectedNodeName: data.SelectedNodeName,\r\n              primaryKeyValue: data.AddedChildPrimaryKey\r\n            },\r\n            displayName: inputParam.displayName,\r\n            reportFilePath: undefined,\r\n            skip: 0, take: undefined,\r\n            testskip: 0,\r\n            testtake: inputParam.inputData.settings ? inputParam.inputData.settings[12] : 10,           \r\n          }\r\n        })\r\n \r\n      })\r\n      .catch(error => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false,openModal:false,loadEsign:false } })\r\n        if (error.response.status === 503) {         \r\n          toast.warn(intl.formatMessage({id:\"IDS_SYNCUNABLEOATTEMPT\"}));            \r\n        }else if(error.response.status === 500){\r\n          toast.error(error.message);\r\n        }else {\r\n          toast.warn(error.response.data);\r\n        }\r\n       \r\n      })\r\n \r\n  };\r\n};\r\n\r\n\r\n//export const generateControlBasedReport = (inputParam) => {\r\n  export const generateControlBasedReport = (ncontrolCode, selectedRecord, Login, primaryKeyField, primaryKeyValue) => {\r\n    return (dispatch) => {\r\n      dispatch(initRequest(true));\r\n      const inputParam = {\r\n        primaryKeyField: primaryKeyField,\r\n        nformcode: Login.userInfo.nformcode,\r\n        sreportlink: Login.reportSettings[15],\r\n        smrttemplatelink: Login.reportSettings[16],\r\n        ncontrolcode: ncontrolCode,\r\n        userinfo: Login.userInfo,\r\n        selectedRecord: selectedRecord,\r\n        ntranscode: selectedRecord.ntransactionstatus,\r\n        primaryKeyValue: primaryKeyValue,\r\n        nreporttypecode:REPORTTYPE.CONTROLBASED\r\n      }\r\n      rsapi.post(\"controlbasedreport/controlBasedReport\", {\r\n  \r\n        ...inputParam\r\n      })\r\n        .then(response => {\r\n  \r\n          if (response.data.SelectedViewReportMaster && response.data.SelectedViewReportMaster.sreportformatdetail === 'viewer') {\r\n  \r\n            viewReportDetailWithParametersReports(response.data, inputParam);\r\n            dispatch({\r\n              type: DEFAULT_RETURN,\r\n              payload: {\r\n                loading: false,\r\n                loadEsign: false,\r\n                openModal: false,\r\n                showConfirmAlert: false\r\n              }\r\n            })\r\n          } else {\r\n            dispatch({\r\n              type: DEFAULT_RETURN,\r\n              payload: {\r\n                loading: false,\r\n                loadEsign: false,\r\n                openModal: false,\r\n                showConfirmAlert: false\r\n              }\r\n            })\r\n            document.getElementById(\"download_data\").setAttribute(\"href\", response.data.filepath);\r\n            document.getElementById(\"download_data\").click();\r\n          }\r\n        }).catch(error => {\r\n          dispatch({\r\n            type: DEFAULT_RETURN,\r\n            payload: {\r\n              loading: false\r\n            }\r\n          })\r\n          if (error.response.status === 500) {\r\n            toast.error(error.message);\r\n          } else {\r\n            toast.warn(error.response.data);\r\n          }\r\n        })\r\n    }\r\n  }\r\n  \r\n    export const dynamicExportTemplate = (inputParam) => {\r\n      return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"exportimport/exportTemplate\", inputParam)\r\n        .then(response => {\r\n          let value = \"\";\r\n          if (response.data.rtn === \"Success\") {\r\n              value = response.data[\"exportFileViewUrl\"];\r\n              const win = window.open(value);\r\n              if (win) {\r\n                  win.focus();\r\n              } else {\r\n                  toast.warn(intl.formatMessage(\"IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE\"));\r\n              }\r\n          } else {\r\n              if (response.data.rtn) {\r\n                  toast.warn(intl.formatMessage({ id: response.data.rtn }));\r\n              }\r\n          }\r\n          dispatch({\r\n              type: DEFAULT_RETURN, payload: {\r\n                  loading: false,\r\n                  loadEsign: false, openModal: false\r\n              }\r\n          })\r\n      })\r\n      .catch(error => {\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n          if (error.response.status === 500) {\r\n              toast.error(error.message);\r\n          }\r\n          else {\r\n              toast.warn(error.response.data);\r\n          }\r\n      })\r\n        }         \r\n    };\r\n  \r\n    export function dynamicImportTemplate(inputParam, masterData, modalName, defaultInput,ConfirmMessage) {\r\n      return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload && inputParam.isFileupload!=='undefined') {\r\n          const formData = inputParam.formData;\r\n          formData.append(\"userinfo\", JSON.stringify(inputParam.inputData.userinfo));\r\n          requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, formData);\r\n        } else {\r\n          requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData });\r\n        }\r\n        return requestUrl\r\n          .then(response => {\r\n          if (response.data.rtn  === \"Success\") {\r\n            let inputParams={\r\n              classUrl:response.data.classUrl ,methodUrl:response.data.methodUrl ,inputData:{'userinfo':inputParam.inputData.userinfo},\r\n              displayName:inputParam.displayName\r\n            }\r\n            // dispatch(callService(inputParams))\r\n    \r\n            let data = response.data.ResponseBody;\r\n            sortData(data);\r\n    \r\n            const updateInfo = {\r\n              typeName: DEFAULT_RETURN,\r\n              data: { masterData: [], organisation: undefined, }\r\n            }\r\n            dispatch(updateStore(updateInfo))\r\n    \r\n    \r\n            dispatch({\r\n              type: DEFAULT_RETURN,\r\n              payload: {\r\n                openExcelModal: false,\r\n                masterData: data,\r\n                activeTestTab: data.activeTestTab,\r\n                activeTestKey: data.activeTestKey,\r\n                activeBCTab: data.activeBCTab,\r\n                inputParam: inputParams,\r\n                masterStatus: \"\",\r\n                userInfo: inputParam.inputData.userinfo,\r\n                loading: false, selectedId: null, selectedRecord: {},\r\n                dataState: undefined,\r\n                organisation: {\r\n                  selectedNode: data.SelectedNode, selectedNodeName: data.SelectedNodeName,\r\n                  primaryKeyValue: data.AddedChildPrimaryKey\r\n                },\r\n                displayName: inputParams.displayName,\r\n                reportFilePath: undefined,\r\n                skip: 0, take: undefined,\r\n                testskip: 0,\r\n                //testtake: 5,\r\n                testtake: inputParams.inputData.settings ? inputParams.inputData.settings[12] : 10,\r\n                //  key:inputParam.key!==undefined?inputParam.key:\"\"\r\n              }\r\n            })\r\n          } \r\n          dispatch({\r\n              type: DEFAULT_RETURN, payload: {\r\n                  loading: false,\r\n                  loadEsign: false, openExcelModal: false\r\n              }\r\n          })\r\n      })\r\n      .catch(error => {\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n          if (error.response.status === 500) {\r\n              toast.error(error.message);\r\n          }\r\n          else {\r\n              toast.warn(error.response.data);\r\n          }\r\n      })\r\n        }         \r\n    };"]},"metadata":{},"sourceType":"module"}