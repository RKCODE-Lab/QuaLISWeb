{"ast":null,"code":"var _jsxFileName = \"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\src\\\\pages\\\\joballocation\\\\NewCustomItem.jsx\";\nimport { SchedulerItem, useSchedulerEditItemFormItemContext, useSchedulerEditItemRemoveItemContext, useSchedulerEditItemShowOccurrenceDialogContext, useSchedulerEditItemShowRemoveDialogContext } from \"@progress/kendo-react-scheduler\";\nimport React from \"react\";\nimport { Popup } from \"@progress/kendo-react-popup\";\nimport { connect } from 'react-redux';\nimport { getInstrumentForSchedule } from '../../actions';\nimport { FormWithCustomEditor } from './custom-form';\nimport { toast } from \"react-toastify\";\nimport { useInternationalization } from \"@progress/kendo-react-intl\";\nimport { Card, CardBody, CardHeader, CardTitle } from \"@progress/kendo-react-layout\";\nimport { Button } from \"@progress/kendo-react-buttons\";\nimport { useAsyncFocusBlur } from \"@progress/kendo-react-common\";\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nconst CustomItem = props => {\n  const intl = useInternationalization();\n  const item = React.useRef(null);\n  const [show, setShow] = React.useState(false);\n  const resourceWithColor = props.group.resources.find(resource => resource.colorField && resource[resource.colorField] !== undefined);\n  const color = resourceWithColor && resourceWithColor.colorField && resourceWithColor[resourceWithColor.colorField];\n  const [formItem, setFormItem] = useSchedulerEditItemFormItemContext();\n  const [, setRemoveItem] = useSchedulerEditItemRemoveItemContext();\n  const [, setShowOccurrenceDialog] = useSchedulerEditItemShowOccurrenceDialogContext();\n  const [, setShowRemoveDialog] = useSchedulerEditItemShowRemoveDialogContext();\n  const handleClick = React.useCallback(event => {\n    setShow(true);\n\n    if (props.onClick) {\n      props.onClick(event);\n    }\n  }, [props]);\n  const handleBlur = React.useCallback(event => {\n    setShow(false);\n\n    if (props.onBlur) {\n      props.onBlur(event);\n    }\n  }, [props]);\n  const handleCloseClick = React.useCallback(() => {\n    setShow(false);\n  }, [setShow]);\n  const handleEditClick = React.useCallback(() => {\n    if (props.dataItem && props.dataItem.InstrumentCategory) {\n      if (props.dataItem.ntransactionstatus) {\n        if (props.dataItem.ntransactionstatus !== 20) {\n          props.getInstrumentForSchedule(props.dataItem.InstrumentCategory, props.Login.userInfo);\n          setFormItem(props.dataItem);\n          setShow(false);\n          setFormItem(props.dataItem);\n        } else {\n          toast.info(\"Already allocted\");\n        }\n      } else {\n        props.getInstrumentForSchedule(props.dataItem.InstrumentCategory, props.Login.userInfo);\n        setFormItem(props.dataItem);\n        setShow(false);\n        setFormItem(props.dataItem);\n      }\n    } //setShow(false);\n    //   if (props.isRecurring) {\n    //     setShowOccurrenceDialog(true);\n    //   }\n\n  }, [setFormItem, props.dataItem, props.isRecurring, setShowOccurrenceDialog]);\n  const handleDeleteClick = React.useCallback(() => {\n    setShow(false);\n    setRemoveItem(props.dataItem);\n\n    if (props.isRecurring) {\n      setShowOccurrenceDialog(true);\n    } else {\n      setShowRemoveDialog(true);\n    }\n  }, [setRemoveItem, props.dataItem, props.isRecurring, setShowOccurrenceDialog, setShowRemoveDialog]);\n  const handleFormItemChange = React.useCallback(event => {\n    console.log(\"hello\");\n    console.log(\"handleFormItemChange\", event.value);\n    console.log(\"handleFormItemChange1\", formItem);\n\n    if (event.value) {\n      if (event.value.ntransactionstatus) {\n        if (event.value.ntransactionstatus !== 20) {\n          setFormItem(event.value);\n        } else {\n          toast.info(\"Already Allocted\");\n        }\n      } else {\n        setFormItem(event.value);\n      }\n    } else {\n      setFormItem(event.value);\n    }\n  }, []);\n  const {\n    onFocus,\n    onBlur\n  } = useAsyncFocusBlur({\n    onFocus: props.onFocus,\n    onBlur: handleBlur\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SchedulerItem, Object.assign({\n    ref: item\n  }, props, {\n    onClick: handleClick,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    formItem: formItem,\n    onFormItemChange: handleFormItemChange,\n    form: FormWithCustomEditor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Popup, {\n    anchor: item.current && item.current.element,\n    show: show,\n    style: {\n      width: 300\n    },\n    anchorAlign: {\n      horizontal: \"right\",\n      vertical: \"center\"\n    },\n    popupAlign: {\n      horizontal: \"left\",\n      vertical: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    tabIndex: -1,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"ml-auto pb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    iconClass: \"k-icon k-i-edit\",\n    fillMode: \"flat\",\n    onClick: handleEditClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    iconClass: \"k-icon k-i-delete\",\n    fillMode: \"flat\",\n    onClick: handleDeleteClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    iconClass: \"k-icon k-i-close\",\n    fillMode: \"flat\",\n    onClick: handleCloseClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CardTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundColor: color,\n      width: 16,\n      height: 16,\n      position: \"relative\",\n      top: \"50%\",\n      borderRadius: 4,\n      transform: \"translateY(-50%)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 23\n    }\n  }, props.title))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 23\n    }\n  }, intl.formatDate(props.zonedStart, \"EEEE, d MMMM\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"k-icon k-i-clock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 23\n    }\n  }, \"From: \", intl.formatDate(props.zonedStart, \"t\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 23\n    }\n  }, \"To: \", intl.formatDate(props.zonedEnd, \"t\"))))))))));\n};\n\nexport default connect(mapStateToProps, {\n  getInstrumentForSchedule\n})(CustomItem);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/joballocation/NewCustomItem.jsx"],"names":["SchedulerItem","useSchedulerEditItemFormItemContext","useSchedulerEditItemRemoveItemContext","useSchedulerEditItemShowOccurrenceDialogContext","useSchedulerEditItemShowRemoveDialogContext","React","Popup","connect","getInstrumentForSchedule","FormWithCustomEditor","toast","useInternationalization","Card","CardBody","CardHeader","CardTitle","Button","useAsyncFocusBlur","mapStateToProps","state","Login","CustomItem","props","intl","item","useRef","show","setShow","useState","resourceWithColor","group","resources","find","resource","colorField","undefined","color","formItem","setFormItem","setRemoveItem","setShowOccurrenceDialog","setShowRemoveDialog","handleClick","useCallback","event","onClick","handleBlur","onBlur","handleCloseClick","handleEditClick","dataItem","InstrumentCategory","ntransactionstatus","userInfo","info","isRecurring","handleDeleteClick","handleFormItemChange","console","log","value","onFocus","current","element","width","horizontal","vertical","backgroundColor","height","position","top","borderRadius","transform","title","formatDate","zonedStart","zonedEnd"],"mappings":"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","sourcesContent":["import { SchedulerItem, useSchedulerEditItemFormItemContext, useSchedulerEditItemRemoveItemContext, useSchedulerEditItemShowOccurrenceDialogContext, useSchedulerEditItemShowRemoveDialogContext } from \"@progress/kendo-react-scheduler\";\r\nimport React from \"react\";\r\nimport { Popup } from \"@progress/kendo-react-popup\";\r\nimport { connect } from 'react-redux';\r\nimport { getInstrumentForSchedule } from '../../actions'\r\nimport { FormWithCustomEditor } from './custom-form';\r\nimport { toast } from \"react-toastify\";\r\nimport { useInternationalization } from \"@progress/kendo-react-intl\";\r\nimport { Card,CardBody, CardHeader,CardTitle } from \"@progress/kendo-react-layout\";\r\nimport { Button } from \"@progress/kendo-react-buttons\";\r\nimport { useAsyncFocusBlur } from \"@progress/kendo-react-common\"; \r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\n const CustomItem = (props) => {\r\n    const intl = useInternationalization();\r\n    const item = React.useRef(null);\r\n    const [show, setShow] = React.useState(false);\r\n    const resourceWithColor = props.group.resources.find(\r\n      (resource) =>\r\n        resource.colorField && resource[resource.colorField] !== undefined\r\n    );\r\n    const color =\r\n      resourceWithColor &&\r\n      resourceWithColor.colorField &&\r\n      resourceWithColor[resourceWithColor.colorField];\r\n    const [formItem, setFormItem] = useSchedulerEditItemFormItemContext();\r\n    const [, setRemoveItem] = useSchedulerEditItemRemoveItemContext();\r\n    const [, setShowOccurrenceDialog] =\r\n      useSchedulerEditItemShowOccurrenceDialogContext();\r\n    const [, setShowRemoveDialog] = useSchedulerEditItemShowRemoveDialogContext();\r\n    const handleClick = React.useCallback(\r\n      (event) => {\r\n        setShow(true);\r\n        if (props.onClick) {\r\n          props.onClick(event);\r\n        }\r\n      },\r\n      [props]\r\n    );\r\n    const handleBlur = React.useCallback(\r\n      (event) => {\r\n        setShow(false);\r\n        if (props.onBlur) {\r\n          props.onBlur(event);\r\n        }\r\n      },\r\n      [props]\r\n    );\r\n    const handleCloseClick = React.useCallback(() => {\r\n      setShow(false);\r\n    }, [setShow]);\r\n\r\n\r\n    const handleEditClick = React.useCallback(() => {\r\n\r\n\r\n        if (props.dataItem &&\r\n            props.dataItem.InstrumentCategory) {\r\n            if (props.dataItem.ntransactionstatus) {\r\n                if (props.dataItem.ntransactionstatus !== 20) {\r\n                    props.getInstrumentForSchedule(props.dataItem.InstrumentCategory, props.Login.userInfo);\r\n                    setFormItem(props.dataItem);\r\n                    setShow(false);\r\n                    setFormItem(props.dataItem);\r\n                } else {\r\n                    toast.info(\"Already allocted\")\r\n                }\r\n\r\n            } else {\r\n                props.getInstrumentForSchedule(props.dataItem.InstrumentCategory, props.Login.userInfo);\r\n                setFormItem(props.dataItem);\r\n                setShow(false);\r\n                setFormItem(props.dataItem);\r\n            }\r\n\r\n        }\r\n\r\n      //setShow(false);\r\n      \r\n    //   if (props.isRecurring) {\r\n    //     setShowOccurrenceDialog(true);\r\n    //   }\r\n    }, [setFormItem, props.dataItem, props.isRecurring, setShowOccurrenceDialog]);\r\n    const handleDeleteClick = React.useCallback(() => {\r\n      setShow(false);\r\n      setRemoveItem(props.dataItem);\r\n      if (props.isRecurring) {\r\n        setShowOccurrenceDialog(true);\r\n      } else {\r\n        setShowRemoveDialog(true);\r\n      }\r\n    }, [\r\n      setRemoveItem,\r\n      props.dataItem,\r\n      props.isRecurring,\r\n      setShowOccurrenceDialog,\r\n      setShowRemoveDialog,\r\n    ]);\r\n    const handleFormItemChange = React.useCallback((event) => {\r\n        console.log(\"hello\")\r\n        console.log(\"handleFormItemChange\", event.value)\r\n        console.log(\"handleFormItemChange1\", formItem)\r\n\r\n        if(event.value){\r\n            if(event.value.ntransactionstatus){\r\n                if(event.value.ntransactionstatus!==20){\r\n                    setFormItem(event.value);\r\n                }else{\r\n                    toast.info(\"Already Allocted\")\r\n                }\r\n\r\n            }else{\r\n                setFormItem(event.value);\r\n            }\r\n\r\n        }else{\r\n            setFormItem(event.value);\r\n        }\r\n\r\n    }, []);\r\n    const { onFocus, onBlur } = useAsyncFocusBlur({\r\n      onFocus: props.onFocus,\r\n      onBlur: handleBlur,\r\n    });\r\n    return (\r\n      <React.Fragment>\r\n        <SchedulerItem\r\n          ref={item}\r\n          {...props}\r\n          onClick={handleClick}\r\n          onFocus={onFocus}\r\n          onBlur={onBlur}\r\n          formItem={formItem}\r\n          onFormItemChange={handleFormItemChange}\r\n          form={FormWithCustomEditor}\r\n        >\r\n        </SchedulerItem>\r\n        <Popup\r\n          anchor={item.current && item.current.element}\r\n          show={show}\r\n          style={{\r\n            width: 300,\r\n          }}\r\n          anchorAlign={{\r\n            horizontal: \"right\",\r\n            vertical: \"center\",\r\n          }}\r\n          popupAlign={{\r\n            horizontal: \"left\",\r\n            vertical: \"center\",\r\n          }}\r\n        >\r\n          <div tabIndex={-1} onFocus={onFocus} onBlur={onBlur}>\r\n            <Card>\r\n              <CardHeader className=\"ml-auto pb-0\">\r\n                <Button\r\n                  iconClass=\"k-icon k-i-edit\"\r\n                  fillMode=\"flat\"\r\n                  onClick={handleEditClick}\r\n                />\r\n                <Button\r\n                  iconClass=\"k-icon k-i-delete\"\r\n                  fillMode=\"flat\"\r\n                  onClick={handleDeleteClick}\r\n                />\r\n                <Button\r\n                  iconClass=\"k-icon k-i-close\"\r\n                  fillMode=\"flat\"\r\n                  onClick={handleCloseClick}\r\n                />\r\n              </CardHeader>\r\n              <CardBody>\r\n                <CardTitle>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-1\">\r\n                      <div\r\n                        style={{\r\n                          backgroundColor: color,\r\n                          width: 16,\r\n                          height: 16,\r\n                          position: \"relative\",\r\n                          top: \"50%\",\r\n                          borderRadius: 4,\r\n                          transform: \"translateY(-50%)\",\r\n                        }}\r\n                      />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                      <div>{props.title}</div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-1\" />\r\n                    <div className=\"col\">\r\n                      <small>\r\n                        {intl.formatDate(props.zonedStart, \"EEEE, d MMMM\")}\r\n                      </small>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-1\">\r\n                      <span className=\"k-icon k-i-clock\" />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                      <div>From: {intl.formatDate(props.zonedStart, \"t\")}</div>\r\n                      <div>To: {intl.formatDate(props.zonedEnd, \"t\")}</div>\r\n                    </div>\r\n                  </div>\r\n                </CardTitle>\r\n              </CardBody>\r\n            </Card>\r\n          </div>\r\n        </Popup>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n  export default connect(mapStateToProps, { getInstrumentForSchedule })(CustomItem);"]},"metadata":{},"sourceType":"module"}