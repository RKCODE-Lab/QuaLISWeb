{"ast":null,"code":"import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React,{Component}from\"react\";import merge from\"lodash/merge\";import{Query,Builder,BasicConfig,BasicFuncs,Utils as QbUtils}from\"react-awesome-query-builder\";import\"react-awesome-query-builder/lib/css/styles.css\";import{injectIntl}from\"react-intl\";import AddFilteredPatient from\"../pages/contactmaster/AddFilteredPatient\";var InitialConfig=BasicConfig;var conjunctions={AND:InitialConfig.conjunctions.AND,OR:InitialConfig.conjunctions.OR};var operators1=_objectSpread({},InitialConfig.operators);delete operators1.proximity;var operators=_objectSpread(_objectSpread({},operators1),{},{between:_objectSpread(_objectSpread({},operators1.between),{},{textSeparators:[\"from\",\"to\"]})});var widgets=_objectSpread(_objectSpread({},InitialConfig.widgets),{},{date:_objectSpread(_objectSpread({},InitialConfig.widgets.date),{},{dateFormat:\"DD.MM.YYYY\",valueFormat:\"YYYY-MM-DD\"})});var types=_objectSpread(_objectSpread({},InitialConfig.types),{},{boolean:merge(InitialConfig.types.boolean,{widgets:{boolean:{widgetProps:{hideOperator:true,operatorInlineLabel:\"is\"}}}})});var localeSettings={locale:{moment:\"ru\"},valueLabel:\"Value\",valuePlaceholder:\"Value\",operatorLabel:\"Operator\",fieldPlaceholder:\"Select field\",operatorPlaceholder:\"Select operator\",deleteLabel:null,addGroupLabel:\"Add group\",addRuleLabel:\"Add rule\",addSubRuleLabel:\"Add sub rule\",delGroupLabel:null,notLabel:\"Not\",valueSourcesPopupTitle:\"Select value source\",removeRuleConfirmOptions:{title:\"Are you sure delete this rule?\",okText:\"Yes\",okType:\"danger\"},removeGroupConfirmOptions:{title:\"Are you sure delete this group?\",okText:\"Yes\",okType:\"danger\"}};var settings1=_objectSpread({},InitialConfig.settings);delete settings1.field;var settings=_objectSpread(_objectSpread(_objectSpread({},settings1),localeSettings),{},{valueSourcesInfo:{value:{label:\"Value\"},field:{label:\"Field\",widget:\"field\"},func:{label:\"Function\",widget:\"func\"}},// canReorder: false,\n// canRegroup: false,\n// showNot: false,\n// showLabels: true,\nmaxNesting:5,canLeaveEmptyGroup:true,shouldCreateEmptyGroup:false,showErrorMessage:true,customFieldSelectProps:{showSearch:true}//after deletion\n// renderField: (props) => <FieldCascader {...props} />,\n// renderOperator: (props) => <FieldDropdown {...props} />,\n// renderFunc: (props) => <FieldSelect {...props} />,\n});var funcs=_objectSpread({},BasicFuncs);// delete funcs.valueSourcesInfo.field\nvar config=_objectSpread(_objectSpread({},InitialConfig),{},{conjunctions:conjunctions,operators:operators,widgets:widgets,types:types,settings:settings,funcs:funcs,fields:{}});var FilterQueryBuilder=/*#__PURE__*/function(_Component){_inherits(FilterQueryBuilder,_Component);var _super=_createSuper(FilterQueryBuilder);function FilterQueryBuilder(_props){var _this;_classCallCheck(this,FilterQueryBuilder);_this=_super.call(this,_props);_this.render=function(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Query,Object.assign({},_this.props.config||_this.state.config,{value:_this.props.tree||_this.state.tree,onChange:_this.props.onChange,renderBuilder:_this.renderBuilder})),_this.props.slideResult&&_this.props.slideResult.length>0?/*#__PURE__*/React.createElement(AddFilteredPatient,{slideList:_this.props.slideList,slideResult:_this.props.slideResult,controlMap:_this.props.controlMap,dataState:_this.props.dataState,dataStateChange:_this.props.dataStateChange}):\"\");};_this.renderBuilder=function(props){return/*#__PURE__*/React.createElement(\"div\",{className:\"query-builder-container\",style:{padding:\"25px\",width:\"1000px\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"query-builder qb-lite\"},/*#__PURE__*/React.createElement(Builder,props)));};_this.state={config:_objectSpread(_objectSpread({},config),{},{fields:_this.props.fields})};return _this;}// onChange = (immutableTree, config) => {\n//   this.setState({ tree: immutableTree, config: config });\n//   const jsonTree = QbUtils.getTree(immutableTree);\n//   console.log(jsonTree);\n// };\nreturn _createClass(FilterQueryBuilder);}(Component);export default injectIntl(FilterQueryBuilder);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/components/FilterQueryBuilder.jsx"],"names":["React","Component","merge","Query","Builder","BasicConfig","BasicFuncs","Utils","QbUtils","injectIntl","AddFilteredPatient","InitialConfig","conjunctions","AND","OR","operators1","operators","proximity","between","textSeparators","widgets","date","dateFormat","valueFormat","types","boolean","widgetProps","hideOperator","operatorInlineLabel","localeSettings","locale","moment","valueLabel","valuePlaceholder","operatorLabel","fieldPlaceholder","operatorPlaceholder","deleteLabel","addGroupLabel","addRuleLabel","addSubRuleLabel","delGroupLabel","notLabel","valueSourcesPopupTitle","removeRuleConfirmOptions","title","okText","okType","removeGroupConfirmOptions","settings1","settings","field","valueSourcesInfo","value","label","widget","func","maxNesting","canLeaveEmptyGroup","shouldCreateEmptyGroup","showErrorMessage","customFieldSelectProps","showSearch","funcs","config","fields","FilterQueryBuilder","props","render","state","tree","onChange","renderBuilder","slideResult","length","slideList","controlMap","dataState","dataStateChange","padding","width"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport merge from \"lodash/merge\";\r\nimport {\r\n  Query,\r\n  Builder,\r\n  BasicConfig,BasicFuncs,\r\n  Utils as QbUtils,\r\n} from \"react-awesome-query-builder\";\r\nimport \"react-awesome-query-builder/lib/css/styles.css\";\r\nimport { injectIntl } from \"react-intl\";\r\nimport AddFilteredPatient from \"../pages/contactmaster/AddFilteredPatient\";\r\n\r\n const InitialConfig = BasicConfig;\r\n\r\nconst conjunctions = {\r\n  AND: InitialConfig.conjunctions.AND,\r\n  OR: InitialConfig.conjunctions.OR,\r\n};\r\nconst operators1=  {...InitialConfig.operators\r\n}\r\ndelete operators1.proximity\r\nconst operators = {\r\n  ...operators1,\r\n  between: {\r\n    ...operators1.between,\r\n    textSeparators: [\r\n      \"from\",\r\n      \"to\"\r\n    ],\r\n  }\r\n};\r\n\r\n\r\nconst widgets = {\r\n  ...InitialConfig.widgets,\r\n  date: {\r\n    ...InitialConfig.widgets.date,\r\n    dateFormat: \"DD.MM.YYYY\",\r\n    valueFormat: \"YYYY-MM-DD\",\r\n  }\r\n};\r\n\r\n\r\nconst types = {\r\n  ...InitialConfig.types,\r\n  boolean: merge(InitialConfig.types.boolean, {\r\n    widgets: {\r\n      boolean: {\r\n        widgetProps: {\r\n          hideOperator: true,\r\n          operatorInlineLabel: \"is\",\r\n        }\r\n      },\r\n    },\r\n  }),\r\n};\r\n\r\n\r\nconst localeSettings = {\r\n  locale: {\r\n    moment: \"ru\"\r\n    \r\n  },\r\n  valueLabel: \"Value\",\r\n  valuePlaceholder: \"Value\",\r\n  operatorLabel: \"Operator\",\r\n  fieldPlaceholder: \"Select field\",\r\n  operatorPlaceholder: \"Select operator\",\r\n  deleteLabel: null,\r\n  addGroupLabel: \"Add group\",\r\n  addRuleLabel: \"Add rule\",\r\n  addSubRuleLabel: \"Add sub rule\",\r\n  delGroupLabel: null,\r\n  notLabel: \"Not\",\r\n  valueSourcesPopupTitle: \"Select value source\",\r\n  removeRuleConfirmOptions: {\r\n    title: \"Are you sure delete this rule?\",\r\n    okText: \"Yes\",\r\n    okType: \"danger\",\r\n  },\r\n  removeGroupConfirmOptions: {\r\n    title: \"Are you sure delete this group?\",\r\n    okText: \"Yes\",\r\n    okType: \"danger\",\r\n  },\r\n};\r\nconst settings1={...InitialConfig.settings}\r\ndelete settings1.field\r\nconst settings = {\r\n  ...settings1,\r\n  ...localeSettings,\r\n\r\n  valueSourcesInfo: {\r\n    value: {\r\n      label: \"Value\"\r\n   }\r\n    ,\r\n    field: {\r\n      label: \"Field\",\r\n      widget: \"field\",\r\n    },\r\n    func: {\r\n      label: \"Function\",\r\n      widget: \"func\",\r\n    }\r\n  },\r\n  // canReorder: false,\r\n  // canRegroup: false,\r\n  // showNot: false,\r\n  // showLabels: true,\r\n  maxNesting: 5,\r\n  canLeaveEmptyGroup: true,\r\n  shouldCreateEmptyGroup: false,\r\n  showErrorMessage: true,\r\n  customFieldSelectProps: {\r\n    showSearch: true\r\n  }, //after deletion\r\n    \r\n  // renderField: (props) => <FieldCascader {...props} />,\r\n  // renderOperator: (props) => <FieldDropdown {...props} />,\r\n  // renderFunc: (props) => <FieldSelect {...props} />,\r\n};\r\n\r\nconst funcs = {...BasicFuncs\r\n};\r\n// delete funcs.valueSourcesInfo.field\r\nconst config = {\r\n   ...InitialConfig, conjunctions,\r\n   operators,\r\n   widgets,\r\n   types,\r\n   settings,\r\n   funcs,\r\n   fields:{}\r\n\r\n};\r\nclass FilterQueryBuilder extends Component {\r\n  constructor(props) {\r\n    \r\n     super(props);\r\n    this.state = {\r\n      config: {...config,fields:this.props.fields\r\n      }\r\n        }\r\n  }\r\n  \r\n\r\n  render = () => (\r\n\r\n    <div>\r\n      <Query\r\n        {...(this.props.config||this.state.config)}\r\n        value={this.props.tree||this.state.tree}\r\n        onChange={this.props.onChange}\r\n         renderBuilder={this.renderBuilder}\r\n\r\n      />\r\n    {this.props.slideResult && this.props.slideResult.length>0?\r\n      <AddFilteredPatient\r\n                slideList={this.props.slideList}\r\n                slideResult={this.props.slideResult}\r\n                controlMap={this.props.controlMap}\r\n                dataState={this.props.dataState}\r\n                dataStateChange={this.props.dataStateChange}\r\n              />\r\n    :\"\"}\r\n    </div>\r\n    \r\n  );\r\n\r\n  renderBuilder = (props) => (\r\n    <div className=\"query-builder-container\" style={{ padding: \"25px\",width:\"1000px\" }}>\r\n      <div className=\"query-builder qb-lite\">\r\n        <Builder {...props} \r\n         />\r\n      </div>\r\n    </div>\r\n  );\r\n  // onChange = (immutableTree, config) => {\r\n  //   this.setState({ tree: immutableTree, config: config });\r\n\r\n  //   const jsonTree = QbUtils.getTree(immutableTree);\r\n  //   console.log(jsonTree);\r\n  // };\r\n}\r\nexport default injectIntl(FilterQueryBuilder);\r\n"]},"metadata":{},"sourceType":"module"}