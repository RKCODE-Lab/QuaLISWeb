{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Row,Col,Card}from\"react-bootstrap\";import{connect}from\"react-redux\";import{toast}from\"react-toastify\";import{injectIntl}from\"react-intl\";import{callService,crudMaster,validateEsignCredential,updateStore,changeSampleTypeFilter,filterColumnData,viewAttachment,addProjectMaster,getProjectView,getProjectmasterAddMemberService,addProjectMasterFile,getuserComboServices}from\"../../actions\";import ListMaster from\"../../components/list-master/list-master.component\";import{transactionStatus}from\"../../components/Enumeration\";import{DEFAULT_RETURN}from\"../../actions/LoginTypes\";import{getControlMap,constructOptionList}from\"../../components/CommonScript\";import{ContentPanel}from\"../../components/App.styles\";import{process}from\"@progress/kendo-data-query\";import ConfirmMessage from\"../../components/confirm-alert/confirm-message.component\";import BreadcrumbComponent from\"../../components/Breadcrumb.Component\";import{Affix}from\"rsuite\";import{intl}from\"../../components/App\";import ProjectViewFilter from\"../../pages/project/ProjectViewFilter\";import DataGrid from'../../components/data-grid/data-grid.component';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var ProjectView=/*#__PURE__*/function(_Component){_inherits(ProjectView,_Component);var _super=_createSuper(ProjectView);function ProjectView(props){var _this;_classCallCheck(this,ProjectView);_this=_super.call(this,props);_this.handleDateChange=function(dateName,dateValue){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type===\"checkbox\"){selectedRecord[event.target.name]=event.target.checked===true?3:4;}else if(event.target.type==='radio'){selectedRecord[event.target.name]=optional;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.handleExpandChange=function(){var childListMap=new Map();var keylst=_this.props.Login.masterData.ChildProjectView.map(function(key){return key.npreregno;});keylst.map(function(key,i){var ChildProjectView=_this.props.Login.masterData.ChildProjectView;ChildProjectView=ChildProjectView.filter(function(x){return x['npreregno']===key;});childListMap.set(parseInt(key),ChildProjectView);});_this.setState({childListMap:childListMap});};_this.onComboChange=function(comboData,fieldName,caseNo){var selectedRecord=_this.state.selectedRecord||{};switch(caseNo){case 2:var selectedRecordfilter=_this.state.selectedRecordfilter||{};selectedRecordfilter[fieldName]=comboData;_this.setState({selectedRecordfilter:selectedRecordfilter});break;case 3:selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});break;default:break;}};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;// else if (event.target.name === \"nlockmode\")\n//     selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\nelse selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else if(event.target.type==='radio'){selectedRecord[event.target.name]=optional;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.data,event.dataState),dataState:event.dataState});};_this.ConfirmDelete=function(selectedProjectView,operation,deleteId,screenName){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.DeleteProjectMaster(screenName,selectedProjectView,operation,deleteId);});};_this.reloadData=function(){_this.searchRef.current.value=\"\";// if (Object.values(this.state.selectedRecordfilter.nsampletypecodevalue).length && this.state.selectedRecordfilter.nsampletypecodevalue !== undefined) {\n// if ( this.props.Login.masterData.SelectedSampleType !== undefined) {\nif(_this.state.selectedRecordfilter!==undefined){if(_this.state.selectedRecordfilter.nsampletypecodevalue!==undefined&&_this.state.selectedRecordfilter.nprojecttypecodevalue!==\"\"){if(Object.values(_this.props.Login.masterData.SelectedSampleType).length&&_this.props.Login.masterData.SelectedSampleType!==undefined){var inputParam={inputData:{nsampletypecode:_this.state.selectedRecordfilter.nsampletypecodevalue.value,nprojecttypecode:_this.state.selectedRecordfilter.nprojecttypecodevalue.value,userinfo:_this.props.Login.userInfo,// nfilterSampleType: this.state.nfilterSampleType,\nnfilterSampleType:_this.state.selectedRecordfilter.nsampletypecodevalue},// classUrl: \"projectview\",\nmethodUrl:\"ProjectViewBySampleType\"};_this.props.changeSampleTypeFilter(inputParam,_this.props.Login.masterData.filterSampleType);}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_PROJECTTYPENOTAVAILABLE\"}));}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SAMPLETYPENOTAVAILABLE\"}));}};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.state.selectedRecord;//    let selectedRecord = this.state.selectedRecord;\nif(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"||_this.props.Login.operation===\"approve\"||_this.props.Login.operation===\"retire\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']='';selectedRecord['esigncomments']='';selectedRecord['esignreason']='';}}else{openModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};_this.onFilterSubmit=function(){_this.searchRef.current.value=\"\";// if (this.state.nfilterSampleType.value) {\n// if (this.state.selectedRecord.nsampletypecodevalue.value) {\n//if ((this.state.selectedRecord).length>0) {\n// if (Object.values(this.state.selectedRecordfilter.nsampletypecodevalue).length && this.state.selectedRecordfilter.nsampletypecodevalue !== undefined) {\nif(_this.state.selectedRecordfilter!==undefined){if(_this.state.selectedRecordfilter.nsampletypecodevalue!==undefined&&_this.state.selectedRecordfilter.nprojecttypecodevalue!==\"\"){var inputParam={inputData:{nsampletypecode:_this.state.selectedRecordfilter.nsampletypecodevalue.value,nprojecttypecode:_this.state.selectedRecordfilter.nprojecttypecodevalue.value,userinfo:_this.props.Login.userInfo,// nfilterSampleType: this.state.nfilterSampleType,\nnfilterSampleType:_this.state.selectedRecordfilter.nsampletypecodevalue},// classUrl: \"projectview\",\nmethodUrl:\"ProjectViewBySampleType\"};_this.props.changeSampleTypeFilter(inputParam,_this.props.Login.masterData.filterSampleType);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_PROJECTTYPENOTAVAILABLE\"}));}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SAMPLETYPENOTAVAILABLE\"}));}};var dataState={skip:0,take:10};_this.state={selectedRecord:{},error:\"\",userRoleControlRights:[],selectedProjectView:undefined,controlMap:new Map(),Instrument:[],dataState:dataState,dataResult:[],data:[],childListMap:[]};_this.searchRef=React.createRef();_this.searchFieldList=[\"sprojectcode\",\"sprojecttitle\",\"ncost\",\"sprojecttypename\",\"sversionstatus\"];_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(ProjectView,[{key:\"render\",value:function render(){var _this2=this;var versionStatusCSS=\"outline-secondary\";var activeIconCSS=\"fa fa-check\";if(this.props.Login.masterData.SelectedProjectView&&this.props.Login.masterData.SelectedProjectView.ntransactionstatus===transactionStatus.APPROVED){versionStatusCSS=\"outline-success\";}else if(this.props.Login.masterData.SelectedProjectView&&(this.props.Login.masterData.SelectedProjectView.ntransactionstatus===transactionStatus.RETIRED||this.props.Login.masterData.SelectedProjectView.ntransactionstatus===transactionStatus.CLOSED)){versionStatusCSS=\"outline-danger\";activeIconCSS=\"\";}if(this.props.Login.openModal){this.mandatoryFields=this.findMandatoryFields(this.props.Login.screenName,this.state.selectedRecord,this.props.Login.operation);}//console.log(\"master main\", this.props.Login.masterData);\n// let mandatoryFields = [];\nvar userInfo=this.props.Login.userInfo;var SelectedProjectView=this.props.Login.masterData.SelectedProjectView;var selectedMaster=this.props.Login.masterData.SelectedProjectView;var selectedProjectView=this.props.Login.masterData.SelectedProjectView;this.extractedColumnList=[{\"idsName\":\"IDS_ARNO\",\"dataField\":\"sarno\",\"width\":\"100px\"},{\"idsName\":\"IDS_REGISTRATIONTYPE\",\"dataField\":\"sregtypename\",\"width\":\"200px\"},{\"idsName\":\"IDS_REGISTRATIONSUBTYPE\",\"dataField\":\"sregsubtypename\",\"width\":\"250px\"}];var filterParam={inputListName:\"ProjectView\",selectedObject:\"SelectedProjectView\",primaryKeyField:\"nprojectmastercode\",fetchUrl:\"projectview/getActiveProjectViewById\",fecthInputObject:{userinfo:this.props.Login.userInfo,nsampletypecode:this.props.Login.masterData.SelectedSampleType&&this.props.Login.masterData.SelectedSampleType.nsampletypecode},masterData:this.props.Login.masterData,searchFieldList:this.searchFieldList};var breadCrumbData=this.state.filterData||[];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},breadCrumbData.length>0?/*#__PURE__*/React.createElement(Affix,{top:53},/*#__PURE__*/React.createElement(BreadcrumbComponent,{breadCrumbItem:breadCrumbData})):\"\",/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster,{screenName:this.props.intl.formatMessage({id:\"IDS_PROJECTVIEW\"}),masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.ProjectView,getMasterDetail:function getMasterDetail(ProjectViewdata){return _this2.props.getProjectView(ProjectViewdata,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:selectedProjectView,primaryKeyField:\"nprojectmastercode\",mainField:\"sprojecttitle\",firstField:\"sprojectcode\",secondField:\"sprojecttypename\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,searchRef:this.searchRef,reloadData:this.reloadData,isMultiSelecct:false,hidePaging:false,isClearSearch:this.props.Login.isClearSearch,openFilter:this.openFilter,closeFilter:this.closeFilter,onFilterSubmit:this.onFilterSubmit,showFilterIcon:true,showFilter:this.props.Login.showFilter,filterComponent:[{\"IDS_PROJECTVIEWFILTER\":/*#__PURE__*/React.createElement(ProjectViewFilter,{filterSampleType:this.state.ProjectViewFilterList||[],nfilterSampleType:this.props.Login.masterData.SelectedSampleType||{},filterProjectType:this.state.ProjectTypeFilterList||[],nfilterProjectType:this.props.Login.masterData.SelectedProjectType||{},onComboChange:this.onComboChange,selectedRecord:this.state.selectedRecordfilter||{}// selectedRecord1={this.state.selectedRecordfilter1 || {}}\n})}]})),/*#__PURE__*/React.createElement(Col,{md:8},selectedProjectView?/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},this.props.intl.formatMessage({id:\"IDS_TOTALCOST\"})+\" : \"+selectedProjectView.ncost),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-outlined \".concat(versionStatusCSS,\" btn-sm ml-3\")},selectedProjectView.sversionstatus))))),/*#__PURE__*/React.createElement(Card.Body,{className:\"form-static-wrap\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(DataGrid,{expandField:\"expanded\",handleExpandChange:this.handleExpandChange,dataResult:this.props.Login.masterData.ParentProjectView&&process(this.props.Login.masterData.ParentProjectView||[],this.state.dataState?this.state.dataState:{skip:0,take:10})// dataResult={this.state.dataResult}\n,dataState:this.state.dataState?this.state.dataState:{skip:0,take:10}// dataState={this.state.dataState}\n,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList,controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,pageable:true,scrollable:'scrollable',hideColumnFilter:false,selectedId:0,hasChild:true,childMappingField:'npreregno',childColumnList:[{\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestsynonym\",\"width\":\"250px\"},{\"idsName\":\"IDS_COST\",\"dataField\":\"ncost\",\"width\":\"100px\"},{\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"250px\"}],childList:this.state.childListMap,gridHeight:'355px',isActionRequired:false//  actionColWidth={'250px'}   \n//  gridWidth={'800px'}\n})))))):\"\"))));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var updateState=false;var _this$state=this.state,selectedRecord=_this$state.selectedRecord,selectedRecordfilter=_this$state.selectedRecordfilter,userRoleControlRights=_this$state.userRoleControlRights,controlMap=_this$state.controlMap,filterData=_this$state.filterData,nfilterSampleType=_this$state.nfilterSampleType,filterSampleType=_this$state.filterSampleType,nfilterProjectType=_this$state.nfilterProjectType,selectedRecordfilter1=_this$state.selectedRecordfilter1;if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){selectedRecord=this.props.Login.selectedRecord;updateState=true;this.setState({selectedRecord:selectedRecord,selectedRecordfilter:selectedRecordfilter});}if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({controlMap:controlMap,userRoleControlRights:userRoleControlRights});//   updateState = true;\n}var nsampletypecode=this.state.nfilterSampleType||{};var nprojecttypecode=this.state.nfilterProjectType||{};if(this.props.Login.masterData!==previousProps.Login.masterData){nfilterSampleType=this.state.nfilterSampleType||{};var _filterSampleType=constructOptionList(this.props.Login.masterData.filterSampleType||[],\"nsampletypecode\",\"ssampletypename\",undefined,undefined,undefined);var ProjectViewFilterList=_filterSampleType.get(\"OptionList\");nsampletypecode=ProjectViewFilterList[0];selectedRecordfilter={nsampletypecodevalue:nsampletypecode};selectedRecord={nsampletypecodevalue:nsampletypecode};////\nnfilterProjectType=this.state.nfilterProjectType||{};var filterProjectType=constructOptionList(this.props.Login.masterData.filterProjectType||[],\"nprojecttypecode\",\"sprojecttypename\",undefined,undefined,undefined);var ProjectTypeFilterList=filterProjectType.get(\"OptionList\");nprojecttypecode=ProjectTypeFilterList[0];selectedRecordfilter=_objectSpread(_objectSpread({},selectedRecordfilter),{},{nprojecttypecodevalue:nprojecttypecode});selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{nprojecttypecodevalue:nprojecttypecode});this.setState({ProjectViewFilterList:ProjectViewFilterList,ProjectTypeFilterList:ProjectTypeFilterList,selectedRecordfilter:selectedRecordfilter,selectedRecord:selectedRecord,data:this.props.Login.masterData.ParentProjectView,dataResult:process(this.props.Login.masterData.ParentProjectView||[],this.state.dataState)});////\nif(this.props.Login.masterData.SelectedSampleType&&this.props.Login.masterData.SelectedSampleType!==previousProps.Login.masterData.SelectedSampleType){nfilterSampleType={label:this.props.Login.masterData.SelectedSampleType.ssampletypename,value:this.props.Login.masterData.SelectedSampleType.nsampletypecode,item:this.props.Login.masterData.SelectedSampleType};}if(this.props.Login.masterData.SelectedProjectType&&this.props.Login.masterData.SelectedProjectType!==previousProps.Login.masterData.SelectedProjectType){nfilterProjectType={label:this.props.Login.masterData.SelectedProjectType.sprojecttypename,value:this.props.Login.masterData.SelectedProjectType.nprojecttypecode,item:this.props.Login.masterData.SelectedProjectType};}//  selectedRecordfilter = {nsampletypecodevalue:nfilterSampleType}\nfilterData=this.generateBreadCrumData();updateState=true;this.setState({filterData:filterData,selectedRecordfilter:selectedRecordfilter});}if(this.props.Login.masterData.SelectedSampleType!==previousProps.Login.masterData.SelectedSampleType){var nsampletypecodevalue=this.props.Login.masterData.SelectedSampleType?{label:this.props.Login.masterData.SelectedSampleType.ssampletypename,value:this.props.Login.masterData.SelectedSampleType.nsampletypecode,item:this.props.Login.masterData.SelectedSampleType}:\"\";//  nsampletypecode=ProjectViewFilterList[ProjectViewFilterList.length-1];\nselectedRecordfilter=_objectSpread(_objectSpread({},selectedRecordfilter1),{},{nsampletypecodevalue:nsampletypecodevalue});selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{nsampletypecodevalue:nsampletypecode});// nfilterSampleType = this.props.Login.masterData.nfilterSampleType;\nthis.setState({selectedRecordfilter:selectedRecordfilter,selectedRecord:selectedRecord});}////\nif(this.props.Login.masterData.SelectedProjectType!==previousProps.Login.masterData.SelectedProjectType){var nprojecttypecodevalue=this.props.Login.masterData.SelectedProjectType?{label:this.props.Login.masterData.SelectedProjectType.sprojecttypename,value:this.props.Login.masterData.SelectedProjectType.nprojecttypecode,item:this.props.Login.masterData.SelectedProjectType}:\"\";//  nsampletypecode=ProjectViewFilterList[ProjectViewFilterList.length-1];\nselectedRecordfilter=_objectSpread(_objectSpread({},selectedRecordfilter),{},{nprojecttypecodevalue:nprojecttypecodevalue});selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{nprojecttypecodevalue:nprojecttypecode});// nfilterSampleType = this.props.Login.masterData.nfilterSampleType;\nthis.setState({selectedRecordfilter:selectedRecordfilter,selectedRecord:selectedRecord});}// if (this.props.Login.masterData.nfilterSampleType !== previousProps.Login.masterData.nfilterSampleType) {\n// }\n}},{key:\"generateBreadCrumData\",value:function generateBreadCrumData(){var breadCrumbData=[];if(this.props.Login.masterData&&this.props.Login.masterData.SelectedSampleType){breadCrumbData.push({label:\"IDS_SAMPLETYPE\",value:this.props.Login.masterData.SelectedSampleType?this.props.Login.masterData.SelectedSampleType.ssampletypename:\"NA\"},{label:\"IDS_PROJECTTYPE\",value:this.props.Login.masterData.SelectedProjectType?this.props.Login.masterData.SelectedProjectType.sprojecttypename:\"NA\"});}else if(this.props.Login.masterData&&this.props.Login.masterData.SelectedProjectView){/*    breadCrumbData.push({\r\n            label: \"IDS_SAMPLETYPE\",\r\n            value: this.state.selectedRecord.nsampletypecode\r\n              ? this.state.selectedRecord.nsampletypecode.label\r\n              : \"NA\",\r\n          }); */breadCrumbData.push({label:\"IDS_SAMPLETYPE\",value:this.props.Login.masterData.SelectedProjectView?this.props.Login.masterData.SelectedProjectView.ssampletypename:\"NA\"},{label:\"IDS_PROJECTTYPE\",value:this.props.Login.masterData.SelectedProjectView?this.props.Login.masterData.SelectedProjectView.ssampletypename:\"NA\"});}else{/*       breadCrumbData.push({\r\n             label: \"IDS_SAMPLETYPE\",\r\n             value:  this.state.selectedRecord.nsampletypecodevalue\r\n               ? this.state.selectedRecord.nsampletypecodevalue.label\r\n               : \"NA\",\r\n           }); */breadCrumbData.push({label:\"IDS_SAMPLETYPE\",value:this.props.Login.masterData.nfilterSampleType?this.props.Login.masterData.nfilterSampleType.label:\"NA\"},{label:\"IDS_PROJECTTYPE\",value:this.props.Login.masterData.nfilterSampleType?this.props.Login.masterData.nfilterSampleType.label:\"NA\"});}return breadCrumbData;}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"){if(props.Login.errorCode===417||props.Login.errorCode===409){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return ProjectView;}(Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,filterColumnData:filterColumnData,updateStore:updateStore,validateEsignCredential:validateEsignCredential,changeSampleTypeFilter:changeSampleTypeFilter,viewAttachment:viewAttachment,addProjectMaster:addProjectMaster,getProjectView:getProjectView,getProjectmasterAddMemberService:getProjectmasterAddMemberService,addProjectMasterFile:addProjectMasterFile,getuserComboServices:getuserComboServices})(injectIntl(ProjectView));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/project/ProjectView.jsx"],"names":["React","Component","Row","Col","Card","connect","toast","injectIntl","callService","crudMaster","validateEsignCredential","updateStore","changeSampleTypeFilter","filterColumnData","viewAttachment","addProjectMaster","getProjectView","getProjectmasterAddMemberService","addProjectMasterFile","getuserComboServices","ListMaster","transactionStatus","DEFAULT_RETURN","getControlMap","constructOptionList","ContentPanel","process","ConfirmMessage","BreadcrumbComponent","Affix","intl","ProjectViewFilter","DataGrid","mapStateToProps","state","Login","ProjectView","props","handleDateChange","dateName","dateValue","selectedRecord","setState","onInputOnChange","event","optional","target","type","name","checked","value","handleExpandChange","childListMap","Map","keylst","masterData","ChildProjectView","map","key","npreregno","i","filter","x","set","parseInt","onComboChange","comboData","fieldName","caseNo","selectedRecordfilter","ACTIVE","DEACTIVE","YES","NO","onTabChange","tabProps","screenName","updateInfo","typeName","data","dataStateChange","dataResult","dataState","ConfirmDelete","selectedProjectView","operation","deleteId","confirmMessage","confirm","formatMessage","id","DeleteProjectMaster","reloadData","searchRef","current","undefined","nsampletypecodevalue","nprojecttypecodevalue","Object","values","SelectedSampleType","length","inputParam","inputData","nsampletypecode","nprojecttypecode","userinfo","userInfo","nfilterSampleType","methodUrl","filterSampleType","warn","closeModal","loadEsign","openModal","openFilter","showFilter","closeFilter","onFilterSubmit","skip","take","error","userRoleControlRights","controlMap","Instrument","createRef","searchFieldList","versionStatusCSS","activeIconCSS","SelectedProjectView","ntransactionstatus","APPROVED","RETIRED","CLOSED","mandatoryFields","findMandatoryFields","selectedMaster","extractedColumnList","filterParam","inputListName","selectedObject","primaryKeyField","fetchUrl","fecthInputObject","breadCrumbData","filterData","searchedData","ProjectViewdata","isClearSearch","ProjectViewFilterList","ProjectTypeFilterList","SelectedProjectType","ncost","sversionstatus","ParentProjectView","previousProps","updateState","nfilterProjectType","selectedRecordfilter1","nformcode","item","push","ncontrolcode","get","filterProjectType","label","ssampletypename","sprojecttypename","generateBreadCrumData","masterStatus","errorCode"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Row, Col, Card } from \"react-bootstrap\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { injectIntl } from \"react-intl\";\r\nimport {\r\n  callService, crudMaster, validateEsignCredential, updateStore, changeSampleTypeFilter, filterColumnData,\r\n  viewAttachment, addProjectMaster, getProjectView, getProjectmasterAddMemberService, addProjectMasterFile, getuserComboServices\r\n} from \"../../actions\";\r\n\r\nimport ListMaster from \"../../components/list-master/list-master.component\";\r\nimport { transactionStatus } from \"../../components/Enumeration\";\r\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\r\n\r\nimport { getControlMap, constructOptionList }\r\n  from \"../../components/CommonScript\"\r\nimport { ContentPanel } from \"../../components/App.styles\";\r\nimport { process } from \"@progress/kendo-data-query\";\r\nimport ConfirmMessage from \"../../components/confirm-alert/confirm-message.component\";\r\nimport BreadcrumbComponent from \"../../components/Breadcrumb.Component\";\r\nimport { Affix } from \"rsuite\";\r\nimport { intl } from \"../../components/App\";\r\nimport ProjectViewFilter from \"../../pages/project/ProjectViewFilter\";\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { Login: state.Login };\r\n};\r\n\r\nclass ProjectView extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const dataState = { skip: 0, take: 10 };\r\n    this.state = {\r\n      selectedRecord: {},\r\n      error: \"\",\r\n      userRoleControlRights: [],\r\n      selectedProjectView: undefined,\r\n      controlMap: new Map(),\r\n      Instrument: [],\r\n      dataState: dataState,\r\n      dataResult: [], data: [],\r\n      childListMap: []\r\n    };\r\n    this.searchRef = React.createRef();\r\n    this.searchFieldList = [\"sprojectcode\", \"sprojecttitle\", \"ncost\", \"sprojecttypename\", \"sversionstatus\"]\r\n    this.confirmMessage = new ConfirmMessage();\r\n  }\r\n\r\n  handleDateChange = (dateName, dateValue) => {\r\n    const { selectedRecord } = this.state;\r\n    selectedRecord[dateName] = dateValue;\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n\r\n  onInputOnChange = (event, optional) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    if (event.target.type === \"checkbox\") {\r\n      selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n    } else if (event.target.type === 'radio') {\r\n      selectedRecord[event.target.name] = optional;\r\n    } else {\r\n      selectedRecord[event.target.name] = event.target.value;\r\n    }\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.Login.masterStatus !== \"\") {\r\n      if (props.Login.errorCode === 417 || props.Login.errorCode === 409) {\r\n        toast.warn(props.Login.masterStatus);\r\n        props.Login.masterStatus = \"\";\r\n      }\r\n    }\r\n    if (props.Login.error !== state.error) {\r\n      toast.error(props.Login.error);\r\n      props.Login.error = \"\";\r\n    }\r\n    if (props.Login.selectedRecord === undefined) {\r\n      return { selectedRecord: {} };\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n\r\n    let versionStatusCSS = \"outline-secondary\";\r\n    let activeIconCSS = \"fa fa-check\"\r\n\r\n\r\n    if (this.props.Login.masterData.SelectedProjectView && this.props.Login.masterData.SelectedProjectView.ntransactionstatus === transactionStatus.APPROVED) {\r\n      versionStatusCSS = \"outline-success\";\r\n    }\r\n    else if (this.props.Login.masterData.SelectedProjectView && ((this.props.Login.masterData.SelectedProjectView.ntransactionstatus === transactionStatus.RETIRED) || (this.props.Login.masterData.SelectedProjectView.ntransactionstatus === transactionStatus.CLOSED))) {\r\n      versionStatusCSS = \"outline-danger\";\r\n      activeIconCSS = \"\";\r\n    }\r\n\r\n\r\n    if (this.props.Login.openModal) {\r\n      this.mandatoryFields = this.findMandatoryFields(this.props.Login.screenName, this.state.selectedRecord, this.props.Login.operation)\r\n    }\r\n\r\n    //console.log(\"master main\", this.props.Login.masterData);\r\n    // let mandatoryFields = [];\r\n    const { userInfo } = this.props.Login;\r\n\r\n\r\n\r\n    const { SelectedProjectView } = this.props.Login.masterData;\r\n    const selectedMaster = this.props.Login.masterData.SelectedProjectView;\r\n    const selectedProjectView = this.props.Login.masterData.SelectedProjectView;\r\n\r\n    this.extractedColumnList = [\r\n      { \"idsName\": \"IDS_ARNO\", \"dataField\": \"sarno\", \"width\": \"100px\" },\r\n      { \"idsName\": \"IDS_REGISTRATIONTYPE\", \"dataField\": \"sregtypename\", \"width\": \"200px\" },\r\n      { \"idsName\": \"IDS_REGISTRATIONSUBTYPE\", \"dataField\": \"sregsubtypename\", \"width\": \"250px\" },\r\n    ]\r\n\r\n    const filterParam = {\r\n      inputListName: \"ProjectView\",\r\n      selectedObject: \"SelectedProjectView\",\r\n      primaryKeyField: \"nprojectmastercode\",\r\n      fetchUrl: \"projectview/getActiveProjectViewById\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo, nsampletypecode: this.props.Login.masterData.SelectedSampleType && this.props.Login.masterData.SelectedSampleType.nsampletypecode },\r\n      masterData: this.props.Login.masterData,\r\n      searchFieldList: this.searchFieldList,\r\n\r\n\r\n    };\r\n    const breadCrumbData = this.state.filterData || [];\r\n    return (\r\n      <>\r\n        <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n          {breadCrumbData.length > 0 ? (\r\n            <Affix top={53}>\r\n              <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n            </Affix>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <Row noGutters={true}>\r\n            <Col md={4}>\r\n              <ListMaster\r\n                screenName={this.props.intl.formatMessage({ id: \"IDS_PROJECTVIEW\" })}\r\n                masterData={this.props.Login.masterData}\r\n                userInfo={this.props.Login.userInfo}\r\n                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.ProjectView}\r\n                getMasterDetail={(ProjectViewdata) => this.props.getProjectView(ProjectViewdata, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                selectedMaster={selectedProjectView}\r\n                primaryKeyField=\"nprojectmastercode\"\r\n                mainField=\"sprojecttitle\"\r\n                firstField=\"sprojectcode\"\r\n                secondField=\"sprojecttypename\"\r\n                filterColumnData={this.props.filterColumnData}\r\n                filterParam={filterParam}\r\n                userRoleControlRights={this.state.userRoleControlRights}\r\n                searchRef={this.searchRef}\r\n                reloadData={this.reloadData}\r\n                isMultiSelecct={false}\r\n                hidePaging={false}\r\n                isClearSearch={this.props.Login.isClearSearch}\r\n\r\n                openFilter={this.openFilter}\r\n                closeFilter={this.closeFilter}\r\n                onFilterSubmit={this.onFilterSubmit}\r\n                showFilterIcon={true}\r\n                showFilter={this.props.Login.showFilter}\r\n                filterComponent={[\r\n                  {\r\n                    \"IDS_PROJECTVIEWFILTER\":\r\n                      <ProjectViewFilter\r\n                        filterSampleType={this.state.ProjectViewFilterList || []}\r\n                        nfilterSampleType={this.props.Login.masterData.SelectedSampleType || {}}\r\n\r\n                        filterProjectType={this.state.ProjectTypeFilterList || []}\r\n                        nfilterProjectType={this.props.Login.masterData.SelectedProjectType || {}}\r\n\r\n                        onComboChange={this.onComboChange}\r\n                        selectedRecord={this.state.selectedRecordfilter || {}}\r\n                      // selectedRecord1={this.state.selectedRecordfilter1 || {}}\r\n                      />\r\n                  }\r\n                ]}\r\n\r\n              />\r\n            </Col>\r\n            <Col md={8}>\r\n              {selectedProjectView ?\r\n                <ContentPanel className=\"panel-main-content\">\r\n                  <Card className=\"border-0\">\r\n                    <Card.Header>\r\n                      <Card.Title className=\"product-title-main\">\r\n                        {this.props.intl.formatMessage({ id: \"IDS_TOTALCOST\" }) + \" : \" + selectedProjectView.ncost}\r\n                      </Card.Title>\r\n                      <Card.Subtitle>\r\n                        <div className=\"d-flex product-category\">\r\n                          <h2 className=\"product-title-sub flex-grow-1\">\r\n                            <span className={`btn btn-outlined ${versionStatusCSS} btn-sm ml-3`}>\r\n                              {/* <i class={activeIconCSS}></i> */}\r\n                              {selectedProjectView.sversionstatus}\r\n                            </span>\r\n                          </h2>\r\n                        </div>\r\n                      </Card.Subtitle>\r\n                    </Card.Header>\r\n                    <Card.Body className=\"form-static-wrap\">\r\n\r\n                      {/* <Col md={12}>\r\n                        <div className=\"horizontal-line\"></div>\r\n                      </Col> */}\r\n                      <Row noGutters>\r\n                        <Col md={12}>\r\n                          <DataGrid\r\n                            expandField=\"expanded\"\r\n                            handleExpandChange={this.handleExpandChange}\r\n                            dataResult={this.props.Login.masterData.ParentProjectView && process(\r\n                              this.props.Login.masterData.ParentProjectView || [],\r\n                              this.state.dataState ? this.state.dataState : { skip: 0, take: 10 }\r\n                            )}\r\n                            // dataResult={this.state.dataResult}\r\n                            dataState={this.state.dataState\r\n                              ? this.state.dataState : { skip: 0, take: 10 }}\r\n                            // dataState={this.state.dataState}\r\n                            dataStateChange={this.dataStateChange}\r\n                            extractedColumnList={this.extractedColumnList}\r\n                            controlMap={this.state.controlMap}\r\n                            userRoleControlRights={this.state.userRoleControlRights}\r\n                            pageable={true}\r\n                            scrollable={'scrollable'}\r\n                            hideColumnFilter={false}\r\n                            selectedId={0}\r\n                            hasChild={true}\r\n                            childMappingField={'npreregno'}\r\n                            childColumnList={[\r\n\r\n                              { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestsynonym\", \"width\": \"250px\" },\r\n                              { \"idsName\": \"IDS_COST\", \"dataField\": \"ncost\", \"width\": \"100px\" },\r\n                              { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"250px\" },\r\n\r\n                            ]}\r\n                            childList={this.state.childListMap}\r\n                            gridHeight={'355px'}\r\n                            isActionRequired={false}\r\n                          //  actionColWidth={'250px'}   \r\n                          //  gridWidth={'800px'}\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </ContentPanel>\r\n                : \"\"\r\n              }\r\n            </Col>\r\n          </Row>\r\n\r\n\r\n        </div>\r\n\r\n      </>\r\n    );\r\n  }\r\n\r\n  handleExpandChange = () => {\r\n\r\n    let childListMap = new Map();\r\n    let keylst = this.props.Login.masterData.ChildProjectView.map(key => key.npreregno);\r\n\r\n    keylst.map((key, i) => {\r\n      let ChildProjectView = this.props.Login.masterData.ChildProjectView;\r\n\r\n      ChildProjectView = ChildProjectView.filter(x => x['npreregno'] === key);\r\n      childListMap.set(parseInt(key), ChildProjectView);\r\n    })\r\n    this.setState({ childListMap })\r\n\r\n  };\r\n\r\n  onComboChange = (comboData, fieldName, caseNo) => {\r\n\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    switch (caseNo) {\r\n\r\n      case 2:\r\n        const selectedRecordfilter = this.state.selectedRecordfilter || {};\r\n        selectedRecordfilter[fieldName] = comboData;\r\n        this.setState({ selectedRecordfilter });\r\n        break;\r\n\r\n      case 3:\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n        this.setState({ selectedRecord });\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  onInputOnChange = (event, optional) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    if (event.target.type === 'checkbox') {\r\n      if (event.target.name === \"ntransactionstatus\")\r\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n      // else if (event.target.name === \"nlockmode\")\r\n      //     selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\r\n      else\r\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n    }\r\n    else if (event.target.type === 'radio') {\r\n      selectedRecord[event.target.name] = optional;\r\n    }\r\n    else {\r\n      selectedRecord[event.target.name] = event.target.value;\r\n    }\r\n    this.setState({ selectedRecord });\r\n  }\r\n\r\n\r\n\r\n\r\n  onTabChange = (tabProps) => {\r\n    const screenName = tabProps.screenName;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { screenName },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n\r\n\r\n  dataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(this.state.data, event.dataState),\r\n      dataState: event.dataState\r\n    });\r\n  }\r\n\r\n\r\n  ConfirmDelete = (selectedProjectView, operation, deleteId, screenName) => {\r\n    this.confirmMessage.confirm(\r\n      \"deleteMessage\",\r\n      this.props.intl.formatMessage({ id: \"IDS_DELETE\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_OK\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n      () =>\r\n        this.DeleteProjectMaster(\r\n          screenName,\r\n          selectedProjectView,\r\n          operation,\r\n          deleteId\r\n\r\n        )\r\n    );\r\n  };\r\n\r\n\r\n\r\n  reloadData = () => {\r\n    this.searchRef.current.value = \"\";\r\n\r\n    // if (Object.values(this.state.selectedRecordfilter.nsampletypecodevalue).length && this.state.selectedRecordfilter.nsampletypecodevalue !== undefined) {\r\n    // if ( this.props.Login.masterData.SelectedSampleType !== undefined) {\r\n    if (this.state.selectedRecordfilter !== undefined) {\r\n      if (this.state.selectedRecordfilter.nsampletypecodevalue !== undefined && this.state.selectedRecordfilter.nprojecttypecodevalue !== \"\") {\r\n        if (Object.values(this.props.Login.masterData.SelectedSampleType).length && this.props.Login.masterData.SelectedSampleType !== undefined) {\r\n          let inputParam = {\r\n            inputData: {\r\n              nsampletypecode: this.state.selectedRecordfilter.nsampletypecodevalue.value,\r\n              nprojecttypecode: this.state.selectedRecordfilter.nprojecttypecodevalue.value,\r\n              userinfo: this.props.Login.userInfo,\r\n              // nfilterSampleType: this.state.nfilterSampleType,\r\n              nfilterSampleType: this.state.selectedRecordfilter.nsampletypecodevalue,\r\n            },\r\n            // classUrl: \"projectview\",\r\n            methodUrl: \"ProjectViewBySampleType\",\r\n          };\r\n          this.props.changeSampleTypeFilter(\r\n            inputParam,\r\n            this.props.Login.masterData.filterSampleType\r\n          );\r\n        }\r\n      } else {\r\n        toast.warn(this.props.intl.formatMessage({ id: \"IDS_PROJECTTYPENOTAVAILABLE\", }));\r\n      }\r\n    } else {\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_SAMPLETYPENOTAVAILABLE\", }));\r\n    }\r\n  };\r\n\r\n\r\n\r\n  closeModal = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n    let openModal = this.props.Login.openModal;\r\n    let selectedRecord = this.state.selectedRecord;\r\n    //    let selectedRecord = this.state.selectedRecord;\r\n    if (this.props.Login.loadEsign) {\r\n      if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"approve\" || this.props.Login.operation === \"retire\") {\r\n        loadEsign = false;\r\n        openModal = false;\r\n        selectedRecord = {};\r\n      }\r\n      else {\r\n        loadEsign = false;\r\n        selectedRecord['esignpassword'] = '';\r\n        selectedRecord['esigncomments'] = '';\r\n        selectedRecord['esignreason'] = '';\r\n      }\r\n    }\r\n    else {\r\n      openModal = false;\r\n      selectedRecord = {};\r\n    }\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { openModal, loadEsign, selectedRecord }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n\r\n  }\r\n\r\n  componentDidUpdate(previousProps) {\r\n    let updateState = false;\r\n    let {\r\n      selectedRecord,\r\n      selectedRecordfilter,\r\n      userRoleControlRights,\r\n      controlMap,\r\n      filterData,\r\n      nfilterSampleType,\r\n      filterSampleType,\r\n      nfilterProjectType,\r\n      selectedRecordfilter1,\r\n\r\n\r\n    } = this.state;\r\n\r\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n      selectedRecord = this.props.Login.selectedRecord;\r\n      updateState = true;\r\n      this.setState({ selectedRecord, selectedRecordfilter });\r\n    }\r\n    if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n      userRoleControlRights = [];\r\n      if (this.props.Login.userRoleControlRights) {\r\n        this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode\r\n        ] &&\r\n          Object.values(\r\n            this.props.Login.userRoleControlRights[\r\n            this.props.Login.userInfo.nformcode\r\n            ]\r\n          ).map((item) => userRoleControlRights.push(item.ncontrolcode));\r\n      }\r\n      controlMap = getControlMap(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode\r\n      );\r\n      this.setState({ controlMap, userRoleControlRights });\r\n      //   updateState = true;\r\n    }\r\n\r\n    let nsampletypecode = this.state.nfilterSampleType || {};\r\n    let nprojecttypecode = this.state.nfilterProjectType || {};\r\n\r\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n\r\n      nfilterSampleType = this.state.nfilterSampleType || {};\r\n\r\n      const filterSampleType = constructOptionList(this.props.Login.masterData.filterSampleType || [], \"nsampletypecode\",\r\n        \"ssampletypename\", undefined, undefined, undefined);\r\n\r\n      let ProjectViewFilterList = filterSampleType.get(\"OptionList\");\r\n      nsampletypecode = ProjectViewFilterList[0];\r\n      selectedRecordfilter = { nsampletypecodevalue: nsampletypecode }\r\n      selectedRecord = { nsampletypecodevalue: nsampletypecode }\r\n\r\n      ////\r\n\r\n      nfilterProjectType = this.state.nfilterProjectType || {};\r\n\r\n      const filterProjectType = constructOptionList(this.props.Login.masterData.filterProjectType || [], \"nprojecttypecode\",\r\n        \"sprojecttypename\", undefined, undefined, undefined);\r\n\r\n      let ProjectTypeFilterList = filterProjectType.get(\"OptionList\");\r\n      nprojecttypecode = ProjectTypeFilterList[0];\r\n      selectedRecordfilter = { ...selectedRecordfilter, nprojecttypecodevalue: nprojecttypecode }\r\n      selectedRecord = { ...selectedRecord, nprojecttypecodevalue: nprojecttypecode }\r\n\r\n      this.setState({\r\n        ProjectViewFilterList, ProjectTypeFilterList,\r\n        selectedRecordfilter, selectedRecord, data: this.props.Login.masterData.ParentProjectView,\r\n        dataResult: process(this.props.Login.masterData.ParentProjectView || [], this.state.dataState)\r\n      });\r\n\r\n      ////\r\n\r\n      if (this.props.Login.masterData.SelectedSampleType && this.props.Login.masterData.SelectedSampleType !== previousProps.Login.masterData.SelectedSampleType) {\r\n        nfilterSampleType = {\r\n          label: this.props.Login.masterData.SelectedSampleType.ssampletypename,\r\n          value: this.props.Login.masterData.SelectedSampleType.nsampletypecode,\r\n          item: this.props.Login.masterData.SelectedSampleType,\r\n        };\r\n      }\r\n\r\n      if (this.props.Login.masterData.SelectedProjectType && this.props.Login.masterData.SelectedProjectType !== previousProps.Login.masterData.SelectedProjectType) {\r\n        nfilterProjectType = {\r\n          label: this.props.Login.masterData.SelectedProjectType.sprojecttypename,\r\n          value: this.props.Login.masterData.SelectedProjectType.nprojecttypecode,\r\n          item: this.props.Login.masterData.SelectedProjectType,\r\n        };\r\n      }\r\n      //  selectedRecordfilter = {nsampletypecodevalue:nfilterSampleType}\r\n      filterData = this.generateBreadCrumData();\r\n      updateState = true;\r\n      this.setState({ filterData, selectedRecordfilter });\r\n    }\r\n\r\n\r\n    if (this.props.Login.masterData.SelectedSampleType !== previousProps.Login.masterData.SelectedSampleType) {\r\n\r\n      let nsampletypecodevalue = this.props.Login.masterData.SelectedSampleType ?\r\n        {\r\n          label: this.props.Login.masterData.SelectedSampleType.ssampletypename,\r\n          value: this.props.Login.masterData.SelectedSampleType.nsampletypecode,\r\n          item: this.props.Login.masterData.SelectedSampleType\r\n        } : \"\"\r\n      //  nsampletypecode=ProjectViewFilterList[ProjectViewFilterList.length-1];\r\n      selectedRecordfilter = { ...selectedRecordfilter1, nsampletypecodevalue }\r\n      selectedRecord = { ...selectedRecord, nsampletypecodevalue: nsampletypecode }\r\n      // nfilterSampleType = this.props.Login.masterData.nfilterSampleType;\r\n      this.setState({\r\n        selectedRecordfilter, selectedRecord\r\n\r\n      });\r\n\r\n    }\r\n    ////\r\n    if (this.props.Login.masterData.SelectedProjectType !== previousProps.Login.masterData.SelectedProjectType) {\r\n\r\n      let nprojecttypecodevalue = this.props.Login.masterData.SelectedProjectType ?\r\n        {\r\n          label: this.props.Login.masterData.SelectedProjectType.sprojecttypename,\r\n          value: this.props.Login.masterData.SelectedProjectType.nprojecttypecode,\r\n          item: this.props.Login.masterData.SelectedProjectType\r\n        } : \"\"\r\n      //  nsampletypecode=ProjectViewFilterList[ProjectViewFilterList.length-1];\r\n      selectedRecordfilter = { ...selectedRecordfilter, nprojecttypecodevalue }\r\n      selectedRecord = { ...selectedRecord, nprojecttypecodevalue: nprojecttypecode }\r\n      // nfilterSampleType = this.props.Login.masterData.nfilterSampleType;\r\n      this.setState({\r\n        selectedRecordfilter, selectedRecord\r\n\r\n      });\r\n\r\n    }\r\n    // if (this.props.Login.masterData.nfilterSampleType !== previousProps.Login.masterData.nfilterSampleType) {\r\n\r\n    // }\r\n\r\n  }\r\n  generateBreadCrumData() {\r\n    const breadCrumbData = [];\r\n    if (this.props.Login.masterData && this.props.Login.masterData.SelectedSampleType) {\r\n\r\n      breadCrumbData.push({\r\n        label: \"IDS_SAMPLETYPE\",\r\n        value: this.props.Login.masterData.SelectedSampleType\r\n          ? this.props.Login.masterData.SelectedSampleType.ssampletypename\r\n          : \"NA\",\r\n      },\r\n        {\r\n          label: \"IDS_PROJECTTYPE\",\r\n          value: this.props.Login.masterData.SelectedProjectType\r\n            ? this.props.Login.masterData.SelectedProjectType.sprojecttypename\r\n            : \"NA\",\r\n        });\r\n\r\n    } else if (this.props.Login.masterData && this.props.Login.masterData.SelectedProjectView) {\r\n\r\n      /*    breadCrumbData.push({\r\n            label: \"IDS_SAMPLETYPE\",\r\n            value: this.state.selectedRecord.nsampletypecode\r\n              ? this.state.selectedRecord.nsampletypecode.label\r\n              : \"NA\",\r\n          }); */\r\n\r\n      breadCrumbData.push({\r\n        label: \"IDS_SAMPLETYPE\",\r\n        value: this.props.Login.masterData.SelectedProjectView\r\n          ? this.props.Login.masterData.SelectedProjectView.ssampletypename\r\n          : \"NA\",\r\n      },\r\n        {\r\n          label: \"IDS_PROJECTTYPE\",\r\n          value: this.props.Login.masterData.SelectedProjectView\r\n            ? this.props.Login.masterData.SelectedProjectView.ssampletypename\r\n            : \"NA\",\r\n        });\r\n\r\n    } else {\r\n\r\n      /*       breadCrumbData.push({\r\n             label: \"IDS_SAMPLETYPE\",\r\n             value:  this.state.selectedRecord.nsampletypecodevalue\r\n               ? this.state.selectedRecord.nsampletypecodevalue.label\r\n               : \"NA\",\r\n           }); */\r\n\r\n      breadCrumbData.push({\r\n        label: \"IDS_SAMPLETYPE\",\r\n        value: this.props.Login.masterData.nfilterSampleType\r\n          ? this.props.Login.masterData.nfilterSampleType.label\r\n          : \"NA\",\r\n      },\r\n        {\r\n          label: \"IDS_PROJECTTYPE\",\r\n          value: this.props.Login.masterData.nfilterSampleType\r\n            ? this.props.Login.masterData.nfilterSampleType.label\r\n            : \"NA\",\r\n        });\r\n\r\n    }\r\n    return breadCrumbData;\r\n  }\r\n\r\n  openFilter = () => {\r\n    let showFilter = !this.props.Login.showFilter;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { showFilter },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  closeFilter = () => {\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { showFilter: false },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  onFilterSubmit = () => {\r\n    this.searchRef.current.value = \"\";\r\n\r\n    // if (this.state.nfilterSampleType.value) {\r\n    // if (this.state.selectedRecord.nsampletypecodevalue.value) {\r\n    //if ((this.state.selectedRecord).length>0) {\r\n\r\n    // if (Object.values(this.state.selectedRecordfilter.nsampletypecodevalue).length && this.state.selectedRecordfilter.nsampletypecodevalue !== undefined) {\r\n\r\n    if (this.state.selectedRecordfilter !== undefined) {\r\n      if (this.state.selectedRecordfilter.nsampletypecodevalue !== undefined && this.state.selectedRecordfilter.nprojecttypecodevalue !== \"\") {\r\n        let inputParam = {\r\n          inputData: {\r\n            nsampletypecode: this.state.selectedRecordfilter.nsampletypecodevalue.value,\r\n            nprojecttypecode: this.state.selectedRecordfilter.nprojecttypecodevalue.value,\r\n            userinfo: this.props.Login.userInfo,\r\n            // nfilterSampleType: this.state.nfilterSampleType,\r\n            nfilterSampleType: this.state.selectedRecordfilter.nsampletypecodevalue,\r\n          },\r\n          // classUrl: \"projectview\",\r\n          methodUrl: \"ProjectViewBySampleType\",\r\n        };\r\n        this.props.changeSampleTypeFilter(\r\n          inputParam,\r\n          this.props.Login.masterData.filterSampleType\r\n        );\r\n      } else {\r\n\r\n        toast.warn(this.props.intl.formatMessage({ id: \"IDS_PROJECTTYPENOTAVAILABLE\", }));\r\n\r\n      }\r\n    } else {\r\n\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_SAMPLETYPENOTAVAILABLE\", }));\r\n\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n  callService,\r\n  crudMaster,\r\n  filterColumnData,\r\n  updateStore,\r\n  validateEsignCredential,\r\n  changeSampleTypeFilter,\r\n  viewAttachment, addProjectMaster, getProjectView, getProjectmasterAddMemberService, addProjectMasterFile, getuserComboServices\r\n})(injectIntl(ProjectView));\r\n"]},"metadata":{},"sourceType":"module"}