{"ast":null,"code":"var _jsxFileName = \"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\src\\\\pages\\\\quotation\\\\Quotation.jsx\";\nimport React, { Component } from \"react\";\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTrashAlt, faPencilAlt, faThumbsUp, faPlus, faEye, faUserTimes, faFileAlt } from '@fortawesome/free-solid-svg-icons';\nimport { ReactComponent as Quotationdiscount } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/image/quotationdiscount.svg\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport { callService, crudMaster, validateEsignCredential, updateStore, getQuotation, filterColumnData, getProjectTypeComboService, viewAttachment, addQuotation, getreloadQuotation, getQuotationAddTestService, getQuotationPricingEditService, GrossQuotation, modalSave, handleRetireQuotation, getQuotationClientCategoryComboService, getQuotaionClientComboService, getProjectCodeComboService, getQuotaionProductCategoryComboService, getQuotaionClientSiteComboService, generateControlBasedReport } from \"../../actions\";\nimport ListMaster from \"../../components/list-master/list-master.component\";\nimport { transactionStatus } from \"../../components/Enumeration\";\nimport AddQuotation from \"../../pages/quotation/AddQuotation\";\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\nimport SlideOutModal from \"../../components/slide-out-modal/SlideOutModal\";\nimport Esign from \"../audittrail/Esign\";\nimport { showEsign, getControlMap, formatInputDate } from \"../../components/CommonScript\";\nimport { ReadOnlyText, ContentPanel } from \"../../components/App.styles\";\nimport { process } from \"@progress/kendo-data-query\";\nimport ConfirmMessage from \"../../components/confirm-alert/confirm-message.component\"; // import ProjectMasterFilter from './ProjectMasterFilter';\n\nimport { intl } from \"../../components/App\"; // import DataGrid from '../../components/data-grid/data-grid.component';\n\nimport QuotationTab from \"./QuotationTab\";\nimport AddQuotationPreview from \"../../pages/quotation/AddQuotationPreview\";\nimport RetireQuotation from \"../../pages/quotation/RetireQuotation\";\nimport ModalShow from \"../../components/ModalShow\";\nimport ViewInfoDetails from \"../../components/ViewInfoDetails\";\nimport { ReactComponent as RetireaQuotation } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/image/RetireaQuotation.svg\";\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass Quotation extends Component {\n  constructor(props) {\n    super(props);\n\n    this.sidebarExpandCollapse = () => {\n      this.setState({\n        sidebarview: true\n      });\n    };\n\n    this.handleDateChange = (dateName, dateValue) => {\n      const {\n        selectedRecord\n      } = this.state;\n      selectedRecord[dateName] = dateValue;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onInputOnChange = (event, optional) => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (event.target.type === \"checkbox\") {\n        selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\n      } else if (event.target.type === 'radio') {\n        selectedRecord[event.target.name] = optional;\n      } else {\n        selectedRecord[event.target.name] = event.target.value;\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onSaveClick = (saveType, formRef) => {\n      let quotationData = [];\n      let inputParam = {};\n      let slideOutModal;\n      quotationData[\"userinfo\"] = this.props.Login.userInfo;\n      let postParam = {\n        inputListName: \"Quotation\",\n        selectedObject: \"SelectedQuotation\",\n        primaryKeyField: \"nquotationcode\"\n      };\n\n      if (this.props.Login.operation === \"update\" && this.props.Login.screenName === \"IDS_QUOTATION\") {\n        postParam[\"primaryKeyValue\"] = this.props.Login.masterData.SelectedQuotation.nquotationcode;\n        quotationData[\"quotation\"] = {\n          nquotationcode: this.props.Login.masterData.SelectedQuotation.nquotationcode,\n          nsitecode: this.props.Login.userInfo.nmastersitecode,\n          sprojecttitle: this.state.selectedRecord.sprojecttitle === undefined ? \"\" : this.state.selectedRecord.sprojecttitle,\n          sclientsiteaddress: this.state.selectedRecord.sclientsiteaddress === undefined ? \"\" : this.state.selectedRecord.sclientsiteaddress,\n          sinvoiceaddress: this.state.selectedRecord.sinvoiceaddress === undefined ? \"\" : this.state.selectedRecord.sinvoiceaddress,\n          sdescription: this.state.selectedRecord.sdescription === undefined ? \"\" : this.state.selectedRecord.sdescription,\n          ntransactionstatus: transactionStatus.DRAFT,\n          sdeviationremarks: this.state.selectedRecord.sdeviationremarks === undefined ? \"\" : this.state.selectedRecord.sdeviationremarks,\n          soemname: this.state.selectedRecord.soemname === undefined ? \"\" : this.state.selectedRecord.soemname // squotationleadtime: this.state.selectedRecord.squotationleadtime === undefined ? \"\" : this.state.selectedRecord.squotationleadtime\n\n        };\n      } else if (this.props.Login.operation === \"create\" && this.props.Login.screenName === \"IDS_QUOTATION\") {\n        quotationData[\"quotation\"] = {\n          nsitecode: this.props.Login.userInfo.nmastersitecode,\n          sprojecttitle: this.state.selectedRecord.sprojecttitle === undefined ? \"\" : this.state.selectedRecord.sprojecttitle,\n          sclientsiteaddress: this.state.selectedRecord.sclientsiteaddress === undefined ? \"\" : this.state.selectedRecord.sclientsiteaddress,\n          sinvoiceaddress: this.state.selectedRecord.sinvoiceaddress === undefined ? \"\" : this.state.selectedRecord.sinvoiceaddress,\n          sdescription: this.state.selectedRecord.sdescription === undefined ? \"\" : this.state.selectedRecord.sdescription,\n          ntransactionstatus: transactionStatus.DRAFT,\n          sdeviationremarks: this.state.selectedRecord.sdeviationremarks === undefined ? \"\" : this.state.selectedRecord.sdeviationremarks,\n          soemname: this.state.selectedRecord.soemname === undefined ? \"\" : this.state.selectedRecord.soemname // squotationleadtime: this.state.selectedRecord.squotationleadtime === undefined ? \"\" : this.state.selectedRecord.squotationleadtime\n\n        };\n      }\n\n      if ((this.props.Login.operation === \"create\" || this.props.Login.operation === \"update\") && this.props.Login.screenName === \"IDS_QUOTATION\") {\n        quotationData[\"quotation\"][\"nclientcatcode\"] = this.state.selectedRecord[\"nclientcatcode\"] ? this.state.selectedRecord[\"nclientcatcode\"].value : transactionStatus.NA;\n        quotationData[\"quotation\"][\"nclientcode\"] = this.state.selectedRecord[\"nclientcode\"] !== \"\" ? this.state.selectedRecord[\"nclientcode\"].value : transactionStatus.NA;\n        quotationData[\"quotation\"][\"nclientsitecode\"] = this.state.selectedRecord[\"nclientsitecode\"] !== \"\" ? this.state.selectedRecord[\"nclientsitecode\"].value : transactionStatus.NA;\n        quotationData[\"quotation\"][\"nclientcontactcode\"] = this.state.selectedRecord[\"nclientcontactcode\"] !== \"\" ? this.state.selectedRecord[\"nclientcontactcode\"].value : transactionStatus.NA;\n        quotationData[\"quotation\"][\"noemcode\"] = this.state.selectedRecord[\"noemcode\"] !== undefined ? this.state.selectedRecord[\"noemcode\"].value : transactionStatus.NA; // quotationData[\"quotation\"][\"nquotationtypecode\"] = this.state.selectedRecord[\"nquotationtypecode\"]!==\"\" ? this.state.selectedRecord[\"nquotationtypecode\"].value\n        //   : transactionStatus.NA;\n\n        quotationData[\"quotation\"][\"nquotationtypecode\"] = transactionStatus.ACTIVE;\n        quotationData[\"quotation\"][\"nprojecttypecode\"] = this.state.selectedRecord[\"nprojecttypecode\"] ? this.state.selectedRecord[\"nprojecttypecode\"].value : transactionStatus.NA;\n        quotationData[\"quotation\"][\"nprojectmastercode\"] = this.state.selectedRecord[\"nprojectmastercode\"] ? this.state.selectedRecord[\"nprojectmastercode\"].value : transactionStatus.NA;\n        /*     quotationData[\"quotation\"][\"nuserrolecode\"] = this.state.selectedRecord[\"nuserrolecode\"]!==\"\" ? this.state.selectedRecord[\"nuserrolecode\"]\r\n                : transactionStatus.NA; */\n        // quotationData[\"quotation\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"]\n        //   : transactionStatus.NA;\n        // quotationData[\"quotation\"][\"drfwdate\"] = formatInputDate(this.state.selectedRecord[\"srfwdate\"], false);\n\n        quotationData[\"quotation\"][\"dquotationdate\"] = this.QuotationformatInputDate(this.state.selectedRecord[\"dquotationdate\"]); //     quotationData[\"quotation\"][\"dquotationdate\"] = rearrangeDateFormat(quotationData.userinfo,this.state.selectedRecord[\"dquotationdate\"]);\n\n        quotationData[\"quotation\"][\"ntzrfwdate\"] = quotationData.userinfo.ntimezonecode ? quotationData.userinfo.ntimezonecode : \"-1\";\n        quotationData[\"quotation\"][\"ntzquotationdate\"] = quotationData.userinfo.ntimezonecode ? quotationData.userinfo.ntimezonecode : \"-1\";\n        quotationData[\"quotation\"][\"nproductcatcode\"] = this.state.selectedRecord[\"nproductcatcode\"] !== \"\" ? this.state.selectedRecord[\"nproductcatcode\"].value : transactionStatus.NA;\n        quotationData[\"quotation\"][\"nproductcode\"] = this.state.selectedRecord[\"nproductcode\"] !== \"\" ? this.state.selectedRecord[\"nproductcode\"].value : transactionStatus.NA;\n      }\n\n      if (this.props.Login.operation === \"create\" && this.props.Login.screenName === \"IDS_TEST\") {\n        inputParam = this.onSaveQuotationTest(saveType, formRef);\n      }\n\n      if (this.props.Login.operation === \"update\" && (this.props.Login.screenName === \"IDS_PRICE\" || this.props.Login.screenName === \"IDS_CALCULATEPRICING\")) {\n        inputParam = this.onSaveQuotationTestPrice(saveType, formRef);\n      }\n\n      if (this.props.Login.operation === \"create\" && this.props.Login.screenName === \"IDS_CALCULATEPRICING\") {\n        inputParam = this.onSaveGrossQuotation(saveType, formRef);\n      }\n\n      if ((this.props.Login.operation === \"create\" || this.props.Login.operation === \"update\") && this.props.Login.screenName === \"IDS_QUOTATION\") {\n        inputParam = {\n          classUrl: \"quotation\",\n          methodUrl: \"Quotation\",\n          inputData: quotationData,\n          operation: this.props.Login.operation,\n          saveType,\n          formRef,\n          postParam,\n          searchRef: this.searchRef,\n          isClearSearch: this.props.Login.isClearSearch,\n          selectedRecord: { ...this.state.selectedRecord\n          }\n        };\n      }\n\n      slideOutModal = this.props.Login.screenName === \"IDS_TEST\" || this.props.Login.screenName === \"IDS_PRICE\" || this.props.Login.screenName === \"IDS_CALCULATEPRICING\" ? \"openChildModal\" : \"openModal\";\n      const masterData = this.props.Login.masterData;\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData\n            },\n            saveType\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, masterData, slideOutModal);\n      }\n    };\n\n    this.onSaveQuotationTestPrice = (saveType, formRef) => {\n      const quotationtestPriceData = {\n        \"userinfo\": this.props.Login.userInfo,\n        \"QuotationTest\": this.props.Login.masterData.SelectedQuotation,\n        \"nquotationcode\": this.props.Login.masterData.SelectedQuotation.nquotationcode,\n        \"nprojectmastercode\": this.props.Login.masterData.SelectedQuotation.nprojectmastercode,\n        //  \"nclientcatcode\":this.props.Login.masterData.SelectedQuotation.nclientcatcode,\n        \"nclientcode\": this.props.Login.masterData.SelectedQuotation.nclientcode //  \"nclientsitecode\":this.props.Login.masterData.SelectedQuotation.nclientsitecode,\n        //  \"nclientcontactcode\":this.props.Login.masterData.SelectedQuotation.nclientcontactcode\n        //    \"ncost\":this.props.Login.selectedRecord[0].ncost\n\n      };\n      let postParam = undefined;\n      let dataState = undefined;\n      let selectedId = null;\n\n      if (this.props.Login.operation === \"update\") {\n        // edit\n        dataState = this.state.dataState;\n        selectedId = this.props.Login.selectedId;\n        postParam = {\n          inputListName: \"Quotation\",\n          selectedObject: \"SelectedQuotation\",\n          primaryKeyField: \"nquotationcode\"\n        }; //  let selectedRecord1=[this.props.Login.selectedRecord];\n\n        let QuotationTestPriceArray = [];\n        this.props.Login.selectedRecord.forEach((item, index) => {\n          if (item.ntotalamount < 0) {\n            QuotationTestPriceArray[index] = { ...this.props.Login.selectedRecord[index],\n              ntotalamount: 0\n            };\n          }\n\n          QuotationTestPriceArray[index] = {\n            namount: this.props.Login.selectedRecord[index].namount,\n            nclientcode: this.props.Login.masterData.SelectedQuotation.nclientcode,\n            ncost: this.props.Login.selectedRecord[index].ncost,\n            nnoofsamples: this.props.Login.selectedRecord[index].nnoofsamples,\n            nprojectmastercode: this.props.Login.selectedRecord[index].nprojectmastercode,\n            nquotationcode: this.props.Login.selectedRecord[index].nquotationcode,\n            nquotationtestcode: this.props.Login.selectedRecord[index].nquotationtestcode,\n            ntestcode: this.props.Login.selectedRecord[index].ntestcode,\n            ntotalamount: this.props.Login.selectedRecord[index].ntotalamount,\n            ntotalgrosstamount: this.props.Login.selectedRecord[index].ntotalgrosstamount,\n            //  stestdescription: this.props.Login.selectedRecord[index].stestdescription,\n            stestsynonym: this.props.Login.selectedRecord[index].stestsynonym,\n            ndiscountbandcode: this.props.Login.selectedRecord[index].ndiscountbandcode.value,\n            stestplatform: this.props.Login.selectedRecord[index].stestplatform,\n            squotationleadtime: this.props.Login.selectedRecord[index].squotationleadtime,\n            snotes: this.props.Login.selectedRecord[index].snotes,\n            nmethodcode: this.props.Login.selectedRecord[index].nmethodcode,\n            nclientcatcode: this.props.Login.masterData.SelectedQuotation.nclientcatcode,\n            nclientsitecode: this.props.Login.masterData.SelectedQuotation.nclientsitecode,\n            nclientcontactcode: this.props.Login.masterData.SelectedQuotation.nclientcontactcode\n          };\n        });\n        quotationtestPriceData[\"QuotationTest\"] = JSON.parse(JSON.stringify(QuotationTestPriceArray));\n      } else {\n        //add               \n        let priceList = [];\n        this.state.selectedRecord[\"ntestcode\"] && this.state.selectedRecord[\"ntestcode\"].map(item => {\n          return priceList.push({\n            ntestcode: item.value\n          });\n        });\n        quotationtestPriceData[\"QuotationTest\"] = priceList;\n      }\n\n      if (quotationtestPriceData[\"QuotationTest\"].hasOwnProperty('esignpassword')) {\n        if (quotationtestPriceData[\"QuotationTest\"]['esignpassword'] === '') {\n          delete quotationtestPriceData[\"QuotationTest\"]['esigncomments'];\n          delete quotationtestPriceData[\"QuotationTest\"]['esignpassword'];\n          delete quotationtestPriceData[\"QuotationTest\"][\"agree\"];\n        }\n      } //console.log(\"update data:\", quotationtestPriceData);\n\n\n      const inputParam = {\n        classUrl: this.props.Login.inputParam.classUrl,\n        methodUrl: \"QuotationTest\",\n        inputData: quotationtestPriceData,\n        operation: this.props.Login.operation,\n        saveType,\n        formRef,\n        postParam,\n        searchRef: this.searchRef,\n        isClearSearch: this.props.Login.isClearSearch,\n        selectedId,\n        dataState\n      };\n      return inputParam;\n    };\n\n    this.onNumericInputOnChange = (event, primaryFieldKey) => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (primaryFieldKey && event.target.name === \"nnoofsamples\") {\n        const index = selectedRecord.findIndex(item => item.nquotationtestcode === primaryFieldKey);\n\n        if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)) {\n          selectedRecord[index][\"nnoofsamples\"] = event.target.value;\n        }\n      } else {\n        selectedRecord[event.target.name] = event.target.value;\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.validateEsign = () => {\n      const inputParam = {\n        inputData: {\n          userinfo: { ...this.props.Login.userInfo,\n            sreason: this.state.selectedRecord[\"esigncomments\"]\n          },\n          password: this.state.selectedRecord[\"esignpassword\"]\n        },\n        screenData: this.props.Login.screenData\n      };\n      this.props.validateEsignCredential(inputParam, \"openModal\");\n    };\n\n    this.DeleteQuotation = (methodUrl, selectedQuotation, operation, ncontrolCode) => {\n      if (selectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\n        const postParam = {\n          inputListName: \"QuotationList\",\n          selectedObject: \"SelectedQuotation\",\n          primaryKeyField: \"nquotationcode\",\n          primaryKeyValue: selectedQuotation.nquotationcode,\n          fetchUrl: \"quotation/getQuotation\",\n          fecthInputObject: {\n            userinfo: this.props.Login.userInfo\n          }\n        };\n        const inputParam = {\n          classUrl: this.props.Login.inputParam.classUrl,\n          methodUrl,\n          postParam,\n          inputData: {\n            userinfo: this.props.Login.userInfo,\n            quotation: selectedQuotation\n          },\n          operation,\n          isClearSearch: this.props.Login.isClearSearch,\n          selectedRecord: { ...this.state.selectedRecord\n          }\n        };\n        const masterData = this.props.Login.masterData;\n\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\n          const updateInfo = {\n            typeName: DEFAULT_RETURN,\n            data: {\n              loadEsign: true,\n              screenData: {\n                inputParam,\n                masterData\n              },\n              openModal: true,\n              screenName: \"IDS_QUOTATION\",\n              operation\n            }\n          };\n          this.props.updateStore(updateInfo);\n        } else {\n          this.props.crudMaster(inputParam, masterData, \"openModal\");\n        }\n      } else if (selectedQuotation.ntransactionstatus === transactionStatus.APPROVED) {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_CANNOTDELETEAPPROVEDQUOTATION\"\n        }));\n      } else if (selectedQuotation.ntransactionstatus === transactionStatus.RETIRED) {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_CANNOTDELETERETIREDQUOTATION\"\n        }));\n      }\n    };\n\n    this.QuotationPreview = () => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          screenName: \"IDS_VIEW\",\n          openModal: true,\n          operation: \"create\",\n          modalScreenSize: false\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.onComboChange = (comboData, fieldName, caseNo, nquotationtestcode) => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (comboData !== null) {\n        switch (caseNo) {\n          case 1:\n            if (fieldName === \"nclientcatcode\") {\n              // const selectedRecord = this.state.selectedRecord || {};\n              if (selectedRecord.nclientcatcode) {\n                if (parseInt(comboData.value) !== parseInt(selectedRecord.nclientcatcode.value)) {\n                  // selectedRecord.nusercode={};\n                  delete selectedRecord.nclientcode;\n                  delete selectedRecord.nclientsitecode;\n                  delete selectedRecord.nclientcontactcode;\n                }\n              }\n\n              selectedRecord[fieldName] = comboData;\n              selectedRecord[\"sclientcatname\"] = comboData.item[\"sclientcatname\"];\n              this.props.getQuotationClientCategoryComboService({\n                inputData: {\n                  userinfo: this.props.Login.userInfo,\n                  sdisplayname: selectedRecord.nclientcatcode.label,\n                  primarykey: selectedRecord.nclientcatcode.value\n                }\n              }, selectedRecord);\n            }\n\n            if (fieldName === \"nclientcode\") {\n              // const selectedRecord = this.state.selectedRecord || {};\n              if (selectedRecord.nclientcode) {\n                if (parseInt(comboData.value) !== parseInt(selectedRecord.nclientcode.value)) {\n                  // selectedRecord.nusercode={};\n                  delete selectedRecord.nclientsitecode;\n                  delete selectedRecord.nclientcontactcode;\n                }\n              }\n\n              selectedRecord[fieldName] = comboData;\n              selectedRecord[\"sclientname\"] = comboData.item[\"sclientname\"];\n              this.props.getQuotaionClientComboService({\n                inputData: {\n                  userinfo: this.props.Login.userInfo,\n                  sdisplayname: selectedRecord.nclientcode.label,\n                  primarykey: selectedRecord.nclientcode.value\n                }\n              }, selectedRecord);\n            }\n\n            if (fieldName === \"nclientsitecode\") {\n              // const selectedRecord = this.state.selectedRecord || {};\n              if (selectedRecord.nclientsitecode) {\n                if (parseInt(comboData.value) !== parseInt(selectedRecord.nclientsitecode.value)) {\n                  // selectedRecord.nusercode={};\n                  delete selectedRecord.nclientcontactcode;\n                }\n              }\n\n              selectedRecord[fieldName] = comboData;\n              selectedRecord[\"sclientsitename\"] = comboData.item[\"sclientsitename\"];\n              this.props.getQuotaionClientSiteComboService({\n                inputData: {\n                  userinfo: this.props.Login.userInfo,\n                  sdisplayname: selectedRecord.nclientsitecode.label,\n                  primarykey: selectedRecord.nclientsitecode.value,\n                  nclientcode: selectedRecord.nclientcode.value\n                }\n              }, selectedRecord);\n            }\n\n            if (fieldName === \"nproductcatcode\") {\n              //\n              // const selectedRecord = this.state.selectedRecord || {};\n              if (selectedRecord.nproductcatcode) {\n                if (parseInt(comboData.value) !== parseInt(selectedRecord.nproductcatcode.value)) {\n                  // selectedRecord.nusercode={};\n                  delete selectedRecord.nproductcode;\n                }\n              }\n\n              selectedRecord[fieldName] = comboData;\n              selectedRecord[\"sproductcatname\"] = comboData.item[\"sproductcatname\"];\n              this.props.getQuotaionProductCategoryComboService({\n                inputData: {\n                  userinfo: this.props.Login.userInfo,\n                  sdisplayname: selectedRecord.nproductcatcode.label,\n                  primarykey: selectedRecord.nproductcatcode.value\n                }\n              }, selectedRecord);\n            }\n\n            break;\n\n          case 2:\n            // const selectedRecordfilter = this.state.selectedRecordfilter || {};\n            // selectedRecordfilter[fieldName] = comboData;\n            // this.setState({ selectedRecordfilter });\n            // break;\n            // const selectedRecord = this.state.selectedRecord || {};\n            selectedRecord[fieldName] = comboData;\n            this.setState({\n              selectedRecord\n            });\n            break;\n\n          case 3:\n            selectedRecord[fieldName] = comboData;\n\n            if (selectedRecord[fieldName] == null) {\n              selectedRecord[fieldName] = [];\n\n              if (fieldName === \"ndiscountbandcode\") {\n                selectedRecord[\"DiscountAmount\"] = 0;\n                selectedRecord[\"ndiscountpercentage\"] = 0;\n              } else if (fieldName === \"nvatbandcode\") {\n                selectedRecord[\"VatAmount\"] = 0;\n                selectedRecord[\"nvatpercentage\"] = 0;\n              }\n\n              selectedRecord[\"TotalNetAmount\"] = parseFloat((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount + selectedRecord.VatAmount - this.state.selectedRecord.DiscountAmount).toFixed(2));\n            } else {\n              if (fieldName === \"ndiscountbandcode\") {\n                const VatAmount = this.state.selectedRecord.VatAmount === undefined ? 0.00 : this.state.selectedRecord.VatAmount;\n                selectedRecord[\"DiscountAmount\"] = parseFloat((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount * (selectedRecord.ndiscountbandcode.item.namount / 100)).toFixed(2)); //  selectedRecord[\"TotalNetAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+(this.state.selectedRecord.DiscountAmount-VatAmount);\n\n                selectedRecord[\"TotalNetAmount\"] = parseFloat((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount + VatAmount - this.state.selectedRecord.DiscountAmount).toFixed(2));\n                selectedRecord[\"ndiscountpercentage\"] = selectedRecord.ndiscountbandcode.item.namount;\n              } else if (fieldName === \"nvatbandcode\") {\n                selectedRecord[\"VatAmount\"] = parseFloat((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount * (selectedRecord.nvatbandcode.item.namount / 100)).toFixed(2)); //            selectedRecord[\"TotalNetAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+(selectedRecord.DiscountAmount-this.state.selectedRecord.VatAmount);\n\n                selectedRecord[\"TotalNetAmount\"] = parseFloat((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount + this.state.selectedRecord.VatAmount - selectedRecord.DiscountAmount).toFixed(2));\n                selectedRecord[\"nvatpercentage\"] = selectedRecord.nvatbandcode.item.namount;\n              }\n            }\n\n            this.setState({\n              selectedRecord\n            });\n            break;\n\n          case 4:\n            if (fieldName === \"nprojecttypecode\") {\n              if (selectedRecord.nprojecttypecode) {\n                if (parseInt(comboData.value) !== parseInt(selectedRecord.nprojecttypecode.value)) {\n                  delete selectedRecord.nprojectmastercode;\n                  delete selectedRecord.sprojecttitle;\n                  delete selectedRecord.srfwdate;\n                  delete selectedRecord.suserrolename;\n                  delete selectedRecord.susername;\n                }\n              }\n\n              selectedRecord[fieldName] = comboData;\n              selectedRecord[\"sprojecttypename\"] = comboData.item[\"sprojecttypename\"];\n              this.props.getProjectTypeComboService({\n                inputData: {\n                  userinfo: this.props.Login.userInfo,\n                  sdisplayname: selectedRecord.nprojecttypecode.label,\n                  primarykey: selectedRecord.nprojecttypecode.value\n                }\n              }, selectedRecord);\n            }\n\n            if (fieldName === \"nprojectmastercode\") {\n              if (selectedRecord.nprojectmastercode) {\n                if (parseInt(comboData.value) !== parseInt(selectedRecord.nprojectmastercode.value)) {\n                  delete selectedRecord.sprojecttitle;\n                  delete selectedRecord.srfwdate;\n                  delete selectedRecord.suserrolename;\n                  delete selectedRecord.susername;\n                }\n              }\n\n              selectedRecord[fieldName] = comboData;\n              selectedRecord[\"sprojectcode\"] = comboData.item[\"sprojectcode\"];\n              this.props.getProjectCodeComboService({\n                inputData: {\n                  userinfo: this.props.Login.userInfo,\n                  sdisplayname: selectedRecord.nprojectmastercode.label,\n                  primarykey: selectedRecord.nprojectmastercode.value\n                }\n              }, selectedRecord);\n            }\n\n            break;\n\n          case 5:\n            let selectedRecordindex = selectedRecord.findIndex(item => item.nquotationtestcode === nquotationtestcode ? item : \"\");\n            selectedRecord[fieldName] = comboData;\n\n            if (selectedRecord[fieldName] == null) {\n              selectedRecord[selectedRecordindex][fieldName] = [];\n            } else {\n              //  selectedRecord[fieldName] = comboData;\n              //  selectedRecord[\"namount\"]=comboData.item.namount;\n              let str = selectedRecord[selectedRecordindex];\n              let discountamount = parseFloat((str.ncost * str.nnoofsamples * (comboData.item.namount / 100)).toFixed(2));\n              let count = str.ncost * str.nnoofsamples - discountamount;\n              selectedRecord[selectedRecordindex] = { ...str,\n                ntotalamount: parseFloat(count.toFixed(2)),\n                namount: comboData.item.namount,\n                ndiscountbandcode: comboData.item.ndiscountbandcode\n              };\n              selectedRecord[selectedRecordindex][\"ndiscountbandcode\"] = {\n                label: comboData.item.sdiscountbandname,\n                value: comboData.item.ndiscountbandcode\n              }; //    selectedRecord[selectedRecordindex][\"ndiscountbandcode\"]=  {...selectedRecord[selectedRecordindex],\n              //     label :comboData.item.sdiscountbandname,\n              //     value:comboData.item.ndiscountbandcode\n              // }\n            }\n\n            this.setState(selectedRecord);\n            break;\n\n          default:\n            break;\n        }\n\n        ;\n      } else {\n        if (fieldName === 'noemcode') {\n          delete selectedRecord.noemcode;\n        }\n\n        this.setState({\n          selectedRecord\n        });\n      }\n    };\n\n    this.closeModalShow = () => {\n      let loadEsign = this.props.Login.loadEsign;\n      let modalShow = this.props.Login.modalShow;\n      let popUp = this.props.Login.popUp;\n      let selectedRecord = this.props.Login.selectedRecord;\n\n      if (this.props.Login.loadEsign) {\n        loadEsign = false;\n      } else {\n        modalShow = false;\n        selectedRecord = {};\n        popUp = undefined;\n      }\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          modalShow,\n          selectedRecord,\n          selectedId: null,\n          loadEsign,\n          popUp\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.onNumericInputChange = (value, name, primaryFieldKey) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      const index = selectedRecord.findIndex(item => item.nquotationtestcode === primaryFieldKey);\n      selectedRecord[index][name] = value;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onInputOnChange = (event, primaryFieldKey) => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (event.target.name === 'snotes' || event.target.name === 'stestplatform' || event.target.name === 'squotationleadtime') {\n        const index = selectedRecord.findIndex(item => item.nquotationtestcode === primaryFieldKey);\n        selectedRecord[index][event.target.name] = event.target.value;\n      } else if (event.target.type === 'checkbox') {\n        if (event.target.name === \"ntransactionstatus\") selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.RETIRED;else selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\n      } else {\n        if (primaryFieldKey && (event.target.name === \"ncost\" || event.target.name === \"nnoofsamples\" || event.target.name === \"ntotalamount\")) {\n          const index = selectedRecord.findIndex(item => item.nquotationtestcode === primaryFieldKey); // if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){\n\n          if (/^-?\\d*?$/.test(event.target.value)) {\n            selectedRecord[index][event.target.name] = event.target.value;\n          }\n        } else {\n          selectedRecord[event.target.name] = event.target.value;\n        }\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onnetAmountEvent = nquotationtestcode => {\n      let selectedRecord = this.state.selectedRecord;\n      let selectedRecordindex = selectedRecord.findIndex(item => item.nquotationtestcode === nquotationtestcode ? item : \"\");\n      let str = selectedRecord[selectedRecordindex]; //  let count= (str.ncost * str.nnoofsamples)-str.namount; \n\n      let discountamount = parseFloat((str.ncost * str.nnoofsamples * (str.namount / 100)).toFixed(2));\n      let count = str.ncost * str.nnoofsamples - discountamount; // selectedRecord[selectedRecordindex]={...str,ntotalamount:count}\n\n      selectedRecord[selectedRecordindex] = { ...str,\n        ntotalamount: parseFloat(count.toFixed(2))\n      };\n      this.setState(selectedRecord);\n    };\n\n    this.approveQuotation = (methodUrl, selectedQuotation, operation, ncontrolCode) => {\n      if (selectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\n        const postParam = {\n          inputListName: \"Quotation\",\n          selectedObject: \"SelectedQuotation\",\n          primaryKeyField: \"nquotationcode\",\n          primaryKeyValue: selectedQuotation.nquotationcode,\n          fetchUrl: \"quotation/getQuotation\",\n          fecthInputObject: {\n            userinfo: this.props.Login.userInfo\n          }\n        };\n        const inputParam = {\n          classUrl: this.props.Login.inputParam.classUrl,\n          methodUrl,\n          postParam,\n          inputData: {\n            \"userinfo\": this.props.Login.userInfo,\n            \"quotation\": selectedQuotation\n          },\n          operation,\n          isClearSearch: this.props.Login.isClearSearch,\n          selectedRecord: { ...this.state.selectedRecord\n          }\n        };\n        const masterData = this.props.Login.masterData;\n\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\n          const updateInfo = {\n            typeName: DEFAULT_RETURN,\n            data: {\n              loadEsign: true,\n              screenData: {\n                inputParam,\n                masterData\n              },\n              openModal: true,\n              screenName: \"IDS_QUOTATION\",\n              operation\n            }\n          };\n          this.props.updateStore(updateInfo);\n        } else {\n          this.props.crudMaster(inputParam, masterData, \"openModal\");\n        }\n      } else if (selectedQuotation.ntransactionstatus === transactionStatus.APPROVED) {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_ALREADYAPPROVED\"\n        }));\n      } else if (selectedQuotation.ntransactionstatus === transactionStatus.RETIRED) {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_ALREADYRETIRED\"\n        }));\n      } else {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_SELECTDRAFTVERSION\"\n        }));\n      }\n    };\n\n    this.onSaveModalClick = () => {\n      console.log(\"savemodal\");\n      let inputData = {};\n      let quotationData = [];\n\n      if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.APPROVED) {\n        const retireId = this.state.controlMap.has(\"RetireQuotation\") && this.state.controlMap.get(\"RetireQuotation\").ncontrolcode;\n        let inputParam = {};\n        const postParam = {\n          inputListName: \"Quotation\",\n          selectedObject: \"SelectedQuotation\",\n          primaryKeyField: \"nquotationcode\",\n          primaryKeyValue: this.props.Login.masterData.SelectedQuotation.nquotationcode,\n          fetchUrl: \"quotation/getQuotation\",\n          fecthInputObject: {\n            userinfo: this.props.Login.userInfo\n          }\n        };\n\n        if (this.props.Login.modalTitle === \"IDS_RETIREQUOTATION\") {\n          if (this.state.selectedRecord[\"dretiredatetime\"] !== null) {\n            quotationData[\"dtransactiondate\"] = formatInputDate(this.state.selectedRecord[\"dretiredatetime\"], false);\n            quotationData[\"ntransdatetimezonecode\"] = this.props.Login.userInfo.ntimezonecode ? this.props.Login.userInfo.ntimezonecode : \"-1\";\n            quotationData[\"sretireremarks\"] = this.state.selectedRecord[\"sretireremarks\"] ? this.state.selectedRecord[\"sretireremarks\"] : \"\";\n            quotationData[\"nquotationcode\"] = this.props.Login.masterData.SelectedQuotation.nquotationcode;\n            quotationData[\"nquotationversioncode\"] = this.props.Login.masterData.SelectedQuotation.nquotationversioncode;\n            inputParam = {\n              classUrl: this.props.Login.inputParam.classUrl,\n              methodUrl: \"Quotation\",\n              postParam,\n              inputData: {\n                \"userinfo\": this.props.Login.userInfo,\n                \"quotation\": { ...this.props.Login.masterData.SelectedQuotation,\n                  \"dtransactiondate\": quotationData[\"dtransactiondate\"],\n                  \"sretireremarks\": quotationData[\"sretireremarks\"],\n                  \"nquotationcode\": quotationData[\"nquotationcode\"],\n                  \"nquotationversioncode\": quotationData[\"nquotationversioncode\"],\n                  \"ntransdatetimezonecode\": quotationData[\"ntransdatetimezonecode\"]\n                }\n              },\n              operation: this.props.Login.operation,\n              isClearSearch: this.props.Login.isClearSearch,\n              selectedRecord: { ...this.state.selectedRecord\n              }\n            };\n            const masterData = this.props.Login.masterData;\n\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, retireId)) {\n              const updateInfo = {\n                typeName: DEFAULT_RETURN,\n                data: {\n                  loadEsign: true,\n                  screenData: {\n                    inputParam,\n                    masterData\n                  },\n                  openModal: true,\n                  modalShow: false,\n                  screenName: \"IDS_QUOTATION\",\n                  operation: this.props.Login.operation\n                }\n              };\n              this.props.updateStore(updateInfo);\n            } else {\n              this.props.modalSave(inputParam, masterData);\n            }\n          } else {\n            toast.warn(this.props.intl.formatMessage({\n              id: \"IDS_SELECTDATE\"\n            }));\n          }\n        }\n      } else if (this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.RETIRED) {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_ALREADYRETIRED\"\n        }));\n      } else {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_SELECTAPPROVEDQUOTATION\"\n        }));\n      }\n    };\n\n    this.onTabChange = tabProps => {\n      const screenName = tabProps.screenName;\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          screenName\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.dataStateChange = event => {\n      this.setState({\n        dataResult: process(this.state.data, event.dataState),\n        dataState: event.dataState\n      });\n    };\n\n    this.historydataStateChange = event => {\n      this.setState({\n        dataResult: process(this.state.data, event.historydataState),\n        historydataState: event.historydataState\n      });\n    };\n\n    this.ConfirmDelete = (selectedQuotation, operation, deleteId, screenName) => {\n      this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({\n        id: \"IDS_DELETE\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_DEFAULTCONFIRMMSG\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_OK\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_CANCEL\"\n      }), () => this.DeleteQuotation(screenName, selectedQuotation, operation, deleteId));\n    };\n\n    this.reloadData = () => {\n      this.searchRef.current.value = \"\"; //    if (Object.values(this.props.Login.masterData.SelectedQuotation).length && this.props.Login.masterData.SelectedQuotation !== undefined) {\n      // if (this.props.Login.masterData.SelectedQuotation !== undefined) {\n\n      let inputParam = {\n        inputData: {\n          userinfo: this.props.Login.userInfo\n        },\n        classUrl: \"quotation\",\n        methodUrl: \"Quotation\"\n      };\n      this.props.getreloadQuotation(inputParam); // } \n      // else {\n      //   toast.warn(\n      //     this.props.intl.formatMessage({\n      //       id: \"IDS_PROJECTTYPENOTAVAILABLE\",\n      //     })\n      //   );\n      // }\n    };\n\n    this.DeleteQuotationTest = deleteParam => {\n      deleteParam.selectedRecord[\"nclientcode\"] = this.props.Login.masterData.SelectedQuotation.nclientcode;\n      deleteParam.selectedRecord[\"nprojectmastercode\"] = this.props.Login.masterData.SelectedQuotation.nprojectmastercode;\n      deleteParam.selectedRecord[\"nclientcatcode\"] = this.props.Login.masterData.SelectedQuotation.nclientcatcode;\n      deleteParam.selectedRecord[\"nclientsitecode\"] = this.props.Login.masterData.SelectedQuotation.nclientsitecode;\n      deleteParam.selectedRecord[\"nclientcontactcode\"] = this.props.Login.masterData.SelectedQuotation.nclientcontactcode;\n      const postParam = {\n        inputListName: \"QuotationList\",\n        selectedObject: \"SelectedQuotation\",\n        primaryKeyField: \"nquotationcode\",\n        primaryKeyValue: deleteParam.selectedRecord.nquotationtestcode,\n        fetchUrl: \"quotation/getQuotationTest\",\n        fecthInputObject: {\n          userinfo: this.props.Login.userInfo\n        }\n      };\n      const inputParam = {\n        classUrl: \"quotation\",\n        methodUrl: \"QuotationPrice\",\n        postParam,\n        inputData: {\n          \"QuotationTestPrice\": deleteParam.selectedRecord,\n          //.dataItem,\n          //      \"npriceversioncode\":this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode,\n          \"userinfo\": this.props.Login.userInfo\n        },\n        operation: \"delete\" //  priceDataState:this.state.priceDataState\n\n      };\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData: this.props.Login.masterData\n            },\n            openModal: true,\n            screenName: this.props.intl.formatMessage({\n              id: \"IDS_TESTPRICE\"\n            }),\n            operation: deleteParam.operation\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\n      }\n    };\n\n    this.closeModal = () => {\n      let loadEsign = this.props.Login.loadEsign;\n      let modalShow = this.props.Login.modalShow;\n      let openModal = this.props.Login.openModal;\n      let selectedRecord = this.state.selectedRecord; //    let selectedRecord = this.state.selectedRecord;\n\n      if (this.props.Login.loadEsign) {\n        if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"approve\") {\n          loadEsign = false;\n          openModal = false;\n          selectedRecord = {};\n        } else if (this.props.Login.operation === \"retire\") {\n          loadEsign = false;\n          openModal = false;\n          modalShow = true;\n          selectedRecord = {};\n        } else {\n          loadEsign = false;\n          selectedRecord['esignpassword'] = '';\n          selectedRecord['esigncomments'] = '';\n          selectedRecord['esignreason'] = '';\n        }\n      } else {\n        openModal = false;\n        modalShow = false;\n        selectedRecord = {};\n      }\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openModal,\n          loadEsign,\n          selectedRecord,\n          modalShow\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.openFilter = () => {\n      let showFilter = !this.props.Login.showFilter;\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          showFilter\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.closeFilter = () => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          showFilter: false\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    const _dataState = {\n      skip: 0,\n      take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\n    };\n    this.state = {\n      selectedRecord: {},\n      error: \"\",\n      userRoleControlRights: [],\n      selectedQuotation: undefined,\n      controlMap: new Map(),\n      Instrument: [],\n      dataState: _dataState,\n      dataResult: [],\n      data: [],\n      sidebarview: false\n    };\n    this.searchRef = React.createRef();\n    this.searchFieldList = [\"squotationno\", \"sclientcatname\", \"sclientname\", \"sclientsiteaddress\", \"soemname\", \"sproductcatname\", \"sproductname\", \"squotationdate\", \"sdescription\", \"sdeviationremarks\", \"sversionstatus\", \"sretireremarks\"];\n    this.confirmMessage = new ConfirmMessage();\n  }\n\n  onSaveQuotationTest(saveType, formRef) {\n    let inputData = [];\n    inputData[\"userinfo\"] = this.props.Login.userInfo;\n    const masterData = this.props.Login.masterData; // inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\n    //  inputData[\"Quotation\"] = {};\n\n    let testArray = [];\n    testArray = this.state.selectedRecord.ntestcode.map(item => {\n      let QuotationData = {};\n      QuotationData[\"ntestcode\"] = item.value;\n      QuotationData[\"nquotationcode\"] = this.props.Login.masterData.SelectedQuotation.nquotationcode;\n      QuotationData[\"nclientcode\"] = this.props.Login.masterData.SelectedQuotation.nclientcode;\n      QuotationData[\"nprojectmastercode\"] = this.props.Login.masterData.SelectedQuotation.nprojectmastercode;\n      return QuotationData;\n    });\n    inputData['QuotationTest'] = testArray;\n    const inputParam = {\n      classUrl: \"quotation\",\n      methodUrl: \"QuotationTest\",\n      inputData: inputData,\n      masterData,\n      operation: this.props.Login.operation,\n      saveType,\n      formRef,\n      searchRef: this.searchRef,\n      isClearSearch: this.props.Login.isClearSearch,\n      isChild: true\n    };\n    return inputParam;\n  }\n\n  QuotationformatInputDate(date) {\n    let formattedDate = \"\";\n    formattedDate = date.getFullYear() + \"-\" + (\"00\" + (date.getMonth() + 1)).slice(-2) + \"-\" + (\"00\" + date.getDate()).slice(-2) + \"T00:00:00Z\";\n    return formattedDate;\n  }\n\n  onSaveGrossQuotation(saveType, formRef) {\n    let quotationData = {};\n    quotationData[\"userinfo\"] = this.props.Login.userInfo;\n    quotationData[\"GrossQuotation\"] = {\n      nquotationcode: this.props.Login.masterData.SelectedQuotation.nquotationcode,\n      nsitecode: this.props.Login.userInfo.nmastersitecode,\n      ndiscountamount: this.state.selectedRecord.DiscountAmount,\n      nvatamount: this.state.selectedRecord.VatAmount,\n      ntotalnetamount: this.state.selectedRecord.TotalNetAmount,\n      ntotalgrossamount: this.props.Login.QuotationGrossAmount[0].ntotalgrossamount,\n      nclientcatcode: this.props.Login.masterData.SelectedQuotation.nclientcatcode,\n      nclientcode: this.props.Login.masterData.SelectedQuotation.nclientcode,\n      nclientsitecode: this.props.Login.masterData.SelectedQuotation.nclientsitecode,\n      nclientcontactcode: this.props.Login.masterData.SelectedQuotation.nclientcontactcode,\n      nprojectmastercode: this.props.Login.masterData.SelectedQuotation.nprojectmastercode\n    };\n    quotationData[\"GrossQuotation\"][\"ndiscountbandcode\"] = this.state.selectedRecord[\"ndiscountbandcode\"] ? this.state.selectedRecord[\"ndiscountbandcode\"].value : transactionStatus.NA;\n    quotationData[\"GrossQuotation\"][\"nvatbandcode\"] = this.state.selectedRecord[\"nvatbandcode\"] ? this.state.selectedRecord[\"nvatbandcode\"].value : transactionStatus.NA; // const postParam = {\n    //   inputListName: \"Quotation\",\n    //   selectedObject: \"SelectedQuotation\",\n    //   primaryKeyField: \"nquotationcode\",\n    //   primaryKeyValue: this.props.Login.masterData.SelectedQuotation.nquotationcode,\n    //   fetchUrl: \"quotation/getQuotation\",\n    //   fecthInputObject: { userinfo: this.props.Login.userInfo },\n    // };\n\n    const inputParam = {\n      classUrl: \"quotation\",\n      methodUrl: \"GrossQuotation\",\n      // postParam,\n      inputData: quotationData,\n      searchRef: this.searchRef,\n      operation: this.props.Login.operation,\n      saveType,\n      formRef,\n      isClearSearch: this.props.Login.isClearSearch,\n      isChild: true\n    };\n    return inputParam;\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.Login.masterStatus !== \"\") {\n      if (props.Login.errorCode === 417 || props.Login.errorCode === 409) {\n        toast.warn(props.Login.masterStatus);\n        props.Login.masterStatus = \"\";\n      }\n    }\n\n    if (props.Login.error !== state.error) {\n      toast.error(props.Login.error);\n      props.Login.error = \"\";\n    }\n\n    if (props.Login.selectedRecord === undefined) {\n      return {\n        selectedRecord: {}\n      };\n    }\n\n    return null;\n  }\n\n  render() {\n    let versionStatusCSS = \"outline-secondary\";\n    let activeIconCSS = \"fa fa-check\";\n\n    if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.APPROVED) {\n      versionStatusCSS = \"outline-success\";\n    } else if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.RETIRED) {\n      versionStatusCSS = \"outline-danger\";\n      activeIconCSS = \"\";\n    } else if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\n      activeIconCSS = \"\";\n    }\n\n    if (this.props.Login.openModal || this.props.Login.modalShow) {\n      this.mandatoryFields = this.findMandatoryFields(this.props.Login.screenName, this.state.selectedRecord, this.props.Login.operation);\n    }\n\n    const {\n      userInfo\n    } = this.props.Login;\n    const addId = this.state.controlMap.has(\"AddQuotation\") && this.state.controlMap.get(\"AddQuotation\").ncontrolcode;\n    const editId = this.state.controlMap.has(\"EditQuotation\") && this.state.controlMap.get(\"EditQuotation\").ncontrolcode;\n    const deleteId = this.state.controlMap.has(\"DeleteQuotation\") && this.state.controlMap.get(\"DeleteQuotation\").ncontrolcode;\n    const approveId = this.state.controlMap.has(\"ApproveQuotation\") && this.state.controlMap.get(\"ApproveQuotation\").ncontrolcode;\n    const retireId = this.state.controlMap.has(\"RetireQuotation\") && this.state.controlMap.get(\"RetireQuotation\").ncontrolcode;\n    const addQuotationTestId = this.state.controlMap.has(\"AddQuotationTest\") && this.state.controlMap.get(\"AddQuotationTest\").ncontrolcode;\n    const updateQuotationTestId = this.state.controlMap.has(\"EditQuotationTest\") && this.state.controlMap.get(\"EditQuotationTest\").ncontrolcode; // const grossQuotationeId = this.state.controlMap.has(\"CalculatePricing\") && this.state.controlMap.get(\"CalculatePricing\").ncontrolcode;\n\n    const viewQuotationId = this.state.controlMap.has(\"ViewQuotation\") && this.state.controlMap.get(\"ViewQuotation\").ncontrolcode;\n    const viewreportId = this.state.controlMap.has(\"ViewReport\") && this.state.controlMap.get(\"ViewReport\").ncontrolcode;\n    const editTestPriceParam = {\n      screenName: \"IDS_PRICE\",\n      \"operation\": \"update\",\n      masterData: this.props.Login.masterData,\n      userInfo: this.props.Login.userInfo,\n      ncontrolCode: updateQuotationTestId\n    };\n    const selectedQuotation = this.props.Login.masterData.SelectedQuotation;\n    const filterParam = {\n      inputListName: \"Quotation\",\n      selectedObject: \"SelectedQuotation\",\n      primaryKeyField: \"nquotationcode\",\n      fetchUrl: \"quotation/getActiveQuotationById\",\n      fecthInputObject: {\n        userinfo: this.props.Login.userInfo\n      },\n      masterData: this.props.Login.masterData,\n      searchFieldList: this.searchFieldList\n    };\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      noGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: `${!this.props.sidebarview ? '4' : \"2\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ListMaster, {\n      screenName: this.props.intl.formatMessage({\n        id: \"IDS_QUOTATION\"\n      }),\n      masterData: this.props.Login.masterData,\n      userInfo: this.props.Login.userInfo,\n      masterList: this.props.Login.masterData.searchedData || this.props.Login.masterData.Quotation,\n      getMasterDetail: quotationData => this.props.getQuotation(quotationData, this.props.Login.userInfo, this.props.Login.masterData),\n      selectedMaster: selectedQuotation,\n      primaryKeyField: \"nquotationcode\",\n      mainField: \"squotationno\",\n      firstField: \"sclientname\",\n      secondField: \"sversionstatus\",\n      filterColumnData: this.props.filterColumnData,\n      filterParam: filterParam,\n      userRoleControlRights: this.state.userRoleControlRights,\n      addId: addId,\n      searchRef: this.searchRef,\n      reloadData: this.reloadData //     openModal={() => this.props.addQuotation(\"create\", selectedQuotation, userInfo, addId, this.state.ProjectMasterList)}\n      ,\n      openModal: () => this.props.addQuotation(\"create\", userInfo, addId, selectedQuotation),\n      isMultiSelecct: false,\n      hidePaging: false,\n      isClearSearch: this.props.Login.isClearSearch,\n      openFilter: this.openFilter,\n      closeFilter: this.closeFilter // onFilterSubmit={this.onFilterSubmit}    \n      ,\n      showFilterIcon: false,\n      showFilter: this.props.Login.showFilter\n      /*         filterComponent={[\r\n                 {\r\n                   \"IDS_PROJECTMASTERFILTER\":\r\n                     <ProjectMasterFilter\r\n                       filterProjectType={this.state.ProjectMasterList || []}\r\n                       nfilterProjectType={this.props.Login.masterData.SelectedProjectType || {}}\r\n                       onComboChange={this.onComboChange}\r\n                       selectedRecord={this.state.selectedRecordfilter || {}}\r\n                     />\r\n                 }\r\n               ]} */\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: `${!this.props.sidebarview ? '8' : \"10\"}`,\n      className: \"position-relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebar-view-btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 661,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebar-view-btn \",\n      onClick: this.props.parentFunction,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 662,\n        columnNumber: 17\n      }\n    }, !this.props.sidebarview ? /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fa fa-less-than\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 664,\n        columnNumber: 25\n      }\n    }) : /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fa fa-greater-than\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 665,\n        columnNumber: 25\n      }\n    }))), selectedQuotation ? /*#__PURE__*/React.createElement(ContentPanel, {\n      className: \"panel-main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"border-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Card.Title, {\n      className: \"product-title-main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 674,\n        columnNumber: 23\n      }\n    }, selectedQuotation.sclientname), /*#__PURE__*/React.createElement(Card.Subtitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex product-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"product-title-sub flex-grow-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 679,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: `btn btn-outlined ${versionStatusCSS} btn-sm mr-3`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 29\n      }\n    }, selectedQuotation.sversionstatus)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 690,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(ViewInfoDetails, {\n      selectedObject: this.props.Login.masterData.SelectedQuotation,\n      screenHiddenDetails: this.state.userRoleControlRights.indexOf(editId) === -1,\n      screenName: this.props.Login.screenName,\n      dataTip: this.props.intl.formatMessage({\n        id: \"IDS_VIEW\"\n      }),\n      rowList: [[{\n        dataField: \"sclientcatname\",\n        idsName: \"IDS_CLIENTCATEGORY\"\n      }, {\n        dataField: \"soemnameview\",\n        idsName: \"IDS_OEM\"\n      }], [{\n        dataField: \"sclientname\",\n        idsName: \"IDS_CLIENT\"\n      }, {\n        dataField: \"sproductcatname\",\n        idsName: this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\"\n      }], [{\n        dataField: \"scontactname\",\n        idsName: \"IDS_CONTACTPERSON\"\n      }, {\n        dataField: \"sproductname\",\n        idsName: this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\"\n      }], [{\n        dataField: \"sphoneno\",\n        idsName: \"IDS_CONTACTNUMBER\"\n      }, {\n        dataField: \"squotationdate\",\n        idsName: \"IDS_QUOTATIONDATE\"\n      }], [{\n        dataField: \"semail\",\n        idsName: \"IDS_EMAILID\"\n      }], [{\n        dataField: \"sdescription\",\n        idsName: \"IDS_DESCRIPTION\"\n      }], [{\n        dataField: \"sdeviationremarks\",\n        idsName: \"IDS_REMARKS\"\n      }]],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 699,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Nav.Link, {\n      className: \"btn btn-circle outline-grey mr-2\",\n      name: \"edittestname\",\n      hidden: this.state.userRoleControlRights.indexOf(editId) === -1,\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_EDIT\"\n      }) //data-for=\"tooltip_list_wrap\"\n      ,\n      onClick: () => this.props.addQuotation(\"update\", userInfo, editId, selectedQuotation),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 740,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPencilAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      className: \"btn btn-circle outline-grey mr-2 action-icons-wrap\",\n      name: \"deletetestname\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_DELETE\"\n      }) //   data-for=\"tooltip_list_wrap\"\n      ,\n      hidden: this.state.userRoleControlRights.indexOf(deleteId) === -1,\n      onClick: () => this.ConfirmDelete(selectedQuotation, \"delete\", deleteId, \"Quotation\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 748,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTrashAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 753,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"approveQuotation\",\n      className: \"btn btn-circle outline-grey mr-2\",\n      hidden: this.state.userRoleControlRights.indexOf(approveId) === -1,\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_APPROVE\"\n      }) //data-for=\"tooltip_list_wrap\"\n      ,\n      onClick: () => this.approveQuotation(\"Quotation\", selectedQuotation, \"approve\", approveId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 757,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faThumbsUp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 762,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"retireQuotation\",\n      className: \"btn btn-circle outline-grey mr-2\",\n      hidden: this.state.userRoleControlRights.indexOf(retireId) === -1,\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_RETIRE\"\n      }) //data-for=\"tooltip_list_wrap\"\n      ,\n      onClick: () => this.props.handleRetireQuotation(\"retire\", userInfo, retireId, selectedQuotation) // onClick={() => this.retireQuotation(selectedQuotation, retireId)}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 765,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(RetireaQuotation, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 772,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"reportQuotation\",\n      className: \"btn btn-circle outline-grey mr-2\",\n      hidden: this.state.userRoleControlRights.indexOf(viewreportId) === -1,\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_VIEWREPORT\"\n      }) //data-for=\"tooltip_list_wrap\"\n      ,\n      onClick: () => this.props.generateControlBasedReport(viewreportId, selectedQuotation, this.props.Login, \"Quotation\", selectedQuotation.nquotationcode),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 776,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faFileAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 782,\n        columnNumber: 29\n      }\n    })))))), /*#__PURE__*/React.createElement(Card.Body, {\n      className: \"form-static-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 792,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"at-tabs border-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 799,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"at-tabs border-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 856,\n        columnNumber: 35\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      noGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 857,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 858,\n        columnNumber: 39\n      }\n    }, /*#__PURE__*/React.createElement(QuotationTab, {\n      primaryKeyField: \"nquotationtestcode\" // data={this.props.Login.masterData.ProjectMember}\n      ,\n      data: this.state.data // dataResult={this.props.Login.masterData.ProjectMember}\n      ,\n      dataResult: this.state.dataResult,\n      masterData: this.props.Login.masterData,\n      screenName: this.props.Login.screenName,\n      operation: this.props.Login.operation,\n      openChildModal: this.props.Login.openChildModal,\n      crudMaster: this.props.crudMaster,\n      errorCode: this.props.Login.errorCode,\n      validateEsignCredential: this.props.validateEsignCredential,\n      loadEsign: this.props.Login.loadEsign,\n      showAccordian: this.state.showAccordian,\n      selectedRecord: this.state.selectedRecord || {} // dataState={{skip: 0, take: 10}}\n      // dataState={this.props.Login.dataState}\n      ,\n      dataState: this.state.dataState,\n      dataStateChange: this.dataStateChange // extractedColumnList={fieldsForGrid} --\n      ,\n      controlMap: this.state.controlMap,\n      userRoleControlRights: this.state.userRoleControlRights,\n      inputParam: this.props.Login.inputParam,\n      userInfo: this.props.Login.userInfo //    getProjectmasterAddMemberService={(this.props.Login.screenName,this.props.Login.operation,this.props.getProjectmasterAddMemberService,this.props.Login.userInfo,this.props.Login.ncontrolCode)}\n      ,\n      getProjectmasterAddMemberService: this.props.getProjectmasterAddMemberService // --   fetchRecord={this.props.getPricingEditService}\n      //--       editParam={{...editTestPriceParam, \"updateType\":\"Single\", priceDataState:this.state.priceDataState}}\n      //  deleteParam={{operation:\"delete\"}}\n      // reloadData={this.reloadData}\n      // --      addRecord = {() => this.openModal(addId)}\n      ,\n      pageable: true,\n      onTabChange: this.onTabChange,\n      updateStore: this.props.updateStore,\n      scrollable: 'scrollable' // gridHeight = {'600px'}\n      ,\n      isActionRequired: true,\n      isToolBarRequired: false,\n      selectedId: this.props.Login.selectedId,\n      viewAttachment: this.props.viewAttachment,\n      MembersList: this.props.Login.MembersList,\n      onComboChange: this.onComboChange // File\n      ,\n      addProjectMasterFile: this.props.addProjectMasterFile,\n      esignRights: this.props.Login.userRoleControlRights // ntransactionstatus={selectedProjectMaster.ntransactionstatus}  ---\n      //  selectedRecord={this.props.Login.selectedRecord}\n      ,\n      onDropProjectMasterFile: this.onDropProjectMasterFile,\n      onInputOnChange: this.onInputOnChange,\n      screenData: this.props.Login.screenData,\n      deleteAttachment: this.deleteAttachment,\n      ncontrolCode: this.props.Login.ncontrolCode,\n      linkMaster: this.props.Login.linkMaster,\n      addQuotationTestId: this.props.Login.addQuotationTestId,\n      updateQuotationTestId: this.props.Login.updateQuotationTestId,\n      addId: this.props.Login.addId,\n      editParam: { ...editTestPriceParam\n      } // fetchRecord={this.props.getQuotationPricingEditService}\n      ,\n      deleteRecord: this.DeleteQuotationTest,\n      getQuotationAddTestService: this.props.getQuotationAddTestService,\n      getQuotationPricingEditService: this.props.getQuotationPricingEditService,\n      QuotationTestList: this.props.Login.QuotationTestList,\n      onSaveClick: this.onSaveClick,\n      onnetAmountEvent: this.onnetAmountEvent,\n      onNumericInputChange: this.onNumericInputChange,\n      DiscountBand: this.props.Login.DiscountBand,\n      VATBand: this.props.Login.VATBand,\n      modalScreenSize: this.props.Login.modalScreenSize,\n      QuotationGrossAmount: this.props.Login.QuotationGrossAmount,\n      QuotationHistorydata: this.props.Login.masterData.QuotationHistory,\n      QuotationHistorydataResult: this.props.Login.masterData.QuotationHistory,\n      historydataState: this.state.historydataState,\n      historydataStateChange: this.historydataStateChange,\n      selectedQuotation: selectedQuotation,\n      GrossQuotation: this.props.GrossQuotation,\n      EstimateQuotation: this.props.Login.masterData.GrossQuotation[0],\n      onFocus: this.handleFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 859,\n        columnNumber: 41\n      }\n    })))), /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 946,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"horizontal-line\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 947,\n        columnNumber: 29\n      }\n    })))))) : \"\"))), this.props.Login.openModal && /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.Login.openModal,\n      size: this.props.Login.modalScreenSize === true ? \"xl\" : \"lg\",\n      closeModal: this.closeModal,\n      hideSave: this.props.Login.screenName === \"IDS_VIEW\" ? true : false,\n      operation: this.props.Login.screenName === \"IDS_CALCULATEPRICING\" || this.props.Login.screenName === \"IDS_VIEW\" ? \"\" : this.props.Login.operation,\n      inputParam: this.props.Login.inputParam,\n      screenName: this.props.Login.screenName,\n      onSaveClick: this.onSaveClick,\n      esign: this.props.Login.loadEsign,\n      validateEsign: this.validateEsign,\n      selectedRecord: this.state.selectedRecord || {} //  mandatoryFields={this.props.Login.screenName !==\"IDS_PRICE\" ? this.mandatoryFields : []}\n      ,\n      mandatoryFields: this.mandatoryFields,\n      addComponent: this.props.Login.loadEsign ? /*#__PURE__*/React.createElement(Esign, {\n        operation: this.props.Login.operation,\n        onInputOnChange: this.onInputOnChange,\n        inputParam: this.props.Login.inputParam,\n        selectedRecord: this.state.selectedRecord || {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1141,\n          columnNumber: 13\n        }\n      }) : this.props.Login.screenName === \"IDS_QUOTATION\" ? /*#__PURE__*/React.createElement(AddQuotation, {\n        userInfo: this.props.Login.userInfo,\n        genericlabel: this.props.Login.genericLabel,\n        selectedRecord: this.state.selectedRecord || {} // selectedclientcode={this.state.selectedRecord.nclientcode || {}}\n        ,\n        sclientsiteaddress: this.props.Login.sclientsiteaddress,\n        SelectedClient: this.props.Login.SelectedClient,\n        ClientCategory: this.props.Login.ClientCategory,\n        Client: this.props.Login.Client,\n        ClientSite: this.props.Login.ClientSite,\n        ClientContact: this.props.Login.ClientContact,\n        OEM: this.props.Login.OEM,\n        ProjectCode: this.props.Login.ProjectCode,\n        ProjectType: this.props.Login.ProjectType,\n        ProjectMaster: this.props.Login.ProjectMaster,\n        QuotationType: this.props.Login.QuotationType,\n        Product: this.props.Login.Product,\n        ProductCategory: this.props.Login.ProductCategory,\n        onInputOnChange: this.onInputOnChange,\n        onComboChange: this.onComboChange //     onNumericInputChange={this.onNumericInputChange}\n        ,\n        handleDateChange: this.handleDateChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1149,\n          columnNumber: 16\n        }\n      }) : this.props.Login.screenName === \"IDS_VIEW\" ? /*#__PURE__*/React.createElement(AddQuotationPreview, {\n        selectedQuotation: this.props.Login.masterData.SelectedQuotation,\n        userInfo: this.props.Login.userInfo,\n        genericlabel: this.props.Login.genericLabel,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1175,\n          columnNumber: 16\n        }\n      }) : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1126,\n        columnNumber: 12\n      }\n    }), this.props.Login.modalShow ? /*#__PURE__*/React.createElement(ModalShow, {\n      modalShow: this.props.Login.modalShow,\n      closeModal: this.closeModalShow,\n      onSaveClick: this.onSaveModalClick,\n      validateEsign: this.validateEsign,\n      masterStatus: this.props.Login.masterStatus,\n      mandatoryFields: this.mandatoryFields,\n      updateStore: this.props.updateStore,\n      selectedRecord: this.state.selectedRecord || {},\n      modalTitle: this.props.Login.modalTitle,\n      modalBody: this.props.Login.modalTitle === \"IDS_RETIREQUOTATION\" ? /*#__PURE__*/React.createElement(RetireQuotation, {\n        selectedRecord: this.state.selectedRecord || {} // Status={this.props.Login.screenName === \"IDS_RETIRE\"}\n        ,\n        TimeZoneList: this.props.Login.TimeZoneList,\n        onInputOnChange: this.onInputOnChange,\n        handleDateChange: this.handleDateChange,\n        userInfo: this.props.Login.userInfo,\n        esign: this.props.Login.loadEsign,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1197,\n          columnNumber: 15\n        }\n      }) : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1185,\n        columnNumber: 11\n      }\n    }) : \"\");\n  }\n\n  findMandatoryFields(screenName, selectedRecord, operation) {\n    let mandatoryFields = [];\n\n    if (screenName === \"IDS_QUOTATION\" && operation !== \"retire\") {\n      mandatoryFields = [{\n        \"idsName\": \"IDS_CLIENTCATEGORY\",\n        \"dataField\": \"nclientcatcode\",\n        \"width\": \"200px\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"idsName\": \"IDS_CLIENT\",\n        \"dataField\": \"nclientcode\",\n        \"width\": \"200px\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"idsName\": \"IDS_CLIENTSITE\",\n        \"dataField\": \"nclientsitecode\",\n        \"width\": \"200px\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"idsName\": \"IDS_CONTACTNAME\",\n        \"dataField\": \"nclientcontactcode\",\n        \"width\": \"200px\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }, //      { \"idsName\": \"IDS_OEM\", \"dataField\": \"noemcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\n      //      { \"idsName\": \"IDS_INVOICEADDRESS\", \"dataField\": \"sinvoiceaddress\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\n      //      { \"idsName\": \"IDS_QUOTATIONTYPE\", \"dataField\": \"nquotationtypecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\n      //      { \"idsName\": \"IDS_PROJECTTYPE\", \"dataField\": \"nprojecttypecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\n      //      { \"idsName\": \"IDS_PROJECTCODE\", \"dataField\": \"nprojectmastercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\n      //      { \"idsName\": \"IDS_PROJECTTITLE\", \"dataField\": \"sprojecttitle\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\n      //      { \"idsName\": \"IDS_RFWDATE\", \"dataField\": \"srfwdate\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"textbox\" },\n      //     { \"idsName\": \"IDS_ROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\n      //     { \"idsName\": \"IDS_USER\", \"dataField\": \"susername\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\n      {\n        \"idsName\": this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\",\n        \"dataField\": \"nproductcatcode\",\n        \"width\": \"200px\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"idsName\": this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\",\n        \"dataField\": \"nproductcode\",\n        \"width\": \"200px\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }, {\n        \"idsName\": \"IDS_QUOTATIONDATE\",\n        \"dataField\": \"dquotationdate\",\n        \"width\": \"200px\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_CHOOSE\",\n        \"controlType\": \"selectbox\"\n      }]; // mandatoryFields.forEach(item => item.mandatory === true && mandatoryFields.push(item));\n\n      return mandatoryFields;\n    } else if (screenName === \"IDS_QUOTATION\" && operation === \"retire\") {\n      mandatoryFields = [{\n        \"idsName\": \"IDS_RETIREDATE\",\n        \"dataField\": \"dretiredatetime\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_CHOOSE\",\n        \"controlType\": \"selectbox\"\n      }];\n      return mandatoryFields;\n    } else {\n      return [];\n    }\n  }\n\n  /*\r\n  dataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(\r\n        this.props.Login.masterData[\"selectedSection\"],\r\n        event.dataState\r\n      ),\r\n      sectionDataState: event.dataState,\r\n    });\r\n  };\r\n  */\n  handleFocus(e) {\n    e.target.select();\n  }\n\n  componentDidUpdate(previousProps) {\n    let {\n      selectedRecord,\n      userRoleControlRights,\n      controlMap,\n      filterData,\n      dataResult\n    } = this.state;\n\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n      selectedRecord = this.props.Login.selectedRecord;\n      this.setState({\n        selectedRecord\n      });\n    } //   if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n    //     userRoleControlRights = [];\n    //     if (this.props.Login.userRoleControlRights) {\n    //       this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode\n    //       ] &&\n    //         Object.values(\n    //           this.props.Login.userRoleControlRights[\n    //           this.props.Login.userInfo.nformcode\n    //           ]\n    //         ).map((item) => userRoleControlRights.push(item.ncontrolcode));\n    //     }\n    //     controlMap = getControlMap(\n    //       this.props.Login.userRoleControlRights,\n    //       this.props.Login.userInfo.nformcode\n    //     );\n    //     // this.setState({ controlMap, userRoleControlRights });\n    //     this.setState({\n    //       userRoleControlRights, controlMap, data: this.props.Login.masterData.QuotationTest,\n    //       dataResult: process(this.props.Login.masterData.QuotationTest, this.state.dataState)\n    //   });\n    //   }\n    //   else {\n    //     let {dataState}=this.state;\n    //         if(this.state.dataResult !== undefined){ \n    //             if(this.state.dataResult.data){\n    //                 if(this.state.dataResult.data.length ===1){\n    //                     let skipcount=this.state.dataState.skip>0?(this.state.dataState.skip-this.state.dataState.take):\n    //                     this.state.dataState.skip\n    //                     dataState={skip:skipcount,take:this.state.dataState.take}\n    //                 }\n    //               } \n    //               this.setState({\n    //                 dataResult: process( this.props.Login.masterData || [], dataState),\n    //                 dataState\n    //           });\n    //     }\n    // }\n\n\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\n      if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n        userRoleControlRights = [];\n\n        if (this.props.Login.userRoleControlRights) {\n          this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item => userRoleControlRights.push(item.ncontrolcode));\n        }\n\n        controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode); // this.setState({ controlMap, userRoleControlRights });\n\n        this.setState({\n          userRoleControlRights,\n          controlMap,\n          data: this.props.Login.masterData.QuotationTest,\n          dataResult: process(this.props.Login.masterData.QuotationTest || [], this.state.dataState) // QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.historydataState)\n          // QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\n\n        });\n      } else {\n        let {\n          dataState\n        } = this.state; // let {historydataState}=this.state;\n\n        if (this.state.dataResult !== undefined) {\n          if (this.state.dataResult.data) {\n            if (this.state.dataResult.data.length === 1) {\n              let skipcount = this.state.dataState.skip > 0 ? this.state.dataState.skip - this.state.dataState.take : this.state.dataState.skip;\n              dataState = {\n                skip: skipcount,\n                take: this.state.dataState.take\n              };\n            }\n          }\n\n          this.setState({\n            data: this.props.Login.masterData.QuotationTest,\n            dataResult: process(this.props.Login.masterData.QuotationTest || [], dataState),\n            dataState // QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\n\n          });\n        } //       if(this.state.QuotationHistorydataResult !== undefined){ \n        //         if(this.state.QuotationHistorydataResult.data){\n        //             if(this.state.QuotationHistorydataResult.data.length ===1){\n        //                 let skipcount=this.state.historydataState.skip>0?(this.state.historydataState.skip-this.state.historydataState.take):\n        //                 this.state.historydataState.skip\n        //                 historydataState={skip:skipcount,take:this.state.historydataState.take}\n        //             }\n        //           } \n        //           this.setState({\n        //             QuotationHistorydata: this.props.Login.masterData.QuotationHistory,\n        //             QuotationHistorydataResult: process( this.props.Login.masterData.QuotationHistory || [], historydataState),\n        //             historydataState \n        //             // QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\n        //       });\n        // }\n\n      } // dataResult = this.props.Login.masterData.QuotationTest;\n      // this.setState({\n      //   selectedRecord,dataResult\n      // });\n      // this.setState({ filterData });\n\n    }\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  callService,\n  crudMaster,\n  filterColumnData,\n  updateStore,\n  validateEsignCredential,\n  getQuotation,\n  getProjectTypeComboService,\n  viewAttachment,\n  addQuotation,\n  getreloadQuotation,\n  getQuotationAddTestService,\n  getQuotationPricingEditService,\n  modalSave,\n  handleRetireQuotation,\n  GrossQuotation,\n  getQuotationClientCategoryComboService,\n  getQuotaionClientComboService,\n  getProjectCodeComboService,\n  getQuotaionProductCategoryComboService,\n  getQuotaionClientSiteComboService,\n  generateControlBasedReport\n})(injectIntl(Quotation));","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/SOURCE-512/QuaLISWeb/src/pages/quotation/Quotation.jsx"],"names":["React","Component","Row","Col","Card","Nav","FormGroup","FormLabel","connect","toast","FontAwesomeIcon","faTrashAlt","faPencilAlt","faThumbsUp","faPlus","faEye","faUserTimes","faFileAlt","injectIntl","FormattedMessage","callService","crudMaster","validateEsignCredential","updateStore","getQuotation","filterColumnData","getProjectTypeComboService","viewAttachment","addQuotation","getreloadQuotation","getQuotationAddTestService","getQuotationPricingEditService","GrossQuotation","modalSave","handleRetireQuotation","getQuotationClientCategoryComboService","getQuotaionClientComboService","getProjectCodeComboService","getQuotaionProductCategoryComboService","getQuotaionClientSiteComboService","generateControlBasedReport","ListMaster","transactionStatus","AddQuotation","DEFAULT_RETURN","SlideOutModal","Esign","showEsign","getControlMap","formatInputDate","ReadOnlyText","ContentPanel","process","ConfirmMessage","intl","QuotationTab","AddQuotationPreview","RetireQuotation","ModalShow","ViewInfoDetails","mapStateToProps","state","Login","Quotation","constructor","props","sidebarExpandCollapse","setState","sidebarview","handleDateChange","dateName","dateValue","selectedRecord","onInputOnChange","event","optional","target","type","name","checked","value","onSaveClick","saveType","formRef","quotationData","inputParam","slideOutModal","userInfo","postParam","inputListName","selectedObject","primaryKeyField","operation","screenName","masterData","SelectedQuotation","nquotationcode","nsitecode","nmastersitecode","sprojecttitle","undefined","sclientsiteaddress","sinvoiceaddress","sdescription","ntransactionstatus","DRAFT","sdeviationremarks","soemname","NA","ACTIVE","QuotationformatInputDate","userinfo","ntimezonecode","onSaveQuotationTest","onSaveQuotationTestPrice","onSaveGrossQuotation","classUrl","methodUrl","inputData","searchRef","isClearSearch","userRoleControlRights","nformcode","ncontrolCode","updateInfo","typeName","data","loadEsign","screenData","quotationtestPriceData","nprojectmastercode","nclientcode","dataState","selectedId","QuotationTestPriceArray","forEach","item","index","ntotalamount","namount","ncost","nnoofsamples","nquotationtestcode","ntestcode","ntotalgrosstamount","stestsynonym","ndiscountbandcode","stestplatform","squotationleadtime","snotes","nmethodcode","nclientcatcode","nclientsitecode","nclientcontactcode","JSON","parse","stringify","priceList","map","push","hasOwnProperty","onNumericInputOnChange","primaryFieldKey","findIndex","test","validateEsign","sreason","password","DeleteQuotation","selectedQuotation","primaryKeyValue","fetchUrl","fecthInputObject","quotation","openModal","APPROVED","warn","formatMessage","id","RETIRED","QuotationPreview","modalScreenSize","onComboChange","comboData","fieldName","caseNo","parseInt","sdisplayname","label","primarykey","nproductcatcode","nproductcode","parseFloat","QuotationGrossAmount","ntotalgrossamount","VatAmount","DiscountAmount","toFixed","nvatbandcode","nprojecttypecode","srfwdate","suserrolename","susername","selectedRecordindex","str","discountamount","count","sdiscountbandname","noemcode","closeModalShow","modalShow","popUp","onNumericInputChange","YES","NO","onnetAmountEvent","approveQuotation","onSaveModalClick","console","log","retireId","controlMap","has","get","ncontrolcode","modalTitle","nquotationversioncode","onTabChange","tabProps","dataStateChange","dataResult","historydataStateChange","historydataState","ConfirmDelete","deleteId","confirmMessage","confirm","reloadData","current","DeleteQuotationTest","deleteParam","closeModal","openFilter","showFilter","closeFilter","skip","take","settings","error","Map","Instrument","createRef","searchFieldList","testArray","QuotationData","isChild","date","formattedDate","getFullYear","getMonth","slice","getDate","ndiscountamount","nvatamount","ntotalnetamount","TotalNetAmount","getDerivedStateFromProps","masterStatus","errorCode","render","versionStatusCSS","activeIconCSS","mandatoryFields","findMandatoryFields","addId","editId","approveId","addQuotationTestId","updateQuotationTestId","viewQuotationId","viewreportId","editTestPriceParam","filterParam","searchedData","parentFunction","sclientname","sversionstatus","indexOf","dataField","idsName","genericLabel","slanguagetypecode","openChildModal","showAccordian","getProjectmasterAddMemberService","MembersList","addProjectMasterFile","onDropProjectMasterFile","deleteAttachment","linkMaster","QuotationTestList","DiscountBand","VATBand","QuotationHistory","handleFocus","SelectedClient","ClientCategory","Client","ClientSite","ClientContact","OEM","ProjectCode","ProjectType","ProjectMaster","QuotationType","Product","ProductCategory","TimeZoneList","e","select","componentDidUpdate","previousProps","filterData","Object","values","QuotationTest","length","skipcount"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from \"react-bootstrap\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTrashAlt, faPencilAlt, faThumbsUp,faPlus,faEye,faUserTimes, faFileAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { ReactComponent as Quotationdiscount } from '../../assets/image/quotationdiscount.svg';\r\nimport { injectIntl,FormattedMessage } from \"react-intl\";\r\nimport {\r\n  callService, crudMaster, validateEsignCredential, updateStore, getQuotation, filterColumnData,getProjectTypeComboService,\r\n  viewAttachment, addQuotation, getreloadQuotation, getQuotationAddTestService, getQuotationPricingEditService, GrossQuotation,modalSave,handleRetireQuotation,\r\n  getQuotationClientCategoryComboService,getQuotaionClientComboService,getProjectCodeComboService ,\r\n  getQuotaionProductCategoryComboService,getQuotaionClientSiteComboService,generateControlBasedReport\r\n} from \"../../actions\";\r\n\r\nimport ListMaster from \"../../components/list-master/list-master.component\";\r\nimport { transactionStatus } from \"../../components/Enumeration\";\r\nimport AddQuotation from \"../../pages/quotation/AddQuotation\";\r\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\r\nimport SlideOutModal from \"../../components/slide-out-modal/SlideOutModal\";\r\n\r\nimport Esign from \"../audittrail/Esign\";\r\nimport { showEsign, getControlMap, formatInputDate }\r\n  from \"../../components/CommonScript\";\r\nimport { ReadOnlyText, ContentPanel } from \"../../components/App.styles\";\r\nimport { process } from \"@progress/kendo-data-query\";\r\nimport ConfirmMessage from \"../../components/confirm-alert/confirm-message.component\";\r\n// import ProjectMasterFilter from './ProjectMasterFilter';\r\nimport { intl } from \"../../components/App\";\r\n// import DataGrid from '../../components/data-grid/data-grid.component';\r\nimport QuotationTab from \"./QuotationTab\";\r\nimport AddQuotationPreview from \"../../pages/quotation/AddQuotationPreview\";\r\nimport RetireQuotation from \"../../pages/quotation/RetireQuotation\";\r\nimport ModalShow from \"../../components/ModalShow\";\r\nimport ViewInfoDetails from \"../../components/ViewInfoDetails\";\r\nimport {ReactComponent as RetireaQuotation} from '../../assets/image/RetireaQuotation.svg';\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { Login: state.Login };\r\n};\r\n\r\nclass Quotation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const dataState = {\r\n      skip: 0,\r\n      take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n  };\r\n\r\n\r\n  \r\n  this.state = {\r\n      selectedRecord: {},\r\n      error: \"\",\r\n      userRoleControlRights: [],\r\n      selectedQuotation: undefined,\r\n      controlMap: new Map(),\r\n      Instrument: [],\r\n      dataState: dataState,\r\n      dataResult: [], data: [],\r\n      sidebarview: false\r\n\r\n    };\r\n    this.searchRef = React.createRef();\r\n    this.searchFieldList = [\"squotationno\",\"sclientcatname\", \"sclientname\", \"sclientsiteaddress\", \"soemname\",\"sproductcatname\",\"sproductname\",\"squotationdate\",\"sdescription\",\"sdeviationremarks\",\"sversionstatus\",\"sretireremarks\"]\r\n    this.confirmMessage = new ConfirmMessage();\r\n\r\n  }\r\n  sidebarExpandCollapse = () => {\r\n      this.setState({\r\n          sidebarview: true\r\n      })          \r\n  }\r\n\r\n  handleDateChange = (dateName, dateValue) => {\r\n    const { selectedRecord } = this.state;\r\n    selectedRecord[dateName] = dateValue;\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n  onInputOnChange = (event, optional) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    if (event.target.type === \"checkbox\") {\r\n      selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n    } else if (event.target.type === 'radio') {\r\n      selectedRecord[event.target.name] = optional;\r\n    } else {\r\n      selectedRecord[event.target.name] = event.target.value;\r\n    }\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n  onSaveClick = (saveType, formRef) => {\r\n\r\n    let quotationData = [];\r\n    let inputParam = {};\r\n    let slideOutModal;\r\n    quotationData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n    let postParam = {\r\n      inputListName: \"Quotation\",\r\n      selectedObject: \"SelectedQuotation\",\r\n      primaryKeyField: \"nquotationcode\",\r\n    };\r\n\r\n    if ((this.props.Login.operation === \"update\") && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      postParam[\"primaryKeyValue\"] =\r\n        this.props.Login.masterData.SelectedQuotation.nquotationcode;\r\n\r\n      quotationData[\"quotation\"] = {\r\n        nquotationcode: this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n        nsitecode: this.props.Login.userInfo.nmastersitecode,\r\n        sprojecttitle: this.state.selectedRecord.sprojecttitle === undefined ? \"\" : this.state.selectedRecord.sprojecttitle, \r\n        sclientsiteaddress: this.state.selectedRecord.sclientsiteaddress === undefined ? \"\" : this.state.selectedRecord.sclientsiteaddress, \r\n        sinvoiceaddress: this.state.selectedRecord.sinvoiceaddress === undefined ? \"\" : this.state.selectedRecord.sinvoiceaddress, \r\n        sdescription: this.state.selectedRecord.sdescription === undefined ? \"\" : this.state.selectedRecord.sdescription, \r\n        ntransactionstatus: transactionStatus.DRAFT,\r\n        sdeviationremarks: this.state.selectedRecord.sdeviationremarks === undefined ? \"\" : this.state.selectedRecord.sdeviationremarks,\r\n        soemname: this.state.selectedRecord.soemname === undefined ? \"\" : this.state.selectedRecord.soemname,\r\n        // squotationleadtime: this.state.selectedRecord.squotationleadtime === undefined ? \"\" : this.state.selectedRecord.squotationleadtime\r\n\r\n      };\r\n\r\n    } else if ((this.props.Login.operation === \"create\") && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      quotationData[\"quotation\"] = {  \r\n\r\n        nsitecode: this.props.Login.userInfo.nmastersitecode,\r\n        sprojecttitle: this.state.selectedRecord.sprojecttitle === undefined ? \"\" : this.state.selectedRecord.sprojecttitle, \r\n        sclientsiteaddress: this.state.selectedRecord.sclientsiteaddress === undefined ? \"\" : this.state.selectedRecord.sclientsiteaddress, \r\n        sinvoiceaddress: this.state.selectedRecord.sinvoiceaddress === undefined ? \"\" : this.state.selectedRecord.sinvoiceaddress, \r\n        sdescription: this.state.selectedRecord.sdescription === undefined ? \"\" : this.state.selectedRecord.sdescription, \r\n        ntransactionstatus: transactionStatus.DRAFT,\r\n        sdeviationremarks: this.state.selectedRecord.sdeviationremarks === undefined ? \"\" : this.state.selectedRecord.sdeviationremarks,\r\n        soemname: this.state.selectedRecord.soemname === undefined ? \"\" : this.state.selectedRecord.soemname,\r\n        // squotationleadtime: this.state.selectedRecord.squotationleadtime === undefined ? \"\" : this.state.selectedRecord.squotationleadtime\r\n\r\n      };\r\n\r\n     \r\n    }\r\n\r\n    if (((this.props.Login.operation === \"create\") || (this.props.Login.operation === \"update\")) && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      quotationData[\"quotation\"][\"nclientcatcode\"] = this.state.selectedRecord[\"nclientcatcode\"] ? this.state.selectedRecord[\"nclientcatcode\"].value\r\n        : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nclientcode\"] = this.state.selectedRecord[\"nclientcode\"]!==\"\" ? this.state.selectedRecord[\"nclientcode\"].value\r\n        : transactionStatus.NA;\r\n\r\n        quotationData[\"quotation\"][\"nclientsitecode\"] = this.state.selectedRecord[\"nclientsitecode\"]!==\"\" ? this.state.selectedRecord[\"nclientsitecode\"].value\r\n        : transactionStatus.NA;\r\n\r\n        quotationData[\"quotation\"][\"nclientcontactcode\"] = this.state.selectedRecord[\"nclientcontactcode\"]!==\"\" ? this.state.selectedRecord[\"nclientcontactcode\"].value\r\n        : transactionStatus.NA;\r\n\r\n        quotationData[\"quotation\"][\"noemcode\"] = this.state.selectedRecord[\"noemcode\"]!== undefined ? this.state.selectedRecord[\"noemcode\"].value\r\n        : transactionStatus.NA;\r\n\r\n    // quotationData[\"quotation\"][\"nquotationtypecode\"] = this.state.selectedRecord[\"nquotationtypecode\"]!==\"\" ? this.state.selectedRecord[\"nquotationtypecode\"].value\r\n    //   : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nquotationtypecode\"] = transactionStatus.ACTIVE;\r\n      quotationData[\"quotation\"][\"nprojecttypecode\"] = this.state.selectedRecord[\"nprojecttypecode\"] ? this.state.selectedRecord[\"nprojecttypecode\"].value\r\n        : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nprojectmastercode\"] = this.state.selectedRecord[\"nprojectmastercode\"]  ? this.state.selectedRecord[\"nprojectmastercode\"].value\r\n        : transactionStatus.NA;\r\n\r\n\r\n /*     quotationData[\"quotation\"][\"nuserrolecode\"] = this.state.selectedRecord[\"nuserrolecode\"]!==\"\" ? this.state.selectedRecord[\"nuserrolecode\"]\r\n         : transactionStatus.NA; */\r\n        \r\n      // quotationData[\"quotation\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"]\r\n      //   : transactionStatus.NA;\r\n\r\n\r\n // quotationData[\"quotation\"][\"drfwdate\"] = formatInputDate(this.state.selectedRecord[\"srfwdate\"], false);\r\n      quotationData[\"quotation\"][\"dquotationdate\"] = this.QuotationformatInputDate(this.state.selectedRecord[\"dquotationdate\"]);\r\n //     quotationData[\"quotation\"][\"dquotationdate\"] = rearrangeDateFormat(quotationData.userinfo,this.state.selectedRecord[\"dquotationdate\"]);\r\n      quotationData[\"quotation\"][\"ntzrfwdate\"] =  quotationData.userinfo.ntimezonecode ? quotationData.userinfo.ntimezonecode : \"-1\";\r\n      quotationData[\"quotation\"][\"ntzquotationdate\"] =  quotationData.userinfo.ntimezonecode ? quotationData.userinfo.ntimezonecode : \"-1\";\r\n\r\n      quotationData[\"quotation\"][\"nproductcatcode\"] = this.state.selectedRecord[\"nproductcatcode\"]!==\"\" ? this.state.selectedRecord[\"nproductcatcode\"].value\r\n      : transactionStatus.NA;\r\n\r\n      quotationData[\"quotation\"][\"nproductcode\"] = this.state.selectedRecord[\"nproductcode\"]!==\"\" ? this.state.selectedRecord[\"nproductcode\"].value\r\n      : transactionStatus.NA;\r\n      \r\n    }\r\n\r\nif ((this.props.Login.operation  === \"create\") && (this.props.Login.screenName === \"IDS_TEST\")) {\r\n          \r\n      inputParam = this.onSaveQuotationTest(saveType, formRef);\r\n  }\r\n\r\nif ((this.props.Login.operation  === \"update\") && ((this.props.Login.screenName === \"IDS_PRICE\") || (this.props.Login.screenName === \"IDS_CALCULATEPRICING\")) ) {\r\n      \r\n    inputParam = this.onSaveQuotationTestPrice(saveType, formRef);\r\n}\r\n\r\nif ((this.props.Login.operation  === \"create\") && (this.props.Login.screenName === \"IDS_CALCULATEPRICING\")) {\r\n          \r\n  inputParam = this.onSaveGrossQuotation(saveType, formRef);\r\n}\r\n\r\n    \r\n    if (((this.props.Login.operation === \"create\") || (this.props.Login.operation === \"update\")) && (this.props.Login.screenName === \"IDS_QUOTATION\")) {\r\n\r\n      inputParam = {\r\n        classUrl: \"quotation\",\r\n        methodUrl: \"Quotation\",\r\n        inputData: quotationData,\r\n        operation: this.props.Login.operation,\r\n        saveType,\r\n        formRef,\r\n        postParam,\r\n        searchRef: this.searchRef,\r\n        isClearSearch: this.props.Login.isClearSearch,\r\n        selectedRecord:{...this.state.selectedRecord}\r\n      };\r\n    } \r\n    \r\n   \r\n\r\n  slideOutModal= ((this.props.Login.screenName === \"IDS_TEST\") || (this.props.Login.screenName === \"IDS_PRICE\") \r\n  || (this.props.Login.screenName === \"IDS_CALCULATEPRICING\")) ? \"openChildModal\" : \"openModal\";\r\n\r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          saveType,\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, slideOutModal);\r\n    }\r\n\r\n  };\r\n\r\n  onSaveQuotationTest(saveType, formRef) {\r\n    let inputData = [];\r\n    inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n    const masterData = this.props.Login.masterData;\r\n    // inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\r\n  //  inputData[\"Quotation\"] = {};\r\n\r\n\r\n    let testArray = []\r\n    testArray = this.state.selectedRecord.ntestcode.map(item => {\r\n        let QuotationData = {}\r\n\r\n        QuotationData[\"ntestcode\"] = item.value\r\n        QuotationData[\"nquotationcode\"] = this.props.Login.masterData.SelectedQuotation.nquotationcode;\r\n        QuotationData[\"nclientcode\"] = this.props.Login.masterData.SelectedQuotation.nclientcode;\r\n        QuotationData[\"nprojectmastercode\"] = this.props.Login.masterData.SelectedQuotation.nprojectmastercode;\r\n\r\n\r\n        return QuotationData;\r\n    });\r\n    inputData['QuotationTest'] = testArray;\r\n    \r\n    const inputParam = {\r\n        classUrl: \"quotation\",\r\n        methodUrl: \"QuotationTest\",\r\n        inputData: inputData,masterData,\r\n        operation: this.props.Login.operation, saveType, formRef,\r\n        searchRef: this.searchRef,\r\n        isClearSearch: this.props.Login.isClearSearch,\r\n        isChild: true\r\n\r\n\r\n    }\r\n    return inputParam;\r\n}\r\n\r\n\r\nQuotationformatInputDate(date) {\r\n\r\n  let formattedDate = \"\";\r\n\r\n  formattedDate = date.getFullYear() + \"-\" +\r\n      (\"00\" + (date.getMonth() + 1)).slice(-2) + \"-\" +\r\n      (\"00\" + date.getDate()).slice(-2) +\r\n      (\"T00:00:00Z\");\r\n\r\n  return formattedDate;\r\n}\r\n\r\nonSaveQuotationTestPrice = (saveType, formRef) => {\r\n\r\n  const quotationtestPriceData = {\"userinfo\": this.props.Login.userInfo,\r\n                           \"QuotationTest\":this.props.Login.masterData.SelectedQuotation,\r\n                           \"nquotationcode\":this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n                           \"nprojectmastercode\":this.props.Login.masterData.SelectedQuotation.nprojectmastercode,\r\n                          //  \"nclientcatcode\":this.props.Login.masterData.SelectedQuotation.nclientcatcode,\r\n                           \"nclientcode\":this.props.Login.masterData.SelectedQuotation.nclientcode,\r\n                          //  \"nclientsitecode\":this.props.Login.masterData.SelectedQuotation.nclientsitecode,\r\n                          //  \"nclientcontactcode\":this.props.Login.masterData.SelectedQuotation.nclientcontactcode\r\n                       //    \"ncost\":this.props.Login.selectedRecord[0].ncost\r\n                          };\r\n\r\n   let postParam = undefined;\r\n   let dataState = undefined;\r\n   let selectedId = null;\r\n   \r\n   if (this.props.Login.operation === \"update\") {\r\n       // edit\r\n       dataState = this.state.dataState;\r\n       selectedId = this.props.Login.selectedId; \r\n       postParam = { inputListName: \"Quotation\", selectedObject: \"SelectedQuotation\", primaryKeyField: \"nquotationcode\" };\r\n\r\n      //  let selectedRecord1=[this.props.Login.selectedRecord];\r\n        let QuotationTestPriceArray=[];\r\n      \r\n       (this.props.Login.selectedRecord).forEach((item,index) => {\r\n               if(item.ntotalamount<0){\r\n                QuotationTestPriceArray[index]={...this.props.Login.selectedRecord[index],ntotalamount:0}\r\n               } \r\n\r\n               QuotationTestPriceArray[index] = {\r\n                 \r\n                 namount: this.props.Login.selectedRecord[index].namount,\r\n                 nclientcode: this.props.Login.masterData.SelectedQuotation.nclientcode,\r\n                 ncost: this.props.Login.selectedRecord[index].ncost,\r\n                 nnoofsamples: this.props.Login.selectedRecord[index].nnoofsamples,\r\n                 nprojectmastercode: this.props.Login.selectedRecord[index].nprojectmastercode,\r\n                 nquotationcode: this.props.Login.selectedRecord[index].nquotationcode,\r\n                 nquotationtestcode: this.props.Login.selectedRecord[index].nquotationtestcode,\r\n                 ntestcode: this.props.Login.selectedRecord[index].ntestcode, \r\n                 ntotalamount: this.props.Login.selectedRecord[index].ntotalamount,\r\n                 ntotalgrosstamount: this.props.Login.selectedRecord[index].ntotalgrosstamount,\r\n                //  stestdescription: this.props.Login.selectedRecord[index].stestdescription,\r\n                 stestsynonym: this.props.Login.selectedRecord[index].stestsynonym,\r\n                 ndiscountbandcode: this.props.Login.selectedRecord[index].ndiscountbandcode.value,\r\n                 stestplatform: this.props.Login.selectedRecord[index].stestplatform, \r\n                 squotationleadtime: this.props.Login.selectedRecord[index].squotationleadtime, \r\n                 snotes: this.props.Login.selectedRecord[index].snotes ,\r\n                 nmethodcode: this.props.Login.selectedRecord[index].nmethodcode,\r\n                 nclientcatcode: this.props.Login.masterData.SelectedQuotation.nclientcatcode,\r\n                 nclientsitecode: this.props.Login.masterData.SelectedQuotation.nclientsitecode,\r\n                 nclientcontactcode: this.props.Login.masterData.SelectedQuotation.nclientcontactcode\r\n\r\n                };\r\n         \r\n     });\r\n     \r\n       quotationtestPriceData[\"QuotationTest\"] = JSON.parse(JSON.stringify(QuotationTestPriceArray));           \r\n   }\r\n   else {\r\n       //add               \r\n                                          \r\n       let priceList = [];\r\n       this.state.selectedRecord[\"ntestcode\"] &&\r\n           this.state.selectedRecord[\"ntestcode\"].map(item => {\r\n               return priceList.push({\r\n                  ntestcode: item.value                      \r\n               })\r\n           })\r\n      \r\n       quotationtestPriceData[\"QuotationTest\"] = priceList;                             \r\n\r\n   }\r\n   if (quotationtestPriceData[\"QuotationTest\"].hasOwnProperty('esignpassword')) {\r\n       if (quotationtestPriceData[\"QuotationTest\"]['esignpassword'] === '') {\r\n           delete quotationtestPriceData[\"QuotationTest\"]['esigncomments']\r\n           delete quotationtestPriceData[\"QuotationTest\"]['esignpassword']\r\n           delete quotationtestPriceData[\"QuotationTest\"][\"agree\"]\r\n       }\r\n   }\r\n  //console.log(\"update data:\", quotationtestPriceData);\r\n   const inputParam = {\r\n       classUrl: this.props.Login.inputParam.classUrl,\r\n       methodUrl: \"QuotationTest\",\r\n       inputData: quotationtestPriceData,\r\n       operation: this.props.Login.operation,\r\n       saveType, formRef, postParam, searchRef: this.searchRef,\r\n       isClearSearch: this.props.Login.isClearSearch,\r\n       selectedId, dataState\r\n   }\r\n   \r\n   return inputParam;\r\n}\r\n\r\n\r\nonSaveGrossQuotation(saveType, formRef) {\r\n\r\n  let quotationData = {};\r\n  quotationData[\"userinfo\"] = this.props.Login.userInfo;\r\n \r\n\r\n\r\n  quotationData[\"GrossQuotation\"] = {  \r\n\r\n    nquotationcode: this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n    nsitecode: this.props.Login.userInfo.nmastersitecode,\r\n    ndiscountamount:this.state.selectedRecord.DiscountAmount,\r\n    nvatamount:this.state.selectedRecord.VatAmount,\r\n    ntotalnetamount:this.state.selectedRecord.TotalNetAmount,\r\n    ntotalgrossamount : this.props.Login.QuotationGrossAmount[0].ntotalgrossamount,\r\n    nclientcatcode:this.props.Login.masterData.SelectedQuotation.nclientcatcode,\r\n    nclientcode:this.props.Login.masterData.SelectedQuotation.nclientcode,\r\n    nclientsitecode:this.props.Login.masterData.SelectedQuotation.nclientsitecode,\r\n    nclientcontactcode:this.props.Login.masterData.SelectedQuotation.nclientcontactcode,\r\n    nprojectmastercode : this.props.Login.masterData.SelectedQuotation.nprojectmastercode\r\n    \r\n  };\r\n\r\n  quotationData[\"GrossQuotation\"][\"ndiscountbandcode\"] = this.state.selectedRecord[\"ndiscountbandcode\"] ? this.state.selectedRecord[\"ndiscountbandcode\"].value\r\n  : transactionStatus.NA;\r\n\r\n  quotationData[\"GrossQuotation\"][\"nvatbandcode\"] = this.state.selectedRecord[\"nvatbandcode\"] ? this.state.selectedRecord[\"nvatbandcode\"].value\r\n  : transactionStatus.NA;\r\n\r\n  // const postParam = {\r\n  //   inputListName: \"Quotation\",\r\n  //   selectedObject: \"SelectedQuotation\",\r\n  //   primaryKeyField: \"nquotationcode\",\r\n  //   primaryKeyValue: this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n  //   fetchUrl: \"quotation/getQuotation\",\r\n  //   fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n  // };\r\n\r\n  const inputParam = {\r\n    classUrl: \"quotation\",\r\n    methodUrl: \"GrossQuotation\",// postParam,\r\n    inputData: quotationData,\r\n    searchRef: this.searchRef,\r\n    operation: this.props.Login.operation, saveType, formRef,\r\n    isClearSearch: this.props.Login.isClearSearch,\r\n    isChild: true\r\n  }\r\n \r\n  return inputParam;\r\n}\r\n\r\n \r\n  onNumericInputOnChange = (event, primaryFieldKey) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n\r\n     \r\n        if(primaryFieldKey && ( event.target.name === \"nnoofsamples\" )){\r\n            const index = selectedRecord.findIndex(item=>item.nquotationtestcode === primaryFieldKey);\r\n            if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){\r\n                selectedRecord[index][\"nnoofsamples\"] = event.target.value;\r\n            }\r\n        }\r\n        else{      \r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }           \r\n    \r\n    this.setState({ selectedRecord });\r\n}\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.Login.masterStatus !== \"\") {\r\n      if (props.Login.errorCode === 417 || props.Login.errorCode === 409) {\r\n        toast.warn(props.Login.masterStatus);\r\n        props.Login.masterStatus = \"\";\r\n      }\r\n    }\r\n    if (props.Login.error !== state.error) {\r\n      toast.error(props.Login.error);\r\n      props.Login.error = \"\";\r\n    }\r\n    if (props.Login.selectedRecord === undefined) {\r\n      return { selectedRecord: {} };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  validateEsign = () => {\r\n    const inputParam = {\r\n      inputData: {\r\n        userinfo: {\r\n          ...this.props.Login.userInfo,\r\n          sreason: this.state.selectedRecord[\"esigncomments\"],\r\n        },\r\n        password: this.state.selectedRecord[\"esignpassword\"],\r\n      },\r\n      screenData: this.props.Login.screenData,\r\n    };\r\n    this.props.validateEsignCredential(inputParam, \"openModal\");\r\n\r\n  };\r\n\r\n\r\n\r\n  DeleteQuotation = (methodUrl, selectedQuotation, operation, ncontrolCode) => {\r\n    if (selectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\r\n    const postParam = {\r\n      inputListName: \"QuotationList\",\r\n      selectedObject: \"SelectedQuotation\",\r\n      primaryKeyField: \"nquotationcode\",\r\n      primaryKeyValue: selectedQuotation.nquotationcode,\r\n      fetchUrl: \"quotation/getQuotation\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n    };\r\n\r\n    const inputParam = {\r\n      classUrl: this.props.Login.inputParam.classUrl,\r\n      methodUrl,\r\n      postParam,\r\n      inputData: {\r\n        userinfo: this.props.Login.userInfo,\r\n        quotation: selectedQuotation,\r\n      },\r\n      operation,\r\n      isClearSearch: this.props.Login.isClearSearch,\r\n      selectedRecord:{...this.state.selectedRecord}\r\n    };\r\n\r\n    const masterData = this.props.Login.masterData;\r\n\r\n    if (\r\n      showEsign(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode,\r\n        ncontrolCode\r\n      )\r\n    ) {\r\n      const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {\r\n          loadEsign: true,\r\n          screenData: { inputParam, masterData },\r\n          openModal: true,\r\n          screenName: \"IDS_QUOTATION\",\r\n          operation,\r\n        },\r\n      };\r\n      this.props.updateStore(updateInfo);\r\n    } else {\r\n      this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n    }\r\n  }\r\n  else if(selectedQuotation.ntransactionstatus === transactionStatus.APPROVED){\r\n\r\n    toast.warn(this.props.intl.formatMessage({ id: \"IDS_CANNOTDELETEAPPROVEDQUOTATION\" }));\r\n\r\n  }else if(selectedQuotation.ntransactionstatus === transactionStatus.RETIRED){\r\n\r\n    toast.warn(this.props.intl.formatMessage({ id: \"IDS_CANNOTDELETERETIREDQUOTATION\" }));\r\n\r\n  }\r\n  };\r\n\r\n  \r\n\r\n  render() {\r\n\r\n\r\n    let versionStatusCSS = \"outline-secondary\";\r\n    let activeIconCSS = \"fa fa-check\"\r\n\r\n\r\n    if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.APPROVED) {\r\n      versionStatusCSS = \"outline-success\";\r\n    }\r\n    else if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.RETIRED) {\r\n      versionStatusCSS = \"outline-danger\";\r\n      activeIconCSS = \"\";\r\n    }\r\n    else if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\r\n      activeIconCSS = \"\";\r\n\r\n    }\r\n    \r\n    \r\n\r\n    if (this.props.Login.openModal || this.props.Login.modalShow) {\r\n      this.mandatoryFields = this.findMandatoryFields(this.props.Login.screenName, this.state.selectedRecord, this.props.Login.operation)\r\n    }\r\n\r\n\r\n    const { userInfo } = this.props.Login;\r\n    const addId = this.state.controlMap.has(\"AddQuotation\") && this.state.controlMap.get(\"AddQuotation\").ncontrolcode;\r\n    const editId = this.state.controlMap.has(\"EditQuotation\") && this.state.controlMap.get(\"EditQuotation\").ncontrolcode;\r\n    const deleteId = this.state.controlMap.has(\"DeleteQuotation\") && this.state.controlMap.get(\"DeleteQuotation\").ncontrolcode;\r\n    const approveId = this.state.controlMap.has(\"ApproveQuotation\") && this.state.controlMap.get(\"ApproveQuotation\").ncontrolcode;\r\n    const retireId = this.state.controlMap.has(\"RetireQuotation\") && this.state.controlMap.get(\"RetireQuotation\").ncontrolcode;\r\n    const addQuotationTestId = this.state.controlMap.has(\"AddQuotationTest\") && this.state.controlMap.get(\"AddQuotationTest\").ncontrolcode;\r\n    const updateQuotationTestId = this.state.controlMap.has(\"EditQuotationTest\") && this.state.controlMap.get(\"EditQuotationTest\").ncontrolcode;\r\n    // const grossQuotationeId = this.state.controlMap.has(\"CalculatePricing\") && this.state.controlMap.get(\"CalculatePricing\").ncontrolcode;\r\n    const viewQuotationId = this.state.controlMap.has(\"ViewQuotation\") && this.state.controlMap.get(\"ViewQuotation\").ncontrolcode;\r\n    const viewreportId = this.state.controlMap.has(\"ViewReport\") && this.state.controlMap.get(\"ViewReport\").ncontrolcode;\r\n\r\n    const editTestPriceParam = {screenName:\"IDS_PRICE\", \"operation\":\"update\", \r\n    masterData:this.props.Login.masterData, userInfo: this.props.Login.userInfo, \r\n    ncontrolCode:updateQuotationTestId};\r\n\r\n  const selectedQuotation = this.props.Login.masterData.SelectedQuotation;\r\n\r\n    const filterParam = {\r\n      inputListName: \"Quotation\",\r\n      selectedObject: \"SelectedQuotation\",\r\n      primaryKeyField: \"nquotationcode\",\r\n      fetchUrl: \"quotation/getActiveQuotationById\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n      masterData: this.props.Login.masterData,\r\n      searchFieldList: this.searchFieldList,\r\n    };\r\n    \r\n    return (\r\n      <>\r\n        <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n          \r\n          <Row noGutters={true}>\r\n            <Col md={`${!this.props.sidebarview ? '4' : \"2\"}`}>                \r\n              <ListMaster\r\n                screenName={this.props.intl.formatMessage({ id: \"IDS_QUOTATION\" })}\r\n                masterData={this.props.Login.masterData}\r\n                userInfo={this.props.Login.userInfo}\r\n                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.Quotation}\r\n                getMasterDetail={(quotationData) => this.props.getQuotation(quotationData, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                selectedMaster={selectedQuotation}\r\n                primaryKeyField=\"nquotationcode\"\r\n                mainField=\"squotationno\"\r\n                firstField=\"sclientname\"\r\n                secondField=\"sversionstatus\"\r\n                filterColumnData={this.props.filterColumnData}\r\n                filterParam={filterParam}\r\n                userRoleControlRights={this.state.userRoleControlRights}\r\n                addId={addId}\r\n                searchRef={this.searchRef}\r\n                reloadData={this.reloadData}\r\n                //     openModal={() => this.props.addQuotation(\"create\", selectedQuotation, userInfo, addId, this.state.ProjectMasterList)}\r\n                openModal={() => this.props.addQuotation(\"create\", userInfo, addId, selectedQuotation)}\r\n                isMultiSelecct={false}\r\n                hidePaging={false}\r\n                isClearSearch={this.props.Login.isClearSearch}\r\n                openFilter={this.openFilter}\r\n                closeFilter={this.closeFilter}\r\n                // onFilterSubmit={this.onFilterSubmit}    \r\n                showFilterIcon={false}\r\n                showFilter={this.props.Login.showFilter}\r\n       /*         filterComponent={[\r\n                  {\r\n                    \"IDS_PROJECTMASTERFILTER\":\r\n                      <ProjectMasterFilter\r\n                        filterProjectType={this.state.ProjectMasterList || []}\r\n                        nfilterProjectType={this.props.Login.masterData.SelectedProjectType || {}}\r\n                        onComboChange={this.onComboChange}\r\n                        selectedRecord={this.state.selectedRecordfilter || {}}\r\n                      />\r\n                  }\r\n                ]} */\r\n\r\n              />\r\n            </Col>\r\n            <Col md={`${!this.props.sidebarview ? '8' : \"10\"}`} className=\"position-relative\">\r\n              <div className=\"sidebar-view-btn-block\">\r\n                <div className=\"sidebar-view-btn \" onClick={this.props.parentFunction}>\r\n                    {!this.props.sidebarview ?                    \r\n                        <i class=\"fa fa-less-than\"></i> :\r\n                        <i class=\"fa fa-greater-than\"></i> \r\n                    }\r\n                </div>\r\n              </div>             \r\n              {selectedQuotation ?\r\n                <ContentPanel className=\"panel-main-content\">\r\n                  <Card className=\"border-0\">\r\n                    <Card.Header>\r\n                      {/* <ReactTooltip place=\"bottom\" globalEventOff='click' /> */}\r\n                      <Card.Title className=\"product-title-main\">\r\n                        {selectedQuotation.sclientname}\r\n                      </Card.Title>\r\n                      <Card.Subtitle>\r\n                        <div className=\"d-flex product-category\">\r\n                          <h2 className=\"product-title-sub flex-grow-1\">\r\n\r\n                            <span className={`btn btn-outlined ${versionStatusCSS} btn-sm mr-3`}>\r\n                              {/* <i class={activeIconCSS}></i> */}\r\n                              {selectedQuotation.sversionstatus}\r\n\r\n                            </span>\r\n                          </h2>\r\n                          {/* </Col>\r\n                             <Col md=\"4\"> */}\r\n                          {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n                          <div className=\"d-inline\">\r\n                            {/* Don't delete these commented lines because additional info feature is needed for Agaram LIMS */}\r\n                            {/* Start Here */}\r\n                            {/* <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" href=\"\" >  \r\n                                                            <FontAwesomeIcon icon={faEye} className=\"ActionIconColor\" onClick={(e)=>this.viewAdditionalInfo(e)} />\r\n                                                        </Nav.Link> */}\r\n                            {/* End Here */}\r\n                           \r\n                          \r\n                            <ViewInfoDetails \r\n                                selectedObject ={this.props.Login.masterData.SelectedQuotation}\r\n                                screenHiddenDetails={this.state.userRoleControlRights.indexOf(editId) === -1}   \r\n                                screenName={this.props.Login.screenName}\r\n                                dataTip={this.props.intl.formatMessage({ id: \"IDS_VIEW\" })}\r\n                                rowList={[\r\n                                  [\r\n                                    {dataField:\"sclientcatname\", idsName:\"IDS_CLIENTCATEGORY\"},                                    \r\n                                    {dataField:\"soemnameview\", idsName:\"IDS_OEM\"}                      \r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"sclientname\", idsName:\"IDS_CLIENT\"},\r\n                                    {dataField: \"sproductcatname\", idsName: (this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\")},                  \r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"scontactname\", idsName:\"IDS_CONTACTPERSON\"},\r\n                                    {dataField: \"sproductname\", idsName: (this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\")},            \r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"sphoneno\", idsName:\"IDS_CONTACTNUMBER\"},\r\n                                    {dataField:\"squotationdate\", idsName:\"IDS_QUOTATIONDATE\"}                \r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"semail\", idsName:\"IDS_EMAILID\"}                        \r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"sdescription\", idsName:\"IDS_DESCRIPTION\"}\r\n                                  ],\r\n                                  [\r\n                                    {dataField:\"sdeviationremarks\", idsName:\"IDS_REMARKS\"}\r\n                                  ]\r\n                                ]}\r\n                            />\r\n                        \r\n                            {/* <Nav.Link className=\"btn btn-circle outline-grey mr-2\" name=\"edittestname\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(viewQuotationId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_VIEW\" })}                              \r\n                              onClick={() => this.QuotationPreview()}>\r\n                              <FontAwesomeIcon icon={faEye} />\r\n                            </Nav.Link> */}\r\n\r\n                            <Nav.Link className=\"btn btn-circle outline-grey mr-2\" name=\"edittestname\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_EDIT\" })}\r\n                              //data-for=\"tooltip_list_wrap\"\r\n                              onClick={() => this.props.addQuotation(\"update\",userInfo, editId, selectedQuotation )}>\r\n                              <FontAwesomeIcon icon={faPencilAlt} />\r\n                            </Nav.Link>\r\n                            \r\n                            <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" name=\"deletetestname\"\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                              //   data-for=\"tooltip_list_wrap\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                              onClick={() => this.ConfirmDelete(selectedQuotation, \"delete\", deleteId, \"Quotation\")}>\r\n                              <FontAwesomeIcon icon={faTrashAlt} />\r\n                            </Nav.Link>\r\n                           \r\n\r\n                            <Nav.Link name=\"approveQuotation\" className=\"btn btn-circle outline-grey mr-2\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_APPROVE\" })}\r\n                              //data-for=\"tooltip_list_wrap\"\r\n                              onClick={() => this.approveQuotation(\"Quotation\", selectedQuotation, \"approve\", approveId)}>\r\n                              <FontAwesomeIcon icon={faThumbsUp} />\r\n                            </Nav.Link>\r\n\r\n                            <Nav.Link name=\"retireQuotation\" className=\"btn btn-circle outline-grey mr-2\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(retireId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_RETIRE\" })}\r\n                              //data-for=\"tooltip_list_wrap\"\r\n                              onClick={() => this.props.handleRetireQuotation(\"retire\", userInfo, retireId, selectedQuotation)}\r\n                              // onClick={() => this.retireQuotation(selectedQuotation, retireId)}\r\n                            >\r\n                              <RetireaQuotation/>\r\n                              {/* <FontAwesomeIcon icon={faUserTimes} /> */}\r\n                            </Nav.Link>\r\n\r\n                            <Nav.Link name=\"reportQuotation\" className=\"btn btn-circle outline-grey mr-2\"\r\n                              hidden={this.state.userRoleControlRights.indexOf(viewreportId) === -1}\r\n                              data-tip={this.props.intl.formatMessage({ id: \"IDS_VIEWREPORT\" })}\r\n                              //data-for=\"tooltip_list_wrap\"\r\n                              onClick={() =>this.props.generateControlBasedReport(viewreportId,selectedQuotation,this.props.Login,\"Quotation\",selectedQuotation.nquotationcode)}\r\n                            > \r\n                            <FontAwesomeIcon icon={faFileAlt} /> \r\n                             </Nav.Link>\r\n\r\n                          </div>\r\n                          {/* </Tooltip> */}\r\n                        </div>\r\n                        {/* </Col>\r\n                                            </Row> */}\r\n                      </Card.Subtitle>\r\n                    </Card.Header>\r\n                    <Card.Body className=\"form-static-wrap\">\r\n                      \r\n                      {/* <Col md={12}>\r\n                        <div className=\"horizontal-line\"></div>\r\n                      </Col> */}\r\n                     \r\n                         \r\n                      <Card className=\"at-tabs border-0\">\r\n                              {/* <Row noGutters>  --\r\n                                  <Col md={12}>\r\n                                      <div className=\"d-flex justify-content-end\">\r\n                                      <Nav.Link name=\"addPrice\" className=\"add-txt-btn\" \r\n                                              hidden={this.state.userRoleControlRights.indexOf(addQuotationTestId) === -1}\r\n                                              onClick={()=>this.props.getQuotationAddTestService(\"IDS_TEST\", \"create\", this.props.Login.masterData, this.props.Login.userInfo, addQuotationTestId)}\r\n                                              >\r\n                                            <FontAwesomeIcon icon={faPlus} /> { } \r\n                                          <FormattedMessage id='IDS_TEST' defaultMessage='Test' />\r\n                                      </Nav.Link>\r\n                                      <Nav.Link name=\"updatePrice\" className=\"add-txt-btn\" \r\n                                              hidden={this.state.userRoleControlRights.indexOf(updateQuotationTestId) === -1}\r\n                                              onClick={()=>this.props.getQuotationPricingEditService({...editTestPriceParam, \"updateType\":\"All\", dataState:undefined})}\r\n                                              >\r\n                                          <FontAwesomeIcon icon={faPencilAlt} /> { }\r\n                                          <FormattedMessage id='IDS_PRICE' defaultMessage='Price' />\r\n                                      </Nav.Link>\r\n                                      </div>\r\n                                  </Col>\r\n                              </Row> */}\r\n                              {/* <Row noGutters>\r\n                                  <Col md={12}>\r\n                                      <DataGrid\r\n                                          primaryKeyField={\"nquotationtestcode\"}\r\n                                       // data={this.props.Login.masterData.QuotationTest}\r\n                                          data={this.state.data}\r\n                                       // dataResult={this.props.Login.masterData.QuotationTest}\r\n                                      //  dataResult={process(this.props.Login.masterData.QuotationTest || [], this.state.quotationDataState)}\r\n                                          dataResult={this.state.dataResult}\r\n                                     //   dataState={this.state.quotationDataState}\r\n                                          dataState={this.state.dataState}\r\n                                       // dataStateChange={this.dataStateChange}\r\n                                       //   dataStateChange={(event) => this.setState({ quotationDataState: event.dataState })}\r\n                                          dataStateChange={this.dataStateChange}\r\n                                          extractedColumnList={this.extractedColumnList}\r\n                                          expandField=\"expanded\"\r\n                                          controlMap={this.state.controlMap}\r\n                                          userRoleControlRights={this.state.userRoleControlRights}\r\n                                          inputParam={this.props.Login.inputParam}\r\n                                          userInfo={this.props.Login.userInfo}\r\n                                          fetchRecord={this.props.getQuotationPricingEditService}\r\n                                          editParam={{...editTestPriceParam, \"updateType\":\"Single\", dataState:this.state.dataState}}\r\n                                          gridHeight={'335px'}\r\n                                          deleteRecord={this.DeleteQuotationTest}\r\n                                          deleteParam={{operation:\"delete\"}}\r\n                                          methodUrl={\"QuotationTest\"}\r\n                                          addRecord = {() => this.openModal(addId)}\r\n                                          pageable={true}\r\n                                          scrollable={'scrollable'}\r\n                                          isActionRequired={true}\r\n                                          isToolBarRequired={false}\r\n                                          selectedId={this.props.Login.selectedId}\r\n                                      />\r\n                                  </Col>\r\n                              </Row> */}\r\n\r\n                                  <Card className=\"at-tabs border-0\">\r\n                                    <Row noGutters>\r\n                                      <Col md={12}>\r\n                                        <QuotationTab\r\n                                          primaryKeyField={\"nquotationtestcode\"}\r\n                                          // data={this.props.Login.masterData.ProjectMember}\r\n                                          data={this.state.data}\r\n                                          // dataResult={this.props.Login.masterData.ProjectMember}\r\n                                          dataResult={this.state.dataResult}\r\n                                          masterData={this.props.Login.masterData}\r\n                                          screenName={this.props.Login.screenName}\r\n                                          operation={this.props.Login.operation}\r\n                                          openChildModal={this.props.Login.openChildModal}\r\n                                          crudMaster={this.props.crudMaster}\r\n                                          errorCode={this.props.Login.errorCode}\r\n                                          validateEsignCredential={this.props.validateEsignCredential}\r\n                                          loadEsign={this.props.Login.loadEsign}\r\n                                          showAccordian={this.state.showAccordian}\r\n                                          selectedRecord={this.state.selectedRecord || {}}\r\n                                          // dataState={{skip: 0, take: 10}}\r\n                                          // dataState={this.props.Login.dataState}\r\n                                          dataState={this.state.dataState}\r\n                                          dataStateChange={this.dataStateChange}\r\n                                          // extractedColumnList={fieldsForGrid} --\r\n                                          controlMap={this.state.controlMap}\r\n                                          userRoleControlRights={this.state.userRoleControlRights}\r\n                                          inputParam={this.props.Login.inputParam}\r\n                                          userInfo={this.props.Login.userInfo}\r\n                                          //    getProjectmasterAddMemberService={(this.props.Login.screenName,this.props.Login.operation,this.props.getProjectmasterAddMemberService,this.props.Login.userInfo,this.props.Login.ncontrolCode)}\r\n                                          getProjectmasterAddMemberService={this.props.getProjectmasterAddMemberService}\r\n                                          // --   fetchRecord={this.props.getPricingEditService}\r\n                                          //--       editParam={{...editTestPriceParam, \"updateType\":\"Single\", priceDataState:this.state.priceDataState}}\r\n                                          //  deleteParam={{operation:\"delete\"}}\r\n                                       \r\n                                          // reloadData={this.reloadData}\r\n                                          // --      addRecord = {() => this.openModal(addId)}\r\n                                          pageable={true}\r\n                                          onTabChange={this.onTabChange}\r\n                                          updateStore={this.props.updateStore}\r\n                                          scrollable={'scrollable'}\r\n                                          // gridHeight = {'600px'}\r\n                                          isActionRequired={true}\r\n                                          isToolBarRequired={false}\r\n                                          selectedId={this.props.Login.selectedId}\r\n                                          viewAttachment={this.props.viewAttachment}\r\n                                          MembersList={this.props.Login.MembersList}\r\n                                          onComboChange={this.onComboChange}\r\n                                          // File\r\n                                          addProjectMasterFile={this.props.addProjectMasterFile}\r\n                                          esignRights={this.props.Login.userRoleControlRights}\r\n                                          // ntransactionstatus={selectedProjectMaster.ntransactionstatus}  ---\r\n                                          //  selectedRecord={this.props.Login.selectedRecord}\r\n                                          onDropProjectMasterFile={this.onDropProjectMasterFile}\r\n                                          onInputOnChange={this.onInputOnChange}\r\n                                          screenData={this.props.Login.screenData}\r\n                                          deleteAttachment={this.deleteAttachment}\r\n                                          ncontrolCode={this.props.Login.ncontrolCode}\r\n                                          linkMaster= {this.props.Login.linkMaster}\r\n\r\n\r\n                                          addQuotationTestId= {this.props.Login.addQuotationTestId}\r\n                                          updateQuotationTestId= {this.props.Login.updateQuotationTestId}\r\n                                          addId= {this.props.Login.addId}\r\n                                          editParam={{...editTestPriceParam}}\r\n                                          // fetchRecord={this.props.getQuotationPricingEditService}\r\n                                          deleteRecord={this.DeleteQuotationTest}\r\n                                          getQuotationAddTestService={this.props.getQuotationAddTestService}\r\n                                          getQuotationPricingEditService={this.props.getQuotationPricingEditService}\r\n                                          QuotationTestList={this.props.Login.QuotationTestList}\r\n                                          onSaveClick={this.onSaveClick}\r\n                                          onnetAmountEvent={this.onnetAmountEvent}\r\n                                          onNumericInputChange={this.onNumericInputChange}\r\n                                          DiscountBand={this.props.Login.DiscountBand}\r\n                                          VATBand={this.props.Login.VATBand}\r\n                                          modalScreenSize={this.props.Login.modalScreenSize}\r\n                                          QuotationGrossAmount={this.props.Login.QuotationGrossAmount}\r\n\r\n                                          QuotationHistorydata={this.props.Login.masterData.QuotationHistory}\r\n                                          QuotationHistorydataResult={this.props.Login.masterData.QuotationHistory}\r\n                                          historydataState={this.state.historydataState}\r\n                                          historydataStateChange={this.historydataStateChange}\r\n                                          selectedQuotation={selectedQuotation}\r\n                                          GrossQuotation={this.props.GrossQuotation}\r\n                                          EstimateQuotation={this.props.Login.masterData.GrossQuotation[0]}\r\n                                          onFocus={this.handleFocus}\r\n                                        />\r\n                                      </Col>\r\n                                    </Row>\r\n                                  </Card>\r\n\r\n                          <Col md={12}>\r\n                            <div className=\"horizontal-line\"></div>\r\n                          </Col>\r\n\r\n                         \r\n                      {/* <Card>\r\n                        <Card.Body>\r\n\r\n                          <Row className='justify-content-end pr-2 m-0'>\r\n\r\n                                <Nav.Link name=\"CalculatePricing\" className=\"btn btn-circle outline-grey mr-2\"\r\n                                    hidden={this.state.userRoleControlRights.indexOf(grossQuotationeId) === -1}\r\n                                    data-tip={this.props.intl.formatMessage({ id: \"IDS_VATCALCULATION\" })}\r\n                                    onClick={() => this.props.GrossQuotation(\"create\", userInfo, grossQuotationeId, selectedQuotation)}>\r\n                                    \r\n                                  <Quotationdiscount className=\"custom_icons\" width=\"20\" height=\"20\" />\r\n                                </Nav.Link>\r\n\r\n                          </Row>  \r\n\r\n                         <Row className='justify-content-end '>\r\n                            <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_TOTALGROSSAMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{parseFloat((selectedQuotation.ntotalgrossamount).toFixed(2))}</ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n                          </Row>\r\n\r\n                          <Row>\r\n                          <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_DISCOUNTBAND\" })}</FormLabel>\r\n                                <ReadOnlyText>{selectedQuotation.sdiscountbandname}</ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n\r\n                            <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_AMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{selectedQuotation.ndiscountpercentage}</ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n\r\n                            <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_DISCOUNTAMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{parseFloat((selectedQuotation.ndiscountamount).toFixed(2))} </ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n                          </Row>\r\n\r\n                          <Row>\r\n                          <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_VATBAND\" })}</FormLabel>\r\n                                <ReadOnlyText>{selectedQuotation.svatbandname}</ReadOnlyText>\r\n                              </FormGroup>\r\n                          </Col>\r\n\r\n                           \r\n                            <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_AMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{selectedQuotation.nvatpercentage}</ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n\r\n                            <Col md=\"4\">\r\n                              <FormGroup>\r\n                                <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_VATAMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{parseFloat((selectedQuotation.nvatamount).toFixed(2))} </ReadOnlyText>\r\n                              </FormGroup>\r\n                            </Col>\r\n\r\n                          </Row>\r\n\r\n                          <Row className='justify-content-end'>\r\n                          <Col md=\"4\">\r\n\r\n                            <FormGroup>\r\n                              <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_TOTALNETAMOUNT\" })}</FormLabel>\r\n                                <ReadOnlyText>{parseFloat((selectedQuotation.ntotalnetamount).toFixed(2))}</ReadOnlyText>\r\n                            </FormGroup>\r\n\r\n                           </Col>\r\n\r\n\r\n                          </Row>         \r\n                        </Card.Body>\r\n                      </Card> */}\r\n                      </Card>\r\n                      {/* <Card className=\"at-tabs border-0\">\r\n                        <Row noGutters>\r\n                          <Col md={12}>\r\n                            <QuotationTab\r\n                              primaryKeyField={\"nprojectmembercode\"}\r\n                              // data={this.props.Login.masterData.ProjectMember}\r\n                              data={this.state.data}\r\n                              // dataResult={this.props.Login.masterData.ProjectMember}\r\n                              dataResult={this.state.dataResult}\r\n                              masterData={this.props.Login.masterData}\r\n                              screenName={this.props.Login.screenName}\r\n                              operation={this.props.Login.operation}\r\n                              openChildModal={this.props.Login.openChildModal}\r\n                              crudMaster={this.props.crudMaster}\r\n                              errorCode={this.props.Login.errorCode}\r\n                              validateEsignCredential={this.props.validateEsignCredential}\r\n                              loadEsign={this.props.Login.loadEsign}\r\n                              showAccordian={this.state.showAccordian}\r\n                              selectedRecord={this.state.selectedRecord || {}}\r\n                              // dataState={{skip: 0, take: 10}}\r\n                              // dataState={this.props.Login.dataState}\r\n                              dataState={this.state.dataState}\r\n                              dataStateChange={this.dataStateChange}\r\n                              // extractedColumnList={fieldsForGrid} --\r\n                              controlMap={this.state.controlMap}\r\n                              userRoleControlRights={this.state.userRoleControlRights}\r\n                              inputParam={this.props.Login.inputParam}\r\n                              userInfo={this.props.Login.userInfo}\r\n                              //    getProjectmasterAddMemberService={(this.props.Login.screenName,this.props.Login.operation,this.props.getProjectmasterAddMemberService,this.props.Login.userInfo,this.props.Login.ncontrolCode)}\r\n                              getProjectmasterAddMemberService={this.props.getProjectmasterAddMemberService}\r\n                              // --   fetchRecord={this.props.getPricingEditService}\r\n                              //--       editParam={{...editTestPriceParam, \"updateType\":\"Single\", priceDataState:this.state.priceDataState}}\r\n                              //  deleteParam={{operation:\"delete\"}}\r\n                              methodUrl={\"Teammembers\"}\r\n                              // reloadData={this.reloadData}\r\n                              // --      addRecord = {() => this.openModal(addId)}\r\n                              pageable={true}\r\n                              onTabChange={this.onTabChange}\r\n                              updateStore={this.props.updateStore}\r\n                              scrollable={'scrollable'}\r\n                              // gridHeight = {'600px'}\r\n                              isActionRequired={true}\r\n                              isToolBarRequired={false}\r\n                              selectedId={this.props.Login.selectedId}\r\n                              viewAttachment={this.props.viewAttachment}\r\n                              MembersList={this.props.Login.MembersList}\r\n                              onComboChange={this.onComboChange}\r\n                              // File\r\n                              addProjectMasterFile={this.props.addProjectMasterFile}\r\n                              esignRights={this.props.Login.userRoleControlRights}\r\n                              // ntransactionstatus={selectedProjectMaster.ntransactionstatus}  ---\r\n                              //  selectedRecord={this.props.Login.selectedRecord}\r\n                              onDropProjectMasterFile={this.onDropProjectMasterFile}\r\n                              onInputOnChange={this.onInputOnChange}\r\n                              screenData={this.props.Login.screenData}\r\n                              deleteAttachment={this.deleteAttachment}\r\n                              ncontrolCode={this.props.Login.ncontrolCode}\r\n                              linkMaster= {this.props.Login.linkMaster}\r\n\r\n\r\n                              addQuotationTestId= {this.props.Login.addQuotationTestId}\r\n                              updateQuotationTestId= {this.props.Login.updateQuotationTestId}\r\n                              addId= {this.props.Login.addId}\r\n                              editParam={{...editTestPriceParam}}\r\n                              fetchRecord={this.props.getQuotationPricingEditService}\r\n                              deleteRecord={this.DeleteQuotationTest}\r\n                             \r\n                            />\r\n                          </Col>\r\n                        </Row>\r\n                      </Card> */}\r\n\r\n\r\n\r\n                    </Card.Body>\r\n                  </Card>\r\n                </ContentPanel>\r\n                : \"\"\r\n              }\r\n            </Col>\r\n          </Row>\r\n\r\n\r\n        </div>\r\n        {/* End of get display */}\r\n\r\n        {/* Start of Modal Sideout for Test Creation */}\r\n        {this.props.Login.openModal &&\r\n           <SlideOutModal\r\n           show={this.props.Login.openModal}\r\n           size={this.props.Login.modalScreenSize===true ? \"xl\" : \"lg\" }\r\n           closeModal={this.closeModal}\r\n           hideSave={this.props.Login.screenName ===  \"IDS_VIEW\" ? true :  false}\r\n           operation={(this.props.Login.screenName === \"IDS_CALCULATEPRICING\" || this.props.Login.screenName === \"IDS_VIEW\") ? \"\" :  this.props.Login.operation}\r\n           inputParam={this.props.Login.inputParam}\r\n           screenName={this.props.Login.screenName}\r\n           onSaveClick={this.onSaveClick}\r\n           esign={this.props.Login.loadEsign}\r\n           validateEsign={this.validateEsign}\r\n           selectedRecord={this.state.selectedRecord || {}} \r\n          //  mandatoryFields={this.props.Login.screenName !==\"IDS_PRICE\" ? this.mandatoryFields : []}\r\n           mandatoryFields={ this.mandatoryFields} \r\n           addComponent={this.props.Login.loadEsign ?\r\n            <Esign\r\n               operation={this.props.Login.operation}\r\n               onInputOnChange={this.onInputOnChange}\r\n               inputParam={this.props.Login.inputParam}\r\n               selectedRecord={this.state.selectedRecord || {}}\r\n             />\r\n             : (this.props.Login.screenName === \"IDS_QUOTATION\") ?\r\n\r\n               <AddQuotation\r\n\r\n                userInfo={this.props.Login.userInfo}\r\n                genericlabel={this.props.Login.genericLabel}\r\n                selectedRecord={this.state.selectedRecord || {}}\r\n                // selectedclientcode={this.state.selectedRecord.nclientcode || {}}\r\n                sclientsiteaddress={this.props.Login.sclientsiteaddress}\r\n                SelectedClient={this.props.Login.SelectedClient}\r\n                ClientCategory={this.props.Login.ClientCategory}\r\n                Client={this.props.Login.Client}\r\n                ClientSite={this.props.Login.ClientSite}\r\n                ClientContact={this.props.Login.ClientContact}\r\n                OEM={this.props.Login.OEM}\r\n                ProjectCode={this.props.Login.ProjectCode}\r\n                ProjectType={this.props.Login.ProjectType}\r\n                ProjectMaster={this.props.Login.ProjectMaster}\r\n                QuotationType={this.props.Login.QuotationType}\r\n                Product={this.props.Login.Product}\r\n                ProductCategory={this.props.Login.ProductCategory}\r\n                onInputOnChange={this.onInputOnChange}\r\n                onComboChange={this.onComboChange}\r\n         //     onNumericInputChange={this.onNumericInputChange}\r\n                 handleDateChange={this.handleDateChange}\r\n               /> \r\n              : (this.props.Login.screenName === \"IDS_VIEW\") ? \r\n\r\n               <AddQuotationPreview\r\n\r\n                selectedQuotation ={this.props.Login.masterData.SelectedQuotation}\r\n                userInfo={this.props.Login.userInfo}\r\n                genericlabel={this.props.Login.genericLabel}\r\n              ></AddQuotationPreview> : \"\"\r\n           }\r\n         />\r\n        }\r\n        {this.props.Login.modalShow ? (\r\n          <ModalShow\r\n          modalShow={this.props.Login.modalShow}\r\n          closeModal={this.closeModalShow}\r\n          onSaveClick={this.onSaveModalClick}\r\n          validateEsign={this.validateEsign}\r\n          masterStatus={this.props.Login.masterStatus}\r\n          mandatoryFields={this.mandatoryFields}\r\n          updateStore={this.props.updateStore}\r\n          selectedRecord={this.state.selectedRecord || {}}\r\n          modalTitle={this.props.Login.modalTitle}\r\n          modalBody={\r\n              this.props.Login.modalTitle === \"IDS_RETIREQUOTATION\" ? (\r\n              <RetireQuotation\r\n                selectedRecord={this.state.selectedRecord || {}}\r\n                // Status={this.props.Login.screenName === \"IDS_RETIRE\"}\r\n                TimeZoneList={this.props.Login.TimeZoneList}\r\n                onInputOnChange={this.onInputOnChange}\r\n                handleDateChange={this.handleDateChange}\r\n                userInfo={this.props.Login.userInfo}\r\n                esign={this.props.Login.loadEsign}\r\n              />\r\n            ) : \"\"\r\n          }\r\n        />\r\n          ) : (\r\n            \"\"\r\n        )\r\n      }\r\n        {/* End of Modal Sideout for Test Creation */}\r\n      </>\r\n    );\r\n  }\r\n\r\n  findMandatoryFields(screenName, selectedRecord, operation) {\r\n    let mandatoryFields = [];\r\n    if (screenName === \"IDS_QUOTATION\" && operation !== \"retire\") {\r\n\r\n      mandatoryFields = [\r\n        { \"idsName\": \"IDS_CLIENTCATEGORY\", \"dataField\": \"nclientcatcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_CLIENT\", \"dataField\": \"nclientcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_CLIENTSITE\", \"dataField\": \"nclientsitecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": \"IDS_CONTACTNAME\", \"dataField\": \"nclientcontactcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_OEM\", \"dataField\": \"noemcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_INVOICEADDRESS\", \"dataField\": \"sinvoiceaddress\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_QUOTATIONTYPE\", \"dataField\": \"nquotationtypecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_PROJECTTYPE\", \"dataField\": \"nprojecttypecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_PROJECTCODE\", \"dataField\": \"nprojectmastercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_PROJECTTITLE\", \"dataField\": \"sprojecttitle\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n//      { \"idsName\": \"IDS_RFWDATE\", \"dataField\": \"srfwdate\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"textbox\" },\r\n //     { \"idsName\": \"IDS_ROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"selectbox\" },\r\n //     { \"idsName\": \"IDS_USER\", \"dataField\": \"susername\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n        { \"idsName\": (this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\"), \"dataField\": \"nproductcatcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n        { \"idsName\": (this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] || \"\"), \"dataField\": \"nproductcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n\r\n        { \"idsName\": \"IDS_QUOTATIONDATE\", \"dataField\": \"dquotationdate\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"selectbox\" },\r\n        \r\n      ]\r\n\r\n      // mandatoryFields.forEach(item => item.mandatory === true && mandatoryFields.push(item));\r\n      return mandatoryFields;\r\n\r\n    } else if (screenName === \"IDS_QUOTATION\" && operation === \"retire\") {\r\n\r\n      mandatoryFields = [\r\n        { \"idsName\": \"IDS_RETIREDATE\", \"dataField\": \"dretiredatetime\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"selectbox\" },\r\n\r\n      ]\r\n      return mandatoryFields;\r\n    }\r\n    else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  QuotationPreview = () => {\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: {\r\n        screenName: \"IDS_VIEW\",\r\n        openModal: true,\r\n        operation: \"create\",\r\n        modalScreenSize : false\r\n        \r\n      },\r\n    };\r\n\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n\r\n\r\n  onComboChange = (comboData, fieldName, caseNo, nquotationtestcode) => {\r\n\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    if(comboData!==null){\r\n      switch (caseNo) {\r\n        case 1:\r\n\r\n        if(fieldName===\"nclientcatcode\"){\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n          if (selectedRecord.nclientcatcode) {\r\n            if (parseInt(comboData.value) !== parseInt(selectedRecord.nclientcatcode.value)) {\r\n            // selectedRecord.nusercode={};\r\n            delete (selectedRecord.nclientcode);\r\n            delete (selectedRecord.nclientsitecode);\r\n            delete (selectedRecord.nclientcontactcode);\r\n            }\r\n          }\r\n\r\n          selectedRecord[fieldName] = comboData;\r\n          selectedRecord[\"sclientcatname\"] = comboData.item[\"sclientcatname\"];\r\n          this.props.getQuotationClientCategoryComboService({\r\n\r\n          inputData: {\r\n            userinfo: this.props.Login.userInfo,\r\n            sdisplayname: selectedRecord.nclientcatcode.label,\r\n            primarykey: selectedRecord.nclientcatcode.value,\r\n          }\r\n\r\n        }, selectedRecord);\r\n      }\r\n\r\n      if(fieldName===\"nclientcode\"){\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n        if (selectedRecord.nclientcode) {\r\n          if (parseInt(comboData.value) !== parseInt(selectedRecord.nclientcode.value)) {\r\n            // selectedRecord.nusercode={};\r\n            delete (selectedRecord.nclientsitecode);\r\n            delete (selectedRecord.nclientcontactcode);\r\n            \r\n          }\r\n        }\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n        selectedRecord[\"sclientname\"] = comboData.item[\"sclientname\"];\r\n        this.props.getQuotaionClientComboService({\r\n\r\n          inputData: {\r\n            userinfo: this.props.Login.userInfo,\r\n            sdisplayname: selectedRecord.nclientcode.label,\r\n            primarykey: selectedRecord.nclientcode.value,\r\n          }\r\n\r\n        }, selectedRecord);\r\n      }\r\n\r\n      if(fieldName===\"nclientsitecode\"){\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n        if (selectedRecord.nclientsitecode) {\r\n          if (parseInt(comboData.value) !== parseInt(selectedRecord.nclientsitecode.value)) {\r\n            // selectedRecord.nusercode={};\r\n            delete (selectedRecord.nclientcontactcode);\r\n            \r\n          }\r\n        }\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n        selectedRecord[\"sclientsitename\"] = comboData.item[\"sclientsitename\"];\r\n        this.props.getQuotaionClientSiteComboService({\r\n\r\n          inputData: {\r\n            userinfo: this.props.Login.userInfo,\r\n            sdisplayname: selectedRecord.nclientsitecode.label,\r\n            primarykey: selectedRecord.nclientsitecode.value,\r\n            nclientcode: selectedRecord.nclientcode.value,\r\n          }\r\n\r\n        }, selectedRecord);\r\n      }\r\n\r\n      if(fieldName===\"nproductcatcode\"){ //\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n        if (selectedRecord.nproductcatcode) {\r\n          if (parseInt(comboData.value) !== parseInt(selectedRecord.nproductcatcode.value)) {\r\n            // selectedRecord.nusercode={};\r\n            delete (selectedRecord.nproductcode);\r\n            \r\n          }\r\n        }\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n        selectedRecord[\"sproductcatname\"] = comboData.item[\"sproductcatname\"];\r\n        this.props.getQuotaionProductCategoryComboService({\r\n\r\n          inputData: {\r\n            userinfo: this.props.Login.userInfo,\r\n            sdisplayname: selectedRecord.nproductcatcode.label,\r\n            primarykey: selectedRecord.nproductcatcode.value,\r\n          }\r\n\r\n        }, selectedRecord);\r\n      }\r\n\r\n        break;\r\n\r\n      case 2:\r\n\r\n        // const selectedRecordfilter = this.state.selectedRecordfilter || {};\r\n        // selectedRecordfilter[fieldName] = comboData;\r\n        // this.setState({ selectedRecordfilter });\r\n        // break;\r\n\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        this.setState({ selectedRecord });\r\n        break;\r\n        \r\n      case 3:\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n\r\n        if ( selectedRecord[fieldName]==null ){\r\n          \r\n          selectedRecord[fieldName]=[];\r\n\r\n          if(fieldName===\"ndiscountbandcode\"){\r\n\r\n            selectedRecord[\"DiscountAmount\"]=0;\r\n            selectedRecord[\"ndiscountpercentage\"]= 0;\r\n\r\n          }else if(fieldName===\"nvatbandcode\"){\r\n\r\n            selectedRecord[\"VatAmount\"]=0;\r\n            selectedRecord[\"nvatpercentage\"] =0;\r\n\r\n          }\r\n          selectedRecord[\"TotalNetAmount\"]=parseFloat(((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+selectedRecord.VatAmount)-this.state.selectedRecord.DiscountAmount).toFixed(2));\r\n\r\n        }else{\r\n\r\n          if(fieldName===\"ndiscountbandcode\"){\r\n\r\n            const VatAmount=(this.state.selectedRecord.VatAmount === undefined ? 0.00 : this.state.selectedRecord.VatAmount)\r\n            selectedRecord[\"DiscountAmount\"]=parseFloat((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount * (selectedRecord.ndiscountbandcode.item.namount/100)).toFixed(2));\r\n        //  selectedRecord[\"TotalNetAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+(this.state.selectedRecord.DiscountAmount-VatAmount);\r\n            selectedRecord[\"TotalNetAmount\"]=parseFloat(((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+VatAmount)-this.state.selectedRecord.DiscountAmount).toFixed(2));\r\n            selectedRecord[\"ndiscountpercentage\"]= selectedRecord.ndiscountbandcode.item.namount;\r\n  \r\n  \r\n          }else if(fieldName===\"nvatbandcode\"){\r\n  \r\n              selectedRecord[\"VatAmount\"]=parseFloat((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount * (selectedRecord.nvatbandcode.item.namount/100)).toFixed(2));\r\n              //            selectedRecord[\"TotalNetAmount\"]=this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+(selectedRecord.DiscountAmount-this.state.selectedRecord.VatAmount);\r\n              selectedRecord[\"TotalNetAmount\"]=parseFloat(((this.props.Login.QuotationGrossAmount[0].ntotalgrossamount+this.state.selectedRecord.VatAmount)-selectedRecord.DiscountAmount).toFixed(2));\r\n              selectedRecord[\"nvatpercentage\"] = selectedRecord.nvatbandcode.item.namount; \r\n  \r\n          }\r\n\r\n        }\r\n       \r\n        this.setState({ selectedRecord });\r\n        break;\r\n\r\n        case 4:\r\n         \r\n          if(fieldName===\"nprojecttypecode\"){\r\n            if (selectedRecord.nprojecttypecode) {\r\n              if (parseInt(comboData.value) !== parseInt(selectedRecord.nprojecttypecode.value)) {\r\n                delete (selectedRecord.nprojectmastercode);\r\n                delete (selectedRecord.sprojecttitle);\r\n                delete (selectedRecord.srfwdate);\r\n                delete (selectedRecord.suserrolename);\r\n                delete (selectedRecord.susername);\r\n              }\r\n            }\r\n    \r\n            selectedRecord[fieldName] = comboData;\r\n            selectedRecord[\"sprojecttypename\"] = comboData.item[\"sprojecttypename\"];\r\n            this.props.getProjectTypeComboService({\r\n    \r\n              inputData: {\r\n                userinfo: this.props.Login.userInfo,\r\n                sdisplayname: selectedRecord.nprojecttypecode.label,\r\n                primarykey: selectedRecord.nprojecttypecode.value,\r\n              }\r\n    \r\n            }, selectedRecord);\r\n          }\r\n\r\n          if(fieldName===\"nprojectmastercode\"){\r\n            if (selectedRecord.nprojectmastercode) {\r\n              if (parseInt(comboData.value) !== parseInt(selectedRecord.nprojectmastercode.value)) {\r\n                delete (selectedRecord.sprojecttitle);\r\n                delete (selectedRecord.srfwdate);\r\n                delete (selectedRecord.suserrolename);\r\n                delete (selectedRecord.susername);\r\n              }\r\n            }\r\n    \r\n            selectedRecord[fieldName] = comboData;\r\n            selectedRecord[\"sprojectcode\"] = comboData.item[\"sprojectcode\"];\r\n            this.props.getProjectCodeComboService({\r\n    \r\n              inputData: {\r\n                userinfo: this.props.Login.userInfo,\r\n                sdisplayname: selectedRecord.nprojectmastercode.label,\r\n                primarykey: selectedRecord.nprojectmastercode.value,\r\n              }\r\n    \r\n            }, selectedRecord);\r\n          }\r\n\r\n          break;\r\n          case 5:\r\n\r\n            let selectedRecordindex=selectedRecord.findIndex((item) => (item.nquotationtestcode === nquotationtestcode ? item : \"\"));\r\n            selectedRecord[fieldName] = comboData;\r\n\r\n            if (selectedRecord[fieldName]==null){\r\n              \r\n              selectedRecord[selectedRecordindex][fieldName]=[];\r\n    \r\n            }else{\r\n\r\n            //  selectedRecord[fieldName] = comboData;\r\n            //  selectedRecord[\"namount\"]=comboData.item.namount;\r\n            let str=selectedRecord[selectedRecordindex];\r\n            let discountamount = parseFloat(( (str.ncost * str.nnoofsamples) * (comboData.item.namount/100)).toFixed(2));\r\n            let count= ( str.ncost * str.nnoofsamples ) - ( discountamount ); \r\n            selectedRecord[selectedRecordindex]={...str, ntotalamount:parseFloat((count).toFixed(2)), namount:comboData.item.namount , ndiscountbandcode:comboData.item.ndiscountbandcode}\r\n            selectedRecord[selectedRecordindex][\"ndiscountbandcode\"]={label :comboData.item.sdiscountbandname,value:comboData.item.ndiscountbandcode}\r\n\r\n          //    selectedRecord[selectedRecordindex][\"ndiscountbandcode\"]=  {...selectedRecord[selectedRecordindex],\r\n\r\n          //     label :comboData.item.sdiscountbandname,\r\n          //     value:comboData.item.ndiscountbandcode\r\n              \r\n          // }\r\n            }\r\n          \r\n\r\n           this.setState(selectedRecord);\r\n\r\n          break;\r\n      default:\r\n        break;\r\n    };\r\n  }\r\n  else{\r\n    if(fieldName === 'noemcode'){\r\n      delete (selectedRecord.noemcode);\r\n\r\n    }\r\n  this.setState({selectedRecord});\r\n  }\r\n}\r\n\r\n  // onNumericInputChange = (event, primaryFieldKey) => {\r\n  //   // console.log(\"value:\", value, name);\r\n  //    const selectedRecord = this.state.selectedRecord || {};\r\n  //    if (event.target.name === \"nnoofsamples\") {\r\n  //     const index = selectedRecord.findIndex(item=>item.nquotationtestcode === primaryFieldKey);\r\n  //        if (/^-?\\d*?$/.test(event.target.value) || event.target.value === \"\") {\r\n    \r\n  //         selectedRecord[index][event.target.name] = event.target.value;\r\n  //        }\r\n  //    }\r\n  //    else {\r\n  //     selectedRecord[event.target.name] = event.target.value;\r\n  //    }\r\n  \r\n  //    this.setState({ selectedRecord });\r\n  // }\r\n\r\n  closeModalShow = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n\r\n    let modalShow = this.props.Login.modalShow;\r\n    let popUp = this.props.Login.popUp;\r\n    let selectedRecord = this.props.Login.selectedRecord;\r\n    if (this.props.Login.loadEsign) {\r\n      loadEsign = false;\r\n    } else {\r\n      modalShow = false;\r\n      selectedRecord = {};\r\n      popUp = undefined;\r\n    }\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { modalShow, selectedRecord, selectedId: null, loadEsign, popUp },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  onNumericInputChange = (value, name,primaryFieldKey) => {\r\n\r\n     const selectedRecord = this.state.selectedRecord || {};\r\n     const index = selectedRecord.findIndex(item=>item.nquotationtestcode === primaryFieldKey);\r\n     selectedRecord[index][name] = value;\r\n   \r\n\r\n     this.setState({ selectedRecord });\r\n }\r\n\r\n  onInputOnChange = (event, primaryFieldKey) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n\r\n    if (event.target.name === 'snotes' || event.target.name === 'stestplatform' || event.target.name === 'squotationleadtime') {\r\n\r\n      const index = selectedRecord.findIndex(item=>item.nquotationtestcode === primaryFieldKey);\r\n      selectedRecord[index][event.target.name] = event.target.value;\r\n\r\n    }\r\n    else if (event.target.type === 'checkbox') {\r\n      if (event.target.name === \"ntransactionstatus\")\r\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.RETIRED;\r\n      else\r\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n    }\r\n    else {   \r\n        if(primaryFieldKey && (event.target.name === \"ncost\" || event.target.name === \"nnoofsamples\" || event.target.name === \"ntotalamount\")){\r\n            const index = selectedRecord.findIndex(item=>item.nquotationtestcode === primaryFieldKey);\r\n            // if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){\r\n              if (/^-?\\d*?$/.test(event.target.value)) {\r\n                selectedRecord[index][event.target.name] = event.target.value;\r\n            }\r\n        }\r\n        else{      \r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }           \r\n    }\r\n    this.setState({ selectedRecord });\r\n}\r\n\r\nonnetAmountEvent = (nquotationtestcode) => {\r\n\r\n  let selectedRecord=this.state.selectedRecord;\r\n  let selectedRecordindex=selectedRecord.findIndex((item) => (item.nquotationtestcode === nquotationtestcode ? item : \"\"));\r\n  let str=selectedRecord[selectedRecordindex];\r\n//  let count= (str.ncost * str.nnoofsamples)-str.namount; \r\n  let discountamount = parseFloat(( (str.ncost * str.nnoofsamples) * (str.namount/100)).toFixed(2));\r\n  let count= ( str.ncost * str.nnoofsamples ) - ( discountamount ); \r\n  // selectedRecord[selectedRecordindex]={...str,ntotalamount:count}\r\n  selectedRecord[selectedRecordindex]={...str,ntotalamount: parseFloat((count).toFixed(2))}\r\n\r\n  this.setState(selectedRecord);\r\n\r\n  \r\n} \r\n\r\n\r\n\r\n  approveQuotation = (methodUrl, selectedQuotation, operation, ncontrolCode) => {\r\n    if (selectedQuotation.ntransactionstatus === transactionStatus.DRAFT) {\r\n\r\n      const postParam = {\r\n        inputListName: \"Quotation\",\r\n        selectedObject: \"SelectedQuotation\",\r\n        primaryKeyField: \"nquotationcode\",\r\n        primaryKeyValue: selectedQuotation.nquotationcode,\r\n        fetchUrl: \"quotation/getQuotation\",\r\n        fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n      };\r\n\r\n      const inputParam = {\r\n        classUrl: this.props.Login.inputParam.classUrl,\r\n        methodUrl, postParam,\r\n        inputData: {\r\n          \"userinfo\": this.props.Login.userInfo, \r\n          \"quotation\": selectedQuotation\r\n        },\r\n        operation,\r\n        isClearSearch: this.props.Login.isClearSearch,\r\n        selectedRecord:{...this.state.selectedRecord}\r\n      }\r\n\r\n      const masterData = this.props.Login.masterData;\r\n\r\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n        const updateInfo = {\r\n          typeName: DEFAULT_RETURN,\r\n          data: {\r\n            loadEsign: true, screenData: { inputParam, masterData },\r\n            openModal: true, screenName: \"IDS_QUOTATION\", operation\r\n          }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n      }\r\n      else {\r\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n      }\r\n    }else if(selectedQuotation.ntransactionstatus === transactionStatus.APPROVED){\r\n\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_ALREADYAPPROVED\" }));\r\n\r\n    }else if(selectedQuotation.ntransactionstatus === transactionStatus.RETIRED){\r\n\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_ALREADYRETIRED\" }));\r\n\r\n    }\r\n    else {\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTVERSION\" }));\r\n    }\r\n\r\n  }\r\n\r\n  onSaveModalClick = () => {\r\n    console.log(\"savemodal\");\r\n    let inputData = {};\r\n    let quotationData = [];\r\n\r\n    if (this.props.Login.masterData.SelectedQuotation && this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.APPROVED) {\r\n      const retireId = this.state.controlMap.has(\"RetireQuotation\") && this.state.controlMap.get(\"RetireQuotation\").ncontrolcode;\r\n      let inputParam = {};\r\n      const postParam = {\r\n        inputListName: \"Quotation\",\r\n        selectedObject: \"SelectedQuotation\",\r\n        primaryKeyField: \"nquotationcode\",\r\n        primaryKeyValue: this.props.Login.masterData.SelectedQuotation.nquotationcode,\r\n        fetchUrl: \"quotation/getQuotation\",\r\n        fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n      };\r\n      if(this.props.Login.modalTitle===\"IDS_RETIREQUOTATION\"){\r\n        if (this.state.selectedRecord[\"dretiredatetime\"] !== null) {\r\n          quotationData[\"dtransactiondate\"] = formatInputDate(this.state.selectedRecord[\"dretiredatetime\"],false);\r\n          quotationData[\"ntransdatetimezonecode\"] =  this.props.Login.userInfo.ntimezonecode ? this.props.Login.userInfo.ntimezonecode : \"-1\";\r\n                quotationData[\"sretireremarks\"] = this.state.selectedRecord[\"sretireremarks\"] ? this.state.selectedRecord[\"sretireremarks\"]  : \"\";\r\n                quotationData[\"nquotationcode\"] = this.props.Login.masterData.SelectedQuotation.nquotationcode;\r\n                quotationData[\"nquotationversioncode\"] = this.props.Login.masterData.SelectedQuotation.nquotationversioncode;\r\n\r\n                inputParam = {\r\n                  classUrl: this.props.Login.inputParam.classUrl,\r\n                  methodUrl : \"Quotation\", postParam,\r\n                  inputData: {\r\n                    \"userinfo\": this.props.Login.userInfo,\r\n                    \"quotation\": {...this.props.Login.masterData.SelectedQuotation, \"dtransactiondate\":quotationData[\"dtransactiondate\"], \"sretireremarks\" : quotationData[\"sretireremarks\"] ,\"nquotationcode\": quotationData[\"nquotationcode\"], \"nquotationversioncode\": quotationData[\"nquotationversioncode\"], \"ntransdatetimezonecode\": quotationData[\"ntransdatetimezonecode\"]}\r\n                  },\r\n                  operation:this.props.Login.operation,\r\n                  isClearSearch: this.props.Login.isClearSearch,\r\n                  selectedRecord:{...this.state.selectedRecord}\r\n                }\r\n      \r\n            const masterData = this.props.Login.masterData;\r\n\r\n          if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, retireId)) {\r\n            const updateInfo = {\r\n              typeName: DEFAULT_RETURN,\r\n              data: {\r\n                loadEsign: true, screenData: { inputParam, masterData },openModal: true,\r\n                modalShow: false, screenName: \"IDS_QUOTATION\", operation:this.props.Login.operation\r\n              }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n          }else {\r\n            this.props.modalSave(inputParam, masterData);\r\n          }\r\n        }else{\r\n          toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDATE\" }));\r\n        }\r\n      }\r\n    \r\n    }else if(this.props.Login.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.RETIRED){\r\n\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_ALREADYRETIRED\" }));\r\n\r\n    }\r\n    else {\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTAPPROVEDQUOTATION\" }));\r\n    }\r\n\r\n  };\r\n\r\n\r\n  onTabChange = (tabProps) => {\r\n    const screenName = tabProps.screenName;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { screenName },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n\r\n  /*\r\n  dataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(\r\n        this.props.Login.masterData[\"selectedSection\"],\r\n        event.dataState\r\n      ),\r\n      sectionDataState: event.dataState,\r\n    });\r\n  };\r\n*/\r\nhandleFocus(e){\r\n  e.target.select();\r\n}\r\n  dataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(this.state.data, event.dataState),\r\n      dataState: event.dataState\r\n    });\r\n  }\r\n\r\n  historydataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(this.state.data, event.historydataState),\r\n      historydataState: event.historydataState\r\n    });\r\n  }\r\n\r\n  ConfirmDelete = (selectedQuotation, operation, deleteId, screenName) => {\r\n    this.confirmMessage.confirm(\r\n      \"deleteMessage\",\r\n      this.props.intl.formatMessage({ id: \"IDS_DELETE\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_OK\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n      () =>\r\n        this.DeleteQuotation(\r\n          screenName,\r\n          selectedQuotation,\r\n          operation,\r\n          deleteId\r\n\r\n        )\r\n    );\r\n  };\r\n  reloadData = () => {\r\n    this.searchRef.current.value = \"\";\r\n\r\n//    if (Object.values(this.props.Login.masterData.SelectedQuotation).length && this.props.Login.masterData.SelectedQuotation !== undefined) {\r\n      // if (this.props.Login.masterData.SelectedQuotation !== undefined) {\r\n      let inputParam = {\r\n        inputData: {\r\n     \r\n          userinfo: this.props.Login.userInfo,\r\n          \r\n        },\r\n        classUrl: \"quotation\",\r\n        methodUrl: \"Quotation\",\r\n      };\r\n\r\n      this.props.getreloadQuotation(inputParam);\r\n\r\n    // } \r\n    // else {\r\n    //   toast.warn(\r\n    //     this.props.intl.formatMessage({\r\n    //       id: \"IDS_PROJECTTYPENOTAVAILABLE\",\r\n    //     })\r\n    //   );\r\n    // }\r\n  };\r\n\r\n  DeleteQuotationTest = (deleteParam) =>{\r\n\r\n  \r\n    deleteParam.selectedRecord[\"nclientcode\"]=this.props.Login.masterData.SelectedQuotation.nclientcode;\r\n    deleteParam.selectedRecord[\"nprojectmastercode\"]=this.props.Login.masterData.SelectedQuotation.nprojectmastercode;\r\n    deleteParam.selectedRecord[\"nclientcatcode\"]=this.props.Login.masterData.SelectedQuotation.nclientcatcode;\r\n    deleteParam.selectedRecord[\"nclientsitecode\"]=this.props.Login.masterData.SelectedQuotation.nclientsitecode;\r\n    deleteParam.selectedRecord[\"nclientcontactcode\"]=this.props.Login.masterData.SelectedQuotation.nclientcontactcode;\r\n\r\n    const postParam = { \r\n      \r\n      inputListName: \"QuotationList\", selectedObject: \"SelectedQuotation\",\r\n      primaryKeyField: \"nquotationcode\", primaryKeyValue: deleteParam.selectedRecord.nquotationtestcode,\r\n      fetchUrl: \"quotation/getQuotationTest\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo }\r\n  };\r\n\r\n    const inputParam = {\r\n        classUrl: \"quotation\",\r\n        methodUrl: \"QuotationPrice\",\r\n        postParam,\r\n\r\n        inputData: {\r\n            \"QuotationTestPrice\": deleteParam.selectedRecord,//.dataItem,\r\n      //      \"npriceversioncode\":this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode,\r\n            \"userinfo\": this.props.Login.userInfo,\r\n\r\n        },\r\n        operation:\"delete\",\r\n     //  priceDataState:this.state.priceDataState\r\n    }\r\n\r\n    if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                openModal: true, screenName: this.props.intl.formatMessage({ id: \"IDS_TESTPRICE\" }),\r\n                operation:deleteParam.operation\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    else {\r\n        this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n    }\r\n}\r\n\r\n\r\n  closeModal = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n    let modalShow = this.props.Login.modalShow;\r\n    let openModal = this.props.Login.openModal;\r\n    let selectedRecord = this.state.selectedRecord;\r\n//    let selectedRecord = this.state.selectedRecord;\r\n    if (this.props.Login.loadEsign) {\r\n        if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"approve\" ) {\r\n            loadEsign = false;\r\n            openModal = false;\r\n            selectedRecord = {};\r\n        }\r\n        else if(this.props.Login.operation === \"retire\"){\r\n            loadEsign = false;\r\n            openModal = false;\r\n            modalShow = true;\r\n            selectedRecord = {};\r\n        }\r\n        else {\r\n            loadEsign = false;\r\n            selectedRecord['esignpassword'] = '';\r\n            selectedRecord['esigncomments'] = '';\r\n            selectedRecord['esignreason'] = '';\r\n        } \r\n    }\r\n    else {\r\n        openModal = false;\r\n        modalShow = false;\r\n        selectedRecord = {};\r\n    }\r\n\r\n    const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: { openModal, loadEsign, selectedRecord ,modalShow}\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n\r\n}\r\n\r\n  componentDidUpdate(previousProps) {\r\n    let {\r\n      selectedRecord,\r\n      userRoleControlRights,\r\n      controlMap,\r\n      filterData,dataResult\r\n      \r\n    } = this.state;\r\n\r\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n      selectedRecord = this.props.Login.selectedRecord;\r\n      this.setState({ selectedRecord });\r\n    }\r\n\r\n\r\n//   if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n//     userRoleControlRights = [];\r\n//     if (this.props.Login.userRoleControlRights) {\r\n//       this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode\r\n//       ] &&\r\n//         Object.values(\r\n//           this.props.Login.userRoleControlRights[\r\n//           this.props.Login.userInfo.nformcode\r\n//           ]\r\n//         ).map((item) => userRoleControlRights.push(item.ncontrolcode));\r\n//     }\r\n//     controlMap = getControlMap(\r\n//       this.props.Login.userRoleControlRights,\r\n//       this.props.Login.userInfo.nformcode\r\n//     );\r\n//     // this.setState({ controlMap, userRoleControlRights });\r\n\r\n\r\n//     this.setState({\r\n//       userRoleControlRights, controlMap, data: this.props.Login.masterData.QuotationTest,\r\n//       dataResult: process(this.props.Login.masterData.QuotationTest, this.state.dataState)\r\n//   });\r\n//   }\r\n//   else {\r\n\r\n//     let {dataState}=this.state;\r\n//         if(this.state.dataResult !== undefined){ \r\n//             if(this.state.dataResult.data){\r\n//                 if(this.state.dataResult.data.length ===1){\r\n//                     let skipcount=this.state.dataState.skip>0?(this.state.dataState.skip-this.state.dataState.take):\r\n//                     this.state.dataState.skip\r\n//                     dataState={skip:skipcount,take:this.state.dataState.take}\r\n//                 }\r\n//               } \r\n\r\n//               this.setState({\r\n//                 dataResult: process( this.props.Login.masterData || [], dataState),\r\n//                 dataState\r\n//           });\r\n//     }\r\n    \r\n// }\r\n\r\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n\r\n      if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n        userRoleControlRights = [];\r\n        if (this.props.Login.userRoleControlRights) {\r\n          this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode\r\n          ] &&\r\n            Object.values(\r\n              this.props.Login.userRoleControlRights[\r\n              this.props.Login.userInfo.nformcode\r\n              ]\r\n            ).map((item) => userRoleControlRights.push(item.ncontrolcode));\r\n        }\r\n        controlMap = getControlMap(\r\n          this.props.Login.userRoleControlRights,\r\n          this.props.Login.userInfo.nformcode\r\n        );\r\n        // this.setState({ controlMap, userRoleControlRights });\r\n  \r\n  \r\n        this.setState({\r\n          userRoleControlRights, controlMap, data: this.props.Login.masterData.QuotationTest,\r\n          dataResult: process(this.props.Login.masterData.QuotationTest || [], this.state.dataState),\r\n\r\n          // QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.historydataState)\r\n          // QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\r\n      });\r\n      \r\n   \r\n      \r\n      }\r\n      else {\r\n  \r\n        let {dataState}=this.state;\r\n        // let {historydataState}=this.state;\r\n            if(this.state.dataResult !== undefined){ \r\n                if(this.state.dataResult.data){\r\n                    if(this.state.dataResult.data.length ===1){\r\n                        let skipcount=this.state.dataState.skip>0?(this.state.dataState.skip-this.state.dataState.take):\r\n                        this.state.dataState.skip\r\n                        dataState={skip:skipcount,take:this.state.dataState.take}\r\n                    }\r\n                  } \r\n  \r\n                  this.setState({\r\n                    data: this.props.Login.masterData.QuotationTest,\r\n                    dataResult: process( this.props.Login.masterData.QuotationTest || [], dataState),\r\n                    dataState \r\n                    // QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\r\n\r\n              });\r\n        }\r\n\r\n  //       if(this.state.QuotationHistorydataResult !== undefined){ \r\n  //         if(this.state.QuotationHistorydataResult.data){\r\n  //             if(this.state.QuotationHistorydataResult.data.length ===1){\r\n  //                 let skipcount=this.state.historydataState.skip>0?(this.state.historydataState.skip-this.state.historydataState.take):\r\n  //                 this.state.historydataState.skip\r\n  //                 historydataState={skip:skipcount,take:this.state.historydataState.take}\r\n  //             }\r\n  //           } \r\n\r\n  //           this.setState({\r\n  //             QuotationHistorydata: this.props.Login.masterData.QuotationHistory,\r\n  //             QuotationHistorydataResult: process( this.props.Login.masterData.QuotationHistory || [], historydataState),\r\n  //             historydataState \r\n  //             // QuotationHistorydata: this.props.Login.masterData.QuotationHistory, QuotationHistorydataResult: process(this.props.Login.masterData.QuotationHistory || [], this.state.dataState)\r\n\r\n  //       });\r\n  // }\r\n        \r\n    }\r\n      // dataResult = this.props.Login.masterData.QuotationTest;\r\n      // this.setState({\r\n      //   selectedRecord,dataResult\r\n      // });\r\n\r\n      // this.setState({ filterData });\r\n    }\r\n\r\n\r\n  }\r\n  \r\n  openFilter = () => {\r\n    let showFilter = !this.props.Login.showFilter;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { showFilter },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  closeFilter = () => {\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { showFilter: false },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  \r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n  callService,\r\n  crudMaster,\r\n  filterColumnData,\r\n  updateStore,\r\n  validateEsignCredential,\r\n  getQuotation,getProjectTypeComboService,\r\n  viewAttachment, addQuotation, getreloadQuotation, getQuotationAddTestService, getQuotationPricingEditService,modalSave,handleRetireQuotation,\r\n   GrossQuotation,getQuotationClientCategoryComboService,getQuotaionClientComboService,getProjectCodeComboService ,\r\n   getQuotaionProductCategoryComboService,getQuotaionClientSiteComboService,generateControlBasedReport\r\n})(injectIntl(Quotation));\r\n"]},"metadata":{},"sourceType":"module"}