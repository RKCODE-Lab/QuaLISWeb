{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import Axios from'axios';import{toast}from'react-toastify';import{DEFAULT_RETURN}from'./LoginTypes';import{initRequest}from'./LoginAction';import{sortData,constructOptionList,rearrangeDateFormat,formatInputDate}from'../components/CommonScript';import{transactionStatus}from'../components/Enumeration';import{intl}from\"../components/App\";export var getreloadQuotation=function getreloadQuotation(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/quotation/get\"+inputParam.methodUrl,inputParam.inputData).then(function(response){var masterData=response.data;sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{loading:false,dataState:undefined,masterData:_objectSpread({},masterData)}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error.message);});};};export function getQuotationClientCategoryComboService(methodParam,selectedRecord){return function(dispatch){var URL=[];URL=rsapi.post(\"/client/getClientByCategory\",{\"userinfo\":methodParam.inputData.userinfo,\"nclientcatcode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){var Client,sclientsiteaddress,ClientSite,ClientContact;var ClientMap=constructOptionList(response[0].data.Client||[],\"nclientcode\",\"sclientname\",undefined,undefined,false);// const ClientSiteMap = constructOptionList(response[0].data.ClientSite || [], \"nclientsitecode\",\"sclientsitename\", undefined, undefined, false);              \n// const ClientContactMap = constructOptionList(response[0].data.ClientContact || [], \"nclientcontactcode\",\"scontactname\", undefined, undefined, false);              \nClient=ClientMap.get(\"OptionList\");// ClientSite = ClientSiteMap.get(\"OptionList\");\n// ClientContact = ClientContactMap.get(\"OptionList\");\n// let ActiveClientSite = response[0].data.ClientSite.filter(x => x.ndefaultstatus === 3);\n// let ActiveClientContact = response[0].data.ClientContact.filter(x => x.ndefaultstatus === 3);\n// if(Client.length>0){\n//     selectedRecord[\"nclientcode\"]=  {\n//         label: response[0].data.selectedClient.sclientname,\n//         value: response[0].data.selectedClient.nclientcode,\n//         item: response[0].data.selectedClient\n//     }\n//     selectedRecord[\"nclientsitecode\"]=  {\n//         label: ActiveClientSite[0].sclientsitename,\n//         value: ActiveClientSite[0].nclientsitecode,\n//         item:  ActiveClientSite[0]\n//     }\n//     selectedRecord[\"nclientcontactcode\"]=  {\n//         label: ActiveClientContact[0].scontactname,\n//         value: ActiveClientContact[0].nclientcontactcode,\n//         item: ActiveClientContact[0].selectedClientContact\n//     }\n// }\nselectedRecord=_objectSpread({},selectedRecord);dispatch({type:DEFAULT_RETURN,payload:{Client:Client,selectedRecord:selectedRecord,ClientSite:ClientSite,ClientContact:ClientContact,loading:false,data:undefined,dataState:undefined,sclientsiteaddress:sclientsiteaddress}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getQuotaionClientComboService(methodParam,selectedRecord){return function(dispatch){var URL=[];URL=rsapi.post(\"/quotation/getSelectedClientDetail\",{\"userinfo\":methodParam.inputData.userinfo,\"nclientcode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){var ClientSite,ClientContact;// let ActiveClientSite =response[0].data.ClientSite.filter(x => x.ndefaultstatus === 3);\n// let ActiveClientSite =response[0].data.ClientSite;\n// let ActiveClientContact = response[0].data.ClientContact.filter(x => x.ndefaultstatus === 3);\n// let ActiveClientContact = response[0].data.ClientContact;\nvar ClientSiteMap=constructOptionList(response[0].data.ClientSite||[],\"nclientsitecode\",\"sclientsitename\",undefined,undefined,false);var ClientContactMap=constructOptionList(response[0].data.ClientContact||[],\"nclientcontactcode\",\"scontactname\",undefined,undefined,false);ClientSite=ClientSiteMap.get(\"OptionList\");ClientContact=ClientContactMap.get(\"OptionList\");var ActiveClientSite=response[0].data.ClientSite.filter(function(x){return x.ndefaultstatus===3;});var ActiveClientContact=response[0].data.ClientContact.filter(function(x){return x.ndefaultstatus===3;});if(ActiveClientSite.length>0){selectedRecord[\"nclientsitecode\"]={label:ActiveClientSite[0].sclientsitename,value:ActiveClientSite[0].nclientsitecode,item:ActiveClientSite[0]};}if(ActiveClientContact.length>0){selectedRecord[\"nclientcontactcode\"]={label:ActiveClientContact[0].scontactname,value:ActiveClientContact[0].nclientcontactcode,item:ActiveClientContact[0]};}dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,ClientSite:ClientSite,ClientContact:ClientContact,loading:false,data:undefined,dataState:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getQuotaionClientSiteComboService(methodParam,selectedRecord){return function(dispatch){var URL=[];URL=rsapi.post(\"/client/getClientContactInfoBySite\",{\"userinfo\":methodParam.inputData.userinfo,\"nclientcode\":methodParam.inputData.nclientcode,\"nclientsitecode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){var ClientContact;var ClientContactMap=constructOptionList(response[0].data||[],\"nclientcontactcode\",\"scontactname\",undefined,undefined,false);ClientContact=ClientContactMap.get(\"OptionList\");var ActiveClientContact=response[0].data.filter(function(x){return x.ndefaultstatus===3;});//  let ActiveClientContact = response[0].data;\nif(ActiveClientContact.length>0){// ClientContact = ClientContactMap.get(\"OptionList\");\nselectedRecord[\"nclientcontactcode\"]={label:ActiveClientContact[0].scontactname,value:ActiveClientContact[0].nclientcontactcode,item:ActiveClientContact[0]};}//   else{\n//     selectedRecord[\"nclientcontactcode\"]=  {\n//         label: \"\",\n//         value: \"\",\n//         item:  \"\"\n//     }\n//   }\ndispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,ClientContact:ClientContact,loading:false,data:undefined,dataState:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getQuotaionProductCategoryComboService(methodParam,selectedRecord){return function(dispatch){var URL=[];URL=rsapi.post(\"/quotation/getProductByCategory\",{\"userinfo\":methodParam.inputData.userinfo,\"nproductcatcode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){var Product;var usertMap=constructOptionList(response[0].data.Product||[],\"nproductcode\",\"sproductname\",undefined,undefined,false);Product=usertMap.get(\"OptionList\");if(Product.length>0){selectedRecord[\"nproductcode\"]={label:response[0].data.Product[0].sproductname,value:response[0].data.Product[0].nproductcode,item:response[0].data.Product[0]};}selectedRecord=_objectSpread({},selectedRecord);dispatch({type:DEFAULT_RETURN,payload:{Product:Product,selectedRecord:selectedRecord,loading:false,data:undefined,dataState:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getProjectTypeComboService(methodParam,selectedRecord){return function(dispatch){var URL=[];URL=rsapi.post(\"/projectmaster/getApprovedProjectMasterByProjectType\",{\"userinfo\":methodParam.inputData.userinfo,\"nprojecttypecode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){var ProjectCode,ProjectMaster=[];// let srfwdate;\nvar usertMap=constructOptionList(response[0].data.ProjectCode||[],\"nprojectmastercode\",\"sprojectcode\",undefined,undefined,false);ProjectCode=usertMap.get(\"OptionList\");if(ProjectCode.length>0){selectedRecord[\"nprojectmastercode\"]={label:response[0].data.SelectedProjectCode.sprojectcode,value:response[0].data.SelectedProjectCode.nprojectmastercode,item:response[0].data.SelectedProjectCode};// srfwdate= rearrangeDateFormat( methodParam.inputData.userinfo, response[0].data.Projectmaster[0].srfwdate); --  New\n//  srfwdate=response[0].data.Projectmaster[0].srfwdate;\nselectedRecord[\"sprojecttitle\"]=response[0].data.Projectmaster[0].sprojecttitle;// selectedRecord[\"srfwdate\"]=srfwdate; -- New\nselectedRecord[\"suserrolename\"]=response[0].data.Projectmaster[0].suserrolename;selectedRecord[\"susername\"]=response[0].data.Projectmaster[0].susername;// selectedRecord[\"nuserrolecode\"]=response[0].data.Projectmaster[0].nuserrolecode;\nselectedRecord[\"nusercode\"]=response[0].data.Projectmaster[0].nusercode;// ProjectMaster={...response[0].data.Projectmaster[0],srfwdate:srfwdate};\n}dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,loading:false,data:undefined,dataState:undefined,ProjectCode:ProjectCode,ProjectMaster:ProjectMaster}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getProjectCodeComboService(methodParam,selectedRecord){return function(dispatch){var URL=[];URL=rsapi.post(\"/projectmaster/getActiveProjectMasterById\",{\"userinfo\":methodParam.inputData.userinfo,\"nprojectmastercode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){// let ProjectMaster=[];  \n// let srfwdate;  \n// srfwdate= rearrangeDateFormat( methodParam.inputData.userinfo, response[0].data.Projectmaster[0].srfwdate);\n// ProjectMaster=response[0].data.SelectedProjectMaster;\nselectedRecord[\"nprojectmastercode\"]={label:response[0].data.SelectedProjectMaster.sprojectcode,value:response[0].data.SelectedProjectMaster.nprojectmastercode,item:response[0].data.SelectedProjectMaster};// srfwdate=response[0].data.SelectedProjectMaster.srfwdate;\n// ProjectMaster={...response[0].data.SelectedProjectMaster,srfwdate:srfwdate};\n// srfwdate= rearrangeDateFormat( methodParam.inputData.userinfo, response[0].data.SelectedProjectMaster.srfwdate); -- New\nselectedRecord[\"sprojecttitle\"]=response[0].data.SelectedProjectMaster.sprojecttitle;// selectedRecord[\"srfwdate\"]=srfwdate; -- New\nselectedRecord[\"suserrolename\"]=response[0].data.SelectedProjectMaster.suserrolename;selectedRecord[\"susername\"]=response[0].data.SelectedProjectMaster.susername;// selectedRecord[\"nuserrolecode\"]=response[0].data.SelectedProjectMaster.nuserrolecode;\nselectedRecord[\"nusercode\"]=response[0].data.SelectedProjectMaster.nusercode;dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,loading:false,data:undefined,dataState:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}//Add Quotation\nexport var addQuotation=function addQuotation(operation,userInfo,ncontrolCode,selectedQuotation){return function(dispatch){if(operation===\"create\"||operation===\"update\"&&selectedQuotation.ntransactionstatus!==transactionStatus.APPROVED&&selectedQuotation.ntransactionstatus!==transactionStatus.RETIRED){dispatch(initRequest(true));var urlArray=[];var selectedRecord={};if(operation===\"create\"||operation===\"update\"){// urlArray.push(rsapi.post(\"clientcategory/getClientCategory\", {\n//     \"userinfo\": userInfo\n// }));\nurlArray.push(rsapi.post(\"quotation/getClientCategory\",{\"userinfo\":userInfo}));// urlArray.push(rsapi.post(\"client/getClientByCategory\", {\n//     \"nclientcatcode\": selectedQuotation.nclientcatcode,\n//     \"userinfo\": userInfo\n// })); \nurlArray.push(rsapi.post(\"projecttype/getProjectType\",{\"userinfo\":userInfo}));urlArray.push(rsapi.post(\"quotation/getQuotationType\",{\"userinfo\":userInfo}));// urlArray.push(rsapi.post(\"productcategory/getProductCategory\", {\n//     \"userinfo\": userInfo \n// })); \nurlArray.push(rsapi.post(\"quotation/getProductCategory\",{\"userinfo\":userInfo}));urlArray.push(rsapi.post(\"quotation/getProductByCategory\",{\"nproductcatcode\":selectedQuotation.nproductcatcode,\"userinfo\":userInfo}));urlArray.push(rsapi.post(\"oem/getOEM\",{\"nproductcode\":null,\"userinfo\":userInfo}));}if(operation===\"update\"){urlArray.push(rsapi.post(\"quotation/getActiveQuotationById\",{\"userinfo\":userInfo,\"nquotationcode\":selectedQuotation.nquotationcode}));urlArray.push(rsapi.post(\"quotation/getSelectedClientDetail\",{\"userinfo\":userInfo,\"nclientcode\":selectedQuotation.nclientcode}));urlArray.push(rsapi.post(\"client/getClientByCategory\",{\"nclientcatcode\":selectedQuotation.nclientcatcode,\"userinfo\":userInfo}));}Axios.all(urlArray).then(function(response){var testData={};var ClientCategory,Client,ProjectType,ProjectMaster,sclientsiteaddress,QuotationType,Product,ProductCategory,OEM,ClientSite,ClientContact;if(operation===\"create\"){ClientCategory=constructOptionList(response[0].data||[],\"nclientcatcode\",\"sclientcatname\",false,false,true).get(\"OptionList\");//       Client = constructOptionList(response[1].data || [], \"nclientcode\", \"sclientname\", false, false, true).get(\"OptionList\");\nProjectType=constructOptionList(response[1].data||[],\"nprojecttypecode\",\"sprojecttypename\",false,false,true).get(\"OptionList\");QuotationType=constructOptionList(response[2].data||[],\"nquotationtypecode\",\"squotationname\",false,false,true).get(\"OptionList\");selectedRecord[\"dquotationdate\"]=new Date();ProductCategory=constructOptionList(response[3].data||[],\"nproductcatcode\",\"sproductcatname\",false,false,true).get(\"OptionList\");OEM=constructOptionList(response[5].data||[],\"noemcode\",\"soemname\",false,false,true).get(\"OptionList\");// Product = constructOptionList(response[5].data.Product || [], \"nproductcode\", \"sproductname\", false, false, true).get(\"OptionList\");\n// selectedRecord[\"dquotationdate\"] = formatInputDate(new Date(), true);\n}else if(operation===\"update\"){var editData=response[6].data.SelectedQuotation;// ProjectMaster=response[5].data.SelectedQuotation;\n// sclientsiteaddress = editData.sclientsiteaddress;\nselectedRecord[\"sclientsiteaddress\"]=editData.sclientsiteaddress;// selectedRecord[\"sinvoiceaddress\"] = editData.sinvoiceaddress;\n// selectedRecord[\"sprojecttitle\"] = editData.sprojecttitle;\nselectedRecord[\"sdescription\"]=editData.sdescription;selectedRecord[\"sdeviationremarks\"]=editData.sdeviationremarks;// selectedRecord[\"suserrolename\"] = editData.suserrolename;\n// selectedRecord[\"susername\"] = editData.susername;\n// selectedRecord[\"nuserrolecode\"] = editData.nuserrolecode;\n// selectedRecord[\"nusercode\"] = editData.nusercode;\nselectedRecord[\"soem\"]=editData.soem;selectedRecord[\"squotationleadtime\"]=editData.squotationleadtime;selectedRecord=_objectSpread({},selectedRecord);var ClientCategoryMap=constructOptionList(response[0].data||[],\"nclientcatcode\",\"sclientcatname\",false,false,true);var ClientMap=constructOptionList(response[8].data.Client||[],\"nclientcode\",\"sclientname\",false,false,true);// ProjectType = constructOptionList(response[2].data || [], \"nprojecttypecode\", \"sprojecttypename\", false, false, true);\n// QuotationType = constructOptionList(response[3].data || [], \"nquotationtypecode\", \"squotationname\", false, false, true)\nvar ProductCategoryMap=constructOptionList(response[3].data||[],\"nproductcatcode\",\"sproductcatname\",false,false,true);var ProductMap=constructOptionList(response[4].data.Product||[],\"nproductcode\",\"sproductname\",false,false,true);var OEMMap=constructOptionList(response[5].data||[],\"noemcode\",\"soemname\",false,false,true);var ClientSiteMap=constructOptionList(response[7].data.ClientSite||[],\"nclientsitecode\",\"sclientsitename\",undefined,undefined,false);var ClientContactMap=constructOptionList(response[7].data.ClientContact||[],\"nclientcontactcode\",\"scontactname\",undefined,undefined,false);ClientCategory=ClientCategoryMap.get(\"OptionList\");Client=ClientMap.get(\"OptionList\");ProductCategory=ProductCategoryMap.get(\"OptionList\");Product=ProductMap.get(\"OptionList\");OEM=OEMMap.get(\"OptionList\");ClientSite=ClientSiteMap.get(\"OptionList\");ClientContact=ClientContactMap.get(\"OptionList\");// selectedRecord[\"nprojecttypecode\"] = {\n//     \"value\": editData[\"nprojecttypecode\"],\n//     \"label\":  editData[\"sprojecttypename\"]\n// };\nselectedRecord[\"nclientcatcode\"]={\"value\":editData[\"nclientcatcode\"],\"label\":editData[\"sclientcatname\"]};selectedRecord[\"nclientcode\"]={\"value\":editData[\"nclientcode\"],\"label\":editData[\"sclientname\"]};// selectedRecord[\"nquotationtypecode\"] = {\n//     \"value\": editData[\"nquotationtypecode\"],\n//     \"label\": editData[\"squotationname\"]\n// };\n// selectedRecord[\"nprojectmastercode\"] = {\n//     \"value\": editData[\"nprojectmastercode\"],\n//     \"label\": editData[\"sprojectcode\"]\n// };\nselectedRecord[\"nproductcatcode\"]={\"value\":editData[\"nproductcatcode\"],\"label\":editData[\"sproductcatname\"]};selectedRecord[\"nproductcode\"]={\"value\":editData[\"nproductcode\"],\"label\":editData[\"sproductname\"]};selectedRecord[\"noemcode\"]={\"value\":editData[\"noemcode\"],\"label\":editData[\"soemname\"]};selectedRecord[\"nclientsitecode\"]={\"value\":editData[\"nclientsitecode\"],\"label\":editData[\"sclientsitename\"]};selectedRecord[\"nclientcontactcode\"]={\"value\":editData[\"nclientcontactcode\"],\"label\":editData[\"scontactname\"]};// selectedRecord[\"srfwdate\"] = rearrangeDateFormat(userInfo,editData.srfwdate);\nselectedRecord[\"dquotationdate\"]=rearrangeDateFormat(userInfo,editData.squotationdate);}dispatch({type:DEFAULT_RETURN,payload:{openModal:true,ProjectType:ProjectType,operation:operation,ClientCategory:ClientCategory,Client:Client,ProjectMaster:ProjectMaster,sclientsiteaddress:sclientsiteaddress,QuotationType:QuotationType,Product:Product,ProductCategory:ProductCategory,OEM:OEM,ClientSite:ClientSite,ClientContact:ClientContact,screenName:\"IDS_QUOTATION\",modalScreenSize:false,selectedRecord:selectedRecord,ncontrolCode:ncontrolCode,testData:testData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data[\"rtn\"]);}});}else if(selectedQuotation.ntransactionstatus===transactionStatus.APPROVED){toast.warn(intl.formatMessage({id:\"IDS_CANNOTEDITAPPROVEDQUOTATION\"}));}else if(selectedQuotation.ntransactionstatus===transactionStatus.RETIRED){toast.warn(intl.formatMessage({id:\"IDS_CANNOTEDITRETIREDQUOTATION\"}));}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};};export var GrossQuotation=function GrossQuotation(operation,userInfo,ncontrolCode,selectedQuotation){return function(dispatch){//  if (operation === \"create\" || (operation === \"update\" && selectedQuotation.ntransactionstatus !== transactionStatus.RETIRED)) {\ndispatch(initRequest(true));var urlArray=[];var selectedRecord={};urlArray.push(rsapi.post(\"discountband/getDiscountBand\",{\"userinfo\":userInfo}));urlArray.push(rsapi.post(\"vatband/getVATBand\",{\"userinfo\":userInfo}));urlArray.push(rsapi.post(\"quotation/getQuotationGrossAmount\",{\"nquotationcode\":selectedQuotation.nquotationcode,\"userinfo\":userInfo}));Axios.all(urlArray).then(function(response){var _ref=[],DiscountBand=_ref.DiscountBand,VATBand=_ref.VATBand;DiscountBand=constructOptionList(response[0].data||[],\"ndiscountbandcode\",\"sdiscountbandname\",false,false,true).get(\"OptionList\");VATBand=constructOptionList(response[1].data||[],\"nvatbandcode\",\"svatbandname\",false,false,true).get(\"OptionList\");var QuotationGrossAmount=response[2].data;if(QuotationGrossAmount[0].ndiscountpercentage>0||QuotationGrossAmount[0].nvatpercentage>0){//  selectedRecord[\"ndiscountamount\"] = QuotationGrossAmount[0].ndiscountamount; \n//   selectedRecord[\"nvatamount\"] = QuotationGrossAmount[0].nvatamount; \nselectedRecord[\"ndiscountpercentage\"]=QuotationGrossAmount[0].ndiscountpercentage;selectedRecord[\"DiscountAmount\"]=QuotationGrossAmount[0].ndiscountamount;selectedRecord[\"nvatpercentage\"]=QuotationGrossAmount[0].nvatpercentage;selectedRecord[\"VatAmount\"]=QuotationGrossAmount[0].nvatamount;selectedRecord[\"TotalNetAmount\"]=QuotationGrossAmount[0].ntotalgrossamount+selectedRecord[\"VatAmount\"]-selectedRecord[\"DiscountAmount\"];if(QuotationGrossAmount[0].ndiscountpercentage>0){selectedRecord[\"ndiscountbandcode\"]={\"value\":QuotationGrossAmount[0][\"ndiscountbandcode\"],\"label\":QuotationGrossAmount[0][\"sdiscountbandname\"]};}if(QuotationGrossAmount[0].nvatpercentage>0){selectedRecord[\"nvatbandcode\"]={\"value\":QuotationGrossAmount[0][\"nvatbandcode\"],\"label\":QuotationGrossAmount[0][\"svatbandname\"]};}}else{/*                 selectedRecord[\"ndiscountpercentage\"]= DiscountBand[0].item.namount;\r\n                    selectedRecord[\"nvatpercentage\"] = VATBand[0].item.namount;\r\n\r\n                    selectedRecord[\"nvatbandcode\"] = {\r\n                        \"value\": VATBand[0][\"value\"],\r\n                        \"label\": VATBand[0][\"label\"]\r\n                    };\r\n\r\n                    selectedRecord[\"ndiscountbandcode\"] = {\r\n                        \"value\": DiscountBand[0][\"value\"],\r\n                        \"label\": DiscountBand[0][\"label\"]\r\n                    }; \r\n\r\n                    selectedRecord[\"DiscountAmount\"]=QuotationGrossAmount[0].ntotalgrossamount * (DiscountBand[0].item.namount/100);\r\n                    selectedRecord[\"VatAmount\"]=QuotationGrossAmount[0].ntotalgrossamount * (VATBand[0].item.namount/100);\r\n     //             selectedRecord[\"TotalNetAmount\"]=QuotationGrossAmount[0].ntotalgrossamount+(selectedRecord[\"DiscountAmount\"]-selectedRecord[\"VatAmount\"]);\r\n                    selectedRecord[\"TotalNetAmount\"]=(QuotationGrossAmount[0].ntotalgrossamount+selectedRecord[\"VatAmount\"])-selectedRecord[\"DiscountAmount\"];\r\n\r\n*/selectedRecord[\"ndiscountpercentage\"]=0;selectedRecord[\"nvatpercentage\"]=0;selectedRecord[\"nvatbandcode\"]=\"\";selectedRecord[\"ndiscountbandcode\"]=\"\";selectedRecord[\"DiscountAmount\"]=0;selectedRecord[\"VatAmount\"]=0;selectedRecord[\"TotalNetAmount\"]=QuotationGrossAmount[0].ntotalgrossamount;}dispatch({type:DEFAULT_RETURN,payload:{openChildModal:true,DiscountBand:DiscountBand,modalScreenSize:false,operation:operation,VATBand:VATBand,QuotationGrossAmount:QuotationGrossAmount,screenName:\"IDS_CALCULATEPRICING\",selectedRecord:selectedRecord,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});//  } else {\n//         toast.warn(intl.formatMessage({id: \"IDS_SELECTDRAFTVERSION\"}));\n//  }\n};};//Quotation Record Click \nexport var getQuotation=function getQuotation(quotationItem,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/quotation/getActiveQuotationById\",{nquotationcode:quotationItem.nquotationcode,userinfo:userInfo}).then(function(response){var masterData1=_objectSpread(_objectSpread({},masterData),response.data);// ...masterData,\n// ...response.data\nmasterData=masterData1;sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{// masterData,\nloading:false,dataState:undefined,masterData:masterData}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{//status 417\ntoast.warn(intl.formatMessage({id:error.response.data[\"rtn\"]}));}});};};export function getQuotationAddTestService(screenName,operation,masterData,userInfo,ncontrolCode){return function(dispatch){if(masterData.SelectedQuotation.ntransactionstatus===transactionStatus.DRAFT){dispatch(initRequest(true));rsapi.post(\"quotation/getQuotationUnmappedTest\",{\"nquotationcode\":masterData.SelectedQuotation[\"nquotationcode\"],userinfo:userInfo}).then(function(response){var masterData1=_objectSpread(_objectSpread({},masterData),response.data);masterData=masterData1;dispatch({type:DEFAULT_RETURN,payload:{QuotationTestList:response.data,masterData:masterData,modalScreenSize:false,openChildModal:true,operation:operation,screenName:screenName,ncontrolCode:ncontrolCode,//selectedRecord, \nloading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};}export function getQuotationPricingEditService(editParam){return function(dispatch){// screenName, operation, masterData, userInfo, ncontrolCode\n//console.log(\"editParam:\", editParam);\nif(editParam.masterData.SelectedQuotation.ntransactionstatus===transactionStatus.DRAFT){dispatch(initRequest(true));var urlArray=[];urlArray.push(rsapi.post(\"discountband/getDiscountBand\",{\"userinfo\":editParam.userInfo}));urlArray.push(rsapi.post(\"quotation/getQuotationPrice\",{\"nquotationcode\":editParam.masterData.SelectedQuotation[\"nquotationcode\"],\"nquotationtestcode\":editParam.editRow?editParam.editRow.nquotationtestcode:null,userinfo:editParam.userInfo}));Axios.all(urlArray).then(function(response){var DiscountBand=[].DiscountBand;var selectedRecord=[];DiscountBand=constructOptionList(response[0].data||[],\"ndiscountbandcode\",\"sdiscountbandname\",false,false,true).get(\"OptionList\");// selectedRecord[\"namount\"]= response[0].data[0].namount;\n// selectedRecord[\"ndiscountbandcode\"]= response[0].data[0].ndiscountbandcode;\nif(editParam.editRow){selectedRecord.push(response[1].data[\"SelectedQuotationPrice\"]);selectedRecord[0][\"ndiscountbandcode\"]=_objectSpread(_objectSpread({},selectedRecord[0][\"ndiscountbandcode\"]),{},{label:selectedRecord[0].sdiscountbandname,value:selectedRecord[0].ndiscountbandcode});}else{selectedRecord=sortData(response[1].data[\"QuotationPrice\"]);response[1].data[\"QuotationPrice\"].forEach(function(item,index){selectedRecord[index][\"ndiscountbandcode\"]=_objectSpread(_objectSpread({},selectedRecord[index][\"ndiscountbandcode\"]),{},{label:item.sdiscountbandname,value:item.ndiscountbandcode});});}dispatch({type:DEFAULT_RETURN,payload:{//pricingTestList:testList, \n//testPriceList:response.data[\"TestPrice\"],\nopenChildModal:true,modalScreenSize:true,operation:editParam.operation,screenName:editParam.screenName,ncontrolCode:editParam.ncontrolCode,selectedRecord:selectedRecord,selectedId:editParam.editRow?editParam.editRow.nquotationtestcode:null,loading:false,quotationDataState:editParam.quotationDataState,DiscountBand:DiscountBand}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};}export var handleRetireQuotation=function handleRetireQuotation(operation,userInfo,ncontrolCode,selectedQuotation){return function(dispatch){if(operation===\"retire\"&&selectedQuotation.ntransactionstatus===transactionStatus.APPROVED){dispatch(initRequest(true));var urlArray=[];urlArray.push(rsapi.post(\"timezone/getTimeZone\"));urlArray.push(rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:userInfo}));Axios.all(urlArray).then(function(response){var selectedRecord={};var timezoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,false);selectedRecord={\"ntzretiredatetime\":{\"value\":userInfo.ntimezonecode,\"label\":userInfo.stimezoneid},\"stzretiredatetime\":userInfo.stimezoneid};var TimeZoneList=timezoneMap.get(\"OptionList\");var popUp=\"IDS_RETIREQUOTATION\";var date=rearrangeDateFormat(userInfo,response[1].data);selectedRecord[\"dretiredatetime\"]=date;var operation=\"retire\";var modalTitle=\"IDS_RETIREQUOTATION\";dispatch({type:DEFAULT_RETURN,payload:{modalShow:true,operation:operation,modalTitle:modalTitle,screenName:\"IDS_QUOTATION\",modalScreenSize:false,TimeZoneList:TimeZoneList,selectedRecord:selectedRecord,ncontrolCode:ncontrolCode,popUp:popUp,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTAPPROVEDQUOTATION\"}));}};};","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/QuotationAction.js"],"names":["rsapi","Axios","toast","DEFAULT_RETURN","initRequest","sortData","constructOptionList","rearrangeDateFormat","formatInputDate","transactionStatus","intl","getreloadQuotation","inputParam","dispatch","post","methodUrl","inputData","then","response","masterData","data","type","payload","loading","dataState","undefined","catch","error","message","getQuotationClientCategoryComboService","methodParam","selectedRecord","URL","userinfo","primarykey","all","Client","sclientsiteaddress","ClientSite","ClientContact","ClientMap","get","status","warn","getQuotaionClientComboService","ClientSiteMap","ClientContactMap","ActiveClientSite","filter","x","ndefaultstatus","ActiveClientContact","length","label","sclientsitename","value","nclientsitecode","item","scontactname","nclientcontactcode","getQuotaionClientSiteComboService","nclientcode","getQuotaionProductCategoryComboService","Product","usertMap","sproductname","nproductcode","getProjectTypeComboService","ProjectCode","ProjectMaster","SelectedProjectCode","sprojectcode","nprojectmastercode","Projectmaster","sprojecttitle","suserrolename","susername","nusercode","getProjectCodeComboService","SelectedProjectMaster","addQuotation","operation","userInfo","ncontrolCode","selectedQuotation","ntransactionstatus","APPROVED","RETIRED","urlArray","push","nproductcatcode","nquotationcode","nclientcatcode","testData","ClientCategory","ProjectType","QuotationType","ProductCategory","OEM","Date","editData","SelectedQuotation","sdescription","sdeviationremarks","soem","squotationleadtime","ClientCategoryMap","ProductCategoryMap","ProductMap","OEMMap","squotationdate","openModal","screenName","modalScreenSize","formatMessage","id","GrossQuotation","DiscountBand","VATBand","QuotationGrossAmount","ndiscountpercentage","nvatpercentage","ndiscountamount","nvatamount","ntotalgrossamount","openChildModal","getQuotation","quotationItem","masterData1","getQuotationAddTestService","DRAFT","QuotationTestList","getQuotationPricingEditService","editParam","editRow","nquotationtestcode","sdiscountbandname","ndiscountbandcode","forEach","index","selectedId","quotationDataState","handleRetireQuotation","timezoneMap","ntimezonecode","stimezoneid","TimeZoneList","popUp","date","modalTitle","modalShow"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport Axios from 'axios';\r\nimport {toast} from 'react-toastify';\r\nimport { DEFAULT_RETURN} from './LoginTypes';\r\nimport { initRequest } from './LoginAction';\r\nimport { sortData ,constructOptionList,rearrangeDateFormat,formatInputDate } from '../components/CommonScript';\r\nimport { transactionStatus } from '../components/Enumeration';\r\nimport { intl } from \"../components/App\"; \r\n\r\nexport const getreloadQuotation = (inputParam) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/quotation/get\" + inputParam.methodUrl, inputParam.inputData)\r\n            .then(response => {\r\n                const masterData = response.data\r\n                sortData(masterData);\r\n                    \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        dataState: undefined,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            // quotation: inputParam.inputData.quotation\r\n                            \r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}\r\n\r\nexport function getQuotationClientCategoryComboService(methodParam,selectedRecord) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let URL = [];\r\n\r\n            URL=rsapi.post(\"/client/getClientByCategory\", { \"userinfo\": methodParam.inputData.userinfo, \"nclientcatcode\":  methodParam.inputData.primarykey  })\r\n\r\n         dispatch(initRequest(true));\r\n\r\n        Axios.all([URL])\r\n\r\n            .then(response => {\r\n\r\n                let Client,sclientsiteaddress,ClientSite,ClientContact;\r\n                \r\n                const ClientMap = constructOptionList(response[0].data.Client || [], \"nclientcode\",\"sclientname\", undefined, undefined, false);              \r\n                // const ClientSiteMap = constructOptionList(response[0].data.ClientSite || [], \"nclientsitecode\",\"sclientsitename\", undefined, undefined, false);              \r\n                // const ClientContactMap = constructOptionList(response[0].data.ClientContact || [], \"nclientcontactcode\",\"scontactname\", undefined, undefined, false);              \r\n\r\n                Client = ClientMap.get(\"OptionList\");\r\n                // ClientSite = ClientSiteMap.get(\"OptionList\");\r\n                // ClientContact = ClientContactMap.get(\"OptionList\");\r\n\r\n                // let ActiveClientSite = response[0].data.ClientSite.filter(x => x.ndefaultstatus === 3);\r\n                // let ActiveClientContact = response[0].data.ClientContact.filter(x => x.ndefaultstatus === 3);\r\n\r\n          \r\n                // if(Client.length>0){\r\n                    \r\n                //     selectedRecord[\"nclientcode\"]=  {\r\n                //         label: response[0].data.selectedClient.sclientname,\r\n                //         value: response[0].data.selectedClient.nclientcode,\r\n                //         item: response[0].data.selectedClient\r\n                //     }\r\n\r\n                //     selectedRecord[\"nclientsitecode\"]=  {\r\n                //         label: ActiveClientSite[0].sclientsitename,\r\n                //         value: ActiveClientSite[0].nclientsitecode,\r\n                //         item:  ActiveClientSite[0]\r\n                //     }\r\n\r\n                //     selectedRecord[\"nclientcontactcode\"]=  {\r\n                //         label: ActiveClientContact[0].scontactname,\r\n                //         value: ActiveClientContact[0].nclientcontactcode,\r\n                //         item: ActiveClientContact[0].selectedClientContact\r\n                //     }\r\n\r\n                // }\r\n                \r\n               selectedRecord = {...selectedRecord}\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n\r\n                     { Client,selectedRecord,ClientSite,ClientContact, loading: false, data: undefined, dataState: undefined,sclientsiteaddress } })\r\n\r\n            })\r\n\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n\r\n                if (error.response.status === 500) {\r\n\r\n                    toast.error(error.message);\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    toast.warn(error.response.data);\r\n\r\n                }\r\n\r\n            })\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function getQuotaionClientComboService(methodParam,selectedRecord) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let URL = [];\r\n\r\n            URL=rsapi.post(\"/quotation/getSelectedClientDetail\", { \"userinfo\": methodParam.inputData.userinfo, \"nclientcode\":  methodParam.inputData.primarykey  })\r\n\r\n         dispatch(initRequest(true));\r\n\r\n        Axios.all([URL])\r\n\r\n            .then(response => {\r\n\r\n                let ClientSite,ClientContact;\r\n\r\n                // let ActiveClientSite =response[0].data.ClientSite.filter(x => x.ndefaultstatus === 3);\r\n                // let ActiveClientSite =response[0].data.ClientSite;\r\n                // let ActiveClientContact = response[0].data.ClientContact.filter(x => x.ndefaultstatus === 3);\r\n                // let ActiveClientContact = response[0].data.ClientContact;\r\n\r\n\r\n                const ClientSiteMap = constructOptionList(response[0].data.ClientSite || [], \"nclientsitecode\",\"sclientsitename\", undefined, undefined, false);              \r\n                const ClientContactMap = constructOptionList(response[0].data.ClientContact || [], \"nclientcontactcode\",\"scontactname\", undefined, undefined, false);  \r\n                \r\n                ClientSite = ClientSiteMap.get(\"OptionList\");\r\n                ClientContact = ClientContactMap.get(\"OptionList\");\r\n\r\n                let ActiveClientSite =response[0].data.ClientSite.filter(x => x.ndefaultstatus === 3);\r\n                let ActiveClientContact = response[0].data.ClientContact.filter(x => x.ndefaultstatus === 3);\r\n\r\n                if(ActiveClientSite.length>0){\r\n\r\n                    selectedRecord[\"nclientsitecode\"]=  {\r\n                        label: ActiveClientSite[0].sclientsitename,\r\n                        value: ActiveClientSite[0].nclientsitecode,\r\n                        item:  ActiveClientSite[0]\r\n                    }\r\n              }\r\n\r\n              if(ActiveClientContact.length>0){\r\n\r\n                selectedRecord[\"nclientcontactcode\"]=  {\r\n                    label: ActiveClientContact[0].scontactname,\r\n                    value: ActiveClientContact[0].nclientcontactcode,\r\n                    item:  ActiveClientContact[0]\r\n                }\r\n\r\n            }\r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n\r\n                     { selectedRecord,ClientSite,ClientContact, loading: false, data: undefined, dataState: undefined } })\r\n\r\n            })\r\n\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n\r\n                if (error.response.status === 500) {\r\n\r\n                    toast.error(error.message);\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    toast.warn(error.response.data);\r\n\r\n                }\r\n\r\n            })\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function getQuotaionClientSiteComboService(methodParam,selectedRecord) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let URL = [];\r\n\r\n            URL=rsapi.post(\"/client/getClientContactInfoBySite\", { \"userinfo\": methodParam.inputData.userinfo, \"nclientcode\":  methodParam.inputData.nclientcode,\"nclientsitecode\":  methodParam.inputData.primarykey  })\r\n\r\n         dispatch(initRequest(true));\r\n\r\n        Axios.all([URL])\r\n\r\n            .then(response => {\r\n\r\n                let ClientContact;\r\n                const ClientContactMap = constructOptionList(response[0].data || [], \"nclientcontactcode\",\"scontactname\", undefined, undefined, false);  \r\n                \r\n                ClientContact = ClientContactMap.get(\"OptionList\");\r\n\r\n                  let ActiveClientContact = response[0].data.filter(x => x.ndefaultstatus === 3);\r\n                //  let ActiveClientContact = response[0].data;\r\n\r\n\r\n              if(ActiveClientContact.length>0){\r\n\r\n                // ClientContact = ClientContactMap.get(\"OptionList\");\r\n                \r\n                selectedRecord[\"nclientcontactcode\"]=  {\r\n                    label: ActiveClientContact[0].scontactname,\r\n                    value: ActiveClientContact[0].nclientcontactcode,\r\n                    item:  ActiveClientContact[0]\r\n                }\r\n\r\n              }\r\n            //   else{\r\n            //     selectedRecord[\"nclientcontactcode\"]=  {\r\n            //         label: \"\",\r\n            //         value: \"\",\r\n            //         item:  \"\"\r\n            //     }\r\n\r\n            //   }\r\n               \r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n\r\n                     { selectedRecord,ClientContact, loading: false, data: undefined, dataState: undefined } })\r\n\r\n            })\r\n\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n\r\n                if (error.response.status === 500) {\r\n\r\n                    toast.error(error.message);\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    toast.warn(error.response.data);\r\n\r\n                }\r\n\r\n            })\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function getQuotaionProductCategoryComboService(methodParam,selectedRecord) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let URL = [];\r\n\r\n            URL=rsapi.post(\"/quotation/getProductByCategory\", { \"userinfo\": methodParam.inputData.userinfo, \"nproductcatcode\":  methodParam.inputData.primarykey  })\r\n\r\n         dispatch(initRequest(true));\r\n\r\n        Axios.all([URL])\r\n\r\n            .then(response => {\r\n\r\n                let Product;\r\n               \r\n                const usertMap = constructOptionList(response[0].data.Product || [], \"nproductcode\",\"sproductname\", undefined, undefined, false);              \r\n\r\n                Product = usertMap.get(\"OptionList\");\r\n\r\n                if(Product.length>0){\r\n                    \r\n                    selectedRecord[\"nproductcode\"]=  {\r\n                        label: response[0].data.Product[0].sproductname,\r\n                        value: response[0].data.Product[0].nproductcode,\r\n                        item: response[0].data.Product[0]\r\n                    }\r\n\r\n                }\r\n                \r\n               selectedRecord = {...selectedRecord}\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n\r\n                    { Product,selectedRecord, loading: false, data: undefined, dataState: undefined } })\r\n            })\r\n\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n\r\n                if (error.response.status === 500) {\r\n\r\n                    toast.error(error.message);\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    toast.warn(error.response.data);\r\n\r\n                }\r\n\r\n            })\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function getProjectTypeComboService(methodParam,selectedRecord) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let URL = [];\r\n\r\n            URL=rsapi.post(\"/projectmaster/getApprovedProjectMasterByProjectType\", { \"userinfo\": methodParam.inputData.userinfo, \"nprojecttypecode\":  methodParam.inputData.primarykey  })\r\n\r\n         dispatch(initRequest(true));\r\n\r\n        Axios.all([URL])\r\n\r\n            .then(response => {\r\n\r\n                let ProjectCode,ProjectMaster=[];    \r\n                // let srfwdate;\r\n\r\n                const usertMap = constructOptionList(response[0].data.ProjectCode || [], \"nprojectmastercode\",\"sprojectcode\", undefined, undefined, false);              \r\n\r\n                ProjectCode = usertMap.get(\"OptionList\");\r\n    \r\n                if(ProjectCode.length>0){\r\n\r\n                    selectedRecord[\"nprojectmastercode\"]=  {\r\n                                label: response[0].data.SelectedProjectCode.sprojectcode,\r\n                                value: response[0].data.SelectedProjectCode.nprojectmastercode,\r\n                                item: response[0].data.SelectedProjectCode}\r\n\r\n                // srfwdate= rearrangeDateFormat( methodParam.inputData.userinfo, response[0].data.Projectmaster[0].srfwdate); --  New\r\n                //  srfwdate=response[0].data.Projectmaster[0].srfwdate;\r\n                    selectedRecord[\"sprojecttitle\"]=response[0].data.Projectmaster[0].sprojecttitle;\r\n                // selectedRecord[\"srfwdate\"]=srfwdate; -- New\r\n                    selectedRecord[\"suserrolename\"]=response[0].data.Projectmaster[0].suserrolename;\r\n                    selectedRecord[\"susername\"]=response[0].data.Projectmaster[0].susername;\r\n                    // selectedRecord[\"nuserrolecode\"]=response[0].data.Projectmaster[0].nuserrolecode;\r\n                    selectedRecord[\"nusercode\"]=response[0].data.Projectmaster[0].nusercode;\r\n                    // ProjectMaster={...response[0].data.Projectmaster[0],srfwdate:srfwdate};\r\n                }\r\n               \r\n\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n\r\n                     { selectedRecord, loading: false, data: undefined, dataState: undefined,ProjectCode,ProjectMaster } })\r\n\r\n            })\r\n\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n\r\n                if (error.response.status === 500) {\r\n\r\n                    toast.error(error.message);\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    toast.warn(error.response.data);\r\n\r\n                }\r\n\r\n            })\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function getProjectCodeComboService(methodParam,selectedRecord) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let URL = [];\r\n\r\n            URL=rsapi.post(\"/projectmaster/getActiveProjectMasterById\", { \"userinfo\": methodParam.inputData.userinfo, \"nprojectmastercode\":  methodParam.inputData.primarykey  })\r\n\r\n         dispatch(initRequest(true));\r\n\r\n        Axios.all([URL])\r\n\r\n            .then(response => {\r\n\r\n                // let ProjectMaster=[];  \r\n                // let srfwdate;  \r\n               \r\n                // srfwdate= rearrangeDateFormat( methodParam.inputData.userinfo, response[0].data.Projectmaster[0].srfwdate);\r\n                \r\n                // ProjectMaster=response[0].data.SelectedProjectMaster;\r\n\r\n                selectedRecord[\"nprojectmastercode\"]=  {\r\n                    label: response[0].data.SelectedProjectMaster.sprojectcode,\r\n                    value: response[0].data.SelectedProjectMaster.nprojectmastercode,\r\n                    item: response[0].data.SelectedProjectMaster}\r\n\r\n                // srfwdate=response[0].data.SelectedProjectMaster.srfwdate;\r\n                // ProjectMaster={...response[0].data.SelectedProjectMaster,srfwdate:srfwdate};\r\n\r\n                // srfwdate= rearrangeDateFormat( methodParam.inputData.userinfo, response[0].data.SelectedProjectMaster.srfwdate); -- New\r\n                selectedRecord[\"sprojecttitle\"]=response[0].data.SelectedProjectMaster.sprojecttitle;\r\n                // selectedRecord[\"srfwdate\"]=srfwdate; -- New\r\n                selectedRecord[\"suserrolename\"]=response[0].data.SelectedProjectMaster.suserrolename;\r\n                selectedRecord[\"susername\"]=response[0].data.SelectedProjectMaster.susername;\r\n                // selectedRecord[\"nuserrolecode\"]=response[0].data.SelectedProjectMaster.nuserrolecode;\r\n                selectedRecord[\"nusercode\"]=response[0].data.SelectedProjectMaster.nusercode;\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload:\r\n\r\n                     { selectedRecord, loading: false, data: undefined, dataState: undefined } })\r\n\r\n            })\r\n\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n\r\n                if (error.response.status === 500) {\r\n\r\n                    toast.error(error.message);\r\n\r\n                }\r\n\r\n                else {\r\n\r\n                    toast.warn(error.response.data);\r\n\r\n                }\r\n\r\n            })\r\n\r\n    }\r\n\r\n}\r\n\r\n//Add Quotation\r\nexport const addQuotation = (operation, userInfo, ncontrolCode,selectedQuotation ) => {\r\n    return function (dispatch) {\r\n        if (operation === \"create\" || (operation === \"update\" && (selectedQuotation.ntransactionstatus !== transactionStatus.APPROVED && selectedQuotation.ntransactionstatus !== transactionStatus.RETIRED))) {\r\n                dispatch(initRequest(true));\r\n            const urlArray = [\r\n            ];\r\n            let selectedRecord = {};\r\n\r\n             if (operation === \"create\" || operation === \"update\") {\r\n\r\n                // urlArray.push(rsapi.post(\"clientcategory/getClientCategory\", {\r\n                //     \"userinfo\": userInfo\r\n                // }));\r\n\r\n                urlArray.push(rsapi.post(\"quotation/getClientCategory\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n\r\n                // urlArray.push(rsapi.post(\"client/getClientByCategory\", {\r\n                //     \"nclientcatcode\": selectedQuotation.nclientcatcode,\r\n                //     \"userinfo\": userInfo\r\n                // })); \r\n\r\n\r\n                urlArray.push(rsapi.post(\"projecttype/getProjectType\", {\r\n                    \"userinfo\": userInfo \r\n                    \r\n                })); \r\n         \r\n                urlArray.push(rsapi.post(\"quotation/getQuotationType\", {\r\n                    \"userinfo\": userInfo \r\n                    \r\n                })); \r\n\r\n                // urlArray.push(rsapi.post(\"productcategory/getProductCategory\", {\r\n                //     \"userinfo\": userInfo \r\n                    \r\n                // })); \r\n\r\n                urlArray.push(rsapi.post(\"quotation/getProductCategory\", {\r\n                    \"userinfo\": userInfo \r\n                    \r\n                })); \r\n\r\n                urlArray.push(rsapi.post(\"quotation/getProductByCategory\", {\r\n                    \"nproductcatcode\": selectedQuotation.nproductcatcode ,\r\n                    \"userinfo\": userInfo \r\n                    \r\n                })); \r\n\r\n                urlArray.push(rsapi.post(\"oem/getOEM\", {\r\n                    \"nproductcode\": null,\r\n                    \"userinfo\": userInfo \r\n                    \r\n                }));\r\n            } \r\n             if (operation === \"update\"){\r\n\r\n                urlArray.push(rsapi.post(\"quotation/getActiveQuotationById\", {\r\n                    \"userinfo\": userInfo,\r\n                    \"nquotationcode\": selectedQuotation.nquotationcode\r\n                }));\r\n\r\n                urlArray.push(rsapi.post(\"quotation/getSelectedClientDetail\", {\r\n                    \"userinfo\": userInfo,\r\n                    \"nclientcode\": selectedQuotation.nclientcode\r\n                }));\r\n\r\n                urlArray.push(rsapi.post(\"client/getClientByCategory\", {\r\n                    \"nclientcatcode\": selectedQuotation.nclientcatcode,\r\n                    \"userinfo\": userInfo\r\n                })); \r\n\r\n            }\r\n\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n\r\n               \r\n                let testData = {};\r\n\r\n                let ClientCategory,Client,ProjectType,ProjectMaster,sclientsiteaddress,\r\n                    QuotationType,Product,ProductCategory,OEM,ClientSite,ClientContact;\r\n                \r\n\r\n              if (operation === \"create\") {\r\n                   \r\n                   \r\n                     ClientCategory = constructOptionList(response[0].data || [], \"nclientcatcode\", \"sclientcatname\", false, false, true).get(\"OptionList\");\r\n                   \r\n              //       Client = constructOptionList(response[1].data || [], \"nclientcode\", \"sclientname\", false, false, true).get(\"OptionList\");\r\n\r\n                     ProjectType = constructOptionList(response[1].data || [], \"nprojecttypecode\", \"sprojecttypename\", false, false, true).get(\"OptionList\");\r\n                     QuotationType = constructOptionList(response[2].data || [], \"nquotationtypecode\", \"squotationname\", false, false, true).get(\"OptionList\");\r\n\r\n                    selectedRecord[\"dquotationdate\"] = new Date();\r\n                    ProductCategory = constructOptionList(response[3].data || [], \"nproductcatcode\", \"sproductcatname\", false, false, true).get(\"OptionList\");\r\n                    OEM = constructOptionList(response[5].data || [], \"noemcode\", \"soemname\", false, false, true).get(\"OptionList\");\r\n                    // Product = constructOptionList(response[5].data.Product || [], \"nproductcode\", \"sproductname\", false, false, true).get(\"OptionList\");\r\n\r\n                    // selectedRecord[\"dquotationdate\"] = formatInputDate(new Date(), true);\r\n                     \r\n\r\n                }else if (operation === \"update\") {\r\n                    \r\n                    \r\n                    const editData = response[6].data.SelectedQuotation;\r\n                    // ProjectMaster=response[5].data.SelectedQuotation;\r\n\r\n                    // sclientsiteaddress = editData.sclientsiteaddress;\r\n                    selectedRecord[\"sclientsiteaddress\"]=editData.sclientsiteaddress;\r\n                    // selectedRecord[\"sinvoiceaddress\"] = editData.sinvoiceaddress;\r\n                    // selectedRecord[\"sprojecttitle\"] = editData.sprojecttitle;\r\n                    selectedRecord[\"sdescription\"] = editData.sdescription;\r\n                    selectedRecord[\"sdeviationremarks\"] = editData.sdeviationremarks;\r\n                    // selectedRecord[\"suserrolename\"] = editData.suserrolename;\r\n                    // selectedRecord[\"susername\"] = editData.susername;\r\n                    // selectedRecord[\"nuserrolecode\"] = editData.nuserrolecode;\r\n                    // selectedRecord[\"nusercode\"] = editData.nusercode;\r\n                    selectedRecord[\"soem\"] = editData.soem;\r\n                    selectedRecord[\"squotationleadtime\"] = editData.squotationleadtime;\r\n                \r\n                    selectedRecord = {...selectedRecord}\r\n\r\n                    const ClientCategoryMap = constructOptionList(response[0].data || [], \"nclientcatcode\", \"sclientcatname\", false, false, true);\r\n                    const ClientMap = constructOptionList(response[8].data.Client || [], \"nclientcode\", \"sclientname\", false, false, true);\r\n                    // ProjectType = constructOptionList(response[2].data || [], \"nprojecttypecode\", \"sprojecttypename\", false, false, true);\r\n                    // QuotationType = constructOptionList(response[3].data || [], \"nquotationtypecode\", \"squotationname\", false, false, true)\r\n                    const ProductCategoryMap = constructOptionList(response[3].data || [], \"nproductcatcode\", \"sproductcatname\", false, false, true);\r\n                    const ProductMap = constructOptionList(response[4].data.Product || [], \"nproductcode\", \"sproductname\", false, false, true);\r\n                    const OEMMap = constructOptionList(response[5].data || [], \"noemcode\", \"soemname\", false, false, true);\r\n                    const ClientSiteMap= constructOptionList(response[7].data.ClientSite || [], \"nclientsitecode\",\"sclientsitename\", undefined, undefined, false);        \r\n                    const ClientContactMap = constructOptionList(response[7].data.ClientContact || [], \"nclientcontactcode\",\"scontactname\", undefined, undefined, false);\r\n                          \r\n\r\n                    ClientCategory = ClientCategoryMap.get(\"OptionList\");\r\n                    Client = ClientMap.get(\"OptionList\");\r\n                    ProductCategory = ProductCategoryMap.get(\"OptionList\");\r\n                    Product = ProductMap.get(\"OptionList\");\r\n                    OEM = OEMMap.get(\"OptionList\");\r\n                    ClientSite = ClientSiteMap.get(\"OptionList\");\r\n                    ClientContact = ClientContactMap.get(\"OptionList\");\r\n\r\n                    // selectedRecord[\"nprojecttypecode\"] = {\r\n                    //     \"value\": editData[\"nprojecttypecode\"],\r\n                    //     \"label\":  editData[\"sprojecttypename\"]\r\n                    // };\r\n\r\n                    selectedRecord[\"nclientcatcode\"] = {\r\n                        \"value\": editData[\"nclientcatcode\"],\r\n                        \"label\": editData[\"sclientcatname\"]\r\n                    };\r\n\r\n                    selectedRecord[\"nclientcode\"] = {\r\n                        \"value\": editData[\"nclientcode\"],\r\n                        \"label\": editData[\"sclientname\"]\r\n                    };\r\n                    \r\n                    // selectedRecord[\"nquotationtypecode\"] = {\r\n                    //     \"value\": editData[\"nquotationtypecode\"],\r\n                    //     \"label\": editData[\"squotationname\"]\r\n                    // };\r\n\r\n                    // selectedRecord[\"nprojectmastercode\"] = {\r\n                    //     \"value\": editData[\"nprojectmastercode\"],\r\n                    //     \"label\": editData[\"sprojectcode\"]\r\n                    // };\r\n                  \r\n                    selectedRecord[\"nproductcatcode\"] = {\r\n                        \"value\": editData[\"nproductcatcode\"],\r\n                        \"label\": editData[\"sproductcatname\"]\r\n                    };\r\n\r\n                    selectedRecord[\"nproductcode\"] = {\r\n                        \"value\": editData[\"nproductcode\"],\r\n                        \"label\": editData[\"sproductname\"]\r\n                    };\r\n\r\n                    selectedRecord[\"noemcode\"] = {\r\n                        \"value\": editData[\"noemcode\"],\r\n                        \"label\": editData[\"soemname\"]\r\n                    };\r\n\r\n                    selectedRecord[\"nclientsitecode\"] = {\r\n                        \"value\": editData[\"nclientsitecode\"],\r\n                        \"label\": editData[\"sclientsitename\"]\r\n                    };\r\n    \r\n                    selectedRecord[\"nclientcontactcode\"] = {\r\n                        \"value\": editData[\"nclientcontactcode\"],\r\n                        \"label\": editData[\"scontactname\"]\r\n                    };\r\n                // selectedRecord[\"srfwdate\"] = rearrangeDateFormat(userInfo,editData.srfwdate);\r\n                selectedRecord[\"dquotationdate\"] = rearrangeDateFormat(userInfo,editData.squotationdate);\r\n                \r\n\r\n                }\r\n                   \r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n  \r\n                            openModal: true,\r\n                            ProjectType,\r\n                            operation: operation,ClientCategory,Client,ProjectMaster,sclientsiteaddress,QuotationType,\r\n                            Product,ProductCategory,OEM,ClientSite,ClientContact,\r\n                            screenName: \"IDS_QUOTATION\",modalScreenSize:false,\r\n                            selectedRecord,\r\n                            ncontrolCode,\r\n                            testData,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data[\"rtn\"]);\r\n                    }\r\n                });\r\n            }\r\n        else if(selectedQuotation.ntransactionstatus === transactionStatus.APPROVED){\r\n\r\n            toast.warn(intl.formatMessage({ id: \"IDS_CANNOTEDITAPPROVEDQUOTATION\" }));\r\n  \r\n        }else if(selectedQuotation.ntransactionstatus === transactionStatus.RETIRED){\r\n\r\n            toast.warn(intl.formatMessage({ id: \"IDS_CANNOTEDITRETIREDQUOTATION\" }));\r\n  \r\n        }else {\r\n                          \r\n            toast.warn(intl.formatMessage({id: \"IDS_SELECTDRAFTVERSION\"}));\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport const GrossQuotation = (operation, userInfo, ncontrolCode,selectedQuotation ) => {\r\n    return function (dispatch) {\r\n    //  if (operation === \"create\" || (operation === \"update\" && selectedQuotation.ntransactionstatus !== transactionStatus.RETIRED)) {\r\n                dispatch(initRequest(true));\r\n            const urlArray = [\r\n            ];\r\n            let selectedRecord = {};\r\n\r\n                urlArray.push(rsapi.post(\"discountband/getDiscountBand\", {\r\n                    \"userinfo\": userInfo\r\n                }));\r\n\r\n                urlArray.push(rsapi.post(\"vatband/getVATBand\", {\r\n                    \"userinfo\": userInfo\r\n                })); \r\n\r\n                urlArray.push(rsapi.post(\"quotation/getQuotationGrossAmount\", {\r\n                    \"nquotationcode\": selectedQuotation.nquotationcode,\r\n                    \"userinfo\": userInfo\r\n                })); \r\n\r\n            \r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n\r\n                let {DiscountBand,VATBand}=[]\r\n                \r\n                DiscountBand = constructOptionList(response[0].data || [], \"ndiscountbandcode\", \"sdiscountbandname\", false, false, true).get(\"OptionList\");\r\n                VATBand = constructOptionList(response[1].data || [], \"nvatbandcode\", \"svatbandname\", false, false, true).get(\"OptionList\");\r\n                const QuotationGrossAmount= response[2].data;\r\n\r\n                if(QuotationGrossAmount[0].ndiscountpercentage >0 || QuotationGrossAmount[0].nvatpercentage >0){\r\n\r\n                   \r\n                //  selectedRecord[\"ndiscountamount\"] = QuotationGrossAmount[0].ndiscountamount; \r\n               //   selectedRecord[\"nvatamount\"] = QuotationGrossAmount[0].nvatamount; \r\n                     \r\n               selectedRecord[\"ndiscountpercentage\"]= QuotationGrossAmount[0].ndiscountpercentage;\r\n               selectedRecord[\"DiscountAmount\"] = QuotationGrossAmount[0].ndiscountamount;\r\n\r\n               selectedRecord[\"nvatpercentage\"] = QuotationGrossAmount[0].nvatpercentage;  \r\n               selectedRecord[\"VatAmount\"] = QuotationGrossAmount[0].nvatamount;\r\n               selectedRecord[\"TotalNetAmount\"]=(QuotationGrossAmount[0].ntotalgrossamount+selectedRecord[\"VatAmount\"])-selectedRecord[\"DiscountAmount\"];\r\n\r\n                   if(QuotationGrossAmount[0].ndiscountpercentage >0) {\r\n\r\n                    selectedRecord[\"ndiscountbandcode\"] = {\r\n                        \"value\": QuotationGrossAmount[0][\"ndiscountbandcode\"],\r\n                        \"label\": QuotationGrossAmount[0][\"sdiscountbandname\"]\r\n                    }\r\n                   }\r\n                    \r\n                   if(QuotationGrossAmount[0].nvatpercentage >0) {\r\n\r\n                    selectedRecord[\"nvatbandcode\"] = {\r\n                        \"value\": QuotationGrossAmount[0][\"nvatbandcode\"],\r\n                        \"label\":  QuotationGrossAmount[0][\"svatbandname\"]\r\n                      }\r\n                    }\r\n                   \r\n                }else {\r\n\r\n   /*                 selectedRecord[\"ndiscountpercentage\"]= DiscountBand[0].item.namount;\r\n                    selectedRecord[\"nvatpercentage\"] = VATBand[0].item.namount;\r\n\r\n                    selectedRecord[\"nvatbandcode\"] = {\r\n                        \"value\": VATBand[0][\"value\"],\r\n                        \"label\": VATBand[0][\"label\"]\r\n                    };\r\n\r\n                    selectedRecord[\"ndiscountbandcode\"] = {\r\n                        \"value\": DiscountBand[0][\"value\"],\r\n                        \"label\": DiscountBand[0][\"label\"]\r\n                    }; \r\n\r\n                    selectedRecord[\"DiscountAmount\"]=QuotationGrossAmount[0].ntotalgrossamount * (DiscountBand[0].item.namount/100);\r\n                    selectedRecord[\"VatAmount\"]=QuotationGrossAmount[0].ntotalgrossamount * (VATBand[0].item.namount/100);\r\n     //             selectedRecord[\"TotalNetAmount\"]=QuotationGrossAmount[0].ntotalgrossamount+(selectedRecord[\"DiscountAmount\"]-selectedRecord[\"VatAmount\"]);\r\n                    selectedRecord[\"TotalNetAmount\"]=(QuotationGrossAmount[0].ntotalgrossamount+selectedRecord[\"VatAmount\"])-selectedRecord[\"DiscountAmount\"];\r\n\r\n*/\r\n                    selectedRecord[\"ndiscountpercentage\"]= 0;\r\n                    selectedRecord[\"nvatpercentage\"] = 0;\r\n                    selectedRecord[\"nvatbandcode\"] =\"\";\r\n                    selectedRecord[\"ndiscountbandcode\"] = \"\";\r\n                    selectedRecord[\"DiscountAmount\"]=0;\r\n                    selectedRecord[\"VatAmount\"]=0;\r\n                    selectedRecord[\"TotalNetAmount\"]=QuotationGrossAmount[0].ntotalgrossamount;\r\n\r\n                }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n  \r\n                            openChildModal: true,\r\n                            DiscountBand,modalScreenSize:false,\r\n                            operation: operation,VATBand,QuotationGrossAmount,\r\n                            screenName: \"IDS_CALCULATEPRICING\",\r\n                            selectedRecord,\r\n                            ncontrolCode,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n        //  } else {\r\n                          \r\n        //         toast.warn(intl.formatMessage({id: \"IDS_SELECTDRAFTVERSION\"}));\r\n\r\n        //  }\r\n    }\r\n}\r\n\r\n//Quotation Record Click \r\nexport const getQuotation = (quotationItem, userInfo, masterData) => {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/quotation/getActiveQuotationById\", {\r\n            nquotationcode: quotationItem.nquotationcode,\r\n                userinfo: userInfo\r\n            })\r\n            .then(response => {\r\n                \r\n\r\n                    let masterData1  = {...masterData,\r\n\r\n                        ...response.data }\r\n\r\n                    // ...masterData,\r\n                    // ...response.data\r\n                    masterData=masterData1\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                       // masterData,\r\n                        loading: false,\r\n                        dataState: undefined,\r\n                        masterData\r\n                        \r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n \r\n                    toast.error(error.message);\r\n          \r\n                  } else {\r\n                    //status 417\r\n                    toast.warn(intl.formatMessage({\r\n          \r\n                      id: error.response.data[\"rtn\"]\r\n          \r\n                    }));\r\n          \r\n                  }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getQuotationAddTestService(screenName, operation, masterData, userInfo, ncontrolCode){\r\n    return function (dispatch) {    \r\n        if (masterData.SelectedQuotation.ntransactionstatus === transactionStatus.DRAFT){     \r\n        \r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"quotation/getQuotationUnmappedTest\",{\r\n            \"nquotationcode\":masterData.SelectedQuotation[\"nquotationcode\"], \r\n            userinfo:userInfo})\r\n\r\n        .then(response=>{\r\n\r\n            let masterData1  = {...masterData,\r\n\r\n                ...response.data }\r\n                masterData=masterData1                       \r\n                dispatch({type: DEFAULT_RETURN, payload:{ \r\n                                                        QuotationTestList:response.data,\r\n                                                        masterData,modalScreenSize:false,\r\n                                                        openChildModal:true,\r\n                                                        operation, screenName, ncontrolCode,\r\n                                                        //selectedRecord, \r\n                                                        loading:false}});\r\n            })\r\n            .catch(error=>{\r\n                dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n                if (error.response.status === 500){\r\n                    toast.error(error.message);\r\n                } \r\n                else{               \r\n                    toast.warn(error.response.data);\r\n                }      \r\n            }) \r\n    }\r\n    else{\r\n        toast.warn(intl.formatMessage({id: \"IDS_SELECTDRAFTVERSION\"}));\r\n    }\r\n}}\r\n\r\n\r\nexport function getQuotationPricingEditService(editParam){\r\n    return function (dispatch) {    \r\n       // screenName, operation, masterData, userInfo, ncontrolCode\r\n       //console.log(\"editParam:\", editParam);\r\n        if (editParam.masterData.SelectedQuotation.ntransactionstatus === transactionStatus.DRAFT){     \r\n        \r\n        dispatch(initRequest(true));\r\n        const urlArray = [\r\n        ];\r\n        \r\n\r\n            urlArray.push(rsapi.post(\"discountband/getDiscountBand\", {\r\n                \"userinfo\": editParam.userInfo\r\n            }));\r\n\r\n            urlArray.push( rsapi.post(\"quotation/getQuotationPrice\",{\"nquotationcode\":editParam.masterData.SelectedQuotation[\"nquotationcode\"], \r\n            \"nquotationtestcode\":editParam.editRow ? editParam.editRow.nquotationtestcode :null,\r\n            userinfo:editParam.userInfo}));\r\n\r\n        \r\n        Axios.all(urlArray)\r\n        .then(response=>{\r\n\r\n            let {DiscountBand}=[];\r\n            let selectedRecord =[];\r\n\r\n            DiscountBand = constructOptionList(response[0].data || [], \"ndiscountbandcode\", \"sdiscountbandname\", false, false, true).get(\"OptionList\");\r\n            \r\n            // selectedRecord[\"namount\"]= response[0].data[0].namount;\r\n            // selectedRecord[\"ndiscountbandcode\"]= response[0].data[0].ndiscountbandcode;\r\n\r\n                \r\n                if (editParam.editRow){\r\n\r\n                    selectedRecord.push(response[1].data[\"SelectedQuotationPrice\"]);\r\n                    selectedRecord[0][\"ndiscountbandcode\"]=  {...selectedRecord[0][\"ndiscountbandcode\"],\r\n    \r\n                            label: selectedRecord[0].sdiscountbandname,\r\n                            value: selectedRecord[0].ndiscountbandcode }\r\n                  \r\n                }\r\n                else{  \r\n\r\n                    selectedRecord = sortData(response[1].data[\"QuotationPrice\"]);   \r\n                    response[1].data[\"QuotationPrice\"].forEach((item, index) => {\r\n                \r\n                        selectedRecord[index][\"ndiscountbandcode\"]=  {...selectedRecord[index][\"ndiscountbandcode\"],\r\n    \r\n                            label: item.sdiscountbandname,\r\n                            value: item.ndiscountbandcode\r\n                            \r\n                        }\r\n                    });\r\n                }\r\n                dispatch({type: DEFAULT_RETURN, payload:{//pricingTestList:testList, \r\n                                                        //testPriceList:response.data[\"TestPrice\"],\r\n                                                        openChildModal:true,modalScreenSize:true,\r\n                                                        operation:editParam.operation,\r\n                                                        screenName:editParam.screenName, \r\n                                                        ncontrolCode:editParam.ncontrolCode,\r\n                                                        selectedRecord, \r\n                                                        selectedId:editParam.editRow ? editParam.editRow.nquotationtestcode :null,\r\n                                                        loading:false,\r\n                                                        quotationDataState:editParam.quotationDataState,\r\n                                                        DiscountBand}});\r\n            })\r\n            .catch(error=>{\r\n                dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n                if (error.response.status === 500){\r\n                    toast.error(error.message);\r\n                } \r\n                else{               \r\n                    toast.warn(error.response.data); \r\n                } \r\n\r\n            }) \r\n    }\r\n    else{\r\n        toast.warn(intl.formatMessage({id: \"IDS_SELECTDRAFTVERSION\"}));\r\n    }\r\n}}\r\n\r\nexport const handleRetireQuotation = (operation, userInfo, ncontrolCode,selectedQuotation) => {\r\n    return function (dispatch) {\r\n        if (operation === \"retire\" && (selectedQuotation.ntransactionstatus === transactionStatus.APPROVED)) {\r\n                dispatch(initRequest(true));\r\n            let urlArray = [];\r\n            urlArray.push(rsapi.post(\"timezone/getTimeZone\"));\r\n            urlArray.push(rsapi.post(\"timezone/getLocalTimeByZone\", {\r\n                userinfo: userInfo\r\n            }));\r\n            \r\n\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n\r\n               \r\n                let selectedRecord = {};\r\n                const timezoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\",\r\n                \"stimezoneid\", undefined, undefined, false);\r\n                selectedRecord = {\r\n                    \"ntzretiredatetime\": {\r\n                        \"value\": userInfo.ntimezonecode,\r\n                        \"label\": userInfo.stimezoneid\r\n                    },\r\n                    \"stzretiredatetime\": userInfo.stimezoneid,\r\n                };\r\n                const TimeZoneList = timezoneMap.get(\"OptionList\");\r\n                const popUp=\"IDS_RETIREQUOTATION\";\r\n                const date = rearrangeDateFormat(userInfo, response[1].data);\r\n                    selectedRecord[\"dretiredatetime\"] = date;\r\n\r\n                \r\n                    const operation = \"retire\";\r\n                    const modalTitle = \"IDS_RETIREQUOTATION\";\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n  \r\n                            modalShow: true,\r\n                            operation: operation,\r\n                            modalTitle: modalTitle,\r\n                            screenName: \"IDS_QUOTATION\",\r\n                            modalScreenSize:false,\r\n                            TimeZoneList: TimeZoneList,\r\n                            selectedRecord,\r\n                            ncontrolCode,\r\n                            popUp:popUp,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n            }\r\n        else {\r\n                          \r\n            toast.warn(intl.formatMessage({id: \"IDS_SELECTAPPROVEDQUOTATION\"}));\r\n\r\n        }\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}