{"ast":null,"code":"var _jsxFileName = \"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\src\\\\pages\\\\dashboard\\\\SqlBuilder.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { injectIntl, FormattedMessage } from 'react-intl';\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrashAlt, faPencilAlt, faTasks, faDatabase } from '@fortawesome/free-solid-svg-icons';\nimport { toast } from 'react-toastify';\nimport ListMaster from '../../components/list-master/list-master.component';\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\nimport Esign from '../audittrail/Esign';\nimport AddQuery from './AddQuery';\nimport AddParameter from './AddParameter';\nimport QueryTypeFilter from './QueryTypeFilter';\nimport { callService, crudMaster, validateEsignCredential, updateStore, getSQLQueryDetail, getSQLQueryComboService, filterColumnData, comboChangeQueryType, executeUserQuery, comboColumnValues, getColumnNamesByTableName, getTablesName, getModuleFormName, getDatabaseTables, executeQuery, getForeignTable, getViewColumns, getMasterData } from '../../actions';\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\nimport { transactionStatus, queryTypeFilter, tableType, ColumnType } from '../../components/Enumeration';\nimport { constructOptionList, getControlMap, showEsign } from '../../components/CommonScript';\nimport { ReadOnlyText, ContentPanel } from '../../components/App.styles';\nimport rsapi from '../../rsapi';\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\nimport { Affix } from 'rsuite';\nimport BreadcrumbComponent from '../../components/Breadcrumb.Component';\nimport { ListWrapper } from '../../components/client-group.styles'; // import ReactTooltip from 'react-tooltip';\n\nimport PortalModalSlideout from '../../components/portal-modal/portal-modal-slideout';\nimport BuildQuery from './BuildQuery';\nimport SqlBuilderNewDesign from './SqlBuilderNewDesign.jsx'; // import {validationData} from './QueryBuilderData';\n// const jsonSql = require('json-sql')({separatedValues: true});\n\nclass SQLBuilder extends Component {\n  constructor(props) {\n    super(props);\n\n    this.userQueryDataStateChange = event => {\n      this.setState({\n        dataStateUserQuery: event.dataState\n      });\n    };\n\n    this.queryGenrate = () => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openPortalModal: true,\n          openModal: false\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.ConfirmDelete = deleteId => {\n      this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({\n        id: \"IDS_DELETE\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_DEFAULTCONFIRMMSG\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_OK\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_CANCEL\"\n      }), () => this.deleteRecord(\"SQLQuery\", this.props.Login.masterData.SelectedSQLQuery, \"delete\", deleteId));\n    };\n\n    this.handleFilterDateChange = (dateName, dateValue) => {\n      const {\n        selectedRecord\n      } = this.state;\n\n      if (dateValue === null) {\n        dateValue = new Date();\n      }\n\n      selectedRecord[dateName] = dateValue;\n      this.generateFilterQuery(selectedRecord);\n    };\n\n    this.onViewComboChange = (comboData, fieldName) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[fieldName] = comboData;\n      const inputParam = {\n        sviewname: comboData.value,\n        selectedRecord,\n        userinfo: this.props.Login.userInfo\n      };\n      this.props.getViewColumns(inputParam);\n    };\n\n    this.onRuleChange = (comboData, fieldName, index) => {\n      const {\n        selectedRecord\n      } = this.state;\n      this.clearSelectedRule(selectedRecord, index);\n      const sqlQuery = this.props.Login.sqlQuery;\n      const oldselectedRecord = selectedRecord;\n      selectedRecord[fieldName] = comboData;\n      const tableData = comboData.items;\n      const mastertablename = tableData.mastertablename;\n\n      if (comboData.items.needmasterdata && mastertablename) {\n        const inputParam = {\n          userinfo: this.props.Login.userInfo,\n          data: {\n            nflag: 2,\n            mastertablename,\n            valuemember: tableData.valuemember,\n            displaymember: tableData.displaymember\n          },\n          selectedRecord,\n          index,\n          optionId: tableData.valuemember\n        };\n        this.props.getMasterData(inputParam);\n      } else if (comboData.items && comboData.items.columntype === ColumnType.COMBO) {\n        if (sqlQuery) {\n          const inputParam = {\n            userinfo: this.props.Login.userInfo,\n            stablename: comboData.items.foriegntablename,\n            scolumnname: comboData.value,\n            selectedRecord,\n            index\n          };\n          this.props.getForeignTable(inputParam, 'column');\n        } else {\n          selectedRecord[`${comboData.items.sforeigncolumnname}_${index}`] = \"\";\n          const inputParam = {\n            data: { ...comboData.items,\n              nflag: 1\n            },\n            userinfo: this.props.Login.userInfo,\n            selectedRecord,\n            index,\n            optionId: comboData.items.sforeigncolumnname\n          };\n          this.props.getMasterData(inputParam);\n        }\n      } else if (comboData.items && comboData.items.columntype === ColumnType.TEXTINPUT && oldselectedRecord[fieldName].items.columntype !== ColumnType.TEXTINPUT) {\n        selectedRecord[\"sinputname_\" + index] = \"\";\n        this.setState({\n          selectedRecord\n        });\n      } else {\n        this.setState({\n          selectedRecord\n        });\n      }\n    };\n\n    this.onMasterDataChange = (comboData, fieldName) => {\n      const {\n        selectedRecord\n      } = this.state;\n      selectedRecord[fieldName] = comboData;\n      this.generateFilterQuery(selectedRecord);\n    };\n\n    this.addRule = type => {\n      const {\n        selectedRecord\n      } = this.state;\n\n      if (type === \"sql\") {\n        let addRuleList = this.props.Login.addRuleList || [];\n\n        if (addRuleList.length > 0) {\n          const arrayLength = addRuleList.length;\n          addRuleList[arrayLength] = arrayLength;\n          selectedRecord[\"button_and_\" + arrayLength] = true;\n          const updateInfo = {\n            typeName: DEFAULT_RETURN,\n            data: {\n              addRuleList,\n              selectedRecord\n            }\n          };\n          this.props.updateStore(updateInfo);\n        } else {\n          addRuleList[0] = 0;\n          this.props.getDatabaseTables(this.props.Login.userInfo, this.props.Login.sqlQuery, {\n            addRuleList,\n            selectedRecord: {}\n          });\n        }\n      } else {\n        if (selectedRecord[\"sviewname\"]) {\n          const viewColumnListByRule = this.props.Login.viewColumnListByRule || [];\n          const addRuleList = this.props.Login.addRuleList || [];\n          const arrayLength = addRuleList.length;\n          addRuleList[arrayLength] = arrayLength;\n          viewColumnListByRule[arrayLength] = this.props.Login.viewColumnList;\n\n          if (arrayLength !== 0) {\n            selectedRecord[\"button_and_\" + arrayLength] = true;\n          }\n\n          const updateInfo = {\n            typeName: DEFAULT_RETURN,\n            data: {\n              addRuleList,\n              viewColumnListByRule,\n              selectedRecord\n            }\n          };\n          this.props.updateStore(updateInfo);\n        } else {\n          toast.info(this.props.intl.formatMessage({\n            id: \"IDS_SELECTVIEW\"\n          }));\n        }\n      }\n    };\n\n    this.getDatabaseTables = () => {\n      const sqlQuery = false;\n      this.props.getDatabaseTables(this.props.Login.userInfo, sqlQuery, {\n        addRuleList: []\n      });\n    };\n\n    this.closePortalModal = () => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openPortalModal: false,\n          openModal: true,\n          addRuleList: [],\n          count: 0\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.onExecuteRule = () => {\n      const {\n        selectedRecord\n      } = this.state;\n\n      if (selectedRecord[\"sgeneratedquery\"]) {\n        const inputParam = {\n          sgeneratedquery: selectedRecord[\"sgeneratedquery\"],\n          selectedRecord,\n          userInfo: this.props.Login.userInfo\n        };\n        this.props.executeQuery(inputParam);\n      } else {\n        toast.info(this.props.intl.formatMessage({\n          id: \"IDS_QUERYNOTAVAILABLE\"\n        }));\n      }\n    };\n\n    this.deleteRule = index => {\n      let addRuleList = this.props.Login.addRuleList;\n      const selectedRecord = this.state.selectedRecord;\n      addRuleList[index] = -1;\n      selectedRecord[`button_and_${index}`] && delete selectedRecord[`button_and_${index}`];\n      selectedRecord[`button_or_${index}`] && delete selectedRecord[`button_or_${index}`];\n      this.clearSelectedRule(selectedRecord, index);\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          addRuleList,\n          selectedRecord\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.clearRule = () => {\n      const sviewname = this.state.selectedRecord.sviewname || \"\";\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          addRuleList: [],\n          selectedRecord: {\n            sviewname\n          },\n          sqlQuery: false\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.resetRule = () => {\n      const sviewname = this.state.selectedRecord.sviewname || \"\";\n      this.setState({\n        selectedRecord: {\n          sviewname\n        }\n      });\n    };\n\n    this.onSymbolChange = (comboData, fieldName, index) => {\n      const {\n        selectedRecord\n      } = this.state;\n      const oldSelectedRecord = selectedRecord[fieldName] || {};\n      selectedRecord[fieldName] = comboData;\n      const items = selectedRecord[\"columnname_\" + index].items;\n      selectedRecord[\"columnname_\" + index][\"items\"][\"needmasterdata\"] = items.needmasterdata ? comboData.items.needmasterdata : false;\n\n      if (comboData.items.symbolType === 2 || comboData.items.symbolType === 3) {\n        selectedRecord[items[\"valuemember\"] + \"_\" + index] && delete selectedRecord[items[\"valuemember\"] + \"_\" + index];\n        selectedRecord[items[\"foreigncolumnname\"] + \"_\" + index] && delete selectedRecord[items[\"foreigncolumnname\"] + \"_\" + index];\n        selectedRecord[\"sinputname_\" + index] && delete selectedRecord[\"sinputname_\" + index];\n      } else if (comboData.items.symbolType === 5 && oldSelectedRecord.items && oldSelectedRecord.items.symbolType !== 5) {\n        selectedRecord[\"snumericinput_\" + index] && delete selectedRecord[\"snumericinput_\" + index];\n        selectedRecord[\"snumericinputtwo_\" + index] && delete selectedRecord[\"snumericinputtwo_\" + index];\n      } else if (comboData.items.symbolType === 6 && oldSelectedRecord.items && oldSelectedRecord.items.symbolType === 1 || comboData.items.symbolType === 1 && oldSelectedRecord.items && oldSelectedRecord.items.symbolType === 6) {\n        selectedRecord[`${items.sforeigncolumnname}_${index}`] && delete selectedRecord[`${items.sforeigncolumnname}_${index}`];\n        selectedRecord[`${items.valuemember}_${index}`] && delete selectedRecord[`${items.valuemember}_${index}`];\n      } else {}\n\n      this.generateFilterQuery(selectedRecord);\n    };\n\n    this.onInputChange = (event, type) => {\n      let selectedRecord = this.state.selectedRecord;\n\n      if (type === 2) {\n        const inputValue = event.target.value;\n\n        if (/^-?\\d*?\\.?\\d*?$/.test(inputValue) || inputValue === \"\") {\n          selectedRecord[event.target.name] = event.target.value;\n        }\n      } else {\n        selectedRecord[event.target.name] = event.target.value;\n      }\n\n      this.generateFilterQuery(selectedRecord);\n    };\n\n    this.generateFilterQuery = selectedRecord => {\n      const addRuleList = this.props.Login.addRuleList; //  jsonSql.setDialect('mssql');\n\n      let databaseCondition = [];\n      let displayCondition = [];\n\n      if (addRuleList.length > 0) {\n        let orDisplayConditionArray = [];\n        let orConditionArray = [];\n        addRuleList.forEach(index => {\n          let symbolObject = {};\n\n          if (selectedRecord[\"columnname_\" + index]) {\n            symbolObject = selectedRecord[\"ssymbolname_\" + index].items || {};\n            const current_button_and = selectedRecord[`button_and_${index}`];\n            const current_button_or = selectedRecord[`button_or_${index}`];\n            const next_button_and = selectedRecord[`button_and_${index + 1}`];\n            const next_button_or = selectedRecord[`button_or_${index + 1}`] ? selectedRecord[`button_or_${index + 1}`] : false;\n            let inputname = selectedRecord[\"sinputname_\" + index];\n            const symbolname = symbolObject.symbol;\n            let numericinput = selectedRecord[\"snumericinput_\" + index];\n            const columnLabel = selectedRecord[\"columnname_\" + index].label;\n            const columnValue = selectedRecord[\"columnname_\" + index].value;\n            const snumericinputtwo = selectedRecord[\"snumericinputtwo_\" + index];\n            let columnName = undefined;\n            const needmasterdata = selectedRecord[\"columnname_\" + index].items.needmasterdata ? selectedRecord[\"columnname_\" + index].items.needmasterdata : false;\n\n            if (selectedRecord[\"columnname_\" + index].items.needmasterdata) {\n              columnName = selectedRecord[\"columnname_\" + index].items.valuemember + \"_\" + index;\n            } else if (selectedRecord[\"columnname_\" + index].items.sforeigncolumnname) {\n              columnName = selectedRecord[\"columnname_\" + index].items.sforeigncolumnname + \"_\" + index;\n            }\n\n            const dateinput = selectedRecord[\"dateinput_\" + index];\n            const dateinputtwo = selectedRecord[\"dateinputtwo_\" + index];\n\n            if (current_button_or || next_button_or || current_button_and && next_button_or) {\n              if (symbolObject && inputname) {\n                if (symbolObject.symbolType === 4) {\n                  const index = symbolObject.replacewith.indexOf('_');\n                  inputname = symbolObject.replacewith.substr(0, index) + inputname + symbolObject.replacewith.substr(index + 1);\n                  orConditionArray.push({\n                    [columnValue]: {\n                      [symbolname]: inputname\n                    }\n                  });\n                  orDisplayConditionArray.push({\n                    [columnLabel]: {\n                      [symbolname]: inputname\n                    }\n                  });\n                } else {\n                  orConditionArray.push({\n                    [columnValue]: {\n                      [symbolname]: inputname\n                    }\n                  });\n                  orDisplayConditionArray.push({\n                    [columnLabel]: {\n                      [symbolname]: inputname\n                    }\n                  });\n                }\n              } else if (symbolObject && numericinput && symbolObject.symbolType !== 5) {\n                orConditionArray.push({\n                  [columnValue]: {\n                    [symbolname]: numericinput\n                  }\n                });\n                orDisplayConditionArray.push({\n                  [columnLabel]: {\n                    [symbolname]: numericinput\n                  }\n                });\n              } else if (symbolObject && symbolObject.symbolType === 2 || symbolObject && symbolObject.symbolType === 3) {\n                orConditionArray.push({\n                  [columnValue]: {\n                    [symbolname]: ''\n                  }\n                });\n                orDisplayConditionArray.push({\n                  [columnLabel]: {\n                    [symbolname]: ''\n                  }\n                });\n              } else if (symbolObject && numericinput && snumericinputtwo && symbolObject.symbolType === 5) {\n                if (symbolObject.symbol === \"\") {\n                  const tempValue = [{\n                    [columnValue]: {\n                      [symbolObject.replacewith[0]]: +numericinput\n                    }\n                  }, {\n                    [columnValue]: {\n                      [symbolObject.replacewith[1]]: snumericinputtwo\n                    }\n                  }];\n                  const tempValue1 = [{\n                    [columnLabel]: {\n                      [symbolObject.replacewith[0]]: +numericinput\n                    }\n                  }, {\n                    [columnLabel]: {\n                      [symbolObject.replacewith[1]]: snumericinputtwo\n                    }\n                  }];\n                  orConditionArray.push(tempValue);\n                  orDisplayConditionArray.push(tempValue1);\n                } else {\n                  const tempValue = [{\n                    [symbolObject.symbol]: [{\n                      [columnValue]: {\n                        [symbolObject.replacewith[0]]: +numericinput\n                      }\n                    }, {\n                      [columnValue]: {\n                        [symbolObject.replacewith[1]]: snumericinputtwo\n                      }\n                    }]\n                  }];\n                  const tempValue1 = [{\n                    [symbolObject.symbol]: [{\n                      [columnLabel]: {\n                        [symbolObject.replacewith[0]]: +numericinput\n                      }\n                    }, {\n                      [columnLabel]: {\n                        [symbolObject.replacewith[1]]: snumericinputtwo\n                      }\n                    }]\n                  }];\n                  orConditionArray.push(tempValue);\n                  orDisplayConditionArray.push(tempValue1);\n                }\n              } else if (symbolObject && symbolObject.symbolType === 6 && columnName && selectedRecord[columnName]) {\n                // if(typeof selectedRecord[columnName] === \"object\") {\n                //     orConditionArray.push({[columnValue]: { [symbolname]: [selectedRecord[columnName].value]} });\n                //     orDisplayConditionArray.push({[columnLabel]: { [symbolname]: [selectedRecord[columnName].label]} });\n                // } else {\n                const data = selectedRecord[columnName] && selectedRecord[columnName].map(item => {\n                  return item.value;\n                }) || [];\n                const data1 = selectedRecord[columnName] && selectedRecord[columnName].map(item => {\n                  return item.label;\n                }) || [];\n\n                if (data.length > 0) {\n                  if (needmasterdata) {\n                    orConditionArray.push({\n                      [selectedRecord[\"columnname_\" + index].items.valuemember]: {\n                        [symbolname]: data\n                      }\n                    });\n                  } else {\n                    orConditionArray.push({\n                      [columnValue]: {\n                        [symbolname]: data\n                      }\n                    });\n                  }\n                }\n\n                if (data1.length > 0) {\n                  orDisplayConditionArray.push({\n                    [columnLabel]: {\n                      [symbolname]: data1\n                    }\n                  });\n                } // }\n\n              } else if (symbolObject && columnName && symbolObject.isInputVisible && selectedRecord[columnName]) {\n                if (needmasterdata) {\n                  orConditionArray.push({\n                    [selectedRecord[\"columnname_\" + index].items.valuemember]: {\n                      [symbolname]: selectedRecord[columnName].value\n                    }\n                  });\n                  orDisplayConditionArray.push({\n                    [columnLabel]: {\n                      [symbolname]: selectedRecord[columnName].label\n                    }\n                  });\n                } else {\n                  orConditionArray.push({\n                    [columnValue]: {\n                      [symbolname]: selectedRecord[columnName].value\n                    }\n                  });\n                  orDisplayConditionArray.push({\n                    [columnLabel]: {\n                      [symbolname]: selectedRecord[columnName].label\n                    }\n                  });\n                }\n              } else if (symbolObject && dateinput && symbolObject.symbolType !== 5) {\n                orConditionArray.push({\n                  [columnValue]: {\n                    [symbolname]: dateinput\n                  }\n                });\n                orDisplayConditionArray.push({\n                  [columnLabel]: {\n                    [symbolname]: dateinput\n                  }\n                });\n              } else if (symbolObject && dateinput && dateinputtwo && symbolObject.symbolType === 5) {\n                if (symbolObject.symbol === \"\") {\n                  const tempValue = [{\n                    [columnValue]: {\n                      [symbolObject.replacewith[0]]: dateinput\n                    }\n                  }, {\n                    [columnValue]: {\n                      [symbolObject.replacewith[1]]: dateinputtwo\n                    }\n                  }];\n                  const tempValue1 = [{\n                    [columnLabel]: {\n                      [symbolObject.replacewith[0]]: dateinput\n                    }\n                  }, {\n                    [columnLabel]: {\n                      [symbolObject.replacewith[1]]: dateinputtwo\n                    }\n                  }];\n                  orConditionArray.push(tempValue);\n                  orDisplayConditionArray.push(tempValue1);\n                } else {\n                  const tempValue = [{\n                    [symbolObject.symbol]: [{\n                      [columnValue]: {\n                        [symbolObject.replacewith[0]]: dateinput\n                      }\n                    }, {\n                      [columnValue]: {\n                        [symbolObject.replacewith[1]]: dateinputtwo\n                      }\n                    }]\n                  }];\n                  const tempValue1 = [{\n                    [symbolObject.symbol]: [{\n                      [columnLabel]: {\n                        [symbolObject.replacewith[0]]: dateinput\n                      }\n                    }, {\n                      [columnLabel]: {\n                        [symbolObject.replacewith[1]]: dateinputtwo\n                      }\n                    }]\n                  }];\n                  orConditionArray.push(tempValue);\n                  orDisplayConditionArray.push(tempValue1);\n                }\n              }\n            } else {\n              if (symbolObject && inputname) {\n                if (symbolObject.symbolType === 4) {\n                  const index = symbolObject.replacewith.indexOf('_');\n                  inputname = symbolObject.replacewith.substr(0, index) + inputname + symbolObject.replacewith.substr(index + 1);\n                  databaseCondition.push({\n                    [columnValue]: {\n                      [symbolname]: inputname\n                    }\n                  });\n                  displayCondition.push({\n                    [columnLabel]: {\n                      [symbolname]: inputname\n                    }\n                  });\n                } else {\n                  databaseCondition.push({\n                    [columnValue]: {\n                      [symbolname]: inputname\n                    }\n                  });\n                  displayCondition.push({\n                    [columnLabel]: {\n                      [symbolname]: inputname\n                    }\n                  });\n                }\n              } else if (symbolObject && numericinput && symbolObject.symbolType !== 5) {\n                databaseCondition.push({\n                  [columnValue]: {\n                    [symbolname]: numericinput\n                  }\n                });\n                displayCondition.push({\n                  [columnLabel]: {\n                    [symbolname]: numericinput\n                  }\n                });\n              } else if (symbolObject && symbolObject.symbolType === 2 || symbolObject && symbolObject.symbolType === 3) {\n                databaseCondition.push({\n                  [columnValue]: {\n                    [symbolname]: ''\n                  }\n                });\n                displayCondition.push({\n                  [columnLabel]: {\n                    [symbolname]: ''\n                  }\n                });\n              } else if (symbolObject && numericinput && snumericinputtwo && symbolObject.symbolType === 5) {\n                if (symbolObject.symbol === \"\") {\n                  const tempValue = [{\n                    [columnValue]: {\n                      [symbolObject.replacewith[0]]: +numericinput\n                    }\n                  }, {\n                    [columnValue]: {\n                      [symbolObject.replacewith[1]]: snumericinputtwo\n                    }\n                  }];\n                  const tempValue1 = [{\n                    [columnLabel]: {\n                      [symbolObject.replacewith[0]]: +numericinput\n                    }\n                  }, {\n                    [columnLabel]: {\n                      [symbolObject.replacewith[1]]: snumericinputtwo\n                    }\n                  }];\n                  databaseCondition.push(tempValue);\n                  displayCondition.push(tempValue1);\n                } else {\n                  const tempValue = [{\n                    [symbolObject.symbol]: [{\n                      [columnValue]: {\n                        [symbolObject.replacewith[0]]: +numericinput\n                      }\n                    }, {\n                      [columnValue]: {\n                        [symbolObject.replacewith[1]]: snumericinputtwo\n                      }\n                    }]\n                  }];\n                  const tempValue1 = [{\n                    [symbolObject.symbol]: [{\n                      [columnLabel]: {\n                        [symbolObject.replacewith[0]]: +numericinput\n                      }\n                    }, {\n                      [columnLabel]: {\n                        [symbolObject.replacewith[1]]: snumericinputtwo\n                      }\n                    }]\n                  }];\n                  databaseCondition.push(tempValue);\n                  displayCondition.push(tempValue1);\n                }\n              } else if (symbolObject && symbolObject.symbolType === 6 && columnName && selectedRecord[columnName]) {\n                // if(typeof selectedRecord[columnName] === \"object\") {\n                //     databaseCondition.push({[columnValue]: { [symbolname]: [selectedRecord[columnName].value]} });\n                //     displayCondition.push({[columnLabel]: { [symbolname]: [selectedRecord[columnName].label]} });\n                // } else {\n                const data = selectedRecord[columnName] && selectedRecord[columnName].map(item => {\n                  return item.value;\n                }) || [];\n                const data1 = selectedRecord[columnName] && selectedRecord[columnName].map(item => {\n                  return item.label;\n                }) || [];\n\n                if (data.length > 0) {\n                  if (needmasterdata) {\n                    databaseCondition.push({\n                      [selectedRecord[\"columnname_\" + index].items.valuemember]: {\n                        [symbolname]: data\n                      }\n                    });\n                  } else {\n                    databaseCondition.push({\n                      [columnValue]: {\n                        [symbolname]: data\n                      }\n                    });\n                  }\n                }\n\n                if (data1.length > 0) {\n                  displayCondition.push({\n                    [columnLabel]: {\n                      [symbolname]: data1\n                    }\n                  });\n                } // }\n\n              } else if (symbolObject && columnName && symbolObject.isInputVisible && selectedRecord[columnName]) {\n                if (needmasterdata) {\n                  databaseCondition.push({\n                    [selectedRecord[\"columnname_\" + index].items.valuemember]: {\n                      [symbolname]: selectedRecord[columnName].value\n                    }\n                  });\n                  displayCondition.push({\n                    [columnLabel]: {\n                      [symbolname]: selectedRecord[columnName].label\n                    }\n                  });\n                } else {\n                  databaseCondition.push({\n                    [columnValue]: {\n                      [symbolname]: selectedRecord[columnName].value\n                    }\n                  });\n                  displayCondition.push({\n                    [columnLabel]: {\n                      [symbolname]: selectedRecord[columnName].label\n                    }\n                  });\n                }\n              } else if (symbolObject && dateinput && symbolObject.symbolType !== 5) {\n                databaseCondition.push({\n                  [columnValue]: {\n                    [symbolname]: dateinput\n                  }\n                });\n                displayCondition.push({\n                  [columnLabel]: {\n                    [symbolname]: dateinput\n                  }\n                });\n              } else if (symbolObject && dateinput && dateinputtwo && symbolObject.symbolType === 5) {\n                if (symbolObject.symbol === \"\") {\n                  const tempValue = [{\n                    [columnValue]: {\n                      [symbolObject.replacewith[0]]: dateinput\n                    }\n                  }, {\n                    [columnValue]: {\n                      [symbolObject.replacewith[1]]: dateinputtwo\n                    }\n                  }];\n                  const tempValue1 = [{\n                    [columnLabel]: {\n                      [symbolObject.replacewith[0]]: dateinput\n                    }\n                  }, {\n                    [columnLabel]: {\n                      [symbolObject.replacewith[1]]: dateinputtwo\n                    }\n                  }];\n                  databaseCondition.push(tempValue);\n                  displayCondition.push(tempValue1);\n                } else {\n                  const tempValue = [{\n                    [symbolObject.symbol]: [{\n                      [columnValue]: {\n                        [symbolObject.replacewith[0]]: dateinput\n                      }\n                    }, {\n                      [columnValue]: {\n                        [symbolObject.replacewith[1]]: dateinputtwo\n                      }\n                    }]\n                  }];\n                  const tempValue1 = [{\n                    [symbolObject.symbol]: [{\n                      [columnLabel]: {\n                        [symbolObject.replacewith[0]]: dateinput\n                      }\n                    }, {\n                      [columnLabel]: {\n                        [symbolObject.replacewith[1]]: dateinputtwo\n                      }\n                    }]\n                  }];\n                  databaseCondition.push(tempValue);\n                  displayCondition.push(tempValue1);\n                }\n              }\n            }\n\n            if (current_button_or && (next_button_and || typeof next_button_and === 'undefined') || typeof next_button_or === 'undefined') {\n              if (orConditionArray.length > 0) {\n                databaseCondition.push({\n                  $or: orConditionArray\n                });\n                orConditionArray = [];\n              }\n\n              if (orDisplayConditionArray.length > 0) {\n                displayCondition.push({\n                  $or: orDisplayConditionArray\n                });\n                orDisplayConditionArray = [];\n              }\n            }\n\n            if (this.props.Login.sqlQuery) {// const databaseSQLQuery = jsonSql.build({\n              //     type: 'select',\n              //     table: selectedRecord[\"stablename_0\"].value,\n              //     condition: databaseCondition\n              // });\n              //     const displaySQLQuery = jsonSql.build({\n              //         type: 'select',\n              //         table: selectedRecord[\"stablename_0\"].label,\n              //         condition: displayCondition\n              //     });\n              //     selectedRecord[\"sgeneratedquery\"] = databaseSQLQuery.query;\n              //     selectedRecord[\"sdisplayquery\"] = displaySQLQuery.query;\n              // } else {\n              //     const databaseSQLQuery = jsonSql.build({\n              //         type: 'select',\n              //         table: selectedRecord[\"sviewname\"].value,\n              //         condition: databaseCondition\n              //     });\n              //     const displaySQLQuery = jsonSql.build({\n              //         type: 'select',\n              //         table: selectedRecord[\"sviewname\"].label,\n              //         condition: displayCondition\n              //     });\n              // jsonSql = jsonSql.setSeparatedValues(true);\n              // selectedRecord[\"sgeneratedquery\"] = databaseSQLQuery.query;\n              // selectedRecord[\"sdisplayquery\"] = displaySQLQuery.query;\n            }\n\n            this.setState({\n              selectedRecord\n            });\n          } else {}\n        });\n      }\n    };\n\n    this.onConditionClick = (fieldName, index) => {\n      let {\n        selectedRecord\n      } = this.state;\n\n      if (fieldName === `button_and_${index}`) {\n        selectedRecord[fieldName] = selectedRecord[fieldName] === true ? false : true;\n        selectedRecord[`button_or_${index}`] = false;\n      } else if (fieldName === `button_or_${index}`) {\n        selectedRecord[fieldName] = selectedRecord[fieldName] === true ? false : true;\n        selectedRecord[`button_and_${index}`] = false;\n      } else {}\n\n      this.generateFilterQuery(selectedRecord);\n    };\n\n    this.onQueryTypeOnclick = () => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          sqlQuery: !this.state.sqlQuery\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.getValidationForEdit = (screenName, operation, primaryKeyName, primaryKeyValue, masterData, userInfo, queryTypeCode, ncontrolCode) => {\n      rsapi.post(\"sqlquery/getValidationForEdit\", {\n        [primaryKeyName]: primaryKeyValue,\n        \"userinfo\": userInfo\n      }).then(response => {\n        if (response.data === \"IDS_SUCCESS\") {\n          this.props.getSQLQueryComboService(screenName, operation, primaryKeyName, primaryKeyValue, masterData, userInfo, queryTypeCode, ncontrolCode);\n        } else if (response.data === \"IDS_QUERYUSEDINDASHBOARD\") {\n          this.confirmAlertForEdit(ncontrolCode);\n        } else {\n          toast.warn(this.props.intl.formatMessage({\n            id: response.data\n          }));\n        }\n      }).catch(error => {\n        if (error.response.status === 500) {\n          toast.error(this.props.intl.formatMessage({\n            id: error.message\n          }));\n        } else {\n          toast.warn(this.props.intl.formatMessage({\n            id: error.response.data\n          }));\n        }\n      });\n    };\n\n    this.confirmAlertForEdit = editId => {\n      this.confirmMessage.confirm(this.props.intl.formatMessage({\n        id: \"IDS_CONFIRMATION\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_CONFIRMATION\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_QUERYUSEDINDASHBOARD\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_OK\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_CANCEL\"\n      }), // () => this.performBatchAction(), \n      () => this.props.getSQLQueryComboService(this.state.queryTypeName, \"update\", \"nsqlquerycode\", this.props.Login.masterData.SelectedSQLQuery.nsqlquerycode, this.props.Login.masterData, this.props.Login.userInfo, //this.state.selectedcombo[\"nquerytypecode\"].value, \n      this.props.Login.masterData.SelectedQueryType.nquerytypecode, editId), undefined, () => this.closeAlert());\n    };\n\n    this.closeAlert = () => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          showConfirmAlertForEdit: false\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.openFilter = () => {\n      let showFilter = !this.props.Login.showFilter;\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          showFilter\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.closeFilter = () => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          showFilter: false\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.onFilterSubmit = () => {\n      this.searchRef.current.value = \"\"; //    const inputParam = {\n      //        inputData: { \"userinfo\": this.props.Login.userInfo, \n      //                    nquerytypecode:this.state.selectedRecord[\"nquerytypecode\"] ? \n      //                                   this.state.selectedRecord[\"nquerytypecode\"].value : 0\n      //                 },        \n      //        userInfo: this.props.Login.userInfo,\n      //        classUrl: \"sqlquery\",\n      //        methodUrl: \"SQLQuery\",\n      //        displayName: \"IDS_SQLBUILDER\",\n      //    };\n      //this.props.callService(inputParam);\n\n      const nquerytypecode = this.state.selectedRecord[\"nquerytypecode\"] ? this.state.selectedRecord[\"nquerytypecode\"].value : this.props.Login.masterData.SelectedQueryType.nquerytypecode;\n      this.props.comboChangeQueryType(nquerytypecode, this.props.Login.masterData, this.props.Login.userInfo);\n    };\n\n    this.handlePageChange = event => {\n      this.setState({\n        skip: event.skip,\n        take: event.take\n      });\n    };\n\n    this.onComboChange = (comboData, fieldName) => {\n      if (comboData != null) {\n        if (fieldName === \"ncharttypecode\") {\n          const selectedRecord = this.state.selectedRecord || {};\n          selectedRecord[fieldName] = comboData;\n          this.setState({\n            selectedRecord\n          });\n        }\n\n        if (fieldName === \"ntabletypecode\" || fieldName === \"nformcode\") {\n          const selectedTableType = this.state.selectedTableType || {};\n          selectedTableType[fieldName] = comboData;\n          this.setState({\n            selectedTableType\n          });\n          const selectedRecord = this.state.selectedRecord || {}; //  this.state.ntableTypeCode=comboData.value;\n\n          if (fieldName === \"ntabletypecode\") {\n            if (comboData.value === tableType.ALL) {\n              selectedRecord[\"nformcode\"] = \"\";\n              this.props.getTablesName(selectedTableType[\"ntabletypecode\"].value, 0, this.props.Login.userInfo);\n            } else {\n              const updateInfor = {\n                typeName: DEFAULT_RETURN,\n                data: {\n                  tableName: []\n                }\n              };\n              this.props.updateStore(updateInfor);\n              this.setState({\n                moduleFormName: []\n              });\n              selectedRecord[\"nformcode\"] = \"\";\n              this.props.getModuleFormName(comboData.value, this.props.Login.userInfo);\n            }\n          }\n\n          if (fieldName === \"nformcode\") {\n            selectedRecord[fieldName] = comboData;\n            this.setState({\n              selectedRecord\n            }); //this.state.nFormCode=comboData.value;\n            //this.getTablesName(selectedRecord[\"ntabletypecode\"].value ,selectedRecord[\"nformcode\"].value)\n\n            this.props.getTablesName(selectedTableType[\"ntabletypecode\"].value, selectedRecord[\"nformcode\"].value, this.props.Login.userInfo);\n          }\n        } else {\n          const selectedcombo = this.state.selectedcombo || {};\n          selectedcombo[fieldName] = comboData;\n          this.setState({\n            selectedcombo\n          });\n        }\n\n        if (fieldName === \"nquerytypecode\") {\n          this.searchRef.current.value = \"\"; // this.props.comboChangeQueryType(comboData.value, this.props.Login.masterData, this.props.Login.userInfo);\n\n          const selectedRecord = this.state.selectedRecord || {};\n          selectedRecord[fieldName] = comboData;\n          const updateInfo = {\n            typeName: DEFAULT_RETURN,\n            data: {\n              selectedRecord: selectedRecord\n            }\n          };\n          this.props.updateStore(updateInfo);\n        }\n      }\n    };\n\n    this.onEsignInputOnChange = event => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (event.target.type === 'checkbox') {\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\n      } else {\n        selectedRecord[event.target.name] = event.target.value;\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onInputOnChange = event => {\n      // const selectedRecord = this.state.selectedRecord || {};\n      let selectedRecord = this.state.selectedRecord || {};\n\n      if (event.target.type === 'checkbox') {\n        if (event.target.name === \"ntransactionstatus\") selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;else selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\n      } else {\n        selectedRecord[event.target.name] = event.target.value;\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onNumericInputChange = (value, name) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[name] = value;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.closeModal = () => {\n      let loadEsign = this.props.Login.loadEsign;\n      let openModal = this.props.Login.openModal;\n      let selectedRecord = this.props.Login.selectedRecord;\n      let showExecute = this.props.Login.showExecute;\n      let showParam = this.props.Login.showParam;\n      let showValidate = this.props.Login.showValidate;\n      let showSave = this.props.Login.showSave;\n      let screenName = this.props.Login.screenName;\n      let operation = this.props.Login.operation;\n      let slideOperation = this.props.Login.slideOperation;\n      let parentPopUpSize = this.props.Login.parentPopUpSize;\n      let resultStatus = this.props.Login.resultStatus;\n\n      if (this.props.Login.loadEsign) {\n        if (this.props.Login.operation === \"delete\") {\n          loadEsign = false;\n          openModal = false;\n          selectedRecord = {};\n        } else {\n          loadEsign = false;\n          selectedRecord['esignpassword'] = \"\";\n          selectedRecord['esigncomments'] = \"\";\n          selectedRecord['esignreason'] = \"\";\n          selectedRecord[\"agree\"] = transactionStatus.NO;\n\n          if (this.state.param.size > 0) {\n            showExecute = true;\n            showSave = true;\n          } else {\n            showExecute = false;\n            showSave = false;\n          }\n\n          parentPopUpSize = \"xl\";\n        }\n      } else {\n        if (this.props.Login.screenName === \"Parameter for Results\" || this.props.Login.screenName === \"Results\") {\n          if (this.props.Login.screenFlag === \"showQuery\") {\n            openModal = true;\n            let queryTypeCode = this.props.Login.masterData.SelectedQueryType.nquerytypecode;\n\n            if (queryTypeCode === queryTypeFilter.LIMSDASHBOARDQUERY) {\n              screenName = this.props.intl.formatMessage({\n                id: \"IDS_LIMSDASHBOARDQUERY\"\n              });\n            } else if (queryTypeCode === queryTypeFilter.LIMSALERTQUERY) {\n              screenName = this.props.intl.formatMessage({\n                id: \"IDS_LIMSALERTQUERY\"\n              });\n            } else if (queryTypeCode === queryTypeFilter.LIMSBARCODEQUERY) {\n              screenName = this.props.intl.formatMessage({\n                id: \"IDS_LIMSBARCODEQUERY\"\n              });\n            } else if (queryTypeCode === queryTypeFilter.LIMSGENERALQUERY) {\n              screenName = this.props.intl.formatMessage({\n                id: \"IDS_LIMSGENERALQUERY\"\n              });\n            } else {\n              screenName = this.props.intl.formatMessage({\n                id: \"IDS_LIMSFILTERQUERY\"\n              });\n            }\n\n            showSave = false;\n          } else {\n            selectedRecord = {};\n            openModal = false;\n            showExecute = false;\n          }\n\n          showParam = false;\n          showValidate = true;\n          operation = slideOperation;\n          slideOperation = \"\";\n          resultStatus = \"\";\n        } else {\n          openModal = false;\n          selectedRecord = {};\n          showExecute = false;\n        }\n      }\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openModal,\n          loadEsign,\n          selectedRecord,\n          showExecute,\n          showParam,\n          operation,\n          screenName,\n          showSave,\n          showValidate,\n          parentPopUpSize,\n          resultStatus,\n          showConfirmAlertForEdit: false\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.upDateComboboxValue = i => Value => {\n      if (Value != null) {\n        // let parameters = [...this.state.parameters]\n        // parameters[i].textValue = Value\n        // this.setState({\n        //     parameters: parameters\n        // })\n        const paramMap = this.state.param || new Map();\n        paramMap.get(i).textValue = Value;\n        this.setState({\n          param: paramMap\n        });\n      }\n    };\n\n    this.handleDateChange = i => date => {\n      // let parameters = [...this.state.parameters]\n      // parameters[i].Datetime = date\n      // this.setState({\n      //     parameters: parameters\n      // })\n      const paramMap = this.state.param || new Map();\n      paramMap.get(i).Datetime = date;\n      this.setState({\n        param: paramMap\n      });\n    };\n\n    this.handleText = i => event => {\n      //let parameters = [...this.state.parameters];\n      //parameters[i].textValue = e.target.value;\n      //this.setState({parameters: parameters});\n      // console.log(parameters)\n      const paramMap = this.state.param || new Map();\n      paramMap.get(event.target.name).textValue = event.target.value;\n      this.setState({\n        param: paramMap\n      });\n    };\n\n    this.executeQuery = (methodUrl, selectedRecord, operation, ncontrolCode) => {\n      const sqlQuery = selectedRecord.ssqlquery;\n\n      if (sqlQuery.length > 10) {\n        if (sqlQuery.toUpperCase().indexOf('INSERT') >= 0 || sqlQuery.toUpperCase().indexOf('UPDATE') >= 0 || sqlQuery.toUpperCase().indexOf('DELETE') >= 0 || sqlQuery.toUpperCase().indexOf('TRUNCATE') >= 0 || sqlQuery.toUpperCase().indexOf('CREATE') >= 0 || sqlQuery.toUpperCase().indexOf('ALTER') >= 0 || sqlQuery.toUpperCase().indexOf('DROP') >= 0) {\n          toast.warn(this.props.intl.formatMessage({\n            id: \"IDS_CANNOTDATAMANIPULATION\"\n          }));\n        } else {\n          if (sqlQuery.indexOf('<@') > 0 || sqlQuery.indexOf('<#') > 0) {\n            let newQuery = sqlQuery;\n            const paramMap = new Map();\n\n            while (newQuery.indexOf(\"<@\") !== -1 || newQuery.indexOf(\"<#\") !== -1) {\n              if (newQuery.indexOf(\"<@\") !== -1) {\n                const paramLabelStartIndex = newQuery.indexOf(\"<@\");\n                const paramLabelEndIndex = newQuery.indexOf(\"@>\");\n                const paramLabel = newQuery.substring(paramLabelStartIndex + 2, paramLabelEndIndex);\n\n                if (paramLabel.indexOf(\"T$\") !== -1) {\n                  let displayName = \"\";\n                  let localParam = \"\";\n                  let tableName = \"\";\n                  newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\n\n                  if (paramLabel.indexOf(\"D$\") !== -1) {\n                    localParam = paramLabel.substring(0, paramLabel.indexOf('D$'));\n                    displayName = paramLabel.substring(paramLabel.indexOf('D$') + 2, paramLabel.indexOf('T$')); //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\n\n                    tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\n                  } else {\n                    localParam = paramLabel.substring(0, paramLabel.indexOf('T$')); // tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\n\n                    tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\n                  }\n\n                  if (localParam.startsWith('d') || localParam.startsWith('D')) {\n                    paramMap.set(\"P$\" + localParam + \"$P\", {\n                      value: 'DateTimePicker',\n                      lableName: localParam,\n                      //ID: param.length, \n                      Datetime: new Date(),\n                      textValue: '',\n                      TableName: tableName,\n                      DisplayParam: displayName,\n                      actuallableName: localParam.substring(1, localParam.length)\n                    });\n                  } else if (paramLabel === 'slanguagetypecode') {\n                    paramMap.set(\"P$\" + localParam + \"$P\", {\n                      value: 'TextBox1',\n                      lableName: localParam,\n                      //ID: param.length, \n                      textValue: this.props.Login.userInfo.slanguagetypecode,\n                      TableName: tableName,\n                      DisplayParam: displayName,\n                      actuallableName: localParam.substring(1, localParam.length)\n                    });\n                  } else {\n                    paramMap.set(\"P$\" + localParam + \"$P\", {\n                      value: 'TextBox1',\n                      lableName: localParam,\n                      //ID: param.length, \n                      textValue: '',\n                      TableName: tableName,\n                      DisplayParam: displayName,\n                      actuallableName: localParam.substring(1, localParam.length)\n                    });\n                  }\n                } else {\n                  newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\n\n                  if (paramLabel === 'slanguagetypecode') {\n                    paramMap.set(\"<@\" + paramLabel + \"@>\", {\n                      value: 'TextBox1',\n                      lableName: paramLabel,\n                      //ID: param.length, \n                      textValue: this.props.Login.userInfo.slanguagetypecode,\n                      TableName: \"\",\n                      DisplayParam: \"\",\n                      actuallableName: paramLabel.substring(1, paramLabel.length)\n                    });\n                  } else {\n                    paramMap.set(\"<@\" + paramLabel + \"@>\", {\n                      value: 'TextBox1',\n                      lableName: paramLabel,\n                      //ID: param.length, \n                      textValue: '',\n                      TableName: \"\",\n                      DisplayParam: \"\",\n                      actuallableName: paramLabel.substring(1, paramLabel.length)\n                    });\n                  }\n                }\n              } else if (newQuery.indexOf(\"<#\") !== -1) {\n                const paramLabelStartIndex = newQuery.indexOf(\"<#\");\n                const paramLabelEndIndex = newQuery.indexOf(\"#>\");\n                const paramLabel = newQuery.substring(paramLabelStartIndex + 2, paramLabelEndIndex);\n\n                if (paramLabel.indexOf(\"T$\") !== -1) {\n                  let displayName = \"\";\n                  let localParam = \"\";\n                  let tableName = \"\";\n                  newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\n\n                  if (paramLabel.indexOf(\"D$\") !== -1) {\n                    localParam = paramLabel.substring(0, paramLabel.indexOf('D$'));\n                    displayName = paramLabel.substring(paramLabel.indexOf('D$') + 2, paramLabel.indexOf('T$')); //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\n\n                    tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\n                  } else {\n                    localParam = paramLabel.substring(0, paramLabel.indexOf('T$')); // tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\n\n                    tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\n                  }\n\n                  if (localParam.startsWith('d') || localParam.startsWith('D')) {\n                    paramMap.set(\"P$\" + localParam + \"$P\", {\n                      value: 'DateTimePicker',\n                      lableName: localParam,\n                      //ID: param.length, \n                      Datetime: new Date(),\n                      textValue: '',\n                      TableName: tableName,\n                      DisplayParam: displayName,\n                      actuallableName: localParam.substring(1, localParam.length)\n                    });\n                  } else if (paramLabel === 'slanguagetypecode') {\n                    paramMap.set(\"P$\" + localParam + \"$P\", {\n                      value: 'TextBox1',\n                      lableName: localParam,\n                      //ID: param.length, \n                      textValue: this.props.Login.userInfo.slanguagetypecode,\n                      TableName: tableName,\n                      DisplayParam: displayName,\n                      actuallableName: localParam.substring(1, localParam.length)\n                    });\n                  } else {\n                    paramMap.set(\"P$\" + localParam + \"$P\", {\n                      value: 'TextBox1',\n                      lableName: localParam,\n                      //ID: param.length, \n                      textValue: '',\n                      TableName: tableName,\n                      DisplayParam: displayName,\n                      actuallableName: localParam.substring(1, localParam.length)\n                    });\n                  }\n                } else {\n                  newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\n                  paramMap.set(\"<#\" + paramLabel + \"#>\", {\n                    value: 'DateTimePicker',\n                    lableName: paramLabel,\n                    actuallableName: paramLabel.substring(1, paramLabel.length),\n                    //ID: param.length, \n                    Datetime: new Date()\n                  });\n                }\n              }\n            }\n\n            const updateInfo = {\n              typeName: DEFAULT_RETURN,\n              data: {\n                screenName: \"Parameter for Results\",\n                openModal: true,\n                showExecute: true,\n                showParam: true,\n                showValidate: false,\n                showSave: false,\n                operation: \"create\",\n                slideOperation: \"\",\n                slideResult: [],\n                slideList: [],\n                screenFlag: \"showParam\",\n                param: paramMap,\n                //param: param, Dparam: Dparam, TBLName: TBLName,\n                parentPopUpSize: \"xl\"\n              }\n            };\n            this.props.updateStore(updateInfo);\n          } else {\n            //query without parameters      \n            const inputParam = {\n              query: selectedRecord.ssqlquery.trim(),\n              screenName: \"Results\",\n              openModal: true,\n              showExecute: false,\n              showParam: true,\n              showValidate: false,\n              showSave: false,\n              noSave: true,\n              operation: \"view\",\n              slideOperation: \"\",\n              slideResult: [],\n              slideList: [],\n              //screenFlag: \"showParam\",\n              screenFlag: \"NoParam\",\n              parentPopUpSize: \"xl\",\n              param: new Map()\n            };\n            this.props.executeUserQuery(inputParam);\n          }\n        }\n      }\n    };\n\n    this.deleteRecord = (methodUrl, selectedRecord, operation, ncontrolCode) => {\n      const postParam = {\n        inputListName: \"SQLQuery\",\n        selectedObject: \"SelectedSQLQuery\",\n        primaryKeyField: \"nsqlquerycode\",\n        primaryKeyValue: this.props.Login.masterData.SelectedSQLQuery.nsqlquerycode,\n        fetchUrl: \"sqlquery/getSQLQuery\",\n        fecthInputObject: {\n          userInfo: this.props.Login.userInfo\n        }\n      };\n      const inputParam = {\n        classUrl: this.props.Login.inputParam.classUrl,\n        methodUrl,\n        postParam,\n        inputData: {\n          [methodUrl.toLowerCase()]: selectedRecord,\n          \"userinfo\": this.props.Login.userInfo,\n          \"sqlquery\": this.props.Login.masterData.SelectedSQLQuery\n        },\n        operation\n      };\n      const masterData = this.props.Login.masterData;\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData\n            },\n            openModal: true,\n            screenName: \"sqlquery\",\n            operation\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\n      }\n    };\n\n    this.onExecuteClick = () => {\n      // let paramVal;\n      let tempQuery = \"\";\n      let paramFlag = true;\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (this.props.Login.screenName === \"Parameter for Results\" && this.state.param.size > 0) {\n        if (selectedRecord != null && selectedRecord.ssqlquery != null && selectedRecord.ssqlquery.length > 0) {\n          tempQuery = selectedRecord.ssqlquery;\n        } else {\n          tempQuery = this.props.Login.masterData.SelectedSQLQuery.ssqlquery;\n        }\n\n        const paramMap = this.state.param || new Map();\n\n        for (let parameterMap of paramMap.entries()) {\n          const parameter = parameterMap[0];\n          const parameterDetail = parameterMap[1];\n          let paramVal = \"\"; //console.log(\"para detail:\", parameterDetail);\n\n          if (parameter.indexOf('<#') !== -1) {\n            if (parameterDetail.Datetime !== null) {\n              paramVal = parameterDetail.Datetime.getFullYear() + \"-\";\n\n              if (parameterDetail.Datetime.getMonth().toString().length > 1) {\n                paramVal = paramVal + parseInt(parameterDetail.Datetime.getMonth() + 1) + \"-\";\n              } else if (parameterDetail.Datetime.getMonth() === 9) {\n                paramVal = paramVal + parseInt(parameterDetail.Datetime.getMonth() + 1) + \"-\";\n              } else {\n                paramVal = paramVal + \"0\" + parseInt(parameterDetail.Datetime.getMonth() + 1) + \"-\";\n              }\n\n              if (parameterDetail.Datetime.getDate().toString().length > 1) {\n                paramVal = paramVal + parameterDetail.Datetime.getDate();\n              } else {\n                paramVal = paramVal + \"0\" + parameterDetail.Datetime.getDate();\n              }\n            }\n\n            if (paramVal === undefined) {\n              paramFlag = false;\n              tempQuery = tempQuery.replaceAll(parameter, null);\n            } else if (paramVal.trim().length > 0) {\n              //tempQuery = tempQuery.replace(parameter, \"P#\" + paramVal + \"$P\");\n              tempQuery = tempQuery.replaceAll(parameter, \"'\" + paramVal + \"'\");\n            } else {\n              paramFlag = false;\n            }\n          } else {\n            paramVal = parameterDetail.textValue;\n\n            if (paramVal !== \"\") {\n              if (parameter.indexOf('<@') !== -1) {\n                if (tempQuery.indexOf(parameterDetail.lableName.trim() + 'D$') > 0) {\n                  tempQuery = tempQuery.replaceAll('P$' + parameterDetail.lableName.trim() + 'D$' + parameterDetail.DisplayParam + 'T$' + parameterDetail.TableName + '$P', \"'\" + paramVal + \"'\");\n                } else if (tempQuery.indexOf(parameterDetail.lableName.trim() + 'T$') > 0) {\n                  tempQuery = tempQuery.replaceAll('P$' + parameterDetail.lableName.trim() + 'T$' + parameterDetail.TableName + '$P', \"'\" + paramVal + \"'\");\n                } else {\n                  tempQuery = tempQuery.replaceAll(parameter, \"'\" + paramVal + \"'\");\n                }\n              } else {\n                if (tempQuery.indexOf(parameterDetail.lableName.trim() + 'D$') > 0) {\n                  tempQuery = tempQuery.replaceAll('P$' + parameterDetail.lableName.trim() + 'D$' + parameterDetail.DisplayParam.trim() + 'T$' + parameterDetail.TableName + '$P', paramVal);\n                } else if (tempQuery.indexOf(parameterDetail.lableName.trim() + 'T$') > 0) {\n                  tempQuery = tempQuery.replaceAll('P$' + parameterDetail.lableName.trim() + 'T$' + parameterDetail.TableName + '$P', paramVal);\n                } else {\n                  tempQuery = tempQuery.replaceAll(parameter, paramVal);\n                }\n              }\n            } else {\n              paramFlag = false;\n            }\n          }\n        }\n\n        if (paramFlag === true) {\n          //console.log(\"temp:\", tempQuery);\n          const inputParam = {\n            slideOperation: this.props.Login.slideOperation,\n            screenFlag: this.props.Login.screenFlag,\n            query: tempQuery.trim(),\n            userInfo: this.props.Login.userInfo,\n            data: {}\n          };\n          this.props.executeUserQuery(inputParam); //this.props.executeUserQuery(tempQuery.trim(), this.props.Login.screenFlag, this.props.Login.slideOperation, this.props.Login.userInfo);\n        } else {\n          toast.info(this.props.intl.formatMessage({\n            id: \"IDS_ENTERPAREMETRS\"\n          }));\n        }\n      } else {\n        if (selectedRecord.ssqlquery !== null && selectedRecord.ssqlquery.length > 0) {\n          const sqlQuery = selectedRecord.ssqlquery;\n\n          if (sqlQuery.toUpperCase().indexOf('INSERT') >= 0 || sqlQuery.toUpperCase().indexOf('UPDATE') >= 0 || sqlQuery.toUpperCase().indexOf('DELETE') >= 0 || sqlQuery.toUpperCase().indexOf('TRUNCATE') >= 0 || sqlQuery.toUpperCase().indexOf('CREATE') >= 0 || sqlQuery.toUpperCase().indexOf('ALTER') >= 0 || sqlQuery.toUpperCase().indexOf('DROP') >= 0) {\n            toast.warn(this.props.intl.formatMessage({\n              id: \"IDS_CANNOTDATAMANIPULATION\"\n            }));\n          } else {\n            if (sqlQuery.indexOf('<@') > 0 || sqlQuery.indexOf('<#') > 0) {\n              let newQuery = sqlQuery;\n              const paramMap = new Map();\n\n              while (newQuery.indexOf(\"<@\") !== -1 || newQuery.indexOf(\"<#\") !== -1) {\n                if (newQuery.indexOf(\"<@\") !== -1) {\n                  const paramLabelStartIndex = newQuery.indexOf(\"<@\");\n                  const paramLabelEndIndex = newQuery.indexOf(\"@>\");\n                  const paramLabel = newQuery.substring(paramLabelStartIndex + 2, paramLabelEndIndex);\n\n                  if (paramLabel.indexOf(\"T$\") !== -1) {\n                    let displayName = \"\";\n                    let localParam = \"\";\n                    let tableName = \"\";\n                    newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\n\n                    if (paramLabel.indexOf(\"D$\") !== -1) {\n                      localParam = paramLabel.substring(0, paramLabel.indexOf('D$'));\n                      displayName = paramLabel.substring(paramLabel.indexOf('D$') + 2, paramLabel.indexOf('T$')); //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\n\n                      tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\n                    } else {\n                      localParam = paramLabel.substring(0, paramLabel.indexOf('T$')); //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\n\n                      tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\n                    }\n\n                    if (localParam.startsWith('d') || localParam.startsWith('D')) {\n                      paramMap.set(\"P$\" + localParam + \"$P\", {\n                        value: 'DateTimePicker',\n                        lableName: localParam,\n                        //ID: param.length, \n                        Datetime: new Date(),\n                        textValue: '',\n                        TableName: tableName,\n                        DisplayParam: displayName,\n                        actuallableName: localParam.substring(1, localParam.length)\n                      });\n                    } else if (localParam === 'slanguagetypecode') {\n                      paramMap.set(\"P$\" + localParam + \"$P\", {\n                        value: 'TextBox1',\n                        lableName: localParam,\n                        //ID: param.length, \n                        textValue: this.props.Login.userInfo.slanguagetypecode,\n                        TableName: tableName,\n                        DisplayParam: displayName,\n                        actuallableName: localParam.substring(1, localParam.length)\n                      });\n                    } else {\n                      paramMap.set(\"P$\" + localParam + \"$P\", {\n                        value: 'TextBox1',\n                        lableName: localParam,\n                        //ID: param.length, \n                        textValue: '',\n                        TableName: tableName,\n                        DisplayParam: displayName,\n                        actuallableName: localParam.substring(1, localParam.length)\n                      });\n                    }\n                  } else {\n                    newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\n\n                    if (paramLabel === 'slanguagetypecode') {\n                      paramMap.set(\"<@\" + paramLabel + \"@>\", {\n                        value: 'TextBox1',\n                        lableName: paramLabel,\n                        //ID: param.length, \n                        textValue: this.props.Login.userInfo.slanguagetypecode,\n                        TableName: \"\",\n                        DisplayParam: \"\",\n                        actuallableName: paramLabel.substring(1, paramLabel.length)\n                      });\n                    } else {\n                      paramMap.set(\"<@\" + paramLabel + \"@>\", {\n                        value: 'TextBox1',\n                        lableName: paramLabel,\n                        //ID: param.length, \n                        textValue: '',\n                        TableName: \"\",\n                        DisplayParam: \"\",\n                        actuallableName: paramLabel.substring(1, paramLabel.length)\n                      });\n                    }\n                  }\n                } else if (newQuery.indexOf(\"<#\") !== -1) {\n                  const paramLabelStartIndex = newQuery.indexOf(\"<#\");\n                  const paramLabelEndIndex = newQuery.indexOf(\"#>\");\n                  const paramLabel = newQuery.substring(paramLabelStartIndex + 2, paramLabelEndIndex);\n\n                  if (paramLabel.indexOf(\"T$\") !== -1) {\n                    let displayName = \"\";\n                    let localParam = \"\";\n                    let tableName = \"\";\n                    newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\n\n                    if (paramLabel.indexOf(\"D$\") !== -1) {\n                      localParam = paramLabel.substring(0, paramLabel.indexOf('D$'));\n                      displayName = paramLabel.substring(paramLabel.indexOf('D$') + 2, paramLabel.indexOf('T$')); //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\n\n                      tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\n                    } else {\n                      localParam = paramLabel.substring(0, paramLabel.indexOf('T$')); //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\n\n                      tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\n                    }\n\n                    if (localParam.startsWith('d') || localParam.startsWith('D')) {\n                      paramMap.set(\"P$\" + localParam + \"$P\", {\n                        value: 'DateTimePicker',\n                        lableName: localParam,\n                        //ID: param.length, \n                        Datetime: new Date(),\n                        textValue: '',\n                        TableName: tableName,\n                        DisplayParam: displayName,\n                        actuallableName: localParam.substring(1, localParam.length)\n                      });\n                    } else if (localParam === 'slanguagetypecode') {\n                      paramMap.set(\"P$\" + localParam + \"$P\", {\n                        value: 'TextBox1',\n                        lableName: localParam,\n                        //ID: param.length, \n                        textValue: this.props.Login.userInfo.slanguagetypecode,\n                        TableName: tableName,\n                        DisplayParam: displayName,\n                        actuallableName: localParam.substring(1, localParam.length)\n                      });\n                    } else {\n                      paramMap.set(\"P$\" + localParam + \"$P\", {\n                        value: 'TextBox1',\n                        lableName: localParam,\n                        //ID: param.length, \n                        textValue: '',\n                        TableName: tableName,\n                        DisplayParam: displayName,\n                        actuallableName: localParam.substring(1, localParam.length)\n                      });\n                    }\n                  } else {\n                    newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\n                    paramMap.set(\"<#\" + paramLabel + \"#>\", {\n                      lableName: paramLabel,\n                      value: 'DateTimePicker',\n                      //ID: param.length, \n                      Datetime: new Date(),\n                      textValue: '',\n                      TableName: \"\",\n                      DisplayParam: \"\",\n                      actuallableName: paramLabel\n                    });\n                  }\n                }\n              }\n\n              const updateInfo = {\n                typeName: DEFAULT_RETURN,\n                data: {\n                  screenName: \"Parameter for Results\",\n                  showExecute: true,\n                  showSave: true,\n                  showParam: true,\n                  showValidate: false,\n                  slideOperation: this.props.Login.operation,\n                  slideResult: [],\n                  slideList: [],\n                  screenFlag: \"showQuery\",\n                  param: paramMap // Dparam: Dparam, TBLName: TBLName\n\n                }\n              };\n              this.props.updateStore(updateInfo);\n            } else {\n              //query without parameters      \n              const inputParam = {\n                screenName: \"Results\",\n                query: selectedRecord.ssqlquery.trim(),\n                userInfo: this.props.Login.userInfo,\n                slideOperation: this.props.Login.operation,\n                screenFlag: \"showQuery\",\n                data: {\n                  showExecute: false,\n                  showSave: false,\n                  showParam: true,\n                  showValidate: false,\n                  noSave: false,\n                  operation: \"view\",\n                  param: new Map(),\n                  screenName: \"Results\",\n                  slideOperation: this.props.Login.operation,\n                  screenFlag: \"showQuery\"\n                }\n              };\n              this.props.executeUserQuery(inputParam);\n            }\n          }\n        }\n      }\n    };\n\n    this.onSaveClick = (saveType, formRef) => {\n      if (this.props.Login.resultStatus === \"Success\") {\n        let operation = this.props.Login.operation;\n        let inputData = [];\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\n        let postParam = undefined;\n\n        if (operation === \"update\" || operation === \"view\" && this.props.Login.slideOperation !== \"create\") {\n          // edit\n          operation = \"update\";\n          postParam = {\n            inputListName: \"SQLQuery\",\n            selectedObject: \"SelectedSQLQuery\",\n            primaryKeyField: \"nsqlquerycode\"\n          };\n          let selectedRecord = { ...this.state.selectedRecord\n          };\n          delete selectedRecord.nformcode;\n          inputData[\"sqlquery\"] = selectedRecord;\n          this.queryFieldList.map(item => {\n            return inputData[\"sqlquery\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\n          });\n        } else {\n          //add               \n          inputData[\"sqlquery\"] = {\n            \"nsitecode\": this.props.Login.userInfo.nmastersitecode\n          };\n          operation = \"create\";\n          this.queryFieldList.map(item => {\n            return inputData[\"sqlquery\"][item] = this.state.selectedRecord[item];\n          });\n        }\n\n        if (inputData[\"sqlquery\"].hasOwnProperty('esignpassword')) {\n          if (inputData[\"sqlquery\"]['esignpassword'] === '') {\n            delete inputData[\"sqlquery\"]['esigncomments'];\n            delete inputData[\"sqlquery\"]['esignpassword'];\n            delete inputData[\"sqlquery\"]['agree'];\n          }\n        }\n\n        inputData[\"sqlquery\"][\"ncharttypecode\"] = this.state.selectedRecord[\"ncharttypecode\"] ? this.state.selectedRecord[\"ncharttypecode\"].value : \"-1\";\n        inputData[\"sqlquery\"][\"nquerytypecode\"] = this.props.Login.masterData.SelectedQueryType.nquerytypecode; ///code removed\n\n        const inputParam = {\n          classUrl: \"sqlquery\",\n          methodUrl: \"SQLQuery\",\n          inputData: inputData,\n          operation,\n          saveType,\n          formRef,\n          postParam,\n          searchRef: this.searchRef\n        };\n        const masterData = this.props.Login.masterData;\n\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n          const updateInfo = {\n            typeName: DEFAULT_RETURN,\n            data: {\n              loadEsign: true,\n              screenData: {\n                inputParam,\n                masterData\n              },\n              saveType,\n              parentPopUpSize: \"lg\"\n            }\n          };\n          this.props.updateStore(updateInfo);\n        } else {\n          this.props.crudMaster(inputParam, masterData, \"openModal\");\n        }\n      } else {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_INAVLIDDATA\"\n        }));\n      }\n    };\n\n    this.validateEsign = () => {\n      const inputParam = {\n        inputData: {\n          \"userinfo\": { ...this.props.Login.userInfo,\n            sreason: this.state.selectedRecord[\"esigncomments\"],\n            nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\n            spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label\n          },\n          password: this.state.selectedRecord[\"esignpassword\"]\n        },\n        screenData: this.props.Login.screenData\n      };\n      this.props.validateEsignCredential(inputParam, \"openModal\");\n    };\n\n    this.reloadData = () => {\n      this.searchRef.current.value = \"\"; // const inputParam = {\n      //     inputData: { \"userinfo\": this.props.Login.userInfo },\n      //     classUrl: \"sqlquery\",\n      //     methodUrl: \"SQLQuery\",\n      //     displayName: \"IDS_SQLBUILDER\",\n      //     userInfo: this.props.Login.userInfo\n      // };\n      // this.props.callService(inputParam);\n\n      let nquerytypecode = this.props.Login.masterData.SelectedQueryType ? this.props.Login.masterData.SelectedQueryType.nquerytypecode : 0;\n      this.props.comboChangeQueryType(nquerytypecode, this.props.Login.masterData, this.props.Login.userInfo);\n    };\n\n    const dataStateUserQuery = {\n      skip: 0,\n      take: 10\n    };\n    this.state = {\n      selectedRecord: {},\n      error: \"\",\n      // modalIsOpen: false,\n      parameters: [],\n      // objparam: [],\n      // objDparam: [],\n      queryName: '',\n      // queryResult: [],\n      userRoleControlRights: [],\n      controlMap: new Map(),\n      dataStateUserQuery: dataStateUserQuery,\n      queryTypeName: '',\n      selectedcombo: [],\n      selectedTableType: [],\n      moduleFormName: [],\n      ntableTypeCode: -1,\n      nFormCode: -1,\n      queryType: [],\n      tableType: [],\n      chartList: [],\n      skip: 0,\n      take: this.props.Login.settings ? this.props.Login.settings[3] : 25,\n      //tableName : undefined,tableList:[]\n      outputColumns: [],\n      selectedTableList: [],\n      tableColumnList: [],\n      foreignTableColumnList: [],\n      joinTableList: [],\n      symbolsList: [],\n      foreignTableList: [],\n      count: 0,\n      foreignTableCount: [],\n      selectedforeignTableList: [],\n      filterColumnList: [],\n      sqlQuery: false,\n      // viewColumnList: [],\n      switchRecord: {}\n    };\n    this.searchRef = React.createRef();\n    this.filtersearchRef = React.createRef();\n    this.confirmMessage = new ConfirmMessage(); // this.dropItemRef = React.createRef(); \n\n    this.queryFieldList = ['nquerytypecode', 'ssqlqueryname', 'ssqlquery', 'sscreenrecordquery', 'sscreenheader', 'svaluemember', 'sdisplaymember', 'ncharttypecode']; // this.queryList = [];\n\n    this.searchFieldList = [\"ssqlqueryname\", \"ssqlquery\", \"sscreenheader\", \"svaluemember\", \"sdisplaymember\", \"squerytypename\", \"schartname\"];\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.Login.masterStatus !== \"\") {\n      if (props.Login.errorCode === 417 || props.Login.errorCode === 409) {\n        toast.warn(props.Login.masterStatus);\n        props.Login.masterStatus = \"\";\n      }\n    }\n\n    if (props.Login.error !== state.error) {\n      toast.error(props.Login.error);\n      props.Login.error = \"\";\n    }\n\n    if (props.Login.selectedRecord === undefined) {\n      return {\n        selectedRecord: {}\n      };\n    }\n\n    return null;\n  }\n\n  render() {\n    const {\n      masterData,\n      userInfo\n    } = this.props.Login;\n    const addId = this.state.controlMap.has(\"AddSQLQuery\") && this.state.controlMap.get(\"AddSQLQuery\").ncontrolcode;\n    const editId = this.state.controlMap.has(\"EditSQLQuery\") && this.state.controlMap.get(\"EditSQLQuery\").ncontrolcode;\n    const deleteId = this.state.controlMap.has(\"DeleteSQLQuery\") && this.state.controlMap.get(\"DeleteSQLQuery\").ncontrolcode;\n    const executeId = this.state.controlMap.has(\"ExecuteSQLQuery\") && this.state.controlMap.get(\"ExecuteSQLQuery\").ncontrolcode;\n    const filterParam = {\n      inputListName: \"SQLQuery\",\n      selectedObject: \"SelectedSQLQuery\",\n      primaryKeyField: \"nsqlquerycode\",\n      fetchUrl: \"sqlquery/getSQLQuery\",\n      fecthInputObject: {\n        userinfo: this.props.Login.userInfo\n      },\n      masterData: this.props.Login.masterData,\n      searchFieldList: this.searchFieldList\n    };\n    this.validationColumnList = [{\n      \"idsName\": \"IDS_SQLQUERYNAME\",\n      \"dataField\": \"ssqlqueryname\",\n      \"width\": \"200px\",\n      \"mandatory\": true\n    }, {\n      \"idsName\": \"IDS_SQLQUERY\",\n      \"dataField\": \"ssqlquery\",\n      \"width\": \"200px\",\n      \"mandatory\": true\n    } // { \"idsName\": \"IDS_SCREENHEADER\", \"dataField\": \"sscreenheader\", \"width\": \"200px\",\"mandatory\": true }, \n    // { \"idsName\": \"IDS_SVALUEMEMBER\", \"dataField\": \"svaluemember\", \"width\": \"200px\",\"mandatory\": true },\n    // { \"idsName\": \"IDS_SDISPLAYMEMBER\", \"dataField\": \"sdisplaymember\", \"width\": \"200px\",\"mandatory\": true },\n    // { \"idsName\": \"IDS_CHARTTYPE\", \"dataField\": \"ncharttypecode\", \"width\": \"200px\",\"mandatory\": true },\n    ];\n\n    if (this.state.selectedcombo.nquerytypecode && this.state.selectedcombo.nquerytypecode.value === 2) {\n      this.validationColumnList = [{\n        \"idsName\": \"IDS_SQLQUERYNAME\",\n        \"dataField\": \"ssqlqueryname\",\n        \"width\": \"200px\",\n        \"mandatory\": true\n      }, {\n        \"idsName\": \"IDS_SQLQUERY\",\n        \"dataField\": \"ssqlquery\",\n        \"width\": \"200px\",\n        \"mandatory\": true\n      }, {\n        \"idsName\": \"IDS_SCREENHEADER\",\n        \"dataField\": \"sscreenheader\",\n        \"width\": \"200px\",\n        \"mandatory\": true\n      }];\n    }\n\n    if (this.state.selectedcombo.nquerytypecode && this.state.selectedcombo.nquerytypecode.value === 5) {\n      this.validationColumnList = [{\n        \"idsName\": \"IDS_SQLQUERYNAME\",\n        \"dataField\": \"ssqlqueryname\",\n        \"width\": \"200px\",\n        \"mandatory\": true\n      }, {\n        \"idsName\": \"IDS_SQLQUERY\",\n        \"dataField\": \"ssqlquery\",\n        \"width\": \"200px\",\n        \"mandatory\": true\n      }, {\n        \"idsName\": \"IDS_SVALUEMEMBER\",\n        \"dataField\": \"svaluemember\",\n        \"width\": \"200px\",\n        \"mandatory\": true\n      }, {\n        \"idsName\": \"IDS_SDISPLAYMEMBER\",\n        \"dataField\": \"sdisplaymember\",\n        \"width\": \"200px\",\n        \"mandatory\": true\n      }];\n    }\n\n    if (this.state.selectedcombo.nquerytypecode && this.state.selectedcombo.nquerytypecode.value === 1) {\n      this.validationColumnList = [{\n        \"idsName\": \"IDS_SQLQUERYNAME\",\n        \"dataField\": \"ssqlqueryname\",\n        \"width\": \"200px\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_ENTER\",\n        \"controlType\": \"textbox\"\n      }, {\n        \"idsName\": \"IDS_SQLQUERY\",\n        \"dataField\": \"ssqlquery\",\n        \"width\": \"200px\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_ENTER\",\n        \"controlType\": \"textbox\"\n      }, {\n        \"idsName\": \"IDS_CHARTTYPE\",\n        \"dataField\": \"ncharttypecode\",\n        \"width\": \"200px\",\n        \"mandatory\": true,\n        \"mandatoryLabel\": \"IDS_SELECT\",\n        \"controlType\": \"selectbox\"\n      }];\n    }\n\n    const mandatoryFields = [];\n    this.validationColumnList.forEach(item => item.mandatory === true ? mandatoryFields.push(item) : \"\");\n    const breadCrumbData = this.state.filterData || [];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ListWrapper, {\n      className: \"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    }, breadCrumbData.length > 0 ? /*#__PURE__*/React.createElement(Affix, {\n      top: 53,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(BreadcrumbComponent, {\n      breadCrumbItem: breadCrumbData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 29\n      }\n    })) : \"\", /*#__PURE__*/React.createElement(Row, {\n      noGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(ListMaster, {\n      masterData: this.props.Login.masterData,\n      screenName: this.props.intl.formatMessage({\n        id: \"IDS_SQLBUILDER\"\n      }),\n      masterList: this.props.Login.masterData.searchedData || this.props.Login.masterData.SQLQuery,\n      getMasterDetail: sqlQuery => this.props.getSQLQueryDetail(sqlQuery, userInfo, masterData),\n      selectedMaster: this.props.Login.masterData.SelectedSQLQuery,\n      primaryKeyField: \"nsqlquerycode\",\n      mainField: \"ssqlqueryname\",\n      firstField: \"squerytypename\",\n      secondField: this.state.selectedcombo[\"nquerytypecode\"] && this.state.selectedcombo[\"nquerytypecode\"].value === queryTypeFilter.LIMSDASHBOARDQUERY ? \"schartname\" : \"\",\n      filterColumnData: this.props.filterColumnData,\n      filterParam: filterParam,\n      userRoleControlRights: this.state.userRoleControlRights,\n      addId: addId,\n      searchRef: this.searchRef,\n      reloadData: this.reloadData,\n      openModal: () => this.props.getSQLQueryComboService(\"\", \"create\", \"nsqlquerycode\", null, this.props.Login.masterData, this.props.Login.userInfo, this.props.Login.masterData.SelectedQueryType.nquerytypecode, //this.state.selectedcombo[\"nquerytypecode\"].value, \n      addId) //{() => this.props.addTest(\"create\", selectedTest, userInfo, addId, this.state.nfilterTestCategory)}\n      ,\n      needAccordianFilter: false // skip={this.state.skip}\n      // take={this.state.take}\n      ,\n      handlePageChange: this.handlePageChange,\n      showFilterIcon: true,\n      showFilter: this.props.Login.showFilter,\n      openFilter: this.openFilter,\n      closeFilter: this.closeFilter,\n      onFilterSubmit: this.onFilterSubmit,\n      showBuildQuery: false,\n      builderData: this.getDatabaseTables,\n      filterComponent: [{\n        \"IDS_QUERYTYPEFILTER\": /*#__PURE__*/React.createElement(QueryTypeFilter, {\n          queryType: this.state.queryType || [] //{this.props.Login.masterData.QueryType || []}\n          ,\n          selectedRecord: this.state.selectedcombo || {},\n          onComboChange: this.onComboChange,\n          filterQueryType: this.props.Login.masterData.SelectedQueryType,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 45\n          }\n        })\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: \"8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(ContentPanel, {\n      className: \"panel-main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"border-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 41\n      }\n    }, this.props.Login.masterData.SQLQuery && this.props.Login.masterData.SQLQuery.length > 0 && this.props.Login.masterData.SelectedSQLQuery && Object.values(this.props.Login.masterData.SelectedSQLQuery).length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(Card.Title, {\n      className: \"product-title-main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 57\n      }\n    }, this.props.Login.masterData.SelectedSQLQuery.ssqlqueryname), /*#__PURE__*/React.createElement(Card.Subtitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex product-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"product-title-sub flex-grow-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: `btn btn-outlined outline-secondary btn-sm ml-3`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: this.props.Login.masterData.SelectedSQLQuery.squerytypename,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 73\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      className: \"btn btn-circle outline-grey mr-2 action-icons-wrap\",\n      name: \"editsqlqueryname\",\n      hidden: this.state.userRoleControlRights.indexOf(editId) === -1,\n      onClick: () => this.getValidationForEdit(this.state.queryTypeName, \"update\", \"nsqlquerycode\", this.props.Login.masterData.SelectedSQLQuery.nsqlquerycode, this.props.Login.masterData, this.props.Login.userInfo, //this.state.selectedcombo[\"nquerytypecode\"].value, \n      this.props.Login.masterData.SelectedQueryType.nquerytypecode, editId) //    data-for=\"tooltip_list_wrap\"\n      ,\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_EDIT\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPencilAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 73\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      className: \"btn btn-circle outline-grey mr-2 action-icons-wrap\",\n      name: \"deletesqlqueryname\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_DELETE\"\n      }) //   data-for=\"tooltip_list_wrap\"\n      ,\n      hidden: this.state.userRoleControlRights.indexOf(deleteId) === -1,\n      onClick: () => this.ConfirmDelete(deleteId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTrashAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 73\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      className: \"btn btn-circle outline-grey mr-2 action-icons-wrap\",\n      name: \"executequery\",\n      hidden: this.state.userRoleControlRights.indexOf(executeId) === -1,\n      onClick: () => this.executeQuery(\"SQLQuery\", this.props.Login.masterData.SelectedSQLQuery, \"execute\", executeId) //    data-for=\"tooltip_list_wrap\"\n      ,\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_EXECUTEQUERY\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTasks,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 73\n      }\n    })))))), /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 57\n      }\n    }, this.props.Login.masterData.SelectedSQLQuery.nquerytypecode === queryTypeFilter.LIMSALERTQUERY && /*#__PURE__*/React.createElement(Col, {\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 73\n      }\n    }, this.props.intl.formatMessage({\n      id: \"IDS_SCREENHEADER\"\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 73\n      }\n    }, this.props.Login.masterData.SelectedSQLQuery.sscreenheader))), this.props.Login.masterData.SelectedSQLQuery.nquerytypecode === queryTypeFilter.LIMSFILTERQUERY && /*#__PURE__*/React.createElement(Col, {\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 73\n      }\n    }, this.props.intl.formatMessage({\n      id: \"IDS_SVALUEMEMBER\"\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 73\n      }\n    }, this.props.Login.masterData.SelectedSQLQuery.svaluemember))), this.props.Login.masterData.SelectedSQLQuery.nquerytypecode === queryTypeFilter.LIMSFILTERQUERY && /*#__PURE__*/React.createElement(Col, {\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 69\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 73\n      }\n    }, this.props.intl.formatMessage({\n      id: \"IDS_SDISPLAYMEMBER\"\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 73\n      }\n    }, this.props.Login.masterData.SelectedSQLQuery.sdisplaymember))), /*#__PURE__*/React.createElement(Col, {\n      md: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 69\n      }\n    }, this.props.intl.formatMessage({\n      id: \"IDS_SQLQUERY\"\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 69\n      }\n    }, this.props.Login.masterData.SelectedSQLQuery.ssqlquery)))))) : \"\"))))))), console.log(this.filtersearchRef), console.log(\"search\", this.searchRef), this.props.Login.openPortalModal && /*#__PURE__*/React.createElement(PortalModalSlideout, {\n      show: this.props.Login.openPortalModal,\n      noSave: true,\n      closeModal: this.closePortalModal,\n      screenName: this.props.Login.screenName,\n      addComponent: /*#__PURE__*/React.createElement(SqlBuilderNewDesign, {\n        tableName: this.props.Login.tableName || [],\n        tableList: this.props.Login.tableList || [],\n        filtersearchRef: this.filtersearchRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 29\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 21\n      }\n    }), this.props.Login.openModal && /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.Login.openModal,\n      closeModal: this.closeModal //size={this.props.Login.parentPopUpSize}\n      ,\n      size: this.props.Login.loadEsign ? \"lg\" : \"xl\",\n      operation: this.props.Login.operation,\n      inputParam: this.props.Login.inputParam,\n      screenName: this.props.Login.screenName,\n      onSaveClick: this.onSaveClick,\n      onExecuteClick: this.onExecuteClick,\n      esign: this.props.Login.loadEsign,\n      validateEsign: this.validateEsign,\n      masterStatus: this.props.Login.masterStatus,\n      updateStore: this.props.updateStore,\n      showExecute: this.props.Login.showExecute,\n      showParam: this.props.Login.showParam,\n      noSave: this.props.Login.noSave,\n      showValidate: this.props.Login.showValidate,\n      showQueryTool: this.props.Login.showQueryTool,\n      queryGenrate: this.queryGenrate //graphView={this.props.Login.graphView}\n      ,\n      showSave: this.props.Login.showSave,\n      selectedRecord: this.state.selectedRecord || {},\n      mandatoryFields: this.props.Login.screenName === \"Parameter for Results\" ? [] : mandatoryFields,\n      addComponent: this.props.Login.loadEsign ? /*#__PURE__*/React.createElement(Esign, {\n        operation: this.props.Login.operation,\n        onInputOnChange: this.onInputOnChange,\n        inputParam: this.props.Login.inputParam,\n        selectedRecord: this.state.selectedRecord || {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 29\n        }\n      }) : (this.props.Login.screenName === \"Parameter for Results\" || this.props.Login.screenName === \"Results\") && this.props.Login.showParam ? /*#__PURE__*/React.createElement(AddParameter, {\n        selectedRecord: this.state.selectedRecord || {},\n        onInputOnChange: this.handleText,\n        onComboChange: this.upDateComboboxValue,\n        onChange: this.handleDateChange //parameters={this.state.parameters || []}\n        ,\n        parameters: this.state.param || new Map(),\n        queryTypeCode: this.props.Login.masterData.SelectedQueryType.nquerytypecode // queryTypeCode={this.state.selectedcombo[\"nquerytypecode\"].value}\n        ,\n        sscreenheader: this.props.Login.masterData.SelectedSQLQuery === null ? \"\" : this.props.Login.masterData.SelectedSQLQuery.sscreenheader,\n        slideResult: this.props.Login.slideResult,\n        slideList: this.props.Login.slideList,\n        resultStatus: this.props.Login.resultStatus,\n        dataStateUserQuery: this.state.dataStateUserQuery,\n        userQueryDataStateChange: this.userQueryDataStateChange,\n        controlMap: this.state.controlMap,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 33\n        }\n      }) : /*#__PURE__*/React.createElement(AddQuery, {\n        selectedRecord: this.state.selectedRecord || {},\n        selectedTableType: this.state.selectedTableType || {},\n        onInputOnChange: this.onInputOnChange,\n        onComboChange: this.onComboChange,\n        chartList: this.state.chartList || [],\n        tableList: this.props.Login.tableList || [],\n        tableName: this.props.Login.tableName || [] //tableList={}\n        ,\n        tableType: this.state.tableType || [],\n        moduleFormName: this.state.moduleFormName || [],\n        tableTypeCode: this.state.selectedTableType[\"ntabletypecode\"] ? this.state.selectedTableType[\"ntabletypecode\"].value : 0 // onColumnNameDrop={this.onColumnNameDrop}\n        ,\n        onDrop: this.onDrop.bind(this) //queryTypeCode={this.state.selectedcombo[\"nquerytypecode\"].value}\n        ,\n        queryTypeCode: this.props.Login.masterData.SelectedQueryType.nquerytypecode,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 33\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 21\n      }\n    }), console.log(this.props.Login.openPortalModal));\n  }\n\n  clearSelectedRule(selectedRecord, index) {\n    selectedRecord[\"sinputname_\" + index] && delete selectedRecord[\"sinputname_\" + index];\n    selectedRecord[\"ssymbolname_\" + index] && delete selectedRecord[\"ssymbolname_\" + index];\n    selectedRecord[\"snumericinput_\" + index] && delete selectedRecord[\"snumericinput_\" + index];\n    selectedRecord[\"columnname_\" + index] && delete selectedRecord[\"columnname_\" + index];\n    selectedRecord[\"snumericinputtwo_\" + index] && delete selectedRecord[\"snumericinputtwo_\" + index];\n    selectedRecord[\"dateinput_\" + index] && delete selectedRecord[\"dateinput_\" + index];\n    selectedRecord[\"dateinputtwo_\" + index] && delete selectedRecord[\"dateinputtwo_\" + index];\n  }\n\n  getTablesName(selectedRecord) {\n    return function (dispatch) {\n      const url = \"sqlquery/getTablesFromSchema\";\n      rsapi.post(url, {\n        \"tabletypecode\": parseInt(selectedRecord[\"ntabletypecode\"].value),\n        \"moduleformcode\": parseInt(selectedRecord[\"nformcode\"].value),\n        \"userinfo\": this.props.Login.userInfo\n      }).then(response => {\n        let tableName = undefined;\n        let tableNameOnly = [];\n        Object.values(response[1].data[0]).forEach(p => {\n          if (p.stable !== tableName) {\n            tableName = p.stable;\n            tableNameOnly.push({\n              tableName\n            });\n          }\n        });\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            tableList: response[0].data[0] || [],\n            tableName: tableNameOnly || []\n          }\n        }); //this.setState({ tableList: response[0].data[0] || [], tableName: tableNameOnly || []})\n      }).catch(error => {\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    };\n  }\n\n  getModuleFormName(TableTypeCode) {\n    const url = \"sqlquery/getModuleFormName\";\n    rsapi.post(url, {\n      \"tabletypecode\": parseInt(TableTypeCode),\n      \"userinfo\": this.props.Login.userInfo\n    }).then(response => {\n      this.setState({\n        moduleFormName: response.data[0]\n      });\n    }).catch(error => {\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  }\n\n  onDrop(data) {\n    let {\n      selectedRecord\n    } = this.state;\n    let sqlquery = selectedRecord.ssqlquery ? selectedRecord.ssqlquery : \"\";\n    selectedRecord.ssqlquery = data.dragtable ? `${sqlquery} ${data.dragtable}` : `${sqlquery} ${data.dragcolumn}`;\n    this.setState({\n      selectedRecord\n    });\n  }\n\n  componentDidUpdate(previousProps) {\n    let {\n      selectedRecord,\n      dataStateUserQuery,\n      userRoleControlRights,\n      controlMap,\n      filterData,\n      queryType,\n      chartList,\n      moduleFormName,\n      tableType,\n      selectedTableType,\n      param,\n      tableColumnList,\n      selectedTableList,\n      foreignTableCount,\n      foreignTableList,\n      count,\n      sqlQuery\n    } = this.state;\n    let updateState = false; // const masterData = this.props.Login.masterData;\n\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n      updateState = true;\n      selectedRecord = this.props.Login.selectedRecord;\n    }\n\n    if (this.props.Login.sqlQuery !== previousProps.Login.sqlQuery) {\n      updateState = true;\n      sqlQuery = this.props.Login.sqlQuery;\n    }\n\n    if (this.props.Login.tableColumnList !== previousProps.Login.tableColumnList) {\n      updateState = true;\n      tableColumnList = this.props.Login.tableColumnList;\n    }\n\n    if (this.props.Login.slideResult !== previousProps.Login.slideResult) {\n      dataStateUserQuery = {\n        skip: 0,\n        take: 10\n      };\n      updateState = true;\n    }\n\n    if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n      const userRoleControlRight = [];\n\n      if (this.props.Login.userRoleControlRights) {\n        this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item => userRoleControlRight.push(item.ncontrolcode));\n      }\n\n      const controlMap1 = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode); // if (this.props.Login.masterData.QueryType !== previousProps.Login.masterData.QueryType) {\n\n      const queryTypeMap = constructOptionList(this.props.Login.masterData.QueryType || [], \"nquerytypecode\", \"squerytypename\", \"nsorter\", \"ascending\", false);\n      const QueryTypeList = queryTypeMap.get(\"OptionList\"); // const selectedcombo = {\n      //     nquerytypecode: QueryTypeList.length > 0 ? {\n      //         \"value\": QueryTypeList[0].item.nquerytypecode,\n      //         \"label\": QueryTypeList[0].item.squerytypename\n      //     } : this.state.selectedcombo[\"nquerytypecode\"]\n      // }\n      // }\n\n      updateState = true;\n      userRoleControlRights = userRoleControlRight;\n      controlMap = controlMap1;\n      filterData = this.generateBreadCrumData();\n      queryType = QueryTypeList;\n    } else {\n      filterData = this.generateBreadCrumData();\n\n      if (this.props.Login.chartList !== previousProps.Login.chartList || this.props.Login.moduleFormName !== previousProps.Login.moduleFormName) {\n        const chartListMap = constructOptionList(this.props.Login.chartList || [], \"ncharttypecode\", \"schartname\", undefined, undefined, undefined);\n        const chartTypeList = chartListMap.get(\"OptionList\");\n        const moduleFormNameMap = constructOptionList(this.props.Login.moduleFormName || [], \"nformcode\", \"sformname\", undefined, undefined, undefined);\n        const moduleFormNameList = moduleFormNameMap.get(\"OptionList\");\n        updateState = true;\n        chartList = chartTypeList;\n        moduleFormName = moduleFormNameList;\n      }\n\n      if (this.props.Login.masterData.QueryType !== previousProps.Login.masterData.QueryType) {\n        const queryTypeMap = constructOptionList(this.props.Login.masterData.QueryType || [], \"nquerytypecode\", \"squerytypename\", \"nsorter\", \"ascending\", false);\n        const QueryTypeList = queryTypeMap.get(\"OptionList\"); // const selectedcombo = {\n        //                         nquerytypecode: QueryTypeList.length > 0 ? {\n        //                             \"value\": QueryTypeList[0].item.nquerytypecode,\n        //                             \"label\": QueryTypeList[0].item.squerytypename\n        //                         } : this.state.selectedcombo[\"nquerytypecode\"]\n        //}\n\n        updateState = true;\n        queryType = QueryTypeList; //selectedcombo , \n      }\n\n      if (this.props.Login.tableType !== previousProps.Login.tableType) {\n        const tableTypeMap = constructOptionList(this.props.Login.tableType || [], \"ntabletypecode\", \"stabletype\", undefined, undefined, undefined);\n        const tableTypeList = tableTypeMap.get(\"OptionList\");\n        selectedTableType = {\n          ntabletypecode: tableTypeList.length > 0 ? {\n            \"value\": tableTypeList[0].item.ntabletypecode,\n            \"label\": tableTypeList[0].item.stabletype\n          } : this.state.selectedTableType[\"ntabletypecode\"]\n        };\n        updateState = true;\n        tableType = tableTypeList;\n      }\n\n      if (this.props.Login.masterData.SelectedQueryType !== previousProps.Login.masterData.SelectedQueryType) {\n        updateState = true;\n      }\n\n      if (this.props.Login.param !== previousProps.Login.param) {\n        updateState = true;\n        param = this.props.Login.param;\n      }\n    }\n\n    if (updateState) {\n      this.setState({\n        selectedRecord,\n        dataStateUserQuery,\n        userRoleControlRights,\n        controlMap,\n        filterData,\n        queryType,\n        chartList,\n        moduleFormName,\n        tableType,\n        selectedTableType,\n        param,\n        tableColumnList,\n        selectedTableList,\n        foreignTableCount,\n        foreignTableList,\n        count,\n        sqlQuery\n      });\n    }\n  }\n\n  generateBreadCrumData() {\n    const breadCrumbData = [];\n\n    if (this.props.Login.masterData && this.props.Login.masterData.SelectedQueryType) {\n      breadCrumbData.push({\n        \"label\": \"IDS_QUERYTYPE\",\n        \"value\": this.props.Login.masterData.SelectedQueryType ? this.props.Login.masterData.SelectedQueryType.squerytypename : \"\" //this.props.intl.formatMessage({ id: this.props.Login.masterData.SelectedQueryType.squerytypename}) : \"\"\n\n      });\n    }\n\n    return breadCrumbData;\n  }\n\n  componentWillUnmount() {\n    const updateInfo = {\n      typeName: DEFAULT_RETURN,\n      data: {\n        masterData: [],\n        inputParam: undefined,\n        operation: null,\n        modalName: undefined,\n        testData: {},\n        parameterData: {},\n        otherTestData: {},\n        formulaData: {}\n      }\n    };\n    this.props.updateStore(updateInfo);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nexport default connect(mapStateToProps, {\n  callService,\n  crudMaster,\n  updateStore,\n  filterColumnData,\n  validateEsignCredential,\n  getSQLQueryDetail,\n  getSQLQueryComboService,\n  comboChangeQueryType,\n  executeUserQuery,\n  comboColumnValues,\n  getColumnNamesByTableName,\n  getTablesName,\n  getModuleFormName,\n  getDatabaseTables,\n  executeQuery,\n  getForeignTable,\n  getViewColumns,\n  getMasterData\n})(injectIntl(SQLBuilder));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/dashboard/SqlBuilder.jsx"],"names":["React","Component","connect","injectIntl","FormattedMessage","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faTrashAlt","faPencilAlt","faTasks","faDatabase","toast","ListMaster","SlideOutModal","Esign","AddQuery","AddParameter","QueryTypeFilter","callService","crudMaster","validateEsignCredential","updateStore","getSQLQueryDetail","getSQLQueryComboService","filterColumnData","comboChangeQueryType","executeUserQuery","comboColumnValues","getColumnNamesByTableName","getTablesName","getModuleFormName","getDatabaseTables","executeQuery","getForeignTable","getViewColumns","getMasterData","DEFAULT_RETURN","transactionStatus","queryTypeFilter","tableType","ColumnType","constructOptionList","getControlMap","showEsign","ReadOnlyText","ContentPanel","rsapi","ConfirmMessage","Affix","BreadcrumbComponent","ListWrapper","PortalModalSlideout","BuildQuery","SqlBuilderNewDesign","SQLBuilder","constructor","props","userQueryDataStateChange","event","setState","dataStateUserQuery","dataState","queryGenrate","updateInfo","typeName","data","openPortalModal","openModal","ConfirmDelete","deleteId","confirmMessage","confirm","intl","formatMessage","id","deleteRecord","Login","masterData","SelectedSQLQuery","handleFilterDateChange","dateName","dateValue","selectedRecord","state","Date","generateFilterQuery","onViewComboChange","comboData","fieldName","inputParam","sviewname","value","userinfo","userInfo","onRuleChange","index","clearSelectedRule","sqlQuery","oldselectedRecord","tableData","items","mastertablename","needmasterdata","nflag","valuemember","displaymember","optionId","columntype","COMBO","stablename","foriegntablename","scolumnname","sforeigncolumnname","TEXTINPUT","onMasterDataChange","addRule","type","addRuleList","length","arrayLength","viewColumnListByRule","viewColumnList","info","closePortalModal","count","onExecuteRule","sgeneratedquery","deleteRule","clearRule","resetRule","onSymbolChange","oldSelectedRecord","symbolType","onInputChange","inputValue","target","test","name","databaseCondition","displayCondition","orDisplayConditionArray","orConditionArray","forEach","symbolObject","current_button_and","current_button_or","next_button_and","next_button_or","inputname","symbolname","symbol","numericinput","columnLabel","label","columnValue","snumericinputtwo","columnName","undefined","dateinput","dateinputtwo","replacewith","indexOf","substr","push","tempValue","tempValue1","map","item","data1","isInputVisible","$or","onConditionClick","onQueryTypeOnclick","getValidationForEdit","screenName","operation","primaryKeyName","primaryKeyValue","queryTypeCode","ncontrolCode","post","then","response","confirmAlertForEdit","warn","catch","error","status","message","editId","queryTypeName","nsqlquerycode","SelectedQueryType","nquerytypecode","closeAlert","showConfirmAlertForEdit","openFilter","showFilter","closeFilter","onFilterSubmit","searchRef","current","handlePageChange","skip","take","onComboChange","selectedTableType","ALL","updateInfor","tableName","moduleFormName","selectedcombo","onEsignInputOnChange","checked","YES","NO","onInputOnChange","ACTIVE","DEACTIVE","onNumericInputChange","closeModal","loadEsign","showExecute","showParam","showValidate","showSave","slideOperation","parentPopUpSize","resultStatus","param","size","screenFlag","LIMSDASHBOARDQUERY","LIMSALERTQUERY","LIMSBARCODEQUERY","LIMSGENERALQUERY","upDateComboboxValue","i","Value","paramMap","Map","get","textValue","handleDateChange","date","Datetime","handleText","methodUrl","ssqlquery","toUpperCase","newQuery","paramLabelStartIndex","paramLabelEndIndex","paramLabel","substring","displayName","localParam","startsWith","set","lableName","TableName","DisplayParam","actuallableName","slanguagetypecode","slideResult","slideList","query","trim","noSave","postParam","inputListName","selectedObject","primaryKeyField","fetchUrl","fecthInputObject","classUrl","inputData","toLowerCase","userRoleControlRights","nformcode","screenData","onExecuteClick","tempQuery","paramFlag","parameterMap","entries","parameter","parameterDetail","paramVal","getFullYear","getMonth","toString","parseInt","getDate","replaceAll","onSaveClick","saveType","formRef","queryFieldList","nmastersitecode","hasOwnProperty","validateEsign","sreason","nreasoncode","spredefinedreason","password","reloadData","parameters","queryName","controlMap","ntableTypeCode","nFormCode","queryType","chartList","settings","outputColumns","selectedTableList","tableColumnList","foreignTableColumnList","joinTableList","symbolsList","foreignTableList","foreignTableCount","selectedforeignTableList","filterColumnList","switchRecord","createRef","filtersearchRef","searchFieldList","getDerivedStateFromProps","masterStatus","errorCode","render","addId","has","ncontrolcode","executeId","filterParam","validationColumnList","mandatoryFields","mandatory","breadCrumbData","filterData","searchedData","SQLQuery","Object","values","ssqlqueryname","squerytypename","sscreenheader","LIMSFILTERQUERY","svaluemember","sdisplaymember","console","log","tableList","showQueryTool","onDrop","bind","dispatch","url","tableNameOnly","p","stable","payload","TableTypeCode","sqlquery","dragtable","dragcolumn","componentDidUpdate","previousProps","updateState","userRoleControlRight","controlMap1","queryTypeMap","QueryType","QueryTypeList","generateBreadCrumData","chartListMap","chartTypeList","moduleFormNameMap","moduleFormNameList","tableTypeMap","tableTypeList","ntabletypecode","stabletype","componentWillUnmount","modalName","testData","parameterData","otherTestData","formulaData","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, FormattedMessage } from 'react-intl';\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrashAlt, faPencilAlt, faTasks, faDatabase } from '@fortawesome/free-solid-svg-icons';\r\nimport { toast } from 'react-toastify';\r\nimport ListMaster from '../../components/list-master/list-master.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport Esign from '../audittrail/Esign';\r\nimport AddQuery from './AddQuery';\r\nimport AddParameter from './AddParameter';\r\nimport QueryTypeFilter from './QueryTypeFilter';\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, getSQLQueryDetail,\r\n    getSQLQueryComboService, filterColumnData, comboChangeQueryType, executeUserQuery,\r\n    comboColumnValues, getColumnNamesByTableName, getTablesName, getModuleFormName,\r\n    getDatabaseTables, executeQuery, getForeignTable, getViewColumns, getMasterData\r\n} from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { transactionStatus, queryTypeFilter, tableType, ColumnType } from '../../components/Enumeration';\r\nimport { constructOptionList, getControlMap, showEsign } from '../../components/CommonScript';\r\nimport { ReadOnlyText, ContentPanel } from '../../components/App.styles';\r\nimport rsapi from '../../rsapi';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport { Affix } from 'rsuite';\r\nimport BreadcrumbComponent from '../../components/Breadcrumb.Component';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\n// import ReactTooltip from 'react-tooltip';\r\nimport PortalModalSlideout from '../../components/portal-modal/portal-modal-slideout';\r\nimport BuildQuery from './BuildQuery';\r\nimport SqlBuilderNewDesign from './SqlBuilderNewDesign.jsx'\r\n// import {validationData} from './QueryBuilderData';\r\n\r\n// const jsonSql = require('json-sql')({separatedValues: true});\r\n\r\nclass SQLBuilder extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const dataStateUserQuery = {\r\n            skip: 0,\r\n            take: 10,\r\n        };\r\n        this.state = ({\r\n            selectedRecord: {},\r\n            error: \"\",\r\n            // modalIsOpen: false,\r\n            parameters: [],\r\n            // objparam: [],\r\n            // objDparam: [],\r\n            queryName: '',\r\n            // queryResult: [],\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            dataStateUserQuery: dataStateUserQuery,\r\n            queryTypeName: '',\r\n            selectedcombo: [],\r\n            selectedTableType: [],\r\n            moduleFormName: [],\r\n            ntableTypeCode: -1,\r\n            nFormCode: -1,\r\n            queryType: [],\r\n            tableType: [],\r\n            chartList: [],\r\n            skip: 0,\r\n            take: this.props.Login.settings ?\r\n                this.props.Login.settings[3] : 25, //tableName : undefined,tableList:[]\r\n            outputColumns: [],\r\n            selectedTableList: [],\r\n            tableColumnList: [],\r\n            foreignTableColumnList: [],\r\n            joinTableList: [],\r\n            symbolsList: [],\r\n            foreignTableList: [],\r\n            count: 0,\r\n            foreignTableCount: [],\r\n            selectedforeignTableList: [],\r\n            filterColumnList: [],\r\n            sqlQuery: false,\r\n            // viewColumnList: [],\r\n            switchRecord: {}\r\n        });\r\n        this.searchRef = React.createRef();\r\n        this.filtersearchRef= React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n        // this.dropItemRef = React.createRef(); \r\n\r\n        this.queryFieldList = ['nquerytypecode', 'ssqlqueryname', 'ssqlquery',\r\n            'sscreenrecordquery', 'sscreenheader', 'svaluemember', 'sdisplaymember', 'ncharttypecode'];\r\n        // this.queryList = [];\r\n\r\n        this.searchFieldList = [\"ssqlqueryname\", \"ssqlquery\", \"sscreenheader\", \"svaluemember\", \"sdisplaymember\",\r\n            \"squerytypename\", \"schartname\"];\r\n            \r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.Login.masterStatus !== \"\") {\r\n            if (props.Login.errorCode === 417 || props.Login.errorCode === 409) {\r\n                toast.warn(props.Login.masterStatus);\r\n                props.Login.masterStatus = \"\";\r\n            }\r\n        }\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    userQueryDataStateChange = (event) => {\r\n        this.setState({\r\n            dataStateUserQuery: event.dataState\r\n        });\r\n    }\r\n\r\n\r\n    queryGenrate=()=>{\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                openPortalModal:true,openModal:false\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo)\r\n    }\r\n    ConfirmDelete = (deleteId) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.deleteRecord(\"SQLQuery\", this.props.Login.masterData.SelectedSQLQuery, \"delete\", deleteId));\r\n    }\r\n\r\n\r\n    render() {\r\n        const { masterData, userInfo } = this.props.Login;\r\n        const addId = this.state.controlMap.has(\"AddSQLQuery\") && this.state.controlMap.get(\"AddSQLQuery\").ncontrolcode;\r\n        const editId = this.state.controlMap.has(\"EditSQLQuery\") && this.state.controlMap.get(\"EditSQLQuery\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"DeleteSQLQuery\") && this.state.controlMap.get(\"DeleteSQLQuery\").ncontrolcode;\r\n        const executeId = this.state.controlMap.has(\"ExecuteSQLQuery\") && this.state.controlMap.get(\"ExecuteSQLQuery\").ncontrolcode;\r\n\r\n        const filterParam = {\r\n            inputListName: \"SQLQuery\", selectedObject: \"SelectedSQLQuery\", primaryKeyField: \"nsqlquerycode\",\r\n            fetchUrl: \"sqlquery/getSQLQuery\", fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData, searchFieldList: this.searchFieldList\r\n        };\r\n        this.validationColumnList = [\r\n            { \"idsName\": \"IDS_SQLQUERYNAME\", \"dataField\": \"ssqlqueryname\", \"width\": \"200px\", \"mandatory\": true },\r\n            { \"idsName\": \"IDS_SQLQUERY\", \"dataField\": \"ssqlquery\", \"width\": \"200px\", \"mandatory\": true },\r\n            // { \"idsName\": \"IDS_SCREENHEADER\", \"dataField\": \"sscreenheader\", \"width\": \"200px\",\"mandatory\": true }, \r\n            // { \"idsName\": \"IDS_SVALUEMEMBER\", \"dataField\": \"svaluemember\", \"width\": \"200px\",\"mandatory\": true },\r\n            // { \"idsName\": \"IDS_SDISPLAYMEMBER\", \"dataField\": \"sdisplaymember\", \"width\": \"200px\",\"mandatory\": true },\r\n            // { \"idsName\": \"IDS_CHARTTYPE\", \"dataField\": \"ncharttypecode\", \"width\": \"200px\",\"mandatory\": true },\r\n        ]\r\n        if (this.state.selectedcombo.nquerytypecode && this.state.selectedcombo.nquerytypecode.value === 2) {\r\n            this.validationColumnList = [\r\n                { \"idsName\": \"IDS_SQLQUERYNAME\", \"dataField\": \"ssqlqueryname\", \"width\": \"200px\", \"mandatory\": true },\r\n                { \"idsName\": \"IDS_SQLQUERY\", \"dataField\": \"ssqlquery\", \"width\": \"200px\", \"mandatory\": true },\r\n                { \"idsName\": \"IDS_SCREENHEADER\", \"dataField\": \"sscreenheader\", \"width\": \"200px\", \"mandatory\": true },\r\n            ]\r\n        }\r\n        if (this.state.selectedcombo.nquerytypecode && this.state.selectedcombo.nquerytypecode.value === 5) {\r\n            this.validationColumnList = [\r\n                { \"idsName\": \"IDS_SQLQUERYNAME\", \"dataField\": \"ssqlqueryname\", \"width\": \"200px\", \"mandatory\": true },\r\n                { \"idsName\": \"IDS_SQLQUERY\", \"dataField\": \"ssqlquery\", \"width\": \"200px\", \"mandatory\": true },\r\n                { \"idsName\": \"IDS_SVALUEMEMBER\", \"dataField\": \"svaluemember\", \"width\": \"200px\", \"mandatory\": true },\r\n                { \"idsName\": \"IDS_SDISPLAYMEMBER\", \"dataField\": \"sdisplaymember\", \"width\": \"200px\", \"mandatory\": true },\r\n            ]\r\n        }\r\n        if (this.state.selectedcombo.nquerytypecode && this.state.selectedcombo.nquerytypecode.value === 1) {\r\n            this.validationColumnList = [\r\n                { \"idsName\": \"IDS_SQLQUERYNAME\", \"dataField\": \"ssqlqueryname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_SQLQUERY\", \"dataField\": \"ssqlquery\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_CHARTTYPE\", \"dataField\": \"ncharttypecode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n\r\n            ]\r\n        }\r\n        const mandatoryFields = [];\r\n        this.validationColumnList.forEach(item => item.mandatory === true ?\r\n            mandatoryFields.push(item) : \"\"\r\n        );\r\n\r\n        const breadCrumbData = this.state.filterData || [];\r\n\r\n        return (\r\n            <>\r\n                <ListWrapper className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n                    {breadCrumbData.length > 0 ?\r\n                        <Affix top={53}>\r\n                            <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n                        </Affix> : \"\"\r\n                    }\r\n                    {/* <div className=\"client-listing-wrap mtop-4\"> */}\r\n                    {/* Start of get display*/}\r\n                    <Row noGutters={true}>\r\n                        <Col md=\"4\">\r\n                            <ListMaster\r\n                                masterData={this.props.Login.masterData}\r\n                                screenName={this.props.intl.formatMessage({ id: \"IDS_SQLBUILDER\" })}\r\n                                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.SQLQuery}\r\n                                getMasterDetail={(sqlQuery) => this.props.getSQLQueryDetail(sqlQuery, userInfo, masterData)}\r\n                                selectedMaster={this.props.Login.masterData.SelectedSQLQuery}\r\n                                primaryKeyField=\"nsqlquerycode\"\r\n                                mainField=\"ssqlqueryname\"\r\n                                firstField=\"squerytypename\"\r\n                                secondField={this.state.selectedcombo[\"nquerytypecode\"] && this.state.selectedcombo[\"nquerytypecode\"].value === queryTypeFilter.LIMSDASHBOARDQUERY ? \"schartname\" : \"\"}\r\n                                filterColumnData={this.props.filterColumnData}\r\n                                filterParam={filterParam}\r\n                                userRoleControlRights={this.state.userRoleControlRights}\r\n                                addId={addId}\r\n                                searchRef={this.searchRef}\r\n                                reloadData={this.reloadData}\r\n                                openModal={() => this.props.getSQLQueryComboService(\"\", \"create\", \"nsqlquerycode\", null,\r\n                                    this.props.Login.masterData, this.props.Login.userInfo,\r\n                                    this.props.Login.masterData.SelectedQueryType.nquerytypecode,\r\n                                    //this.state.selectedcombo[\"nquerytypecode\"].value, \r\n                                    addId)} //{() => this.props.addTest(\"create\", selectedTest, userInfo, addId, this.state.nfilterTestCategory)}\r\n                                needAccordianFilter={false}\r\n                                // skip={this.state.skip}\r\n                                // take={this.state.take}\r\n                                handlePageChange={this.handlePageChange}\r\n                                showFilterIcon={true}\r\n                                showFilter={this.props.Login.showFilter}\r\n                                openFilter={this.openFilter}\r\n                                closeFilter={this.closeFilter}\r\n                                onFilterSubmit={this.onFilterSubmit}\r\n                                showBuildQuery={false}\r\n                                builderData={this.getDatabaseTables}\r\n                                filterComponent={[\r\n                                    {\r\n                                        \"IDS_QUERYTYPEFILTER\":\r\n                                            <QueryTypeFilter\r\n                                                queryType={this.state.queryType || []}//{this.props.Login.masterData.QueryType || []}\r\n                                                selectedRecord={this.state.selectedcombo || {}}\r\n                                                onComboChange={this.onComboChange}\r\n                                                filterQueryType={this.props.Login.masterData.SelectedQueryType}\r\n                                            />\r\n                                    }\r\n                                ]}\r\n                            />\r\n                        </Col>\r\n                        <Col md=\"8\">\r\n                            <Row>\r\n                                <Col md={12}>\r\n                                    <ContentPanel className=\"panel-main-content\">\r\n                                        <Card className=\"border-0\">\r\n                                            {this.props.Login.masterData.SQLQuery && this.props.Login.masterData.SQLQuery.length > 0 && this.props.Login.masterData.SelectedSQLQuery && Object.values(this.props.Login.masterData.SelectedSQLQuery).length > 0 ?\r\n                                                <>\r\n                                                    <Card.Header>\r\n                                                        <Card.Title className=\"product-title-main\">\r\n                                                            {this.props.Login.masterData.SelectedSQLQuery.ssqlqueryname}\r\n                                                        </Card.Title>\r\n                                                        <Card.Subtitle>\r\n                                                            <div className=\"d-flex product-category\">\r\n                                                                <h2 className=\"product-title-sub flex-grow-1\">\r\n                                                                    <span className={`btn btn-outlined outline-secondary btn-sm ml-3`}>\r\n                                                                        <FormattedMessage id={this.props.Login.masterData.SelectedSQLQuery.squerytypename} />\r\n                                                                    </span>\r\n                                                                </h2>\r\n                                                                {/* <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" /> */}\r\n                                                                <div className=\"d-inline\">\r\n                                                                    <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" name=\"editsqlqueryname\"\r\n                                                                        hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                                        onClick={() => this.getValidationForEdit(this.state.queryTypeName,\r\n                                                                            \"update\", \"nsqlquerycode\",\r\n                                                                            this.props.Login.masterData.SelectedSQLQuery.nsqlquerycode,\r\n                                                                            this.props.Login.masterData, this.props.Login.userInfo,\r\n                                                                            //this.state.selectedcombo[\"nquerytypecode\"].value, \r\n                                                                            this.props.Login.masterData.SelectedQueryType.nquerytypecode,\r\n                                                                            editId)}\r\n                                                                    //    data-for=\"tooltip_list_wrap\"\r\n                                                                        data-tip={this.props.intl.formatMessage({ id: \"IDS_EDIT\" })}>\r\n\r\n                                                                        <FontAwesomeIcon icon={faPencilAlt} />\r\n                                                                    </Nav.Link>\r\n                                                                    {/* <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" name=\"buildquery\"\r\n                                                                        // hidden={this.state.userRoleControlRights.indexOf(executeId) === -1}\r\n                                                                        onClick={() => this.getDatabaseTables()}\r\n                                                                        data-for=\"tooltip_list_wrap\"\r\n                                                                        data-tip={this.props.intl.formatMessage({ id: \"IDS_BUILDQUERY\" })}>\r\n                                                                        <FontAwesomeIcon icon={faDatabase} />\r\n                                                                    </Nav.Link> */}\r\n                                                                    <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" name=\"deletesqlqueryname\"\r\n                                                                        data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                                                                     //   data-for=\"tooltip_list_wrap\"\r\n                                                                        hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                                        onClick={() => this.ConfirmDelete(deleteId)}>\r\n                                                                        <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                                    </Nav.Link>\r\n                                                                    <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" name=\"executequery\"\r\n                                                                        hidden={this.state.userRoleControlRights.indexOf(executeId) === -1}\r\n                                                                        onClick={() => this.executeQuery(\"SQLQuery\", this.props.Login.masterData.SelectedSQLQuery, \"execute\", executeId)}\r\n                                                                    //    data-for=\"tooltip_list_wrap\"\r\n                                                                        data-tip={this.props.intl.formatMessage({ id: \"IDS_EXECUTEQUERY\" })}>\r\n                                                                        <FontAwesomeIcon icon={faTasks} />\r\n                                                                    </Nav.Link>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </Card.Subtitle>\r\n                                                    </Card.Header>\r\n                                                    <Card.Body>\r\n                                                        <Row>\r\n                                                            {this.props.Login.masterData.SelectedSQLQuery.nquerytypecode === queryTypeFilter.LIMSALERTQUERY &&\r\n                                                                <Col md=\"6\">\r\n                                                                    <FormGroup>\r\n                                                                        <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_SCREENHEADER\" })}</FormLabel>\r\n                                                                        <ReadOnlyText>{this.props.Login.masterData.SelectedSQLQuery.sscreenheader}</ReadOnlyText>\r\n                                                                    </FormGroup>\r\n                                                                </Col>\r\n                                                            }\r\n                                                            {this.props.Login.masterData.SelectedSQLQuery.nquerytypecode === queryTypeFilter.LIMSFILTERQUERY &&\r\n                                                                <Col md=\"6\">\r\n                                                                    <FormGroup>\r\n                                                                        <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_SVALUEMEMBER\" })}</FormLabel>\r\n                                                                        <ReadOnlyText>{this.props.Login.masterData.SelectedSQLQuery.svaluemember}</ReadOnlyText>\r\n                                                                    </FormGroup>\r\n                                                                </Col>\r\n                                                            }\r\n                                                            {this.props.Login.masterData.SelectedSQLQuery.nquerytypecode === queryTypeFilter.LIMSFILTERQUERY &&\r\n                                                                <Col md=\"6\">\r\n                                                                    <FormGroup>\r\n                                                                        <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_SDISPLAYMEMBER\" })}</FormLabel>\r\n                                                                        <ReadOnlyText>{this.props.Login.masterData.SelectedSQLQuery.sdisplaymember}</ReadOnlyText>\r\n                                                                    </FormGroup>\r\n                                                                </Col>\r\n                                                            }\r\n                                                            <Col md=\"12\">\r\n                                                                <FormGroup>\r\n                                                                    <FormLabel>{this.props.intl.formatMessage({ id: \"IDS_SQLQUERY\" })}</FormLabel>\r\n                                                                    <ReadOnlyText>{this.props.Login.masterData.SelectedSQLQuery.ssqlquery}</ReadOnlyText>\r\n                                                                </FormGroup>\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                    </Card.Body>\r\n                                                </>\r\n                                                : \"\"\r\n                                            }\r\n                                        </Card>\r\n                                    </ContentPanel>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                    </Row>\r\n                </ListWrapper>\r\n                {/* </div> */}\r\n                {/* End of get display */}\r\n                {console.log(this.filtersearchRef)}\r\n                {console.log(\"search\",this.searchRef)}\r\n                {\r\n                    this.props.Login.openPortalModal &&\r\n                    <PortalModalSlideout\r\n                        show={this.props.Login.openPortalModal}\r\n                        noSave={true}\r\n                        closeModal={this.closePortalModal}\r\n                        screenName={this.props.Login.screenName}\r\n                        addComponent={\r\n                            <SqlBuilderNewDesign\r\n                            tableName={this.props.Login.tableName || []}\r\n                            tableList={this.props.Login.tableList||[]}\r\n                            filtersearchRef={this.filtersearchRef}\r\n                            />\r\n                        }\r\n                    />\r\n                }\r\n                {this.props.Login.openModal &&\r\n                    <SlideOutModal show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        //size={this.props.Login.parentPopUpSize}\r\n                        size={this.props.Login.loadEsign ? \"lg\" : \"xl\"}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        onExecuteClick={this.onExecuteClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        showExecute={this.props.Login.showExecute}\r\n                        showParam={this.props.Login.showParam}\r\n                        noSave={this.props.Login.noSave}\r\n                        showValidate={this.props.Login.showValidate}\r\n                        showQueryTool={this.props.Login.showQueryTool}\r\n                        queryGenrate={this.queryGenrate}\r\n                        //graphView={this.props.Login.graphView}\r\n                        showSave={this.props.Login.showSave}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={this.props.Login.screenName === \"Parameter for Results\" ? [] : mandatoryFields}\r\n                        addComponent={this.props.Login.loadEsign ?\r\n                            <Esign operation={this.props.Login.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            : (this.props.Login.screenName === \"Parameter for Results\" || this.props.Login.screenName === \"Results\") && this.props.Login.showParam ?\r\n                                <AddParameter\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.handleText}\r\n                                    onComboChange={this.upDateComboboxValue}\r\n                                    onChange={this.handleDateChange}\r\n                                    //parameters={this.state.parameters || []}\r\n                                    parameters={this.state.param || new Map()}\r\n                                    queryTypeCode={this.props.Login.masterData.SelectedQueryType.nquerytypecode}\r\n                                    // queryTypeCode={this.state.selectedcombo[\"nquerytypecode\"].value}\r\n                                    sscreenheader={this.props.Login.masterData.SelectedSQLQuery === null ? \"\" : this.props.Login.masterData.SelectedSQLQuery.sscreenheader}\r\n                                    slideResult={this.props.Login.slideResult}\r\n                                    slideList={this.props.Login.slideList}\r\n                                    resultStatus={this.props.Login.resultStatus}\r\n                                    dataStateUserQuery={this.state.dataStateUserQuery}\r\n                                    userQueryDataStateChange={this.userQueryDataStateChange}\r\n                                    controlMap={this.state.controlMap}\r\n                                />\r\n\r\n                                :\r\n                                <AddQuery\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    selectedTableType={this.state.selectedTableType || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onComboChange={this.onComboChange}\r\n                                    chartList={this.state.chartList || []}\r\n                                    tableList={this.props.Login.tableList || []}\r\n                                    tableName={this.props.Login.tableName || []}\r\n                                    //tableList={}\r\n                                    tableType={this.state.tableType || []}\r\n                                    moduleFormName={this.state.moduleFormName || []}\r\n                                    tableTypeCode={this.state.selectedTableType[\"ntabletypecode\"] ? this.state.selectedTableType[\"ntabletypecode\"].value : 0}\r\n                                    // onColumnNameDrop={this.onColumnNameDrop}\r\n                                    onDrop={this.onDrop.bind(this)}\r\n                                    //queryTypeCode={this.state.selectedcombo[\"nquerytypecode\"].value}\r\n                                    queryTypeCode={this.props.Login.masterData.SelectedQueryType.nquerytypecode}\r\n                                />\r\n                        }\r\n\r\n                    />\r\n                }\r\n{console.log(this.props.Login.openPortalModal)}\r\n               \r\n\r\n            </>\r\n        );\r\n    }\r\n\r\n    handleFilterDateChange = (dateName, dateValue) => {\r\n        const { selectedRecord } = this.state;\r\n        if (dateValue === null) {\r\n            dateValue = new Date();\r\n        }\r\n        selectedRecord[dateName] = dateValue;\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n\r\n    onViewComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {}; \r\n        selectedRecord[fieldName] = comboData;\r\n        const inputParam = {\r\n            sviewname: comboData.value,\r\n            selectedRecord,\r\n            userinfo: this.props.Login.userInfo\r\n        }\r\n        this.props.getViewColumns(inputParam);\r\n    }\r\n\r\n    onRuleChange = (comboData, fieldName, index) => {\r\n        const { selectedRecord } = this.state;\r\n        this.clearSelectedRule(selectedRecord, index);\r\n        const sqlQuery = this.props.Login.sqlQuery;\r\n        const oldselectedRecord = selectedRecord;\r\n        selectedRecord[fieldName] = comboData;\r\n        const tableData = comboData.items;\r\n        const mastertablename = tableData.mastertablename;    \r\n\r\n        if(comboData.items.needmasterdata && mastertablename) {\r\n            const inputParam = {\r\n                userinfo: this.props.Login.userInfo,\r\n                data: {\r\n                    nflag: 2,\r\n                    mastertablename,\r\n                    valuemember: tableData.valuemember,\r\n                    displaymember: tableData.displaymember,\r\n                },\r\n                selectedRecord, \r\n                index,\r\n                optionId: tableData.valuemember\r\n            };\r\n            this.props.getMasterData(inputParam);\r\n        } else if(comboData.items && comboData.items.columntype === ColumnType.COMBO) {\r\n            if(sqlQuery) {\r\n                const inputParam = {\r\n                    userinfo: this.props.Login.userInfo,\r\n                    stablename: comboData.items.foriegntablename,\r\n                    scolumnname: comboData.value,\r\n                    selectedRecord, \r\n                    index\r\n                };\r\n                this.props.getForeignTable(inputParam, 'column');\r\n            } else {\r\n                selectedRecord[`${comboData.items.sforeigncolumnname}_${index}`] = \"\";\r\n                const inputParam = {\r\n                    data: { ...comboData.items, nflag: 1 },\r\n                    userinfo: this.props.Login.userInfo,\r\n                    selectedRecord,\r\n                    index,\r\n                    optionId: comboData.items.sforeigncolumnname\r\n                };\r\n                this.props.getMasterData(inputParam);\r\n            }\r\n        } else if(comboData.items && comboData.items.columntype === ColumnType.TEXTINPUT \r\n            && oldselectedRecord[fieldName].items.columntype !== ColumnType.TEXTINPUT ) {\r\n            selectedRecord[\"sinputname_\"+index] = \"\";\r\n            this.setState({ selectedRecord });\r\n        } else {\r\n            this.setState({ selectedRecord });\r\n        }\r\n    }\r\n\r\n    onMasterDataChange = (comboData, fieldName) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[fieldName] = comboData;\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n\r\n    addRule = (type) => {\r\n        const { selectedRecord } = this.state; \r\n        if(type === \"sql\") {\r\n            let addRuleList = this.props.Login.addRuleList || [];\r\n            if(addRuleList.length > 0) {\r\n                const arrayLength = addRuleList.length;\r\n                addRuleList[arrayLength] = arrayLength;\r\n                selectedRecord[\"button_and_\"+arrayLength] = true;\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        addRuleList, \r\n                        selectedRecord\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            } else {\r\n                addRuleList[0] = 0;\r\n                this.props.getDatabaseTables(this.props.Login.userInfo, this.props.Login.sqlQuery, {addRuleList, selectedRecord: {}});\r\n            }\r\n        } else {\r\n            if(selectedRecord[\"sviewname\"]) {\r\n                const viewColumnListByRule = this.props.Login.viewColumnListByRule || [];\r\n                const addRuleList = this.props.Login.addRuleList || [];\r\n                const arrayLength = addRuleList.length;\r\n                addRuleList[arrayLength] = arrayLength;\r\n                viewColumnListByRule[arrayLength] = this.props.Login.viewColumnList;\r\n                if(arrayLength !== 0) {\r\n                    selectedRecord[\"button_and_\"+arrayLength] = true;\r\n                }\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        addRuleList, \r\n                        viewColumnListByRule, \r\n                        selectedRecord\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            } else {\r\n                toast.info(this.props.intl.formatMessage({ id: \"IDS_SELECTVIEW\" }));\r\n            }\r\n        }\r\n    }\r\n\r\n    getDatabaseTables = () => {\r\n        const sqlQuery = false;\r\n        this.props.getDatabaseTables(this.props.Login.userInfo, sqlQuery, {addRuleList: []});\r\n    }\r\n\r\n    closePortalModal = () => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                openPortalModal: false,openModal:true, addRuleList: [], count: 0\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onExecuteRule = () => {\r\n        const { selectedRecord } = this.state;\r\n        if(selectedRecord[\"sgeneratedquery\"]) {\r\n            const inputParam = {\r\n                sgeneratedquery: selectedRecord[\"sgeneratedquery\"],\r\n                selectedRecord,\r\n                userInfo: this.props.Login.userInfo\r\n            }\r\n            this.props.executeQuery(inputParam);\r\n        } else {\r\n            toast.info(this.props.intl.formatMessage({ id: \"IDS_QUERYNOTAVAILABLE\" }));\r\n        }       \r\n    }\r\n\r\n    deleteRule = (index) => {\r\n        let addRuleList = this.props.Login.addRuleList;\r\n        const selectedRecord = this.state.selectedRecord;\r\n        addRuleList[index] = -1;\r\n        selectedRecord[`button_and_${index}`] && delete selectedRecord[`button_and_${index}`];\r\n        selectedRecord[`button_or_${index}`] && delete selectedRecord[`button_or_${index}`];\r\n        this.clearSelectedRule(selectedRecord, index);\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { addRuleList, selectedRecord }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    clearSelectedRule(selectedRecord, index) {\r\n        selectedRecord[\"sinputname_\"+index] && delete selectedRecord[\"sinputname_\"+index];\r\n        selectedRecord[\"ssymbolname_\"+index] && delete selectedRecord[\"ssymbolname_\"+index];\r\n        selectedRecord[\"snumericinput_\"+index] && delete selectedRecord[\"snumericinput_\"+index];\r\n        selectedRecord[\"columnname_\"+index] && delete selectedRecord[\"columnname_\"+index];\r\n        selectedRecord[\"snumericinputtwo_\"+index] && delete selectedRecord[\"snumericinputtwo_\"+index];\r\n        selectedRecord[\"dateinput_\"+index] && delete selectedRecord[\"dateinput_\"+index];\r\n        selectedRecord[\"dateinputtwo_\"+index] && delete selectedRecord[\"dateinputtwo_\"+index];\r\n    }\r\n\r\n    clearRule = () => {\r\n        const sviewname = this.state.selectedRecord.sviewname || \"\";\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { addRuleList: [], selectedRecord: { sviewname }, sqlQuery: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    resetRule = () => {\r\n        const sviewname = this.state.selectedRecord.sviewname || \"\";\r\n        this.setState({ selectedRecord: { sviewname } });\r\n    }\r\n    \r\n    onSymbolChange = (comboData, fieldName, index) => {\r\n        const { selectedRecord } = this.state;\r\n        const oldSelectedRecord = selectedRecord[fieldName] || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        const items = selectedRecord[\"columnname_\"+index].items;\r\n        selectedRecord[\"columnname_\"+index][\"items\"][\"needmasterdata\"] = items.needmasterdata? comboData.items.needmasterdata: false;\r\n        if(comboData.items.symbolType === 2 || comboData.items.symbolType === 3) {\r\n            selectedRecord[items[\"valuemember\"]+\"_\"+index] && delete selectedRecord[items[\"valuemember\"]+\"_\"+index];\r\n            selectedRecord[items[\"foreigncolumnname\"]+\"_\"+index] && delete selectedRecord[items[\"foreigncolumnname\"]+\"_\"+index];\r\n            selectedRecord[\"sinputname_\"+index] && delete selectedRecord[\"sinputname_\"+index];\r\n        } else if(comboData.items.symbolType === 5 && oldSelectedRecord.items && oldSelectedRecord.items.symbolType !== 5) {\r\n            selectedRecord[\"snumericinput_\"+index] && delete selectedRecord[\"snumericinput_\"+index];\r\n            selectedRecord[\"snumericinputtwo_\"+index] && delete selectedRecord[\"snumericinputtwo_\"+index];\r\n        } else if((comboData.items.symbolType === 6 && oldSelectedRecord.items && oldSelectedRecord.items.symbolType === 1)\r\n            || (comboData.items.symbolType === 1 && oldSelectedRecord.items && oldSelectedRecord.items.symbolType === 6)){\r\n            selectedRecord[`${items.sforeigncolumnname}_${index}`] && delete selectedRecord[`${items.sforeigncolumnname}_${index}`];\r\n            selectedRecord[`${items.valuemember}_${index}`] && delete selectedRecord[`${items.valuemember}_${index}`];\r\n        } else {\r\n           \r\n        }\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n\r\n    // addJoinTable = (index) => {\r\n    //     const { foreignTableCount, foreignTableList } = this.state;\r\n    //     if(foreignTableList.length > 0) {\r\n    //         const tempCount = foreignTableCount[index]? foreignTableCount[index]: 1;\r\n    //         foreignTableCount[index] = tempCount + 1;\r\n    //         this.setState({ foreignTableCount });\r\n    //     }\r\n    // }\r\n\r\n    // onForeignTableChange = (comboData, fieldName, index) => {\r\n    //     const { selectedRecord, selectedforeignTableList, foreignTableColumnList } = this.state;\r\n    //     selectedforeignTableList[index] = {\r\n    //         \"tablename\": comboData.value,\r\n    //         \"tablevalue\": `\"${comboData.value}\".\"${comboData.items.columnname}\"`\r\n    //     };\r\n    //     selectedRecord[fieldName] = comboData;\r\n    //     // let foreignTableColumnList = [];\r\n    //     foreignTableColumnList[index] = this.props.Login.allTableColumnList.filter(x => x.tablename === comboData.value);\r\n    //     selectedRecord[fieldName] = comboData;\r\n    //     selectedRecord[\"foreigncolumnname\"] = [];\r\n    //     this.setState({ selectedRecord, selectedforeignTableList, foreignTableColumnList });\r\n    // }\r\n\r\n    onInputChange = (event, type) => {\r\n        let selectedRecord = this.state.selectedRecord;       \r\n        if(type === 2) {\r\n            const inputValue = event.target.value;\r\n            if (/^-?\\d*?\\.?\\d*?$/.test(inputValue) || inputValue === \"\") {\r\n                selectedRecord[event.target.name] = event.target.value;\r\n            }\r\n        } else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n\r\n    generateFilterQuery = (selectedRecord) => {\r\n        const addRuleList = this.props.Login.addRuleList;\r\n      //  jsonSql.setDialect('mssql');\r\n        let databaseCondition = [];\r\n        let displayCondition = [];\r\n        if(addRuleList.length > 0) {\r\n            let orDisplayConditionArray = [];\r\n            let orConditionArray = [];\r\n            addRuleList.forEach(index => {\r\n                let symbolObject = {};\r\n                if(selectedRecord[\"columnname_\"+index]) {\r\n                    symbolObject = selectedRecord[\"ssymbolname_\"+index].items || {};\r\n                \r\n                    const current_button_and = selectedRecord[`button_and_${index}`];\r\n                    const current_button_or = selectedRecord[`button_or_${index}`];\r\n                    const next_button_and = selectedRecord[`button_and_${index+1}`];\r\n                    const next_button_or = selectedRecord[`button_or_${index+1}`]? selectedRecord[`button_or_${index+1}`]:false;\r\n\r\n                    let inputname = selectedRecord[\"sinputname_\"+index];\r\n                    const symbolname = symbolObject.symbol;\r\n                    let numericinput = selectedRecord[\"snumericinput_\"+index];\r\n                    const columnLabel = selectedRecord[\"columnname_\"+index].label;\r\n                    const columnValue = selectedRecord[\"columnname_\"+index].value;\r\n                    const snumericinputtwo = selectedRecord[\"snumericinputtwo_\"+index];\r\n                    let columnName = undefined;\r\n                    const needmasterdata = selectedRecord[\"columnname_\"+index].items.needmasterdata? \r\n                        selectedRecord[\"columnname_\"+index].items.needmasterdata: false;\r\n\r\n                    if(selectedRecord[\"columnname_\"+index].items.needmasterdata) {\r\n                        columnName = selectedRecord[\"columnname_\"+index].items.valuemember+\"_\"+index;\r\n                    } else if(selectedRecord[\"columnname_\"+index].items.sforeigncolumnname) {\r\n                        columnName = selectedRecord[\"columnname_\"+index].items.sforeigncolumnname+\"_\"+index;\r\n                    }\r\n                    const dateinput = selectedRecord[\"dateinput_\"+index];\r\n                    const dateinputtwo = selectedRecord[\"dateinputtwo_\"+index];\r\n\r\n                    if(current_button_or || next_button_or || (current_button_and && next_button_or)) {\r\n                        if(symbolObject && inputname) {\r\n                            if(symbolObject.symbolType === 4) {\r\n                                const index = symbolObject.replacewith.indexOf('_'); \r\n                                inputname = symbolObject.replacewith.substr(0, index) + inputname + symbolObject.replacewith.substr(index+1);\r\n                                orConditionArray.push({[columnValue]: { [symbolname]: inputname} });\r\n                                orDisplayConditionArray.push({[columnLabel]: { [symbolname]: inputname} });\r\n                            } else {\r\n                                orConditionArray.push({[columnValue]: { [symbolname]: inputname} });\r\n                                orDisplayConditionArray.push({[columnLabel]: { [symbolname]: inputname} });\r\n                            }\r\n                        } else if(symbolObject && numericinput && symbolObject.symbolType !== 5) {\r\n                            orConditionArray.push({[columnValue]: { [symbolname]: numericinput} });\r\n                            orDisplayConditionArray.push({[columnLabel]: { [symbolname]: numericinput} });\r\n                        } else if(symbolObject && symbolObject.symbolType === 2\r\n                            || symbolObject && symbolObject.symbolType === 3) {\r\n                            orConditionArray.push({[columnValue]: { [symbolname]: ''} });\r\n                            orDisplayConditionArray.push({[columnLabel]: { [symbolname]: ''} });\r\n                        } \r\n                        else if(symbolObject && numericinput && snumericinputtwo && symbolObject.symbolType === 5) {\r\n                            if(symbolObject.symbol === \"\") {\r\n                                const tempValue =  [{[columnValue]: {[symbolObject.replacewith[0]]: +numericinput} }, \r\n                                    { [columnValue]: {[symbolObject.replacewith[1]]: snumericinputtwo} }];\r\n                                const tempValue1 =  [{ [columnLabel]: {[symbolObject.replacewith[0]]: +numericinput} }, \r\n                                        { [columnLabel]: {[symbolObject.replacewith[1]]: snumericinputtwo} }];\r\n                                orConditionArray.push(tempValue);\r\n                                orDisplayConditionArray.push(tempValue1);\r\n                            } else {\r\n                                const tempValue =  [ \r\n                                    {[symbolObject.symbol]: [{[columnValue]: {[symbolObject.replacewith[0]]: +numericinput} }, \r\n                                    { [columnValue]: {[symbolObject.replacewith[1]]: snumericinputtwo} }]}\r\n                                ];\r\n                                const tempValue1 =  [ \r\n                                    {[symbolObject.symbol]: [{ [columnLabel]: {[symbolObject.replacewith[0]]: +numericinput} }, \r\n                                        { [columnLabel]: {[symbolObject.replacewith[1]]: snumericinputtwo} }]}\r\n                                ];\r\n                                orConditionArray.push(tempValue);\r\n                                orDisplayConditionArray.push(tempValue1);\r\n                            }\r\n                        } else if(symbolObject && symbolObject.symbolType === 6 && columnName && selectedRecord[columnName]) {\r\n                            // if(typeof selectedRecord[columnName] === \"object\") {\r\n                            //     orConditionArray.push({[columnValue]: { [symbolname]: [selectedRecord[columnName].value]} });\r\n                            //     orDisplayConditionArray.push({[columnLabel]: { [symbolname]: [selectedRecord[columnName].label]} });\r\n                            // } else {\r\n                                const data = selectedRecord[columnName] && selectedRecord[columnName].map(item=>{return item.value}) || [];\r\n                                const data1 = selectedRecord[columnName] && selectedRecord[columnName].map(item=>{return item.label}) || [];\r\n                                if(data.length > 0) {\r\n                                    if(needmasterdata) {\r\n                                        orConditionArray.push({[selectedRecord[\"columnname_\"+index].items.valuemember]: {[symbolname]: data}});\r\n                                    } else {\r\n                                        orConditionArray.push({[columnValue]: {[symbolname]: data}});\r\n                                    }\r\n                                }\r\n                                if(data1.length > 0) {\r\n                                    orDisplayConditionArray.push({[columnLabel]: {[symbolname]: data1}});\r\n                                }\r\n                            // }\r\n                        } else if(symbolObject && columnName && symbolObject.isInputVisible && selectedRecord[columnName]) {\r\n                            if(needmasterdata) {\r\n                                orConditionArray.push({[selectedRecord[\"columnname_\"+index].items.valuemember]: { [symbolname]: selectedRecord[columnName].value} });\r\n                                orDisplayConditionArray.push({[columnLabel]: { [symbolname]: selectedRecord[columnName].label} });\r\n                            } else {\r\n                                orConditionArray.push({[columnValue]: { [symbolname]: selectedRecord[columnName].value} });\r\n                                orDisplayConditionArray.push({[columnLabel]: { [symbolname]: selectedRecord[columnName].label} });\r\n                            }\r\n                        }  else if(symbolObject && dateinput && symbolObject.symbolType !== 5) {\r\n                            orConditionArray.push({[columnValue]: { [symbolname]: dateinput } });\r\n                            orDisplayConditionArray.push({[columnLabel]: { [symbolname]: dateinput } });\r\n                        } else if(symbolObject && dateinput && dateinputtwo && symbolObject.symbolType === 5) {\r\n                            if(symbolObject.symbol === \"\") {\r\n                                const tempValue = [{[columnValue]: {[symbolObject.replacewith[0]]: dateinput} }, \r\n                                    { [columnValue]: {[symbolObject.replacewith[1]]: dateinputtwo} }];\r\n                                const tempValue1 =  [{ [columnLabel]: {[symbolObject.replacewith[0]]: dateinput} }, \r\n                                        { [columnLabel]: {[symbolObject.replacewith[1]]: dateinputtwo} }];\r\n                                orConditionArray.push(tempValue);\r\n                                orDisplayConditionArray.push(tempValue1);\r\n                            } else {\r\n                                const tempValue =  [ \r\n                                    {[symbolObject.symbol]: [{[columnValue]: {[symbolObject.replacewith[0]]: dateinput} }, \r\n                                    { [columnValue]: {[symbolObject.replacewith[1]]: dateinputtwo} }]}\r\n                                ];\r\n                                const tempValue1 =  [ \r\n                                    {[symbolObject.symbol]: [{ [columnLabel]: {[symbolObject.replacewith[0]]: dateinput} }, \r\n                                        { [columnLabel]: {[symbolObject.replacewith[1]]: dateinputtwo} }]}\r\n                                ];\r\n                                orConditionArray.push(tempValue);\r\n                                orDisplayConditionArray.push(tempValue1);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if(symbolObject && inputname) {\r\n                            if(symbolObject.symbolType === 4) {\r\n                                const index = symbolObject.replacewith.indexOf('_'); \r\n                                inputname = symbolObject.replacewith.substr(0, index) + inputname + symbolObject.replacewith.substr(index+1);\r\n                                databaseCondition.push({[columnValue]: { [symbolname]: inputname} });\r\n                                displayCondition.push({[columnLabel]: { [symbolname]: inputname} });\r\n                            } else {\r\n                                databaseCondition.push({[columnValue]: { [symbolname]: inputname} });\r\n                                displayCondition.push({[columnLabel]: { [symbolname]: inputname} });\r\n                            }\r\n                        } else if(symbolObject && numericinput && symbolObject.symbolType !== 5) {\r\n                            databaseCondition.push({[columnValue]: { [symbolname]: numericinput} });\r\n                            displayCondition.push({[columnLabel]: { [symbolname]: numericinput} });\r\n                        } else if(symbolObject && symbolObject.symbolType === 2\r\n                            || symbolObject && symbolObject.symbolType === 3) {\r\n                            databaseCondition.push({[columnValue]: { [symbolname]: ''} });\r\n                            displayCondition.push({[columnLabel]: { [symbolname]: ''} });\r\n                        } else if(symbolObject && numericinput && snumericinputtwo && symbolObject.symbolType === 5) {\r\n                            if(symbolObject.symbol === \"\") {\r\n                                const tempValue = [{[columnValue]: {[symbolObject.replacewith[0]]: +numericinput} }, \r\n                                    { [columnValue]: {[symbolObject.replacewith[1]]: snumericinputtwo} }];\r\n                                const tempValue1 =  [{ [columnLabel]: {[symbolObject.replacewith[0]]: +numericinput} }, \r\n                                        { [columnLabel]: {[symbolObject.replacewith[1]]: snumericinputtwo} }];\r\n                                databaseCondition.push(tempValue);\r\n                                displayCondition.push(tempValue1);\r\n                            } else {\r\n                                const tempValue =  [ \r\n                                    {[symbolObject.symbol]: [{[columnValue]: {[symbolObject.replacewith[0]]: +numericinput} }, \r\n                                    { [columnValue]: {[symbolObject.replacewith[1]]: snumericinputtwo} }]}\r\n                                ];\r\n                                const tempValue1 =  [ \r\n                                    {[symbolObject.symbol]: [{ [columnLabel]: {[symbolObject.replacewith[0]]: +numericinput} }, \r\n                                        { [columnLabel]: {[symbolObject.replacewith[1]]: snumericinputtwo} }]}\r\n                                ];\r\n                                databaseCondition.push(tempValue);\r\n                                displayCondition.push(tempValue1);\r\n                            }\r\n                        } else if(symbolObject && symbolObject.symbolType === 6 && columnName && selectedRecord[columnName]) {\r\n                            // if(typeof selectedRecord[columnName] === \"object\") {\r\n                            //     databaseCondition.push({[columnValue]: { [symbolname]: [selectedRecord[columnName].value]} });\r\n                            //     displayCondition.push({[columnLabel]: { [symbolname]: [selectedRecord[columnName].label]} });\r\n                            // } else {\r\n                                const data = selectedRecord[columnName] && selectedRecord[columnName].map(item=>{return item.value}) || [];\r\n                                const data1 = selectedRecord[columnName] && selectedRecord[columnName].map(item=>{return item.label}) || [];\r\n                                if(data.length > 0) {\r\n                                    if(needmasterdata) {\r\n                                        databaseCondition.push({[selectedRecord[\"columnname_\"+index].items.valuemember]: {[symbolname]: data}});\r\n                                    } else {\r\n                                        databaseCondition.push({[columnValue]: {[symbolname]: data}});\r\n                                    }\r\n                                }\r\n                                if(data1.length > 0) {\r\n                                    displayCondition.push({[columnLabel]: {[symbolname]: data1}});\r\n                                }\r\n                            // }\r\n                        } else if(symbolObject && columnName && symbolObject.isInputVisible && selectedRecord[columnName]) {\r\n                            if(needmasterdata) {\r\n                                databaseCondition.push({[selectedRecord[\"columnname_\"+index].items.valuemember]: { [symbolname]: selectedRecord[columnName].value} });\r\n                                displayCondition.push({[columnLabel]: { [symbolname]: selectedRecord[columnName].label} });\r\n                            } else {\r\n                                databaseCondition.push({[columnValue]: { [symbolname]: selectedRecord[columnName].value} });\r\n                                displayCondition.push({[columnLabel]: { [symbolname]: selectedRecord[columnName].label} });\r\n                            }\r\n                        } else if(symbolObject && dateinput && symbolObject.symbolType !== 5) {\r\n                            databaseCondition.push({[columnValue]: { [symbolname]: dateinput } });\r\n                            displayCondition.push({[columnLabel]: { [symbolname]: dateinput } });\r\n                        } else if(symbolObject && dateinput && dateinputtwo && symbolObject.symbolType === 5) {\r\n                            if(symbolObject.symbol === \"\") {\r\n                                const tempValue = [{[columnValue]: {[symbolObject.replacewith[0]]: dateinput} }, \r\n                                    { [columnValue]: {[symbolObject.replacewith[1]]: dateinputtwo} }];\r\n                                const tempValue1 =  [{ [columnLabel]: {[symbolObject.replacewith[0]]: dateinput} }, \r\n                                        { [columnLabel]: {[symbolObject.replacewith[1]]: dateinputtwo} }];\r\n                                databaseCondition.push(tempValue);\r\n                                displayCondition.push(tempValue1);\r\n                            } else {\r\n                                const tempValue =  [ \r\n                                    {[symbolObject.symbol]: [{[columnValue]: {[symbolObject.replacewith[0]]: dateinput} }, \r\n                                    { [columnValue]: {[symbolObject.replacewith[1]]: dateinputtwo} }]}\r\n                                ];\r\n                                const tempValue1 =  [ \r\n                                    {[symbolObject.symbol]: [{ [columnLabel]: {[symbolObject.replacewith[0]]: dateinput} }, \r\n                                        { [columnLabel]: {[symbolObject.replacewith[1]]: dateinputtwo} }]}\r\n                                ];\r\n                                databaseCondition.push(tempValue);\r\n                                displayCondition.push(tempValue1);\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n\r\n                    if(current_button_or \r\n                        && (next_button_and || typeof next_button_and === 'undefined') \r\n                        || typeof next_button_or === 'undefined') {\r\n                        if(orConditionArray.length > 0) {\r\n                            databaseCondition.push({$or: orConditionArray});\r\n                            orConditionArray = [];\r\n                        } \r\n                        if(orDisplayConditionArray.length > 0) {\r\n                            displayCondition.push({$or: orDisplayConditionArray});\r\n                            orDisplayConditionArray = [];\r\n                        }\r\n                    }\r\n\r\n                    if(this.props.Login.sqlQuery) {\r\n                        // const databaseSQLQuery = jsonSql.build({\r\n                        //     type: 'select',\r\n                        //     table: selectedRecord[\"stablename_0\"].value,\r\n                        //     condition: databaseCondition\r\n                        // });\r\n                    //     const displaySQLQuery = jsonSql.build({\r\n                    //         type: 'select',\r\n                    //         table: selectedRecord[\"stablename_0\"].label,\r\n                    //         condition: displayCondition\r\n                    //     });\r\n                    //     selectedRecord[\"sgeneratedquery\"] = databaseSQLQuery.query;\r\n                    //     selectedRecord[\"sdisplayquery\"] = displaySQLQuery.query;\r\n                    // } else {\r\n                    //     const databaseSQLQuery = jsonSql.build({\r\n                    //         type: 'select',\r\n                    //         table: selectedRecord[\"sviewname\"].value,\r\n                    //         condition: databaseCondition\r\n                    //     });\r\n                    //     const displaySQLQuery = jsonSql.build({\r\n                    //         type: 'select',\r\n                    //         table: selectedRecord[\"sviewname\"].label,\r\n                    //         condition: displayCondition\r\n                    //     });\r\n                        // jsonSql = jsonSql.setSeparatedValues(true);\r\n                        // selectedRecord[\"sgeneratedquery\"] = databaseSQLQuery.query;\r\n                        // selectedRecord[\"sdisplayquery\"] = displaySQLQuery.query;\r\n                    }                    \r\n                    this.setState({ selectedRecord });\r\n                } else {\r\n\r\n                }\r\n            });\r\n        }\r\n       \r\n    }\r\n    \r\n    onConditionClick = (fieldName, index) => {\r\n        let { selectedRecord } = this.state;\r\n        if(fieldName === `button_and_${index}`) {\r\n            selectedRecord[fieldName] = selectedRecord[fieldName]===true? false:true;\r\n            selectedRecord[`button_or_${index}`] = false;\r\n        } else if(fieldName === `button_or_${index}`) {\r\n            selectedRecord[fieldName] = selectedRecord[fieldName]===true? false:true;\r\n            selectedRecord[`button_and_${index}`] = false;\r\n        } else {\r\n\r\n        }\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n\r\n    onQueryTypeOnclick = () => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { sqlQuery: !this.state.sqlQuery }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    getValidationForEdit = (screenName, operation, primaryKeyName, primaryKeyValue, masterData, userInfo, queryTypeCode, ncontrolCode) => {\r\n        rsapi.post(\"sqlquery/getValidationForEdit\", { [primaryKeyName]: primaryKeyValue, \"userinfo\": userInfo })\r\n            .then(response => {\r\n                if (response.data === \"IDS_SUCCESS\") {\r\n                    this.props.getSQLQueryComboService(screenName, operation, primaryKeyName, primaryKeyValue, masterData, userInfo, queryTypeCode, ncontrolCode)\r\n                }\r\n                else if (response.data === \"IDS_QUERYUSEDINDASHBOARD\") {\r\n                    this.confirmAlertForEdit(ncontrolCode)\r\n                }\r\n                else {\r\n                    toast.warn(this.props.intl.formatMessage({ id: response.data }));\r\n                }\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(this.props.intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(this.props.intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            })\r\n    }\r\n\r\n    confirmAlertForEdit = (editId) => {\r\n        this.confirmMessage.confirm(this.props.intl.formatMessage({ id: \"IDS_CONFIRMATION\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_CONFIRMATION\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_QUERYUSEDINDASHBOARD\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            // () => this.performBatchAction(), \r\n            () => this.props.getSQLQueryComboService(this.state.queryTypeName,\r\n                \"update\", \"nsqlquerycode\",\r\n                this.props.Login.masterData.SelectedSQLQuery.nsqlquerycode,\r\n                this.props.Login.masterData, this.props.Login.userInfo,\r\n                //this.state.selectedcombo[\"nquerytypecode\"].value, \r\n                this.props.Login.masterData.SelectedQueryType.nquerytypecode, editId),\r\n            undefined,\r\n            () => this.closeAlert()\r\n        );\r\n    }\r\n\r\n    closeAlert = () => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showConfirmAlertForEdit: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    openFilter = () => {\r\n        let showFilter = !this.props.Login.showFilter\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeFilter = () => {\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onFilterSubmit = () => {\r\n\r\n        this.searchRef.current.value = \"\";\r\n        //    const inputParam = {\r\n        //        inputData: { \"userinfo\": this.props.Login.userInfo, \r\n        //                    nquerytypecode:this.state.selectedRecord[\"nquerytypecode\"] ? \r\n        //                                   this.state.selectedRecord[\"nquerytypecode\"].value : 0\r\n        //                 },        \r\n        //        userInfo: this.props.Login.userInfo,\r\n        //        classUrl: \"sqlquery\",\r\n        //        methodUrl: \"SQLQuery\",\r\n        //        displayName: \"IDS_SQLBUILDER\",\r\n        //    };\r\n        //this.props.callService(inputParam);\r\n        const nquerytypecode = this.state.selectedRecord[\"nquerytypecode\"] ?\r\n            this.state.selectedRecord[\"nquerytypecode\"].value : this.props.Login.masterData.SelectedQueryType.nquerytypecode;\r\n\r\n        this.props.comboChangeQueryType(nquerytypecode, this.props.Login.masterData, this.props.Login.userInfo);\r\n\r\n\r\n    }\r\n\r\n    handlePageChange = (event) => {\r\n        this.setState({\r\n            skip: event.skip,\r\n            take: event.take\r\n        });\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        if (comboData != null) {\r\n            if (fieldName === \"ncharttypecode\") {\r\n                const selectedRecord = this.state.selectedRecord || {};\r\n                selectedRecord[fieldName] = comboData;\r\n\r\n                this.setState({ selectedRecord });\r\n            }\r\n\r\n            if (fieldName === \"ntabletypecode\" || fieldName === \"nformcode\") {\r\n                const selectedTableType = this.state.selectedTableType || {};\r\n                selectedTableType[fieldName] = comboData;\r\n\r\n                this.setState({ selectedTableType });\r\n                const selectedRecord = this.state.selectedRecord || {};\r\n                //  this.state.ntableTypeCode=comboData.value;\r\n                if (fieldName === \"ntabletypecode\") {\r\n                    if (comboData.value === tableType.ALL) {\r\n                        selectedRecord[\"nformcode\"] = \"\";\r\n                        this.props.getTablesName(selectedTableType[\"ntabletypecode\"].value, 0,this.props.Login.userInfo)\r\n                    }\r\n                    else {\r\n                        const updateInfor = {\r\n                            typeName: DEFAULT_RETURN,\r\n                            data: {\r\n                                tableName: []\r\n                            }\r\n                        }\r\n                        this.props.updateStore(updateInfor);\r\n                        this.setState({ moduleFormName: [] })\r\n                        selectedRecord[\"nformcode\"] = \"\";\r\n                        this.props.getModuleFormName(comboData.value, this.props.Login.userInfo)\r\n                    }\r\n\r\n                }\r\n                if (fieldName === \"nformcode\") {\r\n\r\n                    selectedRecord[fieldName] = comboData;\r\n\r\n                    this.setState({ selectedRecord });\r\n                    //this.state.nFormCode=comboData.value;\r\n                    //this.getTablesName(selectedRecord[\"ntabletypecode\"].value ,selectedRecord[\"nformcode\"].value)\r\n                    this.props.getTablesName(selectedTableType[\"ntabletypecode\"].value, selectedRecord[\"nformcode\"].value,this.props.Login.userInfo)\r\n                }\r\n            }\r\n            else {\r\n                const selectedcombo = this.state.selectedcombo || {};\r\n                selectedcombo[fieldName] = comboData;\r\n\r\n                this.setState({ selectedcombo });\r\n            }\r\n            if (fieldName === \"nquerytypecode\") {\r\n                this.searchRef.current.value = \"\";\r\n                // this.props.comboChangeQueryType(comboData.value, this.props.Login.masterData, this.props.Login.userInfo);\r\n                const selectedRecord = this.state.selectedRecord || {};\r\n                selectedRecord[fieldName] = comboData;\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: { selectedRecord: selectedRecord }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    getTablesName(selectedRecord) {\r\n        return function (dispatch) {\r\n            const url = \"sqlquery/getTablesFromSchema\";\r\n\r\n            rsapi.post(url, { \"tabletypecode\": parseInt(selectedRecord[\"ntabletypecode\"].value), \"moduleformcode\": parseInt(selectedRecord[\"nformcode\"].value), \"userinfo\": this.props.Login.userInfo })\r\n                .then(response => {\r\n\r\n                    let tableName = undefined;\r\n                    let tableNameOnly = [];\r\n                    Object.values(response[1].data[0]).forEach(p => {\r\n                        if (p.stable !== tableName) {\r\n                            tableName = p.stable;\r\n                            tableNameOnly.push({ tableName });\r\n                        }\r\n                    })\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            tableList: response[0].data[0] || [],\r\n                            tableName: tableNameOnly || []\r\n\r\n                        }\r\n                    });\r\n                    //this.setState({ tableList: response[0].data[0] || [], tableName: tableNameOnly || []})\r\n\r\n                })\r\n                .catch(error => {\r\n\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    getModuleFormName(TableTypeCode) {\r\n\r\n        const url = \"sqlquery/getModuleFormName\";\r\n\r\n        rsapi.post(url, { \"tabletypecode\": parseInt(TableTypeCode), \"userinfo\": this.props.Login.userInfo })\r\n            .then(response => {\r\n                this.setState({ moduleFormName: response.data[0] });\r\n            })\r\n            .catch(error => {\r\n\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n    onEsignInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        } else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        // const selectedRecord = this.state.selectedRecord || {};\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"ntransactionstatus\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            else\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n\r\n    }\r\n\r\n    onNumericInputChange = (value, name) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let showExecute = this.props.Login.showExecute;\r\n        let showParam = this.props.Login.showParam;\r\n        let showValidate = this.props.Login.showValidate;\r\n        let showSave = this.props.Login.showSave;\r\n        let screenName = this.props.Login.screenName;\r\n        let operation = this.props.Login.operation;\r\n        let slideOperation = this.props.Login.slideOperation;\r\n        let parentPopUpSize = this.props.Login.parentPopUpSize;\r\n        let resultStatus = this.props.Login.resultStatus;\r\n\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n            } else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n                selectedRecord[\"agree\"] = transactionStatus.NO;\r\n                if (this.state.param.size > 0) {\r\n                    showExecute = true;\r\n                    showSave = true;\r\n                }\r\n                else {\r\n                    showExecute = false;\r\n                    showSave = false;\r\n                }\r\n                parentPopUpSize = \"xl\"\r\n            }\r\n        }\r\n        else {\r\n            if (this.props.Login.screenName === \"Parameter for Results\" || this.props.Login.screenName === \"Results\") {\r\n                if (this.props.Login.screenFlag === \"showQuery\") {\r\n                    openModal = true;\r\n\r\n                    let queryTypeCode = this.props.Login.masterData.SelectedQueryType.nquerytypecode;\r\n                    if (queryTypeCode === queryTypeFilter.LIMSDASHBOARDQUERY) {\r\n                        screenName = this.props.intl.formatMessage({ id: \"IDS_LIMSDASHBOARDQUERY\" });\r\n                    }\r\n                    else if (queryTypeCode === queryTypeFilter.LIMSALERTQUERY) {\r\n                        screenName = this.props.intl.formatMessage({ id: \"IDS_LIMSALERTQUERY\" });\r\n                    }\r\n                    else if (queryTypeCode === queryTypeFilter.LIMSBARCODEQUERY) {\r\n                        screenName = this.props.intl.formatMessage({ id: \"IDS_LIMSBARCODEQUERY\" });\r\n                    }\r\n                    else if (queryTypeCode === queryTypeFilter.LIMSGENERALQUERY) {\r\n                        screenName = this.props.intl.formatMessage({ id: \"IDS_LIMSGENERALQUERY\" });\r\n                    }\r\n                    else {\r\n                        screenName = this.props.intl.formatMessage({ id: \"IDS_LIMSFILTERQUERY\" });\r\n                    }\r\n                    showSave = false;\r\n                }\r\n                else {\r\n                    selectedRecord = {};\r\n                    openModal = false;\r\n                    showExecute = false;\r\n                }\r\n\r\n                showParam = false;\r\n                showValidate = true;\r\n                operation = slideOperation;\r\n                slideOperation = \"\";\r\n                resultStatus = \"\";\r\n            }\r\n            else {\r\n                openModal = false;\r\n                selectedRecord = {};\r\n                showExecute = false;\r\n            }\r\n        }\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                openModal, loadEsign, selectedRecord, showExecute,\r\n                showParam, operation, screenName, showSave, showValidate,\r\n                parentPopUpSize, resultStatus, showConfirmAlertForEdit: false\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    upDateComboboxValue = i => Value => {\r\n        if (Value != null) {\r\n\r\n            // let parameters = [...this.state.parameters]\r\n            // parameters[i].textValue = Value\r\n            // this.setState({\r\n            //     parameters: parameters\r\n            // })\r\n\r\n            const paramMap = this.state.param || new Map();\r\n            paramMap.get(i).textValue = Value;\r\n            this.setState({ param: paramMap })\r\n\r\n        }\r\n    }\r\n\r\n    handleDateChange = i => date => {\r\n\r\n        // let parameters = [...this.state.parameters]\r\n        // parameters[i].Datetime = date\r\n\r\n        // this.setState({\r\n        //     parameters: parameters\r\n        // })\r\n        const paramMap = this.state.param || new Map();\r\n        paramMap.get(i).Datetime = date;\r\n        this.setState({ param: paramMap })\r\n    }\r\n\r\n    handleText = i => event => {\r\n        //let parameters = [...this.state.parameters];\r\n        //parameters[i].textValue = e.target.value;\r\n        //this.setState({parameters: parameters});\r\n        // console.log(parameters)\r\n        const paramMap = this.state.param || new Map();\r\n        paramMap.get(event.target.name).textValue = event.target.value;\r\n        this.setState({ param: paramMap })\r\n\r\n    }\r\n\r\n    onDrop(data) {\r\n        let { selectedRecord } = this.state;\r\n        let sqlquery = selectedRecord.ssqlquery ? selectedRecord.ssqlquery : \"\";\r\n\r\n        selectedRecord.ssqlquery = data.dragtable ? `${sqlquery} ${data.dragtable}` : `${sqlquery} ${data.dragcolumn}`\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    executeQuery = (methodUrl, selectedRecord, operation, ncontrolCode) => {\r\n\r\n        const sqlQuery = selectedRecord.ssqlquery;\r\n        if (sqlQuery.length > 10) {\r\n            if (sqlQuery.toUpperCase().indexOf('INSERT') >= 0\r\n                || sqlQuery.toUpperCase().indexOf('UPDATE') >= 0\r\n                || sqlQuery.toUpperCase().indexOf('DELETE') >= 0\r\n                || sqlQuery.toUpperCase().indexOf('TRUNCATE') >= 0\r\n                || sqlQuery.toUpperCase().indexOf('CREATE') >= 0\r\n                || sqlQuery.toUpperCase().indexOf('ALTER') >= 0\r\n                || sqlQuery.toUpperCase().indexOf('DROP') >= 0) {\r\n                toast.warn(this.props.intl.formatMessage({ id: \"IDS_CANNOTDATAMANIPULATION\" }));\r\n            }\r\n            else {\r\n                if (sqlQuery.indexOf('<@') > 0||sqlQuery.indexOf('<#') > 0) {\r\n                    let newQuery = sqlQuery;\r\n\r\n                    const paramMap = new Map();\r\n                    while (newQuery.indexOf(\"<@\") !== -1||newQuery.indexOf(\"<#\")!== -1) {\r\n\r\n                        if(newQuery.indexOf(\"<@\") !== -1){\r\n                            const paramLabelStartIndex = newQuery.indexOf(\"<@\");\r\n                            const paramLabelEndIndex = newQuery.indexOf(\"@>\");\r\n    \r\n                            const paramLabel = newQuery.substring(paramLabelStartIndex + 2, paramLabelEndIndex);\r\n    \r\n                            if (paramLabel.indexOf(\"T$\") !== -1) {\r\n                                let displayName = \"\";\r\n                                let localParam = \"\";\r\n                                let tableName = \"\";\r\n    \r\n                                newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\r\n    \r\n                                if (paramLabel.indexOf(\"D$\") !== -1) {\r\n                                    localParam = paramLabel.substring(0, paramLabel.indexOf('D$'));\r\n                                    displayName = paramLabel.substring(paramLabel.indexOf('D$') + 2, paramLabel.indexOf('T$'));\r\n                                    //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\r\n                                    tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\r\n                                }\r\n                                else {\r\n                                    localParam = paramLabel.substring(0, paramLabel.indexOf('T$'));\r\n                                    // tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\r\n                                    tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\r\n                                }\r\n    \r\n                                if (localParam.startsWith('d') || localParam.startsWith('D')) {\r\n                                    paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                        value: 'DateTimePicker',\r\n                                        lableName: localParam,\r\n                                        //ID: param.length, \r\n                                        Datetime: new Date(),\r\n                                        textValue: '',\r\n                                        TableName: tableName,\r\n                                        DisplayParam: displayName,\r\n                                        actuallableName: localParam.substring(1, localParam.length)\r\n                                    })\r\n                                }\r\n                                else if(paramLabel==='slanguagetypecode'){\r\n                                    paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                        value: 'TextBox1', lableName: localParam,\r\n                                        //ID: param.length, \r\n                                        textValue: this.props.Login.userInfo.slanguagetypecode,\r\n                                        TableName: tableName,\r\n                                        DisplayParam: displayName,\r\n                                        actuallableName: localParam.substring(1, localParam.length)\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                        value: 'TextBox1', lableName: localParam,\r\n                                        //ID: param.length, \r\n                                        textValue: '',\r\n                                        TableName: tableName,\r\n                                        DisplayParam: displayName,\r\n                                        actuallableName: localParam.substring(1, localParam.length)\r\n                                    });\r\n                                }\r\n                            }\r\n                            else {\r\n                                newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\r\n    \r\n                                if(paramLabel==='slanguagetypecode'){\r\n                                    paramMap.set(\"<@\" + paramLabel + \"@>\", {\r\n                                        value: 'TextBox1', lableName: paramLabel,\r\n                                        //ID: param.length, \r\n                                        textValue: this.props.Login.userInfo.slanguagetypecode,\r\n                                        TableName: \"\",\r\n                                        DisplayParam: \"\",\r\n                                        actuallableName: paramLabel.substring(1, paramLabel.length)\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    paramMap.set(\"<@\" + paramLabel + \"@>\", {\r\n                                        value: 'TextBox1', lableName: paramLabel,\r\n                                        //ID: param.length, \r\n                                        textValue: '',\r\n                                        TableName: \"\",\r\n                                        DisplayParam: \"\",\r\n                                        actuallableName: paramLabel.substring(1, paramLabel.length)\r\n                                    });\r\n                                }\r\n                            }\r\n                        }else if(newQuery.indexOf(\"<#\")!== -1){\r\n                            const paramLabelStartIndex = newQuery.indexOf(\"<#\");\r\n                            const paramLabelEndIndex = newQuery.indexOf(\"#>\");\r\n    \r\n                            const paramLabel = newQuery.substring(paramLabelStartIndex + 2, paramLabelEndIndex);\r\n    \r\n                            if (paramLabel.indexOf(\"T$\") !== -1) {\r\n                                let displayName = \"\";\r\n                                let localParam = \"\";\r\n                                let tableName = \"\";\r\n    \r\n                                newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\r\n    \r\n                                if (paramLabel.indexOf(\"D$\") !== -1) {\r\n                                    localParam = paramLabel.substring(0, paramLabel.indexOf('D$'));\r\n                                    displayName = paramLabel.substring(paramLabel.indexOf('D$') + 2, paramLabel.indexOf('T$'));\r\n                                    //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\r\n                                    tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\r\n                                }\r\n                                else {\r\n                                    localParam = paramLabel.substring(0, paramLabel.indexOf('T$'));\r\n                                    // tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\r\n                                    tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\r\n                                }\r\n    \r\n                                if (localParam.startsWith('d') || localParam.startsWith('D')) {\r\n                                    paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                        value: 'DateTimePicker',\r\n                                        lableName: localParam,\r\n                                        //ID: param.length, \r\n                                        Datetime: new Date(),\r\n                                        textValue: '',\r\n                                        TableName: tableName,\r\n                                        DisplayParam: displayName,\r\n                                        actuallableName: localParam.substring(1, localParam.length)\r\n                                    })\r\n                                }\r\n                                else if(paramLabel==='slanguagetypecode'){\r\n                                    paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                        value: 'TextBox1', lableName: localParam,\r\n                                        //ID: param.length, \r\n                                        textValue: this.props.Login.userInfo.slanguagetypecode,\r\n                                        TableName: tableName,\r\n                                        DisplayParam: displayName,\r\n                                        actuallableName: localParam.substring(1, localParam.length)\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                        value: 'TextBox1', lableName: localParam,\r\n                                        //ID: param.length, \r\n                                        textValue: '',\r\n                                        TableName: tableName,\r\n                                        DisplayParam: displayName,\r\n                                        actuallableName: localParam.substring(1, localParam.length)\r\n                                    });\r\n                                }\r\n                            }\r\n                            else {\r\n                                newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\r\n    \r\n                                    paramMap.set(\"<#\" + paramLabel + \"#>\", {\r\n                                        value: 'DateTimePicker',\r\n                                        lableName: paramLabel,\r\n                                        actuallableName: paramLabel.substring(1, paramLabel.length),\r\n                                        //ID: param.length, \r\n                                        Datetime: new Date()\r\n                                    }) \r\n                            }\r\n                        }\r\n                        \r\n                    }\r\n\r\n                   \r\n\r\n                    const updateInfo = {\r\n                        typeName: DEFAULT_RETURN, data: {\r\n\r\n                            screenName: \"Parameter for Results\",\r\n                            openModal: true,\r\n                            showExecute: true,\r\n                            showParam: true,\r\n                            showValidate: false,\r\n                            showSave: false,\r\n                            operation: \"create\",\r\n                            slideOperation: \"\",\r\n                            slideResult: [],\r\n                            slideList: [],\r\n                            screenFlag: \"showParam\",\r\n                            param: paramMap,\r\n                            //param: param, Dparam: Dparam, TBLName: TBLName,\r\n                            parentPopUpSize: \"xl\"\r\n                        }\r\n                    }\r\n                    this.props.updateStore(updateInfo);\r\n                }\r\n                else {\r\n                    //query without parameters      \r\n                    const inputParam = {\r\n\r\n                        query: selectedRecord.ssqlquery.trim(),\r\n                        screenName: \"Results\",\r\n                        openModal: true,\r\n                        showExecute: false,\r\n                        showParam: true,\r\n                        showValidate: false,\r\n                        showSave: false,\r\n                        noSave: true,\r\n                        operation: \"view\",\r\n                        slideOperation: \"\",\r\n                        slideResult: [],\r\n                        slideList: [],\r\n                        //screenFlag: \"showParam\",\r\n                        screenFlag: \"NoParam\",\r\n                        parentPopUpSize: \"xl\",\r\n\r\n                        param: new Map(),\r\n\r\n                    }\r\n                    this.props.executeUserQuery(inputParam);\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteRecord = (methodUrl, selectedRecord, operation, ncontrolCode) => {\r\n\r\n        const postParam = {\r\n            inputListName: \"SQLQuery\", selectedObject: \"SelectedSQLQuery\",\r\n            primaryKeyField: \"nsqlquerycode\",\r\n            primaryKeyValue: this.props.Login.masterData.SelectedSQLQuery.nsqlquerycode,\r\n            fetchUrl: \"sqlquery/getSQLQuery\",\r\n            fecthInputObject: { userInfo: this.props.Login.userInfo },\r\n        }\r\n\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl, postParam,\r\n            inputData: {\r\n                [methodUrl.toLowerCase()]: selectedRecord,\r\n                \"userinfo\": this.props.Login.userInfo,\r\n                \"sqlquery\": this.props.Login.masterData.SelectedSQLQuery\r\n            },\r\n            operation\r\n        }\r\n\r\n        const masterData = this.props.Login.masterData;\r\n\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openModal: true, screenName: \"sqlquery\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n\r\n    }\r\n\r\n    onExecuteClick = () => {\r\n        // let paramVal;\r\n        let tempQuery = \"\";\r\n        let paramFlag = true;\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (this.props.Login.screenName === \"Parameter for Results\" && this.state.param.size > 0) {\r\n            if (selectedRecord != null && selectedRecord.ssqlquery != null && selectedRecord.ssqlquery.length > 0) {\r\n                tempQuery = selectedRecord.ssqlquery;\r\n            }\r\n            else {\r\n                tempQuery = this.props.Login.masterData.SelectedSQLQuery.ssqlquery;\r\n            }\r\n\r\n            const paramMap = this.state.param || new Map();\r\n            for (let parameterMap of paramMap.entries()) {\r\n                const parameter = parameterMap[0];\r\n                const parameterDetail = parameterMap[1];\r\n                let paramVal = \"\";\r\n                //console.log(\"para detail:\", parameterDetail);\r\n\r\n                if (parameter.indexOf('<#')!==-1) {\r\n                    if (parameterDetail.Datetime !== null) {\r\n                        paramVal = parameterDetail.Datetime.getFullYear() + \"-\";\r\n                        if (parameterDetail.Datetime.getMonth().toString().length > 1) {\r\n                            paramVal = paramVal + parseInt(parameterDetail.Datetime.getMonth() + 1) + \"-\";\r\n                        }\r\n                        else if(parameterDetail.Datetime.getMonth()===9){\r\n                            paramVal = paramVal + parseInt(parameterDetail.Datetime.getMonth() + 1) + \"-\";\r\n                        }\r\n                        else {\r\n                            paramVal = paramVal + \"0\" + parseInt(parameterDetail.Datetime.getMonth() + 1) + \"-\";\r\n                        }\r\n                        if (parameterDetail.Datetime.getDate().toString().length > 1) {\r\n                            paramVal = paramVal + parameterDetail.Datetime.getDate();\r\n                        }\r\n                        else {\r\n                            paramVal = paramVal + \"0\" + parameterDetail.Datetime.getDate();\r\n                        }\r\n                    }\r\n                    if (paramVal === undefined) {\r\n                        paramFlag = false;\r\n                        tempQuery = tempQuery.replaceAll(parameter, null);\r\n                    }\r\n                    else if (paramVal.trim().length > 0) {\r\n                        //tempQuery = tempQuery.replace(parameter, \"P#\" + paramVal + \"$P\");\r\n                        tempQuery = tempQuery.replaceAll(parameter, \"'\" + paramVal + \"'\");\r\n                    }\r\n                    else {\r\n                        paramFlag = false;\r\n                    }\r\n\r\n                }\r\n                else {\r\n                    paramVal = parameterDetail.textValue;\r\n                    if (paramVal !== \"\") {\r\n                        if (parameter.indexOf('<@')!==-1) {\r\n\r\n                            if (tempQuery.indexOf(parameterDetail.lableName.trim() + 'D$') > 0) {\r\n                                tempQuery = tempQuery.replaceAll('P$' + parameterDetail.lableName.trim()\r\n                                    + 'D$' + parameterDetail.DisplayParam\r\n                                    + 'T$' + parameterDetail.TableName\r\n                                    + '$P', \"'\" + paramVal + \"'\");\r\n                            }\r\n                            else if (tempQuery.indexOf(parameterDetail.lableName.trim() + 'T$') > 0) {\r\n                                tempQuery = tempQuery.replaceAll('P$' + parameterDetail.lableName.trim()\r\n                                    + 'T$' + parameterDetail.TableName\r\n                                    + '$P', \"'\" + paramVal + \"'\");\r\n                            }\r\n                            else {\r\n                                tempQuery = tempQuery.replaceAll(parameter, \"'\" + paramVal + \"'\");\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (tempQuery.indexOf(parameterDetail.lableName.trim() + 'D$') > 0) {\r\n                                tempQuery = tempQuery.replaceAll('P$' + parameterDetail.lableName.trim()\r\n                                    + 'D$' + parameterDetail.DisplayParam.trim()\r\n                                    + 'T$' + parameterDetail.TableName + '$P', paramVal);\r\n                            }\r\n                            else if (tempQuery.indexOf(parameterDetail.lableName.trim() + 'T$') > 0) {\r\n                                tempQuery = tempQuery.replaceAll('P$' + parameterDetail.lableName.trim()\r\n                                    + 'T$' + parameterDetail.TableName + '$P', paramVal);\r\n                            }\r\n                            else {\r\n                                tempQuery = tempQuery.replaceAll(parameter, paramVal);\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        paramFlag = false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (paramFlag === true) {\r\n                //console.log(\"temp:\", tempQuery);\r\n                const inputParam = {\r\n                    slideOperation: this.props.Login.slideOperation,\r\n                    screenFlag: this.props.Login.screenFlag,\r\n                    query: tempQuery.trim(),\r\n                    userInfo: this.props.Login.userInfo,\r\n                    data: {}\r\n                }\r\n                this.props.executeUserQuery(inputParam);\r\n\r\n                //this.props.executeUserQuery(tempQuery.trim(), this.props.Login.screenFlag, this.props.Login.slideOperation, this.props.Login.userInfo);\r\n            }\r\n            else {\r\n                toast.info(this.props.intl.formatMessage({ id: \"IDS_ENTERPAREMETRS\" }));\r\n            }\r\n        }\r\n        else {\r\n\r\n            if (selectedRecord.ssqlquery !== null && selectedRecord.ssqlquery.length > 0) {\r\n                const sqlQuery = selectedRecord.ssqlquery;\r\n                if (sqlQuery.toUpperCase().indexOf('INSERT') >= 0 || sqlQuery.toUpperCase().indexOf('UPDATE') >= 0\r\n                    || sqlQuery.toUpperCase().indexOf('DELETE') >= 0 || sqlQuery.toUpperCase().indexOf('TRUNCATE') >= 0\r\n                    || sqlQuery.toUpperCase().indexOf('CREATE') >= 0 || sqlQuery.toUpperCase().indexOf('ALTER') >= 0\r\n                    || sqlQuery.toUpperCase().indexOf('DROP') >= 0) {\r\n                    toast.warn(this.props.intl.formatMessage({ id: \"IDS_CANNOTDATAMANIPULATION\" }));\r\n                }\r\n                else {\r\n                    if (sqlQuery.indexOf('<@') > 0||sqlQuery.indexOf('<#') > 0) {\r\n                        let newQuery = sqlQuery;\r\n\r\n                        const paramMap = new Map();\r\n                        while (newQuery.indexOf(\"<@\") !== -1||newQuery.indexOf(\"<#\") !== -1) {\r\n                            if(newQuery.indexOf(\"<@\")!== -1){\r\n                                const paramLabelStartIndex = newQuery.indexOf(\"<@\");\r\n                                const paramLabelEndIndex = newQuery.indexOf(\"@>\");\r\n    \r\n                                const paramLabel = newQuery.substring(paramLabelStartIndex + 2, paramLabelEndIndex);\r\n    \r\n                                if (paramLabel.indexOf(\"T$\") !== -1) {\r\n                                    let displayName = \"\";\r\n                                    let localParam = \"\";\r\n                                    let tableName = \"\";\r\n    \r\n                                    newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\r\n    \r\n                                    if (paramLabel.indexOf(\"D$\") !== -1) {\r\n                                        localParam = paramLabel.substring(0, paramLabel.indexOf('D$'));\r\n                                        displayName = paramLabel.substring(paramLabel.indexOf('D$') + 2, paramLabel.indexOf('T$'));\r\n                                        //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\r\n                                        tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\r\n                                    }\r\n                                    else {\r\n                                        localParam = paramLabel.substring(0, paramLabel.indexOf('T$'));\r\n                                        //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\r\n                                        tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\r\n                                    }\r\n    \r\n                                    if (localParam.startsWith('d') || localParam.startsWith('D')) {\r\n                                        paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                            value: 'DateTimePicker',\r\n                                            lableName: localParam,\r\n                                            //ID: param.length, \r\n                                            Datetime: new Date(),\r\n                                            textValue: '',\r\n                                            TableName: tableName,\r\n                                            DisplayParam: displayName,\r\n                                            actuallableName: localParam.substring(1, localParam.length)\r\n                                        })\r\n                                    }else if(localParam==='slanguagetypecode'){\r\n                                        paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                            value: 'TextBox1', lableName: localParam,\r\n                                            //ID: param.length, \r\n                                            textValue: this.props.Login.userInfo.slanguagetypecode,\r\n                                            TableName: tableName,\r\n                                            DisplayParam: displayName,\r\n                                            actuallableName: localParam.substring(1, localParam.length)\r\n                                        });\r\n                                    }\r\n                                    else {\r\n                                        paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                            value: 'TextBox1', lableName: localParam,\r\n                                            //ID: param.length, \r\n                                            textValue: '',\r\n                                            TableName: tableName,\r\n                                            DisplayParam: displayName,\r\n                                            actuallableName: localParam.substring(1, localParam.length)\r\n                                        });\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\r\n    \r\n                              \r\n                                     if(paramLabel==='slanguagetypecode'){\r\n                                        paramMap.set(\"<@\" + paramLabel + \"@>\", {\r\n                                            value: 'TextBox1', lableName: paramLabel,\r\n                                            //ID: param.length, \r\n                                            textValue: this.props.Login.userInfo.slanguagetypecode,\r\n                                            TableName: \"\",\r\n                                            DisplayParam: \"\",\r\n                                            actuallableName: paramLabel.substring(1, paramLabel.length)\r\n                                        });\r\n                                    }\r\n                                    else {\r\n                                        paramMap.set(\"<@\" + paramLabel + \"@>\", {\r\n                                            value: 'TextBox1', lableName: paramLabel,\r\n                                            //ID: param.length, \r\n                                            textValue: '',\r\n                                            TableName: \"\",\r\n                                            DisplayParam: \"\",\r\n                                            actuallableName: paramLabel.substring(1, paramLabel.length)\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }else if(newQuery.indexOf(\"<#\")!== -1){\r\n                                const paramLabelStartIndex = newQuery.indexOf(\"<#\");\r\n                                const paramLabelEndIndex = newQuery.indexOf(\"#>\");\r\n    \r\n                                const paramLabel = newQuery.substring(paramLabelStartIndex + 2, paramLabelEndIndex);\r\n    \r\n                                if (paramLabel.indexOf(\"T$\") !== -1) {\r\n                                    let displayName = \"\";\r\n                                    let localParam = \"\";\r\n                                    let tableName = \"\";\r\n    \r\n                                    newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\r\n    \r\n                                    if (paramLabel.indexOf(\"D$\") !== -1) {\r\n                                        localParam = paramLabel.substring(0, paramLabel.indexOf('D$'));\r\n                                        displayName = paramLabel.substring(paramLabel.indexOf('D$') + 2, paramLabel.indexOf('T$'));\r\n                                        //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\r\n                                        tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\r\n                                    }\r\n                                    else {\r\n                                        localParam = paramLabel.substring(0, paramLabel.indexOf('T$'));\r\n                                        //tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.indexOf('$P'));\r\n                                        tableName = paramLabel.substring(paramLabel.indexOf('T$') + 2, paramLabel.length);\r\n                                    }\r\n    \r\n                                    if (localParam.startsWith('d') || localParam.startsWith('D')) {\r\n                                        paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                            value: 'DateTimePicker',\r\n                                            lableName: localParam,\r\n                                            //ID: param.length, \r\n                                            Datetime: new Date(),\r\n                                            textValue: '',\r\n                                            TableName: tableName,\r\n                                            DisplayParam: displayName,\r\n                                            actuallableName: localParam.substring(1, localParam.length)\r\n                                        })\r\n                                    }else if(localParam==='slanguagetypecode'){\r\n                                        paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                            value: 'TextBox1', lableName: localParam,\r\n                                            //ID: param.length, \r\n                                            textValue: this.props.Login.userInfo.slanguagetypecode,\r\n                                            TableName: tableName,\r\n                                            DisplayParam: displayName,\r\n                                            actuallableName: localParam.substring(1, localParam.length)\r\n                                        });\r\n                                    }\r\n                                    else {\r\n                                        paramMap.set(\"P$\" + localParam + \"$P\", {\r\n                                            value: 'TextBox1', lableName: localParam,\r\n                                            //ID: param.length, \r\n                                            textValue: '',\r\n                                            TableName: tableName,\r\n                                            DisplayParam: displayName,\r\n                                            actuallableName: localParam.substring(1, localParam.length)\r\n                                        });\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    newQuery = newQuery.substring(paramLabelEndIndex + 2, newQuery.length);\r\n    \r\n                                   \r\n                                        paramMap.set(\"<#\" + paramLabel + \"#>\", {\r\n                                             lableName: paramLabel,\r\n                                            value: 'DateTimePicker',\r\n                                            //ID: param.length, \r\n                                            Datetime: new Date(),\r\n                                            textValue: '',\r\n                                            TableName: \"\",\r\n                                            DisplayParam: \"\",\r\n                                            actuallableName: paramLabel\r\n                                        });\r\n                                   \r\n                                }\r\n                            }\r\n                           \r\n                        }\r\n\r\n                        const updateInfo = {\r\n                            typeName: DEFAULT_RETURN, data: {\r\n                                screenName: \"Parameter for Results\",\r\n                                showExecute: true,\r\n                                showSave: true,\r\n                                showParam: true,\r\n                                showValidate: false,\r\n                                slideOperation: this.props.Login.operation,\r\n                                slideResult: [],\r\n                                slideList: [],\r\n                                screenFlag: \"showQuery\",\r\n                                param: paramMap,\r\n                                // Dparam: Dparam, TBLName: TBLName\r\n                            }\r\n                        }\r\n                        this.props.updateStore(updateInfo);\r\n                    }\r\n                    else {\r\n                        //query without parameters      \r\n                        const inputParam = {\r\n                            screenName: \"Results\",\r\n                            query: selectedRecord.ssqlquery.trim(),\r\n                            userInfo: this.props.Login.userInfo,\r\n                            slideOperation: this.props.Login.operation,\r\n                            screenFlag: \"showQuery\",\r\n                            data: {\r\n                                showExecute: false,\r\n                                showSave: false,\r\n                                showParam: true,\r\n                                showValidate: false,\r\n                                noSave: false,\r\n                                operation: \"view\",\r\n                                param: new Map(),\r\n                                screenName: \"Results\",\r\n                                slideOperation: this.props.Login.operation,\r\n                                screenFlag: \"showQuery\"\r\n                            }\r\n\r\n                        }\r\n                        this.props.executeUserQuery(inputParam);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        if (this.props.Login.resultStatus === \"Success\") {\r\n            let operation = this.props.Login.operation;\r\n            let inputData = [];\r\n            inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n            let postParam = undefined;\r\n            if (operation === \"update\"\r\n                || (operation === \"view\" && this.props.Login.slideOperation !== \"create\")) {\r\n                // edit\r\n                operation = \"update\";\r\n                postParam = { inputListName: \"SQLQuery\", selectedObject: \"SelectedSQLQuery\", primaryKeyField: \"nsqlquerycode\" };\r\n                let selectedRecord = { ...this.state.selectedRecord };\r\n                delete selectedRecord.nformcode;\r\n                inputData[\"sqlquery\"] = selectedRecord\r\n                this.queryFieldList.map(item => {\r\n                    return inputData[\"sqlquery\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\r\n                })\r\n            }\r\n            else {\r\n                //add               \r\n                inputData[\"sqlquery\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n                operation = \"create\";\r\n                this.queryFieldList.map(item => {\r\n                    return inputData[\"sqlquery\"][item] = this.state.selectedRecord[item]\r\n                });\r\n            }\r\n            if (inputData[\"sqlquery\"].hasOwnProperty('esignpassword')) {\r\n                if (inputData[\"sqlquery\"]['esignpassword'] === '') {\r\n                    delete inputData[\"sqlquery\"]['esigncomments']\r\n                    delete inputData[\"sqlquery\"]['esignpassword']\r\n                    delete inputData[\"sqlquery\"]['agree']\r\n                }\r\n            }\r\n            inputData[\"sqlquery\"][\"ncharttypecode\"] = this.state.selectedRecord[\"ncharttypecode\"] ? this.state.selectedRecord[\"ncharttypecode\"].value : \"-1\";\r\n            inputData[\"sqlquery\"][\"nquerytypecode\"] = this.props.Login.masterData.SelectedQueryType.nquerytypecode;\r\n            ///code removed\r\n            const inputParam = {\r\n                classUrl: \"sqlquery\",\r\n                methodUrl: \"SQLQuery\",\r\n                inputData: inputData,\r\n                operation,\r\n                saveType, formRef, postParam, searchRef: this.searchRef\r\n            }\r\n            const masterData = this.props.Login.masterData;\r\n\r\n            if (\r\n                showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData }, saveType, parentPopUpSize: \"lg\"\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n            }\r\n        }\r\n        else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_INAVLIDDATA\" }));\r\n        }\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n        // const inputParam = {\r\n        //     inputData: { \"userinfo\": this.props.Login.userInfo },\r\n        //     classUrl: \"sqlquery\",\r\n        //     methodUrl: \"SQLQuery\",\r\n        //     displayName: \"IDS_SQLBUILDER\",\r\n        //     userInfo: this.props.Login.userInfo\r\n        // };\r\n        // this.props.callService(inputParam);\r\n\r\n        let nquerytypecode = this.props.Login.masterData.SelectedQueryType ?\r\n            this.props.Login.masterData.SelectedQueryType.nquerytypecode : 0;\r\n        this.props.comboChangeQueryType(nquerytypecode, this.props.Login.masterData, this.props.Login.userInfo);\r\n\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        let { selectedRecord, dataStateUserQuery, userRoleControlRights, controlMap, filterData, queryType,\r\n            chartList, moduleFormName, tableType, selectedTableType, param, tableColumnList, selectedTableList,\r\n            foreignTableCount, foreignTableList, count, sqlQuery } = this.state;\r\n        let updateState = false;\r\n        // const masterData = this.props.Login.masterData;\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            updateState = true;\r\n            selectedRecord = this.props.Login.selectedRecord;\r\n        }\r\n        \r\n        if (this.props.Login.sqlQuery !== previousProps.Login.sqlQuery) {\r\n            updateState = true;\r\n            sqlQuery = this.props.Login.sqlQuery;\r\n        }\r\n\r\n        if (this.props.Login.tableColumnList !== previousProps.Login.tableColumnList) {\r\n            updateState = true;\r\n            tableColumnList = this.props.Login.tableColumnList;\r\n        }\r\n\r\n        if (this.props.Login.slideResult !== previousProps.Login.slideResult) {\r\n            dataStateUserQuery = {\r\n                skip: 0,\r\n                take: 10,\r\n            };\r\n            updateState = true;\r\n        }\r\n\r\n\r\n\r\n        if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n            const userRoleControlRight = [];\r\n            if (this.props.Login.userRoleControlRights) {\r\n                this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                    userRoleControlRight.push(item.ncontrolcode))\r\n            }\r\n            const controlMap1 = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n            // if (this.props.Login.masterData.QueryType !== previousProps.Login.masterData.QueryType) {\r\n            const queryTypeMap = constructOptionList(this.props.Login.masterData.QueryType || [], \"nquerytypecode\",\r\n                \"squerytypename\", \"nsorter\", \"ascending\", false);\r\n            const QueryTypeList = queryTypeMap.get(\"OptionList\");\r\n\r\n            // const selectedcombo = {\r\n            //     nquerytypecode: QueryTypeList.length > 0 ? {\r\n            //         \"value\": QueryTypeList[0].item.nquerytypecode,\r\n            //         \"label\": QueryTypeList[0].item.squerytypename\r\n            //     } : this.state.selectedcombo[\"nquerytypecode\"]\r\n\r\n            // }\r\n\r\n            // }\r\n            updateState = true;\r\n            userRoleControlRights = userRoleControlRight;\r\n            controlMap = controlMap1;\r\n            filterData = this.generateBreadCrumData();\r\n            queryType = QueryTypeList;\r\n        }\r\n        else {\r\n            filterData = this.generateBreadCrumData();\r\n            if (this.props.Login.chartList !== previousProps.Login.chartList || this.props.Login.moduleFormName !== previousProps.Login.moduleFormName) {\r\n\r\n                const chartListMap = constructOptionList(this.props.Login.chartList || [], \"ncharttypecode\",\r\n                    \"schartname\", undefined, undefined, undefined);\r\n                const chartTypeList = chartListMap.get(\"OptionList\");\r\n\r\n                const moduleFormNameMap = constructOptionList(this.props.Login.moduleFormName || [], \"nformcode\",\r\n                    \"sformname\", undefined, undefined, undefined);\r\n                const moduleFormNameList = moduleFormNameMap.get(\"OptionList\");\r\n                updateState = true;\r\n                chartList = chartTypeList\r\n                moduleFormName = moduleFormNameList\r\n            }\r\n            if (this.props.Login.masterData.QueryType !== previousProps.Login.masterData.QueryType) {\r\n                const queryTypeMap = constructOptionList(this.props.Login.masterData.QueryType || [], \"nquerytypecode\",\r\n                    \"squerytypename\", \"nsorter\", \"ascending\", false);\r\n                const QueryTypeList = queryTypeMap.get(\"OptionList\");\r\n\r\n                // const selectedcombo = {\r\n                //                         nquerytypecode: QueryTypeList.length > 0 ? {\r\n                //                             \"value\": QueryTypeList[0].item.nquerytypecode,\r\n                //                             \"label\": QueryTypeList[0].item.squerytypename\r\n                //                         } : this.state.selectedcombo[\"nquerytypecode\"]\r\n\r\n                //}\r\n\r\n                updateState = true;\r\n                queryType = QueryTypeList //selectedcombo , \r\n\r\n\r\n            }\r\n            if (this.props.Login.tableType !== previousProps.Login.tableType) {\r\n                const tableTypeMap = constructOptionList(this.props.Login.tableType || [], \"ntabletypecode\",\r\n                    \"stabletype\", undefined, undefined, undefined);\r\n                const tableTypeList = tableTypeMap.get(\"OptionList\");\r\n\r\n                selectedTableType = {\r\n                    ntabletypecode: tableTypeList.length > 0 ? {\r\n                        \"value\": tableTypeList[0].item.ntabletypecode,\r\n                        \"label\": tableTypeList[0].item.stabletype\r\n                    } : this.state.selectedTableType[\"ntabletypecode\"]\r\n\r\n                }\r\n                updateState = true;\r\n                tableType = tableTypeList\r\n\r\n            }\r\n            if (this.props.Login.masterData.SelectedQueryType !== previousProps.Login.masterData.SelectedQueryType) {\r\n                updateState = true;\r\n            }\r\n            if (this.props.Login.param !== previousProps.Login.param) {\r\n                updateState = true;\r\n                param = this.props.Login.param\r\n            }\r\n        }\r\n        if (updateState) {\r\n            this.setState({\r\n                selectedRecord, dataStateUserQuery, userRoleControlRights, controlMap, filterData, queryType,\r\n                chartList, moduleFormName, tableType, selectedTableType, param, tableColumnList, selectedTableList,\r\n                foreignTableCount, foreignTableList, count, sqlQuery\r\n            })\r\n        }\r\n    }\r\n\r\n    generateBreadCrumData() {\r\n        const breadCrumbData = [];\r\n        if (this.props.Login.masterData && this.props.Login.masterData.SelectedQueryType) {\r\n\r\n            breadCrumbData.push(\r\n                {\r\n                    \"label\": \"IDS_QUERYTYPE\",\r\n                    \"value\": this.props.Login.masterData.SelectedQueryType ?\r\n                        this.props.Login.masterData.SelectedQueryType.squerytypename : \"\"\r\n                    //this.props.intl.formatMessage({ id: this.props.Login.masterData.SelectedQueryType.squerytypename}) : \"\"\r\n                }\r\n            );\r\n        }\r\n        return breadCrumbData;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                masterData: [], inputParam: undefined, operation: null, modalName: undefined,\r\n                testData: {}, parameterData: {}, otherTestData: {}, formulaData: {}\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, updateStore, filterColumnData,\r\n    validateEsignCredential, getSQLQueryDetail, getSQLQueryComboService, comboChangeQueryType,\r\n    executeUserQuery, comboColumnValues, getColumnNamesByTableName,\r\n    getTablesName, getModuleFormName, getDatabaseTables, executeQuery, getForeignTable, \r\n    getViewColumns, getMasterData\r\n})(injectIntl(SQLBuilder));"]},"metadata":{},"sourceType":"module"}