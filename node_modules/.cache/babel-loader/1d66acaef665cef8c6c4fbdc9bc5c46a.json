{"ast":null,"code":"import rsapi from '../rsapi';\nimport Axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { fillRecordBasedOnCheckBoxSelection, checkCancelAndReject, filterRecordBasedOnTwoArrays, getRecordBasedOnPrimaryKeyName, getSameRecordFromTwoArrays, replaceUpdatedObject, sortData, updatedObjectWithNewElement, rearrangeDateFormat, convertDateTimetoString } from '../components/CommonScript';\nimport { DEFAULT_RETURN } from './LoginTypes';\nimport { intl } from '../components/App';\nimport { initRequest } from './LoginAction';\nimport { RegistrationSubType, RegistrationType, transactionStatus } from '../components/Enumeration';\nimport { crudMaster, postCRUDOrganiseTransSearch } from './ServiceAction';\nimport { getTestChildTabDetail } from './index.js';\nimport { constructOptionList } from '../components/CommonScript';\nexport function getSampleTypeChange(Map, masterData, event, labelname) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getRegTypeBySampleType\", Map).then(response => {\n      masterData = { ...masterData,\n        ...response.data,\n        [labelname]: { ...event.item\n        }\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getRegTypeChange(Map, masterData, event, labelname) {\n  return function (dispatch) {\n    rsapi.post(\"/registration/getRegSubTypeByRegType\", Map).then(response => {\n      // const RegistrationSubType = response.data[\"RegistrationSubType\"];\n      //  console.log(response.data);\n      // RegistrationSubType.length > 0 ?\n      //     selectedRecord[\"nregsubtypecode\"] = {\n      //         \"value\": RegistrationSubType[0].nregsubtypecode,\n      //         \"label\": RegistrationSubType[0].sregsubtypename\n      //     } : selectedRecord[\"nregsubtypecode\"] = \"\";\n      // const [labelname] = event.item;\n      masterData = { ...masterData,\n        ...response.data,\n        [labelname]: { ...event.item\n        }\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getRegSubTypeChange(Map, masterData, event, labelname) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getRegSubTypeByRegType\", Map).then(response => {\n      masterData = { ...masterData,\n        ...response.data,\n        [labelname]: { ...event.item\n        }\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getComponentTestBySpec(Map, selectedRecord, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getComponentTestBySpec\", Map).then(response => {\n      const {\n        Component,\n        Test\n      } = response.data;\n      let slno = Component.length > 0 ? Component[0].slno : -1;\n      let selectedComponent = Component.length > 0 ? Component[0] : undefined;\n      let SelectedTest = [];\n      let SelectedSource = [];\n\n      if (Object.keys(Test).length > 0) {\n        SelectedTest = Test[slno];\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Component,\n          Test,\n          SelectedTest,\n          selectedComponent,\n          loading: false,\n          SelectedSource,\n          selectedRecord,\n          popUptestDataState: {\n            skip: 0,\n            take: 10\n          },\n          Source: []\n        }\n      });\n    }).catch(error => {\n      // console.log(error);\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getTestfromDB(objComponent, LoginProps, nflag) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let component = { ...objComponent\n    };\n    component[\"ncomponentcode\"] = objComponent[\"ncomponentcode\"] ? objComponent[\"ncomponentcode\"].value : -1;\n    component[\"nstoragelocationcode\"] = objComponent[\"nstoragelocationcode\"] ? objComponent[\"nstoragelocationcode\"].value : -1;\n    component[\"nstorageconditioncode\"] = objComponent[\"nstorageconditioncode\"] ? objComponent[\"nstorageconditioncode\"].value : -1;\n    component[\"slno\"] = LoginProps.Component ? Object.keys(LoginProps.Component).length + 1 : 0;\n    component[\"scomponentname\"] = objComponent[\"ncomponentcode\"].label;\n    component[\"sstoragelocationname\"] = objComponent[\"nstoragelocationcode\"] && objComponent[\"nstoragelocationcode\"].label ? objComponent[\"nstoragelocationcode\"].label : \"\";\n    component[\"sstorageconditionname\"] = objComponent[\"nstorageconditioncode\"] && objComponent[\"nstorageconditioncode\"].label ? objComponent[\"nstorageconditioncode\"].label : \"\";\n    component[\"ntzdmanufdate\"] = objComponent[\"ntzdmanufdate\"] ? objComponent[\"ntzdmanufdate\"].value : -1;\n    component[\"ntzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].value : -1;\n    component[\"stzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].label : \"\";\n    component[\"nplasmafilecode\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].value : -1;\n    component[\"splasmafilenumber\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].label : \"\";\n    const dreceiveddate = objComponent[\"dreceiveddate\"];\n    component[\"dreceiveddate\"] = dreceiveddate; //formatInputDate(objComponent[\"dreceiveddate\"], false);\n\n    component[\"sreceiveddate\"] = convertDateTimetoString(dreceiveddate, LoginProps.userInfo); //formatInputDateWithoutT(objComponent[\"dreceiveddate\"], false);//formatDate(objComponent[\"sreceiveddate\"]);\n    // rsapi.post(\"/registration/getTestfromDB\", { \"Component\": component })\n\n    rsapi.post(\"/registration/getTestfromDB\", {\n      nspecsampletypecode: component.nspecsampletypecode,\n      slno: component.slno\n    }).then(response => {\n      let TestData = response.data;\n      let slno = component.slno;\n      let SelectedTest = [];\n      let loadComponent = true;\n      let selectComponent = {};\n      let showSaveContinue = true;\n      let SelectedSource = []; // let openChildModal = true;\n\n      let selectedComponent = undefined;\n      let parentPopUpSize = \"lg\"; // selectComponent = objComponent\n\n      if (nflag === 1) {\n        loadComponent = true;\n        objComponent[\"smanuflotno\"] = \"\";\n        objComponent[\"dreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime); //new Date(LoginProps.CurrentTime);\n\n        objComponent[\"sreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime); //new Date(LoginProps.CurrentTime);\n\n        selectComponent = objComponent;\n      } else {\n        loadComponent = false;\n        parentPopUpSize = \"xl\"; // openChildModal = false;\n\n        showSaveContinue = false;\n        selectComponent = undefined;\n      }\n\n      let Test = LoginProps.Test || [];\n      let Component = LoginProps.Component || [];\n      Component.unshift(component);\n      selectedComponent = component;\n      Test[slno] = response.data;\n      SelectedTest = TestData;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Component,\n          Test,\n          SelectedTest,\n          selectComponent,\n          selectedComponent,\n          loadComponent,\n          showSaveContinue,\n          parentPopUpSize,\n          loading: false,\n          SelectedSource\n        }\n      }); // console.log(response.data);\n    }).catch(error => {\n      //   console.log(error);\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getTest(objComponent, LoginProps) {\n  return function (dispatch) {\n    if (Object.keys(objComponent).length > 0) {\n      dispatch(initRequest(true)); //rsapi.post(\"/registration/getTestfromDB\", { \"Component\": objComponent })\n\n      rsapi.post(\"/registration/getTestfromDB\", {\n        nspecsampletypecode: objComponent.nspecsampletypecode,\n        slno: objComponent.slno\n      }).then(response => {\n        let TestData = response.data;\n        let Test = LoginProps.Test || [];\n        let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\n        const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestgrouptestcode\");\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            TestCombined,\n            loadTest: true,\n            openChildModal: false,\n            ChildscreenName: \"Test\",\n            childoperation: \"create\",\n            parentPopUpSize: \"lg\",\n            loading: false\n          }\n        });\n      }).catch(error => {\n        //console.log(error);\n        toast.error(error.message);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTCOMPONENTTOADDTEST\"\n      }));\n    }\n  };\n}\nexport function EditComponent(Map, component, userInfo, LoginProps) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", Map);\n    const timezone = rsapi.post(\"timezone/getTimeZone\");\n    urlArray = [ComponentTestBySpec, timezone];\n    Axios.all(urlArray).then(response => {\n      const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n      const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const TimeZoneField = response[1].data;\n      const lstComponent = lstComponentMap.get(\"OptionList\");\n      const timeZoneList = timeZoneListMap.get(\"OptionList\");\n      component[\"ncomponentcode\"] = {\n        label: component.scomponentname,\n        value: component.ncomponentcode\n      };\n      component[\"dreceiveddate\"] = rearrangeDateFormat(userInfo, component[\"sreceiveddate\"]);\n      let ntzdreceivedate = component.ntzdreceivedate;\n\n      if (component.ntzdreceivedate !== null && typeof component.ntzdreceivedate === \"object\") {\n        ntzdreceivedate = component.ntzdreceivedate.value;\n      }\n\n      component[\"ntzdreceivedate\"] = component.ntzdreceivedate ? {\n        \"label\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].stimezoneid,\n        \"value\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].ntimezonecode\n      } : \"\"; // if(typeof Component.ntzdmanufdate)\n      // Component[\"ntzdmanufdate\"] = Component.ntzdmanufdate ? { \"label\": timeZoneList[timeZoneList.findIndex(x => x.ntimezonecode === Component.ntzdmanufdate)].stimezoneid, \"value\": timeZoneList[timeZoneList.findIndex(x => x.ntimezonecode === Component.ntzdmanufdate)].ntimezonecode } : \"\"\n      // Component[\"ntzdreceivedate\"] = Component.ntzdreceivedate ? { \"label\": timeZoneList[timeZoneList.findIndex(x => x.ntimezonecode === Component.ntzdreceivedate)].stimezoneid, \"value\": timeZoneList[timeZoneList.findIndex(x => x.ntimezonecode === Component.ntzdreceivedate)].ntimezonecode } : \"\"\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loadComponent: true,\n          childoperation: \"update\",\n          lstComponent,\n          StorageCondition,\n          StorageLocation,\n          ChildscreenName: \"Component\",\n          openChildModal: false,\n          selectComponent: component,\n          parentPopUpSize: \"lg\",\n          timeZoneList,\n          plasmaMasterFile,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      //console.log(error);\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    }); // return dispatch({\n    //     type: DEFAULT_RETURN,\n    //     payload: {\n    //     }\n    // })\n  };\n}\nexport function ReloadData(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData\n    }).then(response => {\n      let masterData = { ...inputData.masterData,\n        ...response.data\n      };\n\n      if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\n        inputData.searchSampleRef.current.value = \"\";\n        masterData['searchedSample'] = undefined;\n      }\n\n      if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n        inputData.searchSubSampleRef.current.value = \"\";\n        masterData['searchedSubSample'] = undefined;\n      }\n\n      if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n        inputData.searchTestRef.current.value = \"\"; //masterData['searchedTests'] = undefined\n\n        masterData['searchedTest'] = undefined;\n      } // let selectedFilter = inputData.selectedFilter;\n      // selectedFilter[\"fromdate\"] = \"\";\n      // selectedFilter[\"todate\"] = \"\";\n\n\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          showFilter: false,\n          skip: 0,\n          testskip: 0,\n          take: undefined,\n          testtake: undefined,\n          showSample: undefined //selectedFilter\n\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n} // export function validateEsignforRegistration(inputParam) {\n//     return (dispatch) => {\n//         dispatch(initRequest(true));\n//         return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData)\n//             .then(response => {\n//                 if (response.data === \"Success\") {\n//                     const methodUrl = \"registration\";\n//                     inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\n//                     if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()] &&\n//                         inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]) {\n//                         delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]\n//                         delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"]\n//                         delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"]\n//                     }\n//                     //dispatch(inputParam[\"screenData\"][\"inputParam\"].performAction(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"]))\n//                     dispatch(dispatchMethods(inputParam[\"screenData\"]))\n//                 }\n//             })\n//             .catch(error => {\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\n//                 if (error.response.status === 500) {\n//                     toast.error(error.message);\n//                 }\n//                 else {\n//                     toast.warn(error.response.data);\n//                 }\n//             })\n//     };\n// }\n// function dispatchMethods(screenData) {\n//     return (dispatch) => {\n//         let action = screenData.inputParam.action\n//         switch (action) {\n//             case \"preregister\":\n//                 dispatch(insertRegistration(screenData.inputParam, screenData.masterData));\n//                 break;\n//             case \"editSample\":\n//                 dispatch(updateRegistration(screenData.inputParam, screenData.masterData, 'openModal'));\n//                 break;\n//             case \"accept\":\n//                 dispatch(acceptRegistration(screenData.inputParam, screenData.masterData));\n//                 break;\n//             case \"quarantine\":\n//                 dispatch(preregRecordToQuarantine(screenData.inputParam, screenData.masterData));\n//                 break;\n//             case \"cancelTest\":\n//                 dispatch(cancelTestAction(screenData.inputParam, screenData.masterData));\n//                 break;\n//             case \"cancelSample\":\n//                 dispatch(cancelSampleAction(screenData.inputParam, screenData.masterData));\n//                 break;\n//             case \"addregsourcecountry\":\n//                 dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\n//                 break;\n//             case \"deleteregsourcecountry\":\n//                 dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\n//                 break;\n//             case \"printer\":\n//                 dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\n//                 break;\n//             default:\n//                 break;\n//         }\n//     }\n// }\n\nexport function getTreeByProduct(Map, selectedRecord, comboData, inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getTreeByProduct\", Map).then(response => {\n      let {\n        Specification,\n        AgaramTree,\n        ActiveKey,\n        FocusKey,\n        OpenNodes,\n        Manufacturer\n      } = [];\n      const selectedSpec = {};\n\n      if (response.data[\"rtn\"] === true) {\n        Specification = constructOptionList(response.data[\"Specification\"] || [], \"nallottedspeccode\", \"sspecname\", undefined, undefined, true).get(\"OptionList\");\n        AgaramTree = response.data[\"AgaramTree\"];\n        ActiveKey = response.data[\"ActiveKey\"];\n        FocusKey = response.data[\"FocusKey\"];\n        OpenNodes = response.data[\"OpenNodes\"]; //Manufacturer = response.data[\"Manufacturer\"];\n\n        selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\n          \"value\": Specification[0].value,\n          \"label\": Specification[0].label\n        } : \"\";\n        selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\n        selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\n      }\n\n      selectedRecord = { ...selectedRecord,\n        ...selectedSpec\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Specification,\n          selectedRecord,\n          AgaramTree,\n          ActiveKey,\n          FocusKey,\n          OpenNodes,\n          Test: [],\n          SelectedTest: [],\n          loading: false,\n          comboData,\n          ...inputParam,\n          selectedSpec\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport const getNewRegSpecification = (inputParam, masterData) => {\n  return dispatch => {\n    if (inputParam.selectedNode !== null) {\n      dispatch(initRequest(true));\n      rsapi.post(\"/registration/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam,\n        ntreetemplatemanipulationcode: inputParam.selectedNode.ntemplatemanipulationcode\n      }).then(response => {\n        sortData(response.data);\n        let Specification = constructOptionList(response.data || [], \"nallottedspeccode\", \"sspecname\", false, false, true).get(\"OptionList\");\n        let selectedComponent = undefined;\n        inputParam.selectedRecord[\"nallottedspeccode\"] = Specification.length > 0 ? {\n          value: Specification[0].value,\n          label: Specification[0].label,\n          item: Specification[0].item\n        } : \"\";\n        inputParam.selectedRecord[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\n        inputParam.selectedRecord[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            ActiveKey: inputParam.activeKey,\n            FocusKey: inputParam.focusKey,\n            primaryKey: inputParam.primaryKey,\n            Specification: Specification,\n            selectedNode: inputParam.selectedNode,\n            selectedRecord: inputParam.selectedRecord,\n            Test: [],\n            selectedComponent,\n            SelectedTest: [],\n            loading: false,\n            showSample: undefined\n          }\n        });\n      }).catch(error => {\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.warn(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    }\n  };\n};\nexport function AddComponents(Map) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", Map);\n    const timezone = rsapi.post(\"timezone/getTimeZone\"); // const StorageConditionbySite = rsapi.post(\"/storagecondition/getStorageCondition\", {\n    //     \"userinfo\": Map[\"userinfo\"]\n    // });\n    // const StorageLocationbySite = rsapi.post(\"/storagelocation/getStorageLocation\", {\n    //     \"userinfo\": Map[\"userinfo\"]\n    // });\n    // if (Map[\"nregtypecode\"] === RegistrationType.PLASMA_POOL) {\n    //     const PlasmaMasterByManufCode = rsapi.post(\"/plasmamasterfile/getPlasmaMasterFileByManufcode\",\n    //         { \"userinfo\": Map[\"userinfo\"], nmanufcode: Map[\"nmanufcode\"] })\n    //     urlArray = [PlasmaMasterByManufCode]\n    // }\n\n    urlArray = [ComponentTestBySpec, timezone, ...urlArray];\n    Axios.all(urlArray).then(response => {\n      const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true); // const StorageConditionMap = constructOptionList(response[1].data || [], \"nstorageconditioncode\",\n      //     \"sstorageconditionname\", undefined, undefined, true);\n      // const StorageLocationMap = constructOptionList(response[2].data || [], \"nstoragelocationcode\",\n      //     \"sstoragelocationname\", undefined, undefined, true);\n\n      const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true); // const StorageCondition = response[1].data;\n      // const StorageLocation = response[2].data;\n      // const timeZoneList = response[3].data;\n      // let plasmaMasterFile = [];\n      // if (Map[\"nregtypecode\"] === RegistrationType.PLASMA_POOL) {\n      //     plasmaMasterFile = constructOptionList(response[4].data || [], \"nplasmafilecode\",\n      //         \"splasmafilenumber\", undefined, undefined, true).get(\"OptionList\");\n      // }\n\n      const lstComponent = lstComponentMap.get(\"OptionList\"); // const StorageCondition = StorageConditionMap.get(\"OptionList\");\n      // const StorageLocation = StorageLocationMap.get(\"OptionList\");\n\n      const timeZoneList = timeZoneListMap.get(\"OptionList\"); // const dreceiveddate = lstComponent[0].dreceiveddate || [];\n\n      let dreceiveddate = null;\n      if (lstComponent[0].item.sreceiveddate) dreceiveddate = rearrangeDateFormat(Map[\"userinfo\"], lstComponent[0].item.sreceiveddate); //new Date(lstComponent[0].item.sreceiveddate);//|| [];\n\n      let selectComponent = {\n        sreceiveddate: dreceiveddate,\n        dreceiveddate,\n        //: new Date(dreceiveddate),\n        // ntzdmanufdate: { \"label\": Map[\"userinfo\"].stimezoneid, \"value\": Map[\"userinfo\"].ntimezonecode },\n        ntzdreceivedate: {\n          \"label\": Map[\"userinfo\"].stimezoneid,\n          \"value\": Map[\"userinfo\"].ntimezonecode\n        },\n        // stzdmanufdate: Map[\"userinfo\"].stimezoneid,\n        stzdreceivedate: Map[\"userinfo\"].stimezoneid,\n        // nstorageconditioncode: StorageConditionMap.get(\"DefaultValue\"),\n        scomments: \"\",\n        nallottedspeccode: lstComponent[0].item.nallottedspeccode\n      };\n      let CurrentTime = dreceiveddate; //new Date(dreceiveddate);\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loadComponent: true,\n          lstComponent,\n          dreceiveddate,\n          ChildscreenName: \"Component\",\n          showSaveContinue: true,\n          openChildModal: false,\n          childoperation: \"create\",\n          selectComponent,\n          parentPopUpSize: \"lg\",\n          CurrentTime,\n          timeZoneList,\n          loading: false,\n          openPortal: true,\n          openModal: false\n        }\n      });\n    }).catch(error => {\n      // console.log(error);\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/actions/RegistrationAction.js"],"names":["rsapi","Axios","toast","fillRecordBasedOnCheckBoxSelection","checkCancelAndReject","filterRecordBasedOnTwoArrays","getRecordBasedOnPrimaryKeyName","getSameRecordFromTwoArrays","replaceUpdatedObject","sortData","updatedObjectWithNewElement","rearrangeDateFormat","convertDateTimetoString","DEFAULT_RETURN","intl","initRequest","RegistrationSubType","RegistrationType","transactionStatus","crudMaster","postCRUDOrganiseTransSearch","getTestChildTabDetail","constructOptionList","getSampleTypeChange","Map","masterData","event","labelname","dispatch","post","then","response","data","item","type","payload","loading","catch","error","message","getRegTypeChange","getRegSubTypeChange","getComponentTestBySpec","selectedRecord","Component","Test","slno","length","selectedComponent","undefined","SelectedTest","SelectedSource","Object","keys","popUptestDataState","skip","take","Source","getTestfromDB","objComponent","LoginProps","nflag","component","value","label","dreceiveddate","userInfo","nspecsampletypecode","TestData","loadComponent","selectComponent","showSaveContinue","parentPopUpSize","CurrentTime","unshift","getTest","componentTest","TestCombined","loadTest","openChildModal","ChildscreenName","childoperation","warn","formatMessage","id","EditComponent","urlArray","ComponentTestBySpec","timezone","all","lstComponentMap","lstComponent","timeZoneListMap","TimeZoneField","get","timeZoneList","scomponentname","ncomponentcode","ntzdreceivedate","findIndex","x","ntimezonecode","stimezoneid","StorageCondition","StorageLocation","plasmaMasterFile","ReloadData","inputData","searchSampleRef","current","searchSubSampleRef","searchTestRef","showFilter","testskip","testtake","showSample","status","getTreeByProduct","comboData","inputParam","Specification","AgaramTree","ActiveKey","FocusKey","OpenNodes","Manufacturer","selectedSpec","sversion","ntemplatemanipulationcode","getNewRegSpecification","selectedNode","operation","methodUrl","ntreetemplatemanipulationcode","activeKey","focusKey","primaryKey","AddComponents","sreceiveddate","stzdreceivedate","scomments","nallottedspeccode","openPortal","openModal"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport Axios from 'axios';\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport {\r\n    fillRecordBasedOnCheckBoxSelection,checkCancelAndReject,\r\n    filterRecordBasedOnTwoArrays, getRecordBasedOnPrimaryKeyName, getSameRecordFromTwoArrays, replaceUpdatedObject, sortData, updatedObjectWithNewElement, rearrangeDateFormat, convertDateTimetoString\r\n} from '../components/CommonScript'\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport { intl } from '../components/App';\r\nimport { initRequest } from './LoginAction';\r\nimport { RegistrationSubType, RegistrationType, transactionStatus } from '../components/Enumeration';\r\nimport { crudMaster, postCRUDOrganiseTransSearch } from './ServiceAction'\r\nimport { getTestChildTabDetail } from './index.js'\r\nimport { constructOptionList } from '../components/CommonScript';\r\n\r\nexport function getSampleTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getRegTypeBySampleType\", Map)\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        rsapi.post(\"/registration/getRegSubTypeByRegType\", Map)\r\n            .then(response => {\r\n                // const RegistrationSubType = response.data[\"RegistrationSubType\"];\r\n\r\n                //  console.log(response.data);\r\n                // RegistrationSubType.length > 0 ?\r\n                //     selectedRecord[\"nregsubtypecode\"] = {\r\n                //         \"value\": RegistrationSubType[0].nregsubtypecode,\r\n                //         \"label\": RegistrationSubType[0].sregsubtypename\r\n                //     } : selectedRecord[\"nregsubtypecode\"] = \"\";\r\n                // const [labelname] = event.item;\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegSubTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getRegSubTypeByRegType\", Map)\r\n\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport function getComponentTestBySpec(Map, selectedRecord, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getComponentTestBySpec\", Map)\r\n            .then(response => {\r\n                const { Component, Test } = response.data;\r\n                let slno = Component.length > 0 ? Component[0].slno : -1;\r\n                let selectedComponent = Component.length > 0 ? Component[0] : undefined\r\n                let SelectedTest = [];\r\n                let SelectedSource = [];\r\n\r\n                if (Object.keys(Test).length > 0) {\r\n                    SelectedTest = Test[slno];\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Component, Test, SelectedTest, selectedComponent, loading: false, \r\n                        SelectedSource, selectedRecord, popUptestDataState:{skip:0, take:10},Source:[]\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function getTestfromDB(objComponent, LoginProps, nflag) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let component = { ...objComponent };\r\n        component[\"ncomponentcode\"] = objComponent[\"ncomponentcode\"] ? objComponent[\"ncomponentcode\"].value : -1;\r\n        component[\"nstoragelocationcode\"] = objComponent[\"nstoragelocationcode\"] ? objComponent[\"nstoragelocationcode\"].value : -1;\r\n        component[\"nstorageconditioncode\"] = objComponent[\"nstorageconditioncode\"] ? objComponent[\"nstorageconditioncode\"].value : -1;\r\n        component[\"slno\"] = LoginProps.Component? Object.keys(LoginProps.Component).length + 1: 0;\r\n        component[\"scomponentname\"] = objComponent[\"ncomponentcode\"].label;\r\n        component[\"sstoragelocationname\"] = objComponent[\"nstoragelocationcode\"] && objComponent[\"nstoragelocationcode\"].label ? objComponent[\"nstoragelocationcode\"].label : \"\";\r\n        component[\"sstorageconditionname\"] = objComponent[\"nstorageconditioncode\"] && objComponent[\"nstorageconditioncode\"].label ? objComponent[\"nstorageconditioncode\"].label : \"\";\r\n        component[\"ntzdmanufdate\"] = objComponent[\"ntzdmanufdate\"] ? objComponent[\"ntzdmanufdate\"].value : -1;\r\n        component[\"ntzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].value : -1;\r\n        component[\"stzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].label : \"\";\r\n        component[\"nplasmafilecode\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].value : -1;\r\n        component[\"splasmafilenumber\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].label : \"\";\r\n        const dreceiveddate = objComponent[\"dreceiveddate\"];\r\n        component[\"dreceiveddate\"] = dreceiveddate;//formatInputDate(objComponent[\"dreceiveddate\"], false);\r\n        component[\"sreceiveddate\"] = convertDateTimetoString(dreceiveddate, LoginProps.userInfo);//formatInputDateWithoutT(objComponent[\"dreceiveddate\"], false);//formatDate(objComponent[\"sreceiveddate\"]);\r\n        // rsapi.post(\"/registration/getTestfromDB\", { \"Component\": component })\r\n        rsapi.post(\"/registration/getTestfromDB\", {\r\n            nspecsampletypecode: component.nspecsampletypecode,\r\n            slno: component.slno\r\n        })\r\n            .then(response => {\r\n                let TestData = response.data;\r\n                let slno = component.slno;\r\n                let SelectedTest = [];\r\n                let loadComponent = true;\r\n                let selectComponent = {};\r\n                let showSaveContinue = true;\r\n                let SelectedSource = [];\r\n                // let openChildModal = true;\r\n                let selectedComponent = undefined;\r\n                let parentPopUpSize = \"lg\"\r\n                // selectComponent = objComponent\r\n                if (nflag === 1) {\r\n                    loadComponent = true;\r\n                    objComponent[\"smanuflotno\"] = \"\";\r\n                    objComponent[\"dreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime)//new Date(LoginProps.CurrentTime);\r\n                    objComponent[\"sreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime)//new Date(LoginProps.CurrentTime);\r\n                    selectComponent = objComponent;\r\n                } else {\r\n                    loadComponent = false;\r\n                    parentPopUpSize = \"xl\"\r\n                    // openChildModal = false;\r\n                    showSaveContinue = false;\r\n                    selectComponent = undefined\r\n                }\r\n                let Test = LoginProps.Test || [];\r\n                let Component = LoginProps.Component || [];\r\n                Component.unshift(component);\r\n                selectedComponent = component;\r\n                Test[slno] = response.data;\r\n                SelectedTest = TestData;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Component, Test, SelectedTest, selectComponent, selectedComponent,\r\n                        loadComponent, showSaveContinue, parentPopUpSize, loading: false, SelectedSource\r\n                    }\r\n                });\r\n                // console.log(response.data);\r\n            })\r\n            .catch(error => {\r\n                //   console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTest(objComponent, LoginProps) {\r\n    return function (dispatch) {\r\n\r\n        if (Object.keys(objComponent).length > 0) {\r\n            dispatch(initRequest(true));\r\n            //rsapi.post(\"/registration/getTestfromDB\", { \"Component\": objComponent })\r\n            rsapi.post(\"/registration/getTestfromDB\", {\r\n                nspecsampletypecode: objComponent.nspecsampletypecode,\r\n                slno: objComponent.slno\r\n            })\r\n                .then(response => {\r\n                    let TestData = response.data;\r\n                    let Test = LoginProps.Test || [];\r\n                    let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n                    const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestgrouptestcode\");\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            TestCombined, loadTest: true, openChildModal: false, ChildscreenName: \"Test\",\r\n                            childoperation: \"create\", parentPopUpSize: \"lg\", loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    //console.log(error);\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                })\r\n        } else {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTCOMPONENTTOADDTEST\" }));\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function EditComponent(Map, component, userInfo, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [];\r\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\",\r\n            Map);\r\n\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n\r\n        urlArray = [ComponentTestBySpec, timezone]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, true);\r\n                const TimeZoneField = response[1].data;\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n      \r\n                component[\"ncomponentcode\"] = { label: component.scomponentname, value: component.ncomponentcode }\r\n                component[\"dreceiveddate\"] = rearrangeDateFormat(userInfo, component[\"sreceiveddate\"]);\r\n\r\n                let ntzdreceivedate = component.ntzdreceivedate;\r\n                if (component.ntzdreceivedate !== null && typeof component.ntzdreceivedate === \"object\") {\r\n                    ntzdreceivedate = component.ntzdreceivedate.value;\r\n                }\r\n                component[\"ntzdreceivedate\"] = component.ntzdreceivedate ? { \"label\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].stimezoneid, \"value\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].ntimezonecode } : \"\"\r\n\r\n\r\n                // if(typeof Component.ntzdmanufdate)\r\n                // Component[\"ntzdmanufdate\"] = Component.ntzdmanufdate ? { \"label\": timeZoneList[timeZoneList.findIndex(x => x.ntimezonecode === Component.ntzdmanufdate)].stimezoneid, \"value\": timeZoneList[timeZoneList.findIndex(x => x.ntimezonecode === Component.ntzdmanufdate)].ntimezonecode } : \"\"\r\n                // Component[\"ntzdreceivedate\"] = Component.ntzdreceivedate ? { \"label\": timeZoneList[timeZoneList.findIndex(x => x.ntimezonecode === Component.ntzdreceivedate)].stimezoneid, \"value\": timeZoneList[timeZoneList.findIndex(x => x.ntimezonecode === Component.ntzdreceivedate)].ntimezonecode } : \"\"\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadComponent: true, childoperation: \"update\",\r\n                        lstComponent, StorageCondition, StorageLocation, ChildscreenName: \"Component\",\r\n                        openChildModal: false, selectComponent: component, parentPopUpSize: \"lg\",\r\n                        timeZoneList, plasmaMasterFile, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                //console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n\r\n        // return dispatch({\r\n        //     type: DEFAULT_RETURN,\r\n        //     payload: {\r\n\r\n        //     }\r\n        // })\r\n    }\r\n}\r\n\r\n\r\nexport function ReloadData(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData })\r\n            .then(response => {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    ...response.data\r\n                }\r\n                if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                    inputData.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    //masterData['searchedTests'] = undefined\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // let selectedFilter = inputData.selectedFilter;\r\n                // selectedFilter[\"fromdate\"] = \"\";\r\n                // selectedFilter[\"todate\"] = \"\";\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        testskip: 0,\r\n                        take: undefined,\r\n                        testtake: undefined,\r\n                        showSample: undefined,\r\n                        //selectedFilter\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n// export function validateEsignforRegistration(inputParam) {\r\n//     return (dispatch) => {\r\n//         dispatch(initRequest(true));\r\n//         return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData)\r\n//             .then(response => {\r\n//                 if (response.data === \"Success\") {\r\n\r\n//                     const methodUrl = \"registration\";\r\n//                     inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\r\n\r\n//                     if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()] &&\r\n//                         inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]) {\r\n//                         delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]\r\n//                         delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"]\r\n//                         delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"]\r\n//                     }\r\n//                     //dispatch(inputParam[\"screenData\"][\"inputParam\"].performAction(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"]))\r\n//                     dispatch(dispatchMethods(inputParam[\"screenData\"]))\r\n//                 }\r\n//             })\r\n//             .catch(error => {\r\n//                 dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n//                 if (error.response.status === 500) {\r\n//                     toast.error(error.message);\r\n//                 }\r\n//                 else {\r\n//                     toast.warn(error.response.data);\r\n//                 }\r\n//             })\r\n//     };\r\n// }\r\n\r\n// function dispatchMethods(screenData) {\r\n//     return (dispatch) => {\r\n//         let action = screenData.inputParam.action\r\n//         switch (action) {\r\n//             case \"preregister\":\r\n//                 dispatch(insertRegistration(screenData.inputParam, screenData.masterData));\r\n//                 break;\r\n//             case \"editSample\":\r\n//                 dispatch(updateRegistration(screenData.inputParam, screenData.masterData, 'openModal'));\r\n//                 break;\r\n//             case \"accept\":\r\n//                 dispatch(acceptRegistration(screenData.inputParam, screenData.masterData));\r\n//                 break;\r\n//             case \"quarantine\":\r\n//                 dispatch(preregRecordToQuarantine(screenData.inputParam, screenData.masterData));\r\n//                 break;\r\n//             case \"cancelTest\":\r\n//                 dispatch(cancelTestAction(screenData.inputParam, screenData.masterData));\r\n//                 break;\r\n//             case \"cancelSample\":\r\n//                 dispatch(cancelSampleAction(screenData.inputParam, screenData.masterData));\r\n//                 break;\r\n//             case \"addregsourcecountry\":\r\n//                 dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n//                 break;\r\n//             case \"deleteregsourcecountry\":\r\n//                 dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n//                 break;\r\n//             case \"printer\":\r\n//                 dispatch(crudMaster(screenData.inputParam, screenData.masterData, \"openModal\"))\r\n//                 break;\r\n//             default:\r\n//                 break;\r\n//         }\r\n//     }\r\n// }\r\n\r\n\r\nexport function getTreeByProduct(Map, selectedRecord,comboData,inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getTreeByProduct\", Map)\r\n            .then(response => {\r\n                let { Specification, AgaramTree, ActiveKey, FocusKey, OpenNodes, Manufacturer } = [];\r\n                const selectedSpec={}\r\n                if (response.data[\"rtn\"] === true) {\r\n                    Specification = constructOptionList(response.data[\"Specification\"] || [], \"nallottedspeccode\",\r\n                        \"sspecname\", undefined, undefined, true).get(\"OptionList\");\r\n                    AgaramTree = response.data[\"AgaramTree\"];\r\n                    ActiveKey = response.data[\"ActiveKey\"];\r\n                    FocusKey = response.data[\"FocusKey\"];\r\n                    OpenNodes = response.data[\"OpenNodes\"];\r\n                    //Manufacturer = response.data[\"Manufacturer\"];\r\n                    selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\r\n                            \"value\": Specification[0].value,\r\n                             \"label\": Specification[0].label\r\n                         }: \"\";\r\n                             \r\n                         selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\"\r\n                         selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1\r\n                } \r\n               selectedRecord={...selectedRecord,...selectedSpec}\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Specification, \r\n                        selectedRecord,\r\n                        AgaramTree, ActiveKey, FocusKey, OpenNodes,\r\n                        Test: [],\r\n                        SelectedTest: [], \r\n                        loading: false,\r\n                        comboData,\r\n                        ...inputParam,\r\n                        selectedSpec\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport const getNewRegSpecification = (inputParam, masterData) => {\r\n    return (dispatch) => {\r\n        if (inputParam.selectedNode !== null) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/registration/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam, ntreetemplatemanipulationcode: inputParam.selectedNode.ntemplatemanipulationcode })\r\n                .then(response => {\r\n                    sortData(response.data);\r\n                    let Specification = constructOptionList(response.data || [], \"nallottedspeccode\", \"sspecname\", false, false, true).get(\"OptionList\");\r\n                    let selectedComponent = undefined;\r\n                        inputParam.selectedRecord[\"nallottedspeccode\"] = Specification.length > 0 ?{value:Specification[0].value,label:Specification[0].label,item:Specification[0].item}  : \"\";\r\n                        inputParam.selectedRecord[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\r\n                        inputParam.selectedRecord[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ActiveKey: inputParam.activeKey,\r\n                            FocusKey: inputParam.focusKey,\r\n                            primaryKey: inputParam.primaryKey,\r\n                            Specification: Specification,\r\n                            selectedNode: inputParam.selectedNode,\r\n                            selectedRecord: inputParam.selectedRecord,\r\n                            Test:[],\r\n                            selectedComponent,\r\n                            SelectedTest:[],\r\n                            loading: false,\r\n                            showSample: undefined\r\n                        }\r\n                    }\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function AddComponents(Map) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = []\r\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\",\r\n            Map);\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n        // const StorageConditionbySite = rsapi.post(\"/storagecondition/getStorageCondition\", {\r\n        //     \"userinfo\": Map[\"userinfo\"]\r\n        // });\r\n        // const StorageLocationbySite = rsapi.post(\"/storagelocation/getStorageLocation\", {\r\n        //     \"userinfo\": Map[\"userinfo\"]\r\n        // });\r\n        // if (Map[\"nregtypecode\"] === RegistrationType.PLASMA_POOL) {\r\n        //     const PlasmaMasterByManufCode = rsapi.post(\"/plasmamasterfile/getPlasmaMasterFileByManufcode\",\r\n        //         { \"userinfo\": Map[\"userinfo\"], nmanufcode: Map[\"nmanufcode\"] })\r\n        //     urlArray = [PlasmaMasterByManufCode]\r\n        // }\r\n\r\n        urlArray = [ComponentTestBySpec, timezone, ...urlArray\r\n        ]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                // const StorageConditionMap = constructOptionList(response[1].data || [], \"nstorageconditioncode\",\r\n                //     \"sstorageconditionname\", undefined, undefined, true);\r\n                // const StorageLocationMap = constructOptionList(response[2].data || [], \"nstoragelocationcode\",\r\n                //     \"sstoragelocationname\", undefined, undefined, true);\r\n                const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, true);\r\n\r\n                // const StorageCondition = response[1].data;\r\n                // const StorageLocation = response[2].data;\r\n                // const timeZoneList = response[3].data;\r\n               // let plasmaMasterFile = [];\r\n\r\n                // if (Map[\"nregtypecode\"] === RegistrationType.PLASMA_POOL) {\r\n                //     plasmaMasterFile = constructOptionList(response[4].data || [], \"nplasmafilecode\",\r\n                //         \"splasmafilenumber\", undefined, undefined, true).get(\"OptionList\");\r\n                // }\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                // const StorageCondition = StorageConditionMap.get(\"OptionList\");\r\n                // const StorageLocation = StorageLocationMap.get(\"OptionList\");\r\n                const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n                // const dreceiveddate = lstComponent[0].dreceiveddate || [];\r\n\r\n                let dreceiveddate = null;\r\n                if (lstComponent[0].item.sreceiveddate)\r\n                    dreceiveddate = rearrangeDateFormat(Map[\"userinfo\"], lstComponent[0].item.sreceiveddate);//new Date(lstComponent[0].item.sreceiveddate);//|| [];\r\n\r\n                let selectComponent = {\r\n                    sreceiveddate: dreceiveddate,\r\n                    dreceiveddate,//: new Date(dreceiveddate),\r\n                   // ntzdmanufdate: { \"label\": Map[\"userinfo\"].stimezoneid, \"value\": Map[\"userinfo\"].ntimezonecode },\r\n                    ntzdreceivedate: { \"label\": Map[\"userinfo\"].stimezoneid, \"value\": Map[\"userinfo\"].ntimezonecode },\r\n                   // stzdmanufdate: Map[\"userinfo\"].stimezoneid,\r\n                    stzdreceivedate: Map[\"userinfo\"].stimezoneid,\r\n                   // nstorageconditioncode: StorageConditionMap.get(\"DefaultValue\"),\r\n                    scomments: \"\",\r\n                    nallottedspeccode:lstComponent[0].item.nallottedspeccode\r\n                };\r\n                let CurrentTime = dreceiveddate;//new Date(dreceiveddate);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadComponent: true,\r\n                        lstComponent, dreceiveddate, ChildscreenName: \"Component\",\r\n                        showSaveContinue: true, openChildModal: false, childoperation: \"create\", selectComponent\r\n                        ,parentPopUpSize: \"lg\", CurrentTime, timeZoneList, loading: false, \r\n                        openPortal:true,openModal:false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}