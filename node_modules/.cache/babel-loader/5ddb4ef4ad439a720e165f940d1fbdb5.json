{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{injectIntl,FormattedMessage}from'react-intl';import{Row,Col,Card,Nav,FormGroup,FormLabel}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faTrashAlt,faCopy}from'@fortawesome/free-solid-svg-icons';import{process}from'@progress/kendo-data-query';import{toast}from'react-toastify';import ListMaster from'../../components/list-master/list-master.component';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import Esign from'../audittrail/Esign';import AddQuery from'./AddQuery';import AddParameter from'./AddParameter';import QueryTypeFilter from'./QueryTypeFilter';import{callService,crudMaster,validateEsignCredential,updateStore,getSQLQueryDetail,getSQLQueryComboService,filterColumnData,comboChangeQueryType,executeUserQuery,comboColumnValues,getColumnNamesByTableName,getTablesName,getModuleFormName,getDatabaseTables,executeQuery,getForeignTable,getViewColumns,getMasterData,createQueryBuilder,getParameterFromQuery,getSelectedQueryBuilder,updateQueryBuilder,getQueryBuilder}from'../../actions';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{transactionStatus,queryTypeFilter,tableType,ColumnType}from'../../components/Enumeration';import{constructOptionList,getControlMap,showEsign}from'../../components/CommonScript';import{ReadOnlyText,ContentPanel}from'../../components/App.styles';import rsapi from'../../rsapi';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import{Affix}from'rsuite';import BreadcrumbComponent from'../../components/Breadcrumb.Component';import{ListWrapper}from'../../components/client-group.styles';// import ReactTooltip from 'react-tooltip';\nimport PortalModalSlideout from'../../components/portal-modal/portal-modal-slideout';import BuildQuery from'./BuildQuery';import{render}from'@testing-library/react';import{format}from'date-fns';import{ProductList}from'../product/product.styled';import QueryBuilderParamter from'./QueryBuilderParamter';import{ReactComponent as ParameterConfigurationIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/image/parameter-configuration.svg\";import{ReactComponent as ParameterMappingIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/image/parameter-mapping.svg\";import DataGridComponent from'../../components/data-grid/data-grid.component';import{stringOperatorData}from'./QueryBuilderData';// import {validationData} from './QueryBuilderData';\nvar jsonSql=require('json-sql')({separatedValues:false});var jsonSqlParam=require('json-sql')({separatedValues:true});var QueryBuilder=/*#__PURE__*/function(_Component){_inherits(QueryBuilder,_Component);var _super=_createSuper(QueryBuilder);function QueryBuilder(props){var _this$state;var _this;_classCallCheck(this,QueryBuilder);_this=_super.call(this,props);_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.props.Login.queryData,event.dataState),dataState:event.dataState});};_this.dataStateChangeMain=function(event){_this.setState({dataResultMain:process(_this.props.Login.queryDataMain,event.dataStateMain),dataStateMain:event.dataStateMain});};_this.copySQLQuery=function(type){var count=0;if(type===2){var query=_this.state.selectedRecord[\"squerywithparam\"]||\"\";if(_this.state.selectedRecord[\"sdefaultvalue\"]&&_this.state.selectedRecord[\"sdefaultvalue\"]){_this.state.selectedRecord[\"sdefaultvalue\"].forEach(function(dataItem){if(dataItem.items.needmasterdata&&dataItem.items.mastertablename){if(dataItem.symbolObject.items[\"ismulti\"]&&dataItem.symbolObject.items[\"ismulti\"]===true){dataItem.value.forEach(function(item,index){count++;if(index===0){if(dataItem.value.length===1){query=query.replace(\"$p\"+count,\"P$\"+dataItem.items.viewvaluemember+\"$P\");}else{query=query.replace(\"$p\"+count+\",\",\"P$\"+dataItem.items.viewvaluemember+\"$P\");}}else{if(query.includes(\"$p\"+count+\",\")){query=query.replace(\"$p\"+count+\",\",\"\");}else{query=query.replace(\"$p\"+count,\"\");}}});}else{count++;query=query.replace(\"$p\"+count,\"P$\"+dataItem.items.viewvaluemember+\"$P\");}}else if(dataItem.items.sforeigncolumnname!==undefined&&dataItem.items.sforeigncolumnname!==\"\"){if(dataItem.symbolObject.items[\"ismulti\"]&&dataItem.symbolObject.items[\"ismulti\"]===true){dataItem.value.forEach(function(item,index){count++;if(index===0){if(dataItem.value.length===1){query=query.replace(\"$p\"+count,\"P$\"+dataItem.items.sforeigncolumnname+\"$P\");}else{query=query.replace(\"$p\"+count+\",\",\"P$\"+dataItem.items.sforeigncolumnname+\"$P\");}}else{if(query.includes(\"$p\"+count+\",\")){query=query.replace(\"$p\"+count+\",\",\"\");}else{query=query.replace(\"$p\"+count,\"\");}}});}else{count++;query=query.replace(\"$p\"+count,\"P$\"+dataItem.items.sforeigncolumnname+\"$P\");}}else{count++;query=query.replace(\"$p\"+count,\"P$\"+dataItem.items.columnname+\"$P\");}});}if(query.includes(\"$L\")){query=query.replace(\"$L\",\"'\"+_this.props.Login.userInfo.slanguagetypecode+\"'\");}navigator.clipboard.writeText(query);}else{var _query=_this.props.Login.masterData.selectedQueryBuilder[\"squerywithparam\"]||\"\";if(_this.props.Login.masterData.selectedQueryBuilder[\"sdefaultvalue\"]&&_this.props.Login.masterData.selectedQueryBuilder[\"sdefaultvalue\"].value){var sdefaultValue=JSON.parse(_this.props.Login.masterData.selectedQueryBuilder[\"sdefaultvalue\"].value);sdefaultValue.sdefaultvalue.forEach(function(dataItem,index){if(dataItem.items.needmasterdata&&dataItem.items.mastertablename){if(dataItem.symbolObject.items[\"ismulti\"]&&dataItem.symbolObject.items[\"ismulti\"]===true){dataItem.value.forEach(function(item,index){count++;if(index===0){if(dataItem.value.length===1){_query=_query.replace(\"$p\"+count,\"P$\"+dataItem.items.viewvaluemember+\"$P\");}else{_query=_query.replace(\"$p\"+count+\",\",\"P$\"+dataItem.items.viewvaluemember+\"$P\");}}else{if(_query.includes(\"$p\"+count+\",\")){_query=_query.replace(\"$p\"+count+\",\",\"\");}else{_query=_query.replace(\"$p\"+count,\"\");}}});}else{count++;_query=_query.replace(\"$p\"+count,\"P$\"+dataItem.items.viewvaluemember+\"$P\");}}else if(dataItem.items.sforeigncolumnname!==undefined&&dataItem.items.sforeigncolumnname!==\"\"){if(dataItem.symbolObject.items[\"ismulti\"]&&dataItem.symbolObject.items[\"ismulti\"]===true){dataItem.value.forEach(function(item,index){count++;if(index===0){if(dataItem.value.length===1){_query=_query.replace(\"$p\"+count,\"P$\"+dataItem.items.sforeigncolumnname+\"$P\");}else{_query=_query.replace(\"$p\"+count+\",\",\"P$\"+dataItem.items.sforeigncolumnname+\"$P\");}}else{if(_query.includes(\"$p\"+count+\",\")){_query=_query.replace(\"$p\"+count+\",\",\"\");}else{_query=_query.replace(\"$p\"+count,\"\");}}});}else{count++;_query=_query.replace(\"$p\"+count,\"P$\"+dataItem.items.sforeigncolumnname+\"$P\");}}else{count++;_query=_query.replace(\"$p\"+count,\"P$\"+dataItem.items.columnname+\"$P\");}});}if(_query.includes(\"$L\")){_query=_query.replace(\"$L\",\"'\"+_this.props.Login.userInfo.slanguagetypecode+\"'\");}navigator.clipboard.writeText(_query);}};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputParam={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:\"querybuilder\",methodUrl:\"QueryBuilder\",// displayName: \"IDS_DASHBOARDTYPES\",\nuserInfo:_this.props.Login.userInfo};_this.props.callService(inputParam);};_this.saveParam=function(saveType,formRef){var count=0;var query=_this.props.Login.masterData.selectedQueryBuilder[\"squerywithparam\"];_this.props.Login.comboData.sdefaultvalue.forEach(function(dataItem){if(dataItem.items.needmasterdata&&dataItem.items.mastertablename){var sqryData=\"\";if(dataItem.symbolObject.items[\"ismulti\"]&&dataItem.symbolObject.items[\"ismulti\"]===true){dataItem.value.forEach(function(item){count++;if(isNaN(item.value)){query=query.replace(\"$p\"+count,\"'\"+item.value+\"'\");}else{query=query.replace(\"$p\"+count,item.value);}});}else{count++;if(isNaN(dataItem.value.value)){query=query.replace(\"$p\"+count,\"'\"+dataItem.value.value+\"'\");}else{query=query.replace(\"$p\"+count,dataItem.value.value);}}}else if(dataItem.items.sforeigncolumnname!==undefined&&dataItem.items.sforeigncolumnname!==\"\"){if(dataItem.symbolObject.items[\"ismulti\"]&&dataItem.symbolObject.items[\"ismulti\"]===true){dataItem.value.forEach(function(item){count++;if(isNaN(item.value)){query=query.replace(\"$p\"+count,\"'\"+item.value+\"'\");}else{query=query.replace(\"$p\"+count,item.value);}});}else{count++;if(isNaN(dataItem.value.value)){query=query.replace(\"$p\"+count,\"'\"+dataItem.value.value+\"'\");}else{query=query.replace(\"$p\"+count,dataItem.value.value);}}}else if(dataItem.items.columntype===ColumnType.DATATIME||dataItem.items.columntype===ColumnType.DATE&&dataItem.symbolObject.items.isInputVisible===true&&(dataItem.symbolObject.items.symbolType===5||dataItem.symbolObject.items.symbolType===1)){count++;query=query.replace(\"$p\"+count,\"'\"+format(new Date(dataItem.value),\"yyyy-MM-dd HH:mm:ss.SS\")+\"'\");}else{count++;query=query.replace(\"$p\"+count,\"'\"+dataItem.value+\"'\");}});if(query.includes(\"$L\")){query=query.replace(\"$L\",\"'\"+_this.props.Login.userInfo.slanguagetypecode+\"'\");}var jsonData=JSON.parse(_this.props.Login.masterData.selectedQueryBuilder[\"jsondata\"].value);var inputParam={sgeneratedquery:query,columnList:jsonData[\"columnList\"],userInfo:_this.props.Login.userInfo};var inputData=[];_this.props.updateQueryBuilder(inputParam,inputData,_this.props.Login.masterData);};_this.save=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;if(selectedRecord[\"querybuildername\"]&&selectedRecord[\"querybuildername\"].length>0){if(selectedRecord[\"filtercolumns\"]&&selectedRecord[\"filtercolumns\"].length>0){var inputData=[];var jsondata={};var postParam=undefined;if(selectedRecord[\"sdefaultvalue\"].length>0){selectedRecord[\"sdefaultvalue\"].forEach(function(item,i){if(item.symbolObject.items.symbolType===4){delete item.symbolObject.items[\"replacewith\"];}});}postParam={inputListName:\"QueryBuilder\",selectedObject:\"selectedQueryBuilder\",primaryKeyField:\"nquerybuildercode\"};inputData[\"userinfo\"]=_this.props.Login.userInfo;inputData[\"queryBuilder\"]={\"nstatus\":1};jsondata[\"groupList\"]=selectedRecord[\"groupList\"];jsondata[\"aggregate\"]=selectedRecord[\"aggregate\"];jsondata[\"orderby\"]=selectedRecord[\"orderby\"];jsondata[\"columnList\"]=_this.props.Login.viewColumnListByRule;//selectedRecord[\"filtercolumns\"];\njsondata[\"selectFields\"]=_this.props.Login.selectFields;//selectedRecord[\"filtercolumns\"];\ninputData[\"sgeneratedquery\"]=selectedRecord[\"sgeneratedquery\"];inputData[\"queryBuilder\"][\"squerybuildername\"]=selectedRecord[\"querybuildername\"];inputData[\"queryBuilder\"][\"nquerytype\"]=1;inputData[\"queryBuilder\"][\"sviewname\"]=selectedRecord[\"sviewname\"].label;inputData[\"queryBuilder\"][\"squerywithparam\"]=selectedRecord[\"squerywithparam\"];inputData[\"queryBuilder\"][\"squerywithvalue\"]=selectedRecord[\"sgeneratedquery\"];inputData[\"queryBuilder\"][\"sdefaultvalue\"]={sdefaultvalue:selectedRecord[\"sdefaultvalue\"]};inputData[\"queryBuilder\"][\"jsondata\"]=jsondata;var inputParam={classUrl:\"querybuilder\",methodUrl:\"QueryBuilder\",displayName:_this.props.Login.inputParam.displayName,inputData:inputData,operation:\"create\",saveType:saveType,formRef:formRef,postParam:postParam};_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openPortalModal\");// this.props.createQueryBuilder(inputData, this.props.Login);\n}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_SELECTANYCOLUMNS\"}));}}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_INVALIDQUERYBUILDERNAME\"}));}};_this.deleteQB=function(ncontrolCode){var inputData=[];// let postParam = {\n//     inputListName: \"QueryBuilder\",\n//     selectedObject: \"selectedDashBoardTypes\",\n//     primaryKeyField: \"ndashboardtypecode\",\n//     primaryKeyValue: this.props.Login.masterData.selectedDashBoardTypes.ndashboardtypecode,\n//     fetchUrl: \"dashboardtypes/getAllSelectionDashBoardTypes\",\n//     fecthInputObject: { userinfo: this.props.Login.userInfo }\n// };\ninputData[\"queryBuilder\"]=_this.props.Login.masterData.selectedQueryBuilder;inputData[\"userinfo\"]=_this.props.Login.userInfo;var inputParam={methodUrl:\"QueryBuilder\",classUrl:\"querybuilder\",inputData:inputData,operation:\"delete\",searchRef:_this.searchRef};_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");};_this.confirmDelete=function(ncontrolCode){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.deleteQB(\"delete\",ncontrolCode);});};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};_this.onFilterSubmit=function(){_this.searchRef.current.value=\"\";if(_this.state.selectedcombo[\"nquerytypecode\"]){console.log(_this.state.selectedcombo[\"nquerytypecode\"].value);}var nquerytypecode=_this.state.selectedcombo[\"nquerytypecode\"]?_this.state.selectedcombo[\"nquerytypecode\"].value:_this.props.Login.masterData.queryTypeCode;_this.props.getQueryBuilder(nquerytypecode,_this.props.Login.userInfo,_this.props.Login.masterData);};_this.onFilterComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;_this.generateFilterQuery(selectedRecord);};_this.onParamComboChange=function(data,index){var comboData=_this.props.Login.comboData;comboData[\"sdefaultvalue\"][index].value=data;var updateInfo={typeName:DEFAULT_RETURN,data:{comboData:comboData}};_this.props.updateStore(updateInfo);};_this.onParamInputChange=function(event,type,index,dataItem){var comboData=_this.props.Login.comboData;if(type===2){var inputValue=event.target.value;if(/^-?\\d*?\\.?\\d*?$/.test(inputValue)||inputValue===\"\"){comboData[\"sdefaultvalue\"][index].value=event.target.value;}}else if(type===1){comboData[\"sdefaultvalue\"][index].value=event.target.checked;}else if(type===3){if(dataItem.symbolObject.items.symbolType===4){// const symbolObject = stringOperatorData.filter(data => data.value === dataItem.symbolObject.value);\nvar symbolObject=\"\";if(dataItem.symbolObject.value===7||dataItem.symbolObject.value===8){symbolObject=\"'%_%'\";}else if(dataItem.symbolObject.value===9){symbolObject=\"'_%'\";}else{symbolObject=\"'%_'\";}var index1=symbolObject.indexOf('_');var inputname=undefined;inputname=symbolObject.substr(0,index1)+event.target.value+symbolObject.substr(index1+1);inputname=inputname.slice(1,inputname.length-1);comboData[\"sdefaultvalue\"][index].value=inputname;comboData[\"sdefaultvalue\"][index].showInputValue=event.target.value;}else{comboData[\"sdefaultvalue\"][index].value=event.target.value;}}else{comboData[\"sdefaultvalue\"][index].value=event.target.value;}var updateInfo={typeName:DEFAULT_RETURN,data:{comboData:comboData}};_this.props.updateStore(updateInfo);};_this.handleFilterDateChange=function(dateName,dateValue,groupIndex,index){var selectedRecord=_this.state.selectedRecord;if(dateValue===null){dateValue=new Date();}selectedRecord[\"groupList\"][groupIndex][index][dateName]=dateValue;_this.generateFilterQuery(selectedRecord);};_this.onComboChange=function(comboData,fieldName){var selectedcombo=_this.state.selectedcombo||{};selectedcombo[fieldName]=comboData;_this.setState({selectedcombo:selectedcombo});};_this.onViewComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;var inputParam={sviewname:comboData.value,selectedRecord:selectedRecord,userinfo:_this.props.Login.userInfo};_this.props.getViewColumns(inputParam);};_this.onAggregateChange=function(comboData,fieldName,index){var selectedRecord=_this.state.selectedRecord;selectedRecord[\"aggregate\"]=selectedRecord[\"aggregate\"]||[];if(fieldName===\"columnname\"){selectedRecord[\"aggregate\"][index]={\"columnname\":comboData,\"aggfunctionname\":\"\"};}else{if(selectedRecord[\"aggregate\"][index][\"columnname\"]&&selectedRecord[\"aggregate\"][index][\"columnname\"]!==undefined){selectedRecord[\"aggregate\"][index][\"aggfunctionname\"]=comboData;}else{}}// this.setState({ selectedRecord });\n_this.generateFilterQuery(selectedRecord);};_this.onRuleChange=function(comboData,fieldName,groupIndex,index){var selectedRecord=_this.state.selectedRecord;_this.clearSelectedRule(selectedRecord,index);var sqlQuery=_this.props.Login.sqlQuery;var oldselectedRecord=selectedRecord;selectedRecord[\"groupList\"][groupIndex][index][fieldName]=comboData;var tableData=comboData.items;var mastertablename=tableData.mastertablename;if(comboData.items.needmasterdata&&mastertablename){var inputParam={userinfo:_this.props.Login.userInfo,data:{nflag:2,mastertablename:mastertablename,valuemember:tableData.valuemember,displaymember:tableData.displaymember},selectedRecord:selectedRecord,groupIndex:groupIndex,index:index,optionId:tableData.valuemember};_this.props.getMasterData(inputParam,_this.props.Login.viewMasterListByRule);}else if(comboData.items&&comboData.items.columntype===ColumnType.COMBO){if(sqlQuery){var _inputParam={userinfo:_this.props.Login.userInfo,stablename:comboData.items.foriegntablename,scolumnname:comboData.value,selectedRecord:selectedRecord,groupIndex:groupIndex,index:index};_this.props.getForeignTable(_inputParam,'column');}else{selectedRecord[\"groupList\"][groupIndex][index][\"\".concat(comboData.items.sforeigncolumnname)]=\"\";var _inputParam2={data:_objectSpread(_objectSpread({},comboData.items),{},{nflag:1}),userinfo:_this.props.Login.userInfo,selectedRecord:selectedRecord,groupIndex:groupIndex,index:index,optionId:comboData.items.sforeigncolumnname};_this.props.getMasterData(_inputParam2,_this.props.Login.viewMasterListByRule);}}else if(comboData.items&&comboData.items.columntype===ColumnType.TEXTINPUT&&oldselectedRecord[\"groupList\"][groupIndex][index][fieldName].items.columntype!==ColumnType.TEXTINPUT){selectedRecord[\"groupList\"][groupIndex][index][\"sinputname\"]=\"\";_this.setState({selectedRecord:selectedRecord});}else{_this.setState({selectedRecord:selectedRecord});}};_this.onMasterDataChange=function(comboData,fieldName,groupIndex,index){var selectedRecord=_this.state.selectedRecord;selectedRecord[\"groupList\"][groupIndex][index][fieldName]=comboData;_this.generateFilterQuery(selectedRecord);};_this.onOrderbyChange=function(comboData,fieldName,index){var selectedRecord=_this.state.selectedRecord;selectedRecord[\"orderby\"]=selectedRecord[\"orderby\"]||[];if(fieldName===\"columnname\"){selectedRecord[\"orderby\"][index]={\"columnname\":comboData,\"ordertype\":\"\"};}else{if(selectedRecord[\"orderby\"][index][\"columnname\"]&&selectedRecord[\"orderby\"][index][\"columnname\"]!==undefined){selectedRecord[\"orderby\"][index][\"ordertype\"]=comboData;}else{}}// this.setState({ selectedRecord });\n_this.generateFilterQuery(selectedRecord);};_this.deleteOrderby=function(index){var addOrderbyList=_this.props.Login.addOrderbyList;var selectedRecord=_this.state.selectedRecord;selectedRecord[\"orderby\"].splice(index,1);addOrderbyList.splice(index,1);addOrderbyList.forEach(function(data,index){addOrderbyList[index]=index;});var updateInfo={typeName:DEFAULT_RETURN,data:{addOrderbyList:addOrderbyList}};_this.props.updateStore(updateInfo);_this.generateFilterQuery(selectedRecord);};_this.addOrderby=function(){var selectedRecord=_this.state.selectedRecord;if(selectedRecord[\"sviewname\"]){var addOrderbyList=_this.props.Login.addOrderbyList||[];var viewColumnListByRule=_this.props.Login.viewColumnListByRule||[];var arrayLength=addOrderbyList.length;viewColumnListByRule=_this.props.Login.viewColumnList;addOrderbyList[arrayLength]=arrayLength;var updateInfo={typeName:DEFAULT_RETURN,data:{addOrderbyList:addOrderbyList,viewColumnListByRule:viewColumnListByRule}};_this.props.updateStore(updateInfo);}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_SELECTVIEW\"}));}};_this.deleteAggregate=function(index){var addAggregateList=_this.props.Login.addAggregateList;var selectedRecord=_this.state.selectedRecord;selectedRecord[\"aggregate\"].splice(index,1);addAggregateList.splice(index,1);addAggregateList.forEach(function(data,index){addAggregateList[index]=index;});var updateInfo={typeName:DEFAULT_RETURN,data:{addAggregateList:addAggregateList}};_this.props.updateStore(updateInfo);// this.setState({ selectedRecord });\n_this.generateFilterQuery(selectedRecord);};_this.addAggregate=function(){var selectedRecord=_this.state.selectedRecord;if(selectedRecord[\"sviewname\"]){// if (selectedRecord[\"groupby\"] && selectedRecord[\"groupby\"] === true) {\nvar addAggregateList=_this.props.Login.addAggregateList||[];var viewColumnListByRule=_this.props.Login.viewColumnListByRule||[];var arrayLength=addAggregateList.length;viewColumnListByRule=_this.props.Login.viewColumnList;addAggregateList[arrayLength]=arrayLength;var updateInfo={typeName:DEFAULT_RETURN,data:{addAggregateList:addAggregateList,viewColumnListByRule:viewColumnListByRule}};_this.props.updateStore(updateInfo);// } else {\n//     toast.info(this.props.intl.formatMessage({ id: \"IDS_SELECTGROUPBY\" }));\n// }\n}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_SELECTVIEW\"}));}};_this.addRule=function(type,groupIndex){var selectedRecord=_this.state.selectedRecord;if(type===\"sql\"){// let addRuleList = this.props.Login.addRuleList || [];\n// if (addRuleList.length > 0) {\n//     const arrayLength = addRuleList.length;\n//     addRuleList[arrayLength] = arrayLength;\n//     selectedRecord[\"button_and_\" + arrayLength] = true;\n//     const updateInfo = {\n//         typeName: DEFAULT_RETURN,\n//         data: {\n//             addRuleList,\n//             selectedRecord\n//         }\n//     }\n//     this.props.updateStore(updateInfo);\n// } else {\n//     addRuleList[0] = 0;\n//     this.props.getDatabaseTables(this.props.Login.userInfo, this.props.Login.sqlQuery, { addRuleList, selectedRecord: {} });\n// }\n}else{if(selectedRecord[\"sviewname\"]){var viewColumnListByRule=_this.props.Login.viewColumnListByRule||[];// const addRuleList = this.props.Login.addRuleList || [];\n// const arrayLength = addRuleList.length;\n// addRuleList[arrayLength] = arrayLength;\nvar addGroupList=_this.props.Login.addGroupList||[];var arrayLength=addGroupList[groupIndex];addGroupList[groupIndex]=arrayLength+1;// const addGroupList = {...this.props.Login.addGroupList, [groupIndex]: addRuleList};\nselectedRecord[\"groupList\"][groupIndex][arrayLength]={};// viewColumnListByRule[groupIndex][arrayLength] = this.props.Login.viewColumnList;\nviewColumnListByRule=_this.props.Login.viewColumnList;var updateInfo={typeName:DEFAULT_RETURN,data:{addGroupList:addGroupList,viewColumnListByRule:viewColumnListByRule}};_this.props.updateStore(updateInfo);}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_SELECTVIEW\"}));}}};_this.addGroup=function(){var selectedRecord=_this.state.selectedRecord;var sql1=jsonSql.build({table:'testmaster',alias:'tm',join:[{type:'inner',table:'testcategory',alias:'tc',on:{'tm.ntestcategorycode':'tc.ntestcategorycode'}},{type:'inner',table:'transactionstatus',alias:'ts',on:{'tm.naccredited':'ts.ntranscode'}}]});console.log(sql1.query);var sql21=jsonSql.build({table:'testmaster',alias:'tm',join:[{type:'inner',table:'testcategory',alias:'tc',on:{'tm.ntestcategorycode':'tc.ntestcategorycode'}},{type:'right outer',table:'transactionstatus',alias:'ts',on:{'tm.naccredited':'ts.ntranscode'}},{type:'left outer',table:'transactionstatus',alias:'ts',on:[{'tm.naccredited':'ts.ntranscode'},{'tc.naccredited':'ts.ntranscode'}]}],condition:[{a:{$gt:1}},{b:{$lt:10}}],group:['a','b']});console.log(sql21.query);if(selectedRecord[\"sviewname\"]){var viewColumnListByRule=_this.props.Login.viewColumnListByRule||[];var addGroupList=_this.props.Login.addGroupList||[];var arrayLength=addGroupList.length;addGroupList[arrayLength]=1;// viewColumnListByRule[arrayLength] = [];\n// viewColumnListByRule[arrayLength].push(this.props.Login.viewColumnList);\nviewColumnListByRule=_this.props.Login.viewColumnList;if(arrayLength===0){selectedRecord[\"groupList\"]=[];selectedRecord[\"filtercolumns\"]=_this.props.Login.selectFields;}selectedRecord[\"groupList\"][arrayLength]=[];selectedRecord[\"groupList\"][arrayLength][\"button_and\"]=true;selectedRecord[\"groupList\"][arrayLength][0]={};var updateInfo={typeName:DEFAULT_RETURN,data:{addGroupList:addGroupList,viewColumnListByRule:viewColumnListByRule,selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_SELECTVIEW\"}));}};_this.getDatabaseTables=function(){var sqlQuery=false;_this.setState({selectedRecord:{}});_this.props.getDatabaseTables(_this.props.Login.userInfo,sqlQuery,{addRuleList:[],addGroupList:[],addAggregateList:[],addOrderbyList:[]});};_this.closePortalModal=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{openPortalModal:false,selectedRecord:{},addRuleList:[],count:0}};_this.props.updateStore(updateInfo);};_this.closeModal=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:false,selectedRecord:{}}};_this.props.updateStore(updateInfo);};_this.onExecuteRule=function(){var selectedRecord=_this.state.selectedRecord;if(selectedRecord[\"sgeneratedquery\"]){var query=selectedRecord[\"squerywithparam\"];var count=0;selectedRecord[\"sdefaultvalue\"].forEach(function(dataItem){if(dataItem.items.needmasterdata&&dataItem.items.mastertablename){var sqryData=\"\";if(dataItem.symbolObject.items[\"ismulti\"]&&dataItem.symbolObject.items[\"ismulti\"]===true){dataItem.value.forEach(function(item){count++;if(isNaN(item.value)){query=query.replace(\"$p\"+count,\"'\"+item.value+\"'\");}else{query=query.replace(\"$p\"+count,item.value);}});}else{count++;if(isNaN(dataItem.value.value)){query=query.replace(\"$p\"+count,\"'\"+dataItem.value.value+\"'\");}else{query=query.replace(\"$p\"+count,dataItem.value.value);}}}else if(dataItem.items.sforeigncolumnname!==undefined&&dataItem.items.sforeigncolumnname!==\"\"){if(dataItem.symbolObject.items[\"ismulti\"]&&dataItem.symbolObject.items[\"ismulti\"]===true){dataItem.value.forEach(function(item){count++;if(isNaN(item.value)){query=query.replace(\"$p\"+count,\"'\"+item.value+\"'\");}else{query=query.replace(\"$p\"+count,item.value);}});}else{count++;if(isNaN(dataItem.value.value)){query=query.replace(\"$p\"+count,\"'\"+dataItem.value.value+\"'\");}else{query=query.replace(\"$p\"+count,dataItem.value.value);}}}else if(dataItem.items.columntype===ColumnType.DATATIME||dataItem.items.columntype===ColumnType.DATE&&dataItem.symbolObject.items.isInputVisible===true&&(dataItem.symbolObject.items.symbolType===5||dataItem.symbolObject.items.symbolType===1)){count++;query=query.replace(\"$p\"+count,\"'\"+format(new Date(dataItem.value),\"yyyy-MM-dd HH:mm:ss.SS\")+\"'\");}else{count++;query=query.replace(\"$p\"+count,\"'\"+dataItem.value+\"'\");}});if(query.includes(\"$L\")){query=query.replace(\"$L\",\"'\"+_this.props.Login.userInfo.slanguagetypecode+\"'\");}var inputParam={sgeneratedquery:query,//selectedRecord[\"sgeneratedquery\"],\nselectedRecord:selectedRecord,columnList:_this.props.Login.viewColumnListByRule,//selectedRecord[\"filtercolumns\"] && selectedRecord[\"filtercolumns\"] || this.props.Login.viewColumnListByRule,\nuserInfo:_this.props.Login.userInfo,selectFields:selectedRecord[\"filtercolumns\"]&&selectedRecord[\"filtercolumns\"]||_this.props.Login.selectFields};_this.props.executeQuery(inputParam);}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_QUERYNOTAVAILABLE\"}));}};_this.deleteRule=function(groupIndex,index){var addGroupList=_this.props.Login.addGroupList;var selectedRecord=_this.state.selectedRecord;addGroupList[groupIndex]=addGroupList[groupIndex]-1;// selectedRecord[`button_and_${index}`] && delete selectedRecord[`button_and_${index}`];\n// selectedRecord[`button_or_${index}`] && delete selectedRecord[`button_or_${index}`];\n// selectedRecord[`notoperator_${index}`] && delete selectedRecord[`notoperator_${index}`];\nif(addGroupList[groupIndex]===0){addGroupList.splice(groupIndex,1);selectedRecord[\"groupList\"].splice(index,1);}else{selectedRecord[\"groupList\"][groupIndex].splice(index,1);}// this.clearSelectedRule(selectedRecord, index);\nvar updateInfo={typeName:DEFAULT_RETURN,data:{addGroupList:addGroupList,selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);_this.generateFilterQuery(selectedRecord);};_this.clearRule=function(){var sviewname=_this.state.selectedRecord.sviewname||\"\";var updateInfo={typeName:DEFAULT_RETURN,data:{addRuleList:[],selectedRecord:{sviewname:sviewname},sqlQuery:false}};_this.props.updateStore(updateInfo);};_this.resetRule=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{addRuleList:[],addGroupList:[],addAggregateList:[],addOrderbyList:[]}};_this.props.updateStore(updateInfo);_this.setState({selectedRecord:{}});};_this.onSymbolChange=function(comboData,fieldName,groupIndex,index){var selectedRecord=_this.state.selectedRecord;var oldSelectedRecord=selectedRecord[\"groupList\"][groupIndex][index][fieldName]||{};selectedRecord[\"groupList\"][groupIndex][index][fieldName]=comboData;var items=selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items;selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"][\"items\"][\"needmasterdata\"]=items.needmasterdata!==undefined?comboData.items.needmasterdata:false;if(comboData.items.symbolType===2||comboData.items.symbolType===3){selectedRecord[\"groupList\"][groupIndex][index][items[\"valuemember\"]]&&delete selectedRecord[\"groupList\"][groupIndex][index][items[\"valuemember\"]];selectedRecord[\"groupList\"][groupIndex][index][items[\"foreigncolumnname\"]]&&delete selectedRecord[\"groupList\"][groupIndex][index][items[\"foreigncolumnname\"]];selectedRecord[\"groupList\"][groupIndex][index][\"sinputname\"]&&delete selectedRecord[\"groupList\"][groupIndex][index][\"sinputname\"];}else if(comboData.items.symbolType===5&&oldSelectedRecord.items&&oldSelectedRecord.items.symbolType!==5){selectedRecord[\"groupList\"][groupIndex][index][\"snumericinput\"]&&delete selectedRecord[\"groupList\"][groupIndex][index][\"snumericinput\"];selectedRecord[\"groupList\"][groupIndex][index][\"snumericinputtwo\"]&&delete selectedRecord[\"groupList\"][groupIndex][index][\"snumericinputtwo\"];}else if(comboData.items.symbolType===6&&oldSelectedRecord.items&&oldSelectedRecord.items.symbolType===1||comboData.items.symbolType===1&&oldSelectedRecord.items&&oldSelectedRecord.items.symbolType===6){selectedRecord[\"groupList\"][groupIndex][index][\"\".concat(items.sforeigncolumnname)]&&delete selectedRecord[\"groupList\"][groupIndex][index][\"\".concat(items.sforeigncolumnname)];selectedRecord[\"groupList\"][groupIndex][index][\"\".concat(items.valuemember)]&&delete selectedRecord[\"groupList\"][groupIndex][index][\"\".concat(items.valuemember)];}else{}_this.generateFilterQuery(selectedRecord);};_this.onInputChange=function(event,type,groupIndex,index){var selectedRecord=_this.state.selectedRecord;if(type===2){var inputValue=event.target.value;if(/^-?\\d*?\\.?\\d*?$/.test(inputValue)||inputValue===\"\"){selectedRecord[\"groupList\"][groupIndex][index][event.target.name]=event.target.value;}}else if(type===1){selectedRecord[\"groupList\"][groupIndex][index][event.target.name]=event.target.checked;}else if(type===3){selectedRecord[\"groupList\"][groupIndex][index][event.target.name]=event.target.value;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});_this.generateFilterQuery(selectedRecord);};_this.generateFilterQuery=function(selectedRecord){var addGroupList=_this.props.Login.addGroupList;jsonSql.setDialect('mssql');var databaseCondition=[];var displayCondition=[];var databaseConditionParam=[];var fieldWithValue=[];var notOperator=false;if(addGroupList&&addGroupList.length>0){var groupConditionDatabase=[];var groupConditionDatabaseParam=[];var groupConditionDisplay=[];addGroupList.forEach(function(items,groupIndex){var symbolObject={};databaseCondition=[];databaseConditionParam=[];displayCondition=[];_toConsumableArray(Array(items)).map(function(data,index){if(selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"]){symbolObject=selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"]&&selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"].items&&selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"].items||{};var current_button_and=selectedRecord[\"groupList\"][groupIndex][\"button_and\"];var current_button_or=selectedRecord[\"groupList\"][groupIndex][\"button_or\"];var next_button_and=selectedRecord[\"groupList\"][groupIndex][\"button_and\"];var next_button_or=selectedRecord[\"groupList\"][groupIndex][\"button_or\"]?selectedRecord[\"groupList\"][groupIndex][\"button_or\"]:false;var inputname=selectedRecord[\"groupList\"][groupIndex][index][\"sinputname\"];var symbolname=symbolObject.symbol;var numericinput=selectedRecord[\"groupList\"][groupIndex][index][\"snumericinput\"];var columnLabel=selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].label;var columnValue=selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].value;var snumericinputtwo=selectedRecord[\"groupList\"][groupIndex][index][\"snumericinputtwo\"];var columnName=undefined;var needmasterdata=selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.needmasterdata?selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.needmasterdata:false;if(selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.needmasterdata){columnName=selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.valuemember;}else if(selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.sforeigncolumnname){columnName=selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.sforeigncolumnname;}var dateinput=selectedRecord[\"groupList\"][groupIndex][index][\"dateinput\"]&&format(new Date(selectedRecord[\"groupList\"][groupIndex][index][\"dateinput\"]),\"yyyy-MM-dd HH:mm:ss.SS\");//selectedRecord[\"dateinput_\" + index];\nvar dateinputtwo=selectedRecord[\"groupList\"][groupIndex][index][\"dateinputtwo\"]&&format(new Date(selectedRecord[\"groupList\"][groupIndex][index][\"dateinputtwo\"]),\"yyyy-MM-dd HH:mm:ss.SS\");//selectedRecord[\"dateinputtwo_\" + index];\nif(symbolObject&&inputname){if(symbolObject.symbolType===4){var showInputValue=inputname;var index1=symbolObject.replacewith.indexOf('_');inputname=symbolObject.replacewith.substr(0,index1)+inputname+symbolObject.replacewith.substr(index1+1);inputname=inputname.slice(1,inputname.length-1);databaseCondition.push(_defineProperty({},columnValue,_defineProperty({},symbolname,inputname)));displayCondition.push(_defineProperty({},columnLabel,_defineProperty({},symbolname,inputname)));databaseConditionParam.push(_defineProperty({},columnValue,_defineProperty({},symbolname,inputname)));fieldWithValue.push({columnName:columnValue,value:inputname,showInputValue:showInputValue,symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});}else{databaseCondition.push(_defineProperty({},columnValue,_defineProperty({},symbolname,inputname)));displayCondition.push(_defineProperty({},columnLabel,_defineProperty({},symbolname,inputname)));databaseConditionParam.push(_defineProperty({},columnValue,_defineProperty({},symbolname,inputname)));fieldWithValue.push({columnName:columnValue,value:inputname,symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});}}else if(symbolObject&&numericinput&&symbolObject.symbolType!==5){databaseCondition.push(_defineProperty({},columnValue,_defineProperty({},symbolname,numericinput)));displayCondition.push(_defineProperty({},columnLabel,_defineProperty({},symbolname,numericinput)));databaseConditionParam.push(_defineProperty({},columnValue,_defineProperty({},symbolname,numericinput)));fieldWithValue.push({columnName:columnValue,value:numericinput,symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});}else if(symbolObject&&symbolObject.symbolType===2||symbolObject&&symbolObject.symbolType===3){databaseCondition.push(_defineProperty({},columnValue,_defineProperty({},symbolname,'')));displayCondition.push(_defineProperty({},columnLabel,_defineProperty({},symbolname,'')));databaseConditionParam.push(_defineProperty({},columnValue,_defineProperty({},symbolname,'')));fieldWithValue.push({columnName:columnValue,value:'',symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});}else if(symbolObject&&numericinput&&snumericinputtwo&&symbolObject.symbolType===5){if(symbolObject.symbol===\"\"){var tempValue=[_defineProperty({},columnValue,_defineProperty({},symbolObject.replacewith[0],+numericinput)),_defineProperty({},columnValue,_defineProperty({},symbolObject.replacewith[1],snumericinputtwo))];var tempValue1=[_defineProperty({},columnLabel,_defineProperty({},symbolObject.replacewith[0],+numericinput)),_defineProperty({},columnLabel,_defineProperty({},symbolObject.replacewith[1],snumericinputtwo))];databaseCondition.push(tempValue);displayCondition.push(tempValue1);databaseConditionParam.push(tempValue);}else{var _tempValue=[_defineProperty({},symbolObject.symbol,[_defineProperty({},columnValue,_defineProperty({},symbolObject.replacewith[0],+numericinput)),_defineProperty({},columnValue,_defineProperty({},symbolObject.replacewith[1],snumericinputtwo))])];var _tempValue2=[_defineProperty({},symbolObject.symbol,[_defineProperty({},columnLabel,_defineProperty({},symbolObject.replacewith[0],+numericinput)),_defineProperty({},columnLabel,_defineProperty({},symbolObject.replacewith[1],snumericinputtwo))])];databaseCondition.push(_tempValue);displayCondition.push(_tempValue2);databaseConditionParam.push(_tempValue);}}else if(symbolObject&&symbolObject.symbolType===6&&columnName&&selectedRecord[\"groupList\"][groupIndex][index][columnName]){var _data=selectedRecord[\"groupList\"][groupIndex][index][columnName]&&selectedRecord[\"groupList\"][groupIndex][index][columnName].map(function(item){return\"'\"+item.value+\"'\";})||[];var data1=selectedRecord[\"groupList\"][groupIndex][index][columnName]&&selectedRecord[\"groupList\"][groupIndex][index][columnName].map(function(item){return item.label;})||[];if(_data.length>0){if(needmasterdata){databaseCondition.push(_defineProperty({},selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember,_defineProperty({},symbolname,_data)));databaseConditionParam.push(_defineProperty({},selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember,_defineProperty({},symbolname,_data)));fieldWithValue.push({columnName:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember,value:selectedRecord[\"groupList\"][groupIndex][index][columnName].map(function(item){return item;}),symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});}else{databaseCondition.push(_defineProperty({},columnValue,_defineProperty({},symbolname,_data)));databaseConditionParam.push(_defineProperty({},columnValue,_defineProperty({},symbolname,_data)));fieldWithValue.push({columnName:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember,value:selectedRecord[\"groupList\"][groupIndex][index][columnName].map(function(item){return item;}),symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});}}if(data1.length>0){displayCondition.push(_defineProperty({},columnLabel,_defineProperty({},symbolname,data1)));}// }\n}else if(symbolObject&&columnName&&symbolObject.isInputVisible&&selectedRecord[\"groupList\"][groupIndex][index][columnName]){if(needmasterdata){databaseCondition.push(_defineProperty({},selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember,_defineProperty({},symbolname,selectedRecord[\"groupList\"][groupIndex][index][columnName].value)));displayCondition.push(_defineProperty({},columnLabel,_defineProperty({},symbolname,selectedRecord[\"groupList\"][groupIndex][index][columnName].label)));databaseConditionParam.push(_defineProperty({},selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember,_defineProperty({},symbolname,selectedRecord[\"groupList\"][groupIndex][index][columnName].label)));fieldWithValue.push({columnName:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember,value:selectedRecord[\"groupList\"][groupIndex][index][columnName],symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});}else{databaseCondition.push(_defineProperty({},columnValue,_defineProperty({},symbolname,selectedRecord[\"groupList\"][groupIndex][index][columnName].value)));displayCondition.push(_defineProperty({},columnLabel,_defineProperty({},symbolname,selectedRecord[\"groupList\"][groupIndex][index][columnName].label)));databaseConditionParam.push(_defineProperty({},columnValue,_defineProperty({},symbolname,selectedRecord[\"groupList\"][groupIndex][index][columnName].label)));fieldWithValue.push({columnName:columnValue,value:selectedRecord[\"groupList\"][groupIndex][index][columnName],symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});}}else if(symbolObject&&dateinput&&symbolObject.symbolType!==5){databaseCondition.push(_defineProperty({},columnValue,_defineProperty({},symbolname,dateinput)));displayCondition.push(_defineProperty({},columnLabel,_defineProperty({},symbolname,dateinput)));databaseConditionParam.push(_defineProperty({},columnValue,_defineProperty({},symbolname,dateinput)));fieldWithValue.push({columnName:columnValue,value:dateinput,symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});}else if(symbolObject&&dateinput&&dateinputtwo&&symbolObject.symbolType===5){if(symbolObject.symbol===\"\"){var _tempValue3=[_defineProperty({},columnValue,_defineProperty({},symbolObject.replacewith[0],dateinput)),_defineProperty({},columnValue,_defineProperty({},symbolObject.replacewith[1],dateinputtwo))];var _tempValue4=[_defineProperty({},columnLabel,_defineProperty({},symbolObject.replacewith[0],dateinput)),_defineProperty({},columnLabel,_defineProperty({},symbolObject.replacewith[1],dateinputtwo))];databaseCondition.push(_tempValue3);displayCondition.push(_tempValue4);databaseConditionParam.push(_tempValue3);fieldWithValue.push({columnName:columnValue,value:dateinput,symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});fieldWithValue.push({columnName:columnValue,value:dateinputtwo,symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});}else{var _tempValue5=[_defineProperty({},symbolObject.symbol,[_defineProperty({},columnValue,_defineProperty({},symbolObject.replacewith[0],dateinput)),_defineProperty({},columnValue,_defineProperty({},symbolObject.replacewith[1],dateinputtwo))])];var _tempValue6=[_defineProperty({},symbolObject.symbol,[_defineProperty({},columnLabel,_defineProperty({},symbolObject.replacewith[0],dateinput)),_defineProperty({},columnLabel,_defineProperty({},symbolObject.replacewith[1],dateinputtwo))])];databaseCondition.push(_tempValue5);displayCondition.push(_tempValue6);databaseConditionParam.push(_tempValue5);fieldWithValue.push({columnName:columnValue,value:dateinput,symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});fieldWithValue.push({columnName:columnValue,value:dateinputtwo,symbolObject:selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"],items:selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items});}}}else{_this.groupByFunction(selectedRecord,databaseCondition,displayCondition);}});if(selectedRecord[\"groupList\"][groupIndex][\"button_and\"]===true){if(selectedRecord[\"groupList\"][groupIndex][\"button_not\"]===true){groupConditionDisplay.push([{$not:[{$and:_toConsumableArray(displayCondition)}]}]);groupConditionDatabase.push([{$not:[{$and:_toConsumableArray(databaseCondition)}]}]);groupConditionDatabaseParam.push([{$not:[{$and:_toConsumableArray(databaseConditionParam)}]}]);}else{groupConditionDisplay.push([{$and:_toConsumableArray(displayCondition)}]);groupConditionDatabase.push([{$and:_toConsumableArray(databaseCondition)}]);groupConditionDatabaseParam.push([{$and:_toConsumableArray(databaseConditionParam)}]);}}else if(selectedRecord[\"groupList\"][groupIndex][\"button_or\"]===true){if(selectedRecord[\"groupList\"][groupIndex][\"button_not\"]===true){groupConditionDisplay.push([{$not:[{$or:_toConsumableArray(displayCondition)}]}]);groupConditionDatabase.push([{$not:[{$or:_toConsumableArray(databaseCondition)}]}]);groupConditionDatabaseParam.push([{$not:[{$or:_toConsumableArray(databaseConditionParam)}]}]);}else{groupConditionDisplay.push([{$or:_toConsumableArray(displayCondition)}]);groupConditionDatabase.push([{$or:_toConsumableArray(databaseCondition)}]);groupConditionDatabaseParam.push([{$or:_toConsumableArray(databaseConditionParam)}]);}}else{groupConditionDisplay.push([_objectSpread({},displayCondition)]);groupConditionDatabase.push([_objectSpread({},databaseCondition)]);groupConditionDatabaseParam.push([_objectSpread({},databaseConditionParam)]);}var finalConditionDisplay=undefined;var finalConditionDatabase=undefined;var finalConditionDatabaseParam=undefined;if(addGroupList.length-1===0){finalConditionDisplay=[].concat(groupConditionDisplay);finalConditionDatabase=[].concat(groupConditionDatabase);finalConditionDatabaseParam=[].concat(groupConditionDatabaseParam);}else if(addGroupList.length-1===groupIndex){if(selectedRecord[\"groupList\"][0][\"button_and\"]===true){finalConditionDisplay=[{$and:[].concat(groupConditionDisplay)}];finalConditionDatabase=[{$and:[].concat(groupConditionDatabase)}];finalConditionDatabaseParam=[{$and:[].concat(groupConditionDatabaseParam)}];}else if(selectedRecord[\"groupList\"][0][\"button_or\"]===true){finalConditionDisplay=[{$or:[].concat(groupConditionDisplay)}];finalConditionDatabase=[{$or:[].concat(groupConditionDatabase)}];finalConditionDatabaseParam=[{$or:[].concat(groupConditionDatabaseParam)}];}else{finalConditionDisplay=[_objectSpread({},groupConditionDisplay)];finalConditionDatabase=[_objectSpread({},groupConditionDatabase)];finalConditionDatabaseParam=[_objectSpread({},groupConditionDatabaseParam)];}}if(_this.props.Login.sqlQuery){var databaseSQLQuery=jsonSql.build({type:'select',table:selectedRecord[\"stablename_0\"].value,condition:databaseCondition});var displaySQLQuery=jsonSql.build({type:'select',table:selectedRecord[\"stablename_0\"].label,condition:displayCondition});selectedRecord[\"sgeneratedquery\"]=databaseSQLQuery.query;selectedRecord[\"sdisplayquery\"]=displaySQLQuery.query;}else{// const fields = this.props.Login.viewColumnList;\nvar dbFields=selectedRecord[\"filtercolumns\"];var fieldList=[];var dbfieldList=[];var groupByAggregateFields=[];var groupByFields=[];var groupByAggregateFieldsDisplay=[];var groupByFieldsDisplay=[];var orderByDefault=[];var orderByCustom={};var orderByDefaultDisplay=[];var orderByCustomDisplay={};selectedRecord[\"orderby\"]&&selectedRecord[\"orderby\"].forEach(function(data){if(data[\"ordertype\"]&&data[\"ordertype\"].value===2){orderByCustom[data[\"columnname\"].items.columnname]=-1;orderByCustomDisplay[data[\"columnname\"].label]=-1;}else{orderByCustom[data[\"columnname\"].items.columnname]=1;orderByCustomDisplay[data[\"columnname\"].label]=1;}});if(selectedRecord[\"aggregate\"]&&selectedRecord[\"aggregate\"].length>0){selectedRecord[\"aggregate\"].forEach(function(data){if(data[\"aggfunctionname\"]&&data[\"aggfunctionname\"].label!==''){groupByAggregateFields.push({func:{name:data[\"aggfunctionname\"].label,args:[{field:data[\"columnname\"].items.columnname}]},alias:data[\"columnname\"].items.columnname});groupByAggregateFieldsDisplay.push({func:{name:data[\"aggfunctionname\"].label,args:[{field:data[\"columnname\"].label}]}});}else{groupByAggregateFields.push(data[\"columnname\"].items.columnname);groupByFields.push(data[\"columnname\"].items.columnname);groupByAggregateFieldsDisplay.push(data[\"columnname\"].label);groupByFieldsDisplay.push(data[\"columnname\"].label);}});}// fields.forEach(item => {\n//     fieldList.push(item.label);\n// })\ndbFields.forEach(function(item){if(item.items.languagecode===true){// let languageCode = this.props.Login.userInfo.slanguagetypecode ? this.props.Login.userInfo.slanguagetypecode : \"en-US\";\nvar fieldValue=item.value+\"\\\"->> $L as \\\"\"+item.value;//item.value.replace(item.value, item.value + \"->> $L as \" + item.value);\n// dbfieldList.push( \"\"+fieldValue+\"\");\ndbfieldList.push(fieldValue);}else{// dbfieldList.push(\"\"+item.value+\"\");\ndbfieldList.push(item.value);}fieldList.push(item.label);});var databaseSQLQueryParam=jsonSqlParam.build({type:'select',table:selectedRecord[\"sviewname\"].value,fields:selectedRecord[\"aggregate\"]&&selectedRecord[\"aggregate\"].length>0?groupByAggregateFields:dbfieldList,group:groupByFields,sort:selectedRecord[\"orderby\"]&&selectedRecord[\"orderby\"].length>0?orderByCustom:\"\",condition:finalConditionDatabaseParam});var _databaseSQLQuery=jsonSql.build({type:'select',table:selectedRecord[\"sviewname\"].value,fields:selectedRecord[\"aggregate\"]&&selectedRecord[\"aggregate\"].length>0?groupByAggregateFields:dbfieldList,group:groupByFields,sort:selectedRecord[\"orderby\"]&&selectedRecord[\"orderby\"].length>0?orderByCustom:\"\",condition:finalConditionDatabase});var _displaySQLQuery=jsonSql.build({type:'select',fields:selectedRecord[\"aggregate\"]&&selectedRecord[\"aggregate\"].length>0?groupByAggregateFieldsDisplay:fieldList,group:groupByFieldsDisplay,table:selectedRecord[\"sviewname\"].label,sort:selectedRecord[\"orderby\"]&&selectedRecord[\"orderby\"].length>0?orderByCustomDisplay:\"\",condition:finalConditionDisplay//&& finalCondition.length === 1 ? finalCondition[0] : finalCondition\n});// databaseSQLQueryParam.query.split('\"').join('')\n// databaseSQLQuery.query.split('\"').join('')\n// let dbQueryParam = databaseSQLQueryParam.query.split('\"').join('');\n// let dbQuery = databaseSQLQuery.query.split('\"').join('');\nvar dbQueryParam=databaseSQLQueryParam.query;var dbQuery=_databaseSQLQuery.query;selectedRecord[\"squerywithparam\"]=dbQueryParam.replace(\"like\",\"Ilike\");selectedRecord[\"sgeneratedquery\"]=selectedRecord[\"filtercolumns\"]&&selectedRecord[\"filtercolumns\"].length>0?dbQuery.replace(\"like\",\"Ilike\"):\"\";selectedRecord[\"sdisplayquery\"]=selectedRecord[\"filtercolumns\"]&&selectedRecord[\"filtercolumns\"].length>0?_displaySQLQuery.query.replace(\"like\",\"Ilike\"):\"\";selectedRecord[\"sdefaultvalue\"]=fieldWithValue;var paramIndex=[];if(fieldWithValue.length>0){fieldWithValue.forEach(function(item,i){if(item.symbolObject.items.symbolType===4){paramIndex.push(\"$p\"+(i+1));}});}if(paramIndex.length>0){paramIndex.forEach(function(data){selectedRecord[\"squerywithparam\"]=selectedRecord[\"squerywithparam\"].replace(data,data+\" COLLATE pg_catalog.default \");});}// if (selectedRecord[\"squerywithparam\"].indexOf('Ilike') > 0) {\n//     let newQuery = selectedRecord[\"squerywithparam\"];\n//     while (newQuery.indexOf(\"Ilike\") !== -1) {\n//         const paramLabelStartIndex = newQuery.indexOf(\"Ilike\");\n//         const paramLabel = newQuery.substring(paramLabelStartIndex, newQuery.length);\n//     }\n// }\n}_this.setState({selectedRecord:selectedRecord});});}else{_this.groupByFunction(selectedRecord,databaseCondition,displayCondition);}_this.setState({selectedRecord:selectedRecord});// for temporary\n};_this.onConditionClick=function(fieldName,index){var selectedRecord=_this.state.selectedRecord;if(fieldName===\"button_and\"){selectedRecord[\"groupList\"][index][fieldName]=selectedRecord[\"groupList\"][index][fieldName]===true?false:true;selectedRecord[\"groupList\"][index][\"button_or\"]=false;}else if(fieldName===\"button_or\"){selectedRecord[\"groupList\"][index][fieldName]=selectedRecord[\"groupList\"][index][fieldName]===true?false:true;selectedRecord[\"groupList\"][index][\"button_and\"]=false;// if (selectedRecord[\"groupList\"][index][`notoperator`] && selectedRecord[\"groupList\"][index][`notoperator`] === true) {\n//     selectedRecord[\"groupList\"][index][`notoperator`] = false;\n// }\n}else if(fieldName===\"button_not\"){selectedRecord[\"groupList\"][index][fieldName]=selectedRecord[\"groupList\"][index][fieldName]===true?false:true;}else{}_this.generateFilterQuery(selectedRecord);};_this.onQueryTypeOnclick=function(value){var selectedRecord=_this.state.selectedRecord;selectedRecord[\"selectedQueryType\"]=value;var sqlQuery=false;if(value.value===\"sql\"){sqlQuery=true;}var updateInfo={typeName:DEFAULT_RETURN,data:{sqlQuery:sqlQuery}};_this.props.updateStore(updateInfo);_this.setState({selectedRecord:selectedRecord});};var dataState={skip:0,take:props.settings?parseInt(props.settings[14]):5};var dataStateMain={skip:0,take:props.settings?parseInt(props.settings[14]):5};var dataStateUserQuery={skip:0,take:10};_this.state=(_this$state={selectedRecord:{},error:\"\",// modalIsOpen: false,\nparameters:[],// objparam: [],\n// objDparam: [],\nqueryName:'',// queryResult: [],\nuserRoleControlRights:[],controlMap:new Map(),dataStateUserQuery:dataStateUserQuery,queryTypeName:'',selectedcombo:[],selectedTableType:[],moduleFormName:[],ntableTypeCode:-1,nFormCode:-1,queryType:[],tableType:[],chartList:[],skip:0,take:_this.props.Login.settings?_this.props.Login.settings[3]:25,//tableName : undefined,tableList:[]\noutputColumns:[],selectedTableList:[],tableColumnList:[],foreignTableColumnList:[],joinTableList:[],symbolsList:[],foreignTableList:[],count:0,foreignTableCount:[],selectedforeignTableList:[],filterColumnList:[],sqlQuery:false,// viewColumnList: [],\nswitchRecord:{},dataState:dataState,dataStateMain:dataStateMain,data:[],dataMainList:[],dataResult:[],dataResultMain:[]},_defineProperty(_this$state,\"queryType\",[{squerytypename:_this.props.intl.formatMessage({id:\"IDS_VIEWS\"}),nquerytypecode:1},{squerytypename:_this.props.intl.formatMessage({id:\"IDS_SQL\"}),nquerytypecode:2}]),_defineProperty(_this$state,\"queryTypeOptions\",[{label:_this.props.intl.formatMessage({id:\"IDS_VIEWS\"}),views:1},{label:_this.props.intl.formatMessage({id:\"IDS_SQL\"}),value:2}]),_this$state);_this.searchRef=React.createRef();_this.confirmMessage=new ConfirmMessage();// this.dropItemRef = React.createRef(); \n_this.queryFieldList=['nquerytypecode','ssqlqueryname','ssqlquery','sscreenrecordquery','sscreenheader','svaluemember','sdisplaymember','ncharttypecode'];// this.queryList = [];\n_this.searchFieldList=[\"ssqlqueryname\",\"ssqlquery\",\"sscreenheader\",\"svaluemember\",\"sdisplaymember\",\"squerytypename\",\"schartname\"];return _this;}_createClass(QueryBuilder,[{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var filterData=this.state.filterData;if(this.props.Login.queryData!==previousProps.Login.queryData){this.setState({data:this.props.Login.queryData,dataResult:process(this.props.Login.queryData,this.state.dataState)});}if(this.props.Login.masterData.queryDataMain!==previousProps.Login.masterData.queryDataMain){if(this.props.Login.masterData.queryDataMain!==undefined){this.setState({dataMainList:this.props.Login.masterData.queryDataMain,dataResultMain:process(this.props.Login.masterData.queryDataMain===null?[]:this.props.Login.masterData.queryDataMain,this.state.dataStateMain)});}}if(this.props.Login.masterData.queryTypeCode!==previousProps.Login.masterData.queryTypeCode){filterData=this.generateBreadCrumData();this.setState({filterData:filterData});}if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({controlMap:controlMap,userRoleControlRights:userRoleControlRights});}}},{key:\"generateBreadCrumData\",value:function generateBreadCrumData(){var _this2=this;var breadCrumbData=[];if(this.props.Login.masterData&&this.props.Login.masterData.queryTypeCode){var item=this.state.queryType.filter(function(item){return item.nquerytypecode===_this2.props.Login.masterData.queryTypeCode;});breadCrumbData.push({\"label\":\"IDS_QUERYTYPE\",\"value\":this.props.Login.masterData.queryTypeCode?item[0].squerytypename:\"\"});}return breadCrumbData;}},{key:\"render\",value:function render(){var _this3=this;var addId=this.state.controlMap.has(\"Add QueryBuilder\")&&this.state.controlMap.get(\"Add QueryBuilder\").ncontrolcode;var editId=this.state.controlMap.has(\"Edit QueryBuilder\")&&this.state.controlMap.get(\"Edit QueryBuilder\").ncontrolcode;var deleteId=this.state.controlMap.has(\"Delete QueryBuilder\")&&this.state.controlMap.get(\"Delete QueryBuilder\").ncontrolcode;var breadCrumbData=this.state.filterData||[];var gridColumnListMain=[];// if (this.props.Login.masterData && this.props.Login.masterData.columnList && this.props.Login.masterData.columnList.length > 0) {\n//     this.props.Login.masterData.columnList.forEach(item => {\n//         gridColumnListMain.push({ idsName: item.items.displayname[this.props.Login.userInfo.slanguagetypecode], dataField: item.items.columnname, width: '200px' })\n//     })\n// }\nif(this.props.Login.masterData&&this.props.Login.masterData.selectFields&&this.props.Login.masterData.selectFields.length>0){this.props.Login.masterData.selectFields.forEach(function(item){gridColumnListMain.push({idsName:item.items.displayname[_this3.props.Login.userInfo.slanguagetypecode],dataField:item.items.columnname,width:'200px'});});}var selectedQueryType=[];if(this.props.Login.masterData&&this.props.Login.masterData.queryTypeCode){selectedQueryType=this.state.queryType.filter(function(item){return item.nquerytypecode===_this3.props.Login.masterData.queryTypeCode;});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ListWrapper,{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},breadCrumbData.length>0?/*#__PURE__*/React.createElement(Affix,{top:53},/*#__PURE__*/React.createElement(BreadcrumbComponent,{breadCrumbItem:breadCrumbData})):\"\",/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(ListMaster,{masterData:this.props.Login.masterData||[],screenName:this.props.intl.formatMessage({id:\"IDS_QUERYBUILDER\"}),masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.queryBuilderList,getMasterDetail:function getMasterDetail(qryBuilder){return _this3.props.getSelectedQueryBuilder(qryBuilder,_this3.props.Login.userInfo,_this3.props.Login.masterData);},selectedMaster:this.props.Login.masterData.selectedQueryBuilder,primaryKeyField:\"nquerybuildercode\",mainField:\"squerybuildername\"//firstField=\"squerybuildername\"\n// secondField={this.state.selectedcombo[\"nquerytypecode\"] && this.state.selectedcombo[\"nquerytypecode\"].value === queryTypeFilter.LIMSDASHBOARDQUERY ? \"schartname\" : \"\"}\n// filterColumnData={this.props.filterColumnData}\n// filterParam={filterParam}\n,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData,openModal:this.getDatabaseTables// openModal={() => this.props.getSQLQueryComboService(\"\", \"create\", \"nsqlquerycode\", null,\n//     this.props.Login.masterData, this.props.Login.userInfo,\n//     this.props.Login.masterData.SelectedQueryType.nquerytypecode,                                   \n//     addId)} \n//{() => this.props.addTest(\"create\", selectedTest, userInfo, addId, this.state.nfilterTestCategory)} Already commented\n,needAccordianFilter:false// skip={this.state.skip}\n// take={this.state.take}\n,handlePageChange:this.handlePageChange,showFilterIcon:true,showFilter:this.props.Login.showFilter,openFilter:this.openFilter,closeFilter:this.closeFilter,onFilterSubmit:this.onFilterSubmit,showBuildQuery:false,builderData:this.getDatabaseTables,filterComponent:[{\"IDS_QUERYTYPEFILTER\":/*#__PURE__*/React.createElement(QueryTypeFilter,{queryType:this.state.queryTypeOptions||[],selectedRecord:this.state.selectedcombo||{},onComboChange:this.onComboChange,filterQueryType:selectedQueryType[0]})}]})),/*#__PURE__*/React.createElement(Col,{md:\"8\"},/*#__PURE__*/React.createElement(ProductList,{className:\"panel-main-content\"},this.props.Login.masterData.queryBuilderList&&this.props.Login.masterData.queryBuilderList.length>0&&this.props.Login.masterData.selectedQueryBuilder?/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},this.props.Login.masterData.selectedQueryBuilder.squerybuildername),/*#__PURE__*/React.createElement(ContentPanel,{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(Col,{md:\"6\"}),/*#__PURE__*/React.createElement(Col,{md:\"6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\",style:{float:\"right\"}},/*#__PURE__*/React.createElement(ProductList,{className:\"d-inline dropdown badget_menu\"},/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2 \",href:\"#\"// hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\n//  data-for=\"tooltip_list_wrap\"\n,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_PARAMETERMAPPING\"}),onClick:function onClick(e){return _this3.props.getParameterFromQuery(_this3.props.Login);}},/*#__PURE__*/React.createElement(ParameterConfigurationIcon,{className:\"custom_icons\",width:\"20\",height:\"20\",name:\"configreporticon\"})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"QB\",className:\"btn btn-circle outline-grey mr-2\"// hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\n,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"}),onClick:function onClick(){return _this3.confirmDelete(deleteId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt})),/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2 \",href:\"#\"// hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\n//  data-for=\"tooltip_list_wrap\"\n,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_COPYSQL\"}),onClick:function onClick(){return _this3.copySQLQuery(1);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faCopy}))))))),this.props.Login.masterData.queryDataMain&&gridColumnListMain&&gridColumnListMain.length>0?/*#__PURE__*/React.createElement(DataGridComponent,{data:this.state.dataMainList,dataResult:this.state.dataResultMain||[],dataState:this.state.dataStateMain,dataStateChange:this.dataStateChangeMain,extractedColumnList:gridColumnListMain,controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,userInfo:this.props.Login.userInfo,pageable:true,scrollable:\"scrollable\",isActionRequired:false,isToolBarRequired:true,isRefreshRequired:false,selectedId:-1}):/*#__PURE__*/React.createElement(React.Fragment,null)):\"\")))),this.props.Login.openPortalModal&&/*#__PURE__*/React.createElement(PortalModalSlideout,{show:this.props.Login.openPortalModal,closeModal:this.closePortalModal,screenName:this.props.Login.screenName,handleSaveClick:this.save,addComponent:/*#__PURE__*/React.createElement(BuildQuery,{selectedRecord:this.state.selectedRecord||{},databaseTableList:this.props.Login.databaseTableList,tableColumnList:this.state.tableColumnList,foreignTableList:this.state.foreignTableList||[],foreignTableColumnList:this.props.Login.foreignTableColumnList||[]// validationData={validationData}\n,count:this.state.count,foreignTableCount:this.state.foreignTableCount,sqlQuery:this.state.sqlQuery,viewMasterListByRule:this.props.Login.viewMasterListByRule||[],userInfo:this.props.Login.userInfo,onExecuteRule:this.onExecuteRule,onInputChange:this.onInputChange,deleteRule:this.deleteRule,clearRule:this.clearRule,resetRule:this.resetRule,onSymbolChange:this.onSymbolChange// onForeignTableChange={this.onForeignTableChange}\n// addJoinTable={this.addJoinTable}\n,onQueryTypeOnclick:this.onQueryTypeOnclick,onRuleChange:this.onRuleChange,onViewComboChange:this.onViewComboChange,addRule:this.addRule,onConditionClick:this.onConditionClick,onMasterDataChange:this.onMasterDataChange,handleFilterDateChange:this.handleFilterDateChange,databaseviewList:this.props.Login.databaseviewList,addRuleList:this.props.Login.addRuleList||[],viewColumnListByRule:this.props.Login.viewColumnListByRule||[],masterdata:this.props.Login.masterdata,switchRecord:this.state.switchRecord,data:this.state.data,dataResult:this.state.dataResult||[],dataState:this.state.dataState,dataStateChange:this.dataStateChange,userRoleControlRights:this.state.userRoleControlRights,gridColumnList:this.props.Login.gridColumnList||[],queryType:this.state.queryType,addAggregate:this.addAggregate,addAggregateList:this.props.Login.addAggregateList||[],onAggregateChange:this.onAggregateChange,deleteAggregate:this.deleteAggregate,addOrderby:this.addOrderby,addOrderbyList:this.props.Login.addOrderbyList||[],onOrderbyChange:this.onOrderbyChange,deleteOrderby:this.deleteOrderby,addGroup:this.addGroup,addGroupList:this.props.Login.addGroupList||[],copySQLQuery:this.copySQLQuery,onFilterComboChange:this.onFilterComboChange,selectFields:this.props.Login.selectFields||[]})}),this.props.Login.openModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,operation:\"create\",inputParam:this.props.Login.inputParam,screenName:this.props.intl.formatMessage({id:\"IDS_PARAMETERMAPPING\"}),onExecuteClick:this.saveParam,showExecute:true,showParam:true,hideSave:true,selectedRecord:this.state.selectedRecord||{},addComponent:/*#__PURE__*/React.createElement(QueryBuilderParamter,{onParamInputChange:this.onParamInputChange,selectedQueryBuilder:this.props.Login.masterData.selectedQueryBuilder||[],viewMasterData:this.props.Login.viewMasterData||[],comboData:this.props.Login.comboData||[],onParamComboChange:this.onParamComboChange})}));}},{key:\"clearSelectedRule\",value:function clearSelectedRule(selectedRecord,index){selectedRecord[\"sinputname_\"+index]&&delete selectedRecord[\"sinputname_\"+index];selectedRecord[\"ssymbolname_\"+index]&&delete selectedRecord[\"ssymbolname_\"+index];selectedRecord[\"snumericinput_\"+index]&&delete selectedRecord[\"snumericinput_\"+index];selectedRecord[\"columnname_\"+index]&&delete selectedRecord[\"columnname_\"+index];selectedRecord[\"snumericinputtwo_\"+index]&&delete selectedRecord[\"snumericinputtwo_\"+index];selectedRecord[\"dateinput_\"+index]&&delete selectedRecord[\"dateinput_\"+index];selectedRecord[\"dateinputtwo_\"+index]&&delete selectedRecord[\"dateinputtwo_\"+index];}},{key:\"groupByFunction\",value:function groupByFunction(selectedRecord,databaseCondition,displayCondition){var groupByAggregateFields=[];var groupByFields=[];var groupByAggregateFieldsDisplay=[];var groupByFieldsDisplay=[];var orderByDefault=[];var orderByCustom={};var orderByDefaultDisplay=[];var orderByCustomDisplay={};// if (selectedRecord[\"customorderby\"] && selectedRecord[\"customorderby\"] === true) {\nselectedRecord[\"orderby\"]&&selectedRecord[\"orderby\"].forEach(function(data){if(data[\"ordertype\"]&&data[\"ordertype\"].value===2){orderByCustom[data[\"columnname\"].items.columnname]=-1;orderByCustomDisplay[data[\"columnname\"].label]=-1;}else{orderByCustom[data[\"columnname\"].items.columnname]=1;orderByCustomDisplay[data[\"columnname\"].label]=1;}});// } else {\n//     selectedRecord[\"orderby\"] && selectedRecord[\"orderby\"].forEach(data => {\n//         orderByDefault.push(data[\"columnname\"].items.columnname);\n//         orderByDefaultDisplay.push(data[\"columnname\"].label);\n//     })\n// }\n// if (selectedRecord[\"groupby\"] && selectedRecord[\"groupby\"] === true) {\nif(selectedRecord[\"aggregate\"]&&selectedRecord[\"aggregate\"].length>0){selectedRecord[\"aggregate\"].forEach(function(data){if(data[\"aggfunctionname\"]&&data[\"aggfunctionname\"].label!==''){groupByAggregateFields.push({func:{name:data[\"aggfunctionname\"].label,args:[{field:data[\"columnname\"].items.columnname}]},alias:data[\"columnname\"].items.columnname});groupByAggregateFieldsDisplay.push({func:{name:data[\"aggfunctionname\"].label,args:[{field:data[\"columnname\"].label}]}});}else{groupByAggregateFields.push(data[\"columnname\"].items.columnname);groupByFields.push(data[\"columnname\"].items.columnname);groupByAggregateFieldsDisplay.push(data[\"columnname\"].label);groupByFieldsDisplay.push(data[\"columnname\"].label);}});var databaseSQLQuery=jsonSql.build({type:'select',table:selectedRecord[\"sviewname\"].value,fields:groupByAggregateFields,group:groupByFields,sort:selectedRecord[\"orderby\"]&&selectedRecord[\"orderby\"].length>0?orderByCustom:\"\",condition:databaseCondition});var displaySQLQuery=jsonSql.build({type:'select',fields:groupByAggregateFieldsDisplay,group:groupByFieldsDisplay,sort:selectedRecord[\"orderby\"]&&selectedRecord[\"orderby\"].length>0?orderByCustomDisplay:\"\",table:selectedRecord[\"sviewname\"].label,condition:displayCondition});selectedRecord[\"sgeneratedquery\"]=databaseSQLQuery.query;selectedRecord[\"sdisplayquery\"]=displaySQLQuery.query;this.setState({selectedRecord:selectedRecord});}// }\n}}]);return QueryBuilder;}(Component);var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,updateStore:updateStore,filterColumnData:filterColumnData,validateEsignCredential:validateEsignCredential,getSQLQueryDetail:getSQLQueryDetail,getSQLQueryComboService:getSQLQueryComboService,comboChangeQueryType:comboChangeQueryType,executeUserQuery:executeUserQuery,comboColumnValues:comboColumnValues,getColumnNamesByTableName:getColumnNamesByTableName,getTablesName:getTablesName,getModuleFormName:getModuleFormName,getDatabaseTables:getDatabaseTables,executeQuery:executeQuery,getForeignTable:getForeignTable,getViewColumns:getViewColumns,getMasterData:getMasterData,createQueryBuilder:createQueryBuilder,getParameterFromQuery:getParameterFromQuery,getSelectedQueryBuilder:getSelectedQueryBuilder,updateQueryBuilder:updateQueryBuilder,getQueryBuilder:getQueryBuilder})(injectIntl(QueryBuilder));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/dashboard/QueryBuilder.jsx"],"names":["React","Component","connect","injectIntl","FormattedMessage","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faTrashAlt","faCopy","process","toast","ListMaster","SlideOutModal","Esign","AddQuery","AddParameter","QueryTypeFilter","callService","crudMaster","validateEsignCredential","updateStore","getSQLQueryDetail","getSQLQueryComboService","filterColumnData","comboChangeQueryType","executeUserQuery","comboColumnValues","getColumnNamesByTableName","getTablesName","getModuleFormName","getDatabaseTables","executeQuery","getForeignTable","getViewColumns","getMasterData","createQueryBuilder","getParameterFromQuery","getSelectedQueryBuilder","updateQueryBuilder","getQueryBuilder","DEFAULT_RETURN","transactionStatus","queryTypeFilter","tableType","ColumnType","constructOptionList","getControlMap","showEsign","ReadOnlyText","ContentPanel","rsapi","ConfirmMessage","Affix","BreadcrumbComponent","ListWrapper","PortalModalSlideout","BuildQuery","render","format","ProductList","QueryBuilderParamter","DataGridComponent","stringOperatorData","jsonSql","require","separatedValues","jsonSqlParam","QueryBuilder","props","dataStateChange","event","setState","dataResult","Login","queryData","dataState","dataStateChangeMain","dataResultMain","queryDataMain","dataStateMain","copySQLQuery","type","count","query","state","selectedRecord","forEach","dataItem","items","needmasterdata","mastertablename","symbolObject","value","item","index","length","replace","viewvaluemember","includes","sforeigncolumnname","undefined","columnname","userInfo","slanguagetypecode","navigator","clipboard","writeText","masterData","selectedQueryBuilder","sdefaultValue","JSON","parse","sdefaultvalue","reloadData","searchRef","current","inputParam","inputData","classUrl","methodUrl","saveParam","saveType","formRef","comboData","sqryData","isNaN","columntype","DATATIME","DATE","isInputVisible","symbolType","Date","jsonData","sgeneratedquery","columnList","save","jsondata","postParam","i","inputListName","selectedObject","primaryKeyField","viewColumnListByRule","selectFields","label","displayName","operation","info","intl","formatMessage","id","deleteQB","ncontrolCode","confirmDelete","confirmMessage","confirm","openFilter","showFilter","updateInfo","typeName","data","closeFilter","onFilterSubmit","selectedcombo","console","log","nquerytypecode","queryTypeCode","onFilterComboChange","fieldName","generateFilterQuery","onParamComboChange","onParamInputChange","inputValue","target","test","checked","index1","indexOf","inputname","substr","slice","showInputValue","handleFilterDateChange","dateName","dateValue","groupIndex","onComboChange","onViewComboChange","sviewname","userinfo","onAggregateChange","onRuleChange","clearSelectedRule","sqlQuery","oldselectedRecord","tableData","nflag","valuemember","displaymember","optionId","viewMasterListByRule","COMBO","stablename","foriegntablename","scolumnname","TEXTINPUT","onMasterDataChange","onOrderbyChange","deleteOrderby","addOrderbyList","splice","addOrderby","arrayLength","viewColumnList","deleteAggregate","addAggregateList","addAggregate","addRule","addGroupList","addGroup","sql1","build","table","alias","join","on","sql21","condition","a","$gt","b","$lt","group","addRuleList","closePortalModal","openPortalModal","closeModal","openModal","onExecuteRule","deleteRule","clearRule","resetRule","onSymbolChange","oldSelectedRecord","onInputChange","name","setDialect","databaseCondition","displayCondition","databaseConditionParam","fieldWithValue","notOperator","groupConditionDatabase","groupConditionDatabaseParam","groupConditionDisplay","Array","map","current_button_and","current_button_or","next_button_and","next_button_or","symbolname","symbol","numericinput","columnLabel","columnValue","snumericinputtwo","columnName","dateinput","dateinputtwo","replacewith","push","tempValue","tempValue1","data1","groupByFunction","$not","$and","$or","finalConditionDisplay","finalConditionDatabase","finalConditionDatabaseParam","databaseSQLQuery","displaySQLQuery","dbFields","fieldList","dbfieldList","groupByAggregateFields","groupByFields","groupByAggregateFieldsDisplay","groupByFieldsDisplay","orderByDefault","orderByCustom","orderByDefaultDisplay","orderByCustomDisplay","func","args","field","languagecode","fieldValue","databaseSQLQueryParam","fields","sort","dbQueryParam","dbQuery","paramIndex","onConditionClick","onQueryTypeOnclick","skip","take","settings","parseInt","dataStateUserQuery","error","parameters","queryName","userRoleControlRights","controlMap","Map","queryTypeName","selectedTableType","moduleFormName","ntableTypeCode","nFormCode","queryType","chartList","outputColumns","selectedTableList","tableColumnList","foreignTableColumnList","joinTableList","symbolsList","foreignTableList","foreignTableCount","selectedforeignTableList","filterColumnList","switchRecord","dataMainList","squerytypename","views","createRef","queryFieldList","searchFieldList","previousProps","filterData","generateBreadCrumData","nformcode","Object","values","ncontrolcode","breadCrumbData","filter","addId","has","get","editId","deleteId","gridColumnListMain","idsName","displayname","dataField","width","selectedQueryType","searchedData","queryBuilderList","qryBuilder","handlePageChange","queryTypeOptions","squerybuildername","float","e","screenName","databaseTableList","databaseviewList","masterdata","gridColumnList","viewMasterData","mapStateToProps"],"mappings":"umCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,UAAT,CAAqBC,gBAArB,KAA6C,YAA7C,CACA,OAASC,GAAT,CAAcC,GAAd,CAAmBC,IAAnB,CAAyBC,GAAzB,CAA8BC,SAA9B,CAAyCC,SAAzC,KAA0D,iBAA1D,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,OAASC,UAAT,CAAqBC,MAArB,KAAmC,mCAAnC,CACA,OAASC,OAAT,KAAwB,4BAAxB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,oDAAvB,CACA,MAAOC,CAAAA,aAAP,KAA0B,gDAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,OACIC,WADJ,CACiBC,UADjB,CAC6BC,uBAD7B,CACsDC,WADtD,CACmEC,iBADnE,CAEIC,uBAFJ,CAE6BC,gBAF7B,CAE+CC,oBAF/C,CAEqEC,gBAFrE,CAGIC,iBAHJ,CAGuBC,yBAHvB,CAGkDC,aAHlD,CAGiEC,iBAHjE,CAIIC,iBAJJ,CAIuBC,YAJvB,CAIqCC,eAJrC,CAIsDC,cAJtD,CAIsEC,aAJtE,CAIqFC,kBAJrF,CAKIC,qBALJ,CAK2BC,uBAL3B,CAKoDC,kBALpD,CAKwEC,eALxE,KAMO,eANP,CAOA,OAASC,cAAT,KAA+B,0BAA/B,CACA,OAASC,iBAAT,CAA4BC,eAA5B,CAA6CC,SAA7C,CAAwDC,UAAxD,KAA0E,8BAA1E,CACA,OAASC,mBAAT,CAA8BC,aAA9B,CAA6CC,SAA7C,KAA8D,+BAA9D,CACA,OAASC,YAAT,CAAuBC,YAAvB,KAA2C,6BAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,MAAOC,CAAAA,cAAP,KAA2B,0DAA3B,CACA,OAASC,KAAT,KAAsB,QAAtB,CACA,MAAOC,CAAAA,mBAAP,KAAgC,uCAAhC,CACA,OAASC,WAAT,KAA4B,sCAA5B,CACA;AACA,MAAOC,CAAAA,mBAAP,KAAgC,qDAAhC,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,OAASC,MAAT,KAAuB,wBAAvB,CACA,OAASC,MAAT,KAAuB,UAAvB,CACA,OAASC,WAAT,KAA4B,2BAA5B,CACA,MAAOC,CAAAA,oBAAP,KAAiC,wBAAjC,C,8QAGA,MAAOC,CAAAA,iBAAP,KAA8B,gDAA9B,CACA,OAASC,kBAAT,KAAmC,oBAAnC,CACA;AAEA,GAAMC,CAAAA,OAAO,CAAGC,OAAO,CAAC,UAAD,CAAP,CAAoB,CAAEC,eAAe,CAAE,KAAnB,CAApB,CAAhB,CACA,GAAMC,CAAAA,YAAY,CAAGF,OAAO,CAAC,UAAD,CAAP,CAAoB,CAAEC,eAAe,CAAE,IAAnB,CAApB,CAArB,C,GAEME,CAAAA,Y,4GAEF,sBAAYC,KAAZ,CAAmB,8DACf,uBAAMA,KAAN,EADe,MAgFnBC,eAhFmB,CAgFD,SAACC,KAAD,CAAW,CACzB,MAAKC,QAAL,CAAc,CACVC,UAAU,CAAE/D,OAAO,CAAC,MAAK2D,KAAL,CAAWK,KAAX,CAAiBC,SAAlB,CAA6BJ,KAAK,CAACK,SAAnC,CADT,CAEVA,SAAS,CAAEL,KAAK,CAACK,SAFP,CAAd,EAIH,CArFkB,OAuFnBC,mBAvFmB,CAuFG,SAACN,KAAD,CAAW,CAC7B,MAAKC,QAAL,CAAc,CACVM,cAAc,CAAEpE,OAAO,CAAC,MAAK2D,KAAL,CAAWK,KAAX,CAAiBK,aAAlB,CAAiCR,KAAK,CAACS,aAAvC,CADb,CAEVA,aAAa,CAAET,KAAK,CAACS,aAFX,CAAd,EAIH,CA5FkB,OAiYnBC,YAjYmB,CAiYJ,SAACC,IAAD,CAAU,CACrB,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CACA,GAAID,IAAI,GAAK,CAAb,CAAgB,CAEZ,GAAIE,CAAAA,KAAK,CAAG,MAAKC,KAAL,CAAWC,cAAX,CAA0B,iBAA1B,GAAgD,EAA5D,CAEA,GAAI,MAAKD,KAAL,CAAWC,cAAX,CAA0B,eAA1B,GAA8C,MAAKD,KAAL,CAAWC,cAAX,CAA0B,eAA1B,CAAlD,CAA8F,CAC1F,MAAKD,KAAL,CAAWC,cAAX,CAA0B,eAA1B,EAA2CC,OAA3C,CAAmD,SAACC,QAAD,CAAc,CAE7D,GAAIA,QAAQ,CAACC,KAAT,CAAeC,cAAf,EAAiCF,QAAQ,CAACC,KAAT,CAAeE,eAApD,CAAqE,CAEjE,GAAIH,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,GAA0CD,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,IAA2C,IAAzF,CAA+F,CAE3FD,QAAQ,CAACK,KAAT,CAAeN,OAAf,CAAuB,SAACO,IAAD,CAAOC,KAAP,CAAiB,CAEpCZ,KAAK,GACL,GAAIY,KAAK,GAAK,CAAd,CAAiB,CACb,GAAIP,QAAQ,CAACK,KAAT,CAAeG,MAAf,GAA0B,CAA9B,CAAiC,CAC7BZ,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,KAAOK,QAAQ,CAACC,KAAT,CAAeS,eAAtB,CAAwC,IAApE,CAAR,CACH,CAFD,IAEO,CACHd,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAAP,CAAe,GAA7B,CAAkC,KAAOK,QAAQ,CAACC,KAAT,CAAeS,eAAtB,CAAwC,IAA1E,CAAR,CACH,CACJ,CAND,IAMO,CACH,GAAId,KAAK,CAACe,QAAN,CAAe,KAAOhB,KAAP,CAAe,GAA9B,CAAJ,CAAwC,CACpCC,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAAP,CAAe,GAA7B,CAAkC,EAAlC,CAAR,CACH,CAFD,IAEO,CACHC,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,EAA5B,CAAR,CACH,CACJ,CACJ,CAhBD,EAiBH,CAnBD,IAmBO,CACHA,KAAK,GACLC,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,KAAOK,QAAQ,CAACC,KAAT,CAAeS,eAAtB,CAAwC,IAApE,CAAR,CACH,CACJ,CAzBD,IA0BK,IAAIV,QAAQ,CAACC,KAAT,CAAeW,kBAAf,GAAsCC,SAAtC,EACLb,QAAQ,CAACC,KAAT,CAAeW,kBAAf,GAAsC,EADrC,CACyC,CAC1C,GAAIZ,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,GAA0CD,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,IAA2C,IAAzF,CAA+F,CAE3FD,QAAQ,CAACK,KAAT,CAAeN,OAAf,CAAuB,SAACO,IAAD,CAAOC,KAAP,CAAiB,CAEpCZ,KAAK,GACL,GAAIY,KAAK,GAAK,CAAd,CAAiB,CACb,GAAIP,QAAQ,CAACK,KAAT,CAAeG,MAAf,GAA0B,CAA9B,CAAiC,CAC7BZ,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,KAAOK,QAAQ,CAACC,KAAT,CAAeW,kBAAtB,CAA2C,IAAvE,CAAR,CACH,CAFD,IAEO,CACHhB,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAAP,CAAe,GAA7B,CAAkC,KAAOK,QAAQ,CAACC,KAAT,CAAeW,kBAAtB,CAA2C,IAA7E,CAAR,CACH,CAEJ,CAPD,IAOO,CACH,GAAIhB,KAAK,CAACe,QAAN,CAAe,KAAOhB,KAAP,CAAe,GAA9B,CAAJ,CAAwC,CACpCC,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAAP,CAAe,GAA7B,CAAkC,EAAlC,CAAR,CACH,CAFD,IAEO,CACHC,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,EAA5B,CAAR,CACH,CAEJ,CACJ,CAlBD,EAmBH,CArBD,IAqBO,CACHA,KAAK,GACLC,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,KAAOK,QAAQ,CAACC,KAAT,CAAeW,kBAAtB,CAA2C,IAAvE,CAAR,CACH,CACJ,CA3BI,IA2BE,CACHjB,KAAK,GACLC,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,KAAOK,QAAQ,CAACC,KAAT,CAAea,UAAtB,CAAmC,IAA/D,CAAR,CACH,CACJ,CA3DD,EA4DH,CACD,GAAIlB,KAAK,CAACe,QAAN,CAAe,IAAf,CAAJ,CAA0B,CACtBf,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,IAAd,CAAoB,IAAM,MAAK5B,KAAL,CAAWK,KAAX,CAAiB6B,QAAjB,CAA0BC,iBAAhC,CAAoD,GAAxE,CAAR,CACH,CACDC,SAAS,CAACC,SAAV,CAAoBC,SAApB,CAA8BvB,KAA9B,EAEH,CAvED,IAuEO,CACH,GAAIA,CAAAA,MAAK,CAAG,MAAKf,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BC,oBAA5B,CAAiD,iBAAjD,GAAuE,EAAnF,CAEA,GAAI,MAAKxC,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BC,oBAA5B,CAAiD,eAAjD,GAAqE,MAAKxC,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BC,oBAA5B,CAAiD,eAAjD,EAAkEhB,KAA3I,CAAkJ,CAC9I,GAAMiB,CAAAA,aAAa,CAAGC,IAAI,CAACC,KAAL,CAAW,MAAK3C,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BC,oBAA5B,CAAiD,eAAjD,EAAkEhB,KAA7E,CAAtB,CAEAiB,aAAa,CAACG,aAAd,CAA4B1B,OAA5B,CAAoC,SAACC,QAAD,CAAWO,KAAX,CAAqB,CACrD,GAAIP,QAAQ,CAACC,KAAT,CAAeC,cAAf,EAAiCF,QAAQ,CAACC,KAAT,CAAeE,eAApD,CAAqE,CACjE,GAAIH,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,GAA0CD,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,IAA2C,IAAzF,CAA+F,CAE3FD,QAAQ,CAACK,KAAT,CAAeN,OAAf,CAAuB,SAACO,IAAD,CAAOC,KAAP,CAAiB,CAEpCZ,KAAK,GACL,GAAIY,KAAK,GAAK,CAAd,CAAiB,CACb,GAAIP,QAAQ,CAACK,KAAT,CAAeG,MAAf,GAA0B,CAA9B,CAAiC,CAC7BZ,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,KAAOK,QAAQ,CAACC,KAAT,CAAeS,eAAtB,CAAwC,IAApE,CAAR,CACH,CAFD,IAEO,CACHd,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,KAAOd,KAAP,CAAe,GAA7B,CAAkC,KAAOK,QAAQ,CAACC,KAAT,CAAeS,eAAtB,CAAwC,IAA1E,CAAR,CACH,CACJ,CAND,IAMO,CACH,GAAId,MAAK,CAACe,QAAN,CAAe,KAAOhB,KAAP,CAAe,GAA9B,CAAJ,CAAwC,CACpCC,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,KAAOd,KAAP,CAAe,GAA7B,CAAkC,EAAlC,CAAR,CACH,CAFD,IAEO,CACHC,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,EAA5B,CAAR,CACH,CACJ,CACJ,CAhBD,EAiBH,CAnBD,IAmBO,CACHA,KAAK,GACLC,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,KAAOK,QAAQ,CAACC,KAAT,CAAeS,eAAtB,CAAwC,IAApE,CAAR,CACH,CACJ,CAxBD,IAyBK,IAAIV,QAAQ,CAACC,KAAT,CAAeW,kBAAf,GAAsCC,SAAtC,EACLb,QAAQ,CAACC,KAAT,CAAeW,kBAAf,GAAsC,EADrC,CACyC,CAC1C,GAAIZ,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,GAA0CD,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,IAA2C,IAAzF,CAA+F,CAE3FD,QAAQ,CAACK,KAAT,CAAeN,OAAf,CAAuB,SAACO,IAAD,CAAOC,KAAP,CAAiB,CAEpCZ,KAAK,GACL,GAAIY,KAAK,GAAK,CAAd,CAAiB,CACb,GAAIP,QAAQ,CAACK,KAAT,CAAeG,MAAf,GAA0B,CAA9B,CAAiC,CAC7BZ,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,KAAOK,QAAQ,CAACC,KAAT,CAAeW,kBAAtB,CAA2C,IAAvE,CAAR,CACH,CAFD,IAEO,CACHhB,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,KAAOd,KAAP,CAAe,GAA7B,CAAkC,KAAOK,QAAQ,CAACC,KAAT,CAAeW,kBAAtB,CAA2C,IAA7E,CAAR,CACH,CAEJ,CAPD,IAOO,CACH,GAAIhB,MAAK,CAACe,QAAN,CAAe,KAAOhB,KAAP,CAAe,GAA9B,CAAJ,CAAwC,CACpCC,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,KAAOd,KAAP,CAAe,GAA7B,CAAkC,EAAlC,CAAR,CACH,CAFD,IAEO,CACHC,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,EAA5B,CAAR,CACH,CAEJ,CACJ,CAlBD,EAmBH,CArBD,IAqBO,CACHA,KAAK,GACLC,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,KAAOK,QAAQ,CAACC,KAAT,CAAeW,kBAAtB,CAA2C,IAAvE,CAAR,CACH,CACJ,CA3BI,IA2BE,CACHjB,KAAK,GACLC,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,KAAOK,QAAQ,CAACC,KAAT,CAAea,UAAtB,CAAmC,IAA/D,CAAR,CACH,CACJ,CAzDD,EA0DH,CACD,GAAIlB,MAAK,CAACe,QAAN,CAAe,IAAf,CAAJ,CAA0B,CACtBf,MAAK,CAAGA,MAAK,CAACa,OAAN,CAAc,IAAd,CAAoB,IAAM,MAAK5B,KAAL,CAAWK,KAAX,CAAiB6B,QAAjB,CAA0BC,iBAAhC,CAAoD,GAAxE,CAAR,CACH,CACDC,SAAS,CAACC,SAAV,CAAoBC,SAApB,CAA8BvB,MAA9B,EACH,CAGJ,CAlhBkB,OAmhBnB8B,UAnhBmB,CAmhBN,UAAM,CACf,MAAKC,SAAL,CAAeC,OAAf,CAAuBvB,KAAvB,CAA+B,EAA/B,CACA,GAAMwB,CAAAA,UAAU,CAAG,CACfC,SAAS,CAAE,CAAE,WAAY,MAAKjD,KAAL,CAAWK,KAAX,CAAiB6B,QAA/B,CADI,CAEfgB,QAAQ,CAAE,cAFK,CAGfC,SAAS,CAAE,cAHI,CAIf;AACAjB,QAAQ,CAAE,MAAKlC,KAAL,CAAWK,KAAX,CAAiB6B,QALZ,CAAnB,CAQA,MAAKlC,KAAL,CAAWnD,WAAX,CAAuBmG,UAAvB,EACH,CA9hBkB,OAgiBnBI,SAhiBmB,CAgiBP,SAACC,QAAD,CAAWC,OAAX,CAAuB,CAE/B,GAAIxC,CAAAA,KAAK,CAAG,CAAZ,CAEA,GAAIC,CAAAA,KAAK,CAAG,MAAKf,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BC,oBAA5B,CAAiD,iBAAjD,CAAZ,CAEA,MAAKxC,KAAL,CAAWK,KAAX,CAAiBkD,SAAjB,CAA2BX,aAA3B,CAAyC1B,OAAzC,CAAiD,SAACC,QAAD,CAAc,CAE3D,GAAIA,QAAQ,CAACC,KAAT,CAAeC,cAAf,EAAiCF,QAAQ,CAACC,KAAT,CAAeE,eAApD,CAAqE,CAEjE,GAAIkC,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIrC,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,GAA0CD,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,IAA2C,IAAzF,CAA+F,CAE3FD,QAAQ,CAACK,KAAT,CAAeN,OAAf,CAAuB,SAACO,IAAD,CAAU,CAE7BX,KAAK,GAEL,GAAI2C,KAAK,CAAChC,IAAI,CAACD,KAAN,CAAT,CAAuB,CACnBT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMW,IAAI,CAACD,KAAX,CAAmB,GAA/C,CAAR,CACH,CAFD,IAEO,CACHT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4BW,IAAI,CAACD,KAAjC,CAAR,CACH,CACJ,CATD,EAWH,CAbD,IAaO,CACHV,KAAK,GACL,GAAI2C,KAAK,CAACtC,QAAQ,CAACK,KAAT,CAAeA,KAAhB,CAAT,CAAiC,CAC7BT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMK,QAAQ,CAACK,KAAT,CAAeA,KAArB,CAA6B,GAAzD,CAAR,CACH,CAFD,IAEO,CACHT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4BK,QAAQ,CAACK,KAAT,CAAeA,KAA3C,CAAR,CACH,CACJ,CAGJ,CA1BD,IA0BO,IAAIL,QAAQ,CAACC,KAAT,CAAeW,kBAAf,GAAsCC,SAAtC,EACPb,QAAQ,CAACC,KAAT,CAAeW,kBAAf,GAAsC,EADnC,CACuC,CAE1C,GAAIZ,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,GAA0CD,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,IAA2C,IAAzF,CAA+F,CAE3FD,QAAQ,CAACK,KAAT,CAAeN,OAAf,CAAuB,SAACO,IAAD,CAAU,CAE7BX,KAAK,GAEL,GAAI2C,KAAK,CAAChC,IAAI,CAACD,KAAN,CAAT,CAAuB,CACnBT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMW,IAAI,CAACD,KAAX,CAAmB,GAA/C,CAAR,CACH,CAFD,IAEO,CACHT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4BW,IAAI,CAACD,KAAjC,CAAR,CACH,CACJ,CATD,EAYH,CAdD,IAcO,CACHV,KAAK,GACL,GAAI2C,KAAK,CAACtC,QAAQ,CAACK,KAAT,CAAeA,KAAhB,CAAT,CAAiC,CAC7BT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMK,QAAQ,CAACK,KAAT,CAAeA,KAArB,CAA6B,GAAzD,CAAR,CACH,CAFD,IAEO,CACHT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4BK,QAAQ,CAACK,KAAT,CAAeA,KAA3C,CAAR,CACH,CACJ,CAEJ,CA1BM,IA0BA,IAAIL,QAAQ,CAACC,KAAT,CAAesC,UAAf,GAA8BlF,UAAU,CAACmF,QAAzC,EACJxC,QAAQ,CAACC,KAAT,CAAesC,UAAf,GAA8BlF,UAAU,CAACoF,IAAzC,EAAiDzC,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4ByC,cAA5B,GAA+C,IAAhG,GACC1C,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B0C,UAA5B,GAA2C,CAA3C,EAAgD3C,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B0C,UAA5B,GAA2C,CAD5F,CADA,CAEgG,CACnGhD,KAAK,GACLC,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMxB,MAAM,CAAC,GAAIyE,CAAAA,IAAJ,CAAS5C,QAAQ,CAACK,KAAlB,CAAD,CAA2B,wBAA3B,CAAZ,CAAmE,GAA/F,CAAR,CAGH,CAPM,IAOA,CACHV,KAAK,GACLC,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMK,QAAQ,CAACK,KAAf,CAAuB,GAAnD,CAAR,CACH,CACJ,CAjED,EAkEA,GAAIT,KAAK,CAACe,QAAN,CAAe,IAAf,CAAJ,CAA0B,CACtBf,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,IAAd,CAAoB,IAAM,MAAK5B,KAAL,CAAWK,KAAX,CAAiB6B,QAAjB,CAA0BC,iBAAhC,CAAoD,GAAxE,CAAR,CACH,CACD,GAAM6B,CAAAA,QAAQ,CAAGtB,IAAI,CAACC,KAAL,CAAW,MAAK3C,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BC,oBAA5B,CAAiD,UAAjD,EAA6DhB,KAAxE,CAAjB,CACA,GAAMwB,CAAAA,UAAU,CAAG,CACfiB,eAAe,CAAElD,KADF,CAEfmD,UAAU,CAAEF,QAAQ,CAAC,YAAD,CAFL,CAGf9B,QAAQ,CAAE,MAAKlC,KAAL,CAAWK,KAAX,CAAiB6B,QAHZ,CAAnB,CAMA,GAAIe,CAAAA,SAAS,CAAG,EAAhB,CACA,MAAKjD,KAAL,CAAW9B,kBAAX,CAA8B8E,UAA9B,CAA0CC,SAA1C,CAAqD,MAAKjD,KAAL,CAAWK,KAAX,CAAiBkC,UAAtE,EAEH,CArnBkB,OAsnBnB4B,IAtnBmB,CAsnBZ,SAACd,QAAD,CAAWC,OAAX,CAAuB,CAE1B,GAAQrC,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CAEA,GAAIA,cAAc,CAAC,kBAAD,CAAd,EAAsCA,cAAc,CAAC,kBAAD,CAAd,CAAmCU,MAAnC,CAA4C,CAAtF,CAAyF,CACrF,GAAIV,cAAc,CAAC,eAAD,CAAd,EAAmCA,cAAc,CAAC,eAAD,CAAd,CAAgCU,MAAhC,CAAyC,CAAhF,CAAmF,CAE/E,GAAIsB,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAImB,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,SAAS,CAAGrC,SAAhB,CAEA,GAAIf,cAAc,CAAC,eAAD,CAAd,CAAgCU,MAAhC,CAAyC,CAA7C,CAAgD,CAC5CV,cAAc,CAAC,eAAD,CAAd,CAAgCC,OAAhC,CAAwC,SAACO,IAAD,CAAO6C,CAAP,CAAa,CACjD,GAAI7C,IAAI,CAACF,YAAL,CAAkBH,KAAlB,CAAwB0C,UAAxB,GAAuC,CAA3C,CAA8C,CAC1C,MAAOrC,CAAAA,IAAI,CAACF,YAAL,CAAkBH,KAAlB,CAAwB,aAAxB,CAAP,CACH,CACJ,CAJD,EAKH,CAEDiD,SAAS,CAAG,CAAEE,aAAa,CAAE,cAAjB,CAAiCC,cAAc,CAAE,sBAAjD,CAAyEC,eAAe,CAAE,mBAA1F,CAAZ,CAEAxB,SAAS,CAAC,UAAD,CAAT,CAAwB,MAAKjD,KAAL,CAAWK,KAAX,CAAiB6B,QAAzC,CACAe,SAAS,CAAC,cAAD,CAAT,CAA4B,CAAE,UAAW,CAAb,CAA5B,CAEAmB,QAAQ,CAAC,WAAD,CAAR,CAAwBnD,cAAc,CAAC,WAAD,CAAtC,CACAmD,QAAQ,CAAC,WAAD,CAAR,CAAwBnD,cAAc,CAAC,WAAD,CAAtC,CACAmD,QAAQ,CAAC,SAAD,CAAR,CAAsBnD,cAAc,CAAC,SAAD,CAApC,CACAmD,QAAQ,CAAC,YAAD,CAAR,CAAyB,MAAKpE,KAAL,CAAWK,KAAX,CAAiBqE,oBAA1C,CAAgE;AAChEN,QAAQ,CAAC,cAAD,CAAR,CAA2B,MAAKpE,KAAL,CAAWK,KAAX,CAAiBsE,YAA5C,CAA0D;AAC1D1B,SAAS,CAAC,iBAAD,CAAT,CAA+BhC,cAAc,CAAC,iBAAD,CAA7C,CAGAgC,SAAS,CAAC,cAAD,CAAT,CAA0B,mBAA1B,EAAiDhC,cAAc,CAAC,kBAAD,CAA/D,CACAgC,SAAS,CAAC,cAAD,CAAT,CAA0B,YAA1B,EAA0C,CAA1C,CACAA,SAAS,CAAC,cAAD,CAAT,CAA0B,WAA1B,EAAyChC,cAAc,CAAC,WAAD,CAAd,CAA4B2D,KAArE,CACA3B,SAAS,CAAC,cAAD,CAAT,CAA0B,iBAA1B,EAA+ChC,cAAc,CAAC,iBAAD,CAA7D,CACAgC,SAAS,CAAC,cAAD,CAAT,CAA0B,iBAA1B,EAA+ChC,cAAc,CAAC,iBAAD,CAA7D,CACAgC,SAAS,CAAC,cAAD,CAAT,CAA0B,eAA1B,EAA6C,CAAEL,aAAa,CAAE3B,cAAc,CAAC,eAAD,CAA/B,CAA7C,CACAgC,SAAS,CAAC,cAAD,CAAT,CAA0B,UAA1B,EAAwCmB,QAAxC,CAEA,GAAMpB,CAAAA,UAAU,CAAG,CACfE,QAAQ,CAAE,cADK,CAEfC,SAAS,CAAE,cAFI,CAGf0B,WAAW,CAAE,MAAK7E,KAAL,CAAWK,KAAX,CAAiB2C,UAAjB,CAA4B6B,WAH1B,CAIf5B,SAAS,CAAEA,SAJI,CAKf6B,SAAS,CAAE,QALI,CAKMzB,QAAQ,CAARA,QALN,CAKgBC,OAAO,CAAPA,OALhB,CAKyBe,SAAS,CAATA,SALzB,CAAnB,CAOA,MAAKrE,KAAL,CAAWlD,UAAX,CAAsBkG,UAAtB,CAAkC,MAAKhD,KAAL,CAAWK,KAAX,CAAiBkC,UAAnD,CAA+D,iBAA/D,EACA;AACH,CA5CD,IA6CK,CACDjG,KAAK,CAACyI,IAAN,CAAW,MAAK/E,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,sBAAN,CAA9B,CAAX,EACH,CACJ,CAjDD,IAkDK,CACD5I,KAAK,CAACyI,IAAN,CAAW,MAAK/E,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,6BAAN,CAA9B,CAAX,EACH,CACJ,CA/qBkB,OAgrBnBC,QAhrBmB,CAgrBR,SAACC,YAAD,CAAkB,CACzB,GAAInC,CAAAA,SAAS,CAAG,EAAhB,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,SAAS,CAAC,cAAD,CAAT,CAA4B,MAAKjD,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BC,oBAAxD,CACAS,SAAS,CAAC,UAAD,CAAT,CAAwB,MAAKjD,KAAL,CAAWK,KAAX,CAAiB6B,QAAzC,CAGA,GAAMc,CAAAA,UAAU,CAAG,CACfG,SAAS,CAAE,cADI,CAEfD,QAAQ,CAAE,cAFK,CAGfD,SAAS,CAAEA,SAHI,CAIf6B,SAAS,CAAE,QAJI,CAIMhC,SAAS,CAAE,MAAKA,SAJtB,CAAnB,CAOA,MAAK9C,KAAL,CAAWlD,UAAX,CAAsBkG,UAAtB,CAAkC,MAAKhD,KAAL,CAAWK,KAAX,CAAiBkC,UAAnD,CAA+D,WAA/D,EAEH,CAxsBkB,OA0sBnB8C,aA1sBmB,CA0sBH,SAACD,YAAD,CAAkB,CAC9B,MAAKE,cAAL,CAAoBC,OAApB,CAA4B,eAA5B,CACI,MAAKvF,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,YAAN,CAA9B,CADJ,CAEI,MAAKlF,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,uBAAN,CAA9B,CAFJ,CAGI,MAAKlF,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,QAAN,CAA9B,CAHJ,CAII,MAAKlF,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,YAAN,CAA9B,CAJJ,CAKI,iBAAM,OAAKC,QAAL,CAAc,QAAd,CAAwBC,YAAxB,CAAN,EALJ,EAMH,CAjtBkB,OAmtBnBI,UAntBmB,CAmtBN,UAAM,CACf,GAAIC,CAAAA,UAAU,CAAG,CAAC,MAAKzF,KAAL,CAAWK,KAAX,CAAiBoF,UAAnC,CACA,GAAMC,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CAAEH,UAAU,CAAVA,UAAF,CAFS,CAAnB,CAIA,MAAKzF,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACH,CA1tBkB,OA4tBnBG,WA5tBmB,CA4tBL,UAAM,CAEhB,GAAMH,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CAAEH,UAAU,CAAE,KAAd,CAFS,CAAnB,CAIA,MAAKzF,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACH,CAnuBkB,OAquBnBI,cAruBmB,CAquBF,UAAM,CAEnB,MAAKhD,SAAL,CAAeC,OAAf,CAAuBvB,KAAvB,CAA+B,EAA/B,CAEA,GAAI,MAAKR,KAAL,CAAW+E,aAAX,CAAyB,gBAAzB,CAAJ,CAAgD,CAC5CC,OAAO,CAACC,GAAR,CAAY,MAAKjF,KAAL,CAAW+E,aAAX,CAAyB,gBAAzB,EAA2CvE,KAAvD,EACH,CACD,GAAM0E,CAAAA,cAAc,CAAG,MAAKlF,KAAL,CAAW+E,aAAX,CAAyB,gBAAzB,EACnB,MAAK/E,KAAL,CAAW+E,aAAX,CAAyB,gBAAzB,EAA2CvE,KADxB,CACgC,MAAKxB,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B4D,aADnF,CAGA,MAAKnG,KAAL,CAAW7B,eAAX,CAA2B+H,cAA3B,CAA2C,MAAKlG,KAAL,CAAWK,KAAX,CAAiB6B,QAA5D,CAAsE,MAAKlC,KAAL,CAAWK,KAAX,CAAiBkC,UAAvF,EAGH,CAlvBkB,OAovBnB6D,mBApvBmB,CAovBG,SAAC7C,SAAD,CAAY8C,SAAZ,CAA0B,CAC5C,GAAMpF,CAAAA,cAAc,CAAG,MAAKD,KAAL,CAAWC,cAAX,EAA6B,EAApD,CACAA,cAAc,CAACoF,SAAD,CAAd,CAA4B9C,SAA5B,CACA,MAAK+C,mBAAL,CAAyBrF,cAAzB,EACH,CAxvBkB,OAyvBnBsF,kBAzvBmB,CAyvBE,SAACX,IAAD,CAAOlE,KAAP,CAAiB,CAElC,GAAI6B,CAAAA,SAAS,CAAG,MAAKvD,KAAL,CAAWK,KAAX,CAAiBkD,SAAjC,CACAA,SAAS,CAAC,eAAD,CAAT,CAA2B7B,KAA3B,EAAkCF,KAAlC,CAA0CoE,IAA1C,CACA,GAAMF,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CACFrC,SAAS,CAATA,SADE,CAFS,CAAnB,CAMA,MAAKvD,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACH,CApwBkB,OAqwBnBc,kBArwBmB,CAqwBE,SAACtG,KAAD,CAAQW,IAAR,CAAca,KAAd,CAAqBP,QAArB,CAAkC,CACnD,GAAIoC,CAAAA,SAAS,CAAG,MAAKvD,KAAL,CAAWK,KAAX,CAAiBkD,SAAjC,CACA,GAAI1C,IAAI,GAAK,CAAb,CAAgB,CACZ,GAAM4F,CAAAA,UAAU,CAAGvG,KAAK,CAACwG,MAAN,CAAalF,KAAhC,CACA,GAAI,kBAAkBmF,IAAlB,CAAuBF,UAAvB,GAAsCA,UAAU,GAAK,EAAzD,CAA6D,CACzDlD,SAAS,CAAC,eAAD,CAAT,CAA2B7B,KAA3B,EAAkCF,KAAlC,CAA0CtB,KAAK,CAACwG,MAAN,CAAalF,KAAvD,CACH,CACJ,CALD,IAMK,IAAIX,IAAI,GAAK,CAAb,CAAgB,CACjB0C,SAAS,CAAC,eAAD,CAAT,CAA2B7B,KAA3B,EAAkCF,KAAlC,CAA0CtB,KAAK,CAACwG,MAAN,CAAaE,OAAvD,CACH,CAFI,IAGA,IAAI/F,IAAI,GAAK,CAAb,CAAgB,CAEjB,GAAIM,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B0C,UAA5B,GAA2C,CAA/C,CAAkD,CAC9C;AACA,GAAIvC,CAAAA,YAAY,CAAG,EAAnB,CACA,GAAIJ,QAAQ,CAACI,YAAT,CAAsBC,KAAtB,GAAgC,CAAhC,EAAqCL,QAAQ,CAACI,YAAT,CAAsBC,KAAtB,GAAgC,CAAzE,CAA4E,CACxED,YAAY,CAAG,OAAf,CACH,CAFD,IAEO,IAAIJ,QAAQ,CAACI,YAAT,CAAsBC,KAAtB,GAAgC,CAApC,CAAuC,CAC1CD,YAAY,CAAG,MAAf,CACH,CAFM,IAEA,CACHA,YAAY,CAAG,MAAf,CACH,CACD,GAAMsF,CAAAA,MAAM,CAAGtF,YAAY,CAACuF,OAAb,CAAqB,GAArB,CAAf,CACA,GAAIC,CAAAA,SAAS,CAAG/E,SAAhB,CAEA+E,SAAS,CAAGxF,YAAY,CAACyF,MAAb,CAAoB,CAApB,CAAuBH,MAAvB,EAAiC3G,KAAK,CAACwG,MAAN,CAAalF,KAA9C,CAAsDD,YAAY,CAACyF,MAAb,CAAoBH,MAAM,CAAG,CAA7B,CAAlE,CACAE,SAAS,CAAGA,SAAS,CAACE,KAAV,CAAgB,CAAhB,CAAmBF,SAAS,CAACpF,MAAV,CAAmB,CAAtC,CAAZ,CAEA4B,SAAS,CAAC,eAAD,CAAT,CAA2B7B,KAA3B,EAAkCF,KAAlC,CAA0CuF,SAA1C,CACAxD,SAAS,CAAC,eAAD,CAAT,CAA2B7B,KAA3B,EAAkCwF,cAAlC,CAAmDhH,KAAK,CAACwG,MAAN,CAAalF,KAAhE,CACH,CAlBD,IAkBO,CACH+B,SAAS,CAAC,eAAD,CAAT,CAA2B7B,KAA3B,EAAkCF,KAAlC,CAA0CtB,KAAK,CAACwG,MAAN,CAAalF,KAAvD,CACH,CACJ,CAvBI,IAwBA,CAGD+B,SAAS,CAAC,eAAD,CAAT,CAA2B7B,KAA3B,EAAkCF,KAAlC,CAA0CtB,KAAK,CAACwG,MAAN,CAAalF,KAAvD,CACH,CACD,GAAMkE,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CACFrC,SAAS,CAATA,SADE,CAFS,CAAnB,CAMA,MAAKvD,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACH,CApzBkB,OAqzBnByB,sBArzBmB,CAqzBM,SAACC,QAAD,CAAWC,SAAX,CAAsBC,UAAtB,CAAkC5F,KAAlC,CAA4C,CACjE,GAAQT,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CACA,GAAIoG,SAAS,GAAK,IAAlB,CAAwB,CACpBA,SAAS,CAAG,GAAItD,CAAAA,IAAJ,EAAZ,CACH,CACD9C,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C0F,QAA/C,EAA2DC,SAA3D,CACA,MAAKf,mBAAL,CAAyBrF,cAAzB,EACH,CA5zBkB,OA8zBnBsG,aA9zBmB,CA8zBH,SAAChE,SAAD,CAAY8C,SAAZ,CAA0B,CACtC,GAAMN,CAAAA,aAAa,CAAG,MAAK/E,KAAL,CAAW+E,aAAX,EAA4B,EAAlD,CACAA,aAAa,CAACM,SAAD,CAAb,CAA2B9C,SAA3B,CAEA,MAAKpD,QAAL,CAAc,CAAE4F,aAAa,CAAbA,aAAF,CAAd,EACH,CAn0BkB,OAq0BnByB,iBAr0BmB,CAq0BC,SAACjE,SAAD,CAAY8C,SAAZ,CAA0B,CAC1C,GAAMpF,CAAAA,cAAc,CAAG,MAAKD,KAAL,CAAWC,cAAX,EAA6B,EAApD,CACAA,cAAc,CAACoF,SAAD,CAAd,CAA4B9C,SAA5B,CACA,GAAMP,CAAAA,UAAU,CAAG,CACfyE,SAAS,CAAElE,SAAS,CAAC/B,KADN,CAEfP,cAAc,CAAdA,cAFe,CAGfyG,QAAQ,CAAE,MAAK1H,KAAL,CAAWK,KAAX,CAAiB6B,QAHZ,CAAnB,CAKA,MAAKlC,KAAL,CAAWnC,cAAX,CAA0BmF,UAA1B,EACH,CA90BkB,OAg1BnB2E,iBAh1BmB,CAg1BC,SAACpE,SAAD,CAAY8C,SAAZ,CAAuB3E,KAAvB,CAAiC,CACjD,GAAQT,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CACAA,cAAc,CAAC,WAAD,CAAd,CAA8BA,cAAc,CAAC,WAAD,CAAd,EAA+B,EAA7D,CACA,GAAIoF,SAAS,GAAK,YAAlB,CAAgC,CAC5BpF,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,EAAqC,CAAE,aAAc6B,SAAhB,CAA2B,kBAAmB,EAA9C,CAArC,CACH,CAFD,IAEO,CACH,GAAItC,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,EAAmC,YAAnC,GAAoDT,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,EAAmC,YAAnC,IAAqDM,SAA7G,CAAwH,CACpHf,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,EAAmC,iBAAnC,EAAwD6B,SAAxD,CACH,CAFD,IAGK,CAEJ,CACJ,CAED;AACA,MAAK+C,mBAAL,CAAyBrF,cAAzB,EACH,CAh2BkB,OAi2BnB2G,YAj2BmB,CAi2BJ,SAACrE,SAAD,CAAY8C,SAAZ,CAAuBiB,UAAvB,CAAmC5F,KAAnC,CAA6C,CACxD,GAAQT,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CACA,MAAK4G,iBAAL,CAAuB5G,cAAvB,CAAuCS,KAAvC,EACA,GAAMoG,CAAAA,QAAQ,CAAG,MAAK9H,KAAL,CAAWK,KAAX,CAAiByH,QAAlC,CACA,GAAMC,CAAAA,iBAAiB,CAAG9G,cAA1B,CACAA,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C2E,SAA/C,EAA4D9C,SAA5D,CACA,GAAMyE,CAAAA,SAAS,CAAGzE,SAAS,CAACnC,KAA5B,CACA,GAAME,CAAAA,eAAe,CAAG0G,SAAS,CAAC1G,eAAlC,CAEA,GAAIiC,SAAS,CAACnC,KAAV,CAAgBC,cAAhB,EAAkCC,eAAtC,CAAuD,CACnD,GAAM0B,CAAAA,UAAU,CAAG,CACf0E,QAAQ,CAAE,MAAK1H,KAAL,CAAWK,KAAX,CAAiB6B,QADZ,CAEf0D,IAAI,CAAE,CACFqC,KAAK,CAAE,CADL,CAEF3G,eAAe,CAAfA,eAFE,CAGF4G,WAAW,CAAEF,SAAS,CAACE,WAHrB,CAIFC,aAAa,CAAEH,SAAS,CAACG,aAJvB,CAFS,CAQflH,cAAc,CAAdA,cARe,CASfqG,UAAU,CAAVA,UATe,CAUf5F,KAAK,CAALA,KAVe,CAWf0G,QAAQ,CAAEJ,SAAS,CAACE,WAXL,CAAnB,CAaA,MAAKlI,KAAL,CAAWlC,aAAX,CAAyBkF,UAAzB,CAAqC,MAAKhD,KAAL,CAAWK,KAAX,CAAiBgI,oBAAtD,EACH,CAfD,IAeO,IAAI9E,SAAS,CAACnC,KAAV,EAAmBmC,SAAS,CAACnC,KAAV,CAAgBsC,UAAhB,GAA+BlF,UAAU,CAAC8J,KAAjE,CAAwE,CAC3E,GAAIR,QAAJ,CAAc,CACV,GAAM9E,CAAAA,WAAU,CAAG,CACf0E,QAAQ,CAAE,MAAK1H,KAAL,CAAWK,KAAX,CAAiB6B,QADZ,CAEfqG,UAAU,CAAEhF,SAAS,CAACnC,KAAV,CAAgBoH,gBAFb,CAGfC,WAAW,CAAElF,SAAS,CAAC/B,KAHR,CAIfP,cAAc,CAAdA,cAJe,CAKfqG,UAAU,CAAVA,UALe,CAMf5F,KAAK,CAALA,KANe,CAAnB,CAQA,MAAK1B,KAAL,CAAWpC,eAAX,CAA2BoF,WAA3B,CAAuC,QAAvC,EACH,CAVD,IAUO,CACH/B,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,YAAkD6B,SAAS,CAACnC,KAAV,CAAgBW,kBAAlE,GAA0F,EAA1F,CACA,GAAMiB,CAAAA,YAAU,CAAG,CACf4C,IAAI,gCAAOrC,SAAS,CAACnC,KAAjB,MAAwB6G,KAAK,CAAE,CAA/B,EADW,CAEfP,QAAQ,CAAE,MAAK1H,KAAL,CAAWK,KAAX,CAAiB6B,QAFZ,CAGfjB,cAAc,CAAdA,cAHe,CAIfqG,UAAU,CAAVA,UAJe,CAKf5F,KAAK,CAALA,KALe,CAMf0G,QAAQ,CAAE7E,SAAS,CAACnC,KAAV,CAAgBW,kBANX,CAAnB,CAQA,MAAK/B,KAAL,CAAWlC,aAAX,CAAyBkF,YAAzB,CAAqC,MAAKhD,KAAL,CAAWK,KAAX,CAAiBgI,oBAAtD,EACH,CACJ,CAvBM,IAuBA,IAAI9E,SAAS,CAACnC,KAAV,EAAmBmC,SAAS,CAACnC,KAAV,CAAgBsC,UAAhB,GAA+BlF,UAAU,CAACkK,SAA7D,EACJX,iBAAiB,CAAC,WAAD,CAAjB,CAA+BT,UAA/B,EAA2C5F,KAA3C,EAAkD2E,SAAlD,EAA6DjF,KAA7D,CAAmEsC,UAAnE,GAAkFlF,UAAU,CAACkK,SAD7F,CACwG,CAC3GzH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA+D,EAA/D,CACA,MAAKvB,QAAL,CAAc,CAAEc,cAAc,CAAdA,cAAF,CAAd,EACH,CAJM,IAIA,CACH,MAAKd,QAAL,CAAc,CAAEc,cAAc,CAAdA,cAAF,CAAd,EACH,CACJ,CAv5BkB,OAy5BnB0H,kBAz5BmB,CAy5BE,SAACpF,SAAD,CAAY8C,SAAZ,CAAuBiB,UAAvB,CAAmC5F,KAAnC,CAA6C,CAC9D,GAAQT,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CACAA,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C2E,SAA/C,EAA4D9C,SAA5D,CACA,MAAK+C,mBAAL,CAAyBrF,cAAzB,EACH,CA75BkB,OA85BnB2H,eA95BmB,CA85BD,SAACrF,SAAD,CAAY8C,SAAZ,CAAuB3E,KAAvB,CAAiC,CAC/C,GAAQT,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CACAA,cAAc,CAAC,SAAD,CAAd,CAA4BA,cAAc,CAAC,SAAD,CAAd,EAA6B,EAAzD,CACA,GAAIoF,SAAS,GAAK,YAAlB,CAAgC,CAC5BpF,cAAc,CAAC,SAAD,CAAd,CAA0BS,KAA1B,EAAmC,CAAE,aAAc6B,SAAhB,CAA2B,YAAa,EAAxC,CAAnC,CACH,CAFD,IAEO,CACH,GAAItC,cAAc,CAAC,SAAD,CAAd,CAA0BS,KAA1B,EAAiC,YAAjC,GAAkDT,cAAc,CAAC,SAAD,CAAd,CAA0BS,KAA1B,EAAiC,YAAjC,IAAmDM,SAAzG,CAAoH,CAChHf,cAAc,CAAC,SAAD,CAAd,CAA0BS,KAA1B,EAAiC,WAAjC,EAAgD6B,SAAhD,CACH,CAFD,IAGK,CAEJ,CACJ,CAED;AACA,MAAK+C,mBAAL,CAAyBrF,cAAzB,EACH,CA96BkB,OA+6BnB4H,aA/6BmB,CA+6BH,SAACnH,KAAD,CAAW,CACvB,GAAIoH,CAAAA,cAAc,CAAG,MAAK9I,KAAL,CAAWK,KAAX,CAAiByI,cAAtC,CACA,GAAI7H,CAAAA,cAAc,CAAG,MAAKD,KAAL,CAAWC,cAAhC,CAEAA,cAAc,CAAC,SAAD,CAAd,CAA0B8H,MAA1B,CAAiCrH,KAAjC,CAAwC,CAAxC,EACAoH,cAAc,CAACC,MAAf,CAAsBrH,KAAtB,CAA6B,CAA7B,EACAoH,cAAc,CAAC5H,OAAf,CAAuB,SAAC0E,IAAD,CAAOlE,KAAP,CAAiB,CACpCoH,cAAc,CAACpH,KAAD,CAAd,CAAwBA,KAAxB,CACH,CAFD,EAIA,GAAMgE,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CAAEkD,cAAc,CAAdA,cAAF,CAFS,CAAnB,CAIA,MAAK9I,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACA,MAAKY,mBAAL,CAAyBrF,cAAzB,EACH,CA/7BkB,OAg8BnB+H,UAh8BmB,CAg8BN,UAAM,CAEf,GAAQ/H,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CACA,GAAIA,cAAc,CAAC,WAAD,CAAlB,CAAiC,CAC7B,GAAM6H,CAAAA,cAAc,CAAG,MAAK9I,KAAL,CAAWK,KAAX,CAAiByI,cAAjB,EAAmC,EAA1D,CACA,GAAIpE,CAAAA,oBAAoB,CAAG,MAAK1E,KAAL,CAAWK,KAAX,CAAiBqE,oBAAjB,EAAyC,EAApE,CACA,GAAMuE,CAAAA,WAAW,CAAGH,cAAc,CAACnH,MAAnC,CACA+C,oBAAoB,CAAG,MAAK1E,KAAL,CAAWK,KAAX,CAAiB6I,cAAxC,CACAJ,cAAc,CAACG,WAAD,CAAd,CAA8BA,WAA9B,CACA,GAAMvD,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CACFkD,cAAc,CAAdA,cADE,CAEFpE,oBAAoB,CAApBA,oBAFE,CAFS,CAAnB,CAOA,MAAK1E,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACH,CAdD,IAcO,CACHpJ,KAAK,CAACyI,IAAN,CAAW,MAAK/E,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,gBAAN,CAA9B,CAAX,EACH,CACJ,CAp9BkB,OAq9BnBiE,eAr9BmB,CAq9BD,SAACzH,KAAD,CAAW,CACzB,GAAI0H,CAAAA,gBAAgB,CAAG,MAAKpJ,KAAL,CAAWK,KAAX,CAAiB+I,gBAAxC,CACA,GAAInI,CAAAA,cAAc,CAAG,MAAKD,KAAL,CAAWC,cAAhC,CAEAA,cAAc,CAAC,WAAD,CAAd,CAA4B8H,MAA5B,CAAmCrH,KAAnC,CAA0C,CAA1C,EACA0H,gBAAgB,CAACL,MAAjB,CAAwBrH,KAAxB,CAA+B,CAA/B,EACA0H,gBAAgB,CAAClI,OAAjB,CAAyB,SAAC0E,IAAD,CAAOlE,KAAP,CAAiB,CACtC0H,gBAAgB,CAAC1H,KAAD,CAAhB,CAA0BA,KAA1B,CACH,CAFD,EAIA,GAAMgE,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CAAEwD,gBAAgB,CAAhBA,gBAAF,CAFS,CAAnB,CAIA,MAAKpJ,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACA;AACA,MAAKY,mBAAL,CAAyBrF,cAAzB,EACH,CAt+BkB,OAu+BnBoI,YAv+BmB,CAu+BJ,UAAM,CAEjB,GAAQpI,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CACA,GAAIA,cAAc,CAAC,WAAD,CAAlB,CAAiC,CAC7B;AACA,GAAMmI,CAAAA,gBAAgB,CAAG,MAAKpJ,KAAL,CAAWK,KAAX,CAAiB+I,gBAAjB,EAAqC,EAA9D,CACA,GAAI1E,CAAAA,oBAAoB,CAAG,MAAK1E,KAAL,CAAWK,KAAX,CAAiBqE,oBAAjB,EAAyC,EAApE,CACA,GAAMuE,CAAAA,WAAW,CAAGG,gBAAgB,CAACzH,MAArC,CACA+C,oBAAoB,CAAG,MAAK1E,KAAL,CAAWK,KAAX,CAAiB6I,cAAxC,CACAE,gBAAgB,CAACH,WAAD,CAAhB,CAAgCA,WAAhC,CACA,GAAMvD,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CACFwD,gBAAgB,CAAhBA,gBADE,CAEF1E,oBAAoB,CAApBA,oBAFE,CAFS,CAAnB,CAOA,MAAK1E,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACA;AACA;AACA;AACH,CAlBD,IAkBO,CACHpJ,KAAK,CAACyI,IAAN,CAAW,MAAK/E,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,gBAAN,CAA9B,CAAX,EACH,CACJ,CA//BkB,OAggCnBoE,OAhgCmB,CAggCT,SAACzI,IAAD,CAAOyG,UAAP,CAAsB,CAC5B,GAAQrG,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CACA,GAAIJ,IAAI,GAAK,KAAb,CAAoB,CAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEH,CAnBD,IAmBO,CACH,GAAII,cAAc,CAAC,WAAD,CAAlB,CAAiC,CAC7B,GAAIyD,CAAAA,oBAAoB,CAAG,MAAK1E,KAAL,CAAWK,KAAX,CAAiBqE,oBAAjB,EAAyC,EAApE,CAGA;AACA;AACA;AAGA,GAAM6E,CAAAA,YAAY,CAAG,MAAKvJ,KAAL,CAAWK,KAAX,CAAiBkJ,YAAjB,EAAiC,EAAtD,CACA,GAAMN,CAAAA,WAAW,CAAGM,YAAY,CAACjC,UAAD,CAAhC,CACAiC,YAAY,CAACjC,UAAD,CAAZ,CAA2B2B,WAAW,CAAG,CAAzC,CAEA;AAEAhI,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC2B,WAAxC,EAAuD,EAAvD,CAEA;AACAvE,oBAAoB,CAAG,MAAK1E,KAAL,CAAWK,KAAX,CAAiB6I,cAAxC,CACA,GAAMxD,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CACF2D,YAAY,CAAZA,YADE,CAEF7E,oBAAoB,CAApBA,oBAFE,CAFS,CAAnB,CAOA,MAAK1E,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACH,CA3BD,IA2BO,CACHpJ,KAAK,CAACyI,IAAN,CAAW,MAAK/E,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,gBAAN,CAA9B,CAAX,EACH,CACJ,CAIJ,CAxjCkB,OA0jCnBsE,QA1jCmB,CA0jCR,UAAM,CAEb,GAAQvI,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CAEA,GAAIwI,CAAAA,IAAI,CAAG9J,OAAO,CAAC+J,KAAR,CAAc,CACrBC,KAAK,CAAE,YADc,CAErBC,KAAK,CAAE,IAFc,CAGrBC,IAAI,CAAE,CAAC,CACHhJ,IAAI,CAAE,OADH,CAEH8I,KAAK,CAAE,cAFJ,CAGHC,KAAK,CAAE,IAHJ,CAIHE,EAAE,CAAE,CAAE,uBAAwB,sBAA1B,CAJD,CAAD,CAMN,CACIjJ,IAAI,CAAE,OADV,CAEI8I,KAAK,CAAE,mBAFX,CAGIC,KAAK,CAAE,IAHX,CAIIE,EAAE,CAAE,CAAE,iBAAkB,eAApB,CAJR,CANM,CAHe,CAAd,CAAX,CAgBA9D,OAAO,CAACC,GAAR,CAAYwD,IAAI,CAAC1I,KAAjB,EAEA,GAAIgJ,CAAAA,KAAK,CAAGpK,OAAO,CAAC+J,KAAR,CAAc,CACtBC,KAAK,CAAE,YADe,CAEtBC,KAAK,CAAE,IAFe,CAGtBC,IAAI,CAAE,CAAC,CACHhJ,IAAI,CAAE,OADH,CAEH8I,KAAK,CAAE,cAFJ,CAGHC,KAAK,CAAE,IAHJ,CAIHE,EAAE,CAAE,CAAE,uBAAwB,sBAA1B,CAJD,CAAD,CAMN,CACIjJ,IAAI,CAAE,aADV,CAEI8I,KAAK,CAAE,mBAFX,CAGIC,KAAK,CAAE,IAHX,CAIIE,EAAE,CAAE,CAAE,iBAAkB,eAApB,CAJR,CANM,CAYN,CACIjJ,IAAI,CAAE,YADV,CAEI8I,KAAK,CAAE,mBAFX,CAGIC,KAAK,CAAE,IAHX,CAIIE,EAAE,CAAE,CAAC,CAAE,iBAAkB,eAApB,CAAD,CAAwC,CAAE,iBAAkB,eAApB,CAAxC,CAJR,CAZM,CAHgB,CAqBtBE,SAAS,CAAE,CACP,CAAEC,CAAC,CAAE,CAAEC,GAAG,CAAE,CAAP,CAAL,CADO,CAEP,CAAEC,CAAC,CAAE,CAAEC,GAAG,CAAE,EAAP,CAAL,CAFO,CArBW,CAyBtBC,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAzBe,CAAd,CAAZ,CA2BArE,OAAO,CAACC,GAAR,CAAY8D,KAAK,CAAChJ,KAAlB,EAEA,GAAIE,cAAc,CAAC,WAAD,CAAlB,CAAiC,CAC7B,GAAIyD,CAAAA,oBAAoB,CAAG,MAAK1E,KAAL,CAAWK,KAAX,CAAiBqE,oBAAjB,EAAyC,EAApE,CACA,GAAM6E,CAAAA,YAAY,CAAG,MAAKvJ,KAAL,CAAWK,KAAX,CAAiBkJ,YAAjB,EAAiC,EAAtD,CACA,GAAMN,CAAAA,WAAW,CAAGM,YAAY,CAAC5H,MAAjC,CACA4H,YAAY,CAACN,WAAD,CAAZ,CAA4B,CAA5B,CACA;AACA;AACAvE,oBAAoB,CAAG,MAAK1E,KAAL,CAAWK,KAAX,CAAiB6I,cAAxC,CACA,GAAID,WAAW,GAAK,CAApB,CAAuB,CACnBhI,cAAc,CAAC,WAAD,CAAd,CAA8B,EAA9B,CACAA,cAAc,CAAC,eAAD,CAAd,CAAkC,MAAKjB,KAAL,CAAWK,KAAX,CAAiBsE,YAAnD,CACH,CACD1D,cAAc,CAAC,WAAD,CAAd,CAA4BgI,WAA5B,EAA2C,EAA3C,CACAhI,cAAc,CAAC,WAAD,CAAd,CAA4BgI,WAA5B,EAAyC,YAAzC,EAAyD,IAAzD,CACAhI,cAAc,CAAC,WAAD,CAAd,CAA4BgI,WAA5B,EAAyC,CAAzC,EAA8C,EAA9C,CAEA,GAAMvD,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CACF2D,YAAY,CAAZA,YADE,CAEF7E,oBAAoB,CAApBA,oBAFE,CAGFzD,cAAc,CAAdA,cAHE,CAFS,CAAnB,CAQA,MAAKjB,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACH,CAzBD,IAyBO,CACHpJ,KAAK,CAACyI,IAAN,CAAW,MAAK/E,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,gBAAN,CAA9B,CAAX,EACH,CACJ,CAzoCkB,OA0oCnBxH,iBA1oCmB,CA0oCC,UAAM,CACtB,GAAMoK,CAAAA,QAAQ,CAAG,KAAjB,CACA,MAAK3H,QAAL,CAAc,CAAEc,cAAc,CAAE,EAAlB,CAAd,EACA,MAAKjB,KAAL,CAAWtC,iBAAX,CAA6B,MAAKsC,KAAL,CAAWK,KAAX,CAAiB6B,QAA9C,CAAwD4F,QAAxD,CAAkE,CAC9DwC,WAAW,CAAE,EADiD,CAC7Cf,YAAY,CAAE,EAD+B,CAE9DH,gBAAgB,CAAE,EAF4C,CAExCN,cAAc,CAAE,EAFwB,CAAlE,EAKH,CAlpCkB,OAopCnByB,gBAppCmB,CAopCA,UAAM,CACrB,GAAM7E,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CACF4E,eAAe,CAAE,KADf,CACsBvJ,cAAc,CAAE,EADtC,CAC0CqJ,WAAW,CAAE,EADvD,CAC2DxJ,KAAK,CAAE,CADlE,CAFS,CAAnB,CAMA,MAAKd,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACH,CA5pCkB,OA6pCnB+E,UA7pCmB,CA6pCN,UAAM,CACf,GAAM/E,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CACF8E,SAAS,CAAE,KADT,CACgBzJ,cAAc,CAAE,EADhC,CAFS,CAAnB,CAMA,MAAKjB,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACH,CArqCkB,OAuqCnBiF,aAvqCmB,CAuqCH,UAAM,CAClB,GAAQ1J,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CACA,GAAIA,cAAc,CAAC,iBAAD,CAAlB,CAAuC,CAGnC,GAAIF,CAAAA,KAAK,CAAGE,cAAc,CAAC,iBAAD,CAA1B,CAEA,GAAIH,CAAAA,KAAK,CAAG,CAAZ,CACAG,cAAc,CAAC,eAAD,CAAd,CAAgCC,OAAhC,CAAwC,SAACC,QAAD,CAAc,CAElD,GAAIA,QAAQ,CAACC,KAAT,CAAeC,cAAf,EAAiCF,QAAQ,CAACC,KAAT,CAAeE,eAApD,CAAqE,CAEjE,GAAIkC,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIrC,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,GAA0CD,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,IAA2C,IAAzF,CAA+F,CAE3FD,QAAQ,CAACK,KAAT,CAAeN,OAAf,CAAuB,SAACO,IAAD,CAAU,CAE7BX,KAAK,GAEL,GAAI2C,KAAK,CAAChC,IAAI,CAACD,KAAN,CAAT,CAAuB,CACnBT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMW,IAAI,CAACD,KAAX,CAAmB,GAA/C,CAAR,CACH,CAFD,IAEO,CACHT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4BW,IAAI,CAACD,KAAjC,CAAR,CACH,CACJ,CATD,EAYH,CAdD,IAcO,CACHV,KAAK,GACL,GAAI2C,KAAK,CAACtC,QAAQ,CAACK,KAAT,CAAeA,KAAhB,CAAT,CAAiC,CAC7BT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMK,QAAQ,CAACK,KAAT,CAAeA,KAArB,CAA6B,GAAzD,CAAR,CACH,CAFD,IAEO,CACHT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4BK,QAAQ,CAACK,KAAT,CAAeA,KAA3C,CAAR,CACH,CACJ,CAGJ,CA3BD,IA2BO,IAAIL,QAAQ,CAACC,KAAT,CAAeW,kBAAf,GAAsCC,SAAtC,EACPb,QAAQ,CAACC,KAAT,CAAeW,kBAAf,GAAsC,EADnC,CACuC,CAE1C,GAAIZ,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,GAA0CD,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B,SAA5B,IAA2C,IAAzF,CAA+F,CAE3FD,QAAQ,CAACK,KAAT,CAAeN,OAAf,CAAuB,SAACO,IAAD,CAAU,CAE7BX,KAAK,GAEL,GAAI2C,KAAK,CAAChC,IAAI,CAACD,KAAN,CAAT,CAAuB,CACnBT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMW,IAAI,CAACD,KAAX,CAAmB,GAA/C,CAAR,CACH,CAFD,IAEO,CACHT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4BW,IAAI,CAACD,KAAjC,CAAR,CACH,CACJ,CATD,EAYH,CAdD,IAcO,CACHV,KAAK,GACL,GAAI2C,KAAK,CAACtC,QAAQ,CAACK,KAAT,CAAeA,KAAhB,CAAT,CAAiC,CAC7BT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMK,QAAQ,CAACK,KAAT,CAAeA,KAArB,CAA6B,GAAzD,CAAR,CACH,CAFD,IAEO,CACHT,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4BK,QAAQ,CAACK,KAAT,CAAeA,KAA3C,CAAR,CACH,CACJ,CAEJ,CA1BM,IA0BA,IAAIL,QAAQ,CAACC,KAAT,CAAesC,UAAf,GAA8BlF,UAAU,CAACmF,QAAzC,EACJxC,QAAQ,CAACC,KAAT,CAAesC,UAAf,GAA8BlF,UAAU,CAACoF,IAAzC,EAAiDzC,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4ByC,cAA5B,GAA+C,IAAhG,GACC1C,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B0C,UAA5B,GAA2C,CAA3C,EAAgD3C,QAAQ,CAACI,YAAT,CAAsBH,KAAtB,CAA4B0C,UAA5B,GAA2C,CAD5F,CADA,CAEgG,CAEnGhD,KAAK,GACLC,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMxB,MAAM,CAAC,GAAIyE,CAAAA,IAAJ,CAAS5C,QAAQ,CAACK,KAAlB,CAAD,CAA2B,wBAA3B,CAAZ,CAAmE,GAA/F,CAAR,CAGH,CARM,IAQA,CACHV,KAAK,GACLC,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,KAAOd,KAArB,CAA4B,IAAMK,QAAQ,CAACK,KAAf,CAAuB,GAAnD,CAAR,CACH,CAEJ,CApED,EAqEA,GAAIT,KAAK,CAACe,QAAN,CAAe,IAAf,CAAJ,CAA0B,CACtBf,KAAK,CAAGA,KAAK,CAACa,OAAN,CAAc,IAAd,CAAoB,IAAM,MAAK5B,KAAL,CAAWK,KAAX,CAAiB6B,QAAjB,CAA0BC,iBAAhC,CAAoD,GAAxE,CAAR,CACH,CACD,GAAMa,CAAAA,UAAU,CAAG,CACfiB,eAAe,CAAElD,KADF,CACQ;AACvBE,cAAc,CAAdA,cAFe,CAGfiD,UAAU,CAAE,MAAKlE,KAAL,CAAWK,KAAX,CAAiBqE,oBAHd,CAGoC;AACnDxC,QAAQ,CAAE,MAAKlC,KAAL,CAAWK,KAAX,CAAiB6B,QAJZ,CAKfyC,YAAY,CAAE1D,cAAc,CAAC,eAAD,CAAd,EAAmCA,cAAc,CAAC,eAAD,CAAjD,EAAsE,MAAKjB,KAAL,CAAWK,KAAX,CAAiBsE,YALtF,CAAnB,CAOA,MAAK3E,KAAL,CAAWrC,YAAX,CAAwBqF,UAAxB,EACH,CAtFD,IAsFO,CACH1G,KAAK,CAACyI,IAAN,CAAW,MAAK/E,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,uBAAN,CAA9B,CAAX,EACH,CACJ,CAlwCkB,OAswCnB0F,UAtwCmB,CAswCN,SAACtD,UAAD,CAAa5F,KAAb,CAAuB,CAChC,GAAI6H,CAAAA,YAAY,CAAG,MAAKvJ,KAAL,CAAWK,KAAX,CAAiBkJ,YAApC,CACA,GAAMtI,CAAAA,cAAc,CAAG,MAAKD,KAAL,CAAWC,cAAlC,CACAsI,YAAY,CAACjC,UAAD,CAAZ,CAA2BiC,YAAY,CAACjC,UAAD,CAAZ,CAA2B,CAAtD,CACA;AACA;AACA;AAEA,GAAIiC,YAAY,CAACjC,UAAD,CAAZ,GAA6B,CAAjC,CAAoC,CAChCiC,YAAY,CAACR,MAAb,CAAoBzB,UAApB,CAAgC,CAAhC,EACArG,cAAc,CAAC,WAAD,CAAd,CAA4B8H,MAA5B,CAAmCrH,KAAnC,CAA0C,CAA1C,EACH,CAHD,IAGO,CACHT,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwCyB,MAAxC,CAA+CrH,KAA/C,CAAsD,CAAtD,EACH,CAED;AACA,GAAMgE,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CAAE2D,YAAY,CAAZA,YAAF,CAAgBtI,cAAc,CAAdA,cAAhB,CAFS,CAAnB,CAIA,MAAKjB,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACA,MAAKY,mBAAL,CAAyBrF,cAAzB,EACH,CA5xCkB,OAwyCnB4J,SAxyCmB,CAwyCP,UAAM,CACd,GAAMpD,CAAAA,SAAS,CAAG,MAAKzG,KAAL,CAAWC,cAAX,CAA0BwG,SAA1B,EAAuC,EAAzD,CACA,GAAM/B,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CAAE0E,WAAW,CAAE,EAAf,CAAmBrJ,cAAc,CAAE,CAAEwG,SAAS,CAATA,SAAF,CAAnC,CAAkDK,QAAQ,CAAE,KAA5D,CAFS,CAAnB,CAIA,MAAK9H,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACH,CA/yCkB,OAizCnBoF,SAjzCmB,CAizCP,UAAM,CAEd,GAAMpF,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CACF0E,WAAW,CAAE,EADX,CACef,YAAY,CAAE,EAD7B,CAEFH,gBAAgB,CAAE,EAFhB,CAEoBN,cAAc,CAAE,EAFpC,CAFS,CAAnB,CAOA,MAAK9I,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACA,MAAKvF,QAAL,CAAc,CACVc,cAAc,CAAE,EADN,CAAd,EAIH,CA/zCkB,OAi0CnB8J,cAj0CmB,CAi0CF,SAACxH,SAAD,CAAY8C,SAAZ,CAAuBiB,UAAvB,CAAmC5F,KAAnC,CAA6C,CAC1D,GAAQT,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CACA,GAAM+J,CAAAA,iBAAiB,CAAG/J,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C2E,SAA/C,GAA6D,EAAvF,CACApF,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C2E,SAA/C,EAA4D9C,SAA5D,CACA,GAAMnC,CAAAA,KAAK,CAAGH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA3E,CACAH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6D,OAA7D,EAAsE,gBAAtE,EAA0FN,KAAK,CAACC,cAAN,GAAyBW,SAAzB,CAAqCuB,SAAS,CAACnC,KAAV,CAAgBC,cAArD,CAAsE,KAAhK,CACA,GAAIkC,SAAS,CAACnC,KAAV,CAAgB0C,UAAhB,GAA+B,CAA/B,EAAoCP,SAAS,CAACnC,KAAV,CAAgB0C,UAAhB,GAA+B,CAAvE,CAA0E,CACtE7C,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+CN,KAAK,CAAC,aAAD,CAApD,GAAwE,MAAOH,CAAAA,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+CN,KAAK,CAAC,aAAD,CAApD,CAA/E,CACAH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+CN,KAAK,CAAC,mBAAD,CAApD,GAA8E,MAAOH,CAAAA,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+CN,KAAK,CAAC,mBAAD,CAApD,CAArF,CACAH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,GAAgE,MAAOT,CAAAA,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,CAAvE,CACH,CAJD,IAIO,IAAI6B,SAAS,CAACnC,KAAV,CAAgB0C,UAAhB,GAA+B,CAA/B,EAAoCkH,iBAAiB,CAAC5J,KAAtD,EAA+D4J,iBAAiB,CAAC5J,KAAlB,CAAwB0C,UAAxB,GAAuC,CAA1G,CAA6G,CAChH7C,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,eAA/C,GAAmE,MAAOT,CAAAA,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,eAA/C,CAA1E,CACAT,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,kBAA/C,GAAsE,MAAOT,CAAAA,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,kBAA/C,CAA7E,CACH,CAHM,IAGA,IAAK6B,SAAS,CAACnC,KAAV,CAAgB0C,UAAhB,GAA+B,CAA/B,EAAoCkH,iBAAiB,CAAC5J,KAAtD,EAA+D4J,iBAAiB,CAAC5J,KAAlB,CAAwB0C,UAAxB,GAAuC,CAAvG,EACHP,SAAS,CAACnC,KAAV,CAAgB0C,UAAhB,GAA+B,CAA/B,EAAoCkH,iBAAiB,CAAC5J,KAAtD,EAA+D4J,iBAAiB,CAAC5J,KAAlB,CAAwB0C,UAAxB,GAAuC,CADvG,CAC2G,CAC9G7C,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,YAAkDN,KAAK,CAACW,kBAAxD,IAAiF,MAAOd,CAAAA,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,YAAkDN,KAAK,CAACW,kBAAxD,EAAxF,CACAd,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,YAAkDN,KAAK,CAAC8G,WAAxD,IAA0E,MAAOjH,CAAAA,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,YAAkDN,KAAK,CAAC8G,WAAxD,EAAjF,CACH,CAJM,IAIA,CAEN,CACD,MAAK5B,mBAAL,CAAyBrF,cAAzB,EACH,CAt1CkB,OAw1CnBgK,aAx1CmB,CAw1CH,SAAC/K,KAAD,CAAQW,IAAR,CAAcyG,UAAd,CAA0B5F,KAA1B,CAAoC,CAChD,GAAIT,CAAAA,cAAc,CAAG,MAAKD,KAAL,CAAWC,cAAhC,CACA,GAAIJ,IAAI,GAAK,CAAb,CAAgB,CACZ,GAAM4F,CAAAA,UAAU,CAAGvG,KAAK,CAACwG,MAAN,CAAalF,KAAhC,CACA,GAAI,kBAAkBmF,IAAlB,CAAuBF,UAAvB,GAAsCA,UAAU,GAAK,EAAzD,CAA6D,CACzDxF,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+CxB,KAAK,CAACwG,MAAN,CAAawE,IAA5D,EAAoEhL,KAAK,CAACwG,MAAN,CAAalF,KAAjF,CACH,CAEJ,CAND,IAOK,IAAIX,IAAI,GAAK,CAAb,CAAgB,CACjBI,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+CxB,KAAK,CAACwG,MAAN,CAAawE,IAA5D,EAAoEhL,KAAK,CAACwG,MAAN,CAAaE,OAAjF,CACH,CAFI,IAGA,IAAI/F,IAAI,GAAK,CAAb,CAAgB,CACjBI,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+CxB,KAAK,CAACwG,MAAN,CAAawE,IAA5D,EAAoEhL,KAAK,CAACwG,MAAN,CAAalF,KAAjF,CACH,CAFI,IAGA,CACDP,cAAc,CAACf,KAAK,CAACwG,MAAN,CAAawE,IAAd,CAAd,CAAoChL,KAAK,CAACwG,MAAN,CAAalF,KAAjD,CACH,CACD,MAAKrB,QAAL,CAAc,CAAEc,cAAc,CAAdA,cAAF,CAAd,EACA,MAAKqF,mBAAL,CAAyBrF,cAAzB,EACH,CA52CkB,OA82CnBqF,mBA92CmB,CA82CG,SAACrF,cAAD,CAAoB,CAEtC,GAAMsI,CAAAA,YAAY,CAAG,MAAKvJ,KAAL,CAAWK,KAAX,CAAiBkJ,YAAtC,CACA5J,OAAO,CAACwL,UAAR,CAAmB,OAAnB,EACA,GAAIC,CAAAA,iBAAiB,CAAG,EAAxB,CACA,GAAIC,CAAAA,gBAAgB,CAAG,EAAvB,CACA,GAAIC,CAAAA,sBAAsB,CAAG,EAA7B,CACA,GAAIC,CAAAA,cAAc,CAAG,EAArB,CACA,GAAIC,CAAAA,WAAW,CAAG,KAAlB,CACA,GAAIjC,YAAY,EAAIA,YAAY,CAAC5H,MAAb,CAAsB,CAA1C,CAA6C,CAEzC,GAAI8J,CAAAA,sBAAsB,CAAG,EAA7B,CACA,GAAIC,CAAAA,2BAA2B,CAAG,EAAlC,CACA,GAAIC,CAAAA,qBAAqB,CAAG,EAA5B,CAGApC,YAAY,CAACrI,OAAb,CAAqB,SAACE,KAAD,CAAQkG,UAAR,CAAuB,CACxC,GAAI/F,CAAAA,YAAY,CAAG,EAAnB,CAGA6J,iBAAiB,CAAG,EAApB,CACAE,sBAAsB,CAAG,EAAzB,CACAD,gBAAgB,CAAG,EAAnB,CAEA,mBAAIO,KAAK,CAACxK,KAAD,CAAT,EAAkByK,GAAlB,CAAsB,SAACjG,IAAD,CAAOlE,KAAP,CAAiB,CAEnC,GAAIT,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,CAAJ,CAAkE,CAC9DH,YAAY,CAAGN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,GAAiET,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,EAA8DN,KAA/H,EAAwIH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,EAA8DN,KAAtM,EAA+M,EAA9N,CAEA,GAAM0K,CAAAA,kBAAkB,CAAG7K,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,eAA3B,CACA,GAAMyE,CAAAA,iBAAiB,CAAG9K,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,cAA1B,CACA,GAAM0E,CAAAA,eAAe,CAAG/K,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,eAAxB,CACA,GAAM2E,CAAAA,cAAc,CAAGhL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,eAAuDrG,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,cAAvD,CAA8G,KAArI,CAEA,GAAIP,CAAAA,SAAS,CAAG9F,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,CAAhB,CACA,GAAMwK,CAAAA,UAAU,CAAG3K,YAAY,CAAC4K,MAAhC,CACA,GAAIC,CAAAA,YAAY,CAAGnL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,eAA/C,CAAnB,CACA,GAAM2K,CAAAA,WAAW,CAAGpL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DkD,KAAjF,CACA,GAAM0H,CAAAA,WAAW,CAAGrL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DF,KAAjF,CACA,GAAM+K,CAAAA,gBAAgB,CAAGtL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,kBAA/C,CAAzB,CACA,GAAI8K,CAAAA,UAAU,CAAGxK,SAAjB,CACA,GAAMX,CAAAA,cAAc,CAAGJ,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmEC,cAAnE,CACnBJ,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmEC,cADhD,CACiE,KADxF,CAGA,GAAIJ,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmEC,cAAvE,CAAuF,CACnFmL,UAAU,CAAGvL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmE8G,WAAhF,CACH,CAFD,IAEO,IAAIjH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmEW,kBAAvE,CAA2F,CAC9FyK,UAAU,CAAGvL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmEW,kBAAhF,CACH,CACD,GAAM0K,CAAAA,SAAS,CAAGxL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,WAA/C,GAA+DpC,MAAM,CAAC,GAAIyE,CAAAA,IAAJ,CAAS9C,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,WAA/C,CAAT,CAAD,CAAwE,wBAAxE,CAAvF,CAAwL;AACxL,GAAMgL,CAAAA,YAAY,CAAGzL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,cAA/C,GAAkEpC,MAAM,CAAC,GAAIyE,CAAAA,IAAJ,CAAS9C,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,cAA/C,CAAT,CAAD,CAA2E,wBAA3E,CAA7F,CAAiM;AAEjM,GAAIH,YAAY,EAAIwF,SAApB,CAA+B,CAC3B,GAAIxF,YAAY,CAACuC,UAAb,GAA4B,CAAhC,CAAmC,CAC/B,GAAMoD,CAAAA,cAAc,CAAGH,SAAvB,CACA,GAAMF,CAAAA,MAAM,CAAGtF,YAAY,CAACoL,WAAb,CAAyB7F,OAAzB,CAAiC,GAAjC,CAAf,CACAC,SAAS,CAAGxF,YAAY,CAACoL,WAAb,CAAyB3F,MAAzB,CAAgC,CAAhC,CAAmCH,MAAnC,EAA6CE,SAA7C,CAAyDxF,YAAY,CAACoL,WAAb,CAAyB3F,MAAzB,CAAgCH,MAAM,CAAG,CAAzC,CAArE,CACAE,SAAS,CAAGA,SAAS,CAACE,KAAV,CAAgB,CAAhB,CAAmBF,SAAS,CAACpF,MAAV,CAAmB,CAAtC,CAAZ,CAEAyJ,iBAAiB,CAACwB,IAAlB,oBAA0BN,WAA1B,oBAA2CJ,UAA3C,CAAwDnF,SAAxD,IACAsE,gBAAgB,CAACuB,IAAjB,oBAAyBP,WAAzB,oBAA0CH,UAA1C,CAAuDnF,SAAvD,IACAuE,sBAAsB,CAACsB,IAAvB,oBAA+BN,WAA/B,oBAAgDJ,UAAhD,CAA6DnF,SAA7D,IACAwE,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEF,WAAd,CAA2B9K,KAAK,CAAEuF,SAAlC,CAA6CG,cAAc,CAAEA,cAA7D,CAA6E3F,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAA3F,CAA0JN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA9N,CAApB,EACH,CAVD,IAUO,CACHgK,iBAAiB,CAACwB,IAAlB,oBAA0BN,WAA1B,oBAA2CJ,UAA3C,CAAwDnF,SAAxD,IACAsE,gBAAgB,CAACuB,IAAjB,oBAAyBP,WAAzB,oBAA0CH,UAA1C,CAAuDnF,SAAvD,IACAuE,sBAAsB,CAACsB,IAAvB,oBAA+BN,WAA/B,oBAAgDJ,UAAhD,CAA6DnF,SAA7D,IACAwE,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEF,WAAd,CAA2B9K,KAAK,CAAEuF,SAAlC,CAA6CxF,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAA3D,CAA0HN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA9L,CAApB,EACH,CACJ,CAjBD,IAiBO,IAAIG,YAAY,EAAI6K,YAAhB,EAAgC7K,YAAY,CAACuC,UAAb,GAA4B,CAAhE,CAAmE,CACtEsH,iBAAiB,CAACwB,IAAlB,oBAA0BN,WAA1B,oBAA2CJ,UAA3C,CAAwDE,YAAxD,IACAf,gBAAgB,CAACuB,IAAjB,oBAAyBP,WAAzB,oBAA0CH,UAA1C,CAAuDE,YAAvD,IACAd,sBAAsB,CAACsB,IAAvB,oBAA+BN,WAA/B,oBAAgDJ,UAAhD,CAA6DE,YAA7D,IACAb,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEF,WAAd,CAA2B9K,KAAK,CAAE4K,YAAlC,CAAgD7K,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAA9D,CAA6HN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAAjM,CAApB,EACH,CALM,IAKA,IAAIG,YAAY,EAAIA,YAAY,CAACuC,UAAb,GAA4B,CAA5C,EACJvC,YAAY,EAAIA,YAAY,CAACuC,UAAb,GAA4B,CAD5C,CAC+C,CAClDsH,iBAAiB,CAACwB,IAAlB,oBAA0BN,WAA1B,oBAA2CJ,UAA3C,CAAwD,EAAxD,IACAb,gBAAgB,CAACuB,IAAjB,oBAAyBP,WAAzB,oBAA0CH,UAA1C,CAAuD,EAAvD,IACAZ,sBAAsB,CAACsB,IAAvB,oBAA+BN,WAA/B,oBAAgDJ,UAAhD,CAA6D,EAA7D,IACAX,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEF,WAAd,CAA2B9K,KAAK,CAAE,EAAlC,CAAsCD,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAApD,CAAmHN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAAvL,CAApB,EACH,CANM,IAMA,IAAIG,YAAY,EAAI6K,YAAhB,EAAgCG,gBAAhC,EAAoDhL,YAAY,CAACuC,UAAb,GAA4B,CAApF,CAAuF,CAC1F,GAAIvC,YAAY,CAAC4K,MAAb,GAAwB,EAA5B,CAAgC,CAC5B,GAAMU,CAAAA,SAAS,CAAG,oBAAIP,WAAJ,oBAAqB/K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CAArB,CAAmD,CAACP,YAApD,sBACfE,WADe,oBACE/K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CADF,CACgCJ,gBADhC,GAAlB,CAEA,GAAMO,CAAAA,UAAU,CAAG,oBAAIT,WAAJ,oBAAqB9K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CAArB,CAAmD,CAACP,YAApD,sBAChBC,WADgB,oBACC9K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CADD,CAC+BJ,gBAD/B,GAAnB,CAEAnB,iBAAiB,CAACwB,IAAlB,CAAuBC,SAAvB,EACAxB,gBAAgB,CAACuB,IAAjB,CAAsBE,UAAtB,EACAxB,sBAAsB,CAACsB,IAAvB,CAA4BC,SAA5B,EAEH,CATD,IASO,CACH,GAAMA,CAAAA,UAAS,CAAG,oBAETtL,YAAY,CAAC4K,MAFJ,CAEa,oBAAIG,WAAJ,oBAAqB/K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CAArB,CAAmD,CAACP,YAApD,sBACpBE,WADoB,oBACH/K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CADG,CAC2BJ,gBAD3B,GAFb,EAAlB,CAMA,GAAMO,CAAAA,WAAU,CAAG,oBAEVvL,YAAY,CAAC4K,MAFH,CAEY,oBAAIE,WAAJ,oBAAqB9K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CAArB,CAAmD,CAACP,YAApD,sBACpBC,WADoB,oBACH9K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CADG,CAC2BJ,gBAD3B,GAFZ,EAAnB,CAMAnB,iBAAiB,CAACwB,IAAlB,CAAuBC,UAAvB,EACAxB,gBAAgB,CAACuB,IAAjB,CAAsBE,WAAtB,EACAxB,sBAAsB,CAACsB,IAAvB,CAA4BC,UAA5B,EACH,CACJ,CA3BM,IA2BA,IAAItL,YAAY,EAAIA,YAAY,CAACuC,UAAb,GAA4B,CAA5C,EAAiD0I,UAAjD,EAA+DvL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,CAAnE,CAA+H,CAElI,GAAM5G,CAAAA,KAAI,CAAG3E,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,GAA8DvL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,EAA2DX,GAA3D,CAA+D,SAAApK,IAAI,CAAI,CAAE,MAAO,IAAMA,IAAI,CAACD,KAAX,CAAmB,GAA1B,CAA+B,CAAxG,CAA9D,EAA2K,EAAxL,CACA,GAAMuL,CAAAA,KAAK,CAAG9L,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,GAA8DvL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,EAA2DX,GAA3D,CAA+D,SAAApK,IAAI,CAAI,CAAE,MAAOA,CAAAA,IAAI,CAACmD,KAAZ,CAAmB,CAA5F,CAA9D,EAA+J,EAA7K,CACA,GAAIgB,KAAI,CAACjE,MAAL,CAAc,CAAlB,CAAqB,CACjB,GAAIN,cAAJ,CAAoB,CAChB+J,iBAAiB,CAACwB,IAAlB,oBAA0B3L,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmES,eAA7F,oBAAkHqK,UAAlH,CAA+HtG,KAA/H,IACA0F,sBAAsB,CAACsB,IAAvB,oBAA+B3L,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmES,eAAlG,oBAAuHqK,UAAvH,CAAoItG,KAApI,IACA2F,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEvL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmES,eAAjF,CAAkGL,KAAK,CAAEP,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,EAA2DX,GAA3D,CAA+D,SAAApK,IAAI,CAAI,CAAE,MAAOA,CAAAA,IAAP,CAAa,CAAtF,CAAzG,CAAkMF,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAAhN,CAA+QN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAAnV,CAApB,EACH,CAJD,IAIO,CACHgK,iBAAiB,CAACwB,IAAlB,oBAA0BN,WAA1B,oBAA2CJ,UAA3C,CAAwDtG,KAAxD,IACA0F,sBAAsB,CAACsB,IAAvB,oBAA+BN,WAA/B,oBAAgDJ,UAAhD,CAA6DtG,KAA7D,IACA2F,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEvL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmES,eAAjF,CAAkGL,KAAK,CAAEP,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,EAA2DX,GAA3D,CAA+D,SAAApK,IAAI,CAAI,CAAE,MAAOA,CAAAA,IAAP,CAAa,CAAtF,CAAzG,CAAkMF,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAAhN,CAA+QN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAAnV,CAApB,EACH,CACJ,CACD,GAAI2L,KAAK,CAACpL,MAAN,CAAe,CAAnB,CAAsB,CAClB0J,gBAAgB,CAACuB,IAAjB,oBAAyBP,WAAzB,oBAA0CH,UAA1C,CAAuDa,KAAvD,IACH,CACD;AACH,CAnBM,IAmBA,IAAIxL,YAAY,EAAIiL,UAAhB,EAA8BjL,YAAY,CAACsC,cAA3C,EAA6D5C,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,CAAjE,CAA6H,CAChI,GAAInL,cAAJ,CAAoB,CAChB+J,iBAAiB,CAACwB,IAAlB,oBAA0B3L,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmES,eAA7F,oBAAkHqK,UAAlH,CAA+HjL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,EAA2DhL,KAA1L,IACA6J,gBAAgB,CAACuB,IAAjB,oBAAyBP,WAAzB,oBAA0CH,UAA1C,CAAuDjL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,EAA2D5H,KAAlH,IACA0G,sBAAsB,CAACsB,IAAvB,oBAA+B3L,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmES,eAAlG,oBAAuHqK,UAAvH,CAAoIjL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,EAA2D5H,KAA/L,IACA2G,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEvL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA7D,CAAmES,eAAjF,CAAkGL,KAAK,CAAEP,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,CAAzG,CAAqKjL,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAAnL,CAAkPN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAAtT,CAApB,EACH,CALD,IAKO,CACHgK,iBAAiB,CAACwB,IAAlB,oBAA0BN,WAA1B,oBAA2CJ,UAA3C,CAAwDjL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,EAA2DhL,KAAnH,IACA6J,gBAAgB,CAACuB,IAAjB,oBAAyBP,WAAzB,oBAA0CH,UAA1C,CAAuDjL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,EAA2D5H,KAAlH,IACA0G,sBAAsB,CAACsB,IAAvB,oBAA+BN,WAA/B,oBAAgDJ,UAAhD,CAA6DjL,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,EAA2D5H,KAAxH,IACA2G,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEF,WAAd,CAA2B9K,KAAK,CAAEP,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C8K,UAA/C,CAAlC,CAA8FjL,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAA5G,CAA2KN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA/O,CAApB,EACH,CACJ,CAZM,IAYA,IAAIG,YAAY,EAAIkL,SAAhB,EAA6BlL,YAAY,CAACuC,UAAb,GAA4B,CAA7D,CAAgE,CACnEsH,iBAAiB,CAACwB,IAAlB,oBAA0BN,WAA1B,oBAA2CJ,UAA3C,CAAwDO,SAAxD,IACApB,gBAAgB,CAACuB,IAAjB,oBAAyBP,WAAzB,oBAA0CH,UAA1C,CAAuDO,SAAvD,IACAnB,sBAAsB,CAACsB,IAAvB,oBAA+BN,WAA/B,oBAAgDJ,UAAhD,CAA6DO,SAA7D,IACAlB,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEF,WAAd,CAA2B9K,KAAK,CAAEiL,SAAlC,CAA6ClL,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAA3D,CAA0HN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA9L,CAApB,EACH,CALM,IAKA,IAAIG,YAAY,EAAIkL,SAAhB,EAA6BC,YAA7B,EAA6CnL,YAAY,CAACuC,UAAb,GAA4B,CAA7E,CAAgF,CACnF,GAAIvC,YAAY,CAAC4K,MAAb,GAAwB,EAA5B,CAAgC,CAC5B,GAAMU,CAAAA,WAAS,CAAG,oBAAIP,WAAJ,oBAAqB/K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CAArB,CAAmDF,SAAnD,sBACfH,WADe,oBACE/K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CADF,CACgCD,YADhC,GAAlB,CAEA,GAAMI,CAAAA,WAAU,CAAG,oBAAIT,WAAJ,oBAAqB9K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CAArB,CAAmDF,SAAnD,sBAChBJ,WADgB,oBACC9K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CADD,CAC+BD,YAD/B,GAAnB,CAEAtB,iBAAiB,CAACwB,IAAlB,CAAuBC,WAAvB,EACAxB,gBAAgB,CAACuB,IAAjB,CAAsBE,WAAtB,EACAxB,sBAAsB,CAACsB,IAAvB,CAA4BC,WAA5B,EACAtB,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEF,WAAd,CAA2B9K,KAAK,CAAEiL,SAAlC,CAA6ClL,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAA3D,CAA0HN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA9L,CAApB,EACAmK,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEF,WAAd,CAA2B9K,KAAK,CAAEkL,YAAlC,CAAgDnL,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAA9D,CAA6HN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAAjM,CAApB,EACH,CAVD,IAUO,CACH,GAAMyL,CAAAA,WAAS,CAAG,oBAETtL,YAAY,CAAC4K,MAFJ,CAEa,oBAAIG,WAAJ,oBAAqB/K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CAArB,CAAmDF,SAAnD,sBACpBH,WADoB,oBACH/K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CADG,CAC2BD,YAD3B,GAFb,EAAlB,CAMA,GAAMI,CAAAA,WAAU,CAAG,oBAEVvL,YAAY,CAAC4K,MAFH,CAEY,oBAAIE,WAAJ,oBAAqB9K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CAArB,CAAmDF,SAAnD,sBACpBJ,WADoB,oBACH9K,YAAY,CAACoL,WAAb,CAAyB,CAAzB,CADG,CAC2BD,YAD3B,GAFZ,EAAnB,CAMAtB,iBAAiB,CAACwB,IAAlB,CAAuBC,WAAvB,EACAxB,gBAAgB,CAACuB,IAAjB,CAAsBE,WAAtB,EACAxB,sBAAsB,CAACsB,IAAvB,CAA4BC,WAA5B,EACAtB,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEF,WAAd,CAA2B9K,KAAK,CAAEiL,SAAlC,CAA6ClL,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAA3D,CAA0HN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAA9L,CAApB,EACAmK,cAAc,CAACqB,IAAf,CAAoB,CAAEJ,UAAU,CAAEF,WAAd,CAA2B9K,KAAK,CAAEkL,YAAlC,CAAgDnL,YAAY,CAAEN,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,aAA/C,CAA9D,CAA6HN,KAAK,CAAEH,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,EAAwC5F,KAAxC,EAA+C,YAA/C,EAA6DN,KAAjM,CAApB,EACH,CACJ,CAGJ,CAtJD,IAsJO,CACH,MAAK4L,eAAL,CAAqB/L,cAArB,CAAqCmK,iBAArC,CAAwDC,gBAAxD,EACH,CACJ,CA3JD,EA6JA,GAAIpK,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,kBAA0D,IAA9D,CAAoE,CAEhE,GAAIrG,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,kBAA0D,IAA9D,CAAoE,CAChEqE,qBAAqB,CAACiB,IAAtB,CAA2B,CAAC,CAAEK,IAAI,CAAE,CAAC,CAAEC,IAAI,oBAAM7B,gBAAN,CAAN,CAAD,CAAR,CAAD,CAA3B,EACAI,sBAAsB,CAACmB,IAAvB,CAA4B,CAAC,CAAEK,IAAI,CAAE,CAAC,CAAEC,IAAI,oBAAM9B,iBAAN,CAAN,CAAD,CAAR,CAAD,CAA5B,EACAM,2BAA2B,CAACkB,IAA5B,CAAiC,CAAC,CAAEK,IAAI,CAAE,CAAC,CAAEC,IAAI,oBAAM5B,sBAAN,CAAN,CAAD,CAAR,CAAD,CAAjC,EACH,CAJD,IAIO,CACHK,qBAAqB,CAACiB,IAAtB,CAA2B,CAAC,CAAEM,IAAI,oBAAM7B,gBAAN,CAAN,CAAD,CAA3B,EACAI,sBAAsB,CAACmB,IAAvB,CAA4B,CAAC,CAAEM,IAAI,oBAAM9B,iBAAN,CAAN,CAAD,CAA5B,EACAM,2BAA2B,CAACkB,IAA5B,CAAiC,CAAC,CAAEM,IAAI,oBAAM5B,sBAAN,CAAN,CAAD,CAAjC,EACH,CAEJ,CAZD,IAYO,IAAIrK,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,iBAAyD,IAA7D,CAAmE,CAEtE,GAAIrG,cAAc,CAAC,WAAD,CAAd,CAA4BqG,UAA5B,kBAA0D,IAA9D,CAAoE,CAChEqE,qBAAqB,CAACiB,IAAtB,CAA2B,CAAC,CAAEK,IAAI,CAAE,CAAC,CAAEE,GAAG,oBAAM9B,gBAAN,CAAL,CAAD,CAAR,CAAD,CAA3B,EACAI,sBAAsB,CAACmB,IAAvB,CAA4B,CAAC,CAAEK,IAAI,CAAE,CAAC,CAAEE,GAAG,oBAAM/B,iBAAN,CAAL,CAAD,CAAR,CAAD,CAA5B,EACAM,2BAA2B,CAACkB,IAA5B,CAAiC,CAAC,CAAEK,IAAI,CAAE,CAAC,CAAEE,GAAG,oBAAM7B,sBAAN,CAAL,CAAD,CAAR,CAAD,CAAjC,EACH,CAJD,IAKK,CACDK,qBAAqB,CAACiB,IAAtB,CAA2B,CAAC,CAAEO,GAAG,oBAAM9B,gBAAN,CAAL,CAAD,CAA3B,EACAI,sBAAsB,CAACmB,IAAvB,CAA4B,CAAC,CAAEO,GAAG,oBAAM/B,iBAAN,CAAL,CAAD,CAA5B,EACAM,2BAA2B,CAACkB,IAA5B,CAAiC,CAAC,CAAEO,GAAG,oBAAM7B,sBAAN,CAAL,CAAD,CAAjC,EACH,CAEJ,CAbM,IAaA,CACHK,qBAAqB,CAACiB,IAAtB,CAA2B,kBAAMvB,gBAAN,EAA3B,EACAI,sBAAsB,CAACmB,IAAvB,CAA4B,kBAAMxB,iBAAN,EAA5B,EACAM,2BAA2B,CAACkB,IAA5B,CAAiC,kBAAMtB,sBAAN,EAAjC,EACH,CAGD,GAAI8B,CAAAA,qBAAqB,CAAGpL,SAA5B,CACA,GAAIqL,CAAAA,sBAAsB,CAAGrL,SAA7B,CACA,GAAIsL,CAAAA,2BAA2B,CAAGtL,SAAlC,CACA,GAAIuH,YAAY,CAAC5H,MAAb,CAAsB,CAAtB,GAA4B,CAAhC,CAAmC,CAG/ByL,qBAAqB,WAAOzB,qBAAP,CAArB,CACA0B,sBAAsB,WAAO5B,sBAAP,CAAtB,CACA6B,2BAA2B,WAAO5B,2BAAP,CAA3B,CAGH,CARD,IAQO,IAAInC,YAAY,CAAC5H,MAAb,CAAsB,CAAtB,GAA4B2F,UAAhC,CAA4C,CAC/C,GAAIrG,cAAc,CAAC,WAAD,CAAd,CAA4B,CAA5B,kBAAiD,IAArD,CAA2D,CAGvDmM,qBAAqB,CAAG,CAAC,CAAEF,IAAI,WAAMvB,qBAAN,CAAN,CAAD,CAAxB,CACA0B,sBAAsB,CAAG,CAAC,CAAEH,IAAI,WAAMzB,sBAAN,CAAN,CAAD,CAAzB,CACA6B,2BAA2B,CAAG,CAAC,CAAEJ,IAAI,WAAMxB,2BAAN,CAAN,CAAD,CAA9B,CAGH,CARD,IAQO,IAAIzK,cAAc,CAAC,WAAD,CAAd,CAA4B,CAA5B,iBAAgD,IAApD,CAA0D,CAG7DmM,qBAAqB,CAAG,CAAC,CAAED,GAAG,WAAMxB,qBAAN,CAAL,CAAD,CAAxB,CACA0B,sBAAsB,CAAG,CAAC,CAAEF,GAAG,WAAM1B,sBAAN,CAAL,CAAD,CAAzB,CACA6B,2BAA2B,CAAG,CAAC,CAAEH,GAAG,WAAMzB,2BAAN,CAAL,CAAD,CAA9B,CAGH,CARM,IAQA,CAGH0B,qBAAqB,CAAG,kBAAMzB,qBAAN,EAAxB,CACA0B,sBAAsB,CAAG,kBAAM5B,sBAAN,EAAzB,CACA6B,2BAA2B,CAAG,kBAAM5B,2BAAN,EAA9B,CAGH,CAEJ,CAED,GAAI,MAAK1L,KAAL,CAAWK,KAAX,CAAiByH,QAArB,CAA+B,CAC3B,GAAMyF,CAAAA,gBAAgB,CAAG5N,OAAO,CAAC+J,KAAR,CAAc,CACnC7I,IAAI,CAAE,QAD6B,CAEnC8I,KAAK,CAAE1I,cAAc,CAAC,cAAD,CAAd,CAA+BO,KAFH,CAGnCwI,SAAS,CAAEoB,iBAHwB,CAAd,CAAzB,CAKA,GAAMoC,CAAAA,eAAe,CAAG7N,OAAO,CAAC+J,KAAR,CAAc,CAClC7I,IAAI,CAAE,QAD4B,CAElC8I,KAAK,CAAE1I,cAAc,CAAC,cAAD,CAAd,CAA+B2D,KAFJ,CAGlCoF,SAAS,CAAEqB,gBAHuB,CAAd,CAAxB,CAKApK,cAAc,CAAC,iBAAD,CAAd,CAAoCsM,gBAAgB,CAACxM,KAArD,CACAE,cAAc,CAAC,eAAD,CAAd,CAAkCuM,eAAe,CAACzM,KAAlD,CACH,CAbD,IAaO,CAGH;AACA,GAAM0M,CAAAA,QAAQ,CAAGxM,cAAc,CAAC,eAAD,CAA/B,CAEA,GAAIyM,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAIC,CAAAA,WAAW,CAAG,EAAlB,CACA,GAAIC,CAAAA,sBAAsB,CAAG,EAA7B,CACA,GAAIC,CAAAA,aAAa,CAAG,EAApB,CAEA,GAAIC,CAAAA,6BAA6B,CAAG,EAApC,CACA,GAAIC,CAAAA,oBAAoB,CAAG,EAA3B,CAEA,GAAIC,CAAAA,cAAc,CAAG,EAArB,CACA,GAAIC,CAAAA,aAAa,CAAG,EAApB,CAEA,GAAIC,CAAAA,qBAAqB,CAAG,EAA5B,CACA,GAAIC,CAAAA,oBAAoB,CAAG,EAA3B,CAEAlN,cAAc,CAAC,SAAD,CAAd,EAA6BA,cAAc,CAAC,SAAD,CAAd,CAA0BC,OAA1B,CAAkC,SAAA0E,IAAI,CAAI,CACnE,GAAIA,IAAI,CAAC,WAAD,CAAJ,EAAqBA,IAAI,CAAC,WAAD,CAAJ,CAAkBpE,KAAlB,GAA4B,CAArD,CAAwD,CACpDyM,aAAa,CAACrI,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UAA1B,CAAb,CAAqD,CAAC,CAAtD,CACAkM,oBAAoB,CAACvI,IAAI,CAAC,YAAD,CAAJ,CAAmBhB,KAApB,CAApB,CAAiD,CAAC,CAAlD,CACH,CAHD,IAGO,CACHqJ,aAAa,CAACrI,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UAA1B,CAAb,CAAqD,CAArD,CACAkM,oBAAoB,CAACvI,IAAI,CAAC,YAAD,CAAJ,CAAmBhB,KAApB,CAApB,CAAiD,CAAjD,CACH,CACJ,CAR4B,CAA7B,CASA,GAAI3D,cAAc,CAAC,WAAD,CAAd,EAA+BA,cAAc,CAAC,WAAD,CAAd,CAA4BU,MAA5B,CAAqC,CAAxE,CAA2E,CACvEV,cAAc,CAAC,WAAD,CAAd,CAA4BC,OAA5B,CAAoC,SAAA0E,IAAI,CAAI,CACxC,GAAIA,IAAI,CAAC,iBAAD,CAAJ,EAA2BA,IAAI,CAAC,iBAAD,CAAJ,CAAwBhB,KAAxB,GAAkC,EAAjE,CAAqE,CACjEgJ,sBAAsB,CAAChB,IAAvB,CAA4B,CACxBwB,IAAI,CAAE,CACFlD,IAAI,CAAEtF,IAAI,CAAC,iBAAD,CAAJ,CAAwBhB,KAD5B,CAEFyJ,IAAI,CAAE,CAAC,CAAEC,KAAK,CAAE1I,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UAAlC,CAAD,CAFJ,CADkB,CAKrB2H,KAAK,CAAEhE,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UALX,CAA5B,EAOA6L,6BAA6B,CAAClB,IAA9B,CAAmC,CAC/BwB,IAAI,CAAE,CACFlD,IAAI,CAAEtF,IAAI,CAAC,iBAAD,CAAJ,CAAwBhB,KAD5B,CAEFyJ,IAAI,CAAE,CAAC,CAAEC,KAAK,CAAE1I,IAAI,CAAC,YAAD,CAAJ,CAAmBhB,KAA5B,CAAD,CAFJ,CADyB,CAAnC,EAQH,CAhBD,IAgBO,CACHgJ,sBAAsB,CAAChB,IAAvB,CAA4BhH,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UAArD,EACA4L,aAAa,CAACjB,IAAd,CAAmBhH,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UAA5C,EACA6L,6BAA6B,CAAClB,IAA9B,CAAmChH,IAAI,CAAC,YAAD,CAAJ,CAAmBhB,KAAtD,EACAmJ,oBAAoB,CAACnB,IAArB,CAA0BhH,IAAI,CAAC,YAAD,CAAJ,CAAmBhB,KAA7C,EACH,CACJ,CAvBD,EAwBH,CACD;AACA;AACA;AACA6I,QAAQ,CAACvM,OAAT,CAAiB,SAAAO,IAAI,CAAI,CACrB,GAAIA,IAAI,CAACL,KAAL,CAAWmN,YAAX,GAA4B,IAAhC,CAAsC,CAClC;AACA,GAAIC,CAAAA,UAAU,CAAG/M,IAAI,CAACD,KAAL,CAAa,gBAAb,CAAgCC,IAAI,CAACD,KAAtD,CAA4D;AAC5D;AACAmM,WAAW,CAACf,IAAZ,CAAiB4B,UAAjB,EAEH,CAND,IAMO,CACH;AACAb,WAAW,CAACf,IAAZ,CAAiBnL,IAAI,CAACD,KAAtB,EACH,CACDkM,SAAS,CAACd,IAAV,CAAenL,IAAI,CAACmD,KAApB,EACH,CAZD,EAaA,GAAM6J,CAAAA,qBAAqB,CAAG3O,YAAY,CAAC4J,KAAb,CAAmB,CAC7C7I,IAAI,CAAE,QADuC,CAE7C8I,KAAK,CAAE1I,cAAc,CAAC,WAAD,CAAd,CAA4BO,KAFU,CAG7CkN,MAAM,CAAEzN,cAAc,CAAC,WAAD,CAAd,EAA+BA,cAAc,CAAC,WAAD,CAAd,CAA4BU,MAA5B,CAAqC,CAApE,CAAwEiM,sBAAxE,CAAiGD,WAH5D,CAI7CtD,KAAK,CAAEwD,aAJsC,CAK7Cc,IAAI,CAAE1N,cAAc,CAAC,SAAD,CAAd,EAA6BA,cAAc,CAAC,SAAD,CAAd,CAA0BU,MAA1B,CAAmC,CAAhE,CAAoEsM,aAApE,CAAoF,EAL7C,CAM7CjE,SAAS,CAAEsD,2BANkC,CAAnB,CAA9B,CAQA,GAAMC,CAAAA,iBAAgB,CAAG5N,OAAO,CAAC+J,KAAR,CAAc,CACnC7I,IAAI,CAAE,QAD6B,CAEnC8I,KAAK,CAAE1I,cAAc,CAAC,WAAD,CAAd,CAA4BO,KAFA,CAGnCkN,MAAM,CAAEzN,cAAc,CAAC,WAAD,CAAd,EAA+BA,cAAc,CAAC,WAAD,CAAd,CAA4BU,MAA5B,CAAqC,CAApE,CAAwEiM,sBAAxE,CAAiGD,WAHtE,CAInCtD,KAAK,CAAEwD,aAJ4B,CAKnCc,IAAI,CAAE1N,cAAc,CAAC,SAAD,CAAd,EAA6BA,cAAc,CAAC,SAAD,CAAd,CAA0BU,MAA1B,CAAmC,CAAhE,CAAoEsM,aAApE,CAAoF,EALvD,CAMnCjE,SAAS,CAAEqD,sBANwB,CAAd,CAAzB,CAQA,GAAMG,CAAAA,gBAAe,CAAG7N,OAAO,CAAC+J,KAAR,CAAc,CAClC7I,IAAI,CAAE,QAD4B,CAElC6N,MAAM,CAAEzN,cAAc,CAAC,WAAD,CAAd,EAA+BA,cAAc,CAAC,WAAD,CAAd,CAA4BU,MAA5B,CAAqC,CAApE,CAAwEmM,6BAAxE,CAAwGJ,SAF9E,CAGlCrD,KAAK,CAAE0D,oBAH2B,CAIlCpE,KAAK,CAAE1I,cAAc,CAAC,WAAD,CAAd,CAA4B2D,KAJD,CAKlC+J,IAAI,CAAE1N,cAAc,CAAC,SAAD,CAAd,EAA6BA,cAAc,CAAC,SAAD,CAAd,CAA0BU,MAA1B,CAAmC,CAAhE,CAAoEwM,oBAApE,CAA2F,EAL/D,CAMlCnE,SAAS,CAAEoD,qBAAsB;AANC,CAAd,CAAxB,CAQA;AACA;AAEA;AACA;AACA,GAAIwB,CAAAA,YAAY,CAAGH,qBAAqB,CAAC1N,KAAzC,CACA,GAAI8N,CAAAA,OAAO,CAAGtB,iBAAgB,CAACxM,KAA/B,CACAE,cAAc,CAAC,iBAAD,CAAd,CAAoC2N,YAAY,CAAChN,OAAb,CAAqB,MAArB,CAA6B,OAA7B,CAApC,CAEAX,cAAc,CAAC,iBAAD,CAAd,CAAoCA,cAAc,CAAC,eAAD,CAAd,EAAmCA,cAAc,CAAC,eAAD,CAAd,CAAgCU,MAAhC,CAAyC,CAA5E,CAChCkN,OAAO,CAACjN,OAAR,CAAgB,MAAhB,CAAwB,OAAxB,CADgC,CACG,EADvC,CAEAX,cAAc,CAAC,eAAD,CAAd,CAAkCA,cAAc,CAAC,eAAD,CAAd,EAAmCA,cAAc,CAAC,eAAD,CAAd,CAAgCU,MAAhC,CAAyC,CAA5E,CAC9B6L,gBAAe,CAACzM,KAAhB,CAAsBa,OAAtB,CAA8B,MAA9B,CAAsC,OAAtC,CAD8B,CACmB,EADrD,CAGAX,cAAc,CAAC,eAAD,CAAd,CAAkCsK,cAAlC,CAGA,GAAMuD,CAAAA,UAAU,CAAG,EAAnB,CACA,GAAIvD,cAAc,CAAC5J,MAAf,CAAwB,CAA5B,CAA+B,CAC3B4J,cAAc,CAACrK,OAAf,CAAuB,SAACO,IAAD,CAAO6C,CAAP,CAAa,CAChC,GAAI7C,IAAI,CAACF,YAAL,CAAkBH,KAAlB,CAAwB0C,UAAxB,GAAuC,CAA3C,CAA8C,CAC1CgL,UAAU,CAAClC,IAAX,CAAgB,MAAQtI,CAAC,CAAG,CAAZ,CAAhB,EACH,CACJ,CAJD,EAKH,CAED,GAAIwK,UAAU,CAACnN,MAAX,CAAoB,CAAxB,CAA2B,CACvBmN,UAAU,CAAC5N,OAAX,CAAmB,SAAA0E,IAAI,CAAI,CACvB3E,cAAc,CAAC,iBAAD,CAAd,CAAoCA,cAAc,CAAC,iBAAD,CAAd,CAAkCW,OAAlC,CAA0CgE,IAA1C,CAAgDA,IAAI,CAAG,8BAAvD,CAApC,CACH,CAFD,EAGH,CACD;AAEA;AAEA;AAEA;AAEA;AAIA;AACA;AACH,CACD,MAAKzF,QAAL,CAAc,CAAEc,cAAc,CAAdA,cAAF,CAAd,EACH,CAxYD,EAyYH,CAhZD,IAgZO,CACH,MAAK+L,eAAL,CAAqB/L,cAArB,CAAqCmK,iBAArC,CAAwDC,gBAAxD,EACH,CACD,MAAKlL,QAAL,CAAc,CAAEc,cAAc,CAAdA,cAAF,CAAd,EAAkC;AACrC,CA3wDkB,OA61DnB8N,gBA71DmB,CA61DA,SAAC1I,SAAD,CAAY3E,KAAZ,CAAsB,CACrC,GAAMT,CAAAA,cAAN,CAAyB,MAAKD,KAA9B,CAAMC,cAAN,CACA,GAAIoF,SAAS,eAAb,CAAgC,CAC5BpF,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,EAAmC2E,SAAnC,EAAgDpF,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,EAAmC2E,SAAnC,IAAkD,IAAlD,CAAyD,KAAzD,CAAiE,IAAjH,CACApF,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,eAAkD,KAAlD,CACH,CAHD,IAGO,IAAI2E,SAAS,cAAb,CAA+B,CAClCpF,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,EAAmC2E,SAAnC,EAAgDpF,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,EAAmC2E,SAAnC,IAAkD,IAAlD,CAAyD,KAAzD,CAAiE,IAAjH,CACApF,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,gBAAmD,KAAnD,CACA;AACA;AACA;AACH,CANM,IAMA,IAAI2E,SAAS,eAAb,CAAgC,CACnCpF,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,EAAmC2E,SAAnC,EAAgDpF,cAAc,CAAC,WAAD,CAAd,CAA4BS,KAA5B,EAAmC2E,SAAnC,IAAkD,IAAlD,CAAyD,KAAzD,CAAiE,IAAjH,CACH,CAFM,IAGF,CAEJ,CACD,MAAKC,mBAAL,CAAyBrF,cAAzB,EACH,CA/2DkB,OAi3DnB+N,kBAj3DmB,CAi3DE,SAACxN,KAAD,CAAW,CAE5B,GAAQP,CAAAA,cAAR,CAA2B,MAAKD,KAAhC,CAAQC,cAAR,CACAA,cAAc,CAAC,mBAAD,CAAd,CAAsCO,KAAtC,CACA,GAAIsG,CAAAA,QAAQ,CAAG,KAAf,CACA,GAAItG,KAAK,CAACA,KAAN,GAAgB,KAApB,CAA2B,CACvBsG,QAAQ,CAAG,IAAX,CACH,CACD,GAAMpC,CAAAA,UAAU,CAAG,CACfC,QAAQ,CAAEvH,cADK,CAEfwH,IAAI,CAAE,CAAEkC,QAAQ,CAAEA,QAAZ,CAFS,CAAnB,CAIA,MAAK9H,KAAL,CAAWhD,WAAX,CAAuB0I,UAAvB,EACA,MAAKvF,QAAL,CAAc,CAAEc,cAAc,CAAdA,cAAF,CAAd,EACH,CA/3DkB,CAGf,GAAMV,CAAAA,SAAS,CAAG,CACd0O,IAAI,CAAE,CADQ,CAEdC,IAAI,CAAElP,KAAK,CAACmP,QAAN,CAAiBC,QAAQ,CAACpP,KAAK,CAACmP,QAAN,CAAe,EAAf,CAAD,CAAzB,CAAgD,CAFxC,CAAlB,CAIA,GAAMxO,CAAAA,aAAa,CAAG,CAClBsO,IAAI,CAAE,CADY,CAElBC,IAAI,CAAElP,KAAK,CAACmP,QAAN,CAAiBC,QAAQ,CAACpP,KAAK,CAACmP,QAAN,CAAe,EAAf,CAAD,CAAzB,CAAgD,CAFpC,CAAtB,CAIA,GAAME,CAAAA,kBAAkB,CAAG,CACvBJ,IAAI,CAAE,CADiB,CAEvBC,IAAI,CAAE,EAFiB,CAA3B,CAKA,MAAKlO,KAAL,eACIC,cAAc,CAAE,EADpB,CAEIqO,KAAK,CAAE,EAFX,CAGI;AACAC,UAAU,CAAE,EAJhB,CAKI;AACA;AACAC,SAAS,CAAE,EAPf,CAQI;AACAC,qBAAqB,CAAE,EAT3B,CAUIC,UAAU,CAAE,GAAIC,CAAAA,GAAJ,EAVhB,CAWIN,kBAAkB,CAAEA,kBAXxB,CAYIO,aAAa,CAAE,EAZnB,CAaI7J,aAAa,CAAE,EAbnB,CAcI8J,iBAAiB,CAAE,EAdvB,CAeIC,cAAc,CAAE,EAfpB,CAgBIC,cAAc,CAAE,CAAC,CAhBrB,CAiBIC,SAAS,CAAE,CAAC,CAjBhB,CAkBIC,SAAS,CAAE,EAlBf,CAmBI1R,SAAS,CAAE,EAnBf,CAoBI2R,SAAS,CAAE,EApBf,CAqBIjB,IAAI,CAAE,CArBV,CAsBIC,IAAI,CAAE,MAAKlP,KAAL,CAAWK,KAAX,CAAiB8O,QAAjB,CACF,MAAKnP,KAAL,CAAWK,KAAX,CAAiB8O,QAAjB,CAA0B,CAA1B,CADE,CAC6B,EAvBvC,CAuB2C;AACvCgB,aAAa,CAAE,EAxBnB,CAyBIC,iBAAiB,CAAE,EAzBvB,CA0BIC,eAAe,CAAE,EA1BrB,CA2BIC,sBAAsB,CAAE,EA3B5B,CA4BIC,aAAa,CAAE,EA5BnB,CA6BIC,WAAW,CAAE,EA7BjB,CA8BIC,gBAAgB,CAAE,EA9BtB,CA+BI3P,KAAK,CAAE,CA/BX,CAgCI4P,iBAAiB,CAAE,EAhCvB,CAiCIC,wBAAwB,CAAE,EAjC9B,CAkCIC,gBAAgB,CAAE,EAlCtB,CAmCI9I,QAAQ,CAAE,KAnCd,CAoCI;AACA+I,YAAY,CAAE,EArClB,CAsCItQ,SAAS,CAAEA,SAtCf,CAuCII,aAAa,CAAEA,aAvCnB,CAwCIiF,IAAI,CAAE,EAxCV,CAyCIkL,YAAY,CAAE,EAzClB,CA0CI1Q,UAAU,CAAE,EA1ChB,CA2CIK,cAAc,CAAE,EA3CpB,0CA4Ce,CAAC,CAAEsQ,cAAc,CAAE,MAAK/Q,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,WAAN,CAA9B,CAAlB,CAAsEgB,cAAc,CAAE,CAAtF,CAAD,CAA4F,CAAE6K,cAAc,CAAE,MAAK/Q,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,SAAN,CAA9B,CAAlB,CAAoEgB,cAAc,CAAE,CAApF,CAA5F,CA5Cf,iDA6CsB,CAAC,CAAEtB,KAAK,CAAE,MAAK5E,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,WAAN,CAA9B,CAAT,CAA6D8L,KAAK,CAAE,CAApE,CAAD,CAA0E,CAAEpM,KAAK,CAAE,MAAK5E,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,SAAN,CAA9B,CAAT,CAA2D1D,KAAK,CAAE,CAAlE,CAA1E,CA7CtB,eA+CA,MAAKsB,SAAL,CAAiBvH,KAAK,CAAC0V,SAAN,EAAjB,CACA,MAAK3L,cAAL,CAAsB,GAAIvG,CAAAA,cAAJ,EAAtB,CACA;AAEA,MAAKmS,cAAL,CAAsB,CAAC,gBAAD,CAAmB,eAAnB,CAAoC,WAApC,CAClB,oBADkB,CACI,eADJ,CACqB,cADrB,CACqC,gBADrC,CACuD,gBADvD,CAAtB,CAEA;AAEA,MAAKC,eAAL,CAAuB,CAAC,eAAD,CAAkB,WAAlB,CAA+B,eAA/B,CAAgD,cAAhD,CAAgE,gBAAhE,CACnB,gBADmB,CACD,YADC,CAAvB,CAvEe,aA4ElB,C,2DAkBD,4BAAmBC,aAAnB,CAAkC,CAE9B,GAAMC,CAAAA,UAAN,CAAqB,KAAKrQ,KAA1B,CAAMqQ,UAAN,CACA,GAAI,KAAKrR,KAAL,CAAWK,KAAX,CAAiBC,SAAjB,GAA+B8Q,aAAa,CAAC/Q,KAAd,CAAoBC,SAAvD,CAAkE,CAC9D,KAAKH,QAAL,CAAc,CACVyF,IAAI,CAAE,KAAK5F,KAAL,CAAWK,KAAX,CAAiBC,SADb,CAEVF,UAAU,CAAE/D,OAAO,CAAC,KAAK2D,KAAL,CAAWK,KAAX,CAAiBC,SAAlB,CAA6B,KAAKU,KAAL,CAAWT,SAAxC,CAFT,CAAd,EAIH,CACD,GAAI,KAAKP,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B7B,aAA5B,GAA8C0Q,aAAa,CAAC/Q,KAAd,CAAoBkC,UAApB,CAA+B7B,aAAjF,CAAgG,CAC5F,GAAI,KAAKV,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B7B,aAA5B,GAA8CsB,SAAlD,CAA6D,CACzD,KAAK7B,QAAL,CAAc,CACV2Q,YAAY,CAAE,KAAK9Q,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B7B,aADhC,CAEVD,cAAc,CAAEpE,OAAO,CAAC,KAAK2D,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B7B,aAA5B,GAA8C,IAA9C,CAAqD,EAArD,CAA0D,KAAKV,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B7B,aAAvF,CAAsG,KAAKM,KAAL,CAAWL,aAAjH,CAFb,CAAd,EAIH,CACJ,CACD,GAAI,KAAKX,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B4D,aAA5B,GAA8CiL,aAAa,CAAC/Q,KAAd,CAAoBkC,UAApB,CAA+B4D,aAAjF,CAAgG,CAC5FkL,UAAU,CAAG,KAAKC,qBAAL,EAAb,CACA,KAAKnR,QAAL,CAAc,CAAEkR,UAAU,CAAVA,UAAF,CAAd,EACH,CACD,GAAI,KAAKrR,KAAL,CAAWK,KAAX,CAAiB6B,QAAjB,CAA0BqP,SAA1B,GAAwCH,aAAa,CAAC/Q,KAAd,CAAoB6B,QAApB,CAA6BqP,SAAzE,CAAoF,CAChF,GAAM9B,CAAAA,qBAAqB,CAAG,EAA9B,CACA,GAAI,KAAKzP,KAAL,CAAWK,KAAX,CAAiBoP,qBAArB,CAA4C,CACxC,KAAKzP,KAAL,CAAWK,KAAX,CAAiBoP,qBAAjB,CAAuC,KAAKzP,KAAL,CAAWK,KAAX,CAAiB6B,QAAjB,CAA0BqP,SAAjE,GAA+EC,MAAM,CAACC,MAAP,CAAc,KAAKzR,KAAL,CAAWK,KAAX,CAAiBoP,qBAAjB,CAAuC,KAAKzP,KAAL,CAAWK,KAAX,CAAiB6B,QAAjB,CAA0BqP,SAAjE,CAAd,EAA2F1F,GAA3F,CAA+F,SAAApK,IAAI,QAC9KgO,CAAAA,qBAAqB,CAAC7C,IAAtB,CAA2BnL,IAAI,CAACiQ,YAAhC,CAD8K,EAAnG,CAA/E,CAEH,CACD,GAAMhC,CAAAA,UAAU,CAAGhR,aAAa,CAAC,KAAKsB,KAAL,CAAWK,KAAX,CAAiBoP,qBAAlB,CAAyC,KAAKzP,KAAL,CAAWK,KAAX,CAAiB6B,QAAjB,CAA0BqP,SAAnE,CAAhC,CACA,KAAKpR,QAAL,CAAc,CAAEuP,UAAU,CAAVA,UAAF,CAAcD,qBAAqB,CAArBA,qBAAd,CAAd,EACH,CAEJ,C,qCACD,gCAAwB,iBACpB,GAAMkC,CAAAA,cAAc,CAAG,EAAvB,CACA,GAAI,KAAK3R,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,EAA+B,KAAKvC,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B4D,aAA/D,CAA8E,CAE1E,GAAM1E,CAAAA,IAAI,CAAG,KAAKT,KAAL,CAAWiP,SAAX,CAAqB2B,MAArB,CAA4B,SAAAnQ,IAAI,QAAIA,CAAAA,IAAI,CAACyE,cAAL,GAAwB,MAAI,CAAClG,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B4D,aAAxD,EAAhC,CAAb,CACAwL,cAAc,CAAC/E,IAAf,CACI,CACI,QAAS,eADb,CAEI,QAAS,KAAK5M,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B4D,aAA5B,CACL1E,IAAI,CAAC,CAAD,CAAJ,CAAQsP,cADH,CACoB,EAHjC,CADJ,EAOH,CACD,MAAOY,CAAAA,cAAP,CACH,C,sBACD,iBAAS,iBACL,GAAME,CAAAA,KAAK,CAAG,KAAK7Q,KAAL,CAAW0O,UAAX,CAAsBoC,GAAtB,CAA0B,kBAA1B,GAAiD,KAAK9Q,KAAL,CAAW0O,UAAX,CAAsBqC,GAAtB,CAA0B,kBAA1B,EAA8CL,YAA7G,CACA,GAAMM,CAAAA,MAAM,CAAG,KAAKhR,KAAL,CAAW0O,UAAX,CAAsBoC,GAAtB,CAA0B,mBAA1B,GAAkD,KAAK9Q,KAAL,CAAW0O,UAAX,CAAsBqC,GAAtB,CAA0B,mBAA1B,EAA+CL,YAAhH,CACA,GAAMO,CAAAA,QAAQ,CAAG,KAAKjR,KAAL,CAAW0O,UAAX,CAAsBoC,GAAtB,CAA0B,qBAA1B,GAAoD,KAAK9Q,KAAL,CAAW0O,UAAX,CAAsBqC,GAAtB,CAA0B,qBAA1B,EAAiDL,YAAtH,CACA,GAAMC,CAAAA,cAAc,CAAG,KAAK3Q,KAAL,CAAWqQ,UAAX,EAAyB,EAAhD,CACA,GAAIa,CAAAA,kBAAkB,CAAG,EAAzB,CAEA;AACA;AACA;AACA;AACA;AACA,GAAI,KAAKlS,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,EAA+B,KAAKvC,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BoC,YAA3D,EAA2E,KAAK3E,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BoC,YAA5B,CAAyChD,MAAzC,CAAkD,CAAjI,CAAoI,CAChI,KAAK3B,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BoC,YAA5B,CAAyCzD,OAAzC,CAAiD,SAAAO,IAAI,CAAI,CACrDyQ,kBAAkB,CAACtF,IAAnB,CAAwB,CAAEuF,OAAO,CAAE1Q,IAAI,CAACL,KAAL,CAAWgR,WAAX,CAAuB,MAAI,CAACpS,KAAL,CAAWK,KAAX,CAAiB6B,QAAjB,CAA0BC,iBAAjD,CAAX,CAAgFkQ,SAAS,CAAE5Q,IAAI,CAACL,KAAL,CAAWa,UAAtG,CAAkHqQ,KAAK,CAAE,OAAzH,CAAxB,EACH,CAFD,EAGH,CACD,GAAIC,CAAAA,iBAAiB,CAAG,EAAxB,CACA,GAAI,KAAKvS,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,EAA+B,KAAKvC,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B4D,aAA/D,CAA8E,CAE1EoM,iBAAiB,CAAG,KAAKvR,KAAL,CAAWiP,SAAX,CAAqB2B,MAArB,CAA4B,SAAAnQ,IAAI,QAAIA,CAAAA,IAAI,CAACyE,cAAL,GAAwB,MAAI,CAAClG,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B4D,aAAxD,EAAhC,CAApB,CACH,CAED,mBACI,qDACI,oBAAC,WAAD,EAAa,SAAS,CAAC,4DAAvB,EACKwL,cAAc,CAAChQ,MAAf,CAAwB,CAAxB,cACG,oBAAC,KAAD,EAAO,GAAG,CAAE,EAAZ,eACI,oBAAC,mBAAD,EAAqB,cAAc,CAAEgQ,cAArC,EADJ,CADH,CAGc,EAJnB,cAQI,oBAAC,GAAD,EAAK,SAAS,CAAE,IAAhB,eACI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACI,oBAAC,UAAD,EACI,UAAU,CAAE,KAAK3R,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,EAA+B,EAD/C,CAEI,UAAU,CAAE,KAAKvC,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,kBAAN,CAA9B,CAFhB,CAGI,UAAU,CAAE,KAAKlF,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BiQ,YAA5B,EAA4C,KAAKxS,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BkQ,gBAHxF,CAII,eAAe,CAAE,yBAACC,UAAD,QAAgB,CAAA,MAAI,CAAC1S,KAAL,CAAW/B,uBAAX,CAAmCyU,UAAnC,CAA+C,MAAI,CAAC1S,KAAL,CAAWK,KAAX,CAAiB6B,QAAhE,CAA0E,MAAI,CAAClC,KAAL,CAAWK,KAAX,CAAiBkC,UAA3F,CAAhB,EAJrB,CAKI,cAAc,CAAE,KAAKvC,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BC,oBALhD,CAMI,eAAe,CAAC,mBANpB,CAOI,SAAS,CAAC,mBACV;AACA;AACA;AACA;AAXJ,CAYI,qBAAqB,CAAE,KAAKxB,KAAL,CAAWyO,qBAZtC,CAaI,KAAK,CAAEoC,KAbX,CAcI,SAAS,CAAE,KAAK/O,SAdpB,CAeI,UAAU,CAAE,KAAKD,UAfrB,CAgBI,SAAS,CAAE,KAAKnF,iBAChB;AACA;AACA;AACA;AACA;AArBJ,CAsBI,mBAAmB,CAAE,KACrB;AACA;AAxBJ,CAyBI,gBAAgB,CAAE,KAAKiV,gBAzB3B,CA0BI,cAAc,CAAE,IA1BpB,CA2BI,UAAU,CAAE,KAAK3S,KAAL,CAAWK,KAAX,CAAiBoF,UA3BjC,CA4BI,UAAU,CAAE,KAAKD,UA5BrB,CA6BI,WAAW,CAAE,KAAKK,WA7BtB,CA8BI,cAAc,CAAE,KAAKC,cA9BzB,CA+BI,cAAc,CAAE,KA/BpB,CAgCI,WAAW,CAAE,KAAKpI,iBAhCtB,CAiCI,eAAe,CAAE,CACb,CACI,mCACI,oBAAC,eAAD,EACI,SAAS,CAAE,KAAKsD,KAAL,CAAW4R,gBAAX,EAA+B,EAD9C,CAEI,cAAc,CAAE,KAAK5R,KAAL,CAAW+E,aAAX,EAA4B,EAFhD,CAGI,aAAa,CAAE,KAAKwB,aAHxB,CAII,eAAe,CAAEgL,iBAAiB,CAAC,CAAD,CAJtC,EAFR,CADa,CAjCrB,EADJ,CADJ,cAgDI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACI,oBAAC,WAAD,EAAa,SAAS,CAAC,oBAAvB,EACK,KAAKvS,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BkQ,gBAA5B,EAAgD,KAAKzS,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BkQ,gBAA5B,CAA6C9Q,MAA7C,CAAsD,CAAtG,EAA2G,KAAK3B,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BC,oBAAvI,cACG,oBAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,eACI,oBAAC,IAAD,CAAM,MAAN,mBACI,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,oBAAtB,EAA4C,KAAKxC,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BC,oBAA5B,CAAiDqQ,iBAA7F,CADJ,cAEI,oBAAC,YAAD,EAAc,SAAS,CAAC,yBAAxB,eACI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,EADJ,cAKI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACI,2BAAK,SAAS,CAAC,yBAAf,CAAyC,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAT,CAAhD,eAEI,oBAAC,WAAD,EAAa,SAAS,CAAC,+BAAvB,eACI,oBAAC,GAAD,CAAK,IAAL,EAAU,SAAS,CAAC,mCAApB,CAAwD,IAAI,CAAC,GACzD;AACA;AAFJ,CAGI,WAAU,KAAK9S,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,sBAAN,CAA9B,CAHd,CAII,OAAO,CAAE,iBAAC6N,CAAD,QAAO,CAAA,MAAI,CAAC/S,KAAL,CAAWhC,qBAAX,CAAiC,MAAI,CAACgC,KAAL,CAAWK,KAA5C,CAAP,EAJb,eAOI,oBAAC,0BAAD,EAA4B,SAAS,CAAC,cAAtC,CAAqD,KAAK,CAAC,IAA3D,CAAgE,MAAM,CAAC,IAAvE,CAA4E,IAAI,CAAC,kBAAjF,EAPJ,CADJ,cAUI,oBAAC,GAAD,CAAK,IAAL,EAAU,IAAI,CAAC,IAAf,CAAoB,SAAS,CAAC,kCAC1B;AADJ,CAEI,WAAU,KAAKL,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,YAAN,CAA9B,CAFd,CAGI,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACG,aAAL,CAAmB4M,QAAnB,CAAN,EAHb,eAKI,oBAAC,eAAD,EAAiB,IAAI,CAAE9V,UAAvB,EALJ,CAVJ,cAiBI,oBAAC,GAAD,CAAK,IAAL,EAAU,SAAS,CAAC,mCAApB,CAAwD,IAAI,CAAC,GACzD;AACA;AAFJ,CAGI,WAAU,KAAK6D,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,aAAN,CAA9B,CAHd,CAII,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACtE,YAAL,CAAkB,CAAlB,CAAN,EAJb,eAOI,oBAAC,eAAD,EAAiB,IAAI,CAAExE,MAAvB,EAPJ,CAjBJ,CAFJ,CADJ,CALJ,CAFJ,CADJ,CA0CK,KAAK4D,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4B7B,aAA5B,EAA6CwR,kBAA7C,EAAmEA,kBAAkB,CAACvQ,MAAnB,CAA4B,CAA/F,cACG,oBAAC,iBAAD,EACI,IAAI,CAAE,KAAKX,KAAL,CAAW8P,YADrB,CAEI,UAAU,CAAE,KAAK9P,KAAL,CAAWP,cAAX,EAA6B,EAF7C,CAGI,SAAS,CAAE,KAAKO,KAAL,CAAWL,aAH1B,CAII,eAAe,CAAE,KAAKH,mBAJ1B,CAKI,mBAAmB,CAAE0R,kBALzB,CAMI,UAAU,CAAE,KAAKlR,KAAL,CAAW0O,UAN3B,CAOI,qBAAqB,CAAE,KAAK1O,KAAL,CAAWyO,qBAPtC,CAQI,QAAQ,CAAE,KAAKzP,KAAL,CAAWK,KAAX,CAAiB6B,QAR/B,CASI,QAAQ,CAAE,IATd,CAUI,UAAU,CAAE,YAVhB,CAWI,gBAAgB,CAAE,KAXtB,CAYI,iBAAiB,CAAE,IAZvB,CAaI,iBAAiB,CAAE,KAbvB,CAcI,UAAU,CAAE,CAAC,CAdjB,EADH,cAiBK,wCA3DV,CADH,CA+DK,EAhEV,CADJ,CAhDJ,CARJ,CADJ,CAkIQ,KAAKlC,KAAL,CAAWK,KAAX,CAAiBmK,eAAjB,eACA,oBAAC,mBAAD,EACI,IAAI,CAAE,KAAKxK,KAAL,CAAWK,KAAX,CAAiBmK,eAD3B,CAEI,UAAU,CAAE,KAAKD,gBAFrB,CAGI,UAAU,CAAE,KAAKvK,KAAL,CAAWK,KAAX,CAAiB2S,UAHjC,CAII,eAAe,CAAE,KAAK7O,IAJ1B,CAKI,YAAY,cACR,oBAAC,UAAD,EACI,cAAc,CAAE,KAAKnD,KAAL,CAAWC,cAAX,EAA6B,EADjD,CAEI,iBAAiB,CAAE,KAAKjB,KAAL,CAAWK,KAAX,CAAiB4S,iBAFxC,CAGI,eAAe,CAAE,KAAKjS,KAAL,CAAWqP,eAHhC,CAII,gBAAgB,CAAE,KAAKrP,KAAL,CAAWyP,gBAAX,EAA+B,EAJrD,CAKI,sBAAsB,CAAE,KAAKzQ,KAAL,CAAWK,KAAX,CAAiBiQ,sBAAjB,EAA2C,EACnE;AANJ,CAOI,KAAK,CAAE,KAAKtP,KAAL,CAAWF,KAPtB,CAQI,iBAAiB,CAAE,KAAKE,KAAL,CAAW0P,iBARlC,CASI,QAAQ,CAAE,KAAK1P,KAAL,CAAW8G,QATzB,CAUI,oBAAoB,CAAE,KAAK9H,KAAL,CAAWK,KAAX,CAAiBgI,oBAAjB,EAAyC,EAVnE,CAWI,QAAQ,CAAE,KAAKrI,KAAL,CAAWK,KAAX,CAAiB6B,QAX/B,CAYI,aAAa,CAAE,KAAKyI,aAZxB,CAaI,aAAa,CAAE,KAAKM,aAbxB,CAcI,UAAU,CAAE,KAAKL,UAdrB,CAeI,SAAS,CAAE,KAAKC,SAfpB,CAgBI,SAAS,CAAE,KAAKC,SAhBpB,CAiBI,cAAc,CAAE,KAAKC,cACrB;AACA;AAnBJ,CAoBI,kBAAkB,CAAE,KAAKiE,kBApB7B,CAsBI,YAAY,CAAE,KAAKpH,YAtBvB,CAuBI,iBAAiB,CAAE,KAAKJ,iBAvB5B,CAwBI,OAAO,CAAE,KAAK8B,OAxBlB,CAyBI,gBAAgB,CAAE,KAAKyF,gBAzB3B,CA0BI,kBAAkB,CAAE,KAAKpG,kBA1B7B,CA2BI,sBAAsB,CAAE,KAAKxB,sBA3BjC,CA4BI,gBAAgB,CAAE,KAAKnH,KAAL,CAAWK,KAAX,CAAiB6S,gBA5BvC,CA6BI,WAAW,CAAE,KAAKlT,KAAL,CAAWK,KAAX,CAAiBiK,WAAjB,EAAgC,EA7BjD,CA8BI,oBAAoB,CAAE,KAAKtK,KAAL,CAAWK,KAAX,CAAiBqE,oBAAjB,EAAyC,EA9BnE,CA+BI,UAAU,CAAE,KAAK1E,KAAL,CAAWK,KAAX,CAAiB8S,UA/BjC,CAgCI,YAAY,CAAE,KAAKnS,KAAL,CAAW6P,YAhC7B,CAiCI,IAAI,CAAE,KAAK7P,KAAL,CAAW4E,IAjCrB,CAkCI,UAAU,CAAE,KAAK5E,KAAL,CAAWZ,UAAX,EAAyB,EAlCzC,CAmCI,SAAS,CAAE,KAAKY,KAAL,CAAWT,SAnC1B,CAoCI,eAAe,CAAE,KAAKN,eApC1B,CAqCI,qBAAqB,CAAE,KAAKe,KAAL,CAAWyO,qBArCtC,CAsCI,cAAc,CAAE,KAAKzP,KAAL,CAAWK,KAAX,CAAiB+S,cAAjB,EAAmC,EAtCvD,CAuCI,SAAS,CAAE,KAAKpS,KAAL,CAAWiP,SAvC1B,CAwCI,YAAY,CAAE,KAAK5G,YAxCvB,CAyCI,gBAAgB,CAAE,KAAKrJ,KAAL,CAAWK,KAAX,CAAiB+I,gBAAjB,EAAqC,EAzC3D,CA0CI,iBAAiB,CAAE,KAAKzB,iBA1C5B,CA2CI,eAAe,CAAE,KAAKwB,eA3C1B,CA4CI,UAAU,CAAE,KAAKH,UA5CrB,CA6CI,cAAc,CAAE,KAAKhJ,KAAL,CAAWK,KAAX,CAAiByI,cAAjB,EAAmC,EA7CvD,CA8CI,eAAe,CAAE,KAAKF,eA9C1B,CA+CI,aAAa,CAAE,KAAKC,aA/CxB,CAgDI,QAAQ,CAAE,KAAKW,QAhDnB,CAiDI,YAAY,CAAE,KAAKxJ,KAAL,CAAWK,KAAX,CAAiBkJ,YAAjB,EAAiC,EAjDnD,CAkDI,YAAY,CAAE,KAAK3I,YAlDvB,CAmDI,mBAAmB,CAAE,KAAKwF,mBAnD9B,CAoDI,YAAY,CAAE,KAAKpG,KAAL,CAAWK,KAAX,CAAiBsE,YAAjB,EAAiC,EApDnD,EANR,EAnIR,CAmMK,KAAK3E,KAAL,CAAWK,KAAX,CAAiBqK,SAAjB,eACG,oBAAC,aAAD,EAAe,IAAI,CAAE,KAAK1K,KAAL,CAAWK,KAAX,CAAiBqK,SAAtC,CACI,UAAU,CAAE,KAAKD,UADrB,CAEI,SAAS,CAAE,QAFf,CAGI,UAAU,CAAE,KAAKzK,KAAL,CAAWK,KAAX,CAAiB2C,UAHjC,CAII,UAAU,CAAE,KAAKhD,KAAL,CAAWgF,IAAX,CAAgBC,aAAhB,CAA8B,CAAEC,EAAE,CAAE,sBAAN,CAA9B,CAJhB,CAKI,cAAc,CAAE,KAAK9B,SALzB,CAMI,WAAW,CAAE,IANjB,CAOI,SAAS,CAAE,IAPf,CAQI,QAAQ,CAAE,IARd,CASI,cAAc,CAAE,KAAKpC,KAAL,CAAWC,cAAX,EAA6B,EATjD,CAUI,YAAY,cACR,oBAAC,oBAAD,EACI,kBAAkB,CAAE,KAAKuF,kBAD7B,CAEI,oBAAoB,CAAE,KAAKxG,KAAL,CAAWK,KAAX,CAAiBkC,UAAjB,CAA4BC,oBAA5B,EAAoD,EAF9E,CAGI,cAAc,CAAE,KAAKxC,KAAL,CAAWK,KAAX,CAAiBgT,cAAjB,EAAmC,EAHvD,CAII,SAAS,CAAE,KAAKrT,KAAL,CAAWK,KAAX,CAAiBkD,SAAjB,EAA8B,EAJ7C,CAKI,kBAAkB,CAAE,KAAKgD,kBAL7B,EAXR,EApMR,CADJ,CA4NH,C,iCA85BD,2BAAkBtF,cAAlB,CAAkCS,KAAlC,CAAyC,CACrCT,cAAc,CAAC,cAAgBS,KAAjB,CAAd,EAAyC,MAAOT,CAAAA,cAAc,CAAC,cAAgBS,KAAjB,CAA9D,CACAT,cAAc,CAAC,eAAiBS,KAAlB,CAAd,EAA0C,MAAOT,CAAAA,cAAc,CAAC,eAAiBS,KAAlB,CAA/D,CACAT,cAAc,CAAC,iBAAmBS,KAApB,CAAd,EAA4C,MAAOT,CAAAA,cAAc,CAAC,iBAAmBS,KAApB,CAAjE,CACAT,cAAc,CAAC,cAAgBS,KAAjB,CAAd,EAAyC,MAAOT,CAAAA,cAAc,CAAC,cAAgBS,KAAjB,CAA9D,CACAT,cAAc,CAAC,oBAAsBS,KAAvB,CAAd,EAA+C,MAAOT,CAAAA,cAAc,CAAC,oBAAsBS,KAAvB,CAApE,CACAT,cAAc,CAAC,aAAeS,KAAhB,CAAd,EAAwC,MAAOT,CAAAA,cAAc,CAAC,aAAeS,KAAhB,CAA7D,CACAT,cAAc,CAAC,gBAAkBS,KAAnB,CAAd,EAA2C,MAAOT,CAAAA,cAAc,CAAC,gBAAkBS,KAAnB,CAAhE,CACH,C,+BAueD,yBAAgBT,cAAhB,CAAgCmK,iBAAhC,CAAmDC,gBAAnD,CAAqE,CACjE,GAAIuC,CAAAA,sBAAsB,CAAG,EAA7B,CACA,GAAIC,CAAAA,aAAa,CAAG,EAApB,CAEA,GAAIC,CAAAA,6BAA6B,CAAG,EAApC,CACA,GAAIC,CAAAA,oBAAoB,CAAG,EAA3B,CAEA,GAAIC,CAAAA,cAAc,CAAG,EAArB,CACA,GAAIC,CAAAA,aAAa,CAAG,EAApB,CAEA,GAAIC,CAAAA,qBAAqB,CAAG,EAA5B,CACA,GAAIC,CAAAA,oBAAoB,CAAG,EAA3B,CAEA;AACAlN,cAAc,CAAC,SAAD,CAAd,EAA6BA,cAAc,CAAC,SAAD,CAAd,CAA0BC,OAA1B,CAAkC,SAAA0E,IAAI,CAAI,CACnE,GAAIA,IAAI,CAAC,WAAD,CAAJ,EAAqBA,IAAI,CAAC,WAAD,CAAJ,CAAkBpE,KAAlB,GAA4B,CAArD,CAAwD,CACpDyM,aAAa,CAACrI,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UAA1B,CAAb,CAAqD,CAAC,CAAtD,CACAkM,oBAAoB,CAACvI,IAAI,CAAC,YAAD,CAAJ,CAAmBhB,KAApB,CAApB,CAAiD,CAAC,CAAlD,CACH,CAHD,IAGO,CACHqJ,aAAa,CAACrI,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UAA1B,CAAb,CAAqD,CAArD,CACAkM,oBAAoB,CAACvI,IAAI,CAAC,YAAD,CAAJ,CAAmBhB,KAApB,CAApB,CAAiD,CAAjD,CACH,CACJ,CAR4B,CAA7B,CASA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA,GAAI3D,cAAc,CAAC,WAAD,CAAd,EAA+BA,cAAc,CAAC,WAAD,CAAd,CAA4BU,MAA5B,CAAqC,CAAxE,CAA2E,CACvEV,cAAc,CAAC,WAAD,CAAd,CAA4BC,OAA5B,CAAoC,SAAA0E,IAAI,CAAI,CACxC,GAAIA,IAAI,CAAC,iBAAD,CAAJ,EAA2BA,IAAI,CAAC,iBAAD,CAAJ,CAAwBhB,KAAxB,GAAkC,EAAjE,CAAqE,CACjEgJ,sBAAsB,CAAChB,IAAvB,CAA4B,CACxBwB,IAAI,CAAE,CACFlD,IAAI,CAAEtF,IAAI,CAAC,iBAAD,CAAJ,CAAwBhB,KAD5B,CAEFyJ,IAAI,CAAE,CAAC,CAAEC,KAAK,CAAE1I,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UAAlC,CAAD,CAFJ,CADkB,CAKrB2H,KAAK,CAAEhE,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UALX,CAA5B,EAOA6L,6BAA6B,CAAClB,IAA9B,CAAmC,CAC/BwB,IAAI,CAAE,CACFlD,IAAI,CAAEtF,IAAI,CAAC,iBAAD,CAAJ,CAAwBhB,KAD5B,CAEFyJ,IAAI,CAAE,CAAC,CAAEC,KAAK,CAAE1I,IAAI,CAAC,YAAD,CAAJ,CAAmBhB,KAA5B,CAAD,CAFJ,CADyB,CAAnC,EAQH,CAhBD,IAgBO,CACHgJ,sBAAsB,CAAChB,IAAvB,CAA4BhH,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UAArD,EACA4L,aAAa,CAACjB,IAAd,CAAmBhH,IAAI,CAAC,YAAD,CAAJ,CAAmBxE,KAAnB,CAAyBa,UAA5C,EACA6L,6BAA6B,CAAClB,IAA9B,CAAmChH,IAAI,CAAC,YAAD,CAAJ,CAAmBhB,KAAtD,EACAmJ,oBAAoB,CAACnB,IAArB,CAA0BhH,IAAI,CAAC,YAAD,CAAJ,CAAmBhB,KAA7C,EACH,CACJ,CAvBD,EAyBA,GAAM2I,CAAAA,gBAAgB,CAAG5N,OAAO,CAAC+J,KAAR,CAAc,CACnC7I,IAAI,CAAE,QAD6B,CAEnC8I,KAAK,CAAE1I,cAAc,CAAC,WAAD,CAAd,CAA4BO,KAFA,CAGnCkN,MAAM,CAAEd,sBAH2B,CAInCvD,KAAK,CAAEwD,aAJ4B,CAKnCc,IAAI,CAAE1N,cAAc,CAAC,SAAD,CAAd,EAA6BA,cAAc,CAAC,SAAD,CAAd,CAA0BU,MAA1B,CAAmC,CAAhE,CAAoEsM,aAApE,CAAoF,EALvD,CAMnCjE,SAAS,CAAEoB,iBANwB,CAAd,CAAzB,CAQA,GAAMoC,CAAAA,eAAe,CAAG7N,OAAO,CAAC+J,KAAR,CAAc,CAClC7I,IAAI,CAAE,QAD4B,CAElC6N,MAAM,CAAEZ,6BAF0B,CAGlCzD,KAAK,CAAE0D,oBAH2B,CAIlCY,IAAI,CAAE1N,cAAc,CAAC,SAAD,CAAd,EAA6BA,cAAc,CAAC,SAAD,CAAd,CAA0BU,MAA1B,CAAmC,CAAhE,CAAoEwM,oBAApE,CAA2F,EAJ/D,CAKlCxE,KAAK,CAAE1I,cAAc,CAAC,WAAD,CAAd,CAA4B2D,KALD,CAMlCoF,SAAS,CAAEqB,gBANuB,CAAd,CAAxB,CAQApK,cAAc,CAAC,iBAAD,CAAd,CAAoCsM,gBAAgB,CAACxM,KAArD,CACAE,cAAc,CAAC,eAAD,CAAd,CAAkCuM,eAAe,CAACzM,KAAlD,CACA,KAAKZ,QAAL,CAAc,CAAEc,cAAc,CAAdA,cAAF,CAAd,EACH,CACD;AACH,C,0BA91DsBzF,S,EAo4D3B,GAAM8X,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACtS,KAAD,CAAW,CAC/B,MAAO,CACHX,KAAK,CAAEW,KAAK,CAACX,KADV,CAAP,CAGH,CAJD,CAMA,cAAe5E,CAAAA,OAAO,CAAC6X,eAAD,CAAkB,CACpCzW,WAAW,CAAXA,WADoC,CACvBC,UAAU,CAAVA,UADuB,CACXE,WAAW,CAAXA,WADW,CACEG,gBAAgB,CAAhBA,gBADF,CAEpCJ,uBAAuB,CAAvBA,uBAFoC,CAEXE,iBAAiB,CAAjBA,iBAFW,CAEQC,uBAAuB,CAAvBA,uBAFR,CAEiCE,oBAAoB,CAApBA,oBAFjC,CAGpCC,gBAAgB,CAAhBA,gBAHoC,CAGlBC,iBAAiB,CAAjBA,iBAHkB,CAGCC,yBAAyB,CAAzBA,yBAHD,CAIpCC,aAAa,CAAbA,aAJoC,CAIrBC,iBAAiB,CAAjBA,iBAJqB,CAIFC,iBAAiB,CAAjBA,iBAJE,CAIiBC,YAAY,CAAZA,YAJjB,CAI+BC,eAAe,CAAfA,eAJ/B,CAKpCC,cAAc,CAAdA,cALoC,CAKpBC,aAAa,CAAbA,aALoB,CAKLC,kBAAkB,CAAlBA,kBALK,CAMpCC,qBAAqB,CAArBA,qBANoC,CAMbC,uBAAuB,CAAvBA,uBANa,CAMYC,kBAAkB,CAAlBA,kBANZ,CAMgCC,eAAe,CAAfA,eANhC,CAAlB,CAAP,CAOZzC,UAAU,CAACqE,YAAD,CAPE,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, FormattedMessage } from 'react-intl';\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTrashAlt, faCopy } from '@fortawesome/free-solid-svg-icons';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { toast } from 'react-toastify';\r\nimport ListMaster from '../../components/list-master/list-master.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport Esign from '../audittrail/Esign';\r\nimport AddQuery from './AddQuery';\r\nimport AddParameter from './AddParameter';\r\nimport QueryTypeFilter from './QueryTypeFilter';\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, getSQLQueryDetail,\r\n    getSQLQueryComboService, filterColumnData, comboChangeQueryType, executeUserQuery,\r\n    comboColumnValues, getColumnNamesByTableName, getTablesName, getModuleFormName,\r\n    getDatabaseTables, executeQuery, getForeignTable, getViewColumns, getMasterData, createQueryBuilder,\r\n    getParameterFromQuery, getSelectedQueryBuilder, updateQueryBuilder, getQueryBuilder\r\n} from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { transactionStatus, queryTypeFilter, tableType, ColumnType } from '../../components/Enumeration';\r\nimport { constructOptionList, getControlMap, showEsign } from '../../components/CommonScript';\r\nimport { ReadOnlyText, ContentPanel } from '../../components/App.styles';\r\nimport rsapi from '../../rsapi';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport { Affix } from 'rsuite';\r\nimport BreadcrumbComponent from '../../components/Breadcrumb.Component';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\n// import ReactTooltip from 'react-tooltip';\r\nimport PortalModalSlideout from '../../components/portal-modal/portal-modal-slideout';\r\nimport BuildQuery from './BuildQuery';\r\nimport { render } from '@testing-library/react';\r\nimport { format } from 'date-fns';\r\nimport { ProductList } from '../product/product.styled';\r\nimport QueryBuilderParamter from './QueryBuilderParamter';\r\nimport { ReactComponent as ParameterConfigurationIcon } from '../../assets/image/parameter-configuration.svg';\r\nimport { ReactComponent as ParameterMappingIcon } from '../../assets/image/parameter-mapping.svg';\r\nimport DataGridComponent from '../../components/data-grid/data-grid.component';\r\nimport { stringOperatorData } from './QueryBuilderData';\r\n// import {validationData} from './QueryBuilderData';\r\n\r\nconst jsonSql = require('json-sql')({ separatedValues: false });\r\nconst jsonSqlParam = require('json-sql')({ separatedValues: true });\r\n\r\nclass QueryBuilder extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const dataState = {\r\n            skip: 0,\r\n            take: props.settings ? parseInt(props.settings[14]) : 5,\r\n        };\r\n        const dataStateMain = {\r\n            skip: 0,\r\n            take: props.settings ? parseInt(props.settings[14]) : 5,\r\n        };\r\n        const dataStateUserQuery = {\r\n            skip: 0,\r\n            take: 10,\r\n        };\r\n\r\n        this.state = ({\r\n            selectedRecord: {},\r\n            error: \"\",\r\n            // modalIsOpen: false,\r\n            parameters: [],\r\n            // objparam: [],\r\n            // objDparam: [],\r\n            queryName: '',\r\n            // queryResult: [],\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            dataStateUserQuery: dataStateUserQuery,\r\n            queryTypeName: '',\r\n            selectedcombo: [],\r\n            selectedTableType: [],\r\n            moduleFormName: [],\r\n            ntableTypeCode: -1,\r\n            nFormCode: -1,\r\n            queryType: [],\r\n            tableType: [],\r\n            chartList: [],\r\n            skip: 0,\r\n            take: this.props.Login.settings ?\r\n                this.props.Login.settings[3] : 25, //tableName : undefined,tableList:[]\r\n            outputColumns: [],\r\n            selectedTableList: [],\r\n            tableColumnList: [],\r\n            foreignTableColumnList: [],\r\n            joinTableList: [],\r\n            symbolsList: [],\r\n            foreignTableList: [],\r\n            count: 0,\r\n            foreignTableCount: [],\r\n            selectedforeignTableList: [],\r\n            filterColumnList: [],\r\n            sqlQuery: false,\r\n            // viewColumnList: [],\r\n            switchRecord: {},\r\n            dataState: dataState,\r\n            dataStateMain: dataStateMain,\r\n            data: [],\r\n            dataMainList: [],\r\n            dataResult: [],\r\n            dataResultMain: [],\r\n            queryType: [{ squerytypename: this.props.intl.formatMessage({ id: \"IDS_VIEWS\" }), nquerytypecode: 1 }, { squerytypename: this.props.intl.formatMessage({ id: \"IDS_SQL\" }), nquerytypecode: 2 }],\r\n            queryTypeOptions: [{ label: this.props.intl.formatMessage({ id: \"IDS_VIEWS\" }), views: 1 }, { label: this.props.intl.formatMessage({ id: \"IDS_SQL\" }), value: 2 }]\r\n        });\r\n        this.searchRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n        // this.dropItemRef = React.createRef(); \r\n\r\n        this.queryFieldList = ['nquerytypecode', 'ssqlqueryname', 'ssqlquery',\r\n            'sscreenrecordquery', 'sscreenheader', 'svaluemember', 'sdisplaymember', 'ncharttypecode'];\r\n        // this.queryList = [];\r\n\r\n        this.searchFieldList = [\"ssqlqueryname\", \"ssqlquery\", \"sscreenheader\", \"svaluemember\", \"sdisplaymember\",\r\n            \"squerytypename\", \"schartname\"];\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.props.Login.queryData, event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n    dataStateChangeMain = (event) => {\r\n        this.setState({\r\n            dataResultMain: process(this.props.Login.queryDataMain, event.dataStateMain),\r\n            dataStateMain: event.dataStateMain\r\n        });\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n\r\n        let { filterData } = this.state;\r\n        if (this.props.Login.queryData !== previousProps.Login.queryData) {\r\n            this.setState({\r\n                data: this.props.Login.queryData,\r\n                dataResult: process(this.props.Login.queryData, this.state.dataState)\r\n            });\r\n        }\r\n        if (this.props.Login.masterData.queryDataMain !== previousProps.Login.masterData.queryDataMain) {\r\n            if (this.props.Login.masterData.queryDataMain !== undefined) {\r\n                this.setState({\r\n                    dataMainList: this.props.Login.masterData.queryDataMain,\r\n                    dataResultMain: process(this.props.Login.masterData.queryDataMain === null ? [] : this.props.Login.masterData.queryDataMain, this.state.dataStateMain)\r\n                });\r\n            }\r\n        }\r\n        if (this.props.Login.masterData.queryTypeCode !== previousProps.Login.masterData.queryTypeCode) {\r\n            filterData = this.generateBreadCrumData();\r\n            this.setState({ filterData });\r\n        }\r\n        if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n            const userRoleControlRights = [];\r\n            if (this.props.Login.userRoleControlRights) {\r\n                this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                    userRoleControlRights.push(item.ncontrolcode))\r\n            }\r\n            const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n            this.setState({ controlMap, userRoleControlRights });\r\n        }\r\n\r\n    }\r\n    generateBreadCrumData() {\r\n        const breadCrumbData = [];\r\n        if (this.props.Login.masterData && this.props.Login.masterData.queryTypeCode) {\r\n\r\n            const item = this.state.queryType.filter(item => item.nquerytypecode === this.props.Login.masterData.queryTypeCode);\r\n            breadCrumbData.push(\r\n                {\r\n                    \"label\": \"IDS_QUERYTYPE\",\r\n                    \"value\": this.props.Login.masterData.queryTypeCode ?\r\n                        item[0].squerytypename : \"\"\r\n                }\r\n            );\r\n        }\r\n        return breadCrumbData;\r\n    }\r\n    render() {\r\n        const addId = this.state.controlMap.has(\"Add QueryBuilder\") && this.state.controlMap.get(\"Add QueryBuilder\").ncontrolcode;\r\n        const editId = this.state.controlMap.has(\"Edit QueryBuilder\") && this.state.controlMap.get(\"Edit QueryBuilder\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"Delete QueryBuilder\") && this.state.controlMap.get(\"Delete QueryBuilder\").ncontrolcode;\r\n        const breadCrumbData = this.state.filterData || [];\r\n        let gridColumnListMain = [];\r\n\r\n        // if (this.props.Login.masterData && this.props.Login.masterData.columnList && this.props.Login.masterData.columnList.length > 0) {\r\n        //     this.props.Login.masterData.columnList.forEach(item => {\r\n        //         gridColumnListMain.push({ idsName: item.items.displayname[this.props.Login.userInfo.slanguagetypecode], dataField: item.items.columnname, width: '200px' })\r\n        //     })\r\n        // }\r\n        if (this.props.Login.masterData && this.props.Login.masterData.selectFields && this.props.Login.masterData.selectFields.length > 0) {\r\n            this.props.Login.masterData.selectFields.forEach(item => {\r\n                gridColumnListMain.push({ idsName: item.items.displayname[this.props.Login.userInfo.slanguagetypecode], dataField: item.items.columnname, width: '200px' })\r\n            })\r\n        }\r\n        let selectedQueryType = [];\r\n        if (this.props.Login.masterData && this.props.Login.masterData.queryTypeCode) {\r\n\r\n            selectedQueryType = this.state.queryType.filter(item => item.nquerytypecode === this.props.Login.masterData.queryTypeCode);\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <ListWrapper className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n                    {breadCrumbData.length > 0 ?\r\n                        <Affix top={53}>\r\n                            <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n                        </Affix> : \"\"\r\n                    }\r\n                    {/* <div className=\"client-listing-wrap mtop-4\"> */}\r\n                    {/* Start of get display*/}\r\n                    <Row noGutters={true}>\r\n                        <Col md=\"4\">\r\n                            <ListMaster\r\n                                masterData={this.props.Login.masterData || []}\r\n                                screenName={this.props.intl.formatMessage({ id: \"IDS_QUERYBUILDER\" })}\r\n                                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.queryBuilderList}\r\n                                getMasterDetail={(qryBuilder) => this.props.getSelectedQueryBuilder(qryBuilder, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                                selectedMaster={this.props.Login.masterData.selectedQueryBuilder}\r\n                                primaryKeyField=\"nquerybuildercode\"\r\n                                mainField=\"squerybuildername\"\r\n                                //firstField=\"squerybuildername\"\r\n                                // secondField={this.state.selectedcombo[\"nquerytypecode\"] && this.state.selectedcombo[\"nquerytypecode\"].value === queryTypeFilter.LIMSDASHBOARDQUERY ? \"schartname\" : \"\"}\r\n                                // filterColumnData={this.props.filterColumnData}\r\n                                // filterParam={filterParam}\r\n                                userRoleControlRights={this.state.userRoleControlRights}\r\n                                addId={addId}\r\n                                searchRef={this.searchRef}\r\n                                reloadData={this.reloadData}\r\n                                openModal={this.getDatabaseTables}\r\n                                // openModal={() => this.props.getSQLQueryComboService(\"\", \"create\", \"nsqlquerycode\", null,\r\n                                //     this.props.Login.masterData, this.props.Login.userInfo,\r\n                                //     this.props.Login.masterData.SelectedQueryType.nquerytypecode,                                   \r\n                                //     addId)} \r\n                                //{() => this.props.addTest(\"create\", selectedTest, userInfo, addId, this.state.nfilterTestCategory)} Already commented\r\n                                needAccordianFilter={false}\r\n                                // skip={this.state.skip}\r\n                                // take={this.state.take}\r\n                                handlePageChange={this.handlePageChange}\r\n                                showFilterIcon={true}\r\n                                showFilter={this.props.Login.showFilter}\r\n                                openFilter={this.openFilter}\r\n                                closeFilter={this.closeFilter}\r\n                                onFilterSubmit={this.onFilterSubmit}\r\n                                showBuildQuery={false}\r\n                                builderData={this.getDatabaseTables}\r\n                                filterComponent={[\r\n                                    {\r\n                                        \"IDS_QUERYTYPEFILTER\":\r\n                                            <QueryTypeFilter\r\n                                                queryType={this.state.queryTypeOptions || []}\r\n                                                selectedRecord={this.state.selectedcombo || {}}\r\n                                                onComboChange={this.onComboChange}\r\n                                                filterQueryType={selectedQueryType[0]}\r\n                                            />\r\n                                    }\r\n                                ]}\r\n                            />\r\n                        </Col>\r\n                        <Col md=\"8\">\r\n                            <ProductList className=\"panel-main-content\">\r\n                                {this.props.Login.masterData.queryBuilderList && this.props.Login.masterData.queryBuilderList.length > 0 && this.props.Login.masterData.selectedQueryBuilder ?\r\n                                    <Card className=\"border-0\">\r\n                                        <Card.Header>\r\n                                            <Card.Title className=\"product-title-main\">{this.props.Login.masterData.selectedQueryBuilder.squerybuildername}</Card.Title>\r\n                                            <ContentPanel className=\"d-flex product-category\">\r\n                                                <Col md='6' >\r\n                                                    {/* {this.props.Login.masterData.selectedQueryBuilder.squerybuildername} */}\r\n\r\n                                                </Col>\r\n                                                <Col md='6'>\r\n                                                    <div className=\"d-flex product-category\" style={{ float: \"right\" }}>\r\n                                                        {/* <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" /> */}\r\n                                                        <ProductList className=\"d-inline dropdown badget_menu\">\r\n                                                            <Nav.Link className=\"btn btn-circle outline-grey mr-2 \" href=\"#\"\r\n                                                                // hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                                //  data-for=\"tooltip_list_wrap\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_PARAMETERMAPPING\" })}\r\n                                                                onClick={(e) => this.props.getParameterFromQuery(this.props.Login)}\r\n                                                            >\r\n                                                                {/* <FontAwesomeIcon icon={faPencilAlt} className=\"ActionIconColor\"/> */}\r\n                                                                <ParameterConfigurationIcon className=\"custom_icons\" width=\"20\" height=\"20\" name=\"configreporticon\" />\r\n                                                            </Nav.Link>\r\n                                                            <Nav.Link name=\"QB\" className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                // hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                                                                onClick={() => this.confirmDelete(deleteId)}\r\n                                                            >\r\n                                                                <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                            </Nav.Link>\r\n                                                            <Nav.Link className=\"btn btn-circle outline-grey mr-2 \" href=\"#\"\r\n                                                                // hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                                //  data-for=\"tooltip_list_wrap\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_COPYSQL\" })}\r\n                                                                onClick={() => this.copySQLQuery(1)}\r\n                                                            >\r\n\r\n                                                                <FontAwesomeIcon icon={faCopy} />\r\n                                                            </Nav.Link>\r\n                                                        </ProductList>\r\n                                                    </div>\r\n                                                </Col>\r\n                                            </ContentPanel>\r\n                                        </Card.Header>\r\n                                        {this.props.Login.masterData.queryDataMain && gridColumnListMain && gridColumnListMain.length > 0 ?\r\n                                            <DataGridComponent\r\n                                                data={this.state.dataMainList}\r\n                                                dataResult={this.state.dataResultMain || []}\r\n                                                dataState={this.state.dataStateMain}\r\n                                                dataStateChange={this.dataStateChangeMain}\r\n                                                extractedColumnList={gridColumnListMain}\r\n                                                controlMap={this.state.controlMap}\r\n                                                userRoleControlRights={this.state.userRoleControlRights}\r\n                                                userInfo={this.props.Login.userInfo}\r\n                                                pageable={true}\r\n                                                scrollable={\"scrollable\"}\r\n                                                isActionRequired={false}\r\n                                                isToolBarRequired={true}\r\n                                                isRefreshRequired={false}\r\n                                                selectedId={-1}\r\n                                            />\r\n                                            : <></>\r\n                                        }\r\n                                    </Card>\r\n                                    : \"\"}\r\n\r\n                            </ProductList>\r\n                        </Col>\r\n                    </Row>\r\n                </ListWrapper>\r\n\r\n                {\r\n                    this.props.Login.openPortalModal &&\r\n                    <PortalModalSlideout\r\n                        show={this.props.Login.openPortalModal}\r\n                        closeModal={this.closePortalModal}\r\n                        screenName={this.props.Login.screenName}\r\n                        handleSaveClick={this.save}\r\n                        addComponent={\r\n                            <BuildQuery\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                databaseTableList={this.props.Login.databaseTableList}\r\n                                tableColumnList={this.state.tableColumnList}\r\n                                foreignTableList={this.state.foreignTableList || []}\r\n                                foreignTableColumnList={this.props.Login.foreignTableColumnList || []}\r\n                                // validationData={validationData}\r\n                                count={this.state.count}\r\n                                foreignTableCount={this.state.foreignTableCount}\r\n                                sqlQuery={this.state.sqlQuery}\r\n                                viewMasterListByRule={this.props.Login.viewMasterListByRule || []}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                onExecuteRule={this.onExecuteRule}\r\n                                onInputChange={this.onInputChange}\r\n                                deleteRule={this.deleteRule}\r\n                                clearRule={this.clearRule}\r\n                                resetRule={this.resetRule}\r\n                                onSymbolChange={this.onSymbolChange}\r\n                                // onForeignTableChange={this.onForeignTableChange}\r\n                                // addJoinTable={this.addJoinTable}\r\n                                onQueryTypeOnclick={this.onQueryTypeOnclick}\r\n\r\n                                onRuleChange={this.onRuleChange}\r\n                                onViewComboChange={this.onViewComboChange}\r\n                                addRule={this.addRule}\r\n                                onConditionClick={this.onConditionClick}\r\n                                onMasterDataChange={this.onMasterDataChange}\r\n                                handleFilterDateChange={this.handleFilterDateChange}\r\n                                databaseviewList={this.props.Login.databaseviewList}\r\n                                addRuleList={this.props.Login.addRuleList || []}\r\n                                viewColumnListByRule={this.props.Login.viewColumnListByRule || []}\r\n                                masterdata={this.props.Login.masterdata}\r\n                                switchRecord={this.state.switchRecord}\r\n                                data={this.state.data}\r\n                                dataResult={this.state.dataResult || []}\r\n                                dataState={this.state.dataState}\r\n                                dataStateChange={this.dataStateChange}\r\n                                userRoleControlRights={this.state.userRoleControlRights}\r\n                                gridColumnList={this.props.Login.gridColumnList || []}\r\n                                queryType={this.state.queryType}\r\n                                addAggregate={this.addAggregate}\r\n                                addAggregateList={this.props.Login.addAggregateList || []}\r\n                                onAggregateChange={this.onAggregateChange}\r\n                                deleteAggregate={this.deleteAggregate}\r\n                                addOrderby={this.addOrderby}\r\n                                addOrderbyList={this.props.Login.addOrderbyList || []}\r\n                                onOrderbyChange={this.onOrderbyChange}\r\n                                deleteOrderby={this.deleteOrderby}\r\n                                addGroup={this.addGroup}\r\n                                addGroupList={this.props.Login.addGroupList || []}\r\n                                copySQLQuery={this.copySQLQuery}\r\n                                onFilterComboChange={this.onFilterComboChange}\r\n                                selectFields={this.props.Login.selectFields || []}\r\n                            />\r\n                        }\r\n                    />\r\n                }\r\n\r\n                {this.props.Login.openModal &&\r\n                    <SlideOutModal show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={\"create\"}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.intl.formatMessage({ id: \"IDS_PARAMETERMAPPING\" })}\r\n                        onExecuteClick={this.saveParam}\r\n                        showExecute={true}\r\n                        showParam={true}\r\n                        hideSave={true}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        addComponent={\r\n                            <QueryBuilderParamter\r\n                                onParamInputChange={this.onParamInputChange}\r\n                                selectedQueryBuilder={this.props.Login.masterData.selectedQueryBuilder || []}\r\n                                viewMasterData={this.props.Login.viewMasterData || []}\r\n                                comboData={this.props.Login.comboData || []}\r\n                                onParamComboChange={this.onParamComboChange}\r\n                            />\r\n                        }\r\n                    />\r\n                }\r\n            </>\r\n        );\r\n    }\r\n    copySQLQuery = (type) => {\r\n        let count = 0;\r\n        if (type === 2) {\r\n\r\n            let query = this.state.selectedRecord[\"squerywithparam\"] || \"\";\r\n\r\n            if (this.state.selectedRecord[\"sdefaultvalue\"] && this.state.selectedRecord[\"sdefaultvalue\"]) {\r\n                this.state.selectedRecord[\"sdefaultvalue\"].forEach((dataItem) => {\r\n\r\n                    if (dataItem.items.needmasterdata && dataItem.items.mastertablename) {\r\n\r\n                        if (dataItem.symbolObject.items[\"ismulti\"] && dataItem.symbolObject.items[\"ismulti\"] === true) {\r\n\r\n                            dataItem.value.forEach((item, index) => {\r\n\r\n                                count++;\r\n                                if (index === 0) {\r\n                                    if (dataItem.value.length === 1) {\r\n                                        query = query.replace(\"$p\" + count, \"P$\" + dataItem.items.viewvaluemember + \"$P\");\r\n                                    } else {\r\n                                        query = query.replace(\"$p\" + count + \",\", \"P$\" + dataItem.items.viewvaluemember + \"$P\");\r\n                                    }\r\n                                } else {\r\n                                    if (query.includes(\"$p\" + count + \",\")) {\r\n                                        query = query.replace(\"$p\" + count + \",\", \"\");\r\n                                    } else {\r\n                                        query = query.replace(\"$p\" + count, \"\");\r\n                                    }\r\n                                }\r\n                            })\r\n                        } else {\r\n                            count++;\r\n                            query = query.replace(\"$p\" + count, \"P$\" + dataItem.items.viewvaluemember + \"$P\");\r\n                        }\r\n                    }\r\n                    else if (dataItem.items.sforeigncolumnname !== undefined &&\r\n                        dataItem.items.sforeigncolumnname !== \"\") {\r\n                        if (dataItem.symbolObject.items[\"ismulti\"] && dataItem.symbolObject.items[\"ismulti\"] === true) {\r\n\r\n                            dataItem.value.forEach((item, index) => {\r\n\r\n                                count++;\r\n                                if (index === 0) {\r\n                                    if (dataItem.value.length === 1) {\r\n                                        query = query.replace(\"$p\" + count, \"P$\" + dataItem.items.sforeigncolumnname + \"$P\");\r\n                                    } else {\r\n                                        query = query.replace(\"$p\" + count + \",\", \"P$\" + dataItem.items.sforeigncolumnname + \"$P\");\r\n                                    }\r\n\r\n                                } else {\r\n                                    if (query.includes(\"$p\" + count + \",\")) {\r\n                                        query = query.replace(\"$p\" + count + \",\", \"\");\r\n                                    } else {\r\n                                        query = query.replace(\"$p\" + count, \"\");\r\n                                    }\r\n\r\n                                }\r\n                            })\r\n                        } else {\r\n                            count++;\r\n                            query = query.replace(\"$p\" + count, \"P$\" + dataItem.items.sforeigncolumnname + \"$P\");\r\n                        }\r\n                    } else {\r\n                        count++;\r\n                        query = query.replace(\"$p\" + count, \"P$\" + dataItem.items.columnname + \"$P\");\r\n                    }\r\n                })\r\n            }\r\n            if (query.includes(\"$L\")) {\r\n                query = query.replace(\"$L\", \"'\" + this.props.Login.userInfo.slanguagetypecode + \"'\");\r\n            }\r\n            navigator.clipboard.writeText(query);\r\n\r\n        } else {\r\n            let query = this.props.Login.masterData.selectedQueryBuilder[\"squerywithparam\"] || \"\";\r\n\r\n            if (this.props.Login.masterData.selectedQueryBuilder[\"sdefaultvalue\"] && this.props.Login.masterData.selectedQueryBuilder[\"sdefaultvalue\"].value) {\r\n                const sdefaultValue = JSON.parse(this.props.Login.masterData.selectedQueryBuilder[\"sdefaultvalue\"].value);\r\n\r\n                sdefaultValue.sdefaultvalue.forEach((dataItem, index) => {\r\n                    if (dataItem.items.needmasterdata && dataItem.items.mastertablename) {\r\n                        if (dataItem.symbolObject.items[\"ismulti\"] && dataItem.symbolObject.items[\"ismulti\"] === true) {\r\n\r\n                            dataItem.value.forEach((item, index) => {\r\n\r\n                                count++;\r\n                                if (index === 0) {\r\n                                    if (dataItem.value.length === 1) {\r\n                                        query = query.replace(\"$p\" + count, \"P$\" + dataItem.items.viewvaluemember + \"$P\");\r\n                                    } else {\r\n                                        query = query.replace(\"$p\" + count + \",\", \"P$\" + dataItem.items.viewvaluemember + \"$P\");\r\n                                    }\r\n                                } else {\r\n                                    if (query.includes(\"$p\" + count + \",\")) {\r\n                                        query = query.replace(\"$p\" + count + \",\", \"\");\r\n                                    } else {\r\n                                        query = query.replace(\"$p\" + count, \"\");\r\n                                    }\r\n                                }\r\n                            })\r\n                        } else {\r\n                            count++;\r\n                            query = query.replace(\"$p\" + count, \"P$\" + dataItem.items.viewvaluemember + \"$P\");\r\n                        }\r\n                    }\r\n                    else if (dataItem.items.sforeigncolumnname !== undefined &&\r\n                        dataItem.items.sforeigncolumnname !== \"\") {\r\n                        if (dataItem.symbolObject.items[\"ismulti\"] && dataItem.symbolObject.items[\"ismulti\"] === true) {\r\n\r\n                            dataItem.value.forEach((item, index) => {\r\n\r\n                                count++;\r\n                                if (index === 0) {\r\n                                    if (dataItem.value.length === 1) {\r\n                                        query = query.replace(\"$p\" + count, \"P$\" + dataItem.items.sforeigncolumnname + \"$P\");\r\n                                    } else {\r\n                                        query = query.replace(\"$p\" + count + \",\", \"P$\" + dataItem.items.sforeigncolumnname + \"$P\");\r\n                                    }\r\n\r\n                                } else {\r\n                                    if (query.includes(\"$p\" + count + \",\")) {\r\n                                        query = query.replace(\"$p\" + count + \",\", \"\");\r\n                                    } else {\r\n                                        query = query.replace(\"$p\" + count, \"\");\r\n                                    }\r\n\r\n                                }\r\n                            })\r\n                        } else {\r\n                            count++;\r\n                            query = query.replace(\"$p\" + count, \"P$\" + dataItem.items.sforeigncolumnname + \"$P\");\r\n                        }\r\n                    } else {\r\n                        count++;\r\n                        query = query.replace(\"$p\" + count, \"P$\" + dataItem.items.columnname + \"$P\");\r\n                    }\r\n                })\r\n            }\r\n            if (query.includes(\"$L\")) {\r\n                query = query.replace(\"$L\", \"'\" + this.props.Login.userInfo.slanguagetypecode + \"'\");\r\n            }\r\n            navigator.clipboard.writeText(query);\r\n        }\r\n\r\n\r\n    }\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: \"querybuilder\",\r\n            methodUrl: \"QueryBuilder\",\r\n            // displayName: \"IDS_DASHBOARDTYPES\",\r\n            userInfo: this.props.Login.userInfo\r\n        };\r\n\r\n        this.props.callService(inputParam);\r\n    }\r\n\r\n    saveParam = (saveType, formRef) => {\r\n\r\n        let count = 0;\r\n\r\n        let query = this.props.Login.masterData.selectedQueryBuilder[\"squerywithparam\"];\r\n\r\n        this.props.Login.comboData.sdefaultvalue.forEach((dataItem) => {\r\n\r\n            if (dataItem.items.needmasterdata && dataItem.items.mastertablename) {\r\n\r\n                let sqryData = \"\";\r\n                if (dataItem.symbolObject.items[\"ismulti\"] && dataItem.symbolObject.items[\"ismulti\"] === true) {\r\n\r\n                    dataItem.value.forEach((item) => {\r\n\r\n                        count++;\r\n\r\n                        if (isNaN(item.value)) {\r\n                            query = query.replace(\"$p\" + count, \"'\" + item.value + \"'\");\r\n                        } else {\r\n                            query = query.replace(\"$p\" + count, item.value);\r\n                        }\r\n                    })\r\n\r\n                } else {\r\n                    count++;\r\n                    if (isNaN(dataItem.value.value)) {\r\n                        query = query.replace(\"$p\" + count, \"'\" + dataItem.value.value + \"'\");\r\n                    } else {\r\n                        query = query.replace(\"$p\" + count, dataItem.value.value);\r\n                    }\r\n                }\r\n\r\n\r\n            } else if (dataItem.items.sforeigncolumnname !== undefined &&\r\n                dataItem.items.sforeigncolumnname !== \"\") {\r\n\r\n                if (dataItem.symbolObject.items[\"ismulti\"] && dataItem.symbolObject.items[\"ismulti\"] === true) {\r\n\r\n                    dataItem.value.forEach((item) => {\r\n\r\n                        count++;\r\n\r\n                        if (isNaN(item.value)) {\r\n                            query = query.replace(\"$p\" + count, \"'\" + item.value + \"'\");\r\n                        } else {\r\n                            query = query.replace(\"$p\" + count, item.value);\r\n                        }\r\n                    })\r\n\r\n\r\n                } else {\r\n                    count++;\r\n                    if (isNaN(dataItem.value.value)) {\r\n                        query = query.replace(\"$p\" + count, \"'\" + dataItem.value.value + \"'\");\r\n                    } else {\r\n                        query = query.replace(\"$p\" + count, dataItem.value.value);\r\n                    }\r\n                }\r\n\r\n            } else if (dataItem.items.columntype === ColumnType.DATATIME\r\n                || dataItem.items.columntype === ColumnType.DATE && dataItem.symbolObject.items.isInputVisible === true\r\n                && (dataItem.symbolObject.items.symbolType === 5 || dataItem.symbolObject.items.symbolType === 1)) {\r\n                count++;\r\n                query = query.replace(\"$p\" + count, \"'\" + format(new Date(dataItem.value), \"yyyy-MM-dd HH:mm:ss.SS\") + \"'\");\r\n\r\n\r\n            } else {\r\n                count++;\r\n                query = query.replace(\"$p\" + count, \"'\" + dataItem.value + \"'\");\r\n            }\r\n        })\r\n        if (query.includes(\"$L\")) {\r\n            query = query.replace(\"$L\", \"'\" + this.props.Login.userInfo.slanguagetypecode + \"'\");\r\n        }\r\n        const jsonData = JSON.parse(this.props.Login.masterData.selectedQueryBuilder[\"jsondata\"].value);\r\n        const inputParam = {\r\n            sgeneratedquery: query,\r\n            columnList: jsonData[\"columnList\"],\r\n            userInfo: this.props.Login.userInfo,\r\n\r\n        }\r\n        let inputData = [];\r\n        this.props.updateQueryBuilder(inputParam, inputData, this.props.Login.masterData);\r\n\r\n    }\r\n    save = (saveType, formRef) => {\r\n\r\n        const { selectedRecord } = this.state;\r\n\r\n        if (selectedRecord[\"querybuildername\"] && selectedRecord[\"querybuildername\"].length > 0) {\r\n            if (selectedRecord[\"filtercolumns\"] && selectedRecord[\"filtercolumns\"].length > 0) {\r\n\r\n                let inputData = [];\r\n                let jsondata = {}\r\n                let postParam = undefined;\r\n\r\n                if (selectedRecord[\"sdefaultvalue\"].length > 0) {\r\n                    selectedRecord[\"sdefaultvalue\"].forEach((item, i) => {\r\n                        if (item.symbolObject.items.symbolType === 4) {\r\n                            delete item.symbolObject.items[\"replacewith\"];\r\n                        }\r\n                    })\r\n                }\r\n\r\n                postParam = { inputListName: \"QueryBuilder\", selectedObject: \"selectedQueryBuilder\", primaryKeyField: \"nquerybuildercode\" };\r\n\r\n                inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n                inputData[\"queryBuilder\"] = { \"nstatus\": 1 };\r\n\r\n                jsondata[\"groupList\"] = selectedRecord[\"groupList\"];\r\n                jsondata[\"aggregate\"] = selectedRecord[\"aggregate\"];\r\n                jsondata[\"orderby\"] = selectedRecord[\"orderby\"];\r\n                jsondata[\"columnList\"] = this.props.Login.viewColumnListByRule; //selectedRecord[\"filtercolumns\"];\r\n                jsondata[\"selectFields\"] = this.props.Login.selectFields; //selectedRecord[\"filtercolumns\"];\r\n                inputData[\"sgeneratedquery\"] = selectedRecord[\"sgeneratedquery\"];\r\n\r\n\r\n                inputData[\"queryBuilder\"][\"squerybuildername\"] = selectedRecord[\"querybuildername\"];\r\n                inputData[\"queryBuilder\"][\"nquerytype\"] = 1;\r\n                inputData[\"queryBuilder\"][\"sviewname\"] = selectedRecord[\"sviewname\"].label;\r\n                inputData[\"queryBuilder\"][\"squerywithparam\"] = selectedRecord[\"squerywithparam\"];\r\n                inputData[\"queryBuilder\"][\"squerywithvalue\"] = selectedRecord[\"sgeneratedquery\"];\r\n                inputData[\"queryBuilder\"][\"sdefaultvalue\"] = { sdefaultvalue: selectedRecord[\"sdefaultvalue\"] };\r\n                inputData[\"queryBuilder\"][\"jsondata\"] = jsondata;\r\n\r\n                const inputParam = {\r\n                    classUrl: \"querybuilder\",\r\n                    methodUrl: \"QueryBuilder\",\r\n                    displayName: this.props.Login.inputParam.displayName,\r\n                    inputData: inputData,\r\n                    operation: \"create\", saveType, formRef, postParam\r\n                }\r\n                this.props.crudMaster(inputParam, this.props.Login.masterData, \"openPortalModal\");\r\n                // this.props.createQueryBuilder(inputData, this.props.Login);\r\n            }\r\n            else {\r\n                toast.info(this.props.intl.formatMessage({ id: \"IDS_SELECTANYCOLUMNS\" }));\r\n            }\r\n        }\r\n        else {\r\n            toast.info(this.props.intl.formatMessage({ id: \"IDS_INVALIDQUERYBUILDERNAME\" }));\r\n        }\r\n    }\r\n    deleteQB = (ncontrolCode) => {\r\n        let inputData = [];\r\n\r\n        // let postParam = {\r\n        //     inputListName: \"QueryBuilder\",\r\n        //     selectedObject: \"selectedDashBoardTypes\",\r\n        //     primaryKeyField: \"ndashboardtypecode\",\r\n        //     primaryKeyValue: this.props.Login.masterData.selectedDashBoardTypes.ndashboardtypecode,\r\n        //     fetchUrl: \"dashboardtypes/getAllSelectionDashBoardTypes\",\r\n        //     fecthInputObject: { userinfo: this.props.Login.userInfo }\r\n        // };\r\n        inputData[\"queryBuilder\"] = this.props.Login.masterData.selectedQueryBuilder;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n\r\n        const inputParam = {\r\n            methodUrl: \"QueryBuilder\",\r\n            classUrl: \"querybuilder\",\r\n            inputData: inputData,\r\n            operation: \"delete\", searchRef: this.searchRef\r\n        }\r\n\r\n        this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n\r\n    }\r\n\r\n    confirmDelete = (ncontrolCode) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\",\r\n            this.props.intl.formatMessage({ id: \"IDS_DELETE\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.deleteQB(\"delete\", ncontrolCode));\r\n    };\r\n\r\n    openFilter = () => {\r\n        let showFilter = !this.props.Login.showFilter\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeFilter = () => {\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onFilterSubmit = () => {\r\n\r\n        this.searchRef.current.value = \"\";\r\n\r\n        if (this.state.selectedcombo[\"nquerytypecode\"]) {\r\n            console.log(this.state.selectedcombo[\"nquerytypecode\"].value);\r\n        }\r\n        const nquerytypecode = this.state.selectedcombo[\"nquerytypecode\"] ?\r\n            this.state.selectedcombo[\"nquerytypecode\"].value : this.props.Login.masterData.queryTypeCode;\r\n\r\n        this.props.getQueryBuilder(nquerytypecode, this.props.Login.userInfo, this.props.Login.masterData);\r\n\r\n\r\n    }\r\n\r\n    onFilterComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n    onParamComboChange = (data, index) => {\r\n\r\n        let comboData = this.props.Login.comboData;\r\n        comboData[\"sdefaultvalue\"][index].value = data;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                comboData\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    onParamInputChange = (event, type, index, dataItem) => {\r\n        let comboData = this.props.Login.comboData;\r\n        if (type === 2) {\r\n            const inputValue = event.target.value;\r\n            if (/^-?\\d*?\\.?\\d*?$/.test(inputValue) || inputValue === \"\") {\r\n                comboData[\"sdefaultvalue\"][index].value = event.target.value;\r\n            }\r\n        }\r\n        else if (type === 1) {\r\n            comboData[\"sdefaultvalue\"][index].value = event.target.checked;\r\n        }\r\n        else if (type === 3) {\r\n\r\n            if (dataItem.symbolObject.items.symbolType === 4) {\r\n                // const symbolObject = stringOperatorData.filter(data => data.value === dataItem.symbolObject.value);\r\n                let symbolObject = \"\"\r\n                if (dataItem.symbolObject.value === 7 || dataItem.symbolObject.value === 8) {\r\n                    symbolObject = \"'%_%'\";\r\n                } else if (dataItem.symbolObject.value === 9) {\r\n                    symbolObject = \"'_%'\";\r\n                } else {\r\n                    symbolObject = \"'%_'\";\r\n                }\r\n                const index1 = symbolObject.indexOf('_');\r\n                let inputname = undefined\r\n\r\n                inputname = symbolObject.substr(0, index1) + event.target.value + symbolObject.substr(index1 + 1);\r\n                inputname = inputname.slice(1, inputname.length - 1);\r\n\r\n                comboData[\"sdefaultvalue\"][index].value = inputname;\r\n                comboData[\"sdefaultvalue\"][index].showInputValue = event.target.value;\r\n            } else {\r\n                comboData[\"sdefaultvalue\"][index].value = event.target.value;\r\n            }\r\n        }\r\n        else {\r\n\r\n\r\n            comboData[\"sdefaultvalue\"][index].value = event.target.value;\r\n        }\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                comboData\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    handleFilterDateChange = (dateName, dateValue, groupIndex, index) => {\r\n        const { selectedRecord } = this.state;\r\n        if (dateValue === null) {\r\n            dateValue = new Date();\r\n        }\r\n        selectedRecord[\"groupList\"][groupIndex][index][dateName] = dateValue;\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedcombo = this.state.selectedcombo || {};\r\n        selectedcombo[fieldName] = comboData;\r\n\r\n        this.setState({ selectedcombo });\r\n    }\r\n\r\n    onViewComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        const inputParam = {\r\n            sviewname: comboData.value,\r\n            selectedRecord,\r\n            userinfo: this.props.Login.userInfo\r\n        }\r\n        this.props.getViewColumns(inputParam);\r\n    }\r\n\r\n    onAggregateChange = (comboData, fieldName, index) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[\"aggregate\"] = selectedRecord[\"aggregate\"] || [];\r\n        if (fieldName === \"columnname\") {\r\n            selectedRecord[\"aggregate\"][index] = { \"columnname\": comboData, \"aggfunctionname\": \"\" };\r\n        } else {\r\n            if (selectedRecord[\"aggregate\"][index][\"columnname\"] && selectedRecord[\"aggregate\"][index][\"columnname\"] !== undefined) {\r\n                selectedRecord[\"aggregate\"][index][\"aggfunctionname\"] = comboData;\r\n            }\r\n            else {\r\n\r\n            }\r\n        }\r\n\r\n        // this.setState({ selectedRecord });\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n    onRuleChange = (comboData, fieldName, groupIndex, index) => {\r\n        const { selectedRecord } = this.state;\r\n        this.clearSelectedRule(selectedRecord, index);\r\n        const sqlQuery = this.props.Login.sqlQuery;\r\n        const oldselectedRecord = selectedRecord;\r\n        selectedRecord[\"groupList\"][groupIndex][index][fieldName] = comboData;\r\n        const tableData = comboData.items;\r\n        const mastertablename = tableData.mastertablename;\r\n\r\n        if (comboData.items.needmasterdata && mastertablename) {\r\n            const inputParam = {\r\n                userinfo: this.props.Login.userInfo,\r\n                data: {\r\n                    nflag: 2,\r\n                    mastertablename,\r\n                    valuemember: tableData.valuemember,\r\n                    displaymember: tableData.displaymember,\r\n                },\r\n                selectedRecord,\r\n                groupIndex,\r\n                index,\r\n                optionId: tableData.valuemember\r\n            };\r\n            this.props.getMasterData(inputParam, this.props.Login.viewMasterListByRule);\r\n        } else if (comboData.items && comboData.items.columntype === ColumnType.COMBO) {\r\n            if (sqlQuery) {\r\n                const inputParam = {\r\n                    userinfo: this.props.Login.userInfo,\r\n                    stablename: comboData.items.foriegntablename,\r\n                    scolumnname: comboData.value,\r\n                    selectedRecord,\r\n                    groupIndex,\r\n                    index\r\n                };\r\n                this.props.getForeignTable(inputParam, 'column');\r\n            } else {\r\n                selectedRecord[\"groupList\"][groupIndex][index][`${comboData.items.sforeigncolumnname}`] = \"\";\r\n                const inputParam = {\r\n                    data: { ...comboData.items, nflag: 1 },\r\n                    userinfo: this.props.Login.userInfo,\r\n                    selectedRecord,\r\n                    groupIndex,\r\n                    index,\r\n                    optionId: comboData.items.sforeigncolumnname\r\n                };\r\n                this.props.getMasterData(inputParam, this.props.Login.viewMasterListByRule);\r\n            }\r\n        } else if (comboData.items && comboData.items.columntype === ColumnType.TEXTINPUT\r\n            && oldselectedRecord[\"groupList\"][groupIndex][index][fieldName].items.columntype !== ColumnType.TEXTINPUT) {\r\n            selectedRecord[\"groupList\"][groupIndex][index][\"sinputname\"] = \"\";\r\n            this.setState({ selectedRecord });\r\n        } else {\r\n            this.setState({ selectedRecord });\r\n        }\r\n    }\r\n\r\n    onMasterDataChange = (comboData, fieldName, groupIndex, index) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[\"groupList\"][groupIndex][index][fieldName] = comboData;\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n    onOrderbyChange = (comboData, fieldName, index) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[\"orderby\"] = selectedRecord[\"orderby\"] || [];\r\n        if (fieldName === \"columnname\") {\r\n            selectedRecord[\"orderby\"][index] = { \"columnname\": comboData, \"ordertype\": \"\" };\r\n        } else {\r\n            if (selectedRecord[\"orderby\"][index][\"columnname\"] && selectedRecord[\"orderby\"][index][\"columnname\"] !== undefined) {\r\n                selectedRecord[\"orderby\"][index][\"ordertype\"] = comboData;\r\n            }\r\n            else {\r\n\r\n            }\r\n        }\r\n\r\n        // this.setState({ selectedRecord });\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n    deleteOrderby = (index) => {\r\n        let addOrderbyList = this.props.Login.addOrderbyList;\r\n        let selectedRecord = this.state.selectedRecord;\r\n\r\n        selectedRecord[\"orderby\"].splice(index, 1);\r\n        addOrderbyList.splice(index, 1);\r\n        addOrderbyList.forEach((data, index) => {\r\n            addOrderbyList[index] = index;\r\n        })\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { addOrderbyList }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n    addOrderby = () => {\r\n\r\n        const { selectedRecord } = this.state;\r\n        if (selectedRecord[\"sviewname\"]) {\r\n            const addOrderbyList = this.props.Login.addOrderbyList || [];\r\n            let viewColumnListByRule = this.props.Login.viewColumnListByRule || [];\r\n            const arrayLength = addOrderbyList.length;\r\n            viewColumnListByRule = this.props.Login.viewColumnList;\r\n            addOrderbyList[arrayLength] = arrayLength;\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    addOrderbyList,\r\n                    viewColumnListByRule\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        } else {\r\n            toast.info(this.props.intl.formatMessage({ id: \"IDS_SELECTVIEW\" }));\r\n        }\r\n    }\r\n    deleteAggregate = (index) => {\r\n        let addAggregateList = this.props.Login.addAggregateList;\r\n        let selectedRecord = this.state.selectedRecord;\r\n\r\n        selectedRecord[\"aggregate\"].splice(index, 1);\r\n        addAggregateList.splice(index, 1);\r\n        addAggregateList.forEach((data, index) => {\r\n            addAggregateList[index] = index;\r\n        })\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { addAggregateList }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n        // this.setState({ selectedRecord });\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n    addAggregate = () => {\r\n\r\n        const { selectedRecord } = this.state;\r\n        if (selectedRecord[\"sviewname\"]) {\r\n            // if (selectedRecord[\"groupby\"] && selectedRecord[\"groupby\"] === true) {\r\n            const addAggregateList = this.props.Login.addAggregateList || [];\r\n            let viewColumnListByRule = this.props.Login.viewColumnListByRule || [];\r\n            const arrayLength = addAggregateList.length;\r\n            viewColumnListByRule = this.props.Login.viewColumnList;\r\n            addAggregateList[arrayLength] = arrayLength;\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    addAggregateList,\r\n                    viewColumnListByRule\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n            // } else {\r\n            //     toast.info(this.props.intl.formatMessage({ id: \"IDS_SELECTGROUPBY\" }));\r\n            // }\r\n        } else {\r\n            toast.info(this.props.intl.formatMessage({ id: \"IDS_SELECTVIEW\" }));\r\n        }\r\n    }\r\n    addRule = (type, groupIndex) => {\r\n        const { selectedRecord } = this.state;\r\n        if (type === \"sql\") {\r\n            // let addRuleList = this.props.Login.addRuleList || [];\r\n            // if (addRuleList.length > 0) {\r\n            //     const arrayLength = addRuleList.length;\r\n            //     addRuleList[arrayLength] = arrayLength;\r\n            //     selectedRecord[\"button_and_\" + arrayLength] = true;\r\n            //     const updateInfo = {\r\n            //         typeName: DEFAULT_RETURN,\r\n            //         data: {\r\n            //             addRuleList,\r\n            //             selectedRecord\r\n            //         }\r\n            //     }\r\n            //     this.props.updateStore(updateInfo);\r\n            // } else {\r\n            //     addRuleList[0] = 0;\r\n            //     this.props.getDatabaseTables(this.props.Login.userInfo, this.props.Login.sqlQuery, { addRuleList, selectedRecord: {} });\r\n            // }\r\n\r\n        } else {\r\n            if (selectedRecord[\"sviewname\"]) {\r\n                let viewColumnListByRule = this.props.Login.viewColumnListByRule || [];\r\n\r\n\r\n                // const addRuleList = this.props.Login.addRuleList || [];\r\n                // const arrayLength = addRuleList.length;\r\n                // addRuleList[arrayLength] = arrayLength;\r\n\r\n\r\n                const addGroupList = this.props.Login.addGroupList || [];\r\n                const arrayLength = addGroupList[groupIndex];\r\n                addGroupList[groupIndex] = arrayLength + 1;\r\n\r\n                // const addGroupList = {...this.props.Login.addGroupList, [groupIndex]: addRuleList};\r\n\r\n                selectedRecord[\"groupList\"][groupIndex][arrayLength] = {};\r\n\r\n                // viewColumnListByRule[groupIndex][arrayLength] = this.props.Login.viewColumnList;\r\n                viewColumnListByRule = this.props.Login.viewColumnList;\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        addGroupList,\r\n                        viewColumnListByRule\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            } else {\r\n                toast.info(this.props.intl.formatMessage({ id: \"IDS_SELECTVIEW\" }));\r\n            }\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    addGroup = () => {\r\n\r\n        const { selectedRecord } = this.state;\r\n\r\n        var sql1 = jsonSql.build({\r\n            table: 'testmaster',\r\n            alias: 'tm',\r\n            join: [{\r\n                type: 'inner',\r\n                table: 'testcategory',\r\n                alias: 'tc',\r\n                on: { 'tm.ntestcategorycode': 'tc.ntestcategorycode' }\r\n            },\r\n            {\r\n                type: 'inner',\r\n                table: 'transactionstatus',\r\n                alias: 'ts',\r\n                on: { 'tm.naccredited': 'ts.ntranscode' }\r\n            }]\r\n        });\r\n        console.log(sql1.query);\r\n\r\n        var sql21 = jsonSql.build({\r\n            table: 'testmaster',\r\n            alias: 'tm',\r\n            join: [{\r\n                type: 'inner',\r\n                table: 'testcategory',\r\n                alias: 'tc',\r\n                on: { 'tm.ntestcategorycode': 'tc.ntestcategorycode' }\r\n            },\r\n            {\r\n                type: 'right outer',\r\n                table: 'transactionstatus',\r\n                alias: 'ts',\r\n                on: { 'tm.naccredited': 'ts.ntranscode' }\r\n            },\r\n            {\r\n                type: 'left outer',\r\n                table: 'transactionstatus',\r\n                alias: 'ts',\r\n                on: [{ 'tm.naccredited': 'ts.ntranscode' }, { 'tc.naccredited': 'ts.ntranscode' }]\r\n            }],\r\n            condition: [\r\n                { a: { $gt: 1 } },\r\n                { b: { $lt: 10 } }\r\n            ],\r\n            group: ['a', 'b']\r\n        });\r\n        console.log(sql21.query);\r\n\r\n        if (selectedRecord[\"sviewname\"]) {\r\n            let viewColumnListByRule = this.props.Login.viewColumnListByRule || [];\r\n            const addGroupList = this.props.Login.addGroupList || [];\r\n            const arrayLength = addGroupList.length;\r\n            addGroupList[arrayLength] = 1;\r\n            // viewColumnListByRule[arrayLength] = [];\r\n            // viewColumnListByRule[arrayLength].push(this.props.Login.viewColumnList);\r\n            viewColumnListByRule = this.props.Login.viewColumnList;\r\n            if (arrayLength === 0) {\r\n                selectedRecord[\"groupList\"] = [];\r\n                selectedRecord[\"filtercolumns\"] = this.props.Login.selectFields;\r\n            }\r\n            selectedRecord[\"groupList\"][arrayLength] = [];\r\n            selectedRecord[\"groupList\"][arrayLength][\"button_and\"] = true;\r\n            selectedRecord[\"groupList\"][arrayLength][0] = {};\r\n\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    addGroupList,\r\n                    viewColumnListByRule,\r\n                    selectedRecord\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        } else {\r\n            toast.info(this.props.intl.formatMessage({ id: \"IDS_SELECTVIEW\" }));\r\n        }\r\n    }\r\n    getDatabaseTables = () => {\r\n        const sqlQuery = false;\r\n        this.setState({ selectedRecord: {} });\r\n        this.props.getDatabaseTables(this.props.Login.userInfo, sqlQuery, {\r\n            addRuleList: [], addGroupList: [],\r\n            addAggregateList: [], addOrderbyList: []\r\n        });\r\n\r\n    }\r\n\r\n    closePortalModal = () => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                openPortalModal: false, selectedRecord: {}, addRuleList: [], count: 0\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    closeModal = () => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                openModal: false, selectedRecord: {}\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onExecuteRule = () => {\r\n        const { selectedRecord } = this.state;\r\n        if (selectedRecord[\"sgeneratedquery\"]) {\r\n\r\n\r\n            let query = selectedRecord[\"squerywithparam\"];\r\n\r\n            let count = 0\r\n            selectedRecord[\"sdefaultvalue\"].forEach((dataItem) => {\r\n\r\n                if (dataItem.items.needmasterdata && dataItem.items.mastertablename) {\r\n\r\n                    let sqryData = \"\";\r\n                    if (dataItem.symbolObject.items[\"ismulti\"] && dataItem.symbolObject.items[\"ismulti\"] === true) {\r\n\r\n                        dataItem.value.forEach((item) => {\r\n\r\n                            count++;\r\n\r\n                            if (isNaN(item.value)) {\r\n                                query = query.replace(\"$p\" + count, \"'\" + item.value + \"'\");\r\n                            } else {\r\n                                query = query.replace(\"$p\" + count, item.value);\r\n                            }\r\n                        })\r\n\r\n\r\n                    } else {\r\n                        count++;\r\n                        if (isNaN(dataItem.value.value)) {\r\n                            query = query.replace(\"$p\" + count, \"'\" + dataItem.value.value + \"'\");\r\n                        } else {\r\n                            query = query.replace(\"$p\" + count, dataItem.value.value);\r\n                        }\r\n                    }\r\n\r\n\r\n                } else if (dataItem.items.sforeigncolumnname !== undefined &&\r\n                    dataItem.items.sforeigncolumnname !== \"\") {\r\n\r\n                    if (dataItem.symbolObject.items[\"ismulti\"] && dataItem.symbolObject.items[\"ismulti\"] === true) {\r\n\r\n                        dataItem.value.forEach((item) => {\r\n\r\n                            count++;\r\n\r\n                            if (isNaN(item.value)) {\r\n                                query = query.replace(\"$p\" + count, \"'\" + item.value + \"'\");\r\n                            } else {\r\n                                query = query.replace(\"$p\" + count, item.value);\r\n                            }\r\n                        })\r\n\r\n\r\n                    } else {\r\n                        count++;\r\n                        if (isNaN(dataItem.value.value)) {\r\n                            query = query.replace(\"$p\" + count, \"'\" + dataItem.value.value + \"'\");\r\n                        } else {\r\n                            query = query.replace(\"$p\" + count, dataItem.value.value);\r\n                        }\r\n                    }\r\n\r\n                } else if (dataItem.items.columntype === ColumnType.DATATIME\r\n                    || dataItem.items.columntype === ColumnType.DATE && dataItem.symbolObject.items.isInputVisible === true\r\n                    && (dataItem.symbolObject.items.symbolType === 5 || dataItem.symbolObject.items.symbolType === 1)) {\r\n\r\n                    count++;\r\n                    query = query.replace(\"$p\" + count, \"'\" + format(new Date(dataItem.value), \"yyyy-MM-dd HH:mm:ss.SS\") + \"'\");\r\n\r\n\r\n                } else {\r\n                    count++;\r\n                    query = query.replace(\"$p\" + count, \"'\" + dataItem.value + \"'\");\r\n                }\r\n\r\n            });\r\n            if (query.includes(\"$L\")) {\r\n                query = query.replace(\"$L\", \"'\" + this.props.Login.userInfo.slanguagetypecode + \"'\");\r\n            }\r\n            const inputParam = {\r\n                sgeneratedquery: query,//selectedRecord[\"sgeneratedquery\"],\r\n                selectedRecord,\r\n                columnList: this.props.Login.viewColumnListByRule, //selectedRecord[\"filtercolumns\"] && selectedRecord[\"filtercolumns\"] || this.props.Login.viewColumnListByRule,\r\n                userInfo: this.props.Login.userInfo,\r\n                selectFields: selectedRecord[\"filtercolumns\"] && selectedRecord[\"filtercolumns\"] || this.props.Login.selectFields,\r\n            }\r\n            this.props.executeQuery(inputParam);\r\n        } else {\r\n            toast.info(this.props.intl.formatMessage({ id: \"IDS_QUERYNOTAVAILABLE\" }));\r\n        }\r\n    }\r\n\r\n\r\n\r\n    deleteRule = (groupIndex, index) => {\r\n        let addGroupList = this.props.Login.addGroupList;\r\n        const selectedRecord = this.state.selectedRecord;\r\n        addGroupList[groupIndex] = addGroupList[groupIndex] - 1;\r\n        // selectedRecord[`button_and_${index}`] && delete selectedRecord[`button_and_${index}`];\r\n        // selectedRecord[`button_or_${index}`] && delete selectedRecord[`button_or_${index}`];\r\n        // selectedRecord[`notoperator_${index}`] && delete selectedRecord[`notoperator_${index}`];\r\n\r\n        if (addGroupList[groupIndex] === 0) {\r\n            addGroupList.splice(groupIndex, 1);\r\n            selectedRecord[\"groupList\"].splice(index, 1);\r\n        } else {\r\n            selectedRecord[\"groupList\"][groupIndex].splice(index, 1);\r\n        }\r\n\r\n        // this.clearSelectedRule(selectedRecord, index);\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { addGroupList, selectedRecord }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n\r\n    clearSelectedRule(selectedRecord, index) {\r\n        selectedRecord[\"sinputname_\" + index] && delete selectedRecord[\"sinputname_\" + index];\r\n        selectedRecord[\"ssymbolname_\" + index] && delete selectedRecord[\"ssymbolname_\" + index];\r\n        selectedRecord[\"snumericinput_\" + index] && delete selectedRecord[\"snumericinput_\" + index];\r\n        selectedRecord[\"columnname_\" + index] && delete selectedRecord[\"columnname_\" + index];\r\n        selectedRecord[\"snumericinputtwo_\" + index] && delete selectedRecord[\"snumericinputtwo_\" + index];\r\n        selectedRecord[\"dateinput_\" + index] && delete selectedRecord[\"dateinput_\" + index];\r\n        selectedRecord[\"dateinputtwo_\" + index] && delete selectedRecord[\"dateinputtwo_\" + index];\r\n    }\r\n\r\n    clearRule = () => {\r\n        const sviewname = this.state.selectedRecord.sviewname || \"\";\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { addRuleList: [], selectedRecord: { sviewname }, sqlQuery: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    resetRule = () => {\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                addRuleList: [], addGroupList: [],\r\n                addAggregateList: [], addOrderbyList: []\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n        this.setState({\r\n            selectedRecord: {}\r\n        });\r\n\r\n    }\r\n\r\n    onSymbolChange = (comboData, fieldName, groupIndex, index) => {\r\n        const { selectedRecord } = this.state;\r\n        const oldSelectedRecord = selectedRecord[\"groupList\"][groupIndex][index][fieldName] || {};\r\n        selectedRecord[\"groupList\"][groupIndex][index][fieldName] = comboData;\r\n        const items = selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items;\r\n        selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"][\"items\"][\"needmasterdata\"] = items.needmasterdata !== undefined ? comboData.items.needmasterdata : false;\r\n        if (comboData.items.symbolType === 2 || comboData.items.symbolType === 3) {\r\n            selectedRecord[\"groupList\"][groupIndex][index][items[\"valuemember\"]] && delete selectedRecord[\"groupList\"][groupIndex][index][items[\"valuemember\"]];\r\n            selectedRecord[\"groupList\"][groupIndex][index][items[\"foreigncolumnname\"]] && delete selectedRecord[\"groupList\"][groupIndex][index][items[\"foreigncolumnname\"]];\r\n            selectedRecord[\"groupList\"][groupIndex][index][\"sinputname\"] && delete selectedRecord[\"groupList\"][groupIndex][index][\"sinputname\"];\r\n        } else if (comboData.items.symbolType === 5 && oldSelectedRecord.items && oldSelectedRecord.items.symbolType !== 5) {\r\n            selectedRecord[\"groupList\"][groupIndex][index][\"snumericinput\"] && delete selectedRecord[\"groupList\"][groupIndex][index][\"snumericinput\"];\r\n            selectedRecord[\"groupList\"][groupIndex][index][\"snumericinputtwo\"] && delete selectedRecord[\"groupList\"][groupIndex][index][\"snumericinputtwo\"];\r\n        } else if ((comboData.items.symbolType === 6 && oldSelectedRecord.items && oldSelectedRecord.items.symbolType === 1)\r\n            || (comboData.items.symbolType === 1 && oldSelectedRecord.items && oldSelectedRecord.items.symbolType === 6)) {\r\n            selectedRecord[\"groupList\"][groupIndex][index][`${items.sforeigncolumnname}`] && delete selectedRecord[\"groupList\"][groupIndex][index][`${items.sforeigncolumnname}`];\r\n            selectedRecord[\"groupList\"][groupIndex][index][`${items.valuemember}`] && delete selectedRecord[\"groupList\"][groupIndex][index][`${items.valuemember}`];\r\n        } else {\r\n\r\n        }\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n\r\n    onInputChange = (event, type, groupIndex, index) => {\r\n        let selectedRecord = this.state.selectedRecord;\r\n        if (type === 2) {\r\n            const inputValue = event.target.value;\r\n            if (/^-?\\d*?\\.?\\d*?$/.test(inputValue) || inputValue === \"\") {\r\n                selectedRecord[\"groupList\"][groupIndex][index][event.target.name] = event.target.value;\r\n            }\r\n\r\n        }\r\n        else if (type === 1) {\r\n            selectedRecord[\"groupList\"][groupIndex][index][event.target.name] = event.target.checked;\r\n        }\r\n        else if (type === 3) {\r\n            selectedRecord[\"groupList\"][groupIndex][index][event.target.name] = event.target.value;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n\r\n    generateFilterQuery = (selectedRecord) => {\r\n\r\n        const addGroupList = this.props.Login.addGroupList;\r\n        jsonSql.setDialect('mssql');\r\n        let databaseCondition = [];\r\n        let displayCondition = [];\r\n        let databaseConditionParam = [];\r\n        let fieldWithValue = [];\r\n        let notOperator = false;\r\n        if (addGroupList && addGroupList.length > 0) {\r\n\r\n            let groupConditionDatabase = [];\r\n            let groupConditionDatabaseParam = [];\r\n            let groupConditionDisplay = [];\r\n\r\n\r\n            addGroupList.forEach((items, groupIndex) => {\r\n                let symbolObject = {};\r\n\r\n\r\n                databaseCondition = [];\r\n                databaseConditionParam = [];\r\n                displayCondition = [];\r\n\r\n                [...Array(items)].map((data, index) => {\r\n\r\n                    if (selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"]) {\r\n                        symbolObject = selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"] && selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"].items && selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"].items || {};\r\n\r\n                        const current_button_and = selectedRecord[\"groupList\"][groupIndex][`button_and`];\r\n                        const current_button_or = selectedRecord[\"groupList\"][groupIndex][`button_or`];\r\n                        const next_button_and = selectedRecord[\"groupList\"][groupIndex][`button_and`];\r\n                        const next_button_or = selectedRecord[\"groupList\"][groupIndex][`button_or`] ? selectedRecord[\"groupList\"][groupIndex][`button_or`] : false;\r\n\r\n                        let inputname = selectedRecord[\"groupList\"][groupIndex][index][\"sinputname\"];\r\n                        const symbolname = symbolObject.symbol;\r\n                        let numericinput = selectedRecord[\"groupList\"][groupIndex][index][\"snumericinput\"];\r\n                        const columnLabel = selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].label;\r\n                        const columnValue = selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].value;\r\n                        const snumericinputtwo = selectedRecord[\"groupList\"][groupIndex][index][\"snumericinputtwo\"];\r\n                        let columnName = undefined;\r\n                        const needmasterdata = selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.needmasterdata ?\r\n                            selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.needmasterdata : false;\r\n\r\n                        if (selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.needmasterdata) {\r\n                            columnName = selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.valuemember;\r\n                        } else if (selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.sforeigncolumnname) {\r\n                            columnName = selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.sforeigncolumnname;\r\n                        }\r\n                        const dateinput = selectedRecord[\"groupList\"][groupIndex][index][\"dateinput\"] && format(new Date(selectedRecord[\"groupList\"][groupIndex][index][\"dateinput\"]), \"yyyy-MM-dd HH:mm:ss.SS\")//selectedRecord[\"dateinput_\" + index];\r\n                        const dateinputtwo = selectedRecord[\"groupList\"][groupIndex][index][\"dateinputtwo\"] && format(new Date(selectedRecord[\"groupList\"][groupIndex][index][\"dateinputtwo\"]), \"yyyy-MM-dd HH:mm:ss.SS\")//selectedRecord[\"dateinputtwo_\" + index];\r\n\r\n                        if (symbolObject && inputname) {\r\n                            if (symbolObject.symbolType === 4) {\r\n                                const showInputValue = inputname;\r\n                                const index1 = symbolObject.replacewith.indexOf('_');\r\n                                inputname = symbolObject.replacewith.substr(0, index1) + inputname + symbolObject.replacewith.substr(index1 + 1);\r\n                                inputname = inputname.slice(1, inputname.length - 1);\r\n\r\n                                databaseCondition.push({ [columnValue]: { [symbolname]: inputname } });\r\n                                displayCondition.push({ [columnLabel]: { [symbolname]: inputname } });\r\n                                databaseConditionParam.push({ [columnValue]: { [symbolname]: inputname } });\r\n                                fieldWithValue.push({ columnName: columnValue, value: inputname, showInputValue: showInputValue, symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                            } else {\r\n                                databaseCondition.push({ [columnValue]: { [symbolname]: inputname } });\r\n                                displayCondition.push({ [columnLabel]: { [symbolname]: inputname } });\r\n                                databaseConditionParam.push({ [columnValue]: { [symbolname]: inputname } });\r\n                                fieldWithValue.push({ columnName: columnValue, value: inputname, symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                            }\r\n                        } else if (symbolObject && numericinput && symbolObject.symbolType !== 5) {\r\n                            databaseCondition.push({ [columnValue]: { [symbolname]: numericinput } });\r\n                            displayCondition.push({ [columnLabel]: { [symbolname]: numericinput } });\r\n                            databaseConditionParam.push({ [columnValue]: { [symbolname]: numericinput } });\r\n                            fieldWithValue.push({ columnName: columnValue, value: numericinput, symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                        } else if (symbolObject && symbolObject.symbolType === 2\r\n                            || symbolObject && symbolObject.symbolType === 3) {\r\n                            databaseCondition.push({ [columnValue]: { [symbolname]: '' } });\r\n                            displayCondition.push({ [columnLabel]: { [symbolname]: '' } });\r\n                            databaseConditionParam.push({ [columnValue]: { [symbolname]: '' } });\r\n                            fieldWithValue.push({ columnName: columnValue, value: '', symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                        } else if (symbolObject && numericinput && snumericinputtwo && symbolObject.symbolType === 5) {\r\n                            if (symbolObject.symbol === \"\") {\r\n                                const tempValue = [{ [columnValue]: { [symbolObject.replacewith[0]]: +numericinput } },\r\n                                { [columnValue]: { [symbolObject.replacewith[1]]: snumericinputtwo } }];\r\n                                const tempValue1 = [{ [columnLabel]: { [symbolObject.replacewith[0]]: +numericinput } },\r\n                                { [columnLabel]: { [symbolObject.replacewith[1]]: snumericinputtwo } }];\r\n                                databaseCondition.push(tempValue);\r\n                                displayCondition.push(tempValue1);\r\n                                databaseConditionParam.push(tempValue);\r\n\r\n                            } else {\r\n                                const tempValue = [\r\n                                    {\r\n                                        [symbolObject.symbol]: [{ [columnValue]: { [symbolObject.replacewith[0]]: +numericinput } },\r\n                                        { [columnValue]: { [symbolObject.replacewith[1]]: snumericinputtwo } }]\r\n                                    }\r\n                                ];\r\n                                const tempValue1 = [\r\n                                    {\r\n                                        [symbolObject.symbol]: [{ [columnLabel]: { [symbolObject.replacewith[0]]: +numericinput } },\r\n                                        { [columnLabel]: { [symbolObject.replacewith[1]]: snumericinputtwo } }]\r\n                                    }\r\n                                ];\r\n                                databaseCondition.push(tempValue);\r\n                                displayCondition.push(tempValue1);\r\n                                databaseConditionParam.push(tempValue);\r\n                            }\r\n                        } else if (symbolObject && symbolObject.symbolType === 6 && columnName && selectedRecord[\"groupList\"][groupIndex][index][columnName]) {\r\n\r\n                            const data = selectedRecord[\"groupList\"][groupIndex][index][columnName] && selectedRecord[\"groupList\"][groupIndex][index][columnName].map(item => { return \"'\" + item.value + \"'\" }) || [];\r\n                            const data1 = selectedRecord[\"groupList\"][groupIndex][index][columnName] && selectedRecord[\"groupList\"][groupIndex][index][columnName].map(item => { return item.label }) || [];\r\n                            if (data.length > 0) {\r\n                                if (needmasterdata) {\r\n                                    databaseCondition.push({ [selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember]: { [symbolname]: data } });\r\n                                    databaseConditionParam.push({ [selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember]: { [symbolname]: data } });\r\n                                    fieldWithValue.push({ columnName: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember, value: selectedRecord[\"groupList\"][groupIndex][index][columnName].map(item => { return item }), symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                                } else {\r\n                                    databaseCondition.push({ [columnValue]: { [symbolname]: data } });\r\n                                    databaseConditionParam.push({ [columnValue]: { [symbolname]: data } });\r\n                                    fieldWithValue.push({ columnName: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember, value: selectedRecord[\"groupList\"][groupIndex][index][columnName].map(item => { return item }), symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                                }\r\n                            }\r\n                            if (data1.length > 0) {\r\n                                displayCondition.push({ [columnLabel]: { [symbolname]: data1 } });\r\n                            }\r\n                            // }\r\n                        } else if (symbolObject && columnName && symbolObject.isInputVisible && selectedRecord[\"groupList\"][groupIndex][index][columnName]) {\r\n                            if (needmasterdata) {\r\n                                databaseCondition.push({ [selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember]: { [symbolname]: selectedRecord[\"groupList\"][groupIndex][index][columnName].value } });\r\n                                displayCondition.push({ [columnLabel]: { [symbolname]: selectedRecord[\"groupList\"][groupIndex][index][columnName].label } });\r\n                                databaseConditionParam.push({ [selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember]: { [symbolname]: selectedRecord[\"groupList\"][groupIndex][index][columnName].label } });\r\n                                fieldWithValue.push({ columnName: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items.viewvaluemember, value: selectedRecord[\"groupList\"][groupIndex][index][columnName], symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                            } else {\r\n                                databaseCondition.push({ [columnValue]: { [symbolname]: selectedRecord[\"groupList\"][groupIndex][index][columnName].value } });\r\n                                displayCondition.push({ [columnLabel]: { [symbolname]: selectedRecord[\"groupList\"][groupIndex][index][columnName].label } });\r\n                                databaseConditionParam.push({ [columnValue]: { [symbolname]: selectedRecord[\"groupList\"][groupIndex][index][columnName].label } });\r\n                                fieldWithValue.push({ columnName: columnValue, value: selectedRecord[\"groupList\"][groupIndex][index][columnName], symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                            }\r\n                        } else if (symbolObject && dateinput && symbolObject.symbolType !== 5) {\r\n                            databaseCondition.push({ [columnValue]: { [symbolname]: dateinput } });\r\n                            displayCondition.push({ [columnLabel]: { [symbolname]: dateinput } });\r\n                            databaseConditionParam.push({ [columnValue]: { [symbolname]: dateinput } });\r\n                            fieldWithValue.push({ columnName: columnValue, value: dateinput, symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                        } else if (symbolObject && dateinput && dateinputtwo && symbolObject.symbolType === 5) {\r\n                            if (symbolObject.symbol === \"\") {\r\n                                const tempValue = [{ [columnValue]: { [symbolObject.replacewith[0]]: dateinput } },\r\n                                { [columnValue]: { [symbolObject.replacewith[1]]: dateinputtwo } }];\r\n                                const tempValue1 = [{ [columnLabel]: { [symbolObject.replacewith[0]]: dateinput } },\r\n                                { [columnLabel]: { [symbolObject.replacewith[1]]: dateinputtwo } }];\r\n                                databaseCondition.push(tempValue);\r\n                                displayCondition.push(tempValue1);\r\n                                databaseConditionParam.push(tempValue);\r\n                                fieldWithValue.push({ columnName: columnValue, value: dateinput, symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                                fieldWithValue.push({ columnName: columnValue, value: dateinputtwo, symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                            } else {\r\n                                const tempValue = [\r\n                                    {\r\n                                        [symbolObject.symbol]: [{ [columnValue]: { [symbolObject.replacewith[0]]: dateinput } },\r\n                                        { [columnValue]: { [symbolObject.replacewith[1]]: dateinputtwo } }]\r\n                                    }\r\n                                ];\r\n                                const tempValue1 = [\r\n                                    {\r\n                                        [symbolObject.symbol]: [{ [columnLabel]: { [symbolObject.replacewith[0]]: dateinput } },\r\n                                        { [columnLabel]: { [symbolObject.replacewith[1]]: dateinputtwo } }]\r\n                                    }\r\n                                ];\r\n                                databaseCondition.push(tempValue);\r\n                                displayCondition.push(tempValue1);\r\n                                databaseConditionParam.push(tempValue);\r\n                                fieldWithValue.push({ columnName: columnValue, value: dateinput, symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                                fieldWithValue.push({ columnName: columnValue, value: dateinputtwo, symbolObject: selectedRecord[\"groupList\"][groupIndex][index][\"ssymbolname\"], items: selectedRecord[\"groupList\"][groupIndex][index][\"columnname\"].items });\r\n                            }\r\n                        }\r\n\r\n\r\n                    } else {\r\n                        this.groupByFunction(selectedRecord, databaseCondition, displayCondition);\r\n                    }\r\n                });\r\n\r\n                if (selectedRecord[\"groupList\"][groupIndex][`button_and`] === true) {\r\n\r\n                    if (selectedRecord[\"groupList\"][groupIndex][`button_not`] === true) {\r\n                        groupConditionDisplay.push([{ $not: [{ $and: [...displayCondition] }] }]);\r\n                        groupConditionDatabase.push([{ $not: [{ $and: [...databaseCondition] }] }]);\r\n                        groupConditionDatabaseParam.push([{ $not: [{ $and: [...databaseConditionParam] }] }]);\r\n                    } else {\r\n                        groupConditionDisplay.push([{ $and: [...displayCondition] }]);\r\n                        groupConditionDatabase.push([{ $and: [...databaseCondition] }]);\r\n                        groupConditionDatabaseParam.push([{ $and: [...databaseConditionParam] }]);\r\n                    }\r\n\r\n                } else if (selectedRecord[\"groupList\"][groupIndex][`button_or`] === true) {\r\n\r\n                    if (selectedRecord[\"groupList\"][groupIndex][`button_not`] === true) {\r\n                        groupConditionDisplay.push([{ $not: [{ $or: [...displayCondition] }] }]);\r\n                        groupConditionDatabase.push([{ $not: [{ $or: [...databaseCondition] }] }]);\r\n                        groupConditionDatabaseParam.push([{ $not: [{ $or: [...databaseConditionParam] }] }]);\r\n                    }\r\n                    else {\r\n                        groupConditionDisplay.push([{ $or: [...displayCondition] }]);\r\n                        groupConditionDatabase.push([{ $or: [...databaseCondition] }]);\r\n                        groupConditionDatabaseParam.push([{ $or: [...databaseConditionParam] }]);\r\n                    }\r\n\r\n                } else {\r\n                    groupConditionDisplay.push([{ ...displayCondition }]);\r\n                    groupConditionDatabase.push([{ ...databaseCondition }]);\r\n                    groupConditionDatabaseParam.push([{ ...databaseConditionParam }]);\r\n                }\r\n\r\n\r\n                let finalConditionDisplay = undefined;\r\n                let finalConditionDatabase = undefined;\r\n                let finalConditionDatabaseParam = undefined;\r\n                if (addGroupList.length - 1 === 0) {\r\n\r\n\r\n                    finalConditionDisplay = [...groupConditionDisplay];\r\n                    finalConditionDatabase = [...groupConditionDatabase];\r\n                    finalConditionDatabaseParam = [...groupConditionDatabaseParam];\r\n\r\n\r\n                } else if (addGroupList.length - 1 === groupIndex) {\r\n                    if (selectedRecord[\"groupList\"][0][`button_and`] === true) {\r\n\r\n\r\n                        finalConditionDisplay = [{ $and: [...groupConditionDisplay] }];\r\n                        finalConditionDatabase = [{ $and: [...groupConditionDatabase] }];\r\n                        finalConditionDatabaseParam = [{ $and: [...groupConditionDatabaseParam] }];\r\n\r\n\r\n                    } else if (selectedRecord[\"groupList\"][0][`button_or`] === true) {\r\n\r\n\r\n                        finalConditionDisplay = [{ $or: [...groupConditionDisplay] }];\r\n                        finalConditionDatabase = [{ $or: [...groupConditionDatabase] }];\r\n                        finalConditionDatabaseParam = [{ $or: [...groupConditionDatabaseParam] }];\r\n\r\n\r\n                    } else {\r\n\r\n\r\n                        finalConditionDisplay = [{ ...groupConditionDisplay }];\r\n                        finalConditionDatabase = [{ ...groupConditionDatabase }];\r\n                        finalConditionDatabaseParam = [{ ...groupConditionDatabaseParam }];\r\n\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if (this.props.Login.sqlQuery) {\r\n                    const databaseSQLQuery = jsonSql.build({\r\n                        type: 'select',\r\n                        table: selectedRecord[\"stablename_0\"].value,\r\n                        condition: databaseCondition\r\n                    });\r\n                    const displaySQLQuery = jsonSql.build({\r\n                        type: 'select',\r\n                        table: selectedRecord[\"stablename_0\"].label,\r\n                        condition: displayCondition\r\n                    });\r\n                    selectedRecord[\"sgeneratedquery\"] = databaseSQLQuery.query;\r\n                    selectedRecord[\"sdisplayquery\"] = displaySQLQuery.query;\r\n                } else {\r\n\r\n\r\n                    // const fields = this.props.Login.viewColumnList;\r\n                    const dbFields = selectedRecord[\"filtercolumns\"];\r\n\r\n                    let fieldList = [];\r\n                    let dbfieldList = [];\r\n                    let groupByAggregateFields = [];\r\n                    let groupByFields = [];\r\n\r\n                    let groupByAggregateFieldsDisplay = [];\r\n                    let groupByFieldsDisplay = [];\r\n\r\n                    let orderByDefault = [];\r\n                    let orderByCustom = {};\r\n\r\n                    let orderByDefaultDisplay = [];\r\n                    let orderByCustomDisplay = {};\r\n\r\n                    selectedRecord[\"orderby\"] && selectedRecord[\"orderby\"].forEach(data => {\r\n                        if (data[\"ordertype\"] && data[\"ordertype\"].value === 2) {\r\n                            orderByCustom[data[\"columnname\"].items.columnname] = -1\r\n                            orderByCustomDisplay[data[\"columnname\"].label] = -1\r\n                        } else {\r\n                            orderByCustom[data[\"columnname\"].items.columnname] = 1\r\n                            orderByCustomDisplay[data[\"columnname\"].label] = 1\r\n                        }\r\n                    })\r\n                    if (selectedRecord[\"aggregate\"] && selectedRecord[\"aggregate\"].length > 0) {\r\n                        selectedRecord[\"aggregate\"].forEach(data => {\r\n                            if (data[\"aggfunctionname\"] && data[\"aggfunctionname\"].label !== '') {\r\n                                groupByAggregateFields.push({\r\n                                    func: {\r\n                                        name: data[\"aggfunctionname\"].label,\r\n                                        args: [{ field: data[\"columnname\"].items.columnname }]\r\n\r\n                                    }, alias: data[\"columnname\"].items.columnname\r\n                                })\r\n                                groupByAggregateFieldsDisplay.push({\r\n                                    func: {\r\n                                        name: data[\"aggfunctionname\"].label,\r\n                                        args: [{ field: data[\"columnname\"].label }]\r\n\r\n                                    }\r\n                                })\r\n\r\n                            } else {\r\n                                groupByAggregateFields.push(data[\"columnname\"].items.columnname);\r\n                                groupByFields.push(data[\"columnname\"].items.columnname);\r\n                                groupByAggregateFieldsDisplay.push(data[\"columnname\"].label);\r\n                                groupByFieldsDisplay.push(data[\"columnname\"].label);\r\n                            }\r\n                        })\r\n                    }\r\n                    // fields.forEach(item => {\r\n                    //     fieldList.push(item.label);\r\n                    // })\r\n                    dbFields.forEach(item => {\r\n                        if (item.items.languagecode === true) {\r\n                            // let languageCode = this.props.Login.userInfo.slanguagetypecode ? this.props.Login.userInfo.slanguagetypecode : \"en-US\";\r\n                            let fieldValue = item.value + \"\\\"->> $L as \\\"\" + item.value;//item.value.replace(item.value, item.value + \"->> $L as \" + item.value);\r\n                            // dbfieldList.push( \"\"+fieldValue+\"\");\r\n                            dbfieldList.push(fieldValue);\r\n\r\n                        } else {\r\n                            // dbfieldList.push(\"\"+item.value+\"\");\r\n                            dbfieldList.push(item.value);\r\n                        }\r\n                        fieldList.push(item.label);\r\n                    })\r\n                    const databaseSQLQueryParam = jsonSqlParam.build({\r\n                        type: 'select',\r\n                        table: selectedRecord[\"sviewname\"].value,\r\n                        fields: selectedRecord[\"aggregate\"] && selectedRecord[\"aggregate\"].length > 0 ? groupByAggregateFields : dbfieldList,\r\n                        group: groupByFields,\r\n                        sort: selectedRecord[\"orderby\"] && selectedRecord[\"orderby\"].length > 0 ? orderByCustom : \"\",\r\n                        condition: finalConditionDatabaseParam\r\n                    });\r\n                    const databaseSQLQuery = jsonSql.build({\r\n                        type: 'select',\r\n                        table: selectedRecord[\"sviewname\"].value,\r\n                        fields: selectedRecord[\"aggregate\"] && selectedRecord[\"aggregate\"].length > 0 ? groupByAggregateFields : dbfieldList,\r\n                        group: groupByFields,\r\n                        sort: selectedRecord[\"orderby\"] && selectedRecord[\"orderby\"].length > 0 ? orderByCustom : \"\",\r\n                        condition: finalConditionDatabase\r\n                    });\r\n                    const displaySQLQuery = jsonSql.build({\r\n                        type: 'select',\r\n                        fields: selectedRecord[\"aggregate\"] && selectedRecord[\"aggregate\"].length > 0 ? groupByAggregateFieldsDisplay : fieldList,\r\n                        group: groupByFieldsDisplay,\r\n                        table: selectedRecord[\"sviewname\"].label,\r\n                        sort: selectedRecord[\"orderby\"] && selectedRecord[\"orderby\"].length > 0 ? orderByCustomDisplay : \"\",\r\n                        condition: finalConditionDisplay //&& finalCondition.length === 1 ? finalCondition[0] : finalCondition\r\n                    });\r\n                    // databaseSQLQueryParam.query.split('\"').join('')\r\n                    // databaseSQLQuery.query.split('\"').join('')\r\n\r\n                    // let dbQueryParam = databaseSQLQueryParam.query.split('\"').join('');\r\n                    // let dbQuery = databaseSQLQuery.query.split('\"').join('');\r\n                    let dbQueryParam = databaseSQLQueryParam.query;\r\n                    let dbQuery = databaseSQLQuery.query;\r\n                    selectedRecord[\"squerywithparam\"] = dbQueryParam.replace(\"like\", \"Ilike\");\r\n\r\n                    selectedRecord[\"sgeneratedquery\"] = selectedRecord[\"filtercolumns\"] && selectedRecord[\"filtercolumns\"].length > 0 ?\r\n                        dbQuery.replace(\"like\", \"Ilike\") : \"\";\r\n                    selectedRecord[\"sdisplayquery\"] = selectedRecord[\"filtercolumns\"] && selectedRecord[\"filtercolumns\"].length > 0 ?\r\n                        displaySQLQuery.query.replace(\"like\", \"Ilike\") : \"\";\r\n\r\n                    selectedRecord[\"sdefaultvalue\"] = fieldWithValue;\r\n\r\n\r\n                    const paramIndex = [];\r\n                    if (fieldWithValue.length > 0) {\r\n                        fieldWithValue.forEach((item, i) => {\r\n                            if (item.symbolObject.items.symbolType === 4) {\r\n                                paramIndex.push(\"$p\" + (i + 1));\r\n                            }\r\n                        })\r\n                    }\r\n\r\n                    if (paramIndex.length > 0) {\r\n                        paramIndex.forEach(data => {\r\n                            selectedRecord[\"squerywithparam\"] = selectedRecord[\"squerywithparam\"].replace(data, data + \" COLLATE pg_catalog.default \");\r\n                        })\r\n                    }\r\n                    // if (selectedRecord[\"squerywithparam\"].indexOf('Ilike') > 0) {\r\n\r\n                    //     let newQuery = selectedRecord[\"squerywithparam\"];\r\n\r\n                    //     while (newQuery.indexOf(\"Ilike\") !== -1) {\r\n\r\n                    //         const paramLabelStartIndex = newQuery.indexOf(\"Ilike\");\r\n\r\n                    //         const paramLabel = newQuery.substring(paramLabelStartIndex, newQuery.length);\r\n\r\n\r\n\r\n                    //     }\r\n                    // }\r\n                }\r\n                this.setState({ selectedRecord });\r\n            });\r\n        } else {\r\n            this.groupByFunction(selectedRecord, databaseCondition, displayCondition);\r\n        }\r\n        this.setState({ selectedRecord });// for temporary\r\n    }\r\n\r\n    groupByFunction(selectedRecord, databaseCondition, displayCondition) {\r\n        let groupByAggregateFields = [];\r\n        let groupByFields = [];\r\n\r\n        let groupByAggregateFieldsDisplay = [];\r\n        let groupByFieldsDisplay = [];\r\n\r\n        let orderByDefault = [];\r\n        let orderByCustom = {};\r\n\r\n        let orderByDefaultDisplay = [];\r\n        let orderByCustomDisplay = {};\r\n\r\n        // if (selectedRecord[\"customorderby\"] && selectedRecord[\"customorderby\"] === true) {\r\n        selectedRecord[\"orderby\"] && selectedRecord[\"orderby\"].forEach(data => {\r\n            if (data[\"ordertype\"] && data[\"ordertype\"].value === 2) {\r\n                orderByCustom[data[\"columnname\"].items.columnname] = -1\r\n                orderByCustomDisplay[data[\"columnname\"].label] = -1\r\n            } else {\r\n                orderByCustom[data[\"columnname\"].items.columnname] = 1\r\n                orderByCustomDisplay[data[\"columnname\"].label] = 1\r\n            }\r\n        })\r\n        // } else {\r\n        //     selectedRecord[\"orderby\"] && selectedRecord[\"orderby\"].forEach(data => {\r\n        //         orderByDefault.push(data[\"columnname\"].items.columnname);\r\n        //         orderByDefaultDisplay.push(data[\"columnname\"].label);\r\n        //     })\r\n        // }\r\n\r\n\r\n        // if (selectedRecord[\"groupby\"] && selectedRecord[\"groupby\"] === true) {\r\n        if (selectedRecord[\"aggregate\"] && selectedRecord[\"aggregate\"].length > 0) {\r\n            selectedRecord[\"aggregate\"].forEach(data => {\r\n                if (data[\"aggfunctionname\"] && data[\"aggfunctionname\"].label !== '') {\r\n                    groupByAggregateFields.push({\r\n                        func: {\r\n                            name: data[\"aggfunctionname\"].label,\r\n                            args: [{ field: data[\"columnname\"].items.columnname }]\r\n\r\n                        }, alias: data[\"columnname\"].items.columnname\r\n                    })\r\n                    groupByAggregateFieldsDisplay.push({\r\n                        func: {\r\n                            name: data[\"aggfunctionname\"].label,\r\n                            args: [{ field: data[\"columnname\"].label }]\r\n\r\n                        }\r\n                    })\r\n\r\n                } else {\r\n                    groupByAggregateFields.push(data[\"columnname\"].items.columnname);\r\n                    groupByFields.push(data[\"columnname\"].items.columnname);\r\n                    groupByAggregateFieldsDisplay.push(data[\"columnname\"].label);\r\n                    groupByFieldsDisplay.push(data[\"columnname\"].label);\r\n                }\r\n            })\r\n\r\n            const databaseSQLQuery = jsonSql.build({\r\n                type: 'select',\r\n                table: selectedRecord[\"sviewname\"].value,\r\n                fields: groupByAggregateFields,\r\n                group: groupByFields,\r\n                sort: selectedRecord[\"orderby\"] && selectedRecord[\"orderby\"].length > 0 ? orderByCustom : \"\",\r\n                condition: databaseCondition\r\n            });\r\n            const displaySQLQuery = jsonSql.build({\r\n                type: 'select',\r\n                fields: groupByAggregateFieldsDisplay,\r\n                group: groupByFieldsDisplay,\r\n                sort: selectedRecord[\"orderby\"] && selectedRecord[\"orderby\"].length > 0 ? orderByCustomDisplay : \"\",\r\n                table: selectedRecord[\"sviewname\"].label,\r\n                condition: displayCondition\r\n            });\r\n            selectedRecord[\"sgeneratedquery\"] = databaseSQLQuery.query;\r\n            selectedRecord[\"sdisplayquery\"] = displaySQLQuery.query;\r\n            this.setState({ selectedRecord });\r\n        }\r\n        // }\r\n    }\r\n    onConditionClick = (fieldName, index) => {\r\n        let { selectedRecord } = this.state;\r\n        if (fieldName === `button_and`) {\r\n            selectedRecord[\"groupList\"][index][fieldName] = selectedRecord[\"groupList\"][index][fieldName] === true ? false : true;\r\n            selectedRecord[\"groupList\"][index][`button_or`] = false;\r\n        } else if (fieldName === `button_or`) {\r\n            selectedRecord[\"groupList\"][index][fieldName] = selectedRecord[\"groupList\"][index][fieldName] === true ? false : true;\r\n            selectedRecord[\"groupList\"][index][`button_and`] = false;\r\n            // if (selectedRecord[\"groupList\"][index][`notoperator`] && selectedRecord[\"groupList\"][index][`notoperator`] === true) {\r\n            //     selectedRecord[\"groupList\"][index][`notoperator`] = false;\r\n            // }\r\n        } else if (fieldName === `button_not`) {\r\n            selectedRecord[\"groupList\"][index][fieldName] = selectedRecord[\"groupList\"][index][fieldName] === true ? false : true;\r\n        }\r\n        else {\r\n\r\n        }\r\n        this.generateFilterQuery(selectedRecord);\r\n    }\r\n\r\n    onQueryTypeOnclick = (value) => {\r\n\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[\"selectedQueryType\"] = value;\r\n        let sqlQuery = false;\r\n        if (value.value === \"sql\") {\r\n            sqlQuery = true;\r\n        }\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { sqlQuery: sqlQuery }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n        this.setState({ selectedRecord });\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, updateStore, filterColumnData,\r\n    validateEsignCredential, getSQLQueryDetail, getSQLQueryComboService, comboChangeQueryType,\r\n    executeUserQuery, comboColumnValues, getColumnNamesByTableName,\r\n    getTablesName, getModuleFormName, getDatabaseTables, executeQuery, getForeignTable,\r\n    getViewColumns, getMasterData, createQueryBuilder,\r\n    getParameterFromQuery, getSelectedQueryBuilder, updateQueryBuilder, getQueryBuilder\r\n})(injectIntl(QueryBuilder));"]},"metadata":{},"sourceType":"module"}