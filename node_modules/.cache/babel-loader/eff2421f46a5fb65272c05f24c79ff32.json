{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, noop, getter, guid, canUseDOM } from '@progress/kendo-react-common';\nimport { Header, HeaderRow, FilterRow as TreeListFilterRow, ColumnResize, CommonDragLogic, DragClue, DropClue, tableColumnsVirtualization, readColumns, mapColumns, tableKeyboardNavigation, TableKeyboardNavigationContext, tableKeyboardNavigationScopeAttributes, tableKeyboardNavigationTools as navigationTools, tableKeyboardNavigationBodyAttributes, getSelectionOptions, TableSelection } from '@progress/kendo-react-data-tools';\nimport { getNestedValue, setHeaderRowsTop, tableRowsVirtualization } from './utils/index';\nimport { flatData } from './utils/data-operations';\nimport { TreeListCell } from './cells/TreeListCell';\nimport { TreeListNoRecords } from './TreeListNoRecords';\nimport { TreeListRow } from './rows/TreeListRow';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\n/**\n * Represents the [KendoReact TreeList component]({% slug getstarted_treelist %}).\n */\n\nvar TreeList = function (_super) {\n  __extends(TreeList, _super);\n\n  function TreeList(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.wrapperScrollLeft = 0;\n    _this.wrapperScrollTop = 0;\n    _this.updateOnScroll = false;\n    _this.tbodyOffsetTop = 0;\n    _this.prevData = [];\n    _this.prevColumns = undefined;\n    _this.flattedData = [];\n    _this.extendedColumn = [];\n    _this.columnsMap = [];\n    _this.element = null;\n    _this._treeListId = guid();\n    _this.contextStateRef = {\n      current: undefined\n    };\n    _this.navigationStateRef = {\n      current: undefined\n    };\n    /**\n     * Method to allow the scroll to be set to a specific row index.\n     *\n     * @param options - Object, containing the rowIndex to which is going to be scrolled.\n     */\n\n    _this.scrollIntoView = function (options) {\n      if (!_this.element) {\n        return;\n      }\n\n      var _a = options.rowIndex,\n          rowIndex = _a === void 0 ? 0 : _a;\n      var _b = _this.props,\n          scrollable = _b.scrollable,\n          _c = _b.rowHeight,\n          rowHeight = _c === void 0 ? 0 : _c;\n\n      if (scrollable === 'virtual' || rowHeight) {\n        _this.element.scroll(0, (rowIndex - 1) * rowHeight);\n      } else {\n        var selectedRow = _this.element.querySelector(\"tbody > tr:nth-child(\".concat(rowIndex, \")\"));\n\n        if (selectedRow) {\n          var offsetTop = selectedRow.offsetTop - _this.tbodyOffsetTop;\n\n          _this.element.scroll(0, offsetTop);\n        }\n      }\n    };\n\n    _this.onKeyDown = function (event) {\n      tableKeyboardNavigation.onKeyDown(event, {\n        contextStateRef: _this.contextStateRef,\n        navigationStateRef: _this.navigationStateRef\n      });\n\n      if (_this.props.onKeyDown) {\n        var _a = getSelectionOptions(_this.props.selectable),\n            mode = _a.mode,\n            cell = _a.cell;\n\n        var ev = __assign({\n          dataItems: _this.getLeafDataItems(),\n          mode: mode,\n          cell: cell,\n          componentId: _this._treeListId,\n          selectedField: _this.props.selectedField\n        }, _this.getArguments(event));\n\n        _this.props.onKeyDown.call(undefined, ev);\n      }\n    };\n\n    _this.onFocus = function (event) {\n      tableKeyboardNavigation.onFocus(event, {\n        contextStateRef: _this.contextStateRef\n      });\n    };\n\n    _this.onRowDrag = function (event) {\n      if (_this.props.onRowDrag) {\n        _this.props.onRowDrag.call(undefined, __assign(__assign({}, event), {\n          target: _this\n        }));\n      }\n    };\n\n    _this.onRowDrop = function (event) {\n      if (_this.props.onRowDrop) {\n        _this.props.onRowDrop.call(undefined, __assign(__assign({}, event), {\n          target: _this\n        }));\n      }\n    };\n\n    _this.columnReorder = function (prev, next, nativeEvent) {\n      var _a;\n\n      var depth = _this.extendedColumn[prev].depth;\n\n      var end = function (index) {\n        do {\n          index++;\n        } while (index < _this.extendedColumn.length && _this.extendedColumn[index].depth > depth);\n\n        return index;\n      };\n\n      var spliced = _this.extendedColumn.splice(prev, end(prev) - prev);\n\n      (_a = _this.extendedColumn).splice.apply(_a, __spreadArray([prev < next ? end(next - spliced.length) : next, 0], spliced, false));\n\n      _this.extendedColumn.filter(function (q) {\n        return q.declarationIndex >= 0;\n      }).forEach(function (c, i) {\n        return c.orderIndex = i;\n      });\n\n      if (_this.props.onColumnReorder) {\n        var event_1 = {\n          target: _this,\n          columns: _this.columns,\n          nativeEvent: nativeEvent\n        };\n\n        _this.props.onColumnReorder.call(undefined, event_1);\n      }\n    };\n\n    _this.onResize = function (index, newWidth, oldWidth, nativeEvent, end) {\n      if (_this.props.onColumnResize) {\n        var sumWidth = _this.extendedColumn.filter(function (c) {\n          return c.children.length === 0;\n        }).reduce(function (acc, column) {\n          return acc += parseFloat(String(column.width));\n        }, 0);\n\n        var event_2 = {\n          columns: _this.columns,\n          totalWidth: sumWidth,\n          index: index,\n          nativeEvent: nativeEvent,\n          newWidth: newWidth,\n          oldWidth: oldWidth,\n          end: end,\n          target: _this\n        };\n\n        if (end) {\n          _this.prevColumns = undefined;\n        }\n\n        _this.props.onColumnResize.call(undefined, event_2);\n      }\n    };\n\n    _this.handleOnScroll = function (event) {\n      var scrollLeft = event.currentTarget.scrollLeft;\n      var scrollTop = event.currentTarget.scrollTop;\n      var _a = _this.props,\n          columnVirtualization = _a.columnVirtualization,\n          scrollable = _a.scrollable,\n          _b = _a.rowHeight,\n          rowHeight = _b === void 0 ? 0 : _b;\n      var minTopChange = rowHeight;\n      var minLeftChange = 0;\n      var shouldForceUpdate = false;\n\n      if (columnVirtualization && Math.abs(_this.wrapperScrollLeft - scrollLeft) > minLeftChange) {\n        _this.wrapperScrollLeft = scrollLeft;\n        shouldForceUpdate = true;\n      }\n\n      if (scrollable === 'virtual' && Math.abs(_this.wrapperScrollTop - scrollTop) > minTopChange) {\n        _this.wrapperScrollTop = scrollTop;\n        shouldForceUpdate = true;\n      }\n\n      if (shouldForceUpdate) {\n        _this.updateOnScroll = true;\n\n        _this.forceUpdate();\n      }\n    };\n\n    _this.calculateSizes = function (div) {\n      if (!div || _this.props.scrollable === 'none') {\n        return;\n      }\n\n      var children = Array.from(div.childNodes);\n      var table = children.find(function (n) {\n        return n.nodeName === 'TABLE';\n      });\n      var toolbar = _this.props.toolbar && children.find(function (n) {\n        return n.nodeType === 1 && n.classList.contains('k-grid-toolbar');\n      });\n      var toolbarHeight = 0;\n\n      if (toolbar) {\n        var boxSizing = toolbar.style.boxSizing;\n        toolbar.style.boxSizing = 'border-box';\n        toolbarHeight = parseFloat(String(window.getComputedStyle(toolbar).height)) || toolbar.offsetHeight;\n        toolbar.style.boxSizing = boxSizing;\n\n        if (!toolbar.getAttribute('style')) {\n          toolbar.removeAttribute('style');\n        }\n      }\n\n      _this.tbodyOffsetTop = table.tBodies[0].offsetTop;\n      setHeaderRowsTop(table, toolbarHeight);\n    };\n\n    _this.itemChange = function (event) {\n      var itemChange = _this.props.onItemChange;\n\n      if (event.field === _this.props.expandField) {\n        var expandChange = _this.props.onExpandChange;\n\n        if (expandChange) {\n          var expandEvent = __assign(__assign({}, _this.getArguments(event.syntheticEvent)), {\n            dataItem: event.dataItem,\n            level: event.level,\n            value: event.value\n          });\n\n          expandChange.call(undefined, expandEvent);\n        }\n\n        return;\n      }\n\n      if (itemChange) {\n        var itemChangeEvent = __assign(__assign({}, _this.getArguments(event.syntheticEvent)), {\n          dataItem: event.dataItem,\n          level: event.level,\n          field: event.field,\n          value: event.value\n        });\n\n        itemChange.call(undefined, itemChangeEvent);\n      }\n    };\n\n    _this.onHeaderSelectionChange = function (event) {\n      if (_this.props.onHeaderSelectionChange) {\n        var selectionEvent = {\n          field: event.field,\n          nativeEvent: event.syntheticEvent && event.syntheticEvent.nativeEvent,\n          syntheticEvent: event.syntheticEvent,\n          target: _this,\n          dataItems: _this.getLeafDataItems()\n        };\n\n        _this.props.onHeaderSelectionChange.call(undefined, selectionEvent);\n      }\n    };\n\n    _this.selectionRelease = function (event) {\n      if (_this.props.onSelectionChange) {\n        var selectionEvent = __assign({\n          syntheticEvent: undefined,\n          target: _this,\n          selectedField: _this.props.selectedField || '',\n          componentId: _this._treeListId,\n          dataItems: _this.getLeafDataItems(),\n          dataItem: null,\n          level: []\n        }, event);\n\n        _this.props.onSelectionChange.call(undefined, selectionEvent);\n      }\n    };\n\n    _this.sortChange = function (syntheticEvent, sort, field) {\n      _this.raiseDataEvent(_this.props.onSortChange, {\n        sort: sort,\n        field: field\n      }, syntheticEvent);\n    };\n\n    _this.filterChange = function (event) {\n      var filter = event.filter,\n          field = event.field;\n\n      _this.raiseDataEvent(_this.props.onFilterChange, {\n        filter: filter,\n        field: field\n      }, event.syntheticEvent);\n    };\n\n    _this.columnMenuFilterChange = function (syntheticEvent, filter, field) {\n      var onColumnMenuFilterChange = _this.props.onColumnMenuFilterChange;\n\n      if (!onColumnMenuFilterChange) {\n        return;\n      }\n\n      var event = {\n        syntheticEvent: syntheticEvent,\n        filter: filter,\n        field: field,\n        target: _this,\n        nativeEvent: syntheticEvent.nativeEvent\n      };\n      onColumnMenuFilterChange.call(undefined, event);\n    };\n\n    _this.expandChange = function (event, dataItem, level) {\n      var _a = _this.props,\n          expandField = _a.expandField,\n          onExpandChange = _a.onExpandChange;\n\n      if (expandField && onExpandChange) {\n        var expandEvent = __assign(__assign({}, _this.getArguments(event)), {\n          dataItem: dataItem,\n          level: level,\n          value: _this.expanded(dataItem)\n        });\n\n        onExpandChange.call(undefined, expandEvent);\n      }\n    };\n\n    _this.rowClick = function (e, item) {\n      if (_this.props.onRowClick && e.target.nodeName === 'TD') {\n        var rowClickEvent = __assign({\n          dataItem: item.dataItem,\n          level: item.level\n        }, _this.getArguments(e));\n\n        _this.props.onRowClick.call(undefined, rowClickEvent);\n      }\n    };\n\n    _this.rowDoubleClick = function (e, item) {\n      if (_this.props.onRowDoubleClick && e.target.nodeName === 'TD') {\n        var rowDoubleClickEvent = __assign({\n          dataItem: item.dataItem,\n          level: item.level\n        }, _this.getArguments(e));\n\n        _this.props.onRowDoubleClick.call(undefined, rowDoubleClickEvent);\n      }\n    };\n\n    _this.rowContextMenu = function (e, item) {\n      if (_this.props.onRowContextMenu && e.target.nodeName === 'TD') {\n        var rowContextMenuEvent = __assign({\n          dataItem: item.dataItem,\n          level: item.level\n        }, _this.getArguments(e));\n\n        _this.props.onRowContextMenu.call(undefined, rowContextMenuEvent);\n      }\n    };\n\n    _this.onPageChange = function (e) {\n      if (_this.props.onPageChange) {\n        var event_3 = __assign(__assign({}, _this.getArguments(e.syntheticEvent)), {\n          skip: e.skip,\n          take: e.take\n        });\n\n        _this.props.onPageChange.call(undefined, event_3);\n      }\n    };\n\n    _this.expandedSubItems = function (dataItem) {\n      var items = [];\n\n      if (_this.expanded(dataItem) && _this.hasChildren(dataItem)) {\n        items.push.apply(items, getNestedValue(_this.props.subItemsField, dataItem));\n      }\n\n      return items;\n    };\n\n    _this.getLeafDataItems = function () {\n      return _this.flatData.map(function (item) {\n        return item.dataItem;\n      });\n    };\n\n    _this.expanded = function (dataItem) {\n      return Boolean(getNestedValue(_this.props.expandField, dataItem));\n    };\n\n    _this.hasChildren = function (dataItem) {\n      return Boolean(getNestedValue(_this.props.subItemsField, dataItem));\n    };\n\n    validatePackage(packageMetadata);\n    _this.dragLogic = new CommonDragLogic(_this.columnReorder, noop, noop);\n    _this.columnResize = new ColumnResize(_this.onResize.bind(_this));\n    tableKeyboardNavigation.onConstructor({\n      navigatable: Boolean(props.navigatable),\n      contextStateRef: _this.contextStateRef,\n      navigationStateRef: _this.navigationStateRef\n    });\n    return _this;\n  }\n\n  Object.defineProperty(TreeList.prototype, \"document\", {\n    get: function () {\n      if (!canUseDOM) {\n        return;\n      } // useful only for user actions\n\n\n      return this.element && this.element.ownerDocument || document;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  TreeList.prototype.componentDidMount = function () {\n    this.calculateSizes(this.element);\n    tableKeyboardNavigation.onComponentDidMount({\n      scope: this.element || undefined,\n      contextStateRef: this.contextStateRef,\n      navigationStateRef: this.navigationStateRef\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  TreeList.prototype.getSnapshotBeforeUpdate = function () {\n    tableKeyboardNavigation.onGetSnapshotBeforeUpdate({\n      document: this.document,\n      contextStateRef: this.contextStateRef,\n      navigationStateRef: this.navigationStateRef\n    });\n    return null;\n  };\n  /**\n   * @hidden\n   */\n\n\n  TreeList.prototype.componentDidUpdate = function (prevProps) {\n    if (prevProps.columns !== this.props.columns) {\n      this.calculateSizes(this.element);\n    }\n\n    tableKeyboardNavigation.onComponentDidUpdate({\n      scope: this.element || undefined,\n      contextStateRef: this.contextStateRef,\n      navigationStateRef: this.navigationStateRef\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  TreeList.prototype.componentWillUnmount = function () {\n    this.columnResize.columns = [];\n    this.dragLogic.columns = [];\n    this.extendedColumn = [];\n    this.columnsMap = [];\n    this.prevData = [];\n    this.flattedData = [];\n    this.updateOnScroll = false;\n  };\n  /**\n   * @hidden\n   */\n\n\n  TreeList.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        _b = _a.columns,\n        columns = _b === void 0 ? [] : _b,\n        filterRow = _a.filterRow,\n        _c = _a.scrollable,\n        scrollable = _c === void 0 ? 'scrollable' : _c,\n        _d = _a.resizable,\n        resizable = _d === void 0 ? false : _d,\n        _e = _a.reorderable,\n        reorderable = _e === void 0 ? false : _e,\n        skip = _a.skip,\n        take = _a.take;\n    var filterable = columns.some(function (c) {\n      return Boolean(c.filter) || Boolean(c.filterCell);\n    }) || filterRow !== undefined;\n    var FilterRow = filterRow || TreeListFilterRow;\n    var idPrefix = navigationTools.getIdPrefix(this.navigationStateRef);\n\n    if (this.prevColumns !== columns) {\n      this.extendedColumn = readColumns(columns, {\n        prevId: 0,\n        idPrefix: idPrefix\n      });\n      this.columnsMap = mapColumns(this.extendedColumn);\n    }\n\n    this.prevColumns = this.props.columns;\n    var leafColumns = this.extendedColumn.filter(function (c) {\n      return c.children.length === 0;\n    });\n    this.columnResize.columns = this.extendedColumn;\n    this.columnResize.resizable = resizable;\n    this.dragLogic.columns = this.extendedColumn;\n    this.dragLogic.reorderable = reorderable;\n    this.dragLogic.groupable = false;\n    var header = React.createElement(Header, {\n      headerRow: React.createElement(HeaderRow, {\n        sort: this.props.sort,\n        sortable: this.props.sortable,\n        sortChange: this.sortChange,\n        selectionChange: this.onHeaderSelectionChange,\n        columns: this.extendedColumn,\n        columnsMap: this.columnsMap,\n        cellRender: this.props.headerCellRender,\n        columnResize: this.columnResize,\n        columnMenu: this.props.columnMenu,\n        columnMenuFilter: this.props.columnMenuFilter,\n        columnMenuFilterChange: this.columnMenuFilterChange,\n        pressHandler: this.dragLogic.pressHandler,\n        dragHandler: this.dragLogic.dragHandler,\n        releaseHandler: this.dragLogic.releaseHandler\n      }),\n      filterRow: filterable && React.createElement(FilterRow, {\n        columns: leafColumns,\n        filter: this.props.filter,\n        filterChange: this.filterChange,\n        sort: this.props.sort,\n        ariaRowIndex: this.columnsMap.length + 1\n      }) || undefined,\n      columnResize: this.columnResize\n    });\n    var wrapperStyles = this.props.style || {};\n\n    var _f = tableColumnsVirtualization({\n      enabled: this.props.columnVirtualization,\n      columns: leafColumns,\n      scrollLeft: this.wrapperScrollLeft,\n      tableViewPortWidth: parseFloat((wrapperStyles.width || '').toString())\n    }),\n        colSpans = _f.colSpans,\n        hiddenColumns = _f.hiddenColumns;\n\n    var dataRow = function (item, inEdit, rowId, isRowExpanded, rowDataIndex, selectedValue) {\n      return leafColumns.map(function (column, columnIndex) {\n        if (hiddenColumns[columnIndex]) {\n          return null;\n        }\n\n        var columnKey = column.id ? column.id : columnIndex;\n        var className = \"\".concat(column.className ? column.className + ' ' : '') + \"\".concat(column.locked ? 'k-grid-content-sticky' : '');\n        var cellProps = {\n          id: navigationTools.generateNavigatableId(\"\".concat(rowId, \"-\").concat(String(columnIndex)), idPrefix),\n          colSpan: colSpans[columnIndex],\n          dataItem: item.dataItem,\n          field: column.field,\n          format: column.format,\n          className: className || undefined,\n          render: _this.props.cellRender,\n          onChange: _this.itemChange,\n          selectionChange: _this.props.onSelectionChange ? function (e) {\n            _this.selectionChange({\n              event: e,\n              item: item,\n              columnIndex: columnIndex,\n              dataIndex: rowDataIndex\n            });\n          } : undefined,\n          level: item.level,\n          expandable: column.expandable,\n          expanded: isRowExpanded,\n          hasChildren: _this.hasChildren(item.dataItem),\n          onExpandChange: _this.expandChange,\n          colIndex: columnIndex,\n          ariaColumnIndex: column.ariaColumnIndex,\n          style: column.left !== undefined && {\n            left: column.left,\n            right: column.right,\n            borderRightWidth: column.rightBorder ? '1px' : ''\n          } || {},\n          isSelected: Array.isArray(selectedValue) && selectedValue.indexOf(columnIndex) > -1\n        };\n\n        if (inEdit && column.editCell) {\n          return React.createElement(column.editCell, __assign({\n            key: columnKey\n          }, cellProps, {\n            onChange: _this.itemChange\n          }));\n        }\n\n        if (column.cell) {\n          return React.createElement(column.cell, __assign({\n            key: columnKey\n          }, cellProps));\n        }\n\n        return React.createElement(TreeListCell, __assign({\n          key: columnKey\n        }, cellProps));\n      });\n    };\n\n    var flattedData = this.flatData;\n    var total = flattedData.length;\n\n    if (skip !== undefined && take !== undefined) {\n      flattedData = flattedData.slice(skip, skip + take);\n    }\n\n    if (scrollable === 'virtual') {\n      flattedData = tableRowsVirtualization({\n        rows: flattedData,\n        tableViewPortHeight: parseFloat((wrapperStyles.height || wrapperStyles.maxHeight || '').toString()),\n        scrollTop: this.wrapperScrollTop\n      });\n      this.updateOnScroll = false;\n    }\n\n    var levels = flattedData.map(function (i) {\n      return i.level;\n    });\n    var rowIndexStart = this.columnsMap.length + (filterable ? 1 : 0) + 1;\n    var body = flattedData.length > 0 && flattedData.map(function (item, rowIndex) {\n      var inEdit = getNestedValue(_this.props.editField, item.dataItem);\n      var dataItemKeyValue = _this.props.dataItemKey && getter(_this.props.dataItemKey)(item.dataItem);\n      var rowId = String(dataItemKeyValue ? dataItemKeyValue : item.level.join('.'));\n\n      var isRowExpanded = _this.expanded(item.dataItem);\n\n      var selectedValue = _this.props.selectedField ? getNestedValue(_this.props.selectedField, item.dataItem) : undefined;\n      var rowProps = {\n        key: rowId,\n        level: item.level,\n        levels: levels,\n        dataItem: item.dataItem,\n        selectedField: _this.props.selectedField,\n        rowHeight: scrollable === 'virtual' ? item.height : _this.props.rowHeight,\n        render: _this.props.rowRender,\n        onDrop: _this.onRowDrop,\n        onDrag: _this.onRowDrag,\n        onClick: function (e) {\n          return _this.rowClick(e, item);\n        },\n        onDoubleClick: function (e) {\n          return _this.rowDoubleClick(e, item);\n        },\n        onContextMenu: function (e) {\n          return _this.rowContextMenu(e, item);\n        },\n        isAltRow: rowIndex % 2 !== 0,\n        expanded: isRowExpanded,\n        rowIndex: rowIndex,\n        ariaRowIndex: rowIndexStart + rowIndex,\n        ariaSetSize: item.levelCount,\n        ariaPosInSet: item.level[item.level.length - 1] + 1,\n        isSelected: typeof selectedValue === 'boolean' && selectedValue\n      };\n      var EditRow = _this.props.editRow;\n      var Row = _this.props.row || TreeListRow;\n      var cells = dataRow(item, inEdit, rowId, isRowExpanded, rowIndex, selectedValue);\n      return inEdit && EditRow ? React.createElement(EditRow, __assign({}, rowProps), cells) : React.createElement(Row, __assign({}, rowProps), cells);\n    }) || React.createElement(\"tr\", {\n      className: \"k-grid-norecords\"\n    }, React.createElement(\"td\", {\n      colSpan: leafColumns.length\n    }, this.props.noRecords || React.createElement(TreeListNoRecords, null)));\n\n    var sorted = function (field) {\n      return _this.props.sort && _this.props.sort.some(function (descriptor) {\n        return descriptor.field === field;\n      });\n    };\n\n    var colGroups = React.createElement(\"colgroup\", {\n      ref: function (c) {\n        _this.columnResize.colGroupMain = c;\n      },\n      role: 'presentation'\n    }, leafColumns.map(function (column, index) {\n      return React.createElement(\"col\", {\n        key: index.toString(),\n        className: sorted(column.field) ? 'k-sorted' : undefined,\n        style: column.width !== undefined ? {\n          width: column.width\n        } : undefined\n      });\n    }));\n    var virtualScroll = this.props.columnVirtualization || this.props.scrollable === 'virtual';\n    var tableUserSelect = this.props.selectable && this.props.selectable.drag ? 'none' : undefined;\n    var tableProps = this.props.tableProps || {};\n    return React.createElement(TableKeyboardNavigationContext.Provider, {\n      value: this.contextStateRef.current\n    }, React.createElement(\"div\", __assign({\n      style: this.props.style,\n      className: classNames('k-widget k-grid', this.props.className, {\n        'k-treelist-scrollable': scrollable !== 'none'\n      }),\n      ref: function (e) {\n        return _this.element = e;\n      },\n      onScroll: virtualScroll ? this.handleOnScroll : undefined,\n      onKeyDown: this.onKeyDown,\n      onFocus: this.onFocus,\n      \"aria-rowcount\": total,\n      \"aria-colcount\": leafColumns.length,\n      role: 'treegrid'\n    }, tableKeyboardNavigationScopeAttributes), this.props.toolbar, React.createElement(TableSelection, {\n      selectable: this.props.selectable,\n      onRelease: this.selectionRelease\n    }, React.createElement(\"table\", __assign({}, tableProps, {\n      style: __assign(__assign({}, tableProps.style || {}), {\n        userSelect: tableUserSelect\n      }),\n      role: 'presentation'\n    }), colGroups, header, React.createElement(\"tbody\", __assign({}, tableKeyboardNavigationBodyAttributes, {\n      role: 'presentation'\n    }), body))), this.props.pager && React.createElement(this.props.pager, {\n      className: \"k-grid-pager\",\n      total: total,\n      skip: skip,\n      take: take,\n      onPageChange: this.onPageChange\n    }), reorderable && React.createElement(React.Fragment, null, React.createElement(DropClue, {\n      ref: this.dragLogic.refDropElementClue\n    }), React.createElement(DragClue, {\n      ref: this.dragLogic.refDragElementClue\n    }))));\n  };\n\n  Object.defineProperty(TreeList.prototype, \"columns\", {\n    get: function () {\n      var shuffledColumns = this.extendedColumn.filter(function (q) {\n        return q.declarationIndex >= 0 && q.parentIndex === -1;\n      });\n\n      var sanitize = function (columns) {\n        columns.sort(function (a, b) {\n          return a.declarationIndex - b.declarationIndex;\n        });\n        return columns.map(function (column) {\n          var declarationIndex = column.declarationIndex,\n              parentIndex = column.parentIndex,\n              depth = column.depth,\n              colSpan = column.colSpan,\n              rowSpan = column.rowSpan,\n              index = column.index,\n              kFirst = column.kFirst,\n              groupable = column.groupable,\n              children = column.children,\n              props = __rest(column, [\"declarationIndex\", \"parentIndex\", \"depth\", \"colSpan\", \"rowSpan\", \"index\", \"kFirst\", \"groupable\", \"children\"]);\n\n          return children.length ? __assign({\n            children: sanitize(children)\n          }, props) : props;\n        });\n      };\n\n      return sanitize(shuffledColumns);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(TreeList.prototype, \"flatData\", {\n    get: function () {\n      var _a = this.props,\n          _b = _a.data,\n          data = _b === void 0 ? [] : _b,\n          _c = _a.rowHeight,\n          rowHeight = _c === void 0 ? 0 : _c;\n      var offsetTop = 0;\n\n      var itemDataMap = function (_item) {\n        var result = {\n          height: rowHeight,\n          offsetTop: offsetTop\n        };\n        offsetTop += result.height;\n        return result;\n      };\n\n      var flattedData = this.updateOnScroll && this.prevData === data && this.tbodyOffsetTop > 0 && this.flattedData.length ? this.flattedData : flatData(data, this.expandedSubItems, itemDataMap);\n      this.prevData = data;\n      this.flattedData = flattedData;\n      return flattedData;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  TreeList.prototype.selectionChange = function (options) {\n    if (this.props.onSelectionChange) {\n      var event_4 = options.event,\n          item = options.item,\n          dataIndex = options.dataIndex,\n          columnIndex = options.columnIndex;\n\n      var _a = getSelectionOptions(this.props.selectable),\n          mode = _a.mode,\n          cell = _a.cell;\n\n      var selectionEvent = __assign(__assign({}, this.getArguments(event_4.syntheticEvent)), {\n        dataItem: item.dataItem,\n        level: item.level,\n        startColIndex: columnIndex,\n        endColIndex: columnIndex,\n        startRowIndex: dataIndex,\n        endRowIndex: dataIndex,\n        dataItems: this.getLeafDataItems(),\n        altKey: false,\n        ctrlKey: false,\n        shiftKey: false,\n        metaKey: false,\n        mode: mode,\n        cell: cell,\n        isDrag: false,\n        componentId: this._treeListId,\n        selectedField: this.props.selectedField || ''\n      });\n\n      this.props.onSelectionChange.call(undefined, selectionEvent);\n    }\n  };\n\n  TreeList.prototype.raiseDataEvent = function (handler, data, syntheticEvent) {\n    var dataStateChange = this.props.onDataStateChange;\n\n    if (handler) {\n      handler.call(undefined, __assign(__assign({}, this.getArguments(syntheticEvent)), data));\n    } else if (dataStateChange) {\n      var dataStateEvent = __assign(__assign({}, this.getArguments(syntheticEvent)), {\n        dataState: __assign(__assign({}, this.getDataState()), data)\n      });\n\n      dataStateChange.call(undefined, dataStateEvent);\n    }\n  };\n\n  TreeList.prototype.getDataState = function () {\n    return {\n      filter: this.props.filter,\n      sort: this.props.sort\n    };\n  };\n\n  TreeList.prototype.getArguments = function (syntheticEvent) {\n    return {\n      nativeEvent: syntheticEvent && syntheticEvent.nativeEvent,\n      syntheticEvent: syntheticEvent,\n      target: this\n    };\n  };\n  /**\n   * @hidden\n   */\n\n\n  TreeList.propTypes = {\n    data: PropTypes.array,\n    resizable: PropTypes.bool,\n    reorderable: PropTypes.bool,\n    sortable: PropTypes.oneOfType([PropTypes.bool, PropTypes.shape({\n      mode: PropTypes.oneOf(['single', 'multiple']),\n      allowUnsort: PropTypes.bool\n    })]),\n    onSortChange: PropTypes.func,\n    sort: PropTypes.array,\n    columns: PropTypes.arrayOf(PropTypes.object),\n    columnVirtualization: PropTypes.bool,\n    filter: PropTypes.array,\n    onFilterChange: PropTypes.func,\n    filterRow: PropTypes.any,\n    toolbar: PropTypes.any,\n    noRecords: PropTypes.any,\n    onExpandChange: PropTypes.func,\n    expandField: PropTypes.string,\n    subItemsField: PropTypes.string,\n    selectedField: PropTypes.string,\n    onSelectionChange: PropTypes.func,\n    onHeaderSelectionChange: PropTypes.func,\n    onRowClick: PropTypes.func,\n    onItemChange: PropTypes.func,\n    editField: PropTypes.string,\n    scrollable: PropTypes.oneOf(['none', 'scrollable', 'virtual']),\n    rowHeight: PropTypes.number,\n    style: PropTypes.object,\n    tableProps: PropTypes.object,\n    pager: PropTypes.any,\n    skip: PropTypes.number,\n    take: PropTypes.number,\n    onPageChange: PropTypes.func,\n    onDataStateChange: PropTypes.func,\n    onColumnResize: PropTypes.func,\n    onColumnReorder: PropTypes.func,\n    dataItemKey: PropTypes.string,\n    navigatable: PropTypes.bool\n  };\n  /** @hidden */\n\n  TreeList.contextType = TableKeyboardNavigationContext;\n  return TreeList;\n}(React.Component);\n\nexport { TreeList };","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/node_modules/@progress/kendo-react-treelist/dist/es/TreeList.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","pack","l","ar","slice","concat","React","PropTypes","classNames","noop","getter","guid","canUseDOM","Header","HeaderRow","FilterRow","TreeListFilterRow","ColumnResize","CommonDragLogic","DragClue","DropClue","tableColumnsVirtualization","readColumns","mapColumns","tableKeyboardNavigation","TableKeyboardNavigationContext","tableKeyboardNavigationScopeAttributes","tableKeyboardNavigationTools","navigationTools","tableKeyboardNavigationBodyAttributes","getSelectionOptions","TableSelection","getNestedValue","setHeaderRowsTop","tableRowsVirtualization","flatData","TreeListCell","TreeListNoRecords","TreeListRow","validatePackage","packageMetadata","TreeList","_super","props","_this","wrapperScrollLeft","wrapperScrollTop","updateOnScroll","tbodyOffsetTop","prevData","prevColumns","undefined","flattedData","extendedColumn","columnsMap","element","_treeListId","contextStateRef","current","navigationStateRef","scrollIntoView","options","_a","rowIndex","_b","scrollable","_c","rowHeight","scroll","selectedRow","querySelector","offsetTop","onKeyDown","event","selectable","mode","cell","ev","dataItems","getLeafDataItems","componentId","selectedField","getArguments","onFocus","onRowDrag","target","onRowDrop","columnReorder","prev","next","nativeEvent","depth","end","index","spliced","splice","filter","q","declarationIndex","forEach","c","orderIndex","onColumnReorder","event_1","columns","onResize","newWidth","oldWidth","onColumnResize","sumWidth","children","reduce","acc","column","parseFloat","width","event_2","totalWidth","handleOnScroll","scrollLeft","currentTarget","scrollTop","columnVirtualization","minTopChange","minLeftChange","shouldForceUpdate","Math","abs","forceUpdate","calculateSizes","div","childNodes","table","find","nodeName","toolbar","nodeType","classList","contains","toolbarHeight","boxSizing","style","window","getComputedStyle","height","offsetHeight","getAttribute","removeAttribute","tBodies","itemChange","onItemChange","field","expandField","expandChange","onExpandChange","expandEvent","syntheticEvent","dataItem","level","value","itemChangeEvent","onHeaderSelectionChange","selectionEvent","selectionRelease","onSelectionChange","sortChange","sort","raiseDataEvent","onSortChange","filterChange","onFilterChange","columnMenuFilterChange","onColumnMenuFilterChange","expanded","rowClick","item","onRowClick","rowClickEvent","rowDoubleClick","onRowDoubleClick","rowDoubleClickEvent","rowContextMenu","onRowContextMenu","rowContextMenuEvent","onPageChange","event_3","skip","take","expandedSubItems","items","hasChildren","push","subItemsField","map","Boolean","dragLogic","columnResize","bind","onConstructor","navigatable","defineProperty","get","ownerDocument","document","enumerable","configurable","componentDidMount","onComponentDidMount","scope","getSnapshotBeforeUpdate","onGetSnapshotBeforeUpdate","componentDidUpdate","prevProps","onComponentDidUpdate","componentWillUnmount","render","filterRow","_d","resizable","_e","reorderable","filterable","some","filterCell","idPrefix","getIdPrefix","prevId","leafColumns","groupable","header","createElement","headerRow","sortable","selectionChange","cellRender","headerCellRender","columnMenu","columnMenuFilter","pressHandler","dragHandler","releaseHandler","ariaRowIndex","wrapperStyles","_f","enabled","tableViewPortWidth","toString","colSpans","hiddenColumns","dataRow","inEdit","rowId","isRowExpanded","rowDataIndex","selectedValue","columnIndex","columnKey","id","className","locked","cellProps","generateNavigatableId","colSpan","format","onChange","dataIndex","expandable","colIndex","ariaColumnIndex","left","right","borderRightWidth","rightBorder","isSelected","isArray","editCell","key","total","rows","tableViewPortHeight","maxHeight","levels","rowIndexStart","body","editField","dataItemKeyValue","dataItemKey","join","rowProps","rowRender","onDrop","onDrag","onClick","onDoubleClick","onContextMenu","isAltRow","ariaSetSize","levelCount","ariaPosInSet","EditRow","editRow","Row","row","cells","noRecords","sorted","descriptor","colGroups","ref","colGroupMain","role","virtualScroll","tableUserSelect","drag","tableProps","Provider","onScroll","onRelease","userSelect","pager","Fragment","refDropElementClue","refDragElementClue","shuffledColumns","parentIndex","sanitize","a","rowSpan","kFirst","data","itemDataMap","_item","result","event_4","startColIndex","endColIndex","startRowIndex","endRowIndex","altKey","ctrlKey","shiftKey","metaKey","isDrag","handler","dataStateChange","onDataStateChange","dataStateEvent","dataState","getDataState","propTypes","array","bool","oneOfType","shape","oneOf","allowUnsort","func","arrayOf","object","any","string","number","contextType","Component"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, noop, getter, guid, canUseDOM } from '@progress/kendo-react-common';\nimport { Header, HeaderRow, FilterRow as TreeListFilterRow, ColumnResize, CommonDragLogic, DragClue, DropClue, tableColumnsVirtualization, readColumns, mapColumns, tableKeyboardNavigation, TableKeyboardNavigationContext, tableKeyboardNavigationScopeAttributes, tableKeyboardNavigationTools as navigationTools, tableKeyboardNavigationBodyAttributes, getSelectionOptions, TableSelection } from '@progress/kendo-react-data-tools';\nimport { getNestedValue, setHeaderRowsTop, tableRowsVirtualization } from './utils/index';\nimport { flatData } from './utils/data-operations';\nimport { TreeListCell } from './cells/TreeListCell';\nimport { TreeListNoRecords } from './TreeListNoRecords';\nimport { TreeListRow } from './rows/TreeListRow';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from './package-metadata';\n/**\n * Represents the [KendoReact TreeList component]({% slug getstarted_treelist %}).\n */\nvar TreeList = /** @class */ (function (_super) {\n    __extends(TreeList, _super);\n    function TreeList(props) {\n        var _this = _super.call(this, props) || this;\n        _this.wrapperScrollLeft = 0;\n        _this.wrapperScrollTop = 0;\n        _this.updateOnScroll = false;\n        _this.tbodyOffsetTop = 0;\n        _this.prevData = [];\n        _this.prevColumns = undefined;\n        _this.flattedData = [];\n        _this.extendedColumn = [];\n        _this.columnsMap = [];\n        _this.element = null;\n        _this._treeListId = guid();\n        _this.contextStateRef = { current: undefined };\n        _this.navigationStateRef = { current: undefined };\n        /**\n         * Method to allow the scroll to be set to a specific row index.\n         *\n         * @param options - Object, containing the rowIndex to which is going to be scrolled.\n         */\n        _this.scrollIntoView = function (options) {\n            if (!_this.element) {\n                return;\n            }\n            var _a = options.rowIndex, rowIndex = _a === void 0 ? 0 : _a;\n            var _b = _this.props, scrollable = _b.scrollable, _c = _b.rowHeight, rowHeight = _c === void 0 ? 0 : _c;\n            if (scrollable === 'virtual' || rowHeight) {\n                _this.element.scroll(0, (rowIndex - 1) * rowHeight);\n            }\n            else {\n                var selectedRow = _this.element.querySelector(\"tbody > tr:nth-child(\".concat(rowIndex, \")\"));\n                if (selectedRow) {\n                    var offsetTop = selectedRow.offsetTop - _this.tbodyOffsetTop;\n                    _this.element.scroll(0, offsetTop);\n                }\n            }\n        };\n        _this.onKeyDown = function (event) {\n            tableKeyboardNavigation.onKeyDown(event, {\n                contextStateRef: _this.contextStateRef,\n                navigationStateRef: _this.navigationStateRef\n            });\n            if (_this.props.onKeyDown) {\n                var _a = getSelectionOptions(_this.props.selectable), mode = _a.mode, cell = _a.cell;\n                var ev = __assign({ dataItems: _this.getLeafDataItems(), mode: mode, cell: cell, componentId: _this._treeListId, selectedField: _this.props.selectedField }, _this.getArguments(event));\n                _this.props.onKeyDown.call(undefined, ev);\n            }\n        };\n        _this.onFocus = function (event) {\n            tableKeyboardNavigation.onFocus(event, {\n                contextStateRef: _this.contextStateRef\n            });\n        };\n        _this.onRowDrag = function (event) {\n            if (_this.props.onRowDrag) {\n                _this.props.onRowDrag.call(undefined, __assign(__assign({}, event), { target: _this }));\n            }\n        };\n        _this.onRowDrop = function (event) {\n            if (_this.props.onRowDrop) {\n                _this.props.onRowDrop.call(undefined, __assign(__assign({}, event), { target: _this }));\n            }\n        };\n        _this.columnReorder = function (prev, next, nativeEvent) {\n            var _a;\n            var depth = _this.extendedColumn[prev].depth;\n            var end = function (index) {\n                do {\n                    index++;\n                } while (index < _this.extendedColumn.length && _this.extendedColumn[index].depth > depth);\n                return index;\n            };\n            var spliced = _this.extendedColumn.splice(prev, end(prev) - prev);\n            (_a = _this.extendedColumn).splice.apply(_a, __spreadArray([prev < next ? end(next - spliced.length) : next, 0], spliced, false));\n            _this.extendedColumn.filter(function (q) { return q.declarationIndex >= 0; }).forEach(function (c, i) { return c.orderIndex = i; });\n            if (_this.props.onColumnReorder) {\n                var event_1 = {\n                    target: _this,\n                    columns: _this.columns,\n                    nativeEvent: nativeEvent\n                };\n                _this.props.onColumnReorder.call(undefined, event_1);\n            }\n        };\n        _this.onResize = function (index, newWidth, oldWidth, nativeEvent, end) {\n            if (_this.props.onColumnResize) {\n                var sumWidth = _this.extendedColumn.filter(function (c) { return c.children.length === 0; }).\n                    reduce(function (acc, column) { return acc += parseFloat(String(column.width)); }, 0);\n                var event_2 = {\n                    columns: _this.columns,\n                    totalWidth: sumWidth,\n                    index: index,\n                    nativeEvent: nativeEvent,\n                    newWidth: newWidth,\n                    oldWidth: oldWidth,\n                    end: end,\n                    target: _this\n                };\n                if (end) {\n                    _this.prevColumns = undefined;\n                }\n                _this.props.onColumnResize.call(undefined, event_2);\n            }\n        };\n        _this.handleOnScroll = function (event) {\n            var scrollLeft = event.currentTarget.scrollLeft;\n            var scrollTop = event.currentTarget.scrollTop;\n            var _a = _this.props, columnVirtualization = _a.columnVirtualization, scrollable = _a.scrollable, _b = _a.rowHeight, rowHeight = _b === void 0 ? 0 : _b;\n            var minTopChange = rowHeight;\n            var minLeftChange = 0;\n            var shouldForceUpdate = false;\n            if (columnVirtualization && Math.abs(_this.wrapperScrollLeft - scrollLeft) > minLeftChange) {\n                _this.wrapperScrollLeft = scrollLeft;\n                shouldForceUpdate = true;\n            }\n            if (scrollable === 'virtual' && Math.abs(_this.wrapperScrollTop - scrollTop) > minTopChange) {\n                _this.wrapperScrollTop = scrollTop;\n                shouldForceUpdate = true;\n            }\n            if (shouldForceUpdate) {\n                _this.updateOnScroll = true;\n                _this.forceUpdate();\n            }\n        };\n        _this.calculateSizes = function (div) {\n            if (!div || _this.props.scrollable === 'none') {\n                return;\n            }\n            var children = Array.from(div.childNodes);\n            var table = children.find(function (n) { return n.nodeName === 'TABLE'; });\n            var toolbar = _this.props.toolbar &&\n                children.find(function (n) {\n                    return n.nodeType === 1 && n.classList.contains('k-grid-toolbar');\n                });\n            var toolbarHeight = 0;\n            if (toolbar) {\n                var boxSizing = toolbar.style.boxSizing;\n                toolbar.style.boxSizing = 'border-box';\n                toolbarHeight = parseFloat(String(window.getComputedStyle(toolbar).height)) ||\n                    toolbar.offsetHeight;\n                toolbar.style.boxSizing = boxSizing;\n                if (!toolbar.getAttribute('style')) {\n                    toolbar.removeAttribute('style');\n                }\n            }\n            _this.tbodyOffsetTop = table.tBodies[0].offsetTop;\n            setHeaderRowsTop(table, toolbarHeight);\n        };\n        _this.itemChange = function (event) {\n            var itemChange = _this.props.onItemChange;\n            if (event.field === _this.props.expandField) {\n                var expandChange = _this.props.onExpandChange;\n                if (expandChange) {\n                    var expandEvent = __assign(__assign({}, _this.getArguments(event.syntheticEvent)), { dataItem: event.dataItem, level: event.level, value: event.value });\n                    expandChange.call(undefined, expandEvent);\n                }\n                return;\n            }\n            if (itemChange) {\n                var itemChangeEvent = __assign(__assign({}, _this.getArguments(event.syntheticEvent)), { dataItem: event.dataItem, level: event.level, field: event.field, value: event.value });\n                itemChange.call(undefined, itemChangeEvent);\n            }\n        };\n        _this.onHeaderSelectionChange = function (event) {\n            if (_this.props.onHeaderSelectionChange) {\n                var selectionEvent = {\n                    field: event.field,\n                    nativeEvent: event.syntheticEvent && event.syntheticEvent.nativeEvent,\n                    syntheticEvent: event.syntheticEvent,\n                    target: _this,\n                    dataItems: _this.getLeafDataItems()\n                };\n                _this.props.onHeaderSelectionChange.call(undefined, selectionEvent);\n            }\n        };\n        _this.selectionRelease = function (event) {\n            if (_this.props.onSelectionChange) {\n                var selectionEvent = __assign({ syntheticEvent: undefined, target: _this, selectedField: _this.props.selectedField || '', componentId: _this._treeListId, dataItems: _this.getLeafDataItems(), dataItem: null, level: [] }, event);\n                _this.props.onSelectionChange.call(undefined, selectionEvent);\n            }\n        };\n        _this.sortChange = function (syntheticEvent, sort, field) {\n            _this.raiseDataEvent(_this.props.onSortChange, { sort: sort, field: field }, syntheticEvent);\n        };\n        _this.filterChange = function (event) {\n            var filter = event.filter, field = event.field;\n            _this.raiseDataEvent(_this.props.onFilterChange, { filter: filter, field: field }, event.syntheticEvent);\n        };\n        _this.columnMenuFilterChange = function (syntheticEvent, filter, field) {\n            var onColumnMenuFilterChange = _this.props.onColumnMenuFilterChange;\n            if (!onColumnMenuFilterChange) {\n                return;\n            }\n            var event = {\n                syntheticEvent: syntheticEvent,\n                filter: filter,\n                field: field,\n                target: _this,\n                nativeEvent: syntheticEvent.nativeEvent\n            };\n            onColumnMenuFilterChange.call(undefined, event);\n        };\n        _this.expandChange = function (event, dataItem, level) {\n            var _a = _this.props, expandField = _a.expandField, onExpandChange = _a.onExpandChange;\n            if (expandField && onExpandChange) {\n                var expandEvent = __assign(__assign({}, _this.getArguments(event)), { dataItem: dataItem, level: level, value: _this.expanded(dataItem) });\n                onExpandChange.call(undefined, expandEvent);\n            }\n        };\n        _this.rowClick = function (e, item) {\n            if (_this.props.onRowClick && e.target.nodeName === 'TD') {\n                var rowClickEvent = __assign({ dataItem: item.dataItem, level: item.level }, _this.getArguments(e));\n                _this.props.onRowClick.call(undefined, rowClickEvent);\n            }\n        };\n        _this.rowDoubleClick = function (e, item) {\n            if (_this.props.onRowDoubleClick && e.target.nodeName === 'TD') {\n                var rowDoubleClickEvent = __assign({ dataItem: item.dataItem, level: item.level }, _this.getArguments(e));\n                _this.props.onRowDoubleClick.call(undefined, rowDoubleClickEvent);\n            }\n        };\n        _this.rowContextMenu = function (e, item) {\n            if (_this.props.onRowContextMenu && e.target.nodeName === 'TD') {\n                var rowContextMenuEvent = __assign({ dataItem: item.dataItem, level: item.level }, _this.getArguments(e));\n                _this.props.onRowContextMenu.call(undefined, rowContextMenuEvent);\n            }\n        };\n        _this.onPageChange = function (e) {\n            if (_this.props.onPageChange) {\n                var event_3 = __assign(__assign({}, _this.getArguments(e.syntheticEvent)), { skip: e.skip, take: e.take });\n                _this.props.onPageChange.call(undefined, event_3);\n            }\n        };\n        _this.expandedSubItems = function (dataItem) {\n            var items = [];\n            if (_this.expanded(dataItem) && _this.hasChildren(dataItem)) {\n                items.push.apply(items, getNestedValue(_this.props.subItemsField, dataItem));\n            }\n            return items;\n        };\n        _this.getLeafDataItems = function () {\n            return _this.flatData.map(function (item) { return item.dataItem; });\n        };\n        _this.expanded = function (dataItem) { return Boolean(getNestedValue(_this.props.expandField, dataItem)); };\n        _this.hasChildren = function (dataItem) { return Boolean(getNestedValue(_this.props.subItemsField, dataItem)); };\n        validatePackage(packageMetadata);\n        _this.dragLogic = new CommonDragLogic(_this.columnReorder, noop, noop);\n        _this.columnResize = new ColumnResize(_this.onResize.bind(_this));\n        tableKeyboardNavigation.onConstructor({\n            navigatable: Boolean(props.navigatable),\n            contextStateRef: _this.contextStateRef,\n            navigationStateRef: _this.navigationStateRef\n        });\n        return _this;\n    }\n    Object.defineProperty(TreeList.prototype, \"document\", {\n        get: function () {\n            if (!canUseDOM) {\n                return;\n            }\n            // useful only for user actions\n            return (this.element && this.element.ownerDocument) || document;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    TreeList.prototype.componentDidMount = function () {\n        this.calculateSizes(this.element);\n        tableKeyboardNavigation.onComponentDidMount({\n            scope: this.element || undefined,\n            contextStateRef: this.contextStateRef,\n            navigationStateRef: this.navigationStateRef\n        });\n    };\n    /**\n     * @hidden\n     */\n    TreeList.prototype.getSnapshotBeforeUpdate = function () {\n        tableKeyboardNavigation.onGetSnapshotBeforeUpdate({\n            document: this.document,\n            contextStateRef: this.contextStateRef,\n            navigationStateRef: this.navigationStateRef\n        });\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    TreeList.prototype.componentDidUpdate = function (prevProps) {\n        if (prevProps.columns !== this.props.columns) {\n            this.calculateSizes(this.element);\n        }\n        tableKeyboardNavigation.onComponentDidUpdate({\n            scope: this.element || undefined,\n            contextStateRef: this.contextStateRef,\n            navigationStateRef: this.navigationStateRef\n        });\n    };\n    /**\n     * @hidden\n     */\n    TreeList.prototype.componentWillUnmount = function () {\n        this.columnResize.columns = [];\n        this.dragLogic.columns = [];\n        this.extendedColumn = [];\n        this.columnsMap = [];\n        this.prevData = [];\n        this.flattedData = [];\n        this.updateOnScroll = false;\n    };\n    /**\n     * @hidden\n     */\n    TreeList.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, _b = _a.columns, columns = _b === void 0 ? [] : _b, filterRow = _a.filterRow, _c = _a.scrollable, scrollable = _c === void 0 ? 'scrollable' : _c, _d = _a.resizable, resizable = _d === void 0 ? false : _d, _e = _a.reorderable, reorderable = _e === void 0 ? false : _e, skip = _a.skip, take = _a.take;\n        var filterable = columns.some(function (c) { return Boolean(c.filter) || Boolean(c.filterCell); }) || filterRow !== undefined;\n        var FilterRow = filterRow || TreeListFilterRow;\n        var idPrefix = navigationTools.getIdPrefix(this.navigationStateRef);\n        if (this.prevColumns !== columns) {\n            this.extendedColumn = readColumns(columns, { prevId: 0, idPrefix: idPrefix });\n            this.columnsMap = mapColumns(this.extendedColumn);\n        }\n        this.prevColumns = this.props.columns;\n        var leafColumns = this.extendedColumn.filter(function (c) { return c.children.length === 0; });\n        this.columnResize.columns = this.extendedColumn;\n        this.columnResize.resizable = resizable;\n        this.dragLogic.columns = this.extendedColumn;\n        this.dragLogic.reorderable = reorderable;\n        this.dragLogic.groupable = false;\n        var header = (React.createElement(Header, { headerRow: React.createElement(HeaderRow, { sort: this.props.sort, sortable: this.props.sortable, sortChange: this.sortChange, selectionChange: this.onHeaderSelectionChange, columns: this.extendedColumn, columnsMap: this.columnsMap, cellRender: this.props.headerCellRender, columnResize: this.columnResize, columnMenu: this.props.columnMenu, columnMenuFilter: this.props.columnMenuFilter, columnMenuFilterChange: this.columnMenuFilterChange, pressHandler: this.dragLogic.pressHandler, dragHandler: this.dragLogic.dragHandler, releaseHandler: this.dragLogic.releaseHandler }), filterRow: filterable && React.createElement(FilterRow, { columns: leafColumns, filter: this.props.filter, filterChange: this.filterChange, sort: this.props.sort, ariaRowIndex: this.columnsMap.length + 1 }) || undefined, columnResize: this.columnResize }));\n        var wrapperStyles = this.props.style || {};\n        var _f = tableColumnsVirtualization({\n            enabled: this.props.columnVirtualization,\n            columns: leafColumns,\n            scrollLeft: this.wrapperScrollLeft,\n            tableViewPortWidth: parseFloat((wrapperStyles.width || '').toString())\n        }), colSpans = _f.colSpans, hiddenColumns = _f.hiddenColumns;\n        var dataRow = function (item, inEdit, rowId, isRowExpanded, rowDataIndex, selectedValue) { return leafColumns.map(function (column, columnIndex) {\n            if (hiddenColumns[columnIndex]) {\n                return null;\n            }\n            var columnKey = column.id ? column.id : columnIndex;\n            var className = \"\".concat(column.className ? column.className + ' ' : '')\n                + \"\".concat(column.locked ? 'k-grid-content-sticky' : '');\n            var cellProps = {\n                id: navigationTools.generateNavigatableId(\"\".concat(rowId, \"-\").concat(String(columnIndex)), idPrefix),\n                colSpan: colSpans[columnIndex],\n                dataItem: item.dataItem,\n                field: column.field,\n                format: column.format,\n                className: className || undefined,\n                render: _this.props.cellRender,\n                onChange: _this.itemChange,\n                selectionChange: (_this.props.onSelectionChange) ? (function (e) {\n                    _this.selectionChange({ event: e, item: item, columnIndex: columnIndex, dataIndex: rowDataIndex });\n                }) : undefined,\n                level: item.level,\n                expandable: column.expandable,\n                expanded: isRowExpanded,\n                hasChildren: _this.hasChildren(item.dataItem),\n                onExpandChange: _this.expandChange,\n                colIndex: columnIndex,\n                ariaColumnIndex: column.ariaColumnIndex,\n                style: (column.left !== undefined) && {\n                    left: column.left,\n                    right: column.right,\n                    borderRightWidth: column.rightBorder ? '1px' : ''\n                } || {},\n                isSelected: Array.isArray(selectedValue) && selectedValue.indexOf(columnIndex) > -1\n            };\n            if (inEdit && column.editCell) {\n                return (React.createElement(column.editCell, __assign({ key: columnKey }, cellProps, { onChange: _this.itemChange })));\n            }\n            if (column.cell) {\n                return React.createElement(column.cell, __assign({ key: columnKey }, cellProps));\n            }\n            return React.createElement(TreeListCell, __assign({ key: columnKey }, cellProps));\n        }); };\n        var flattedData = this.flatData;\n        var total = flattedData.length;\n        if (skip !== undefined && take !== undefined) {\n            flattedData = flattedData.slice(skip, skip + take);\n        }\n        if (scrollable === 'virtual') {\n            flattedData = tableRowsVirtualization({\n                rows: flattedData,\n                tableViewPortHeight: parseFloat((wrapperStyles.height || wrapperStyles.maxHeight || '').toString()),\n                scrollTop: this.wrapperScrollTop\n            });\n            this.updateOnScroll = false;\n        }\n        var levels = flattedData.map(function (i) { return i.level; });\n        var rowIndexStart = this.columnsMap.length + (filterable ? 1 : 0) + 1;\n        var body = flattedData.length > 0 && flattedData.map(function (item, rowIndex) {\n            var inEdit = getNestedValue(_this.props.editField, item.dataItem);\n            var dataItemKeyValue = _this.props.dataItemKey && getter(_this.props.dataItemKey)(item.dataItem);\n            var rowId = String(dataItemKeyValue ? dataItemKeyValue : item.level.join('.'));\n            var isRowExpanded = _this.expanded(item.dataItem);\n            var selectedValue = _this.props.selectedField ? getNestedValue(_this.props.selectedField, item.dataItem) : undefined;\n            var rowProps = {\n                key: rowId,\n                level: item.level,\n                levels: levels,\n                dataItem: item.dataItem,\n                selectedField: _this.props.selectedField,\n                rowHeight: scrollable === 'virtual' ? item.height : _this.props.rowHeight,\n                render: _this.props.rowRender,\n                onDrop: _this.onRowDrop,\n                onDrag: _this.onRowDrag,\n                onClick: function (e) { return _this.rowClick(e, item); },\n                onDoubleClick: function (e) { return _this.rowDoubleClick(e, item); },\n                onContextMenu: function (e) { return _this.rowContextMenu(e, item); },\n                isAltRow: rowIndex % 2 !== 0,\n                expanded: isRowExpanded,\n                rowIndex: rowIndex,\n                ariaRowIndex: rowIndexStart + rowIndex,\n                ariaSetSize: item.levelCount,\n                ariaPosInSet: item.level[item.level.length - 1] + 1,\n                isSelected: typeof selectedValue === 'boolean' && selectedValue\n            };\n            var EditRow = _this.props.editRow;\n            var Row = _this.props.row || TreeListRow;\n            var cells = dataRow(item, inEdit, rowId, isRowExpanded, rowIndex, selectedValue);\n            return inEdit && EditRow ?\n                React.createElement(EditRow, __assign({}, rowProps), cells) :\n                React.createElement(Row, __assign({}, rowProps), cells);\n        }) || (React.createElement(\"tr\", { className: \"k-grid-norecords\" },\n            React.createElement(\"td\", { colSpan: leafColumns.length }, this.props.noRecords || React.createElement(TreeListNoRecords, null))));\n        var sorted = function (field) {\n            return _this.props.sort && _this.props.sort.some(function (descriptor) { return descriptor.field === field; });\n        };\n        var colGroups = (React.createElement(\"colgroup\", { ref: function (c) { _this.columnResize.colGroupMain = c; }, role: 'presentation' }, leafColumns.map(function (column, index) { return (React.createElement(\"col\", { key: index.toString(), className: sorted(column.field) ? 'k-sorted' : undefined, style: column.width !== undefined ? { width: column.width } : undefined })); })));\n        var virtualScroll = this.props.columnVirtualization || this.props.scrollable === 'virtual';\n        var tableUserSelect = this.props.selectable && this.props.selectable.drag ? 'none' : undefined;\n        var tableProps = (this.props.tableProps || {});\n        return (React.createElement(TableKeyboardNavigationContext.Provider, { value: this.contextStateRef.current },\n            React.createElement(\"div\", __assign({ style: this.props.style, className: classNames('k-widget k-grid', this.props.className, { 'k-treelist-scrollable': scrollable !== 'none' }), ref: function (e) { return _this.element = e; }, onScroll: virtualScroll ? this.handleOnScroll : undefined, onKeyDown: this.onKeyDown, onFocus: this.onFocus, \"aria-rowcount\": total, \"aria-colcount\": leafColumns.length, role: 'treegrid' }, tableKeyboardNavigationScopeAttributes),\n                this.props.toolbar,\n                React.createElement(TableSelection, { selectable: this.props.selectable, onRelease: this.selectionRelease },\n                    React.createElement(\"table\", __assign({}, tableProps, { style: __assign(__assign({}, (tableProps.style || {})), { userSelect: tableUserSelect }), role: 'presentation' }),\n                        colGroups,\n                        header,\n                        React.createElement(\"tbody\", __assign({}, tableKeyboardNavigationBodyAttributes, { role: 'presentation' }), body))),\n                this.props.pager && (React.createElement(this.props.pager, { className: \"k-grid-pager\", total: total, skip: skip, take: take, onPageChange: this.onPageChange })),\n                reorderable && (React.createElement(React.Fragment, null,\n                    React.createElement(DropClue, { ref: this.dragLogic.refDropElementClue }),\n                    React.createElement(DragClue, { ref: this.dragLogic.refDragElementClue }))))));\n    };\n    Object.defineProperty(TreeList.prototype, \"columns\", {\n        get: function () {\n            var shuffledColumns = this.extendedColumn.filter(function (q) { return q.declarationIndex >= 0 && q.parentIndex === -1; });\n            var sanitize = function (columns) {\n                columns.sort(function (a, b) { return a.declarationIndex - b.declarationIndex; });\n                return columns.map(function (column) {\n                    var declarationIndex = column.declarationIndex, parentIndex = column.parentIndex, depth = column.depth, colSpan = column.colSpan, rowSpan = column.rowSpan, index = column.index, kFirst = column.kFirst, groupable = column.groupable, children = column.children, props = __rest(column, [\"declarationIndex\", \"parentIndex\", \"depth\", \"colSpan\", \"rowSpan\", \"index\", \"kFirst\", \"groupable\", \"children\"]);\n                    return children.length ? __assign({ children: sanitize(children) }, props) : props;\n                });\n            };\n            return sanitize(shuffledColumns);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TreeList.prototype, \"flatData\", {\n        get: function () {\n            var _a = this.props, _b = _a.data, data = _b === void 0 ? [] : _b, _c = _a.rowHeight, rowHeight = _c === void 0 ? 0 : _c;\n            var offsetTop = 0;\n            var itemDataMap = function (_item) {\n                var result = { height: rowHeight, offsetTop: offsetTop };\n                offsetTop += result.height;\n                return result;\n            };\n            var flattedData = (this.updateOnScroll &&\n                this.prevData === data &&\n                this.tbodyOffsetTop > 0 &&\n                this.flattedData.length) ?\n                this.flattedData :\n                flatData(data, this.expandedSubItems, itemDataMap);\n            this.prevData = data;\n            this.flattedData = flattedData;\n            return flattedData;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TreeList.prototype.selectionChange = function (options) {\n        if (this.props.onSelectionChange) {\n            var event_4 = options.event, item = options.item, dataIndex = options.dataIndex, columnIndex = options.columnIndex;\n            var _a = getSelectionOptions(this.props.selectable), mode = _a.mode, cell = _a.cell;\n            var selectionEvent = __assign(__assign({}, this.getArguments(event_4.syntheticEvent)), { dataItem: item.dataItem, level: item.level, startColIndex: columnIndex, endColIndex: columnIndex, startRowIndex: dataIndex, endRowIndex: dataIndex, dataItems: this.getLeafDataItems(), altKey: false, ctrlKey: false, shiftKey: false, metaKey: false, mode: mode, cell: cell, isDrag: false, componentId: this._treeListId, selectedField: this.props.selectedField || '' });\n            this.props.onSelectionChange.call(undefined, selectionEvent);\n        }\n    };\n    TreeList.prototype.raiseDataEvent = function (handler, data, syntheticEvent) {\n        var dataStateChange = this.props.onDataStateChange;\n        if (handler) {\n            handler.call(undefined, __assign(__assign({}, this.getArguments(syntheticEvent)), data));\n        }\n        else if (dataStateChange) {\n            var dataStateEvent = __assign(__assign({}, this.getArguments(syntheticEvent)), { dataState: __assign(__assign({}, this.getDataState()), data) });\n            dataStateChange.call(undefined, dataStateEvent);\n        }\n    };\n    TreeList.prototype.getDataState = function () {\n        return {\n            filter: this.props.filter,\n            sort: this.props.sort\n        };\n    };\n    TreeList.prototype.getArguments = function (syntheticEvent) {\n        return {\n            nativeEvent: syntheticEvent && syntheticEvent.nativeEvent,\n            syntheticEvent: syntheticEvent,\n            target: this\n        };\n    };\n    /**\n     * @hidden\n     */\n    TreeList.propTypes = {\n        data: PropTypes.array,\n        resizable: PropTypes.bool,\n        reorderable: PropTypes.bool,\n        sortable: PropTypes.oneOfType([\n            PropTypes.bool,\n            PropTypes.shape({\n                mode: PropTypes.oneOf(['single', 'multiple']),\n                allowUnsort: PropTypes.bool\n            })\n        ]),\n        onSortChange: PropTypes.func,\n        sort: PropTypes.array,\n        columns: PropTypes.arrayOf(PropTypes.object),\n        columnVirtualization: PropTypes.bool,\n        filter: PropTypes.array,\n        onFilterChange: PropTypes.func,\n        filterRow: PropTypes.any,\n        toolbar: PropTypes.any,\n        noRecords: PropTypes.any,\n        onExpandChange: PropTypes.func,\n        expandField: PropTypes.string,\n        subItemsField: PropTypes.string,\n        selectedField: PropTypes.string,\n        onSelectionChange: PropTypes.func,\n        onHeaderSelectionChange: PropTypes.func,\n        onRowClick: PropTypes.func,\n        onItemChange: PropTypes.func,\n        editField: PropTypes.string,\n        scrollable: PropTypes.oneOf(['none', 'scrollable', 'virtual']),\n        rowHeight: PropTypes.number,\n        style: PropTypes.object,\n        tableProps: PropTypes.object,\n        pager: PropTypes.any,\n        skip: PropTypes.number,\n        take: PropTypes.number,\n        onPageChange: PropTypes.func,\n        onDataStateChange: PropTypes.func,\n        onColumnResize: PropTypes.func,\n        onColumnReorder: PropTypes.func,\n        dataItemKey: PropTypes.string,\n        navigatable: PropTypes.bool\n    };\n    /** @hidden */\n    TreeList.contextType = TableKeyboardNavigationContext;\n    return TreeList;\n}(React.Component));\nexport { TreeList };\n"]},"metadata":{},"sourceType":"module"}