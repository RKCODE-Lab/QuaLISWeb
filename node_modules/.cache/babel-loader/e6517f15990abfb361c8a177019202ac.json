{"ast":null,"code":"import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import ListMaster from'../../../components/list-master/list-master.component';import{connect}from'react-redux';import{callService,crudMaster,selectProductHistoryDetail,filterColumnData,getProductMaHolderHistory}from'../../../actions';import{Col,Row,Card,FormGroup,FormLabel}from'react-bootstrap';import{ProductList,ContentPanel,MediaLabel}from'../product.styled';import{FormattedMessage,injectIntl}from'react-intl';import{getControlMap}from'../../../components/CommonScript';import ProductHistoryTabs from'./ProductHistoryTabs';import{transactionStatus}from'../../../components/Enumeration';// import ReactTooltip from 'react-tooltip';\nvar ProductHistory=/*#__PURE__*/function(_Component){_inherits(ProductHistory,_Component);var _super=_createSuper(ProductHistory);function ProductHistory(props){var _this;_classCallCheck(this,ProductHistory);_this=_super.call(this,props);_this.handlePageChange=function(e){_this.setState({skip:e.skip,take:e.take});};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputParam={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:\"producthistory\",methodUrl:\"ProductHistory\",displayName:\"IDS_PRODUCTHISTORY\",userInfo:_this.props.Login.userInfo};_this.props.callService(inputParam);};_this.state={error:\"\",ProductHistory:[],operation:\"\",selectedProductHistory:undefined,ProductManufacturerHistory:[],ProductMAholderHistory:[],userRoleControlRights:[],controlMap:new Map()};_this.searchRef=React.createRef();return _this;}_createClass(ProductHistory,[{key:\"render\",value:function render(){var _this2=this;var userStatusCSS=\"\";if(this.props.Login.masterData.selectedProductHistory&&this.props.Login.masterData.selectedProductHistory.ntransactionstatus===transactionStatus.DRAFT){userStatusCSS=\"outline-secondary\";}else if(this.props.Login.masterData.selectedProductHistory&&this.props.Login.masterData.selectedProductHistory.ntransactionstatus===transactionStatus.COMPLETED){userStatusCSS=\"outline-success\";}else if(this.props.Login.masterData.selectedProductHistory&&this.props.Login.masterData.selectedProductHistory.ntransactionstatus===transactionStatus.CORRECTION){userStatusCSS=\"outline-correction\";}else{userStatusCSS=\"outline-Final\";}var filterParam={inputListName:\"ProductHistory\",selectedObject:\"selectedProductHistory\",primaryKeyField:\"nproducthistorycode\",fetchUrl:\"producthistory/getProductManufByProductID\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,searchFieldList:[\"sproductname\",\"sproductcatname\",\"stransdisplaystatus\",\"sofficialproductname\",\"sbillto\",\"suserrolename\",\"sfirstname\",\"scontactusername\",\"schargebandname\"]};var addProductHistory=\"\";return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster,{filterColumnData:this.props.filterColumnData,formatMessage:this.props.intl.formatMessage,screenName:this.props.intl.formatMessage({id:\"IDS_PRODUCTHISTORY\"}),masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.ProductHistory,masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,getMasterDetail:function getMasterDetail(_ProductHistory){return _this2.props.selectProductHistoryDetail(_ProductHistory,_this2.props.Login.masterData,_this2.props.Login.userInfo);},selectedMaster:this.props.Login.masterData.selectedProductHistory,primaryKeyField:\"nproducthistorycode\",mainField:\"sproductname\",firstField:\"sproductcatname\",secondField:\"stransdisplaystatus\",isIDSField:\"Yes\",isVisible:\"yes\",userRoleControlRights:this.state.userRoleControlRights,addId:addProductHistory,filterParam:filterParam,searchRef:this.searchRef,reloadData:this.reloadData,handlePageChange:this.handlePageChange//  openModal = {()=>this.setState({screenName:\"Add Product\", operation:\"create\", isOpen:true})}\n,openModal:\"\",hidePaging:false})),/*#__PURE__*/React.createElement(Col,{md:\"8\"},/*#__PURE__*/React.createElement(ProductList,{className:\"panel-main-content\"},this.props.Login.masterData.ProductHistory&&this.props.Login.masterData.ProductHistory.length>0&&this.props.Login.masterData.selectedProductHistory?/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\",\"data-tip\":this.props.Login.masterData.selectedProductHistory.sproductname//  data-for=\"tooltip_list_wrap\"\n},this.props.Login.masterData.selectedProductHistory.sproductname),/*#__PURE__*/React.createElement(ContentPanel,{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\",\"data-tip\":this.props.Login.masterData.selectedProductHistory.sproductcatname// data-for=\"tooltip_list_wrap\"\n},this.props.Login.masterData.selectedProductHistory.sproductcatname,/*#__PURE__*/React.createElement(MediaLabel,{className:\"btn btn-outlined  \".concat(userStatusCSS,\" btn-sm ml-3\")},/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.Login.masterData.selectedProductHistory.stransdisplaystatus,message:this.props.Login.masterData.selectedProductHistory.stransdisplaystatus}))))),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_USERROLE\",message:\"Userrole\"})),/*#__PURE__*/React.createElement(MediaLabel,{className:\"readonly-text font-weight-normal\"},this.props.Login.masterData.selectedProductHistory.suserrolename))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_USERNAME\",message:\"User Name\"})),/*#__PURE__*/React.createElement(MediaLabel,{className:\"readonly-text font-weight-normal\"},this.props.Login.masterData.selectedProductHistory.sfirstname))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_CONTACTUSER\",message:\"Contact User\"})),/*#__PURE__*/React.createElement(MediaLabel,{className:\"readonly-text font-weight-normal\"},this.props.Login.masterData.selectedProductHistory.scontactusername))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_CHARGEBAND\",message:\"Charge Band\"})),/*#__PURE__*/React.createElement(MediaLabel,{className:\"readonly-text font-weight-normal\"},this.props.Login.masterData.selectedProductHistory.schargebandname))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_BILLTO\",message:\"Bill To\"})),/*#__PURE__*/React.createElement(MediaLabel,{className:\"readonly-text font-weight-normal\"},this.props.Login.masterData.selectedProductHistory.sbillto))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_EDQMPRODUCTOFFICIALNAME\",message:\"Edqm Product Official Name\"})),/*#__PURE__*/React.createElement(MediaLabel,{className:\"readonly-text font-weight-normal\"},this.props.Login.masterData.selectedProductHistory.sofficialproductname))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_PRODUCTVERSION\",message:\"Product Version\"})),/*#__PURE__*/React.createElement(MediaLabel,{className:\"readonly-text font-weight-normal\"},this.props.Login.masterData.selectedProductHistory.nproductversioncode===0?\"-\":this.props.Login.masterData.selectedProductHistory.nproductversioncode)))),/*#__PURE__*/React.createElement(ProductHistoryTabs,{userInfo:this.props.Login.userInfo,inputParam:this.props.Login.inputParam,controlMap:this.state.controlMap,getProductMaHolderHistory:this.props.getProductMaHolderHistory,masterData:this.props.Login.masterData,settings:this.props.Login.settings// masterData={{\n//     \"ProductManufacturerHistory\": this.props.Login.masterData.ProductManufacturerHistory || [],\n//     \"ProductMAholderHistory\": this.props.Login.masterData.ProductMAholderHistory || [],\n//     \"SelectedProductManufHistory\":this.props.Login.masterData.SelectedProductManufHistory\n// }}\n}))):\"\")))));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap});}}}]);return ProductHistory;}(Component);var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,selectProductHistoryDetail:selectProductHistoryDetail,filterColumnData:filterColumnData,getProductMaHolderHistory:getProductMaHolderHistory})(injectIntl(ProductHistory));","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/product/ProductHistory/ProductHistory.jsx"],"names":["React","Component","ListMaster","connect","callService","crudMaster","selectProductHistoryDetail","filterColumnData","getProductMaHolderHistory","Col","Row","Card","FormGroup","FormLabel","ProductList","ContentPanel","MediaLabel","FormattedMessage","injectIntl","getControlMap","ProductHistoryTabs","transactionStatus","ProductHistory","props","handlePageChange","e","setState","skip","take","reloadData","searchRef","current","value","inputParam","inputData","Login","userInfo","classUrl","methodUrl","displayName","state","error","operation","selectedProductHistory","undefined","ProductManufacturerHistory","ProductMAholderHistory","userRoleControlRights","controlMap","Map","createRef","userStatusCSS","masterData","ntransactionstatus","DRAFT","COMPLETED","CORRECTION","filterParam","inputListName","selectedObject","primaryKeyField","fetchUrl","fecthInputObject","userinfo","searchFieldList","addProductHistory","intl","formatMessage","id","searchedData","length","sproductname","sproductcatname","stransdisplaystatus","suserrolename","sfirstname","scontactusername","schargebandname","sbillto","sofficialproductname","nproductversioncode","settings","previousProps","nformcode","Object","values","map","item","push","ncontrolcode","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ListMaster from '../../../components/list-master/list-master.component';\r\nimport { connect } from 'react-redux';\r\nimport { callService, crudMaster, selectProductHistoryDetail, filterColumnData, getProductMaHolderHistory } from '../../../actions'\r\nimport { Col, Row, Card, FormGroup, FormLabel } from 'react-bootstrap';\r\n\r\nimport { ProductList, ContentPanel, MediaLabel } from '../product.styled';\r\n\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\n\r\nimport { getControlMap } from '../../../components/CommonScript';\r\nimport ProductHistoryTabs from './ProductHistoryTabs';\r\nimport { transactionStatus } from '../../../components/Enumeration';\r\n// import ReactTooltip from 'react-tooltip';\r\n\r\n\r\n\r\n\r\nclass ProductHistory extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            error: \"\",\r\n            ProductHistory: [],\r\n            operation: \"\",\r\n            selectedProductHistory: undefined,\r\n            ProductManufacturerHistory: [],\r\n            ProductMAholderHistory: [],\r\n            userRoleControlRights: [],\r\n            controlMap: new Map()\r\n\r\n        };\r\n        this.searchRef = React.createRef();\r\n    }\r\n    handlePageChange = e => {\r\n        this.setState({\r\n            skip: e.skip,\r\n            take: e.take\r\n        });\r\n    };\r\n\r\n\r\n    render() {\r\n        let userStatusCSS = \"\";\r\n        if (this.props.Login.masterData.selectedProductHistory && this.props.Login.masterData.selectedProductHistory.ntransactionstatus === transactionStatus.DRAFT) {\r\n            userStatusCSS = \"outline-secondary\";\r\n        }\r\n        else if (this.props.Login.masterData.selectedProductHistory && this.props.Login.masterData.selectedProductHistory.ntransactionstatus === transactionStatus.COMPLETED) {\r\n            userStatusCSS = \"outline-success\";\r\n        }\r\n        else if (this.props.Login.masterData.selectedProductHistory && this.props.Login.masterData.selectedProductHistory.ntransactionstatus === transactionStatus.CORRECTION) {\r\n            userStatusCSS = \"outline-correction\";\r\n        } else {\r\n            userStatusCSS = \"outline-Final\";\r\n        }\r\n        const filterParam = {\r\n            inputListName: \"ProductHistory\", selectedObject: \"selectedProductHistory\", primaryKeyField: \"nproducthistorycode\",\r\n            fetchUrl: \"producthistory/getProductManufByProductID\", fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData,\r\n            searchFieldList: [\"sproductname\", \"sproductcatname\", \"stransdisplaystatus\",\r\n                \"sofficialproductname\", \"sbillto\", \"suserrolename\", \"sfirstname\",\r\n                \"scontactusername\", \"schargebandname\"]\r\n        };\r\n        const addProductHistory = \"\"\r\n        return (\r\n            <>\r\n                <div className=\"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\">\r\n                    <Row noGutters={true}>\r\n                        <Col md={4}>\r\n                            <ListMaster filterColumnData={this.props.filterColumnData}\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                screenName={this.props.intl.formatMessage({ id: \"IDS_PRODUCTHISTORY\" })}\r\n                                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.ProductHistory}\r\n                                masterData={this.props.Login.masterData}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                getMasterDetail={(ProductHistory) => this.props.selectProductHistoryDetail(ProductHistory, this.props.Login.masterData, this.props.Login.userInfo)}\r\n                                selectedMaster={this.props.Login.masterData.selectedProductHistory}\r\n                                primaryKeyField=\"nproducthistorycode\"\r\n                                mainField=\"sproductname\"\r\n                                firstField=\"sproductcatname\"\r\n                                secondField=\"stransdisplaystatus\"\r\n                                isIDSField=\"Yes\"\r\n                                isVisible=\"yes\"\r\n                                userRoleControlRights={this.state.userRoleControlRights}\r\n                                addId={addProductHistory}\r\n                                filterParam={filterParam}\r\n                                searchRef={this.searchRef}\r\n                                reloadData={this.reloadData}\r\n                                handlePageChange={this.handlePageChange}\r\n                                //  openModal = {()=>this.setState({screenName:\"Add Product\", operation:\"create\", isOpen:true})}\r\n                                openModal={\"\"}\r\n                                hidePaging={false}\r\n                            />\r\n                        </Col>\r\n                        <Col md='8'>\r\n                            {/* <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" /> */}\r\n                            <ProductList className=\"panel-main-content\">\r\n                                {this.props.Login.masterData.ProductHistory && this.props.Login.masterData.ProductHistory.length > 0 && this.props.Login.masterData.selectedProductHistory ?\r\n                                    <Card className=\"border-0\">\r\n                                        <Card.Header>\r\n                                            <Card.Title className=\"product-title-main\" data-tip={this.props.Login.masterData.selectedProductHistory.sproductname}\r\n                                              //  data-for=\"tooltip_list_wrap\"\r\n                                                >{this.props.Login.masterData.selectedProductHistory.sproductname}</Card.Title>\r\n                                            <ContentPanel className=\"d-flex product-category\">\r\n                                                <h2 className=\"product-title-sub flex-grow-1\" data-tip={this.props.Login.masterData.selectedProductHistory.sproductcatname}\r\n                                                   // data-for=\"tooltip_list_wrap\"\r\n                                                    >{this.props.Login.masterData.selectedProductHistory.sproductcatname}\r\n                                                    <MediaLabel className={`btn btn-outlined  ${userStatusCSS} btn-sm ml-3`}>\r\n                                                        <FormattedMessage id={this.props.Login.masterData.selectedProductHistory.stransdisplaystatus} message={this.props.Login.masterData.selectedProductHistory.stransdisplaystatus} />\r\n                                                    </MediaLabel>\r\n                                                </h2>\r\n                                            </ContentPanel>\r\n                                        </Card.Header>\r\n                                        <Card.Body>\r\n                                            <Row>\r\n                                                <Col md='4'>\r\n                                                    <FormGroup>\r\n                                                        <FormLabel><FormattedMessage id=\"IDS_USERROLE\" message=\"Userrole\" /></FormLabel>\r\n                                                        <MediaLabel className=\"readonly-text font-weight-normal\">{this.props.Login.masterData.selectedProductHistory.suserrolename}</MediaLabel>\r\n                                                    </FormGroup>\r\n                                                </Col>\r\n                                                <Col md='4'>\r\n                                                    <FormGroup>\r\n                                                        <FormLabel><FormattedMessage id=\"IDS_USERNAME\" message=\"User Name\" /></FormLabel>\r\n                                                        <MediaLabel className=\"readonly-text font-weight-normal\">{this.props.Login.masterData.selectedProductHistory.sfirstname}</MediaLabel>\r\n                                                    </FormGroup>\r\n                                                </Col>\r\n                                                <Col md='4'>\r\n                                                    <FormGroup>\r\n                                                        <FormLabel><FormattedMessage id=\"IDS_CONTACTUSER\" message=\"Contact User\" /></FormLabel>\r\n                                                        <MediaLabel className=\"readonly-text font-weight-normal\">{this.props.Login.masterData.selectedProductHistory.scontactusername}</MediaLabel>\r\n                                                    </FormGroup>\r\n                                                </Col>\r\n                                                <Col md='4'>\r\n                                                    <FormGroup>\r\n                                                        <FormLabel><FormattedMessage id=\"IDS_CHARGEBAND\" message=\"Charge Band\" /></FormLabel>\r\n                                                        <MediaLabel className=\"readonly-text font-weight-normal\">{this.props.Login.masterData.selectedProductHistory.schargebandname}</MediaLabel>\r\n                                                    </FormGroup>\r\n                                                </Col>\r\n                                                <Col md='4'>\r\n                                                    <FormGroup>\r\n                                                        <FormLabel><FormattedMessage id=\"IDS_BILLTO\" message=\"Bill To\" /></FormLabel>\r\n                                                        <MediaLabel className=\"readonly-text font-weight-normal\">{this.props.Login.masterData.selectedProductHistory.sbillto}</MediaLabel>\r\n                                                    </FormGroup>\r\n                                                </Col>\r\n                                                <Col md='4'>\r\n                                                    <FormGroup>\r\n                                                        <FormLabel><FormattedMessage id=\"IDS_EDQMPRODUCTOFFICIALNAME\" message=\"Edqm Product Official Name\" /></FormLabel>\r\n                                                        <MediaLabel className=\"readonly-text font-weight-normal\">{this.props.Login.masterData.selectedProductHistory.sofficialproductname}</MediaLabel>\r\n                                                    </FormGroup>\r\n                                                </Col>\r\n                                                <Col md='4'>\r\n                                                    <FormGroup>\r\n                                                        <FormLabel><FormattedMessage id=\"IDS_PRODUCTVERSION\" message=\"Product Version\" /></FormLabel>\r\n                                                        <MediaLabel className=\"readonly-text font-weight-normal\">\r\n                                                            {this.props.Login.masterData.selectedProductHistory.nproductversioncode === 0 ? \"-\" :\r\n                                                                this.props.Login.masterData.selectedProductHistory.nproductversioncode}</MediaLabel>\r\n                                                    </FormGroup>\r\n                                                </Col>\r\n                                            </Row>\r\n                                            <ProductHistoryTabs\r\n                                                userInfo={this.props.Login.userInfo}\r\n                                                inputParam={this.props.Login.inputParam}\r\n                                                controlMap={this.state.controlMap}\r\n                                                getProductMaHolderHistory={this.props.getProductMaHolderHistory}\r\n                                                masterData={this.props.Login.masterData}\r\n                                                settings = {this.props.Login.settings}\r\n                                            // masterData={{\r\n                                            //     \"ProductManufacturerHistory\": this.props.Login.masterData.ProductManufacturerHistory || [],\r\n                                            //     \"ProductMAholderHistory\": this.props.Login.masterData.ProductMAholderHistory || [],\r\n                                            //     \"SelectedProductManufHistory\":this.props.Login.masterData.SelectedProductManufHistory\r\n                                            // }}\r\n                                            />\r\n                                        </Card.Body>\r\n                                    </Card> : \"\"}\r\n                            </ProductList>\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: \"producthistory\",\r\n            methodUrl: \"ProductHistory\",\r\n            displayName: \"IDS_PRODUCTHISTORY\",\r\n            userInfo: this.props.Login.userInfo\r\n        };\r\n        this.props.callService(inputParam);\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n            const userRoleControlRights = [];\r\n            if (this.props.Login.userRoleControlRights) {\r\n                this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                    userRoleControlRights.push(item.ncontrolcode))\r\n            }\r\n            const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n            this.setState({ userRoleControlRights, controlMap });\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\nexport default connect(mapStateToProps, { callService, crudMaster, selectProductHistoryDetail, filterColumnData, getProductMaHolderHistory })(injectIntl(ProductHistory));"]},"metadata":{},"sourceType":"module"}