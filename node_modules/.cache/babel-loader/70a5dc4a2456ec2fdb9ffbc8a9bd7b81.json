{"ast":null,"code":"import rsapi from '../rsapi';\nimport { DEFAULT_RETURN } from './LoginTypes';\nimport { sortData, constructOptionList } from '../components/CommonScript';\nimport Axios from 'axios';\nimport { initRequest } from './LoginAction';\nimport { intl } from '../components/App';\nimport { toast } from 'react-toastify';\nimport { transactionStatus, attachmentType } from '../components/Enumeration';\nexport function getManfacturerCombo(screenName, operation, primaryKeyName, masterData, userInfo, ncontrolCode) {\n  return function (dispatch) {\n    let urlArray = [];\n\n    if (operation === \"create\") {\n      // const EDQMManufacturer = rsapi.post(\"/edqmmanufacturer/getEDQMManufacturer\", { \"userinfo\": userInfo });\n      const CountryService = rsapi.post(\"country/getCountry\", {\n        \"userinfo\": userInfo\n      });\n      urlArray = [CountryService];\n    } else {\n      //const EDQMManufacturer = rsapi.post(\"/edqmmanufacturer/getEDQMManufacturer\", { \"userinfo\": userInfo });\n      const ManufacturerByID = rsapi.post(\"/manufacturer/getManufacturerById\", {\n        [primaryKeyName]: masterData.selectedManufacturer[primaryKeyName],\n        \"userinfo\": userInfo\n      });\n      urlArray = [//EDQMManufacturer,\n      ManufacturerByID];\n    }\n\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      let countryCode = [];\n      let countryList = {};\n\n      if (operation === \"create\") {\n        const countryMap = constructOptionList(response[0].data || [], \"ncountrycode\", \"scountryname\", undefined, undefined, true);\n        countryList = countryMap.get(\"OptionList\");\n      } //let edqmManufacturer = [];\n\n\n      let selectedRecord = {}; // const edqmManufacturerMap = constructOptionList(response[0].data || [], \"nofficialmanufcode\",\n      // \"sofficialmanufname\", undefined, undefined, false);\n      // const edqmManufacturerList = edqmManufacturerMap.get(\"OptionList\");\n\n      if (operation === \"update\") {\n        selectedRecord = response[0].data; // selectedRecord[\"nofficialmanufcode\"] = {\n        //     label: response[1].data[\"sofficialmanufname\"],\n        //     value: response[1].data[\"nofficialmanufcode\"]\n        // };\n        // edqmManufacturer.push({\n        //     label: response[1].data[\"sofficialmanufname\"],\n        //     value: response[1].data[\"nofficialmanufcode\"]\n        // });\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          //edqmManufacturerList,\n          Country: countryList,\n          countryCode: countryCode,\n          isOpen: true,\n          selectedRecord: operation === \"update\" ? selectedRecord : {\n            \"ntransactionstatus\": 1\n          },\n          //edqmManufacturer: edqmManufacturer ,\n          operation: operation,\n          screenName: screenName,\n          openModal: true,\n          ncontrolCode: ncontrolCode,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport function selectCheckBoxManufacturer(Manufacturer, userInfo, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/manufacturer/getManufacturerWithSiteAndContactDetails\", {\n      'userinfo': userInfo,\n      \"nmanufcode\": Manufacturer.nmanufcode\n    }).then(response => {\n      masterData = { ...masterData,\n        ...response.data\n      };\n      sortData(masterData); // console.log(\" Select Checked : \", masterData);\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          selectedId: null\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport function getContactInfo(SiteDetails, masterData) {\n  return function (dispatch) {\n    let Map = {};\n    Map[\"nmanufcode\"] = parseInt(SiteDetails.siteAddress.nmanufcode);\n    Map[\"nmanufsitecode\"] = parseInt(SiteDetails.siteAddress.nmanufsitecode);\n    Map[\"userinfo\"] = SiteDetails.userInfo;\n    dispatch(initRequest(true));\n    rsapi.post(\"/manufacturer/getContactManufacturerBySite\", Map).then(response => {\n      // dispatch({type: DEFAULT_RETURN, payload:{\n      //     ManufacturerContactInfo :response.data,\n      //     SiteCode: SiteDetails.nmanufsitecode, loading:false\n      // }});   \n      masterData = { ...SiteDetails.masterData,\n        ManufacturerContactInfo: response.data,\n        selectedSite: SiteDetails.siteAddress,\n        SiteCode: SiteDetails.siteAddress.nmanufsitecode\n      };\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          dataState: undefined\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      }); // console.log(error);\n    });\n  };\n}\nexport function getSiteManufacturerLoadEdit(screenName, operation, manufCode, manufSiteCode, ncontrolCode, userInfo) {\n  return function (dispatch) {\n    let urlArray = [];\n    let selectedRecord = {};\n\n    if (operation === \"create\") {\n      const Country = rsapi.post(\"/country/getCountry\", {\n        \"userinfo\": userInfo\n      });\n      urlArray = [Country];\n    } else {\n      const Country = rsapi.post(\"/country/getCountry\", {\n        \"userinfo\": userInfo\n      });\n      const ManufacturerSiteByID = rsapi.post(\"/manufacturer/getSiteManufacturerById\", {\n        \"nmanufcode\": manufCode,\n        \"nmanufsitecode\": manufSiteCode,\n        \"userinfo\": userInfo\n      });\n      urlArray = [Country, ManufacturerSiteByID];\n    }\n\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      let countryCode = [];\n      const countryMap = constructOptionList(response[0].data || [], \"ncountrycode\", \"scountryname\", undefined, undefined, true);\n      const countryList = countryMap.get(\"OptionList\");\n\n      if (operation === \"update\") {\n        selectedRecord = response[1].data;\n        selectedRecord[\"ncountrycode\"] = {\n          label: response[1].data[\"scountryname\"],\n          value: response[1].data[\"ncountrycode\"]\n        }; // countryCode.push({\n        //     label: response[1].data[\"scountryname\"],\n        //     value: response[1].data[\"ncountrycode\"]\n        // });\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Country: countryList,\n          openChildModal: true,\n          operation,\n          selectedRecord: operation === \"update\" ? selectedRecord : {\n            \"ntransactionstatus\": transactionStatus.ACTIVE,\n            \"ndefaultstatus\": transactionStatus.NO\n          },\n          countryCode: countryCode,\n          ncontrolCode,\n          screenName: \"IDS_MANUFACTURESITE\",\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport function getContactManufacturerLoadEdit(fetchRecord) {\n  return function (dispatch) {\n    let urlArray = [];\n    let selectedId = null;\n    const ManufacturerContactByID = rsapi.post(\"/manufacturer/getContactManufacturerById\", {\n      \"nmanufcode\": fetchRecord.editRow.nmanufcode,\n      \"nmanufsitecode\": fetchRecord.editRow.nmanufsitecode,\n      \"nmanufcontactcode\": fetchRecord.editRow.nmanufcontactcode,\n      \"userinfo\": fetchRecord.userInfo\n    });\n    urlArray = [ManufacturerContactByID];\n    selectedId = fetchRecord.editRow.nmanufcontactcode;\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openChildModal: true,\n          operation: fetchRecord.operation,\n          selectedRecord: fetchRecord.operation === \"update\" ? response[0].data : undefined,\n          defaultSite: fetchRecord.editRow.nmanufsitecode,\n          ncontrolCode: fetchRecord.ncontrolCode,\n          screenName: \"IDS_SITECONTACT\",\n          loading: false,\n          selectedId\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n} // export function filterColumnDataManufacturer(filterValue, masterData, userInfo) {\n//     return function (dispatch) {  \n//         let manuFCode = 0;   \n//         let searchedData = undefined;\n//         if (filterValue === \"\"){\n//             manuFCode = masterData[\"Manufacturer\"][0].nmanufcode;\n//         }\n//         else{\n//             // if (filterValue.length > 2)\n//             // {\n//                 searchedData = searchData(filterValue, masterData[\"Manufacturer\"]);\n//                 if (searchedData.length > 0){\n//                     manuFCode = searchedData[0].nmanufcode; \n//                 }\n//             // }\n//         }\n//         if (manuFCode !== 0){\n//             dispatch(initRequest(true));\n//             return rsapi.post(\"manufacturer/getManufacturerWithSiteAndContactDetails\", {userInfo, nmanufcode:manuFCode})\n//             .then(response=>{         \n//                         masterData[\"ManufacturerSiteAddress\"] = response.data[\"ManufacturerSiteAddress\"];\n//                         masterData[\"ManufacturerContactInfo\"] = response.data[\"ManufacturerContactInfo\"];\n//                         masterData[\"selectedManufacturer\"] = response.data[\"selectedManufacturer\"];\n//                         masterData[\"SiteCode\"] = response.data[\"SiteCode\"];\n//                         masterData[\"searchedData\"] = searchedData;\n//                         dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false}});       \n//             })\n//             .catch(error=>{\n//                 dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\n//                 if (error.response.status === 500){\n//                     toast.error(error.message);\n//                 } \n//                 else{               \n//                     toast.warn(error.response.data);\n//                 }  \n//             }) \n//         } \n//         else{        \n//             masterData[\"ManufacturerSiteAddress\"] = [];\n//             masterData[\"ManufacturerContactInfo\"] = undefined;\n//             masterData[\"selectedManufacturer\"] = [];\n//             masterData[\"searchedData\"] = [];\n//             masterData[\"SiteCode\"]  = 0;\n//             dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false}}); \n//         }           \n//     }   \n// } \n\nexport const addManufacturerFile = inputParam => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\n      userinfo: inputParam.userInfo\n    })];\n\n    if (inputParam.operation === \"update\") {\n      urlArray.push(rsapi.post(\"/manufacturer/editManufacturerFile\", {\n        userinfo: inputParam.userInfo,\n        manufacturerfile: inputParam.selectedRecord\n      }));\n    }\n\n    Axios.all(urlArray).then(response => {\n      const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\n      const linkmaster = linkMap.get(\"OptionList\");\n      let selectedRecord = {};\n      const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\n      let disabled = false;\n      let editObject = {};\n\n      if (inputParam.operation === \"update\") {\n        editObject = response[1].data;\n        let nlinkcode = {};\n        let link = {};\n\n        if (editObject.nattachmenttypecode === attachmentType.LINK) {\n          nlinkcode = {\n            \"label\": editObject.slinkname,\n            \"value\": editObject.nlinkcode\n          };\n          link = {\n            slinkfilename: editObject.sfilename,\n            slinkdescription: editObject.sdescription,\n            nlinkdefaultstatus: editObject.ndefaultstatus,\n            sfilesize: '',\n            nfilesize: 0,\n            ndefaultstatus: 4,\n            sfilename: ''\n          };\n        } else {\n          nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\"; //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\n\n          link = {\n            slinkfilename: '',\n            slinkdescription: '',\n            nlinkdefaultstatus: 4,\n            sfilesize: editObject.sfilesize,\n            nfilesize: editObject.nfilesize,\n            ndefaultstatus: editObject.ndefaultstatus,\n            sfilename: editObject.sfilename,\n            sdescription: editObject.sdescription //ALPD-899 Fix\n\n          };\n        }\n\n        selectedRecord = { ...link,\n          nmanufacturerfilecode: editObject.nmanufacturerfilecode,\n          nattachmenttypecode: editObject.nattachmenttypecode,\n          // sdescription:editObject.sdescription,    //ALPD-899 Fix\n          nlinkcode // disabled: true\n\n        };\n      } else {\n        selectedRecord = {\n          nattachmenttypecode: response[0].data.AttachmentType.length > 0 ? response[0].data.AttachmentType[0].nattachmenttypecode : attachmentType.FTP,\n          nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\",\n          //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\n          disabled\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          [inputParam.modalName]: true,\n          operation: inputParam.operation,\n          screenName: inputParam.screenName,\n          ncontrolCode: inputParam.ncontrolCode,\n          selectedRecord,\n          loading: false,\n          linkMaster: linkmaster,\n          showSaveContinue: false,\n          editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/actions/ManufacturerAction.js"],"names":["rsapi","DEFAULT_RETURN","sortData","constructOptionList","Axios","initRequest","intl","toast","transactionStatus","attachmentType","getManfacturerCombo","screenName","operation","primaryKeyName","masterData","userInfo","ncontrolCode","dispatch","urlArray","CountryService","post","ManufacturerByID","selectedManufacturer","all","then","response","countryCode","countryList","countryMap","data","undefined","get","selectedRecord","type","payload","Country","isOpen","openModal","loading","catch","error","status","formatMessage","id","message","warn","selectCheckBoxManufacturer","Manufacturer","nmanufcode","selectedId","getContactInfo","SiteDetails","Map","parseInt","siteAddress","nmanufsitecode","ManufacturerContactInfo","selectedSite","SiteCode","dataState","getSiteManufacturerLoadEdit","manufCode","manufSiteCode","ManufacturerSiteByID","label","value","openChildModal","ACTIVE","NO","getContactManufacturerLoadEdit","fetchRecord","ManufacturerContactByID","editRow","nmanufcontactcode","defaultSite","addManufacturerFile","inputParam","userinfo","push","manufacturerfile","linkMap","LinkMaster","linkmaster","defaultLink","filter","items","item","ndefaultlink","YES","disabled","editObject","nlinkcode","link","nattachmenttypecode","LINK","slinkname","slinkfilename","sfilename","slinkdescription","sdescription","nlinkdefaultstatus","ndefaultstatus","sfilesize","nfilesize","length","nmanufacturerfilecode","AttachmentType","FTP","modalName","linkMaster","showSaveContinue","editFiles"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport {DEFAULT_RETURN} from './LoginTypes';\r\nimport {sortData, constructOptionList} from '../components/CommonScript';\r\nimport Axios from 'axios';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\nimport { toast } from 'react-toastify';\r\nimport { transactionStatus, attachmentType } from '../components/Enumeration';\r\n\r\nexport function getManfacturerCombo(screenName, operation, primaryKeyName,  masterData, userInfo, ncontrolCode) {\r\n return function(dispatch){ \r\n    let urlArray = [];\r\n    if (operation === \"create\") {\r\n        // const EDQMManufacturer = rsapi.post(\"/edqmmanufacturer/getEDQMManufacturer\", { \"userinfo\": userInfo });\r\n        const CountryService = rsapi.post(\"country/getCountry\", { \"userinfo\" : userInfo });\r\n        urlArray = [CountryService];\r\n    }\r\n    else {\r\n\r\n        //const EDQMManufacturer = rsapi.post(\"/edqmmanufacturer/getEDQMManufacturer\", { \"userinfo\": userInfo });\r\n        const ManufacturerByID = rsapi.post(\"/manufacturer/getManufacturerById\", { [primaryKeyName] :masterData.selectedManufacturer[primaryKeyName], \"userinfo\": userInfo });\r\n        urlArray = [//EDQMManufacturer,\r\n                     ManufacturerByID];\r\n    }\r\n\r\n    dispatch(initRequest(true));\r\n    Axios.all(urlArray)\r\n        .then(response => {\r\n        let countryCode = [];\r\n        let countryList = {};\r\n        if (operation === \"create\") {\r\n            const countryMap = constructOptionList(response[0].data || [], \"ncountrycode\",\r\n            \"scountryname\", undefined, undefined, true);\r\n             countryList = countryMap.get(\"OptionList\");\r\n        }\r\n\r\n            //let edqmManufacturer = [];\r\n            let selectedRecord = {};\r\n\r\n            // const edqmManufacturerMap = constructOptionList(response[0].data || [], \"nofficialmanufcode\",\r\n            // \"sofficialmanufname\", undefined, undefined, false);\r\n\r\n            // const edqmManufacturerList = edqmManufacturerMap.get(\"OptionList\");\r\n\r\n            if (operation === \"update\") {\r\n\r\n                selectedRecord = response[0].data;\r\n                // selectedRecord[\"nofficialmanufcode\"] = {\r\n                //     label: response[1].data[\"sofficialmanufname\"],\r\n                //     value: response[1].data[\"nofficialmanufcode\"]\r\n                // };\r\n                // edqmManufacturer.push({\r\n                //     label: response[1].data[\"sofficialmanufname\"],\r\n                //     value: response[1].data[\"nofficialmanufcode\"]\r\n                // });\r\n            }\r\n            dispatch({type: DEFAULT_RETURN, \r\n                payload:{  \r\n                //edqmManufacturerList,\r\n                Country: countryList,\r\n                countryCode: countryCode,  isOpen: true,  \r\n                selectedRecord: operation === \"update\" ? selectedRecord : {\"ntransactionstatus\": 1}, \r\n                //edqmManufacturer: edqmManufacturer ,\r\n                operation: operation,\r\n                     screenName: screenName,\r\n                    openModal : true, ncontrolCode: ncontrolCode, loading:false\r\n            }});\r\n        })\r\n        .catch(error => {\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500) {\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            }\r\n            else {\r\n                toast.warn(intl.formatMessage({ id: error.response.data }));\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function selectCheckBoxManufacturer(Manufacturer, userInfo, masterData){\r\n    return function(dispatch){ \r\n    dispatch(initRequest(true));\r\n    rsapi.post(\"/manufacturer/getManufacturerWithSiteAndContactDetails\", { 'userinfo': userInfo, \"nmanufcode\": Manufacturer.nmanufcode })\r\n        \r\n    .then(response=>{      \r\n        masterData = {...masterData, ...response.data};        \r\n        sortData(masterData);\r\n        // console.log(\" Select Checked : \", masterData);\r\n        dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false,selectedId:null}});   \r\n   })   \r\n        .catch(error => {\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500) {\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            }\r\n            else {\r\n                toast.warn(intl.formatMessage({ id: error.response.data }));\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport function getContactInfo(SiteDetails, masterData){\r\n    return function(dispatch){ \r\n    let Map={};\r\n \r\n    Map[\"nmanufcode\"]=parseInt(SiteDetails.siteAddress.nmanufcode);\r\n    Map[\"nmanufsitecode\"]=parseInt(SiteDetails.siteAddress.nmanufsitecode);\r\n    Map[\"userinfo\"]=SiteDetails.userInfo\r\n    dispatch(initRequest(true));\r\n    rsapi.post(\"/manufacturer/getContactManufacturerBySite\",Map)\r\n    .then(response =>{\r\n        // dispatch({type: DEFAULT_RETURN, payload:{\r\n        //     ManufacturerContactInfo :response.data,\r\n        //     SiteCode: SiteDetails.nmanufsitecode, loading:false\r\n        // }});   \r\n         \r\n        masterData = {...SiteDetails.masterData, ManufacturerContactInfo: response.data,\r\n            selectedSite: SiteDetails.siteAddress,\r\n             SiteCode:SiteDetails.siteAddress.nmanufsitecode};     \r\n        sortData(masterData);\r\n        dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false, dataState: undefined}}); \r\n\r\n    })\r\n    .catch(error =>{\r\n        dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n        // console.log(error);\r\n    })\r\n}\r\n}\r\n\r\nexport function getSiteManufacturerLoadEdit(screenName, operation, manufCode, manufSiteCode, ncontrolCode, userInfo){\r\n    return function(dispatch){ \r\n    let urlArray = [];\r\n    let selectedRecord = {};\r\n\r\n    if (operation === \"create\") {\r\n        const Country = rsapi.post(\"/country/getCountry\", { \"userinfo\": userInfo });\r\n        urlArray = [Country];\r\n    }\r\n    else {\r\n\r\n        const Country = rsapi.post(\"/country/getCountry\", { \"userinfo\": userInfo });\r\n        const ManufacturerSiteByID = rsapi.post(\"/manufacturer/getSiteManufacturerById\", { \"nmanufcode\": manufCode, \"nmanufsitecode\": manufSiteCode ,\"userinfo\": userInfo});\r\n        urlArray = [Country, ManufacturerSiteByID];\r\n    }\r\n\r\n    dispatch(initRequest(true));\r\n    Axios.all(urlArray)\r\n        .then(response => {\r\n\r\n            let countryCode = [];\r\n\r\n            const countryMap = constructOptionList(response[0].data || [], \"ncountrycode\",\r\n            \"scountryname\", undefined, undefined, true);\r\n\r\n            const countryList = countryMap.get(\"OptionList\");\r\n\r\n\r\n            if (operation === \"update\") {\r\n\r\n                selectedRecord = response[1].data;\r\n                selectedRecord[\"ncountrycode\"] = {\r\n                    label: response[1].data[\"scountryname\"],\r\n                    value: response[1].data[\"ncountrycode\"]\r\n                };\r\n                // countryCode.push({\r\n                //     label: response[1].data[\"scountryname\"],\r\n                //     value: response[1].data[\"ncountrycode\"]\r\n                // });\r\n            }\r\n\r\n            dispatch({type: DEFAULT_RETURN, payload:{\r\n                Country: countryList, openChildModal:true, operation, \r\n                selectedRecord: operation === \"update\" ? selectedRecord : {\"ntransactionstatus\": transactionStatus.ACTIVE,\"ndefaultstatus\":transactionStatus.NO}, countryCode: countryCode, ncontrolCode,\r\n                screenName: \"IDS_MANUFACTURESITE\", loading:false\r\n             }});\r\n        })\r\n        .catch(error => {\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500) {\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            }\r\n            else {\r\n                toast.warn(intl.formatMessage({ id: error.response.data }));\r\n            }\r\n        })\r\n    }\r\n}\r\nexport function getContactManufacturerLoadEdit(fetchRecord){\r\n    return function(dispatch){ \r\n    let urlArray = [];\r\n    let selectedId = null;\r\n    const ManufacturerContactByID = rsapi.post(\"/manufacturer/getContactManufacturerById\", { \"nmanufcode\": fetchRecord.editRow.nmanufcode, \"nmanufsitecode\": fetchRecord.editRow.nmanufsitecode, \"nmanufcontactcode\": fetchRecord.editRow.nmanufcontactcode,\"userinfo\": fetchRecord.userInfo });\r\n    urlArray = [ManufacturerContactByID];\r\n    selectedId = fetchRecord.editRow.nmanufcontactcode;\r\n\r\n    dispatch(initRequest(true));\r\n    Axios.all(urlArray)\r\n        .then(response => {            \r\n            dispatch({type: DEFAULT_RETURN, payload:{\r\n                openChildModal:true, operation:fetchRecord.operation, \r\n                selectedRecord: fetchRecord.operation === \"update\" ? response[0].data : undefined,\r\n          defaultSite: fetchRecord.editRow.nmanufsitecode, ncontrolCode:fetchRecord.ncontrolCode ,\r\n          screenName: \"IDS_SITECONTACT\", loading:false, selectedId\r\n        }});\r\n        })\r\n        .catch(error => {\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500) {\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            }\r\n            else {\r\n                toast.warn(intl.formatMessage({ id: error.response.data }));\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\n// export function filterColumnDataManufacturer(filterValue, masterData, userInfo) {\r\n//     return function (dispatch) {  \r\n      \r\n//         let manuFCode = 0;   \r\n//         let searchedData = undefined;\r\n//         if (filterValue === \"\"){\r\n//             manuFCode = masterData[\"Manufacturer\"][0].nmanufcode;\r\n//         }\r\n//         else{\r\n//             // if (filterValue.length > 2)\r\n//             // {\r\n//                 searchedData = searchData(filterValue, masterData[\"Manufacturer\"]);\r\n            \r\n//                 if (searchedData.length > 0){\r\n//                     manuFCode = searchedData[0].nmanufcode; \r\n//                 }\r\n//             // }\r\n//         }\r\n     \r\n//         if (manuFCode !== 0){\r\n//             dispatch(initRequest(true));\r\n//             return rsapi.post(\"manufacturer/getManufacturerWithSiteAndContactDetails\", {userInfo, nmanufcode:manuFCode})\r\n//             .then(response=>{         \r\n//                         masterData[\"ManufacturerSiteAddress\"] = response.data[\"ManufacturerSiteAddress\"];\r\n//                         masterData[\"ManufacturerContactInfo\"] = response.data[\"ManufacturerContactInfo\"];\r\n//                         masterData[\"selectedManufacturer\"] = response.data[\"selectedManufacturer\"];\r\n//                         masterData[\"SiteCode\"] = response.data[\"SiteCode\"];\r\n//                         masterData[\"searchedData\"] = searchedData;\r\n\r\n//                         dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false}});       \r\n//             })\r\n//             .catch(error=>{\r\n//                 dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n//                 if (error.response.status === 500){\r\n//                     toast.error(error.message);\r\n//                 } \r\n//                 else{               \r\n//                     toast.warn(error.response.data);\r\n//                 }  \r\n//             }) \r\n//         } \r\n//         else{        \r\n//             masterData[\"ManufacturerSiteAddress\"] = [];\r\n//             masterData[\"ManufacturerContactInfo\"] = undefined;\r\n//             masterData[\"selectedManufacturer\"] = [];\r\n//             masterData[\"searchedData\"] = [];\r\n//             masterData[\"SiteCode\"]  = 0;\r\n//             dispatch({type: DEFAULT_RETURN, payload:{masterData, loading:false}}); \r\n//         }           \r\n//     }   \r\n// } \r\n\r\nexport const addManufacturerFile = (inputParam) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\r\n            userinfo: inputParam.userInfo\r\n        })];\r\n        if (inputParam.operation === \"update\") {\r\n            urlArray.push(rsapi.post(\"/manufacturer/editManufacturerFile\", {\r\n                userinfo: inputParam.userInfo,\r\n                manufacturerfile: inputParam.selectedRecord\r\n            }))\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\r\n                const linkmaster = linkMap.get(\"OptionList\");\r\n                let selectedRecord = {};\r\n                const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\r\n                let disabled = false;\r\n                let editObject = {};\r\n                if (inputParam.operation === \"update\") {\r\n                    editObject = response[1].data;\r\n                    let nlinkcode = {};\r\n                    let link = {};\r\n                    if (editObject.nattachmenttypecode === attachmentType.LINK) {\r\n                        nlinkcode = {\r\n                            \"label\": editObject.slinkname,\r\n                            \"value\": editObject.nlinkcode\r\n                        }\r\n\r\n                        link = {\r\n                            slinkfilename: editObject.sfilename,\r\n                            slinkdescription: editObject.sdescription,\r\n                            nlinkdefaultstatus: editObject.ndefaultstatus,\r\n                            sfilesize: '',\r\n                            nfilesize: 0,\r\n                            ndefaultstatus: 4,\r\n                            sfilename: '',\r\n                        }\r\n\r\n                    } else {\r\n                        nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\" //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\r\n                        link = {\r\n                            slinkfilename: '',\r\n                            slinkdescription: '',\r\n                            nlinkdefaultstatus: 4,\r\n                            sfilesize: editObject.sfilesize,\r\n                            nfilesize: editObject.nfilesize,\r\n                            ndefaultstatus: editObject.ndefaultstatus,\r\n                            sfilename: editObject.sfilename,\r\n                            sdescription:editObject.sdescription    //ALPD-899 Fix\r\n                        }\r\n                    }\r\n\r\n                    selectedRecord = {\r\n                        ...link,\r\n                        nmanufacturerfilecode: editObject.nmanufacturerfilecode,\r\n                        nattachmenttypecode: editObject.nattachmenttypecode,\r\n                        // sdescription:editObject.sdescription,    //ALPD-899 Fix\r\n                        nlinkcode,\r\n\r\n                        // disabled: true\r\n                    };\r\n                } else {\r\n                    selectedRecord = {\r\n                        nattachmenttypecode: response[0].data.AttachmentType.length > 0 ?\r\n                            response[0].data.AttachmentType[0].nattachmenttypecode : attachmentType.FTP,\r\n                        nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\", //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\r\n                        disabled\r\n                    };\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        [inputParam.modalName]: true,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolCode,\r\n                        selectedRecord,\r\n                        loading: false,\r\n                        linkMaster: linkmaster,\r\n                        showSaveContinue: false,\r\n                        editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}