{"ast":null,"code":"var _jsxFileName = \"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\src\\\\pages\\\\audittrail\\\\AuditTrail.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { injectIntl } from 'react-intl';\nimport { Row, Col, Button, Card, Nav } from 'react-bootstrap'; //Nav, Card, Button\n//import { Grid, GridColumn } from '@progress/kendo-react-grid';\n\nimport { process } from '@progress/kendo-data-query';\nimport { toast } from 'react-toastify';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport { ContentPanel, MediaLabel } from '../../components/App.styles';\nimport { constructOptionList, getStartOfDay, getEndOfDay, sortData, validateTwoDigitDate, convertDateValuetoString, rearrangeDateFormat, getControlMap } from '../../components/CommonScript'; //showEsign, getControlMap,\n\nimport { callService, crudMaster, validateEsignCredential, updateStore, filterTransactionList, filterColumnData, getAuditTrailDetail, getFilterAuditTrailRecords, getFormNameByModule, getExportExcel, ViewAuditDetails } from '../../actions';\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\nimport AuditTrailFilter from './AuditTrailFilter';\nimport TransactionListMaster from '../../components/TransactionListMaster';\nimport BreadcrumbComponent from '../../components/Breadcrumb.Component';\nimport DataGrid from '../../components/data-grid/data-grid.component';\nimport SplitterLayout from 'react-splitter-layout';\nimport { ProductList } from '../product/product.styled';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSync } from '@fortawesome/free-solid-svg-icons';\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\nimport SpecificationInfo from '../testgroup/SpecificationInfo';\n\nclass AuditTrail extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.dataStateChange = event => {\n      if (this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\n        this.setState({\n          dataResult: process(this.props.Login.masterData.AuditDetails || [], event.dataState),\n          dataStateAll: event.dataState,\n          kendoSkip: event.dataState.skip,\n          kendoTake: event.dataState.skip\n        });\n      } else {\n        let data = [];\n\n        if (event.dataState.filter === null && event.dataState.sort === null) {\n          let auditdata = this.props.Login.masterData.AuditDetails && this.props.Login.masterData.AuditDetails.slice(0, event.dataState.take + event.dataState.skip) || [];\n          data = process(auditdata || [], event.dataState);\n        } else {\n          data = process(this.props.Login.masterData.AuditDetails || [], event.dataState);\n        }\n\n        this.setState({\n          dataResult: data,\n          dataState: event.dataState\n        });\n      }\n    };\n\n    this.paneSizeChange = d => {\n      this.setState({\n        splitChangeWidthPercentage: d\n      });\n    };\n\n    this.pageChange = event => {\n      this.setState({\n        kendoSkip: event.page.skip,\n        kendoTake: event.page.take\n      });\n    };\n\n    this.exportExcelNew = () => {\n      let fromDate = this.props.Login.masterData.FromDate;\n      let toDate = this.props.Login.masterData.ToDate;\n      let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);\n      let inputData = {\n        fromDate: obj.fromDate,\n        toDate: obj.toDate,\n        modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\n        formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\n        usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\n        userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\n        viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\n        userinfo: this.props.Login.userInfo,\n        sauditdate: this.props.Login.masterData.SelectedAuditTrail.saudittraildate,\n        nauditformcode: 78,\n        ncontrolcode: 78\n      };\n      let inputParam = {\n        inputData\n      };\n      this.props.getExportExcel(inputParam); // if(this.props.Login.resultStatus === \"Success\"){\n      //     toast.info(\"Excel export successfully\");\n      // }\n    };\n\n    this.closeModal = () => {\n      let openModal = this.props.Login.openModal;\n      openModal = false; //let selectedId = this.props.Login.selectedId;\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openModal,\n          sectionDataState: {\n            skip: 0,\n            take: 50\n          },\n          selectedId: null\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.dataStateAuditView = event => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          sectionDataState: event.dataState\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.ViewAuditDetails = viewdetails => {\n      console.log('ewe', viewdetails);\n      let openModal = this.props.Login.openModal;\n      openModal = true;\n      let screenName = 'IDS_AUDITVIEWDETAILS';\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openModal,\n          screenName\n        }\n      };\n      this.props.ViewAuditDetails(this.props.Login.masterData, this.props.Login.userInfo, viewdetails, screenName);\n    };\n\n    this.expandChange = event => {\n      event.dataItem[event.target.props.expandField] = event.value;\n      this.setState({\n        dataResult: process(this.props.Login.masterData.AuditDetails || [], this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll : this.state.dataState),\n        dataState: this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll : this.state.dataState\n      });\n    };\n\n    this.handlePageChange = e => {\n      this.setState({\n        skip: e.skip,\n        take: e.take\n      }); //setTimeout(() => { this._scrollBarRef.updateScroll() })\n    };\n\n    this.onReload = () => {\n      // let dFromDate = this.props.Login.masterData.breadCrumbFrom ? (this.props.Login.masterData.breadCrumbFrom) : this.props.Login.masterData.FromDate;\n      // let dToDate = this.props.Login.masterData.breadCrumbTo ? (this.props.Login.masterData.breadCrumbTo) : this.props.Login.masterData.ToDate;\n      //var dTempFromDate = this.state.selectedRecord[\"fromdate\"] ? this.state.selectedRecord[\"fromdate\"] : this.props.Login.masterData.FromDate;\n      //let dTempToDate = this.state.selectedRecord[\"todate\"] ? this.state.selectedRecord[\"todate\"] : this.props.Login.masterData.ToDate;\n      //let temp = dFromDate.indexOf('-');\n      // let fromMonth = (dTempFromDate.getMonth()+1);\n      // let toMonth = (dTempToDate.getMonth()+1);\n      // let fromMonth = String(new Date(dFromDate).getMonth() + 1)\n      // let toMonth = String(new Date(dToDate).getMonth() + 1)\n      // let fromYear = dFromDate.substring(0, 4);\n      // let toYear = dToDate.substring(0, 4);\n      // let ntempviewtypecode = 0;\n      let breadCrumbFrom = this.props.Login.masterData.FromDate ? this.props.Login.masterData.FromDate : this.props.Login.masterData.breadCrumbFrom;\n      let breadCrumbTo = this.props.Login.masterData.ToDate ? this.props.Login.masterData.ToDate : this.props.Login.masterData.breadCrumbTo;\n      let breadCrumbModule = this.props.Login.masterData.breadCrumbModule;\n      let breadCrumbForm = this.props.Login.masterData.breadCrumbForm;\n      let breadCrumbUser = this.props.Login.masterData.breadCrumbUser;\n      let breadCrumbRole = this.props.Login.masterData.breadCrumbRole;\n      let breadCrumbViewType = this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType : this.props.Login.ViewType;\n      let fromDate = this.props.Login.masterData.FromDate;\n      let toDate = this.props.Login.masterData.ToDate;\n      let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);\n      let inputData = {\n        fromDate: obj.fromDate,\n        toDate: obj.toDate,\n        modulecode: breadCrumbModule ? breadCrumbModule.value : 0,\n        formcode: breadCrumbForm ? breadCrumbForm.value : 0,\n        usercode: breadCrumbUser ? breadCrumbUser.value : 0,\n        userrole: breadCrumbRole ? breadCrumbRole.value : 0,\n        viewtypecode: breadCrumbViewType ? breadCrumbViewType.value : this.props.Login.masterData.ViewType.nauditactionfiltercode,\n        // viewtypecode : this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode :0,\n        // viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\n        userinfo: this.props.Login.userInfo,\n        postParamList: this.filterParam\n      };\n      let masterData = { ...this.props.Login.masterData,\n        breadCrumbFrom,\n        breadCrumbTo,\n        breadCrumbModule,\n        breadCrumbForm,\n        breadCrumbUser,\n        breadCrumbRole,\n        //breadCrumbViewType : breadCrumbViewType ? breadCrumbViewType :\n        // this.props.Login.masterData.ViewType\n        breadCrumbViewType: breadCrumbViewType ? breadCrumbViewType : {\n          label: this.props.Login.masterData.ViewType.sauditactionfiltername,\n          value: this.props.Login.masterData.ViewType.nauditactionfiltercode,\n          item: this.props.Login.masterData.ViewType\n        }\n      };\n      let inputParam = {\n        masterData,\n        inputData,\n        searchRef: this.searchRef,\n        detailSkip: this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll.skip : this.state.dataState.skip\n      };\n      this.props.getFilterAuditTrailRecords(inputParam);\n    };\n\n    this.onFilterSubmit = () => {\n      let breadCrumbFrom = this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.FromDate);\n      let breadCrumbTo = this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.ToDate);\n      let breadCrumbModule = this.state.selectedRecord['nmodulecode'];\n      let breadCrumbForm = this.state.selectedRecord['nformcode'];\n      let breadCrumbUser = this.state.selectedRecord['nusercode'];\n      let breadCrumbRole = this.state.selectedRecord['nuserrolecode'];\n      let breadCrumbViewType = this.state.selectedRecord['nauditactionfiltercode'];\n      let masterData = { ...this.props.Login.masterData,\n        breadCrumbFrom,\n        breadCrumbTo,\n        breadCrumbModule,\n        breadCrumbForm,\n        breadCrumbUser,\n        breadCrumbRole,\n        breadCrumbViewType\n      };\n      let fromDate = this.state.selectedRecord[\"fromdate\"] ? this.state.selectedRecord[\"fromdate\"] : this.props.Login.masterData.FromDate;\n      let toDate = this.state.selectedRecord[\"todate\"] ? this.state.selectedRecord[\"todate\"] : this.props.Login.masterData.ToDate;\n      let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);\n      let inputData = {\n        fromDate: obj.fromDate,\n        toDate: obj.toDate,\n        modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\n        formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\n        usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\n        userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\n        //viewtypecode: ntempviewtypecode,//this.state.selectedcombo[\"nviewtypecode\"] ? this.state.selectedcombo[\"nviewtypecode\"].value:0,\n        viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : -1,\n        userinfo: this.props.Login.userInfo,\n        postParamList: this.filterParam\n      };\n      let inputParam = {\n        masterData,\n        inputData,\n        searchRef: this.searchRef,\n        detailSkip: this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll.skip : this.state.dataState.skip\n      };\n      this.props.getFilterAuditTrailRecords(inputParam);\n    };\n\n    this.onComboChange = (comboData, fieldName, caseNo) => {\n      if (comboData != null) {\n        if (fieldName === \"nmodulecode\" || fieldName === \"nformcode\" || fieldName === \"nusercode\" || fieldName === \"nuserrolecode\" || fieldName === \"nauditactionfiltercode\") {\n          const selectedRecord = this.state.selectedRecord || {};\n          selectedRecord[fieldName] = comboData; // let qualisForms = this.state.qualisForms;\n\n          let qualisForms = this.state.wholeQualisForms;\n\n          if (fieldName === \"nmodulecode\") {\n            selectedRecord[\"nformcode\"] = \"\";\n            qualisForms = qualisForms.filter(form => form.item.nmodulecode === comboData.value);\n          } else if (selectedRecord.nmodulecode && selectedRecord.nmodulecode.value) {\n            qualisForms = qualisForms.filter(form => form.item.nmodulecode === selectedRecord.nmodulecode.value);\n          }\n\n          this.setState({\n            selectedRecord,\n            qualisForms\n          });\n        }\n        /*if (fieldName === \"nauditactionfiltercode\") {\r\n               this.searchRef.current.value = \"\";\r\n               const selectedcombo = this.state.selectedcombo || {};\r\n            selectedcombo[fieldName] = comboData;\r\n            const dataStateAll = {\r\n                skip: 0,\r\n                take: 100\r\n            };\r\n               this.setState({ selectedcombo, dataStateAll });\r\n               let masterData = {\r\n                ...this.props.Login.masterData, searchedAudit: undefined\r\n            }\r\n            let inputData = {\r\n                fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\r\n                toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\r\n                modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n                formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n                usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n                userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n                viewtypecode: this.state.selectedcombo[\"nauditactionfiltercode\"] ? this.state.selectedcombo[\"nauditactionfiltercode\"].value : 0,\r\n                userinfo: this.props.Login.userInfo,\r\n                postParamList: this.filterParam,\r\n            }\r\n               let inputParam = { masterData, inputData }\r\n            this.props.getFilterAuditTrailRecords(inputParam)\r\n        }*/\n\n      } else {\n        const selectedRecord = this.state.selectedRecord || {};\n        selectedRecord[fieldName] = comboData;\n\n        if (fieldName === 'nmodulecode') {\n          selectedRecord[\"nformcode\"] = \"\";\n          const qualisForms = this.state.wholeQualisForms;\n          this.setState({\n            selectedRecord,\n            qualisForms\n          });\n        } else this.setState({\n          selectedRecord\n        });\n      }\n    };\n\n    this.handleDateChange = (dateName, dateValue) => {\n      let selectedRecord = this.state.selectedRecord;\n      selectedRecord[dateName] = dateValue; //this.setState({selectedRecord});\n\n      let viewTypeAuditList = this.state.viewTypeAudit;\n      let dFromDate = this.state.selectedRecord[\"fromdate\"] ? rearrangeDateFormat(this.props.Login.userInfo, this.state.selectedRecord[\"fromdate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.FromDate);\n      let dToDate = this.state.selectedRecord[\"todate\"] ? rearrangeDateFormat(this.props.Login.userInfo, this.state.selectedRecord[\"todate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.ToDate); // let ntempviewtypecode = 0;\n\n      let fromMonth = String(dFromDate.getMonth() + 1);\n      let toMonth = String(dToDate.getMonth() + 1);\n      let fromYear = String(dFromDate.getFullYear());\n      let toYear = String(dToDate.getFullYear());\n\n      if (fromYear !== toYear) {\n        selectedRecord[\"nauditactionfiltercode\"] = viewTypeAuditList.length > 0 ? {\n          \"value\": viewTypeAuditList[2].item.nauditactionfiltercode,\n          \"label\": viewTypeAuditList[2].item.sauditactionfiltername\n        } : this.state.selectedRecord[\"nauditactionfiltercode\"]; // ntempviewtypecode = viewTypeAuditList[2].item.nauditactionfiltercode;\n      } else if (fromMonth !== toMonth) {\n        selectedRecord[\"nauditactionfiltercode\"] = viewTypeAuditList.length > 0 ? {\n          \"value\": viewTypeAuditList[1].item.nauditactionfiltercode,\n          \"label\": viewTypeAuditList[1].item.sauditactionfiltername\n        } : this.state.selectedRecord[\"nauditactionfiltercode\"]; // ntempviewtypecode = viewTypeAuditList[1].item.nauditactionfiltercode;\n      } else {\n        selectedRecord[\"nauditactionfiltercode\"] = viewTypeAuditList.length > 0 ? {\n          \"value\": viewTypeAuditList[0].item.nauditactionfiltercode,\n          \"label\": viewTypeAuditList[0].item.sauditactionfiltername\n        } : this.state.selectedRecord[\"nauditactionfiltercode\"]; // ntempviewtypecode = viewTypeAuditList[0].item.nauditactionfiltercode;\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.openFilter = () => {\n      let showFilter = !this.props.Login.showFilter;\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          showFilter\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.closeFilter = () => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          showFilter: false\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.breadcrumbList = () => {\n      let breadCrumbArray = []; // let fromDate = this.props.Login.masterData.breadCrumbFrom ? this.props.Login.masterData.breadCrumbFrom : this.props.Login.masterData.FromDate;\n      //    let toDate = this.props.Login.masterData.breadCrumbTo ? this.props.Login.masterData.breadCrumbTo : this.props.Login.masterData.ToDate;\n\n      let fromDate = this.props.Login.masterData.FromDate ? this.props.Login.masterData.FromDate : this.props.Login.masterData.breadCrumbFrom;\n      let toDate = this.props.Login.masterData.ToDate ? this.props.Login.masterData.ToDate : this.props.Login.masterData.breadCrumbTo;\n      let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);\n      breadCrumbArray.push({\n        \"label\": \"IDS_FROM\",\n        \"value\": obj.breadCrumbFrom\n      }, {\n        \"label\": \"IDS_TO\",\n        \"value\": obj.breadCrumbto\n      });\n      this.props.Login.masterData.breadCrumbModule && breadCrumbArray.push({\n        \"label\": \"IDS_MODULENAME\",\n        \"value\": this.props.Login.masterData.breadCrumbModule.label\n      });\n      this.props.Login.masterData.breadCrumbForm && breadCrumbArray.push({\n        \"label\": \"IDS_FORMNAME\",\n        \"value\": this.props.Login.masterData.breadCrumbForm.label\n      });\n      this.props.Login.masterData.breadCrumbUser && breadCrumbArray.push({\n        \"label\": \"IDS_USERNAME\",\n        \"value\": this.props.Login.masterData.breadCrumbUser.label\n      });\n      this.props.Login.masterData.breadCrumbRole && breadCrumbArray.push({\n        \"label\": \"IDS_USERROLE\",\n        \"value\": this.props.Login.masterData.breadCrumbRole.label\n      });\n      breadCrumbArray.push({\n        \"label\": \"IDS_VIEWPERIOD\",\n        \"value\": this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.label : this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.sauditactionfiltername : \"\"\n      }); // this.state.selectedRecord[\"nformcode\"] &&\n      //  {\n      //     \"label\": \"IDS_FORMNAME\",\n      //     \"value\": this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].label : \"\"\n      // },\n      // this.state.selectedRecord[\"nusercode\"] &&\n      // {\n      //     \"label\": \"IDS_USERNAME\",\n      //     \"value\": this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].label : \"\"\n      // },\n      // this.state.selectedRecord[\"nuserrolecode\"] &&\n      // {\n      //     \"label\": \"IDS_USERROLE\",\n      //     \"value\": this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].label : \"\"\n      // }\n\n      return breadCrumbArray;\n    };\n\n    this.myRef = React.createRef(); // this.searchAuditRef = React.createRef();\n\n    const dataState = {\n      skip: 0,\n      take: this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5,\n      group: [{\n        field: \"viewPeriod\",\n        dir: \"desc\"\n      }] //field: \"groupDate\" , dir: \"desc\" \n\n    };\n    const dataStateAll = {\n      skip: 0,\n      take: this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5\n    };\n    this.searchFieldList = [\"sauditdate\"];\n    this.state = {\n      masterStatus: \"\",\n      sectionDataState: {\n        skip: 0,\n        take: 10\n      },\n      error: \"\",\n      isOpen: false,\n      selectedRecord: {},\n      //selectedcombo: {},\n      operation: \"\",\n      gridHeight: 'auto',\n      screenName: undefined,\n      userRoleControlRights: [],\n      ControlRights: undefined,\n      ConfirmDialogScreen: false,\n      controlMap: new Map(),\n      dataResult: [],\n      dataState: dataState,\n      dataStateAll: dataStateAll,\n      qualisModule: [],\n      qualisForms: [],\n      users: [],\n      userRole: [],\n      viewTypeAudit: [],\n      wholeQualisForms: [],\n      skip: 0,\n      take: this.props.Login.settings && this.props.Login.settings[3],\n      kendoSkip: 0,\n      kendoTake: this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5,\n      splitChangeWidthPercentage: 30\n    };\n    this.searchRef = React.createRef();\n    this.searchAuditRef = React.createRef();\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\n      toast.warn(props.Login.masterStatus);\n      props.Login.masterStatus = \"\";\n    }\n\n    if (props.Login.error !== state.error) {\n      toast.error(props.Login.error);\n      props.Login.error = \"\";\n    }\n\n    return null;\n  }\n\n  render() {\n    //const ViewAuditDetails = props.controlMap.has(\"ViewAuditDetails\") && props.controlMap.get(\"ViewAuditDetails\").ncontrolcode;\n    const ViewAuditDetails = this.state.controlMap.has(\"ViewAuditDetails\") && this.state.controlMap.get(\"ViewAuditDetails\").ncontrolcode;\n    this.props.Login.masterData.AuditDetails = this.props.Login.masterData.AuditDetails && sortData(this.props.Login.masterData.AuditDetails, \"descending\", \"nauditcode\");\n    this.feildsForGrid = this.props.Login.needOldValueColumn ? [{\n      \"idsName\": \"IDS_FIELDNAME\",\n      \"dataField\": \"sfieldname\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_OLDVALUE\",\n      \"dataField\": \"soldvalue\",\n      \"width\": \"100px\"\n    }, {\n      \"idsName\": \"IDS_NEWVALUE\",\n      \"dataField\": \"snewvalue\",\n      \"width\": \"100px\"\n    }] : [{\n      \"idsName\": \"IDS_FIELDNAME\",\n      \"dataField\": \"sfieldname\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_NEWVALUE\",\n      \"dataField\": \"snewvalue\",\n      \"width\": \"100px\"\n    }];\n    this.extractedColumnList = [{\n      \"idsName\": \"IDS_AUDITDATE\",\n      \"dataField\": \"sauditdate\",\n      \"width\": \"200px\",\n      \"componentName\": \"date\"\n    }, {\n      \"idsName\": \"IDS_AUDITACTION\",\n      \"dataField\": \"sauditaction\",\n      \"width\": \"200px\"\n    }, //  { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"scomments\", \"width\": \"350px\" },\n    {\n      \"idsName\": \"IDS_NEWCOMMENTS\",\n      \"dataField\": \"scomments\",\n      \"width\": \"350px\"\n    }, {\n      \"idsName\": \"IDS_USERNAME\",\n      \"dataField\": \"susername\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_USERROLE\",\n      \"dataField\": \"suserrolename\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_ACTIONTYPE\",\n      \"dataField\": \"sactiontype\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_MODULENAME\",\n      \"dataField\": \"smodulename\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_FORMNAME\",\n      \"dataField\": \"sformname\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_REASON\",\n      \"dataField\": \"spredefinedreason\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_ESIGNCOMMENTS\",\n      \"dataField\": \"sreason\",\n      \"width\": \"200px\"\n    }];\n    let fromDate = \"\";\n    let toDate = \"\";\n\n    if (this.props.Login.masterData && this.props.Login.masterData.FromDate) {\n      fromDate = this.state.selectedRecord[\"fromdate\"] && getStartOfDay(this.state.selectedRecord[\"fromdate\"]) || rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.FromDate);\n      toDate = this.state.selectedRecord[\"todate\"] && getEndOfDay(this.state.selectedRecord[\"todate\"]) || rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.ToDate);\n    }\n\n    let obj = convertDateValuetoString(this.props.Login.masterData.FromDate, this.props.Login.masterData.ToDate, this.props.Login.userInfo);\n    let auditParam = {\n      masterData: this.props.Login.masterData,\n      userinfo: this.props.Login.userInfo,\n      // fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\n      // toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\n      // moduleCode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\n      // formCode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\n      // userCode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\n      // userRole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\n      // viewTypeCode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0\n      skip: this.state.skip,\n      take: this.state.take,\n      fromDate: obj.fromDate,\n      toDate: obj.toDate,\n      moduleCode: this.props.Login.masterData.breadCrumbModule ? this.props.Login.masterData.breadCrumbModule.value : 0,\n      formCode: this.props.Login.masterData.breadCrumbForm ? this.props.Login.masterData.breadCrumbForm.value : 0,\n      userCode: this.props.Login.masterData.breadCrumbUser ? this.props.Login.masterData.breadCrumbUser.value : 0,\n      userRole: this.props.Login.masterData.breadCrumbRole ? this.props.Login.masterData.breadCrumbRole.value : 0,\n      viewTypeCode: this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.value : this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode : 0 //viewTypeCode :this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode:0\n\n    };\n    this.filterParam = {\n      inputListName: \"AuditTrail\",\n      selectedObject: \"SelectedAuditTrail\",\n      primaryKeyField: \"saudittraildate\",\n      fetchUrl: \"audittrail/getAuditTrailDetail\",\n      masterData: this.props.Login.masterData,\n      fecthInputObject: {\n        // fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\n        // toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\n        // modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\n        // formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\n        // usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\n        // userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\n        // viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\n        userinfo: this.props.Login.userInfo,\n        fromDate: obj.fromDate,\n        toDate: obj.toDate,\n        modulecode: this.props.Login.masterData.breadCrumbModule ? this.props.Login.masterData.breadCrumbModule.value : 0,\n        formcode: this.props.Login.masterData.breadCrumbForm ? this.props.Login.masterData.breadCrumbForm.value : 0,\n        usercode: this.props.Login.masterData.breadCrumbUser ? this.props.Login.masterData.breadCrumbUser.value : 0,\n        userrole: this.props.Login.masterData.breadCrumbRole ? this.props.Login.masterData.breadCrumbRole.value : 0,\n        viewtypecode: this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.value : this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode : 0\n      },\n      filteredListName: \"searchedAudit\",\n      clearFilter: \"no\",\n      updatedListname: \"SelectedAuditTrail\",\n      searchRef: this.searchAuditRef,\n      searchFieldList: this.searchFieldList,\n      unchangeList: [\"QualisModule\", \"QualisForms\", \"Users\", \"UserRole\", \"ViewTypeAudit\"],\n      changeList: [\"AuditDetails\"]\n    };\n    this.breadCrumbData = this.breadcrumbList(); //console.log('-->123 :', this.props.Login.masterData.AuditTrail)\n    // this.state.selectedRecord && this.state.selectedRecord[\"nmodulecode\"] &&\n    // {\n    //     \"label\": \"IDS_MODULENAME\",\n    //     \"value\": this.state.selectedRecord[\"nmodulecode\"].label \n    // }\n    // this.state.selectedRecord[\"nformcode\"] &&\n    //  {\n    //     \"label\": \"IDS_FORMNAME\",\n    //     \"value\": this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].label : \"\"\n    // }, \n    // this.state.selectedRecord[\"nusercode\"] &&\n    // {\n    //     \"label\": \"IDS_USERNAME\",\n    //     \"value\": this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].label : \"\"\n    // }, \n    // this.state.selectedRecord[\"nuserrolecode\"] &&\n    // {\n    //     \"label\": \"IDS_USERROLE\",\n    //     \"value\": this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].label : \"\"\n    // }\n    // ]\n    // let auditInputData = {\n    //     fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\n    //     toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\n    //     modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\n    //     formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\n    //     usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\n    //     userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\n    //     viewtypecode: this.state.selectedcombo[\"nauditactionfiltercode\"] ? this.state.selectedcombo[\"nauditactionfiltercode\"].value : 0,\n    //     userinfo: this.props.Login.userInfo\n    // }\n\n    this.postParamList = [{\n      filteredListName: \"searchedAudit\",\n      clearFilter: \"no\",\n      searchRef: this.searchRef,\n      primaryKeyField: \"saudittraildate\",\n      fetchUrl: \"audittrail/getFilterAuditTrailRecords\",\n      fecthInputObject: this.filterParam,\n      //childRefs: [{ ref: this.searchSubSampleRef, childFilteredListName: \"searchedSubSample\" }],\n      selectedObject: \"SelectedAuditTrail\",\n      inputListName: \"AuditTrail\",\n      updatedListname: \"SelectedAuditTrail\",\n      unchangeList: [\"QualisModule\", \"QualisForms\", \"Users\", \"UserRole\", \"ViewTypeAudit\"]\n    }];\n    const auditInfoFields = [{\n      \"fieldName\": \"sauditaction\",\n      \"label\": \"IDS_AUDITACTION\"\n    }, {\n      \"fieldName\": \"sformname\",\n      \"label\": \"IDS_SCREEN\"\n    }, {\n      \"fieldName\": \"smodulename\",\n      \"label\": \"IDS_MODULENAME\"\n    }, {\n      \"fieldName\": \"sauditdate\",\n      \"label\": \"IDS_AUDITDATE\"\n    }, {\n      \"fieldName\": \"suserrolename\",\n      \"label\": \"IDS_USERROLENAME\"\n    }, {\n      \"fieldName\": \"susername\",\n      \"label\": \"IDS_USERNAME\"\n    }];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mtop-fixed-breadcrumb client-listing-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(BreadcrumbComponent, {\n      breadCrumbItem: this.breadCrumbData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Row, {\n      noGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      className: \"parent-port-height sticky_head_parent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(SplitterLayout, {\n      borderColor: \"#999\",\n      primaryIndex: 1,\n      percentage: true,\n      secondaryInitialSize: this.state.splitChangeWidthPercentage,\n      onSecondaryPaneSizeChange: this.paneSizeChange,\n      primaryMinSize: 40,\n      secondaryMinSize: 20,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(TransactionListMaster, {\n      splitChangeWidthPercentage: this.state.splitChangeWidthPercentage //paneHeight={this.state.parentHeight}\n      // masterList={this.props.Login.masterData.searchedAudit || \n      //     this.props.Login.masterData.AuditTrail ? sortData(this.props.Login.masterData.AuditTrail,'descending','saudittraildate') : []}\n      // masterList={this.props.Login.masterData.searchedAudit ? this.props.Login.masterData.searchedAudit :\n      //   this.props.Login.masterData.AuditTrail ? sortData(this.props.Login.masterData.AuditTrail, 'descending', 'saudittraildate') : []}\n      ,\n      masterList: this.props.Login.masterData.searchedAudit || this.props.Login.masterData.AuditTrail || [],\n      selectedMaster: [this.props.Login.masterData.SelectedAuditTrail],\n      primaryKeyField: \"saudittraildate\",\n      getMasterDetail: this.props.getAuditTrailDetail,\n      inputParam: auditParam //additionalParam={['napprovalversioncode']}\n      ,\n      mainField: \"sauditdate\",\n      selectedListName: \"SelectedAuditTrail\",\n      filterColumnData: this.props.filterTransactionList,\n      searchListName: \"searchedAudit\",\n      searchRef: this.searchRef,\n      filterParam: this.filterParam,\n      objectName: \"auditrail\",\n      listName: \"IDS_AUDITTRAIL\",\n      showFilter: this.props.Login.showFilter,\n      openFilter: this.openFilter,\n      closeFilter: this.closeFilter,\n      onFilterSubmit: this.onFilterSubmit // needAccordianFilter={true}\n      ,\n      handlePageChange: this.handlePageChange,\n      skip: this.state.skip,\n      take: this.state.take,\n      needFilter: true,\n      needAccordianFilter: false,\n      filterComponent: [{\n        \"IDS_AUDITTRAIL\": /*#__PURE__*/React.createElement(AuditTrailFilter, {\n          selectedRecord: this.state.selectedRecord || {},\n          filterModuleName: this.state.qualisModule,\n          filterFormName: this.state.qualisForms,\n          filterViewType: this.state.viewTypeAudit,\n          filterUsers: this.state.users,\n          filterUserRole: this.state.userRole,\n          handleDateChange: this.handleDateChange,\n          fromDate: fromDate,\n          toDate: toDate,\n          userInfo: this.props.Login.userInfo,\n          onComboChange: this.onComboChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 49\n          }\n        })\n      }] // accordianfilterComponent={[\n      //     {\n      //         \"IDS_AUDITTRAIL\":\n      //             <ViewTypeFilter\n      //                 selectedRecord={this.state.selectedcombo || {}}\n      //                 filterViewType={this.state.viewTypeAudit}\n      //                 userInfo={this.props.Login.userInfo}\n      //                 onComboChange={this.onComboChange}\n      //             />\n      //     }\n      // ]}\n      ,\n      commonActions: /*#__PURE__*/React.createElement(ProductList, {\n        className: \"d-flex product-category float-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"btn btn-circle outline-grey ml-2\",\n        variant: \"link\",\n        onClick: () => this.onReload(),\n        \"data-tip\": this.props.intl.formatMessage({\n          id: \"IDS_REFRESH\"\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        icon: faSync,\n        style: {\n          \"width\": \"0.6!important\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 49\n        }\n      }))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(PerfectScrollbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.myRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 37\n      }\n    }, this.props.Login.masterData.SelectedAuditTrail && this.props.Login.masterData.SelectedAuditTrail !== undefined ? /*#__PURE__*/React.createElement(ContentPanel, {\n      className: \"panel-main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"border-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(Card.Body, {\n      className: \"form-static-wrap padding-class\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(DataGrid // gridWidth={\"57.5rem\"}\n    , {\n      selectedId: this.props.Login.selectedId,\n      gridHeight: this.state.gridHeight + 'px',\n      expandField: \"expanded\",\n      userRoleControlRights: this.state.userRoleControlRights && this.state.userRoleControlRights,\n      pageable: true,\n      pageSizes: this.props.Login.settings && this.props.Login.settings[17].split(\",\").map(setting => parseInt(setting)),\n      scrollable: \"scrollable\",\n      primaryKeyField: \"nauditcode\",\n      data: this.props.Login.masterData.AuditDetails || [],\n      dataResult: this.state.dataResult //total={this.props.Login.masterData.AuditDetails && this.props.Login.masterData.AuditDetails.length || 0}\n      //  dataResult={process(this.props.Login.masterData.AuditDetails || [],\n      //  this.state.selectedRecord[\"nauditactionfiltercode\"]\n      //     && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1\n      //   ? this.state.dataStateAll : this.state.dataState)}\n      ,\n      dataState: this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll : this.state.dataState,\n      dataStateChange: this.dataStateChange,\n      extractedColumnList: this.extractedColumnList || [],\n      controlMap: this.state.controlMap,\n      methodUrl: \"AuditTrail\",\n      groupable: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? true : false : false //isActionRequired={false}\n      ,\n      isToolBarRequired: true,\n      isAddRequired: false,\n      isRefreshRequired: false,\n      isDownloadPDFRequired: false,\n      isDownloadExcelRequired: true,\n      isExportExcelRequired: true,\n      isIdsField: \"yes\",\n      isActionRequired: true,\n      actionIcons: [{\n        title: this.props.intl.formatMessage({\n          id: \"IDS_VIEWCHANGES\"\n        }),\n        controlname: \"faEye\",\n        objectName: \"AuditDetails\",\n        hidden: this.state.userRoleControlRights.indexOf(ViewAuditDetails) === -1,\n        onClick: viewdetails => this.ViewAuditDetails(viewdetails)\n      }],\n      exportExcelNew: this.exportExcelNew,\n      onExpandChange: this.expandChange,\n      hideDetailBand: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 57\n      }\n    })))) : \"\")))))), this.props.Login.openModal && /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.Login.openModal,\n      closeModal: this.closeModal,\n      inputParam: this.props.Login.inputParam,\n      screenName: 'IDS_MODIFIEDCOMMENTS',\n      hideSave: true,\n      addComponent: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card, {\n        className: \"one\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Card.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(SpecificationInfo, {\n        controlMap: this.state.controlMap,\n        auditInfoFields: auditInfoFields,\n        userRoleControlRights: this.state.userRoleControlRights,\n        selectedSpecification: this.props.Login.viewdetails,\n        userInfo: this.props.Login.userInfo,\n        selectedNode: this.props.Login.masterData.selectedNode,\n        selectedRecord: this.state.filterData,\n        approvalRoleActionDetail: this.props.Login.masterData.ApprovalRoleActionDetail,\n        screenName: \"IDS_SPECIFICATIONINFO\",\n        deleteRecord: this.deleteRecord,\n        addSpecification: this.props.addSpecification,\n        filterData: this.state.filterData //completeSpecification={this.completeSpecification}\n        ,\n        completeSpecification: this.validateTestGroupComplete,\n        approveSpecification: this.approveSpecification,\n        specificationReport: this.specificationReport,\n        retireSpec: this.retireSpec,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 41\n        }\n      }))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(DataGrid, {\n        primaryKeyField: \"nauditcommentscode\",\n        detailedFieldList: this.feildsForGrid,\n        extractedColumnList: this.feildsForGrid,\n        dataResult: this.props.Login.masterData[\"AuditModifiedComments\"] && this.props.Login.masterData[\"AuditModifiedComments\"].length > 0 && process(this.props.Login.masterData[\"AuditModifiedComments\"], this.props.screenName === undefined || this.props.screenName === \"IDS_AUDITVIEWDETAILS\" ? this.props.Login.sectionDataState ? this.props.Login.sectionDataState : {\n          skip: 0,\n          take: 50\n        } : {\n          skip: 0,\n          take: 50\n        }),\n        dataState: this.props.Login.screenName === undefined || this.props.Login.screenName === \"IDS_AUDITVIEWDETAILS\" ? this.props.Login.sectionDataState ? this.props.Login.sectionDataState : {\n          skip: 0,\n          take: 50\n        } : {\n          skip: 0,\n          take: 50\n        },\n        dataStateChange: event => this.dataStateAuditView(event),\n        controlMap: this.state.controlMap,\n        userRoleControlRights: this.state.userRoleControlRights,\n        pageable: true,\n        pageSizes: this.props.Login.settings && this.props.Login.settings[17].split(\",\").map(setting => parseInt(setting)),\n        scrollable: 'scrollable',\n        gridHeight: '600px',\n        hideColumnFilter: true,\n        selectedId: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 33\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 21\n      }\n    }));\n  }\n\n  // covertDatetoString(startDateValue, endDateValue) {\n  //     const startDate = new Date(startDateValue);\n  //     const endDate = new Date(endDateValue);\n  //     const prevMonth = validateTwoDigitDate(String(startDate.getMonth() + 1));\n  //     const currentMonth = validateTwoDigitDate(String(endDate.getMonth() + 1));\n  //     const prevDay = validateTwoDigitDate(String(startDate.getDate()));\n  //     const currentDay = validateTwoDigitDate(String(endDate.getDate()));\n  //     const fromDateOnly = startDate.getFullYear() + '-' + prevMonth + '-' + prevDay\n  //     const toDateOnly = endDate.getFullYear() + '-' + currentMonth + '-' + currentDay\n  //     const fromDate = fromDateOnly + \"T00:00:00\";\n  //     const toDate = toDateOnly + \"T23:59:59\";\n  //     return ({ fromDate, toDate, breadCrumbFrom: fromDateOnly, breadCrumbto: toDateOnly })\n  // }\n  componentDidUpdate(previousProps) {\n    let updateState = false;\n    let {\n      selectedRecord,\n      qualisModule,\n      qualisForms,\n      wholeQualisForms,\n      users,\n      userRole,\n      viewTypeAudit,\n      dataStateAll,\n      dataState,\n      dataResult,\n      skip,\n      take\n    } = this.state;\n\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n      updateState = true;\n      selectedRecord = this.props.Login.selectedRecord;\n    }\n\n    if (this.props.Login.masterData.QualisModule !== previousProps.Login.masterData.QualisModule || this.props.Login.masterData.QualisForms !== previousProps.Login.masterData.QualisForms || this.props.Login.masterData.Users !== previousProps.Login.masterData.Users || this.props.Login.masterData.UserRole !== previousProps.Login.masterData.UserRole) {\n      updateState = true;\n      const qualisModuleMap = constructOptionList(this.props.Login.masterData.QualisModule || [], \"nmodulecode\", \"smodulename\", \"nsorter\", \"ascending\", false); //const allQualisModuleList = qualisModule.get(\"OptionList\");\n\n      const qualisModuleList = qualisModuleMap.get(\"OptionList\");\n      const qualisFormsMap = constructOptionList(this.props.Login.masterData.QualisForms || [], \"nformcode\", \"sformname\", \"nsorter\", \"ascending\", false); // const allQualisFormsList = qualisForms.get(\"OptionList\");\n\n      let qualisFormsList = [];\n\n      if (selectedRecord && selectedRecord.nmodulecode && selectedRecord.nmodulecode.value) {\n        qualisFormsList = qualisFormsMap.get(\"OptionList\").filter(form => form.item.nmodulecode === selectedRecord.nmodulecode.value);\n      } else {\n        qualisFormsList = qualisFormsMap.get(\"OptionList\");\n      }\n\n      const usersMap = constructOptionList(this.props.Login.masterData.Users || [], \"nusercode\", \"susername\", undefined, undefined, undefined); //const allUsersList = users.get(\"OptionList\");\n\n      const usersList = usersMap.get(\"OptionList\");\n      const userRoleMap = constructOptionList(this.props.Login.masterData.UserRole || [], \"nuserrolecode\", \"suserrolename\", undefined, undefined, undefined); //const allUserRoleList = userRole.get(\"OptionList\");\n\n      const userRoleList = userRoleMap.get(\"OptionList\");\n      const viewTypeAuditMap = constructOptionList(this.props.Login.masterData.ViewTypeAudit || [], \"nauditactionfiltercode\", \"sauditactionfiltername\", \"nsorter\", \"ascending\", false);\n      const viewTypeAuditList = viewTypeAuditMap.get(\"OptionList\");\n      qualisModule = qualisModuleList;\n      qualisForms = qualisFormsList;\n      wholeQualisForms = qualisFormsList;\n      users = usersList;\n      userRole = userRoleList;\n      viewTypeAudit = viewTypeAuditList;\n      selectedRecord = {\n        nauditactionfiltercode: viewTypeAuditList.length > 0 ? {\n          \"value\": viewTypeAuditList[0].item.nauditactionfiltercode,\n          \"label\": viewTypeAuditList[0].item.sauditactionfiltername\n        } : this.state.selectedRecord[\"nauditactionfiltercode\"]\n      };\n    }\n\n    if (this.props.Login.resetDataGridPage && this.props.Login.resetDataGridPage !== previousProps.Login.resetDataGridPage) {\n      if (this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\n        dataStateAll.skip = 0;\n        updateState = true;\n      } else {\n        dataState.skip = 0;\n        updateState = true;\n      }\n    }\n\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\n      updateState = true;\n\n      if (selectedRecord && selectedRecord.nmodulecode && selectedRecord.nmodulecode.value) {\n        qualisForms = qualisForms.filter(form => form.item.nmodulecode === selectedRecord.nmodulecode.value);\n      } else {\n        qualisForms = wholeQualisForms;\n      }\n\n      if (this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\n        dataStateAll = {\n          skip: 0,\n          take: dataStateAll.take,\n          group: dataStateAll.group\n        };\n        updateState = true;\n      } else {\n        dataState = {\n          skip: 0,\n          take: dataState.take,\n          group: dataState.group\n        };\n        updateState = true;\n      } //const auditdate = (this.props.Login.masterData.AuditDetails && this.props.Login.masterData.AuditDetails.slice(dataState.skip, dataState.take + dataState.skip)) || []\n\n\n      const auditdate = this.props.Login.masterData.AuditDetails && this.props.Login.masterData.AuditDetails.slice(dataState.skip, this.props.Login.masterData.AuditDetails.length) || [];\n      dataResult = process(auditdate || [], dataState);\n      skip = this.props.Login.skip === undefined ? skip : this.props.Login.skip;\n      take = this.props.Login.take || take;\n    }\n\n    if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n      updateState = true;\n      const userRoleControlRights = [];\n\n      if (this.props.Login.userRoleControlRights) {\n        this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item => userRoleControlRights.push(item.ncontrolcode));\n      }\n\n      const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode);\n      this.setState({\n        userRoleControlRights,\n        controlMap,\n        data: this.props.Login.masterData.ControlRights\n      });\n    }\n\n    if (updateState) {\n      this.setState({\n        selectedRecord,\n        qualisModule,\n        qualisForms,\n        wholeQualisForms,\n        users,\n        userRole,\n        viewTypeAudit,\n        dataStateAll,\n        dataState,\n        dataResult,\n        skip,\n        take\n      });\n    }\n  }\n\n  componentDidMount() {\n    if (this.myRef.current.offsetParent.clientHeight !== this.state.gridHeight) {\n      this.setState({\n        gridHeight: this.myRef.current.offsetParent.clientHeight\n      });\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nexport default connect(mapStateToProps, {\n  callService,\n  crudMaster,\n  validateEsignCredential,\n  filterTransactionList,\n  updateStore,\n  filterColumnData,\n  getAuditTrailDetail,\n  getFilterAuditTrailRecords,\n  getFormNameByModule,\n  getExportExcel,\n  ViewAuditDetails\n})(injectIntl(AuditTrail));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/audittrail/AuditTrail.jsx"],"names":["React","connect","injectIntl","Row","Col","Button","Card","Nav","process","toast","PerfectScrollbar","ContentPanel","MediaLabel","constructOptionList","getStartOfDay","getEndOfDay","sortData","validateTwoDigitDate","convertDateValuetoString","rearrangeDateFormat","getControlMap","callService","crudMaster","validateEsignCredential","updateStore","filterTransactionList","filterColumnData","getAuditTrailDetail","getFilterAuditTrailRecords","getFormNameByModule","getExportExcel","ViewAuditDetails","DEFAULT_RETURN","AuditTrailFilter","TransactionListMaster","BreadcrumbComponent","DataGrid","SplitterLayout","ProductList","FontAwesomeIcon","faSync","SlideOutModal","SpecificationInfo","AuditTrail","Component","constructor","props","dataStateChange","event","state","selectedRecord","value","setState","dataResult","Login","masterData","AuditDetails","dataState","dataStateAll","kendoSkip","skip","kendoTake","data","filter","sort","auditdata","slice","take","paneSizeChange","d","splitChangeWidthPercentage","pageChange","page","exportExcelNew","fromDate","FromDate","toDate","ToDate","obj","userInfo","inputData","modulecode","formcode","usercode","userrole","viewtypecode","userinfo","sauditdate","SelectedAuditTrail","saudittraildate","nauditformcode","ncontrolcode","inputParam","closeModal","openModal","updateInfo","typeName","sectionDataState","selectedId","dataStateAuditView","viewdetails","console","log","screenName","expandChange","dataItem","target","expandField","handlePageChange","e","onReload","breadCrumbFrom","breadCrumbTo","breadCrumbModule","breadCrumbForm","breadCrumbUser","breadCrumbRole","breadCrumbViewType","ViewType","nauditactionfiltercode","postParamList","filterParam","label","sauditactionfiltername","item","searchRef","detailSkip","onFilterSubmit","onComboChange","comboData","fieldName","caseNo","qualisForms","wholeQualisForms","form","nmodulecode","handleDateChange","dateName","dateValue","viewTypeAuditList","viewTypeAudit","dFromDate","dToDate","fromMonth","String","getMonth","toMonth","fromYear","getFullYear","toYear","length","openFilter","showFilter","closeFilter","breadcrumbList","breadCrumbArray","push","breadCrumbto","myRef","createRef","settings","parseInt","group","field","dir","searchFieldList","masterStatus","error","isOpen","operation","gridHeight","undefined","userRoleControlRights","ControlRights","ConfirmDialogScreen","controlMap","Map","qualisModule","users","userRole","searchAuditRef","getDerivedStateFromProps","warn","render","has","get","feildsForGrid","needOldValueColumn","extractedColumnList","auditParam","moduleCode","formCode","userCode","viewTypeCode","inputListName","selectedObject","primaryKeyField","fetchUrl","fecthInputObject","filteredListName","clearFilter","updatedListname","unchangeList","changeList","breadCrumbData","auditInfoFields","searchedAudit","intl","formatMessage","id","split","map","setting","title","controlname","objectName","hidden","indexOf","onClick","selectedNode","filterData","ApprovalRoleActionDetail","deleteRecord","addSpecification","validateTestGroupComplete","approveSpecification","specificationReport","retireSpec","componentDidUpdate","previousProps","updateState","QualisModule","QualisForms","Users","UserRole","qualisModuleMap","qualisModuleList","qualisFormsMap","qualisFormsList","usersMap","usersList","userRoleMap","userRoleList","viewTypeAuditMap","ViewTypeAudit","resetDataGridPage","auditdate","nformcode","Object","values","componentDidMount","current","offsetParent","clientHeight","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport { Row, Col, Button, Card, Nav } from 'react-bootstrap';//Nav, Card, Button\r\n//import { Grid, GridColumn } from '@progress/kendo-react-grid';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { toast } from 'react-toastify';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport { ContentPanel, MediaLabel } from '../../components/App.styles';\r\nimport { constructOptionList, getStartOfDay, getEndOfDay, sortData, validateTwoDigitDate, convertDateValuetoString, rearrangeDateFormat, getControlMap } from '../../components/CommonScript';//showEsign, getControlMap,\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, filterTransactionList,\r\n    filterColumnData,\r\n    getAuditTrailDetail, getFilterAuditTrailRecords, getFormNameByModule, getExportExcel, ViewAuditDetails\r\n} from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport AuditTrailFilter from './AuditTrailFilter';\r\nimport TransactionListMaster from '../../components/TransactionListMaster';\r\nimport BreadcrumbComponent from '../../components/Breadcrumb.Component';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport SplitterLayout from 'react-splitter-layout';\r\nimport { ProductList } from '../product/product.styled';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faSync } from '@fortawesome/free-solid-svg-icons';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport SpecificationInfo from '../testgroup/SpecificationInfo';\r\n\r\n\r\nclass AuditTrail extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.myRef = React.createRef();\r\n        // this.searchAuditRef = React.createRef();\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5,\r\n            group: [{ field: \"viewPeriod\", dir: \"desc\" }] //field: \"groupDate\" , dir: \"desc\" \r\n        };\r\n\r\n        const dataStateAll = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5\r\n        };\r\n\r\n        this.searchFieldList = [\"sauditdate\"]\r\n\r\n        this.state = {\r\n            masterStatus: \"\",\r\n            sectionDataState: { skip: 0, take: 10 },\r\n\r\n            error: \"\",\r\n            isOpen: false,\r\n            selectedRecord: {},\r\n            //selectedcombo: {},\r\n            operation: \"\",\r\n            gridHeight: 'auto',\r\n            screenName: undefined,\r\n\r\n            userRoleControlRights: [],\r\n            ControlRights: undefined,\r\n            ConfirmDialogScreen: false,\r\n            controlMap: new Map(),\r\n\r\n            dataResult: [],\r\n            dataState: dataState,\r\n            dataStateAll: dataStateAll,\r\n            qualisModule: [],\r\n            qualisForms: [],\r\n            users: [],\r\n            userRole: [],\r\n            viewTypeAudit: [],\r\n            wholeQualisForms: [],\r\n            skip: 0,\r\n            take: this.props.Login.settings && this.props.Login.settings[3],\r\n            kendoSkip: 0,\r\n            kendoTake: this.props.Login.settings ? parseInt(this.props.Login.settings[16]) : 5,\r\n            splitChangeWidthPercentage: 30,\r\n        };\r\n        this.searchRef = React.createRef();\r\n        this.searchAuditRef = React.createRef();\r\n\r\n    }\r\n    dataStateChange = (event) => {\r\n        if (this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\r\n            this.setState({\r\n                dataResult: process(this.props.Login.masterData.AuditDetails || [], event.dataState),\r\n                dataStateAll: event.dataState, kendoSkip: event.dataState.skip, kendoTake: event.dataState.skip\r\n            });\r\n        }\r\n        else {\r\n            let data = [];\r\n            if (event.dataState.filter === null && event.dataState.sort === null) {\r\n                let auditdata = (this.props.Login.masterData.AuditDetails &&\r\n                    this.props.Login.masterData.AuditDetails.slice(0,\r\n                        event.dataState.take + event.dataState.skip)) || []\r\n                data = process(auditdata || [], event.dataState)\r\n            } else {\r\n\r\n                data = process(this.props.Login.masterData.AuditDetails || [], event.dataState)\r\n\r\n            }\r\n            this.setState({\r\n                dataResult: data,\r\n                dataState: event.dataState,\r\n            });\r\n        }\r\n    }\r\n\r\n    paneSizeChange = (d) => {\r\n        this.setState({\r\n            splitChangeWidthPercentage: d\r\n        })\r\n    }\r\n\r\n    pageChange = (event) => {\r\n        this.setState({\r\n            kendoSkip: event.page.skip,\r\n            kendoTake: event.page.take\r\n        })\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    exportExcelNew = () => {\r\n        let fromDate = this.props.Login.masterData.FromDate;\r\n        let toDate = this.props.Login.masterData.ToDate;\r\n\r\n        let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);\r\n        let inputData = {\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n            formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n            usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n            userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n            viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\r\n            userinfo: this.props.Login.userInfo,\r\n            sauditdate: this.props.Login.masterData.SelectedAuditTrail.saudittraildate,\r\n            nauditformcode: 78,\r\n            ncontrolcode: 78\r\n\r\n        }\r\n\r\n        let inputParam = { inputData }\r\n        this.props.getExportExcel(inputParam);\r\n        // if(this.props.Login.resultStatus === \"Success\"){\r\n        //     toast.info(\"Excel export successfully\");\r\n        // }\r\n    }\r\n\r\n    render() {\r\n        //const ViewAuditDetails = props.controlMap.has(\"ViewAuditDetails\") && props.controlMap.get(\"ViewAuditDetails\").ncontrolcode;\r\n        const ViewAuditDetails = this.state.controlMap.has(\"ViewAuditDetails\") && this.state.controlMap.get(\"ViewAuditDetails\").ncontrolcode;\r\n\r\n        this.props.Login.masterData.AuditDetails = this.props.Login.masterData.AuditDetails &&\r\n            sortData(this.props.Login.masterData.AuditDetails, \"descending\", \"nauditcode\")\r\n\r\n        this.feildsForGrid =\r\n            this.props.Login.needOldValueColumn ? [\r\n                { \"idsName\": \"IDS_FIELDNAME\", \"dataField\": \"sfieldname\", \"width\": \"200px\" },\r\n                { \"idsName\": \"IDS_OLDVALUE\", \"dataField\": \"soldvalue\", \"width\": \"100px\" },\r\n                { \"idsName\": \"IDS_NEWVALUE\", \"dataField\": \"snewvalue\", \"width\": \"100px\" }] :\r\n                [\r\n                    { \"idsName\": \"IDS_FIELDNAME\", \"dataField\": \"sfieldname\", \"width\": \"200px\" },\r\n                    { \"idsName\": \"IDS_NEWVALUE\", \"dataField\": \"snewvalue\", \"width\": \"100px\" }\r\n                ];\r\n        this.extractedColumnList = [\r\n            { \"idsName\": \"IDS_AUDITDATE\", \"dataField\": \"sauditdate\", \"width\": \"200px\", \"componentName\": \"date\" },\r\n            { \"idsName\": \"IDS_AUDITACTION\", \"dataField\": \"sauditaction\", \"width\": \"200px\" },\r\n            //  { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"scomments\", \"width\": \"350px\" },\r\n            { \"idsName\": \"IDS_NEWCOMMENTS\", \"dataField\": \"scomments\", \"width\": \"350px\" },\r\n            { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_USERROLE\", \"dataField\": \"suserrolename\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_ACTIONTYPE\", \"dataField\": \"sactiontype\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_MODULENAME\", \"dataField\": \"smodulename\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_FORMNAME\", \"dataField\": \"sformname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_REASON\", \"dataField\": \"spredefinedreason\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_ESIGNCOMMENTS\", \"dataField\": \"sreason\", \"width\": \"200px\" },\r\n\r\n\r\n        ]\r\n\r\n        let fromDate = \"\";\r\n        let toDate = \"\";\r\n\r\n        if (this.props.Login.masterData && this.props.Login.masterData.FromDate) {\r\n            fromDate = (this.state.selectedRecord[\"fromdate\"] && getStartOfDay(this.state.selectedRecord[\"fromdate\"])) || rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.FromDate);\r\n            toDate = (this.state.selectedRecord[\"todate\"] && getEndOfDay(this.state.selectedRecord[\"todate\"])) || rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.ToDate);\r\n        }\r\n\r\n        let obj = convertDateValuetoString(this.props.Login.masterData.FromDate,\r\n            this.props.Login.masterData.ToDate,\r\n            this.props.Login.userInfo);\r\n\r\n        let auditParam = {\r\n            masterData: this.props.Login.masterData,\r\n            userinfo: this.props.Login.userInfo,\r\n            // fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\r\n            // toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\r\n            // moduleCode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n            // formCode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n            // userCode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n            // userRole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n            // viewTypeCode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0\r\n\r\n            skip: this.state.skip,\r\n            take: this.state.take,\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            moduleCode: this.props.Login.masterData.breadCrumbModule ? this.props.Login.masterData.breadCrumbModule.value : 0,\r\n            formCode: this.props.Login.masterData.breadCrumbForm ? this.props.Login.masterData.breadCrumbForm.value : 0,\r\n            userCode: this.props.Login.masterData.breadCrumbUser ? this.props.Login.masterData.breadCrumbUser.value : 0,\r\n            userRole: this.props.Login.masterData.breadCrumbRole ? this.props.Login.masterData.breadCrumbRole.value : 0,\r\n            viewTypeCode: this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.value :\r\n                this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode : 0\r\n            //viewTypeCode :this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode:0\r\n        }\r\n\r\n        this.filterParam = {\r\n            inputListName: \"AuditTrail\", selectedObject: \"SelectedAuditTrail\", primaryKeyField: \"saudittraildate\",\r\n            fetchUrl: \"audittrail/getAuditTrailDetail\", masterData: this.props.Login.masterData,\r\n\r\n            fecthInputObject: {\r\n                // fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\r\n                // toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\r\n                // modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n                // formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n                // usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n                // userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n                // viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\r\n\r\n                userinfo: this.props.Login.userInfo,\r\n                fromDate: obj.fromDate,\r\n                toDate: obj.toDate,\r\n                modulecode: this.props.Login.masterData.breadCrumbModule ? this.props.Login.masterData.breadCrumbModule.value : 0,\r\n                formcode: this.props.Login.masterData.breadCrumbForm ? this.props.Login.masterData.breadCrumbForm.value : 0,\r\n                usercode: this.props.Login.masterData.breadCrumbUser ? this.props.Login.masterData.breadCrumbUser.value : 0,\r\n                userrole: this.props.Login.masterData.breadCrumbRole ? this.props.Login.masterData.breadCrumbRole.value : 0,\r\n                viewtypecode: this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.value :\r\n                    this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode : 0\r\n\r\n            },\r\n            filteredListName: \"searchedAudit\",\r\n            clearFilter: \"no\",\r\n            updatedListname: \"SelectedAuditTrail\",\r\n            searchRef: this.searchAuditRef,\r\n            searchFieldList: this.searchFieldList,\r\n            unchangeList: [\"QualisModule\", \"QualisForms\", \"Users\", \"UserRole\", \"ViewTypeAudit\"],\r\n            changeList: [\"AuditDetails\"]\r\n\r\n        };\r\n\r\n        this.breadCrumbData = this.breadcrumbList();\r\n        //console.log('-->123 :', this.props.Login.masterData.AuditTrail)\r\n\r\n\r\n        // this.state.selectedRecord && this.state.selectedRecord[\"nmodulecode\"] &&\r\n        // {\r\n        //     \"label\": \"IDS_MODULENAME\",\r\n        //     \"value\": this.state.selectedRecord[\"nmodulecode\"].label \r\n        // }\r\n        // this.state.selectedRecord[\"nformcode\"] &&\r\n        //  {\r\n        //     \"label\": \"IDS_FORMNAME\",\r\n        //     \"value\": this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].label : \"\"\r\n        // }, \r\n        // this.state.selectedRecord[\"nusercode\"] &&\r\n        // {\r\n        //     \"label\": \"IDS_USERNAME\",\r\n        //     \"value\": this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].label : \"\"\r\n        // }, \r\n        // this.state.selectedRecord[\"nuserrolecode\"] &&\r\n        // {\r\n        //     \"label\": \"IDS_USERROLE\",\r\n        //     \"value\": this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].label : \"\"\r\n\r\n        // }\r\n        // ]\r\n\r\n        // let auditInputData = {\r\n        //     fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\r\n        //     toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\r\n        //     modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n        //     formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n        //     usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n        //     userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n        //     viewtypecode: this.state.selectedcombo[\"nauditactionfiltercode\"] ? this.state.selectedcombo[\"nauditactionfiltercode\"].value : 0,\r\n        //     userinfo: this.props.Login.userInfo\r\n        // }\r\n\r\n        this.postParamList = [\r\n            {\r\n                filteredListName: \"searchedAudit\",\r\n                clearFilter: \"no\",\r\n                searchRef: this.searchRef,\r\n                primaryKeyField: \"saudittraildate\",\r\n                fetchUrl: \"audittrail/getFilterAuditTrailRecords\",\r\n                fecthInputObject: this.filterParam,\r\n                //childRefs: [{ ref: this.searchSubSampleRef, childFilteredListName: \"searchedSubSample\" }],\r\n                selectedObject: \"SelectedAuditTrail\",\r\n                inputListName: \"AuditTrail\",\r\n                updatedListname: \"SelectedAuditTrail\",\r\n                unchangeList: [\"QualisModule\", \"QualisForms\", \"Users\", \"UserRole\", \"ViewTypeAudit\"]\r\n            }];\r\n        const auditInfoFields = [{ \"fieldName\": \"sauditaction\", \"label\": \"IDS_AUDITACTION\" },\r\n        { \"fieldName\": \"sformname\", \"label\": \"IDS_SCREEN\" },\r\n        { \"fieldName\": \"smodulename\", \"label\": \"IDS_MODULENAME\" },\r\n        { \"fieldName\": \"sauditdate\", \"label\": \"IDS_AUDITDATE\" },\r\n        { \"fieldName\": \"suserrolename\", \"label\": \"IDS_USERROLENAME\" },\r\n        { \"fieldName\": \"susername\", \"label\": \"IDS_USERNAME\" }];\r\n        return (\r\n            <>\r\n                <div className=\"mtop-fixed-breadcrumb client-listing-wrap\">\r\n                    <BreadcrumbComponent breadCrumbItem={this.breadCrumbData} />\r\n                    <Row noGutters>\r\n                        {/* //ref={(parentHeight) => { this.parentHeight = parentHeight }} */}\r\n                        <Col md={12} className=\"parent-port-height sticky_head_parent\" >\r\n                            <SplitterLayout borderColor=\"#999\"\r\n                                primaryIndex={1}\r\n                                percentage={true}\r\n                                secondaryInitialSize={this.state.splitChangeWidthPercentage}\r\n                                onSecondaryPaneSizeChange={this.paneSizeChange}\r\n                                primaryMinSize={40}\r\n                                secondaryMinSize={20}\r\n                            >\r\n                                {/* <Col md={3}> */}\r\n                                <TransactionListMaster\r\n                                    splitChangeWidthPercentage={this.state.splitChangeWidthPercentage}\r\n                                    //paneHeight={this.state.parentHeight}\r\n                                    // masterList={this.props.Login.masterData.searchedAudit || \r\n                                    //     this.props.Login.masterData.AuditTrail ? sortData(this.props.Login.masterData.AuditTrail,'descending','saudittraildate') : []}\r\n                                    // masterList={this.props.Login.masterData.searchedAudit ? this.props.Login.masterData.searchedAudit :\r\n                                    //   this.props.Login.masterData.AuditTrail ? sortData(this.props.Login.masterData.AuditTrail, 'descending', 'saudittraildate') : []}\r\n\r\n                                    masterList={this.props.Login.masterData.searchedAudit ||\r\n                                        (this.props.Login.masterData.AuditTrail || [])}\r\n                                    selectedMaster={[this.props.Login.masterData.SelectedAuditTrail]}\r\n                                    primaryKeyField=\"saudittraildate\"\r\n                                    getMasterDetail={this.props.getAuditTrailDetail}\r\n                                    inputParam={auditParam}\r\n                                    //additionalParam={['napprovalversioncode']}\r\n                                    mainField=\"sauditdate\"\r\n                                    selectedListName=\"SelectedAuditTrail\"\r\n                                    filterColumnData={this.props.filterTransactionList}\r\n                                    searchListName=\"searchedAudit\"\r\n                                    searchRef={this.searchRef}\r\n                                    filterParam={this.filterParam}\r\n                                    objectName=\"auditrail\"\r\n                                    listName=\"IDS_AUDITTRAIL\"\r\n                                    showFilter={this.props.Login.showFilter}\r\n                                    openFilter={this.openFilter}\r\n                                    closeFilter={this.closeFilter}\r\n                                    onFilterSubmit={this.onFilterSubmit}\r\n                                    // needAccordianFilter={true}\r\n                                    handlePageChange={this.handlePageChange}\r\n                                    skip={this.state.skip}\r\n                                    take={this.state.take}\r\n                                    needFilter={true}\r\n                                    needAccordianFilter={false}\r\n                                    filterComponent={[\r\n                                        {\r\n                                            \"IDS_AUDITTRAIL\":\r\n                                                <AuditTrailFilter\r\n                                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                                    filterModuleName={this.state.qualisModule}\r\n                                                    filterFormName={this.state.qualisForms}\r\n                                                    filterViewType={this.state.viewTypeAudit}\r\n                                                    filterUsers={this.state.users}\r\n                                                    filterUserRole={this.state.userRole}\r\n                                                    handleDateChange={this.handleDateChange}\r\n                                                    fromDate={fromDate}\r\n                                                    toDate={toDate}\r\n                                                    userInfo={this.props.Login.userInfo}\r\n                                                    onComboChange={this.onComboChange}\r\n                                                />\r\n                                        }\r\n                                    ]}\r\n                                    // accordianfilterComponent={[\r\n                                    //     {\r\n                                    //         \"IDS_AUDITTRAIL\":\r\n                                    //             <ViewTypeFilter\r\n                                    //                 selectedRecord={this.state.selectedcombo || {}}\r\n                                    //                 filterViewType={this.state.viewTypeAudit}\r\n                                    //                 userInfo={this.props.Login.userInfo}\r\n                                    //                 onComboChange={this.onComboChange}\r\n                                    //             />\r\n                                    //     }\r\n                                    // ]}\r\n                                    commonActions={\r\n                                        <ProductList className=\"d-flex product-category float-right\">\r\n                                            {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n                                            <Button className=\"btn btn-circle outline-grey ml-2\" variant=\"link\"\r\n                                                onClick={() => this.onReload()}\r\n                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_REFRESH\" })}>\r\n                                                <FontAwesomeIcon icon={faSync} style={{ \"width\": \"0.6!important\" }} />\r\n                                            </Button>\r\n                                            {/* </Tooltip> */}\r\n                                        </ProductList>\r\n                                    }\r\n                                />\r\n                                {/* <SplitterLayout vertical borderColor=\"#999\" percentage={true} primaryIndex={1} secondaryInitialSize={400} customClassName=\"fixed_list_height\"> */}\r\n                                {/* <Col md={9}> */}\r\n                                <PerfectScrollbar>\r\n                                    <div ref={this.myRef}>\r\n                                        {this.props.Login.masterData.SelectedAuditTrail && this.props.Login.masterData.SelectedAuditTrail !== undefined ?\r\n                                            <ContentPanel className=\"panel-main-content\">\r\n                                                <Card className=\"border-0\">\r\n                                                    {/* <Card.Header className=\"padding-class\">\r\n                                                    <Card.Title className=\"product-title-main\">{this.props.Login.masterData.SelectedAuditTrail.sauditdate}\r\n                                                            <div className=\"d-flex product-category\" style={{ float: \"right\",marginRight:\"1rem\" }}>\r\n                                                            <Nav.Link className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                // hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_DOWNLOADEXCEL\" })}\r\n                                                                //data-for=\"tooltip_list_wrap\"\r\n                                                                onClick={this.exportExcelNew}>\r\n                                                                <FontAwesomeIcon icon={faFileExcel} />\r\n                                                            </Nav.Link>\r\n                                                            </div>\r\n                                                    </Card.Title>\r\n                                            </Card.Header> */}\r\n\r\n                                                    <Card.Body className='form-static-wrap padding-class'>\r\n                                                        <DataGrid\r\n                                                            // gridWidth={\"57.5rem\"}\r\n                                                            selectedId={this.props.Login.selectedId}\r\n                                                            gridHeight={this.state.gridHeight + 'px'}\r\n                                                            expandField=\"expanded\"\r\n                                                            userRoleControlRights={this.state.userRoleControlRights && this.state.userRoleControlRights}\r\n                                                            pageable={true}\r\n                                                            pageSizes={this.props.Login.settings && this.props.Login.settings[17].split(\",\").map(setting => parseInt(setting))}\r\n                                                            scrollable={\"scrollable\"}\r\n                                                            primaryKeyField=\"nauditcode\"\r\n                                                            data={this.props.Login.masterData.AuditDetails || []}\r\n                                                            dataResult={this.state.dataResult}\r\n                                                            //total={this.props.Login.masterData.AuditDetails && this.props.Login.masterData.AuditDetails.length || 0}\r\n                                                            //  dataResult={process(this.props.Login.masterData.AuditDetails || [],\r\n                                                            //  this.state.selectedRecord[\"nauditactionfiltercode\"]\r\n                                                            //     && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1\r\n                                                            //   ? this.state.dataStateAll : this.state.dataState)}\r\n                                                            dataState={this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll\r\n                                                                : this.state.dataState}\r\n                                                            dataStateChange={this.dataStateChange}\r\n                                                            extractedColumnList={this.extractedColumnList || []}\r\n                                                            controlMap={this.state.controlMap}\r\n                                                            methodUrl=\"AuditTrail\"\r\n                                                            groupable={this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? true : false : false}\r\n                                                            //isActionRequired={false}\r\n                                                            isToolBarRequired={true}\r\n                                                            isAddRequired={false}\r\n                                                            isRefreshRequired={false}\r\n                                                            isDownloadPDFRequired={false}\r\n                                                            isDownloadExcelRequired={true}\r\n                                                            isExportExcelRequired={true}\r\n                                                            isIdsField=\"yes\"\r\n                                                            isActionRequired={true}\r\n                                                            actionIcons={[{\r\n                                                                title: this.props.intl.formatMessage({ id: \"IDS_VIEWCHANGES\" }),\r\n                                                                controlname: \"faEye\",\r\n                                                                objectName: \"AuditDetails\",\r\n                                                                hidden: this.state.userRoleControlRights.indexOf(ViewAuditDetails) === -1,\r\n                                                                onClick: (viewdetails) => this.ViewAuditDetails(viewdetails)\r\n                                                            }]}\r\n                                                            exportExcelNew={this.exportExcelNew}\r\n                                                            onExpandChange={this.expandChange}\r\n                                                            hideDetailBand={true}\r\n                                                        />\r\n                                                    </Card.Body>\r\n                                                </Card>\r\n                                            </ContentPanel>\r\n\r\n                                            : \"\"\r\n                                        }\r\n                                    </div>\r\n                                </PerfectScrollbar>\r\n                            </SplitterLayout>\r\n                            {/* </SplitterLayout> */}\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n                {\r\n                    this.props.Login.openModal &&\r\n                    <SlideOutModal show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={'IDS_MODIFIEDCOMMENTS'}\r\n                        hideSave={true}\r\n                        addComponent={\r\n                            <>\r\n\r\n                                <Card className='one' >\r\n                                    <Card.Body>\r\n                                        <SpecificationInfo\r\n                                            controlMap={this.state.controlMap}\r\n                                            auditInfoFields={auditInfoFields}\r\n                                            userRoleControlRights={this.state.userRoleControlRights}\r\n                                            selectedSpecification={this.props.Login.viewdetails}\r\n                                            userInfo={this.props.Login.userInfo}\r\n                                            selectedNode={this.props.Login.masterData.selectedNode}\r\n                                            selectedRecord={this.state.filterData}\r\n                                            approvalRoleActionDetail={this.props.Login.masterData.ApprovalRoleActionDetail}\r\n                                            screenName=\"IDS_SPECIFICATIONINFO\"\r\n                                            deleteRecord={this.deleteRecord}\r\n                                            addSpecification={this.props.addSpecification}\r\n                                            filterData={this.state.filterData}\r\n                                            //completeSpecification={this.completeSpecification}\r\n                                            completeSpecification={this.validateTestGroupComplete}\r\n                                            approveSpecification={this.approveSpecification}\r\n                                            specificationReport={this.specificationReport}\r\n                                            retireSpec={this.retireSpec}\r\n                                        />\r\n                                    </Card.Body>\r\n                                </Card>\r\n                                <br></br>\r\n\r\n                                <DataGrid\r\n                                    primaryKeyField=\"nauditcommentscode\"\r\n                                    detailedFieldList={this.feildsForGrid}\r\n                                    extractedColumnList={this.feildsForGrid}\r\n                                    dataResult={this.props.Login.masterData[\"AuditModifiedComments\"] && this.props.Login.masterData[\"AuditModifiedComments\"].length > 0\r\n                                        && process(this.props.Login.masterData[\"AuditModifiedComments\"],\r\n                                            (this.props.screenName === undefined || this.props.screenName === \"IDS_AUDITVIEWDETAILS\")\r\n                                                ? this.props.Login.sectionDataState? this.props.Login.sectionDataState: { skip: 0, take: 50 } : { skip: 0, take: 50 })}\r\n                                    dataState={(this.props.Login.screenName === undefined || this.props.Login.screenName === \"IDS_AUDITVIEWDETAILS\")\r\n                                        ? this.props.Login.sectionDataState?this.props.Login.sectionDataState:{ skip: 0, take: 50 } : { skip: 0, take: 50 }}\r\n                                    dataStateChange={(event) => this.dataStateAuditView(  event )}\r\n                                    controlMap={this.state.controlMap}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    pageable={true}\r\n                                    pageSizes={this.props.Login.settings && this.props.Login.settings[17].split(\",\").map(setting => parseInt(setting))} scrollable={'scrollable'}\r\n                                    gridHeight={'600px'}\r\n                                    hideColumnFilter={true}\r\n                                    selectedId={0}\r\n                                >\r\n                                </DataGrid>\r\n                            </>\r\n                        }\r\n                    />\r\n\r\n\r\n\r\n                }\r\n            </>\r\n\r\n        );\r\n\r\n    }\r\n    closeModal = () => {\r\n        let openModal = this.props.Login.openModal;\r\n        openModal = false;\r\n        //let selectedId = this.props.Login.selectedId;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal,sectionDataState:{skip:0,take:50},selectedId:null}\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\ndataStateAuditView=(event)=>{\r\n\r\n    const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: {sectionDataState: event.dataState}\r\n    }\r\n\r\n    this.props.updateStore(updateInfo);\r\n}\r\n\r\n    ViewAuditDetails = (viewdetails) => {\r\n        console.log('ewe', viewdetails)\r\n        let openModal = this.props.Login.openModal;\r\n        openModal = true;\r\n        let screenName = 'IDS_AUDITVIEWDETAILS'\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, screenName }\r\n        }\r\n        this.props.ViewAuditDetails(this.props.Login.masterData, this.props.Login.userInfo, viewdetails, screenName);\r\n    };\r\n    expandChange = (event) => {\r\n        event.dataItem[event.target.props.expandField] = event.value;\r\n        this.setState({\r\n            dataResult: process(this.props.Login.masterData.AuditDetails || [], this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll :\r\n                this.state.dataState),\r\n            dataState: this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll\r\n                : this.state.dataState,\r\n        });\r\n    };\r\n    handlePageChange = e => {\r\n        this.setState({\r\n            skip: e.skip,\r\n            take: e.take\r\n        });\r\n        //setTimeout(() => { this._scrollBarRef.updateScroll() })\r\n    };\r\n\r\n\r\n    onReload = () => {\r\n\r\n        // let dFromDate = this.props.Login.masterData.breadCrumbFrom ? (this.props.Login.masterData.breadCrumbFrom) : this.props.Login.masterData.FromDate;\r\n        // let dToDate = this.props.Login.masterData.breadCrumbTo ? (this.props.Login.masterData.breadCrumbTo) : this.props.Login.masterData.ToDate;\r\n        //var dTempFromDate = this.state.selectedRecord[\"fromdate\"] ? this.state.selectedRecord[\"fromdate\"] : this.props.Login.masterData.FromDate;\r\n        //let dTempToDate = this.state.selectedRecord[\"todate\"] ? this.state.selectedRecord[\"todate\"] : this.props.Login.masterData.ToDate;\r\n        //let temp = dFromDate.indexOf('-');\r\n        // let fromMonth = (dTempFromDate.getMonth()+1);\r\n        // let toMonth = (dTempToDate.getMonth()+1);\r\n        // let fromMonth = String(new Date(dFromDate).getMonth() + 1)\r\n        // let toMonth = String(new Date(dToDate).getMonth() + 1)\r\n        // let fromYear = dFromDate.substring(0, 4);\r\n        // let toYear = dToDate.substring(0, 4);\r\n        // let ntempviewtypecode = 0;\r\n        let breadCrumbFrom = this.props.Login.masterData.FromDate ? this.props.Login.masterData.FromDate : this.props.Login.masterData.breadCrumbFrom;\r\n        let breadCrumbTo = this.props.Login.masterData.ToDate ? this.props.Login.masterData.ToDate : this.props.Login.masterData.breadCrumbTo;\r\n        let breadCrumbModule = this.props.Login.masterData.breadCrumbModule\r\n        let breadCrumbForm = this.props.Login.masterData.breadCrumbForm\r\n        let breadCrumbUser = this.props.Login.masterData.breadCrumbUser\r\n        let breadCrumbRole = this.props.Login.masterData.breadCrumbRole\r\n        let breadCrumbViewType = this.props.Login.masterData.breadCrumbViewType\r\n            ? this.props.Login.masterData.breadCrumbViewType : this.props.Login.ViewType;\r\n\r\n        let fromDate = this.props.Login.masterData.FromDate;\r\n        let toDate = this.props.Login.masterData.ToDate;\r\n\r\n        let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);\r\n        let inputData = {\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            modulecode: breadCrumbModule ? breadCrumbModule.value : 0,\r\n            formcode: breadCrumbForm ? breadCrumbForm.value : 0,\r\n            usercode: breadCrumbUser ? breadCrumbUser.value : 0,\r\n            userrole: breadCrumbRole ? breadCrumbRole.value : 0,\r\n            viewtypecode: breadCrumbViewType ? breadCrumbViewType.value\r\n                : this.props.Login.masterData.ViewType.nauditactionfiltercode,\r\n\r\n            // viewtypecode : this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.nauditactionfiltercode :0,\r\n            // viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : 0,\r\n            userinfo: this.props.Login.userInfo,\r\n            postParamList: this.filterParam,\r\n        }\r\n\r\n        let masterData = {\r\n            ...this.props.Login.masterData, breadCrumbFrom, breadCrumbTo, breadCrumbModule,\r\n            breadCrumbForm, breadCrumbUser, breadCrumbRole,\r\n            //breadCrumbViewType : breadCrumbViewType ? breadCrumbViewType :\r\n            // this.props.Login.masterData.ViewType\r\n            breadCrumbViewType: breadCrumbViewType ? breadCrumbViewType\r\n                : {\r\n                    label: this.props.Login.masterData.ViewType.sauditactionfiltername,\r\n                    value: this.props.Login.masterData.ViewType.nauditactionfiltercode,\r\n                    item: this.props.Login.masterData.ViewType\r\n                }\r\n        }\r\n\r\n\r\n        let inputParam = { masterData, inputData, searchRef: this.searchRef, detailSkip: this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll.skip : this.state.dataState.skip }\r\n        this.props.getFilterAuditTrailRecords(inputParam)\r\n    }\r\n\r\n    onFilterSubmit = () => {\r\n\r\n        let breadCrumbFrom = this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.FromDate);\r\n        let breadCrumbTo = this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.ToDate);\r\n        let breadCrumbModule = this.state.selectedRecord['nmodulecode']\r\n        let breadCrumbForm = this.state.selectedRecord['nformcode']\r\n        let breadCrumbUser = this.state.selectedRecord['nusercode']\r\n        let breadCrumbRole = this.state.selectedRecord['nuserrolecode']\r\n        let breadCrumbViewType = this.state.selectedRecord['nauditactionfiltercode']\r\n\r\n        let masterData = {\r\n            ...this.props.Login.masterData, breadCrumbFrom, breadCrumbTo, breadCrumbModule, breadCrumbForm, breadCrumbUser, breadCrumbRole, breadCrumbViewType\r\n        }\r\n        let fromDate = this.state.selectedRecord[\"fromdate\"] ? this.state.selectedRecord[\"fromdate\"] : this.props.Login.masterData.FromDate;\r\n        let toDate = this.state.selectedRecord[\"todate\"] ? this.state.selectedRecord[\"todate\"] : this.props.Login.masterData.ToDate;\r\n\r\n        let obj = convertDateValuetoString(fromDate, toDate, this.props.Login.userInfo);\r\n        let inputData = {\r\n            fromDate: obj.fromDate,\r\n            toDate: obj.toDate,\r\n            modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n            formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n            usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n            userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n            //viewtypecode: ntempviewtypecode,//this.state.selectedcombo[\"nviewtypecode\"] ? this.state.selectedcombo[\"nviewtypecode\"].value:0,\r\n            viewtypecode: this.state.selectedRecord[\"nauditactionfiltercode\"] ? this.state.selectedRecord[\"nauditactionfiltercode\"].value : -1,\r\n            userinfo: this.props.Login.userInfo,\r\n            postParamList: this.filterParam,\r\n        }\r\n\r\n        let inputParam = {\r\n            masterData, inputData, searchRef: this.searchRef,\r\n            detailSkip: this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1 ? this.state.dataStateAll.skip : this.state.dataState.skip\r\n        }\r\n        this.props.getFilterAuditTrailRecords(inputParam)\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName, caseNo) => {\r\n        if (comboData != null) {\r\n            if (fieldName === \"nmodulecode\" || fieldName === \"nformcode\"\r\n                || fieldName === \"nusercode\" || fieldName === \"nuserrolecode\" || fieldName === \"nauditactionfiltercode\") {\r\n                const selectedRecord = this.state.selectedRecord || {};\r\n                selectedRecord[fieldName] = comboData;\r\n                // let qualisForms = this.state.qualisForms;\r\n                let qualisForms = this.state.wholeQualisForms;\r\n                if (fieldName === \"nmodulecode\") {\r\n\r\n                    selectedRecord[\"nformcode\"] = \"\";\r\n                    qualisForms = qualisForms.filter(form => form.item.nmodulecode === comboData.value);\r\n\r\n                } else if (selectedRecord.nmodulecode && selectedRecord.nmodulecode.value) {\r\n\r\n                    qualisForms = qualisForms.filter(form => form.item.nmodulecode === selectedRecord.nmodulecode.value);\r\n\r\n                }\r\n                this.setState({ selectedRecord, qualisForms });\r\n            }\r\n\r\n\r\n\r\n            /*if (fieldName === \"nauditactionfiltercode\") {\r\n \r\n                this.searchRef.current.value = \"\";\r\n \r\n                const selectedcombo = this.state.selectedcombo || {};\r\n                selectedcombo[fieldName] = comboData;\r\n                const dataStateAll = {\r\n                    skip: 0,\r\n                    take: 100\r\n                };\r\n \r\n                this.setState({ selectedcombo, dataStateAll });\r\n \r\n                let masterData = {\r\n                    ...this.props.Login.masterData, searchedAudit: undefined\r\n                }\r\n                let inputData = {\r\n                    fromDate: this.state.selectedRecord[\"fromdate\"] ? getStartOfDay(this.state.selectedRecord[\"fromdate\"]) : this.props.Login.masterData.FromDate,\r\n                    toDate: this.state.selectedRecord[\"todate\"] ? getEndOfDay(this.state.selectedRecord[\"todate\"]) : this.props.Login.masterData.ToDate,\r\n                    modulecode: this.state.selectedRecord[\"nmodulecode\"] ? this.state.selectedRecord[\"nmodulecode\"].value : 0,\r\n                    formcode: this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].value : 0,\r\n                    usercode: this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].value : 0,\r\n                    userrole: this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : 0,\r\n                    viewtypecode: this.state.selectedcombo[\"nauditactionfiltercode\"] ? this.state.selectedcombo[\"nauditactionfiltercode\"].value : 0,\r\n                    userinfo: this.props.Login.userInfo,\r\n                    postParamList: this.filterParam,\r\n                }\r\n \r\n                let inputParam = { masterData, inputData }\r\n                this.props.getFilterAuditTrailRecords(inputParam)\r\n            }*/\r\n\r\n        }\r\n        else {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n            selectedRecord[fieldName] = comboData;\r\n            if (fieldName === 'nmodulecode') {\r\n                selectedRecord[\"nformcode\"] = \"\";\r\n                const qualisForms = this.state.wholeQualisForms;\r\n                this.setState({ selectedRecord, qualisForms });\r\n            }\r\n            else\r\n                this.setState({ selectedRecord });\r\n        }\r\n\r\n    }\r\n\r\n    handleDateChange = (dateName, dateValue) => {\r\n        let selectedRecord = this.state.selectedRecord;\r\n        selectedRecord[dateName] = dateValue;\r\n\r\n\r\n        //this.setState({selectedRecord});\r\n\r\n        let viewTypeAuditList = this.state.viewTypeAudit;\r\n\r\n        let dFromDate = this.state.selectedRecord[\"fromdate\"] ? rearrangeDateFormat(this.props.Login.userInfo, this.state.selectedRecord[\"fromdate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.FromDate);\r\n        let dToDate = this.state.selectedRecord[\"todate\"] ? rearrangeDateFormat(this.props.Login.userInfo, this.state.selectedRecord[\"todate\"]) : rearrangeDateFormat(this.props.Login.userInfo, this.props.Login.masterData.ToDate);\r\n        // let ntempviewtypecode = 0;\r\n        let fromMonth = String(dFromDate.getMonth() + 1)\r\n        let toMonth = String(dToDate.getMonth() + 1)\r\n        let fromYear = String(dFromDate.getFullYear());\r\n        let toYear = String(dToDate.getFullYear());\r\n\r\n        if (fromYear !== toYear) {\r\n\r\n            selectedRecord[\"nauditactionfiltercode\"] =\r\n                viewTypeAuditList.length > 0 ? {\r\n                    \"value\": viewTypeAuditList[2].item.nauditactionfiltercode,\r\n                    \"label\": viewTypeAuditList[2].item.sauditactionfiltername\r\n                } : this.state.selectedRecord[\"nauditactionfiltercode\"]\r\n\r\n            // ntempviewtypecode = viewTypeAuditList[2].item.nauditactionfiltercode;\r\n        }\r\n        else if (fromMonth !== toMonth) {\r\n            selectedRecord[\"nauditactionfiltercode\"] = viewTypeAuditList.length > 0 ? {\r\n                \"value\": viewTypeAuditList[1].item.nauditactionfiltercode,\r\n                \"label\": viewTypeAuditList[1].item.sauditactionfiltername\r\n            } : this.state.selectedRecord[\"nauditactionfiltercode\"]\r\n\r\n\r\n            // ntempviewtypecode = viewTypeAuditList[1].item.nauditactionfiltercode;\r\n        }\r\n        else {\r\n            selectedRecord[\"nauditactionfiltercode\"] = viewTypeAuditList.length > 0 ? {\r\n                \"value\": viewTypeAuditList[0].item.nauditactionfiltercode,\r\n                \"label\": viewTypeAuditList[0].item.sauditactionfiltername\r\n            } : this.state.selectedRecord[\"nauditactionfiltercode\"]\r\n\r\n            // ntempviewtypecode = viewTypeAuditList[0].item.nauditactionfiltercode;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n\r\n    openFilter = () => {\r\n        let showFilter = !this.props.Login.showFilter\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    closeFilter = () => {\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showFilter: false }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    breadcrumbList = () => {\r\n        let breadCrumbArray = [];\r\n        // let fromDate = this.props.Login.masterData.breadCrumbFrom ? this.props.Login.masterData.breadCrumbFrom : this.props.Login.masterData.FromDate;\r\n        //    let toDate = this.props.Login.masterData.breadCrumbTo ? this.props.Login.masterData.breadCrumbTo : this.props.Login.masterData.ToDate;\r\n\r\n        let fromDate = this.props.Login.masterData.FromDate ? this.props.Login.masterData.FromDate : this.props.Login.masterData.breadCrumbFrom;\r\n        let toDate = this.props.Login.masterData.ToDate ? this.props.Login.masterData.ToDate : this.props.Login.masterData.breadCrumbTo;\r\n\r\n        let obj = convertDateValuetoString(fromDate,\r\n            toDate,\r\n            this.props.Login.userInfo);\r\n        breadCrumbArray.push({\r\n            \"label\": \"IDS_FROM\",\r\n            \"value\": obj.breadCrumbFrom\r\n        }, {\r\n            \"label\": \"IDS_TO\",\r\n            \"value\": obj.breadCrumbto\r\n        });\r\n        this.props.Login.masterData.breadCrumbModule &&\r\n            breadCrumbArray.push(\r\n                {\r\n                    \"label\": \"IDS_MODULENAME\",\r\n                    \"value\": this.props.Login.masterData.breadCrumbModule.label\r\n                });\r\n        this.props.Login.masterData.breadCrumbForm &&\r\n            breadCrumbArray.push(\r\n                {\r\n                    \"label\": \"IDS_FORMNAME\",\r\n                    \"value\": this.props.Login.masterData.breadCrumbForm.label\r\n                });\r\n        this.props.Login.masterData.breadCrumbUser &&\r\n            breadCrumbArray.push(\r\n                {\r\n                    \"label\": \"IDS_USERNAME\",\r\n                    \"value\": this.props.Login.masterData.breadCrumbUser.label\r\n                });\r\n        this.props.Login.masterData.breadCrumbRole &&\r\n            breadCrumbArray.push(\r\n                {\r\n                    \"label\": \"IDS_USERROLE\",\r\n                    \"value\": this.props.Login.masterData.breadCrumbRole.label\r\n                });\r\n\r\n        breadCrumbArray.push(\r\n            {\r\n                \"label\": \"IDS_VIEWPERIOD\",\r\n                \"value\": this.props.Login.masterData.breadCrumbViewType ? this.props.Login.masterData.breadCrumbViewType.label :\r\n                    this.props.Login.masterData.ViewType ? this.props.Login.masterData.ViewType.sauditactionfiltername : \"\"\r\n            });\r\n\r\n\r\n        // this.state.selectedRecord[\"nformcode\"] &&\r\n        //  {\r\n        //     \"label\": \"IDS_FORMNAME\",\r\n        //     \"value\": this.state.selectedRecord[\"nformcode\"] ? this.state.selectedRecord[\"nformcode\"].label : \"\"\r\n        // },\r\n        // this.state.selectedRecord[\"nusercode\"] &&\r\n        // {\r\n        //     \"label\": \"IDS_USERNAME\",\r\n        //     \"value\": this.state.selectedRecord[\"nusercode\"] ? this.state.selectedRecord[\"nusercode\"].label : \"\"\r\n        // },\r\n        // this.state.selectedRecord[\"nuserrolecode\"] &&\r\n        // {\r\n        //     \"label\": \"IDS_USERROLE\",\r\n        //     \"value\": this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].label : \"\"\r\n\r\n        // }\r\n        return breadCrumbArray;\r\n    };\r\n\r\n    // covertDatetoString(startDateValue, endDateValue) {\r\n    //     const startDate = new Date(startDateValue);\r\n    //     const endDate = new Date(endDateValue);\r\n\r\n    //     const prevMonth = validateTwoDigitDate(String(startDate.getMonth() + 1));\r\n    //     const currentMonth = validateTwoDigitDate(String(endDate.getMonth() + 1));\r\n    //     const prevDay = validateTwoDigitDate(String(startDate.getDate()));\r\n    //     const currentDay = validateTwoDigitDate(String(endDate.getDate()));\r\n\r\n    //     const fromDateOnly = startDate.getFullYear() + '-' + prevMonth + '-' + prevDay\r\n    //     const toDateOnly = endDate.getFullYear() + '-' + currentMonth + '-' + currentDay\r\n    //     const fromDate = fromDateOnly + \"T00:00:00\";\r\n    //     const toDate = toDateOnly + \"T23:59:59\";\r\n\r\n\r\n    //     return ({ fromDate, toDate, breadCrumbFrom: fromDateOnly, breadCrumbto: toDateOnly })\r\n    // }\r\n\r\n\r\n\r\n    componentDidUpdate(previousProps) {\r\n\r\n        let updateState = false;\r\n        let { selectedRecord, qualisModule, qualisForms, wholeQualisForms, users, userRole,\r\n            viewTypeAudit, dataStateAll, dataState, dataResult, skip, take } = this.state\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            updateState = true;\r\n            selectedRecord = this.props.Login.selectedRecord;\r\n        }\r\n        if (this.props.Login.masterData.QualisModule !== previousProps.Login.masterData.QualisModule\r\n            || this.props.Login.masterData.QualisForms !== previousProps.Login.masterData.QualisForms\r\n            || this.props.Login.masterData.Users !== previousProps.Login.masterData.Users\r\n            || this.props.Login.masterData.UserRole !== previousProps.Login.masterData.UserRole\r\n        ) {\r\n            updateState = true;\r\n            const qualisModuleMap = constructOptionList(this.props.Login.masterData.QualisModule || [], \"nmodulecode\",\r\n                \"smodulename\", \"nsorter\", \"ascending\", false);\r\n            //const allQualisModuleList = qualisModule.get(\"OptionList\");\r\n            const qualisModuleList = qualisModuleMap.get(\"OptionList\");\r\n\r\n            const qualisFormsMap = constructOptionList(this.props.Login.masterData.QualisForms || [], \"nformcode\",\r\n                \"sformname\", \"nsorter\", \"ascending\", false);\r\n            // const allQualisFormsList = qualisForms.get(\"OptionList\");\r\n            let qualisFormsList = []\r\n            if (selectedRecord && selectedRecord.nmodulecode && selectedRecord.nmodulecode.value) {\r\n                qualisFormsList = qualisFormsMap.get(\"OptionList\").filter(form => form.item.nmodulecode === selectedRecord.nmodulecode.value);\r\n            } else {\r\n                qualisFormsList = qualisFormsMap.get(\"OptionList\");\r\n            }\r\n\r\n            const usersMap = constructOptionList(this.props.Login.masterData.Users || [], \"nusercode\",\r\n                \"susername\", undefined, undefined, undefined);\r\n            //const allUsersList = users.get(\"OptionList\");\r\n            const usersList = usersMap.get(\"OptionList\");\r\n\r\n            const userRoleMap = constructOptionList(this.props.Login.masterData.UserRole || [], \"nuserrolecode\",\r\n                \"suserrolename\", undefined, undefined, undefined);\r\n            //const allUserRoleList = userRole.get(\"OptionList\");\r\n            const userRoleList = userRoleMap.get(\"OptionList\");\r\n\r\n            const viewTypeAuditMap = constructOptionList(this.props.Login.masterData.ViewTypeAudit || [], \"nauditactionfiltercode\",\r\n                \"sauditactionfiltername\", \"nsorter\", \"ascending\", false);\r\n            const viewTypeAuditList = viewTypeAuditMap.get(\"OptionList\");\r\n\r\n\r\n            qualisModule = qualisModuleList\r\n            qualisForms = qualisFormsList\r\n            wholeQualisForms = qualisFormsList\r\n            users = usersList\r\n            userRole = userRoleList\r\n            viewTypeAudit = viewTypeAuditList\r\n            selectedRecord = {\r\n                nauditactionfiltercode: viewTypeAuditList.length > 0 ? {\r\n                    \"value\": viewTypeAuditList[0].item.nauditactionfiltercode,\r\n                    \"label\": viewTypeAuditList[0].item.sauditactionfiltername\r\n                } : this.state.selectedRecord[\"nauditactionfiltercode\"]\r\n            }\r\n\r\n        }\r\n\r\n        if (this.props.Login.resetDataGridPage && this.props.Login.resetDataGridPage !== previousProps.Login.resetDataGridPage) {\r\n            if (this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\r\n\r\n                dataStateAll.skip = 0\r\n                updateState = true;\r\n            }\r\n            else {\r\n\r\n                dataState.skip = 0\r\n                updateState = true;\r\n            }\r\n        }\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            updateState = true;\r\n            if (selectedRecord && selectedRecord.nmodulecode && selectedRecord.nmodulecode.value) {\r\n                qualisForms = qualisForms.filter(form => form.item.nmodulecode === selectedRecord.nmodulecode.value);\r\n            } else {\r\n                qualisForms = wholeQualisForms;\r\n            }\r\n            if (this.state.selectedRecord[\"nauditactionfiltercode\"] && this.state.selectedRecord[\"nauditactionfiltercode\"].value === 1) {\r\n\r\n                dataStateAll = { skip: 0, take: dataStateAll.take, group: dataStateAll.group }\r\n                updateState = true;\r\n            }\r\n            else {\r\n\r\n                dataState = { skip: 0, take: dataState.take, group: dataState.group }\r\n                updateState = true;\r\n            }\r\n            //const auditdate = (this.props.Login.masterData.AuditDetails && this.props.Login.masterData.AuditDetails.slice(dataState.skip, dataState.take + dataState.skip)) || []\r\n            const auditdate = (this.props.Login.masterData.AuditDetails && this.props.Login.masterData.AuditDetails.slice(dataState.skip,this.props.Login.masterData.AuditDetails.length)) || []\r\n            dataResult = process(auditdate || [], dataState)\r\n\r\n            skip = this.props.Login.skip === undefined ? skip : this.props.Login.skip\r\n            take = this.props.Login.take || take\r\n\r\n        }\r\n        if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n            updateState = true;\r\n            const userRoleControlRights = [];\r\n            if (this.props.Login.userRoleControlRights) {\r\n                this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                    userRoleControlRights.push(item.ncontrolcode))\r\n            }\r\n\r\n            const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n            this.setState({\r\n                userRoleControlRights, controlMap, data: this.props.Login.masterData.ControlRights\r\n            });\r\n        }\r\n        if (updateState) {\r\n            this.setState({\r\n                selectedRecord, qualisModule, qualisForms, wholeQualisForms, users, userRole,\r\n                viewTypeAudit, dataStateAll, dataState, dataResult, skip, take\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.myRef.current.offsetParent.clientHeight !== this.state.gridHeight) {\r\n            this.setState({\r\n                gridHeight: this.myRef.current.offsetParent.clientHeight\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, validateEsignCredential, filterTransactionList,\r\n    updateStore, filterColumnData, getAuditTrailDetail, getFilterAuditTrailRecords, getFormNameByModule, getExportExcel, ViewAuditDetails\r\n})(injectIntl(AuditTrail));"]},"metadata":{},"sourceType":"module"}