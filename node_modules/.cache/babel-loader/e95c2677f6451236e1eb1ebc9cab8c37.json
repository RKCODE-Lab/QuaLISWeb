{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{toast}from'react-toastify';import Axios from'axios';import rsapi from'../rsapi';import{initRequest}from'./LoginAction';import{DEFAULT_RETURN}from'./LoginTypes';import{sortData,constructOptionList,rearrangeDateFormat,ageCalculate}from'../components/CommonScript';import{intl}from'../components/App';export function getPatientDetail(patient,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"patient/getPatient\",{spatientid:patient.spatientid,userinfo:userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,operation:null,modalName:undefined,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getPatientComboService(inputParam){return function(dispatch){var genderService=rsapi.post(\"patient/getGender\",{userinfo:inputParam.userInfo});var UTCtimeZoneService=rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:inputParam.userInfo});var cityService=rsapi.post(\"patient/getCity\",{userinfo:inputParam.userInfo});var countryService=rsapi.post(\"patient/getCountry\",{userinfo:inputParam.userInfo});var urlArray=[];if(inputParam.operation===\"create\"){urlArray=[genderService,UTCtimeZoneService,cityService,countryService];}else{var _rsapi$post;var patientById=rsapi.post(\"patient/getActivePatientById\",(_rsapi$post={},_defineProperty(_rsapi$post,inputParam.primaryKeyName,inputParam.masterData.SelectedPatient[inputParam.primaryKeyName]),_defineProperty(_rsapi$post,\"userinfo\",inputParam.userInfo),_rsapi$post));urlArray=[genderService,UTCtimeZoneService,cityService,countryService,patientById];}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var gender=[];var city=[];var country=[];var genderMap=constructOptionList(response[0].data['genderList']||[],\"ngendercode\",\"sgendername\",undefined,undefined,false);var genderList=genderMap.get(\"OptionList\");var cityMap=constructOptionList(response[2].data['cityList']||[],\"ncitycode\",\"scityname\",undefined,undefined,false);var cityList=cityMap.get(\"OptionList\");var countryMap=constructOptionList(response[3].data['countryList']||[],\"ncountrycode\",\"scountryname\",undefined,undefined,false);var countryList=countryMap.get(\"OptionList\");var selectedRecord={};var currentTime=rearrangeDateFormat(inputParam.userInfo,response[1].data);if(inputParam.operation===\"update\"){selectedRecord=response[4].data;gender.push({\"value\":response[4].data[\"ngendercode\"],\"label\":response[4].data[\"sgendername\"]});city.push({\"value\":response[4].data[\"ncitycode\"],\"label\":response[4].data[\"scityname\"]});country.push({\"value\":response[4].data[\"ncountrycode\"],\"label\":response[4].data[\"scountryname\"]});selectedRecord[\"ngendercode\"]=gender[0];selectedRecord[\"ncitycode\"]=city[0];selectedRecord[\"ncountrycode\"]=country[0];if(selectedRecord[\"ddob\"]!==null){selectedRecord[\"ddob\"]=rearrangeDateFormat(inputParam.userInfo,selectedRecord[\"sdob\"]);}}else{selectedRecord[\"ngendercode\"]=genderMap.get(\"DefaultValue\");selectedRecord[\"ddob\"]=rearrangeDateFormat(inputParam.userInfo,response[1].data);selectedRecord[\"sage\"]=ageCalculate(selectedRecord[\"ddob\"]);}dispatch({type:DEFAULT_RETURN,payload:{genderList:genderList,cityList:cityList,countryList:countryList,operation:inputParam.operation,screenName:inputParam.screenName,selectedRecord:selectedRecord,openModal:true,ncontrolCode:inputParam.ncontrolcode,loading:false,currentTime:currentTime}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getPatientReport(patient,userInfo,ncontrolCode){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"patient/patientReportGenerate\",{patient:patient,userinfo:userInfo,ncontrolcode:ncontrolCode}).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,openModal:false}});document.getElementById(\"download_data\").setAttribute(\"href\",response.data.filepath);document.getElementById(\"download_data\").click();}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getPatientDetailsByFilterQuery(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/patient/filterByPatient\",{\"filterquery\":inputParam.inputData.filterquery,\"userinfo\":inputParam.inputData.userinfo}).then(function(response){var slideResult=response.data.PatientList;var selectedRecord=response.data.PatientList;masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{searchedData:undefined});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,skip:0,take:20,slideResult:false,openModal:false,openAdvFilter:false,selectedRecord:selectedRecord}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(intl.formatMessage({id:error.message}));});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/PatientAction.js"],"names":["toast","Axios","rsapi","initRequest","DEFAULT_RETURN","sortData","constructOptionList","rearrangeDateFormat","ageCalculate","intl","getPatientDetail","patient","userInfo","masterData","dispatch","post","spatientid","userinfo","then","response","data","type","payload","operation","modalName","undefined","loading","catch","error","status","message","warn","getPatientComboService","inputParam","genderService","UTCtimeZoneService","cityService","countryService","urlArray","patientById","primaryKeyName","SelectedPatient","all","gender","city","country","genderMap","genderList","get","cityMap","cityList","countryMap","countryList","selectedRecord","currentTime","push","screenName","openModal","ncontrolCode","ncontrolcode","getPatientReport","loadEsign","document","getElementById","setAttribute","filepath","click","getPatientDetailsByFilterQuery","inputData","filterquery","slideResult","PatientList","searchedData","skip","take","openAdvFilter","formatMessage","id"],"mappings":"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","sourcesContent":["import { toast } from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport rsapi from '../rsapi';\r\nimport { initRequest } from './LoginAction';\r\nimport {DEFAULT_RETURN} from './LoginTypes';\r\nimport {sortData, constructOptionList, rearrangeDateFormat, ageCalculate} from '../components/CommonScript';\r\nimport {\r\n    intl\r\n} from '../components/App';\r\nexport function getPatientDetail (patient, userInfo, masterData) {\r\n    return function (dispatch) {   \r\n    dispatch(initRequest(true));\r\n    return rsapi.post(\"patient/getPatient\", {spatientid:patient.spatientid, userinfo:userInfo})\r\n   .then(response=>{     \r\n        masterData = {...masterData, ...response.data};       \r\n        sortData(masterData);\r\n        dispatch({type: DEFAULT_RETURN, payload:{masterData, operation:null, modalName:undefined, \r\n             loading:false}});   \r\n   })\r\n   .catch(error=>{\r\n        dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n       if (error.response.status === 500){\r\n           toast.error(error.message);\r\n       } \r\n       else{               \r\n           toast.warn(error.response.data);\r\n       }  \r\n  \r\n   })\r\n}}\r\n\r\n\r\nexport function getPatientComboService(inputParam){ \r\n    return function (dispatch) {    \r\n  \r\n            const genderService = rsapi.post(\"patient/getGender\", {userinfo:inputParam.userInfo});\r\n            const UTCtimeZoneService = rsapi.post(\"timezone/getLocalTimeByZone\", { userinfo: inputParam.userInfo });\r\n            const cityService = rsapi.post(\"patient/getCity\", {userinfo:inputParam.userInfo});\r\n            const countryService = rsapi.post(\"patient/getCountry\", { userinfo: inputParam.userInfo });\r\n                    \r\n            let urlArray = [];\r\n            if (inputParam.operation === \"create\"){\r\n               urlArray = [genderService, UTCtimeZoneService,cityService,countryService];\r\n            }\r\n            else{                    \r\n                const patientById =  rsapi.post(\"patient/getActivePatientById\", \r\n                                { [inputParam.primaryKeyName] :inputParam.masterData.SelectedPatient[inputParam.primaryKeyName] , \r\n                                    \"userinfo\": inputParam.userInfo} );\r\n                urlArray = [genderService,UTCtimeZoneService,cityService,countryService, patientById];\r\n            }\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response=>{                   \r\n                    let gender =[];\r\n                    let city =[];\r\n                    let country =[];\r\n                 \r\n                    const genderMap = constructOptionList(response[0].data['genderList'] || [], \"ngendercode\",\r\n                                          \"sgendername\", undefined, undefined, false);               \r\n\r\n                    const genderList = genderMap.get(\"OptionList\");     \r\n                    \r\n                    const cityMap = constructOptionList(response[2].data['cityList'] || [], \"ncitycode\",\r\n                                          \"scityname\", undefined, undefined, false);               \r\n\r\n                    const cityList = cityMap.get(\"OptionList\");  \r\n                    \r\n                    const countryMap = constructOptionList(response[3].data['countryList'] || [], \"ncountrycode\",\r\n                                          \"scountryname\", undefined, undefined, false);               \r\n\r\n                    const countryList = countryMap.get(\"OptionList\");  \r\n                    \r\n                    let selectedRecord =  {};\r\n                    const currentTime = rearrangeDateFormat(inputParam.userInfo, response[1].data);\r\n                   \r\n                    if (inputParam.operation === \"update\"){\r\n                        selectedRecord = response[4].data;\r\n                       \r\n                        gender.push({\"value\" : response[4].data[\"ngendercode\"], \"label\" : response[4].data[\"sgendername\"]});\r\n                        city.push({\"value\" : response[4].data[\"ncitycode\"], \"label\" : response[4].data[\"scityname\"]});  \r\n                        country.push({\"value\" : response[4].data[\"ncountrycode\"], \"label\" : response[4].data[\"scountryname\"]});                 \r\n                        selectedRecord[\"ngendercode\"] = gender[0];\r\n                        selectedRecord[\"ncitycode\"] = city[0];\r\n                        selectedRecord[\"ncountrycode\"] = country[0];\r\n\r\n                        if (selectedRecord[\"ddob\"] !== null){\r\n                            selectedRecord[\"ddob\"] = rearrangeDateFormat(inputParam.userInfo, selectedRecord[\"sdob\"]);\r\n                        }                                          \r\n                    }\r\n                    else{        \r\n                      \r\n                        selectedRecord[\"ngendercode\"] = genderMap.get(\"DefaultValue\");  \r\n                        selectedRecord[\"ddob\"] = rearrangeDateFormat(inputParam.userInfo, response[1].data);\r\n                        selectedRecord[\"sage\"]  = ageCalculate(selectedRecord[\"ddob\"])\r\n                    }\r\n                  \r\n                    dispatch({type: DEFAULT_RETURN, payload:{\r\n                                                            genderList,  \r\n                                                            cityList,\r\n                                                            countryList,                         \r\n                                                            operation:inputParam.operation, \r\n                                                            screenName:inputParam.screenName,   \r\n                                                            selectedRecord,\r\n                                                            openModal : true,\r\n                                                            ncontrolCode:inputParam.ncontrolcode,\r\n                                                            loading:false,\r\n                                                            currentTime\r\n                                                            }});\r\n                })\r\n                .catch(error=>{\r\n                    dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n                    if (error.response.status === 500){\r\n                        toast.error(error.message);\r\n                    } \r\n                    else{               \r\n                        toast.warn(error.response.data);\r\n                    }  \r\n                }) \r\n  \r\n}}\r\n\r\n\r\nexport function getPatientReport (patient, userInfo, ncontrolCode) {\r\n    return function (dispatch) {   \r\n    dispatch(initRequest(true));\r\n    return rsapi.post(\"patient/patientReportGenerate\", {patient, userinfo:userInfo, \r\n                                                        ncontrolcode:ncontrolCode})\r\n    .then(response => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false, \r\n            loadEsign: false, openModal: false } })\r\n        document.getElementById(\"download_data\").setAttribute(\"href\", response.data.filepath);\r\n        document.getElementById(\"download_data\").click();\r\n    })\r\n    .catch(error => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        if (error.response.status === 500) {\r\n            toast.error(error.message);\r\n        }\r\n        else {\r\n            toast.warn(error.response.data);\r\n        }\r\n    }) \r\n}}\r\n  \r\nexport function getPatientDetailsByFilterQuery(inputParam,masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/patient/filterByPatient\",{\"filterquery\":inputParam.inputData.filterquery \r\n\r\n            , \"userinfo\": inputParam.inputData.userinfo})\r\n            .then(response => {\r\n               let slideResult=response.data.PatientList;\r\n               let selectedRecord=response.data.PatientList;\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,searchedData: undefined \r\n                };\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData, loading: false, skip: 0, take: 20,slideResult:false,\r\n                        openModal:false,openAdvFilter:false,selectedRecord\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n            });\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}