{"ast":null,"code":"import rsapi from '../rsapi';\nimport Axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { filterRecordBasedOnTwoArrays, sortData, rearrangeDateFormat, convertDateTimetoString, fillRecordBasedOnCheckBoxSelection, getRecordBasedOnPrimaryKeyName, updatedObjectWithNewElement, replaceUpdatedObject, parentChildComboLoad, getSameRecordFromTwoArrays, constructjsonOptionList, constructjsonOptionDefault, childComboLoad, filterRecordBasedOnPrimaryKeyName, reArrangeArrays } from '../components/CommonScript';\nimport { DEFAULT_RETURN } from './LoginTypes';\nimport { intl } from '../components/App';\nimport { initRequest } from './LoginAction';\nimport { RegistrationSubType, RegistrationType, transactionStatus } from '../components/Enumeration';\nimport { crudMaster, postCRUDOrganiseTransSearch } from './ServiceAction'; //import { getTestChildTabDetail } from './index.js'\n\nimport { constructOptionList } from '../components/CommonScript';\nexport function getSampleTypeChange(Map, masterData, event, labelname) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getRegTypeBySampleType\", Map).then(response => {\n      masterData = { ...masterData,\n        ...response.data,\n        [labelname]: { ...event.item\n        }\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getSubSampleChildTabDetail(inputData) {\n  return function (dispatch) {\n    if (inputData.ntransactionsamplecode.length > 0) {\n      let inputParamData = {\n        ntransactionsamplecode: inputData.ntransactionsamplecode,\n        userinfo: inputData.userinfo\n      };\n      let url = null;\n\n      switch (inputData.activeSubSampleTab) {\n        case \"IDS_SUBSAMPLEATTACHMENTS\":\n          url = \"attachment/getSubSampleAttachment\";\n          break;\n\n        case \"IDS_SUBSAMPLECOMMENTS\":\n          url = \"comments/getSubSampleComment\";\n          break;\n\n        default:\n          url = null;\n          break;\n      }\n\n      if (url !== null) {\n        dispatch(initRequest(true));\n        rsapi.post(url, inputParamData).then(response => {\n          let responseData = { ...response.data\n          };\n          responseData = sortData(responseData);\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              masterData: { ...inputData.masterData,\n                ...responseData,\n                selectedSample: inputData.selectedSample,\n                selectedTestCode: inputData.ntransactiontestcode\n              },\n              loading: false,\n              showFilter: false,\n              activeSubSampleTab: inputData.activeSubSampleTab,\n              screenName: inputData.screenName\n            }\n          });\n        }).catch(error => {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              loading: false\n            }\n          });\n\n          if (error.response.status === 500) {\n            toast.error(error.message);\n          } else {\n            toast.warn(error.response.data);\n          }\n        });\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...inputData.masterData,\n              selectedSample: inputData.selectedSample\n            },\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab\n          }\n        });\n      }\n    } else {\n      toast.warn(\"Please Select a Sample\");\n    }\n  };\n}\nexport function getRegTypeChange(Map, masterData, event, labelname) {\n  return function (dispatch) {\n    rsapi.post(\"/registration/getRegSubTypeByRegType\", Map).then(response => {\n      // const RegistrationSubType = response.data[\"RegistrationSubType\"];\n      //  console.log(response.data);\n      // RegistrationSubType.length > 0 ?\n      //     selectedRecord[\"nregsubtypecode\"] = {\n      //         \"value\": RegistrationSubType[0].nregsubtypecode,\n      //         \"label\": RegistrationSubType[0].sregsubtypename\n      //     } : selectedRecord[\"nregsubtypecode\"] = \"\";\n      // const [labelname] = event.item;\n      masterData = { ...masterData,\n        ...response.data,\n        [labelname]: { ...event.item\n        }\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getRegSubTypeChange(Map, masterData, event, labelname) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getRegTemplateTypeByRegSubType\", Map).then(response => {\n      masterData = { ...masterData,\n        ...response.data,\n        [labelname]: { ...event.item\n        }\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getComponentTestBySpec(Map, selectedRecord, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getComponentTestBySpec\", Map).then(response => {\n      const {\n        Component,\n        Test\n      } = response.data;\n      let slno = Component.length > 0 ? Component[0].slno : -1;\n      let selectedComponent = Component.length > 0 ? Component[0] : undefined;\n      let SelectedTest = [];\n\n      if (Object.keys(Test).length > 0) {\n        SelectedTest = Test[slno];\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Component,\n          Test,\n          SelectedTest,\n          selectedComponent,\n          loading: false,\n          selectedRecord,\n          popUptestDataState: {\n            skip: 0,\n            take: 10\n          }\n        }\n      });\n    }).catch(error => {\n      // console.log(error);\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getTestfromDB(objComponent, LoginProps, nflag) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let component = { ...objComponent\n    };\n    component[\"ncomponentcode\"] = objComponent[\"ncomponentcode\"] ? objComponent[\"ncomponentcode\"].value : -1;\n    component[\"nstoragelocationcode\"] = objComponent[\"nstoragelocationcode\"] ? objComponent[\"nstoragelocationcode\"].value : -1;\n    component[\"nstorageconditioncode\"] = objComponent[\"nstorageconditioncode\"] ? objComponent[\"nstorageconditioncode\"].value : -1;\n    component[\"slno\"] = LoginProps.Component ? Object.keys(LoginProps.Component).length + 1 : 0;\n    component[\"scomponentname\"] = objComponent[\"ncomponentcode\"].label;\n    component[\"sstoragelocationname\"] = objComponent[\"nstoragelocationcode\"] && objComponent[\"nstoragelocationcode\"].label ? objComponent[\"nstoragelocationcode\"].label : \"\";\n    component[\"sstorageconditionname\"] = objComponent[\"nstorageconditioncode\"] && objComponent[\"nstorageconditioncode\"].label ? objComponent[\"nstorageconditioncode\"].label : \"\";\n    component[\"ntzdmanufdate\"] = objComponent[\"ntzdmanufdate\"] ? objComponent[\"ntzdmanufdate\"].value : -1;\n    component[\"ntzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].value : -1;\n    component[\"stzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].label : \"\";\n    component[\"nplasmafilecode\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].value : -1;\n    component[\"splasmafilenumber\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].label : \"\";\n    const dreceiveddate = objComponent[\"dreceiveddate\"];\n    component[\"dreceiveddate\"] = dreceiveddate; //formatInputDate(objComponent[\"dreceiveddate\"], false);\n\n    component[\"sreceiveddate\"] = convertDateTimetoString(dreceiveddate, LoginProps.userInfo); //formatInputDateWithoutT(objComponent[\"dreceiveddate\"], false);//formatDate(objComponent[\"sreceiveddate\"]);\n    // rsapi.post(\"/registration/getTestfromDB\", { \"Component\": component })\n\n    rsapi.post(\"/registration/getTestfromDB\", {\n      nspecsampletypecode: component.nspecsampletypecode,\n      slno: component.slno\n    }).then(response => {\n      let TestData = response.data;\n      let slno = component.slno;\n      let SelectedTest = [];\n      let loadComponent = true;\n      let selectComponent = {};\n      let showSaveContinue = true;\n      let SelectedSource = []; // let openChildModal = true;\n\n      let selectedComponent = undefined;\n      let parentPopUpSize = \"lg\"; // selectComponent = objComponent\n\n      if (nflag === 1) {\n        loadComponent = true;\n        objComponent[\"smanuflotno\"] = \"\";\n        objComponent[\"dreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime); //new Date(LoginProps.CurrentTime);\n\n        objComponent[\"sreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime); //new Date(LoginProps.CurrentTime);\n\n        selectComponent = objComponent;\n      } else {\n        loadComponent = false;\n        parentPopUpSize = \"xl\"; // openChildModal = false;\n\n        showSaveContinue = false;\n        selectComponent = undefined;\n      }\n\n      let Test = LoginProps.Test || [];\n      let Component = LoginProps.Component || [];\n      Component.unshift(component);\n      selectedComponent = component;\n      Test[slno] = response.data;\n      SelectedTest = TestData;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Component,\n          Test,\n          SelectedTest,\n          selectComponent,\n          selectedComponent,\n          loadComponent,\n          showSaveContinue,\n          parentPopUpSize,\n          loading: false,\n          SelectedSource\n        }\n      }); // console.log(response.data);\n    }).catch(error => {\n      //   console.log(error);\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function EditComponent(Map, component, userInfo) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", Map);\n    const timezone = rsapi.post(\"timezone/getTimeZone\");\n    urlArray = [ComponentTestBySpec, timezone];\n    Axios.all(urlArray).then(response => {\n      const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n      const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const TimeZoneField = response[1].data;\n      const lstComponent = lstComponentMap.get(\"OptionList\");\n      const timeZoneList = timeZoneListMap.get(\"OptionList\");\n      component[\"ncomponentcode\"] = {\n        label: component.scomponentname,\n        value: component.ncomponentcode\n      };\n      component[\"dreceiveddate\"] = rearrangeDateFormat(userInfo, component[\"sreceiveddate\"]);\n      component[\"scomments\"] = component[\"scomments\"];\n      let ntzdreceivedate = component.ntzdreceivedate;\n\n      if (component.ntzdreceivedate !== null && typeof component.ntzdreceivedate === \"object\") {\n        ntzdreceivedate = component.ntzdreceivedate.value;\n      }\n\n      component[\"ntzdreceivedate\"] = component.ntzdreceivedate ? {\n        \"label\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].stimezoneid,\n        \"value\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].ntimezonecode\n      } : \"\";\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loadComponent: true,\n          childoperation: \"update\",\n          lstComponent,\n          ChildscreenName: \"Component\",\n          openChildModal: false,\n          selectComponent: component,\n          parentPopUpSize: \"lg\",\n          timeZoneList,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function ReloadData(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData\n    }).then(response => {\n      let masterData = { ...inputData.masterData,\n        ...response.data\n      };\n\n      if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\n        inputData.searchSampleRef.current.value = \"\";\n        masterData['searchedSample'] = undefined;\n      }\n\n      if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n        inputData.searchSubSampleRef.current.value = \"\";\n        masterData['searchedSubSample'] = undefined;\n      }\n\n      if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n        inputData.searchTestRef.current.value = \"\"; //masterData['searchedTests'] = undefined\n\n        masterData['searchedTest'] = undefined;\n      } // let selectedFilter = inputData.selectedFilter;\n      // selectedFilter[\"fromdate\"] = \"\";\n      // selectedFilter[\"todate\"] = \"\";\n\n\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          showFilter: false,\n          skip: 0,\n          testskip: 0,\n          take: undefined,\n          testtake: undefined,\n          subsampletake: undefined,\n          subsampleskip: 0,\n          showSample: undefined //selectedFilter\n\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getTreeByProduct(Map, selectedRecord, comboData, inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/getTreeByProduct\", Map).then(response => {\n      let {\n        Specification,\n        AgaramTree,\n        ActiveKey,\n        FocusKey,\n        OpenNodes\n      } = [];\n      const selectedSpec = {};\n\n      if (response.data[\"rtn\"] === true) {\n        Specification = constructOptionList(response.data[\"Specification\"] || [], \"nallottedspeccode\", \"sspecname\", undefined, undefined, true).get(\"OptionList\");\n        AgaramTree = response.data[\"AgaramTree\"];\n        ActiveKey = response.data[\"ActiveKey\"];\n        FocusKey = response.data[\"FocusKey\"];\n        OpenNodes = response.data[\"OpenNodes\"]; //Manufacturer = response.data[\"Manufacturer\"];\n\n        selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\n          \"value\": Specification[0].value,\n          \"label\": Specification[0].label,\n          \"item\": Specification[0].item\n        } : \"\";\n        selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\n        selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\n      }\n\n      selectedRecord = { ...selectedRecord,\n        ...selectedSpec\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Specification,\n          selectedRecord,\n          AgaramTree,\n          ActiveKey,\n          FocusKey,\n          OpenNodes,\n          Test: [],\n          SelectedTest: [],\n          loading: false,\n          comboData,\n          ...inputParam,\n          selectedSpec,\n          Component: [],\n          selectComponent: {},\n          selectedComponent: {}\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport const getNewRegSpecification = (inputParam, masterData) => {\n  return dispatch => {\n    if (inputParam.selectedNode !== null) {\n      dispatch(initRequest(true));\n      rsapi.post(\"/registration/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam,\n        ntreetemplatemanipulationcode: inputParam.selectedNode.ntemplatemanipulationcode\n      }).then(response => {\n        sortData(response.data);\n        let Specification = constructOptionList(response.data || [], \"nallottedspeccode\", \"sspecname\", false, false, true).get(\"OptionList\");\n        let selectedComponent = undefined;\n        inputParam.selectedRecord[\"nallottedspeccode\"] = Specification.length > 0 ? {\n          value: Specification[0].value,\n          label: Specification[0].label,\n          item: Specification[0].item\n        } : \"\";\n        inputParam.selectedRecord[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\n        inputParam.selectedRecord[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            ActiveKey: inputParam.activeKey,\n            FocusKey: inputParam.focusKey,\n            primaryKey: inputParam.primaryKey,\n            Specification: Specification,\n            selectedNode: inputParam.selectedNode,\n            selectedRecord: inputParam.selectedRecord,\n            Test: [],\n            selectedComponent,\n            SelectedTest: [],\n            loading: false,\n            showSample: undefined\n          }\n        });\n      }).catch(error => {\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.warn(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    }\n  };\n};\nexport function AddComponents(Map) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", Map);\n    const timezone = rsapi.post(\"timezone/getTimeZone\");\n    urlArray = [ComponentTestBySpec, timezone];\n    Axios.all(urlArray).then(response => {\n      const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n      const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const lstComponent = lstComponentMap.get(\"OptionList\");\n      const timeZoneList = timeZoneListMap.get(\"OptionList\");\n      let dreceiveddate = null;\n      if (lstComponent[0].item.sreceiveddate) dreceiveddate = rearrangeDateFormat(Map[\"userinfo\"], lstComponent[0].item.sreceiveddate); //new Date(lstComponent[0].item.sreceiveddate);//|| [];\n\n      let selectComponent = {\n        sreceiveddate: dreceiveddate,\n        dreceiveddate,\n        ntzdreceivedate: {\n          \"label\": Map[\"userinfo\"].stimezoneid,\n          \"value\": Map[\"userinfo\"].ntimezonecode\n        },\n        stzdreceivedate: Map[\"userinfo\"].stimezoneid,\n        scomments: \"\",\n        nallottedspeccode: lstComponent[0].item.nallottedspeccode\n      };\n      let CurrentTime = dreceiveddate;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loadComponent: true,\n          lstComponent,\n          dreceiveddate,\n          ChildscreenName: \"Component\",\n          showSaveContinue: true,\n          openChildModal: false,\n          childoperation: \"create\",\n          selectComponent,\n          parentPopUpSize: \"lg\",\n          CurrentTime,\n          timeZoneList,\n          loading: false,\n          openPortal: true,\n          openModal: false\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function getTest(objComponent, LoginProps, nneedsubsample, specBasedComponent) {\n  return function (dispatch) {\n    if (Object.keys(objComponent).length > 0) {\n      dispatch(initRequest(true));\n      rsapi.post(\"/registration/getTestfromDB\", {\n        nspecsampletypecode: objComponent.nspecsampletypecode,\n        slno: objComponent.slno,\n        nneedsubsample: nneedsubsample,\n        nallottedspeccode: objComponent.nallottedspeccode,\n        specBasedComponent: specBasedComponent\n      }).then(response => {\n        let TestData = response.data;\n        let Test = LoginProps.Test || [];\n        let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\n        const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestgrouptestcode\"); // const lstComponentMap = constructOptionList(TestCombined|| [], \"ntestgrouptestcode\",\n        //\"stestsynonym\", undefined, undefined, true);\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            TestCombined,\n            loadTest: true,\n            openChildModal: false,\n            ChildscreenName: \"Test\",\n            screenName: \"Test\",\n            operation: \"create\",\n            childoperation: \"create\",\n            parentPopUpSize: \"lg\",\n            loading: false\n          }\n        });\n      }).catch(error => {\n        toast.error(error.message);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTCOMPONENTTOADDTEST\"\n      }));\n    }\n  };\n}\nexport function addsubSample(masterData, userinfo, columnList, selectComponent, childColumnList, SubSamplecomboComponents, SubSamplewithoutCombocomponent, specBasedComponent, Map, Component, isServiceRequired, SubSamplecomboData) {\n  if (isServiceRequired) {\n    return function (dispatch) {\n      dispatch(initRequest(true));\n      const urlArray = [];\n      const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\n      urlArray[0] = timeZoneService;\n      const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n        parentcolumnlist: columnList,\n        childcolumnlist: childColumnList,\n        userinfo\n      });\n      urlArray[1] = actualService;\n\n      if (specBasedComponent) {\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", { ...Map,\n          specBasedComponent: specBasedComponent\n        });\n        urlArray[2] = ComponentTestBySpec;\n      } else {\n        Component = Component ? Component : [];\n        const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\n          nallottedspeccode: Map[\"nallottedspeccode\"],\n          slno: Component ? Object.keys(Component).length + 1 : 1,\n          //nneedsubsample: nneedsubsample,\n          // nallottedspeccode: objComponent.nallottedspeccode,\n          specBasedComponent: specBasedComponent\n        });\n        urlArray[2] = TestGet;\n      }\n\n      Axios.all(urlArray).then(response => {\n        const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n        const timeZoneList = timeZoneMap.get(\"OptionList\");\n        const defaultTimeZone = {\n          label: userinfo.stimezoneid,\n          value: userinfo.ntimezonecode\n        };\n        const newcomboData = parentChildComboLoad(columnList, response[1].data, selectComponent, childColumnList, SubSamplewithoutCombocomponent);\n        let TestCombined = [];\n        let lstComponent = [];\n\n        if (specBasedComponent) {\n          const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n          lstComponent = lstComponentMap.get(\"OptionList\");\n        } else {\n          TestCombined = response[2].data;\n        }\n\n        const comboData1 = newcomboData.comboData;\n        const selectedRecord1 = newcomboData.selectedRecord;\n        SubSamplewithoutCombocomponent.map(componentrow => {\n          if (componentrow.inputtype === \"date\") {\n            if (componentrow.mandatory) {\n              selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? new Date() : \"\";\n            } // if (componentrow.timezone) {\n            //     sampleRegistration[\"jsondata\"][`tz${componentrow.label}`] = selectedRecord[`tz${componentrow.label}`] ?\n            //         { value: selectedRecord[`tz${componentrow.label}`].value, label: selectedRecord[`tz${componentrow.label}`].label } :\n            //         defaulttimezone ? defaulttimezone : -1\n            // }\n\n          }\n        });\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            ChildscreenName: \"SubSample\",\n            screenName: \"SubSample\",\n            showSaveContinue: true,\n            openChildModal: false,\n            childoperation: \"create\",\n            parentPopUpSize: \"lg\",\n            loading: false,\n            lstComponent,\n            openPortal: true,\n            openModal: false,\n            operation: \"create\",\n            loadSubSample: true,\n            selectComponent: selectedRecord1,\n            SubSamplecomboData: comboData1,\n            SubSamplecomboComponents,\n            SubSamplewithoutCombocomponent,\n            TestCombined,\n            parentSubSampleColumnList: columnList,\n            timeZoneList,\n            defaultTimeZone,\n            masterData\n          }\n        });\n      }).catch(error => {\n        toast.error(error.message);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      });\n    };\n  } else {\n    const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData, selectComponent, childColumnList, SubSamplewithoutCombocomponent);\n    return dispatch => {\n      if (!specBasedComponent) {\n        rsapi.post(\"/registration/getTestfromDB\", {\n          nallottedspeccode: Map[\"nallottedspeccode\"],\n          slno: Component ? Object.keys(Component).length + 1 : 1,\n          //nneedsubsample: nneedsubsample,\n          ...Map,\n          // nallottedspeccode: objComponent.nallottedspeccode,\n          specBasedComponent: specBasedComponent\n        }).then(response => {\n          const TestCombined = response.data;\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              ChildscreenName: \"SubSample\",\n              showSaveContinue: true,\n              openChildModal: false,\n              childoperation: \"create\",\n              parentPopUpSize: \"lg\",\n              loading: false,\n              lstComponent: [],\n              openPortal: true,\n              openModal: false,\n              operation: \"create\",\n              loadSubSample: true,\n              selectComponent: newcomboData.selectedRecord,\n              TestCombined: TestCombined\n            }\n          });\n        });\n      } else {\n        // Component = Component ? Component : []\n        rsapi.post(\"/registration/getComponentBySpec\", { ...Map,\n          specBasedComponent: specBasedComponent\n        }).then(response => {\n          // const lstComponent =  response.data.lstComponent\n          let lstComponent = response.data.lstComponent; //filterRecordBasedOnTwoArrays(response.data.lstComponent, Component, \"ncomponentcode\")\n\n          const lstComponentMap = constructOptionList(lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n          lstComponent = lstComponentMap.get(\"OptionList\");\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              ChildscreenName: \"SubSample\",\n              showSaveContinue: true,\n              openChildModal: false,\n              childoperation: \"create\",\n              parentPopUpSize: \"lg\",\n              loading: false,\n              lstComponent,\n              openPortal: true,\n              openModal: false,\n              operation: \"create\",\n              loadSubSample: true,\n              selectComponent: newcomboData.selectedRecord,\n              TestCombined: [],\n              selectedTestData: []\n            }\n          });\n        });\n      }\n    };\n  }\n}\nexport function componentTest(selectedobject, Reg, specBasedComponent, Component) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    Component = Component ? Component : [];\n    rsapi.post(\"/registration/getTestfromDB\", {\n      nspecsampletypecode: selectedobject.nspecsampletypecode,\n      slno: Component ? Object.keys(Component).length + 1 : 1,\n      specBasedComponent: specBasedComponent\n    }).then(response => {\n      let TestData = response.data; //let Test = [];\n      // Test[selectedobject.slno] = TestData;\n\n      const Map = {};\n\n      if (Reg) {\n        Map[\"selectedRecord\"] = selectedobject;\n      } else {\n        Map[\"selectComponent\"] = selectedobject;\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          TestCombined: TestData,\n          ...Map,\n          loading: false,\n          selectedTestData: []\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function addSubSampleSaveContinue(Map1, Map, specBasedComponent, Component, selectedTestData, lstComponent) {\n  //  const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\n  //     selectComponent, childColumnList, SubSamplewithoutCombocomponent)\n  return dispatch => {\n    if (!specBasedComponent) {\n      rsapi.post(\"/registration/getTestfromDB\", {\n        nallottedspeccode: Map[\"nallottedspeccode\"],\n        nspecsampletypecode: Map[\"nspecsampletypecode\"],\n        slno: Map1.Component ? Object.keys(Map1.Component).length + 1 : 1,\n        specBasedComponent: specBasedComponent\n      }).then(response => {\n        let TestCombined = response.data;\n        const selectedTestData1 = TestCombined.filter(function (x) {\n          return selectedTestData.some(function (y) {\n            return x[\"ntestgrouptestcode\"] === y.value;\n          });\n        }); // const selectedTestData2 = []\n        // TestCombined.map(x=>{\n        //     selectedTestData1.map(y=>{\n        //         if(x[\"ntestgrouptestcode\"] !== y[\"ntestgrouptestcode\"]){\n        //             selectedTestData2.push(x)\n        //         } \n        //     })\n        // });\n        //  let filterArray = filterRecordBasedOnTwoArrays(selectedTestData1, TestCombined, \"ntestgrouptestcode\")\n        // const filterArray = [...selectedTestData1, ...TestCombined]\n\n        selectedTestData = constructOptionList(selectedTestData1, \"ntestgrouptestcode\", \"stestsynonym\");\n        selectedTestData[\"ntestgrouptestcode\"] = selectedTestData.get(\"OptionList\");\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: { ...Map1,\n            loading: false,\n            TestCombined,\n            selectedTestData\n          }\n        });\n      });\n    } else {\n      // lstComponent = lstComponent.filter(x => x.item.nspecsampletypecode !== Map1.selectComponent[\"nspecsampletypecode\"])\n      Map1.selectComponent[\"ncomponentcode\"] = {};\n      Map1.selectComponent[\"Sample Name\"] = \"\";\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: { ...Map1,\n          loading: false,\n          TestCombined: [],\n          selectedTestData: [],\n          lstComponent\n        }\n      });\n    }\n  };\n}\nexport function editSubSample(Map, component, userInfo, specBasedComponent) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    let Componnet = {};\n\n    if (specBasedComponent) {\n      Componnet = rsapi.post(\"/registration/getComponentBySpec\", { ...Map\n      });\n    }\n\n    urlArray = [Componnet];\n    Axios.all(urlArray).then(response => {\n      let comp = [];\n\n      if (specBasedComponent) {\n        comp = response[0].data.lstComponent;\n      }\n\n      const lstComponentMap = constructOptionList(comp || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n      const lstComponent = lstComponentMap.get(\"OptionList\");\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loadSubSample: true,\n          childoperation: \"update\",\n          ChildscreenName: \"SubSample\",\n          openChildModal: false,\n          selectComponent: component,\n          parentPopUpSize: \"lg\",\n          loading: false,\n          lstComponent\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function insertRegistration(inputParam, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/createRegistration\", inputParam.inputData).then(response => {\n      let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\n      let selectedSample = response.data[\"selectedSample\"];\n      let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n      let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n      let selectedSubSample = RegistrationGetSubSample;\n      RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\n      let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\n\n      if (inputParam.inputData.nneedsubsample) {\n        RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc');\n        selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\n        RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode);\n        selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\n      } // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\n\n\n      if (inputParam.multipleselectionFlag) {\n        selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\n        updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\n        updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\n        RegistrationGetSubSample = masterData.RegistrationGetSubSample;\n        RegistrationGetTest = masterData.RegistrationGetTest;\n      }\n\n      masterData = { ...masterData,\n        ...response.data,\n        selectedSample,\n        selectedSubSample,\n        selectedTest,\n        RegistrationGetSubSample,\n        RegistrationGetTest,\n        RegistrationGetSample\n      };\n      let respObject = {\n        masterData,\n        ...inputParam.inputData,\n        openModal: false,\n        loadEsign: false,\n        showConfirmAlert: false,\n        selectedRecord: undefined,\n        loading: false,\n        loadPreregister: false,\n        showSample: undefined,\n        openPortal: false,\n        selectedSpec: {},\n        selectComponent: {},\n        SelectedTest: {},\n        selectedComponent: {},\n        Component: [],\n        selectedRecord: {},\n        SelectedTest: [],\n        Test: [],\n        selectedComponent: {},\n        subSampleDataGridList: []\n      };\n      inputParam.postParamList[0]['clearFilter'] = 'yes';\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n    }).catch(error => {\n      // console.log(error);\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          showConfirmAlert: false\n        }\n      });\n    });\n  };\n}\nexport function getRegistrationSample(inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData\n    }).then(response => {\n      let masterData = { ...inputData.masterData,\n        ...response.data\n      };\n\n      if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\n        inputData.searchSampleRef.current.value = \"\";\n        masterData['searchedSample'] = undefined;\n      }\n\n      if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n        inputData.searchSubSampleRef.current.value = \"\";\n        masterData['searchedSubSample'] = undefined;\n      }\n\n      if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n        inputData.searchTestRef.current.value = \"\";\n        masterData['searchedTest'] = undefined;\n      }\n\n      let respObject = {};\n\n      if (inputData.selectedFilter) {\n        respObject = {\n          selectedFilter: { ...inputData.selectedFilter\n          }\n        };\n      }\n\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          showFilter: false,\n          skip: 0,\n          testskip: 0,\n          take: undefined,\n          testtake: undefined,\n          subsampleskip: 0,\n          subsampletake: undefined,\n          showSample: undefined,\n          ...respObject,\n          activeSampleTab: inputData.inputData.activeSampleTab\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getRegistrationsubSampleDetail(inputData, isServiceRequired) {\n  return function (dispatch) {\n    let inputParamData = {\n      nsampletypecode: inputData.nsampletypecode,\n      nregtypecode: inputData.nregtypecode,\n      nregsubtypecode: inputData.nregsubtypecode,\n      npreregno: inputData.npreregno,\n      ntransactionstatus: inputData.ntransactionstatus,\n      napprovalconfigcode: inputData.napprovalconfigcode,\n      activeTestTab: inputData.activeTestTab,\n      activeSampleTab: inputData.activeSampleTab,\n      userinfo: inputData.userinfo,\n      ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n      nneedsubsample: inputData.nneedsubsample,\n      checkBoxOperation: inputData.nneedsubsample === true ? inputData.checkBoxOperation === 5 ? 3 : inputData.checkBoxOperation : inputData.checkBoxOperation\n    };\n    let activeName = \"\";\n    let dataStateName = \"\";\n    const subSample = inputData.nneedsubsample;\n    dispatch(initRequest(true));\n\n    if (isServiceRequired) {\n      rsapi.post(\"registration/getRegistrationSubSample\", inputParamData).then(response => {\n        sortData(response.data, \"descending\", \"npreregno\");\n        let masterData = {};\n        let skipInfo = {};\n        let oldSelectedTest = inputData.masterData.selectedTest || [];\n\n        if (subSample) {\n          let oldSelectedSubSample = inputData.masterData.selectedSubSample;\n          fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n          masterData = { ...inputData.masterData,\n            selectedSample: inputData.selectedSample,\n            selectedPreregno: inputData.npreregno,\n            selectedSubSample: inputData.masterData.RegistrationGetSubSample.length > 0 ? [inputData.masterData.RegistrationGetSubSample[0]] : []\n          };\n          let RegistrationTestComment = [];\n          let RegistrationTestAttachment = [];\n          let RegistrationParameter = []; //if (inputData.checkBoxOperation === 1 || inputData.checkBoxOperation === 7) {  \n\n          if (inputData.checkBoxOperation === 1) {\n            const wholeSubSampleList = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode);\n            oldSelectedSubSample.forEach((subsample, index) => {\n              if (!wholeSubSampleList.includes(subsample.ntransactionsamplecode)) {\n                oldSelectedSubSample.splice(index, 1);\n              }\n            });\n\n            if (oldSelectedSubSample.length > 0) {\n              masterData = { ...masterData,\n                selectedSubSample: oldSelectedSubSample\n              };\n            }\n\n            const selectedTest = getSameRecordFromTwoArrays(oldSelectedTest, masterData.selectedSubSample, 'npreregno');\n            masterData = { ...masterData,\n              selectedTest\n            };\n          }\n\n          if (inputData.checkBoxOperation === 7) {\n            // masterData = {\n            //     ...masterData,\n            //     APSelectedTest:responseData.APSelectedTest,\n            //     AP_TEST:responseData.AP_TEST,\n            //     ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\n            // }\n            switch (inputData.activeTestTab) {\n              case \"IDS_TESTCOMMENTS\":\n                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment1 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\n                }\n\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                {\n                  let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\n                  let RegistrationTestAttachment1 = [];\n\n                  if (inputData.masterData.RegistrationTestAttachment !== undefined) {\n                    RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\n                  }\n\n                  let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                  RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\n                  activeName = \"RegistrationTestAttachment\";\n                  dataStateName = \"testCommentDataState\";\n                }\n                break;\n\n              case \"IDS_PARAMETERRESULTS\":\n                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\n                let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\n                let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1;\n                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              default:\n                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment2 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\n                }\n\n                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n            }\n\n            masterData['RegistrationTestComment'] = RegistrationTestComment;\n            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\n            masterData[\"RegistrationParameter\"] = RegistrationParameter;\n          }\n\n          if (inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 5) {\n            masterData = { ...masterData,\n              selectedTest: masterData.RegistrationGetTest.length > 0 ? [masterData.RegistrationGetTest[0]] : []\n            };\n\n            switch (inputData.activeTestTab) {\n              case \"IDS_TESTCOMMENTS\":\n                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment1 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\n                }\n\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                {\n                  let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\n                  let RegistrationTestAttachment1 = [];\n\n                  if (inputData.masterData.RegistrationTestAttachment !== undefined) {\n                    RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\n                  }\n\n                  let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                  RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\n                  activeName = \"RegistrationTestAttachment\";\n                  dataStateName = \"testCommentDataState\";\n                }\n                break;\n\n              case \"IDS_PARAMETERRESULTS\":\n                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\n                let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\n                let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1;\n                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              default:\n                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment2 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\n                }\n\n                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n            }\n\n            masterData['RegistrationTestComment'] = RegistrationTestComment;\n            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\n            masterData[\"RegistrationParameter\"] = RegistrationParameter;\n          }\n\n          let {\n            testskip,\n            testtake,\n            subsampleskip,\n            subsampletake\n          } = inputData;\n          let bool = false;\n\n          if (inputData.masterData.RegistrationGetSubSample.length < inputData.subsampleskip) {\n            testskip = 0;\n            subsampleskip = 0;\n            bool = true;\n          }\n\n          if (bool) {\n            skipInfo = {\n              testskip,\n              testtake,\n              subsampleskip,\n              subsampletake\n            };\n          }\n        } else {\n          //let oldSelectedTest = inputData.masterData.selectedTest\n          //  let oldSelectedSubSample = inputData.masterData.selectedSubSample\n          fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n          masterData = { ...inputData.masterData,\n            selectedSample: inputData.selectedSample,\n            selectedPreregno: inputData.npreregno,\n            selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [],\n            selectedSubSample: inputData.masterData.RegistrationGetSubSample\n          };\n          let RegistrationTestComment = [];\n          let RegistrationParameter = [];\n          let RegistrationTestAttachment = [];\n\n          if (inputData.checkBoxOperation === 7 || inputData.checkBoxOperation === 1) {\n            const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode);\n            oldSelectedTest.forEach((test, index) => {\n              if (!wholeTestList.includes(test.ntransactiontestcode)) {\n                oldSelectedTest.splice(index, 1);\n              }\n            });\n            let keepOld = false;\n            let ntransactiontestcode;\n\n            if (oldSelectedTest.length > 0) {\n              keepOld = true;\n              masterData = { ...masterData,\n                selectedTest: oldSelectedTest\n              };\n            } else {\n              ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\";\n            }\n\n            switch (inputData.activeTestTab) {\n              case \"IDS_PARAMETERRESULTS\":\n                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ? inputData.masterData.RegistrationParameter : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                {\n                  RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ? inputData.masterData.RegistrationTestAttachment : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\");\n                  activeName = \"RegistrationTestAttachment\";\n                  dataStateName = \"testCommentDataState\";\n                }\n                break;\n\n              case \"IDS_TESTCOMMENTS\":\n                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ? inputData.masterData.RegistrationTestComment : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              default:\n                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ? inputData.masterData.RegistrationParameter : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n            }\n          } else if (inputData.checkBoxOperation === 5) {\n            switch (inputData.activeTestTab) {\n              case \"IDS_TESTCOMMENTS\":\n                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment1 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\n                }\n\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                {\n                  let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\n                  let RegistrationTestAttachment1 = [];\n\n                  if (inputData.masterData.RegistrationTestAttachment !== undefined) {\n                    RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\n                  }\n\n                  let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                  RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\n                  activeName = \"RegistrationTestAttachment\";\n                  dataStateName = \"testCommentDataState\";\n                }\n                break;\n\n              case \"IDS_PARAMETERRESULTS\":\n                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\n                let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\n                let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              default:\n                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n                let RegistrationTestComment2 = [];\n\n                if (inputData.masterData.RegistrationTestComment !== undefined) {\n                  RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\n                }\n\n                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n            } // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n\n          } else {\n            switch (inputData.activeTestTab) {\n              case \"IDS_TESTCOMMENTS\":\n                RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n                activeName = \"RegistrationTestComment\";\n                dataStateName = \"testCommentDataState\";\n                break;\n\n              case \"IDS_TESTATTACHMENTS\":\n                {\n                  RegistrationTestAttachment = response.data.RegistrationTestAttachment ? [...response.data.RegistrationTestAttachment] : [];\n                  activeName = \"RegistrationTestAttachment\";\n                  dataStateName = \"testCommentDataState\";\n                }\n                break;\n\n              case \"IDS_PARAMETERRESULTS\":\n                RegistrationParameter = response.data.RegistrationParameter ? [...response.data.RegistrationParameter] : [];\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n\n              default:\n                RegistrationParameter = response.data.RegistrationParameter ? [...response.data.RegistrationParameter] : [];\n                activeName = \"RegistrationParameter\";\n                dataStateName = \"resultDataState\";\n                break;\n            }\n          }\n\n          masterData['RegistrationTestComment'] = RegistrationTestComment;\n          masterData[\"RegistrationParameter\"] = RegistrationParameter;\n          masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\n          let {\n            testskip,\n            testtake\n          } = inputData;\n          let bool = false;\n\n          if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\n            testskip = 0;\n            bool = true;\n          }\n\n          if (bool) {\n            skipInfo = {\n              testskip,\n              testtake\n            };\n          }\n        }\n\n        if (inputData.masterData.selectedSample && inputData.sampleGridDataState && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\n          skipInfo = { ...skipInfo,\n            sampleGridDataState: { ...inputData.sampleGridDataState,\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            sampleGridDataState: { ...inputData.sampleGridDataState,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n          inputData.searchTestRef.current.value = \"\";\n          masterData['searchedTest'] = undefined;\n        }\n\n        if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\n          inputData.searchSubSampleRef.current.value = \"\";\n          masterData['searchedSubSample'] = undefined;\n        }\n\n        let inputParam = {\n          attachmentskip: undefined\n        };\n\n        if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestTab: inputData.activeTestTab,\n            skip: undefined,\n            take: undefined,\n            ...skipInfo,\n            inputParam\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      let bool = false;\n      let skipInfo = {};\n      let {\n        testskip,\n        testtake,\n        subsampletake,\n        subsampleskip\n      } = inputData;\n      let oldSelectedTest = inputData.masterData.selectedTest;\n      let oldSelectedSubSample = inputData.masterData.selectedSubSample; // let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n\n      let isGrandChildGetRequired = false;\n      let TestSelected = [];\n      let subSampleSelected = [];\n\n      if (inputData[\"statusNone\"]) {\n        TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n        subSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n      } else {\n        TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n        subSampleSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n      }\n\n      if (TestSelected.length > 0) {\n        isGrandChildGetRequired = false;\n      } else {\n        isGrandChildGetRequired = true;\n      }\n\n      fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n\n      if (isGrandChildGetRequired) {\n        let selectedSample = inputData.selectedSample;\n        let filterTestSameOldSelectedTest = getSameRecordFromTwoArrays(oldSelectedTest, inputData.masterData.RegistrationGetTest, \"ntransactiontestcode\");\n        let selectedTest = filterTestSameOldSelectedTest.length > 0 ? filterTestSameOldSelectedTest : inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [];\n        let ntransactiontestcode = selectedTest.length > 0 ? selectedTest.map(x => x.ntransactiontestcode).join(\",\") : \"-1\";\n        let selectedSubSample = inputData.masterData.RegistrationGetSubSample;\n\n        if (subSample) {\n          let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\n          selectedSubSample = filterSelectedSubSample.length > 0 ? filterSelectedSubSample : [inputData.masterData.RegistrationGetSubSample[0]];\n\n          if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\n            subsampleskip = 0;\n            skipInfo = {\n              subsampletake,\n              subsampleskip\n            };\n          }\n        }\n\n        let masterData = { ...inputData.masterData,\n          selectedSample,\n          selectedSubSample,\n          selectedTest\n        };\n\n        if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\n          testskip = 0;\n          bool = true;\n        }\n\n        if (bool) {\n          skipInfo = { ...skipInfo,\n            testskip,\n            testtake\n          };\n        }\n\n        inputData = { ...inputData,\n          childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\"],\n          ntransactiontestcode,\n          masterData,\n          selectedTest,\n          selectedSubSample,\n          checkBoxOperation: 3,\n          skipInfo,\n          masterData\n        };\n\n        if (subSample) {\n          if (selectedTest.length === 0) {\n            inputData[\"npreregno\"] = selectedSubSample.map(x => x.npreregno).join(\",\");\n            inputData[\"ntransactionsamplecode\"] = selectedSubSample.map(x => x.ntransactionsamplecode).join(\",\");\n            inputData[\"checkBoxOperation\"] = 3;\n            inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"];\n            dispatch(getRegistrationTestDetail(inputData, true));\n          } else {\n            dispatch(getTestChildTabDetailRegistration(inputData, true));\n          }\n        } else {\n          dispatch(getTestChildTabDetailRegistration(inputData, true));\n        }\n      } else {\n        let masterData = { ...inputData.masterData,\n          selectedSample: inputData.selectedSample,\n          selectedPreregno: inputData.npreregno,\n          selectedTest: TestSelected ? TestSelected : inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [],\n          // RegistrationTestComment,\n          selectedSubSample: subSampleSelected ? subSampleSelected : inputData.masterData.RegistrationGetSubSample\n        };\n        let subsamplecheck = true;\n\n        if (subSample) {\n          let SubSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n\n          if (SubSampleSelected.length > 0) {\n            let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\n\n            if (filterSelectedSubSample.length === 0) {\n              let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode);\n              oldSelectedSubSample.forEach((test, index) => {\n                if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\n                  oldSelectedSubSample.splice(index, 1);\n                }\n\n                return null;\n              });\n\n              if (oldSelectedSubSample.length === 0 && wholeSubSample.length > 0 && masterData.selectedTest.length === 0) {\n                const selectedSubSample1 = [inputData.masterData.RegistrationGetSubSample[0]];\n                masterData = { ...masterData,\n                  selectedSubSample: selectedSubSample1,\n                  selectedTest: []\n                };\n                inputData = { ...inputData,\n                  ...masterData\n                };\n                inputData[\"npreregno\"] = selectedSubSample1.map(x => x.npreregno).join(\",\");\n                inputData[\"ntransactionsamplecode\"] = selectedSubSample1.map(x => x.ntransactionsamplecode).join(\",\");\n                inputData[\"checkBoxOperation\"] = 3;\n                inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"];\n                subsamplecheck = false;\n                dispatch(getRegistrationTestDetail(inputData, true));\n              }\n            } else {\n              oldSelectedSubSample = filterSelectedSubSample;\n            }\n          } else {\n            let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode);\n            oldSelectedSubSample.forEach((test, index) => {\n              if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\n                oldSelectedSubSample.splice(index, 1);\n              }\n\n              return null;\n            });\n          }\n\n          if (subsamplecheck) {\n            masterData = { ...masterData,\n              selectedSubSample: oldSelectedSubSample\n            };\n          }\n\n          if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\n            subsampleskip = 0;\n            skipInfo = {\n              subsampleskip,\n              subsampletake\n            };\n          }\n        }\n\n        let wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode);\n        oldSelectedTest.forEach((test, index) => {\n          if (!wholeTestList.includes(test.ntransactiontestcode)) {\n            oldSelectedTest.splice(index, 1);\n          }\n\n          return null;\n        });\n        let keepOld = false;\n        let ntransactiontestcode;\n\n        if (oldSelectedTest.length > 0) {\n          keepOld = true;\n          masterData = { ...masterData,\n            selectedTest: oldSelectedTest\n          };\n        } else {\n          ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\";\n        }\n\n        masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n        masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n        let skipInfo = {};\n\n        if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\n          testskip = 0;\n          bool = true;\n        }\n\n        if (bool) {\n          skipInfo = { ...skipInfo,\n            testskip,\n            testtake\n          };\n        }\n\n        let dataStateArray = [{\n          activeName: 'selectedSample',\n          dataStateName: 'sampleGridDataState'\n        }, {\n          activeName: 'RegistrationSourceCountry',\n          dataStateName: 'sourceDataState'\n        }, {\n          activeName: 'RegistrationTestComment',\n          dataStateName: 'testCommentDataState'\n        }, {\n          activeName: 'RegistrationParameter',\n          dataStateName: 'resultDataState'\n        }];\n        dataStateArray.map(arr => {\n          if (inputData[arr.dataStateName] && masterData[arr.activeName] && masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\n            skipInfo = { ...skipInfo,\n              [arr.dataStateName]: { ...inputData[arr.dataStateName],\n                skip: 0,\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          } else {\n            skipInfo = { ...skipInfo,\n              [arr.dataStateName]: { ...inputData[arr.dataStateName],\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          }\n\n          return null;\n        });\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestTab: inputData.activeTestTab,\n            ...skipInfo\n          }\n        });\n      }\n    }\n  };\n}\nexport function getRegistrationTestDetail(inputData, isServiceRequired) {\n  return function (dispatch) {\n    let inputParamData = {\n      nsampletypecode: inputData.nsampletypecode,\n      nregtypecode: inputData.nregtypecode,\n      nregsubtypecode: inputData.nregsubtypecode,\n      npreregno: inputData.npreregno,\n      ntransactionsamplecode: inputData.ntransactionsamplecode,\n      ntransactionstatus: inputData.ntransactionstatus,\n      napprovalconfigcode: inputData.napprovalconfigcode,\n      activeTestTab: inputData.activeTestTab,\n      activeSampleTab: inputData.activeSampleTab,\n      userinfo: inputData.userinfo,\n      ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\n      checkBoxOperation: inputData.checkBoxOperation\n    };\n    let activeName = \"\";\n    let dataStateName = \"\";\n    dispatch(initRequest(true));\n\n    if (isServiceRequired) {\n      rsapi.post(\"registration/getRegistrationTest\", inputParamData).then(response => {\n        sortData(response.data);\n        let oldSelectedTest = inputData.masterData.selectedTest || [];\n        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\n        let masterData = { ...inputData.masterData,\n          selectedSubSample: inputData.selectedSubSample,\n          selectedTransactionsamplecode: inputData.ntransactionsamplecode,\n          selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [] // RegistrationTestComment,\n\n        }; //let wholeRegistrationTestComments = [];\n\n        let RegistrationTestComment = [];\n        let RegistrationTestAttachment = [];\n        let RegistrationParameter = [];\n\n        if (inputData.checkBoxOperation === 1) {\n          const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode);\n          oldSelectedTest.forEach((test, index) => {\n            if (!wholeTestList.includes(test.ntransactiontestcode)) {\n              oldSelectedTest.splice(index, 1);\n            }\n          });\n          let keepOld = false;\n          let ntransactiontestcode;\n\n          if (oldSelectedTest.length > 0) {\n            keepOld = true;\n            masterData = { ...masterData,\n              selectedTest: oldSelectedTest\n            };\n          } else {\n            ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\";\n          }\n\n          switch (inputData.activeTestTab) {\n            case \"IDS_PARAMETERRESULTS\":\n              RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ? inputData.masterData.RegistrationParameter : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ? inputData.masterData.RegistrationTestComment : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_TESTATTACHMENTS\":\n              RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ? inputData.masterData.RegistrationTestAttachment : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            default:\n              RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ? inputData.masterData.RegistrationParameter : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n          }\n        } else if (inputData.checkBoxOperation === 5) {\n          switch (inputData.activeTestTab) {\n            case \"IDS_TESTCOMMENTS\":\n              let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n              let RegistrationTestComment1 = [];\n\n              if (inputData.masterData.RegistrationTestComment !== undefined) {\n                RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\n              }\n\n              let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              {\n                let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\n                let RegistrationTestAttachment1 = [];\n\n                if (inputData.masterData.RegistrationTestAttachment !== undefined) {\n                  RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\n                }\n\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestAttachment\";\n                dataStateName = \"testCommentDataState\";\n              }\n              break;\n\n            case \"IDS_PARAMETERRESULTS\":\n              let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\n              let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\n              let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n              RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n\n            default:\n              let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n              let RegistrationTestComment2 = [];\n\n              if (inputData.masterData.RegistrationTestComment !== undefined) {\n                RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\n              }\n\n              let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n          } // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n\n        } else if (inputData.checkBoxOperation === 7) {\n          let testList = reArrangeArrays(inputData.masterData.RegistrationGetSubSample, response.data.RegistrationGetTest, \"ntransactionsamplecode\");\n          masterData = { ...masterData,\n            selectedTest: testList ? testList.length > 0 ? [testList[0]] : [] : [],\n            RegistrationGetTest: testList ? testList.length > 0 ? testList : [] : [] //ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\n\n          };\n\n          switch (inputData.activeTestTab) {\n            case \"IDS_TESTCOMMENTS\":\n              let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n              let RegistrationTestComment1 = [];\n\n              if (inputData.masterData.RegistrationTestComment !== undefined) {\n                RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\n              }\n\n              let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_TESTCOMMENTS\":\n              {\n                let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\n                let RegistrationTestAttachment1 = [];\n\n                if (inputData.masterData.RegistrationTestAttachment !== undefined) {\n                  RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\n                }\n\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\n                activeName = \"RegistrationTestAttachment\";\n                dataStateName = \"testCommentDataState\";\n              }\n              break;\n\n            case \"IDS_PARAMETERRESULTS\":\n              let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : []; // let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\n\n              let RegistrationParameter1 = [...resultResponseData];\n              let ntransactiontestcode1 = testList ? testList.length > 0 ? testList[0].ntransactiontestcode : inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1 : -1;\n              RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n\n            default:\n              let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\n              let RegistrationTestComment2 = [];\n\n              if (inputData.masterData.RegistrationTestComment !== undefined) {\n                RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\n              }\n\n              let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1;\n              RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n          } // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n\n        } else {\n          switch (inputData.activeTestTab) {\n            case \"IDS_TESTCOMMENTS\":\n              RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\n              activeName = \"RegistrationTestComment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_TESTATTACHMENTS\":\n              RegistrationTestAttachment = response.data.RegistrationTestAttachment ? [...response.data.RegistrationTestAttachment] : [];\n              activeName = \"RegistrationTestAttachment\";\n              dataStateName = \"testCommentDataState\";\n              break;\n\n            case \"IDS_PARAMETERRESULTS\":\n              RegistrationParameter = response.data.RegistrationParameter ? [...response.data.RegistrationParameter] : [];\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n\n            default:\n              RegistrationParameter = response.data.RegistrationParameter ? [...response.data.RegistrationParameter] : [];\n              activeName = \"RegistrationParameter\";\n              dataStateName = \"resultDataState\";\n              break;\n          }\n        }\n\n        masterData['RegistrationTestComment'] = RegistrationTestComment;\n        masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\n        masterData[\"RegistrationParameter\"] = RegistrationParameter;\n        let {\n          testskip,\n          testtake\n        } = inputData;\n        let bool = false;\n        let skipInfo = {};\n\n        if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\n          testskip = 0;\n          bool = true;\n        }\n\n        if (bool) {\n          skipInfo = {\n            testskip,\n            testtake\n          };\n        }\n\n        if (inputData.masterData.selectedSample && inputData.sampleGridDataState && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\n          skipInfo = { ...skipInfo,\n            sampleGridDataState: { ...inputData.sampleGridDataState,\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            sampleGridDataState: { ...inputData.sampleGridDataState,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\n          inputData.searchTestRef.current.value = \"\";\n          masterData['searchedTest'] = undefined;\n        }\n\n        let inputParam = {\n          attachmentskip: undefined\n        };\n\n        if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              skip: 0,\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        } else {\n          skipInfo = { ...skipInfo,\n            [dataStateName]: { ...inputData[dataStateName],\n              sort: undefined,\n              filter: undefined\n            }\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestTab: inputData.activeTestTab,\n            skip: undefined,\n            take: undefined,\n            ...skipInfo,\n            inputParam\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      let oldSelectedTest = inputData.masterData.selectedTest;\n      let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n      let isGrandChildGetRequired = false;\n\n      if (TestSelected.length > 0) {\n        isGrandChildGetRequired = true;\n      } else {\n        isGrandChildGetRequired = false;\n      }\n\n      fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\n\n      if (isGrandChildGetRequired) {\n        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode.toString() : \"-1\";\n        let selectedSubSample = inputData.selectedSubSample; // let selectedPreregno = inputData.npreregno;\n\n        let selectedTest = inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : []; // let selectedSubSample = inputData.masterData.RegistrationGetSubSample\n\n        let masterData = { ...inputData.masterData,\n          selectedSubSample,\n          selectedTest\n        };\n        inputData = { ...inputData,\n          childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\"],\n          ntransactiontestcode,\n          masterData,\n          selectedTest,\n          selectedSubSample,\n          checkBoxOperation: 3\n        };\n        dispatch(getTestChildTabDetailRegistration(inputData, true));\n      } else {\n        let masterData = { ...inputData.masterData,\n          selectedSubSample: inputData.selectedSubSample,\n          selectedTransactioncode: inputData.ntransactionsamplecode,\n          selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : []\n        };\n        const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode);\n        oldSelectedTest.forEach((test, index) => {\n          if (!wholeTestList.includes(test.ntransactiontestcode)) {\n            oldSelectedTest.splice(index, 1);\n          }\n\n          return null;\n        });\n        let keepOld = false;\n        let ntransactiontestcode;\n\n        if (oldSelectedTest.length > 0) {\n          keepOld = true;\n          masterData = { ...masterData,\n            selectedTest: oldSelectedTest\n          };\n        } else {\n          ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\";\n        }\n\n        masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment ? inputData.masterData.RegistrationTestComment : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\");\n        masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter ? inputData.masterData.RegistrationParameter : [] : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\");\n        let skipInfo = {};\n        let dataStateArray = [{\n          activeName: 'selectedSample',\n          dataStateName: 'sampleGridDataState'\n        }, {\n          activeName: 'RegistrationSourceCountry',\n          dataStateName: 'sourceDataState'\n        }, {\n          activeName: 'RegistrationTestComment',\n          dataStateName: 'testCommentDataState'\n        }, {\n          activeName: 'RegistrationParameter',\n          dataStateName: 'resultDataState'\n        }];\n        dataStateArray.map(arr => {\n          if (inputData[arr.dataStateName] && masterData[arr.activeName] && masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\n            skipInfo = { ...skipInfo,\n              [arr.dataStateName]: { ...inputData[arr.dataStateName],\n                skip: 0,\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          } else {\n            skipInfo = { ...skipInfo,\n              [arr.dataStateName]: { ...inputData[arr.dataStateName],\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          }\n\n          return null;\n        });\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab,\n            activeTestTab: inputData.activeTestTab,\n            ...skipInfo\n          }\n        });\n      }\n    }\n  };\n}\nexport function acceptRegistration(inputParam, LoginProps) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/acceptRegistration\", inputParam.inputData).then(response => {\n      if (response.data.rtn === undefined || response.data.rtn === \"Success\" || response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\" || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\" || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\n        replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n        replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n        replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n        delete response.data[\"RegistrationGetSample\"];\n        delete response.data[\"RegistrationGetSubSample\"];\n        delete response.data[\"RegistrationGetTest\"];\n        let masterData = { ...LoginProps,\n          ...response.data,\n          selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\n          selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\n          selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\")\n        };\n        let respObject = {\n          masterData,\n          ...inputParam.inputData,\n          loading: false,\n          loadEsign: false,\n          openModal: false,\n          showSample: undefined\n        };\n        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n\n        if (response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\" || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\" || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\n          toast.warn(intl.formatMessage({\n            id: response.data.rtn\n          }));\n        }\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false,\n            openModal: false\n          }\n        });\n        toast.warn(response.data.rtn);\n      }\n    }).catch(error => {\n      toast.error(error.message);\n    });\n  };\n}\nexport const addMoreTest = (inputParam, ncontrolCode) => {\n  return dispatch => {\n    let {\n      sampleList\n    } = inputParam;\n    let value = false;\n\n    if (inputParam.selectedSubSample && inputParam.selectedSubSample.length > 0) {\n      value = inputParam.selectedSubSample.some(obj => obj.nspecsampletypecode !== inputParam.selectedSubSample[0].nspecsampletypecode);\n\n      if (value) {\n        return toast.warn(intl.formatMessage({\n          id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\"\n        }));\n      }\n\n      sampleList = sampleList ? [...sampleList.slice(inputParam.skip, inputParam.take)] : [];\n      const selectedsample = getSameRecordFromTwoArrays(sampleList, inputParam.selectedSample, \"npreregno\"); // const selectsubsample = getSameRecordFromTwoArrays(sampleList, inputParam.selectedsubsample, \"npreregno\");\n\n      if (selectedsample && selectedsample.length > 0) {\n        const findTransactionStatus = [...new Set(selectedsample.map(item => item.ntransactionstatus))];\n\n        if (findTransactionStatus.length === 1) {\n          if (findTransactionStatus[0] !== transactionStatus.REJECT && findTransactionStatus[0] !== transactionStatus.CANCELLED) {\n            if (findTransactionStatus[0] !== transactionStatus.CERTIFIED && findTransactionStatus[0] !== transactionStatus.SENT) {\n              const findApprovalVersion = [...new Set(selectedsample.map(item => item.napprovalversioncode))];\n\n              if (findApprovalVersion.length === 1) {\n                const findSampleSpec = [...new Set(selectedsample.map(item => item.nallottedspeccode))]; //const findComponent = [...new Set(selectsubsample.map(item => item.ncomponentcode))];\n\n                if (findSampleSpec.length === 1) //&& findComponent.length === 1 \n                  {\n                    inputParam[\"snspecsampletypecode\"] = inputParam.selectedSubSample && [...new Set(inputParam.selectedSubSample.map(x => x.nspecsampletypecode))].join(\",\");\n                    dispatch(initRequest(true));\n                    rsapi.post(\"/registration/getMoreTest\", { ...inputParam\n                    }).then(response => {\n                      dispatch({\n                        type: DEFAULT_RETURN,\n                        payload: {\n                          availableTest: response.data,\n                          loadChildTest: true,\n                          loading: false,\n                          ncontrolCode,\n                          screenName: \"IDS_TEST\",\n                          operation: \"create\",\n                          openModal: true,\n                          parentPopUpSize: \"lg\",\n                          selectedRecord: {},\n                          showSample: undefined\n                        }\n                      });\n                    }).catch(error => {\n                      dispatch({\n                        type: DEFAULT_RETURN,\n                        payload: {\n                          loading: false\n                        }\n                      });\n\n                      if (error.response.status === 500) {\n                        toast.error(error.message);\n                      } else {\n                        toast.warn(this.props.formatMessage({\n                          id: error.response.data\n                        }));\n                      }\n                    });\n                  } else {\n                  toast.warn(intl.formatMessage({\n                    id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\"\n                  }));\n                }\n              } else {\n                toast.warn(intl.formatMessage({\n                  id: \"IDS_PLEASESELECTSAMPLEWITHSAMEAPPROVALCONFIG\"\n                }));\n              }\n            } else {\n              toast.warn(intl.formatMessage({\n                id: \"IDS_TESTCANNOTBEFORCERTIFIEDSAMPLES\"\n              }));\n            }\n          } else {\n            ////     toast.warn(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORCANCELLEDREJECTSAMPLES\" }));\n            toast.warn(intl.formatMessage({\n              id: \"IDS_SAMPLEISREJECTEDORCANCELLED\"\n            }));\n          }\n        } else {\n          toast.warn(intl.formatMessage({\n            id: \"IDS_PLEASESELECTSAMPLEWITHSAMESTATUS\"\n          }));\n        }\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SELECTSAMPLE\"\n        }));\n      }\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTSUBSAMPLE\"\n      }));\n    }\n  };\n};\nexport const createRegistrationTest = (inputParam, masterData, modalName) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData\n    }).then(response => {\n      let RegistrationGetTest = updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"], response.data[\"RegistrationGetTest\"]);\n      masterData = { ...masterData,\n        RegistrationGetTest,\n        selectedTest: response.data[\"RegistrationGetTest\"],\n        RegistrationParameter: response.data.RegistrationParameter // RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, masterData.RegistrationGetSample, 'npreregno')\n\n      };\n      let respObject = {\n        masterData,\n        [modalName]: false,\n        loading: false,\n        loadChildTest: false,\n        showSample: undefined,\n        openModal: false,\n        selectedRecord: {}\n      };\n      inputParam.postParamList[0]['clearFilter'] = 'yes';\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject)); // dispatch({\n      //     type: DEFAULT_RETURN,\n      //     payload: {\n      //         masterData,\n      //         [modalName]: false,\n      //         loading: false,\n      //         loadChildTest: false,\n      //         showSample: undefined,\n      //         openModal: false,\n      //         selectedRecord: {}\n      //     }\n      // });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n};\nexport function getEditRegistrationComboService(inputParam, columnList, selectedRecord1, childColumnList, comboComponents, withoutCombocomponent) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    const {\n      userInfo,\n      operation\n    } = { ...inputParam\n    };\n    const npreregno = inputParam.mastertoedit[inputParam.primaryKeyName];\n    let urlArray = [];\n    const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\n    const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n      parentcolumnlist: columnList,\n      childcolumnlist: childColumnList,\n      userinfo: userInfo\n    });\n    const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationDetails\", { ...inputParam.editRegParam,\n      npreregno\n    });\n    urlArray = [timeZoneService, actualService, selectedRegistration];\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = { ...response[2].data[\"SelectedRegistration\"][0]\n      };\n      selectedRecord = { ...selectedRecord,\n        ...selectedRecord['jsondata']\n      }; // const recordToEdit = { ...response[2].data[\"SelectedRegistration\"][0] };\n      //  const currentTime = rearrangeDateFormat(userInfo, response[6].data);\n\n      const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const timeZoneList = timeZoneMap.get(\"OptionList\");\n      const defaultTimeZone = {\n        label: userInfo.stimezoneid,\n        value: userInfo.ntimezonecode\n      }; //  const newcomboData = parentChildComboLoad(columnList, response[1].data,\n      // selectedRecord, childColumnList, withoutCombocomponent)\n\n      if (selectedRecord.ntransactionstatus === transactionStatus.CANCELLED || selectedRecord.ntransactionstatus === transactionStatus.REJECT) {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_CANNOTEDITCANCELLEDSAMPLE\"\n        }));\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      } else {\n        const languagetypeCode = undefined;\n        const comboData = response[1].data;\n        let comboValues = {};\n\n        if (columnList.length > 0) {\n          columnList.map(x => {\n            if (x.inputtype === 'combo') {\n              if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \n                {\n                  if (comboData[x.label].length > 0) {\n                    if (comboData[x.label][0].label === undefined) {\n                      const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode);\n                      comboData[x.label] = optionList.get(\"OptionList\");\n                    } else {\n                      comboData[x.label] = comboData[x.label];\n                      const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode);\n                    }\n                  } else {\n                    comboData[x.label] = [];\n                  } //comboValues = childComboLoad(x, comboData, selectedRecord, \n                  //   childColumnList, withoutCombocomponent)\\\n\n\n                  comboValues = childComboLoad(x, comboData, selectedRecord1, childColumnList, withoutCombocomponent);\n                } else {\n                comboValues = {\n                  \"comboData\": comboData\n                };\n              }\n            } else {\n              comboValues = {\n                comboData: comboData,\n                ...comboValues\n              };\n            }\n          });\n        } else {\n          comboValues = {\n            \"comboData\": comboData\n          };\n        }\n\n        let {\n          Specification,\n          AgaramTree,\n          ActiveKey,\n          FocusKey,\n          OpenNodes\n        } = [];\n        const selectedSpec = {};\n        Specification = constructOptionList(response[2].data[\"Specification\"] || [], \"nallottedspeccode\", \"sspecname\", undefined, undefined, true).get(\"OptionList\");\n        AgaramTree = response[2].data[\"AgaramTree\"];\n        ActiveKey = response[2].data[\"FocusKey\"];\n        FocusKey = response[2].data[\"ActiveKey\"];\n        OpenNodes = response[2].data[\"OpenNodes\"]; //Manufacturer = response.data[\"Manufacturer\"];\n\n        selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\n          \"value\": Specification[0].value,\n          \"label\": Specification[0].label,\n          \"item\": Specification[0].item\n        } : \"\";\n        selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\n        selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\n        selectedRecord = { ...selectedRecord,\n          ...selectedSpec\n        };\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            AgaramTree,\n            FocusKey,\n            ActiveKey,\n            OpenNodes,\n            selectedSpec,\n            Specification,\n            // statustoEditDetail: response[2].data[\"ApprovalConfigRole\"] || {},\n            // currentTime,\n            operation: \"update\",\n            screenName: inputParam.masterData.RealRegSubTypeValue.sregsubtypename,\n            // PopUpLabel: popUpLabel,\n            timeZoneList,\n            defaultTimeZone,\n            selectedRecord,\n            openPortal: true,\n            ncontrolCode: inputParam.editRegParam.ncontrolCode,\n            loadPreregister: true,\n            parentPopUpSize: \"xl\",\n            loading: false,\n            showSample: undefined,\n            comboData: comboValues.comboData,\n            childColumnList,\n            comboComponents,\n            withoutCombocomponent,\n            columnList //  regRecordToEdit:recordToEdit\n\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport function updateRegistration(inputParam, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/updateRegistration\", inputParam.inputData).then(response => {\n      // sortData(response.data);\n      replaceUpdatedObject(response.data[\"RegistrationGetSample\"], masterData.RegistrationGetSample, \"npreregno\");\n      replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      replaceUpdatedObject(response.data[\"RegistrationGetTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\"); //  let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\n      //let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n\n      masterData = { ...masterData,\n        //selectedSample: response.data[\"selectedSample\"],\n        // selectedSubSample: masterData[\"selectedSubSample\"],\n        //selectedTest:masterData[\"selectedTest\"],\n        // RegistrationGetTest,\n        // RegistrationGetSubSample,\n        RegistrationParameter: masterData[\"RegistrationParameter\"]\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          openPortal: false,\n          loading: false,\n          showConfirmAlert: false,\n          regDateEditConfirmMessage: undefined,\n          loadEsign: false,\n          loadPreregister: false,\n          selectedRecord: {},\n          showSample: undefined\n        }\n      }); // let inputData = {\n      //     masterData,\n      //     selectedTest: masterData.selectedTest,\n      //     ntransactiontestcode: masterData.selectedTest ?\n      //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\n      //     npreregno: masterData.selectedSample ?\n      //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\n      //     userinfo: inputParam.inputData.userinfo,\n      //     activeTestTab : masterData.activeTestTab,\n      //     screenName: masterData.activeTestTab,\n      //     resultDataState: inputParam.resultDataState,\n      //     testCommentDataState: inputParam.testCommentDataState,\n      // }\n      // dispatch(getTestChildTabDetail(inputData, true))\n    }).catch(error => {\n      if (error.response.status === 500) {\n        toast.error(error.message);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      } else if (error.response.status === 302) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false,\n            regEditParam: inputParam,\n            showConfirmAlert: true,\n            parentPopUpSize: \"xl\",\n            regDateEditConfirmMessage: error.response.data,\n            showSample: undefined\n          }\n        });\n      } else {\n        toast.warn(error.response.data);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            showSample: undefined\n          }\n        });\n      }\n    });\n  };\n}\nexport function cancelTestAction(inputParam, LoginProps) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/cancelTest\", inputParam.inputData).then(response => {\n      // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n      let masterData = { ...LoginProps,\n        selectedTest: response.data[\"selectedTest\"],\n        // RegistrationGetTest:response.data[\"RegistrationGetTest\"],\n        RegistrationGetTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\") //  RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, LoginProps.RegistrationGetSample, 'npreregno')\n\n      };\n      let respObject = {\n        masterData,\n        ...inputParam.inputData,\n        openModal: false,\n        loadEsign: false,\n        showConfirmAlert: false,\n        selectedRecord: {},\n        loading: false,\n        loadPreregister: false,\n        showSample: undefined\n      };\n      inputParam.postParamList[0]['clearFilter'] = 'no';\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data.rtn);\n      }\n    });\n  };\n}\nexport function cancelSampleAction(inputParam, LoginProps) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/cancelSample\", inputParam.inputData).then(response => {\n      replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n      replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n      let masterData = { ...LoginProps,\n        selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\n        selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\n        selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\")\n      };\n      let respObject = {\n        masterData,\n        ...inputParam.inputData,\n        loading: false,\n        loadEsign: false,\n        openModal: false,\n        showSample: undefined\n      };\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data.rtn);\n      }\n    });\n  };\n}\nexport function addsubSampleRegistration(masterData, userinfo, regcolumnList, selectRecord, regchildColumnList, regSubSamplecomboComponents, regSubSamplewithoutCombocomponent, Map, ncontrolcode, specBasedComponent) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    const urlArray = [];\n    const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\n    urlArray[0] = timeZoneService;\n    const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n      parentcolumnlist: regcolumnList,\n      childcolumnlist: regchildColumnList,\n      userinfo\n    });\n    urlArray[1] = actualService;\n\n    if (specBasedComponent) {\n      const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", { ...Map,\n        specBasedComponent: specBasedComponent,\n        userinfo\n      });\n      urlArray[2] = ComponentTestBySpec;\n    } else {\n      const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\n        nallottedspeccode: Map[\"nallottedspeccode\"],\n        slno: 1,\n        specBasedComponent: specBasedComponent\n      });\n      urlArray[2] = TestGet;\n    }\n\n    Axios.all(urlArray).then(response => {\n      const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const timeZoneList = timeZoneMap.get(\"OptionList\");\n      const defaultTimeZone = {\n        label: userinfo.stimezoneid,\n        value: userinfo.ntimezonecode\n      };\n      const newcomboData = parentChildComboLoad(regcolumnList, response[1].data, selectRecord, regchildColumnList, regSubSamplewithoutCombocomponent);\n      let TestCombined = [];\n      let lstComponent = [];\n\n      if (specBasedComponent) {\n        const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\", \"scomponentname\", undefined, undefined, true);\n        lstComponent = lstComponentMap.get(\"OptionList\");\n      } else {\n        TestCombined = response[2].data;\n      }\n\n      const comboData1 = newcomboData.comboData;\n      const selectedRecord1 = newcomboData.selectedRecord;\n      regSubSamplewithoutCombocomponent.map(componentrow => {\n        if (componentrow.inputtype === \"date\") {\n          if (componentrow.mandatory) {\n            selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? new Date() : \"\";\n          } // if (componentrow.timezone) {\n          //     sampleRegistration[\"jsondata\"][`tz${componentrow.label}`] = selectedRecord[`tz${componentrow.label}`] ?\n          //         { value: selectedRecord[`tz${componentrow.label}`].value, label: selectedRecord[`tz${componentrow.label}`].label } :\n          //         defaulttimezone ? defaulttimezone : -1\n          // }\n\n        }\n      });\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          screenName: \"SubSample\",\n          showSaveContinue: false,\n          parentPopUpSize: \"lg\",\n          loading: false,\n          lstComponent,\n          openModal: true,\n          operation: \"create\",\n          loadRegSubSample: true,\n          selectedRecord: selectedRecord1,\n          regSubSamplecomboData: comboData1,\n          regSubSamplecomboComponents,\n          regSubSamplewithoutCombocomponent,\n          TestCombined,\n          regparentSubSampleColumnList: regcolumnList,\n          ncontrolCode: ncontrolcode,\n          timeZoneList,\n          defaultTimeZone,\n          masterData,\n          specBasedComponent\n        }\n      });\n    }).catch(error => {\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n    });\n  };\n}\nexport function saveSubSample(inputParam) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/createSubSample\", inputParam.inputData).then(response => {\n      // let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\n      // let selectedSample = response.data[\"selectedSample\"];\n      let RegistrationGetSubSample = updatedObjectWithNewElement(inputParam.inputData.masterData.RegistrationGetSubSample, response.data[\"selectedSubSample\"]);\n      let RegistrationGetTest = response.data[\"selectedTest\"];\n      let selectedSubSample = response.data[\"selectedSubSample\"]; // RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\n\n      RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\n      let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\n      let RegistrationParameter = response.data[\"RegistrationParameter\"];\n      RegistrationParameter = getSameRecordFromTwoArrays(RegistrationParameter, selectedTest, 'ntransactiontestcode');\n      let masterData = { ...inputParam.inputData.masterData\n      };\n      masterData = { ...masterData,\n        ...response.data,\n        selectedSubSample,\n        selectedTest,\n        RegistrationGetSubSample,\n        RegistrationGetTest,\n        RegistrationParameter\n      };\n      let respObject = {\n        masterData,\n        openModal: false,\n        loadEsign: false,\n        loading: false,\n        showSample: undefined,\n        selectedRecord: {},\n        loadRegSubSample: false\n      };\n      inputParam.postParamList[0]['clearFilter'] = 'yes';\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject)); //    dispatch({\n      //     type: DEFAULT_RETURN,\n      //     payload: {\n      //         masterData,\n      //         openModal: false,\n      //         loadEsign: false,\n      //         loading: false,\n      //         showSample: undefined,\n      //         selectedRecord: {},\n      //         loadRegSubSample:false\n      //     }\n      // });\n    }).catch(error => {\n      // console.log(error);\n      toast.error(error.message);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          showConfirmAlert: false\n        }\n      });\n    });\n  };\n}\nexport function getEditSubSampleComboService(inputParam, columnList, selectedRecord1, childColumnList, comboComponents, withoutCombocomponent, specBasedComponent) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    const {\n      userInfo,\n      operation\n    } = { ...inputParam\n    };\n    const ntransactionsamplecode = inputParam.mastertoedit[inputParam.primaryKeyName];\n    let urlArray = [];\n    const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\n    const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\n      parentcolumnlist: columnList,\n      childcolumnlist: childColumnList,\n      userinfo: userInfo\n    });\n    const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationSubSampleDetails\", { ...inputParam.editRegParam,\n      ntransactionsamplecode\n    });\n    urlArray = [timeZoneService, actualService, selectedRegistration]; // if(specBasedComponent){\n    //     const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\n    //         ...Map,\n    //         specBasedComponent: specBasedComponent\n    //     })\n    //     urlArray.push(ComponentTestBySpec) \n    // }\n\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = { ...response[2].data[\"SelectedRegistrationSubSample\"][0]\n      };\n      selectedRecord = { ...selectedRecord,\n        ...selectedRecord['jsondata']\n      };\n      const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\n      const timeZoneList = timeZoneMap.get(\"OptionList\");\n      const defaultTimeZone = {\n        label: userInfo.stimezoneid,\n        value: userInfo.ntimezonecode\n      };\n\n      if (selectedRecord.ntransactionstatus !== transactionStatus.PREREGISTER) {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SELECTPREREGISTERSUBSAMPLETOEDIT\"\n        }));\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      } else {\n        //               let lstComponent=[]\n        if (specBasedComponent) {\n          selectedRecord[\"ncomponentcode\"] = {\n            label: selectedRecord[\"scomponentname\"],\n            value: selectedRecord[\"ncomponentcode\"]\n          };\n        }\n\n        const languagetypeCode = undefined;\n        const comboData = response[1].data;\n        let comboValues = {};\n\n        if (columnList.length > 0) {\n          columnList.map(x => {\n            if (x.inputtype === 'combo') {\n              if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \n                {\n                  if (comboData[x.label].length > 0) {\n                    if (comboData[x.label][0].label === undefined) {\n                      const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode);\n                      comboData[x.label] = optionList.get(\"OptionList\");\n                    } else {\n                      comboData[x.label] = comboData[x.label];\n                      const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember, x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode);\n                    }\n                  } else {\n                    comboData[x.label] = [];\n                  } //comboValues = childComboLoad(x, comboData, selectedRecord, \n                  //   childColumnList, withoutCombocomponent)\\\n\n\n                  comboValues = childComboLoad(x, comboData, selectedRecord1, childColumnList, withoutCombocomponent);\n                } else {\n                comboValues = {\n                  \"comboData\": comboData\n                };\n              }\n            } else {\n              comboValues = {\n                comboData: comboData,\n                ...comboValues\n              };\n            }\n          });\n        } else {\n          comboValues = {\n            \"comboData\": comboData\n          };\n        }\n\n        selectedRecord = { ...selectedRecord\n        };\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            operation,\n            timeZoneList,\n            defaultTimeZone,\n            selectedRecord,\n            openModal: true,\n            ncontrolCode: inputParam.editSubSampleRegParam.ncontrolCode,\n            parentPopUpSize: \"lg\",\n            loading: false,\n            showSample: undefined,\n            regSubSamplecomboData: comboValues.comboData,\n            loadRegSubSample: true,\n            screenName: \"IDS_SUBSAMPLE\",\n            operation: \"update\",\n            specBasedComponent //  regRecordToEdit:recordToEdit\n\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport function onUpdateSubSampleRegistration(inputParam, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/updateRegistrationSubSample\", inputParam.inputData).then(response => {\n      sortData(response.data);\n      replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\"); //replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      // replaceUpdatedObject(response.data[\"selectedTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\n      //  let RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];\n\n      let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\n      masterData = { ...masterData,\n        // selectedSample: response.data[\"selectedSample\"],\n        selectedSubSample: response.data[\"selectedSubSample\"],\n        selectedTest: response.data[\"selectedTest\"],\n        RegistrationGetTest,\n        // RegistrationGetSubSample,\n        RegistrationParameter: response.data[\"RegistrationParameter\"]\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          openModal: false,\n          loading: false,\n          showConfirmAlert: false,\n          regDateEditConfirmMessage: undefined,\n          loadEsign: false,\n          loadRegSubSample: false,\n          selectedRecord: {},\n          showSample: undefined,\n          screenName: \"SubSample\"\n        }\n      }); // let inputData = {\n      //     masterData,\n      //     selectedTest: masterData.selectedTest,\n      //     ntransactiontestcode: masterData.selectedTest ?\n      //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\n      //     npreregno: masterData.selectedSample ?\n      //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\n      //     userinfo: inputParam.inputData.userinfo,\n      //     activeTestTab : masterData.activeTestTab,\n      //     screenName: masterData.activeTestTab,\n      //     resultDataState: inputParam.resultDataState,\n      //     testCommentDataState: inputParam.testCommentDataState,\n      // }\n      // dispatch(getTestChildTabDetail(inputData, true))\n    }).catch(error => {\n      if (error.response.status === 500) {\n        toast.error(error.message);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n      } else if (error.response.status === 302) {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false,\n            regEditParam: inputParam,\n            showConfirmAlert: true,\n            parentPopUpSize: \"xl\",\n            regDateEditConfirmMessage: error.response.data,\n            showSample: undefined\n          }\n        });\n      } else {\n        toast.warn(error.response.data);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            showSample: undefined\n          }\n        });\n      }\n    });\n  };\n}\nexport function cancelSubSampleAction(inputParam, LoginProps) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/cancelSubSample\", inputParam.inputData).then(response => {\n      // replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n      replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n      let masterData = { ...LoginProps,\n        // selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\n        selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\n        selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\")\n      };\n      let respObject = {\n        masterData,\n        ...inputParam.inputData,\n        loading: false,\n        loadEsign: false,\n        openModal: false,\n        showSample: undefined\n      };\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data.rtn);\n      }\n    });\n  };\n}\nexport function preregRecordToQuarantine(inputParam, LoginProps) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(\"/registration/quarantineRegistration\", inputParam.inputData).then(response => {\n      // replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n      // replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n      replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\n      replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\n      replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\n      delete response.data[\"RegistrationGetSample\"];\n      delete response.data[\"RegistrationGetSubSample\"];\n      delete response.data[\"RegistrationGetTest\"];\n      let masterData = { ...LoginProps,\n        selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\n        selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\n        selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\")\n      };\n      let respObject = {\n        masterData,\n        loading: false,\n        loadEsign: false,\n        openModal: false,\n        showSample: undefined\n      };\n      dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject));\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data.rtn);\n      }\n    });\n  };\n}\nexport function getTestChildTabDetailRegistration(inputData, isServiceRequired) {\n  return function (dispatch) {\n    if (inputData.ntransactiontestcode && inputData.ntransactiontestcode.length > 0) {\n      let inputParamData = {\n        ntransactiontestcode: inputData.ntransactiontestcode,\n        npreregno: inputData.npreregno,\n        userinfo: inputData.userinfo\n      };\n      let url = null;\n      let {\n        testtake\n      } = inputData;\n      let activeName = \"\";\n      let dataStateName = \"\";\n\n      switch (inputData.activeTestTab) {\n        case \"IDS_RESULTS\":\n          url = \"approval/getapprovalparameter\";\n          activeName = \"ApprovalParameter\";\n          dataStateName = \"resultDataState\";\n          break;\n\n        case \"IDS_PARAMETERRESULTS\":\n          url = \"registration/getregistrationparameter\";\n          activeName = \"RegistrationParameter\";\n          dataStateName = \"resultDataState\";\n          break;\n\n        case \"IDS_INSTRUMENT\":\n          url = \"resultentrybysample/getResultUsedInstrument\";\n          activeName = \"ResultUsedInstrument\";\n          dataStateName = \"instrumentDataState\";\n          break;\n\n        case \"IDS_MATERIAL\":\n          url = \"resultentrybysample/getResultUsedMaterial\";\n          break;\n\n        case \"IDS_TASK\":\n          url = \"resultentrybysample/getResultUsedTask\";\n          activeName = \"ResultUsedTasks\";\n          dataStateName = \"taskDataState\";\n          break;\n\n        case \"IDS_TESTATTACHMENTS\":\n          url = \"attachment/getTestAttachment\";\n          activeName = \"RegistrationTestAttachment\";\n          break;\n\n        case \"IDS_TESTCOMMENTS\":\n          url = \"comments/getTestComment\";\n          activeName = \"RegistrationTestComment\";\n          dataStateName = \"testCommentDataState\";\n          break;\n\n        case \"IDS_DOCUMENTS\":\n          url = \"approval/getapprovalparameter\";\n          break;\n\n        case \"IDS_RESULTCHANGEHISTORY\":\n          url = \"approval/getApprovalResultChangeHistory\";\n          activeName = \"ApprovalResultChangeHistory\";\n          dataStateName = \"resultChangeDataState\";\n          break;\n\n        case \"IDS_TESTAPPROVALHISTORY\":\n          url = \"approval/getApprovalHistory\";\n          activeName = \"ApprovalHistory\";\n          dataStateName = \"historyDataState\";\n          break;\n\n        case \"IDS_SAMPLEATTACHMENTS\":\n          url = \"attachment/getSampleAttachment\";\n          break;\n\n        default:\n          url = \"approval/getapprovalparameter\";\n          activeName = \"ApprovalParameter\";\n          dataStateName = \"resultDataState\";\n          break;\n      }\n\n      if (url !== null) {\n        dispatch(initRequest(true));\n\n        if (isServiceRequired) {\n          rsapi.post(url, inputParamData).then(response => {\n            let skipInfo = {};\n            let responseData = { ...response.data,\n              selectedSample: inputData.selectedSample || inputData.masterData.selectedSample,\n              selectedTest: inputData.selectedTest\n            }; //responseData = sortData(responseData)\n            // fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\",inputData.removeElementFromArray);\n\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\n            let masterData = { ...inputData.masterData,\n              selectedSample: inputData.selectedSample || inputData.masterData.selectedSample,\n              selectedTest: inputData.selectedTest,\n              selectedPreregno: inputData.npreregno,\n              selectedSampleCode: inputData.ntransactionsamplecode,\n              selectedTestCode: inputData.ntransactiontestcode\n            };\n\n            if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n              skipInfo = {\n                [dataStateName]: { ...inputData[dataStateName],\n                  skip: 0,\n                  sort: undefined,\n                  filter: undefined\n                }\n              };\n            } else {\n              skipInfo = { ...skipInfo,\n                [dataStateName]: { ...inputData[dataStateName],\n                  sort: undefined,\n                  filter: undefined\n                }\n              };\n            }\n\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                masterData,\n                loading: false,\n                showFilter: false,\n                activeTestTab: inputData.activeTestTab,\n                screenName: inputData.screenName,\n                testtake,\n                testskip: undefined,\n                ...skipInfo\n              }\n            });\n          }).catch(error => {\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                loading: false\n              }\n            });\n\n            if (error.response.status === 500) {\n              toast.error(error.message);\n            } else {\n              toast.warn(error.response.data);\n            }\n          });\n        } else {\n          fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\", inputData.removeElementFromArray);\n          let skipInfo = {};\n          let masterData = { ...inputData.masterData,\n            selectedTest: inputData.selectedTest,\n            selectedPreregno: inputData.npreregno,\n            selectedSampleCode: inputData.ntransactionsamplecode,\n            selectedTestCode: inputData.ntransactiontestcode\n          };\n\n          if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\n            skipInfo = {\n              [dataStateName]: { ...inputData[dataStateName],\n                skip: 0,\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          } else {\n            skipInfo = { ...skipInfo,\n              [dataStateName]: { ...inputData[dataStateName],\n                sort: undefined,\n                filter: undefined\n              }\n            };\n          }\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              masterData,\n              loading: false,\n              showFilter: false,\n              activeTestTab: inputData.activeTestTab,\n              screenName: inputData.screenName,\n              testtake,\n              testskip: undefined,\n              ...skipInfo\n            }\n          });\n        }\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...inputData.masterData\n            },\n            loading: false,\n            showFilter: false,\n            activeSampleTab: inputData.activeSampleTab\n          }\n        });\n      }\n    } else {\n      let {\n        ApprovalParameter,\n        ResultUsedInstrument,\n        ResultUsedTasks,\n        RegistrationTestAttachment,\n        ApprovalResultChangeHistory,\n        RegistrationTestComment,\n        ApprovalHistory\n      } = inputData.masterData;\n\n      switch (inputData.activeTestTab) {\n        case \"IDS_RESULTS\":\n          ApprovalParameter = [];\n          break;\n\n        case \"IDS_INSTRUMENT\":\n          ResultUsedInstrument = [];\n          break;\n\n        case \"IDS_TASK\":\n          ResultUsedTasks = [];\n          break;\n\n        case \"IDS_TESTATTACHMENTS\":\n          RegistrationTestAttachment = [];\n          break;\n\n        case \"IDS_RESULTCHANGEHISTORY\":\n          ApprovalResultChangeHistory = [];\n          break;\n\n        case \"IDS_TESTCOMMENTS\":\n          RegistrationTestComment = [];\n          break;\n\n        case \"IDS_APPROVALHISTORY\":\n          ApprovalHistory = [];\n          break;\n\n        default:\n          ApprovalParameter = [];\n          break;\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputData.masterData,\n            selectedTest: [],\n            ApprovalParameter,\n            ResultUsedInstrument,\n            ResultUsedTasks,\n            RegistrationTestAttachment,\n            ApprovalResultChangeHistory,\n            RegistrationTestComment,\n            ApprovalHistory\n          },\n          loading: false\n        }\n      });\n    }\n  };\n}","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/actions/RegistrationAction.js"],"names":["rsapi","Axios","toast","filterRecordBasedOnTwoArrays","sortData","rearrangeDateFormat","convertDateTimetoString","fillRecordBasedOnCheckBoxSelection","getRecordBasedOnPrimaryKeyName","updatedObjectWithNewElement","replaceUpdatedObject","parentChildComboLoad","getSameRecordFromTwoArrays","constructjsonOptionList","constructjsonOptionDefault","childComboLoad","filterRecordBasedOnPrimaryKeyName","reArrangeArrays","DEFAULT_RETURN","intl","initRequest","RegistrationSubType","RegistrationType","transactionStatus","crudMaster","postCRUDOrganiseTransSearch","constructOptionList","getSampleTypeChange","Map","masterData","event","labelname","dispatch","post","then","response","data","item","type","payload","loading","catch","error","message","getSubSampleChildTabDetail","inputData","ntransactionsamplecode","length","inputParamData","userinfo","url","activeSubSampleTab","responseData","selectedSample","selectedTestCode","ntransactiontestcode","showFilter","screenName","status","warn","activeSampleTab","getRegTypeChange","getRegSubTypeChange","getComponentTestBySpec","selectedRecord","Component","Test","slno","selectedComponent","undefined","SelectedTest","Object","keys","popUptestDataState","skip","take","getTestfromDB","objComponent","LoginProps","nflag","component","value","label","dreceiveddate","userInfo","nspecsampletypecode","TestData","loadComponent","selectComponent","showSaveContinue","SelectedSource","parentPopUpSize","CurrentTime","unshift","EditComponent","urlArray","ComponentTestBySpec","timezone","all","lstComponentMap","lstComponent","timeZoneListMap","TimeZoneField","get","timeZoneList","scomponentname","ncomponentcode","ntzdreceivedate","findIndex","x","ntimezonecode","stimezoneid","childoperation","ChildscreenName","openChildModal","ReloadData","searchSampleRef","current","searchSubSampleRef","searchTestRef","testskip","testtake","subsampletake","subsampleskip","showSample","getTreeByProduct","comboData","inputParam","Specification","AgaramTree","ActiveKey","FocusKey","OpenNodes","selectedSpec","sversion","ntemplatemanipulationcode","getNewRegSpecification","selectedNode","operation","methodUrl","ntreetemplatemanipulationcode","activeKey","focusKey","primaryKey","AddComponents","sreceiveddate","stzdreceivedate","scomments","nallottedspeccode","openPortal","openModal","getTest","nneedsubsample","specBasedComponent","componentTest","TestCombined","loadTest","formatMessage","id","addsubSample","columnList","childColumnList","SubSamplecomboComponents","SubSamplewithoutCombocomponent","isServiceRequired","SubSamplecomboData","timeZoneService","actualService","parentcolumnlist","childcolumnlist","TestGet","timeZoneMap","defaultTimeZone","newcomboData","comboData1","selectedRecord1","map","componentrow","inputtype","mandatory","loadcurrentdate","Date","loadSubSample","parentSubSampleColumnList","selectedTestData","selectedobject","Reg","addSubSampleSaveContinue","Map1","selectedTestData1","filter","some","y","editSubSample","Componnet","comp","insertRegistration","RegistrationGetSample","RegistrationGetSubSample","RegistrationGetTest","selectedSubSample","selectedTest","multipleselectionFlag","respObject","loadEsign","showConfirmAlert","loadPreregister","subSampleDataGridList","postParamList","getRegistrationSample","selectedFilter","getRegistrationsubSampleDetail","nsampletypecode","nregtypecode","nregsubtypecode","npreregno","ntransactionstatus","napprovalconfigcode","activeTestTab","ndesigntemplatemappingcode","checkBoxOperation","activeName","dataStateName","subSample","skipInfo","oldSelectedTest","oldSelectedSubSample","childTabsKey","removeElementFromArray","selectedPreregno","RegistrationTestComment","RegistrationTestAttachment","RegistrationParameter","wholeSubSampleList","b","forEach","subsample","index","includes","splice","ResponseData","RegistrationTestComment1","RegistrationTestAttachment1","resultResponseData","RegistrationParameter1","ntransactiontestcode1","ResponseData1","RegistrationTestComment2","ntransactionTestCode","bool","wholeTestList","test","keepOld","sampleGridDataState","sort","attachmentskip","isGrandChildGetRequired","TestSelected","subSampleSelected","filterTestSameOldSelectedTest","join","filterSelectedSubSample","getRegistrationTestDetail","getTestChildTabDetailRegistration","subsamplecheck","SubSampleSelected","wholeSubSample","selectedSubSample1","dataStateArray","arr","selectedTransactionsamplecode","testList","toString","selectedTransactioncode","acceptRegistration","rtn","addMoreTest","ncontrolCode","sampleList","obj","slice","selectedsample","findTransactionStatus","Set","REJECT","CANCELLED","CERTIFIED","SENT","findApprovalVersion","napprovalversioncode","findSampleSpec","availableTest","loadChildTest","props","createRegistrationTest","modalName","classUrl","getEditRegistrationComboService","comboComponents","withoutCombocomponent","mastertoedit","primaryKeyName","selectedRegistration","editRegParam","languagetypeCode","comboValues","optionList","valuemember","displaymember","source","isMultiLingual","RealRegSubTypeValue","sregsubtypename","updateRegistration","regDateEditConfirmMessage","regEditParam","cancelTestAction","cancelSampleAction","addsubSampleRegistration","regcolumnList","selectRecord","regchildColumnList","regSubSamplecomboComponents","regSubSamplewithoutCombocomponent","ncontrolcode","loadRegSubSample","regSubSamplecomboData","regparentSubSampleColumnList","saveSubSample","getEditSubSampleComboService","PREREGISTER","editSubSampleRegParam","onUpdateSubSampleRegistration","cancelSubSampleAction","preregRecordToQuarantine","selectedSampleCode","ApprovalParameter","ResultUsedInstrument","ResultUsedTasks","ApprovalResultChangeHistory","ApprovalHistory"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport Axios from 'axios';\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport {\r\n    filterRecordBasedOnTwoArrays, sortData,\r\n    rearrangeDateFormat, convertDateTimetoString, fillRecordBasedOnCheckBoxSelection, getRecordBasedOnPrimaryKeyName, updatedObjectWithNewElement, replaceUpdatedObject, parentChildComboLoad, getSameRecordFromTwoArrays, constructjsonOptionList, constructjsonOptionDefault, childComboLoad, filterRecordBasedOnPrimaryKeyName, reArrangeArrays\r\n} from '../components/CommonScript'\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport { intl } from '../components/App';\r\nimport { initRequest } from './LoginAction';\r\nimport { RegistrationSubType, RegistrationType, transactionStatus } from '../components/Enumeration';\r\nimport { crudMaster, postCRUDOrganiseTransSearch } from './ServiceAction'\r\n//import { getTestChildTabDetail } from './index.js'\r\nimport { constructOptionList } from '../components/CommonScript';\r\n\r\nexport function getSampleTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getRegTypeBySampleType\", Map)\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getSubSampleChildTabDetail(inputData) {\r\n    return function (dispatch) {\r\n        if (inputData.ntransactionsamplecode.length > 0) {\r\n            let inputParamData = {\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n                userinfo: inputData.userinfo\r\n            }\r\n            let url = null\r\n            switch (inputData.activeSubSampleTab) {\r\n                case \"IDS_SUBSAMPLEATTACHMENTS\":\r\n                    url = \"attachment/getSubSampleAttachment\"\r\n                    break;\r\n                case \"IDS_SUBSAMPLECOMMENTS\":\r\n                    url = \"comments/getSubSampleComment\"\r\n                    break;\r\n                default:\r\n                    url = null\r\n                    break;\r\n            }\r\n            if (url !== null) {\r\n                dispatch(initRequest(true));\r\n                rsapi.post(url, inputParamData)\r\n                    .then(response => {\r\n                        let responseData = { ...response.data }\r\n                        responseData = sortData(responseData)\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN, payload: {\r\n                                masterData: {\r\n                                    ...inputData.masterData,\r\n                                    ...responseData,\r\n                                    selectedSample: inputData.selectedSample,\r\n                                    selectedTestCode: inputData.ntransactiontestcode,\r\n                                },\r\n                                loading: false,\r\n                                showFilter: false,\r\n                                activeSubSampleTab: inputData.activeSubSampleTab,\r\n                                screenName: inputData.screenName\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        }\r\n                        else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    })\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab\r\n                    }\r\n                })\r\n            }\r\n        } else {\r\n            toast.warn(\"Please Select a Sample\");\r\n        }\r\n    }\r\n}\r\n\r\nexport function getRegTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        rsapi.post(\"/registration/getRegSubTypeByRegType\", Map)\r\n            .then(response => {\r\n                // const RegistrationSubType = response.data[\"RegistrationSubType\"];\r\n\r\n                //  console.log(response.data);\r\n                // RegistrationSubType.length > 0 ?\r\n                //     selectedRecord[\"nregsubtypecode\"] = {\r\n                //         \"value\": RegistrationSubType[0].nregsubtypecode,\r\n                //         \"label\": RegistrationSubType[0].sregsubtypename\r\n                //     } : selectedRecord[\"nregsubtypecode\"] = \"\";\r\n                // const [labelname] = event.item;\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegSubTypeChange(Map, masterData, event, labelname) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getRegTemplateTypeByRegSubType\", Map)\r\n\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    [labelname]: { ...event.item }\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport function getComponentTestBySpec(Map, selectedRecord, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getComponentTestBySpec\", Map)\r\n            .then(response => {\r\n                const { Component, Test } = response.data;\r\n                let slno = Component.length > 0 ? Component[0].slno : -1;\r\n                let selectedComponent = Component.length > 0 ? Component[0] : undefined\r\n                let SelectedTest = [];\r\n                if (Object.keys(Test).length > 0) {\r\n                    SelectedTest = Test[slno];\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Component, Test, SelectedTest, selectedComponent, loading: false,\r\n                        selectedRecord, popUptestDataState: { skip: 0, take: 10 }\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function getTestfromDB(objComponent, LoginProps, nflag) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let component = { ...objComponent };\r\n        component[\"ncomponentcode\"] = objComponent[\"ncomponentcode\"] ? objComponent[\"ncomponentcode\"].value : -1;\r\n        component[\"nstoragelocationcode\"] = objComponent[\"nstoragelocationcode\"] ? objComponent[\"nstoragelocationcode\"].value : -1;\r\n        component[\"nstorageconditioncode\"] = objComponent[\"nstorageconditioncode\"] ? objComponent[\"nstorageconditioncode\"].value : -1;\r\n        component[\"slno\"] = LoginProps.Component ? Object.keys(LoginProps.Component).length + 1 : 0;\r\n        component[\"scomponentname\"] = objComponent[\"ncomponentcode\"].label;\r\n        component[\"sstoragelocationname\"] = objComponent[\"nstoragelocationcode\"] && objComponent[\"nstoragelocationcode\"].label ? objComponent[\"nstoragelocationcode\"].label : \"\";\r\n        component[\"sstorageconditionname\"] = objComponent[\"nstorageconditioncode\"] && objComponent[\"nstorageconditioncode\"].label ? objComponent[\"nstorageconditioncode\"].label : \"\";\r\n        component[\"ntzdmanufdate\"] = objComponent[\"ntzdmanufdate\"] ? objComponent[\"ntzdmanufdate\"].value : -1;\r\n        component[\"ntzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].value : -1;\r\n        component[\"stzdreceivedate\"] = objComponent[\"ntzdreceivedate\"] ? objComponent[\"ntzdreceivedate\"].label : \"\";\r\n        component[\"nplasmafilecode\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].value : -1;\r\n        component[\"splasmafilenumber\"] = objComponent[\"nplasmafilecode\"] ? objComponent[\"nplasmafilecode\"].label : \"\";\r\n        const dreceiveddate = objComponent[\"dreceiveddate\"];\r\n        component[\"dreceiveddate\"] = dreceiveddate;//formatInputDate(objComponent[\"dreceiveddate\"], false);\r\n        component[\"sreceiveddate\"] = convertDateTimetoString(dreceiveddate, LoginProps.userInfo);//formatInputDateWithoutT(objComponent[\"dreceiveddate\"], false);//formatDate(objComponent[\"sreceiveddate\"]);\r\n        // rsapi.post(\"/registration/getTestfromDB\", { \"Component\": component })\r\n        rsapi.post(\"/registration/getTestfromDB\", {\r\n            nspecsampletypecode: component.nspecsampletypecode,\r\n            slno: component.slno\r\n        })\r\n            .then(response => {\r\n                let TestData = response.data;\r\n                let slno = component.slno;\r\n                let SelectedTest = [];\r\n                let loadComponent = true;\r\n                let selectComponent = {};\r\n                let showSaveContinue = true;\r\n                let SelectedSource = [];\r\n                // let openChildModal = true;\r\n                let selectedComponent = undefined;\r\n                let parentPopUpSize = \"lg\"\r\n                // selectComponent = objComponent\r\n                if (nflag === 1) {\r\n                    loadComponent = true;\r\n                    objComponent[\"smanuflotno\"] = \"\";\r\n                    objComponent[\"dreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime)//new Date(LoginProps.CurrentTime);\r\n                    objComponent[\"sreceiveddate\"] = rearrangeDateFormat(LoginProps.userInfo, LoginProps.CurrentTime)//new Date(LoginProps.CurrentTime);\r\n                    selectComponent = objComponent;\r\n                } else {\r\n                    loadComponent = false;\r\n                    parentPopUpSize = \"xl\"\r\n                    // openChildModal = false;\r\n                    showSaveContinue = false;\r\n                    selectComponent = undefined\r\n                }\r\n                let Test = LoginProps.Test || [];\r\n                let Component = LoginProps.Component || [];\r\n                Component.unshift(component);\r\n                selectedComponent = component;\r\n                Test[slno] = response.data;\r\n                SelectedTest = TestData;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Component, Test, SelectedTest, selectComponent, selectedComponent,\r\n                        loadComponent, showSaveContinue, parentPopUpSize, loading: false, SelectedSource\r\n                    }\r\n                });\r\n                // console.log(response.data);\r\n            })\r\n            .catch(error => {\r\n                //   console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function EditComponent(Map, component, userInfo) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [];\r\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\",\r\n            Map);\r\n\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n\r\n        urlArray = [ComponentTestBySpec, timezone]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, true);\r\n                const TimeZoneField = response[1].data;\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n\r\n                component[\"ncomponentcode\"] = { label: component.scomponentname, value: component.ncomponentcode }\r\n                component[\"dreceiveddate\"] = rearrangeDateFormat(userInfo, component[\"sreceiveddate\"]);\r\n                component[\"scomments\"] = component[\"scomments\"]\r\n\r\n                let ntzdreceivedate = component.ntzdreceivedate;\r\n                if (component.ntzdreceivedate !== null && typeof component.ntzdreceivedate === \"object\") {\r\n                    ntzdreceivedate = component.ntzdreceivedate.value;\r\n                }\r\n                component[\"ntzdreceivedate\"] = component.ntzdreceivedate ?\r\n                    {\r\n                        \"label\": TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].stimezoneid, \"value\":\r\n                            TimeZoneField[TimeZoneField.findIndex(x => x.ntimezonecode === ntzdreceivedate)].ntimezonecode\r\n                    } : \"\"\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadComponent: true, childoperation: \"update\",\r\n                        lstComponent, ChildscreenName: \"Component\",\r\n                        openChildModal: false, selectComponent: component, parentPopUpSize: \"lg\",\r\n                        timeZoneList, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function ReloadData(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData })\r\n            .then(response => {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    ...response.data\r\n                }\r\n                if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                    inputData.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    //masterData['searchedTests'] = undefined\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                // let selectedFilter = inputData.selectedFilter;\r\n                // selectedFilter[\"fromdate\"] = \"\";\r\n                // selectedFilter[\"todate\"] = \"\";\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        testskip: 0,\r\n                        take: undefined,\r\n                        testtake: undefined,\r\n                        subsampletake: undefined,\r\n                        subsampleskip: 0,\r\n                        showSample: undefined,\r\n                        //selectedFilter\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTreeByProduct(Map, selectedRecord, comboData, inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/getTreeByProduct\", Map)\r\n            .then(response => {\r\n                let { Specification, AgaramTree, ActiveKey, FocusKey, OpenNodes } = [];\r\n                const selectedSpec = {}\r\n                if (response.data[\"rtn\"] === true) {\r\n                    Specification = constructOptionList(response.data[\"Specification\"] || [], \"nallottedspeccode\",\r\n                        \"sspecname\", undefined, undefined, true).get(\"OptionList\");\r\n                    AgaramTree = response.data[\"AgaramTree\"];\r\n                    ActiveKey = response.data[\"ActiveKey\"];\r\n                    FocusKey = response.data[\"FocusKey\"];\r\n                    OpenNodes = response.data[\"OpenNodes\"];\r\n                    //Manufacturer = response.data[\"Manufacturer\"];\r\n                    selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\r\n                        \"value\": Specification[0].value,\r\n                        \"label\": Specification[0].label,\r\n                        \"item\": Specification[0].item\r\n                    } : \"\";\r\n\r\n                    selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\"\r\n                    selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1\r\n                }\r\n                selectedRecord = { ...selectedRecord, ...selectedSpec }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        Specification,\r\n                        selectedRecord,\r\n                        AgaramTree, ActiveKey, FocusKey, OpenNodes,\r\n                        Test: [],\r\n                        SelectedTest: [],\r\n                        loading: false,\r\n                        comboData,\r\n                        ...inputParam,\r\n                        selectedSpec,\r\n                        Component: [],\r\n                        selectComponent: {},\r\n                        selectedComponent: {}\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport const getNewRegSpecification = (inputParam, masterData) => {\r\n    return (dispatch) => {\r\n        if (inputParam.selectedNode !== null) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/registration/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam, ntreetemplatemanipulationcode: inputParam.selectedNode.ntemplatemanipulationcode })\r\n                .then(response => {\r\n                    sortData(response.data);\r\n                    let Specification = constructOptionList(response.data || [], \"nallottedspeccode\", \"sspecname\", false, false, true).get(\"OptionList\");\r\n                    let selectedComponent = undefined;\r\n                    inputParam.selectedRecord[\"nallottedspeccode\"] = Specification.length > 0 ? { value: Specification[0].value, label: Specification[0].label, item: Specification[0].item } : \"\";\r\n                    inputParam.selectedRecord[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\";\r\n                    inputParam.selectedRecord[\"ntemplatemanipulationcode\"] = Specification.length > 0 ? Specification[0].item.ntemplatemanipulationcode : -1;\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ActiveKey: inputParam.activeKey,\r\n                            FocusKey: inputParam.focusKey,\r\n                            primaryKey: inputParam.primaryKey,\r\n                            Specification: Specification,\r\n                            selectedNode: inputParam.selectedNode,\r\n                            selectedRecord: inputParam.selectedRecord,\r\n                            Test: [],\r\n                            selectedComponent,\r\n                            SelectedTest: [],\r\n                            loading: false,\r\n                            showSample: undefined\r\n                        }\r\n                    }\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function AddComponents(Map) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = []\r\n        const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\",\r\n            Map);\r\n        const timezone = rsapi.post(\"timezone/getTimeZone\");\r\n\r\n        urlArray = [ComponentTestBySpec, timezone\r\n        ]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const lstComponentMap = constructOptionList(response[0].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const timeZoneListMap = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, true);\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                const timeZoneList = timeZoneListMap.get(\"OptionList\");\r\n                let dreceiveddate = null;\r\n                if (lstComponent[0].item.sreceiveddate)\r\n                    dreceiveddate = rearrangeDateFormat(Map[\"userinfo\"], lstComponent[0].item.sreceiveddate);//new Date(lstComponent[0].item.sreceiveddate);//|| [];\r\n\r\n                let selectComponent = {\r\n                    sreceiveddate: dreceiveddate,\r\n                    dreceiveddate,\r\n                    ntzdreceivedate: { \"label\": Map[\"userinfo\"].stimezoneid, \"value\": Map[\"userinfo\"].ntimezonecode },\r\n                    stzdreceivedate: Map[\"userinfo\"].stimezoneid,\r\n                    scomments: \"\",\r\n                    nallottedspeccode: lstComponent[0].item.nallottedspeccode\r\n                };\r\n                let CurrentTime = dreceiveddate;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadComponent: true,\r\n                        lstComponent, dreceiveddate, ChildscreenName: \"Component\",\r\n                        showSaveContinue: true, openChildModal: false, childoperation: \"create\", selectComponent\r\n                        , parentPopUpSize: \"lg\", CurrentTime, timeZoneList, loading: false,\r\n                        openPortal: true, openModal: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\nexport function getTest(objComponent, LoginProps, nneedsubsample, specBasedComponent) {\r\n    return function (dispatch) {\r\n        if (Object.keys(objComponent).length > 0) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/registration/getTestfromDB\", {\r\n                nspecsampletypecode: objComponent.nspecsampletypecode,\r\n                slno: objComponent.slno,\r\n                nneedsubsample: nneedsubsample,\r\n                nallottedspeccode: objComponent.nallottedspeccode,\r\n                specBasedComponent: specBasedComponent\r\n\r\n            })\r\n                .then(response => {\r\n                    let TestData = response.data;\r\n                    let Test = LoginProps.Test || [];\r\n                    let componentTest = Test[objComponent.slno] ? Test[objComponent.slno] : [];\r\n                    const TestCombined = filterRecordBasedOnTwoArrays(TestData, componentTest, \"ntestgrouptestcode\");\r\n                    // const lstComponentMap = constructOptionList(TestCombined|| [], \"ntestgrouptestcode\",\r\n                    //\"stestsynonym\", undefined, undefined, true);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            TestCombined, loadTest: true, openChildModal: false,\r\n                            ChildscreenName: \"Test\",\r\n                            screenName: \"Test\",\r\n                            operation: \"create\",\r\n                            childoperation: \"create\",\r\n                            parentPopUpSize: \"lg\", loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                })\r\n        } else {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTCOMPONENTTOADDTEST\" }));\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function addsubSample(masterData, userinfo, columnList,\r\n    selectComponent, childColumnList,\r\n    SubSamplecomboComponents, SubSamplewithoutCombocomponent,\r\n    specBasedComponent, Map, Component, isServiceRequired, SubSamplecomboData) {\r\n    if (isServiceRequired) {\r\n        return function (dispatch) {\r\n            dispatch(initRequest(true));\r\n            const urlArray = []\r\n            const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n            urlArray[0] = timeZoneService;\r\n            const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n                parentcolumnlist: columnList,\r\n                childcolumnlist: childColumnList,\r\n                userinfo\r\n            })\r\n            urlArray[1] = actualService;\r\n            if (specBasedComponent) {\r\n                const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                    ...Map,\r\n                    specBasedComponent: specBasedComponent\r\n                })\r\n                urlArray[2] = ComponentTestBySpec;\r\n            } else {\r\n                Component = Component ? Component : []\r\n                const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    //nneedsubsample: nneedsubsample,\r\n                    // nallottedspeccode: objComponent.nallottedspeccode,\r\n                    specBasedComponent: specBasedComponent\r\n\r\n                })\r\n                urlArray[2] = TestGet;\r\n            }\r\n            Axios.all(urlArray).then(response => {\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userinfo.stimezoneid, value: userinfo.ntimezonecode }\r\n                const newcomboData = parentChildComboLoad(columnList, response[1].data,\r\n                    selectComponent, childColumnList, SubSamplewithoutCombocomponent)\r\n                let TestCombined = [];\r\n                let lstComponent = [];\r\n                if (specBasedComponent) {\r\n                    const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, true);\r\n\r\n                    lstComponent = lstComponentMap.get(\"OptionList\");\r\n\r\n                } else {\r\n                    TestCombined = response[2].data\r\n                }\r\n                const comboData1 = newcomboData.comboData\r\n                const selectedRecord1 = newcomboData.selectedRecord\r\n                SubSamplewithoutCombocomponent.map(componentrow => {\r\n                    if (componentrow.inputtype === \"date\") {\r\n                        if (componentrow.mandatory) {\r\n                            selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? new Date() : \"\";\r\n                        }\r\n                        // if (componentrow.timezone) {\r\n                        //     sampleRegistration[\"jsondata\"][`tz${componentrow.label}`] = selectedRecord[`tz${componentrow.label}`] ?\r\n                        //         { value: selectedRecord[`tz${componentrow.label}`].value, label: selectedRecord[`tz${componentrow.label}`].label } :\r\n                        //         defaulttimezone ? defaulttimezone : -1\r\n                        // }\r\n                    }\r\n\r\n                })\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ChildscreenName: \"SubSample\",\r\n                        screenName: \"SubSample\",\r\n                        showSaveContinue: true,\r\n                        openChildModal: false,\r\n                        childoperation: \"create\",\r\n                        parentPopUpSize: \"lg\",\r\n                        loading: false,\r\n                        lstComponent,\r\n                        openPortal: true,\r\n                        openModal: false,\r\n                        operation: \"create\",\r\n                        loadSubSample: true,\r\n                        selectComponent: selectedRecord1,\r\n                        SubSamplecomboData: comboData1,\r\n                        SubSamplecomboComponents,\r\n                        SubSamplewithoutCombocomponent,\r\n                        TestCombined,\r\n                        parentSubSampleColumnList: columnList,\r\n                        timeZoneList,\r\n                        defaultTimeZone,\r\n                        masterData,\r\n                    }\r\n                });\r\n            })\r\n                .catch(error => {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                })\r\n        }\r\n    } else {\r\n        const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\r\n            selectComponent, childColumnList, SubSamplewithoutCombocomponent)\r\n        return (dispatch) => {\r\n            if (!specBasedComponent) {\r\n                rsapi.post(\"/registration/getTestfromDB\", {\r\n                    nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                    slno: Component ? Object.keys(Component).length + 1 : 1,\r\n                    //nneedsubsample: nneedsubsample,\r\n                    ...Map,\r\n                    // nallottedspeccode: objComponent.nallottedspeccode,\r\n                    specBasedComponent: specBasedComponent\r\n                }).then(response => {\r\n                    const TestCombined = response.data\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ChildscreenName: \"SubSample\",\r\n                            showSaveContinue: true,\r\n                            openChildModal: false,\r\n                            childoperation: \"create\",\r\n                            parentPopUpSize: \"lg\",\r\n                            loading: false,\r\n                            lstComponent: [],\r\n                            openPortal: true,\r\n                            openModal: false,\r\n                            operation: \"create\",\r\n                            loadSubSample: true,\r\n                            selectComponent: newcomboData.selectedRecord,\r\n                            TestCombined: TestCombined\r\n                        }\r\n                    });\r\n                })\r\n            } else {\r\n                // Component = Component ? Component : []\r\n                rsapi.post(\"/registration/getComponentBySpec\", {\r\n                    ...Map,\r\n                    specBasedComponent: specBasedComponent\r\n                }).then(response => {\r\n                    // const lstComponent =  response.data.lstComponent\r\n                    let lstComponent =response.data.lstComponent //filterRecordBasedOnTwoArrays(response.data.lstComponent, Component, \"ncomponentcode\")\r\n                    const lstComponentMap = constructOptionList(lstComponent || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, true);\r\n\r\n                    lstComponent = lstComponentMap.get(\"OptionList\");\r\n\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            ChildscreenName: \"SubSample\",\r\n                            showSaveContinue: true,\r\n                            openChildModal: false,\r\n                            childoperation: \"create\",\r\n                            parentPopUpSize: \"lg\",\r\n                            loading: false,\r\n                            lstComponent,\r\n                            openPortal: true,\r\n                            openModal: false,\r\n                            operation: \"create\",\r\n                            loadSubSample: true,\r\n                            selectComponent: newcomboData.selectedRecord,\r\n                            TestCombined: [],\r\n                            selectedTestData: []\r\n                        }\r\n                    });\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport function componentTest(selectedobject, Reg, specBasedComponent, Component) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        Component = Component ? Component : []\r\n        rsapi.post(\"/registration/getTestfromDB\", {\r\n            nspecsampletypecode: selectedobject.nspecsampletypecode,\r\n            slno: Component ? Object.keys(Component).length + 1 : 1,\r\n            specBasedComponent: specBasedComponent\r\n\r\n        })\r\n            .then(response => {\r\n                let TestData = response.data;\r\n                //let Test = [];\r\n                // Test[selectedobject.slno] = TestData;\r\n                const Map = {}\r\n                if (Reg) {\r\n                    Map[\"selectedRecord\"] = selectedobject\r\n                } else {\r\n                    Map[\"selectComponent\"] = selectedobject\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        TestCombined: TestData, ...Map, loading: false, selectedTestData: []\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function addSubSampleSaveContinue(Map1, Map,\r\n    specBasedComponent, Component, selectedTestData, lstComponent) {\r\n\r\n    //  const newcomboData = parentChildComboLoad(columnList, SubSamplecomboData,\r\n    //     selectComponent, childColumnList, SubSamplewithoutCombocomponent)\r\n    return (dispatch) => {\r\n        if (!specBasedComponent) {\r\n            rsapi.post(\"/registration/getTestfromDB\", {\r\n                nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                nspecsampletypecode: Map[\"nspecsampletypecode\"],\r\n                slno: Map1.Component ? Object.keys(Map1.Component).length + 1 : 1,\r\n                specBasedComponent: specBasedComponent\r\n            }).then(response => {\r\n                let TestCombined = response.data\r\n\r\n                const selectedTestData1 = TestCombined.filter(function (x) {\r\n                    return selectedTestData.some(function (y) {\r\n                        return x[\"ntestgrouptestcode\"] === y.value\r\n                    })\r\n                });\r\n                // const selectedTestData2 = []\r\n                // TestCombined.map(x=>{\r\n                //     selectedTestData1.map(y=>{\r\n                //         if(x[\"ntestgrouptestcode\"] !== y[\"ntestgrouptestcode\"]){\r\n                //             selectedTestData2.push(x)\r\n                //         } \r\n                //     })\r\n                // });\r\n                \r\n                \r\n              //  let filterArray = filterRecordBasedOnTwoArrays(selectedTestData1, TestCombined, \"ntestgrouptestcode\")\r\n              // const filterArray = [...selectedTestData1, ...TestCombined]\r\n                \r\n                selectedTestData = constructOptionList(selectedTestData1, \"ntestgrouptestcode\", \"stestsynonym\")\r\n                selectedTestData[\"ntestgrouptestcode\"]= selectedTestData.get(\"OptionList\")\r\n              \r\n     \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ...Map1,\r\n                        loading: false,\r\n                        TestCombined,\r\n                        selectedTestData\r\n                    }\r\n                });\r\n            })\r\n        }\r\n        else {\r\n           // lstComponent = lstComponent.filter(x => x.item.nspecsampletypecode !== Map1.selectComponent[\"nspecsampletypecode\"])\r\n            Map1.selectComponent[\"ncomponentcode\"] = {};\r\n            Map1.selectComponent[\"Sample Name\"] = \"\";\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    ...Map1,\r\n                    loading: false,\r\n                    TestCombined: [],\r\n                    selectedTestData: [],\r\n                    lstComponent\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nexport function editSubSample(Map,\r\n    component, userInfo, specBasedComponent) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let urlArray = []\r\n        let Componnet = {}\r\n        if (specBasedComponent) {\r\n            Componnet = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                ...Map\r\n            });\r\n        }\r\n        urlArray = [Componnet]\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let comp = []\r\n                if (specBasedComponent) {\r\n                    comp = response[0].data.lstComponent\r\n                }\r\n                const lstComponentMap = constructOptionList(comp || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n                const lstComponent = lstComponentMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loadSubSample: true, childoperation: \"update\",\r\n                        ChildscreenName: \"SubSample\",\r\n                        openChildModal: false, selectComponent: component,\r\n                        parentPopUpSize: \"lg\", loading: false, lstComponent\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n}\r\n\r\nexport function insertRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/createRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\r\n                let selectedSample = response.data[\"selectedSample\"];\r\n                let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                let selectedSubSample = RegistrationGetSubSample;\r\n                RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n                if (inputParam.inputData.nneedsubsample) {\r\n                    RegistrationGetSubSample = sortData(response.data[\"RegistrationGetSubSample\"], 'npreregno', 'desc')\r\n                    selectedSubSample = RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                    RegistrationGetTest = RegistrationGetTest.filter(x => x.ntransactionsamplecode === selectedSubSample[0].ntransactionsamplecode)\r\n                    selectedTest = RegistrationGetTest.length > 0 ? response.data[\"selectedTest\"] : [];\r\n                }\r\n                // RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\")\r\n                if (inputParam.multipleselectionFlag) {\r\n                    selectedSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.selectedSample);\r\n                    updatedObjectWithNewElement(response.data[\"selectedSubSample\"], masterData.RegistrationGetSubSample);\r\n                    updatedObjectWithNewElement(response.data[\"selectedTest\"], masterData.RegistrationGetTest);\r\n                    RegistrationGetSubSample = masterData.RegistrationGetSubSample;\r\n                    RegistrationGetTest = masterData.RegistrationGetTest;\r\n                }\r\n\r\n\r\n                masterData = {\r\n                    ...masterData, ...response.data,\r\n                    selectedSample, selectedSubSample, selectedTest,\r\n                    RegistrationGetSubSample, RegistrationGetTest, RegistrationGetSample\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    showConfirmAlert: false,\r\n                    selectedRecord: undefined,\r\n                    loading: false,\r\n                    loadPreregister: false,\r\n                    showSample: undefined,\r\n                    openPortal: false,\r\n                    selectedSpec: {},\r\n                    selectComponent: {},\r\n                    SelectedTest: {},\r\n                    selectedComponent: {},\r\n                    Component: [],\r\n                    selectedRecord: {},\r\n                    SelectedTest: [],\r\n                    Test: [],\r\n                    selectedComponent: {},\r\n                    subSampleDataGridList:[]\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'yes'\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function getRegistrationSample(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"registration/getRegistrationByFilterSubmit\", { ...inputData.inputData })\r\n            .then(response => {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    ...response.data\r\n                }\r\n                if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                    inputData.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                    inputData.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                    inputData.searchTestRef.current.value = \"\"\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                let respObject = {};\r\n                if (inputData.selectedFilter) {\r\n                    respObject = { selectedFilter: { ...inputData.selectedFilter } };\r\n                }\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        testskip: 0,\r\n                        take: undefined,\r\n                        testtake: undefined,\r\n                        subsampleskip: 0,\r\n                        subsampletake: undefined,\r\n                        showSample: undefined,\r\n                        ...respObject,\r\n                        activeSampleTab: inputData.inputData.activeSampleTab\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRegistrationsubSampleDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntransactionstatus: inputData.ntransactionstatus,\r\n            napprovalconfigcode: inputData.napprovalconfigcode,\r\n            activeTestTab: inputData.activeTestTab,\r\n            activeSampleTab: inputData.activeSampleTab,\r\n            userinfo: inputData.userinfo,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            nneedsubsample: inputData.nneedsubsample,\r\n            checkBoxOperation: inputData.nneedsubsample === true ?\r\n                inputData.checkBoxOperation === 5 ? 3 : inputData.checkBoxOperation : inputData.checkBoxOperation\r\n        }\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        const subSample = inputData.nneedsubsample\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(\"registration/getRegistrationSubSample\", inputParamData)\r\n                .then(response => {\r\n                    sortData(response.data,\"descending\",\"npreregno\");\r\n                    let masterData = {}\r\n                    let skipInfo = {}\r\n                    let oldSelectedTest = inputData.masterData.selectedTest || []\r\n                    if (subSample) {\r\n                        let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n                        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                            inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\",\r\n                            inputData.removeElementFromArray);\r\n                        masterData = {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample,\r\n                            selectedPreregno: inputData.npreregno,\r\n                            selectedSubSample: inputData.masterData.RegistrationGetSubSample.length > 0 ?\r\n                                [inputData.masterData.RegistrationGetSubSample[0]] : [],\r\n                        }\r\n                        let RegistrationTestComment = [];\r\n                        let RegistrationTestAttachment = [];\r\n                        let RegistrationParameter = [];\r\n                        //if (inputData.checkBoxOperation === 1 || inputData.checkBoxOperation === 7) {  \r\n                            if (inputData.checkBoxOperation === 1) {\r\n\r\n                            const wholeSubSampleList = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                            oldSelectedSubSample.forEach((subsample, index) => {\r\n                                if (!wholeSubSampleList.includes(subsample.ntransactionsamplecode)) {\r\n                                    oldSelectedSubSample.splice(index, 1)\r\n                                }\r\n\r\n                            })\r\n                            if (oldSelectedSubSample.length > 0) {\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedSubSample: oldSelectedSubSample\r\n                                }\r\n                            }\r\n                            const selectedTest = getSameRecordFromTwoArrays(oldSelectedTest,\r\n                                masterData.selectedSubSample, 'npreregno')\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest\r\n                            }\r\n                        }\r\n                        if(inputData.checkBoxOperation === 7 )\r\n                        {\r\n                            // masterData = {\r\n                            //     ...masterData,\r\n                            //     APSelectedTest:responseData.APSelectedTest,\r\n                            //     AP_TEST:responseData.AP_TEST,\r\n                            //     ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\r\n                            // }\r\n\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                    let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                            masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                        }\r\n                        if (inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 5) {\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest: masterData.RegistrationGetTest.length > 0 ? [masterData.RegistrationGetTest[0]] : []\r\n                            }\r\n\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                    let ntransactiontestcode1 = masterData.selectedTest.length > 0 ? masterData.selectedTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                            masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                            masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                        }\r\n\r\n\r\n                        let { testskip, testtake, subsampleskip, subsampletake } = inputData\r\n                        let bool = false;\r\n\r\n                        if (inputData.masterData.RegistrationGetSubSample.length < inputData.subsampleskip) {\r\n                            testskip = 0;\r\n                            subsampleskip = 0;\r\n                            bool = true\r\n                        }\r\n                        if (bool) {\r\n                            skipInfo = { testskip, testtake, subsampleskip, subsampletake }\r\n                        }\r\n                    } else {\r\n\r\n                        //let oldSelectedTest = inputData.masterData.selectedTest\r\n                        //  let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n                        fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                            inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\",\r\n                            inputData.removeElementFromArray);\r\n                        masterData = {\r\n                            ...inputData.masterData,\r\n                            selectedSample: inputData.selectedSample,\r\n                            selectedPreregno: inputData.npreregno,\r\n                            selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                            selectedSubSample: inputData.masterData.RegistrationGetSubSample,\r\n                        }\r\n                        let RegistrationTestComment = [];\r\n                        let RegistrationParameter = [];\r\n                        let RegistrationTestAttachment = [];\r\n\r\n                        if (inputData.checkBoxOperation === 7 || inputData.checkBoxOperation === 1) {\r\n                            const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                            oldSelectedTest.forEach((test, index) => {\r\n                                if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                    oldSelectedTest.splice(index, 1)\r\n                                }\r\n\r\n                            })\r\n\r\n                            let keepOld = false;\r\n                            let ntransactiontestcode;\r\n                            if (oldSelectedTest.length > 0) {\r\n                                keepOld = true\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedTest: oldSelectedTest,\r\n                                }\r\n                            } else {\r\n                                ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                    inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\"\r\n                            }\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                        inputData.masterData.RegistrationParameter : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ?\r\n                                            inputData.masterData.RegistrationTestAttachment : [] :\r\n                                            getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                                        inputData.masterData.RegistrationTestComment : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                default:\r\n                                    RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                        inputData.masterData.RegistrationParameter : [] :\r\n                                        getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                        }\r\n                        else if (inputData.checkBoxOperation === 5) {\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                        let RegistrationTestAttachment1 = [];\r\n                                        if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                            RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                        }\r\n                                        let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                        RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                    let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                    let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                default:\r\n                                    let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                    let RegistrationTestComment2 = [];\r\n                                    if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                        RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                    }\r\n                                    let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                            // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                        }\r\n                        else {\r\n                            switch (inputData.activeTestTab) {\r\n                                case \"IDS_TESTCOMMENTS\":\r\n                                    RegistrationTestComment = response.data.RegistrationTestComment ?\r\n                                        [...response.data.RegistrationTestComment] : [];\r\n                                    activeName = \"RegistrationTestComment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                    break;\r\n                                case \"IDS_TESTATTACHMENTS\":\r\n                                    {\r\n                                        RegistrationTestAttachment = response.data.RegistrationTestAttachment ?\r\n                                            [...response.data.RegistrationTestAttachment] : [];\r\n                                        activeName = \"RegistrationTestAttachment\"\r\n                                        dataStateName = \"testCommentDataState\"\r\n\r\n                                    }\r\n                                    break;\r\n                                case \"IDS_PARAMETERRESULTS\":\r\n                                    RegistrationParameter = response.data.RegistrationParameter ?\r\n                                        [...response.data.RegistrationParameter] : [];\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                                default:\r\n                                    RegistrationParameter = response.data.RegistrationParameter ?\r\n                                        [...response.data.RegistrationParameter] : [];\r\n                                    activeName = \"RegistrationParameter\"\r\n                                    dataStateName = \"resultDataState\"\r\n                                    break;\r\n                            }\r\n                        }\r\n                        masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                        masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                        masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                        let { testskip, testtake } = inputData\r\n                        let bool = false;\r\n\r\n                        if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\r\n                            testskip = 0;\r\n                            bool = true\r\n                        }\r\n                        if (bool) {\r\n                            skipInfo = { testskip, testtake }\r\n                        }\r\n\r\n                    }\r\n                    if (inputData.masterData.selectedSample && inputData.sampleGridDataState\r\n                        && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                    if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                        inputData.searchSubSampleRef.current.value = \"\"\r\n                        masterData['searchedSubSample'] = undefined\r\n                    }\r\n                    let inputParam = { attachmentskip: undefined }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeSampleTab: inputData.activeSampleTab,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            skip: undefined,\r\n                            take: undefined,\r\n                            ...skipInfo,\r\n                            inputParam\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n\r\n            let bool = false;\r\n            let skipInfo = {};\r\n            let { testskip, testtake, subsampletake, subsampleskip } = inputData;\r\n            let oldSelectedTest = inputData.masterData.selectedTest\r\n            let oldSelectedSubSample = inputData.masterData.selectedSubSample\r\n           // let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            let isGrandChildGetRequired = false;\r\n            let TestSelected = [];\r\n            let subSampleSelected = [];\r\n\r\n\r\n            if(inputData[\"statusNone\"])\r\n            {\r\n             TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n             subSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n            else\r\n            {\r\n                TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let selectedSample = inputData.selectedSample;\r\n                let filterTestSameOldSelectedTest = getSameRecordFromTwoArrays(oldSelectedTest, inputData.masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                let selectedTest = filterTestSameOldSelectedTest.length > 0 ? filterTestSameOldSelectedTest :\r\n                    inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [];\r\n                let ntransactiontestcode = selectedTest.length > 0 ? selectedTest.map(x => x.ntransactiontestcode).join(\",\") : \"-1\";\r\n                let selectedSubSample = inputData.masterData.RegistrationGetSubSample\r\n\r\n                if (subSample) {\r\n                    let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                    selectedSubSample = filterSelectedSubSample.length > 0 ? filterSelectedSubSample : [inputData.masterData.RegistrationGetSubSample[0]];\r\n                    if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampletake, subsampleskip }\r\n                    }\r\n\r\n                }\r\n                let masterData = { ...inputData.masterData, selectedSample, selectedSubSample, selectedTest }\r\n                if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = { ...skipInfo, testskip, testtake }\r\n                }\r\n                inputData = {\r\n                    ...inputData, childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\r\n                    selectedSubSample, checkBoxOperation: 3, skipInfo,masterData\r\n                }\r\n                if (subSample) {\r\n                    if (selectedTest.length === 0) {\r\n                        inputData[\"npreregno\"] = selectedSubSample.map(x => x.npreregno).join(\",\")\r\n                        inputData[\"ntransactionsamplecode\"] = selectedSubSample.map(x => x.ntransactionsamplecode).join(\",\")\r\n                        inputData[\"checkBoxOperation\"] = 3\r\n                        inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"]\r\n                        dispatch(getRegistrationTestDetail(inputData, true));\r\n                    } else {\r\n                        dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n                    }\r\n                } else {\r\n                    dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n                }\r\n            } else {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    selectedSample: inputData.selectedSample,\r\n                    selectedPreregno: inputData.npreregno,\r\n                    selectedTest: TestSelected ? TestSelected : inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                    // RegistrationTestComment,\r\n                    selectedSubSample:  subSampleSelected ? subSampleSelected : inputData.masterData.RegistrationGetSubSample\r\n                }\r\n                let subsamplecheck = true;\r\n                if (subSample) {\r\n                    let SubSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                    if (SubSampleSelected.length > 0) {\r\n                        let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                        if (filterSelectedSubSample.length === 0) {\r\n                            let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                            oldSelectedSubSample.forEach((test, index) => {\r\n                                if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                                    oldSelectedSubSample.splice(index, 1)\r\n                                }\r\n                                return null;\r\n                            })\r\n                            if (oldSelectedSubSample.length === 0 && wholeSubSample.length > 0\r\n                                && masterData.selectedTest.length === 0) {\r\n                                const selectedSubSample1 = [inputData.masterData.RegistrationGetSubSample[0]];\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    selectedSubSample: selectedSubSample1,\r\n                                    selectedTest: []\r\n                                }\r\n                                inputData = { ...inputData, ...masterData }\r\n                                inputData[\"npreregno\"] = selectedSubSample1.map(x => x.npreregno).join(\",\")\r\n                                inputData[\"ntransactionsamplecode\"] = selectedSubSample1.map(x => x.ntransactionsamplecode).join(\",\")\r\n                                inputData[\"checkBoxOperation\"] = 3\r\n                                inputData[\"childTabsKey\"] = [\"RegistrationGetTest\"]\r\n                                subsamplecheck = false;\r\n                                dispatch(getRegistrationTestDetail(inputData, true));\r\n\r\n                            }\r\n                        } else {\r\n                            oldSelectedSubSample = filterSelectedSubSample\r\n                        }\r\n\r\n                    } else {\r\n                        let wholeSubSample = masterData.RegistrationGetSubSample.map(b => b.ntransactionsamplecode)\r\n                        oldSelectedSubSample.forEach((test, index) => {\r\n                            if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                                oldSelectedSubSample.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                    }\r\n\r\n                    if (subsamplecheck) {\r\n                        masterData = {\r\n                            ...masterData,\r\n                            selectedSubSample: oldSelectedSubSample\r\n                        }\r\n                    }\r\n                    if (inputData.masterData.RegistrationGetSubSample.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampleskip, subsampletake }\r\n                    }\r\n                }\r\n                let wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                oldSelectedTest.forEach((test, index) => {\r\n                    if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        oldSelectedTest.splice(index, 1)\r\n                    }\r\n                    return null;\r\n                })\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedTest: oldSelectedTest\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\"\r\n                }\r\n                masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                let skipInfo = {};\r\n                if (inputData.masterData.RegistrationGetTest.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = { ...skipInfo, testskip, testtake }\r\n                }\r\n\r\n                let dataStateArray = [\r\n                    { activeName: 'selectedSample', dataStateName: 'sampleGridDataState' },\r\n                    { activeName: 'RegistrationSourceCountry', dataStateName: 'sourceDataState' },\r\n                    { activeName: 'RegistrationTestComment', dataStateName: 'testCommentDataState' },\r\n                    { activeName: 'RegistrationParameter', dataStateName: 'resultDataState' },\r\n                ]\r\n                dataStateArray.map(arr => {\r\n                    if (inputData[arr.dataStateName] && masterData[arr.activeName] &&\r\n                        masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    return null;\r\n                });\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestTab: inputData.activeTestTab,\r\n                        ...skipInfo\r\n                    }\r\n                })\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nexport function getRegistrationTestDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n            ntransactionstatus: inputData.ntransactionstatus,\r\n            napprovalconfigcode: inputData.napprovalconfigcode,\r\n            activeTestTab: inputData.activeTestTab,\r\n            activeSampleTab: inputData.activeSampleTab,\r\n            userinfo: inputData.userinfo,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            checkBoxOperation: inputData.checkBoxOperation\r\n        }\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(\"registration/getRegistrationTest\", inputParamData)\r\n                .then(response => {\r\n                    sortData(response.data);\r\n                    let oldSelectedTest = inputData.masterData.selectedTest || []\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data,\r\n                        inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\",\r\n                        inputData.removeElementFromArray);\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        selectedSubSample: inputData.selectedSubSample,\r\n                        selectedTransactionsamplecode: inputData.ntransactionsamplecode,\r\n                        selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                            [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                        // RegistrationTestComment,\r\n                    }\r\n                    //let wholeRegistrationTestComments = [];\r\n                    let RegistrationTestComment = [];\r\n                    let RegistrationTestAttachment = [];\r\n                    let RegistrationParameter = [];\r\n                    if (inputData.checkBoxOperation === 1) {\r\n                        const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                        oldSelectedTest.forEach((test, index) => {\r\n                            if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                oldSelectedTest.splice(index, 1)\r\n                            }\r\n\r\n                        })\r\n\r\n                        let keepOld = false;\r\n                        let ntransactiontestcode;\r\n                        if (oldSelectedTest.length > 0) {\r\n                            keepOld = true\r\n                            masterData = {\r\n                                ...masterData,\r\n                                selectedTest: oldSelectedTest,\r\n                            }\r\n                        } else {\r\n                            ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                                inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"\"\r\n                        }\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                    inputData.masterData.RegistrationParameter : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                                    inputData.masterData.RegistrationTestComment : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment ?\r\n                                    inputData.masterData.RegistrationTestAttachment : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationParameter = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                                    inputData.masterData.RegistrationParameter : [] :\r\n                                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n\r\n\r\n\r\n                    }\r\n                    else if (inputData.checkBoxOperation === 5) {\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment1 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                }\r\n                                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                {\r\n                                    let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                    let RegistrationTestAttachment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                        RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestAttachment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                }\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                                let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                let ntransactiontestcode1 = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment2 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                }\r\n                                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                        // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                    }\r\n                    else if (inputData.checkBoxOperation === 7) {\r\n                        let testList = reArrangeArrays( inputData.masterData.RegistrationGetSubSample, response.data.RegistrationGetTest, \"ntransactionsamplecode\");\r\n                        masterData = {\r\n                            ...masterData,\r\n                            selectedTest: testList ? testList.length > 0 ?[testList[0]] :[]:[],\r\n                            RegistrationGetTest: testList ? testList.length > 0 ? testList :[]:[],\r\n                            //ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\r\n                        }\r\n\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                let ResponseData = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment1 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment1 = [...inputData.masterData.RegistrationTestComment, ...ResponseData];\r\n                                }\r\n                                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                {\r\n                                    let ResponseData = response.data.RegistrationTestAttachment ? response.data.RegistrationTestAttachment : [];\r\n                                    let RegistrationTestAttachment1 = [];\r\n                                    if (inputData.masterData.RegistrationTestAttachment !== undefined) {\r\n                                        RegistrationTestAttachment1 = [...inputData.masterData.RegistrationTestAttachment, ...ResponseData];\r\n                                    }\r\n                                    let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                    RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(RegistrationTestAttachment1, ntransactiontestcode, \"ntransactiontestcode\");\r\n                                    activeName = \"RegistrationTestAttachment\"\r\n                                    dataStateName = \"testCommentDataState\"\r\n                                }\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                let resultResponseData = response.data.RegistrationParameter ? response.data.RegistrationParameter : [];\r\n                               // let RegistrationParameter1 = [...inputData.masterData.RegistrationParameter, ...resultResponseData];\r\n                                 let RegistrationParameter1 = [...resultResponseData];\r\n                                let ntransactiontestcode1 = testList ? testList.length > 0 ? testList[0].ntransactiontestcode : inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1 : -1\r\n                               \r\n                                RegistrationParameter = getRecordBasedOnPrimaryKeyName(RegistrationParameter1, ntransactiontestcode1, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                let ResponseData1 = response.data.RegistrationTestComment ? response.data.RegistrationTestComment : [];\r\n                                let RegistrationTestComment2 = [];\r\n                                if (inputData.masterData.RegistrationTestComment !== undefined) {\r\n                                    RegistrationTestComment2 = [...inputData.masterData.RegistrationTestComment, ...ResponseData1];\r\n                                }\r\n                                let ntransactionTestCode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : -1\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(RegistrationTestComment2, ntransactionTestCode, \"ntransactiontestcode\");\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                        // RegistrationTestComment = response.data.RegistrationTestComment ? [...response.data.RegistrationTestComment] : [];\r\n                    }\r\n                    else {\r\n                        switch (inputData.activeTestTab) {\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = response.data.RegistrationTestComment ?\r\n                                    [...response.data.RegistrationTestComment] : [];\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = response.data.RegistrationTestAttachment ?\r\n                                    [...response.data.RegistrationTestAttachment] : [];\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_PARAMETERRESULTS\":\r\n                                RegistrationParameter = response.data.RegistrationParameter ?\r\n                                    [...response.data.RegistrationParameter] : [];\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationParameter = response.data.RegistrationParameter ?\r\n                                    [...response.data.RegistrationParameter] : [];\r\n                                activeName = \"RegistrationParameter\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    masterData['RegistrationTestComment'] = RegistrationTestComment;\r\n                    masterData['RegistrationTestAttachment'] = RegistrationTestAttachment;\r\n                    masterData[\"RegistrationParameter\"] = RegistrationParameter;\r\n                    let { testskip, testtake } = inputData\r\n                    let bool = false;\r\n                    let skipInfo = {}\r\n                    if (inputData.masterData.RegistrationGetTest.length < inputData.testskip) {\r\n                        testskip = 0;\r\n                        bool = true\r\n                    }\r\n\r\n                    if (bool) {\r\n                        skipInfo = { testskip, testtake }\r\n                    }\r\n                    if (inputData.masterData.selectedSample && inputData.sampleGridDataState\r\n                        && inputData.masterData.selectedSample.length <= inputData.sampleGridDataState.skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            sampleGridDataState: {\r\n                                ...inputData.sampleGridDataState,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                    let inputParam = { attachmentskip: undefined }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeSampleTab: inputData.activeSampleTab,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            skip: undefined,\r\n                            take: undefined,\r\n                            ...skipInfo,\r\n                            inputParam\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            let oldSelectedTest = inputData.masterData.selectedTest\r\n            let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.selectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            let isGrandChildGetRequired = false;\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = true;\r\n            } else {\r\n                isGrandChildGetRequired = false;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ? inputData.masterData.RegistrationGetTest[0].ntransactiontestcode.toString() : \"-1\";\r\n                let selectedSubSample = inputData.selectedSubSample;\r\n                // let selectedPreregno = inputData.npreregno;\r\n                let selectedTest = inputData.masterData.RegistrationGetTest.length > 0 ? [inputData.masterData.RegistrationGetTest[0]] : [];\r\n                // let selectedSubSample = inputData.masterData.RegistrationGetSubSample\r\n                let masterData = { ...inputData.masterData, selectedSubSample, selectedTest }\r\n                inputData = {\r\n                    ...inputData, childTabsKey: [\"RegistrationTestComment\", \"RegistrationParameter\"], ntransactiontestcode, masterData, selectedTest,\r\n                    selectedSubSample, checkBoxOperation: 3\r\n                }\r\n                dispatch(getTestChildTabDetailRegistration(inputData, true));\r\n            } else {\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    selectedSubSample: inputData.selectedSubSample,\r\n                    selectedTransactioncode: inputData.ntransactionsamplecode,\r\n                    selectedTest: inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                        [inputData.masterData.RegistrationGetTest[0]] : [],\r\n                }\r\n\r\n                const wholeTestList = masterData.RegistrationGetTest.map(b => b.ntransactiontestcode)\r\n                oldSelectedTest.forEach((test, index) => {\r\n                    if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        oldSelectedTest.splice(index, 1)\r\n                    }\r\n                    return null;\r\n                })\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedTest: oldSelectedTest,\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = inputData.masterData.RegistrationGetTest.length > 0 ?\r\n                        inputData.masterData.RegistrationGetTest[0].ntransactiontestcode : \"-1\"\r\n                }\r\n                masterData[\"RegistrationTestComment\"] = keepOld ? inputData.masterData.RegistrationTestComment ?\r\n                    inputData.masterData.RegistrationTestComment : [] :\r\n                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                masterData[\"RegistrationParameter\"] = keepOld ? inputData.masterData.RegistrationParameter ?\r\n                    inputData.masterData.RegistrationParameter : [] :\r\n                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationParameter, ntransactiontestcode, \"ntransactiontestcode\")\r\n                let skipInfo = {};\r\n                let dataStateArray = [\r\n                    { activeName: 'selectedSample', dataStateName: 'sampleGridDataState' },\r\n                    { activeName: 'RegistrationSourceCountry', dataStateName: 'sourceDataState' },\r\n                    { activeName: 'RegistrationTestComment', dataStateName: 'testCommentDataState' },\r\n                    { activeName: 'RegistrationParameter', dataStateName: 'resultDataState' },\r\n                ]\r\n                dataStateArray.map(arr => {\r\n                    if (inputData[arr.dataStateName] && masterData[arr.activeName] &&\r\n                        masterData[arr.activeName].length <= inputData[arr.dataStateName].skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [arr.dataStateName]: {\r\n                                ...inputData[arr.dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    return null;\r\n                });\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestTab: inputData.activeTestTab,\r\n                        ...skipInfo\r\n                    }\r\n                })\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\nexport function acceptRegistration(inputParam, LoginProps) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/acceptRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data.rtn === undefined || response.data.rtn === \"Success\"\r\n                    || response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"\r\n                    || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\" || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                    replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                    delete response.data[\"RegistrationGetSample\"];\r\n                    delete response.data[\"RegistrationGetSubSample\"];\r\n                    delete response.data[\"RegistrationGetTest\"];\r\n                    let masterData = {\r\n                        ...LoginProps, ...response.data,\r\n                        selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                        selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                        selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                    }\r\n                    let respObject = {\r\n                        masterData,\r\n                        ...inputParam.inputData,\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        openModal: false,\r\n                        showSample: undefined\r\n                    }\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                    if (response.data.rtn === \"IDS_ATLEASTONETESTMUSTBEPREREGISTER\"\r\n                        || response.data.rtn === \"IDS_ALLSAMPLESAREREGISTERED\" || response.data.rtn === \"IDS_SELECTPREREGISTERORQUARANTINESAMPLES\") {\r\n                        toast.warn(intl.formatMessage({ id: response.data.rtn }));\r\n                    }\r\n                } else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            loadEsign: false,\r\n                            openModal: false\r\n                        }\r\n                    });\r\n                    toast.warn(response.data.rtn);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n            })\r\n    }\r\n}\r\n\r\nexport const addMoreTest = (inputParam, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        let { sampleList } = inputParam;\r\n        let value = false;\r\n        if (inputParam.selectedSubSample && inputParam.selectedSubSample.length > 0) {\r\n            value = inputParam.selectedSubSample.some(obj => obj.nspecsampletypecode !== inputParam.selectedSubSample[0].nspecsampletypecode)\r\n            if (value) {\r\n                return toast.warn(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\" }));\r\n            }\r\n            sampleList = sampleList ? [...sampleList.slice(inputParam.skip, inputParam.take)] : [];\r\n            const selectedsample = getSameRecordFromTwoArrays(sampleList, inputParam.selectedSample, \"npreregno\");\r\n           // const selectsubsample = getSameRecordFromTwoArrays(sampleList, inputParam.selectedsubsample, \"npreregno\");\r\n            if (selectedsample && selectedsample.length > 0) {\r\n                const findTransactionStatus = [...new Set(selectedsample.map(item => item.ntransactionstatus))];\r\n\r\n                if (findTransactionStatus.length === 1) {\r\n                    if (findTransactionStatus[0] !== transactionStatus.REJECT && findTransactionStatus[0] !== transactionStatus.CANCELLED) {\r\n                        if (findTransactionStatus[0] !== transactionStatus.CERTIFIED && findTransactionStatus[0] !== transactionStatus.SENT) {\r\n                            const findApprovalVersion = [...new Set(selectedsample.map(item => item.napprovalversioncode))];\r\n                            if (findApprovalVersion.length === 1) {\r\n                                const findSampleSpec = [...new Set(selectedsample.map(item => item.nallottedspeccode))];\r\n                                //const findComponent = [...new Set(selectsubsample.map(item => item.ncomponentcode))];\r\n                                if (findSampleSpec.length === 1)//&& findComponent.length === 1 \r\n                                {\r\n                                    inputParam[\"snspecsampletypecode\"]= inputParam.selectedSubSample &&\r\n                                    [...new Set(inputParam.selectedSubSample.map(x => x.nspecsampletypecode))].join(\",\")\r\n                                    dispatch(initRequest(true));\r\n                                    rsapi.post(\"/registration/getMoreTest\", { ...inputParam })\r\n                                        .then(response => {\r\n                                            dispatch({\r\n                                                type: DEFAULT_RETURN,\r\n                                                payload: {\r\n                                                    availableTest: response.data,\r\n                                                    loadChildTest: true,\r\n                                                    loading: false, ncontrolCode,\r\n                                                    screenName: \"IDS_TEST\",\r\n                                                    operation: \"create\",\r\n                                                    openModal: true,\r\n                                                    parentPopUpSize: \"lg\",\r\n                                                    selectedRecord: {},\r\n                                                    showSample: undefined\r\n                                                }\r\n                                            });\r\n                                        })\r\n                                        .catch(error => {\r\n                                            dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                                            if (error.response.status === 500) {\r\n                                                toast.error(error.message);\r\n                                            } else {\r\n                                                toast.warn(this.props.formatMessage({ id: error.response.data }));\r\n                                            }\r\n                                        });\r\n                                } else {\r\n                                    toast.warn(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESPECANDCOMPONENT\" }));\r\n                                }\r\n                            } else {\r\n                                toast.warn(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMEAPPROVALCONFIG\" }));\r\n                            }\r\n                        }\r\n                        else {\r\n                            toast.warn(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORCERTIFIEDSAMPLES\" }));\r\n                        }\r\n                    }\r\n                    else {\r\n                        ////     toast.warn(intl.formatMessage({ id: \"IDS_TESTCANNOTBEFORCANCELLEDREJECTSAMPLES\" }));\r\n                        toast.warn(intl.formatMessage({ id: \"IDS_SAMPLEISREJECTEDORCANCELLED\" }));\r\n                    }\r\n                } else {\r\n                    toast.warn(intl.formatMessage({ id: \"IDS_PLEASESELECTSAMPLEWITHSAMESTATUS\" }));\r\n                }\r\n            } else {\r\n                toast.warn(intl.formatMessage({ id: \"IDS_SELECTSAMPLE\" }));\r\n            }\r\n        } else {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTSUBSAMPLE\" }));\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport const createRegistrationTest = (inputParam, masterData, modalName) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData })\r\n            .then(response => {\r\n                let RegistrationGetTest = updatedObjectWithNewElement(masterData[\"RegistrationGetTest\"], response.data[\"RegistrationGetTest\"]);\r\n                masterData = {\r\n                    ...masterData,\r\n                    RegistrationGetTest,\r\n                    selectedTest: response.data[\"RegistrationGetTest\"],\r\n                    RegistrationParameter: response.data.RegistrationParameter,\r\n                    // RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, masterData.RegistrationGetSample, 'npreregno')\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    [modalName]: false,\r\n                    loading: false,\r\n                    loadChildTest: false,\r\n                    showSample: undefined,\r\n                    openModal: false,\r\n                    selectedRecord: {}\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'yes'\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n\r\n                // dispatch({\r\n                //     type: DEFAULT_RETURN,\r\n                //     payload: {\r\n                //         masterData,\r\n                //         [modalName]: false,\r\n                //         loading: false,\r\n                //         loadChildTest: false,\r\n                //         showSample: undefined,\r\n                //         openModal: false,\r\n                //         selectedRecord: {}\r\n                //     }\r\n                // });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getEditRegistrationComboService(inputParam, columnList, \r\n    selectedRecord1, childColumnList, comboComponents,\r\n    withoutCombocomponent) {\r\n    return function (dispatch) {\r\n\r\n        dispatch(initRequest(true));\r\n        const { userInfo, operation } = { ...inputParam };\r\n\r\n        const npreregno = inputParam.mastertoedit[inputParam.primaryKeyName];\r\n        let urlArray = [];\r\n\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n            parentcolumnlist: columnList,\r\n            childcolumnlist: childColumnList,\r\n            userinfo: userInfo\r\n        })\r\n        const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationDetails\", { ...inputParam.editRegParam, npreregno })\r\n\r\n        urlArray = [timeZoneService, actualService, selectedRegistration]\r\n\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = { ...response[2].data[\"SelectedRegistration\"][0] };\r\n                selectedRecord = { ...selectedRecord, ...selectedRecord['jsondata'] }\r\n                // const recordToEdit = { ...response[2].data[\"SelectedRegistration\"][0] };\r\n                //  const currentTime = rearrangeDateFormat(userInfo, response[6].data);\r\n\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userInfo.stimezoneid, value: userInfo.ntimezonecode }\r\n                //  const newcomboData = parentChildComboLoad(columnList, response[1].data,\r\n                // selectedRecord, childColumnList, withoutCombocomponent)\r\n\r\n                if (selectedRecord.ntransactionstatus === transactionStatus.CANCELLED\r\n                    || selectedRecord.ntransactionstatus === transactionStatus.REJECT) {\r\n                    toast.warn(intl.formatMessage({ id: \"IDS_CANNOTEDITCANCELLEDSAMPLE\" }));\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                }\r\n\r\n                else {\r\n                    const languagetypeCode = undefined\r\n                    const comboData = response[1].data;\r\n                    let comboValues = {}\r\n                    if (columnList.length > 0) {\r\n                        columnList.map(x => {\r\n                            if (x.inputtype === 'combo') {\r\n                                if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \r\n                                {\r\n                                    if (comboData[x.label].length > 0) {\r\n                                        if (comboData[x.label][0].label === undefined) {\r\n                                            const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode)\r\n                                            comboData[x.label] = optionList.get(\"OptionList\");\r\n                                        } else {\r\n                                            comboData[x.label] = comboData[x.label]\r\n                                            const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode)\r\n                                        }\r\n                                    } else {\r\n                                        comboData[x.label] = []\r\n                                    }\r\n                                    //comboValues = childComboLoad(x, comboData, selectedRecord, \r\n                                    //   childColumnList, withoutCombocomponent)\\\r\n                                    comboValues = childComboLoad(x, comboData, selectedRecord1,\r\n                                        childColumnList, withoutCombocomponent)\r\n                                } else {\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                comboValues = {\r\n                                    comboData: comboData,\r\n                                    ...comboValues\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        comboValues = {\r\n                            \"comboData\": comboData,\r\n                        }\r\n                    }\r\n\r\n                    let { Specification, AgaramTree, ActiveKey, FocusKey, OpenNodes } = [];\r\n                    const selectedSpec = {}\r\n                    Specification = constructOptionList(response[2].data[\"Specification\"] || [], \"nallottedspeccode\",\r\n                        \"sspecname\", undefined, undefined, true).get(\"OptionList\");\r\n                    AgaramTree = response[2].data[\"AgaramTree\"];\r\n                    ActiveKey = response[2].data[\"FocusKey\"];\r\n                    FocusKey = response[2].data[\"ActiveKey\"];\r\n                    OpenNodes = response[2].data[\"OpenNodes\"];\r\n                    //Manufacturer = response.data[\"Manufacturer\"];\r\n                    selectedSpec[\"nallottedspeccode\"] = Specification.length > 0 ? {\r\n                        \"value\": Specification[0].value,\r\n                        \"label\": Specification[0].label,\r\n                        \"item\": Specification[0].item\r\n                    } : \"\";\r\n\r\n                    selectedSpec[\"sversion\"] = Specification.length > 0 ? Specification[0].item.sversion : \"\"\r\n                    selectedSpec[\"ntemplatemanipulationcode\"] = Specification.length > 0 ?\r\n                        Specification[0].item.ntemplatemanipulationcode : -1\r\n                    selectedRecord = { ...selectedRecord, ...selectedSpec }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            AgaramTree,\r\n                            FocusKey,\r\n                            ActiveKey,\r\n                            OpenNodes,\r\n                            selectedSpec,\r\n                            Specification,\r\n                            // statustoEditDetail: response[2].data[\"ApprovalConfigRole\"] || {},\r\n                            // currentTime,\r\n                            operation:\"update\",\r\n                             screenName: inputParam.masterData.RealRegSubTypeValue.sregsubtypename,\r\n                            // PopUpLabel: popUpLabel,\r\n                            timeZoneList,\r\n                            defaultTimeZone,\r\n                            selectedRecord,\r\n                            openPortal: true,\r\n                            ncontrolCode: inputParam.editRegParam.ncontrolCode,\r\n                            loadPreregister: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            loading: false,\r\n                            showSample: undefined,\r\n                            comboData: comboValues.comboData,\r\n                            childColumnList, comboComponents,\r\n                            withoutCombocomponent,\r\n                            columnList\r\n                            //  regRecordToEdit:recordToEdit\r\n\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n\r\n    }\r\n}\r\nexport function updateRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/updateRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n               // sortData(response.data);\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSample\"], masterData.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                 replaceUpdatedObject(response.data[\"RegistrationGetTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n              //  let RegistrationGetSubSample = response.data[\"RegistrationGetSubSample\"];\r\n                //let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                masterData = {\r\n                    ...masterData,\r\n                    //selectedSample: response.data[\"selectedSample\"],\r\n                   // selectedSubSample: masterData[\"selectedSubSample\"],\r\n                    //selectedTest:masterData[\"selectedTest\"],\r\n                   // RegistrationGetTest,\r\n                   // RegistrationGetSubSample,\r\n                    RegistrationParameter: masterData[\"RegistrationParameter\"]\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, openPortal: false, loading: false, showConfirmAlert: false,\r\n                        regDateEditConfirmMessage: undefined, loadEsign: false,\r\n                        loadPreregister: false, selectedRecord: {}, showSample: undefined\r\n                    }\r\n                });\r\n                // let inputData = {\r\n                //     masterData,\r\n                //     selectedTest: masterData.selectedTest,\r\n                //     ntransactiontestcode: masterData.selectedTest ?\r\n                //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\r\n                //     npreregno: masterData.selectedSample ?\r\n                //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\r\n                //     userinfo: inputParam.inputData.userinfo,\r\n                //     activeTestTab : masterData.activeTestTab,\r\n                //     screenName: masterData.activeTestTab,\r\n                //     resultDataState: inputParam.resultDataState,\r\n                //     testCommentDataState: inputParam.testCommentDataState,\r\n                // }\r\n                // dispatch(getTestChildTabDetail(inputData, true))\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                }\r\n                else if (error.response.status === 302) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false, loadEsign: false,\r\n                            regEditParam: inputParam,\r\n                            showConfirmAlert: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            regDateEditConfirmMessage: error.response.data, showSample: undefined\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showSample: undefined } })\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function cancelTestAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelTest\", inputParam.inputData)\r\n            .then(response => {\r\n\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedTest: response.data[\"selectedTest\"],\r\n                    // RegistrationGetTest:response.data[\"RegistrationGetTest\"],\r\n                    RegistrationGetTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\"),\r\n                    //  RegistrationGetSample: replaceUpdatedObject(response.data.selectedSample, LoginProps.RegistrationGetSample, 'npreregno')\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    showConfirmAlert: false,\r\n                    selectedRecord: {},\r\n                    loading: false,\r\n                    loadPreregister: false,\r\n                    showSample: undefined\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'no'\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function cancelSampleAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelSample\", inputParam.inputData)\r\n            .then(response => {\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function addsubSampleRegistration(masterData, userinfo, regcolumnList,\r\n    selectRecord, regchildColumnList,\r\n    regSubSamplecomboComponents,\r\n    regSubSamplewithoutCombocomponent, Map, ncontrolcode, specBasedComponent) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const urlArray = []\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        urlArray[0] = timeZoneService;\r\n        const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n            parentcolumnlist: regcolumnList,\r\n            childcolumnlist: regchildColumnList,\r\n            userinfo\r\n        })\r\n        urlArray[1] = actualService;\r\n\r\n        if (specBasedComponent) {\r\n            const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n                ...Map,\r\n                specBasedComponent: specBasedComponent,\r\n                userinfo\r\n            })\r\n            urlArray[2] = ComponentTestBySpec;\r\n        } else {\r\n\r\n            const TestGet = rsapi.post(\"/registration/getTestfromDB\", {\r\n                nallottedspeccode: Map[\"nallottedspeccode\"],\r\n                slno: 1,\r\n                specBasedComponent: specBasedComponent\r\n\r\n            })\r\n            urlArray[2] = TestGet;\r\n        }\r\n        Axios.all(urlArray).then(response => {\r\n            const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n            const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n            const defaultTimeZone = { label: userinfo.stimezoneid, value: userinfo.ntimezonecode }\r\n            const newcomboData = parentChildComboLoad(regcolumnList, response[1].data,\r\n                selectRecord, regchildColumnList, regSubSamplewithoutCombocomponent)\r\n            let TestCombined = [];\r\n            let lstComponent = [];\r\n            if (specBasedComponent) {\r\n                const lstComponentMap = constructOptionList(response[2].data.lstComponent || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, true);\r\n\r\n                lstComponent = lstComponentMap.get(\"OptionList\");\r\n\r\n            } else {\r\n                TestCombined = response[2].data\r\n            }\r\n            const comboData1 = newcomboData.comboData\r\n            const selectedRecord1 = newcomboData.selectedRecord\r\n            regSubSamplewithoutCombocomponent.map(componentrow => {\r\n                if (componentrow.inputtype === \"date\") {\r\n                    if (componentrow.mandatory) {\r\n                        selectedRecord1[componentrow.label] = componentrow.loadcurrentdate ? new Date() : \"\";\r\n                    }\r\n                    // if (componentrow.timezone) {\r\n                    //     sampleRegistration[\"jsondata\"][`tz${componentrow.label}`] = selectedRecord[`tz${componentrow.label}`] ?\r\n                    //         { value: selectedRecord[`tz${componentrow.label}`].value, label: selectedRecord[`tz${componentrow.label}`].label } :\r\n                    //         defaulttimezone ? defaulttimezone : -1\r\n                    // }\r\n                }\r\n\r\n            })\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    screenName: \"SubSample\",\r\n                    showSaveContinue: false,\r\n                    parentPopUpSize: \"lg\",\r\n                    loading: false,\r\n                    lstComponent,\r\n                    openModal: true,\r\n                    operation: \"create\",\r\n                    loadRegSubSample: true,\r\n                    selectedRecord: selectedRecord1,\r\n                    regSubSamplecomboData: comboData1,\r\n                    regSubSamplecomboComponents,\r\n                    regSubSamplewithoutCombocomponent,\r\n                    TestCombined,\r\n                    regparentSubSampleColumnList: regcolumnList,\r\n                    ncontrolCode: ncontrolcode,\r\n                    timeZoneList,\r\n                    defaultTimeZone,\r\n                    masterData,\r\n                    specBasedComponent\r\n                }\r\n            });\r\n        })\r\n            .catch(error => {\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n            })\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nexport function saveSubSample(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/createSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                // let RegistrationGetSample = updatedObjectWithNewElement(response.data[\"selectedSample\"], masterData.RegistrationGetSample);\r\n                // let selectedSample = response.data[\"selectedSample\"];\r\n                let RegistrationGetSubSample = updatedObjectWithNewElement(inputParam.inputData.masterData.RegistrationGetSubSample, response.data[\"selectedSubSample\"]);\r\n                let RegistrationGetTest = response.data[\"selectedTest\"];\r\n                let selectedSubSample =response.data[\"selectedSubSample\"];// RegistrationGetSubSample.length > 0 ? [RegistrationGetSubSample[0]] : [];\r\n                RegistrationGetTest = sortData(RegistrationGetTest, \"npreregno\", \"desc\");\r\n                let selectedTest = RegistrationGetTest.length > 0 ? [RegistrationGetTest[0]] : [];\r\n\r\n                let RegistrationParameter = response.data[\"RegistrationParameter\"]\r\n\r\n                RegistrationParameter = getSameRecordFromTwoArrays(RegistrationParameter, selectedTest, 'ntransactiontestcode')\r\n\r\n                let masterData = { ...inputParam.inputData.masterData }\r\n                masterData = {\r\n                    ...masterData, ...response.data,\r\n                    selectedSubSample, selectedTest,\r\n                    RegistrationGetSubSample, RegistrationGetTest, RegistrationParameter\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    openModal: false,\r\n                    loadEsign: false,\r\n                    loading: false,\r\n                    showSample: undefined,\r\n                    selectedRecord: {},\r\n                    loadRegSubSample: false\r\n                }\r\n                inputParam.postParamList[0]['clearFilter'] = 'yes'\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                //    dispatch({\r\n                //     type: DEFAULT_RETURN,\r\n                //     payload: {\r\n                //         masterData,\r\n                //         openModal: false,\r\n                //         loadEsign: false,\r\n                //         loading: false,\r\n                //         showSample: undefined,\r\n                //         selectedRecord: {},\r\n                //         loadRegSubSample:false\r\n                //     }\r\n                // });\r\n            })\r\n            .catch(error => {\r\n                // console.log(error);\r\n                toast.error(error.message);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showConfirmAlert: false } })\r\n            })\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function getEditSubSampleComboService(inputParam, columnList, selectedRecord1,\r\n    childColumnList, comboComponents,\r\n    withoutCombocomponent, specBasedComponent) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const { userInfo, operation } = { ...inputParam };\r\n\r\n        const ntransactionsamplecode = inputParam.mastertoedit[inputParam.primaryKeyName];\r\n        let urlArray = [];\r\n\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n            parentcolumnlist: columnList,\r\n            childcolumnlist: childColumnList,\r\n            userinfo: userInfo\r\n        })\r\n        const selectedRegistration = rsapi.post(\"/registration/getEditRegistrationSubSampleDetails\", { ...inputParam.editRegParam, ntransactionsamplecode })\r\n\r\n        urlArray = [timeZoneService, actualService, selectedRegistration]\r\n        // if(specBasedComponent){\r\n        //     const ComponentTestBySpec = rsapi.post(\"/registration/getComponentBySpec\", {\r\n        //         ...Map,\r\n        //         specBasedComponent: specBasedComponent\r\n        //     })\r\n        //     urlArray.push(ComponentTestBySpec) \r\n        // }\r\n\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord = { ...response[2].data[\"SelectedRegistrationSubSample\"][0] };\r\n\r\n                selectedRecord = { ...selectedRecord, ...selectedRecord['jsondata'] }\r\n\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userInfo.stimezoneid, value: userInfo.ntimezonecode }\r\n\r\n                if (selectedRecord.ntransactionstatus !== transactionStatus.PREREGISTER) {\r\n                    toast.warn(intl.formatMessage({ id: \"IDS_SELECTPREREGISTERSUBSAMPLETOEDIT\" }));\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                }\r\n\r\n                else {\r\n                    //               let lstComponent=[]\r\n                    if (specBasedComponent) {\r\n                        selectedRecord[\"ncomponentcode\"] = { label: selectedRecord[\"scomponentname\"], value: selectedRecord[\"ncomponentcode\"] }\r\n                    }\r\n                    const languagetypeCode = undefined\r\n                    const comboData = response[1].data;\r\n                    let comboValues = {}\r\n                    if (columnList.length > 0) {\r\n                        columnList.map(x => {\r\n                            if (x.inputtype === 'combo') {\r\n                                if (comboData[x.label] && comboData[x.label].length > 0) //&& comboData[x.label][0].hasOwnProperty(x.source) \r\n                                {\r\n                                    if (comboData[x.label].length > 0) {\r\n                                        if (comboData[x.label][0].label === undefined) {\r\n                                            const optionList = constructjsonOptionList(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode)\r\n                                            comboData[x.label] = optionList.get(\"OptionList\");\r\n                                        } else {\r\n                                            comboData[x.label] = comboData[x.label]\r\n                                            const optionList = constructjsonOptionDefault(comboData[x.label] || [], x.valuemember,\r\n                                                x.displaymember, false, false, true, undefined, x.source, x.isMultiLingual, languagetypeCode)\r\n                                        }\r\n                                    } else {\r\n                                        comboData[x.label] = []\r\n                                    }\r\n                                    //comboValues = childComboLoad(x, comboData, selectedRecord, \r\n                                    //   childColumnList, withoutCombocomponent)\\\r\n                                    comboValues = childComboLoad(x, comboData, selectedRecord1,\r\n                                        childColumnList, withoutCombocomponent)\r\n                                } else {\r\n                                    comboValues = {\r\n                                        \"comboData\": comboData,\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                comboValues = {\r\n                                    comboData: comboData,\r\n                                    ...comboValues\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                    else {\r\n                        comboValues = {\r\n                            \"comboData\": comboData,\r\n                        }\r\n                    }\r\n\r\n\r\n                    selectedRecord = { ...selectedRecord }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            operation,\r\n                            timeZoneList,\r\n                            defaultTimeZone,\r\n                            selectedRecord,\r\n                            openModal: true,\r\n                            ncontrolCode: inputParam.editSubSampleRegParam.ncontrolCode,\r\n                            parentPopUpSize: \"lg\",\r\n                            loading: false,\r\n                            showSample: undefined,\r\n                            regSubSamplecomboData: comboValues.comboData,\r\n                            loadRegSubSample: true,\r\n                            screenName: \"IDS_SUBSAMPLE\",\r\n                            operation: \"update\",\r\n                            specBasedComponent\r\n                            //  regRecordToEdit:recordToEdit\r\n\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n\r\n    }\r\n}\r\nexport function onUpdateSubSampleRegistration(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/updateRegistrationSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                sortData(response.data);\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                //replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], masterData.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], masterData.RegistrationGetTest, \"ntransactiontestcode\");\r\n                //  let RegistrationGetSubSample=response.data[\"RegistrationGetSubSample\"];\r\n                let RegistrationGetTest = response.data[\"RegistrationGetTest\"];\r\n                masterData = {\r\n                    ...masterData,\r\n                    // selectedSample: response.data[\"selectedSample\"],\r\n                    selectedSubSample: response.data[\"selectedSubSample\"],\r\n                    selectedTest: response.data[\"selectedTest\"],\r\n                    RegistrationGetTest,\r\n                    // RegistrationGetSubSample,\r\n                    RegistrationParameter: response.data[\"RegistrationParameter\"]\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, openModal: false, loading: false, showConfirmAlert: false,\r\n                        regDateEditConfirmMessage: undefined, loadEsign: false,\r\n                        loadRegSubSample: false, selectedRecord: {}, showSample: undefined, screenName: \"SubSample\",\r\n                    }\r\n                });\r\n                // let inputData = {\r\n                //     masterData,\r\n                //     selectedTest: masterData.selectedTest,\r\n                //     ntransactiontestcode: masterData.selectedTest ?\r\n                //         String(masterData.selectedTest.map(item => item.ntransactiontestcode).join(\",\")) : \"-1\",\r\n                //     npreregno: masterData.selectedSample ?\r\n                //         masterData.selectedSample.map(item => item.npreregno).join(\",\") : \"-1\",\r\n                //     userinfo: inputParam.inputData.userinfo,\r\n                //     activeTestTab : masterData.activeTestTab,\r\n                //     screenName: masterData.activeTestTab,\r\n                //     resultDataState: inputParam.resultDataState,\r\n                //     testCommentDataState: inputParam.testCommentDataState,\r\n                // }\r\n                // dispatch(getTestChildTabDetail(inputData, true))\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                }\r\n                else if (error.response.status === 302) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            loading: false, loadEsign: false,\r\n                            regEditParam: inputParam,\r\n                            showConfirmAlert: true,\r\n                            parentPopUpSize: \"xl\",\r\n                            regDateEditConfirmMessage: error.response.data, showSample: undefined\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, showSample: undefined } })\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function cancelSubSampleAction(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/cancelSubSample\", inputParam.inputData)\r\n            .then(response => {\r\n                // replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    // selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n\r\n                let respObject = {\r\n                    masterData,\r\n                    ...inputParam.inputData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data.rtn);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function preregRecordToQuarantine(inputParam, LoginProps) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/registration/quarantineRegistration\", inputParam.inputData)\r\n            .then(response => {\r\n                // replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                // replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                // replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSample\"], LoginProps.RegistrationGetSample, \"npreregno\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetSubSample\"], LoginProps.RegistrationGetSubSample, \"ntransactionsamplecode\");\r\n                replaceUpdatedObject(response.data[\"RegistrationGetTest\"], LoginProps.RegistrationGetTest, \"ntransactiontestcode\");\r\n\r\n                delete response.data[\"RegistrationGetSample\"];\r\n                delete response.data[\"RegistrationGetSubSample\"];\r\n                delete response.data[\"RegistrationGetTest\"];\r\n                let masterData = {\r\n                    ...LoginProps,\r\n                    selectedSample: replaceUpdatedObject(response.data[\"selectedSample\"], LoginProps.selectedSample, \"npreregno\"),\r\n                    selectedSubSample: replaceUpdatedObject(response.data[\"selectedSubSample\"], LoginProps.selectedSubSample, \"ntransactionsamplecode\"),\r\n                    selectedTest: replaceUpdatedObject(response.data[\"selectedTest\"], LoginProps.selectedTest, \"ntransactiontestcode\"),\r\n                }\r\n                let respObject = {\r\n                    masterData,\r\n                    loading: false,\r\n                    loadEsign: false,\r\n                    openModal: false,\r\n                    showSample: undefined\r\n                }\r\n                dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data.rtn);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTestChildTabDetailRegistration(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        if (inputData.ntransactiontestcode && inputData.ntransactiontestcode.length > 0) {\r\n            let inputParamData = {\r\n                ntransactiontestcode: inputData.ntransactiontestcode,\r\n                npreregno: inputData.npreregno,\r\n                userinfo: inputData.userinfo\r\n            }\r\n            let url = null\r\n            let { testtake } = inputData;\r\n            let activeName = \"\";\r\n            let dataStateName = \"\";\r\n            switch (inputData.activeTestTab) {\r\n                case \"IDS_RESULTS\":\r\n                    url = \"approval/getapprovalparameter\"\r\n                    activeName = \"ApprovalParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_PARAMETERRESULTS\":\r\n                    url = \"registration/getregistrationparameter\"\r\n                    activeName = \"RegistrationParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    url = \"resultentrybysample/getResultUsedInstrument\"\r\n                    activeName = \"ResultUsedInstrument\"\r\n                    dataStateName = \"instrumentDataState\"\r\n                    break;\r\n                case \"IDS_MATERIAL\":\r\n                    url = \"resultentrybysample/getResultUsedMaterial\"\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    url = \"resultentrybysample/getResultUsedTask\"\r\n                    activeName = \"ResultUsedTasks\"\r\n                    dataStateName = \"taskDataState\"\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    url = \"attachment/getTestAttachment\"\r\n                    activeName = \"RegistrationTestAttachment\"\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    url = \"comments/getTestComment\"\r\n                    activeName = \"RegistrationTestComment\"\r\n                    dataStateName = \"testCommentDataState\"\r\n                    break;\r\n                case \"IDS_DOCUMENTS\":\r\n                    url = \"approval/getapprovalparameter\"\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    url = \"approval/getApprovalResultChangeHistory\"\r\n                    activeName = \"ApprovalResultChangeHistory\"\r\n                    dataStateName = \"resultChangeDataState\"\r\n                    break;\r\n                case \"IDS_TESTAPPROVALHISTORY\":\r\n                    url = \"approval/getApprovalHistory\"\r\n                    activeName = \"ApprovalHistory\"\r\n                    dataStateName = \"historyDataState\"\r\n                    break;\r\n                case \"IDS_SAMPLEATTACHMENTS\":\r\n                    url = \"attachment/getSampleAttachment\"\r\n                    break;\r\n                default:\r\n                    url = \"approval/getapprovalparameter\"\r\n                    activeName = \"ApprovalParameter\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n            }\r\n            if (url !== null) {\r\n                dispatch(initRequest(true));\r\n                if (isServiceRequired) {\r\n                    rsapi.post(url, inputParamData)\r\n                        .then(response => {\r\n                            let skipInfo = {};\r\n                            let responseData = { ...response.data, selectedSample: inputData.selectedSample || inputData.masterData.selectedSample, selectedTest: inputData.selectedTest }\r\n                            //responseData = sortData(responseData)\r\n                            // fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\",inputData.removeElementFromArray);\r\n                            fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n                            let masterData = {\r\n                                ...inputData.masterData,\r\n                                selectedSample: inputData.selectedSample || inputData.masterData.selectedSample,\r\n                                selectedTest: inputData.selectedTest,\r\n                                selectedPreregno: inputData.npreregno,\r\n                                selectedSampleCode: inputData.ntransactionsamplecode,\r\n                                selectedTestCode: inputData.ntransactiontestcode,\r\n                            }\r\n                            if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                                skipInfo = {\r\n\r\n                                    [dataStateName]: {\r\n                                        ...inputData[dataStateName],\r\n                                        skip: 0,\r\n                                        sort: undefined,\r\n                                        filter: undefined\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                skipInfo = {\r\n                                    ...skipInfo,\r\n                                    [dataStateName]: {\r\n                                        ...inputData[dataStateName],\r\n                                        sort: undefined,\r\n                                        filter: undefined\r\n                                    }\r\n                                }\r\n                            }\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN, payload: {\r\n                                    masterData,\r\n                                    loading: false,\r\n                                    showFilter: false,\r\n                                    activeTestTab: inputData.activeTestTab,\r\n                                    screenName: inputData.screenName,\r\n                                    testtake, testskip: undefined,\r\n                                    ...skipInfo\r\n                                }\r\n                            })\r\n                        })\r\n                        .catch(error => {\r\n                            dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                            if (error.response.status === 500) {\r\n                                toast.error(error.message);\r\n                            }\r\n                            else {\r\n                                toast.warn(error.response.data);\r\n                            }\r\n                        })\r\n                } else {\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.selectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\", inputData.removeElementFromArray);\r\n                    let skipInfo = {};\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        selectedTest: inputData.selectedTest,\r\n                        selectedPreregno: inputData.npreregno,\r\n                        selectedSampleCode: inputData.ntransactionsamplecode,\r\n                        selectedTestCode: inputData.ntransactiontestcode,\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeTestTab: inputData.activeTestTab,\r\n                            screenName: inputData.screenName,\r\n                            testtake, testskip: undefined,\r\n                            ...skipInfo\r\n                        }\r\n                    })\r\n                }\r\n\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab\r\n                    }\r\n                })\r\n            }\r\n        } else {\r\n            let { ApprovalParameter, ResultUsedInstrument, ResultUsedTasks, RegistrationTestAttachment, ApprovalResultChangeHistory,\r\n                RegistrationTestComment, ApprovalHistory } = inputData.masterData\r\n            switch (inputData.activeTestTab) {\r\n                case \"IDS_RESULTS\":\r\n                    ApprovalParameter = [];\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    ResultUsedInstrument = []\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    ResultUsedTasks = []\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    RegistrationTestAttachment = []\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    ApprovalResultChangeHistory = []\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    RegistrationTestComment = []\r\n                    break;\r\n                case \"IDS_APPROVALHISTORY\":\r\n                    ApprovalHistory = []\r\n                    break;\r\n                default:\r\n                    ApprovalParameter = []\r\n                    break;\r\n            }\r\n\r\n            dispatch({\r\n                type: DEFAULT_RETURN, payload: {\r\n                    masterData: {\r\n                        ...inputData.masterData,\r\n                        selectedTest: [],\r\n                        ApprovalParameter, ResultUsedInstrument, ResultUsedTasks, RegistrationTestAttachment,\r\n                        ApprovalResultChangeHistory, RegistrationTestComment, ApprovalHistory\r\n                    }, loading: false\r\n                }\r\n            })\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}