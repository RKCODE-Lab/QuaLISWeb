{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useRef}from\"react\";import{useDrag}from\"react-dnd\";import Componentexp from\"./Componentexp\";import{COMPONENT,COMPONENTROW}from\"./constants\";import DropArea from\"./DropArea\";import\"./styles.css\";var Componentrow=function Componentrow(_ref){var data=_ref.data,components=_ref.components,baselength=_ref.baselength,path=_ref.path,handleDrop=_ref.handleDrop,deleteInput=_ref.deleteInput,onclickcomponent=_ref.onclickcomponent,selectedFieldRecord=_ref.selectedFieldRecord;var ref=useRef(null);var deleteButton;var mandatoryCheck=[];if(data.children){data.children.map(function(item2){if(item2.templatemandatory){mandatoryCheck.push(item2.templatemandatory);}});if(mandatoryCheck.length===0){deleteButton=/*#__PURE__*/React.createElement(\"a\",{class:\"order-3 delete-component-row-btn\",onClick:function onClick(e){return deleteInput(data,{type:COMPONENTROW,id:data.id,data:data,path:path});}},/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-times-circle align-middle red\",\"aria-hidden\":\"true\"}));}}var _useDrag=useDrag({type:COMPONENT,item:{type:COMPONENT,id:data.id,data:data,children:data.children,path:path},collect:function collect(monitor){return{isDragging:monitor.isDragging()};}}),_useDrag2=_slicedToArray(_useDrag,2),isDragging=_useDrag2[0].isDragging,drag=_useDrag2[1];var style={border:\"\".concat(data.children?\"1px dashed #ddd\":\"\"),padding:\"\".concat(data.children?\"10px 0px\":\"\"),margin:\"\".concat(data.children?\"0 -3px 0 11px\":\"\"),//padding: \"0rem 1rem\",\n// backgroundColor: \"white\",\ncursor:\"move\"};var getScale=function getScale(){var scale=1;if(data.children&&data.children.length){if(baselength==1){if(data.children.length<10){scale=1-(\".\"+data.children.length)/2;}else{scale=.5-(\".\"+data.children.length);}}else if(baselength==2){if(data.children.length<10){scale=1-(\".\"+data.children.length)/1.2;}else{scale=.5-(\".\"+data.children.length);}}else if(baselength==3){if(data.children.length<10){scale=1-(\".\"+data.children.length)/.7;}else{scale=.5-(\".\"+data.children.length);}}else if(baselength==4){if(data.children.length<10){scale=1-(\".\"+data.children.length)/.6;}else{scale=.5-(\".\"+data.children.length);}}}return scale<.2?.2:scale;};var opacity=isDragging?0:1;drag(ref);//const component = components[data.id];\nvar renderColumn=function renderColumn(column,currentPath){return/*#__PURE__*/React.createElement(Componentexp,{key:column.id,data:column,components:components,handleDrop:handleDrop,deleteInput:deleteInput,path:currentPath,onclickcomponent:onclickcomponent,selectedFieldRecord:selectedFieldRecord});};return/*#__PURE__*/React.createElement(\"div\",{ref:ref,style:_objectSpread(_objectSpread({},style),{},{opacity:opacity}),className:\"base draggable component-row-column row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"columns d-flex justify-content-center position-relative\"},deleteButton,data.children?data.children.map(function(column,index){var currentPath=\"\".concat(path,\"-\").concat(index);return/*#__PURE__*/React.createElement(React.Fragment,{key:column.id},data.children.length<2&&/*#__PURE__*/React.createElement(DropArea,{data:{path:currentPath,childrenCount:data.children.length},onDrop:handleDrop,className:\"horizontalDrag\"}),renderColumn(column,currentPath));}):/*#__PURE__*/React.createElement(React.Fragment,{key:data.id},/*#__PURE__*/React.createElement(DropArea,{data:{path:\"\".concat(path,\"-\",0),childrenCount:1},onDrop:handleDrop,className:\"horizontalDrag\"}),renderColumn(data,\"\".concat(path,\"-\",0))),(data.children===undefined||data.children.length<2)&&/*#__PURE__*/React.createElement(DropArea,{data:{path:data.children?\"\".concat(path,\"-\").concat(data.children.length):\"\".concat(path,\"-\",1),childrenCount:data.children?data.children.length:1},onDrop:handleDrop,className:\"horizontalDrag\",isLast:true})));};export default Componentrow;","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/components/droparea/Componentrow.jsx"],"names":["React","useRef","useDrag","Componentexp","COMPONENT","COMPONENTROW","DropArea","Componentrow","data","components","baselength","path","handleDrop","deleteInput","onclickcomponent","selectedFieldRecord","ref","deleteButton","mandatoryCheck","children","map","item2","templatemandatory","push","length","e","type","id","item","collect","monitor","isDragging","drag","style","border","padding","margin","cursor","getScale","scale","opacity","renderColumn","column","currentPath","index","childrenCount","undefined"],"mappings":"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","sourcesContent":["import React, { useRef } from \"react\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport Componentexp from \"./Componentexp\";\r\nimport { COMPONENT, COMPONENTROW } from \"./constants\";\r\nimport DropArea from \"./DropArea\";\r\nimport \"./styles.css\"\r\n\r\n\r\nconst Componentrow = ({ data, components, baselength, path, handleDrop, deleteInput, onclickcomponent, selectedFieldRecord }) => {\r\n  const ref = useRef(null);\r\n  let deleteButton;  \r\n  const mandatoryCheck = [];\r\n    if(data.children){\r\n      data.children.map((item2) =>{\r\n        if(item2.templatemandatory){\r\n          mandatoryCheck.push(item2.templatemandatory);\r\n        }\r\n    })\r\n    if(mandatoryCheck.length === 0 ){\r\n      deleteButton = <a class=\"order-3 delete-component-row-btn\" onClick={(e) => deleteInput(data, {\r\n        type: COMPONENTROW,\r\n        id: data.id,\r\n        data: data,\r\n        path\r\n    })}><i class=\"fa fa-times-circle align-middle red\" aria-hidden=\"true\"></i></a>;\r\n    }\r\n  }\r\n\r\n  const [{ isDragging }, drag] = useDrag({\r\n\r\n    type: COMPONENT,\r\n    item: {\r\n      type: COMPONENT,\r\n      id: data.id,\r\n      data: data,\r\n      children: data.children,\r\n      path\r\n    },\r\n    collect: monitor => ({\r\n      isDragging: monitor.isDragging()\r\n    })\r\n  });\r\n  const style = {\r\n    border: `${data.children ? \"1px dashed #ddd\" : \"\"}`,\r\n    padding: `${data.children ? \"10px 0px\" : \"\"}`,\r\n    margin: `${data.children ? \"0 -3px 0 11px\" : \"\"}`,\r\n    //padding: \"0rem 1rem\",\r\n    // backgroundColor: \"white\",\r\n    cursor: \"move\"\r\n  };\r\n  const getScale = () => {\r\n    let scale = 1;\r\n    if (data.children && data.children.length) {\r\n      if (baselength == 1) {\r\n        if (data.children.length < 10) {\r\n          scale = 1 - ((\".\" + data.children.length) / 2)\r\n        } else {\r\n          scale = .5 - ((\".\" + data.children.length))\r\n        }\r\n      } else if (baselength == 2) {\r\n        if (data.children.length < 10) {\r\n          scale = 1 - ((\".\" + data.children.length) / 1.2)\r\n        } else {\r\n          scale = .5 - ((\".\" + data.children.length))\r\n        }\r\n      } else if (baselength == 3) {\r\n        if (data.children.length < 10) {\r\n          scale = 1 - ((\".\" + data.children.length) / .7)\r\n        } else {\r\n          scale = .5 - ((\".\" + data.children.length))\r\n        }\r\n      } else if (baselength == 4) {\r\n        if (data.children.length < 10) {\r\n          scale = 1 - ((\".\" + data.children.length) / .6)\r\n        } else {\r\n          scale = .5 - ((\".\" + data.children.length))\r\n        }\r\n      }\r\n\r\n\r\n\r\n    }\r\n    return scale < .2 ? .2 : scale;\r\n  }\r\n  const opacity = isDragging ? 0 : 1;\r\n  drag(ref);\r\n\r\n  //const component = components[data.id];\r\n\r\n\r\n\r\n  const renderColumn = (column, currentPath) => {\r\n    return (\r\n      <Componentexp\r\n        key={column.id}\r\n        data={column}\r\n        components={components}\r\n        handleDrop={handleDrop}\r\n        deleteInput={deleteInput}\r\n        path={currentPath}\r\n        onclickcomponent={onclickcomponent}\r\n        selectedFieldRecord={selectedFieldRecord}\r\n      />\r\n    );\r\n    };\r\n\r\n  return (\r\n    <div ref={ref} style={{ ...style, opacity }} className={`base draggable component-row-column row`}>\r\n      <div className=\"columns d-flex justify-content-center position-relative\">\r\n      {deleteButton}\r\n      {/* {data.templatemandatory != true &&\r\n      <a class=\"order-3 delete-dynamic-row\" onClick={(e) => deleteInput(data, {\r\n            type: COMPONENTROW,\r\n            id: data.id,\r\n            data: data,\r\n            path\r\n        })}><i class=\"fa fa-times-circle align-middle red\" aria-hidden=\"true\"></i></a>\r\n      } */}\r\n        {data.children ?\r\n          data.children.map((column, index) => {\r\n            const currentPath = `${path}-${index}`;\r\n\r\n            return (\r\n              <React.Fragment key={column.id}>\r\n                {data.children.length < 2 &&\r\n                            <DropArea\r\n                    data={{\r\n                      path: currentPath,\r\n                      childrenCount: data.children.length,\r\n                    }}\r\n                    onDrop={handleDrop}\r\n                    className=\"horizontalDrag\"\r\n                            />\r\n                    }\r\n                {renderColumn(column, currentPath)}\r\n              </React.Fragment>\r\n            );\r\n          }) :\r\n          <React.Fragment key={data.id}>\r\n            <DropArea\r\n              data={{\r\n                path: `${path}-${0}`,\r\n                childrenCount: 1,\r\n              }}\r\n              onDrop={handleDrop}\r\n              className=\"horizontalDrag\"\r\n                          />\r\n            {renderColumn(data, `${path}-${0}`)}\r\n          </React.Fragment>\r\n        }\r\n        {(data.children === undefined || data.children.length < 2 )&&\r\n          <DropArea\r\n            data={{\r\n              path: data.children ? `${path}-${data.children.length}` : `${path}-${1}`,\r\n              childrenCount: data.children ? data.children.length : 1\r\n            }}\r\n            onDrop={handleDrop}\r\n            className=\"horizontalDrag\"\r\n            isLast\r\n          />\r\n              }\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Componentrow;\r\n"]},"metadata":{},"sourceType":"module"}