{"ast":null,"code":"import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{sortData,constructOptionList,rearrangeDateFormat}from'../components/CommonScript';import{toast}from'react-toastify';import Axios from'axios';import{initRequest}from'./LoginAction';import{intl}from'../components/App';import{designProperties,TemplateType}from'../components/Enumeration';export function getDesignTemplateMappingDetail(designtemplatemapping,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"designtemplatemapping/getDesignTemplateMapping\",{ndesigntemplatemappingcode:designtemplatemapping.ndesigntemplatemappingcode,nsampletypecode:designtemplatemapping.nsampletypecode,nregtypecode:designtemplatemapping.nregtypecode,nregsubtypecode:designtemplatemapping.nregsubtypecode,\"userinfo\":userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response}));}});};}export function getDesignTemplateMappingComboService(param){return function(dispatch){var screenName=param.screenName;var operation=param.operation;var userInfo=param.userInfo;var nsampletypecode=param.realSampleValue;var nregtypecode=param.realRegTypeValue;var nregsubtypecode=param.realRegSubTypeValue;var ncontrolCode=param.controlId;var moduleTypeArray=param.moduleTypeArray;//if (//(operation === \"create\") && (nsampletypecode != -1) && (nregtypecode != -1) && (nregsubtypecode != -1)) {\nvar isValid=true;if(nsampletypecode!==4){if(nsampletypecode!=-1&&nregtypecode!=-1&&nregsubtypecode!=-1){isValid=true;}else{isValid=false;}}if(isValid){var designtemplatemappingService=rsapi.post(\"designtemplatemapping/getDynamicPreRegDesign\",{userinfo:userInfo,nsampletypecode:nsampletypecode,nregtypecode:nregtypecode,nregsubtypecode:nregsubtypecode});var urlArray=[designtemplatemappingService];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var selectedRecord={nnewmodule:moduleTypeArray[0]};var designtemplatemappingMap=constructOptionList(response[0].data.DesignTemplateMapping||[],\"nreactregtemplatecode\",\"sregtemplatename\",undefined,undefined,true);var designtemplatemappingList=designtemplatemappingMap.get(\"OptionList\");designtemplatemappingMap=constructOptionList(response[0].data.SubSampleTemplate||[],\"nreactregtemplatecode\",\"sregtemplatename\",undefined,undefined,true);var subSampleTemplateList=designtemplatemappingMap.get(\"OptionList\");var qualisModuleMap=constructOptionList(response[0].data.DT_QualisModule||[],\"nmodulecode\",\"sdisplayname\",undefined,undefined,true);var qualisModuleList=qualisModuleMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{designtemplatemappingList:designtemplatemappingList,subSampleTemplateList:subSampleTemplateList,testListFields:response[0].data.TestListFields.jsondata,operation:operation,screenName:screenName,selectedRecord:selectedRecord,openModal:true,ncontrolCode:ncontrolCode,loading:false,designTemplateQualisModule:qualisModuleList}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTALLVALUESINFILTER\"}));}};}export function reloadDesignTemplateMapping(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"designtemplatemapping/getDesignTemplateMapping\",_objectSpread({},inputParam.inputData)).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);var masterData=_objectSpread(_objectSpread({},inputParam.masterData),responseData);//if (inputParam.searchRef !== undefined && inputParam.searchRef.current !== null) {\n//    inputParam.searchRef.current.value = \"\";\nmasterData['searchedData']=undefined;//}\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,showFilter:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getTMPFilterRegType(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"designtemplatemapping/getTemplateRegType\",inputParam.inputData).then(function(response){var masterData=_objectSpread(_objectSpread({},inputParam.masterData),response.data);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getTMPFilterRegSubType(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"designtemplatemapping/getTemplateRegSubType\",inputParam.inputData).then(function(response){var masterData=_objectSpread(_objectSpread({},inputParam.masterData),response.data);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getTMPFilterSubmit(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"designtemplatemapping/getFilterSubmit\",inputParam.inputData).then(function(response){var masterData=_objectSpread(_objectSpread({},inputParam.masterData),response.data);var listdesigntemplatemapping=sortData(response.data.DesignTemplateMapping);masterData=_objectSpread(_objectSpread({},masterData),{},{listdesigntemplatemapping:listdesigntemplatemapping});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getMappedFieldProps(inputParam){return function(dispatch){var fieldService=rsapi.post('designtemplatemapping/getMappedFieldProps',{designtemplatemapping:inputParam.inputData.designtemplatemapping,userinfo:inputParam.inputData.userinfo});var urlArray=[fieldService];if(inputParam.inputData[\"napprovalconfigcode\"]){var regSubTypeVersionService=rsapi.post(\"registrationsubtype/getApprovedVersion\",{napprovalconfigcode:inputParam.inputData.napprovalconfigcode});urlArray.push(regSubTypeVersionService);}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var dataResult={};var designData=response[0].data.jsondataobj||{};//console.log(\"design:\", designData);\nif(inputParam[\"TemplateType\"]===TemplateType.Masters){// Object.keys(designData).map(formcode => {\ndataResult=[];designData.mastertemplatefields.map(function(field){return dataResult.push({label:field[designProperties.VALUE],griditem:designData.griditem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,gridmoreitem:designData.gridmoreitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});// })                   \n}else{// const regSubTypeVersionData = response[1].data;\n//if(regSubTypeVersionData &&  regSubTypeVersionData.jsondata.nneedsubsample === true){\nif(inputParam.operation===\"configuresubsample\"){Object.keys(designData).map(function(formcode){dataResult[formcode]=[];designData.subsampletemplatefields.map(function(field){return!Array.isArray(designData[formcode])&&dataResult[formcode].push({label:field[designProperties.VALUE],subsamplelistitem:designData[formcode].subsamplelistitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});});}else{Object.keys(designData).map(function(formcode){dataResult[formcode]=[];designData.sampletemplatefields.map(function(field){return!Array.isArray(designData[formcode])&&dataResult[formcode].push({label:field[designProperties.VALUE],sampledisplayfields:designData[formcode].sampledisplayfields.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,// samplelistitem: designData[formcode].samplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) === undefined ? \"none\" : true,\nsamplelistitem:designData[formcode].samplelistitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,samplelistmoreitems:designData[formcode].samplelistmoreitems?designData[formcode].samplelistmoreitems.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined:false,samplegriditem:designData[formcode].samplegriditem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,samplegridmoreitem:designData[formcode].samplegridmoreitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});});}}// console.log(\"response[1].data:\", response[1].data);\ndispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,designData:designData,//response[0].data.jsondataobj,\napprovedRegSubTypeVersion:inputParam.inputData[\"napprovalconfigcode\"]?response[1].data:undefined,dataResult:dataResult,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolCode:inputParam.ncontrolcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function combinationUniqueConfigService(inputParam){return function(dispatch){var fieldService=rsapi.post('designtemplatemapping/getMappedFieldProps',{designtemplatemapping:inputParam.inputData.designtemplatemapping,userinfo:inputParam.inputData.userinfo});var urlArray=[fieldService];if(inputParam.inputData[\"napprovalconfigcode\"]){var regSubTypeVersionService=rsapi.post(\"registrationsubtype/getApprovedVersion\",{napprovalconfigcode:inputParam.inputData.napprovalconfigcode});urlArray.push(regSubTypeVersionService);}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var dataList=[];var dataListCount=[];var designData=response[0].data.jsondataobj||{};var dataListSubSample=[];var dataListCountSubSample=[];if(inputParam[\"TemplateType\"]===TemplateType.Masters){dataList=designData.mastercombinationunique&&_toConsumableArray(designData.mastercombinationunique)||[];designData.mastercombinationunique&&designData.mastercombinationunique.map(function(item,index){dataListCount.push(index);});}else{dataList=designData.samplecombinationunique&&_toConsumableArray(designData.samplecombinationunique)||[];designData.samplecombinationunique&&designData.samplecombinationunique.map(function(item,index){dataListCount.push(index);});dataListSubSample=designData.subsamplecombinationunique&&_toConsumableArray(designData.subsamplecombinationunique)||[];designData.subsamplecombinationunique&&designData.subsamplecombinationunique.map(function(item,index){dataListCountSubSample.push(index);});}dispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,designData:designData,//response[0].data.jsondataobj,\napprovedRegSubTypeVersion:inputParam.inputData[\"napprovalconfigcode\"]?response[1].data:undefined,dataList:dataList,dataListCount:dataListCount,dataListSubSample:dataListSubSample,dataListCountSubSample:dataListCountSubSample,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolcode:inputParam.ncontrolcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function editFieldConfigService(inputParam){return function(dispatch){var fieldService=rsapi.post('designtemplatemapping/getMappedFieldProps',{designtemplatemapping:inputParam.inputData.designtemplatemapping,userinfo:inputParam.inputData.userinfo});var filterStatusService=rsapi.post('registration/getRegistrationFilterStatus',{nregtypecode:inputParam.inputData.nregtypecode,nregsubtypecode:inputParam.inputData.nregsubtypecode,userinfo:_objectSpread(_objectSpread({},inputParam.inputData.userinfo),{},{nformcode:43})});var urlArray=[fieldService,filterStatusService];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var dataResult={};var designData=response[0].data.jsondataobj||{};var filterStatus=response[1].data||[];var list=filterStatus.filter(function(item){return item[\"ntransactionstatus\"]!==0;});filterStatus=list;var selectedRecord={};if(inputParam[\"TemplateType\"]===TemplateType.Masters){dataResult=[];designData.mastertemplatefields.map(function(field){return dataResult.push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});});}else{if(inputParam.operation===\"configuresubsampleedit\"){Object.keys(designData).map(function(formcode){dataResult[formcode]=[];selectedRecord[formcode]={};var editArray=designData[formcode][\"subsampleeditable\"]||[];designData.subsampletemplatefields.map(function(field){if(!Array.isArray(designData[formcode])){var index=editArray.findIndex(function(x){return x.label===field[designProperties.VALUE];});if(index!==-1){var fieldEditStatus=editArray[index];if(fieldEditStatus.editableuntill.length>0){var statusArray=[];filterStatus.map(function(item1){var foundIndex=fieldEditStatus.editableuntill.findIndex(function(x){return x===item1.ntransactionstatus;});if(foundIndex!==-1){statusArray.push({label:item1.stransdisplaystatus,value:item1.ntransactionstatus,item:item1});}});selectedRecord[formcode][field[designProperties.VALUE]]=statusArray;dataResult[formcode].push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});}else{dataResult[formcode].push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});}}}});});}else{Object.keys(designData).map(function(formcode){dataResult[formcode]=[];selectedRecord[formcode]={};var editArray=designData[formcode][\"sampleeditable\"]||[];designData.sampletemplatefields.map(function(field){if(!Array.isArray(designData[formcode])){var index=editArray.findIndex(function(x){return x.label===field[designProperties.VALUE];});if(index!==-1){var fieldEditStatus=editArray[index];if(fieldEditStatus.editableuntill.length>0){var statusArray=[];filterStatus.map(function(item1){var foundIndex=fieldEditStatus.editableuntill.findIndex(function(x){return x===item1.ntransactionstatus;});if(foundIndex!==-1){statusArray.push({label:item1.stransdisplaystatus,value:item1.ntransactionstatus,item:item1});}});selectedRecord[formcode][field[designProperties.VALUE]]=statusArray;dataResult[formcode].push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});}else{dataResult[formcode].push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});}}}});});}}// console.log(\"selectedRecord:\", selectedRecord);\ndispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,editFieldDesignData:designData,//response[0].data.jsondataobj,\n//approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[1].data :undefined,\neditFieldDataResult:dataResult,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolCode:inputParam.ncontrolcode,selectedRecord:selectedRecord}});}).catch(function(error){//console.log(\"error:\", error);\ndispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function auditFieldConfigService(inputParam){return function(dispatch){var fieldService=rsapi.post('designtemplatemapping/getMappedFieldProps',{designtemplatemapping:inputParam.inputData.designtemplatemapping,userinfo:inputParam.inputData.userinfo});var urlArray=[fieldService];if(inputParam.inputData[\"napprovalconfigcode\"]){var regSubTypeVersionService=rsapi.post(\"registrationsubtype/getApprovedVersion\",{napprovalconfigcode:inputParam.inputData.napprovalconfigcode});urlArray.push(regSubTypeVersionService);}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var dataResult={};var designData=response[0].data.jsondataobj||{};console.log(\"design:\",designData,inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode);if(inputParam[\"TemplateType\"]===TemplateType.Masters){// Object.keys(designData).map(formcode => {\ndataResult=[];designData.mastertemplatefields.map(function(field){return dataResult.push({label:field[designProperties.VALUE],griditem:designData.griditem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,gridmoreitem:designData.gridmoreitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});// })                   \n}else{if(inputParam.operation===\"configuresubsampleaudit\"){Object.keys(designData).map(function(formcode){dataResult[formcode]=[];designData.subsampletemplatefields.map(function(field){return!Array.isArray(designData[formcode])&&dataResult[formcode].push({label:field[designProperties.VALUE],subsamplelistitem:designData[formcode].subsamplelistitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});});}else{//designData[formcode].sampleauditfields ?  \"\" : designData[formcode].sampleauditfields =[];\nconsole.log();Object.keys(designData).map(function(formcode){dataResult[formcode]=[];designData.sampletemplatefields.map(function(field){return!Array.isArray(designData[formcode])&&dataResult[formcode].push({label:field[designProperties.VALUE],sampleauditfields:designData[formcode].sampleauditfields.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,sampleauditeditfields:designData[formcode].sampleauditeditfields.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});});}}// console.log(\"response[1].data:\", response[1].data);\ndispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,auditFieldDesignData:designData,//response[0].data.jsondataobj,\napprovedRegSubTypeVersion:inputParam.inputData[\"napprovalconfigcode\"]?response[1].data:undefined,auditFieldDataResult:dataResult,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolCode:inputParam.ncontrolcode}});}).catch(function(error){console.log(\"error:\",error);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/DesignTemplateMappingAction.js"],"names":["rsapi","DEFAULT_RETURN","sortData","constructOptionList","rearrangeDateFormat","toast","Axios","initRequest","intl","designProperties","TemplateType","getDesignTemplateMappingDetail","designtemplatemapping","userInfo","masterData","dispatch","post","ndesigntemplatemappingcode","nsampletypecode","nregtypecode","nregsubtypecode","then","response","data","type","payload","loading","catch","error","status","formatMessage","id","message","warn","getDesignTemplateMappingComboService","param","screenName","operation","realSampleValue","realRegTypeValue","realRegSubTypeValue","ncontrolCode","controlId","moduleTypeArray","isValid","designtemplatemappingService","userinfo","urlArray","all","selectedRecord","nnewmodule","designtemplatemappingMap","DesignTemplateMapping","undefined","designtemplatemappingList","get","SubSampleTemplate","subSampleTemplateList","qualisModuleMap","DT_QualisModule","qualisModuleList","testListFields","TestListFields","jsondata","openModal","designTemplateQualisModule","reloadDesignTemplateMapping","inputParam","inputData","responseData","showFilter","getTMPFilterRegType","getTMPFilterRegSubType","getTMPFilterSubmit","listdesigntemplatemapping","getMappedFieldProps","fieldService","regSubTypeVersionService","napprovalconfigcode","push","dataResult","designData","jsondataobj","Masters","mastertemplatefields","map","field","label","VALUE","griditem","find","val","gridmoreitem","realData","Object","keys","formcode","subsampletemplatefields","Array","isArray","subsamplelistitem","sampletemplatefields","sampledisplayfields","samplelistitem","samplelistmoreitems","samplegriditem","samplegridmoreitem","approvedRegSubTypeVersion","ncontrolcode","combinationUniqueConfigService","dataList","dataListCount","dataListSubSample","dataListCountSubSample","mastercombinationunique","item","index","samplecombinationunique","subsamplecombinationunique","editFieldConfigService","filterStatusService","nformcode","filterStatus","list","filter","editablestatus","editArray","findIndex","x","fieldEditStatus","editableuntill","length","statusArray","item1","foundIndex","ntransactionstatus","stransdisplaystatus","value","editFieldDesignData","editFieldDataResult","auditFieldConfigService","console","log","sampleauditfields","sampleauditeditfields","auditFieldDesignData","auditFieldDataResult"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { sortData, constructOptionList, rearrangeDateFormat } from '../components/CommonScript'\r\nimport { toast } from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\nimport { designProperties , TemplateType} from '../components/Enumeration';\r\n\r\nexport function getDesignTemplateMappingDetail(designtemplatemapping, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n\r\n        return rsapi.post(\"designtemplatemapping/getDesignTemplateMapping\", {\r\n            ndesigntemplatemappingcode: designtemplatemapping.ndesigntemplatemappingcode,\r\n            nsampletypecode: designtemplatemapping.nsampletypecode,\r\n            nregtypecode: designtemplatemapping.nregtypecode,\r\n            nregsubtypecode: designtemplatemapping.nregsubtypecode,\r\n            \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { masterData, loading: false } });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n\r\n                    toast.warn(intl.formatMessage({ id: error.response }));\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getDesignTemplateMappingComboService(param) {\r\n    return function (dispatch) {\r\n\r\n        const screenName =  param.screenName;\r\n        const operation= param.operation;\r\n        const userInfo = param.userInfo;\r\n        const nsampletypecode = param.realSampleValue;\r\n        const nregtypecode = param.realRegTypeValue;\r\n        const nregsubtypecode = param.realRegSubTypeValue;\r\n        const ncontrolCode = param.controlId;\r\n        const moduleTypeArray= param.moduleTypeArray;\r\n        //if (//(operation === \"create\") && (nsampletypecode != -1) && (nregtypecode != -1) && (nregsubtypecode != -1)) {\r\n            \r\n        let isValid = true;\r\n        if (nsampletypecode !== 4){\r\n           if((nsampletypecode != -1) && (nregtypecode != -1) && (nregsubtypecode != -1))\r\n           {\r\n             isValid = true;\r\n           }\r\n           else{\r\n               isValid = false;\r\n           }\r\n        }\r\n        \r\n        if(isValid){\r\n            const designtemplatemappingService = rsapi.post(\"designtemplatemapping/getDynamicPreRegDesign\", { userinfo: userInfo, nsampletypecode, nregtypecode, nregsubtypecode });\r\n            let urlArray = [designtemplatemappingService];\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    let selectedRecord = {nnewmodule:moduleTypeArray[0]};\r\n                    let designtemplatemappingMap = constructOptionList(response[0].data.DesignTemplateMapping || [], \"nreactregtemplatecode\",\r\n                        \"sregtemplatename\", undefined, undefined, true);\r\n\r\n                    const designtemplatemappingList = designtemplatemappingMap.get(\"OptionList\");\r\n                    designtemplatemappingMap = constructOptionList(response[0].data.SubSampleTemplate || [], \"nreactregtemplatecode\",\r\n                        \"sregtemplatename\", undefined, undefined, true);\r\n\r\n                    const subSampleTemplateList = designtemplatemappingMap.get(\"OptionList\");\r\n\r\n                    const qualisModuleMap = constructOptionList(response[0].data.DT_QualisModule || [], \"nmodulecode\",\r\n                                            \"sdisplayname\", undefined, undefined, true);\r\n\r\n                    const qualisModuleList = qualisModuleMap.get(\"OptionList\");\r\n               \r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n\r\n                            designtemplatemappingList,\r\n                            subSampleTemplateList,\r\n                            testListFields: response[0].data.TestListFields.jsondata,\r\n                            operation, screenName, selectedRecord, openModal: true,\r\n                            ncontrolCode, loading: false,\r\n                            designTemplateQualisModule:qualisModuleList\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({ id: error.message }));\r\n                    }\r\n                    else {\r\n\r\n                        toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTALLVALUESINFILTER\" }));\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nexport function reloadDesignTemplateMapping(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"designtemplatemapping/getDesignTemplateMapping\", { ...inputParam.inputData })\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                let masterData = {\r\n                    ...inputParam.masterData,\r\n                    ...responseData,\r\n                }\r\n                //if (inputParam.searchRef !== undefined && inputParam.searchRef.current !== null) {\r\n                //    inputParam.searchRef.current.value = \"\";\r\n                    masterData['searchedData'] = undefined\r\n                //}\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTMPFilterRegType(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"designtemplatemapping/getTemplateRegType\", inputParam.inputData)\r\n            .then(response => {\r\n                let masterData = { ...inputParam.masterData, ...response.data }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTMPFilterRegSubType(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"designtemplatemapping/getTemplateRegSubType\", inputParam.inputData)\r\n            .then(response => {\r\n                let masterData = { ...inputParam.masterData, ...response.data }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTMPFilterSubmit(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"designtemplatemapping/getFilterSubmit\", inputParam.inputData)\r\n            .then(response => {\r\n                let masterData = { ...inputParam.masterData, ...response.data }\r\n                let listdesigntemplatemapping = sortData(response.data.DesignTemplateMapping);\r\n                masterData = { ...masterData, listdesigntemplatemapping }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function getMappedFieldProps(inputParam) {\r\n    return function (dispatch) {\r\n        const fieldService = rsapi.post('designtemplatemapping/getMappedFieldProps', \r\n                                        {designtemplatemapping:inputParam.inputData.designtemplatemapping,\r\n                                        userinfo:inputParam.inputData.userinfo});\r\n        let urlArray = [fieldService];\r\n        \r\n        if (inputParam.inputData[\"napprovalconfigcode\"]){\r\n            const regSubTypeVersionService = rsapi.post(\"registrationsubtype/getApprovedVersion\", \r\n                                                        { napprovalconfigcode:inputParam.inputData.napprovalconfigcode });\r\n        \r\n            urlArray.push(regSubTypeVersionService);\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let dataResult = {};\r\n                let designData =  response[0].data.jsondataobj || {} ;\r\n                //console.log(\"design:\", designData);\r\n                \r\n                if (inputParam[\"TemplateType\"] ===  TemplateType.Masters){\r\n                   // Object.keys(designData).map(formcode => {\r\n                        dataResult = [];                       \r\n                            designData.mastertemplatefields.map(field =>                              \r\n                                dataResult.push({\r\n                                    label: field[designProperties.VALUE],\r\n                                    griditem: designData.griditem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    gridmoreitem: designData.gridmoreitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    realData : field\r\n                                })\r\n                            )                           \r\n                   // })                   \r\n                } \r\n                else\r\n                {\r\n                   // const regSubTypeVersionData = response[1].data;\r\n                    //if(regSubTypeVersionData &&  regSubTypeVersionData.jsondata.nneedsubsample === true){\r\n                    if(inputParam.operation === \"configuresubsample\"){\r\n                        Object.keys(designData).map(formcode => {         \r\n                            dataResult[formcode] = [];\r\n                            designData.subsampletemplatefields.map(field =>\r\n                                !Array.isArray(designData[formcode])&&\r\n                                dataResult[formcode].push({\r\n                                    label: field[designProperties.VALUE],\r\n                                    subsamplelistitem: designData[formcode].subsamplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined ,\r\n                                    realData : field\r\n                                })\r\n                            )                              \r\n                        })\r\n                    }\r\n                    else\r\n                    {\r\n                        Object.keys(designData).map(formcode => {         \r\n                            dataResult[formcode] = [];\r\n                            designData.sampletemplatefields.map(field =>\r\n                                !Array.isArray(designData[formcode])&&\r\n                                dataResult[formcode].push({\r\n                                    label: field[designProperties.VALUE],\r\n                                    sampledisplayfields: designData[formcode].sampledisplayfields.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                // samplelistitem: designData[formcode].samplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) === undefined ? \"none\" : true,\r\n                                    samplelistitem: designData[formcode].samplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined ,\r\n                                    samplelistmoreitems: designData[formcode].samplelistmoreitems ? designData[formcode].samplelistmoreitems.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined : false,\r\n                                    samplegriditem: designData[formcode].samplegriditem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    samplegridmoreitem: designData[formcode].samplegridmoreitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    realData : field\r\n                                })\r\n                            )                              \r\n                        })\r\n                    }\r\n                }\r\n               // console.log(\"response[1].data:\", response[1].data);\r\n               \r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        designData: designData,//response[0].data.jsondataobj,\r\n                        approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[1].data :undefined,\r\n                        dataResult,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolcode\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                \r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function combinationUniqueConfigService(inputParam) {\r\n    return function (dispatch) {\r\n        const fieldService = rsapi.post('designtemplatemapping/getMappedFieldProps', \r\n                                        {designtemplatemapping:inputParam.inputData.designtemplatemapping,\r\n                                        userinfo:inputParam.inputData.userinfo});\r\n        let urlArray = [fieldService];\r\n        \r\n        if (inputParam.inputData[\"napprovalconfigcode\"]){\r\n            const regSubTypeVersionService = rsapi.post(\"registrationsubtype/getApprovedVersion\", \r\n                                                        { napprovalconfigcode:inputParam.inputData.napprovalconfigcode });\r\n        \r\n            urlArray.push(regSubTypeVersionService);\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let dataList = [];\r\n                let dataListCount = [];\r\n                let designData =  response[0].data.jsondataobj || {} ;\r\n\r\n                let dataListSubSample=[]\r\n                let dataListCountSubSample = [];\r\n\r\n                if (inputParam[\"TemplateType\"] ===  TemplateType.Masters){\r\n                    dataList=designData.mastercombinationunique&&[...designData.mastercombinationunique]||[]\r\n                    designData.mastercombinationunique&&designData.mastercombinationunique.map((item,index)=>{dataListCount.push(index)}) \r\n                }else{\r\n                    dataList=designData.samplecombinationunique&&[...designData.samplecombinationunique]||[]\r\n                    designData.samplecombinationunique&&designData.samplecombinationunique.map((item,index)=>{dataListCount.push(index)}) \r\n\r\n                    dataListSubSample=designData.subsamplecombinationunique&&[...designData.subsamplecombinationunique]||[]\r\n                    designData.subsamplecombinationunique&&designData.subsamplecombinationunique.map((item,index)=>{dataListCountSubSample.push(index)}) \r\n                }  \r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        designData: designData,//response[0].data.jsondataobj,\r\n                        approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[1].data :undefined,\r\n                        dataList,dataListCount,dataListSubSample,dataListCountSubSample,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolcode: inputParam.ncontrolcode\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                \r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function editFieldConfigService(inputParam) {\r\n    return function (dispatch) {\r\n        const fieldService = rsapi.post('designtemplatemapping/getMappedFieldProps', \r\n                                        {designtemplatemapping:inputParam.inputData.designtemplatemapping,\r\n                                        userinfo:inputParam.inputData.userinfo});\r\n\r\n        const filterStatusService = rsapi.post('registration/getRegistrationFilterStatus', \r\n                                        {   nregtypecode:inputParam.inputData.nregtypecode,\r\n                                            nregsubtypecode:inputParam.inputData.nregsubtypecode,\r\n                                            userinfo:{...inputParam.inputData.userinfo, nformcode:43}});\r\n        let urlArray = [fieldService, filterStatusService];\r\n      \r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let dataResult = {};\r\n                let designData =  response[0].data.jsondataobj || {} ;\r\n                let filterStatus = response[1].data || [];\r\n             \r\n                const list = filterStatus.filter(item => item[\"ntransactionstatus\"] !== 0)\r\n                filterStatus = list;  \r\n                \r\n                let selectedRecord = {};\r\n                if (inputParam[\"TemplateType\"] ===  TemplateType.Masters){\r\n                        dataResult = [];                       \r\n                        designData.mastertemplatefields.map(field =>                              \r\n                            dataResult.push({label: field[designProperties.VALUE], editablestatus: filterStatus,   realData : field })\r\n                        )                           \r\n                 } \r\n                else\r\n                {                  \r\n                    if(inputParam.operation === \"configuresubsampleedit\"){\r\n                        Object.keys(designData).map(formcode => {         \r\n                            dataResult[formcode] = [];\r\n                            selectedRecord[formcode] = {};\r\n                            const editArray = designData[formcode][\"subsampleeditable\"]  || [];\r\n\r\n                            designData.subsampletemplatefields.map(field =>{\r\n                                if (!Array.isArray(designData[formcode]))\r\n                                {\r\n                                    const index = editArray.findIndex(x => x.label === field[designProperties.VALUE]);\r\n                                    if (index !== -1){\r\n                                        const fieldEditStatus = editArray[index];\r\n                                        if(fieldEditStatus.editableuntill.length > 0){\r\n                                            const statusArray = [];\r\n                                            filterStatus.map(item1=>{  \r\n                                                                        \r\n                                                const foundIndex = fieldEditStatus.editableuntill.findIndex(x => x === item1.ntransactionstatus);\r\n                    \r\n                                                if (foundIndex !== -1){\r\n                                                    statusArray.push({label:item1.stransdisplaystatus, value:item1.ntransactionstatus, item:item1});\r\n                                                }                                            \r\n                                            })\r\n                                            selectedRecord[formcode][field[designProperties.VALUE]]= statusArray;\r\n\r\n                                            dataResult[formcode].push({\r\n                                                                        label: field[designProperties.VALUE],\r\n                                                                        editablestatus: filterStatus,\r\n                                                                        realData : field\r\n                                                                    })\r\n                                        }else{\r\n                                            \r\n                                            dataResult[formcode].push({\r\n                                                                        label: field[designProperties.VALUE],\r\n                                                                        editablestatus: filterStatus,\r\n                                                                        realData : field\r\n                                                                    })\r\n                                    }  \r\n                                        \r\n                                    }                              \r\n                                }                           \r\n                            })                       \r\n                                        \r\n                        })\r\n                    }\r\n                    else{\r\n                        Object.keys(designData).map(formcode => {         \r\n                            dataResult[formcode] = [];\r\n                            selectedRecord[formcode] = {};\r\n                            const editArray = designData[formcode][\"sampleeditable\"]  || [];\r\n                       \r\n                            designData.sampletemplatefields.map(field =>{\r\n                                if (!Array.isArray(designData[formcode]))\r\n                                {                                  \r\n\r\n                                    const index = editArray.findIndex(x => x.label === field[designProperties.VALUE]);\r\n                                    if (index !== -1){\r\n                                        const fieldEditStatus = editArray[index];\r\n                                        if(fieldEditStatus.editableuntill.length > 0){\r\n                                            const statusArray = [];\r\n                                            filterStatus.map(item1=>{  \r\n                                                                        \r\n                                                const foundIndex = fieldEditStatus.editableuntill.findIndex(x => x === item1.ntransactionstatus);\r\n                    \r\n                                                if (foundIndex !== -1){\r\n                                                    statusArray.push({label:item1.stransdisplaystatus, value:item1.ntransactionstatus, item:item1});\r\n                                                }                                            \r\n                                            })\r\n                                            selectedRecord[formcode][field[designProperties.VALUE]]= statusArray;\r\n\r\n                                            dataResult[formcode].push({\r\n                                                                        label: field[designProperties.VALUE],\r\n                                                                        editablestatus: filterStatus,\r\n                                                                        realData : field\r\n                                                                    })\r\n                                        }else{\r\n                                            \r\n                                            dataResult[formcode].push({\r\n                                                                        label: field[designProperties.VALUE],\r\n                                                                        editablestatus: filterStatus,\r\n                                                                        realData : field\r\n                                                                    })\r\n                                    }  \r\n                                        \r\n                                    }                               \r\n                                }                           \r\n                            })                       \r\n                                        \r\n                        })\r\n                    }\r\n                }\r\n           \r\n              // console.log(\"selectedRecord:\", selectedRecord);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        editFieldDesignData: designData,//response[0].data.jsondataobj,\r\n                        //approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[1].data :undefined,\r\n                        editFieldDataResult:dataResult,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolcode,\r\n                        selectedRecord\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                //console.log(\"error:\", error);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function auditFieldConfigService(inputParam) {\r\n    return function (dispatch) {\r\n        const fieldService = rsapi.post('designtemplatemapping/getMappedFieldProps', \r\n                                        {designtemplatemapping:inputParam.inputData.designtemplatemapping,\r\n                                        userinfo:inputParam.inputData.userinfo});\r\n        let urlArray = [fieldService];\r\n        \r\n        if (inputParam.inputData[\"napprovalconfigcode\"]){\r\n            const regSubTypeVersionService = rsapi.post(\"registrationsubtype/getApprovedVersion\", \r\n                                                        { napprovalconfigcode:inputParam.inputData.napprovalconfigcode });\r\n        \r\n            urlArray.push(regSubTypeVersionService);\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let dataResult = {};\r\n                let designData =  response[0].data.jsondataobj || {} ;\r\n                console.log(\"design:\", designData, inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode);\r\n                \r\n                if (inputParam[\"TemplateType\"] ===  TemplateType.Masters){\r\n                   // Object.keys(designData).map(formcode => {\r\n                        dataResult = [];                       \r\n                            designData.mastertemplatefields.map(field =>                              \r\n                                dataResult.push({\r\n                                    label: field[designProperties.VALUE],\r\n                                    griditem: designData.griditem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    gridmoreitem: designData.gridmoreitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    realData : field\r\n                                })\r\n                            )                           \r\n                   // })                   \r\n                } \r\n                else\r\n                {\r\n                    if(inputParam.operation === \"configuresubsampleaudit\"){\r\n                        Object.keys(designData).map(formcode => {         \r\n                            dataResult[formcode] = [];\r\n                            designData.subsampletemplatefields.map(field =>\r\n                                !Array.isArray(designData[formcode])&&\r\n                                dataResult[formcode].push({\r\n                                    label: field[designProperties.VALUE],\r\n                                    subsamplelistitem: designData[formcode].subsamplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined ,\r\n                                    realData : field\r\n                                })\r\n                            )                              \r\n                        })\r\n                    }\r\n                    else\r\n                    {\r\n                        //designData[formcode].sampleauditfields ?  \"\" : designData[formcode].sampleauditfields =[];\r\n                        console.log()\r\n                        Object.keys(designData).map(formcode => {         \r\n                            dataResult[formcode] = [];\r\n                            designData.sampletemplatefields.map(field =>\r\n                                !Array.isArray(designData[formcode])&&\r\n                                dataResult[formcode].push({\r\n                                    label: field[designProperties.VALUE],\r\n                                    sampleauditfields: designData[formcode].sampleauditfields.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    sampleauditeditfields: designData[formcode].sampleauditeditfields.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    \r\n                                    realData : field\r\n                                })\r\n                            )                              \r\n                        })\r\n                    }\r\n                }\r\n               // console.log(\"response[1].data:\", response[1].data);\r\n               \r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        auditFieldDesignData: designData,//response[0].data.jsondataobj,\r\n                        approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[1].data :undefined,\r\n                        auditFieldDataResult:dataResult,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolcode\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.log(\"error:\", error);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}