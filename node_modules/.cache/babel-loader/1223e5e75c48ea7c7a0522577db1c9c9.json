{"ast":null,"code":"import _defineProperty from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{toast}from'react-toastify';import{initRequest}from'./LoginAction';import{sortData,constructjsonOptionList,constructOptionList,parentChildComboLoad}from'../components/CommonScript';import{getValidComponent,replaceChildFromChildren}from'../components/droparea/helpers';import{ReactComponents,transactionStatus}from'../components/Enumeration';import Axios from'axios';import{getTreeByProduct}from'./RegistrationAction';export function getReactInputFields(userinfo,operation,respObj){return function(dispatch){dispatch(initRequest(true));var listURL=[];listURL[0]=rsapi.post(\"dynamicpreregdesign/getReactComponents\",{userinfo:userinfo});listURL[1]=rsapi.post(\"dynamicpreregdesign/getReactInputFields\",{userinfo:userinfo});Axios.all(listURL).then(function(response){respObj=respObj?_objectSpread({},respObj):{};dispatch({type:DEFAULT_RETURN,payload:_objectSpread({ReactInputFields:response[1].data,ReactComponents:response[0].data.components,ReactTables:constructOptionList(response[0].data.tables,'stablename','displayname').get(\"OptionList\"),selectedFieldRecord:{},openModal:false,loading:false,openPortal:true,operation:operation},respObj)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function selectRegistrationTemplate(template,masterData,userinfo){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"dynamicpreregdesign/getRegistrationTemplateById\",{nreactregtemplatecode:template.nreactregtemplatecode,userinfo:userinfo}).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},masterData),{},{selectedTemplate:response.data}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getRegistrationTemplate(selectedSampleType,masterData,userinfo){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"dynamicpreregdesign/getDynamicPreRegDesign\",{nsampletypecode:selectedSampleType.value,userinfo:userinfo}).then(function(response){masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{searchedData:undefined});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,realSampleType:[{\"label\":\"IDS_SAMPLETYPE\",\"value\":selectedSampleType.label,\"item\":selectedSampleType}],loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getEditRegTemplate(masterData,userinfo,editId){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"dynamicpreregdesign/getRegistrationTemplateById\",{nreactregtemplatecode:masterData.selectedTemplate.nreactregtemplatecode,userinfo:userinfo}).then(function(response){if(response.data.ntransactionstatus==transactionStatus.DRAFT){var jsonData=response.data.jsondata;sortData(masterData);var respObj={masterData:masterData,ncontrolcode:editId,openPortal:true,loading:false,openModal:false,design:jsonData,selectedRecord:{templateName:response.data.sregtemplatename}};// dispatch({\n//     type: DEFAULT_RETURN,\n//     payload: {\n//         masterData,\n//         ncontrolcode: editId,\n//         // openPortal: true,\n//         // loading: false,\n//         design: jsonData,\n//         selectedRecord: { templateName: response.data.sregtemplatename }\n//     }\n// })\ndispatch(getReactInputFields(userinfo,\"update\",respObj));}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterStatus:\"IDS_SELECTDRAFTRECORD\"}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getJsonValue(PGjsonData){if(Array.isArray(PGjsonData)){var JSONData=[];PGjsonData.map(function(data){JSONData.push(JSON.parse(data.jsondata));});return JSONData;}else{return JSON.parse(PGjsonData);}}export function getTableColumns(design,selectedFieldRecord,stablename,userinfo,path,columnInfo,componentData,updateComponents){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"dynamicpreregdesign/getTableColumns\",{stablename:stablename,userinfo:userinfo}).then(function(response){columnInfo=columnInfo||{};var staicColumns=response.data.jstaticcolumns||[];var dynamicColumns=response.data.jdynamiccolumns||[];var multilingualColumns=response.data.jmultilingualcolumn||[];var numericColumns=response.data.jnumericcolumns||[];var primaryKeyName=response.data.sprimarykeyname;columnInfo=_objectSpread(_objectSpread({},columnInfo),{},_defineProperty({},stablename,{staicColumns:staicColumns,dynamicColumns:dynamicColumns,multilingualColumns:multilingualColumns,numericColumns:numericColumns,primaryKeyName:primaryKeyName}));var defaultColumn={};var comboData=[];staicColumns.map(function(item){comboData.push({label:item.displayname[userinfo.slanguagetypecode],value:item.columnname,item:item});if(item.default){defaultColumn={label:item.displayname[userinfo.slanguagetypecode],value:item.columnname,item:item};}});dynamicColumns.map(function(item){comboData.push({label:item.displayname[userinfo.slanguagetypecode],value:item.columnname,item:item});if(item.default){defaultColumn={label:item.displayname[userinfo.slanguagetypecode],value:item.columnname,item:item};}});multilingualColumns.map(function(item){comboData.push({label:item.displayname[userinfo.slanguagetypecode],value:item.columnname,item:item});if(item.default){defaultColumn={label:item.displayname[userinfo.slanguagetypecode],value:item.columnname,item:item};}});if(updateComponents){componentData=componentData||{};selectedFieldRecord=_objectSpread(_objectSpread({},selectedFieldRecord),{},{column:defaultColumn,displaymember:defaultColumn.value,valuemember:primaryKeyName});design=replaceChildFromChildren(design,path,selectedFieldRecord);if(selectedFieldRecord.componentcode!==ReactComponents.COMBO){var validComponents=getValidComponent(selectedFieldRecord,componentData.components,columnInfo);componentData=_objectSpread(_objectSpread({},componentData),{},{validComponents:validComponents});}}else if(componentData===undefined){componentData=componentData||{};selectedFieldRecord=_objectSpread(_objectSpread({},selectedFieldRecord),{},{column:defaultColumn,displaymember:defaultColumn.value,valuemember:primaryKeyName});design=replaceChildFromChildren(design,path,selectedFieldRecord);if(selectedFieldRecord.componentcode!==ReactComponents.COMBO){var _validComponents=getValidComponent(selectedFieldRecord,componentData.components,columnInfo);componentData=_objectSpread(_objectSpread({},componentData),{},{validComponents:_validComponents});}}else{var _validComponents2=getValidComponent(selectedFieldRecord,componentData.components,columnInfo);componentData=_objectSpread(_objectSpread({},componentData),{},{validComponents:_validComponents2});}columnInfo=_objectSpread(_objectSpread({},columnInfo),{},_defineProperty({},stablename,_objectSpread(_objectSpread({},columnInfo[stablename]),{},{tableColumn:comboData})));dispatch({type:DEFAULT_RETURN,payload:_objectSpread({loading:false,design:design,selectedFieldRecord:selectedFieldRecord,tableColumn:comboData,columnInfo:columnInfo,primaryKeyName:primaryKeyName},componentData)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getPreviewTemplate(masterData,userinfo,editId,columnList,selectedRecord,childColumnList,comboComponents,withoutCombocomponent,openPortal,openModal,mapOfFilterRegData,preview){return function(dispatch){dispatch(initRequest(true));var timeZoneService=rsapi.post(\"timezone/getTimeZone\");var actualService=rsapi.post(\"dynamicpreregdesign/getComboValues\",{parentcolumnlist:columnList,childcolumnlist:childColumnList,userinfo:userinfo});Axios.all([timeZoneService,actualService]).then(function(response){var timeZoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,true);var timeZoneList=timeZoneMap.get(\"OptionList\");var defaultTimeZone={label:userinfo.stimezoneid,value:userinfo.ntimezonecode};var newcomboData=parentChildComboLoad(columnList,response[1].data,selectedRecord,childColumnList,withoutCombocomponent);sortData(masterData);if(preview){dispatch({type:DEFAULT_RETURN,payload:{timeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,masterData:masterData,ncontrolcode:editId,openModal:openModal,loading:false,comboData:newcomboData.comboData,selectedRecord:newcomboData.selectedRecord,comboComponents:comboComponents,withoutCombocomponent:withoutCombocomponent,openPortal:openPortal}});}else{var ProductCategory=comboComponents.filter(function(x){return x.name==='Product Category';});if(ProductCategory.length>0){var nproductcatcode=newcomboData.selectedRecord[ProductCategory[0].label]&&newcomboData.selectedRecord[ProductCategory[0].label].value;var ncategorybasedFlow=newcomboData.selectedRecord[ProductCategory[0].label]&&newcomboData.selectedRecord[ProductCategory[0].label]['item']['ncategorybasedflow'];if(ncategorybasedFlow!==undefined){if(ncategorybasedFlow===3){}else{var Product=comboComponents.filter(function(x){return x.name==='Product';});if(Product.length>0){var nproductcode=newcomboData.selectedRecord[Product[0].label]&&newcomboData.selectedRecord[Product[0].label].value;mapOfFilterRegData['nproductcode']=nproductcode!==undefined?nproductcode:-1;mapOfFilterRegData['nproductcatcode']=nproductcatcode;var inputParam={timeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,masterData:masterData,ncontrolcode:editId,openModal:openModal,comboComponents:comboComponents,withoutCombocomponent:withoutCombocomponent,openPortal:openPortal};dispatch(getTreeByProduct(mapOfFilterRegData,newcomboData.selectedRecord,newcomboData.comboData,inputParam));}}}else{dispatch({type:DEFAULT_RETURN,payload:{timeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,masterData:masterData,ncontrolcode:editId,openModal:openModal,loading:false,comboData:newcomboData.comboData,selectedRecord:newcomboData.selectedRecord,comboComponents:comboComponents,withoutCombocomponent:withoutCombocomponent,openPortal:openPortal}});}}else{dispatch({type:DEFAULT_RETURN,payload:{timeZoneList:timeZoneList,defaultTimeZone:defaultTimeZone,masterData:masterData,ncontrolcode:editId,openModal:openModal,loading:false,comboData:newcomboData.comboData,selectedRecord:newcomboData.selectedRecord,comboComponents:comboComponents,withoutCombocomponent:withoutCombocomponent,openPortal:openPortal}});}}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getChildValues(inputParem,userinfo,selectedRecord,comboData,parentcolumnlist,childcolumnlist,withoutCombocomponent,parentListWithReadonly,productCategory,product,mapOfRegFilterData){return function(dispatch){var _rsapi$post;dispatch(initRequest(true));rsapi.post('dynamicpreregdesign/getChildValues',(_rsapi$post={child:inputParem.child,parentdata:inputParem.item,parentsource:inputParem.source},_defineProperty(_rsapi$post,inputParem.primarykeyField,inputParem.value),_defineProperty(_rsapi$post,\"valuemember\",inputParem.primarykeyField),_defineProperty(_rsapi$post,\"childcolumnlist\",childcolumnlist),_defineProperty(_rsapi$post,\"userinfo\",userinfo),_defineProperty(_rsapi$post,\"parentcolumnlist\",parentcolumnlist),_rsapi$post)).then(function(response){var returnObj=_objectSpread(_objectSpread({},comboData),response.data);returnObj=parentChildComboLoad(parentListWithReadonly,returnObj,selectedRecord,childcolumnlist,withoutCombocomponent,inputParem.item);selectedRecord=_objectSpread(_objectSpread({},selectedRecord),returnObj.selectedRecord);if(productCategory){// const nproductcatcode = selectedRecord['Product Category'] && selectedRecord['Product Category'].value\ndispatch(getTreeByProduct(mapOfRegFilterData,selectedRecord,_objectSpread({},returnObj.comboData)));}else if(product){// if (mapOfRegFilterData.nproductcode === -1) {\nif(selectedRecord[\"Product\"]){mapOfRegFilterData[\"nproductcode\"]=selectedRecord[\"Product\"]?selectedRecord[\"Product\"].value:-1;dispatch(getTreeByProduct(mapOfRegFilterData,selectedRecord,_objectSpread({},returnObj.comboData)));}else{selectedRecord[\"nallottedspeccode\"]=\"\";selectedRecord[\"sversion\"]=\"\";dispatch({type:DEFAULT_RETURN,payload:{loading:false,comboData:_objectSpread({},returnObj.comboData),selectedRecord:selectedRecord,AgaramTree:[],ActiveKey:[],FocusKey:[],OpenNodes:[],Test:[],SelectedTest:[],selectedSpec:{},Component:[],selectComponent:{},selectedComponent:{},Specification:[]}});// }\n}}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false,comboData:_objectSpread({},returnObj.comboData),selectedRecord:selectedRecord}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/actions/DynamicPreRegDesignAction.js"],"names":["rsapi","DEFAULT_RETURN","toast","initRequest","sortData","constructjsonOptionList","constructOptionList","parentChildComboLoad","getValidComponent","replaceChildFromChildren","ReactComponents","transactionStatus","Axios","getTreeByProduct","getReactInputFields","userinfo","operation","respObj","dispatch","listURL","post","all","then","response","type","payload","ReactInputFields","data","components","ReactTables","tables","get","selectedFieldRecord","openModal","loading","openPortal","catch","error","status","message","warn","selectRegistrationTemplate","template","masterData","nreactregtemplatecode","selectedTemplate","getRegistrationTemplate","selectedSampleType","nsampletypecode","value","searchedData","undefined","realSampleType","label","getEditRegTemplate","editId","ntransactionstatus","DRAFT","jsonData","jsondata","ncontrolcode","design","selectedRecord","templateName","sregtemplatename","masterStatus","getJsonValue","PGjsonData","Array","isArray","JSONData","map","push","JSON","parse","getTableColumns","stablename","path","columnInfo","componentData","updateComponents","staicColumns","jstaticcolumns","dynamicColumns","jdynamiccolumns","multilingualColumns","jmultilingualcolumn","numericColumns","jnumericcolumns","primaryKeyName","sprimarykeyname","defaultColumn","comboData","item","displayname","slanguagetypecode","columnname","default","column","displaymember","valuemember","componentcode","COMBO","validComponents","tableColumn","getPreviewTemplate","columnList","childColumnList","comboComponents","withoutCombocomponent","mapOfFilterRegData","preview","timeZoneService","actualService","parentcolumnlist","childcolumnlist","timeZoneMap","timeZoneList","defaultTimeZone","stimezoneid","ntimezonecode","newcomboData","ProductCategory","filter","x","name","length","nproductcatcode","ncategorybasedFlow","Product","nproductcode","inputParam","getChildValues","inputParem","parentListWithReadonly","productCategory","product","mapOfRegFilterData","child","parentdata","parentsource","source","primarykeyField","returnObj","AgaramTree","ActiveKey","FocusKey","OpenNodes","Test","SelectedTest","selectedSpec","Component","selectComponent","selectedComponent","Specification"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { toast } from 'react-toastify';\r\nimport { initRequest } from './LoginAction';\r\nimport { sortData, constructjsonOptionList, constructOptionList, parentChildComboLoad } from '../components/CommonScript';\r\nimport { getValidComponent, replaceChildFromChildren } from '../components/droparea/helpers';\r\nimport { ReactComponents, transactionStatus } from '../components/Enumeration';\r\nimport Axios from 'axios';\r\nimport { getTreeByProduct } from './RegistrationAction';\r\n\r\nexport function getReactInputFields(userinfo, operation, respObj) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const listURL = [];\r\n        listURL[0] = rsapi.post(\"dynamicpreregdesign/getReactComponents\", { userinfo })\r\n        listURL[1] = rsapi.post(\"dynamicpreregdesign/getReactInputFields\", { userinfo })\r\n        Axios.all(listURL)\r\n            .then(response => {\r\n                respObj = respObj ? { ...respObj } : {}\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ReactInputFields: response[1].data,\r\n                        ReactComponents: response[0].data.components,\r\n                        ReactTables: constructOptionList(response[0].data.tables, 'stablename', 'displayname').get(\"OptionList\"),\r\n                        selectedFieldRecord: {},\r\n                        openModal: false,\r\n                        loading: false,\r\n                        openPortal: true,\r\n                        operation,\r\n                        ...respObj\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function selectRegistrationTemplate(template, masterData, userinfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"dynamicpreregdesign/getRegistrationTemplateById\", {\r\n            nreactregtemplatecode: template.nreactregtemplatecode,\r\n            userinfo\r\n        })\r\n            .then(response => {\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: { masterData: { ...masterData, selectedTemplate: response.data }, loading: false }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getRegistrationTemplate(selectedSampleType, masterData, userinfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"dynamicpreregdesign/getDynamicPreRegDesign\", {\r\n            nsampletypecode: selectedSampleType.value,\r\n            userinfo\r\n        })\r\n            .then(response => {\r\n                masterData = { ...masterData, ...response.data, searchedData: undefined }\r\n                sortData(masterData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        realSampleType: [{\r\n                            \"label\": \"IDS_SAMPLETYPE\",\r\n                            \"value\": selectedSampleType.label,\r\n                            \"item\": selectedSampleType\r\n                        }],\r\n                        loading: false,\r\n\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getEditRegTemplate(masterData, userinfo, editId) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"dynamicpreregdesign/getRegistrationTemplateById\", {\r\n            nreactregtemplatecode: masterData.selectedTemplate.nreactregtemplatecode,\r\n            userinfo\r\n        })\r\n            .then(response => {\r\n                if (response.data.ntransactionstatus == transactionStatus.DRAFT) {\r\n                    let jsonData = response.data.jsondata;\r\n                    sortData(masterData)\r\n\r\n                    const respObj = {\r\n                        masterData,\r\n                        ncontrolcode: editId,\r\n                        openPortal: true,\r\n                        loading: false,\r\n                        openModal: false,\r\n                        design: jsonData,\r\n                        selectedRecord: { templateName: response.data.sregtemplatename }\r\n                    }\r\n                    // dispatch({\r\n                    //     type: DEFAULT_RETURN,\r\n                    //     payload: {\r\n                    //         masterData,\r\n                    //         ncontrolcode: editId,\r\n                    //         // openPortal: true,\r\n                    //         // loading: false,\r\n                    //         design: jsonData,\r\n                    //         selectedRecord: { templateName: response.data.sregtemplatename }\r\n                    //     }\r\n                    // })\r\n                    dispatch(getReactInputFields(userinfo, \"update\", respObj))\r\n                } else {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, masterStatus: \"IDS_SELECTDRAFTRECORD\" } })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getJsonValue(PGjsonData) {\r\n\r\n    if (Array.isArray(PGjsonData)) {\r\n        let JSONData = [];\r\n        PGjsonData.map(data => {\r\n            JSONData.push(JSON.parse(data.jsondata))\r\n        })\r\n        return JSONData;\r\n    } else {\r\n        return JSON.parse(PGjsonData);\r\n    }\r\n\r\n}\r\nexport function getTableColumns(design, selectedFieldRecord, stablename, userinfo, path, columnInfo, componentData, updateComponents) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"dynamicpreregdesign/getTableColumns\", { stablename, userinfo })\r\n            .then(response => {\r\n                columnInfo = columnInfo || {}\r\n                const staicColumns = response.data.jstaticcolumns || []\r\n                const dynamicColumns = response.data.jdynamiccolumns || []\r\n                const multilingualColumns = response.data.jmultilingualcolumn || []\r\n                const numericColumns = response.data.jnumericcolumns || []\r\n                const primaryKeyName = response.data.sprimarykeyname\r\n                columnInfo = {\r\n                    ...columnInfo,\r\n                    [stablename]: {\r\n                        staicColumns,\r\n                        dynamicColumns,\r\n                        multilingualColumns,\r\n                        numericColumns,\r\n                        primaryKeyName\r\n                    }\r\n                }\r\n                let defaultColumn = {};\r\n                let comboData = []\r\n                staicColumns.map(item => {\r\n                    comboData.push({\r\n                        label: item.displayname[userinfo.slanguagetypecode],\r\n                        value: item.columnname,\r\n                        item\r\n                    })\r\n                    if (item.default) {\r\n                        defaultColumn = {\r\n                            label: item.displayname[userinfo.slanguagetypecode],\r\n                            value: item.columnname,\r\n                            item\r\n                        }\r\n                    }\r\n                })\r\n                dynamicColumns.map(item => {\r\n                    comboData.push({\r\n                        label: item.displayname[userinfo.slanguagetypecode],\r\n                        value: item.columnname,\r\n                        item\r\n                    })\r\n                    if (item.default) {\r\n                        defaultColumn = {\r\n                            label: item.displayname[userinfo.slanguagetypecode],\r\n                            value: item.columnname,\r\n                            item\r\n                        }\r\n                    }\r\n                })\r\n                multilingualColumns.map(item => {\r\n                    comboData.push({\r\n                        label: item.displayname[userinfo.slanguagetypecode],\r\n                        value: item.columnname,\r\n                        item\r\n                    })\r\n                    if (item.default) {\r\n                        defaultColumn = {\r\n                            label: item.displayname[userinfo.slanguagetypecode],\r\n                            value: item.columnname,\r\n                            item\r\n                        }\r\n                    }\r\n                })\r\n                if (updateComponents) {\r\n                    componentData = componentData || {}\r\n                    selectedFieldRecord = { ...selectedFieldRecord, column: defaultColumn, displaymember: defaultColumn.value, valuemember: primaryKeyName };\r\n                    design = replaceChildFromChildren(design, path, selectedFieldRecord)\r\n                    if (selectedFieldRecord.componentcode !== ReactComponents.COMBO) {\r\n                        let validComponents = getValidComponent(selectedFieldRecord, componentData.components, columnInfo);\r\n                        componentData = { ...componentData, validComponents }\r\n                    }\r\n                } else if (componentData === undefined) {\r\n                    componentData = componentData || {}\r\n                    selectedFieldRecord = { ...selectedFieldRecord, column: defaultColumn, displaymember: defaultColumn.value, valuemember: primaryKeyName };\r\n                    design = replaceChildFromChildren(design, path, selectedFieldRecord)\r\n                    if (selectedFieldRecord.componentcode !== ReactComponents.COMBO) {\r\n                        let validComponents = getValidComponent(selectedFieldRecord, componentData.components, columnInfo);\r\n                        componentData = { ...componentData, validComponents }\r\n                    }\r\n                } else {\r\n                    let validComponents = getValidComponent(selectedFieldRecord, componentData.components, columnInfo);\r\n                    componentData = { ...componentData, validComponents }\r\n                }\r\n                columnInfo = {\r\n                    ...columnInfo,\r\n                    [stablename]: { ...columnInfo[stablename], tableColumn: comboData }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        design,\r\n                        selectedFieldRecord,\r\n                        tableColumn: comboData,\r\n                        columnInfo,\r\n                        primaryKeyName,\r\n                        ...componentData\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getPreviewTemplate(masterData, userinfo,\r\n    editId, columnList, selectedRecord, childColumnList, comboComponents,\r\n    withoutCombocomponent, openPortal, openModal, mapOfFilterRegData, preview) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        const actualService = rsapi.post(\"dynamicpreregdesign/getComboValues\", {\r\n            parentcolumnlist: columnList,\r\n            childcolumnlist: childColumnList,\r\n            userinfo\r\n        })\r\n        Axios.all([timeZoneService, actualService])\r\n            .then(response => {\r\n                const timeZoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", undefined, undefined, true);\r\n                const timeZoneList = timeZoneMap.get(\"OptionList\");\r\n                const defaultTimeZone = { label: userinfo.stimezoneid, value: userinfo.ntimezonecode }\r\n                const newcomboData = parentChildComboLoad(columnList, response[1].data, selectedRecord, childColumnList, withoutCombocomponent)\r\n                sortData(masterData)\r\n                if (preview) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            timeZoneList,\r\n                            defaultTimeZone,\r\n                            masterData,\r\n                            ncontrolcode: editId,\r\n                            openModal,\r\n                            loading: false,\r\n                            comboData: newcomboData.comboData,\r\n                            selectedRecord: newcomboData.selectedRecord,\r\n                            comboComponents,\r\n                            withoutCombocomponent,\r\n                            openPortal\r\n                        }\r\n                    })\r\n                }\r\n                else {\r\n                    const ProductCategory = comboComponents.filter(x => x.name === 'Product Category');\r\n                    if (ProductCategory.length > 0) {\r\n                        const nproductcatcode = newcomboData.selectedRecord[ProductCategory[0].label] &&\r\n                            newcomboData.selectedRecord[ProductCategory[0].label].value\r\n                        const ncategorybasedFlow = newcomboData.selectedRecord[ProductCategory[0].label]\r\n                            && newcomboData.selectedRecord[ProductCategory[0].label]['item']['ncategorybasedflow'];\r\n                        if (ncategorybasedFlow !== undefined) {\r\n                            if (ncategorybasedFlow === 3) {\r\n\r\n                            }\r\n                            else {\r\n                                const Product = comboComponents.filter(x => x.name === 'Product');\r\n                                if (Product.length > 0) {\r\n                                    const nproductcode = newcomboData.selectedRecord[Product[0].label]\r\n                                        && newcomboData.selectedRecord[Product[0].label].value;\r\n\r\n                                    mapOfFilterRegData['nproductcode'] = nproductcode !== undefined ? nproductcode : -1;\r\n                                    mapOfFilterRegData['nproductcatcode'] = nproductcatcode\r\n\r\n                                    const inputParam = {\r\n                                        timeZoneList,\r\n                                        defaultTimeZone,\r\n                                        masterData,\r\n                                        ncontrolcode: editId,\r\n                                        openModal,\r\n                                        comboComponents,\r\n                                        withoutCombocomponent,\r\n                                        openPortal\r\n                                    }\r\n                                    dispatch(getTreeByProduct(mapOfFilterRegData,\r\n                                        newcomboData.selectedRecord,\r\n                                        newcomboData.comboData, inputParam))\r\n                                }\r\n                            }\r\n\r\n                        } else {\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    timeZoneList,\r\n                                    defaultTimeZone,\r\n                                    masterData,\r\n                                    ncontrolcode: editId,\r\n                                    openModal,\r\n                                    loading: false,\r\n                                    comboData: newcomboData.comboData,\r\n                                    selectedRecord: newcomboData.selectedRecord,\r\n                                    comboComponents,\r\n                                    withoutCombocomponent,\r\n                                    openPortal\r\n                                }\r\n                            })\r\n                        }\r\n                    } else {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                timeZoneList,\r\n                                defaultTimeZone,\r\n                                masterData,\r\n                                ncontrolcode: editId,\r\n                                openModal,\r\n                                loading: false,\r\n                                comboData: newcomboData.comboData,\r\n                                selectedRecord: newcomboData.selectedRecord,\r\n                                comboComponents,\r\n                                withoutCombocomponent,\r\n                                openPortal\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getChildValues(inputParem,\r\n    userinfo, selectedRecord, comboData, parentcolumnlist,\r\n    childcolumnlist, withoutCombocomponent, parentListWithReadonly,\r\n    productCategory, product, mapOfRegFilterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post('dynamicpreregdesign/getChildValues', {\r\n            child: inputParem.child,\r\n            parentdata: inputParem.item,\r\n            parentsource: inputParem.source,\r\n            [inputParem.primarykeyField]: inputParem.value,\r\n            valuemember: inputParem.primarykeyField,\r\n            childcolumnlist,\r\n            userinfo,\r\n            parentcolumnlist\r\n        })\r\n            .then(response => {\r\n                let returnObj = { ...comboData, ...response.data }\r\n                returnObj = parentChildComboLoad(parentListWithReadonly, returnObj, selectedRecord, childcolumnlist, withoutCombocomponent, inputParem.item)\r\n                selectedRecord = { ...selectedRecord, ...returnObj.selectedRecord }\r\n                if (productCategory) {\r\n                    // const nproductcatcode = selectedRecord['Product Category'] && selectedRecord['Product Category'].value\r\n                    dispatch(getTreeByProduct(mapOfRegFilterData, selectedRecord, { ...returnObj.comboData }))\r\n                } else if (product) {\r\n                    // if (mapOfRegFilterData.nproductcode === -1) {\r\n                    if (selectedRecord[\"Product\"]) {\r\n                        mapOfRegFilterData[\"nproductcode\"] = selectedRecord[\"Product\"] ? selectedRecord[\"Product\"].value : -1\r\n                        dispatch(getTreeByProduct(mapOfRegFilterData, selectedRecord, { ...returnObj.comboData }))\r\n                    } else {\r\n                        selectedRecord[\"nallottedspeccode\"] = \"\"\r\n                        selectedRecord[\"sversion\"] = \"\"\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false,\r\n                                comboData: { ...returnObj.comboData },\r\n                                selectedRecord,\r\n                                AgaramTree: [],\r\n                                ActiveKey: [],\r\n                                FocusKey: [],\r\n                                OpenNodes: [],\r\n                                Test: [],\r\n                                SelectedTest: [],\r\n                                selectedSpec: {},\r\n                                Component: [],\r\n                                selectComponent: {},\r\n                                selectedComponent: {},\r\n                                Specification: []\r\n                            }\r\n                        })\r\n                        // }\r\n                    }\r\n\r\n\r\n                }\r\n                else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            comboData: { ...returnObj.comboData },\r\n                            selectedRecord\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}