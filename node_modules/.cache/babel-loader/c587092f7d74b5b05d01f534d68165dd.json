{"ast":null,"code":"import { initRequest } from \"./LoginAction\";\nimport rsapi from \"../rsapi\";\nimport { sortData, getComboLabelValue } from \"../components/CommonScript\";\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\nimport { toast } from 'react-toastify';\nimport Axios from \"axios\";\nimport { constructOptionList } from \"../components/CommonScript\";\nimport { intl } from '../components/App';\nimport { attachmentType, transactionStatus } from \"../components/Enumeration\";\nexport function getInstitutionDetail(institution, userInfo, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    return rsapi.post(\"institution/getSelectedInstitutionDetail\", {\n      ninstitutioncode: institution.ninstitutioncode,\n      userinfo: userInfo\n    }).then(response => {\n      masterData = { ...masterData,\n        ...response.data\n      };\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          operation: null,\n          modalName: undefined,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getInstitutionCombo(screenName, operation, primaryKeyName, masterData, userInfo, ncontrolCode) {\n  return function (dispatch) {\n    if (masterData.SelectedInstitutionCategory !== null) {\n      let urlArray = [];\n      const InstitutionCategory = rsapi.post(\"/institution/getInstitutionCategory\", {\n        \"userinfo\": userInfo\n      });\n\n      if (operation === \"create\") {\n        urlArray = [InstitutionCategory];\n      } else {\n        const Institution = rsapi.post(\"/institution/getActiveInstitutionById\", {\n          [primaryKeyName]: masterData.selectedInstitution[primaryKeyName],\n          \"userinfo\": userInfo\n        });\n        urlArray = [InstitutionCategory, Institution];\n      }\n\n      dispatch(initRequest(true));\n      Axios.all(urlArray).then(response => {\n        let selectedRecord = {};\n        const institutioncategoryMap = constructOptionList(response[0].data || [], \"ninstitutioncatcode\", \"sinstitutioncatname\", undefined, undefined, false);\n        const InstitutionCategory = institutioncategoryMap.get(\"OptionList\");\n        selectedRecord = {\n          \"ninstitutioncatcode\": {\n            \"value\": masterData.SelectedInstitutionCategory.ninstitutioncatcode,\n            \"label\": masterData.SelectedInstitutionCategory.sinstitutioncatname\n          }\n        };\n        let institutionCategory = [];\n\n        if (operation === \"update\") {\n          selectedRecord = response[1].data;\n          selectedRecord[\"ninstitutioncatcode\"] = {\n            label: selectedRecord.sinstitutioncatname,\n            value: selectedRecord.ninstitutioncatcode\n          };\n          institutionCategory.push({\n            \"value\": response[0].data[\"ninstitutioncatcode\"],\n            \"label\": response[0].data[\"sinstitutioncatname\"]\n          }); //selectedRecord[\"ninstitutioncatcode\"] = institutionCategory[0];\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            InstitutionCategory,\n            isOpen: true,\n            selectedRecord: selectedRecord,\n            operation: operation,\n            screenName: screenName,\n            openModal: true,\n            ncontrolCode: ncontrolCode,\n            loading: false\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(intl.formatMessage({\n            id: error.message\n          }));\n        } else {\n          toast.warn(intl.formatMessage({\n            id: error.response.data\n          }));\n        }\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_CONFIGINSTITUTIONCATAGORY\"\n      }));\n    }\n  };\n}\nexport const getInstitutionSiteData = methodParam => {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let url = '';\n    let urlArray = [];\n    let selectedRecord = {};\n    const institutionSiteService = rsapi.post(\"institution/getInstitutionSiteCombo\", {\n      userinfo: methodParam.userInfo\n    }); // url = \"/institution/getInstitutionSiteCombo\";\n    // return rsapi.post(url, {\"userinfo\": methodParam.userInfo})\n\n    if (methodParam.operation === \"create\") {\n      urlArray = [institutionSiteService];\n    } else {\n      const url = methodParam.inputParam.classUrl + \"/getActiveInstitutionSiteById\";\n      const institutionSiteById = rsapi.post(url, {\n        \"ninstitutioncode\": methodParam.instItem.ninstitutioncode,\n        [methodParam.primaryKeyField]: methodParam.primaryKeyValue,\n        \"userinfo\": methodParam.userInfo\n      });\n      urlArray = [institutionSiteService, institutionSiteById]; //selectedId = methodParam.primaryKeyValue;\n    }\n\n    Axios.all(urlArray).then(response => {\n      const siteMap = constructOptionList(response[0].data.Site || [], \"nsitecode\", \"ssitename\", undefined, undefined, false);\n      const cityMap = constructOptionList(response[0].data.City || [], \"ncitycode\", \"scityname\", undefined, undefined, false);\n      const countryMap = constructOptionList(response[0].data.Country || [], \"ncountrycode\", \"scountryname\", undefined, undefined, false);\n      const Site = siteMap.get(\"OptionList\");\n      const City = cityMap.get(\"OptionList\");\n      const Country = countryMap.get(\"OptionList\");\n\n      if (methodParam.operation === \"update\") {\n        selectedRecord = response[1].data;\n        selectedRecord[\"ncountrycode\"] = getComboLabelValue(selectedRecord, response[0].data.Country, \"ncountrycode\", \"scountryname\"); // selectedRecord[\"nsitecode\"] = getComboLabelValue(selectedRecord, response[0].data.Site, \n        //     \"nsitecode\", \"ssitename\");\n\n        selectedRecord[\"nsitecode\"] = {\n          \"label\": selectedRecord.ssitename,\n          \"value\": selectedRecord.nlimssitecode\n        };\n        selectedRecord[\"ncitycode\"] = getComboLabelValue(selectedRecord, response[0].data.City, \"ncitycode\", \"scityname\");\n      } else {\n        selectedRecord = methodParam.selectedRecord;\n        selectedRecord[\"nsitecode\"] = siteMap.get(\"DefaultValue\");\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          Site,\n          City,\n          Country,\n          isOpen: true,\n          selectedRecord,\n          operation: methodParam.operation,\n          screenName: methodParam.screenName,\n          openModal: true,\n          ncontrolCode: methodParam.ncontrolCode,\n          instItem: methodParam.instItem,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 417) {\n        toast.info(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const addInstitutionFile = inputParam => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\n      userinfo: inputParam.userInfo\n    })];\n\n    if (inputParam.operation === \"update\") {\n      urlArray.push(rsapi.post(\"/institution/getInstitutionFileById\", {\n        userinfo: inputParam.userInfo,\n        institutionfile: inputParam.selectedRecord\n      }));\n    }\n\n    Axios.all(urlArray).then(response => {\n      const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\n      const linkmaster = linkMap.get(\"OptionList\");\n      let selectedRecord = {};\n      const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\n      let disabled = false;\n      let editObject = {};\n\n      if (inputParam.operation === \"update\") {\n        editObject = response[1].data;\n        let nlinkcode = {};\n        let link = {};\n\n        if (editObject.nattachmenttypecode === attachmentType.LINK) {\n          nlinkcode = {\n            \"label\": editObject.slinkname,\n            \"value\": editObject.nlinkcode\n          };\n          link = {\n            slinkfilename: editObject.sfilename,\n            slinkdescription: editObject.sfiledesc,\n            nlinkdefaultstatus: editObject.ndefaultstatus,\n            sfilesize: '',\n            nfilesize: 0,\n            ndefaultstatus: 4,\n            sfilename: ''\n          };\n        } else {\n          nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\"; //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\n\n          link = {\n            slinkfilename: '',\n            slinkdescription: '',\n            nlinkdefaultstatus: 4,\n            sfilesize: editObject.sfilesize,\n            nfilesize: editObject.nfilesize,\n            ndefaultstatus: editObject.ndefaultstatus,\n            sfilename: editObject.sfilename\n          };\n        }\n\n        selectedRecord = { ...link,\n          ntestfilecode: editObject.ntestfilecode,\n          nattachmenttypecode: editObject.nattachmenttypecode,\n          ...editObject,\n          nlinkcode // disabled: true\n\n        };\n      } else {\n        selectedRecord = {\n          nattachmenttypecode: response[0].data.AttachmentType.length > 0 ? response[0].data.AttachmentType[0].nattachmenttypecode : attachmentType.FTP,\n          nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\",\n          //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\n          disabled\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          [inputParam.modalName]: true,\n          operation: inputParam.operation,\n          screenName: inputParam.screenName,\n          ncontrolCode: inputParam.ncontrolCode,\n          selectedRecord,\n          loading: false,\n          linkMaster: linkmaster,\n          showSaveContinue: false,\n          openModal: true,\n          editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const changeInstitutionCategoryFilter = (inputParam, FilterInstitutionCategory, defaultInstitutionCategory) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"/institution/get\" + inputParam.methodUrl, inputParam.inputData).then(response => {\n      const masterData = response.data;\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          masterData: { ...masterData,\n            FilterInstitutionCategory,\n            defaultInstitutionCategory,\n            SelectedInstitutionCategory: defaultInstitutionCategory\n          }\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      toast.error(error.message);\n    });\n  };\n};","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/InstitutionAction.js"],"names":["initRequest","rsapi","sortData","getComboLabelValue","DEFAULT_RETURN","toast","Axios","constructOptionList","intl","attachmentType","transactionStatus","getInstitutionDetail","institution","userInfo","masterData","dispatch","post","ninstitutioncode","userinfo","then","response","data","type","payload","operation","modalName","undefined","loading","catch","error","status","message","warn","getInstitutionCombo","screenName","primaryKeyName","ncontrolCode","SelectedInstitutionCategory","urlArray","InstitutionCategory","Institution","selectedInstitution","all","selectedRecord","institutioncategoryMap","get","ninstitutioncatcode","sinstitutioncatname","institutionCategory","label","value","push","isOpen","openModal","formatMessage","id","getInstitutionSiteData","methodParam","url","institutionSiteService","inputParam","classUrl","institutionSiteById","instItem","primaryKeyField","primaryKeyValue","siteMap","Site","cityMap","City","countryMap","Country","ssitename","nlimssitecode","info","addInstitutionFile","institutionfile","linkMap","LinkMaster","linkmaster","defaultLink","filter","items","item","ndefaultlink","YES","disabled","editObject","nlinkcode","link","nattachmenttypecode","LINK","slinkname","slinkfilename","sfilename","slinkdescription","sfiledesc","nlinkdefaultstatus","ndefaultstatus","sfilesize","nfilesize","length","ntestfilecode","AttachmentType","FTP","linkMaster","showSaveContinue","editFiles","changeInstitutionCategoryFilter","FilterInstitutionCategory","defaultInstitutionCategory","methodUrl","inputData"],"mappings":"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","sourcesContent":["import { initRequest } from \"./LoginAction\";\r\nimport rsapi from \"../rsapi\";\r\nimport { sortData,getComboLabelValue } from \"../components/CommonScript\";\r\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\r\nimport { toast } from 'react-toastify';\r\nimport Axios from \"axios\";\r\nimport { constructOptionList } from \"../components/CommonScript\";\r\nimport { intl} from '../components/App';\r\nimport { attachmentType,transactionStatus } from \"../components/Enumeration\";\r\n\r\nexport function getInstitutionDetail (institution, userInfo, masterData) {\r\n    return function (dispatch) {   \r\n    dispatch(initRequest(true));\r\n    return rsapi.post(\"institution/getSelectedInstitutionDetail\", {ninstitutioncode:institution.ninstitutioncode, userinfo:userInfo})\r\n   .then(response=>{     \r\n        masterData = {...masterData, ...response.data};       \r\n        sortData(masterData);\r\n        dispatch({type: DEFAULT_RETURN, payload:{masterData, operation:null, modalName:undefined, \r\n             loading:false}});   \r\n   })\r\n   .catch(error=>{\r\n        dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n       if (error.response.status === 500){\r\n           toast.error(error.message);\r\n       } \r\n       else{               \r\n           toast.warn(error.response.data);\r\n       }  \r\n  \r\n   })\r\n}}\r\nexport function getInstitutionCombo(screenName, operation, primaryKeyName, masterData, userInfo, ncontrolCode) {\r\n    return function (dispatch) {\r\n        if (masterData.SelectedInstitutionCategory!==null) {\r\n        let urlArray = [];\r\n        const InstitutionCategory = rsapi.post(\"/institution/getInstitutionCategory\", {\"userinfo\": userInfo});\r\n        if (operation === \"create\") {\r\n            urlArray = [InstitutionCategory];\r\n\r\n        } else {\r\n            const Institution = rsapi.post(\"/institution/getActiveInstitutionById\", {\r\n                [primaryKeyName]: masterData.selectedInstitution[primaryKeyName],\r\n                \"userinfo\": userInfo\r\n            });\r\n            urlArray = [InstitutionCategory,Institution];\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let selectedRecord ={};\r\n                const institutioncategoryMap = constructOptionList(response[0].data || [], \"ninstitutioncatcode\",\r\n                    \"sinstitutioncatname\", undefined, undefined, false);        \r\n\r\n                const InstitutionCategory = institutioncategoryMap.get(\"OptionList\");              \r\n\r\n                 selectedRecord = {\"ninstitutioncatcode\": {\r\n                            \"value\": masterData.SelectedInstitutionCategory.ninstitutioncatcode,\r\n                             \"label\": masterData.SelectedInstitutionCategory.sinstitutioncatname\r\n                         }};                \r\n                let institutionCategory = [];\r\n                if (operation === \"update\") {\r\n                    selectedRecord = response[1].data;\r\n                    selectedRecord[\"ninstitutioncatcode\"] ={label:selectedRecord.sinstitutioncatname,value:selectedRecord.ninstitutioncatcode}\r\n                    institutionCategory.push({\r\n                        \"value\": response[0].data[\"ninstitutioncatcode\"],\r\n                        \"label\": response[0].data[\"sinstitutioncatname\"]\r\n                    });\r\n                    //selectedRecord[\"ninstitutioncatcode\"] = institutionCategory[0];\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        InstitutionCategory,                       \r\n                        isOpen: true,\r\n                        selectedRecord: selectedRecord,\r\n                        operation: operation,\r\n                        screenName: screenName,\r\n                        openModal: true,\r\n                        ncontrolCode: ncontrolCode,\r\n                        loading: false,\r\n                       \r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n        }\r\n        else{\r\n            toast.warn(intl.formatMessage({ id: \"IDS_CONFIGINSTITUTIONCATAGORY\" }));\r\n        }\r\n    }\r\n}\r\n\r\nexport const getInstitutionSiteData = (methodParam) => {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let url = ''\r\n        let urlArray = [];\r\n        let selectedRecord = {};\r\n        const institutionSiteService = rsapi.post(\"institution/getInstitutionSiteCombo\",{userinfo:methodParam.userInfo});\r\n\r\n        // url = \"/institution/getInstitutionSiteCombo\";\r\n\r\n        // return rsapi.post(url, {\"userinfo\": methodParam.userInfo})\r\n        if(methodParam.operation === \"create\"){\r\n            urlArray=[institutionSiteService];\r\n        }else{\r\n            const url = methodParam.inputParam.classUrl+ \"/getActiveInstitutionSiteById\";       \r\n            const institutionSiteById =  rsapi.post(url, {\"ninstitutioncode\":methodParam.instItem.ninstitutioncode, [methodParam.primaryKeyField] :methodParam.primaryKeyValue, \"userinfo\": methodParam.userInfo} );\r\n            urlArray = [institutionSiteService, institutionSiteById];\r\n            //selectedId = methodParam.primaryKeyValue;\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n\r\n                const siteMap = constructOptionList(response[0].data.Site || [], \"nsitecode\",\r\n                    \"ssitename\", undefined, undefined, false);                \r\n\r\n                const cityMap =    constructOptionList(response[0].data.City || [], \"ncitycode\",\r\n                \"scityname\", undefined, undefined, false);\r\n\r\n                const countryMap = constructOptionList(response[0].data.Country || [], \"ncountrycode\",\r\n                    \"scountryname\", undefined, undefined, false);\r\n\r\n                const Site = siteMap.get(\"OptionList\");\r\n                const City = cityMap.get(\"OptionList\");               \r\n                const Country = countryMap.get(\"OptionList\");\r\n\r\n                if(methodParam.operation === \"update\"){\r\n                    selectedRecord =response[1].data;\r\n                    selectedRecord[\"ncountrycode\"] = getComboLabelValue(selectedRecord, response[0].data.Country, \r\n                        \"ncountrycode\", \"scountryname\");  \r\n                          \r\n                    // selectedRecord[\"nsitecode\"] = getComboLabelValue(selectedRecord, response[0].data.Site, \r\n                    //     \"nsitecode\", \"ssitename\");\r\n                        \r\n                    selectedRecord[\"nsitecode\"] = {\"label\":selectedRecord.ssitename,\"value\":selectedRecord.nlimssitecode}\r\n                    selectedRecord[\"ncitycode\"] = getComboLabelValue(selectedRecord, response[0].data.City, \r\n                        \"ncitycode\", \"scityname\");        \r\n                }else{\r\n                    selectedRecord =methodParam.selectedRecord;\r\n                    selectedRecord[\"nsitecode\"] = siteMap.get(\"DefaultValue\"); \r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n\r\n                        Site,\r\n                        City,\r\n                        Country,\r\n                        isOpen: true,\r\n                        selectedRecord,\r\n                        operation: methodParam.operation,\r\n                        screenName: methodParam.screenName,\r\n                        openModal: true,\r\n                        ncontrolCode: methodParam.ncontrolCode,\r\n                        instItem: methodParam.instItem,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 417) {\r\n                    toast.info(error.response.data)\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const addInstitutionFile = (inputParam) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\r\n            userinfo: inputParam.userInfo\r\n        })];\r\n        if (inputParam.operation === \"update\") {\r\n            urlArray.push(rsapi.post(\"/institution/getInstitutionFileById\", {\r\n                userinfo: inputParam.userInfo,\r\n                institutionfile: inputParam.selectedRecord\r\n            }))\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\r\n                const linkmaster = linkMap.get(\"OptionList\");\r\n                let selectedRecord = {};\r\n                const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\r\n                let disabled = false;\r\n                let editObject = {};\r\n                if (inputParam.operation === \"update\") {\r\n                    editObject = response[1].data;\r\n                    let nlinkcode = {};\r\n                    let link = {};\r\n                    if (editObject.nattachmenttypecode === attachmentType.LINK) {\r\n                        nlinkcode = {\r\n                            \"label\": editObject.slinkname,\r\n                            \"value\": editObject.nlinkcode\r\n                        }\r\n\r\n                        link = {\r\n                            slinkfilename:editObject.sfilename,\r\n                            slinkdescription:editObject.sfiledesc,\r\n                            nlinkdefaultstatus:editObject.ndefaultstatus,\r\n                            sfilesize:'',\r\n                            nfilesize:0,\r\n                            ndefaultstatus:4,\r\n                            sfilename:'',\r\n                        }\r\n\r\n                    } else {\r\n                        nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\" //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\r\n                        link = {\r\n                            slinkfilename:'',\r\n                            slinkdescription:'',\r\n                            nlinkdefaultstatus:4,\r\n                            sfilesize:editObject.sfilesize,\r\n                            nfilesize:editObject.nfilesize,\r\n                            ndefaultstatus:editObject.ndefaultstatus,\r\n                            sfilename:editObject.sfilename,\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n                    selectedRecord = {\r\n                        ...link,\r\n                        ntestfilecode:editObject.ntestfilecode,\r\n                        nattachmenttypecode:editObject.nattachmenttypecode,\r\n                        ...editObject,\r\n                        nlinkcode,\r\n        \r\n                       // disabled: true\r\n                    };\r\n                } else {\r\n                    selectedRecord = {\r\n                        nattachmenttypecode:response[0].data.AttachmentType.length>0?\r\n                        response[0].data.AttachmentType[0].nattachmenttypecode:attachmentType.FTP,\r\n                        nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\", //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\r\n                        disabled\r\n                    };\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        [inputParam.modalName]: true,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolCode,\r\n                        selectedRecord,\r\n                        loading: false,\r\n                        linkMaster: linkmaster,\r\n                        showSaveContinue: false,\r\n                        openModal: true,\r\n                        editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport const changeInstitutionCategoryFilter = (inputParam,FilterInstitutionCategory,defaultInstitutionCategory) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/institution/get\" + inputParam.methodUrl, inputParam.inputData)\r\n            .then(response => {\r\n                const masterData = response.data\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            FilterInstitutionCategory,\r\n                            defaultInstitutionCategory,\r\n                            SelectedInstitutionCategory:defaultInstitutionCategory\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                toast.error(error.message);\r\n            });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}