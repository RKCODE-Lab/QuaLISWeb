{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from'react-redux';import{FormattedMessage,injectIntl}from\"react-intl\";import{callService,crudMaster,validateEsignCredential,updateStore,getInstitutionDetail,getInstitutionCombo,getInstitutionSiteData,addInstitutionFile,changeInstitutionCategoryFilter,viewAttachment,filterColumnData}from\"../../../actions\";import BreadcrumbComponent from\"../../../components/Breadcrumb.Component\";import{Affix}from'rsuite';import{constructOptionList,getControlMap,showEsign,onDropAttachFileList,deleteAttachmentDropZone,create_UUID,validatePhoneNumber,validateEmail}from'../../../components/CommonScript';import{Row,Col,Card,FormGroup,FormLabel,Nav}from\"react-bootstrap\";import{ContentPanel}from'../../product/product.styled';import ListMaster from\"../../../components/list-master/list-master.component\";import ReactTooltip from'react-tooltip';import InstitutionCategoryFilter from\"./InstitutionCategoryFilter\";import{ReadOnlyText}from'../../../components/App.styles';import CustomTab from\"../../../components/custom-tabs/custom-tabs.component\";import InstitutionSiteTab from\"./InstitutionSiteTab\";import InstitutionFileTab from\"./InstitutionFileTab\";import{DEFAULT_RETURN}from\"../../../actions/LoginTypes\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faPencilAlt,faTrashAlt}from\"@fortawesome/free-solid-svg-icons\";import SlideOutModal from\"../../../components/slide-out-modal/SlideOutModal\";import Esign from\"../../audittrail/Esign\";import AddInstitution from\"./AddInstitution\";import AddInstitutionSite from\"./AddInstitutionSite\";import AddInstitutionFile from\"./AddInstitutionFile\";import ConfirmMessage from'../../../components/confirm-alert/confirm-message.component';import{toast}from'react-toastify';import{attachmentType,transactionStatus}from\"../../../components/Enumeration\";var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Institution=/*#__PURE__*/function(_React$Component){_inherits(Institution,_React$Component);var _super=_createSuper(Institution);function Institution(props){var _this;_classCallCheck(this,Institution);_this=_super.call(this,props);_this.tabDetail=function(){var tabMap=new Map();var editSiteId=_this.state.controlMap.has(\"EditInstitutionSite\")&&_this.state.controlMap.get(\"EditInstitutionSite\").ncontrolcode;var deleteSiteId=_this.state.controlMap.has(\"DeleteInstitutionSite\")&&_this.state.controlMap.get(\"DeleteInstitutionSite\").ncontrolcode;var deleteFileId=_this.state.controlMap.has(\"DeleteInstitutionFile\")&&_this.state.controlMap.get(\"DeleteInstitutionFile\").ncontrolcode;var deleteParam={operation:\"delete\",deleteSiteId:deleteSiteId};var deleteTestParam={operation:\"delete\",deleteFileId:deleteFileId};var editParam={screenName:\"IDS_INSTITUTIONSITE\",operation:\"update\",primaryKeyField:\"ninstitutionsitecode\",userInfo:_this.props.Login.userInfo,inputParam:_this.props.Login.inputParam,ncontrolcode:editSiteId,instItem:_this.props.Login.masterData.selectedInstitution};tabMap.set(\"IDS_INSTITUTIONSITE\",/*#__PURE__*/React.createElement(InstitutionSiteTab,{controlMap:_this.state.controlMap,userRoleControlRights:_this.state.userRoleControlRights,selectedInstitution:_this.props.Login.masterData.selectedInstitution,InstitutionSite:_this.props.Login.masterData.InstitutionSite,masterData:_this.props.Login.masterData,userInfo:_this.props.Login.userInfo,getInstitutionSiteData:_this.props.getInstitutionSiteData,inputParam:_this.props.Login.inputParam,selectedRecord:_this.state.selectedRecord,dataState:_this.props.Login.dataState,deleteRecord:_this.DeleteInstitutionSite,deleteParam:deleteParam,fetchRecord:_this.props.getInstitutionSiteData,editParam:editParam,InstitutionSiteData:_this.props.Login.masterData.InstitutionSite||[],screenName:\"IDS_INSTITUTIONSITE\",settings:_this.props.Login.settings}));tabMap.set(\"IDS_INSTITUTIONFILE\",/*#__PURE__*/React.createElement(InstitutionFileTab,{controlMap:_this.state.controlMap,userRoleControlRights:_this.state.userRoleControlRights,userInfo:_this.props.Login.userInfo,inputParam:_this.props.Login.inputParam,InstitutionFile:_this.props.Login.masterData.InstitutionFile||[],settings:_this.props.Login.settings,addInstitutionFile:_this.props.addInstitutionFile,deleteRecord:_this.DeleteInstitutionFile,deleteParam:deleteTestParam//editParam={editTestParam}\n,viewInstitutionFile:_this.viewInstitutionFile,screenName:\"IDS_INSTITUTIONFILE\"}));return tabMap;};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};_this.onFilterSubmit=function(){if(_this.props.Login.masterData.defaultInstitutionCategory){var inputParam={inputData:{ninstitutioncatcode:_this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode,userinfo:_this.props.Login.userInfo},classUrl:\"institution\",methodUrl:\"InstitutionByCategory\"};_this.props.changeInstitutionCategoryFilter(inputParam,_this.props.Login.masterData.FilterInstitutionCategory,_this.props.Login.masterData.defaultInstitutionCategory);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_INSTITUTIONCATEGORYNOTAVAILABLE\"}));}};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputParam={inputData:{\"ninstitutioncatcode\":_this.props.Login.masterData.SelectedInstitutionCategory.ninstitutioncatcode,\"userinfo\":_this.props.Login.userInfo},classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"InstitutionByCategory\",displayName:_this.props.intl.formatMessage({id:\"IDS_INSTITUTION\"})};_this.props.changeInstitutionCategoryFilter(inputParam,_this.props.Login.masterData.FilterInstitutionCategory,_this.props.Login.masterData.SelectedInstitutionCategory);};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;}}else{openModal=false;selectedRecord={};//this.setState({ selectedRecord });\n}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.onNumericInputOnChange=function(value,name){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type===\"checkbox\"){selectedRecord[event.target.name]=event.target.checked===true?3:4;}else if(event.target.type===\"radio\"){selectedRecord[event.target.name]=optional;}else{if(event.target.name===\"sfaxno\"){if(event.target.value!==\"\"){event.target.value=validatePhoneNumber(event.target.value);selectedRecord[event.target.name]=event.target.value!==\"\"?event.target.value:selectedRecord[event.target.name];}else{selectedRecord[event.target.name]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}}_this.setState({selectedRecord:selectedRecord});};_this.onComboChangeFilter=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||[];if(comboData){if(fieldName===\"ninstitutioncatcode\"){if(comboData.value!==_this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode){var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{defaultInstitutionCategory:comboData.item});var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:masterData}};_this.props.updateStore(updateInfo);}}}};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};if(comboData!=null){if(fieldName===\"ninstitutioncatcode\"){selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"nsitecode\"){selectedRecord[\"nsitecode\"]=comboData;selectedRecord[\"ssitecode\"]=comboData.item[\"ssitecode\"];_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ncitycode\"){selectedRecord[\"ncitycode\"]=comboData;selectedRecord[\"scitycode\"]=comboData.item[\"scitycode\"];_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ncountrycode\"){selectedRecord[\"ncountrycode\"]=comboData;_this.setState({selectedRecord:selectedRecord});}}};_this.onSaveClick=function(saveType,formRef){var postParam=undefined;var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;var dataState=undefined;if(_this.props.Login.screenName===\"IDS_INSTITUTION\"){if(_this.props.Login.operation===\"update\"){// edit\nvar selectedRecord=_this.state.selectedRecord;postParam={inputListName:\"Institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\"};inputData[\"institution\"]={};_this.fieldInstitutionList.map(function(item){return inputData[\"institution\"][item]=selectedRecord[item]!==null?selectedRecord[item]:\"\";});inputData[\"institution\"][\"ninstitutioncode\"]=selectedRecord[\"ninstitutioncode\"]?selectedRecord[\"ninstitutioncode\"]:-1;inputData[\"institution\"][\"ninstitutioncatcode\"]=_this.state.selectedRecord?_this.state.selectedRecord.ninstitutioncatcode.value:-1;dataState=_this.state.dataState;}else{//add               \ninputData[\"institution\"]={\"nsitecode\":_this.props.Login.userInfo.nmastersitecode};_this.fieldInstitutionList.map(function(item){return inputData[\"institution\"][item]=_this.state.selectedRecord[item]!==undefined?_this.state.selectedRecord[item]:\"\";});inputData[\"institution\"][\"ninstitutioncatcode\"]=_this.state.selectedRecord?_this.state.selectedRecord.ninstitutioncatcode.value:-1;}var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"Institution\",displayName:_this.props.Login.inputParam.displayName,inputData:inputData,selectedId:_this.state.selectedRecord[\"ninstututioncode\"],operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,dataState:dataState,searchRef:_this.searchRef,postParam:postParam};_this.setState({FilterInstitutionCategory:{\"label\":_this.state.selectedRecord.ninstitutioncatcode.label,\"value\":_this.state.selectedRecord.ninstitutioncatcode.value}});if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.inputParam.displayName}),operation:_this.props.Login.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}}else if(_this.props.Login.screenName===\"IDS_INSTITUTIONSITE\"){var isValidateEmail=_this.state.selectedRecord[\"semail\"]?validateEmail(_this.state.selectedRecord[\"semail\"]):true;if(isValidateEmail){if(_this.props.Login.operation===\"update\"){// edit\nvar _selectedRecord=_this.state.selectedRecord;// postParam = {\n//   inputListName: \"InstitutionSite\",\n//   selectedObject: \"selectedInstitutionSite\",\n//   primaryKeyField: \"ninstitutionsitecode\",\n// };\ninputData[\"institutionsite\"]={};inputData[\"institutionsite\"][\"ninstitutionsitecode\"]=_selectedRecord[\"ninstitutionsitecode\"]?_selectedRecord[\"ninstitutionsitecode\"]:-1;inputData[\"institutionsite\"][\"ninstitutioncode\"]=_this.props.Login.instItem[\"ninstitutioncode\"];;inputData[\"institutionsite\"][\"nlimssitecode\"]=_this.state.selectedRecord[\"nsitecode\"]?_this.state.selectedRecord[\"nsitecode\"].value:-1;inputData[\"institutionsite\"][\"ncitycode\"]=_this.state.selectedRecord[\"ncitycode\"]?_this.state.selectedRecord[\"ncitycode\"].value:-1;inputData[\"institutionsite\"][\"ncountrycode\"]=_this.state.selectedRecord[\"ncountrycode\"]?_this.state.selectedRecord[\"ncountrycode\"].value:-1;_this.fieldInstitutionSiteList.map(function(item){return inputData[\"institutionsite\"][item]=_selectedRecord[item]!==null?_selectedRecord[item]:\"\";});dataState=_this.state.dataState;}else{//add               \n//inputData[\"institutionsite\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };  \ninputData[\"institutionsite\"]={};inputData[\"institutionsite\"][\"ninstitutioncode\"]=_this.props.Login.instItem[\"ninstitutioncode\"];;inputData[\"institutionsite\"][\"nlimssitecode\"]=_this.state.selectedRecord[\"nsitecode\"]?_this.state.selectedRecord[\"nsitecode\"].value:-1;inputData[\"institutionsite\"][\"ncitycode\"]=_this.state.selectedRecord[\"ncitycode\"]?_this.state.selectedRecord[\"ncitycode\"].value:-1;inputData[\"institutionsite\"][\"ncountrycode\"]=_this.state.selectedRecord[\"ncountrycode\"]?_this.state.selectedRecord[\"ncountrycode\"].value:-1;_this.fieldInstitutionSiteList.map(function(item){return inputData[\"institutionsite\"][item]=_this.state.selectedRecord[item]!==undefined?_this.state.selectedRecord[item]:\"\";});}var _inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"InstitutionSite\",displayName:_this.props.Login.inputParam.displayName,inputData:inputData,selectedId:_this.state.selectedRecord[\"ninstitutionsitecode\"],operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,dataState:dataState,searchRef:_this.searchRef,postParam:postParam};//this.setState({ FilterClientCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\nif(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var _updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:_inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.inputParam.displayName}),operation:_this.props.Login.operation}};_this.props.updateStore(_updateInfo);}else{_this.props.crudMaster(_inputParam,_this.props.Login.masterData,\"openModal\");}}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_ENTERVALIDEMAIL\"}));}}else if(_this.props.Login.screenName===\"IDS_INSTITUTIONFILE\"){var _selectedRecord2=_this.state.selectedRecord;var acceptedFiles=_selectedRecord2.sfilename;var nattachmenttypecode=_selectedRecord2.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var institutionFileArray=[];var institutionFile={ninstitutioncode:_this.props.Login.masterData.selectedInstitution.ninstitutioncode,ninstitutionfilecode:_selectedRecord2.ninstitutionfilecode?_selectedRecord2.ninstitutionfilecode:0,nstatus:transactionStatus.ACTIVE,nattachmenttypecode:nattachmenttypecode};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},institutionFile);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=_selectedRecord2.ssystemfilename?_selectedRecord2.ssystemfilename.split('.'):\"\";var filesystemfileext=_selectedRecord2.ssystemfilename?file.name.split('.')[ssystemfilename.length-1]:\"\";var uniquefilename=nattachmenttypecode===attachmentType.FTP?_selectedRecord2.ntestfilecode&&_selectedRecord2.ntestfilecode>0&&_selectedRecord2.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=file.name;tempData[\"sfiledesc\"]=_selectedRecord2.sfiledesc?_selectedRecord2.sfiledesc.trim():\"\";tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);institutionFileArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{institutionFile[\"sfilename\"]=_selectedRecord2.sfilename;institutionFile[\"sfiledesc\"]=_selectedRecord2.sfiledesc?_selectedRecord2.sfiledesc.trim():\"\";institutionFile[\"nlinkcode\"]=transactionStatus.NA;institutionFile[\"ssystemfilename\"]=_selectedRecord2.ssystemfilename;institutionFile[\"nfilesize\"]=_selectedRecord2.nfilesize;institutionFileArray.push(institutionFile);}}else{institutionFile[\"sfilename\"]=_selectedRecord2.slinkfilename.trim();institutionFile[\"sfiledesc\"]=_selectedRecord2.slinkdescription?_selectedRecord2.slinkdescription.trim():\"\";institutionFile[\"nlinkcode\"]=_selectedRecord2.nlinkcode.value?_selectedRecord2.nlinkcode.value:-1;institutionFile[\"ssystemfilename\"]=\"\";institutionFile[\"nfilesize\"]=0;institutionFileArray.push(institutionFile);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"institutionfile\",JSON.stringify(institutionFileArray));var selectedId=null;var _postParam=undefined;if(_this.props.Login.operation===\"update\"){_postParam={inputListName:\"Institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\"};selectedId=_selectedRecord2[\"ninstitutionfilecode\"];}var _inputParam2={inputData:{userinfo:_this.props.Login.userInfo},formData:formData,isFileupload:true,operation:_this.props.Login.operation,classUrl:\"institution\",saveType:saveType,formRef:formRef,methodUrl:\"InstitutionFile\",postParam:_postParam};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var _updateInfo2={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:_inputParam2,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.inputParam.displayName}),operation:_this.props.Login.operation}};_this.props.updateStore(_updateInfo2);}else{_this.props.crudMaster(_inputParam2,_this.props.Login.masterData,\"openModal\");}}};_this.ConfirmDelete=function(deleteId){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.DeleteInstitution(\"delete\",deleteId);});};_this.DeleteInstitutionFile=function(deleteTestParam){var inputData=[];var ncontrolcode=deleteTestParam.ncontrolCode;var operation=deleteTestParam.operation;inputData[\"institutionfile\"]=deleteTestParam.selectedRecord;inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"institutionfile\",selectedObject:\"selectedInstitutionFile\",primaryKeyField:\"ninstitutionfilecode\",primaryKeyValue:deleteTestParam.selectedRecord.ninstitutionfilecode,fetchUrl:\"institution/getInstitutionFile\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"InstitutionFile\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,operation:\"delete\",postParam:postParam};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolcode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"Institution\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.DeleteInstitutionSite=function(deleteParam){var inputData=[];var ncontrolcode=deleteParam.ncontrolCode;var operation=deleteParam.operation;inputData[\"institutionsite\"]=deleteParam.selectedRecord;inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"institutionsite\",selectedObject:\"selectedInstitutionSite\",primaryKeyField:\"ninstitutionsitecode\",primaryKeyValue:deleteParam.selectedRecord.ninstitutionsitecode,fetchUrl:\"institution/getInstitutionSite\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"InstitutionSite\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,operation:\"delete\",postParam:postParam};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolcode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"Institution\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.DeleteInstitution=function(operation,ncontrolCode){var inputData=[];inputData[\"institution\"]=_this.props.Login.masterData.selectedInstitution;inputData[\"userinfo\"]=_this.props.Login.userInfo;var postParam={inputListName:\"institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\",primaryKeyValue:_this.props.Login.masterData.selectedInstitution.ninstitutioncode,fetchUrl:\"institution/getInstitution\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"Institution\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,operation:\"delete\",postParam:postParam};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openModal:true,screenName:\"Institution\",operation:operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openModal\");}};_this.viewInstitutionFile=function(filedata){var inputParam={inputData:{institutionfile:filedata,userinfo:_this.props.Login.userInfo},classUrl:\"institution\",operation:\"view\",methodUrl:\"InstitutionFile\",screenName:\"IDS_INSTITUTION\"};_this.props.viewAttachment(inputParam);};_this.onDropInstitutionFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"});};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.formRef=React.createRef();_this.confirmMessage=new ConfirmMessage();_this.searchRef=React.createRef();_this.fieldInstitutionList=[];_this.fieldInstitutionSiteList=[];var _dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={dataState:_dataState,userRoleControlRights:[],controlMap:new Map(),selectedRecord:{}};return _this;}_createClass(Institution,[{key:\"render\",value:function render(){var _this2=this;var mandatoryFields=[];if(this.props.Login.screenName===\"IDS_INSTITUTION\"){mandatoryFields.push({mandatory:true,idsName:\"IDS_INSTITUTIONCATEGORY\",dataField:\"ninstitutioncatcode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_INSTITUTION\",dataField:\"sinstitutionname\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"});}else if(this.props.Login.screenName===\"IDS_INSTITUTIONSITE\"){mandatoryFields.push({mandatory:true,idsName:\"IDS_LIMSSITE\",dataField:\"nsitecode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_INSTITUTIONSITE\",dataField:\"sinstitutionsitename\",mandatoryLabel:\"IDS_ENTER\",controlType:\"textbox\"},{mandatory:true,idsName:\"IDS_CITY\",dataField:\"ncitycode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"},{mandatory:true,idsName:\"IDS_COUNTRY\",dataField:\"ncountrycode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"});}this.fieldInstitutionList=[\"sinstitutionname\",\"sdescription\"];this.fieldInstitutionSiteList=[\"sinstitutionsitename\",\"sinstitutionsiteaddress\",\"szipcode\",\"sstate\",\"stelephone\",\"sfaxno\",\"semail\",\"swebsite\"];var addId=this.state.controlMap.has(\"AddInstitution\")&&this.state.controlMap.get(\"AddInstitution\").ncontrolcode;var editId=this.state.controlMap.has(\"EditInstitution\")&&this.state.controlMap.get(\"EditInstitution\").ncontrolcode;var deleteId=this.state.controlMap.has(\"DeleteInstitution\")&&this.state.controlMap.get(\"DeleteInstitution\").ncontrolcode;var filterParam={inputListName:\"Institution\",selectedObject:\"selectedInstitution\",primaryKeyField:\"ninstitutioncode\",fetchUrl:\"institution/getSelectedInstitutionDetail\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,searchFieldList:[\"sinstitutioncatname\",\"sinstitutionname\",\"sdescription\"]};var selectedInstitution=this.props.Login.masterData.selectedInstitution;var breadCrumbData=this.state.filterData||[];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},breadCrumbData.length>0?/*#__PURE__*/React.createElement(Affix,{top:53},/*#__PURE__*/React.createElement(BreadcrumbComponent,{breadCrumbItem:breadCrumbData})):\"\",/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster,{formatMessage:this.props.intl.formatMessage,screenName:\"Institution\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.Institution,getMasterDetail:function getMasterDetail(_Institution){return _this2.props.getInstitutionDetail(_Institution,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:this.props.Login.masterData.selectedInstitution,primaryKeyField:\"ninstitutioncode\",mainField:\"sinstitutionname\",firstField:\"sinstitutioncatname\",isIDSField:\"Yes\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData,hidePaging:true,openModal:function openModal(){return _this2.props.getInstitutionCombo(\"IDS_INSTITUTION\",\"create\",\"ninstitutioncode\",_this2.props.Login.masterData,_this2.props.Login.userInfo,addId);},openFilter:this.openFilter,closeFilter:this.closeFilter,onFilterSubmit:this.onFilterSubmit,showFilterIcon:true,showFilter:this.props.Login.showFilter,filterComponent:[{\"IDS_INSTITUTIONCATEGORYFILTER\":/*#__PURE__*/React.createElement(InstitutionCategoryFilter,{FilterInstitutionCategory:this.state.FilterInstitutionCategory||[],nfilterInstitutionCategory:this.props.Login.masterData.defaultInstitutionCategory||{},selectedRecord:this.state.selectedRecord||{},onFilterComboChange:this.onComboChangeFilter})}]})),/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},this.props.Login.masterData.selectedInstitution?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(ReactTooltip,{place:\"bottom\",globalEventOff:\"click\",id:\"tooltip_list_wrap\"}),/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},this.props.Login.masterData.selectedInstitution.sinstitutionname),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"editInstitution\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_EDIT\"}),\"data-for\":\"tooltip_list_wrap\",hidden:this.state.userRoleControlRights.indexOf(editId)===-1,className:\"btn btn-circle outline-grey mr-2\",onClick:function onClick(e){return _this2.props.getInstitutionCombo(\"IDS_INSTITUTION\",\"update\",\"ninstitutioncode\",_this2.props.Login.masterData,_this2.props.Login.userInfo,editId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"deleteInstitution\",className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"}),\"data-for\":\"tooltip_list_wrap\",hidden:this.state.userRoleControlRights.indexOf(deleteId)===-1,onClick:function onClick(){return _this2.ConfirmDelete(deleteId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt})))))),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_DESCRIPTION\",messasge:\"Description\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.selectedInstitution.sdescription)))),selectedInstitution&&/*#__PURE__*/React.createElement(CustomTab,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange}))):\"\"))))))),this.props.Login.openModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,mandatoryFields:mandatoryFields,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.screenName===\"IDS_INSTITUTION\"?/*#__PURE__*/React.createElement(AddInstitution,{onNumericInputOnChange:this.onNumericInputOnChange,selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,InstitutionCategory:this.props.Login.InstitutionCategory,operation:this.props.Login.operation,inputParam:this.props.inputParam,userInfo:this.props.Login.userInfo}):this.props.Login.screenName===\"IDS_INSTITUTIONSITE\"?/*#__PURE__*/React.createElement(AddInstitutionSite,{selectedRecord:this.state.selectedRecord||{},Site:this.props.Login.Site,City:this.props.Login.City,Country:this.props.Login.Country,onComboChange:this.onComboChange,onInputOnChange:this.onInputOnChange,operation:this.props.Login.operation,inputParam:this.props.inputParam,userInfo:this.props.Login.userInfo}):this.props.Login.screenName===\"IDS_INSTITUTIONFILE\"?/*#__PURE__*/React.createElement(AddInstitutionFile,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onDrop:this.onDropInstitutionFile,label:this.props.intl.formatMessage({id:\"IDS_FILENAME\"}),deleteAttachment:this.deleteAttachment,linkMaster:this.props.Login.linkMaster,maxSize:20,maxFiles:1}):\"\"}));}},{key:\"generateBreadCrumData\",value:function generateBreadCrumData(){var breadCrumbData=[];if(this.props.Login.masterData&&this.props.Login.masterData.FilterInstitutionCategory){breadCrumbData.push({\"label\":\"IDS_INSTITUTIONCATEGORY\",\"value\":this.props.Login.masterData.SelectedInstitutionCategory?this.props.Login.masterData.SelectedInstitutionCategory.sinstitutioncatname:\"-\"});}return breadCrumbData;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var selectedRecord=this.state.selectedRecord||{};if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){selectedRecord=this.props.Login.selectedRecord;this.setState({selectedRecord:selectedRecord});}if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData});}else{var dataState=this.state.dataState;if(this.props.Login.dataState===undefined){dataState={skip:0,take:this.props.Login.settings?parseInt(this.props.Login.settings[14]):5};}this.setState({data:this.props.Login.masterData,dataState:dataState,selectedRecord:this.props.Login.selectedRecord});}var FilterInstitutionCategory=this.state.FilterInstitutionCategory||{};if(this.props.Login.masterData.FilterInstitutionCategory!==previousProps.Login.masterData.FilterInstitutionCategory){var InstitutionCategoryMap=constructOptionList(this.props.Login.masterData.FilterInstitutionCategory||[],\"ninstitutioncatcode\",\"sinstitutioncatname\",'ninstitutioncatcode','descending',false);FilterInstitutionCategory=InstitutionCategoryMap.get(\"OptionList\");}this.setState({FilterInstitutionCategory:FilterInstitutionCategory});}if(this.props.Login.masterData!==previousProps.Login.masterData){var filterData=this.generateBreadCrumData();this.setState({filterData:filterData});}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==\"\"&&props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return Institution;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,validateEsignCredential:validateEsignCredential,updateStore:updateStore,getInstitutionDetail:getInstitutionDetail,getInstitutionCombo:getInstitutionCombo,getInstitutionSiteData:getInstitutionSiteData,addInstitutionFile:addInstitutionFile,changeInstitutionCategoryFilter:changeInstitutionCategoryFilter,viewAttachment:viewAttachment,filterColumnData:filterColumnData})(injectIntl(Institution));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/submitter/institution/Institution.jsx"],"names":["React","connect","FormattedMessage","injectIntl","callService","crudMaster","validateEsignCredential","updateStore","getInstitutionDetail","getInstitutionCombo","getInstitutionSiteData","addInstitutionFile","changeInstitutionCategoryFilter","viewAttachment","filterColumnData","BreadcrumbComponent","Affix","constructOptionList","getControlMap","showEsign","onDropAttachFileList","deleteAttachmentDropZone","create_UUID","validatePhoneNumber","validateEmail","Row","Col","Card","FormGroup","FormLabel","Nav","ContentPanel","ListMaster","ReactTooltip","InstitutionCategoryFilter","ReadOnlyText","CustomTab","InstitutionSiteTab","InstitutionFileTab","DEFAULT_RETURN","FontAwesomeIcon","faPencilAlt","faTrashAlt","SlideOutModal","Esign","AddInstitution","AddInstitutionSite","AddInstitutionFile","ConfirmMessage","toast","attachmentType","transactionStatus","mapStateToProps","state","Login","Institution","props","tabDetail","tabMap","Map","editSiteId","controlMap","has","get","ncontrolcode","deleteSiteId","deleteFileId","deleteParam","operation","deleteTestParam","editParam","screenName","primaryKeyField","userInfo","inputParam","instItem","masterData","selectedInstitution","set","userRoleControlRights","InstitutionSite","selectedRecord","dataState","DeleteInstitutionSite","settings","InstitutionFile","DeleteInstitutionFile","viewInstitutionFile","openFilter","showFilter","updateInfo","typeName","data","closeFilter","onFilterSubmit","defaultInstitutionCategory","inputData","ninstitutioncatcode","userinfo","classUrl","methodUrl","FilterInstitutionCategory","warn","intl","formatMessage","id","reloadData","searchRef","current","value","SelectedInstitutionCategory","displayName","closeModal","loadEsign","openModal","selectedId","onTabChange","tabProps","onNumericInputOnChange","name","setState","onInputOnChange","event","optional","target","type","checked","onComboChangeFilter","comboData","fieldName","item","onComboChange","onSaveClick","saveType","formRef","postParam","undefined","inputListName","selectedObject","fieldInstitutionList","map","nmastersitecode","label","nformcode","ncontrolCode","screenData","isValidateEmail","fieldInstitutionSiteList","info","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","NO","institutionFileArray","institutionFile","ninstitutioncode","ninstitutionfilecode","nstatus","ACTIVE","formData","FormData","FTP","Array","isArray","length","forEach","file","index","tempData","Object","assign","splittedFileName","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","ntestfilecode","sfiledesc","trim","NA","size","append","push","YES","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","isFileupload","ConfirmDelete","deleteId","confirmMessage","confirm","DeleteInstitution","primaryKeyValue","fetchUrl","fecthInputObject","ninstitutionsitecode","filedata","institutionfile","onDropInstitutionFile","attachedFiles","maxSize","actionType","deleteAttachment","validateEsign","sreason","password","createRef","skip","take","parseInt","mandatoryFields","mandatory","idsName","dataField","mandatoryLabel","controlType","addId","editId","filterParam","searchFieldList","breadCrumbData","filterData","searchedData","sinstitutionname","indexOf","e","sdescription","masterStatus","InstitutionCategory","Site","City","Country","linkMaster","sinstitutioncatname","previousProps","values","InstitutionCategoryMap","generateBreadCrumData","error","Component"],"mappings":"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","sourcesContent":[" import React from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport {FormattedMessage,injectIntl } from \"react-intl\";\r\nimport { callService,crudMaster,validateEsignCredential,updateStore,getInstitutionDetail,getInstitutionCombo,\r\n         getInstitutionSiteData,addInstitutionFile,changeInstitutionCategoryFilter,viewAttachment,filterColumnData } from \"../../../actions\";\r\nimport BreadcrumbComponent from \"../../../components/Breadcrumb.Component\";\r\nimport { Affix } from 'rsuite';\r\nimport { constructOptionList, getControlMap, showEsign,onDropAttachFileList,deleteAttachmentDropZone,create_UUID,validatePhoneNumber,validateEmail } from '../../../components/CommonScript';\r\nimport { Row,Col,Card,FormGroup, FormLabel,Nav} from \"react-bootstrap\";\r\nimport { ContentPanel } from '../../product/product.styled';\r\nimport ListMaster from \"../../../components/list-master/list-master.component\";\r\nimport ReactTooltip from 'react-tooltip';\r\nimport InstitutionCategoryFilter  from  \"./InstitutionCategoryFilter\";\r\nimport { ReadOnlyText } from '../../../components/App.styles';\r\nimport CustomTab from \"../../../components/custom-tabs/custom-tabs.component\";\r\nimport InstitutionSiteTab from \"./InstitutionSiteTab\";\r\nimport InstitutionFileTab from \"./InstitutionFileTab\";\r\nimport { DEFAULT_RETURN } from \"../../../actions/LoginTypes\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPencilAlt, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport SlideOutModal from \"../../../components/slide-out-modal/SlideOutModal\";\r\nimport Esign from \"../../audittrail/Esign\"; \r\nimport AddInstitution from \"./AddInstitution\";\r\nimport AddInstitutionSite from \"./AddInstitutionSite\";\r\nimport AddInstitutionFile from \"./AddInstitutionFile\";\r\nimport ConfirmMessage from '../../../components/confirm-alert/confirm-message.component';\r\nimport { toast } from 'react-toastify';\r\nimport { attachmentType,transactionStatus } from \"../../../components/Enumeration\";\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\nclass Institution extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.formRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n        this.searchRef = React.createRef();\r\n        this.fieldInstitutionList = [];\r\n        this.fieldInstitutionSiteList =[];\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state ={\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            selectedRecord: {}, \r\n        }\r\n       \r\n    }\r\n    render(){\r\n        let mandatoryFields = [];\r\n        if (this.props.Login.screenName === \"IDS_INSTITUTION\") {\r\n          mandatoryFields.push(\r\n            {\r\n              mandatory: true,\r\n              idsName: \"IDS_INSTITUTIONCATEGORY\",\r\n              dataField: \"ninstitutioncatcode\",\r\n              mandatoryLabel: \"IDS_SELECT\",\r\n              controlType: \"selectbox\",\r\n            },\r\n            {\r\n              mandatory: true,\r\n              idsName: \"IDS_INSTITUTION\",\r\n              dataField: \"sinstitutionname\",\r\n              mandatoryLabel: \"IDS_ENTER\",\r\n              controlType: \"textbox\",\r\n            },\r\n            \r\n          );\r\n         \r\n          \r\n          \r\n        }else if(this.props.Login.screenName === \"IDS_INSTITUTIONSITE\"){\r\n            mandatoryFields.push(\r\n                {\r\n                  mandatory: true,\r\n                  idsName: \"IDS_LIMSSITE\",\r\n                  dataField: \"nsitecode\",\r\n                  mandatoryLabel: \"IDS_SELECT\",\r\n                  controlType: \"selectbox\",\r\n                },\r\n                {\r\n                  mandatory: true,\r\n                  idsName: \"IDS_INSTITUTIONSITE\",\r\n                  dataField: \"sinstitutionsitename\",\r\n                  mandatoryLabel: \"IDS_ENTER\",\r\n                  controlType: \"textbox\",\r\n                },\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_CITY\",\r\n                    dataField: \"ncitycode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                  },\r\n                  {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_COUNTRY\",\r\n                    dataField: \"ncountrycode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                  },\r\n\r\n                \r\n                \r\n                \r\n            );\r\n        }\r\n\r\n        this.fieldInstitutionList = [\"sinstitutionname\", \"sdescription\"];\r\n        this.fieldInstitutionSiteList = [\"sinstitutionsitename\",\"sinstitutionsiteaddress\",\"szipcode\",\"sstate\",\"stelephone\",\"sfaxno\",\"semail\",\"swebsite\"];\r\n\r\n        \r\n                \r\n        const addId = this.state.controlMap.has(\"AddInstitution\") && this.state.controlMap.get(\"AddInstitution\").ncontrolcode;\r\n        const editId =  this.state.controlMap.has(\"EditInstitution\") && this.state.controlMap.get(\"EditInstitution\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"DeleteInstitution\") && this.state.controlMap.get(\"DeleteInstitution\").ncontrolcode;\r\n\r\n        const filterParam = {\r\n            inputListName: \"Institution\", selectedObject: \"selectedInstitution\", primaryKeyField: \"ninstitutioncode\",\r\n            fetchUrl: \"institution/getSelectedInstitutionDetail\", fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData,\r\n            searchFieldList: [\"sinstitutioncatname\", \"sinstitutionname\",\"sdescription\"]\r\n        };\r\n\r\n        const { selectedInstitution } = this.props.Login.masterData;\r\n        const breadCrumbData =this.state.filterData || [];\r\n        return(\r\n            <>\r\n                <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n                    {breadCrumbData.length > 0 ?\r\n                        <Affix top={53}>\r\n                            <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n                        </Affix> : \"\"\r\n                    }\r\n                    <Row noGutters={true}>\r\n                        <Col md={4}>\r\n                        <ListMaster\r\n                            formatMessage={this.props.intl.formatMessage}\r\n                            screenName={\"Institution\"}\r\n                            masterData={this.props.Login.masterData}\r\n                            userInfo={this.props.Login.userInfo}\r\n                            masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.Institution}\r\n                            getMasterDetail={(Institution) => this.props.getInstitutionDetail(Institution, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                            selectedMaster={this.props.Login.masterData.selectedInstitution}\r\n                            primaryKeyField=\"ninstitutioncode\"\r\n                            mainField=\"sinstitutionname\"\r\n                            firstField=\"sinstitutioncatname\"\r\n                            isIDSField=\"Yes\"\r\n                            filterColumnData={this.props.filterColumnData}\r\n                            filterParam={filterParam}\r\n                            userRoleControlRights={this.state.userRoleControlRights}\r\n                            addId={addId}\r\n                            searchRef={this.searchRef}\r\n                            reloadData={this.reloadData}\r\n                            hidePaging={true}\r\n                            openModal={() =>\r\n                                this.props.getInstitutionCombo(\r\n                                \"IDS_INSTITUTION\",\r\n                                \"create\",\r\n                                \"ninstitutioncode\",\r\n                                this.props.Login.masterData,\r\n                                this.props.Login.userInfo,\r\n                                addId\r\n                                )\r\n                              }\r\n                            openFilter={this.openFilter}\r\n                            closeFilter={this.closeFilter}\r\n                            onFilterSubmit={this.onFilterSubmit}\r\n                            showFilterIcon={true}\r\n                            showFilter={this.props.Login.showFilter}\r\n                            filterComponent={[\r\n                                {\r\n                                    \"IDS_INSTITUTIONCATEGORYFILTER\":\r\n                                        <InstitutionCategoryFilter\r\n                                        FilterInstitutionCategory={this.state.FilterInstitutionCategory || []}\r\n                                        nfilterInstitutionCategory ={this.props.Login.masterData.defaultInstitutionCategory ||{}}\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        onFilterComboChange={this.onComboChangeFilter}\r\n                                        />\r\n                                }\r\n                            ]}\r\n                        />\r\n                        </Col>\r\n                        <Col md={8}>\r\n                            <Row>\r\n                                <Col md={12}>\r\n                                    <ContentPanel className=\"panel-main-content\">\r\n                                        <Card className=\"border-0\">\r\n                                            {this.props.Login.masterData.selectedInstitution ?(\r\n                                               <>\r\n                                               <Card.Header>\r\n                                                <ReactTooltip\r\n                                                    place=\"bottom\"\r\n                                                    globalEventOff=\"click\"\r\n                                                    id=\"tooltip_list_wrap\"\r\n                                                />\r\n                                                <Card.Title className=\"product-title-main\">\r\n                                                    {this.props.Login.masterData.selectedInstitution.sinstitutionname}\r\n                                                </Card.Title>\r\n                                                <Card.Subtitle>\r\n                                                    <div className=\"d-flex product-category\">\r\n                                                        <h2 className=\"product-title-sub flex-grow-1\"></h2>\r\n                                                        <div className=\"d-inline\">\r\n                                                        <Nav.Link\r\n                                                            name=\"editInstitution\"\r\n                                                            data-tip={this.props.intl.formatMessage({id: \"IDS_EDIT\", })}\r\n                                                            data-for=\"tooltip_list_wrap\" hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                            className=\"btn btn-circle outline-grey mr-2\"\r\n                                                            onClick={(e) => this.props.getInstitutionCombo(\"IDS_INSTITUTION\",\"update\",\"ninstitutioncode\",this.props.Login.masterData,this.props.Login.userInfo,editId)}\r\n                                    \r\n                                                        >\r\n                                                        <FontAwesomeIcon icon={faPencilAlt} />\r\n                                                        </Nav.Link>\r\n                                                        <Nav.Link\r\n                                                            name=\"deleteInstitution\"\r\n                                                            className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                                            data-tip={this.props.intl.formatMessage({id: \"IDS_DELETE\",})}\r\n                                                            data-for=\"tooltip_list_wrap\"  hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                            onClick={() =>this.ConfirmDelete(deleteId)}\r\n                                                        >\r\n                                                        <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                        </Nav.Link>\r\n                                                        </div>    \r\n                                                    </div>\r\n                                                </Card.Subtitle>\r\n                                               </Card.Header>\r\n                                               <Card.Body>\r\n                                                    <Row>\r\n                                                        {/* <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_INSTITUTION\" messasge=\"Institution\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sinstitutionname}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col> */}\r\n                                                        {/* <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_INSTITUTIONCATEGORY\" messasge=\"Institution Category\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sinstitutioncatname}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col> */}\r\n                                                        <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_DESCRIPTION\" messasge=\"Description\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sdescription}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                    {selectedInstitution && (\r\n                                                        <CustomTab\r\n                                                            tabDetail={this.tabDetail()}\r\n                                                                onTabChange={this.onTabChange}\r\n                                                        />\r\n                                                    )}\r\n                                               </Card.Body>\r\n                                               </>     \r\n                                            ):(\r\n                                             \"\"\r\n                                            )}\r\n                                        </Card>    \r\n                                     </ContentPanel>   \r\n                                </Col>   \r\n                            </Row>\r\n                        </Col>  \r\n                    </Row>\r\n                </div>\r\n                {this.props.Login.openModal && (\r\n                    <SlideOutModal\r\n                        show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        mandatoryFields={mandatoryFields}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        addComponent={\r\n                             this.props.Login.loadEsign ? (\r\n                            <Esign\r\n                                operation={this.props.Login.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            ) : this.props.Login.screenName === \"IDS_INSTITUTION\" ? (\r\n                            <AddInstitution\r\n                                onNumericInputOnChange={this.onNumericInputOnChange}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onComboChange={this.onComboChange}\r\n                                InstitutionCategory={this.props.Login.InstitutionCategory}   \r\n                                operation={this.props.Login.operation}\r\n                                inputParam={this.props.inputParam}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                \r\n                            />\r\n                            ) : this.props.Login.screenName === \"IDS_INSTITUTIONSITE\" ? (\r\n                            <AddInstitutionSite\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                Site={this.props.Login.Site}\r\n                                City={this.props.Login.City}\r\n                                Country={this.props.Login.Country}\r\n                                onComboChange={this.onComboChange}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                operation={this.props.Login.operation}\r\n                                inputParam={this.props.inputParam}\r\n                                userInfo={this.props.Login.userInfo}\r\n\r\n                            />\r\n                            )  : this.props.Login.screenName ===\"IDS_INSTITUTIONFILE\" ? (\r\n                            <AddInstitutionFile\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onDrop={this.onDropInstitutionFile}\r\n                                label={this.props.intl.formatMessage({ id: \"IDS_FILENAME\" })}\r\n                                deleteAttachment={this.deleteAttachment}\r\n                                linkMaster ={this.props.Login.linkMaster}\r\n                                maxSize={20}\r\n                                maxFiles={1}\r\n                            />\r\n                            )  : (\r\n                            \"\"\r\n                            )\r\n                        }   \r\n                    />\r\n                )}\r\n            </>\r\n        )\r\n        \r\n    }\r\n\r\n  tabDetail = () => {\r\n    const tabMap = new Map();\r\n    \r\n    const editSiteId = this.state.controlMap.has(\"EditInstitutionSite\") &&  this.state.controlMap.get(\"EditInstitutionSite\").ncontrolcode;\r\n    const deleteSiteId = this.state.controlMap.has(\"DeleteInstitutionSite\") && this.state.controlMap.get(\"DeleteInstitutionSite\").ncontrolcode;    \r\n    const deleteFileId = this.state.controlMap.has(\"DeleteInstitutionFile\") && this.state.controlMap.get(\"DeleteInstitutionFile\").ncontrolcode;    \r\n    const deleteParam ={operation:\"delete\",deleteSiteId};\r\n    const deleteTestParam ={operation:\"delete\",deleteFileId};\r\n    const editParam = {screenName:\"IDS_INSTITUTIONSITE\",operation:\"update\",primaryKeyField:\"ninstitutionsitecode\",\r\n                        userInfo:this.props.Login.userInfo,inputParam: this.props.Login.inputParam,ncontrolcode :editSiteId,\r\n                        instItem :this.props.Login.masterData.selectedInstitution}\r\n    \r\n    tabMap.set(\"IDS_INSTITUTIONSITE\",\r\n    <InstitutionSiteTab\r\n      controlMap={this.state.controlMap}\r\n      userRoleControlRights={this.state.userRoleControlRights}\r\n      selectedInstitution={this.props.Login.masterData.selectedInstitution}\r\n      InstitutionSite= {this.props.Login.masterData.InstitutionSite}\r\n      masterData={this.props.Login.masterData}\r\n      userInfo={this.props.Login.userInfo}\r\n      getInstitutionSiteData={this.props.getInstitutionSiteData}\r\n      inputParam={this.props.Login.inputParam}\r\n      selectedRecord={this.state.selectedRecord}\r\n      dataState={this.props.Login.dataState}\r\n      deleteRecord ={this.DeleteInstitutionSite}\r\n      deleteParam={deleteParam}\r\n      fetchRecord={this.props.getInstitutionSiteData}\r\n      editParam={editParam}\r\n      InstitutionSiteData={this.props.Login.masterData.InstitutionSite || []}\r\n      screenName=\"IDS_INSTITUTIONSITE\"\r\n      settings={this.props.Login.settings}\r\n    />);\r\n\r\n   \r\n    \r\n\r\n\r\n    tabMap.set(\"IDS_INSTITUTIONFILE\",\r\n    <InstitutionFileTab\r\n      controlMap={this.state.controlMap}\r\n      userRoleControlRights={this.state.userRoleControlRights}\r\n      userInfo={this.props.Login.userInfo}\r\n      inputParam={this.props.Login.inputParam}\r\n      InstitutionFile={this.props.Login.masterData.InstitutionFile || []}\r\n      settings = {this.props.Login.settings}\r\n      addInstitutionFile={this.props.addInstitutionFile}\r\n      deleteRecord={this.DeleteInstitutionFile}\r\n      deleteParam ={deleteTestParam}\r\n      //editParam={editTestParam}\r\n      viewInstitutionFile={this.viewInstitutionFile}\r\n      screenName=\"IDS_INSTITUTIONFILE\"\r\n\r\n\r\n    />);\r\n\r\n    return tabMap;\r\n  }\r\n\r\n  openFilter = () => {\r\n    let showFilter = !this.props.Login.showFilter\r\n    const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: { showFilter }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n}\r\n\r\ncloseFilter = () => {\r\n\r\n    const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: { showFilter: false }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n}\r\n\r\n  onFilterSubmit = () => {\r\n    if (this.props.Login.masterData.defaultInstitutionCategory) {\r\n        let inputParam = {\r\n            inputData: {\r\n                ninstitutioncatcode: this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode,\r\n                userinfo: this.props.Login.userInfo,\r\n               \r\n            },\r\n            classUrl: \"institution\",\r\n            methodUrl: \"InstitutionByCategory\"\r\n        }\r\n        this.props.changeInstitutionCategoryFilter(inputParam,this.props.Login.masterData.FilterInstitutionCategory,this.props.Login.masterData.defaultInstitutionCategory);\r\n    } else {\r\n        toast.warn(this.props.intl.formatMessage({ id: \"IDS_INSTITUTIONCATEGORYNOTAVAILABLE\" }));\r\n    }\r\n  }\r\n\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n\r\n        const inputParam = {\r\n            inputData: {\"ninstitutioncatcode\": this.props.Login.masterData.SelectedInstitutionCategory.ninstitutioncatcode,\r\n                    \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl:\"InstitutionByCategory\",\r\n            displayName:this.props.intl.formatMessage({ id: \"IDS_INSTITUTION\" }),\r\n        };\r\n        this.props.changeInstitutionCategoryFilter(inputParam,this.props.Login.masterData.FilterInstitutionCategory,this.props.Login.masterData.SelectedInstitutionCategory);\r\n\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error!==\"\"&& props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n    \r\n\r\n  closeModal = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n    let openModal = this.props.Login.openModal;\r\n    let selectedRecord = this.props.Login.selectedRecord;\r\n    if (this.props.Login.loadEsign) {\r\n      if (this.props.Login.operation === \"delete\") {\r\n        loadEsign = false;\r\n        openModal = false;\r\n        selectedRecord = {};\r\n      } else {\r\n        loadEsign = false;\r\n      }\r\n    } else {\r\n      openModal = false;\r\n      selectedRecord = {};\r\n     //this.setState({ selectedRecord });\r\n    }\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { openModal, loadEsign, selectedRecord, selectedId: null },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  onTabChange = (tabProps) => {\r\n    const screenName = tabProps.screenName;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { screenName },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n    onNumericInputOnChange = (value, name) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    };\r\n\r\n    onInputOnChange = (event,optional) => {\r\n      const selectedRecord = this.state.selectedRecord || {};\r\n      if (event.target.type === \"checkbox\") {\r\n          selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n      }else if(event.target.type === \"radio\"){\r\n        selectedRecord[event.target.name] = optional;\r\n      }else {\r\n            if( event.target.name === \"sfaxno\"){\r\n                if(event.target.value !== \"\"){\r\n                    event.target.value = validatePhoneNumber(event.target.value);\r\n                    selectedRecord[event.target.name] = event.target.value !== \"\" ? event.target.value : selectedRecord[event.target.name];\r\n                }else {\r\n                    selectedRecord[event.target.name] = event.target.value;\r\n                }\r\n            }else{\r\n                selectedRecord[event.target.name] = event.target.value;\r\n            }\r\n          \r\n      }\r\n      this.setState({ selectedRecord });\r\n    };\r\n\r\n    onComboChangeFilter = (comboData,fieldName) => {\r\n        const selectedRecord =this.state.selectedRecord || [];\r\n        if(comboData){\r\n            if(fieldName===\"ninstitutioncatcode\"){\r\n               if(comboData.value !== this.props.Login.masterData.defaultInstitutionCategory. ninstitutioncatcode) {\r\n                    let masterData = { ...this.props.Login.masterData, defaultInstitutionCategory: comboData.item}\r\n                    const updateInfo = { \r\n                        typeName: DEFAULT_RETURN,\r\n                        data: { masterData }\r\n                    }\r\n                    this.props.updateStore(updateInfo);\r\n                }  \r\n            }           \r\n        }     \r\n    }\r\n\r\n    onComboChange=(comboData,fieldName)=> {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (comboData != null) {\r\n            if(fieldName===\"ninstitutioncatcode\"){\r\n                selectedRecord[fieldName] = comboData;\r\n                this.setState({ selectedRecord });\r\n            }else if(fieldName=== \"nsitecode\"){\r\n                selectedRecord[\"nsitecode\"] = comboData;\r\n                selectedRecord[\"ssitecode\"]= comboData.item[\"ssitecode\"];\r\n                this.setState({ selectedRecord });  \r\n            }else if(fieldName=== \"ncitycode\"){\r\n                selectedRecord[\"ncitycode\"] = comboData;\r\n                selectedRecord[\"scitycode\"]= comboData.item[\"scitycode\"];\r\n                this.setState({ selectedRecord });  \r\n            }else if(fieldName=== \"ncountrycode\"){\r\n                selectedRecord[\"ncountrycode\"] = comboData;\r\n                this.setState({ selectedRecord });  \r\n            }\r\n\r\n           \r\n        }\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        let postParam = undefined;\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        let dataState = undefined;\r\n\r\n        if(this.props.Login.screenName === \"IDS_INSTITUTION\"){\r\n            if (this.props.Login.operation === \"update\") {  // edit\r\n                const selectedRecord=this.state.selectedRecord;\r\n                    postParam = {\r\n                      inputListName: \"Institution\",\r\n                      selectedObject: \"selectedInstitution\",\r\n                      primaryKeyField: \"ninstitutioncode\",\r\n                    };\r\n                  inputData[\"institution\"] = {};\r\n    \r\n                  this.fieldInstitutionList.map(item => {\r\n                      return inputData[\"institution\"][item] = selectedRecord[item] !== null ? selectedRecord[item] : \"\";\r\n                 })\r\n                 inputData[\"institution\"][\"ninstitutioncode\"] =selectedRecord[\"ninstitutioncode\"] ? selectedRecord[\"ninstitutioncode\"] : -1;\r\n                 inputData[\"institution\"][\"ninstitutioncatcode\"] = this.state.selectedRecord ? this.state.selectedRecord.ninstitutioncatcode.value : -1;\r\n                 dataState = this.state.dataState;\r\n            }else {\r\n                  //add               \r\n                  inputData[\"institution\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n    \r\n    \r\n                  this.fieldInstitutionList.map(item => {\r\n                      return inputData[\"institution\"][item] = this.state.selectedRecord[item]!==undefined ? this.state.selectedRecord[item]:\"\";\r\n                  })\r\n                  inputData[\"institution\"][\"ninstitutioncatcode\"] = this.state.selectedRecord ? this.state.selectedRecord.ninstitutioncatcode.value : -1;\r\n                }\r\n       \r\n            const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"Institution\",\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: inputData,\r\n            selectedId: this.state.selectedRecord[\"ninstututioncode\"],\r\n            operation: this.props.Login.operation, saveType, formRef, dataState,\r\n            searchRef: this.searchRef,\r\n            postParam:postParam\r\n            }\r\n            this.setState({ FilterInstitutionCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                          loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                          openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }),\r\n                          operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }else {\r\n                    this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n            }\r\n        }else if(this.props.Login.screenName === \"IDS_INSTITUTIONSITE\"){\r\n\r\n            const isValidateEmail = this.state.selectedRecord[\"semail\"]? validateEmail(this.state.selectedRecord[\"semail\"]): true;\r\n            if(isValidateEmail){\r\n                \r\n            if (this.props.Login.operation === \"update\") {  // edit\r\n                const selectedRecord=this.state.selectedRecord;\r\n                    // postParam = {\r\n                    //   inputListName: \"InstitutionSite\",\r\n                    //   selectedObject: \"selectedInstitutionSite\",\r\n                    //   primaryKeyField: \"ninstitutionsitecode\",\r\n                    // };\r\n                  inputData[\"institutionsite\"] = {};\r\n\r\n                  inputData[\"institutionsite\"][\"ninstitutionsitecode\"] =selectedRecord[\"ninstitutionsitecode\"] ? selectedRecord[\"ninstitutionsitecode\"] : -1;\r\n                  inputData[\"institutionsite\"][\"ninstitutioncode\"] = this.props.Login.instItem[\"ninstitutioncode\"];;\r\n                  inputData[\"institutionsite\"][\"nlimssitecode\"] = this.state.selectedRecord[\"nsitecode\"] ? this.state.selectedRecord[\"nsitecode\"].value : -1;\r\n                  inputData[\"institutionsite\"][\"ncitycode\"] = this.state.selectedRecord[\"ncitycode\"] ? this.state.selectedRecord[\"ncitycode\"].value : -1;\r\n                  inputData[\"institutionsite\"][\"ncountrycode\"] = this.state.selectedRecord[\"ncountrycode\"] ? this.state.selectedRecord[\"ncountrycode\"].value : -1;\r\n    \r\n                  this.fieldInstitutionSiteList.map(item => {\r\n                      return inputData[\"institutionsite\"][item] = selectedRecord[item] !== null ? selectedRecord[item] : \"\";\r\n                 })\r\n                \r\n\r\n                 dataState = this.state.dataState;\r\n            }else {\r\n                //add               \r\n                //inputData[\"institutionsite\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };  \r\n                inputData[\"institutionsite\"] = {}; \r\n                inputData[\"institutionsite\"][\"ninstitutioncode\"] = this.props.Login.instItem[\"ninstitutioncode\"];;\r\n                inputData[\"institutionsite\"][\"nlimssitecode\"] = this.state.selectedRecord[\"nsitecode\"] ? this.state.selectedRecord[\"nsitecode\"].value : -1;\r\n                inputData[\"institutionsite\"][\"ncitycode\"] = this.state.selectedRecord[\"ncitycode\"] ? this.state.selectedRecord[\"ncitycode\"].value : -1;\r\n                inputData[\"institutionsite\"][\"ncountrycode\"] = this.state.selectedRecord[\"ncountrycode\"] ? this.state.selectedRecord[\"ncountrycode\"].value : -1;\r\n\r\n\r\n                this.fieldInstitutionSiteList.map(item => {\r\n                    return inputData[\"institutionsite\"][item] = this.state.selectedRecord[item]!==undefined ? this.state.selectedRecord[item]:\"\";\r\n                })\r\n            }\r\n            const inputParam = {\r\n                classUrl: this.props.Login.inputParam.classUrl,\r\n                methodUrl: \"InstitutionSite\",\r\n                displayName: this.props.Login.inputParam.displayName,\r\n                inputData: inputData,\r\n                selectedId: this.state.selectedRecord[\"ninstitutionsitecode\"],\r\n                operation: this.props.Login.operation, saveType, formRef, dataState,\r\n                searchRef: this.searchRef,\r\n                postParam:postParam\r\n            }\r\n            //this.setState({ FilterClientCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                          loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                          openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }),\r\n                          operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }else {\r\n                this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n            }\r\n            }else{\r\n                toast.info(this.props.intl.formatMessage({ id: \"IDS_ENTERVALIDEMAIL\" }))\r\n            }\r\n\r\n        }else if(this.props.Login.screenName === \"IDS_INSTITUTIONFILE\"){\r\n                const selectedRecord =this.state.selectedRecord;\r\n                const acceptedFiles = selectedRecord.sfilename;\r\n                const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n                let isFileEdited = transactionStatus.NO;\r\n                let institutionFileArray = [];\r\n                let institutionFile = {\r\n                    ninstitutioncode: this.props.Login.masterData.selectedInstitution.ninstitutioncode,\r\n                    ninstitutionfilecode: selectedRecord.ninstitutionfilecode ? selectedRecord.ninstitutionfilecode : 0,\r\n                    nstatus: transactionStatus.ACTIVE,\r\n                    nattachmenttypecode,\r\n                };\r\n                const formData = new FormData();\r\n                if (nattachmenttypecode === attachmentType.FTP) {\r\n                    if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                        acceptedFiles.forEach((file, index) => {\r\n                            const tempData = Object.assign({}, institutionFile);\r\n                            const splittedFileName = file.name.split('.');\r\n                            const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                            const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                            const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                            const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.ntestfilecode && selectedRecord.ntestfilecode > 0\r\n                                && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                            tempData[\"sfilename\"] = file.name;\r\n                            tempData[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n                            tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                            tempData[\"ssystemfilename\"] = uniquefilename;\r\n                            tempData[\"nfilesize\"] = file.size;\r\n                            formData.append(\"uploadedFile\" + index, file);\r\n                            formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                            institutionFileArray.push(tempData);\r\n                        });  \r\n                        \r\n                        formData.append(\"filecount\", acceptedFiles.length);\r\n                        isFileEdited = transactionStatus.YES;\r\n                    }else{\r\n                        institutionFile[\"sfilename\"] = selectedRecord.sfilename;\r\n                        institutionFile[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n                        institutionFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                        institutionFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                        institutionFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                        institutionFileArray.push(institutionFile);\r\n                    }   \r\n                }else{\r\n                    institutionFile[\"sfilename\"] = selectedRecord.slinkfilename.trim();\r\n                    institutionFile[\"sfiledesc\"] = selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\";\r\n                    institutionFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n                    institutionFile[\"ssystemfilename\"] = \"\";\r\n                    institutionFile[\"nfilesize\"] = 0;\r\n                    institutionFileArray.push(institutionFile);\r\n                }\r\n                formData.append(\"isFileEdited\", isFileEdited);\r\n                formData.append(\"institutionfile\", JSON.stringify(institutionFileArray));\r\n                let selectedId = null;\r\n                let postParam = undefined;\r\n                if ( this.props.Login.operation === \"update\"){\r\n                    postParam =  { inputListName : \"Institution\", selectedObject : \"selectedInstitution\", primaryKeyField : \"ninstitutioncode\" };\r\n                    selectedId = selectedRecord[\"ninstitutionfilecode\"];               \r\n                }\r\n                const inputParam = {\r\n                    inputData: { userinfo: this.props.Login.userInfo},\r\n                    formData: formData,\r\n                    isFileupload: true,\r\n                    operation: this.props.Login.operation,\r\n                    classUrl: \"institution\",\r\n                    saveType, formRef, methodUrl: \"InstitutionFile\",postParam\r\n                }\r\n                \r\n                if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                    const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                        openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }),\r\n                        operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                    this.props.updateStore(updateInfo);\r\n                }else {\r\n                    this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n                }\r\n\r\n        }\r\n\r\n        \r\n        \r\n    }\r\n    \r\n    ConfirmDelete = (deleteId) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.DeleteInstitution(\"delete\",deleteId));\r\n    }\r\n\r\n    DeleteInstitutionFile = (deleteTestParam) => {\r\n        let inputData = [];\r\n        let ncontrolcode =deleteTestParam.ncontrolCode;\r\n        let operation =deleteTestParam.operation;\r\n        inputData[\"institutionfile\"] = deleteTestParam.selectedRecord;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institutionfile\", selectedObject: \"selectedInstitutionFile\",\r\n            primaryKeyField: \"ninstitutionfilecode\",\r\n            primaryKeyValue: deleteTestParam.selectedRecord.ninstitutionfilecode,\r\n            fetchUrl: \"institution/getInstitutionFile\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"InstitutionFile\", \r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolcode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openModal: true, screenName: \"Institution\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    \r\n    DeleteInstitutionSite = (deleteParam) => {\r\n        let inputData = [];\r\n        let ncontrolcode =deleteParam.ncontrolCode;\r\n        let operation =deleteParam.operation;\r\n        inputData[\"institutionsite\"] = deleteParam.selectedRecord;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institutionsite\", selectedObject: \"selectedInstitutionSite\",\r\n            primaryKeyField: \"ninstitutionsitecode\",\r\n            primaryKeyValue: deleteParam.selectedRecord.ninstitutionsitecode,\r\n            fetchUrl: \"institution/getInstitutionSite\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"InstitutionSite\", \r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolcode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openModal: true, screenName: \"Institution\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    DeleteInstitution= (operation, ncontrolCode) => {\r\n        let inputData = [];\r\n\r\n        inputData[\"institution\"] = this.props.Login.masterData.selectedInstitution;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institution\", selectedObject: \"selectedInstitution\",\r\n            primaryKeyField: \"ninstitutioncode\",\r\n            primaryKeyValue: this.props.Login.masterData.selectedInstitution.ninstitutioncode,\r\n            fetchUrl: \"institution/getInstitution\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"Institution\", \r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openModal: true, screenName: \"Institution\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    viewInstitutionFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                institutionfile: filedata,\r\n                userinfo: this.props.Login.userInfo\r\n            },\r\n            classUrl: \"institution\",\r\n            operation: \"view\",\r\n            methodUrl: \"InstitutionFile\",\r\n            screenName: \"IDS_INSTITUTION\"\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n    onDropInstitutionFile = (attachedFiles, fieldName, maxSize) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(\r\n          selectedRecord[fieldName],\r\n          attachedFiles,\r\n          maxSize\r\n        );\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    };\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(\r\n          selectedRecord[fieldName],\r\n          file\r\n        );\r\n    \r\n        this.setState({\r\n          selectedRecord,\r\n          actionType: \"delete\",\r\n        });\r\n    };\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n    generateBreadCrumData() {\r\n        const breadCrumbData = [];\r\n        if (this.props.Login.masterData && this.props.Login.masterData.FilterInstitutionCategory) {\r\n\r\n            breadCrumbData.push(\r\n                {\r\n                    \"label\": \"IDS_INSTITUTIONCATEGORY\",\r\n                    \"value\": this.props.Login.masterData.SelectedInstitutionCategory ? this.props.Login.masterData.SelectedInstitutionCategory.sinstitutioncatname : \"-\"\r\n                }\r\n            );\r\n        }\r\n        return breadCrumbData;\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            selectedRecord =  this.props.Login.selectedRecord \r\n            this.setState({ selectedRecord});\r\n        }\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({  userRoleControlRights, controlMap, data: this.props.Login.masterData});\r\n            }\r\n            else {\r\n\r\n                let { dataState } = this.state;\r\n                if (this.props.Login.dataState === undefined) {\r\n                    dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 }\r\n                }\r\n\r\n                this.setState({ data: this.props.Login.masterData, dataState,selectedRecord :this.props.Login.selectedRecord  });\r\n            }\r\n\r\n            \r\n\r\n            let FilterInstitutionCategory = this.state.FilterInstitutionCategory || {};\r\n\r\n            if (this.props.Login.masterData.FilterInstitutionCategory !== previousProps.Login.masterData.FilterInstitutionCategory) {\r\n                const InstitutionCategoryMap = constructOptionList(this.props.Login.masterData.FilterInstitutionCategory || [], \"ninstitutioncatcode\", \"sinstitutioncatname\", 'ninstitutioncatcode', 'descending', false);\r\n                FilterInstitutionCategory = InstitutionCategoryMap.get(\"OptionList\");               \r\n            } \r\n            this.setState({ FilterInstitutionCategory});\r\n\r\n            \r\n        }\r\n       \r\n        \r\n        \r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            const filterData = this.generateBreadCrumData();\r\n            this.setState({ filterData });\r\n        }\r\n    }\r\n    \r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService,crudMaster,validateEsignCredential,updateStore,getInstitutionDetail,getInstitutionCombo,getInstitutionSiteData,addInstitutionFile,changeInstitutionCategoryFilter,viewAttachment,filterColumnData\r\n})(injectIntl(Institution));\r\n"]},"metadata":{},"sourceType":"module"}