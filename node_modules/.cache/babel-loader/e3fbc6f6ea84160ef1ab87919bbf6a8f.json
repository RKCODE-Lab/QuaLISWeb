{"ast":null,"code":"var _jsxFileName = \"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\src\\\\pages\\\\submitter\\\\institution\\\\Institution.jsx\";\nimport React from \"react\";\nimport { connect } from 'react-redux';\nimport { FormattedMessage, injectIntl } from \"react-intl\";\nimport { callService, crudMaster, validateEsignCredential, updateStore, getInstitutionDetail, getInstitutionCombo, getInstitutionSiteData, addInstitutionFile, changeInstitutionCategoryFilter, viewAttachment, filterColumnData } from \"../../../actions\";\nimport BreadcrumbComponent from \"../../../components/Breadcrumb.Component\";\nimport { Affix } from 'rsuite';\nimport { constructOptionList, getControlMap, showEsign, onDropAttachFileList, deleteAttachmentDropZone, create_UUID, validatePhoneNumber, validateEmail } from '../../../components/CommonScript';\nimport { Row, Col, Card, FormGroup, FormLabel, Nav } from \"react-bootstrap\";\nimport { ContentPanel } from '../../product/product.styled';\nimport ListMaster from \"../../../components/list-master/list-master.component\";\nimport ReactTooltip from 'react-tooltip';\nimport InstitutionCategoryFilter from \"./InstitutionCategoryFilter\";\nimport { ReadOnlyText } from '../../../components/App.styles';\nimport CustomTab from \"../../../components/custom-tabs/custom-tabs.component\";\nimport InstitutionSiteTab from \"./InstitutionSiteTab\";\nimport InstitutionFileTab from \"./InstitutionFileTab\";\nimport { DEFAULT_RETURN } from \"../../../actions/LoginTypes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPencilAlt, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport SlideOutModal from \"../../../components/slide-out-modal/SlideOutModal\";\nimport Esign from \"../../audittrail/Esign\";\nimport AddInstitution from \"./AddInstitution\";\nimport AddInstitutionSite from \"./AddInstitutionSite\";\nimport AddInstitutionFile from \"./AddInstitutionFile\";\nimport ConfirmMessage from '../../../components/confirm-alert/confirm-message.component';\nimport { toast } from 'react-toastify';\nimport { attachmentType, transactionStatus } from \"../../../components/Enumeration\";\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass Institution extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.tabDetail = () => {\n      const tabMap = new Map();\n      const editSiteId = this.state.controlMap.has(\"EditInstitutionSite\") && this.state.controlMap.get(\"EditInstitutionSite\").ncontrolcode;\n      const deleteSiteId = this.state.controlMap.has(\"DeleteInstitutionSite\") && this.state.controlMap.get(\"DeleteInstitutionSite\").ncontrolcode;\n      const deleteFileId = this.state.controlMap.has(\"DeleteInstitutionFile\") && this.state.controlMap.get(\"DeleteInstitutionFile\").ncontrolcode;\n      const deleteParam = {\n        operation: \"delete\",\n        deleteSiteId\n      };\n      const deleteTestParam = {\n        operation: \"delete\",\n        deleteFileId\n      };\n      const editParam = {\n        screenName: \"IDS_INSTITUTIONSITE\",\n        operation: \"update\",\n        primaryKeyField: \"ninstitutionsitecode\",\n        userInfo: this.props.Login.userInfo,\n        inputParam: this.props.Login.inputParam,\n        ncontrolcode: editSiteId,\n        instItem: this.props.Login.masterData.selectedInstitution\n      };\n      tabMap.set(\"IDS_INSTITUTIONSITE\", /*#__PURE__*/React.createElement(InstitutionSiteTab, {\n        controlMap: this.state.controlMap,\n        userRoleControlRights: this.state.userRoleControlRights,\n        selectedInstitution: this.props.Login.masterData.selectedInstitution,\n        InstitutionSite: this.props.Login.masterData.InstitutionSite,\n        masterData: this.props.Login.masterData,\n        userInfo: this.props.Login.userInfo,\n        getInstitutionSiteData: this.props.getInstitutionSiteData,\n        inputParam: this.props.Login.inputParam,\n        selectedRecord: this.state.selectedRecord,\n        dataState: this.props.Login.dataState,\n        deleteRecord: this.DeleteInstitutionSite,\n        deleteParam: deleteParam,\n        fetchRecord: this.props.getInstitutionSiteData,\n        editParam: editParam,\n        InstitutionSiteData: this.props.Login.masterData.InstitutionSite || [],\n        screenName: \"IDS_INSTITUTIONSITE\",\n        settings: this.props.Login.settings,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 5\n        }\n      }));\n      tabMap.set(\"IDS_INSTITUTIONFILE\", /*#__PURE__*/React.createElement(InstitutionFileTab, {\n        controlMap: this.state.controlMap,\n        userRoleControlRights: this.state.userRoleControlRights,\n        userInfo: this.props.Login.userInfo,\n        inputParam: this.props.Login.inputParam,\n        InstitutionFile: this.props.Login.masterData.InstitutionFile || [],\n        settings: this.props.Login.settings,\n        addInstitutionFile: this.props.addInstitutionFile,\n        deleteRecord: this.DeleteInstitutionFile,\n        deleteParam: deleteTestParam //editParam={editTestParam}\n        ,\n        viewInstitutionFile: this.viewInstitutionFile,\n        screenName: \"IDS_INSTITUTIONFILE\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 5\n        }\n      }));\n      return tabMap;\n    };\n\n    this.openFilter = () => {\n      let showFilter = !this.props.Login.showFilter;\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          showFilter\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.closeFilter = () => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          showFilter: false\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.onFilterSubmit = () => {\n      if (this.props.Login.masterData.defaultInstitutionCategory) {\n        let inputParam = {\n          inputData: {\n            ninstitutioncatcode: this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode,\n            userinfo: this.props.Login.userInfo\n          },\n          classUrl: \"institution\",\n          methodUrl: \"InstitutionByCategory\"\n        };\n        this.props.changeInstitutionCategoryFilter(inputParam, this.props.Login.masterData.FilterInstitutionCategory, this.props.Login.masterData.defaultInstitutionCategory);\n      } else {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_INSTITUTIONCATEGORYNOTAVAILABLE\"\n        }));\n      }\n    };\n\n    this.reloadData = () => {\n      this.searchRef.current.value = \"\";\n      const inputParam = {\n        inputData: {\n          \"ninstitutioncatcode\": this.props.Login.masterData.SelectedInstitutionCategory.ninstitutioncatcode,\n          \"userinfo\": this.props.Login.userInfo\n        },\n        classUrl: this.props.Login.inputParam.classUrl,\n        methodUrl: \"InstitutionByCategory\",\n        displayName: this.props.intl.formatMessage({\n          id: \"IDS_INSTITUTION\"\n        })\n      };\n      this.props.changeInstitutionCategoryFilter(inputParam, this.props.Login.masterData.FilterInstitutionCategory, this.props.Login.masterData.SelectedInstitutionCategory);\n    };\n\n    this.closeModal = () => {\n      let loadEsign = this.props.Login.loadEsign;\n      let openModal = this.props.Login.openModal;\n      let selectedRecord = this.props.Login.selectedRecord;\n\n      if (this.props.Login.loadEsign) {\n        if (this.props.Login.operation === \"delete\") {\n          loadEsign = false;\n          openModal = false;\n          selectedRecord = {};\n        } else {\n          loadEsign = false;\n        }\n      } else {\n        openModal = false;\n        selectedRecord = {}; //this.setState({ selectedRecord });\n      }\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openModal,\n          loadEsign,\n          selectedRecord,\n          selectedId: null\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.onTabChange = tabProps => {\n      const screenName = tabProps.screenName;\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          screenName\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.onNumericInputOnChange = (value, name) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[name] = value;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onInputOnChange = (event, optional) => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (event.target.type === \"checkbox\") {\n        selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\n      } else if (event.target.type === \"radio\") {\n        selectedRecord[event.target.name] = optional;\n      } else {\n        if (event.target.name === \"sfaxno\") {\n          if (event.target.value !== \"\") {\n            event.target.value = validatePhoneNumber(event.target.value);\n            selectedRecord[event.target.name] = event.target.value !== \"\" ? event.target.value : selectedRecord[event.target.name];\n          } else {\n            selectedRecord[event.target.name] = event.target.value;\n          }\n        } else {\n          selectedRecord[event.target.name] = event.target.value;\n        }\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onComboChangeFilter = (comboData, fieldName) => {\n      const selectedRecord = this.state.selectedRecord || [];\n\n      if (comboData) {\n        if (fieldName === \"ninstitutioncatcode\") {\n          if (comboData.value !== this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode) {\n            let masterData = { ...this.props.Login.masterData,\n              defaultInstitutionCategory: comboData.item\n            };\n            const updateInfo = {\n              typeName: DEFAULT_RETURN,\n              data: {\n                masterData\n              }\n            };\n            this.props.updateStore(updateInfo);\n          }\n        }\n      }\n    };\n\n    this.onComboChange = (comboData, fieldName) => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (comboData != null) {\n        if (fieldName === \"ninstitutioncatcode\") {\n          selectedRecord[fieldName] = comboData;\n          this.setState({\n            selectedRecord\n          });\n        } else if (fieldName === \"nsitecode\") {\n          selectedRecord[\"nsitecode\"] = comboData;\n          selectedRecord[\"ssitecode\"] = comboData.item[\"ssitecode\"];\n          this.setState({\n            selectedRecord\n          });\n        } else if (fieldName === \"ncitycode\") {\n          selectedRecord[\"ncitycode\"] = comboData;\n          selectedRecord[\"scitycode\"] = comboData.item[\"scitycode\"];\n          this.setState({\n            selectedRecord\n          });\n        } else if (fieldName === \"ncountrycode\") {\n          selectedRecord[\"ncountrycode\"] = comboData;\n          this.setState({\n            selectedRecord\n          });\n        }\n      }\n    };\n\n    this.onSaveClick = (saveType, formRef) => {\n      let postParam = undefined;\n      let inputData = [];\n      inputData[\"userinfo\"] = this.props.Login.userInfo;\n      let dataState = undefined;\n\n      if (this.props.Login.screenName === \"IDS_INSTITUTION\") {\n        if (this.props.Login.operation === \"update\") {\n          // edit\n          const selectedRecord = this.state.selectedRecord;\n          postParam = {\n            inputListName: \"Institution\",\n            selectedObject: \"selectedInstitution\",\n            primaryKeyField: \"ninstitutioncode\"\n          };\n          inputData[\"institution\"] = {};\n          this.fieldInstitutionList.map(item => {\n            return inputData[\"institution\"][item] = selectedRecord[item] !== null ? selectedRecord[item] : \"\";\n          });\n          inputData[\"institution\"][\"ninstitutioncode\"] = selectedRecord[\"ninstitutioncode\"] ? selectedRecord[\"ninstitutioncode\"] : -1;\n          inputData[\"institution\"][\"ninstitutioncatcode\"] = this.state.selectedRecord ? this.state.selectedRecord.ninstitutioncatcode.value : -1;\n          dataState = this.state.dataState;\n        } else {\n          //add               \n          inputData[\"institution\"] = {\n            \"nsitecode\": this.props.Login.userInfo.nmastersitecode\n          };\n          this.fieldInstitutionList.map(item => {\n            return inputData[\"institution\"][item] = this.state.selectedRecord[item] !== undefined ? this.state.selectedRecord[item] : \"\";\n          });\n          inputData[\"institution\"][\"ninstitutioncatcode\"] = this.state.selectedRecord ? this.state.selectedRecord.ninstitutioncatcode.value : -1;\n        }\n\n        const inputParam = {\n          classUrl: this.props.Login.inputParam.classUrl,\n          methodUrl: \"Institution\",\n          displayName: this.props.Login.inputParam.displayName,\n          inputData: inputData,\n          selectedId: this.state.selectedRecord[\"ninstututioncode\"],\n          operation: this.props.Login.operation,\n          saveType,\n          formRef,\n          dataState,\n          searchRef: this.searchRef,\n          postParam: postParam\n        };\n        this.setState({\n          FilterInstitutionCategory: {\n            \"label\": this.state.selectedRecord.ninstitutioncatcode.label,\n            \"value\": this.state.selectedRecord.ninstitutioncatcode.value\n          }\n        });\n\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n          const updateInfo = {\n            typeName: DEFAULT_RETURN,\n            data: {\n              loadEsign: true,\n              screenData: {\n                inputParam,\n                masterData: this.props.Login.masterData\n              },\n              openModal: true,\n              screenName: this.props.intl.formatMessage({\n                id: this.props.Login.inputParam.displayName\n              }),\n              operation: this.props.Login.operation\n            }\n          };\n          this.props.updateStore(updateInfo);\n        } else {\n          this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\n        }\n      } else if (this.props.Login.screenName === \"IDS_INSTITUTIONSITE\") {\n        const isValidateEmail = this.state.selectedRecord[\"semail\"] ? validateEmail(this.state.selectedRecord[\"semail\"]) : true;\n\n        if (isValidateEmail) {\n          if (this.props.Login.operation === \"update\") {\n            // edit\n            const selectedRecord = this.state.selectedRecord; // postParam = {\n            //   inputListName: \"InstitutionSite\",\n            //   selectedObject: \"selectedInstitutionSite\",\n            //   primaryKeyField: \"ninstitutionsitecode\",\n            // };\n\n            inputData[\"institutionsite\"] = {};\n            inputData[\"institutionsite\"][\"ninstitutionsitecode\"] = selectedRecord[\"ninstitutionsitecode\"] ? selectedRecord[\"ninstitutionsitecode\"] : -1;\n            inputData[\"institutionsite\"][\"ninstitutioncode\"] = this.props.Login.instItem[\"ninstitutioncode\"];\n            ;\n            inputData[\"institutionsite\"][\"nlimssitecode\"] = this.state.selectedRecord[\"nsitecode\"] ? this.state.selectedRecord[\"nsitecode\"].value : -1;\n            inputData[\"institutionsite\"][\"ncitycode\"] = this.state.selectedRecord[\"ncitycode\"] ? this.state.selectedRecord[\"ncitycode\"].value : -1;\n            inputData[\"institutionsite\"][\"ncountrycode\"] = this.state.selectedRecord[\"ncountrycode\"] ? this.state.selectedRecord[\"ncountrycode\"].value : -1;\n            this.fieldInstitutionSiteList.map(item => {\n              return inputData[\"institutionsite\"][item] = selectedRecord[item] !== null ? selectedRecord[item] : \"\";\n            });\n            dataState = this.state.dataState;\n          } else {\n            //add               \n            //inputData[\"institutionsite\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };  \n            inputData[\"institutionsite\"] = {};\n            inputData[\"institutionsite\"][\"ninstitutioncode\"] = this.props.Login.instItem[\"ninstitutioncode\"];\n            ;\n            inputData[\"institutionsite\"][\"nlimssitecode\"] = this.state.selectedRecord[\"nsitecode\"] ? this.state.selectedRecord[\"nsitecode\"].value : -1;\n            inputData[\"institutionsite\"][\"ncitycode\"] = this.state.selectedRecord[\"ncitycode\"] ? this.state.selectedRecord[\"ncitycode\"].value : -1;\n            inputData[\"institutionsite\"][\"ncountrycode\"] = this.state.selectedRecord[\"ncountrycode\"] ? this.state.selectedRecord[\"ncountrycode\"].value : -1;\n            this.fieldInstitutionSiteList.map(item => {\n              return inputData[\"institutionsite\"][item] = this.state.selectedRecord[item] !== undefined ? this.state.selectedRecord[item] : \"\";\n            });\n          }\n\n          const inputParam = {\n            classUrl: this.props.Login.inputParam.classUrl,\n            methodUrl: \"InstitutionSite\",\n            displayName: this.props.Login.inputParam.displayName,\n            inputData: inputData,\n            selectedId: this.state.selectedRecord[\"ninstitutionsitecode\"],\n            operation: this.props.Login.operation,\n            saveType,\n            formRef,\n            dataState,\n            searchRef: this.searchRef,\n            postParam: postParam\n          }; //this.setState({ FilterClientCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\n\n          if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n            const updateInfo = {\n              typeName: DEFAULT_RETURN,\n              data: {\n                loadEsign: true,\n                screenData: {\n                  inputParam,\n                  masterData: this.props.Login.masterData\n                },\n                openModal: true,\n                screenName: this.props.intl.formatMessage({\n                  id: this.props.Login.inputParam.displayName\n                }),\n                operation: this.props.Login.operation\n              }\n            };\n            this.props.updateStore(updateInfo);\n          } else {\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\n          }\n        } else {\n          toast.info(this.props.intl.formatMessage({\n            id: \"IDS_ENTERVALIDEMAIL\"\n          }));\n        }\n      } else if (this.props.Login.screenName === \"IDS_INSTITUTIONFILE\") {\n        const selectedRecord = this.state.selectedRecord;\n        const acceptedFiles = selectedRecord.sfilename;\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\n        let isFileEdited = transactionStatus.NO;\n        let institutionFileArray = [];\n        let institutionFile = {\n          ninstitutioncode: this.props.Login.masterData.selectedInstitution.ninstitutioncode,\n          ninstitutionfilecode: selectedRecord.ninstitutionfilecode ? selectedRecord.ninstitutionfilecode : 0,\n          nstatus: transactionStatus.ACTIVE,\n          nattachmenttypecode\n        };\n        const formData = new FormData();\n\n        if (nattachmenttypecode === attachmentType.FTP) {\n          if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\n            acceptedFiles.forEach((file, index) => {\n              const tempData = Object.assign({}, institutionFile);\n              const splittedFileName = file.name.split('.');\n              const fileExtension = file.name.split('.')[splittedFileName.length - 1];\n              const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\n              const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\n              const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.ntestfilecode && selectedRecord.ntestfilecode > 0 && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\n              tempData[\"sfilename\"] = file.name;\n              tempData[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\n              tempData[\"nlinkcode\"] = transactionStatus.NA;\n              tempData[\"ssystemfilename\"] = uniquefilename;\n              tempData[\"nfilesize\"] = file.size;\n              formData.append(\"uploadedFile\" + index, file);\n              formData.append(\"uniquefilename\" + index, uniquefilename);\n              institutionFileArray.push(tempData);\n            });\n            formData.append(\"filecount\", acceptedFiles.length);\n            isFileEdited = transactionStatus.YES;\n          } else {\n            institutionFile[\"sfilename\"] = selectedRecord.sfilename;\n            institutionFile[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\n            institutionFile[\"nlinkcode\"] = transactionStatus.NA;\n            institutionFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\n            institutionFile[\"nfilesize\"] = selectedRecord.nfilesize;\n            institutionFileArray.push(institutionFile);\n          }\n        } else {\n          institutionFile[\"sfilename\"] = selectedRecord.slinkfilename.trim();\n          institutionFile[\"sfiledesc\"] = selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\";\n          institutionFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\n          institutionFile[\"ssystemfilename\"] = \"\";\n          institutionFile[\"nfilesize\"] = 0;\n          institutionFileArray.push(institutionFile);\n        }\n\n        formData.append(\"isFileEdited\", isFileEdited);\n        formData.append(\"institutionfile\", JSON.stringify(institutionFileArray));\n        let selectedId = null;\n        let postParam = undefined;\n\n        if (this.props.Login.operation === \"update\") {\n          postParam = {\n            inputListName: \"Institution\",\n            selectedObject: \"selectedInstitution\",\n            primaryKeyField: \"ninstitutioncode\"\n          };\n          selectedId = selectedRecord[\"ninstitutionfilecode\"];\n        }\n\n        const inputParam = {\n          inputData: {\n            userinfo: this.props.Login.userInfo\n          },\n          formData: formData,\n          isFileupload: true,\n          operation: this.props.Login.operation,\n          classUrl: \"institution\",\n          saveType,\n          formRef,\n          methodUrl: \"InstitutionFile\",\n          postParam\n        };\n\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n          const updateInfo = {\n            typeName: DEFAULT_RETURN,\n            data: {\n              loadEsign: true,\n              screenData: {\n                inputParam,\n                masterData: this.props.Login.masterData\n              },\n              openModal: true,\n              screenName: this.props.intl.formatMessage({\n                id: this.props.Login.inputParam.displayName\n              }),\n              operation: this.props.Login.operation\n            }\n          };\n          this.props.updateStore(updateInfo);\n        } else {\n          this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\n        }\n      }\n    };\n\n    this.ConfirmDelete = deleteId => {\n      this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({\n        id: \"IDS_DELETE\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_DEFAULTCONFIRMMSG\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_OK\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_CANCEL\"\n      }), () => this.DeleteInstitution(\"delete\", deleteId));\n    };\n\n    this.DeleteInstitutionFile = deleteTestParam => {\n      let inputData = [];\n      let ncontrolcode = deleteTestParam.ncontrolCode;\n      let operation = deleteTestParam.operation;\n      inputData[\"institutionfile\"] = deleteTestParam.selectedRecord;\n      inputData[\"userinfo\"] = this.props.Login.userInfo;\n      const postParam = {\n        inputListName: \"institutionfile\",\n        selectedObject: \"selectedInstitutionFile\",\n        primaryKeyField: \"ninstitutionfilecode\",\n        primaryKeyValue: deleteTestParam.selectedRecord.ninstitutionfilecode,\n        fetchUrl: \"institution/getInstitutionFile\",\n        fecthInputObject: {\n          userinfo: this.props.Login.userInfo\n        }\n      };\n      const inputParam = {\n        methodUrl: \"InstitutionFile\",\n        classUrl: this.props.Login.inputParam.classUrl,\n        inputData: inputData,\n        operation: \"delete\",\n        postParam\n      };\n      const masterData = this.props.Login.masterData;\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolcode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData\n            },\n            openModal: true,\n            screenName: \"Institution\",\n            operation\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\n      }\n    };\n\n    this.DeleteInstitutionSite = deleteParam => {\n      let inputData = [];\n      let ncontrolcode = deleteParam.ncontrolCode;\n      let operation = deleteParam.operation;\n      inputData[\"institutionsite\"] = deleteParam.selectedRecord;\n      inputData[\"userinfo\"] = this.props.Login.userInfo;\n      const postParam = {\n        inputListName: \"institutionsite\",\n        selectedObject: \"selectedInstitutionSite\",\n        primaryKeyField: \"ninstitutionsitecode\",\n        primaryKeyValue: deleteParam.selectedRecord.ninstitutionsitecode,\n        fetchUrl: \"institution/getInstitutionSite\",\n        fecthInputObject: {\n          userinfo: this.props.Login.userInfo\n        }\n      };\n      const inputParam = {\n        methodUrl: \"InstitutionSite\",\n        classUrl: this.props.Login.inputParam.classUrl,\n        inputData: inputData,\n        operation: \"delete\",\n        postParam\n      };\n      const masterData = this.props.Login.masterData;\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolcode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData\n            },\n            openModal: true,\n            screenName: \"Institution\",\n            operation\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\n      }\n    };\n\n    this.DeleteInstitution = (operation, ncontrolCode) => {\n      let inputData = [];\n      inputData[\"institution\"] = this.props.Login.masterData.selectedInstitution;\n      inputData[\"userinfo\"] = this.props.Login.userInfo;\n      const postParam = {\n        inputListName: \"institution\",\n        selectedObject: \"selectedInstitution\",\n        primaryKeyField: \"ninstitutioncode\",\n        primaryKeyValue: this.props.Login.masterData.selectedInstitution.ninstitutioncode,\n        fetchUrl: \"institution/getInstitution\",\n        fecthInputObject: {\n          userinfo: this.props.Login.userInfo\n        }\n      };\n      const inputParam = {\n        methodUrl: \"Institution\",\n        classUrl: this.props.Login.inputParam.classUrl,\n        inputData: inputData,\n        operation: \"delete\",\n        postParam\n      };\n      const masterData = this.props.Login.masterData;\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData\n            },\n            openModal: true,\n            screenName: \"Institution\",\n            operation\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\n      }\n    };\n\n    this.viewInstitutionFile = filedata => {\n      const inputParam = {\n        inputData: {\n          institutionfile: filedata,\n          userinfo: this.props.Login.userInfo\n        },\n        classUrl: \"institution\",\n        operation: \"view\",\n        methodUrl: \"InstitutionFile\",\n        screenName: \"IDS_INSTITUTION\"\n      };\n      this.props.viewAttachment(inputParam);\n    };\n\n    this.onDropInstitutionFile = (attachedFiles, fieldName, maxSize) => {\n      let selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize);\n      this.setState({\n        selectedRecord,\n        actionType: \"new\"\n      });\n    };\n\n    this.deleteAttachment = (event, file, fieldName) => {\n      let selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file);\n      this.setState({\n        selectedRecord,\n        actionType: \"delete\"\n      });\n    };\n\n    this.validateEsign = () => {\n      const inputParam = {\n        inputData: {\n          \"userinfo\": { ...this.props.Login.userInfo,\n            sreason: this.state.selectedRecord[\"esigncomments\"]\n          },\n          password: this.state.selectedRecord[\"esignpassword\"]\n        },\n        screenData: this.props.Login.screenData\n      };\n      this.props.validateEsignCredential(inputParam, \"openModal\");\n    };\n\n    this.formRef = React.createRef();\n    this.confirmMessage = new ConfirmMessage();\n    this.searchRef = React.createRef();\n    this.fieldInstitutionList = [];\n    this.fieldInstitutionSiteList = [];\n    const _dataState = {\n      skip: 0,\n      take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\n    };\n    this.state = {\n      dataState: _dataState,\n      userRoleControlRights: [],\n      controlMap: new Map(),\n      selectedRecord: {}\n    };\n  }\n\n  render() {\n    let mandatoryFields = [];\n\n    if (this.props.Login.screenName === \"IDS_INSTITUTION\") {\n      mandatoryFields.push({\n        mandatory: true,\n        idsName: \"IDS_INSTITUTIONCATEGORY\",\n        dataField: \"ninstitutioncatcode\",\n        mandatoryLabel: \"IDS_SELECT\",\n        controlType: \"selectbox\"\n      }, {\n        mandatory: true,\n        idsName: \"IDS_INSTITUTION\",\n        dataField: \"sinstitutionname\",\n        mandatoryLabel: \"IDS_ENTER\",\n        controlType: \"textbox\"\n      });\n    } else if (this.props.Login.screenName === \"IDS_INSTITUTIONSITE\") {\n      mandatoryFields.push({\n        mandatory: true,\n        idsName: \"IDS_LIMSSITE\",\n        dataField: \"nsitecode\",\n        mandatoryLabel: \"IDS_SELECT\",\n        controlType: \"selectbox\"\n      }, {\n        mandatory: true,\n        idsName: \"IDS_INSTITUTIONSITE\",\n        dataField: \"sinstitutionsitename\",\n        mandatoryLabel: \"IDS_ENTER\",\n        controlType: \"textbox\"\n      }, {\n        mandatory: true,\n        idsName: \"IDS_CITY\",\n        dataField: \"ncitycode\",\n        mandatoryLabel: \"IDS_SELECT\",\n        controlType: \"selectbox\"\n      }, {\n        mandatory: true,\n        idsName: \"IDS_COUNTRY\",\n        dataField: \"ncountrycode\",\n        mandatoryLabel: \"IDS_SELECT\",\n        controlType: \"selectbox\"\n      });\n    }\n\n    this.fieldInstitutionList = [\"sinstitutionname\", \"sdescription\"];\n    this.fieldInstitutionSiteList = [\"sinstitutionsitename\", \"sinstitutionsiteaddress\", \"szipcode\", \"sstate\", \"stelephone\", \"sfaxno\", \"semail\", \"swebsite\"];\n    const addId = this.state.controlMap.has(\"AddInstitution\") && this.state.controlMap.get(\"AddInstitution\").ncontrolcode;\n    const editId = this.state.controlMap.has(\"EditInstitution\") && this.state.controlMap.get(\"EditInstitution\").ncontrolcode;\n    const deleteId = this.state.controlMap.has(\"DeleteInstitution\") && this.state.controlMap.get(\"DeleteInstitution\").ncontrolcode;\n    const filterParam = {\n      inputListName: \"Institution\",\n      selectedObject: \"selectedInstitution\",\n      primaryKeyField: \"ninstitutioncode\",\n      fetchUrl: \"institution/getSelectedInstitutionDetail\",\n      fecthInputObject: {\n        userinfo: this.props.Login.userInfo\n      },\n      masterData: this.props.Login.masterData,\n      searchFieldList: [\"sinstitutioncatname\", \"sinstitutionname\", \"sdescription\"]\n    };\n    const {\n      selectedInstitution\n    } = this.props.Login.masterData;\n    const breadCrumbData = this.state.filterData || [];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, breadCrumbData.length > 0 ? /*#__PURE__*/React.createElement(Affix, {\n      top: 53,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(BreadcrumbComponent, {\n      breadCrumbItem: breadCrumbData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 29\n      }\n    })) : \"\", /*#__PURE__*/React.createElement(Row, {\n      noGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(ListMaster, {\n      formatMessage: this.props.intl.formatMessage,\n      screenName: \"Institution\",\n      masterData: this.props.Login.masterData,\n      userInfo: this.props.Login.userInfo,\n      masterList: this.props.Login.masterData.searchedData || this.props.Login.masterData.Institution,\n      getMasterDetail: Institution => this.props.getInstitutionDetail(Institution, this.props.Login.userInfo, this.props.Login.masterData),\n      selectedMaster: this.props.Login.masterData.selectedInstitution,\n      primaryKeyField: \"ninstitutioncode\",\n      mainField: \"sinstitutionname\",\n      firstField: \"sinstitutioncatname\",\n      isIDSField: \"Yes\",\n      filterColumnData: this.props.filterColumnData,\n      filterParam: filterParam,\n      userRoleControlRights: this.state.userRoleControlRights,\n      addId: addId,\n      searchRef: this.searchRef,\n      reloadData: this.reloadData,\n      hidePaging: true,\n      openModal: () => this.props.getInstitutionCombo(\"IDS_INSTITUTION\", \"create\", \"ninstitutioncode\", this.props.Login.masterData, this.props.Login.userInfo, addId),\n      openFilter: this.openFilter,\n      closeFilter: this.closeFilter,\n      onFilterSubmit: this.onFilterSubmit,\n      showFilterIcon: true,\n      showFilter: this.props.Login.showFilter,\n      filterComponent: [{\n        \"IDS_INSTITUTIONCATEGORYFILTER\": /*#__PURE__*/React.createElement(InstitutionCategoryFilter, {\n          FilterInstitutionCategory: this.state.FilterInstitutionCategory || [],\n          nfilterInstitutionCategory: this.props.Login.masterData.defaultInstitutionCategory || {},\n          selectedRecord: this.state.selectedRecord || {},\n          onFilterComboChange: this.onComboChangeFilter,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 41\n          }\n        })\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(ContentPanel, {\n      className: \"panel-main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"border-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 41\n      }\n    }, this.props.Login.masterData.selectedInstitution ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 48\n      }\n    }, /*#__PURE__*/React.createElement(ReactTooltip, {\n      place: \"bottom\",\n      globalEventOff: \"click\",\n      id: \"tooltip_list_wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 49\n      }\n    }), /*#__PURE__*/React.createElement(Card.Title, {\n      className: \"product-title-main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 49\n      }\n    }, this.props.Login.masterData.selectedInstitution.sinstitutionname), /*#__PURE__*/React.createElement(Card.Subtitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex product-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"product-title-sub flex-grow-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 57\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"editInstitution\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_EDIT\"\n      }),\n      \"data-for\": \"tooltip_list_wrap\",\n      hidden: this.state.userRoleControlRights.indexOf(editId) === -1,\n      className: \"btn btn-circle outline-grey mr-2\",\n      onClick: e => this.props.getInstitutionCombo(\"IDS_INSTITUTION\", \"update\", \"ninstitutioncode\", this.props.Login.masterData, this.props.Login.userInfo, editId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPencilAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 57\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"deleteInstitution\",\n      className: \"btn btn-circle outline-grey mr-2 action-icons-wrap\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_DELETE\"\n      }),\n      \"data-for\": \"tooltip_list_wrap\",\n      hidden: this.state.userRoleControlRights.indexOf(deleteId) === -1,\n      onClick: () => this.ConfirmDelete(deleteId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTrashAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 57\n      }\n    })))))), /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 48\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_DESCRIPTION\",\n      messasge: \"Description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 69\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 65\n      }\n    }, this.props.Login.masterData.selectedInstitution.sdescription)))), selectedInstitution && /*#__PURE__*/React.createElement(CustomTab, {\n      tabDetail: this.tabDetail(),\n      onTabChange: this.onTabChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 57\n      }\n    }))) : \"\"))))))), this.props.Login.openModal && /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.Login.openModal,\n      closeModal: this.closeModal,\n      operation: this.props.Login.operation,\n      inputParam: this.props.Login.inputParam,\n      screenName: this.props.Login.screenName,\n      onSaveClick: this.onSaveClick,\n      esign: this.props.Login.loadEsign,\n      validateEsign: this.validateEsign,\n      masterStatus: this.props.Login.masterStatus,\n      mandatoryFields: mandatoryFields,\n      updateStore: this.props.updateStore,\n      selectedRecord: this.state.selectedRecord || {},\n      addComponent: this.props.Login.loadEsign ? /*#__PURE__*/React.createElement(Esign, {\n        operation: this.props.Login.operation,\n        onInputOnChange: this.onInputOnChange,\n        inputParam: this.props.Login.inputParam,\n        selectedRecord: this.state.selectedRecord || {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 29\n        }\n      }) : this.props.Login.screenName === \"IDS_INSTITUTION\" ? /*#__PURE__*/React.createElement(AddInstitution, {\n        onNumericInputOnChange: this.onNumericInputOnChange,\n        selectedRecord: this.state.selectedRecord || {},\n        onInputOnChange: this.onInputOnChange,\n        onComboChange: this.onComboChange,\n        InstitutionCategory: this.props.Login.InstitutionCategory,\n        operation: this.props.Login.operation,\n        inputParam: this.props.inputParam,\n        userInfo: this.props.Login.userInfo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 29\n        }\n      }) : this.props.Login.screenName === \"IDS_INSTITUTIONSITE\" ? /*#__PURE__*/React.createElement(AddInstitutionSite, {\n        selectedRecord: this.state.selectedRecord || {},\n        Site: this.props.Login.Site,\n        City: this.props.Login.City,\n        Country: this.props.Login.Country,\n        onComboChange: this.onComboChange,\n        onInputOnChange: this.onInputOnChange,\n        operation: this.props.Login.operation,\n        inputParam: this.props.inputParam,\n        userInfo: this.props.Login.userInfo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 29\n        }\n      }) : this.props.Login.screenName === \"IDS_INSTITUTIONFILE\" ? /*#__PURE__*/React.createElement(AddInstitutionFile, {\n        selectedRecord: this.state.selectedRecord || {},\n        onInputOnChange: this.onInputOnChange,\n        onDrop: this.onDropInstitutionFile,\n        label: this.props.intl.formatMessage({\n          id: \"IDS_FILENAME\"\n        }),\n        deleteAttachment: this.deleteAttachment,\n        linkMaster: this.props.Login.linkMaster,\n        maxSize: 20,\n        maxFiles: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 29\n        }\n      }) : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 21\n      }\n    }));\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\n      toast.warn(props.Login.masterStatus);\n      props.Login.masterStatus = \"\";\n    }\n\n    if (props.Login.error !== \"\" && props.Login.error !== state.error) {\n      toast.error(props.Login.error);\n      props.Login.error = \"\";\n    }\n\n    if (props.Login.selectedRecord === undefined) {\n      return {\n        selectedRecord: {}\n      };\n    }\n\n    return null;\n  }\n\n  generateBreadCrumData() {\n    const breadCrumbData = [];\n\n    if (this.props.Login.masterData && this.props.Login.masterData.FilterInstitutionCategory) {\n      breadCrumbData.push({\n        \"label\": \"IDS_INSTITUTIONCATEGORY\",\n        \"value\": this.props.Login.masterData.SelectedInstitutionCategory ? this.props.Login.masterData.SelectedInstitutionCategory.sinstitutioncatname : \"-\"\n      });\n    }\n\n    return breadCrumbData;\n  }\n\n  componentDidUpdate(previousProps) {\n    let selectedRecord = this.state.selectedRecord || {};\n\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n      selectedRecord = this.props.Login.selectedRecord;\n      this.setState({\n        selectedRecord\n      });\n    }\n\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\n      if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n        const userRoleControlRights = [];\n\n        if (this.props.Login.userRoleControlRights) {\n          this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item => userRoleControlRights.push(item.ncontrolcode));\n        }\n\n        const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode);\n        this.setState({\n          userRoleControlRights,\n          controlMap,\n          data: this.props.Login.masterData\n        });\n      } else {\n        let {\n          dataState\n        } = this.state;\n\n        if (this.props.Login.dataState === undefined) {\n          dataState = {\n            skip: 0,\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\n          };\n        }\n\n        this.setState({\n          data: this.props.Login.masterData,\n          dataState,\n          selectedRecord: this.props.Login.selectedRecord\n        });\n      }\n\n      let FilterInstitutionCategory = this.state.FilterInstitutionCategory || {};\n\n      if (this.props.Login.masterData.FilterInstitutionCategory !== previousProps.Login.masterData.FilterInstitutionCategory) {\n        const InstitutionCategoryMap = constructOptionList(this.props.Login.masterData.FilterInstitutionCategory || [], \"ninstitutioncatcode\", \"sinstitutioncatname\", 'ninstitutioncatcode', 'descending', false);\n        FilterInstitutionCategory = InstitutionCategoryMap.get(\"OptionList\");\n      }\n\n      this.setState({\n        FilterInstitutionCategory\n      });\n    }\n\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\n      const filterData = this.generateBreadCrumData();\n      this.setState({\n        filterData\n      });\n    }\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  callService,\n  crudMaster,\n  validateEsignCredential,\n  updateStore,\n  getInstitutionDetail,\n  getInstitutionCombo,\n  getInstitutionSiteData,\n  addInstitutionFile,\n  changeInstitutionCategoryFilter,\n  viewAttachment,\n  filterColumnData\n})(injectIntl(Institution));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/submitter/institution/Institution.jsx"],"names":["React","connect","FormattedMessage","injectIntl","callService","crudMaster","validateEsignCredential","updateStore","getInstitutionDetail","getInstitutionCombo","getInstitutionSiteData","addInstitutionFile","changeInstitutionCategoryFilter","viewAttachment","filterColumnData","BreadcrumbComponent","Affix","constructOptionList","getControlMap","showEsign","onDropAttachFileList","deleteAttachmentDropZone","create_UUID","validatePhoneNumber","validateEmail","Row","Col","Card","FormGroup","FormLabel","Nav","ContentPanel","ListMaster","ReactTooltip","InstitutionCategoryFilter","ReadOnlyText","CustomTab","InstitutionSiteTab","InstitutionFileTab","DEFAULT_RETURN","FontAwesomeIcon","faPencilAlt","faTrashAlt","SlideOutModal","Esign","AddInstitution","AddInstitutionSite","AddInstitutionFile","ConfirmMessage","toast","attachmentType","transactionStatus","mapStateToProps","state","Login","Institution","Component","constructor","props","tabDetail","tabMap","Map","editSiteId","controlMap","has","get","ncontrolcode","deleteSiteId","deleteFileId","deleteParam","operation","deleteTestParam","editParam","screenName","primaryKeyField","userInfo","inputParam","instItem","masterData","selectedInstitution","set","userRoleControlRights","InstitutionSite","selectedRecord","dataState","DeleteInstitutionSite","settings","InstitutionFile","DeleteInstitutionFile","viewInstitutionFile","openFilter","showFilter","updateInfo","typeName","data","closeFilter","onFilterSubmit","defaultInstitutionCategory","inputData","ninstitutioncatcode","userinfo","classUrl","methodUrl","FilterInstitutionCategory","warn","intl","formatMessage","id","reloadData","searchRef","current","value","SelectedInstitutionCategory","displayName","closeModal","loadEsign","openModal","selectedId","onTabChange","tabProps","onNumericInputOnChange","name","setState","onInputOnChange","event","optional","target","type","checked","onComboChangeFilter","comboData","fieldName","item","onComboChange","onSaveClick","saveType","formRef","postParam","undefined","inputListName","selectedObject","fieldInstitutionList","map","nmastersitecode","label","nformcode","ncontrolCode","screenData","isValidateEmail","fieldInstitutionSiteList","info","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","NO","institutionFileArray","institutionFile","ninstitutioncode","ninstitutionfilecode","nstatus","ACTIVE","formData","FormData","FTP","Array","isArray","length","forEach","file","index","tempData","Object","assign","splittedFileName","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","ntestfilecode","sfiledesc","trim","NA","size","append","push","YES","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","isFileupload","ConfirmDelete","deleteId","confirmMessage","confirm","DeleteInstitution","primaryKeyValue","fetchUrl","fecthInputObject","ninstitutionsitecode","filedata","institutionfile","onDropInstitutionFile","attachedFiles","maxSize","actionType","deleteAttachment","validateEsign","sreason","password","createRef","skip","take","parseInt","render","mandatoryFields","mandatory","idsName","dataField","mandatoryLabel","controlType","addId","editId","filterParam","searchFieldList","breadCrumbData","filterData","searchedData","sinstitutionname","indexOf","e","sdescription","masterStatus","InstitutionCategory","Site","City","Country","linkMaster","getDerivedStateFromProps","error","generateBreadCrumData","sinstitutioncatname","componentDidUpdate","previousProps","values","InstitutionCategoryMap"],"mappings":"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","sourcesContent":[" import React from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport {FormattedMessage,injectIntl } from \"react-intl\";\r\nimport { callService,crudMaster,validateEsignCredential,updateStore,getInstitutionDetail,getInstitutionCombo,\r\n         getInstitutionSiteData,addInstitutionFile,changeInstitutionCategoryFilter,viewAttachment,filterColumnData } from \"../../../actions\";\r\nimport BreadcrumbComponent from \"../../../components/Breadcrumb.Component\";\r\nimport { Affix } from 'rsuite';\r\nimport { constructOptionList, getControlMap, showEsign,onDropAttachFileList,deleteAttachmentDropZone,create_UUID,validatePhoneNumber,validateEmail } from '../../../components/CommonScript';\r\nimport { Row,Col,Card,FormGroup, FormLabel,Nav} from \"react-bootstrap\";\r\nimport { ContentPanel } from '../../product/product.styled';\r\nimport ListMaster from \"../../../components/list-master/list-master.component\";\r\nimport ReactTooltip from 'react-tooltip';\r\nimport InstitutionCategoryFilter  from  \"./InstitutionCategoryFilter\";\r\nimport { ReadOnlyText } from '../../../components/App.styles';\r\nimport CustomTab from \"../../../components/custom-tabs/custom-tabs.component\";\r\nimport InstitutionSiteTab from \"./InstitutionSiteTab\";\r\nimport InstitutionFileTab from \"./InstitutionFileTab\";\r\nimport { DEFAULT_RETURN } from \"../../../actions/LoginTypes\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPencilAlt, faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport SlideOutModal from \"../../../components/slide-out-modal/SlideOutModal\";\r\nimport Esign from \"../../audittrail/Esign\"; \r\nimport AddInstitution from \"./AddInstitution\";\r\nimport AddInstitutionSite from \"./AddInstitutionSite\";\r\nimport AddInstitutionFile from \"./AddInstitutionFile\";\r\nimport ConfirmMessage from '../../../components/confirm-alert/confirm-message.component';\r\nimport { toast } from 'react-toastify';\r\nimport { attachmentType,transactionStatus } from \"../../../components/Enumeration\";\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\nclass Institution extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.formRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n        this.searchRef = React.createRef();\r\n        this.fieldInstitutionList = [];\r\n        this.fieldInstitutionSiteList =[];\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state ={\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            selectedRecord: {}, \r\n        }\r\n       \r\n    }\r\n    render(){\r\n        let mandatoryFields = [];\r\n        if (this.props.Login.screenName === \"IDS_INSTITUTION\") {\r\n          mandatoryFields.push(\r\n            {\r\n              mandatory: true,\r\n              idsName: \"IDS_INSTITUTIONCATEGORY\",\r\n              dataField: \"ninstitutioncatcode\",\r\n              mandatoryLabel: \"IDS_SELECT\",\r\n              controlType: \"selectbox\",\r\n            },\r\n            {\r\n              mandatory: true,\r\n              idsName: \"IDS_INSTITUTION\",\r\n              dataField: \"sinstitutionname\",\r\n              mandatoryLabel: \"IDS_ENTER\",\r\n              controlType: \"textbox\",\r\n            },\r\n            \r\n          );\r\n         \r\n          \r\n          \r\n        }else if(this.props.Login.screenName === \"IDS_INSTITUTIONSITE\"){\r\n            mandatoryFields.push(\r\n                {\r\n                  mandatory: true,\r\n                  idsName: \"IDS_LIMSSITE\",\r\n                  dataField: \"nsitecode\",\r\n                  mandatoryLabel: \"IDS_SELECT\",\r\n                  controlType: \"selectbox\",\r\n                },\r\n                {\r\n                  mandatory: true,\r\n                  idsName: \"IDS_INSTITUTIONSITE\",\r\n                  dataField: \"sinstitutionsitename\",\r\n                  mandatoryLabel: \"IDS_ENTER\",\r\n                  controlType: \"textbox\",\r\n                },\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_CITY\",\r\n                    dataField: \"ncitycode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                  },\r\n                  {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_COUNTRY\",\r\n                    dataField: \"ncountrycode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                  },\r\n\r\n                \r\n                \r\n                \r\n            );\r\n        }\r\n\r\n        this.fieldInstitutionList = [\"sinstitutionname\", \"sdescription\"];\r\n        this.fieldInstitutionSiteList = [\"sinstitutionsitename\",\"sinstitutionsiteaddress\",\"szipcode\",\"sstate\",\"stelephone\",\"sfaxno\",\"semail\",\"swebsite\"];\r\n\r\n        \r\n                \r\n        const addId = this.state.controlMap.has(\"AddInstitution\") && this.state.controlMap.get(\"AddInstitution\").ncontrolcode;\r\n        const editId =  this.state.controlMap.has(\"EditInstitution\") && this.state.controlMap.get(\"EditInstitution\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"DeleteInstitution\") && this.state.controlMap.get(\"DeleteInstitution\").ncontrolcode;\r\n\r\n        const filterParam = {\r\n            inputListName: \"Institution\", selectedObject: \"selectedInstitution\", primaryKeyField: \"ninstitutioncode\",\r\n            fetchUrl: \"institution/getSelectedInstitutionDetail\", fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData,\r\n            searchFieldList: [\"sinstitutioncatname\", \"sinstitutionname\",\"sdescription\"]\r\n        };\r\n\r\n        const { selectedInstitution } = this.props.Login.masterData;\r\n        const breadCrumbData =this.state.filterData || [];\r\n        return(\r\n            <>\r\n                <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n                    {breadCrumbData.length > 0 ?\r\n                        <Affix top={53}>\r\n                            <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n                        </Affix> : \"\"\r\n                    }\r\n                    <Row noGutters={true}>\r\n                        <Col md={4}>\r\n                        <ListMaster\r\n                            formatMessage={this.props.intl.formatMessage}\r\n                            screenName={\"Institution\"}\r\n                            masterData={this.props.Login.masterData}\r\n                            userInfo={this.props.Login.userInfo}\r\n                            masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.Institution}\r\n                            getMasterDetail={(Institution) => this.props.getInstitutionDetail(Institution, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                            selectedMaster={this.props.Login.masterData.selectedInstitution}\r\n                            primaryKeyField=\"ninstitutioncode\"\r\n                            mainField=\"sinstitutionname\"\r\n                            firstField=\"sinstitutioncatname\"\r\n                            isIDSField=\"Yes\"\r\n                            filterColumnData={this.props.filterColumnData}\r\n                            filterParam={filterParam}\r\n                            userRoleControlRights={this.state.userRoleControlRights}\r\n                            addId={addId}\r\n                            searchRef={this.searchRef}\r\n                            reloadData={this.reloadData}\r\n                            hidePaging={true}\r\n                            openModal={() =>\r\n                                this.props.getInstitutionCombo(\r\n                                \"IDS_INSTITUTION\",\r\n                                \"create\",\r\n                                \"ninstitutioncode\",\r\n                                this.props.Login.masterData,\r\n                                this.props.Login.userInfo,\r\n                                addId\r\n                                )\r\n                              }\r\n                            openFilter={this.openFilter}\r\n                            closeFilter={this.closeFilter}\r\n                            onFilterSubmit={this.onFilterSubmit}\r\n                            showFilterIcon={true}\r\n                            showFilter={this.props.Login.showFilter}\r\n                            filterComponent={[\r\n                                {\r\n                                    \"IDS_INSTITUTIONCATEGORYFILTER\":\r\n                                        <InstitutionCategoryFilter\r\n                                        FilterInstitutionCategory={this.state.FilterInstitutionCategory || []}\r\n                                        nfilterInstitutionCategory ={this.props.Login.masterData.defaultInstitutionCategory ||{}}\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        onFilterComboChange={this.onComboChangeFilter}\r\n                                        />\r\n                                }\r\n                            ]}\r\n                        />\r\n                        </Col>\r\n                        <Col md={8}>\r\n                            <Row>\r\n                                <Col md={12}>\r\n                                    <ContentPanel className=\"panel-main-content\">\r\n                                        <Card className=\"border-0\">\r\n                                            {this.props.Login.masterData.selectedInstitution ?(\r\n                                               <>\r\n                                               <Card.Header>\r\n                                                <ReactTooltip\r\n                                                    place=\"bottom\"\r\n                                                    globalEventOff=\"click\"\r\n                                                    id=\"tooltip_list_wrap\"\r\n                                                />\r\n                                                <Card.Title className=\"product-title-main\">\r\n                                                    {this.props.Login.masterData.selectedInstitution.sinstitutionname}\r\n                                                </Card.Title>\r\n                                                <Card.Subtitle>\r\n                                                    <div className=\"d-flex product-category\">\r\n                                                        <h2 className=\"product-title-sub flex-grow-1\"></h2>\r\n                                                        <div className=\"d-inline\">\r\n                                                        <Nav.Link\r\n                                                            name=\"editInstitution\"\r\n                                                            data-tip={this.props.intl.formatMessage({id: \"IDS_EDIT\", })}\r\n                                                            data-for=\"tooltip_list_wrap\" hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                            className=\"btn btn-circle outline-grey mr-2\"\r\n                                                            onClick={(e) => this.props.getInstitutionCombo(\"IDS_INSTITUTION\",\"update\",\"ninstitutioncode\",this.props.Login.masterData,this.props.Login.userInfo,editId)}\r\n                                    \r\n                                                        >\r\n                                                        <FontAwesomeIcon icon={faPencilAlt} />\r\n                                                        </Nav.Link>\r\n                                                        <Nav.Link\r\n                                                            name=\"deleteInstitution\"\r\n                                                            className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                                            data-tip={this.props.intl.formatMessage({id: \"IDS_DELETE\",})}\r\n                                                            data-for=\"tooltip_list_wrap\"  hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                            onClick={() =>this.ConfirmDelete(deleteId)}\r\n                                                        >\r\n                                                        <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                        </Nav.Link>\r\n                                                        </div>    \r\n                                                    </div>\r\n                                                </Card.Subtitle>\r\n                                               </Card.Header>\r\n                                               <Card.Body>\r\n                                                    <Row>\r\n                                                        {/* <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_INSTITUTION\" messasge=\"Institution\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sinstitutionname}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col> */}\r\n                                                        {/* <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_INSTITUTIONCATEGORY\" messasge=\"Institution Category\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sinstitutioncatname}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col> */}\r\n                                                        <Col md={4}>\r\n                                                            <FormGroup>\r\n                                                                <FormLabel>\r\n                                                                    <FormattedMessage id=\"IDS_DESCRIPTION\" messasge=\"Description\"/>\r\n                                                                </FormLabel>\r\n                                                                <ReadOnlyText>\r\n                                                                    {this.props.Login.masterData.selectedInstitution.sdescription}\r\n                                                                </ReadOnlyText>\r\n                                                            </FormGroup>\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                    {selectedInstitution && (\r\n                                                        <CustomTab\r\n                                                            tabDetail={this.tabDetail()}\r\n                                                                onTabChange={this.onTabChange}\r\n                                                        />\r\n                                                    )}\r\n                                               </Card.Body>\r\n                                               </>     \r\n                                            ):(\r\n                                             \"\"\r\n                                            )}\r\n                                        </Card>    \r\n                                     </ContentPanel>   \r\n                                </Col>   \r\n                            </Row>\r\n                        </Col>  \r\n                    </Row>\r\n                </div>\r\n                {this.props.Login.openModal && (\r\n                    <SlideOutModal\r\n                        show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        mandatoryFields={mandatoryFields}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        addComponent={\r\n                             this.props.Login.loadEsign ? (\r\n                            <Esign\r\n                                operation={this.props.Login.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            ) : this.props.Login.screenName === \"IDS_INSTITUTION\" ? (\r\n                            <AddInstitution\r\n                                onNumericInputOnChange={this.onNumericInputOnChange}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onComboChange={this.onComboChange}\r\n                                InstitutionCategory={this.props.Login.InstitutionCategory}   \r\n                                operation={this.props.Login.operation}\r\n                                inputParam={this.props.inputParam}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                \r\n                            />\r\n                            ) : this.props.Login.screenName === \"IDS_INSTITUTIONSITE\" ? (\r\n                            <AddInstitutionSite\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                Site={this.props.Login.Site}\r\n                                City={this.props.Login.City}\r\n                                Country={this.props.Login.Country}\r\n                                onComboChange={this.onComboChange}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                operation={this.props.Login.operation}\r\n                                inputParam={this.props.inputParam}\r\n                                userInfo={this.props.Login.userInfo}\r\n\r\n                            />\r\n                            )  : this.props.Login.screenName ===\"IDS_INSTITUTIONFILE\" ? (\r\n                            <AddInstitutionFile\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onDrop={this.onDropInstitutionFile}\r\n                                label={this.props.intl.formatMessage({ id: \"IDS_FILENAME\" })}\r\n                                deleteAttachment={this.deleteAttachment}\r\n                                linkMaster ={this.props.Login.linkMaster}\r\n                                maxSize={20}\r\n                                maxFiles={1}\r\n                            />\r\n                            )  : (\r\n                            \"\"\r\n                            )\r\n                        }   \r\n                    />\r\n                )}\r\n            </>\r\n        )\r\n        \r\n    }\r\n\r\n  tabDetail = () => {\r\n    const tabMap = new Map();\r\n    \r\n    const editSiteId = this.state.controlMap.has(\"EditInstitutionSite\") &&  this.state.controlMap.get(\"EditInstitutionSite\").ncontrolcode;\r\n    const deleteSiteId = this.state.controlMap.has(\"DeleteInstitutionSite\") && this.state.controlMap.get(\"DeleteInstitutionSite\").ncontrolcode;    \r\n    const deleteFileId = this.state.controlMap.has(\"DeleteInstitutionFile\") && this.state.controlMap.get(\"DeleteInstitutionFile\").ncontrolcode;    \r\n    const deleteParam ={operation:\"delete\",deleteSiteId};\r\n    const deleteTestParam ={operation:\"delete\",deleteFileId};\r\n    const editParam = {screenName:\"IDS_INSTITUTIONSITE\",operation:\"update\",primaryKeyField:\"ninstitutionsitecode\",\r\n                        userInfo:this.props.Login.userInfo,inputParam: this.props.Login.inputParam,ncontrolcode :editSiteId,\r\n                        instItem :this.props.Login.masterData.selectedInstitution}\r\n    \r\n    tabMap.set(\"IDS_INSTITUTIONSITE\",\r\n    <InstitutionSiteTab\r\n      controlMap={this.state.controlMap}\r\n      userRoleControlRights={this.state.userRoleControlRights}\r\n      selectedInstitution={this.props.Login.masterData.selectedInstitution}\r\n      InstitutionSite= {this.props.Login.masterData.InstitutionSite}\r\n      masterData={this.props.Login.masterData}\r\n      userInfo={this.props.Login.userInfo}\r\n      getInstitutionSiteData={this.props.getInstitutionSiteData}\r\n      inputParam={this.props.Login.inputParam}\r\n      selectedRecord={this.state.selectedRecord}\r\n      dataState={this.props.Login.dataState}\r\n      deleteRecord ={this.DeleteInstitutionSite}\r\n      deleteParam={deleteParam}\r\n      fetchRecord={this.props.getInstitutionSiteData}\r\n      editParam={editParam}\r\n      InstitutionSiteData={this.props.Login.masterData.InstitutionSite || []}\r\n      screenName=\"IDS_INSTITUTIONSITE\"\r\n      settings={this.props.Login.settings}\r\n    />);\r\n\r\n   \r\n    \r\n\r\n\r\n    tabMap.set(\"IDS_INSTITUTIONFILE\",\r\n    <InstitutionFileTab\r\n      controlMap={this.state.controlMap}\r\n      userRoleControlRights={this.state.userRoleControlRights}\r\n      userInfo={this.props.Login.userInfo}\r\n      inputParam={this.props.Login.inputParam}\r\n      InstitutionFile={this.props.Login.masterData.InstitutionFile || []}\r\n      settings = {this.props.Login.settings}\r\n      addInstitutionFile={this.props.addInstitutionFile}\r\n      deleteRecord={this.DeleteInstitutionFile}\r\n      deleteParam ={deleteTestParam}\r\n      //editParam={editTestParam}\r\n      viewInstitutionFile={this.viewInstitutionFile}\r\n      screenName=\"IDS_INSTITUTIONFILE\"\r\n\r\n\r\n    />);\r\n\r\n    return tabMap;\r\n  }\r\n\r\n  openFilter = () => {\r\n    let showFilter = !this.props.Login.showFilter\r\n    const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: { showFilter }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n}\r\n\r\ncloseFilter = () => {\r\n\r\n    const updateInfo = {\r\n        typeName: DEFAULT_RETURN,\r\n        data: { showFilter: false }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n}\r\n\r\n  onFilterSubmit = () => {\r\n    if (this.props.Login.masterData.defaultInstitutionCategory) {\r\n        let inputParam = {\r\n            inputData: {\r\n                ninstitutioncatcode: this.props.Login.masterData.defaultInstitutionCategory.ninstitutioncatcode,\r\n                userinfo: this.props.Login.userInfo,\r\n               \r\n            },\r\n            classUrl: \"institution\",\r\n            methodUrl: \"InstitutionByCategory\"\r\n        }\r\n        this.props.changeInstitutionCategoryFilter(inputParam,this.props.Login.masterData.FilterInstitutionCategory,this.props.Login.masterData.defaultInstitutionCategory);\r\n    } else {\r\n        toast.warn(this.props.intl.formatMessage({ id: \"IDS_INSTITUTIONCATEGORYNOTAVAILABLE\" }));\r\n    }\r\n  }\r\n\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n\r\n        const inputParam = {\r\n            inputData: {\"ninstitutioncatcode\": this.props.Login.masterData.SelectedInstitutionCategory.ninstitutioncatcode,\r\n                    \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl:\"InstitutionByCategory\",\r\n            displayName:this.props.intl.formatMessage({ id: \"IDS_INSTITUTION\" }),\r\n        };\r\n        this.props.changeInstitutionCategoryFilter(inputParam,this.props.Login.masterData.FilterInstitutionCategory,this.props.Login.masterData.SelectedInstitutionCategory);\r\n\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error!==\"\"&& props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n    \r\n\r\n  closeModal = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n    let openModal = this.props.Login.openModal;\r\n    let selectedRecord = this.props.Login.selectedRecord;\r\n    if (this.props.Login.loadEsign) {\r\n      if (this.props.Login.operation === \"delete\") {\r\n        loadEsign = false;\r\n        openModal = false;\r\n        selectedRecord = {};\r\n      } else {\r\n        loadEsign = false;\r\n      }\r\n    } else {\r\n      openModal = false;\r\n      selectedRecord = {};\r\n     //this.setState({ selectedRecord });\r\n    }\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { openModal, loadEsign, selectedRecord, selectedId: null },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  onTabChange = (tabProps) => {\r\n    const screenName = tabProps.screenName;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { screenName },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n    onNumericInputOnChange = (value, name) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    };\r\n\r\n    onInputOnChange = (event,optional) => {\r\n      const selectedRecord = this.state.selectedRecord || {};\r\n      if (event.target.type === \"checkbox\") {\r\n          selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n      }else if(event.target.type === \"radio\"){\r\n        selectedRecord[event.target.name] = optional;\r\n      }else {\r\n            if( event.target.name === \"sfaxno\"){\r\n                if(event.target.value !== \"\"){\r\n                    event.target.value = validatePhoneNumber(event.target.value);\r\n                    selectedRecord[event.target.name] = event.target.value !== \"\" ? event.target.value : selectedRecord[event.target.name];\r\n                }else {\r\n                    selectedRecord[event.target.name] = event.target.value;\r\n                }\r\n            }else{\r\n                selectedRecord[event.target.name] = event.target.value;\r\n            }\r\n          \r\n      }\r\n      this.setState({ selectedRecord });\r\n    };\r\n\r\n    onComboChangeFilter = (comboData,fieldName) => {\r\n        const selectedRecord =this.state.selectedRecord || [];\r\n        if(comboData){\r\n            if(fieldName===\"ninstitutioncatcode\"){\r\n               if(comboData.value !== this.props.Login.masterData.defaultInstitutionCategory. ninstitutioncatcode) {\r\n                    let masterData = { ...this.props.Login.masterData, defaultInstitutionCategory: comboData.item}\r\n                    const updateInfo = { \r\n                        typeName: DEFAULT_RETURN,\r\n                        data: { masterData }\r\n                    }\r\n                    this.props.updateStore(updateInfo);\r\n                }  \r\n            }           \r\n        }     \r\n    }\r\n\r\n    onComboChange=(comboData,fieldName)=> {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (comboData != null) {\r\n            if(fieldName===\"ninstitutioncatcode\"){\r\n                selectedRecord[fieldName] = comboData;\r\n                this.setState({ selectedRecord });\r\n            }else if(fieldName=== \"nsitecode\"){\r\n                selectedRecord[\"nsitecode\"] = comboData;\r\n                selectedRecord[\"ssitecode\"]= comboData.item[\"ssitecode\"];\r\n                this.setState({ selectedRecord });  \r\n            }else if(fieldName=== \"ncitycode\"){\r\n                selectedRecord[\"ncitycode\"] = comboData;\r\n                selectedRecord[\"scitycode\"]= comboData.item[\"scitycode\"];\r\n                this.setState({ selectedRecord });  \r\n            }else if(fieldName=== \"ncountrycode\"){\r\n                selectedRecord[\"ncountrycode\"] = comboData;\r\n                this.setState({ selectedRecord });  \r\n            }\r\n\r\n           \r\n        }\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        let postParam = undefined;\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        let dataState = undefined;\r\n\r\n        if(this.props.Login.screenName === \"IDS_INSTITUTION\"){\r\n            if (this.props.Login.operation === \"update\") {  // edit\r\n                const selectedRecord=this.state.selectedRecord;\r\n                    postParam = {\r\n                      inputListName: \"Institution\",\r\n                      selectedObject: \"selectedInstitution\",\r\n                      primaryKeyField: \"ninstitutioncode\",\r\n                    };\r\n                  inputData[\"institution\"] = {};\r\n    \r\n                  this.fieldInstitutionList.map(item => {\r\n                      return inputData[\"institution\"][item] = selectedRecord[item] !== null ? selectedRecord[item] : \"\";\r\n                 })\r\n                 inputData[\"institution\"][\"ninstitutioncode\"] =selectedRecord[\"ninstitutioncode\"] ? selectedRecord[\"ninstitutioncode\"] : -1;\r\n                 inputData[\"institution\"][\"ninstitutioncatcode\"] = this.state.selectedRecord ? this.state.selectedRecord.ninstitutioncatcode.value : -1;\r\n                 dataState = this.state.dataState;\r\n            }else {\r\n                  //add               \r\n                  inputData[\"institution\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n    \r\n    \r\n                  this.fieldInstitutionList.map(item => {\r\n                      return inputData[\"institution\"][item] = this.state.selectedRecord[item]!==undefined ? this.state.selectedRecord[item]:\"\";\r\n                  })\r\n                  inputData[\"institution\"][\"ninstitutioncatcode\"] = this.state.selectedRecord ? this.state.selectedRecord.ninstitutioncatcode.value : -1;\r\n                }\r\n       \r\n            const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"Institution\",\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: inputData,\r\n            selectedId: this.state.selectedRecord[\"ninstututioncode\"],\r\n            operation: this.props.Login.operation, saveType, formRef, dataState,\r\n            searchRef: this.searchRef,\r\n            postParam:postParam\r\n            }\r\n            this.setState({ FilterInstitutionCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                          loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                          openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }),\r\n                          operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }else {\r\n                    this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n            }\r\n        }else if(this.props.Login.screenName === \"IDS_INSTITUTIONSITE\"){\r\n\r\n            const isValidateEmail = this.state.selectedRecord[\"semail\"]? validateEmail(this.state.selectedRecord[\"semail\"]): true;\r\n            if(isValidateEmail){\r\n                \r\n            if (this.props.Login.operation === \"update\") {  // edit\r\n                const selectedRecord=this.state.selectedRecord;\r\n                    // postParam = {\r\n                    //   inputListName: \"InstitutionSite\",\r\n                    //   selectedObject: \"selectedInstitutionSite\",\r\n                    //   primaryKeyField: \"ninstitutionsitecode\",\r\n                    // };\r\n                  inputData[\"institutionsite\"] = {};\r\n\r\n                  inputData[\"institutionsite\"][\"ninstitutionsitecode\"] =selectedRecord[\"ninstitutionsitecode\"] ? selectedRecord[\"ninstitutionsitecode\"] : -1;\r\n                  inputData[\"institutionsite\"][\"ninstitutioncode\"] = this.props.Login.instItem[\"ninstitutioncode\"];;\r\n                  inputData[\"institutionsite\"][\"nlimssitecode\"] = this.state.selectedRecord[\"nsitecode\"] ? this.state.selectedRecord[\"nsitecode\"].value : -1;\r\n                  inputData[\"institutionsite\"][\"ncitycode\"] = this.state.selectedRecord[\"ncitycode\"] ? this.state.selectedRecord[\"ncitycode\"].value : -1;\r\n                  inputData[\"institutionsite\"][\"ncountrycode\"] = this.state.selectedRecord[\"ncountrycode\"] ? this.state.selectedRecord[\"ncountrycode\"].value : -1;\r\n    \r\n                  this.fieldInstitutionSiteList.map(item => {\r\n                      return inputData[\"institutionsite\"][item] = selectedRecord[item] !== null ? selectedRecord[item] : \"\";\r\n                 })\r\n                \r\n\r\n                 dataState = this.state.dataState;\r\n            }else {\r\n                //add               \r\n                //inputData[\"institutionsite\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };  \r\n                inputData[\"institutionsite\"] = {}; \r\n                inputData[\"institutionsite\"][\"ninstitutioncode\"] = this.props.Login.instItem[\"ninstitutioncode\"];;\r\n                inputData[\"institutionsite\"][\"nlimssitecode\"] = this.state.selectedRecord[\"nsitecode\"] ? this.state.selectedRecord[\"nsitecode\"].value : -1;\r\n                inputData[\"institutionsite\"][\"ncitycode\"] = this.state.selectedRecord[\"ncitycode\"] ? this.state.selectedRecord[\"ncitycode\"].value : -1;\r\n                inputData[\"institutionsite\"][\"ncountrycode\"] = this.state.selectedRecord[\"ncountrycode\"] ? this.state.selectedRecord[\"ncountrycode\"].value : -1;\r\n\r\n\r\n                this.fieldInstitutionSiteList.map(item => {\r\n                    return inputData[\"institutionsite\"][item] = this.state.selectedRecord[item]!==undefined ? this.state.selectedRecord[item]:\"\";\r\n                })\r\n            }\r\n            const inputParam = {\r\n                classUrl: this.props.Login.inputParam.classUrl,\r\n                methodUrl: \"InstitutionSite\",\r\n                displayName: this.props.Login.inputParam.displayName,\r\n                inputData: inputData,\r\n                selectedId: this.state.selectedRecord[\"ninstitutionsitecode\"],\r\n                operation: this.props.Login.operation, saveType, formRef, dataState,\r\n                searchRef: this.searchRef,\r\n                postParam:postParam\r\n            }\r\n            //this.setState({ FilterClientCategory: { \"label\":  this.state.selectedRecord.ninstitutioncatcode.label, \"value\":  this.state.selectedRecord.ninstitutioncatcode.value } });\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                          loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                          openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }),\r\n                          operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }else {\r\n                this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n            }\r\n            }else{\r\n                toast.info(this.props.intl.formatMessage({ id: \"IDS_ENTERVALIDEMAIL\" }))\r\n            }\r\n\r\n        }else if(this.props.Login.screenName === \"IDS_INSTITUTIONFILE\"){\r\n                const selectedRecord =this.state.selectedRecord;\r\n                const acceptedFiles = selectedRecord.sfilename;\r\n                const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n                let isFileEdited = transactionStatus.NO;\r\n                let institutionFileArray = [];\r\n                let institutionFile = {\r\n                    ninstitutioncode: this.props.Login.masterData.selectedInstitution.ninstitutioncode,\r\n                    ninstitutionfilecode: selectedRecord.ninstitutionfilecode ? selectedRecord.ninstitutionfilecode : 0,\r\n                    nstatus: transactionStatus.ACTIVE,\r\n                    nattachmenttypecode,\r\n                };\r\n                const formData = new FormData();\r\n                if (nattachmenttypecode === attachmentType.FTP) {\r\n                    if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                        acceptedFiles.forEach((file, index) => {\r\n                            const tempData = Object.assign({}, institutionFile);\r\n                            const splittedFileName = file.name.split('.');\r\n                            const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                            const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                            const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                            const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.ntestfilecode && selectedRecord.ntestfilecode > 0\r\n                                && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                            tempData[\"sfilename\"] = file.name;\r\n                            tempData[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n                            tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                            tempData[\"ssystemfilename\"] = uniquefilename;\r\n                            tempData[\"nfilesize\"] = file.size;\r\n                            formData.append(\"uploadedFile\" + index, file);\r\n                            formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                            institutionFileArray.push(tempData);\r\n                        });  \r\n                        \r\n                        formData.append(\"filecount\", acceptedFiles.length);\r\n                        isFileEdited = transactionStatus.YES;\r\n                    }else{\r\n                        institutionFile[\"sfilename\"] = selectedRecord.sfilename;\r\n                        institutionFile[\"sfiledesc\"] = selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\";\r\n                        institutionFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                        institutionFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                        institutionFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                        institutionFileArray.push(institutionFile);\r\n                    }   \r\n                }else{\r\n                    institutionFile[\"sfilename\"] = selectedRecord.slinkfilename.trim();\r\n                    institutionFile[\"sfiledesc\"] = selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\";\r\n                    institutionFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n                    institutionFile[\"ssystemfilename\"] = \"\";\r\n                    institutionFile[\"nfilesize\"] = 0;\r\n                    institutionFileArray.push(institutionFile);\r\n                }\r\n                formData.append(\"isFileEdited\", isFileEdited);\r\n                formData.append(\"institutionfile\", JSON.stringify(institutionFileArray));\r\n                let selectedId = null;\r\n                let postParam = undefined;\r\n                if ( this.props.Login.operation === \"update\"){\r\n                    postParam =  { inputListName : \"Institution\", selectedObject : \"selectedInstitution\", primaryKeyField : \"ninstitutioncode\" };\r\n                    selectedId = selectedRecord[\"ninstitutionfilecode\"];               \r\n                }\r\n                const inputParam = {\r\n                    inputData: { userinfo: this.props.Login.userInfo},\r\n                    formData: formData,\r\n                    isFileupload: true,\r\n                    operation: this.props.Login.operation,\r\n                    classUrl: \"institution\",\r\n                    saveType, formRef, methodUrl: \"InstitutionFile\",postParam\r\n                }\r\n                \r\n                if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n                    const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                        openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }),\r\n                        operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                    this.props.updateStore(updateInfo);\r\n                }else {\r\n                    this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n                }\r\n\r\n        }\r\n\r\n        \r\n        \r\n    }\r\n    \r\n    ConfirmDelete = (deleteId) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.DeleteInstitution(\"delete\",deleteId));\r\n    }\r\n\r\n    DeleteInstitutionFile = (deleteTestParam) => {\r\n        let inputData = [];\r\n        let ncontrolcode =deleteTestParam.ncontrolCode;\r\n        let operation =deleteTestParam.operation;\r\n        inputData[\"institutionfile\"] = deleteTestParam.selectedRecord;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institutionfile\", selectedObject: \"selectedInstitutionFile\",\r\n            primaryKeyField: \"ninstitutionfilecode\",\r\n            primaryKeyValue: deleteTestParam.selectedRecord.ninstitutionfilecode,\r\n            fetchUrl: \"institution/getInstitutionFile\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"InstitutionFile\", \r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolcode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openModal: true, screenName: \"Institution\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    \r\n    DeleteInstitutionSite = (deleteParam) => {\r\n        let inputData = [];\r\n        let ncontrolcode =deleteParam.ncontrolCode;\r\n        let operation =deleteParam.operation;\r\n        inputData[\"institutionsite\"] = deleteParam.selectedRecord;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institutionsite\", selectedObject: \"selectedInstitutionSite\",\r\n            primaryKeyField: \"ninstitutionsitecode\",\r\n            primaryKeyValue: deleteParam.selectedRecord.ninstitutionsitecode,\r\n            fetchUrl: \"institution/getInstitutionSite\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"InstitutionSite\", \r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolcode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openModal: true, screenName: \"Institution\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    DeleteInstitution= (operation, ncontrolCode) => {\r\n        let inputData = [];\r\n\r\n        inputData[\"institution\"] = this.props.Login.masterData.selectedInstitution;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        const postParam = {\r\n            inputListName: \"institution\", selectedObject: \"selectedInstitution\",\r\n            primaryKeyField: \"ninstitutioncode\",\r\n            primaryKeyValue: this.props.Login.masterData.selectedInstitution.ninstitutioncode,\r\n            fetchUrl: \"institution/getInstitution\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"Institution\", \r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            postParam\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openModal: true, screenName: \"Institution\", operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    viewInstitutionFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                institutionfile: filedata,\r\n                userinfo: this.props.Login.userInfo\r\n            },\r\n            classUrl: \"institution\",\r\n            operation: \"view\",\r\n            methodUrl: \"InstitutionFile\",\r\n            screenName: \"IDS_INSTITUTION\"\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n    onDropInstitutionFile = (attachedFiles, fieldName, maxSize) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(\r\n          selectedRecord[fieldName],\r\n          attachedFiles,\r\n          maxSize\r\n        );\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    };\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(\r\n          selectedRecord[fieldName],\r\n          file\r\n        );\r\n    \r\n        this.setState({\r\n          selectedRecord,\r\n          actionType: \"delete\",\r\n        });\r\n    };\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n    generateBreadCrumData() {\r\n        const breadCrumbData = [];\r\n        if (this.props.Login.masterData && this.props.Login.masterData.FilterInstitutionCategory) {\r\n\r\n            breadCrumbData.push(\r\n                {\r\n                    \"label\": \"IDS_INSTITUTIONCATEGORY\",\r\n                    \"value\": this.props.Login.masterData.SelectedInstitutionCategory ? this.props.Login.masterData.SelectedInstitutionCategory.sinstitutioncatname : \"-\"\r\n                }\r\n            );\r\n        }\r\n        return breadCrumbData;\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            selectedRecord =  this.props.Login.selectedRecord \r\n            this.setState({ selectedRecord});\r\n        }\r\n\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({  userRoleControlRights, controlMap, data: this.props.Login.masterData});\r\n            }\r\n            else {\r\n\r\n                let { dataState } = this.state;\r\n                if (this.props.Login.dataState === undefined) {\r\n                    dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 }\r\n                }\r\n\r\n                this.setState({ data: this.props.Login.masterData, dataState,selectedRecord :this.props.Login.selectedRecord  });\r\n            }\r\n\r\n            \r\n\r\n            let FilterInstitutionCategory = this.state.FilterInstitutionCategory || {};\r\n\r\n            if (this.props.Login.masterData.FilterInstitutionCategory !== previousProps.Login.masterData.FilterInstitutionCategory) {\r\n                const InstitutionCategoryMap = constructOptionList(this.props.Login.masterData.FilterInstitutionCategory || [], \"ninstitutioncatcode\", \"sinstitutioncatname\", 'ninstitutioncatcode', 'descending', false);\r\n                FilterInstitutionCategory = InstitutionCategoryMap.get(\"OptionList\");               \r\n            } \r\n            this.setState({ FilterInstitutionCategory});\r\n\r\n            \r\n        }\r\n       \r\n        \r\n        \r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            const filterData = this.generateBreadCrumData();\r\n            this.setState({ filterData });\r\n        }\r\n    }\r\n    \r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService,crudMaster,validateEsignCredential,updateStore,getInstitutionDetail,getInstitutionCombo,getInstitutionSiteData,addInstitutionFile,changeInstitutionCategoryFilter,viewAttachment,filterColumnData\r\n})(injectIntl(Institution));\r\n"]},"metadata":{},"sourceType":"module"}