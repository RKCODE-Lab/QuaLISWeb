{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _range = _interopRequireDefault(require(\"lodash/range\"));\n\nvar _configUtils = require(\"../../utils/configUtils\");\n\nvar _ruleUtils = require(\"../../utils/ruleUtils\");\n\nvar _stuff = require(\"../../utils/stuff\");\n\nvar _reactUtils = require(\"../../utils/reactUtils\");\n\nvar _pick = _interopRequireDefault(require(\"lodash/pick\"));\n\nvar _immutable = _interopRequireDefault(require(\"immutable\"));\n\nvar _WidgetFactory = _interopRequireDefault(require(\"./WidgetFactory\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar funcArgDummyOpDef = {\n  cardinality: 1\n};\n\nvar Widget = /*#__PURE__*/function (_PureComponent) {\n  (0, _inherits2[\"default\"])(Widget, _PureComponent);\n\n  var _super = _createSuper(Widget);\n\n  function Widget(_props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Widget);\n    _this = _super.call(this, _props);\n\n    _this._setValue = function (isSpecialRange, delta, widgetType, value, asyncListValues, __isInternal) {\n      if (isSpecialRange && Array.isArray(value)) {\n        var oldRange = [_this.props.value.get(0), _this.props.value.get(1)];\n        if (oldRange[0] != value[0]) _this.props.setValue(0, value[0], widgetType, asyncListValues, __isInternal);\n        if (oldRange[1] != value[1]) _this.props.setValue(1, value[1], widgetType, asyncListValues, __isInternal);\n      } else {\n        _this.props.setValue(delta, value, widgetType, asyncListValues, __isInternal);\n      }\n    };\n\n    _this._onChangeValueSrc = function (delta, srcKey) {\n      _this.props.setValueSrc(delta, srcKey);\n    };\n\n    _this.renderWidget = function (delta, meta, props) {\n      var config = props.config,\n          isFuncArg = props.isFuncArg,\n          leftField = props.leftField,\n          operator = props.operator,\n          values = props.value,\n          valueError = props.valueError,\n          readonly = props.readonly,\n          parentField = props.parentField,\n          parentFuncs = props.parentFuncs,\n          id = props.id,\n          groupId = props.groupId;\n      var settings = config.settings;\n      var widgets = meta.widgets,\n          iValues = meta.iValues,\n          aField = meta.aField;\n      var value = isFuncArg ? iValues : values;\n      var field = isFuncArg ? leftField : aField;\n      var _widgets$delta = widgets[delta],\n          valueSrc = _widgets$delta.valueSrc,\n          valueLabel = _widgets$delta.valueLabel;\n      var widgetLabel = settings.showLabels ? /*#__PURE__*/_react[\"default\"].createElement(\"label\", {\n        className: \"rule--label\"\n      }, valueLabel.label) : null;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        key: \"widget-\" + field + \"-\" + delta,\n        className: \"widget--widget\"\n      }, valueSrc == \"func\" ? null : widgetLabel, /*#__PURE__*/_react[\"default\"].createElement(_WidgetFactory[\"default\"], (0, _extends2[\"default\"])({\n        id: id,\n        groupId: groupId,\n        valueSrc: valueSrc,\n        delta: delta,\n        value: value,\n        valueError: valueError,\n        isFuncArg: isFuncArg\n      }, (0, _pick[\"default\"])(meta, [\"isSpecialRange\", \"fieldDefinition\", \"asyncListValues\"]), (0, _pick[\"default\"])(widgets[delta], [\"widget\", \"widgetDefinition\", \"widgetValueLabel\", \"valueLabels\", \"textSeparators\", \"setValueHandler\"]), {\n        config: config,\n        field: field,\n        parentField: parentField,\n        parentFuncs: parentFuncs,\n        operator: operator,\n        readonly: readonly\n      })));\n    };\n\n    _this.renderValueSources = function (delta, meta, props) {\n      var config = props.config,\n          isFuncArg = props.isFuncArg,\n          leftField = props.leftField,\n          operator = props.operator,\n          readonly = props.readonly;\n      var settings = config.settings;\n      var valueSources = meta.valueSources,\n          widgets = meta.widgets,\n          aField = meta.aField;\n      var field = isFuncArg ? leftField : aField;\n      var _widgets$delta2 = widgets[delta],\n          valueSrc = _widgets$delta2.valueSrc,\n          setValueSrcHandler = _widgets$delta2.setValueSrcHandler;\n      var valueSourcesInfo = settings.valueSourcesInfo,\n          ValueSources = settings.renderValueSources;\n      var valueSourcesOptions = valueSources.map(function (srcKey) {\n        return [srcKey, {\n          label: valueSourcesInfo[srcKey].label\n        }];\n      });\n      var sourceLabel = settings.showLabels ? /*#__PURE__*/_react[\"default\"].createElement(\"label\", {\n        className: \"rule--label\"\n      }, \"\\xA0\") : null;\n      return valueSources.length > 1 && !readonly && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        key: \"valuesrc-\" + field + \"-\" + delta,\n        className: \"widget--valuesrc\"\n      }, sourceLabel, /*#__PURE__*/_react[\"default\"].createElement(ValueSources, {\n        key: \"valuesrc-\" + delta,\n        delta: delta,\n        valueSources: valueSourcesOptions,\n        valueSrc: valueSrc,\n        config: config,\n        field: field,\n        operator: operator,\n        setValueSrc: setValueSrcHandler,\n        readonly: readonly,\n        title: settings.valueSourcesPopupTitle\n      }));\n    };\n\n    _this.renderSep = function (delta, meta, props) {\n      var config = props.config;\n      var widgets = meta.widgets;\n      var settings = config.settings;\n      var sepText = widgets[delta].sepText;\n      var sepLabel = settings.showLabels ? /*#__PURE__*/_react[\"default\"].createElement(\"label\", {\n        className: \"rule--label\"\n      }, \"\\xA0\") : null;\n      return sepText && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        key: \"widget-separators-\" + delta,\n        className: \"widget--sep\"\n      }, sepLabel, /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, sepText));\n    };\n\n    _this.renderWidgetDelta = function (delta) {\n      var sep = _this.renderSep(delta, _this.meta, _this.props);\n\n      var sources = _this.renderValueSources(delta, _this.meta, _this.props);\n\n      var widgetCmp = _this.renderWidget(delta, _this.meta, _this.props);\n\n      return [sep, sources, widgetCmp];\n    };\n\n    (0, _reactUtils.useOnPropsChanged)((0, _assertThisInitialized2[\"default\"])(_this));\n\n    _this.onPropsChanged(_props);\n\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Widget, [{\n    key: \"onPropsChanged\",\n    value: function onPropsChanged(nextProps) {\n      var prevProps = this.props;\n      var keysForMeta = [\"config\", \"field\", \"fieldFunc\", \"fieldArg\", \"leftField\", \"operator\", \"valueSrc\", \"isFuncArg\", \"asyncListValues\"];\n      var needUpdateMeta = !this.meta || keysForMeta.map(function (k) {\n        return nextProps[k] !== prevProps[k] //tip: for isFuncArg we need to wrap value in Imm list\n        || k == \"isFuncArg\" && nextProps[\"isFuncArg\"] && nextProps[\"value\"] !== prevProps[\"value\"];\n      }).filter(function (ch) {\n        return ch;\n      }).length > 0;\n\n      if (needUpdateMeta) {\n        this.meta = this.getMeta(nextProps);\n      }\n    }\n  }, {\n    key: \"getMeta\",\n    value: function getMeta(_ref) {\n      var _this2 = this;\n\n      var config = _ref.config,\n          simpleField = _ref.field,\n          fieldFunc = _ref.fieldFunc,\n          fieldArg = _ref.fieldArg,\n          operator = _ref.operator,\n          valueSrcs = _ref.valueSrc,\n          values = _ref.value,\n          isForRuleGruop = _ref.isForRuleGruop,\n          isFuncArg = _ref.isFuncArg,\n          leftField = _ref.leftField,\n          asyncListValues = _ref.asyncListValues;\n      var field = isFuncArg ? {\n        func: fieldFunc,\n        arg: fieldArg\n      } : simpleField;\n      var iValueSrcs = valueSrcs;\n      var iValues = values;\n\n      if (isFuncArg || isForRuleGruop) {\n        iValueSrcs = _immutable[\"default\"].List([valueSrcs]);\n        iValues = _immutable[\"default\"].List([values]);\n      }\n\n      var fieldDefinition = (0, _configUtils.getFieldConfig)(config, field);\n      var defaultWidget = (0, _ruleUtils.getWidgetForFieldOp)(config, field, operator);\n\n      var _widgets = (0, _ruleUtils.getWidgetsForFieldOp)(config, field, operator);\n\n      var operatorDefinition = isFuncArg ? funcArgDummyOpDef : (0, _configUtils.getOperatorConfig)(config, operator, field);\n\n      if (fieldDefinition == null || operatorDefinition == null) {\n        return null;\n      }\n\n      var isSpecialRange = operatorDefinition.isSpecialRange;\n      var isSpecialRangeForSrcField = isSpecialRange && (iValueSrcs.get(0) == \"field\" || iValueSrcs.get(1) == \"field\");\n      var isTrueSpecialRange = isSpecialRange && !isSpecialRangeForSrcField;\n      var cardinality = isTrueSpecialRange ? 1 : (0, _stuff.defaultValue)(operatorDefinition.cardinality, 1);\n\n      if (cardinality === 0) {\n        return null;\n      }\n\n      var valueSources = (0, _ruleUtils.getValueSourcesForFieldOp)(config, field, operator, fieldDefinition, isFuncArg ? leftField : null);\n      var widgets = (0, _range[\"default\"])(0, cardinality).map(function (delta) {\n        var valueSrc = iValueSrcs.get(delta) || null;\n        var widget = (0, _ruleUtils.getWidgetForFieldOp)(config, field, operator, valueSrc);\n        var widgetDefinition = (0, _configUtils.getFieldWidgetConfig)(config, field, operator, widget, valueSrc);\n\n        if (isSpecialRangeForSrcField) {\n          widget = widgetDefinition.singleWidget;\n          widgetDefinition = (0, _configUtils.getFieldWidgetConfig)(config, field, operator, widget, valueSrc);\n        }\n\n        var widgetType = widgetDefinition.type;\n        var valueLabel = (0, _ruleUtils.getValueLabel)(config, field, operator, delta, valueSrc, isTrueSpecialRange);\n        var widgetValueLabel = (0, _ruleUtils.getValueLabel)(config, field, operator, delta, null, isTrueSpecialRange);\n        var sepText = operatorDefinition.textSeparators ? operatorDefinition.textSeparators[delta] : null;\n\n        var setValueSrcHandler = _this2._onChangeValueSrc.bind(_this2, delta);\n\n        var valueLabels = null;\n        var textSeparators = null;\n\n        if (isSpecialRange) {\n          valueLabels = [(0, _ruleUtils.getValueLabel)(config, field, operator, 0), (0, _ruleUtils.getValueLabel)(config, field, operator, 1)];\n          valueLabels = {\n            placeholder: [valueLabels[0].placeholder, valueLabels[1].placeholder],\n            label: [valueLabels[0].label, valueLabels[1].label]\n          };\n          textSeparators = operatorDefinition.textSeparators;\n        }\n\n        var setValueHandler = _this2._setValue.bind(_this2, isSpecialRange, delta, widgetType);\n\n        return {\n          valueSrc: valueSrc,\n          valueLabel: valueLabel,\n          widget: widget,\n          sepText: sepText,\n          setValueSrcHandler: setValueSrcHandler,\n          widgetDefinition: widgetDefinition,\n          widgetValueLabel: widgetValueLabel,\n          valueLabels: valueLabels,\n          textSeparators: textSeparators,\n          setValueHandler: setValueHandler\n        };\n      });\n      return {\n        defaultWidget: defaultWidget,\n        fieldDefinition: fieldDefinition,\n        operatorDefinition: operatorDefinition,\n        isSpecialRange: isTrueSpecialRange,\n        cardinality: cardinality,\n        valueSources: valueSources,\n        widgets: widgets,\n        iValues: iValues,\n        //correct for isFuncArg\n        aField: field,\n        //correct for isFuncArg\n        asyncListValues: asyncListValues\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.meta) return null;\n      var _this$meta = this.meta,\n          defaultWidget = _this$meta.defaultWidget,\n          cardinality = _this$meta.cardinality;\n      var name = defaultWidget;\n      return /*#__PURE__*/_react[\"default\"].createElement(_utils.Col, {\n        className: \"rule--widget rule--widget--\".concat(name.toUpperCase()),\n        key: \"widget-col-\" + name\n      }, (0, _range[\"default\"])(0, cardinality).map(this.renderWidgetDelta));\n    }\n  }]);\n  return Widget;\n}(_react.PureComponent);\n\nexports[\"default\"] = Widget;\nWidget.propTypes = {\n  config: _propTypes[\"default\"].object.isRequired,\n  value: _propTypes[\"default\"].any,\n  //instanceOf(Immutable.List)\n  valueSrc: _propTypes[\"default\"].any,\n  //instanceOf(Immutable.List)\n  valueError: _propTypes[\"default\"].any,\n  field: _propTypes[\"default\"].string,\n  operator: _propTypes[\"default\"].string,\n  readonly: _propTypes[\"default\"].bool,\n  asyncListValues: _propTypes[\"default\"].array,\n  id: _propTypes[\"default\"].string,\n  groupId: _propTypes[\"default\"].string,\n  //actions\n  setValue: _propTypes[\"default\"].func,\n  setValueSrc: _propTypes[\"default\"].func,\n  // for isFuncArg\n  isFuncArg: _propTypes[\"default\"].bool,\n  fieldFunc: _propTypes[\"default\"].string,\n  fieldArg: _propTypes[\"default\"].string,\n  leftField: _propTypes[\"default\"].string,\n  // for RuleGroupExt\n  isForRuleGruop: _propTypes[\"default\"].bool,\n  parentField: _propTypes[\"default\"].string,\n  // for func in func\n  parentFuncs: _propTypes[\"default\"].array\n};","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/node_modules/react-awesome-query-builder/lib/components/rule/Widget.js"],"names":["_interopRequireDefault","require","_typeof","Object","defineProperty","exports","value","_extends2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_react","_interopRequireWildcard","_propTypes","_range","_configUtils","_ruleUtils","_stuff","_reactUtils","_pick","_immutable","_WidgetFactory","_utils","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","valueOf","e","funcArgDummyOpDef","cardinality","Widget","_PureComponent","_super","_props","_this","_setValue","isSpecialRange","delta","widgetType","asyncListValues","__isInternal","Array","isArray","oldRange","props","setValue","_onChangeValueSrc","srcKey","setValueSrc","renderWidget","meta","config","isFuncArg","leftField","operator","values","valueError","readonly","parentField","parentFuncs","id","groupId","settings","widgets","iValues","aField","field","_widgets$delta","valueSrc","valueLabel","widgetLabel","showLabels","createElement","className","label","renderValueSources","valueSources","_widgets$delta2","setValueSrcHandler","valueSourcesInfo","ValueSources","valueSourcesOptions","map","sourceLabel","length","title","valueSourcesPopupTitle","renderSep","sepText","sepLabel","renderWidgetDelta","sep","sources","widgetCmp","useOnPropsChanged","onPropsChanged","nextProps","prevProps","keysForMeta","needUpdateMeta","k","filter","ch","getMeta","_ref","_this2","simpleField","fieldFunc","fieldArg","valueSrcs","isForRuleGruop","func","arg","iValueSrcs","List","fieldDefinition","getFieldConfig","defaultWidget","getWidgetForFieldOp","_widgets","getWidgetsForFieldOp","operatorDefinition","getOperatorConfig","isSpecialRangeForSrcField","isTrueSpecialRange","defaultValue","getValueSourcesForFieldOp","widget","widgetDefinition","getFieldWidgetConfig","singleWidget","type","getValueLabel","widgetValueLabel","textSeparators","bind","valueLabels","placeholder","setValueHandler","render","_this$meta","name","Col","concat","toUpperCase","PureComponent","propTypes","object","isRequired","any","string","bool","array"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _range = _interopRequireDefault(require(\"lodash/range\"));\n\nvar _configUtils = require(\"../../utils/configUtils\");\n\nvar _ruleUtils = require(\"../../utils/ruleUtils\");\n\nvar _stuff = require(\"../../utils/stuff\");\n\nvar _reactUtils = require(\"../../utils/reactUtils\");\n\nvar _pick = _interopRequireDefault(require(\"lodash/pick\"));\n\nvar _immutable = _interopRequireDefault(require(\"immutable\"));\n\nvar _WidgetFactory = _interopRequireDefault(require(\"./WidgetFactory\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar funcArgDummyOpDef = {\n  cardinality: 1\n};\n\nvar Widget = /*#__PURE__*/function (_PureComponent) {\n  (0, _inherits2[\"default\"])(Widget, _PureComponent);\n\n  var _super = _createSuper(Widget);\n\n  function Widget(_props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, Widget);\n    _this = _super.call(this, _props);\n\n    _this._setValue = function (isSpecialRange, delta, widgetType, value, asyncListValues, __isInternal) {\n      if (isSpecialRange && Array.isArray(value)) {\n        var oldRange = [_this.props.value.get(0), _this.props.value.get(1)];\n        if (oldRange[0] != value[0]) _this.props.setValue(0, value[0], widgetType, asyncListValues, __isInternal);\n        if (oldRange[1] != value[1]) _this.props.setValue(1, value[1], widgetType, asyncListValues, __isInternal);\n      } else {\n        _this.props.setValue(delta, value, widgetType, asyncListValues, __isInternal);\n      }\n    };\n\n    _this._onChangeValueSrc = function (delta, srcKey) {\n      _this.props.setValueSrc(delta, srcKey);\n    };\n\n    _this.renderWidget = function (delta, meta, props) {\n      var config = props.config,\n          isFuncArg = props.isFuncArg,\n          leftField = props.leftField,\n          operator = props.operator,\n          values = props.value,\n          valueError = props.valueError,\n          readonly = props.readonly,\n          parentField = props.parentField,\n          parentFuncs = props.parentFuncs,\n          id = props.id,\n          groupId = props.groupId;\n      var settings = config.settings;\n      var widgets = meta.widgets,\n          iValues = meta.iValues,\n          aField = meta.aField;\n      var value = isFuncArg ? iValues : values;\n      var field = isFuncArg ? leftField : aField;\n      var _widgets$delta = widgets[delta],\n          valueSrc = _widgets$delta.valueSrc,\n          valueLabel = _widgets$delta.valueLabel;\n      var widgetLabel = settings.showLabels ? /*#__PURE__*/_react[\"default\"].createElement(\"label\", {\n        className: \"rule--label\"\n      }, valueLabel.label) : null;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        key: \"widget-\" + field + \"-\" + delta,\n        className: \"widget--widget\"\n      }, valueSrc == \"func\" ? null : widgetLabel, /*#__PURE__*/_react[\"default\"].createElement(_WidgetFactory[\"default\"], (0, _extends2[\"default\"])({\n        id: id,\n        groupId: groupId,\n        valueSrc: valueSrc,\n        delta: delta,\n        value: value,\n        valueError: valueError,\n        isFuncArg: isFuncArg\n      }, (0, _pick[\"default\"])(meta, [\"isSpecialRange\", \"fieldDefinition\", \"asyncListValues\"]), (0, _pick[\"default\"])(widgets[delta], [\"widget\", \"widgetDefinition\", \"widgetValueLabel\", \"valueLabels\", \"textSeparators\", \"setValueHandler\"]), {\n        config: config,\n        field: field,\n        parentField: parentField,\n        parentFuncs: parentFuncs,\n        operator: operator,\n        readonly: readonly\n      })));\n    };\n\n    _this.renderValueSources = function (delta, meta, props) {\n      var config = props.config,\n          isFuncArg = props.isFuncArg,\n          leftField = props.leftField,\n          operator = props.operator,\n          readonly = props.readonly;\n      var settings = config.settings;\n      var valueSources = meta.valueSources,\n          widgets = meta.widgets,\n          aField = meta.aField;\n      var field = isFuncArg ? leftField : aField;\n      var _widgets$delta2 = widgets[delta],\n          valueSrc = _widgets$delta2.valueSrc,\n          setValueSrcHandler = _widgets$delta2.setValueSrcHandler;\n      var valueSourcesInfo = settings.valueSourcesInfo,\n          ValueSources = settings.renderValueSources;\n      var valueSourcesOptions = valueSources.map(function (srcKey) {\n        return [srcKey, {\n          label: valueSourcesInfo[srcKey].label\n        }];\n      });\n      var sourceLabel = settings.showLabels ? /*#__PURE__*/_react[\"default\"].createElement(\"label\", {\n        className: \"rule--label\"\n      }, \"\\xA0\") : null;\n      return valueSources.length > 1 && !readonly && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        key: \"valuesrc-\" + field + \"-\" + delta,\n        className: \"widget--valuesrc\"\n      }, sourceLabel, /*#__PURE__*/_react[\"default\"].createElement(ValueSources, {\n        key: \"valuesrc-\" + delta,\n        delta: delta,\n        valueSources: valueSourcesOptions,\n        valueSrc: valueSrc,\n        config: config,\n        field: field,\n        operator: operator,\n        setValueSrc: setValueSrcHandler,\n        readonly: readonly,\n        title: settings.valueSourcesPopupTitle\n      }));\n    };\n\n    _this.renderSep = function (delta, meta, props) {\n      var config = props.config;\n      var widgets = meta.widgets;\n      var settings = config.settings;\n      var sepText = widgets[delta].sepText;\n      var sepLabel = settings.showLabels ? /*#__PURE__*/_react[\"default\"].createElement(\"label\", {\n        className: \"rule--label\"\n      }, \"\\xA0\") : null;\n      return sepText && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        key: \"widget-separators-\" + delta,\n        className: \"widget--sep\"\n      }, sepLabel, /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, sepText));\n    };\n\n    _this.renderWidgetDelta = function (delta) {\n      var sep = _this.renderSep(delta, _this.meta, _this.props);\n\n      var sources = _this.renderValueSources(delta, _this.meta, _this.props);\n\n      var widgetCmp = _this.renderWidget(delta, _this.meta, _this.props);\n\n      return [sep, sources, widgetCmp];\n    };\n\n    (0, _reactUtils.useOnPropsChanged)((0, _assertThisInitialized2[\"default\"])(_this));\n\n    _this.onPropsChanged(_props);\n\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(Widget, [{\n    key: \"onPropsChanged\",\n    value: function onPropsChanged(nextProps) {\n      var prevProps = this.props;\n      var keysForMeta = [\"config\", \"field\", \"fieldFunc\", \"fieldArg\", \"leftField\", \"operator\", \"valueSrc\", \"isFuncArg\", \"asyncListValues\"];\n      var needUpdateMeta = !this.meta || keysForMeta.map(function (k) {\n        return nextProps[k] !== prevProps[k] //tip: for isFuncArg we need to wrap value in Imm list\n        || k == \"isFuncArg\" && nextProps[\"isFuncArg\"] && nextProps[\"value\"] !== prevProps[\"value\"];\n      }).filter(function (ch) {\n        return ch;\n      }).length > 0;\n\n      if (needUpdateMeta) {\n        this.meta = this.getMeta(nextProps);\n      }\n    }\n  }, {\n    key: \"getMeta\",\n    value: function getMeta(_ref) {\n      var _this2 = this;\n\n      var config = _ref.config,\n          simpleField = _ref.field,\n          fieldFunc = _ref.fieldFunc,\n          fieldArg = _ref.fieldArg,\n          operator = _ref.operator,\n          valueSrcs = _ref.valueSrc,\n          values = _ref.value,\n          isForRuleGruop = _ref.isForRuleGruop,\n          isFuncArg = _ref.isFuncArg,\n          leftField = _ref.leftField,\n          asyncListValues = _ref.asyncListValues;\n      var field = isFuncArg ? {\n        func: fieldFunc,\n        arg: fieldArg\n      } : simpleField;\n      var iValueSrcs = valueSrcs;\n      var iValues = values;\n\n      if (isFuncArg || isForRuleGruop) {\n        iValueSrcs = _immutable[\"default\"].List([valueSrcs]);\n        iValues = _immutable[\"default\"].List([values]);\n      }\n\n      var fieldDefinition = (0, _configUtils.getFieldConfig)(config, field);\n      var defaultWidget = (0, _ruleUtils.getWidgetForFieldOp)(config, field, operator);\n\n      var _widgets = (0, _ruleUtils.getWidgetsForFieldOp)(config, field, operator);\n\n      var operatorDefinition = isFuncArg ? funcArgDummyOpDef : (0, _configUtils.getOperatorConfig)(config, operator, field);\n\n      if (fieldDefinition == null || operatorDefinition == null) {\n        return null;\n      }\n\n      var isSpecialRange = operatorDefinition.isSpecialRange;\n      var isSpecialRangeForSrcField = isSpecialRange && (iValueSrcs.get(0) == \"field\" || iValueSrcs.get(1) == \"field\");\n      var isTrueSpecialRange = isSpecialRange && !isSpecialRangeForSrcField;\n      var cardinality = isTrueSpecialRange ? 1 : (0, _stuff.defaultValue)(operatorDefinition.cardinality, 1);\n\n      if (cardinality === 0) {\n        return null;\n      }\n\n      var valueSources = (0, _ruleUtils.getValueSourcesForFieldOp)(config, field, operator, fieldDefinition, isFuncArg ? leftField : null);\n      var widgets = (0, _range[\"default\"])(0, cardinality).map(function (delta) {\n        var valueSrc = iValueSrcs.get(delta) || null;\n        var widget = (0, _ruleUtils.getWidgetForFieldOp)(config, field, operator, valueSrc);\n        var widgetDefinition = (0, _configUtils.getFieldWidgetConfig)(config, field, operator, widget, valueSrc);\n\n        if (isSpecialRangeForSrcField) {\n          widget = widgetDefinition.singleWidget;\n          widgetDefinition = (0, _configUtils.getFieldWidgetConfig)(config, field, operator, widget, valueSrc);\n        }\n\n        var widgetType = widgetDefinition.type;\n        var valueLabel = (0, _ruleUtils.getValueLabel)(config, field, operator, delta, valueSrc, isTrueSpecialRange);\n        var widgetValueLabel = (0, _ruleUtils.getValueLabel)(config, field, operator, delta, null, isTrueSpecialRange);\n        var sepText = operatorDefinition.textSeparators ? operatorDefinition.textSeparators[delta] : null;\n\n        var setValueSrcHandler = _this2._onChangeValueSrc.bind(_this2, delta);\n\n        var valueLabels = null;\n        var textSeparators = null;\n\n        if (isSpecialRange) {\n          valueLabels = [(0, _ruleUtils.getValueLabel)(config, field, operator, 0), (0, _ruleUtils.getValueLabel)(config, field, operator, 1)];\n          valueLabels = {\n            placeholder: [valueLabels[0].placeholder, valueLabels[1].placeholder],\n            label: [valueLabels[0].label, valueLabels[1].label]\n          };\n          textSeparators = operatorDefinition.textSeparators;\n        }\n\n        var setValueHandler = _this2._setValue.bind(_this2, isSpecialRange, delta, widgetType);\n\n        return {\n          valueSrc: valueSrc,\n          valueLabel: valueLabel,\n          widget: widget,\n          sepText: sepText,\n          setValueSrcHandler: setValueSrcHandler,\n          widgetDefinition: widgetDefinition,\n          widgetValueLabel: widgetValueLabel,\n          valueLabels: valueLabels,\n          textSeparators: textSeparators,\n          setValueHandler: setValueHandler\n        };\n      });\n      return {\n        defaultWidget: defaultWidget,\n        fieldDefinition: fieldDefinition,\n        operatorDefinition: operatorDefinition,\n        isSpecialRange: isTrueSpecialRange,\n        cardinality: cardinality,\n        valueSources: valueSources,\n        widgets: widgets,\n        iValues: iValues,\n        //correct for isFuncArg\n        aField: field,\n        //correct for isFuncArg\n        asyncListValues: asyncListValues\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.meta) return null;\n      var _this$meta = this.meta,\n          defaultWidget = _this$meta.defaultWidget,\n          cardinality = _this$meta.cardinality;\n      var name = defaultWidget;\n      return /*#__PURE__*/_react[\"default\"].createElement(_utils.Col, {\n        className: \"rule--widget rule--widget--\".concat(name.toUpperCase()),\n        key: \"widget-col-\" + name\n      }, (0, _range[\"default\"])(0, cardinality).map(this.renderWidgetDelta));\n    }\n  }]);\n  return Widget;\n}(_react.PureComponent);\n\nexports[\"default\"] = Widget;\nWidget.propTypes = {\n  config: _propTypes[\"default\"].object.isRequired,\n  value: _propTypes[\"default\"].any,\n  //instanceOf(Immutable.List)\n  valueSrc: _propTypes[\"default\"].any,\n  //instanceOf(Immutable.List)\n  valueError: _propTypes[\"default\"].any,\n  field: _propTypes[\"default\"].string,\n  operator: _propTypes[\"default\"].string,\n  readonly: _propTypes[\"default\"].bool,\n  asyncListValues: _propTypes[\"default\"].array,\n  id: _propTypes[\"default\"].string,\n  groupId: _propTypes[\"default\"].string,\n  //actions\n  setValue: _propTypes[\"default\"].func,\n  setValueSrc: _propTypes[\"default\"].func,\n  // for isFuncArg\n  isFuncArg: _propTypes[\"default\"].bool,\n  fieldFunc: _propTypes[\"default\"].string,\n  fieldArg: _propTypes[\"default\"].string,\n  leftField: _propTypes[\"default\"].string,\n  // for RuleGroupExt\n  isForRuleGruop: _propTypes[\"default\"].bool,\n  parentField: _propTypes[\"default\"].string,\n  // for func in func\n  parentFuncs: _propTypes[\"default\"].array\n};"]},"metadata":{},"sourceType":"script"}